<script src="https://eqcn.ajz.miesnfu.com/wp-content/plugins/wp-3d-pony/live2dw/lib/L2Dwidget.min.js"></script> 
<script>
ã€€ã€€let models = [
    "https://unpkg.com/live2d-widget-model-chitose@1.0.5/assets/chitose.model.json",
    "https://unpkg.com/live2d-widget-model-shizuku@1.0.5/assets/shizuku.model.json",
    "https://unpkg.com/live2d-widget-model-koharu@1.0.5/assets/koharu.model.json",
    "https://unpkg.com/live2d-widget-model-haruto@1.0.5/assets/haruto.model.json",
    "https://unpkg.com/live2d-widget-model-miku@1.0.5/assets/miku.model.json",
    "https://unpkg.com/live2d-widget-model-z16@1.0.5/assets/z16.model.json"
];
let m = models[Math.round(Math.random()*5)];
ã€€ã€€L2Dwidget.init({ 
ã€€ã€€"model": {jsonPath:m,"scale": 1 }, 
ã€€ã€€"display": { "position": "left", "width": 200, "height": 300,"hOffset": 0, "vOffset": -20 }, 
ã€€ã€€"mobile": { "show": true, "scale": 0.5 }, 
ã€€ã€€"react": { "opacityDefault": 0.7, "opacityOnHover": 0.2 } });
</script> 
<!DOCTYPE HTML>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
    <!--Setting-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="apple-mobile-web-app-capable" content="ç²å°‘çš„æŠ€æœ¯åšå®¢">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    <meta name="browsermode" content="application">
    <meta name="screen-orientation" content="portrait">
    <link rel="dns-prefetch" href="http://huishao.cc">
    <meta name="referrer" content="no-referrer">
    <!--SEO-->

<meta name="description" content="ç²å°‘çš„æŠ€æœ¯åšå®¢">



<meta name="keywords" content="ç²å°‘">



<meta name="robots" content="all">
<meta name="google" content="all">
<meta name="googlebot" content="all">
<meta name="verify" content="all">
    <!--Title-->


<title>åœ¨iOSåº”ç”¨ä¸­ä½¿ç”¨å®æ—¶æ´»åŠ¨ä¸çµåŠ¨å²› | ç²å°‘çš„æŠ€æœ¯åšå®¢</title>


    <link rel="alternate" href="/atom.xml" title="ç²å°‘çš„æŠ€æœ¯åšå®¢" type="application/atom+xml">


    <link rel="icon" href="/favicon.ico">

    



<link rel="stylesheet" href="/css/bootstrap.min.css?rev=3.3.7">
<link rel="stylesheet" href="/css/font-awesome.min.css?rev=4.5.0">
<link rel="stylesheet" href="/css/style.css?rev=@@hash">




    





    
</head>

</html>
<!--[if lte IE 8]>
<style>
    html{ font-size: 1em }
</style>
<![endif]-->
<!--[if lte IE 9]>
<div style="ie">ä½ ä½¿ç”¨çš„æµè§ˆå™¨ç‰ˆæœ¬è¿‡ä½ï¼Œä¸ºäº†ä½ æ›´å¥½çš„é˜…è¯»ä½“éªŒï¼Œè¯·æ›´æ–°æµè§ˆå™¨çš„ç‰ˆæœ¬æˆ–è€…ä½¿ç”¨å…¶ä»–ç°ä»£æµè§ˆå™¨ï¼Œæ¯”å¦‚Chromeã€Firefoxã€Safariç­‰ã€‚</div>
<![endif]-->

<body>
    <header class="main-header"  style="background-image:url(http://7xpw2b.com1.z0.glb.clouddn.com/hexo-sinppet/img/banner.png)"  >
    <div class="main-header-box">
        <a class="header-avatar" href="/" title='ç²å°‘'>
            <img src="/img/avatar.jpg" alt="logoå¤´åƒ" class="img-responsive center-block">
        </a>
        <div class="branding">
        	<!--<h2 class="text-hide">Snippetä¸»é¢˜,ä»æœªå¦‚æ­¤ç®€å•æœ‰è¶£</h2>-->
            
                <h2> å­¦å¦‚é€†æ°´è¡ŒèˆŸ </h2>
            
    	</div>
    </div>
</header>
    <nav class="main-navigation">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="navbar-header"><span class="nav-toggle-button collapsed pull-right" data-toggle="collapse" data-target="#main-menu" id="mnav">
                    <span class="sr-only"></span>
                        <i class="fa fa-bars"></i>
                    </span>
                    <a class="navbar-brand" href="http://huishao.cc">ç²å°‘çš„æŠ€æœ¯åšå®¢</a>
                </div>
                <div class="collapse navbar-collapse" id="main-menu">
                    <ul class="menu">
                        
                            <li role="presentation" class="text-center">
                                <a href="/"><i class="fa "></i>ä¸»é¡µ</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/archives/"><i class="fa "></i>å½’æ¡£</a>
                            </li>
                        
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>
    <section class="content-wrap">
        <div class="container">
            <div class="row">
                <main class="col-md-8 main-content m-post">
                    <p id="process"></p>
<article class="post">
    <div class="post-head">
        <h1 id="åœ¨iOSåº”ç”¨ä¸­ä½¿ç”¨å®æ—¶æ´»åŠ¨ä¸çµåŠ¨å²›">
            
	            åœ¨iOSåº”ç”¨ä¸­ä½¿ç”¨å®æ—¶æ´»åŠ¨ä¸çµåŠ¨å²›
            
        </h1>
        <div class="post-meta">
    
    
    <span class="categories-meta fa-wrap">
        <i class="fa fa-folder-open-o"></i>
        <a href="/categories/iOSé€»è¾‘åˆçª¥">
            iOSé€»è¾‘åˆçª¥
        </a>
    </span>
    
    
    <span class="fa-wrap">
        <i class="fa fa-tags"></i>
        <span class="tags-meta">
            
                
            
        </span>
    </span>
    

    
        
        <span class="fa-wrap">
            <i class="fa fa-clock-o"></i>
            <span class="date-meta">2023/12/30</span>
        </span>
    
</div>

            
            
    </div>
    
    <div class="post-body post-content">
        <h1 id="åœ¨iOSåº”ç”¨ä¸­ä½¿ç”¨å®æ—¶æ´»åŠ¨ä¸çµåŠ¨å²›"><a href="#åœ¨iOSåº”ç”¨ä¸­ä½¿ç”¨å®æ—¶æ´»åŠ¨ä¸çµåŠ¨å²›" class="headerlink" title="åœ¨iOSåº”ç”¨ä¸­ä½¿ç”¨å®æ—¶æ´»åŠ¨ä¸çµåŠ¨å²›"></a>åœ¨iOSåº”ç”¨ä¸­ä½¿ç”¨å®æ—¶æ´»åŠ¨ä¸çµåŠ¨å²›</h1><p>iOS16ç³»ç»Ÿå¼•å…¥äº†å®æ—¶æ´»åŠ¨ä¸çµåŠ¨å²›ç›¸å…³çš„APIã€‚å®æ—¶æ´»åŠ¨APIèƒ½å¤Ÿè®©ç”¨æˆ·åœ¨æ¡Œé¢ç›´æ¥æµè§ˆåˆ°åº”ç”¨ç¨‹åºæ‰€æä¾›çš„å®æ—¶æ€§è¾ƒé«˜çš„ä¿¡æ¯ï¼Œä¾‹å¦‚æ¯”èµ›çš„æ¯”åˆ†ä¿¡æ¯ï¼Œå¤–å–çš„é…é€è¿›åº¦ä¿¡æ¯ï¼Œç¥¨åŠ¡ä¿¡æ¯ç­‰ã€‚åœ¨æ”¯æŒçµåŠ¨å²›çš„è®¾å¤‡ä¸Šï¼Œå®æ—¶æ´»åŠ¨é…åˆçµåŠ¨å²›ï¼Œæ›´æ˜¯èƒ½å¸¦ç»™ç”¨æˆ·æ²‰æµ¸å¼çš„ä¿¡æ¯è·å–ä½“éªŒï¼Œåœ¨æŸäº›ç‰¹å®šåº”ç”¨åœºæ™¯ä¸‹éå¸¸æœ‰ç”¨ã€‚</p>
<h2 id="1-å¼•è¨€"><a href="#1-å¼•è¨€" class="headerlink" title="1 - å¼•è¨€"></a>1 - å¼•è¨€</h2><p>ä»iOS16å¼€å§‹ï¼Œå®æ—¶æ´»åŠ¨èƒ½å¤Ÿåœ¨é”å±ã€å¾…æœºæ¡Œé¢ä»¥åŠçµåŠ¨å²›ç­‰ä½ç½®æä¾›ä¿¡æ¯æ›´æ–°å±•ç¤ºã€‚åœ¨æŸäº›ç‰¹å®šåœºæ™¯ä¸‹ï¼Œå®æ—¶æ´»åŠ¨å¯ä»¥æä¾›ç»™ç”¨æˆ·å‡ ä¸ªå°æ—¶å†…æŒæ¡å®æ—¶äº‹ä»¶ã€æ´»åŠ¨æˆ–ä»»åŠ¡æ›´æ–°ã€‚å¸¸è§çš„åº”ç”¨åœºæ™¯æœ‰ï¼š</p>
<p>- å¤–å–ç±»åº”ç”¨å®æ—¶æä¾›ç”¨æˆ·é…é€è¿›åº¦ï¼Œå‰©ä½™æ—¶é—´ã€‚</p>
<p>- èµ›äº‹ç±»åº”ç”¨çš„å®æ—¶åˆ†æ•°ã€‚</p>
<p>- å¥èº«ç±»åº”ç”¨ä¸å¯ç©¿æˆ´è®¾å¤‡çš„å®æ—¶ä½“èƒ½çŠ¶æ€æ›´æ–°ã€‚</p>
<p>å®æ—¶åº”ç”¨å°†ä¼šå±•ç¤ºåœ¨è®¾å¤‡çš„ï¼š</p>
<p>- é”å±é¡µé¢</p>
<p>- é€šçŸ¥åˆ—è¡¨é¡¶éƒ¨</p>
<p>- åœ¨æ”¯æŒçµåŠ¨å²›çš„è®¾å¤‡ä¸Šï¼Œåœ¨çµåŠ¨å²›ä½ç½®å±•ç¤º</p>
<p>- ä¸æ”¯æŒçµåŠ¨å²›çš„è®¾å¤‡ä¸Šï¼Œå®æ—¶æ´»åŠ¨çš„æ›´æ–°ä¼šåœ¨å±å¹•é¡¶éƒ¨å¼¹å‡ºé€šçŸ¥</p>
<p>- å¾…æœºæ˜¾ç¤ºæ—¶ï¼Œå®æ—¶æ´»åŠ¨ä¼šå……æ»¡æ•´ä¸ªå±å¹•</p>
<p>éœ€è¦æ³¨æ„ï¼ŒçµåŠ¨å²›çš„å¯å¯æ˜¾ç¤ºåŒºåŸŸä¼˜å…ˆï¼Œåœ¨å¼€å‘å®æ—¶æ´»åŠ¨æ—¶ï¼Œåœ¨è®¾è®¡ä¸Šå¯ä»¥å‚è€ƒä¸‹é¢çš„æœ€ä½³å®è·µæ–‡æ¡£ï¼š</p>
<p><a href="https://developer.apple.com/cn/design/human-interface-guidelines/live-activities/" target="_blank" rel="noopener">https://developer.apple.com/cn/design/human-interface-guidelines/live-activities/</a></p>
<h2 id="2-å¼€å‘å®æ—¶æ´»åŠ¨ä¸é€‚é…çµåŠ¨å²›"><a href="#2-å¼€å‘å®æ—¶æ´»åŠ¨ä¸é€‚é…çµåŠ¨å²›" class="headerlink" title="2 - å¼€å‘å®æ—¶æ´»åŠ¨ä¸é€‚é…çµåŠ¨å²›"></a>2 - å¼€å‘å®æ—¶æ´»åŠ¨ä¸é€‚é…çµåŠ¨å²›</h2><p>é¦–å…ˆï¼Œè¦æ”¯æŒå®æ—¶æ´»åŠ¨éœ€è¦åœ¨å·¥ç¨‹ä¸­åˆ›å»ºä¸€ä¸ªWidget Extensionï¼Œå®æ—¶æ´»åŠ¨æœ¬èº«ä¹Ÿæ˜¯å°ç»„ä»¶çš„ä¸€ç§ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://oscimg.oschina.net/oscnet/up-37c2b760860571f79e65c852e883c6934e4.png" alt></p>
<p>éœ€è¦æ³¨æ„ï¼Œåœ¨åˆ›å»ºWidgetå°ç»„ä»¶æ—¶ï¼Œå°†Include Live Activicyé€‰ä¸­ï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://oscimg.oschina.net/oscnet/up-0ce2a07fb26403a6f07e1f63431cedf9c24.png" alt></p>
<p>è™½ç„¶å®æ—¶æ´»åŠ¨ä¹Ÿæ˜¯å°ç»„ä»¶ï¼Œä½†å…¶ä»–æ™®é€šçš„WidgetåŒºåˆ«å¾ˆå¤§ï¼Œå°ç»„ä»¶æ˜¯é€šè¿‡Timelineæ¥è¿›è¡Œæ›´æ–°ï¼Œè€Œå®æ—¶æ´»åŠ¨åªèƒ½é€šè¿‡Appè§¦å‘æ›´æ–°æˆ–ç‰¹æ®ŠPushæ›´æ–°å’Œå…³é—­ï¼›å°ç»„ä»¶éœ€è¦ç”¨æˆ·æ‰‹åŠ¨æ·»åŠ ä½¿ç”¨ï¼Œè€Œå®æ—¶æ´»åŠ¨åˆ™æ˜¯ç”±ä¸»Appè¿›è¡Œå¼€å¯ã€‚åˆ›å»ºå¥½Tatgetåï¼Œæ¨¡ç‰ˆè‡ªå¸¦3ä¸ªæ–‡ä»¶ï¼Œå…¶ä¸­LiveWidgetLiveActivityä¸­å®æ—¶æ´»åŠ¨çš„æ ¸å¿ƒæ¡†æ¶ä»£ç ï¼Œæˆ‘ä»¬åšäº›ç®€å•çš„ä¿®æ”¹ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> ActivityKit</span><br><span class="line"><span class="keyword">import</span> WidgetKit</span><br><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"><span class="comment">// çŠ¶æ€ç»“æ„ä½“</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">LiveWidgetAttributes</span>: <span class="title">ActivityAttributes</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">struct</span> <span class="title">ContentState</span>: <span class="title">Codable</span>, <span class="title">Hashable</span> </span>&#123;</span><br><span class="line">        <span class="comment">// åŠ¨æ€çš„çŠ¶æ€ï¼Œæœ‰Appæˆ–Pushæ¥è§¦å‘æ›´æ–°</span></span><br><span class="line">        <span class="keyword">var</span> score: <span class="type">String</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é™æ€çš„çŠ¶æ€ï¼Œå®æ—¶æ´»åŠ¨å¼€å¯æ—¶æŒ‡å®š</span></span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> teamA: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> teamB: <span class="type">String</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¼–å†™SwiftUIé¡µé¢</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">LiveWidgetLiveActivity</span>: <span class="title">Widget</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">WidgetConfiguration</span> &#123;</span><br><span class="line">        <span class="type">ActivityConfiguration</span>(<span class="keyword">for</span>: <span class="type">LiveWidgetAttributes</span>.<span class="keyword">self</span>) &#123; context <span class="keyword">in</span></span><br><span class="line">            <span class="comment">// Lock screen/banner UI goes here</span></span><br><span class="line">            <span class="type">VStack</span> &#123;</span><br><span class="line">                <span class="type">Text</span>(context.attributes.name)</span><br><span class="line">                <span class="type">Text</span>(<span class="string">"ğŸ’»ğŸ’»ğŸ’»ğŸ’»ğŸ’»ğŸ’»ğŸ’»ğŸ’»ğŸ’»ğŸ’»ğŸ’»"</span>)</span><br><span class="line">                <span class="type">Text</span>(<span class="string">"\(context.attributes.teamA) å¯¹æˆ˜ \(context.attributes.teamB)"</span>)</span><br><span class="line">                <span class="type">Text</span>(<span class="string">"å½“å‰æ¯”åˆ†:\(context.state.score)"</span>)</span><br><span class="line">            &#125;.padding(.all, <span class="number">10</span>)</span><br><span class="line">            .activityBackgroundTint(<span class="type">Color</span>.cyan)</span><br><span class="line">            .activitySystemActionForegroundColor(<span class="type">Color</span>.black)</span><br><span class="line"></span><br><span class="line">        &#125; dynamicIsland: &#123; context <span class="keyword">in</span></span><br><span class="line">            <span class="type">DynamicIsland</span> &#123;</span><br><span class="line">                <span class="comment">// Expanded UI goes here.  Compose the expanded UI through</span></span><br><span class="line">                <span class="comment">// various regions, like leading/trailing/center/bottom</span></span><br><span class="line">                <span class="type">DynamicIslandExpandedRegion</span>(.leading) &#123;</span><br><span class="line">                    <span class="type">Text</span>(context.attributes.teamA)</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="type">DynamicIslandExpandedRegion</span>(.trailing) &#123;</span><br><span class="line">                    <span class="type">Text</span>(context.attributes.teamB)</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="type">DynamicIslandExpandedRegion</span>(.center) &#123;</span><br><span class="line">                    <span class="type">Text</span>(<span class="string">"\(context.attributes.name)"</span>)</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="type">DynamicIslandExpandedRegion</span>(.bottom) &#123;</span><br><span class="line">                    <span class="type">Text</span>(<span class="string">"å½“å‰æ¯”åˆ†:\(context.state.score)"</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; compactLeading: &#123;</span><br><span class="line">                <span class="type">Text</span>(context.attributes.teamA)</span><br><span class="line">            &#125; compactTrailing: &#123;</span><br><span class="line">                <span class="type">Text</span>(context.attributes.teamB)</span><br><span class="line">            &#125; minimal: &#123;</span><br><span class="line">                <span class="type">Text</span>(<span class="string">"ğŸ†š"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            .widgetURL(<span class="type">URL</span>(string: <span class="string">"http://www.apple.com"</span>))</span><br><span class="line">            .keylineTint(<span class="type">Color</span>.red)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢ä»£ç ä¸­ï¼ŒLiveWidgetAttributeså®šä¹‰å®æ—¶æ´»åŠ¨æ‰€éœ€è¦çš„æ•°æ®æ¨¡å‹ï¼Œå…¶ä¸­ç›´æ¥å®šä¹‰çš„å±æ€§å¯ä»¥ç†è§£ä¸ºé™æ€çš„å±æ€§ï¼Œå³å½“å®æ—¶æ´»åŠ¨å¼€å¯æ—¶å°±ç¡®å®šçš„æ•°æ®ï¼Œä¾‹å¦‚æ¯”èµ›å‚ä¸çš„é˜Ÿä¼ï¼Œå¤–å–çš„è®¢å•ä¿¡æ¯ç­‰ã€‚å…¶ä¸­çš„ContentStateç”¨æ¥å®šä¹‰éœ€è¦æ›´æ–°çš„æ•°æ®ï¼Œä¾‹å¦‚æ¯”åˆ†æ•°æ®ï¼Œå¤–å–å‰©ä½™æ—¶é—´æ•°æ®ç­‰ã€‚</p>
<p>å®æ—¶æ´»åŠ¨åªèƒ½ä½¿ç”¨SwiftUIæ¥ç¼–å†™ï¼Œå¦‚ä¸Šä»£ç æ‰€ç¤ºActivityConfigurationé…ç½®å®æ—¶æ´»åŠ¨ç»„ä»¶ï¼ŒdynamicIslandå‚æ•°ç”¨æ¥å¯¹çµåŠ¨å²›è¿›è¡Œé€‚é…ã€‚</p>
<p>åœ¨è¿›è¡ŒçµåŠ¨å²›çš„é€‚é…æ—¶ï¼Œéœ€è¦å¯¹çµåŠ¨å²›çš„å„ç§çŠ¶æ€è¿›è¡Œé…ç½®ï¼š</p>
<p>1 - å±•å¼€çŠ¶æ€ä¸‹çš„çµåŠ¨å²›ã€‚</p>
<p>2 - é•¿æ¡çŠ¶æ€ä¸‹çš„çµåŠ¨å²›ã€‚</p>
<p>3 - miniçŠ¶æ€ä¸‹çš„çµåŠ¨å²›ã€‚</p>
<p>å±•å¼€çŠ¶æ€ä¸‹çš„çµåŠ¨å²›åˆ†ä¸ºå·¦å³ä¸­ä¸‹4éƒ¨åˆ†ï¼Œå¦‚ä¸Šä»£ç æ‰€ç¤ºå¯ä»¥å¯¹æ¯ä¸ªéƒ¨åˆ†è¿›è¡Œå¸ƒå±€ï¼Œåœ¨å¼€å¯å®æ—¶æ´»åŠ¨æ—¶ï¼Œé•¿æŒ‰çµåŠ¨å²›å¯ä»¥è¿›å…¥å±•å¼€çŠ¶æ€ï¼Œæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://oscimg.oschina.net/oscnet/up-2b4e65353eb6e43dc5f4815982b0382687d.png" alt></p>
<p>é•¿æ¡çŠ¶æ€æ˜¯çµåŠ¨å²›çš„é»˜è®¤çŠ¶æ€ï¼Œå¯ä»¥å¯¹å·¦å³ä¸¤éƒ¨åˆ†è¿›è¡Œé…ç½®ï¼Œæ•ˆæœå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://oscimg.oschina.net/oscnet/up-3992c046e56e2c212ba28017a3cbc03ee77.png" alt></p>
<p>å½“åŒæ—¶æœ‰å¤šä¸ªAppå¼€å¯äº†å®æ—¶æ´»åŠ¨æ—¶ï¼ŒçµåŠ¨å²›ä¸Šå°†åªå±•ç¤ºä¸€ä¸ªåœ†åœˆï¼Œæ­¤æ—¶å³æ˜¯miniçŠ¶æ€ï¼Œé€šå¸¸å¯ä»¥é…ç½®ä¸ºä¸€ä¸ªå›¾æ ‡ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://oscimg.oschina.net/oscnet/up-48d2520b6d9e2b52dabe1b7169ced9058ef.png" alt></p>
<p>åœ¨é”å±æˆ–æ‹‰ä¸‹é€šçŸ¥æ æ—¶ï¼Œå®æ—¶æ´»åŠ¨å°†å±•ç¤ºåœ¨æ‰€æœ‰é€šçŸ¥çš„æœ€ä¸Šæ–¹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://oscimg.oschina.net/oscnet/up-e62f3a9987dbd64d2c8b45806eb467c0d21.png" alt></p>
<p>åœ¨iOS17ä¸­ï¼Œå½“è®¾å¤‡åœ¨æ¨ªå±å……ç”µæ—¶ï¼Œä¼šè‡ªåŠ¨è¿›å…¥å¾…æœºçŠ¶æ€ï¼Œå¦‚æœæœ‰å®æ—¶æ´»åŠ¨ï¼Œå®æ—¶æ´»åŠ¨å°†å æ®æ•´ä¸ªå¾…æœºé¡µé¢ï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://oscimg.oschina.net/oscnet/up-d799bb20730aa0bc48a92a297af61b867be.png" alt></p>
<h2 id="3-å®æ—¶æ´»åŠ¨çš„å¼€å¯ä¸æ›´æ–°"><a href="#3-å®æ—¶æ´»åŠ¨çš„å¼€å¯ä¸æ›´æ–°" class="headerlink" title="3 - å®æ—¶æ´»åŠ¨çš„å¼€å¯ä¸æ›´æ–°"></a>3 - å®æ—¶æ´»åŠ¨çš„å¼€å¯ä¸æ›´æ–°</h2><p>å‰é¢æœ‰æåˆ°è¿‡ï¼Œå®æ—¶æ´»åŠ¨åªèƒ½é€šè¿‡ä¸»Appæ¥å¼€å¯ï¼ŒLiveWidgetLiveActivityç»“æ„ä½“éœ€è¦åœ¨ä¸»Appä¸­è¢«å¼•å…¥ã€‚é¦–å…ˆè®¾ç½®LiveWidgetLiveActivityçš„Target Membershipä¸ºä¸»Appä¸å°ç»„ä»¶Targetå…±äº«ï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://oscimg.oschina.net/oscnet/up-a70c88441fd085551831028739c1de4773b.png" alt></p>
<p>åœ¨ä¸»Appä¸­è°ƒç”¨å¦‚ä¸‹ä»£ç æ¥è¿›è¡Œå®æ—¶æ´»åŠ¨çš„å¼€å¯ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"><span class="comment">// æ¡†æ¶å¼•å…¥</span></span><br><span class="line"><span class="keyword">import</span> ActivityKit</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewController</span>: <span class="title">UIViewController</span> </span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line">        <span class="comment">// Do any additional setup after loading the view.</span></span><br><span class="line">        <span class="keyword">let</span> attri = <span class="type">LiveWidgetAttributes</span>(name: <span class="string">"XXæ¯è‹±é›„ç”µç«æ€»å†³èµ›"</span>, teamA: <span class="string">"ç‹æ—é˜Ÿ"</span>, teamB: <span class="string">"æ–©æ˜Ÿé˜Ÿ"</span>)</span><br><span class="line">        <span class="keyword">let</span> state = <span class="type">LiveWidgetAttributes</span>.<span class="type">ContentState</span>(score: <span class="string">"2-1"</span>)</span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> <span class="type">Activity</span>.request(attributes: attri, contentState: state, pushType: .token) &#125;</span><br><span class="line">        <span class="keyword">catch</span> &#123;</span><br><span class="line">            <span class="built_in">print</span>(error)</span><br><span class="line">        &#125;</span><br><span class="line">       </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Activicy.requestæ–¹æ³•æ¥è¯·æ±‚å¼€å¯ä¸€ä¸ªå®æ—¶æ´»åŠ¨ï¼ŒActivicyä¸­è¿˜æœ‰ä¸€äº›æ–¹æ³•ç”¨æ¥å¯¹å®æ—¶æ´»åŠ¨è¿›è¡Œæ›´æ–°å’Œè·å–æ›´æ–°å®æ—¶æ´»åŠ¨çš„PushTokenï¼Œä¸‹é¢æ˜¯å…¶ä¸­å°è£…çš„æ ¸å¿ƒå±æ€§æ–¹æ³•çš„è¯¦ç»†è§£é‡Šï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Activity</span>&lt;<span class="title">Attributes</span>&gt; : <span class="title">Identifiable</span> <span class="title">where</span> <span class="title">Attributes</span> : <span class="title">ActivityAttributes</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å¼€å¯ä¸€ä¸ªå®æ—¶æ´»åŠ¨ï¼Œå…¶ä¸­PushTypeç›®å‰åªæ”¯æŒTokenæ¨¡å‹çš„Pushæ›´æ–°</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">request</span><span class="params">(attributes: Attributes, content: ActivityContent&lt;Activity&lt;Attributes&gt;.ContentState&gt;, pushType: PushType? = <span class="literal">nil</span>)</span></span> <span class="keyword">throws</span> -&gt; <span class="type">Activity</span>&lt;<span class="type">Attributes</span>&gt;</span><br><span class="line">    <span class="comment">// è·å–åº”ç”¨å½“å‰çš„å®æ—¶æ´»åŠ¨</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">var</span> activities: [<span class="type">Activity</span>&lt;<span class="type">Attributes</span>&gt;] &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">    <span class="comment">// å¼‚æ­¥é˜Ÿåˆ—ï¼Œç”¨æ¥ç›‘å¬å®æ—¶æ´»åŠ¨çš„æ›´æ–°</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">var</span> activityUpdates: <span class="type">Activity</span>&lt;<span class="type">Attributes</span>&gt;.<span class="type">ActivityUpdates</span> &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">    <span class="comment">// å½“å‰å®æ—¶æ´»åŠ¨çš„çŠ¶æ€ï¼š æ´»è·ƒï¼Œå·²ç»“æŸï¼Œå·²ç§»é™¤</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">var</span> activityState: <span class="type">ActivityState</span> &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">    <span class="comment">// ç”¨æ¥ç›‘å¬çŠ¶æ€å˜æ›´</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">var</span> activityStateUpdates: <span class="type">Activity</span>&lt;<span class="type">Attributes</span>&gt;.<span class="type">ActivityStateUpdates</span> &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">    <span class="comment">// é€šè¿‡Pushæ›´æ–°å®æ—¶æ´»åŠ¨æ—¶çš„PushToken</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">var</span> pushToken: <span class="type">Data</span>? &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">    <span class="comment">// å¼‚æ­¥çš„å¯¹å®æ—¶æ´»åŠ¨çŠ¶æ€è¿›è¡Œæ›´æ–°</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">update</span><span class="params">(using contentState: Activity&lt;Attributes&gt;.ContentState)</span></span> async</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">update</span><span class="params">(<span class="number">_</span> content: ActivityContent&lt;Activity&lt;Attributes&gt;.ContentState&gt;)</span></span> async</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">update</span><span class="params">(using contentState: Activity&lt;Attributes&gt;.ContentState, alertConfiguration: AlertConfiguration? = <span class="literal">nil</span>)</span></span> async</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">update</span><span class="params">(<span class="number">_</span> content: ActivityContent&lt;Activity&lt;Attributes&gt;.ContentState&gt;, alertConfiguration: AlertConfiguration? = <span class="literal">nil</span>)</span></span> async</span><br><span class="line">    <span class="comment">// ç»“æŸä¸€ä¸ªå®æ—¶æ´»åŠ¨</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">end</span><span class="params">(using contentState: Activity&lt;Attributes&gt;.ContentState? = <span class="literal">nil</span>, dismissalPolicy: ActivityUIDismissalPolicy = .<span class="keyword">default</span>)</span></span> async</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">end</span><span class="params">(<span class="number">_</span> content: ActivityContent&lt;Activity&lt;Attributes&gt;.ContentState&gt;?, dismissalPolicy: ActivityUIDismissalPolicy = .<span class="keyword">default</span>)</span></span> async</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æœ€åï¼Œéœ€è¦æ³¨æ„ï¼Œæ­¤å¤„è¿›è¡Œæ›´æ–°å®æ—¶æ´»åŠ¨çš„Pushå¿…é¡»æ˜¯åŸºäºTokenéªŒè¯çš„APNsï¼Œä¸èƒ½æ˜¯åŸºäºè¯ä¹¦éªŒè¯çš„APNsï¼Œæ­¤å¤„çš„Tokenä¸æ˜¯ä»Applicationæ¥å£æ‹¿åˆ°çš„Device Tokenï¼Œè€Œæ˜¯ä»Apple Developeråå°åˆ›å»ºçš„é‰´æƒTokenï¼Œå¦å¤–ï¼ŒåŸºäºTokençš„Pushè®¤è¯è¦æ¯”åŸºäºè¯ä¹¦çš„æ›´åŠ æ–¹ä¾¿ï¼Œä¸”æ— éœ€å…³å¿ƒè¿‡æœŸæ—¶é—´ï¼Œå¦‚æœä½ çš„åº”ç”¨çš„APNsç›®å‰ä¾ç„¶æ˜¯åŸºäºè¯ä¹¦çš„ï¼Œåˆ™éœ€è¦è¿›è¡Œæ”¹é€ åæ‰èƒ½ä½¿ç”¨å…¶æ¥æ›´æ–°å®æ—¶æ´»åŠ¨ã€‚</p>

    </div>

    <div class="post-footer">
        <div>
            
                è½¬è½½å£°æ˜ï¼šå•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒ,éå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ Â© å¾®ä¿¡ï¼š15137348047
            
        </div>
        <div>
            
        </div>
    </div>
</article>

<div class="article-nav prev-next-wrap clearfix">
    
    
        <a href="/2023/10/28/480äººå·¥æ™ºèƒ½ä¹‹ä»é›¶ç†è§£äººå·¥ç¥ç»ç½‘ç»œ/" class="next-post btn btn-default" title='äººå·¥æ™ºèƒ½ä¹‹ä»é›¶ç†è§£äººå·¥ç¥ç»ç½‘ç»œ'>
            <span class="hidden-lg">ä¸‹ä¸€ç¯‡</span>
            <span class="hidden-xs">äººå·¥æ™ºèƒ½ä¹‹ä»é›¶ç†è§£äººå·¥ç¥ç»ç½‘ç»œ</span><i class="fa fa-angle-right fa-fw"></i>
        </a>
    
</div>


    <div id="comments">
        
	
<div id="lv-container" data-id="city" data-uid="MTAyMC8zNzY0Ny8xNDE3OA==">
  <script type="text/javascript">
     (function(d, s) {
         var j, e = d.getElementsByTagName(s)[0];
         if (typeof LivereTower === 'function') { return; }
         j = d.createElement(s);
         j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
         j.async = true;
         e.parentNode.insertBefore(j, e);
     })(document, 'script');
  </script>
</div>


    </div>





                </main>
                
                    <aside id="article-toc" role="navigation" class="col-md-4">
    <div class="widget">
        <h3 class="title">æ–‡ç« ç›®å½•</h3>
        
            <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#åœ¨iOSåº”ç”¨ä¸­ä½¿ç”¨å®æ—¶æ´»åŠ¨ä¸çµåŠ¨å²›"><span class="toc-text">åœ¨iOSåº”ç”¨ä¸­ä½¿ç”¨å®æ—¶æ´»åŠ¨ä¸çµåŠ¨å²›</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-å¼•è¨€"><span class="toc-text">1 - å¼•è¨€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-å¼€å‘å®æ—¶æ´»åŠ¨ä¸é€‚é…çµåŠ¨å²›"><span class="toc-text">2 - å¼€å‘å®æ—¶æ´»åŠ¨ä¸é€‚é…çµåŠ¨å²›</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-å®æ—¶æ´»åŠ¨çš„å¼€å¯ä¸æ›´æ–°"><span class="toc-text">3 - å®æ—¶æ´»åŠ¨çš„å¼€å¯ä¸æ›´æ–°</span></a></li></ol></li></ol>
        
    </div>
</aside>

                
            </div>
        </div>
    </section>
    <footer class="main-footer">
    <div class="container">
        <div class="row">
        </div>
    </div>
</footer>

<a id="back-to-top" class="icon-btn hide">
	<i class="fa fa-chevron-up"></i>
</a>




    <div class="copyright">
    <div class="container">
        <div class="row">
            <div class="col-sm-12"> 
                <span>Copyright &copy; 2018
                </span> | 
                <span>
                    Powered by <a href="//hexo.io" class="copyright-links" target="_blank" rel="nofollow">Hexo</a>
                </span> | 
                <span>
                    Theme by <a href="//github.com/shenliyang/hexo-theme-snippet.git" class="copyright-links" target="_blank" rel="nofollow">Snippet</a>
                </span>
            </div>
        </div>
    </div>
</div>



<script src="/js/app.js?rev=@@hash"></script>


</body>
</html>