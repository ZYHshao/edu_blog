{"meta":{"title":"ç²å°‘çš„æŠ€æœ¯åšå®¢","subtitle":"ä¸“æ³¨æŠ€æœ¯ æœ‰è¶£ç”Ÿæ´»","description":"ç²å°‘çš„æŠ€æœ¯åšå®¢","author":"ç²å°‘","url":"http://huishao.cc"},"pages":[],"posts":[{"title":"iOS MachineLearning ç³»åˆ—ï¼ˆ10ï¼‰â€”â€” è‡ªç„¶è¯­è¨€åˆ†æä¹‹æ–‡æœ¬æ‹†è§£","slug":"465iOS MachineLearning ç³»åˆ—ï¼ˆ10ï¼‰â€”â€” è‡ªç„¶è¯­è¨€åˆ†æä¹‹æ–‡æœ¬æ‹†è§£","date":"2023-05-03T16:00:00.000Z","updated":"2023-05-04T12:39:25.930Z","comments":true,"path":"2023/05/04/465iOS MachineLearning ç³»åˆ—ï¼ˆ10ï¼‰â€”â€” è‡ªç„¶è¯­è¨€åˆ†æä¹‹æ–‡æœ¬æ‹†è§£/","link":"","permalink":"http://huishao.cc/2023/05/04/465iOS MachineLearning ç³»åˆ—ï¼ˆ10ï¼‰â€”â€” è‡ªç„¶è¯­è¨€åˆ†æä¹‹æ–‡æœ¬æ‹†è§£/","excerpt":"","text":"iOS MachineLearning ç³»åˆ—ï¼ˆ10ï¼‰â€”â€” è‡ªç„¶è¯­è¨€åˆ†æä¹‹æ–‡æœ¬æ‹†è§£æœ¬ç³»åˆ—çš„å‰å‡ ç¯‡æ–‡ç« ä»‹ç»äº†iOSä¸­æœ‰å…³å›¾åƒå’Œè§†é¢‘å¤„ç†çš„APIï¼Œè§†è§‰å¤„ç†ä¸»è¦æœ‰Visionæ¡†æ¶è´Ÿè´£ï¼Œæœ¬ç¯‡èµ·ï¼Œå°†ä»‹ç»åœ¨iOSä¸­Machine Learningé¢†åŸŸç›¸å…³çš„è‡ªç„¶è¯­è¨€å¤„ç†æ¡†æ¶ï¼šNaturalLanguageã€‚ 1 - ç®€ä»‹NaturalLanguageæ˜¯iOSç§æä¾›çš„ä¸€ç§å¤„ç†è‡ªç„¶è¯­è¨€çš„å†…ç½®æ¡†æ¶ï¼Œä½¿ç”¨å®ƒä¸ä¼šä½¿åº”ç”¨çš„åŒ…ä½“ç§¯å¢å¤§ï¼Œä¸ä¼šä¸ºåº”ç”¨å¸¦æ¥é¢å¤–çš„è´Ÿæ‹…ï¼Œä¸”å¯ä»¥å®ç°éå¸¸å¼ºå¤§çš„è¯­è¨€å¤„ç†åŠŸèƒ½ã€‚ NaturalLanguageé»˜è®¤æ”¯æŒå¤šç§è¯­è¨€ï¼Œæ‹¥æœ‰å¦‚ä¸‹èƒ½åŠ›ï¼š æ£€æµ‹ä¸€æ®µæ–‡æœ¬æ‰€ä½¿ç”¨çš„è¯­è¨€ã€‚ å°†ä¸€æ®µæ–‡æœ¬æŒ‰ç…§è¯ç»„ï¼Œå¥å­ï¼Œæ®µè½è¿›è¡Œæ‹†è§£ã€‚ è¿›è¡Œè¯æ€§åˆ†æã€‚ è¿›è¡Œè¯­ä¹‰åˆ†æã€‚ æœ¬ç¯‡ï¼Œæˆ‘ä»¬ä¸»è¦ä»‹ç»å…¶æ–‡æœ¬æ‹†è§£èƒ½åŠ›ï¼ŒåŠå¦‚ä½•ä½¿ç”¨è¿™äº›APIã€‚ 2 - æ‹†è§£æ–‡æœ¬æˆ‘ä»¬å…ˆä»ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹æ¥çœ‹å¦‚ä½•ä½¿ç”¨NaturalLanguageæ¡†æ¶ä¸­çš„APIè¿›è¡Œæ–‡æœ¬æ‹†è§£ã€‚ é¦–å…ˆå‡†å¤‡ä¸€æ®µæµ‹è¯•æ–‡æœ¬ï¼Œå¦‚ä¸‹ï¼š æœ€è¿‘ï¼Œéšç€Chat-GPT4çš„å‘å¸ƒï¼Œäººå·¥æ™ºèƒ½ç›¸å…³çš„èµ„è®¯å’Œè¯é¢˜å†æ¬¡ç«çƒ­äº†èµ·æ¥ğŸ˜„ã€‚ æœ‰äº†äººå·¥æ™ºèƒ½çš„åŠ æŒï¼Œå¯¹äººä»¬çš„ç”Ÿæ´»ä»¥åŠå„è¡Œå„ä¸šçš„å·¥ä½œéƒ½å°†å¸¦æ¥æ•ˆç‡çš„æå¤§æå‡ã€‚ç›®å‰ï¼Œå„ç§å¤§æ¨¡å‹çš„å‘å¸ƒå±‚å‡ºä¸ç©·ã€‚è¿™äº›å¤§æ¨¡å‹è™½ç„¶åŠŸèƒ½éå¸¸å¼ºå¤§ï¼ˆå¦‚æ–‡æœ¬ç†è§£ï¼Œç»˜å›¾ç­‰ï¼‰ï¼Œä½†å¯¹äºä¸ªäººæ¥è¯´ï¼Œè¦è·‘èµ·è¿™æ ·ä¸€ä¸ªæ¨¡å‹æ¥å¯¹å¤–æä¾›æœåŠ¡è¿˜æ˜¯æ¯”è¾ƒå›°éš¾çš„ï¼Œå…¶éœ€è¦æœ‰éå¸¸å¼ºå¤§çš„ç®—åŠ›æ”¯æŒã€‚ è¿™æ®µæ–‡æ¡ˆæœ‰ä¸¤ä¸ªæ®µè½ç»„æˆã€‚æˆ‘ä»¬å¯ä»¥å…ˆå°è¯•å¯¹å…¶å†…çš„å•è¯è¿›è¡Œæ‹†è§£ã€‚ ä½¿ç”¨NLTokenizeræ¥è§£ææ–‡æœ¬ï¼Œå®šä¹‰NLTokenizerå®ä¾‹å¦‚ä¸‹ï¼š 1let tokenizer = NLTokenizer(unit: .word) å…¶å‚æ•°unitç¡®å®šè¦è§£æçš„å…ƒç´ ç±»å‹ï¼Œæšä¸¾å¦‚ä¸‹ï¼š 12345678910public enum NLTokenUnit : Int, @unchecked Sendable &#123; // ä»¥å•è¯ä¸ºåŸºç¡€è¿›è¡Œæ‹†è§£ case word = 0 // ä»¥å¥å­ä¸ºåŸºç¡€è¿›è¡Œæ‹†è§£ case sentence = 1 // ä»¥æ®µè½ä¸ºåŸºç¡€è¿›è¡Œæ‹†è§£ case paragraph = 2 // ä»¥æ–‡æ¡£ä¸ºåŸºç¡€ï¼Œæ­¤æ¨¡å¼ä¸‹ä¼šè¿”å›åŸå­—ç¬¦ä¸² case document = 3 &#125; è°ƒç”¨å¦‚ä¸‹çš„æ–¹æ³•å³å¯è¿›è¡Œæ‹†è§£ä»»åŠ¡ï¼š 12345tokenizer.enumerateTokens(in: string.startIndex ..&lt; string.endIndex) &#123; range, attribute in let word = string[range] self.showWord(string: String(word), type: attribute) return true&#125; åœ¨å›è°ƒblockä¸­ï¼Œå¦‚æœéœ€è¦åœæ­¢è§£æï¼Œè¿”å›falseå³å¯ã€‚è§£æçš„ç»“æœä¼šå°†å…ƒç´ å±æ€§ï¼Œæ‰€åœ¨åŸå­—ç¬¦ä¸²ä¸­çš„èŒƒå›´è¿›è¡Œè¿”å›ã€‚å…¶ä¸­å…ƒç´ å±æ€§ç»“æ„ä½“å®šä¹‰å¦‚ä¸‹ï¼š 1234567891011public struct Attributes : OptionSet, @unchecked Sendable &#123; public init(rawValue: UInt) // åŒ…å«æ•°å€¼ public static var numeric: NLTokenizer.Attributes &#123; get &#125; // åŒ…å«ç¬¦å· public static var symbolic: NLTokenizer.Attributes &#123; get &#125; // åŒ…å«è¡¨æƒ… public static var emoji: NLTokenizer.Attributes &#123; get &#125;&#125; å¦‚æœä¸Šé¢å®šä¹‰çš„3ä¸ªé™æ€å€¼éƒ½æ²¡æœ‰å‘½ä¸­ï¼Œåˆ™è¡¨ç¤ºå½“å‰å…ƒç´ åªåŒ…å«ç®€å•æ–‡æœ¬ã€‚ showWordæ–¹æ³•ç®€å•å®ç°å¦‚ä¸‹ï¼š 12345678910func showWord(string: String, type: NLTokenizer.Attributes) &#123; var t = \"\" if type.contains(.emoji) &#123; t.append(\"[emoji]\") &#125; if type.contains(.numeric) &#123; t.append(\"[num]\") &#125; if type.contains(.symbolic) &#123; t.append(\"[sym]\") &#125; if t.isEmpty &#123; t = \"txt\" &#125; resultLabel.text = (resultLabel.text ?? \"\").appending(\"ã€\\(string) - \\(t)ã€‘\")&#125; åˆ†åˆ«ä»¥å•è¯ï¼Œå¥å­å’Œæ®µè½çš„æ¨¡å¼è¿›è¡Œæ‹†è§£ï¼Œæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š å¯ä»¥çœ‹åˆ°ï¼Œæ•´ä½“æ¥è¯´NaturalLanguageå¯¹äºä¸­æ–‡çš„è§£æèƒ½åŠ›è¿˜æ˜¯æ¯”è¾ƒå¼ºå¤§çš„ã€‚ 3 - å†çœ‹NLTokenizer ç±»NLTokenizerç±»ä¸“é—¨ç”¨æ¥å¯¹æ–‡æœ¬è¿›è¡Œæ‹†è§£ï¼Œæœ¬èº«æ¯”è¾ƒç®€å•ã€‚å…¶ä¸­çš„NLTokenUnitç”¨æ¥è®¾ç½®æ‹†è§£æ¨¡å¼ï¼Œå†…éƒ¨Attributesç»“æ„ä½“å¯ä»¥æ ‡è®°å‡ºæ‰€æ‹†è§£å‡ºçš„å…ƒç´ æ‰€åŒ…å«çš„å±æ€§ã€‚NLTokenizerç±»æœ¬èº«å®šä¹‰å¦‚ä¸‹ï¼š 123456789101112131415161718open class NLTokenizer : NSObject &#123; // åˆå§‹åŒ–æ–¹æ³•ï¼Œè®¾ç½®æ‹†è§£æ¨¡å¼ public init(unit: NLTokenUnit) // æ‹†è§£å•å…ƒæ¨¡å¼ open var unit: NLTokenUnit &#123; get &#125; // è¿›è¡Œå¤„ç†çš„å­—ç¬¦ä¸² open var string: String? // è®¾ç½®æ–‡æœ¬æ‰€ä½¿ç”¨çš„è¯­è¨€ï¼Œå¦‚æœä¸è®¾ç½®å¯ä»¥è‡ªè¡Œè§£æ open func setLanguage(_ language: NLLanguage) // è§£ææ–‡æœ¬æŸä¸ªä½ç½®çš„å…ƒç´  public func tokenRange(at index: String.Index) -&gt; Range&lt;String.Index&gt; // è§£ææ–‡æœ¬æŸä¸ªèŒƒå›´çš„å…ƒç´  public func tokenRange(for range: Range&lt;String.Index&gt;) -&gt; Range&lt;String.Index&gt; // æšä¸¾å‡ºæ‰€æœ‰å…ƒç´  public func enumerateTokens(in range: Range&lt;String.Index&gt;, using block: (Range&lt;String.Index&gt;, NLTokenizer.Attributes) -&gt; Bool) // è§£ææ‰€æœ‰å…ƒç´  public func tokens(for range: Range&lt;String.Index&gt;) -&gt; [Range&lt;String.Index&gt;]&#125; æ‹†è§£å¾€å¾€æ˜¯è‡ªç„¶è¯­è¨€åˆ†æçš„ç¬¬ä¸€æ­¥ï¼Œé€šå¸¸æˆ‘ä»¬ä¼šå°†é•¿æ–‡æœ¬è¿›è¡Œæ‹†è§£ï¼Œä¹‹ååœ¨å¯¹æ¯ä¸ªå…ƒç´ è¿›è¡Œè¯­è¨€ç±»å‹åˆ†ææˆ–è¯­ä¹‰åˆ†æï¼Œä»¥åŠè¯æ±‡çš„è¯æ€§åˆ†æç­‰ï¼Œåé¢çš„æ–‡ç« ä¼šå…·ä½“å†åšä»‹ç»ã€‚","categories":[{"name":"ä»æœºå™¨å­¦ä¹ åˆ°AI","slug":"ä»æœºå™¨å­¦ä¹ åˆ°AI","permalink":"http://huishao.cc/categories/ä»æœºå™¨å­¦ä¹ åˆ°AI/"}],"tags":[],"keywords":[{"name":"ä»æœºå™¨å­¦ä¹ åˆ°AI","slug":"ä»æœºå™¨å­¦ä¹ åˆ°AI","permalink":"http://huishao.cc/categories/ä»æœºå™¨å­¦ä¹ åˆ°AI/"}]},{"title":"iOS MachineLearning ç³»åˆ—ï¼ˆ8ï¼‰â€”â€” å›¾ç‰‡çƒ­åŒºåˆ†æ","slug":"463iOS MachineLearning ç³»åˆ—ï¼ˆ8ï¼‰â€”â€” å›¾ç‰‡çƒ­åŒºåˆ†æ","date":"2023-04-28T16:00:00.000Z","updated":"2023-04-27T15:24:25.297Z","comments":true,"path":"2023/04/29/463iOS MachineLearning ç³»åˆ—ï¼ˆ8ï¼‰â€”â€” å›¾ç‰‡çƒ­åŒºåˆ†æ/","link":"","permalink":"http://huishao.cc/2023/04/29/463iOS MachineLearning ç³»åˆ—ï¼ˆ8ï¼‰â€”â€” å›¾ç‰‡çƒ­åŒºåˆ†æ/","excerpt":"","text":"iOS MachineLearning ç³»åˆ—ï¼ˆ8ï¼‰â€”â€” å›¾ç‰‡çƒ­åŒºåˆ†æå¯¹å›¾ç‰‡è¿›è¡Œçƒ­åŒºåˆ†æå¯ä»¥å¸®åŠ©æˆ‘ä»¬å›¾ç‰‡ä¸­å¯èƒ½ä¼šå—å…³æ³¨çš„åŒºåŸŸï¼Œä¹Ÿå¯ä»¥è·å–åˆ°å›¾ç‰‡ä¸­éœ€è¦è¢«å…³æ³¨çš„äº‹ç‰©çš„åŒºåŸŸã€‚ Visionæ¡†æ¶ä¸­æä¾›äº†ä¸¤ç§çƒ­åŒºåˆ†æçš„æ–¹å¼ã€‚ å…³æ³¨åŒºåˆ†æ å¯¹è±¡åŒºåˆ†æ 1 - å…³æ³¨åŒºåˆ†æå…³æ³¨åŒºåˆ†æè¯·æ±‚ä½¿ç”¨VNGenerateAttentionBasedSaliencyImageRequeståˆ›å»ºï¼Œæ­¤ç±»æ²¡æœ‰ç‰¹æ®Šéœ€è¦é…ç½®çš„ï¼Œå…¶ç»§æ‰¿è‡ªVNImageBasedRequestç±»ï¼Œå› æ­¤å¯ä»¥ç›´æ¥ä½¿ç”¨VNImageRequestHandlerå¥æŸ„æ¥è¿›è¡Œå‘èµ·ã€‚è¿”å›çš„åˆ†æç»“æœä¸ºVNSaliencyImageObservationå¯¹è±¡ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š 1234open class VNGenerateAttentionBasedSaliencyImageRequest : VNImageBasedRequest &#123; // å…³æ³¨åŒºå¯¹è±¡ open var results: [VNSaliencyImageObservation]? &#123; get &#125;&#125; VNSaliencyImageObservatioå®šä¹‰å¦‚ä¸‹ï¼š 123open class VNSaliencyImageObservation : VNPixelBufferObservation &#123; open var salientObjects: [VNRectangleObservation]? &#123; get &#125;&#125; ä¸‹å›¾å±•ç¤ºäº†å…³æ³¨åŒºåˆ†æçš„æ•ˆæœï¼š å¯ä»¥çœ‹åˆ°ï¼Œåˆ†æå‡ºçš„å…³æ³¨åŒºåŸºæœ¬æ˜¯å›¾ç‰‡ä¸­å†…å®¹æœ€ä¸°å¯Œçš„åŒºåŸŸï¼Œä¹Ÿæ˜¯æˆ‘ä»¬åœ¨è§‚å¯Ÿå›¾ç‰‡æ—¶æœ€å…ˆå…³æ³¨åˆ°çš„ã€‚éœ€è¦æ³¨æ„ï¼Œåˆ†æå‡ºçš„å…³æ³¨åŒºä¸ä¸€å®šä¼šå®Œæ•´çš„åŒ…å«å›¾ç‰‡ä¸­çš„ç‰©ä½“ã€‚ 2 - ç‰©ä½“åŒºåˆ†æç‰©ä½“åŒºåˆ†æä¸å…³æ³¨åŒºåˆ†æå”¯ä¸€çš„åŒºåˆ«åœ¨äºè¯·æ±‚çš„åˆ›å»ºï¼Œç‰©ä½“åŒºåˆ†æä½¿ç”¨VNGenerateObjectnessBasedSaliencyImageRequestç±»è¿›è¡Œåˆ›å»ºã€‚ä¸‹å›¾æ¼”ç¤ºäº†ç‰©ä½“åŒºåˆ†æçš„æ•ˆæœã€‚ å¯ä»¥çœ‹åˆ°ï¼Œé’ˆå¯¹çŒ«ç‹—çš„é‚£å¼ å›¾ç‰‡ï¼Œå…³æ³¨åŒºåˆ†æå¾—åˆ°çš„ç»“æœæ˜¯ç›¸å¯¹å±…ä¸­çš„ä½ç½®ï¼Œç‰©ä½“åŒºåˆ†æå¾—åˆ°çš„ç»“æœä¼šå®Œæ•´çš„åŒ…å«çŒ«ç‹—çš„è¾¹ç•Œã€‚ åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™äº›åˆ†æèƒ½åŠ›æ¥å¯¹å›¾åƒçš„éƒ¨åˆ†è¿›è¡Œè§†è§‰å¢å¼ºã€‚ å®Œæ•´çš„ç¤ºä¾‹ä»£ç å¯ä»¥åœ¨å¦‚ä¸‹åœ°å€æ‰¾åˆ°ï¼š https://github.com/ZYHshao/MachineLearnDemo å¤‡æ³¨ï¼šVisionæ¡†æ¶ä¸­çš„å¾ˆå¤šAIèƒ½åŠ›å¯èƒ½æ— æ³•åœ¨æ¨¡æ‹Ÿå™¨ä¸Šå¾ˆå¥½çš„è¿›è¡Œã€‚","categories":[{"name":"ä»æœºå™¨å­¦ä¹ åˆ°AI","slug":"ä»æœºå™¨å­¦ä¹ åˆ°AI","permalink":"http://huishao.cc/categories/ä»æœºå™¨å­¦ä¹ åˆ°AI/"}],"tags":[],"keywords":[{"name":"ä»æœºå™¨å­¦ä¹ åˆ°AI","slug":"ä»æœºå™¨å­¦ä¹ åˆ°AI","permalink":"http://huishao.cc/categories/ä»æœºå™¨å­¦ä¹ åˆ°AI/"}]},{"title":"iOS MachineLearning ç³»åˆ—ï¼ˆ9ï¼‰â€”â€” äººç‰©è’™ç‰ˆå›¾ç”Ÿæˆ","slug":"464iOS MachineLearning ç³»åˆ—ï¼ˆ9ï¼‰â€”â€” äººç‰©è’™ç‰ˆå›¾ç”Ÿæˆ","date":"2023-04-28T16:00:00.000Z","updated":"2023-04-27T15:24:25.298Z","comments":true,"path":"2023/04/29/464iOS MachineLearning ç³»åˆ—ï¼ˆ9ï¼‰â€”â€” äººç‰©è’™ç‰ˆå›¾ç”Ÿæˆ/","link":"","permalink":"http://huishao.cc/2023/04/29/464iOS MachineLearning ç³»åˆ—ï¼ˆ9ï¼‰â€”â€” äººç‰©è’™ç‰ˆå›¾ç”Ÿæˆ/","excerpt":"","text":"iOS MachineLearning ç³»åˆ—ï¼ˆ9ï¼‰â€”â€” äººç‰©è’™ç‰ˆå›¾ç”Ÿæˆäººç‰©è’™ç‰ˆå›¾èƒ½åŠ›æ˜¯Visionæ¡†æ¶åœ¨iOS 15ä¸­æ–°å¢çš„åŠŸèƒ½ï¼Œè¿™ä¸ªåŠŸèƒ½å¯ä»¥å°†å›¾ç‰‡ä¸­çš„äººç‰©æŒ‰ç…§è½®å»“ç”Ÿæˆæ— å…‰è’™ç‰ˆã€‚æ— å…‰è’™ç‰ˆåœ¨å®é™…ä¸šåŠ¡ä¸­éå¸¸æœ‰ç”¨ï¼Œä½¿ç”¨æ­¤è’™ç‰ˆå¯ä»¥æ–¹ä¾¿çš„å°†äººç‰©ä»å›¾ç‰‡ä¸­æå–å‡ºæ¥ï¼Œç„¶åå’Œå…¶ä»–çš„èƒŒæ™¯å›¾è¿›è¡Œåˆæˆã€‚ 1 - äººç‰©è’™ç‰ˆçš„æå–é¦–å…ˆï¼Œäººç‰©è’™ç‰ˆçš„æå–éå¸¸ç®€å•ï¼Œä½¿ç”¨VNGeneratePersonSegmentationRequeståˆ›å»ºè’™ç‰ˆåˆ†æè¯·æ±‚ï¼Œå¦‚ä¸‹ï¼š 12345678private lazy var personRequest: VNGeneratePersonSegmentationRequest = &#123; let request = VNGeneratePersonSegmentationRequest &#123; request, error in DispatchQueue.main.async &#123; self.drawTask(request: request as! VNGeneratePersonSegmentationRequest) &#125; &#125; return request&#125;() ä½¿ç”¨VNImageRequestHandleræ¥è§¦å‘è¯·æ±‚å³å¯ï¼š 1234567// è¦åˆ†æçš„å›¾ç‰‡èµ„æºlet image = UIImage(named: \"image7\")!// å›¾åƒåˆ†æè¯·æ±‚lazy var imageRequestHandler = VNImageRequestHandler(ciImage: CIImage(cgImage: image.cgImage!), orientation: .up, options: [:]) è¯·æ±‚çš„ç»“æœVNPixelBufferObservationä¸­ä¼šå°è£…è’™ç‰ˆå›¾ç‰‡CVPixelBufferæ•°æ®ï¼Œå¦‚ä¸‹ï¼š 123456open class VNPixelBufferObservation : VNObservation &#123; // åˆ†æå‡ºçš„è’™ç‰ˆæ•°æ® open var pixelBuffer: CVPixelBuffer &#123; get &#125; // åˆ†ææ‰€ä½¿ç”¨çš„æ¨¡å‹ open var featureName: String? &#123; get &#125;&#125; å¤„ç†è¯·æ±‚ç»“æœå¦‚ä¸‹ï¼š 1234567891011121314151617181920private func drawTask(request: VNGeneratePersonSegmentationRequest) &#123; for result in request.results ?? [] &#123; // åˆ›å»ºCIImageå®ä¾‹ let ciImage = CIImage(cvPixelBuffer: result.pixelBuffer) // é»˜è®¤è¿”å›çš„è’™ç‰ˆä¸ºé»‘ç™½ä¸¤è‰²ï¼Œè¿™é‡Œè®²æ‰€æœ‰é»‘è‰²æ›¿æ¢æˆé€æ˜è‰² let filter = CIFilter(name: &quot;CIMaskToAlpha&quot;, parameters: [kCIInputImageKey: ciImage]) guard let outputImage = filter?.outputImage else &#123; return &#125; let context = CIContext(options: nil) let cgImage = context.createCGImage(outputImage, from: outputImage.extent) let uiImage = UIImage(cgImage: cgImage!) let v = UIImageView(image: uiImage) v.frame = imageView.frame v.backgroundColor = .black v.frame.origin.y += imageView.frame.height v.image = uiImage view.addSubview(v) &#125;&#125; æ•ˆæœå¦‚ä¸‹å›¾ï¼š 2 - è¿›è¡Œäººç‰©æå–è·å–åˆ°äº†è’™ç‰ˆï¼Œæå–äººç‰©å°†å¾ˆç®€å•ï¼Œä¿®æ”¹ä¸Šè¿°ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536private func drawTask(request: VNGeneratePersonSegmentationRequest) &#123; for result in request.results ?? [] &#123; print(result.pixelBuffer) let ciImage = CIImage(cvPixelBuffer: result.pixelBuffer) let filter = CIFilter(name: \"CIMaskToAlpha\", parameters: [kCIInputImageKey: ciImage]) guard let outputImage = filter?.outputImage else &#123; return &#125; let context = CIContext(options: nil) let cgImage = context.createCGImage(outputImage, from: outputImage.extent) let uiImage = UIImage(cgImage: cgImage!) let v = UIImageView(image: uiImage) v.frame = imageView.frame v.backgroundColor = .blue v.frame.origin.y += imageView.frame.height v.image = uiImage view.addSubview(v) let v2 = UIImageView(image: image) v2.frame = v.frame v2.frame.origin.y += v.frame.height let mask = UIImageView(image: uiImage) mask.frame = CGRect(x: 0, y: 0, width: v2.frame.size.width, height: v2.frame.size.height) mask.backgroundColor = .clear // ä½¿ç”¨è’™ç‰ˆæˆªå– v2.mask = mask view.addSubview(v2) &#125;&#125; æ•ˆæœå¦‚ä¸‹ï¼š å®Œæ•´çš„ç¤ºä¾‹ä»£ç å¯ä»¥åœ¨å¦‚ä¸‹åœ°å€æ‰¾åˆ°ï¼š https://github.com/ZYHshao/MachineLearnDemo VNGeneratePersonSegmentationRequestç»“åˆCIFilterçš„ä½¿ç”¨ï¼Œå¯ä»¥æ–¹ä¾¿çš„è¿›è¡ŒèƒŒæ™¯åˆæˆã€‚","categories":[{"name":"ä»æœºå™¨å­¦ä¹ åˆ°AI","slug":"ä»æœºå™¨å­¦ä¹ åˆ°AI","permalink":"http://huishao.cc/categories/ä»æœºå™¨å­¦ä¹ åˆ°AI/"}],"tags":[],"keywords":[{"name":"ä»æœºå™¨å­¦ä¹ åˆ°AI","slug":"ä»æœºå™¨å­¦ä¹ åˆ°AI","permalink":"http://huishao.cc/categories/ä»æœºå™¨å­¦ä¹ åˆ°AI/"}]},{"title":"iOS MachineLearning ç³»åˆ—ï¼ˆ7ï¼‰â€”â€” å›¾ç‰‡ç›¸ä¼¼åº¦åˆ†æ","slug":"462iOS MachineLearning ç³»åˆ—ï¼ˆ7ï¼‰â€”â€” å›¾ç‰‡ç›¸ä¼¼åº¦åˆ†æ","date":"2023-04-27T16:00:00.000Z","updated":"2023-04-27T15:24:25.297Z","comments":true,"path":"2023/04/28/462iOS MachineLearning ç³»åˆ—ï¼ˆ7ï¼‰â€”â€” å›¾ç‰‡ç›¸ä¼¼åº¦åˆ†æ/","link":"","permalink":"http://huishao.cc/2023/04/28/462iOS MachineLearning ç³»åˆ—ï¼ˆ7ï¼‰â€”â€” å›¾ç‰‡ç›¸ä¼¼åº¦åˆ†æ/","excerpt":"","text":"iOS MachineLearning ç³»åˆ—ï¼ˆ7ï¼‰â€”â€” å›¾ç‰‡ç›¸ä¼¼åº¦åˆ†æå›¾ç‰‡ç›¸ä¼¼åº¦åˆ†ææ˜¯Visionæ¡†æ¶ä¸­æä¾›çš„é«˜çº§åŠŸèƒ½ã€‚å…¶æœ¬è´¨æ˜¯è®¡ç®—å›¾ç‰‡çš„ç‰¹å¾å€¼ï¼Œé€šè¿‡ç‰¹å¾å€¼çš„æ¯”è¾ƒæ¥è®¡ç®—å‡ºå›¾ç‰‡ç‰¹å¾å·®è·ï¼Œä»è€Œå¯ä»¥è·å–åˆ°å›¾ç‰‡çš„ç›¸ä¼¼ç¨‹åº¦ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå›¾ç‰‡çš„ç›¸ä¼¼åº¦åˆ†ææœ‰ç€å¹¿æ³›çš„åº”ç”¨ã€‚å¦‚äººè„¸å¯¹æ¯”è¯†åˆ«ï¼Œç›¸ä¼¼ç‰©å“çš„æœç´¢å’Œè¯†åˆ«ç­‰ã€‚ è¿›è¡Œå›¾ç‰‡ç›¸ä¼¼åº¦è®¡ç®—å‰ï¼Œé¦–å…ˆéœ€è¦å¯¹å›¾ç‰‡çš„ç‰¹å¾å€¼è¿›è¡Œåˆ†æã€‚ä½¿ç”¨VNGenerateImageFeaturePrintRequestç±»åˆ›å»ºå›¾ç‰‡ç‰¹å¾åˆ†æè¯·æ±‚ã€‚å®šä¹‰å¦‚ä¸‹ï¼š 123456open class VNGenerateImageFeaturePrintRequest : VNImageBasedRequest &#123; // å›¾ç‰‡çš„è£åˆ‡å’Œç¼©æ”¾é…ç½® open var imageCropAndScaleOption: VNImageCropAndScaleOption // ç»“æœåˆ—è¡¨ open var results: [VNFeaturePrintObservation]? &#123; get &#125;&#125; VNFeaturePrintObservatioç»“æœå®ä¾‹ä¸­å°è£…äº†ç‰¹å¾æ•°æ®ï¼š 12345678910open class VNFeaturePrintObservation : VNObservation &#123; // ç‰¹å¾ç±»å‹ open var elementType: VNElementType &#123; get &#125; // ç‰¹å¾å…ƒç´ æ•°é‡ open var elementCount: Int &#123; get &#125; // ç‰¹å¾æ•°æ® open var data: Data &#123; get &#125; // è¿›è¡Œå·®è·æ¯”è¾ƒ open func computeDistance(_ outDistance: UnsafeMutablePointer&lt;Float&gt;, to featurePrint: VNFeaturePrintObservation) throws&#125; å…¶ä¸­computeDistanceæ–¹æ³•å³ç”¨æ¥è¿›è¡Œä¸¤ä¸ªåˆ†æç»“æœçš„ç‰¹å¾å·®è·è®¡ç®—ã€‚å¯¹äºå®Œå…¨ä¸€æ ·çš„å›¾ç‰‡ï¼Œè®¡ç®—çš„å·®è·ä¸º0ï¼Œå·®è·è¶Šå¤§ï¼Œè¡¨æ˜å›¾ç‰‡çš„ç›¸ä¼¼åº¦è¶Šå°ã€‚ ä¸‹é¢æä¾›äº†å®Œæ•´çš„Demoä»£ç ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091import UIKitimport Visionclass ImageFeatureViewController: UIViewController &#123; let image1 = UIImage(named: \"cat1\")! let image2 = UIImage(named: \"cat2\")! let image3 = UIImage(named: \"dog1\")! let image4 = UIImage(named: \"dog2\")! lazy var imageView1 = UIImageView(image: image1) lazy var imageView2 = UIImageView(image: image2) lazy var imageView3 = UIImageView(image: image3) lazy var imageView4 = UIImageView(image: image4) override func viewDidLoad() &#123; super.viewDidLoad() view.backgroundColor = .white view.addSubview(imageView1) view.addSubview(imageView2) view.addSubview(imageView3) view.addSubview(imageView4) let width = (self.view.frame.width - 60) / 2 let h1 = width / (image1.size.width / image1.size.height) let h2 = width / (image2.size.width / image2.size.height) let h3 = width / (image3.size.width / image3.size.height) let h4 = width / (image4.size.width / image4.size.height) imageView1.frame = CGRect(x: 20, y: 100, width: width, height: h1) imageView2.frame = CGRect(x: width + 40, y: 100, width: width, height: h2) imageView3.frame = CGRect(x: 20, y: max(h1, h2) + 120, width: width, height: h3) imageView4.frame = CGRect(x: width + 40, y: max(h1, h2) + 120, width: width, height: h4) // è¿›è¡Œç‰¹å¾å€¼åˆ†æ sendRequest(image: image1, number: 1) sendRequest(image: image2, number: 2) sendRequest(image: image3, number: 3) sendRequest(image: image4, number: 4) &#125; func sendRequest(image: UIImage, number: Int) &#123; let handler = VNImageRequestHandler(cgImage: image.cgImage!, orientation: .up) let request = VNGenerateImageFeaturePrintRequest &#123; result, error in guard error == nil else &#123; print(error!) return &#125; let r = result as! VNGenerateImageFeaturePrintRequest if number == 1 &#123; self.result1 = r.results?.first &#125; if number == 2 &#123; self.result2 = r.results?.first &#125; if number == 3 &#123; self.result3 = r.results?.first &#125; if number == 4 &#123; self.result4 = r.results?.first &#125; if let result1 = self.result1, let result2 = self.result2, let result3 = self.result3, let result4 = self.result4 &#123; // è¿›è¡Œç›¸ä¼¼æ€§å¯¹æ¯” var distance12 = Float(0) try! result1.computeDistance(&amp;distance12, to: result2) var distance13 = Float(0) try! result1.computeDistance(&amp;distance13, to: result3) var distance34 = Float(0) try! result3.computeDistance(&amp;distance34, to: result4) print(\"å›¾1ä¸å›¾2ç›¸ä¼¼å·®è·:\", distance12) print(\"å›¾1ä¸å›¾3ç›¸ä¼¼å·®è·:\", distance13) print(\"å›¾3ä¸å›¾4ç›¸ä¼¼å·®è·:\", distance34) DispatchQueue.main.async &#123; let l = UILabel() l.text = \"å›¾1ä¸å›¾2ç›¸ä¼¼å·®è·:\\(distance12)\\nå›¾1ä¸å›¾3ç›¸ä¼¼å·®è·:\\(distance13)\\nå›¾3ä¸å›¾4ç›¸ä¼¼å·®è·:\\(distance34)\" l.font = .boldSystemFont(ofSize: 22) self.view.addSubview(l) l.frame = CGRect(x: 0, y: max(self.imageView3.frame.height, self.imageView4.frame.height) + self.imageView3.frame.origin.y, width: self.view.frame.width, height: 100) l.numberOfLines = 0 &#125; &#125; &#125; try? handler.perform([request]) &#125; var result1: VNFeaturePrintObservation? var result2: VNFeaturePrintObservation? var result3: VNFeaturePrintObservation? var result4: VNFeaturePrintObservation?&#125; å¯ä»¥çœ‹åˆ°ï¼Œä¸Šé¢ä¸¤åªçŒ«çš„ç›¸ä¼¼å·®è·ä¸º12ï¼ŒçŒ«å’Œç‹—çš„ç›¸ä¼¼å·®è·ä¸º26ï¼Œä¸¤åªç‹—çš„ç›¸ä¼¼å·®è·ä¸º8ã€‚ å®Œæ•´çš„ç¤ºä¾‹ä»£ç å¯ä»¥åœ¨å¦‚ä¸‹åœ°å€æ‰¾åˆ°ï¼š https://github.com/ZYHshao/MachineLearnDemo","categories":[{"name":"ä»æœºå™¨å­¦ä¹ åˆ°AI","slug":"ä»æœºå™¨å­¦ä¹ åˆ°AI","permalink":"http://huishao.cc/categories/ä»æœºå™¨å­¦ä¹ åˆ°AI/"}],"tags":[],"keywords":[{"name":"ä»æœºå™¨å­¦ä¹ åˆ°AI","slug":"ä»æœºå™¨å­¦ä¹ åˆ°AI","permalink":"http://huishao.cc/categories/ä»æœºå™¨å­¦ä¹ åˆ°AI/"}]},{"title":"iOS MachineLearning ç³»åˆ—ï¼ˆ6ï¼‰â€”â€” è§†é¢‘ä¸­çš„ç‰©ä½“è½¨è¿¹åˆ†æ","slug":"461iOS MachineLearning ç³»åˆ—ï¼ˆ6ï¼‰â€”â€” è§†é¢‘ä¸­çš„ç‰©ä½“è½¨è¿¹åˆ†æ","date":"2023-04-26T16:00:00.000Z","updated":"2023-04-27T15:24:25.297Z","comments":true,"path":"2023/04/27/461iOS MachineLearning ç³»åˆ—ï¼ˆ6ï¼‰â€”â€” è§†é¢‘ä¸­çš„ç‰©ä½“è½¨è¿¹åˆ†æ/","link":"","permalink":"http://huishao.cc/2023/04/27/461iOS MachineLearning ç³»åˆ—ï¼ˆ6ï¼‰â€”â€” è§†é¢‘ä¸­çš„ç‰©ä½“è½¨è¿¹åˆ†æ/","excerpt":"","text":"iOS MachineLearning ç³»åˆ—ï¼ˆ6ï¼‰â€”â€” è§†é¢‘ä¸­çš„ç‰©ä½“è½¨è¿¹åˆ†æè½¨è¿¹åˆ†ææ˜¯æ¯”ç‰©ä½“è¿½è¸ªæ›´ä¸Šå±‚çš„ä¸€ç§åº”ç”¨ã€‚Visionæ¡†æ¶ä¸­æä¾›äº†æ£€æµ‹è§†é¢‘ä¸­å¤šä¸ªç‰©ä½“çš„è¿åŠ¨è½¨è¿¹ç­‰èƒ½åŠ›ï¼Œåœ¨å¥èº«ï¼Œä½“è‚²ç±»åº”ç”¨ä¸­éå¸¸æœ‰ç”¨ã€‚ è½¨è¿¹æ£€æµ‹éœ€è¦ä¸€ç³»åˆ—çš„è¿åŠ¨çŠ¶æ€æ¥åˆ†æï¼Œå› æ­¤è¿™ç±»çš„è¯·æ±‚æ˜¯æœ‰çŠ¶æ€çš„ï¼Œæœ‰çŠ¶æ€çš„è¯·æ±‚å¯ä»¥è¢«å¥æŸ„å¤šæ¬¡è°ƒç”¨ï¼Œå…¶ä¼šè‡ªåŠ¨è®°å½•ä¹‹å‰çš„çŠ¶æ€ï¼Œä»è€Œè¿›è¡Œè½¨è¿¹è·¯å¾„åˆ†æã€‚éœ€è¦æ³¨æ„ï¼Œåœ¨è¿›è¡Œè½¨è¿¹æ£€æµ‹æ—¶ï¼Œè¦ä¿è¯æ‘„åƒæœºçš„ç›¸å¯¹é™æ­¢ï¼Œé•œå¤´çš„ç§»åŠ¨å¯èƒ½ä¼šå½±å“æ£€æµ‹çš„å‡†ç¡®æ€§ã€‚ åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è½¨è¿¹æ£€æµ‹æ¥è¿›è¡ŒæŠ•çƒçš„çŸ«æ­£ï¼Œçƒç±»è½ç‚¹çš„æ¨æµ‹ç­‰ç­‰ã€‚ 1 - è§£æè§†é¢‘ä¸­çš„ç‰©ä½“é£è¡Œè½¨è¿¹è½¨è¿¹æ£€æµ‹éœ€è¦ä¿å­˜çŠ¶æ€ï¼Œå› æ­¤å…¶ä¼ å…¥çš„å›¾åƒåˆ†æå‚æ•°éœ€è¦ä¸ºåŒ…å«CMTimeä¿¡æ¯çš„CMSampleBufferæ•°æ®ã€‚å¯¹äºä¸€ä¸ªè§†é¢‘æ–‡ä»¶ï¼Œæˆ‘ä»¬é¦–å…ˆè¦åšçš„æ˜¯å°†å…¶ä¸­çš„å›¾åƒå¸§è§£æå‡ºæ¥ï¼Œå³è·å–åˆ°CMSampleBufferæ•°æ®ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334func detectTrajectories() &#123; // è§†é¢‘èµ„æºurl let videoURL = URL(fileURLWithPath: Bundle.main.path(forResource: \"video2\", ofType: \".mov\")!) // è¯»å–è§†é¢‘èµ„æº let asset = AVAsset(url: videoURL) guard let videoTrack = asset.tracks(withMediaType: .video).first else &#123; return &#125; // è·å–å¸§ç‡ let frameRate = videoTrack.nominalFrameRate // è·å–æ€»æ—¶é•¿ let frameDuration = CMTime(seconds: 1 / Double(frameRate), preferredTimescale: CMTimeScale(NSEC_PER_SEC)) // è§£æå‚æ•° let assetReaderOutputSettings: [String: Any] = [ kCVPixelBufferPixelFormatTypeKey as String: kCVPixelFormatType_32BGRA ] // è§£æè¾“å‡ºç±»å®ä¾‹ let assetReaderOutput = AVAssetReaderTrackOutput(track: videoTrack, outputSettings: assetReaderOutputSettings) // åˆ›å»ºè§†é¢‘readerå®ä¾‹ let assetReader = try! AVAssetReader(asset: asset) // æ·»åŠ è¾“å‡ºå¯¹è±¡ assetReader.add(assetReaderOutput) // å¼€å§‹è§£æ if assetReader.startReading() &#123; // è¯»å–å¸§ while let sampleBuffer = assetReaderOutput.copyNextSampleBuffer() &#123; autoreleasepool &#123; if CMSampleBufferDataIsReady(sampleBuffer) &#123; let timestamp = CMSampleBufferGetPresentationTimeStamp(sampleBuffer) // è¿›è¡Œè½¨è¿¹åˆ†æ processFrame(sampleBuffer, atTime: timestamp, withDuration:frameDuration) &#125; &#125; &#125; &#125;&#125; processFramæ–¹æ³•è¿›è¡Œè½¨è¿¹åˆ†æï¼Œå®ç°å¦‚ä¸‹ï¼š 123456func processFrame(_ sampleBuffer: CMSampleBuffer, atTime time : CMTime, withDuration duration : CMTime) &#123; // åˆ›å»ºå¥æŸ„ let handler = VNImageRequestHandler(cmSampleBuffer: sampleBuffer, orientation: .up) // å‘èµ·åˆ†æè¯·æ±‚ try? handler.perform([request])&#125; requestå¯¹è±¡çš„æ„å»ºå¦‚ä¸‹ï¼š 123456789lazy var request: VNDetectTrajectoriesRequest = &#123; let req = VNDetectTrajectoriesRequest(frameAnalysisSpacing:.zero, trajectoryLength: 10) &#123; result, error in if let error &#123; print(error) &#125; self.handleResult(request: result as! VNDetectTrajectoriesRequest) &#125; return req&#125;() è¿™é‡Œçš„å‚æ•°åé¢ä¼šè¯¦ç»†è§£é‡Šã€‚ åœ¨ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ ä¸€ä¸ªAVPlayeræ¥æ’­æ”¾åŸè§†é¢‘ï¼Œç„¶åå°†åˆ†æå‡ºçš„è½¨è¿¹ç»˜åˆ¶åˆ°è§†é¢‘å¯¹åº”çš„ä½ç½®ä¸Šè¿›è¡Œå¯¹æ¯”ã€‚handleResultæ–¹æ³•ç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415161718192021func handleResult(request: VNDetectTrajectoriesRequest) &#123; for res in request.results ?? [] &#123; // æ ¡æ­£åçš„è½¨è¿¹ç‚¹ let points = res.projectedPoints for p in points &#123; DispatchQueue.main.async &#123; let v = UIView() // è§†é¢‘å®½é«˜æ¯” let scale = self.image.size.width / self.image.size.height let width = self.view.frame.width let height = width / scale let size = CGSize(width: width, height:height) v.backgroundColor = .red // æ’­æ”¾å™¨å……æ»¡é¡µé¢ï¼Œå±…ä¸­æ’­æ”¾è§†é¢‘çš„yè½´åç§» let offsetY = self.view.frame.height / 2 - height / 2 v.frame = CGRect(x: p.x * size.width, y: (1 - p.y) * size.height + offsetY, width: 4, height: 4) self.view.addSubview(v) &#125; &#125; &#125;&#125; è½¨è¿¹åˆ†ææ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š 2 - VNDetectTrajectoriesRequestä¸VNTrajectoryObservation ç±»VNDetectTrajectoriesRequestç±»ä¸€ç§æœ‰çŠ¶æ€çš„åˆ†æè¯·æ±‚ç±»ï¼Œç»§æ‰¿è‡ªVNStatefulRequestï¼ŒVNDetectTrajectoriesRequestå®šä¹‰å¦‚ä¸‹ï¼š 123456789101112131415161718192021open class VNDetectTrajectoriesRequest : VNStatefulRequest &#123; // æ„é€ æ–¹æ³• // frameAnalysisSpacingå‚æ•°è®¾ç½®é‡‡æ ·é—´éš” // trajectoryLengthè®¾ç½®ç¡®å®šä¸€æ¡è½¨è¿¹çš„ç‚¹æ•° æœ€å°ä¸º5 public init(frameAnalysisSpacing: CMTime, trajectoryLength: Int, completionHandler: VNRequestCompletionHandler? = nil) // è½¨è¿¹ç‚¹æ•° open var trajectoryLength: Int &#123; get &#125; // è®¾ç½®è¦æ£€æµ‹çš„å¯¹è±¡çš„æœ€å°åŠå¾„ open var objectMinimumNormalizedRadius: Float open var minimumObjectSize: Float // è®¾ç½®è¦æ£€æµ‹å¯¹è±¡çš„æœ€å¤§åŠå¾„ open var objectMaximumNormalizedRadius: Float open var maximumObjectSize: Float // æ£€æµ‹çš„ç›®æ ‡å¸§çš„æ—¶é—´ open var targetFrameTime: CMTime // åˆ†æç»“æœ open var results: [VNTrajectoryObservation]? &#123; get &#125;&#125; VNTrajectoryObservatioç±»æ˜¯è½¨è¿¹åˆ†æçš„ç»“æœç±»ï¼Œå…¶å†…å°è£…äº†ç»„æˆè½¨è¿¹çš„ç‚¹ã€‚å®šä¹‰å¦‚ä¸‹ï¼š 12345678910open class VNTrajectoryObservation : VNObservation &#123; // æ£€æµ‹å‡ºçš„æœªå¤„ç†å‰çš„åŸå§‹ç‚¹ open var detectedPoints: [VNPoint] &#123; get &#125; // çŸ«æ­£åçš„è½¨è¿¹ç‚¹ open var projectedPoints: [VNPoint] &#123; get &#125; // æè¿°è½¨è¿¹çš„æŠ›ç‰©çº¿æ–¹ç¨‹ open var equationCoefficients: simd_float3 &#123; get &#125; // æµ‹é‡çš„ç‰©ä½“çš„åŠå¾„å¹³å‡å€¼ open var movingAverageRadius: CGFloat &#123; get &#125;&#125; å…¶ä¸­equationCoefficientså±æ€§æ˜¯æ¨¡æ‹Ÿå‡ºçš„æŠ›ç‰©çº¿æ–¹ç¨‹ï¼Œå³ä¸‹é¢çš„å…¬å¼ï¼š y = ax^2 + bx + c simd_float3ç»“æ„ä¸­ä¼šå°è£…aï¼Œbå’Œcçš„å€¼ã€‚","categories":[{"name":"ä»æœºå™¨å­¦ä¹ åˆ°AI","slug":"ä»æœºå™¨å­¦ä¹ åˆ°AI","permalink":"http://huishao.cc/categories/ä»æœºå™¨å­¦ä¹ åˆ°AI/"}],"tags":[],"keywords":[{"name":"ä»æœºå™¨å­¦ä¹ åˆ°AI","slug":"ä»æœºå™¨å­¦ä¹ åˆ°AI","permalink":"http://huishao.cc/categories/ä»æœºå™¨å­¦ä¹ åˆ°AI/"}]},{"title":"iOS MachineLearning ç³»åˆ—ï¼ˆ5ï¼‰â€”â€” è§†é¢‘ä¸­çš„ç‰©ä½“è¿åŠ¨è¿½è¸ª","slug":"460iOS MachineLearning ç³»åˆ—ï¼ˆ5ï¼‰â€”â€” è§†é¢‘ä¸­çš„ç‰©ä½“è¿åŠ¨è¿½è¸ª","date":"2023-04-25T16:00:00.000Z","updated":"2023-04-27T15:24:25.296Z","comments":true,"path":"2023/04/26/460iOS MachineLearning ç³»åˆ—ï¼ˆ5ï¼‰â€”â€” è§†é¢‘ä¸­çš„ç‰©ä½“è¿åŠ¨è¿½è¸ª/","link":"","permalink":"http://huishao.cc/2023/04/26/460iOS MachineLearning ç³»åˆ—ï¼ˆ5ï¼‰â€”â€” è§†é¢‘ä¸­çš„ç‰©ä½“è¿åŠ¨è¿½è¸ª/","excerpt":"","text":"iOS MachineLearning ç³»åˆ—ï¼ˆ5ï¼‰â€”â€” è§†é¢‘ä¸­çš„ç‰©ä½“è¿åŠ¨è¿½è¸ªæœ¬ç³»åˆ—çš„å‰é¢å‡ ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†é™æ€å›¾ç‰‡åˆ†æç›¸å…³çš„APIåšäº†è¯¦å°½çš„ä»‹ç»ã€‚åœ¨Visionæ¡†æ¶ä¸­ï¼Œè¿˜æä¾›äº†è§†é¢‘ä¸­ç‰©ä½“è¿½è¸ªçš„èƒ½åŠ›ã€‚ ä»”ç»†æƒ³æ¥ï¼Œå…¶å®è§†é¢‘çš„åˆ†æå’Œé™æ€å›¾ç‰‡çš„åˆ†ææœ¬è´¨ä¸Šå¹¶æ— å¤ªå¤§çš„åŒºåˆ«ï¼Œæˆ‘ä»¬å¯ä»¥å°†è§†é¢‘æ‹†è§£æˆå›¾ç‰‡å¸§ï¼Œä¹‹åå†å¯¹å›¾ç‰‡è¿›è¡Œé™æ€åˆ†æã€‚å°†æ‰€æœ‰å›¾ç‰‡å¸§çš„åˆ†æç»“æœåé¦ˆåˆ°è§†é¢‘ä¸Šï¼Œå³å®ç°äº†å¯¹è§†é¢‘çš„åˆ†æèƒ½åŠ›ã€‚ è§†é¢‘ä¸­ç‰©ä½“è¿åŠ¨çš„è·Ÿè¸ªå¸¸åœ¨ä¸€äº›ARæ¸¸æˆä¸­åº”ç”¨ï¼Œè¿™äº›ç°å®å¢å¼ºç±»çš„åº”ç”¨å¸¸å¸¸éœ€è¦å®æ—¶è¿½è¸ªæ˜¾ç¤ºä¸­çš„ç‰©ä½“ã€‚ 1 - å…ˆçœ‹ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹æˆ‘ä»¬ä»¥çŸ©å½¢åŒºåŸŸè¿½è¸ªä¸ºä¾‹ï¼Œä¸å‰é¢æ–‡ç« ä»‹ç»çš„é™æ€åˆ†æç±»ä¼¼ï¼Œè¿åŠ¨è¿½è¸ªå®ç°çš„æ ¸å¿ƒç‚¹ä¹Ÿåªæœ‰ä¸‰ä¸ªï¼š 1. è¯·æ±‚æ“ä½œå¥æŸ„ã€‚ 2. æ„å»ºè¯·æ±‚ã€‚ 3. å¤„ç†åˆ†æè¯·æ±‚çš„å›è°ƒã€‚ é¦–å…ˆæˆ‘ä»¬å…ˆæ¥æ„å»ºæ“ä½œå¥æŸ„ï¼š 1lazy var handler = VNSequenceRequestHandler() æ„å»ºè¯·æ±‚ï¼š 12345678910111213lazy var request: VNTrackRectangleRequest = &#123; let req = VNTrackRectangleRequest(rectangleObservation: observation) &#123; result, error in // å¤„ç†ç»“æœ if let error &#123; print(error) &#125; // å¤„ç†ç»“æœ self.handleResult(request: result as! VNTrackRectangleRequest) &#125; // é€‰æ‹©å¿«é€Ÿæ¨¡å¼ req.trackingLevel = .fast return req&#125;() åœ¨æ„å»ºè¯·æ±‚æ—¶ï¼Œéœ€è¦æˆ‘ä»¬ä¼ å…¥ä¸€ä¸ªåˆå§‹çš„æè¿°çŸ©å½¢åŒºåŸŸçš„VNRectangleObservationå¯¹è±¡ï¼Œä¹‹åçš„è¿½è¸ªä¼šä»¥å‚æ•°ä¸ºå¯¹è±¡ã€‚VNRectangleObservationçš„æ„å»ºç¤ºä¾‹å¦‚ä¸‹ï¼š 12// é¢„æ£€æµ‹å¾—åˆ°çš„var observation = VNRectangleObservation(boundingBox: CGRect(x: 0.3728713095188141, y: 0.833836019039154, width: 0.16493645310401917, height: 0.07572066783905029)) éœ€è¦æ³¨æ„ï¼Œè¿™é‡Œçš„æ•°æ®æ˜¯æˆ‘ä½¿ç”¨é™æ€åˆ†æé¢„å…ˆå¤„ç†è§†é¢‘é¦–å¸§å¾—åˆ°çš„ï¼Œå®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å…ˆå¯¹é¦–å¸§è¿›è¡Œé™æ€åˆ†æï¼Œæ‰¾åˆ°è¦è¿½è¸ªçš„çŸ©å½¢åŒºåŸŸã€‚ ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å¯¹è§†é¢‘èµ„æºè¿›è¡Œä¸€äº›å¤„ç†ï¼Œç®€å•æ¥è¯´ï¼Œå³æ˜¯è§£æè§†é¢‘å¸§ï¼Œä¹‹åé€å¸§è¿›è¡Œåˆ†æï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829func readVideo() &#123; // è§†é¢‘è·¯å¾„ let videoURL = URL(fileURLWithPath: Bundle.main.path(forResource: \"video1\", ofType: \".mp4\")!) // è¯»å–è§†é¢‘èµ„æº let videoAsset = AVURLAsset(url: videoURL) // åˆ›å»ºè§†é¢‘èµ„æºè§£æå™¨ let videoProcessor = AVAssetImageGenerator(asset: videoAsset) videoProcessor.requestedTimeToleranceBefore = CMTime.zero videoProcessor.requestedTimeToleranceAfter = CMTime.zero // è·å–è§†é¢‘æ—¶é•¿ let durationSeconds: Float64 = CMTimeGetSeconds(videoAsset.duration) // å­˜å‚¨è¦æˆªå–çš„è§†é¢‘å¸§æ—¶é—´ç‚¹ var times = [NSValue]() // ä»¥æ¯ç§’60å¸§ä¸ºæ ‡å‡†ï¼Œè·å–æ€»å¸§æ•° let totalFrames: Float64 = durationSeconds * 60 // å®šä¹‰ CMTime å³è¯·æ±‚ç¼©ç•¥å›¾çš„æ—¶é—´é—´éš” for i in 0...Int(totalFrames) &#123; let timeFrame = CMTimeMake(value: Int64(i), timescale: 60) let timeValue = NSValue(time: timeFrame) times.append(timeValue) &#125; // è¿›è¡Œå›¾ç‰‡è§£æ videoProcessor.generateCGImagesAsynchronously(forTimes: times) &#123; time, cgImage, actualTime, resultCode, error in if let cgImage = cgImage &#123; let image = UIImage(cgImage: cgImage) self.images.append(image) &#125; &#125;&#125; å½“æ‰€æœ‰è§†é¢‘å¸§å¤„ç†å®Œæˆåï¼Œæˆ‘ä»¬å³å¯ä»¥å¯¹å…¶è¿›è¡ŒçŸ©å½¢è¿½è¸ªï¼Œç¤ºä¾‹æ–¹æ³•å¦‚ä¸‹ï¼š 12345678910111213141516171819202122func start() &#123; var count = 0 // è¿™é‡Œå®šæ—¶å™¨çš„ä½œç”¨æ˜¯é€å¸§çš„åˆ·æ–°é¡µé¢ï¼ŒåŒæ—¶è¿›è¡Œè¿½è¸ª Timer.scheduledTimer(withTimeInterval: 0.03, repeats: true) &#123; t in if count &lt; self.images.count &#123; // è®¾ç½®é¡µé¢å±•ç¤ºçš„å›¾ç‰‡ self.imageView.image = self.images[count] // å°†inputObservationè®¾ç½®ä¸ºä¸Šä¸€æ¬¡çš„åˆ†æç»“æœ self.request.inputObservation = self.observation // è¿›è¡Œè¿½è¸ªåˆ†æ try? self.handler.perform([self.request], on: self.images[count].cgImage!, orientation: .up) count += 1 &#125; else &#123; // å½“å¾ªç¯ç»“æŸæ—¶ï¼Œè®¾ç½®isLastFrameè¡¨æƒ…è¯·æ±‚å·²ç»åˆ°äº†æœ€åä¸€å¸§ self.request.isLastFrame = true // åœæ­¢å®šæ—¶å™¨ t.invalidate() print(\"end\") &#125; &#125; print(images.count)&#125; éœ€è¦æ³¨æ„ï¼Œè¿½è¸ªåˆ†æçš„æœ¬è´¨æ˜¯å¯¹çŸ©å½¢åŒºåŸŸçš„å‰åçŠ¶æ€è¿›è¡Œæ¯”è¾ƒï¼Œå°†å…¶è¿è¡Œæƒ…å†µè¿›è¡Œåˆ†æã€‚å› æ­¤ï¼Œæ¯æ¬¡è¿›è¡Œåˆ†æè¯·æ±‚æ—¶éœ€è¦å°†ä¸Šä¸€æ¬¡çš„ç»“æœä½œä¸ºinputObservationè¿›è¡Œè¾“å…¥ï¼Œå½“è§†é¢‘ç»“æŸæ—¶ï¼Œè®¾ç½®èµ·isLastFrameæ¥ç»“æŸåˆ†æï¼Œé‡Šæ”¾èµ„æºã€‚ æœ€åï¼Œåˆ†æç»“æœçš„å¤„ç†å¾ˆç®€å•ï¼š 1234567891011121314151617func handleResult(request: VNTrackRectangleRequest) &#123; print(request.results) for r in request.results ?? [] &#123; guard let result = r as? VNRectangleObservation else &#123; return &#125; observation = result var box = result.boundingBox // åæ ‡ç³»è½¬æ¢ box.origin.y = 1 - box.origin.y - box.size.height print(\"box:\", result.boundingBox) DispatchQueue.main.async &#123; let size = self.imageView.frame.size self.boxView.frame = CGRect(x: box.origin.x * size.width, y: box.origin.y * size.height, width: box.size.width * size.width, height: box.size.height * size.height) &#125; &#125;&#125; å…¶ä¸­ï¼Œboxæ˜¯æˆ‘ä»¬å®šä¹‰å¥½çš„ä¸€ä¸ªUIViewè’™å±‚ï¼Œç”¨æ¥è¡¨ç¤ºè¿½è¸ªçš„ç»“æœï¼Œæ•ˆæœå¦‚ä¸‹GIFå›¾æ‰€ç¤ºï¼š å…¶ä¸­ï¼Œç™½è‰²çš„è‰²å—æ˜¯åŸå§‹è§†é¢‘ä¸­çš„çŸ©å½¢ç‰©ä½“ï¼Œçº¢è‰²çš„è‰²å—æ˜¯æˆ‘ä»¬çš„è¿½è¸ªç»“æœã€‚ 2 - å‡ ä¸ªé‡è¦çš„ç±»VNSequenceRequestHandleç±»æ— éœ€å¤šè¯´äº†ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯å‘èµ·è¯·æ±‚ï¼Œå…¶ä¸VNImageRequestHandlerç±»çš„æœ€å¤§åŒºåˆ«åœ¨äºVNSequenceRequestHandleåœ¨åˆ›å»ºå¯¹è±¡æ—¶æ— éœ€è®¾ç½®ä¸€ä¸ªå›¾ç‰‡èµ„æºï¼ŒVNSequenceRequestHandleä¸»è¦æ˜¯ç”¨æ¥åˆ†æä¸€ç³»åˆ—å›¾ç‰‡çš„ï¼Œå› æ­¤å…¶æ˜¯åœ¨è¯·æ±‚æ‰§è¡Œæ—¶è®¾ç½®å›¾ç‰‡èµ„æºçš„ã€‚ VNTrackRectangleRequestç±»ç”¨æ¥åˆ›å»ºçŸ©å½¢åŒºåŸŸè¿½è¸ªè¯·æ±‚ï¼Œç»§æ‰¿è‡ªVNTrackingRequestç±»ï¼ŒVNTrackingRequestçš„å®šä¹‰å¦‚ä¸‹ï¼š 12345678open class VNTrackingRequest : VNImageBasedRequest &#123; // è¾“å…¥è¿½è¸ªåŒºåŸŸçš„Observationå¯¹è±¡ æ¯æ¬¡æ ¹æ®ä¸­è¦åˆ·æ–° open var inputObservation: VNDetectedObjectObservation // è¿½è¸ªæ¨¡å¼ open var trackingLevel: VNRequestTrackingLevel // æ˜¯å¦æ˜¯æœ€åä¸€å¸§ï¼Œå¦‚æœè®¾ç½®ä¸ºtrueï¼Œå°†åœæ­¢åç»­åˆ†æ open var isLastFrame: Bool&#125; å…¶ä¸­trackingLevelç”¨äº†è®¾ç½®è¿½è¸ªçš„ç®—æ³•æ¨¡å¼ï¼š 123456public enum VNRequestTrackingLevel : UInt, @unchecked Sendable &#123; // ç²¾å‡†ä¼˜å…ˆ case accurate = 0 // é€Ÿåº¦ä¼˜å…ˆ case fast = 1&#125; æ›´å¤šæ—¶å€™ï¼Œæˆ‘ä»¬è¦è¿½è¸ªçš„ç‰©ä½“å¯èƒ½ä¸æ˜¯è§„åˆ™çš„çŸ©å½¢ï¼Œä¹Ÿå¯èƒ½æ˜¯ä¼šè¿›è¡Œç¿»è½¬å’Œå½¢å˜çš„ç‰©ä½“ï¼Œä¾‹å¦‚è¡Œé©¶ä¸­çš„æ±½è½¦ï¼Œé£è¡Œä¸­çš„è¶³çƒï¼Œå¥”è·‘ä¸­çš„äººç­‰ã€‚å¯¹äºè¿™ç±»éœ€æ±‚ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨VNTrackObjectRequestæ¥è¿›è¡Œè¿½è¸ªï¼Œå…¶ç”¨æ³•ä¸VNTrackRectangleRequestå‡ ä¹å®Œå…¨ä¸€è‡´ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ï¼Œç¤ºä¾‹ä»£ç å¯ä»¥åœ¨ä¸‹é¢æ‰¾åˆ°ï¼š https://github.com/ZYHshao/MachineLearnDemo","categories":[{"name":"ä»æœºå™¨å­¦ä¹ åˆ°AI","slug":"ä»æœºå™¨å­¦ä¹ åˆ°AI","permalink":"http://huishao.cc/categories/ä»æœºå™¨å­¦ä¹ åˆ°AI/"}],"tags":[],"keywords":[{"name":"ä»æœºå™¨å­¦ä¹ åˆ°AI","slug":"ä»æœºå™¨å­¦ä¹ åˆ°AI","permalink":"http://huishao.cc/categories/ä»æœºå™¨å­¦ä¹ åˆ°AI/"}]},{"title":"iOS MachineLearning ç³»åˆ—ï¼ˆ4ï¼‰â€”â€” é™æ€å›¾åƒåˆ†æä¹‹ç‰©ä½“è¯†åˆ«ä¸åˆ†ç±»","slug":"459iOS MachineLearning ç³»åˆ—ï¼ˆ4ï¼‰â€”â€” é™æ€å›¾åƒåˆ†æä¹‹ç‰©ä½“è¯†åˆ«ä¸åˆ†ç±»","date":"2023-04-24T16:00:00.000Z","updated":"2023-04-25T22:20:21.305Z","comments":true,"path":"2023/04/25/459iOS MachineLearning ç³»åˆ—ï¼ˆ4ï¼‰â€”â€” é™æ€å›¾åƒåˆ†æä¹‹ç‰©ä½“è¯†åˆ«ä¸åˆ†ç±»/","link":"","permalink":"http://huishao.cc/2023/04/25/459iOS MachineLearning ç³»åˆ—ï¼ˆ4ï¼‰â€”â€” é™æ€å›¾åƒåˆ†æä¹‹ç‰©ä½“è¯†åˆ«ä¸åˆ†ç±»/","excerpt":"","text":"iOS MachineLearning ç³»åˆ—ï¼ˆ4ï¼‰â€”â€” é™æ€å›¾åƒåˆ†æä¹‹ç‰©ä½“è¯†åˆ«ä¸åˆ†ç±»æœ¬ç³»åˆ—çš„å‰å‡ ç¯‡æ–‡ä»¶ï¼Œè¯¦ç»†äº†ä»‹ç»äº†Visionæ¡†æ¶ä¸­å…³äºé™æ€å›¾ç‰‡åŒºåŸŸè¯†åˆ«çš„å†…å®¹ã€‚æœ¬ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬å°†ç€é‡ä»‹ç»é™æ€å›¾ç‰‡ä¸­ç‰©ä½“çš„è¯†åˆ«ä¸åˆ†ç±»ã€‚ç‰©ä½“è¯†åˆ«å’Œåˆ†ç±»ä¹Ÿæ˜¯Machine Learningé¢†åŸŸé‡è¦çš„åº”ç”¨ã€‚é€šè¿‡å¤§é‡çš„å›¾ç‰‡æ•°æ®è¿›è¡Œè®­ç»ƒåï¼Œæ¨¡å‹å¯ä»¥è½»æ˜“çš„åˆ†æå‡ºå›¾ç‰‡çš„å±æ€§ä»¥åŠå›¾ç‰‡ä¸­ç‰©ä½“çš„å±æ€§ã€‚ 1 - æ–‡å­—è¯†åˆ«æ–‡å­—è¯†åˆ«æ˜¯åº”ç”¨éå¸¸å¹¿æ³›çš„ä¸€ç§å›¾ç‰‡è¯†åˆ«æŠ€æœ¯ã€‚åœ¨Visionæ¡†æ¶ä¸­ï¼Œä½¿ç”¨VNRecognizeTextRequestæ¥è¿›è¡Œæ–‡å­—è¯†åˆ«ï¼Œå¹¶ä¸”å…¶æ”¯æŒå¤šç§è¯­è¨€ï¼Œä¸”æœ‰ä¸é”™çš„è¯†åˆ«ç²¾åº¦ã€‚VNRecognizeTextRequestçš„åˆ›å»ºç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314151617private lazy var recognizeTextRequest: VNRecognizeTextRequest = &#123; let textDetectionRequest = VNRecognizeTextRequest &#123; request, error in DispatchQueue.main.async &#123; self.drawTask(request: request as! VNRecognizeTextRequest) &#125; &#125; // è®¾ç½®è¯­è¨€ textDetectionRequest.recognitionLanguages = [\"zh-Hans\"] // è®¾ç½®è¯†åˆ«çº§åˆ« accurateä¸ºæœ€ç²¾å‡† fastä¸ºæœ€å¿«é€Ÿ textDetectionRequest.recognitionLevel = .accurate // è®¾ç½®æ˜¯å¦ä½¿ç”¨è¯­è¨€çŸ«æ­£ textDetectionRequest.usesLanguageCorrection = true // è·å–æ‰€æ”¯æŒçš„è¯­è¨€ let set = try? textDetectionRequest.supportedRecognitionLanguages() print(set) return textDetectionRequest&#125;() å¯ä»¥é€šè¿‡å¯¹VNRecognizeTextRequestå®ä¾‹è¿›è¡Œé…ç½®æ¥è°ƒæ•´è¯†åˆ«ç²¾åº¦ï¼Œè¯†åˆ«çš„è¯­è¨€ï¼Œæ˜¯å¦è¿›è¡ŒçŸ«æ­£çš„é€‰é¡¹ï¼ŒVNRecognizeTextRequestç±»çš„å®šä¹‰å¦‚ä¸‹ï¼š 1234567891011121314151617181920open class VNRecognizeTextRequest : VNImageBasedRequest, VNRequestProgressProviding &#123; // æ‰€æ”¯æŒçš„è¯­è¨€åˆ—è¡¨ open class func supportedRecognitionLanguages(for recognitionLevel: VNRequestTextRecognitionLevel, revision requestRevision: Int) throws -&gt; [String] open func supportedRecognitionLanguages() throws -&gt; [String] // è¯†åˆ«è¿‡ç¨‹ä¸­æ‰€ä½¿ç”¨çš„è¯­è¨€ open var recognitionLanguages: [String] // è‡ªå®šä¹‰çš„è¯æ±‡ï¼Œåœ¨è¯†åˆ«å•è¯æ—¶ï¼Œè‡ªå®šä¹‰çš„è¯æ±‡ä¼˜å…ˆçº§ä¼šé«˜äºé»˜è®¤è¯å…¸ open var customWords: [String] // è¯†åˆ«ç­‰çº§ï¼Œç²¾åº¦ä¼˜å…ˆä¼šæ›´åŠ æ¶ˆè€—æ€§èƒ½ // accurate: ç²¾åº¦ä¼˜å…ˆ fast: é€Ÿåº¦ä¼˜å…ˆ open var recognitionLevel: VNRequestTextRecognitionLevel // è®¾ç½®æ˜¯å¦ä½¿ç”¨è‡ªåŠ¨çŸ«æ­£ï¼Œè‡ªåŠ¨çŸ«æ­£ä¼šæ›´åŠ æ¶ˆè€—æ€§èƒ½ open var usesLanguageCorrection: Bool // è®¾ç½®æ˜¯å¦è‡ªåŠ¨è¯†åˆ«è¯­è¨€ç±»å‹ï¼Œå½“ä¸ç¡®å®šè¾“å…¥çš„è¯­ç§æ—¶ï¼Œå¯ä»¥è®¾ç½®å…¶è‡ªåŠ¨è¯†åˆ«ï¼Œä¼šæ›´æ¶ˆè€—æ€§èƒ½ open var automaticallyDetectsLanguage: Bool // è®¾ç½®å¯è¯†åˆ«æ–‡æœ¬çš„æœ€å°é«˜åº¦ï¼ˆä¸ºç›¸å¯¹åŸå›¾çš„æ¯”ä¾‹å€¼ï¼‰ open var minimumTextHeight: Float // ç»“æœæ•°ç»„ open var results: [VNRecognizedTextObservation]? &#123; get &#125;&#125; VNRecognizeTextRequestçš„è¯†åˆ«ç»“æœä¸ºVNRecognizedTextObservationç±»ï¼Œæ­¤ç±»ä¹Ÿæ˜¯ç»§æ‰¿è‡ªVNRectangleObservationçš„ï¼Œå› æ­¤æˆ‘ä»¬ä¹ŸåŒæ—¶å¯ä»¥è·å–åˆ°æ‰€è¯†åˆ«çš„æ–‡æœ¬æ‰€åœ¨åŸå›¾çš„ä½ç½®ã€‚VNRecognizedTextObservationç±»çš„å®šä¹‰å¦‚ä¸‹ï¼š 1234open class VNRecognizedTextObservation : VNRectangleObservation &#123; // è·å–å€™é€‰ç»“æœ open func topCandidates(_ maxCandidateCount: Int) -&gt; [VNRecognizedText]&#125; topCandidateä¼šè¿”å›ä¸€ç»„å€™é€‰ç»“æœï¼Œå…¶å‚æ•°è®¾ç½®æœ€å¤šè¿”å›çš„å€™é€‰ç»“æœä¸ªæ•°ï¼Œéœ€è¦æ³¨æ„æ­¤å‚æ•°æ‰€æ”¯æŒçš„æœ€å¤§å€¼ä¸º10ã€‚å€™é€‰ç»“æœæ˜¯æŒ‡å¯¹äºåŒä¸€æ®µæ–‡å­—ï¼Œå¯èƒ½ä¼šè¯†åˆ«å‡ºå¤šä¸ªç›¸ä¼¼çš„ç»“æœï¼Œæœ€ç»ˆè¯†åˆ«çš„æ–‡æœ¬ç»“æœVNRecognizedTextç±»çš„å®šä¹‰å¦‚ä¸‹ï¼š 123456open class VNRecognizedText : NSObject, NSCopying, NSSecureCoding, VNRequestRevisionProviding &#123; // è¯†åˆ«å‡ºçš„æ–‡æœ¬å­—ç¬¦ä¸² open var string: String &#123; get &#125; // æœ¬æ¬¡è¯†åˆ«ç»“æœçš„å¯ä¿¡åº¦ï¼ˆ0-1ä¹‹é—´ï¼‰ open var confidence: VNConfidence &#123; get &#125;&#125; å¯¹äºconfidenceå¯ä¿¡åº¦å±æ€§æ¥è¯´ï¼Œè¶Šæ¥è¿‘1ï¼Œå¯ä¿¡åº¦è¶Šé«˜ã€‚ ä¸‹å›¾æ¼”ç¤ºäº†ç…§ç‰‡ä¸­æ–‡æœ¬çš„è¯†åˆ«æ•ˆæœï¼š å¯ä»¥çœ‹åˆ°ï¼ŒVisionå¯¹äºä¸­æ–‡å°åˆ·ä½“çš„è¯†åˆ«èƒ½åŠ›è¿˜æ˜¯æ¯”è¾ƒå‡†ç¡®çš„ã€‚ ç›®å‰ï¼Œæ‰€æ”¯æŒè¯†åˆ«çš„è¯­ç§åˆ—ä¸¾å¦‚ä¸‹ï¼š 1234567891011121314en-USï¼šç¾å¼è‹±è¯­fr-FRï¼šæ³•è¯­it-ITï¼šæ„å¤§åˆ©è¯­de-DEï¼šå¾·è¯­es-ESï¼šè¥¿ç­ç‰™è¯­pt-BRï¼šè‘¡è„ç‰™è¯­zh-Hansï¼šç®€ä½“ä¸­æ–‡zh-Hantï¼šç¹ä½“ä¸­æ–‡yue-Hansï¼šç²¤è¯­ç®€ä½“yue-Hantï¼šç²¤è¯­ç¹ä½“ko-KRï¼šéŸ©è¯­ja-JPï¼šæ—¥è¯­ru-RUï¼šä¿„è¯­uk-UAï¼šä¹Œå…‹å…°è¯­ 2 - åŠ¨ç‰©è¯†åˆ«è™½è¯´æ˜¯åŠ¨ç‰©è¯†åˆ«ï¼Œä½†å…¶å®ç›®å‰çš„APIä»…ä»…æ”¯æŒçŒ«å’Œç‹—çš„è¯†åˆ«ã€‚ä½¿ç”¨VNRecognizeAnimalsRequestç±»æ¥åˆ›å»ºåŠ¨ç‰©è¯†åˆ«è¯·æ±‚ï¼š 1234567open class VNRecognizeAnimalsRequest : VNImageBasedRequest &#123; // è·å–æ‰€æ”¯æŒè¯†åˆ«çš„åŠ¨ç‰©ç§ç±» open class func knownAnimalIdentifiers(forRevision requestRevision: Int) throws -&gt; [VNAnimalIdentifier] open func supportedIdentifiers() throws -&gt; [VNAnimalIdentifier] // ç»“æœåˆ—è¡¨ open var results: [VNRecognizedObjectObservation]? &#123; get &#125;&#125; è¯†åˆ«çš„ç»“æœVNRecognizedObjectObservationç±»ä¹Ÿæ˜¯ç»§æ‰¿è‡ªVNDetectedObjectObservationï¼Œå…¶ä¼šåŒ…è£…æ‰€è¯†åˆ«çš„åŠ¨ç‰©æ‰€åœ¨å›¾ç‰‡ä¸­çš„åŒºåŸŸï¼Œä¸”VNRecognizedObjectObservationç±»ä¸­ä¼šå°è£…ä¸€ç»„VNClassificationObservationå¯¹è±¡ï¼Œå¦‚ä¸‹ï¼š 1234open class VNRecognizedObjectObservation : VNDetectedObjectObservation &#123; // è¯†åˆ«çš„åŠ¨ç‰©æ ‡ç­¾ open var labels: [VNClassificationObservation] &#123; get &#125;&#125; VNClassificationObservatioç±»å³è¡¨ç¤ºè¯†åˆ«å‡ºçš„ç‰©ä½“å…·ä½“çš„æ ‡ç­¾ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š 1234open class VNClassificationObservation : VNObservation &#123; // æ ‡ç­¾å­—ç¬¦ä¸² open var identifier: String &#123; get &#125;&#125; å¯¹äºVNRecognizeAnimalsRequestè¯·æ±‚æ¥è¯´ï¼Œæ­¤æ ‡ç­¾çš„å€¼å¯èƒ½ä¸ºCatæˆ–Dogã€‚è¯†åˆ«æ•ˆæœå¦‚ä¸‹å›¾ï¼š 3 - å›¾ç‰‡ç‰©ä½“åˆ†ç±»å›¾ç‰‡ç‰©ä½“åˆ†ç±»æ˜¯æŒ‡å¯¹é™æ€å›¾ç‰‡ç»§ç»­åˆ†æï¼Œå°†å…¶ä¸­å¯èƒ½å­˜åœ¨çš„ç‰©ä½“åˆ†æå‡ºæ¥ã€‚ä½¿ç”¨VNClassifyImageRequeståˆ›å»ºå›¾ç‰‡ç‰©ä½“åˆ†æè¯·æ±‚ã€‚æ­¤ç±»éå¸¸ç®€å•ï¼Œæ²¡æœ‰å¤ªå¤šéœ€è¦é…ç½®çš„ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š 1234567open class VNClassifyImageRequest : VNImageBasedRequest &#123; // è·å–æ”¯æŒè¯†åˆ«çš„ç‰©ä½“ open class func knownClassifications(forRevision requestRevision: Int) throws -&gt; [VNClassificationObservation] open func supportedIdentifiers() throws -&gt; [String] // ç»“æœæ•°ç»„ open var results: [VNClassificationObservation]? &#123; get &#125;&#125; VNClassifyImageRequestæ‰€æ”¯æŒè¯†åˆ«çš„ç‰©ä½“ç§ç±»éå¸¸å¤šï¼Œæœ‰åƒä½™ç§ï¼Œè¿™é‡Œå°±ä¸å†åˆ—ä¸¾ã€‚å…¶è¯†åˆ«åçš„ç»“æœä¹Ÿæ˜¯VNClassificationObservationç±»ï¼Œå…¶å†…éƒ¨çš„identifierè¡¨ç¤ºæ‰€è¯†åˆ«å‡ºçš„ç‰©ä½“çš„æ ‡ç­¾ã€‚ éœ€è¦æ³¨æ„ï¼Œå¯¹äºç•¥å¾®å¤æ‚çš„å›¾ç‰‡æ¥è¯´ï¼Œè¯†åˆ«çš„ç»“æœå¯èƒ½éå¸¸å¤šï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®éœ€æ±‚æ¥è®¾ç½®ä¸€ä¸ªå¯ä¿¡åº¦çš„é˜ˆå€¼ï¼Œåªæœ‰è¾¾åˆ°æ­¤å¯ä¿¡åº¦çš„æ‰è¢«é‡‡ç”¨ï¼Œä¾‹å¦‚ï¼š 123456789private func drawTask(request: VNClassifyImageRequest) &#123; boxViews.forEach &#123; v in v.removeFromSuperview() &#125; for result in request.results ?? [] where result.confidence &gt; 0.8 &#123; // è§£æå‡ºæ–‡æœ¬ textView.text = textView.text.appending(result.identifier + \"\\n\") &#125;&#125; è¯†åˆ«æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬é€‰æ‹©äº†å¤§äº0.8å¯ä¿¡åº¦çš„ç»“æœï¼Œæ‰€è¯†åˆ«å‡ºçš„å…³é”®å­—æœ‰ï¼šå»ºç­‘ï¼ŒåŠ å·¥æœ¨æï¼ŒåŠ¨ç‰©ï¼Œå“ºä¹³åŠ¨ç‰©ï¼ŒçŠ¬ç±»ï¼Œç‹—ï¼Œåšç¾ã€‚ï¼ˆä¸çŸ¥ä¸ºä½•å¯¹çŒ«çš„è¯†åˆ«åº¦å¾ˆå·®ï¼‰ æœ¬ä¸­æ‰€æ¶‰åŠåˆ°çš„ä»£ç ï¼Œéƒ½å¯ä»¥åœ¨å¦‚ä¸‹ Demo ä¸­æ‰¾åˆ°ï¼š https://github.com/ZYHshao/MachineLearnDemo åˆ°æ­¤ï¼Œæˆ‘ä»¬å·²ç»å°†é™æ€å›¾ç‰‡çš„åˆ†æåšäº†è¯¦å°½çš„ä»‹ç»ï¼Œç›¸ä¿¡å¾ˆå¤šAIèƒ½åŠ›éƒ½æ˜¯å¼€å‘ä¸­ä¼šä½¿ç”¨åˆ°çš„ã€‚æœ¬ç³»åˆ—åé¢æ–‡ç« ï¼Œå°†ä»‹ç»å¯¹è±¡è¿½è¸ªçš„ç›¸å…³APIçš„ç”¨æ³•ã€‚","categories":[{"name":"ä»æœºå™¨å­¦ä¹ åˆ°AI","slug":"ä»æœºå™¨å­¦ä¹ åˆ°AI","permalink":"http://huishao.cc/categories/ä»æœºå™¨å­¦ä¹ åˆ°AI/"}],"tags":[],"keywords":[{"name":"ä»æœºå™¨å­¦ä¹ åˆ°AI","slug":"ä»æœºå™¨å­¦ä¹ åˆ°AI","permalink":"http://huishao.cc/categories/ä»æœºå™¨å­¦ä¹ åˆ°AI/"}]},{"title":"iOS MachineLearning ç³»åˆ—ï¼ˆ3ï¼‰â€”â€” é™æ€å›¾åƒåˆ†æä¹‹åŒºåŸŸè¯†åˆ«","slug":"458iOS MachineLearning ç³»åˆ—ï¼ˆ3ï¼‰â€”â€” é™æ€å›¾åƒåˆ†æä¹‹åŒºåŸŸè¯†åˆ«","date":"2023-04-21T16:00:00.000Z","updated":"2023-04-22T12:35:38.612Z","comments":true,"path":"2023/04/22/458iOS MachineLearning ç³»åˆ—ï¼ˆ3ï¼‰â€”â€” é™æ€å›¾åƒåˆ†æä¹‹åŒºåŸŸè¯†åˆ«/","link":"","permalink":"http://huishao.cc/2023/04/22/458iOS MachineLearning ç³»åˆ—ï¼ˆ3ï¼‰â€”â€” é™æ€å›¾åƒåˆ†æä¹‹åŒºåŸŸè¯†åˆ«/","excerpt":"","text":"iOS MachineLearning ç³»åˆ—ï¼ˆ3ï¼‰â€”â€” é™æ€å›¾åƒåˆ†æä¹‹åŒºåŸŸè¯†åˆ«æœ¬ç³»åˆ—çš„å‰ä¸€ç¯‡æ–‡ç« ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨iOSä¸­è‡ªå¸¦çš„APIå¯¹å›¾ç‰‡ä¸­çš„çŸ©å½¢åŒºåŸŸè¿›è¡Œåˆ†æã€‚åœ¨å›¾åƒé™æ€åˆ†ææ–¹é¢ï¼ŒçŸ©å½¢åŒºåŸŸåˆ†ææ˜¯éå¸¸åŸºç¡€çš„éƒ¨åˆ†ã€‚APIè¿˜æä¾›äº†æ›´å¤šé¢å‘åº”ç”¨çš„åˆ†æèƒ½åŠ›ï¼Œå¦‚æ–‡æœ¬åŒºåŸŸåˆ†æï¼Œæ¡å½¢ç äºŒç»´ç çš„åˆ†æï¼Œäººè„¸åŒºåŸŸåˆ†æï¼Œäººä½“åˆ†æç­‰ã€‚æœ¬ç¯‡æ–‡ç« ä¸»è¦ä»‹ç»è¿™äº›åˆ†æAPIçš„åº”ç”¨ã€‚å…³äºçŸ©å½¢è¯†åˆ«çš„åŸºç¡€æ–‡ç« ï¼Œé“¾æ¥å¦‚ä¸‹ï¼š https://my.oschina.net/u/2340880/blog/8671152 1 - æ–‡æœ¬åŒºåŸŸåˆ†ææ–‡æœ¬åŒºåŸŸåˆ†æç›¸æ¯”çŸ©å½¢åŒºåŸŸåˆ†ææ›´åŠ ä¸Šå±‚ï¼Œå…¶APIæ¥å£ä¹Ÿæ›´åŠ ç®€å•ã€‚åˆ†æè¯·æ±‚çš„åˆ›å»ºç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910private lazy var textDetectionRequest: VNDetectTextRectanglesRequest = &#123; let textDetectRequest = VNDetectTextRectanglesRequest &#123; request, error in DispatchQueue.main.async &#123; self.drawTask(request: request as! VNDetectTextRectanglesRequest) &#125; &#125; // æ˜¯å¦æŠ¥å‘Šå­—ç¬¦è¾¹æ¡†åŒºåŸŸ textDetectRequest.reportCharacterBoxes = true return textDetectRequest&#125;() å…¶è¯·æ±‚çš„å‘èµ·æ–¹å¼ï¼Œå›è°ƒç»“æœçš„å¤„ç†ä¸çŸ©å½¢åˆ†æä¸€æ–‡ä¸­ä»‹ç»çš„ä¸€è‡´ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ã€‚å”¯ä¸€ä¸åŒçš„æ˜¯ï¼Œå…¶åˆ†æçš„ç»“æœä¸­æ–°å¢äº†characterBoxeså±æ€§ï¼Œç”¨æ¥è·å–æ¯ä¸ªå­—ç¬¦çš„æ‰€åœ¨åŒºåŸŸã€‚ æ–‡æœ¬åŒºåŸŸè¯†åˆ«æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 2 - æ¡å½¢ç äºŒç»´ç è¯†åˆ«æ¡å½¢ç å’ŒäºŒç»´ç åœ¨ç”Ÿæ´»ä¸­éå¸¸å¸¸è§ï¼ŒVisionæ¡†æ¶ä¸­æä¾›çš„APIä¸ä»…æ”¯æŒæ¡ç åŒºåŸŸçš„æ£€æµ‹ï¼Œè¿˜å¯ä»¥ç›´æ¥å°†æ¡ç çš„å†…å®¹è¯†åˆ«å‡ºæ¥ã€‚ æ¡ç åˆ†æè¯·æ±‚ä½¿ç”¨VNDetectBarcodesRequestç±»åˆ›å»ºï¼Œå¦‚ä¸‹ï¼š 12345678open class VNDetectBarcodesRequest : VNImageBasedRequest &#123; // ç±»å±æ€§ï¼Œè·å–æ‰€æ”¯æŒçš„æ¡ç ç±»å‹ open class var supportedSymbologies: [VNBarcodeSymbology] &#123; get &#125; // è®¾ç½®åˆ†ææ—¶è¦æ”¯æŒçš„æ¡ç ç±»å‹ open var symbologies: [VNBarcodeSymbology] // ç»“æœåˆ—è¡¨ open var results: [VNBarcodeObservation]? &#123; get &#125;&#125; å¦‚æœæˆ‘ä»¬ä¸å¯¹symbologieså±æ€§è¿›è¡Œè®¾ç½®ï¼Œåˆ™é»˜è®¤ä¼šå°è¯•è¯†åˆ«æ‰€æœ‰æ”¯æŒçš„ç±»å‹ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345678910private lazy var barCodeDetectionRequest: VNDetectBarcodesRequest = &#123; let barCodeDetectRequest = VNDetectBarcodesRequest &#123;[weak self] request, error in guard let self else &#123;return&#125; DispatchQueue.main.async &#123; self.drawTask(request: request as! VNDetectBarcodesRequest) &#125; &#125; barCodeDetectRequest.revision = VNDetectBarcodesRequestRevision1 return barCodeDetectRequest&#125;() éœ€è¦æ³¨æ„ï¼Œå®æµ‹éœ€è¦å°†åˆ†ææ‰€ä½¿ç”¨çš„ç®—æ³•ç‰ˆæœ¬revisionè®¾ç½®ä¸ºVNDetectBarcodesRequestRevision1ã€‚é»˜è®¤ä½¿ç”¨çš„ç‰ˆæœ¬å¯èƒ½æ— æ³•åˆ†æå‡ºç»“æœã€‚ æ¡ç åˆ†æçš„ç»“æœç±»VNBarcodeObservationä¸­ä¼šå°è£…æ¡ç çš„ç›¸å…³æ•°æ®ï¼Œå¦‚ä¸‹ï¼š 12345678open class VNBarcodeObservation : VNRectangleObservation &#123; // å½“å‰æ¡ç çš„ç±»å‹ open var symbology: VNBarcodeSymbology &#123; get &#125; // æ¡ç çš„æè¿°å¯¹è±¡ï¼Œä¸åŒç±»å‹çš„æ¡ç ä¼šæœ‰ä¸åŒçš„å­ç±»å®ç° open var barcodeDescriptor: CIBarcodeDescriptor? &#123; get &#125; // æ¡ç å†…å®¹ open var payloadStringValue: String? &#123; get &#125;&#125; VNBarcodeObservationç±»ä¹Ÿæ˜¯ç»§æ‰¿è‡ªVNRectangleObservationç±»çš„ï¼Œå› æ­¤å…¶ä¹Ÿå¯ä»¥åˆ†æå‡ºæ¡ç æ‰€åœ¨çš„åŒºåŸŸï¼Œéœ€è¦æ³¨æ„ï¼Œå¯¹äºæ¡å½¢ç æ¥è¯´å…¶åªèƒ½åˆ†æå‡ºæ¡ç çš„ä½ç½®ï¼Œå¯¹äºäºŒç»´ç æ¥è¯´ï¼Œå…¶å¯ä»¥å‡†ç¡®çš„è¯†åˆ«å‡ºäºŒç»´ç çš„åŒºåŸŸï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š æ³¨ï¼šäº’è”ç½‘ä¸Šæœ‰å¾ˆå¤šå¯ä»¥ç”Ÿæˆæ¡ç çš„å·¥å…·ï¼Œä¾‹å¦‚ï¼š https://www.idcd.com/tool/barcode/encode 3 - è½®å»“æ£€æµ‹ç›¸æ¯”å‰é¢ä¸¤ç§å›¾åƒåˆ†æèƒ½åŠ›ï¼Œè½®å»“æ£€æµ‹çš„èƒ½åŠ›è¦æ›´åŠ å¤æ‚ä¹Ÿæ›´åŠ å¼ºå¤§ä¸€äº›ã€‚å…¶å¯ä»¥é€šè¿‡å›¾ç‰‡çš„å¯¹æ¯”åº¦å·®å¼‚æ¥å¯¹å†…å®¹è½®å»“è¿›è¡Œåˆ†æã€‚è½®å»“åˆ†æä½¿ç”¨VNDetectContoursRequestç±»æ¥åˆ›å»ºè¯·æ±‚ã€‚æ­¤ç±»ä¸»è¦åŠŸèƒ½åˆ—ä¸¾å¦‚ä¸‹ï¼š 123456789101112open class VNDetectContoursRequest : VNImageBasedRequest &#123; // è½®å»“æ£€æµ‹æ—¶çš„å¯¹æ¯”åº¦è®¾ç½®ï¼Œå–å€¼0-3ä¹‹é—´ï¼Œæ­¤å€¼è¶Šå¤§ï¼Œæ£€æµ‹ç»“æœè¶Šç²¾ç¡®ï¼ˆå¯¹äºé«˜å¯¹æ¯”åº¦å›¾ç‰‡ï¼‰ open var contrastAdjustment: Float // ä½œä¸ºå¯¹æ¯”åº¦åˆ†ç•Œçš„åƒç´ ï¼Œå–å€¼0-1ä¹‹é—´ï¼Œé»˜è®¤0.5ï¼Œä¼šå–å±…ä¸­å€¼ open var contrastPivot: NSNumber? // è®¾ç½®æ£€æµ‹æ—¶æ˜¯å¦æ˜¯æ£€æµ‹æš—è‰²å¯¹è±¡ï¼Œé»˜è®¤ä¸ºtrueï¼Œå³è®¤ä¸ºèƒŒæ™¯è‰²æµ…ã€‚è®¾ç½®ä¸ºfalseåˆ™ä¼šåœ¨æš—è‰²å›¾ä¸­æ£€æµ‹æ˜äº®çš„å¯¹è±¡è½®å»“ open var detectsDarkOnLight: Bool // è®¾ç½®æ£€æµ‹å›¾ç‰‡æ—¶çš„ç¼©æ”¾ï¼Œè½®å»“æ£€æµ‹ä¼šå°†å›¾ç‰‡è¿›è¡Œå‹ç¼©ï¼Œæ­¤å€¼å–å€¼èŒƒå›´ä¸º[64..NSUIntegerMax]ï¼Œå–æœ€å¤§å€¼æ—¶è¡¨ç¤ºä½¿ç”¨åŸå›¾ open var maximumImageDimension: Int // ç»“æœæ•°ç»„ open var results: [VNContoursObservation]? &#123; get &#125;&#125; å…¶æ£€æµ‹ç»“æœVNContoursObservationç±»ä¸­å°è£…äº†è½®å»“çš„è·¯å¾„ä¿¡æ¯ï¼Œåœ¨è¿›è¡Œè½®å»“æ£€æµ‹æ—¶ï¼Œæœ€å¤–å±‚çš„è½®å»“å¯èƒ½æœ‰å¾ˆå¤šå†…å±‚è½®å»“ç»„æˆï¼Œè¿™äº›ä¿¡æ¯ä¹Ÿå°è£…åœ¨æ­¤ç±»ä¸­ã€‚å¦‚ä¸‹ï¼š 1234567891011121314open class VNContoursObservation : VNObservation &#123; // å†…éƒ¨è½®å»“ä¸ªæ•° open var contourCount: Int &#123; get &#125; // è·å–æŒ‡å®šçš„è½®å»“å¯¹è±¡ open func contour(at contourIndex: Int) throws -&gt; VNContour // é¡¶çº§è½®å»“ä¸ªæ•° open var topLevelContourCount: Int &#123; get &#125; // é¡¶çº§è½®å»“æ•°ç»„ open var topLevelContours: [VNContour] &#123; get &#125; // æ ¹æ®indexPathè·å–è½®å»“å¯¹è±¡ open func contour(at indexPath: IndexPath) throws -&gt; VNContour // è·¯å¾„ï¼Œä¼šåŒ…å«å†…éƒ¨æ‰€æœ‰è½®å»“ open var normalizedPath: CGPath &#123; get &#125;&#125; éœ€è¦æ³¨æ„ï¼Œå…¶è¿”å›çš„CGPathè·¯å¾„ä¾ç„¶æ˜¯ä»¥å•ä½çŸ©å½¢ä¸ºå‚ç…§çš„ï¼Œæˆ‘ä»¬è¦å°†å…¶ç»˜åˆ¶å‡ºæ¥ï¼Œéœ€è¦å¯¹å…¶è¿›è¡Œè½¬æ¢ï¼Œè½¬æ¢å…¶å®éå¸¸ç®€å•ï¼Œç°å¯¹å…¶è¿›è¡Œæ–¹æ³•ï¼Œå¹¶è¿›è¡Œxè½´æ–¹å‘çš„é•œåƒåè½¬ï¼Œä¹‹åå‘ä¸‹è¿›è¡Œå¹³ç§»ä¸€ä¸ªæ ‡å‡†å•ä½å³å¯ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516171819private func drawTask(request: VNDetectContoursRequest) &#123; boxViews.forEach &#123; v in v.removeFromSuperview() &#125; for result in request.results ?? [] &#123; let oriPath = result.normalizedPath var transform = CGAffineTransform.identity.scaledBy(x: imageView.frame.width, y: -imageView.frame.height).translatedBy(x: 0, y: -1) let layer = CAShapeLayer() let path = oriPath.copy(using: &amp;transform) layer.bounds = self.imageView.bounds layer.anchorPoint = CGPoint(x: 0, y: 0) imageView.layer.addSublayer(layer) layer.path = path layer.strokeColor = UIColor.blue.cgColor layer.backgroundColor = UIColor.white.cgColor layer.fillColor = UIColor.gray.cgColor layer.lineWidth = 1 &#125;&#125; åŸå›¾ä¸ç»˜åˆ¶çš„è½®å»“å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š åŸå›¾ï¼š è½®å»“ï¼š å¯ä»¥é€šè¿‡VNContoursObservationå¯¹è±¡æ¥è·å–å…¶å†…çš„æ‰€æœ‰è½®å»“å¯¹è±¡ï¼ŒVNContourå®šä¹‰å¦‚ä¸‹ï¼š 123456789101112131415161718open class VNContour : NSObject, NSCopying, VNRequestRevisionProviding &#123; // indexPath open var indexPath: IndexPath &#123; get &#125; // å­è½®å»“ä¸ªæ•° open var childContourCount: Int &#123; get &#125; // å­è½®å»“å¯¹è±¡æ•°ç»„ open var childContours: [VNContour] &#123; get &#125; // é€šè¿‡indexè·å–å­è½®å»“ open func childContour(at childContourIndex: Int) throws -&gt; VNContour // æè¿°è½®å»“çš„ç‚¹æ•° open var pointCount: Int &#123; get &#125; // è½®å»“è·¯å¾„ open var normalizedPath: CGPath &#123; get &#125; // è½®å»“çš„çºµæ¨ªæ¯” open var aspectRatio: Float &#123; get &#125; // ç®€åŒ–çš„å¤šè¾¹å½¢è½®å»“ï¼Œå‚æ•°è®¾ç½®ç®€åŒ–çš„é˜ˆå€¼ open func polygonApproximation(epsilon: Float) throws -&gt; VNContour&#125; ç†è®ºä¸Šè¯´ï¼Œæˆ‘ä»¬å¯¹æ‰€æœ‰çš„å­è½®å»“è¿›è¡Œç»˜åˆ¶ï¼Œä¹Ÿèƒ½å¾—åˆ°ä¸€æ ·çš„è·¯å¾„å›¾åƒï¼Œä¾‹å¦‚ï¼š 123456789101112131415161718192021private func drawTask(request: VNDetectContoursRequest) &#123; boxViews.forEach &#123; v in v.removeFromSuperview() &#125; for result in request.results ?? [] &#123; for i in 0 ..&lt; result.contourCount &#123; let contour = try! result.contour(at: i) var transform = CGAffineTransform.identity.scaledBy(x: imageView.frame.width, y: -imageView.frame.height).translatedBy(x: 0, y: -1) let layer = CAShapeLayer() let path = contour.normalizedPath.copy(using: &amp;transform) layer.bounds = self.imageView.bounds layer.anchorPoint = CGPoint(x: 0, y: 0) imageView.layer.addSublayer(layer) layer.path = path layer.strokeColor = UIColor.blue.cgColor layer.backgroundColor = UIColor.clear.cgColor layer.fillColor = UIColor.clear.cgColor layer.lineWidth = 1 &#125; &#125;&#125; æ•ˆæœå¦‚ä¸‹å›¾ï¼š 4 - æ–‡æ¡£åŒºåŸŸè¯†åˆ«æ–‡æ¡£è¯†åˆ«å¯ä»¥åˆ†æå‡ºå›¾ç‰‡ä¸­çš„æ–‡æœ¬æ®µè½ï¼Œä½¿ç”¨VNDetectDocumentSegmentationRequestæ¥åˆ›å»ºåˆ†æè¯·æ±‚ï¼ŒVNDetectDocumentSegmentationRequestæ²¡æœ‰é¢å¤–ç‰¹æ®Šçš„å±æ€§ï¼Œå…¶åˆ†æç»“æœä¸ºä¸€ç»„VNRectangleObservationå¯¹è±¡ï¼Œå¯ä»¥è·å–åˆ°æ–‡æ¡£æ‰€åœ¨çš„çŸ©å½¢åŒºåŸŸã€‚è¿™é‡Œä¸å†è¿‡å¤šè§£è¯´ã€‚ 5 - äººè„¸åŒºåŸŸè¯†åˆ«äººè„¸è¯†åˆ«åœ¨ç”Ÿæ´»ä¸­ä¹Ÿæœ‰ç€å¾ˆå¹¿æ³›çš„åº”ç”¨ï¼Œåœ¨è¿›è¡Œäººè„¸å¯¹æ¯”è¯†åˆ«ç­‰é«˜çº§å¤„ç†å‰ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦å°†äººè„¸çš„åŒºåŸŸå…ˆæå–å‡ºæ¥ï¼ŒVisionæ¡†æ¶ä¸­ä¹Ÿæä¾›äº†äººè„¸åŒºåŸŸè¯†åˆ«çš„æ¥å£ï¼Œä½¿ç”¨VNDetectFaceRectanglesRequestç±»æ¥åˆ›å»ºè¯·æ±‚å³å¯ã€‚VNDetectFaceRectanglesRequestç±»æœ¬èº«æ¯”è¾ƒåŠ å•ï¼Œç»§æ‰¿è‡ªVNImageBasedRequestç±»ï¼Œæ— éœ€è¿›è¡Œé¢å¤–çš„é…ç½®å³å¯ä½¿ç”¨ï¼Œå…¶åˆ†æçš„ç»“æœä¸ºä¸€ç»„VNFaceObservationå¯¹è±¡ï¼Œåˆ†ææ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š VNFaceObservationç±»æœ¬èº«æ˜¯ç»§æ‰¿è‡ªVNDetectedObjectObservationç±»çš„ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç›´æ¥è·å–åˆ°äººè„¸çš„åŒºåŸŸã€‚VNFaceObservationä¸­è¿˜æœ‰è®¸å¤šå…¶ä»–æœ‰ç”¨çš„ä¿¡æ¯ï¼š 12345678910open class VNFaceObservation : VNDetectedObjectObservation &#123; // é¢éƒ¨ç‰¹å¾å¯¹è±¡ open var landmarks: VNFaceLandmarks2D? &#123; get &#125; // äººè„¸åœ¨zè½´çš„æ—‹è½¬åº¦æ•°ï¼Œå–å€¼ä¸º-PIåˆ°PIä¹‹é—´ open var roll: NSNumber? &#123; get &#125; // äººè„¸åœ¨yè½´çš„æ—‹è½¬åº¦æ•°ï¼Œå–å€¼ä¸º-PI/2åˆ°PI/2ä¹‹é—´ open var yaw: NSNumber? &#123; get &#125; // äººè„¸åœ¨xè½´çš„æ—‹è½¬åº¦æ•°ï¼Œå–å€¼ä¸º-PI/2åˆ°PI/2ä¹‹é—´ open var pitch: NSNumber? &#123; get &#125;&#125; é€šè¿‡rollï¼Œyawå’Œpitchè¿™3ä¸ªå±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥è·å–åˆ°äººè„¸åœ¨ç©ºé—´ä¸­çš„è§’åº¦ç›¸å…³ä¿¡æ¯ã€‚landmarkså±æ€§åˆ™æ¯”è¾ƒå¤æ‚ï¼Œå…¶å°è£…äº†äººè„¸çš„ç‰¹å¾ç‚¹ã€‚å¹¶ä¸”VNDetectFaceRectanglesRequestè¯·æ±‚æ˜¯ä¸ä¼šåˆ†æé¢éƒ¨ç‰¹å¾çš„ï¼Œæ­¤å±æ€§ä¼šä¸ºnilï¼Œå…³äºé¢éƒ¨ç‰¹å¾ï¼Œæˆ‘ä»¬åç»­ä»‹ç»ã€‚ äººè„¸ç‰¹å¾åˆ†æè¯·æ±‚ä½¿ç”¨VNDetectFaceLandmarksRequeståˆ›å»ºï¼Œå…¶è¿”å›çš„ç»“æœä¸­ä¼šæœ‰landmarksæ•°æ®ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142private func drawTask(request: VNDetectFaceLandmarksRequest) &#123; boxViews.forEach &#123; v in v.removeFromSuperview() &#125; for result in request.results ?? [] &#123; var box = result.boundingBox // åæ ‡ç³»è½¬æ¢ box.origin.y = 1 - box.origin.y - box.size.height let v = UIView() v.backgroundColor = .clear v.layer.borderColor = UIColor.red.cgColor v.layer.borderWidth = 2 imageView.addSubview(v) let size = imageView.frame.size v.frame = CGRect(x: box.origin.x * size.width, y: box.origin.y * size.height, width: box.size.width * size.width, height: box.size.height * size.height) // è¿›è¡Œç‰¹å¾ç»˜åˆ¶ let landmarks = result.landmarks // æ‹¿åˆ°æ‰€æœ‰ç‰¹å¾ç‚¹ let allPoints = landmarks?.allPoints?.normalizedPoints let faceRect = result.boundingBox // è¿›è¡Œç»˜åˆ¶ for point in allPoints ?? [] &#123; //faceRectçš„å®½é«˜æ˜¯ä¸ªæ¯”ä¾‹ï¼Œæˆ‘ä»¬å¯¹åº”è½¬æ¢æˆViewä¸Šçš„äººè„¸åŒºåŸŸå®½é«˜ let rectWidth = imageView.frame.width * faceRect.width let rectHeight = imageView.frame.height * faceRect.height // è¿›è¡Œåæ ‡è½¬æ¢ // ç‰¹å¾ç‚¹çš„xåæ ‡ä¸ºäººè„¸åŒºåŸŸçš„æ¯”ä¾‹ï¼Œ // 1. point.x * rectWidth å¾—åˆ°åœ¨äººè„¸åŒºåŸŸå†…çš„xä½ç½® // 2. + faceRect.minX * imageView.frame.width å¾—åˆ°åœ¨Viewä¸Šçš„xåæ ‡ // 3. point.y * rectHeight + faceRect.minY * imageView.frame.heightè·å¾—Yåæ ‡ // 4. imageView.frame.height - çš„ä½œç”¨æ˜¯yåæ ‡è¿›è¡Œç¿»è½¬ let tempPoint = CGPoint(x: point.x * rectWidth + faceRect.minX * imageView.frame.width, y: imageView.frame.height - (point.y * rectHeight + faceRect.minY * imageView.frame.height)) let subV = UIView() subV.backgroundColor = .red subV.frame = CGRect(x: tempPoint.x - 2, y: tempPoint.y - 2, width: 4, height: 4) imageView.addSubview(subV) &#125; &#125;&#125; VNFaceLandmarks2Dä¸­å°è£…äº†å¾ˆå¤šç‰¹å¾ä¿¡æ¯ï¼Œä¸Šé¢çš„ç¤ºä¾‹ä»£ç ä¼šå°†æ‰€æœ‰çš„ç‰¹å¾ç‚¹è¿›è¡Œç»˜åˆ¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ ¹æ®éœ€è¦å–éƒ¨åˆ†ç‰¹å¾ç‚¹ï¼š 12345678910111213141516171819202122232425262728open class VNFaceLandmarks2D : VNFaceLandmarks &#123; // æ‰€æœ‰ç‰¹å¾ç‚¹ open var allPoints: VNFaceLandmarkRegion2D? &#123; get &#125; // åªåŒ…å«é¢éƒ¨è½®å»“çš„ç‰¹å¾ç‚¹ open var faceContour: VNFaceLandmarkRegion2D? &#123; get &#125; // å·¦çœ¼ä½ç½®çš„ç‰¹å¾ç‚¹ open var leftEye: VNFaceLandmarkRegion2D? &#123; get &#125; // å³çœ¼ä½ç½®çš„ç‰¹å¾ç‚¹ open var rightEye: VNFaceLandmarkRegion2D? &#123; get &#125; // å·¦çœ‰ç‰¹å¾ç‚¹ open var leftEyebrow: VNFaceLandmarkRegion2D? &#123; get &#125; // å³çœ‰ç‰¹å¾ç‚¹ open var rightEyebrow: VNFaceLandmarkRegion2D? &#123; get &#125; // é¼»å­ç‰¹å¾ç‚¹ open var nose: VNFaceLandmarkRegion2D? &#123; get &#125; // é¼»å°–ç‰¹å¾ç‚¹ open var noseCrest: VNFaceLandmarkRegion2D? &#123; get &#125; // ä¸­é—´ç‰¹å¾ç‚¹ open var medianLine: VNFaceLandmarkRegion2D? &#123; get &#125; // å¤–å”‡ç‰¹å¾ç‚¹ open var outerLips: VNFaceLandmarkRegion2D? &#123; get &#125; // å†…å”‡ç‰¹å¾ç‚¹ open var innerLips: VNFaceLandmarkRegion2D? &#123; get &#125; // å·¦ç³å­”ç‰¹å¾ç‚¹ open var leftPupil: VNFaceLandmarkRegion2D? &#123; get &#125; // å³ç³å­”ç‰¹å¾ç‚¹ open var rightPupil: VNFaceLandmarkRegion2D? &#123; get &#125;&#125; VNFaceLandmarkRegion2Dç±»ä¸­å…·ä½“å°è£…äº†ç‰¹å¾ç‚¹ä½ç½®ä¿¡æ¯ï¼Œéœ€è¦æ³¨æ„ï¼Œç‰¹å¾ç‚¹çš„åæ ‡æ˜¯ç›¸å¯¹äººè„¸åŒºåŸŸçš„æ¯”ä¾‹å€¼ï¼Œè¦è¿›è¡Œè½¬æ¢ã€‚ ä¸»è¦æç¤ºï¼šç‰¹å¾æ£€æµ‹åœ¨æ¨¡æ‹Ÿå™¨ä¸Šå¯èƒ½ä¸èƒ½æ­£å¸¸å·¥ä½œï¼Œå¯ä»¥ä½¿ç”¨çœŸæœºæµ‹è¯•ã€‚ é»˜è®¤äººè„¸ç‰¹å¾åˆ†æä¼šè¿”å›76ä¸ªç‰¹å¾ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®VNDetectFaceLandmarksRequestè¯·æ±‚å®ä¾‹çš„constellationå±æ€§æ¥ä¿®æ”¹ä½¿ç”¨çš„æ£€æµ‹ç®—æ³•ï¼Œæšä¸¾å¦‚ä¸‹ï¼š 1234567public enum VNRequestFaceLandmarksConstellation : UInt, @unchecked Sendable &#123; case constellationNotDefined = 0 // ä½¿ç”¨65ä¸ªç‰¹å¾ç‚¹çš„ç®—æ³• case constellation65Points = 1 // ä½¿ç”¨73ä¸ªç‰¹å¾ç‚¹çš„ç®—æ³• case constellation76Points = 2&#125; æ•ˆæœå¦‚ä¸‹å›¾ï¼š Visionæ¡†æ¶çš„é™æ€åŒºåŸŸåˆ†æä¸­ä¸äººè„¸åˆ†æç›¸å…³çš„è¿˜æœ‰ä¸€ç§ï¼Œä½¿ç”¨VNDetectFaceCaptureQualityRequestè¯·æ±‚å¯ä»¥åˆ†æå½“å‰æ•è·åˆ°çš„äººè„¸çš„è´¨é‡ï¼Œä½¿ç”¨æ­¤è¯·æ±‚åˆ†æçš„ç»“æœä¸­ä¼šåŒ…å«å¦‚ä¸‹å±æ€§ï¼š 1234extension VNFaceObservation &#123; // äººè„¸æ•è·çš„è´¨é‡ @nonobjc public var faceCaptureQuality: Float? &#123; get &#125;&#125; faceCaptureQualitå€¼è¶Šæ¥è¿‘1ï¼Œæ•è·çš„äººè„¸æ•ˆæœè¶Šå¥½ã€‚ 6 - æ°´å¹³çº¿è¯†åˆ«VNDetectHorizonRequesç”¨æ¥åˆ›å»ºæ°´å¹³çº¿åˆ†æè¯·æ±‚ï¼Œå…¶å¯ä»¥åˆ†æå‡ºå›¾ç‰‡ä¸­çš„æ°´å¹³çº¿ä½ç½®ã€‚æ­¤è¯·æ±‚æœ¬èº«æ¯”è¾ƒç®€å•ï¼Œå…¶è¿”å›çš„ç»“æœå¯¹è±¡ä¸ºVNHorizonObservationï¼Œå¦‚ä¸‹ï¼š 1234open class VNHorizonObservation : VNObservation &#123; // è§’åº¦ open var angle: CGFloat &#123; get &#125;&#125; åˆ†æç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 7 - äººä½“ç›¸å…³è¯†åˆ«äººä½“å§¿åŠ¿è¯†åˆ«ä¹Ÿæ˜¯Visionæ¡†æ¶éå¸¸å¼ºå¤§çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œå…¶å¯ä»¥å°†é™æ€å›¾åƒä¸­äººä½“çš„å…³é”®èŠ‚ç‚¹åˆ†æå‡ºæ¥ï¼Œé€šè¿‡è¿™äº›å…³é”®èŠ‚ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹äººä½“å½“å‰çš„å§¿åŠ¿è¿›è¡Œæ¨æ–­ã€‚åœ¨è¿åŠ¨çŸ«æ­£ï¼Œå¥åº·æ£€æŸ¥ç­‰åº”ç”¨ä¸­åº”ç”¨å¹¿æ³›ã€‚äººä½“å§¿åŠ¿è¯†åˆ«è¯·æ±‚ä½¿ç”¨VNDetectHumanBodyPoseRequestç±»åˆ›å»ºï¼Œå¦‚ä¸‹ï¼š 12345678open class VNDetectHumanBodyPoseRequest : VNImageBasedRequest &#123; // è·å–æ‰€æ”¯æŒæ£€æŸ¥çš„å…³é”®èŠ‚ç‚¹ open class func supportedJointNames(forRevision revision: Int) throws -&gt; [VNHumanBodyPoseObservation.JointName] // è·å–æ‰€æ”¯æŒæ£€æŸ¥çš„å…³é”®èŠ‚ç»„ open class func supportedJointsGroupNames(forRevision revision: Int) throws -&gt; [VNHumanBodyPoseObservation.JointsGroupName] // åˆ†æç»“æœ open var results: [VNHumanBodyPoseObservation]? &#123; get &#125;&#125; VNHumanBodyPoseObservatioåˆ†æç»“æœç±»ä¸­å°è£…çš„æœ‰å„ä¸ªå…³é”®èŠ‚ç‚¹çš„åæ ‡ä¿¡æ¯ï¼Œå¦‚ä¸‹ï¼š 12345678910open class VNHumanBodyPoseObservation : VNRecognizedPointsObservation &#123; // å¯ç”¨çš„èŠ‚ç‚¹å open var availableJointNames: [VNHumanBodyPoseObservation.JointName] &#123; get &#125; // å¯ç”¨çš„èŠ‚ç‚¹ç»„å open var availableJointsGroupNames: [VNHumanBodyPoseObservation.JointsGroupName] &#123; get &#125; // è·å–æŸä¸ªèŠ‚ç‚¹åæ ‡ open func recognizedPoint(_ jointName: VNHumanBodyPoseObservation.JointName) throws -&gt; VNRecognizedPoint // è·å–æŸä¸ªèŠ‚ç‚¹ç»„ open func recognizedPoints(_ jointsGroupName: VNHumanBodyPoseObservation.JointsGroupName) throws -&gt; [VNHumanBodyPoseObservation.JointName : VNRecognizedPoint]&#125; ä¸‹é¢ç¤ºä¾‹ä»£ç æ¼”ç¤ºäº†å¦‚ä½•å¯¹èº«ä½“å§¿åŠ¿èŠ‚ç‚¹è¿›è¡Œè§£æï¼š 1234567891011121314private func drawTask(request: VNDetectHumanBodyPoseRequest) &#123; boxViews.forEach &#123; v in v.removeFromSuperview() &#125; for result in request.results ?? [] &#123; for point in result.availableJointNames &#123; if let p = try? result.recognizedPoint(point) &#123; let v = UIView(frame: CGRect(x: p.x * imageView.bounds.width - 2, y: (1 - p.y) * imageView.bounds.height - 2.0, width: 4, height: 4)) imageView.addSubview(v) v.backgroundColor = .red &#125; &#125; &#125;&#125; æ•ˆæœå¦‚ä¸‹å›¾ï¼š æ‰€æœ‰æ”¯æŒçš„èº«ä½“èŠ‚ç‚¹åå’ŒèŠ‚ç‚¹ç»„ååˆ—ä¸¾å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758// èº«ä½“èŠ‚ç‚¹extension VNHumanBodyPoseObservation.JointName &#123; // é¼»å­èŠ‚ç‚¹ public static let nose: VNHumanBodyPoseObservation.JointName // å·¦çœ¼èŠ‚ç‚¹ public static let leftEye: VNHumanBodyPoseObservation.JointName // å³çœ¼èŠ‚ç‚¹ public static let rightEye: VNHumanBodyPoseObservation.JointName // å·¦è€³èŠ‚ç‚¹ public static let leftEar: VNHumanBodyPoseObservation.JointName // å³è€³èŠ‚ç‚¹ public static let rightEar: VNHumanBodyPoseObservation.JointName // å·¦è‚©èŠ‚ç‚¹ public static let leftShoulder: VNHumanBodyPoseObservation.JointName // å³è‚©èŠ‚ç‚¹ public static let rightShoulder: VNHumanBodyPoseObservation.JointName // è„–å­èŠ‚ç‚¹ public static let neck: VNHumanBodyPoseObservation.JointName // å·¦è‚˜èŠ‚ç‚¹ public static let leftElbow: VNHumanBodyPoseObservation.JointName // å³è‚˜èŠ‚ç‚¹ public static let rightElbow: VNHumanBodyPoseObservation.JointName // å·¦è…•èŠ‚ç‚¹ public static let leftWrist: VNHumanBodyPoseObservation.JointName // å³è…•èŠ‚ç‚¹ public static let rightWrist: VNHumanBodyPoseObservation.JointName // å·¦é«‹èŠ‚ç‚¹ public static let leftHip: VNHumanBodyPoseObservation.JointName // å³é«‹èŠ‚ç‚¹ public static let rightHip: VNHumanBodyPoseObservation.JointName // èº«ä½“èŠ‚ç‚¹ public static let root: VNHumanBodyPoseObservation.JointName // å·¦è†èŠ‚ç‚¹ public static let leftKnee: VNHumanBodyPoseObservation.JointName // å³è†èŠ‚ç‚¹ public static let rightKnee: VNHumanBodyPoseObservation.JointName // å·¦è¸èŠ‚ç‚¹ public static let leftAnkle: VNHumanBodyPoseObservation.JointName // å³è¸èŠ‚ç‚¹ public static let rightAnkle: VNHumanBodyPoseObservation.JointName&#125;// èŠ‚ç‚¹ç»„extension VNHumanBodyPoseObservation.JointsGroupName &#123; // é¢éƒ¨èŠ‚ç‚¹ç»„ public static let face: VNHumanBodyPoseObservation.JointsGroupName // èº¯å¹²èŠ‚ç‚¹ç»„ public static let torso: VNHumanBodyPoseObservation.JointsGroupName // å·¦è‡‚èŠ‚ç‚¹ç»„ public static let leftArm: VNHumanBodyPoseObservation.JointsGroupName // å³è‡‚èŠ‚ç‚¹ç»„ public static let rightArm: VNHumanBodyPoseObservation.JointsGroupName // å·¦è…¿èŠ‚ç‚¹ç»„ public static let leftLeg: VNHumanBodyPoseObservation.JointsGroupName // å³è…¿èŠ‚ç‚¹ç»„ public static let rightLeg: VNHumanBodyPoseObservation.JointsGroupName // æ‰€æœ‰èŠ‚ç‚¹ public static let all: VNHumanBodyPoseObservation.JointsGroupName&#125; ä¸äººä½“å§¿åŠ¿è¯†åˆ«ç±»ä¼¼ï¼ŒVNDetectHumanHandPoseRequestç”¨æ¥å¯¹æ‰‹åŠ¿è¿›è¡Œè¯†åˆ«ï¼ŒVNDetectHumanHandPoseRequestå®šä¹‰å¦‚ä¸‹ï¼š 12345678910open class VNDetectHumanHandPoseRequest : VNImageBasedRequest &#123; // æ”¯æŒçš„æ‰‹åŠ¿èŠ‚ç‚¹ open class func supportedJointNames(forRevision revision: Int) throws -&gt; [VNHumanHandPoseObservation.JointName] // æ”¯æŒçš„æ‰‹åŠ¿èŠ‚ç‚¹ç»„ open class func supportedJointsGroupNames(forRevision revision: Int) throws -&gt; [VNHumanHandPoseObservation.JointsGroupName] // è®¾ç½®æœ€å¤§æ”¯æŒçš„æ£€æµ‹äººæ‰‹æ•°é‡ï¼Œé»˜è®¤2ï¼Œæœ€å¤§6 open var maximumHandCount: Int // è¯†åˆ«ç»“æœ open var results: [VNHumanHandPoseObservation]? &#123; get &#125;&#125; VNHumanHandPoseObservationç±»çš„å®šä¹‰å¦‚ä¸‹ï¼š 1234567891011open class VNHumanHandPoseObservation : VNRecognizedPointsObservation &#123; // å¯ç”¨çš„èŠ‚ç‚¹å open var availableJointNames: [VNHumanHandPoseObservation.JointName] &#123; get &#125; // å¯ç”¨çš„èŠ‚ç‚¹ç»„å open var availableJointsGroupNames: [VNHumanHandPoseObservation.JointsGroupName] &#123; get &#125; // è·å–åæ ‡ç‚¹ open func recognizedPoint(_ jointName: VNHumanHandPoseObservation.JointName) throws -&gt; VNRecognizedPoint open func recognizedPoints(_ jointsGroupName: VNHumanHandPoseObservation.JointsGroupName) throws -&gt; [VNHumanHandPoseObservation.JointName : VNRecognizedPoint] // è·å–æ‰‹æ€§ open var chirality: VNChirality &#123; get &#125;&#125; chiralitå±æ€§ç”¨æ¥è¯†åˆ«å·¦å³æ‰‹ï¼Œæšä¸¾å¦‚ä¸‹ï¼š 12345678@frozen public enum VNChirality : Int, @unchecked Sendable &#123; // æœªçŸ¥ case unknown = 0 // å·¦æ‰‹ case left = -1 // å³æ‰‹ case right = 1&#125; åœ¨æ‰‹åŠ¿è¯†åˆ«ä¸­ï¼Œå¯ç”¨çš„èŠ‚ç‚¹ååˆ—ä¸¾å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748extension VNHumanHandPoseObservation.JointName &#123; // æ‰‹è…•èŠ‚ç‚¹ public static let wrist: VNHumanHandPoseObservation.JointName // æ‹‡æŒ‡å…³èŠ‚èŠ‚ç‚¹ public static let thumbCMC: VNHumanHandPoseObservation.JointName public static let thumbMP: VNHumanHandPoseObservation.JointName public static let thumbIP: VNHumanHandPoseObservation.JointName public static let thumbTip: VNHumanHandPoseObservation.JointName // é£ŸæŒ‡å…³èŠ‚èŠ‚ç‚¹ public static let indexMCP: VNHumanHandPoseObservation.JointName public static let indexPIP: VNHumanHandPoseObservation.JointName public static let indexDIP: VNHumanHandPoseObservation.JointName public static let indexTip: VNHumanHandPoseObservation.JointName // ä¸­æŒ‡å…³èŠ‚èŠ‚ç‚¹ public static let middleMCP: VNHumanHandPoseObservation.JointName public static let middlePIP: VNHumanHandPoseObservation.JointName public static let middleDIP: VNHumanHandPoseObservation.JointName public static let middleTip: VNHumanHandPoseObservation.JointName // æ— åæŒ‡å…³èŠ‚èŠ‚ç‚¹ public static let ringMCP: VNHumanHandPoseObservation.JointName public static let ringPIP: VNHumanHandPoseObservation.JointName public static let ringDIP: VNHumanHandPoseObservation.JointName public static let ringTip: VNHumanHandPoseObservation.JointName // å°æŒ‡å…³èŠ‚èŠ‚ç‚¹ public static let littleMCP: VNHumanHandPoseObservation.JointName public static let littlePIP: VNHumanHandPoseObservation.JointName public static let littleDIP: VNHumanHandPoseObservation.JointName public static let littleTip: VNHumanHandPoseObservation.JointName&#125;extension VNHumanHandPoseObservation.JointsGroupName &#123; // æ‹‡æŒ‡ public static let thumb: VNHumanHandPoseObservation.JointsGroupName // é£ŸæŒ‡ public static let indexFinger: VNHumanHandPoseObservation.JointsGroupName // ä¸­æŒ‡ public static let middleFinger: VNHumanHandPoseObservation.JointsGroupName // æ— åæŒ‡ public static let ringFinger: VNHumanHandPoseObservation.JointsGroupName // å°æŒ‡ public static let littleFinger: VNHumanHandPoseObservation.JointsGroupName // å…¨éƒ¨ public static let all: VNHumanHandPoseObservation.JointsGroupName&#125; æ•ˆæœå¦‚ä¸‹å›¾ï¼š å¦‚æœæˆ‘ä»¬åªéœ€è¦è¯†åˆ«äººä½“çš„èº¯å¹²éƒ¨ä½ï¼Œåˆ™ä½¿ç”¨VNDetectHumanRectanglesRequestä¼šéå¸¸æ–¹ä¾¿ï¼ŒVNDetectHumanRectanglesRequestå®šä¹‰å¦‚ä¸‹ï¼š 123456open class VNDetectHumanRectanglesRequest : VNImageBasedRequest &#123; // è®¾ç½®æ˜¯å¦ä»…ä»…æ£€æµ‹ä¸ŠåŠèº«ï¼Œé»˜è®¤ä¸ºtrue open var upperBodyOnly: Bool // åˆ†æç»“æœ open var results: [VNHumanObservation]? &#123; get &#125;&#125; äººä½“èº¯å¹²è¯†åˆ«çš„ç»“æœç”¨æ³•ä¸çŸ©å½¢è¯†åˆ«ç±»ä¼¼ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š éœ€è¦æ³¨æ„ï¼šäººä½“å§¿åŠ¿è¯†åˆ«å’Œæ‰‹åŠ¿è¯†åˆ«çš„APIåœ¨æ¨¡æ‹Ÿå™¨ä¸Šå¯èƒ½æ— æ³•æ­£å¸¸çš„å·¥ä½œã€‚ æœ¬ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬ä»‹ç»äº†è®¸å¤šå…³äºé™æ€å›¾åƒåŒºåŸŸåˆ†æå’Œè¯†åˆ«çš„APIï¼Œè¿™äº›æ¥å£åŠŸèƒ½å¼ºå¤§ï¼Œä¸”è®¾è®¡çš„éå¸¸ç®€æ´ã€‚æ–‡æœ¬ä¸­æ‰€æ¶‰åŠåˆ°çš„ä»£ç ï¼Œéƒ½å¯ä»¥åœ¨å¦‚ä¸‹Demoä¸­æ‰¾åˆ°ï¼š https://github.com/ZYHshao/MachineLearnDemo ä¸“æ³¨æŠ€æœ¯ï¼Œæ‡‚çš„çƒ­çˆ±ï¼Œæ„¿æ„åˆ†äº«ï¼Œåšä¸ªæœ‹å‹","categories":[{"name":"ä»æœºå™¨å­¦ä¹ åˆ°AI","slug":"ä»æœºå™¨å­¦ä¹ åˆ°AI","permalink":"http://huishao.cc/categories/ä»æœºå™¨å­¦ä¹ åˆ°AI/"}],"tags":[],"keywords":[{"name":"ä»æœºå™¨å­¦ä¹ åˆ°AI","slug":"ä»æœºå™¨å­¦ä¹ åˆ°AI","permalink":"http://huishao.cc/categories/ä»æœºå™¨å­¦ä¹ åˆ°AI/"}]},{"title":"iOS MachineLearning ç³»åˆ—ï¼ˆ2ï¼‰â€”â€” é™æ€å›¾åƒåˆ†æä¹‹çŸ©å½¢è¯†åˆ«","slug":"457iOS MachineLearning ç³»åˆ—ï¼ˆ2ï¼‰â€”â€” é™æ€å›¾åƒåˆ†æä¹‹çŸ©å½¢è¯†åˆ«","date":"2023-04-17T16:00:00.000Z","updated":"2023-04-18T13:25:10.560Z","comments":true,"path":"2023/04/18/457iOS MachineLearning ç³»åˆ—ï¼ˆ2ï¼‰â€”â€” é™æ€å›¾åƒåˆ†æä¹‹çŸ©å½¢è¯†åˆ«/","link":"","permalink":"http://huishao.cc/2023/04/18/457iOS MachineLearning ç³»åˆ—ï¼ˆ2ï¼‰â€”â€” é™æ€å›¾åƒåˆ†æä¹‹çŸ©å½¢è¯†åˆ«/","excerpt":"","text":"iOS MachineLearning ç³»åˆ—ï¼ˆ2ï¼‰â€”â€” é™æ€å›¾åƒåˆ†æä¹‹çŸ©å½¢è¯†åˆ«æœ¬ç³»åˆ—æ–‡ç« å°†å®Œæ•´çš„ä»‹ç»iOSä¸­Machine Learningç›¸å…³æŠ€æœ¯çš„åº”ç”¨ã€‚æœ¬ç¯‡æ–‡ç« å¼€å§‹ï¼Œæˆ‘ä»¬å°†å…ˆä»‹ç»ä¸€äº›ä¸Machine Learningç›¸å…³çš„APIçš„åº”ç”¨ã€‚ä½¿ç”¨è¿™äº›APIå¯ä»¥å¿«é€Ÿæ–¹ä¾¿çš„å®ç°å¾ˆå¤šå¦‚å›¾åƒè¯†åˆ«ï¼Œåˆ†æç­‰å¤æ‚åŠŸèƒ½ï¼Œä¸”ä¸ä¼šå¢åŠ åº”ç”¨å®‰è£…åŒ…çš„ä½“ç§¯ã€‚ æœ¬ç¯‡å°†é¦–å…ˆä»‹ç»å¦‚ä½•åˆ†æå‡ºé™æ€å›¾ç‰‡ä¸­çš„çŸ©å½¢åŒºåŸŸã€‚çŸ©å½¢åŒºåŸŸçš„æ˜¯è¢«éå¸¸é‡è¦ï¼Œå…¶é€šå¸¸ç”¨æ¥å¯¹è¦åˆ†æçš„å›¾ç‰‡è¿›è¡Œé¢„å¤„ç†ï¼Œä¾‹å¦‚é€šè¿‡çŸ©å½¢åˆ†ææˆªå–å…¶ä¸­çš„äºŒç»´ç ï¼Œæ¡å½¢ç éƒ¨åˆ†åå†è¿›è¡Œç²¾å‡†çš„è¯†åˆ«ã€‚ 1 - çŸ©å½¢åˆ†æç¤ºä¾‹ä¸è§†è§‰ç›¸å…³çš„å¤§éƒ¨åˆ†AIèƒ½åŠ›éƒ½å°è£…åœ¨Visionæ¡†æ¶ä¸­ï¼Œæœ¬æ–‡è¦ä»‹ç»çš„æ˜¯é€šè¿‡å‘èµ·çŸ©å½¢åˆ†æè¯·æ±‚æ¥åˆ†æå›¾ç‰‡ï¼Œå¾—åˆ°åˆ†æç»“æœåå°†åˆ†æå‡ºæ¥çš„çŸ©å½¢åŒºåŸŸç»˜åˆ¶å›åŸå›¾åƒä¸Šã€‚ é¦–å…ˆå®šä¹‰ä¸€äº›å±æ€§ï¼š 12345678910111213141516171819202122232425262728// è¦åˆ†æçš„å›¾ç‰‡èµ„æºlet image = UIImage(named: \"image2\")!lazy var imageView = UIImageView(image: image)// ç»˜åˆ¶çš„çŸ©å½¢åŒºåŸŸvar boxViews: [UIView] = []// å›¾åƒåˆ†æè¯·æ±‚å¥æŸ„lazy var imageRequestHandler = VNImageRequestHandler(cgImage: image.cgImage!, orientation: .up, options: [:])// å›¾åƒåˆ†æè¯·æ±‚å®ä¾‹private lazy var rectangleDetectionRequest: VNDetectRectanglesRequest = &#123; let rectDetectRequest = VNDetectRectanglesRequest &#123; request, error in DispatchQueue.main.async &#123; self.drawTask(request: request as! VNDetectRectanglesRequest) &#125; &#125; // è‡ªå®šä¹‰ä¸€äº›é…ç½®é¡¹ // è®¾ç½®è¦åˆ†æçš„æœ€å¤§ç»“æœä¸ªæ•°ï¼ˆçŸ©å½¢ä¸ªæ•°ï¼‰ rectDetectRequest.maximumObservations = 0 // è®¾ç½®æœ€ä½æ¥å—çš„å¯ä¿¡å€¼ rectDetectRequest.minimumConfidence = 0 // è®¾ç½®æœ€å°æ¥å—çš„çºµæ¨ªæ¯” rectDetectRequest.minimumAspectRatio = 0.1 return rectDetectRequest&#125;() å…¶ä¸­VNDetectRectanglesRequestå³æ˜¯æ ¸å¿ƒçš„å›¾ç‰‡åˆ†æè¯·æ±‚ç±»ï¼ŒVNImageRequestHandleræ˜¯è¯·æ±‚å¥æŸ„ï¼Œç”¨æ¥å‘èµ·è¯·æ±‚ã€‚åé¢æˆ‘ä»¬ä¼šè¯¦ç»†ä»‹ç»ã€‚åœ¨å¼€å§‹è¯·æ±‚åˆ†æä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å®šä¹‰ä¸ªæ–¹æ³•ï¼Œç”¨æ¥è¿›è¡ŒçŸ©å½¢åŒºåŸŸç»˜åˆ¶ï¼š 12345678910111213141516171819private func drawTask(request: VNDetectRectanglesRequest) &#123; // å°†ä¹‹å‰ç»˜åˆ¶çš„åˆ é™¤ boxViews.forEach &#123; v in v.removeFromSuperview() &#125; // éå†åˆ†æç»“æœ for result in request.results ?? [] &#123; var box = result.boundingBox // åæ ‡ç³»è½¬æ¢ box.origin.y = 1 - box.origin.y - box.size.height let v = UIView() v.backgroundColor = .clear v.layer.borderColor = UIColor.black.cgColor v.layer.borderWidth = 1 imageView.addSubview(v) let size = imageView.frame.size v.frame = CGRect(x: box.origin.x * size.width, y: box.origin.y * size.height, width: box.size.width * size.width, height: box.size.height * size.height) &#125;&#125; éœ€è¦æ³¨æ„ï¼ŒVisionæ¡†æ¶ä¸­çš„åæ ‡ç³»ä¸CoreGraphicsæ¡†æ¶ä¸­çš„åæ ‡ç³»æ˜¯ä¸€è‡´çš„ï¼Œå…¶ä»¥å·¦ä¸‹è§’ç‚¹ä¸ºï¼ˆ0ï¼Œ 0ï¼‰ç‚¹ï¼Œåœ¨UIKitæ¡†æ¶ä¸­åˆ™æ˜¯ä»¥å·¦ä¸Šè§’ç‚¹ä¸ºï¼ˆ0ï¼Œ0ï¼‰ç‚¹ï¼Œè®°å¾—è¿›è¡Œåæ ‡ç³»çš„è½¬æ¢ã€‚ æœ€åï¼Œä½¿ç”¨ä¸‹é¢çš„ä»£ç æ¥å‘èµ·è¯·æ±‚ï¼Œé™æ€å›¾åƒçš„åˆ†æå°†ä¼šæ˜¯ä¸€ä¸ªè€—æ—¶çš„è¿‡ç¨‹ï¼Œå› æ­¤å»ºè®®åœ¨éä¸»çº¿ç¨‹ä¸­è¿›è¡Œï¼š 123456789DispatchQueue.global(qos: .userInitiated).async &#123; do &#123; // å‘èµ·åˆ†æè¯·æ±‚ try self.imageRequestHandler.perform([self.rectangleDetectionRequest]) &#125; catch let error as NSError &#123; print(\"Failed to perform image request: \\(error)\") return &#125;&#125; åˆ†æçš„ç»“æœä¼šåœ¨å®šä¹‰VNDetectRectanglesRequestæ—¶ä¼ å…¥çš„å›è°ƒä¸­è¿”å›ã€‚ ä½ å¯ä»¥ç”¨å‡ å¼ å›¾ç‰‡æ¥å®éªŒä¸‹æ£€æµ‹æ•ˆæœï¼Œå¦‚ä¸‹å›¾ï¼š ä¸Šé¢å›¾ç‰‡ä¸­çš„é»‘è‰²è¾¹æ¡†å°±æ˜¯æˆ‘ä»¬æ£€æµ‹å‡ºçš„ç»“æœç»˜åˆ¶çš„ã€‚ 2 - å…³äºVNDetectRectanglesRequestç±»VNDetectRectanglesRequestç±»ç”¨æ¥å¯¹æ ¸å¿ƒçš„åˆ†æè¯·æ±‚è¿›è¡Œå®šä¹‰ï¼Œå¹¶ä¸”è®¾ç½®ç»“æœå›è°ƒã€‚VNDetectRectanglesRequestç±»æ˜¯ä¸“é—¨åˆ›å»ºçŸ©å½¢åŒºåŸŸè¯†åˆ«çš„è¯·æ±‚ç±»ï¼Œç»§æ‰¿è‡ªVNImageBasedRequestï¼ŒVNImageBasedRequestç±»æ˜¯é™æ€å›¾åƒåˆ†æè¯·æ±‚çš„åŸºç±»ï¼Œç»§æ‰¿è‡ªVNRequestç±»ã€‚ æˆ‘ä»¬å…ˆæ¥çœ‹VNRequestç±»ï¼š 123456789101112131415161718192021222324252627282930313233@available(iOS 11.0, *)open class VNRequest : NSObject, NSCopying &#123; // æ„é€ æ–¹æ³•ï¼Œæ— å¤„ç†å›è°ƒ public convenience init() // æ„é€ æ–¹æ³•å…¶ä¸­å›è°ƒå‚æ•°å®šä¹‰å¦‚ä¸‹ // (VNRequest, Error?) -&gt; Void // VNRequestä¸ºå½“å‰å®ä¾‹æœ¬èº« erroræ˜¯å¼‚å¸¸ï¼ˆå¦‚æœæœ‰ï¼‰ public init(completionHandler: VNRequestCompletionHandler? = nil) // æ˜¯å¦å¼€å¯åå°çº¿ç¨‹æ¨¡å¼ï¼Œæ­¤æ¨¡å¼ä¼šå ç”¨æ›´å°‘çš„å†…å­˜ï¼ŒCPUï¼ŒGPUèµ„æºï¼Œç»™ç”¨æˆ·æ›´å¥½çš„æ¸²æŸ“ä½“éªŒï¼Œä½†æ˜¯ä¼šä»¥è€—æ—¶ä¸ºä»£ä»· open var preferBackgroundProcessing: Bool // æ˜¯å¦å…è®¸ä½¿ç”¨GPUè¿›è¡ŒåŠ é€Ÿ open var usesCPUOnly: Bool // åˆ†æç»“æœåˆ—è¡¨ï¼ŒVNObservationæ˜¯ç»“æœåŸºç±»ï¼Œä¸åŒçš„å­ç±»å®ç°ä¸åŒçš„åŠŸèƒ½ open var results: [VNObservation]? &#123; get &#125; // å¤„ç†å›è°ƒï¼Œæ­¤å›è°ƒä¸­ä¼šä¼ å…¥å½“å‰Requestå¯¹è±¡ï¼Œé€šè¿‡å†…éƒ¨çš„resultsæ‹¿åˆ°ç»“æœ open var completionHandler: VNRequestCompletionHandler? &#123; get &#125; // è¿›è¡Œåˆ†æçš„ç‰¹å®šç®—æ³•ç‰ˆæœ¬ open var revision: Int // æ‰€æ”¯æŒçš„ç®—æ³•ç‰ˆæœ¬é›†åˆ open class var supportedRevisions: IndexSet &#123; get &#125; // é»˜è®¤çš„ç‰ˆæœ¬ open class var defaultRevision: Int &#123; get &#125; // å½“å‰ä½¿ç”¨çš„ç®—æ³•ç‰ˆæœ¬ open class var currentRevision: Int &#123; get &#125; // å–æ¶ˆåˆ†æè¯·æ±‚ open func cancel()&#125; åœ¨VNRequestç±»ä¸­å°è£…äº†ä¸€ç»„VNObservationå¯¹è±¡ï¼Œå½“æˆåŠŸçš„å®Œæˆäº†å›¾åƒåˆ†æä»»åŠ¡åï¼Œç»“æœä¼šè¢«å°è£…æˆVNObservationå¯¹è±¡ï¼Œä¸åŒçš„åˆ†æä»»åŠ¡å¯¹åº”çš„ç»“æœå¯¹è±¡ä¹Ÿä¸åŒï¼ŒVNObservationæ˜¯è¿™äº›ç»“æœçš„åŸºç±»ï¼Œå…¶ä¸­å°è£…äº†åŸºç¡€çš„ä¿¡æ¯ï¼Œå¦‚ä¸‹ï¼š 123456789101112@available(iOS 11.0, *)open class VNObservation : NSObject, NSCopying, NSSecureCoding, VNRequestRevisionProviding &#123; // å”¯ä¸€æ ‡è¯†id open var uuid: UUID &#123; get &#125; // æ­¤ç»“æœçš„å¯ä¿¡åº¦ï¼Œå–å€¼0åˆ°1ä¹‹é—´ open var confidence: VNConfidence &#123; get &#125; // æ­¤ç»“æœçš„æœ‰æ•ˆæ—¶é—´ @available(iOS 14.0, *) open var timeRange: CMTimeRange &#123; get &#125;&#125; VNImageBasedRequesç±»æ˜¯VNRequestçš„ä¸€ä¸ªå­ç±»ï¼Œå…¶æ˜¯é™æ€å›¾ç‰‡åˆ†æè¯·æ±‚ç±»çš„åŸºç±»ï¼Œå…¶ä¸­åªå°è£…äº†ä¸€ä¸ªå±æ€§ï¼š 12345@available(iOS 11.0, *)open class VNImageBasedRequest : VNRequest &#123; // çŸ©å½¢è¢«æ ‡å‡†åŒ–å¤„ç†åçš„å°ºå¯¸ï¼Œé»˜è®¤ä¸º&#123;&#123; 0, 0 &#125;, &#123; 1, 1 &#125;&#125; open var regionOfInterest: CGRect&#125; regionOfInterestå±æ€§éå¸¸æœ‰ç”¨ï¼Œå…¶é»˜è®¤ä¼šæŠŠæˆ‘ä»¬è¦å¤„ç†çš„å›¾åƒæ ‡å‡†åŒ–ä¸ºå•ä½çŸ©å½¢ï¼Œè¿”å›çš„ç»“æœä¸­çš„åæ ‡æ˜¯ä»¥æ­¤å•ä½çŸ©å½¢ä¸ºæ ‡å‡†çš„ã€‚ æœ€åï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸‹VNDetectRectanglesRequestç±»ï¼Œè¿™ä¸ªç±»å³ä½¿æˆ‘ä»¬è¿›è¡ŒçŸ©å½¢åŒºåŸŸè¯†åˆ«çš„è¯·æ±‚é…ç½®ç±»ï¼Œå¦‚ä¸‹ï¼š 1234567891011121314151617181920212223@available(iOS 11.0, *)open class VNDetectRectanglesRequest : VNImageBasedRequest &#123; // è®¾ç½®æ£€æµ‹æ¥å—çš„çŸ©å½¢æœ€å°çš„çºµæ¨ªæ¯” VNAspectRatioæ˜¯Floatç±»å‹çš„åˆ«åï¼Œå–å€¼0-1ä¹‹é—´ open var minimumAspectRatio: VNAspectRatio // è®¾ç½®æ£€æµ‹æ‰€æ¥å—çš„æœ€å¤§çš„çºµæ¨ªæ¯”ï¼Œå–å€¼0-1ä¹‹é—´ open var maximumAspectRatio: VNAspectRatio // è®¾ç½®çŸ©å½¢è§’åº¦å¯ä»¥åç¦»90åº¦çš„æœ€å¤§è§’åº¦ï¼Œå–å€¼0-45ä¹‹é—´ open var quadratureTolerance: VNDegrees // è®¾ç½®å…è®¸æ£€æµ‹åˆ°çš„æœ€å°çš„çŸ©å½¢å°ºå¯¸ï¼Œè®¾ç½®ä¸ºç›¸å¯¹åŸå›¾åƒæ¯”ä¾‹å€¼0-1ä¹‹é—´ open var minimumSize: Float // è®¾ç½®èƒ½å¤Ÿæ¥å—çš„æœ€å°å¯ä¿¡åº¦ï¼Œ0åˆ°1ä¹‹é—´ï¼Œå°äºæ­¤å¯ä¿¡åº¦çš„æ£€æµ‹ç»“æœä¸ä¼šè¢«è¿”å› open var minimumConfidence: VNConfidence // è®¾ç½®å…è®¸æ£€æµ‹å‡ºçš„æœ€å¤šç»“æœæ•°ï¼Œé»˜è®¤ä¸º1ï¼Œè®¾ç½®ä¸º0è¡¨ç¤ºä¸é™åˆ¶ï¼Œä½†æ˜¯Visionæ¡†æ¶ç›®å‰æœ€å¤šæ”¯æŒ16 open var maximumObservations: Int // ç»“æœæ•°ç»„ open var results: [VNRectangleObservation]? &#123; get &#125;&#125; éœ€è¦æ³¨æ„ï¼Œè®¾ç½®æœ€å¤§æœ€å°çºµæ¨ªæ¯”æ—¶ï¼Œä¼šæ€»æ˜¯ä»¥é•¿çš„ä¸€è¾¹ä½œä¸ºçºµï¼ŒçŸ­çš„ä¸€è¾¹ä½œä¸ºæ¨ªã€‚ 3 - å…³äºVNRectangleObservationç±»VNRectangleObservatioæ˜¯çŸ©å½¢åŒºåŸŸåˆ†æè¯·æ±‚çš„ç»“æœç±»ï¼Œç»§æ‰¿è‡ªVNDetectedObjectObservationç±»ï¼ŒVNDetectedObjectObservationç±»æ˜¯VNObservationçš„å­ç±»ï¼Œå…¶é€šå¸¸ä¸å¯¹è±¡çš„è¯†åˆ«æœ‰å…³ï¼Œå…¶å°è£…äº†ä¸è¯†åˆ«ç›¸å…³çš„å±æ€§ï¼Œå¦‚ä¸‹ï¼š 1234567@available(iOS 11.0, *)open class VNDetectedObjectObservation : VNObservation &#123; // æ£€æµ‹å‡ºçš„åŒºåŸŸï¼Œæ³¨æ„åŸç‚¹åœ¨å·¦ä¸‹è§’ open var boundingBox: CGRect &#123; get &#125; // ç¼“å†²åŒºçš„å›¾åƒæ•°æ® open var globalSegmentationMask: VNPixelBufferObservation? &#123; get &#125;&#125; VNRectangleObservationç±»åˆ™å°è£…äº†ä¸çŸ©å½¢ç›¸å…³çš„å±æ€§æ•°æ®ï¼š 1234567891011@available(iOS 11.0, *)open class VNRectangleObservation : VNDetectedObjectObservation &#123; // å·¦ä¸Šè§’ä½ç½® open var topLeft: CGPoint &#123; get &#125; // å³ä¸Šè§’ä½ç½® open var topRight: CGPoint &#123; get &#125; // å·¦ä¸‹è§’ä½ç½® open var bottomLeft: CGPoint &#123; get &#125; // å³ä¸‹è§’ä½ç½® open var bottomRight: CGPoint &#123; get &#125;&#125; ç†è§£äº†è¯·æ±‚é…ç½®ç±»ä¸åˆ†æç»“æœç±»çš„ç”¨æ³•ï¼Œå‰©ä¸‹çš„å°±æ˜¯è¯·æ±‚å¥æŸ„äº†ã€‚ 4 - å…³äºVNImageRequestHandlerç±»VNImageRequestHandlerç±»æ˜¯è¯·æ±‚å¥æŸ„ç±»ï¼Œæ›´é€šä¿—çš„è¯´ï¼Œå…¶ä¸ºåˆ†æè¯·æ±‚æä¾›äº†å›¾åƒæ•°æ®æºï¼Œå¹¶è§¦å‘è¯·æ±‚ã€‚å…¶æ”¯æŒçš„æ„é€ æ–¹æ³•å¦‚ä¸‹ï¼š 12345678910111213141516@available(iOS 11.0, *)open class VNImageRequestHandler : NSObject &#123; // æ„é€ æ–¹æ³• public init(cvPixelBuffer pixelBuffer: CVPixelBuffer, options: [VNImageOption : Any] = [:]) public init(cvPixelBuffer pixelBuffer: CVPixelBuffer, orientation: CGImagePropertyOrientation, options: [VNImageOption : Any] = [:]) public init(cgImage image: CGImage, options: [VNImageOption : Any] = [:]) public init(cgImage image: CGImage, orientation: CGImagePropertyOrientation, options: [VNImageOption : Any] = [:]) public init(ciImage image: CIImage, options: [VNImageOption : Any] = [:]) public init(ciImage image: CIImage, orientation: CGImagePropertyOrientation, options: [VNImageOption : Any] = [:]) public init(url imageURL: URL, options: [VNImageOption : Any] = [:]) public init(url imageURL: URL, orientation: CGImagePropertyOrientation, options: [VNImageOption : Any] = [:]) public init(data imageData: Data, options: [VNImageOption : Any] = [:]) public init(data imageData: Data, orientation: CGImagePropertyOrientation, options: [VNImageOption : Any] = [:]) public init(cmSampleBuffer sampleBuffer: CMSampleBuffer, options: [VNImageOption : Any] = [:]) public init(cmSampleBuffer sampleBuffer: CMSampleBuffer, orientation: CGImagePropertyOrientation, options: [VNImageOption : Any] = [:])&#125; VNImageRequestHandlerç±»çš„æ„é€ æ–¹æ³•å¾ˆå¤šï¼Œä½†å½’æ ¹ç»“åº•æ˜¯è¦æä¾›ä¸‰éƒ¨åˆ†å†…å®¹ï¼š å›¾ç‰‡æ•°æ®æºã€‚ å›¾ç‰‡çš„æ–¹å‘ã€‚ é¢å¤–å‚æ•°ã€‚ å…¶ä¸­ï¼Œå›¾ç‰‡çš„æ•°æ®æºå¯ä»¥ä»äºŒè¿›åˆ¶æ•°æ®åŠ è½½ï¼Œå¯ä»¥ä»ç½‘ç»œåŠ è½½ï¼Œå¯ä»¥ä»CoreImageæˆ–CoreGraphicsæ¡†æ¶çš„å›¾ç‰‡å¯¹è±¡åŠ è½½ç­‰ç­‰ï¼Œè¿™é‡Œä¸å¤šèµ˜è¿°ã€‚ å›¾ç‰‡çš„æ–¹å‘éœ€è¦åœ¨æ„é€ å¥æŸ„å®ä¾‹å¯¹è±¡æ—¶è¿›è¡Œæä¾›ï¼Œæšä¸¾å¦‚ä¸‹ï¼š 12345678910111213141516171819@frozen public enum CGImagePropertyOrientation : UInt32, @unchecked Sendable &#123; case up = 1 // æ­£å‘ case upMirrored = 2 // æ°´å¹³é•œåƒ case down = 3 // 180åº¦æ—‹è½¬ case downMirrored = 4 // ç«–ç›´é•œåƒ case leftMirrored = 5 // é¡ºæ—¶é’ˆæ—‹è½¬90åº¦åé•œåƒ case right = 6 // é¡ºæ—¶é’ˆæ—‹è½¬90åº¦ case rightMirrored = 7 // é€†æ—¶é’ˆæ—‹è½¬90åº¦åé•œåƒ case left = 8 // é€†æ—¶é’ˆæ—‹è½¬90åº¦&#125; é¢å¤–å‚æ•°å¯ä»¥é…ç½®ä¸ºä¸€ä¸ªå­—å…¸å¯¹è±¡ï¼Œæä¾›æ›´å¤šå›¾ç‰‡æ•°æ®ï¼Œæ”¯æŒé…ç½®çš„å­—æ®µå¦‚ä¸‹ï¼š propertiesï¼šæ­¤é”®å¯é…ç½®ä¸ºä¸€ä¸ªå±æ€§å­—å…¸ï¼Œå‚è€ƒCGImageSourceCopyPropertiesAtIndexã€‚ cameraIntrinsicsï¼šç›¸æœºå†…éƒ¨æ•°æ®é…ç½®ã€‚ ciContexï¼šCIContexté…ç½®ã€‚ æœ€åï¼Œè°ƒç”¨VNImageRequestHandlerç±»çš„å¦‚ä¸‹æ–¹æ³•å³å¯å¼€å§‹é™æ€å›¾åƒå¤„ç†ï¼š 1open func perform(_ requests: [VNRequest]) throws åŒä¸€ä¸ªå›¾åƒå¥æŸ„å¯ä»¥åŒæ—¶å‘èµ·å¤šç§å›¾åƒå¤„ç†è¯·æ±‚ã€‚ æ³¨ï¼šæœ¬æ–‡æ‰€ä»‹ç»çš„ç¤ºä¾‹ä»£ç å¯åœ¨å¦‚ä¸‹ä»“åº“è·å–ï¼š https://github.com/ZYHshao/MachineLearnDemo ä¸“æ³¨æŠ€æœ¯ï¼Œæ‡‚çš„çƒ­çˆ±ï¼Œæ„¿æ„åˆ†äº«ï¼Œåšä¸ªæœ‹å‹ QQï¼š316045346","categories":[{"name":"ä»æœºå™¨å­¦ä¹ åˆ°AI","slug":"ä»æœºå™¨å­¦ä¹ åˆ°AI","permalink":"http://huishao.cc/categories/ä»æœºå™¨å­¦ä¹ åˆ°AI/"}],"tags":[],"keywords":[{"name":"ä»æœºå™¨å­¦ä¹ åˆ°AI","slug":"ä»æœºå™¨å­¦ä¹ åˆ°AI","permalink":"http://huishao.cc/categories/ä»æœºå™¨å­¦ä¹ åˆ°AI/"}]},{"title":"iOS MachineLearningç³»åˆ—ï¼ˆ1ï¼‰â€”â€”ç®€ä»‹","slug":"456iOS MachineLearningç³»åˆ—ï¼ˆ1ï¼‰â€”â€”ç®€ä»‹","date":"2023-04-13T16:00:00.000Z","updated":"2023-04-14T13:45:36.761Z","comments":true,"path":"2023/04/14/456iOS MachineLearningç³»åˆ—ï¼ˆ1ï¼‰â€”â€”ç®€ä»‹/","link":"","permalink":"http://huishao.cc/2023/04/14/456iOS MachineLearningç³»åˆ—ï¼ˆ1ï¼‰â€”â€”ç®€ä»‹/","excerpt":"","text":"iOS MachineLearningç³»åˆ—ï¼ˆ1ï¼‰â€”â€”ç®€ä»‹æœ€è¿‘ï¼Œéšç€Chat-GPTçš„å‘å¸ƒï¼Œäººå·¥æ™ºèƒ½ç›¸å…³çš„èµ„è®¯å’Œè¯é¢˜å†æ¬¡ç«çƒ­äº†èµ·æ¥ã€‚æœ‰äº†äººå·¥æ™ºèƒ½çš„åŠ æŒï¼Œå¯¹äººä»¬çš„ç”Ÿæ´»ä»¥åŠå„è¡Œå„ä¸šçš„å·¥ä½œéƒ½å°†å¸¦æ¥æ•ˆç‡çš„æå¤§æå‡ã€‚ç›®å‰ï¼Œå„ç§å¤§æ¨¡å‹çš„å‘å¸ƒå±‚å‡ºä¸ç©·ï¼Œè¿™äº›å¤§æ¨¡å‹è™½ç„¶åŠŸèƒ½éå¸¸å¼ºå¤§ï¼ˆå¦‚æ–‡æœ¬ç†è§£ï¼Œç»˜å›¾ç­‰ï¼‰ï¼Œä½†å¯¹äºä¸ªäººæ¥è¯´ï¼Œè¦è·‘èµ·è¿™æ ·ä¸€ä¸ªæ¨¡å‹æ¥å¯¹å¤–æä¾›æœåŠ¡è¿˜æ˜¯æ¯”è¾ƒå›°éš¾çš„ï¼Œå…¶éœ€è¦æœ‰éå¸¸å¼ºå¤§çš„ç®—åŠ›æ”¯æŒã€‚ æœ¬ç³»åˆ—åšå®¢ï¼Œä¸»æ—¨åœ¨è®¨è®ºä½¿ç”¨åˆ†å¸ƒå¼çš„æ–¹å¼æ¥è¿è¡ŒMLæˆ–AIç›¸å…³çš„æœåŠ¡åŠŸèƒ½ï¼Œåœ¨iOSå¹³å°ä¸­ï¼Œç³»ç»Ÿæœ¬èº«å°±æä¾›äº†MLç›¸å…³çš„æ¡†æ¶ä»¥åŠå†…ç½®APIæ¥å£ï¼Œä½¿ç”¨å†…ç½®æ¥å£å·²ç»å¯ä»¥å®ç°éå¸¸å¼ºå¤§çš„AIåŠŸèƒ½ï¼Œä¸”ä¸éœ€è¦å¼•å…¥é¢å¤–çš„æ¨¡å‹ï¼Œä¸ä¼šå¢å¤§Appçš„ä½“ç§¯ã€‚å¦‚æœæœ‰æ›´é«˜çº§çš„AIéœ€æ±‚ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨CoreMLæ¡†æ¶æ¥è¿è¡Œç¬¬ä¸‰æ–¹çš„æ¨¡å‹ï¼Œéå¸¸å¼ºå¤§ã€‚æ›´ç”šä¸€æ­¥ï¼Œå¦‚æœæœ‰éå¸¸å®šåˆ¶åŒ–çš„AIéœ€æ±‚ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡Xcodeå·¥å…·æ¥è‡ªå·±è®­ç»ƒæ¨¡å‹ï¼Œä½¿ç”¨è‡ªå·±è®­ç»ƒçš„æ¨¡å‹æ¥å®ç°æ›´åŠ å¤æ‚çš„åŠŸèƒ½ã€‚ åœ¨ç»“æ„ä¸Šï¼Œæœ¬ç³»åˆ—åšå®¢å°†ä»åº”ç”¨çš„è§’åº¦ç”±æµ…å…¥æ·±çš„è¿›è¡Œä»‹ç»ï¼Œå…ˆä»‹ç»ç³»ç»ŸAPIçš„åŠŸèƒ½ï¼Œå†ä»‹ç»å¦‚ä½•ä½¿ç”¨ä¸‰æ–¹æ¨¡å‹ï¼Œæœ€åè®¨è®ºå¦‚ä½•è‡ªå·±è®­ç»ƒæ¨¡å‹ã€‚å¸Œæœ›è¿™äº›æ–‡ç« å¯ä»¥èµ·åˆ°æŠ›ç –å¼•ç‰çš„æ•ˆæœï¼Œå¸®åŠ©ä½ æ‰“å¼€åœ¨iOSå¹³å°ä¸ŠAIåº”ç”¨çš„æ–°æ€è·¯ï¼Œå¹¶å……åˆ†çš„åˆ©ç”¨ç”¨æˆ·çš„è®¾å¤‡æ¥å®ç°AIåŠŸèƒ½ï¼Œè€Œä¸æ˜¯ä¸­å¿ƒæœåŠ¡å™¨ã€‚ 1 - å…³äºMachine LearningCoreMLæ˜¯iOSç³»ç»Ÿæä¾›çš„æœºå™¨Learningæ ¸å¿ƒæ¡†æ¶ï¼Œå…¶å¯ä»¥å°†è®­ç»ƒå¥½çš„æ¨¡å‹è½»æ¾çš„é›†æˆåˆ°æˆ‘ä»¬çš„åº”ç”¨ä¸­ï¼Œè‡³äºæ¨¡å‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è‡ªå·±è®­ç»ƒçš„ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸‰æ–¹è®­ç»ƒå¥½çš„ï¼Œç”šè‡³å¯ä»¥å°†å…¶ä»–æ¡†æ¶çš„æ¨¡å‹è½¬æ¢æˆCoreMLæ‰€éœ€è¦çš„ç±»å‹è¿›è¡Œä½¿ç”¨ã€‚ iOSä¸­çš„Machine Learningèƒ½åŠ›å¯ä»¥æ¦‚æ‹¬ä¸ºä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š Machine Learning APIS Create ML Use Models ML Converters 2 - Machine Learning APISæˆ‘ä»¬çŸ¥é“ï¼ŒiOSç³»ç»Ÿæœ¬èº«å°±æœ‰ä¸€äº›AIåŠŸèƒ½ï¼Œä¾‹å¦‚äººè„¸è¯†åˆ«ï¼Œè¯­éŸ³è¯†åˆ«ç­‰ï¼Œè¿™äº›ç³»ç»Ÿå†…ç½®çš„åŠŸèƒ½å…¶å®ä¹Ÿå¼€å‘äº†APIä¾›å¼€å‘è€…ä½¿ç”¨ï¼Œæˆ‘ä»¬åªéœ€è¦å¾ˆå°‘çš„ä»£ç ï¼Œå³å¯åœ¨åº”ç”¨ä¸­é›†æˆè¿™äº›åŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š è§†è§‰ï¼šåˆ†æå›¾åƒå’Œè§†é¢‘çš„ç›¸å…³åŠŸèƒ½ã€‚ è‡ªç„¶è¯­è¨€ï¼šå¤„ç†å’Œç†è§£æ–‡æœ¬ç›¸å…³çš„ã€‚ è¯­éŸ³ï¼šè¯­éŸ³å†…å®¹è¯†åˆ«ç›¸å…³çš„ã€‚ éŸ³é¢‘ï¼šéŸ³é¢‘ç±»å‹è¯†åˆ«ç›¸å…³çš„ã€‚ ä¸è§†è§‰ç›¸å…³çš„APIåŠŸèƒ½åŒ…æ‹¬æœ‰ï¼š å›¾ç‰‡åˆ†ç±»ï¼šè‡ªåŠ¨è¯†åˆ«å›¾åƒä¸­çš„å†…å®¹ã€‚ å›¾ç‰‡å¢å¼ºï¼šå°†å›¾åƒçš„å…³é”®éƒ¨åˆ†è¿›è¡Œçªå‡ºã€‚ å›¾åƒå¯¹é½ï¼šå¤„ç†å›¾åƒè¾¹ç¼˜å¯¹é½ã€‚ å›¾åƒç›¸ä¼¼æ€§å¯¹æ¯”ï¼šç”Ÿæˆç‰¹å¾å¯¹æ¯”å›¾åƒç›¸ä¼¼æ€§ã€‚ ç›®æ ‡æ£€æµ‹ï¼šåœ¨å›¾åƒä¸­æ‰¾åˆ°ç›®æ ‡ç‰©ã€‚ å¯¹è±¡è·Ÿè¸ªï¼šè·Ÿè¸ªè§†é¢‘ä¸­çš„ç§»åŠ¨å¯¹è±¡ã€‚ è½¨è¿¹æ£€æµ‹ï¼šæ£€æµ‹è§†é¢‘ä¸­è¿åŠ¨ç‰©ä½“çš„è½¨è¿¹ã€‚ è½®å»“æ£€æµ‹ï¼šæ£€æµ‹å›¾åƒæˆ–è§†é¢‘ä¸­ç‰©ä½“çš„è½®å»“ã€‚ æ–‡æœ¬æ£€æµ‹ï¼šæ£€æµ‹å›¾åƒä¸­çš„æ–‡æœ¬åŒºåŸŸã€‚ æ–‡æœ¬è¯†åˆ«ï¼šè¯†åˆ«å›¾åƒä¸­çš„æ–‡æœ¬ï¼Œæå–æ–‡æœ¬ã€‚ äººè„¸æ£€æµ‹ï¼šæ£€æµ‹å›¾åƒä¸­çš„äººè„¸ã€‚ äººè„¸è¿½è¸ªï¼šå®æ—¶è¿½è¸ªç›¸æœºè§†é¢‘æµä¸­çš„äººè„¸ã€‚ é¢éƒ¨ç‰¹å¾æå–ï¼šæ£€æµ‹é¢éƒ¨ç‰¹å¾æå–äººè„¸ç‰¹å¾ã€‚ äººè„¸æ•è·è´¨é‡ï¼šæ¯”è¾ƒä¸€ç»„å›¾ä¸­çš„äººè„¸æ•è·è´¨é‡ã€‚ äººä½“æ£€æµ‹ï¼šåœ¨å›¾ç‰‡ä¸­æŸ¥æ‰¾äººä½“ã€‚ èº«ä½“å§¿åŠ¿åˆ†æï¼šåˆ†æå›¾åƒä¸­çš„äººä½“å§¿åŠ¿ã€‚ æ‰‹éƒ¨å§¿åŠ¿è¯†åˆ«ï¼šåœ¨å›¾åƒä¸­è¯†åˆ«æ‰‹éƒ¨å§¿åŠ¿ã€‚ åŠ¨ç‰©è¯†åˆ«ï¼šè¯†åˆ«å›¾åƒä¸­çš„çŒ«ç‹—ã€‚ æ¡å½¢ç è¯†åˆ«ï¼šè¯†åˆ«æ¡å½¢ç ã€‚ çŸ©å½¢æ£€æµ‹ï¼šæŸ¥æ‰¾å›¾ç‰‡ä¸­çš„çŸ©å½¢åŒºåŸŸã€‚ åœ°å¹³çº¿æ£€æµ‹ï¼šåˆ†æå›¾ç‰‡ä¸­çš„åœ°å¹³çº¿è§’åº¦ã€‚ å…‰ç”µæµï¼šåˆ†æå¯¹è±¡åœ¨è¿ç»­è§†é¢‘å¸§ä¹‹é—´çš„è¿åŠ¨æ¨¡å¼ã€‚ äººåƒç»†åˆ†ï¼šä¸ºå›¾ç‰‡ä¸­çš„äººç‰©ç”Ÿæˆæ— å…‰å›¾åƒã€‚ æ–‡æ¡£åˆ†æï¼šæ£€æµ‹å›¾åƒä¸­åŒ…å«çš„æ–‡æœ¬çŸ©å½¢åŒºåŸŸã€‚ ä¸è‡ªç„¶è¯­è¨€å¤„ç†ç›¸å…³APIæœ‰ï¼š tokenåŒ–ï¼šæšä¸¾æ–‡æœ¬å­—ç¬¦ä¸²ä¸­çš„å•è¯ã€‚ è¯­è¨€è¯†åˆ«ï¼šè¯†åˆ«æ–‡æœ¬çš„ä¸»ä½“è¯­è¨€ã€‚ æ‰“æ ‡ç­¾ï¼šå¯¹æ–‡æœ¬ä¸­çš„å®ä½“è¿›è¡Œæ ‡ç­¾åŒ–ã€‚ è¯æ€§æ ‡æ³¨ï¼šæ ‡æ³¨æ–‡æœ¬ä¸­å®ä½“çš„è¯æ€§ã€‚ å•è¯åµŒå…¥ï¼šåµŒå…¥ç›¸è¿‘è¯ã€‚ å¥å­åµŒå…¥ï¼šåµŒå…¥ç›¸è¿‘å¥ã€‚ æƒ…ç»ªåˆ†æï¼šåˆ†ææ–‡æœ¬çš„æƒ…ç»ªã€‚ ä¸è¯­éŸ³è¯†åˆ«APIæœ‰ï¼š è¯­éŸ³è¯†åˆ«ï¼šå°†è¯­éŸ³æå–æˆæ–‡å­—ã€‚ ä¸éŸ³é¢‘å¤„ç†ç›¸å…³çš„APIæœ‰ï¼š å£°éŸ³åˆ†ç±»ï¼šå°†å£°éŸ³è¿›è¡Œåˆ†ç±»ã€‚ æœ¬ç³»åˆ—çš„åç»­æ–‡ç« ä¼šå¯¹è¿™äº›APIçš„ä½¿ç”¨å¤šè¯¦ç»†ä»‹ç»ã€‚ 2 - Create MLCreate MLæ˜¯Macä¸Šæä¾›çš„ä¸€ç§æ¨¡å‹è®­ç»ƒæ–¹å¼ï¼Œå…¶è®­ç»ƒå®Œæˆåçš„æ¨¡å‹å¯ä»¥ç›´æ¥åœ¨CoreMLæ¡†æ¶ä¸Šè¿›è¡Œä½¿ç”¨ã€‚é™ä½äº†æ¨¡å‹è®­ç»ƒçš„å¤æ‚æ€§ã€‚ Create MLæ”¯æŒå¯¹å¤šç§ç±»å‹çš„æ•°æ®ä¸ºå†…å®¹è¿›è¡Œè®­ç»ƒï¼ŒåŒ…æ‹¬å›¾ç‰‡ï¼Œè§†é¢‘ï¼Œæ´»åŠ¨ï¼Œå£°éŸ³ï¼Œæ–‡æœ¬å’Œè¡¨æ ¼ç­‰ã€‚å¦‚æœå®‰è£…äº†Xcodeï¼Œåˆ™è‡ªåŠ¨ä¹Ÿå°†å®‰è£…Create MLå·¥å…·ï¼Œå…¶ä¸­è‡ªå¸¦äº†å¾ˆå¤šè®­ç»ƒæ¨¡æ¿ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å…³äºæ¨¡å‹çš„è®­ç»ƒï¼Œä¹Ÿå°†åœ¨åç»­æ–‡ç« ä¸­åšä»‹ç»ã€‚ 3 - Use Modelsè‡ªå·±è®­ç»ƒæ¨¡å‹æ˜¯æœ‰ä¸€å®šçš„æˆæœ¬çš„ï¼Œæ¯”å¦‚é¦–å…ˆè¦æœ‰å¤§é‡çš„ç”¨äºè®­ç»ƒçš„æ•°æ®ã€‚Core MLç¤¾åŒºä¹Ÿä¸ºå¼€å‘è€…æä¾›äº†ä¸€äº›è®­ç»ƒå¥½çš„æ¨¡å‹ï¼Œå¯ä»¥ç›´æ¥ä¸‹è½½ä½¿ç”¨ã€‚å¯ä»¥åœ¨å¦‚ä¸‹ç½‘ç«™è¿›è¡Œä¸‹è½½ï¼š https://developer.apple.com/machine-learning/models/ è¿™äº›æ¨¡å‹çš„åŠŸèƒ½è¿˜æ˜¯å¾ˆå¼ºå¤§çš„ï¼Œæ¯”å¦‚è¿›è¡Œå›¾åƒçš„æ·±åº¦é¢„æµ‹ï¼Œæ•°å­—æ‰‹å†™ä½“è¯†åˆ«ï¼Œç»˜å›¾åˆ†ç±»ï¼Œç‰©ä½“è¯†åˆ«ï¼Œåƒç´ åˆ†å‰²ï¼Œäººç±»å…³èŠ‚åˆ†æï¼Œä»¥åŠæŸ¥æ‰¾é—®é¢˜çš„ç­”æ¡ˆç­‰ç­‰ã€‚ åç»­æ–‡ç« ä¼šä»‹ç»å¦‚ä½•ä½¿ç”¨è¿™äº›æ¨¡å‹ã€‚ 4. ML ConvertersCore MLæœ¬èº«æ˜¯Appleæä¾›çš„æ¨¡å‹æ¡†æ¶ï¼Œæˆ‘ä»¬çŸ¥é“è¿˜æœ‰å¾ˆå¤šç¬¬ä¸‰æ–¹çš„è®­ç»ƒåº“ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†å…¶ä»–æ¡†æ¶è®­ç»ƒçš„æ¨¡å‹è½¬æ¢ä¸ºCore MLæ¨¡å‹ï¼Œä»è€Œé›†æˆè¿›iOSåº”ç”¨ã€‚æ”¯æŒçš„åº“å’Œæ¡†æ¶åŒ…æ‹¬ï¼š TenscrFlow PyTorch XGboost scikit-learn LIBSVM ä¸“æ³¨æŠ€æœ¯ï¼Œæ‡‚çš„çƒ­çˆ±ï¼Œæ„¿æ„åˆ†äº«ï¼Œåšä¸ªæœ‹å‹ QQï¼š316045346","categories":[{"name":"ä»æœºå™¨å­¦ä¹ åˆ°AI","slug":"ä»æœºå™¨å­¦ä¹ åˆ°AI","permalink":"http://huishao.cc/categories/ä»æœºå™¨å­¦ä¹ åˆ°AI/"}],"tags":[],"keywords":[{"name":"ä»æœºå™¨å­¦ä¹ åˆ°AI","slug":"ä»æœºå™¨å­¦ä¹ åˆ°AI","permalink":"http://huishao.cc/categories/ä»æœºå™¨å­¦ä¹ åˆ°AI/"}]},{"title":"StoreKitï¼šiOSåº”ç”¨å†…æ¨å¹¿å…¶ä»–App","slug":"455StoreKitï¼šiOSåº”ç”¨å†…æ¨å¹¿å…¶ä»–App","date":"2023-03-23T16:00:00.000Z","updated":"2023-04-14T14:03:57.168Z","comments":true,"path":"2023/03/24/455StoreKitï¼šiOSåº”ç”¨å†…æ¨å¹¿å…¶ä»–App/","link":"","permalink":"http://huishao.cc/2023/03/24/455StoreKitï¼šiOSåº”ç”¨å†…æ¨å¹¿å…¶ä»–App/","excerpt":"","text":"StoreKitï¼šiOSåº”ç”¨å†…æ¨å¹¿å…¶ä»–Appåœ¨iOSåº”ç”¨ä¸­ï¼Œè¦æ¨å¹¿å…¶ä»–Appæœ‰ä¸¤ç§é€”å¾„ï¼Œä¸€ç§æ˜¯ç›´æ¥è·³è½¬åˆ°AppStoreè½¯ä»¶çš„å¯¹åº”Appå•†å“é¡µï¼Œè¿˜æœ‰ä¸€ç§æ˜¯åœ¨å½“å‰åº”ç”¨å†…å†…åµŒä¸€ä¸ªAppå•†å“é¡µã€‚ç›¸æ¯”ç¬¬ä¸€ç§æ–¹å¼ï¼Œç¬¬äºŒç§æ–¹å¼çš„ä½“éªŒæ›´å¥½ï¼Œå¹¶ä¸”ä¸ä¼šæ‰“æ–­ç”¨æˆ·å¯¹å½“å‰åº”ç”¨çš„ä½¿ç”¨ã€‚ æœ¬ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬ä¸»è¦ä»‹ç»StoreKitæ¡†æ¶ä¸­çš„ç›¸å…³æ¥å£ï¼Œä½¿ç”¨StoreKitå¯ä»¥è½»æ¾çš„åœ¨å½“å‰åº”ç”¨å†…æ¨å¹¿å…¶ä»–Appã€‚ Â· åœ¨åº”ç”¨å†…æ‰“å¼€å…¶ä»–Appçš„å•†å“é¡µStoreKitæ¡†æ¶ä¸­æä¾›äº†ä¸€ä¸ªåä¸ºSKStoreProductViewControllerçš„ç±»ï¼Œæ­¤ç±»äº‹ç»§æ‰¿è‡ªUIViewControllerçš„ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åƒä½¿ç”¨æ™®é€šè§†é¢‘æ§åˆ¶å™¨ä¸€æ ·æ¥ä½¿ç”¨å®ƒã€‚åªè¦æˆ‘ä»¬æä¾›äº†æŸä¸ªåº”ç”¨çš„ITunes IDï¼Œå°±å¯ä»¥è½»æ¾çš„åœ¨åº”ç”¨ä¸­æ‰“å¼€å…¶AppStoreå•†å“é¡µã€‚ ä¾‹å¦‚ä¸‹é¢çš„ä»£ç ï¼š 12345678910// åˆ›å»ºè§†å›¾æ§åˆ¶å™¨let appStoreController = SKStoreProductViewController()// è®¾ç½®ä»£ç†appStoreController.delegate = self// å®šä¹‰å‚æ•°let params = [SKStoreProductParameterITunesItemIdentifier: \"387682726\"]// åŠ è½½åº”ç”¨ä¿¡æ¯appStoreController.loadProduct(withParameters: params)// å°†é¡µé¢å¼¹å‡ºself.present(appStoreController, animated: true) ä¸Šé¢ä»£ç ä¸­ä½¿ç”¨äº†æ·˜å®åº”ç”¨çš„ITunes IDï¼Œä»£ç æ‰§è¡Œæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨åº”ç”¨å†…å°±å¼¹èµ·äº†â€æ·˜å®â€œçš„è¯¦æƒ…é¡µï¼Œå¯ä»¥ç›´æ¥è¿›è¡Œä¸‹è½½/æ›´æ–°æ“ä½œã€‚ éœ€è¦æ³¨æ„ï¼Œä¸Šé¢ä»£ç åªèƒ½åœ¨çœŸæœºä¸Šè¿›è¡Œæµ‹è¯•ï¼Œä¸”é»˜è®¤é¡µé¢çš„å¼¹å‡ºæ–¹å¼ä¸ºæµ®å±‚æ ·å¼ã€‚ ä¸‹é¢æˆ‘ä»¬å†æ¥è¯¦ç»†çœ‹ä¸‹SKStoreProductViewControllerè¿™ä¸ªç±»çš„ç”¨æ³•ï¼ŒSKStoreProductViewControlleræœ¬èº«æ¯”è¾ƒç®€å•ï¼Œåˆ›å»ºå‡ºå®ä¾‹åï¼Œåªéœ€è¦ä½¿ç”¨loadProductæ¥åŠ è½½æŒ‡å®šçš„åº”ç”¨å³å¯ï¼Œå…¶æ‰€ä¼ çš„å‚æ•°å­—å…¸ä¸­ï¼Œå¯é…ç½®çš„é€‰é¡¹å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425// åº”ç”¨çš„iTunes ID @available(iOS 6.0, *)public let SKStoreProductParameterITunesItemIdentifier: String// å†…è´­å•†å“çš„SKUç ï¼Œå¦‚æœé…ç½®äº†ï¼Œåˆ™ä¼šæ˜¾ç¤ºå†…è´­å•†å“ä¿¡æ¯ @available(iOS 11.0, *)public let SKStoreProductParameterProductIdentifier: String// è‡ªå®šä¹‰å•†å“é¡µçš„ID@available(iOS 15.0, *)public let SKStoreProductParameterCustomProductPageIdentifier: String// æœºæ„token@available(iOS 8.0, *)public let SKStoreProductParameterAffiliateToken: String@available(iOS 8.0, *)public let SKStoreProductParameterCampaignToken: String// ç”¨æ¥åˆ†ææä¾›è€…çš„token@available(iOS 8.3, *)public let SKStoreProductParameterProviderToken: String// å¹¿å‘Šä¼™ä¼´token@available(iOS 9.3, *)public let SKStoreProductParameterAdvertisingPartnerToken: String å…¶ä¸­ï¼ŒSKStoreProductParameterITunesItemIdentifieré”®æ˜¯å¿…ä¼ çš„ã€‚ SKStoreProductViewControllerä¸­ä¹Ÿå®šä¹‰äº†ä¸€ä¸ªdelegateå±æ€§ï¼Œè®¾ç½®ä»£ç†å¯ä»¥å¯¹å•†å“é¡µçš„å…³é—­è¡Œä¸ºè¿›è¡Œç›‘å¬ï¼Œå¦‚ä¸‹ï¼š 12345extension ViewController: SKStoreProductViewControllerDelegate &#123; func productViewControllerDidFinish(_ viewController: SKStoreProductViewController) &#123; print(\"å•†å“é¡µå…³é—­\") &#125;&#125; æ­¤ä»£ç†æ–¹æ³•æ˜¯å¯é€‰å®ç°çš„ã€‚ Â· ä¸€äº›å°æŠ€å·§å¦‚ä½•è·å–å…¬å¼€åº”ç”¨çš„ITunes IDï¼Ÿ ç°åœ¨ï¼Œæˆ‘ä»¬ä»¥åŠçŸ¥é“äº†å¦‚ä½•åœ¨åº”ç”¨å†…æ‰“å¼€å…¶ä»–Appçš„è¯¦æƒ…é¡µï¼Œå¦‚ä½•è·å–ITuneså‚æ•°å‘¢ï¼Œå…¶å®æ˜¯æœ‰å®˜æ–¹çš„æ¸ é“å¯æŸ¥çš„ã€‚åœ°å€å¦‚ä¸‹ï¼š https://tools.applemediaservices.com/ åœ¨å…¶ä¸­è¾“å…¥æˆ‘ä»¬è¦æŸ¥è¯¢çš„åº”ç”¨åç§°ï¼Œå³å¯è·å–åˆ°ä¸æ­¤åº”ç”¨ç›¸å…³çš„æ¨å¹¿ä¿¡æ¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¯ä»¥çœ‹åˆ°ï¼Œå›¾ä¸­æœ‰ä¸€æ®µContent Linkï¼Œè¿™å…¶ä¸­å°±åŒ…å«äº†åº”ç”¨çš„ITunes IDä¿¡æ¯ï¼Œåªæ˜¯å…¶æ˜¯è¢«URL encodeåçš„ï¼Œå°†å…¶å¤åˆ¶å‡ºæ¥ï¼Œå¯ä»¥åœ¨å¦‚ä¸‹ç½‘ç«™è¿›è¡ŒURL Decodeï¼Œå³å¯å¾—åˆ°åŸå§‹çš„ITunes IDã€‚ http://www.jsons.cn/urlencode/ å¯¹å†…åµŒå•†å“é¡µå¼¹èµ·çš„é«˜åº¦ï¼Œæ–‡æœ¬é£æ ¼é¢œè‰²è¿›è¡Œé…ç½®ï¼Ÿ è™½ç„¶SKStoreProductViewControlleræä¾›çš„æ¥å£å¾ˆå°‘ï¼Œä½†æˆ‘ä»¬ä¾ç„¶æœ‰åŠæ³•å¯¹å…¶åšä¸€å®šç¨‹åº¦ä¸Šçš„å®šåˆ¶ï¼Œæ¯”å¦‚å…¶ä¸­æŒ‰é’®çš„é£æ ¼é¢œè‰²ï¼Œæµ®å±‚çš„å¼¹èµ·é«˜åº¦ã€‚ æ–°å»ºä¸€ä¸ªç»§æ‰¿äºSKStoreProductViewControllerçš„ç±»ï¼Œå®ç°å¦‚ä¸‹ï¼š 1234567891011121314151617import UIKitimport StoreKitclass MyStoreProductController: SKStoreProductViewController &#123; override func viewDidLoad() &#123; super.viewDidLoad() // è®¾ç½®é¡µé¢å†…éƒ¨åˆ†å…ƒç´ çš„é£æ ¼é¢œè‰² view.tintColor = .red &#125; override func viewWillLayoutSubviews() &#123; super.viewWillLayoutSubviews() // è¿™é‡Œå¯ä»¥æ§åˆ¶é¡µé¢å¼¹èµ·çš„é«˜åº¦ view.frame = CGRect(x: 0, y: 400, width: UIScreen.main.bounds.width, height: UIScreen.main.bounds.height - 400) &#125;&#125; è¿è¡Œæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š Â· ä½¿ç”¨åº”ç”¨æŒ‚ä»¶SKStoreProductViewControlleræ‰“å¼€çš„æ˜¯ä¸€ä¸ªå®Œæ•´çš„äº§å“è¯¦æƒ…é¡µï¼Œæœ‰æ—¶å€™ï¼Œæˆ‘ä»¬æ›´æœŸæœ›è¦æ¨å¹¿çš„åº”ç”¨åªæ˜¯å æ®ä¸€ä¸ªæŒ‚ä»¶çš„ä½ç½®ï¼Œåœ¨iOS 14åŠä¹‹åçš„ç‰ˆæœ¬ä¸­ï¼ŒStoreKitæ¡†æ¶ä¸­æä¾›äº†SKOverlayç±»æ¥å®ç°åº”ç”¨æŒ‚ä»¶ã€‚ ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567// åˆ›å»ºé…ç½®ï¼Œä¼ å…¥è¦æ¸²æŸ“çš„åº”ç”¨çš„ITunes IDlet config = SKOverlay.AppConfiguration(appIdentifier: \"387682726\", position: .bottom)let overlay = SKOverlay(configuration: config)// æŒ‡å®šå±•ç¤ºåœ¨Sceneä¸Šif let scene = UIApplication.shared.windows.first?.windowScene &#123; overlay.present(in: scene)&#125; æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¯ä»¥çœ‹åˆ°ï¼Œåœ¨çª—å£åº•éƒ¨ä¼šå‡ºç°ä¸€ä¸ªåº”ç”¨æŒ‚ä»¶ã€‚ AppConfigurationå®ä¾‹å¯é…ç½®çš„å±æ€§ä¸å¤šï¼Œåˆ—ä¸¾å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334@available(iOS 14.0, *)public class AppConfiguration : SKOverlay.Configuration &#123; // åˆå§‹åŒ–æ–¹æ³• public init(appIdentifier: String, position: SKOverlay.Position) // ITunes ID open var appIdentifier: String // ä¸€äº›é¢å¤–çš„Token open var campaignToken: String? open var providerToken: String? // è‡ªå®šä¹‰é¡µé¢çš„ID @available(iOS 15.0, *) open var customProductPageIdentifier: String? // è®¾ç½®è¦å±•ç¤ºæœ€è¿‘ç‰ˆæœ¬ @available(iOS 15.0, *) open var latestReleaseID: String? // æŒ‚ä»¶çš„ä½ç½®ï¼Œå¯æšä¸¾bottomå’ŒbottomRaised å·®åˆ«ä¸å¤§ open var position: SKOverlay.Position // æ˜¯å¦å…è®¸ç”¨æˆ·å…³é—­ open var userDismissible: Bool // å¯åŠ¨é™„åŠ æ•°æ® open func setAdditionalValue(_ value: Any?, forKey key: String) open func additionalValue(forKey key: String) -&gt; Any? // å¹¿å‘Šä½“éªŒé…ç½® @available(iOS 16.0, *) open func setAdImpression(_ impression: SKAdImpression)&#125; æ•´ä½“æ¥è¯´ï¼ŒSKOverlayä¸å¤ªçµæ´»ï¼Œå¯¹å…¶å‡ºç°çš„ä½ç½®å¹¶ä¸èƒ½ç²¾å‡†çš„è¿›è¡Œæ§åˆ¶ï¼ŒSKOverlayDelegateå®šä¹‰äº†ä¸€äº›æ–¹æ³•æ¥ç›‘å¬å…¶è¡Œä¸ºï¼Œå¦‚ä¸‹ï¼š 123456789101112public protocol SKOverlayDelegate : NSObjectProtocol &#123; // äº§å“åŠ è½½å¤±è´¥çš„å›è°ƒ optional func storeOverlayDidFailToLoad(_ overlay: SKOverlay, error: Error) // æŒ‚ä»¶å°†è¦å¼€å§‹å¼¹å‡ºçš„å›è°ƒ optional func storeOverlayWillStartPresentation(_ overlay: SKOverlay, transitionContext: SKOverlay.TransitionContext) // æŒ‚ä»¶ä»¥åŠå¼¹å‡ºçš„å›è°ƒ optional func storeOverlayDidFinishPresentation(_ overlay: SKOverlay, transitionContext: SKOverlay.TransitionContext) // æŒ‚ä»¶å°†è¦æ¶ˆå¤±çš„å›è°ƒ optional func storeOverlayWillStartDismissal(_ overlay: SKOverlay, transitionContext: SKOverlay.TransitionContext) // æŒ‚ä»¶å·²ç»æ¶ˆå¤±çš„å›è°ƒ optional func storeOverlayDidFinishDismissal(_ overlay: SKOverlay, transitionContext: SKOverlay.TransitionContext)&#125; ä¸“æ³¨æŠ€æœ¯ï¼Œæ‡‚çš„çƒ­çˆ±ï¼Œæ„¿æ„åˆ†äº«ï¼Œåšä¸ªæœ‹å‹ QQï¼š316045346","categories":[{"name":"iOSä¹‹é€»è¾‘åˆçª¥","slug":"iOSä¹‹é€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSä¹‹é€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSä¹‹é€»è¾‘åˆçª¥","slug":"iOSä¹‹é€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSä¹‹é€»è¾‘åˆçª¥/"}]},{"title":"ç†è§£iOSç«¯çš„WebViewåŒå±‚ç»„ä»¶","slug":"454ç†è§£iOSç«¯çš„WebViewåŒå±‚ç»„ä»¶","date":"2022-12-29T16:00:00.000Z","updated":"2022-12-30T02:44:59.354Z","comments":true,"path":"2022/12/30/454ç†è§£iOSç«¯çš„WebViewåŒå±‚ç»„ä»¶/","link":"","permalink":"http://huishao.cc/2022/12/30/454ç†è§£iOSç«¯çš„WebViewåŒå±‚ç»„ä»¶/","excerpt":"","text":"ç†è§£iOSç«¯çš„WebViewåŒå±‚ç»„ä»¶ä¸€ èµ·å§‹åŒå±‚æ¸²æŸ“æ˜¯åˆ©ç”¨åŸç”ŸæŠ€æœ¯æ¥ä¼˜åŒ–Webæ¸²æŸ“ä¸€ç§æŠ€æœ¯ï¼Œå¾ˆå¤šäººäº†è§£å®ƒæ˜¯èµ·äºå¾®ä¿¡å¼€æ”¾ç¤¾åŒºå‘å¸ƒçš„ä¸€ç¯‡å…³äºå°ç¨‹åºæ¸²æŸ“åŸç†å‰–æçš„æ–‡ç« ã€‚æˆ‘å°†é“¾æ¥é™„ä¸Šï¼š https://developers.weixin.qq.com/community/develop/article/doc/000c4e433707c072c1793e56f5c813 å¤§éƒ¨åˆ†çš„Webåº”ç”¨ï¼Œæ‰€æœ‰çš„å…ƒç´ å’Œç»„ä»¶éƒ½æ˜¯æ¸²æŸ“åœ¨WebViewå†…éƒ¨çš„ï¼Œæœ‰æ—¶å€™è¿™å¯¼è‡´æˆ‘ä»¬æ— æ³•å……åˆ†åˆ©ç”¨åŸç”Ÿçš„å¼ºå¤§èƒ½åŠ›ï¼Œä¾‹å¦‚éŸ³è§†é¢‘æ’­æ”¾ï¼Œåœ°å›¾åŠŸèƒ½ç­‰ã€‚å› æ­¤ï¼Œåœ¨å¾®ä¿¡å°ç¨‹åºå¼€å‘æ¡†æ¶ä¸­ï¼Œè¿˜æä¾›äº†ä¸€äº›ä»¥â€cover-â€œå¼€å¤´çš„ç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶æœ¬èº«æ˜¯åŸç”Ÿçš„ï¼Œåªæ˜¯è´´åœ¨äº†WebViewä¸Šé¢ã€‚å€ŸåŠ©åŸç”Ÿç»„ä»¶ï¼Œå¯ä»¥æå¤§çš„æé«˜åº”ç”¨çš„æ€§èƒ½ä½“éªŒï¼Œä½†æ˜¯ä¹Ÿæœ‰ä¸€äº›å¼Šç«¯ã€‚ åŸç”Ÿç»„ä»¶çš„å±‚çº§åœ¨WebViewä¹‹ä¸Šï¼Œå› æ­¤æ— æ³•åœ¨Webä¸­é€šè¿‡æ ‡ç­¾çš„å±‚çº§æ¥è°ƒæ•´ç»„ä»¶çš„zè½´ä½ç½®ã€‚ åŸç”Ÿç»„ä»¶ä¸WebViewæ–‡æ¡£æµæ˜¯å®Œå…¨è„±ç¦»çš„ï¼Œè¿™ä½¿å¾—å¸ƒå±€çš„æ§åˆ¶å˜å¾—å›°éš¾ã€‚ åŒå±‚ç»„ä»¶çš„å‡ºç°æ­£ä¸ºè§£å†³è¿™äº›é—®é¢˜ã€‚ äºŒ åŸç†åŒå±‚ç»„ä»¶çš„ç›®æ ‡æ˜¯å°†åŸç”Ÿç»„ä»¶æ¸²æŸ“åœ¨ä¸å…¶ä»–Webç»„ä»¶åŒä¸€å±‚çº§ä¸­ã€‚åœ¨iOSä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨WKWebViewæ¥åˆ›å»ºWebè§†å›¾ï¼ŒWKWebViewåœ¨è¿›è¡Œè§£ææ¸²æŸ“æ—¶ï¼Œä¼šå°†Webç»„ä»¶æ¸²æŸ“åˆ°WKCompositingViewä¸Šï¼Œè¿™ä¸ªViewæ˜¯ä¸€ä¸ªåŸç”Ÿçš„UIViewå­ç±»ï¼Œé€šå¸¸WKWebViewå†…æ ¸ä¼šå°†å¤šä¸ªç»„ä»¶å…±åŒæ¸²æŸ“åˆ°åŒä¸€ä¸ªWKCompositingViewä¸Šï¼Œä½†æ˜¯å¦‚æœæŸä¸ªHTMLæ ‡ç­¾çš„styleè®¾ç½®äº†overflow: scrollå±æ€§ï¼Œå¹¶ä¸”å†…å®¹è¶…å‡ºå®¹å™¨çš„å¤§å°ï¼ŒWKWebViewå°±ä¼šä¸ºå…¶å•ç‹¬çš„åˆ›å»ºä¸€ä¸ªWKChildScrollViewï¼Œå› æ­¤å¦‚æœæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°è¿™ä¸ªViewï¼Œå¹¶å’Œå¯¹åº”çš„Webç»„ä»¶ä¸€ä¸€å…³è”èµ·æ¥ï¼Œå°±å¯ä»¥å°†åŸç”Ÿçš„ç»„ä»¶æ¸²æŸ“åˆ°è¿™ä¸ªViewä¸­ï¼Œä»è€Œå®ç°åŒå±‚æ¸²æŸ“ã€‚ æˆ‘ä»¬å¯ä»¥å…ˆå†™ä¸€ä¸ªç®€å•çš„Webç¤ºä¾‹é¡µé¢ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset=\"utf-8\"&gt; &lt;meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"&gt; &lt;title&gt;&lt;/title&gt; &lt;link rel=\"stylesheet\" href=\"\"&gt; &lt;style type=\"text/css\"&gt; .block &#123; width: 80%; height: 300pt; margin-top: 50pt; background-color: red; &#125; .content &#123; display: flex; flex-direction: column; align-items: center; width: 100%; &#125; .title &#123; width: 100%; text-align: center; &#125; .toast &#123; position: fixed; width: 250pt; height: 100pt; background-color: gray; line-height: 100pt; text-align: center; color: white; top: 50%; left: 50%; font-size: 50pt; transform: translate(-50%,-50%); &#125; .native &#123; width: 80%; height: 350pt; margin-top: 50pt; background-color: blue; overflow: scroll; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;!-- æ ‡é¢˜ --&gt; &lt;h1 class=\"title\"&gt;H5é¡µé¢Demo&lt;/h1&gt; &lt;!-- å†…å®¹ --&gt; &lt;div class=\"content\"&gt; &lt;div class=\"block\"&gt;&lt;/div&gt; &lt;div class=\"block\"&gt;&lt;/div&gt; &lt;!-- ç‰¹æ®Šç»„ä»¶ --&gt; &lt;div class=\"native\"&gt; &lt;div style=\"width: 101%; height: 101%\"&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=\"block\"&gt;&lt;/div&gt; &lt;div class=\"block\"&gt;&lt;/div&gt; &lt;div class=\"block\"&gt;&lt;/div&gt; &lt;/div&gt; &lt;!-- å¼¹æ¡† --&gt; &lt;div class=\"toast show\"&gt;å¼¹çª—æç¤º&lt;/div&gt;&lt;/body&gt;&lt;/html&gt; ä¸Šé¢ä»£ç ä¸­ï¼Œè“è‰²çš„è‰²å—å°±æ˜¯åŒå±‚ç»„ä»¶å®¹å™¨ã€‚ åœ¨iOSä¸­åŠ è½½æ­¤é¡µé¢å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425@interface ViewController ()@property (nonatomic, strong) WKWebView *webView;@end@implementation ViewController- (void)viewDidLoad &#123; [super viewDidLoad]; [self.view addSubview:self.webView]; NSString *html = [NSString stringWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@\"web\" ofType:@\"html\"] encoding: NSUTF8StringEncoding error:nil]; [self.webView loadHTMLString:html baseURL:nil]; &#125;- (WKWebView *)webView &#123; if (!_webView) &#123; _webView = [[WKWebView alloc] initWithFrame:self.view.frame]; &#125; return _webView;&#125;@end ä½¿ç”¨Xcodeè°ƒè¯•å·¥å…·è¿›è¡ŒæŸ¥çœ‹ï¼Œå±‚çº§å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¯ä»¥çœ‹åˆ°å¯¹äºè“è‰²çš„è‰²å—ï¼ŒWKWebViewå•ç‹¬åˆ›å»ºäº†ä¸€ä¸ªWKChildScrollViewæ¥æ‰¿è½½ã€‚ ä¸‰ å°è¯•äº†è§£äº†åŒå±‚ç»„ä»¶åŸç†åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨iOSå¹³å°ä¸Šåšä¸‹å°è¯•ï¼Œä½“éªŒåŒå±‚ç»„ä»¶çš„æ¸²æŸ“æ•ˆæœã€‚é¦–å…ˆåœ¨HTMLæ–‡ä»¶ä¸­è¡¥å……ä¸‹é¢çš„JSä»£ç ï¼š 1234567891011121314151617181920212223&lt;script&gt; function insertNativeComponents() &#123; var ct = document.getElementsByClassName(\"native\")[0]; var id = ct.getAttribute(\"id\"); var frame = ct.getBoundingClientRect(); var args = &#123; \"frame\": &#123; \"y\": frame.top, \"x\": frame.left, \"width\": frame.width, \"height\": frame.height &#125;, \"id\": id &#125;; return args &#125; setTimeout(()=&gt;&#123; window.webkit.messageHandlers.nativeViewHandler.postMessage(&#123; \"command\": \"nativeViewInsert\", \"args\": insertNativeComponents() &#125;); &#125;, 1000);&lt;/script&gt; ä¸Šé¢çš„insertNativeComponentså‡½æ•°ç”¨æ¥æ‰¾åˆ°è¦æ’å…¥åŸç”Ÿç»„ä»¶çš„æ’æ§½ï¼Œå°†å…¶idç­‰ä¿¡æ¯ä¼ é€’ç»™åŸç”Ÿç«¯ï¼Œæˆ‘ä»¬è¿™é‡Œä¸ºäº†æ¼”ç¤ºæ–¹ä¾¿ï¼Œåªä¼ é€’äº†å¾ˆå°‘çš„æ•°æ®ï¼Œå®é™…ä¸Šå¯ä»¥æ ¹æ®ç»„ä»¶çš„éœ€æ±‚å‘åŸç”Ÿç«¯ä¼ é€’éå¸¸ä¸°å¯Œçš„æ•°æ®ï¼ŒåŸç”Ÿç«¯æ ¹æ®è¿™äº›å‚æ•°æ¥æ¸²æŸ“å’Œè®¾ç½®åŸç”Ÿç»„ä»¶ã€‚ åœ¨åŸç”Ÿç«¯ï¼Œéœ€è¦å¯¹WKWebViewæ³¨å†Œä¸€ä¸ªJSäº¤äº’handleï¼Œå¦‚ä¸‹ï¼š 1[_webView.configuration.userContentController addScriptMessageHandler:self name:@\"nativeViewHandler\"]; å¯¹åº”çš„ï¼Œå®ç°åè®®æ–¹æ³•å¦‚ä¸‹ï¼š 123- (void)userContentController:(WKUserContentController *)userContentController didReceiveScriptMessage:(WKScriptMessage *)message &#123; [self insertNativeView:message];&#125; æ ¸å¿ƒçš„é€»è¾‘æ–¹æ³•æ˜¯inserNativeViewï¼Œè¿™ä¸ªæ–¹æ³•ä¸­è¦å®ç°å¯¹JSäº¤äº’æŒ‡ä»¤çš„è§£æï¼Œä»¥åŠåŸç”Ÿç»„ä»¶çš„åˆ›å»ºï¼Œæ’æ§½å®¹å™¨çš„å¯»æ‰¾ç­‰ï¼Œå¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031- (void)insertNativeView:(WKScriptMessage *)message &#123; NSDictionary *params = message.body[@\"args\"]; NSLog(@\"%@\", params); // è¿™é‡Œåˆ›å»ºä¸€ä¸ªUILabel åšæ¼”ç¤º UIView *v = [self findView:self.webView str:@\"\" ids:params[@\"id\"]]; UIView *c = [[UIView alloc] initWithFrame:v.bounds]; UILabel *l = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, v.frame.size.width, 100)]; l.backgroundColor = UIColor.orangeColor; l.font = [UIFont systemFontOfSize:40]; l.text = [NSString stringWithFormat:@\"ç»„ä»¶IDä¸ºï¼š%@çš„åŸç”ŸåŒå±‚ç»„ä»¶\", params[@\"id\"]]; l.textAlignment = NSTextAlignmentCenter; [c addSubview:l]; UIButton *button = [UIButton buttonWithType:UIButtonTypeSystem]; [button setTitle:@\"æŒ‰é’®\" forState:UIControlStateNormal]; [button setTitleColor:UIColor.whiteColor forState:UIControlStateNormal]; button.frame = CGRectMake(0, 200, v.frame.size.width, 100); button.titleLabel.font = [UIFont systemFontOfSize:40]; [c addSubview:button]; if (v) &#123; // æŸ¥ç›®æ ‡å®¹å™¨ for (UIView *sub in v.subviews) &#123; if ([sub isKindOfClass:NSClassFromString(@\"WKChildScrollView\")]) &#123; c.frame = sub.bounds; [sub addSubview:c]; &#125; &#125; &#125;&#125; ä¸Šé¢æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªUILabelå’ŒUIButtonçš„åŸç”Ÿç»„ä»¶åšç¤ºä¾‹ï¼Œæ’æ§½ä½ç½®çš„å¯»æ‰¾å¯ä»¥é‡‡ç”¨é€’å½’çš„æ–¹å¼ï¼Œå¦‚ä¸‹ï¼š 1234567891011121314151617- (UIView *)findView:(UIView *)root str:(NSString *)pre ids:(NSString *)ids &#123; if (!root) &#123; return nil; &#125; NSLog(@\"%@%@,%@\",pre ,root.class, root.layer.name); if ([root.layer.name containsString:[NSString stringWithFormat:@\"id='%@'\", ids]]) &#123; return root; &#125; for (UIView *v in root.subviews) &#123; UIView *res = [self findView:v str:[NSString stringWithFormat:@\"%@ - \", pre] ids: ids]; if (res) &#123; return res; &#125; &#125; return nil;&#125; æˆ‘ä»¬ä»JSäº¤äº’å‘½ä»¤å¯ä»¥æ‹¿åˆ°è¦æ’å…¥åŸç”Ÿç»„ä»¶çš„å®¹å™¨idï¼ŒWKWebViewåœ¨åˆ›å»ºWKCompositingViewæ—¶ï¼Œå…¶Layerçš„nameä¼šåŒ…å«idä¿¡æ¯ï¼Œè¿™ä»æ‰“å°çš„ä¿¡æ¯ä¸Šå¯ä»¥æ¸…æ¥šçš„çœ‹åˆ°ï¼Œå¦‚ä¸‹å›¾ï¼š æˆ‘ä»¬èƒ½æ‰¾åˆ°å¯¹åº”çš„å®¹å™¨ï¼Œå°±æ˜¯é è¿™ä¸ªLayerçš„nameå±æ€§ã€‚ç°åœ¨ä½ å¯ä»¥å°è¯•è¿è¡Œä¸‹é¡¹ç›®ï¼Œæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¯ä»¥çœ‹åˆ°ï¼ŒåŸç”Ÿç»„ä»¶å·²ç»æ­£å¸¸æ¸²æŸ“åˆ°äº†WebViewä¸­ï¼Œä¸”å±‚çº§æ˜¯å—CSSæ§åˆ¶çš„ï¼Œå…¶ä¼šå‡ºç°åœ¨Webå¼¹çª—ç»„ä»¶ä¹‹ä¸‹ã€‚ å›› äº¤äº’åŸç”Ÿç»„ä»¶æ¸²æŸ“æˆåŠŸäº†ï¼Œå¹¶éå®Œäº‹å¤§å‰ï¼Œå¦‚æœä½ ä¸ºæŒ‰é’®å¢åŠ äº†ç‚¹å‡»äº‹ä»¶ï¼Œä¼šå‘ç°å…¶å¹¶ä¸ä¼šè§¦å‘ï¼Œè¿™æ˜¯å› ä¸ºWebViewå°†äº‹ä»¶éƒ½è¿›è¡Œäº†æ‹¦æˆªã€‚è¦å¤„ç†äº¤äº’é—®é¢˜ä¹Ÿéå¸¸ç®€å•ï¼Œé¦–å…ˆéœ€è¦å…ˆå…³é—­WebViewçš„æ‹¦æˆªï¼Œåœ¨WebViewåŠ è½½å®Œæˆåï¼Œä½¿ç”¨å¦‚ä¸‹ä»£ç æ¥æ‰¾åˆ°WKContentViewï¼Œå¹¶å°†å…¶æ‰‹åŠ¿æ‹¦æˆªå…³é—­ï¼š 12345678910111213- (void)handleGestrues &#123; UIScrollView *webViewScrollView = self.webView.scrollView; if ([webViewScrollView isKindOfClass:NSClassFromString(@\"WKScrollView\")]) &#123; UIView *_WKContentView = webViewScrollView.subviews.firstObject; if (![_WKContentView isKindOfClass:NSClassFromString(@\"WKContentView\")]) return; NSArray *gestrues = _WKContentView.gestureRecognizers; for (UIGestureRecognizer *gesture in gestrues) &#123; gesture.cancelsTouchesInView = NO; gesture.delaysTouchesBegan = NO; gesture.delaysTouchesEnded = NO; &#125; &#125;&#125; éœ€è¦æ³¨æ„ï¼Œè¿™ä¸ªæ–¹æ³•çš„è°ƒç”¨è¦åœ¨WebViewåŠ è½½å®Œæˆåã€‚å¦å¤–ï¼Œæˆ‘ä»¬éœ€è¦å°†åŸç”Ÿç»„ä»¶çš„å®¹å™¨ç»„ä»¶åšäº›ä¿®æ”¹ï¼Œä¾‹å¦‚æ–°å»ºä¸€ä¸ªContainerViewç±»ï¼Œå¦‚ä¸‹ï¼š 1234567891011121314@interface ContainerView : UIView@end@implementation ContainerView- (BOOL)conformsToProtocol:(Protocol *)aProtocol &#123; if (aProtocol == NSProtocolFromString(@\"WKNativelyInteractible\")) &#123; return YES; &#125; return [super conformsToProtocol:aProtocol];&#125;@end ä¹‹åï¼Œå°†æ­¤Viewä½œä¸ºåŸç”Ÿç»„ä»¶çš„å®¹å™¨ï¼Œæ¸²æŸ“åˆ°WebViewä¸­ï¼Œå³å¯å®ç°åŸç”Ÿç»„ä»¶çš„äº‹ä»¶äº¤äº’ã€‚ äº” éšæƒ³æœ¬æ–‡ä»åŸç†å‡ºå‘ï¼Œä»‹ç»äº†WebåŒå±‚ç»„ä»¶åœ¨iOSç«¯çš„å®ç°æ–¹å¼ã€‚ç›¸æ¯”ç›´æ¥ä½¿ç”¨åŸç”Ÿç»„ä»¶ï¼ŒåŒå±‚ç»„ä»¶çš„å¥½å¤„æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼Œå…¶æ—¢æ‹¥æœ‰äº†åŸç”Ÿç»„ä»¶å¼ºå¤§çš„èƒ½åŠ›ï¼Œåˆå¯ä»¥è¢«å¤§éƒ¨åˆ†CSSå±æ€§è¿›è¡Œå½±å“ï¼Œæ–¹ä¾¿å±‚çº§å’Œç»„ä»¶é—´ä½ç½®æ§åˆ¶ã€‚æœ¬æ–‡ä¸­ä¹Ÿå®ç°äº†ä¸€ä¸ªç®€å•çš„Demoæ¥æ¼”ç¤ºåŒå±‚ç»„ä»¶ï¼ŒDemoéå¸¸æ¡æ¼ï¼Œå¸Œæœ›èµ·åˆ°æŠ›ç –å¼•ç‰ï¼Œå¸®åŠ©ä½ æ‰“å¼€åˆ›æ–°çš„æ€è·¯ã€‚ä¸‹é¢æ˜¯ä¸€äº›å»ºè®®ï¼Œæœ‰å…´è¶£ä½ å¯ä»¥å°è¯•ä¸‹åœ¨iOSç«¯å®ç°ä¸€å¥—å®Œæ•´çš„åŒå±‚ç»„ä»¶æ¸²æŸ“æ¡†æ¶ã€‚ JSä¸åŸç”Ÿçš„äº¤äº’å‘½ä»¤å¯ä»¥å®šåˆ¶ä¸€å¥—å®Œæ•´çš„åè®®ï¼Œå¦‚ç»„ä»¶æ’å…¥ï¼Œç»„ä»¶æ›´æ–°ï¼Œç»„ä»¶åˆ é™¤ç­‰ã€‚ ä¼ é€’çš„æ•°æ®å¯ä»¥å®šä¹‰çš„å®Œæ•´ä¸°å¯Œï¼Œä¾‹å¦‚è¦æ’å…¥çš„ç»„ä»¶ç±»å‹ï¼Œå¯èƒ½æ˜¯è§†é¢‘ï¼ŒéŸ³é¢‘ï¼Œåœ°å›¾ç­‰ï¼Œå„ç§ç»„ä»¶åœ¨åŸç”Ÿç«¯çš„å±æ€§é…ç½®ç­‰æ˜ å°„ã€‚ åŸç”Ÿç«¯çš„äº¤äº’ä¸æ›´æ–°è¡Œä¸ºä¹Ÿéœ€è¦é€šè¿‡JSä¼ é€’åˆ°Webã€‚ åŸç”Ÿç«¯å¯èƒ½éœ€è¦ä¸€ä¸ªå®¹å™¨æ± æ¥ç»´æŠ¤è¢«æ’å…¥çš„åŒå±‚ç»„ä»¶ï¼Œæ–¹ä¾¿é€šè¿‡idå¯»æ‰¾æ¥è¿›è¡Œæ›´æ–°ç­‰ã€‚ æŸäº›CSSå±æ€§å¯¹äºåŒå±‚ç»„ä»¶å¯èƒ½å¹¶ä¸èƒ½ç”Ÿæ•ˆï¼Œä¹Ÿæ˜¯éœ€è¦é€šè¿‡JSä¼ é€’æ•°æ®åˆ°åŸç”Ÿç«¯å¤„ç†ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œæ‡‚çš„çƒ­çˆ±ï¼Œæ„¿æ„åˆ†äº«ï¼Œåšä¸ªæœ‹å‹ QQï¼š316045346","categories":[{"name":"iOSä¹‹é€»è¾‘åˆçª¥","slug":"iOSä¹‹é€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSä¹‹é€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSä¹‹é€»è¾‘åˆçª¥","slug":"iOSä¹‹é€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSä¹‹é€»è¾‘åˆçª¥/"}]},{"title":"åœ¨iOSä¸­ä½¿ç”¨NSURLProtocolè¿›è¡Œç½‘ç»œä»£ç†","slug":"453åœ¨iOSä¸­ä½¿ç”¨NSURLProtocolè¿›è¡Œç½‘ç»œä»£ç†","date":"2022-11-26T16:00:00.000Z","updated":"2022-11-27T11:00:20.307Z","comments":true,"path":"2022/11/27/453åœ¨iOSä¸­ä½¿ç”¨NSURLProtocolè¿›è¡Œç½‘ç»œä»£ç†/","link":"","permalink":"http://huishao.cc/2022/11/27/453åœ¨iOSä¸­ä½¿ç”¨NSURLProtocolè¿›è¡Œç½‘ç»œä»£ç†/","excerpt":"","text":"åœ¨iOSä¸­ä½¿ç”¨NSURLProtocolè¿›è¡Œç½‘ç»œä»£ç†ä¸€ å¼•è¨€ç½‘ç»œèƒ½åŠ›æ˜¯äº’è”ç½‘åº”ç”¨ç¨‹åºå¿…ä¸å¯å°‘çš„åŠŸèƒ½ã€‚éšç€åº”ç”¨ç¨‹åºçš„å¤æ‚ï¼Œå¯¹ç½‘ç»œçš„ä¾èµ–æ€§ä¹Ÿä¼šé€æ¸å¢é«˜ã€‚å¦‚ä½•ç»Ÿä¸€çš„å¤„ç†è¯·æ±‚å¤´ï¼Œç»Ÿä¸€çš„å¤„ç†å›æ‰§æ•°æ®ï¼Œç»Ÿä¸€çš„è¿›è¡Œç½‘ç»œè¯·æ±‚è¿‡ç¨‹çš„ç›‘æ§å’Œä¿®æ”¹ç­‰éƒ½æ˜¯å¼€å‘è€…è¦è€ƒè™‘çš„å¤„ç†çš„é—®é¢˜ã€‚ é€šå¸¸ï¼Œå¯¹äºæ–°é¡¹ç›®ï¼Œæˆ‘ä»¬ä¼šç»Ÿä¸€å°è£…ç½‘ç»œæ¡†æ¶åœ¨å¤„ç†åº”ç”¨ä¸­çš„è¯·æ±‚ï¼Œæ•´ä¸ªç½‘ç»œçš„å‘èµ·å’Œæ”¶åˆ°å›æ‰§çš„è¿‡ç¨‹éƒ½å¯ä»¥å¾ˆå¥½çš„åœ¨åº•å±‚çš„æ¡†æ¶ä¸­è¿›è¡Œç›‘æ§å’Œæ•°æ®å¤„ç†ã€‚ä½†æ˜¯è¿™ç§æ–¹å¼å¯¹äºç½‘ç»œè¯·æ±‚ä¸ç»Ÿä¸€çš„è€é¡¹ç›®å¯èƒ½æˆæœ¬è¾ƒé«˜ï¼Œè¦ç»Ÿä¸€çš„ä¿®æ”¹ç½‘ç»œæ¡†æ¶ï¼Œä¸”å¯¹äºWebViewä¸­çš„ç½‘ç»œè¯·æ±‚ä¹Ÿéœ€è¦å•ç‹¬å¤„ç†ï¼Œæ¯”è¾ƒç¹çã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œä¸å¦¨è¯•ä¸€è¯•Foundationæ¡†æ¶ä¸­è‡ªå¸¦çš„NSURLProtocolæ¥è¿›è¡Œç½‘ç»œä»£ç†ï¼Œå®Œå…¨æ— ä¾µå…¥çš„å®ç°ç½‘ç»œå…¨è¿‡ç¨‹çš„ç›‘æ§å’Œä¿®æ”¹å¤„ç†ã€‚ äºŒ ç‰›åˆ€å°è¯•åœ¨ç³»ç»Ÿçš„ä»‹ç»NSURLProtocolä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥é€šè¿‡ä¸€ä¸ªå°ä¾‹å­ä½“éªŒä¸‹å…¶ä½¿ç”¨è¿‡ç¨‹ã€‚ é¦–å…ˆï¼ŒNSURLProtocolè™½ç„¶åå­—ä¸­æœ‰Protocolï¼Œä½†æ˜¯å®ƒå¹¶ä¸æ˜¯ä¸€ä¸ªåè®®ï¼Œå…¶æ˜¯ç»§æ‰¿äºNSObjectçš„ç±»ã€‚å…¶æ¬¡ï¼Œè™½ç„¶å…¶å®ä¸€ä¸ªç»§æ‰¿ä¸ºNSObejctçš„ç±»ï¼Œä½†å®ƒæ›´åƒæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œæˆ‘ä»¬ä¸ä¼šç›´æ¥æ‹¿è¿™ä¸ªç±»è¿›è¡Œä½¿ç”¨ï¼Œè€Œæ˜¯ä¼šé€šè¿‡å­ç±»çš„æ–¹å¼æ¥å®ç°å®ƒï¼Œå¹¶ä¸”å…¶å†…çš„å¾ˆå¤šæ–¹æ³•ä¹Ÿéƒ½æ˜¯æŠ½è±¡çš„ï¼Œå¿…é¡»ç”±å­ç±»æ¥å®ç°ã€‚ æˆ‘ä»¬æ–°å»ºä¸€ä¸ªæµ‹è¯•å·¥ç¨‹ï¼Œå…ˆå®ç°ä¸€ä¸ªç®€å•çš„GETè¯·æ±‚ï¼Œå¦‚ä¸‹ï¼š 12345NSURL *url = [NSURL URLWithString: @\"https://www.baidu.com\"];[[[NSURLSession sharedSession] dataTaskWithURL:url completionHandler:^(NSData * _Nullable data, NSURLResponse * _Nullable response, NSError * _Nullable error) &#123; NSLog(@\"%@\", response);&#125;] resume] ; è¿è¡Œä»£ç ï¼Œé€šè¿‡æ§åˆ¶å°çš„è¾“å‡ºï¼Œå¯ä»¥çœ‹åˆ°èƒ½å¤Ÿæ­£å¸¸çš„è·å–åˆ°å›æ‰§æ•°æ®ã€‚ æ–°å»ºä¸€ä¸ªå‘½åä¸ºNetworkProtoclçš„ç±»ï¼Œä½¿å…¶ç»§æ‰¿è‡ªNSURLProtocolï¼Œå®ç°å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041#import \"NetworkProtcol.h\"@implementation NetworkProtcol// ç½‘ç»œè¯·æ±‚çš„ä»£ç†éœ€è¦æ³¨å†Œï¼Œåœ¨loadæ–¹æ³•ä¸­è¿›è¡Œæ³¨å†Œ+ (void)load &#123; [NSURLProtocol registerClass:self];&#125;// 1. è¿™ä¸ªæ–¹æ³•æ˜¯ç¬¬ä¸€æ­¥ï¼Œéœ€è¦åˆ¤æ–­æ˜¯å¦è¦æ‹¦æˆªå½“å‰çš„è¯·+ (BOOL)canInitWithRequest:(NSURLRequest *)request &#123; NSLog(@\"canInitWithRequest: %@\", request.URL.absoluteString); // æ ¹æ®æ ‡è®°åˆ¤æ–­ï¼Œå¦‚æœå¤„ç†è¿‡äº†å°±ä¸å†æ‹¦æˆªäº† if ([self propertyForKey:@\"Handle\" inRequest:request]) &#123; return false; &#125; return YES;&#125;// 2. å¤„ç†è¯·æ±‚ï¼Œè¿™é‡Œå¯ä»¥è¿”å›ä¸€ä¸ªæ–°çš„Requestå¯¹è±¡ï¼Œå¯ä»¥å¯¹åŸRequestè¿›è¡Œä¿®æ”¹+ (NSURLRequest *)canonicalRequestForRequest:(NSURLRequest *)request &#123; NSLog(@\"canonicalRequestForRequest: %@\", request.URL.absoluteString); return request;&#125;// 3. è¿™ä¸ªæ–¹æ³•å¤„ç†æ‹¦æˆªåçš„è¡Œä¸ºï¼Œå¯ä»¥åšæ•°æ®ä¿®æ”¹ï¼Œæœ¬åœ°mockæˆ–è¯·æ±‚å…¶ä»–æ¥å£- (void)startLoading &#123; NSLog(@\"startLoading\"); [NSURLProtocol setProperty:@YES forKey:@\"Handle\" inRequest:self.request]; [[[NSURLSession sharedSession] dataTaskWithRequest:self.request completionHandler:^(NSData * _Nullable data, NSURLResponse * _Nullable response, NSError * _Nullable error) &#123; [self.client URLProtocol:self didReceiveResponse:response cacheStoragePolicy:NSURLCacheStorageAllowed]; [self.client URLProtocolDidFinishLoading:self]; &#125;] resume];&#125;// æ•´ä¸ªä»£ç†è¡Œä¸ºç»“æŸå›è°ƒ- (void)stopLoading &#123; NSLog(@\"stopLoading\");&#125;@end å†æ¬¡è¿è¡Œï¼Œé€šè¿‡æ§åˆ¶å°çš„æ‰“å°ï¼Œå¯ä»¥çœ‹åˆ°ç½‘ç»œä»£ç†å·²ç»å¯ä»¥æ­£å¸¸çš„å·¥ä½œï¼Œå¦‚ä¸Šé¢çš„ç¤ºä¾‹ä»£ç æ‰€ç¤ºï¼Œæ•´ä¸ªä»£ç†è¿‡ç¨‹æœ€é‡è¦çš„å³æ˜¯ä¸‰æ­¥ï¼š 1. åˆ¤æ–­æŸä¸ªè¯·æ±‚æ˜¯å¦è¦è¿›è¡Œä»£ç†æ‹¦æˆªã€‚ 2. å¤„ç†è¯·æ±‚ï¼Œå¯ä»¥è¿›è¡Œä¿®æ”¹ã€‚ 3. æ‰§è¡ŒçœŸæ­£çš„æ‹¦æˆªè¡Œä¸ºï¼Œå¹¶é€šè¿‡å›è°ƒæ¥è¿”å›ç»“æœç»™åŸè¯·æ±‚æ–¹ã€‚ ä¸‰ NSURLProtocolè¯¦è§£NSURLProtocolæœ¬èº«æ¯”è¾ƒç®€å•ï¼Œå…¶æš´éœ²çš„æ¥å£å’Œå±æ€§ä¹Ÿæ¯”è¾ƒç®€æ´ï¼Œè§£é‡Šå¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647@interface NSURLProtocol : NSObject// åˆå§‹åŒ–æ–¹æ³•- (instancetype)initWithRequest:(NSURLRequest *)request cachedResponse:(nullable NSCachedURLResponse *)cachedResponse client:(nullable id &lt;NSURLProtocolClient&gt;)client;- (instancetype)initWithTask:(NSURLSessionTask *)task cachedResponse:(nullable NSCachedURLResponse *)cachedResponse client:(nullable id &lt;NSURLProtocolClient&gt;)client;// SessionTaskå¯¹è±¡@property (nullable, readonly, copy) NSURLSessionTask *task// å®¢æˆ·ç«¯å¯¹è±¡ï¼Œç”¨æ¥å›è°ƒåŸè¯·æ±‚æ–¹@property (nullable, readonly, retain) id &lt;NSURLProtocolClient&gt; client;// å½“å‰å¤„ç†çš„è¯·æ±‚å¯¹è±¡@property (readonly, copy) NSURLRequest *request;// Responseç¼“å­˜@property (nullable, readonly, copy) NSCachedURLResponse *cachedResponse;// è¿™ä¸ªæ–¹æ³•å¿…é¡»å­ç±»å®ç°ï¼Œç”¨æ¥åˆ¤æ–­æ˜¯å¦è¦æ‹¦æˆªæŸä¸ªè¯·æ±‚+ (BOOL)canInitWithRequest:(NSURLRequest *)request;+ (BOOL)canInitWithTask:(NSURLSessionTask *)task;// è¿™ä¸ªæ–¹æ³•å¿…é¡»å­ç±»å®ç°ï¼Œç”¨æ¥å¯¹è¯·æ±‚è¿›è¡Œä¿®æ”¹+ (NSURLRequest *)canonicalRequestForRequest:(NSURLRequest *)request;// è¿™ä¸ªæ–¹æ³•ç”¨æ¥åˆ¤æ–­æ˜¯å¦è¦ä½¿ç”¨ç¼“å­˜è¯·æ±‚ï¼Œåˆ¤æ–­è¦è¿›è¡Œçš„è¯·æ±‚ä¸ç¼“å­˜çš„æ˜¯å¦ç›¸åŒ+ (BOOL)requestIsCacheEquivalent:(NSURLRequest *)a toRequest:(NSURLRequest *)b;// å¼€å§‹æ‹¦æˆªè¡Œä¸º- (void)startLoading;// æ•´ä¸ªæ‹¦æˆªè¡Œä¸ºç»“æŸ- (void)stopLoading;// ç”¨æ¥ç»™æŸä¸ªè¯·æ±‚æ‰“æ ‡ç­¾ï¼Œå¯ä»¥é˜²æ­¢è¯·æ±‚æ‹¦æˆªå‡ºç°é€’å½’+ (void)setProperty:(id)value forKey:(NSString *)key inRequest:(NSMutableURLRequest *)request;// è·å–æ ‡ç­¾+ (nullable id)propertyForKey:(NSString *)key inRequest:(NSURLRequest *)request;// åˆ é™¤æ ‡ç­¾+ (void)removePropertyForKey:(NSString *)key inRequest:(NSMutableURLRequest *)request;// æ³¨å†Œç½‘ç»œä»£ç†ç±»+ (BOOL)registerClass:(Class)protocolClass;// æ³¨é”€æ³¨å†Œçš„ä»£ç†+ (void)unregisterClass:(Class)protocolClass;@end å…¶ä¸­ï¼Œclientå±æ€§ç”¨æ¥ä¸åŸè¯·æ±‚æ–¹äº¤äº’ï¼Œå…¶åè®®çš„æ–¹æ³•å¦‚ä¸‹ï¼š 1234567891011121314151617181920@protocol NSURLProtocolClient &lt;NSObject&gt;// è§¦å‘å®¢æˆ·ç«¯çš„é‡å®šå‘å›è°ƒ- (void)URLProtocol:(NSURLProtocol *)protocol wasRedirectedToRequest:(NSURLRequest *)request redirectResponse:(NSURLResponse *)redirectResponse;// è§¦å‘å®¢æˆ·ç«¯çš„ç¼“å­˜æœ‰æ•ˆæ€§å›è°ƒ- (void)URLProtocol:(NSURLProtocol *)protocol cachedResponseIsValid:(NSCachedURLResponse *)cachedResponse;// è§¦å‘å®¢æˆ·ç«¯çš„æ¥æ”¶å›æ‰§å›è°ƒ- (void)URLProtocol:(NSURLProtocol *)protocol didReceiveResponse:(NSURLResponse *)response cacheStoragePolicy:(NSURLCacheStoragePolicy)policy;// è§¦å‘å®¢æˆ·ç«¯çš„æ¥æ”¶æ•°æ®å›è°ƒ- (void)URLProtocol:(NSURLProtocol *)protocol didLoadData:(NSData *)data;// è§¦å‘å®¢æˆ·ç«¯çš„è¯·æ±‚å®Œæˆå›è°ƒ- (void)URLProtocolDidFinishLoading:(NSURLProtocol *)protocol;// è§¦å‘å®¢æˆ·ç«¯çš„è¯·æ±‚å¤±è´¥å›è°ƒ- (void)URLProtocol:(NSURLProtocol *)protocol didFailWithError:(NSError *)error;// è§¦å‘å®¢æˆ·ç«¯çš„ç”¨æˆ·è®¤è¯å›è°ƒ- (void)URLProtocol:(NSURLProtocol *)protocol didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge;// è§¦å‘å®¢æˆ·ç«¯çš„å–æ¶ˆç”¨æˆ·è®¤è¯å›è°ƒ- (void)URLProtocol:(NSURLProtocol *)protocol didCancelAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge;@end å›› å¯¹ç½‘é¡µè§†å›¾çš„ç½‘ç»œè¯·æ±‚è¿›è¡Œæ‹¦æˆªå¦‚æœæ˜¯ä½¿ç”¨UIWebViewåŠ è½½ç½‘é¡µï¼Œåˆ™NSURLProtocolé»˜è®¤æ”¯æŒæ‹¦æˆªï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879#import \"NetworkProtcol.h\"@interface NetworkProtcol ()&lt;NSURLSessionDelegate&gt;@property (atomic,strong,readwrite) NSURLSessionDataTask *task;@property (nonatomic,strong) NSURLSession *session;@end@implementation NetworkProtcol+ (void)load &#123; [NSURLProtocol registerClass:self];&#125;+ (BOOL)canInitWithRequest:(NSURLRequest *)request&#123; //åªå¤„ç†httpå’Œhttpsè¯·æ±‚ NSString *scheme = [[request URL] scheme]; if ( ([scheme caseInsensitiveCompare:@\"http\"] == NSOrderedSame || [scheme caseInsensitiveCompare:@\"https\"] == NSOrderedSame)) &#123; //çœ‹çœ‹æ˜¯å¦å·²ç»å¤„ç†è¿‡äº†ï¼Œé˜²æ­¢æ— é™å¾ªç¯ if ([NSURLProtocol propertyForKey:@\"Handle\" inRequest:request]) &#123; return NO; &#125; return YES; &#125; return NO;&#125;+ (NSURLRequest *) canonicalRequestForRequest:(NSURLRequest *)request &#123; return request;&#125;- (void)startLoading&#123; NSMutableURLRequest *mutableReqeust = [[self request] mutableCopy]; //æ‰“æ ‡ç­¾ï¼Œé˜²æ­¢æ— é™å¾ªç¯ [NSURLProtocol setProperty:@YES forKey:@\"Handle\" inRequest:mutableReqeust]; NSURLSessionConfiguration *configure = [NSURLSessionConfiguration defaultSessionConfiguration]; NSOperationQueue *queue = [[NSOperationQueue alloc] init]; self.session = [NSURLSession sessionWithConfiguration:configure delegate:self delegateQueue:queue]; self.task = [self.session dataTaskWithRequest:mutableReqeust]; [self.task resume];&#125;- (void)stopLoading&#123; [self.session invalidateAndCancel]; self.session = nil;&#125;- (void)URLSession:(NSURLSession *)session task:(NSURLSessionTask *)task didCompleteWithError:(NSError *)error&#123; if (error != nil) &#123; [self.client URLProtocol:self didFailWithError:error]; &#125;else &#123; [self.client URLProtocolDidFinishLoading:self]; &#125;&#125;- (void)URLSession:(NSURLSession *)session dataTask:(NSURLSessionDataTask *)dataTaskdidReceiveResponse:(NSURLResponse *)response completionHandler:(void (^)(NSURLSessionResponseDisposition disposition))completionHandler&#123; [self.client URLProtocol:self didReceiveResponse:response cacheStoragePolicy:NSURLCacheStorageNotAllowed]; completionHandler(NSURLSessionResponseAllow);&#125;- (void)URLSession:(NSURLSession *)session dataTask:(NSURLSessionDataTask *)dataTask didReceiveData:(NSData *)data&#123; [self.client URLProtocol:self didLoadData:data];&#125;@end å¦‚æœä½¿ç”¨çš„æ˜¯WKWebViewï¼Œåˆ™æ— æ³•ç›´æ¥è¢«æ‹¦æˆªï¼Œéœ€è¦åšå¦‚ä¸‹çš„é¢å¤–å¤„ç†ï¼š 12345678910111213Class cls = [[[WKWebView new] valueForKey:@\"browsingContextController\"] class];SEL sel = NSSelectorFromString(@\"registerSchemeForCustomProtocol:\");if ([cls respondsToSelector:sel]) &#123; // é€šè¿‡ http å’Œ https çš„è¯·æ±‚ï¼ŒåŒç†å¯é€šè¿‡å…¶ä»–çš„ Scheme ä½†æ˜¯è¦æ»¡è¶³ URL Loading System [cls performSelector:sel withObject:@\"http\"]; [cls performSelector:sel withObject:@\"https\"];&#125;WKWebView *web = [[WKWebView alloc] initWithFrame:self.view.frame];[self.view addSubview:web];NSURL *url = [NSURL URLWithString: @\"https://www.baidu.com\"];[web loadRequest:[NSURLRequest requestWithURL:url]]; éœ€è¦æ³¨æ„ï¼Œè¿™é‡Œä¼šæ¶‰åŠåˆ°ä¸€äº›ç§æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œå¯èƒ½ä¼šå­˜åœ¨æå®¡é£é™©ã€‚ äº” ä¸€äº›æ€è€ƒNSURLProtocolçš„ä½¿ç”¨éå¸¸ç®€å•ï¼Œä½†æ˜¯å¯ä»¥åšçš„äº‹æƒ…å´å¹¶ä¸å°‘ã€‚ä¾‹å¦‚æˆ‘ä»¬å¯ä»¥ç”¨å…¶æ¥åšç»Ÿä¸€çš„ç½‘ç»œå¤„ç†ï¼Œæ¥åšæ— ä¾µå…¥çš„ç½‘ç»œç›‘æ§ç­‰ã€‚ ä½œä¸ºåº•å±‚å·¥å…·ï¼Œç»Ÿä¸€çš„ä¸ºRequestæ·»åŠ é€šç”¨Headerå­—æ®µã€‚ ç»Ÿä¸€çš„è¿›è¡Œè‡ªå®šä¹‰ç”¨æˆ·è®¤è¯ã€‚ åšä¸ºç¯å¢ƒåˆ‡æ¢å·¥å…·ï¼Œæ ¹æ®ç¯å¢ƒåšURLçš„æ˜ å°„ã€‚ è¯·æ±‚å‚æ•°çš„æ•´ç†å’Œä¿®æ”¹ï¼Œç»Ÿä¸€å¢åŠ é€šç”¨å‚æ•°ã€‚ ç»Ÿä¸€ä¿®æ”¹æˆ–å¢åŠ Response Headeræ•°æ®ã€‚ æ ¹æ®éœ€æ±‚ï¼Œåšä¸ºæœ¬åœ°çš„Mockå·¥å…·ï¼Œè®¿é—®åˆ°æœ¬åœ°æœåŠ¡æˆ–Mockè¿œç¨‹æ•°æ®ã€‚ ç›‘æ§ç«¯åˆ°ç«¯çš„ç½‘ç»œè¯·æ±‚æ€§èƒ½ï¼Œè¿›è¡Œæ—¶é—´ç»Ÿè®¡ã€‚ ç­‰ç­‰â€¦ ä¸“æ³¨æŠ€æœ¯ï¼Œæ‡‚çš„çƒ­çˆ±ï¼Œæ„¿æ„åˆ†äº«ï¼Œåšä¸ªæœ‹å‹ QQï¼š316045346","categories":[{"name":"iOSä¹‹é€»è¾‘åˆçª¥","slug":"iOSä¹‹é€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSä¹‹é€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSä¹‹é€»è¾‘åˆçª¥","slug":"iOSä¹‹é€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSä¹‹é€»è¾‘åˆçª¥/"}]},{"title":"å¯¹Swiftä¸­someå’Œanyå…³é”®å­—çš„ç†è§£","slug":"452å¯¹Swiftä¸­someå’Œanyå…³é”®å­—çš„ç†è§£","date":"2022-10-30T16:00:00.000Z","updated":"2022-10-31T01:24:27.674Z","comments":true,"path":"2022/10/31/452å¯¹Swiftä¸­someå’Œanyå…³é”®å­—çš„ç†è§£/","link":"","permalink":"http://huishao.cc/2022/10/31/452å¯¹Swiftä¸­someå’Œanyå…³é”®å­—çš„ç†è§£/","excerpt":"","text":"å¯¹Swiftä¸­someå’Œanyå…³é”®å­—çš„ç†è§£åœ¨æœ€æ–°Swiftç‰ˆæœ¬ä¸­ï¼ˆXcode14,Swift5.7ï¼‰ï¼Œå¦‚æœåè®®ä¸­æœ‰ä½¿ç”¨æ³›å‹ï¼Œåˆ™å¦‚æœè¦å°†æ­¤åè®®ä½œä¸ºå‚æ•°ç±»å‹ï¼Œå¿…é¡»ä½¿ç”¨anyå…³é”®å­—è¿›è¡Œä¿®é¥°ã€‚å…¶å®åœ¨Swift5.1ä¸­ä¹Ÿå¼•å…¥è¿‡ä¸€ä¸ªsomeå…³é”®å­—ï¼Œanyå’Œsomeéƒ½é€‚ç”¨äºåè®®ï¼Œè¿™ä¸¤ä¸ªå…³é”®å­—ä»è¯­ä¹‰ä¸Šå’Œå†™æ³•ä¸Šå¯¹æ³›å‹çš„ä½¿ç”¨è¿›è¡Œäº†ä¼˜åŒ–ã€‚ 1. anyæˆ‘ä»¬çŸ¥é“ï¼Œåè®®ä¸­ä¼šè§„å®šä¸€äº›å±æ€§å’Œæ–¹æ³•ï¼Œç”¨æ¥çº¦æŸå…¶ä»–ç»“æ„çš„å®ç°ã€‚ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åè®®å®šä¹‰äº†ä¸€ä¸ªå¯é£è¡Œçš„å®ä¾‹éœ€è¦å®ç°çš„æ–¹æ³•å’Œå±æ€§ï¼Œå¦‚ä¸‹ï¼š 1234567891011121314151617protocol Fly &#123; var name:String &#123;get set&#125; func fly()&#125;class Bird:Fly &#123; var name = \"Bird\" func fly() &#123; print(name + \"Fly\") &#125;&#125;func test(f: Fly) &#123; f.fly()&#125;test(f: Bird()) è¿™ä¸ªç¨‹åºå½“å‰è¿è¡Œçš„å¾ˆå¥½ï¼Œè¯­ä¹‰ä¹Ÿå¾ˆæ˜ç¡®ï¼Œå³testçš„å‡½æ•°çš„å‚æ•°éœ€è¦æ˜¯å®ç°äº†Flyåè®®çš„ä»»æ„ç±»å‹ï¼Œå…¶å®åœ¨æ­¤ä¸­æƒ…å†µä¸‹ï¼Œè™½ç„¶åœ¨è°ƒç”¨æ˜¯æˆ‘ä»¬ä¼ å…¥çš„æ˜¯Birdå®ä¾‹ï¼Œä½†æ˜¯ç”±äºåè®®ç±»å‹çš„çº¦æŸè¾ƒå¼±ï¼Œåœ¨å‡½æ•°æ‰§è¡Œæ—¶ç¼–è¯‘å™¨ä¼šå°†å…¶è§£é‡Šæˆäº†Flyç±»å‹ï¼Œå®é™…ä¸Šäº§ç”Ÿäº†ç±»å‹ä¸¢å¤±ã€‚å°¤å…¶æ˜¯å½“åè®®ä¸­æœ‰ä½¿ç”¨æ³›å‹æ—¶ï¼Œæ­¤æ—¶ä¸Šé¢çš„å†™æ³•åœ¨æœ€æ–°çš„Xcodeç‰ˆæœ¬ä¸­ä¼šæç¤ºé”™è¯¯ï¼Œéœ€è¦æˆ‘ä»¬æ·»åŠ anyå…³é”®å­—ã€‚anyå…³é”®å­—çš„æ„ä¹‰å…¶å®å°±æ˜¯å®ç°ä¸Šè¿°çš„è¯­ä¹‰ï¼Œå°†å‚æ•°ç±»å‹å®šä¹‰ä¸ºéµå®ˆæŸä¸ªåè®®çš„ä»»æ„ç±»å‹ï¼Œå¦‚ä¸‹ï¼š 12345678910111213141516171819202122import Foundationprotocol Fly &#123; associatedtype T var name:T &#123;get set&#125; func fly()&#125;class Bird:Fly &#123; typealias T = String var name = \"Bird\" func fly() &#123; print(name + \"Fly\") &#125;&#125;func test(f: any Fly) &#123; f.fly()&#125;let f = test(f: Bird()) 2.someé’ˆå¯¹äºä¸Šé¢ä»£ç çš„åº”ç”¨åœºæ™¯ï¼Œæˆ‘ä»¬åªéœ€è¦çº¦æŸå‚æ•°çš„ç±»å‹æ˜¯éµå®ˆFlyåè®®çš„å³å¯ï¼Œä½†æ˜¯æœ‰æ—¶å€™è¿™å¹¶ä¸å¤Ÿï¼Œæœ‰æ—¶åè®®ä¸­çš„å‡½æ•°ä¼šéœ€è¦å¤šä¸ªå‚æ•°ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨æ³›å‹çº¦æŸå…¶å‚æ•°çš„ç±»å‹ä¸€è‡´ï¼Œä¾‹å¦‚ï¼š 12345678910111213141516171819202122232425262728import Foundationprotocol Fly &#123; associatedtype T var name:T &#123;get set&#125; func fly() func add(a:T, b:T)&#125;class Bird:Fly &#123; typealias T = String var name = \"Bird\" func fly() &#123; print(name + \"Fly\") &#125; func add(a: String, b: String) &#123; &#125;&#125;func test(f: any Fly) &#123; f.fly() // è¿™é‡Œä¼šæŠ¥é”™ å› ä¸ºany Flyç±»å‹åœ¨è¿è¡Œæ—¶æ— æ³•ç¡®å®šæˆæŸä¸ªå…·ä½“çš„ç±»å‹ f.add(a: f.name, b: f.name)&#125;test(f: Bird()) å¯ä»¥çœ‹åˆ°ï¼Œä¸Šé¢çš„ä»£ç ä¸­ï¼Œtestå‡½æ•°ä¼šæŠ¥é”™ï¼Œæ ¸å¿ƒçš„åŸå› åœ¨äºany Flyç±»å‹çš„è¯­éŸ³æ˜¯ä»»æ„å®ç°äº†Flyåè®®çš„ç±»å‹ï¼Œæ— è®ºæ˜¯ç¼–è¯‘æ—¶è¿˜æ˜¯è¿è¡Œæ—¶ï¼Œç¼–è¯‘å™¨éƒ½æ— æ³•æ¨å¯¼å‡ºæ­¤få‚æ•°çš„ç±»å‹ã€‚è¦è§£å†³ä¸Šé¢çš„é—®é¢˜ï¼Œå¯ä»¥é‡‡ç”¨æ³›å‹çš„æ–¹å¼æ¥æ”¹å†™ï¼Œå¦‚ä¸‹ï¼š 1234func test&lt;T:Fly&gt;(f: T) &#123; f.fly() f.add(a: f.name, b: f.name)&#125; æ­¤æ—¶ä»£ç åˆ™æ²¡æœ‰ä»»ä½•é—®é¢˜äº†ï¼Œsomeå…³é”®å­—å…¶å®ä¹Ÿæ˜¯ç”¨äºè¿™ä¸€ç§åœºæ™¯ï¼Œå…¶è¡¨ç¤ºçš„æ˜¯ä¸€ç§é€æ˜ç±»å‹ï¼Œåœ¨è¿è¡Œæ—¶ç¼–è¯‘å™¨çŸ¥é“å…¶å…·ä½“çš„ç±»å‹æ˜¯ä»€ä¹ˆï¼Œåªæ˜¯å¯¹è°ƒç”¨æ–¹æ¥è¯´æ˜¯æŠ½è±¡çš„ã€‚ä¸‹é¢çš„å†™æ³•ä¸ä¸Šé¢ä½¿ç”¨æ³›å‹çš„å†™æ³•ä½œç”¨å®Œå…¨ä¸€è‡´ï¼š 1234func test(f: some Fly) &#123; f.fly() f.add(a: f.name, b: f.name)&#125; æ•´ä½“çœ‹æ¥ï¼Œç›¸å¯¹ä¸æ³›å‹é‚£ç§å†™æ³•ï¼Œä½¿ç”¨someçš„å†™æ³•è¯­ä¹‰æ›´åŠ æ¸…æ™°ï¼Œé£æ ¼ä¸Šä¹Ÿä¸anyåˆšå¥½ä¸€è‡´ã€‚ æœ€åï¼Œæˆ‘ä»¬å†æ¥æ€»ç»“ä¸‹ï¼Œæ•´ä½“çœ‹æ¥ï¼Œanyå’Œsomeéƒ½æ˜¯ç”¨æ¥æè¿°è¯­ä¹‰çš„å…³é”®å­—ï¼Œanyå’Œåè®®ä¸€èµ·ä½¿ç”¨ï¼Œè¡¨ç¤ºçš„æ˜¯è¯­ä¹‰æ¯”è¾ƒä¼ ç»Ÿï¼ŒåŠéµå®ˆäº†æŸä¸ªåè®®çš„ç±»å‹ï¼Œå…·ä½“ä»€ä¹ˆç±»å‹ç¼–è¯‘å™¨ä¹Ÿä¸çŸ¥é“ã€‚è€Œsomeå’Œåè®®ä¸€èµ·ä½¿ç”¨è¡¨ç¤ºçš„æ˜¯å…·è±¡çš„ä¸€ä¸ªç±»å‹ï¼Œæ­¤ç±»å‹ç¼–è¯‘æ—¶ä¸çŸ¥é“ï¼Œè°ƒç”¨æ—¶ä¹Ÿå¼€å‘è€…æ¥è¯´ä¹Ÿæ˜¯é€æ˜çš„ï¼Œä½†æ˜¯ç¼–è¯‘å™¨è‡ªå·±æ˜¯çŸ¥é“çš„ï¼Œå®ƒå°±æ˜¯å…·ä½“çš„ä¸€ä¸ªç±»å‹ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œæ‡‚çš„çƒ­çˆ±ï¼Œæ„¿æ„åˆ†äº«ï¼Œåšä¸ªæœ‹å‹ QQï¼š316045346","categories":[{"name":"Swift","slug":"Swift","permalink":"http://huishao.cc/categories/Swift/"}],"tags":[],"keywords":[{"name":"Swift","slug":"Swift","permalink":"http://huishao.cc/categories/Swift/"}]},{"title":"èŠèŠiOSä¸­çš„Mach-O","slug":"451[iOSç ”ä¹ è®°]èŠèŠiOSä¸­çš„Mach-O","date":"2022-08-16T16:00:00.000Z","updated":"2022-09-28T08:37:23.026Z","comments":true,"path":"2022/08/17/451[iOSç ”ä¹ è®°]èŠèŠiOSä¸­çš„Mach-O/","link":"","permalink":"http://huishao.cc/2022/08/17/451[iOSç ”ä¹ è®°]èŠèŠiOSä¸­çš„Mach-O/","excerpt":"","text":"èŠèŠiOSä¸­çš„Mach-Oä¸€ å…³äºMach-OMach-Oçš„å…¨ç§°ä¸ºMach Objectï¼Œæ˜¯OS Xä¸iOSä¸Šçš„ä¸€ç§å¯æ‰§è¡Œæ–‡ä»¶æ ¼å¼ã€‚Machæœ¬èº«æŒ‡ä¸€ç§æ“ä½œç³»ç»Ÿçš„å¾®å†…æ ¸æ ‡å‡†ï¼Œè¢«ç”¨äºOS Xä¸iOSç³»ç»Ÿçš„å†…æ ¸ä¸­ã€‚ç›¸ä¿¡å¯¹äºç§»åŠ¨ç«¯çš„iOSå¼€å‘è€…æ¥è¯´ï¼Œå¯¹Mach-Oæ–‡ä»¶ä¸€å®šä¸é™Œç”Ÿï¼Œæˆ‘ä»¬ç¼–è¯‘æ‰“åŒ…çš„iOS IPAæ–‡ä»¶ï¼Œå†…éƒ¨å…¶å®å°±æœ‰ä¸€ä¸ªå¯æ‰§è¡Œçš„Mach-Oæ–‡ä»¶ï¼Œæˆ‘ä»¬å¼€å‘çš„frameworkå’Œ.aç­‰åŠ¨æ€åº“é™æ€åº“ä¸­ï¼Œä¹Ÿä¼šåŒ…å«Mach-Oæ–‡ä»¶ï¼Œæœ¬ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬å°±æ¥è¯¦ç»†çœ‹çœ‹Mach-Oä¸­ç©¶ç«Ÿæ”¾çš„æ˜¯ä»€ä¹ˆï¼ŒMach-Oçš„ç»“æ„æ˜¯æ€æ ·çš„ã€‚ äºŒ Mach-Oå¤´ä¿¡æ¯Mach-Oæ˜¯ä¸€ç§æ–‡ä»¶æ ¼å¼ï¼Œæˆ‘ä»¬çŸ¥é“å¾ˆå¤šæ–‡ä»¶ç±»å‹æœ‰åŒ…å«æœ‰æ–‡ä»¶å¤´ï¼Œä¾‹å¦‚å›¾ç‰‡æ–‡ä»¶å¤´ä¸­å¯èƒ½ä¼šåŒ…å«å›¾ç‰‡çš„æ ¼å¼ï¼Œç¼–ç æ–¹å¼ç­‰ï¼Œå‹ç¼©æ–‡ä»¶çš„æ–‡ä»¶å¤´ä¸­åŒ…å«å‹ç¼©å‚æ•°ç­‰ç­‰ã€‚ç›¸æ¯”ï¼ŒMach-Oæ˜¯ä¸€ç§æ›´åŠ å¤æ‚çš„æ–‡ä»¶ï¼Œå…¶æ–‡ä»¶å¤´ä¸­æä¾›çš„ä¿¡æ¯ä¹Ÿæ›´å¤šã€‚æˆ‘ä»¬å¯ä»¥åœ¨Githubä¸Šæ‰¾åˆ°ä¸€æ¬¾å¼€æºçš„Mach-Oæ–‡ä»¶é˜…è¯»è½¯ä»¶ï¼šMachOViewã€‚å¯ä»¥å°è¯•ç”¨å…¶æ‰“å¼€ä»»æ„ä¸€ä¸ªç¼–è¯‘å¥½çš„IPAåŒ…ä¸­çš„Mach-Oæ–‡ä»¶ï¼Œä¾‹å¦‚ï¼š å¯ä»¥çœ‹åˆ°ï¼Œæ ¼å¼åŒ–åçš„æ–‡ä»¶å†…å®¹ä¸­ï¼Œæœ‰ä¸€é¡¹æ˜¯Mach64 Headerï¼Œè¿™ä¸€é¡¹å†…å®¹ä¹Ÿæ˜¯åœ¨Mach-Oæ–‡ä»¶çš„æœ€å‰éƒ¨ï¼Œè¿™é‡Œå°±æ˜¯Mach-Oæ–‡ä»¶å¤´ã€‚ å…³äºMach-Oå¤´éƒ¨ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨usr/include/mach-o/Loader.hæ–‡ä»¶ä¸­æ‰¾åˆ°å¯¹åº”çš„å®šä¹‰ï¼Œå¦‚ä¸‹ï¼š 123456789101112131415161718192021// 32ä½çš„Mach-Oå¤´struct mach_header &#123; uint32_t magic; /* mach magic number identifier */ cpu_type_t cputype; /* cpu specifier */ cpu_subtype_t cpusubtype; /* machine specifier */ uint32_t filetype; /* type of file */ uint32_t ncmds; /* number of load commands */ uint32_t sizeofcmds; /* the size of all the load commands */ uint32_t flags; /* flags */&#125;;// 64ä½çš„Mach-Oå¤´struct mach_header_64 &#123; uint32_t magic; /* mach magic number identifier */ cpu_type_t cputype; /* cpu specifier */ cpu_subtype_t cpusubtype; /* machine specifier */ uint32_t filetype; /* type of file */ uint32_t ncmds; /* number of load commands */ uint32_t sizeofcmds; /* the size of all the load commands */ uint32_t flags; /* flags */ uint32_t reserved; /* reserved */&#125;; å¯ä»¥çœ‹åˆ°ï¼Œ32ä½çš„Mach-Oå’Œ64ä½çš„Mach-Oæœ€å¤§çš„åŒºåˆ«åªåœ¨äº64ä½çš„å¤šäº†ä¸€ä¸ªreservedå­—æ®µï¼Œæ­¤å­—æ®µå½“å‰å¹¶æ²¡æœ‰ç‰¹æ®Šæ„ä¹‰ï¼Œå…¶é¢„ç•™ç»™æœªæ¥ä½¿ç”¨ã€‚ä¸‹é¢æˆ‘ä»¬æ¥è¯¦ç»†çœ‹ä¸‹è¿™äº›å­—æ®µçš„æ„ä¹‰ã€‚ 1.magic ä»å…¶æ•°æ®ç±»å‹uint32_tä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œmagicå 32ä¸ªäºŒè¿›åˆ¶ä½ã€‚é¡¾åæ€ä¹‰ï¼Œè¿™ä¸ªå­—æ®µæ˜¯ä¸€ä¸ªé­”æ•°ï¼Œç”¨æ¥åŒºåˆ†å½“å‰Mach-Oæ˜¯32ä½çš„è¿˜æ˜¯64ä½çš„ï¼Œæœ‰ä¸¤ä¸ªå®å¯¹æ­¤é­”æ•°çš„å€¼è¿›è¡Œäº†å®šä¹‰ï¼š 1234// 32ä½#define MH_MAGIC 0xfeedface// 64ä½#define MH_MAGIC_64 0xfeedfacf ä½ å¯ä»¥çœ‹ä¸‹MachOViewè½¯ä»¶æ ¼å¼åŒ–åçš„æ­¤å­—æ®µçš„å€¼ï¼Œæ˜¯å¦å’Œè¿™äº›å®æ˜¯å¯¹åº”çš„ã€‚ 2.cputype æ­¤å­—æ®µå 32ä¸ªäºŒè¿›åˆ¶ä½ï¼Œç”¨æ¥æè¿°CPUç±»å‹ï¼Œç›¸å…³å®å®šä¹‰åœ¨mach/machine.hå¤´æ–‡ä»¶ä¸­ï¼Œå¦‚ä¸‹ï¼š 123456789101112131415161718#define CPU_TYPE_ANY ((cpu_type_t) -1)#define CPU_TYPE_VAX ((cpu_type_t) 1)#define CPU_TYPE_MC680x0 ((cpu_type_t) 6)// æ¨¡æ‹Ÿå™¨å’ŒMaacä¸€èˆ¬ä¸ºæ­¤ç±»å‹#define CPU_TYPE_X86 ((cpu_type_t) 7)#define CPU_TYPE_I386 CPU_TYPE_X86 #define CPU_TYPE_X86_64 (CPU_TYPE_X86 | CPU_ARCH_ABI64)#define CPU_TYPE_MC98000 ((cpu_type_t) 10)#define CPU_TYPE_HPPA ((cpu_type_t) 11)// iPhoneçœŸæœºä¸€èˆ¬ä¸ºæ­¤ç±»å‹#define CPU_TYPE_ARM ((cpu_type_t) 12)#define CPU_TYPE_ARM64 (CPU_TYPE_ARM | CPU_ARCH_ABI64)#define CPU_TYPE_ARM64_32 (CPU_TYPE_ARM | CPU_ARCH_ABI64_32)#define CPU_TYPE_MC88000 ((cpu_type_t) 13)#define CPU_TYPE_SPARC ((cpu_type_t) 14)#define CPU_TYPE_I860 ((cpu_type_t) 15)#define CPU_TYPE_POWERPC ((cpu_type_t) 18)#define CPU_TYPE_POWERPC64 (CPU_TYPE_POWERPC | CPU_ARCH_ABI64) å…¶ä¸­çš„cpu_type_tå…¶å®å°±æ˜¯intç±»å‹çš„åˆ«åã€‚ 3.cpusubtype CPUå­ç±»å‹ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122#define CPU_SUBTYPE_MASK 0xff000000 #define CPU_SUBTYPE_LIB64 0x80000000 #define CPU_SUBTYPE_PTRAUTH_ABI 0x80000000 #define CPU_SUBTYPE_ANY ((cpu_subtype_t) -1)#define CPU_SUBTYPE_MULTIPLE ((cpu_subtype_t) -1)#define CPU_SUBTYPE_LITTLE_ENDIAN ((cpu_subtype_t) 0)#define CPU_SUBTYPE_BIG_ENDIAN ((cpu_subtype_t) 1)// VAXçš„å­ç±»å‹#define CPU_SUBTYPE_VAX_ALL ((cpu_subtype_t) 0)#define CPU_SUBTYPE_VAX780 ((cpu_subtype_t) 1)#define CPU_SUBTYPE_VAX785 ((cpu_subtype_t) 2)#define CPU_SUBTYPE_VAX750 ((cpu_subtype_t) 3)#define CPU_SUBTYPE_VAX730 ((cpu_subtype_t) 4)#define CPU_SUBTYPE_UVAXI ((cpu_subtype_t) 5)#define CPU_SUBTYPE_UVAXII ((cpu_subtype_t) 6)#define CPU_SUBTYPE_VAX8200 ((cpu_subtype_t) 7)#define CPU_SUBTYPE_VAX8500 ((cpu_subtype_t) 8)#define CPU_SUBTYPE_VAX8600 ((cpu_subtype_t) 9)#define CPU_SUBTYPE_VAX8650 ((cpu_subtype_t) 10)#define CPU_SUBTYPE_VAX8800 ((cpu_subtype_t) 11)#define CPU_SUBTYPE_UVAXIII ((cpu_subtype_t) 12)// MC680å­ç±»å‹#define CPU_SUBTYPE_MC680x0_ALL ((cpu_subtype_t) 1)#define CPU_SUBTYPE_MC68030 ((cpu_subtype_t) 1)#define CPU_SUBTYPE_MC68040 ((cpu_subtype_t) 2)#define CPU_SUBTYPE_MC68030_ONLY ((cpu_subtype_t) 3)// I386å­ç±»å‹#define CPU_SUBTYPE_INTEL(f, m) ((cpu_subtype_t) (f) + ((m) &lt;&lt; 4))#define CPU_SUBTYPE_I386_ALL CPU_SUBTYPE_INTEL(3, 0)#define CPU_SUBTYPE_386 CPU_SUBTYPE_INTEL(3, 0)#define CPU_SUBTYPE_486 CPU_SUBTYPE_INTEL(4, 0)#define CPU_SUBTYPE_486SX CPU_SUBTYPE_INTEL(4, 8) // 8 &lt;&lt; 4 = 128#define CPU_SUBTYPE_586 CPU_SUBTYPE_INTEL(5, 0)#define CPU_SUBTYPE_PENT CPU_SUBTYPE_INTEL(5, 0)#define CPU_SUBTYPE_PENTPRO CPU_SUBTYPE_INTEL(6, 1)#define CPU_SUBTYPE_PENTII_M3 CPU_SUBTYPE_INTEL(6, 3)#define CPU_SUBTYPE_PENTII_M5 CPU_SUBTYPE_INTEL(6, 5)#define CPU_SUBTYPE_CELERON CPU_SUBTYPE_INTEL(7, 6)#define CPU_SUBTYPE_CELERON_MOBILE CPU_SUBTYPE_INTEL(7, 7)#define CPU_SUBTYPE_PENTIUM_3 CPU_SUBTYPE_INTEL(8, 0)#define CPU_SUBTYPE_PENTIUM_3_M CPU_SUBTYPE_INTEL(8, 1)#define CPU_SUBTYPE_PENTIUM_3_XEON CPU_SUBTYPE_INTEL(8, 2)#define CPU_SUBTYPE_PENTIUM_M CPU_SUBTYPE_INTEL(9, 0)#define CPU_SUBTYPE_PENTIUM_4 CPU_SUBTYPE_INTEL(10, 0)#define CPU_SUBTYPE_PENTIUM_4_M CPU_SUBTYPE_INTEL(10, 1)#define CPU_SUBTYPE_ITANIUM CPU_SUBTYPE_INTEL(11, 0)#define CPU_SUBTYPE_ITANIUM_2 CPU_SUBTYPE_INTEL(11, 1)#define CPU_SUBTYPE_XEON CPU_SUBTYPE_INTEL(12, 0)#define CPU_SUBTYPE_XEON_MP CPU_SUBTYPE_INTEL(12, 1)#define CPU_SUBTYPE_INTEL_FAMILY(x) ((x) &amp; 15)#define CPU_SUBTYPE_INTEL_FAMILY_MAX 15#define CPU_SUBTYPE_INTEL_MODEL(x) ((x) &gt;&gt; 4)#define CPU_SUBTYPE_INTEL_MODEL_ALL 0// X86å­ç±»å‹#define CPU_SUBTYPE_X86_ALL ((cpu_subtype_t)3)#define CPU_SUBTYPE_X86_64_ALL ((cpu_subtype_t)3)#define CPU_SUBTYPE_X86_ARCH1 ((cpu_subtype_t)4)#define CPU_SUBTYPE_X86_64_H ((cpu_subtype_t)8)#define CPU_THREADTYPE_INTEL_HTT ((cpu_threadtype_t) 1)// MIPSå­ç±»å‹#define CPU_SUBTYPE_MIPS_ALL ((cpu_subtype_t) 0)#define CPU_SUBTYPE_MIPS_R2300 ((cpu_subtype_t) 1)#define CPU_SUBTYPE_MIPS_R2600 ((cpu_subtype_t) 2)#define CPU_SUBTYPE_MIPS_R2800 ((cpu_subtype_t) 3)#define CPU_SUBTYPE_MIPS_R2000a ((cpu_subtype_t) 4) /* pmax */#define CPU_SUBTYPE_MIPS_R2000 ((cpu_subtype_t) 5)#define CPU_SUBTYPE_MIPS_R3000a ((cpu_subtype_t) 6) /* 3max */#define CPU_SUBTYPE_MIPS_R3000 ((cpu_subtype_t) 7)// MC98000å­ç±»å‹#define CPU_SUBTYPE_MC98000_ALL ((cpu_subtype_t) 0)#define CPU_SUBTYPE_MC98601 ((cpu_subtype_t) 1)// HPPAå­ç±»å‹#define CPU_SUBTYPE_HPPA_ALL ((cpu_subtype_t) 0)#define CPU_SUBTYPE_HPPA_7100 ((cpu_subtype_t) 0) /* compat */#define CPU_SUBTYPE_HPPA_7100LC ((cpu_subtype_t) 1)// MC88000å­ç±»å‹#define CPU_SUBTYPE_MC88000_ALL ((cpu_subtype_t) 0)#define CPU_SUBTYPE_MC88100 ((cpu_subtype_t) 1)#define CPU_SUBTYPE_MC88110 ((cpu_subtype_t) 2)// SPARCå­ç±»å‹#define CPU_SUBTYPE_SPARC_ALL ((cpu_subtype_t) 0)// I860å­ç±»å‹#define CPU_SUBTYPE_I860_ALL ((cpu_subtype_t) 0)#define CPU_SUBTYPE_I860_860 ((cpu_subtype_t) 1)// PowerPCå­ç±»å‹#define CPU_SUBTYPE_POWERPC_ALL ((cpu_subtype_t) 0)#define CPU_SUBTYPE_POWERPC_601 ((cpu_subtype_t) 1)#define CPU_SUBTYPE_POWERPC_602 ((cpu_subtype_t) 2)#define CPU_SUBTYPE_POWERPC_603 ((cpu_subtype_t) 3)#define CPU_SUBTYPE_POWERPC_603e ((cpu_subtype_t) 4)#define CPU_SUBTYPE_POWERPC_603ev ((cpu_subtype_t) 5)#define CPU_SUBTYPE_POWERPC_604 ((cpu_subtype_t) 6)#define CPU_SUBTYPE_POWERPC_604e ((cpu_subtype_t) 7)#define CPU_SUBTYPE_POWERPC_620 ((cpu_subtype_t) 8)#define CPU_SUBTYPE_POWERPC_750 ((cpu_subtype_t) 9)#define CPU_SUBTYPE_POWERPC_7400 ((cpu_subtype_t) 10)#define CPU_SUBTYPE_POWERPC_7450 ((cpu_subtype_t) 11)#define CPU_SUBTYPE_POWERPC_970 ((cpu_subtype_t) 100)// ARMå­ç±»å‹#define CPU_SUBTYPE_ARM_ALL ((cpu_subtype_t) 0)#define CPU_SUBTYPE_ARM_V4T ((cpu_subtype_t) 5)#define CPU_SUBTYPE_ARM_V6 ((cpu_subtype_t) 6)#define CPU_SUBTYPE_ARM_V5TEJ ((cpu_subtype_t) 7)#define CPU_SUBTYPE_ARM_XSCALE ((cpu_subtype_t) 8)#define CPU_SUBTYPE_ARM_V7 ((cpu_subtype_t) 9) /* ARMv7-A and ARMv7-R */#define CPU_SUBTYPE_ARM_V7F ((cpu_subtype_t) 10) /* Cortex A9 */#define CPU_SUBTYPE_ARM_V7S ((cpu_subtype_t) 11) /* Swift */#define CPU_SUBTYPE_ARM_V7K ((cpu_subtype_t) 12)#define CPU_SUBTYPE_ARM_V8 ((cpu_subtype_t) 13)#define CPU_SUBTYPE_ARM_V6M ((cpu_subtype_t) 14) /* Not meant to be run under xnu */#define CPU_SUBTYPE_ARM_V7M ((cpu_subtype_t) 15) /* Not meant to be run under xnu */#define CPU_SUBTYPE_ARM_V7EM ((cpu_subtype_t) 16) /* Not meant to be run under xnu */#define CPU_SUBTYPE_ARM_V8M ((cpu_subtype_t) 17) /* Not meant to be run under xnu */// ARM64å­ç±»å‹#define CPU_SUBTYPE_ARM64_ALL ((cpu_subtype_t) 0)#define CPU_SUBTYPE_ARM64_V8 ((cpu_subtype_t) 1)#define CPU_SUBTYPE_ARM64E ((cpu_subtype_t) 2)#define CPU_SUBTYPE_ARM64_PTR_AUTH_MASK 0x0f000000#define CPU_SUBTYPE_ARM64_PTR_AUTH_VERSION(x) (((x) &amp; CPU_SUBTYPE_ARM64_PTR_AUTH_MASK) &gt;&gt; 24)// ARM64_32å­ç±»å‹#define CPU_SUBTYPE_ARM64_32_ALL ((cpu_subtype_t) 0)#define CPU_SUBTYPE_ARM64_32_V8 ((cpu_subtype_t) 1) 4.filetype æ­¤å­—æ®µæ ‡è®°Mach-Oæ–‡ä»¶çš„å…·ä½“ç±»å‹ï¼Œä¾‹å¦‚å½“å‰Mach-Oæ˜¯å¯æ‰§è¡Œæ–‡ä»¶è¿˜æ˜¯åº“æ–‡ä»¶ç­‰ï¼Œæ­¤å­—æ®µå 32ä¸ªäºŒè¿›åˆ¶ä½ï¼Œå€¼å®šä¹‰å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324// å¯é‡å®šä½çš„ç›®æ ‡æ–‡ä»¶ï¼Œç¼–è¯‘æºç å¾—åˆ°çš„ä¸­é—´ç»“æœ#define MH_OBJECT 0x1 // å¯æ‰§è¡Œçš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼ŒiOSåº”ç”¨IPAåŒ…ä¸­çš„å¯æ‰§è¡ŒMach-Oå°±æ˜¯æ­¤ç±»å‹çš„#define MH_EXECUTE 0x2// ä¿®å¤åçš„VMå…±äº«åº“æ–‡ä»¶#define MH_FVMLIB 0x3// æ ¸å¿ƒè½¬å‚¨æ–‡ä»¶#define MH_CORE 0x4 // é¢„åŠ è½½çš„å¯æ‰§è¡Œæ–‡ä»¶#define MH_PRELOAD 0x5// åŠ¨æ€åº“æ–‡ä»¶#define MH_DYLIB 0x6 // åŠ¨æ€é“¾æ¥å™¨æ–‡ä»¶#define MH_DYLINKER 0x7 // æ’ä»¶æ–‡ä»¶ï¼Œéç‹¬ç«‹çš„äºŒè¿›åˆ¶æ–‡ä»¶#define MH_BUNDLE 0x8// ä»…ç”¨äºé™æ€é“¾æ¥çš„å…±äº«åº“æ–‡ä»¶#define MH_DYLIB_STUB 0x9// è¾…åŠ©çš„ç¬¦å·æ–‡ä»¶åŠè°ƒè¯•ä¿¡æ¯#define MH_DSYM 0xa// å†…æ ¸æ‰©å±•#define MH_KEXT_BUNDLE 0xb// å…¶ä»–Mach-Oç»„æˆçš„é›†åˆ#define MH_FILESET 0xc 5.ncmds æ­¤å­—æ®µæè¿°éœ€è¦åŠ è½½çš„å‘½ä»¤æ¡æ•°ï¼Œä¸Mach-Oæ–‡ä»¶ä¸­çš„Load Commandsæ®µä¸­çš„æ•°æ®å¯¹åº”ã€‚ 6.sizeofcmds ä¸Mach-Oæ–‡ä»¶ä¸­çš„Load Commandsæ®µä¸­çš„æ•°æ®å¯¹åº”ï¼Œæ ‡è®°Load Commandsæ®µçš„é•¿åº¦ã€‚ 7.flags æ ‡å¿—ä½å­—æ®µï¼Œæ ‡è®°å½“å‰Mach-Oæ–‡ä»¶çš„ä¸€äº›é‡è¦ä¿¡æ¯ï¼Œè¿™äº›flagsæ˜¯ä»¥äºŒè¿›åˆ¶ä½æˆ–çš„å…³ç³»å®šä¹‰çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥åŒæ—¶æ‹¥æœ‰å¤šä¸ªæ ‡è®°ã€‚å®šä¹‰å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455// æœªå¸¦æœªå®šä¹‰çš„ç¬¦å·ï¼Œæ²¡æœ‰è¿›ä¸€æ­¥çš„é“¾æ¥ä¾èµ–å…³ç³»#define MH_NOUNDEFS 0x1 // ç›®æ ‡æ–‡ä»¶æ˜¯å¢é‡é“¾æ¥çš„è¾“å‡ºï¼Œä¸èƒ½å†æ¬¡è¢«é“¾æ¥#define MH_INCRLINK 0x2 // ç›®æ ‡æ–‡ä»¶æ˜¯åŠ¨æ€é“¾æ¥å™¨çš„è¾“å…¥ï¼Œä¸èƒ½å†æ¬¡é™æ€é“¾æ¥#define MH_DYLDLINK 0x4// åŠ è½½æ—¶ï¼Œå¯¹è±¡æ–‡ä»¶çš„æœªå®šä¹‰å¼•ç”¨ç”±åŠ¨æ€é“¾æ¥å™¨ç»‘å®š#define MH_BINDATLOAD 0x8// è¯¥æ–‡ä»¶é¢„å…ˆç»‘å®šäº†å…¶åŠ¨æ€æœªå®šä¹‰å¼•ç”¨#define MH_PREBOUND 0x10// ç›®æ ‡æ–‡ä»¶çš„åªè¯»æ®µä¸å¯è¯»å†™æ®µè¿›è¡Œäº†åŒºåˆ†#define MH_SPLIT_SEGS 0x20// å»¶è¿Ÿinit#define MH_LAZY_INIT 0x40// ä¸¤å±‚åç§°ç»‘å®š#define MH_TWOLEVEL 0x80// æ‰å¹³åç§°ç»‘å®š#define MH_FORCE_FLAT 0x100// å­imageä¸­æ²¡æœ‰å¤šå®šä¹‰çš„ç¬¦å·#define MH_NOMULTIDEFS 0x200// ä¸è¦è®©dyldå°†æ­¤å¯æ‰§è¡Œæ–‡ä»¶é€šçŸ¥é¢„ç»‘å®šä»£ç†#define MH_NOFIXPREBINDING 0x400// äºŒè¿›åˆ¶æ–‡ä»¶ä¸æ˜¯é¢„ç»‘å®šçš„ï¼Œä½†å¯ä»¥é‡æ–°è¿›è¡Œé¢„ç»‘å®š#define MH_PREBINDABLE 0x800 // æŒ‡ç¤ºæ­¤äºŒè¿›åˆ¶æ–‡ä»¶ç»‘å®šåˆ°å…¶ä¾èµ–åº“çš„æ‰€æœ‰ä¸¤çº§å‘½åç©ºé—´æ¨¡å—#define MH_ALLMODSBOUND 0x1000#define MH_SUBSECTIONS_VIA_SYMBOLS 0x2000// äºŒè¿›åˆ¶æ–‡ä»¶å·²è¢«è§„èŒƒåŒ–ä¸ºéç»‘å®šæ“ä½œ#define MH_CANONICAL 0x4000// äºŒè¿›åˆ¶æ–‡ä»¶ä½¿ç”¨äº†å¼±ç¬¦å·#define MH_WEAK_DEFINES 0x8000// æœ€ç»ˆé“¾æ¥çš„imageä½¿ç”¨äº†å¼±ç¬¦å·#define MH_BINDS_TO_WEAK 0x10000// å…è®¸æ ˆå¯æ‰§è¡Œ#define MH_ALLOW_STACK_EXECUTION 0x20000// å½“è®¾ç½®æ­¤ä½æ—¶ï¼ŒäºŒè¿›åˆ¶æ–‡ä»¶å£°æ˜å®ƒå¯ä»¥å®‰å…¨åœ°ç”¨äºuidä¸ºé›¶çš„è¿›ç¨‹#define MH_ROOT_SAFE 0x40000 // å½“è®¾ç½®è¯¥ä½æ—¶ï¼ŒäºŒè¿›åˆ¶æ–‡ä»¶å£°æ˜å®ƒå¯ä»¥åœ¨issetugidä¸ºtrueçš„è¿›ç¨‹ä¸­å®‰å…¨ä½¿ç”¨#define MH_SETUID_SAFE 0x80000 // å½“åœ¨dylibä¸Šè®¾ç½®æ­¤ä½æ—¶ï¼Œé™æ€é“¾æ¥å™¨ä¸éœ€è¦æ£€æŸ¥ä¾èµ–çš„dylibï¼Œä»¥æŸ¥çœ‹æ˜¯å¦æœ‰é‡æ–°å¯¼å‡ºçš„ä¾èµ–dylib#define MH_NO_REEXPORTED_DYLIBS 0x100000// å¯¹å¯æ‰§è¡Œæ–‡ä»¶å¯ç”¨åœ°å€ç©ºé—´å¸ƒå±€éšæœºåŒ–#define MH_PIE 0x200000 // ä»…é€‚ç”¨äºdylibsã€‚å½“é“¾æ¥åˆ°è®¾ç½®äº†æ­¤ä½çš„dylibæ—¶ï¼Œå¦‚æœæ²¡æœ‰ä»dylibå¼•ç”¨ç¬¦å·ï¼Œåˆ™é™æ€é“¾æ¥å™¨å°†è‡ªåŠ¨ä¸å¯¹dylibåˆ›å»ºLC_LOAD_dylibåŠ è½½å‘½ä»¤#define MH_DEAD_STRIPPABLE_DYLIB 0x400000#define MH_HAS_TLV_DESCRIPTORS 0x800000// å°†å †æ ‡è®°ä¸ºä¸å¯æ‰§è¡Œ#define MH_NO_HEAP_EXECUTION 0x1000000// æ‰©å±•åº”ç”¨ä¸­ä½¿ç”¨#define MH_APP_EXTENSION_SAFE 0x02000000// nlistç¬¦å·è¡¨ä¸­åˆ—å‡ºçš„å¤–éƒ¨ç¬¦å·ä¸åŒ…æ‹¬dyldä¿¡æ¯ä¸­åˆ—å‡ºçš„æ‰€æœ‰ç¬¦å·#define MH_NLIST_OUTOFSYNC_WITH_DYLDINFO 0x04000000#define MH_SIM_SUPPORT 0x08000000// ä»…é€‚ç”¨äºdylibsã€‚è®¾ç½®è¯¥ä½æ—¶ï¼Œdylibæ˜¯dyldå…±äº«ç¼“å­˜çš„ä¸€éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯æ–‡ä»¶ç³»ç»Ÿä¸­çš„æ¾æ•£ç¼“å­˜ã€‚#define MH_DYLIB_IN_CACHE 0x80000000 Mach-Oæ–‡ä»¶å¤´çš„å†…å®¹å¤§è‡´å°±åªæœ‰è¿™äº›ï¼Œä¸Šé¢æˆ‘ä»¬æåˆ°è¿‡ï¼Œncmdså’Œsizeofcmdsæè¿°äº†åŠ è½½å‘½ä»¤çš„æ¡æ•°å’ŒåŠ è½½å‘½ä»¤çš„å†…å®¹å¤§å°ï¼Œä¸‹é¢æˆ‘ä»¬å°±æ¥çœ‹ä¸‹åŠ è½½å‘½ä»¤ã€‚ ä¸‰ åŠ è½½å‘½ä»¤åœ¨Mach-Oæ–‡ä»¶ä¸­ï¼ŒåŠ è½½å‘½ä»¤æ®µç´§è·Ÿåœ¨Mach-Oå¤´æ•°æ®åé¢ï¼Œå¤´æ•°æ®ä¸­çš„å­—æ®µå‘ŠçŸ¥äº†æˆ‘ä»¬åŠ è½½å‘½ä»¤çš„æ¡æ•°å’Œå¤§å°ï¼Œé€šè¿‡è¿™ä¸¤ä¸ªå­—æ®µæ¥å…·ä½“çš„è¿›è¡Œå‘½ä»¤çš„è§£æå’Œæ‰§è¡Œã€‚ æˆ‘ä»¬ç°åœ¨MachOViewä¸­ç®€å•æµè§ˆä¸‹è¿™éƒ¨åˆ†çš„æ•°æ®ç»“æ„ï¼Œå¦‚ä¸‹å›¾ï¼š å¯ä»¥çœ‹åˆ°ï¼Œæ¯æ¡åŠ è½½å‘½ä»¤çš„å¼€å¤´ç»“æ„éƒ½æ˜¯ä¸€æ ·çš„ï¼Œå³å‘½ä»¤ç±»å‹å’Œå½“å‰å‘½ä»¤çš„é•¿åº¦å¤§å°ã€‚å…¶å®ï¼Œåœ¨loader.hå¤´æ–‡ä»¶ä¸­æœ‰å®šä¹‰ä¸€ä¸ªç»“æ„ä½“æ¥æè¿°åŠ è½½å‘½ä»¤ï¼Œå¦‚ä¸‹ï¼š 1234struct load_command &#123; uint32_t cmd; uint32_t cmdsize; &#125;; å¯ä»¥çœ‹åˆ°ï¼Œæ¯æ¡åŠ è½½å‘½ä»¤åœ¨è§£ææ—¶ï¼Œé¦–å…ˆä¼šè·å–åˆ°cmdå’Œcmdsizeï¼Œcmdç”¨æ¥æ ‡è®°åŠ è½½å‘½ä»¤æ˜¯ä»€ä¹ˆï¼ŒcmdsizeæŒ‡æ˜å½“å‰åŠ è½½å‘½ä»¤çš„å­—èŠ‚é•¿åº¦ï¼Œé€šè¿‡è¿™ä¸¤ä¸ªå­—æ®µï¼Œå¯ä»¥å¯¹å‘½ä»¤è¿›è¡Œå®Œæ•´çš„è§£æã€‚ ä¸‹é¢åˆ—ä¸¾äº†å¸¸è§çš„å‘½ä»¤ç±»å‹ï¼Œå¯¹åº”çš„å®å®šä¹‰ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100// å°†æ–‡ä»¶ä¸­çš„æ®µï¼ˆ32ä½ï¼‰æ˜ å°„åˆ°è¿›ç¨‹åœ°å€ç©ºé—´ä¸­#define LC_SEGMENT 0x1// å°†æ–‡ä»¶ä¸­çš„æ®µï¼ˆ64ä½ï¼‰æ˜ å°„åˆ°è¿›ç¨‹åœ°å€ç©ºé—´ä¸­#define LC_SEGMENT_64 0x19// é“¾æ¥ç¼–è¾‘stabç¬¦å·è¡¨ä¿¡æ¯#define LC_SYMTAB 0x2// é“¾æ¥ç¼–è¾‘gdbç¬¦å·è¡¨ä¿¡æ¯#define LC_SYMSEG 0x3// å¼€å¯ä¸€ä¸ªMachçº¿ç¨‹ï¼Œä¸å¼€è¾Ÿæ ˆ#define LC_THREAD 0x4// å¼€å¯ä¸€ä¸ªUNIXçº¿ç¨‹#define LC_UNIXTHREAD 0x5// åŠ è½½æŒ‡å®šçš„å›ºå®šVMå…±äº«åº“#define LC_LOADFVMLIB 0x6 // ä¿®å¤äº†VMå…±äº«åº“æ ‡è¯†#define LC_IDFVMLIB 0x7// å¯¹è±¡æ ‡è¯†ä¿¡æ¯#define LC_IDENT 0x8// å›ºå®šVMæ–‡ä»¶åŒ…å«#define LC_FVMFILE 0x9// prepageå‘½ä»¤#define LC_PREPAGE 0xa// åŠ¨æ€é“¾æ¥ç¼–è¾‘ç¬¦å·è¡¨ä¿¡æ¯ #define LC_DYSYMTAB 0xb// åŠ è½½åŠ¨æ€é“¾æ¥çš„å…±äº«åº“#define LC_LOAD_DYLIB 0xc// åŠ¨æ€é“¾æ¥å…±äº«åº“æ ‡è¯†#define LC_ID_DYLIB 0xd// åŠ è½½åŠ¨æ€é“¾æ¥å™¨#define LC_LOAD_DYLINKER 0xe// åŠ¨æ€é“¾æ¥å™¨æ ‡è¯†#define LC_ID_DYLINKER 0xf// åŠ¨æ€é¢„ç»‘å®šçš„æ¨¡å—#define LC_PREBOUND_DYLIB 0x10// ä¸‹é¢çš„å‘½ä»¤ä¸é“¾æ¥å…±äº«åº“æœ‰å…³// image routines#define LC_ROUTINES 0x11 /* image routines */#define LC_ROUTINES_64 0x1a#define LC_SUB_FRAMEWORK 0x12 /* sub framework */#define LC_SUB_UMBRELLA 0x13 /* sub umbrella */#define LC_SUB_CLIENT 0x14 /* sub client */#define LC_SUB_LIBRARY 0x15 /* sub library */#define LC_TWOLEVEL_HINTS 0x16 /* two-level namespace lookup hints */#define LC_PREBIND_CKSUM 0x17 /* prebind checksum */// åŠ è½½å…è®¸ä¸¢å¤±çš„åŠ¨æ€é“¾æ¥å…±äº«åº“#define LC_LOAD_WEAK_DYLIB (0x18 | LC_REQ_DYLD)// å”¯ä¸€çš„UUIDï¼Œè¡¨ç¤ºå½“å‰äºŒè¿›åˆ¶æ–‡ä»¶#define LC_UUID 0x1b// è¿›è¡Œæœ¬åœ°ä»£ç ç­¾å#define LC_CODE_SIGNATURE 0x1d// æœ¬åœ°æ‹†åˆ†æ®µ#define LC_SEGMENT_SPLIT_INFO 0x1e // åŠ è½½å¹¶é‡æ–°å¯¼å‡ºdylib#define LC_REEXPORT_DYLIB (0x1f | LC_REQ_DYLD)// å°†dylibåŠ è½½å»¶è¿Ÿè‡³é¦–æ¬¡ä½¿ç”¨#define LC_LAZY_LOAD_DYLIB 0x20// åŠ å¯†çš„æ®µä¿¡æ¯#define LC_ENCRYPTION_INFO 0x21#define LC_ENCRYPTION_INFO_64 0x2C// å‹ç¼©çš„dyldä¿¡æ¯#define LC_DYLD_INFO 0x22// ä»…é™å‹ç¼©çš„dyldä¿¡æ¯#define LC_DYLD_INFO_ONLY (0x22|LC_REQ_DYLD)// å‘ä¸ŠåŠ è½½dylib#define LC_LOAD_UPWARD_DYLIB (0x23 | LC_REQ_DYLD)// ä¸ºMacOSXæœ€å°æ“ä½œç³»ç»Ÿç‰ˆæœ¬æ„å»º#define LC_VERSION_MIN_MACOSX 0x24// ä¸ºiOSæœ€å°æ“ä½œç³»ç»Ÿç‰ˆæœ¬æ„å»º#define LC_VERSION_MIN_IPHONEOS 0x25// ä¸ºTVOSæœ€å°æ“ä½œç³»ç»Ÿç‰ˆæœ¬æ„å»º#define LC_VERSION_MIN_TVOS 0x2F// ä¸ºWATCHOSæœ€å°æ“ä½œç³»ç»Ÿç‰ˆæœ¬æ„å»º#define LC_VERSION_MIN_WATCHOS 0x30// å‹ç¼©çš„å‡½æ•°èµ·å§‹åœ°å€è¡¨#define LC_FUNCTION_STARTS 0x26// dyldè¦åƒç¯å¢ƒå˜é‡ä¸€æ ·å¤„ç†çš„å­—ç¬¦ä¸²#define LC_DYLD_ENVIRONMENT 0x27// åŒLC_UNIXTHREAD#define LC_MAIN (0x28|LC_REQ_DYLD)// __textæ®µä¸­çš„éè¯´æ˜è¡¨#define LC_DATA_IN_CODE 0x29// ç”¨äºç”ŸæˆäºŒè¿›åˆ¶æ–‡ä»¶çš„æºä»£ç ç‰ˆæœ¬#define LC_SOURCE_VERSION 0x2A// ä»é“¾æ¥çš„dylibså¤åˆ¶çš„ä»£ç ç­¾åDR#define LC_DYLIB_CODE_SIGN_DRS 0x2B// MH_OBJECTæ–‡ä»¶ä¸­çš„é“¾æ¥å™¨é€‰é¡¹#define LC_LINKER_OPTION 0x2D // MH_OBJECTæ–‡ä»¶ä¸­çš„ä¼˜åŒ–æç¤º#define LC_LINKER_OPTIMIZATION_HINT 0x2E// Mach-Oæ–‡ä»¶ä¸­åŒ…å«çš„ä»»æ„æ•°æ®#define LC_NOTE 0x31// ä¸ºå¹³å°æœ€å°æ“ä½œç³»ç»Ÿç‰ˆæœ¬æ„å»º#define LC_BUILD_VERSION 0x32// ä¸linkedit_data_commandä¸€èµ·ä½¿ç”¨#define LC_DYLD_EXPORTS_TRIE (0x33 | LC_REQ_DYLD)#define LC_DYLD_CHAINED_FIXUPS (0x34 | LC_REQ_DYLD)// ä¸fileset_entry_commandä¸€èµ·ä½¿ç”¨#define LC_FILESET_ENTRY (0x35 | LC_REQ_DYLD) åœ¨åŠ è½½å‘½ä»¤æ®µï¼Œé€šè¿‡è§£æå‡ºæ¯æ¡å‘½ä»¤çš„ç±»å‹å’Œå¤§å°ï¼Œå°±å¯ä»¥æ–¹ä¾¿çš„è·å–åˆ°å‘½ä»¤ä¸­å…·ä½“çš„å€¼ï¼Œå‡†ç¡®æ¥è¯´ï¼Œä¸€æ¡åŠ è½½å‘½ä»¤æ˜¯ç”±ç±»å‹ï¼Œå¤§å°å’Œå€¼ä¸‰éƒ¨åˆ†ç»„æˆçš„ã€‚ä¸åŒç±»å‹çš„å‘½ä»¤å¯¹åº”çš„å€¼è§£æå‡ºæ¥çš„ç»“æ„ä¹Ÿä¸åŒï¼Œä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç»å‡ ä¸ªå¸¸è§çš„å‘½ä»¤ã€‚ 1.LC_SEGMENT/LS_SEGMENT_64 é€šè¿‡æˆ‘ä»¬ç¼–è¯‘çš„iOSç©ºé¡¹ç›®çš„Mach-Oæ–‡ä»¶å¯ä»¥çœ‹åˆ°ï¼Œå…¶ä¸­åŒ…å«äº†å¾ˆå¤šæ¡LS_SEGMENT_64åŠ è½½å‘½ä»¤ï¼Œæ­¤å‘½ä»¤æè¿°äº†å†…æ ¸åº”è¯¥å¦‚ä½•è®¾ç½®å½“å‰åº”ç”¨è¿›è¡Œçš„å†…å­˜ç©ºé—´ï¼Œè¿™äº›æ®µå°†ç›´æ¥ä»Mach-Oæ–‡ä»¶ä¸­å¯¹åº”çš„ä½ç½®åŠ è½½åˆ°å†…å­˜é‡Œã€‚LS_SEGMENT_64å‘½ä»¤çš„å€¼çš„ç»“æ„å®šä¹‰å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627struct segment_command &#123; /* for 32-bit architectures */ uint32_t cmd; /* LC_SEGMENT */ uint32_t cmdsize; /* includes sizeof section structs */ char segname[16]; /* segment name */ uint32_t vmaddr; /* memory address of this segment */ uint32_t vmsize; /* memory size of this segment */ uint32_t fileoff; /* file offset of this segment */ uint32_t filesize; /* amount to map from the file */ vm_prot_t maxprot; /* maximum VM protection */ vm_prot_t initprot; /* initial VM protection */ uint32_t nsects; /* number of sections in segment */ uint32_t flags; /* flags */&#125;;struct segment_command_64 &#123; /* for 64-bit architectures */ uint32_t cmd; /* LC_SEGMENT_64 */ uint32_t cmdsize; /* includes sizeof section_64 structs */ char segname[16]; // æ®µçš„åç§° uint64_t vmaddr; // è™šæ‹Ÿç‰©ç†åœ°å€ uint64_t vmsize; // ä¸ºæ­¤æ®µåˆ†é…çš„è™šæ‹Ÿå†…å­˜å¤§å° uint64_t fileoff; // æ­¤æ®µåœ¨æ–‡ä»¶ä¸­çš„åç§»é‡ uint64_t filesize; // æ­¤æ®µåœ¨æ–‡ä»¶ä¸­å ç”¨çš„å­—èŠ‚æ•° vm_prot_t maxprot; // æ®µçš„é¡µé¢æ‰€éœ€è¦çš„æœ€é«˜å†…å­˜ä¿æŠ¤ vm_prot_t initprot; // æ®µé¡µé¢åˆå§‹æ—¶çš„å†…å­˜ä¿æŠ¤ uint32_t nsects; // æ®µä¸­åŒºï¼ˆsectionï¼‰çš„æ•°é‡ uint32_t flags; // æ ‡è®°ä½&#125;; å¯ä»¥çœ‹åˆ°ï¼Œæ¯ä¸ªæ®µåŠ è½½å‘½ä»¤ä¸­éƒ½æä¾›äº†æ®µçš„åŸºæœ¬ä¿¡æ¯ï¼ŒåŒ…æ‹¬åç§°ï¼Œåç§»åœ°å€ï¼Œå­—èŠ‚æ•°ï¼Œä»¥åŠæ®µæœ‰åŒ…å«çš„åˆ†åŒºçš„ä¸ªæ•°ï¼Œé€šè¿‡æ­¤å‘½ä»¤ï¼Œè¿›ç¨‹è™šæ‹Ÿå†…å­˜çš„è®¾ç½®å°±å˜å¾—å¾ˆç®€å•ï¼Œåªéœ€è¦æ ¹æ®æŒ‡ä»¤æ¥è¯»å–ä¿¡æ¯å¹¶åŠ è½½åˆ°å†…å­˜å³å¯ã€‚å…³äºæ®µçš„åˆ†ææˆ‘ä»¬ä¼šåœ¨åé¢å°èŠ‚åšå…·ä½“çš„ä»‹ç»ã€‚ 2.LC_MAIN/LS_UNIXTHREAD å½“æ‰€æœ‰åº“åŠ è½½å®Œæˆåï¼Œæ­¤å‘½ä»¤ç”¨æ¥è¿›è¡ŒäºŒè¿›åˆ¶ç¨‹åºçš„ä¸»çº¿ç¨‹å¯åŠ¨ã€‚ 3.LC_CODE_SIGNATURE Mach-OåŒ…å«çš„æ•°å­—ç­¾åï¼Œå¦‚æœæ­¤ç­¾åä¸ä»£ç ä¸åŒ¹é…ï¼Œåˆ™è¿›ç¨‹ä¼šè¢«å¼ºåˆ¶å…³é—­ã€‚LC_CODE_SIGNATUREå‘½ä»¤çš„ç»“æ„å¦‚ä¸‹ï¼š 1234567891011struct linkedit_data_command &#123; uint32_t cmd; /* LC_CODE_SIGNATURE, LC_SEGMENT_SPLIT_INFO, LC_FUNCTION_STARTS, LC_DATA_IN_CODE, LC_DYLIB_CODE_SIGN_DRS, LC_LINKER_OPTIMIZATION_HINT, LC_DYLD_EXPORTS_TRIE, or LC_DYLD_CHAINED_FIXUPS. */ uint32_t cmdsize; /* sizeof(struct linkedit_data_command) */ uint32_t dataoff; // åœ°å€åç§»é‡ uint32_t datasize; // å­—èŠ‚æ•°&#125;; æ­¤å‘½ä»¤çš„ç»“æ„æ˜¯ä¸€ä¸ªå¤ç”¨çš„ç»“æ„ï¼Œå¾ˆå¤šå‘½ä»¤éƒ½èƒ½è§£ææˆæ­¤ç»“æ„ï¼Œå…¶ä¸­dataoffæ ‡è®°ä»æ–‡ä»¶çš„ä½•å¤„å¼€å§‹è¯»å–ç­¾åï¼Œdatasizeæ ‡è®°ç­¾åæ‰€å å­—èŠ‚æ•°ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªMach-Oæ–‡ä»¶æ¥éªŒè¯ä¸‹ï¼Œé¦–å…ˆåœ¨åŠ è½½å‘½ä»¤æ®µæ‰¾åˆ°LC_CODE_SIGNATUREå‘½ä»¤ï¼Œå¦‚ä¸‹ï¼š å¯ä»¥çœ‹åˆ°ï¼Œå…¶offsetä¸ºE8A0ï¼Œsizeä¸º4B00ï¼Œç›¸åŠ åä¸º133A0ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å¾—çŸ¥ï¼Œç­¾åæ‰€åœ¨çš„ä½ç½®ä¸ºåç§»åœ°å€ä¸ºE8A0çš„åœ°æ–¹ï¼Œæœ€ç»ˆç»“æŸçš„åœ°å€ä¸º133A0ï¼Œæ‰¾åˆ°Code Signatureæ®µè¿›è¡ŒéªŒè¯ï¼Œå¦‚ä¸‹ï¼š å¯ä»¥çœ‹åˆ°ï¼ŒCode Signatureæ®µçš„èµ·å§‹åç§»ä½ç½®å°±æ˜¯E8A0ï¼Œæœ€å4ä¸ªå­—èŠ‚çš„åç§»ä½ç½®ä¸º13390ï¼Œå†åŠ ä¸Šæœ€åçš„4ä¸ªå­—èŠ‚ï¼Œç»“å°¾çš„ä½ç½®åˆšå¥½ä¸º133A0ï¼Œå’Œæˆ‘ä»¬è®¡ç®—çš„ä¸€è‡´ã€‚ å¹¶éåªæœ‰LC_CODE_SIGNATUREå‘½ä»¤æ˜¯é‡‡ç”¨åç§»é‡å’Œå­—èŠ‚æ•°çš„æ–¹å¼æ¥è¿›è¡ŒåŠ è½½ï¼Œè¿™ç§å€¼ç»“æ„çš„å‘½ä»¤éƒ½æ˜¯ä¸€æ ·çš„é€»è¾‘ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ã€‚ 4.LC_SYMTAB æ­¤å‘½ä»¤ç”¨æ¥åŠ è½½æ­¤Mach-Oæ–‡ä»¶çš„ç¬¦å·è¡¨ï¼Œæ­¤å‘½ä»¤ä¸­åŒ…å«äº†symbol tableå’Œstring tableåœ¨Mach-Oæ–‡ä»¶ä¸­çš„ä½ç½®ï¼ŒLC_SYMTABå‘½ä»¤çš„å€¼å®šä¹‰å¦‚ä¸‹ï¼š 12345678struct symtab_command &#123; uint32_t cmd; /* LC_SYMTAB */ uint32_t cmdsize; /* sizeof(struct symtab_command) */ uint32_t symoff; // ç¬¦å·è¡¨èµ·å§‹ä½ç½®çš„åç§»é‡ uint32_t nsyms; // ç¬¦å·è¡¨çš„å­—èŠ‚æ•° uint32_t stroff; // å­—ç¬¦ä¸²è¡¨èµ·å§‹ä½ç½®çš„åç§»é‡ uint32_t strsize; // å­—ç¬¦ä¸²è¡¨çš„å­—èŠ‚æ•°&#125;; å…³äºç¬¦å·è¡¨å’Œå­—ç¬¦ä¸²è¡¨æ®µï¼Œæˆ‘ä»¬åé¢å†è¯¦ç»†ä»‹ç»ã€‚ 4.LC_DYSYMTAB æ­¤å‘½ä»¤ç”¨æ¥åŠ è½½åŠ¨æ€åº“çš„ç¬¦å·è¡¨ï¼Œå¯¹åº”çš„æ˜¯Dynamic Symbol Tableæ®µçš„æ•°æ®ï¼Œæ­¤å‘½ä»¤çš„å€¼ç»“æ„è¾ƒå¤æ‚ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637struct dysymtab_command &#123; uint32_t cmd; /* LC_DYSYMTAB */ uint32_t cmdsize; /* sizeof(struct dysymtab_command) */ // æœ¬åœ°ç¬¦å·ï¼Œç”¨æ¥è°ƒè¯• uint32_t ilocalsym; // æœ¬åœ°ç¬¦å·çš„ä½ç½® uint32_t nlocalsym; // æœ¬åœ°ç¬¦å·çš„å­—èŠ‚æ•° // å®šä¹‰çš„å¤–éƒ¨ç¬¦å· uint32_t iextdefsym; // å®šä¹‰çš„å¤–éƒ¨ç¬¦å·ä½ç½® uint32_t nextdefsym; // å®šä¹‰çš„å¤–éƒ¨ç¬¦å·å­—èŠ‚æ•° // æœªå®šä¹‰çš„ç¬¦å· uint32_t iundefsym; // æœªå®šä¹‰çš„ç¬¦å·ä½ç½® uint32_t nundefsym; // æœªå®šä¹‰çš„ç¬¦å·å­—èŠ‚æ•° // åŠ¨æ€ç»‘å®šç›¸å…³ uint32_t tocoff; /* file offset to table of contents */ uint32_t ntoc; /* number of entries in table of contents */ uint32_t modtaboff; /* file offset to module table */ uint32_t nmodtab; /* number of module table entries */ uint32_t extrefsymoff; /* offset to referenced symbol table */ uint32_t nextrefsyms; /* number of referenced symbol table entries */ // é—´æ¥ç¬¦å·è¡¨ uint32_t indirectsymoff; /* file offset to the indirect symbol table */ uint32_t nindirectsyms; /* number of indirect symbol table entries */ // é‡å®šä½ç›¸å…³ uint32_t extreloff; /* offset to external relocation entries */ uint32_t nextrel; /* number of external relocation entries */ // æœ¬åœ°æ¡ç›®ç›¸å…³ uint32_t locreloff; /* offset to local relocation entries */ uint32_t nlocrel; /* number of local relocation entries */&#125;; 5.LC_LOAD_DYLINKER æ­¤å‘½ä»¤å‘ŠçŸ¥å†…æ ¸éœ€è¦è°ƒç”¨çš„åŠ¨æ€é“¾æ¥å™¨çš„ä½ç½®ï¼Œå€¼ç»“æ„å®šä¹‰å¦‚ä¸‹ï¼š 123456struct dylinker_command &#123; uint32_t cmd; /* LC_ID_DYLINKER, LC_LOAD_DYLINKER or LC_DYLD_ENVIRONMENT */ uint32_t cmdsize; /* includes pathname string */ union lc_str name; // åŒ…å«é“¾æ¥å™¨çš„è·¯å¾„åç§°å­—ç¬¦ä¸²èµ·å§‹ä½ç½®çš„åç§»ï¼ŒçœŸæ­£çš„åŠ¨æ€é“¾æ¥å™¨ä¸€èˆ¬ä¸º/usr/lib/dyld&#125;; 6.LC_UUID æ­¤å‘½ä»¤åŠ è½½æ—¶å¯ä»¥è¯»å–åˆ°ä¸€ä¸ª128ä½çš„UUIDå€¼ï¼Œç»“æ„å¦‚ä¸‹ï¼š 12345struct uuid_command &#123; uint32_t cmd; /* LC_UUID */ uint32_t cmdsize; /* sizeof(struct uuid_command) */ uint8_t uuid[16]; /* the 128-bit uuid */&#125;; 7.LC_LOAD_DYLIB æ­¤å‘½ä»¤ç”¨æ¥åŠ è½½é¢å¤–çš„åŠ¨æ€åº“ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„å‘½ä»¤ï¼Œæœ€ç®€å•çš„iOSåº”ç”¨ä¹Ÿç¦»ä¸å¼€åŠ¨æ€åº“çš„ä½¿ç”¨ï¼Œé€šè¿‡çœŸå®çš„Mach-Oæ–‡ä»¶æˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œé€šå¸¸ä¼šæœ‰å¤šæ¡LC_LOAD_DYLIBå‘½ä»¤ï¼Œæ¯æ¡å‘½ä»¤æŒ‡å®šä¸€ä¸ªè¦åŠ è½½çš„åŠ¨æ€åº“ã€‚æ­¤å‘½ä»¤çš„å€¼ç»“æ„å®šä¹‰å¦‚ä¸‹ï¼š 12345678910111213struct dylib_command &#123; uint32_t cmd; /* LC_ID_DYLIB, LC_LOAD_&#123;,WEAK_&#125;DYLIB, LC_REEXPORT_DYLIB */ uint32_t cmdsize; /* includes pathname string */ struct dylib dylib; // åŠ¨æ€åº“ç»“æ„ä½“&#125;;struct dylib &#123; union lc_str name; // åŠ¨æ€åº“æ‰€åœ¨è·¯å¾„å­—ç¬¦ä¸²çš„èµ·å§‹ä½ç½®ï¼ˆç›¸å¯¹ä¸å½“å‰å‘½ä»¤èµ·å§‹çš„åç§»å­—èŠ‚ï¼‰ uint32_t timestamp; // åº“ç¼–è¯‘æ—¶çš„æ—¶é—´æˆ³ uint32_t current_version; // åŠ¨æ€åº“ç‰ˆæœ¬å· uint32_t compatibility_version; // å…¼å®¹ç‰ˆæœ¬å·&#125;; ä»¥UIKitä¸ºä¾‹ï¼Œä¸€èˆ¬çš„iOSåº”ç”¨éƒ½ä¼šä½¿ç”¨åˆ°è¿™ä¸ªåŠ¨æ€åº“ï¼Œæ­¤å‘½ä»¤å¦‚ä¸‹ï¼š 8.LC_RPATH æ­¤å‘½ä»¤ç”¨æ¥è¿›è¡Œ@rpathå¤–éƒ¨è·¯å¾„å˜é‡çš„æ˜ å°„ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œé™¤äº†ç³»ç»Ÿæœ¬èº«æä¾›äº†ä¸€äº›åŠ¨æ€å…±äº«åº“å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨å¤–éƒ¨è‡ªå®šä¹‰çš„åŠ¨æ€åº“ï¼Œè¿™ç±»å¤–éƒ¨åŠ¨æ€åº“åœ¨åŠ è½½çš„æ—¶å€™ä¹Ÿéœ€è¦ä¸€ä¸ªæ˜ç¡®çš„è·¯å¾„ï¼Œé€šå¸¸åœ¨åŠ è½½å¤–éƒ¨åŠ¨æ€åº“çš„å‘½ä»¤ä¸­ï¼Œåº“çš„è·¯å¾„æ˜¯ä»¥@rpathå¼€å¤´çš„ï¼ŒXcodeçš„ç¼–è¯‘é€‰é¡¹ä¸­å¯ä»¥è‡ªå®šä¹‰è®¾ç½®å¤–éƒ¨åº“çš„å¯»æ‰¾è·¯å¾„ï¼ŒåŒæ—¶ä½¿ç”¨æ­¤å‘½ä»¤è¿›è¡Œè§£æã€‚æ­¤å‘½ä»¤çš„å€¼ç»“æ„å¦‚ä¸‹ï¼š 12345struct rpath_command &#123; uint32_t cmd; /* LC_RPATH */ uint32_t cmdsize; /* includes string */ union lc_str path; &#125;; å…³äºåŠ¨æ€åº“è¿™éƒ¨åˆ†çš„å†…å®¹ï¼Œå¯ä»¥å‚è€ƒä¹‹å‰çš„ä¸€ç¯‡æ–‡ç« ï¼Œå…¶ä¸­æœ‰æ›´è¯¦ç»†çš„ä»‹ç»ã€‚ https://my.oschina.net/u/2340880/blog/5323143 9.LC_FUNCTION_STARTS æ­¤å‘½ä»¤çš„ç»“æ„ä¸LC_CODE_SIGNATUREä¸€è‡´ï¼Œç”¨æ¥æè¿°å‡½æ•°è¡¨æ®µæ‰€åœ¨çš„èµ·å§‹ä½ç½®å’Œå­—èŠ‚æ•°ã€‚å…³äºå‡½æ•°è¡¨ï¼Œåé¢ä¼šå…·ä½“ä»‹ç»ã€‚ å›› æ®µä¸åˆ†åŒºå‰é¢ï¼Œæˆ‘ä»¬å°†å¸¸è§çš„åŠ è½½å‘½ä»¤è¿›è¡Œäº†ä»‹ç»ï¼Œä¹Ÿæœ‰æåˆ°LS_SEGMENTæ˜¯éå¸¸é‡è¦çš„ä¸€ä¸ªå‘½ä»¤ï¼Œå…¶æŒ‡å¯¼ç€å†…æ ¸å¦‚æœå°†Mach-Oæ–‡ä»¶ä¸­çš„å„ä¸ªæ®µæ•°æ®åŠ è½½åˆ°å†…å­˜é‡Œã€‚æ­¤å‘½ä»¤çš„ç»“æ„ä¸­æœ‰ä¸€ä¸ªåä¸ºsegnameçš„å­—æ®µï¼Œå…¶è¡¨ç¤ºè¦åŠ è½½çš„æ®µçš„åå­—ï¼Œå¸¸ç”¨å®å®šä¹‰å¦‚ä¸‹ï¼š 12345678#define SEG_PAGEZERO \"__PAGEZERO\" // ç©ºæŒ‡é’ˆå¼‚å¸¸æ•è·æ®µ#define SEG_TEXT \"__TEXT\" // ä»£ç æ®µ#define SEG_DATA \"__DATA\" // æ•°æ®æ®µ#define SEG_OBJC \"__OBJC\" // OCè¿è¡Œæ—¶æ®µ#define SEG_ICON \"__ICON\" // ICONæ®µ#define SEG_LINKEDIT \"__LINKEDIT\" // é“¾æ¥å™¨ä½¿ç”¨çš„ç¬¦å·å’Œå…¶ä»–è¡¨æ®µ #define SEG_UNIXSTACK \"__UNIXSTACK\" // unixæ ˆæ®µ#define SEG_IMPORT \"__IMPORT\" // dyldæ®µ å…¶ä¸­ï¼Œ__PAGEZEROæ®µåœ¨è¿›å…¥è™šæ‹Ÿå†…å­˜æ—¶æ˜¯ä¸ä¼šåˆ†é…çœŸå®çš„ç‰©ç†åœ°å€çš„ï¼Œå…¶åªæ˜¯å‘Šè¯‰å¼€å‘è€…æ­¤æ®µè™šæ‹Ÿå†…å­˜ä¸èƒ½ä½¿ç”¨ï¼Œæœ€å¤§çš„ä½œç”¨æ˜¯å¦‚æœäº§ç”Ÿäº†ç©ºæŒ‡é’ˆï¼Œä¼šè®¿é—®åˆ°æ­¤æ®µä¸­çš„åœ°å€ï¼Œä¼šç›´æ¥è¢«æ•è·æŠ¥é”™ã€‚ __TEXTæ®µä¸ºä»£ç æ®µï¼Œå…¶ä¸­åˆåŒ…å«å¤šä¸ªåŒºï¼Œå‘½ä»¤ä¸­çš„nsectså­—æ®µæè¿°äº†å½“å‰æ®µæœ‰å¤šå°‘ä¸ªåŒºï¼ŒåŒºçš„ä¿¡æ¯ä¹Ÿåœ¨å‘½ä»¤ä¸­è¿›è¡Œè¯»å–ï¼Œç»“æ„å¦‚ä¸‹ï¼š 1234567891011121314struct section_64 &#123; /* for 64-bit architectures */ char sectname[16]; // åˆ†åŒºå char segname[16]; // æ®µå uint64_t addr; // åˆ†åŒºåœ°å€ uint64_t size; // å­—èŠ‚æ•° uint32_t offset; // åˆ†åŒºåœ¨æ–‡ä»¶ä¸­çš„åç§»é‡ uint32_t align; // å¯¹é½æ–¹å¼ uint32_t reloff; // é‡å®šä½æ¡ç›®åœ¨æ–‡ä»¶ä¸­çš„åç§»é‡ uint32_t nreloc; // é‡å®šä½æ¡ç›®æ•° uint32_t flags; // åˆ†åŒºæ ‡è®° uint32_t reserved1; // é¢„ç•™ uint32_t reserved2; // é¢„ç•™ uint32_t reserved3; // é¢„ç•™&#125;; é€šè¿‡è¿™äº›ä¿¡æ¯å¯ä»¥åœ¨Mach-Oæ–‡ä»¶ä¸­æ‰¾åˆ°å…·ä½“çš„åˆ†åŒºæ‰€åœ¨çš„ä½ç½®ï¼Œå°†å…¶åŠ è½½è¿›å†…å­˜ã€‚ __TEXTæ®µä¸‹ï¼Œå¸¸è§çš„åŒºåˆ—ä¸¾å¦‚ä¸‹ï¼š __textï¼šä¸»ç¨‹åºä»£ç åŒº __stubsï¼šåŠ¨æ€é“¾æ¥æ¡©åŒº __objc_methnameï¼šObjective-Cæ–¹æ³•ååŒº __objc_classnameï¼šObjective-Cç±»ååŒº __objc_methtypeï¼šObjective-Cæ–¹æ³•ç±»å‹åŒº __cstringï¼šç¡¬ç¼–ç çš„Cè¯­è¨€å­—ç¬¦ä¸²åŒº __entitlementsï¼šé…ç½®æ–‡ä»¶åŒº __DATA_CONSTæ®µä¸‹ï¼Œå¸¸è§çš„åˆ†åŒºåˆ—ä¸¾å¦‚ä¸‹ï¼š __gotï¼šNon-Lazy Symbol PointersåŒº __cfstringï¼šç¨‹åºä¸­ä½¿ç”¨çš„CFStringRefåŒº __objc_classlistï¼šObjective-Cç±»åˆ—è¡¨åŒº __objc_protolistï¼šObjective-CåŸå‹åˆ—è¡¨åŒº __objc_imginfoï¼šObjective-Cé•œåƒä¿¡æ¯åŒº __DATAæ®µä¸‹ï¼Œå¸¸è§çš„åˆ†åŒºåˆ—ä¸¾å¦‚ä¸‹ï¼š __objc_constï¼šObjective-Cå¸¸é‡åŒº __objc_selrefsï¼šObjective-Cè‡ªå¼•ç”¨åŒº __objc_classrefsï¼šObjective-Cç±»å¼•ç”¨åŒº __objc_supperrefsï¼šObjective-Cè¶…ç±»å¼•ç”¨åŒº äº” Mach-Oçš„â€åŠ è½½â€œåˆ°åº•åŠ è½½çš„æ˜¯ä»€ä¹ˆç°åœ¨ï¼Œæˆ‘ä»¬å¯¹Mach-Oæ–‡ä»¶çš„æ•´ä½“æ¶æ„å·²ç»æœ‰äº†æ¸…æ™°çš„äº†è§£ï¼Œå¦‚æœå°†ä¸€ä¸ªMach-Oæ–‡ä»¶æ¯”ä½œä¸€ä¸ªå®Œæˆçš„å·¥ç¨‹äº§å“ï¼Œåˆ™æ–‡ä»¶å¤´å¥½æ¯”æ˜¯æ­¤äº§å“çš„ä¿¡æ¯è¡¨ï¼Œè®°å½•äº†äº§å“çš„ä¸€äº›åŸºç¡€ä¿¡æ¯ã€‚åŠ è½½å‘½ä»¤åˆ™æ˜¯äº§å“çš„ç»„è£…è¯´æ˜ä¹¦ï¼Œç”¨æ¥å…·ä½“æŒ‡å¯¼æ­¤å·¥ç¨‹äº§å“çš„ç»„è£…ï¼Œä¹‹åçš„å†…å®¹å°±æ˜¯ä¸€ä¸ªä¸ªç‹¬ç«‹çš„å·¥ç¨‹ç»„ä»¶ï¼Œæˆ‘ä»¬åªéœ€è¦æŒ‰ç…§è¯´æ˜ä¹¦çš„æè¿°è¿›è¡Œç»„è£…å³å¯ã€‚ä¸‹é¢æˆ‘ä»¬å¯¹å‡ ä¸ªæ ¸å¿ƒçš„åŒºè¿›è¡Œä»‹ç»ã€‚ 1.ä»£ç æ®µä»£ç åŒºé¦–å…ˆï¼Œå¯¹äºä¸€ä¸ªiOSåº”ç”¨çš„Mach-Oæ–‡ä»¶æ¥è¯´ï¼Œ__TEXTæ®µ__textåˆ†åŒºæ˜¯å¿…ä¸å¯å°‘çš„ï¼Œå…¶ä¾¿æ˜¯ç¨‹åºçš„æ ¸å¿ƒä»£ç åŒºï¼Œé€šè¿‡å¯è§†åŒ–çš„å·¥å…·å¯ä»¥çœ‹åˆ°ï¼Œå…¶ä¸­æ•°æ®å°±æ˜¯æ±‡ç¼–æŒ‡ä»¤ï¼Œå¦‚ä¸‹ï¼š 2.ä»£ç æ®µåŠ¨æ€é“¾æ¥æ¡©åŒº__TEXTæ®µ__textåŒºä¸­çš„ä»£ç åœ¨è°ƒç”¨çš„åŠ¨æ€é“¾æ¥å‡½æ•°éœ€è¦è¿›è¡Œç»‘å®šï¼Œ__TEXTæ®µçš„__stubsåŒºä¾¿æ˜¯ç•™çš„åŠ¨æ€é“¾æ¥çš„æ¡©ï¼Œå…¶å…·ä½“çš„è§£æåœ¨Dynamic Symbol TableåŠ¨æ€ç¬¦å·è¡¨æ®µä¸­ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œ__stubsåŒºçš„ç¬¦å·è§£æç»“æœå¦‚ä¸‹ï¼š å¯ä»¥çœ‹åˆ°ï¼Œå¯è§†åŒ–å·¥å…·ä¸­ï¼Œè¿™äº›æ¡©å·²ç»è¢«è§£ææˆäº†å…·ä½“çš„ç¬¦å·ï¼Œé‚£ä¹ˆæ˜¯å¦‚ä½•è§£æçš„å‘¢ã€‚å…¶å®ä¹Ÿå¾ˆç®€å•ï¼Œé¦–å…ˆæ¯6ä¸ªå­—èŠ‚å¯¹åº”ä¸€ä¸ªç¬¦å·ï¼Œä¹‹æ‰€ä»¥æ˜¯6ä¸ªå­—èŠ‚ï¼Œæ˜¯LC_SEGMENTå‘½ä»¤ä¸­çš„Size of Stubså­—æ®µçº¦å®šçš„ï¼Œå¦‚ä¸‹ï¼š å…·ä½“çš„ç¬¦å·å®šä¹‰åœ¨Dynamic Symbol Tableé‡Œé¢ï¼Œä»å‰å¾€åä¸__stubsä¸­çš„æ¡©ä¸€ä¸€å¯¹åº”ï¼Œå¯ä»¥è§‚å¯Ÿä¸‹Dynamic Symbol Tableè¡¨ä¸­çš„æ•°æ®ï¼Œå¦‚ä¸‹ï¼š å¯è§†åŒ–å·¥å…·å·²ç»å¸®æˆ‘ä»¬å°†ç¬¦å·è¿›è¡Œäº†è§£æï¼Œå®é™…ä¸ŠåŠ¨æ€ç¬¦å·è¡¨ä¸­å­˜æ”¾çš„åªæ˜¯ç¬¦å·æ‰€åœ¨ä½ç½®çš„ä¸‹æ ‡ï¼Œå¹¶éæ˜¯ç¬¦å·æœ¬èº«ï¼Œæ‰€æœ‰ç¬¦å·éƒ½è®°å½•åœ¨Symbol Tableä¸­ï¼Œä»¥åŠ¨æ€ç¬¦å·è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªç¬¦å·ä¸ºä¾‹ï¼Œå…¶å­˜å‚¨çš„å€¼ä¸º0xB7ï¼Œè½¬æˆ10è¿›åˆ¶ä¸º183ï¼Œè¡¨ç¤ºç¬¦å·è¡¨ä¸­çš„ç¬¬183ä¸ªç¬¦å·ï¼Œæ‰¾åˆ°Symbol Tableä¸­ä¸‹æ ‡ä¸º183çš„ç¬¦å·ï¼Œå¦‚ä¸‹ï¼š äº‹å®ä¸Šï¼ŒSymbol Tableä¸­è®°å½•çš„æ˜¯ä¸€ç§æ ‡å‡†åŒ–çš„ç¬¦å·ç»“æ„ï¼Œå…¶å¹¶ä¸ä¼šå­˜å…·ä½“çš„ç¬¦å·å­—ç¬¦ä¸²ï¼Œæ‰€æœ‰å­—ç¬¦ä¸²éƒ½å­˜åœ¨å­—ç¬¦ä¸²è¡¨ä¸­ï¼Œä»¥ä¾¿èŠ‚çœå†…å­˜ã€‚å¯ä»¥çœ‹åˆ°ï¼ŒSymbol Tableä¸­ç¬¬183ä¸ªç¬¦å·è®°å½•å…¶åœ¨å­—ç¬¦ä¸²è¡¨ä¸­çš„ä½ç½®ä¸º0xCEï¼Œæˆ‘ä»¬åœ¨æ‰¾åˆ°String Tableï¼Œå…¶èµ·å§‹ä½ç½®ä¸º0xD0A0ï¼ŒåŠ ä¸Šè¿™é‡Œçš„åç§»é‡0xCEä¸º0xD16Eï¼Œè¯´æ˜è¦è§£æçš„ç¬¦å·å­˜æ”¾åœ¨0xD16Eçš„ä½ç½®ï¼ŒString Tableä¸­è®°å½•çš„ç¬¦å·æ˜¯ä»¥0x00ä¸ºåˆ†å‰²çš„ï¼Œæ­¤å¤„çš„åä¸€ä¸ªç¬¦å·åˆšå¥½å°±æ˜¯_NSStringFromClassï¼Œå¦‚ä¸‹ï¼š åˆ°æ­¤ï¼ŒåŠ¨æ€é“¾æ¥æ¡©è¢«è§£æå®Œæˆã€‚å…¶å®é™¤äº†__TEXTæ®µçš„__stubsåŒºï¼Œ__DATA_CONSTæ®µçš„__gotåŒºä¹Ÿæ˜¯é€šè¿‡ç±»ä¼¼çš„æ–¹å¼æ¥ç»‘å®šç¬¦å·çš„ï¼Œåªæ˜¯__gotåŒºçš„ç¬¦å·éœ€è¦é“¾æ¥æ—¶ç»‘å®šï¼Œè€Œ__stubsåŒºçš„ç¬¦å·å…è®¸è¿è¡Œæ—¶ç»‘å®šï¼Œè¿™é‡Œåé¢å°±ä¸å†èµ˜è¿°ã€‚ ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ€»ç»“ä¸Šç¬¦å·ç»‘å®šçš„å®Œæ•´è¿‡ç¨‹ã€‚é¦–å…ˆä»£ç åŒºä¸­çš„ç¬¦å·éœ€è¦åˆ°__stubsåŒºæˆ–__gotåŒºè¿›è¡Œç»‘å®šï¼Œ__stubsåŒºå’Œ__gotåŒºå¯¹åº”çš„åŠ è½½å‘½ä»¤è®°å½•äº†è¿™ä¸¤ä¸ªå»å¯¹åº”çš„ç¬¦å·è§£æçš„å­—èŠ‚æ•°ä»¥åŠåœ¨Dynamic Symbol Tableè¡¨ä¸­çš„èµ·å§‹ä½ç½®ï¼ŒDynamic Symbol Tableè¡¨ä¸­è®°å½•äº†å½“å‰ç¬¦å·åœ¨Symbol Tableè¡¨ä¸­çš„ä¸‹æ ‡ï¼ŒSymbolè¡¨è®°å½•äº†å…·ä½“çš„ç¬¦å·å®ä½“ï¼Œå…¶ä¸­ä¼šåŒ…å«å½“å‰ç¬¦å·åœ¨String Tableä¸­çš„ä½ç½®ï¼Œç¬¦å·ç±»å‹ç­‰ä¿¡æ¯ï¼Œä»String Tableä¸­æ‰¾åˆ°å…·ä½“çš„ç¬¦å·å­—ç¬¦ä¸²ã€‚ 3.Objective-Cæ–¹æ³•ååŒºï¼ŒObjective-Cç±»ååŒºï¼ŒObjective-Cæ–¹æ³•ç±»å‹åŒºï¼ŒCè¯­è¨€å­—ç¬¦ä¸²åŒº__TEXTæ®µçš„çš„__objc_methnameåŒºé¡¾åæ€ä¹‰ï¼Œè®°å½•äº†åº”ç”¨ä¸­æ‰€æœ‰çš„Objective-Cæ–¹æ³•åï¼Œç›´æ¥ä»¥å­—ç¬¦ä¸²çš„æ–¹å¼å­˜å‚¨ã€‚ __TEXTæ®µçš„çš„__objc_classnameåŒºé¡¾åæ€ä¹‰ï¼Œè®°å½•äº†åº”ç”¨ä¸­(éåŠ¨æ€åº“)æ‰€æœ‰çš„Objective-Cç±»åï¼Œç›´æ¥ä»¥å­—ç¬¦ä¸²çš„æ–¹å¼å­˜å‚¨ã€‚ __TEXTæ®µçš„çš„__objc_methtypeåŒºé¡¾åæ€ä¹‰ï¼Œè®°å½•äº†åº”ç”¨ä¸­æ‰€æœ‰çš„Objective-Cæ–¹æ³•çš„ç±»å‹ï¼Œç›´æ¥ä»¥å­—ç¬¦ä¸²çš„æ–¹å¼å­˜å‚¨ã€‚ __TEXTæ®µçš„çš„__cstringåŒºé¡¾åæ€ä¹‰ï¼Œè®°å½•äº†åº”ç”¨ä¸­æ‰€æœ‰çš„Cè¯­è¨€å­—ç¬¦ä¸²ï¼Œç›´æ¥ä»¥å­—ç¬¦ä¸²çš„æ–¹å¼å­˜å‚¨ã€‚ å…­ é€šè¿‡otoolå·¥å…·è§£æMach-Oæ•´ä½“çœ‹æ¥ï¼ŒMach-Oæ–‡ä»¶çš„ç»“æ„è¿˜æ˜¯æ¯”è¾ƒå¤æ‚çš„ï¼Œå¦‚æœæ²¡æœ‰å¯è§†åŒ–çš„å·¥å…·ï¼Œè¦è§£ææ­¤æ–‡ä»¶è¿˜æ˜¯æœ‰äº›å›°éš¾ã€‚é™¤äº†MachOViewå·¥å…·å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨åŸç”Ÿçš„otoolå‘½ä»¤æ¥è·å–Mach-Oæ–‡ä»¶ä¸­çš„è€Œä¸€äº›å†…å®¹ã€‚æ–‡ç« çš„æœ€åï¼Œæˆ‘ä»¬æ¥ä»‹ç»å‡ ä¸ªå¸¸ç”¨çš„å‘½ä»¤ã€‚ 1.æŸ¥çœ‹Mach-Oæ–‡ä»¶å¤´å‘½ä»¤ï¼šotool -h MachOTest.app/MachOTest æˆ– otool -hV MachOTest.app/MachOTest hVå‚æ•°çš„å‘½ä»¤ä¼šè‡ªåŠ¨è¿›è¡Œå¯è§†åŒ–ã€‚ ç¤ºä¾‹ç»“æœï¼š 2.æŸ¥çœ‹Mach-Oçš„åŠ è½½å‘½ä»¤å‘½ä»¤ï¼šotool -lV MachOTest.app/MachOTest ç¤ºä¾‹ç»“æœï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439MachOTest.app/MachOTest:Load command 0 cmd LC_SEGMENT_64 cmdsize 72 segname __PAGEZERO vmaddr 0x0000000000000000 vmsize 0x0000000100000000 fileoff 0 filesize 0 maxprot --- initprot --- nsects 0 flags (none)Load command 1 cmd LC_SEGMENT_64 cmdsize 712 segname __TEXT vmaddr 0x0000000100000000 vmsize 0x0000000000004000 fileoff 0 filesize 16384 maxprot r-x initprot r-x nsects 8 flags (none)Section sectname __text segname __TEXT addr 0x0000000100001fb0 size 0x000000000000051d offset 8112 align 2^4 (16) reloff 0 nreloc 0 type S_REGULARattributes PURE_INSTRUCTIONS SOME_INSTRUCTIONS reserved1 0 reserved2 0Section sectname __stubs segname __TEXT addr 0x00000001000024ce size 0x000000000000003c offset 9422 align 2^1 (2) reloff 0 nreloc 0 type S_SYMBOL_STUBSattributes PURE_INSTRUCTIONS SOME_INSTRUCTIONS reserved1 0 (index into indirect symbol table) reserved2 6 (size of stubs)Section sectname __objc_methname segname __TEXT addr 0x000000010000250a size 0x0000000000000dec offset 9482 align 2^0 (1) reloff 0 nreloc 0 type S_CSTRING_LITERALSattributes (none) reserved1 0 reserved2 0Section sectname __objc_classname segname __TEXT addr 0x00000001000032f6 size 0x0000000000000070 offset 13046 align 2^0 (1) reloff 0 nreloc 0 type S_CSTRING_LITERALSattributes (none) reserved1 0 reserved2 0Section sectname __objc_methtype segname __TEXT addr 0x0000000100003366 size 0x0000000000000b29 offset 13158 align 2^0 (1) reloff 0 nreloc 0 type S_CSTRING_LITERALSattributes (none) reserved1 0 reserved2 0Section sectname __cstring segname __TEXT addr 0x0000000100003e8f size 0x0000000000000016 offset 16015 align 2^0 (1) reloff 0 nreloc 0 type S_CSTRING_LITERALSattributes (none) reserved1 0 reserved2 0Section sectname __entitlements segname __TEXT addr 0x0000000100003ea5 size 0x000000000000010e offset 16037 align 2^0 (1) reloff 0 nreloc 0 type S_REGULARattributes (none) reserved1 0 reserved2 0Section sectname __unwind_info segname __TEXT addr 0x0000000100003fb4 size 0x0000000000000048 offset 16308 align 2^2 (4) reloff 0 nreloc 0 type S_REGULARattributes (none) reserved1 0 reserved2 0Load command 2 cmd LC_SEGMENT_64 cmdsize 472 segname __DATA_CONST vmaddr 0x0000000100004000 vmsize 0x0000000000004000 fileoff 16384 filesize 16384 maxprot rw- initprot rw- nsects 5 flags SG_READ_ONLYSection sectname __got segname __DATA_CONST addr 0x0000000100004000 size 0x0000000000000060 offset 16384 align 2^3 (8) reloff 0 nreloc 0 type S_NON_LAZY_SYMBOL_POINTERSattributes (none) reserved1 10 (index into indirect symbol table) reserved2 0Section sectname __cfstring segname __DATA_CONST addr 0x0000000100004060 size 0x0000000000000020 offset 16480 align 2^3 (8) reloff 0 nreloc 0 type S_REGULARattributes (none) reserved1 0 reserved2 0Section sectname __objc_classlist segname __DATA_CONST addr 0x0000000100004080 size 0x0000000000000018 offset 16512 align 2^3 (8) reloff 0 nreloc 0 type S_REGULARattributes NO_DEAD_STRIP reserved1 0 reserved2 0Section sectname __objc_protolist segname __DATA_CONST addr 0x0000000100004098 size 0x0000000000000020 offset 16536 align 2^3 (8) reloff 0 nreloc 0 type S_REGULARattributes (none) reserved1 0 reserved2 0Section sectname __objc_imageinfo segname __DATA_CONST addr 0x00000001000040b8 size 0x0000000000000008 offset 16568 align 2^2 (4) reloff 0 nreloc 0 type S_REGULARattributes (none) reserved1 0 reserved2 0Load command 3 cmd LC_SEGMENT_64 cmdsize 632 segname __DATA vmaddr 0x0000000100008000 vmsize 0x0000000000004000 fileoff 32768 filesize 16384 maxprot rw- initprot rw- nsects 7 flags (none)Section sectname __objc_const segname __DATA addr 0x0000000100008000 size 0x0000000000001368 offset 32768 align 2^3 (8) reloff 0 nreloc 0 type S_REGULARattributes (none) reserved1 0 reserved2 0Section sectname __objc_selrefs segname __DATA addr 0x0000000100009368 size 0x0000000000000018 offset 37736 align 2^3 (8) reloff 0 nreloc 0 type S_LITERAL_POINTERSattributes NO_DEAD_STRIP reserved1 0 reserved2 0Section sectname __objc_classrefs segname __DATA addr 0x0000000100009380 size 0x0000000000000010 offset 37760 align 2^3 (8) reloff 0 nreloc 0 type S_REGULARattributes NO_DEAD_STRIP reserved1 0 reserved2 0Section sectname __objc_superrefs segname __DATA addr 0x0000000100009390 size 0x0000000000000008 offset 37776 align 2^3 (8) reloff 0 nreloc 0 type S_REGULARattributes NO_DEAD_STRIP reserved1 0 reserved2 0Section sectname __objc_ivar segname __DATA addr 0x0000000100009398 size 0x0000000000000008 offset 37784 align 2^3 (8) reloff 0 nreloc 0 type S_REGULARattributes (none) reserved1 0 reserved2 0Section sectname __objc_data segname __DATA addr 0x00000001000093a0 size 0x00000000000000f0 offset 37792 align 2^3 (8) reloff 0 nreloc 0 type S_REGULARattributes (none) reserved1 0 reserved2 0Section sectname __data segname __DATA addr 0x0000000100009490 size 0x0000000000000180 offset 38032 align 2^3 (8) reloff 0 nreloc 0 type S_REGULARattributes (none) reserved1 0 reserved2 0Load command 4 cmd LC_SEGMENT_64 cmdsize 72 segname __LINKEDIT vmaddr 0x000000010000c000 vmsize 0x0000000000008000 fileoff 49152 filesize 29600 maxprot r-- initprot r-- nsects 0 flags (none)Load command 5 cmd LC_DYLD_CHAINED_FIXUPS cmdsize 16 dataoff 49152 datasize 680Load command 6 cmd LC_DYLD_EXPORTS_TRIE cmdsize 16 dataoff 49832 datasize 216Load command 7 cmd LC_SYMTAB cmdsize 24 symoff 50072 nsyms 203 stroff 53408 strsize 6144Load command 8 cmd LC_DYSYMTAB cmdsize 80 ilocalsym 0 nlocalsym 175 iextdefsym 175 nextdefsym 8 iundefsym 183 nundefsym 20 tocoff 0 ntoc 0 modtaboff 0 nmodtab 0 extrefsymoff 0 nextrefsyms 0 indirectsymoff 53320 nindirectsyms 22 extreloff 0 nextrel 0 locreloff 0 nlocrel 0Load command 9 cmd LC_LOAD_DYLINKER cmdsize 32 name /usr/lib/dyld (offset 12)Load command 10 cmd LC_UUID cmdsize 24 uuid 05EC375B-F3C2-3C5A-99D2-28FB938FF144Load command 11 cmd LC_BUILD_VERSION cmdsize 32 platform IOSSIMULATOR minos 15.5 sdk 15.5 ntools 1 tool LD version 764.0Load command 12 cmd LC_SOURCE_VERSION cmdsize 16 version 0.0Load command 13 cmd LC_MAIN cmdsize 24 entryoff 8672 stacksize 0Load command 14 cmd LC_LOAD_DYLIB cmdsize 88 name /System/Library/Frameworks/Foundation.framework/Foundation (offset 24) time stamp 2 Thu Jan 1 08:00:02 1970 current version 1860.0.0compatibility version 300.0.0Load command 15 cmd LC_LOAD_DYLIB cmdsize 56 name /usr/lib/libobjc.A.dylib (offset 24) time stamp 2 Thu Jan 1 08:00:02 1970 current version 228.0.0compatibility version 1.0.0Load command 16 cmd LC_LOAD_DYLIB cmdsize 56 name /usr/lib/libSystem.B.dylib (offset 24) time stamp 2 Thu Jan 1 08:00:02 1970 current version 1311.120.1compatibility version 1.0.0Load command 17 cmd LC_LOAD_DYLIB cmdsize 96 name /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation (offset 24) time stamp 2 Thu Jan 1 08:00:02 1970 current version 1860.0.0compatibility version 150.0.0Load command 18 cmd LC_LOAD_DYLIB cmdsize 80 name /System/Library/Frameworks/UIKit.framework/UIKit (offset 24) time stamp 2 Thu Jan 1 08:00:02 1970 current version 5610.0.0compatibility version 1.0.0Load command 19 cmd LC_RPATH cmdsize 40 path @executable_path/Frameworks (offset 12)Load command 20 cmd LC_FUNCTION_STARTS cmdsize 16 dataoff 50048 datasize 24Load command 21 cmd LC_DATA_IN_CODE cmdsize 16 dataoff 50072 datasize 0Load command 22 cmd LC_CODE_SIGNATURE cmdsize 16 dataoff 59552 datasize 19200 3.æŸ¥çœ‹ä¾èµ–çš„åŠ¨æ€åº“å‘½ä»¤ï¼šotool -L MachOTest.app/MachOTest ç¤ºä¾‹ç»“æœï¼š 123456MachOTest.app/MachOTest: /System/Library/Frameworks/Foundation.framework/Foundation (compatibility version 300.0.0, current version 1860.0.0) /usr/lib/libobjc.A.dylib (compatibility version 1.0.0, current version 228.0.0) /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1311.120.1) /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation (compatibility version 150.0.0, current version 1860.0.0) /System/Library/Frameworks/UIKit.framework/UIKit (compatibility version 1.0.0, current version 5610.0.0) ä¸“æ³¨æŠ€æœ¯ï¼Œæ‡‚çš„çƒ­çˆ±ï¼Œæ„¿æ„åˆ†äº«ï¼Œåšä¸ªæœ‹å‹ QQï¼š316045346","categories":[{"name":"iOSä¹‹é€»è¾‘åˆçª¥","slug":"iOSä¹‹é€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSä¹‹é€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSä¹‹é€»è¾‘åˆçª¥","slug":"iOSä¹‹é€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSä¹‹é€»è¾‘åˆçª¥/"}]},{"title":"iOSåˆ†äº«æ‰©å±•æ”¯æŒè‡ªå®šä¹‰è”ç³»äºº","slug":"450iOSåˆ†äº«æ‰©å±•æ”¯æŒè‡ªå®šä¹‰è”ç³»äºº","date":"2022-08-16T16:00:00.000Z","updated":"2022-08-17T07:09:00.808Z","comments":true,"path":"2022/08/17/450iOSåˆ†äº«æ‰©å±•æ”¯æŒè‡ªå®šä¹‰è”ç³»äºº/","link":"","permalink":"http://huishao.cc/2022/08/17/450iOSåˆ†äº«æ‰©å±•æ”¯æŒè‡ªå®šä¹‰è”ç³»äºº/","excerpt":"","text":"iOSåˆ†äº«æ‰©å±•æ”¯æŒè‡ªå®šä¹‰è”ç³»äººiOSå¯ä»¥é€šè¿‡æ·»åŠ Share Extensionæ¥æ‰©å±•ç³»ç»Ÿçš„åˆ†äº«ç»„ä»¶ï¼Œèƒ½å¤Ÿæ”¯æŒå°†ç½‘é¡µï¼Œå›¾ç‰‡ï¼ŒéŸ³ä¹æˆ–ä»»ä½•æ¥å…¥äº†ç³»ç»Ÿåˆ†äº«ç»„ä»¶åŠŸèƒ½çš„åº”ç”¨åˆ†äº«åˆ°æˆ‘ä»¬è‡ªå·±çš„Appå†…ã€‚åˆ†äº«Extensionçš„ä»‹ç»å¯ä»¥åœ¨å¦‚ä¸‹æ–‡ç« ä¸­æŸ¥çœ‹ï¼š https://my.oschina.net/u/2340880/blog/485656 å¦‚æœä½ æœ‰ä½¿ç”¨è¿‡æŠ–éŸ³ï¼Œä½ ä¼šå‘ç°æŠ–éŸ³ä¸ä»…æä¾›äº†åˆ†äº«æ‰©å±•ï¼Œä¹Ÿæä¾›äº†æ›´åŠ ä¾¿æ·çš„åˆ†äº«åˆ°è”ç³»äººçš„åŠŸèƒ½ï¼Œåœ¨ç³»ç»Ÿçš„åˆ†äº«é¢æ¿ä¸­å¯ä»¥çœ‹åˆ°æ¨èçš„æŠ–éŸ³è”ç³»äººä¿¡æ¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š é€šè¿‡è”ç³»äººæ¨èå…¥å£ï¼Œæˆ‘ä»¬å¯ä»¥å¿«é€Ÿçš„å°†å†…å®¹åˆ†äº«åˆ°æŒ‡å®šçš„è”ç³»äººï¼Œéå¸¸æ–¹ä¾¿ã€‚ è¦å‘ç³»ç»Ÿåˆ†äº«ç»„ä»¶ä¸­æ·»åŠ æ¨èè”ç³»äººåŠŸèƒ½ä¹Ÿéå¸¸ç®€å•ï¼Œåªå°†åˆ†äº«æ‰©å±•éœ€è¦ç»“åˆINSendMessageIntentè¿›è¡Œä½¿ç”¨å³å¯ã€‚ç®€å•æ¥è¯´ï¼Œåˆ†ä¸º3æ­¥ï¼š 1. ä¸ºåº”ç”¨å·¥ç¨‹æ·»åŠ ä¸€ä¸ªShare Extensionçš„æ‰©å±•ã€‚ 2. å£°æ˜å¯¹INSendMessageIntentæ„å›¾ç±»å‹çš„æ”¯æŒã€‚ 3. ä½¿ç”¨ä»£ç æ³¨å…¥ä¸€äº›INSendMessageIntentæ„å›¾åˆ°æ‰©å±•ä¸­ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆæ¥åšç¬¬ä¸€æ­¥ï¼Œæ–°å»ºä¸€ä¸ªShare Extensionï¼Œé€‰æ‹©å¦‚ä¸‹å›¾çš„Targetæ’ä»¶å³å¯ï¼š æš‚æ—¶æˆ‘ä»¬å…ˆä¸ç¼–å†™ä»»ä½•é¢å¤–çš„ä»£ç ã€‚ ä¹‹åï¼Œåœ¨å®¿ä¸»Appå·¥ç¨‹çš„Info.plistæ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹é”®å€¼ï¼š åœ¨Extensionçš„Info.plistä¸­æ·»åŠ å¦‚ä¸‹é”®å€¼ï¼š éœ€è¦æ³¨æ„ï¼Œå®¿ä¸»Appå’Œæ‰©å±•æ’ä»¶ä¸­çš„Info.plistæ–‡ä»¶éƒ½è¦å¤„ç†ï¼Œç¼ºä¸€ä¸å¯ã€‚ æœ€åï¼Œæˆ‘ä»¬åœ¨å®¿ä¸»Appä¸­æ‰§è¡Œå¦‚ä¸‹ä»£ç å³å¯æ³¨å…¥æ„å›¾ï¼š 123456789101112// è”ç³»äººåå­—INSpeakableString *groupName = [[INSpeakableString alloc] initWithSpokenPhrase:@\"ç²å°‘\"];// è”ç³»äººå›¾ç‰‡INImage *image = [INImage imageWithImageData:UIImagePNGRepresentation([UIImage imageNamed:@\"aa\"])];// åˆ›å»ºæ„å›¾å¯¹è±¡INSendMessageIntent *intent = [[INSendMessageIntent alloc] initWithRecipients:nil content:nil speakableGroupName:groupName conversationIdentifier:@\"huishao.id\" serviceName:nil sender:nil];[intent setImage:image forParameterNamed:@\"groupName\"];// è¿›è¡Œæ³¨å…¥self.interaction = [[INInteraction alloc] initWithIntent:intent response:nil];[self.interaction donateInteractionWithCompletion:^(NSError * _Nullable error) &#123; &#125;]; ä¹‹åï¼Œè¿è¡ŒAppï¼Œåœ¨ç³»ç»Ÿçš„åˆ†äº«é¢æ¿ä¸­å¯ä»¥çœ‹åˆ°æˆ‘ä»¬æ³¨å…¥çš„æ¨èè”ç³»äººä¿¡æ¯äº†ï¼Œå¦‚å›¾ï¼š å‚è€ƒæ–‡æ¡£ï¼š https://developer.apple.com/documentation/foundation/app_extension_support/supporting_suggestions_in_your_app_s_share_extension?language=objc ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€” ç²å°‘ QQ ç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹é€»è¾‘åˆçª¥","slug":"iOSä¹‹é€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSä¹‹é€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSä¹‹é€»è¾‘åˆçª¥","slug":"iOSä¹‹é€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSä¹‹é€»è¾‘åˆçª¥/"}]},{"title":"ç†è§£JavaScriptä¸­çš„â€œé¢å‘å¯¹è±¡â€","slug":"449ç†è§£JavaScriptä¸­çš„â€œé¢å‘å¯¹è±¡â€","date":"2022-08-04T16:00:00.000Z","updated":"2022-08-05T09:54:26.902Z","comments":true,"path":"2022/08/05/449ç†è§£JavaScriptä¸­çš„â€œé¢å‘å¯¹è±¡â€/","link":"","permalink":"http://huishao.cc/2022/08/05/449ç†è§£JavaScriptä¸­çš„â€œé¢å‘å¯¹è±¡â€/","excerpt":"","text":"ç†è§£JavaScriptä¸­çš„â€œé¢å‘å¯¹è±¡â€ä¸€ å¼•å­é¢å‘å¯¹è±¡ï¼Œæ˜¯ç¨‹åºå¼€å‘è€…å†ç†Ÿæ‚‰ä¸è¿‡çš„ä¸€ä¸ªæ¦‚å¿µã€‚ä¸€è¯´åˆ°å®ƒï¼Œä½ é¦–å…ˆä¼šæƒ³åˆ°çš„æ˜¯ä»€ä¹ˆï¼Ÿç±»ï¼Ÿç»§æ‰¿ï¼Ÿæ–¹æ³•ä¸å±æ€§ï¼Ÿä¸åŒæŠ€æœ¯æ ˆçš„å¼€å‘è€…æˆ–è®¸æœ‰ä¸åŒçš„ç¬¬ä¸€ååº”ã€‚é¢å‘å¯¹è±¡æœ¬èº«åªæ˜¯ä¸€ç§ç¼–ç¨‹æ–¹å¼ï¼Œæ”¯æŒé¢å‘å¯¹è±¡çš„è¯­è¨€å¾ˆå¤šï¼Œä½†å…¶å®ç°åŸç†å´å¹¶ä¸éƒ½ä¸€æ ·ã€‚å¤§å¤šæ•°è¯­è¨€çš„é¢å‘å¯¹è±¡ç‰¹æ€§éƒ½æ˜¯åŸºäºâ€œç±»â€æ¥å®ç°çš„ï¼Œä¾‹å¦‚C++ï¼ŒObjective-Cï¼ŒJavaï¼ŒPythonç­‰ã€‚åœ¨è¿™äº›è¯­è¨€ä¸­ï¼Œç±»æ˜¯é¢å‘å¯¹è±¡çš„åŸºç¡€ï¼Œé¢å‘å¯¹è±¡çš„ç»§æ‰¿ï¼Œå¤šæ€ï¼Œå°è£…ä¹Ÿæ˜¯é€šè¿‡ç±»æ¥å®ç°çš„ã€‚ æœ¬ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬è¦è®²çš„æ˜¯ç¼–ç¨‹è¯­è¨€ä¸­çš„ä¸€ä¸ªå¼‚ç±»ï¼šJavaScriptã€‚JavaScriptä¸ä»…æ˜¯é¢å‘å¯¹è±¡è¯­è¨€ï¼Œè€Œä¸”æ˜¯å®å®åœ¨åœ¨çš„é¢å‘å¯¹è±¡ï¼Œé™¤äº†åŸºç¡€ç±»å‹ï¼Œä½ æ‰€ç”¨åˆ°çš„ä¸€äº›æ•°æ®å®ä¾‹éƒ½æ˜¯å¯¹è±¡ï¼ŒåŒ…æ‹¬å‡½æ•°ã€‚ä½†æ˜¯ï¼ŒJavaScriptä¸­çš„é¢å‘å¯¹è±¡å´å¹¶ä¸æ˜¯åŸºäºç±»æ¥å®ç°çš„ï¼Œè¿™å¯¹ç†Ÿæ‚‰å…¶ä»–ç¼–ç¨‹è¯­è¨€çš„å¼€å‘è€…æ¥è¯´ï¼Œæ˜¯æœ‰äº›åç›´è§‰çš„ã€‚å®Œå…¨äº†è§£JavaScriptä¸­çš„é¢å‘å¯¹è±¡ï¼Œ èƒ½å¤Ÿå¸®åŠ©ä½ æ›´å¥½çš„ç†è§£JavaScriptè¿™é—¨è¯­è¨€çš„å·¥ä½œåŸç†ã€‚ç°åœ¨ï¼ŒTypeScriptè¶Šæ¥è¶Šçƒ­é—¨ï¼Œè¶Šæ¥è¶Šå¤šçš„åº”ç”¨æ¡†æ¶å¼€å§‹ä»¥TypeScriptä½œä¸ºé¦–é€‰è¯­è¨€ï¼ŒTypeScriptåªæ˜¯JavaScriptåŸºäºç¼–è¯‘å±‚é¢çš„å°è£…ï¼Œå› æ­¤äº†è§£äº†JavaScriptçš„åŸç†ï¼Œä¹Ÿèƒ½è®©ä½ æ›´å¥½æ›´é«˜æ•ˆçš„ä½¿ç”¨TypeScriptã€‚ äºŒ â€œé¢å‘å¯¹è±¡â€çš„ç¼–ç¨‹æ–¹å¼æ˜¯å¦‚ä½•æ¼”è¿›è€Œæ¥çš„ä»€ä¹ˆæ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Ÿæˆ‘ä»¬å¯ä»¥ä»å…¶3ä¸ªç‰¹ç‚¹è¯´èµ·ï¼š å°è£… å°è£…æ˜¯å°†æ•°æ®å’Œé€»è¾‘æ†ç»‘åˆ°ä¸€èµ·ï¼Œå¯¹è±¡çš„æŸäº›æ•°æ®å’Œé€»è¾‘æ–¹æ³•å¯ä»¥æ˜¯ç§æœ‰çš„ï¼Œä¸èƒ½è¢«å¤–ç•Œè®¿é—®ï¼Œä»¥æ­¤å®ç°å¯¹æ•°æ®å’Œé€»è¾‘æ–¹æ³•ä¸åŒçº§åˆ«çš„è®¿é—®æƒé™ã€‚é˜²æ­¢äº†ç¨‹åºç›¸äº’ä¾èµ–æ€§è€Œå¸¦æ¥çš„å˜åŠ¨å½±å“ï¼Œé¢å‘å¯¹è±¡çš„å°è£…æ¯”ä¼ ç»Ÿè¯­è¨€çš„å°è£…æ›´ä¸ºæ¸…æ™°ã€æ›´ä¸ºæœ‰åŠ›ã€‚æœ‰æ•ˆå®ç°äº†ä¸¤ä¸ªç›®æ ‡ï¼šå¯¹æ•°æ®å’Œè¡Œä¸ºçš„åŒ…è£…å’Œä¿¡æ¯éšè—ã€‚ ç»§æ‰¿ ç»§æ‰¿ç®€å•åœ°è¯´å°±æ˜¯ä¸€ç§å±‚æ¬¡æ¨¡å‹ï¼Œè¿™ç§å±‚æ¬¡æ¨¡å‹èƒ½å¤Ÿè¢«é‡ç”¨ã€‚å±‚æ¬¡ç»“æ„çš„ä¸Šå±‚å…·æœ‰é€šç”¨æ€§ï¼Œä½†æ˜¯ä¸‹å±‚ç»“æ„åˆ™å…·æœ‰ç‰¹æ®Šæ€§ã€‚åœ¨ç»§æ‰¿çš„è¿‡ç¨‹ä¸­ç±»åˆ™å¯ä»¥ä»æœ€é¡¶å±‚çš„éƒ¨åˆ†ç»§æ‰¿ä¸€äº›æ–¹æ³•å’Œå˜é‡ã€‚ç±»é™¤äº†å¯ä»¥ç»§æ‰¿ä»¥å¤–åŒæ—¶è¿˜èƒ½å¤Ÿè¿›è¡Œä¿®æ”¹æˆ–è€…æ·»åŠ ã€‚é€šè¿‡è¿™æ ·çš„æ–¹å¼èƒ½å¤Ÿæœ‰æ•ˆæé«˜å·¥ä½œæ•ˆç‡ã€‚ å¤šæ€ å¤šæ€æ€§æ˜¯æŒ‡ç›¸åŒçš„æ“ä½œæˆ–å‡½æ•°ã€è¿‡ç¨‹å¯ä½œç”¨äºå¤šç§ç±»å‹çš„å¯¹è±¡ä¸Šå¹¶è·å¾—ä¸åŒçš„ç»“æœã€‚ä¸åŒçš„å¯¹è±¡ï¼Œæ”¶åˆ°åŒä¸€æ¶ˆæ¯å¯ä»¥äº§ç”Ÿä¸åŒçš„ç»“æœï¼Œè¿™ç§ç°è±¡ç§°ä¸ºå¤šæ€æ€§ã€‚ å°è£…ï¼Œç»§æ‰¿ï¼Œå¤šæ€ç»„æˆäº†é¢å‘å¯¹è±¡ç¼–ç¨‹çš„åŸºæœ¬ç‰¹æ€§ï¼Œå„ç§é¢å‘å¯¹è±¡è¯­è¨€çš„è®¾è®¡ä¹Ÿæ˜¯å›´ç»•è¿™3ä¸ªç‰¹æ€§å±•å¼€çš„ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥ç†è§£ã€‚ä¾‹å¦‚æˆ‘ä»¬éœ€è¦ç¼–å†™ç¨‹åºæ¥è®¡ç®—ä¸€ä¸ªåœ†çš„é¢ç§¯ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œè®¡ç®—åœ†çš„é¢ç§¯éœ€è¦ä¸¤ä¸ªå‚æ•°ï¼Œåœ†å‘¨ç‡ä¸åŠå¾„ã€‚æŒ‰ç…§é¢å‘è¿‡ç¨‹çš„æ€è·¯ï¼Œæœ€åŸå§‹çš„ä»£ç å¯èƒ½æ˜¯è¿™æ ·çš„ï¼š 1234567let radius = 2;let pi = 3.14;function area()&#123; return pi * radius * radius;&#125;console.log(area()); æ­¤æ—¶ï¼Œæ•°æ®å’Œé€»è¾‘éå¸¸åˆ†æ•£ä¸”ç‹¬ç«‹ï¼Œä¸ºäº†æ›´å¥½çš„å®ç°ç¼–ç¨‹çš„å°è£…æ€§ï¼Œæˆ‘ä»¬å¯ä»¥å°†è®¡ç®—åœ†é¢ç§¯æ‰€ä½¿ç”¨çš„å˜é‡å’Œæ–¹æ³•éƒ½èšåˆåˆ°ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œé€šè¿‡å¯¹è±¡æ¥æ•´åˆæ•°æ®ä¸è°ƒç”¨æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š 123456789let circle = &#123; radius:2, pi:3.14, s:function()&#123; return this.pi * this.radius * this.radius &#125;&#125;console.log(circle.s()); è¿™æ ·ï¼Œæˆ‘ä»¬å…¶å®å°±å·²ç»å°†é¢å‘è¿‡ç¨‹çš„ç¼–ç¨‹æ–¹å¼è½¬æ¢æˆäº†é¢å‘å¯¹è±¡çš„ç¼–ç¨‹æ–¹å¼ã€‚å°è£…æœ¬èº«ä¹Ÿæ˜¯ä¸€ç§å¯¹ç°å®ç”Ÿæ´»äº‹ç‰©çš„æŠ½è±¡ï¼Œå¦‚ä¸Šä»£ç ä¸­æ‰€ç¤ºï¼Œcircleå¯¹è±¡ä»æ„ä¹‰ä¸Šå·²ç»èƒ½å¤Ÿæè¿°å›¾å½¢åœ†è¿™æ ·ä¸€ç§äº‹ç‰©ï¼Œå®ƒæ‹¥æœ‰åŠå¾„ï¼Œå æœ‰é¢ç§¯ã€‚ä»å˜é‡å’Œå‡½æ•°åˆ°å±æ€§å’Œæ–¹æ³•ï¼Œç¼–ç¨‹æ–¹å¼å·²ç»å‘ç”Ÿäº†è½¬å˜ã€‚ä½†æ˜¯ï¼Œç›´æ¥åˆ›å»ºå¯¹è±¡çš„æ–¹å¼å®ç°å°è£…ä¾ç„¶éå¸¸ä½çº§ï¼Œæ€è€ƒä¸€ä¸‹ï¼Œç°å®ç”Ÿæ´»ä¸­ä¼šæœ‰å„ç§å„æ ·çš„åœ†ï¼ŒåŠå¾„ä¸åŒçš„åœ†ä¸å¯èƒœæ•°ï¼ŒåŒæ ·åœ¨ç¨‹åºä¸­æˆ‘ä»¬ä¹Ÿä¼šä½¿ç”¨åˆ°å„ç§å„æ ·çš„â€œåœ†â€å¯¹è±¡ï¼Œæ¯æ¬¡éƒ½å¦‚æ­¤åˆ›å»ºå¯¹è±¡éå¸¸ç¹çï¼Œä¸”å¦‚æœé€»è¾‘æœ‰äº†ä¿®æ”¹ï¼Œæ‰€æœ‰çš„å¯¹è±¡éƒ½è¦ä¿®æ”¹ï¼Œä»£ç å°†é€æ¸å˜å¾—ä¸å¯ç»´æŠ¤ã€‚å› æ­¤ï¼Œæˆ‘ä»¬æƒ³åˆ°ä½¿ç”¨æ¨¡æ¿æ–¹æ³•æ¥åˆ›å»ºå¯¹è±¡â€œåœ†â€ï¼Œä½¿å¾—æ­¤å¯¹è±¡çš„åˆ›å»ºé€»è¾‘æ›´åŠ èšåˆï¼Œä¿®æ”¹å’Œæ‰©å±•éƒ½å°†æ›´æ–¹ä¾¿ã€‚ä¼˜åŒ–ä¸Šé¢çš„ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314function Circle(radius) &#123; let circle = &#123;&#125;; circle.radius = radius; circle.pi = 3.14; circle.s = function() &#123; return this.radius * this.radius * this.pi; &#125; return circle;&#125;var c1 = Circle(1);var c2 = Circle(2);console.log(c1.s());console.log(c2.s()); ä¸Šé¢ç¤ºä¾‹ä»£ç ä¸­å¯¹åœ†å¯¹è±¡çš„åˆ›å»ºè¿›è¡Œäº†å°è£…ï¼Œè¿™å°±å¥½åƒCircleæ˜¯ä¸€ä¸ªæ¨¡æ¿ï¼Œä½¿ç”¨æ­¤æ¨¡æ¿æˆ‘ä»¬å¯å¿«é€Ÿçš„åˆ›å»ºå‡ºå„ç§åŠå¾„ä¸åŒçš„åœ†å¯¹è±¡ï¼Œä»å¦ä¸€ä¸ªè§’åº¦ç†è§£ï¼ŒCircleä¹Ÿå¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€ç§ç±»å‹ï¼Œé€šè¿‡æ­¤ç±»å‹ç”Ÿæˆçš„å¯¹è±¡éƒ½æ˜¯â€œåœ†â€å¯¹è±¡ã€‚å¼•å…¥äº†â€œç±»â€çš„æ€æƒ³ï¼Œç¼–ç¨‹ä¾¿èƒ½æ›´å¥½çš„æ¨¡æ‹Ÿç°å®äº‹ç‰©äº†ã€‚åˆ°æ­¤ï¼Œä½ ä¼šå‘ç°ï¼Œåœ¨JavaScriptä¸­ï¼Œâ€œç±»â€æ˜¯å¯ä»¥é€šè¿‡å‡½æ•°çš„æ–¹å¼æ¥å®ç°çš„ã€‚é‚£ä¹ˆç°åœ¨ï¼Œæˆ‘ä»¬å†æ¥æ›´æ·±å…¥çš„è®¨è®ºåŸºäºâ€œç±»â€çš„æ›´å¤šä¼˜åŒ–æŠ€å·§ã€‚ é€šè¿‡å‡½æ•°å®ç°â€œç±»â€çš„ç¼–ç¨‹æ–¹å¼å·²ç»è¿›æ­¥äº†å¾ˆå¤šï¼Œä½†æ˜¯è¿˜ä¸å¤Ÿä¼˜ç§€ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œæ— è®ºæ˜¯æ•°æ®è¿˜æ˜¯å‡½æ•°ï¼Œéƒ½æ˜¯è¦åœ¨å†…å­˜ä¸­å æ®ç©ºé—´çš„ï¼Œå¯¹è±¡ä¸­æœ‰åŒ…è£…å±æ€§å’Œæ–¹æ³•ï¼Œå…¶å®å°±æ˜¯å­˜å‚¨æ•°æ®å’Œå‡½æ•°ï¼Œå¯¹äºæ•°æ®æ¥è¯´ï¼Œæ¯ä¸ªå¯¹è±¡ä¸­å­˜å‚¨çš„å¯èƒ½ä¸åŒï¼Œä¾‹å¦‚ä¸Šé¢çš„åœ†åŠå¾„ï¼Œä¹Ÿå¯èƒ½æ‰€æœ‰å¯¹è±¡å­˜å‚¨çš„éƒ½ä¸€æ ·ï¼Œä¾‹å¦‚ä¸Šé¢çš„åœ†å‘¨ç‡ã€‚å¯¹äºæ–¹æ³•æ¥è¯´ï¼Œåº”è¯¥æ˜¯æ‰€æœ‰å¯¹è±¡æ‰€å…±äº«çš„ï¼Œå°±åƒæ‰€æœ‰åœ†çš„è®¡ç®—é¢ç§¯çš„æ–¹æ³•éƒ½æ˜¯ä¸€æ ·çš„ã€‚å¦‚æœæ¯ä¸ªå¯¹è±¡ä¸­éƒ½å­˜å‚¨å®Œæ•´çš„å‡½æ•°æ–¹æ³•ï¼Œåˆ™è¿™ä¸ä»…éå¸¸å¤šä½™ï¼Œæ›´æ˜¯å¢åŠ äº†æ— è°“çš„å†…å­˜æ¶ˆè€—ã€‚å¦‚ä½•ä¼˜åŒ–è¿™ä¸€ç‚¹å‘¢ï¼Œæˆ‘ä»¬å¯ä»¥æƒ³åˆ°ï¼Œè®¾è®¡æ¨¡å¼ä¸­çš„åŸå‹æ¨¡å¼æ­£æ˜¯ä¸ºå¤„ç†æ­¤ç±»é—®é¢˜è€Œç”Ÿçš„ã€‚ å°†æ–¹æ³•æ”¾å…¥åŸå‹å¯¹è±¡ä¸­ï¼Œé€šè¿‡å¯¹åŸå‹å¯¹è±¡çš„å¼•ç”¨æ¥è®©æ‰€æœ‰å®ä¾‹å¯¹è±¡å…±äº«åŸå‹å¯¹è±¡ä¸­å°è£…çš„æ–¹æ³•ã€‚ä¿®æ”¹ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920var prototype = &#123; s:function () &#123; return this.radius * this.radius * this.pi; &#125;&#125;function Circle(radius) &#123; let circle = &#123;&#125;; circle.radius = radius; circle.pi = 3.14; circle.s = prototype.s return circle;&#125;var c1 = Circle(1);var c2 = Circle(2);console.log(c1.s());console.log(c2.s());// trueconsole.log(c1.s === c2.s); ä¿®æ”¹åçš„ä»£ç ï¼Œæ— è®ºç”Ÿæˆå¤šå°‘å¯¹è±¡ï¼Œæ–¹æ³•éƒ½æ˜¯å…±äº«çš„ã€‚å…¶ä»–è¯­è¨€ä¸­å¦‚æœè¦å…±äº«å±æ€§ï¼Œé€šå¸¸æä¾›çš„æœ‰ç±»å±æ€§æˆ–é™æ€å±æ€§çš„è¯­æ³•ï¼Œæ ¸å¿ƒåŸç†æ˜¯å°†å…±äº«çš„å±æ€§ç»‘å®šåˆ°ç±»ä¸Šè€Œä¸æ˜¯å¯¹è±¡ä¸Šï¼ŒJavaScriptä¸­ä¹Ÿå¯ä»¥è¿™ä¹ˆåšï¼Œå¦‚ä¸‹ï¼š 12345678910111213var prototype = &#123; s:function () &#123; return this.radius * this.radius * Circle.pi; &#125;&#125;function Circle(radius) &#123; let circle = &#123;&#125;; circle.radius = radius; Circle.pi = 3.14; circle.s = prototype.s return circle;&#125; æœ€åï¼Œæˆ‘ä»¬è¿˜è¦æƒ³åŠæ³•å®ç°ç»§æ‰¿å’Œå¤šæ€ï¼Œè¿™æ ·æ‰ç®—æ¯”è¾ƒå®Œå–„çš„é¢å‘å¯¹è±¡ã€‚å¤šæ€æ¯”è¾ƒç®€å•ï¼Œæˆ‘ä»¬åªè¦ç¡®å®šçˆ¶å­ç±»æ–¹æ³•çš„ä¼˜å…ˆçº§å…³ç³»ï¼Œå³å¯é€šè¿‡æ–¹æ³•è¦†å†™å®ç°å¤šæ€ï¼Œç»§æ‰¿ä¹Ÿå¾ˆå¥½ç†è§£ï¼Œé€šè¿‡ä¸€ç§æ–¹å¼å°†çˆ¶ç±»çš„å±æ€§å’Œæ–¹æ³•å…³è”åˆ°å­ç±»ä¸­ï¼Œå³å¯å®ç°ç»§æ‰¿ã€‚æˆ‘ä»¬å¯ä»¥ç¼–å†™å¦‚ä¸‹ä»£ç ï¼š 1234567891011121314function RedUnitCircle() &#123; let circle = &#123;&#125;; circle.parent = Circle(1); circle.radius = 1; circle.color = \"red\"; return circle;&#125;var c3 = RedUnitCircle();if (c3.s === undefined) &#123; console.log(c3.parent.s());&#125; else &#123; console.log(c3.s());&#125; çº¢è‰²å•ä½åœ†ç±»æ˜¯å¯¹åœ†ç±»çš„ä¸€ç§æ´¾ç”Ÿï¼Œå…¶å†…éƒ¨å¢åŠ äº†colorå±æ€§ï¼ŒåŒæ ·å®ƒä¹Ÿæœ‰è®¡ç®—é¢ç§¯çš„æ–¹æ³•ï¼Œæˆ‘ä»¬ä½¿ç”¨parentå±æ€§æ¥æ‰¿æ¥ï¼Œå®é™…ä¸Šï¼Œåœ¨è°ƒç”¨æ–¹æ³•æ—¶ï¼Œé¦–å…ˆéœ€è¦åœ¨å½“å‰å¯¹è±¡ä¸Šæ‰¾ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåœ¨å‘ç»§æ‰¿é“¾ä¸Šä¸€å±‚ä¸€å±‚çš„é€’å½’å¯»æ‰¾ï¼Œç›´åˆ°æœ€ä¸Šå±‚çš„åŸºç±»ã€‚äº‹å®ä¸Šï¼Œåœ¨JavaScriptä¸­ï¼Œæ˜¯é€šè¿‡åŸå‹é“¾æ¥å®ç°ç»§æ‰¿å…³ç³»çš„ï¼Œæˆ‘ä»¬ä¸‹é¢å°†ä¼šä»‹ç»ã€‚ ä¸‰ thisç©¶ç«ŸæŒ‡å‘å“ªé‡Œåœ¨ä½¿ç”¨JavaScriptç¼–ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šä½¿ç”¨åˆ°thisï¼Œåœ¨JavaScriptå‡½æ•°è°ƒç”¨æ—¶ï¼Œå‡½æ•°å†…éƒ¨ä¼šé»˜è®¤è¢«ä¼ å…¥ä¸€ä¸ªéšå«çš„thiså‚æ•°ï¼Œæ­¤thiså‚æ•°æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥ç§°ä¹‹ä¸ºä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œé‚£ä¹ˆå¦‚ä½•ç¡®å®šthisæŒ‡å‘çš„å¯¹è±¡ç©¶ç«Ÿæ˜¯è°å‘¢ï¼Ÿå¯ä»¥åˆ†ä¸ºå¦‚ä¸‹å‡ ç§æƒ…å†µæ¥è®¨è®ºã€‚ 1. å½“å‡½æ•°è¢«ç›´æ¥è°ƒç”¨æ—¶ï¼ŒthisæŒ‡å‘golbalå…¨å±€å¯¹è±¡ï¼ˆnode.jsä¸­ï¼‰ï¼Œå¦‚æœæ˜¯åœ¨æµè§ˆå™¨ç¯å¢ƒè¿è¡Œï¼Œåˆ™æŒ‡å‘windowå¯¹è±¡ã€‚ ä¾‹å¦‚ï¼š 12345function testFunc() &#123; console.log(this);&#125;// globalå¯¹è±¡testFunc(); 2. å½“å‡½æ•°ä½œä¸ºæ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼ŒthisæŒ‡å‘è°ƒç”¨æ–¹æ³•çš„å¯¹è±¡ã€‚ ä¾‹å¦‚ï¼š 12345678var obj = &#123; name:\"name\", log:function()&#123; console.log(this.name); &#125;&#125;// nameobj.log(); 3. å½“è¢«ä½œä¸ºæ„é€ å‡½æ•°è¢«æ‰§è¡Œæ—¶ï¼ŒthisæŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚ ä¾‹å¦‚ï¼š 123456function CreateObj() &#123; this.name = \"name\";&#125;var obj = new CreateObj();// nameconsole.log(obj.name); 4. ä½¿ç”¨bindï¼Œapplyå’Œcallå‡½æ•°ï¼Œèƒ½å¤Ÿæ˜¾å¼çš„æŒ‡å®šå‡½æ•°ä¸­çš„thisæŒ‡å‘ã€‚ ä¾‹å¦‚ï¼š 1234567891011121314151617181920var obj = &#123; name:\"name\"&#125;function log(p) &#123; console.log(this.name, p);&#125;function log2(p) &#123; console.log(this.name, p);&#125;function log3(p) &#123; console.log(this.name, p);&#125;// name Paramlog.call(obj,'Param')// name Paramlog2.apply(obj,['Param']);var newLog3 = log3.bind(obj);// name ParamnewLog3('Param'); å…¶ä¸­ï¼Œcallå’Œapplyå‡½æ•°çš„ä½œç”¨åŸºæœ¬ä¸€è‡´ï¼Œåªæ˜¯å…¶ä¼ å‚çš„ç±»å‹ä¸åŒï¼Œbindå‡½æ•°ç”¨æ¥ç”Ÿæˆä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œæ­¤å‡½æ•°ä¸­çš„thisæ˜¯è¢«ç»‘å®šåˆ°å¯¹åº”çš„å¯¹è±¡ä¸Šçš„ã€‚ ç”±äºJavaScriptçš„è¿™ç§ç‰¹æ€§ï¼Œæˆ‘ä»¬åœ¨å‡½æ•°ä¸­ä½¿ç”¨thisæ—¶ï¼Œå¸¸å¸¸ä¼šæ”¶åˆ°è¿è¡Œæ—¶çš„è°ƒç”¨ç¯å¢ƒå½±å“ã€‚åœ¨ES6ä¸­æä¾›äº†ç®­å¤´å‡½æ•°çš„æ”¯æŒï¼Œåœ¨ç®­å¤´å‡½æ•°ä¸­ï¼Œthisä¼šè¢«ç»‘å®šä¸ºå‡½æ•°å®šä¹‰æ—¶çš„thisæŒ‡å‘ï¼Œä¾‹å¦‚ï¼š 123456789101112131415function create()&#123; return function() &#123; console.log(this); &#125;&#125;function create2()&#123; return () =&gt; &#123; console.log(this); &#125;&#125;var f = &#123;name:\"name\", log:create(),log2:create2()&#125;;//&#123;name: 'name', log: Æ’, log2: Æ’&#125;f.log();// globalf.log2(); TypeScriptæˆ–å…¶ä»–æ”¯æŒEX6çš„ç¼–è¯‘å™¨ä¹Ÿä¼šå°†ç®­å¤´å‡½æ•°ç¼–è¯‘æˆå¦‚ä¸‹æ ·å¼ï¼Œéå¸¸æ¸…æ¥šçš„æè¿°äº†thisåœ¨ç®­å¤´å‡½æ•°ä¸­çš„æŒ‡å‘ï¼š 123456function create2() &#123; var _this = this; return function () &#123; console.log(_this); &#125;;&#125; å›› ç†è§£JavaScriptä¸­çš„é¢å‘å¯¹è±¡å‰é¢è¯´äº†è¿™ä¹ˆå¤šï¼Œæˆ‘ä»¬ç»ˆäºè¦æ¶‰åŠåˆ°JavaScriptæ˜¯å¦‚ä½•å®ç°é¢å‘å¯¹è±¡çš„ç‰¹æ€§äº†ã€‚å‰é¢æœ‰æåˆ°ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‡½æ•°æ¥æ¨¡æ‹Ÿç±»ï¼Œæ„å»ºå‡ºå¯¹è±¡ï¼Œç»§æ‰¿å’Œå¤šæ€ç‰¹æ€§åˆ™æ˜¯é€šè¿‡åŸå‹è®¾è®¡æ¨¡å¼å®ç°ã€‚JavaScriptæœ¬èº«å…¶å®å°±æœ‰è¿™æ ·çš„ä¸€å¥—èƒ½åŠ›ï¼Œä»»ä½•ä¸€ä¸ªå‡½æ•°ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨newå…³é”®å­—è¿›è¡Œè°ƒç”¨æ—¶ï¼Œå…¶éƒ½ä¼šè¢«å½“æˆæ„é€ å‡½æ•°ã€‚æ„é€ å‡½æ•°çš„æ‰§è¡Œè¿‡ç¨‹å¯ä»¥åˆ†ä¸ºå¦‚ä¸‹3æ­¥ï¼š 1. åˆ›å»ºä¸€ä¸ªç©ºçš„å¯¹è±¡ï¼Œå¹¶è®©æ„é€ å‡½æ•°å†…çš„thisæŒ‡å‘æ­¤å¯¹è±¡ã€‚ 2. å°†ç©ºå¯¹è±¡çš„__proto__æŒ‡å‘æ„é€ å‡½æ•°çš„prototypeå¯¹è±¡ã€‚ 3. æ‰§è¡Œæ„é€ å‡½æ•°ï¼Œå¦‚æœæ„é€ å‡½æ•°ç»“æœè¿”å›çš„æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆåŒ…æ‹¬æ— è¿”å›è¯­å¥ï¼‰ï¼Œåˆ™ä¼šè¢«å¿½ç•¥ï¼Œç›´æ¥è¿”å›åˆ›å»ºçš„å¯¹è±¡ã€‚å¦‚æœè¿”å›çš„æ˜¯å¯¹è±¡ç±»å‹ï¼Œåˆ™å¿½ç•¥ä¹‹å‰åˆ›å»ºçš„å¯¹è±¡ã€‚ åœ¨ä½¿ç”¨å¯¹è±¡è®¿é—®å±æ€§æˆ–æ–¹æ³•æ—¶ï¼Œä¼šå…ˆä»å½“å‰å¯¹è±¡ä¸­æŸ¥æ‰¾ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œä¼šå†å‘åŸå‹__proto__ä¸­è¿›è¡ŒæŸ¥æ‰¾ï¼Œä¸€å±‚å±‚å‘ä¸Šï¼Œç›´åˆ°æ‰¾åˆ°å¯¹åº”çš„å±æ€§æ–¹æ³•æˆ–æ²¡æœ‰æ›´ä¸Šå±‚çš„åŸå‹å¯¹è±¡ã€‚ä¾‹å¦‚ï¼š 1234567891011function People(name) &#123; this.name = name;&#125;People.prototype.sayHi = function()&#123; console.log(\"Hello I am \" + this.name);&#125;var jaki = new People(\"Jaki\");// Hello I am Jakijaki.sayHi(); è¦å®ç°ç»§æ‰¿ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹åŸå‹æ¥å®ç°ï¼Œå¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930function People(name) &#123; this.name = name;&#125;People.prototype.sayHi = function()&#123; console.log(\"Hello I am \" + this.name);&#125;function Teacher(name, subject) &#123; People.call(this, name); this.subject = subject;&#125;// ä¿®æ”¹å­ç±»åŸç”ŸæŒ‡å‘function TeacherPrototype()&#123; // é‡å†™çˆ¶ç±»çš„æ–¹æ³• this.sayHi = function() &#123; // è°ƒç”¨çˆ¶ç±»æ–¹æ³• TeacherPrototype.prototype.sayHi.call(this); // å­ç±»è‡ªå·±çš„å®ç° console.log(\"æ•™å­¦ï¼š\"+this.subject); &#125;&#125;// å­ç±»åŸå‹è®¾ç½®TeacherPrototype.prototype = People.prototypeTeacher.prototype = new TeacherPrototype()var teacher = new Teacher(\"Jaki\", \"JavaScript\");//Hello I am Jaki//æ•™å­¦ï¼šJavaScriptteacher.sayHi(); ä»æ•ˆæœå¯ä»¥çœ‹åˆ°ï¼ŒJavaScriptè™½ç„¶æ²¡æœ‰ç±»ï¼Œä½†ä¾ç„¶å®Œæˆäº†é¢å‘å¯¹è±¡çš„æ ¸å¿ƒç‰¹æ€§åŠŸèƒ½ã€‚ äº” å†æ¥æ·±å…¥ç†è§£ä¸‹åŸå‹é“¾å½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡æ—¶ï¼Œå®é™…ä¸Šæ˜¯è°ƒç”¨äº†Objectæ„é€ æ–¹æ³•ï¼Œå› æ­¤ç©ºå¯¹è±¡çš„__proto__åŸå‹æ˜¯æŒ‡å‘Objectå‡½æ•°çš„prototypeçš„ï¼Œå¦‚ä¸‹ï¼š 123456var a = &#123;&#125;;var b = new Object();// &#123;&#125; &#123;&#125;console.log(a, b);// trueconsole.log(a.__proto__ === Object.prototype); åœ¨JavaScriptä¸­ï¼Œå‡½æ•°æœ¬èº«ä¹Ÿæ˜¯å¯¹è±¡ï¼Œå‡½æ•°å¯¹è±¡çš„åŸå‹æ˜¯Functionçš„prototypeï¼Œå¦‚ä¸‹ï¼š 123456var f = function()&#123;&#125;var f2 = new Function();console.log(f, f2);// trueconsole.log(f.__proto__ === Function.prototype); Objectæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå› æ­¤Objectçš„__proto__åŸå‹æŒ‡å‘Functionçš„prototypeï¼ŒåŒç†ï¼ŒFunctionä¹Ÿæ˜¯ä¸€ç§å¯¹è±¡ï¼Œå› æ­¤Functionçš„__proto__æŒ‡å‘Objectçš„prototypeï¼Œåœ¨å‘ä¸ŠObjectçš„prototypeå¯¹è±¡çš„__proto__å°±æ˜¯nulläº†ï¼Œä¾‹å¦‚ï¼š 12345678// trueconsole.log(Object.__proto__ === Function.prototype);// trueconsole.log(Function.__proto__ === Function.prototype);// trueconsole.log(Function.prototype.__proto__ === Object.prototype);// nullconsole.log(Object.prototype.__proto__); åŸå‹é“¾çœ‹ä¸Šå»æœ‰äº›å¤æ‚ï¼Œå€Ÿç”¨ç½‘ä¸Šçš„ä¸€å¼ æè¿°å›¾ï¼Œå¯ä»¥æ¸…æ™°çš„çœ‹å‡ºå…¶é—´å…³ç³»ï¼š ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€” ç²å°‘ QQï¼š316045346 åŒæ—¶ï¼Œå¦‚æœæœ¬ç¯‡æ–‡ç« è®©ä½ è§‰å¾—æœ‰ç”¨ï¼Œæ¬¢è¿åˆ†äº«ç»™æ›´å¤šæœ‹å‹ï¼Œè¯·æ ‡æ˜å‡ºå¤„ã€‚","categories":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}],"tags":[],"keywords":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}]},{"title":"iOSå•å…ƒæµ‹è¯•çš„é‚£äº›äº‹å„¿","slug":"448 iOSå•å…ƒæµ‹è¯•çš„é‚£äº›äº‹å„¿","date":"2022-07-20T16:00:00.000Z","updated":"2022-07-22T11:40:54.201Z","comments":true,"path":"2022/07/21/448 iOSå•å…ƒæµ‹è¯•çš„é‚£äº›äº‹å„¿/","link":"","permalink":"http://huishao.cc/2022/07/21/448 iOSå•å…ƒæµ‹è¯•çš„é‚£äº›äº‹å„¿/","excerpt":"","text":"iOSå•å…ƒæµ‹è¯•çš„é‚£äº›äº‹å„¿ä½œä¸ºå®¢æˆ·ç«¯å¼€å‘ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬è¿‡å¤šçš„å…³æ³¨äºåŠŸèƒ½çš„æµ‹è¯•ï¼Œè€Œå¿½ç•¥æ ‡å‡†çš„å•å…ƒæµ‹è¯•ã€‚å…¶å®ï¼Œå•å…ƒæµ‹è¯•æ˜¯ä¿éšœé¡¹ç›®ç¨³å®šæ€§çš„æœ€æœ‰æ•ˆä¸”æˆæœ¬æœ€ä½çš„æµ‹è¯•æ–¹å¼ã€‚è¶Šåå‘åº•å±‚æœåŠ¡çš„ä»£ç ï¼Œè¶Šéœ€è¦ä½¿ç”¨å•å…ƒæµ‹è¯•æ¥å¯¹å¯é æ€§è¿›è¡Œä¿éšœã€‚ä¸€æ—¦å•å…ƒæµ‹è¯•è¦†ç›–å®Œæˆï¼Œåˆ™ä¹‹åå†è¿›è¡Œä»£ç ä¼˜åŒ–å’Œè¿­ä»£çš„æ—¶å€™åˆ™ä¼šæœ‰å¼•å…¥æ–°é—®é¢˜çš„å‡ ç‡ä¼šå¤§ä¸ºå‡å°ã€‚ Xcodeæä¾›äº†å®Œæ•´çš„å•å…ƒæµ‹è¯•åŠŸèƒ½ï¼Œç³»ç»Ÿé¢„ç½®çš„å•å…ƒæµ‹è¯•ç±»å’Œæ–­è¨€ä¹Ÿéå¸¸æ–¹ä¾¿å¼€å‘è€…ç¼–å†™æµ‹è¯•ä»£ç ã€‚é™¤äº†å‡½æ•°åŠŸèƒ½æµ‹è¯•ï¼Œæ€§èƒ½æµ‹è¯•å¤–ï¼Œä¹Ÿæ”¯æŒè¿›è¡ŒUIä¸Šçš„å•å…ƒæµ‹è¯•ã€‚æœ¬ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬å°±å°†ä»‹ç»iOSä¸­å…³äºå•å…ƒæµ‹è¯•çš„é‚£äº›äº‹ã€‚ ä¸€ å…ˆçœ‹ä¸€ä¸ªç®€å•çš„å•å…ƒæµ‹è¯•ä¾‹å­é¦–å…ˆå¯ä»¥æ–°å»ºä¸€ä¸ªiOSæµ‹è¯•å·¥ç¨‹ï¼Œåœ¨å·¥ç¨‹ä¸­ä»»æ„æ·»åŠ ä¸€ä¸ªç¤ºä¾‹ç±»æ–‡ä»¶ï¼Œä¾‹å¦‚å‘½åä¸ºViewModelç±»ï¼Œå®ç°å¦‚ä¸‹: 123456789101112131415161718192021222324//ViewModel.hæ–‡ä»¶#import &lt;Foundation/Foundation.h&gt;NS_ASSUME_NONNULL_BEGIN@interface ViewModel : NSObject- (NSInteger)getSegementCount:(NSString *)string;@endNS_ASSUME_NONNULL_END//ViewModel.mæ–‡ä»¶#import \"ViewModel.h\"@implementation ViewModel- (NSInteger)getSegementCount:(NSString *)string &#123; return [string componentsSeparatedByString:@\":\"].count;&#125;@end è¿™ä¸ªç±»æœ¬èº«éå¸¸ç®€å•ï¼Œåªæä¾›äº†ä¸€ä¸ªè·å–å­—ç¬¦ä¸²åˆ†æ®µæ•°çš„æ–¹æ³•ã€‚æ­¤æ–¹æ³•åªè¦æœ‰æ˜ç¡®çš„è¾“å…¥å°±ä¼šæœ‰æ˜ç¡®çš„è¾“å‡ºï¼Œéå¸¸é€‚åˆç”¨æ¥åšå•å…ƒæµ‹è¯•ã€‚ä¹‹åï¼Œä½¿ç”¨Xcodeæ–°å»ºä¸€ä¸ªUnit Testing Bundleçš„Targetæ¨¡å—ï¼Œå¦‚ä¸‹å›¾ï¼š ä¹‹åé»˜è®¤ä¼šç”Ÿæˆä¸€ä¸ªæµ‹è¯•æ–‡ä»¶ï¼Œå…¶åªæœ‰.mæ–‡ä»¶ï¼Œæ²¡æœ‰.hæ–‡ä»¶ï¼Œæˆ‘ä»¬çš„ä¸»è¦æµ‹è¯•ä»£ç ä¹Ÿéƒ½å°†ç¼–å†™åˆ°è¿™ä¸ª.mæ–‡ä»¶ä¸­ã€‚ ç”Ÿæˆçš„æµ‹è¯•æ–‡ä»¶ä¸­é»˜è®¤å®ç°äº†setUpï¼ŒtearDownï¼ŒtestExampleå’ŒtestPerformanceExampleè¿™äº›æ–¹æ³•ï¼Œç­‰ä¸‹æˆ‘ä»¬ä¼šå¯¹è¿™äº›æ–¹æ³•è¿›è¡Œä»‹ç»ï¼Œä¿®æ”¹æ­¤æµ‹è¯•æ–‡ä»¶å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829#import &lt;XCTest/XCTest.h&gt;#import \"ViewModel.h\"@interface UnitTestDemoTests : XCTestCase@property (nonatomic, strong) ViewModel *viewModel;@end@implementation UnitTestDemoTests- (void)setUp &#123; self.viewModel = [[ViewModel alloc] init];&#125;- (void)tearDown &#123; self.viewModel = nil;&#125;- (void)testExample &#123; NSInteger count = [self.viewModel getSegementCount:@\"127:0:0:1\"]; XCTAssertEqual(count, 4);&#125;- (void)testPerformanceExample &#123; [self measureBlock:^&#123; NSLog(@\"---\"); &#125;];&#125;@end å…¶ä¸­setUpæ–¹æ³•æ˜¯å½“å‰æµ‹è¯•ç±»çš„åˆå§‹åŒ–æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸€äº›èµ„æºå‡†å¤‡å·¥ä½œåœ¨è¿™ä¸ªæ–¹æ³•ä¸­å®Œæˆï¼ŒtearDownæ–¹å¼åœ¨æµ‹è¯•ç»“æŸåä¼šè°ƒç”¨ï¼Œç”¨æ¥è¿›è¡Œèµ„æºçš„æ¸…ç†ã€‚æµ‹è¯•å‡½æ•°éƒ½éœ€è¦ä»¥textå¼€å¤´ï¼ŒtestExampleæ˜¯é»˜è®¤ç”Ÿæˆçš„ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹å‡½æ•°ï¼Œæˆ‘ä»¬åœ¨å…¶ä¸­æ£€æŸ¥getSegmentCountæ–¹æ³•çš„å·¥ä½œæ˜¯å¦æ­£å¸¸ï¼ŒXCTAssertEqualæ˜¯XCTestæ¡†æ¶æä¾›çš„ä¼—å¤šæµ‹è¯•æ–­è¨€ä¸­çš„ä¸€ç§ï¼Œç”¨æ¥è¿›è¡Œç›¸ç­‰æ–­è¨€ï¼Œå¦‚æœgetSegmentCountæ–¹æ³•æ‰§è¡Œçš„ç»“æœä¸æˆ‘ä»¬é¢„æœŸä¸ä¸€è‡´ï¼Œåˆ™ä¼šå‘½ä¸­æ­¤æ–­è¨€ï¼Œä»è€Œä½¿å½“å‰æµ‹è¯•ç”¨ä¾‹å¤±è´¥ã€‚testPerformanceExampleæ˜¯æ€§èƒ½æµ‹è¯•çš„ä¸€ä¸ªæ¡ˆä¾‹ï¼Œå…¶å†…çš„measureBlocké‡Œçš„ä»£ç ä¼šè¢«é»˜è®¤æ‰§è¡Œ10æ¬¡ï¼Œæœ€ç»ˆè¾“å‡ºæ¯æ¬¡æ‰§è¡Œçš„æ—¶é—´æ¶ˆè€—æŠ¥å‘Šã€‚ ä¸‹é¢ï¼Œæˆ‘ä»¬å¯ä»¥æ‰§è¡Œä¸‹æ­¤æµ‹è¯•ç±»ï¼Œåœ¨Xcodeçš„æµ‹è¯•å¯¼èˆªä¸­ç‚¹å‡»æ­¤æµ‹è¯•ç±»å³è¾¹çš„æ‰§è¡ŒæŒ‰é’®å³å¯ï¼š æ¯ä¸ªæµ‹è¯•æ–¹æ³•çš„ç»“æœä¼šåœ¨å³ä¾§å±•ç¤ºï¼Œç»¿çš„çš„å¯¹å·è¡¨ç¤ºæ­¤æµ‹è¯•ç”¨ä¾‹é€šè¿‡ã€‚ä¹Ÿå¯ä»¥ç›´æ¥åœ¨æµ‹è¯•ç±»æ–‡ä»¶ä¸­æ‰§è¡Œå•ä¸ªçš„æµ‹è¯•ç”¨ä¾‹ï¼Œå¦‚ä¸‹ï¼š å¯¹äºæ€§èƒ½æµ‹è¯•ç”¨ä¾‹ï¼Œå…¶æµ‹è¯•å®Œæˆåä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªæ€§èƒ½æŠ¥å‘Šï¼Œå¯¹æ¯ä¸ªæ€§èƒ½æµ‹è¯•å‡½æ•°ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥ä¸ºå…¶è®¾ç½®ä¸€ä¸ªåŸºå‡†å€¼ï¼Œå…¶ä¼šåˆ†ææ€§èƒ½ä¼˜äºæˆ–åŠ£äºåŸºå‡†å€¼å¤šå°‘ã€‚å¦‚ä¸‹å›¾ï¼š äºŒ å…³äºXCTestCaseç±»XCTestCaseå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ç±»ï¼Œå…¶ä¸­å¯ä»¥å®šä¹‰å¤šä¸ªæµ‹è¯•ç”¨ä¾‹å‡½æ•°ã€‚é€šå¸¸æœ€ä½³çš„å®è·µæ˜¯ä¸€ä¸ªåŠŸèƒ½ç±»å¯¹åº”ä¸€ä¸ªXCTestCaseæµ‹è¯•ç±»ï¼Œåœ¨æ­¤æµ‹è¯•ç±»ä¸­å¯¹ç›¸åº”çš„åŠŸèƒ½ç±»è¿›è¡Œè¦†ç›–æµ‹è¯•ã€‚ è¦å®šä¹‰ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ç±»éå¸¸ç®€å•ï¼Œéµå¾ªå¦‚ä¸‹çš„æ­¥éª¤å³å¯ï¼š 1. åˆ›å»ºä¸€ä¸ªXCTestCaseçš„å­ç±»ã€‚ 2. è‡ªå®šä¹‰ä»¥testå¼€å¤´çš„å®ä¾‹æ–¹æ³•ï¼Œä½œä¸ºç‹¬ç«‹çš„æµ‹è¯•ç”¨ä¾‹ã€‚ 3. å¯ä»¥å®šä¹‰ä¸€äº›éœ€è¦ä¿æŒçŠ¶æ€çš„å˜é‡æˆ–å±æ€§ä½œä¸ºæµ‹è¯•ç‰©æ–™ã€‚ 4. æŸäº›éœ€è¦åˆå§‹åŒ–çš„çŠ¶æ€åœ¨setupæ–¹æ³•ä¸­è®¾ç½®ã€‚ 5. æµ‹è¯•å®Œæˆåçš„æ¸…ç†å·¥ä½œåœ¨tearDownæ–¹æ³•ä¸­è®¾ç½®ã€‚ å¯¹äºè‡ªå®šä¹‰çš„æµ‹è¯•å®ä¾‹æ–¹æ³•ï¼Œæœ‰3ä¸ªéå¸¸é‡è¦çš„åŸåˆ™ï¼Œç¬¦åˆè¿™3ä¸ªåŸåˆ™çš„æ–¹æ³•æ‰ä¼šè¢«ç³»ç»Ÿè¯†åˆ«ä¸ºæµ‹è¯•ç”¨ä¾‹ï¼Œå³ï¼šæ²¡æœ‰å…¥å‚ï¼Œæ²¡æœ‰è¿”å›å€¼ï¼Œä»¥testå¼€å¤´ã€‚ XCTestCaseä¹Ÿæ”¯æŒè¿›è¡Œæ›´å¤šå®šåˆ¶åŒ–é…ç½®ï¼Œä¾‹å¦‚è¶…æ—¶æ—¶é—´ï¼Œæµ‹è¯•å¼‚å¸¸çš„è®°å½•ç­‰ã€‚XCTestCaseç±»ä¸­æä¾›çš„åˆå§‹åŒ–æ–¹æ³•å¦‚ä¸‹ï¼š 1234567891011// é€šè¿‡invocationæ„é€ æµ‹è¯•ç±»+ (instancetype)testCaseWithInvocation:(nullable NSInvocation *)invocation;// å®ä¾‹çš„åˆå§‹åŒ–æ–¹æ³•- (instancetype)initWithInvocation:(nullable NSInvocation *)invocation;// é€šè¿‡selectoræ„é€ æµ‹è¯•ç±»+ (nullable instancetype)testCaseWithSelector:(SEL)selector;// å®ä¾‹æ–¹æ³•- (instancetype)initWithSelector:(SEL)selector; é€šå¸¸ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦å®šåˆ¶XCTestCaseçš„å±æ€§ï¼Œå¯ä»¥åœ¨å­ç±»ä¸­é‡å†™initWithInvocationæ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š 12345678910- (instancetype)initWithInvocation:(nullable NSInvocation *)invocation &#123; self = [super initWithInvocation:invocation]; if (self) &#123; self.continueAfterFailure = NO; [self addTeardownBlock:^&#123; NSLog(@\"TTT\"); &#125;]; &#125; return self;&#125; XCTestCaseç±»ä¸­å°è£…çš„å±æ€§å’Œæ–¹æ³•è§£æå¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940// æµ‹è¯•ç”¨ä¾‹æ‰§è¡Œæ—¶ è°ƒç”¨çš„invocation@property (strong, nullable) NSInvocation *invocation;// æ‰§è¡Œæµ‹è¯•ï¼Œæ­¤æ–¹æ³•åº”è¯¥ç”±ç³»ç»Ÿæ¡†æ¶è°ƒç”¨ï¼Œä¸èƒ½ä¸»åŠ¨è°ƒç”¨- (void)invokeTest;// è®¾ç½®å½“æŸä¸ªæµ‹è¯•ç”¨ä¾‹æ–¹æ³•æ²¡é€šè¿‡æ—¶ï¼Œæ˜¯å¦ç»§ç»­æ‰§è¡Œå…¶åçš„é€»è¾‘@property BOOL continueAfterFailure;// æµ‹è¯•ç”¨ä¾‹ä¸é€šè¿‡åï¼Œä¼šå›è°ƒæ­¤æ–¹æ³•ï¼Œå­ç±»å¯ä»¥é‡å†™æ¥è‡ªå®šä¹‰å¼‚å¸¸æŠ¥å‘Š- (void)recordIssue:(XCTIssue *)issue;// æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹æ‰€å¯¹åº”çš„NSInvocation@property (class, readonly, copy) NSArray&lt;NSInvocation *&gt; *testInvocations;// æ·»åŠ ä¸€ä¸ªè‡ªå®šä¹‰çš„tearDownå›è°ƒ- (void)addTeardownBlock:(void (^)(void))block;// æ·»åŠ ä¸€ä¸ªå¼‚æ­¥æ‰§è¡Œçš„tearDownå›è°ƒ- (void)addAsyncTeardownBlock:(void (^)(void (^completion)(NSError * _Nullable error)))block;// ç”¨ä¾‹æ‰§è¡Œè¶…æ—¶æ—¶é—´ é»˜è®¤10min@property NSTimeInterval executionTimeAllowance;// æ€§èƒ½æµ‹è¯•æ–¹æ³•ï¼Œå°†è¦æµ‹è¯•æ€§èƒ½çš„é€»è¾‘ä»£ç æ”¾å…¥blockå³å¯- (void)measureBlock:(XCT_NOESCAPE void (^)(void))block;// æ€§èƒ½æµ‹è¯•æ–¹æ³•ï¼Œåœ¨blockä¸­éœ€è¦æ‰‹åŠ¨å¯åŠ¨å’Œç»“æŸæ€§èƒ½æµ‹è¯• é…å¥—ä¸‹é¢ä¸¤ä¸ªæ–¹æ³•ä½¿ç”¨- (void)measureMetrics:(NSArray&lt;XCTPerformanceMetric&gt; *)metrics automaticallyStartMeasuring:(BOOL)automaticallyStartMeasuring forBlock:(XCT_NOESCAPE void (^)(void))block;// å¼€å¯æ€§èƒ½æµ‹è¯•- (void)startMeasuring;// ç»“æŸæ€§èƒ½æµ‹è¯•- (void)stopMeasuring;// é»˜è®¤çš„æµ‹è¯•ç»„ï¼Œæ¯ä¸ªæµ‹è¯•æ–¹æ³•éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æµ‹è¯•ç”¨ä¾‹ï¼Œå½“å‰æµ‹è¯•ç±»å¯ä»¥å®šä¹‰ä¸€ç»„@property (class, readonly) XCTestSuite *defaultTestSuite;// æ¯ä¸ªæµ‹è¯•æ–¹æ³•æ‰§è¡Œå‰éƒ½ä¼šæ‰§è¡Œçš„setupæ­¥éª¤+ (void)setUp;// æ¯ä¸ªæµ‹è¯•æ–¹æ³•æ‰§è¡Œå‰éƒ½ä¼šæ‰§è¡Œçš„teardownæ­¥éª¤+ (void)tearDown; XCTestCaseä¹Ÿå®ç°äº†XCTActivityåè®®ï¼Œå…è®¸ç›´æ¥å‘æµ‹è¯•ç”¨ä¾‹å¯¹è±¡ä¸­æ·»åŠ é™„ä»¶ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š 1- (void)addAttachment:(XCTAttachment *)attachment; è¢«æ·»åŠ çš„é™„ä»¶ä¼šè¢«XcodeæŒæœ‰ï¼Œå¹¶æ ¹æ®ç­–ç•¥ä¿å­˜åˆ°æµ‹è¯•æŠ¥å‘Šä¸­å»ã€‚é™„ä»¶æœ‰æ—¶å€™å¯¹æµ‹è¯•æ¥è¯´éå¸¸é‡è¦ï¼Œä¾‹å¦‚è¦ä¿å­˜å¤±è´¥æµ‹è¯•çš„æ¡ˆä¾‹æ•°æ®ï¼Œä»¥ä¾¿å¼€å‘è¿›è¡Œè¿½æº¯ï¼Œè¿™æ˜¯å°±å¯ä»¥å°†æ•°æ®ä½œä¸ºé™„ä»¶ä¿å­˜ã€‚ä¾‹å¦‚ï¼š 12345678- (void)testExample &#123; NSInteger count = [self.viewModel getSegementCount:@\"127:0:0:1\"]; XCTAssertEqual(count, 4); XCTAttachment *attachment = [XCTAttachment attachmentWithString:@\"æˆ‘æ˜¯é™„ä»¶\"]; attachment.lifetime = XCTAttachmentLifetimeKeepAlways; [self addAttachment:attachment]; NSLog(@\"xxx\");&#125; æ‰§è¡Œæµ‹è¯•åï¼Œåœ¨æµ‹è¯•æŠ¥å‘Šä¸­å¯ä»¥æŸ¥çœ‹ç”¨ä¾‹çš„é™„ä»¶æ–‡ä»¶ï¼Œå¦‚ä¸‹å›¾ï¼š å…³äºé™„ä»¶çš„ç›¸å…³å†…å®¹ï¼Œåé¢ä¼šåœ¨ä»‹ç»ã€‚æœ€åï¼Œå…³äºXCTestCaseçš„æ€§èƒ½æµ‹è¯•ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®Optionå‚æ•°æ¥æ§åˆ¶å¾ªç¯æ¬¡æ•°ï¼Œä¾‹å¦‚ï¼š 1234567- (void)testPerformanceExample &#123; XCTMeasureOptions *op = [[XCTMeasureOptions alloc] init]; op.iterationCount = 20; [self measureWithOptions:op block:^&#123; NSLog(@\"---\"); &#125;];&#125; æ­¤æ—¶ï¼Œæ€§èƒ½æµ‹è¯•ä»£ç å°†è¢«å¾ªç¯æ‰§è¡Œ20æ¬¡ã€‚ ä¸‰ æµ‹è¯•é™„ä»¶å‰é¢è¯´è¿‡ï¼Œé™„ä»¶å¯ä»¥ç”¨æ¥ä¿å­˜æµ‹è¯•æ‰§è¡Œæ—¶çš„æ¡ˆä¾‹æ•°æ®ï¼Œå¸®åŠ©å¼€å‘è€…åç»­å›æº¯ã€‚XCTAttachmentç±»å°è£…çš„å¸¸ç”¨å±æ€§å’Œæ–¹æ³•åˆ—ä¸¾å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839// åˆå§‹åŒ–ç›¸å…³- (instancetype)initWithUniformTypeIdentifier:(nullable NSString *)identifier name:(nullable NSString *)name payload:(nullable NSData *)payload userInfo:(nullable NSDictionary *)userInfo;+ (instancetype)attachmentWithUniformTypeIdentifier:(nullable NSString *)identifier name:(nullable NSString *)name payload:(nullable NSData *)payload userInfo:(nullable NSDictionary *)userInfo;// æ–‡ä»¶æ ‡è¯†ç¬¦@property (readonly, copy) NSString *uniformTypeIdentifier;// é™„ä»¶å@property (copy, nullable) NSString *name;// ç”¨æˆ·é™„åŠ æ•°æ®@property (copy, nullable) NSDictionary *userInfo;// é™„ä»¶çš„ç”Ÿå­˜æ—¶é—´/*typedef NS_ENUM(NSInteger, XCTAttachmentLifetime) &#123; // ä¸€ç›´å­˜åœ¨ XCTAttachmentLifetimeKeepAlways = 0, // æµ‹è¯•ç”¨ä¾‹é€šè¿‡åå°†é™„ä»¶åˆ é™¤ XCTAttachmentLifetimeDeleteOnSuccess = 1&#125;;*/@property XCTAttachmentLifetime lifetime;// é€šè¿‡æŒ‡å®šç±»å‹çš„æ•°æ®ç›´æ¥åˆ›å»ºé™„ä»¶+ (instancetype)attachmentWithData:(NSData *)payload;+ (instancetype)attachmentWithData:(NSData *)payload uniformTypeIdentifier:(NSString *)identifier;+ (instancetype)attachmentWithString:(NSString *)string;+ (instancetype)attachmentWithArchivableObject:(id&lt;NSSecureCoding&gt;)object;+ (instancetype)attachmentWithArchivableObject:(id&lt;NSSecureCoding&gt;)object uniformTypeIdentifier:(NSString *)identifier;+ (instancetype)attachmentWithPlistObject:(id)object;+ (instancetype)attachmentWithContentsOfFileAtURL:(NSURL *)url;+ (instancetype)attachmentWithContentsOfFileAtURL:(NSURL *)url uniformTypeIdentifier:(NSString *)identifier;+ (instancetype)attachmentWithCompressedContentsOfDirectoryAtURL:(NSURL *)url;+ (instancetype)attachmentWithImage:(UIImage *)image;+ (instancetype)attachmentWithImage:(UIImage *)image quality:(XCTImageQuality)quality; å›› æµ‹è¯•æ–­è¨€æµ‹è¯•ç”¨ä¾‹çš„é€šè¿‡ä¸å¦æ˜¯ç”±æ–­è¨€å†³å®šçš„ï¼ŒXCTestæ¡†æ¶ä¸­æä¾›çš„æ–­è¨€å®åˆ—ä¸¾å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748// æ— æ¡ä»¶çš„å¼‚å¸¸æ–­è¨€XCTFail(...)// ç©ºæ–­è¨€ï¼Œå½“è¡¨è¾¾å¼ä¸æ˜¯ç©ºæ—¶æµ‹è¯•å¤±è´¥XCTAssertNil(expression, ...)// éç©ºæ–­è¨€ï¼Œå½“è¡¨è¾¾å¼ä¸ºç©ºæ—¶æµ‹è¯•å¤±è´¥XCTAssertNotNil(expression, ...)// å¸ƒå°”æ–­è¨€ï¼Œå½“è¡¨è¾¾å¼ä¸ºfalseæ—¶æµ‹è¯•å¤±è´¥XCTAssert(expression, ...)// å¸ƒå°”æ–­è¨€ï¼Œå½“è¡¨è¾¾å¼ä¸ºfalseæ—¶æµ‹è¯•å¤±è´¥XCTAssertTrue(expression, ...)// å¸ƒå°”æ–­è¨€ï¼Œå½“è¡¨è¾¾å¼ä¸ºtrueæ—¶æµ‹è¯•å¤±è´¥XCTAssertFalse(expression, ...)// ç›¸ç­‰æ–­è¨€ï¼Œå½“ä¸¤ä¸ªè¡¨è¾¾å¼ç»“æœä¸ç›¸ç­‰æ—¶æµ‹è¯•å¤±è´¥ ä½¿ç”¨equalæ–¹æ³•XCTAssertEqualObjects(expression1, expression2, ...)// ä¸ç›¸ç­‰æ–­è¨€ï¼Œå½“ä¸¤ä¸ªè¡¨è¾¾å¼ç»“æœç›¸ç­‰æ—¶æµ‹è¯•å¤±è´¥ ä½¿ç”¨equalæ–¹æ³•XCTAssertNotEqualObjects(expression1, expression2, ...)// ç›¸ç­‰æ–­è¨€ï¼Œå½“ä¸¤ä¸ªè¡¨è¾¾å¼ç»“æœä¸ç›¸ç­‰æ—¶æµ‹è¯•å¤±è´¥ ä½¿ç”¨ ==XCTAssertEqual(expression1, expression2, ...)// ç›¸ç­‰æ–­è¨€ï¼Œå½“ä¸¤ä¸ªè¡¨è¾¾å¼ç»“æœç›¸ç­‰æ—¶æµ‹è¯•å¤±è´¥ ä½¿ç”¨ ==XCTAssertNotEqual(expression1, expression2, ...)// å®ä¾‹æ–­è¨€ï¼Œå½“ä¸¤ä¸ªè¡¨è¾¾å¼ç»“æœä¸ºä¸ç›¸åŒçš„ç±»å®ä¾‹æ—¶ï¼Œæµ‹è¯•å¤±è´¥XCTAssertIdentical(expression1, expression2, ...)// å®ä¾‹æ–­è¨€ï¼Œå½“ä¸¤ä¸ªè¡¨è¾¾å¼ç»“æœä¸ºç›¸åŒçš„ç±»å®ä¾‹æ—¶ï¼Œæµ‹è¯•å¤±è´¥XCTAssertNotIdentical(expression1, expression2, ...) // å·®å¼‚æ–­è¨€ï¼Œä¸¤è¡¨è¾¾å¼ç»“æœçš„å·®å¼‚å¤§äºè®¾ç½®é˜ˆå€¼æ—¶æµ‹è¯•å¤±è´¥XCTAssertEqualWithAccuracy(expression1, expression2, accuracy, ...)// å·®å¼‚æ–­è¨€ï¼Œä¸¤è¡¨è¾¾å¼ç»“æœçš„å·®å¼‚ä¸å¤§äºè®¾ç½®é˜ˆå€¼æ—¶æµ‹è¯•å¤±è´¥XCTAssertNotEqualWithAccuracy(expression1, expression2, accuracy, ...)// å¤§äºæ–­è¨€ï¼Œè¡¨è¾¾å¼1çš„å€¼å°äºç­‰äºè¡¨è¾¾å¼2æ—¶æµ‹è¯•å¤±è´¥XCTAssertGreaterThan(expression1, expression2, ...)// å¤§äºç­‰äºæ–­è¨€ï¼Œè¡¨è¾¾å¼1çš„å€¼å°äºè¡¨è¾¾å¼2æ—¶æµ‹è¯•å¤±è´¥XCTAssertGreaterThanOrEqual(expression1, expression2, ...)// å°äºæ–­è¨€ï¼Œè¡¨è¾¾å¼1çš„å€¼å¤§äºç­‰äºè¡¨è¾¾å¼2æ—¶æµ‹è¯•å¤±è´¥XCTAssertLessThan(expression1, expression2, ...)// å°äºç­‰äºæ–­è¨€ï¼Œè¡¨è¾¾å¼1çš„å€¼å¤§äºè¡¨è¾¾å¼2æ—¶æµ‹è¯•å¤±è´¥XCTAssertLessThanOrEqual(expression1, expression2, ...)// å¼‚å¸¸æ–­è¨€ï¼Œå½“è¡¨è¾¾å¼æ²¡æœ‰æŠ›å‡ºå¼‚å¸¸æ—¶æµ‹è¯•å¤±è´¥XCTAssertThrows(expression, ...)// ç‰¹æ®Šå¼‚å¸¸æ–­è¨€ï¼Œå½“è¡¨è¾¾å¼æŠ›å‡ºçš„å¼‚å¸¸ä¸æ˜¯æŒ‡å®šçš„ç±»æ—¶æµ‹è¯•å¤±è´¥XCTAssertThrowsSpecific(expression, exception_class, ...)// ç‰¹æ®Šå¼‚å¸¸æ–­è¨€ï¼Œå½“è¡¨è¾¾å¼æŠ›å‡ºçš„å¼‚å¸¸ä¸æ˜¯æŒ‡å®šçš„ç±»å’Œåå­—æ—¶æµ‹è¯•å¤±è´¥XCTAssertThrowsSpecificNamed(expression, exception_class, exception_name, ...)// æ— å¼‚å¸¸æ–­è¨€ï¼Œå½“è¡¨è¾¾å¼æœ‰å¼‚å¸¸æŠ›å‡ºæ—¶æµ‹è¯•å¤±è´¥XCTAssertNoThrow(expression, ...)// æ— ç‰¹æ®Šå¼‚å¸¸æ–­è¨€ï¼Œå½“è¡¨è¾¾å¼æœ‰æŒ‡å®šçš„å¼‚å¸¸æŠ›å‡ºæ—¶æµ‹è¯•å¤±è´¥XCTAssertNoThrowSpecific(expression, exception_class, ...)// æ— ç‰¹æ®Šå¼‚å¸¸æ–­è¨€ï¼Œå½“è¡¨è¾¾å¼æœ‰æŒ‡å®šçš„å¼‚å¸¸æŠ›å‡ºæ—¶æµ‹è¯•å¤±è´¥XCTAssertNoThrowSpecificNamed(expression, exception_class, exception_name, ...) äº” ä»£ç è¦†ç›–ç‡ä¸å•å…ƒæµ‹è¯•ç›¸å…³çš„ï¼Œè¿˜æœ‰ä¸€ä¸ªé‡è¦çš„æ¦‚å¿µï¼šä»£ç è¦†ç›–ç‡ã€‚ä»£ç è¦†ç›–ç‡æ˜¯æŒ‡åœ¨æ•´ä¸ªæµ‹è¯•æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œè¦†ç›–åˆ°çš„åŠŸèƒ½å‡½æ•°ä¸æ‰€æœ‰åŠŸèƒ½å‡½æ•°çš„æ¯”ä¾‹ã€‚è¦†ç›–ç‡è¶Šé«˜è¯´æ˜æµ‹è¯•æ¶‰åŠçš„åŠŸèƒ½è¶Šå…¨ã€‚ æµ‹è¯•å®Œæˆåï¼Œå¯ä»¥ç›´æ¥åœ¨Xcodeä¸­æŸ¥çœ‹ä»£ç è¦†ç›–ç‡ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å•å…ƒæµ‹è¯•ä¿æŒè¾ƒé«˜çš„è¦†ç›–ç‡æ˜¯éå¸¸é‡è¦çš„ï¼Œå…¶ä»å¦ä¸€ä¸ªæ–¹é¢ä¹Ÿæ˜¯æµ‹è¯•è´¨é‡çš„ä¿éšœã€‚ å…­ å¼‚æ­¥å‡½æ•°çš„æµ‹è¯•å‰é¢æˆ‘ä»¬æ¼”ç¤ºçš„æµ‹è¯•ç”¨ä¾‹æ‰€æ‰§è¡Œçš„é€»è¾‘éƒ½æ˜¯åŒæ­¥çš„ï¼Œä½†åœ¨å®é™…çš„é¡¹ç›®ä¸­ï¼Œå¼‚æ­¥çš„æ“ä½œå¾ˆå¤šï¼ŒXCTestæ¡†æ¶ä¸­ä¹Ÿæä¾›äº†å¼‚æ­¥é€»è¾‘çš„æµ‹è¯•æ–¹å¼ã€‚ä¾‹å¦‚å¯¹å¦‚ä¸‹ä¸šåŠ¡æ–¹æ³•è¿›è¡Œæµ‹è¯•ï¼š 1234567- (void)requestData:(void (^)(BOOL))complete &#123; dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(3 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123; if (complete) &#123; complete(YES); &#125; &#125;);&#125; æµ‹è¯•ç”¨ä¾‹å¦‚ä¸‹ï¼š 12345678910- (void)testAsync &#123; XCTestExpectation *except = [self expectationWithDescription:@\"å¼‚æ­¥è¯·æ±‚æµ‹è¯•ç”¨ä¾‹\"]; [self.viewModel requestData:^(BOOL success) &#123; XCTAssertTrue(success); [except fulfill]; &#125;]; [self waitForExpectationsWithTimeout:10 handler:^(NSError * _Nullable error) &#123; &#125;];&#125; XCTestExpectationå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæœŸæœ›å¯¹è±¡ï¼Œå½“ä½¿ç”¨æ­¤å¯¹è±¡è°ƒç”¨fulfillæ–¹æ³•åï¼Œè¡¨ç¤ºå¼‚æ­¥é€»è¾‘å®Œæˆï¼ŒXCTestCaseç±»æœ¬èº«ä¸å¼‚æ­¥æµ‹è¯•ç›¸å…³çš„æ–¹æ³•åˆ—ä¸¾å¦‚ä¸‹ï¼š 123456// åˆ›å»ºä¸€ä¸ªXCTestExpectationå¯¹è±¡- (XCTestExpectation *)expectationWithDescription:(NSString *)description;// ç­‰å¾…å¼‚æ­¥æ“ä½œç»“æœï¼Œå¯ä»¥è®¾ç½®è¶…æ—¶æ—¶é—´- (void)waitForExpectationsWithTimeout:(NSTimeInterval)timeout handler:(nullable XCWaitCompletionHandler)handler;- (void)waitForExpectations:(NSArray&lt;XCTestExpectation *&gt; *)expectations timeout:(NSTimeInterval)seconds;- (void)waitForExpectations:(NSArray&lt;XCTestExpectation *&gt; *)expectations timeout:(NSTimeInterval)seconds enforceOrder:(BOOL)enforceOrderOfFulfillment; XCTestExpectationç±»ä¸­å°è£…çš„å¸¸ç”¨å±æ€§å’Œæ–¹æ³•åˆ—ä¸¾å¦‚ä¸‹ï¼š 1234567891011// åˆå§‹åŒ–æ–¹æ³•ï¼Œæè¿°å‚æ•°ä¼šåœ¨æµ‹è¯•æŠ¥å‘Šä¸­åŒ…å«- (instancetype)initWithDescription:(NSString *)expectationDescription;// æè¿°æ–‡æ¡ˆ@property (copy) NSString *expectationDescription;// è®¾ç½®æ˜¯å¦è¡Œä¸ºåå‘@property (getter=isInverted) BOOL inverted;// è®¾ç½®æœŸæœ›çš„å®Œæˆæ¬¡æ•°@property (nonatomic) NSUInteger expectedFulfillmentCount;@property (nonatomic) BOOL assertForOverFulfill;// è§¦å‘ä¸€æ¬¡å®ŒæˆåŠ¨ä½œ- (void)fulfill; ä¸ƒ å…³äºå•å…ƒæµ‹è¯•çš„å‡ ç‚¹å»ºè®® æˆ‘ä»¬å…ˆä¸æ¶‰åŠåˆ°UIæ–¹é¢çš„è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œåªé’ˆå¯¹é€»è¾‘ä»£ç çš„å•å…ƒæµ‹è¯•ï¼Œä¸‹é¢è¿™äº›å»ºè®®å¯ä¾›å‚è€ƒï¼š 1. åœ¨ç¼–ç æ—¶ï¼Œè¦å°½é‡æŒ‰ç…§MVVMçš„æ¨¡å¼è¿›è¡Œå¼€å‘ï¼Œç›¸æ¯”MVCæ¨¡å¼ï¼ŒMVVMçš„é€»è¾‘ä»£ç éƒ½å°è£…åœ¨VMé‡Œé¢ï¼Œæ›´åˆ©äºè¿›è¡Œè„±ç¦»UIçš„æµ‹è¯•ã€‚å¯ä»¥è®¾æƒ³ï¼Œå¦‚æœå°†é€»è¾‘æ–¹æ³•éƒ½å†™åœ¨Viewæˆ–ViewControllerä¸­ï¼Œåˆ™æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹æ—¶å°±ä¸å¾—ä¸å¼•å…¥å¾ˆå¤šé¢å¤–çš„é¡µé¢UIç»„ä»¶ã€‚ 2. ç¼–å†™æµ‹è¯•ç”¨ä¾‹æ—¶ï¼Œæœ‰3ä¸ªæ ¸å¿ƒè¦è€ƒè™‘çš„ç‚¹ï¼Œå³è¾“å…¥ï¼Œè¾“å‡ºå’Œç»“æœåˆ¤å®šã€‚æˆ‘ä»¬é€šè¿‡è¾“å…¥æ¥è®¾ç½®æµ‹è¯•ç”¨ä¾‹çš„åˆå§‹çŠ¶æ€ï¼Œé€šè¿‡å¯¹è¾“å‡ºçš„ç»“æœåˆ¤å®šæ¥å†³å®šæµ‹è¯•ç”¨ä¾‹æ˜¯å¦é€šè¿‡ã€‚ 3. åœ¨å¼€å‘ä¸­ï¼Œç¼–å†™çš„å‡½æ•°è¦å°½é‡ç¬¦åˆä¸‹é¢çš„ç‰¹æ€§ï¼šåŠŸèƒ½å•ä¸€ï¼Œæœ‰è¾“å…¥æœ‰è¾“å‡ºã€‚ 4. æŸäº›åœºæ™¯ä¸‹ï¼Œå‡½æ•°çš„åŠŸèƒ½æ˜¯å¯¹è¾“å…¥çš„å‚æ•°è¿›è¡Œä¿®æ”¹ï¼Œè€Œå¹¶æ²¡æœ‰è¿”å›å€¼ï¼Œåˆ™è¿™ç§åœºæ™¯ç¼–å†™æµ‹è¯•ç”¨ä¾‹æ—¶ï¼Œè¦åˆ¤æ–­çš„æ˜¯æ‰§è¡Œå‡½æ•°æ“ä½œåçš„åŸå§‹å˜é‡æ˜¯å¦ç¬¦åˆé¢„æœŸã€‚ä¾‹å¦‚ï¼š åŠŸèƒ½å‡½æ•°ï¼š 12345- (void)removeAllObj:(NSMutableArray *)array &#123; if ([array isKindOfClass:NSMutableArray.class]) &#123; [array removeAllObjects]; &#125;&#125; æµ‹è¯•ç”¨ä¾‹ï¼š 12345- (void)testRemoveObj &#123; NSMutableArray *array = [NSMutableArray arrayWithObjects:@\"1\", @\"2\", nil]; [self.viewModel removeAllObj:array]; XCTAssertEqual(array.count, 0);&#125; 5. æŸäº›åœºæ™¯ä¸‹ï¼ŒåŠŸèƒ½å‡½æ•°å¯èƒ½æ²¡æœ‰å‚æ•°ä¹Ÿæ²¡æœ‰è¿”å›å€¼ï¼Œå…¶ä½œç”¨åªæ˜¯æ‰§è¡Œä¸€æ®µé€»è¾‘æ“ä½œï¼Œä¾‹å¦‚å­˜å‚¨æ–‡ä»¶ï¼Œä¿®æ”¹æ–‡ä»¶ç­‰ã€‚è¿™æ—¶æˆ‘ä»¬å¯ä»¥ä¿®æ”¹ä¸‹åŠŸèƒ½å‡½æ•°ï¼Œåœ¨å‡½æ•°å†…è¿”å›æ“ä½œæˆåŠŸæˆ–å¤±è´¥çš„ç»“æœï¼Œæµ‹è¯•ç”¨ä¾‹ä½¿ç”¨æ­¤ç»“æœæ¥ä½œä¸ºæ˜¯å¦é€šè¿‡çš„æ ‡å‡†ã€‚ å…« XCTestæ¡†æ¶ä¸­çš„UIæµ‹è¯•ç›¸æ¯”é€»è¾‘åŠŸèƒ½æµ‹è¯•ï¼ŒUIæµ‹è¯•é€šå¸¸ä¼šéº»çƒ¦ä¸€äº›ã€‚XCTestæ¡†æ¶ä¸­ä¹Ÿé›†æˆäº†UIæµ‹è¯•ç›¸å…³çš„æ¥å£ã€‚é€šå¸¸åœ¨ç¼–å†™æµ‹è¯•ç”¨ä¾‹æ—¶ï¼Œæˆ‘ä»¬ä¼šå°†åŠŸèƒ½æµ‹è¯•å’ŒUIæµ‹è¯•åˆ†å¼€ç¼–å†™ã€‚åˆ›å»ºUI Test Bundleå¦‚ä¸‹ï¼š ç”Ÿæˆçš„æ¨¡æ¿ä»£ç ä¸­ä¼šè‡ªå¸¦å¯åŠ¨æ€§èƒ½æµ‹è¯•ç”¨ä¾‹ï¼Œå¦‚ä¸‹ï¼š 12345678- (void)testLaunchPerformance &#123; if (@available(macOS 10.15, iOS 13.0, tvOS 13.0, watchOS 7.0, *)) &#123; // This measures how long it takes to launch your application. [self measureWithMetrics:@[[[XCTApplicationLaunchMetric alloc] init]] block:^&#123; [[[XCUIApplication alloc] init] launch]; &#125;]; &#125;&#125; å…¶ä¸­ï¼ŒXCTApplicationLaunchMetricå¯¹è±¡é…ç½®ä¸ºå†·å¯åŠ¨æŒ‡æ ‡ï¼Œå…¶ä¼šè®¡ç®—ä»Appå¯åŠ¨åˆ°é¦–å¸§æ¸²æŸ“å®Œæˆçš„æ—¶é—´ã€‚XCUIApplicationç”¨æ¥å®ä¾‹åŒ–ä¸€ä¸ªAppåº”ç”¨å®ä¾‹ï¼Œè°ƒç”¨launchæ–¹æ³•è¿›è¡Œå¯åŠ¨ã€‚é»˜è®¤å…¶ä¼šå¯åŠ¨å½“å‰åº”ç”¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è®¾ç½®bundleIdæ¥è®©å…¶å¯åŠ¨å…¶ä»–Appè¿›è¡Œæµ‹è¯•ï¼Œä¾‹å¦‚ï¼š 123456789- (void)testLaunchPerformance &#123; if (@available(macOS 10.15, iOS 13.0, tvOS 13.0, watchOS 7.0, *)) &#123; // This measures how long it takes to launch your application. [self measureWithMetrics:@[[[XCTApplicationLaunchMetric alloc] init]] block:^&#123; XCUIApplication *application = [[XCUIApplication alloc] initWithBundleIdentifier:@\"huishao.UnitTestDemo\"]; [application launch]; &#125;]; &#125;&#125; åœ¨UIæµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šå…³æ³¨ä¸‹é¢å‡ é¡¹ï¼š 1. æ£€æŸ¥é¡µé¢æŸäº›å…ƒç´ æ˜¯å¦å­˜åœ¨ 2.é€šè¿‡ä»£ç æ“ä½œæŸäº›å…ƒç´ çš„äº¤äº’ 3.æ£€æŸ¥äº¤äº’åçš„ç»“æœ å› æ­¤ï¼Œåœ¨UIæµ‹è¯•ä¸­ï¼Œå¦‚ä½•æŸ¥è¯¢åˆ°é¡µé¢çš„å…ƒç´ æ˜¯æœ€é‡è¦çš„ï¼Œè¿™äº›å·¥ä½œç”±XCUIElementQueryç±»æ¥å®Œæˆï¼Œè¿™ä¸ªç±»ç›¸å…³çš„ç”¨æ³•éå¸¸ç¹æ‚ï¼Œä¾‹å¦‚æˆ‘ä»¬è¦æŸ¥æ‰¾é¡µé¢ä¸­æ ‡é¢˜ä¸ºbtnçš„æŒ‰é’®å¹¶è¿›è¡Œç‚¹å‡»æ“ä½œï¼Œå¯ä»¥è¿™ä¹ˆåšï¼š 1234567- (void)testExample &#123; // UI tests must launch the application that they test. XCUIApplication *app = [[XCUIApplication alloc] init]; [app launch]; XCUIElement *btn = app.staticTexts[@\"btn\"]; [btn tap];&#125; å¦‚æœé¡µé¢æŸ¥æ‰¾ä¸åˆ°æ­¤æŒ‰é’®ï¼Œåˆ™æ­¤ç”¨ä¾‹ä¼šæ‰§è¡Œå¤±è´¥ã€‚è™½ç„¶é¡µé¢å…ƒç´ çš„æŸ¥æ‰¾å’Œå®šä½éå¸¸ç¹çï¼Œå¹¸è¿çš„æ˜¯Xcodeæä¾›äº†ç”¨æˆ·è¡Œä¸ºå½•åˆ¶åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¦æµ‹è¯•çš„æ“ä½œè·¯å¾„å½•åˆ¶ä¸‹æ¥ï¼Œç‚¹å‡»Xcodeçš„å¦‚ä¸‹æŒ‰é’®å³å¯ï¼š å½•åˆ¶å®Œæˆåï¼Œæ­¤æµ‹è¯•ç”¨ä¾‹ä¸­ä¼šè‡ªåŠ¨ç”ŸæˆæŸ¥æ‰¾å…ƒç´ å’Œæ“ä½œçš„ç›¸å…³ä»£ç ï¼Œä¹‹åæ‰§è¡Œæ­¤ç”¨ä¾‹æ—¶å°†æŒ‰ç…§å½•åˆ¶çš„æ­¥éª¤è¿›è¡Œï¼Œå¦‚æœé¡µé¢å…ƒç´ æ²¡æœ‰æŒ‰ç…§é¢„æœŸå‡ºç°ï¼Œåˆ™ç”¨ä¾‹ä¼šå¤±è´¥ã€‚ ä¹ è®¾å¤‡æ€§èƒ½ç›¸å…³æ•°æ®æµ‹è¯•å‰é¢æˆ‘ä»¬æœ‰æåˆ°ä¸€ä¸ªå†·å¯åŠ¨æ—¶é—´æ€§èƒ½æµ‹è¯•çš„é…ç½®é¡¹ï¼šXCTApplicationLaunchMetricã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒXCTestæ¡†æ¶ä¸­ä¹Ÿé»˜è®¤æä¾›äº†å¦‚CPUï¼Œå†…å­˜ç­‰è®¾å¤‡æ€§èƒ½æµ‹è¯•é…ç½®ã€‚ä¾‹å¦‚ï¼š 12345678910111213141516171819- (void)testCPUPerformance &#123; if (@available(macOS 10.15, iOS 13.0, tvOS 13.0, watchOS 7.0, *)) &#123; // This measures how long it takes to launch your application. [self measureWithMetrics:@[[[XCTCPUMetric alloc] init]] block:^&#123; XCUIApplication *application = [[XCUIApplication alloc] initWithBundleIdentifier:@\"huishao.UnitTestDemo\"]; [application launch]; &#125;]; &#125;&#125;- (void)testMemoryPerformance &#123; if (@available(macOS 10.15, iOS 13.0, tvOS 13.0, watchOS 7.0, *)) &#123; // This measures how long it takes to launch your application. [self measureWithMetrics:@[[[XCTMemoryMetric alloc] init]] block:^&#123; XCUIApplication *application = [[XCUIApplication alloc] initWithBundleIdentifier:@\"huishao.UnitTestDemo\"]; [application launch]; &#125;]; &#125;&#125; æµ‹è¯•æ‰§è¡Œå®Œæˆåï¼ŒæŠ¥å‘Šä¸­ä¼šæœ‰è¯¦ç»†çš„æ€§èƒ½æ•°æ®ï¼Œå¦‚ä¸‹å›¾ï¼š ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€” ç²å°‘ QQï¼š316045346 åŒæ—¶ï¼Œå¦‚æœæœ¬ç¯‡æ–‡ç« è®©ä½ è§‰å¾—æœ‰ç”¨ï¼Œæ¬¢è¿åˆ†äº«ç»™æ›´å¤šæœ‹å‹ï¼Œè¯·æ ‡æ˜å‡ºå¤„ã€‚","categories":[{"name":"ç¼–ç¨‹ç ç‘","slug":"ç¼–ç¨‹ç ç‘","permalink":"http://huishao.cc/categories/ç¼–ç¨‹ç ç‘/"}],"tags":[],"keywords":[{"name":"ç¼–ç¨‹ç ç‘","slug":"ç¼–ç¨‹ç ç‘","permalink":"http://huishao.cc/categories/ç¼–ç¨‹ç ç‘/"}]},{"title":"è¿½æ ¹é—®åº•ï¼šObjective-Cå…³è”å±æ€§åŸç†åˆ†æ","slug":"447è¿½æ ¹é—®åº•ï¼šObjective-Cå…³è”å±æ€§åŸç†åˆ†æ","date":"2022-07-16T16:00:00.000Z","updated":"2022-07-17T04:27:08.956Z","comments":true,"path":"2022/07/17/447è¿½æ ¹é—®åº•ï¼šObjective-Cå…³è”å±æ€§åŸç†åˆ†æ/","link":"","permalink":"http://huishao.cc/2022/07/17/447è¿½æ ¹é—®åº•ï¼šObjective-Cå…³è”å±æ€§åŸç†åˆ†æ/","excerpt":"","text":"è¿½æ ¹é—®åº•ï¼šObjective-Cå…³è”å±æ€§åŸç†åˆ†æä¸€.å¼•å­Objective-Cæ˜¯ä¸€ç§åŠ¨æ€æ€§å¾ˆå¼ºçš„è¯­è¨€ï¼Œæ‰€è°“åŠ¨æ€èƒ½åŠ›ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºè¿è¡Œæ—¶èƒ½åŠ›ã€‚å¯¹äºObjective-Cå¼€å‘è€…æ¥è¯´ï¼ŒåŠ¨æ€æ€§æ‰€å¸¦æ¥çš„ç¼–ç¨‹ä¾¿åˆ©æ— å¤„ä¸åœ¨ã€‚ä¾‹å¦‚é€šè¿‡Categoryç±»åˆ«æ¥æ‰©å±•å·²æœ‰ç±»çš„åŠŸèƒ½ã€‚å¯ä»¥ä½¿å·²æœ‰ç±»æ‹¥æœ‰æ–°çš„æ–¹æ³•å’Œå±æ€§ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ æœ‰ä½¿ç”¨Categoryæ¥æ‰©å±•ç±»çš„å±æ€§ï¼Œä½ ä¸€å®šäº†è§£å¹¶éç®€å•çš„ä½¿ç”¨@propertyè¿›è¡Œå£°æ˜å³å¯ã€‚ä¾‹å¦‚ä¸‹é¢çš„ä»£ç ï¼š 12345678910111213141516171819202122232425262728#import &lt;Foundation/Foundation.h&gt;@interface MyObject : NSObject@end@implementation MyObject@end@interface MyObject (Property)@property (nonatomic, copy) NSString *addProperty;@end@implementation MyObject (Property)@endint main(int argc, const char * argv[]) &#123; @autoreleasepool &#123; MyObject *object = [[MyObject alloc] init]; object.addProperty = @\"HelloWorld\"; NSLog(@\"%@\", object.addProperty); &#125; return 0;&#125; ä»£ç åœ¨ç¼–è¯‘æ—¶ä¸ä¼šæœ‰ä»»ä½•é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœè¿è¡Œï¼Œå°±ä¼šå‡ºç°æœªå®šä¹‰çš„æ–¹æ³•å¼‚å¸¸ã€‚å› æ­¤å¦‚æœè¦æ‰©å±•ç±»çš„å±æ€§ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šè¿™æ ·å®ç°ï¼š 123456789101112131415#import &lt;objc/runtime.h&gt;@implementation MyObject (Property)static NSString *kAddPropertyKey = @\"kAddPropertyKey\";- (void)setAddProperty:(NSString *)addProperty &#123; objc_setAssociatedObject(self, kAddPropertyKey, addProperty, OBJC_ASSOCIATION_COPY);&#125;- (NSString *)addProperty &#123; return objc_getAssociatedObject(self, kAddPropertyKey);&#125;@end å†æ¬¡è¿è¡Œï¼Œå°±å¯ä»¥æ­£å¸¸çš„å¯¹addPropertyå±æ€§è¿›è¡Œå­˜å–å€¼äº†ã€‚è¿™é‡Œå…¶å®å°±ä½¿ç”¨åˆ°äº†Objective-Cè¿è¡Œæ—¶çš„ç‰¹æ€§ï¼Œåœ¨Objective-Cä¸­ï¼Œç±»å¯¹è±¡åœ¨åˆ›å»ºæ—¶å…¶æ‰€å ç”¨çš„å†…å­˜ç©ºé—´å°±å·²ç»ç¡®å®šï¼Œé‚£ä¹ˆä½ æœ‰æ²¡æœ‰æƒ³è¿‡ï¼Œé€šè¿‡objc_setAssociatedObjectè¿™ä¸ªè¿è¡Œæ—¶æ–¹æ³•æ‰€å­˜å‚¨çš„å±æ€§å€¼æ˜¯å¦‚ä½•ä¸å½“å‰å¯¹è±¡å…³è”èµ·æ¥çš„ï¼Œè¿™äº›æ•°æ®åˆæ˜¯å­˜åœ¨å“ªé‡Œçš„ï¼Ÿå¹¸è¿çš„æ—¶ï¼Œä»objcæºç å¯ä»¥æ¸…æ¥šçš„äº†è§£å…³è”å±æ€§çš„å®ç°é€»è¾‘ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬æœ¬ç¯‡æ–‡ç« è¦è®¨è®ºçš„é‡ç‚¹ï¼Œäº†è§£è¿™é‡Œçš„åŸç†å¯èƒ½ä¸èƒ½å¯¹ä½ ä½¿ç”¨å…³è”å±æ€§æä¾›å¤šå¤§çš„å¸®åŠ©ï¼Œä½†æ˜¯è¿™ç§è®¾è®¡æ€è·¯å®šä¼šä½¿ä½ åœ¨æ—¥å¸¸å¼€å‘ä¸­å—ç›ŠåŒªæµ…ã€‚ äºŒ. objc_setAssociatedObjectæ–¹æ³•çš„æ ¸å¿ƒåŸç†é€šè¿‡objcçš„runtimeæºç ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°objc_setAssociatedObjectçš„æ–¹æ³•å®ç°å¦‚ä¸‹ï¼š 12345voidobjc_setAssociatedObject(id object, const void *key, id value, objc_AssociationPolicy policy)&#123; _object_set_associative_reference(object, key, value, policy);&#125; è¿™ä¸€æ­¥æ— éœ€è¿‡å¤šè§£é‡Šï¼Œåªæ˜¯è°ƒç”¨äº†ä¸€ä¸ªå†…éƒ¨å‡½æ•°ï¼Œ_object_set_associative_referenceå†…éƒ¨å‡½æ•°æ˜¯å…³è”å±æ€§å®ç°çš„æ ¸å¿ƒï¼Œæ­¤å‡½æ•°è§£æå¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869void_object_set_associative_reference(id object, const void *key, id value, uintptr_t policy)&#123; // 1.å®‰å…¨æ€§æ£€æŸ¥ï¼Œè¦å…³è”çš„å¯¹è±¡å’Œè¦å…³è”çš„å€¼ä¸èƒ½ä¸ºç©º if (!object &amp;&amp; !value) return; // 2.æ£€æŸ¥å½“å‰å¯¹è±¡æ˜¯å¦ä¸å…è®¸å…³è”å±æ€§ï¼ŒæŸäº›ç±»ä¸å…è®¸å…¶å®ä¾‹æœ‰å…³è”å±æ€§ if (object-&gt;getIsa()-&gt;forbidsAssociatedObjects()) _objc_fatal(\"objc_setAssociatedObject called on instance (%p) of class %s which does not allow associated objects\", object, object_getClassName(object)); // 3.åˆ›å»ºä¸€ä¸ªåŒ…è£…å¯¹è±¡æŒ‡é’ˆçš„ç»“æ„å¯¹è±¡ï¼Œå­˜å‚¨è¦å…³è”çš„å¯¹è±¡æŒ‡é’ˆ DisguisedPtr&lt;objc_object&gt; disguised&#123;(objc_object *)object&#125;; // 4.åˆ›å»ºä¸€ä¸ªåŒ…è£…å…³è”ç­–ç•¥å’Œè¢«å…³è”å€¼çš„å¯¹è±¡ ObjcAssociation association&#123;policy, value&#125;; // 5.æ ¹æ®å…³è”ç­–ç•¥æ¥å¯¹å€¼è¿›è¡Œå¼•ç”¨ï¼ˆretainæˆ–copyï¼‰ association.acquireValue(); bool isFirstAssociation = false; &#123; // 6.è·å–å…³è”ç®¡ç†å™¨åŠå…¶ä¸­çš„å…³è”è¡¨å¯¹è±¡ AssociationsManager manager; AssociationsHashMap &amp;associations(manager.get()); // 7.å€¼å¦‚æœå­˜åœ¨ï¼Œåˆ™è¿›è¡Œå…³è” if (value) &#123; // 8.å°è¯•å‘è¡¨ä¸­æ’å…¥å½“å‰è¦å…³è”çš„å¯¹è±¡å’Œå€¼ï¼Œå¦‚æœå·²ç»å­˜åœ¨ï¼Œåˆ™ä»€ä¹ˆéƒ½ä¸åš auto refs_result = associations.try_emplace(disguised, ObjectAssociationMap&#123;&#125;); // 9. æ£€æŸ¥try_emplaceæ–¹æ³•çš„æ’å…¥ç»“æœï¼Œå¦‚æœåšäº†æ’å…¥æ“ä½œï¼Œåˆ™æ ‡è®°é¦–æ¬¡å…³è”ä¸ºtrue if (refs_result.second) &#123; isFirstAssociation = true; &#125; // 10.å°†è¡¨ä¸­å­˜å‚¨çš„å€¼ä¸keyè¿›è¡Œå…³è” auto &amp;refs = refs_result.first-&gt;second; auto result = refs.try_emplace(key, std::move(association)); // 11.å¦‚æœkeyå·²ç»å­˜åœ¨ï¼Œåˆ™è¿›è¡Œå…³è”ç­–ç•¥å’Œå…³è”å€¼çš„äº¤æ¢ if (!result.second) &#123; association.swap(result.first-&gt;second); &#125; // 12. è¦å…³è”çš„å€¼ä¸ºnilï¼Œåˆ™ä¸ºæ¸…é™¤æ“ä½œ &#125; else &#123; // 13. æŸ¥æ‰¾åˆ°å…³è”åˆ°æ­¤å¯¹è±¡çš„å±æ€§å¯¹ auto refs_it = associations.find(disguised); if (refs_it != associations.end()) &#123; // 14.æœ‰å…³è”å±æ€§ï¼Œè·å–å­˜å‚¨keyçš„è¡¨ auto &amp;refs = refs_it-&gt;second; // 15.æŸ¥æ‰¾å¯¹åº”keyæ˜¯å¦å­˜åœ¨ auto it = refs.find(key); if (it != refs.end()) &#123; // 16.å­˜åœ¨åˆ™è¿›è¡Œå…³è”æ•°æ®çš„æ›¿æ¢ï¼ŒåŒ…æ‹¬å…³è”ç­–ç•¥å’Œå€¼ï¼Œæ­¤æ—¶å®é™…ä¸Šæ˜¯å°†å€¼æ¸…ç©ºäº† association.swap(it-&gt;second); // 17.ç›¸å…³æ“¦é™¤æ“ä½œ refs.erase(it); if (refs.size() == 0) &#123; associations.erase(refs_it); &#125; &#125; &#125; &#125; &#125; // 18.åˆ¤æ–­æ˜¯å¦ä¸ºæ­¤ç±»å®ä¾‹å¯¹è±¡çš„ç¬¬ä¸€æ¬¡å…³è”ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™ä¿®æ”¹æ ‡è®°ä½ï¼Œæ ‡æ˜å·²ç»æœ‰å…³è”å±æ€§ if (isFirstAssociation) object-&gt;setHasAssociatedObjects(); // 19.å°†æ—§çš„å€¼è¿›è¡Œreleaseï¼Œå¦‚æœéœ€è¦çš„è¯ association.releaseHeldValue();&#125; å¯ä»¥çœ‹åˆ°ï¼Œæ•´ä¸ªå…³è”å±æ€§çš„è¿‡ç¨‹éå¸¸æ¸…æ™°ï¼Œå¯¹äºæ–°å€¼æ˜¯å¦éœ€è¦retainä»¥åŠæ—§å€¼æ˜¯å¦éœ€è¦releaseï¼Œæ˜¯ç”±å…³è”ç­–ç•¥å†³å®šçš„ï¼š 123456789enum &#123; OBJC_ASSOCIATION_SETTER_ASSIGN = 0, // assginå±æ€§ OBJC_ASSOCIATION_SETTER_RETAIN = 1, // è®¾ç½®å€¼çš„æ—¶å€™éœ€è¦retain OBJC_ASSOCIATION_SETTER_COPY = 3, // è®¾ç½®å€¼çš„æ—¶å€™éœ€è¦copy OBJC_ASSOCIATION_GETTER_READ = (0 &lt;&lt; 8), // readonlyçš„å±æ€§ OBJC_ASSOCIATION_GETTER_RETAIN = (1 &lt;&lt; 8), // è·å–å€¼çš„æ—¶å€™éœ€è¦retain OBJC_ASSOCIATION_GETTER_AUTORELEASE = (2 &lt;&lt; 8), // è·å–å€¼çš„æ—¶å€™éœ€è¦autorelease OBJC_ASSOCIATION_SYSTEM_OBJECT = _OBJC_ASSOCIATION_SYSTEM_OBJECT, // 1 &lt;&lt; 16&#125;; acquireValueæ–¹æ³•å®ç°å¦‚ä¸‹ï¼Œå…¶åªæ˜¯åˆ¤æ–­æ˜¯å¦éœ€è¦retainå’Œcopyï¼Œä¹‹åè°ƒç”¨å¯¹åº”çš„å‡½æ•°ï¼š 123456789101112inline void acquireValue() &#123; if (_value) &#123; switch (_policy &amp; 0xFF) &#123; case OBJC_ASSOCIATION_SETTER_RETAIN: _value = objc_retain(_value); break; case OBJC_ASSOCIATION_SETTER_COPY: _value = ((id(*)(id, SEL))objc_msgSend)(_value, @selector(copy)); break; &#125; &#125;&#125; åœ¨ä¸Šé¢ç¬¬8æ­¥ä¸­ï¼Œæœ‰è°ƒç”¨try_emplaceæ–¹æ³•æ¥å°†æ•°æ®æ’å…¥åˆ°è¡¨ç»“æ„ä¸­ï¼Œæ­¤å‡½æ•°æ’å…¥æ—¶ä¼šåˆ¤æ–­è¦æ’å…¥çš„æ•°æ®æ˜¯å¦å­˜åœ¨ï¼Œå…¶è¿”å›å€¼ä¼šå‘ŠçŸ¥è°ƒç”¨è€…æ˜¯å¦äº§ç”Ÿäº†æ’å…¥æ“ä½œï¼Œå¦‚æœå·²ç»å­˜åœ¨ï¼Œåˆ™æ­¤å‡½æ•°ä¼šä»€ä¹ˆéƒ½ä¸åšã€‚ ä¸‰. è·å–å’Œç§»é™¤å…³è”å±æ€§çš„åŸç†ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»åŸºæœ¬æ¸…æ¥šäº†å…³è”å±æ€§æ˜¯å¦‚ä½•è®¾ç½®å’Œå­˜å‚¨çš„ï¼Œå†æ¥ç†è§£å¦‚æœè·å–å’Œç§»é™¤å°±éå¸¸å®¹æ˜“äº†ã€‚ è·å–å…³è”å±æ€§çš„å€¼æ˜¯ä½¿ç”¨objc_getAssociatedObjectè¿è¡Œæ—¶æ–¹æ³•å®ç°çš„ï¼Œæ­¤æ–¹æ³•å®ç°å¦‚ä¸‹ï¼š 12345idobjc_getAssociatedObject(id object, const void *key)&#123; return _object_get_associative_reference(object, key);&#125; æˆ‘ä»¬è¿˜æ˜¯ä¸»è¦æ¥è§£æä¸‹å…¶è°ƒç”¨çš„_object_get_associative_referenceå†…éƒ¨æ–¹æ³•ï¼š 1234567891011121314151617181920212223242526id_object_get_associative_reference(id object, const void *key)&#123; // 1.åˆ›å»ºå…³è”å¯¹è±¡ç»“æ„ ObjcAssociation association&#123;&#125;; &#123; // 2.è·å–å…³è”ç®¡ç†å™¨åŠå…¨å±€çš„Hashè¡¨ AssociationsManager manager; AssociationsHashMap &amp;associations(manager.get()); // 3.å°è¯•æŸ¥æ‰¾å½“å‰ä¼ å…¥å¯¹è±¡çš„å…³è”å±æ€§ AssociationsHashMap::iterator i = associations.find((objc_object *)object); if (i != associations.end()) &#123; // 4.å¦‚æœå½“å‰å¯¹è±¡æœ‰å…³è”å±æ€§ï¼Œå°è¯•æŸ¥æ‰¾å­˜å‚¨keyçš„åˆ—è¡¨ä¸­æ˜¯å¦å­˜åœ¨ä¼ å…¥çš„key ObjectAssociationMap &amp;refs = i-&gt;second; ObjectAssociationMap::iterator j = refs.find(key); if (j != refs.end()) &#123; // 5.å¦‚æœå¯ä»¥æŸ¥åˆ°ï¼Œå¯¹associationè¿›è¡Œèµ‹å€¼ association = j-&gt;second; // 6.æ ¹æ®å…³è”ç­–ç•¥æ¥å†³å®šæ˜¯å¦å¯¹è¿”å›çš„å€¼è¿›è¡Œretain association.retainReturnedValue(); &#125; &#125; &#125; // 7.æ ¹æ®è¿”å›ç­–ç•¥æ¥å†³å®šæ˜¯å¦éœ€è¦autoreleaseï¼Œå¦‚æœæ²¡æœ‰æŸ¥åˆ°ï¼Œä¼šè¿”å›nilå€¼ return association.autoreleaseReturnedValue();&#125; å¯¹äºå·²ç»å…³è”äº†å±æ€§çš„å¯¹è±¡ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è°ƒç”¨objc_removeAssociatedObjectsæ–¹æ³•æ¥å°†å…³è”çš„æ‰€æœ‰å±æ€§è¿›è¡Œç§»é™¤ï¼Œæ­¤æ–¹æ³•å®ç°å¦‚ä¸‹ï¼š 1234567void objc_removeAssociatedObjects(id object) &#123; // å¯¹è±¡å­˜åœ¨ï¼Œå¹¶ä¸”å·²ç»æ ‡è®°è¿‡å…³è”å±æ€§ if (object &amp;&amp; object-&gt;hasAssociatedObjects()) &#123; _object_remove_assocations(object, /*deallocating*/false); &#125;&#125; _object_remove_assocationå†…éƒ¨å‡½æ•°çš„å®ç°ä¹Ÿä¸å¤æ‚ï¼Œè§£æå¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344void_object_remove_assocations(id object, bool deallocating)&#123; // 1.åˆ›å»ºå…³è”å¯¹è±¡ ObjectAssociationMap refs&#123;&#125;; &#123; // 2.è·å–å…³è”ç®¡ç†å™¨åŠHashè¡¨ AssociationsManager manager; AssociationsHashMap &amp;associations(manager.get()); // 3.æŸ¥æ‰¾ä¼ å…¥å¯¹è±¡çš„å…³è”å±æ€§ AssociationsHashMap::iterator i = associations.find((objc_object *)object); if (i != associations.end()) &#123; // 4.æŸ¥æ‰¾åˆ°åï¼Œç”¨ç©ºå€¼è¿›è¡Œäº¤æ¢ refs.swap(i-&gt;second); // 5.å¦‚æœæ˜¯ç³»ç»Ÿå¯¹è±¡ï¼Œåˆ™éœ€è¦ä¿ç•™å…³è” bool didReInsert = false; if (!deallocating) &#123; for (auto &amp;ref: refs) &#123; if (ref.second.policy() &amp; OBJC_ASSOCIATION_SYSTEM_OBJECT) &#123; i-&gt;second.insert(ref); didReInsert = true; &#125; &#125; &#125; // 6.æ— éœ€ä¿ç•™å…³è”ï¼Œåˆ™ç›´æ¥æ¸…é™¤æ•°æ® if (!didReInsert) associations.erase(i); &#125; &#125; // 7.å¯¹æ—§å€¼è¿›è¡Œreleaseæ“ä½œ SmallVector&lt;ObjcAssociation *, 4&gt; laterRefs; for (auto &amp;i: refs) &#123; if (i.second.policy() &amp; OBJC_ASSOCIATION_SYSTEM_OBJECT) &#123; // If we are not deallocating, then RELEASE_LATER associations don't get released. if (deallocating) laterRefs.append(&amp;i.second); &#125; else &#123; i.second.releaseHeldValue(); &#125; &#125; for (auto *later: laterRefs) &#123; later-&gt;releaseHeldValue(); &#125;&#125; å››. å…³è”å±æ€§å¦‚ä½•è¿›è¡Œå†…å­˜ç®¡ç†ï¼Ÿé€šè¿‡å‰é¢çš„ä»‹ç»ï¼Œæˆ‘ä»¬çŸ¥é“åœ¨å…³è”å±æ€§æ—¶ï¼Œå¯ä»¥é€šè¿‡å…³è”ç­–ç•¥æ¥è®¾ç½®ä¸€äº›å’Œå†…å­˜ç®¡ç†ç›¸å…³çš„é€‰é¡¹ï¼Œåœ¨è®¾ç½®å…³è”å±æ€§æ—¶ï¼Œå¦‚æœéœ€è¦çš„è¯ï¼Œå…¶å†…éƒ¨ä¼šæ ¹æ®å†…å­˜ç®¡ç†ç­–ç•¥å¯¹æ—§å€¼è¿›è¡Œreleaseæ“ä½œï¼Œä½†æ˜¯ä½ æ˜¯å¦æœ‰æƒ³è¿‡ï¼Œå½“å¯¹è±¡æ­£å¸¸çš„ç”Ÿå‘½å‘¨æœŸç»“æŸåï¼Œè¿™äº›å…³è”å±æ€§å ç”¨çš„çš„å†…å­˜æ˜¯å¦‚ä½•å›æ”¶çš„ï¼Ÿè¿™å°±éœ€è¦æˆ‘ä»¬ä»ç³»ç»Ÿçš„deallocæ–¹æ³•ä¸­å¯»æ‰¾ç­”æ¡ˆäº†ã€‚ ç³»ç»Ÿå¯¹è±¡åœ¨é”€æ¯æ—¶ï¼Œdeallocæ–¹æ³•æœ€ç»ˆä¼šæ‰§è¡Œåˆ°ä¸€ä¸ªåä¸ºobjc_destructInstanceçš„å†…éƒ¨å‡½æ•°ï¼Œæ­¤å‡½æ•°å®ç°å¦‚ä¸‹ï¼š 1234567891011121314void *objc_destructInstance(id obj) &#123; if (obj) &#123; bool cxx = obj-&gt;hasCxxDtor(); // é€šè¿‡æ ‡è®°è·å–æ­¤å¯¹è±¡æ˜¯å¦æœ‰å…³è”å±æ€§ bool assoc = obj-&gt;hasAssociatedObjects(); if (cxx) object_cxxDestruct(obj); // ç§»é™¤æ‰æ­¤å¯¹è±¡çš„å…³è”å±æ€§ if (assoc) _object_remove_assocations(obj, /*deallocating*/true); obj-&gt;clearDeallocating(); &#125; return obj;&#125; å…¶ä¸­ä¼šåˆ¤æ–­è¦é”€æ¯çš„å¯¹è±¡æ˜¯å¦æœ‰å…³è”å±æ€§ï¼Œå¦‚æœæœ‰ï¼Œåˆä¼šè°ƒç”¨åˆ°_object_remove_assocationå‡½æ•°æ¥è¿›è¡Œå…³è”å±æ€§çš„ç§»é™¤ï¼Œè¿™ä¸ªå‡½æ•°å‰é¢ä»‹ç»è¿‡ï¼Œå†…éƒ¨ä¼šå¤„ç†å†…å­˜ç®¡ç†é—®é¢˜ã€‚ äº”.å…³è”ç®¡ç†å™¨ä¸è¡¨çš„åˆ›å»ºæ—¶æœºåœ¨æ•´ä¸ªå…³è”å±æ€§å®ç°æ–¹æ¡ˆä¸­ï¼Œè¿˜æœ‰ä¸€ç‚¹æˆ‘ä»¬æ²¡æœ‰é—­ç¯ä»‹ç»ï¼Œå³å…¨å±€çš„å…³è”ç®¡ç†å™¨å’ŒHashè¡¨æ˜¯æ€ä¹ˆåˆ›å»ºçš„ï¼Œä½•æ—¶åˆ›å»ºçš„ã€‚æˆ‘ä»¬ç›®å‰åªçœ‹åˆ°ï¼Œå½“è¦è®¾ç½®æˆ–è·å–å…³è”å±æ€§æ—¶ï¼Œç›´æ¥æ‹¿åˆ°ç®¡ç†å™¨å’ŒHashè¡¨è¿›è¡Œä½¿ç”¨ï¼Œå¹¶æ— åˆå§‹åŒ–ã€‚å…¶å®ï¼Œè¿™äº›å…¨å±€æ•°æ®ç»“æ„çš„åˆ›å»ºåœ¨runtimeåˆå§‹åŒ–æ—¶å°±å·²ç»å®Œæˆï¼Œæµç¨‹è·¯å¾„å¦‚ä¸‹ï¼š 1. è°ƒç”¨runtimeå…¥å£å‡½æ•°_objc_init 2. é€šçŸ¥è°ƒç”¨map_imageså‡½æ•° 3. è°ƒç”¨map_images_nolockå‡½æ•° map_images_nolockå…¶ä¸­ä¼šè°ƒç”¨arr_initå‡½æ•°ï¼Œæ­¤å‡½æ•°å®ç°å¦‚ä¸‹ï¼š 12345678void arr_init(void) &#123; AutoreleasePoolPage::init(); SideTablesMap.init(); _objc_associations_init(); if (DebugScanWeakTables) startWeakTableScan();&#125; å¯ä»¥çœ‹åˆ°ï¼Œæ­¤å‡½æ•°ä¼šè¿›è¡Œè‡ªåŠ¨é‡Šæ”¾æ± ï¼Œå…³è”å±æ€§ç­‰é€»è¾‘çš„åˆå§‹åŒ–ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€” ç²å°‘ QQï¼š316045346 åŒæ—¶ï¼Œå¦‚æœæœ¬ç¯‡æ–‡ç« è®©ä½ è§‰å¾—æœ‰ç”¨ï¼Œæ¬¢è¿åˆ†äº«ç»™æ›´å¤šæœ‹å‹ï¼Œè¯·æ ‡æ˜å‡ºå¤„ã€‚","categories":[{"name":"ç¼–ç¨‹ç ç‘","slug":"ç¼–ç¨‹ç ç‘","permalink":"http://huishao.cc/categories/ç¼–ç¨‹ç ç‘/"}],"tags":[],"keywords":[{"name":"ç¼–ç¨‹ç ç‘","slug":"ç¼–ç¨‹ç ç‘","permalink":"http://huishao.cc/categories/ç¼–ç¨‹ç ç‘/"}]},{"title":"Clangä»£ç è¦†ç›–ç‡æ£€æµ‹ï¼ˆæ’æ¡©æŠ€æœ¯ï¼‰","slug":"446Clangä»£ç è¦†ç›–ç‡æ£€æµ‹ï¼ˆæ’æ¡©æŠ€æœ¯ï¼‰","date":"2022-06-18T16:00:00.000Z","updated":"2022-06-19T09:11:20.211Z","comments":true,"path":"2022/06/19/446Clangä»£ç è¦†ç›–ç‡æ£€æµ‹ï¼ˆæ’æ¡©æŠ€æœ¯ï¼‰/","link":"","permalink":"http://huishao.cc/2022/06/19/446Clangä»£ç è¦†ç›–ç‡æ£€æµ‹ï¼ˆæ’æ¡©æŠ€æœ¯ï¼‰/","excerpt":"","text":"Clangä»£ç è¦†ç›–ç‡æ£€æµ‹ï¼ˆæ’æ¡©æŠ€æœ¯ï¼‰Clangçš„å…¨ç§°æ˜¯C Language Family Frontend for LLVMï¼Œå³åŸºäºLLVMçš„Cç³»åˆ—è¯­è¨€çš„å‰ç«¯ç¼–è¯‘å™¨ã€‚iOSåº”ç”¨çš„å‰ç«¯ç¼–è¯‘ï¼Œå³æ˜¯é‡‡ç”¨Clangå®Œæˆçš„ã€‚æœ¬ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬ä¸»è¦ä»‹ç»Clangå†…ç½®çš„ä¸€ä¸ªç®€å•çš„ä»£ç è¦†ç›–ç‡æ£€æµ‹åŠŸèƒ½ï¼Œå¯¹äºiOSå¼€å‘æ¥è¯´ï¼Œæ­¤åŠŸèƒ½æ›´å¤šç”¨äºObjective-Cçš„æ–¹æ³•æ’æ¡©ï¼Œä¸ºäºŒè¿›åˆ¶é‡æ’æä¾›æ”¯æŒï¼Œä¼˜åŒ–åº”ç”¨å¯åŠ¨é€Ÿåº¦ã€‚ä½†ä»£ç è¦†ç›–ç‡æ£€æµ‹åŠŸèƒ½å¹¶ä¸ä»…ä»…åªèƒ½åº”ç”¨ä¸äºŒè¿›åˆ¶é‡æ’ï¼Œå…¶æœ¬è´¨æ˜¯å¯¹äºå‡½æ•°çº§ã€åŸºæœ¬å—çº§æˆ–ä»£ç è¾¹ç¼˜çº§æ’å…¥å›è°ƒï¼Œæˆ‘ä»¬å¯ä»¥åŸºäºè¿™ä¸€åŸç†æ›´çµæ´»çš„å®ç°æ‰€éœ€è¦çš„åŠŸèƒ½ã€‚ 1. Tracing PCs with guardså¼€å¯Clangä»£ç è¦†ç›–ç‡æ£€æŸ¥åŠŸèƒ½ï¼Œéœ€è¦é…ç½®-fsanitize-coverageç¼–è¯‘å‚æ•°ï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªiOSæ¨¡æ¿å·¥ç¨‹åšæµ‹è¯•ï¼Œåœ¨Build Settings-&gt;Apple Clang - Custom Complier Flags-&gt;Other C Flagsä¸‹é¢é…ç½®ã€‚å¦‚å›¾ï¼š trace-pc-guardæ¨¡å¼ä¸‹ï¼Œæ‰€æœ‰ä»£ç å—é¦–éƒ¨éƒ½ä¼šè¢«æ’å…¥å¦‚ä¸‹å›è°ƒå‡½æ•°ï¼š void __sanitizer_cov_trace_pc_guard(uint32_t *guard) æ­¤å›è°ƒå‡½æ•°æ˜¯éœ€è¦å¼€å‘è€…è‡ªå®šä¹‰çš„ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè¿˜éœ€è¦å®ç°å¯¹åº”åˆå§‹åŒ–çš„å›è°ƒå‡½æ•°ï¼š void __sanitizer_cov_trace_pc_guard_init(uint32_t *start, uint32_t *stop) åœ¨ç¤ºä¾‹å·¥ç¨‹çš„main.mæ–‡ä»¶ä¸­å®šä¹‰è¿™ä¸¤ä¸ªå›è°ƒå¦‚ä¸‹ï¼š 123456789101112131415void __sanitizer_cov_trace_pc_guard(uint32_t *guard) &#123; void *PC = __builtin_return_address(0); Dl_info info; dladdr(PC, &amp;info); printf(\"%s \\n\",info.dli_sname);&#125;void __sanitizer_cov_trace_pc_guard_init(uint32_t *start, uint32_t *stop) &#123; static uint64_t N; if (start == stop || *start) return; for (uint32_t *x = start; x &lt; stop; x++) &#123; *x = ++N; &#125; printf(\"INIT Count: %llu \\n\", N);&#125; å…¶ä¸­ï¼Œ__sanitizer_cov_trace_pc_guard_initä¸ºåˆå§‹åŒ–å›è°ƒï¼Œé€šè¿‡å…¶ä¸­å‚æ•°å¯ä»¥è·å–åˆ°ç¬¦å·ä¸ªæ•°ï¼Œ__sanitizer_cov_trace_pc_guardæ˜¯æ’æ¡©å‡½æ•°ï¼Œæ¯ä¸ªä»£ç å—å¼€å§‹è°ƒç”¨æ—¶ï¼Œéƒ½ä¼šé¦–å…ˆè°ƒç”¨æ­¤æ’æ¡©å‡½æ•°ã€‚ ç›´æ¥è¿è¡Œä»£ç ï¼Œæ§åˆ¶å°è¾“å‡ºå¦‚ä¸‹ï¼š 1234567891011121314INIT Count: 14 main -[AppDelegate application:didFinishLaunchingWithOptions:] -[SceneDelegate window] -[SceneDelegate setWindow:] -[SceneDelegate window] -[SceneDelegate window] -[SceneDelegate scene:willConnectToSession:options:] -[SceneDelegate window] -[SceneDelegate window] -[SceneDelegate window] -[ViewController viewDidLoad] -[SceneDelegate sceneWillEnterForeground:] -[SceneDelegate sceneDidBecomeActive:] å¯ä»¥çœ‹åˆ°ï¼Œè¾“å‡ºçš„ç»“æœå°±æ˜¯æŒ‰ç…§é¡¹ç›®ä¸­æ–¹æ³•çš„è°ƒç”¨é¡ºåºæ’åºçš„ã€‚ä½ å¯èƒ½çœ‹åˆ°æœ‰è®¸å¤šé‡å¤çš„ç¬¦å·ï¼Œè¿™æ˜¯ç”±äºtrace-pc-guardè®¾å®šçš„ï¼Œå…¶ä¼šå¯¹æºç ä¸­ä»»æ„çš„ä»£ç å—å¼€å§‹æ‰§è¡Œæ—¶è¿›è¡Œæ’æ¡©å‡½æ•°å›è°ƒï¼ŒåŒ…æ‹¬ifåˆ¤æ–­ï¼Œwhileå¾ªç¯ä»¥åŠBlockè°ƒç”¨ç­‰ï¼Œä¾‹å¦‚ä½ å¯ä»¥å°è¯•åœ¨ViewController.mæ–‡ä»¶çš„viewDidLoadæ–¹æ³•ä¸­æ·»åŠ ä¸€äº›ä»£ç ï¼Œå¦‚ä¸‹ï¼š 1234567891011121314151617- (void)viewDidLoad &#123; [super viewDidLoad]; printf(\"å¼€å§‹Block==================\\n\"); void(^block)(void) = ^&#123; &#125;; block(); printf(\"å¼€å§‹å¾ªç¯==================\\n\"); int n = 3; while (n &gt; 0) &#123; n--; &#125; printf(\"å¼€å§‹åˆ†æ”¯åˆ¤æ–­==================\\n\"); if (n &lt; 10) &#123; n++; &#125;&#125; è¿è¡Œé¡¹ç›®ï¼Œè¾“å‡ºæ•ˆæœå¦‚ä¸‹ï¼š 12345678910111213141516171819202122INIT Count: 18 main -[AppDelegate application:didFinishLaunchingWithOptions:] -[SceneDelegate window] -[SceneDelegate setWindow:] -[SceneDelegate window] -[SceneDelegate window] -[SceneDelegate scene:willConnectToSession:options:] -[SceneDelegate window] -[SceneDelegate window] -[SceneDelegate window] -[ViewController viewDidLoad] å¼€å§‹Block==================__29-[ViewController viewDidLoad]_block_invoke å¼€å§‹å¾ªç¯==================-[ViewController viewDidLoad] -[ViewController viewDidLoad] -[ViewController viewDidLoad] å¼€å§‹åˆ†æ”¯åˆ¤æ–­==================-[ViewController viewDidLoad] -[SceneDelegate sceneWillEnterForeground:] -[SceneDelegate sceneDidBecomeActive:] æœ‰æ—¶å€™å¹¶éæ‰€æœ‰çš„ä»£ç å—éƒ½éœ€è¦æ’æ¡©ï¼Œä¾‹å¦‚åšäºŒè¿›åˆ¶é‡æ’æ—¶ï¼Œåªéœ€è¦æ–¹æ³•å’Œå‡½æ•°çš„æ’æ¡©ï¼Œä¹Ÿæœ‰é…ç½®æ–¹å¼ï¼Œæˆ‘ä»¬åé¢ä»‹ç»ã€‚ 2. Inline 8bit-countersæ­¤æ¨¡å¼éœ€è¦é…ç½®æˆï¼š 1-fsanitize-coverage=inline-8bit-counters æ­¤æ¨¡å¼ä¸trace-pc-guardç±»ä¼¼ï¼Œåªæ˜¯å…¶åœ¨ä»£ç å—å¼€å§‹æ—¶ä¸ä¼šè¿›è¡Œå›è°ƒï¼Œè€Œæ˜¯ç®€å•çš„å¢åŠ å†…ç½®è®¡æ•°å™¨çš„è®¡æ•°ã€‚åŒæ ·ï¼Œåœ¨æ­¤æ¨¡å¼ä¸‹ï¼Œç”¨æˆ·éœ€è¦å®ç°å¦‚ä¸‹è‡ªå®šä¹‰å‡½æ•°ï¼š 1234void __sanitizer_cov_8bit_counters_init(char *start, char *end) &#123; // [start,end) is the array of 8-bit counters created for the current DSO. // Capture this array in order to read/modify the counters.&#125; æ­¤å‡½æ•°å¯¹åº”è®¡æ•°å™¨çš„åˆå§‹åŒ–ã€‚ 3. Inline bool-flagæ­¤æ¨¡å¼ä¸inline-8bit-countersæ¨¡å¼ç±»ä¼¼ï¼Œéœ€è¦é…ç½®æˆï¼š 1-fsanitize-coverage=inline-bool-flag åœ¨æ­¤æ¨¡å¼ä¸‹ï¼Œåœ¨ä»£ç å—å¼€å§‹æ—¶ä¼šå°†ä¸€ä¸ªå†…ç½®çš„å¸ƒå°”å€¼ç½®ä¸ºtrueï¼Œè€Œä¸æ˜¯å¢åŠ è®¡æ•°å™¨çš„è®¡æ•°ã€‚éœ€è¦å®ç°å¦‚ä¸‹å‡½æ•°æ¥æ•è·æ­¤å˜é‡ï¼š 1234void __sanitizer_cov_bool_flag_init(bool *start, bool *end) &#123; // [start,end) is the array of boolean flags created for the current DSO. // Capture this array in order to read/modify the flags.&#125; 4. Tracing PCsæ­¤æ¨¡å¼åœ¨ä»£ç å—çš„å¼€å§‹å‡ºä¼šå›è°ƒ__sanitizer_cov_trace_pc() å‡½æ•°ï¼Œä¹Ÿæ˜¯æ’æ¡©å›è°ƒï¼Œæ­¤æ¨¡å¼å¯é…ç½®ä¸ºï¼š 1-fsanitize-coverage=trace-pc å¯¹åº”å®ç°è‡ªå®šä¹‰çš„æ’æ¡©å‡½æ•°å¦‚ä¸‹ï¼š 1234567void __sanitizer_cov_trace_pc(void*a) &#123; void *PC = __builtin_return_address(0); Dl_info info; dladdr(PC, &amp;info); printf(\"%s %p \\n\",info.dli_sname, info.dli_saddr); printf(\"__sanitizer_cov_trace_pc:%p\\n\",a);&#125; å¯¹äºæ­¤æ¨¡å¼ï¼Œæˆ‘ä»¬å¯ä»¥é…ç½®ä¸€ä¸ªé¢å¤–çš„å‚æ•°æ¥åŒºåˆ«é—´æ¥è°ƒç”¨ï¼Œä¾‹å¦‚ä¿®æ”¹ViewController.mæ–‡ä»¶ä¸­çš„ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132#import \"ViewController.h\"@interface ViewController ()@end@implementation ViewController- (void)viewDidLoad &#123; [super viewDidLoad]; printf(\"å¼€å§‹Block==================\\n\"); void(^block)(void) = ^&#123; &#125;; block(); printf(\"å¼€å§‹å¾ªç¯==================\\n\"); int n = 3; while (n &gt; 0) &#123; n--; &#125; printf(\"å¼€å§‹åˆ†æ”¯åˆ¤æ–­==================\\n\"); if (n &lt; 10) &#123; n++; &#125; [self log];&#125;- (void)log &#123; &#125;@end æ–°å®šä¹‰äº†ä¸€ä¸ªlogå‡½æ•°ï¼Œå¹¶åœ¨ViewDidLoadä¸­è¿›è¡Œäº†è°ƒç”¨ï¼Œé…ç½®ç¼–è¯‘é€‰é¡¹å¦‚ä¸‹ï¼š 1-fsanitize-coverage=trace-pc,indirect-calls å¯¹åº”å®ç°é—´æ¥è°ƒç”¨çš„æ’æ¡©å›è°ƒå¦‚ä¸‹ï¼š 123void __sanitizer_cov_trace_pc_indir(void *callee) &#123; printf(&quot;__sanitizer_cov_trace_pc_indirect:%p\\n&quot;,callee);&#125; è¿è¡Œä»£ç ï¼Œæ§åˆ¶å°è¾“å‡ºå¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647main 0x105f5dee0 __sanitizer_cov_trace_pc:0x1-[AppDelegate application:didFinishLaunchingWithOptions:] 0x105f5dae0 __sanitizer_cov_trace_pc:0x6000019241f0-[SceneDelegate window] 0x105f5e200 __sanitizer_cov_trace_pc:0x600001b1ffc0-[SceneDelegate setWindow:] 0x105f5e240 __sanitizer_cov_trace_pc:0x600001b1ffc0-[SceneDelegate window] 0x105f5e200 __sanitizer_cov_trace_pc:0x600001b1ffc0-[SceneDelegate window] 0x105f5e200 __sanitizer_cov_trace_pc:0x600001b1ffc0-[SceneDelegate scene:willConnectToSession:options:] 0x105f5df80 __sanitizer_cov_trace_pc:0x600001b1ffc0-[SceneDelegate window] 0x105f5e200 __sanitizer_cov_trace_pc:0x600001b1ffc0-[SceneDelegate window] 0x105f5e200 __sanitizer_cov_trace_pc:0x600001b1ffc0-[SceneDelegate window] 0x105f5e200 __sanitizer_cov_trace_pc:0x600001b1ffc0-[ViewController viewDidLoad] 0x105f5d940 __sanitizer_cov_trace_pc:0x7fec54f08490-[ViewController viewDidLoad] 0x105ffa2c8 __sanitizer_cov_trace_pc_indirect:0x7fff20183600å¼€å§‹Block==================-[ViewController viewDidLoad] 0x105ffa2c8 __sanitizer_cov_trace_pc_indirect:0x105f5da80__29-[ViewController viewDidLoad]_block_invoke 0x105f5da80 __sanitizer_cov_trace_pc:0x105f60040å¼€å§‹å¾ªç¯==================-[ViewController viewDidLoad] 0x105f5d940 __sanitizer_cov_trace_pc:0x7fff864ab328-[ViewController viewDidLoad] 0x105f5d940 __sanitizer_cov_trace_pc:0x7fff864ab328-[ViewController viewDidLoad] 0x105f5d940 __sanitizer_cov_trace_pc:0x7fff864ab328å¼€å§‹åˆ†æ”¯åˆ¤æ–­==================-[ViewController viewDidLoad] 0x105f5d940 __sanitizer_cov_trace_pc:0x7fff864ab328-[ViewController viewDidLoad] 0x105ffa2c8 __sanitizer_cov_trace_pc_indirect:0x7fff201833c0-[ViewController log] 0x105f5dab0 __sanitizer_cov_trace_pc:0x7fec54f08490-[SceneDelegate sceneWillEnterForeground:] 0x105f5e140 __sanitizer_cov_trace_pc:0x600001b1ffc0-[SceneDelegate sceneDidBecomeActive:] 0x105f5e080 __sanitizer_cov_trace_pc:0x600001b1ffc0 5. ä¸åŒçº§åˆ«çš„æ£€æµ‹å‰é¢æˆ‘ä»¬ä»‹ç»çš„ç¼–è¯‘æ¨¡å¼ï¼Œä¼šå¯¹å‡½æ•°ï¼ŒBlockå’Œé€»è¾‘ä»£ç å—è¿›è¡Œæ£€æµ‹ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬ä¸éœ€è¦è¿™ä¸ªç»†ç²’åº¦çš„æ£€æµ‹ï¼Œä¾‹å¦‚åœ¨äºŒè¿›åˆ¶é‡æ’æ—¶ï¼Œæˆ‘ä»¬ä»…ä»…æƒ³æ£€æµ‹æ–¹æ³•å’Œå‡½æ•°ï¼Œåªæƒ³å¯¹æ–¹æ³•å‡½æ•°è¿›è¡Œæ’æ¡©ï¼Œæ­¤æ—¶å°±å¯ä»¥é…ç½®æ£€æµ‹çº§åˆ«å‚æ•°ï¼Œæ”¯æŒçš„çº§åˆ«å‚æ•°æœ‰ä¸‰ç§ï¼š 1. edgeï¼šé»˜è®¤çš„çº§åˆ«ï¼Œç»†ç²’åº¦æœ€é«˜çš„çº§åˆ«ï¼Œå‡½æ•°ï¼ŒBlockå’Œä»£ç å—éƒ½ä¼šè¢«æ’æ¡©ã€‚ 2. bbï¼šåŸºç¡€çš„å—çº§ä»£ç ä¼šè¢«æ’æ¡©ã€‚ 3. funcï¼šä»…ä»…å‡½æ•°å—ä¼šè¢«æ’æ¡©ã€‚ é€šå¸¸æˆ‘ä»¬åœ¨åšäºŒè¿›åˆ¶é‡æ’æ—¶ï¼Œæ›´å…³æ³¨çš„æ˜¯å‡½æ•°çš„è°ƒç”¨é¡ºåºï¼Œä½¿ç”¨funcç­‰çº§å³å¯ï¼Œç¼–è¯‘è®¾ç½®å¦‚ä¸‹ï¼š 1-fsanitize-coverage=trace-pc,func ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€” ç²å°‘ QQï¼š316045346 åŒæ—¶ï¼Œå¦‚æœæœ¬ç¯‡æ–‡ç« è®©ä½ è§‰å¾—æœ‰ç”¨ï¼Œæ¬¢è¿åˆ†äº«ç»™æ›´å¤šæœ‹å‹ï¼Œè¯·æ ‡æ˜å‡ºå¤„ã€‚","categories":[{"name":"ç¼–ç¨‹ç ç‘","slug":"ç¼–ç¨‹ç ç‘","permalink":"http://huishao.cc/categories/ç¼–ç¨‹ç ç‘/"}],"tags":[],"keywords":[{"name":"ç¼–ç¨‹ç ç‘","slug":"ç¼–ç¨‹ç ç‘","permalink":"http://huishao.cc/categories/ç¼–ç¨‹ç ç‘/"}]},{"title":"å‰ç«¯è‡ªåŠ¨åŒ–æ„å»ºä¹‹Gulp","slug":"445å‰ç«¯è‡ªåŠ¨åŒ–æ„å»ºä¹‹Gulp","date":"2022-06-17T16:00:00.000Z","updated":"2022-06-18T04:39:16.846Z","comments":true,"path":"2022/06/18/445å‰ç«¯è‡ªåŠ¨åŒ–æ„å»ºä¹‹Gulp/","link":"","permalink":"http://huishao.cc/2022/06/18/445å‰ç«¯è‡ªåŠ¨åŒ–æ„å»ºä¹‹Gulp/","excerpt":"","text":"å‰ç«¯è‡ªåŠ¨åŒ–æ„å»ºä¹‹Gulpæœ¬ç¯‡æ–‡ç« çš„æ ¸å¿ƒæ˜¯ä»‹ç»ä¸€æ¬¾å¼ºå¤§çš„ä»»åŠ¡æµå·¥å…·Gulpï¼Œä¹‹æ‰€ä»¥é¢˜ç›®å«åšâ€œå‰ç«¯è‡ªåŠ¨åŒ–æ„å»ºä¹‹Gulpâ€ï¼Œæ˜¯å› ä¸ºGulpæœ¬èº«æ˜¯ä½¿ç”¨JSç¼–å†™çš„è¿è¡Œåœ¨Nodeç¯å¢ƒçš„ä¸€ä¸ªnpmåŒ…ï¼Œå¹¶ä¸”å¤§éƒ¨åˆ†å¼€å‘è€…ä¹Ÿéƒ½ä½¿ç”¨å®ƒæ¥ä½œä¸ºå‰ç«¯é¡¹ç›®çš„è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·ã€‚ä¸è¿‡ï¼Œä»æœ¬è´¨ä¸Šè¯´ï¼ŒGulpå¹¶éåªèƒ½åšå‰ç«¯è‡ªåŠ¨åŒ–æ„å»ºï¼Œåç«¯æ„å»ºå‘å¸ƒè‡ªåŠ¨åŒ–ï¼Œè„šæœ¬å·¥å…·é›†è‡ªåŠ¨åŒ–ï¼Œæµ‹è¯•æµç¨‹è‡ªåŠ¨åŒ–ç­‰éƒ½å¯ä»¥ä½¿ç”¨Gulpã€‚æ‰€ä»¥ï¼Œæ— è®ºä½ æ˜¯å“ªä¸ªæŠ€æœ¯æ ˆçš„å¼€å‘è€…ï¼Œå­¦ä¹ ä½¿ç”¨Gulpéƒ½ä¼šå¯¹ä½ å¤§æœ‰è£¨ç›Šã€‚ è¿™è¾¹æ–‡ç« èƒ½å¤Ÿå¸¦ç»™ä½ ï¼š Gulpå·¥å…·çš„å®‰è£… Gulpå·¥ä½œåŸç† åˆ›å»ºè‡ªåŠ¨åŒ–æµç¨‹ä¸­çš„ç‹¬ç«‹ä»»åŠ¡ ä»»åŠ¡çš„ä¸²è¡Œä¸å¹¶è¡Œ ä½¿ç”¨ç®¡é“å¤„ç†æ•°æ®æµ ç›‘å¬æ–‡ä»¶å˜æ›´ ç®€æ˜“å‰ç«¯è‡ªåŠ¨åŒ–æ„å»ºDEMOæµç¨‹ æœ¬ç¯‡æ–‡ç« è™½ç„¶æ— æ³•å°†Gulpæ‰€æœ‰çš„ç»†èŠ‚éƒ½ä»‹ç»åˆ°ï¼Œä½†æ€»ä½“ä¸Šæ¥è¯´æŒ‘é€‰äº†å…¶ä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œä¹Ÿæ˜¯æœ€å®ç”¨çš„éƒ¨åˆ†è¿›è¡Œäº†ä»‹ç»ï¼Œå¹¶ä¸”é€šè¿‡ä¸€ä¸ªå‰ç«¯DEMOçš„ç¤ºä¾‹ï¼Œæ¼”ç¤ºä½¿ç”¨Gulpè¿›è¡Œ[ç¯å¢ƒåˆå§‹åŒ–-&gt;ä»£ç åˆå¹¶-&gt;ä»£ç å‹ç¼©-&gt;å¯åŠ¨æœåŠ¡å™¨-&gt;ç›‘å¬æ–‡ä»¶-&gt;çƒ­æ›´æ–°æµè§ˆå™¨]çš„å®Œæ•´è‡ªåŠ¨åŒ–æµç¨‹ã€‚ ä¸€.GulpåŸºç¡€å¥½åƒä»»ä½•æŠ€æœ¯æ ˆçš„å¼€å‘è€…ï¼Œéƒ½ä¼šé‡åˆ°è€—è´¹æ—¶é—´ä¸”è®©äººç—›è‹¦ä¸å ªçš„æµç¨‹é—®é¢˜ã€‚é™¤äº†åŸºç¡€çš„ç ”å‘ï¼Œæµ‹è¯•ï¼Œéƒ¨ç½²æµç¨‹å¤–ï¼Œå¾€å¾€ä¸­é—´è¿˜éœ€è¦æ ¹æ®éœ€æ±‚æ‰§è¡Œé¢å¤–çš„ä»»åŠ¡ï¼Œä¾‹å¦‚ä»£ç æ£€æŸ¥ï¼Œä»£ç å‹ç¼©ï¼Œä»£ç æ··æ·†ç­‰ã€‚è¿™äº›æµç¨‹è™½ç„¶ä¸ç ”å‘æ— å…³ï¼Œä½†æ˜¯å´æ˜¯äº§å“ä¸Šçº¿çš„å¿…å¤‡è¿‡ç¨‹ï¼Œç¹ççš„æµç¨‹ä¸ä»…ä¼šæ¶ˆè€—å¼€å‘è€…é¢å¤–çš„ç²¾åŠ›ï¼Œå¯¹äºå›¢é˜Ÿæ¥è¯´ï¼Œä¹Ÿå¾ˆéš¾æ§åˆ¶æ‰€æœ‰å¼€å‘è€…æ‰€æ‰§è¡Œçš„æµç¨‹éƒ½ä¸€è‡´ä¸”å®Œæ•´ï¼Œä¾‹å¦‚æŸäº›æˆå‘˜å¯èƒ½ç”±äºç–å¿½å¤§æ„è€Œå¿˜è®°åšä»£ç å‹ç¼©å°±ç›´æ¥å°†é¡¹ç›®å‘å¸ƒä¸Šçº¿äº†ã€‚å› æ­¤ï¼Œå°†æµç¨‹è‡ªåŠ¨åŒ–ä¸ä»…å¯ä»¥è§£æ”¾äººåŠ›ï¼Œæ›´æ˜¯é¡¹ç›®ç¨³å®šæ€§çš„ä¿éšœã€‚Gulpå°±æ˜¯ä¸ºè§£å†³è¿™æ ·é—®é¢˜è€Œå‘ç°çš„ä¸€æ¬¾ç®€å•ï¼Œé«˜æ•ˆä¸”ç”Ÿæ€å®Œæ•´çš„è‡ªåŠ¨åŒ–å·¥å…·ã€‚ 1.å®‰è£…GulpGulpæ˜¯è¿è¡Œåœ¨Nodeç¯å¢ƒä¸­çš„ï¼Œå› æ­¤ä½ éœ€è¦å…ˆå®‰è£…Node.jsï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚ Gulpå·¥å…·åˆ†ä¸¤éƒ¨åˆ†æ„æˆï¼Œå…¨å±€Gulp CLIå’Œæœ¬åœ°Gulpã€‚å…³äºä»–ä»¬ä¹‹é—´çš„å…³ç³»ï¼Œåé¢æˆ‘ä»¬å†è¯¦ç»†ä»‹ç»ã€‚é¦–å…ˆå…ˆæ¥å®‰è£…å…¨å±€çš„Gulp CLIå·¥å…·ï¼Œåœ¨ç»ˆç«¯æ‰§è¡Œå¦‚ä¸‹æŒ‡ä»¤ï¼š 1sudo npm install -g gulp-cli å®‰è£…å®Œæˆåï¼Œè¦æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸï¼Œå¯ä»¥é”®å…¥å¦‚ä¸‹æŒ‡ä»¤ï¼š 1gulp -v æ­¤æ—¶ï¼Œä½ åº”è¯¥å¯ä»¥çœ‹åˆ°å¦‚ä¸‹çš„è¾“å‡ºï¼š 12CLI version: 2.3.0Local version: Unknown å…¶ä¸­ï¼Œç¬¬ä¸€è¡Œè¡¨ç¤ºæˆ‘ä»¬å®‰è£…çš„å…¨å±€çš„Gulp CLIå·¥å…·çš„ç‰ˆæœ¬å·ï¼Œç¬¬äºŒè¡Œè¡¨ç¤ºæœ¬åœ°Gulpç‰ˆæœ¬å·ï¼Œæœ¬åœ°Gulpæ˜¯å®‰è£…åœ¨å…·ä½“çš„é¡¹ç›®ç›®å½•ä¸­çš„ï¼Œæ­¤æ—¶æˆ‘ä»¬å°šæœªå®‰è£…ã€‚ä¸‹é¢æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªé¡¹ç›®ç›®å½•ï¼Œä¾‹å¦‚åˆ›å»ºåä¸ºgulp-demoæ–‡ä»¶å¤¹ï¼Œåœ¨ç›®å½•ä¸‹ä½¿ç”¨ä¸‹é¢çš„æŒ‡ä»¤æ¥åˆå§‹åŒ–Nodeæ¨¡å—ï¼š 1npm init åœ¨å½“å‰ç›®å½•ä¸‹ä½¿ç”¨å¦‚ä¸‹æŒ‡ä»¤æ¥å®‰è£…æœ¬åœ°Gulpï¼š 1npm install --save-dev gulp å®‰è£…å®Œæˆåï¼Œå†æ¬¡æ‰§è¡Œgulp -vï¼Œå¯ä»¥çœ‹åˆ°æœ¬åœ°Gulpçš„ç‰ˆæœ¬ï¼Œå¦‚ä¸‹ï¼š 12CLI version: 2.3.0Local version: 4.0.2 éœ€è¦æ³¨æ„ï¼Œä½ åœ¨æµ‹è¯•æ—¶ï¼Œè¦ä½¿ç”¨4.xåŠä»¥ä¸Šçš„æœ¬åœ°Gulpç‰ˆæœ¬ã€‚ 2.Gulpçš„å·¥ä½œåŸç†å‰é¢ï¼Œæˆ‘ä»¬å®‰è£…äº†Gulp CLIå’Œæœ¬åœ°Gulpï¼Œç°åœ¨æ˜¯æ—¶å€™æ¥ä»‹ç»ä¸‹Gulpçš„å·¥ä½œåŸç†äº†ã€‚åœ¨ä½¿ç”¨Gulpæ—¶ï¼Œæˆ‘ä»¬éœ€è¦ç¼–å†™ä¸€ä¸ªåä¸ºGulpfile.jsçš„æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯Gulpå·¥ä½œçš„æ ¸å¿ƒï¼Œå…¶ä¸­ä¼šå®šä¹‰å„ç§ä»»åŠ¡åŠä»»åŠ¡æµã€‚Gulp CLIå·¥å…·æ˜¯å¯åŠ¨Gulpçš„å…¥å£ï¼Œå…¶é€šè¿‡æŒ‡ä»¤æ¥è°ƒç”¨é¡¹ç›®ä¸­çš„æœ¬åœ°Gulpï¼Œæœ¬åœ°Gulpä¼šè°ƒç”¨Gulpfile.jsæ–‡ä»¶ï¼ŒåŠ è½½å’Œæ‰§è¡Œå®šä¹‰å¥½çš„ä»»åŠ¡ï¼Œåœ¨Gulpfile.jsæ–‡ä»¶ä¸­ï¼Œé€šå¸¸åˆéœ€è¦è°ƒç”¨æœ¬åœ°Gulpæ¨¡å—ä¸­æä¾›çš„APIæ–¹æ³•ï¼Œä»¥åŠæœ¬åœ°Gulpæ’ä»¶æˆ–è‡ªå®šä¹‰å‡½æ•°çš„åŠŸèƒ½ä»è€Œå®ç°ä»»åŠ¡ã€‚å·¥ä½œåŸç†å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 3.ç¼–å†™Gulpfile.jsæ–‡ä»¶åœ¨å­¦ä¹ ç¼–ç¨‹è¯­è¨€æ—¶ï¼Œç¬¬ä¸€ä¸ªç¨‹åºé€šå¸¸éƒ½æ˜¯HelloWorldï¼ŒGulpçš„å­¦ä¹ ä¹Ÿä¸ä¾‹å¤–ï¼Œæˆ‘ä»¬å…ˆæ¥æµ‹è¯•ä¸‹Gulpçš„HelloWorldç¨‹åºã€‚åœ¨å·¥ç¨‹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªå‘½åä¸ºGulpfile.jsçš„æ–‡ä»¶ï¼Œåœ¨å…¶ä¸­ç¼–å†™å¦‚ä¸‹ä»£ç ï¼š 12345678// å¼•å…¥æœ¬åœ°Gulpæ¨¡å—var gulp = require('gulp');// è°ƒç”¨taskæ–¹æ³•æ¥å®šä¹‰ä»»åŠ¡gulp.task('gulp', function(done)&#123; console.log(\"Hello Gulp!\"); done();&#125;); å…¶ä¸­ï¼Œtaskå‡½æ•°ç”¨æ¥å®šä¹‰ä»»åŠ¡ï¼Œå…¶ç¬¬1ä¸ªå‚æ•°ä¸ºä»»åŠ¡åï¼Œç¬¬2ä¸ªå‚æ•°ä¸ºè¦æ‰§è¡Œçš„ä»»åŠ¡æ–¹æ³•ï¼Œè¿™é‡Œæˆ‘ä»¬ä¼ å…¥äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„å‡½æ•°ï¼Œæ­¤å‡½æ•°ä¸­ä¼šä¼ å…¥ä¸€ä¸ªå›è°ƒdoneå‚æ•°ï¼Œå½“ä»»åŠ¡é€»è¾‘ä»£ç ç»“æŸåï¼Œè¦è°ƒç”¨æ­¤å›è°ƒé€šçŸ¥Gulpæ­¤ä»»åŠ¡å·²ç»ç»“æŸï¼Œå¦åˆ™ä¼šé˜»å¡Gulpåç»­ä»»åŠ¡çš„æ‰§è¡Œã€‚ åœ¨å½“å‰ç›®å½•ä¸‹ï¼Œæ‰§è¡Œå¦‚ä¸‹ç»ˆç«¯æŒ‡ä»¤ï¼š 1gulp gulp æ­¤æŒ‡ä»¤çš„ä½œç”¨æ˜¯è®©å…¨å±€Gulp CLIå·¥å…·è°ƒç”¨æœ¬åœ°Gulpæ¥æ‰§è¡ŒGulpfile.jsä¸­å®šä¹‰çš„åä¸ºgulpçš„ä»»åŠ¡ã€‚æ‰§è¡Œåï¼Œç»ˆç«¯è¾“å‡ºå¦‚ä¸‹ï¼š 1234[09:37:18] Using gulpfile ~/Desktop/gulp-demo/gulpfile.js[09:37:18] Starting &apos;gulp&apos;...Hello Gulp![09:37:18] Finished &apos;gulp&apos; after 2.55 ms å¯ä»¥çœ‹åˆ°ï¼Œæ­£ç¡®è¾“å‡ºçš„Hello Gulp!ï¼Œå¹¶ä¸”æ‰§è¡Œä»»åŠ¡çš„å¼€å§‹æ—¶é—´å’Œç»“æŸæ—¶é—´éƒ½æœ‰è®°å½•ï¼Œä»»åŠ¡è€—æ—¶ä¹Ÿæœ‰è®°å½•ã€‚ äºŒ.Gulpä»»åŠ¡é“¾ä¸æ•°æ®æµæˆ‘ä»¬å·²ç»çŸ¥é“å¦‚ä½•é€šè¿‡Gulpæ¥æ‰§è¡Œç‹¬ç«‹çš„ä»»åŠ¡ï¼Œä½†æ›´å¤šå®é™…åœºæ™¯ä¸­ï¼Œè‡ªåŠ¨åŒ–çš„æµç¨‹éƒ½ä¸æ˜¯ç®€å•ç‹¬ç«‹çš„ä»»åŠ¡å¯ä»¥å®Œæˆçš„ï¼Œæˆ‘ä»¬éœ€è¦å°†ä»»åŠ¡ç»„æˆä»»åŠ¡é“¾ã€‚ä¾‹å¦‚æˆ‘ä»¬æ¨¡æ‹Ÿè¿™å‡ ä¸ªä»»åŠ¡ï¼š 123456789101112131415161718192021222324gulp.task('clean', function(done)&#123; console.log(\"æ¸…ç†æ„å»ºç›®å½•\"); done();&#125;);gulp.task('copy', function(done)&#123; console.log(\"å¤åˆ¶æ¨¡æ¿æ–‡ä»¶\"); done();&#125;);gulp.task('build', function(done)&#123; console.log(\"ç¼–è¯‘ä»£ç \"); done();&#125;);gulp.task('server', function(done)&#123; console.log(\"å¯åŠ¨å¼€å‘æœåŠ¡å™¨\"); done();&#125;);gulp.task('watch', function(done)&#123; console.log(\"ç›‘å¬æ–‡ä»¶å˜åŒ–æŒç»­çƒ­æ›´æ–°\"); done();&#125;); ä¸Šé¢5ä¸ªä»»åŠ¡æ¨¡æ‹Ÿäº†å‰ç«¯è‡ªåŠ¨åŒ–æ„å»ºçš„åŸºæœ¬æµç¨‹ï¼Œè¿™äº›ä»»åŠ¡é—´æœ‰äº›æ˜¯æœ‰ä¾èµ–å…³ç³»çš„ï¼Œæ¯”å¦‚æ¸…ç†æ„å»ºç›®å½•ä»»åŠ¡æ¥åœ¨å¤åˆ¶æ¨¡æ¿æ–‡ä»¶å’Œç¼–è¯‘ä»£ç ä¹‹å‰ï¼Œä¸ç„¶å¯èƒ½åˆšç¼–è¯‘å¥½çš„ä»£ç å°±åˆè¢«æ¸…æ‰äº†ï¼Œå¯åŠ¨å¼€å‘æœåŠ¡å™¨åˆ™è¦åœ¨å¤åˆ¶æ¨¡æ¿æ–‡ä»¶å’Œç¼–è¯‘ä»£ç ä¹‹åï¼Œä½†æ˜¯å¤åˆ¶æ¨¡æ¿æ–‡ä»¶å’Œç¼–è¯‘ä»£ç è¿™ä¸¤ä¸ªä»»åŠ¡æ˜¯å¯ä»¥å¹¶è¡Œè¿›è¡Œçš„ã€‚ä½¿ç”¨Gulpä»»åŠ¡é“¾ï¼Œå¯ä»¥éå¸¸æ–¹ä¾¿çš„å®ç°ä»»åŠ¡é—´ä¾èµ–å¤„ç†ã€‚ 1.serieså’Œparallelseriesæ„ä¸ºä¸²è¡Œï¼Œparallelæ„ä¸ºå¹¶è¡Œã€‚é€šè¿‡Gulpä¸­çš„è¿™ä¸¤ä¸ªAPIï¼Œå¯ä»¥æ–¹ä¾¿çš„å°†ä»»åŠ¡ç»„åˆæˆä¸²è¡Œé“¾æˆ–å¹¶è¡Œé“¾ï¼Œä»»åŠ¡é“¾ä¹Ÿå¯ä»¥ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„ä»»åŠ¡åœ¨ç»„åˆè¿›å…¶ä»–çš„ä»»åŠ¡é“¾ï¼Œè¿™æ ·å°±æ˜¯Gulpä»»åŠ¡çš„ç»„åˆå˜å¾—éå¸¸çµæ´»ã€‚æŒ‰ç…§å‰é¢æè¿°çš„éœ€æ±‚æ·»åŠ ä¸€ä¸ªä»»åŠ¡é“¾å¦‚ä¸‹ï¼š 123456gulp.task('dev', gulp.series( 'clean', gulp.parallel('copy', 'build'), 'server', 'watch')); åœ¨ç»ˆç«¯ä¸­é”®å…¥gulp devï¼Œè¾“å‡ºæƒ…å†µå¦‚ä¸‹ï¼š 123456789101112131415161718[10:38:08] Using gulpfile ~/Desktop/gulp-demo/gulpfile.js[10:38:08] Starting &apos;dev&apos;...[10:38:08] Starting &apos;clean&apos;...æ¸…ç†æ„å»ºç›®å½•[10:38:08] Finished &apos;clean&apos; after 915 Î¼s[10:38:08] Starting &apos;copy&apos;...[10:38:08] Starting &apos;build&apos;...å¤åˆ¶æ¨¡æ¿æ–‡ä»¶[10:38:08] Finished &apos;copy&apos; after 349 Î¼sç¼–è¯‘ä»£ç [10:38:08] Finished &apos;build&apos; after 423 Î¼s[10:38:08] Starting &apos;server&apos;...å¯åŠ¨å¼€å‘æœåŠ¡å™¨[10:38:08] Finished &apos;server&apos; after 180 Î¼s[10:38:08] Starting &apos;watch&apos;...ç›‘å¬æ–‡ä»¶å˜åŒ–æŒç»­çƒ­æ›´æ–°[10:38:08] Finished &apos;watch&apos; after 153 Î¼s[10:38:08] Finished &apos;dev&apos; after 5.57 ms ä»è¾“å‡ºå¯ä»¥çœ‹åˆ°ï¼Œä»»åŠ¡é—´çš„ä¸²è¡Œå’Œå¹¶è¡Œå…³ç³»å·²ç»å¯ä»¥æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ï¼Œä½¿ç”¨Gulpå¤„ç†ä»»åŠ¡ä¾èµ–å°±æ˜¯è¿™ä¹ˆç®€å•ã€‚ æˆ‘ä»¬å†å›è¿‡å¤´æ¥çœ‹ä¸€ä¸‹serieså’Œparallelä¸¤ä¸ªæ–¹æ³•ï¼Œå…¶å†…å¯ä»¥ä¼ å…¥ä¸é™ä¸ªæ•°ä¸ªå‚æ•°ï¼Œå‚æ•°å¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œå¯ä»¥æ˜¯å‡½æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶ä»–çš„ä»»åŠ¡é“¾ç»„åˆã€‚å½“å‚æ•°ä¸ºå­—ç¬¦ä¸²æ—¶ï¼Œå…¶ä¼šè¢«å½“æˆä»»åŠ¡åæ¥è°ƒç”¨æŒ‡å®šä»»åŠ¡ï¼Œå½“å‚æ•°ä¸ºå‡½æ•°æ—¶ï¼Œä¼šæ‰§è¡Œæ­¤å‡½æ•°ï¼Œå½“å‚æ•°ä¸ºä»»åŠ¡é“¾ç»„åˆæ—¶ï¼Œä¼šæ‰§è¡Œå¯¹åº”çš„ä»»åŠ¡é“¾ã€‚å½“å‚æ•°ä¸ºå‡½æ•°æ—¶è¦ç‰¹åˆ«æ³¨æ„ï¼Œå¿…é¡»å›è°ƒé€šçŸ¥Gulpä»»åŠ¡å®Œæˆï¼Œå¦åˆ™ä¼šé˜»å¡ä»»åŠ¡é“¾ã€‚å¦‚ä¸‹ï¼š 12345678910gulp.task('dev', gulp.series( 'clean', function(done)&#123; console.log('custom method'); done(); &#125;, gulp.parallel('copy', 'build'), 'server', 'watch')); æ‰§è¡Œåï¼Œç»ˆç«¯è¾“å‡ºå¦‚ä¸‹ï¼š 123456789101112131415161718192021[10:46:31] Using gulpfile ~/Desktop/gulp-demo/gulpfile.js[10:46:31] Starting &apos;dev&apos;...[10:46:31] Starting &apos;clean&apos;...æ¸…ç†æ„å»ºç›®å½•[10:46:31] Finished &apos;clean&apos; after 738 Î¼s[10:46:31] Starting &apos;&lt;anonymous&gt;&apos;...custom method[10:46:31] Finished &apos;&lt;anonymous&gt;&apos; after 238 Î¼s[10:46:31] Starting &apos;copy&apos;...[10:46:31] Starting &apos;build&apos;...å¤åˆ¶æ¨¡æ¿æ–‡ä»¶[10:46:31] Finished &apos;copy&apos; after 520 Î¼sç¼–è¯‘ä»£ç [10:46:31] Finished &apos;build&apos; after 490 Î¼s[10:46:31] Starting &apos;server&apos;...å¯åŠ¨å¼€å‘æœåŠ¡å™¨[10:46:31] Finished &apos;server&apos; after 168 Î¼s[10:46:31] Starting &apos;watch&apos;...ç›‘å¬æ–‡ä»¶å˜åŒ–æŒç»­çƒ­æ›´æ–°[10:46:31] Finished &apos;watch&apos; after 117 Î¼s[10:46:31] Finished &apos;dev&apos; after 7.16 ms ä½ æˆ–è®¸å‘ç°äº†ï¼Œæ‰§è¡Œåˆ°è‡ªå®šä¹‰çš„å‡½æ•°æ—¶ï¼Œç»ˆç«¯æ˜¾ç¤ºçš„ä»»åŠ¡åæ˜¯anonymousï¼Œè¡¨ç¤ºåŒ¿åçš„ï¼Œæ›´å¥½çš„æ–¹å¼æ˜¯æˆ‘ä»¬ä½¿ç”¨å…·åå‡½æ•°ï¼Œè¿™æ ·æ–¹ä¾¿å¯¹ä»»åŠ¡æ‰§è¡ŒçŠ¶æ€è¿›è¡Œå›æº¯ï¼Œå¦‚ä¸‹ï¼š 12345678910gulp.task('dev', gulp.series( 'clean', function customMethod(done)&#123; console.log('custom method'); done(); &#125;, gulp.parallel('copy', 'build'), 'server', 'watch')); 2.å…³äºGulpæ•°æ®æµä»å®è§‚ä¸Šäº†è§£äº†Gulpä»»åŠ¡çš„ä¸²è¡Œä¸å¹¶è¡Œï¼Œç°åœ¨æˆ‘ä»¬å†æ¥å…³æ³¨ä¸‹æ›´å…·ä½“çš„é—®é¢˜ã€‚æœ¬åœ°Gulpæœ¬èº«æä¾›äº†è®¸å¤šå¼ºå¤§çš„APIï¼Œåƒå‰é¢ç”¨åˆ°çš„taskï¼Œseriesï¼Œparalleléƒ½æ˜¯APIå…¶ä¸­ä¹‹ä¸€ã€‚è‡ªåŠ¨åŒ–æ„å»ºï¼Œæœ¬è´¨ä¸Šæ˜¯å¯¹æ–‡ä»¶çš„æ‰«æå’Œå¤„ç†ï¼Œå› æ­¤Gulpä¸­ä¹Ÿå°è£…äº†ä¸æ–‡ä»¶æ“ä½œç›¸å…³çš„APIã€‚ é¦–å…ˆï¼Œè¯»å–æ–‡ä»¶æµå’Œè¾“å‡ºæ–‡ä»¶æµçš„ä¸¤ä¸ªAPIåˆ†åˆ«æ˜¯srcå’Œdestã€‚ srcæ–¹æ³•ç”¨æ¥åˆ›å»ºä¸€ä¸ªæ–‡ä»¶æ•°æ®æµï¼Œå¯ä»¥ä»æ–‡ä»¶ç³»ç»Ÿè¯»å–æ–‡ä»¶æ•°æ®åˆ°è™šæ‹Ÿæ–‡ä»¶å¯¹è±¡ï¼Œè™šæ‹Ÿæ–‡ä»¶å¯¹è±¡æ˜¯Gulpä¸­çš„ä¸€ä¸ªæ¦‚å¿µï¼Œå…¶ä¼šå°†æ–‡ä»¶çš„åç§°ï¼Œä¿¡æ¯ï¼Œæ•°æ®ç­‰æŠ½è±¡æˆä¸€ä¸ªè™šæ‹Ÿçš„å¯¹è±¡ï¼Œä¹‹åæ–‡ä»¶çš„æ“ä½œéƒ½åœ¨å†…å­˜ä¸­è¿›è¡Œï¼Œé€Ÿåº¦å¾ˆå¿«ï¼Œç›´åˆ°å¤„ç†å®Œæˆååœ¨è¾“å‡ºåˆ°æŒ‡å®šæ–‡ä»¶ã€‚ä¾‹å¦‚å¼€å‘æ—¶ï¼Œæˆ‘ä»¬çš„æ¨¡æ¿ä»£ç é€šå¸¸åœ¨srcç›®å½•ä¸‹ï¼Œç¼–è¯‘æ‰“åŒ…åä¼šå°†å¤„ç†åçš„æ–‡ä»¶æ”¾å…¥destç›®å½•ä¸‹ï¼Œè¿™å°±æ¶‰åŠåˆ°æ–‡ä»¶çš„æ‹·è´å¤„ç†ã€‚ åœ¨å·¥ç¨‹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸ºsrcçš„å­æ–‡ä»¶å¤¹ï¼Œåœ¨å…¶ä¸­åˆ›å»ºä¸€ä¸ªç®€å•çš„HTMLæ–‡ä»¶ï¼Œä¿®æ”¹ä¸‹copyä»»åŠ¡å¦‚ä¸‹ï¼š 1234gulp.task('copy', function(done)&#123; return gulp.src('src/*.html'). pipe(gulp.dest('dest'));&#125;); å†æ¬¡æ‰§è¡Œæ•´ä¸ªä»»åŠ¡æµï¼Œå¯ä»¥çœ‹åˆ°é¡¹ç›®æ ¹ç›®å½•ä¸­è‡ªåŠ¨ç”Ÿæˆäº†ä¸€ä¸ªdestæ–‡ä»¶å¤¹ï¼Œå¹¶ä¸”å·²ç»å°†HTMLæ–‡ä»¶æ‹·è´äº†è¿›å»ã€‚åœ¨è¿™ä¸ªcopyä»»åŠ¡çš„å®ç°å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰è°ƒç”¨doneå›è°ƒï¼Œè¿™æ˜¯å› ä¸ºgulpçš„APIå·²ç»å®ç°äº†Gulpä»»åŠ¡æ¥å£è§„èŒƒï¼Œç›´æ¥è¿”å›ç»“æœå³å¯ã€‚ srcæ–¹æ³•è¯»å–æ–‡ä»¶æ•°æ®æµæ—¶ï¼Œå¯ä»¥æŒ‡å®šå…·ä½“çš„æ–‡ä»¶æˆ–é€šé…ç¬¦ï¼Œå¦‚ä¸Šä»£ç æ‰€ç¤ºï¼Œè¡¨ç¤ºå°†srcæ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰çš„HTMLæ–‡ä»¶é€‰ä¸­ï¼Œåˆ›å»ºæˆæ•°æ®æµï¼Œæ•°æ®æµæä¾›çš„ä¸»è¦APIæ˜¯pipeæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ç”¨æ¥è¿æ¥å„ä¸ªå¤„ç†æ•°æ®æµçš„èŠ‚ç‚¹ï¼Œå¯ä»¥å°†å®ƒç†è§£ä¸ºä¸€ä¸ªç®¡é“ï¼Œè¾“å…¥ä»ä¸€ç«¯æµå…¥ï¼Œå¤„ç†åä»å¦ä¸€ç«¯æµå‡ºï¼Œå¦‚æœéœ€è¦ç»§ç»­è¿›è¡Œå…¶ä»–å¤„ç†ï¼Œè¿˜å¯ä»¥è¿æ¥å…¶ä»–ç®¡é“ã€‚è¿™ç§è´£ä»»é“¾çš„è®¾è®¡æ¨¡å¼ï¼Œå¯ä»¥éå¸¸çµæ´»çš„è¿æ¥å„ä¸ªå¤„ç†æ’ä»¶ã€‚ä»¥å‰ç«¯ä»£ç åˆå¹¶å‹ç¼©å¤„ç†ä¸ºä¾‹ï¼Œæµç¨‹å¦‚ä¸‹ï¼š æ–‡ä»¶ç³»ç»Ÿâ€”-&gt;src[è™šæ‹Ÿæ–‡ä»¶æµ]â€”&gt;æ–‡ä»¶åˆå¹¶æ¨¡å—[åˆå¹¶åçš„è™šæ‹Ÿæ–‡ä»¶æµ]â€”&gt;ä»£ç å‹ç¼©æ¨¡å—[å‹ç¼©æœ‰çš„è™šæ‹Ÿæ–‡ä»¶æµ]â€”&gt;dest[å›å†™åˆ°æ–‡ä»¶ç³»ç»Ÿ]â€”&gt;æ–‡ä»¶ç³»ç»Ÿ ä¸‰.å®è·µï¼šç®€æ˜“å‰ç«¯è‡ªåŠ¨åŒ–æ„å»ºæµç¨‹å‰é¢æˆ‘ä»¬é€»è¾‘ä¸Šæ¨¡æ‹Ÿäº†å‰ç«¯è‡ªåŠ¨åŒ–æ„å»ºè¿‡ç¨‹ï¼Œåªæ˜¯åœ¨å®ç°ä¸Šï¼Œéƒ½æ˜¯ç”¨çš„logè¿›è¡Œæ¨¡æ‹Ÿï¼Œè¿™å¹¶ä¸ååˆ†æœ‰è¶£ã€‚ä½¿å…¶ï¼Œä½¿ç”¨Gulpæ­å»ºä¸€ä¸ªç®€æ˜“çš„å‰ç«¯æ„å»ºè‡ªåŠ¨åŒ–æµç¨‹å¹¶ä¸å¤æ‚ï¼Œå‡ åˆ†é’Ÿå°±å¯ä»¥æå®šã€‚ 1.å®‰è£…å‡ ä¸ªGulpæ’ä»¶Gulpæœ‰ç€éå¸¸ä¸°å¯Œçš„ç”Ÿæ€ï¼Œæœ¬è´¨ä¸Šï¼Œä»»æ„npmæ¨¡å—æˆ‘ä»¬éƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰4000å¤šä¸ªä¸“é—¨ä¸ºGulpè®¾è®¡çš„æ’ä»¶ï¼Œå¯ä»¥æ–¹ä¾¿çš„æ”¯æŒå„ç§æ–‡ä»¶å¤„ç†ï¼Œä»£ç æ£€æŸ¥ç­‰éœ€æ±‚ã€‚æ’ä»¶åœ°å€å¦‚ä¸‹ï¼š https://gulpjs.com/plugins/ æœ¬æ¬¡å®è·µï¼Œéœ€è¦ä½¿ç”¨åˆ°2ä¸ªGulpæ’ä»¶å’Œ2ä¸ªnpmæ¨¡å—ï¼Œåˆ†åˆ«è¿›è¡Œæ–‡ä»¶åˆå¹¶ï¼Œä»£ç å‹ç¼©ï¼Œæ–‡ä»¶åˆ é™¤å’Œæµè§ˆå™¨æµ‹è¯•çƒ­æ›´æ–°ã€‚åœ¨é¡¹ç›®ç›®å½•ä¸‹ä½¿ç”¨å¦‚ä¸‹æŒ‡ä»¤æ¥å®‰è£…è¿™äº›æ¨¡å—ï¼š 1234npm install --save-dev gulp-concat npm install --save-dev gulp-uglify npm install --save-dev del npm install --save-dev browser-sync åœ¨Gulpfile.jsä¸­å¼•å…¥è¿™äº›æ¨¡å—ï¼š 12345var gulp = require('gulp');var concat = require ('gulp-concat');var uglify = require('gulp-uglify');var del = require('del')var bSync = require('browser-sync').create(); 2.å®ç°è‡ªåŠ¨åŒ–æ„å»ºæµç¨‹ä¸­çš„å‡ ä¸ªä»»åŠ¡é¦–å…ˆæˆ‘ä»¬å…ˆæ¥å®ç°cleanä»»åŠ¡ï¼Œä¿®æ”¹ä»£ç å¦‚ä¸‹ï¼š 123gulp.task('clean', function(done)&#123; return del(['dest'])&#125;); ä¸Šé¢ä»£ç çš„ä½œç”¨æ˜¯å°†destæ–‡ä»¶å¤¹åˆ é™¤ï¼Œæ¯æ¬¡åˆå§‹æ„å»ºï¼Œæˆ‘ä»¬éƒ½å°†æ—§çš„ç›®å½•åˆ æ‰ï¼Œä»¥å…ç¼“å­˜çš„æ–‡ä»¶å¯¹æœ€ç»ˆçš„è½¯ä»¶åŒ…é€ æˆå½±å“ã€‚ copyä»»åŠ¡çš„å®ç°æ–¹æ³•ä¸å˜ï¼Œç›´æ¥å°†HTMLæ–‡ä»¶æ¨¡æ¿æ‹·è´åˆ°æŒ‡å®šçš„æ„å»ºç›®å½•å³å¯ï¼š 1234gulp.task('copy', function(done)&#123; return gulp.src('src/*.html'). pipe(gulp.dest('dest'));&#125;); ç¼–è¯‘çš„è¿‡ç¨‹ä¸»è¦æ¶‰åŠåˆ°CSSç›¸å…³çš„SASSæˆ–LESSç¼–è¯‘ï¼Œæˆ–TSï¼ŒCoffeeScriptçš„ç¼–è¯‘ç­‰ç­‰ï¼Œä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬åªåšJSæ–‡ä»¶çš„åˆå¹¶å’Œå‹ç¼©ï¼Œå¦‚ä¸‹ï¼š 123456gulp.task('build', function(done)&#123; return gulp.src('src/*.js') .pipe(concat('main.js')) .pipe(uglify()) .pipe(gulp.dest('dest'))&#125;); ä¸Šé¢ä»£ç çš„ä½œç”¨æ˜¯å°†srcæ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰çš„JSæ–‡ä»¶åˆå¹¶åˆ°ä¸€ä¸ªåä¸ºmain.jsçš„æ–‡ä»¶ä¸­ï¼Œå¹¶è¿›è¡Œä»£ç å‹ç¼©ï¼Œæœ€åè¾“å‡ºåˆ°destæ–‡ä»¶å¤¹ã€‚ å®ç°serverä»»åŠ¡å¦‚ä¸‹ï¼š 123456gulp.task('server', function(done)&#123; bSync.init(&#123; server:'./dest', &#125;); done();&#125;); ä¸Šé¢ä»£ç ä¼šå¯åŠ¨æœ¬åœ°æœåŠ¡å™¨ï¼Œå¹¶å¼•å¯¼chromeé¡¹ç›®é¡µé¢ã€‚ å¯¹äºç›‘å¬æœ¬åœ°æ–‡ä»¶çš„å˜åŒ–ï¼ŒGulpä¸­è‡ªå¸¦å¯¹åº”çš„APIï¼Œå®ç°watchä»»åŠ¡å¦‚ä¸‹ï¼š 123456789gulp.task('watch', function(done)&#123; gulp.watch(['src/*.js'],gulp.parallel('build')); gulp.watch(['src/*.html'],gulp.parallel('copy')); gulp.watch(['dest/**/*'],function(done)&#123; bSync.reload('index.html'); done() &#125;); done();&#125;); è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œç”±äºæˆ‘ä»¬å¯¹JSæ–‡ä»¶çš„ç¼–è¯‘å’ŒHTMLæ¨¡æ¿çš„æ‹·è´ä»»åŠ¡æ˜¯åˆ†å¼€çš„ï¼Œå› æ­¤ç›‘å¬ä¹Ÿå¯ä»¥åˆ†å¼€ï¼Œå½“å‘ç°JSæ–‡ä»¶å‘ç”Ÿäº†å˜åŒ–æ—¶ï¼Œåªè¿›è¡Œç¼–è¯‘ä»»åŠ¡å³å¯ï¼Œå½“å‘ç°HTMLæ–‡ä»¶å˜åŒ–æ—¶ï¼Œåªè¿›è¡Œæ¨¡æ¿æ‹·è´ä»»åŠ¡å³å¯ï¼Œå½“æ„å»ºæ–‡ä»¶å¤¹æœ‰å˜æ›´æ—¶ï¼Œé‡æ–°åˆ·æ–°æµè§ˆå™¨ï¼Œä»è€Œå®ç°å¼€å‘è¿‡ç¨‹ä¸­çš„æµ‹è¯•çƒ­æ›´æ–°ã€‚ æœ€åï¼Œæˆ‘ä»¬å¯ä»¥å†™ä¸€äº›æµ‹è¯•æ–‡ä»¶äº†ï¼Œåœ¨srcæ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸¤ä¸ªjsæ–‡ä»¶å’Œä¸€ä¸ªhtmlæ–‡ä»¶ï¼Œä»£ç åˆ†åˆ«å¦‚ä¸‹ï¼š file1.jsæ–‡ä»¶ä¸­ä»£ç ï¼š 1234function mlog(msg) &#123; console.log(Date(),': è‡ªå®šä¹‰è¾“å‡º -',msg);&#125;mlog(\"hello\"); file2.jsæ–‡ä»¶ä¸­ä»£ç ï¼š 1234var a = 1;var b = 2;var c = a + b;console.log(c); index.htmlæ–‡ä»¶ä¸­ä»£ç ï¼š 123456789&lt;html&gt;&lt;header&gt; &lt;script type=\"text/javascript\" src=\"./main.js\"&gt;&lt;/script&gt;&lt;/header&gt;&lt;body&gt; &lt;h1&gt;æ ‡é¢˜11&lt;/h1&gt;&lt;/body&gt; &lt;/html&gt; ä½¿ç”¨gulp devæ¥å¼€å¯è‡ªåŠ¨åŒ–æ„å»ºæµç¨‹ï¼Œä½ å¯ä»¥æ‰“å¼€chomeçš„æ§åˆ¶å°ï¼ŒæŸ¥çœ‹æ§åˆ¶å°çš„è¾“å‡ºï¼Œå°è¯•ä¿®æ”¹ä¸‹srcæ–‡ä»¶å¤¹ä¸­çš„HTMLæ–‡ä»¶å’ŒJSæ–‡ä»¶ï¼Œä¿å­˜åå¯ä»¥çœ‹åˆ°å¯¹åº”çš„é¡µé¢ä¹Ÿä¼šå‘ç”Ÿæ›´æ–°ã€‚ åˆ°æ­¤ï¼Œæˆ‘ä»¬å·²ç»å®ç°äº†ä¸€ä¸ªç®€å•çš„å‰ç«¯å¼€å‘è‡ªåŠ¨åŒ–æ„å»ºæµç¨‹ï¼ŒGulpä¸è´Ÿä½ æ‰€æœ›å§ï¼ æ¸©é¦¨æç¤ºï¼šåœ¨å­è¿›ç¨‹ç»“æŸä¹‹å‰ï¼ŒGulpè¿›ç¨‹æ˜¯ä¸ä¼šè‡ªåŠ¨ç»“æŸçš„ï¼Œå› æ­¤å…¶ä¼šä¸€ç›´ç›‘å¬æ–‡ä»¶çš„å˜æ›´åˆ·æ–°é¡µé¢ï¼Œè¦å…³é—­å¼€å‘æœåŠ¡å™¨ï¼Œåªéœ€control+cå³å¯ã€‚ å››.ç»“è¯­æœ€åï¼Œè™½ç„¶å¤§å¤šæ•°æƒ…å†µä¸‹Gulpä¼šç”¨åœ¨å‰ç«¯è‡ªåŠ¨åŒ–æ„å»ºä¸­ï¼Œä½†æ˜¯è¿™å¹¶ä¸æ˜¯Gulpå”¯ä¸€çš„ç”¨é€”ï¼Œä»»ä½•å¼€å‘å·¥ä½œæµéƒ½å¯ä»¥ä½¿ç”¨Gulpæ¥æ„å»ºï¼ŒnpmåŒ…çš„ä¸°å¯Œæå¤§çš„æ‰©å±•äº†Gulpçš„åº”ç”¨åœºæ™¯ã€‚å¸Œæœ›æœ¬ç¯‡æ–‡ç« å¯ä»¥å¸®ä½ æ‰“å¼€æŠ€æœ¯è§†é‡ï¼Œèƒ½å¤Ÿæ¢ç´¢å‡ºGulpçš„æ›´å¤šåº”ç”¨åœºæ™¯ï¼Œå¸®åŠ©ä½ ç®€åŒ–å·¥ä½œæµç¨‹ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€” ç²å°‘ QQï¼š316045346 åŒæ—¶ï¼Œå¦‚æœæœ¬ç¯‡æ–‡ç« è®©ä½ è§‰å¾—æœ‰ç”¨ï¼Œæ¬¢è¿åˆ†äº«ç»™æ›´å¤šæœ‹å‹ï¼Œè¯·æ ‡æ˜å‡ºå¤„ã€‚","categories":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}],"tags":[],"keywords":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}]},{"title":"è‡ªä¸Šè€Œä¸‹çš„ç†è§£ç½‘ç»œï¼ˆ6ï¼‰â€”â€”ç»ˆç¯‡ï¼ARPä¸Ethernet â…¡","slug":"444è‡ªä¸Šè€Œä¸‹çš„ç†è§£ç½‘ç»œï¼ˆ6ï¼‰â€”â€”ç»ˆç¯‡ï¼ARPä¸Ethernet â…¡","date":"2022-03-29T16:00:00.000Z","updated":"2022-03-30T10:55:51.715Z","comments":true,"path":"2022/03/30/444è‡ªä¸Šè€Œä¸‹çš„ç†è§£ç½‘ç»œï¼ˆ6ï¼‰â€”â€”ç»ˆç¯‡ï¼ARPä¸Ethernet â…¡/","link":"","permalink":"http://huishao.cc/2022/03/30/444è‡ªä¸Šè€Œä¸‹çš„ç†è§£ç½‘ç»œï¼ˆ6ï¼‰â€”â€”ç»ˆç¯‡ï¼ARPä¸Ethernet â…¡/","excerpt":"","text":"è‡ªä¸Šè€Œä¸‹çš„ç†è§£ç½‘ç»œï¼ˆ6ï¼‰â€”â€”ç»ˆç¯‡ï¼ARPä¸Ethernet â…¡æœ¬ç¯‡æ˜¯æœ¬ç³»åˆ—åšå®¢çš„æœ€åä¸€ç¯‡ï¼Œå›é¡¾æ­¤ç³»åˆ—æ–‡ç« çš„ä»‹ç»è¿‡ç¨‹ï¼Œæˆ‘ä»¬ä»‹ç»äº†ï¼š 1.ç½‘ä¸Šå†²æµªçš„ç¬¬ä¸€æ­¥ï¼šDNSåŸŸåè§£æåè®® https://my.oschina.net/u/2340880/blog/5272671 2.ç¦»æˆ‘ä»¬æœ€è¿‘çš„åº”ç”¨å±‚åè®®ï¼šHTTP https://my.oschina.net/u/2340880/blog/5308979 3.é«˜å®‰å…¨æ€§ï¼Œé«˜å¯é æ€§çš„åº”ç”¨å±‚åè®®ï¼šHTTPS https://my.oschina.net/u/2340880/blog/5373824 4.å¯é çš„ä¼ è¾“å±‚åè®®ï¼šTCP https://my.oschina.net/u/2340880/blog/5420433 5.æ¶‰åŠè·¯ç”±ä¸å¯»å€çš„ç½‘ç»œå±‚åè®®ï¼šIP https://my.oschina.net/u/2340880/blog/5465312 æˆ‘ä»¬ä¸€æ­¥æ­¥çš„æ¥è¿‘äº†ç½‘ç»œä¼ è¾“çš„åº•å±‚çœŸç›¸ï¼Œå¤§åƒä¸–ç•Œï¼Œå¤©æ¶¯å’«å°ºã€‚çœ‹ä¼¼ç¥å¥‡çš„ç½‘ç»œé€šä¿¡å…¶å®å°±æ˜¯åœ¨è¿™ä¸­åˆ†å±‚çš„æ€æƒ³ä¸‹å˜å¾—çº¯ç²¹å’Œç®€å•ã€‚æœ¬ç¯‡ä¹‹æ‰€ä»¥æ˜¯æ­¤ç³»åˆ—æ–‡ç« çš„ç»ˆç¯‡ï¼ŒåŸå› ä¹‹ä¸€æ˜¯åˆ°IPåè®®è¿™ä¸€å±‚åï¼Œæˆ‘ä»¬åŸºæœ¬å·²ç»ä»é€»è¾‘ä¸Šå¯ä»¥æ¸…æ¥šçš„ç†è§£äº†ç½‘ç»œä¼ è¾“çš„è¿‡ç¨‹ï¼Œç‰©ç†å±‚çš„å…·ä½“æ•°æ®ä¼ è¾“æ–¹å¼å¹¶ä¸ä¼šå½±å“æˆ‘ä»¬é€»è¾‘ä¸Šçš„ç†è§£ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæ›´é‡è¦çš„åŸå› æ˜¯ç¬”è€…å­¦è¯†è–„æµ…ï¼Œå¯¹é“¾è·¯å±‚åŠä»¥ä¸‹çš„çŸ¥è¯†ç¡®å®ä¸ç”šäº†è§£ï¼Œå› æ­¤æˆ‘ä»¬å°±åˆ°æ­¤ä¸ºæ­¢ã€‚ ä¸€. ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦MACåœ°å€æœ¬ç¯‡æ–‡ç« è¦ä»MACåœ°å€è¯´èµ·ï¼Œå¦‚æœä½ è®¤ä¸ºå½“è¦ä¼ è¾“çš„æ•°æ®è¢«å®Œæ•´çš„å°è£…æˆIPæŠ¥æ–‡ï¼Œæ˜ç¡®äº†æºIPåœ°å€å’Œç›®çš„IPåœ°å€åå°±ä¸‡äº‹å¤§å‰äº†ï¼Œé‚£åªèƒ½è¯´ä½ è¿˜å¤ªå¹´è½»äº†ã€‚æˆ‘ä»¬ä½¿ç”¨Wiresharkæ¥æŠ“ä¸€ä¸ªç®€å•çš„TCPåè®®æŠ¥æ–‡æ¥çœ‹ã€‚å¦‚ä¸‹å›¾ï¼š å¯ä»¥çœ‹åˆ°ï¼Œåœ¨IPåè®®è¿™ä¸€å±‚ï¼Œæ˜¯åªå…³æ³¨IPåœ°å€çš„ï¼Œä½†æ˜¯å†å‘ä¸‹ï¼Œåˆ°å°è£…æˆæ•°æ®é“¾è·¯å±‚çš„æ•°æ®å¸§æ—¶ï¼Œå·²ç»è¢«è½¬æ¢æˆäº†æºMACåœ°å€å’Œç›®çš„MACåœ°å€ã€‚ä½ å¯èƒ½ä¼šæœ‰ç–‘æƒ‘ï¼ŒæŒ‰ç…§æˆ‘ä»¬å‰é¢çš„ç†è§£ï¼Œé€šè¿‡IPåœ°å€å·²ç»å¯ä»¥å”¯ä¸€çš„å®šä½åˆ°è¦è¿›è¡Œç½‘ç»œé€šä¿¡çš„ä¸¤ç«¯ï¼Œä¸ºä½•è¦å¤šæ­¤ä¸€ä¸¾çš„åˆä½¿ç”¨MACåœ°å€å‘¢ï¼Ÿè¿™æ ·åšç©¶ç«Ÿæ˜¯ä»€ä¹ˆç›®çš„åˆæœ‰ä»€ä¹ˆå¿…è¦æ€§å‘¢ï¼Ÿæœ¬ç¯‡æ–‡ç« å°±æ¥å¸®ä½ è§£æƒ‘ã€‚ 1. ä»€ä¹ˆæ˜¯MACåœ°å€é¦–å…ˆæˆ‘ä»¬éœ€è¦å…ˆäº†è§£ä¸‹ä»€ä¹ˆæ˜¯MACåœ°å€ï¼ŒMACåœ°å€å…¨ç§°ä¸ºMedia Access Control Addressï¼Œé€šå¸¸ä¹Ÿå°†å…¶å«åšä»¥å¤ªç½‘åœ°å€æˆ–ç‰©ç†åœ°å€ï¼Œæ˜¯ä¸€ä¸ªç”¨æ¥ç¡®å®šè®¾å¤‡ç½‘ç»œä½ç½®çš„åœ°å€ã€‚æˆ‘ä»¬å¹³æ—¶ä½¿ç”¨çš„å¯è¿æ¥äº’è”ç½‘çš„è®¾å¤‡ä¸­ï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ªç½‘å¡å…ƒä»¶ï¼Œæ¯ä¸ªç½‘å¡éƒ½ä¼šæœ‰ä¸€ä¸ªå…¨çƒå”¯ä¸€çš„MACåœ°å€ï¼Œæ˜¯ç”±ç½‘ç»œè®¾å¤‡åˆ¶é€ å•†ç”Ÿäº§æ—¶çƒ§å½•åœ¨å…ƒä»¶å†…éƒ¨çš„ã€‚ MACåœ°å€çš„é•¿åº¦ä¸º48ä½ï¼Œå³6ä¸ªå­—èŠ‚ã€‚ä¸€èˆ¬åœ¨è¡¨ç¤ºæ—¶ï¼Œæˆ‘ä»¬ä¼šä»¥å­—èŠ‚ä¸ºç»„è¡¨ç¤ºï¼Œä¸­é—´ä½¿ç”¨å†’å·è¿›è¡Œåˆ†å‰²ã€‚ä½ ä¹Ÿå¯ä»¥æŸ¥çœ‹ä¸‹å½“å‰è®¾å¤‡çš„MACåœ°å€ï¼Œå¦‚ä¸‹å›¾ï¼š å½“æ•°æ®æŠ¥åœ¨ç½‘ç»œä¸­è¾“å‡ºæ—¶ï¼Œå¯èƒ½éœ€è¦ç»è¿‡å¤šä¸ªä¸­é—´èŠ‚ç‚¹çš„è½¬å‘æ‰èƒ½æœ€ç»ˆåˆ°è¾¾ç›®æ ‡èŠ‚ç‚¹ï¼Œåœ¨åˆå§‹èŠ‚ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦å°†ç›®æ ‡èŠ‚ç‚¹çš„IPæ˜ å°„åˆ°ä¸­é—´èŠ‚ç‚¹çš„MACåœ°å€ï¼Œä¹‹åç¬¬äºŒä¸ªèŠ‚ç‚¹æ ¹æ®IPæ¥æ˜ å°„åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„MACåœ°å€ï¼Œä¾æ¬¡è¿›è¡Œæ˜ å°„ï¼Œç›´åˆ°æœ€ç»ˆè¾¾åˆ°ç›®æ ‡ã€‚å› æ­¤ï¼Œæ•°æ®ä¼ è¾“çš„å…³é”®æ˜¯IPåœ°å€åˆ°MACåœ°å€çš„æ˜ å°„ï¼ŒARPåè®®å°±æ˜¯æ¥åšè¿™ä»¶äº‹æƒ…çš„ã€‚ 2. æœ‰äº†IPåœ°å€ï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦MACåœ°å€ï¼Ÿæˆ‘æƒ³ï¼Œè¿™ä¸ªé—®é¢˜æ˜¯åˆæ¬¡äº†è§£åˆ°MACåœ°å€çš„åŒå­¦éƒ½ä¼šæœ‰çš„ä¸€ä¸ªé—®é¢˜ï¼Œè¦è§£ç­”è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬é¦–å…ˆè¦æ¸…æ¥šIPåœ°å€å’ŒMACåœ°å€é—´çš„å¼‚åŒä¹‹å¤„ã€‚ IPåœ°å€å’ŒMACåœ°å€æœ€å¤§çš„ç›¸åŒç‚¹æ˜¯ä»–ä»¬éƒ½æ˜¯å”¯ä¸€çš„ï¼Œæˆ‘ä»¬ä¸»è¦çœ‹å®ƒä»¬çš„ä¸åŒä¹‹å¤„ï¼š Â· IPåœ°å€æ˜¯ç½‘ç»œå±‚ä½¿ç”¨çš„ï¼ŒMACåœ°å€æ˜¯é“¾è·¯å±‚ä½¿ç”¨çš„è¿™ä¸€ç‚¹å¾ˆå®¹æ˜“ç†è§£ï¼ŒIPåè®®æœ¬èº«å°±æ˜¯ç½‘ç»œå±‚çš„åè®®ï¼Œè™½ç„¶IPåœ°å€æ˜¯å”¯ä¸€çš„ï¼Œä½†å…¶å®åŸºäºç½‘ç»œæ‹“æ‰‘è€Œè®¾è®¡çš„ï¼ŒåŒä¸€å°è®¾å¤‡ä¿®æ”¹IPåœ°å€å¾ˆå®¹æ˜“ã€‚MACåœ°å€åˆ™æ˜¯é“¾è·¯å±‚çš„æ¦‚å¿µï¼Œå…¶åœ¨ç¡¬ä»¶ç”Ÿäº§æ˜¯å°±çƒ§å½•å¥½äº†ï¼ŒåŒä¸€å°è®¾å¤‡ä¸€èˆ¬æ— æ³•å˜åŠ¨ã€‚ Â· é•¿åº¦ä¸åŒIPv4ç‰ˆæœ¬çš„IPåœ°å€é•¿åº¦ä¸º32ä½ï¼ŒIPv6ç‰ˆæœ¬çš„IPåœ°å€é•¿åº¦ä¸º128ä½ï¼Œè€ŒMACåœ°å€çš„é•¿åº¦å›ºå®šä¸º48ä½ã€‚ IPåœ°å€æ˜¯é€»è¾‘ä¸Šçš„åœ°å€ï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£å…¶ä½œç”¨æ˜¯å°†æ•°æ®ä»ä¸€ä¸ªé€»è¾‘ä¸Šçš„ç½‘ç»œä¼ é€’åˆ°å¦ä¸€ä¸ªé€»è¾‘ä¸Šçš„ç½‘ç»œï¼Œè€ŒMACåœ°å€æ˜¯é“¾è·¯ä¸Šçš„åœ°å€ï¼Œå…¶ä½œç”¨æ˜¯å°†æ•°æ®ä»ä¸€ä¸ªè®¾å¤‡èŠ‚ç‚¹ä¼ é€’åˆ°å¦ä¸€ä¸ªè®¾å¤‡èŠ‚ç‚¹ã€‚é‚£ä¹ˆæ˜¯å¦å¯ä»¥å»æ‰MACåœ°å€ï¼Œåªä½¿ç”¨IPåœ°å€å‘¢ï¼Ÿç†è®ºä¸Šå¥½åƒå¯è¡Œï¼Œä½†å®é™…ä¸Šå´ä¸è¡Œã€‚æ ¸å¿ƒçš„åŸå› ä¹Ÿåœ¨äºIPæ˜¯é€»è¾‘ä¸Šçš„ï¼Œå½“ç½‘å¡æ¥æ”¶åˆ°ä¸€å—æ•°æ®æ—¶ï¼Œç”±äºé“¾è·¯å±‚å±äºä¸‹å±‚æ— æ³•è·å–ä¸Šå±‚çš„é€»è¾‘æ•°æ®ï¼Œç½‘å¡æ— æ³•è‡ªä¸»æ¥è¿‡æ»¤è¿™å—æ•°æ®æ˜¯å¦æ˜¯å‘ç»™æˆ‘çš„ï¼Œéœ€è¦è®²ç»™CPUå»è¿ç®—ï¼Œä¸Šå±‚é€šè¿‡IPé€»è¾‘æ¯”è¾ƒæ¥ç¡®å®šçš„æ•°æ®æŠ¥çš„å½’å±ï¼Œè¿™ä¼šå¤§å¤§çš„å½±å“ç½‘ç»œä¼ è¾“æ•ˆç‡ï¼Œå½“ç„¶å¦‚æœå¹²æ‰äº†åˆ†å±‚çš„æ¦‚å¿µï¼Œå¯èƒ½åªéœ€è¦ä¸€ä¸ªå”¯ä¸€åœ°å€å°±å¯ä»¥è§£å†³é—®é¢˜ï¼Œä½†æ˜¯è‡³å°‘å¯¹äºç›®å‰çš„äº’è”ç½‘æ¶æ„è¿™æ ·æ˜¯ä¸å¯è¡Œçš„ï¼Œè¿™å°±æ¯”å¦‚æœ‰äº†åŸŸåï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆè¿˜éœ€è¦IPåœ°å€æ˜¯ä¸€æ ·çš„ï¼Œæœ¬è´¨æ˜¯å®ƒä»¬å·¥ä½œåœ¨ä¸åŒçš„ç½‘ç»œåˆ†å±‚ä¸Šã€‚ äºŒ. å¦‚ä½•è·å–ç›®æ ‡çš„MACåœ°å€ç°åœ¨æˆ‘ä»¬çŸ¥é“äº†MACåœ°å€æ˜¯é€šä¿¡è¿‡ç¨‹ä¸­æ‰€å¿…é¡»çš„ï¼Œé‚£ä¹ˆæ˜¯å¦‚ä½•è·å–åˆ°MACåœ°å€å‘¢ã€‚ 1. ç¼“å­˜è¡¨å’ŒIPè·¯ç”±ç±»ä¼¼ï¼Œæˆ‘ä»¬çš„ç½‘ç»œè®¾å¤‡ä¸­è¿˜ä¼šå­˜å‚¨ä¸¤ä¸ªä¸MACåœ°å€ç›¸å…³çš„è¡¨ã€‚ä¸€ä¸ªæ˜¯ARPç¼“å­˜è¡¨ï¼Œä¸€ä¸ªæ˜¯MACåœ°å€è¡¨ã€‚å½“ç½‘ç»œå±‚çš„æ•°æ®å°†è¦è¢«å°è£…æˆæ•°æ®é“¾è·¯å±‚çš„æ•°æ®å¸§æ—¶ï¼Œä¼šé€šè¿‡ARPç¼“å­˜è¡¨æ¥æŸ¥è¯¢IPåœ°å€ä¸MACåœ°å€çš„æ˜ å°„å…³ç³»ï¼Œå½“ç„¶å¦‚æœæ²¡æœ‰ç¼“å­˜çš„è¯ï¼Œä¼šé€šè¿‡ç½‘ç»œå±‚çš„ARPåè®®æ¥è§£æã€‚MACåœ°å€è¡¨åˆ™æ˜¯å­˜å‚¨ç€å„ç«¯å£çš„ä¸»æœºæºMACåœ°å€å’Œç«¯å£å·çš„æ˜ å°„ï¼Œä»¥ä¾¿äº¤æ¢æœºå°†æ•°æ®å‘é€åˆ°æŒ‡å®šçš„ç«¯å£å»ã€‚ 2. ARPåè®®ä¸Šé¢æ‰€è¯´çš„ARPç¼“å­˜è¡¨ï¼Œå…¶ä¸­çš„æ•°æ®å®é™…ä¸Šæ˜¯é€šè¿‡ARPåè®®è§£æåˆ°çš„ã€‚ARPåè®®çš„æ ¸å¿ƒä½œç”¨æ˜¯å°†IPåœ°å€è§£ææˆå¯¹åº”çš„MACåœ°å€ï¼Œå›å¿†ä¸€ä¸‹ï¼Œè¿™æ˜¯å¦å¾ˆåƒæˆ‘ä»¬ä¹‹å‰æ‰€ä»‹ç»çš„DNSåè®®çš„ä½œç”¨ã€‚é¦–å…ˆï¼ŒARPåè®®æ˜¯IPåè®®ç°‡ä¸­çš„æˆå‘˜ä¹‹ä¸€ï¼Œæ ¸å¿ƒçš„å·¥ä½œåŸç†æ˜¯æºä¸»æœºåœ¨éœ€è¦è·å–ç›®çš„IPçš„MACåœ°å€æ—¶ï¼Œå°†ç›®çš„IPç»„è£…æˆARPæ•°æ®æŠ¥å¹¿æ’­åˆ°å±€åŸŸç½‘ä¸Šçš„æ‰€æœ‰ä¸»æœºï¼Œå¹¶æ¥æ”¶è¿”å›çš„æ•°æ®ï¼Œä»è€Œç¡®å®šç›®æ ‡çš„MACåœ°å€ï¼Œæ¥æ”¶åˆ°æ•°æ®åï¼Œä¼šå°†æ•°æ®å­˜å‚¨ARPç¼“å­˜è¡¨ä¸­ï¼Œä¸‹æ¬¡æŸ¥è¯¢æ—¶ç›´æ¥ä½¿ç”¨ç¼“å­˜ï¼ŒèŠ‚çœç½‘ç»œèµ„æºã€‚è¿™ä¸ªè¿‡ç¨‹å°±å¥½æ¯”ï¼š 1.Aæƒ³è¦çŸ¥é“Bçš„MACåœ°å€ï¼Œå…¶é¦–å…ˆä¼šå‘å‘¨å›´æ‰€æœ‰ç½‘ç»œè®¾å¤‡å¹¿æ’­å¦‚ä¸‹å†…å®¹ï¼š IPæ˜¯Açš„è®¾å¤‡è¦æƒ³çŸ¥é“IPæ˜¯Bçš„è®¾å¤‡çš„MACåœ°å€ï¼Œä½ ä»¬è°çŸ¥é“ï¼Œè¯·å‘ç»™æˆ‘ï¼Ÿ 2.Mï¼ŒNï¼ŒPï¼ŒQå¯èƒ½éƒ½æ”¶åˆ°äº†æ­¤è¯¢é—®è¯·æ±‚ï¼ŒMå‘ç°è‡ªå·±çŸ¥é“Bè®¾å¤‡çš„MACåœ°å€ï¼Œå› æ­¤ä¼šå›ç»™Aï¼š IPæ˜¯Açš„è®¾å¤‡ï¼Œæˆ‘è¦å°†IPæ˜¯Bçš„è®¾å¤‡çš„MACåœ°å€å‘ç»™ä½ ï¼Œè¯·æ¥æ”¶ã€‚ 3.Aè®¾å¤‡æ”¶åˆ°Mè®¾å¤‡çš„è¿”å›åï¼Œæ‹¿åˆ°è‡ªå·±æƒ³è¦çš„MACåœ°å€ï¼Œä¹‹åç»„è£…é“¾è·¯å±‚æ•°æ®å¸§è¿›è¡Œå‘é€ã€‚ é€šè¿‡ä¸Šé¢çš„è¿‡ç¨‹ä½ ä¹Ÿå¯ä»¥å‘ç°ï¼Œå…¶å®ARPæœ¬èº«å¹¶ä¸æ˜¯ä¸€ä¸ªå®‰å…¨çš„åè®®ï¼Œä»»ä½•è®¾å¤‡åœ¨æ¥æ”¶åˆ°å¹¿æ’­åéƒ½å¯ä»¥ç¼–é€ ä¸€ä¸ªMACåœ°å€è¿›è¡Œè¿”å›ï¼Œä»è€Œäº§ç”ŸARPæ¬ºè¯ˆé£é™©ï¼Œä½†è¿™ä¹Ÿå¹¶éå®Œå…¨æ— æ³•é˜²èŒƒï¼Œæ¯”å¦‚ä½¿ç”¨æŒ‡å®šçš„å®‰å…¨çš„ARPæœåŠ¡å™¨ï¼Œå»ºç«‹é™æ€çš„IP-MACæ˜ å°„è¡¨ç­‰ï¼Œæˆ‘ä»¬è¿™é‡Œä¸å†è®¨è®ºã€‚ 3. åˆ†æä¸‹ARPåè®®åœ¨è®¿é—®ç½‘é¡µæ—¶ï¼Œä½ çš„è®¾å¤‡å¯èƒ½éšæ—¶ä¼šå‘èµ·ARPè¯·æ±‚å’Œæ¥æ”¶ARPå“åº”ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆæŠ“ä¸€ä¸ªARPåè®®çš„è¯·æ±‚å’Œè¿”å›æ•°æ®æ¥ç®€å•çœ‹ä¸‹ARPåè®®çš„ç»“æ„ï¼Œå¦‚ä¸‹å›¾ï¼š å¦‚å›¾ä¸­æ‰€ç¤ºï¼ŒæŠ“åˆ°äº†ä¸¤æ¡ARPåè®®æ•°æ®ï¼Œå…¶ä¸­ç¬¬ä¸€æ¡ä¸ºARPè¯·æ±‚æŠ¥æ–‡ï¼Œç¬¬äºŒæ¡ä¸ºARPå“åº”æŠ¥æ–‡ã€‚å¯ä»¥çœ‹åˆ°è¯·æ±‚æŠ¥æ–‡çš„ç›®æ ‡åœ°å€æ˜¯å¹¿æ’­åœ°å€ï¼ŒæŠ¥æ–‡å†…åŒ…å«ç¡¬ä»¶ç±»å‹ï¼Œåè®®ç±»å‹ï¼ŒARPç±»å‹ï¼ŒæºMACåœ°å€ï¼ŒæºIPåœ°å€å’Œç›®çš„IPåœ°å€ã€‚å¦‚æœæ˜¯å“åº”æŠ¥æ–‡ï¼Œåˆ™å…¶ä¸­è¿˜ä¼šåŒ…å«ç›®çš„MACåœ°å€ã€‚ç›¸æ¯”è¾ƒæˆ‘ä»¬å‰é¢ä»‹ç»çš„åº”ç”¨å±‚çš„åè®®ï¼ŒARPåè®®éå¸¸ç®€å•ï¼ˆè¶Šåº•å±‚é€šå¸¸è¶Šç®€å•ä¸ä¸“æ³¨ï¼‰ï¼Œåè®®æ ¼å¼å¦‚ä¸‹ï¼š å…¶ä¸­ï¼ŒARPé¦–éƒ¨å äº†8ä¸ªå­—èŠ‚ï¼š å‰2ä¸ªå­—èŠ‚æŒ‡å®šäº†ç¡¬ä»¶çš„ç±»å‹ï¼Œå³é“¾è·¯å±‚çš„åè®®ï¼Œä¸€èˆ¬ä¸º1ï¼Œè¡¨ç¤ºä»¥å¤ªç½‘ã€‚ ç¬¬3å’Œç¬¬4ä¸ªå­—èŠ‚æŒ‡å®šäº†æ‰€ä½¿ç”¨çš„åè®®ç±»å‹ï¼Œå…¶ä¸­0x0800è¡¨ç¤ºIPv4åè®®ã€‚ ç¬¬5ä¸ªå­—èŠ‚è¡¨ç¤ºé“¾è·¯å±‚åè®®çš„åœ°å€é•¿åº¦ï¼Œæ¯”å¦‚MACåœ°å€é•¿åº¦ä¸º6ä¸ªå­—èŠ‚ï¼Œè¿™é‡Œçš„å€¼æ˜¯6ã€‚ ç¬¬6ä¸ªå­—èŠ‚è¡¨ç¤ºæ‰€ä½¿ç”¨çš„åè®®åœ°å€é•¿åº¦ï¼Œæ¯”å¦‚IPv4çš„é•¿åº¦ä¸º4ä¸ªå­—èŠ‚ï¼Œï¼Œåˆ™è¿™é‡Œçš„å€¼æ˜¯4ã€‚ ç¬¬7å’Œç¬¬8ä¸ªå­—èŠ‚æ˜¯Opcodeç ï¼Œæ˜¯ä¸€ä¸ªARPæ“çºµç ï¼Œ1è¡¨ç¤ºARPè¯·æ±‚ï¼Œ2è¡¨ç¤ºARPå“åº”ã€‚ ARPåè®®çš„é¦–éƒ¨æ˜¯å›ºå®šçš„ï¼Œæ•°æ®éƒ¨åˆ†æ˜¯å¯è¾¹é•¿çš„ï¼Œä¾æ¬¡æ’å¸ƒç€æºé“¾è·¯å±‚åœ°å€ï¼Œæºé€»è¾‘å±‚åœ°å€ï¼Œç›®æ ‡é“¾è·¯å±‚åœ°å€å’Œç›®æ ‡é€»è¾‘å±‚åœ°å€ã€‚ ARPåè®®æœ¬èº«ç®€å•ï¼Œè¿™é‡Œå°±ä¸å†è¿‡å¤šé˜è¿°ï¼Œè¿˜æœ‰ä¸€ä¸ªä¸ä¹‹å¯¹åº”çš„RARPåè®®ï¼Œæ­¤åè®®æ˜¯å°†MACåœ°å€è§£æä¸ºIPåœ°å€ï¼Œä½œç”¨ä¸ARPåˆšå¥½ç›¸åï¼Œæœ‰å…´è¶£çš„è¯ï¼Œä½ ä¹Ÿå¯ä»¥ç ”ç©¶ä¸‹ã€‚ ä¸‰. ä»¥å¤ªç½‘é“¾è·¯å±‚Ethernet â…¡å¸§æœ€åï¼Œæˆ‘ä»¬å†ç®€å•äº†è§£ä¸‹Ethernet â…¡å¸§çš„ç›¸å…³å†…å®¹ï¼Œå…¶å®æ‹¿åˆ°MACåœ°å€åï¼Œç½‘ç»œä¼ è¾“æ•´ä½“æ¶æ„ä¸­æœ‰å…³é€»è¾‘çš„éƒ¨åˆ†å°±å®Œå…¨ç»“æŸåï¼Œåé¢å°±æ˜¯å‘æ•°æ®åŒ…å‰æ‹¼è£…ä¸Šé“¾è·¯å±‚åè®®çš„ç›¸å…³æ•°æ®ï¼Œç»„è£…æˆEthernet â…¡å¸§è¿›è¡Œå‘é€ã€‚ä»æŠ“åŒ…å·¥å…·å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸€å±‚åªæ˜¯å‘å¤´éƒ¨æ‹¼æ¥äº†ç›®æ ‡MACåœ°å€ï¼ŒæºMACåœ°å€å’Œæ‰€ä½¿ç”¨çš„ç½‘ç»œå±‚åè®®ã€‚æœ‰æ—¶å€™ï¼Œåœ¨æ•°æ®çš„æœ€åä¹Ÿä¼šåŠ ä¸Šæ•°æ®å¸§æ ¡éªŒåºåˆ—ï¼Œå¦‚ä¸‹å›¾ï¼š åœ¨åº•å±‚çš„åŸç†ï¼Œæˆ‘ä»¬è¿™é‡Œå°±ä¸å†æ·±ç©¶äº†ã€‚æœ¬ç³»åˆ—åšå®¢ä¹Ÿå°†æš‚æ—¶å‘Šä¸€æ®µè½ï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQï¼š316045346 åŒæ—¶ï¼Œå¦‚æœæœ¬ç¯‡æ–‡ç« è®©ä½ è§‰å¾—æœ‰ç”¨ï¼Œæ¬¢è¿åˆ†äº«ç»™æ›´å¤šæœ‹å‹ï¼Œè¯·æ ‡æ˜å‡ºå¤„ã€‚","categories":[{"name":"ç½‘ç»œæŠ€æœ¯","slug":"ç½‘ç»œæŠ€æœ¯","permalink":"http://huishao.cc/categories/ç½‘ç»œæŠ€æœ¯/"}],"tags":[],"keywords":[{"name":"ç½‘ç»œæŠ€æœ¯","slug":"ç½‘ç»œæŠ€æœ¯","permalink":"http://huishao.cc/categories/ç½‘ç»œæŠ€æœ¯/"}]},{"title":"è‡ªä¸Šè€Œä¸‹çš„ç†è§£ç½‘ç»œï¼ˆ5ï¼‰â€”â€”IPç¯‡","slug":"443è‡ªä¸Šè€Œä¸‹çš„ç†è§£ç½‘ç»œï¼ˆ5ï¼‰â€”â€”IPç¯‡","date":"2022-02-26T16:00:00.000Z","updated":"2022-02-27T05:14:07.788Z","comments":true,"path":"2022/02/27/443è‡ªä¸Šè€Œä¸‹çš„ç†è§£ç½‘ç»œï¼ˆ5ï¼‰â€”â€”IPç¯‡/","link":"","permalink":"http://huishao.cc/2022/02/27/443è‡ªä¸Šè€Œä¸‹çš„ç†è§£ç½‘ç»œï¼ˆ5ï¼‰â€”â€”IPç¯‡/","excerpt":"","text":"è‡ªä¸Šè€Œä¸‹çš„ç†è§£ç½‘ç»œï¼ˆ5ï¼‰â€”â€”IPç¯‡æœ¬ç³»åˆ—åšå®¢åˆ°æ­¤ï¼Œåœ¨ç†è§£ç½‘ç»œè¿™ä¸€ä¸“é¢˜ä¸­ï¼Œæˆ‘ä»¬å·²ç»èµ°è¿‡äº†ä¸çŸ­çš„è·¯ç¨‹ã€‚ä½ æˆ–è®¸å·²ç»å‘ç°äº†ï¼Œç”±äºç½‘ç»œåˆ†å±‚æ¨¡å‹çš„å­˜åœ¨ï¼Œæ¯ä¸€å±‚éƒ½æœ‰æ˜ç¡®çš„ä»»åŠ¡å’Œç›®çš„ï¼Œä½¿å¾—æ¯ä¸€å±‚çš„å·¥ä½œéƒ½ä¸å¤ªå¤æ‚ï¼Œä¸Šå±‚ä¹Ÿä¸éœ€å…³å¿ƒä¸‹å±‚çš„å®ç°æ–¹å¼ï¼Œæ•´ä¸ªç½‘ç»œç»“æ„æœ‰äº†æ›´å¼ºçš„çµæ´»æ€§ä¸æ‰©å±•æ€§ã€‚åœ¨ä¸Šä¸€ç¯‡ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†TCPåè®®ï¼Œè¿™ç§å¯é çš„ä¼ è¾“åè®®ä¿è¯äº†å°†åº”ç”¨å±‚çš„æ•°æ®å‡†ç¡®æ— è¯¯çš„ä¼ è¾“åˆ°ç›®çš„ç«¯ã€‚ä»ç½‘ç»œæ¨¡å‹ä¸Šçœ‹ï¼ŒTCPå±æ€§ä¼ è¾“å±‚çš„åè®®ï¼Œä¼ è¾“å±‚çš„TCPåè®®æ•°æ®æœ€ç»ˆä¼šè¢«ç»„æˆæˆIPæ•°æ®æŠ¥ï¼Œå¼€å§‹è¿›å…¥çœŸæ­£çš„æ•°æ®å‘é€ã€‚æœ¬ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬å°†è¿›å…¥ç½‘ç»œä¸–ç•Œæœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼šç½‘ç»œå±‚ã€‚å¯¹IPåè®®è¿›è¡Œä»‹ç»ã€‚ ä¸€.è°ˆè°ˆIPåè®®IPæ˜¯ä¸€ç§å®šä¹‰äº†ç½‘ç»œä¹‹é—´å¦‚ä½•äº’è”çš„åè®®ï¼Œæ˜¯TCP/IPåè®®ç°‡ä¸­çš„æ ¸å¿ƒåè®®ã€‚å’Œä¼ è¾“å±‚çš„TCPåè®®ç›¸æ¯”ï¼ŒIPåè®®çš„æœ€å¤§ç‰¹ç‚¹æ˜¯ä¸å¯é ä¸”æ— è¿æ¥ã€‚æ‰€è°“ä¸å¯é ï¼Œæ˜¯æŒ‡IPåè®®å¹¶ä¸èƒ½ä¿è¯IPæ•°æ®æŠ¥å¯ä»¥æˆåŠŸçš„åˆ°è¾¾ç›®çš„ç«¯ï¼Œæ•°æ®ä¼ è¾“ä¸­é—´å‘ç”Ÿä»»ä½•é”™è¯¯ï¼Œæ­¤æ•°æ®æŠ¥éƒ½ä¼šè¢«ä¸¢å¼ƒæ‰ã€‚æ— è¿æ¥æ˜¯æŒ‡IPå¹¶ä¸ä¼šç»´æŠ¤ä»»ä½•ä¸æ•°æ®æŠ¥ç›¸å…³çš„è¿æ¥ä¿¡æ¯ï¼Œæ¯æ¬¡æ•°æ®ä¼ è¾“éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œæ¯ä¸ªæ•°æ®æŠ¥çš„è·¯ç”±é€‰æ‹©ä¹Ÿéƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œå› æ­¤IPæ•°æ®æŠ¥çš„åˆ°è¾¾é¡ºåºä¹Ÿæ˜¯æ— åºçš„ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬å¯ä»¥å…ˆéšä¾¿çœ‹ä¸€ä¸ªç½‘ç»œé€šä¿¡è¿‡ç¨‹ä¸­IPå±‚çš„æ•°æ®æŠ¥æ ·å­ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ç½‘ç»œæ¨¡å‹å„å±‚ä¸­ï¼Œä¸‹å±‚åè®®å°†ä¸Šå±‚æ•°æ®æ‹¿åˆ°ï¼Œå¹¶ä¸”æ‹¼æ¥ä¸Šæœ¬å±‚åè®®å¤´éƒ¨ä¿¡æ¯ä½œä¸ºå®Œæ•´æ•°æ®æŠ¥ä¼ é€’å†ä¼ é€’ç»™æ›´ä¸‹å±‚å¤„ç†ã€‚ä¸Šå›¾ç¤ºä¾‹çš„å³æ˜¯IPå±‚æ•°æ®å¤´çš„éƒ¨åˆ†å­—æ®µã€‚å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å¹³æ—¶ä½¿ç”¨HTTP/HTTPSç­‰åº”ç”¨å±‚åè®®æ¥è¿›è¡Œé€šä¿¡æ—¶ï¼Œæ˜¯æ ¹æ®åŸŸåä¸­çš„è·¯å¾„æ¥å¤„ç†ä¸šåŠ¡é€»è¾‘çš„ï¼Œè€Œä¹‹ä¸‹çš„TCPåè®®åˆæ˜¯æ ¹æ®ç«¯å£å·æ¥åŒºåˆ†åº”ç”¨çš„ï¼Œåˆ°äº†IPåè®®è¿™ä¸€å±‚ï¼Œå·²ç»æ²¡æœ‰ä»»ä½•åŸŸåå’Œç«¯å£å·çš„æ¦‚å¿µï¼Œå…¶æä¾›çš„å°±æ˜¯ç«¯åˆ°ç«¯çš„ç½‘ç»œé€šä¿¡åŠŸèƒ½ã€‚ 1.IPæ•°æ®æŠ¥çš„å¤´éƒ¨ç»„æˆIPåè®®çš„ç»“æ„å®šä¹‰å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¯ä»¥çœ‹åˆ°ï¼Œå¯¹äºIPæ•°æ®æŠ¥æ¥è¯´ï¼Œå¦‚æœå…¶é¦–éƒ¨æ²¡æœ‰ç‰¹æ®Šçš„é…ç½®é€‰é¡¹ï¼Œåˆ™å…¶å›ºå®šä¸º20ä¸ªå­—èŠ‚é•¿åº¦ã€‚ ç¬¬0åˆ°3ä½ï¼šæ ‡è®°äº†æ‰€ä½¿ç”¨çš„IPåè®®çš„ç‰ˆæœ¬ï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯ipv4ç‰ˆæœ¬åˆ™æ­¤å€¼ä¸º4ï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯ipv6ç‰ˆæœ¬ï¼Œåˆ™æ­¤å€¼æ˜¯6ã€‚ ç¬¬4åˆ°7ä½ï¼šè®°å½•äº†IPæ•°æ®æŠ¥å¤´éƒ¨çš„é•¿åº¦ä¸ºå¤šå°‘ä¸ª32ä½çš„æ•°æ®ã€‚ ç¬¬8åˆ°15ä½ï¼šæ ‡è®°äº†æœåŠ¡çš„ç±»å‹ï¼Œä¼šè¡¨æ˜æœ€å°æ—¶å»¶å’Œæœ€å¤§ååé‡ä¿¡æ¯ã€‚ ç¬¬16åˆ°31ä½ï¼šè¿™16ä½æ•°æ®è®°å½•äº†æ ‡è®°äº†æ•´ä¸ªIPæ•°æ®æŠ¥çš„æ€»é•¿åº¦ï¼ˆå­—èŠ‚ï¼‰ï¼ŒåŒ…æ‹¬å¤´ä¿¡æ¯å’Œæ•°æ®ä¿¡æ¯ï¼Œç”±äºå…¶åªæœ‰16ä½ï¼Œå› æ­¤å…¶æœ€å¤§å€¼ä¸º65535ï¼Œä¸€ä¸ªIPæ•°æ®æŠ¥æœ€å¤§çš„é•¿åº¦ä¸º65535å­—èŠ‚ã€‚ ç¬¬32åˆ°47ä½ï¼šæ­¤16ä½æ•°æ®æ˜¯ä¸€ä¸ªä½œç”¨ç±»ä¼¼ä¸idçš„æ ‡è¯†å­—æ®µï¼Œå½“å‘ç”Ÿäº†æ•°æ®æŠ¥åˆ†æ®µæ—¶ï¼Œæ­¤å­—æ®µçš„å€¼è¢«å¤åˆ¶åˆ°æ‰€æœ‰çš„åˆ†æ®µä¹‹ä¸­ï¼Œå¸®åŠ©æ¥æ”¶ç«¯é›†ä¸­å¤„ç†ã€‚ ç¬¬48åˆ°50ä½ï¼šè¿™3ä½æ˜¯3ä¸ªæ ‡è®°ä½ï¼Œå…¶ä¸­ç¬¬1ä½æ˜¯ä¿ç•™ä½ï¼Œç›®å‰æ²¡æœ‰ä½¿ç”¨ã€‚ç¬¬2ä½è¡¨ç¤ºæ•°æ®æŠ¥æ˜¯å¦å¯ä»¥è¿›è¡Œåˆ†æ®µï¼Œå¦‚æœè®¾ç½®ä¸º1è¡¨ç¤ºæœºå™¨ä¸èƒ½å°†æ­¤æ•°æ®æŠ¥è¿›è¡Œåˆ†æ®µã€‚æœ€å1ä½è¡¨ç¤ºå½“å‰æ•°æ®æŠ¥æ˜¯å¦æ˜¯æœ€åä¸€ä¸ªåˆ†æ®µï¼Œå¦‚æœå­˜åœ¨ä¸‹ä¸€ä¸ªåˆ†æ®µï¼Œåˆ™æ­¤ä½è®¾ç½®ä¸º1ï¼Œå¦åˆ™è®¾ç½®ä¸º0ã€‚ ç¬¬51åˆ°63ä½ï¼šè¿™13ä½æŒ‡å‡ºäº†åˆ†æ®µæ•°æ®åœ¨æºæ•°æ®æŠ¥ä¸­çš„ç›¸å¯¹ä½ç½®ï¼Œå¦‚æœæ²¡æœ‰åˆ†æ®µï¼Œåˆ™æ­¤å€¼ä¸º0ã€‚ ç¬¬64åˆ°71ä½ï¼šç”Ÿå­˜æ—¶é—´å­—æ®µï¼Œè¿™ä¸ªå­—æ®µæ˜¯ä¸€ä¸ªç®€å•çš„è®¡æ•°å™¨ï¼Œè¡¨æ˜äº†æ•°æ®æŠ¥å¯ä»¥ç»è¿‡çš„æœ€å¤šè·¯æœ‰æ•°ï¼Œæ•°æ®æŠ¥ä¸€æ—¦ç»è¿‡ä¸€ä¸ªè·¯ç”±å™¨çš„å¤„ç†ï¼Œæ­¤å€¼å°±ä¼šå‡å°‘1ï¼Œå½“å€¼ä¸º0æ—¶ï¼Œæ­¤æ•°æ®æŠ¥ä¼šè¢«ä¸¢å¼ƒã€‚ ç¬¬72åˆ°79ä½ï¼šæ­¤å­—æ®µæŒ‡å‡ºäº†IPå¤„ç†å®Œæ•°æ®åï¼Œä½¿ç”¨ä»€ä¹ˆåè®®æ¥è§£ææ•°æ®ï¼Œå…¶å–å€¼èŒƒå›´ä¸º0åˆ°255ä¹‹é—´ï¼Œå…¶ä¸­å¸¸è§çš„å¦‚1ä¸ºICMPç©ºå€¼åè®®ï¼Œ6ä¸ºTCPåè®®ï¼Œ17ä¸ºUDPåè®®ç­‰ã€‚ ç¬¬80åˆ°95ä½ï¼šè¿™ä¸ªå­—æ®µä¸ºæŠ•ä¸æ ¡éªŒå’Œå­—æ®µï¼Œå æœ‰16ä½ï¼Œç”¨æ¥éªŒè¯IPæ•°æ®æŠ¥å¤´éƒ¨çš„å®Œæ•´æ€§ã€‚ ç¬¬96åˆ°127ä½ï¼šè¿™32ä½æ•°æ®è®°å½•äº†æºä¸»æœºçš„IPåœ°å€ã€‚ ç¬¬128ä½åˆ°159ä½ï¼šè¿™32ä½æ•°æ®è®°å½•äº†ç›®æ ‡ä¸»æœºIPåœ°å€ã€‚ éœ€è¦æ³¨æ„ï¼Œä¸Šé¢çš„åˆ†ææ˜¯ä»¥ipv4ç‰ˆæœ¬ä¸ºä¾‹çš„ï¼Œå¯¹äºipv6åè®®ï¼Œå¤´ä¿¡æ¯çš„å­—æ®µæ„ä¹‰ä¼šæœ‰ä¸€äº›å˜åŠ¨ï¼Œä¾‹å¦‚å…¶æºåœ°å€å’Œç›®çš„åœ°å€éƒ½æ‰©å±•ä¸ºäº†128ä½ã€‚ 2.IPè·¯ç”±é€‰æ‹©çš„ç­–ç•¥äº†è§£äº†IPæ•°æ®æŠ¥ç»„æˆçš„åŸºæœ¬æƒ…å†µï¼Œä¸‹é¢æˆ‘ä»¬è¯¥æ¥æ€è€ƒä¸‹å…·ä½“ç½‘ç»œé€šä¿¡çš„å®ç°æ–¹å¼äº†ã€‚è¿™å°±ä¼šæ¶‰åŠåˆ°IPè·¯ç”±é€‰æ‹©çš„ç›¸å…³å†…å®¹ã€‚å…¶å®ï¼ŒIPè·¯ç”±é€‰æ‹©å¹¶æ²¡æƒ³è±¡çš„é‚£ä¹ˆå¤æ‚ï¼Œè™½ç„¶ä¸–ç•Œä¸Šç½‘ç»œæœ¬èº«é”™ç»¼å¤æ‚ã€‚æˆ‘ä»¬å¯ä»¥è¿™æ ·æ¥æ€è€ƒï¼šä»»ä½•ä¸€å°è®¾å¤‡è¦æ¥å…¥ç½‘ç»œï¼Œéƒ½è¦ç”±é“¾è·¯å±‚çœŸæ­£çš„è¿æ¥è¿›ç½‘ç»œä¸­ï¼Œä»¥ä¸ªäººPCä¸ºä¾‹ï¼Œä¸€å®šè¦ä½¿ç”¨æœ‰çº¿æˆ–æ— çº¿çš„æ–¹å¼æ¥å…¥åˆ°äº’è”ç½‘ä¸­ï¼Œæˆ‘ä»¬æ‰èƒ½ä¸è¿™å°PCé€šä¿¡ã€‚å› æ­¤ï¼Œå¦‚æœç›®çš„ä¸»æœºä¸æºä¸»æœºæ˜¯ç›´æ¥ç›¸è¿çš„ï¼Œåˆ™IPæ•°æ®æŠ¥ä¼šä»æºä¸»æœºç›´æ¥å‘é€åˆ°ç›®çš„ä¸»æœºä¸Šï¼Œè¿™æ²¡æœ‰ä»»ä½•éš¾ä»¥ç†è§£çš„åœ°æ–¹ã€‚ç•¥å¾®å¤æ‚ä¸€äº›çš„åœ°æ–¹åœ¨äºï¼Œå¦‚æœæºä¸»æœºä¸ç›®çš„ä¸»æœºä¸æ˜¯ç›´æ¥ç›¸è¿çš„ï¼Œåˆ™æ­¤IPæ•°æ®æŠ¥éœ€è¦åšé€‰è·¯é€»è¾‘ï¼Œç®€è¿°å…¶è¿‡ç¨‹å¦‚ä¸‹ï¼š 1. æºä¸»æœºæœç´¢æœ¬åœ°è·¯ç”±è¡¨ï¼Œå¯»æ‰¾ç›®çš„IPæ‰€åœ¨çš„ç½‘ç»œï¼Œå¦‚æœæ‰¾åˆ°å°±å‘é€ç»™æ­¤ç½‘ç»œï¼Œæ²¡æœ‰æ‰¾åˆ°ä¼šå‘é€ç»™è·¯ç”±è¡¨é…ç½®çš„defaultåœ°å€ã€‚ 2. æ¥æ”¶åˆ°IPæ•°æ®æŠ¥çš„è®¾å¤‡å¯èƒ½æ˜¯ä¸€å°ä¸»æœºï¼Œä¹Ÿå¯èƒ½æ˜¯è·¯ç”±å™¨è®¾å¤‡ï¼ˆå…¶å®ä¸»æœºä¹Ÿå¯ä»¥é…ç½®è·¯ç”±å™¨åŠŸèƒ½ï¼‰ï¼Œå…¶é¦–å…ˆä¼šåˆ¤æ–­IPæ•°æ®æŠ¥ä¸­çš„ç›®çš„åœ°å€æ˜¯å¦æ˜¯æœ¬æœºIPæˆ–è€…æ˜¯å¹¿æ’­åœ°å€ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è§£ææ•°æ®æŠ¥è¿›è¡Œå¤„ç†ï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™è¡¨æ˜æ­¤æ•°æ®æŠ¥éœ€è¦è¢«è½¬å‘ã€‚å¦‚æœå½“å‰è®¾å¤‡æ˜¯æ™®é€šçš„ä¸»æœºï¼Œæ²¡æœ‰è·¯ç”±åŠŸèƒ½ï¼Œåˆ™æ­¤æ•°æ®æŠ¥ä¼šç›´æ¥è¢«ä¸¢å¼ƒã€‚å¦‚æœå½“å‰æ¥æ”¶çš„è®¾å¤‡æ˜¯è·¯ç”±å™¨ï¼Œåˆ™ä¼šæœç´¢è‡ªå·±çš„è·¯ç”±è¡¨ï¼Œæ‰§è¡Œä¸è¿‡ç¨‹1ç±»ä¼¼çš„è¡ŒåŠ¨ï¼Œå°†æ•°æ®æŠ¥è½¬å‘å‡ºå»ã€‚å½“å‰ï¼Œè½¬å‘å‰å…¶ä¹Ÿä¼šæ£€æŸ¥æ•°æ®æŠ¥çš„ç”Ÿå­˜æ—¶é—´æ˜¯å¦æ­£å¸¸ã€‚ 3. ä¸‹ä¸€è·³çš„æ¥æ”¶è®¾å¤‡æŒ‰ç…§æ­¥éª¤2è¿›è¡Œé‡å¤ï¼Œç›´åˆ°æ•°æ®åˆ°è¾¾ç›®çš„ä¸»æœºï¼Œæˆ–è½¬å‘æ¬¡æ•°è¶…å‡ºæ•°æ®æŠ¥ç”Ÿå­˜æ—¶é—´ã€‚ ä¸Šé¢æœ‰æåˆ°è·¯ç”±è¡¨ï¼Œè·¯ç”±è¡¨æ˜¯IPå±‚ç»´æŠ¤çš„ä¸€ä»½è·¯ç”±ä¿¡æ¯ï¼Œè·¯ç”±è¡¨ä¸­çš„æ¯ä¸€é¡¹è®°å½•éƒ½åŒ…å«4ä¸ªå­—æ®µï¼Œåˆ†åˆ«ä¸ºï¼š ç›®çš„IPåœ°å€ï¼šæ­¤é¡¹å³å¯ä»¥æ˜¯ä¸€ä¸ªå®Œæ•´çš„ä¸»æœºåœ°å€ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªç½‘ç»œåœ°å€ã€‚ ä¸‹ä¸€è·³IPåœ°å€ï¼šæ•°æ®è¦è¢«è½¬å‘åˆ°çš„åœ°å€ã€‚ æ ‡å¿—å­—æ®µï¼šæŒ‡å®šæ­¤æ¡è®°å½•ä¸­çš„ç›®çš„IPåœ°å€æ˜¯ç½‘ç»œåœ°å€è¿˜æ˜¯ä¸»æœºåœ°å€ã€‚ä¹Ÿç”¨æ¥æŒ‡æ˜ä¸‹ä¸€è·³IPåœ°å€æ˜¯ä¸€ä¸ªè·¯ç”±å™¨è¿˜æ˜¯ä¸€ä¸ªç›´æ¥ç›¸è¿çš„æ¥å£ã€‚ ä¼ è¾“æŒ‡å®šçš„ç½‘ç»œæ¥å£ï¼šä¼ è¾“æ•°æ®æŠ¥æŒ‡å®šçš„ç½‘ç»œæ¥å£ã€‚ å¦‚æœä½ ä½¿ç”¨çš„Macç”µè„‘ï¼Œåˆ™å¯ä»¥åœ¨ç»ˆç«¯è¾“å…¥å¦‚ä¸‹å‘½ä»¤æ¥æ‰“å°æœ¬æœºè·¯ç”±è¡¨ï¼š 1netstat -nr è¾“å‡ºä¿¡æ¯ç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990Routing tablesInternet:Destination Gateway Flags Netif Expiredefault 192.168.1.1 UGScg en0 10.8/24 10.8.0.2 UGSc utun0 10.8.0.2 10.8.0.1 UH utun0 127 127.0.0.1 UCS lo0 127.0.0.1 127.0.0.1 UH lo0 169.254 link#6 UCS en0 !192.168.1 link#6 UCS en0 !192.168.1.1/32 link#6 UCS en0 !192.168.1.1 8c:73:a0:ef:e8:11 UHLWIir en0 1174192.168.1.3/32 link#6 UCS en0 !192.168.1.3 88:66:5a:b:69:2b UHLWI lo0 224.0.0/4 link#6 UmCS en0 !224.0.0.251 1:0:5e:0:0:fb UHmLWI en0 239.255.255.250 1:0:5e:7f:ff:fa UHmLWI en0 255.255.255.255/32 link#6 UCS en0 !Internet6:Destination Gateway Flags Netif Expiredefault fe80::1%en0 UGcg en0 default fe80::%utun1 UGcIg utun1 default fe80::%utun2 UGcIg utun2 default fe80::%utun3 UGcIg utun3 default fe80::%utun4 UGcIg utun4 default fe80::%utun5 UGcIg utun5 default fe80::%utun6 UGcIg utun6 ::1 ::1 UHL lo0 2409:8a1e:2147:e770::/64 link#6 UC en0 2409:8a1e:2147:e770:1e:db2d:96a4:cf35 88:66:5a:b:69:2b UHL lo0 2409:8a1e:2147:e770:a823:bf83:873f:1241 88:66:5a:b:69:2b UHL lo0 fe80::%lo0/64 fe80::1%lo0 UcI lo0 fe80::1%lo0 link#1 UHLI lo0 fe80::%en5/64 link#4 UCI en5 fe80::aede:48ff:fe00:1122%en5 ac:de:48:0:11:22 UHLI lo0 fe80::aede:48ff:fe33:4455%en5 ac:de:48:33:44:55 UHLWIi en5 fe80::%en0/64 link#6 UCI en0 fe80::1%en0 8c:73:a0:ef:e8:11 UHLWIir en0 fe80::1cb4:b83d:af72:eebe%en0 88:66:5a:b:69:2b UHLI lo0 fe80::%awdl0/64 link#7 UCI awdl0 fe80::7c27:deff:fe56:fc75%awdl0 7e:27:de:56:fc:75 UHLI lo0 fe80::%llw0/64 link#9 UCI llw0 fe80::7c27:deff:fe56:fc75%llw0 7e:27:de:56:fc:75 UHLI lo0 fe80::%utun1/64 fe80::1f51:69aa:bba3:107%utun1 UcI utun1 fe80::1f51:69aa:bba3:107%utun1 link#15 UHLI lo0 fe80::%utun2/64 fe80::d0d1:ddd2:5699:a7eb%utun2 UcI utun2 fe80::d0d1:ddd2:5699:a7eb%utun2 link#16 UHLI lo0 fe80::%utun3/64 fe80::24c9:ab2d:b06c:ee2b%utun3 UcI utun3 fe80::24c9:ab2d:b06c:ee2b%utun3 link#17 UHLI lo0 fe80::%utun4/64 fe80::aa3:5b6:85:9502%utun4 UcI utun4 fe80::aa3:5b6:85:9502%utun4 link#18 UHLI lo0 fe80::%utun5/64 fe80::383a:6846:f4a5:7d30%utun5 UcI utun5 fe80::383a:6846:f4a5:7d30%utun5 link#20 UHLI lo0 fe80::%utun6/64 fe80::7017:7a51:2293:202%utun6 UcI utun6 fe80::7017:7a51:2293:202%utun6 link#21 UHLI lo0 ff00::/8 ::1 UmCI lo0 ff00::/8 link#4 UmCI en5 ff00::/8 link#6 UmCI en0 ff00::/8 link#7 UmCI awdl0 ff00::/8 link#9 UmCI llw0 ff00::/8 fe80::1f51:69aa:bba3:107%utun1 UmCI utun1 ff00::/8 fe80::d0d1:ddd2:5699:a7eb%utun2 UmCI utun2 ff00::/8 fe80::24c9:ab2d:b06c:ee2b%utun3 UmCI utun3 ff00::/8 fe80::aa3:5b6:85:9502%utun4 UmCI utun4 ff00::/8 fe80::383a:6846:f4a5:7d30%utun5 UmCI utun5 ff00::/8 fe80::7017:7a51:2293:202%utun6 UmCI utun6 ff01::%lo0/32 ::1 UmCI lo0 ff01::%en5/32 link#4 UmCI en5 ff01::%en0/32 link#6 UmCI en0 ff01::%awdl0/32 link#7 UmCI awdl0 ff01::%llw0/32 link#9 UmCI llw0 ff01::%utun1/32 fe80::1f51:69aa:bba3:107%utun1 UmCI utun1 ff01::%utun2/32 fe80::d0d1:ddd2:5699:a7eb%utun2 UmCI utun2 ff01::%utun3/32 fe80::24c9:ab2d:b06c:ee2b%utun3 UmCI utun3 ff01::%utun4/32 fe80::aa3:5b6:85:9502%utun4 UmCI utun4 ff01::%utun5/32 fe80::383a:6846:f4a5:7d30%utun5 UmCI utun5 ff01::%utun6/32 fe80::7017:7a51:2293:202%utun6 UmCI utun6 ff02::%lo0/32 ::1 UmCI lo0 ff02::%en5/32 link#4 UmCI en5 ff02::%en0/32 link#6 UmCI en0 ff02::%awdl0/32 link#7 UmCI awdl0 ff02::%llw0/32 link#9 UmCI llw0 ff02::%utun1/32 fe80::1f51:69aa:bba3:107%utun1 UmCI utun1 ff02::%utun2/32 fe80::d0d1:ddd2:5699:a7eb%utun2 UmCI utun2 ff02::%utun3/32 fe80::24c9:ab2d:b06c:ee2b%utun3 UmCI utun3 ff02::%utun4/32 fe80::aa3:5b6:85:9502%utun4 UmCI utun4 ff02::%utun5/32 fe80::383a:6846:f4a5:7d30%utun5 UmCI utun5 ff02::%utun6/32 fe80::7017:7a51:2293:202%utun6 UmCI utun6 ä¸Šé¢çš„è·¯ç”±è¡¨ä¸­åŒ…å«äº†ipv4å’Œipv6çš„è·¯ç”±è®°å½•ï¼Œæˆ‘ä»¬å…ˆåªå…³å¿ƒipv4çš„ã€‚å¯ä»¥çœ‹åˆ°ï¼Œç¬¬ä¸€æ¡è®°å½•çš„ç›®çš„åœ°å€åŠæ˜¯defaultï¼Œæˆ‘å½“å‰è®¾å¤‡ä¸Šå‡ ä¹æ‰€æœ‰çš„ç½‘ç»œé€šä¿¡éƒ½ä¼šå‘½ä¸­è¿™æ¡è·¯ç”±ä¿¡æ¯ï¼Œå…¶å¯¹åº”çš„ä¸‹ä¸€è·³åœ°å€ä¸º192.168.1.1ï¼Œè¿™æ­£æ˜¯æˆ‘è·¯ç”±å™¨çš„åœ°å€ï¼Œå› æ­¤å¯ä»¥çœ‹åˆ°ï¼Œå¯¹äºä¸ªäººç”µè„‘ï¼Œç½‘ç»œçš„è®¿é—®å¤§éƒ½æ˜¯é€šè¿‡è·¯ç”±å™¨å®Œæˆçš„è½¬å‘ï¼ˆä¸ç½‘çº¿ç›´è¿çš„è®¾å¤‡è¿™é‡Œä¼šæœ‰ä¸åŒï¼‰ã€‚ å¯¹äºè·¯ç”±è¡¨ä¸­çš„Flagså­—æ®µï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å†æ·±å…¥çš„äº†è§£ä¸€ä¸‹ï¼Œå…¶å…±æœ‰5ç§æ ‡è®°å¯ä»¥é…ç½®ï¼Œä¸”å¯ä»¥èšåˆï¼Œæ ‡è®°åˆ—ä¸¾å¦‚ä¸‹ï¼š Uï¼šæ­¤æ ‡è®°è¡¨ç¤ºè¯¥æ¡è·¯ç”±è®°å½•å¯ç”¨ã€‚ Gï¼šè¡¨ç¤ºè¯¥è·¯ç”±è¿æ¥çš„æ˜¯ä¸€ä¸ªç½‘å…³ï¼ˆè·¯ç”±å™¨ï¼‰ï¼Œå¦‚æœæ²¡æœ‰è¯¥æ ‡è®°ï¼Œåˆ™è¡¨ç¤ºæ˜¯ç›´è¿ã€‚ Hï¼šè¡¨ç¤ºè¯¥è·¯ç”±çš„ç›®çš„åœ°å€æ˜¯ä¸€ä¸ªä¸»æœºã€‚å¦‚æœæ²¡æœ‰è¯¥æ ‡è®°ï¼Œè¡¨ç¤ºç›®çš„åœ°å€æ˜¯ä¸€ä¸ªç½‘ç»œã€‚ Dï¼šè¡¨ç¤ºè¯¥è·¯ç”±æ˜¯ç”±é‡å®šå‘æŠ¥æ–‡åˆ›å»ºçš„ã€‚ Mï¼šè¡¨ç¤ºè¯¥è·¯ç”±è¢«é‡å®šå‘æŠ¥æ–‡åˆ›å»ºã€‚ ä»è·¯ç”±è½¬å‘çš„æ–¹å¼ä¸Šæˆ‘ä»¬ä¹Ÿå¯ä»¥æ˜ç™½ï¼ŒIPçš„è·¯ç”±é€‰æ‹©æ˜¯é€è·³è¿›è¡Œçš„ï¼Œæ— è®ºæ˜¯å†å“ªä¸ªè¿‡ç¨‹è®¾å¤‡ä¸Šï¼ŒIPå±‚éƒ½æ˜¯æ— æ³•çŸ¥é“å®Œæ•´çš„è·¯ç”±è·¯å¾„çš„ï¼ˆé™¤éæ˜¯æºä¸»æœºä¸ç›®çš„ä¸»æœºç›´è¿çš„ï¼‰ã€‚åœ¨IPæ•°æ®æŠ¥è½¬å‘æ—¶ï¼Œæˆ‘ä»¬åªèƒ½è®¤å®šä¸‹ä¸€ç«™è·¯ç”±æ˜¯æ¯”å½“å‰ä¸»æœºæ›´åŠ æ¥è¿‘ç›®çš„ä¸»æœºçš„ã€‚ 3.å…³äºIPç¼–ç ç°åœ¨ï¼Œæˆ‘ä»¬å†æ¥ä¸€èµ·å›é¡¾ä¸‹IPåœ°å€çš„ç¼–ç æ–¹å¼ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬æ­¤æ¬¡è®¨è®ºçš„éƒ½æ˜¯ipv4ï¼Œï¼Œæ¯ä¸ªIPåœ°å€éƒ½åŒ…å«ç½‘ç»œå·å’Œä¸»æœºå·ï¼ŒåŒä¸€ä¸ªç½‘ç»œä¸Šçš„æ‰€æœ‰ä¸»æœºç½‘ç»œå·éƒ½ç›¸åŒã€‚ä¸ºäº†æ–¹ä¾¿é€‚é…ä¸åŒå®¹é‡çš„ç½‘ç»œï¼ŒIPåœ°å€è¢«åˆ†ä¸ºäº†5ç±»ã€‚ Aç±»ï¼šIPåœ°å€èŒƒå›´ä»1.0.0.1 - 127.255.255.254 å¯¹äºAç±»åœ°å€æ¥è¯´ï¼Œç¬¬ä¸€æ®µå·ç ä¸ºç½‘ç»œåï¼Œå…¶åä¸‰ä¸ªå·æ®µä¸ºä¸»æœºå·ï¼Œå› æ­¤å…¶å¯åˆ†é…çš„ç½‘ç»œæ•°éå¸¸å°‘ï¼Œåªæœ‰126ä¸ªï¼Œæ¯ä¸ªç½‘ç»œå¯ä»¥åˆ†é…çš„ä¸»æœºæ•°éå¸¸å¤šï¼Œæœ‰16777214ä¸ªã€‚ Bç±»ï¼šIPåœ°å€èŒƒå›´ä»128.0.0.1 - 191.255.255.254 Bç±»åœ°å€çš„å‰ä¸¤æ®µä¸ºç½‘ç»œå·ï¼Œåä¸¤æ®µä¸ºä¸»æœºå·ã€‚Bç±»åœ°å€å¯ä»¥åˆ†é…16384ä¸ªç½‘ç»œï¼Œæ¯ä¸ªç½‘ç»œå¯ä»¥åˆ†é…65534ä¸ªä¸»æœºã€‚ Cç±»ï¼šIPåœ°å€èŒƒå›´ä»192.0.0.1 - 223.255.255.254 Cç±»åœ°å€ä¸­å‰ä¸‰æ®µä¸ºç½‘ç»œå·ï¼Œæœ€åä¸€æ®µä¸ºä¸»æœºå·ï¼Œå› æ­¤å…¶å¯ä»¥åˆ†é…çš„ç½‘ç»œæ•°ä¸º2097152ä¸ªï¼Œæ¯ä¸ªç½‘ç»œå¯ä»¥åˆ†é…çš„ä¸»æœºä¸ªæ•°ä¸º254å°ã€‚ Dç±»ï¼šIPåœ°å€èŒƒå›´ä»224.0.0.0 - 239.255.255.255 Dç±»IPåœ°å€ä¸ºç»„æ’­åœ°å€ã€‚ Eç±»ï¼šIPåœ°å€èŒƒå›´ä¸º240.0.0.0 - 255.255.255.255 æ­¤ç±»ä¸ºä¿ç•™åœ°å€ï¼Œç•™å¾…ç‰¹æ®Šç”¨é€”ã€‚ å¦‚æœä½ åœ¨ç™¾åº¦ä¸­è¾“å…¥IPåœ°å€ï¼Œå¯ä»¥çœ‹åˆ°å½“å‰ç”µè„‘æ‰€æ¥å…¥çš„ç½‘ç»œè¢«åˆ†é…çš„IPï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š é™¤äº†ä¸Šé¢æåˆ°çš„IPåœ°å€å¤–ï¼Œè¿˜æœ‰ä¸€äº›ç‰¹æ®Šçš„IPåœ°å€ï¼Œæ¯”å¦‚0.0.0.0å¯¹åº”å½“å‰ä¸»æœºã€‚255.255.255.255æ˜¯å½“å‰å­ç½‘çš„å¹¿æ’­åœ°å€ã€‚127.0.0.1åˆ°127.255.255.255.255è¿™äº›åœ°å€éƒ½æ˜¯ç”¨æ¥åšå›è·¯æµ‹è¯•çš„ï¼Œä¾‹å¦‚127.0.0.1ä¹Ÿå¯ä»¥ä»£è¡¨æœ¬æœºIPã€‚ å…¶å®ï¼Œå¯¹äºä¸»æœºå·ï¼Œåœ¨åº”ç”¨çš„æ—¶å€™ä¹Ÿå¯ä»¥å°†å…¶æ‹†ä¸ºå­ç½‘å·å’Œä¸»æœºå·ï¼Œå› æ­¤é€šè¿‡IPåœ°å€åŠ ä¸Šä¸€ä¸ªå­ç½‘æ©ç ï¼Œå³å¯å°†IPåœ°å€åˆ†ä¸ºç½‘ç»œå·ï¼Œå­ç½‘å·å’Œä¸»æœºå·ã€‚ äºŒ.å…³äºICMPåè®®é€šè¿‡å‰é¢çš„ä»‹ç»ï¼Œæˆ‘ä»¬çŸ¥é“IPåè®®æ˜¯é€šè¿‡è·¯ç”±çš„æ–¹å¼ä¸€è·³ä¸€è·³çš„å°†æ•°æ®å‘é€åˆ°ç›®çš„ç«¯ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯æ‰€æœ‰å‘é€è¿‡ç¨‹éƒ½æ˜¯æ²¡é—®é¢˜çš„ï¼Œå®é™…ä¸Šä¼šå‘ç”Ÿå¼‚å¸¸çš„æ¦‚ç‡è¿˜ä¸å°ã€‚æ­¤æ—¶å‘ç”Ÿé—®é¢˜çš„è·¯ç”±å™¨æˆ–ä¸»æœºå°†é€šè¿‡ICMPåè®®æ¥å°†é‡è¦ä¿¡æ¯è¿”å›ç»™æºä¸»æœºã€‚ ICMPåè®®è¢«è®¤ä¸ºæ˜¯IPå±‚çš„ç»„æˆéƒ¨åˆ†ä¹‹ä¸€ï¼Œæˆ‘ä»¬ä¾ç„¶å°†å…¶ç†è§£ä¸ºæ˜¯ç½‘ç»œå±‚çš„åè®®ã€‚ICMPåè®®æ˜¯åŸºäºIPåè®®çš„ï¼ŒICMPåè®®çš„å…¨åä¸ºInternet Control Message Protocolï¼Œå³Internetæ§åˆ¶æŠ¥æ–‡åè®®ã€‚å…¶åœ¨IPä¸»æœºï¼Œè·¯ç”±å™¨ç­‰è®¾å¤‡ä¹‹å‰ä¼ é€’æ§åˆ¶æ¶ˆæ¯ï¼Œä¸»è¦åŒ…æ‹¬ç½‘ç»œæ˜¯å¦è¿é€šï¼Œä¸»æœºæ˜¯å¦å¯åˆ°è¾¾ï¼Œè·¯ç”±æ˜¯å¦å¯ç”¨ç­‰ä¿¡æ¯ã€‚ 1.ICMPçš„æŠ¥æ–‡æ ¼å¼ICMPçš„æŠ¥æ–‡æ ¼å¼å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¯ä»¥çœ‹åˆ°ï¼ŒICMPæŠ¥æ–‡çš„å‰4ä¸ªå­—èŠ‚æ˜¯å›ºå®šçš„ã€‚ ç¬¬0åˆ°ç¬¬15ä½ï¼šæ ‡è¯†ICMPç±»å‹å’Œå¯¹åº”çš„codeç ã€‚å…¶ä¸­å‰8ä½æ ‡è¯†ç±»å‹ï¼Œå8ä½æ ‡è¯†codeç ã€‚ ç¬¬16åˆ°31ä½ï¼šåŒ…å«äº†æ­£å“¥ICMPæ•°æ®æŠ¥çš„æ ¡éªŒå’Œï¼Œä¸IPå¤´éƒ¨çš„æ ¡éªŒå’Œä½œç”¨ä¸€æ ·ã€‚ å…¶ä»–ä½çš„æ•°æ®æ ¼å¼å¹¶ä¸ç»Ÿä¸€ï¼Œä¼šæ ¹æ®ICPMæŠ¥æ–‡ç±»å‹çš„ä¸åŒè€Œæœ‰æ‰€å·®å¼‚ï¼Œæ€»ä¹‹ï¼Œtypeå’Œcodeæœ€ç»ˆä¼šç¡®å®šICMPæŠ¥æ–‡çš„å®Œæ•´æ ¼å¼ã€‚ 2.ICMPåè®®çš„ç±»å‹ä¸‹å›¾å®Œæ•´çš„åˆ—ä¸¾äº†ICMPæŠ¥æ–‡æ‰€å®šä¹‰çš„ç±»å‹ï¼š å¯ä»¥çœ‹åˆ°ï¼ŒICMPæŠ¥æ–‡ä¼šåœ¨IPæœåŠ¡äº§ç”Ÿé”™è¯¯çš„æ—¶å€™å°†å¼‚å¸¸ä¿¡æ¯å›æ‰§ç»™æºä¸»æœºï¼Œä½†æ˜¯ï¼Œä¸ºäº†é¿å…ç½‘ç»œé£æš´çš„äº§ç”Ÿï¼Œå¹¶éæ‰€æœ‰å¼‚å¸¸éƒ½ä¼šäº§ç”ŸICMPå›æ‰§ï¼Œä¸‹é¢å‡ ç§åœºæ™¯ä¸ä¼šå‘é€ICMPæ•°æ®æŠ¥ï¼š 1.ICMPæœ¬èº«çš„IPå±‚é”™è¯¯ã€‚ 2.ç›®çš„åœ°å€æ˜¯å¹¿æ’­æˆ–å¤šæ’­åœ°å€çš„IPæŠ¥ã€‚ 3.ä½œä¸ºé“¾è·¯å±‚å¹¿æ’­çš„æ•°æ®æŠ¥ã€‚ 4.ä¸æ˜¯IPåˆ†ç‰‡çš„ç¬¬ä¸€ç‰‡çš„æ•°æ®æŠ¥ã€‚ 5.æºåœ°å€æ˜¯é›¶åœ°å€ï¼Œå›ç¯åœ°å€ï¼Œå¹¿æ’­åœ°å€æˆ–å¤šæ’­åœ°å€çš„æ•°æ®æŠ¥ã€‚ 3.ICMPçš„åº”ç”¨ICMPæ˜¯IPå±‚å¿…ä¸å¯å°‘çš„åŠŸèƒ½åè®®ï¼Œå…¶é™¤äº†ç”¨æ¥ååŠ©IPå±‚å¤„ç†ç›¸å…³é€»è¾‘å¤–ï¼Œåœ¨ç½‘ç»œå—…æ¢æ–¹é¢ä¹Ÿæœ‰å¾ˆå¤§çš„åº”ç”¨ã€‚ 1.Pingå·¥å…·åœ¨å‰é¢çš„ICMPç±»å‹è¡¨ä¸­ï¼Œæœ‰ä¸€é¡¹typeä¸º8ï¼Œcodeä¸º0çš„ICMPç±»å‹ï¼Œå…¶è¡¨ç¤ºè¿›è¡Œå›æ˜¾è¯·æ±‚ï¼Œå³æˆ‘ä»¬ä½¿ç”¨æ­¤æ ¼å¼çš„ICMPæŠ¥æ–‡å‘é€ç»™ç›®çš„ä¸»æœºåï¼Œè¦æ±‚ä¸»æœºå°†å‘é€çš„æ•°æ®å†å›å‘ç»™æˆ‘ä»¬ã€‚è¿™ä¸€åŠŸèƒ½éå¸¸æœ‰ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒæ¥æµ‹è¯•ç›®çš„ä¸»æœºæ˜¯å¦æ˜¯å¯è¾¾çš„ã€‚å¹³æ—¶å¸¸ç”¨çš„Pingå·¥å…·å°±æ˜¯åŸºäºè¿™ç§åŸç†å®ç°çš„ã€‚ æˆ‘ä»¬å¯ä»¥å…ˆæ¥ä½“éªŒä¸‹ï¼Œå¯ä»¥åœ¨ç»ˆç«¯è¾“å…¥å¦‚ä¸‹æŒ‡ä»¤ï¼Œå‘èµ·pingè¯·æ±‚ï¼š 1ping huishao.cc ä¸Šé¢æŒ‡ä»¤çš„åŠŸèƒ½æ˜¯å¯¹åŸŸåhuishao.ccè¿›è¡Œpingæµ‹è¯•ï¼Œä¸€æ¬¡å®Œæ•´çš„pingæµ‹è¯•ä¼šäº§ç”Ÿä¸¤ä¸ªICMPæ•°æ®åŒ…ï¼Œä¸€ä¸ªæ˜¯è¯·æ±‚çš„ï¼Œä¸€ä¸ªæ˜¯å›æ˜¾çš„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š é€šè¿‡è¯·æ±‚å’Œå›æ‰§çš„æ—¶é—´æˆ³ï¼Œæˆ‘ä»¬å¯ä»¥è®¡ç®—å‡ºç½‘ç»œä¼ è¾“ä¸­çš„è€—æ—¶æƒ…å†µï¼Œä»è€Œåˆ†æç½‘ç»œç¨³å®šæ€§ã€‚ 2.tracerouteå·¥å…·å‰é¢æˆ‘ä»¬æåˆ°è¿‡ï¼ŒIPå±‚ä¸­çš„ä»»ä½•ä¸€ä¸ªä¸­é—´è®¾å¤‡ï¼Œä¹ŸåŒ…æ‹¬èµ·å§‹è®¾å¤‡ï¼Œéƒ½ä¸çŸ¥æ™“å®Œæ•´çš„è·¯ç”±é“¾è·¯ï¼Œæœ‰æ—¶å€™ä¸ºäº†åˆ†æé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦è·å–ç½‘ç»œé€šä¿¡ä¸­ä¸€ä¸ªIPæ•°æ®åŒ…åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ¯ä¸€è·³çš„å¤„ç†æƒ…å†µï¼Œè¿™æ—¶ä¹Ÿå¯ä»¥é€šè¿‡ICMPåè®®å®Œæˆã€‚ä½ åº”è¯¥è¿˜è®°å¾—ï¼ŒIPåè®®å¤´ä¸­æœ‰ä¸€ä¸ªæ ‡è®°ç”Ÿå‘½æ—¶é—´çš„å­—æ®µï¼Œæ¯ä¸ªä¸­é—´è·¯ç”±å™¨å¤„ç†IPæ•°æ®æŠ¥åï¼Œéƒ½ä¼šå°†è¿™ä¸ªå­—æ®µçš„å€¼å‡1ï¼Œå½“å…¶ä¸º0æ—¶ï¼Œè·¯ç”±å™¨åˆ™ä¸å†è½¬å‘ï¼Œç›´æ¥è¿”å›ä¸€ä¸ªtypeä¸º11ï¼Œcodeä¸º0çš„ICMPæ•°æ®æŠ¥ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿ç”¨è¿™ä¸€ç‰¹æ–°ï¼Œä¾æ¬¡å‘ç›®æ ‡ä¸»æœºå‘é€TTLé€’å¢çš„IPæŠ¥æ–‡ï¼Œä»è€Œæ¢æµ‹ä»æºä¸»æœºåˆ°ç›®çš„ä¸»æœºé—´æ‰€æœ‰è·¯ç”±è¿‡ç¨‹ã€‚ ä¾‹å¦‚åœ¨ç»ˆç«¯è¾“å…¥å¦‚ä¸‹æŒ‡ä»¤ï¼š 1traceroute huishao.cc é€šè¿‡Wiresharkå·¥å…·çš„æŠ“åŒ…ï¼Œå¯ä»¥çœ‹åˆ°TTLé€’å¢çš„IPæŠ¥æ–‡ä¸å¯¹åº”çš„ICMPå›æ‰§ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š å¯ä»¥çœ‹åˆ°ï¼Œtracerouteç¨‹åºå‘èµ·çš„æ¢æµ‹åŒ…é‡Œå®é™…æ˜¯UDPæ ¼å¼çš„æ•°æ®ï¼Œå¯¹åº”çš„ICMPæ•°æ®åŒ…ä¸­ä¼šå°†å½“å‰å¯¹åº”çš„IPæ•°æ®å¤´å’ŒUDPæ•°æ®ã€‚ ä¸‰.ç»“å°¾æœ¬ç³»åˆ—åšå®¢ï¼Œæ ¸å¿ƒçš„ç›®çš„æ˜¯èƒ½å¤Ÿç›´è§‚çš„è‡ªä¸Šè€Œä¸‹çš„ç†è§£ç½‘ç»œã€‚ä»¥å¹³æ—¶æœ€å¸¸ç”¨çš„ç½‘ç«™è®¿é—®å¼€å§‹ï¼Œæˆ‘ä»¬äº†è§£äº†åŸŸåè§£æçš„DNSåè®®ï¼Œå¤„ç†åº”ç”¨æ•°æ®çš„HTTPä»¥åŠæ›´åŠ å®‰å…¨çš„HTTPSåè®®ï¼Œè´Ÿè´£æ•°æ®å¯é æ€§ä¼ è¾“çš„TCPåè®®ï¼Œä»¥åŠæœ¬ç¯‡æ‰€æ¶‰åŠçš„ç½‘ç»œå±‚è´Ÿè´£é€‰è·¯çš„IPåè®®ã€‚å½“ç„¶ï¼Œæ–‡ç« æ‰€ä»‹ç»çš„å†…å®¹éƒ½åªæ˜¯èµ·åˆ°æŠ›ç –å¼•ç‰ä¹‹æ•ˆï¼Œå…¶ä¸­æ¯ä¸ªç»†èŠ‚ç‚¹æ¶‰åŠçš„æŠ€æœ¯éƒ½å¯ä»¥æ‰©å±•å¼€æ¥å­¦ä¹ ã€‚ç›®å‰å¯¹æˆ‘ä»¬æ¥è¯´ï¼Œæ•´ä¸ªäº’è”ç½‘çš„æ¶æ„æ­£åœ¨é€æ­¥çš„å˜å¾—æ¸…æ™°ï¼Œä½†æ˜¯è¿˜ä¸å®Œæ•´ï¼Œå½’æ ¹ç»“åº•ï¼Œç½‘ç»œçš„é€šä¿¡æ˜¯è¦åœ¨å®å®åœ¨åœ¨çš„ç‰©ç†æœºä¸Šé¢è¿›è¡Œï¼ŒIPåœ°å€åªæ˜¯æŠ½è±¡çš„ç½‘ç»œåœ°å€ï¼Œé‚£ä¹ˆç½‘ç»œè®¾å¤‡æ˜¯å¦‚ä½•æ ¹æ®IPåœ°å€æ‰¾åˆ°å¯¹åº”çš„ç‰©ç†æœºçš„ï¼Ÿæ›´å¤šç½‘ç»œå±‚çš„åè®®ä»¥åŠç½‘ç»œå±‚ä¹‹ä¸‹åˆæ˜¯æ€æ ·å·¥ä½œçš„ï¼Œæˆ‘ä»¬åé¢å†èŠï¼ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQï¼š316045346 åŒæ—¶ï¼Œå¦‚æœæœ¬ç¯‡æ–‡ç« è®©ä½ è§‰å¾—æœ‰ç”¨ï¼Œæ¬¢è¿åˆ†äº«ç»™æ›´å¤šæœ‹å‹ï¼Œè¯·æ ‡æ˜å‡ºå¤„ã€‚","categories":[{"name":"ç½‘ç»œæŠ€æœ¯","slug":"ç½‘ç»œæŠ€æœ¯","permalink":"http://huishao.cc/categories/ç½‘ç»œæŠ€æœ¯/"}],"tags":[],"keywords":[{"name":"ç½‘ç»œæŠ€æœ¯","slug":"ç½‘ç»œæŠ€æœ¯","permalink":"http://huishao.cc/categories/ç½‘ç»œæŠ€æœ¯/"}]},{"title":"è‡ªä¸Šè€Œä¸‹çš„ç†è§£ç½‘ç»œï¼ˆ4ï¼‰â€”â€”TCPç¯‡","slug":"442è‡ªä¸Šè€Œä¸‹çš„ç†è§£ç½‘ç»œï¼ˆ4ï¼‰â€”â€”TCPç¯‡","date":"2022-01-28T16:00:00.000Z","updated":"2022-01-29T10:36:37.275Z","comments":true,"path":"2022/01/29/442è‡ªä¸Šè€Œä¸‹çš„ç†è§£ç½‘ç»œï¼ˆ4ï¼‰â€”â€”TCPç¯‡/","link":"","permalink":"http://huishao.cc/2022/01/29/442è‡ªä¸Šè€Œä¸‹çš„ç†è§£ç½‘ç»œï¼ˆ4ï¼‰â€”â€”TCPç¯‡/","excerpt":"","text":"è‡ªä¸Šè€Œä¸‹çš„ç†è§£ç½‘ç»œï¼ˆ4ï¼‰â€”â€”TCPç¯‡æœ¬ç³»åˆ—æ–‡ç« çš„ä¸»é¢˜æ˜¯è‡ªä¸Šè€Œä¸‹çš„ç†è§£ç½‘ç»œï¼Œè¿™é‡Œçš„ä¹‹ä¸Šè€Œä¸‹ï¼Œåªè¦æŒ‡çš„æ˜¯åŸºäºHTTPçš„ç½‘ç»œæœåŠ¡ã€‚æˆ‘ä»¬åªè¦ä»ä¸Šä¹‹ä¸‹çš„å°†è¿™ä¸€è¿‡ç¨‹ç†è§£é€å½»ï¼Œå¯¹äºå…¶ä»–çš„åº”ç”¨æ¥è¯´ï¼Œåªæ˜¯åè®®ä¸åŒï¼ŒåŸç†æ˜¯ç›¸ä¼¼çš„ã€‚é€šè¿‡æœ¬ç³»åˆ—å‰é¢å‡ ç¯‡åšå®¢çš„ä»‹ç»ï¼Œæˆ‘ä»¬äº†è§£äº†åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ä¸€ä¸ªåŸŸåæˆ–Appé€šè¿‡ä¸€ä¸ªåŸŸåè®¿é—®åç«¯æœåŠ¡æ¥å£æ—¶ï¼ŒåŸŸåä¼šè½¬æ¢æˆIPåœ°å€ï¼Œå…¶å®åªæœ‰IPåœ°å€è¿˜ä¸å¤Ÿï¼Œç†è®ºä¸Šè¿˜éœ€è¦ä¸€ä¸ªç«¯å£å·ç”¨æ¥ç¡®è®¤æœåŠ¡ä¸»æœºä¸Šå¯¹åº”çš„åº”ç”¨ç¨‹åºã€‚åªæ˜¯åœ¨å®é™…çš„åº”ç”¨ä¸­ï¼ŒHTTPåè®®é»˜è®¤çš„ç«¯å£å·ä¸º80ï¼ŒHTTPSåè®®é»˜è®¤çš„ç«¯å£å·ä¸º443ã€‚ HTTPæä¾›äº†åº”ç”¨å±‚çš„æ•°æ®å®šä¹‰ç»“æ„ï¼ˆHTTPSåˆåŠ å…¥äº†å®‰å…¨æ€§çš„ä¿éšœï¼‰ï¼Œåº”ç”¨å±‚çš„åè®®è§„èŒƒäº†ä¸åŒè®¾å¤‡ï¼Œç½‘ç»œç¯å¢ƒä¸‹çš„æœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯çš„åº”ç”¨äº¤äº’æ ¼å¼ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬éœ€è¦å…³å¿ƒä¸‹è¿™äº›åº”ç”¨æ•°æ®æ˜¯å¦‚ä½•åœ¨ä¸¤ç«¯é—´è¿›è¡Œä¼ è¾“äº†ã€‚ä¸çŸ¥ä½ æ˜¯å¦è¿˜è®°å¾—ï¼Œæˆ‘ä»¬ä¹‹å‰æœ‰æåˆ°è¿‡ç½‘ç»œçš„åˆ†å±‚ï¼Œä¸‹å›¾æè¿°äº†åœ¨TCP/IPåè®®ç°‡ä¸­å„ä¸ªåè®®æ‰€å±çš„ç½‘ç»œå±‚çº§ï¼š å¯ä»¥çœ‹åˆ°ï¼Œå½“åº”ç”¨å±‚å°†åº”ç”¨æ•°æ®ç»„è£…å¥½åï¼Œå¹¶ä¸å…³å¿ƒæ•°æ®çš„ä¼ è¾“ï¼Œä¼ è¾“å±‚æ¥è´Ÿè´£å°†æ•°æ®ä¼ è¾“åˆ°ç›®æ ‡ä¸»æœºã€‚HTTPæ˜¯åŸºäºTCPçš„ä¸€ç§åº”ç”¨å±‚åè®®ï¼Œå…³äºUDPï¼Œå…¶ä¸TCPè¿˜æ˜¯æœ‰å¾ˆå¤§çš„å·®åˆ«ï¼Œæˆ‘ä»¬æœ¬ç¯‡åšå®¢æš‚ä¸äºˆè®¨è®ºã€‚ ä¸€.å…ˆç©ºè°ˆäº›ç†è®ºå…³äºTCPï¼Œå¤§éƒ¨åˆ†å¼€å‘è€…æˆ–è®¡ç®—æœºä¸“ä¸šçš„åŒå­¦éƒ½ä¸é™Œç”Ÿï¼Œä½†æ˜¯å¯èƒ½ä¹Ÿä»…ä»…å¤„äºåªæ˜¯ä¸é™Œç”Ÿçš„é˜¶æ®µï¼Œå¯¹å…¶å·¥ä½œåŸç†ï¼Œåè®®å†…å®¹éƒ½ä¸ç”šæ˜äº†ã€‚åœ¨åˆ†å±‚ç½‘ç»œæ¨¡å‹ä¸­ï¼Œæ¯ä¸€å±‚çš„åè®®éƒ½ä¼šå†ä¸Šä¸€å±‚æ•°æ®çš„åŸºç¡€ä¸Šå¢éƒ¨åˆ†å¤´ä¿¡æ¯ï¼Œå­¦ä¹ åè®®ï¼Œå…¶å®å°±æ˜¯å­¦ä¹ è¿™äº›å¤´ä¿¡æ¯çš„æ„ä¹‰å’Œç”¨æ³•ã€‚ æˆ‘æœ€æ—©äº†è§£åˆ°TCPæ˜¯åœ¨å­¦æ ¡çš„ç½‘ç»œç›¸å…³è¯¾ç¨‹ä¸­ï¼Œåæ¥åœ¨å·¥ä½œä¸­ï¼Œé‡å­¦è®¡ç®—æœºç›¸å…³çŸ¥è¯†ä¸­æ¯æ¬¡ä¹Ÿä¼šé‡åˆ°TCPç›¸å…³çš„ç†è®ºå†…å®¹ã€‚å‡ ä¹æ‰€æœ‰è€å¸ˆåœ¨ä»‹ç»TCPæ—¶ï¼Œéƒ½ä¼šå…ˆæŠ›å‡ºå¦‚ä¸‹å®šä¹‰ï¼š TCPæ˜¯ä¸€ç§é¢å‘è¿æ¥çš„ï¼Œå¯é çš„åŸºäºå­—èŠ‚æµçš„ä¼ è¾“å±‚é€šä¿¡åè®®ã€‚ è¿™ä¸ªå®šä¹‰ä¸­æœ‰ä¸€äº›å…³é”®å­—ï¼šé¢å‘è¿æ¥ï¼Œå¯é çš„ï¼ŒåŸºäºå­—èŠ‚æµã€‚é¢å‘è¿æ¥å’ŒåŸºäºå­—èŠ‚æµæ˜¯æŒ‡ä»€ä¹ˆï¼Ÿå¯é æ€§åˆæ˜¯å¦‚ä½•ä¿éšœçš„ï¼Ÿè¿™æ­£æ˜¯æœ¬æ–‡è¦è®¨è®ºçš„æ ¸å¿ƒã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆä»ç†è®ºä¸Šï¼Œå¯¹TCPåšä¸€äº›ç®€å•çš„ä»‹ç»ã€‚ 1.å…³äºé¢å‘è¿æ¥é¢å‘è¿æ¥ä¸»è¦æ˜¯æŒ‡ä¸¤ä¸ªTCPçš„åº”ç”¨åœ¨å½¼æ­¤äº¤æ¢æ•°æ®ä¹‹å‰ï¼Œéƒ½éœ€è¦å…ˆå»ºç«‹ä¸€ä¸ªTCPçš„è¿æ¥ï¼Œå½¢è±¡ä¸€äº›æè¿°è¿™å°±å¥½æ¯”åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯é€šä¿¡å‰å…ˆå»ºç«‹ä¸€æ¡ç½‘ç»œä¸Šçš„é€šé“ï¼Œä¹‹åçš„é€šä¿¡éƒ½åŸºäºè¿™ä¸ªé€šé“è¿›è¡Œã€‚é€šé“å¯ä»¥å»ºç«‹ï¼Œé‚£ä¹ˆåŒæ ·ä¹Ÿå¯ä»¥å…³é—­ï¼Œå½“ä¸¤å°é€šä¿¡çš„è®¾å¤‡ä¸å†éœ€è¦äº¤äº’æ•°æ®æ—¶ï¼Œå°±å¯ä»¥å…³é—­æ­¤TCPé€šé“ã€‚åé¢æˆ‘ä»¬å°†ä»‹ç»è¿æ¥æ˜¯å¦‚ä½•å»ºç«‹çš„åˆå¦‚ä½•æ–­å¼€ã€‚ 2.å…³äºå¯é æ€§è¯´åˆ°å¯é æ€§ï¼Œæ˜¯æŒ‡ä¸Šå±‚ä¸šåŠ¡æ— éœ€å…³å¿ƒæ•°æ®å‘é€è¿‡ç¨‹ä¸­æ˜¯å¦ä¸¢å¤±äº†ï¼Œå¯¹æ–¹æ˜¯å¦ç¡®å®šå®Œæ•´çš„æ”¶åˆ°äº†ç­‰ç­‰ã€‚ä¾‹å¦‚æˆ‘ä»¬åœ¨å‘é€HTTPè¯·æ±‚å’Œæ¥æ”¶å›æ‰§æ•°æ®æ—¶ï¼Œæ ¹æœ¬æ²¡æœ‰å…³å¿ƒæ•°æ®åˆ°è¾¾å’Œå®Œæ•´æ€§é—®é¢˜ï¼Œåªéœ€è¦ç­‰å¾…å›æ‰§å³å¯ã€‚è¿™æ˜¯å› ä¸ºä¼ è¾“çš„å¯é æ€§åœ¨TCPä¸€å±‚ä¿è¯äº†ã€‚ TCPåœ¨å‘é€åº”ç”¨æ•°æ®æ—¶ä¼šå°†è¦å‘é€çš„æ•°æ®åˆ†æˆåˆé€‚å‘é€çš„æ•°æ®å—ï¼Œåˆ†å—è¿›è¡Œå‘é€ã€‚ å½“TCPå‘é€äº†ä¸€æ®µæ•°æ®åï¼Œä¼šç­‰å¾…ç›®çš„ç«¯çš„ç¡®è®¤æ”¶åˆ°æŠ¥æ–‡ï¼Œå¦‚æœåœ¨ä¸€å®šæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°æ­¤æŠ¥æ–‡ï¼Œåˆ™ä¼šè¿›å…¥è¶…æ—¶æˆ–é‡è¯•é€»è¾‘ï¼ŒTCPé€šè¿‡ç¡®è®¤æŠ¥æ–‡æ¥ä¿è¯æ•°æ®çš„åˆ°è¾¾å¯é æ€§ã€‚ TCPå°†ç»´æŠ¤ä¸€ä¸ªç«¯åˆ°ç«¯çš„æ•°æ®æ ¡éªŒå’Œï¼Œç”¨æ¥æ£€æµ‹åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯å¦äº§ç”Ÿäº†å·®é”™ï¼Œå¦‚æœå‘ç°äº†å·®é”™ï¼ŒTCPæ¥æ”¶ç«¯å°†ä¸¢å¼ƒè¿™ä¸ªæŠ¥æ–‡ï¼Œå¹¶ä¸å‘é€ç¡®è®¤æŠ¥æ–‡ï¼Œç­‰å¾…å¯¹æ–¹çš„è¶…æ—¶æˆ–é‡å‘é€»è¾‘ã€‚ TCPæ˜¯é€šè¿‡ç½‘ç»œå±‚çš„IPåè®®åšæ•°æ®ä¼ è¾“çš„ï¼ŒIPæ•°æ®æŠ¥æ˜¯æœ‰å¯èƒ½å‘ç”Ÿä¹±åºçš„ï¼Œå› æ­¤TCPè¦å¯¹æ¥æ”¶åˆ°çš„æ•°æ®è¿›è¡Œé‡æ’ï¼Œå°†æ”¶åˆ°çš„æ•°æ®ä»¥æ­£ç¡®çš„é¡ºåºè¿”å›ç»™åº”ç”¨å±‚ã€‚ åŒæ ·IPæ•°æ®æŠ¥ä¹Ÿæœ‰å¯èƒ½ä¼šäº§ç”Ÿé‡å¤ï¼ŒTCPä¹Ÿä¼šè´Ÿè´£å¯¹é‡å¤çš„æ•°æ®æŠ¥è¿›è¡Œå»é‡ã€‚ æœ€åï¼ŒTCPä¹Ÿæä¾›æµé‡æ§åˆ¶ï¼Œå¢åŠ ä¼ è¾“å¯é æ€§ã€‚ 3.å…³äºåŸºäºå­—èŠ‚æµTCPåœ¨ä¼ è¾“æ•°æ®æ—¶ï¼Œå¯¹åº”ç”¨å±‚çš„æ•°æ®ä¸åšä»»ä½•è§£é‡Šï¼ŒTCPä¹Ÿä¸å†èµ¢è¾“æ•°æ®å­—èŠ‚æµä¸­æ’å…¥ä»»ä½•æ ‡è¯†ç¬¦ã€‚è¿™ä¹Ÿå°±æ˜¯è¯´ï¼ŒTCPå…·ä½“ä¼ è¾“çš„æ˜¯ä»€ä¹ˆæ ¼å¼çš„åº”ç”¨æ•°æ®åœ¨TCPå±‚å¹¶ä¸åšè§£æï¼Œå‘é€æ–¹å‘é€çš„å­—èŠ‚æµæ•°æ®ä¹ŸåŒæ ·ä¼šåœ¨æ¥æ”¶æ–¹å®Œå…¨ç›¸åŒçš„æ¥æ”¶åˆ°ï¼Œæ‰€æœ‰è§£é‡Šå’Œç†è§£éƒ½åœ¨åº”ç”¨å±‚ã€‚ äºŒ.å®è§‚çš„çœ‹TCPé€šä¿¡è¿‡ç¨‹å‰é¢æœ‰æåˆ°ï¼ŒTCPåœ¨ä¼ è¾“åº”ç”¨æ•°æ®å‰é¦–å…ˆéœ€è¦å»ºç«‹è¿æ¥ï¼ŒTCPå»ºç«‹è¿æ¥çš„æ–¹å¼æ˜¯é€šè¿‡3æ¬¡é€šä¿¡å®Œæˆï¼Œå½¢è±¡çš„è¢«ç§°ä¸ºTCPçš„3æ¬¡æ¡æ‰‹ã€‚ åœ¨TCPåè®®ä¸­ï¼Œæœ‰ä¸€ä¸ªFlagså­—æ®µï¼Œè¿™ä¸ªå­—æ®µå°†ç”±å§‹è‡³ç»ˆçš„è´¯ç©¿æˆ‘ä»¬ç†è§£TCPåè®®å…¨éƒ¨è¿‡ç¨‹ã€‚æ­¤å­—æ®µå°†è¡¨ç¤ºå½“å‰TCPæŠ¥æ–‡çš„ç±»å‹ï¼Œæœ‰å¦‚ä¸‹6ç§ï¼š SYN:å»ºç«‹è¿æ¥ã€‚ FIN:æ–­å¼€è¿æ¥ã€‚ ACK:å›æ‰§å“åº”ã€‚ PSH:æ•°æ®ä¼ è¾“ã€‚ RST:è¿æ¥é‡ç½®ã€‚ URG:ç´§æ€¥æŒ‡é’ˆã€‚ è¿™å¹¶ä¸æ˜¯è¯´æ¯ä¸ªTCPçš„æŠ¥æ–‡åªèƒ½å¯¹åº”å”¯ä¸€çš„ä¸€ä¸ªç±»å‹ï¼ŒFlagså­—æ®µå 6ä½çš„æ•°æ®ï¼Œæ¯ä¸€ä½å¯¹åº”ä¸€ä¸ªçŠ¶æ€ï¼ŒæŠ¥æ–‡çŠ¶æ€æ˜¯å¯ä»¥èšåˆçš„ï¼Œæ¯”å¦‚ä¸€ä¸ªTCPæŠ¥æ–‡å³æ ‡è®°æ˜¯ACKç”±æ ‡è®°ä¸ºPSHã€‚é€šè¿‡èšåˆå¯ä»¥å‡å°‘TCPæŠ¥æ–‡æ•°ï¼Œæé«˜ä¼ è¾“æ•ˆç‡ã€‚å®Œæ•´çš„TCPæŠ¥æ–‡æ ¼å¼å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å®Œæ•´çš„æŠ¥æ–‡æ„ä¹‰æˆ‘ä»¬æš‚ä¸”æŒ‰ä¸‹ä¸è¡¨ï¼Œåªçœ‹å…¶ä¸­çš„Flagséƒ¨åˆ†ï¼Œå¯ä»¥çœ‹åˆ°å®ƒå äº†6ä½ï¼Œç¬¬1ä½ä¸ºURGä½ï¼Œæœ€åä¸€ä½ä¸ºFINä½ã€‚ 1.è¿æ¥å»ºç«‹è¿‡ç¨‹TCPé€šä¿¡æ˜¯åœ¨ç½‘ç»œä¸¤ç«¯é—´è¿›è¡Œçš„ï¼Œè¦å»ºç«‹è¿æ¥ï¼Œä¸€ç«¯é¦–å…ˆéœ€è¦å‘èµ·å»ºè¿ï¼Œåœ¨HTTPæ•°æ®è¯·æ±‚ä¸­ï¼Œæ˜¯ç”±å®¢æˆ·ç«¯é¦–å…ˆå‘èµ·å»ºè¿ã€‚ ç¬¬ä¸€æ­¥ï¼šç”±å®¢æˆ·ç«¯å‘èµ·SYNç±»å‹çš„TCPæŠ¥ï¼Œå…¶ä¸­ä¼šæŒ‡å®šç›®æ ‡æœåŠ¡å™¨çš„ç«¯å£å·ç­‰æ•°æ®ã€‚ ç¬¬äºŒæ­¥ï¼šæœåŠ¡ç«¯æ”¶åˆ°å®¢æˆ·ç«¯çš„å»ºè¿æŠ¥æ–‡åï¼Œå›å¤ä¸€ä¸ªåŒ…å«ACKå’ŒSYNçš„æŠ¥æ–‡ï¼Œè¡¨ç¤ºæ”¶åˆ°å®¢æˆ·ç«¯çš„å»ºè¿è¯·æ±‚ï¼Œå¹¶ä¸”å‘èµ·æœåŠ¡ç«¯çš„å»ºè¿è¦æ±‚ã€‚ ç¬¬ä¸‰æ­¥ï¼šå®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡ç«¯çš„å“åº”æŠ¥æ–‡åï¼Œå†å›ä¸€ä¸ªACKç±»å‹çš„æŠ¥æ–‡è¡¨ç¤ºæ”¶åˆ°ï¼Œè¿æ¥å»ºç«‹å®Œæˆã€‚ 2.åº”ç”¨æ•°æ®çš„å‘é€è¿‡ç¨‹è¿æ¥å»ºç«‹å®Œæˆä¹‹åï¼ŒTCPçš„é€šä¿¡è¿‡ç¨‹å°±å˜å¾—ç›¸å¯¹ç®€å•ã€‚ä¸€æ–¹å‘é€æ•°æ®æ—¶ï¼Œä¼šå‘å‡ºç±»å‹çš„PSHçš„æŠ¥æ–‡ï¼Œå¦ä¸€æ–¹æ¥æ”¶åˆ°åéœ€è¦å›å¤å¯¹åº”çš„ACKæŠ¥æ–‡ï¼Œå¦‚æ­¤å¾ªç¯å¾€å¤ï¼Œç›´åˆ°æ•°æ®äº¤äº’å®Œæˆã€‚ 3.è¿æ¥æ–­å¼€è¿‡ç¨‹ä¸è¿æ¥çš„å»ºç«‹ç±»ä¼¼ï¼Œæ–­å¼€è¿æ¥ä¹Ÿéœ€è¦ACKè¿›è¡Œç¡®è®¤ã€‚ä»¥HTTPè¯·æ±‚ä¸ºä¾‹ï¼š ç¬¬ä¸€æ­¥ï¼šå½“æœåŠ¡ç«¯å‘é€å®Œæ•°æ®åï¼Œä¼šé¦–å…ˆå‘èµ·FINç±»å‹çš„æŠ¥æ–‡æ¥æ–­å¼€è¿æ¥ã€‚ ç¬¬äºŒæ­¥ï¼šå®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡ç«¯çš„FINæŠ¥æ–‡åï¼Œå›å¤ACKã€‚ ç¬¬ä¸‰æ­¥ï¼šå®¢æˆ·ç«¯å‘é€FINæŠ¥æ–‡æ¥æ–­å¼€å®¢æˆ·ç«¯è¿æ¥ã€‚ ç¬¬å››æ­¥ï¼šæœåŠ¡ç«¯æ”¶åˆ°å®¢æˆ·ç«¯çš„FINæŠ¥æ–‡åï¼Œå›å¤ACKã€‚ å› æ­¤ï¼ŒTCPæ–­å¼€è¿æ¥çš„è¿‡ç¨‹ä¹Ÿè¢«å½¢è±¡çš„ç§°ä¸º4æ¬¡æŒ¥æ‰‹ã€‚ ä¸‰.æ·±å…¥ç†è§£ä¸‹TCPçš„å·¥ä½œæµç¨‹ç°åœ¨ï¼Œè™½ç„¶å®è§‚ä¸Šæˆ‘ä»¬å¯¹TCPçš„é€šä¿¡è¿‡ç¨‹æœ‰äº†å¤§è‡´çš„æ¦‚å¿µï¼Œä½†è¿˜æ˜¯å¤ªè‚¤æµ…äº†ï¼Œè®¸å¤šæ ¸å¿ƒç‚¹æˆ‘ä»¬éƒ½è¿˜æ²¡æœ‰æ¶‰åŠã€‚æ¯”å¦‚æ—¶åºï¼Œå¯é æ€§ï¼ŒTCPé¦–éƒ¨å­—æ®µæ„ä¹‰ç­‰ã€‚æœ¬èŠ‚ä¹Ÿè¯¦ç»†è®¨è®ºä¸‹è¿™éƒ¨åˆ†å†…å®¹ã€‚ 1.TCPæŠ¥æ–‡é¦–éƒ¨è¯¦è§£å›åˆ°ä¸Šé¢çš„é‚£å¼ TCPæŠ¥æ–‡å›¾ç¤ºã€‚ä¸‹é¢æˆ‘ä»¬æ¥è¯¦ç»†ä»‹ç»ä¸‹ã€‚ Source Portï¼šæºç«¯å£ï¼Œå 16ä½ï¼ˆä¸¤ä¸ªå­—èŠ‚ï¼‰ï¼Œè¿™ä¸ªå­—æ®µå¾ˆå¥½ç†è§£ï¼Œå³å‘å‡ºæ­¤æŠ¥æ–‡çš„ç«¯å£ã€‚ Destination Portï¼šç›®çš„ç«¯å£ï¼Œå 16ä½ï¼ˆä¸¤ä¸ªå­—èŠ‚ï¼‰ï¼Œå³è¦æ¥æ”¶æ­¤æŠ¥æ–‡çš„ç«¯å£ã€‚ Squence Numberï¼šåºåˆ—å·ï¼Œå 32ä½ï¼ŒTCPæ˜¯åŸºäºå­—èŠ‚æµä¼ è¾“çš„ï¼Œè¿™ä¸ªåºåˆ—å·ç”¨æ¥æ ‡è¯†å½“å‰æŠ¥æ–‡ä¸­ç¬¬1ä¸ªæ•°æ®å­—èŠ‚çš„ç¼–å·ï¼Œä½¿ç”¨æ­¤åºåˆ—å·å¯¹å‘é€çš„å­—èŠ‚è¿›è¡Œè®¡æ•°ï¼Œè´¯ç©¿æ•´ä¸ªé€šä¿¡è¿‡ç¨‹ã€‚åé¢ä¼šè¯¦ç»†ä»‹ç»ã€‚ Acknowledgment Numberï¼šAckåºåˆ—å·ï¼Œå 32ä½ï¼Œè¡¨ç¤ºå‘é€ACKçš„ä¸€æ–¹æœŸæœ›æ¥æ”¶çš„ä¸‹ä¸ªæ•°æ®å­—èŠ‚çš„ç¼–å·ã€‚ Data Offsetï¼šæ•°æ®åç§»é‡ï¼Œå 4ä½ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºTCPå¤´éƒ¨çš„é•¿åº¦ï¼Œç”¨æ¥æ ‡è®°æ•°æ®é…ç½®ã€‚å…¶è¡¨ç¤ºTCPå¤´éƒ¨å äº†å¤šå°‘ä¸ª4å­—èŠ‚ã€‚ç”±äº4ä½çš„æœ€å¤§æ•°ä¸º15ï¼Œæ‰€ä»¥TCPæŠ¥å¤´çš„æœ€å¤§é•¿åº¦ä¸º4*15=60ä¸ªå­—èŠ‚ã€‚ Reservedï¼šé¢„ç•™å­—æ®µï¼Œé•¿åº¦ä¸º6ä½ã€‚ Flagsï¼šç±»å‹å­—æ®µï¼Œå 6ä½ã€‚ä»ä½åˆ°é«˜ä¾æ¬¡è¡¨ç¤ºFINï¼ŒSYNï¼ŒRSTï¼ŒPSHï¼ŒACKï¼ŒURGã€‚ Windowï¼šå 16ä½ï¼Œè¡¨ç¤ºæ»‘åŠ¨çª—å£çš„å¤§å°ï¼Œç”¨æ¥å‘Šè¯‰å‘é€ç«¯æ¥æ”¶ç«¯çš„ç¼“å­˜å¤§å°ã€‚è¾¾åˆ°æµé‡æ§åˆ¶ï¼Œæœ€å¤§å€¼ä¸º65535ã€‚ Checksumï¼šæ ¡éªŒå’Œï¼Œå 16ä½ï¼Œç”¨æ¥æ ¡éªŒTCPå¤´ä¿¡æ¯ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯å¦å‡ºé”™ã€‚ Urgent Pointerï¼šç´§æ€¥æŒ‡é’ˆï¼Œç±»å‹ä¸ºURGæŠ¥æ–‡æœ‰æ•ˆï¼Œè¡¨ç¤ºç¬¬ä¸€ä¸ªç´§æ€¥æ•°æ®å­—èŠ‚æ‰€åœ¨ä½ç½®ã€‚ Options-Paddingï¼šé¢å¤–é€‰é¡¹ï¼Œé•¿åº¦å¯å˜ï¼Œå½“ä¸è¶³32ä½çš„å€æ•°æ—¶ï¼Œä½¿ç”¨0è¡¥é½ã€‚ Dataï¼šé•¿åº¦å¯å˜ï¼Œä¼ è¾“çš„ä¸Šå±‚æ•°æ®ï¼Œå¯ä»¥ä¸ºç©ºã€‚ 2.æ—¶åºæ˜¯å¦‚ä½•ä¿éšœçš„ä¿éšœæ—¶åºæ˜¯TCPå¯é æ€§çš„é‡è¦ç›®æ ‡ã€‚æ—¶åºçš„ä¿éšœä¸»è¦æ˜¯é€šè¿‡TCPæŠ¥æ–‡å¤´ä¸­çš„SNï¼ˆåºåˆ—å·ï¼‰å’ŒANï¼ˆAckåºåˆ—å·ï¼‰ä¿éšœçš„ã€‚ æˆ‘ä»¬å…ˆæ¥çœ‹SNï¼ŒSNæ˜¯ä¸€ä¸ªç›¸å¯¹çš„æ¦‚å¿µï¼Œåœ¨ä¸€ä¸ªTCPè¿æ¥è¦å»ºç«‹æ—¶ï¼Œå®¢æˆ·ç«¯å‘èµ·çš„ç¬¬ä¸€ä¸ªSYNæŠ¥æ–‡ä¼šè¢«åˆ†é…ä¸€ä¸ªSNåºå·ï¼Œè¿™ä¸ªåºå·ä¸ºåˆå§‹åŒ–åºå·ï¼Œä¹‹ååœ¨æœ¬æ¬¡TCPé€šä¿¡ä¸­ï¼Œæˆ‘ä»¬éƒ½å°†ä»¥è¿™ä¸ªåˆå§‹åŒ–åºå·ä¸ºæ ‡å‡†æ¥è®¡ç®—ç›¸å¯¹SNã€‚éœ€è¦æ³¨æ„ï¼ŒSYNæŠ¥æ–‡ä¹Ÿä¼šå æ®ä¸€ä¸ªSNåºå·ï¼Œä¸‹æ¬¡å‘é€æ•°æ®æ—¶ï¼ŒSNåºå·ä¼šè¢«åŠ 1ã€‚ æˆ‘ä»¬å†æ¥çœ‹ANï¼ŒANè¡¨ç¤ºæˆ‘é¢„æœŸè¦æ¥æ”¶çš„ä¸‹ä¸€ä¸ªæ•°æ®çš„SNå·ï¼Œå½“æ¥æ”¶åˆ°æ”¶åˆ°äº†å‘é€ç«¯çš„æ•°æ®åï¼Œä¼šå›æ‰§Ackç±»å‹çš„æŠ¥æ–‡ï¼Œå¹¶å°†ANè®¾ç½®ä¸ºå‘é€ç«¯é…ç½®çš„SNå·åŠ 1ã€‚ é€šè¿‡SNå’ŒANï¼Œç®€åŒ–çš„é€šä¿¡è¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ä»¥ï¼š æ­¤å›¾çœ‹ä¸Šå»æ˜¯æœ‰ä¸€äº›ç»•ï¼Œå¤šåˆ†æå‡ éï¼Œä½ ä¼šå¯¹TCPçš„åŸç†æœ‰ç›¸å¯¹é€å½»çš„ç†è§£ã€‚ 3.æœ‰å…³å¯é æ€§çš„ä¸€äº›å…¶ä»–æŠ€æœ¯æ‰‹æ®µè¶…æ—¶ä¸é‡è¯• åœ¨ä¸€åˆ‡é¡ºåˆ©çš„æƒ…å†µä¸‹ï¼ŒTCPå»ºè¿åªéœ€è¦3æ­¥å³å¯å®Œæˆã€‚ä½†æ˜¯äº‹å®ä¸Šï¼Œç°å®ä¸­çš„ç½‘ç»œç¯å¢ƒè¦å¤æ‚çš„å¤šï¼Œå»ºè¿å¹¶ä¸æ€»æ˜¯é¡ºåˆ©çš„ã€‚ ä¸€ç§æƒ…å†µæ˜¯å®¢æˆ·ç«¯è¦è¿æ¥çš„ç«¯å£åœ¨æœåŠ¡ç«¯å¹¶æ²¡æœ‰ç›‘å¬ï¼Œæ­¤æ—¶æœåŠ¡ç«¯ä¸»æœºTCPæœåŠ¡ä¼šç›´æ¥å›æ‰§ä¸€ä¸ªRSTç±»å‹çš„æŠ¥æ–‡ï¼Œè¡¨ç¤ºè¿æ¥å‡ºé”™ï¼Œæ­¤æ—¶å‘èµ·æ–¹åº”ç›´æ¥å…³æ‰è¿æ¥ã€‚ å¦ä¸€ç§æƒ…å†µæ˜¯æœåŠ¡ç«¯ä¸»æœºå¤„äºå¼‚å¸¸çŠ¶æ€ï¼Œå¯èƒ½ç½‘ç»œå‡ºç°çš„é—®é¢˜ï¼Œæ­¤æ—¶å‘èµ·æ–¹æ— æ³•ç­‰åˆ°æœåŠ¡ç«¯çš„ä»»ä½•å›æ‰§ï¼Œæ­¤æ—¶ä¼šè¿›å…¥TCPçš„å»ºè¿è¶…æ—¶é€»è¾‘ï¼ŒTCPçš„ç¬¬ä¸€æ¬¡å»ºè¿é‡è¯•ä¼šåœ¨è¶…æ—¶çº¦6ç§’æ—¶è§¦å‘ï¼Œç¬¬äºŒæ¬¡é‡è¯•ä¼šåœ¨é—´éš”å¤§çº¦24ç§’åè§¦å‘ï¼Œç¬¬ä¸‰æ¬¡é‡è¯•ä¼šåœ¨é—´éš”å¤§çº¦76ç§’åè§¦å‘ã€‚å…·ä½“éµå¾ªçš„è¶…æ—¶é‡è¯•ç®—æ³•æˆ‘ä»¬è¿™é‡Œä¸å†å±•å¼€ã€‚ RSTç±»å‹çš„å¤ä½æŠ¥æ–‡ æœ‰è®¸å¤šåœºæ™¯å¯èƒ½è§¦å‘RSTå¤ä½æŠ¥æ–‡ï¼Œä¸€ç§æ˜¯æˆ‘ä»¬è®¿é—®äº†æ— æ•ˆç«¯å£æ—¶ï¼ŒæœåŠ¡ç«¯ä¼šè¿”å›RSTæŠ¥æ–‡ã€‚ å¦ä¸€ç§åœºæ™¯æ˜¯å¦‚æœè¿æ¥å·²ç»è¢«å…³é—­ï¼Œå†æ¬¡é€šè¿‡æ­¤è¿æ¥å‘é€æ•°æ®ï¼Œä¼šæ”¶åˆ°RSTçš„å¤ä½è¿æ¥ã€‚è¿™ç§åœºæ™¯å¾ˆå¸¸è§ï¼Œä¾‹å¦‚ä¸€ç«¯ç”±äºæŸäº›åŸå› å·²ç»é‡æ–°å¯åŠ¨ï¼Œæ­¤æ—¶å¦ä¸€ç«¯å¹¶ä¸çŸ¥é“å¯¹ç«¯å‘ç”Ÿäº†å¼‚å¸¸ï¼Œå†ç”¨æ—§çš„è¿æ¥å‘é€æ•°æ®æ—¶å°±ä¼šæ”¶åˆ°RSTæŠ¥æ–‡ã€‚ å››.ä»å®è·µä¸­éªŒè¯ç†è®ºè¯´äº†è¿™ä¹ˆå¤šç†è®ºï¼Œç†è®ºéƒ¨åˆ†æˆ‘ä»¬å·²ç»ä»‹ç»äº†å¾ˆå¤šï¼Œè¶³å¤Ÿç†è§£TCPçš„é€šä¿¡è¿‡ç¨‹ã€‚ä¸‹é¢æˆ‘ä»¬å¯ä»¥é€šè¿‡å®è·µæ¥éªŒè¯ä¸‹ã€‚ é¦–å…ˆå¯ä»¥æœ¬åœ°ç¼–å†™ä¸¤ä¸ªç®€å•çš„SocketæœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯ç¨‹åºã€‚å…³äºç¤ºä¾‹ç¨‹åºï¼Œæˆ‘ä»¬åœ¨å‰é¢çš„HTTPä¸€æ–‡ä¸­å·²ç»æœ‰ä»‹ç»ï¼Œç›´æ¥ä½¿ç”¨ä¹‹å‰çš„é‚£äº›ç¤ºä¾‹ç¨‹åºå³å¯ã€‚ä½¿ç”¨WiresharkæŠ“å–æœ¬åœ°çš„TCPæŠ¥æ–‡ï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯å®Œæ•´çš„TCPé€šä¿¡æŠ¥æ–‡å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š æˆ‘ä»¬ç¨‹åºæ‰€ç¼–å†™çš„ä¸šåŠ¡é€»è¾‘å¦‚ä¸‹ï¼š 1.å®¢æˆ·ç«¯ç«¯å£å·ä¸º52079ã€‚ 2.æœåŠ¡ç«¯ç«¯å£å·ä¸º9001ã€‚ 3.ç”±å®¢æˆ·ç«¯å…ˆå‘èµ·TCPå»ºè¿ã€‚ 4.ç”±å®¢æˆ·ç«¯å‘é€â€TCP Customerâ€œæ•°æ®åˆ°æœåŠ¡ç«¯ã€‚ 5.æœåŠ¡ç«¯æ¥æ”¶åˆ°å®¢æˆ·ç«¯å‘é€çš„æ•°æ®åï¼Œå‘é€â€Hello Worldâ€œæ•°æ®ç»™å®¢æˆ·ç«¯ï¼Œä¹‹åå‘èµ·å…³é—­è¿æ¥ã€‚ 6.å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡ç«¯è¿”å›çš„æ•°æ®åï¼Œå…³é—­è¿æ¥ã€‚ åœ¨è¿™ä¸€é€šä¿¡è¿‡ç¨‹ä¸­ï¼Œäº§ç”Ÿäº†12ä¸ªTCPæŠ¥æ–‡ï¼Œæˆ‘ä»¬å¯ä»¥é€ä¸ªåˆ†æä¸‹ã€‚ ç¬¬1ä¸ªæŠ¥æ–‡æ•°æ®å¦‚ä¸‹ï¼š å¯ä»¥çœ‹åˆ°ï¼Œæ­¤æŠ¥æ–‡æ˜¯SYNç±»å‹çš„å»ºè¿æŠ¥æ–‡ï¼Œç”±å®¢æˆ·ç«¯å‘èµ·ï¼ŒSNä¸º3069091127ï¼ŒANä¸º0ã€‚é™¤äº†ä¸€äº›é€‰é¡¹ä¹‹å¤–ï¼Œæ²¡æœ‰åŒ…å«ä»»ä½•ä¸šåŠ¡æ•°æ®ã€‚ ç¬¬2ä¸ªæŠ¥æ–‡æ•°æ®å¦‚ä¸‹ï¼š æ­¤æŠ¥æ–‡æ˜¯ç”±æœåŠ¡ç«¯å‘èµ·çš„AckæŠ¥æ–‡ï¼ŒåŒæ—¶ä¹Ÿæ˜¯æœåŠ¡ç«¯çš„SYNå»ºè¿æŠ¥æ–‡ã€‚æ­¤æŠ¥æ–‡çš„ANä¸º3069091128ï¼ŒSNä¸º3416281738ã€‚ ç¬¬3ä¸ªæŠ¥æ–‡æ•°æ®å¦‚ä¸‹ï¼š æ­¤æŠ¥æ–‡ç”±å®¢æˆ·ç«¯å‘å‡ºï¼Œç±»å‹ä¸ºACKï¼ŒSNä¸º3069091128ï¼ŒANä¸º3416281739ã€‚å¯ä»¥çœ‹åˆ°SNå·²ç»å¢åŠ äº†ï¼Œä¸ç¬¬2ä¸ªæŠ¥æ–‡çš„ANæ˜¯å¯¹åº”çš„ã€‚ ç¬¬4ä¸ªæŠ¥æ–‡æ•°æ®å¦‚ä¸‹ï¼š æ­¤æŠ¥æ–‡ç±»å‹ä¸ºACKï¼Œå®ƒæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æŠ¥æ–‡ï¼Œå¯ä»¥çœ‹åˆ°å…¶æœ‰æœåŠ¡ç«¯å‘é€ç»™å®¢æˆ·ç«¯ï¼ŒWindowå­—æ®µå€¼ä¸º6379ï¼Œè¿™ä¸ªæŠ¥æ–‡çš„ç”¨é€”æ˜¯æŒ‡å®šç¼“å­˜å¤§å°ã€‚æ­¤æŠ¥æ–‡çš„ANä¸º3069091128ï¼ŒSNä¸º3416281739ã€‚SNä¸ç¬¬3ä¸ªæŠ¥æ–‡çš„ANç›¸å¯¹åº”ã€‚ ç¬¬5ä¸ªæŠ¥æ–‡æ•°æ®å¦‚ä¸‹ï¼š æ­¤æŠ¥æ–‡ç”±å®¢æˆ·ç«¯å‘å‡ºï¼Œç±»å‹ä¸ºPSHï¼Œå³å®ƒæ˜¯ä¸€ä¸ªæ•°æ®ä¼ è¾“æŠ¥æ–‡ï¼Œä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œå…¶å†…å®¹å¸¦äº†12ä¸ªå­—èŠ‚çš„ä¸šåŠ¡æ•°æ®ï¼Œè¿™12ä¸ªå­—èŠ‚çš„æ•°æ®å³æ˜¯â€TCP Customerâ€œã€‚SNä¸º3069091128ï¼ŒANä¸º3416281739ã€‚ ç¬¬6ä¸ªæŠ¥æ–‡ä¸ºï¼š æ­¤æŠ¥æ–‡ä¸ºæœåŠ¡ç«¯å‘å‡ºçš„ACKæŠ¥æ–‡ï¼Œç”¨æ¥ç¡®è®¤å®¢æˆ·ç«¯å‘å‡ºçš„12ä¸ªå­—èŠ‚çš„æ•°æ®ï¼Œå…¶ANä¸º3069091140ï¼ŒSNä¸º3416281739ã€‚ ç¬¬7ä¸ªæŠ¥æ–‡å¦‚ä¸‹ï¼š å¯ä»¥çœ‹åˆ°ï¼Œè¿™ç¬¬7ä¸ªæŠ¥æ–‡å³æ˜¯æœåŠ¡ç«¯ä¸»åŠ¨ç»™å®¢æˆ·ç«¯å‘çš„æ•°æ®æŠ¥æ–‡ï¼Œå…¶æ•°æ®éƒ¨åˆ†é•¿åº¦ä¸º13ä¸ªå­—èŠ‚ï¼Œå³â€HelloWorld!\\r\\nâ€ã€‚å…¶ANä¸º3069091140ï¼ŒSNä¸º3416281739ã€‚ ç¬¬8ä¸ªæŠ¥æ–‡å¦‚ä¸‹ï¼š æ­¤æŠ¥æ–‡ä¸ºå®¢æˆ·ç«¯å›æ‰§çš„ACKæŠ¥æ–‡ï¼ŒSNä¸º3069091140ï¼ŒANä¸º3416281752ã€‚ ç¬¬9åˆ°ç¬¬12ä¸ªæŠ¥æ–‡ä¸ºTCPæ–­å¼€è¿æ¥çš„4ä¸ªæŠ¥æ–‡ï¼ŒSNä¸ANçš„é€»è¾‘ä¸å»ºè¿ç±»ä¼¼ï¼Œè¿™é‡Œä¸å†åˆ†æã€‚ äº”.ç»“å°¾ä½ å¯èƒ½å‘ç°äº†ï¼Œé™¤äº†åˆå§‹å»ºè¿æŠ¥æ–‡ï¼Œæ¯ä¸ªTCPæŠ¥æ–‡éƒ½æœ‰ACKç±»å‹ï¼Œè¿™æ˜¯å› ä¸ºACKä½éƒ½è¢«ç½®ä¸º1å¹¶æ— é¢å¤–çš„æ•°æ®å’Œæ€§èƒ½æ¶ˆè€—ã€‚å…¶å®æœ¬æ–‡åªæ˜¯ä»ç†è§£å±‚é¢ä»‹ç»äº†TCPåè®®ï¼Œè‹¥è¦å°†TCPè®²å®Œæ•´ï¼Œéœ€è¦ä¸€æœ¬ä¹¦çš„åšåº¦ä¹Ÿä¸ä¸ºè¿‡ã€‚ç›¸ä¿¡å¦‚æœä½ ä¹‹å‰å¯¹æ—¥å¸¸å¤©å¤©ä½¿ç”¨çš„ç½‘ç»œæŠ€æœ¯å¹¶ä¸ç†è§£ï¼Œå¹¶ä¸”ä»æœ¬ç³»åˆ—åšå®¢çš„é¦–ç¯‡é˜…è¯»åˆ°æ­¤ï¼Œé‚£ä¹ˆä»åº”ç”¨ä¸Šæ¥è®²ï¼Œä½ ä¸€å®šæœ‰äº†æ›´æ·±ä¸€å±‚çš„ç†è§£ã€‚åé¢æˆ‘ä»¬å°†ç»§ç»­å‘ä¸‹ï¼Œè®¨è®ºç½‘ç»œå±‚çš„åè®®ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQï¼š316045346","categories":[{"name":"ç½‘ç»œæŠ€æœ¯","slug":"ç½‘ç»œæŠ€æœ¯","permalink":"http://huishao.cc/categories/ç½‘ç»œæŠ€æœ¯/"}],"tags":[],"keywords":[{"name":"ç½‘ç»œæŠ€æœ¯","slug":"ç½‘ç»œæŠ€æœ¯","permalink":"http://huishao.cc/categories/ç½‘ç»œæŠ€æœ¯/"}]},{"title":"ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ23ï¼‰â€”â€”DHT11æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨å®è·µ","slug":"441ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ23ï¼‰â€”â€”DHT11æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨å®è·µ","date":"2021-12-24T16:00:00.000Z","updated":"2021-12-25T12:18:21.128Z","comments":true,"path":"2021/12/25/441ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ23ï¼‰â€”â€”DHT11æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨å®è·µ/","link":"","permalink":"http://huishao.cc/2021/12/25/441ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ23ï¼‰â€”â€”DHT11æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨å®è·µ/","excerpt":"","text":"ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ23ï¼‰â€”â€”DHT11æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨å®è·µä¸€. å¼•è¨€DHT11æ˜¯ä¸€æ¬¾å¼ºå¤§çš„å¤åˆä¼ æ„Ÿå™¨ï¼Œæ”¯æŒç¯å¢ƒæ¸©åº¦å’Œæ¹¿åº¦çš„æµ‹é‡ã€‚å…¶æœ¬èº«æ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯ç”±äºå…¶é‡‡ç”¨ä¸²è¡Œæ—¶åºçš„æ–¹å¼è¿›è¡Œæ•°æ®è¯»å†™ï¼Œéå¸¸é€‚åˆæˆ‘ä»¬ç»ƒä¹ æ—¶åºç¼–ç¨‹ã€‚æœ¬æ¬¡å®éªŒæˆ‘ä»¬ä½¿ç”¨çš„ä¼ æ„Ÿå™¨æ¨¡å—å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ å¯ä»¥çœ‹åˆ°ï¼Œæ­¤ä¼ æ„Ÿå™¨æ¨¡å—æœ‰3ä¸ªå¼•è„šï¼Œé™¤äº†ç”µæºå’Œæ¥åœ°å¼•è„šå¤–ï¼Œåªæœ‰ä¸€ä¸ªoutå¼•è„šç”¨æ¥è¾“å‡ºæ•°æ®å’Œä¼ è¾“æ§åˆ¶æŒ‡ä»¤ã€‚ä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç»ä¸‹å¦‚ä½•ä½¿ç”¨æ­¤ä¼ æ„Ÿå™¨æ¨¡å—ã€‚ äºŒ. å…³äºDHT11ä¼ æ„Ÿå™¨æ¨¡å—ç”±äºDHT11ä¼ æ„Ÿå™¨å…ƒä»¶åªæœ‰ä¸€ä¸ªé€šä¿¡å¼•è„šï¼Œå› æ­¤å…¶è¾“å…¥å’Œè¾“å‡ºéƒ½éœ€è¦ä½¿ç”¨åŒä¸€ä¸ªå¼•è„šã€‚å³æ­¤å¼•è„šæ˜¯ä¸€ä¸ªä¸²è¡Œçš„å•çº¿åŒå‘å¼•è„šã€‚æ‰€è°“å•çº¿åŒå‘æ˜¯æŒ‡å…¶åªæœ‰ä¸€æ¡ä¿¡å·ä¼ è¾“çº¿ï¼Œä½†æ˜¯å¯ä»¥åŒå‘é€šä¿¡ã€‚è¿™æœ‰äº›åƒæˆ‘ä»¬ä½¿ç”¨çš„å¯¹è®²æœºï¼Œä¸€æ–¹è¯´è¯æ—¶å¦ä¸€æ–¹åªèƒ½å¬ã€‚DHT11çš„å®Œæ•´ä½¿ç”¨æ‰‹å†Œåœ°å€å¦‚ä¸‹ï¼š https://www.dfrobot.com.cn/image/data/DFR0067/DFR0067_DS_10.pdf é¦–å…ˆæˆ‘ä»¬å…ˆæ¥çœ‹DHT11æ‰€ä¼ è¾“çš„ä¿¡æ¯æ•°æ®çš„æ ¼å¼ã€‚æ ¹æ®æ–‡æ¡£ä»‹ç»ï¼ŒDHT11ä¸€æ¬¡å®Œæ•´çš„é€šä¿¡å°†ä¼ é€’40ä½æ•°æ®ï¼Œè¿™40ä½æ•°æ®åŒ…å«äº†æ¸©åº¦ï¼Œæ¹¿åº¦å’Œç”¨äºæ ¡éªŒæ­£ç¡®æ€§çš„æ•°æ®ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åœ¨è¯»å–DHT11çš„æ•°æ®æ—¶ï¼Œè¦å®Œæ•´çš„è¯»å‡º40ä½æ•°æ®åå†è¿›è¡Œè®¡ç®—ã€‚è¿™40ä½æ•°æ®çš„å…·ä½“æ ¼å¼ä¸ºï¼š [8bitçš„æ¹¿åº¦æ•´æ•°éƒ¨åˆ†æ•°æ®]+[8bitçš„æ¹¿åº¦å°æ•°éƒ¨åˆ†æ•°æ®]+[8bitçš„æ¸©åº¦æ•´æ•°éƒ¨åˆ†æ•°æ®]+[8bitçš„æ¸©åº¦å°æ•°éƒ¨åˆ†æ•°æ®]+8bitæ ¡éªŒæ•°æ® å…¶ä¸­[8bitçš„æ¹¿åº¦æ•´æ•°éƒ¨åˆ†æ•°æ®]ä¸[8bitçš„æ¹¿åº¦å°æ•°éƒ¨åˆ†æ•°æ®]ä¸[8bitçš„æ¸©åº¦æ•´æ•°éƒ¨åˆ†æ•°æ®]ä¸[8bitçš„æ¸©åº¦å°æ•°éƒ¨åˆ†æ•°æ®]çš„å’Œç»“æœåº”ä¸º8bitçš„æ ¡éªŒæ•°æ®ï¼Œå¦‚æœç»“æœä¸ç­‰åˆ™è¡¨æ˜æ­¤æ¬¡è·å–çš„æ•°æ®å‡ºç°å¼‚å¸¸ï¼Œåº”è¯¥æŠ›å¼ƒæ‰é‡æ–°è·å–ã€‚ ä»ä¼ æ„Ÿå™¨æ‹¿åˆ°çš„æ•°æ®æ ¼å¼æœ¬èº«æ¯”è¾ƒç®€å•ï¼Œæ¯”è¾ƒå¤æ‚çš„ç‚¹åœ¨äºå…¶é€šä¿¡è¿‡ç¨‹ã€‚æ•´ä½“æ¥è¯´ï¼Œæ ‘è“æ´¾ä¸DHT11ä¼ æ„Ÿå™¨çš„é€šä¿¡è¿‡ç¨‹åˆ†ä¸º3ä¸ªé˜¶æ®µï¼š 1. æ ‘è“æ´¾å‘å‡ºå¼€å§‹ä¿¡å·ï¼Œä¹‹åå¼€å§‹ç­‰å¾…ä¼ æ„Ÿå™¨æ¨¡å—çš„åº”ç­”ã€‚ 2.ä¼ æ„Ÿå™¨æ¨¡å—æ”¶åˆ°æ ‘è“æ´¾å‘å‡ºçš„å¼€å§‹ä¿¡å·åï¼Œè¿”å›åº”ç­”ä¿¡å·ã€‚ 3.æ ‘è“æ´¾æ¥æ”¶åˆ°åº”ç­”ä¿¡å·åï¼Œå¼€å§‹è¿›è¡Œ40ä½æ•°æ®çš„æ¥æ”¶ã€‚ æ•´ä½“çš„é€šä¿¡è¿‡ç¨‹æ‰‹å†Œä¸­æœ‰æä¾›ä¸€å¼ ç¤ºæ„å›¾ï¼Œå¦‚ä¸‹ï¼š é€šç”µåï¼Œä¼ æ„Ÿå™¨æ¨¡å—çš„æ€»çº¿å°†å§‹ç»ˆå¤„äºç©ºé—²çŠ¶æ€æˆ–é€šä¿¡çŠ¶æ€ä¸­çš„ä¸€ç§çŠ¶æ€ä¸‹ã€‚å®šä¹‰å½“ç©ºé—²çŠ¶æ€æ—¶ï¼Œæ€»çº¿è¾“å…¥é«˜ç”µå¹³ã€‚å¯¹äºä¸Šé¢é€šä¿¡è¿‡ç¨‹ä¸­çš„ç¬¬1ä¸ªé˜¶æ®µï¼Œæ ‘è“æ´¾å…ˆå°†æ€»çº¿ç”µå¹³æ‹‰ä½ï¼Œä¸”å¿…é¡»å¤§äº18æ¯«ç§’ä»¥è®©ä¼ æ„Ÿå™¨æ¨¡å—æ£€æµ‹åˆ°æ­¤æ‹‰ä½çš„ä¿¡å·ã€‚ä¹‹åæ ‘è“æ´¾å†å°†æ€»çº¿æ‹‰é«˜ï¼Œè¡¨ç¤ºæ ‘è“æ´¾å·²ç»å‘å‡ºäº†ä¸€æ¬¡å¼€å§‹é€šä¿¡ä¿¡å·ï¼Œ1é˜¶æ®µç»“æŸã€‚ ä¼ æ„Ÿå™¨æ¨¡å—æ£€æµ‹åˆ°æ ‘è“æ´¾å‘èµ·çš„å¼€å§‹ä¿¡å·åï¼Œæ­¤æ—¶æ€»çº¿ç”µå¹³ä¸ºè¢«æ ‘è“æ´¾æ‹‰é«˜çŠ¶æ€ã€‚ä¼ æ„Ÿå™¨æ¨¡å—é€šè¿‡æ€»çº¿å‘é€80å¾®ç§’çš„ä½ç”µå¹³ä¿¡å·ï¼Œè¡¨ç¤ºå“åº”äº†æ ‘è“æ´¾çš„å¼€å§‹ä¿¡å·ï¼Œä¹‹åä¼ æ„Ÿå™¨æ¨¡å—ä¼šå°†æ€»çº¿ç”µå¹³å†æ‹‰é«˜80å¾®å¦™ï¼Œæç¤ºæ ‘è“æ´¾å‡†å¤‡å¼€å§‹æ¥æ”¶æ•°æ®ï¼Œ2é˜¶æ®µç»“æŸã€‚ é˜¶æ®µ1å’Œé˜¶æ®µ2çš„æ›´è¯¦ç»†ç¤ºæ„å›¾å¦‚ä¸‹ï¼š 3é˜¶æ®µä¸ºä¼ æ„Ÿå™¨æ¨¡å—å‘é€æ•°æ®ï¼Œæ ‘è“æ´¾æ¥æ”¶æ•°æ®çš„é˜¶æ®µã€‚æ¯ä¸€ä½æ•°æ®çš„å‘é€æœ‰0å’Œ1ä¸¤ç§çŠ¶æ€ï¼Œä¼ æ„Ÿå™¨æ¯å‘é€50å¾®å¦™çš„ä½ç”µå¹³ä¿¡å·å³è¡¨ç¤ºè¦è¿›è¡Œ1bitæ•°æ®çš„ä¼ è¾“ï¼Œä¹‹åå¦‚æœä¼ æ„Ÿå™¨å‘é€äº†26å¾®ç§’åˆ°28å¾®ç§’çš„é«˜ç”µå¹³ï¼Œåˆ™è¡¨ç¤ºå‘é€æ•°æ®ä½0ï¼Œå¦‚æœå‘é€äº†70å¾®ç§’çš„é«˜ç”µå¹³åˆ™è¡¨ç¤ºå‘é€æ•°æ®ä½1ã€‚ä¹‹åå†è¿›è¡Œä¸‹ä¸€ä½æ•°æ®çš„å‘é€ã€‚åœ¨å®é™…ç¼–ç¨‹æ“ä½œæ—¶ï¼Œæˆ‘ä»¬å¯èƒ½ä¸å¤ªå¥½ç²¾å‡†çš„æµ‹é‡é«˜ç”µå¹³çš„æ—¶é—´ï¼Œä½†æ˜¯ç”±äºæ•°æ®ä½0å’Œæ•°æ®ä½1çš„é«˜ç”µå¹³æ—¶é—´ç›¸å·®å¾ˆå¤šï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æµ‹è¯•å¾ªç¯å˜é‡çš„è®¡æ•°æ¥å¤§è‡´å¾—åˆ°ä¸€ä¸ªä¼ è¾“æ•°æ®0æ—¶çš„å¤§è‡´å¾ªç¯æ¬¡æ•°å’Œä¼ è¾“æ•°æ®1æ—¶çš„å¤§è‡´å¾ªç¯æ¬¡æ•°ï¼Œé€šè¿‡å¾ªç¯æ¬¡æ•°æ¥åˆ¤æ–­æ•°æ®å…·ä½“æ˜¯0è¿˜æ˜¯1ã€‚ æ•°æ®ä½0çš„ä¿¡å·ç¤ºæ„å›¾å¦‚ä¸‹ï¼š æ•°æ®ä½1çš„ä¿¡å·ç¤ºæ„å›¾å¦‚ä¸‹ï¼š éœ€è¦æ³¨æ„ï¼Œæ¯æ¬¡æµ‹é‡çš„æ—¶é—´é—´éš”æœ€å¥½å¤§äº1ç§’ï¼Œä¸”ä¸Šç”µåç­‰å¾…1ç§’ç¨³å®šå†è¿›è¡Œæµ‹é‡ã€‚ å¦‚æœæ²¡æœ‰æ¥è§¦è¿‡å…ƒä»¶å•æ€»çº¿æ—¶åºç¼–ç¨‹ï¼Œä¸Šé¢çš„æ–‡å­—æè¿°ï¼Œæ€»çš„æ¥è¯´è¿˜æ˜¯æœ‰äº›æŠ½è±¡ï¼Œä¸‹é¢æˆ‘ä»¬ä¼šé€šè¿‡ä»£ç æ¥å®è·µã€‚ ä¸‰. è¿çº¿ç¼–ç DHT11ä¼ æ„Ÿå™¨æ¨¡å—åªæœ‰3ä¸ªå¼•è„šï¼Œä¸­é—´çš„outå¼•è„šæˆ‘ä»¬å¯ä»¥é€‰æ‹©ä»»æ„ä¸€ä¸ªæ ‘è“æ´¾é¢GPIOå¼•è„šæ¥è¿æ¥ï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹©ç‰©ç†ç¼–ç ä¸º11çš„GPIOå¼•è„šã€‚æŒ‰ç…§ä¸Šé¢æˆ‘ä»¬ä»‹ç»çš„DHT11æ¨¡å—çš„ä½¿ç”¨æ–¹æ³•ï¼Œç¼–å†™ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135#coding:utf-8import RPi.GPIO as GPIOimport timeimport math# ä½¿ç”¨ç‰©ç†ç¼–ç ä¸º11çš„å¼•è„šåšæ€»çº¿P = 11GPIO.setmode(GPIO.BOARD)print(\"å¼€å§‹è¿›è¡ŒDHT11æµ‹é‡æ•°æ®è·å–\\n\")# ç­‰å¾…1såå†è¿›è¡Œé€»è¾‘time.sleep(1)def readData(): print(\"readData\") # å…ˆå°†æ€»çº¿å¼•è„šè®¾ç½®ä¸ºè¾“å‡ºæ¨¡å¼ GPIO.setup(P, GPIO.OUT) # å°†æ€»çº¿ç”µå¹³æ‹‰ä½ï¼Œå‘å‡ºå¼€å§‹ä¿¡å· GPIO.output(P, GPIO.LOW) # æ‰‹å†Œè¦æ±‚è‡³å°‘ä¿æŒ18msçš„ä½ç”µå¹³ï¼Œæˆ‘ä»¬è¿™é‡Œä¿æŒ20ms time.sleep(0.02) # æ‹‰é«˜ç”µå¹³ GPIO.output(P, GPIO.HIGH) # ä¹‹åå°†å¼•è„šè®¾ä¸ºè¾“å…¥æ¨¡å¼ï¼Œç­‰å¾…ä¼ æ„Ÿå™¨å“åº” GPIO.setup(P, GPIO.IN) # å…ˆç­‰å¾…80usçš„ä½ç”µå¹³ä¿¡å· while GPIO.input(P) == GPIO.LOW: continue # å†ç­‰å¾…80usçš„é«˜ç”µå¹³ä¿¡å· while GPIO.input(P) == GPIO.HIGH: continue # å¼€å§‹æ¥æ”¶æ•°æ® # å¾ªç¯è®¡æ•° i = 0 # å­˜æ”¾äºŒè¿›åˆ¶ä½æ•°æ® data = [] # å­˜æ”¾ä¸­é—´æ•°æ® kdata = [] # æ¯æ¬¡è¯»å–40ä½æ•°æ® while i &lt; 40: j = 0 # 50usçš„ä½ç”µå¹³è¡¨ç¤ºå‡†å¤‡ä¼ è¾“ä¸€ä½æ•°æ® while GPIO.input(P) == GPIO.LOW: continue # å¼€å§‹æ£€æµ‹é«˜ç”µå¹³çš„æ—¶é—´ while GPIO.input(P) == GPIO.HIGH: j+=1 if j &gt; 100: return [False, 0, 0] kdata.append(j) i+=1 print(\"--------ä¸´æ—¶æ•°æ®----------\\n\") print(kdata) print(\"--------ä¸´æ—¶æ•°æ®----------\\n\") # å¼€å§‹æ•´ç†æ•°æ® i = 0 while i &lt; 40: tmp = kdata[i] if tmp &gt; 7: data.append(1) else: data.append(0) i+=1 print(\"--------ä¸´æ—¶æ•°æ®2----------\\n\") print(data) print(\"--------ä¸´æ—¶æ•°æ®2----------\\n\") # è§£ææ¹¿åº¦æ•´æ•°éƒ¨åˆ† t1 = data[0:8] c1 = 0 i = 7 for n in t1: c1 += n * math.pow(2, i) i-=1 # è§£ææ¹¿åº¦æ•´æ•°éƒ¨åˆ† t2 = data[8:16] c2 = 0 i = 7 for n in t2: c2 += n * math.pow(2, i) i-=1 # è§£ææ¸©åº¦æ•´æ•°éƒ¨åˆ† t3 = data[16:24] c3 = 0 i = 7 for n in t3: c3 += n * math.pow(2, i) i-=1 # è§£ææ¸©åº¦æ•´æ•°éƒ¨åˆ† t4 = data[24:32] c4 = 0 i = 7 for n in t4: c4 += n * math.pow(2, i) i-=1 # è§£ææ ¡éªŒ t5 = data[32:40] c5 = 0 i = 7 for n in t5: c5 += n * math.pow(2, i) i-=1 # è¿›è¡Œæ ¡éªŒ va = True print(\"c1:%d\\n2c:%d\\n3c:%d\\n4c:%d\\n5:%d\\n\"%(c1,c2,c3,c4,c5)) if c1 + c2 + c3 +c4 == c5: va = True else: va = False return [va, \"%d.%d\"%(c1, c2), \"%d.%d\"%(c3, c4)]while True: time.sleep(1) result = readData() if result[0]: hum = result[1] temp = result[2] print(\"å½“å‰ç¯å¢ƒæ¹¿åº¦ï¼š %s %%, å½“å‰ç¯å¢ƒæ¸©åº¦ï¼š%sâ„ƒ\\n\" % (hum, temp)) else: print(\"æ­¤æ¬¡æ•°æ®æ— æ•ˆï¼Œå·²è¢«ä¸¢å¼ƒ\\n\") time.sleep(1) ä¸Šé¢ä»£ç ä¸­æœ‰æ¯”è¾ƒè¯¦ç»†çš„æ³¨é‡Šï¼Œæœ‰äº›åœ°æ–¹æˆ‘ä»¬è¿˜æ˜¯å¯ä»¥å†è§£é‡Šä¸€ä¸‹ã€‚é¦–å…ˆï¼Œæ ‘è“æ´¾å‘å‡ºå¼€å§‹æŒ‡ä»¤çš„è¿‡ç¨‹æ¯”è¾ƒç®€å•ï¼Œæ— éœ€è¿‡å¤šè§£é‡Šã€‚éº»çƒ¦ä¹‹å¤„åœ¨äºå¾ªç¯40æ¬¡æ¥è·å–40ä½çš„äºŒè¿›åˆ¶æ•°æ®ã€‚åœ¨è·å–æ•°æ®æ—¶ï¼Œæˆ‘ä»¬é‡‡ç”¨å¾ªç¯å˜é‡æ¥è®°å½•é«˜ç”µå¹³çš„æ—¶é—´æ¯”ä¾‹ï¼Œä»è€Œå¯ä»¥åˆ†æå‡ºä¼ è¾“çš„æ•°æ®æ˜¯0è¿˜æ˜¯1ã€‚éœ€è¦æ³¨æ„ï¼Œä¸åŒçš„è®¾å¤‡å¯èƒ½å¾ªç¯ä¸€æ¬¡çš„æ—¶é—´å¹¶ä¸å®Œå…¨ç›¸åŒï¼Œæˆ‘ä»¬å¯ä»¥å…ˆæµ‹è¯•ä¸‹ä¸Šé¢ä»£ç ä¸­kdataå˜é‡å­˜å‚¨çš„æ•°æ®ï¼Œè¿è¡Œä»£ç å¦‚ä¸‹å›¾ï¼š å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœæ˜¯ä¼ è¾“æ•°æ®0ï¼Œå¾ªç¯è®¡æ•°åŸºæœ¬æ˜¯åœ¨3æˆ–è€…4ã€‚è€Œå¦‚æœä¼ è¾“çš„æ˜¯æ•°æ®1ï¼Œåˆ™å¾ªç¯è®¡æ•°åœ¨11å·¦å³ã€‚ä»£ç ä¸­æˆ‘ä»¬ä»¥7ä¸ºåˆ†å‰²ï¼Œåˆ†ææ—¶ï¼Œå¾ªç¯è®¡æ•°å¤§äº7æ—¶å°±è®¤ä¸ºå½“å‰ä¼ è¾“æ•°æ®1ï¼Œå¦åˆ™ä¸º0ã€‚ è·å–åˆ°äº†å®Œæ•´çš„40ä½äºŒè¿›åˆ¶æ•°æ®åï¼Œå°†å…¶è½¬æ¢ä¸ºæ•°å€¼è¿›è¡Œæ ¡éªŒå³å¯ã€‚æœ€ç»ˆä»£ç è¿è¡Œæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œæ‡‚çš„çƒ­çˆ±ï¼Œæ„¿æ„åˆ†äº«ï¼Œåšä¸ªæœ‹å‹ QQï¼š316045346","categories":[{"name":"Linux","slug":"Linux","permalink":"http://huishao.cc/categories/Linux/"}],"tags":[],"keywords":[{"name":"Linux","slug":"Linux","permalink":"http://huishao.cc/categories/Linux/"}]},{"title":"è‡ªä¸Šè€Œä¸‹çš„ç†è§£ç½‘ç»œï¼ˆ3ï¼‰â€”â€”HTTPSç¯‡","slug":"440è‡ªä¸Šè€Œä¸‹çš„ç†è§£ç½‘ç»œï¼ˆ3ï¼‰â€”â€”HTTPSç¯‡","date":"2021-12-16T16:00:00.000Z","updated":"2021-12-17T11:25:05.132Z","comments":true,"path":"2021/12/17/440è‡ªä¸Šè€Œä¸‹çš„ç†è§£ç½‘ç»œï¼ˆ3ï¼‰â€”â€”HTTPSç¯‡/","link":"","permalink":"http://huishao.cc/2021/12/17/440è‡ªä¸Šè€Œä¸‹çš„ç†è§£ç½‘ç»œï¼ˆ3ï¼‰â€”â€”HTTPSç¯‡/","excerpt":"","text":"è‡ªä¸Šè€Œä¸‹çš„ç†è§£ç½‘ç»œï¼ˆ3ï¼‰â€”â€”HTTPSç¯‡æœ¬ç³»åˆ—çš„å‰ä¸€ç¯‡åšæ–‡ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†ä¸€ä¸ªå¾ˆå¸¸ç”¨çš„åº”ç”¨å±‚åè®®HTTPï¼Œåœ¨æ—¥å¸¸ç”Ÿæ´»å·¥ä½œä¸­ï¼ŒHTTPåè®®çš„åº”ç”¨å¯è°“æ— å¤„ä¸åœ¨ï¼Œæˆ‘ä»¬æµè§ˆç½‘é¡µï¼Œæˆ‘ä»¬ä½¿ç”¨æ‰‹æœºAppéƒ½ç¦»ä¸å¼€HTTPã€‚é€šè¿‡å‰é¢çš„ä»‹ç»ï¼Œæˆ‘ä»¬ä¹Ÿç†è§£äº†HTTPæœ¬è´¨ä¸Šåªæ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çº¦å®šå¥½çš„ä¸€å¥—é€šä¿¡è§„åˆ™ï¼Œä½¿å¾—å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯èƒ½å¤Ÿç›¸äº’ç†è§£çš„è¿›è¡Œäº¤æµã€‚åœ¨äº’è”ç½‘æ™®åŠçš„å‰æœŸé˜¶æ®µï¼Œç½‘é¡µä¸»è¦ç”¨æ¥å±•ç¤ºå…¬å¼€çš„é™æ€å†…å®¹ï¼ŒHTTPåè®®å¹¶æ²¡æœ‰æ˜æ˜¾çš„ç¼ºé™·ã€‚éšç€äº’è”ç½‘çš„ä¸æ–­å‘å±•ï¼Œäº’è”ç½‘åº”ç”¨è¶Šæ¥è¶Šä¸ªæ€§åŒ–ä¹ŸåŸæ¥è¶Šå¤æ‚ï¼ŒæŸäº›å®‰å…¨æ€§é—®é¢˜å°±å˜å¾—éå¸¸é‡è¦ã€‚HTTPå‘HTTPSæ¼”åŒ–å°±æˆäº†äº’è”ç½‘åº”ç”¨çš„å¿…ç»ä¹‹è·¯ã€‚ ä¸€.HTTPåè®®çš„å®‰å…¨æ€§é—®é¢˜åœ¨è§£å†³é—®é¢˜ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦å…ˆå‘ç°é—®é¢˜ã€‚HTTPåè®®ä»æ ¹æœ¬ä¸Šæœ‰å¦‚ä¸‹3ç§å®‰å…¨é—®é¢˜ï¼š 1. æ•°æ®æ²¡æœ‰åŠ å¯†å›å¿†ä¸‹æˆ‘ä»¬å‰é¢ç¼–å†™çš„å»ºè®®çš„HTTPæœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯ç¨‹åºï¼Œæ•°æ®å…¶å®æ˜¯æ˜æ–‡ä¼ è¾“çš„ï¼ŒHTTPåè®®æœ¬èº«æ²¡æœ‰æ¶‰åŠåˆ°æ•°æ®åŠ å¯†çš„ç›¸å…³å®šä¹‰ã€‚å› æ­¤æˆ‘ä»¬çš„ç½‘ç»œé€šä¿¡æŠ¥æ–‡ä¸€æ—¦ä¸ºæˆªè·ï¼Œç”¨æˆ·çš„éšç§å°±å®Œå…¨æš´éœ²äº†ã€‚è€Œåœ¨äº’è”ç½‘ç¯å¢ƒä¸­ï¼Œè¦æˆªè·æ•°æ®å®åœ¨æ˜¯éå¸¸å®¹æ˜“çš„ä¸€ä»¶äº‹ï¼Œè¿è¥å•†å¯ä»¥åšåˆ°ï¼Œä»£ç†æœåŠ¡å™¨å¯ä»¥åšåˆ°ï¼Œæ•°æ®ä¼ è¾“ä¸­çš„å„ä¸ªè·¯ç”±èŠ‚ç‚¹è®¾å¤‡ä¹Ÿå¯ä»¥åšåˆ°ï¼Œç”šè‡³å®¢æˆ·ç«¯çš„æ¶æ„ç¨‹åºä¹Ÿå¯ä»¥åšåˆ°ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœä½ ä½¿ç”¨çš„æ˜¯ä¸€ä¸ªç½‘ä¸Šé“¶è¡Œçš„äº’è”ç½‘åº”ç”¨ï¼Œä½ çš„é“¶è¡Œè´¦å·å¯†ç åœ¨äº’è”ç½‘ä¸­è¢«çª¥è§†çš„ä¸€æ¸…äºŒæ¥šï¼Œæ˜¯ä¸æ˜¯ä¸€ä»¶éå¸¸ææ€–çš„äº‹æƒ…ã€‚å½“ç„¶ï¼Œå¦‚æœæˆ‘ä»¬çš„å®¢æˆ·ç«¯åº”ç”¨æ˜¯é…å¥—çš„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨HTTPåè®®ä¹‹ä¸Šçº¦å®šä¸€ç§åŠ å¯†ç®—æ³•ï¼Œä¼ è¾“æ•°æ®æ—¶æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯æŒ‰ç…§åŒæ ·çš„è§„åˆ™åŠ å¯†è§£å¯†æ¥ä¿è¯æ•°æ®å®Œå…¨ï¼ˆå®é™…ä¸Šå¾ˆå¤šç§»åŠ¨ç«¯åº”ç”¨çš„æ¥å£æœåŠ¡æ˜¯è¿™æ ·åšçš„ï¼‰ã€‚ä½†æ˜¯è¿™ä¾ç„¶æœ‰å¾ˆå¤šé—®é¢˜ï¼Œé¦–å…ˆæµè§ˆå™¨æ˜¯ç¬¬ä¸‰æ–¹çš„ï¼Œç§æœ‰çš„åŠ å¯†åè®®æ— æ³•ç”¨äºæµè§ˆå™¨åº”ç”¨ï¼Œå…¶æ¬¡å®¢æˆ·ç«¯çš„åŠ å¯†ç®—æ³•å¦‚æœè¢«ç ´è§£ï¼Œç ´è§£è€…å°±å¯ä»¥ç”¨åŒæ ·çš„æ–¹å¼ç ´è§£æ‰€æœ‰æ‹¦æˆªåˆ°çš„æ•°æ®ï¼Œä¾ç„¶ä¼šäº§ç”Ÿå®‰å…¨æ€§é—®é¢˜ã€‚ 2. æ— æ³•éªŒè¯å¯¹æ–¹çš„èº«ä»½HTTPæ˜¯åŸºäºTCP/IPåè®®çš„åº”ç”¨å±‚åè®®ï¼ŒTCPåè®®è¦ä¿è¯çš„æ˜¯åŒæ–¹æ­£ç¡®å®Œæ•´çš„ä¼ è¾“æ•°æ®ï¼Œä½†æ˜¯å¹¶ä¸èƒ½éªŒè¯å¯¹æ–¹çš„èº«ä»½ã€‚ä¾‹å¦‚æˆ‘ä»¬åœ¨è®¿é—®huishao.ccè¿™ä¸ªç½‘ç«™æ—¶ï¼Œä»»ä½•ä¸€ä¸ªä¸­é—´èŠ‚ç‚¹æ¥æ”¶åˆ°æ­¤HTTPè¯·æ±‚åéƒ½å¯ä»¥ä¸è½¬å‘è€Œç›´æ¥è¿”å›é”™è¯¯çš„æ•°æ®ï¼Œè€Œå®¢æˆ·ç«¯æ”¶åˆ°æ•°æ®åï¼Œè¿˜è®¤ä¸ºæ˜¯huishao.ccè¿”å›çš„ï¼Œå®¢æˆ·ç«¯æ ¹æœ¬æ— æ³•åˆ¤æ–­è¿”å›æ•°æ®çš„å¯¹æ–¹æ˜¯è°ï¼Œä¹Ÿæ— æ³•çŸ¥é“è¿”å›çš„æ•°æ®æ˜¯å¦æ˜¯çœŸçš„ã€‚å¯¹åº”äºé“¶è¡Œä¸šåŠ¡ï¼Œä½ çš„ä½™é¢ä¿¡æ¯å¯èƒ½è¢«ä»»ä½•ä¸­é—´äººç¯¡æ”¹ï¼Œå±å®³æå¤§ã€‚åŒæ ·ï¼ŒæœåŠ¡ç«¯åœ¨æ¥æ”¶åˆ°å®¢æˆ·ç«¯çš„è¯·æ±‚æ—¶ï¼Œä¹Ÿæ— æ³•åˆ¤æ–­æ­¤å®¢æˆ·ç«¯æ˜¯å¦æ˜¯æ­£å¸¸åˆæ³•çš„ï¼Œè¿™å°±å¯èƒ½é€ æˆä»»ä½•ä¼ªè£…è€…åªè¦æˆªå–äº†å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå°±å¯ä»¥ä¼ªè£…æˆæ­¤å®¢æˆ·ç«¯ç»§ç»­å’ŒæœåŠ¡ç«¯åšæ›´æ·±å…¥çš„é€šä¿¡ã€‚ 3. æ•°æ®å¯èƒ½è¢«ç¯¡æ”¹è¿™ä¸€ä¸ªé—®é¢˜å®é™…ä¸Šæ˜¯æ•°æ®å®Œæ•´æ€§å’Œä¸€è‡´æ€§çš„é—®é¢˜ã€‚æ— è®ºæ˜¯å®¢æˆ·ç«¯è¿˜æ˜¯æœåŠ¡å™¨ï¼Œåœ¨æ•°æ®å‘å‡ºåéƒ½ä¼šç»è¿‡å¾ˆå¤šä¸­é—´èŠ‚ç‚¹ï¼Œä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹éƒ½å¯èƒ½æ”¹åŠ¨æ•°æ®ä¸­çš„æŸäº›éƒ¨åˆ†ï¼Œè€Œæ¥å—æ–¹æ˜¯å®Œå…¨æ²¡æœ‰æ‰‹æ®µå¯¹æ•°æ®æ˜¯å¦å·²ç»è¢«æ”¹åŠ¨äº†åšæ ¡éªŒçš„ï¼Œå¯¹äºç½‘é¡µåº”ç”¨æ¥è¯´ï¼Œä¸€äº›æ¶æ„è€…å¯ä»¥æ‹¦æˆªåˆ°æ•°æ®åå¯ä»¥åŠ å…¥å„ç§çƒ¦äººçš„å¹¿å‘Šã€‚æ›´ä¸¥é‡ä¸€äº›ï¼Œæ‹¦æˆªè€…å¯èƒ½æ”¹åŠ¨æŸäº›é‡è¦æ•°æ®ä½¿å¾—å®¢æˆ·ç«¯é”™è¯¯çš„ç†è§£äº†æœåŠ¡ç«¯çš„æ„å›¾ï¼Œè€Œå°†å®¢æˆ·ç«¯å¼•å…¥å±å®³æ€§æ›´å¤§çš„æ”»å‡»ç½‘ç«™æˆ–ä¸‹è½½æ”»å‡»ä»£ç ã€‚ äºŒ. é’ˆå¯¹å®‰å…¨æ€§é—®é¢˜çš„è§£å†³æ–¹æ¡ˆæ€è€ƒç»¼ä¸Šæ‰€è¿°ï¼ŒHTTPåè®®åœ¨å®‰å…¨ä¸Šæœ‰3ç§è‡´å‘½çš„ç¼ºé™·ï¼Œå®é™…åº”ç”¨ä¸­ï¼Œè¶Šæ¥è¶Šéœ€è¦ä¸€ç§æ›´åŠ å®‰å…¨ï¼Œä¸”å®Œå…¨å…¼å®¹HTTPåè®®çš„æ–°å‹é€šä¿¡æ–¹å¼ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹å¦‚ä½•è§£å†³è¿™äº›å®‰å…¨é—®é¢˜ã€‚ 1. ä½¿ç”¨åŠ å¯†æ¥ä¿æŠ¤æ˜æ–‡å†…å®¹å¯¹äºæ˜æ–‡ä¼ è¾“æ•°æ®çš„é—®é¢˜ï¼Œæˆ‘ä»¬æƒ³åˆ°çš„æœ€ç®€å•çš„æ–¹å¼æ˜¯å¯¹æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œå¦‚ä½¿ç”¨å¯¹ç§°å¯†é’¥åŠ è§£å¯†ï¼Œæµç¨‹å¦‚ä¸‹ï¼š è¿™ç§å¯¹ç§°å¯†é’¥çš„åŠ å¯†æ–¹å¼æœ‰ä¸¤ä¸ªæ˜æ˜¾çš„é—®é¢˜ï¼Œé¦–å…ˆå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯ä½¿ç”¨çš„å¯†é’¥ç›¸åŒï¼ŒåŸç†ä¸Šç”¨æˆ·Aå¯ä»¥æ‹¿åˆ°å¯†é’¥ï¼Œæ”»å‡»è€…Bä¹Ÿæœ‰åŠæ³•æ‹¿åˆ°æ­¤å¯†é’¥ï¼Œè¿™æ ·å°±å¤±å»äº†åŠ å¯†çš„æ„ä¹‰ã€‚å…¶æ¬¡ï¼Œå³æ˜¯æœåŠ¡ç«¯ä¸ºæ¯ä¸ªå®¢æˆ·ç«¯éƒ½åˆ†é…ä¸åŒçš„ä¸€å¥—ç§é’¥å¯¹ï¼Œç»´æŠ¤èµ·æ¥æ˜¯å¾ˆå›°éš¾çš„ï¼Œè€Œä¸”å®¢æˆ·ç«¯ç¯å¢ƒè´Ÿè´£ï¼Œåœ¨ä¼ è¾“ç§é’¥çš„è¿‡ç¨‹ä¸­æ”»å‡»è€…ä¹Ÿå¯èƒ½å°†ç§é’¥æ‹¦æˆªï¼Œè¿™æ ·åŠ å¯†ä¾ç„¶å¤±å»äº†æ„ä¹‰ã€‚ æ—¢ç„¶å¯¹ç§°åŠ å¯†æœ‰è¿™æ ·çš„é—®é¢˜ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ˜¯å¦å¯ä»¥ä½¿ç”¨éå¯¹ç§°åŠ å¯†å‘¢ï¼Œéå¯¹ç§°åŠ å¯†æµç¨‹å¦‚ä¸‹ï¼š åœ¨éå¯¹ç§°åŠ å¯†ä¸­ï¼Œå¯†é’¥å¯¹åˆ†ä¸ºå…¬é’¥å’Œç§é’¥ï¼Œé¡¾åæ€ä¹‰ï¼Œå…¬é’¥æœ¬èº«æ˜¯å¯ä»¥å…¬å¼€çš„ï¼Œæ‰€æœ‰å®¢æˆ·ç«¯éƒ½å¯ä»¥å¾—åˆ°ï¼Œç§é’¥æ˜¯å­˜åœ¨åœ¨æœåŠ¡å™¨ä¸Šçš„ã€‚ç›¸æ¯”å¯¹ç§°åŠ å¯†ï¼ŒæœåŠ¡ç«¯çš„å®‰å…¨æ€§è¦æ¯”å®¢æˆ·ç«¯é«˜å¾ˆå¤šï¼Œç§é’¥ç›¸å¯¹æ˜¯å®‰å…¨çš„ã€‚ä½†æ˜¯ä½¿ç”¨è¿™ç§éå¯¹ç§°åŠ å¯†çš„æ–¹å¼å¯¹æ•°æ®è¿›è¡Œä¿æŠ¤ä¹Ÿæ˜¯æœ‰å±€é™æ€§çš„ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œåœ¨å®¢æˆ·ç«¯å‘é€æ•°æ®ç»™æœåŠ¡ç«¯æ—¶ï¼Œæ”»å‡»è€…æ²¡æœ‰æœåŠ¡ç«¯çš„ç§é’¥ï¼Œæ­¤æ—¶æ— æ³•è§£å¯†æ•°æ®ã€‚ä½†æ˜¯å½“æœåŠ¡ç«¯ä½¿ç”¨ç§é’¥åŠ å¯†ä¿¡æ¯åè¿”å›ç»™å®¢æˆ·ç«¯æ—¶ï¼Œå°±å¯èƒ½è¢«æ”»å‡»è€…æˆªè·å¹¶ä½¿ç”¨å…¬é’¥è¿›è¡Œè§£å¯†ã€‚ æ—¢ç„¶éå¯¹ç§°åŠ å¯†å’Œå¯¹ç§°åŠ å¯†éƒ½æ— æ³•å®Œç¾çš„ä¿æŠ¤æ•°æ®çš„å®‰å…¨ï¼Œé‚£ä¹ˆèƒ½å¦å°†å…¶ç»“åˆä¸€ä¸‹å‘¢ï¼Ÿåœ¨HTTPSçš„å®ç°ä¸­ï¼Œä¹Ÿç¡®å®æ˜¯è¿™ä¹ˆåšçš„ã€‚æµç¨‹å¦‚ä¸‹ï¼š éå¯¹ç§°åŠ å¯†çš„ä¸»è¦é—®é¢˜æ˜¯ä½¿ç”¨ç§é’¥åŠ å¯†çš„æ•°æ®ï¼Œä»»ä½•æ‹¥æœ‰å…¬é’¥çš„äººéƒ½å¯ä»¥è¿›è¡Œè§£å¯†ï¼Œæˆ‘ä»¬åªéœ€è¦ä¿è¯æœåŠ¡ç«¯å›æ•°æ®çš„æ—¶å€™ä¸ä½¿ç”¨ç§é’¥è¿›è¡ŒåŠ å¯†å³å¯ã€‚å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œé¦–å…ˆå®¢æˆ·ç«¯ä½¿ç”¨å…¬é’¥å°†è¦ä½¿ç”¨çš„åŠ å¯†ç®—æ³•ï¼Œæ‰€ä½¿ç”¨çš„å¯¹ç§°å¯†é’¥åŠ å¯†åå‘é€ç»™æœåŠ¡ç«¯ï¼Œä¸­é—´èŠ‚ç‚¹æ²¡æœ‰æœåŠ¡ç«¯çš„ç§é’¥ï¼Œæ— æ³•è·çŸ¥å®¢æˆ·ç«¯å‘é€çš„å¯†é’¥æ˜¯ä»€ä¹ˆã€‚ä¹‹åå¦‚æœæœåŠ¡ç«¯åŒæ„æ­¤æ¬¡åå•†ï¼Œåˆ™ä½¿ç”¨å®¢æˆ·ç«¯çš„å¯¹ç§°å¯†é’¥æ¥åŠ å¯†å›æ‰§æ•°æ®ï¼Œä¹‹åçš„æ•°æ®é€šä¿¡éƒ½ä½¿ç”¨æ­¤å¯†é’¥è¿›è¡ŒåŠ å¯†ï¼Œæ”»å‡»è€…æ— æ³•è§£å¯†ã€‚ å¥½äº†ï¼Œç°åœ¨çš„åŠ å¯†æ–¹å¼çœ‹ä¸Šå»å¾ˆå¥½ç”¨ï¼Œä½†æ˜¯å®é™…å®æ–½èµ·æ¥å¥½åƒå¹¶ä¸å¤ªå®¹æ˜“ï¼Œå…¬é’¥å¦‚ä½•æ­£ç¡®çš„ç»™åˆ°å®¢æˆ·ç«¯ï¼Œè¿™åˆæ˜¯ä¸€ä¸ªæ£˜æ‰‹çš„é—®é¢˜ã€‚æˆ‘ä»¬ä¸‹é¢å†çœ‹ã€‚ 2. å¦‚ä½•éªŒè¯å¯¹æ–¹çš„èº«ä»½å…¬é’¥ä¹‹æ‰€ä»¥éš¾ä»¥æ­£ç¡®çš„ç»™åˆ°å®¢æˆ·ç«¯æ˜¯å› ä¸ºåœ¨ç½‘ç»œé€šä¿¡ä¸­ï¼Œé€šä¿¡åŒæ–¹éƒ½æ— æ³•éªŒè¯å¯¹æ–¹çš„èº«ä»½ã€‚ä¾‹å¦‚æœåŠ¡ç«¯æŠŠå…¬é’¥æ”¾åˆ°ä¸€ä¸ªå…¬å¼€çš„ç½‘ç«™ä¸Šä¾›å®¢æˆ·ç«¯ä¸‹è½½ï¼Œå¯æ˜¯å®¢æˆ·ç«¯æ— æ³•åˆ¤æ–­æ­¤ç½‘ç«™æ˜¯å¦çœŸçš„æ˜¯æœåŠ¡æ–¹å®˜æ–¹çš„ç½‘ç«™ï¼Œæ­¤ç½‘ç«™æœ¬èº«ä¹Ÿå¯èƒ½å·²ç»è¢«åŠ«æŒï¼Œå®¢æˆ·ç«¯å°†ä¸‹è½½åˆ°æ”»å‡»è€…æä¾›çš„å…¬é’¥ã€‚ä¹‹åå®¢æˆ·ç«¯æ‰€æœ‰çš„é€šä¿¡éƒ½å°†ç›´æ¥å’Œæ”»å‡»è€…è¿›è¡Œï¼Œå¹¶ä¸”å®¢æˆ·ç«¯è¿˜ä¸€æ— æ‰€çŸ¥ï¼ˆé’“é±¼ç½‘ç«™çš„æ”»å‡»æ–¹å¼ï¼‰ã€‚å¦‚æœæœåŠ¡ç«¯åœ¨å®¢æˆ·ç«¯å‘èµ·ä¼šè¯æ—¶å…ˆå°†å…¬é’¥å‘é€ç»™å®¢æˆ·ç«¯ï¼Œè¿™åŒæ ·ä¸å®‰å…¨ï¼Œä¸­é—´èŠ‚ç‚¹å¯ä»¥ç›´æ¥æˆªå–æœåŠ¡ç«¯çš„å…¬é’¥ï¼Œå°†å…¶æ›¿æ¢æˆæ”»å‡»è€…è‡ªå·±çš„å…¬é’¥å‘ç»™å®¢æˆ·ç«¯ã€‚ä¹‹åå®¢æˆ·ç«¯å‘é€çš„å¯¹ç§°å¯†é’¥å°†ä½¿ç”¨æ”»å‡»è€…çš„å…¬é’¥åŠ å¯†ï¼Œæ”»å‡»è€…å¯ä»¥æ‹¿åˆ°åç»­ç½‘ç»œé€šä¿¡æ‰€ä½¿ç”¨çš„å¯¹ç§°å¯†é’¥ï¼Œè¿™æ—¶å°±æ›´å±é™©äº†ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½ä¸çŸ¥é“è‡ªå·±å‘é€çš„æ•°æ®éƒ½è¢«æ”»å‡»è€…å…ˆè·å–åˆ°å¹¶è§£å¯†æˆåŠŸï¼Œå¹¶ä¸”æ”»å‡»è€…è¿˜åœ¨ç»§ç»­ä¼ªè£…æˆå®¢æˆ·ç«¯/æœåŠ¡ç«¯ä¸åŒæ–¹é€šä¿¡ã€‚ é‚£ä¹ˆï¼Œæœ‰æ²¡æœ‰ä¸€ç§æ–¹å¼å¯ä»¥å®‰å…¨çš„è·å–æœåŠ¡ç«¯çš„å…¬é’¥å‘¢ï¼Ÿè¿™å°±éœ€è¦æˆ‘ä»¬è§£å†³åŒæ–¹èº«ä»½éªŒè¯çš„é—®é¢˜ã€‚è€Œè¦è§£å†³èº«ä»½è®¤è¯çš„é—®é¢˜ï¼Œæœ¬è´¨æ˜¯æƒ³åŠæ³•å°†å…¬é’¥ä¸èº«ä»½ä¿¡æ¯è¿›è¡Œç»‘å®šï¼Œå¹¶ä¸”ä½¿å…¶ä¸å¯ç¯¡æ”¹ã€‚æˆ‘ä»¬æœ€ç›´æ¥çš„æƒ³æ³•æ˜¯å¯¹å…¬é’¥ä¹Ÿè¿›è¡Œéå¯¹ç§°åŠ å¯†ï¼Œä½†æ˜¯è¿™æ ·ç”¨æ¥è§£å¯†å…¬é’¥çš„å…¬é’¥å¦‚ä½•ä¿è¯æ­£ç¡®ç»™åˆ°å®¢æˆ·ç«¯å°±åˆæˆäº†é—®é¢˜ï¼Œå°±é™·å…¥äº†ååå¤å¤æ— ç©·å·²çš„é€»è¾‘å¾ªç¯ã€‚å› æ­¤ï¼Œè¦æ‰“ç ´è¿™ä¸ªå¾ªç¯ï¼Œæˆ‘ä»¬å°±å¿…é¡»å…¬è®¤ä¸€äº›å®‰å…¨çš„å…¬é’¥ï¼Œå¯¹å…¶è¿›è¡Œä¿¡ä»»ã€‚å†ä¸¾ä¸ªä¾‹å­ï¼Œä½ è¦åˆ°é“¶è¡Œå–é’±ï¼Œå¿…é¡»è¦è¯æ˜ä½ æ˜¯ä½ ï¼Œä½ å¯ä»¥è¯´æˆ‘å¦ˆå¯ä»¥è¯æ˜æˆ‘æ˜¯æˆ‘ï¼Œä½†æ˜¯åˆå¿…é¡»è¯æ˜ä½ å¦ˆæ˜¯ä½ å¦ˆï¼Œè¿™æ ·æ°¸è¿œæ— æ³•è¯æ˜å‡ºä½ çš„èº«ä»½çœŸå®ã€‚ä½†æ˜¯ç°å®ç”Ÿæ´»ä¸­æˆ‘ä»¬ä¸ä¼šé‡åˆ°è¿™æ ·çš„å›°å¢ƒï¼Œå› ä¸ºä½ å¯ä»¥ä½¿ç”¨èº«ä»½è¯è¯æ˜ä½ æ˜¯ä½ ï¼Œèº«ä»½è¯æ˜¯å›½å®¶æœºå…³é¢å‘çš„ï¼Œæ‰€æœ‰ç¤¾ä¼šæœºæ„éƒ½å¯¹å…¶è®¤å¯ã€‚å°†å…¶ç±»æ¯”åˆ°æˆ‘ä»¬çš„ç½‘ç»œé€šä¿¡åœºæ™¯ä¸­ï¼Œå„ä¸ªç«¯éƒ½éœ€è¦ä¸€ä¸ªè¯ä»¶æ¥è¿›è¡Œè‡ªæˆ‘è¯æ˜ï¼Œè¿™ä¸ªè¯ä»¶å°±æ˜¯è¯ä¹¦ã€‚ è¯ä¹¦çš„å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š å¦‚ä¸Šå›¾ä¸­æ‰€ç¤ºï¼Œåœ¨æœåŠ¡ç«¯å‘è¯ä¹¦é¢å‘æœºæ„ç”³è¯·è¯ä¹¦æ—¶ï¼Œéœ€è¦å°†è‡ªå·±çš„åŠ å¯†å…¬é’¥æäº¤ï¼Œæ­¤æ—¶è¯ä¹¦é¢å‘æœºæ„éœ€è¦å¯¹ç”³è¯·è€…çš„èº«ä»½è¿›è¡Œä¿è¯ï¼Œå³ç”³è¯·è€…çš„æ˜¯å¦æ˜¯æŸä¸ªåŸŸåçš„çœŸå®è¿è¥è€…ï¼ŒéªŒè¯æ— è¯¯åï¼ˆè¿™ç›´æ¥å½±å“åˆ°è¯ä¹¦æœºæ„çš„ä¿¡èª‰ï¼Œå³ç”Ÿå­˜åº•çº¿ï¼‰å…¶ä½¿ç”¨è‡ªå·±çš„å¯†é’¥å¯¹æœåŠ¡ç«¯çš„å…¬é’¥è¿›è¡ŒåŠ å¯†ï¼Œåç”Ÿæˆè¯ä¹¦ç»™åˆ°æœåŠ¡ç«¯ã€‚è¯ä¹¦æœ¬èº«æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¤æ‚çš„æŠ€æœ¯ï¼Œå…¶å¯ä»¥é€šè¿‡ç»§æ‰¿å…³ç³»æ¥è¿›è¡Œæœ‰æ•ˆæ€§éªŒè¯ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸åšè¿‡å¤šä»‹ç»ï¼Œæˆ‘ä»¬åªéœ€è¦çŸ¥é“ï¼Œç”¨æ¥è§£å¯†è¯ä¹¦çš„å…¬é’¥ä¸€å¼€å§‹å°±å·²ç»é›†æˆè¿›äº†å®¢æˆ·ç«¯è®¾å¤‡ï¼Œå½“ç„¶å®¢æˆ·ç«¯è®¾å¤‡ä¹Ÿå¯ä»¥æ ¹æ®éœ€è¦æ¥è‡ªå·±æ·»åŠ æ‰€ä¿¡ä»»çš„è¯ä¹¦ï¼Œè¿™äº›å®¢æˆ·ç«¯çš„è¯ä¹¦ä¸­åŒ…å«äº†åŸŸåä¿¡æ¯ä»¥åŠå¯¹åº”çš„å…¬é’¥ã€‚ä¹‹åï¼Œæ¯å½“å®¢æˆ·ç«¯è¦ä¸æœåŠ¡ç«¯å‘èµ·é€šä¿¡æ—¶ï¼ŒæœåŠ¡ç«¯å…ˆæŠŠè¯ä¹¦å‘ç»™å®¢æˆ·ç«¯ï¼Œå¦‚æœè¿™ä¸­é—´æœ‰äººæ‹¦æˆªç¯¡æ”¹ï¼Œä½†å…¶æ²¡æœ‰è¯ä¹¦é¢å‘æœºæ„åŠ å¯†æ—¶çš„ç§é’¥ï¼Œç¯¡æ”¹åçš„è¯ä¹¦æ–‡ä»¶æ— æ³•é€šè¿‡å®¢æˆ·ç«¯çš„å†…ç½®å…¬é’¥è§£å¯†ï¼Œå®¢æˆ·ç«¯ä¼šæ„è¯†åˆ°é­åˆ°äº†æ”»å‡»ï¼Œä¸­æ–­è¯·æ±‚å³å¯ã€‚å½“å®¢æˆ·ç«¯æ”¶åˆ°è¯ä¹¦åï¼Œä»æœ¬åœ°æ‰¾åˆ°å—ä¿¡ä»»çš„ä¸ä¹‹é…å¯¹çš„è¯ä¹¦æ–‡ä»¶ï¼Œç”¨æœ¬åœ°è¯ä¹¦æ–‡ä»¶ä¸­çš„å…¬é’¥æ¥è¿›è¡Œè§£å¯†ï¼Œè§£å¯†æˆåŠŸåå³å¯æ‹¿åˆ°æ­£ç¡®æœåŠ¡ç«¯çš„å…¬é’¥ã€‚ å¦‚æ­¤ï¼Œé€šè¿‡è¯ä¹¦æˆ‘ä»¬è§£å†³äº†èº«ä»½è®¤è¯ä¸é˜²ä¿¡æ¯ç¯¡æ”¹çš„é—®é¢˜ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬å¯ä»¥æ¥ç†è§£HTTPSåè®®äº†ã€‚ ä¸‰. HTTPSåè®®ç©¶ç«Ÿæ˜¯ä»€ä¹ˆç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»æœ‰äº†è§£å†³HTTPå®‰å…¨çš„ç†è®ºæ–¹æ³•ï¼Œè¯´HTTPSæ˜¯ä¸€ç§åè®®å…¶å®æ˜¯ä¸€ç§è¯¯ç§°ï¼ŒHTTPSçš„å…¨ç§°æ˜¯Hyper Text Transfer Protocol over SecureSocket Layerï¼Œå³å®‰å…¨å¥—æ¥å­—é€šé“ä¹‹ä¸Šçš„HTTPåè®®ã€‚å…¶æœ¬è´¨æ˜¯SSLï¼ˆSecureSocket Layerï¼‰æˆ–TLSï¼ˆTransport Layer Securityï¼‰åè®®ã€‚TLSåè®®æ˜¯SSLåè®®çš„ä¸€ç§å‡çº§ç‰ˆï¼Œæœ¬ç¯‡åšå®¢ä¸­æˆ‘ä»¬ä»¥TLSä¸ºä¾‹æ¥è¿›è¡Œä»‹ç»ï¼Œå½“ä½¿ç”¨å…¶åŠ å¯†é€šä¿¡çš„æ•°æ®æ ¼å¼æ˜¯HTTPåè®®æ ¼å¼çš„æ—¶å€™ï¼Œè¿™ç§é€šä¿¡æˆ‘ä»¬å°±ç§°ä¸ºHTTPSï¼ŒåŒæ ·ï¼Œå…¶ä»–ç½‘ç»œå±‚åº”ç”¨åè®®ä¹Ÿå¯ä»¥å·¥ä½œåœ¨TLSåè®®ä¹‹ä¸Šï¼Œä¾‹å¦‚ä½¿ç”¨TLSæ¥ä½¿æ–‡ä»¶ä¼ è¾“æ›´åŠ å®‰å…¨çš„FPTSã€‚HTTPï¼ŒTLSå’ŒHTTPSçš„å…³ç³»å¦‚ä¸‹ï¼š ä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç»TLSåè®®çš„å·¥ä½œæ–¹å¼ï¼Œç†è§£äº†TLSåè®®ï¼ŒHTTPSåªæ˜¯å…¶ä¼ è¾“çš„ä¸šåŠ¡æ•°æ®å†…å®¹çš„æ ¼å¼æ˜¯HTTPåè®®çš„è€Œå·²ã€‚ 1. TLSçš„å·¥ä½œæµç¨‹æ ¹æ®æˆ‘ä»¬å‰é¢çš„åˆ†æï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯è¦å®‰å…¨çš„è¿›è¡Œé€šä¿¡ï¼Œéœ€è¦3ä¸ªéƒ¨åˆ†ï¼š å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯ç´¢è¦èº«ä»½è®¤è¯è¯ä¹¦å¹¶éªŒè¯å’Œè·å–æœåŠ¡ç«¯å…¬é’¥ã€‚ ä½¿ç”¨æœåŠ¡ç«¯å…¬é’¥åŠ å¯†å¯¹è¯ä¿¡æ¯è¿›è¡Œé€šä¿¡ç®—æ³•å’Œå¯†é’¥çš„åå•†ã€‚ ä½¿ç”¨åå•†å‡ºçš„ç®—æ³•å’Œå¯†é’¥è¿›è¡Œæ•°æ®é€šä¿¡ã€‚ å…¶ä¸­å‰ä¸¤æ­¥æ˜¯TLSçš„æ¡æ‰‹è¿‡ç¨‹ï¼Œæœ€åä¸€æ­¥æ‰æ˜¯é€šä¿¡è¿‡ç¨‹ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹æ¡æ‰‹è¿‡ç¨‹ã€‚ å®Œæˆæ¡æ‰‹è¿‡ç¨‹å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯é—´å…±éœ€è¦4æ¬¡é€šä¿¡ã€‚è¿‡ç¨‹å¦‚ä¸‹ï¼š åœ¨æ¡æ‰‹è¿‡ç¨‹ä¸­ï¼Œé¦–å…ˆç”±å®¢æˆ·ç«¯å‘èµ·ClientHelloæ¶ˆæ¯ï¼Œæ­¤æ¶ˆæ¯ä¸­ä¼šåŒ…å«å®¢æˆ·ç«¯æ”¯æŒçš„TLSåè®®ç‰ˆæœ¬å·ï¼Œä¸€ä¸ªå®¢æˆ·ç«¯ç”Ÿæˆçš„éšæœºæ•°ï¼ˆåé¢ç”Ÿæˆå¯†é’¥ç”¨ï¼‰ï¼Œå®¢æˆ·ç«¯æ”¯æŒçš„åŠ å¯†ç®—æ³•ä»¥åŠæ”¯æŒçš„å‹ç¼©æ–¹æ³•ç­‰ã€‚åé¢æˆ‘ä»¬ä¼šå…·ä½“ä»‹ç»ã€‚ æ¥æ”¶åˆ°å®¢æˆ·ç«¯çš„ClientHelloæ¶ˆæ¯åï¼ŒæœåŠ¡ç«¯ä¼šè¿›è¡Œå›åº”ï¼Œæ­¤å›åº”æ¶ˆæ¯ä¸ºSeverHelloæ¶ˆæ¯ã€‚SeverHelloæ¶ˆæ¯ä¸»è¦åŒ…å«çš„å†…å®¹æœ‰åå•†æ‰€ä½¿ç”¨çš„åŠ å¯†é€šä¿¡åè®®ç‰ˆæœ¬ï¼Œä¸€ä¸ªæœåŠ¡ç«¯ç”Ÿæˆçš„éšæ—¶æ•°ï¼ˆåé¢ç”Ÿæˆå¯†é’¥ç”¨ï¼‰ï¼Œç¡®è®¤ä½¿ç”¨çš„åŠ å¯†æ–¹æ³•ä»¥åŠæœåŠ¡ç«¯çš„è¯ä¹¦ã€‚ å®¢æˆ·ç«¯æ¥æ”¶åˆ°æœåŠ¡ç«¯çš„SeverHelloæ¶ˆæ¯åï¼Œé¦–å…ˆä¼šéªŒè¯æœåŠ¡ç«¯çš„è¯ä¹¦ï¼Œå¦‚æœè¯ä¹¦ä¸æ˜¯å¯ä¿¡æœºæ„é¢å‘çš„æˆ–è€…è¯ä¹¦ä¸­çš„åŸŸåä¸å®é™…è®¿é—®çš„åŸŸåä¸ä¸€è‡´ï¼Œæˆ–è€…è¯ä¹¦è¿‡æœŸï¼Œå®¢æˆ·ç«¯éƒ½éœ€è¦ä¸­æ–­æ­¤æ¬¡é€šä¿¡ï¼ˆä¸åŒçš„æµè§ˆå™¨å¯èƒ½å®ç°ä¸åŒï¼Œæœ‰äº›å¯èƒ½ä»…ä»…æ˜¯è­¦å‘Šç”¨æˆ·ä¸å®‰å…¨ï¼‰ã€‚å¦‚æœè¯ä¹¦éªŒè¯é€šè¿‡ï¼Œåˆ™å®¢æˆ·ç«¯ä¼šæå–å‡ºæœåŠ¡ç«¯çš„å…¬é’¥ã€‚å‘é€å›åº”ä¿¡æ¯ç»™æœåŠ¡ç«¯ï¼Œå›åº”ä¿¡æ¯å°†åŒ…å«ä¸€ä¸ªä½¿ç”¨æœåŠ¡ç«¯å…¬é’¥åŠ å¯†çš„éšæœºæ•°ï¼Œç¼–ç æ”¹å˜çš„é€šçŸ¥ï¼Œè¡¨ç¤ºä¹‹åå’ŒæœåŠ¡ç«¯çš„é€šä¿¡å°†ä½¿ç”¨åŒæ–¹åå®šå¥½çš„åŠ å¯†æ–¹æ³•å’Œå¯†é’¥è¿›è¡Œé€šä¿¡ã€‚ä»¥åŠå®¢æˆ·ç«¯æ¡æ‰‹ç»“æŸçš„é€šçŸ¥ï¼Œè¿™æ—¶å®¢æˆ·ç«¯ä¼šå°†å‰é¢æ‰€æœ‰å‘é€å†…å®¹çš„Hashå€¼å‘ç»™æœåŠ¡ç«¯ï¼Œä¾›æœåŠ¡ç«¯æ¥æ ¡éªŒä¸­é—´æ˜¯å¦æœ‰ç¯¡æ”¹ã€‚å½“ç„¶ï¼Œå¦‚æœæœåŠ¡ç«¯ä¹Ÿéœ€è¦éªŒè¯å®¢æˆ·ç«¯ä½ çš„èº«ä»½ï¼Œåœ¨è¿™ä¸€æ­¥çš„æ—¶å€™å®¢æˆ·ç«¯ä¹Ÿä¼šå°†è¯ä¹¦å‘ç»™æœåŠ¡ç«¯ã€‚ æœ€åï¼ŒæœåŠ¡ç«¯ä¼šå†æ¬¡å‘å›åº”æ¶ˆæ¯ç»™å®¢æˆ·ç«¯ã€‚å›åº”æ¶ˆæ¯åŒ…æ‹¬ç¼–ç æ”¹å˜é€šçŸ¥ï¼Œè¡¨ç¤ºéšåå‘é€çš„ä¿¡æ¯å°†ç”¨åŒæ–¹åå®šçš„åŠ å¯†æ–¹æ³•å’Œå¯†é’¥è¿›è¡ŒåŠ å¯†ã€‚æœåŠ¡ç«¯ä¹Ÿä¼šå‘é€æœåŠ¡ç«¯æ¡æ‰‹ç»“æŸé€šçŸ¥ï¼Œä¹‹åå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„æ•°æ®é€šä¿¡å°†è¿›å…¥åŠ å¯†é€šä¿¡ï¼ŒåŸå§‹æ•°æ®çš„æ ¼å¼æœ‰HTTPæ˜¯å®Œå…¨ä¸€è‡´çš„ã€‚ 2. å…³äºTLSçš„åè®®å†…å®¹TLSçš„æ¡æ‰‹è¿‡ç¨‹çš„å®ç°ä¸»è¦æ˜¯é€šè¿‡å¦‚ä¸‹4ç§ç±»å‹çš„å­åè®®å®ç°çš„ï¼š TLS Handshaking protocolsæ¡æ‰‹åè®® Alert Protocolè­¦å‘Šåè®® Application Data Procotolåº”ç”¨å±‚æ•°æ®åè®® Change Cipher Spec Protocolå¯†ç åˆ‡æ¢åè®® æ¯ä¸ªTLSåè®®æœ‰æ¶ˆæ¯éƒ½æœ‰æ¶ˆæ¯å¤´å’Œæ¶ˆæ¯ä½“ç»„æˆï¼Œæ¶ˆæ¯å¤´æ˜¯å›ºå®šçš„ï¼Œé•¿åº¦ä¸º5ä¸ªå­—èŠ‚40ä½ã€‚ æ¶ˆæ¯å¤´çš„ç¬¬1ä¸ªå­—èŠ‚æè¿°çš„æ˜¯æ¶ˆæ¯ä½“çš„ç±»å‹ï¼Œæšä¸¾å¦‚ä¸‹ï¼š | ç±»å‹ | å€¼ || å¯†ç åˆ‡æ¢åè®® | 0x14 || è­¦å‘Šåè®® | 0x15 || æ¡æ‰‹åè®® | 0x16 || åº”ç”¨ç¨‹åºæ•°æ®åè®® | 0x17 | ç¬¬2å’Œç¬¬3ä¸ªå­—èŠ‚ç”¨æ¥æè¿°å½“å‰ä½¿ç”¨çš„TLSçš„ç‰ˆæœ¬å·ã€‚ ç¬¬3å’Œç¬¬5ä¸ªå­—èŠ‚ç”¨æ¥æè¿°å½“å‰æ¶ˆæ¯çš„é•¿åº¦ï¼Œé•¿åº¦ä¼šåŒ…å«å¤´ä¿¡æ¯ã€‚ åœ¨å¤´ä¿¡æ¯ç»“æŸåï¼Œå³æ˜¯å…·ä½“çš„æ¶ˆæ¯ä½“å†…å®¹ï¼Œæ ¹æ®ä¸åŒçš„åè®®ç±»å‹æ¶ˆæ¯ä½“å†…å®¹ä¸åŒã€‚ æ¡æ‰‹ç±»å‹çš„åè®®ï¼š ä¸€èˆ¬ï¼Œä¸€æ¬¡æˆåŠŸçš„TLSæ¡æ‰‹éœ€è¦å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯äº¤äº’ä¸¤æ¬¡ã€‚æ¡æ‰‹çš„ä¸»è¦ä½œç”¨æ˜¯åå•†å‡ºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä»»ä½•çš„åŠ å¯†æ–¹æ³•å’Œå¯†é’¥ã€‚æ¡æ‰‹ç±»çš„æ¶ˆæ¯ç”±3éƒ¨åˆ†ç»„æˆï¼Œåˆ†åˆ«ä¸ºå­ç±»å‹ï¼Œå­æ¶ˆæ¯é•¿åº¦å’Œå…·ä½“çš„å­æ¶ˆæ¯ä½“ã€‚ å­æ¶ˆæ¯ç±»å‹å 1ä¸ªå­—èŠ‚ï¼Œæšä¸¾å¦‚ä¸‹ï¼š | ç±»å‹ | å€¼ || HELLO_REQUEST | 0x00 || CLIENT_HELLO | 0x01 || SERVER_HELLO | 0x02 || CERTIFICATE | 0x0B || SERVER_KEY_EXCHANGE | 0x0C || SERVER_DONE | 0x0E || SERVER_REQUEST | 0x0D || CERTIFICATE_VERIFY | 0x0F || CHIENT_KEY_EXCHANGE | 0x10 || FINISHED | 0x14 | åœ¨å…·ä½“æ‰§è¡Œçš„æ—¶å€™ï¼Œå¤šæ¡å­æ¶ˆæ¯å¯èƒ½å°è£…è¿›åŒä¸€æ¡TLSæ¶ˆæ¯ä¸­ï¼Œäº¤ç»™TCPå±‚å¤„ç†å‘é€ã€‚ è­¦å‘Šç±»å‹çš„åè®®ï¼š åœ¨æ¡æ‰‹è¿‡ç¨‹ä¸­å¯èƒ½ä¼šäº§ç”Ÿå¼‚å¸¸ï¼Œä¾‹å¦‚å®¢æˆ·ç«¯çš„åŠ å¯†ç®—æ³•æœåŠ¡ç«¯æ— æ³•æ”¯æŒæ—¶ï¼Œå¯ä»¥ç›´æ¥å›æ‰§è­¦å‘Šç±»å‹çš„å­åè®®ï¼Œè­¦å‘Šç±»å‹çš„æ¶ˆæ¯æ ¼å¼æ˜¯å›ºå®šçš„ï¼Œç”±ä¸¤ä¸ªå­—èŠ‚ç»„æˆï¼Œç¬¬1ä¸ªå­—èŠ‚æè¿°è­¦å‘Šçš„ç­‰çº§ï¼Œç¬¬2ä¸ªå­—èŠ‚æè¿°è­¦å‘Šçš„åŸå› ã€‚ è­¦å‘Šç±»å‹çš„æšä¸¾æœ‰ï¼š | ç­‰çº§ | å€¼ || warning | 1 || fatal | 2 | è­¦å‘ŠåŸå› çš„æšä¸¾æœ‰ï¼š | åŸå›  | å€¼ || close_notify | 0 || unexpected_message | 10 || bad_record_mac | 20 || decryption_failed_RESERVED | 21 || record_overflow | 22 || decompression_failure | 30 || no_certificate_RESERVED | 41 || bad_certificate | 42 || unsupported_certificate | 43 || certificate_revoked | 44 || certificate_expired | 45 || certificate_unknown | 46 || illegal_parameter | 47 || unknown_ca | 48 || access_denied | 49 || decode_error | 50 || decrypt_error | 51 || export_restriction_RESERVED | 60 || protocol_version | 70 || insufficient_security | 71 || internal_error | 80 || user_canceled | 90 || no_renegotiation | 100 || unsupported_extension | 110 | å¯†ç åˆ‡æ¢åè®®: å¯†ç ç¡®è®¤åè®®å°±æ˜¯æˆ‘ä»¬å‰é¢æ‰€è¯´çš„å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„ç¡®è®¤å›åº”ä¿¡æ¯ï¼Œè¿™ä¸ªæ¶ˆæ¯ä¸€æ—¦å‘å‡ºï¼Œè¡¨ç¤ºåç»­çš„é€šä¿¡éƒ½å°†å¯ä»¥åœ¨åŠ å¯†å±‚è¿›è¡Œäº†ã€‚ åº”ç”¨å±‚æ•°æ®åè®®: è¿™ä¸€åè®®çš„ä½œç”¨å°±æ˜¯å¯¹ä¸Šå±‚çš„åº”ç”¨å±‚åè®®æ•°æ®è¿›è¡Œä¸€å±‚åŠ å¯†ä¿æŠ¤ååœ¨è¿›è¡Œä¼ è¾“ã€‚ 3. Client Helloå­æ¶ˆæ¯è¯¦è§£å½“å®¢æˆ·ç«¯è¦å’ŒæœåŠ¡ç«¯ç®€å†TLSé€šä¿¡æ—¶ï¼Œæœ€å…ˆå‘å‡ºçš„å°±æ˜¯å®¢æˆ·ç«¯çš„Clent Helloæ¶ˆæ¯ã€‚æ­¤æ¶ˆæ¯åŒ…å«å¦‚ä¸‹ä¿¡æ¯ï¼š client_versionï¼šå®¢æˆ·ç«¯æ”¯æŒçš„æœ€é«˜çš„TLSåè®®ç‰ˆæœ¬å·ã€‚ randomï¼šå®¢æˆ·ç«¯ç”Ÿæˆçš„éšæœºæ•°ã€‚ sessionIDï¼šä¼šè¯çš„idï¼Œå¯ç”¨äºæ¢å¤ä¼šè¯ã€‚ cipher_suitesï¼šå®¢æˆ·ç«¯å‘é€æ‰€æ”¯æŒçš„å¯†ç å¥—ä»¶åˆ—è¡¨ã€‚ compression_methodsï¼šå®¢æˆ·ç«¯æ”¯æŒçš„å‹ç¼©æ–¹æ³•ã€‚ extensionsï¼šæ‰©å±•å†…å®¹ï¼ŒTLSåè®®æ”¯æŒæ–¹ä¾¿çš„è¿›è¡Œæ‰©å±•ï¼Œå¯ä»¥æœ‰å¤šä¸ªæ‰©å±•æ•°æ®ã€‚ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Wiresharkæ¥ç›‘å¬TLSçš„åè®®æ•°æ®ï¼ŒClient Helloæ¶ˆæ¯ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š 4. Server Helloå­æ¶ˆæ¯è¯¦è§£Server Helloæ¶ˆæ¯çš„ä¸»è¦ä½œç”¨æ˜¯æ ¹æ®å®¢æˆ·ç«¯æ”¯æŒçš„å¯†ç å¥—ä»¶æ¥é€‰æ‹©ä¸€ä¸ªåŒæ–¹éƒ½æ»¡æ„çš„å¯†ç å¥—ä»¶ï¼ŒServer HelloåŒ…å«å¦‚ä¸‹ä¿¡æ¯ï¼š server_versionï¼šæœåŠ¡ç«¯æœ€ç»ˆé€‰æ‹©ä½¿ç”¨çš„TLSåè®®ç‰ˆæœ¬å·ã€‚ randomï¼šæœåŠ¡ç«¯ç”Ÿæˆçš„éšæœºæ•°ã€‚ session_idï¼šå¦‚æœèƒ½å¤Ÿæ¢å¤ä¼šè¯ï¼Œåˆ™å’Œå®¢æˆ·ç«¯ä¼ é€’çš„session_idä¸€è‡´ã€‚å¦‚æœä¸èƒ½ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„session_idè¿”å›ã€‚ ciper_suiteï¼šæ ¹æ®å®¢æˆ·ç«¯æ”¯æŒçš„å¯†ç å¥—ä»¶ï¼ŒæœåŠ¡ç«¯é€‰æ‹©ä¸€ä¸ªåŒæ–¹éƒ½æ”¯æŒçš„æ¥ä½¿ç”¨ã€‚ compression_methodï¼šæ ¹æ®å®¢æˆ·ç«¯æä¾›çš„å‹ç¼©æ–¹æ³•ï¼ŒæœåŠ¡ç«¯é€‰æ‹©ä¸€ä¸ªåŒæ–¹éƒ½æ”¯æŒçš„æ¥ä½¿ç”¨ã€‚ extensionsï¼šæ ¹æ®å®¢æˆ·ç«¯ä¼ é€’çš„æ‰©å±•åˆ—è¡¨ï¼ŒæœåŠ¡ç«¯æ¥è¿›è¡Œå¤„ç†ã€‚ ä¸€ä¸ªç¤ºä¾‹çš„Server Helloæ¶ˆæ¯å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¯ä»¥çœ‹åˆ°ï¼ŒServer Helloæ¶ˆæ¯çš„ä¸»è¦ä½œç”¨æ˜¯å¯¹å®¢æˆ·ç«¯æä¾›çš„å¯†ç å¥—ä»¶åˆ—è¡¨ï¼Œå‹ç¼©æ–¹æ³•åˆ—è¡¨ç­‰è¿›è¡Œé€‰æ‹©ï¼Œæœ€ç»ˆå†³å®šåŒæ–¹é€šä¿¡è¦ä½¿ç”¨çš„ã€‚ 5. Server Certificateï¼ŒServer Key Exchangeï¼ŒServer Hello Doneå­æ¶ˆæ¯å½“æœåŠ¡ç«¯å‘é€è¿‡Server Helloæ¶ˆæ¯åï¼Œä¸€èˆ¬ä¼šç«‹åˆ»å‘é€Server Certificateæ¶ˆæ¯ã€‚è¿™ä¸ªæ¶ˆæ¯æ˜¯é€‰å‘çš„ï¼Œä½†æ˜¯ä¸€èˆ¬æœåŠ¡ç«¯éƒ½ä¼šå‘é€ï¼Œç”¨æ¥ç»™å®¢æˆ·ç«¯éªŒè¯æœåŠ¡ç«¯çš„èº«ä»½ã€‚å¹¶ä¸”å°†æœåŠ¡ç«¯çš„å…¬é’¥å®‰å…¨çš„ç»™åˆ°å®¢æˆ·ç«¯ã€‚è¯ä¹¦æ¶ˆæ¯ä¸­çš„ä¿¡æ¯æ˜¯ä¸€ç³»åˆ—çš„è¯ä¹¦é“¾ã€‚å…³äºè¯ä¹¦çš„è¯¦ç»†å†…å®¹æˆ‘ä»¬è¿™é‡Œä¸è¿‡å¤šæè¿°ã€‚ Server Key Exchangeå­æ¶ˆæ¯ä¹Ÿæ˜¯æœ‰æ¡ä»¶æ‰ä¼šå‘é€çš„ï¼ŒæŸäº›å¯†ç å¥—ä»¶ä¼šéœ€è¦å‘é€æ­¤æ¶ˆæ¯ã€‚é€»è¾‘ä¸Šï¼ŒæœåŠ¡ç«¯å‘é€Server Helloæ¶ˆæ¯åï¼Œç´§éšç€å°±ä¼šå‘é€Server Hello Doneæ¶ˆæ¯ï¼Œè¿™æ¡æ¶ˆæ¯æ˜¯ä¸€æ¡ç©ºæ¶ˆæ¯ï¼Œè¡¨ç¤ºæœåŠ¡ç«¯å·²ç»å°†è¦å‘é€çš„ä¸œè¥¿éƒ½å‘é€å®Œäº†ï¼Œå®¢æˆ·ç«¯å¯ä»¥è¿›è¡Œè¯ä¹¦æ ¡éªŒï¼Œå¯†é’¥åå•†é€»è¾‘äº†ã€‚ è¿™3æ¡æ¶ˆæ¯é€šå¸¸ä¼šä¿è¯åˆ°ä¸€ä¸ªTCPæŠ¥æ–‡ä¸­å‘é€ï¼Œå¦‚ä¸‹å›¾ï¼š åé¢ï¼Œè¿˜æœ‰ä¸€äº›å®¢æˆ·ç«¯åå•†å‡ºå¯†é’¥çš„æ¶ˆæ¯ï¼Œæ¡æ‰‹å®Œæˆçš„æ¶ˆæ¯ç­‰ã€‚è¿™äº›å­æ¶ˆæ¯å®Œæˆåï¼Œè¡¨æ˜æ•´ä¸ªæ¡æ‰‹è¿‡ç¨‹ç»“æŸï¼Œåç»­å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å¼€å§‹å°†æ•°æ®è¿›è¡ŒåŠ å¯†é€šä¿¡ã€‚ å®Œæˆäº†å®Œæ•´çš„æ¡æ‰‹è¿‡ç¨‹åï¼Œåç»­çš„ä¸šåŠ¡æ•°æ®é€šä¿¡éƒ½ä¼šè¿›è¡ŒåŠ å¯†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å››.ç»“å°¾ç°åœ¨ï¼Œæˆ‘ä»¬å¯¹ç½‘ç»œé€šä¿¡åœ¨åº”ç”¨å±‚çš„é€»è¾‘æœ‰äº†å®è§‚ä¸Šäº†ç†è§£ã€‚åº”ç”¨æ•°æ®çš„é€»è¾‘ç†æ¸…æ¥šäº†ï¼Œæ›´é‡è¦çš„æ˜¯å°†è¿™äº›æ•°æ®å®‰å…¨ç¨³å®šçš„ä¼ è¾“ç»™å¯¹æ–¹ã€‚è¿™å°±éœ€è¦ä¼ è¾“å±‚åè®®ç™»åœºäº†ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQï¼š316045346","categories":[{"name":"ç½‘ç»œæŠ€æœ¯","slug":"ç½‘ç»œæŠ€æœ¯","permalink":"http://huishao.cc/categories/ç½‘ç»œæŠ€æœ¯/"}],"tags":[],"keywords":[{"name":"ç½‘ç»œæŠ€æœ¯","slug":"ç½‘ç»œæŠ€æœ¯","permalink":"http://huishao.cc/categories/ç½‘ç»œæŠ€æœ¯/"}]},{"title":"iOSç ”ä¹ è®°â€”â€”èŠèŠé‡æŒ‡é’ˆä¸åƒµå°¸å¯¹è±¡å®šä½","slug":"439[iOSç ”ä¹ è®°]â€”â€”èŠèŠé‡æŒ‡é’ˆä¸åƒµå°¸å¯¹è±¡å®šä½","date":"2021-12-03T16:00:00.000Z","updated":"2021-12-04T01:52:15.829Z","comments":true,"path":"2021/12/04/439[iOSç ”ä¹ è®°]â€”â€”èŠèŠé‡æŒ‡é’ˆä¸åƒµå°¸å¯¹è±¡å®šä½/","link":"","permalink":"http://huishao.cc/2021/12/04/439[iOSç ”ä¹ è®°]â€”â€”èŠèŠé‡æŒ‡é’ˆä¸åƒµå°¸å¯¹è±¡å®šä½/","excerpt":"","text":"[iOSç ”ä¹ è®°]â€”â€”èŠèŠé‡æŒ‡é’ˆä¸åƒµå°¸å¯¹è±¡å®šä½ä¸€ã€ä»ä¸€ä¸ªå¼‚å¸¸è¯´èµ·åœ¨iOSé¡¹ç›®å¼€å‘ä¸­ï¼Œæˆ–å¤šæˆ–å°‘çš„æˆ‘ä»¬éƒ½ä¼šé‡åˆ°ä¸€äº›Crashçš„æƒ…å†µï¼Œå¤§éƒ¨åˆ†CrashæŠ›å‡ºçš„å¼‚å¸¸éƒ½æ˜¯NSExceptionå±‚çš„ï¼Œè¿™ç±»å¼‚å¸¸æ˜¯OCå±‚ä»£ç é—®é¢˜é€ æˆçš„ï¼Œé€šå¸¸å †æ ˆä¿¡æ¯å’Œå¼‚å¸¸çš„æç¤ºä¿¡æ¯éƒ½éå¸¸æ˜ç¡®ï¼Œå¯ä»¥ç›´æ¥å®šä½åˆ°å‡ºé—®é¢˜çš„ä»£ç ï¼Œä»è€Œä½¿è¿™ç±»é—®é¢˜çš„è§£å†³å¹¶ä¸å›°éš¾ã€‚å¯ä»¥å¼•èµ·Crashçš„å¼‚å¸¸é™¤äº†NSExceptionå¤–ï¼Œè¿˜æœ‰Unixå±‚å’ŒMachå±‚çš„å¼‚å¸¸ã€‚ Machå¼‚å¸¸ä¸€èˆ¬æ˜¯åº•å±‚å†…æ ¸çº§çš„å¼‚å¸¸ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€äº›åº•å±‚çš„APIæ¥å¯¹è¿™ç±»å¼‚å¸¸è¿›è¡Œæ•è·ï¼Œè¿™ä¸æ˜¯æœ¬æ–‡çš„è®¨è®ºå†…å®¹ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚Unixå±‚æ˜¯æŒ‡å¯¹äºå¼€å‘è€…æ²¡æœ‰æ•è·çš„Machå¼‚å¸¸ï¼Œä¼šè¢«è½¬æ¢æˆå¯¹åº”çš„Unixä¿¡å·ä¼ é€’ç»™å‡ºé”™çº¿ç¨‹ã€‚ å¦‚æœä½ åœ¨iOSé¡¹ç›®åœ¨çº¿ä¸Šæ”¶é›†çš„å¼‚å¸¸ä¸­ï¼Œæœ‰ç±»ä¼¼EXC_BAD_ACCESSçš„å¼‚å¸¸ï¼Œåˆ™å¤§æ¦‚ç‡æ˜¯ç”±äºå†…å­˜é—®é¢˜äº§ç”Ÿçš„é‡æŒ‡é’ˆå¼•èµ·çš„ã€‚è¿™ä¹Ÿæ˜¯æœ¬æ–‡æˆ‘ä»¬è¦è®¨è®ºçš„æ ¸å¿ƒå†…å®¹ã€‚ 1. ä»€ä¹ˆæ˜¯é‡æŒ‡é’ˆï¼Ÿå½“å‰æˆ‘ä»¬åœ¨ç¼–å†™iOSç¨‹åºæ—¶å¤§å¤šä¼šé‡‡ç”¨ARCæ¥è¿›è¡Œå†…å­˜ç®¡ç†ï¼Œé€šå¸¸æƒ…å†µä¸‹æˆ‘ä»¬æ— éœ€è¿‡å¤šçš„å¯¹å†…å­˜ç®¡ç†è¿›è¡Œå…³å¿ƒã€‚ä½†æ˜¯è¿™å¹¶ä¸ä»£è¡¨ä¸ä¼šäº§ç”Ÿå†…å­˜é—®é¢˜ã€‚ä»åŸç†ä¸Šè®²ï¼Œæˆ‘ä»¬åœ¨åˆ›å»ºä»»ä½•å¯¹è±¡çš„æ—¶å€™ï¼Œé¦–å…ˆéƒ½ä¼šé€šè¿‡æ“ä½œç³»ç»Ÿä»å†…å­˜ä¸­ç”³è¯·å‡ºä¸€å—å†…å­˜ç©ºé—´ä¾›æ­¤å¯¹è±¡ä½¿ç”¨ï¼Œå¹¶å°†æ­¤å†…å­˜ç©ºé—´çš„åœ°å€ä¿å­˜åˆ°æŒ‡é’ˆä¸­ä¾›æˆ‘ä»¬åœ¨ä»£ç ä¸­æ–¹ä¾¿çš„å¼•ç”¨åˆ°æ­¤å†…å­˜ã€‚é‚£ä¹ˆå½“è¿™ä¸ªå¯¹è±¡è¢«é”€æ¯çš„æ—¶å€™ï¼ŒåŸåˆ™ä¸Šæˆ‘ä»¬éœ€è¦åšä¸¤ä»¶äº‹ï¼Œä¸€æ˜¯å°†è¿™å—å†…å­˜è¿˜å›å»ï¼Œä¹‹åæ“ä½œç³»ç»Ÿå¯ä»¥é‡å¤åˆ©ç”¨è¿™å—å†…å­˜åˆ†é…ç»™å…¶ä»–ç”³è¯·è€…ä½¿ç”¨ï¼ŒäºŒæ˜¯å°†ä»£ç ä¸­çš„æŒ‡é’ˆæ¸…ç©ºå›æ”¶ã€‚è¿™æ ·å¯ä»¥ä¿è¯ç¨‹åºèƒ½å¤Ÿå¯æŒç»­åŒ–çš„å¥åº·è¿è¡Œã€‚å·¥ä½œè¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä½†æ˜¯æ— è®ºåœ¨ç”Ÿæ´»ä¸­è¿˜æ˜¯ç¼–ç¨‹ä¸­ï¼Œæ„å¤–æ€»ä¼šå‘ç”Ÿï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œåœ¨å‘æ“ä½œç³»ç»Ÿç”³è¯·å†…å­˜è¿™ä¸€æ­¥å¾ˆå°‘ä¼šå‡ºç°é—®é¢˜ï¼Œæ“ä½œç³»ç»Ÿæœ¬èº«çš„ç¨³å®šæ€§æ¯”åº”ç”¨ç¨‹åºè¦å¼ºå¾ˆå¤šã€‚é—®é¢˜å¤§å¤šå‡ºç°åœ¨å†…å­˜é‡Šæ”¾çš„æ—¶å€™ã€‚é—®é¢˜å¯èƒ½æœ‰ä¸¤ç§ï¼š ä¸€ç§æ˜¯å·²ç»ä¸éœ€è¦ä½¿ç”¨çš„å¯¹è±¡æˆ‘ä»¬å°†æŒ‡é’ˆå˜é‡ç›´æ¥æ¸…é™¤äº†ï¼Œä½†å´æ²¡æœ‰å‘Šè¯‰æ“ä½œç³»ç»Ÿå›æ”¶è¿™å—å†…å­˜ï¼Œæ­¤åç¨‹åºä¸­æ²¡æœ‰åœ°æ–¹å­˜å‚¨è¿™å—å†…å­˜çš„åœ°å€ï¼Œè¿™å—å†…å­˜å°†æ°¸è¿œæ— æ³•ä½¿ç”¨å’Œå›æ”¶ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œè¿™å—å†…å­˜å°±å˜æˆäº†æ— ä¸»å†…å­˜ä¸”æ“ä½œç³»ç»Ÿå¹¶ä¸çŸ¥é“ï¼Œå°±äº§ç”Ÿäº†æˆ‘ä»¬å¸¸è¯´çš„å†…å­˜æ³„éœ²é—®é¢˜ï¼Œéšç€åº”ç”¨çš„è¿è¡Œæ—¶é—´è¶Šæ¥è¶Šé•¿ï¼Œå†…å­˜æ³„éœ²å¯èƒ½è¶Šæ¥è¶Šå¤šæœ€ç»ˆå¯¼è‡´å†…å­˜ä¸å¤Ÿç”¨ï¼Œç¨‹åºæ— æ³•å†æ­£å¸¸è¿è¡Œã€‚ å¦ä¸€ç§æ˜¯æˆ‘ä»¬å‘Šè¯‰æ“ä½œç³»ç»Ÿè¦å›æ”¶è¿™å—å†…å­˜ï¼Œå¹¶ä¸”è¿™å—å†…å­˜ä¹ŸçœŸæ­£çš„è¢«å›æ”¶äº†ï¼Œä½†æ˜¯ç¨‹åºä¸­ä¾ç„¶æœ‰æŒ‡é’ˆå˜é‡å­˜å‚¨ç€è¿™ä¸ªåœ°å€æ²¡æœ‰æ¸…ç©ºï¼Œæ­¤æ—¶è¿™ä¸ªæŒ‡é’ˆå°±å˜æˆäº†ä¹ŸæŒ‡é’ˆï¼Œå› ä¸ºå®ƒæ‰€æŒ‡å‘çš„å†…å­˜å·²ç»å›æ”¶ï¼Œè¿™å—å†…å­˜å…·ä½“æ˜¯åˆè¢«åˆ©ç”¨äº†è¿˜æ˜¯ä¾ç„¶å­˜æ”¾ç€åŸæ¥çš„æ•°æ®æˆ‘ä»¬éƒ½ä¸€æ— æ‰€çŸ¥ã€‚æ­¤åå¦‚æœä¸å°å¿ƒåˆé€šè¿‡è¿™ä¸ªæŒ‡é’ˆä½¿ç”¨äº†è¿™å—å†…å­˜çš„æ•°æ®ï¼Œæ— è®ºè¯»å†™éƒ½å°†äº§ç”Ÿå„ç§åƒå¥‡ç™¾æ€ªçš„é—®é¢˜ï¼Œä¸”æˆ‘ä»¬å¾ˆéš¾å®šä½ã€‚æœ¬æ–‡æˆ‘ä»¬ä¸»è¦èŠçš„å°±æ˜¯è¿™ç±»é‡æŒ‡é’ˆé—®é¢˜çš„äº§ç”ŸåŸå› ä¸å®šä½æ–¹æ³•ã€‚ 2. é‡æŒ‡é’ˆä¼šäº§ç”Ÿå“ªäº›é—®é¢˜ï¼Ÿå¼€å‘ä¸­æˆ‘ä»¬é‡åˆ°çš„å¤§éƒ¨åˆ†çš„EXC_BAD_ACCESSé—®é¢˜éƒ½æ˜¯ç”±é‡æŒ‡é’ˆå¯¼è‡´çš„ï¼Œä¸»è¦æœ‰ä¸¤ç§ä¿¡å·ï¼šSIGSEGVå’ŒSIGBUSã€‚å…¶ä¸­SIGSEGVè¡¨ç¤ºæ“ä½œçš„åœ°å€éæ³•ï¼Œè®¿é—®äº†æœªåˆ†é…çš„å†…å­˜æˆ–è€…å†™å…¥äº†æ²¡æœ‰å†™æƒé™çš„å†…å­˜ã€‚SIGBUSè¡¨ç¤ºé”™è¯¯çš„å†…å­˜ç±»å‹è®¿é—®ã€‚ é‡æŒ‡é’ˆä¼šäº§ç”Ÿçš„é—®é¢˜åƒå¥‡ç™¾æ€ªï¼Œéš¾ä»¥å®šä½ã€‚å½“ç¨‹åºä¸­ä½¿ç”¨åˆ°äº†é‡æŒ‡é’ˆæ—¶ï¼Œå¯èƒ½å­˜åœ¨ä¸¤å¤§ç§åœºæ™¯ï¼š 1&gt; è®¿é—®çš„å†…å­˜æ²¡æœ‰è¢«è¦†ç›– å¦‚æœåŸå¯¹è±¡ä¾èµ–çš„å…¶ä»–å¯¹è±¡æ²¡æœ‰è¢«åˆ é™¤ï¼Œåˆ™çœ‹ä¸Šå»ç¨‹åºçš„è¿è¡Œå¥½åƒä»»ä½•é—®é¢˜ï¼Œä½†æ˜¯å®é™…ä¸Šå´å¾ˆå±é™©ï¼Œç¨‹åºé€»è¾‘ä¸Šçš„è¡¨ç°å·²ç»ä¸å¯æ§ã€‚ å¦‚æœåŸå¯¹è±¡ä¾èµ–çš„å…¶ä»–å¯¹è±¡æœ‰åˆ é™¤æƒ…å†µï¼Œåˆ™å†…éƒ¨å¯èƒ½è¿˜æœ‰æœ‰å…¶ä»–é‡æŒ‡é’ˆç”Ÿæˆï¼Œä¾ç„¶ä¼šå‡ºç°å„ç§å¤æ‚çš„å¼‚å¸¸åœºæ™¯ã€‚ 2&gt; è®¿é—®çš„å†…å­˜é‡æ–°è¢«è¦†ç›–äº† è¿™ç§ä»åœºæ™¯ä¼šæ›´åŠ éº»çƒ¦ï¼Œå¦‚æœå½“å‰å†…å­˜åŒºåŸŸçš„å¯è®¿é—®æ€§å‘ç”Ÿäº†å˜åŒ–ï¼Œåˆ™ä¼šäº§ç”Ÿè®¸å¤šç±»å‹çš„å¼‚å¸¸ï¼Œä¾‹å¦‚objc_msgSendå¤±è´¥ï¼ŒSIGBUSåœ°å€ç±»å‹å¼‚å¸¸ï¼ŒSIGFPEè¿ç®—ç¬¦å¼‚å¸¸ï¼ŒSIGILLæŒ‡ä»¤å¼‚å¸¸ç­‰ç­‰ã€‚ å¦‚æœå½“å‰å†…å­˜æ˜¯å¯ä»¥è®¿é—®çš„ï¼Œåˆ™å¯èƒ½è¿èƒŒæˆ‘ä»¬æœ¬æ„çš„å†™åå…¶ä»–åœ°æ–¹åœ¨ä½¿ç”¨çš„å†…å­˜ï¼Œä½¿å…¶ä»–åœ°æ–¹åœ¨ä½¿ç”¨æ—¶äº§ç”Ÿå¼‚å¸¸ã€‚ä¹Ÿå¯èƒ½è¦ä½¿ç”¨çš„æ•°æ®ç±»å‹å’Œæˆ‘ä»¬åŸå¯¹è±¡å¯¹ä¸ä¸Šï¼Œå¯¼è‡´æœªå®ç°çš„é€‰æ‹©å™¨ç±»çš„é”™è¯¯ï¼ŒæŸ¥æ‰¾æ–¹æ³•ç±»çš„é”™è¯¯ï¼Œå„ç§åº•å±‚é€»è¾‘é”™è¯¯ï¼Œä»¥åŠmallocé”™è¯¯ç­‰ã€‚è¿™æ—¶è¦æ’æŸ¥é—®é¢˜å°±éå¸¸éš¾äº†ã€‚ ç»¼ä¸Šæ‰€è¿°ï¼Œé‡æŒ‡é’ˆçš„å±å®³æ˜¯éå¸¸å¤§ï¼Œé™¤äº†å…¶æœ¬èº«ä¼šé€ æˆå¼‚å¸¸Crashå¤–ï¼Œè¿˜å¯èƒ½ä¼šä½¿å…¶ä»–æ­£å¸¸ä½¿ç”¨çš„ä»£ç äº§ç”Ÿå¼‚å¸¸ï¼Œå¹¶ä¸”æœ‰ä¸å¯å¤ç°æ€§ä¸éšæœºæ€§ï¼Œä¾‹å¦‚ä½ å¯èƒ½å‘ç°æŸä¸ªCrashçš„å †æ ˆæ˜¯è°ƒç”¨äº†æŸä¸ªå¯¹è±¡çš„æŸä¸ªæ–¹æ³•æ‰¾ä¸å¤§ï¼Œä½†æ˜¯ä½ æœéä»£ç ä¹Ÿæ²¡æœ‰æ‰¾åˆ°ç±»ä¼¼çš„æ–¹æ³•è°ƒç”¨ï¼Œå…¶å®å°±æ˜¯å…¶ä»–åœ°æ–¹å‡ºç°äº†é‡æŒ‡é’ˆé—®é¢˜ï¼Œä¹‹åè¿™ä¸ªæ­£ç¡®çš„å¯¹è±¡åˆšå¥½åˆ†é…åˆ°äº†é‡æŒ‡é’ˆæ‰€æŒ‡å‘çš„å†…å­˜ï¼Œé‡æŒ‡é’ˆå°†æ­¤å†…å­˜çš„æ•°æ®ç ´åäº†ã€‚å¯¹äºè¿™ç§Crashé—®é¢˜ï¼Œæˆ‘ä»¬å‡ ä¹æ˜¯æŸæ‰‹æ— ç­–çš„ã€‚ 3. åŠ¨æ‰‹é€ ä¸€ä¸ªé‡æŒ‡é’ˆåœºæ™¯è¯•è¯•çœ‹é€šè¿‡å‰é¢çš„ä»‹ç»ï¼Œæˆ‘ä»¬äº†è§£äº†é‡æŒ‡é’ˆé—®é¢˜çš„äº§ç”ŸåŸå› ä¸å±å®³ã€‚ç°åœ¨å¯ä»¥åŠ¨æ‰‹ä¸€è¯•ã€‚ä½¿ç”¨Xcodeæ–°å»ºä¸€ä¸ªiOSå·¥ç¨‹ã€‚åœ¨å…¶ä¸­æ–°å»ºä¸€ä¸ªåä¸ºMyObjectçš„ç±»ï¼Œä¸ºå…¶æ·»åŠ ä¸€ä¸ªå±æ€§ï¼Œå¦‚ä¸‹ï¼š 1234567#import &lt;Foundation/Foundation.h&gt;@interface MyObject : NSObject@property(copy) NSString *name;@end åœ¨ViewControllerç±»ä¸­ç¼–å†™å¦‚ä¸‹æµ‹è¯•ä»£ç ï¼š 1234567891011121314151617181920212223242526#import \"ViewController.h\"#import \"MyObject.h\"@interface ViewController ()@property (nonatomic, unsafe_unretained)MyObject *object;@end@implementation ViewController- (void)viewDidLoad &#123; [super viewDidLoad]; MyObject *object = [[MyObject alloc] init]; self.object = object; self.object.name = @\"HelloWorld\"; void *p = (__bridge void *)(self.object); NSLog(@\"%p,%@\",self.object,self.object.name); NSLog(@\"%p,%@\",p, [(__bridge MyObject *)p name]);&#125;- (void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event &#123; NSLog(@\"%p\",self-&gt;_object); NSLog(@\"%@\",self.object.name);&#125;@end è¿™é‡Œæˆ‘ä»¬æ‰‹åŠ¨çš„é€ å‡ºäº†ä¸€ä¸ªä¼šå‡ºç°é‡æŒ‡é’ˆé—®é¢˜çš„åœºæ™¯ï¼ŒViewControllerç±»çš„objectå±æ€§å£°æ˜ä¸ºçš„unsafe_unretainedï¼Œè¿™ä¸ªä¿®é¥°ç¬¦çš„æ„æ€æ˜¯å½“å‰å±æ€§ä¸è¢«ARCæ‰€ç®¡ç†ï¼Œå…¶æ‰€å¼•ç”¨çš„å¯¹è±¡é‡Šæ”¾åï¼Œæ­¤æŒ‡é’ˆä¹Ÿä¸ä¼šè¢«ç½®ç©ºã€‚ä¸Šé¢ä»£ç æˆ‘ä»¬åœ¨viewDidLoadæ–¹æ³•ä¸­åˆ›å»ºäº†ä¸€ä¸ªMyObjectå¯¹è±¡ï¼Œå¹¶å¤åˆ¶ç»™äº†å½“å‰æ§åˆ¶å™¨çš„objectå±æ€§ï¼Œç”±äºæ ˆå†…å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸä¸ºå½“å‰ä»£ç å—å†…æœ‰æ•ˆï¼Œå› æ­¤å½“viewDidLoadæ–¹æ³•ç»“æŸåï¼Œæ­¤å†…å­˜å°±ä¼šè¢«å›æ”¶ï¼Œæ­¤æ—¶objectæŒ‡é’ˆå°±æˆäº†é‡æŒ‡é’ˆã€‚ æˆ‘ä»¬å¯ä»¥åœ¨viewDidLoadæ–¹æ³•çš„æœ€åæ‰“ä¸Šæ–­ç‚¹ï¼Œè§‚å¯Ÿå½“å‰MyOjectå¯¹è±¡çš„å†…å­˜åˆ†é…åœ°å€ï¼Œå¦‚ä¸‹ï¼š å¯ä»¥çœ‹åˆ°ï¼Œå½“æ¬¡è¿è¡Œæ—¶ï¼Œobjectå¯¹è±¡åˆ†é…çš„å†…å­˜åœ°å€ä¸º0x600001e542d0ï¼ˆæ¯æ¬¡è¿è¡Œéƒ½ä¼šä¸åŒï¼‰ï¼Œåé¢è®¿é—®å¯¹è±¡çš„å±æ€§å®é™…ä¸Šå°±æ˜¯å¯¹æ­¤å†…å­˜ä¸­æ•°æ®çš„è®¿é—®ï¼Œæˆ‘ä»¬å¦‚æœçŸ¥é“äº†å†…å­˜åœ°å€ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨åœ°å€è¿›è¡Œè®¿é—®ï¼Œä¸ä¸€å®šè¦æœ‰å˜é‡ï¼Œä¾‹å¦‚ä¸Šå›¾ä¸­é€šè¿‡LLDBä¸­çš„poæŒ‡ä»¤å¯ä»¥ç›´æ¥å‘å†…å­˜åœ°å€å‘é€æ¶ˆæ¯ï¼Œæ•ˆæœå’Œé€šè¿‡å˜é‡è°ƒç”¨å¯¹è±¡æ–¹æ³•æ˜¯ä¸€æ ·çš„ã€‚ ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿è¡Œåç‚¹å‡»ä¸€ä¸‹å½“å‰é¡µé¢ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹éƒ½ä¼šå‡ºç°åœ°å€å¼‚å¸¸Crashï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡LLDBè¾“å‡ºä¸‹çº¿ç¨‹çš„å †æ ˆä¿¡æ¯ï¼Œå¦‚ä¸‹ï¼š è¿˜æœ‰æ—¶å€™ï¼Œç¨‹åºå¯èƒ½ä¼šç›´æ¥Crashåˆ°mainæ–¹æ³•ä¸­ï¼Œè¾“å…¥æ›´å¥‡æ€ªçš„å †æ ˆä¿¡æ¯ï¼Œå¦‚ä¸‹ï¼š å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå †æ ˆä¿¡æ¯æç¤ºæˆ‘ä»¬è°ƒç”¨äº†æ•°ç»„çš„nameæ–¹æ³•ï¼Œè¿™å…¶å®å°±æ˜¯å› ä¸ºæ­¤å—å†…å­˜è¢«é‡æ–°åˆ†é…äº†ã€‚ æˆ‘ä»¬åªåˆ›å»ºäº†ä¸€ä¸ªæ²¡æœ‰ä»»ä½•é€»è¾‘çš„Demoé¡¹ç›®ï¼Œé‡æŒ‡é’ˆçš„é—®é¢˜éƒ½å¦‚æ­¤å¤šæ ·ï¼Œå¦‚æœæ˜¯åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå‡ºäº†é‡æŒ‡é’ˆé—®é¢˜æˆ‘ä»¬æ›´éš¾æ‰¾åˆ°é—®é¢˜æºå¤´ã€‚å¹¶ä¸”åœ¨ARCç¯å¢ƒä¸‹ï¼Œä¸Šé¢ç¤ºä¾‹çš„åœºæ™¯å…¶å®å¾ˆå¥½æ’æŸ¥åˆ°ï¼Œæ›´å¤šäº§ç”Ÿé‡æŒ‡é’ˆçš„åŸå› æ˜¯å¤šçº¿ç¨‹ä¸å®‰å…¨çš„è¯»å†™æ•°æ®é€ æˆçš„ï¼Œç»“åˆå¤šçº¿ç¨‹ä½¿ç”¨ï¼Œé‡æŒ‡é’ˆçš„é—®é¢˜åˆ™æ›´åŠ éš¾æŸ¥ã€‚ äºŒã€ä»åŸç†çœ‹é‡æŒ‡é’ˆçš„ç›‘æ§è¦è§£å†³ç”±é‡æŒ‡é’ˆäº§ç”Ÿçš„é—®é¢˜ï¼Œé™¤äº†ç¼–ç¨‹æ—¶å°½é‡æ³¨æ„ä¸€äº›ï¼Œé¿å…å±é™©çš„å†™æ³•å¤–ã€‚æ›´é‡è¦çš„æ˜¯èƒ½æ€»ç»“å‡ºä¸€å¥—æ–¹æ¡ˆæ¥æµç¨‹åŒ–çš„å¯¹æ­¤ç±»é—®é¢˜è¿›è¡Œç›‘æ§ã€‚ç”±äºé‡æŒ‡é’ˆé—®é¢˜çš„ç‰¹æ€§æ‰€è‡´ï¼Œæˆ‘ä»¬åœ¨å†…å­˜é‡Šæ”¾æ—¶å…¶å®æ˜¯å¹¶ä¸çŸ¥é“æ˜¯å¦ä¼šäº§ç”Ÿé‡æŒ‡é’ˆé—®é¢˜çš„ï¼Œå‘ç”Ÿäº†é‡æŒ‡é’ˆé—®é¢˜åä¹Ÿæ— æ³•å›æº¯ã€‚å› æ­¤æˆ‘ä»¬è¦ç”¨é¢„è®¾çš„æ€è·¯æ¥æ‰¾è¿™ç±»é—®é¢˜çš„ç›‘æ§æ–¹æ¡ˆï¼Œå³å‡è®¾å½“å‰å†…å­˜é‡Šæ”¾åä¾ç„¶æœ‰é‡æŒ‡é’ˆè¦è®¿é—®å®ƒï¼Œåœ¨è®¾è®¡æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä¸çœŸæ­£çš„å°†è¿™å—å†…å­˜é‡Šæ”¾ï¼Œè€Œæ˜¯å°†è¿™å—å†…å­˜æ ‡è®°æˆæœ‰é—®é¢˜çš„ï¼Œä¹‹åå¦‚æœåˆå‘ç°æœ‰å¯¹è¿™å—æœ‰é—®é¢˜å†…å­˜çš„è®¿é—®å‡ºç°ï¼Œåˆ™è¡¨æ˜å‡ºç°äº†é‡æŒ‡é’ˆé—®é¢˜ã€‚åœ¨æ ‡è®°å†…å­˜æ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è®°å½•ä¸€ä¸‹åŸå¯¹è±¡çš„æŸäº›ä¿¡æ¯ï¼Œä¾‹å¦‚ç±»åï¼Œè¿™æ ·åœ¨å‘ç”Ÿé‡æŒ‡é’ˆé—®é¢˜æ—¶ï¼Œæ— è®ºå…·ä½“Crashçš„å †æ ˆæƒ…å†µå¦‚ä½•ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥çŸ¥é“æ˜¯å…·ä½“å“ªä¸ªç±»çš„å¯¹è±¡é‡Šæ”¾é—®é¢˜äº§ç”Ÿçš„é‡æŒ‡é’ˆï¼Œèƒ½æå¤§çš„ç¼©å°é—®é¢˜çš„æ’æŸ¥èŒƒå›´ã€‚ å› æ­¤å¤„ç†é‡æŒ‡é’ˆé—®é¢˜çš„æ ¸å¿ƒç‚¹åœ¨äºä¸¤ç‚¹ï¼š 1.é¢„è®¾æ ‡è®°å†…å­˜ï¼Œè¢«åŠ¨ç­‰å¾…é‡æŒ‡é’ˆé—®é¢˜è§¦å‘ã€‚ 2.è®°å½•äº§ç”Ÿé‡æŒ‡é’ˆé—®é¢˜çš„ç±»ï¼Œä»ç±»å¯¹è±¡çš„ä½¿ç”¨å…¥æ‰‹æ’æŸ¥è€Œä¸æ˜¯Crashæ—¶çš„å †æ ˆå…¥æ‰‹æ’æŸ¥ã€‚ é’ˆå¯¹å¦‚ä¸Šä¸¤ç‚¹ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹å¦‚ä½•å®ç°ã€‚ 1. åƒµå°¸å¯¹è±¡å°†è¦é‡Šæ”¾çš„å¯¹è±¡å†…å­˜ä¸çœŸæ­£å›æ”¶ï¼Œè€Œæ˜¯ä»…ä»…è¿›è¡Œæ ‡è®°ï¼Œæˆ‘ä»¬ä¼šå½¢è±¡çš„æˆæ­¤æ—¶çš„å¯¹è±¡ä¸ºâ€œåƒµå°¸å¯¹è±¡â€ã€‚Xcodeé»˜è®¤æ”¯æŒå¼€å¯åƒµå°¸å¯¹è±¡ï¼Œå½“æˆ‘ä»¬å‘ä¸€ä¸ªåƒµå°¸å¯¹è±¡è¿›è¡Œè®¿é—®æ—¶ï¼Œå°±ä¼šå¿…ç„¶äº§ç”ŸCrashï¼Œå¹¶ä¸”æ§åˆ¶å°è¾“å‡ºç›¸å…³æç¤ºä¿¡æ¯ã€‚åœ¨Xcodeä¸­å¯¹è¦è¿è¡Œçš„schemeè¿›è¡Œç¼–è¾‘ï¼Œæ‰“å¼€åƒµå°¸å¯¹è±¡åŠŸèƒ½ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š å†æ¬¡è¿è¡Œå·¥ç¨‹ï¼Œç¨‹åºCrashåå°†è¾“å‡ºå¦‚ä¸‹ä¿¡æ¯ï¼š 1*** -[MyObject retain]: message sent to deallocated instance 0x600000670670 æˆ‘ä»¬å¯ä»¥æ˜ç¡®çš„çŸ¥é“æ˜¯MyObjectå¯¹è±¡çš„å†…å­˜é—®é¢˜å¯¼è‡´äº†é‡æŒ‡é’ˆå´©æºƒã€‚ Xcodeçš„åƒµå°¸å¯¹è±¡åŠŸèƒ½è™½ç„¶å¥½ç”¨ï¼Œä½†æ˜¯åªèƒ½è°ƒè¯•æ—¶ä½¿ç”¨ï¼Œæ›´å¤šæ—¶å€™æˆ‘ä»¬äº§ç”Ÿçš„é‡æŒ‡é’ˆé—®é¢˜éƒ½æ˜¯çº¿ä¸Šç¯å¢ƒçš„ï¼Œè€Œä¸”æ— æ³•å¤ç°ï¼Œè¿™ä¸ªåŠŸèƒ½å°±æ˜¾å¾—éå¸¸é¸¡è‚‹çš„ã€‚æˆ‘ä»¬èƒ½å¦ä¸ä¾èµ–Xcodeæ¥å®ç°é‡æŒ‡é’ˆçš„ç›‘æ§å‘¢ï¼Ÿé¦–å…ˆæˆ‘ä»¬éœ€è¦å…ˆææ˜ç™½Xcodeä¸­åƒµå°¸å¯¹è±¡çš„å®ç°åŸç†ã€‚ 2. Appleåƒµå°¸å¯¹è±¡çš„å®ç°åŸç†æ¢ç©¶é¦–å…ˆæˆ‘ä»¬å¤§è‡´å¯ä»¥çŸ¥é“ï¼Œè¦å®ç°åƒµå°¸å¯¹è±¡å¤§æ¦‚ç‡æ˜¯è¦å¯¹deallocæ–¹æ³•åšäº›äº‹æƒ…çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä»è¿™ä¸ªæ–¹æ³•å…¥æ‰‹æ‰¾çº¿ç´¢ï¼ŒæŸ¥çœ‹objcçš„æºä»£ç ï¼Œåœ¨å…¶NSObject.mä¸­å¯ä»¥çœ‹åˆ°å¦‚ä¸‹ä»£ç ï¼š 1234// Replaced by NSZombies- (void)dealloc &#123; _objc_rootDealloc(self);&#125; ä»æ³¨é‡Šå¯ä»¥çœ‹åˆ°ï¼Œç³»ç»Ÿå®ç°çš„åƒµå°¸å¯¹è±¡çš„ç¡®æ˜¯å¤„ç†deallocæ–¹æ³•äº†ï¼Œæ¨æµ‹å…¶å®é€šè¿‡Runtimeæ›¿æ¢äº†NSObjectçš„deallocæ–¹æ³•ã€‚åœ¨CoreFoundationçš„æºç ä¸­ä¹Ÿæœ‰éƒ¨åˆ†å…³äºZombiesçš„å†…å®¹ï¼Œåœ¨CFRuntime.cä¸­å¯ä»¥çœ‹åˆ°å¦‚ä¸‹ä»£ç ï¼š 1234extern void __CFZombifyNSObject(void); // from NSObject.mvoid _CFEnableZombies(void) &#123;&#125; å…¶ä¸­ï¼Œ_CFEnableZombiesæ¯”è¾ƒå¥½ç†è§£ï¼Œå®ƒåº”è¯¥æ˜¯æ¥è¡¨ç¤ºæ˜¯å¦å¼€å¯åƒµå°¸å¯¹è±¡åŠŸèƒ½çš„ï¼Œåº”è¯¥å’Œæˆ‘ä»¬åœ¨Xcodeä¸­è®¾ç½®çš„ç¯å¢ƒå˜é‡åŠŸèƒ½ä¸€è‡´ï¼Œ__CFZombifyNSObjectä»æ³¨é‡Šå¯ä»¥çŸ¥é“ï¼Œåº”è¯¥æ˜¯å¯¹åƒµå°¸å¯¹è±¡çš„å®ç°ã€‚æˆ‘ä»¬åœ¨Xcodeä¸­æ·»åŠ ä¸€ä¸ª__CFZombifyNSObjectçš„ç¬¦å·æ–­ç‚¹ï¼Œæ–­ç‚¹åå†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼š çœ‹åˆ°è¿™é‡Œçš„æ±‡ç¼–ï¼Œä½ åº”è¯¥ä¸ä¼šå¤ªé™Œç”Ÿï¼Œæˆ‘ä»¬æŠŠæ ¸å¿ƒçš„ä¼ªä»£ç æå‡ºæ¥ï¼Œå¤§è‡´å¦‚ä¸‹ï¼š 12345678910111213// å®šä¹‰å­—ç¬¦ä¸²define &quot;NSObject&quot;// ç”¨æ¥è·å–NSObjectç±»objc_lookUpClass &quot;NSObject&quot;// å®šä¹‰å­—ç¬¦ä¸²define &quot;dealloc&quot;define &quot;__dealloc_zombie&quot;// è·å–deallocæ–¹æ³•çš„å®ç°class_getInstanceMethod &quot;NSObject&quot; &quot;dealloc&quot;// è·å–__dealloc_zombieæ–¹æ³•çš„å®ç°class_getInstanceMethod &quot;NSObject&quot; &quot;__dealloc_zombie&quot;// äº¤æ¢deallocä¸__dealloc_zombieçš„æ–¹æ³•å®ç°method_exchangeImplementations &quot;dealloc&quot; &quot;__dealloc_zombie&quot; å’Œæˆ‘ä»¬æƒ³çš„å·®ä¸å¤šï¼Œä¸‹é¢æˆ‘ä»¬å¯ä»¥å†æ·»åŠ ä¸€ä¸ª__dealloc_zombieçš„ç¬¦å·æ–­ç‚¹ï¼Œçœ‹ä¸€çœ‹__dealloc_zombieæ–¹æ³•æ˜¯æ€ä¹ˆå®ç°çš„ï¼Œå¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768CoreFoundation`-[NSObject(NSObject) __dealloc_zombie]:-&gt; 0x10ef77c49 &lt;+0&gt;: pushq %rbp 0x10ef77c4a &lt;+1&gt;: movq %rsp, %rbp 0x10ef77c4d &lt;+4&gt;: pushq %r14 0x10ef77c4f &lt;+6&gt;: pushq %rbx 0x10ef77c50 &lt;+7&gt;: subq $0x10, %rsp 0x10ef77c54 &lt;+11&gt;: movq 0x2e04fd(%rip), %rax ; (void *)0x0000000110021970: __stack_chk_guard 0x10ef77c5b &lt;+18&gt;: movq (%rax), %rax 0x10ef77c5e &lt;+21&gt;: movq %rax, -0x18(%rbp) 0x10ef77c62 &lt;+25&gt;: testq %rdi, %rdi 0x10ef77c65 &lt;+28&gt;: js 0x10ef77d04 ; &lt;+187&gt; 0x10ef77c6b &lt;+34&gt;: movq %rdi, %rbx 0x10ef77c6e &lt;+37&gt;: cmpb $0x0, 0x488703(%rip) ; __CFConstantStringClassReferencePtr + 7 0x10ef77c75 &lt;+44&gt;: je 0x10ef77d1d ; &lt;+212&gt; 0x10ef77c7b &lt;+50&gt;: movq %rbx, %rdi 0x10ef77c7e &lt;+53&gt;: callq 0x10eff4b52 ; symbol stub for: object_getClass 0x10ef77c83 &lt;+58&gt;: leaq -0x20(%rbp), %r14 0x10ef77c87 &lt;+62&gt;: movq $0x0, (%r14) 0x10ef77c8e &lt;+69&gt;: movq %rax, %rdi 0x10ef77c91 &lt;+72&gt;: callq 0x10eff464e ; symbol stub for: class_getName 0x10ef77c96 &lt;+77&gt;: leaq 0x242db5(%rip), %rsi ; &quot;_NSZombie_%s&quot; 0x10ef77c9d &lt;+84&gt;: movq %r14, %rdi 0x10ef77ca0 &lt;+87&gt;: movq %rax, %rdx 0x10ef77ca3 &lt;+90&gt;: xorl %eax, %eax 0x10ef77ca5 &lt;+92&gt;: callq 0x10eff4570 ; symbol stub for: asprintf 0x10ef77caa &lt;+97&gt;: movq (%r14), %rdi 0x10ef77cad &lt;+100&gt;: callq 0x10eff4ab0 ; symbol stub for: objc_lookUpClass 0x10ef77cb2 &lt;+105&gt;: movq %rax, %r14 0x10ef77cb5 &lt;+108&gt;: testq %rax, %rax 0x10ef77cb8 &lt;+111&gt;: jne 0x10ef77cd7 ; &lt;+142&gt; 0x10ef77cba &lt;+113&gt;: leaq 0x2427aa(%rip), %rdi ; &quot;_NSZombie_&quot; 0x10ef77cc1 &lt;+120&gt;: callq 0x10eff4ab0 ; symbol stub for: objc_lookUpClass 0x10ef77cc6 &lt;+125&gt;: movq -0x20(%rbp), %rsi 0x10ef77cca &lt;+129&gt;: movq %rax, %rdi 0x10ef77ccd &lt;+132&gt;: xorl %edx, %edx 0x10ef77ccf &lt;+134&gt;: callq 0x10eff4a62 ; symbol stub for: objc_duplicateClass 0x10ef77cd4 &lt;+139&gt;: movq %rax, %r14 0x10ef77cd7 &lt;+142&gt;: movq -0x20(%rbp), %rdi 0x10ef77cdb &lt;+146&gt;: callq 0x10eff482e ; symbol stub for: free 0x10ef77ce0 &lt;+151&gt;: movq %rbx, %rdi 0x10ef77ce3 &lt;+154&gt;: callq 0x10eff4a5c ; symbol stub for: objc_destructInstance 0x10ef77ce8 &lt;+159&gt;: movq %rbx, %rdi 0x10ef77ceb &lt;+162&gt;: movq %r14, %rsi 0x10ef77cee &lt;+165&gt;: callq 0x10eff4b6a ; symbol stub for: object_setClass 0x10ef77cf3 &lt;+170&gt;: cmpb $0x0, 0x48867f(%rip) ; __CFZombieEnabled 0x10ef77cfa &lt;+177&gt;: je 0x10ef77d04 ; &lt;+187&gt; 0x10ef77cfc &lt;+179&gt;: movq %rbx, %rdi 0x10ef77cff &lt;+182&gt;: callq 0x10eff482e ; symbol stub for: free 0x10ef77d04 &lt;+187&gt;: movq 0x2e044d(%rip), %rax ; (void *)0x0000000110021970: __stack_chk_guard 0x10ef77d0b &lt;+194&gt;: movq (%rax), %rax 0x10ef77d0e &lt;+197&gt;: cmpq -0x18(%rbp), %rax 0x10ef77d12 &lt;+201&gt;: jne 0x10ef77d3d ; &lt;+244&gt; 0x10ef77d14 &lt;+203&gt;: addq $0x10, %rsp 0x10ef77d18 &lt;+207&gt;: popq %rbx 0x10ef77d19 &lt;+208&gt;: popq %r14 0x10ef77d1b &lt;+210&gt;: popq %rbp 0x10ef77d1c &lt;+211&gt;: retq 0x10ef77d1d &lt;+212&gt;: movq 0x2e0434(%rip), %rax ; (void *)0x0000000110021970: __stack_chk_guard 0x10ef77d24 &lt;+219&gt;: movq (%rax), %rax 0x10ef77d27 &lt;+222&gt;: cmpq -0x18(%rbp), %rax 0x10ef77d2b &lt;+226&gt;: jne 0x10ef77d3d ; &lt;+244&gt; 0x10ef77d2d &lt;+228&gt;: movq %rbx, %rdi 0x10ef77d30 &lt;+231&gt;: addq $0x10, %rsp 0x10ef77d34 &lt;+235&gt;: popq %rbx 0x10ef77d35 &lt;+236&gt;: popq %r14 0x10ef77d37 &lt;+238&gt;: popq %rbp 0x10ef77d38 &lt;+239&gt;: jmp 0x10eff44c8 ; symbol stub for: _objc_rootDealloc 0x10ef77d3d &lt;+244&gt;: callq 0x10eff443e ; symbol stub for: __stack_chk_fail æ±‡ç¼–å†…å®¹è¾ƒå¤šï¼Œæ•´ä½“æµç¨‹æ˜¯æ¯”è¾ƒæ¸…æ™°çš„ï¼Œä¼ªä»£ç å¦‚ä¸‹: 12345678910111213141516171819202122232425// è·å–å½“å‰ç±»object_getClass// é€šè¿‡å½“å‰ç±»è·å–å½“å‰ç±»å‹class_getName// å°†_NSZombie_æ‹¼æ¥ä¸Šå½“å‰ç±»åzombiesClsName = &quot;_NSZombie_%s&quot; + className// è·å–zombiesClsNameç±»objc_lookUpClass zombiesClsName// åˆ¤æ–­æ˜¯å¦å·²ç»å­˜åœ¨zombiesClsif not zombiesCls: // å¦‚æœä¸å­˜åœ¨ // ç°è·å–&quot;_NSZombie_&quot;ç±» cls = objc_lookUpClass &quot;_NSZombie_&quot; // å¤åˆ¶å‡ºä¸€ä¸ªclsç±»ï¼Œç±»åä¸ºzombiesClsName objc_duplicateClass cls zombiesClsName// å­—ç¬¦ä¸²å˜é‡é‡Šæ”¾free zombiesClsName// objcä¸­åŸæœ¬çš„å¯¹è±¡é”€æ¯æ–¹æ³•objc_destructInstance(self)// å°†å½“å‰å¯¹è±¡çš„ç±»ä¿®æ”¹ä¸ºzombiesClsobject_setClass zombiesCls// åˆ¤æ–­æ˜¯å¦å¼€å¯äº†åƒµå°¸å¯¹è±¡åŠŸèƒ½if not __CFZombieEnabled: // å¦‚æœæ²¡å¼€å¯ å°†å½“å‰å†…å­˜é‡Šæ”¾æ‰ free ä¸Šé¢çš„ä¼ªä»£ç åŸºæœ¬æ˜¯__dealloc_zombieæ–¹æ³•å®ç°çš„æ•´ä½“è¿‡ç¨‹ï¼Œåœ¨objcæºç ä¸­ï¼ŒNSObjectç±»åŸæœ¬çš„deallocæ–¹æ³•å®ç°è·¯å¾„å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041- (void)dealloc &#123; _objc_rootDealloc(self);&#125;void _objc_rootDealloc(id obj)&#123; ASSERT(obj); obj-&gt;rootDealloc();&#125;inline void objc_object::rootDealloc()&#123; // taggedPointeræ— éœ€å›æ”¶å†…å­˜ if (isTaggedPointer()) return; // fixme necessary? // nonpointerä¸º1è¡¨ç¤ºä¸åªæ˜¯åœ°å€ï¼Œisaä¸­åŒ…å«äº†å…¶ä»–ä¿¡æ¯ // weakly_referencedè¡¨ç¤ºæ˜¯å¦æœ‰å¼±å¼•ç”¨ // has_assoc è¡¨ç¤ºæ˜¯å¦æœ‰å…³è”å±æ€§ // has_cxx_dtor æ˜¯å¦éœ€è¦C++æˆ–Objcææ„ // has_sidetable_rcæ˜¯å¦æœ‰æ•£åˆ—è¡¨è®¡æ•°å¼•è„š if (fastpath(isa.nonpointer &amp;&amp; !isa.weakly_referenced &amp;&amp; !isa.has_assoc &amp;&amp; !isa.has_cxx_dtor &amp;&amp; !isa.has_sidetable_rc)) &#123; // å¦‚æœéƒ½æ²¡æœ‰ ç›´æ¥å›æ”¶å†…å­˜ assert(!sidetable_present()); free(this); &#125; else &#123; object_dispose((id)this); &#125;&#125;id object_dispose(id obj)&#123; if (!obj) return nil; // è¿›è¡Œå†…å­˜å›æ”¶å‰çš„é”€æ¯å·¥ä½œ objc_destructInstance(obj); free(obj); return nil;&#125; å¯ä»¥çœ‹åˆ°ï¼Œ__dealloc_zombieä¸çœŸæ­£çš„deallocçš„å®ç°å…¶å®åªå·®äº†å½“å‰å†…å­˜çš„å›æ”¶éƒ¨åˆ†ï¼Œobjc_destructInstanceæ–¹æ³•ä¼šæ­£å¸¸æ‰§è¡Œçš„ï¼Œè¿™ä¸ªæ–¹æ³•å®ç°å¦‚ä¸‹ï¼š 12345678910111213141516void *objc_destructInstance(id obj) &#123; if (obj) &#123; // Read all of the flags at once for performance. bool cxx = obj-&gt;hasCxxDtor(); bool assoc = obj-&gt;hasAssociatedObjects(); // C++ ææ„ if (cxx) object_cxxDestruct(obj); // ç§»é™¤å…³è”å±æ€§ if (assoc) _object_remove_assocations(obj); // å¼±å¼•ç”¨è¡¨å’Œæ•£åˆ—è¡¨çš„æ¸…é™¤ obj-&gt;clearDeallocating(); &#125; return obj;&#125; é€šè¿‡ä¸Šé¢çš„åˆ†æï¼Œæˆ‘ä»¬å‘ç°ï¼Œå…¶å®ç³»ç»Ÿå®ç°çš„åƒµå°¸å¯¹è±¡éå¸¸å®‰å…¨ï¼Œå¹¶ä¸å¯¹æ­£å¸¸ä»£ç çš„è¿è¡Œäº§ç”Ÿè´Ÿé¢ä½œç”¨ï¼Œå”¯ä¸€çš„å½±å“åœ¨äºå†…å­˜ä¸å›æ”¶ä¼šå¢åŠ å†…å­˜çš„ä½¿ç”¨è´Ÿæ‹…ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡æŸäº›ç­–ç•¥æ¥è¿›è¡Œé‡Šæ”¾ã€‚ ä¸‰ã€æ‰‹åŠ¨å®ç°çº¿ä¸Šé‡æŒ‡é’ˆé—®é¢˜æ”¶é›†ç†è§£äº†ç³»ç»Ÿåƒµå°¸å¯¹è±¡çš„å®ç°åŸç†ï¼Œå³æ˜¯ä¸ä¾èµ–Debugç¯å¢ƒï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä»¿ç…§æ­¤æ€è·¯æ¥å®ç°åƒµå°¸å¯¹è±¡ç›‘æ§åŠŸèƒ½ã€‚ 1. ä»¿ç…§Appleçš„åƒµå°¸å¯¹è±¡æ€è·¯å®ç°é¦–å…ˆåˆ›å»ºä¸€ä¸ªåä¸º_YHZombie_çš„æ¨¡æ¿ç±»ï¼Œå®ç°å¦‚ä¸‹ï¼š 123456789101112131415161718192021// _YHZombie_.h#import &lt;Foundation/Foundation.h&gt;@interface _YHZombie_ : NSObject@end// _YHZombie_.m#import \"_YHZombie_.h\"@implementation _YHZombie_// è°ƒç”¨è¿™ä¸ªå¯¹è±¡å¯¹çš„æ‰€æœ‰æ–¹æ³•éƒ½hookä½è¿›è¡ŒLOG- (id)forwardingTargetForSelector:(SEL)aSelector &#123; NSLog(@\"%p-[%@ %@]:%@\",self ,[NSStringFromClass(self.class) componentsSeparatedByString:@\"_YHZombie_\"].lastObject, NSStringFromSelector(aSelector), @\"å‘å·²ç»deallocçš„å¯¹è±¡å‘é€äº†æ¶ˆæ¯\"); // ç»“æŸå½“å‰çº¿ç¨‹ abort();&#125;@end åœ¨æ–°å»ºä¸€ä¸ªNSObjectçš„ç±»åˆ«ï¼Œç”¨æ¥æ›¿æ¢deallocæ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546// NSObject+YHZombiesNSObject.h#import &lt;Foundation/Foundation.h&gt;@interface NSObject (YHZombiesNSObject)@end// NSObject+YHZombiesNSObject.m#import \"NSObject+YHZombiesNSObject.h\"#import &lt;objc/objc.h&gt;#import &lt;objc/runtime.h&gt;@implementation NSObject (YHZombiesNSObject)+(void)load &#123; [self __YHZobiesObject];&#125;+ (void)__YHZobiesObject &#123; char *clsChars = \"NSObject\"; Class cls = objc_lookUpClass(clsChars); Method oriMethod = class_getInstanceMethod(cls, NSSelectorFromString(@\"dealloc\")); Method newMethod = class_getInstanceMethod(cls, NSSelectorFromString(@\"__YHDealloc_zombie\")); method_exchangeImplementations(oriMethod, newMethod); &#125;- (void)__YHDealloc_zombie &#123; const char *className = object_getClassName(self); char *zombieClassName = NULL; asprintf(&amp;zombieClassName, \"_YHZombie_%s\", className); Class zombieClass = objc_getClass(zombieClassName); if (zombieClass == Nil) &#123; zombieClass = objc_duplicateClass(objc_getClass(\"_YHZombie_\"), zombieClassName, 0); &#125; objc_destructInstance(self); object_setClass(self, zombieClass); if (zombieClassName != NULL) &#123; free(zombieClassName); &#125;&#125;@end ä¸Šé¢ä»£ç ï¼Œé™¤äº†ä¸€äº›å®¹é”™åˆ¤æ–­æ²¡æœ‰åŠ ä¹‹å¤–ï¼Œæ€è·¯å’Œç³»ç»Ÿçš„åƒµå°¸å¯¹è±¡ä¸€æ¨¡ä¸€æ ·ã€‚ å†æ¬¡è¿è¡Œæˆ‘ä»¬çš„æµ‹è¯•ä»£ç ï¼Œåœ¨è®¿é—®åˆ°é‡æŒ‡é’ˆçš„æ—¶å€™å°†ç™¾åˆ†ç™¾çš„äº§ç”Ÿå¼‚å¸¸ä¸­æ–­ï¼Œå¹¶è¾“å‡ºå¦‚ä¸‹ï¼š 10x600003a8c2e0-[MyObject name]:å‘å·²ç»deallocçš„å¯¹è±¡å‘é€äº†æ¶ˆæ¯ ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»ä»åŸç†ä¸Šç®€å•å®ç°äº†ä¸€ä¸ªä¸ä¾èµ–äºXcodeçš„é‡æŒ‡é’ˆç›‘æ§å·¥å…·ã€‚ 2. å°†ç›‘æ§æ¨å¹¿åˆ°CæŒ‡é’ˆé€šè¿‡å¯¹è±¡çš„åƒµå°¸åŒ–ï¼Œå¯¹OCå±‚çš„é‡æŒ‡é’ˆé—®é¢˜å¯ä»¥åšåˆ°å¾ˆå¥½çš„ç›‘æ§ä½œç”¨ï¼Œä½†æ˜¯è¿™ç§æ–¹æ³•å¹¶ä¸å®ç”¨ä¸Cå±‚çš„æŒ‡é’ˆï¼Œé¡¹ç›®ä¸­å¦‚æœç”¨åˆ°Cç›¸å…³çš„æŒ‡é’ˆï¼Œç”±äºå†…å­˜çš„ç®¡ç†æ–¹å¼ä¸èµ°å¼•ç”¨è®¡æ•°ï¼Œæ— æ³•é€šè¿‡Hook deallocçš„æ–¹å¼æ¥åƒµå°¸åŒ–å¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå¦‚ä¸‹çš„ç»“æ„ä½“ï¼š 123typedef struct &#123; NSString *name;&#125; MyStruct; åœ¨ä½¿ç”¨æ­¤ç»“æ„ä½“æ—¶ï¼Œå¦‚æœåˆå§‹åŒ–ä¹‹å‰è¿›è¡Œäº†ä½¿ç”¨æˆ–å†…å­˜å›æ”¶åè¿›è¡Œäº†ä½¿ç”¨éƒ½å¯èƒ½ä¼šå‡ºç°é‡æŒ‡é’ˆé—®é¢˜ï¼Œå¦‚ä¸‹ï¼š 123456789101112MyStruct *p;p = malloc(sizeof(MyStruct));// æ­¤æ—¶å†…å­˜ä¸­çš„æ•°æ®ä¸å¯æ§ å¯èƒ½æ˜¯ä¹‹å‰æœªæ“¦é™¤çš„printf(\"%x\\n\", *((int *)p));// ä½¿ç”¨å¯èƒ½ä¼šå‡ºç°é‡æŒ‡é’ˆé—®é¢˜NSLog(@\"%@\", p-&gt;name);// è¿›è¡Œå†…å­˜æ•°æ®çš„åˆå§‹åŒ–p-&gt;name = @\"HelloWorld\";// å›æ”¶å†…å­˜free(p);// æ­¤æ—¶å†…å­˜ä¸­çš„æ•°æ®ä¸å¯æ§NSLog(@\"%@\", p-&gt;name); æˆ‘ä»¬å¯ä»¥æ€è€ƒä¸‹ï¼Œå‡ºç°ä¸Šé¢é‡æŒ‡é’ˆåœºæ™¯çš„ä¸»è¦åŸå› æ˜¯ï¼š 1. è·å–åˆ°åˆ†é…çš„å†…å­˜åï¼Œå¦‚æœæ­¤å†…å­˜ä¹‹å‰æœ‰è¿‡ä½¿ç”¨ï¼Œæ•°æ®æ­¤æ—¶æ˜¯ä¸å¯æ§çš„ï¼Œå½“å‰æŒ‡é’ˆç›´æ¥ä½¿ç”¨æ­¤æ•°æ®ä¼šæœ‰é—®é¢˜ã€‚ 2.å›æ”¶å†…å­˜åï¼Œå½“å‰å†…å­˜ä¸­çš„æ•°æ®æ˜¯ä¸å¯æ§çš„ï¼Œå¯èƒ½æœ‰åˆ«äººæˆ–ä¹‹å‰æœªæ¸…é™¤çš„æŒ‡é’ˆä½¿ç”¨åˆ°ã€‚ æ— è®ºæ˜¯ä¸Šé¢å“ªç§åœºæ™¯ï¼Œæ­¤é‡æŒ‡é’ˆé—®é¢˜éƒ½æœ‰éå¸¸å¤§çš„éšæœºæ€§ï¼Œéš¾ä»¥è°ƒè¯•ã€‚å› æ­¤æˆ‘ä»¬æ ¸å¿ƒè¦å¤„ç†çš„åœ°æ–¹åœ¨äºæŠŠéšæœºæ€§æ”¹ä¸ºå¿…ç„¶æ€§ï¼Œå³æƒ³åŠæ³•è®©ä½¿ç”¨åˆ°è¿™äº›æœ‰é—®é¢˜çš„å†…å­˜æ—¶ç›´æ¥Crashï¼Œè€Œä¸æ˜¯å¯èƒ½Crashã€‚è¦å¤„ç†åœºæ™¯1å¾ˆå®¹æ˜“ï¼Œæˆ‘ä»¬å¯ä»¥hookä½Cä¸­çš„mallocæ–¹æ³•ï¼Œåˆ†é…äº†å†…å­˜åç›´æ¥å°†ä¸€ä¸ªçº¦å®šå¥½çš„å¼‚å¸¸æ•°æ®å†™å…¥å†…å­˜ï¼Œè¿™æ ·åœ¨åˆå§‹åŒ–ä¹‹å‰ä½¿ç”¨åˆ°æ­¤æ•°æ®æ—¶å¿…ç„¶äº§ç”ŸCrashã€‚å¯¹äºåœºæ™¯2ï¼Œæˆ‘ä»¬å¯ä»¥hookä½Cä¸­çš„freeæ–¹æ³•ï¼Œå›æ”¶å†…å­˜åå°†ä¸€ä¸ªçº¦å®šå¥½çš„å¼‚å¸¸æ•°æ®ç›´æ¥å†™å…¥æ­¤å†…å­˜ï¼Œä¸‹æ¬¡å¦‚æœæ­¤å†…å­˜æ²¡æœ‰è¢«å†åˆ†é…ï¼Œä½¿ç”¨åˆ°å®ƒåä¹Ÿå¿…ç„¶äº§ç”ŸCrashã€‚Xcodeæä¾›çš„Malloc Scribbleè°ƒè¯•åŠŸèƒ½ï¼Œå°±æ˜¯ç”¨è¿™ç§æ€è·¯å®ç°çš„ã€‚ å¼€å¯Xcodeçš„Malloc Scribbleé€‰é¡¹ï¼Œè¿è¡Œä¸Šé¢ä»£ç ï¼Œæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¯ä»¥çœ‹åˆ°ï¼Œåœ¨mallocåˆ†é…å†…å­˜ä¹‹åï¼Œæ‰€æœ‰å­—èŠ‚éƒ½è¢«å¡«å…¥äº†0xAAï¼Œæœªåˆå§‹åŒ–å‰ä½¿ç”¨å°±ä¼šå¿…ç„¶äº§ç”ŸCrashã€‚è¿™ä¸Appleå®˜æ–¹æ–‡æ¡£çš„è§£é‡Šæ˜¯ä¸€è‡´çš„ï¼Œä½†æ˜¯åœ¨freeä¹‹åï¼Œå†…å­˜æ•°æ®è·å–åˆ°çš„å¯èƒ½å¹¶ä¸æ˜¯æ–‡æ¡£æ‰€è¯´çš„0x55ï¼Œæ˜¯å› ä¸ºè¿™å—å†…å­˜å¯èƒ½è¢«å…¶ä»–å†…å®¹è¦†å†™äº†ã€‚å®˜ç½‘æ–‡æ¡£æè¿°å¦‚ä¸‹ï¼š æˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰‹åŠ¨æ ¹æ®Malloc Scribbleçš„æ€è·¯æ¥å®ç°ä¸€ä¸ªå°†é‡æŒ‡é’ˆé—®é¢˜ä»éšæœºå˜æˆå¿…ç„¶çš„å·¥å…·ï¼Œåªéœ€è¦é‡å†™ç³»ç»Ÿçš„mallocç›¸å…³çš„å‡½æ•°ä¸freeå‡½æ•°å³å¯ã€‚å¯¹äºCè¯­è¨€å‡½æ•°çš„Hookï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨fishhookåº“ï¼š https://github.com/facebook/fishhook å¯¼å…¥ä¸Šé¢åº“åï¼Œæ–°å»ºä¸€ä¸ªå‘½åä¸ºYHMallocScrbbleçš„ç±»ï¼Œå®ç°å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738// YHMallcScrbble.h#import &lt;Foundation/Foundation.h&gt;@interface YHMallcScrbble : NSObject@end// YHMallcScrbble.m#import \"YHMallcScrbble.h\"#import \"fishhook.h\"#import \"malloc/malloc.h\"void * (*orig_malloc)(size_t __size);void (*orig_free)(void * p);void *_YHMalloc_(size_t __size) &#123; void *p = orig_malloc(__size); memset(p, 0xAA, __size); return p;&#125;void _YHFree_(void * p) &#123; size_t size = malloc_size(p); memset(p, 0x55, size); orig_free(p);&#125;@implementation YHMallcScrbble+ (void)load &#123; rebind_symbols((struct rebinding[2])&#123;&#123;\"malloc\", _YHMalloc_, (void *)&amp;orig_malloc&#125;, &#123;\"free\", _YHFree_, (void *)&amp;orig_free&#125;&#125;, 2);&#125;@end è¿™æ ·æˆ‘ä»¬å°±å®ç°äº†å°†é‡æŒ‡é’ˆé—®é¢˜ä»éšæœºå˜æˆå¿…ç„¶ï¼Œå¹¶ä¸”é€šç”¨CæŒ‡é’ˆã€‚ ç›¸æ¯”åƒµå°¸å¯¹è±¡æ–¹æ¡ˆï¼ŒMalloc Scribbleæ–¹æ³•å¯ä»¥é€šç”¨CæŒ‡é’ˆï¼Œå¹¶ä¸”çœŸæ­£å®ç°äº†å¯¹å¯¹è±¡å†…å­˜çš„å›æ”¶ï¼Œä¸ä¼šæš‚ç”¨å†…å­˜ã€‚ä½†æ˜¯ä¹Ÿæœ‰å¾ˆå¤§çš„å¼Šç«¯ï¼Œæ¯”å¦‚å¯¹äºfreeåå†™å…¥çš„0x55åœ¨å¾ˆå¤šæƒ…å†µä¸‹éƒ½æ˜¯æ— æ•ˆçš„ï¼Œå› ä¸ºè¿™å—å†…å­˜å¯èƒ½åˆè¢«å…¶ä»–åœ°æ–¹æ”¹å†™äº†ï¼Œå¯¼è‡´Crashä¾ç„¶æ˜¯éšæœºçš„ã€‚å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨è‡ªå®šä¹‰çš„freeæ–¹æ³•ä¸­ä¸è°ƒç”¨åŸç³»ç»Ÿçš„freeï¼Œä½¿å¾—è¿™å—å†…å­˜å¼ºåˆ¶ä¸èƒ½åˆ†é…å‡ºå»ï¼Œè¿™æ ·å…¶å®å’Œåƒµå°¸å¯¹è±¡æ–¹æ¡ˆå°±æ¯”è¾ƒç±»ä¼¼äº†ã€‚å¹¶ä¸”ç›¸å¯¹åƒµå°¸å¯¹è±¡æ–¹æ¡ˆï¼ŒMalloc Scribbleåªèƒ½ä¸€å®šç¨‹åº¦ä¸Šå°†éšæœºå˜æˆå¿…ç„¶ï¼Œæ–¹ä¾¿é—®é¢˜çš„æš´éœ²ï¼Œä½†æ˜¯å¯¹å¼€å‘è€…æ¥è¯´ï¼Œå¹¶æ²¡æœ‰å¤ªå¤šçš„ä¿¡æ¯å‘Šè¯‰æˆ‘ä»¬å…·ä½“æ˜¯ä»€ä¹ˆç±»å‹çš„æ•°æ®å‡ºçš„é—®é¢˜ï¼Œæ’æŸ¥è¿˜æ˜¯æœ‰éš¾åº¦ã€‚ å››ã€ä¸€äº›æ‰©å±•ä¸Šé¢åªæ˜¯ç®€å•ä»‹ç»äº†å¯¹é‡æŒ‡é’ˆé—®é¢˜ç›‘æ§çš„ä¸€äº›æ‰‹æ®µåŸç†ã€‚é™¤äº†åƒµå°¸å¯¹è±¡å’ŒMalloc Scribbleå¤–ï¼ŒXcodeä¸­è¿˜æä¾›äº†Address Sanitizerå·¥å…·æ¥åšå†…å­˜é—®é¢˜çš„ç›‘æ§ï¼Œå…¶åŸç†ä¹Ÿæ˜¯å¯¹mallocå’Œfreeå‡½æ•°åšäº†å¤„ç†ï¼Œä½†ç¨‹åºè®¿é—®åˆ°äº†æœ‰é—®é¢˜çš„å†…å­˜æ—¶å¯ä»¥åŠæ—¶Crashï¼ŒåŒæ—¶è¿™ä¸ªå·¥å…·å¯ä»¥å°†å¯¹è±¡åœ¨mallocæ—¶çš„å †æ ˆä¿¡æ¯è¿›è¡Œå­˜å‚¨ï¼Œæ–¹é¢æˆ‘ä»¬å®šä½é—®é¢˜ã€‚æ— è®ºé‡‡ç”¨å“ªç§æ–¹æ³•ï¼Œå¦‚æœæˆ‘ä»¬çœŸçš„è¦åœ¨çº¿ä¸Šæ‰§è¡Œï¼Œè¦åšçš„äº‹æƒ…å…¶å®è¿˜æœ‰å¾ˆå¤šï¼Œä¾‹å¦‚æ•°æ®çš„æ”¶é›†ç­–ç•¥ï¼Œåƒµå°¸å¯¹è±¡å†…å­˜çš„æ¸…ç†æ—¶æœºï¼Œä½•æ—¶åˆ¤æ–­å‡ºæœ‰é—®é¢˜å¹¶æŠ“å–å †æ ˆç­‰ç­‰ã€‚ æœ€åï¼Œå¸Œæœ›æœ¬æ–‡å¯ä»¥ä¸ºä½ å¯¹å¼€å‘ä¸­é‡æŒ‡é’ˆé—®é¢˜çš„å¤„ç†å¸¦æ¥ä¸€äº›æ€è·¯ã€‚æœ¬æ–‡ä¸­æ‰€ç¼–å†™çš„ç¤ºä¾‹ä»£ç å¯ä»¥åœ¨å¦‚ä¸‹åœ°å€ä¸‹è½½ï¼š https://github.com/ZYHshao/ZombiesDemo ä¸“æ³¨æŠ€æœ¯ï¼Œæ‡‚çš„çƒ­çˆ±ï¼Œæ„¿æ„åˆ†äº«ï¼Œåšä¸ªæœ‹å‹ QQï¼š316045346","categories":[{"name":"ç¼–ç¨‹ç ç‘","slug":"ç¼–ç¨‹ç ç‘","permalink":"http://huishao.cc/categories/ç¼–ç¨‹ç ç‘/"}],"tags":[],"keywords":[{"name":"ç¼–ç¨‹ç ç‘","slug":"ç¼–ç¨‹ç ç‘","permalink":"http://huishao.cc/categories/ç¼–ç¨‹ç ç‘/"}]},{"title":"ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ22ï¼‰â€”â€”DS1302ç¡¬ä»¶æ—¶é’Ÿå®è·µ","slug":"438ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ22ï¼‰â€”â€”DS1302ç¡¬ä»¶æ—¶é’Ÿå®è·µ","date":"2021-11-27T16:00:00.000Z","updated":"2021-11-27T16:45:38.235Z","comments":true,"path":"2021/11/28/438ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ22ï¼‰â€”â€”DS1302ç¡¬ä»¶æ—¶é’Ÿå®è·µ/","link":"","permalink":"http://huishao.cc/2021/11/28/438ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ22ï¼‰â€”â€”DS1302ç¡¬ä»¶æ—¶é’Ÿå®è·µ/","excerpt":"","text":"ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ22ï¼‰â€”â€”DS1302ç¡¬ä»¶æ—¶é’Ÿå®è·µä¸çŸ¥ä½ æ˜¯å¦æœ‰å‘ç°ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨è®¡ç®—æœºæ—¶ï¼Œé™¤äº†ç¬¬ä¸€æ¬¡å¯åŠ¨éœ€è¦åŒæ­¥ä¸‹æ—¶é—´å¤–ï¼Œå³æ˜¯æ²¡æœ‰è”ç½‘ï¼Œæ–­ç”µé‡å¯åï¼Œè®¡ç®—æœºçš„æ—¶é—´ä¾ç„¶æ˜¯å‡†ç¡®çš„ã€‚è¿™æ˜¯å› ä¸ºåœ¨è®¡ç®—æœºä¸»æœºå†…éƒ¨æœ‰ä¸€ä¸ªè‡ªå¸¦ç”µæºçš„ç¡¬ä»¶æ—¶é’Ÿæ¨¡å—ï¼Œåœ¨åŒæ­¥æ—¶é—´æ—¶å°†å½“å‰çš„æ—¶é—´å†™å…¥æ¨¡å—åï¼Œæ­¤ç¡¬ä»¶æ—¶é’Ÿæ¨¡å—ä¼šè‡ªåŠ¨çš„ç»´æŠ¤å‡†ç¡®çš„å½“å‰æ—¶é—´ã€‚æ ‘è“æ´¾å†…éƒ¨æœ¬èº«æ²¡æœ‰ç¡¬ä»¶æ—¶é’Ÿæ¨¡å—ï¼Œä½†æ˜¯åœ¨æŸäº›éè”ç½‘çš„éœ€æ±‚åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å‡†ç¡®çš„è®°å½•å½“å‰çš„æ—¥æœŸæ—¶é—´ï¼Œæ¯”å¦‚ä¹‹å‰æˆ‘ä»¬ä»‹ç»è¿‡è®¸å¤šæœ‰å…³æ°”è±¡ç›¸å…³çš„ä¼ æ„Ÿå™¨ï¼Œåœ¨è®°å½•æ°”è±¡æ•°æ®æ—¶ï¼Œä¹Ÿéœ€è¦è®°å½•å½“æ—¶çš„å‡†ç¡®æ—¶é—´ã€‚ 1. DS1302æ¨¡å—ç®€ä»‹DS1302æ˜¯ä¸€æ¬¾æ¶“æµå……ç”µè®¡æ—¶èŠ¯ç‰‡ã€‚å…¶æ‹¥æœ‰å®æ—¶æ—¶é’Ÿå¯ä»¥è®¡ç®—å¹´ï¼Œæœˆï¼Œæ—¥ï¼Œæ—¶ï¼Œåˆ†ï¼Œç§’ï¼Œæ˜ŸæœŸç­‰ä¿¡æ¯ï¼Œå¯ä½¿ç”¨çš„æ—¶é—´é—´éš”ä¸º2000å¹´åˆ°2100å¹´ä¹‹é—´ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå…¶è¿˜æ‹¥æœ‰ä¸€ä¸ª31*8ä½çš„é€šç”¨æš‚å­˜RAMï¼Œç”¨æ¥å­˜å‚¨ä¸€äº›ä¸´æ—¶çš„é€»è¾‘æ•°æ®ã€‚DS1302é‡‡ç”¨åŒæ­¥ä¸²è¡Œé€šä¿¡çš„æ–¹å¼ï¼Œç®€åŒ–äº†å¤„ç†å™¨çš„æ¥å£ï¼Œç†è®ºä¸Šé™¤äº†ç”µæºä¹‹å¤–ï¼Œä¸»éœ€è¦è¿æ¥ä¸‰æ ¹çº¿å³å¯å®ç°é€šä¿¡åŠŸèƒ½ï¼Œå³CEçº¿ï¼ŒI/Oçº¿å’ŒSCLKä¸²è¡Œæ—¶é’Ÿçº¿ã€‚ DS1302èŠ¯ç‰‡æœ‰8ä¸ªå¼•è„šï¼Œå·¥ä½œç”µè·¯ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š æ¯ä¸ªå¼•è„šçš„ä½œç”¨å¦‚ä¸‹ï¼š DS1302é‡‡ç”¨çš„æ˜¯8ä½çš„æŒ‡ä»¤å‘½ä»¤å­—ï¼Œåœ¨æ¯æ¬¡é€šä¿¡å‰ï¼Œéƒ½éœ€è¦ä½¿ç”¨å‘½ä»¤å­—æ¥å¯åŠ¨ï¼Œå‘½ä»¤å­—ç»“æ„å¦‚ä¸‹ï¼š å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå…¶ä¸­ç¬¬7ä½æ˜¯å†™å…¥æœ‰æ•ˆæ§åˆ¶ä½ï¼Œä¸º0æ—¶å†™å…¥æ— æ•ˆï¼Œä¸º1æ—¶å…è®¸å†™å…¥ï¼Œæ¯æ¬¡è¿›è¡Œæ•°æ®ä¼ è¾“æ—¶ï¼Œå¿…é¡»å°†æ­¤ä½è®¾ç½®ä¸º1ï¼Œä¸€èˆ¬æˆ‘ä»¬åœ¨ä½¿ç”¨æŒ‡ä»¤æ—¶ï¼Œæ­¤ä¸ºå¼ºåˆ¶è®¾ç½®ä¸º1ã€‚ ç¬¬6ä½æ§åˆ¶èŠ¯ç‰‡åŠŸèƒ½ï¼Œä¸º0æ—¶è¡¨ç¤ºä½¿ç”¨æ—¶é’Ÿæ•°æ®ï¼Œä¸º1æ—¶è¡¨ç¤ºä½¿ç”¨RAMæ•°æ®ã€‚ ç¬¬1ä½åˆ°ç¬¬5ä½ä¸ºå¯„å­˜å™¨é€‰æ‹©ä½ï¼Œé€‰æ‹©è¦æ“ä½œçš„å¯„å­˜å™¨ã€‚ ç¬¬0ä½æ˜¯è¯»å†™æ§åˆ¶ä½ï¼Œä¸º0æ—¶è¡¨ç¤ºè¦å†™æ•°æ®åˆ°å¯„å­˜å™¨ï¼Œä¸º1æ—¶è¡¨ç¤ºè¦ä»å¯„å­˜å™¨è¯»æ•°æ®ã€‚ äº†è§£äº†DS1302çš„æŒ‡ä»¤ç»“æ„ï¼Œè¦ä½¿ç”¨å®ƒæˆ‘ä»¬è¿˜éœ€è¦å¯¹å¯„å­˜å™¨çš„åŠŸèƒ½åšç®€å•çš„äº†è§£ï¼Œæœ¬æ¬¡å®éªŒæˆ‘ä»¬ä¸»è¦ä½¿ç”¨DS1302çš„æ—¶é’ŸåŠŸèƒ½ï¼Œä¸æ—¶é’ŸåŠŸèƒ½ç›¸å…³çš„å¯„å­˜å™¨æœ‰7ä¸ªï¼ŒèŠ¯ç‰‡æ‰‹å†Œä¸­ç»™å‡ºäº†ç¤ºä¾‹ï¼Œå¦‚ä¸‹ï¼š ä¸‹é¢æˆ‘ä»¬ä»‹ç»ä¸‹è¿™äº›å¯„å­˜å™¨çš„åŠŸèƒ½å’Œç”¨æ³•ã€‚ é¦–å…ˆï¼ŒæŒ‡ä»¤ä¸­æœ‰5ä½æ¥æ ‡è¯†è¦æ“ä½œçš„å¯„å­˜å™¨çš„åœ°å€ï¼Œä¸Šå›¾ä¸­ç›´æ¥ç»™æˆ‘äº†æ“ä½œå¯„å­˜å™¨çš„è¯»å†™æŒ‡ä»¤ã€‚ ç¬¬1ä¸ªå¯„å­˜å™¨çš„åœ°å€ä¸º0b0ï¼Œå› æ­¤å…¶è¯»æŒ‡ä»¤ä¸º0b1000 0001ï¼Œå†™æŒ‡ä»¤ä¸º0b1000 0000ï¼Œè½¬æ¢æˆ16è¿›åˆ¶ï¼Œå³ä¸Šå›¾ä¸­çš„0x81ä¸0x80ã€‚æ­¤å¯„å­˜å™¨çš„æœ€é«˜ä½CHæ˜¯ä¸€ä¸ªæ ‡å¿—ä½ï¼Œæ¯æ¬¡ä¸Šç”µåï¼Œæˆ‘ä»¬å¯ä»¥è¯»å–ä¸€ä¸‹è¿™ä¸€ä½ï¼Œå¦‚æœæ˜¯1è¡¨ç¤ºæ–­ç”µåå§‹ç»ˆç³»ç»Ÿå·²ç»ä¸å·¥ä½œäº†ï¼Œæˆ‘ä»¬éœ€è¦é‡æ–°æ ¡å‡†æ—¶é—´ï¼Œå¦‚æœæ˜¯0è¡¨ç¤ºå¤‡ç”¨ç”µæºæ­£å¸¸ï¼Œå§‹ç»ˆæŒç»­æ­£å¸¸è¿è¡Œã€‚ç¬¬4åˆ°ç¬¬6ä½ç”¨æ¥è¡¨ç¤ºæ—¶é—´ç§’çš„åä½æ•°æ®ï¼Œç¬¬0åˆ°ç¬¬3ä½ç”¨æ¥è¡¨ç¤ºç§’çš„ä¸ªä½æ•°æ®ï¼Œå› ä¸ºç§’çš„åä½æ•°æ®æœ€å¤§ä¸º5ï¼Œ3ä¸ªäºŒè¿›åˆ¶ä½è¶³å¤Ÿä½¿ç”¨ã€‚ ç¬¬2ä¸ªå¯„å­˜å™¨çš„åœ°å€ä¸º0b1ï¼Œå…¶æœ€é«˜ä½ä¸ºä¿ç•™ä½ï¼Œç›®å‰æ— ç”¨ï¼Œç¬¬4ä½åˆ°ç¬¬6ä½ç”¨æ¥è—è§†åˆ†é’Ÿçš„åä½ï¼Œç¬¬0ä½åˆ°ç¬¬3ä½è¡¨ç¤ºåˆ†é’Ÿçš„ä¸ªä½ï¼ŒåŒæ ·åˆ†é’Ÿçš„åä½æ•°æ®æœ€å¤§ä¸º5ï¼Œ3ä¸ªäºŒè¿›åˆ¶ä½è¶³å¤Ÿä½¿ç”¨ã€‚ ç¬¬3ä¸ªå¯„å­˜å™¨çš„åœ°å€ä¸º0b10ï¼Œå…¶æœ€é«˜ä½ä¸º1è¡¨ç¤ºå½“å‰ä½¿ç”¨çš„æ˜¯12å°æ—¶åˆ¶ï¼Œæœ€é«˜ä½æ˜¯0è¡¨ç¤ºä½¿ç”¨çš„æ˜¯24å°æ—¶åˆ¶ã€‚ç¬¬6ä½å›ºå®šä¸º0ï¼Œæ²¡æœ‰æ„ä¹‰ã€‚ç¬¬5ä½åœ¨12å°æ—¶åˆ¶çš„æ¨¡å¼ä¸‹ï¼Œä¸º1è¡¨ç¤ºçš„æ˜¯ä¸‹åˆï¼Œä¸º0è¡¨ç¤ºçš„æ˜¯ä¸Šåˆã€‚åœ¨24å°æ—¶åˆ¶çš„æ¨¡å¼ä¸‹ï¼Œç¬¬4ä½å’Œç¬¬5ä½ä¸€èµ·è¡¨ç¤ºå°æ—¶çš„åä½ã€‚ç¬¬0ä½åˆ°ç¬¬3ä½è¡¨ç¤ºäº†å°æ—¶çš„ä¸ªä½ã€‚ ç¬¬4ä¸ªå¯„å­˜å™¨çš„åœ°å€ä¸º0b11ï¼Œå…¶ç¬¬7ä½å’Œç¬¬6ä½ä¸ºå›ºå®šçš„0ï¼Œæ²¡æœ‰æ„ä¹‰ã€‚ç¬¬5ä½å’Œç¬¬4ä½ä¸€èµ·è¡¨ç¤ºäº†æ—¥æœŸçš„åä½ï¼Œç¬¬0ä½åˆ°ç¬¬3ä½è¡¨ç¤ºäº†æ—¥æœŸçš„ä¸ªä½ã€‚ ç¬¬5ä¸ªå¯„å­˜å™¨çš„åœ°å€ä¸º0b100ï¼Œå…¶ç¬¬5ä½åˆ°ç¬¬7ä½ä¸ºå›ºå®šçš„0ï¼Œæ²¡æœ‰æ„ä¹‰ã€‚ç¬¬4ä½è¡¨ç¤ºäº†æœˆçš„åä½ï¼Œç¬¬0åˆ°ç¬¬3ä½è¡¨ç¤ºæœˆçš„ä¸ªä½ã€‚ ç¬¬6ä¸ªå¯„å­˜å™¨çš„åœ°å€ä¸º0b101ï¼Œå…¶é«˜5ä½å›ºå®šä¸º0ï¼Œæ²¡æœ‰æ„ä¹‰ã€‚ç¬¬3ä½è¡¨ç¤ºäº†æ˜ŸæœŸã€‚ ç¬¬7ä¸ªå¯„å­˜å™¨çš„åœ°å€ä¸º0b110ï¼Œé«˜4ä½è¡¨ç¤ºäº†å¹´çš„åä½ï¼Œç¬¬4ä½è¡¨ç¤ºäº†å¹´çš„ä¸ªä½ï¼Œå¯ä»¥è¡¨ç¤º0-99ä¹‹é—´çš„å€¼ï¼Œå³2000å¹´åˆ°2099å¹´ã€‚ ç¬¬8ä¸ªå¯„å­˜å™¨çš„åœ°å€ä¸º0b111ï¼Œè¿™æ˜¯ä¸€ä¸ªæ§åˆ¶å¯„å­˜å™¨ï¼Œåœ¨å†™æ•°æ®æ—¶ï¼Œè¿™ä¸ªå¯„å­˜å™¨çš„æœ€é«˜ä½WPå¿…é¡»æ˜¯0ï¼Œå¦‚æœæ­¤ä½ä¸º1ï¼Œåˆ™ç»™å…¶ä»–å¯„å­˜å™¨çš„å†™æ“ä½œéƒ½å°†ç¦æ­¢ï¼Œç”¨æ¥åšä¿æŠ¤ã€‚ å¦‚æœè¦ä½¿ç”¨åˆ°RAMåŠŸèƒ½ï¼Œåˆ™æŒ‡ä»¤çš„å‰ä¸¤ä½å¿…é¡»æ˜¯11ï¼Œå› æ­¤RAMçš„ç¬¬ä¸€ä¸ªå¯„å­˜å™¨çš„è¯»å†™æŒ‡ä»¤ä¸º0b1100 0000æˆ–0b1100 0001 ï¼Œå³0xC0å’Œ0xC1ã€‚RAMå­˜å‚¨å¯„å­˜å™¨æœ‰31ä¸ªï¼Œåœ°å€ä¸º0x00åˆ°0x1Fï¼Œå¯¹åº”çš„å‘½ä»¤å­—ä»0xC0åˆ°0xFFã€‚ æ— è®ºæ˜¯æ—¶é’Ÿæ¨¡å¼ï¼Œè¿˜æ˜¯RAMæ¨¡å¼ï¼ŒDS1302éƒ½æ”¯æŒé‡‡ç”¨è„‰å†²ä¸²çš„æ–¹å¼æ¥è¯»å†™æ•°æ®ï¼Œæ—¶é’Ÿè„‰å†²ä¸²æŒ‡ä»¤ä¸º0xBFä¸0xBEï¼ŒRAMè„‰å†²ä¸²ä¸º0xFFä¸0xFEã€‚æ•°æ®ä¼šæŒ‰ç…§å¯„å­˜å™¨çš„é¡ºåºä¾æ¬¡å†™å…¥å’Œè¯»å‡ºã€‚ æ˜ç™½äº†æŒ‡ä»¤ä¸å¯„å­˜å™¨çš„ä½¿ç”¨é€»è¾‘ï¼Œä¸‹é¢è¿˜å‰©ä¸‹ä¸€ç‚¹éœ€è¦æ˜ç¡®ï¼Œé‚£å°±æ˜¯å¦‚ä½•è¿›è¡Œæ•°æ®çš„è¾“å…¥å’Œè¯»å–ã€‚RSTå¼•è„šç”¨æ¥æ§åˆ¶æ•°æ®è¯»å†™ï¼ŒRTSä»ä½ç”µå¹³å˜æˆé«˜ç”µå¹³è§¦å‘ä¸€æ¬¡æ•°æ®ä¼ è¾“è¿‡ç¨‹ã€‚ 2. å®éªŒè¿çº¿æœ¬æ¬¡å®éªŒï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯å°è£…å¥½çš„DS1302æ¨¡å—ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å…¶ä¸­CLKå¯¹åº”SCLKå¼•è„šï¼ŒDATæ˜¯IOåŠŸèƒ½å¼•è„šï¼ŒRSTå¯¹åº”CEåŠŸèƒ½å¼•è„šã€‚æˆ‘ä»¬é€‰ç”¨æ ‘è“æ´¾ä¸­çš„16ï¼Œ18å’Œ22å¼•è„šï¼ˆç‰©ç†ç¼–ç ï¼Œåˆ†åˆ«å¯¹åº”BCMç¼–ç çš„23ï¼Œ24å’Œ25ï¼‰ï¼Œè¿çº¿å¦‚ä¸‹ï¼š DS1302 æ ‘è“æ´¾ VCC 3.3V GND GND CLK GPIO23ï¼ˆBCMç¼–ç ï¼‰ DAT GPIO24ï¼ˆBCMç¼–ç ï¼‰ RST GPIO25ï¼ˆBCMç¼–ç ï¼‰ 3.å®éªŒç¼–ç ç°åœ¨ï¼Œæˆ‘ä»¬åªéœ€è¦æŒ‰ç…§å‰é¢ä»‹ç»çš„æ¨¡å—ç”¨æ³•è¿›è¡Œç¼–ç å³å¯ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192#coding:utf-8import timeimport RPi.GPIOfrom datetime import datetime# ä½¿ç”¨ç‰©ç†ç¼–ç SCL = 16IO = 18RST = 22# æ•°æ®è¯»å†™çš„é—´éš”CLK_PERIOD = 0.00001# å…³é—­GPIOè­¦å‘ŠRPi.GPIO.setwarnings(False)# é…ç½®æ ‘è“æ´¾GPIOæ¥å£ ä½¿ç”¨ç‰©ç†ç¼–ç RPi.GPIO.setmode(RPi.GPIO.BOARD)# å†™å…¥ä¸€ä¸ªå­—èŠ‚çš„æ•°æ®def writeByte(Byte): for Count in range(8): # å°†SCLç½®ä¸ºä½ç”µå¹³ å¼€å¯ä¸€æ¬¡ä¼ è¾“ time.sleep(CLK_PERIOD) RPi.GPIO.output(SCL, 0) # å–ä¸€ä½æ•°æ®è¿›è¡Œå†™å…¥ Bit = Byte % 2 Byte = int(Byte / 2) # é€šè¿‡IOå¼•è„šè¿›è¡Œå†™å…¥ time.sleep(CLK_PERIOD) RPi.GPIO.output(IO, Bit) # å°†SCLç½®ä¸ºé«˜ç”µå¹³ ç»“æŸä¸€æ¬¡ä¼ è¾“ time.sleep(CLK_PERIOD) RPi.GPIO.output(SCL, 1)# è¯»å–ä¸€ä¸ªå­—èŠ‚çš„æ•°æ®def readByte(): # å°†IOå¼•è„šè®¾ç½®ä¸ºè¾“å…¥ RPi.GPIO.setup(IO, RPi.GPIO.IN, pull_up_down=RPi.GPIO.PUD_DOWN) Byte = 0 for Count in range(8): # å…ˆå°†SCLé‡ç½®ä¸ºé«˜ç”µå¹³ time.sleep(CLK_PERIOD) RPi.GPIO.output(SCL, 1) # å°†SCLç½®ä¸ºä½ç”µå¹³ å¼€å¯ä¸€æ¬¡ä¼ è¾“ time.sleep(CLK_PERIOD) RPi.GPIO.output(SCL, 0) # è¯»å–ä¸€ä½æ•°æ® time.sleep(CLK_PERIOD) Bit = RPi.GPIO.input(IO) Byte |= ((2 ** Count) * Bit) return Byte# é‡ç½®ä¸€äº›æ•°æ®def resetDS1302(): # SCLå¼•è„šè®¾ç½®ä¸ºè¾“å‡º RPi.GPIO.setup(SCL, RPi.GPIO.OUT, initial=0) # RSTå¼•è„šè®¾ç½®ä¸ºè¾“å‡º RPi.GPIO.setup(RST, RPi.GPIO.OUT, initial=0) # IOå¼•è„šè®¾ç½®ä¸ºè¾“å‡º RPi.GPIO.setup(IO, RPi.GPIO.OUT, initial=0) # SCLå’ŒIOéƒ½ç½®ä¸ºä½ç”µå¹³ RPi.GPIO.output(SCL, 0) RPi.GPIO.output(IO, 0) time.sleep(CLK_PERIOD) # RSTç½®ä¸ºé«˜ç”µå¹³ RPi.GPIO.output(RST, 1)# ç»“æŸæ“ä½œdef endDS1302(): # SCLå¼•è„šè®¾ç½®ä¸ºè¾“å‡º RPi.GPIO.setup(SCL, RPi.GPIO.OUT, initial=0) # RSTå¼•è„šè®¾ç½®ä¸ºè¾“å‡º RPi.GPIO.setup(RST, RPi.GPIO.OUT, initial=0) # IOå¼•è„šè®¾ç½®ä¸ºè¾“å‡º RPi.GPIO.setup(IO, RPi.GPIO.OUT, initial=0) # SCLå’ŒIOéƒ½ç½®ä¸ºä½ç”µå¹³ RPi.GPIO.output(SCL, 0) RPi.GPIO.output(IO, 0) time.sleep(CLK_PERIOD) # RSTç½®ä¸ºä½ç”µå¹³ RPi.GPIO.output(RST, 0)# è¿›è¡Œæ—¶é—´æ ¡å‡†def setDatetime(year, month, day, hour, minute, second, dayOfWeek): # å¼•è„šé‡ç½® resetDS1302() # è®¾ç½®å†™å§‹ç»ˆæ•°æ®è„‰å†²æŒ‡ä»¤ writeByte(int(\"10111110\", 2)) # å¼€å§‹ä¾æ¬¡å†™æ•°æ® # å†™å…¥ç§’æ•°æ®ï¼Œ*16çš„ä½œç”¨æ˜¯æŠŠåä½å³ç§»4ä½ ä¸‹é¢åŒ writeByte((second % 10) | int(second / 10) * 16) # å†™å…¥åˆ†é’Ÿæ•°æ® writeByte((minute % 10) | int(minute / 10) * 16) # å†™å…¥å°æ—¶æ•°æ® writeByte((hour % 10) | int(hour / 10) * 16) # å†™å…¥æ—¥æœŸæ•°æ® writeByte((day % 10) | int(day / 10) * 16) # å†™å…¥æœˆä»½æ•°æ® writeByte((month % 10) | int(month / 10) * 16) # å†™å…¥æ˜ŸæœŸæ•°æ® writeByte(dayOfWeek) # å†™å…¥å¹´ä»½æ•°æ® writeByte((year % 100 % 10) | int(year % 100 / 10) * 16) # ç»“æŸæ•°æ®å†™å…¥ writeByte(int(\"00000000\", 2)) # ç»“æŸä»»åŠ¡ endDS1302()# è·å–DS1302ç¡¬ä»¶æ—¶é’Ÿå®è·µdef getDatetime(): # é‡ç½®å¼•è„š resetDS1302() # 0xBFæŒ‡ä»¤ï¼Œå¼€å§‹æ—¶é’Ÿè„‰å†²ä¸²è¯»å–æ•°æ® writeByte(int(\"10111111\", 2)) Data = \"\" # ä¾æ¬¡è¯»å– # å…ˆè¯»å‡ºç§’æ•°æ® Byte = readByte() second = (Byte % 16) + int(Byte / 16) * 10 # åˆ†é’Ÿæ•°æ® Byte = readByte() minute = (Byte % 16) + int(Byte / 16) * 10 # å°æ—¶æ•°æ® Byte = readByte() hour = (Byte % 16) + int(Byte / 16) * 10 # æ—¥æœŸæ•°æ® Byte = readByte() day = (Byte % 16) + int(Byte / 16) * 10 # æœˆä»½æ•°æ® Byte = readByte() month = (Byte % 16) + int(Byte / 16) * 10 # æ˜ŸæœŸæ•°æ® Byte = readByte() day_of_week = (Byte % 16) # å¹´æ•°æ® Byte = readByte() year = (Byte % 16) + int(Byte / 16) * 10 + 2000 # ç»“æŸä»»åŠ¡ endDS1302() return datetime(year, month, day, hour, minute, second)# æ—¶é—´æ ¼å¼åŒ–def format_time(dt): if dt is None: return \"\" fmt = \"%m/%d/%Y %H:%M\" return dt.strftime(fmt) def parse_time(s): fmt = \"%m/%d/%Y %H:%M\" return datetime.strptime(s, fmt)# åˆå§‹åŒ–å·¥ä½œresetDS1302()# å†™ä¿æŠ¤å·²å…³é—­ã€‚writeByte(int(\"10001110\", 2))# ç»“æŸæŒ‡ä»¤æ‰§è¡ŒwriteByte(int(\"00000000\", 2))# æ¶“æµå……ç”µæ¨¡å¼è¢«å…³é—­ã€‚writeByte(int(\"10010000\", 2))# ç»“æŸæŒ‡ä»¤æ‰§è¡ŒwriteByte(int(\"00000000\", 2))#ç»“æŸä»»åŠ¡endDS1302() current = datetime.now()year = current.yearmonth = current.monthday = current.dayhour = current.hourminute = current.minutesecond = current.secondweek = current.weekday()setDatetime(year,month,day,hour,minute,second,week)while True: time.sleep(1) dt = getDatetime() print(dt) ä¸Šé¢ç¤ºä¾‹ä»£ç ä¸­ï¼Œæ— è®ºæ˜¯è¯»æ•°æ®è¿˜æ˜¯å†™æ•°æ®ï¼Œæˆ‘ä»¬éƒ½é‡‡ç”¨çš„æ—¶é’Ÿè„‰å†²ä¸²çš„é€šä¿¡æ¨¡å¼ï¼Œè¿™æ ·æˆ‘ä»¬åªéœ€è¦è®¾ç½®ä¸€æ¬¡æŒ‡ä»¤ï¼Œå³å¯æŒ‰éœ€è¯»å‡ºæ‰€éœ€æ•°æ®ï¼Œéå¸¸æ–¹ä¾¿ã€‚åœ¨æ ‘è“æ´¾ä¸Šè¿è¡Œä¸Šé¢çš„ä»£ç ï¼Œæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 4.æ€è€ƒä¸€ä¸‹ä»¿ç…§ä¸Šé¢çš„æ€è·¯ï¼Œæ˜¯å¦å¯ä»¥æ”¹æˆéæ—¶é’Ÿè„‰å†²ä¸²çš„é€šä¿¡æ–¹å¼æ¥è·å–æ—¥æœŸæ—¶é—´ä¿¡æ¯å‘¢ï¼Ÿè¯•è¯•å§ï¼ ä¸“æ³¨æŠ€æœ¯ï¼Œæ‡‚çš„çƒ­çˆ±ï¼Œæ„¿æ„åˆ†äº«ï¼Œåšä¸ªæœ‹å‹ QQï¼š316045346","categories":[{"name":"Linux","slug":"Linux","permalink":"http://huishao.cc/categories/Linux/"}],"tags":[],"keywords":[{"name":"Linux","slug":"Linux","permalink":"http://huishao.cc/categories/Linux/"}]},{"title":"iOSç ”ä¹ è®°â€”â€”è°ˆè°ˆé™æ€åº“ä¸åŠ¨æ€åº“","slug":"437[iOSç ”ä¹ è®°]â€”â€”è°ˆè°ˆé™æ€åº“ä¸åŠ¨æ€åº“","date":"2021-11-23T16:00:00.000Z","updated":"2021-12-01T01:58:40.580Z","comments":true,"path":"2021/11/24/437[iOSç ”ä¹ è®°]â€”â€”è°ˆè°ˆé™æ€åº“ä¸åŠ¨æ€åº“/","link":"","permalink":"http://huishao.cc/2021/11/24/437[iOSç ”ä¹ è®°]â€”â€”è°ˆè°ˆé™æ€åº“ä¸åŠ¨æ€åº“/","excerpt":"","text":"[iOSç ”ä¹ è®°]â€”â€”è°ˆè°ˆé™æ€åº“ä¸åŠ¨æ€åº“åœ¨iOSé¡¹ç›®å¼€å‘ä¸­ï¼Œé™æ€åº“å’ŒåŠ¨æ€åº“æˆ‘ä»¬æ—¶åˆ»éƒ½åœ¨ä½¿ç”¨ï¼Œç¦»å¼€äº†åº“çš„æ”¯æŒï¼Œæˆ‘ä»¬å°†ä¼šä¸¾æ­¥ç»´è‰°ã€‚æ¯”å¦‚ï¼Œä½ è¦ç”»ç•Œé¢ï¼Œæ€»ç¦»ä¸å¼€UIKitè¿™ä¸ªåº“å§ï¼Œä½ è¦ä½¿ç”¨çš„å„ç§åŸºç¡€æ•°æ®ç»“æ„ï¼Œå¦‚NSStringï¼ŒNSArrayç­‰ï¼Œä¹Ÿç¦»ä¸å¼€Foundationè¿™ä¸ªåŸºç¡€åº“ã€‚é™¤äº†å®˜æ–¹çš„åº“å¤–ï¼Œå¼€å‘ä¸­æˆ‘ä»¬ä¹Ÿä¼šä»Githubç­‰å¼€æºç¤¾åŒºä¸‹è½½ç¬¬ä¸‰æ–¹çš„å¼€æºåº“è¿›è¡Œä½¿ç”¨ã€‚ä¸€èˆ¬æˆ‘ä»¬ä½¿ç”¨çš„ç¬¬ä¸‰æ–¹åº“æˆ–è‡ªå·±å¼€å‘çš„åº“éƒ½é‡‡ç”¨é™æ€åº“çš„æ–¹å¼ä½¿ç”¨ï¼Œè€Œç³»ç»Ÿæä¾›çš„åº“å¤§å¤šæ˜¯åŠ¨æ€åº“ï¼Œæ–¹ä¾¿å¤šè¿›ç¨‹å…±äº«ã€‚è™½ç„¶æˆ‘ä»¬å¤©å¤©åœ¨ç”¨åº“ï¼Œä½†ä½ å¯¹é™æ€åº“å’ŒåŠ¨æ€åº“çœŸçš„äº†è§£ä¹ˆï¼Ÿé™æ€åº“å’ŒåŠ¨æ€åº“çš„ç»“æ„æ˜¯æ€æ ·çš„ï¼Ÿé™æ€åº“å’ŒåŠ¨æ€åº“æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå®ƒä»¬åˆæ˜¯æ€ä¹ˆåº”ç”¨çš„ï¼Ÿæœ¬èŠ‚åšå®¢ï¼Œæˆ‘ä»¬å°±æ¥èŠä¸€èŠè¿™äº›é—®é¢˜ã€‚ 1. å¼•è¨€é™æ€åº“ä¸åŠ¨æ€åº“æœ‰å¾ˆå¤šç›¸ä¼¼ä¹‹å¤„ï¼Œå½“ç„¶ä¹Ÿæœ‰å¾ˆå¤šå·®å¼‚ã€‚ ä»åç¼€åæ¥è¯´ï¼Œ.aä¸ºåç¼€åçš„åº“æ–‡ä»¶æ˜¯é™æ€åº“ï¼Œ.dylibä¸ºåç¼€åçš„åº“æ–‡ä»¶æ˜¯åŠ¨æ€åº“ã€‚åœ¨iOSå¼€å‘ä¸­ï¼Œæ›´å¤šæ—¶å€™æˆ‘ä»¬ä½¿ç”¨çš„åº“æ˜¯ä»¥.frameworkä¸ºåç¼€çš„ã€‚frameworkå¯ä»¥æ˜¯é™æ€åº“ï¼Œä¹Ÿå¯ä»¥æ˜¯åŠ¨æ€åº“ï¼Œframeworkæœ¬èº«æ˜¯ä¸€ç§æ‰“åŒ…æ–¹å¼ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œæˆ‘ä»¬åœ¨ç¼–å†™ä»£ç æ—¶ï¼Œç¼–å†™çš„éƒ½æ˜¯â€œæºç â€ï¼Œè€Œè¦è®©è®¡ç®—æœºç†è§£è¿™äº›æºç ï¼Œå°±éœ€è¦ç¼–è¯‘å™¨å¯¹æºç è¿›è¡Œç¼–è¯‘ï¼Œå°†å…¶ç¼–è¯‘æˆè®¡ç®—æœºå¯ç†è§£çš„â€œæœºå™¨ç â€ï¼Œæˆ‘ä»¬æ¯ç¼–å†™çš„ä¸€ä¸ªæºç æ–‡ä»¶éƒ½ä¼šè¢«ç¼–è¯‘æˆä¸€ä¸ªäºŒè¿›åˆ¶çš„.oæ–‡ä»¶ï¼Œæ— è®ºé™æ€åº“è¿˜æ˜¯åŠ¨æ€åº“ï¼Œéƒ½æ˜¯.oæ–‡ä»¶çš„åˆé›†ã€‚ä»…ä»…åªæœ‰.oæ–‡ä»¶é›†åˆè€Œæˆçš„åº“æ–‡ä»¶ï¼Œå¯¹äºå¼€å‘è€…æ¥è¯´æ˜¯ä¸å¤Ÿçš„ï¼Œåœ¨å¼€å‘æ—¶æˆ‘ä»¬ä¸å¯èƒ½åœ¨æ²¡æœ‰å¤´æ–‡ä»¶çš„æƒ…å†µä¸‹æ–¹ä¾¿çš„è°ƒç”¨åº“ä¸­çš„æ–¹æ³•ï¼Œå› æ­¤è¿˜éœ€è¦æœ‰å¤´æ–‡ä»¶å°†åº“ä¸­æä¾›çš„æ¥å£æš´éœ²å‡ºæ¥ï¼Œè¿˜æœ‰æ—¶å€™ï¼Œå¯èƒ½è¿˜éœ€è¦ä¸€äº›å…¶ä»–èµ„æºï¼Œæ¯”å¦‚å’Œé¡µé¢ç›¸å…³çš„åº“ä¼šæœ‰å†…ç½®ä¸€äº›å›¾ç‰‡èµ„æºç­‰ï¼Œframeworkçš„åŠŸèƒ½å°±æ˜¯å°†åº“æ–‡ä»¶ï¼Œå¤´æ–‡ä»¶ï¼Œèµ„æºæ–‡ä»¶æ‰“åŒ…åœ¨ä¸€èµ·ï¼Œæ–¹ä¾¿æˆ‘ä»¬è¿›è¡Œä½¿ç”¨ã€‚ä¸‹å›¾æè¿°äº†frameworkæ–‡ä»¶ä¸åº“æ–‡ä»¶çš„å…³ç³»ï¼š 2. åˆ›å»ºä¸€ä¸ªé™æ€åº“æ›´æ·±å…¥çš„äº†è§£é™æ€åº“ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆåˆ›å»ºä¸€ä¸ªé™æ€åº“ä½“éªŒä¸‹ï¼Œé¦–å…ˆä½¿ç”¨Xcodeåˆ›å»ºä¸€ä¸ªæ–°çš„å·¥ç¨‹ï¼Œé€‰æ‹©Frameworkï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š åˆ›å»ºå¥½çš„frameworkå·¥ç¨‹æ¨¡æ¿ï¼Œä¼šç”Ÿæˆä¸€ä¸ªå’Œå·¥ç¨‹åç›¸åŒçš„å¤´æ–‡ä»¶ï¼Œä»¥åŠä¸€ä¸ªResourcesèµ„æºæ–‡ä»¶å¤¹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºæ–°çš„åŠŸèƒ½ç±»æ–‡ä»¶ï¼Œä¾‹å¦‚å¯ä»¥æ–°å»ºä¸€ä¸ªå‘½åä¸ºMyLogçš„ç±»å’Œä¸€ä¸ªMyToolçš„ç±»ï¼Œä»£ç å¦‚ä¸‹ï¼š MyLog.h 12345678// MyLog.h#import &lt;Foundation/Foundation.h&gt;@interface MyLog : NSObject+ (void)log:(NSString *)str;@end MyLog.m 123456789#import \"MyLog.h\"@implementation MyLog+ (void)log:(NSString *)str &#123; NSLog(@\"MyLog:%@\",str);&#125;@end MyTool.h 1234567#import &lt;Foundation/Foundation.h&gt;@interface MyTool : NSObject+ (NSInteger)add:(NSInteger)a another:(NSInteger)b;@end MyTool.m 123456789#import \"MyTool.h\"@implementation MyTool+ (NSInteger)add:(NSInteger)a another:(NSInteger)b &#123; return a + b;&#125;@end åœ¨é»˜è®¤ç”Ÿæˆçš„åº“å¤´æ–‡ä»¶ä¸­ï¼Œå¼•å…¥è¿™ä¸¤ä¸ªåŠŸèƒ½å¤´æ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š 12345678910#import &lt;Foundation/Foundation.h&gt;//! Project version number for MyStatic.FOUNDATION_EXPORT double MyStaticVersionNumber;//! Project version string for MyStatic.FOUNDATION_EXPORT const unsigned char MyStaticVersionString[];#import \"MyLog.h\"#import \"MyTool.h\" åœ¨æ„å»ºframewrokå‰ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®æ­¤frameworkæ„å»ºæˆåŠ¨åŠ¨æ€åº“è¿˜æ˜¯é™æ€åº“ï¼Œæˆ‘ä»¬å…ˆå°†å…¶æ„å»ºæˆé™æ€åº“ï¼Œè®¾ç½®ç¼–è¯‘é€‰é¡¹çš„Mach-o Typeä¸ºStatic Libraryï¼Œå¦‚ä¸‹ï¼š ä¹‹åï¼Œå¯ä»¥è®©Xcodeè¿›è¡ŒBuildï¼Œä¹‹ååœ¨å¯¹åº”çš„Productsæ–‡ä»¶å¤¹ä¸­å¯ä»¥æ‰¾åˆ°ç”Ÿæˆçš„frameworkæ–‡ä»¶ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¦‚æœä½ æŸ¥çœ‹æ­¤frameworkæ–‡ä»¶çš„åŒ…å†…å®¹ï¼Œä¼šå‘ç°å…¶ä¸­æœ‰5ç±»æ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š å…¶ä¸­ï¼Œ_CodeSignatureä¸­å­˜æ”¾çš„æ˜¯frameworkçš„ç­¾åæ–‡ä»¶ã€‚ Headersä¸­å­˜æ”¾çš„æ˜¯å¤´æ–‡ä»¶ï¼Œéœ€è¦æ³¨æ„ï¼Œåœ¨ç¼–è¯‘frameworkå·¥ç¨‹æ—¶ï¼Œè¦å°†éœ€è¦æš´éœ²çš„å¤´æ–‡ä»¶è®¾ç½®ä¸ºpublicã€‚ Info.plistæ–‡ä»¶æ˜¯å½“å‰frameworkçš„é…ç½®æ–‡ä»¶ã€‚ Modulesä¸­çš„modulemapæ–‡ä»¶ç”¨æ¥ç®¡ç†LLVMçš„module mapï¼Œå®šä¹‰ç»„ä»¶ç»“æ„ã€‚ ä¸‹é¢ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•ä½¿ç”¨ä¸‹æ­¤é™æ€åº“ï¼Œä½¿ç”¨Xcodeæ–°å»ºä¸€ä¸ªåä¸ºLibDemoçš„iOSå·¥ç¨‹ï¼Œå°†å‰é¢æ„å»ºçš„MyStatic.frameworkæ–‡ä»¶ç›´æ¥æ‹–å…¥æ­¤å·¥ç¨‹ä¸­ï¼Œåœ¨å·¥ç¨‹çš„ç¼–è¯‘é€‰é¡¹ä¸­ï¼Œæ‰¾åˆ°Framework Search Pathså’ŒHeader Search Pathsä¸­åˆ†åˆ«å°†æ­¤frameworkçš„è·¯å¾„ä¸å¤´æ–‡ä»¶çš„è·¯å¾„è¿›è¡Œé…ç½®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¿®æ”¹æµ‹è¯•é¡¹ç›®çš„ViewController.mæ–‡ä»¶å¦‚ä¸‹ï¼š 12345678910111213141516171819#import \"ViewController.h\"#import \"MyStatic.framework/Headers/MyStatic.h\"@interface ViewController ()@end@implementation ViewController- (void)viewDidLoad &#123; [super viewDidLoad]; NSInteger a = 100; NSInteger b = 200; NSInteger c = [MyTool add:a another:b]; [MyLog log:[NSString stringWithFormat:@\"%ld\", c]];&#125;@end è¿è¡Œä»£ç ï¼Œä»æ§åˆ¶å°å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬çš„é™æ€åº“å·²ç»å¯ä»¥æ­£å¸¸å·¥ä½œäº†ã€‚ä½ å¯èƒ½ä¼šè§‰å¾—ä¸Šé¢çš„å¤´æ–‡ä»¶å¼•å…¥æ–¹å¼éå¸¸çš„ä¸‘é™‹ï¼Œä½ å®Œå…¨å¯ä»¥åœ¨å·¥ç¨‹ä¸­æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå°†frameworkåŒ…å†…çš„å¤´æ–‡ä»¶æ‹·è´è¿‡æ¥ï¼Œå¦‚ä¸‹å›¾ï¼š è¿™æ ·ä½ å°±å¯ä»¥åƒå¼•ç”¨å·¥ç¨‹å†…çš„å¤´æ–‡ä»¶ä¸€æ ·çš„ä½¿ç”¨frameworkä¸­çš„åŠŸèƒ½äº†ï¼š 123456789101112131415161718#import \"ViewController.h\"#import \"MyStatic.h\"@interface ViewController ()@end@implementation ViewController- (void)viewDidLoad &#123; [super viewDidLoad]; NSInteger a = 100; NSInteger b = 200; NSInteger c = [MyTool add:a another:b]; [MyLog log:[NSString stringWithFormat:@\"%ld\", c]];&#125;@end 3.è¯•è¯•åŠ¨æ€åº“å§é™æ€åº“çš„æ„å»ºå’Œä½¿ç”¨è¿‡ç¨‹çœ‹ä¸Šå»éå¸¸å®¹æ˜“ï¼ŒåŠ¨æ€åº“åº”è¯¥ä¹Ÿä¸å…¶ç±»ä¼¼ã€‚æˆ‘ä»¬ç°åœ¨å°±æ¥è¯•è¯•å§ï¼Œä½¿ç”¨Xcodeæ–°å»ºä¸€ä¸ªå‘½åä¸ºMyDylibçš„frameworkå·¥ç¨‹ï¼Œå°†ç¼–è¯‘é€‰é¡¹ä¸­çš„Mach-O Type æ”¹ä¸ºDynamic Libraryï¼Œåˆ›å»ºä¸€äº›ç®€å•çš„æµ‹è¯•ç±»å¦‚ä¸‹ï¼š MyObjectOne.h 1234567#import &lt;Foundation/Foundation.h&gt;@interface MyObjectOne : NSObject@property(copy) NSString *name;@end MyObjectOne.m 12345#import \"MyObjectOne.h\"@implementation MyObjectOne@end MyObjectTwo.h 1234567#import &lt;Foundation/Foundation.h&gt;@interface MyObjectTwo : NSObject@property(copy) NSString *title;@end MyObjectTwo.m 12345#import \"MyObjectTwo.h\"@implementation MyObjectTwo@end æŒ‰ç…§åŒæ ·çš„æ–¹å¼ï¼Œå°†æ„å»ºå¥½çš„frameworkæ–‡ä»¶æ‹–å…¥åˆ°æµ‹è¯•å·¥ç¨‹ä¸­ï¼Œé…ç½®å¤´æ–‡ä»¶è·¯å¾„ï¼Œæ·»åŠ æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021#import \"ViewController.h\"#import \"MyStatic.h\"#import \"MyDylib.framework/Headers/MyDylib.h\"@interface ViewController ()@end@implementation ViewController- (void)viewDidLoad &#123; [super viewDidLoad]; NSInteger a = 100; NSInteger b = 200; NSInteger c = [MyTool add:a another:b]; [MyLog log:[NSString stringWithFormat:@\"%ld\", c]]; MyObjectOne *one = [[MyObjectOne alloc] init]; one.name = @\"Hello\"; [MyLog log:one.name];&#125; è¯•ä¸‹ç¼–è¯‘è¿è¡Œï¼Œç›®å‰ä¸ºæ­¢ï¼Œçœ‹ä¸Šå»ä¸€åˆ‡æ­£å¸¸ï¼Œä½†æ˜¯å½“ç¨‹åºè¿è¡Œèµ·æ¥åä¼šå´©æºƒï¼Œæ§åˆ¶å°ä¼šè¾“å‡ºå¦‚ä¸‹ä¿¡æ¯ï¼š 1dyld[72035]: Library not loaded: @rpath/MyDylib.framework/MyDylib äº§ç”Ÿè¿™ä¸ªå¼‚å¸¸çš„åŸå› æ˜¯æ²¡æœ‰æ‰¾åˆ°åŠ¨æ€åº“æ–‡ä»¶ï¼Œé™æ€åº“çš„åŠ¨æ€åº“çš„åŒºåˆ«å‡ºç°äº†ï¼Œæ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Œå…¶å®å¾ˆç®€å•ï¼Œæˆ‘ä»¬æ‰¾åˆ°å½“å‰æµ‹è¯•å·¥ç¨‹ç¼–è¯‘çš„äº§å‡ºå¯æ‰§è¡Œæ–‡ä»¶ï¼Œç‚¹å‡»æ˜¾ç¤ºåŒ…å†…å®¹ï¼Œåœ¨å…¶ä¸­æ–°å»ºä¸€ä¸ªFrameworksçš„æ–‡ä»¶å¤¹ï¼Œå°†MyDylib.frameworkæ–‡ä»¶æ‹·è´è¿›å…¥ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ç°åœ¨å†è¿è¡Œå·¥ç¨‹ï¼Œä½ ä¼šå‘ç°ç¨‹åºå·²ç»å¯ä»¥æ­£å¸¸æ‰§è¡Œäº†ã€‚ä½†æ˜¯æ‰‹åŠ¨æ‹·è´åŠ¨æ€åº“åˆ°å¯æ‰§è¡Œæ–‡ä»¶çš„æ“ä½œéå¸¸ä¸ä¼˜é›…ï¼Œå¦‚æœçœŸçš„è¦åœ¨é¡¹ç›®ä¸­ä½¿ç”¨åŠ¨æ€åº“ï¼Œæˆ‘ä»¬æ›´å¤šæ—¶å€™ä¼šé€šè¿‡è‡ªåŠ¨åŒ–çš„è„šæœ¬æ¥å®ç°å¤åˆ¶åº“æ–‡ä»¶è¿™ä¸€æ­¥æ“ä½œã€‚ é€šè¿‡è¿™äº›å®è·µï¼Œæˆ‘ä»¬å¥½åƒèƒ½æ„Ÿè§‰åˆ°é™æ€åº“å’ŒåŠ¨æ€åº“ä¹‹é—´æœ‰äº›ä»€ä¹ˆä¸åŒï¼Œä½†ç©¶ç«Ÿå“ªé‡Œä¸åŒå‘¢ï¼Ÿæˆ‘ä»¬å¸¦ç€ç–‘é—®ç»§ç»­æ¢ç´¢ã€‚ 4.é™æ€åº“å’ŒåŠ¨æ€åº“çš„ä¸åŒä¹‹å¤„â… . è½½å…¥çš„æ–¹å¼å‡ºç°å‰é¢åŠ¨æ€åº“æ— æ³•æ‰¾åˆ°çš„åŸå› å…¶å®æ˜¯åŠ¨æ€åº“ä¸é™æ€åº“çš„è½½å…¥æ–¹å¼ä¸åŒã€‚ é™æ€åº“ï¼šé™æ€åº“åœ¨é“¾æ¥æ—¶ï¼Œä¼šè¢«å®Œæ•´çš„å¤åˆ¶åˆ°å¯æ‰§è¡Œæ–‡ä»¶ä¸­ï¼Œå¦‚æœæœ‰å¤šä¸ªåº”ç”¨ä½¿ç”¨äº†ç›¸åŒçš„é™æ€åº“ï¼Œæ¯ä¸ªåº”ç”¨çš„äºŒè¿›åˆ¶æ–‡ä»¶ä¸­éƒ½ä¼šæœ‰ä¸€ä»½å®Œæ•´çš„é™æ€åº“ä»£ç ã€‚ åŠ¨æ€åº“ï¼šç¨‹åºåœ¨é“¾æ¥æ—¶ï¼ŒåŠ¨æ€åº“å¹¶ä¸ä¼šè¢«å¤åˆ¶è¿›äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œè€Œæ˜¯åœ¨ç¨‹åºè¿è¡Œæ—¶ç”±ç³»ç»ŸåŠ¨æ€åŠ è½½åˆ°å†…å­˜ä¾›ç¨‹åºè¿›è¡Œè°ƒç”¨ã€‚ç”±äºè¿™ç§ç‰¹æ€§ï¼ŒåŠ¨æ€åº“ç³»ç»Ÿå¯ä»¥åªåŠ è½½ä¸€æ¬¡ï¼Œåº”ç”¨ç¨‹åºå…±äº«ã€‚ å¯¹äºé™æ€åº“åŠ¨æ€åº“è½½å…¥æ–¹å¼æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥å†æ·±ä¸€æ­¥ã€‚é¦–å…ˆï¼Œé™æ€åº“ä¼šè¢«å®Œæ•´å¤åˆ¶è¿›å¯æ‰§è¡Œæ–‡ä»¶ä¸­ï¼Œè¿™é‡Œçš„å®Œæ•´å…¶å®æ˜¯ä¸ç²¾å‡†çš„ï¼Œæˆ‘ä»¬åœ¨å¼•å…¥ç¬¬ä¸‰æ–¹åº“æ—¶ï¼Œå¾€å¾€éœ€è¦åœ¨å·¥ç¨‹çš„Other Linker Flagsä¸­é…ç½®-Objcé€‰é¡¹ï¼Œè¿™ä¸€é¡¹çš„ä½œç”¨æ˜¯å¯¹é“¾æ¥ä¼˜åŒ–åšè®¾ç½®ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œé™æ€åº“åœ¨é“¾æ¥çš„æ—¶å€™ï¼Œå¹¶ä¸ä¼šæŠŠæ‰€æœ‰ä»£ç éƒ½å¤åˆ¶åˆ°å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå…¶åªä¼šå¤åˆ¶ä½¿ç”¨åˆ°çš„ä»£ç ï¼Œè¿™æ ·å¯ä»¥å‡å°‘æœ€ç»ˆåº”ç”¨åŒ…çš„ä½“ç§¯ï¼Œä½†æ˜¯OCè¯­è¨€çš„åŠ¨æ€æ€§å†³å®šäº†å¹¶éä»£ç ç›´æ¥å¼•ç”¨æ‰ç®—ä½¿ç”¨ï¼Œè¿™ç§è¿æ¥æ–¹å¼ç»å¸¸ä¼šäº§ç”Ÿè¿è¡Œæ—¶çš„é—®é¢˜ã€‚ è®¾ç½®-Objcé€‰é¡¹åï¼Œé“¾æ¥å™¨ä¸ç®¡ä»£ç ä¸­æœ‰æ²¡æœ‰ä½¿ç”¨ï¼Œéƒ½ä¼šå°†OCç±»å’Œå…¶å¯¹åº”çš„Categoryå…¨éƒ¨åŠ è½½è¿›æ¥ã€‚ è®¾ç½®-all_loadé€‰é¡¹åï¼Œé“¾æ¥å™¨ä¼šæŠŠæ‰€æœ‰ç›®æ ‡æ–‡ä»¶éƒ½åŠ è½½è¿›æ¥ï¼Œä¸æ­¢å±€é™ä¸OCæ–‡ä»¶ã€‚ è®¾ç½®-force_loadå‚æ•°å¯ä»¥æŒ‡å®šå¼ºåˆ¶åŠ è½½æŸä¸ªé™æ€åº“çš„æ‰€æœ‰ç›®æ ‡æ–‡ä»¶ï¼Œå¯¹è¿™ä¸ªé™æ€åº“æ¥è¯´ï¼Œä½œç”¨ä¸-all_loadä¸€æ ·ã€‚ å¯¹äºåŠ¨æ€åº“æ¥è¯´ï¼Œé“¾æ¥å™¨å°±æ²¡æœ‰åŠæ³•åšè¿™æ ·çš„ä¼˜åŒ–åŠ¨ä½œäº†ï¼Œå› ä¸ºåŠ¨æ€åº“æ˜¯è¿è¡Œæ—¶åŠ è½½çš„ï¼Œé“¾æ¥å™¨ä¸çŸ¥é“å“ªäº›ä»£ç ä¼šè¢«ç”¨åˆ°ï¼Œå› æ­¤ä»è¿™ä¸€ä¸ªæ–¹é¢æ¥è¯´ï¼Œé™æ€åº“å¯¹åŒ…å¤§å°çš„ä¼˜åŒ–è²Œä¼¼ä¼šæ¯”åŠ¨æ€åº“æ›´åŠ ä¼˜å¼‚ï¼Œä½†æ˜¯çœŸçš„æ˜¯è¿™æ ·ä¹ˆï¼Ÿæˆ‘ä»¬å…ˆç•™ä¸‹ä¸ªä¼ç¬”ï¼Œåé¢å†åˆ†æã€‚ â…¡.æ–‡ä»¶ç»“æ„ä¸åŒé™æ€åº“å’ŒåŠ¨æ€åº“çš„æœ¬è´¨åŒºåˆ«è¿˜æ˜¯åœ¨äºæ„å»ºå‡ºçš„æ–‡ä»¶ç»“æ„å®Œå…¨ä¸åŒã€‚å¯ä»¥ä½¿ç”¨MachOViewå·¥å…·æ¥æŸ¥çœ‹åº“æ–‡ä»¶ã€‚ æˆ‘ä»¬å…ˆè¯´é™æ€åº“ï¼ŒMachOViewæ‰“å¼€çš„é™æ€åº“ç»“æ„å¦‚ä¸‹ï¼š å¯ä»¥çœ‹åˆ°ï¼Œé™æ€åº“çš„ç»“æ„å…¶å®æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œé™¤äº†åº“æœ¬èº«çš„ä¸€äº›æè¿°æ–‡ä»¶ï¼Œç¬¦å·è¡¨å¤–ï¼ŒåŸºæœ¬å°±æ˜¯å…¶ä»–å¯æ‰§è¡Œæ–‡ä»¶çš„é›†åˆäº†ï¼Œåœ¨å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæ¯ä¸ªå¯æ‰§è¡Œæ–‡ä»¶éƒ½ä¼šæœ‰ä¸€äº›å¤´æ•°æ®ï¼Œè¿™äº›å¤´æ•°æ®è®°å½•äº†å¯æ‰§è¡Œæœªè§çš„åå­—ï¼Œå¤§å°ç­‰ä¿¡æ¯ã€‚å¯ä»¥ç‚¹å¼€ä»»æ„ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå…¶ä¸­å°±æ˜¯æˆ‘ä»¬ç†Ÿæ‚‰çš„å„ç§ä»£ç æ®µï¼Œæ•°æ®æ®µç­‰æ•°æ®äº†ï¼š æˆ‘ä»¬å†æ¥çœ‹åŠ¨æ€åº“ï¼Œå…¶ç»“æ„å¦‚ä¸‹ï¼š å¯ä»¥çœ‹åˆ°åŠ¨æ€åº“æœ¬èº«å°±æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå…¶å¹¶ä¸æ˜¯å°†å†…éƒ¨çš„æ‰€æœ‰.oæ–‡ä»¶åšç®€å•çš„é›†åˆï¼Œè€Œæ˜¯ä¸€ä¸ªæœ€ç»ˆé“¾æ¥å®Œæˆçš„é•œåƒæ–‡ä»¶ã€‚ç”±äºåŠ¨æ€åº“æ˜¯è¿è¡Œæ—¶è¿›è¡Œé“¾æ¥çš„ï¼Œå…¶æ— æ³•åšç¼–è¯‘æ—¶çš„ä¼˜åŒ–ï¼Œçœ‹ä¸Šå»å¯èƒ½ä¼šå¢åŠ åº”ç”¨åŒ…çš„å¤§å°ï¼Œä½†æ˜¯å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å¤§å¤šä¼šé‡‡ç”¨-Objcå‚æ•°æ¥å¼ºåˆ¶é™æ€åº“é“¾æ¥æ‰€æœ‰OCæ–‡ä»¶ï¼Œå¹¶ä¸”é™æ€åº“ä¸­æ¯ä¸€ä¸ª.oæ–‡ä»¶éƒ½ä¼šæœ‰ä¸€ä¸ªå¤´ä¿¡æ¯ï¼Œè€ŒåŠ¨æ€åº“åˆ™çœç•¥äº†è¿™éƒ¨åˆ†ä¿¡æ¯ï¼Œå› æ­¤æœ€ç»ˆå¯¹å½±å“åº”ç”¨åŒ…å¤§å°è¿™ä¸€æ–¹é¢æ¥è¯´ï¼Œå¹¶ä¸ä¸€å®šé™æ€åº“æ›´ä¼˜ã€‚ä½†æ˜¯æœ‰ä¸€ç‚¹æ˜¯ç¡®å®šäº†ï¼Œé™æ€åº“æ˜¯ç¼–è¯‘æ—¶é“¾æ¥ï¼Œä¼šèŠ‚çœåº”ç”¨å¯åŠ¨æ—¶é—´ã€‚å¾€å¾€åœ¨åšä¼˜åŒ–ç±»çš„é¡¹ç›®æ—¶ï¼Œæ²¡æœ‰å›ºå®šçš„æ–¹æ¡ˆï¼Œæˆ‘ä»¬è¦æ ¹æ®å®é™…æƒ…å†µï¼Œé€‰æ‹©æœ€åˆé€‚è‡ªå·±çš„æ–¹æ¡ˆã€‚ 5.åŠ¨æ€åº“ä¸è¿è¡Œæ—¶â… . åŠ¨æ€åº“çš„åŠ è½½åªè¦è¯´åˆ°è¿è¡Œæ—¶ï¼Œå¯¹å¼€å‘è€…æ¥è¯´å°±å¤§æœ‰å¯ä¸ºä¹‹å¤„ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆæ€è€ƒä¸‹ï¼Œå‰é¢çš„æµ‹è¯•å·¥ç¨‹ï¼Œå¦‚æœæˆ‘ä»¬ä¸æ‹·è´åŠ¨æ€åº“æ–‡ä»¶åˆ°IPAåŒ…å†…çš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆç¨‹åºè¿è¡Œä¼šæ‰¾ä¸åˆ°è¿™ä¸ªåº“æ–‡ä»¶ï¼Ÿåˆä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦å°†åŠ¨æ€åº“æ‹·è´è¿›IPAåŒ…çš„Frameworksæ–‡ä»¶å¤¹æ‰è¡Œï¼Ÿåˆ«çš„æ–‡ä»¶å¤¹ä¸è¡Œä¹ˆï¼Ÿ è¦è§£é‡Šä¸Šé¢çš„é—®é¢˜ï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦ä»åŠ¨æ€åº“çš„åŠ è½½åŸç†ä¸Šæ¥çœ‹ï¼Œå¯ä»¥ç”¨MachOViewæ‰“å¼€æµ‹è¯•åº”ç”¨åŒ…çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œæ‰¾åˆ°å…¶ä¸­çš„Load Commandsæ®µï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¯ä»¥çœ‹åˆ°ï¼Œå…¶ä¸­æœ‰ä¸€äº›åŠ¨æ€åº“çš„åŠ è½½æŒ‡ä»¤ï¼ŒFoundationï¼ŒUIKitç­‰éƒ½æ˜¯ç³»ç»Ÿçš„åŠ¨æ€åº“ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å…¶è¯¦æƒ…ä¸­çœ‹åˆ°è¯¦ç»†çš„åŠ è½½è·¯å¾„ï¼Œå¦‚ä¸‹ï¼š å¯¹äºæˆ‘ä»¬è‡ªå·±çš„MyDylibåº“ï¼Œå…¶åŠ è½½è·¯å¾„å¦‚ä¸‹ï¼š å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªåŠ¨æ€åº“æ˜¯ä»@rpath/MyDylib.framework/MyDylibè¿™ä¸ªè·¯å¾„æ¥åŠ è½½çš„ï¼Œè¿™ä¸ªåŠ è½½è·¯å¾„çš„è®¾ç½®åœ¨åŠ¨æ€åº“ç¼–è¯‘æ—¶å°±å·²ç»ç¡®å®šï¼Œæˆ‘ä»¬å¯ä»¥çœ‹ä¸‹MyDylibè¿™ä¸ªå·¥ç¨‹ï¼Œåœ¨Xcodeçš„ç¼–è¯‘é…ç½®é€‰é¡¹ä¸­ï¼Œæ‰¾åˆ°Dynamic Library Install Nameé€‰é¡¹ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š è¿™é‡Œçš„@rpathå®é™…ä¸Šæ˜¯ä¸€ä¸ªç¯å¢ƒå˜é‡ï¼Œåœ¨åº”ç”¨å·¥ç¨‹ä¸­å¯ä»¥é…ç½®@rpathçš„å€¼ï¼Œåœ¨LibDemoå·¥ç¨‹çš„ç¼–è¯‘é€‰é¡¹ä¸­æœrpathï¼Œå¯ä»¥çœ‹åˆ°è¿™ä¸ªç¯å¢ƒå˜é‡çš„é…ç½®ï¼š ç°åœ¨æˆ‘ä»¬æ¸…æ¥šäº†ï¼Œå…¶å®åŠ¨æ€åº“æ–‡ä»¶ä¸ä¸€å®šè¦æ”¾å…¥Frameworksæ–‡ä»¶å¤¹ä¸‹ï¼Œä¿®æ”¹@rpathå˜é‡çš„è·¯å¾„å³å¯ä¿®æ”¹åŠ¨æ€åº“çš„åŠ è½½è·¯å¾„ã€‚ å¯¹äºåŠ¨æ€åº“çš„è¿™ç§åŠ è½½æ–¹å¼ï¼ŒåŸåˆ™ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹æ­¤äºŒè¿›åˆ¶æ–‡ä»¶çš„åŠ è½½è·¯å¾„ï¼Œä¹Ÿå¯ä»¥ç›´æ¥æ›¿æ¢åŒ…å†…çš„åŠ¨æ€åº“æ–‡ä»¶ï¼Œå®ç°ä¸€äº›é€†å‘æ³¨å…¥çš„åŠŸèƒ½ï¼Œéå¸¸é…·ã€‚ â…¡. ä»£ç è½½å…¥åŠ¨æ€åº“åŠ¨æ€åº“æ˜¯åœ¨è¿è¡Œæ—¶è¢«åŠ è½½çš„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨è¿è¡Œæ—¶ä½¿ç”¨ä»£ç åŠ¨æ€çš„æ§åˆ¶åŠ¨æ€åº“çš„è½½å…¥ã€‚å¯ä»¥å°†æµ‹è¯•å·¥ç¨‹ä¸­å¼•ç”¨MyDylibçš„åœ°æ–¹å…¨éƒ¨åˆ æ‰ï¼Œå°†é…ç½®çš„å¤´æ–‡ä»¶è·¯å¾„ä¹Ÿå»æ‰ï¼Œæˆ‘ä»¬å°†è¿™ä¸ªåŠ¨æ€åº“æ‹·è´è¿›å·¥ç¨‹çš„Bundleä¸­ï¼Œå¦‚ä¸‹ï¼š ä¿®æ”¹ViewControllerç±»çš„ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930#import \"ViewController.h\"#import \"MyStatic.h\"#import &lt;dlfcn.h&gt;@interface ViewController ()@end@implementation ViewController- (void)viewDidLoad &#123; [super viewDidLoad]; NSInteger a = 100; NSInteger b = 200; NSInteger c = [MyTool add:a another:b]; [MyLog log:[NSString stringWithFormat:@\"%ld\", c]]; NSString *path = [[[NSBundle mainBundle] pathForResource:@\"MyDylib\" ofType:@\"framework\"] stringByAppendingString:@\"/MyDylib\"]; // è½½å…¥åŠ¨æ€åº“ void * p = dlopen([path cStringUsingEncoding:NSUTF8StringEncoding], RTLD_LAZY); if (p) &#123; // åŠ è½½åŠ¨æ€åº“æˆåŠŸ ç›´æ¥ä½¿ç”¨ Class cls = NSClassFromString(@\"MyObjectOne\"); NSObject *obj = [[cls alloc] init]; [obj performSelector:@selector(setName:) withObject:@\"Hello\"]; [MyLog log:[obj performSelector:@selector(name)]]; &#125;&#125;@end æ­¤æ—¶ï¼Œå†æ¬¡ç¼–è¯‘è¿è¡Œæ­¤å·¥ç¨‹ï¼Œå¦‚æœä½ è§‚å¯Ÿæµ‹è¯•é¡¹ç›®çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œé‡Œé¢çš„åŠ è½½å‘½ä»¤ä¸­å·²ç»æ²¡æœ‰äº†MyDylibçš„åŠ è½½ï¼Œä½†æ˜¯ç¨‹åºä¾ç„¶å¯ä»¥æ­£å¸¸çš„æ‰§è¡Œï¼Œdlopenå‡½æ•°çš„ä½œç”¨å°±æ˜¯åœ¨è¿è¡Œæ—¶è½½å…¥åŠ¨æ€é“¾æ¥åº“ï¼Œè½½å…¥æˆåŠŸåï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©OCçš„è¿è¡Œæ—¶æ–¹æ³•ï¼Œç›´æ¥è°ƒç”¨åˆ°åŠ¨æ€åº“ä¸­çš„ä»£ç ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å®é™…ä¸Šå¯ä»¥å®ç°æ’ä»¶åŠ¨æ€ä¸‹è½½ä¸ä½¿ç”¨ï¼Œä½¿å¾—åº”ç”¨æœ‰éå¸¸é«˜çš„çƒ­æ›´æ–°èƒ½åŠ›ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„ï¼ŒåŠ¨æ€ä¸‹è½½åŠ¨æ€åº“çš„æ–¹å¼å¹¶ä¸å…è®¸åœ¨AppStoreä¸Šæ¶ï¼Œæˆ‘ä»¬åªèƒ½åœ¨æµ‹è¯•çš„Appæˆ–ä¼ä¸šçš„Appä¸­ä½¿ç”¨ã€‚ å†è¿›ä¸€æ­¥è¯´ï¼Œå…¶å®åŠ¨æ€åº“çš„è¯»å–å¹¶ä¸ä¸€å®šæ˜¯ä»æœ¬åœ°æ²™ç›’ä¸­ï¼Œåœ¨æœ¬åœ°è°ƒè¯•æ—¶ï¼Œä½ å¯ä»¥ä»ä»»ä½•ä½ç½®è¯»å–åŠ¨æ€åº“æ–‡ä»¶è¿›è¡ŒåŠ è½½ï¼Œè¿™å¯ä»¥åœ¨æœ¬åœ°å®ç°å¾ˆå¤šéå¸¸é…·çš„åŠŸèƒ½ï¼Œæ¯”å¦‚Injectionå·¥å…·ï¼Œå®ƒé€šè¿‡ä¸€ä¸ªæœåŠ¡ç›‘å¬ä»£ç æ–‡ä»¶çš„å˜åŒ–ï¼Œä¹‹åå°†å…¶æ‰“åŒ…æˆåŠ¨æ€åº“æ³¨å…¥åˆ°ç¨‹åºä¸­ï¼Œå†é€šè¿‡è¿è¡Œæ—¶æ›¿æ¢ç±»å’Œæ–¹æ³•ï¼Œä»è€Œå®ç°æœ¬åœ°å¼€å‘iOSé¡¹ç›®çš„çƒ­æ›´æ–°æ•ˆæœï¼Œéå¸¸å¥½ç”¨ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œæ‡‚çš„çƒ­çˆ±ï¼Œæ„¿æ„åˆ†äº«ï¼Œåšä¸ªæœ‹å‹ QQï¼š316045346","categories":[{"name":"ç¼–ç¨‹ç ç‘","slug":"ç¼–ç¨‹ç ç‘","permalink":"http://huishao.cc/categories/ç¼–ç¨‹ç ç‘/"}],"tags":[],"keywords":[{"name":"ç¼–ç¨‹ç ç‘","slug":"ç¼–ç¨‹ç ç‘","permalink":"http://huishao.cc/categories/ç¼–ç¨‹ç ç‘/"}]},{"title":"ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ21ï¼‰â€”â€”ç«æƒ…æŠ¥è­¦å™¨","slug":"436ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ21ï¼‰â€”â€”ç«æƒ…æŠ¥è­¦å™¨","date":"2021-11-19T16:00:00.000Z","updated":"2021-11-20T03:13:57.145Z","comments":true,"path":"2021/11/20/436ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ21ï¼‰â€”â€”ç«æƒ…æŠ¥è­¦å™¨/","link":"","permalink":"http://huishao.cc/2021/11/20/436ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ21ï¼‰â€”â€”ç«æƒ…æŠ¥è­¦å™¨/","excerpt":"","text":"ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ21ï¼‰â€”â€”ç«æƒ…æŠ¥è­¦å™¨å¾ˆå¤šå…¬å¯“å’Œå†™å­—æ¥¼ä¸­éƒ½æœ‰å®Œå–„çš„é˜²ç«è£…ç½®ï¼Œä½ æƒ³çŸ¥é“è¿™äº›è®¾å¤‡æ˜¯å¦‚ä½•å¯¹æ˜¯å¦äº§ç”Ÿäº†ç«æƒ…è¿›è¡Œåˆ¤æ–­çš„ä¹ˆï¼Ÿå½“æœ‰ç‰©ä½“ç‡ƒçƒ§æ—¶ï¼Œä¼šäº§ç”Ÿç«ç„°å’ŒçƒŸé›¾ï¼Œå¦‚æœæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¼ æ„Ÿå™¨å¯¹ç«ç„°å’ŒçƒŸé›¾è¿›è¡Œï¼Œå®é™…ä¸Šå°±å¯ä»¥åšåˆ°æ£€æµ‹æ˜¯å¦æœ‰ç«æƒ…å‘ç”Ÿã€‚ ä¸€. ç«ç„°ä¼ æ„Ÿå™¨ç‰©è´¨åœ¨ç‡ƒçƒ§æ—¶äº§ç”Ÿçš„ç«ç„°å…·æœ‰ç¦»æ•£å…‰è°±çš„æ°”ä½“è¾å°„å’Œè¿ç»­å…‰è°±çš„å›ºä½“è¾å°„ï¼Œè™½ç„¶ä¸åŒçš„ç‡ƒçƒ§ç‰©å…¶äº§ç”Ÿçš„ç«ç„°çš„è¾å°„å¼ºåº¦ï¼Œæ³¢é•¿ç­‰å„æœ‰å·®å¼‚ï¼Œä½†æ€»ä½“æ¥è¯´å…¶æ³¢é•¿èŒƒå›´æ˜¯æœ‰ç‰¹å¾çš„ï¼Œç«ç„°ä¼ æ„Ÿå™¨å³æ˜¯é€šè¿‡è¿™ä¸€åŸç†è¦æ£€æµ‹è¾å°„æ³¢é•¿ï¼Œæ¥åˆ¤æ–­å‘¨å›´æ˜¯å¦æœ‰ç«æºã€‚æœ¬æ¬¡å®éªŒï¼Œæˆ‘ä»¬ä½¿ç”¨çš„ç«ç„°ä¼ æ„Ÿå™¨å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š æ­¤ä¼ æ„Ÿå™¨æ¨¡å—æœ‰4ä¸ªå¼•è„šï¼Œé™¤äº†ç”µæºæ­£è´Ÿæå¤–ï¼Œè¿˜æœ‰ä¸¤ä¸ªè¾“å‡ºå¼•è„šï¼Œåˆ†åˆ«ä¼šè¾“å‡ºæ•°å­—ä¿¡å·å’Œæ¨¡æ‹Ÿä¿¡å·ã€‚æ­¤æ¨¡å—ä¹Ÿå¸¦ä¸€ä¸ªå¯å˜ç”µé˜»æ¥æ¡ä»¶ä¼ æ„Ÿå™¨çš„çµæ•åº¦ã€‚ äºŒ.çƒŸé›¾ä¼ æ„Ÿå™¨çƒŸé›¾ä¼ æ„Ÿå™¨æ˜¯ä¸€ç§æ°”ä½“ä¼ æ„Ÿå™¨ï¼Œå½“ä¸çƒŸé›¾æ¥è§¦æ—¶ï¼Œå…¶è¡¨é¢å¯¼ç”µç‡ä¼šå‘ç”Ÿå˜åŒ–ï¼Œæœ€ç»ˆè¾“å‡ºç”µå‹å‘ç”Ÿå˜åŒ–ã€‚æœ¬æ¬¡å®éªŒä½¿ç”¨çš„çƒŸé›¾ä¼ æ„Ÿå™¨æ¨¡å—å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š æ­¤ä¼ æ„Ÿå™¨æ¨¡å—ä¹Ÿæœ‰4ä¸ªå¼•è„šï¼Œé™¤äº†ç”µæºæ­£è´Ÿæå¤–ï¼Œå¦å¤–ä¸¤ä¸ªè¾“å‡ºå¼•è„šåˆ†åˆ«ä¸ºæ•°å­—ä¿¡å·è¾“å‡ºå’Œæ¨¡æ‹Ÿä¿¡å·è¾“å‡ºã€‚ ä¸‰. å®éªŒè¿çº¿æœ¬æ¬¡å®éªŒï¼Œæˆ‘ä»¬ä½¿ç”¨çš„ä¸¤ä¸ªä¼ æ„Ÿå™¨æ¨¡å—éƒ½æ”¯æŒæ•°å­—ä¿¡å·è¾“å‡ºå’Œæ¨¡æ‹Ÿä¿¡å·è¾“å‡ºï¼Œä¸ºäº†å¤„ç†æ¨¡æ‹Ÿä¿¡å·ï¼Œæˆ‘ä»¬åˆè¦ä½¿ç”¨æ¨¡æ•°è½¬æ¢æ¨¡å—äº†ï¼Œä¸¤ä¸ªä¼ æ„Ÿå™¨çš„æ¨¡æ‹Ÿä¿¡å·éƒ½é€šè¿‡PCF8591æ¥è½¬æ¢ã€‚ è¿çº¿æ–¹å¼å¦‚ä¸‹ï¼š PCF8591ä¸æ ‘è“æ´¾ï¼š PCF8591 æ ‘è“æ´¾ SCL SCL SDA SDA GND GND VCC +5V ç«ç„°ä¼ æ„Ÿå™¨è¿çº¿ï¼š ç«ç„°ä¼ æ„Ÿå™¨ PCF8591 æ ‘è“æ´¾ GND GND VCC +5V DO GPIO17(BCMç¼–ç ï¼Œå¯¹åº”ç‰©ç†ç¼–ç 11) AO AIN0 çƒŸé›¾ä¼ æ„Ÿå™¨è¿çº¿ï¼š çƒŸé›¾ä¼ æ„Ÿå™¨ PCF8591 æ ‘è“æ´¾ GND GND VCC +5V DO GPIO18(BCMç¼–ç ï¼Œå¯¹åº”ç‰©ç†ç¼–ç 12) AO AIN1 å››. ç¼–ç æœ¬æ¬¡å®éªŒä¸æœ¬ç³»åˆ—åšå®¢ä¸­ä¹‹å‰ä»‹ç»çš„å®éªŒä»æŠ€æœ¯ä¸Šæ¥è¯´ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆéš¾åº¦ï¼Œç¼–ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647#SMBus (System Management Bus,ç³»ç»Ÿç®¡ç†æ€»çº¿) import smbus #åœ¨ç¨‹åºä¸­å¯¼å…¥â€œsmbusâ€æ¨¡å—import RPi.GPIO as GPIO import timebus = smbus.SMBus(1) #åˆ›å»ºä¸€ä¸ªsmbuså®ä¾‹# é€šè¿‡PCF8591è¯»å–æ¨¡æ‹Ÿä¿¡å·# ç«ç„°ä¼ æ„Ÿå™¨çš„æ¨¡æ‹Ÿæ•°æ®def readFire(): #å‘é€ä¸€ä¸ªæ§åˆ¶å­—èŠ‚åˆ°è®¾å¤‡ è¡¨ç¤ºè¦è¯»å–AIN0é€šé“çš„æ•°æ® bus.write_byte(0x48,0x40) bus.read_byte(0x48) # ç©ºè¯»ä¸€æ¬¡ï¼Œæ¶ˆè´¹æ‰æ— æ•ˆæ•°æ® return bus.read_byte(0x48) # è¿”å›æŸé€šé“è¾“å…¥çš„æ¨¡æ‹Ÿå€¼A/Dè½¬æ¢åçš„æ•°å­—å€¼# çƒŸé›¾ä¼ æ„Ÿå™¨çš„æ¨¡æ‹Ÿæ•°æ®def readSmoke(): #å‘é€ä¸€ä¸ªæ§åˆ¶å­—èŠ‚åˆ°è®¾å¤‡ è¡¨ç¤ºè¦è¯»å–AIN1é€šé“çš„æ•°æ® bus.write_byte(0x48,0x41) bus.read_byte(0x48) # ç©ºè¯»ä¸€æ¬¡ï¼Œæ¶ˆè´¹æ‰æ— æ•ˆæ•°æ® return bus.read_byte(0x48) # è¿”å›æŸé€šé“è¾“å…¥çš„æ¨¡æ‹Ÿå€¼A/Dè½¬æ¢åçš„æ•°å­—å€¼# é€šè¿‡GPIOè¯»å–æ•°å­—ä¿¡å·# è®¾ç½®ä½¿ç”¨çš„å¼•è„šç¼–ç æ¨¡å¼GPIO.setmode(GPIO.BOARD)# æ•°å­—è¾“å‡ºå¼•è„š BCM 17P1 = 11# æ•°å­—è¾“å‡ºå¼•è„š BCM 18P2 = 12# å¼•è„šåˆå§‹åŒ–GPIO.setup(P1, GPIO.IN)GPIO.setup(P2, GPIO.IN)while True: print('--------åˆ†å‰²çº¿----------') print('ç«ç„°ä¼ æ„Ÿå™¨æ•°å­—ä¿¡å·ï¼š', GPIO.input(P1)) data1 = readFire() print('ç«ç„°ä¼ æ„Ÿå™¨æ¨¡æ‹Ÿä¿¡å·ï¼š', data1) print('çƒŸé›¾ä¼ æ„Ÿå™¨æ•°å­—ä¿¡å·ï¼š', GPIO.input(P2)) data2 = readSmoke() print('çƒŸé›¾ä¼ æ„Ÿå™¨æ¨¡æ‹Ÿä¿¡å·ï¼š', data2) time.sleep(2) ä¸“æ³¨æŠ€æœ¯ï¼Œæ‡‚çš„çƒ­çˆ±ï¼Œæ„¿æ„åˆ†äº«ï¼Œåšä¸ªæœ‹å‹ QQï¼š316045346","categories":[{"name":"Linux","slug":"Linux","permalink":"http://huishao.cc/categories/Linux/"}],"tags":[],"keywords":[{"name":"Linux","slug":"Linux","permalink":"http://huishao.cc/categories/Linux/"}]},{"title":"ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ20ï¼‰â€”â€”å™ªå£°ç›‘æµ‹","slug":"435ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ20ï¼‰â€”â€”å™ªå£°ç›‘æµ‹","date":"2021-11-15T16:00:00.000Z","updated":"2021-11-16T14:13:24.784Z","comments":true,"path":"2021/11/16/435ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ20ï¼‰â€”â€”å™ªå£°ç›‘æµ‹/","link":"","permalink":"http://huishao.cc/2021/11/16/435ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ20ï¼‰â€”â€”å™ªå£°ç›‘æµ‹/","excerpt":"","text":"ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ20ï¼‰â€”â€”å™ªå£°ç›‘æµ‹å™ªå£°æ±¡æŸ“æ˜¯éå¸¸ä»¤äººè®¨åŒçš„ä¸€ä»¶äº‹ï¼Œé•¿æ—¶é—´æš´éœ²åœ¨å™ªå£°ä¸­ï¼Œä¸ä»…ä¼šä½¿äººå¿ƒçƒ¦æ„ä¹±ï¼Œç”šè‡³è¿˜ä¼šå½±å“æˆ‘ä»¬çš„èº«å¿ƒå¥åº·ã€‚æœ¬èŠ‚ï¼Œå€ŸåŠ©å£°éŸ³ä¼ æ„Ÿå™¨ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å‘ä¸€ä¸ªå°å‹çš„å™ªå£°ç›‘æµ‹å·¥å…·ï¼Œå½“ç¯å¢ƒå™ªéŸ³è¿‡å¤§æ—¶ï¼Œå‘å‡ºæé†’ã€‚ ä¸€.å£°éŸ³ä¼ æ„Ÿå™¨å£°éŸ³ä¼ æ„Ÿå™¨æ¨¡å—æ˜¯ä¸€ç§å°†å£°æ³¢è½¬æ¢æˆç”µä¿¡å·çš„å…ƒä»¶ã€‚ä½¿ç”¨å®ƒå¯ä»¥æ–¹ä¾¿çš„è·å–ç¯å¢ƒä¸­çš„å£°éŸ³å¼ºåº¦ã€‚æœ¬æ¬¡å®éªŒï¼Œæˆ‘ä»¬ä½¿ç”¨çš„å£°éŸ³ä¼ æ„Ÿå™¨æ¨¡å—å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¦‚å›¾æ‰€ç¤ºï¼Œæ­¤ä¼ æ„Ÿå™¨æ¨¡å—æœ‰4ä¸ªå¯¹å¤–å¼•è„šï¼Œå…¶ä¸­AOå¼•è„šæ˜¯æ¨¡æ‹Ÿå¼•å·è¾“å‡ºå¼•è„šï¼ŒDOå¼•è„šæ˜¯æ•°å­—å¼•å·è¾“å‡ºå¼•è„šã€‚Gå¼•è„šç”¨æ¥æ¥åœ°ï¼Œ+å¼•è„šæ¥5Vç”µæºã€‚ æ­¤ä¼ æ„Ÿå™¨æ¨¡å—ä¸Šè¿˜æœ‰ä¸¤ä¸ªLEDæŒ‡ç¤ºç¯ï¼ŒLED1æ˜¯ç”µæºæŒ‡ç¤ºç¯ï¼Œåªè¦ä¼ æ„Ÿå™¨çš„æ­£è´Ÿææ­£å¸¸è¿é€šï¼Œæ­¤æŒ‡ç¤ºç¯å°±ä¼šäº®ã€‚LED2æ˜¯å£°éŸ³æ£€æµ‹æŒ‡ç¤ºç¯ï¼Œç¯å¢ƒå£°éŸ³å¼ºåº¦æ²¡æœ‰è¶…è¿‡ä¸€å®šå€¼æ—¶ï¼Œæ­¤æŒ‡ç¤ºç¯ä¼šç†„ç­ï¼Œç¯å¢ƒå£°éŸ³å¼ºåº¦è¶…è¿‡äº†ä¸€å®šæ•°å€¼åï¼Œæ­¤æŒ‡ç¤ºç¯ä¼šäº®ã€‚å…·ä½“çš„é˜ˆå€¼å¯ä»¥é€šè¿‡è°ƒèŠ‚å›¾ä¸­è“è‰²éƒ¨åˆ†çš„å¯å˜ç”µé˜»æ¥è¿›è¡Œè°ƒæ•´ã€‚ æœ¬æ¬¡å®éªŒæˆ‘ä»¬ä½¿ç”¨çš„å£°éŸ³ä¼ æ„Ÿå™¨æ¨¡å—æ—¢å¯ä»¥è¾“å‡ºæ•°å­—ä¿¡å·ä¹Ÿå¯ä»¥è¾“å‡ºæ¨¡æ‹Ÿä¿¡å·ï¼Œå¯¹äºæ•°å­—ä¿¡å·ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å°†å…¶æ¥æ ‘è“æ´¾çš„GPIOæ¥è¿›è¡Œæ¥æ”¶ï¼Œç”±äºæ ‘è“æ´¾æ²¡æœ‰å†…ç½®æ•°æ¨¡è½¬æ¢æ¨¡å—ï¼Œå› æ­¤å¯¹äºæ¨¡æ‹Ÿä¿¡å·ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨PCF8591æ•°æ¨¡è½¬æ¢æ¨¡å—æ¥è¯»å–æ¨¡æ‹Ÿä¿¡å·ã€‚ äºŒ. å®éªŒé¦–å…ˆå…ˆç¡®è®¤ä¸‹æˆ‘ä»¬è¦ä½¿ç”¨çš„å¼•è„šï¼Œå£°éŸ³ä¼ æ„Ÿå™¨çš„æ•°å­—ä¿¡å·å¼•è„šå¯ä»¥ç›´æ¥è¿æ¥æ ‘è“æ´¾çš„GPIO17(BCMç¼–ç )ï¼Œæ¨¡æ‹Ÿå¼•å·å¼•è„šè¿æ¥PCF8591çš„AINOã€‚å¦‚ä¸‹è¡¨ï¼š PCF8591ä¸æ ‘è“æ´¾ï¼š PCF8591 æ ‘è“æ´¾ SCL SCL SDA SDA GND GND VCC +5V å£°éŸ³ä¼ æ„Ÿå™¨æ¨¡å—ä¸æ ‘è“æ´¾ï¼š å£°éŸ³ä¼ æ„Ÿå™¨ æ ‘è“æ´¾ G GND + +5V DO GPIO17(BCMç¼–ç ï¼Œå¯¹åº”ç‰©ç†ç¼–ç 11) å£°éŸ³ä¼ æ„Ÿå™¨ä¸PCF8591ï¼š å£°éŸ³ä¼ æ„Ÿå™¨ PCF8591 AO AIN0 ç¼–å†™ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334#SMBus (System Management Bus,ç³»ç»Ÿç®¡ç†æ€»çº¿) import smbus #åœ¨ç¨‹åºä¸­å¯¼å…¥â€œsmbusâ€æ¨¡å—import RPi.GPIO as GPIO import timebus = smbus.SMBus(1) #åˆ›å»ºä¸€ä¸ªsmbuså®ä¾‹# é€šè¿‡PCF8591è¯»å–æ¨¡æ‹Ÿä¿¡å·# å£°éŸ³å¼ºåº¦çš„æ¨¡æ‹Ÿæ•°æ®def readData(): #å‘é€ä¸€ä¸ªæ§åˆ¶å­—èŠ‚åˆ°è®¾å¤‡ è¡¨ç¤ºè¦è¯»å–AIN0é€šé“çš„æ•°æ® bus.write_byte(0x48,0x40) bus.read_byte(0x48) # ç©ºè¯»ä¸€æ¬¡ï¼Œæ¶ˆè´¹æ‰æ— æ•ˆæ•°æ® return bus.read_byte(0x48) # è¿”å›æŸé€šé“è¾“å…¥çš„æ¨¡æ‹Ÿå€¼A/Dè½¬æ¢åçš„æ•°å­—å€¼# é€šè¿‡GPIOè¯»å–æ•°å­—ä¿¡å·# è®¾ç½®ä½¿ç”¨çš„å¼•è„šç¼–ç æ¨¡å¼GPIO.setmode(GPIO.BOARD)# æ•°å­—è¾“å‡ºå¼•è„š BCM 17P = 11# å¼•è„šåˆå§‹åŒ–GPIO.setup(P, GPIO.IN)while True: print('--------åˆ†å‰²çº¿----------') print('ç¯å¢ƒå£°éŸ³å¼ºåº¦æ•°å­—ä¿¡å·ï¼š', GPIO.input(P)) data = readData() print('ç¯å¢ƒå£°éŸ³å¼ºåº¦æ¨¡æ‹Ÿä¿¡å·ï¼š', readData()) if data &lt; 130: printï¼ˆ\"å™ªå£°è¿‡å¤§ï¼Œè¯·æ³¨æ„ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼\"ï¼‰ time.sleep(2) ä¸Šé¢ä»£ç ä¸­è®¾ç½®æ¨¡æ‹Ÿä¿¡å·å°äº130åˆ™è¡¨ç¤ºç¯å¢ƒå£°éŸ³è¿‡å¼ºï¼Œéœ€è¦æ³¨æ„ï¼Œå¦‚æœä½ è¿è¡Œä¸Šé¢çš„ç¨‹åºå‘ç°æ•°å€¼ä¸€ç›´å¾ˆå°ï¼Œå¯èƒ½æ˜¯çµæ•åº¦è®¾ç½®è¿‡é«˜æ‰€è‡´ï¼Œå¯ä»¥è°ƒèŠ‚å¯å˜ç”µé˜»æ¥å¾—åˆ°åˆé€‚çš„çµæ•åº¦ã€‚ ä»£ç è¿è¡Œæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š æœ¬æ¬¡å®éªŒå¹¶æ²¡æœ‰ç‰¹åˆ«æ–°é¢–çš„åœ°æ–¹ï¼Œæ‰€ä½¿ç”¨åˆ°çš„æŠ€æœ¯æœ¬ç³»åˆ—ä¹‹å‰åšå®¢ä¸­éƒ½æœ‰è¯¦ç»†çš„ä»‹ç»ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œæ‡‚çš„çƒ­çˆ±ï¼Œæ„¿æ„åˆ†äº«ï¼Œåšä¸ªæœ‹å‹","categories":[{"name":"Linux","slug":"Linux","permalink":"http://huishao.cc/categories/Linux/"}],"tags":[],"keywords":[{"name":"Linux","slug":"Linux","permalink":"http://huishao.cc/categories/Linux/"}]},{"title":"ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ19ï¼‰â€”â€”çº¢å¤–é¥æ§æ§åˆ¶å®éªŒ","slug":"434ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ19ï¼‰â€”â€”çº¢å¤–é¥æ§æ§åˆ¶å®éªŒ","date":"2021-11-14T16:00:00.000Z","updated":"2021-11-15T16:30:48.268Z","comments":true,"path":"2021/11/15/434ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ19ï¼‰â€”â€”çº¢å¤–é¥æ§æ§åˆ¶å®éªŒ/","link":"","permalink":"http://huishao.cc/2021/11/15/434ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ19ï¼‰â€”â€”çº¢å¤–é¥æ§æ§åˆ¶å®éªŒ/","excerpt":"","text":"ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ19ï¼‰â€”â€”çº¢å¤–é¥æ§æ§åˆ¶å®éªŒçº¢å¤–é¥æ§æ˜¯ç”Ÿæ´»ä¸­éå¸¸å¸¸è§çš„ç”µå­å™¨å…·ï¼Œç”µè§†æœºï¼Œç©ºè°ƒï¼ŒéŸ³å“ç­‰ç”µå™¨éƒ½å¯ä»¥é€šè¿‡é¥æ§å™¨è¿›è¡Œæ§åˆ¶ã€‚æœ¬ç¯‡åšå®¢ï¼Œæˆ‘ä»¬å°è¯•æ¥é€šè¿‡çº¢å¤–å‘ç”Ÿå™¨å’Œçº¢å¤–ä¿¡å·æ¥å—å™¨æ¥è¿›è¡Œçº¢å¤–æ§åˆ¶å®éªŒï¼Œåœ¨æ ‘è“æ´¾ä¸Šé€šè¿‡çº¢å¤–é¥æ§çš„æŒ‰é”®æ¥å¤„ç†LEDç¯çš„æ§åˆ¶ã€‚ ä¸€. å®éªŒå‰çš„å‡†å¤‡æœ¬æ¬¡å®éªŒï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ªçº¢å¤–é¥æ§å™¨æ¥LEDç¯ï¼Œéœ€è¦å‡†å¤‡çš„å…ƒä»¶æœ‰ï¼šçº¢å¤–é¥æ§å™¨ï¼Œçº¢å¤–æ”¶æ¥å™¨å’Œä¸€ä¸ªåŒè‰²LEDç¯ã€‚åˆ†åˆ«å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š çº¢å¤–é¥æ§åªè¦å®‰è£…äº†ç”µæ± ï¼Œä¹‹åæˆ‘ä»¬ç‚¹å‡»ä»»æ„æŒ‰é”®çš„æ—¶å€™å°±ä¼šè§¦å‘çº¢å¤–ä¿¡å·ï¼Œçº¢å¤–æ”¶æ¥æ¨¡å—å¯ä»¥æ”¶æ¥æ­¤çº¢å¤–ä¿¡å·ï¼ŒåŒè‰²LEDæˆ‘ä»¬å·²ç»ååˆ†ç†Ÿæ‚‰äº†ï¼Œåé¢åªéœ€æ ¹æ®çº¢å¤–ä¿¡å·æ¥æ§åˆ¶LEDçš„äº®ç­å³å¯ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬å¯ä»¥å…ˆå°†çº¢å¤–æ”¶æ¥ä¼ æ„Ÿå™¨è¿æ¥åˆ°æ ‘è“æ´¾ï¼Œæ–¹ä¾¿æˆ‘ä»¬æµ‹è¯•çº¢å¤–çº¿çš„æ”¶æ¥åŠŸèƒ½ï¼Œè¿çº¿å¦‚ä¸‹ï¼š æ ‘è“æ´¾ çº¢å¤–æ”¶æ¥å™¨ 5V VCC GND GND GPIO27(BCMç¼–ç ) DO æ¥ç€ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ ‘è“æ´¾ä¸Šå®‰è£…çº¢å¤–é©±åŠ¨åº“lircå’ŒPython-lircï¼Œåœ¨æ ‘è“æ´¾ç»ˆç«¯æ‰§è¡Œå¦‚ä¸‹æŒ‡ä»¤ï¼š 1234567sudo apt updatesudo apt install lircsudo apt-get install liblircclient-devsudo apt-get install python3-lirc ä¹‹åï¼Œéœ€è¦å¯¹çº¢å¤–æ¥å£IOè¿›è¡Œé…ç½®ï¼Œåœ¨æ ‘è“æ´¾ç»ˆç«¯æ‰§è¡Œï¼š 1sudo nano /boot/config.txt nanoæ˜¯Linuxç³»ç»Ÿä¸‹çš„ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œæ‰“å¼€æ­¤é…ç½®æ–‡ä»¶åï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°ä¸‹é¢ä¸¤è¡Œé…ç½®é¡¹ï¼š 123# Uncomment this to enable the lirc-rpi module#dtoverlay=lirc-rpi,gpio_out_pin=17,gpio_in_pin=18,gpio_in_pull=up å°†ç¬¬äºŒè¡Œçš„æ³¨é‡Šå»æ‰ï¼Œå¹¶ä¿®æ”¹å¦‚ä¸‹ï¼š 1dtoverlay=lirc-rpi,gpio_in_pin=27,gpio_in_pull=up éœ€è¦æ³¨æ„ï¼Œè¿™é‡Œæˆ‘ä»¬é‡‡ç”¨äº†æ ‘è“æ´¾çš„GPIO27å¼•è„š(BCMç¼–ç )ä½œä¸ºçº¢å¤–ä¿¡å·çš„æ”¶æ¥å¼•è„šï¼Œå¹¶é»˜è®¤è®¾ç½®ä¸ºä¸Šæ‹‰ç”µé˜»ã€‚æœ¬å®éªŒä¸­ï¼Œæˆ‘ä»¬ä¸éœ€å‘å‡ºçº¢å¤–ä¿¡å·ï¼Œå› æ­¤çº¢å¤–ä¿¡å·çš„è¾“å‡ºå¼•è„šå¯ä»¥ä¸ç”¨é…ç½®ã€‚ä¿®æ”¹å®Œæˆåï¼Œä½¿ç”¨Control + xæ¥é€€å‡ºç¼–è¾‘å™¨ï¼Œé€€å‡ºæ—¶ä¼šè¯¢é—®æ˜¯å¦ä¿å­˜ä¿®æ”¹ï¼ŒæŒ‰Yé”®ä¿å­˜å³å¯ã€‚ ä¸‹é¢ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å¯¹lircçš„ç¡¬ä»¶æ¥å£è¿›è¡Œé…ç½®ï¼Œåœ¨æ ‘è“æ´¾ç»ˆç«¯ä½¿ç”¨å¦‚ä¸‹æŒ‡ä»¤æ‰“å¼€é…ç½®æ–‡ä»¶ï¼š 1sudo nano /etc/lirc/lirc_options.conf åœ¨é…ç½®æ–‡ä»¶ä¸­æ‰¾åˆ°å¦‚ä¸‹ä¸¤è¡Œï¼š 123driver = devinputdevice = auto ä¿®æ”¹å¦‚ä¸‹ï¼š 123driver = defaultdevice = /dev/lirc0 ä¹‹åï¼Œé‡å¯æ ‘è“æ´¾ï¼Œæˆ‘ä»¬å°±å¯ä»¥æµ‹è¯•çº¢å¤–æ”¶æ¥åŠŸèƒ½äº†ã€‚ äºŒ.çº¢å¤–ä¿¡å·çš„æ”¶æ¥æ ‘è“æ´¾é‡å¯å®Œæˆåï¼Œåœ¨ç»ˆç«¯è¾“å…¥å¦‚ä¸‹æŒ‡ä»¤æ¥æµ‹è¯•çº¢å¤–ä¿¡å·ï¼š 1mode2 -d /dev/lirc0 éœ€è¦æ³¨æ„ï¼Œå¦‚æœæç¤ºæ— æ³•åˆå§‹åŒ–lirc0ï¼Œåˆ™éœ€è¦å…ˆåœæ­¢æœåŠ¡ååœ¨æ‰§è¡Œä¸Šé¢çš„æŒ‡ä»¤ï¼Œä½¿ç”¨å¦‚ä¸‹æŒ‡ä»¤æ¥åœæ­¢æœåŠ¡ï¼š 1sudo service lircd stop å¦‚æœæˆåŠŸè¿›å…¥æµ‹è¯•æ¨¡å¼ï¼Œä½ å¯ä»¥å°è¯•ä½¿ç”¨çº¢å¤–é¥æ§å™¨å¯¹è¿™æ ‘è“æ´¾æŒ‰ä¸‹ä¸€äº›æŒ‰é”®ï¼Œç»ˆç«¯ä¸Šå‡ºç°å¦‚ä¸‹å›¾æ‰€ç¤ºçš„è¾“å‡ºï¼Œåˆ™è¡¨æ˜å·²ç»å¯ä»¥æˆåŠŸæ”¶æ¥åˆ°çº¢å¤–ä¿¡å·ã€‚ ä»…ä»…èƒ½å¤Ÿæ”¶æ¥åˆ°ä¿¡å·å¯¹æˆ‘ä»¬æ¥è¯´æ˜¯ä¸å¤Ÿçš„ï¼Œè¿™äº›ä¿¡å·æˆ‘ä»¬å¹¶ä¸èƒ½å‹å¥½çš„è¿›è¡Œè¯†åˆ«ï¼Œè¦å°†è¿™äº›ä¿¡å·è¯†åˆ«ä¸ºæœ‰æ„ä¹‰çš„æŒ‰é”®ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¿¡å·è¿›è¡Œç¼–ç ã€‚é¦–å…ˆï¼Œåœ¨ç»ˆç«¯æ‰§è¡Œä¸‹é¢æŒ‡ä»¤æ¥æŸ¥çœ‹æ‰€æœ‰å¯ç”¨çš„ç¼–ç ï¼š 1irrecord -l ç»ˆç«¯å°†è¾“å‡ºå¦‚ä¸‹ä¿¡æ¯ï¼š å¯ç”¨çš„ç¼–ç éå¸¸å¤šï¼Œæœ¬æ¬¡å®éªŒæˆ‘ä»¬å¯ä»¥é€‰3ä¸ªæ¥ä½¿ç”¨ï¼Œä¾‹å¦‚æˆ‘ä»¬é€‰æ‹©KEY_0ï¼ŒKEY_1å’ŒKEY_2è¿™ä¸‰ä¸ªç¼–ç æ¥ç»‘å®šåˆ°æˆ‘ä»¬çš„é¥æ§å™¨å¯¹åº”çš„0ï¼Œ1å’Œ2æŒ‰é”®ä¸Šã€‚ ä¸‹é¢æˆ‘ä»¬æ¥è¿›è¡Œç¼–ç çš„çƒ§å½•ï¼Œåœ¨ç»ˆç«¯æ‰§è¡Œå¦‚ä¸‹æŒ‡ä»¤ï¼š 1irrecord -d /dev/lirc0 ~/lircd.conf ä¹‹åç»ˆç«¯ä¼šè¾“å‡ºå¾ˆå¤šæè¿°æ–‡æ¡ˆï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¦‚æœä½ æœ‰å…´è¶£ï¼Œå¯ä»¥é˜…è¯»ä¸‹è¿™äº›ä»‹ç»æ–‡æ¡ˆï¼Œç„¶åç›´æ¥å›è½¦å³å¯ã€‚ å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡è¿›è¡Œç¼–ç çš„çƒ§å½•ï¼Œç»ˆç«¯ä¼šæç¤ºâ€œEnter name of remote(only ascii, no spaces)â€çš„æ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºçƒ§å½•æ–‡ä»¶å–ä¸€ä¸ªåå­—ï¼Œéœ€è¦æ³¨æ„åå­—åªèƒ½æœ‰asciiå­—ç¬¦ä¸”ä¸èƒ½æœ‰ç©ºæ ¼ã€‚è¾“å…¥å®Œæˆåå­—åå›è½¦ï¼Œç»ˆç«¯ä¼šè¾“å‡ºâ€œPress RETURN now to start recording.â€çš„æç¤ºï¼Œæˆ‘ä»¬å†æ¬¡æŒ‰å›è½¦ï¼Œå³å¯è¿›å…¥çƒ§å½•é˜¶æ®µã€‚ çƒ§å½•çš„è¿‡ç¨‹æœ‰äº›ç¹çï¼Œåˆšå¼€å§‹éœ€è¦åˆ†æå‡ºé¥æ§çš„æŒ‰é”®é—´éš”ï¼Œæˆ‘ä»¬å¯ä»¥éšä¾¿æŒ‰é¥æ§ä¸Šçš„æŒ‰é”®ï¼Œæ¯æ¬¡æŒ‰é”®ç»ˆç«¯ä¼šè¾“å‡ºä¸€ä¸ªâ€œ.â€ï¼Œæ³¨æ„ä¸€å®šè¦æœ‰è€å¿ƒï¼Œä¸€ä¸‹ä¸€ä¸‹çš„æŒ‰ï¼Œä¸è¦æŒ‰ä½ä¸æ¾ã€‚æŒ‰æ»¡ä¸€è¡Œåï¼Œç»ˆç«¯ä¼šæç¤ºâ€œPlease keep on pressing btns like described aboveâ€ï¼Œç»§ç»­ä¹‹å‰çš„æ“ä½œå³å¯ï¼Œç›´åˆ°ç»ˆç«¯å‡ºç°â€œPlease enter the name for the next btn(press to finish recording)â€ï¼Œå³è¡¨ç¤ºæŒ‰é”®é—´éš”æ—¶é—´å·²ç»åˆ†æå®Œæˆï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹æ­£å¼å½•åˆ¶ã€‚è¿™æ—¶å¼€å§‹è¾“å…¥æˆ‘ä»¬éœ€è¦å½•åˆ¶çš„é”®ï¼Œæ¯”å¦‚KEY_0ï¼Œä¹‹åç»ˆç«¯æç¤ºå¦‚ä¸‹ï¼š è¿™æ—¶æˆ‘ä»¬ç‚¹æŒ‰é¥æ§å™¨ä¸Šçš„â€œ0â€é”®å³å¯ï¼Œä¹‹åæŒ‰ç…§ç›¸åŒçš„æ–¹å¼å†å½•åˆ¶KEY_1å’ŒKEY_2ã€‚å…¨éƒ¨å½•åˆ¶å®Œæˆåï¼Œå†æŒ‰å›è½¦å³å¯ã€‚ä¸»è¦ç‰¹åˆ«æ³¨æ„ï¼Œè¿™æ—¶ç»ˆç«¯ä¼šæç¤ºè¦è¿›è¡Œä¿å­˜éªŒè¯ï¼Œåº”å°½å¿«æŒ‰ä½é¥æ§å™¨ä¸Šä»»æ„ä¸€ä¸ªæŒ‰é”®ä¸æ¾ï¼Œç›´åˆ°ç»ˆç«¯æç¤ºå½•åˆ¶æˆåŠŸï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å½•åˆ¶å®Œæˆåï¼Œä¼šåœ¨å½“å‰æ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆ*.lircd.confçš„å½•åˆ¶æ–‡ä»¶ï¼Œå°†å…¶æ‹·è´åˆ°/etc/lirc/lircd.conf.dæ–‡ä»¶å¤¹ä¸‹ï¼Œå¦‚ä¸‹ï¼š 1sudo cp 0_1_2.lircd.conf /etc/lirc/lircd.conf.d/0_1_2.lircd.conf è¿˜æœ‰ä¸€ä¸ªç»†èŠ‚éœ€è¦æ³¨æ„ï¼Œåœ¨/etc/lirc/lircd.conf.dæ–‡ä»¶å¤¹ä¸‹é»˜è®¤å­˜åœ¨ä¸€ä¸ªåä¸ºdevinput.lircd.confçš„æ–‡ä»¶ï¼Œé»˜è®¤ä¼šè¯»å–è¿™ä¸ªæ–‡ä»¶çš„é…ç½®ï¼Œå°†å…¶æ”¹åä¸ºdevinput.lircd.distå³å¯ã€‚è¿›å…¥/etc/lirc/lircd.conf.dæ–‡ä»¶å¤¹åï¼Œæ‰§è¡Œå¦‚ä¸‹æŒ‡ä»¤å³å¯ï¼š 1sudo mv devinput.lircd.conf devinput.lircd.dist ä½ ä¹Ÿå¯ä»¥æ‰“å¼€å½•åˆ¶çš„*.lircd.confæ–‡ä»¶çœ‹ä¸€ä¸‹ï¼Œå¦‚æœæ¯ä¸ªå½•åˆ¶çš„é”®åé¢æœ‰ä¸¤ä¸²åå…­è¿›åˆ¶æ•°ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š åˆ™ä½ éœ€è¦å°†åä¸€ä¸²ä¸€æ ·çš„åå…­è¿›åˆ¶æ•°åˆ é™¤ï¼Œå¦åˆ™æ— æ³•æ­£å¸¸ä½¿ç”¨ï¼Œåˆ é™¤åçš„æ–‡ä»¶å¦‚ä¸‹ï¼š ç°åœ¨ï¼Œä¸å‡ºæ„å¤–çš„è¯ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥æ­£å¸¸å¤„ç†è¿™3ä¸ªæŒ‰é”®ä¿¡å·äº†ï¼Œåœ¨ç»ˆç«¯è¾“å…¥å¦‚ä¸‹æŒ‡ä»¤å¼€å¯å®ˆæŠ¤è¿›ç¨‹ï¼š 123sudo service lircd restart lircd --nodaemon --device /dev/lirc0 --driver default å¦å¤–å¼€ä¸€ä¸ªç»ˆç«¯ï¼Œè¾“å…¥å¦‚ä¸‹æŒ‡ä»¤æ¥æµ‹è¯•é¥æ§æŒ‰é”®ï¼š 1sudo irw æ­¤æ—¶ï¼ŒæŒ‰é¥æ§å™¨ä¸Šçš„0ï¼Œ1å’Œ2æŒ‰é”®ï¼Œç»ˆç«¯å·²ç»å¯ä»¥æ­£å¸¸çš„å“åº”äº†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¸‰.åœ¨Pythonä¸­ä½¿ç”¨lircé©±åŠ¨åº“ä½ è¿˜è®°å¾—æˆ‘ä»¬ä¹‹å‰çš„å®‰è£…çš„python3-lircåº“å§ï¼Œä¸‹é¢æ˜¯è¯¥ç”¨åˆ°å®ƒçš„æ—¶å€™äº†ï¼Œé¦–å…ˆåˆ›å»ºä¸€ä¸ªPythonæ–‡ä»¶ï¼Œæˆ‘ä»¬æš‚ä¸”å‘½åä¸º19.infrared.pyï¼Œåœ¨æ ‘è“æ´¾ç»ˆç«¯å°†/etc/lirc/irexec.lircrcæ–‡ä»¶æ”¹åä¸ºlircrcï¼Œéœ€è¦æ³¨æ„ï¼Œå°±æ˜¯lircrcæ–‡ä»¶ï¼Œæ²¡æœ‰åç¼€åã€‚ä¸‹é¢æˆ‘ä»¬éœ€è¦æ ¹æ®éœ€æ±‚è¿›è¡Œä¸€äº›é…ç½®ï¼Œæ‰“å¼€æ­¤æ–‡ä»¶ï¼Œåœ¨å…¶ä¸­é…ç½®Pythonç¨‹åºè¦å¤„ç†çš„çº¢å¤–æŒ‰é”®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¦‚å›¾ä¸­æ‰€ç¤ºï¼Œé€šè¿‡beginå’Œendç»„çš„æ–¹å¼æ¥é…ç½®è¦å¤„ç†çš„ä¿¡å·ï¼Œå…¶ä¸­progéœ€è¦é…ç½®ä¸ºè¦å¤„ç†æ­¤ä¿¡å·çš„Pythonç¨‹åºï¼Œè¿™é‡Œå¡«æˆ‘ä»¬çš„ç¨‹åºæ–‡ä»¶åå³å¯ï¼Œbuttonç”¨æ¥è®¾ç½®è¦å¤„ç†çš„æŒ‰é”®ï¼Œconfigç”¨æ¥é…ç½®ä¼ é€’åˆ°Pythonç¨‹åºä¸­çš„æ•°æ®ã€‚æ›´å¤šé…ç½®æ–¹å¼å¯ä»¥é€šè¿‡å¦‚ä¸‹é“¾æ¥å¾—åˆ°ï¼š https://github.com/tompreston/python-lirc é…ç½®å®Œæˆåï¼Œä¿®æ”¹19.infrared.pyæ–‡ä»¶å¦‚ä¸‹ï¼Œå¯ä»¥è¿›è¡Œç®€å•çš„æµ‹è¯•ï¼š 1234567891011# å¯¼å…¥lircåº“import lirc# è¿›è¡Œåˆå§‹åŒ– è¿™é‡Œè®¾ç½®blockingä¸ºFalseä¼šé¿å…é˜»å¡ï¼Œä¸æ¥æ”¶çš„ä¿¡å·ç›´æ¥æŠ›å¼ƒsockid = lirc.init(\"19.infrared.py\", blocking=False)while True: #è·å–æŒ‰é”®ä¿¡æ¯ btn = lirc.nextcode() if len(btn): print(btn)lirc.deinit() è¿è¡Œä¸Šé¢ä»£ç ï¼Œåœ¨çº¢å¤–é¥æ§å™¨ä¸ŠæŒ‰0ï¼Œ1æˆ–è€…2ï¼Œå¯ä»¥çœ‹åˆ°ç¨‹åºä¼šæ‰“å°å‡ºä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­å­˜æ”¾çš„å°±æ˜¯æˆ‘ä»¬çš„æŒ‰é”®å€¼ã€‚ ç°åœ¨ï¼ŒåŸç†ä¸Šè¯´ï¼Œä½ å·²ç»å¯ä»¥ä½¿ç”¨çº¢å¤–é¥æ§å’Œçº¢å¤–æ”¶æ¥å™¨åšéå¸¸å¤šçš„äº‹æƒ…äº†ï¼Œä½ å¯ä»¥å°†æ‰€æœ‰éœ€è¦ä½¿ç”¨çš„æŒ‰é’®éƒ½å½•å…¥ï¼Œç„¶ååªåšä¸€ä¸ªå¸¦LCDå±å¹•çš„è®¡ç®—å™¨ï¼Œæˆ–è€…é€šè¿‡é¥æ§å™¨æ§åˆ¶ç”µç¯å¼€å…³ï¼Œæ¸©åº¦æ°”å‹è®¡çš„æ•°æ®ä¸Šä¼ ç­‰ç­‰ã€‚æˆ‘ä»¬æœ¬æ¬¡å®éªŒä½¿ç”¨åŒè‰²LEDä½œä¸ºç¤ºä¾‹ï¼ŒæŠ›ç –å¼•ç‰ï¼Œå¸Œæœ›ä½ èƒ½å‘æŒ¥æ›´å¤šåˆ›é€ åŠ›ã€‚ åŒè‰²LEDæœ‰3ä¸ªå¼•è„šï¼Œå…³äºåŒè‰²LEDç¯çš„å®éªŒåœ¨æœ¬ç³»åˆ—å¾ˆæ—©çš„ä¸€ç¯‡åšå®¢ä¸­å³æœ‰ä»‹ç»ï¼Œå¦‚æœä½ æ„Ÿè§‰é™Œç”Ÿï¼Œå¯ä»¥å¾€å‰ç¿»ä¸€ç¿»ï¼Œè¿™é‡Œæˆ‘ä»¬ç›´æ¥è¿çº¿ï¼š åŒè‰²LED æ ‘è“æ´¾ GND GND S GPIO17ï¼ˆBCMç¼–ç ï¼Œå¯¹åº”ç‰©ç†ç¼–ç 11ï¼‰ - GPIO18ï¼ˆBCMç¼–ç ï¼Œå¯¹åº”ç‰©ç†ç¼–ç 12ï¼‰ ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142#coding:utd-8# å¯¼å…¥lirc å’Œ GPIOåº“import lircimport RPi.GPIO as GPIO# åˆå§‹åŒ–lircsockid = lirc.init(\"19.infrared.py\", blocking=False)#åˆå§‹åŒ–GPIOGPIO.setmode(GPIO.BOARD)GPIO.setup(11, GPIO.OUT)GPIO.setup(12, GPIO.OUT)# ç­ç¯def clear(): GPIO.output(11, GPIO.LOW) GPIO.output(12, GPIO.LOW)# è®¾ç½®çº¢ç¯äº®def red(): GPIO.output(11, GPIO.HIGH) GPIO.output(12, GPIO.LOW)# è®¾ç½®ç»¿ç¯äº®def green(): GPIO.output(11, GPIO.LOW) GPIO.output(12, GPIO.HIGH)clear()# ç›‘å¬çº¢å¤–ä¿¡å·while True: btn = lirc.nextcode() if len(btn): command = btn[0] if command == '0': clear() if command == '1': red() if command == '2': green()lirc.deinit() è¿è¡Œä»£ç ï¼Œå°è¯•ä¸‹ä½¿ç”¨çº¢å¤–é¥æ§å™¨æ¥æ§åˆ¶ç¯çš„é¢œè‰²å’Œå¼€å…³å§ï¼ å››. ä¼‘æ¯ä¸€ä¸‹å§æœ¬ç³»åˆ—åšå®¢åˆ°æ­¤ï¼Œæˆ‘ä»¬å·²ç»ä»‹ç»äº†å¾ˆå¤šä¸°å¯Œå¤šå½©çš„ä¼ æ„Ÿå™¨ï¼Œä½ æ˜¯å¦æœ‰æƒ³è¿‡ç»„åˆä½¿ç”¨è¿™äº›ä¼ æ„Ÿå™¨æ¥åˆ›é€ å‡ºä¸€äº›å¥½ç©çš„ä¸œè¥¿ï¼Œç°åœ¨ä½ åˆå…·å¤‡äº†ä½¿ç”¨çº¢å¤–é¥æ§è¿œç¨‹æ§åˆ¶ç¨‹åºçš„èƒ½åŠ›ï¼Œå°è¯•å°†ä½ çš„æƒ³æ³•å®ç°ä¸€ä¸‹å§ï¼ ä¸“æ³¨æŠ€æœ¯ï¼Œæ‡‚çš„çƒ­çˆ±ï¼Œæ„¿æ„åˆ†äº«ï¼Œåšä¸ªæœ‹å‹ QQï¼š316045346","categories":[{"name":"Linux","slug":"Linux","permalink":"http://huishao.cc/categories/Linux/"}],"tags":[],"keywords":[{"name":"Linux","slug":"Linux","permalink":"http://huishao.cc/categories/Linux/"}]},{"title":"è‡ªä¸Šè€Œä¸‹çš„ç†è§£ç½‘ç»œï¼ˆ2ï¼‰â€”â€”HTTPç¯‡","slug":"433è‡ªä¸Šè€Œä¸‹çš„ç†è§£ç½‘ç»œï¼ˆ2ï¼‰â€”â€”HTTPç¯‡","date":"2021-11-09T16:00:00.000Z","updated":"2021-11-13T08:03:26.600Z","comments":true,"path":"2021/11/10/433è‡ªä¸Šè€Œä¸‹çš„ç†è§£ç½‘ç»œï¼ˆ2ï¼‰â€”â€”HTTPç¯‡/","link":"","permalink":"http://huishao.cc/2021/11/10/433è‡ªä¸Šè€Œä¸‹çš„ç†è§£ç½‘ç»œï¼ˆ2ï¼‰â€”â€”HTTPç¯‡/","excerpt":"","text":"è‡ªä¸Šè€Œä¸‹çš„ç†è§£ç½‘ç»œï¼ˆ2ï¼‰â€”â€”HTTPç¯‡ä¸€.å¼•è¨€ä¸Šä¸€ç¯‡åšå®¢ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†è®¿é—®ç½‘ç«™çš„ç¬¬ä¸€æ­¥ï¼šDNSè§£æçš„ç›¸å…³å†…å®¹ã€‚åœ°å€å¦‚ä¸‹ï¼š https://my.oschina.net/u/2340880/blog/5272671 æœ¬ç³»åˆ—åšå®¢çš„å®—æ—¨æ˜¯ã€è‡ªä¸Šè€Œä¸‹çš„ç†è§£ç½‘ç»œã€‘ï¼Œå› æ­¤æˆ‘ä»¬è¿˜æ˜¯è¦ä¸€æ­¥ä¸€æ­¥çš„ä»å‰å‘åè¯´ï¼Œå¦‚æœä½ å·²ç»é˜…è¯»è¿‡äº†DNSé‚£ç¯‡åšå®¢ï¼Œé‚£ä¹ˆç°åœ¨ï¼Œä½ è®¿é—®ç½‘ç«™ä½¿ç”¨çš„åŸŸåå·²ç»è½¬æ¢æˆäº†IPåœ°å€ï¼Œæœ‰äº†IPåœ°å€ï¼Œå°±ç›¸å½“ä¸æœ‰äº†å¯¹æ–¹çš„åœ°å€ï¼ˆæˆ‘ä»¬å§‘ä¸”å…ˆè¿™ä¹ˆç†è§£ï¼‰ï¼Œä»OSIç½‘ç»œæ¨¡å‹çš„è®¾è®¡æ€è·¯ä¸Šè¯´ï¼Œä¸Šå±‚æ— éœ€å…³æ³¨ä¸‹å±‚çš„å®ç°ï¼Œç›®å‰æˆ‘ä»¬å…ˆä¸å…³æ³¨æ‹¿åˆ°IPåœ°å€åæ˜¯å¦‚ä½•æ‰¾åˆ°å¯¹åº”çš„ä¸»æœºçš„ï¼Œæš‚ä¸”è®¤ä¸ºç›®å‰æˆ‘ä»¬å·²ç»å¯ä»¥æ‰¾åˆ°æœåŠ¡å™¨å¹¶ä¸ä¹‹é€šä¿¡äº†ã€‚ é‚£ä¹ˆå½“ä¸‹ï¼Œæœ€ç´§è¦çš„é—®é¢˜æ˜¯æˆ‘ä»¬åº”è¯¥æ€æ ·ä¸å¯¹æ–¹äº¤æµï¼Œæˆ‘å‘é€çš„æ•°æ®å¦‚ä½•èƒ½è®©å¯¹æ–¹ç†è§£ï¼Ÿå¯¹æ–¹ä¼ è¾“è¿‡æ¥çš„æ•°æ®æˆ‘ä»¬åˆå¦‚ä½•ç†è§£ï¼Ÿè¿™å°±å¥½æ¯”ï¼Œä¸¤ä¸ªäººè¦è¿›è¡Œäº¤æµï¼Œä»–ä»¬å¿…é¡»ä½¿ç”¨ç›¸åŒçš„è¯­è¨€ï¼Œå¦åˆ™å°±ä¼šé©´å”‡ä¸å¯¹é©¬å˜´ï¼ŒåŒæ–¹è°éƒ½æ— æ³•ç†è§£è°ã€‚è¿™é‡Œæ‰€æ¯”å–»çš„â€œè¯­è¨€â€å°±æ˜¯äº’è”ç½‘ä¸­çš„åè®®ï¼Œæˆ‘ä»¬è®¿é—®ä¸€ä¸ªç½‘ç«™ï¼Œä¸€èˆ¬ä½¿ç”¨çš„éƒ½æ˜¯HTTPåè®®ã€‚ äºŒ.é‡æ–°è®¤è¯†ä¸‹HTTPå§HTTPï¼ˆHyper Text Transfer Protocolï¼‰æ˜¯ä¸€ç§åº”ç”¨å±‚çš„åè®®ï¼Œå…¶è®¾è®¡çš„ç»“æ„éå¸¸é¢å‘åº”ç”¨ã€‚å¯¹äºå¤§å¤šæ•°äº’è”ç½‘åº”ç”¨æ¥è¯´ï¼Œéƒ½æ˜¯ç”±ä¸€ä¸ªæœåŠ¡å™¨æä¾›æœåŠ¡ï¼Œè®¸å¤šçš„å®¢æˆ·æœºæ¥è¯·æ±‚æœåŠ¡ï¼Œä»»ä½•äº’è”ç½‘æœåŠ¡æœ¬è´¨ä¸Šéƒ½æ˜¯æ•°æ®äº¤äº’ï¼Œå³å®¢æˆ·ç«¯å‘Šè¯‰æœåŠ¡ç«¯æˆ‘è¦ä»€ä¹ˆæ•°æ®ï¼ŒæœåŠ¡ç«¯å°†å¯¹åº”çš„æ•°æ®è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œæˆ–è€…å®¢æˆ·ç«¯å°†ä¸€äº›æ•°æ®ä¼ é€ç»™æœåŠ¡ç«¯å¤„ç†ï¼Œæˆ–è€…å®¢æˆ·ç«¯å‘Šè¯‰æœåŠ¡ç«¯æˆ‘è¦ä¿®æ”¹ä»€ä¹ˆæ•°æ®ï¼Œåˆ é™¤ä»€ä¹ˆæ•°æ®ç­‰ç­‰ã€‚åœ¨HTTPåè®®ä¸­ï¼Œè¯·æ±‚çš„å‘èµ·æ–¹å¿…å®šæ˜¯å®¢æˆ·ç«¯ï¼ŒæœåŠ¡ç«¯è¢«åŠ¨çš„æ”¶åˆ°è¯·æ±‚åæ ¹æ®é€»è¾‘åšå“åº”ã€‚å› æ­¤ï¼ŒHTTPåè®®äº¤äº’çš„æ•°æ®å®é™…ä¸Šåˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯Requestæ•°æ®ï¼Œä¸€ç§æ˜¯Responseæ•°æ®ï¼Œæ— è®ºæ˜¯å“ªç§æ•°æ®ï¼Œæˆ‘ä»¬éƒ½å°†å…¶ç§°ä¸ºHTTPæŠ¥æ–‡ã€‚ ç°åœ¨ï¼Œä½ å¯ä»¥å°è¯•æ‰“å¼€æµè§ˆå™¨çš„è°ƒè¯•æ¨¡å¼ï¼Œéšä¾¿è®¿é—®ä¸€ä¸ªç½‘é¡µï¼Œåœ¨ç½‘ç»œç›‘æ§éƒ¨åˆ†å¯ä»¥çœ‹åˆ°HTTPè¯·æ±‚çš„ç›¸å…³å†…å®¹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¤§è‡´é¢„è§ˆä¸‹ï¼Œå¯ä»¥å‘ç°HTTPè¯·æ±‚è¿˜æœ‰æœ‰äº›å¤æ‚çš„ï¼Œè¯·æ±‚å¤´ï¼Œå“åº”å¤´ï¼Œè¯·æ±‚ä½“ï¼Œå“åº”ä½“ä¸­éƒ½åŒ…å«å¾ˆå¤šæ•°æ®ã€‚é€šå¸¸ï¼Œè¶Šé¢å‘åº”ç”¨å±‚çš„ä¸Šå±‚åè®®å®ç°ç®€å•è€Œé€»è¾‘å¤æ‚ï¼Œè¶Šåº•å±‚çš„åè®®åè€Œé€»è¾‘ç®€å•è€Œå®ç°å¤æ‚ã€‚HTTPåè®®åªæ˜¯çœ‹ä¸Šå»æ•°æ®å­—æ®µå¾ˆå¤šï¼Œå…¶åŸç†å…¶å®å¾ˆç®€å•ã€‚ HTTPæŠ¥æ–‡æœ‰ä¸¤å¤§éƒ¨åˆ†ç»„æˆï¼Œåˆ†åˆ«ä¸ºæŠ¥æ–‡é¦–éƒ¨å’ŒæŠ¥æ–‡ä¸»ä½“ï¼ŒæŠ¥æ–‡é¦–éƒ¨å’ŒæŠ¥æ–‡ä¸»ä½“ä¹‹é—´ä½¿ç”¨ç©ºè¡Œæ¥åˆ†å‰²ã€‚å³åœ¨æŠ¥æ–‡æ•°æ®ä¸­ï¼Œç¬¬ä¸€ä¸ªç©ºè¡Œå³æ˜¯æ ‡è®°é¦–éƒ¨å’Œä¸»ä½“çš„åˆ†å‰²çº¿ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å…¶ä¸­ï¼Œç©ºè¡Œæ˜¯æœ‰å›è½¦ç¬¦ï¼ˆ0x0dï¼‰åŠ æ¢è¡Œç¬¦ï¼ˆ0x0aï¼‰ç»„æˆï¼Œå³åå…­è¿›åˆ¶çš„0x0d0aã€‚åé¢æˆ‘ä»¬åœ¨è‡ªå·±ç¼–å†™HTTPè¯·æ±‚æ•°æ®çš„ç»„è£…æˆ–è§£ææ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨è¿ç»­çš„ä¸¤ä¸ª0x0d0aæ¥ä½œä¸ºé¦–éƒ¨å’Œä¸»ä½“çš„åˆ†å‰²ä½ã€‚æŠ¥æ–‡é¦–éƒ¨åˆåˆ†ä¸ºè¯·æ±‚/çŠ¶æ€è¡Œå’Œè¯·æ±‚/å“åº”é¦–éƒ¨å­—æ®µã€‚ 1. è¯·æ±‚è¡Œä¸çŠ¶æ€è¡Œå¯¹äºè¯·æ±‚æŠ¥æ–‡ï¼Œé¦–éƒ¨çš„ç¬¬ä¸€è¡Œæ•°æ®ä¸ºè¯·æ±‚è¡Œï¼Œå…¶æ ¼å¼å¦‚ä¸‹ï¼š è¯·æ±‚æ–¹æ³• URI HTTPç‰ˆæœ¬ä¿¡æ¯ è¯·æ±‚æ–¹æ³•ï¼ŒURIå’ŒHTTPç‰ˆæœ¬ä¿¡æ¯ä¹‹é—´ä½¿ç”¨ç©ºæ ¼è¿›è¡Œåˆ†å‰²ï¼ˆ0x20ï¼‰ã€‚ å¯¹äºå“åº”æŠ¥æ–‡ï¼Œé¦–éƒ¨çš„ç¬¬ä¸€è¡Œæ•°æ®ä¸ºçŠ¶æ€è¡Œï¼Œå…¶æ ¼å¼å¦‚ä¸‹ï¼š HTTPç‰ˆæœ¬ä¿¡æ¯ çŠ¶æ€ç åŠçŠ¶æ€æ–‡æ¡ˆ è¯·æ±‚æ–¹æ³•ç”¨æ¥ä¸å‘ŠçŸ¥æœåŠ¡ç«¯å®¢æˆ·ç«¯çš„æ„å›¾ï¼Œä¾‹å¦‚æ˜¯è¦è·å–æ•°æ®è¿˜æ˜¯ä¸Šä¼ æ•°æ®ï¼Œæ˜¯åˆ é™¤æ–‡ä»¶è¿˜æ˜¯ä¿®æ”¹æ–‡ä»¶ç­‰ã€‚è€ŒçŠ¶æ€ç åˆ™æ˜¯æœåŠ¡å™¨è¿”å›ç»™å®¢æˆ·ç«¯å½“å‰å“åº”çš„çŠ¶æ€ï¼Œæ˜¯æˆåŠŸäº†è¿˜æ˜¯å¤±è´¥äº†ç­‰ã€‚ 2. è¯·æ±‚æ–¹æ³•è¯·æ±‚æ–¹æ³•è¡¨æ˜äº†å®¢æˆ·ç«¯è¦ä»¥ä»€ä¹ˆæ ·çš„æ–¹å¼æ¥ä¸æœåŠ¡ç«¯è¿›è¡Œæ•°æ®äº¤äº’ï¼Œå¸¸ç”¨çš„è¯·æ±‚æ–¹æ³•æœ‰8ç§ï¼Œåˆ—ä¸¾å¦‚ä¸‹ï¼š æ–¹æ³• æ„ä¹‰ GET è·å–èµ„æº POST å‘é€æ•°æ® PUT ä¼ è¾“æ–‡ä»¶ HEAD è·å¾—æŠ¥æ–‡é¦–éƒ¨ DELETE åˆ é™¤æ–‡ä»¶ OPTIONS è¯¢é—®æ”¯æŒçš„æ–¹æ³• TRACE è¿½è¸ªè·¯å¾„ CONNECT è¦æ±‚ç”¨éš§é“åè®®è¿æ¥ä»£ç† æ–¹æ³•çš„æœ¬è´¨å…¶å®åªæ˜¯å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯çº¦å®šå¥½çš„æ•°æ®äº¤äº’æ„å›¾ï¼Œå…¶æœ¬èº«å¹¶ä¸ä¼šå½±å“ä¼ è¾“æ•°æ®æœ¬èº«ï¼Œè¿™å°±å¥½æ¯”ï¼Œç”Ÿæ´»ä¸­æˆ‘ä»¬å„ç§å„æ ·çš„è½¦è¾†ï¼Œå…¬äº¤æ±½è½¦ï¼Œå‡ºç§Ÿè½¦ï¼Œå°è´§è½¦ï¼Œä¸åŒç±»å‹çš„è½¦è¾†æœ‰ä¸åŒçš„åŠŸèƒ½ï¼Œä½†æ˜¯æœ¬è´¨ä¸Šï¼Œä»–ä»¬å¹¶æ²¡æœ‰åŒºåˆ«ï¼Œå…¬äº¤æ±½è½¦ä¹Ÿå¯ä»¥æ‹‰è´§ï¼Œå°è´§è½¦ä¹Ÿå¯ä»¥ä½œä¸ºå‡ºç§Ÿè½¦æ¥è½½äººã€‚é‚£ä¹ˆä½ å¯èƒ½å›æƒ³ï¼Œæˆ‘ä»¬å¯ä¸å¯ä»¥å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯çº¦å®šå¥½ä¸€ç§è‡ªå®šä¹‰çš„è¯·æ±‚æ–¹æ³•è¿›è¡Œäº¤äº’å‘¢ï¼Œå½“ç„¶å¯ä»¥ï¼Œåé¢æˆ‘ä»¬ä¼šåŠ¨æ‰‹å®è·µã€‚ 3. çŠ¶æ€ç çŠ¶æ€ç è´Ÿè´£å°†æœåŠ¡ç«¯è¯·æ±‚çš„ç»“æœå‘ŠçŸ¥å®¢æˆ·ç«¯ï¼Œå¹¶ä¸ä¸€å®šå®¢æˆ·ç«¯æ‰€æœ‰çš„è¯·æ±‚æœåŠ¡ç«¯éƒ½èƒ½æ­£ç¡®å¤„ç†ï¼Œé€šå¸¸2XXç±»å‹çš„çŠ¶æ€ç è¡¨ç¤ºå¤„ç†æˆåŠŸï¼Œ200è¡¨ç¤ºè¯·æ±‚è¢«æ­£å¸¸å¤„ç†ã€‚204è¡¨ç¤ºè¯·æ±‚æˆåŠŸå¤„ç†äº†ï¼Œä½†æ˜¯æ²¡æœ‰æ•°æ®éœ€è¦è¿”å›ã€‚206è¡¨ç¤ºå®¢æˆ·ç«¯è¿›è¡Œäº†èŒƒå›´è¯·æ±‚ï¼ŒæœåŠ¡ç«¯æˆåŠŸå¤„ç†äº†ã€‚3XXç±»å‹çš„çŠ¶æ€ç é€šå¸¸è¡¨ç¤ºä¸é‡å®šå‘æœ‰å…³ï¼Œèµ„æºç§»åŠ¨äº†ä½ç½®æˆ–å‘ç”Ÿçš„å˜åŒ–ï¼ŒæœåŠ¡ç«¯ä¼šè¿”å›æ­¤ç±»å‹çš„çŠ¶æ€ç ã€‚4XXç±»çš„é€šå¸¸æ˜¯å®¢æˆ·ç«¯çš„åŸå› é€ æˆçš„å¼‚å¸¸ï¼Œä¾‹å¦‚ä½¿ç”¨äº†ä¸æ”¯æŒçš„è¯·æ±‚æ–¹æ³•ï¼Œè¦è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨ç­‰ï¼Œæˆ‘ç›¸ä¿¡ï¼Œ404æ˜¯æˆ‘ä»¬æœ€å¸¸è§çš„ä¸€ç§å¼‚å¸¸çŠ¶æ€ï¼Œå½“ä½ è¯·æ±‚çš„URLæˆ–è€…å‚æ•°æœ‰é—®é¢˜æ—¶ä¼šè¿”å›è¿™ä¸ªçŠ¶æ€ç ã€‚5XXç±»å‹çš„çŠ¶æ€ç é€šå¸¸æ˜¯æœåŠ¡å™¨é”™è¯¯ã€‚ å½“ç„¶ï¼ŒçŠ¶æ€ç çš„æ„ä¹‰ä¹Ÿæ˜¯æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çº¦å®šè€Œæˆçš„ï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬çš„åº”ç”¨é€»è¾‘å¯èƒ½éœ€è¦æ›´å¤šçš„çŠ¶æ€ç æ¥æè¿°ï¼Œå®Œå…¨å¯ä»¥è‡ªå®šä¹‰ã€‚ 4. é¦–éƒ¨å­—æ®µé¦–éƒ¨å­—æ®µä¸»è¦ç”¨æ¥å­˜æ”¾æ§åˆ¶å­—æ®µï¼Œä¾‹å¦‚ä½¿ç”¨ä»€ä¹ˆæ–¹æ³•è¿›è¡Œè¯·æ±‚ï¼Œä½¿ç”¨çš„HTTPåè®®ç‰ˆæœ¬ï¼Œå‘èµ·è¯·æ±‚çš„å®¢æˆ·ç«¯ä¿¡æ¯ç­‰ã€‚ä»¥è®¿é—®huishao.ccç½‘ç«™ä¸ºä¾‹ï¼ŒæŠ“å–åˆ°çš„HTTPè¯·æ±‚çš„é¦–éƒ¨ä¿¡æ¯å¦‚ä¸‹ï¼š å¯ä»¥çœ‹åˆ°ï¼ŒHTTPæŠ¥æ–‡é¦–éƒ¨æ¯ä¸ªå­—æ®µçš„é…ç½®æ˜¯ä»¥è¡Œä¸ºå•ä½è¿›è¡Œåˆ†å‰²çš„ï¼Œæ¯è¡Œé…ç½®ä¸€ä¸ªå­—æ®µã€‚æ ¹æ®ä¸åŒçš„ä¸Šä¸‹æ–‡é¦–éƒ¨å­—æ®µå¯ä»¥åˆ†ä¸º4ç±»ï¼šé€šç”¨ç±»ï¼Œè¯·æ±‚å¤´ç±»ï¼Œå“åº”å¤´ç±»ï¼Œå®ä½“ç±»ã€‚é€šç”¨ç±»æ˜¯æŒ‡åŒæ—¶é€‚ç”¨äºè¯·æ±‚é¦–éƒ¨å’Œå“åº”é¦–éƒ¨çš„å­—æ®µï¼Œè¯·æ±‚å¤´ç±»åªé€‚ç”¨ä¸è¯·æ±‚é¦–éƒ¨ï¼Œå“åº”å¤´ç±»åªä½¿ç”¨äºå“åº”é¦–éƒ¨ï¼Œå®ä½“ç±»æ˜¯æŒ‡åŒ…å«æŠ¥æ–‡ä¸»ä½“ä¿¡æ¯çš„å­—æ®µï¼Œå¦‚Content-Lengthè®¾ç½®ä¸»ä½“éƒ¨åˆ†é•¿åº¦ã€‚ ä¸‹è¡¨åˆ—å‡ºäº†å¸¸ç”¨çš„HTTPå®˜æ–¹çš„å‚è€ƒæ–‡æ¡£ä¸­å®šä¹‰äº†æŠ¥æ–‡é¦–éƒ¨å­—æ®µï¼š å­—æ®µ æ„ä¹‰ Accept è®¾ç½®æœŸæœ›çš„æ•°æ®ç±»å‹ï¼Œä¾‹å¦‚text/html Accept-Charset è®¾ç½®æœŸæœ›çš„æ•°æ®å­—ç¬¦é›† Accept-Encoding è®¾ç½®æœŸæœ›çš„å†…å®¹ç¼–ç ï¼Œä¾‹å¦‚gzip Accept-Language è®¾ç½®æœŸæœ›çš„é¡µé¢è¯­è¨€ Accept-Ranges å“åº”é¦–éƒ¨ä¸­çš„å­—æ®µï¼Œè¡¨ç¤ºæ˜¯å¦æ¥å—èŒƒå›´è¯·æ±‚ Age èµ„æºåˆ›å»ºè‡³ä»Šçš„æ—¶é—´ Allow èµ„æºå¯æ”¯æŒçš„HTTPæ–¹æ³• Authorization æœåŠ¡ç«¯ç”¨æ¥è®¤è¯å®¢æˆ·ç«¯èº«ä»½ Cache-Control æ§åˆ¶ç¼“å­˜è¡Œä¸º Connection ç®¡ç†è¿æ¥ Content-Encoding è®¾ç½®æŠ¥æ–‡ä¸»ä½“é€‚ç”¨çš„ç¼–ç æ–¹å¼ Content-Language è®¾ç½®æŠ¥æ–‡ä¸»ä½“é€‚ç”¨çš„è¯­è¨€ Content-Length è®¾ç½®æŠ¥æ–‡ä¸»ä½“å­—èŠ‚é•¿åº¦ Content-Location æ ‡è®°æ•°æ®çš„å¤‡ç”¨URI Content-MD5 æŠ¥æ–‡ä¸»ä½“çš„MD5æ‘˜è¦ Content-Range æŠ¥æ–‡ä¸»ä½“çš„ä½ç½®èŒƒå›´ Content-Type æŠ¥æ–‡ä¸»ä½“çš„æ•°æ®ç±»å‹ Cookie Cookieè®¾ç½® Date åˆ›å»ºæŠ¥æ–‡æ—¥æœŸæ—¶é—´ DNT è®¾ç½®æ˜¯å¦è·Ÿè¸ªç”¨æˆ·åå¥½ï¼Œå±äºéšç§æ§åˆ¶å­—æ®µ ETag è®¾ç½®æŠ¥æ–‡ä¸»ä½“èµ„æºçš„ç‰ˆæœ¬å· Expect å®¢æˆ·ç«¯ç”¨æ¥è®¾ç½®å…¶æœŸæœ›æœåŠ¡ç«¯ä½¿ç”¨ç‰¹æ€§è¡Œä¸ºå¤„ç† From ç”¨æˆ·çš„ç”µå­é‚®ç®±åœ°å€ Expires æŠ¥æ–‡ä¸»ä½“è¿‡æœŸçš„æ—¥æœŸæ—¶é—´ Host è¯·æ±‚èµ„æºçš„æœåŠ¡å™¨åœ°å€ If-Match è¿›è¡Œèµ„æºç‰ˆæœ¬æ¯”è¾ƒ If-Modified-Since è¿›è¡Œèµ„æºæ›´æ–°æ—¶é—´çš„æ¯”è¾ƒ If-None-Match ä¸If-Matché€»è¾‘ç›¸å If-Range èµ„æºæœªæ›´æ–°æ—¶å‘é€ä¸»ä½“çš„èŒƒå›´è¯·æ±‚ If-Unmodified-Since ä¸If-Modified-Sinceé€»è¾‘ç›¸å Last-Modified èµ„æºçš„æœ€åä¿®æ”¹æ—¶é—´ Location ä»¤å®¢æˆ·ç«¯é‡å®šå‘åˆ°çš„URI Max-Forwards è®¾ç½®æœ€å¤§çš„è¾“é€è·³æ•° Proxy-Authenticate å®šä¹‰äº†ä»£ç†æœåŠ¡å™¨å¯¹å®¢æˆ·ç«¯çš„è®¤è¯ä¿¡æ¯ Proxy-Authorization ä»£ç†æœåŠ¡å™¨è¦æ±‚å®¢æˆ·ç«¯çš„è®¤è¯ä¿¡æ¯ Range ä¸»ä½“çš„å­—èŠ‚è¯·æ±‚èŒƒå›´ Referer å¯¹è¯·æ±‚ä¸­URIçš„åŸå§‹è·å–æ–¹ Retry-After å¯¹å†æ¬¡å‘èµ·è¯·æ±‚çš„æ—¶æœºè¦æ±‚ Server HTTPæœåŠ¡å™¨çš„å®‰è£…ä¿¡æ¯ TE ä¼ è¾“ç¼–ç çš„ä¼˜å…ˆçº§ Transfer-Encoding æŠ¥æ–‡ä¸»ä½“çš„ä¼ è¾“ç¼–ç æ–¹å¼ User-Agent HTTPå®¢æˆ·ç«¯ç¨‹åºçš„ä¿¡æ¯ Upgrade å‡çº§ä¸ºå…¶ä»–åè®® Vary ä»£ç†æœåŠ¡å™¨ç¼“å­˜çš„ç®¡ç†ä¿¡æ¯ Via ä»£ç†æœåŠ¡å™¨çš„ç›¸å…³ä¿¡æ¯ Warning é”™è¯¯é€šçŸ¥ WWW-Authenticate æœåŠ¡ç«¯å¯¹å®¢æˆ·ç«¯çš„è®¤è¯ä¿¡æ¯ éœ€è¦æ³¨æ„ï¼Œä¸Šé¢åˆ—å‡ºçš„å­—æ®µå¾ˆå¤šï¼Œä½†ä¸ä¸€å®šæ‰€æœ‰çš„HTTPæœåŠ¡å™¨éƒ½å¯¹ä»–ä»¬è¿›è¡Œäº†å®ç°ï¼ŒHTTPæœ¬èº«åªæ˜¯ä¸€ä¸ªåè®®ï¼ŒçœŸæ­£å®ç°æ­¤åè®®çš„æ˜¯æœåŠ¡ç«¯ç¨‹åºå’Œå®¢æˆ·ç«¯ç¨‹åºã€‚åŒæ ·ï¼ŒHTTPåè®®ä¹Ÿæ˜¯ä¸€ç§å¾ˆå…·æ‰©å±•æ€§çš„åè®®ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ ¹æ®åº”ç”¨éœ€è¦ï¼Œè‡ªå®šä¹‰ä¸€äº›é¦–éƒ¨å­—æ®µï¼Œåªè¦æˆ‘ä»¬è‡ªå·±çš„å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½æŒ‰ç…§çº¦å®šå¥½çš„ç†è§£æ¥å¤„ç†è‡ªå®šä¹‰çš„å­—æ®µå³å¯ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬å¯¹ä¸€äº›é‡è¦çš„é¦–éƒ¨å­—æ®µè¿›è¡Œè§£é‡Šã€‚ 5. æ ¸å¿ƒé¦–éƒ¨å­—æ®µè§£æCache-ControlCache-Controlé¦–éƒ¨å­—æ®µç”¨æ¥æ§åˆ¶ç¼“å­˜é€»è¾‘ï¼Œåœ¨å®˜æ–¹çš„åè®®å®šä¹‰ä¸­ï¼Œæ­¤å­—æ®µå¯ä»¥è®¾ç½®å¤šä¸ªæŒ‡ä»¤ï¼ŒæŒ‡ä»¤é—´ä½¿ç”¨é€—å·åˆ†éš”å³å¯ï¼Œä¾‹å¦‚ï¼š Cache-Control: private, max-age=0, no-cache æœ‰äº›æŒ‡ä»¤è¿˜æ”¯æŒä¼ å‚ï¼Œä¾‹å¦‚max-ageæŒ‡ä»¤ã€‚æŒ‡ä»¤åŠå‚æ•°æ„ä¹‰å¦‚ä¸‹ï¼š æŒ‡ä»¤ å‚æ•° æ„ä¹‰ no-cache æ—  å¼ºåˆ¶å‘æºæœåŠ¡å™¨éªŒè¯ç¼“å­˜æœ‰æ•ˆæ€§ no-store æ—  ä¸ç¼“å­˜è¯·æ±‚æˆ–ç›¸åº”çš„ä»»ä½•å†…å®¹ max-age ç§’ å“åº”çš„æœ€å¤§Ageå€¼ max-stale ç§’ æœ€å¤§æ”¶çš„å·²è¿‡æœŸå“åº”æ—¶é—´ min-fresh ç§’ æŒ‡å®šåœ¨æœ€å°‘å¤šå°‘æ—¶é—´å†…åˆ·æ–°è¿‡çš„å“åº”æ‰æœ‰æ•ˆ only-if-cached æ—  ä»ç¼“å­˜è·å–èµ„æº public æ—  å¯å‘ä»»æ„æ–¹æä¾›å“åº”çš„ç¼“å­˜ private æ—  ä»…å‘ç‰¹å®šç”¨æˆ·è¿”å›å“åº” must-revalidate æ—  å…è®¸ç¼“å­˜ï¼Œä½†å¿…é¡»å‘æœåŠ¡ç«¯éªŒè¯æœ‰æ•ˆæ€§ Acceptå®¢æˆ·ç«¯é€šè¿‡Acceptå­—æ®µå¯ä»¥å‘ŠçŸ¥æœåŠ¡ç«¯å®ƒæ‰€éœ€è¦çš„æ•°æ®æ ¼å¼ã€‚ä¾‹å¦‚ï¼Œå½“å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯è¯·æ±‚ä¸€å¼ å›¾ç‰‡æ—¶ï¼ŒæœåŠ¡ç«¯å¯ä»¥æä¾›å„ç§ç±»å‹çš„å›¾ç‰‡æ•°æ®ï¼Œä½†æ˜¯å®¢æˆ·ç«¯åªèƒ½å¤Ÿè§£æpngç±»å‹çš„å›¾ç‰‡ï¼Œè¿™æ˜¯å°±å¯ä»¥è®¾ç½®Acceptå­—æ®µï¼Œå¦‚ä¸‹ï¼š Acceptï¼šimage/png å®¢æˆ·ç«¯å¦‚æœå¯ä»¥æ”¶å¤šç§ç±»å‹çš„æ•°æ®ï¼ŒAcceptä¹Ÿæ”¯æŒè®¾ç½®å¤šä¸ªç±»å‹ï¼Œä½¿ç”¨é€—å·è¿›è¡Œåˆ†å‰²å³å¯ï¼Œä¼˜å…ˆçº§ä¼šä»å‰å¾€åä¾æ¬¡é™ä½ã€‚åŒæ ·ï¼Œå¯¹å­—ç¬¦é›†å’Œç¼–ç æ–¹å¼å¦‚æœæœ‰è¦æ±‚ï¼Œé€šè¿‡Accept-Charsetå’ŒAccept-Encodingå­—æ®µè®¾ç½®ã€‚ AuthorizationAuthorizationæ˜¯HTTPåè®®ä¸­ç”¨æ¥è¿›è¡Œç”¨æˆ·è®¤è¯çš„å­—æ®µï¼Œæœ‰æ—¶å€™å®¢æˆ·ç«¯çš„èµ„æºå¹¶éæ‰€æœ‰ç”¨æˆ·éƒ½å¯ä»¥è®¿é—®ï¼Œå¦‚æœæœ‰ç”¨æˆ·å¯¹è¿™éƒ¨åˆ†èµ„æºå‘èµ·çš„è®¿é—®è¯·æ±‚ï¼ŒæœåŠ¡ç«¯ä¼šå›æ‰§çŠ¶æ€ç ä¸º401çš„å“åº”ï¼Œè¡¨ç¤ºéœ€è¦ç”¨æˆ·è®¤è¯æ‰èƒ½èŒƒæ–‡ï¼Œè¿™æ—¶å®¢æˆ·ç«¯å°±éœ€è¦å°†ç”¨æˆ·è®¤è¯ä¿¡æ¯æ”¾å…¥Authorizationå­—æ®µä¸­å†æ¬¡å‘èµ·è¯·æ±‚ï¼ŒæœåŠ¡ç«¯ä¼šæ ¹æ®Authorizationçš„å€¼æ¥åˆ¤æ–­å½“å‰ç”¨æˆ·æ˜¯å¦æœ‰æƒé™è®¿é—®æ­¤èµ„æºã€‚ Hoståœ¨ä»‹ç»è¿™ä¸ªå­—æ®µä¹‹å‰ï¼Œè¯·ä½ å…ˆå›å¿†ä¸‹ï¼Œæˆ‘ä»¬åœ¨è¿›è¡ŒHTTPæ•°æ®äº¤äº’æ—¶ï¼Œè¦å…ˆé€šè¿‡IPæ¥æ‰¾åˆ°å¯¹æ–¹çš„ä½ç½®ï¼Œå…¶å®ä¸€å°æœåŠ¡å™¨ä¸Šæ˜¯å¯ä»¥éƒ¨ç½²å¾ˆå¤šä¸ªæœåŠ¡çš„ï¼Œä¸åŒçš„æœåŠ¡æœ‰å¯èƒ½åœ¨ä¸åŒçš„è™šæ‹Ÿä¸»æœºä¸Šï¼Œé‚£ä¸ªæˆ‘ä»¬çš„è¿™æ¬¡è¯·æ±‚ç©¶ç«Ÿéœ€è¦é‚£ä¸ªè™šæ‹Ÿä¸»æœºæ¥å¤„ç†å‘¢ï¼Ÿè¿™å°±éœ€è¦æœ‰å­—æ®µæ¥æ ‡è¯†ç”¨æˆ·åˆ°åº•è®¿é—®çš„æ˜¯ä»€ä¹ˆèµ„æºï¼ŒHostå­—æ®µçš„ç”¨é€”å°±åœ¨å¦‚æ­¤ã€‚ ä¸‰. å®è·µå‡ºçœŸçŸ¥ç°åœ¨ï¼Œä½ æ˜¯å¦å¯¹HTTPåè®®æœ‰äº†æ–°çš„è®¤è¯†å’Œç†è§£ï¼Œæˆ‘ä»¬å¯ä»¥ä»å®é™…çš„åº”ç”¨ä¸­éªŒè¯å‰é¢æ‰€è¯´çš„ç†è®ºçŸ¥è¯†ã€‚ ä½¿ç”¨Wiresharkå·¥å…·æ¥æŠ“å–ç½‘ç»œæŠ¥æ–‡åŒ…ï¼Œæˆ‘ä»¬å¯ä»¥å°†ç­›é€‰æ¡ä»¶è®¾ç½®ä¸ºhttpåè®®ï¼Œä»¥ä¾¿è¿‡æ»¤æ‰æ— å…³çš„ç½‘ç»œä¿¡æ¯ã€‚åœ¨æµè§ˆå™¨ä¸­è®¿é—®huishao.ccç½‘ç«™ï¼Œä¸ºäº†é¿å…æµè§ˆå™¨ç¼“å­˜äº§ç”Ÿçš„å½±å“ï¼Œå¯ä»¥å…ˆå°†ç¼“å­˜æ¸…ç©ºã€‚ ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨Wiresharkå·¥å…·ä¸­çœ‹åˆ°è¿™æ ·ä¸¤æ¡è®°å½•ï¼š å…¶ä¸­ï¼Œç¬¬ä¸€æ¡è®°å½•ä¸ºHTTPçš„è¯·æ±‚è®°å½•ï¼Œç¬¬äºŒæ¡è®°å½•ä¸ºHTTPçš„å“åº”è®°å½•ã€‚ æˆ‘ä»¬å…ˆçœ‹ç¬¬ä¸€ä¸ªè¯·æ±‚è®°å½•ï¼Œå°†å…¶HTTPåè®®å±‚çš„æ•°æ®å¤åˆ¶å‡ºæ¥ï¼Œå¦‚ä¸‹ï¼š 1234567891011121314151617181920212247 45 54 20 2f 20 48 54 54 50 2f 31 2e 31 0d 0a48 6f 73 74 3a 20 68 75 69 73 68 61 6f 2e 63 630d 0a 55 70 67 72 61 64 65 2d 49 6e 73 65 63 7572 65 2d 52 65 71 75 65 73 74 73 3a 20 31 0d 0a41 63 63 65 70 74 3a 20 74 65 78 74 2f 68 74 6d6c 2c 61 70 70 6c 69 63 61 74 69 6f 6e 2f 78 6874 6d 6c 2b 78 6d 6c 2c 61 70 70 6c 69 63 61 7469 6f 6e 2f 78 6d 6c 3b 71 3d 30 2e 39 2c 2a 2f2a 3b 71 3d 30 2e 38 0d 0a 55 73 65 72 2d 41 6765 6e 74 3a 20 4d 6f 7a 69 6c 6c 61 2f 35 2e 3020 28 4d 61 63 69 6e 74 6f 73 68 3b 20 49 6e 7465 6c 20 4d 61 63 20 4f 53 20 58 20 31 30 5f 3135 5f 37 29 20 41 70 70 6c 65 57 65 62 4b 69 742f 36 30 35 2e 31 2e 31 35 20 28 4b 48 54 4d 4c2c 20 6c 69 6b 65 20 47 65 63 6b 6f 29 20 56 6572 73 69 6f 6e 2f 31 34 2e 31 2e 31 20 53 61 6661 72 69 2f 36 30 35 2e 31 2e 31 35 0d 0a 41 6363 65 70 74 2d 4c 61 6e 67 75 61 67 65 3a 20 7a68 2d 63 6e 0d 0a 41 63 63 65 70 74 2d 45 6e 636f 64 69 6e 67 3a 20 67 7a 69 70 2c 20 64 65 666c 61 74 65 0d 0a 43 6f 6e 6e 65 63 74 69 6f 6e3a 20 6b 65 65 70 2d 61 6c 69 76 65 0d 0a 0d 0a æŒ‰ç…§æˆ‘ä»¬å‰é¢çš„åˆ†æï¼ŒHTTPåè®®è¯·æ±‚æŠ¥æ–‡ä¸­çš„ç¬¬ä¸€è¡Œæ•°æ®ä¸ºè¯·æ±‚è¡Œï¼Œæˆ‘ä»¬æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ¢è¡Œç¬¦0d 0aä¸ºæ­¢ï¼Œæˆªå‡ºæ•°æ®å¦‚ä¸‹ï¼š 147 45 54 20 2f 20 48 54 54 50 2f 31 2e 31 0x20ä½ç©ºæ ¼å­—ç¬¦ï¼Œç”¨å…¶ä½œä¸ºåˆ†å‰²æˆªå‡ºä¸‰éƒ¨åˆ†æ•°æ®ä¸ºï¼š 12347 45 542f 48 54 54 50 2f 31 2e 31 åœ¨Asciiç ä¸­ï¼Œ0x47ä¸ºâ€œGâ€ï¼Œ0x45ä¸ºâ€œEâ€ï¼Œ0x54ä¸ºâ€œTâ€ï¼Œ0x2fä¸ºâ€œ/â€ï¼Œ0x48ä¸ºâ€œHâ€ï¼Œ0x50ä¸ºâ€œPâ€ï¼Œ0x31ä¸ºâ€œ1â€ï¼Œ0x2eä¸ºâ€œ.â€ã€‚ç¿»è¯‘å®Œæˆå³ä¸ºï¼š GET / HTTP/1.1 æŒ‰ç…§åŒæ ·çš„æ–¹æ³•ï¼Œä»¥0d 0aä¸ºåˆ†éš”ç¬¦å¯ä»¥å°†è¯·æ±‚å¤´ä¸­çš„æ¯ä¸€ä¸ªé¦–éƒ¨å­—æ®µè§£æå‡ºæ¥ï¼Œå› ä¸ºæˆ‘ä»¬æœ¬æ¬¡è¯·æ±‚æ²¡æœ‰è¯·æ±‚ä½“æ•°æ®ï¼Œå› æ­¤æ‰¾åˆ°ä¸¤ä¸ªè¿ç»­çš„0d 0aåå³è¡¨ç¤ºé¦–éƒ¨è§£æå®Œæˆã€‚ å“åº”æŠ¥æ–‡çš„è§£ææ–¹æ³•ä¸è¯·æ±‚æŠ¥æ–‡æ²¡ä»€ä¹ˆä¸åŒï¼Œè¿™é‡Œæˆ‘ä»¬ä¸å†èµ˜è¿°ï¼Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œå“åº”æŠ¥æ–‡çš„é¦–éƒ¨å­—æ®µæ€»æœ‰Content-Lengthå­—æ®µè¡¨æ˜äº†å“åº”ä¸»ä½“æ•°æ®çš„é•¿åº¦ã€‚ å››. å°è¯•ä¸‹åŸºäºTCPæ¥å®ç°ä¸€ä¸ªHTTPæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯å§åœ¨ä¸Šä¸€ç¯‡åšå®¢ä¸­ï¼Œæˆ‘ä»¬äº†è§£äº†DNSåè®®çš„åŸç†åï¼ŒåŸºäºTCPæ‰‹åŠ¨å®ç°äº†ä¸€ä¸ªç®€å•çš„DNSè§£æå™¨ï¼ŒDNSå’ŒHTTPéƒ½å±äºåº”ç”¨å±‚çš„åè®®ï¼ŒTCPåˆ™å±äºä¼ è¾“å±‚çš„åè®®ã€‚ç°åœ¨æˆ‘ä»¬ç†è§£äº†HTTPçš„åè®®åŸç†ï¼Œèƒ½å¦æ‰‹åŠ¨å®ç°ä¸€ä¸ªç®€æ˜“çš„HTTPæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯å‘¢ï¼Ÿå½“ç„¶æ˜¯å¯ä»¥çš„ã€‚ 1. ç®€æ˜“HTTPæœåŠ¡ç«¯å¯ä»¥å‚è€ƒå‰é¢æ‰‹åŠ¨å®ç°DNSçš„åšå®¢ä¸­TCPåè®®çš„ç”¨æ³•ï¼Œç¼–å†™ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394#include &lt;stdio.h&gt;#include &lt;ctype.h&gt;#include &lt;sys/types.h&gt;#include &lt;netinet/in.h&gt;#include &lt;sys/socket.h&gt;#include &lt;unistd.h&gt;#include &lt;stdlib.h&gt;#include &lt;string.h&gt;#include &lt;sys/stat.h&gt; #define QUEUE_MAX_COUNT 5 #define SERVER_STRING \"Server: custom HTTP server\\r\\n\" int main()&#123; // æœåŠ¡ç«¯æè¿°ç¬¦ int server_fd = -1; // å®¢æˆ·ç«¯æè¿°ç¬¦ int client_fd = -1; // å®šä¹‰ç«¯å£å· u_short port = 9001; // å®¢æˆ·ç«¯åœ°å€ struct sockaddr_in client_addr; // æœåŠ¡ç«¯åœ°å€ struct sockaddr_in server_addr; socklen_t client_addr_len = sizeof(client_addr); char buf[1024]; char recv_buf[1024]; int hello_len = 0; int on = 1; // åˆ›å»ºä¸€ä¸ªsocket server_fd = socket(AF_INET, SOCK_STREAM, 0); // è®¾ç½®åœ°å€å¤ç”¨ int ret = setsockopt(server_fd, SOL_SOCKET, SO_REUSEADDR, &amp;on, sizeof(on)); memset(&amp;server_addr, 0, sizeof(server_addr)); // è®¾ç½®ç«¯å£ï¼ŒIPï¼Œå’ŒTCP/IPåè®®æ— server_addr.sin_family = AF_INET; server_addr.sin_port = htons(9001); server_addr.sin_addr.s_addr = htonl(INADDR_ANY); // ç»‘å®šå¥—æ¥å­—åˆ°ç«¯å£ bind(server_fd, (struct sockaddr *)&amp;server_addr,sizeof(server_addr)); // å¯åŠ¨socketç›‘å¬è¯·æ±‚ï¼Œå¼€å§‹ç­‰å¾…å®¢æˆ·ç«¯å‘æ¥çš„è¯·æ±‚ listen(server_fd, QUEUE_MAX_COUNT); printf(\"http server running on port %d\\n\", port); // å¾ªç¯ç­‰å¾…å®¢æˆ·ç«¯è¯·æ±‚ while (1) &#123; // è°ƒç”¨äº†acceptå‡½æ•°ï¼Œé˜»å¡äº†ç¨‹åºï¼Œç›´åˆ°æ”¶åˆ°å®¢æˆ·ç«¯çš„è¯·æ±‚ client_fd = accept(server_fd, (struct sockaddr *)&amp;client_addr, &amp;client_addr_len); printf(\"client socket fd: %d\\n\", client_fd); // è°ƒç”¨recvå‡½æ•°æ”¶å®¢æˆ·ç«¯å‘æ¥çš„è¯·æ±‚ä¿¡æ¯ hello_len = recv(client_fd, recv_buf, 1024, 0); printf(\"receive %d\\n\\n\", hello_len); printf(\"%s\\n\", recv_buf); // ä¸ç®¡å®¢æˆ·ç«¯å‘è¿‡æ¥çš„è¯·æ±‚æ˜¯å•¥ï¼Œæˆ‘ä»¬éƒ½è¿”å›åŒæ ·çš„æµ‹è¯•æ•°æ® // æ·»åŠ å“åº”å¤´ sprintf(buf, \"HTTP/1.0 200 OK\\r\\n\"); send(client_fd, buf, strlen(buf), 0); // æ·»åŠ æœåŠ¡ç«¯ä¿¡æ¯ strcpy(buf, SERVER_STRING); send(client_fd, buf, strlen(buf), 0); // æ·»åŠ ä¸»é¢˜ç±»å‹ sprintf(buf, \"Content-Type: text/html\\r\\n\"); send(client_fd, buf, strlen(buf), 0); // æ·»åŠ è‡ªå®šä¹‰å¤´éƒ¨æ•°æ® sprintf(buf, \"Custom: custom\\r\\n\"); send(client_fd, buf, strlen(buf), 0); // ç»“æŸé¦–éƒ¨å­—æ®µçš„æ·»åŠ  strcpy(buf, \"\\r\\n\"); send(client_fd, buf, strlen(buf), 0); // æ·»åŠ ä¸»ä½“æ•°æ® sprintf(buf, \"HelloWorld!\\r\\n\"); send(client_fd, buf, strlen(buf), 0); /* å…³é—­å®¢æˆ·ç«¯å¥—æ¥å­— */ close(client_fd); &#125; close(server_fd); return 0;&#125; ä¸Šé¢ä»£ç ä¸­æœ‰æ¯”è¾ƒè¯¦ç»†çš„æ³¨é‡Šï¼Œä¸€ä¸ªHTTPè¯·æ±‚ç»“æŸåï¼Œå½“å‰å®¢æˆ·ç«¯çš„Socketè¿æ¥å°±ä¼šè¢«å…³é—­ã€‚ä¸Šé¢åªæ˜¯ç®€å•å®ç°äº†åŸºäºHTTPåè®®çš„æ•°æ®äº¤äº’ï¼Œå¹¶æ²¡æœ‰çœŸæ­£å®ç°åº”ç”¨é€»è¾‘ï¼Œæ— è®ºå®¢æˆ·ç«¯å‘ä»€ä¹ˆæ ·çš„è¯·æ±‚è¿‡æ¥ï¼ŒæœåŠ¡ç«¯éƒ½å°†è¿”å›åŒæ ·çš„æ•°æ®ã€‚ä¸‹é¢ï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥http://localhost:9001/ï¼Œæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 2. ç®€æ˜“çš„HTTPå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯å®ç°ä»£ç ç±»ä¼¼ï¼Œç®€æ˜“å®¢æˆ·ç«¯ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051#include &lt;stdlib.h&gt;#include &lt;stdio.h&gt;#include &lt;string.h&gt;#include &lt;sys/socket.h&gt;#include &lt;netdb.h&gt;#include &lt;arpa/inet.h&gt;#include &lt;errno.h&gt;#include &lt;sys/time.h&gt;#include &lt;sys/types.h&gt;#include &lt;unistd.h&gt;void socket_init(int *sockfd,char *host);int main(int argc,char **argv)&#123; char message[512]; int socket_desc; char *host = \"127.0.0.1\"; socket_init(&amp;socket_desc,host); // æ„å»ºè¦å‘é€çš„æ¶ˆæ¯ CUSTOMä¸ºè‡ªå®šä¹‰çš„åè®® sprintf(message,\"CUSTOM / HTTP/1.1\\r\\nHost: Service.com\\r\\n\\r\\n\"); // å‘é€æ•°æ®åˆ°æœåŠ¡ç«¯ send(socket_desc,message,strlen(message),0); struct timeval timeout = &#123;3, 0&#125;; // è®¾ç½®Sorket setsockopt(socket_desc, SOL_SOCKET, SO_RCVTIMEO, (char *)&amp;timeout, sizeof(struct timeval)); char chunk[512]; fd_set fdset; // é‡è®¾å­—ç¬¦é›† FD_ZERO(&amp;fdset); FD_SET(socket_desc,&amp;fdset); // æ”¶æœåŠ¡ç«¯æ•°æ® select(socket_desc+1,&amp;fdset,NULL,NULL,NULL); if(FD_ISSET(socket_desc,&amp;fdset)) &#123; memset(chunk , 0 , 512); recv(socket_desc, chunk, 512, 0); printf(\"%s\" , chunk); &#125; return 0;&#125;void socket_init(int *sockfd,char *ip)&#123; struct sockaddr_in server; *sockfd = socket(AF_INET,SOCK_STREAM,0); server.sin_addr.s_addr = inet_addr(ip); server.sin_family = AF_INET; server.sin_port = htons(9001); connect((*sockfd),(struct sockaddr *)&amp;server,sizeof(server));&#125; å¯ä»¥çœ‹åˆ°ï¼Œä¸Šé¢ä»£ç ä¸­æˆ‘ä»¬ç”¨äº†è‡ªå®šä¹‰çš„è¯·æ±‚æ–¹æ³•CUSTOMï¼Œå¯åŠ¨æœåŠ¡ç«¯ååœ¨è¿è¡Œå®¢æˆ·ç«¯ï¼ŒæœåŠ¡ç«¯åº”ç”¨ä¼šæ‰“å°å‡ºå¦‚ä¸‹ä¿¡æ¯ï¼š 12CUSTOM / HTTP/1.1Host: Service.com åŒæ ·ï¼Œå®¢æˆ·ç«¯çš„ç¨‹åºä¼šæ‰“å°å‡ºå¦‚ä¸‹ä¿¡æ¯ï¼š 123456HTTP/1.0 200 OKServer: custom HTTP serverContent-Type: text/htmlCustom: customHelloWorld! äº”. ç»“å°¾ä¸Šé¢æˆ‘ä»¬æä¾›äº†æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çš„ç®€æ˜“å®ç°ä»£ç ï¼Œæˆ‘ç›¸ä¿¡ä½ å¯¹HTTPåè®®çš„åŸç†æœ‰äº†è‡ªå·±æ–°çš„ç†è§£ï¼Œä½ å¯ä»¥å°è¯•ä¸‹ï¼Œå®Œå–„ä¸‹ä¸Šé¢çš„ä»£ç ï¼ŒçœŸæ­£å®ç°ä¸‹HTTPåè®®ä¸­çš„GETï¼ŒPOSTç­‰æ–¹æ³•ã€‚ç°åœ¨ï¼Œå›åˆ°æˆ‘ä»¬æœ¬ç³»åˆ—åšå®¢çš„æ ¸å¿ƒï¼šè‡ªä¸Šè€Œä¸‹çš„ç†è§£ç½‘ç»œã€‚æˆ‘ä»¬ç°åœ¨å·²ç»æ˜ç™½äº†åŸŸåæ˜¯å¦‚ä½•è½¬æ¢æˆIPåœ°å€ï¼Œè·å¾—äº†IPåœ°å€åï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯åˆæ˜¯å¦‚ä½•äº’ç›¸æ— éšœç¢çš„é€šè®¯çš„ã€‚åé¢ï¼Œæˆ‘ä»¬å°†å†è¿›ä¸€æ­¥ï¼Œè¿›å…¥ä¼ è¾“å±‚çš„é¢†åŸŸï¼Œä¸ç§¯è·¬æ­¥ï¼Œæ— ä»¥è‡³åƒé‡Œï¼Œä¸å›å…±å‹‰ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQï¼š316045346","categories":[{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"http://huishao.cc/categories/è®¡ç®—æœºç½‘ç»œ/"}],"tags":[],"keywords":[{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"http://huishao.cc/categories/è®¡ç®—æœºç½‘ç»œ/"}]},{"title":"ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ18ï¼‰â€”â€”MPU6050é™€èºä»ªåŠ é€Ÿåº¦ä¼ æ„Ÿå™¨æ¨¡å—åº”ç”¨","slug":"432ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ18ï¼‰â€”â€”MPU6050èºæ—‹ä»ªåŠ é€Ÿåº¦ä¼ æ„Ÿå™¨æ¨¡å—åº”ç”¨","date":"2021-10-24T16:00:00.000Z","updated":"2021-10-26T14:35:21.345Z","comments":true,"path":"2021/10/25/432ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ18ï¼‰â€”â€”MPU6050èºæ—‹ä»ªåŠ é€Ÿåº¦ä¼ æ„Ÿå™¨æ¨¡å—åº”ç”¨/","link":"","permalink":"http://huishao.cc/2021/10/25/432ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ18ï¼‰â€”â€”MPU6050èºæ—‹ä»ªåŠ é€Ÿåº¦ä¼ æ„Ÿå™¨æ¨¡å—åº”ç”¨/","excerpt":"","text":"ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ18ï¼‰â€”â€”MPU6050é™€èºä»ªåŠ é€Ÿåº¦ä¼ æ„Ÿå™¨æ¨¡å—åº”ç”¨ä¸€. å¼•è¨€ç°åœ¨æ™ºèƒ½æ‰‹æœºçš„åŠŸèƒ½å·²ç»éå¸¸å¼ºå¤§ï¼Œé™¤äº†åŸºç¡€çš„é€šä¿¡åŠŸèƒ½å¤–ï¼Œæµ‹ä½æµ‹é€Ÿï¼Œç©ºé—´è§’åº¦ç­‰æ•°æ®çš„æµ‹é‡ä¹Ÿéå¸¸æ–¹ä¾¿ï¼Œè¿™åœ¨çº¿è·¯å¯¼èˆªï¼Œåœ°å›¾ï¼Œä½“æ„Ÿæ¸¸æˆç­‰åº”ç”¨ä¸­ååˆ†é‡è¦ã€‚ä¸çŸ¥ä½ æ˜¯å¦æƒ³è¿‡ï¼Œæ™ºèƒ½è®¾å¤‡æ˜¯å¦‚ä½•è·å–åˆ°å…¶æ‰€åœ¨çš„ç©ºé—´çŠ¶æ€ä¸åŠ é€Ÿåº¦ç­‰æ•°æ®çš„å‘¢ï¼ŸMPU6050å°±æ˜¯æä¾›è¿™ç±»æ•°æ®æµ‹é‡çš„ä¸€ç§ä¼ æ„Ÿå™¨æ¨¡å—ã€‚ é¦–å…ˆï¼Œé€šè¿‡æ ‘è“æ´¾æ¥è¯»å–MPU6050ä¼ æ„Ÿå™¨æ¨¡å—çš„æ•°æ®å¹¶ä¸å¤æ‚ï¼ŒMPU60X0æ˜¯ä¸€æ¬¾æ‰©å±•æ€§æå¼ºçš„æ•°å­—è¿åŠ¨å¤„ç†å™¨ï¼Œæˆ‘ä»¬æœ¬æ¬¡å®éªŒä½¿ç”¨çš„æ˜¯å°è£…å¥½çš„åŠŸèƒ½æ¨¡å—ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š MPU6050èŠ¯ç‰‡æœ¬èº«æœ‰24ä¸ªå¼•è„šï¼Œæ¯è¾¹æœ‰6ä¸ªå¼•è„šï¼ŒåŠŸèƒ½è¾ƒå¤šï¼Œå¼•è„šåŠŸèƒ½ä¸å®šä½å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å…³äºMPU6050çš„é«˜çº§ç”¨æ³•ï¼Œå¯ä»¥é€šè¿‡æŸ¥çœ‹èŠ¯ç‰‡æ‰‹å†Œè·å–ï¼Œæœ¬ç¯‡åšå®¢æˆ‘ä»¬ç€é‡ä¸åœ¨æ ‘è“æ´¾ä¸Šå¯¹å…¶è¿›è¡Œåº”ç”¨ã€‚æˆ‘ä»¬åªéœ€è¦å…³æ³¨æ‰€ä½¿ç”¨çš„æ¨¡å—çš„8ä¸ªå¼•è„šå³å¯ã€‚ äºŒ. è¿çº¿ä¸å‡†å¤‡å·¥ä½œæœ¬æ¬¡å®éªŒæˆ‘ä»¬ä½¿ç”¨çš„æ¨¡å—æœ‰8ä¸ªå¼•è„šï¼Œåªéœ€è¦ä½¿ç”¨å…¶ä¸­4ä¸ªå¼•è„šå³å¯å®ç°åŠŸèƒ½ã€‚å¯¹äºæ ‘è“æ´¾I2Cåè®®æ€»çº¿çš„åº”ç”¨ï¼Œæœ¬ç³»åˆ—åšå®¢ä¹‹å‰å·²ç»æœ‰éå¸¸å¤šçš„å®éªŒæœ‰è¿‡åº”ç”¨ã€‚é¦–å…ˆè¿æ¥ä¼ æ„Ÿå™¨æ¨¡å—ä¸æ ‘è“æ´¾å¦‚ä¸‹è¡¨ï¼š ä¼ æ„Ÿå™¨æ¨¡å— æ ‘è“æ´¾ VCC +5V GND GND SCL SCL SDA SDA å¼€å§‹ä½¿ç”¨I2Cæ€»çº¿å‰ï¼Œè«å¿˜äº†å¼€å¯æ ‘è“æ´¾çš„I2CåŠŸèƒ½ï¼Œå¯¹I2Cæ€»çº¿ç”¨æ³•å¦‚æœä¸å¤ªäº†è§£ï¼Œå¯ä»¥é˜…è¯»ä»¥ä¸‹åšå®¢ï¼š https://my.oschina.net/u/2340880/blog/5142788 è¿çº¿å®Œæˆåï¼Œåœ¨æ ‘è“æ´¾çš„ç»ˆç«¯è¾“å…¥å¦‚ä¸‹æŒ‡ä»¤å¯ä»¥æŸ¥çœ‹å·²ç»è¿æ¥çš„I2Cè®¾å¤‡ï¼š 1sudo i2cdetect -y 1 å¦‚æœè¿æ¥æ— è¯¯ï¼Œç»ˆç«¯è¾“å‡ºç»“æœå°†å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¯ä»¥çœ‹åˆ°ï¼Œå›¾ä¸­æ˜¾ç¤ºçš„68å³ä¸ºæˆ‘ä»¬æ‰€è¿æ¥çš„ä¼ æ„Ÿå™¨çš„åœ°å€ã€‚ ä¸‹é¢ï¼Œæ˜¯æ—¶å€™äº†è§£ä¸‹MPU6050ä¼ æ„Ÿå™¨è¯¥å¦‚ä½•ä½¿ç”¨äº†ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œé€šè¿‡I2Cæ€»çº¿ï¼Œæˆ‘ä»¬å¯ä»¥æ–¹ä¾¿çš„è¯»å–è®¾å¤‡ä¸­æŸä¸ªå¯„å­˜å™¨çš„æ•°æ®ï¼Œä¹Ÿå¯ä»¥å‘è®¾å¤‡çš„æŸä¸ªå¯„å­˜å™¨å†™å…¥æ•°æ®ï¼Œå› æ­¤ï¼Œä½¿ç”¨MPU6050ä¼ æ„Ÿå™¨çš„æ ¸å¿ƒæ˜¯äº†è§£å…¶ä¸­å¯„å­˜å™¨çš„ä½¿ç”¨æ–¹æ³•ã€‚æˆ‘ä»¬å°†ä»¥ä½¿ç”¨åˆ°çš„å‡ ä¸ªå¯„å­˜å™¨ä¸ºä¾‹åšä»‹ç»ï¼Œå®Œæ•´çš„å¯„å­˜å™¨ç”¨æ³•å¯ä»¥ä»èŠ¯ç‰‡æ‰‹å†Œä¸Šå¾—åˆ°ã€‚ 1. ç”µæºç®¡ç†å¯„å­˜å™¨ç”µæºç®¡ç†å¯„å­˜å™¨çš„åœ°å€ä¸º107ï¼Œå¯¹åº”åå…­è¿›åˆ¶æ•°0x6bï¼Œå®ƒæ˜¯ä¸€ä¸ª8ä½çš„å¯„å­˜å™¨ï¼Œå…¶ä¸­ç¬¬4ä½ä¸ºä¿ç•™ä½ä¸èƒ½ä½¿ç”¨ï¼ŒåŠŸèƒ½å¦‚ä¸‹ï¼š DECIVE_RESET: è¿™ä¸€ä½çš„ä½œç”¨æ˜¯é‡ç½®ä¼ æ„Ÿå™¨ï¼Œå°†ä¼ æ„Ÿå™¨å†…éƒ¨æ‰€æœ‰å¯„å­˜å™¨å¤ä½ä¸ºåˆå§‹çŠ¶æ€ï¼Œå¤ä½å®Œæˆåï¼Œè¿™ä¸€ä½ä¼šæ¸…é›¶ã€‚ SLEEP: ç¡çœ æ§åˆ¶ä½ï¼Œå½“æ­¤ä½ä¸º1æ—¶ï¼Œä¼ æ„Ÿå™¨å°†å¤„äºç¡çœ æ¨¡å¼ã€‚éœ€è¦æ³¨æ„ï¼Œä¼ æ„Ÿå™¨å¯åŠ¨æ—¶é»˜è®¤æ˜¯ç¡çœ æ¨¡å¼ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨å°†å…¶å”¤é†’ã€‚ CYCLE:å½“è®¾å¤‡è®¾ç½®ä¸ºéç¡çœ æ¨¡å¼æ—¶ï¼Œå³SLEEPä½ä¸ä¸º1ï¼Œæ­¤ä¸ºå¦‚æœè®¾ç½®ä¸º1ï¼Œä¼ æ„Ÿå™¨å°†å¤„äºå¾ªç¯æ¨¡å¼ï¼Œä¼šæŒ‰ç…§å¯„å­˜å™¨108è®¾ç½®çš„é€Ÿåº¦è¿›è¡Œæ•°æ®å¾ªç¯é‡‡æ ·ã€‚ TEMP_DIS:æ˜¯å¦ç¦ç”¨æ¸©åº¦ä¼ æ„Ÿå™¨ï¼Œè®¾ç½®ä¸º1æ—¶ï¼Œç¦ç”¨æ¸©åº¦ä¼ æ„Ÿå™¨ã€‚ CLKSEL:3ä½æ— ç¬¦å·æ•°å€¼ï¼Œç”¨æ¥æŒ‡ä»¤æ—¶é’Ÿæºã€‚ å¯¹äºCLKSELé€‰é¡¹ï¼Œå…¶è®¾ç½®æ–¹å¼å¦‚ä¸‹ï¼š CLKSELå€¼ æ„ä¹‰ 0 ä½¿ç”¨å†…éƒ¨çš„8MHzçš„æŒ¯è¡å™¨ 1 ä½¿ç”¨é™€èºä»ªXè½´çš„é¢‘ç‡ 2 ä½¿ç”¨é™€èºä»ªYè½´çš„é¢‘ç‡ 3 ä½¿ç”¨é™€èºä»ªXè½´çš„é¢‘ç‡ 4 ä½¿ç”¨å¤–éƒ¨çš„32.768kHzé¢‘ç‡ 5 ä½¿ç”¨å¤–éƒ¨19.2MHzé¢‘ç‡ 6 ä¿ç•™å€¼ 7 åœæ­¢æ—¶é’Ÿå¹¶ä½¿æŒ¯è¡å™¨ä¿æŒå¤ä½çŠ¶æ€ 2. é™€èºä»ªæ•°æ®å¯„å­˜å™¨é™€èºä»ªæ•°æ®å¯„å­˜å™¨çš„åœ°å€ä¸º67åˆ°72ï¼Œå…±48ä¸ªäºŒè¿›åˆ¶ä½ï¼Œå¦‚ä¸‹ï¼š è¿™äº›å¯„å­˜å™¨éƒ½æ˜¯åªè¯»çš„ï¼Œä¸èƒ½å†™å…¥ã€‚ 67å’Œ68å¯„å­˜å™¨å­˜å‚¨16ä½æ•°æ®ï¼Œä¸ºé™€èºä»ªXè½´çš„æµ‹é‡æ•°æ®ã€‚å…¶ä¸­68å¯„å­˜å™¨å­˜å‚¨ä½8ä½ï¼Œ67å¯„å­˜å™¨å­˜å‚¨é«˜8ä½ã€‚ 69å’Œ70å¯„å­˜å™¨å­˜å‚¨16ä½æ•°æ®ï¼Œä¸ºé™€èºä»ªYè½´çš„æµ‹é‡æ•°æ®ã€‚å…¶ä¸­70å¯„å­˜å™¨å­˜å‚¨ä½8ä½ï¼Œ69å¯„å­˜å™¨å­˜å‚¨é«˜8ä½ã€‚ 71å’Œ72å¯„å­˜å™¨å­˜å‚¨16ä½æ•°æ®ï¼Œä¸ºé™€èºä»ªZè½´çš„æµ‹é‡æ•°æ®ã€‚å…¶ä¸­72å¯„å­˜å™¨å­˜å‚¨ä½8ä½ï¼Œ71å¯„å­˜å™¨å­˜å‚¨é«˜8ä½ã€‚ éœ€è¦æ³¨æ„ï¼Œä»è¿™äº›å¯„å­˜å™¨å–å‡ºçš„æ•°æ®éƒ½æ˜¯åŸå§‹æ•°æ®ï¼Œè¦å¾—åˆ°çœŸæ­£çš„é™€èºä»ªæµ‹é‡çš„æ—‹è½¬è§’åº¦ï¼Œéœ€è¦è¿›è¡Œè½¬æ¢ï¼Œå…¶è½¬æ¢çš„å•ä½ä¸æ€»é‡ç¨‹æœ‰å…³ï¼Œé‡ç¨‹åœ¨å¯„å­˜å™¨27è¿›è¡Œé…ç½®ã€‚ 3. é™€èºä»ªé…ç½®å¯„å­˜å™¨é™€èºä»ªé…ç½®å¯„å­˜å™¨çš„åœ°å€ä¸º27ï¼Œæ˜¯ä¸€ä¸ªå¯è¯»å¯å†™çš„å¯„å­˜å™¨ï¼Œå¦‚ä¸‹ï¼š XG_STï¼ŒYG_STä¸ZG_STè¿™3ä½ç”¨æ¥è®¾ç½®é™€èºä»ªæ‰§è¡Œè‡ªæ£€ã€‚FS_SELç”¨æ¥è®¾ç½®é™€èºä»ªçš„é‡ç¨‹èŒƒå›´ï¼Œä½3ä½ä¸ºä¿ç•™ä½ï¼Œæ— éœ€ä½¿ç”¨ã€‚FS_SELå¯è®¾ç½®çš„é‡ç¨‹èŒƒå›´å¦‚ä¸‹ï¼š FS_SEL é‡ç¨‹èŒƒå›´ çµæ•åº¦å‚æ•° 0 Â±250 Â°/s 131 1 Â±500 Â°/s 65.5 2 Â±1000 Â°/s 32.8 3 Â±2000 Â°/s 16.4 å¯¹äºä¸åŒçš„é‡ç¨‹èŒƒå›´ï¼Œæˆ‘ä»¬è·å–åˆ°åŸå§‹æ•°æ®åï¼Œéœ€è¦é™¤ä»¥å¯¹åº”çš„çµæ•åº¦å‚æ•°æ‰èƒ½å¾—åˆ°æœ€ç»ˆçš„é™€èºä»ªæ•°æ®ã€‚ 4. åŠ é€Ÿè®¡æ•°æ®å¯„å­˜å™¨åŠ é€Ÿè®¡æ•°æ®å¯„å­˜å™¨çš„åœ°å€ä¸º59åˆ°64ï¼Œå…±48ä¸ªäºŒè¿›åˆ¶ä½ï¼Œå¦‚ä¸‹ï¼š å…¶ä½¿ç”¨æ–¹æ³•ä¸é™€èºä»ªæ•°æ®å¯„å­˜å™¨ç±»ä¼¼ï¼ŒåŒæ ·éœ€è¦åœ¨å¯„å­˜å™¨28æ¥å¯¹åŠ é€Ÿè®¡è¿›è¡Œé…ç½®ä¸è®¾ç½®é‡ç¨‹ï¼Œé€šè¿‡é‡ç¨‹å¯¹åº”çš„çµæ•åº¦æ¥è®¡ç®—å¾—åˆ°çœŸå®çš„åŠ é€Ÿåº¦å€¼ã€‚ 5. åŠ é€Ÿè®¡é…ç½®å¯„å­˜å™¨é™€èºä»ªé…ç½®å¯„å­˜å™¨çš„åœ°å€ä¸º28ï¼Œæ˜¯ä¸€ä¸ªå¯è¯»å¯å†™çš„å¯„å­˜å™¨ï¼Œå¦‚ä¸‹ï¼š XA_STï¼ŒYA_STï¼ŒZA_STéƒ½æ˜¯è‡ªæ£€æ‰§è¡Œæ§åˆ¶ä½ï¼ŒAFS_SELç”¨æ¥è®¾ç½®é‡ç¨‹ï¼Œå…¶ä¸çµæ•åº¦å¯¹åº”å…³ç³»å¦‚ä¸‹ï¼š AFS_SEL é‡ç¨‹èŒƒå›´ çµæ•åº¦å‚æ•° 0 Â±2 16384 1 Â±4g 8192 2 Â±8g 4096 3 Â±16g 2048 6. æ¸©åº¦æ•°æ®å¯„å­˜å™¨æ¸©åº¦æ•°æ®å¯„å­˜å™¨çš„åœ°å€ä¸º65åˆ°66ï¼Œå…±16ä¸ªäºŒè¿›åˆ¶ä½ï¼Œå¦‚ä¸‹ï¼š å¯¹äºæµ‹é‡åˆ°çš„æ¸©åº¦æ•°æ®ä¸ºæœ‰ç¬¦å·æ•°ï¼Œéœ€è¦é‡‡ç”¨å¦‚ä¸‹çš„è®¡ç®—å…¬å¼å¾—åˆ°çœŸå®çš„æ‘„æ°åº¦æ•°æ®ï¼š æ‘„æ°æ¸©åº¦ = TEMP_OUT / 340 + 36.53 é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰è®¸å¤šåŠŸèƒ½ä¼ æ„Ÿå™¨ï¼Œå¦‚é‡‡æ ·ç‡é…ç½®ç­‰ï¼Œæœ‰éœ€è¦å¯ä»¥ä»èŠ¯ç‰‡æ‰‹å†ŒæŸ¥åˆ°ã€‚ ä¸‰. ç¼–å†™ä»£ç å®Œæˆäº†å‰é¢çš„åŸºç¡€å‡†å¤‡å·¥ä½œï¼Œç¼–å†™ä»£ç è·å–ä¼ æ„Ÿå™¨æ¨¡å—çš„æ•°æ®åˆ™éå¸¸å®¹æ˜“ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677#coding:utf-8import smbusimport mathimport time# ç”µæºæ§åˆ¶å¯„å­˜å™¨åœ°å€power_regist = 0x6b# I2Cæ¨¡å—åˆå§‹åŒ–bus = smbus.SMBus(1)# å¤–æ¥I2Cè®¾å¤‡çš„åœ°å€address = 0x68# å°è£…ä¸€äº›è¯»å–æ•°æ®çš„åŠŸèƒ½å‡½æ•°# è¯»å–ä¸€ä¸ªå­—é•¿åº¦çš„æ•°æ®(16ä½)def readWord(adr): high = bus.read_byte_data(address, adr) low = bus.read_byte_data(address, adr+1) val = (high &lt;&lt; 8) + low return val# å°†è¯»å–åˆ°çš„æ•°æ®è½¬æ¢ä¸ºåŸç  (æœ‰ç¬¦å·æ•°æœ¬èº«æ˜¯é‡‡ç”¨è¡¥ç æ–¹å¼å­˜å‚¨çš„)def readWordReal(adr): val = readWord(adr) x = 0xffff # é¦–ä½ä¸º1 è¡¨ç¤ºæ˜¯è´Ÿæ•° if (val &gt;= 0x8000): # æ±‚åŸç  return -((x - val)+1) else: return val# å·²çŸ¥åŠ é€Ÿåº¦æ±‚è§’åº¦å€¼def dist(a, b): return math.sqrt((a*a)+(b*b))def getRotationX(x, y, z): radians = math.atan2(y, dist(x,z)) return math.degrees(radians)def getRotationY(x, y, z): radians = math.atan2(x, dist(y,z)) return math.degrees(radians)# è®¾ç½®ç”µæºæ¨¡å¼bus.write_byte_data(address, power_regist, 0)while True: time.sleep(0.5) print(\"èºæ—‹ä»ªæ•°æ®-----------\") gyroX = readWordReal(0x43) gyroY = readWordReal(0x45) gyroZ = readWordReal(0x47) print(\"Xè½´é™€èºä»ªåŸå§‹æ•°æ®ï¼š\", gyroX, \"Xè½´æ¯ç§’æ—‹è½¬åº¦æ•°ï¼š\", gyroX/131) print(\"Yè½´é™€èºä»ªåŸå§‹æ•°æ®ï¼š\", gyroY, \"Yè½´æ¯ç§’æ—‹è½¬åº¦æ•°ï¼š\", gyroY/131) print(\"Zè½´é™€èºä»ªåŸå§‹æ•°æ®ï¼š\", gyroZ, \"Zè½´æ¯ç§’æ—‹è½¬åº¦æ•°ï¼š\", gyroZ/131) print(\"åŠ é€Ÿåº¦æ•°æ®----------\") accelX = readWordReal(0x3b) accelY = readWordReal(0x3d) accelZ = readWordReal(0x3f) print(\"Xè½´åŠ é€Ÿåº¦åŸå§‹æ•°æ®ï¼š\", accelX, \"Xè½´åŠ é€Ÿåº¦ï¼š\", accelX/16384) print(\"Yè½´åŠ é€Ÿåº¦åŸå§‹æ•°æ®ï¼š\", accelY, \"Yè½´åŠ é€Ÿåº¦ï¼š\", accelY/16384) print(\"Zè½´åŠ é€Ÿåº¦åŸå§‹æ•°æ®ï¼š\", accelZ, \"Zè½´åŠ é€Ÿåº¦ï¼š\", accelZ/16384) print(\"æ‘„æ°æ¸©åº¦æ•°æ®--------\") temp = readWordReal(0x41) print(\"æ¸©åº¦åŸå§‹æ•°æ®ï¼š\", temp, \"æ‘„æ°åº¦ï¼š\", temp/340 + 36.53) print(\"æ—‹è½¬å®¶è§’åº¦æ•°æ®-------\") print(\"Xè½´æ—‹è½¬åº¦æ•°ï¼š\", getRotationX(accelX/16384, accelY/16384, accelZ/16384)) print(\"Yè½´æ—‹è½¬åº¦æ•°ï¼š\", getRotationX(accelX/16384, accelY/16384, accelZ/16384)) åœ¨æ ‘è“æ´¾ä¸Šè¿è¡Œä¸Šé¢ä»£ç ï¼Œæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¸“æ³¨æŠ€æœ¯ï¼Œæ‡‚çš„çƒ­çˆ±ï¼Œæ„¿æ„åˆ†äº«ï¼Œåšä¸ªæœ‹å‹ QQï¼š316045346","categories":[{"name":"Linux","slug":"Linux","permalink":"http://huishao.cc/categories/Linux/"}],"tags":[],"keywords":[{"name":"Linux","slug":"Linux","permalink":"http://huishao.cc/categories/Linux/"}]},{"title":"è‡ªä¸Šè€Œä¸‹çš„ç†è§£ç½‘ç»œï¼ˆ1ï¼‰â€”â€”DNSç¯‡","slug":"431è‡ªä¸Šè€Œä¸‹çš„ç†è§£ç½‘ç»œï¼ˆ1ï¼‰â€”â€”DNSç¯‡","date":"2021-10-09T16:00:00.000Z","updated":"2021-10-01T15:34:50.295Z","comments":true,"path":"2021/10/10/431è‡ªä¸Šè€Œä¸‹çš„ç†è§£ç½‘ç»œï¼ˆ1ï¼‰â€”â€”DNSç¯‡/","link":"","permalink":"http://huishao.cc/2021/10/10/431è‡ªä¸Šè€Œä¸‹çš„ç†è§£ç½‘ç»œï¼ˆ1ï¼‰â€”â€”DNSç¯‡/","excerpt":"","text":"è‡ªä¸Šè€Œä¸‹çš„ç†è§£ç½‘ç»œï¼ˆ1ï¼‰â€”â€”DNSç¯‡ä¸€.å¼•è¨€ç°ä»£ç”Ÿæ´»ä¸­ï¼Œç½‘ç»œå¯è°“æ˜¯æ— å¤„ä¸åœ¨ï¼Œè´­ç‰©éœ€è¦ç½‘ç»œï¼Œä»˜æ¬¾éœ€è¦ç½‘ç»œï¼Œå„ç§ç”Ÿæ´»ç¼´è´¹éœ€è¦ç½‘ç»œï¼Œåœ¨å„è¡Œå„ä¸šçš„å·¥ä½œä¸­ï¼Œæ›´æ˜¯ç¦»ä¸å¼€ç½‘ç»œã€‚è¯´åˆ°åº•ï¼Œç½‘ç»œçš„ä½œç”¨æ— éæ˜¯æ”¯æŒè®¡ç®—æœºé—´è¿›è¡Œæ•°æ®äº¤æ¢ã€‚ä¸–ç•Œå„åœ°æœ‰ç€ä¸è®¡å…¶æ•°çš„ç½‘ç»œè®¾å¤‡ï¼Œè¿™äº›ç½‘ç»œè®¾å¤‡æ˜¯å¦‚ä½•æœ‰åºæ­£å¸¸çš„è¿›è¡Œæ•°æ®äº¤æµçš„å‘¢ï¼Ÿç½‘ç»œä»¥åŠå„ç§åè®®çš„å·¥ä½œåŸç†åˆæ˜¯æ€æ ·çš„å‘¢ï¼Ÿæœ¬ç³»åˆ—åšå®¢ï¼Œæˆ‘ä»¬å°†å°è¯•è‡ªä¸Šè€Œä¸‹çš„å¯¹ç½‘è·¯çš„å·¥ä½œåŸç†è¿›è¡Œä»‹ç»ï¼Œä»åº”ç”¨å±‚å¼€å§‹ï¼Œé€å±‚å‘ä¸‹ï¼Œè¯¦ç»†çš„å¸®åŠ©ä½ ç†è§£ç½‘ç»œçš„æ ¸å¿ƒå·¥ä½œåŸç†ã€‚å½“ç„¶ï¼Œç½‘ç»œåè®®å¤šå¦‚ç‰›æ¯›ï¼Œåœ¨ç½‘ç»œåˆ†å±‚ä¸­æ¯ä¸€å±‚çš„çŸ¥è¯†ä¹Ÿæ˜¯éå¸¸æµ©æ¸ºï¼Œå¸Œæœ›è¿™äº›åšå®¢å¯ä»¥èµ·åˆ°æŠ›ç –å¼•ç‰çš„ä½œç”¨ï¼Œèƒ½å¤Ÿä½¿ä½ å¯¹äºå¤©å¤©ä½¿ç”¨çš„äº’è”ç½‘ç½‘ç»œåœ¨å®è§‚ä¸Šæœ‰è®¤è¯†ï¼Œåœ¨å¾®è§‚ä¸Šä¹Ÿæœ‰äº†è§£ã€‚ äºŒ.è®¿é—®ç½‘ç«™çš„ç¬¬ä¸€æ­¥æ˜¯ä»€ä¹ˆï¼Ÿè¯´åˆ°ç½‘ç»œï¼Œå¯¹äºæ™®é€šç”¨æˆ·æ¥è¯´ï¼Œä½¿ç”¨æœ€å¤šçš„å¯èƒ½å°±æ˜¯æµè§ˆå„ç§ç½‘ç«™äº†ï¼Œè™½ç„¶ç°åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šçš„AppåŸºæœ¬ä»£æ›¿äº†ä¼ ç»Ÿçš„PCåº”ç”¨å’Œç½‘ç«™ï¼Œä½†æ˜¯è¿™äº›Appé‡Œæä¾›çš„æ•°æ®æœ¬è´¨ä¸Šç½‘ç«™ä¸­æä¾›çš„æ•°æ®å¹¶æ— ä¸åŒï¼Œä½¿ç”¨çš„ç½‘ç»œæŠ€æœ¯å¹¶æ— ä¸åŒã€‚ æˆ‘ä»¬çŸ¥é“ï¼Œä¸è®ºæ˜¯è®¿é—®ç½‘ç«™è¿˜æ˜¯Appå†…è¿›è¡Œæ¥å£è¯·æ±‚ï¼Œè¿™äº›æ•°æ®éƒ½æ˜¯å­˜å‚¨åœ¨â€œæœåŠ¡å™¨â€è¿™ç§ç‰¹æ®Šçš„è¿œç¨‹è®¾å¤‡ä¸Šçš„ï¼Œè¦å‘æœåŠ¡å™¨è·å–æ•°æ®ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦æ‰¾åˆ°æœåŠ¡å™¨çš„ä½ç½®ï¼Œè¿™å¾ˆå¥½ç†è§£ï¼Œåªæœ‰æ‰¾åˆ°å®ƒï¼Œæˆ‘ä»¬æ‰èƒ½å’Œå®ƒäº§ç”Ÿæ•°æ®äº¤æµã€‚äº’è”ç½‘æ— è®ºå¤šå¤§ï¼Œæœ¬è´¨ä¸Šä¾ç„¶æ˜¯é€šè¿‡ç”µç¼†ã€å…‰çº¤æˆ–å„ç§æ— çº¿è®¾å¤‡è¿™ç±»è¿æ¥ä»‹è´¨è¿æ¥åœ¨ä¸€èµ·çš„ï¼Œå¦‚æœä¸€å°è®¾å¤‡æ²¡æœ‰ç¡¬ä»¶ä¸Šè¿æ¥å…¥äº’è”ç½‘ï¼Œé‚£ä¹ˆè¯´ç ´å¤©æˆ‘ä»¬ä¹Ÿæ— æ³•å’Œå®ƒäº§ç”Ÿæ•°æ®äº¤äº’ã€‚è¦æ‰¾åˆ°ä¸€å°äº’è”ç½‘è®¾å¤‡ï¼Œå®é™…ä¸Šæ˜¯é€šè¿‡å…¶ç‰©ç†Macåœ°å€æ¥æ‰¾åˆ°çš„ï¼Œè¿™å°±åƒç°å®ä¸­çš„é—¨ç‰Œå·ä¸€æ ·ï¼Œæ¯å®¶çš„é—¨ç‰Œå·éƒ½ä¸åŒï¼Œè¯´åˆ°è¿™ï¼Œæˆ‘ä»¬è¦å†è€ç”Ÿå¸¸è°ˆä¸€ä¸‹ï¼ŒæŠ›å‡ºç½‘ç»œåˆ†å±‚æ¨¡å‹ç»™ä½ çœ‹ï¼š å…³äºè¿™ä¸ªç½‘ç»œåˆ†å±‚æ¨¡å‹ï¼Œå®ƒåœ¨æˆ‘ä»¬åé¢åšå®¢ä¸­çš„å‡ºå¢ƒè¿˜å°‘ä¸äº†ï¼Œç°åœ¨ä½ å¯ä»¥å…ˆä¸ç”¨ç®¡å®ƒï¼Œä½ åªéœ€è¦å…ˆçŸ¥é“ç‰©ç†å±‚æ˜¯è´Ÿè´£è®¾å¤‡ç‰©ç†åª’ä»‹ç›¸å…³çš„åè®®ï¼Œæ•°æ®é“¾è·¯å±‚é€šè¿‡ç¡¬ä»¶çš„Macåœ°å€æ‰¾åˆ°å…·ä½“è¦ç½‘ç»œè®¾å¤‡ï¼Œç½‘ç»œå±‚é€šè¿‡IPåè®®æ¥å°è£…çœŸå®çš„Macåœ°å€ï¼Œä¼ è¾“å±‚æ˜¯å¯¹ç½‘ç»œå±‚çš„ä¸€ç§å°è£…ï¼ŒTCPï¼ŒUDPç­‰ä¼ è¾“åè®®åœ¨è¿™ä¸€å±‚å·¥ä½œï¼Œè€Œæœ€ä¸Šå±‚çš„åº”ç”¨å±‚å°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„ç½‘ç»œåº”ç”¨åè®®ï¼Œå¦‚DNSï¼ŒHTTPï¼ŒHTTPSå’ŒFPTåè®®å·¥ä½œåœ¨è¿™ä¸€å±‚ã€‚ å…³äºç½‘ç»œåˆ†å±‚æ¨¡å‹ï¼Œæˆ‘ä»¬å…ˆæŠŠå¤šè¯´äº†ï¼Œæˆ‘ä»¬çš„å®—æ—¨æ˜¯è‡ªä¸Šè€Œä¸‹çš„ç†è§£ç½‘ç»œï¼Œé‚£ä¹ˆè¿˜æ˜¯å›åˆ°ç¬¬ä¸€æ­¥æ¥ã€‚æˆ‘ä»¬åœ¨è®¿é—®ç½‘ç«™æ—¶ï¼Œéƒ½ä¼šç°åœ¨æµè§ˆå™¨è¾“å…¥ç½‘ç«™çš„åœ°å€ï¼Œè¿™é€šå¸¸æ˜¯ä¸€ä¸ªåŸŸåï¼Œä¾‹å¦‚æˆ‘è¦è®¿é—®è‡ªå·±çš„æŠ€æœ¯åšå®¢ç½‘ç«™ï¼Œæˆ‘ä¼šåœ¨æµè§ˆå™¨è¾“å…¥å¦‚ä¸‹çš„åœ°å€ï¼š https://huishao.cc/ huishao.ccå°±æ˜¯ä¸€ä¸ªåŸŸåï¼Œé¦–å…ˆåªé€šè¿‡åŸŸåæˆ‘ä»¬æ˜¯æ‰¾ä¸åˆ°è¦è®¿é—®çš„å¯¹æ–¹æœåŠ¡å™¨çš„ï¼Œè¿™å°±å¥½åƒç°å®ä¸­æˆ‘è¦å»å°ç‹å®¶ï¼Œå¯ä»¥æˆ‘åªçŸ¥é“å°ç‹çš„åå­—â€œç‹æŸæŸâ€æ˜¯æ— æ³•æ‰¾åˆ°ä»–çš„å®¶çš„ï¼Œæˆ‘éœ€è¦æœ‰ä¸€ä¸ªä½å€ç°¿ï¼Œå‘Šè¯‰æˆ‘å°ç‹ç©¶ç«Ÿä½åœ¨å“ªäº†ï¼Œè¿™æ ·æˆ‘æ‰èƒ½æ‰¾åˆ°ä»–ã€‚å½“ç„¶ï¼Œæ­¤ä½å€å¯èƒ½ä¹Ÿä¸æ˜¯çœŸæ­£çš„ç‰©ç†ä½ç½®ï¼Œå¯èƒ½æ˜¯ä¸€ä¸ªç¤¾åŒºï¼Œæ¯”å¦‚å°ç‹ä½åœ¨â€œå…‰æ˜ç¤¾åŒºâ€ï¼Œå…·ä½“å…‰æ˜ç¤¾åŒºåœ¨å“ªï¼Œæˆ‘ä»¬å¯ä»¥å†é€šè¿‡æŸ¥çœ‹åœ°å›¾è·å–ã€‚å¯¹åº”åˆ°äº’è”ç½‘ä¸­ï¼ŒåŸŸåå°±æ˜¯ä¸€ä¸ªåå­—ï¼Œå®ƒæ–¹ä¾¿æˆ‘ä»¬å¯¹ç½‘ç«™è¿›è¡Œè®°å¿†ï¼ŒIPåœ°å€åˆ™æ˜¯è¦è®¿é—®çš„å¯¹æ–¹åœ¨é€»è¾‘ä¸Šçš„åœ°å€ï¼Œè¿™æ–¹ä¾¿äº’è”ç½‘çš„ç½‘ç»œç®¡ç†ï¼Œæœ€ç»ˆçš„ç¡¬ä»¶åœ°å€åˆ™æ˜¯çœŸæ­£çš„å¯¹æ–¹ä½ç½®ã€‚IPåœ°å€åˆ°ç¡¬ä»¶åœ°å€çš„æ˜ å°„ï¼Œç­‰æˆ‘ä»¬è®¨è®ºåˆ°äº†å†ç»†èŠï¼Œæœ¬ç¯‡åšå®¢æˆ‘ä»¬å°±è¯´åŸŸååˆ°IPåœ°å€æ˜ å°„è¿™ä¸€è¿‡ç¨‹ã€‚ ä¸‰. DNSæœåŠ¡å™¨ç°åœ¨ä½ åº”è¯¥å·²ç»æ˜ç¡®ï¼Œè¦é€šè¿‡åŸŸåæ‰¾åˆ°æŸä¸ªè®¾å¤‡ï¼Œç¬¬ä¸€æ­¥æ˜¯å…ˆå¾—åˆ°æ­¤åŸŸåå¯¹åº”çš„IPåœ°å€ï¼Œé‚£ä¹ˆæ­¤IPåœ°å€æ˜¯æ€ä¹ˆå¾—åˆ°çš„å‘¢ï¼Ÿé¦–å…ˆï¼Œä¸€å®šæœ‰ä¸€ä¸ªåœ°æ–¹ç»´æŠ¤äº†åŸŸåä¸IPåœ°å€çš„æ˜ å°„å…³ç³»ï¼Œå¦‚æœä½ æœ‰è¿‡å»ºç«™çš„ç»å†ï¼Œé‚£ä¹ˆä½ ä¸€å®šè¿›è¡Œè¿‡åŸŸåç»‘å®šæ“ä½œï¼Œä¸€ä¸ªç½‘ç«™å»ºæˆåï¼Œç†è®ºä¸Šå°±å·²ç»å¯ä»¥ä½¿ç”¨IPçš„æ–¹å¼æ¥è¿›è¡Œè®¿é—®ï¼Œä½†æ˜¯ä¸ºäº†æ˜“è®°å’ŒåŠ¨æ€å˜åŠ¨IPï¼Œé€šå¸¸ä¼šå¯¹å…¶è¿›è¡ŒåŸŸåç»‘å®šã€‚ç”±åŸŸåè·å–åˆ°IPçš„è¿™ä¸€è¿‡ç¨‹ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºåŸŸåè§£æã€‚ åŸŸåè§£ææ˜¯ä¸€ç§æœåŠ¡ï¼Œæä¾›åŸŸåè§£ææœåŠ¡çš„æœåŠ¡å™¨å³æ˜¯DNSæœåŠ¡å™¨ï¼Œä¸‹å›¾å¯ä»¥å¾ˆå½¢è±¡çš„è¡¨ç¤ºåŸŸåæœåŠ¡å™¨çš„å·¥ä½œæ–¹å¼ï¼š å¯ä»¥å‘ç°ï¼Œæ˜ å°„è¡¨ä¸­è®°å½•äº†åŸŸåä¸IPé—´çš„æ˜ å°„å…³ç³»ï¼Œåœ¨å®é™…çš„åº”ç”¨ä¸­ï¼Œä¸Šå›¾ä¸­æè¿°çš„åœºæ™¯çœ‹ä¼¼å¯è¡Œï¼Œå®é™…å´å¹¶éå¦‚æ­¤ï¼Œä¸–ç•Œä¸Šçš„åŸŸåä¸IPæ€»æ•°æ˜¯ä¸€ä¸ªéå¸¸åºå¤§çš„æ•°å­—ï¼Œç”±ä¸€å°æœåŠ¡å™¨æ¥ç»´æŠ¤æ‰€æœ‰åŸŸåIPä¿¡æ¯å‡ ä¹ä¸å¯èƒ½ï¼Œè€Œä¸”å¯¹äºåŸŸåè§£ææœåŠ¡ï¼Œè¯·æ±‚é‡æ˜¯å·¨å¤§çš„ï¼Œä¼šæœ‰å¤§é‡çš„ç”¨æˆ·é¢‘ç¹çš„è¿›è¡ŒåŸŸåè§£æè¯·æ±‚ï¼Œå•æœåŠ¡å™¨æ˜æ˜¾æ˜¯ä¸èƒ½æ»¡è¶³éœ€æ±‚çš„ã€‚å› æ­¤ï¼Œå®é™…ç”Ÿäº§ç¯å¢ƒä¸­çš„DNSè§£ææ˜¯é‡‡ç”¨å±‚å±‚é€’è¿›ï¼Œå¤šçº§ç¼“å­˜ï¼Œé€’å½’æŸ¥è¯¢çš„æ–¹å¼è¿›è¡Œçš„ã€‚å†çœ‹ä¸‹å›¾ï¼š ä¸Šå›¾çœ‹ä¼¼å¤æ‚ï¼Œå®é™…ä¸Šåªæ˜¯æè¿°äº†ä¸‰ä¸ªå…³é”®è¯ï¼šå±‚å±‚é€’è¿›ï¼Œå¤šçº§ç¼“å­˜ï¼Œé€’å½’æŸ¥è¯¢ã€‚ å››.DNSè§£æè¿‡ç¨‹ä¸‹é¢æˆ‘ä»¬æ¥è§£é‡ŠåŸŸåè¦è§£ææˆæ­£ç¡®çš„IPåœ°å€ï¼Œè¦ç»è¿‡çš„å‡ ä¸ªé‡è¦è¿‡ç¨‹ã€‚ 1. æœ¬æœºhostsæ–‡ä»¶ æœ¬æœºhostsæ–‡ä»¶æ˜¯ä¼˜å…ˆçº§æœ€é«˜çš„åŸŸåIPæ˜ å°„è¡¨ï¼Œå¯¹äºMacæ“ä½œç³»ç»Ÿï¼Œè¿™ä¸ªæ–‡ä»¶åœ¨æ ¹ç›®å½•çš„etcæ–‡ä»¶å¤¹ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å°†åŸŸåä¸å¯¹åº”çš„IPå†™åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œåœ¨è¿›è¡ŒåŸŸåè§£ææ—¶ï¼Œé¦–å…ˆä¼šä»è¿™ä¸ªæ–‡ä»¶ä¸­æ‰¾ã€‚å¹¿æ’­IPå’Œæœ¬æœºIPå¯¹åº”çš„åŸŸåå®é™…ä¸Šå°±å®šä¹‰åœ¨è¿™é‡Œï¼Œå¦‚ä¸‹ï¼š 12127.0.0.1 localhost255.255.255.255 broadcasthost ä½ ä¹Ÿå¯ä»¥åœ¨å…¶ä¸­æ–°å¢ä»»æ„æ˜ å°„ï¼Œä¾‹å¦‚å°†huishao.ccçš„åŸŸåæ˜ å°„åˆ°127.0.0.1çš„æœ¬æœºIPï¼Œä¿å­˜åï¼Œåœ¨æµè§ˆå™¨å†è¾“å…¥huishao.ccï¼Œä½ å°†æ— æ³•å†è®¿é—®åˆ°ç²å°‘çš„åšå®¢ç½‘ç«™ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š æ›´å¤šæ—¶å€™ï¼Œhostsçš„æ­£ç¡®ç”¨æ³•æ˜¯å¼€å‘åº”ç”¨ç¨‹åºæ—¶ï¼Œæµ‹è¯•ç¯å¢ƒå’Œæ­£å¼ç¯å¢ƒå¯ä»¥å°†åŸŸåé…ç½®åˆ°ä¸åŒçš„IPï¼Œè¿™æ ·æ— éœ€åº”ç”¨ç¨‹åºä»£ç ä¸­åšé€»è¾‘ï¼Œåªéœ€è¦åˆ‡æ¢hostsæ–‡ä»¶å³å¯å®ç°ç¯å¢ƒçš„åˆ‡æ¢ã€‚ 2. æœ¬æœºåº”ç”¨ç¼“å­˜ æœ¬æœºåº”ç”¨ç¼“å­˜æ˜¯å¤šçº§ç¼“å­˜ä¸­çš„ç¬¬ä¸€çº§ï¼Œä¾‹å¦‚å½“æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­è®¿é—®è¿‡æŸä¸ªåŸŸååï¼Œå…¶è§£æçš„ç»“æœä¼šè¢«æµè§ˆå™¨ç¼“å­˜ä¸‹æ¥ï¼Œå½“æˆ‘ä»¬å†æ¬¡è®¿é—®è¿™ä¸ªåŸŸåæ—¶ï¼Œå…¶é¦–å…ˆä¼šæ£€æŸ¥æµè§ˆå™¨ç¼“å­˜ï¼Œå¦‚æœç¼“å­˜èƒ½å¤Ÿå‘½ä¸­æ­¤åŸŸåï¼Œåˆ™ç›´æ¥ä½¿ç”¨ï¼Œç¼“å­˜çš„æœ‰æ•ˆæ—¶é—´ä¼šå—TTLé…ç½®å½±å“ï¼ˆæˆ‘ä»¬åé¢ä¼šä»‹ç»ï¼‰ã€‚ 3. æœ¬æœºç³»ç»Ÿç¼“å­˜ ä¸æœ¬æœºåº”ç”¨ç¼“å­˜ç±»ä¼¼ï¼Œæ“ä½œç³»ç»Ÿä¸­ä¹Ÿä¼šæœ‰ä¸€ä»½åŸŸåè§£æçš„ç¼“å­˜ï¼Œå¦‚æœæœ¬æœºåº”ç”¨ç¼“å­˜ä¸­æ²¡æœ‰å‘½ä¸­ï¼Œä¼šä»æ“ä½œç³»ç»Ÿç¼“å­˜ä¸­æ£€æŸ¥æ˜¯å¦ä¹‹å‰æœ‰è¿‡æ­¤åŸŸåçš„è§£æè®°å½•ã€‚å¦‚æœèƒ½å¤Ÿå‘½ä¸­åˆ™ä¼šç›´æ¥ä½¿ç”¨ã€‚ 4. è·¯ç”±å™¨åŸŸåè§£æç¼“å­˜ å¦‚æœæœ¬æœºç³»ç»Ÿç¼“å­˜ä¾ç„¶æ²¡æœ‰å‘½ä¸­ï¼Œè€Œä½ çš„è®¾å¤‡åˆæ˜¯é€šè¿‡è·¯ç”±å™¨æ¥å…¥çš„å…¬ç½‘ï¼Œæ­¤æ—¶ä½ çš„åŸŸåè§£ææœåŠ¡å¾ˆå¤§å¯èƒ½æ˜¯è·¯ç”±å™¨æä¾›çš„ï¼Œå¯ä»¥æ‰“å¼€ç½‘ç»œè®¾ç½®çš„DNSä¸€æ ï¼Œè§‚å¯ŸDNSæœåŠ¡å™¨çš„åœ°å€ï¼Œå¦‚æœæ˜¯192.168.x.xç±»å‹å†…ç½‘åœ°å€ï¼Œåˆ™è¯´æ˜æ˜¯ç”±è·¯ç”±å™¨æ¥å®ŒæˆDNSè§£æäº†ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š è·¯ç”±å™¨å†…ï¼Œå®é™…ä¸Šä¹Ÿä¼šç¼“å­˜ä¸€å¼ DNSè§£æè¡¨ï¼Œä¼šä»å…¶ä¸­å¯»æ‰¾æ˜¯å¦æœ‰å¯ä»¥å‘½ä¸­çš„ç¼“å­˜ï¼Œå¦‚æœå­˜åœ¨å¹¶ä¸”æœªè¿‡æœŸï¼Œåˆ™ç›´æ¥ä½¿ç”¨ã€‚æœ‰æ—¶å€™ï¼Œä½ ä¼šå‘ç°ç”µè„‘å¯ä»¥ç›´æ¥ä½¿ç”¨IPè®¿é—®ç½‘ç«™ä½†æ˜¯æ— æ³•ä½¿ç”¨åŸŸåè¿›è¡Œè®¿é—®ï¼Œå¾ˆå¤§å¯èƒ½æ˜¯è·¯ç”±å™¨çš„DNSæœåŠ¡å‡ºé—®é¢˜äº†ï¼Œæœ€ç®€å•çš„è§£å†³æ–¹å¼å°±æ˜¯å°†é…ç½®çš„DNSæœåŠ¡å™¨IPåœ°å€æ”¹æˆå…¬å…±çš„ã€‚ 5. è®¿é—®æœ¬åœ°åŸŸåæœåŠ¡å™¨ å¦‚æœä»¥ä¸Šçš„ç¼“å­˜éƒ½æ²¡æœ‰å‘½ä¸­ï¼Œé‚£ä¹ˆé€»è¾‘ä¸Šæˆ‘ä»¬å°±éœ€è¦é€šè¿‡å¤–ç½‘çš„DNSæœåŠ¡æ¥è¿›è¡Œè§£æäº†ï¼Œé¦–å…ˆæœ¬åœ°æœåŠ¡å™¨ï¼ˆLDNSï¼‰æ¥è§£æåŸŸåï¼Œè¿™é‡Œçš„æœ¬åœ°æœåŠ¡å™¨æ˜¯æŒ‡åŸå¸‚æˆ–åŒºåŸŸçš„DNSæœåŠ¡å™¨ï¼Œä¸€èˆ¬å°±æœ‰è¿è¥å•†éƒ¨ç½²åœ¨å½“åœ°ï¼Œè·ç¦»è¿‘ï¼Œæ€§èƒ½å¥½ï¼Œå¹¶ä¸”ä¹Ÿæœ‰ç¼“å­˜æœºåˆ¶ï¼Œå‡ ä¹å¯ä»¥è¦†ç›–å¤§å¤šæ•°çš„åŸŸåè§£æè¯·æ±‚ã€‚ 6. è½¬å‘ä¸é€’å½’ å¦‚æœä½ è®¿é—®çš„åŸŸåæ¯”è¾ƒå†·é—¨ï¼Œæœ¬åœ°æœåŠ¡å™¨ä¾ç„¶æ— æ³•è§£æï¼Œåˆ™ä¼šè¿›è¡Œè½¬å‘ï¼Œå°†æ­¤è¯·æ±‚è½¬å‘åˆ°æ›´é«˜çº§çš„è¿è¥å•†DNSæœåŠ¡å™¨æˆ–è€…æ ¹DNSæœåŠ¡å™¨ï¼Œæ ¹DNSæœåŠ¡å™¨ä¼šæ ¹æ®åŸŸåæ¥è¿”å›é¡¶çº§çš„åŸŸåæœåŠ¡å™¨åœ°å€ï¼Œæœ¬åœ°æœåŠ¡å™¨å¯ä»¥ç»§ç»­å‘é¡¶çº§åŸŸåæœåŠ¡å™¨è¯·æ±‚è§£æã€‚å¦‚æ­¤é€’å½’è¿›è¡Œï¼Œç›´åˆ°è§£ææˆåŠŸï¼Œå†å°†IPåœ°å€ä¾æ¬¡è¿”å›åˆ°æˆ‘ä»¬çš„è®¾å¤‡ï¼Œå¹¶é€å±‚åšç¼“å­˜ï¼Œä»¥ä¾¿æˆ‘ä»¬ä¸‹æ¬¡è®¿é—®æ—¶å¯ä»¥å¿«é€Ÿå¾—åˆ°å“åº”ã€‚ ä¸Šé¢è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æœ‰æåˆ°æ ¹åŸŸåæœåŠ¡å™¨ï¼Œå…¶æ˜¯æœ€é«˜çº§åˆ«çš„åŸŸåæœåŠ¡å™¨ï¼Œå®ƒè´Ÿè´£è¿”å›é¡¶çº§åŸŸåæœåŠ¡å™¨ï¼Œç›®å‰å…¨çƒæœ‰13ä¸ªæ ¹åŸŸåæœåŠ¡å™¨ç«™ã€‚é¡¶çº§åŸŸåæœåŠ¡å™¨ç”¨æ¥é’ˆå¯¹æŸä¸ªé¡¶çº§åŸŸåè¿›è¡Œè§£æï¼Œä¾‹å¦‚.comé¡¶çº§åŸŸåï¼Œ.edué¡¶çº§åŸŸåï¼Œ.ccé¡¶çº§åŸŸåå’Œ.cné¡¶çº§åŸŸåç­‰ã€‚é¡¶çº§åŸŸåæœåŠ¡å™¨åœ¨è§£ææ—¶ä¼šå°†æŸ¥è¯¢åˆ°çš„ä¸»åŸŸåæœåŠ¡å™¨è¿”å›ã€‚ä¸»åŸŸåæœåŠ¡å™¨è´Ÿè´£æŸä¸ªåŒºåŸŸçš„åŸŸåè§£æï¼ŒåŒæ ·ï¼Œä¸»åŸŸåæœåŠ¡å™¨ä¼šé…å¥—è¾…åŠ©åŸŸåæœåŠ¡å™¨è¿›è¡Œå¤‡ä»½ä¸åˆ†æ‹…è´Ÿè½½ã€‚ äº”.DNSåè®®å‰é¢è¯´äº†è¿™ä¹ˆå¤šï¼Œéƒ½æ˜¯å®è§‚ä¸Šçš„è®¤è¯†ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬è¦è®¨è®ºä¸€äº›æ›´æ·±å…¥çš„ä¸œè¥¿äº†ã€‚è™½ç„¶å¯¹äºDNSæ˜¯å¹²ä»€ä¹ˆçš„ï¼Œè§£æçš„è¿‡ç¨‹æ˜¯æ€æ ·çš„æˆ‘ä»¬æœ‰äº†ä¸€äº›äº†è§£ã€‚ä½†æ˜¯DNSåè®®ç©¶ç«Ÿæ˜¯æ€ä¹ˆæ“ä½œçš„å‘¢ï¼ŸIPæ•°æ®æ˜¯æ€ä¹ˆå¾—åˆ°çš„ï¼Ÿæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨æ¥è¿›è¡ŒDNSè§£æä¹ˆï¼Ÿè¦äº†è§£è¿™äº›é—®é¢˜ï¼Œé¦–å…ˆéœ€è¦å¯¹DNSåè®®æœ¬èº«åšä¸ªäº†è§£ã€‚ DNSåè®®æ˜¯å·¥ä½œåœ¨åº”ç”¨å±‚çš„ä¸€ç§åè®®ï¼Œå…¨ç§°Domain Name Systemã€‚DNSåè®®æ˜¯åŸºäºUDPä¹‹ä¸Šå®ç°çš„ï¼Œå‰é¢è¯´è¿‡UDPæ˜¯å·¥ä½œåœ¨ä¼ è¾“å±‚çš„ä¸€ç§ç½‘ç»œåè®®ï¼Œç­‰æˆ‘ä»¬è¯´åˆ°å®ƒçš„æ—¶å€™å†æ·±å…¥æ¢è®¨ã€‚ç°åœ¨ä½ åªéœ€è¦çŸ¥é“ï¼ŒåŸºäºUDPä»»ä½•äººéƒ½å¯ä»¥å®ç°ä¸€ä¸ªDNSè§£ææœåŠ¡ã€‚DNSè§£æåˆ†ä¸ºä¸¤æ­¥ï¼Œé¦–å…ˆéœ€è¦å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€ä¸€ä¸ªDNSè¯·æ±‚æŠ¥æ–‡ï¼ŒæœåŠ¡å™¨æ”¶åˆ°æŠ¥æ–‡ï¼Œè§£æå®Œæˆåå†è¿”å›ä¸€ä¸ªDNSæŠ¥æ–‡ç»™å®¢æˆ·ç«¯ï¼Œæ­¤æŠ¥æ–‡ä¸­å°±åŒ…å«è§£æçš„æ•°æ®ã€‚ DNSåè®®è§„å®šå…¶è¯·æ±‚æŠ¥æ–‡ä¸å“åº”æŠ¥æ–‡çš„ç»“æ„æ˜¯ä¸€è‡´çš„ï¼Œéƒ½åŒ…å«Headerï¼ŒQuestionï¼ŒAnswerï¼ŒAuthorityï¼ŒAdditionalè¿™5ä¸ªéƒ¨åˆ†ã€‚ 1. Headeréƒ¨åˆ†Headeréƒ¨åˆ†çš„é•¿åº¦æ˜¯ä¸€å®šçš„ï¼Œå›ºå®šä¸º12ä¸ªå­—èŠ‚ã€‚DNSåè®®æ–‡æ¡£ä¸­æœ‰ä¸€å¼ å›¾ï¼Œå¾ˆå¥½çš„æè¿°äº†Headerçš„æ•°æ®ç»“æ„ï¼š IDï¼šIDå äº†ä¸¤ä¸ªå­—èŠ‚ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ ‡è¯†ç¬¦ï¼Œç”±å®¢æˆ·ç«¯è¯·æ±‚çš„æ—¶å€™å¡«å……ï¼ŒDNSæœåŠ¡å™¨è§£æåï¼Œä¼šå°†æ­¤IDè¿”å›ï¼Œç”¨æ¥è®©å®¢æˆ·ç«¯å°†å“åº”ä¸è¯·æ±‚å¯¹åº”èµ·æ¥ã€‚ é…ç½®å­—æ®µï¼šä¸Šå›¾ä¸­ç¬¬2è¡Œçš„éƒ½æ˜¯é…ç½®å­—æ®µï¼Œå…¶å äº†ä¸¤ä¸ªå­—èŠ‚ã€‚ QRå 1ä¸ºï¼Œè®¾ç½®ä¸º0è¡¨ç¤ºå½“å‰æ˜¯DNSè¯·æ±‚æŠ¥æ–‡ï¼Œè®¾ç½®ä¸º1è¡¨ç¤ºå½“å‰ä¸ºDNSå“åº”æŠ¥æ–‡ã€‚ Opcodeå 4ä½ï¼Œæ­¤å€¼ç”±è¯·æ±‚æŠ¥æ–‡è®¾ç½®ï¼Œå¹¶ä¸”è¢«å¤åˆ¶åˆ°å“åº”æŠ¥æ–‡è¿”å›ã€‚å…¶ç”¨æ¥è®¾ç½®æŸ¥è¯¢çš„ç±»å‹ï¼Œè®¾ç½®ä¸º0è¡¨ç¤ºæ ‡å‡†æŸ¥è¯¢ï¼Œå³ç”±åŸŸåè§£æå‡ºIPï¼Œè®¾ç½®ä¸º1è¡¨ç¤ºåå‘æŸ¥è¯¢ï¼Œå³ç”±IPåæŸ¥å‡ºåŸŸåï¼Œè®¾ç½®ä¸º2ç”¨æ¥æŸ¥è¯¢æœåŠ¡å™¨çš„çŠ¶æ€ï¼Œ3-15ä¸ºä¿ç•™å­—æ®µï¼Œä»¥å¾…åç»­ä½¿ç”¨ã€‚ AAå­—æ®µå 1ä½ï¼Œåªåœ¨è¿”å›çš„å“åº”æŠ¥æ–‡ä¸­æœ‰ï¼Œ0è¡¨ç¤ºè¿”å›æ•°æ®çš„æœåŠ¡å™¨ä¸æ˜¯æƒå¨æœåŠ¡å™¨ï¼Œ1è¡¨ç¤ºè¿”å›æ•°æ®çš„æœåŠ¡å™¨æ˜¯æƒå¨æœåŠ¡å™¨ã€‚éœ€è¦æ³¨æ„ï¼Œè¿”å›çš„å“åº”æŠ¥æ–‡ä¸­å¯èƒ½æœ‰å¤šä¸ªåº”ç­”ï¼Œæ­¤å­—æ®µè¡¨æ˜çš„æ˜¯ç¬¬ä¸€ä¸ªåº”ç­”çš„æœåŠ¡å™¨ç±»å‹ã€‚ TCå­—æ®µå 1ä½ï¼Œè¡¨ç¤ºæ­¤æŠ¥æ–‡æ˜¯å¦ç”±äºæ•°æ®çš„ä¼ è¾“å¤§å°è€Œè¢«æˆªæ–­ï¼Œå½“æ­¤å­—æ®µçš„ä¸º1æ—¶ï¼Œæ•°æ®ä¸å¯ä¿¡ã€‚ RDå­—æ®µå 1ä½ï¼Œè¯¥å€¼éœ€è¦åœ¨è¯·æ±‚æŠ¥æ–‡ä¸­è®¾ç½®ï¼Œå“åº”æŠ¥æ–‡ä¼šç›´æ¥å¤åˆ¶è¯¥å€¼ã€‚æ­¤å€¼è¡¨ç¤ºæ˜¯å¦å¸Œæœ›æœåŠ¡å™¨è¿›è¡Œé€’å½’æŸ¥è¯¢ã€‚ RAå­—æ®µå 1ä½ï¼Œå…¶åœ¨å“åº”æŠ¥æ–‡ä¸­è®¾ç½®ï¼Œè¡¨ç¤ºæœåŠ¡ç«¯æ˜¯å¦æ”¯æŒé€’å½’æŸ¥è¯¢ã€‚ Zå­—æ®µå 3ä½ï¼Œæ˜¯ä¿ç•™å­—æ®µã€‚ rcodeå­—æ®µå 4ä½ï¼Œæ˜¯å“åº”æŠ¥æ–‡çš„å“åº”ç ï¼Œ0è¡¨ç¤ºæ²¡æœ‰é”™è¯¯ï¼›1è¡¨ç¤ºè¯·æ±‚æ ¼å¼æœ‰è¯¯ï¼ŒæœåŠ¡ç«¯æ— æ³•è§£æï¼›2è¡¨ç¤ºæœåŠ¡å™¨å‡ºé”™ï¼›3è¡¨ç¤ºè¯·æ±‚çš„åŸŸåä¸å­˜åœ¨ï¼›4è¡¨ç¤ºæœåŠ¡å™¨ä¸æ”¯æŒè¿™ç±»è¯·æ±‚ï¼›5è¡¨ç¤ºæœåŠ¡å™¨æ‹’ç»æ­¤æ¬¡è¯·æ±‚ï¼›6-15æ˜¯ä¿ç•™å‚æ•°ã€‚ QDCOUNTï¼šå 16ä½ï¼Œè¡¨æ˜Questionéƒ¨åˆ†åŒ…å«çš„å®ä¾‹ä¸ªæ•°ï¼Œæ˜¯æ— ç¬¦å·æ•°ã€‚ ANCOUNTï¼šå 16ä½ï¼Œè¡¨æ˜Answeréƒ¨åˆ†åŒ…å«çš„å›ç­”ä¸ªæ•°ï¼Œæ˜¯æ— ç¬¦å·æ•°ã€‚ NSCOUNTï¼šå 16ä½ï¼Œè¡¨æ˜Authorityéƒ¨åˆ†åŒ…å«çš„æˆæƒæœåŠ¡å™¨æ•°é‡ï¼Œæ˜¯æ— ç¬¦å·æ•´æ•°ã€‚ ARCOUNTï¼šå 16ä½ï¼Œè¡¨æ˜Additionaléƒ¨åˆ†ä¸­åŒ…å«çš„èµ„æºè®°å½•æ•°é‡ï¼Œæ˜¯æ— ç¬¦å·æ•´æ•°ã€‚ 2. Questionéƒ¨åˆ†è¿™ä¸ªéƒ¨åˆ†ç”¨æ¥å®šä¹‰æŸ¥è¯¢çš„é—®é¢˜ï¼Œé—®é¢˜çš„ä¸ªæ•°åœ¨QDCOUNTæŒ‡æ˜ï¼Œé€šå¸¸åªä¼šæºå¸¦ä¸€ä¸ªé—®é¢˜ã€‚æ¯ä¸ªé—®é¢˜çš„æ ¼å¼å®šä¹‰å¦‚ä¸‹ï¼š QNAMEï¼šæ­¤éƒ¨åˆ†å­—èŠ‚æ•°ä¸å®šï¼Œæè¿°è¦æŸ¥è¯¢çš„åŸŸåã€‚åœ¨è§£æçš„æ—¶å€™ï¼Œè¿™éƒ¨åˆ†ä»¥0x00ç»“å°¾ã€‚éœ€è¦æ³¨æ„ï¼ŒåŸŸåé€šå¸¸ç”±ç¬¦å·â€œ.â€è¿›è¡Œåˆ†å‰²ï¼Œæ¯æ®µçš„é•¿åº¦ä¸å®šï¼ŒQNAMEæ¯æ®µçš„å¼€å¤´ä¼šå…ˆæŒ‡æ˜æ­¤æ®µçš„é•¿åº¦ï¼Œä»¥huishao.ccåŸŸåä¸ºä¾‹ï¼Œå…¶æ„é€ å‡ºçš„QNAMEéƒ¨åˆ†å¦‚ä¸‹ï¼š 0x07 0x68 0x75 0x69 0x73 0x68 0x61 0x6f 0x02 0x63 0x63 0x00 å…¶ä¸­æœ€åä¸€ä¸ªå­—èŠ‚0x00æ ‡è®°äº†QNAMEéƒ¨åˆ†çš„ç»“æŸï¼Œ0x07è¡¨ç¤ºç¬¬ä¸€æ®µçš„é•¿åº¦ä¸º7ä¸ªå­—èŠ‚ï¼Œå³0x68 0x75 0x69 0x73 0x68 0x61 0x6fæ˜¯ç¬¬ä¸€æ®µï¼Œé€šè¿‡æŸ¥è¯¢asciiç å¯¹ç…§è¡¨å¯çŸ¥ï¼Œè¿™æ®µæ•°æ®å°±æ˜¯huishaoï¼ŒåŒç†ï¼Œä¹‹åçš„ä¸€ä¸ªå­—èŠ‚ä¸º0x02ï¼Œè¡¨ç¤ºç¬¬äºŒæ®µçš„é•¿åº¦ä¸º2ä¸ªå­—èŠ‚ï¼Œ0x63å¯¹åº”asciiè¡¨ä¸­çš„å­—æ¯cï¼Œæœ€ç»ˆå¯ä»¥è§£æä¸ºhuishao.ccã€‚ QTYPEï¼šå ä¸¤ä¸ªå­—èŠ‚ï¼Œå¯¹åº”æŸ¥è¯¢çš„ç±»å‹ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š Typeï¼šæ„ä¹‰ å¯¹åº”çš„å€¼ Aï¼šiPv4ä¸»æœºåœ°å€ 1 NSï¼šæƒå¨åŸŸåæœåŠ¡å™¨ 2 MDï¼šé‚®ç®±åœ°å€ï¼ˆå¼ƒç”¨ï¼Œä½¿ç”¨MXï¼‰ 3 MFï¼šè½¬å‘é‚®ç®±ï¼ˆå¼ƒç”¨ï¼Œä½¿ç”¨MXï¼‰ 4 CNAMEï¼šè§„èŒƒçš„åˆ«å 5 SOAï¼šæ ‡è®°æƒå¨åŒºåŸŸå¼€å§‹ 6 MBï¼šé‚®ç®±åŸŸå 7 MGï¼šé‚®ç®±æˆå‘˜ 8 MRï¼šé‚®ç®±é‡å‘½ååŸŸå 9 NULLï¼šç©ºçš„ç±»å‹ 10 WKSï¼šæœåŠ¡æè¿° 11 PTRï¼šåŸŸåæŒ‡é’ˆ 12 HINFOï¼šä¸»æœºä¿¡æ¯ 13 MINFOï¼šé‚®ç®±æˆ–è€…é‚®ä»¶åˆ—è¡¨ä¿¡æ¯ 14 MXï¼šé‚®ä»¶äº¤æ¢ 15 TXTï¼šå­—ç¬¦ä¸² 16 AAAA: IPv6åŸŸå 28 ä¸Šé¢åˆ—ä¸¾çš„æŸ¥è¯¢ç±»å‹ä¸­ï¼Œæœ‰ä¸¤ä¸ªæˆ‘ä»¬éœ€è¦é¢å¤–å…³æ³¨ï¼ŒAå’ŒCNAMEï¼ŒAç±»å‹å³æ˜¯æˆ‘ä»¬æŸ¥è¯¢åŸŸåIPæ‰€è¦ä½¿ç”¨çš„ï¼ŒCNAMEåˆ«åæŠ€æœ¯ä¹Ÿå¾ˆå¸¸ç”¨ï¼Œåé¢ä¼šä»‹ç»ã€‚ QCLASSï¼šå ä¸¤ä¸ªå­—èŠ‚ï¼Œè¡¨æ˜æŸ¥è¯¢çš„ç±»åˆ«ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š CLASSï¼šæ„ä¹‰ å¯¹åº”çš„å€¼ INï¼šInternetæŸ¥è¯¢ 1 CSï¼šå¼ƒç”¨ï¼ŒRFCæŸ¥è¯¢ 2 CHï¼šthe CHOAS class 3 HSï¼šHesiod 4 è¿›è¡ŒDNSè§£ææ—¶ï¼Œåªéœ€è¦è®¾ç½®æˆINç±»å³å¯ã€‚ 3. Answeréƒ¨åˆ†è¿™éƒ¨åˆ†æ˜¯å“åº”çš„è¿”å›æ•°æ®ï¼Œå¯èƒ½åŒ…å«å¤šæ¡èµ„æºè®°å½•ï¼Œå…¶æ ¼å¼å¦‚ä¸‹ï¼š NAMEï¼šæ­¤è®°å½•æ‰€å±çš„åŸŸåï¼Œé•¿åº¦ä¸å®šï¼Œéœ€è¦æ³¨æ„ï¼Œè¿™ä¸€éƒ¨åˆ†å­˜æ”¾çš„å¯èƒ½æ˜¯çœŸæ­£çš„åŸŸåï¼ˆæ ¼å¼å’ŒQNAMEä¸€è‡´ï¼‰ï¼Œä¹Ÿå¯èƒ½æ˜¯æŒ‡é’ˆï¼ŒæŒ‡å‘çœŸæ­£å­˜æ”¾åŸŸåçš„å­—èŠ‚ä½ç½®ï¼Œç”šè‡³å¯ä»¥æ˜¯ä¸€éƒ¨åˆ†æ˜¯åŸŸåï¼Œä¸€éƒ¨åˆ†æ˜¯æŒ‡é’ˆã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯å¯ä»¥èŠ‚çœå“åº”æŠ¥æ–‡çš„æ•°æ®ç©ºé—´ï¼Œå½“æ£€æŸ¥åˆ°æŸä¸ªå­—èŠ‚çš„é«˜ä¸¤ä½ä¸º11æ—¶ï¼Œåˆ™æ­¤å­—èŠ‚åŠä¹‹åä¸€ä¸ªå­—èŠ‚å°±æ˜¯ä¸€ä¸ªæŒ‡é’ˆã€‚ä¾‹å¦‚å¯¹äºhuishao.ccåŸŸåçš„è§£æï¼Œå…¶å“åº”çš„å®Œæ•´çš„DNSæŠ¥æ–‡å¦‚ä¸‹ï¼ˆ16è¿›åˆ¶ï¼‰ï¼š b3 a4 81 80 00 01 00 01 00 00 00 00 07 68 75 6973 68 61 6f 02 63 63 00 00 01 00 01 c0 0c 00 0100 01 00 00 02 58 00 04 b9 c7 6d 99 å…¶ä¸­å¼€å¤´çš„12ä¸ªå­—èŠ‚ä¸ºHeaderéƒ¨ï¼Œéšåçš„16ä¸ªå­—èŠ‚ä¸ºQuestionéƒ¨ï¼Œåé¢çš„å³ä¸ºAnsweréƒ¨ï¼ŒAnsweréƒ¨åˆ†å¼€å¤´çš„c0å­—èŠ‚é«˜ä¸¤ä½ä¸º11ï¼Œè¡¨æ˜å…¶æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œå ä¸¤ä¸ªå­—èŠ‚ï¼Œc0ï¼Œ0cä¸¤ä¸ªå­—èŠ‚å°†å‰ä¸¤ä½çš„1å»æ‰åä¸ºåè¿›åˆ¶æ•°12ï¼Œè¡¨æ˜NAMEçš„çœŸå®å€¼åœ¨ç¬¬12ä¸ªå­—èŠ‚å¤„å¼€å§‹ï¼Œå³å¤ç”¨äº†QNAMEçš„æ•°æ®ã€‚ TYPEï¼šå ä¸¤ä¸ªå­—èŠ‚ï¼Œä¸QTYPEå®šä¹‰ä¸€è‡´ã€‚ CLASSï¼šå ä¸¤ä¸ªå­—èŠ‚ï¼Œä¸QCLASSå®šä¹‰ä¸€è‡´ã€‚ TTLï¼šå 4ä¸ªå­—èŠ‚ï¼Œæ­¤å­—æ®µéå¸¸é‡è¦ï¼Œæ ‡è®°äº†ç¼“å­˜çš„æœ‰æ•ˆæ—¶é•¿ï¼Œå•ä½æ˜¯ç§’ã€‚é¡ºä¾¿åˆ†æä¸€ä¸‹ä¸Šé¢çš„æ•°æ®ï¼Œæ­¤DNSè§£ææ•°æ®çš„ç¼“å­˜æœ‰æ•ˆæœŸä¸º0x0258ï¼Œå³600ç§’ï¼Œ10åˆ†é’Ÿã€‚ RDLENGTHï¼šå ä¸¤ä¸ªå­—èŠ‚ï¼Œè¡¨æ˜RDATAå­—æ®µçš„å­—èŠ‚æ•°ã€‚ RDATAï¼šçœŸæ­£çš„è§£ææ•°æ®ï¼Œä¸TYPEæœ‰å…³ï¼Œå¦‚æœæ˜¯IPv4åŸŸåè§£æï¼Œæ­¤å¤„ä¸ºè§£æçš„ç»“æœã€‚ 4. Authorityï¼ŒAdditionalè¿™ä¸¤éƒ¨åˆ†çš„æ•°æ®ç»“æ„ä¸Answeréƒ¨åˆ†å®Œå…¨ä¸€è‡´ï¼Œè§£ææ–¹å¼ä¹Ÿå®Œå…¨ä¸€è‡´ã€‚ å…­.çº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç»çŸ¥æ­¤äº‹è¦èº¬è¡Œé€šè¿‡å‰é¢çš„ä»‹ç»ï¼ŒDNSåè®®çš„å·¥ä½œåŸç†åº”è¯¥æ˜¯æ˜äº†äº†ï¼Œå¦‚æœéœ€è¦æ›´æ·±å…¥çš„äº†è§£ç»†èŠ‚ï¼Œå¯ä»¥é˜…è¯»å…¶å®˜æ–¹çš„æ–‡æ¡£ï¼š https://datatracker.ietf.org/doc/html/rfc1035 å½“ç„¶ï¼Œå¦‚æœä½ è¿˜æ˜¯æ„Ÿè§‰äº‘é‡Œé›¾é‡Œä¹Ÿæ²¡æœ‰å…³ç³»ï¼Œæˆ‘ä»¬é€šè¿‡å®è·µæ¥éªŒè¯ç†è®ºã€‚ 1.æŠ“ä¸ªæ´»ç‰©æ¥çœ‹çœ‹Wiresharkæ˜¯ä¸€ä¸ªç½‘ç»œå°åŒ…åˆ†æè½¯ä»¶ï¼Œèƒ½å¤Ÿæˆªå–ç½‘ç»œå°åŒ…ï¼Œå¯¹äºç½‘ç»œä¼ è¾“çš„æ•°æ®åŒ…è¿›è¡Œåˆ†æååˆ†æ–¹ä¾¿ã€‚æˆ‘ä»¬æ‰“å¼€æ­¤è½¯ä»¶åï¼Œæ‰¾ä¸€ä¸ªåŸŸåè¿›è¡Œè®¿é—®ï¼Œå³å¯æŠ“å–åˆ°å¯¹åº”çš„DNSæ•°æ®åŒ…ï¼Œä»¥huishao.ccä¸ºä¾‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¯ä»¥çœ‹åˆ°ï¼ŒWiresharkå¯ä»¥åˆ†æå‡ºæ­¤æ¬¡ç½‘ç»œäº¤äº’çš„æ—¶é—´ï¼Œå‘èµ·æ–¹IPï¼Œç›®æ ‡æ–¹IPï¼Œåè®®ç±»å‹ï¼Œæ•°æ®é•¿åº¦å’Œç›¸ä¿¡ä¿¡æ¯ã€‚åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œç¬¬ä¸€æ¡è®°å½•æ˜¯DNSè¯·æ±‚æŠ¥æ–‡ï¼Œç¬¬äºŒæ¡è®°å½•æ˜¯DNSå“åº”æŠ¥æ–‡ã€‚æˆ‘ä»¬å…ˆçœ‹çœ‹DNSè¯·æ±‚æŠ¥æ–‡çš„æ•°æ®ï¼š å¯ä»¥çœ‹åˆ°ï¼ŒWiresharkå°†æ¯ä¸€å±‚ç½‘ç»œåè®®éƒ½åˆ†æäº†å‡ºæ¥ï¼Œæˆ‘ä»¬å…ˆåªå…³æ³¨æœ€ä¸Šå±‚çš„Domian Name Systeméƒ¨åˆ†ï¼Œè¿™éƒ¨åˆ†çš„åå…­è¿›åˆ¶æ•°æ®æ˜¯ä¸Šå›¾ä¸­é€‰ä¸­çš„éƒ¨åˆ†ã€‚å¯ä»¥å‘ç°å…¶å’Œæˆ‘ä»¬ä¸Šé¢ä»‹ç»çš„åè®®æ ¼å¼æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚åœ¨çœ‹å“åº”æŠ¥æ–‡ï¼š æ•°æ®çš„æ ¼å¼ä¹Ÿæ˜¯å®Œå…¨å¯¹åº”çš„ï¼Œç†è®ºè¯šä¸æ¬ºæˆ‘å•Šã€‚ 2. æ‰‹åŠ¨å®ç°DNSè§£æä¸‹é¢ï¼Œæˆ‘ä»¬å¯ä»¥ä»¥huishao.ccåŸŸåä¸ºä¾‹ï¼Œæ‰‹åŠ¨ä½¿ç”¨UDPåè®®æ¥è¯•ä¸€è¯•å‘é€DNSè¯·æ±‚ä»¥åŠå¯¹è¯·æ±‚åˆ°çš„æ•°æ®è¿›è¡Œè§£æã€‚é¦–å…ˆå…ˆçœ‹å®Œæ•´çš„æµ‹è¯•ä»£ç ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243#include&lt;stdio.h&gt;#include&lt;string.h&gt;#include&lt;stdlib.h&gt;#include&lt;sys/socket.h&gt;#include&lt;arpa/inet.h&gt;#include&lt;netinet/in.h&gt;#include&lt;unistd.h&gt;// å®šä¹‰NDSæœåŠ¡å™¨çš„åœ°å€char *DNSServer = \"192.168.1.1\";// DNSæŠ¥æ–‡ä¸­æŸ¥è¯¢åŒºåŸŸçš„æŸ¥è¯¢ç±»å‹#define A 1#define CNAME 5/***DNSæŠ¥æ–‡é¦–éƒ¨**è¿™é‡Œä½¿ç”¨äº†ä½åŸŸ*/struct DNS_HEADER &#123; // 2å­—èŠ‚ unsigned short ID; // éœ€è¦æ³¨æ„ï¼Œå¯¹äºç»“æ„ä½“ä¸­çš„ä½åŸŸ æ•°æ®æ˜¯ä»ä½å­—èŠ‚å¼€å§‹å¡«å……çš„ // 1å­—èŠ‚ unsigned char RD :1; unsigned char TC :1; unsigned char AA :1; unsigned char Opcode :4; unsigned char QR :1; // 1å­—èŠ‚ unsigned char RCODE :4; unsigned char Z :3; unsigned char RA :1; // 2å­—èŠ‚ unsigned short QCOUNT; // 2å­—èŠ‚ unsigned short ANCOUNT; // 2å­—èŠ‚ unsigned short NSCOUNT; // 2å­—èŠ‚ unsigned short ARCOUNT;&#125;;/***DNSæŠ¥æ–‡ä¸­æŸ¥è¯¢é—®é¢˜åŒºåŸŸ 4ä¸ªå­—èŠ‚*/struct QUESTION &#123; unsigned short QTYPE;//æŸ¥è¯¢ç±»å‹ unsigned short QCLASS;//æŸ¥è¯¢ç±»&#125;;// è¯·æ±‚éƒ¨åˆ†çš„ç»“æ„typedef struct &#123; unsigned char *QNAME; struct QUESTION *question;&#125; QUERY;/***DNSæŠ¥æ–‡ä¸­å›ç­”åŒºåŸŸçš„å¸¸é‡å­—æ®µ 10ä¸ªå­—èŠ‚*/// éœ€è¦æ³¨æ„ï¼Œå› ä¸ºæ­¤ç»“æ„ä½“ä¸­æœ‰shortå’Œintç±»å‹ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶è®¾ç½®ä¸º1å­—èŠ‚å¯¹é½#pragma pack(1)struct R_DATA &#123; unsigned short TYPE; //è¡¨ç¤ºèµ„æºè®°å½•çš„ç±»å‹ unsigned short CLASS; //ç±» unsigned int TTL; //è¡¨ç¤ºèµ„æºè®°å½•å¯ä»¥ç¼“å­˜çš„æ—¶é—´ unsigned short RDLENGTH; //æ•°æ®é•¿åº¦&#125;;#pragma pack()/***DNSæŠ¥æ–‡ä¸­å›ç­”åŒºåŸŸçš„èµ„æºæ•°æ®å­—æ®µ*/struct RES_RECORD &#123; unsigned char *NAME;//èµ„æºè®°å½•åŒ…å«çš„åŸŸå struct R_DATA *resource;//èµ„æºæ•°æ® unsigned char *rdata;&#125;;// DNSè§£ææ–¹æ³•void DNS(unsigned char*);// åŸŸåè½¬æ¢æ–¹æ³•int ChangetoDnsNameFormat(unsigned char*, unsigned char*);/***å®ç°DNSæŸ¥è¯¢åŠŸèƒ½*/void DNS(unsigned char *host) &#123; // UDPç›®æ ‡åœ°å€ struct sockaddr_in dest; // DNSè¯·æ±‚çš„æ•°æ®ç»“æ„ struct DNS_HEADER dns = &#123;&#125;; printf(\"\\næ‰€éœ€è§£æåŸŸåï¼š%s\\n\", host); //å»ºç«‹åˆ†é…UDPå¥—ç»“å­— int s = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP); //IPv4 dest.sin_family = AF_INET; //53å·ç«¯å£ DNSæœåŠ¡å™¨ç”¨çš„æ˜¯53å·ç«¯å£ dest.sin_port = htons(53); // è®¾ç½®IP dest.sin_addr.s_addr = inet_addr(DNSServer);//DNSæœåŠ¡å™¨IP /*è®¾ç½®DNSæŠ¥æ–‡é¦–éƒ¨*/ dns.ID = (unsigned short) htons(getpid());//idè®¾ä¸ºè¿›ç¨‹æ ‡è¯†ç¬¦ dns.QR = 0; //æŸ¥è¯¢ dns.Opcode = 0; //æ ‡å‡†æŸ¥è¯¢ dns.AA = 0; //ä¸æˆæƒå›ç­” dns.TC = 0; //ä¸å¯æˆªæ–­ dns.RD = 1; //æœŸæœ›é€’å½’ dns.QCOUNT = htons(1); //1ä¸ªé—®é¢˜ // ä¸éœ€è¦çš„å­—æ®µç½®ä¸º0 dns.RA = 0; dns.Z = 0; dns.RCODE = 0; dns.ANCOUNT = 0; dns.NSCOUNT = 0; dns.ARCOUNT = 0; // è¿›è¡ŒæŸ¥è¯¢çš„åŸŸåå¤„ç† å…ˆç»™100ä¸ªå­—èŠ‚å¤§å° unsigned char *qname = malloc(100); // è½¬æ¢åä¼šå°†é•¿åº¦è¿”å› int nameLength = ChangetoDnsNameFormat(qname, host);//ä¿®æ”¹åŸŸåæ ¼å¼ // è¯·æ±‚ç»“æ„ QUERY question = &#123;&#125;; question.QNAME = qname; struct QUESTION qinfo = &#123;&#125;; qinfo.QTYPE = htons(A); //æŸ¥è¯¢ç±»å‹ä¸ºA qinfo.QCLASS = htons(1); //æŸ¥è¯¢ç±»ä¸º1 question.question = &amp;qinfo; // å®šä¹‰è¦å‘é€çš„UDPæ•°æ® å…ˆç»™65536ä¸ªå­—èŠ‚ unsigned char buf[65536]; // å¤åˆ¶DNSå¤´éƒ¨æ•°æ®åˆ°buf memcpy(buf, &amp;dns, sizeof(dns)); // ç§»åŠ¨å¤åˆ¶çš„æŒ‡é’ˆ unsigned char *point = buf + sizeof(dns); // å¤åˆ¶è¯·æ±‚çš„åŸŸååˆ°buf memcpy(point, question.QNAME, nameLength); // ç§»åŠ¨å¤åˆ¶çš„æŒ‡é’ˆ point = point + nameLength; // å¤åˆ¶è¦è§£æçš„åŸŸååˆ°buf memcpy(point, question.question, sizeof(*question.question)); // bufçš„æ€»é•¿åº¦ int length = sizeof(dns) + nameLength + sizeof(*question.question); //å‘DNSæœåŠ¡å™¨å‘é€DNSè¯·æ±‚æŠ¥æ–‡ printf(\"\\n\\nå‘é€æŠ¥æ–‡ä¸­...\"); if (sendto(s, (char*) buf, length, 0, (struct sockaddr*) &amp;dest,sizeof(dest)) &lt; 0) &#123; perror(\"å‘é€å¤±è´¥ï¼\"); &#125; printf(\"å‘é€æˆåŠŸï¼\\n\"); // ä»DNSæœåŠ¡å™¨æ¥å—DNSå“åº”æŠ¥æ–‡ unsigned char recvBuf[65536]; int i = sizeof dest; printf(\"æ¥æ”¶æŠ¥æ–‡ä¸­...\\n\"); recvfrom(s, (char*) recvBuf, 65536, 0, (struct sockaddr*) &amp;dest,(socklen_t*) &amp;i); if (length &lt; 0) &#123; perror(\"æ¥æ”¶å¤±è´¥ï¼\"); &#125; printf(\"æ¥æ”¶æˆåŠŸï¼\\n\"); // å°†æ¥æ”¶åˆ°çš„DNSæ•°æ®å¤´éƒ¨è§£æåˆ°ç»“æ„ä½“ struct DNS_HEADER recvDNS = *((struct DNS_HEADER *)recvBuf); printf(\"\\n\\nå“åº”æŠ¥æ–‡åŒ…å«: \"); printf(\"\\n %dä¸ªé—®é¢˜\", ntohs(recvDNS.QCOUNT)); printf(\"\\n %dä¸ªå›ç­”\", ntohs(recvDNS.ANCOUNT)); printf(\"\\n %dä¸ªæˆæƒæœåŠ¡\", ntohs(recvDNS.NSCOUNT)); printf(\"\\n %dä¸ªé™„åŠ è®°å½•\\n\\n\", ntohs(recvDNS.ARCOUNT)); // å¤´éƒ¨ï¼ŒåŸŸåéƒ¨åˆ†å’Œé—®é¢˜çš„é™æ€éƒ¨åˆ†é•¿åº¦ size_t headLength = sizeof(struct DNS_HEADER); size_t hostLength = strlen((const char*) qname) + 1; size_t qusetionLength = sizeof(struct QUESTION); // å®šä¹‰æŒ‡é’ˆï¼Œå°†ä½ç½®ç§»åŠ¨åˆ°æŠ¥æ–‡çš„Answeréƒ¨ unsigned char *reader = &amp;recvBuf[headLength + hostLength + qusetionLength]; /* **è§£ææ¥æ”¶æŠ¥æ–‡ */ // åŠ 2ä¸ªå­—èŠ‚ï¼Œæ˜¯å› ä¸ºè§£æçš„æ•°æ®ä¸­ï¼ŒåŸŸåé‡‡ç”¨çš„æ˜¯æŒ‡é’ˆæ–¹å¼ï¼Œå ä¸¤ä¸ªå­—èŠ‚(å®é™…æƒ…å†µè¿™é‡Œéœ€è¦åˆ¤æ–­æ˜¯å¦æ˜¯æŒ‡é’ˆè¿˜æ˜¯çœŸçš„åŸŸå) reader = reader + 2; // å°†Answeréƒ¨åˆ†çš„é™æ€æ•°æ®è§£æåˆ°ç»“æ„ä½“ struct R_DATA answer = *((struct R_DATA*) (reader)); printf(\"å›ç­”ç±»å‹ï¼š%x\\n\", ntohs(answer.TYPE)); printf(\"ç¼“å­˜æ—¶é—´ï¼š%dç§’\\n\",ntohl(answer.TTL)); //æŒ‡å‘å›ç­”é—®é¢˜åŒºåŸŸçš„èµ„æºæ•°æ®å­—æ®µ reader = reader + sizeof(struct R_DATA); //åˆ¤æ–­èµ„æºç±»å‹æ˜¯å¦ä¸ºIPv4åœ°å€ unsigned char *ip = NULL; if (ntohs(answer.TYPE) == A) &#123; //è§£æåˆ°çš„IPæ•°æ® æŒ‡é’ˆ ip = (unsigned char*) malloc(ntohs(answer.RDLENGTH)+1); for (int j = 0; j &lt; ntohs(answer.RDLENGTH); j++) &#123; ip[j] = reader[j]; &#125; ip[ntohs(answer.RDLENGTH)] = '\\0'; &#125; //æ˜¾ç¤ºæŸ¥è¯¢ç»“æœ if (ip) &#123; long *p; p = (long*) ip; // inet_ntoaç”¨æ¥è¿›è¡ŒIPè½¬æ¢ printf(\"IPv4åœ°å€:%s\\n\", inet_ntoa(*(struct in_addr*)ip)); &#125; return;&#125;/***ä»www.baidu.comè½¬æ¢åˆ°3www5baidu3com*/int ChangetoDnsNameFormat(unsigned char* dns, unsigned char* host) &#123; int lock = 0, i, length = 0; strcat((char*) host, \".\"); for (i = 0; i &lt; strlen((char*) host); i++) &#123; if (host[i] == '.') &#123; *dns++ = i - lock; length ++; for (; lock &lt; i; lock++) &#123; *dns++ = host[lock]; length ++; &#125; lock++; &#125; &#125; *dns++ = '\\0'; length ++; return length;&#125;int main(int argc, const char * argv[]) &#123; unsigned char hostname[100] = \"huishao.cc\"; //ç”±åŸŸåè·å¾—IPv4åœ°å€ï¼ŒAæ˜¯æŸ¥è¯¢ç±»å‹ DNS(hostname); return 0;&#125; ä¸Šé¢çš„ä»£ç æœ‰è¯¦ç»†çš„æ³¨é‡Šï¼Œä½ å¯ä»¥å°è¯•è¿è¡Œä¸‹è¿›è¡ŒåŸŸåè§£æï¼Œéœ€è¦æ³¨æ„ï¼Œä¸Šé¢å¡«å†™çš„192.168.1.1æ˜¯æœ¬åœ°è·¯ç”±å™¨çš„åŸŸåæœåŠ¡å™¨åœ°å€ï¼Œä½ éœ€è¦å°†å…¶æ›¿æ¢æˆè‡ªå·±çš„ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨é€šç”¨çš„åŸŸåè§£ææœåŠ¡å™¨ï¼Œå¦‚114.114.114.144ã€‚ä¸Šé¢çš„ä»£ç é‡‡ç”¨Cè¯­è¨€ç¼–å†™ï¼Œå› æ­¤åœ¨å¤„ç†æ•°æ®çš„æ—¶å€™ä¼šæœ‰ä¸€äº›å¤æ‚ï¼Œæœ‰äº›ç‚¹éœ€è¦æ³¨æ„ã€‚ 1. å…³äºç»“æ„ä½“ä½åŸŸç®€å•ç†è§£ï¼Œä½åŸŸå¯ä»¥è®©ç»“æ„ä½“ä¸­çš„æ•°æ®ä»¥Byteä¸ºå•ä½å·²ç»å­˜å‚¨ï¼Œä¾‹å¦‚ä¸Šé¢å®šä¹‰çš„DNS_HEADERç»“æ„ä½“ï¼Œæˆ‘ä»¬æŒ‰ç…§DNSåè®®çš„ç»“æ„å¯¹å…¶å†…æ•°æ®æ‰€å çš„ä½è¿›è¡Œäº†å®šä¹‰ï¼Œæœ‰ä¸€ç‚¹éœ€è¦é¢å¤–æ³¨æ„ï¼Œåœ¨å®šä¹‰ç»“æ„ä½“æ—¶ï¼Œä½åŸŸå­—æ®µçš„é¡ºåºä¸å®é™…å¡«å……çš„é¡ºåºæ˜¯ç›¸åçš„ï¼Œä½åŸŸçš„å¡«å……æ˜¯ä»ä½å­—èŠ‚å¼€å§‹çš„ï¼Œå¦‚ä¸Šä»£ç æ‰€ç¤ºï¼Œå¯¹äº1ä¸ªå­—èŠ‚çš„ä½åŸŸæ¥è¯´ï¼Œæˆ‘ä»¬å®šä¹‰çš„æ—¶å€™ï¼Œå…ˆå®šä¹‰çš„RDå­—æ®µï¼Œæœ€åå®šä¹‰çš„QRå­—æ®µï¼Œå®é™…åœ¨å­˜å‚¨æ•°æ®æ—¶ï¼Œè¿™ä¸€ä¸ªå­—èŠ‚çš„æœ€é«˜ä½ä¼šå­˜å‚¨QRï¼Œæœ€ä½ä½ä¼šå­˜å‚¨RDã€‚ 2. å…³äºå­—èŠ‚å¯¹é½åœ¨å®šä¹‰ç»“æ„ä½“æ—¶ï¼Œè¿˜æœ‰ä¸€ä¸ªç»†èŠ‚éœ€è¦æ³¨æ„ï¼Œå¦‚æœç»“æ„ä½“ä¸­çš„æ•°æ®å­—èŠ‚æ•°ä¸æ˜¯ä¸€è‡´çš„ï¼Œåˆ™å…¶åˆ›å»ºçš„å†…å­˜å¤§å°å¯èƒ½å’Œå®é™…æ‰€éœ€è¦çš„å¹¶ä¸ä¸€è‡´ï¼Œä¾‹å¦‚R_DATAç»“æ„ä½“ï¼Œå…¶ä¸­æœ‰intå’Œshortç±»å‹çš„æ•°æ®ï¼Œåˆ™å…¶ä¼šä»¥4å­—èŠ‚ä¸ºæ ‡å‡†è¿›è¡Œå¯¹é½ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨è®¾ç½®å…¶å¯¹é½ä½æ•°ï¼Œä¸ç„¶åç»­æ•°æ®å¡«å……æ—¶ä¼šå‡ºç°åå·®ã€‚ 3.ç½‘ç»œå­—èŠ‚åºä¸ä¸»æœºå­—èŠ‚åºç½‘ç»œå­—èŠ‚åºæ˜¯TCP/IPåè®®ä¸­å®šä¹‰çš„ä¸€ç§æ•°æ®æ ¼å¼ï¼Œå…¶é‡‡ç”¨çš„æ˜¯å¤§ç«¯ï¼ˆbig-endianï¼‰çš„æ’åºæ–¹å¼ï¼Œå³å¯¹äºä¸€ä¸ªå­—ï¼ˆä¸¤ä¸ªå­—èŠ‚ï¼‰çš„æ•°æ®ï¼Œä½å­—èŠ‚åœ¨å‰ï¼Œé«˜å­—èŠ‚åœ¨åã€‚è¿™ä¸æˆ‘ä»¬å¯è¯»çš„ä¸»æœºå­—èŠ‚åºåˆšå¥½æ˜¯ç›¸åçš„ï¼Œåœ¨Cè¯­è¨€ä¸­ï¼Œä½¿ç”¨htonså¯ä»¥æŠŠshortç±»å‹çš„æ•°æ®è¿›è¡Œç½‘ç»œå’Œä¸»æœºå­—èŠ‚åºçš„è½¬æ¢ï¼ŒhtonlæŠŠlongç±»å‹çš„æ•°æ®è¿›è¡Œç½‘ç»œå’Œä¸»æœºå­—èŠ‚åºçš„è½¬æ¢ã€‚ å¯ä»¥åœ¨å¦‚ä¸‹åœ°å€ä¸‹è½½åˆ°å®Œæ•´çš„ä¸Šè¿°ä»£ç ï¼š https://gitee.com/jaki/dns_c æ¸©é¦¨æç¤ºï¼Œä¸Šé¢ä»£ç ä¸­è§£æçš„åŸŸååªè¿”å›äº†ä¸€ä¸ªAç±»å‹çš„è§£æåº”ç­”ï¼Œå¦‚æœä½ è§£æå…¶ä»–åŸŸåï¼Œå¯èƒ½ä¼šæœ‰å¾ˆå¤šCNAMEç±»å‹çš„åº”ç­”ï¼Œåº”ç­”ä¸ªæ•°ä¹Ÿå¯èƒ½ä¸æ­¢ä¸€ä¸ªï¼Œä½ å¯ä»¥å°è¯•ä¸‹ä¼˜åŒ–ä¸‹ä»£ç ï¼Œå®Œæ•´çš„å®ç°DNSçš„è§£æé€»è¾‘ã€‚ ä¸ƒ. ç»“å°¾æœ¬ç¯‡åšå®¢åˆ°æ­¤å°±ç»“æŸäº†ï¼Œæˆ‘ç›¸ä¿¡ä½ å¯¹ä»åŸŸåè·å–åˆ°IPçš„è¿‡ç¨‹æœ‰äº†æ›´å¤šçš„è®¤è¯†ï¼Œå¦‚æœé‡åˆ°äº†åŸŸåè§£æçš„é—®é¢˜ï¼Œä½ åº”è¯¥æ˜ç™½å¦‚ä½•æŸ¥çœ‹å“åº”ç»“æœæ¥å®šä½é—®é¢˜äº†ï¼Œä½†æ˜¯ï¼Œè¿™åªæ˜¯æˆ‘ä»¬æ—¥å¸¸ä½¿ç”¨çš„ç½‘ç»œä¸­çš„ç¬¬ä¸€æ­¥ï¼Œç›®å‰æˆ‘ä»¬è¿åº”ç”¨å±‚çš„æ ¸å¿ƒéƒ½è¿˜æ²¡æœ‰æ¥è§¦åˆ°ï¼Œä¸ç§¯è·¬æ­¥ï¼Œæ— ä»¥è‡³åƒé‡Œï¼Œä¸å›å…±å‹‰ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQï¼š316045346","categories":[{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"http://huishao.cc/categories/è®¡ç®—æœºç½‘ç»œ/"}],"tags":[],"keywords":[{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"http://huishao.cc/categories/è®¡ç®—æœºç½‘ç»œ/"}]},{"title":"ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ17ï¼‰â€”â€”BMP180æ•°å­—å‹åŠ›ä¼ æ„Ÿå™¨åº”ç”¨","slug":"430ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ17ï¼‰â€”â€”BMP180æ•°å­—å‹åŠ›ä¼ æ„Ÿå™¨åº”ç”¨","date":"2021-09-24T16:00:00.000Z","updated":"2021-09-25T11:35:57.141Z","comments":true,"path":"2021/09/25/430ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ17ï¼‰â€”â€”BMP180æ•°å­—å‹åŠ›ä¼ æ„Ÿå™¨åº”ç”¨/","link":"","permalink":"http://huishao.cc/2021/09/25/430ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ17ï¼‰â€”â€”BMP180æ•°å­—å‹åŠ›ä¼ æ„Ÿå™¨åº”ç”¨/","excerpt":"","text":"ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ17ï¼‰â€”â€”BMP180æ•°å­—å‹åŠ›ä¼ æ„Ÿå™¨åº”ç”¨ä¸€.BMP180ä½¿ç”¨è¯´æ˜BMP180æ˜¯ä¸€æ¬¾é«˜çº§çš„æ¸©åº¦æ°”å‹ä¼ æ„Ÿå™¨ï¼Œé€šè¿‡æµ‹é‡çš„æ°”å‹å€¼ä¹Ÿå¯ä»¥è®¡ç®—å‡ºå½“å‰æµ·æ‹”é«˜åº¦ã€‚å…¶å‹åŠ›æµ‹é‡èŒƒå›´ä¸º300-1100hPaï¼Œå¯¹åº”çš„æµ·æ‹”é«˜åº¦ä¸ºæ­£9000m-è´Ÿ500mã€‚å·¥ä½œç”µå‹åœ¨1.8Våˆ°3.6Vä¹‹é—´ã€‚ä½“ç§¯å°ï¼Œç²¾åº¦é«˜ï¼Œé‡‡ç”¨I2Cæ¥å£ï¼Œä½¿ç”¨éå¸¸æ–¹ä¾¿ã€‚BMP180ä¼ æ„Ÿå™¨åœ¨GPSå¯¼èˆªï¼Œå¤©æ°”æ£€æµ‹ï¼Œæµ·æ‹”æµ‹é‡å’Œå‚ç›´æ–¹å‘é€Ÿåº¦æ£€æµ‹ç­‰æ–¹é¢æœ‰å¹¿æ³›çš„åº”ç”¨ã€‚æœ¬å®éªŒï¼Œæˆ‘ä»¬å°è¯•ä½¿ç”¨æ ‘è“æ´¾çš„I2Cæ¥å£æ¥è¯»å–BMP180çš„æ¸©åº¦å’Œæ°”å‹å€¼ï¼Œå¹¶è¿›è¡Œæµ·æ‹”é«˜åº¦çš„è®¡ç®—ã€‚ ç›¸å¯¹äºæœ¬ç³»åˆ—åšå®¢å‰é¢ä¼ æ„Ÿå™¨å®éªŒæ¡ˆä¾‹ï¼ŒBMP180çš„ä½¿ç”¨ç•¥å¾®å¤æ‚ã€‚åœ¨ç¼–å†™ä¸€æ¬¾ä¼ æ„Ÿå™¨çš„é©±åŠ¨ä»£ç ä¹‹å‰ï¼Œé¦–å…ˆéœ€è¦é˜…è¯»å¯¹åº”çš„èŠ¯ç‰‡æ‰‹å†Œã€‚BMP180æ•°æ®æ‰‹å†Œå¯ä»¥åœ¨å¦‚ä¸‹åœ°å€æ‰¾åˆ°ï¼Œæ­¤æ‰‹å†Œæœ‰è¯¦ç»†çš„BMP180çš„ä½¿ç”¨æ–¹æ³•åŠæ¸©åº¦æ°”å‹æ•°å€¼çš„è®¡ç®—å…¬å¼ã€‚ https://www.oracle.com/webfolder/technetwork/tutorials/obe/java/RaspberryPi_I2C/files/BST-BMP180-DS000-09.pdf æœ¬æ¬¡å®éªŒä½¿ç”¨çš„BMP180ä¼ æ„Ÿå™¨å…ƒä»¶å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¯ä»¥çœ‹åˆ°æ­¤å…ƒä»¶æœ‰5ä¸ªå¼•è„šï¼Œå…¶ä¸­VCCå¼•è„šå¯ä»¥ä¸åšä½¿ç”¨ï¼ŒSCLå’ŒSDAå¼•è„šæ˜¯I2Cæ€»çº¿é€šä¿¡å¼•è„šï¼Œ3.3å’ŒGNDç”¨æ¥æ¥ç”µæºæ­£è´Ÿæã€‚ 1.1 ä½¿ç”¨æ ¡å‡†æ•°æ®å¯¹æ¸©åº¦å’Œæ°”å‹è¿›è¡Œè¡¥å¿æ ¡å‡†BMP180çš„å‹åŠ›å’Œæ¸©åº¦æ•°æ®ï¼Œå¿…é¡»é€šè¿‡ä¼ æ„Ÿå™¨çš„æ ¡å‡†æ•°æ®è¿›è¡Œè¡¥å¿è®¡ç®—ï¼Œæ ¡å‡†æ•°æ®å¯ä»¥é€šè¿‡è¯»å–å…¶å†…éƒ¨EEPROMå­˜å‚¨å™¨æ¥è·å–ï¼ŒEEPROM (Electrically Erasable Programmable read only memory)åˆç§°ä¸ºE2PROMï¼Œå³å¸¦ç”µå¯æ“¦å¯ç¼–ç¨‹åªè¯»å­˜å‚¨å™¨ï¼Œç­‰ä¸‹æˆ‘ä»¬ä¼šä»‹ç»æ ¡å‡†æ•°æ®çš„è¯»å–æ–¹æ³•ã€‚ BMP180é™¤äº†æ‹¥æœ‰å‹åŠ›æ¸©åº¦ç‰©ç†ä¼ æ„Ÿå™¨å¤–ï¼Œè¿˜åŒ…å«E2PROMå­˜å‚¨æ¨¡å—ï¼ŒADCæ¨¡æ•°è½¬æ¢æ¨¡å—å’Œæ§åˆ¶å•å…ƒç­‰ï¼Œæ ¸å¿ƒç”µè·¯å›¾å¦‚ä¸‹ï¼š E2PROMå­˜å‚¨å™¨ä¸­å…±å­˜å‚¨176ä½æ•°æ®ï¼Œè¿™176ä½æ•°æ®è¢«åˆ†ä¸º11ä¸ªå­—ï¼Œå³11ä¸ªæ ¡å‡†ç³»æ•°ï¼Œæ¯ä¸ªæ ¡å‡†ç³»æ•°ä¸º2ä¸ªå­—èŠ‚16ä½æ•°æ®ã€‚åœ¨è®¡ç®—æ¸©åº¦å’Œæ°”å‹ä¹‹å‰ï¼Œéœ€è¦å…ˆå°†è¿™11ä¸ªæ ¡å‡†ç³»æ•°è·å–åˆ°ï¼Œä¸‹å›¾åˆ—å‡ºäº†ä½¿ç”¨I2Cè®¿é—®çš„å¯„å­˜å™¨åœ°å€ï¼š éœ€è¦æ³¨æ„ï¼Œåœ¨è¿™11ä¸ªæ ¡å‡†ç³»æ•°ä¸­ï¼ŒAC4ï¼ŒAC5å’ŒAC6è¿™3ä¸ªæ˜¯æ— ç¬¦å·æ•´æ•°ï¼Œå…¶ä»–çš„éƒ½æ˜¯æœ‰ç¬¦å·çš„æ•´æ•°ï¼Œå¯¹äºæœ‰ç¬¦å·çš„æ•´æ•°ï¼Œå¯„å­˜å™¨ä¸­æœ¬èº«å­˜å‚¨çš„æ˜¯è¡¥ç ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶è½¬æ¢æˆåŸç æ•°æ®ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142#coding:utf-8import smbus# å®šä¹‰BMP180è®¾å¤‡åœ°å€deviceAddress = 0x77# æœ‰ç¬¦å·æ•°çš„è¡¥ç è½¬æ¢def getInt(data): r = data # ç¬¬1ä½ä¸º1è¡¨ç¤ºæ˜¯è´Ÿæ•° # å¯¹è´Ÿæ•°çš„è¡¥ç å†å–è¡¥ç å³å¯å¾—åˆ°æºç  if (data &amp; 0x8000) != 0: d = data ^ 0xffff d = d + 1 r = -d return r# å°è£…çš„è·å–E2PROMå­˜å‚¨å™¨ä¸­æ•°æ®çš„æ–¹æ³•# signå‚æ•°è¡¨ç¤ºæ˜¯å¦æ˜¯æœ‰ç¬¦å·æ•°def readCalibrate(adrList, index, sign): value = (adrList[index] &lt;&lt; 8) + adrList[index + 1] if sign: return getInt(value) else: return value# è·å–E2PROMå­˜å‚¨å…¶çš„æ•°æ®# read_i2c_block_dataä¸ºi2Cè¯»å–ä¸€å—æ•°æ®çš„æ–¹æ³•ï¼Œç¬¬2ä¸ªå‚æ•°ä¸ºå¯„å­˜å™¨åœ°å€ï¼Œç¬¬3ä¸ªå‚æ•°ä¸ºè¯»å–çš„å­—èŠ‚æ•°calibrationList = bus.read_i2c_block_data(deviceAddress, 0xAA, 22)# è·å–éœ€è¦çš„æ ¡å‡†ç³»æ•°AC1 = readCalibrate(calibrationList, 0, True)AC2 = readCalibrate(calibrationList, 2, True)AC3 = readCalibrate(calibrationList, 4, True)AC4 = readCalibrate(calibrationList, 6, False)AC5 = readCalibrate(calibrationList, 8, False)AC6 = readCalibrate(calibrationList, 10, False)B1 = readCalibrate(calibrationList, 12, True) B2 = readCalibrate(calibrationList, 14, True)MB = readCalibrate(calibrationList, 16, True)MC = readCalibrate(calibrationList, 18, True)MD = readCalibrate(calibrationList, 20, True) ä¸Šé¢ä»£ç ä¸­deviceAddressä¸ºBMP180è¿æ¥ä¸ŠI2Cæ€»çº¿åçš„è®¾å¤‡åœ°å€ï¼Œåé¢åœ¨è¿çº¿æ—¶ï¼Œæˆ‘ä»¬å†ä»‹ç»å¦‚ä½•å¾—åˆ°ã€‚read_i2c_block_dataå‡½æ•°ç”¨æ¥è¯»å–ä¸€å—æ•°æ®ï¼Œä»èŠ¯ç‰‡æ‰‹å†Œå¯çŸ¥ï¼ŒE2PROMå­˜å‚¨å™¨æ•°æ®åœ°å€çš„èµ·å§‹æ˜¯0xAAï¼Œä¸”æ˜¯è¿ç»­çš„ï¼Œæˆ‘ä»¬ç›´æ¥å°†22ä¸ªå­—èŠ‚å…¨éƒ¨è¯»å‡ºå³å¯ã€‚ 1.2 æµ‹é‡æ¸©åº¦ä¸å‹åŠ›æ•°å€¼BMP180å¯¹æ¸©åº¦å’Œå‹åŠ›çš„æµ‹é‡é€»è¾‘éå¸¸ç®€å•ï¼Œå…ˆå‘å‡ºæµ‹é‡æŒ‡ä»¤ï¼Œä¹‹åç­‰å¾…ä¸€å®šçš„æ•°æ®è½¬æ¢æ—¶é—´ï¼Œä¹‹åå³å¯ç›´æ¥é€šè¿‡I2Cæ€»çº¿æ¥è¯»å–æµ‹é‡æ•°æ®ã€‚æµ‹é‡æµç¨‹å¦‚ä¸‹ï¼š åœ¨ä¸Šé¢çš„æµç¨‹å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œå‘é€æµ‹é‡æ¸©åº¦æŒ‡ä»¤åï¼Œç­‰å¾…4.5msåå³å¯è¯»å–æ¸©åº¦æ•°æ®ï¼Œä¹‹åå‘é€æµ‹é‡å‹åŠ›æŒ‡ä»¤ï¼Œç­‰å¾…ä¸€æ®µæ—¶é—´åï¼Œå³å¯è·å–å‹åŠ›æ•°æ®ï¼Œæ‹¿åˆ°åŸå§‹çš„æ•°æ®åé€šè¿‡ä¸€å®šçš„è®¡ç®—æ–¹å¼ï¼Œå³å¯ç®—å‡ºæœ€ç»ˆçš„ç‰©ç†é‡ã€‚éœ€è¦æ³¨æ„ï¼Œæµ‹é‡å‹åŠ›æ‰€éœ€è¦ç­‰å¾…çš„è½¬æ¢æ—¶é—´ä¸é‡‡æ ·ç²¾åº¦æœ‰å…³ã€‚ é€šè¿‡é€‰æ‹©ä¸åŒçš„é‡‡æ ·ç²¾åº¦ï¼Œæˆ‘ä»¬å¯ä»¥è®©BMP180å·¥ä½œåœ¨æœ€é€‚åˆçš„åœºæ™¯ä¸­ï¼Œå³å®ç°åŠŸè€—ï¼Œæ€§èƒ½å’Œæµ‹é‡é€Ÿåº¦çš„æŒ‰éœ€è°ƒæ•´ã€‚é‡‡æ ·ç²¾åº¦æ¨¡å¼å¯é€‰çš„æœ‰å¦‚ä¸‹å‡ ç§ï¼š å¯ä»¥çœ‹åˆ°ï¼ŒåŠŸè€—è¶Šä½çš„æ¨¡å¼(Mode)ï¼Œé‡‡æ ·æ•°è¶Šå°‘(Internal number of samples)ï¼Œè½¬æ¢é€Ÿåº¦è¶Šå¿«(Conversion time)ï¼Œå™ªå£°è¶Šå¤§(RMS noise)ï¼Œç²¾åº¦è¶Šå·®ã€‚åŠŸè€—çš„é…ç½®å‚æ•°ç”±oversampling_settingå†³å®šï¼Œåé¢æˆ‘ä»¬ä¼šç”¨åˆ°å®ƒã€‚ 1.3 è®¡ç®—æ¸©åº¦å’Œå‹åŠ›æ•°æ®çš„å…¨è¿‡ç¨‹ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»äº†è§£äº†BMP180çš„ä¸€äº›ä½¿ç”¨ç»†èŠ‚ï¼Œåªéœ€è¦æŒ‰ç…§èŠ¯ç‰‡æ‰‹å†Œçš„æ­¥éª¤æ¥æµ‹é‡å’Œè®¡ç®—å³å¯å¾—åˆ°ç‰©ç†æ•°æ®ã€‚å®Œæ•´çš„è¿‡ç¨‹ä¸‹å›¾æ‰€ç¤ºï¼š å¯ä»¥çœ‹åˆ°ï¼Œä¸Šé¢æµç¨‹å›¾ä»Startå¼€å§‹åï¼Œä¸€å…±æœ‰6ä¸ªéœ€è¦åšçš„æ­¥éª¤ï¼Œå…¶ä¸­æœ€åä¸€æ­¥æ˜¯å±•ç¤ºæ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥çœç•¥æ‰ï¼Œè¿˜å‰©ä¸‹5ä¸ªæ ¸å¿ƒæ­¥éª¤ã€‚ ç¬¬ä¸€æ­¥ï¼šè¯»å–æ ¡å‡†ç³»æ•°æ•°æ® è¿™ä¸€æ­¥å‰é¢æˆ‘ä»¬å·²ç»å®Œæˆã€‚ ç¬¬äºŒæ­¥ï¼šè¯»å–å°šæœªè¿›è¡Œè¡¥å¿è¿ç®—çš„æ¸©åº¦æ•°å€¼ é¦–å…ˆé€šè¿‡I2Cæ€»çº¿å‘åœ°ä½ä¸º0xF4çš„å¯„å­˜å™¨å†™å…¥0x2Eçš„æŒ‡ä»¤æ•°æ®ï¼Œç­‰å¾…4.5msåï¼Œ0xF6ï¼ˆMSBï¼‰å’Œ0xF7ï¼ˆLSBï¼‰å¯„å­˜å™¨çš„å€¼ï¼Œæœ€ç»ˆè®¡ç®—å‡ºæœªè¡¥å¿çš„æ¸©åº¦æ•°å€¼ä¸ºï¼š UT = MSB &lt;&lt; 8 + LSB ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344#coding:utf-8import smbusimport time# å®šä¹‰BMP180è®¾å¤‡åœ°å€deviceAddress = 0x77# é€šè¿‡I2Cè¯»å–è®¾å¤‡æŸä¸ªå¯„å­˜å™¨çš„æ•°æ®# regAdr å¯„å­˜å™¨åœ°å€def readByte(device, regAdr): return bus.read_byte_data(device, regAdr)# è¯»å–ä¸€ä¸ªå­—çš„æ•°æ®def readWord(device, regAdr): high = bus.read_byte_data(device, regAdr) low = bus.read_byte_data(device, regAdr + 1) res = (high &lt;&lt; 8) + low return res# å†™å…¥ä¸€ä¸ªå­—èŠ‚çš„æ•°æ®def writeByte(device, regAdr, data): bus.write_byte_data(device, regAdr, data)# æœ‰ç¬¦å·æ•°çš„è¡¥ç è½¬æ¢def getInt(data): r = data # ç¬¬1ä½ä¸º1è¡¨ç¤ºæ˜¯è´Ÿæ•° # å¯¹è´Ÿæ•°çš„è¡¥ç å†å–è¡¥ç å³å¯å¾—åˆ°æºç  if (data &amp; 0x8000) != 0: d = data ^ 0xffff d = d + 1 r = -d return r# è·å–åŸå§‹çš„æ¸©åº¦æ•°æ®ï¼ˆæœªè¡¥å¿ï¼‰def getTemperature(): # å†™å…¥æŒ‡ä»¤ writeByte(deviceAddress, 0xF4, 0x2E) # ç­‰å¾…æ¸©åº¦æ•°æ®è½¬æ¢ time.sleep(0.005) # è¯»å–çš„æ•°æ®ä¸ºæœ‰ç¬¦å·æ•° value = readWord(deviceAddress, 0xF6) # ç¬¦å·å¤„ç† return getInt(value) ç¬¬ä¸‰æ­¥ï¼šè·å–æœªè¡¥å¿çš„å‹åŠ›æ•°æ® ä¸è·å–æ¸©åº¦çš„åŸå§‹æ•°æ®ç±»ä¼¼ï¼Œé¦–å…ˆå‘0xF4å¯„å­˜å™¨å†™å…¥æ•°æ®0x34+(oss&lt;&lt;6)ï¼Œå…¶ä¸­å‚æ•°osså³ä¸ºsoftware_oversampling_settingï¼Œå³æˆ‘ä»¬å‰é¢æåˆ°çš„é‡‡æ ·ç²¾åº¦å‚æ•°ï¼Œæ ¹æ®éœ€è¦é€‰æ‹©å³å¯ã€‚ä¹‹åç­‰å¾…ä¸€å®šçš„è½¬æ¢æ—¶é—´ï¼Œæ­¤æ—¶é—´ä¸osså‚æ•°çš„é€‰æ‹©æœ‰å…³ï¼Œä¸Šé¢è¡¨ä¸­å·²ç»åˆ—å‡ºã€‚å†è¯»å–0xF6ï¼ˆMSBï¼‰ï¼Œ0xF7ï¼ˆLSBï¼‰å’Œ0xF8ï¼ˆXLSBï¼‰çš„æ•°æ®ï¼Œæœ€åä½¿ç”¨å¦‚ä¸‹è®¡ç®—æ–¹å¼å¾—åˆ°åŸå§‹å‹åŠ›æ•°æ®ï¼š UP = (MSB&lt;&lt;16 + LSB&lt;&gt; (8 - oss) ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345678910111213# å®šä¹‰é‡‡æ ·ç²¾åº¦ï¼Œè¿™é‡Œå–è¶…é«˜åˆ†è¾¨ç‡OSS = 3# è·å–åŸå§‹çš„å‹åŠ›æ•°æ® ï¼ˆæœªè¡¥å¿ï¼‰def getPressure(): # å†™å…¥æŒ‡ä»¤ writeByte(deviceAddress, 0xF4, 0x34 + (OSS &lt;&lt; 6)) time.sleep(0.026) MSB = readByte(deviceAddress, 0xF6) LSB = readByte(deviceAddress, 0xF7) XLSB = readByte(deviceAddress, 0xF8) value = ((MSB &lt;&lt; 16) + (LSB &lt;&lt; 8) + XLSB) &gt;&gt; (8 - OSS) return value ç¬¬å››æ­¥ï¼šè®¡ç®—çœŸå®çš„ç‰©ç†æ¸©åº¦å€¼ ä½¿ç”¨å¦‚ä¸‹å…¬å¼è®¡ç®—çœŸæ­£çš„ç‰©ç†æ¸©åº¦å€¼ï¼š X1 = (UT - AC6) * AC5 / (2^15) X2 = MC * (2^11) / (X1 + MD) B5 = X1 + X2 T = (B5 + 8) / (2^4) ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345678import math# è®¡ç®—çœŸå®çš„æ¸©åº¦def calculateTemperature(data): X1 = ((data - AC6) * AC5) / math.pow(2, 15) X2 = (MC * math.pow(2, 11)) / (X1 + MD) B5 = X1 + X2 T = (B5 + 8) / math.pow(2, 4) return T / 10.0 éœ€è¦æ³¨æ„ï¼Œæœ€ç»ˆè®¡ç®—çš„åˆ°çš„æ¸©åº¦æ•°å€¼ä¸º0.1æ‘„æ°åº¦å•ä½ï¼Œè½¬æ¢æˆæ‘„æ°åº¦ç›´æ¥é™¤ä»¥10å³å¯ã€‚ ç¬¬5æ­¥ï¼šè®¡ç®—çœŸå®çš„ç‰©ç†æ°”å‹å€¼ å…¶ä»–æ•°æ®çš„è®¡ç®—ç›¸å¯¹å¤æ‚ï¼Œå…¬å¼å¦‚ä¸‹ï¼š B6 = B5 - 4000 X1 = (B2 (B6 B6 / 2^12)) / 2^11 X2 = AC2 * B6 / 2^11 X3 = X1 + X2 B3 = (((AC1 * 4 + X3) &lt;&lt; OSS) + 2) / 4 X1 = AC3 * B6 / 2^13 X2 = (B1 (B6 B6 / 2^12)) / 2^16 X3 = ((X1 + X2) + 2) /2 ^2 B4 = AC4 *(UNSIGNED LONG)(X3 + 32768) / 2^15 B7 = ((UNSIGNED LONG)UP - B3) * (50000 &gt;&gt; OSS) å¦‚æœB7å°äº0x80000000ï¼Œåˆ™ P = (B7 2) / B4 å¦åˆ™ P = (B7 / B4) 2 X1 = (P / 2^8) * (P / 2^8) X2 = (-7357 * P) / 2^16 P = P + (X1 + X2 + 3791) / 2^4 ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425# è®¡ç®—çœŸå®çš„æ°”å‹def calculatePressure(temp, data): X1 = ((temp - AC6) * AC5) / math.pow(2, 15) X2 = (MC * math.pow(2, 11)) / (X1 + MD) B5 = X1 + X2 B6 = B5 - 4000 X1 = (B2 * (B6 * B6 &gt;&gt; 12)) &gt;&gt; 11 X2 = AC2 * B6 &gt;&gt; 11 X3 = X1 + X2 B3 = (((AC1 * 4 + X3) &lt;&lt; OSS) + 2) &gt;&gt; 2 X1 = (AC3 * B6) &gt;&gt; 13 X2 = (B1 * (B6 * B6 &gt;&gt; 12)) &gt;&gt; 16 X3 = ((X1 + X2) + 2) &gt;&gt; 2 B4 = AC4 * (X3 + 32768) &gt;&gt; 15 B7 = (data - B3) * (50000 &gt;&gt; OSS) if (B7 &lt; 0x80000000): P = (B7 * 2) / B4 else: P = (B7 / B4) * 2 X1 = (P &gt;&gt; 8) * (P &gt;&gt; 8) X1 = (X1 * 3038) &gt;&gt; 16 X2 = (-7357 * P) &gt;&gt; 16 P = P + ((X1 + X2 + 3791) &gt;&gt; 4) # å•ä½ä¸ºPa è½¬æ¢ä¸ºhPaé™¤ä»¥100å³å¯ return P /100.0 äºŒ. å®éªŒ-ä½¿ç”¨BMP180æµ‹é‡æ¸©åº¦ã€æ°”å‹å’Œæµ·æ‹”é«˜åº¦é€šè¿‡å‰é¢çš„ä»‹ç»ï¼Œä¸€äº›æ ¸å¿ƒçš„åŠŸèƒ½ä»£ç æˆ‘ä»¬å…¶å®éƒ½å·²ç»å®ç°ï¼Œé¦–å…ˆå…ˆå°†BMP180ä¸æ ‘è“æ´¾ç›¸è¿ï¼š BMP180 æ ‘è“æ´¾ 3.3 3.3V GND GND SCL SCL SDA SDA è¦è®¡ç®—æµ·æ‹”é«˜åº¦ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å…¬å¼ï¼š å…¶ä¸­p0å¯ä»¥å–æµ·å¹³é¢çš„æ ‡å‡†å¤§æ°”å‹1013.25hPaã€‚ è¿å¥½çº¿åï¼Œé¦–å…ˆç¡®è®¤æ ‘è“æ´¾å¼€å¯äº†I2Cæ€»çº¿ï¼Œå¦‚ä¸‹ï¼š åœ¨æ ‘è“æ´¾çš„ç»ˆç«¯ä½¿ç”¨å¦‚ä¸‹æŒ‡ä»¤å¯ä»¥æŸ¥çœ‹å¤–æ¥çš„å…ƒä»¶åœ°å€ï¼š 1sudo i2cdetect -y 1 å¯ä»¥çœ‹åˆ°å¦‚ä¸‹å›¾æ‰€ç¤ºçš„è¾“å‡ºï¼š å…¶ä¸­0x77å³ä¸ºBMP180è®¾å¤‡åœ°å€ã€‚ ä¸‹é¢ç»™å‡ºå®Œæ•´çš„å®éªŒä»£ç ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129#coding:utf-8import smbusimport timeimport math# åˆå§‹åŒ–bus = smbus.SMBus(1)# å®šä¹‰BMP180è®¾å¤‡åœ°å€deviceAddress = 0x77# é€šè¿‡I2Cè¯»å–è®¾å¤‡æŸä¸ªå¯„å­˜å™¨çš„æ•°æ®# regAdr å¯„å­˜å™¨åœ°å€def readByte(device, regAdr): return bus.read_byte_data(device, regAdr)# è¯»å–ä¸€ä¸ªå­—çš„æ•°æ®def readWord(device, regAdr): high = bus.read_byte_data(device, regAdr) low = bus.read_byte_data(device, regAdr + 1) res = (high &lt;&lt; 8) + low return res# å†™å…¥ä¸€ä¸ªå­—èŠ‚çš„æ•°æ®def writeByte(device, regAdr, data): bus.write_byte_data(device, regAdr, data)# æœ‰ç¬¦å·æ•°çš„è¡¥ç è½¬æ¢def getInt(data): r = data # ç¬¬1ä½ä¸º1è¡¨ç¤ºæ˜¯è´Ÿæ•° # å¯¹è´Ÿæ•°çš„è¡¥ç å†å–è¡¥ç å³å¯å¾—åˆ°æºç  if (data &amp; 0x8000) != 0: d = data ^ 0xffff d = d + 1 r = -d return r# å°è£…çš„è·å–E2PROMå­˜å‚¨å™¨ä¸­æ•°æ®çš„æ–¹æ³•# signå‚æ•°è¡¨ç¤ºæ˜¯å¦æ˜¯æœ‰ç¬¦å·æ•°def readCalibrate(adrList, index, sign): value = (adrList[index] &lt;&lt; 8) + adrList[index + 1] if sign: return getInt(value) else: return value# è·å–E2PROMå­˜å‚¨å…¶çš„æ•°æ®# read_i2c_block_dataä¸ºi2Cè¯»å–ä¸€å—æ•°æ®çš„æ–¹æ³•ï¼Œç¬¬2ä¸ªå‚æ•°ä¸ºå¯„å­˜å™¨åœ°å€ï¼Œç¬¬3ä¸ªå‚æ•°ä¸ºè¯»å–çš„å­—èŠ‚æ•°calibrationList = bus.read_i2c_block_data(deviceAddress, 0xAA, 22)# è·å–éœ€è¦çš„æ ¡å‡†ç³»æ•°AC1 = readCalibrate(calibrationList, 0, True)AC2 = readCalibrate(calibrationList, 2, True)AC3 = readCalibrate(calibrationList, 4, True)AC4 = readCalibrate(calibrationList, 6, False)AC5 = readCalibrate(calibrationList, 8, False)AC6 = readCalibrate(calibrationList, 10, False)B1 = readCalibrate(calibrationList, 12, True) B2 = readCalibrate(calibrationList, 14, True)MB = readCalibrate(calibrationList, 16, True)MC = readCalibrate(calibrationList, 18, True)MD = readCalibrate(calibrationList, 20, True)# è·å–åŸå§‹çš„æ¸©åº¦æ•°æ®ï¼ˆæœªè¡¥å¿ï¼‰def getTemperature(): # å†™å…¥æŒ‡ä»¤ writeByte(deviceAddress, 0xF4, 0x2E) # ç­‰å¾…æ¸©åº¦æ•°æ®è½¬æ¢ time.sleep(0.005) # è¯»å–çš„æ•°æ®ä¸ºæœ‰ç¬¦å·æ•° value = readWord(deviceAddress, 0xF6) # ç¬¦å·å¤„ç† return getInt(value)# å®šä¹‰é‡‡æ ·ç²¾åº¦ï¼Œè¿™é‡Œå–è¶…é«˜åˆ†è¾¨ç‡OSS = 3# è·å–åŸå§‹çš„å‹åŠ›æ•°æ® ï¼ˆæœªè¡¥å¿ï¼‰def getPressure(): # å†™å…¥æŒ‡ä»¤ writeByte(deviceAddress, 0xF4, 0x34 + (OSS &lt;&lt; 6)) time.sleep(0.026) MSB = readByte(deviceAddress, 0xF6) LSB = readByte(deviceAddress, 0xF7) XLSB = readByte(deviceAddress, 0xF8) value = ((MSB &lt;&lt; 16) + (LSB &lt;&lt; 8) + XLSB) &gt;&gt; (8 - OSS) return value# è®¡ç®—çœŸå®çš„æ¸©åº¦def calculateTemperature(data): X1 = ((data - AC6) * AC5) / math.pow(2, 15) X2 = (MC * math.pow(2, 11)) / (X1 + MD) B5 = X1 + X2 T = (B5 + 8) / math.pow(2, 4) return T / 10.0# è®¡ç®—çœŸå®çš„æ°”å‹def calculatePressure(temp, data): X1 = ((temp - AC6) * AC5) / math.pow(2, 15) X2 = (MC * math.pow(2, 11)) / (X1 + MD) B5 = int(X1 + X2) B6 = B5 - 4000 X1 = (B2 * (B6 * B6 &gt;&gt; 12)) &gt;&gt; 11 X2 = AC2 * B6 &gt;&gt; 11 X3 = X1 + X2 B3 = (((AC1 * 4 + X3) &lt;&lt; OSS) + 2) &gt;&gt; 2 X1 = (AC3 * B6) &gt;&gt; 13 X2 = (B1 * (B6 * B6 &gt;&gt; 12)) &gt;&gt; 16 X3 = ((X1 + X2) + 2) &gt;&gt; 2 B4 = AC4 * (X3 + 32768) &gt;&gt; 15 B7 = (data - B3) * (50000 &gt;&gt; OSS) if (B7 &lt; 0x80000000): P = int((B7 * 2) / B4) else: P = int((B7 / B4) * 2) X1 = (P &gt;&gt; 8) * (P &gt;&gt; 8) X1 = (X1 * 3038) &gt;&gt; 16 X2 = (-7357 * P) &gt;&gt; 16 P = P + ((X1 + X2 + 3791) &gt;&gt; 4) # å•ä½ä¸ºPa è½¬æ¢ä¸ºhPa é™¤ä»¥100å³å¯ return P / 100.0while True: t = getTemperature() temp = calculateTemperature(t) press = calculatePressure(t, getPressure()) high = 44330 * (1 - math.pow((press / 1013.25), 1.0) / 5.255) print('æ¸©åº¦ï¼š%f, æ°”å‹ï¼š%f, æµ·æ‹”ï¼š%f'%(temp, press, high)) time.sleep(1) è¿è¡Œä¸Šé¢ä»£ç ï¼Œæµ‹é‡ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¸“æ³¨æŠ€æœ¯ï¼Œæ‡‚çš„çƒ­çˆ±ï¼Œæ„¿æ„åˆ†äº«ï¼Œåšä¸ªæœ‹å‹ QQï¼š316045346","categories":[{"name":"Linux","slug":"Linux","permalink":"http://huishao.cc/categories/Linux/"}],"tags":[],"keywords":[{"name":"Linux","slug":"Linux","permalink":"http://huishao.cc/categories/Linux/"}]},{"title":"ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ16ï¼‰â€”â€”æ—‹è½¬ç¼–ç ä¼ æ„Ÿå™¨","slug":"429ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ16ï¼‰â€”â€”æ—‹è½¬ç¼–ç ä¼ æ„Ÿå™¨","date":"2021-09-21T16:00:00.000Z","updated":"2021-09-22T14:24:25.535Z","comments":true,"path":"2021/09/22/429ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ16ï¼‰â€”â€”æ—‹è½¬ç¼–ç ä¼ æ„Ÿå™¨/","link":"","permalink":"http://huishao.cc/2021/09/22/429ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ16ï¼‰â€”â€”æ—‹è½¬ç¼–ç ä¼ æ„Ÿå™¨/","excerpt":"","text":"ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ16ï¼‰â€”â€”æ—‹è½¬ç¼–ç ä¼ æ„Ÿå™¨æ—‹è½¬ç¼–ç ä¼ æ„Ÿå™¨æ˜¯ä¸€ç§é€Ÿåº¦ä½ç§»ä¼ æ„Ÿå™¨ã€‚å…¶é€šè¿‡æ—‹é’®çš„æ—‹è½¬æ¥å¸¦åŠ¨å†…éƒ¨çš„å…‰æ …ç›˜æ—‹è½¬ï¼Œå…‰æ …ç›˜ä¸Šä¼šé¢„ç½®å¾ˆå¤šç‹­ç¼ï¼Œå…‰æ …ç›˜çš„è½¬åŠ¨å¯¼è‡´ç»è¿‡ç‹­ç¼çš„å…‰çº¿äº§ç”Ÿè„‰å†²å˜åŒ–ï¼Œæ­¤ä¿¡å·ç»è¿‡åç»§ç”µè·¯çš„å¤„ç†åï¼Œè¾“å‡ºæˆè„‰å†²ä¿¡å·ã€‚æœ€ç»ˆï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿¡å·å¼•è„šçš„è¾“å‡ºæ¥è·å–æ—‹é’®çš„æ—‹è½¬åŠ¨ä½œã€‚ æœ¬æ¬¡å®éªŒï¼Œä½¿ç”¨çš„æ—‹è½¬ç¼–ç ä¼ æ„Ÿå™¨å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š é€šè¿‡å†…éƒ¨å‘å…‰æºä¸å…‰æ•å…ƒä»¶çš„é…ç½®ï¼Œæ—‹è½¬æ—¶äº§ç”Ÿè„‰å†²ä¿¡å·ï¼Œç¤ºæ„å›¾å¦‚ä¸‹ï¼š æˆ‘ä»¬ä½¿ç”¨çš„ä¼ æ„Ÿå™¨æœ‰5ä¸ªå¼•è„šï¼Œå…¶ä¸­é™¤äº†ç”µæºå’Œæ¥åœ°å¼•è„šå¤–ï¼Œè¿˜æœ‰3ä¸ªä¿¡å·å¼•è„šã€‚SWå¼•è„šä¸ºå¤ä½ä¿¡å·å¼•è„šï¼Œæ­¤æ—‹è½¬ç¼–ç ä¼ æ„Ÿå™¨æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªæŒ‰é’®ï¼Œå½“æŒ‰ä¸‹æ­¤æŒ‰é’®æ—¶ï¼ŒSWå¼•è„šä¼šä»é«˜ç”µå¹³è·³å˜ä¸ºä½ç”µå¹³ã€‚CLKå¼•è„šä¸ºæ—‹è½¬ä¿¡å·å¼•è„šï¼Œæœªæ—‹è½¬æ—¶ï¼Œæ­¤å¼•è„šè¾“å‡ºé«˜ç”µå¹³ï¼Œæ—‹è½¬æ—¶è¾“å‡ºä½ç”µå¹³ã€‚DTå¼•è„šç”¨æ¥åˆ¤å®šæ—‹è½¬çš„æ–¹å‘ï¼Œå¦‚æœæœªæ—‹è½¬æ—¶æ­¤å¼•è„šä¸ºé«˜ç”µå¹³ï¼Œæ—‹è½¬æ—¶å˜ä½ç”µå¹³ï¼Œåˆ™è¡¨ç¤ºå‘ç”Ÿäº†é¡ºæ—¶é’ˆæ—‹è½¬ï¼Œå¦‚æœæœªæ—‹è½¬æ—¶æ­¤å¼•è„šä¸ºä½ç”µå¹³ï¼Œå‘ç”Ÿæ—‹è½¬æ—¶æ­¤å¼•è„šä¸ºé«˜ç”µå¹³ï¼Œåˆ™è¡¨ç¤ºå‘ç”Ÿäº†é€†æ—¶é’ˆæ—‹è½¬ã€‚ ä¸‹é¢ï¼Œæˆ‘ä»¬æ¥è¿æ¥æ ‘è“æ´¾è¿›è¡Œå®éªŒï¼Œæ¥çº¿å¦‚ä¸‹ï¼š æ—‹è½¬ç¼–ç ä¼ æ„Ÿå™¨ æ ‘è“æ´¾ VCC +5V GND GND CLK GPIO17 ï¼ˆBCMç¼–ç ï¼‰ DT GPIO18 ï¼ˆBCMç¼–ç ï¼‰ SW GPIO19 ï¼ˆBCMç¼–ç ï¼‰ ç¼–å†™å®éªŒä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445#coding:utf-8import RPi.GPIO as GPIOimport time# å®šä¹‰å¼•è„šresetPin = 35 # BCMç¼–ç ä¸º19çš„GPIO ç‰©ç†ç¼–ç ä¸º35clkPin = 11dtPin = 12# è®¡æ•°å˜é‡clockwise = 0anticlockwise = 0 # è¿›è¡Œå¼•è„šåˆå§‹åŒ–GPIO.setmode(GPIO.BOARD)GPIO.setup(clkPin, GPIO.IN)GPIO.setup(dtPin, GPIO.IN)GPIO.setup(resetPin, GPIO.IN, pull_up_down=GPIO.PUD_UP)# æ³¨å†Œä¸­æ–­å‡½æ•°def reset(channel): global clockwise, anticlockwise clockwise = 0 anticlockwise = 0 print('è®¡æ•°å¤ä½')# ç›‘å¬ä¸‹é™æ²¿GPIO.add_event_detect(resetPin, GPIO.FALLING, callback=reset)# å¼€å¯ä¸»å¾ªç¯while True: lastDT = GPIO.input(dtPin) # é«˜ç”µå¹³ æ²¡æœ‰å‘ç”Ÿæ—‹è½¬åŠ¨ä½œ while GPIO.input(clkPin): pass # å¼€å§‹æ—‹è½¬ currentDT = GPIO.input(dtPin) if (lastDT == 1) and (currentDT == 0): # é¡ºæ—¶é’ˆ clockwise += 1 print('é¡ºæ—¶é’ˆæ—‹è½¬è®¡æ•°ï¼š%d'%(clockwise)) if (lastDT == 0) and (currentDT == 1): # é€†æ—¶é’ˆ anticlockwise += 1 print('é€†æ—¶é’ˆæ—‹è½¬è®¡æ•°ï¼š%d'%(anticlockwise)) è¿è¡Œä»£ç ï¼Œæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¸“æ³¨æŠ€æœ¯ï¼Œæ‡‚çš„çƒ­çˆ±ï¼Œæ„¿æ„åˆ†äº«ï¼Œåšä¸ªæœ‹å‹ QQï¼š316045346","categories":[{"name":"Linux","slug":"Linux","permalink":"http://huishao.cc/categories/Linux/"}],"tags":[],"keywords":[{"name":"Linux","slug":"Linux","permalink":"http://huishao.cc/categories/Linux/"}]},{"title":"ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ15ï¼‰â€”â€”å¹²ç°§ç®¡ä¼ æ„Ÿå™¨","slug":"428ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ15ï¼‰â€”â€”å¹²ç°§ç®¡ä¼ æ„Ÿå™¨","date":"2021-09-15T16:00:00.000Z","updated":"2021-09-22T14:23:39.791Z","comments":true,"path":"2021/09/16/428ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ15ï¼‰â€”â€”å¹²ç°§ç®¡ä¼ æ„Ÿå™¨/","link":"","permalink":"http://huishao.cc/2021/09/16/428ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ15ï¼‰â€”â€”å¹²ç°§ç®¡ä¼ æ„Ÿå™¨/","excerpt":"","text":"ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ15ï¼‰â€”â€”å¹²ç°§ç®¡ä¼ æ„Ÿå™¨å¹²ç°§ç®¡ä¼ æ„Ÿå™¨åˆè¢«ç§°ä¸ºç£ç°§å¼€å…³ã€‚é¡¾åæ€ä¹‰ï¼Œå…¶åŠŸèƒ½æ˜¯å¯ä»¥æ„ŸçŸ¥å‘¨å›´çš„ç£åœºä»è€Œæ”¹å˜å¼€å…³çš„çŠ¶æ€ã€‚æœ¬æ¬¡å®éªŒï¼Œæˆ‘ä»¬ä½¿ç”¨çš„å¹²ç°§ç®¡ä¼ æ„Ÿå™¨æ¨¡å—å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¯ä»¥çœ‹åˆ°ï¼Œæ­¤æ¨¡å—çš„æ ¸å¿ƒæ˜¯ä¸€ä¸ªç£ç°§å¼€å…³ï¼Œé™„å¸¦LEDæŒ‡ç¤ºç¯ä¸çµæ•åº¦è°ƒèŠ‚ç”µé˜»ã€‚ç£ç°§å¼€å…³çš„å·¥ä½œåŸç†éå¸¸ç®€å•ï¼Œä¸¤ç‰‡é‡‘å±è–„ç‰‡å¯†å°äºä¸€ä¸ªç»ç’ƒç®¡å†…ï¼Œé‡‘å±ç‰‡é—´æœ‰éå¸¸ç»†çš„ä¸€ä¸ªç¼éš™ï¼Œå¸¸æ€ä¸‹ï¼Œä¸¤é‡‘å±ç‰‡ä¸è¿é€šï¼Œç”µè·¯æ–­å¼€ï¼Œå½“æœ‰ç£åœºé è¿‘ç»ç’ƒç®¡æ—¶ï¼Œå¤–åŠ çš„ç£åœºä¼šä½¿ä¸¤é‡‘å±ç‰‡ç«¯ç‚¹é™„è¿‘äº§ç”Ÿä¸åŒçš„ç£æï¼Œä»è€Œå¸å¼•é—­åˆï¼Œç”µè·¯æ¥é€šã€‚ç»ç’ƒç®¡å†…é€šå¸¸ä¼šå……æ»¡æƒ°æ€§æ°”ä½“æˆ–è€…æŠ½æˆçœŸç©ºçŠ¶æ€ï¼Œä½¿å¾—å¹²ç°§ç®¡æ€§èƒ½å’Œè€ç”¨åº¦å¯ä»¥æœ€å¤§ç¨‹åº¦çš„æé«˜ã€‚ æœ¬å®éªŒæ‰€ä½¿ç”¨çš„å¹²ç°§ç®¡æ¨¡å—ç”µè·¯åŸç†å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š æ­¤æ¨¡å—åŒ…å«ä¸¤ä¸ªLEDæç¤ºç¯ï¼Œå½“æ¥é€šç”µæºæ—¶ï¼Œç”µæºæç¤ºLEDç¯äº®ï¼Œå½“ç£ç°§å¼€å…³é—­åˆæ—¶ï¼Œè¾“å‡ºæç¤ºLEDç¯äº®ã€‚ åœ¨æœ¬å®éªŒä¸­æµ‹è¯•å¹²ç°§ç®¡æ¨¡å—çš„å¼€å…³åŠŸèƒ½ï¼Œè¿˜éœ€è¦å‡†å¤‡ä¸€ä¸ªç£çŸ³ã€‚å¹²ç°§ç®¡æ¨¡å—ä¸æ ‘è“æ´¾è¿çº¿å¦‚ä¸‹ï¼š å¹²ç°§ç®¡æ¨¡å— æ ‘è“æ´¾ VCC 3.3Vç”µæº GND GND DO GPIO17ï¼ˆBCMç¼–ç ï¼‰ æœ¬å®éªŒä»£ç æœ¬èº«éå¸¸ç®€å•ï¼Œå¦‚ä¸‹ï¼š 123456789101112131415161718192021222324#coding:utf-8import RPi.GPIO as GPIOreed = 11def trigger(channel): print('å½“å‰å¼€å…³çŠ¶æ€ï¼š%s'%('å…³' if GPIO.input(reed) else 'å¼€'))def setup(): GPIO.setmode(GPIO.BOARD) # å½“å¼€å…³æœªé—­åˆæ—¶ï¼Œä¿¡å·å¼•è„šå°†è¾“å‡ºé«˜ç”µå¹³ï¼Œé»˜è®¤è®¾ç½®ä¸Šæ‹‰ç”µé˜» GPIO.setup(reed, GPIO.IN, pull_up_down=GPIO.PUD_UP) GPIO.add_event_detect(reed, GPIO.BOTH, callback=trigger, bouncetime=200)def destroy(): GPIO.cleanup()if __name__ == '__main__': setup() try: while True: pass # ä¸»åŠ¨é€€å‡ºæ—¶ æ¸…é™¤èµ„æº except KeyboardInterrupt: destroy() åœ¨æ ‘è“æ´¾ä¸Šè¿è¡Œä¸Šé¢ä»£ç ï¼Œå½“ä½¿ç”¨ç£ä½“é è¿‘å¹²ç°§ç®¡æ—¶ï¼Œå³å¯é€šè¿‡æ‰“å°ä¿¡æ¯çœ‹åˆ°å¼€å…³çŠ¶æ€ï¼ŒåŒæ ·ä¹Ÿå¯ä»¥é€šè¿‡ä¿¡å·æŒ‡ç¤ºç¯çš„æ˜æš—æ¥è·çŸ¥ç£ç°§å¼€å…³çš„çŠ¶æ€ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¸“æ³¨æŠ€æœ¯ï¼Œæ‡‚çš„çƒ­çˆ±ï¼Œæ„¿æ„åˆ†äº«ï¼Œåšä¸ªæœ‹å‹ QQï¼š316045346","categories":[{"name":"Linux","slug":"Linux","permalink":"http://huishao.cc/categories/Linux/"}],"tags":[],"keywords":[{"name":"Linux","slug":"Linux","permalink":"http://huishao.cc/categories/Linux/"}]},{"title":"ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ13ï¼‰â€”â€”é›¨æ»´æ£€æµ‹ä¼ æ„Ÿå™¨","slug":"426ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ13ï¼‰â€”â€”é›¨æ»´æ£€æµ‹ä¼ æ„Ÿå™¨","date":"2021-09-08T16:00:00.000Z","updated":"2021-09-08T16:44:14.723Z","comments":true,"path":"2021/09/09/426ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ13ï¼‰â€”â€”é›¨æ»´æ£€æµ‹ä¼ æ„Ÿå™¨/","link":"","permalink":"http://huishao.cc/2021/09/09/426ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ13ï¼‰â€”â€”é›¨æ»´æ£€æµ‹ä¼ æ„Ÿå™¨/","excerpt":"","text":"ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ13ï¼‰â€”â€”é›¨æ»´æ£€æµ‹ä¼ æ„Ÿå™¨åœ¨æœ¬ç³»åˆ—çš„å‰å‡ ç¯‡åšå®¢ä¸­ï¼Œæˆ‘ä»¬æœ‰è¿›è¡Œè¿‡æ¸©åº¦ä¼ æ„Ÿå™¨å’Œå…‰å¼ºä¼ æ„Ÿå™¨çš„å®éªŒã€‚é€šè¿‡è¿™äº›ä¼ æ„Ÿå™¨ï¼ŒåŠ ä¸Šç®€å•çš„ç¼–ç¨‹æŠ€æœ¯ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“è·å–è¿™äº›ç¯å¢ƒæ•°æ®ã€‚é€šè¿‡å„ç§ä¸°å¯Œçš„ä¼ æ„Ÿå™¨ï¼Œç”¨æ ‘è“æ´¾å¯ä»¥éå¸¸å®¹æ˜“çš„æ‰“é€ ä¸€æ¬¾â€ç®€æ˜“æ°”è±¡ç«™â€œã€‚å¯¹äºä¸€ä¸ªå°å‹çš„æ°”è±¡ç«™æ¥è¯´ï¼Œé™¤äº†éœ€è¦æ”¶é›†æ¸©åº¦å’Œå…‰ç…§å¼ºåº¦æ•°æ®å¤–ï¼Œå½“å‰çš„å¤©æ°”çŠ¶å†µä¹Ÿæ˜¯å¿…ä¸å¯å°‘çš„ã€‚æœ¬ç¯‡åšå®¢ï¼Œæˆ‘ä»¬å°†é€šè¿‡é›¨æ»´æ£€æµ‹ä¼ æ„Ÿå™¨å®éªŒæ¥è·å–é›¨åŠ¿ä¿¡æ¯ã€‚ ä¸€ã€é›¨æ»´æ£€æµ‹ä¼ æ„Ÿå™¨æœ¬æ¬¡å®éªŒä½¿ç”¨çš„é›¨æ»´æ£€æµ‹ä¼ æ„Ÿå™¨æ¨¡å—å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¯ä»¥çœ‹åˆ°ï¼Œæ­¤å…ƒä»¶ç»„ç”±ä¸€ä¸ªæ£€æµ‹æ¿å’Œæ§åˆ¶æ¨¡å—ç»„æˆï¼Œä¸¤éƒ¨åˆ†åˆ†å¼€è¿æ¥ï¼Œä¾¿äºå°†æ£€æµ‹æ¿æ”¾ç½®åˆ°åˆé€‚çš„æ£€æµ‹ä½ç½®ï¼Œä¸”æ£€æµ‹æ¿é¢ç§¯å¤§ï¼Œæ˜“äºè¿›è¡Œé›¨æ»´æ£€æµ‹ã€‚ æ­¤ä¼ æ„Ÿå™¨æ¨¡å—å·¥ä½œç”µè·¯å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š åœ¨ä½¿ç”¨æ—¶ï¼Œå…ˆå°†æ£€æµ‹æ¿çš„ä¸¤ä¸ªå¼•è„šä¸æ¨¡å—çš„åªæœ‰ä¸¤ä¸ªå¼•è„šä¸€ä¾§çš„å¼•è„šç›¸è¿(å¯ä»¥å°†æ£€æµ‹æ¿ç†è§£ä¸ºä¸¤æ ¹ä¸æƒ³äº¤çš„å¯¼çº¿ï¼Œæœ‰é›¨æ°´è½ä¸‹æ—¶ï¼Œå¯¼çº¿ä¼šè”é€š)ã€‚ è§‚å¯Ÿæ§åˆ¶æ¨¡å—ï¼Œå¯ä»¥çœ‹åˆ°å…¶ä¸Šå°è£…äº†ä¸¤ä¸ªLEDï¼Œå…¶ä¸­ä¸€ä¸ªLEDæ˜¯ç”µæºæŒ‡ç¤ºç¯ï¼Œå½“æ¥é€šç”µæºåä¼šå‘å…‰ï¼Œå¦ä¸€ä¸ªLEDæ˜¯ä¿¡å·ç¯ï¼Œæ²¡æœ‰é›¨æ°´çš„æ—¶å€™ä¿¡å·ç¯ä¸äº®ï¼Œæ£€æµ‹æ¿ä¸Šæœ‰é›¨æ°´çš„æ—¶å€™ä¿¡å·ç¯äº®ã€‚åœ¨æ£€æµ‹æ˜¯å¦ä¸‹é›¨æ—¶ï¼Œå¯ä»¥å°†æ£€æµ‹æ¿å€¾æ–œæ”¾ç½®ï¼Œæœ‰é›¨æ°´æµè¿‡å³å¯æ”¹å˜ç”µå¹³ä¿¡å·çš„è¾“å‡ºã€‚æ§åˆ¶æ¨¡å—ä¸­è¿˜è‡ªå¸¦ä¸€ä¸ªè°ƒèŠ‚ç”µé˜»ï¼Œè°ƒèŠ‚æ­¤ç”µé˜»å¯ä»¥è®¾ç½®ä¼ æ„Ÿå™¨çš„çµæ•åº¦ã€‚æ§åˆ¶æ¨¡å—çš„å¦ä¸€ä¾§æœ‰4ä¸ªå¼•è„šï¼Œåˆ†åˆ«ä¸ºAOï¼ŒDOï¼ŒGNDå’ŒVCCã€‚å…¶ä¸­ï¼ŒAOä¸ºæ¨¡æ‹Ÿä¿¡å·è¾“å‡ºï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªå¼•è„šè¾“å‡ºçš„ä¿¡å·æ¥åˆ¤æ–­é›¨é‡çš„å¤§å°ã€‚DOå¼•è„šä¸ºæ•°å­—ä¿¡å·è¾“å‡ºï¼Œå¯ä»¥ç”¨è¿™ä¸ªå¼•è„šè¾“å‡ºçš„ä¿¡å·åˆ¤æ–­æ£€æµ‹æ¿ä¸Šæ˜¯å¦æœ‰é›¨æ°´ï¼Œæ²¡æœ‰æ°´æ»´æ—¶æ­¤å¼•è„šè¾“å‡ºé«˜ç”µå¹³ï¼Œæœ‰æ°´æ»´æ—¶æ­¤å¼•è„šè¾“å‡ºä½ç”µå¹³ã€‚ äºŒã€å®éªŒè¿çº¿ä¸ç¼–ç æœ¬æ¬¡å®éªŒï¼Œæˆ‘ä»¬å°†ä½¿ç”¨GPIOå¼•è„šç›´æ¥è·å–é›¨æ»´æ£€æµ‹æ¨¡å—çš„æ•°å­—ä¿¡å·ï¼Œå¹¶é€šè¿‡PCF8591æ¥è¯»å–é›¨æ»´æ£€æµ‹æ¨¡å—çš„æ¨¡æ‹Ÿä¿¡å·ã€‚é¦–å…ˆï¼Œè¿çº¿å¦‚ä¸‹ï¼š PCF8591ä¸æ ‘è“æ´¾è¿æ¥ï¼š PCF8591 æ ‘è“æ´¾ SDA SDA SCL SCL VCC 5Vç”µæº GND GND é›¨æ»´æ£€æµ‹æ¨¡å—ï¼š é›¨æ»´æ£€æµ‹æ¨¡å— æ ‘è“æ´¾ PCF8591 VCC 5V GND GND AO AIN0 DO GPIO17(BCMç¼–ç ) å®Œæˆäº†åŸºç¡€çš„è¿çº¿ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹ç¼–ç å·¥ä½œäº†ã€‚å…³äºPCF8591çš„ä½¿ç”¨ï¼Œæˆ‘ä»¬ä¹‹å‰çš„åšå®¢æœ‰è¿‡è¯¦ç»†çš„ä»‹ç»ï¼Œä½†æ˜¯å¦‚æœæ¯æ¬¡ä½¿ç”¨åˆ°æ•°æ¨¡è½¬æ¢æ—¶ï¼Œéƒ½ç¼–å†™ä¸€éPCF8591çš„æ§åˆ¶ä»£ç ä¼šéå¸¸çš„éº»çƒ¦ï¼Œè€Œä¸”è¿™ä¹Ÿä¸æ˜¯æˆ‘ä»¬è¦æ ¸å¿ƒå…³æ³¨çš„åŠŸèƒ½ç‚¹ï¼Œå¯¹äºæœ¬å®éªŒæ¥è¯´ï¼Œæˆ‘ä»¬æ›´å¤šéœ€è¦å…³æ³¨çš„æ˜¯å¦‚ä½•å¤„ç†é›¨æ»´æ£€æµ‹æ¨¡å—çš„æ•°æ®ï¼Œè€Œä¸æ˜¯DAè½¬æ¢ç›¸å…³é€»è¾‘ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç¼–å†™ä¸€å¥—é€šç”¨çš„PCF8591é©±åŠ¨ä»£ç ï¼Œä¹‹åå†ä½¿ç”¨åˆ°æœ‰æ¨¡æ‹Ÿä¿¡å·è¾“å‡ºçš„å…ƒä»¶æ—¶ï¼Œç›´æ¥ä½¿ç”¨æ­¤é©±åŠ¨å³å¯ã€‚ éœ€è¦æ³¨æ„ï¼Œè¦ä½¿ç”¨PCF8591ï¼Œä¸è¦å¿˜è®°æ‰“å¼€æ ‘è“æ´¾çš„I2Cæ¥å£ï¼Œæ¥çº¿å®Œæˆåï¼Œä½¿ç”¨å¦‚ä¸‹æŒ‡ä»¤å¯ä»¥æŸ¥çœ‹è®¾å¤‡åœ°å€ï¼š 1sudo i2cdetect -y 1 å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334#coding:utf-8import smbus #åœ¨ç¨‹åºä¸­å¯¼å…¥â€œsmbusâ€æ¨¡å—# /dev/i2c-1bus = smbus.SMBus(1) #åˆ›å»ºä¸€ä¸ªsmbuså®ä¾‹# åˆå§‹åŒ–é©±åŠ¨æ¨¡å— å®šä¹‰PCFå…ƒä»¶åœ°å€def init(addr): global address address = addr# è¯»å–æŸä¸ªé€šé“çš„æ•°æ®def read(chn): global address if chn == 0: #å‘é€ä¸€ä¸ªæ§åˆ¶å­—èŠ‚åˆ°è®¾å¤‡ è¡¨ç¤ºè¦è¯»å–AIN0é€šé“çš„æ•°æ® bus.write_byte(address,0x40) if chn == 1: #å‘é€ä¸€ä¸ªæ§åˆ¶å­—èŠ‚åˆ°è®¾å¤‡ è¡¨ç¤ºè¦è¯»å–AIN1é€šé“çš„æ•°æ® bus.write_byte(address,0x41) if chn == 2: #å‘é€ä¸€ä¸ªæ§åˆ¶å­—èŠ‚åˆ°è®¾å¤‡ è¡¨ç¤ºè¦è¯»å–AIN2é€šé“çš„æ•°æ® bus.write_byte(address,0x42) if chn == 3: #å‘é€ä¸€ä¸ªæ§åˆ¶å­—èŠ‚åˆ°è®¾å¤‡ è¡¨ç¤ºè¦è¯»å–AIN3é€šé“çš„æ•°æ® bus.write_byte(address,0x43) bus.read_byte(address) # ç©ºè¯»ä¸€æ¬¡ï¼Œæ¶ˆè´¹æ‰æ— æ•ˆæ•°æ® return bus.read_byte(address) # è¿”å›æŸé€šé“è¾“å…¥çš„æ¨¡æ‹Ÿå€¼A/Dè½¬æ¢åçš„æ•°å­—å€¼def write(val): global address temp = val temp = int(temp) # è¿›è¡Œå†™æ•°æ®æ“ä½œ bus.write_byte_data(address, 0x40, temp) å®ç°æ°´æ»´æ£€æµ‹çš„ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718#coding:utf-8import pcf8591 as PCFimport RPi.GPIO as GPIOimport timeDO = 11# è®¾ç½®ä½¿ç”¨çš„å¼•è„šç¼–ç æ¨¡å¼GPIO.setmode(GPIO.BOARD)GPIO.setup(DO, GPIO.IN)PCF.init(0x48)while True: print('------------åˆ†å‰²çº¿-------------') rainDO = GPIO.input(DO) print('æ˜¯å¦æ£€æµ‹åˆ°æ°´æ»´ï¼š%s'%('å¦' if rainDO else 'æ˜¯')) # è¯»å–AIN0çš„æ¨¡æ‹Ÿæ•°æ® rainAO = PCF.read(0) print('é›¨æ°´ç¨‹åº¦%d'%(255 - rainAO)) time.sleep(2) åœ¨æ ‘è“æ´¾ä¸Šè¿è¡Œä¸Šé¢ç¨‹åºï¼Œå³å¯æ£€æµ‹æ°´æ»´æƒ…å†µã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œæ‡‚çš„çƒ­çˆ±ï¼Œæ„¿æ„åˆ†äº«ï¼Œåšä¸ªæœ‹å‹ QQï¼š316045346","categories":[{"name":"Linux","slug":"Linux","permalink":"http://huishao.cc/categories/Linux/"}],"tags":[],"keywords":[{"name":"Linux","slug":"Linux","permalink":"http://huishao.cc/categories/Linux/"}]},{"title":"ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ14ï¼‰â€”â€”è¶…å£°æµ‹è·","slug":"427ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ14ï¼‰â€”â€”è¶…å£°æµ‹è·","date":"2021-09-08T16:00:00.000Z","updated":"2021-09-09T14:21:31.469Z","comments":true,"path":"2021/09/09/427ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ14ï¼‰â€”â€”è¶…å£°æµ‹è·/","link":"","permalink":"http://huishao.cc/2021/09/09/427ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ14ï¼‰â€”â€”è¶…å£°æµ‹è·/","excerpt":"","text":"ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ14ï¼‰â€”â€”è¶…å£°æµ‹è·å½“ä»Šï¼Œæ±½è½¦è¡Œä¸šçš„å‘å±•å¯è°“æ˜¯æ—¥æ–°æœˆå¼‚ã€‚æ™ºèƒ½æ±½è½¦çš„æ¦‚å¿µä¹Ÿè¶Šæ¥è¶Šç«çƒ­ã€‚è‡ªåŠ¨é©¾é©¶ä¹Ÿå°†å¾—åˆ°è¶Šæ¥è¶Šå¹¿æ³›çš„åº”ç”¨ã€‚ä¸çŸ¥ä½ æœ‰æ²¡æœ‰æƒ³è¿‡ï¼Œå¹³æ—¶æˆ‘ä»¬åœ¨äººå·¥é©¾é©¶æ±½è½¦æ—¶ï¼Œä¸»è¦ä½¿ç”¨çš„æ˜¯è§†è§‰æ¥æ„ŸçŸ¥è·ç¦»ï¼Œå¯¹äºäººå·¥æ™ºèƒ½æ¥è¯´ï¼Œå®ƒæ˜¯å¦‚ä½•é€šè¿‡æ„ŸçŸ¥è·ç¦»æ¥è·å–å‘¨å›´ç¯å¢ƒä¿¡æ¯çš„å‘¢ï¼Ÿè¿™å°±éœ€è¦ä½¿ç”¨åˆ°ç›¸å…³çš„æµ‹è·ä¼ æ„Ÿå™¨ã€‚ ä¸€ã€è¶…å£°æµ‹è·ä¼ æ„Ÿå™¨æˆ‘ä»¬çŸ¥é“ï¼Œè¶…å£°æ³¢é¢‘ç‡é«˜ï¼Œç›¸å¯¹äºæ™®é€šå£°æ³¢ï¼Œå…¶èƒ½é‡æ¶ˆè€—æ…¢ï¼Œä¼ æ’­è·ç¦»è¿œä¸”æŒ‡å‘æ€§å¾ˆå¼ºã€‚ååˆ†é€‚åˆç”¨æ¥è¿›è¡Œè·ç¦»çš„æµ‹é‡ã€‚æœ¬æ¬¡å®éªŒï¼Œæˆ‘ä»¬ä½¿ç”¨HC-SR04è¶…å£°æµ‹è·æ¨¡å—æ¥è¿›è¡Œè·ç¦»æµ‹é‡ã€‚å…ƒä»¶å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒHC-SR04æ¨¡å—æœ‰ä¸€ä¸ªè¶…å£°å‘ç”Ÿå™¨ï¼ˆTç«¯ï¼‰å’Œä¸€ä¸ªè¶…å£°æ”¶é›†å™¨ï¼ˆRç«¯ï¼‰ä»¥åŠ4ä¸ªå¼•è„šã€‚åœ¨ç½‘ä¸Šå¾ˆå®¹æ˜“è´­ä¹°åˆ°æ­¤æ¨¡å—ï¼Œå…¶ä»·æ ¼ä½å»‰ï¼Œç²¾å‡†åº¦é«˜ï¼Œä½¿ç”¨ç®€å•ï¼Œæ€§ä»·æ¯”éå¸¸é«˜ã€‚HC-SR04ç¡¬ä»¶åŸç†å›¾å¦‚ä¸‹ï¼š æ¨¡å—å†…éƒ¨ç”µè·¯ç»“æ„è™½ç„¶çœ‹ä¸Šå»éå¸¸å¤æ‚ï¼Œä½†æ˜¯æˆ‘ä»¬ä½¿ç”¨å®ƒæ¥æµ‹è·å¹¶ä¸éœ€è¦äº†è§£å…¶å†…éƒ¨å®Œæ•´çš„å·¥ä½œåŸç†ï¼Œè¦è¿›è¡Œè·ç¦»çš„æµ‹å®šï¼Œç¦»ä¸å¼€å…¬å¼s = v * tã€‚å¦‚æœè¦è®¡ç®—å‡ºè·ç¦»sï¼Œéœ€è¦å¾—çŸ¥é€Ÿåº¦vå’Œæ—¶é—´tï¼Œå£°æ³¢çš„é€Ÿåº¦væ˜¯ä¸€å®šçš„ï¼Œæˆ‘ä»¬å¯ä»¥å–340m/sï¼Œæ—¶é—´tå°±æ˜¯HC-SR04æ¨¡å—èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬å¾—åˆ°çš„ã€‚ è¶…å£°æµ‹è·çš„æ ¸å¿ƒåŸç†æ˜¯é€šè¿‡å‘ç”Ÿæºå‘å‡ºè¶…å£°æ³¢ï¼Œå½“è¶…å£°æ³¢é‡åˆ°éšœç¢æ—¶ä¼šè¢«åå°„ï¼Œåå°„çš„è¶…å£°æ³¢å¯ä»¥è¢«æ„ŸçŸ¥æºæ„ŸçŸ¥åˆ°ï¼Œä»å£°æ³¢å‘å‡ºåˆ°è¢«æ„ŸçŸ¥åˆ°è¿™ä¹‹é—´çš„æ—¶é—´å°±æ˜¯è¶…å£°æ³¢ä»æ¨¡å—åˆ°éšœç¢ç‰©é—´ä¼ é€’ä¸€æ¬¡æ¥å›æ‰€ä½¿ç”¨çš„æ—¶é—´ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¯¹äºHC-SR04æ¨¡å—ï¼Œå…¶Trigå¼•è„šæ˜¯è§¦å‘å¼•è„šï¼Œå‘å…¶å‘10usä»¥ä¸Šçš„é«˜ç”µå¹³å³å¯è§¦å‘å‘é€è¶…å£°æ³¢æŒ‡ä»¤ï¼ŒHC-SR04æ¨¡å—ä¼šè‡ªåŠ¨å‘é€8ä¸ª40kHzçš„æ–¹æ³¢ï¼Œå½“å‘é€å®Œæˆåï¼ŒEchoå¼•è„šä¼šè¾“å‡ºé«˜ç”µå¹³ï¼Œå½“æ”¶åˆ°åå°„å›æ¥çš„å£°æ³¢åï¼ŒEchoä¼šé‡æ–°å˜å›ä½ç”µå¹³ã€‚å› æ­¤ï¼Œåœ¨ä½¿ç”¨HC-SR04æ¨¡å—æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦é€šè¿‡å‘Trigå¼•è„šåŠ é«˜ç”µå¹³è§¦å‘æµ‹é‡æŒ‡ä»¤ï¼Œä¹‹åç›‘å¬Echoå¼•è„šé«˜ç”µå¹³çš„æŒç»­æ—¶é—´ï¼Œå³å¯å®Œæˆæµ‹è·å·¥ä½œã€‚ äºŒã€è¿çº¿ä¸ç¼–ç æˆ‘ä»¬é€‰æ‹©BCMç¼–ç ä¸‹çš„GPIO17æ¥æ§åˆ¶è¶…å£°å‘ç”ŸTrigå¼•è„šï¼Œä½¿ç”¨GPIO18æ¥è·å–Echoå¼•è„šçš„ç”µå¹³ã€‚è¿çº¿å¦‚ä¸‹ï¼š HC-SR04æ¨¡å— æ ‘è“æ´¾ VCC +5Vç”µæº GND GND Trig GPIO17(BCMç¼–ç ) Echo CGIO18(BCMç¼–ç ) ç¼–å†™å¦‚ä¸‹ä»£ç ï¼š 1234567891011121314151617181920212223242526272829303132333435363738#coding:utf-8import RPi.GPIO as GPIOimport time# è§¦å‘å£°æ³¢å¼•è„štrig = 11# ç›‘å¬ä¿¡å·echo = 12def getDistance(): # è¾“å‡ºé«˜ç”µå¹³ GPIO.output(trig, GPIO.HIGH) # æŒç»­15usé«˜ç”µå¹³ è§¦å‘è¶…å£°æ³¢ time.sleep(0.000015) # åœæ­¢åŠ é«˜ç”µå¹³ GPIO.output(trig, GPIO.LOW) # å¼€å§‹æ£€æµ‹ä¿¡å·å¼•è„šçš„ç”µå¹³ä¸ºé«˜ç”µå¹³æ—¶å¼€å§‹è®¡æ—¶ while GPIO.input(echo) == 0: pass t1 = time.time() # ä¿¡å·å¼•è„šçš„ç”µå¹³ä¸ºä½ç”µå¹³æ—¶è®¡ç®—æ—¶é—´é—´éš” while GPIO.input(echo) == 1: pass t2 = time.time() # è®¡ç®—è·ç¦» s = (t2 - t1)*340/2 return sGPIO.setmode(GPIO.BOARD)GPIO.setup(trig, GPIO.OUT, initial=GPIO.LOW)GPIO.setup(echo, GPIO.IN, pull_up_down=GPIO.PUD_DOWN)while True: s = getDistance() print(\"å½“å‰è·ç¦»å‰æ–¹éšœç¢ç‰©ï¼š%fm\"%(s)) time.sleep(1) åœ¨æ ‘è“æ´¾ä¸­è¿è¡Œä¸Šé¢ä»£ç ï¼Œå³å¯å®ç°è¶…å£°æ³¢æµ‹è·ï¼Œæ•ˆæœå¦‚ä¸‹å›¾ï¼š ä¸“æ³¨æŠ€æœ¯ï¼Œæ‡‚çš„çƒ­çˆ±ï¼Œæ„¿æ„åˆ†äº«ï¼Œåšä¸ªæœ‹å‹ QQï¼š316045346","categories":[{"name":"Linux","slug":"Linux","permalink":"http://huishao.cc/categories/Linux/"}],"tags":[],"keywords":[{"name":"Linux","slug":"Linux","permalink":"http://huishao.cc/categories/Linux/"}]},{"title":"ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ12ï¼‰â€”â€”Uå‹å…‰ç”µä¼ æ„Ÿå™¨","slug":"425ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ12ï¼‰â€”â€”Uå‹å…‰ç”µä¼ æ„Ÿå™¨","date":"2021-09-06T16:00:00.000Z","updated":"2021-09-08T16:45:23.822Z","comments":true,"path":"2021/09/07/425ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ12ï¼‰â€”â€”Uå‹å…‰ç”µä¼ æ„Ÿå™¨/","link":"","permalink":"http://huishao.cc/2021/09/07/425ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ12ï¼‰â€”â€”Uå‹å…‰ç”µä¼ æ„Ÿå™¨/","excerpt":"","text":"ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ12ï¼‰â€”â€”Uå‹å…‰ç”µä¼ æ„Ÿå™¨æœ¬ç¯‡åšå®¢ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨Uå‹å…‰ç”µä¼ æ„Ÿå™¨å®ç°ä¸€ä¸ªç®€å•çš„æµ‹é€Ÿå·¥å…·ã€‚æœ¬å®ä½¿ç”¨çš„å…ƒä»¶ç®€å•ï¼Œå®éªŒçš„åŸç†ä¹Ÿéå¸¸ç®€å•ã€‚ ä¸€ã€å…³äºUå‹å…‰ç”µä¼ æ„Ÿå™¨Uå‹å…‰ç”µä¼ æ„Ÿå™¨ç”±äºå…¶æœ‰ä¸€ä¸ªUå‹çš„å‡¹æ§½è€Œå¾—åã€‚å…¶å‡¹æ§½çš„ä¸€ä¾§ä¼šå‘å°„çº¢å¤–å…‰ï¼Œå‡¹æ§½çš„å¦ä¸€ä¾§è£…æœ‰æ¥æ”¶è£…ç½®ã€‚é€šè¿‡å¯¹çº¢å¤–å…‰çš„é®æŒ¡ä¸å¯¼é€šï¼Œä»è€Œæ”¹å˜å…ƒä»¶ä¿¡å·æºå¼•è„šçš„ç”µå¹³é«˜ä½ã€‚åŸºäºè¿™ç§ç‰¹æ€§ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“ä½¿ç”¨Uå‹å…‰ç”µä¼ æ„Ÿå™¨æ¥æµ‹é‡æ˜¯å¦æœ‰ç‰©ä½“é®æŒ¡å…‰çº¿ã€‚åœ¨æµ‹é€Ÿé¢†åŸŸï¼Œè¿ç”¨å¹¿æ³›ã€‚ æœ¬å®éªŒä½¿ç”¨çš„ä¼ æ„Ÿå™¨æ¨¡å—å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¯ä»¥çœ‹åˆ°ï¼Œæ­¤å…ƒä»¶æœ‰3ä¸ªå¼•è„šï¼ŒGNDå¼•è„šä¸ºæ¥åœ°å¼•è„šï¼ŒVCCå¼•è„šä¸ºç”µæºå¼•è„šï¼ŒOUTå¼•è„šæ˜¯è¾“å‡ºå¼•è„šï¼Œå½“æ¥æ”¶å™¨èƒ½å¤Ÿæ¥æ”¶åˆ°ä»å‘å°„æºå‘å‡ºçš„å…‰çº¿æ—¶ï¼Œè¾“å‡ºå¼•è„šä¸ºä½ç”µå¹³ï¼Œå½“å…‰çº¿è¢«é˜»æ–­æ—¶ï¼Œè¾“å‡ºå¼•è„šä¸ºé«˜ç”µå¹³ã€‚ äºŒã€è®¡æ•°å™¨ OR æµ‹é€Ÿå™¨Uå‹å…‰ç”µä¼ æ„Ÿå™¨æœ‰ç€éå¸¸å¹¿æ³›çš„åº”ç”¨ï¼Œè¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœä¸€ä¸ªè½¦é—´æµæ°´çº¿åœ¨ä¸åœçš„ç”Ÿäº§å•†å“ï¼Œå¦‚ä½•æ–¹ä¾¿çš„å¯¹ç”Ÿäº§çš„å•†å“æ•°é‡è¿›è¡Œè‡ªåŠ¨è®¡æ•°ï¼Ÿè¿™æ—¶æˆ‘ä»¬å°±å¯ä»¥å°†ä¸€ä¸ªUå‹å…‰ç”µä¼ æ„Ÿå™¨å®‰è£…åˆ°å•†å“çš„ä¼ é€å¸¦ä¸Šï¼Œåªè¦æœ‰å•†å“ä»ä¼ é€å¸¦ä¸Šé€šè¿‡ï¼Œå³ä¼šæŒ¡ä½ä¼ æ„Ÿå™¨å‘å°„æºå‘å‡ºçš„çº¢å¤–å…‰ï¼Œä»è€Œè§¦å‘ç”µå¹³çš„è·³å˜ï¼Œå®ç°è®¡æ•°åŠŸèƒ½ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒUå‹å…‰ç”µä¼ æ„Ÿå™¨ä¹Ÿå¯ä»¥æ–¹ä¾¿çš„å®ç°æµ‹é€Ÿï¼Œæˆ‘ä»¬åªè¦çŸ¥é“äº†ç‰©ä½“çš„é•¿åº¦å’Œç‰©ä½“é€šè¿‡Uå‹ä¼ æ„Ÿå™¨çš„æ—¶é—´ï¼Œå°±å¯ä»¥ä½¿ç”¨å…¬å¼**_v = s / t_**ä»è€Œè®¡ç®—å‡ºç‰©ä½“è¿åŠ¨çš„é€Ÿåº¦ã€‚ä¸‹é¢æˆ‘ä»¬å°±æ¥ç¼–å†™ä»£ç å®ç°è¿™ä¸¤ä¸ªåŠŸèƒ½ã€‚ é¦–å…ˆï¼Œå…ƒä»¶ä¸æ ‘è“æ´¾è¿çº¿å¦‚ä¸‹ï¼š Uå‹å…‰ç”µä¼ æ„Ÿå™¨ æ ‘è“æ´¾ VCC 3.3Vç”µæº GND GND OUT GPIO17(BCMç¼–ç ) ç¼–å†™å¦‚ä¸‹ä»£ç ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243#coding:utf-8import RPi.GPIO as GPIOimport time# é‡‡ç”¨ç‰©ç†ç¼–ç GPIO.setmode(GPIO.BOARD)# BCM GPIO17çš„ç‰©ç†ç¼–ç æ˜¯11out_pin = 11# 0 è®¡æ•°æ¨¡å¼ 1 æµ‹é€Ÿæ¨¡å¼MODE = 0count = 0# æµ‹é€Ÿæ¨¡å¼ä¸‹ï¼Œéœ€è¦åˆå§‹åŒ–é•¿åº¦S å•ä½ä¸ºæ¯«ç±³S = 10t1 = 0t2 = 0# è¿›è¡Œå¼•è„šçš„åˆå§‹åŒ–ï¼Œä¸è¢«é®æŒ¡æ—¶ä¸ºä½ç”µå¹³ï¼Œä½¿ç”¨ä½ç”µå¹³çš„ä¸‹æ‹‰ç”µé˜»GPIO.setup(out_pin, GPIO.IN, pull_up_down=GPIO.PUD_DOWN)# å®šä¹‰å›è°ƒå‡½æ•°def switch_state(pin): global count,t1,t2 # å¦‚æœæ˜¯é«˜ç”µå¹³ if GPIO.input(pin): print(\"ç‰©ä½“é®æŒ¡\") if MODE == 0: count += 1 else: t1 = time.time() else: print(\"ç‰©ä½“é®æŒ¡æ¶ˆå¤±\") if MODE == 0: print('è®¡æ•°å™¨-æ•°é‡ï¼š%d'%(count)) else: t2 = time.time() t = t2 - t1 v = S / t print('æµ‹é€Ÿå™¨-é€Ÿåº¦%fmm/s'%(v))GPIO.add_event_detect(out_pin, GPIO.BOTH, callback=switch_state)while True: pass å¦‚ä¸Šä»£ç æ‰€ç¤ºï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®MODEå˜é‡æ¥è®©å…ƒä»¶å·¥ä½œåœ¨è®¡æ•°æ¨¡å¼ä¸‹æˆ–è€…æµ‹é€Ÿæ¨¡å¼ä¸‹ã€‚åœ¨æ ‘è“æ´¾ä¸Šè¿è¡Œæ­¤ä»£ç ï¼Œå°è¯•ä¸‹è®¡æ•°å’Œæµ‹é€Ÿçš„åŠŸèƒ½å§ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œæ‡‚çš„çƒ­çˆ±ï¼Œæ„¿æ„åˆ†äº«ï¼Œåšä¸ªæœ‹å‹ QQï¼š316045346","categories":[{"name":"Linux","slug":"Linux","permalink":"http://huishao.cc/categories/Linux/"}],"tags":[],"keywords":[{"name":"Linux","slug":"Linux","permalink":"http://huishao.cc/categories/Linux/"}]},{"title":"ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ11ï¼‰â€”â€”ä½¿ç”¨LCDå±","slug":"424ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ11ï¼‰â€”â€”ä½¿ç”¨LCDå±","date":"2021-08-27T16:00:00.000Z","updated":"2021-09-08T16:44:22.796Z","comments":true,"path":"2021/08/28/424ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ11ï¼‰â€”â€”ä½¿ç”¨LCDå±/","link":"","permalink":"http://huishao.cc/2021/08/28/424ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ11ï¼‰â€”â€”ä½¿ç”¨LCDå±/","excerpt":"","text":"ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ11ï¼‰â€”â€”ä½¿ç”¨LCDå±é€šè¿‡æœ¬ç³»åˆ—åšå®¢å‰å‡ ç¯‡æ–‡ç« çš„ä»‹ç»ï¼Œæˆ‘ä»¬å·²ç»ä½“éªŒè¿‡äº†è®¸å¤šä¼ æ„Ÿå™¨å…ƒä»¶ï¼Œå®ƒä»¬å¤§å¤šéå¸¸ç®€å•ï¼Œå¯ä»¥ç›´æ¥å¯¹å…¶è¿›è¡Œæ•°æ®è¯»å–æˆ–å†™å…¥ï¼Œæ— éœ€å¤æ‚çš„æŒ‡ä»¤é…ç½®ã€‚æœ¬ç¯‡åšå®¢ï¼Œæˆ‘ä»¬å°†ä»‹ç»ä¸€ä¸ªç›¸å¯¹å¤æ‚çš„å…ƒä»¶ï¼šLCDå±ã€‚å½“ä»Šå¤§å¤šæ•°å¸¸è§çš„ç”µå­è®¾å¤‡ä¸ºäº†ä¾¿äºç”¨æˆ·æ“ä½œï¼Œéƒ½ä¼šé…å¤‡ä¸€å—LCDæ¶²æ™¶æ˜¾ç¤ºå±ï¼Œç”¨æˆ·é€šè¿‡å±å¹•å¯ä»¥è·å–åˆ°è®¾å¤‡çš„ç›¸å…³ä¿¡æ¯æ–¹ä¾¿ä½¿ç”¨ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬å°†å°è¯•ä½¿ç”¨æ ‘è“æ´¾æ¥åœ¨LCDå±ä¸Šå±•ç¤ºä¿¡æ¯ã€‚ ä¸€ã€LCD 1602LCDå±æ˜¯Liquid Crystal Displayçš„ç®€ç§°ï¼Œå³æ¶²æ™¶æ˜¾ç¤ºå±ã€‚LCD 1602æ˜¯ä¸€ç§ç‚¹é˜µå¼çš„ç»™ä»˜å‹æ¶²æ™¶æ˜¾ç¤ºå±ï¼Œå…¶å‹å·ä¸º1602æœ¬èº«ä¹Ÿæ˜¯æœ‰æ„ä¹‰çš„ï¼Œè¡¨ç¤ºå…¶å¯ä»¥æ˜¾ç¤º2è¡Œä¿¡æ¯ï¼Œæ¯è¡Œå¯ä»¥æ˜¾ç¤º16ä¸ªå­—ç¬¦ã€‚LCD1602æœ€å¤šå¯ä»¥æ˜¾ç¤º32ä¸ªå­—ç¬¦ï¼Œä»·æ ¼ä¸Šä¹Ÿå¹¶ä¸æ˜‚è´µï¼Œåå‡ å…ƒé’±å³å¯ä¹°åˆ°ã€‚LCD1602æœ‰16ä¸ªå¼•è„šï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š LCD1602çš„16ä¸ªå¼•è„šçœ‹ä¸Šå»å¾ˆå¤šï¼Œä½†å®é™…ä¸Šä½¿ç”¨èµ·æ¥å¹¶ä¸å¤æ‚ï¼Œæˆ‘ä»¬é¦–å…ˆå°†ä¸Šå›¾è¿™äº›å¼•è„šçš„åŠŸèƒ½æ¥ä»‹ç»ä¸€ä¸‹ã€‚ å¼•è„š1ï¼šæ¥åœ°å¼•è„š å¼•è„š2ï¼šæ¥5Vç”µå‹ å¼•è„š3ï¼šVEå¼•è„šä¸ºå±å¹•å¯¹æ¯”åº¦è°ƒæ•´å¼•è„šï¼Œæ¥åœ°æ—¶å¯¹æ¯”åº¦æœ€å¤§ï¼Œæ¥æ­£æç”µæºæ—¶å¯¹æ¯”åº¦æœ€å°ã€‚ å¼•è„š4ï¼šRSå¼•è„šä¸ºåŠŸèƒ½æ¨¡å¼å¼•è„š(ä¹Ÿè¢«ç§°ä¸ºå¯„å­˜å™¨é€‰æ‹©å¼•è„š)ï¼Œä¸ºå…¶åŠ é«˜ç”µå¹³æ—¶ä¸ºæ•°æ®æ¨¡å¼(å­˜å–å±å¹•å±•ç¤ºçš„æ•°æ®)ï¼Œä¸ºå…¶åŠ ä½ç”µå¹³æ—¶ä¸ºæŒ‡ä»¤æ¨¡å¼(è¯»å–æŒ‡ä»¤)ã€‚ å¼•è„š5ï¼šRWå¼•è„šä¸ºè¯»å†™æ¨¡å¼å¼•è„šï¼Œä¸ºå…¶åŠ é«˜ç”µå¹³æ—¶ä¸ºè¯»æ“ä½œï¼Œä¸ºå…¶åŠ ä½ç”µå¹³æ—¶ä¸ºå†™æ“ä½œã€‚ å¼•è„š6ï¼šEnableå¼•è„šï¼Œæ­¤å¼•è„šç”¨æ¥è§¦å‘åŠ¨ä½œï¼Œè´Ÿè·³å˜æ—¶è¿›è¡Œæ•°æ®å¤„ç†æˆ–æŒ‡ä»¤çš„æ‰§è¡Œã€‚ å¼•è„š7-å¼•è„š14ï¼šè¿™8ä¸ªå¼•è„šä¸ºæ•°æ®å¼•è„šï¼Œç”¨æ¥è¿›è¡Œæ•°æ®ä¼ è¾“ã€‚ å¼•è„š15ï¼šèƒŒå…‰ç”µæºå¼•è„šã€‚ å¼•è„š16ï¼šèƒŒå…‰æ¥åœ°å¼•è„šã€‚ ä¸Šé¢æ‰€ä»‹ç»çš„å¼•è„šä¸­ï¼Œå¼•è„š1ï¼Œå¼•è„š2ï¼Œå¼•è„š15å’Œå¼•è„š16æ¯”è¾ƒå¥½ç†è§£ï¼Œå…¶éƒ½æ˜¯ä½œä¸ºä¾›ç”µåŠŸèƒ½ï¼Œæ— éœ€ç¼–ç¨‹æ“ä½œã€‚å¼•è„š3æ˜¯ä¸€ä¸ªå•ç‹¬è°ƒå¢å¯¹æ¯”åº¦åŠŸèƒ½çš„å¼•è„šï¼Œä½œç”¨ä¹Ÿç›¸å¯¹ç‹¬ç«‹ï¼Œæ— éœ€å¤æ‚çš„æŒ‡ä»¤æ“ä½œã€‚å¼•è„š4å’Œå¼•è„š5æ˜¯æ¯”è¾ƒæ ¸å¿ƒçš„ä¸¤ä¸ªå¼•è„šï¼Œè¿™ä¸¤ä¸ªå¼•è„šçš„é«˜ä½ç”µå¹³çŠ¶æ€ç»„åˆå…±æœ‰4ç§ï¼Œåˆ†åˆ«ä¼šå°†LCD1602è®¾ç½®ä¸ºè¯»æŒ‡ä»¤æ¨¡å¼ï¼Œå†™æŒ‡ä»¤æ¨¡å¼ï¼Œè¯»æ•°æ®æ¨¡å¼å’Œå†™æ•°æ®æ¨¡å¼ã€‚å¼•è„š6å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªè§¦å‘å¼•è„šï¼Œé€šè¿‡æ“ä½œè¿™ä¸ªå¼•è„šçš„ç”µå¹³è·³å˜æ¥è®©LCD1602æ‰§è¡Œå…·ä½“çš„åŠŸèƒ½ã€‚å¼•è„š7-å¼•è„š14ç”¨æ¥è¿›è¡Œæ•°æ®çš„å­˜å–æˆ–æŒ‡ä»¤çš„å­˜å–ã€‚ ç°åœ¨è¯·ä½ åŠ¡å¿…å°†ä¸Šé¢æ‰€ä»‹ç»çš„å†…å®¹å®Œå…¨ç†è§£ï¼Œå¦åˆ™åé¢çš„å†…å®¹å¯èƒ½ä¼šæ›´åŠ ä»¤ä½ è¿·æƒ‘ã€‚å¯¹äºLCD1206çš„è¯»æ•°æ®æ¨¡å¼å’Œå†™æ•°æ®æ¨¡å¼ä½ åº”è¯¥æ²¡æœ‰ä»€ä¹ˆç–‘æƒ‘ï¼Œåªè¦é€šè¿‡å¼•è„š4å’Œå¼•è„š5è®¾ç½®æ­£ç¡®çš„æ¨¡å¼åï¼Œå†é€šè¿‡GPIOæ¥å†™å’Œè¯»å¼•è„š7åˆ°å¼•è„š14çš„ç”µå¹³æ•°æ®ï¼Œå³å¯å¾—åˆ°ä¸€ä¸ª8ä½çš„æ•°æ®ã€‚æˆ‘ä»¬æ ¸å¿ƒéœ€è¦ç†è§£çš„æ˜¯æŒ‡ä»¤æ¨¡å¼ï¼ŒLCD1602çš„æŒ‡ä»¤é›†å¦‚ä¸‹ï¼š ä¸Šå›¾ä¸­çš„RSå’ŒR/Wå°±æ˜¯å¼•è„š4å’Œå¼•è„š5ï¼Œå…¶æ§åˆ¶æ¨¡å¼ï¼Œä¸æŒ‡ä»¤æœ¬èº«æ— å…³ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆä¸å…³å¿ƒã€‚ä»DB7åˆ°DB0æ˜¯çœŸæ­£çš„æŒ‡ä»¤éƒ¨åˆ†ã€‚æˆ‘ä»¬ä¸‹é¢æ¥é€ä¸€ä»‹ç»ã€‚ 1. æŒ‡ä»¤ä¸€ï¼š0000 0001 æ¸…å±æŒ‡ä»¤ï¼Œå“åº”æ—¶é—´ä¸º1.53msã€‚ 2.æŒ‡ä»¤äºŒï¼š0000 001- (æœ€åä¸€ä½â€™-â€˜è¡¨ç¤º0å’Œ1éƒ½å¯ä»¥ï¼Œä¸è¢«å…³å¿ƒ) å…‰æ ‡å½’ä½æŒ‡ä»¤ï¼Œæ‰§è¡Œåå…‰æ ‡çš„ä½ç½®ä¼šå›åˆ°èµ·ç‚¹ï¼Œä½†æ˜¯æ•°æ®å¯„å­˜å™¨ä¸­çš„æ•°æ®ä¸ä¼šæ¸…ç©ºã€‚ 3.æŒ‡ä»¤ä¸‰ï¼š0000 01[I/D][SH] å…‰æ ‡ç§»åŠ¨æ¨¡å¼è®¾ç½®æŒ‡ä»¤ï¼ŒI/Då’ŒSHä¸¤ä¸ªæ§åˆ¶ä¸ºå…‰æ ‡æˆ–å±å¹•ç§»åŠ¨æ¨¡å¼ã€‚ I/Dè®¾ç½®ä¸º0ï¼šæ¯æ¬¡è¯»å–ä¸€ä¸ªå­—ç¬¦åå…‰æ ‡å·¦ç§»ã€‚ I/Dè®¾ç½®ä¸º1ï¼šæ¯æ¬¡è¯»å–ä¸€ä¸ªå­—ç¬¦åå…‰æ ‡å³ç§»ã€‚ SHè®¾ç½®ä¸º0ï¼šå±å¹•ä¸ç§»åŠ¨ã€‚ SHè®¾ç½®ä¸º1ï¼šå±å¹•ç§»åŠ¨ï¼Œæ–¹å‘ä¸I/Dçš„è®¾ç½®ä¸€è‡´ã€‚ 4.æŒ‡ä»¤å››ï¼š0000 1[D][C][B] æ˜¾ç¤ºæ¨¡å¼è®¾ç½®æŒ‡ä»¤ï¼ŒDï¼ŒCï¼ŒBè¿™ä¸‰ä¸ªä½åˆ†åˆ«è®¾ç½®ä¸»æ˜¾ç¤ºåŠŸèƒ½ï¼Œå…‰æ ‡æ˜¾ç¤ºåŠŸèƒ½ï¼Œå…‰æ ‡é—ªçƒåŠŸèƒ½ã€‚ Dï¼šè®¾ç½®ä¸º0åˆ™å…³é—­å±å¹•ï¼Œè®¾ç½®ä¸º1å¼€å¯å±å¹•ã€‚ Cï¼šè®¾ç½®ä¸º0å…³é—­å…‰æ ‡ï¼Œè®¾ç½®ä¸º1æ˜¾ç¤ºå…‰æ ‡ã€‚ Bï¼šè®¾ç½®ä¸º0å…‰æ ‡ä¸é—ªçƒï¼Œè®¾ç½®ä¸º1å…‰æ ‡é—ªçƒã€‚ 5.æŒ‡ä»¤äº”ï¼š0001 [S/C][R/L]â€“ è®¾ç½®å…‰æ ‡å’Œæ˜¾ç¤ºå±ç§»åŠ¨æ–¹å‘ã€‚ S/Cè®¾ç½®ä¸º0æ—¶ï¼ŒR/Lè®¾ç½®ä¸º0åˆ™å…‰æ ‡å·¦ç§»ï¼ŒRLè®¾ç½®ä¸º1æ—¶å…‰æ ‡å³ç§»ã€‚ S/Cè®¾ç½®ä¸º1æ—¶ï¼ŒR/Lè®¾ç½®ä¸º0åˆ™æ˜¾ç¤ºå†…å®¹å·¦ç§»ï¼ŒR/Lè®¾ç½®ä¸º1åˆ™æ˜¾ç¤ºå†…å®¹å³ç§»ã€‚ 6.æŒ‡ä»¤å…­ï¼š001[DL] [N][F]â€“ åŠŸèƒ½æ¨¡å¼è®¾ç½®æŒ‡ä»¤ã€‚ DLï¼šè®¾ç½®ä¸º1æ—¶é‡‡ç”¨8ä½æ€»çº¿è¯»æ•°æ®ï¼Œè®¾ç½®ä¸º0æ—¶é‡‡ç”¨4ä½æ€»çº¿è¯»æ•°æ®ã€‚ Nï¼šè®¾ç½®ä¸º0æ—¶æ˜¯å•è¡Œæ˜¾ç¤ºæ¨¡å¼ï¼Œè®¾ç½®ä¸º1æ—¶æ˜¯åŒè¡Œæ˜¾ç¤ºæ¨¡å¼ã€‚ Fï¼šè®¾ç½®ä¸º0æ—¶ä¸º5*8çš„ç‚¹é˜µå­—ç¬¦ï¼Œè®¾ç½®ä¸º1æ—¶ä¸º5*11çš„ç‚¹é˜µå­—ç¬¦ã€‚ 7.æŒ‡ä»¤ä¸ƒï¼š01[A5][A4] [A3][A2][A1][A0] è®¾ç½®ä¸‹ä¸€ä¸ªå­—ç¬¦è¦æ˜¾ç¤ºçš„ä½ç½®ã€‚A5ä½è®¾ç½®è¦å®šä½åˆ°çš„è¡Œï¼ŒA0åˆ°A4ä½å®šä½è¦æ˜¾ç¤ºçš„ä½ç½®ï¼Œå–å€¼ä¸º0-16ä¹‹é—´ã€‚ 8.æŒ‡ä»¤å…«ï¼š1[A6][A5][A4] [A3][A2][A1][A0] æ•°æ®å¯„å­˜å™¨åœ°å€è®¾ç½®ã€‚ äº†è§£äº†LD1602æ˜¾ç¤ºå±ä¸Šé¢çš„æŒ‡ä»¤ç”¨æ³•ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç¼–ç¨‹æ¥æ§åˆ¶æ˜¾ç¤ºå±æ˜¾ç¤ºçš„å†…å®¹äº†ã€‚ äºŒã€å¸¦I2Cæ¨¡å—çš„LCD 1602å‰é¢æˆ‘ä»¬è¯´è¿‡ï¼ŒLCD1602æœ‰16ä¸ªå¼•è„šã€‚åŸåˆ™ä¸Šæˆ‘ä»¬å·²ç»å¯ä»¥ä½¿ç”¨æ ‘è“æ´¾æ¥æ§åˆ¶æ˜¾ç¤ºå±çš„æ˜¾ç¤ºäº†ï¼Œä½†æ˜¯16ä¸ªå¼•è„šå…¨éƒ¨è¿æ¥åˆ°æ ‘è“æ´¾ä¼šä½¿æ¥çº¿ååˆ†çš„å¤æ‚ï¼Œè€Œä¸”ç¨‹åºä»£ç çš„ç¼–å†™ä¹Ÿéå¸¸ç¹çï¼Œè¦å¯¹å¤ªå¤šçš„GPIOå¼•è„šè¿›è¡Œæ“ä½œï¼Œååˆ†ä¸ä¾¿ã€‚æœ¬æ¬¡å®éªŒï¼Œæˆ‘ä»¬é‡‡ç”¨çš„æ˜¯å¸¦I2Cæ¨¡å—çš„LCDå…ƒä»¶ï¼ŒI2Cæ¨¡å—æœ¬èº«å°†ä¸€äº›ç‹¬ç«‹çš„åŠŸèƒ½è¿›è¡Œäº†å°è£…ï¼Œé€šè¿‡I2Cæ¨¡å—ï¼Œæˆ‘ä»¬å¯ä»¥ä»¥8ä½æ•°æ®ä¸ºæ ‡å‡†æ¥ä¼ è¾“ä»»ä½•æˆ‘ä»¬æƒ³è¦æ‰§è¡Œçš„æŒ‡ä»¤æˆ–è®©LCDæ˜¾ç¤ºçš„å­—ç¬¦ï¼Œéå¸¸æ–¹ä¾¿ã€‚ å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæœ‰äº†IC2æ¨¡å—çš„LCD1602å…ƒä»¶ï¼Œåªéœ€è¦4ä¸ªå¼•è„šå³å¯å®ç°æ˜¾ç¤ºåŠŸèƒ½ã€‚ä¸‹é¢æˆ‘ä»¬æ¥åˆ†æä¸‹å¦‚ä½•ä½¿ç”¨æ­¤I2Cæ¨¡å—ã€‚ é¦–å…ˆå…³äºI2Cé€šä¿¡çš„ç›¸å…³å†…å®¹ï¼Œä¹‹å‰åšå®¢å·²ç»æœ‰è¯¦ç»†çš„ä»‹ç»ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚æˆ‘ä»¬å…ˆæ¥ä»‹ç»ä¸‹ä¸ºä½•é€šè¿‡4ä¸ªå¼•è„šé€šè¿‡I2Cæ€»çº¿ä¼ è¾“8ä½çš„æ•°æ®é›†åˆå®ç°æ‰€æœ‰åŠŸèƒ½ã€‚ LCDå¼•è„š1ä¸å¼•è„š2ï¼šç”¨I2Cæ¨¡å—çš„ç”µæºå¼•è„šå’Œæ¥åœ°å¼•è„šä»£æ›¿ã€‚ LCDå¼•è„š15å’Œå¼•è„š16ï¼šLCDçš„è¿™ä¸¤ä¸ªå¼•è„šåŠŸèƒ½ä¸ºæ§åˆ¶èƒŒå…‰ï¼Œæ­¤é€»è¾‘è¢«å°è£…è¿›äº†I2Cæ¨¡å—ä¸­ï¼ŒI2Cæ¨¡å—æ¯æ¬¡å†™å…¥çš„8ä½æ•°æ®ä¸­çš„ç¬¬4ä½ç”¨æ¥æ§åˆ¶èƒŒå…‰ã€‚ LCDçš„å¼•è„š3ï¼šLCDçš„æ­¤å¼•è„šç”¨æ¥è®¾ç½®æ˜¾ç¤ºçš„å¯¹æ¯”åº¦ï¼Œåœ¨I2Cæ¨¡å—ä¸­ï¼Œé€šè¿‡ä¸€ä¸ªå¯è°ƒèŠ‚çš„ç”µé˜»æ¥å®ç°æ­¤åŠŸèƒ½ï¼Œåœ¨åé¢çš„å®éªŒä¸­å¦‚æœå‘ç°å±å¹•æ˜¾ç¤ºä¸æ¸…ï¼Œå¯ä»¥å°è¯•è°ƒèŠ‚æ­¤ç”µé˜»å™¨ã€‚ LCDçš„å¼•è„š4ï¼Œå¼•è„š5å’Œå¼•è„š6ï¼šè¿™å‡ ä¸ªåŠŸèƒ½å¼•è„šä¹Ÿè¢«å°è£…è¿›äº†I2Cæ¨¡å—ä¸­ï¼ŒI2Cæ¨¡å—æ¯æ¬¡å†™å…¥çš„8ä½æ•°æ®ä¸­çš„ç¬¬1ä½ï¼Œçš„2ä½å’Œç¬¬3ä½åˆ†åˆ«ç”¨æ¥æ§åˆ¶è¿™äº›å¼•è„šã€‚ LCDå‰©ä¸‹çš„æ•°æ®å¼•è„šçš„æ•°æ®ç”±I2Cä¼ è¾“çš„8ä½æ•°æ®ä¸­çš„é«˜4ä½æ¥å¯¹åº”ï¼Œåœ¨LCDçš„8ä½æ•°æ®æ¨¡å¼ä¸‹ï¼ŒI2Cåˆ†ä¸¤æ¬¡ä¼ è¾“ä¸€æ¬¡å®Œæ•´çš„æ•°æ®ï¼Œå‰ä¼ è¾“çš„4ä½ä¸ºLCDæ‰€éœ€æ•°æ®çš„ä½4ä½ï¼Œåä¼ è¾“çš„æ•°æ®ä¸ºLCDæ‰€éœ€æ•°æ®çš„é«˜4ä½ã€‚åœ¨LCDçš„4ä½æ•°æ®æ¨¡å¼ä¸‹ï¼Œå› ä¸ºLCDéœ€è¦è·å–åˆ°å®Œæ•´çš„8ä½æ•°æ®ï¼Œå› æ­¤ä¹Ÿéœ€è¦é€šè¿‡ä¸¤æ¬¡æ•°æ®ä¼ è¾“ï¼Œåªæ˜¯æ­¤æ—¶å…ˆä¼ è¾“çš„æ•°æ®ä¸ºLCDæ‰€éœ€æ•°æ®çš„é«˜4ä½ï¼Œåä¼ è¾“çš„æ•°æ®ä¸ºLCDæ‰€éœ€æ•°æ®çš„ä½4ä½ï¼Œè¿™ç‚¹éœ€è¦ç‰¹åˆ«æ³¨æ„ã€‚ ä¸‹é¢æ€»ç»“äº†I2Cåœ¨ä¼ è¾“æ•°æ®æ—¶æ¯ä¸€ä½çš„æ„ä¹‰ï¼š ç¬¬8ä½ ç¬¬7ä½ ç¬¬6ä½ ç¬¬5ä½ ç¬¬4ä½ ç¬¬3ä½ ç¬¬2ä½ ç¬¬1ä½ æ•°æ®/æŒ‡ä»¤ æ•°æ®/æŒ‡ä»¤ æ•°æ®/æŒ‡ä»¤ æ•°æ®/æŒ‡ä»¤ èƒŒå…‰æ§åˆ¶ä½ Enableæ§åˆ¶ä½ RWæ§åˆ¶ä½ RSæ§åˆ¶ä½ ä¸‰ã€ç¼–ç å®éªŒä½¿ç”¨I2Cæ¨¡å—å°è£…çš„LCD1602åªæœ‰4ä¸ªå¼•è„šï¼Œæ¥çº¿éå¸¸ç®€å•ï¼Œå¦‚ä¸‹ï¼š LCD æ ‘è“æ´¾ GND GND VCC +5V SDA æ ‘è“æ´¾SDAåŠŸèƒ½å¼•è„š SCL æ ‘è“æ´¾SCLåŠŸèƒ½å¼•è„š å°†LCD1602ä¸æ ‘è“æ´¾è¿æ¥å®Œæˆåï¼Œåœ¨æ ‘è“æ´¾çš„ç»ˆç«¯æ‰§è¡Œå¦‚ä¸‹æŒ‡ä»¤æŸ¥çœ‹I2Cè®¾å¤‡ï¼š 1sudo i2cdetect -y 1 è¾“å‡ºå…¥ä¸‹å›¾æ‰€ç¤ºï¼š å¯ä»¥çœ‹åˆ°ï¼Œç›®å‰æˆ‘ä»¬åªè¿æ¥äº†ä¸€ä¸ªI2Cè®¾å¤‡ï¼Œè®¾å¤‡å·ä¸º27ã€‚ ç”±äºèƒŒå…‰çš„æ§åˆ¶ä½ç›¸å¯¹ç‹¬ç«‹ï¼Œæˆ‘ä»¬å°è£…å•ç‹¬çš„å‡½æ•°æ¥å¤„ç†ï¼Œå¦‚ä¸‹ï¼š 12345678910111213# æ˜¯å¦å¼€å¯èƒŒå…‰ ç”±PCF8574Tçš„ä½4ä½ä¸­çš„ç¬¬4ä½å†³å®šBLEN = 1 # è¡¥å……èƒŒå…‰æ§åˆ¶ä½def addBlenControl(data): global BLEN tmpData = data if BLEN: # å°†ç¬¬4ä½èƒŒå…‰æ§åˆ¶ä½å¼ºåˆ¶è®¾ç½®1 tmpData = data | 0b00001000 else: # å°†ç¬¬4ä½èƒŒå…‰æ§åˆ¶ä½å¼ºåˆ¶è®¾ç½®ä¸º0 tmpData = data &amp; 0b11110111 return tmpData åŒç†ï¼Œå¯ä»¥å°†Enableä½çš„æ§åˆ¶ï¼ŒRSä½çš„æ§åˆ¶éƒ½å°è£…æˆå‡½æ•°ï¼š 12345678910111213141516171819# è¡¥å……Enableæ§åˆ¶ä½def addEnableControl(data, high): tempData = data # ç¬¬3ä½æ§åˆ¶Enable if high: tempData |= 0b00000100 else: tempData &amp;= 0b11111011 return tempData# è¡¥å……RSæ§åˆ¶ä½def addRSControl(data, high): tempData = data # ç¬¬1ä½æ§åˆ¶RS if high: tempData |= 0b00000001 else: tempData &amp;= 0b11111110 return tempData åœ¨å‘I2Cå‘é€æ•°æ®å‰ï¼Œæ ¹æ®é…ç½®çš„èƒŒå…‰è®¾ç½®æ¥å†³å®šèƒŒå…‰æ§åˆ¶ä½çš„å€¼ï¼š 123456# é€šè¿‡I2Cæ€»çº¿å†™å…¥æ•°æ®def writeI2C(addr, data): # æ·»åŠ èƒŒå…‰æ§åˆ¶ temp = addBlenControl(data) # å†™æ•°æ®åˆ°I2Cæ€»çº¿ BUS.write_byte(addr ,temp) å‡†å¤‡å¥½äº†è¿™äº›å·¥å…·å‡½æ•°ï¼Œæˆ‘ä»¬åªéœ€è¦æ ¹æ®LCD1602çš„æŒ‡ä»¤æ‰‹å†Œæ¥è®¾ç½®å…·ä½“çš„åŠŸèƒ½ï¼Œå‘é€è¦å±•ç¤ºçš„æ•°æ®å³å¯ï¼Œå®Œæ•´çš„ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150#coding:utf-8import timeimport smbusBUS = smbus.SMBus(1)# LCDå±å¹•çš„ç¡¬ä»¶åœ°å€LCD_ADDR = 0x27# æ˜¯å¦å¼€å¯èƒŒå…‰ ç”±PCF8574Tçš„ä½4ä½ä¸­çš„ç¬¬4ä½å†³å®šBLEN = 1 # è¡¥å……èƒŒå…‰æ§åˆ¶ä½def addBlenControl(data): global BLEN tmpData = data if BLEN: # å°†ç¬¬4ä½èƒŒå…‰æ§åˆ¶ä½å¼ºåˆ¶è®¾ç½®1 tmpData = data | 0b00001000 else: # å°†ç¬¬4ä½èƒŒå…‰æ§åˆ¶ä½å¼ºåˆ¶è®¾ç½®ä¸º0 tmpData = data &amp; 0b11110111 return tmpData # è¡¥å……Enableæ§åˆ¶ä½def addEnableControl(data, high): tempData = data # ç¬¬3ä½æ§åˆ¶Enable if high: tempData |= 0b00000100 else: tempData &amp;= 0b11111011 return tempData# è¡¥å……RSæ§åˆ¶ä½def addRSControl(data, high): tempData = data # ç¬¬1ä½æ§åˆ¶RS if high: tempData |= 0b00000001 else: tempData &amp;= 0b11111110 return tempData# é€šè¿‡I2Cæ€»çº¿å†™å…¥æ•°æ®def writeI2C(addr, data): # æ·»åŠ èƒŒå…‰æ§åˆ¶ temp = addBlenControl(data) # å†™æ•°æ®åˆ°I2Cæ€»çº¿ BUS.write_byte(addr ,temp)# å‘é€æŒ‡ä»¤åˆ°LCD1602def sendCommand(comm): # commé«˜4ä½æ•°æ®ä¼ è¾“ # ä½4ä½å…ˆæ¸…ç©º buf = comm &amp; 0b11110000 # å…ˆå°†Enableç½®ä¸ºé«˜ç”µå¹³ buf = addEnableControl(buf, 1) # è®¾ç½®ä¸ºæŒ‡ä»¤æ¨¡å¼ buf = addRSControl(buf, 0) # å†™å…¥æŒ‡ä»¤ writeI2C(LCD_ADDR ,buf) time.sleep(0.002) # å°†Enableç½®ä¸ºä½ç”µå¹³ ä½¿äº§ç”Ÿä½ç”µå¹³è·³å˜æ¥æ‰§è¡ŒæŒ‡ä»¤ buf = addEnableControl(buf, 0) writeI2C(LCD_ADDR ,buf) # commä½4ä½æ•°æ®ä¼ è¾“ # é«˜4ä½å…ˆæ¸…ç©º å¹¶å°†ä½4ä½çš„æ•°æ®ç§»åŠ¨åˆ°é«˜4ä½ buf = (comm &amp; 0b00001111) &lt;&lt; 4 # å½“æ¬¡æŒ‡ä»¤çš„ä½4ä½ç”¨æ¥ åšenable re rewçš„æ§åˆ¶ # å…ˆå°†Enableç½®ä¸ºé«˜ç”µå¹³ buf = addEnableControl(buf, 1) writeI2C(LCD_ADDR ,buf) time.sleep(0.002) # å°†Enableç½®ä¸ºä½ç”µå¹³ ä½¿äº§ç”Ÿä½ç”µå¹³è·³å˜æ¥æ‰§è¡ŒæŒ‡ä»¤ buf = addEnableControl(buf, 0) writeI2C(LCD_ADDR ,buf)# å‘é€æ•°æ®åˆ°LCD def sendData(data): # dataé«˜4ä½æ•°æ®ä¼ è¾“ # ä½4ä½å…ˆæ¸…ç©º buf = data &amp; 0b11110000 # å…ˆå°†Enableç½®ä¸ºé«˜ç”µå¹³ buf = addEnableControl(buf, 1) # è®¾ç½®ä¸ºæ•°æ®æ¨¡å¼ buf = addRSControl(buf, 1) writeI2C(LCD_ADDR ,buf) time.sleep(0.002) # å°†Enableç½®ä¸ºä½ç”µå¹³ ä½¿äº§ç”Ÿä½ç”µå¹³è·³å˜æ¥æ‰§è¡ŒæŒ‡ä»¤ buf = addEnableControl(buf, 0) writeI2C(LCD_ADDR ,buf) # dataä½4ä½æ•°æ®ä¼ è¾“ buf = (data &amp; 0b00001111) &lt;&lt; 4 # å…ˆå°†Enableç½®ä¸ºé«˜ç”µå¹³ buf = addEnableControl(buf, 1) # è®¾ç½®ä¸ºæ•°æ®æ¨¡å¼ buf = addRSControl(buf, 1) writeI2C(LCD_ADDR ,buf) time.sleep(0.002) # å°†Enableç½®ä¸ºä½ç”µå¹³ ä½¿äº§ç”Ÿä½ç”µå¹³è·³å˜æ¥æ‰§è¡ŒæŒ‡ä»¤ buf = addEnableControl(buf, 0) writeI2C(LCD_ADDR ,buf)# åˆå§‹åŒ–æ–¹æ³•def initLCD(): # å¯åŠ¨æ—¶ï¼ŒLCD1602ä¸º8ä½æ¨¡å¼ I2Cä¼ è¾“æ•°æ®æ—¶å…ˆä¼ è¾“çš„ä¸ºä½ä½æ•°æ® # å› æ­¤å®é™…ä¸Šçš„æŒ‡ä»¤ä¸º 0b00100011 # ä¸ºæŒ‡ä»¤6 å°†LCD1602è®¾ç½®ä¸º4ä½æ€»çº¿æ¨¡å¼ sendCommand(0b00110010) time.sleep(0.005) # ä¹‹åçš„æŒ‡ä»¤éƒ½æ˜¯4ä½æ€»çº¿æ¨¡å¼ sendCommand(0b00110010) time.sleep(0.005) # æŒ‡ä»¤4 è®¾ç½®å±å¹•å¼€å¯ï¼Œæ— å…‰æ ‡ï¼Œæ— é—ªçƒ sendCommand(0b00001100) time.sleep(0.005) # æŒ‡ä»¤1 æ¸…å± sendCommand(0b00000001) # è®¾ç½®å±å¹•è¦å±•ç¤ºçš„æ–‡æ¡ˆ xï¼Œyç¡®å®šä½ç½®def printLCD(x, y, str): # 2è¡Œ 16 åˆ— if x &lt; 0: x = 0 if x &gt; 15: x = 15 if y &lt;0: y = 0 if y &gt; 1: y = 1 # æŒ‡ä»¤7 è®¾ç½®æ•°æ®è¦å±•ç¤ºçš„ä½ç½® addr = 0b10000000 + 0b00000100 * y + x sendCommand(addr) # å¼€å§‹å‘é€å­—ç¬¦æ•°æ®åˆ°LCD1602çš„æ•°æ®å¯„å­˜å™¨ for chr in str: # ordå‡½æ•°å¯ä»¥è·å–å­—ç¬¦çš„ascil sendData(ord(chr)) # ä¸»ç¨‹åºinitLCD()printLCD(0, 0, 'Hello, world!')time.sleep(2)sendCommand(0b00000001)time.sleep(0.002)printLCD(0, 0, 'Love China!')time.sleep(2)sendCommand(0b00000001)time.sleep(0.002)printLCD(0, 0, 'Great Raspberry!') å¦‚ä¸Šä»£ç æ‰€ç¤ºï¼Œæ‰€æœ‰çš„æŒ‡ä»¤éƒ½é‡‡ç”¨çš„äºŒè¿›åˆ¶çš„æ–¹å¼ï¼Œä¾¿äºå¯¹æ¯”æŒ‡ä»¤æ‰‹å†Œè¿›è¡Œç†è§£ã€‚æ›´å¤šæ—¶å€™æˆ‘ä»¬ä¼šé‡‡ç”¨åå…­è¿›åˆ¶æ•°å­—æ¥ç¼–å†™æŒ‡ä»¤ï¼Œè¿™æ ·ä¼šä½¿ä»£ç çœ‹çš„å¹²å‡€å¾ˆå¤šã€‚ä¸Šé¢çš„ç¤ºä¾‹ä»£ç æ˜¯ä¸€ä¸ªç®€å•çš„åº”ç”¨ç¨‹åºï¼Œè¿è¡Œåå¯ä»¥ç›´æ¥åœ¨LCDå±å¹•ä¸Šå±•ç¤º3å¥è¯ï¼š 123Hello World!Love China!Great Raspberry! å…¶å®æ­¤ç¨‹åºä¹Ÿæ˜¯ä¸€ä¸ªå®Œæ•´çš„LCD1602é©±åŠ¨ï¼Œåˆå§‹åŒ–å®Œæˆåï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å…¶æä¾›é¢sendDataæ–¹æ³•æ¥å®ç°å„ç§å„æ ·çš„æ˜¾ç¤ºéœ€æ±‚ã€‚æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¸“æ³¨æŠ€æœ¯ï¼Œæ‡‚çš„çƒ­çˆ±ï¼Œæ„¿æ„åˆ†äº«ï¼Œåšä¸ªæœ‹å‹ QQï¼š316045346","categories":[{"name":"Linux","slug":"Linux","permalink":"http://huishao.cc/categories/Linux/"}],"tags":[],"keywords":[{"name":"Linux","slug":"Linux","permalink":"http://huishao.cc/categories/Linux/"}]},{"title":"ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ10ï¼‰â€”â€”è§¦æ§æ¿€å…‰ç¯","slug":"423ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ10ï¼‰â€”â€”è§¦æ§æ¿€å…‰ç¯","date":"2021-08-11T16:00:00.000Z","updated":"2021-08-12T14:35:44.409Z","comments":true,"path":"2021/08/12/423ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ10ï¼‰â€”â€”è§¦æ§æ¿€å…‰ç¯/","link":"","permalink":"http://huishao.cc/2021/08/12/423ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ10ï¼‰â€”â€”è§¦æ§æ¿€å…‰ç¯/","excerpt":"","text":"ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ10ï¼‰â€”â€”è§¦æ§æ¿€å…‰ç¯å¦‚æœä½ å·²ç»é˜…è¯»å¹¶ä¸”ç»ƒä¹ äº†æœ¬ç³»åˆ—åšå®¢å‰é¢å®éªŒï¼Œé‚£ä¹ˆæˆ‘ç›¸ä¿¡ä½ å·²ç»èƒ½å¤Ÿä½¿ç”¨æ ‘è“æ´¾åšå¾ˆå¤šæœ‰è¶£çš„äº‹æƒ…ã€‚æœ¬åšå®¢å°†è¦ä»‹ç»çš„å†…å®¹å°±æ˜¯ä¸€ä¸ªä¾‹å­ã€‚ ä½ åœ¨å°æ—¶å€™æœ‰ç©è¿‡æ¿€å…‰ç¯ä¹ˆï¼Ÿå…¶æ¨¡æ ·ç±»ä¼¼äºä¸€ä¸ªå°å‹çš„æ‰‹ç”µç­’ï¼Œåªæ˜¯å…¶å…‰çº¿ååˆ†é›†ä¸­ï¼Œäº®åº¦å¼ºï¼Œå¹¶ä¸”é€šè¿‡ä¸åŒçš„æ»¤ç‰‡ï¼Œå¯ä»¥åœ¨å¢™ä¸Šæˆ–åœ°ä¸Šæ‰“å°„å‡ºä¸åŒçš„å›¾æ¡ˆï¼Œååˆ†æœ‰è¶£ã€‚æœ¬å®éªŒï¼Œæˆ‘ä»¬å°†æ‰¾å›ç«¥è¶£ï¼Œä½¿ç”¨è§¦æ‘¸ä¼ æ„Ÿå™¨å’Œæ¿€å…‰ç¯ä¼ æ„Ÿå™¨æ¥å®ç°ä¸€ä¸ªç®€æ˜“çš„è§¦æ§æ¿€å…‰ç¯ã€‚ æœ¬å®éªŒçš„åŸç†éå¸¸ç®€å•ï¼Œæ— éæ˜¯é€šè¿‡æ ‘è“æ´¾çš„GPIOå¼•è„šæ¥è¯»å–è§¦æ‘¸ä¼ æ„Ÿå™¨çš„æ•°æ®ï¼Œä¹‹åå°†å…¶ç”¨äºæ“ä½œæ¿€å…‰ä¼ æ„Ÿå™¨çš„å¼€å…³æ§åˆ¶ä¸Šã€‚æœ¬æ¬¡å®éªŒä½¿ç”¨çš„è§¦æ‘¸ä¼ æ„Ÿå™¨å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š æ­¤è§¦æ‘¸ä¼ æ„Ÿå™¨æœ‰3ä¸ªå¼•è„šï¼Œé™¤äº†æ­£è´Ÿæå¼•è„šå¤–ï¼Œæœ€å¤–ä¾§çš„å¼•è„šç”¨æ¥è¾“å‡ºä¿¡å·ï¼Œå½“æ‰‹æŒ‡è§¦æ‘¸ä¼ æ„Ÿå™¨ä¸Šçš„åœ†å½¢åŒºåŸŸæ—¶ï¼Œå…¶ä¿¡å·å¼•è„šä¼šè¾“å‡ºé«˜ç”µå¹³ï¼Œå¦åˆ™è¾“å‡ºä½ç”µå¹³ã€‚å¯¹äºè¿™ç§ç±»å‹çš„ä¼ æ„Ÿå™¨ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨GPIOçš„ä¸‹æ‹‰ç”µé˜»åŠŸèƒ½ï¼Œå°†å…¶é»˜è®¤è®¾ç½®ä¸ºä½ç”µå¹³ï¼Œè½®è¯¢ç­‰å¾…é«˜ç”µå¹³ä¿¡å·ã€‚ é¦–å…ˆï¼Œå…ˆæ¥ä½“éªŒä¸‹è§¦æ‘¸ä¼ æ„Ÿå™¨çš„åº”ç”¨ï¼Œè¿çº¿å¦‚ä¸‹ï¼š è§¦æ‘¸ä¼ æ„Ÿå™¨ æ ‘è“æ´¾ GND GND VCC 3.3V SIG BCMç¼–ç 17çš„å¼•è„š(å¯¹åº”ç‰©ç†å¼•è„šä¸º11) ç¼–å†™å¦‚ä¸‹æµ‹è¯•ä»£ç ï¼š 1234567891011121314#coding:utf-8import RPi.GPIO as GPIOimport timetouchPin = 11GPIO.setmode(GPIO.BOARD)GPIO.setup(touchPin,GPIO.IN, pull_up_down=GPIO.PUD_DOWN)while True: swi = GPIO.input(touchPin) print(swi) time.sleep(0.5) åœ¨æ ‘è“æ´¾ä¸Šè¿è¡Œä¸Šé¢ä»£ç ã€‚é€šè¿‡è§¦æ‘¸ä¼ æ„Ÿå™¨ï¼Œå¯ä»¥çœ‹åˆ°æ§åˆ¶å°ä¸Šæ‰“å°å‡ºå¯¹åº”çš„ç”µå¹³ä¿¡æ¯ã€‚ ä¸‹é¢ï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹æœ¬æ¬¡å®éªŒæ‰€ä½¿ç”¨çš„æ¿€å…‰æ¨¡å—ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š æ­¤æ¿€å…‰æ¨¡å—ä¹Ÿæœ‰3ä¸ªå¼•è„šï¼Œå…¶ä¸­â€œ-â€å·ä¸€ä¾§çš„å¼•è„šæ¥åœ°ï¼Œä¸­é—´å¼•è„šæ¥3.3Vç”µå‹ï¼Œâ€œSâ€ä¸€ä¾§å¼•è„šæ¥GPIOä¿¡å·å¼•è„šã€‚å½“Sä¿¡å·å¼•è„šè¾“å…¥é«˜ç”µå¹³æ—¶ï¼Œæ¿€å…‰æ¨¡å—è¢«æ¿€æ´»å‘å°„æ¿€å…‰ï¼Œå½“Sä¿¡å·å¼•è„šè¾“å…¥ä½ç”µå¹³æ—¶ï¼Œæ¿€å…‰å‘å°„å…³é—­ã€‚æ¿€å…‰æ¨¡å—çš„æ¥çº¿å¦‚ä¸‹ï¼š æ¿€å…‰æ¨¡å— æ ‘è“æ´¾ - GND â€” â€” ä¸­é—´å¼•è„š 3.3V â€” â€” S BCMç¼–ç 18çš„å¼•è„š(å¯¹åº”ç‰©ç†å¼•è„šä¸º12) â€” â€” ä¿®æ”¹ä¸Šé¢çš„ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627#coding:utf-8import RPi.GPIO as GPIOimport time# è§¦æ‘¸ä¼ æ„Ÿå™¨çš„ä¿¡å·å¼•è„štouchPin = 11# æ¿€å…‰æ¨¡å—çš„ä¿¡å·å¼•è„šlightPin = 12# è®¾ç½®é‡‡ç”¨ç‰©ç†ç¼–ç GPIO.setmode(GPIO.BOARD)# å¯¹è§¦æ‘¸ä¼ æ„Ÿå™¨çš„å¼•è„šè¿›è¡Œåˆå§‹åŒ–GPIO.setup(touchPin,GPIO.IN, pull_up_down=GPIO.PUD_DOWN)# å¯¹æ¿€å…‰ä¼ æ„Ÿå™¨çš„å¼•è„šè¿›è¡Œåˆå§‹åŒ–GPIO.setup(lightPin,GPIO.OUT)while True: swi = GPIO.input(touchPin) # å½“è§¦æ‘¸å‘ç”Ÿæ—¶ï¼Œè§¦æ‘¸ä¼ æ„Ÿå™¨çš„å¼•è„šè¾“å…¥é«˜ç”µå¹³ if swi == 1: # å‘æ¿€å…‰æ¨¡å—çš„å¼•è„šè¾“å‡ºé«˜ç”µå¹³ï¼Œå‘å°„æ¿€å…‰ GPIO.output(lightPin, GPIO.HIGH) else: # ä¸ä¸Šé¢ç›¸åï¼Œå…³é—­æ¿€å…‰ GPIO.output(lightPin, GPIO.LOW) time.sleep(0.5) åœ¨æ ‘è“æ´¾ä¸Šè¿è¡Œä¸Šé¢ä»£ç ï¼Œä½“éªŒä¸‹è¿™ä¸ªè‡ªåˆ¶çš„æ¿€å…‰ç¯ç©å…·å§ï¼","categories":[{"name":"Linux","slug":"Linux","permalink":"http://huishao.cc/categories/Linux/"}],"tags":[],"keywords":[{"name":"Linux","slug":"Linux","permalink":"http://huishao.cc/categories/Linux/"}]},{"title":"ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ9ï¼‰â€”â€”DS18B20æµ‹æ¸©æ¨¡å—åº”ç”¨","slug":"422ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ9ï¼‰â€”â€”DS18B20æµ‹æ¸©æ¨¡å—åº”ç”¨","date":"2021-08-08T16:00:00.000Z","updated":"2021-08-09T14:21:33.216Z","comments":true,"path":"2021/08/09/422ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ9ï¼‰â€”â€”DS18B20æµ‹æ¸©æ¨¡å—åº”ç”¨/","link":"","permalink":"http://huishao.cc/2021/08/09/422ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ9ï¼‰â€”â€”DS18B20æµ‹æ¸©æ¨¡å—åº”ç”¨/","excerpt":"","text":"ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ9ï¼‰â€”â€”DS18B20æµ‹æ¸©æ¨¡å—åº”ç”¨å…³äºä½¿ç”¨æ ‘è“æ´¾æµ‹é‡æ¸©åº¦ï¼Œæˆ‘ä»¬ä¹‹å‰åœ¨å­¦ä¹ æ¨¡æ•°è½¬æ¢çš„ç›¸å…³åšå®¢ä¸­å·²ç»æœ‰è¿‡åº”ç”¨ã€‚å…¶å®é™¤äº†ä½¿ç”¨ä¼ ç»Ÿçš„ADé‡‡é›†æ¸©åº¦æ•°æ®å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡æ ‘è“æ´¾ä¸­çš„å•æ€»çº¿æŠ€æœ¯ç»“åˆDS18B20ä¼ æ„Ÿå™¨æ¥æ›´åŠ æ–¹ä¾¿ç²¾å‡†çš„æµ‹é‡ç¯å¢ƒæ¸©åº¦ã€‚ ä¸€ã€è®¤è¯†DS18B20æ¨¡å—ä¸å•æ€»çº¿é€šä¿¡DS18B20æ˜¯ä¸€ç§æ”¹è¿›å‹çš„æ™ºèƒ½æ¸©åº¦ä¼ æ„Ÿå™¨ã€‚ä¸ä¼ ç»Ÿçš„çƒ­æ•ç”µé˜»ç›¸æ¯”ï¼Œå…¶å¯ä»¥ç›´æ¥è¯»å‡ºè¢«æµ‹é‡çš„æ¸©åº¦ï¼Œå¹¶ä¸”èƒ½å¤Ÿæ ¹æ®å®é™…åº”ç”¨åœºæ™¯ä¸­çš„è¦æ±‚è¿›è¡Œç®€å•çš„ç¼–ç¨‹ã€‚æ— è®ºæ˜¯è¯»å–æ•°æ®è¿˜æ˜¯å†™å…¥æ•°æ®ï¼ŒDS18B20éƒ½åªéœ€è¦ä¸€æ¡æ¥å£çº¿ï¼Œå› æ­¤å…¶ä½¿ç”¨çš„æ˜¯å•æ€»çº¿çš„é€šè®¯åè®®ã€‚DS18B20æ¨¡å—çš„ä¸»è¦ä¼˜åŠ¿åœ¨äºå…¶æŠ—å¹²æ‰°èƒ½åŠ›å¼ºï¼Œç²¾åº¦é«˜ï¼Œæ— éœ€å¤æ‚çš„è½¯ä»¶å¤„ç†å¯ä»¥ç›´æ¥è¾“å‡ºæ¸©åº¦æ•°æ®ã€‚æœ¬æ¬¡å®éªŒï¼Œæˆ‘ä»¬ä½¿ç”¨çš„DS18B20æ¨¡å—å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¯ä»¥çœ‹åˆ°æ­¤æ¨¡å—æœ‰3ä¸ªå¼•è„šï¼Œé™¤äº†ç”µæºå¼•è„šå’Œæ¥åœ°å¼•è„šå¤–ï¼Œå‰©ä¸‹çš„ä¸€ä¸ªå°±æ˜¯ç”¨æ¥è¾“å‡ºæ¸©åº¦æ•°æ®çš„å¼•è„šã€‚ å•æ€»çº¿é€šä¿¡è¢«ç§°ä¸ºone-wireé€šä¿¡ï¼Œå› æ­¤åˆå¸¸å¸¸è¢«ç®€ç§°ä¸º1wæ€»çº¿é€šä¿¡ã€‚é¦–å…ˆæˆ‘ä»¬éœ€è¦å…ˆå¼€å§‹æ ‘è“æ´¾çš„1wæ€»çº¿é€šä¿¡åŠŸèƒ½ï¼Œæ‰“å¼€æ ‘è“æ´¾çš„Raspberry Configurationèœå•ï¼Œåœ¨Interfacesé€‰é¡¹ä¸­å°†1-WireåŠŸèƒ½å¼€å¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ å¦‚æœæˆ‘ä»¬æ˜¯é€šè¿‡æ— äº¤äº’é¡µé¢çš„ç»ˆç«¯ç™»å½•çš„æ ‘è“æ´¾ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶æ¥å¼€å¯1-WireåŠŸèƒ½ï¼Œåœ¨æ ‘è“æ´¾Linuxç³»ç»Ÿçš„æ ¹ç›®å½•ä¸‹ï¼Œæ‰¾åˆ°å¦‚ä¸‹è·¯å¾„çš„æ–‡ä»¶ï¼š 1/boot/config.txt åœ¨å…¶ä¸­æ·»åŠ å¦‚ä¸‹ä¸€è¡Œæ–‡æœ¬å³å¯ï¼š 1dtoverlay=w1-gpio éœ€è¦æ³¨æ„ï¼Œæ·»åŠ ä¹‹åéœ€è¦é‡å¯æ ‘è“æ´¾ã€‚éœ€è¦æ³¨æ„ï¼Œ1-WireåŠŸèƒ½é»˜è®¤å°†ä½¿ç”¨æ ‘è“æ´¾çš„BCMç¼–ç ä¸ºGPIO4çš„å¼•è„šä½œä¸ºé€šä¿¡å¼•è„šï¼Œå¦‚ä½•æˆ‘ä»¬è¦è¿›è¡Œè‡ªå®šä¹‰ï¼Œå¯ä»¥åœ¨åˆšæ‰çš„é…ç½®æ–‡ä»¶ä¸­è¿›è¡ŒæŒ‡å®šï¼Œå¦‚ä¸‹ï¼š 1dtoverlay=w1-gpio,gpiopin=18 å…¶è¡¨ç¤ºè¦ä½¿ç”¨BCMç¼–ç ä¸ºGPIO18çš„å¼•è„šä½œä¸ºé€šä¿¡å¼•è„šã€‚ åšå®Œäº†ä¸Šé¢çš„æ“ä½œåï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ ‘è“æ´¾ç»ˆç«¯ä¸­ä½¿ç”¨å¦‚ä¸‹æŒ‡ä»¤æŸ¥çœ‹å•æ€»çº¿æ˜¯å¦å¯åŠ¨æˆåŠŸï¼š 1$ lsmod ç»ˆç«¯è¾“å‡ºæ•ˆæœå¦‚ä¸‹ï¼š å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœæœ‰æ˜¾ç¤ºw1_gpioå’Œwireä¸¤ä¸ªéƒ¨åˆ†ï¼Œåˆ™è¡¨ç¤ºå•æ€»çº¿å·²ç»å¯åŠ¨æˆåŠŸï¼Œåˆ†åˆ«åœ¨ç»ˆç«¯æ‰§è¡Œå¦‚ä¸‹ä¸¤æ¡å‘½ä»¤ï¼š 12$ modprobe w1-gpio$ modprobe w1-therm å¦‚æœç»ˆç«¯æ²¡æœ‰è¾“å‡ºä»»ä½•ä¿¡æ¯ï¼Œåˆ™è¡¨ç¤ºå•æ€»çº¿å·²ç»åˆå§‹åŒ–å®Œæˆï¼Œæ­¤æ—¶å®é™…ä¸Šæˆ‘ä»¬å·²ç»å¯ä»¥è®©DS18B20è¿›è¡Œå·¥ä½œäº†ã€‚ äºŒã€é€šè¿‡DS18B20æ¨¡å—è·å–ç¯å¢ƒæ¸©åº¦é€šè¿‡å‰é¢çš„æ“ä½œï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†åŸºæœ¬çš„å‡†å¤‡å·¥ä½œï¼Œå°†DS18B20è¿æ¥åˆ°æ ‘è“æ´¾ï¼Œå¼•è„šå¯¹åº”å¦‚ä¸‹ï¼š DS18B20 æ ‘è“æ´¾ + 3.3V - GND out BCMç¼–ç ä¸ºGPIO4çš„å¼•è„š ä¹‹åæˆ‘ä»¬ä»æ ‘è“æ´¾çš„ç»ˆç«¯è¿›å…¥å¦‚ä¸‹ç›®å½•ï¼š 1/sys/bus/w1/devices åœ¨æ­¤ç›®å½•ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æœ‰ä¸¤ä¸ªæ–‡ä»¶ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å…¶ä¸­ä»¥28-xxxå¼€å¤´çš„æ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶è®°å½•çš„å°±æ˜¯1wå•æ€»çº¿è¾“å…¥çš„æ•°æ®ï¼Œéœ€è¦æ³¨æ„ï¼Œè¯»è€…æ“ä½œæ—¶ï¼Œæ­¤æ–‡ä»¶å¤¹çš„åç§°å’Œç¬”è€…å¯èƒ½å¹¶ä¸å®Œå…¨ä¸€æ ·ï¼Œå…¶è¡¨ç¤ºä¼ æ„Ÿå™¨è®¾å¤‡çš„ç¼–å·ï¼Œå¤§å®¶è¿™é‡Œåªéœ€è¦æ‰¾åˆ°28-xxå¼€å¤´çš„æ–‡ä»¶å¤¹å³å¯ã€‚åœ¨æ­¤æ–‡ä»¶å¤¹ä¸­ï¼Œæœ‰ä¸€ä¸ªåä¸ºw1_slaveçš„æ–‡ä»¶ï¼Œæ­¤æ–‡ä»¶ä¸­è®°å½•çš„å°±æ˜¯ä¼ æ„Ÿå™¨çš„æ¸©åº¦æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥æ‰“å¼€çœ‹çœ‹ï¼Œå†…å®¹å¦‚ä¸‹ï¼š 12d2 01 55 05 7f 7e 81 66 59 : crc=59 YESd2 01 55 05 7f 7e 81 66 59 t=29125 å…¶ä¸­ï¼Œå¤§éƒ¨åˆ†æ•°æ®æˆ‘ä»¬éƒ½æ— éœ€å…³å¿ƒï¼Œå…¶æœ€åçš„t=29125å°±æ˜¯å½“å‰çš„ç¯å¢ƒæ¸©åº¦ï¼Œå°†å…¶è½¬æ¢ä¸ºæ‘„æ°æ¸©åº¦ï¼Œç›´æ¥é™¤ä»¥1000å³å¯ï¼Œä¾‹å¦‚ä¸Šé¢çš„æ•°æ®è¡¨æ˜å½“å‰çš„ç¯å¢ƒæ¸©åº¦æ˜¯29.125æ‘„æ°åº¦ã€‚ ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥éå¸¸è½»æ¾çš„è·å–DS18B20æ¨¡å—æä¾›çš„æ¸©åº¦æ•°æ®äº†ï¼Œä½†æ˜¯æŸ¥çœ‹çš„æ–¹å¼éå¸¸ä¸æ™ºèƒ½ï¼Œå…¶å®æˆ‘ä»¬å¯ä»¥é€šè¿‡Pythonç¨‹åºæ¥ä¸åœçš„è¯»å–æ­¤æ•°æ®æ–‡ä»¶ï¼Œè§£æå‡ºå…¶ä¸­çš„æ¸©åº¦æ•°æ®ï¼Œä¹‹åæ— è®ºæ˜¯åšè®°å½•è¿˜æ˜¯è¿›è¡Œå…¶ä»–å…ƒä»¶æ§åˆ¶éƒ½ä¼šéå¸¸æ–¹ä¾¿ã€‚ç¼–å†™ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334#coding:utf8import os,time# ä¼ æ„Ÿå™¨ç¼–å·name = \"28-020692455d61\"# è®¾å¤‡è®°å½•æ•°æ®çš„æ–‡ä»¶åœ°å€device_file ='/sys/bus/w1/devices/' + name + '/w1_slave'# è¯»å–æ–‡ä»¶æ•°æ®def read_temp_raw(): f = open(device_file,'r') lines = f.readlines() f.close() return lines# è§£ææ¸©åº¦æ•°æ®def read_temp(): lines = read_temp_raw() # æ­¤è¡Œé»˜è®¤ä¸æ˜¯'YES' è¡¨æ˜æœªè¯»å–åˆ°æœ‰æ•ˆæ•°æ® while lines[0].strip()[-3:] != 'YES': time.sleep(0.2) # å¾ªç¯ç»§ç»­è¯» lines = read_temp_raw() # æ‰¾åˆ°ç¬¬2è¡Œçš„'t='çš„ä½ç½® equals_pos = lines[1].find('t=') # å°†æ¸©åº¦æ•°æ®å–å‡º if equals_pos != -1: temp_string = lines[1][equals_pos+2:] temp_c = float(temp_string)/1000.0 return temp_cwhile True: print('%fC'%read_temp()) time.sleep(1) åœ¨æ ‘è“æ´¾ä¸­è¿è¡Œä¸Šé¢ä»£ç ï¼Œå¯ä»¥çœ‹åˆ°æ§åˆ¶å°è¾“å‡ºçš„å½“å‰æ¸©åº¦æ•°æ®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¸‰ã€è®²åœ¨åé¢æœ¬ç¯‡åšå®¢ï¼Œæˆ‘ä»¬ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨one-wireå•æ€»çº¿è¿›è¡Œå¤–è®¾æ•°æ®çš„è¯»å–ï¼ŒDS18B20åªæ˜¯ä½œä¸ºç¤ºä¾‹ï¼ŒæŠ›ç –å¼•ç‰ï¼Œé€šè¿‡æ ‘è“æ´¾çš„1wæ€»çº¿ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è¿æ¥æ›´å¤šçš„å¤–è®¾å®ç°æ›´åŠ æœ‰åˆ›æ„çš„ä¸œè¥¿ï¼Œå¤§å®¶å¼€åŠ¨è„‘ç­‹ï¼Œå°½æƒ…ç©è€å§ï¼ ä¸“æ³¨æŠ€æœ¯ï¼Œæ‡‚çš„çƒ­çˆ±ï¼Œæ„¿æ„åˆ†äº«ï¼Œåšä¸ªæœ‹å‹ QQï¼š316045346","categories":[{"name":"Linux","slug":"Linux","permalink":"http://huishao.cc/categories/Linux/"}],"tags":[],"keywords":[{"name":"Linux","slug":"Linux","permalink":"http://huishao.cc/categories/Linux/"}]},{"title":"ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ8ï¼‰â€”â€”æ ‘è“æ´¾æ¨¡æ•°/æ•°æ¨¡è½¬æ¢å®è·µ(2)","slug":"421ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ8ï¼‰â€”â€”æ ‘è“æ´¾æ¨¡æ•°:æ•°æ¨¡è½¬æ¢å®è·µ(2)","date":"2021-08-02T16:00:00.000Z","updated":"2021-08-03T14:33:49.287Z","comments":true,"path":"2021/08/03/421ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ8ï¼‰â€”â€”æ ‘è“æ´¾æ¨¡æ•°:æ•°æ¨¡è½¬æ¢å®è·µ(2)/","link":"","permalink":"http://huishao.cc/2021/08/03/421ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ8ï¼‰â€”â€”æ ‘è“æ´¾æ¨¡æ•°:æ•°æ¨¡è½¬æ¢å®è·µ(2)/","excerpt":"","text":"ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ8ï¼‰â€”â€”æ ‘è“æ´¾æ¨¡æ•°/æ•°æ¨¡è½¬æ¢å®è·µ(2)åœ¨ä¸Šä¸€ç¯‡åšå®¢ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†åœ¨æ ‘è“æ´¾ä¸­ä½¿ç”¨æ¨¡æ•°è½¬æ¢èŠ¯ç‰‡çš„åŸºæœ¬æ–¹æ³•ï¼Œå¦‚æœä½ å¯¹ä¸Šä¸€ç¯‡åšæ–‡ä¸­ä»‹ç»çš„å†…å®¹å·²ç»æœ‰äº†æ·±å…¥çš„ç†è§£ï¼Œé‚£åé¢çš„åº”ç”¨è¯•éªŒå¯¹ä½ æ¥è¯´å°†éå¸¸å®¹æ˜“ã€‚å¦‚æœä¸æ˜¯ï¼Œé‚£ä¹ˆæˆ‘å»ºè®®ä½ å…ˆå°†ä¹‹å‰ä»‹ç»çš„å†…å®¹åœ¨ç ”ç©¶ä¸€ä¸‹ï¼š https://my.oschina.net/u/2340880/blog/5142788 ç°åœ¨ï¼Œå¦‚æœä½ å†³å®šç»§ç»­æœ¬ç¯‡åšå®¢çš„å­¦ä¹ ï¼Œé‚£ä¹ˆæˆ‘è®¤ä¸ºä½ å·²ç»äº†è§£äº†PCF8591èŠ¯ç‰‡çš„åŸºæœ¬ç”¨æ³•ï¼Œæ˜ç™½äº†PCF8591çš„æ¥çº¿æ–¹å¼ï¼ŒI2Cæ€»çº¿çš„åŸºæœ¬å·¥ä½œåŸç†ä»¥åŠPCF8591çš„è®¾ç½®å‘½ä»¤çš„æ„ä¹‰å’Œè¯»æ•°æ®çš„æ–¹æ³•ã€‚ ä¸€ã€è¯»å–å¤–éƒ¨ä¼ æ„Ÿå™¨çš„æ¨¡æ‹Ÿä¿¡å·åœ¨æœ¬ç³»åˆ—åšå®¢çš„ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡è¯»å–PCF8591å®éªŒæ¨¡å—è‡ªå¸¦çš„å¯è°ƒèŠ‚ç”µå‹è¾“å‡ºã€å…‰æ•ä¼ æ„Ÿå™¨å’Œçƒ­æ•ä¼ æ„Ÿå™¨å®ç°äº†å¯¹å½“å‰ç¯å¢ƒä¿¡æ¯çš„çš„è¯»å–ï¼Œé™¤äº†å¯ä»¥è¯»å–å½“å‰è®¾ç½®çš„è¾“å‡ºç”µå‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è·å¾—å½“å‰çš„ç¯å¢ƒçš„æ¸©åº¦å’Œäº®åº¦ã€‚PCF8591å®éªŒæ¨¡å—è‡ªå¸¦çš„ä¼ æ„Ÿå™¨å¯ä»¥è®©æˆ‘ä»¬å¾ˆæ–¹ä¾¿çš„è¿›è¡Œå®éªŒï¼Œå…¶å®åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæ›´å¤šæ—¶å€™æˆ‘ä»¬éœ€è¦ä»AIN0åˆ°AIN3å¼•è„šæ¥è·å–å¤–æ¥ä¼ æ„Ÿå™¨çš„æ¨¡æ‹Ÿä¿¡å·ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å°è¯•ä¸‹é€šè¿‡AIN0å’ŒAIN1ä¸¤ä¸ªè¾“å…¥å¼•è„šæ¥è·å–å¤–æ¥å…‰æ•å’Œçƒ­æ•ä¼ æ„Ÿå™¨çš„æ•°æ®ã€‚ 1.å…³äºå®éªŒæ‰€ä½¿ç”¨çš„ä¼ æ„Ÿå™¨æˆ‘ä»¬è¿™é‡Œçš„å°å®éªŒå°†ä½¿ç”¨å…‰æ•å’Œçƒ­æ•ä¼ æ„Ÿå™¨ã€‚ å…‰æ•æ¨¡å—å…‰æ•ä¼ æ„Ÿå™¨èƒ½å¤Ÿæ„Ÿåº”å…‰çº¤çš„æ˜æš—å˜åŒ–ï¼Œå…¶å®ç°æ­¤åŠŸèƒ½çš„æ ¸å¿ƒåœ¨äºå…‰æ•ç”µé˜»ï¼Œåªåšå…‰æ•ç”µé˜»çš„å¸¸ç”¨ææ–™æœ‰ç¡«åŒ–é•‰ã€ç¡«åŒ–é“ç­‰ã€‚è¿™äº›ææ–™åœ¨ç‰¹å®šæ³¢é•¿çš„å…‰æ³¢ç…§å°„ä¸‹ï¼Œå…¶é˜»å€¼ä¼šäº§ç”Ÿæ˜æ˜¾çš„å˜åŒ–ã€‚æœ¬æ¬¡å®éªŒï¼Œæˆ‘ä»¬ä½¿ç”¨çš„å…‰æ•ä¼ æ„Ÿå™¨æ¨¡å—å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¯ä»¥çœ‹åˆ°ï¼Œæ­¤æ¨¡å—çš„æ ¸å¿ƒæ˜¯ä¸€ä¸ªå…‰æ•ç”µé˜»ï¼Œæä¾›äº†å¯è°ƒèŠ‚çµæ•åº¦çš„åŠŸèƒ½å•å…ƒå’Œä¸¤ä¸ªLEDæŒ‡ç¤ºç¯ï¼Œå…¶ä¸­ä¸€ä¸ªLEDæ˜¯ç”µæºæŒ‡ç¤ºç¯ï¼Œæ¥é€šç”µæºåä¼šäº®ï¼Œå¦ä¸€ä¸ªLEDç¯æ˜¯ç”µå¹³æŒ‡ç¤ºç¯ï¼Œå½“å…‰äº®è¾¾åˆ°é˜ˆå€¼æ—¶ï¼Œè¾“å‡ºå¼•è„šè¾“å‡ºä½ç”µå¹³ï¼Œæ­¤LEDç¯äº®ï¼Œå½“å…‰äº®åº¦è¾ƒæš—æ—¶ï¼Œè¾“å‡ºå¼•è„šè¾“å‡ºé«˜ç”µå¹³ï¼Œæ­¤LEDç¯ä¸äº®ã€‚æˆ‘ä»¬å†çœ‹æ­¤æ¨¡å—çš„4ä¸ªå¼•è„šï¼š VCCï¼šç”µæºå¼•è„š GNDï¼šæ¥åœ°å¼•è„š DOï¼šæ•°å­—ä¿¡å·è¾“å‡ºå¼•è„š(é«˜ä½ç”µå¹³) AOï¼šæ¨¡æ‹Ÿä¿¡å·è¾“å‡ºå¼•è„š çƒ­æ•æ¨¡å—æœ¬æ¬¡å®éªŒæˆ‘ä»¬ä½¿ç”¨çš„çƒ­æ•æ¨¡å—çš„åŠŸèƒ½ä¸ä¸Šé¢å°†çš„å…‰æ•æ¨¡å—ç±»ä¼¼ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š æ­¤çƒ­æ•æ¨¡å—åŒæ ·åŒ…å«ä¸¤ä¸ªLEDæŒ‡ç¤ºç¯ã€çµæ•åº¦è°ƒèŠ‚å•å…ƒå’Œ4ä¸ªå¼•è„šï¼Œå¼•è„šå¦‚ä¸‹ï¼š VCCï¼šç”µæºå¼•è„š GNDï¼šæ¥åœ°å¼•è„š DOï¼šæ•°å­—ä¿¡å·è¾“å‡ºå¼•è„š(é«˜ä½ç”µå¹³) AOï¼šæ¨¡æ‹Ÿä¿¡å·è¾“å‡ºå¼•è„š 2.å®éªŒè¿çº¿æœ¬æ¬¡å®éªŒï¼Œæˆ‘ä»¬ä½¿ç”¨PCF8591è¯»å–å…‰æ•å’Œçƒ­æ•ä¼ æ„Ÿå™¨çš„æ¨¡æ‹Ÿä¿¡å·ï¼Œå°†å…¶è½¬æ¢æˆæ•°å­—ä¿¡å·è¢«æ ‘è“æ´¾ç¨‹åºå¤„ç†ï¼ŒåŒæ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨æ ‘è“æ´¾çš„GPIOç«¯å£æ¥è¯»å–ä¼ æ„Ÿå™¨æœ¬èº«è¾“å‡ºçš„æ•°å­—ä¿¡å·ï¼Œé¦–å…ˆï¼Œæˆ‘ä»¬å…ˆç¡®å®šè¦ä½¿ç”¨çš„PCF8591çš„è¾“å…¥å¼•è„šå’Œè¦ä½¿ç”¨çš„æ ‘è“æ´¾GPIOå¼•è„šã€‚ PCF8591è¾“å…¥å¼•è„šä½¿ç”¨ï¼šAINOå’ŒAIN1ï¼Œå…¶ä¸­AINOè¯»å–å…‰æ•æ¨¡æ‹Ÿä¿¡å·ï¼ŒAIN1è¯»å–çƒ­æ•æ¨¡æ‹Ÿä¿¡å·ã€‚ GPIOè¾“å…¥å¼•è„šä½¿ç”¨ï¼šGPIO17å’ŒGPIO18ï¼ˆBCMç¼–ç æ–¹å¼ï¼‰ï¼Œå…¶ä¸­17å¼•è„šè¯»å–å…‰æ•æ•°å­—ä¿¡å·ï¼Œ18å¼•è„šè¯»å–çƒ­æ•æ•°å­—ä¿¡å·ã€‚ PCF8591è¿çº¿ï¼š PCF8591 æ ‘è“æ´¾åŠŸèƒ½å¼•è„š SCL SCL SDA SDA GND GND VCC 5V å…‰æ•ä¼ æ„Ÿå™¨ï¼š å…‰æ•ä¼ æ„Ÿå™¨ æ ‘è“æ´¾/PCF8591 VCC æ ‘è“æ´¾3.3V GND æ ‘è“æ´¾GND DO æ ‘è“æ´¾GPIO11(ç‰©ç†å¼•è„š) AO PCF8591 AIN0 çƒ­æ•ä¼ æ„Ÿå™¨ï¼š çƒ­æ•ä¼ æ„Ÿå™¨ æ ‘è“æ´¾/PCF8591 VCC æ ‘è“æ´¾3.3V --- --- GND æ ‘è“æ´¾GND --- --- DO æ ‘è“æ´¾GPIO12(ç‰©ç†å¼•è„š) --- --- AO PCF8591 AIN1 --- --- è¿çº¿æœ€ç»ˆå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å’Œä¹‹å‰ç›¸æ¯”ï¼Œæˆ‘ä»¬è¿™æ¬¡ç›´æ¥åœ¨æ ‘è“æ´¾ä¸Šè¿æ¥äº†3ä¸ªå…ƒä»¶ï¼Œè¿çº¿ä¹Ÿå¤æ‚äº†å¾ˆå¤šï¼Œåªè¦æŒ‰ç…§ä¸Šé¢çš„è¡¨æ ¼ï¼Œæ³¨æ„å¼•è„šçš„æ­£ç¡®å³å¯ã€‚ 3.ç¼–å†™ç¨‹åºæ­¥å…¥æ­£é¢˜ï¼Œå…ˆä¸Šä»£ç ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344#coding:utf-8#SMBus (System Management Bus,ç³»ç»Ÿç®¡ç†æ€»çº¿) import smbus #åœ¨ç¨‹åºä¸­å¯¼å…¥â€œsmbusâ€æ¨¡å—import RPi.GPIO as GPIO import timebus = smbus.SMBus(1) #åˆ›å»ºä¸€ä¸ªsmbuså®ä¾‹# é€šè¿‡PCF8591è¯»å–æ¨¡æ‹Ÿä¿¡å·# æ•°æ®äº®åº¦çš„æ¨¡æ‹Ÿæ•°æ®def readLight(): #å‘é€ä¸€ä¸ªæ§åˆ¶å­—èŠ‚åˆ°è®¾å¤‡ è¡¨ç¤ºè¦è¯»å–AIN0é€šé“çš„æ•°æ® bus.write_byte(0x48,0x40) bus.read_byte(0x48) # ç©ºè¯»ä¸€æ¬¡ï¼Œæ¶ˆè´¹æ‰æ— æ•ˆæ•°æ® return bus.read_byte(0x48) # è¿”å›æŸé€šé“è¾“å…¥çš„æ¨¡æ‹Ÿå€¼A/Dè½¬æ¢åçš„æ•°å­—å€¼def readTemperature(): #å‘é€ä¸€ä¸ªæ§åˆ¶å­—èŠ‚åˆ°è®¾å¤‡ è¡¨ç¤ºè¦è¯»å–AIN1é€šé“çš„æ•°æ® bus.write_byte(0x48,0x41) bus.read_byte(0x48) # ç©ºè¯»ä¸€æ¬¡ï¼Œæ¶ˆè´¹æ‰æ— æ•ˆæ•°æ® return bus.read_byte(0x48) # è¿”å›æŸé€šé“è¾“å…¥çš„æ¨¡æ‹Ÿå€¼A/Dè½¬æ¢åçš„æ•°å­—å€¼# é€šè¿‡GPIOè¯»å–æ•°å­—ä¿¡å·# è®¾ç½®ä½¿ç”¨çš„å¼•è„šç¼–ç æ¨¡å¼GPIO.setmode(GPIO.BOARD)# å…‰æ•æ¨¡å—çš„æ•°å­—è¾“å‡ºå¼•è„š BCM 17LP = 11# çƒ­æ•æ¨¡å—çš„æ•°å­—è¾“å‡ºå¼•è„š BCM 18TP = 12# å¼•è„šåˆå§‹åŒ–GPIO.setup(LP, GPIO.IN)GPIO.setup(TP, GPIO.IN)while True: print('--------åˆ†å‰²çº¿----------') print('äº®åº¦æ•°å­—ä¿¡å·ï¼š', GPIO.input(LP)) print('äº®åº¦æ¨¡æ‹Ÿä¿¡å·ï¼š', readLight()) print('æ¸©åº¦æ•°å­—ä¿¡å·ï¼š', GPIO.input(TP)) print('æ¸©åº¦æ¨¡æ‹Ÿä¿¡å·ï¼š', readTemperature()) time.sleep(2) ä¸Šé¢çš„ä»£ç æœ‰ç€æ¯”è¾ƒè¯¦å°½çš„æ³¨é‡Šï¼Œè¿™é‡Œæˆ‘ä»¬æ— éœ€å¤šè¯´ï¼Œåœ¨æ ‘è“æ´¾ä¸Šè¿è¡Œæ­¤ä»£ç ï¼Œå³å¯è§‚å¯Ÿåˆ°æ§åˆ¶å°çš„æ•°æ®è¾“å‡ºã€‚ äºŒã€ä½¿ç”¨æ“çºµæ†å¤–è®¾æ§åˆ¶åœ†çƒç§»åŠ¨å¦‚æœä½ é¡ºåˆ©å®Œæˆäº†ä¸Šé¢çš„å®éªŒï¼Œå…ˆåˆ«æ€¥ç€åº†ç¥ï¼Œä½ ä¼šå‘ç°ï¼Œå’Œæœ¬ç³»åˆ—å‰é¢å‡ ç¯‡åšå®¢çš„å†…å®¹è¾ƒæ¯”ï¼Œåˆ°ç›®å‰ä¸ºæ­¢æˆ‘ä»¬å¹¶æ²¡æœ‰ä»‹ç»æ–°çš„çŸ¥è¯†ï¼ŒåŒæ—¶ä¹Ÿæ²¡æœ‰åšä»€ä¹ˆæ–°é¢–çš„äº‹æƒ…ã€‚çš„ç¡®å¦‚æ­¤ï¼Œä½†æ˜¯é€šè¿‡ä¸Šé¢å®éªŒçš„ç»ƒä¹ ï¼Œå¯ä»¥å¸®åŠ©ä½ æ›´æ·±å…¥çš„ç†è§£æ•°æ¨¡/æ¨¡æ•°è½¬æ¢çš„åº”ç”¨åœºæ™¯ï¼Œå¹¶ä¸”è®©ä½ èƒ½å¤Ÿæ›´åŠ çµæ´»çš„å¯¹I2Cæ€»çº¿ä¸é€šç”¨GPIOä¸²å£ç»“åˆè¿›è¡Œä½¿ç”¨ã€‚ä¸‹é¢æˆ‘ä»¬è¦æ¥åšä¸€äº›å¥½ç©çš„äº‹æƒ…äº†ï¼Œä¸çŸ¥é“ä½ å°æ—¶å€™æ˜¯å¦æœ‰ç©è¿‡â€œå¤§æŠŠæœºâ€ï¼Œè¿™æ˜¯ä¸€ç§æ‘‡æ†æ¸¸æˆæœºï¼Œæ‘‡æ†å¯ä»¥æœä¸Šä¸‹å·¦å³4ä¸ªæ–¹å‘è½¬åŠ¨ï¼Œä¹Ÿå¯ä»¥ä»ä¸­é—´æŒ‰ä¸‹ã€‚é€šå¸¸ï¼Œä¸Šä¸‹å·¦å³ç”¨æ¥æ§åˆ¶æ¸¸æˆäººç‰©çš„è¡ŒåŠ¨æ–¹å‘ï¼ŒæŒ‰ä¸‹ç”¨æ¥è¿›è¡Œäººç‰©è·³è·ƒã€‚ç°åœ¨ï¼Œæˆ‘ä»¬è¦æ¥åšä¸€ä¸ªç®€å•çš„æ¸¸æˆï¼Œä¸ºæ ‘è“æ´¾è¿æ¥æ“çºµæ†ï¼Œæ§åˆ¶æ¸¸æˆç¨‹åºé¡µé¢ä¸Šåœ†çƒçš„è¡Œä¸ºï¼Œå…¶ä¸­æ–¹å‘æ§åˆ¶åœ†çƒçš„ç§»åŠ¨ï¼ŒæŒ‰ä¸‹æ“çºµæ†åˆ™ä½¿åœ†çƒå˜è‰²ã€‚ æ­¤å®éªŒæ‰€ä½¿ç”¨çš„æ“çºµæ†å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¯ä»¥çœ‹åˆ°ï¼Œæ­¤å…ƒä»¶æœ‰5ä¸ªå¼•è„šï¼š GNDï¼šæ¥åœ°å¼•è„š +5Vï¼š5Vç”µæºå¼•è„š VRXï¼šæ¨ªå‘åæ ‡æ¨¡æ‹Ÿä¿¡å·è¾“å‡ºå¼•è„š VRYï¼šçºµå‘åæ ‡æ¨¡æ‹Ÿä¿¡å·è¾“å‡ºå¼•è„š SWï¼šæŒ‰é’®æ•°å­—ä¿¡å·è¾“å‡ºå¼•è„š æ“ä½œæ†å†…éƒ¨å®é™…ä¸Šå°è£…äº†åŒå‘çš„ç”µé˜»å™¨ï¼Œå…¶é˜»å€¼ä¼šæ ¹æ®æ‘‡æ†çš„æ–¹å‘å˜åŠ¨äº§ç”Ÿå˜åŒ–ï¼Œä»è€Œå½±å“å¼•è„šä¿¡å·çš„äº§ç”Ÿå˜åŒ–ã€‚ 1.è¿›è¡Œè¿çº¿æˆ‘ç›¸ä¿¡ï¼Œç°åœ¨è¿çº¿å¯¹ä½ æ¥è¯´åº”è¯¥æ˜¯æœ€ç®€å•çš„å·¥ä½œäº†ã€‚æ“çºµæ†æœ‰æ¨¡æ‹Ÿä¿¡å·è¾“å‡ºåŒæ—¶ä¹Ÿæœ‰æ•°å­—ä¿¡å·è¾“å‡ºï¼Œæˆ‘ä»¬ä¾ç„¶éœ€è¦ç»“åˆPCF8591ä¸æ ‘è“æ´¾GPIOä¸€èµ·ä½¿ç”¨ã€‚å…³äºPCF8591çš„æ¥çº¿ä¸Šé¢æœ‰ä»‹ç»ï¼Œè¿™é‡Œä¸å†é‡å¤ã€‚æ“ä½œæ†çš„æ¥çº¿æ–¹å¼å¦‚ä¸‹ï¼š æ“çºµæ† æ ‘è“æ´¾/PCF8591 GND æ ‘è“æ´¾GND +5V æ ‘è“æ´¾5.5V VRX PCF8591 AIN0 VRY PCF8591 AIN1 SW æ ‘è“æ´¾GPIO 11ï¼ˆç‰©ç†å¼•è„šï¼‰ 2.ç¼–å†™ä»£ç å¯¹äºæœ¬å®éªŒæ¥è¯´ï¼Œæœ‰æ¶‰åŠåˆ°UIå¼€å‘ï¼Œæˆ‘ä»¬ä¾ç„¶é‡‡ç”¨Pythonè‡ªå¸¦çš„Tkinteråº“ï¼Œå…¶æœ‰å¾ˆå¥½çš„ç§»æ¤æ€§ï¼Œå¹¶ä¸”å…¶æä¾›äº†Canvasç”»å¸ƒï¼Œæˆ‘ä»¬å¯ä»¥çµæ´»çš„æ¸²æŸ“æ‰€éœ€è¦çš„å›¾å½¢ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129#coding:utf-8# å¯¼å…¥UIæ¨¡å—import tkinter as Tkinter#SMBus (System Management Bus,ç³»ç»Ÿç®¡ç†æ€»çº¿) import smbus #åœ¨ç¨‹åºä¸­å¯¼å…¥â€œsmbusâ€æ¨¡å—import RPi.GPIO as GPIO # å¯¼å…¥æ ‘è“æ´¾GPIOæ¨¡å—import time # å¯¼å…¥å®šæ—¶å™¨æ¨¡å—import threading# ä¸»é¡µé¢è®¾ç½®top = Tkinter.Tk()top.geometry('500x300')top.title(\"æ“çºµæ†æ§åˆ¶åœ†çƒ\")# å½“å‰åœ†çƒçš„åæ ‡currentX = 0currentY = 0# å½“å‰åœ†çƒçš„é¢œè‰²æ˜¯å¦çº¢è‰²currentColor = True# è¿›è¡Œçª—å£çš„åˆå§‹åŒ–canvas = Tkinter.Canvas(top, width=500, height=300, borderwidth=0, highlightthickness=0)canvas.grid()# è¿›åŒ–ç”»å¸ƒçš„åˆå§‹åŒ–circle = canvas.create_oval(currentX, currentY, 100, 100, fill=\"red\", outline=\"\")# å®šä¹‰ç§»åŠ¨åœ†çƒçš„æ–¹æ³•def moveCircle(c, x, y): global currentX, currentY moveX = x moveY = y if x &gt;= 0: if x + currentX &gt; 400: moveX = 400 - currentX currentX = 400 else: currentX += x else: if x + currentX &lt; 0: moveX = -currentX currentX = 0 else: currentX += x if y &gt;= 0: if y + currentY &gt; 200: moveY = 200 - currentY currentY = 200 else: currentY += y else: if y + currentY &lt; 0: moveY = -currentY currentY = 0 else: currentY += y canvas.move(c, moveX, moveY)# å®šä¹‰æ”¹å˜åœ†çƒé¢œè‰²çš„æ–¹æ³•def changeColor(c): global currentColor canvas.itemconfig(c, fill= 'red' if currentColor else 'blue') currentColor = not currentColorbus = smbus.SMBus(1) #åˆ›å»ºä¸€ä¸ªsmbuså®ä¾‹# é€šè¿‡PCF8591è¯»å–æ¨¡æ‹Ÿä¿¡å·# æ‘‡æ†Xå¼•è„šçš„æ¨¡æ‹Ÿæ•°æ®def readX(): #å‘é€ä¸€ä¸ªæ§åˆ¶å­—èŠ‚åˆ°è®¾å¤‡ è¡¨ç¤ºè¦è¯»å–AIN0é€šé“çš„æ•°æ® bus.write_byte(0x48,0x40) bus.read_byte(0x48) # ç©ºè¯»ä¸€æ¬¡ï¼Œæ¶ˆè´¹æ‰æ— æ•ˆæ•°æ® return bus.read_byte(0x48) # è¿”å›æŸé€šé“è¾“å…¥çš„æ¨¡æ‹Ÿå€¼A/Dè½¬æ¢åçš„æ•°å­—å€¼# æ‘‡æ†Yå¼•è„šçš„æ¨¡æ‹Ÿæ•°æ®def readY(): #å‘é€ä¸€ä¸ªæ§åˆ¶å­—èŠ‚åˆ°è®¾å¤‡ è¡¨ç¤ºè¦è¯»å–AIN1é€šé“çš„æ•°æ® bus.write_byte(0x48,0x41) bus.read_byte(0x48) # ç©ºè¯»ä¸€æ¬¡ï¼Œæ¶ˆè´¹æ‰æ— æ•ˆæ•°æ® return bus.read_byte(0x48) # è¿”å›æŸé€šé“è¾“å…¥çš„æ¨¡æ‹Ÿå€¼A/Dè½¬æ¢åçš„æ•°å­—å€¼# é€šè¿‡GPIOè¯»å–æ•°å­—ä¿¡å·# è®¾ç½®ä½¿ç”¨çš„å¼•è„šç¼–ç æ¨¡å¼GPIO.setmode(GPIO.BOARD)# æŒ‰é”®ä½¿ç”¨å¼•è„š BCM 17BTN = 11# å¼•è„šåˆå§‹åŒ– è®¾ç½®ä¸‹æ‹‰é«˜ç”µå¹³GPIO.setup(BTN, GPIO.IN, pull_up_down=GPIO.PUD_UP)# åˆ›å»ºå®šæ—¶å™¨å‡½æ•°ï¼Œç”¨æ¥æ£€æŸ¥æ‘‡æ†åŠ¨ä½œdef fun_timer(): global timer x = readX() y = readY() press = GPIO.input(BTN) print('Xï¼š', x) print('Yï¼š', y) print('æŒ‰é’®ï¼š', press) if x &lt;= 10: moveCircle(circle, -10, 0) if x &gt;= 245: moveCircle(circle, 10, 0) if y &lt;= 10: moveCircle(circle, 0, -10) if y &gt;= 245: moveCircle(circle, 0, 10) timer = threading.Timer(0.2, fun_timer) timer.start()timer = threading.Timer(0.2, fun_timer)timer.start()# å®šä¹‰GPIOè¾“å…¥ç«¯å£çš„å›è°ƒdef btnCallback(channel): if not GPIO.input(channel): changeColor(circle)# æ·»åŠ è¾“å…¥å¼•è„šç”µå¹³å˜åŒ–çš„å›è°ƒå‡½æ•°GPIO.add_event_detect(BTN, GPIO.FALLING, callback=btnCallback, bouncetime=200)top.mainloop() ä¸Šé¢çš„ä»£ç æœ‰äº›é•¿ï¼Œä½†æ˜¯æœ‰è¯¦å°½çš„æ³¨é‡Šï¼Œå…³äºUIå¼€å‘æ–¹é¢çš„å†…å®¹ä¸æ˜¯æˆ‘ä»¬æœ¬ç³»åˆ—åšå®¢çš„é‡ç‚¹ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸åšè¿‡å¤šä»‹ç»ã€‚moveCircleå‡½æ•°æ˜¯æ ¸å¿ƒçš„åœ†çƒç§»åŠ¨å‡½æ•°ï¼Œå†…éƒ¨é€šè¿‡è¾¹ç•Œåˆ¤å®šé€»è¾‘å¯ä»¥ç¡®ä¿åœ†çƒä¸ä¼šç§»åŠ¨åˆ°è§†å›¾ç•Œé¢å¤–ã€‚changeColoræ–¹æ³•ç”¨æ¥ä¿®æ”¹åœ†çƒçš„é¢œè‰²ï¼Œè¿™é‡Œæˆ‘ä»¬è®©æ¯æ¬¡æŒ‰é”®ååœ¨çº¢ç»¿é¢œè‰²é—´è¿›è¡Œåˆ‡æ¢ã€‚readXå’ŒreadYå‡½æ•°æˆ‘ä»¬æ— éœ€åšè¿‡å¤šä»‹ç»äº†ï¼Œå…¶é€šè¿‡PCF8591çš„AIN0å’ŒAIN1æ¥ä¼ è¾“æ‘‡æ†çš„æ¨ªçºµåæ ‡ä¿¡å·ã€‚GPIOçš„ç›¸å…³æ“ä½œæˆ‘ä»¬ä¹Ÿéå¸¸ç†Ÿæ‚‰äº†ï¼Œæˆ‘ä»¬é€šè¿‡æ³¨å†Œå›è°ƒå‡½æ•°æ¥ç›‘å¬æ“ä½œæ†æŒ‰é’®æŒ‰ä¸‹çš„è¡Œä¸ºã€‚ åœ¨æ ‘è“æ´¾ä¸Šè¿è¡Œä¸Šé¢çš„ä»£ç ï¼Œå°è¯•æ“ä½œä¸‹ï¼Œæ„Ÿå—ä¸‹ä½¿ç”¨æ“çºµæ†æ§åˆ¶é¡µé¢å…ƒç´ çš„å–œæ‚¦å§ã€‚ 3.ä¸€ç‚¹æ‰©å±•è§‚å¯Ÿä¸Šé¢çš„ç¤ºä¾‹ä»£ç ï¼Œä½ ä¼šå‘ç°ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€äº›ä¸´ç•Œå€¼æ¥ä½œä¸ºè§¦å‘æ–¹å‘åŠ¨ä½œçš„é˜ˆå€¼ï¼Œä¾‹å¦‚10ï¼Œ245è¿™ç§ï¼Œè¿™æ˜¯å› ä¸ºPCF8591æ˜¯8ä½çš„æ•°æ¨¡è½¬æ¢æ¨¡å—ï¼Œå³å…¶è½¬æ¢å‡ºçš„æ•°å­—é‡åœ¨0-255ä¹‹é—´ï¼ˆåŒ…æ‹¬0å’Œ255ï¼‰ï¼Œå¯¹äºæœ¬å®éªŒæ¥è¯´ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰è®©æ‘‡æ†å…ƒä»¶ä¼ è¾“çš„æ¨¡æ‹Ÿé‡å‘æŒ¥æ­£çœŸçš„ä½œç”¨ï¼Œæƒ³ä¸€ä¸‹ï¼Œä½ æ˜¯å¦èƒ½å¤Ÿæ ¹æ®æ“ä½œæ†çš„æ—‹è½¬ç¨‹åº¦æ¥è°ƒæ•´åœ†çƒç§»åŠ¨çš„é€Ÿåº¦å‘¢ï¼ŸåŠ¨æ‰‹è¯•è¯•å§ï¼ ä¸“æ³¨æŠ€æœ¯ï¼Œæ‡‚çš„çƒ­çˆ±ï¼Œæ„¿æ„åˆ†äº«ï¼Œåšä¸ªæœ‹å‹ QQï¼š316045346","categories":[{"name":"Linux","slug":"Linux","permalink":"http://huishao.cc/categories/Linux/"}],"tags":[],"keywords":[{"name":"Linux","slug":"Linux","permalink":"http://huishao.cc/categories/Linux/"}]},{"title":"ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ7ï¼‰â€”â€”æ ‘è“æ´¾æ¨¡æ•°/æ•°æ¨¡è½¬æ¢å®è·µ","slug":"420ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ7ï¼‰â€”â€”æ ‘è“æ´¾æ¨¡æ•°:æ•°æ¨¡è½¬æ¢å®è·µ","date":"2021-07-23T16:00:00.000Z","updated":"2021-07-24T12:41:02.316Z","comments":true,"path":"2021/07/24/420ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ7ï¼‰â€”â€”æ ‘è“æ´¾æ¨¡æ•°:æ•°æ¨¡è½¬æ¢å®è·µ/","link":"","permalink":"http://huishao.cc/2021/07/24/420ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ7ï¼‰â€”â€”æ ‘è“æ´¾æ¨¡æ•°:æ•°æ¨¡è½¬æ¢å®è·µ/","excerpt":"","text":"ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ7ï¼‰â€”â€”æ ‘è“æ´¾æ¨¡æ•°/æ•°æ¨¡è½¬æ¢å®è·µå¦‚æœä½ è·Ÿéšæœ¬ç³»åˆ—åšå®¢é˜…è¯»åˆ°æ­¤ï¼Œé‚£ä¹ˆæˆ‘ç›¸ä¿¡ï¼Œä½ å·²ç»èƒ½å¤Ÿä½¿ç”¨æ ‘è“æ´¾çš„GPIOæ¥å£åšè®¸å¤šæœ‰è¶£çš„äº‹æƒ…äº†ã€‚ä½†æ˜¯ä¸çŸ¥ä½ æ˜¯å¦æœ‰å‘ç°ï¼ŒGPIOåŠŸèƒ½æ¥å£æ— è®ºæ˜¯è¾“å…¥è¿˜æ˜¯è¾“å‡ºï¼Œéƒ½åªæœ‰é«˜ç”µå¹³æˆ–ä½ç”µå¹³è¿™ä¸¤ç§é€‰é¡¹ï¼ŒæŠ½è±¡åˆ°æ•°å­¦ä¸­ï¼Œå³åªæœ‰0å’Œ1ä¸¤ç§æ•°å€¼é€‰é¡¹ï¼Œè¿™ç§ç¦»æ•£æ•°å€¼çš„ä¿¡å·æˆ‘ä»¬å°†å…¶ç§°ä¸ºæ•°å­—ä¿¡å·ã€‚æ›´å¤šæ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨çš„å…ƒä»¶å¹¶éåªæœ‰å¼€å’Œå…³ä¸¤ç§çŠ¶æ€ï¼Œè¿™æ—¶å€™å°±éœ€è¦ç”¨æ•°å€¼è¿ç»­çš„ä¿¡å·æ¥è¡¨è¾¾ï¼Œè¿™ç§è¿ç»­çš„ä¿¡å·æˆ‘ä»¬ç§°ä¹‹ä¸ºæ¨¡æ‹Ÿä¿¡å·ã€‚æœ¬ç¯‡åšå®¢ï¼Œæˆ‘ä»¬å°†åˆæ­¥æ¶‰çŒåœ¨æ ‘è“æ´¾ä¸Šå¦‚ä½•å¤„ç†æ¨¡æ‹Ÿä¿¡å·ã€‚ ä¸€ã€æ ‘è“æ´¾æ¨¡æ•°è½¬æ¢æ¨¡å—åŸºç¡€å…¶å®ï¼Œç›´æ¥ä½¿ç”¨GPIOçš„åŠŸèƒ½å¼•è„šå¹¶éå®Œå…¨ä¸èƒ½å¤„ç†æ¨¡æ‹Ÿä¿¡å·ï¼Œæˆ‘ä»¬çŸ¥é“æ— è®ºéœ€è¦å¤šå°‘ç§çŠ¶æ€ä¿¡å·ï¼Œé€šè¿‡GPIOçš„ç”µå¹³é«˜ä½æ¥å¤„ç†éƒ½æ˜¯æ— æ³•å®ç°çš„ï¼Œä½†æ˜¯ä½ ä¸€å®šè¿˜è®°å¾—PWMè„‰å†²å®½åº¦è°ƒåˆ¶æŠ€æœ¯ï¼Œè¿™å…¶å®å°±æ˜¯ä¸€ç§å°†æ•°å­—ä¿¡å·è½¬æ¢æˆæ¨¡æ‹Ÿä¿¡å·çš„æ–¹å¼ï¼Œä¾‹å¦‚åœ¨å‰é¢çš„RGBå®éªŒä¸­ï¼Œæˆ‘ä»¬æ›¾ä½¿ç”¨PWMæŠ€æœ¯æ¥æ§åˆ¶3ç§å‘å…‰äºŒæç®¡çš„å‘å…‰æ˜æš—ç¨‹åº¦ï¼Œå¦‚æœå°†äºŒæç®¡çš„å…¨äº®å®šä¹‰ä¸ºå€¼1ï¼Œå…¨æš—å®šä¹‰ä¸ºå€¼0ï¼Œåˆ™åœ¨æ˜æš—ä¹‹é—´å¯ä»¥é€šè¿‡è®¾ç½®ä¸åŒçš„å ç©ºæ¯”æ¥å®ç°ï¼Œä¾‹å¦‚éœ€è¦äº®åº¦å€¼ä¸º0.5æ—¶ï¼Œåªéœ€è¦è®¾ç½®å ç©ºæ¯”ä¸º50%å³å¯ã€‚é€šè¿‡PWMæŠ€æœ¯ï¼Œè™½ç„¶æˆ‘ä»¬æ¯ä¸ªç²¾ç¡®çš„æ—¶åˆ»è¾“å‡ºçš„ä¾ç„¶æ˜¯æ•°å­—ä¿¡å·(0æˆ–1)ï¼Œä½†æœ€ç»ˆä½œç”¨åˆ°å…ƒä»¶ä¸Šçš„ä¿¡å·æ˜¯æ¨¡æ‹Ÿçš„ï¼Œè¿™å°±å®Œæˆäº†æœ€ç®€å•çš„æ•°æ¨¡è½¬æ¢ã€‚ åŒæ ·çš„é“ç†ï¼Œå¯¹äºæŸäº›å¤–æ¥å…ƒä»¶æ¥è¯´ï¼Œå…¶è¾“å‡ºçš„ä¿¡å·ä¹Ÿå¯èƒ½æ˜¯æ¨¡æ‹Ÿçš„ï¼Œä¾‹å¦‚æ¸©åº¦ã€å…‰äº®ä¼ æ„Ÿå™¨ï¼Œå¦‚æœç›´æ¥é€šè¿‡GPIOæ¥è·å–è¿™äº›å…ƒä»¶çš„ä¿¡å·æ˜¯æ¨¡æ‹Ÿçš„ï¼Œè§£æä¼šéå¸¸å›°éš¾ï¼Œè¿™æ—¶æˆ‘ä»¬å°±éœ€è¦ä¸€ä¸ªæ•°æ¨¡è½¬æ¢æ¨¡å—æ¥å¸®åŠ©æˆ‘ä»¬å°†å…¶è½¬æ¢ä¸ºæ•°å­—ä¿¡å·ã€‚ 1ã€å…³äºæ¨¡æ•°è½¬æ¢æ•°æ¨¡è½¬æ¢å™¨ï¼Œåˆç§°D/Aè½¬æ¢å™¨ï¼Œç®€ç§°DACã€‚ç”¨æ¥æŠŠæ•°å­—é‡è½¬æ¢æˆæ¨¡æ‹Ÿé‡çš„å™¨ä»¶ï¼Œå…³äºæ•°æ¨¡è½¬æ¢å™¨çš„ç”µè·¯å’Œå·¥ä½œåŸç†ï¼Œä¸åœ¨æœ¬ç¯‡åšå®¢çš„æ ¸å¿ƒè®¨è®ºèŒƒå›´å†…ï¼Œå¦‚æœä½ æœ‰å…´è¶£å¯ä»¥æŸ¥é˜…æ•°å­—ç”µè·¯å’Œæ¨¡æ‹Ÿç”µè·¯çš„ç›¸å…³ä¹¦ç±ã€‚å¯¹å…¶å¯¹åº”ï¼Œæ¨¡æ•°è½¬æ¢å™¨ï¼Œåˆç§°ä¸ºA/Dè½¬æ¢å™¨ï¼Œç®€ç§°ADCã€‚ç”¨æ¥æŠŠæ¨¡æ‹Ÿä¿¡å·è½¬æ¢ä¸ºæ•°å­—ä¿¡å·ã€‚æ ‘è“æ´¾æœ¬èº«æ²¡æœ‰é›†æˆæ¨¡æ•°è½¬æ¢æ¨¡å—ï¼Œæˆ‘ä»¬éœ€è¦å¤–æ¥ä¸€ä¸ªè½¬æ¢å•å…ƒï¼Œåœ¨æœ¬å®éªŒä¸­ï¼Œæˆ‘ä»¬é‡‡ç”¨åŸºäºPCF8591èŠ¯ç‰‡çš„æ¨¡æ•°è½¬æ¢æ¨¡å—ã€‚ 2ã€PCF8591èŠ¯ç‰‡PCF8591æ˜¯ä¸€ä¸ªå•ç‰‡é›†æˆï¼Œå•ç‹¬ä¾›ç”µï¼Œä½åŠŸè€—çš„8ä½æ•°A/Dè½¬æ¢å™¨ï¼Œå…¶èŠ¯ç‰‡æœ¬èº«å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¯ä»¥çœ‹åˆ°å…¶å·¦å³å„æœ‰8ä¸ªå¼•è„šï¼Œå¼•è„šåŠŸèƒ½å›¾å¦‚ä¸‹ï¼š å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå…¶AIN0åˆ°AIN3éƒ½æ˜¯æ¨¡æ‹Ÿè¾“å…¥å¼•è„šï¼Œå…¶ç”¨æ¥è¾“å…¥å¤–æ¥å…ƒä»¶çš„æ¨¡æ‹Ÿä¿¡å·ï¼Œå®ƒè¿˜æœ‰1ä¸ªæ¨¡æ‹Ÿè¾“å…¥å¼•è„šAOUTï¼Œç”¨æ¥è¾“å‡ºæ¨¡æ‹Ÿä¿¡å·ã€‚ A0ï¼ŒA1ï¼ŒA2è¿™3ä¸ªå¼•è„šç”¨æ¥è¿›è¡Œç¡¬ä»¶åœ°å€ç¼–ç¨‹ï¼Œåœ¨åµŒå…¥å¼ç¼–ç¨‹ä¸­ï¼Œæ¯ä¸ªå¯ç¼–ç¨‹çš„å¼•è„šæˆ‘ä»¬å°†å…¶ç†è§£ä¸ºä¸€ä¸ªäºŒè¿›åˆ¶ä½ï¼Œ3ä¸ªå¼•è„šå¯ä»¥è¡¨è¾¾0-7è¿™8ä¸ªæ•°å­—ï¼ˆ000ï¼Œ001ï¼Œ010ï¼Œ011ï¼Œ100ï¼Œ101ï¼Œ110ï¼Œ111ï¼‰ï¼Œå› æ­¤åœ¨åŒä¸€ä¸ªI2Cæ€»çº¿ä¸Šï¼Œå®é™…å¯ä»¥åŒæ—¶è¿æ¥8ä¸ªPCF8591èŠ¯ç‰‡è¿›è¡Œå·¥ä½œï¼ˆI2Cæ€»çº¿æˆ‘ä»¬åé¢ä¼šä»‹ç»ï¼‰ã€‚ VSSæ˜¯æ¥åœ°å¼•è„šï¼ŒVDDæ˜¯å·¥ä½œç”µå‹å¼•è„šï¼ŒAGNDæ˜¯æ¨¡æ‹Ÿä¿¡å·æ¥åœ°å¼•è„šï¼ŒVREFæ˜¯åŸºå‡†ç”µæºå¼•è„šã€‚ OSCå¼•è„šä¸ºå¤–éƒ¨æ—¶é’Ÿè¾“å…¥ç«¯æˆ–å†…éƒ¨æ—¶é’Ÿè¾“å‡ºç«¯ï¼ŒEXTå¦‚æœæ¥åœ°ï¼Œè¡¨ç¤ºä½¿ç”¨å†…éƒ¨æ—¶é’Ÿï¼Œå¦åˆ™è¡¨ç¤ºä½¿ç”¨å¤–éƒ¨æ—¶é’Ÿã€‚ SCLå’ŒSDAæ˜¯I2Cæ€»çº¿æ¥å£å¼•è„šï¼Œæˆ‘ä»¬ä½¿ç”¨è¿™ä¸¤ä¸ªå¼•è„šæ¥è¿›è¡Œæ•°æ®ä¼ è¾“ï¼Œåé¢ä¼šä»‹ç»ã€‚ ä¸‹é¢æ˜¯PCF8591å·¥ä½œçš„ç”µè·¯åŸç†å›¾ï¼š æ¸©é¦¨æç¤ºï¼Œåœ¨é˜…è¯»æœ¬ç¯‡åšå®¢æ—¶ï¼Œéš¾åº¦å¯èƒ½è¦æ¯”æœ¬ç³»åˆ—çš„å‰å‡ ç¯‡åšå®¢å¤§ï¼Œä½ å¯èƒ½ä¼šæ„Ÿè§‰äº‘é‡Œé›¾é‡Œï¼Œä¸è¦ç€æ€¥ï¼Œåé¢æˆ‘ä»¬ä¼šé€šè¿‡å®éªŒæ¥å¸®åŠ©ä½ ç†è§£æ¨¡æ•°è½¬æ¢ä»¥åŠI2æ€»çº¿çš„å·¥ä½œæ–¹å¼ï¼ŒæŒæ¡äº†è¿™äº›ï¼Œä½ çš„æ ‘è“æ´¾å¼€å‘æœ¬é¢†å°†è¿›ä¸€æ­¥æå‡ã€‚ 3ã€PCF8591å®éªŒæ¨¡å—ä¸Šä¸€å°èŠ‚æˆ‘ä»¬ä»‹ç»äº†PCF8591èŠ¯ç‰‡çš„å¼•è„šç”¨æ³•ï¼Œå®é™…åœ¨æœ¬å®éªŒä¸­ï¼Œæˆ‘ä»¬å¹¶ä¸ä¼šç›´æ¥ä½¿ç”¨è¿™ä¸ªèŠ¯ç‰‡ï¼Œè€Œæ˜¯ä½¿ç”¨åŸºäºPCF8591èŠ¯ç‰‡çš„ä¸€ä¸ªå·¥ä½œæ¨¡å—ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæ­¤æ¨¡å—åŠŸèƒ½éå¸¸ä¸°å¯Œï¼Œæˆ‘ä»¬é€ä¸€ä»‹ç»ã€‚ å·¦è¾¹ä¸€åˆ—å¼•è„šä½œç”¨åˆ†åˆ«ä¸ºï¼š AOUT ï¼šå†…éƒ¨èŠ¯ç‰‡çš„DA è¾“å‡ºæ¥å£ AIN0 ï¼šå†…éƒ¨èŠ¯ç‰‡çš„æ¨¡æ‹Ÿè¾“å…¥æ¥å£ 0 AIN1 ï¼šå†…éƒ¨èŠ¯ç‰‡çš„æ¨¡æ‹Ÿè¾“å…¥æ¥å£ 1 AIN2 ï¼šå†…éƒ¨èŠ¯ç‰‡çš„æ¨¡æ‹Ÿè¾“å…¥æ¥å£ 2 AIN3 ï¼šå†…éƒ¨èŠ¯ç‰‡çš„æ¨¡æ‹Ÿè¾“å…¥æ¥å£ 3 å³è¾¹ä¸€åˆ—å¼•è„šçš„ä½œç”¨ä¸ºï¼š SCL ï¼šI2C é€šä¿¡æ¥å£ SDA ï¼šI2C é€šä¿¡æ¥å£ GND ï¼šæ¨¡å—åœ° VCC ï¼šç”µæºæ¥å£ å¤–æ¥ 3.3v-5v é™¤æ­¤ä¹‹å¤–ï¼ŒP4ï¼ŒP5ï¼ŒP6ä¸‰ä¸ªåœ°æ–¹æˆ‘ä»¬å¯ä»¥é€šè¿‡æ¥çŸ­è·¯å¸½çš„æ–¹å¼æ¥é€‰æ‹©æ˜¯å¦æ¥å…¥ç›¸å…³åŠŸèƒ½ã€‚ P4ï¼šæ¥ä¸ŠçŸ­è·¯å¸½ï¼Œè¡¨ç¤ºå°†çƒ­æ•ç”µé˜»æ¥å…¥ç”µè·¯ã€‚ P5ï¼šæ¥ä¸ŠçŸ­è·¯å¸½ï¼Œè¡¨ç¤ºå°†å…‰æ•ç”µé˜»æ¥å…¥ç”µè·¯ã€‚ P6ï¼šæ¥ä¸ŠçŸ­è·¯å¸½ï¼Œè¡¨ç¤ºå°†0-5Vçš„å¯è°ƒèŠ‚ç”µå‹æ¥å…¥ç”µè·¯ã€‚ å¦‚æœP4ï¼ŒP5ï¼ŒP6éƒ½ä¸æ¥çŸ­è·¯å¸½ï¼Œå¯ä»¥ä½¿ç”¨å¤–éƒ¨å…ƒä»¶é€šè¿‡4ä¸ªAINå¼•è„šè¿›è¡Œè¾“å…¥ã€‚å…³äºè¿™å‡ ä¸ªåŠŸèƒ½å¦‚ä½•ä½¿ç”¨ï¼Œåé¢æˆ‘ä»¬ä¼šä»‹ç»ã€‚ æ­¤æ¨¡å—çš„å·¥ä½œç¤ºæ„å›¾å¦‚ä¸‹ï¼š 4.I2Cæ€»çº¿åŸºç¡€çŸ¥è¯†I2Cæ€»çº¿æ˜¯æœ‰Philipså…¬å¸å¼€å‘çš„ä¸€ç§ç®€å•ã€åŒå‘çš„åŒæ­¥ä¸²è¡Œæ€»çº¿ã€‚åªéœ€è¦ä¸¤æ ¹çº¿å³å¯å®ç°è¿æ¥åœ¨æ€»çº¿ä¸Šçš„è®¾å¤‡é—´è¿›è¡Œé€šä¿¡ã€‚åœ¨I2Cæ€»çº¿çš„é€šè®¯åè®®ä¸­ï¼ŒSDAç”¨æ¥ä¼ è¾“æ•°æ®ï¼ŒSCLæ˜¯ä¸²è¡Œçš„æ—¶é’Ÿçº¿ï¼Œä¼ è¾“æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š åªçœ‹å›¾ä½ å¯èƒ½ä¼šæ„Ÿè§‰éå¸¸ç–‘æƒ‘ï¼Œç»“åˆæ ‘è“æ´¾å·¥ä½œèµ·æ¥ï¼Œå…¶å®è¦ç†è§£å¹¶ä¸å¤æ‚ï¼Œåœ¨I2Cåè®®ä¸­ï¼Œæ ‘è“æ´¾å°±æ˜¯ä¸»æœºï¼Œè¿æ¥çš„PCF8591å°±æ˜¯ä»æœºï¼Œä¸»æœºä¸ä»æœºé—´æ— è®ºæ˜¯å‘é€æ•°æ®è¿˜æ˜¯æ¥å—æ•°æ®ï¼Œéƒ½æ˜¯ç”±ä¸»æœºå…ˆå‘èµ·ï¼Œå½¢è±¡åŒ–çš„æµç¨‹å¦‚ä¸‹ï¼š 1.ä¸»æœºè§¦å‘å¼€å§‹é€šä¿¡æ¡ä»¶(SDAå’ŒSCLç”µå¹³æ»¡è¶³ä¸€å®šæ¡ä»¶)ã€‚ 2.é€šè¿‡åœ°å€æ‰¾åˆ°è¦é€šä¿¡çš„ä»æœº(å³PCF8591çš„3ä¸ªåœ°å€ç¼–ç¨‹å¼•è„šè®¾ç½®çš„åœ°å€)ã€‚ 3.ä¸»æœºå‘é€å·¥ä½œå‘½ä»¤ï¼Œå³æŒ‡å®šè¦ä»ä»æœºè¯»æ•°æ®è¿˜æ˜¯å†™æ•°æ®ï¼Œè¯»å“ªä¸ªé€šé“çš„æ•°æ®ç­‰ï¼ˆPCF8591æœ‰4ä¸ªè¾“å…¥é€šé“ï¼‰ã€‚ 4.æ”¶åˆ°æ•°æ®ä¼šå‘é€ACKå›æ‰§ã€‚ 5.ç»“æŸæ­¤æ¬¡é€šè®¯åï¼Œä¸»æœºå‘é€å®ŒæˆæŒ‡ä»¤ç»™ä»æœºï¼ˆSDAå’ŒSCLç”µå¹³æ»¡è¶³ä¸€å®šæ¡ä»¶ï¼‰ã€‚ 5.å‡ ä¸ªé‡è¦çš„æŒ‡æ ‡æ¦‚å¿µ1.ä½æ•° ADCå…ƒä»¶çš„ä½æ•°éå¸¸é‡è¦ï¼Œå®ƒæè¿°äº†ä¸€ç§å¯è¯»æ¦‚å¿µï¼Œä»¥PCF8591ä¸ºä¾‹ï¼Œå…¶å®8ä½çš„æ•°æ¨¡è½¬æ¢èŠ¯ç‰‡ï¼Œä¹Ÿå°±æ˜¯è¯´å…¶è¾“å‡ºçš„æ•°å­—é‡æ˜¯0åˆ°255ä¹‹é—´çš„æ•°å€¼ï¼Œä¸€å…±256ç§(2çš„8æ¬¡æ–¹)ã€‚ 2.åŸºå‡†ç”µå‹ åŸºå‡†ç”µå‹ç”¨æ¥æ ‡å‡†æ•°æ¨¡è½¬æ¢èŠ¯ç‰‡è¾“å‡ºçš„æ•°å€¼ä¸ç”µå‹ä¹‹é—´å…³ç³»ï¼Œä¾‹å¦‚åŸºå‡†ç”µå‹ä¸º5Vï¼Œåˆ™0åˆ°255è¿™256ä¸ªåˆ»åº¦ç›¸å½“äºå°†5Vçš„ç”µå‹å¹³å‡åˆ†æˆäº†255ä»½ï¼Œæ•°å€¼æ²¡å¢åŠ 1ï¼Œç›¸å½“äºç”µå‹çº¦å¢åŠ 0.019Vã€‚ äºŒã€å®éªŒï¼šæµ‹å®šæ¸©åº¦å’Œå…‰äº®åº¦ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»å‡†å¤‡å¥½äº†éœ€è¦ä½¿ç”¨åˆ°çš„åŸºç¡€çŸ¥è¯†ï¼Œå¯ä»¥å¼€å§‹æˆ‘ä»¬çš„è¯•éªŒäº†ã€‚PCF8591è‡ªå¸¦å…‰æ„Ÿä¸æ¸©åº¦ä¼ æ„Ÿå™¨ï¼Œæˆ‘ä»¬å°è¯•ä½¿ç”¨è¿™ä¸¤ä¸ªä¼ æ„Ÿå™¨æ¥è¯»å–ç¯å¢ƒçš„æ¸©åº¦ä¸äº®åº¦ã€‚ 1ã€è¿çº¿é¦–å…ˆï¼Œæˆ‘ä»¬å¯ä»¥å…ˆä½¿ç”¨3ä¸ªçŸ­è·¯å¸½å°†PCF8591æ¨¡å—çš„P4ã€P5ã€P6éƒ½è¿›è¡ŒçŸ­æ¥ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š çŸ­æ¥åï¼Œç›¸å½“äºæˆ‘ä»¬å°†PCF8591æ¨¡å—è‡ªå¸¦çš„å¯è°ƒèŠ‚è¾“å‡ºç”µå‹ã€å…‰æ„Ÿä¿¡å·è¾“å‡ºå’Œæ¸©åº¦ä¿¡å·è¾“å‡ºéƒ½æ¥å…¥äº†ç”µè·¯ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡I2Cæ€»çº¿å¯¹å…¶æ•°æ®è¿›è¡Œè·å–ã€‚ ä¹‹åï¼Œæˆ‘ä»¬å°†PCF8591æ¨¡å—æ¨¡å—çš„SCLã€SDAåˆ†åˆ«è¿æ¥æ ‘è“æ´¾å¯¹åº”åŠŸèƒ½çš„å¼•è„šï¼ŒGNDè¿›è¡Œæ¥åœ°ï¼ŒVCCæ¥5Vã€‚å…³äºæ‰¾åˆ°æ ‘è“æ´¾ä¸Šè¿™äº›å¼•è„šçš„ä½ç½®ï¼Œå¯ä»¥å‚è€ƒä¸‹é¢åšå®¢ï¼š https://my.oschina.net/u/2340880/blog/5123429 ç¬”è€…è¿™é‡Œä½¿ç”¨æ‰©å±•æ¿æ¥æ¥çº¿ï¼Œä¼šæ›´åŠ ç›´è§‚æ–¹ä¾¿ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†æ¥çº¿éƒ¨åˆ†çš„å·¥ä½œã€‚ 2ã€ä»£ç ç¼–å†™å› ä¸ºéœ€è¦ä½¿ç”¨åˆ°æ ‘è“æ´¾çš„I2Cæ€»çº¿åŠŸèƒ½ï¼Œåœ¨å¼€å§‹ç¼–ç å‰ï¼Œæˆ‘ä»¬éœ€è¦å°†æ ‘è“æ´¾çš„I2CåŠŸèƒ½å¼€å¯ï¼Œæ‰“å¼€æ ‘è“æ´¾çš„é…ç½®é¡µé¢ï¼Œåœ¨å…¶interfacesé€‰é¡¹ä¸­æ‰“å¼€SPIå’ŒI2Cé€‰é¡¹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ æˆ‘ä»¬å…ˆå°†å®Œæ•´çš„å®éªŒä»£ç å¥‰ä¸Šï¼š 12345678910111213141516171819202122232425262728293031#coding:utf-8#SMBus (System Management Bus,ç³»ç»Ÿç®¡ç†æ€»çº¿) import smbus #åœ¨ç¨‹åºä¸­å¯¼å…¥â€œsmbusâ€æ¨¡å—import timebus = smbus.SMBus(1) #åˆ›å»ºä¸€ä¸ªsmbuså®ä¾‹# æ•°æ®è¯»å–çš„æ–¹æ³•def read(chn): #channel if chn == 0: #å‘é€ä¸€ä¸ªæ§åˆ¶å­—èŠ‚åˆ°è®¾å¤‡ è¡¨ç¤ºè¦è¯»å–AIN0é€šé“çš„æ•°æ® bus.write_byte(0x48,0x00) if chn == 1: #å‘é€ä¸€ä¸ªæ§åˆ¶å­—èŠ‚åˆ°è®¾å¤‡ è¡¨ç¤ºè¦è¯»å–AIN1é€šé“çš„æ•°æ® bus.write_byte(0x48,0x01) if chn == 2: #å‘é€ä¸€ä¸ªæ§åˆ¶å­—èŠ‚åˆ°è®¾å¤‡ è¡¨ç¤ºè¦è¯»å–AIN2é€šé“çš„æ•°æ® bus.write_byte(0x48,0x02) if chn == 3: #å‘é€ä¸€ä¸ªæ§åˆ¶å­—èŠ‚åˆ°è®¾å¤‡ è¡¨ç¤ºè¦è¯»å–AIN3é€šé“çš„æ•°æ® bus.write_byte(0x48,0x03) bus.read_byte(0x48) # ç©ºè¯»ä¸€æ¬¡ï¼Œæ¶ˆè´¹æ‰æ— æ•ˆæ•°æ® return bus.read_byte(0x48) # è¿”å›æŸé€šé“è¾“å…¥çš„æ¨¡æ‹Ÿå€¼A/Dè½¬æ¢åçš„æ•°å­—å€¼if __name__ == \"__main__\": while True: print('ç”µä½è®¡ AIN3 = ', 0.0196 * read(3)) #ç”µä½è®¡æ¨¡æ‹Ÿä¿¡å·è½¬åŒ–çš„æ•°å­—å€¼ print('å…‰æ•ç”µé˜» AIN0 = ', 255 - read(0)) #å…‰æ•ç”µé˜»æ¨¡æ‹Ÿä¿¡å·è½¬åŒ–çš„æ•°å­— print('çƒ­æ•ç”µé˜» AIN1 = ',255-read(1)) #çƒ­æ•ç”µé˜»æ¨¡æ‹Ÿä¿¡å·è½¬åŒ–çš„æ•°å­—å€¼ time.sleep(2) ä¸‹é¢æˆ‘ä»¬æ¥è¯¦ç»†è§£é‡Šä¸‹ä¸Šé¢çš„ä»£ç ï¼Œé¦–å…ˆsmbusæ˜¯ä¸€ä¸ªPythonæ¨¡å—ï¼Œæˆ‘ä»¬ä¹‹å‰å¹¶æ²¡ä½¿ç”¨è¿‡ï¼Œæˆ‘ä»¬è¿™æ¬¡å®éªŒä¸ä½¿ç”¨GPIOï¼Œä½¿ç”¨smbusæ¥è¿›è¡ŒI2Cæ€»çº¿ç®¡ç†ã€‚ åœ¨æ ¸å¿ƒé€»è¾‘æ‰§è¡Œå‰ï¼Œé¦–å…ˆéœ€è¦è¿›è¡Œæ€»çº¿ç®¡ç†å™¨çš„å®ä¾‹åŒ–ï¼Œä½¿ç”¨å¦‚ä¸‹æ–¹æ³•ï¼š 1bus = smbus.SMBus(1) å…¶ä¸­çš„å‚æ•°è¡¨ç¤ºè¦ä½¿ç”¨çš„I2Cç‰ˆæœ¬ã€‚ å‰é¢æˆ‘ä»¬åˆ†æè¿‡ï¼Œåœ¨I2Cæ€»çº¿é€šä¿¡ä¸­ï¼Œä¸»æœºå…ˆè¦å‘é€æŒ‡ä»¤å‘Šè¯‰ä»æœºè¦åšä»€ä¹ˆï¼Œå¯¹åº”ä»£ç ä¸­å°±æ˜¯write_byteæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ç”¨æ¥å‘PCFèŠ¯ç‰‡å‘é€ä¸€ä¸ª8ä½çš„æ§åˆ¶æŒ‡ä»¤ï¼Œé€šè¿‡æŸ¥é˜…èŠ¯ç‰‡æ‰‹å†Œï¼Œå¾ˆå®¹æ˜“æ‰¾åˆ°è¿™ä¸ª8ä½çš„æ§åˆ¶æŒ‡ä»¤æ¯ä¸€ä½çš„æ„ä¹‰ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š æˆ‘ä»¬ä»å·¦å¾€å³æ¥åˆ†æä¸Šå›¾ã€‚ å¯¹äºä¸Šå›¾ï¼Œæˆ‘ä»¬åœ¨å¤šè§£é‡Šä¸€ä¸‹ï¼Œè¿™ä¸ª8ä½çš„æ§åˆ¶æŒ‡ä»¤ï¼Œç¬¬1ä½å’Œç¬¬5ä½éƒ½æ˜¯é»˜è®¤å¡«å……ä½ï¼Œéƒ½ç”¨0å¡«å……ï¼Œç›®å‰æ²¡æœ‰ä»»ä½•æ„ä¹‰ã€‚ ç¬¬2ä½è¡¨ç¤ºæ˜¯å¦å¼€å¯AOUTè¾“å‡ºå£ï¼Œåªæœ‰è¿™ä¸€ä½ä¸º1ï¼Œæ•°æ¨¡è½¬æ¢æ‰ä¼šå·¥ä½œï¼Œæ•°å­—ä¿¡å·æ‰ä¼šè¢«è½¬æ¢ä¸ºæ¨¡æ‹Ÿä¿¡å·ä»AOUTå¼•è„šè¾“å‡ºã€‚ï¼ˆæœ¬æ¬¡å®éªŒæˆ‘ä»¬æš‚ä¸ä½¿ç”¨ï¼‰ ç¬¬3ä½å’Œç¬¬4ä½ç”¨æ¥ç¼–ç¨‹æ§åˆ¶è¾“å…¥æ¨¡å¼ï¼Œè¿™ä¸¤ä½å¯ä»¥ç»„æˆçš„æ•°å€¼æœ‰00ï¼Œ01ï¼Œ10ï¼Œ11å…±å››ç§ï¼Œè®¾ç½®ä¸º00è¡¨ç¤ºAINç«¯å£ä¸è¾“å…¥é€šé“ä¸€ä¸€å¯¹åº”ã€‚01ï¼Œ10ï¼Œ11è¿™3ç§æ¨¡å¼é€šé“çš„å€¼éƒ½æ˜¯ç»è¿‡ å¤„ç†çš„ï¼Œä¸Šå›¾æœ‰æ˜ç¡®çš„æ ‡æ³¨ï¼Œæ¯”å¦‚åœ¨11æ¨¡å¼ä¸‹ï¼Œé€šé“0çš„å€¼æ˜¯AIN0å’ŒAIN1è¾“å…¥çš„å·®åˆ†ï¼Œé€šé“1çš„å€¼æ˜¯AIN2å’ŒAIN3è¾“å…¥çš„å·®åˆ†ã€‚ï¼ˆæœ¬æ¬¡å®éªŒæˆ‘ä»¬ä¹Ÿæ— éœ€ä½¿ç”¨è¿™ä¸€åŠŸèƒ½ï¼‰ ç¬¬6ä½çš„ä½œç”¨æ˜¯è®¾ç½®æ˜¯å¦è‡ªåŠ¨åˆ‡æ¢é€šé“ï¼Œå½“å…¶è®¾ç½®ä¸º1æ—¶ï¼Œæ¯æ¬¡è¯»å–æ•°æ®åï¼Œé€šé“éƒ½ä¼šåˆ‡æ¢ï¼Œä¾‹å¦‚ç¬¬ä¸€æ¬¡è¯»å–é€šé“0çš„æ•°å€¼ï¼Œç¬¬äºŒæ¬¡ä¼šåœ¨è¯»å–æ—¶ï¼Œä¼šè‡ªåŠ¨è¯»å–é€šé“1çš„æ•°å€¼ã€‚ ç¬¬7ä½å’Œç¬¬8ä½ç”¨æ¥æŒ‡å®šä»å“ªä¸ªé€šé“è¯»å–æ•°å€¼ï¼Œæœ‰4ä¸ªé€šé“å¯ç”¨ï¼Œåˆ†åˆ«é€šè¿‡00ï¼Œ01ï¼Œ10ï¼Œ11è¿›è¡Œè®¾ç½®ã€‚ æˆ‘ä»¬å†æ¥çœ‹ä¸‹write_byteæ–¹æ³•ï¼š 1bus.write_byte(0x48,0x00) è¿™ä¸ªæ–¹æ³•æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬2ä¸ªå‚æ•°å°±æ˜¯æˆ‘ä»¬ä¸Šé¢è¯´çš„æŒ‡ä»¤å‚æ•°ï¼Œå…¶ç”¨16è¿›åˆ¶è¡¨ç¤ºï¼Œä¾‹å¦‚0x03è®¾ç½®ä¸ºï¼š ç¬¬1ä½ ç¬¬2ä½ ç¬¬3ä½ ç¬¬4ä½ ç¬¬5ä½ ç¬¬6ä½ ç¬¬7ä½ ç¬¬8ä½ 0(å ä½) 0(ä¸ä½¿ç”¨AOUT) 0(ä¸€ä¸€å¯¹åº”æ¨¡å¼) 0(ä¸€ä¸€å¯¹åº”æ¨¡å¼) 0(å ä½) 0(ä¸å¯åŠ¨åˆ‡æ¢é€šé“) 1(è®¾ç½®è¦è¯»å–çš„é€šé“) 1(è®¾ç½®è¦è¯»å–çš„é€šé“) write_byteè¿™ä¸ªæ–¹æ³•çš„ç¬¬1ä¸ªå‚æ•°ç”¨æ¥è®¾ç½®I2Cæ€»çº¿ä¸­è¦ä¸ºå“ªä¸€ä¸ªä»æœºè®¾ç½®æŒ‡ä»¤ï¼ŒPCFçš„åœ°å€è®¾ç½®æ˜¯7ä½ï¼ŒæŸ¥é˜…æ‰‹å†Œå¦‚ä¸‹ï¼š å¯ä»¥çœ‹åˆ°ç¬¬4ä½åˆ°ç¬¬7ä½éƒ½æ˜¯å›ºå®šçš„ï¼Œå‰3ä½æ˜¯å¯ç¼–ç¨‹çš„ï¼Œè¿˜è®°å¾—PCFçš„A0åˆ°A3å¼•è„šå§ï¼Œå°±æ˜¯è®©ä¸»æœºæ¥åˆ†é…ä»æœºåœ°å€ä½¿ç”¨çš„ã€‚æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼ŒPCFä»æœºçš„åœ°å€ä¸€å®šåœ¨äºŒè¿›åˆ¶æ•°01001000(0x48)åˆ°01001111(0x4F)ä¹‹é—´ï¼Œè¦æŸ¥é˜…å½“å‰è¿æ¥åˆ°æ ‘è“æ´¾çš„PCFä»æœºçš„åœ°å€ï¼Œå¯ä»¥åœ¨æ ‘è“æ´¾ç»ˆç«¯è¾“å…¥å¦‚ä¸‹æŒ‡ä»¤ï¼š 1sudo i2cdetect -y 1 æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä»å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæ ‘è“æ´¾å½“å‰åªè¿æ¥äº†ä¸€ä¸ªI2Cä»æœºæ¨¡å—ï¼Œåˆ†é…çš„åœ°å€æ˜¯0x48ã€‚ ç°åœ¨ï¼Œä¸Šé¢çš„ä»£ç å¯¹ä½ æ¥è¯´éå¸¸å¥½ç†è§£äº†ï¼Œéœ€è¦æ³¨æ„ï¼Œå…¶ä¸­é™¤äº†0x48è¡¨ç¤ºçš„æ˜¯PCFä»æœºçš„åœ°å€å¤–ï¼Œå…¶ä»–åå…­è¿›åˆ¶æ•°éƒ½æ˜¯æŒ‡ä»¤ã€‚æŒ‡ä»¤è®¾ç½®å®Œæˆåï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥è¿›è¡Œæ•°æ®çš„é€šä¿¡ï¼Œä½¿ç”¨å¦‚ä¸‹æ–¹æ³•ï¼š 1bus.read_byte(0x48) è¿™ä¸ªæ–¹æ³•ç”¨æ¥é€šè¿‡I2Cæ€»çº¿ä»PCFè¯»å–æ•°æ®ï¼Œä¸Šé¢ä»£ç ä¸­æˆ‘ä»¬åœ¨è¯»å–æ•°æ®æ—¶è¿ç»­è°ƒç”¨äº†ä¸¤æ¬¡ï¼Œè¿™æ˜¯å› ä¸ºPCF8591æ¥æ”¶åˆ°è¯»å–æ•°æ®çš„å‘½ä»¤åä¼šåŒæ—¶è¿›è¡Œä¸Šä¸€æ¬¡è½¬æ¢æ•°æ®çš„ä¼ è¾“å’Œæœ¬æ¬¡æ•°æ®çš„è½¬æ¢ï¼Œç©ºè¯»ä¸€æ¬¡å¯ä»¥æ¶ˆè´¹æ‰ä¸æ­£ç¡®çš„æ•°æ®ã€‚ è¿˜æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œå¯¹äºæˆ‘ä»¬ä½¿ç”¨çš„PCF8591æ¨¡å—æ¥è¯´ï¼Œå…¶è‡ªå¸¦çš„å¯è°ƒèŠ‚ç”µå‹ä¼šè¾“å‡ºåˆ°ç¬¬4ä¸ªé€šé“ï¼Œå…‰æ•ä¼ æ„Ÿå™¨çš„æ•°æ®ä¼šè¾“å‡ºåˆ°ç¬¬1ä¸ªé€šé“ï¼Œçƒ­æ•ä¼ æ„Ÿå™¨çš„æ•°æ®ä¼šè¾“å‡ºåˆ°ç¬¬2ä¸ªé€šé“ï¼Œåœ¨æœ¬æ¬¡å®éªŒä¸­ï¼Œç¬¬3ä¸ªé€šé“ä¸è¢«ä½¿ç”¨(å¦‚æœä½ ä½¿ç”¨çš„PCF8591æ¨¡å—å’Œç¬”è€…çš„ä¸å¤ªä¸€æ ·ï¼Œå¯¹åº”é€šé“å¯èƒ½ä¼šä¸åŒï¼Œå¯ä»¥è‡ªè¡Œæµ‹è¯•)ã€‚ ä¸‰ã€å°½æƒ…ç©è€ç°åœ¨ï¼Œä½ å¯ä»¥å°è¯•åœ¨æ ‘è“æ´¾ä¸Šè¿è¡Œå†™å¥½çš„ç¨‹åºï¼Œé€šè¿‡è¾“å‡ºå¯ä»¥çœ‹åˆ°å½“å‰çš„å¯è°ƒèŠ‚ç”µå‹ã€ç¯å¢ƒäº®åº¦å’Œç¯å¢ƒæ¸©åº¦çš„æƒ…å†µã€‚ä½ å¯ä»¥å°è¯•ä½¿ç”¨èºä¸åˆ€å¯¹ç”µä½è®¡è¿›è¡Œè°ƒèŠ‚ï¼Œå¯ä»¥å®æ—¶çš„çœ‹åˆ°è¾“å‡ºç”µå‹çš„æ”¹å˜ï¼Œå¯ä»¥å…³ç¯å’Œå¼€ç¯æ¥æ”¹å˜ç¯å¢ƒäº®åº¦ï¼Œä½ ä¹Ÿå¯ä»¥å°†çƒ­æ•ä¼ æ„Ÿå™¨æ¡åœ¨æ‰‹ä¸­ï¼Œè¿™äº›éƒ½å¯ä»¥æ˜æ˜¾çš„ä»è¾“å‡ºä¿¡æ¯ä¸Šçœ‹åˆ°ç¯å¢ƒæ•°æ®çš„å˜åŒ–ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š è¿™æ¬¡ï¼Œå…³äºæ ‘è“æ´¾ç¼–ç¨‹ï¼Œæˆ‘ä»¬å­¦åˆ°äº†ä¸€äº›æ–°çš„ä¸œè¥¿ï¼Œä½¿ç”¨I2Cæ€»çº¿å’Œæ•°æ¨¡è½¬æ¢æ¨¡å—æˆ‘ä»¬å¯ä»¥åšå‡ºæ›´å¤šæœ‰æ„æ€çš„ä¸œè¥¿ï¼Œæ¯”å¦‚çº¢å¤–æ§åˆ¶çš„è‡ªåˆ¶ç”µè§†æœºï¼Ÿæ¯”å¦‚æœ‰æœ‰é©¬è¾¾é©±åŠ¨çš„é¥æ§å°è½¦ï¼Ÿç­‰ç­‰â€¦ã€‚ä½ å¯ä»¥åšå¥½å‡†å¤‡ï¼Œæˆ‘ä»¬åé¢ä¼šä¸€èµ·å¼€å‘ä¸€äº›æ›´å¥½ç©çš„ä¸œè¥¿ï¼ ä¸“æ³¨æŠ€æœ¯ï¼Œæ‡‚çš„çƒ­çˆ±ï¼Œæ„¿æ„åˆ†äº«ï¼Œåšä¸ªæœ‹å‹ QQï¼š316045346","categories":[{"name":"Linux","slug":"Linux","permalink":"http://huishao.cc/categories/Linux/"}],"tags":[],"keywords":[{"name":"Linux","slug":"Linux","permalink":"http://huishao.cc/categories/Linux/"}]},{"title":"ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ6ï¼‰â€”â€”å€¾æ–œä¼ æ„Ÿå™¨ä¸éœ‡åŠ¨ä¼ æ„Ÿå™¨å®è·µ","slug":"419ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ6ï¼‰â€”â€”å€¾æ–œä¼ æ„Ÿå™¨ä¸éœ‡åŠ¨ä¼ æ„Ÿå™¨å®è·µ","date":"2021-07-21T16:00:00.000Z","updated":"2021-07-22T15:22:03.530Z","comments":true,"path":"2021/07/22/419ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ6ï¼‰â€”â€”å€¾æ–œä¼ æ„Ÿå™¨ä¸éœ‡åŠ¨ä¼ æ„Ÿå™¨å®è·µ/","link":"","permalink":"http://huishao.cc/2021/07/22/419ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ6ï¼‰â€”â€”å€¾æ–œä¼ æ„Ÿå™¨ä¸éœ‡åŠ¨ä¼ æ„Ÿå™¨å®è·µ/","excerpt":"","text":"ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ6ï¼‰â€”â€”å€¾æ–œä¼ æ„Ÿå™¨ä¸éœ‡åŠ¨ä¼ æ„Ÿå™¨å®è·µé€šè¿‡æœ¬ç³»åˆ—åšå®¢çš„å‰å‡ ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬å·²ç»æŒæ¡äº†æ ‘è“æ´¾åº”ç”¨å¼€å‘çš„åŸºæœ¬æ–¹æ³•ã€‚å¾ˆå¤šæ—¶å€™ï¼Œæ ‘è“æ´¾å¯ä»¥åšä»€ä¹ˆæ›´å¤šçš„å–å†³äºæˆ‘ä»¬çš„åˆ›é€ åŠ›ã€‚æœ¬ç¯‡åšå®¢ï¼Œæˆ‘ä»¬å°†é€šè¿‡å®è·µæ¥å­¦ä¹ åœ¨æ ‘è“æ´¾å¼€å‘ä¸­å¸¸ç”¨çš„ä¸¤ä¸ªå¼€å…³å…ƒä»¶ï¼šå€¾æ–œä¼ æ„Ÿå™¨ä¸éœ‡åŠ¨ä¼ æ„Ÿå™¨ã€‚ å€¾æ–œä¼ æ„Ÿå™¨å’Œéœ‡åŠ¨ä¼ æ„Ÿå™¨éƒ½æ˜¯ä¸€ç§å¼€å…³å…ƒä»¶ï¼Œå…¶å¯ä»¥é€šè¿‡å¤–ç•Œçš„ç‰©ç†å˜åŒ–æ¥æ”¹å˜çŠ¶æ€ã€‚åœ¨ç”Ÿæ´»ä¸­çš„å¾ˆå¤šæŠ¥è­¦ç³»ç»Ÿä¸­éƒ½æœ‰åº”ç”¨ã€‚è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨åˆ°çš„æŸä¸ªè®¾å¤‡éœ€è¦é¿å…å€¾æ–œå’Œéœ‡åŠ¨ï¼Œå°±å¯ä»¥ä½¿ç”¨è¿™ä¸¤ç§ä¼ æ„Ÿå™¨åšæŠ¥è­¦ç”µè·¯ã€‚ ä¸€ã€ä¼ æ„Ÿå™¨å·¥ä½œåŸç†æœ¬æ¬¡å®éªŒæœ¬èº«çš„é€»è¾‘ä»£ç æ²¡æœ‰ä»€ä¹ˆéš¾åº¦ï¼Œæ‰€éœ€è¦ä½¿ç”¨åˆ°çš„çŸ¥è¯†éƒ½æ˜¯ä¹‹å‰æœ‰æ¶‰åŠè¿‡çš„ã€‚åœ¨å¼€å§‹ç¼–å†™ä»£ç å’Œè¿›è¡Œå®éªŒä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥äº†è§£ä¸‹å€¾æ–œä¼ æ„Ÿå™¨ä¸éœ‡åŠ¨ä¼ æ„Ÿå™¨çš„å·¥ä½œåŸç†ã€‚ 1.å€¾æ–œä¼ æ„Ÿå™¨å€¾æ–œä¼ æ„Ÿå™¨åˆç§°ä¸ºå€¾æ–œå¼€å…³ï¼Œå…¶å¯ä»¥å¯¹å…ƒä»¶ç›¸å¯¹ä¸é‡åŠ›æ–¹å‘çš„å€¾è§’åšå‡ºæ„Ÿåº”ã€‚æ—©æœŸçš„å€¾æ–œä¼ æ„Ÿå™¨å¤šé‡‡ç”¨è´¡å€¾æ–œä¼ æ„Ÿå™¨ï¼Œå…¶ç®¡ä½“å†…éƒ¨ä½¿ç”¨æ±ä½œä¸ºå¯¼ç”µä»‹è´¨ï¼Œå½“æœ‰å€¾æ–œå‘ç”Ÿæ—¶ï¼Œé‡‘å±æ±ä¼šæµåŠ¨åˆ°ç®¡ä½“æœ«ç«¯ï¼Œä»è€Œæ¥é€šç”µè·¯ã€‚æ±å€¾æ–œä¼ æ„Ÿå™¨çš„ä¼˜ç‚¹æ˜¯è€ç”¨å¯¿å‘½é•¿ï¼Œä½†å…¶å¯¹ç¯å¢ƒæœ‰å®³ï¼Œç›®å‰å·²ç»å¾ˆå°‘ä½¿ç”¨ã€‚ å½“ä¸‹æ¯”è¾ƒæµè¡Œçš„æ˜¯çƒå½¢å€¾æ–œä¼ æ„Ÿå™¨ï¼Œè¿™ç§ä¼ æ„Ÿå™¨è®¾è®¡ç®€å•ï¼Œç®¡ä½“å†…æ”¾å…¥é‡‘å±çƒï¼Œå½“å‘ç”Ÿå€¾æ–œæ—¶ï¼Œé‡‘å±çƒæ»šåŠ¨æ¥é€šç”µè·¯ã€‚æœ¬æ¬¡å®éªŒï¼Œæˆ‘ä»¬é‡‡ç”¨SW520Då‹å·çš„å€¾æ–œä¼ æ„Ÿå™¨ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å…¶å¤´éƒ¨çš„ç®¡ä½“å°±æ˜¯å€¾æ–œå¼€å…³ï¼Œå…¶æ­è½½çš„åŠŸèƒ½æ¿å­åˆ†è§£å¦‚ä¸‹ï¼š æ­¤ä¼ æ„Ÿå™¨æœ‰3ä¸ªå¼•è„šï¼Œå…¶ä¸­VCCéœ€è¦æ¥3.3-5Vçš„ç”µå‹ï¼Œä¸­é—´å¼•è„šæ¥åœ°ï¼ŒDOå¼•è„šæ˜¯ä¿¡å·è¾“å‡ºå¼•è„šï¼Œæˆ‘ä»¬é€šè¿‡å…¶è¿›è¡Œå€¾æ–œæ„Ÿåº”ã€‚å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæ­¤ä¼ æ„Ÿå™¨è‡ªå¸¦ç”µæºå’Œå¼€å…³ä¸¤ä¸ªLEDç¯ï¼Œæ¥é€šç”µæºåï¼Œç”µæºLEDç¯å‘å…‰ï¼Œå½“ä¼ æ„Ÿå™¨è§¦å‘å€¾æ–œæ—¶ï¼Œå¼€å…³LEDç¯å‘å…‰ã€‚å¯¹äºDOå¼•è„šï¼Œå½“å¼€å…³LEDå‘å…‰æ—¶ï¼Œå…¶è¾“å‡ºä½ç”µå¹³ï¼Œè¡¨ç¤ºå¼€å…³æ‰“å¼€ï¼Œå½“å¼€å…³LEDç¯ä¸äº®æ—¶ï¼Œå…¶è¾“å‡ºé«˜ç”µå¹³ï¼Œè¡¨ç¤ºå¼€å…³æ–­å¼€ã€‚ç”¨å…¶æˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„å®ç°å€¾æ–œæ–­ç”µä¿æŠ¤åŠŸèƒ½ã€‚å¦‚ä¸Šå›¾ä¸­ï¼Œæ­¤ä¼ æ„Ÿå™¨è¿˜æä¾›äº†ä¸€ä¸ªçµæ•åº¦çš„ç”µä½è°ƒèŠ‚å•å…ƒï¼Œå…¶å·¥ä½œåŸç†ç”µè·¯å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š 2.éœ‡åŠ¨ä¼ æ„Ÿå™¨éœ‡åŠ¨ä¼ æ„Ÿå™¨ä¸å€¾æ–œä¼ æ„Ÿå™¨çš„å·¥ä½œåŸç†åŸºæœ¬ä¸€è‡´ï¼Œä¸åŒçš„åœ°æ–¹åªåœ¨äºå¼€å…³çš„è§¦å‘æ–¹å¼ï¼Œéœ‡åŠ¨ä¼ æ„Ÿå™¨æ„Ÿåº”å¤–ç•Œçš„éœ‡åŠ¨ä»è€Œè§¦å‘ç”µè·¯çš„å¯¼é€šã€‚å¸¸ç”¨çš„éœ‡åŠ¨å¼€å…³æœ‰æ»šç å¼å’Œå¼¹ç°§å¼ä¸¤ç§ï¼Œä»¥å¼¹ç°§å¼ä¸ºä¾‹ï¼Œå½“å‘ç”Ÿéœ‡åŠ¨æ—¶ï¼Œå¼¹ç°§ä¸ç”µææ¥è§¦ï¼Œä»è€Œå¯¼é€šç”µè·¯ï¼Œæœ¬æ¬¡å®éªŒæˆ‘ä»¬ä½¿ç”¨çš„éœ‡åŠ¨ä¼ æ„Ÿå™¨å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¯ä»¥çœ‹åˆ°ï¼Œå…¶æ­è½½çš„åŠŸèƒ½æ¿ä¸ä¸Šé¢ä»‹ç»çš„å€¾æ–œä¼ æ„Ÿå™¨å®Œå…¨ä¸€è‡´ï¼Œè¿™é‡Œæˆ‘ä»¬å°±ä¸å†èµ˜è¿°ã€‚ äºŒã€å¼€å§‹è¯•éªŒ1.åŠ¨æ‰‹è¿çº¿å¯¹äºæœ¬æ¬¡å®éªŒï¼Œæˆ‘ä»¬å°†å€¾æ–œä¼ æ„Ÿå™¨ä¸éœ‡åŠ¨ä¼ æ„Ÿå™¨ä½œä¸ºæ¨¡æ‹Ÿè­¦å‘Šå¼€å…³æ¥ä½¿ç”¨ï¼Œå½“è®¾å¤‡å‘ç”Ÿéœ‡åŠ¨æˆ–å€¾æ–œæ—¶ï¼Œé€šè¿‡è¾“å‡ºLogä¿¡æ¯æ¥åšæç¤ºã€‚é¦–å…ˆæˆ‘ä»¬å…ˆç¡®è®¤è¦ä½¿ç”¨åˆ°çš„GPIOå¼•è„šï¼Œå¯¹äºç”µæºå’Œè´Ÿæç›´æ¥è¿æ¥å³å¯ï¼Œæˆ‘ä»¬æš‚å®šä½¿ç”¨BCMç¼–å·ä¸ºGPIO5å’ŒGPIO6çš„ä¸¤ä¸ªå¼•è„šï¼Œå…¶å¯¹åº”çš„ç‰©ç†å¼•è„šåˆ†åˆ«ä¸º29å’Œ31ã€‚ç‰©ç†29å¼•è„šæˆ‘ä»¬æ¥éœ‡åŠ¨ä¼ æ„Ÿå™¨çš„ä¿¡å·å¼•è„šï¼Œç‰©ç†31å¼•è„šæˆ‘ä»¬æ¥å€¾æ–œä¼ æ„Ÿå™¨çš„ä¿¡å·å¼•è„šã€‚ç¬”è€…è¿™é‡Œä½¿ç”¨æ‰©å±•æ¿è¿çº¿å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚å¦‚æœä¸ä½¿ç”¨æ‰©å±•æ¿ï¼Œç›´æ¥è¿æ¥ç‰©ç†å¼•è„šå³å¯ã€‚ æ¸©é¦¨æç¤ºï¼šå¯ä»¥é€šè¿‡çº¿çš„é¢œè‰²å‚è€ƒç¤ºæ„å›¾ä¸­çš„è¿çº¿ã€‚ 2.ç¼–å†™ä»£ç æˆ‘ä»¬ä½¿ç”¨GPIOå¼•è„šçš„INPUTåŠŸèƒ½æ¥ç›‘å¬ä¼ æ„Ÿå™¨çš„çŠ¶æ€ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132#coding:utf-8# å¯¼å…¥GPIOæ§åˆ¶è–„å—import RPi.GPIO as GPIO# è®¾ç½®ä½¿ç”¨çš„å¼•è„šç¼–ç æ¨¡å¼GPIO.setmode(GPIO.BOARD)# å®šä¹‰éœ‡åŠ¨å¼€å…³å¼•è„š BCM5swi_shake = 29# å®šä¹‰å€¾æ–œå¼€å…³å¼•è„š BCM6swi_slop = 31# è¿›è¡Œå¼€å…³å¼•è„šçš„åˆå§‹åŒ–ï¼Œè®¾ç½®ä¸ºè¾“å…¥å¼•è„šï¼Œä¸”é»˜è®¤ä¸ºé«˜ç”µå¹³GPIO.setup(swi_shake, GPIO.IN, pull_up_down=GPIO.PUD_UP)GPIO.setup(swi_slop, GPIO.IN, pull_up_down=GPIO.PUD_UP)# å®šä¹‰çŠ¶æ€å˜åŒ–çš„å›è°ƒå‡½æ•°def switch_shake(channel): # ä½ç”µå¹³ä¸ºå¼€å…³æ‰“å¼€çŠ¶æ€ if not GPIO.input(channel): print(\"æ³¨æ„ï¼Œå‘ç”Ÿäº†éœ‡åŠ¨ï¼\")def switch_slop(channel): # ä½ç”µå¹³ä¸ºå¼€å…³æ‰“å¼€çŠ¶æ€ if not GPIO.input(channel): print(\"æ³¨æ„ï¼Œå‘ç”Ÿäº†å€¾æ–œï¼\") # æ·»åŠ è¾“å…¥å¼•è„šç”µå¹³å˜åŒ–çš„å›è°ƒå‡½æ•°GPIO.add_event_detect(swi_shake, GPIO.FALLING, callback=switch_shake, bouncetime=200)GPIO.add_event_detect(swi_slop, GPIO.FALLING, callback=switch_slop, bouncetime=200)while True: pass ä¸Šé¢çš„ä»£ç æ¯”è¾ƒç®€å•ï¼Œè¿è¡Œä¸Šé¢ä»£ç ï¼Œé€šè¿‡è§¦å‘ä¼ æ„Ÿå™¨çš„éœ‡åŠ¨ä¸å€¾æ–œï¼Œå¯ä»¥è§‚å¯Ÿç¨‹åºçš„æ‰“å°è¾“å‡ºä¿¡æ¯ï¼ŒåŒæ—¶ä¼ æ„Ÿå™¨ä¸Šçš„å¼€å…³æŒ‡ç¤ºç¯ä¹Ÿå¯ä»¥æç¤ºä¼ æ„Ÿå™¨çš„æ¥é€šçŠ¶æ€ã€‚ ä¸‰ã€ä¼‘æ¯ä¸€ä¸‹æœ¬æ¬¡å®éªŒéå¸¸ç®€å•ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥å‘æŒ¥åˆ›é€ åŠ›ï¼Œé€šè¿‡è¿™ä¸¤ä¸ªä¼ æ„Ÿå™¨åšå‡ºä¸€äº›æœ‰æ„æ€çš„ä¸œè¥¿ï¼Œå°½æƒ…æƒ³è±¡å§ï¼ ä¸“æ³¨æŠ€æœ¯ï¼Œæ‡‚çš„çƒ­çˆ±ï¼Œæ„¿æ„åˆ†äº«ï¼Œåšä¸ªæœ‹å‹ QQï¼š316045346","categories":[{"name":"Linux","slug":"Linux","permalink":"http://huishao.cc/categories/Linux/"}],"tags":[],"keywords":[{"name":"Linux","slug":"Linux","permalink":"http://huishao.cc/categories/Linux/"}]},{"title":"ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ5ï¼‰â€”â€”è®©èœ‚é¸£å™¨æ’­æ”¾éŸ³ä¹","slug":"418ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ5ï¼‰â€”â€”è®©èœ‚é¸£å™¨æ’­æ”¾éŸ³ä¹","date":"2021-07-17T16:00:00.000Z","updated":"2021-07-18T10:07:46.054Z","comments":true,"path":"2021/07/18/418ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ5ï¼‰â€”â€”è®©èœ‚é¸£å™¨æ’­æ”¾éŸ³ä¹/","link":"","permalink":"http://huishao.cc/2021/07/18/418ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ5ï¼‰â€”â€”è®©èœ‚é¸£å™¨æ’­æ”¾éŸ³ä¹/","excerpt":"","text":"ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ5ï¼‰â€”â€”è®©èœ‚é¸£å™¨æ’­æ”¾éŸ³ä¹å‰é¢åšå®¢ä¸­ï¼Œæˆ‘ä»¬å°è¯•ä½¿ç”¨å¼€å…³æ§åˆ¶æœ‰æºèœ‚é¸£å™¨çš„æ’­æ”¾ã€‚æœ‰æºèœ‚é¸£å™¨çš„ä¸€å¤§ç‰¹ç‚¹æ˜¯ä½¿ç”¨ç®€å•ï¼Œæ— éœ€å¤æ‚çš„ç¨‹åºæ§åˆ¶å³å¯å‘å£°ï¼Œç„¶è€Œå…¶ç¼ºé™·ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œå…¶å‘å£°çš„é¢‘ç‡æ˜¯ä¸€å®šçš„ï¼Œæˆ‘ä»¬æ— æ³•é€šè¿‡é¢‘ç‡æ§åˆ¶å™¨éŸ³è°ƒé«˜ä½ã€‚æœ¬æ¬¡å®éªŒï¼Œæˆ‘ä»¬å°†å°è¯•ä½¿ç”¨æ— æºèœ‚é¸£å™¨æ¥è¿›è¡ŒéŸ³ä¹çš„æ’­æ”¾ã€‚ ä¸€ã€å®éªŒå‰çš„å‡†å¤‡åœ¨å¼€å§‹æœ¬å®éªŒå‰ï¼Œæˆ‘ä»¬å…ˆæ¥å¯¹ä¹ç†åªæ˜¯å’Œæ— æºèœ‚é¸£å™¨çš„å·¥ä½œåŸç†è¿›è¡Œç®€å•çš„å­¦ä¹ ã€‚ 1ã€å…³äºéŸ³è°ƒçš„åŸºç¡€ä¹ç†çŸ¥è¯†ç®€å•çš„ç‰©ç†å­¦çŸ¥è¯†å‘Šè¯‰æˆ‘ä»¬ï¼Œå£°éŸ³çš„å£°è°ƒé«˜ä½æ˜¯æœ‰å£°æ³¢çš„é¢‘ç‡å†³å®šçš„ï¼Œè€Œå£°éŸ³çš„å¤§å°æ˜¯æœ‰å£°æ³¢çš„æŒ¯å¹…å†³å®šçš„ã€‚äººè€³å¯ä»¥å¬åˆ°çš„å£°éŸ³é¢‘ç‡åœ¨20Hz-20000Hzä¹‹é—´ã€‚é¢‘ç‡ä½äº20Hzçš„å£°æ³¢è¢«ç§°ä¸ºæ¬¡å£°æ³¢ï¼Œæˆ‘ä»¬å¬ä¸åˆ°ã€‚åŒæ ·ï¼Œé¢‘ç‡é«˜äº20000Hzçš„å£°æ³¢ç§°ä¸ºè¶…å£°æ³¢ï¼Œæˆ‘ä»¬ä¹Ÿå¬ä¸åˆ°ã€‚ç”Ÿæ´»ä¸­ï¼Œæˆ‘ä»¬éƒ½å–œæ¬¢å¬ç¾å¦™çš„éŸ³ä¹ï¼ŒéŸ³ä¹æ˜¯ç”±å¾ˆå¤šä¸åŒçš„éŸ³è°ƒå’Œå‚å·®çš„æ‹å­ç»„åˆè€Œæˆçš„ã€‚å°æ—¶å€™éŸ³ä¹è¯¾ä¸Šå¸¸è¯´çš„Doï¼ŒReï¼ŒMiï¼ŒFaï¼ŒSoï¼ŒLaï¼ŒXiå°±æ˜¯æœ€å¸¸è§çš„éŸ³è°ƒã€‚æˆ‘ä»¬ä»¥Cå¤§è°ƒä¸ºä¾‹ï¼Œå…¶7ä¸ªéŸ³é˜¶ä¸å¯¹åº”çš„é¢‘ç‡å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š Do Re Mi Fa So La Xi 262 294 330 350 393 441 495 ä¸ä¸Šè¡¨å¯¹åº”ï¼Œå¦‚æœæ˜¯é«˜éŸ³éŸ³è°ƒï¼Œåªéœ€è¦å°†ä¸Šé¢çš„é¢‘ç‡ä¹˜ä»¥2ï¼Œå¦‚æœæ˜¯ä½éŸ³éŸ³è°ƒï¼Œéœ€è¦å°†ä¸Šé¢çš„éŸ³é¢‘é™¤ä»¥2ã€‚ è¦æ¼”å¥å‡ºç¾å¦™çš„æ—‹å¾‹ï¼Œä»…ä»…åªæ§åˆ¶éŸ³è°ƒæ˜¯ä¸å¤Ÿçš„ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æŠŠæ¡æ¯ä¸ªéŸ³è°ƒæ¼”å¥çš„èŠ‚å¥ï¼Œå³æ¯ä¸ªéŸ³è°ƒæ’­æ”¾çš„æ—¶é•¿ã€‚åœ¨ä¹æ›²ä¸­ï¼ŒèŠ‚å¥çš„æŠŠæ§æ˜¯é€šè¿‡èŠ‚æ‹æ¥å®šä¹‰çš„ï¼Œä¾‹å¦‚å¸¸è§çš„å››åˆ†ä¹‹å››èŠ‚æ‹ï¼ŒæŒ‡çš„æ˜¯å››åˆ†éŸ³ç¬¦ä¸ºä¸€æ‹ï¼Œæ¯å°èŠ‚æœ‰å››æ‹ï¼Œè¿™æ ·ï¼Œæ¯é‡åˆ°ä¸€ä¸ªå››åˆ†éŸ³ç¬¦æˆ‘ä»¬å°±æ’­æ”¾è¿™ä¸ªéŸ³è°ƒä¸€æ‹çš„å•ä½æ—¶é—´ï¼Œå¦‚æœé‡åˆ°å…«åˆ†éŸ³ç¬¦ï¼Œæˆ‘ä»¬å°±æ’­æ”¾äºŒåˆ†ä¹‹ä¸€æ‹çš„å•ä½æ—¶é—´ï¼Œå¦‚æœé‡åˆ°äºŒåˆ†éŸ³ç¬¦ï¼Œæˆ‘ä»¬å°±æ’­æ”¾ä¸¤æ‹çš„å•ä½æ—¶é—´ã€‚ ç°åœ¨ï¼Œä½ å¯ä»¥ç»ƒä¹ ä¸€ä¸‹ï¼Œå°†å–œæ¬¢çš„æ­Œæ›²ç¿»è¯‘ä¸ºç¼–ç¨‹ç¬¦å·ï¼ŒéŸ³è°ƒç¿»è¯‘æˆé¢‘ç‡ï¼Œå¯¹åº”çš„èŠ‚æ‹ç¿»è¯‘ä¸ºæ¯«ç§’æ—¶é—´ã€‚åé¢ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æ ‘è“æ´¾æ§åˆ¶èœ‚é¸£å™¨æ¥æ’­æ”¾å®ƒã€‚ 2ã€æ— æºèœ‚é¸£å™¨æ’­æ”¾å£°éŸ³åŸç†ä¹‹å‰ï¼Œæˆ‘ä»¬åˆ†æè¿‡æœ‰æºèœ‚é¸£å™¨çš„å·¥ä½œåŸç†ï¼Œå…¶å¾ˆå¥½ç†è§£ï¼Œç”µå‹è§¦å‘å™¨å†…éƒ¨çš„æŒ¯è¡æºå·¥ä½œï¼Œéœ‡è¡æºçš„éœ‡åŠ¨äº§ç”Ÿä¸€å®šé¢‘ç‡çš„å£°æ³¢ï¼Œä»è€Œå‘å‡ºå£°éŸ³è®©æˆ‘ä»¬å¬åˆ°ã€‚æ— æºèœ‚é¸£å™¨å†…éƒ¨æ²¡æœ‰éœ‡è¡æºï¼Œå¦‚æœç›´æ¥é€šè¿‡ç›´æµç”µï¼Œå…¶æ— æ³•äº§ç”Ÿå‘¨æœŸæ€§çš„å£°æ³¢ï¼Œå› æ­¤ç®€å•çš„æ¥é€šç”µæºæ˜¯æ— æ³•ä½¿æ— æºèœ‚é¸£å™¨å·¥ä½œçš„ã€‚æ— æºèœ‚é¸£å™¨å†…éƒ¨æ²¡æœ‰éœ‡è¡æºï¼Œä½†å´æœ‰éœ‡è¡ç‰‡ï¼Œå½“é€šç”µæ—¶ï¼Œæ— æºèœ‚é¸£å™¨é€šè¿‡ç”µç£æ„Ÿåº”ç°è±¡æ¥å¸å¼•éœ‡è¡ç‰‡ï¼Œå½“å¤±å»ç”µæµæ—¶ï¼Œéœ‡è¡ç‰‡ä½ç½®è¿˜åŸã€‚å› æ­¤ï¼Œæˆ‘ä»¬åªè¦å‘¨æœŸæ€§çš„ç»™èœ‚é¸£å™¨é€šç”µï¼Œå…¶å°±ä¼šäº§ç”Ÿå‘¨æœŸæ€§çš„æŒ¯è¡ï¼Œä»è€Œäº§ç”Ÿå£°æ³¢ï¼Œå‘å‡ºå£°éŸ³ã€‚ ç”±äºæ— æºèœ‚é¸£å™¨çš„è¿™ç§ç‰¹ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥éå¸¸å®¹æ˜“çš„é€šè¿‡æ§åˆ¶åŠ å‹çš„é¢‘ç‡æ¥å®ç°æ’­æ”¾ä¸åŒéŸ³è°ƒçš„å£°éŸ³ã€‚ç›¸æ¯”æœ‰æºèœ‚é¸£å™¨è€Œè¨€ï¼Œæ— æºèœ‚é¸£å™¨æˆæœ¬æ›´ä½ï¼Œä¸”å¯ä»¥æ§åˆ¶éŸ³è°ƒé«˜ä½ï¼Œå”¯ä¸€çš„ä¸è¶³ä¹‹å¤„æ˜¯ç¨‹åºè¦ç•¥å¾®å¤æ‚ä¸€äº›ã€‚ æœ¬æ¬¡å®éªŒï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ— æºèœ‚é¸£å™¨æ˜¯ä½ç”µå¹³è§¦å‘çš„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š äºŒã€ä½¿ç”¨æ ‘è“æ´¾åˆ¶ä½œç”µå­ç´æ˜ç™½äº†æ— æºèœ‚é¸£å™¨çš„å·¥ä½œåŸç†ï¼Œæœ¬å®éªŒå¯¹ä½ æ¥è¯´åº”è¯¥éå¸¸ç®€å•ï¼Œä½¿ç”¨åˆ°çš„çŸ¥è¯†éƒ½æ˜¯æˆ‘ä»¬ä¹‹å‰å®éªŒæœ‰æ¶‰åŠè¿‡çš„ã€‚å½“ä½ å¬åˆ°è§†é¢‘é¢‘ç‡æ¥æ§åˆ¶æ— ç¼˜èœ‚é¸£å™¨çš„å‘å£°æ—¶ï¼Œä½ ä¸€å®šå·²ç»æƒ³åˆ°äº†ï¼Œä½¿ç”¨PWMè„‰å†²å®½åº¦è°ƒåˆ¶æŠ€æœ¯ï¼Œå…¶åˆšå¥½å¯ä»¥äº§ç”ŸæŒ‡å®šé¢‘ç‡çš„è„‰å†²ç”µå‹ã€‚ 1.å¼€å§‹è¿çº¿è¿çº¿æœ¬èº«éå¸¸ç®€å•ï¼Œåªæ˜¯åœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬è¦å…ˆç¡®å®šæ‰€ä½¿ç”¨çš„æ ‘è“æ´¾å¼•è„šã€‚æ— ç¼˜èœ‚é¸£å™¨æœ‰3ä¸ªå¼•è„šï¼Œå…¶ä¸­VCCæ¥3.3Vç”µæºï¼ŒGMDæ¥åœ°ï¼ŒI/Oæ§åˆ¶å¼•è„šæ¥ä¸€ä¸ªæ ‘è“æ´¾çš„GPIOåŠŸèƒ½å¼•è„šï¼Œæˆ‘ä»¬é€‰æ‹©BCMç¼–ç ä¸º17çš„GPIOå¼•è„šï¼Œå³ç‰©ç†å¼•è„š11ã€‚ç¬”è€…è¿™é‡Œä½¿ç”¨çš„æ‰©å±•æ¿è¿æ¥å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š è¿™ä¸€æ­¥éå¸¸ç®€å•ï¼Œä¸‹é¢æˆ‘ä»¬æ¥å¼€å§‹ç¨‹åºçš„ç¼–å†™ã€‚ 2.å¼€å§‹åŠ¨æ‰‹ç¼–ç¨‹åœ¨æœ¬å®éªŒä¸­ï¼Œæˆ‘ä»¬å°†ç¼–å†™è¿™ä¸ªä¸€ä¸ªç¨‹åºï¼Œå…¶ç±»ä¼¼ä¸€ä¸ªç®€æ˜“çš„ç”µå­ç´ï¼Œæœ‰7ä¸ªæŒ‰é”®æ¥å‘å‡ºä¸åŒéŸ³è°ƒçš„7ç§å£°éŸ³ï¼ŒåŒæ—¶æˆ‘ä»¬å†…ç½®ä¸€é¦–ç¤ºä¾‹ä¹æ›²ã€‚ç¬”è€…è¿™é‡Œé€‰ç”¨å‘¨æ°ä¼¦çš„ã€ŠèŠ±æµ·ã€‹å‰å¥ä½œä¸ºç¤ºä¾‹ä¹æ›²ã€‚å®Œæ•´çš„ç¨‹åºç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼ˆæˆ‘å»ºè®®å…ˆè‡ªä¸»åŠ¨æ‰‹å®è·µï¼Œé‡åˆ°é—®é¢˜å†å‚è€ƒç¤ºä¾‹ä»£ç ï¼‰ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145#coding:utf-8# å¯¼å…¥UIæ¨¡å—import tkinter as Tkinterimport RPi.GPIO as GPIOimport time# å®šä¹‰éŸ³è°ƒé¢‘ç‡# Cè°ƒä½éŸ³CL = [0, 131, 147, 165, 175, 196, 211, 248] # Cè°ƒä¸­éŸ³CM = [0, 262, 294, 330, 350, 393, 441, 495] # Cè°ƒé«˜éŸ³CH = [0, 525, 589, 661, 700, 786, 882, 990] # å®šä¹‰ä¹è°±# éŸ³è°ƒ 0è¡¨ç¤ºä¼‘æ­¢ç¬¦songP = [ CM[1],CM[2],CM[3],CM[5],CM[5],CM[0],CM[3],CM[2],CM[1],CM[2],CM[3],CM[0], CM[1],CM[2],CM[3],CM[7],CH[1],CH[1],CH[1],CM[7],CH[1],CM[7],CM[6],CM[5],CM[0], CM[1],CM[2],CM[3],CM[5],CM[5],CM[0],CM[3],CM[2],CM[1],CM[2],CM[1],CM[0], CM[1],CM[2],CM[3],CM[5],CM[1],CM[0],CM[1],CL[7],CL[6],CL[7],CM[1],CM[0]]# éŸ³è°ƒå¯¹åº”çš„èŠ‚æ‹songT = [ 2,2,2,1,5,4,2,2,2,1,5,4, 2,2,2,1,5,2,2,2,1,3,2,4,4, 2,2,2,1,5,4,2,2,2,1,3,5, 2,2,2,1,5,4,2,2,2,2,8,2]# å®šä¹‰æ ‡å‡†èŠ‚æ‹æ—¶é—´metre = 0.125# åˆå§‹åŒ–è¦ä½¿ç”¨çš„å¼•è„šio = 11GPIO.setmode(GPIO.BOARD)GPIO.setup(io, GPIO.OUT)pwm = GPIO.PWM(io, 440)# å¼€å§‹è®¾ç½®å ç©ºæ¯”ä¸º100 åˆ™æ— ç¼˜èœ‚é¸£å™¨ä¸ä¼šå‘å£°pwm.start(100)# æ’­æ”¾ç¤ºä¾‹ä¹æ›²çš„æ–¹æ³•def playSong(): # ä¿®æ”¹å ç©ºæ¯”ä¸º50 æ­¤æ—¶é¢‘ç‡ç”Ÿæ•ˆ pwm.ChangeDutyCycle(50) # éå†æ‰€æœ‰éŸ³è°ƒ for i in range(0, len(songP)): # 0è¡¨ç¤ºä¼‘æ­¢ ç¦å£° if songP[i] == 0: pwm.ChangeDutyCycle(100) # æ›´æ”¹é¢‘ç‡æ§åˆ¶éŸ³è°ƒ else: pwm.ChangeDutyCycle(50) pwm.ChangeFrequency(songP[i]) # é€šè¿‡èŠ‚æ‹æ§åˆ¶æ’­æ”¾æ—¶é—´ time.sleep(songT[i] * metre) # ç¦å£° pwm.ChangeDutyCycle(100)# åˆ†åˆ«æ’­æ”¾å„ä¸ªéŸ³é˜¶çš„æ–¹æ³•def playDo(): pwm.ChangeDutyCycle(50) pwm.ChangeFrequency(CM[1]) time.sleep(0.5) pwm.ChangeDutyCycle(100)def playRe(): pwm.ChangeDutyCycle(50) pwm.ChangeFrequency(CM[2]) time.sleep(0.5) pwm.ChangeDutyCycle(100)def playMi(): pwm.ChangeDutyCycle(50) pwm.ChangeFrequency(CM[3]) time.sleep(0.5) pwm.ChangeDutyCycle(100)def playFa(): pwm.ChangeDutyCycle(50) pwm.ChangeFrequency(CM[4]) time.sleep(0.5) pwm.ChangeDutyCycle(100)def playSo(): pwm.ChangeDutyCycle(50) pwm.ChangeFrequency(CM[5]) time.sleep(0.5) pwm.ChangeDutyCycle(100)def playLa(): pwm.ChangeDutyCycle(50) pwm.ChangeFrequency(CM[6]) time.sleep(0.5) pwm.ChangeDutyCycle(100)def playXi(): pwm.ChangeDutyCycle(50) pwm.ChangeFrequency(CM[7]) time.sleep(0.5) pwm.ChangeDutyCycle(100)# UIç›¸å…³è®¾ç½®# ä¸»é¡µé¢è®¾ç½®top = Tkinter.Tk()top.geometry('360x300')top.minsize(420, 300) top.maxsize(420, 300)top.title(\"è‡ªåˆ¶ç”µå­ç´\")l = Tkinter.Label(top, text='è‡ªåˆ¶ç”µå­ç´', font=('Arial', 18), width=30, height=2)l.pack()# UIä¸Šçš„æŒ‰é’®å¸ƒå±€songBtn = Tkinter.Button(top, text=\"ç¤ºä¾‹æ­Œæ›²ï¼šèŠ±æµ·\", command=playSong)songBtn.place(x=30,y=30,width=120,height=40)doBtn = Tkinter.Button(top,bitmap=\"gray50\", text=\"Do\", compound=Tkinter.LEFT, command=playDo)doBtn.place(x=0,y=105,width=60,height=200)reBtn = Tkinter.Button(top,bitmap=\"gray50\", text=\"Re\", compound=Tkinter.LEFT, command=playRe)reBtn.place(x=60,y=105,width=60,height=200)miBtn = Tkinter.Button(top,bitmap=\"gray50\", text=\"Mi\", compound=Tkinter.LEFT, command=playMi)miBtn.place(x=120,y=105,width=60,height=200)faBtn = Tkinter.Button(top,bitmap=\"gray50\", text=\"Fa\", compound=Tkinter.LEFT, command=playFa)faBtn.place(x=180,y=105,width=60,height=200)soBtn = Tkinter.Button(top,bitmap=\"gray50\", text=\"So\", compound=Tkinter.LEFT, command=playSo)soBtn.place(x=240,y=105,width=60,height=200)laBtn = Tkinter.Button(top,bitmap=\"gray50\", text=\"La\", compound=Tkinter.LEFT, command=playLa)laBtn.place(x=300,y=105,width=60,height=200)xiBtn = Tkinter.Button(top,bitmap=\"gray50\", text=\"Xi\", compound=Tkinter.LEFT, command=playXi)xiBtn.place(x=360,y=105,width=60,height=200)stopButton = Tkinter.Button(top, text=\"å…³é—­\")stopButton.place(x=340,y=30,width=60,height=40)# è¿›å…¥æ¶ˆæ¯å¾ªç¯top.mainloop() ä¸Šé¢ä»£ç æœ‰æ¯”è¾ƒè¯¦å°½çš„æ³¨é‡Šï¼Œç¨‹åºè¿è¡Œçš„UIæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ç°åœ¨ï¼Œå°½æƒ…çš„ç©è€å§ï¼ ä¸“æ³¨æŠ€æœ¯ï¼Œæ‡‚çš„çƒ­çˆ±ï¼Œæ„¿æ„åˆ†äº«ï¼Œåšä¸ªæœ‹å‹ QQï¼š316045346","categories":[{"name":"Linux","slug":"Linux","permalink":"http://huishao.cc/categories/Linux/"}],"tags":[],"keywords":[{"name":"Linux","slug":"Linux","permalink":"http://huishao.cc/categories/Linux/"}]},{"title":"ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ4ï¼‰â€”â€”ç”¨å¼€å…³æ§åˆ¶èœ‚é¸£å™¨å‘å£°","slug":"417ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ4ï¼‰â€”â€”ç”¨å¼€å…³æ§åˆ¶èœ‚é¸£å™¨å‘å£°","date":"2021-07-12T16:00:00.000Z","updated":"2021-07-15T11:40:30.699Z","comments":true,"path":"2021/07/13/417ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ4ï¼‰â€”â€”ç”¨å¼€å…³æ§åˆ¶èœ‚é¸£å™¨å‘å£°/","link":"","permalink":"http://huishao.cc/2021/07/13/417ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ4ï¼‰â€”â€”ç”¨å¼€å…³æ§åˆ¶èœ‚é¸£å™¨å‘å£°/","excerpt":"","text":"ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ4ï¼‰â€”â€”ç”¨å¼€å…³æ§åˆ¶èœ‚é¸£å™¨å‘å£°åœ¨æœ¬ç³»åˆ—çš„å‰å‡ ç¯‡åšå®¢ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨æ¡Œé¢è½¯ä»¶æ§åˆ¶è¿‡çº¢ç»¿ç¯ï¼Œä¹Ÿç¼–ç¨‹ç‚¹äº®è¿‡ç‚«å½©çš„3è‰²LED ç¯ã€‚åœ¨è¿™äº›å®éªŒçš„è¿‡ç¨‹ä¸­ï¼Œç›¸ä¿¡ä½ å¯¹æ ‘è“æ´¾GPIOå¼•è„šå¦‚ä½•è¾“å‡ºé«˜ä½ç”µå¹³ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨PWMæŠ€æœ¯æ¥æ§åˆ¶ç”µå‹è¾“å‡ºç­‰éƒ½æœ‰äº†äº†è§£ã€‚æœ¬ç¯‡åšå®¢ï¼Œæˆ‘ä»¬å°†å†æ¢ç´¢ä¸€äº›æ ‘è“æ´¾ç¼–ç¨‹æ›´å¤šæ–°é²œå¥½ç©çš„é¢†åŸŸï¼Œæ¥å°è¯•ä½¿ç”¨ç¡¬ä»¶æ¥æ§åˆ¶ç¡¬ä»¶ã€‚ ç°åœ¨ï¼Œæˆ‘ä»¬å°†å°è¯•å®Œæˆè¿™æ ·ä¸€ä¸ªå®éªŒï¼Œä½¿ç”¨æŒ‰å‹å¼€å…³æ§åˆ¶èœ‚é¸£å™¨çš„å‘å£°ã€‚å°†å¼€å…³å…ƒä»¶å’Œèœ‚é¸£å™¨éƒ½è¿æ¥åˆ°æ ‘è“æ´¾ï¼Œå½“æŒ‰ä¸‹å¼€å…³æ—¶ï¼Œè®©èœ‚é¸£å™¨å‘å£°ï¼Œå½“æ¾å¼€å¼€å…³æ—¶ï¼Œèœ‚é¸£å™¨åœæ­¢å‘å£°ã€‚ ä¸€ã€ä¸»è§’ç™»åœºå¼€å§‹åŠ¨æ‰‹å®éªŒå‰ï¼Œæˆ‘ä»¬å…ˆæ¥è®¤è¯†ä¸€ä¸‹å°†è¦å‡ºåœºçš„ä¸»è§’ä»¬ï¼Œå½“ç„¶ï¼Œæ— è®ºä»€ä¹ˆå®éªŒï¼Œæ ‘è“æ´¾éƒ½æ˜¯å½“ä¹‹æ— æ„§çš„ç¬¬ä¸€ä¸»è§’ï¼Œä½†æˆ‘ç›¸ä¿¡ä½ å·²ç»å¯¹å®ƒå·²ç»æœ‰äº†è¶³å¤Ÿçš„äº†è§£ï¼ˆå¦‚æœæ²¡æœ‰ï¼Œå¯ä»¥æŸ¥çœ‹æœ¬ç³»åˆ—çš„å‰å‡ ç¯‡åšå®¢ï¼‰ï¼Œå› æ­¤æˆ‘ä»¬å°†ä»‹ç»çš„é‡ç‚¹æ”¾åœ¨ä¸¤ä¸ªæ–°ç™»åœºçš„â€œè§’è‰²â€ä¸Šï¼šèœ‚é¸£å™¨ä¸æŒ‰å‹å¼€å…³ã€‚ 1.æœ¬å®éªŒçš„â€œä¸»è§’ç”²â€â€”â€”æœ‰æºèœ‚é¸£å™¨èœ‚é¸£å™¨ï¼Œé¡¾åæ€ä¹‰ï¼Œå…¶æ˜¯ä¸€ç§å‘å£°å…ƒä»¶ã€‚å¹¿æ³›åº”ç”¨äºè®¡ç®—æœºã€æ‰“å°æœºã€ç”µè¯ã€ç©å…·ç­‰ç”µå­è®¾å¤‡ä¸­ã€‚ èœ‚é¸£å™¨å¯ä»¥åˆ†ä¸ºâ€œæœ‰æºèœ‚é¸£å™¨â€å’Œâ€œæ— æºèœ‚é¸£å™¨â€ã€‚å…¶ä¸­çš„æºå¹¶éæŒ‡ç”µæºï¼Œè€Œæ˜¯æŒ‡èœ‚é¸£å™¨å†…éƒ¨æ˜¯å¦æœ‰éœ‡è¡æºã€‚æœ‰æºèœ‚é¸£å™¨è‡ªå¸¦ä¸€ä¸ªéœ‡è¡æºæ¨¡å—ï¼Œå…¶ä½¿ç”¨èµ·æ¥éå¸¸ç®€å•ï¼Œåªè¦æ¥é€šç›´æµç”µï¼Œå…¶å°±ä¼šè‡ªåŠ¨å‘å‡ºå£°éŸ³ã€‚è€Œæ— æºèœ‚é¸£å™¨å†…éƒ¨æ²¡æœ‰éœ‡è¡æºï¼Œéœ€è¦å¤–æ¥ä½¿ç”¨ä¸€å®šé¢‘ç‡çš„æ–¹æ³¢æ¥é©±åŠ¨å…¶å‘å£°ã€‚å…³äºæ— æºèœ‚é¸£å™¨æ›´å¤šæ·±å…¥çš„ç”¨æ³•ï¼Œæˆ‘ä»¬åç»­åšå®¢å†ä¸“é—¨ä»‹ç»ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬å…ˆç€é‡ç†è§£æœ‰æºèœ‚é¸£å™¨çš„å·¥ä½œåŸç†ã€‚ æœ¬å®éªŒä¸­ï¼Œæˆ‘ä»¬é‡‡ç”¨çš„æ˜¯ä½ç”µå¹³è§¦å‘çš„æœ‰æºèœ‚é¸£å™¨ï¼Œå…ƒä»¶å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å…¶æœ‰3ä¸ªå¼•è„šï¼ŒGNDå¼•è„šç”¨æ¥æ¥åœ°ï¼ŒVCCå¼•è„šç”¨æ¥æ¥3.3Vçš„ç”µæºï¼ŒI/Oå¼•è„šç”¨æ¥è¿›è¡Œèœ‚é¸£å™¨æ˜¯å¦æ’­æ”¾å£°éŸ³çš„æ§åˆ¶ã€‚ä½ å¯èƒ½æœ‰äº›ç–‘æƒ‘ï¼Œä¸ºä»€ä¹ˆä½ç”µå¹³ä¹Ÿå¯ä»¥è§¦å‘å…ƒä»¶çš„â€œå¼€â€çŠ¶æ€ï¼Œè¿™è¦å½’åŠŸäºPNPå‹ä¸‰æç®¡çš„åŠŸåŠ³ï¼Œå¯¹äºPNPå‹ä¸‰æå…‰ï¼Œå½“è¾“å…¥ç®¡è„šä¸ºä½ç”µå¹³æ—¶ï¼Œä¸‰æç®¡å¤„äºå¯¼é€šçŠ¶æ€ï¼Œä½¿å¾—èœ‚é¸£å™¨è¢«åŠ ç”µå‹ï¼Œå½“è¾“å…¥ç®¡è„šä¸ºé«˜ç”µå¹³æ—¶ï¼Œä¸‰æç®¡å¤„äºæˆªæ­¢çŠ¶æ€ï¼Œèœ‚é¸£å™¨æ— ç”µå‹ã€‚åŸç†å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ç°åœ¨ï¼Œæˆ‘ä»¬å…ˆæ¥ç¼–å†™ä¸€æ®µç®€å•çš„Pythonç¨‹åºï¼Œæ¥ä½¿èœ‚é¸£å™¨å‘å‡ºå£°éŸ³ã€‚ 2. è§¦å‘èœ‚é¸£å™¨æ’­æ”¾å£°éŸ³æˆ‘ä»¬ä½¿ç”¨çš„èœ‚é¸£å™¨çš„3ä¸ªå¼•è„šï¼Œå…¶ä¸­VCCæ¥ç”µæºï¼ŒGNDæ¥åœ°ï¼ŒI/Oå¼•è„šæˆ‘ä»¬å¯ä»¥é€‰æ‹©æ ‘è“æ´¾BCMç¼–ç ä¸º27çš„GPIOå¼•è„šï¼Œé€šè¿‡æŸ¥è¡¨ï¼Œå¯ä»¥å¾—åˆ°å…¶ç‰©ç†ç¼–ç ä¸º13ã€‚è¿çº¿ç¤ºæ„å¦‚ä¸‹ï¼š ç¼–å†™Pythonç¨‹åºä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031#coding:utf-8# å¯¼å…¥GPIOæ§åˆ¶è–„å—import RPi.GPIO as GPIO# å¯¼å…¥timeæ¨¡å—import time# å®šä¹‰å¼•è„šfm = 13# è®¾ç½®ä½¿ç”¨çš„å¼•è„šç¼–ç æ¨¡å¼GPIO.setmode(GPIO.BOARD)# è¿›è¡Œå¼•è„šçš„åˆå§‹åŒ–ï¼Œå› ä¸ºæ˜¯ä½ç”µå¹³è§¦å‘ï¼Œåˆå§‹æ—¶è®¾ç½®ä¸ºé«˜ç”µå¹³GPIO.setup(fm,GPIO.OUT, initial=GPIO.HIGH)# è¿›è¡Œä¸€é•¿ä¸¤çŸ­çš„å£°éŸ³æ’­æ”¾# æ’­æ”¾1ç§’å£°éŸ³GPIO.output(fm, GPIO.LOW)time.sleep(1)GPIO.output(fm, GPIO.HIGH)time.sleep(0.1)# æ’­æ”¾0.5ç§’å£°éŸ³GPIO.output(fm, GPIO.LOW)time.sleep(0.5)GPIO.output(fm, GPIO.HIGH)time.sleep(0.1)# æ’­æ”¾0.5ç§’å£°éŸ³GPIO.output(fm, GPIO.LOW)time.sleep(0.5)# åœæ­¢èœ‚é¸£å™¨æ’­æ”¾GPIO.output(fm, GPIO.HIGH)GPIO.cleanup() åœ¨æ ‘è“æ´¾ä¸Šè¿è¡Œä»£ç ï¼Œä½ åº”è¯¥å·²ç»å¯ä»¥å¬åˆ°èœ‚é¸£å™¨å‘å‡ºä¸€é•¿ä¸¤çŸ­çš„é¸£å«å£°äº†ã€‚ 3.æœ¬å®éªŒçš„â€œä¸»è§’ä¹™â€â€”â€”æŒ‰å‹å¼€å…³æŒ‰å‹å¼€å…³æ˜¯ç”µå­è®¾å¤‡ä¸­æœ€ä¸ºå¸¸ç”¨çš„ä¸€ç§å…ƒä»¶ï¼Œå…³äºæŒ‰å‹å¼€å…³æœ¬èº«çš„ç»“æ„å’ŒåŸç†ï¼Œå…¶å®éå¸¸ç®€å•ï¼Œå…¶æŒ‰é”®å†…éƒ¨ä¼šæœ‰å¼¹ç°§è¿›è¡Œæ§åˆ¶ï¼Œå½“æ²¡æœ‰å¤–åŠ›ä½œç”¨æ—¶ï¼Œå¼¹ç°§ä¼šå°†å¼€å…³è‡ªåŠ¨é¡¶èµ·ï¼Œæ¥è§¦å™¨ä¸Šå‡ã€‚å½“å¤–åŠ›å°†æŒ‰é”®æŒ‰ä¸‹æ—¶ï¼Œæ¥è§¦å™¨ä¸‹é™ã€‚é€šè¿‡æ¥è§¦å™¨çš„ä¸Šå‡å’Œä¸‹é™æ¥æ§åˆ¶ç”µè·¯çš„å¯¼é€šã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š æœ¬æ¬¡å®éªŒï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æŒ‰å‹å¼€å…³å…ƒä»¶å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š æˆ‘ä»¬ä½¿ç”¨çš„æ­¤å¼€å…³å½“æŒ‰é”®æŒ‰ä¸‹å¼ï¼Œä¼šå‘å¼•è„šè¾“å…¥ä½ç”µå¹³ï¼Œå½“æŒ‰é”®æ¾å¼€æ—¶ï¼Œä¼šå‘å¼•è„šè¾“å…¥ä½ç”µå¹³ã€‚åœ¨è¿çº¿æ—¶ï¼ŒæŒ‰å‹å¼€å…³çš„â€œ-â€å¼•è„šæ¥åœ°ï¼Œä¸­é—´å¼•è„šèŠ‚3.3Vç”µå‹ï¼Œâ€œSâ€å¼•è„šæ¥GPIOä¿¡å·å¼•è„šï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶æ¥BCMç¼–ç ä¸ºGPIO5çš„å¼•è„šï¼Œå…¶ç‰©ç†ç¼–ç ä¸º29ã€‚è¿çº¿å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¸‹é¢ï¼Œæˆ‘ä»¬è¦æ¥å­¦ä¹ ç‚¹æ–°ä¸œè¥¿äº†ï¼Œå¦‚ä½•è·å–åˆ°GPIOå¼•è„šçš„è¾“å…¥ã€‚ 4. ä½¿ç”¨GPIOè¾“å…¥ä¿¡å·ä¹‹å‰ï¼Œæˆ‘ä»¬éƒ½æ˜¯å°†GPIOä½œä¸ºè¾“å‡ºå¼•è„šè¿›è¡Œä½¿ç”¨ï¼Œå³è®©GPIOè¾“å‡ºé«˜ç”µå¹³æˆ–ä½ç”µå¹³ä»è€Œæ§åˆ¶å…ƒä»¶ã€‚å…¶å®è¿˜æœ‰å¾ˆå¤šåœºæ™¯ï¼Œéœ€è¦è¯»å–GPIOçš„è¾“å…¥ä¿¡å·ï¼Œä¾‹å¦‚å„ç§ä¼ æ„Ÿå™¨å’Œå¼€å…³å…ƒä»¶ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨ä¸¤ç§æ–¹å¼æ¥è·å–GPIOçš„è¾“å…¥ä¿¡å·ï¼šè½®è¯¢å¼æˆ–ä¸­æ–­å¼ã€‚ è½®è¯¢å¼å¾ˆå¥½ç†è§£ï¼Œå³æˆ‘ä»¬ä¸åœçš„è¯¢é—®å½“å‰GPIOå¼•è„šï¼šè¾“å…¥çš„ä¿¡å·æ˜¯ä»€ä¹ˆå•Šï¼Ÿä¹‹åGPIOä¼šå°†å½“å‰çš„è¾“å…¥ä¿¡æ¯å‘Šè¯‰æˆ‘ä»¬ï¼Œè¿™ç§ä¸åœçš„è¯»å–æŸä¸ªGPIOå¼•è„šçš„å€¼çš„æ–¹å¼å°±æ˜¯è½®è¯¢å¼è·å–è¾“å…¥ä¿¡å·ã€‚æ›´å¤šæ—¶å€™ï¼Œæˆ‘ä»¬ä¼šé‡‡å–ä¸­æ–­å¼ï¼Œä¸­æ–­å¼æ˜¯æŒ‡åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå¦‚æœå‡ºç°å¤–éƒ¨äº‹ä»¶ï¼Œåˆ™ä¸­æ–­å½“å‰ç¨‹åºè¿è¡Œæ¥å¤„ç†å¤–éƒ¨äº‹ä»¶ã€‚åœ¨æœ¬å®éªŒä¸­ï¼Œå¼€å…³çš„æŒ‰ä¸‹å’Œæ¾å¼€å°±å¯ä»¥ç†è§£ä¸ºä¸­æ–­äº‹ä»¶ã€‚ éœ€è¦æ³¨æ„ï¼Œå¯¹äºä½œä¸ºè¾“å…¥ä½¿ç”¨çš„GPIOå¼•è„šæ¥è¯´ï¼Œå½“æˆ‘ä»¬æœªæ¥ä»»ä½•è¾“å…¥æºæ—¶ï¼Œå…¶å€¼å¯èƒ½æ˜¯ä»»æ„çš„ï¼Œå³å…¶å€¼æ˜¯æµ®åŠ¨ä¸”ä¸å¯æ§çš„ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¸ºå…¶é…ç½®ä¸€ä¸ªé»˜è®¤å€¼ï¼Œç¡¬ä»¶ä¸Šï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨ä¸‹æ‹‰ç”µé˜»æˆ–ä¸Šæ‹‰ç”µé˜»ã€‚è½¯ä»¶ä¸Šæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡GPIOåº“çš„ç›¸å…³æ¥å£æ¥å®ç°åŒæ ·çš„åŠŸèƒ½ï¼Œä¾‹å¦‚ä½¿ç”¨ä¸‹é¢çš„æ–¹å¼åˆå§‹åŒ–å¼•è„šï¼š 1234# å°†å¼•è„šåˆå§‹åŒ–ä¸ºè¾“å…¥å¼•è„šï¼ŒåŒæ—¶è®¾ç½®é»˜è®¤å€¼ä¸ºé«˜ç”µå¹³GPIO.setup(channel, GPIO.IN, pull_up_down=GPIO.PUD_UP)# å°†å¼•è„šåˆå§‹åŒ–ä¸ºè¾“å…¥å¼•è„šï¼ŒåŒæ—¶è®¾ç½®é»˜è®¤å€¼ä¸ºä½ç”µå¹³GPIO.setup(channel, GPIO.IN, pull_up_down=GPIO.PUD_DOWN) è‹¥è¦è·å–åˆ°æŸä¸ªè¾“å…¥å¼•è„šå½“å‰çš„ç”µå¹³æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•ï¼š 12# 1è¡¨ç¤ºé«˜ç”µå¹³ 0è¡¨ç¤ºä½ç”µå¹³GPIO.input(channel) ä¾‹å¦‚å¯ä»¥é€šè¿‡å¦‚ä¸‹çš„æ–¹å¼è½®è®­æ£€æŸ¥æŸä¸ªå¼•è„šçš„è¾“å…¥ï¼š 12while GPIO.input(channel) == GPIO.LOW: time.sleep(0.01) æˆ‘ä»¬é€šå¸¸åªéœ€è¦å…³å¿ƒç”µå¹³çš„å˜åŒ–ï¼Œä»¥åŠå˜åŒ–æ–¹å‘ï¼Œä»¥æœ¬å®éªŒä¸ºä¾‹ï¼Œå½“æŒ‰ä¸‹å¼€å…³æ—¶ï¼Œç”µå¹³ç”±ä½å˜é«˜ï¼Œå½“æ¾å¼€å¼€å…³æ—¶ï¼Œç”µå¹³ç”±é«˜åˆ°ä½ã€‚ä¸‹é¢æ–¹æ³•å¯ä»¥ä¸­æ–­å½“å‰ç¨‹åºçš„è¿è¡Œï¼Œç­‰å¾…ç”µå¹³å˜åŒ–çš„ä¿¡å·ï¼š 12# å½“channelå¼•è„šç”±ä½ç”µå¹³å˜åˆ°é«˜ç”µå¹³æ—¶ä¼šè§¦å‘å‘åæ‰§è¡Œ, timeoutè®¾ç½®è¶…æ—¶æ—¶é—´GPIO.wait_for_edge(channel, GPIO.RISING, timeout=5000) GPIO.RISINGè¡¨ç¤ºè¦ç­‰å¾…çš„æ˜¯ç”±ä½åˆ°é«˜çš„ç”µå¹³å˜åŒ–ï¼Œä¸ä¹‹å¯¹åº”çš„è¿˜æœ‰GPIO.FALLINGè¡¨ç¤ºç”±é«˜åˆ°ä½çš„ç”µå¹³å˜åŒ–ï¼ŒGPIO.BOTHè¡¨ç¤ºä¸¤ä¸ªæ–¹å‘çš„ç”µå¹³å˜åŒ–éƒ½ä¼šè§¦å‘ã€‚ å¯¹äºæœ¬å®éªŒçš„åœºæ™¯ï¼ŒGPIO.wait_for_edgeæ–¹æ³•å¹¶ä¸å®ç”¨ï¼Œå¦‚æœæˆ‘ä»¬è¦é‡‡ç”¨è½®è¯¢çš„æ–¹å¼è·å–GPIOè¾“å…¥ä¿¡å·ï¼Œåˆ™å¯ä»¥å®ç”¨ä¸‹é¢çš„æ–¹æ³•ï¼š 12345# ä¸ºchannelè¾“å…¥å¼•è„šæ·»åŠ [ä»ä½åˆ°é«˜]çš„ç”µå¹³å˜åŒ–ç›‘å¬GPIO.add_event_detect(channel, GPIO.RISING) # ä¸‹é¢çš„åˆ¤æ–­å¯ä»¥æ”¾åœ¨è½®è¯¢ä¸­ï¼Œåªè¦æœ‰[ä»ä½åˆ°é«˜]çš„ç”µå¹³å˜åŒ–ï¼Œå³ä¼šå‘½ä¸­ifåˆ¤æ–­if GPIO.event_detected(channel): print('ä»ä½åˆ°é«˜å˜åŒ–') éœ€è¦æ³¨æ„ï¼ŒGPIO.add_event_detectæ–¹æ³•æ¯”ç›´æ¥è½®è¯¢é€šè¿‡GPIO.inputæ–¹æ³•è·å–ä¿¡å·è¦å¯é çš„å¤šï¼Œç›´æ¥è½®è¯¢å¯èƒ½ä¼šé”™è¿‡æŸäº›ç”µå¹³å˜åŒ–äº‹ä»¶ï¼Œè€ŒGPIO.add_event_detect ä¸ä¼šã€‚åœ¨ä½¿ç”¨GPIO.add_event_detectæ–¹æ³•æ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥è®¾ç½®å›è°ƒå‡½æ•°ï¼Œå½“æœ‰å˜åŒ–å‘ç”Ÿæ—¶ï¼Œå³ä¼šæ‰§è¡Œåˆ°å›è°ƒå‡½æ•°ï¼Œä¾‹å¦‚ï¼š 12345# å®šä¹‰å›è°ƒå‡½æ•°def my_callback(channel): pass# æ³¨å†Œå›è°ƒå‡½æ•° bouncetimeå‚æ•°ç”¨æ¥è¿›è¡Œé˜²æŠ–GPIO.add_event_detect(channel, GPIO.RISING, callback=my_callback, bouncetime=200) ä¸Šé¢ç¤ºä¾‹ä»£ç ä¸­ï¼Œbouncetimeå‚æ•°èƒ½å¤Ÿæä¾›è½¯ä»¶é˜²æŠ–çš„åŠŸèƒ½ï¼Œå…¶å•ä½ä¸ºæ¯«ç§’ï¼Œ200æ¯«ç§’å†…çš„å¤šæ¬¡ç”µå¹³å˜åŒ–æ¥å›å°†è¢«å¿½ç•¥ã€‚ æœ€åï¼Œå¦‚æœä½ ä¸å†éœ€è¦ç›‘å¬ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•ç§»é™¤ï¼š 1GPIO.remove_event_detect(channel) 5. è·å–æŒ‰å‹å¼€å…³å…ƒä»¶çš„çŠ¶æ€ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•ä½¿ç”¨æ ‘è“æ´¾è¯»å–æŒ‰å‹å¼€å…³å…ƒä»¶çš„å¼€å…³çŠ¶æ€äº†ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728#coding:utf-8# å¯¼å…¥GPIOæ§åˆ¶è–„å—import RPi.GPIO as GPIO# å¯¼å…¥timeæ¨¡å—import time# è®¾ç½®ä½¿ç”¨çš„å¼•è„šç¼–ç æ¨¡å¼GPIO.setmode(GPIO.BOARD)# å®šä¹‰å¼€å…³å¼•è„šswi = 29# è¿›è¡Œå¼€å…³å¼•è„šçš„åˆå§‹åŒ–ï¼Œè®¾ç½®ä¸ºè¾“å…¥å¼•è„šï¼Œä¸”é»˜è®¤ä¸ºé«˜ç”µå¹³GPIO.setup(swi, GPIO.IN, pull_up_down=GPIO.PUD_PU)# å®šä¹‰çŠ¶æ€å˜åŒ–çš„å›è°ƒå‡½æ•°def switch(channel): # é«˜ç”µå¹³çš„å¼€å…³æ¾å¼€ if GPOI.input(channel): print(\"å¼€å…³æ¾å¼€\") # ä½ç”µå¹³ä¸ºå¼€å…³æŒ‰ä¸‹ else: print(\"å¼€å…³æŒ‰ä¸‹\") # æ·»åŠ è¾“å…¥å¼•è„šç”µå¹³å˜åŒ–çš„å›è°ƒå‡½æ•°GPIO.add_event_detect(swi, GPIO.BOTH, callback=switch, bouncetime=200)# å¼€å¯å¾ªç¯while True: pass åœ¨æ ‘è“æ´¾è¿è¡Œä¸Šé¢ä»£ç ï¼Œé€šè¿‡æŒ‰å‹å’Œæ¾å¼€å¼€å…³ï¼Œè§‚å¯Ÿæ§åˆ¶å°çš„è¾“å‡ºæ˜¯å¦æ­£ç¡®ã€‚ äºŒã€å¼€å…³æ§åˆ¶èœ‚é¸£å™¨æ’­æ”¾å¦‚æœä½ æˆåŠŸåšå®Œäº†å‰é¢çš„å·¥ä½œï¼Œé‚£ä¹ˆå¥½äº†ï¼Œæœ¬èŠ‚çš„å†…å®¹å°†éå¸¸ç®€å•ï¼Œåªéœ€è¦å°†ä¸Šé¢ç¼–å†™çš„èœ‚é¸£å™¨ç¨‹åºå’Œå¼€å…³ç¨‹åºè¿›è¡Œç»“åˆï¼Œä½ å°±å¯ä»¥ä½¿ç”¨å¼€å…³æ¥æ§åˆ¶èœ‚é¸£å™¨äº†ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132#coding:utf-8# å¯¼å…¥GPIOæ§åˆ¶è–„å—import RPi.GPIO as GPIO# å¯¼å…¥timeæ¨¡å—import time# è®¾ç½®ä½¿ç”¨çš„å¼•è„šç¼–ç æ¨¡å¼GPIO.setmode(GPIO.BOARD)# å®šä¹‰å¼€å…³å¼•è„šswi = 29# å®šä¹‰èœ‚é¸£å™¨å¼•è„šfm = 13# è¿›è¡Œå¼€å…³å¼•è„šçš„åˆå§‹åŒ–ï¼Œè®¾ç½®ä¸ºè¾“å…¥å¼•è„šï¼Œä¸”é»˜è®¤ä¸ºé«˜ç”µå¹³GPIO.setup(swi, GPIO.IN, pull_up_down=GPIO.PUD_UP)# è¿›è¡Œèœ‚é¸£å™¨å¼•è„šçš„åˆå§‹åŒ–ï¼Œå› ä¸ºæ˜¯ä½ç”µå¹³è§¦å‘ï¼Œåˆå§‹æ—¶è®¾ç½®ä¸ºé«˜ç”µå¹³GPIO.setup(fm,GPIO.OUT, initial=GPIO.HIGH)# å®šä¹‰çŠ¶æ€å˜åŒ–çš„å›è°ƒå‡½æ•°def switch(channel): # é«˜ç”µå¹³çš„å¼€å…³æ¾å¼€ if GPI0.input(channel): GPIO.output(fm, GPIO.HIGH) # ä½ç”µå¹³ä¸ºå¼€å…³æŒ‰ä¸‹ else: GPIO.output(fm, GPIO.LOW) # æ·»åŠ è¾“å…¥å¼•è„šç”µå¹³å˜åŒ–çš„å›è°ƒå‡½æ•°GPIO.add_event_detect(swi, GPIO.BOTH, callback=switch, bouncetime=200)# å¼€å¯å¾ªç¯while True: pass ç°åœ¨ï¼Œè¿è¡Œç¨‹åºï¼Œç”¨å¼€å…³æ¥æ§åˆ¶èœ‚é¸£å™¨çš„å£°éŸ³æ’­æ”¾å§ã€‚æ­å–œï¼ä½ å·²ç»èƒ½å¤Ÿä½¿ç”¨ç¡¬ä»¶æ¥æ§åˆ¶ç¡¬ä»¶äº†ï¼ ä¸‰ã€ä¼‘æ¯ä¸€ä¸‹å§é€šè¿‡æœ¬ç¯‡åšå®¢ï¼Œä½ åº”è¯¥æ”¶è·äº†GPIOè¾“å…¥ä¿¡å·çš„ç¼–ç¨‹æ–¹æ³•ï¼Œä»¥åŠé€šè¿‡GPIOè¯»å–æœ‰è¾“å…¥åŠŸèƒ½çš„ä¼ æ„Ÿå™¨æ•°æ®çš„æ–¹æ³•ã€‚æœ¬ç¯‡åšå®¢æ¶‰åŠçš„å†…å®¹å¾ˆå¤šï¼Œé‡ç‚¹åœ¨äºGPIOè¾“å…¥å¼•è„šä¸­æ–­çš„ç›¸å…³ç”¨æ³•ï¼Œéœ€è¦ä½ å¤šå¤šç»ƒä¹ ã€‚è¯´äº†è¿™ä¹ˆå¤šï¼Œä½ æœ‰æ²¡æœ‰å‘ç°è¿™æ¬¡æˆ‘ä»¬å®Œæˆçš„å®éªŒå¾ˆåƒç”Ÿæ´»ä¸­çš„ä¸€ç§ä¸œè¥¿ï¼Ÿæ²¡é”™ï¼Œå°±æ˜¯é—¨é“ƒï¼Œä½ å·²ç»å¯ä»¥ä½¿ç”¨æ ‘è“æ´¾å®ç°ä¸€ä¸ªç®€å•çš„é—¨é“ƒå™¨ä»¶å•¦ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œæ‡‚çš„çƒ­çˆ±ï¼Œæ„¿æ„åˆ†äº«ï¼Œåšä¸ªæœ‹å‹ QQï¼š316045346","categories":[{"name":"Linux","slug":"Linux","permalink":"http://huishao.cc/categories/Linux/"}],"tags":[],"keywords":[{"name":"Linux","slug":"Linux","permalink":"http://huishao.cc/categories/Linux/"}]},{"title":"ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ3ï¼‰â€”â€”ç‚¹äº®RGBç‚«å½©LEDç¯","slug":"416ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ3ï¼‰â€”â€”ç‚¹äº®RGBç‚«å½©LEDç¯","date":"2021-07-09T16:00:00.000Z","updated":"2021-07-15T11:38:54.536Z","comments":true,"path":"2021/07/10/416ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ3ï¼‰â€”â€”ç‚¹äº®RGBç‚«å½©LEDç¯/","link":"","permalink":"http://huishao.cc/2021/07/10/416ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ3ï¼‰â€”â€”ç‚¹äº®RGBç‚«å½©LEDç¯/","excerpt":"","text":"ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ3ï¼‰â€”â€”ç‚¹äº®RGBç‚«å½©LEDç¯åœ¨é˜…è¯»æœ¬ç¯‡åšå®¢ä¹‹å‰ï¼Œå¦‚æœä½ å¯¹æ ‘è“æ´¾çš„GPIOè¿˜æ²¡æœ‰åŸºæœ¬çš„äº†è§£ï¼Œæˆ‘å»ºè®®ä½ å…ˆé˜…è¯»æœ¬ç³»åˆ—åšå®¢çš„ä¸Šä¸€ç¯‡ï¼Œå…³äºåŒè‰²LEDç¯å®éªŒçš„ã€‚äº†è§£æ ‘è“æ´¾GPIOçš„åŸºæœ¬ç”¨æ³•æ˜¯è¿›è¡Œæœ¬ç¯‡åšå®¢å®éªŒçš„åŸºç¡€ã€‚ä¸Šç¯‡åšå®¢åœ°å€å¦‚ä¸‹ï¼š https://my.oschina.net/u/2340880/blog/5123429 ç°åœ¨ï¼Œå¦‚æœä½ å·²ç»æˆåŠŸå®Œæˆè¿‡æ ‘è“æ´¾åŒè‰²LEDç¯å®éªŒï¼Œå¹¶ä¸”å¯¹æ·±å…¥æ ‘è“æ´¾ç©æ³•æœ‰æ›´å¤šçš„å…´è¶£çš„è¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨è¿›ä¸€æ­¥ï¼Œå°è¯•ç‚¹äº®ä¸€ä¸ªæ›´åŠ ç»šä¸½çš„LEDç¯ï¼šRGB3è‰²LEDç¯ã€‚ ä¸€ã€è®¤è¯†RGBä¸‰åŸè‰²LEDç¯å¹¶è¿çº¿é€šè¿‡å‰é¢çš„å®éªŒï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“ï¼ŒåŒè‰²çš„LEDç¯å†…éƒ¨å°è£…äº†çº¢ç»¿ä¸¤ä¸ªå‘å…‰äºŒæç®¡ï¼Œå…¶æœ‰3ä¸ªå¼•è„šï¼Œå…¶ä¸­1ä¸ªå¼•è„šæ˜¯å…±ç”¨çš„(å…±é˜´æˆ–å…±é˜³)ï¼Œå¯¹äºå…±é˜´å‹çš„åŒè‰²LEDç¯ï¼Œæ§åˆ¶å¦å¤–ä¸¤ä¸ªå¼•è„šçš„é«˜ä½ç”µå¹³æ¥åˆ†åˆ«ç‚¹äº®çº¢ç¯æˆ–ç»¿ç¯ã€‚å¯¹äºRGB3è‰²LEDç¯ä¹Ÿç±»ä¼¼ï¼Œåªæ˜¯å…¶å†…éƒ¨å°è£…äº†3ä¸ªå‘å…‰äºŒæç®¡ï¼Œåˆ†åˆ«å¯ä»¥å‘å‡ºçº¢å…‰ï¼Œç»¿å…‰å’Œè“å…‰ã€‚å…¶æœ‰4ä¸ªå¼•è„šï¼Œ1ä¸ªå¼•è„šå…±ç”¨å’Œ3ä¸ªæ§åˆ¶å‘å…‰äºŒæç®¡çš„å¼•è„šã€‚ æœ¬æ¬¡å®éªŒï¼Œæˆ‘ä»¬ä¾ç„¶é‡‡ç”¨å…±é˜´å‹çš„RGB3è‰²LEDç¯ï¼Œå…ƒä»¶å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å…±é˜´å‹çš„LEDç¯ï¼ŒGNDå¼•è„šæ˜¯å…¶å…¬å…±çš„é˜´æï¼Œæ¥çº¿çš„æ—¶å€™æˆ‘ä»¬éœ€è¦å°†æ­¤å¼•è„šæ¥åœ°ï¼Œå¦å¤–3ä¸ªå¼•è„šåˆ†åˆ«æ¥3ä¸ªGPIOæ¥æ§åˆ¶äº®ç¯ã€‚ä¸‹é¢ä¸¤ç§å›¾ï¼Œéå¸¸ç›´è§‚çš„æ¼”ç¤ºäº†æ­¤LEDç¯çš„å·¥ä½œåŸç†ï¼š åœ¨å°†LEDç¯è¿æ¥åˆ°æ ‘è“æ´¾ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦é¢„å®šå‡ ä¸ªè¦ç”¨çš„GPIOå¼•è„šï¼Œä¹‹åæˆ‘ä»¬åœ¨ç¼–å†™ä»£ç æ—¶ï¼Œä¾ç„¶é‡‡ç”¨ç‰©ç†ç¼–ç ï¼Œé¦–å…ˆæˆ‘ä»¬å…ˆç¡®å®šè¦ä½¿ç”¨çš„GPIOå¼•è„šçš„BCMç¼–ç ä¸‹çš„GPIO18ï¼ŒGPIO19å’ŒGPIO20ï¼Œé€šå¸¸æŸ¥çœ‹å¼•è„šç¼–ç å¯¹åº”å›¾ï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°å…¶æ‰€å¯¹åº”çš„ç‰©ç†å¼•è„šåˆ†åˆ«ä¸º12ï¼Œ24å’Œ28ã€‚å¦‚æœä¸ä½¿ç”¨æ‰©å±•æ¿ï¼Œç›´æ¥å°†åŸä»¶ä¸Šçš„å¯¹åº”å¼•è„šè¿æ¥åˆ°æ ‘è“æ´¾çš„è¿™äº›ç‰©ç†å¼•è„šä¸Šå³å¯ï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯BCMç¼–ç çš„æ‰©å±•æ¿ï¼Œåˆ™æˆ‘ä»¬åœ¨è¿çº¿æ—¶æ— éœ€å…³å¿ƒè¿™äº›ç‰©ç†å¼•è„šï¼Œç›´æ¥è¿æ¥å³å¯ï¼Œå¦‚ä¸‹ï¼š å¥½äº†ï¼Œç°åœ¨æˆ‘ä»¬å·²ç»å®Œæˆäº†åŸºæœ¬çš„è¿çº¿å·¥ä½œã€‚ äºŒã€ä¸‰åŸè‰²ä¸è„‰å†²å®½åº¦è°ƒåˆ¶ä¸‰åŸè‰²æœ¬æŒ‡è‰²å½©ä¸­ä¸èƒ½å†åˆ†è§£çš„ä¸‰ç§åŸºæœ¬é¢œè‰²ï¼Œåœ¨å…‰å­¦ä¸Šï¼Œçº¢ã€ç»¿ã€è“ä¸ºæœ€åŸºæœ¬çš„ä¸‰åŸè‰²ã€‚ä¸‰åŸè‰²ç»è¿‡æ··åˆåï¼Œå¯ä»¥ç»„æˆå„å¼å„æ ·çš„é¢œè‰²ã€‚ä¾‹å¦‚å°†ä¸‰åŸè‰²ç­‰æ¯”æ··åˆåå°†èƒ½ç»„æˆç™½è‰²ï¼Œå°†çº¢è‰²å’Œç»¿è‰²ç»„åˆåä¼šç”Ÿæˆé»„è‰²ï¼Œå°†çº¢è‰²å’Œè“è‰²æ··åˆåä¼šå¾—åˆ°ç´«è‰²ç­‰ç­‰ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å› æ­¤ï¼Œä»åŸç†ä¸Šè¯´ï¼Œæˆ‘ä»¬åªè¦å¯ä»¥æ§åˆ¶RGBç¯ä¸‰ç§é¢œè‰²çš„æ˜¾ç¤ºäº®åº¦ï¼Œå°±å¯ä»¥è®©LEDç¯è°ƒåˆ¶å‡ºå„ç§é¢œè‰²ã€‚æ§åˆ¶LEDç­‰ä¸­å„ä¸ªå‘å…‰äºŒæç®¡çš„äº®å’Œç­éå¸¸ç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦å‘å…¶åŠ é«˜ç”µå¹³æˆ–ä½ç”µå¹³å³å¯ï¼Œé‚£ä¹ˆå¦‚ä½•æ§åˆ¶å‘å…‰äºŒæç®¡çš„äº®åº¦å‘¢ï¼Ÿæˆ‘ä»¬éœ€è¦ä½¿ç”¨åˆ°å¦å¤–ä¸€ç§ç”µæµæ§åˆ¶æŠ€æœ¯ï¼šPWMè„‰å†²å®½åº¦è°ƒåˆ¶ã€‚ è„‰å†²å®½åº¦è°ƒåˆ¶(PWM)æ˜¯ä¸€ç§æ¨¡æ‹Ÿæ§åˆ¶æ–¹å¼ï¼Œå…¶é€šè¿‡æ§åˆ¶è„‰å†²ç”µå‹ä¸­é«˜ç”µå‹çš„å ç©ºæ¯”æ¥æ§åˆ¶æµè¿‡å…ƒä»¶çš„ç”µæµå¤§å°ã€‚PWMæŠ€æœ¯ä¸­æœ‰ä¸¤ä¸ªéå¸¸é‡è¦çš„å‚æ•°ï¼šé¢‘ç‡ä¸å ç©ºæ¯”ã€‚é¢‘ç‡ç”¨æ¥æ§åˆ¶è„‰å†²ä¿¡å·çš„å‘¨æœŸï¼Œå¦‚æœé¢‘ç‡è¿‡ä½ï¼Œåœ¨æ§åˆ¶LEDç¯çš„æ—¶å€™ï¼Œç¯å°±ä¼šè¿›è¡Œé—ªçƒï¼Œå½“é¢‘ç‡è¶³å¤Ÿé«˜ï¼Œäººçœ¼å·²æ— æ³•åˆ†è¾¨å‡ºå…¶é—ªçƒï¼Œçœ‹ä¸Šèµ·LEDç¯å°±æ˜¯å¸¸äº®çš„ã€‚å ç©ºæ¯”æŒ‡çš„æ˜¯åœ¨è¾“å‡ºçš„è„‰å†²ä¿¡å·ä¸­ï¼Œé«˜ç”µå¹³ä¿æŒçš„æ—¶é—´ä¸è¯¥è„‰å†²ä¿¡å·çš„å‘¨æœŸæ—¶é—´ä¹‹æ¯”ã€‚ä¾‹å¦‚ï¼Œå‡è®¾è®¾ç½®å‘¨æœŸä¸º100Hzï¼Œåˆ™å…¶å‘¨æœŸæ—¶é—´ä¸º10msï¼Œå¦‚æœè®¾ç½®çš„å ç©ºæ¯”ä¸º20%ï¼Œåˆ™å½“å‰å‘¨æœŸä¸­ï¼Œé«˜ç”µå¹³çš„å æ¯”æ—¶é—´ä¸º2msã€‚ Pythonçš„GPIOåº“ä¸­æä¾›äº†PWMæ§åˆ¶æ¥å£ï¼Œä½¿ç”¨ä¹Ÿéå¸¸ç®€å•ï¼Œä½¿ç”¨å¦‚ä¸‹æ–¹æ³•å¯ä»¥è·å–æŸä¸ªå¼•è„šçš„PWMå®ä¾‹ï¼š 1p = GPIO.PWM(channel, frequency) å…¶ä¸­ï¼Œchannelå‚æ•°ä¸ºå¼•è„šç¼–ç ï¼Œfrequencyå‚æ•°ä¸ºè®¾ç½®çš„PWMé¢‘ç‡ã€‚ä¸‹é¢æ–¹æ³•ç”¨æ¥å¼€å¯PWMè„‰å†²ï¼š 1p.start(dc) å…¶ä¸­ï¼Œdcå‚æ•°è®¾ç½®è„‰å†²çš„é«˜ç”µå¹³å ç©ºæ¯”ï¼Œå–å€¼èŒƒå›´ä¸º0-100ã€‚ é€šè¿‡ä¸‹é¢çš„æ–¹æ³•å¯ä»¥å¯¹PWMè„‰å†²é¢‘ç‡å’Œå ç©ºæ¯”è¿›è¡Œä¿®æ”¹ï¼š 12p.ChangeFrequency(freq) p.ChangeDutyCycle(dc) éœ€è¦ç»“æŸPWMè„‰å†²è°ƒåˆ¶æ—¶ï¼Œå¯ä»¥è°ƒç”¨å¦‚ä¸‹æ–¹æ³•ï¼š 1p.stop() ä¸‰ã€ç‚¹äº®ç‚«å½©çš„ä¸‰å½©LEDç¯ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»åšå¥½äº†æ‰€æœ‰å‡†å¤‡å·¥ä½œï¼Œå¯ä»¥å¼€å§‹ç¼–ç äº†ã€‚æˆ‘ä»¬è¦å®ç°è¿™æ ·ä¸€ä¸ªåŠŸèƒ½ï¼Œå½“ç¨‹åºè¿è¡Œæ—¶ï¼Œå…ˆæ§åˆ¶LEDç¯çš„çº¢ç¯ï¼Œç»¿ç¯ï¼Œé›è‰²ç¯åˆ†åˆ«äº®2ç§’ï¼Œä¹‹åé€šè¿‡è„‰å†²æ··åˆï¼Œè®©LEDç¯è¿›è¡Œå„ç§é¢œè‰²çš„ç‚«å½©é—ªçƒï¼Œå®Œæ•´ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172#coding:utf-8# å¯¼å…¥GPIOæ§åˆ¶è–„å—import RPi.GPIO as GPIO# å¯¼å…¥timeæ¨¡å—import time# å¯¼å…¥ç³»ç»Ÿæ¨¡å—import sys# å®šä¹‰å¼•è„š(ç‰©ç†å¼•è„š)R,G,B = 12,35,38# è®¾ç½®ä½¿ç”¨çš„å¼•è„šç¼–ç æ¨¡å¼GPIO.setmode(GPIO.BOARD)# å¯¹è¦ä½¿ç”¨çš„å¼•è„šè¿›è¡Œåˆå§‹åŒ–GPIO.setup(R,GPIO.OUT)GPIO.setup(G,GPIO.OUT)GPIO.setup(B,GPIO.OUT)# ä½¿ç”¨PWMè„‰å†²å®½åº¦è°ƒåˆ¶pR = GPIO.PWM(R, 60)pG = GPIO.PWM(G, 60)pB = GPIO.PWM(B, 60)# å¼€å¯è„‰å†²ï¼Œé»˜è®¤çš„å ç©ºæ¯”ä¸º0ï¼Œç¯ä¸äº®pR.start(0)pG.start(0)pB.start(0)# åˆå§‹æ—¶ï¼Œå„ç§é¢œè‰²ç‚¹äº®2ç§’# çº¢ç¯å…ˆäº®2ç§’pR.ChangeDutyCycle(100)pG.ChangeDutyCycle(0)pB.ChangeDutyCycle(0)time.sleep(2)# æ›¿æ¢ä¸ºç»¿ç¯äº®2ç§’pR.ChangeDutyCycle(0)pG.ChangeDutyCycle(100)pB.ChangeDutyCycle(0)time.sleep(2)# æ›¿æ¢ä¸ºé›è‰²ç¯äº®2ç§’pR.ChangeDutyCycle(0)pG.ChangeDutyCycle(0)pB.ChangeDutyCycle(100)time.sleep(2)# å®šä¹‰è¦é—ªçƒçš„æ—¶é—´ è¿™é‡Œå®šä¹‰ä¸º10ç§’endTime = 100current = 0# å¼€å§‹è¿›è¡Œç‚«å½©é—ªçƒwhile True: # é€šè¿‡å ç©ºæ¯”æ§åˆ¶çº¢è‰²çš„å æ¯” for r in range(0, 101, 10): pR.ChangeDutyCycle(r) # é€šè¿‡å ç©ºæ¯”æ§åˆ¶ç»¿è‰²çš„å æ¯” for g in range(0, 101, 10): pG.ChangeDutyCycle(g) # ç©ºé€šè¿‡å ç©ºæ¯”æ§åˆ¶è“è‰²çš„å æ¯” for b in range(0, 101, 10): pB.ChangeDutyCycle(b) time.sleep(0.1) current += 1 # ç»“æŸç¨‹åº if (current &gt; endTime): pR.stop() pG.stop() pB.stop() GPIO.cleanup() sys.exit(0) åœ¨æ ‘è“æ´¾ä¸Šè¿è¡Œæ­¤ç¨‹åºï¼Œæ³¨æ„ï¼å°å¿ƒä¸è¦è¢«å¤ªäº®çš„LEDé—ªåˆ°äº†çœ¼ç›ğŸ˜ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œæ‡‚çš„çƒ­çˆ±ï¼Œæ„¿æ„åˆ†äº«ï¼Œåšä¸ªæœ‹å‹ QQï¼š316045346","categories":[{"name":"Linux","slug":"Linux","permalink":"http://huishao.cc/categories/Linux/"}],"tags":[],"keywords":[{"name":"Linux","slug":"Linux","permalink":"http://huishao.cc/categories/Linux/"}]},{"title":"ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ2ï¼‰â€”â€”ä»åŒè‰²LEDç¯å¼€å§‹","slug":"415ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ2ï¼‰â€”â€”ä»åŒè‰²LEDç¯å¼€å§‹","date":"2021-07-06T16:00:00.000Z","updated":"2021-07-15T11:38:12.427Z","comments":true,"path":"2021/07/07/415ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ2ï¼‰â€”â€”ä»åŒè‰²LEDç¯å¼€å§‹/","link":"","permalink":"http://huishao.cc/2021/07/07/415ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ2ï¼‰â€”â€”ä»åŒè‰²LEDç¯å¼€å§‹/","excerpt":"","text":"ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ2ï¼‰â€”â€”ä»åŒè‰²LEDç¯å¼€å§‹åŒè‰²LEDç¯å®éªŒæ˜¯å…¥é—¨æ ‘è“æ´¾GPIOå¤–è®¾ç¼–ç¨‹çš„æœ€ç®€å•çš„å®éªŒé¡¹ç›®ï¼Œæˆ‘ä»¬ä¹Ÿä»¥å…¶æŠ•çŸ³é—®è·¯ï¼Œæ¥è¿›å…¥æ ‘è“æ´¾çš„ç¼–ç¨‹ä¸–ç•Œã€‚ ä¸€ã€ä»äº†è§£GPIOå¼€å§‹GPIOå…¨ç§°General-purpose input/outputï¼Œå³é€šç”¨å‹è¾“å…¥è¾“å‡ºï¼Œå…¶å¼•è„šèƒ½å¤Ÿä¾›ä½¿ç”¨è€…è‡ªç”±çš„è¿›è¡Œä½¿ç”¨ï¼Œå¯ä»¥å¯¹å…¶è¿›è¡Œè¾“å…¥ï¼Œä¹Ÿå¯ä»¥è¯»å–å…¶æ•°æ®è¿›è¡Œæ•°æ®è¾“å‡ºï¼Œè¿™äº›å¼•è„šçš„è¾“å…¥æˆ–è¾“å‡ºéƒ½ä¼šå…³è”åˆ°æŸä¸ªå¯„å­˜å™¨ï¼Œå¯„å­˜å™¨çš„å€¼æ§åˆ¶å¼•è„šçš„ç”µå¹³é«˜ä½ã€‚ ä»¥ç¬”è€…ä½¿ç”¨æ ‘è“æ´¾3B+ä¸ºä¾‹ï¼Œå…¶æœ‰40ä¸ªGPIOå¼•è„šï¼Œåœ¨å¼€å§‹ç¼–ç¨‹ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆè¦ææ¸…æ¥šæ¯ä¸ªå¼•è„šçš„åŠŸèƒ½æ„ä¹‰ï¼Œä»æ ‘è“æ´¾å®˜ç½‘çš„æ–‡æ¡£ä¸­å¯ä»¥æ‰¾åˆ°GPIOå¼•è„šçš„åŠŸèƒ½ä»‹ç»ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š æˆ‘ä»¬å¹¶ä¸éœ€è¦å¯¹æ ‘è“æ´¾çš„GPIOå¼•è„šåšæ·±å…¥çš„è®°å¿†ï¼Œåªéœ€è¦è®°ä½å½“æ­£é¢æ‘†æ”¾æ ‘è“æ´¾æ—¶ï¼Œå…¶æœ€å·¦ä¸Šè§’çš„ä¸€ä¸ªå¼•è„šå¯¹åº”çš„æ˜¯5Vç”µå‹çš„åŠŸèƒ½ï¼Œä¹‹åå¯¹ç…§æ­¤å›¾å³å¯ç¡®å®šæ¯ä¸€ä¸ªå¼•è„šçš„åŠŸèƒ½ã€‚åé¢æˆ‘ä»¬ä¼šé€šè¿‡GPIOæ‰©å±•æ¿åŠ é¢åŒ…æ¿çš„æ–¹å¼æ¥ä½¿ç”¨è¿™äº›å¼•è„šï¼Œæ‰©å±•æ¿ä¸Šé»˜è®¤ä¼šæ ‡æ³¨ä¸€äº›å¼•è„šåŠŸèƒ½ï¼Œæˆ‘ä»¬ä½¿ç”¨èµ·æ¥ä¼šæ›´åŠ æ–¹ä¾¿ã€‚ ç¬”è€…ä½¿ç”¨çš„æ‰©å±•æ¿å¼•è„šæ ‡æ³¨ç¤ºå¦‚ä¸‹ï¼š ä½¿ç”¨æ’çº¿å°†å…¶ä¸æ ‘è“æ´¾æ­£å‘è¿æ¥ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¯ä»¥çœ‹åˆ°æ‰©å±•æ¿ä¸Šçš„å¼•è„šæ ‡æ³¨ä¸æ ‘è“æ´¾æœ¬èº«çš„å¼•è„šæ’å¸ƒå¹¶ä¸ä¸€è‡´ï¼Œä¸‹é¢æˆ‘ä¼šç»™å¤§å®¶ä»‹ç»å¦‚ä½•å®šä½åˆ°è¦ä½¿ç”¨çš„å¼•è„šã€‚ äºŒã€å…³äºGPIOå¼•è„šç¼–ç å¸¸ç”¨çš„GPIOå¼•è„šç¼–ç æœ‰3ç§ã€‚ æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨æ ‘è“æ´¾çš„ç»ˆç«¯è¾“å…¥å¦‚ä¸‹æŒ‡ä»¤æŸ¥çœ‹GPIOå¼•è„šåŠŸèƒ½ï¼š 1pinout è¾“å‡ºæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š éœ€è¦æ³¨æ„ï¼Œä¸Šå›¾ä¸­çš„GPIOä½¿ç”¨çš„æ˜¯é€»è¾‘ç¼–ç ï¼Œä»1å¼€å§‹ï¼Œå®é™…ä¸ŠBCMç¼–ç å¹¶ä¸æ˜¯ä»1å¼€å§‹çš„ã€‚ ç¬¬1ç§ï¼šBOARDç‰©ç†ç¼–ç ç‰©ç†ç¼–ç æ¯”è¾ƒå¥½ç†è§£ï¼Œä¹Ÿå¾ˆç›´è§‚ï¼Œå…¶å°±æ˜¯æ ¹æ®æ ‘è“æ´¾ä¸Š40ä¸ªå¼•è„šçš„ä½ç½®è¿›è¡Œæ’åºç¼–ç ï¼Œå¦‚åšå®¢ä¸­ç¬¬ä¸€å¼ å›¾æ‰€ç¤ºï¼Œæ­£å‘æ”¾ç½®æ ‘è“æ´¾æ—¶ï¼Œç¬¬2æ’çš„ç¬¬1ä¸ªå¼•è„šç¼–å·ä¸º1ï¼Œç¬¬1æ’ç¬¬1ä¸ªå¼•è„šç¼–å·ä¸º2ï¼Œä¾æ¬¡ç±»æ¨ã€‚åé¢åœ¨ç¼–å†™ä»£ç æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„ç¼–ç æ–¹å¼ä¹Ÿæ˜¯è¿™ç§ã€‚ ç¬¬2ç§ï¼šBCMç¼–ç BCMç¼–ç æ˜¯ä¸€ç§æ›´åº•å±‚çš„ç¼–ç æ–¹å¼ï¼Œä¸ç³»ç»Ÿä¸­ä¿¡é“ç¼–å·ç›¸å¯¹åº”ã€‚åœ¨ä½¿ç”¨ä¸€ä¸ªå¼•è„šæ—¶ï¼Œå¦‚æœä½¿ç”¨BCMç¼–ç ï¼Œé¦–å…ˆéœ€è¦æŸ¥æ‰¾ä¿¡é“å·å’Œç‰©ç†å¼•è„šç¼–å·ä¹‹é—´çš„å¯¹åº”è§„åˆ™ã€‚å¯¹äºä¸åŒçš„æ ‘è“æ´¾ç‰ˆæœ¬ï¼Œå¯èƒ½æ— æ³•å…¼å®¹ã€‚ä¸‹å›¾å¾ˆå¥½çš„æè¿°äº†å‡ ç§ç¼–ç çš„ä¿¡æ¯ï¼š ä¸Šé¢æˆ‘ä»¬æ‰©å±•æ¿ä¸ŠGPIOå¼•è„šçš„æ ‡æ³¨ï¼Œå®é™…ä¸Šä½¿ç”¨çš„å°±æ˜¯BCMç¼–ç ï¼Œè¿™ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬è¦ä½¿ç”¨æ ‘è“æ´¾GPIO2å’ŒGPIO3ä¸¤ä¸ªåŠŸèƒ½å¼•è„šï¼ŒæŒ‡å®šçš„æ˜¯ç‰©ç†å¼•è„šéœ€è¦æ˜¯13å’Œ15ã€‚ç›´æ¥å°†çº¿è¿æ¥åˆ°æ‰©å±•æ¿çš„G22å’ŒG27ä¸€è¡Œå³å¯ï¼Œéå¸¸ç›´è§‚ã€‚ ç¬¬3ç§ï¼šWiringPiç¼–ç WiringPiç¼–ç å¯¹åº”çš„å¼•è„šå·æ˜¯åœ¨wiringPIåº“ä¸­æ‰€ä½¿ç”¨çš„ï¼Œç½‘ä¸Šå¾ˆå®¹æ˜“æ‰¾åˆ°å…¶ç¼–ç çš„ç›¸å…³èµ„æ–™ï¼Œæœ¬ç³»åˆ—åšå®¢æˆ‘ä»¬ä¸ä¼šä½¿ç”¨åˆ°è¿™ä¸ªç¼–ç ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚ ç°åœ¨ï¼Œæˆ‘ä»¬æ€»ç»“ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨GPIOå¼•è„šã€‚ é¦–å…ˆåœ¨ä¸Šå›¾ä¸­æ‰¾åˆ°è‡ªå·±è¦ä½¿ç”¨çš„åŠŸèƒ½å¼•è„šï¼Œå¦‚GOIP.2å’ŒGPIO.3ä¸¤ä¸ªåŠŸèƒ½å¼•è„šã€‚ ä¹‹åæ‰¾åˆ°å…¶å¯¹åº”çš„ç‰©ç†å¼•è„šï¼Œå³13å’Œ15ã€‚ å¦‚æœä¸ä½¿ç”¨æ‰©å±•æ¿ï¼Œåˆ™ç›´æ¥æ¥çº¿ç‰©ç†å¼•è„šï¼Œå¦‚æœè¦ä½¿ç”¨ï¼Œåˆ™æ‰¾åˆ°å…¶å¯¹åº”çš„BCMç¼–ç ï¼Œ27å’Œ22ã€‚ ä½¿ç”¨æ‰©å±•æ¿ä¸Šçš„G27å’ŒG22å¼•è„šæ’æ§½ã€‚ ä¸‰ã€äº†è§£åŒè‰²LEDç¯å¹¶æ¥çº¿åŒè‰²LEDç¯æ„é€ éå¸¸ç®€å•ï¼Œé¡¾åæ€ä¹‰ï¼Œå…¶å¯ä»¥å‘å‡ºä¸¤ç§é¢œè‰²çš„å…‰ï¼Œå…¶å†…éƒ¨å°è£…äº†ä¸¤ä¸ªå‘å…‰äºŒæç®¡ã€‚åŒè‰²LEDåˆ†ä¸ºå…±é˜´å‹å’Œå…±é˜³å‹ï¼Œä¸¤ä¸ªå‘å…‰äºŒæç®¡å…±æœ‰3ä¸ªå¼•è„šï¼Œå› æ­¤å…¶ä¸­ä¸€ä¸ªå¼•è„šæ˜¯å…±ç”¨çš„ã€‚å¯¹äºå…±é˜´å‹çš„ï¼Œä¸¤ä¸ªå‘å…‰äºŒæç®¡çš„é˜´æè¿åœ¨ä¸€èµ·ã€‚å¯¹äºå…±é˜³å‹çš„ï¼Œä¸¤ä¸ªäºŒæç®¡çš„é˜³æè¿åœ¨ä¸€èµ·ã€‚æˆ‘ä»¬è¿™æ¬¡ä½¿ç”¨çš„å°†æ˜¯å…±é˜´æçš„åŒè‰²LEDç¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å…¶å†…éƒ¨å·¥ä½œåŸç†ç”µè·¯å›¾å¦‚ä¸‹ï¼Œä¹Ÿéå¸¸å¥½ç†è§£ï¼š å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå¯ä»¥çœ‹åˆ°ä¸¤ä¸ªäºŒæç®¡çš„é˜´ææ˜¯å…±ç”¨ï¼Œæˆ‘ä»¬å°†å…¶å…¬å…±å¼•è„šæ¥åœ°å³å¯ï¼Œä¸¤ä¸ªé˜³ææ˜¯ç”±ä¸¤ä¸ªå¼€å…³æ§åˆ¶ï¼Œå³LEDç­‰èŠ¯ç‰‡ä¸Šçš„å¦å¤–ä¸¤ä¸ªå¼•è„šï¼Œæˆ‘ä»¬åªéœ€è¦é€šè¿‡GPIOæ§åˆ¶å°†å¯¹åº”çš„å¼•è„šåŠ é«˜ç”µå¹³ï¼Œå³å¯å°†äºŒæç®¡ç‚¹äº®ã€‚ å¼€å§‹æ¥çº¿ æˆ‘ä»¬å·²ç»äº†è§£äº†åŒè‰²LEDç­‰çš„å·¥ä½œåŸç†ï¼Œå…¶æœ‰3ä¸ªå¼•è„šï¼Œæˆ‘ä»¬å°†å¼•è„šâ€œ-â€æ¥åœ°ï¼ŒSç«¯çš„å¼•è„šæ¥æ‰©å±•æ¿G22ç”¨æ¥æ§åˆ¶çº¢ç¯ï¼Œä¸­é—´çš„å¼•è„šæ¥G27ç”¨æ¥æ§åˆ¶ç»¿ç¯ã€‚æ¥çº¿æƒ…å†µå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ç°åœ¨ï¼Œå‡†å¤‡å·¥ä½œå¤§åŠŸå‘Šæˆï¼Œå¼€å§‹æˆ‘ä»¬çš„ç¼–ç å·¥ä½œå§ã€‚ å››ã€ç¼–å†™çº¢ç»¿ç¯æ§åˆ¶ç¨‹åºç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»åšäº†è¶³å¤Ÿå¤šçš„å‡†å¤‡å·¥ä½œï¼Œä½ ä¸€å®šå·²ç»è¿«ä¸åŠå¾…çš„æƒ³è¦å¼€å§‹ç¼–ç äº†ï¼Œæˆ‘ä»¬å…ˆæŠŠå®Œæ•´çš„ä»£ç å¥‰ä¸Šï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394959697#coding:utf-8# å¯¼å…¥UIæ¨¡å—import tkinter as Tkinter# å¯¼å…¥GPIOæ§åˆ¶è–„å—import RPi.GPIO as GPIO# å®šæ—¶å™¨æ¨¡å—import threading# ä¸»é¡µé¢è®¾ç½®top = Tkinter.Tk()top.geometry('500x300')top.title(\"åŒè‰²LEDç¯æ§åˆ¶å™¨\")l = Tkinter.Label(top, text='æ¬¢è¿ä½¿ç”¨åŒè‰²LEDç¯æ§åˆ¶å™¨', bg='green', font=('Arial', 18), width=30, height=2)l.pack()# å®šä¹‰å¼•è„špins = &#123;0:13,1:15&#125;# è®¾ç½®ä½¿ç”¨çš„å¼•è„šç¼–ç æ¨¡å¼GPIO.setmode(GPIO.BOARD)# è®¾ç½®éšè—è­¦å‘ŠGPIO.setwarnings(False)# åˆå§‹åŒ–ç‰©ç†å¼•è„š 13 å’Œ 15GPIO.setup(pins[0],GPIO.OUT)GPIO.setup(pins[1],GPIO.OUT)# å®šä¹‰å…¨å±€å­—æ®µ ç”¨æ¥å¤„ç†é—ªçƒåŠŸèƒ½# f:æ˜¯å¦é—ªçƒ l:ä¸‹æ¬¡ç‚¹äº®çº¢ç¯æˆ–ç»¿ç¯f = Falsel = False# æ§åˆ¶çº¢ç¯äº®def redClick(): global f f = False GPIO.output(pins[0],GPIO.HIGH) GPIO.output(pins[1],GPIO.LOW) # æ§åˆ¶ç»¿ç¯äº®def greenClick(): global f f = False GPIO.output(pins[0],GPIO.LOW) GPIO.output(pins[1],GPIO.HIGH)# é€€å‡ºç¨‹åºdef stopClick(): global f f = False GPIO.output(pins[0],GPIO.LOW) GPIO.output(pins[1],GPIO.LOW) GPIO.cleanup() exit()# å¾ªç¯é—ªçƒdef loop(): global f global timer global l if f == False: return timer = threading.Timer(2,loop) timer.start() if l: GPIO.output(pins[0],GPIO.HIGH) GPIO.output(pins[1],GPIO.LOW) else: GPIO.output(pins[0],GPIO.LOW) GPIO.output(pins[1],GPIO.HIGH) # è½¬æ¢ä¸‹æ¬¡é—ªçƒçš„é¢œè‰² l = not l# å®šä¹‰å…¨å±€å®šæ—¶å™¨timer = threading.Timer(2, loop)# å¼€å§‹è¿›è¡Œé—ªçƒdef flckerClick(): global f global timer f = True timer = threading.Timer(2,loop) timer.start()# UIä¸Šçš„æŒ‰é’®å¸ƒå±€redButton = Tkinter.Button(top, text=\"çº¢ç¯åœ\", height='3', command=redClick)redButton.pack()greenButton = Tkinter.Button(top, text=\"ç»¿ç¯è¡Œ\", height='3', command=greenClick)greenButton.pack()flckerButton = Tkinter.Button(top, text=\"é—ªçƒè¯·æ³¨æ„\", height='3', command=flckerClick)flckerButton.pack()stopButton = Tkinter.Button(top, text=\"å…³é—­\", height='3', command=stopClick)stopButton.pack()# è¿›å…¥æ¶ˆæ¯å¾ªç¯top.mainloop() åœ¨æ ‘è“æ´¾ä¸Šè¿è¡Œä¸Šé¢çš„ä»£ç ï¼Œä½ ç°åœ¨åº”è¯¥å·²ç»å¯ä»¥çµæ´»çš„æ§åˆ¶åŒè‰²LEDç¯çš„å¼€å…³å’Œé—ªçƒäº†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š æ¸©é¦¨æç¤ºï¼šå¦‚æœä½ ä½¿ç”¨çš„æ˜¯Python3.xç‰ˆæœ¬ï¼Œå¯èƒ½éœ€è¦ç”¨å¦‚ä¸‹çš„æ–¹å¼å¼•å…¥tkinterï¼š 1import Tkinter as Tkinter Tkinteræ˜¯Pythonå†…ç½®çš„ä¸€ä¸ªUIæ¡†æ¶ï¼Œæˆ‘ä»¬è¿™é‡Œä¸åšè¿‡å¤šä»‹ç»ï¼Œæˆ‘ä»¬å°†é‡ç‚¹æ”¾åœ¨RPi.GPIOæ¨¡å—çš„ä½¿ç”¨ã€‚ RPi.GPIOèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬æ–¹ä¾¿çš„æ§åˆ¶æ ‘è“æ´¾çš„GPIOå¼•è„šã€‚åœ¨è¿›è¡Œæ ‘è“æ´¾ç¼–ç¨‹æ—¶ï¼Œå¦‚æœä½¿ç”¨GPIOåº“ï¼Œé¦–å…ˆéœ€è¦è®¾ç½®è¦ä½¿ç”¨çš„ç¼–ç æ–¹å¼ï¼š 1GPIO.setmode(GPIO.BOARD) GPIO.BOARDå°†è®¾ç½®ä½¿ç”¨ç‰©ç†ç¼–ç æ¨¡å¼ï¼ŒGPIO.BCMå°†è®¾ç½®ä½¿ç”¨BCMç¼–ç æ¨¡å¼ã€‚ åœ¨ä½¿ç”¨æŸä¸ªå¼•è„šä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å¯¹å…¶è¿›è¡Œåˆå§‹åŒ–ï¼Œåˆå§‹åŒ–æ—¶ï¼Œå¯ä»¥å°†å¼•è„šè®¾ç½®æˆGPIO.OUTä¹Ÿå¯ä»¥è®¾ç½®ä¸ºGPIO.INï¼ŒOUTè¡¨ç¤ºæˆ‘ä»¬è¦å°†å…¶ä½œä¸ºè¾“å‡ºå¼•è„šä½¿ç”¨ï¼ŒINè¡¨ç¤ºæˆ‘ä»¬è¦å°†å…¶ä½œä¸ºè¾“å…¥å¼•è„šä½¿ç”¨ã€‚ æœ€åï¼Œå½“æˆ‘ä»¬åœæ­¢ä½¿ç”¨æ—¶ï¼Œè¦è®°å¾—è°ƒç”¨å¦‚ä¸‹æ–¹æ³•è¿›è¡Œèµ„æºæ¸…ç†ï¼š 1GPIO.cleanup(channel) äº”ã€ä¼‘æ¯ä¸€ä¸‹å¥½äº†ï¼Œç¬¬ä¸€ä¸ªç®€å•çš„æ ‘è“æ´¾å®è·µåˆ°æ­¤è¦å‘Šä¸€æ®µè½äº†ï¼Œæˆ‘ç›¸ä¿¡ä½ ä¸€å®šæœ‰äº›æ”¶è·ï¼Œå‘æŒ¥ä½ çš„åˆ›æ–°ä¸åŠ¨æ‰‹èƒ½åŠ›ï¼Œå°è¯•ç”¨æ ‘è“æ´¾åšæ›´å¤šæœ‰è¶£çš„äº‹æƒ…å§ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œæ‡‚çš„çƒ­çˆ±ï¼Œæ„¿æ„åˆ†äº«ï¼Œåšä¸ªæœ‹å‹ QQï¼š316045346","categories":[{"name":"Linux","slug":"Linux","permalink":"http://huishao.cc/categories/Linux/"}],"tags":[],"keywords":[{"name":"Linux","slug":"Linux","permalink":"http://huishao.cc/categories/Linux/"}]},{"title":"ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ1ï¼‰â€”â€”ç®€ä»‹ä¸ç¯å¢ƒæ­å»º","slug":"414ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ1ï¼‰â€”â€”ç®€ä»‹ä¸ç¯å¢ƒæ­å»º","date":"2021-07-02T16:00:00.000Z","updated":"2021-07-15T11:37:08.737Z","comments":true,"path":"2021/07/03/414ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ1ï¼‰â€”â€”ç®€ä»‹ä¸ç¯å¢ƒæ­å»º/","link":"","permalink":"http://huishao.cc/2021/07/03/414ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ1ï¼‰â€”â€”ç®€ä»‹ä¸ç¯å¢ƒæ­å»º/","excerpt":"","text":"ä¸€èµ·ç©è½¬æ ‘è“æ´¾ï¼ˆ1ï¼‰â€”â€”ç®€ä»‹ä¸ç¯å¢ƒæ­å»ºä¸€ã€å¼•å­æ ‘è“æ´¾å¼€å‘è®¾è®¡çš„åˆè¡·æ˜¯ä¸ºäº†å­¦ç”Ÿä»¬èƒ½å¤Ÿæ›´åŠ æ–¹ä¾¿çš„è¿›è¡Œç¼–ç¨‹å­¦ä¹ ï¼Œä½†å…¶ä¸€ç»å‘å¸ƒï¼Œå…¶å®é™…ä¸Šæ‰€å¾—åˆ°çš„åº”ç”¨è¦æ¯”è®¾è®¡ä¹‹åˆæ‰€é¢„æƒ³çš„å¹¿æ³›è®¸å¤šã€‚å…¶æœ¬è´¨æ˜¯ä¸€æ¬¾å°ºå¯¸åªæœ‰ä¿¡ç”¨å¡å¤§å°çš„å¾®å‹ç”µè„‘ï¼Œè™½ç„¶å…¶æ˜¯å¾®å‹ç”µè„‘ï¼Œä½†å…¶æ€§èƒ½ååˆ†å¼ºå¤§ï¼Œå¹¶ä¸”æ”¯æŒè¾“å‡ºéŸ³è§†é¢‘ï¼Œæ”¯æŒæ ‡å‡†USBå¤–è®¾ï¼Œä»¥åŠé›†æˆäº†è“ç‰™ç­‰é€šä¿¡èŠ¯ç‰‡ã€‚æˆ‘ä»¬å¯ä»¥åœ¨å°å¼ç”µè„‘ä¸Šè¿›è¡Œçš„å·¥ä½œï¼Œå‡ ä¹éƒ½å¯ä»¥åœ¨æ ‘è“æ´¾ä¸Šè¿›è¡Œã€‚å…¶éº»é›€è™½å°ï¼Œä½†äº”è„ä¿±å…¨ï¼Œä¸æ™®é€šå°å¼ç”µè„‘ä¸åŒçš„æ˜¯ï¼Œæ ‘è“æ´¾æš´éœ²äº†GPIOæ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥ååˆ†æ–¹ä¾¿çš„ä½¿ç”¨æ ‘è“æ´¾æ§åˆ¶å„å¼å„æ ·çš„å¤–è®¾å’Œä¼ æ„Ÿå™¨ï¼Œå¯ä»¥DIYå„ç§æœ‰è¶£çš„ç”µå­è®¾å¤‡ã€‚ æœ¬ç³»åˆ—åšå®¢æ˜¯ç¬”è€…åœ¨å·¥ä½œä¹‹ä½™ï¼Œåœ¨ç©æ ‘è“æ´¾è¿‡ç¨‹ä¸­è®°å½•çš„å­¦ä¹ è¿‡ç¨‹ä¸å¿ƒå¾—æ„Ÿæ‚Ÿï¼ŒåŒæ—¶å¸Œæœ›ä¸æœ‰åŒæ ·çˆ±å¥½çš„æœ‹å‹ä»¬åˆ†äº«ï¼Œä¸€èµ·å‘æŒ¥æƒ³è±¡ä¸åˆ›æ–°èƒ½åŠ›ï¼Œç©çš„å¼€å¿ƒï¼ŒåŒæ—¶å­¦ä¹ å·©å›ºæ›´å¤šåµŒå…¥å¼ï¼ŒLinuxä¸Pythonç›¸å…³çš„çŸ¥è¯†ã€‚ æ€»ä½“æ¥è¯´ï¼Œå¦‚æœä½ æ»¡è¶³å¦‚ä¸‹ä»»æ„ä¸€é¡¹ï¼Œé‚£ä¹ˆæœ¬ç³»åˆ—æ’­æ”¾å°†éå¸¸é€‚åˆä½ é˜…è¯»ï¼Œä¹ŸæœŸå¾…ä¸ä½ çš„äº¤æµï¼š æƒ³è¦å­¦ä¹ ç¼–ç¨‹æŠ€èƒ½çš„æœ‹å‹ã€‚ æƒ³è¦ç†Ÿæ‚‰Linuxï¼Œå­¦ä¹ Pythonè¯­è¨€çš„æœ‹å‹ã€‚ å¯¹æ ‘è“æ´¾æ„Ÿå…´è¶£ï¼Œä½†æ˜¯ä¸çŸ¥é“æ ‘è“æ´¾èƒ½å¤Ÿå¹²ä»€ä¹ˆçš„æœ‹å‹ã€‚ æœ‰ç¡¬ä»¶DIYæƒ³æ³•ï¼Œå´ä¸çŸ¥å¦‚ä½•å…¥é—¨çš„æœ‹å‹ã€‚ äºŒã€å¼€æœºä¹‹æ—…ç›®å‰ï¼Œæ ‘è“æ´¾ä¸»è¦åˆ†ä¸ºAå‹å’ŒBå‹ä¸¤ç§ï¼Œå…¶é…ç½®ç•¥æœ‰ä¸åŒï¼Œæ€»ä½“æ¥è¯´ï¼ŒAå‹USBæ¥å£è¾ƒå°‘ï¼Œæ— æœ‰çº¿ç½‘ç»œæ¥å£ï¼Œå†…å­˜è¾ƒå°ã€‚Bå‹æ‹¥æœ‰æ›´å¤šçš„USBæ’å£ï¼Œæ”¯æŒæœ‰çº¿ç½‘ç»œå†…å­˜å’ŒåŠŸç‡éƒ½æ›´é«˜ã€‚æ–°çš„æ ‘è“æ´¾æ–°å¢äº†B+ç‰ˆæœ¬ï¼Œå…¶åŠŸè€—æ›´ä½è€Œæ€§èƒ½æ›´å¼ºï¼Œå¹¶ä¸”å°†é€šç”¨çš„è¾“å…¥è¾“å‡ºå¼•è„šå¢åŠ åˆ°40ä¸ªã€‚ è¦å¼€å¯æ ‘è“æ´¾çš„æ¢ç´¢ä¹‹æ—…ï¼Œé¦–å…ˆä½ éœ€è¦æ‹¥æœ‰ä¸€äº›ç¡¬ä»¶è®¾å¤‡ï¼Œå¯ä»¥åœ¨å®˜ç½‘ä¹°åˆ°æœ€æ–°ç‰ˆæœ¬çš„æ ‘è“æ´¾æ¿å­ï¼Œå®˜ç½‘åœ°å€å¦‚ä¸‹ï¼š https://www.raspberrypi.org/ å½“ç„¶ä½ ä¹Ÿå¯ä»¥æ–¹ä¾¿çš„åœ¨ç”µå•†ç½‘ç«™ä¸Šä¹°åˆ°æ ‘è“æ´¾ç›¸å…³çš„å¥—è£…ï¼Œæˆ‘å»ºè®®å¯¹äºåˆå­¦è€…ï¼Œå°½å¯èƒ½çš„æé½å¦‚ä¸‹è®¾å¤‡ï¼š ç‰ˆæœ¬å°½é‡æ–°çš„æ ‘è“æ´¾æ¿å­ å†…å­˜å¤§äº8Gçš„SDå¡ USBé¼ æ ‡ USBé”®ç›˜ USB-HDMIæ¥å£çš„æ˜¾ç¤ºå™¨ USBæ— çº¿ç½‘å¡ å¦‚ä¸Šåˆ—å‡ºçš„6é¡¹ä¸­ï¼Œæ ‘è“æ´¾æ¿å­å’ŒSDå†…å­˜å¡æ˜¯å¿…é¡»çš„ï¼Œæ¿å­æ˜¯æ ‘è“æ´¾çš„ä¸»æœºï¼ŒSDå¡å‡ºäº†ä¸ºæ ‘è“æ´¾æä¾›å¤–å­˜èƒ½åŠ›å¤–ï¼Œè¿˜æ˜¯æ ‘è“æ´¾çš„ç³»ç»Ÿç›˜ã€‚å4é¡¹ä¸æ˜¯å¿…é¡»çš„ï¼Œä½†æ˜¯å¯¹äºæ–°æ‰‹æ¥è¯´ï¼Œæ‹¥æœ‰æ˜¾ç¤ºå™¨å’Œé”®é¼ å¤–è®¾ï¼Œå¯ä»¥æå¤§çš„é™ä½æ ‘è“æ´¾é…ç½®çš„éš¾åº¦ï¼Œé¿å…å¼•å…¥è¿‡é«˜çš„å…¥é—¨é—¨æ§›å¯¼è‡´å¤§å®¶ä¸§å¤±å­¦ä¹ ç¼–ç¨‹çš„å…´è¶£ï¼Œå¯¹äºæ˜¾ç¤ºå™¨ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¸éœ€ä¸“é—¨å‡†å¤‡ï¼Œåªéœ€è¦åœ¨ç¯å¢ƒé…ç½®æ—¶å€Ÿç”¨å°å¼æœºçš„æ˜¾ç¤ºå™¨æ¥åšä¸€äº›é…ç½®æ“ä½œå³å¯ï¼Œåç»­åªè¦æ ‘è“æ´¾å’Œå°å¼ç”µè„‘åœ¨åŒä¸€ç½‘ç»œä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å°å¼æœºæ¥è¿œç¨‹ç™»å½•æ ‘è“æ´¾è¿›è¡Œæ“ä½œï¼Œå°å¼æœºä¸æ ‘è“æ´¾å¹¶ä¸éœ€è¦ä¸¤å°æ˜¾ç¤ºå™¨ã€‚USBæ— é™ç½‘å¡ä¹Ÿæ˜¯ååˆ†å¿…è¦çš„ï¼Œæ ‘è“æ´¾çš„ä¸€å¤§ç‰¹ç‚¹æ˜¯å°å·§ä¾¿äºæºå¸¦ï¼Œå¦‚æœå…¶å—åˆ°ç½‘çº¿çš„é™åˆ¶å°†ä¼šå¤§å¤§å¤±å»å…¶ä¾¿æºæ€§ã€‚ ç¡¬ä»¶å‡†å¤‡å¥½åï¼Œé¦–å…ˆéœ€è¦å‡†å¤‡æ ‘è“æ´¾çš„Linuxç³»ç»Ÿï¼Œå…³äºLinuxç³»ç»Ÿçš„ç›¸å…³å†…å®¹ï¼Œç½‘ä¸Šçš„èµ„æ–™å¾ˆå¤šï¼Œè¿™é‡Œå°±ä¸å†è¿‡å¤šçš„èµ˜è¿°ï¼Œæˆ‘ä»¬åªéœ€è¦äº†è§£å…¶æ˜¯ä¸€ä¸ªå¼€æºçš„æ˜“å®šåˆ¶çš„æ“ä½œç³»ç»Ÿå³å¯ã€‚å¯¹äºæ ‘è“æ´¾æ¥è¯´ï¼Œæœ‰ä¸“ç”¨çš„Linuxç‰ˆæœ¬ï¼Œå…¶ä¹Ÿè¢«ç§°ä¸ºRaspberry Pi OSã€‚ é¦–å…ˆï¼Œåœ¨å¦‚ä¸‹å®˜æ–¹ç½‘ç«™å¯ä»¥ä¸‹è½½åˆ°æ­¤ç³»ç»Ÿçš„å®‰è£…å·¥å…·ï¼š https://www.raspberrypi.org/software/ å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬åœ¨ç°åœ¨æ—¶ï¼Œéœ€è¦é€‰æ‹©å½“å‰æ‰€ä½¿ç”¨ç”µè„‘çš„ç³»ç»Ÿç‰ˆæœ¬ï¼š ä¸‹è½½å®Œæˆåï¼Œå®‰è£…å¹¶æ‰“å¼€ä¸‹è½½çš„è½¯ä»¶ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š æˆ‘ä»¬å°†å‡†å¤‡å¥½çš„SDå¡æ’å…¥ç”µè„‘è®¾å¤‡ï¼Œä¹‹ååœ¨æ­¤è½¯ä»¶ä¸­é€‰ä¸­æ­¤SDå¡ï¼Œå¹¶é€‰æ‹©è¦å®‰è£…çš„æ“ä½œç³»ç»Ÿï¼Œç‚¹å‡»çƒ§å½•å³å¯ä¸€é”®å®Œæˆç³»ç»Ÿçš„å®‰è£…ï¼Œå¯é€‰æ‹©çš„æ“ä½œç³»ç»Ÿæœ‰å¾ˆå¤šï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€è¦æ¥é€‰æ‹©ï¼Œä¸€èˆ¬é€‰æ‹©æ¨èçš„å³å¯ï¼Œå¦‚ä¸‹å›¾ï¼š çƒ§å½•å®Œæˆåï¼Œæˆ‘ä»¬å°±å‡†å¤‡å¥½äº†æ ‘è“æ´¾çš„ç³»ç»Ÿç›˜ï¼Œéœ€è¦æ³¨æ„ï¼Œæ¯æ¬¡çƒ§å½•éƒ½ä¼šå°†SDå¡æ ¼å¼åŒ–ï¼Œå› æ­¤åœ¨çƒ§å½•ä¹‹å‰è¦å¦¥å–„å¤‡ä»½ä½ çš„æ•°æ®ã€‚ ä¸‹é¢å¯ä»¥å°†æ ‘è“æ´¾æ’ä¸ŠSDå¡ï¼Œæ¥é€šç”µæºè¿›è¡Œå¼€æœºï¼Œé€šè¿‡ç®€å•çš„ç³»ç»Ÿå¼•å¯¼ä¸é…ç½®ï¼Œå¦‚æœæœ‰æ¥æ˜¾ç¤ºè®¾å¤‡ï¼Œä½ åº”è¯¥å·²ç»å¯ä»¥çœ‹åˆ°æ“ä½œç³»ç»Ÿçš„æ¡Œé¢äº†ï¼Œå¦‚ä¸‹ï¼š è¿™ä¸ªä¸ºæ ‘è“æ´¾ä¸“é—¨å®šåˆ¶çš„Linuxç³»ç»Ÿé»˜è®¤å®‰è£…äº†ä¸€äº›ç¼–ç¨‹å­¦ä¹ è½¯ä»¶ï¼ŒJavaï¼ŒPythonä»¥åŠå°‘å„¿ç¼–ç¨‹çƒ­é—¨çš„Scratchç­‰ã€‚ ä¸‰ã€è¿œç¨‹ç™»å½•æ ‘è“æ´¾åœ¨æ“ä½œæ ‘è“æ´¾æ—¶ï¼Œæ›´å¤šæ—¶å€™æˆ‘ä»¬ä¼šé‡‡ç”¨åŸç”Ÿç™»å½•çš„æ–¹å¼è¿›è¡Œæ§åˆ¶ï¼Œé€šè¿‡sshæˆ‘ä»¬å¯ä»¥è¿œç¨‹ç™»å½•æ ‘è“æ´¾çš„æ¡Œé¢ç³»ç»Ÿï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç»ˆç«¯ç™»å½•åˆ°Linuxçš„ç»ˆç«¯æ¨¡å¼è¿›è¡Œæ“ä½œã€‚é¦–å…ˆï¼Œåœ¨æ ‘è“æ´¾æœºä¸Šå¼€å¯sshå’Œè¿œç¨‹æ¡Œé¢æƒé™ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œé¦–å…ˆæ‰“å¼€æ ‘è“æ´¾é…ç½®å·¥å…·ï¼š å°†Interfacesé…ç½®é¡¹ä¸­çš„SSHå’ŒVNCä¿®æ”¹ä¸ºEnableï¼Œå¦‚ä¸‹å›¾ï¼š ä¸‹é¢ï¼Œæ‰“å¼€æ ‘è“æ´¾è®¾å¤‡ä¸Šçš„ç»ˆç«¯åº”ç”¨ï¼Œè¾“å…¥å¦‚ä¸‹æŒ‡ä»¤æŸ¥çœ‹å…¶ç½‘ç»œipåœ°å€ï¼š 1ifconfig ä¹‹åæˆ‘ä»¬éœ€è¦å°†è¾“å‡ºçš„ipåœ°å€ä¿¡æ¯è®°ä½ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š éœ€è¦æ³¨æ„ï¼Œç¬”è€…çš„æ ‘è“æ´¾æ˜¯è¿æ¥çš„è·¯ç”±å™¨çš„æ— çº¿ç½‘ç»œï¼Œå› æ­¤å…¶ipæ˜¯å†…ç½‘çš„ï¼Œå¦‚æœè¦è¿œç¨‹ç™»å½•ï¼Œéœ€è¦å†ç»Ÿä¸€å†…ç½‘ä¸­ï¼Œè¿™é‡Œçš„ipåœ°å€æ˜¯192.168.1.27ã€‚ ä¹‹åï¼Œåœ¨å…¶ä»–è®¾å¤‡ä¸Šæ‰“å¼€ç»ˆç«¯(Macè®¾å¤‡)æˆ–å‘½ä»¤è¡Œ(Windowsè®¾å¤‡)ï¼Œè¾“å…¥å¦‚ä¸‹æŒ‡ä»¤å³å¯è¿œç¨‹ç™»å½•æ ‘è“æ´¾ï¼š 1ssh pi@192.168.1.27 æ ‘è“æ´¾é»˜è®¤çš„ç³»ç»Ÿç”¨æˆ·åä¸ºpiï¼Œç™»å½•å¯†ç ä¸ºraspberryã€‚ç™»å½•æˆåŠŸåï¼Œæˆ‘ä»¬å³å¯ä»¥åœ¨ç»ˆç«¯è¿›è¡Œæ ‘è“æ´¾ä¸ŠLinuxç³»ç»Ÿçš„ç›¸å…³æ“ä½œã€‚ å¯¹äºåˆå­¦è€…æ¥è¯´ï¼Œä½¿ç”¨å‘½ä»¤æ“ä½œLinuxç³»ç»Ÿè¿˜æ˜¯ç•¥æ˜¾å›°éš¾ï¼Œå› æ­¤å¦‚æœå¯ä»¥ç›´æ¥é€šè¿‡GUIæ¡Œé¢æ¥è¿œç¨‹ä½¿ç”¨æ ‘è“æ´¾å°±æ›´åŠ æ–¹ä¾¿äº†ï¼Œæˆ‘ä»¬å®‰è£…çš„æ ‘è“æ´¾ç³»ç»Ÿé»˜è®¤ä¹Ÿæ˜¯æ”¯æŒçš„ï¼Œä¸Šé¢æˆ‘ä»¬æ‰“å¼€çš„VNCæƒé™å°±æ˜¯ä¸ºäº†è¿›è¡Œè¿œç¨‹æ¡Œé¢æ§åˆ¶ï¼Œé¦–å…ˆåœ¨å°å¼æˆ–ç¬”è®°æœ¬ç”µè„‘ä¸Šå®‰è£…VNC è½¯ä»¶ï¼Œåœ°å€å¦‚ä¸‹ï¼š https://www.realvnc.com/en/connect/download/viewer/ ä¸‹è½½å¯¹åº”ç³»ç»Ÿçš„ç‰ˆæœ¬å³å¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¸‹è½½å®‰è£…å®Œæˆåï¼Œæ‰“å¼€æ­¤è½¯ä»¶ï¼Œæ–°å»ºä¸€ä¸ªè¿æ¥ï¼Œè¾“å…¥æ ‘è“æ´¾çš„ipåœ°å€ï¼Œç”¨æˆ·åå’Œå¯†ç ï¼Œå³å¯ç™»å½•è¿œç¨‹æ¡Œé¢ï¼Œå¦‚ä¸‹å›¾ï¼š å®Œæˆåï¼Œè¿œç¨‹æ“ä½œæ ‘è“æ´¾å°±å˜å¾—éå¸¸è½»æ¾äº†ï¼Œæˆ‘ä»¬å¯ä»¥åƒä½¿ç”¨æ™®é€šå°å¼ç”µè„‘ä¸€æ ·ä½¿ç”¨æ ‘è“æ´¾ï¼Œç¬”è€…å¹³æ—¶ä½¿ç”¨çš„æ˜¯Macç”µè„‘ï¼Œè¿œç¨‹æ“ä½œæ ‘è“æ´¾æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¥½äº†ï¼Œç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†æ ‘è“æ´¾çš„åŸºæœ¬é…ç½®å·¥ä½œï¼Œåé¢å°±çœ‹æˆ‘ä»¬çš„æƒ³è±¡åŠ›ä¸åˆ›é€ åŠ›ï¼Œæ€ä¹ˆæ¥ç©è½¬å®ƒäº†ï¼ ä¸“æ³¨æŠ€æœ¯ï¼Œæ‡‚çš„çƒ­çˆ±ï¼Œæ„¿æ„åˆ†äº«ï¼Œåšä¸ªæœ‹å‹ QQï¼š316045346","categories":[{"name":"Linux","slug":"Linux","permalink":"http://huishao.cc/categories/Linux/"}],"tags":[],"keywords":[{"name":"Linux","slug":"Linux","permalink":"http://huishao.cc/categories/Linux/"}]},{"title":"iOSç ”ä¹ è®°â€”â€”è®°MJExtensionå¤šçº¿ç¨‹Crashçš„è§£å†³å†ç¨‹","slug":"413[iOSç ”ä¹ è®°]â€”â€”è®°MJExtensionå¤šçº¿ç¨‹Crashçš„è§£å†³å†ç¨‹","date":"2021-04-01T16:00:00.000Z","updated":"2021-07-15T11:46:39.989Z","comments":true,"path":"2021/04/02/413[iOSç ”ä¹ è®°]â€”â€”è®°MJExtensionå¤šçº¿ç¨‹Crashçš„è§£å†³å†ç¨‹/","link":"","permalink":"http://huishao.cc/2021/04/02/413[iOSç ”ä¹ è®°]â€”â€”è®°MJExtensionå¤šçº¿ç¨‹Crashçš„è§£å†³å†ç¨‹/","excerpt":"","text":"[iOSç ”ä¹ è®°]â€”â€”è®°MJExtensionå¤šçº¿ç¨‹Crashçš„è§£å†³å†ç¨‹éš¾ç¼ çš„Crashé—®é¢˜æœ¬ç¯‡åšå®¢çš„èµ·æºæ˜¯ç”±äºæ”¶é›†åˆ°çº¿ä¸Šç”¨æˆ·äº§ç”Ÿçš„ä¸€äº›éš¾ç¼ çš„Crashé—®é¢˜ï¼Œé€šè¿‡å †æ ˆä¿¡æ¯è§‚å¯Ÿï¼ŒCrashçš„å †æ ˆä¿¡æ¯ä¸»è¦æœ‰ä¸¤ç±»ï¼š ä¸€ç±»å¦‚ä¸‹ï¼š 1234561 MJExtensionDemo 0x000000010903a5e0 main + 0,2 MJExtension 0x000000010923f00d +[NSObject(MJClass) mj_setupBlockReturnValue:key:] + 333,3 MJExtension 0x000000010923ec86 +[NSObject(MJClass) mj_setupIgnoredPropertyNames:] + 70,4 MJExtensionTests 0x00000001095ebe1b -[MJExtensionTests testNestedModelArray] + 1467,5 CoreFoundation 0x00007fff204272fc __invoking___ + 140,6 CoreFoundation 0x00007fff204247b6 -[NSInvocation invoke] + 303, ä¸€ç±»å¦‚ä¸‹: 12345671 MJExtensionDemo 0x000000010729e5e0 main + 0,2 MJExtension 0x00000001074a3255 +[NSObject(MJClass) mj_totalObjectsWithSelector:key:] + 453,3 MJExtension 0x00000001074a2ccf +[NSObject(MJClass) mj_totalIgnoredPropertyNames] + 47,4 MJExtension 0x00000001074a3dcb -[NSObject(MJKeyValue) mj_setKeyValues:context:] + 443,5 MJExtension 0x00000001074a3bdf -[NSObject(MJKeyValue) mj_setKeyValues:] + 79,6 MJExtension 0x00000001074a6536 +[NSObject(MJKeyValue) mj_objectWithKeyValues:context:] + 710,7 MJExtension 0x00000001074a623f +[NSObject(MJKeyValue) mj_objectWithKeyValues:] + 79, æ­¤æ—¶ä½¿ç”¨çš„MJExtensionç‰ˆæœ¬ä¸º3.2.4ï¼Œè™½ç„¶å †æ ˆä¿¡æ¯æ¯”è¾ƒæ¸…æ¥šï¼Œç„¶è€Œå…¶æœ€åçš„è°ƒç”¨éƒ½æ˜¯åœ¨MJExtensionå†…éƒ¨ï¼Œä¸”å‘ç”Ÿæ­¤Crashçš„å‡ ç‡éå¸¸å°(çº¦ä¸ºä¸‡åˆ†ä¹‹å‡ )ï¼Œå®šä½å’Œè§£å†³æ­¤Crashå¹¶ä¸å®¹æ˜“ã€‚ é€šè¿‡åˆ†æï¼Œå‘ç°æ­¤Crashæœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š è°ƒç”¨æ ˆä¸­æœ€ç»ˆå®šä½åˆ°çš„å‡½æ•°éƒ½åœ¨MJExtensionè¿›è¡ŒJSONè½¬å¯¹è±¡æˆ–æ¨¡å‹setupé…ç½®æ—¶ã€‚ åªæœ‰åœ¨å¤šçº¿ç¨‹ä½¿ç”¨MJExtensionæ–¹æ³•æ—¶ä¼šå‡ºç°æ­¤Crashã€‚ æ˜¯Appåœ¨æŸæ¬¡ç‰ˆæœ¬æ›´æ–°åæ‰å¼€å§‹å‡ºç°æ­¤ç±»Crashã€‚ é€šè¿‡åˆ†æä¸Šé¢çš„ç‰¹ç‚¹ï¼Œå¯ä»¥æ¨ç†å‡ºï¼š é—®é¢˜ä¸€å®šå‡ºåœ¨mj_objectWithKeyValuesæ–¹æ³•æˆ–mj_setupç›¸å…³æ–¹æ³•ä¸­ã€‚ æ­¤é—®é¢˜ä¸€å®šæ˜¯ç”±äºä¸šåŠ¡çš„æŸç§ä½¿ç”¨æ–¹å¼æˆ–åœºæ™¯çš„æ”¹å˜è§¦å‘çš„ã€‚ ä¸€å®šå’Œå¤šçº¿ç¨‹ç›¸å…³ï¼Œæ¨æµ‹å’Œé”å¯èƒ½ç›¸å…³ã€‚ é—®é¢˜çš„å®šä½ä¸å¤ç°å¯¹äºiOSç«¯å¼€å‘ï¼Œå®šä½å’Œè§£å†³Crashæ¯•ç«Ÿä¸¤ä¸ªæµç¨‹ï¼Œé¦–å…ˆæ˜¯æ ¹æ®çº¿ç´¢æ¥åˆ†æå’Œå®šä½é—®é¢˜ï¼Œå¾—åˆ°ä¸€ä¸ªå¤§æ¦‚çš„çŒœæƒ³ï¼Œä¹‹åæŒ‰ç…§è‡ªå·±çš„çŒœæƒ³å»æä¾›å¤–éƒ¨æ¡ä»¶ï¼Œæ¥å°è¯•å¤ç°é—®é¢˜ï¼Œå¦‚æœé—®é¢˜èƒ½å¤ŸæˆåŠŸå¤ç°å¹¶å¤åŸä¸çº¿ç¨‹é—®é¢˜ç›¸ä¼¼çš„å †æ ˆç°åœºï¼Œåˆ™åŸºæœ¬å®Œæˆäº†90%çš„å·¥ä½œï¼Œå‰©ä¸‹çš„10%æ‰æ˜¯ä¿®å¤æ­¤é—®é¢˜ã€‚ é¦–å…ˆï¼Œæ ¹æ®å‰é¢æˆ‘ä»¬å¯¹é—®é¢˜çš„åˆ†æå’Œæ¨ç†ï¼Œå¯ä»¥ä»mj\\_objectWithKeyValueså’Œmj\\_setupæ–¹æ³•è¿›è¡Œåˆ‡å…¥ï¼Œé€šè¿‡å¯¹MJExtensionä»£ç çš„Reviewï¼Œå¯ä»¥å‘ç°è¿™äº›æ–¹æ³•ä¸­æœ‰ä¸€ä¸ªå®ä½¿ç”¨çš„éå¸¸é¢‘ç¹ï¼Œåæ¥ä¹Ÿè¯æ˜é—®é¢˜ç¡®å®å‡ºåœ¨è¿™ä¸ªå®çš„å®šä¹‰ä¸Šï¼š è¿™å‡ ä¸ªå®çš„å®šä¹‰å¦‚ä¸‹ï¼š 123456789101112131415161718#ifndef MJ_LOCK#define MJ_LOCK(lock) dispatch_semaphore_wait(lock, DISPATCH_TIME_FOREVER);#endif#ifndef MJ_UNLOCK#define MJ_UNLOCK(lock) dispatch_semaphore_signal(lock);#endif// ä¿¡å·é‡#define MJExtensionSemaphoreCreate \\static dispatch_semaphore_t signalSemaphore; \\static dispatch_once_t onceTokenSemaphore; \\dispatch_once(&amp;onceTokenSemaphore, ^&#123; \\ signalSemaphore = dispatch_semaphore_create(1); \\&#125;);#define MJExtensionSemaphoreWait MJ_LOCK(signalSemaphore)#define MJExtensionSemaphoreSignal MJ_UNLOCK(signalSemaphore) å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªå®çš„æœ€ç»ˆä½¿ç”¨æ–¹å¼æ˜¯é€šè¿‡ä¿¡å·é‡æ¥å®ç°é”é€»è¾‘ã€‚é—®é¢˜å‡ºåœ¨staticå’Œå®å®šä¹‰æœ¬èº«ï¼Œå®å®šä¹‰æ˜¯åšç®€å•çš„æ›¿æ¢ï¼Œå› æ­¤åœ¨å®é™…ä½¿ç”¨æ—¶ï¼Œdispatch_semaphore_tä¿¡å·é‡å˜é‡è¢«å®šä¹‰æˆäº†å±€éƒ¨é™æ€å˜é‡ï¼Œå±€éƒ¨é™æ€ å˜é‡æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼šå…¶è¢«åˆ›å»ºåä¼šè¢«æ”¾å…¥å…¨å±€æ•°æ®åŒºï¼Œä½†æ˜¯å…¶å—å‡½æ•°ä½œç”¨åŸŸçš„æ§åˆ¶ï¼Œå³åˆ›å»ºåä¸ä¼šé”€æ¯ï¼Œå‡½æ•°å†…æ°¸è¿œå¯ç”¨ï¼Œä½†æ˜¯å¯¹å‡½æ•°å¤–æ¥è¯´æ˜¯éšè—çš„ã€‚å¦‚æœåœ¨ä¸åŒçš„å‡½æ•°ä¸­ä½¿ç”¨äº†ç›¸åŒåç§°çš„é™æ€å±€éƒ¨å˜é‡ï¼ŒçœŸæ­£æ”¾å…¥å…¨å±€æ•°æ®åŒºçš„å®é™…ä¸Šæ˜¯å¤šä¸ªä¸åŒçš„å˜é‡ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡æŸ¥çœ‹Cæ–‡ä»¶ç¼–è¯‘åçš„.oå¯æ‰§è¡Œæ–‡ä»¶æ¥éªŒè¯å±€éƒ¨é™æ€å˜é‡çš„è¿™ä¸€ç‰¹ç‚¹ï¼š æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š 1234567891011&gt; #include &lt;stdio.h&gt;&gt; &gt; int main(int argc, const char * argv[]) &#123;&gt; static char *string = \"hello\";&gt; return 0;&gt; &#125;&gt; &gt; void func1() &#123;&gt; static char *string = \"world\";&gt; &#125;&gt; æŸ¥çœ‹.oæ–‡ä»¶çš„å¸ƒå±€ä¿¡æ¯å¦‚ä¸‹ï¼š å¯ä»¥çœ‹åˆ°ï¼Œå®é™…å­˜å‚¨çš„é™æ€å˜é‡åéƒ½è¢«åŠ ä¸Šäº†å‡½æ•°å‰ç¼€ã€‚ åˆ°æ­¤ï¼Œæˆ‘ä»¬åŸºæœ¬å°†é—®é¢˜å®šä½åˆ°äº†ï¼Œå½“å¤šçº¿ç¨‹å¯¹MJExtensionä¸­çš„å¤šä¸ªä¸åŒçš„å‡½æ•°è¿›è¡Œè°ƒç”¨æ—¶ï¼Œå¦‚æœè¿™äº›å‡½æ•°ä¸­éƒ½æœ‰æ­¤åŠ é”é€»è¾‘ï¼Œå®é™…ä¸Šè¿™ä¸ªé”é€»è¾‘å¹¶æ²¡æœ‰ç”Ÿæ•ˆï¼Œä¼šäº§ç”Ÿå¤šçº¿ç¨‹æ•°æ®è¯»å†™Crashã€‚è¦å¤ç°è¿™ä¸ªåœºæ™¯å°±éå¸¸ç®€å•äº†ï¼š 12345678910dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^&#123; for (int i = 0; i &lt; 1000; i++) &#123; MJStatusResult *result = [MJStatusResult mj_objectWithKeyValues:dict]; &#125;&#125;);for (int i = 0; i &lt; 1000; i++) &#123; [MJStatus mj_setupIgnoredPropertyNames:^NSArray *&#123; return @[@\"name\"]; &#125;];&#125; é€šè¿‡åœºæ™¯å¤ç°ï¼ŒåŸºæœ¬å¯ä»¥å®šä½æ­¤é—®é¢˜åŸå› ã€‚ å‡ ä¸ªç–‘é—®çš„è§£ç­”1. äº§ç”Ÿæ­¤Crashçš„æ ¸å¿ƒåŸç†å¤šçº¿ç¨‹é”å¤±æ•ˆå¯¼è‡´çš„å¤šçº¿ç¨‹è¯»å†™å¼‚å¸¸ã€‚ 2.ä¸ºä½•ç‰ˆæœ¬æ›´æ–°åä¼šå‡ºç°éœ€è¦ä»ä¸šåŠ¡ä½¿ç”¨ä¸Šæ¥åˆ†æï¼Œä¹‹å‰çš„ç‰ˆæœ¬ç±»ä¼¼mj_setupç›¸å…³æ–¹æ³•çš„è°ƒç”¨ä¼šæ”¾å…¥ç±»çš„+loadæ–¹æ³•ä¸­ï¼Œè¿™ä¸ªåœ¨mainå‡½æ•°è°ƒç”¨ä¹‹å‰ï¼Œæ‰€æœ‰ç±»çš„è§£æé…ç½®éƒ½å·²å®Œæˆï¼ŒåŸºæœ¬ä¸ä¼šå‡ºç°å¤šçº¿ç¨‹é—®é¢˜ï¼Œæ–°ç‰ˆæœ¬åšäº†å†·å¯åŠ¨çš„ä¼˜åŒ–ï¼Œå°†mj_setupç›¸å…³æ–¹æ³•æ”¾å…¥äº†+(void)initializeæ–¹æ³•ä¸­ï¼Œä½¿å¾—å¤šçº¿ç¨‹é—®é¢˜è¢«è§¦å‘çš„æ¦‚ç‡å¤§å¤§å¢åŠ äº†ã€‚ MJExtensionåç»­ç‰ˆæœ¬æˆªæ­¢åˆ°æœ¬ç¯‡åšå®¢ç¼–å†™æ—¶é—´ï¼ŒMJExtensionæœ€æ–°ç‰ˆæœ¬3.2.5å·²ç»å¤„ç†äº†è¿™ä¸ªé”é—®é¢˜çš„Bugï¼Œå…¶ä¿®å¤æ–¹å¼æ˜¯å°†staticä¿®æ”¹ä¸ºäº†externï¼Œä½¿è¿™ä¸ªä¿¡å·é‡å˜é‡è¢«å£°æ˜ä¸ºäº†ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œå¦‚ä¸‹ï¼š 1234567891011121314151617181920#ifndef MJ_LOCK#define MJ_LOCK(lock) dispatch_semaphore_wait(lock, DISPATCH_TIME_FOREVER);#endif#ifndef MJ_UNLOCK#define MJ_UNLOCK(lock) dispatch_semaphore_signal(lock);#endif// ä¿¡å·é‡#define MJExtensionSemaphoreCreate \\extern dispatch_semaphore_t mje_signalSemaphore; \\extern dispatch_once_t mje_onceTokenSemaphore; \\dispatch_once(&amp;mje_onceTokenSemaphore, ^&#123; \\ mje_signalSemaphore = dispatch_semaphore_create(1); \\&#125;);// .mæ–‡ä»¶ä¸­dispatch_semaphore_t mje_signalSemaphore;dispatch_once_t mje_onceTokenSemaphore; ä¿®æ”¹åçš„ä»£ç ä¿è¯äº†é”çš„å”¯ä¸€æ€§ã€‚ å»ºè®®ä½¿ç”¨MJExtensionåº“æ—¶ï¼Œå¦‚æœéœ€è¦è¿›è¡Œè§£æé…ç½®ï¼Œä¼˜å…ˆä½¿ç”¨å¤å†™ç›¸å…³é…ç½®+æ–¹æ³•æ¥å®ç°ï¼Œä¾‹å¦‚ï¼š 123456789101112131415// ä¸å»ºè®®çš„ä½¿ç”¨æ–¹å¼+ (void)initialize &#123; [self mj_setupObjectClassInArray:^NSDictionary *&#123; return @&#123; @\"nicknames\" : MJStatus.class &#125;; &#125;];&#125;// å»ºè®®çš„ä½¿ç”¨æ–¹å¼+ (NSDictionary *)mj_objectClassInArray &#123; return @&#123; @\"nicknames\" : @\"MJStatus\" &#125;;&#125; å¹¶ä¸”ï¼Œåœ¨é…ç½®ç±»å‹æ—¶ï¼Œå°½é‡ä½¿ç”¨NSStringè€Œä¸è¦ä½¿ç”¨Classï¼Œé¿å…ç±»è¿‡æ—©çš„è¢«åŠ è½½ã€‚","categories":[{"name":"ç–‘éš¾æ‚ç—‡","slug":"ç–‘éš¾æ‚ç—‡","permalink":"http://huishao.cc/categories/ç–‘éš¾æ‚ç—‡/"}],"tags":[],"keywords":[{"name":"ç–‘éš¾æ‚ç—‡","slug":"ç–‘éš¾æ‚ç—‡","permalink":"http://huishao.cc/categories/ç–‘éš¾æ‚ç—‡/"}]},{"title":"iOSåˆçº§æ•™ç¨‹ä¹‹ä¸‰:Crashåˆ†æå®è·µ","slug":"412[iOSåˆçº§æ•™ç¨‹ä¹‹ä¸‰]Crashåˆ†æå®è·µ","date":"2021-03-22T16:00:00.000Z","updated":"2021-07-15T11:45:55.611Z","comments":true,"path":"2021/03/23/412[iOSåˆçº§æ•™ç¨‹ä¹‹ä¸‰]Crashåˆ†æå®è·µ/","link":"","permalink":"http://huishao.cc/2021/03/23/412[iOSåˆçº§æ•™ç¨‹ä¹‹ä¸‰]Crashåˆ†æå®è·µ/","excerpt":"","text":"[iOSåˆçº§æ•™ç¨‹ä¹‹ä¸‰]Crashåˆ†æå®è·µä¸€ã€å¼•è¨€Crashåˆ†æä¸æ²»ç†æ˜¯ç§»åŠ¨ç«¯å¼€å‘äººå‘˜çš„å¿…å¤‡æŠ€èƒ½ï¼ŒCrashç›¸å…³æ•°æ®ä¹Ÿæ˜¯è¡¡é‡åº”ç”¨ç¨‹åºè´¨é‡çš„é‡è¦æŒ‡æ ‡ã€‚æœ¬ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬å°†è®¨è®ºåœ¨iOSå¼€å‘ä¸­åŸºç¡€çš„Crashæ²»ç†å®è·µç»éªŒï¼Œå¸®åŠ©åˆå­¦è€…å¿«é€Ÿçš„æŒæ¡Crashæ²»ç†æŠ€èƒ½ï¼Œæå‡å·¥ä½œèƒ½åŠ›ã€‚æ–‡ç« å°†ä»å¦‚ä¸‹å‡ ä¸ªæ–¹é¢è¿›è¡Œä»‹ç»ï¼š Crashçš„ç»Ÿè®¡å’Œåˆ†æ å¦‚ä½•é€šè¿‡å‹ç›ŸAPMå¹³å°åšç›‘æ§å’ŒæŠ¥è­¦ SDKæ”¶é›†å·¥å…·çš„é›†æˆ å„ç§ç±»å‹çš„Crashåˆ†æå®è·µ Crashæ²»ç†çš„é‡è¦ä¸€æ­¥æ˜¯å¯¹Crashè¿›è¡Œç»Ÿè®¡å’Œåˆ†æï¼Œæœ‰äº†Crashçš„ç»Ÿè®¡æ•°æ®ï¼Œæˆ‘ä»¬æ‰èƒ½å…·ä½“çš„å¯¹æŸäº›Crashé—®é¢˜è¿›è¡Œåˆ†æå’Œå¤„ç†ï¼Œå‹ç›ŸU-APMå¹³å°æä¾›äº†éå¸¸å¥½çš„è¾…åŠ©å·¥å…·ï¼Œå¼€å‘è€…çš„æ¥å…¥éå¸¸ç®€å•å®¹æ˜“ï¼Œå…¶å¯ä»¥å¸®åŠ©å¼€å‘è€…å¿«é€Ÿå‘ç°é—®é¢˜ï¼Œç»Ÿè®¡é—®é¢˜ï¼Œåˆ†æé—®é¢˜æœ€ç»ˆè§£å†³é—®é¢˜ã€‚ äºŒã€U-APM SDKçš„é›†æˆå®¢æˆ·ç«¯åº”ç”¨é›†æˆU-APM SDKä¸»è¦ç”¨æ¥è¿›è¡Œå´©æºƒæ£€æµ‹ï¼Œå¡é¡¿æ£€æµ‹ä»¥åŠåœºæ™¯è®°å½•ç­‰åŠŸèƒ½ã€‚å¦‚æœä½¿ç”¨CocoaPodså·¥å…·å…¶æ¥å…¥éå¸¸ç®€å•ï¼Œåœ¨Podfileæ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹ä¾èµ–å³å¯ï¼š 1234pod 'UMCommon'pod 'UMDevice'pod 'UMAPM'pod 'UMCCommonLog' å…¶ä¸­UMCommonæ˜¯å‹ç›ŸSDKåŸºç¡€çš„æ”¯æŒåº“ï¼Œæä¾›SDKåˆå§‹åŒ–ç­‰åŠŸèƒ½ï¼ŒUMDeviceåº“ä¸è®¾å¤‡ä¿¡æ¯åŠŸèƒ½ç›¸å…³ï¼ŒUMAPMç”¨æ¥åšæ€§èƒ½ä¸å´©æºƒç»Ÿè®¡ï¼ŒUMCCommonLogæ˜¯ä¸€ä¸ªè°ƒè¯•åº“ï¼Œåœ¨å¼€å‘æ—¶æˆ‘ä»¬å¯ä»¥å°†å…¶å¼•ç”¨ï¼Œç”¨æ¥æŸ¥çœ‹ä¸ŠæŠ¥æƒ…å†µã€‚ å¦‚æœé¡¹ç›®æ²¡æœ‰ä½¿ç”¨CocoaPodsï¼Œä¹Ÿå¯ä»¥é‡‡ç”¨æ‰‹åŠ¨å¼•å…¥çš„æ–¹å¼æ¥é›†æˆSDKã€‚åœ¨å¦‚ä¸‹åœ°å€å¯ä»¥æ ¹æ®éœ€æ±‚ä¸‹è½½åˆ°æŒ‡å®šçš„SDKèµ„æºï¼š https://developer.umeng.com/sdk/android?spm=a213m0.21038855.9168240680.3.6a311904uispVD æ‰‹åŠ¨é›†æˆSDKè¿˜éœ€è¦åšä¸€äº›ç®€å•çš„å·¥ç¨‹é…ç½®ï¼š 1.éœ€è¦ä¾èµ–å¦‚ä¸‹ç³»ç»Ÿåº“ï¼š 1234CoreTelephony.frameworklibz.tbdlibsqlite.tbdlibc++.tbd 2.åœ¨å·¥ç¨‹çš„Targets-&gt;BuildSettings ä¸­ ï¼Œ Other Linker Flagså¢åŠ -ObjCå‚æ•°ã€‚ å®Œæˆäº†ä¸Šé¢çš„é…ç½®è¿‡ç¨‹ï¼Œéœ€è¦ç¼–å†™ä»£ç æ¥å®ŒæˆU-APM SDKçš„æ¥å…¥å·¥ä½œï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526#import \"AppDelegate.h\"#import &lt;UMCommon/UMCommon.h&gt;#import &lt;UMAPM/UMCrashConfigure.h&gt;#import &lt;UMCommonLog/UMCommonLogHeaders.h&gt;@interface AppDelegate ()@end@implementation AppDelegate- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions &#123; // 1. åˆå§‹åŒ–SDK [UMConfigure initWithAppkey:@\"602505af668f9e17b8aef059\" channel:nil]; // 2. è¿›è¡Œå¼‚å¸¸æ•è· [UMCrashConfigure setCrashCBBlock:^NSString * _Nullable&#123; return @\"å‘ç”Ÿäº†æˆ‘ä»¬æµ‹è¯•çš„Crash\"; &#125;]; // 3. åˆå§‹åŒ–Log [UMCommonLogManager setUpUMCommonLogManager]; // 4. å¼€å¯Log [UMConfigure setLogEnabled:YES]; return YES;&#125;@end ç”±äºéœ€è¦é€‰æ‹©ä¸€ä¸ªè¾ƒæ—©çš„å®é™…æ¥è¿›è¡ŒSDKçš„åˆå§‹åŒ–ï¼Œå› æ­¤æˆ‘ä»¬é€šå¸¸ä¼šå°†åˆå§‹åŒ–çš„ç›¸å…³ä»£ç æ”¾å…¥didFinishLaunchingæ–¹æ³•ä¸­ï¼Œä¹Ÿå¯ä»¥æ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©åˆå§‹åŒ–çš„æ—¶æœºï¼Œæ¥å…¥SDKåŸºæœ¬åˆ†ä¸ºäº†4ä¸ªæ­¥éª¤ï¼Œä¸Šé¢ç¤ºä¾‹ä»£ç ä¸­æœ‰è¯¦ç»†çš„æ³¨é‡Šï¼Œåœ¨ç¬¬1æ­¥åˆå§‹åŒ–SDKä¸­ï¼Œä¼ å…¥çš„AppKeyçš„å€¼æ˜¯åœ¨å‹ç›Ÿåå°åˆ›å»ºåº”ç”¨åå¾—åˆ°çš„ã€‚ç¬¬2æ­¥è°ƒç”¨çš„setCrashCBBlockç”¨æ¥è®¾ç½®ä¸ŠæŠ¥Crashæ—¶çš„é¢å¤–ä¿¡æ¯ï¼Œé€šå¸¸åœ¨è¿™ä¸ªå›è°ƒä¸­æˆ‘ä»¬å¯ä»¥å°†å½“å‰ç™»å½•çš„ç”¨æˆ·ä¿¡æ¯ç­‰è¿›è¡Œä¸ŠæŠ¥ã€‚ æˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨å†™ä¸€äº›å¸¸è§çš„ä¼šäº§ç”ŸCrashçš„ä»£ç ï¼Œåœ¨çœŸæœºä¸Šè¿è¡Œä¸Šé¢ç¤ºä¾‹ä»£ç åï¼Œå¯ä»¥åœ¨å‹ç›Ÿçš„APMåå°çœ‹åˆ°è®°å½•çš„å¼‚å¸¸ä¿¡æ¯ï¼Œåœ¨ä¸ŠæŠ¥çš„æ—¥å¿—çš„è‡ªå®šä¹‰å­—æ®µä¸­ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬è®¾ç½®çš„é¢å¤–ä¸ŠæŠ¥æ•°æ®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š æ­¤æ—¶ï¼Œä½ ä¼šå‘ç°æˆ‘ä»¬æ”¶é›†åˆ°çš„å¾ˆå¤šå †æ ˆä¿¡æ¯éƒ½æ˜¯æœªç¬¦å·åŒ–çš„ï¼Œå³éƒ½æ˜¯å†…å­˜åœ°å€ï¼Œå¹¶æ²¡ä¸ç±»ä¸æ–¹æ³•çš„ä¿¡æ¯ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬è¿˜éœ€è¦é…ç½®ä¸‹åº”ç”¨çš„ç¬¦å·è¡¨ï¼Œä½¿ç”¨Xcodeåœ¨æ„å»ºå·¥ç¨‹æ—¶ï¼Œé»˜è®¤åªä¼šåœ¨ç”Ÿäº§ç¯å¢ƒç”Ÿæˆç¬¦å·è¡¨ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†Build Settings-&gt;Debug Information Formaté€‰é¡¹è®¾ç½®ä¸ºDWARF with DSYM Fileæ¥ä½¿å…¶åœ¨Debugç¯å¢ƒä¸‹ä¹Ÿç”Ÿæˆç¬¦å·è¡¨ï¼Œå¦‚ä¸‹ï¼š ç¼–è¯‘åç”Ÿæˆçš„ç¬¦å·è¡¨ä¼šä¸AppåŒ…æ”¾åœ¨åŒä¸€æ–‡ä»¶ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å‹ç›ŸU-APMåå°çš„è®¾ç½®é¡µé¢å°†æ­¤ç¬¦å·è¡¨æ–‡ä»¶è¿›è¡Œä¸Šä¼ ï¼Œä¹‹åå°±å¯ä»¥æ­£å¸¸çš„å¯¹å †æ ˆä¿¡æ¯è¿›è¡Œè§£æã€‚å¦‚ä¸‹å›¾ï¼š ä¸‰ã€åˆ†æç”¨æˆ·è·¯å¾„ä¸ç›‘æ§å‘Šè­¦æœ‰æ—¶å€™æˆ‘ä»¬è®°å½•åˆ°äº†çº¿ä¸Šçš„Crashï¼Œå¹¶ä¸”å®šä½åˆ°äº†å…·ä½“çš„é¡µé¢ï¼Œä½†æ˜¯ä¾ç„¶æ— æ³•å¤ç°å‡ºç›¸åŒçš„é—®é¢˜ã€‚å¾ˆå¤šæƒ…å†µä¸‹è¿™æ˜¯å› ä¸ºæˆ‘ä»¬çš„å¤ç°è·¯å¾„ä¸ç”¨æˆ·çš„æ“ä½œè·¯å¾„å¹¶ä¸ä¸€æ ·ï¼Œåœ¨å‹ç›ŸAPMåå°ï¼Œå¯¹äºæ”¶é›†åˆ°äº†å¼‚å¸¸é—®é¢˜ï¼Œé™¤äº†æœ‰è¯¦ç»†çš„å †æ ˆæ—¥å¿—å’Œè‡ªå®šä¹‰çš„ä¸ŠæŠ¥æ•°æ®å¤–ï¼Œè¿˜å¯ä»¥è·å–åˆ°ç”¨æˆ·çš„é¡µé¢æ“ä½œè·¯å¾„å’Œè®¾å¤‡ä¿¡æ¯ï¼Œé¡µé¢æ“ä½œè·¯å¾„æ˜¯éå¸¸é‡è¦çš„åˆ†ææ•°æ®ï¼Œæ ¹æ®è¿™ä¸ªè·¯å¾„æˆ‘ä»¬å¯ä»¥å¤§è‡´è¿˜åŸå‡ºç”¨æˆ·æ‰“å¼€åº”ç”¨ç¨‹åºåçš„æ“ä½œè·¯å¾„ï¼Œæ–¹ä¾¿æˆ‘ä»¬å¯¹é—®é¢˜è¿›è¡Œåˆ†æå¤ç°ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š åœ¨è®¾å¤‡ä¿¡æ¯é¡µé¢å¯ä»¥å¯¹è®¾å¤‡ä¸æ“ä½œç³»ç»Ÿç›¸å…³ä¿¡æ¯è¿›è¡ŒæŸ¥çœ‹ï¼Œå¦‚ä¸‹å›¾ï¼š U-APMåå°è¿˜æä¾›äº†éå¸¸å¼ºå¤§çš„ç›‘æ§ä¸å‘Šè­¦åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸€å®šçš„é˜ˆå€¼ä½œä¸ºæŠ¥è­¦æ¡ä»¶ã€‚å½“æŸä¸€åˆ»å¼‚å¸¸é—®é¢˜è§¦å‘äº†æˆ‘ä»¬çš„æŠ¥è­¦è§„åˆ™ï¼Œæˆ‘ä»¬å¯ä»¥åŠæ—¶çš„æ”¶åˆ°åé¦ˆå¹¶åŠæ—¶çš„åšå‡ºå“åº”ã€‚åœ¨U-APMåå°çš„æ£€æµ‹æŠ¥è­¦åŠŸèƒ½é¡µé¢ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ç§å‘Šè­¦è®¡åˆ’ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š åœ¨åˆ›å»ºå‘Šè­¦è®¡åˆ’æ—¶ï¼Œå¯ä»¥è®¾ç½®ä¸€äº›è§¦å‘æ¡ä»¶ï¼Œä¾‹å¦‚åœ¨æœ€è¿‘ä¸€å°æ—¶å†…è§¦å‘çš„é”™è¯¯æ•°è¶…è¿‡é˜ˆå€¼ï¼Œåˆ™è¿›è¡Œå‘Šè­¦ã€‚å¯¹äºå‘Šè­¦çš„æ–¹å¼ï¼Œæœ‰é’‰é’‰æœºå™¨äººæé†’ï¼Œé‚®ä»¶ï¼Œä¼ä¸šå¾®ä¿¡ç­‰ï¼Œå¯ä»¥å‚ç…§æ–‡æ¡£æ ¹æ®éœ€è¦è¿›è¡Œé…ç½®ã€‚ å››ã€å¸¸è§Crashåˆ†æå®è·µ1.æœªå®ç°çš„é€‰æ‹©å™¨æœªå®ç°çš„é€‰æ‹©å™¨åº”è¯¥æ˜¯å¼€å‘ä¸­æœ€å¸¸è§çš„CrashåŸå› ä¹‹ä¸€ï¼Œåˆå­¦è€…åœ¨ç¼–å†™ä»£ç æ—¶ï¼Œç»å¸¸ä¼šåœ¨æ§åˆ¶å°çœ‹åˆ°å¦‚ä¸‹ç±»å‹çš„é”™è¯¯æç¤ºï¼š 1unrecognized selector sent to instance è¿™é€šå¸¸æ˜¯å› ä¸ºè°ƒç”¨äº†æ²¡æœ‰å®ç°çš„æ–¹æ³•æˆ–è€…æ‰§è¡Œæ–¹æ³•çš„å¯¹è±¡ç±»å‹ä¸å¯¹ï¼Œæˆ‘ä»¬å°†è¿™ç±»é—®é¢˜ç»Ÿç§°ä¸ºæœªå®ç°çš„é€‰æ‹©å™¨é—®é¢˜ã€‚äº§ç”Ÿè¿™ç±»çš„é—®é¢˜çš„åœºæ™¯é€šå¸¸æœ‰å¦‚ä¸‹å‡ ç§ï¼š â‘ .å£°æ˜æ–¹æ³•æœªå®ç°ä¾‹å¦‚åœ¨.hæ–‡ä»¶ä¸­å£°æ˜äº†ä¸€ä¸ªæ–¹æ³•ï¼Œå¹¶åœ¨å…¶ä»–åœ°æ–¹å¯¹æ­¤æ–¹æ³•è¿›è¡Œäº†è°ƒç”¨ï¼Œä½†æ˜¯æ­¤æ–¹æ³•å¹¶æ²¡æœ‰åœ¨.mæ–‡ä»¶ä¸­å®ç°ï¼Œæ­¤æ—¶ç¼–è¯‘å·¥ç¨‹æ˜¯ä¸ä¼šæœ‰é—®é¢˜çš„ï¼Œåœ¨è¿è¡Œæ—¶å¦‚æœè°ƒç”¨åˆ°äº†æ­¤æœªå®ç°çš„æ–¹æ³•ä¼šäº§ç”Ÿå´©æºƒã€‚ â‘¡.åè®®æ–¹æ³•æœªå®ç°è¿™ç§åœºæ™¯ä¸å£°æ˜æ–¹æ³•æœªå®ç°ç±»ä¼¼ï¼Œæœ‰æ—¶å€™ï¼Œåè®®ä¸­å®šä¹‰çš„æ–¹æ³•å¹¶ä¸ä¸€å®šéƒ½æ˜¯å¿…é¡»å®ç°çš„ï¼Œä¸ºäº†é¿å…å‡ºç°æ­¤ç±»é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è°ƒç”¨åè®®æ–¹æ³•ä¹‹å‰å…ˆè¿›è¡Œå®‰å…¨åˆ¤æ–­ï¼Œå¦‚ä¸‹ï¼š 123if ([self.delegate respondsToSelector:@selector(protocolMehtod)]) &#123; [self.delegate protocolMehtod];&#125; â‘¢.copyä¿®é¥°äº†å¯å˜å±æ€§åœ¨å®šä¹‰å±æ€§æ—¶ï¼Œå¦‚æœæˆ‘ä»¬å°†ä¸€ä¸ªå¯å˜çš„å±æ€§ä½¿ç”¨äº†copyè¿›è¡Œä¿®é¥°ï¼Œåˆ™åœ¨èµ‹å€¼æ—¶ä¼šéšå¼çš„å°†å…¶æ‹·è´æˆä¸å¯å˜çš„ç±»å‹ï¼Œè¿™æ—¶å¦‚æœæˆ‘ä»¬è°ƒç”¨äº†å¯å˜å±æ€§çš„æ–¹æ³•å°±ä¼šäº§ç”Ÿå¼‚å¸¸ï¼Œä¾‹å¦‚ï¼š 1@property (nonatomic, copy) NSMutableArray *mutableArray; è¿™ç§åœºæ™¯å…·æœ‰å¾ˆå¥½çš„éšç§˜æ€§ï¼Œæ— è®ºæ˜¯èµ‹å€¼è¿˜æ˜¯æ–¹æ³•çš„è°ƒç”¨ï¼ŒXcodeçš„è‡ªåŠ¨æ£€æŸ¥åŠŸèƒ½éƒ½ä¸èƒ½æå‰å°†é—®é¢˜æŒ‡å‡ºï¼Œä¹Ÿä¸ä¼šæœ‰è­¦å‘Šäº§ç”Ÿã€‚ â‘£.åŠ¨æ€è°ƒç”¨äº†æœªçŸ¥æ–¹æ³•Objective-Cæœ¬èº«æ˜¯ä¸€ç§åŠ¨æ€çš„è¯­è¨€ï¼Œæœ‰å¾ˆå¤šç§æ–¹å¼å¯ä»¥åŠ¨æ€çš„è¿›è¡Œæ–¹æ³•çš„è°ƒç”¨ï¼Œè¿™ç±»è°ƒç”¨æ˜¯ä¸ä¼šåšç¼–è¯‘æ—¶æ£€æŸ¥çš„ï¼Œæ–¹æ³•åå†™é”™æˆ–å¯¹è±¡ç±»å‹ä¸å¯¹éƒ½ä¼šäº§ç”Ÿå¼‚å¸¸ï¼Œå› æ­¤æœ€å¥½åœ¨åŠ¨æ€æ–¹æ³•è°ƒç”¨å‰ï¼Œéƒ½è¿›è¡Œå®‰å…¨åˆ¤æ–­ï¼Œä¾‹å¦‚ï¼š 123if ([self respondsToSelector:@selector(unknow)]) &#123; [self performSelector:@selector(unknow)];&#125; â‘¤.ä½ç‰ˆæœ¬ä½¿ç”¨äº†é«˜ç‰ˆæœ¬çš„APIå½“ä½ç‰ˆæœ¬ç³»ç»Ÿä½¿ç”¨äº†é«˜ç‰ˆæœ¬æ‰æœ‰çš„æ¥å£æ—¶ï¼Œä¹Ÿä¼šäº§ç”Ÿæœªå®ç°çš„é€‰æ‹©å™¨å¼‚å¸¸ï¼Œå¯¹äºè¿™ç§åœºæ™¯ï¼ŒXcodeä¼šæœ‰è­¦å‘Šæç¤ºï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è°ƒç”¨æ–¹æ³•å‰ï¼Œå…ˆè¿›è¡Œç‰ˆæœ¬çš„åˆ¤æ–­ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456// iOS 13 ä¹‹åAPIif (@available(iOS 13.0, *)) &#123; [self canPerformUnwindSegueAction:@selector(test) fromViewController:self sender:nil];&#125; else &#123; // Fallback on earlier versions&#125; 2.KVCç›¸å…³å¼‚å¸¸ KVC(Key Value Coding)åˆç§°é”®å€¼ç¼–ç ï¼Œå…¶æŒ‡åœ¨iOSå¼€å‘ä¸­ï¼Œå¯ä»¥å…è®¸å¼€å‘è€…é€šè¿‡keyåç›´æ¥è®¿é—®å¯¹è±¡çš„å±æ€§æˆ–è€…ç»™å¯¹è±¡çš„å±æ€§èµ‹å€¼ï¼Œè€Œä¸éœ€è¦è°ƒç”¨æ˜ç¡®çš„å­˜å–æ–¹æ³•ã€‚è¿™æ ·å°±å¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°è®¿é—®å’Œä¿®æ”¹å¯¹è±¡çš„å±æ€§ã€‚å¾ˆå¤šé«˜çº§çš„iOSå¼€å‘æŠ€å·§éƒ½æ˜¯åŸºäºKVCå®ç°çš„ã€‚ KVCçš„å‡ ä¸ªæ ¸å¿ƒæ–¹æ³•åˆ—ä¸¾å¦‚ä¸‹ï¼š 1234567891011121314//æ ¸å¿ƒæ–¹æ³•ï¼š- (nullable id)valueForKey:(NSString *)key;- (void)setValue:(nullable id)value forKey:(NSString *)key; - (nullable id)valueForKeyPath:(NSString *)keyPath; - (void)setValue:(nullable id)value forKeyPath:(NSString *)keyPath;//é«˜çº§æ–¹æ³•ï¼š+ (BOOL)accessInstanceVariablesDirectly;- (nullable id)valueForUndefinedKey:(NSString *)key;- (void)setValue:(nullable id)value forUndefinedKey:(NSString *)key;- (void)setNilValueForKey:(NSString *)key;- (NSDictionary&lt;NSString *, id&gt; *)dictionaryWithValuesForKeys:(NSArray&lt;NSString *&gt; *)keys;- (NSDictionary&lt;NSString *, id&gt; *)dictionaryWithValuesForKeys:(NSArray&lt;NSString *&gt; *)keys;- (void)setValuesForKeysWithDictionary:(NSDictionary&lt;NSString *, id&gt; *)keyedValues; KVCç›¸å…³çš„Crashåœºæ™¯ä¸»è¦æœ‰ä¸¤ç§ï¼š â‘ . æ‰€ä½¿ç”¨äº†å€¼ä¸ºnilçš„keyå½“æˆ‘ä»¬ä½¿ç”¨KVCçš„æ–¹å¼å‘å¯¹è±¡çš„å±æ€§è¿›è¡Œèµ‹å€¼æ—¶ï¼Œè¦ä¿è¯Keyå€¼ä¸ä¸ºnilï¼Œå¦åˆ™ä¼šäº§ç”Ÿå¼‚å¸¸ï¼Œåœ¨ä½¿ç”¨æ—¶è¦åšä¸‹Keyå€¼çš„åˆ¤ç©ºï¼Œå¦‚ä¸‹ï¼š 1234NSString *key = nil;if (key) &#123; [self setValue:@\"value\" forKey:key];&#125; â‘¡. ä½¿ç”¨äº†å¯¹è±¡ä¸­ä¸å­˜åœ¨çš„keyå€¼åœ¨è°ƒç”¨setValueï¼šforKeyï¼šæ–¹æ³•æ—¶ï¼Œå³æ˜¯ä¼ å…¥çš„Keyå€¼ä¸ä¸ºnilï¼Œä¹Ÿæœ‰å¯èƒ½ä¼šäº§ç”Ÿå¼‚å¸¸ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœè¦æ“ä½œçš„å±æ€§å¯¹è±¡ä¸­å¹¶ä¸å­˜åœ¨ï¼Œåˆ™ä¹Ÿä¼šäº§ç”ŸCrashï¼Œæˆ‘ä»¬å¯ä»¥å®ç°KVCä¸­çš„å¦‚ä¸‹ä¸¤ä¸ªæ–¹æ³•æ¥åšå…¼å®¹ï¼š 123456789// ä¸ºä¸å­˜åœ¨çš„å±æ€§è¿›è¡ŒKVCèµ‹å€¼æ—¶ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•- (void)setValue:(id)value forUndefinedKey:(NSString *)key &#123; NSLog(@\"setForUndefinedKey:%@, %@\", key, value);&#125;// è·å–ä¸å­˜åœ¨çš„å±æ€§çš„å€¼çš„æ—¶å€™ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•- (id)valueForUndefinedKey:(NSString *)key &#123; return nil;&#125; 3.é‡æŒ‡é’ˆç›¸å…³å¼‚å¸¸ç”±äºé‡æŒ‡é’ˆé—®é¢˜äº§ç”Ÿçš„ç›¸å…³å¼‚å¸¸é€šå¸¸æ˜¯æ¯”è¾ƒéš¾å¤„ç†å’Œå®šä½çš„ã€‚é‡æŒ‡é’ˆé€šå¸¸æŒ‡æ‰€æŒ‡å‘çš„å¯¹è±¡å·²ç»è¢«é‡Šæ”¾çš„æŒ‡é’ˆï¼Œå…¶æ‰€æŒ‡å‘çš„å†…å­˜åœ°å€å­˜å‚¨çš„æ•°æ®ä¹Ÿè¢«ç§°ä¸ºåƒµå°¸å¯¹è±¡ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å¼€å¯Xcodeçš„åƒµå°¸å¯¹è±¡åŠŸèƒ½æ¥åœ¨å¼€å‘é˜¶æ®µæå‰è¿›è¡Œé¢„é˜²ã€‚åœ¨Xcodeçš„schemeç¼–è¾‘ä¸­ï¼Œå°†Zombie Objectsè¿›è¡Œå‹¾é€‰å³å¯ã€‚å¦‚ä¸‹ï¼š é‡æŒ‡é’ˆç›¸å…³é—®é¢˜çš„å¼‚å¸¸åœºæ™¯ä¸»è¦æœ‰å¦‚ä¸‹å‡ ç§ï¼š â‘ . ä½¿ç”¨äº†æœªåˆå§‹åŒ–çš„å¯¹è±¡â‘¡. ARCä¸‹ï¼Œä½¿ç”¨äº†assignæˆ–unsafe_unretainedä¿®é¥°å¯¹è±¡å¦‚ä¸‹ï¼š 1@property (nonatomic, assign) UIView *subView; è¿™ç§åœºæ™¯ä¸‹ï¼Œå¯¹è±¡é‡Šæ”¾åï¼ŒARCä¸ä¼šè‡ªåŠ¨çš„å¸®æˆ‘ä»¬åšæŒ‡é’ˆç½®ç©ºæ“ä½œã€‚ â‘¢.runtimeå…³è”å¯¹è±¡ä½¿ç”¨äº†ä¸åˆé€‚çš„ä¿®é¥°ï¼Œå¦‚OBJC_ASSOCIATION_ASSIGNåŸå› ä¸åœºæ™¯2ç±»ä¼¼ï¼Œå¯¹äºå¯¹è±¡å±æ€§çš„ä¿®é¥°è¦ä½¿ç”¨æ­£ç¡®çš„ä¿®é¥°ç¬¦ã€‚ 4.KVOç›¸å…³å¼‚å¸¸ KVOå…¨ç§°Key Value Observingï¼Œæ˜¯Appleæä¾›çš„ä¸€å¥—äº‹ä»¶é€šçŸ¥æœºåˆ¶ã€‚å…¶å…è®¸ä¸€ä¸ªå¯¹è±¡ç›‘å¬å¦å¤–ä¸€ä¸ªå¯¹è±¡ç‰¹å®šå±æ€§çš„å˜åŒ–ï¼Œç”±äºKVOçš„å®ç°æœºåˆ¶çš„åŸå› ï¼Œä¸€èˆ¬ç»§æ‰¿è‡ªNSObjectçš„å¯¹è±¡æ‰èƒ½ä½¿ç”¨ï¼Œå¹¶ä¸”å…¶åªå¯¹å±æ€§æ‰ä¼šå‘ç”Ÿä½œç”¨ã€‚ KVOå’ŒNSNotificationCenteréƒ½æ˜¯iOSä¸­è§‚å¯Ÿè€…æ¨¡å¼çš„ä¸€ç§å®ç°ã€‚åŒºåˆ«åœ¨äºï¼Œç›¸å¯¹äºè¢«è§‚å¯Ÿè€…å’Œè§‚å¯Ÿè€…ä¹‹é—´çš„å…³ç³»ï¼ŒKVOæ˜¯ä¸€å¯¹ä¸€çš„ï¼Œè€Œä¸ä¸€å¯¹å¤šçš„ã€‚KVOå¯¹è¢«ç›‘å¬å¯¹è±¡æ— ä¾µå…¥æ€§ï¼Œä¸éœ€è¦ä¿®æ”¹å…¶å†…éƒ¨ä»£ç å³å¯å®ç°ç›‘å¬ï¼ŒKVOå¯ä»¥ç›‘å¬å•ä¸ªå±æ€§çš„å˜åŒ–ï¼Œä¹Ÿå¯ä»¥ç›‘å¬é›†åˆå¯¹è±¡çš„å˜åŒ–ã€‚ åœ¨æŸäº›åœºæ™¯ä¸‹å¦‚æœä¸æ°å½“çš„ä½¿ç”¨KVOï¼Œä¹Ÿä¼šäº§ç”ŸCrashï¼Œå¸¸è§åœºæ™¯å¦‚ä¸‹ï¼š â‘ .è¢«è§‚å¯Ÿè€…æ˜¯å±€éƒ¨å˜é‡â‘¡.è§‚å¯Ÿè€…æ˜¯å±€éƒ¨å˜é‡â‘¢.æœªå®ç°ç›‘å¬æ–¹æ³•â‘£.é‡å¤ç§»é™¤ç›‘å¬å¯¹è±¡è¦é¿å…ä¸Šè¿°é—®é¢˜ï¼Œåœ¨ä½¿ç”¨KVOæ—¶è¦æŠŠæ¡ä¸¤ä¸ªæ ¸å¿ƒé‡ç‚¹ï¼š 1. æ³¨æ„ç›‘å¬å¯¹è±¡ä¸è¢«ç›‘å¬å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸ 2. addObserverå’ŒremoveObserverè¦æˆå¯¹å‡ºç° 5.é›†åˆå¯¹è±¡æ“ä½œç›¸å…³Crashè¿™ç±»Crashä¸»è¦æŒ‡ä¸å½“çš„æ“ä½œæ•°ç»„æˆ–å­—å…¸æ‰€äº§ç”Ÿçš„çš„ã€‚ â‘ .æ•°ç»„è¶Šç•Œé—®é¢˜â‘¡.å‘æ•°ç»„ä¸­æ·»åŠ nilå…ƒç´ â‘¢.éå†æ•°ç»„è¿‡ç¨‹ä¸­ä½¿ç”¨äº†é”™è¯¯çš„æ–¹å¼ä¿®æ”¹äº†æ•°ç»„â‘£. å­—å…¸è®¾ç½®nilå€¼6.å¤šçº¿ç¨‹æ“ä½œç›¸å…³Crashå’Œé‡æŒ‡é’ˆé—®é¢˜ç±»ä¼¼ï¼Œå¤šçº¿ç¨‹äº§ç”Ÿçš„å¼‚å¸¸å¾€å¾€ä¹Ÿæ˜¯æ¯”è¾ƒéš¾å®šä½å’Œè§£å†³çš„ã€‚è¿™ç±»å¼‚å¸¸é€šå¸¸å¹¶ä¸å¥½å¤ç°ï¼Œæˆ‘ä»¬åœ¨ç¼–å†™ä»£ç æ—¶è¦å°†å°½é‡å°†é€»è¾‘æ¢³ç†æ¸…æ¥šã€‚å¸¸è§é—®é¢˜åœºæ™¯å¦‚ä¸‹ï¼š â‘ . group enter ä¸ group leaveåœ¨ä½¿ç”¨GCDå¤šå¤šçº¿ç¨‹å¼€å‘æ—¶ï¼Œdispatch\\_group\\_tæ˜¯å¾ˆå¸¸ç”¨çš„ä¸€ç§è¿›è¡Œä»»åŠ¡ä¾èµ–ç¼–ç¨‹çš„æ–¹å¼ï¼Œéœ€è¦æ³¨æ„ï¼Œåœ¨ä½¿ç”¨dispatch\\_group\\_tæ—¶ï¼Œè¦ç¡®ä¿group enter ä¸ group leaveæ˜¯æˆå¯¹è°ƒç”¨çš„ï¼Œå¦åˆ™ææ˜“å‡ºç°æ­»é”é—®é¢˜ã€‚ â‘¡.å­çº¿ç¨‹åšUIæ“ä½œåœ¨å­çº¿ç¨‹ä¸­æ“ä½œUIä¸ä»…ä¼šé€ æˆé¡µé¢æ›´æ–°ä¸åŠæ—¶ï¼Œé¡µé¢æ··ä¹±ç­‰é—®é¢˜ï¼Œä¹Ÿææ˜“äº§ç”Ÿå¼‚å¸¸ä»è€ŒCrashï¼Œå› æ­¤åœ¨åšUIæ“ä½œæ—¶ï¼Œä¸€å®šè¦ä¿è¯æ˜¯åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œã€‚ â‘¢.å¤šçº¿ç¨‹å¯¹å¯¹è±¡è¿›è¡Œé‡Šæ”¾åœ¨å¤šä¸ªçº¿ç¨‹ä¸­å¯¹å˜é‡è¿›è¡Œèµ‹å€¼æ“ä½œä¼šé€ æˆï¼Œä¼šé€ æˆå˜é‡æ‰€å¼•ç”¨çš„æ—§çš„å¯¹è±¡çš„å¤šçº¿ç¨‹é‡Šæ”¾é—®é¢˜ï¼Œä¼šå‡ºç°å¶ç°crashã€‚å› æ­¤ï¼Œå¦‚æœæœ‰å¤šçº¿ç¨‹å¯¹å¤–éƒ¨å˜é‡è¿›è¡Œèµ‹å€¼çš„æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¿¡å·é‡è¿›è¡ŒåŠ é”ï¼Œä¿è¯å˜é‡çš„èµ‹å€¼æ˜¯ä¸²è¡Œçš„ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314__block NSObject *obj;dispatch_semaphore_t sem = dispatch_semaphore_create(1);dispatch_async(dispatch_get_global_queue(0, 0), ^&#123; while (YES) &#123; dispatch_semaphore_wait(sem, DISPATCH_TIME_FOREVER); obj = [NSObject new]; dispatch_semaphore_signal(sem); &#125;&#125;);while (YES) &#123; dispatch_semaphore_wait(sem, DISPATCH_TIME_FOREVER); obj = [NSObject new]; dispatch_semaphore_signal(sem);&#125; â‘£.å¤šçº¿ç¨‹åŒæ—¶æ“ä½œæ•°ç»„å¤šçº¿ç¨‹åŒæ—¶å¯¹æ•°ç»„è¿›è¡Œæ“ä½œä¹Ÿæ˜¯æ¯”è¾ƒå±é™©çš„è¡Œä¸ºï¼Œä¾‹å¦‚å½“ä¸€ä¸ªçº¿ç¨‹åœ¨å¯¹æ•°æ®è¿›è¡Œéå†æ—¶ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹æ”¹å˜äº†æ•°ç»„å…ƒç´ çš„ä¸ªæ•°ï¼Œä¼šç”±äºç´¢å¼•é”™ä¹±è€Œäº§ç”Ÿæ„æƒ³ä¸åˆ°çš„é—®é¢˜ç”šè‡³Crashã€‚åœ¨å¤šçº¿ç¨‹ä¸­éå†æ•°ç»„æ—¶ï¼Œå¯ä»¥å°†æ•°ç»„æ‹·è´ä¸€ä»½åœ¨è¿›è¡Œæ“ä½œã€‚ 7.watch dogå¼‚å¸¸ ä¸ºäº†é˜²æ­¢ä¸€ä¸ªåº”ç”¨å ç”¨è¿‡å¤šçš„ç³»ç»Ÿèµ„æºï¼ŒAppleè®¾è®¡äº†ä¸€ä¸ªåä¸ºâ€œçœ‹é—¨ç‹—â€( watchdog )çš„æœºåˆ¶ã€‚åœ¨ä¸åŒçš„åœºæ™¯ä¸‹ï¼Œâ€œçœ‹é—¨ç‹—â€ä¼šç›‘æµ‹åº”ç”¨çš„æ€§èƒ½ã€‚å¦‚æœè¶…å‡ºäº†è¯¥åœºæ™¯æ‰€è§„å®šçš„è¿è¡Œæ—¶é—´ï¼Œâ€œçœ‹é—¨ç‹—â€å°±ä¼šå¼ºåˆ¶ç»ˆç»“è¿™ä¸ªåº”ç”¨çš„è¿›ç¨‹ã€‚å¼€å‘è€…ä»¬åœ¨ crashlog é‡Œé¢ï¼Œä¼šçœ‹åˆ°è¯¸å¦‚ 0x8badf00d è¿™æ ·çš„é”™è¯¯ä»£ç ã€‚å¼‚å¸¸ä»£ç ï¼šâ€œ0x8badf00d â€(çœ‹ä¸Šå»éå¸¸åƒ bad food)ã€‚ Watch Dogçš„Crashæœ¬èº«å¹¶ä¸æ˜¯ä»£ç é”™è¯¯ï¼Œå…¶æ˜¯ä¸€ç§ä¿æŠ¤æœºåˆ¶ï¼Œå½“æˆ‘ä»¬æ”¶é›†åˆ°çš„å¼‚å¸¸æœ‰å‘ç°è¿™ç±»é—®é¢˜æ—¶ï¼Œå°±è¦ç€é‡è€ƒè™‘ä¸‹åº”ç”¨çš„æ€§èƒ½ï¼ŒåŒæ—¶æ£€æŸ¥æ˜¯å¦ä¼šæœ‰æ­»é”ç­‰å¼‚å¸¸é€»è¾‘çš„äº§ç”Ÿã€‚ äº”ã€å»ºè®®1. é‡è§†æ¯ä¸€ä¸ªCrashå¤„ç† 2. æœ‰ç›‘æ§ï¼Œç´§æ€¥é—®é¢˜å¯ä»¥åŠæ—¶å“åº” 3. ç§¯ç´¯æ²»ç†ç»éªŒ 4. ä»£ç è§„èŒƒï¼Œå®‰å…¨ 5. é€»è¾‘è®¾è®¡å°½é‡ç®€å•ï¼Œå¤šçº¿ç¨‹åœºæ™¯è¦æ¸…æ™°","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSåˆçº§æ•™ç¨‹ä¹‹äºŒ:DeepLinkå®è·µ","slug":"411[iOSåˆçº§æ•™ç¨‹ä¹‹äºŒ]DeepLinkå®è·µ","date":"2021-03-18T16:00:00.000Z","updated":"2021-07-15T11:46:26.916Z","comments":true,"path":"2021/03/19/411[iOSåˆçº§æ•™ç¨‹ä¹‹äºŒ]DeepLinkå®è·µ/","link":"","permalink":"http://huishao.cc/2021/03/19/411[iOSåˆçº§æ•™ç¨‹ä¹‹äºŒ]DeepLinkå®è·µ/","excerpt":"","text":"[iOSåˆçº§æ•™ç¨‹ä¹‹äºŒ]DeepLinkå®è·µä¸€ã€å”¤é†’iOSåº”ç”¨ç¨‹åºçš„å‡ ç§æ–¹å¼å”¤é†’åº”ç”¨æ˜¯iOSå¼€å‘ä¸­å¸¸è§çš„æŠ€æœ¯ï¼Œåº”ç”¨å”¤é†’çš„æ–¹å¼æœ‰å¤šç§ï¼Œæ¦‚æ‹¬ä¸‹æ¥ï¼Œå¯ä»¥åˆ†ä¸ºå¦‚ä¸‹å‡ ç±»: ç›´æ¥æ‰“å¼€App é€šçŸ¥å”¤é†’ schemeå”¤é†’ Universal Linkså”¤é†’ ç›´æ¥æ‰“å¼€Appæ˜¯æœ€ç›´æ¥çš„å”¤é†’åº”ç”¨ç¨‹åºçš„æ–¹å¼ï¼Œä»¥iPhoneä¸ºä¾‹ï¼Œå¯ä»¥ä»ä¸»å±å¹•ã€æœç´¢æ¨èã€åº”ç”¨åº“ç­‰åœºæ™¯ä¸­è¿›è¡Œæ‰“å¼€ã€‚ å½“ç”¨æˆ·æ”¶åˆ°é€šçŸ¥æ¶ˆæ¯æ—¶ï¼Œç‚¹å‡»é€šçŸ¥æ çš„é€šçŸ¥æ¶ˆæ¯ä¹Ÿå¯ä»¥å”¤é†’åº”ç”¨ç¨‹åºï¼Œé€šçŸ¥åˆ†ä¸ºæœ¬åœ°é€šçŸ¥å’Œè¿œç¨‹é€šçŸ¥ä¸¤ç§ï¼Œä»å”¤é†’åº”ç”¨ç¨‹åºçš„ä½œç”¨ä¸Šæ¥è¯´ï¼Œè¿™ä¸¤ç§é€šçŸ¥çš„é€»è¾‘æ˜¯ä¸€è‡´çš„ã€‚ä¸‹é¢ä»£ç ç¤ºä¾‹äº†å‘é€æœ¬åœ°é€šçŸ¥ï¼š 1234567891011121314151617- (void)addLocalNotification &#123; [[UNUserNotificationCenter currentNotificationCenter] requestAuthorizationWithOptions:UNAuthorizationOptionAlert | UNAuthorizationOptionBadge | UNAuthorizationOptionSound completionHandler:^(BOOL granted, NSError * _Nullable error) &#123; &#125;]; UNMutableNotificationContent *notificaiton = [[UNMutableNotificationContent alloc] init]; notificaiton.title = @\"æœ¬åœ°é€šçŸ¥\"; notificaiton.body = @\"é€šçŸ¥å†…å®¹\"; notificaiton.badge = @(1); UNTimeIntervalNotificationTrigger *trriger = [UNTimeIntervalNotificationTrigger triggerWithTimeInterval:5 repeats:NO]; UNNotificationRequest *request = [UNNotificationRequest requestWithIdentifier:@\"requsetID\" content:notificaiton trigger:trriger]; [[UNUserNotificationCenter currentNotificationCenter] addNotificationRequest:request withCompletionHandler:^(NSError * _Nullable error) &#123; &#125;];&#125; é€šè¿‡Schemeæ¥å”¤é†’åº”ç”¨ç¨‹åºä¹Ÿéå¸¸ç®€å•ï¼Œåœ¨ä¸Šä¸€ç¯‡æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬æœ‰ä»‹ç»åˆ†äº«åŠŸèƒ½çš„é›†æˆï¼Œå°±æœ‰é…ç½®å’Œä½¿ç”¨è¿‡Schemeã€‚è¦é€šè¿‡Schemeå”¤é†’åº”ç”¨ç¨‹åºï¼Œé¦–å…ˆéœ€è¦æ·»åŠ URL Typesï¼Œæ·»åŠ æ–¹æ³•å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¸Šé¢æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªURL Schemeä¸ºdeeplinkdemoï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨deeplinkdemo://å¼€å¤´çš„é“¾æ¥æ¥å”¤é†’æ­¤åº”ç”¨ç¨‹åºã€‚ Universal Linkæ˜¯ä¸€ç§æ›´åŠ å¼ºå¤§çš„å”¤é†’åº”ç”¨ç¨‹åºçš„æ–¹å¼ï¼Œç›¸å…³ä»‹ç»å®˜ç½‘å¦‚ä¸‹ï¼š https://developer.apple.com/library/archive/documentation/General/Conceptual/AppSearch/UniversalLinks.html Universal Linkæ˜¯iOS 9ä¹‹åæ–°å¢çš„åº”ç”¨è·³è½¬åŠŸèƒ½ï¼Œå…¶å¯ä»¥æ— ç¼çš„è¿æ¥ç½‘ç«™ä¸Appï¼Œä¸éœ€é€šè¿‡æµè§ˆå™¨åšä¸­è½¬ï¼Œå³å¯ä»¥å®ç°åº”ç”¨é—´çš„æ— ç¼åˆ‡æ¢ã€‚ äº†è§£äº†ä¸Šè¿°çš„å‡ ç§åº”ç”¨ç¨‹åºçš„å”¤é†’æ–¹å¼ï¼Œæˆ‘ä»¬å›åˆ°æœ¬æ•™ç¨‹çš„ä¸»é¢˜ï¼šDeepLinkã€‚DeepLinkåˆç§°ä¸ºæ·±åº¦è¶…é“¾ï¼Œå…¶æ˜¯æŒ‡åº”ç”¨ä»¥ä¸ŠæŠ€æœ¯è¿›è¡Œåº”ç”¨ç¨‹åºçš„æ— ç¼è°ƒèµ·ã€åœºæ™¯è¿˜åŸã€è¥é”€å”¤é†’ç­‰ä¸šåŠ¡é€»è¾‘ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬å°±ä»‹ç»å¦‚ä½•ä»¥å‹ç›Ÿå·¥å…·å¹³å°ä¸ºåŸºç¡€æ¥ä¸ºåº”ç”¨ç¨‹åºæ¥å…¥æ™ºèƒ½è¶…é“¾åŠŸèƒ½ã€‚ äºŒã€U-Link SDKé›†æˆä½¿ç”¨CocoaPodsçš„æ–¹å¼æ¥é›†æˆU-Link SDKéå¸¸æ–¹ä¾¿ï¼Œåªéœ€è¦åœ¨Podfileæ–‡ä»¶å¤¹ä¸­æ·»åŠ å¦‚ä¸‹ä¾èµ–å³å¯ï¼š 12pod 'UMCommon'pod 'UMDevice' å¦‚æœé¡¹ç›®æ²¡æœ‰ä½¿ç”¨CocoaPodsè¿›è¡Œç®¡ç†ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©æ‰‹åŠ¨å¼•å…¥çš„æ–¹å¼æ¥é›†æˆSDKã€‚å¯ä»¥åœ¨å¦‚ä¸‹ç½‘å€ä¸‹è½½åˆ°æœ€æ–°ç‰ˆçš„SDKï¼š https://developer.umeng.com/sdk/ios?acm=lb-zebra-609113-9110428.1003.4.8840408&amp;scm=1003.4.lb-zebra-609113-9110428.OTHER_16059174649951_8840408 éœ€è¦æ³¨æ„ï¼Œå¦‚æœé‡‡ç”¨äº†æ‰‹åŠ¨çš„æ–¹å¼å¼•å…¥SDKï¼Œéœ€è¦åœ¨å·¥ç¨‹çš„Targets-&gt;BuildSettings-&gt;Other Linker Flagsä¸­æ·»åŠ -Objcå‚æ•°ï¼Œå¹¶ä¸”æ·»åŠ å¦‚ä¸‹ç³»ç»Ÿä¾èµ–åº“ï¼š CoreTelephony.frameworklibz.tbdlibsqlite.tbdSystemConfiguration.framework åœ¨å·¥ç¨‹ä¸­é›†æˆå¥½äº†SDKåï¼Œæˆ‘ä»¬è¿˜éœ€è¦åšä¸€äº›ç®€å•çš„é…ç½®ï¼Œé¦–å…ˆéœ€è¦åœ¨å‹ç›Ÿåå°åˆ›å»ºåº”ç”¨ç¨‹åºï¼Œå¹¶åœ¨åº”ç”¨è®¾ç½®é¡µé¢ä¸­è·å–åˆ°APP KEYå‚æ•°ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š è¿™ä¸ªAPP KEYå‚æ•°åœ¨è¿›è¡ŒSDKçš„åˆå§‹åŒ–æ—¶ä¼šä½¿ç”¨åˆ°ã€‚åœ¨å‹ç›Ÿåº”ç”¨åå°çš„Deeplinké…ç½®é¡µé¢ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å°†åº”ç”¨çš„ä¸€äº›Schemeä¿¡æ¯è¿›è¡Œé…ç½®ï¼Œå¦‚ä¸‹å›¾ï¼š ä¹‹åï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥é€šè¿‡åˆ›å»ºè¥é”€æ´»åŠ¨æ¥ä½¿ç”¨æ™ºèƒ½è¶…é“¾çš„åŠŸèƒ½äº†ï¼Œé¦–å…ˆåœ¨å‹ç›Ÿåå°è¿›è¡Œè¥é”€æ´»åŠ¨çš„åˆ›å»ºï¼Œé¡µé¢å¦‚ä¸‹å›¾ï¼š å¯ä»¥çœ‹åˆ°ï¼Œåœ¨åˆ›å»ºè¥é”€æ´»åŠ¨æ—¶ï¼Œå¯ä»¥é…ç½®æ´»åŠ¨åç§°ã€æ´»åŠ¨æè¿°ã€åº”ç”¨å†…è·³è½¬çš„è·¯å¾„ä»¥åŠç›¸å…³å‚æ•°ï¼Œå½“ç”¨æˆ·é€šè¿‡æ­¤è¥é”€æ´»åŠ¨çš„é“¾æ¥å”¤é†’åº”ç”¨ç¨‹åºæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®è¿™äº›å‚æ•°æ¥è®©åº”ç”¨ç¨‹åºå®šä½åˆ°æŒ‡ä»¤çš„é¡µé¢ï¼Œä»è€Œå®ç°ä¸šåŠ¡çš„æ— ç¼è¡”æ¥ã€‚åˆ›å»ºå¥½äº†è¥é”€æ´»åŠ¨åï¼Œåœ¨æ­¤æ´»åŠ¨çš„è¯¦æƒ…é¡µé¢å³å¯è·å–åˆ°LinkIDï¼Œåœ¨ç½‘é¡µä¸­æˆ‘ä»¬ä½¿ç”¨æ­¤LinkIDæ¥å”¤é†’åº”ç”¨ã€‚ ä¸‰ã€Deeplinkè°ƒè¯•ä¸å‚æ•°æ¥æ”¶åˆ›å»ºå¥½äº†è¥é”€æ´»åŠ¨ä¹Ÿé›†æˆå®Œæˆäº†SDKï¼Œä¸‹é¢æˆ‘ä»¬å¯ä»¥å°è¯•é€šè¿‡ä¸€ä¸ªç®€å•çš„HTML DEMOæ¥è°ƒè¯•æ™ºèƒ½è¶…é“¾ã€‚HTMLç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Demo&lt;/title&gt; &lt;meta charset=\"utf-8\" /&gt; &lt;script src=\"https://g.alicdn.com/jssdk/u-link/index.min.js\"&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt; &lt;div&gt; &lt;h1&gt;æµ‹è¯•DeepLinkè·³è½¬&lt;/h1&gt; &lt;button id=\"btn1\"&gt;å”¤èµ· App&lt;/button&gt; &lt;/div&gt;&lt;/body&gt;&lt;script type=\"text/javascript\"&gt; ULink.start(&#123; id: 'usr1ffnv829fu02h', /* å¹³å°ä¸ºæ¯ä¸ªåº”ç”¨åˆ†é…çš„æ–¹æ¡ˆlink IDï¼Œå¿…å¡« */ data: &#123; custom:\"customn1\", custom2:\"custom2\" &#125; /* è‡ªå®šä¹‰å‚æ•°ï¼Œé€‰å¡« */ &#125;).ready(function(ctx) &#123; /* åˆå§‹åŒ–å®Œæˆçš„å›è°ƒå‡½æ•° */ document.getElementById('btn1').onclick = function(e)&#123; ctx.wakeup(); /* ç”¨æˆ·ç‚¹å‡»æŸä¸ªæŒ‰é’®æ—¶å¯åŠ¨app */ &#125;;&#125;);&lt;/script&gt;&lt;style type=\"text/css\"&gt; div &#123; text-align: center; &#125; button &#123; font-size: 60px; &#125; h1 &#123; font-size: 60px; &#125;&lt;/style&gt;&lt;/html&gt; å¦‚ä¸Šä»£ç æ‰€ç¤ºï¼Œu-linkæ˜¯å‹ç›Ÿæ™ºèƒ½è¶…é“¾åœ¨JavaScriptç«¯çš„SDKï¼Œè°ƒç”¨ULinkçš„startæ–¹æ³•æ—¶ï¼Œé…ç½®çš„å¯¹è±¡idå°±æ˜¯æˆ‘ä»¬åˆ›å»ºçš„è¥é”€æ´»åŠ¨çš„idï¼Œé€šè¿‡è¿™ç§æ–¹å¼å”¤é†’åº”ç”¨ç¨‹åºä¼šè‡ªåŠ¨å°†åå°é…ç½®çš„å‚æ•°ä¼ é€’è¿‡å»ï¼ŒåŒæ—¶æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨dataä¸­å®šä¹‰æ›´å¤šåŠ¨æ€å‚æ•°è¿›è¡Œä¼ é€’ã€‚ å¯¹äºXcodeå·¥ç¨‹ï¼Œåœ¨åº”ç”¨å¯åŠ¨æ˜¯é¦–å…ˆéœ€è¦å¯¹U-Linkçš„SDKè¿›è¡Œåˆå§‹åŒ–æ“ä½œï¼Œå¦‚ä¸‹ï¼š 1234- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions &#123; [UMConfigure initWithAppkey:@\"602505af668f9e17b8aef059\" channel:nil]; return YES;&#125; ä¹‹åå®ç°å¦‚ä¸‹å‡ ä¸ªAppDelegateçš„å›è°ƒæ¥å¤„ç†è¶…é“¾ï¼š 12345678910111213141516171819202122232425262728293031323334#import \"AppDelegate.h\"#import &lt;UMCommon/UMConfigure.h&gt;#import &lt;UMCommon/MobClickLink.h&gt;@interface AppDelegate ()&lt;MobClickLinkDelegate&gt;@end@implementation AppDelegate- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions &#123; [UMConfigure initWithAppkey:@\"602505af668f9e17b8aef059\" channel:nil]; return YES;&#125;- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url &#123; return [MobClickLink handleLinkURL:url delegate:self];&#125;- (BOOL)application:(UIApplication *)app openURL:(NSURL *)url options:(NSDictionary&lt;UIApplicationOpenURLOptionsKey,id&gt; *)options &#123; return [MobClickLink handleLinkURL:url delegate:self];&#125;- (BOOL)application:(UIApplication *)application continueUserActivity:(NSUserActivity *)userActivity restorationHandler:(void (^)(NSArray&lt;id&lt;UIUserActivityRestoring&gt;&gt; * _Nullable))restorationHandler &#123; return [MobClickLink handleUniversalLink:userActivity delegate:self];&#125;// è§£æåçš„å›è°ƒå‡½æ•°ï¼Œè¿™é‡Œå¯ä»¥æ‹¿åˆ°æ‰€æœ‰çš„å‚æ•°ä¸è·³è½¬è·¯å¾„ä¿¡æ¯- (void)getLinkPath:(NSString *)path params:(NSDictionary *)params &#123; NSLog(@\"getLinkPath:%@, %@\", path, params);&#125;@end éœ€è¦æ³¨æ„ï¼Œå¦‚æœæ˜¯æ–°ç‰ˆXcodeåˆ›å»ºçš„åº”ç”¨ç¨‹åºï¼Œéœ€è¦åœ¨SceneDelegateç±»ä¸­å®ç°ä¸Šé¢çš„æ–¹æ³•ã€‚","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSåˆçº§æ•™ç¨‹ä¹‹ä¸€:ç¤¾ä¼šåŒ–åˆ†äº«å®è·µ","slug":"410[iOSåˆçº§æ•™ç¨‹ä¹‹ä¸€]ç¤¾ä¼šåŒ–åˆ†äº«å®è·µ","date":"2021-03-17T16:00:00.000Z","updated":"2021-07-15T11:46:52.679Z","comments":true,"path":"2021/03/18/410[iOSåˆçº§æ•™ç¨‹ä¹‹ä¸€]ç¤¾ä¼šåŒ–åˆ†äº«å®è·µ/","link":"","permalink":"http://huishao.cc/2021/03/18/410[iOSåˆçº§æ•™ç¨‹ä¹‹ä¸€]ç¤¾ä¼šåŒ–åˆ†äº«å®è·µ/","excerpt":"","text":"[iOSåˆçº§æ•™ç¨‹ä¹‹ä¸€]ç¤¾ä¼šåŒ–åˆ†äº«å®è·µä¸€ã€ç®€ä»‹ç¤¾ä¼šåŒ–åˆ†äº«ï¼Œæ˜¯æŒ‡åœ¨ä¸­ï¼ŒåŸºäºå…¶åˆ†äº«åŠŸèƒ½ï¼Œå°†ä¿¡æ¯ç½‘ç»œåŒ–è¾“å…¥è¾“å‡ºï¼ŒåŠ é€Ÿç»„ç»‡ä¼ æ’­ã€‚åšå®¢ã€å¾®åšå®¢ã€WIKIã€ç¤¾äº¤ç½‘ç»œã€å†…å®¹ç¤¾åŒºç­‰ï¼Œæ˜¯å¯ä»¥å¸¸è§åˆ°çš„ç¤¾ä¼šåŒ–åª’ä½“å½¢å¼ã€‚åœ¨å›½å†…è¿‘ä¸¤å¹´ï¼Œç¤¾ä¼šåŒ–åˆ†äº«çš„ä¼ æ’­é‡åˆä»¥QQç©ºé—´ã€æ–°æµªå¾®åšã€è…¾è®¯å¾®åšåŠ¿å¤´æœ€çŒ›ã€‚ ä¸ºåº”ç”¨ç¨‹åºæ·»åŠ ç¤¾ä¼šåŒ–åˆ†äº«çš„èƒ½åŠ›æœ¬èº«å¹¶ä¸å¤æ‚ï¼Œç¹ççš„åœ°æ–¹åœ¨äºä¸åŒçš„åˆ†äº«å¹³å°éœ€è¦æ¥å…¥ä¸åŒçš„SDKï¼Œä¾‹å¦‚è¦æ”¯æŒå¾®ä¿¡ã€QQã€å¾®åšè¿™3ç§å¹³å°çš„åˆ†äº«ï¼Œå°±è¦åˆ†åˆ«å¯¹å¾®ä¿¡SDKã€QQSDKå’Œå¾®åšSDKè¿›è¡Œæ¥å…¥ï¼Œè¿™äº›å·¥ä½œéå¸¸éº»çƒ¦ã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦å¿«é€Ÿçš„ä½¿åº”ç”¨ç¨‹åºå…·å¤‡ç¤¾ä¼šåŒ–åˆ†äº«èƒ½åŠ›ï¼Œæœ€å¿«æ·çš„æ–¹å¼æ˜¯é‡‡ç”¨ç¬¬ä¸‰æ–¹æ•´åˆçš„SDKè¿›è¡Œæ¥å…¥ï¼Œå‹ç›Ÿç¤¾ä¼šåŒ–åˆ†äº«å¹³å°å°±æä¾›äº†éå¸¸å¥½çš„è¿™ç§æœåŠ¡ã€‚ U-Shareç¤¾ä¼šåŒ–åˆ†äº«å¹³å°å®˜ç½‘å¦‚ä¸‹ï¼š https://www.umeng.com/social ç®€å•æ¥æ¦‚æ‹¬ï¼ŒU-Shareå¹³å°æä¾›äº†å¦‚ä¸‹åŠŸèƒ½ï¼š 1.ä¸€é”®åˆ†äº« 2.ä¸€é”®å”¤é†’ä¸æ‹‰æ–° 3.è¥é”€è£‚å˜æ•ˆæœè¿½è¸ª 4.è‡ªç”±å®šåˆ¶åˆ†äº«é¡µé¢ å¯¹U-Shareå·¥å…·çš„æ•´ä½“æ¥å…¥ä¹Ÿéå¸¸å®¹æ˜“ï¼Œæµç¨‹å¦‚ä¸‹ï¼š æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ç»“åˆå‹ç›Ÿç¤¾ä¼šåŒ–åˆ†äº«æœåŠ¡å¹³å°æ¥å®Œæ•´çš„ä»‹ç»å¦‚ä½•å¿«é€Ÿçš„ä¸ºåº”ç”¨ç¨‹åºæ·»åŠ åˆ†äº«åŠŸèƒ½ã€‚ä½ å°†æ”¶è·åˆ°ï¼š 1. ç¤¾ä¼šåŒ–åˆ†äº«æŠ€æœ¯çš„å®è·µç»éªŒ 2.å€ŸåŠ©å‹ç›Ÿå¹³å°å¿«é€Ÿå®ç°åº”ç”¨çš„ç¤¾ä¼šåŒ–åˆ†äº«åŠŸèƒ½ 3.èƒ½å¤Ÿè‡ªå®šä¹‰åˆ†äº«ç»„ä»¶ 4.å„ç§ç¤¾ä¼šåŒ–å¹³å°è¿›è¡Œåˆ†äº«çš„è´¦å·ç”³è¯·æµç¨‹ 5.ç­‰ç­‰â€¦ äºŒã€åˆ›å»ºå‹ç›Ÿåº”ç”¨è¦å€ŸåŠ©å‹ç›Ÿå¹³å°å®ç°ç¤¾ä¼šåŒ–åˆ†äº«åŠŸèƒ½ï¼Œé¦–å…ˆéœ€è¦åœ¨å‹ç›Ÿåå°åˆ›å»ºä¸€ä¸ªåº”ç”¨ç¨‹åºã€‚æ‰“å¼€å‰é¢æåˆ°çš„å‹ç›Ÿå®˜ç½‘ï¼Œå¦‚æœå·²æœ‰å‹ç›Ÿè´¦å·ï¼Œå¯ä»¥ç›´æ¥è¿›è¡Œç™»å½•ï¼Œæ²¡æœ‰çš„è¯æ³¨å†Œä¸€ä¸ªå‹ç›Ÿè´¦å·å³å¯ã€‚ç™»å½•æˆåŠŸåï¼Œç‚¹å‡»é¡µé¢ä¸Šçš„è¿›å…¥å·¥ä½œå°æŒ‰é’®å³å¯æ¥åå‹ç›Ÿç®¡ç†åå°ï¼Œå…¶ä¸­å¯ä»¥åˆ›å»ºå’Œç®¡ç†åº”ç”¨ã€‚ å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨å‹ç›Ÿåå°ï¼Œç¬¬ä¸€æ­¥éœ€è¦å…ˆåˆ›å»ºä¸€ä¸ªåº”ç”¨ï¼Œå‹ç›Ÿåº”ç”¨çš„åˆ›å»ºéå¸¸ç®€å•ï¼Œåªéœ€è¦æ ¹æ®æç¤ºæ¥ä¸€æ­¥æ­¥è¿›è¡Œé€‰æ‹©å³å¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š æˆ‘ä»¬éœ€è¦ä½¿ç”¨å“ªäº›åŠŸèƒ½åªéœ€è¦è¿›è¡Œå‹¾é€‰å³å¯ã€‚åˆ›å»ºå¥½äº†åº”ç”¨ç¨‹åºåï¼Œæˆ‘ä»¬å¯ä»¥åœ¨U-Shareåå°å¯¹æ­¤åº”ç”¨è¿›è¡ŒæŸ¥çœ‹å’Œç®¡ç†ï¼Œåœ¨åº”ç”¨è®¾ç½®é¡µé¢å¯ä»¥æŸ¥çœ‹AppKeyæ•°æ®ï¼Œè¿™ä¸ªæ•°æ®éå¸¸é‡è¦ï¼Œæˆ‘ä»¬åœ¨é›†æˆå‹ç›ŸSDKæ—¶éœ€è¦ä½¿ç”¨åˆ°æ­¤AppKeyã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œåœ¨U-Shareåå°ä¹Ÿæœ‰å¾ˆå¤šç»Ÿè®¡æ•°æ®ï¼Œè¯¦ç»†çš„è®°å½•äº†Appçš„åˆ†äº«æ¬¡æ•°ã€åˆ†äº«äººæ•°ã€å›æµç‡ã€æ–°ç”¨æˆ·æ•°ç­‰é‡è¦æ•°æ®ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬æŒç»­çš„å¯¹ä¸šåŠ¡è¿›è¡Œä¼˜åŒ–ã€‚ ä¸‰ã€å‹ç›ŸSDKçš„è·å–å’Œæ¥å…¥é›†æˆå‹ç›Ÿåˆ†äº«SDKçš„æ–¹å¼æœ‰ä¸¤ç§ï¼Œä½¿ç”¨CocoaPodsé›†æˆå’Œæ‰‹åŠ¨è¿›è¡Œé›†æˆã€‚ 1. ä½¿ç”¨CocoaPodsè¿›è¡Œé›†æˆä½¿ç”¨CocoaPodsé›†æˆéå¸¸æ–¹ä¾¿ï¼Œæ•´ä½“æ¥è¯´æœ‰3æ­¥ï¼š åˆ›å»ºPodFileæ–‡ä»¶ æ·»åŠ ä¾èµ– æ‰§è¡Œpod installå®‰è£…ä¾èµ–åº“ é¦–å…ˆåœ¨å·¥ç¨‹ç›®å½•ä¸‹æ‰§è¡Œpod initæŒ‡ä»¤æ¥åˆ›å»ºä¸€ä¸ªpodfileæ–‡ä»¶ï¼Œåœ¨å…¶ä¸­ç¼–å†™å¦‚ä¸‹ä»£ç ï¼š 123456789101112131415# Uncomment the next line to define a global platform for your project# platform :ios, '9.0'target 'UMShareTest' do # Comment the next line if you don't want to use dynamic frameworks use_frameworks! pod 'UMCommon' pod 'UMDevice' pod 'UMShare/UI' pod 'UMShare/Social/WeChat' pod 'UMShare/Social/QQ' pod 'UMShare/Social/Sina' # Pods for UMShareTestend åœ¨æ·»åŠ ä¾èµ–æ—¶ï¼ŒUMCommonã€UMDeviceæ˜¯å¿…é€‰ä¾èµ–ï¼ŒUMShare/UIæ˜¯ä¸€ä¸ªUIåº“ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨åˆ°å‹ç›Ÿæä¾›çš„åˆ†äº«UIç»„ä»¶ï¼Œå¯ä»¥åŠ å…¥è¿™ä¸ªåº“ã€‚WeChatã€QQå’ŒSinaæ˜¯ç¬¬ä¸‰æ–¹åˆ†äº«å¹³å°çš„SDKï¼Œæˆ‘ä»¬éœ€è¦å“ªäº›å°±å¼•å…¥å“ªäº›å³å¯ã€‚å‹ç›Ÿæ‰€æ”¯æŒçš„ç¬¬ä¸‰æ–¹å¹³å°å¯ä»¥åœ¨å¦‚ä¸‹æ–‡æ¡£ä¸­è¿›è¡ŒæŸ¥çœ‹ï¼š https://developer.umeng.com/docs/128606/detail/193653 2. æ‰‹åŠ¨é›†æˆæ‰‹åŠ¨é›†æˆæ˜¯æŒ‡æˆ‘ä»¬ç›´æ¥ä¸‹è½½å¥½æ‰€éœ€è¦çš„SDKï¼Œå°†å…¶åŠ å…¥å·¥ç¨‹å¹¶è¿›è¡Œç›¸å…³çš„é…ç½®ã€‚ç›¸æ¯”CocoaPodsçš„é›†æˆæ–¹å¼ï¼Œæ‰‹åŠ¨é›†æˆæ›´åŠ éº»çƒ¦ä¸€äº›ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ä¸‹è½½æ‰€éœ€çš„SDKï¼Œåœ¨å¦‚ä¸‹ç½‘å€ä¸­å¯ä»¥è¿›è¡Œä¸‹è½½ï¼š https://developer.umeng.com/sdk/ios åŒæ ·ï¼Œåœ¨ä¸‹è½½SDKæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œè®¾ç½®ï¼Œåªä¸‹è½½æ‰€éœ€è¦çš„åˆ†äº«å¹³å°çš„SDKï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¸‹è½½å®Œæˆåï¼Œåªéœ€è¦å°†è§£å‹å¥½çš„SDKæ–‡ä»¶å¤¹æ‹–å…¥åˆ°å·¥ç¨‹ä¸­å³å¯ã€‚ä¹‹ååœ¨Xcodeå·¥ç¨‹çš„Build Settingsä¸­çš„other linker flagsæ·»åŠ -Objcå‚æ•°ã€‚æœ€åï¼Œéœ€è¦å°†è¦ä¾èµ–çš„ç³»ç»Ÿåº“è¿›è¡Œæ·»åŠ ï¼Œåœ¨Link Binary With Librariesé‡Œè¿›è¡Œé…ç½®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š éœ€è¦æ³¨æ„ï¼Œè¿™é‡Œé…ç½®çš„ç³»ç»Ÿåº“å¯èƒ½ä¼šç”±äºæ‰€æ”¯æŒçš„åˆ†äº«å¹³å°ä¸åŒè€Œç•¥æœ‰ä¸åŒï¼Œå¯ä»¥åœ¨ä¸‹é¢æ–‡æ¡£ä¸­æ‰¾åˆ°å¯¹åº”åˆ†äº«å¹³å°éœ€è¦å¯¹åº”é…ç½®çš„ç³»ç»Ÿåº“ï¼š https://developer.umeng.com/docs/128606/detail/193653 å››ã€ä¸‰æ–¹å¹³å°ç‰©æ–™å‡†å¤‡é€šè¿‡å‰é¢çš„å‡†å¤‡ï¼Œå‹ç›Ÿåº”ç”¨å’ŒSDKéƒ¨åˆ†çš„é…ç½®åŸºæœ¬å·²ç»å®Œæˆï¼Œä½†åœ¨çœŸæ­£æ¥å…¥åˆ†äº«åŠŸèƒ½å‰ï¼Œè¿˜æœ‰è‡³å…³é‡è¦çš„ä¸€æ­¥éœ€è¦åšã€‚æˆ‘ä»¬éœ€è¦æ ¹æ®éœ€æ±‚ï¼Œæ¥ç”³è¯·å„ä¸ªå¼€æ”¾å¹³å°çš„å¼€å‘è€…è´¦å·ã€‚ä¾‹å¦‚æˆ‘ä»¬éœ€è¦æ”¯æŒå¾®ä¿¡ï¼ŒQQå’Œå¾®åšçš„åˆ†äº«æ“ä½œï¼Œå°±éœ€è¦ç”³è¯·å¾®ä¿¡å¼€æ”¾å¹³å°ï¼Œè…¾è®¯å¼€æ”¾å¹³å°å’Œå¾®åšå¼€æ”¾å¹³å°çš„è´¦å·ï¼Œå¹¶è¿›è¡Œåº”ç”¨çš„åˆ›å»ºã€‚ 1.å¾®ä¿¡å¼€æ”¾å¹³å°å¾®ä¿¡å¼€æ”¾å¹³å°çš„å®˜ç½‘å¦‚ä¸‹ï¼š https://open.weixin.qq.com/ åœ¨å¼€æ”¾å¹³å°æ³¨å†Œäº†å¼€å‘è€…è´¦å·åï¼Œå³å¯è¿›è¡Œåº”ç”¨åˆ›å»ºï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å°†æ‰€éœ€è¦æä¾›çš„ä¿¡æ¯å¡«å†™åï¼Œå³å¯åˆ›å»ºåº”ç”¨ç¨‹åºã€‚éœ€è¦æ³¨æ„ï¼Œåœ¨é…ç½®åº”ç”¨ç¨‹åºæ—¶ï¼Œå…¶è®¾ç½®çš„bundle IDçš„å€¼è¦ä¸å·¥ç¨‹ä¸­çš„é…ç½®ä¸€è‡´ã€‚æäº¤äº†åˆ›å»ºåº”ç”¨çš„ç”³è¯·åï¼Œéœ€è¦ç­‰å¾…å¾®ä¿¡å¼€æ”¾å¹³å°çš„å®¡æ ¸ï¼Œå®¡æ ¸å®Œæˆåå¯ä»¥å¾—åˆ°åº”ç”¨çš„AppIDå’ŒAppSecretï¼Œè¿™ä¸¤ä¸ªå‚æ•°åœ¨æˆ‘ä»¬é…ç½®åˆ†äº«æ—¶ä¼šä½¿ç”¨åˆ°ã€‚ 2.è…¾è®¯å¼€æ”¾å¹³å°å’Œå¾®ä¿¡å¼€æ”¾å¹³å°ç±»ä¼¼ï¼Œè¦æ”¯æŒè¿›è¡ŒQQç›¸å…³åˆ†äº«æ“ä½œéœ€è¦ç”³è¯·ä¸€ä¸ªè…¾è®¯å¼€æ”¾å¹³å°çš„è´¦å·ï¼Œåœ°å€å¦‚ä¸‹ï¼š https://open.tencent.com/ åœ¨ç”³è¯·åº”ç”¨æ—¶åŒæ ·éœ€è¦å¡«å†™ä¸€äº›åŸºæœ¬ä¿¡æ¯ï¼Œåº”ç”¨ç”³è¯·åï¼Œå¯ä»¥å¾—åˆ°AppIDå’ŒAppKeyç›¸å…³å‚æ•°ç”¨æ¥è¿›è¡Œåˆ†äº«é…ç½®ï¼Œå¦‚ä¸‹å›¾ï¼š å…¶ä»–å„ç§å¼€å‘å¹³å°çš„åº”ç”¨åˆ›å»ºå’Œé…ç½®é€»è¾‘åŸºæœ¬å¤§åŒå°å¼‚ï¼Œåœ¨å‹ç›Ÿçš„å¦‚ä¸‹æ–‡æ¡£ä¸­æ‰¾åˆ°å…·ä½“çš„ç”³è¯·æ–¹æ³•ï¼š https://developer.umeng.com/docs/128606/detail/193651 äº”ã€æ¥å…¥åˆ†äº«åŠŸèƒ½ç°åœ¨ï¼Œä¸‡äº‹ä¿±å¤‡ï¼Œåªæ¬ ä¸œé£ã€‚æˆ‘ä»¬å·²ç»åšå®Œäº†å®ç°åˆ†äº«åŠŸèƒ½çš„æ‰€æœ‰å‡†å¤‡å·¥ä½œã€‚å¯ä»¥è¿›è¡Œå·¥ç¨‹çš„é…ç½®å’Œä»£ç çš„ç¼–å†™äº†ã€‚ 1. åˆå§‹åŒ–å‹ç›ŸSDKä¸å›è°ƒè®¾ç½®åˆå§‹åŒ–å‹ç›ŸSDKæ˜¯ä½¿ç”¨åˆ†äº«åŠŸèƒ½çš„ç¬¬ä¸€æ­¥ï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦åˆå§‹åŒ–å‹ç›Ÿåº”ç”¨å¹¶ä¸ºå„ä¸ªåˆ†äº«å¹³å°è¿›è¡Œé…ç½®ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions &#123; [self configShare]; [self configPlatform]; return YES;&#125;- (void)configShare &#123; [UMConfigure initWithAppkey:@\"602505af668f9e17b8aef059\" channel:nil]; [UMSocialGlobal shareInstance].universalLinkDic = @&#123; @(UMSocialPlatformType_WechatSession):@\"https://umplus-sdk-download.oss-cn-shanghai.aliyuncs.com/\", @(UMSocialPlatformType_QQ):@\"https://umplus-sdk-download.oss-cn-shanghai.aliyuncs.com/qq_conn/101830139\" &#125;;&#125;- (void)configPlatform &#123; [[UMSocialManager defaultManager] setPlaform:UMSocialPlatformType_WechatSession appKey:@\"wxdc1e388c3822c80b\" appSecret:@\"3baf1193c85774b3fd9d18447d76cab0\" redirectURL:@\"http://mobile.umeng.com/social\"]; [[UMSocialManager defaultManager] setLauchFromPlatform:(UMSocialPlatformType_WechatSession) completion:^(id userInfoResponse, NSError *error) &#123; NSLog(@\"setLauchFromPlatform:userInfoResponse:%@\",userInfoResponse); &#125;]; [[UMSocialManager defaultManager] setPlaform:UMSocialPlatformType_QQ appKey:@\"1105821097\" appSecret:nil redirectURL:@\"http://mobile.umeng.com/social\"]; [[UMSocialManager defaultManager] setPlaform:UMSocialPlatformType_Sina appKey:@\"3921700954\" appSecret:@\"04b48b094faeb16683c32669824ebdad\" redirectURL:@\"https://sns.whalecloud.com/sina2/callback\"];&#125; ä¸Šé¢ä»£ç éƒ½å†™åœ¨AppDelegateç±»ä¸­ï¼Œå®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ ¹æ®ä½¿ç”¨æ—¶æœºæ¥è¿›è¡Œåˆå§‹åŒ–ã€‚ä¸Šé¢ä»£ç ä¸­ï¼ŒconfigShareæ–¹æ³•ç”¨æ¥è¿›è¡Œå‹ç›ŸSDKæœ¬èº«çš„åˆå§‹åŒ–å’Œé…ç½®ï¼ŒconfigPlatformæ–¹æ³•ç”¨æ¥å¯¹ç¬¬ä¸‰æ–¹åˆ†äº«å¹³å°è¿›è¡Œé…ç½®ã€‚ è¿˜éœ€è¦å®ç°å‡ ä¸ªAppDelegateçš„å›è°ƒæ¥å¤„ç†é€šè¿‡åˆ†äº«é“¾æ¥æ‰“å¼€Appåçš„åç»­é€»è¾‘ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url &#123; BOOL res = [[UMSocialManager defaultManager] handleOpenURL:url]; return res;&#125;- (BOOL)application:(UIApplication *)app openURL:(NSURL *)url options:(NSDictionary&lt;UIApplicationOpenURLOptionsKey,id&gt; *)options &#123; BOOL res = [[UMSocialManager defaultManager] handleOpenURL:url options:options]; return res;&#125;- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation &#123; BOOL res = [[UMSocialManager defaultManager] handleOpenURL:url sourceApplication:sourceApplication annotation:annotation]; return res;&#125;- (BOOL)application:(UIApplication *)application continueUserActivity:(NSUserActivity *)userActivity restorationHandler:(void (^)(NSArray&lt;id&lt;UIUserActivityRestoring&gt;&gt; * _Nullable))restorationHandler &#123; BOOL res = [[UMSocialManager defaultManager] handleUniversalLink:userActivity options:nil]; return res;&#125; 2. ç™½åå•é…ç½®ç›®å‰ï¼Œä»£ç é…ç½®éƒ¨åˆ†åŸºæœ¬å®Œæˆï¼Œä¸‹é¢æˆ‘ä»¬éœ€è¦åœ¨å·¥ç¨‹çš„info.plistæ–‡ä»¶ä¸­å¯¹è¦åˆ†äº«çš„ä¸‰æ–¹å¹³å°è¿›è¡Œç™½åå•é…ç½®ã€‚åœ¨info.plistæ–‡ä»¶ä¸­æ·»åŠ LSApplicationQueriesSchemesé”®ï¼Œå…¶å€¼é…ç½®ä¸ºåˆ—è¡¨ï¼Œå…·ä½“å„ä¸ªåˆ†äº«å¹³å°çš„ç™½åå•åˆ—ä¸¾å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156&lt;key&gt;LSApplicationQueriesSchemes&lt;/key&gt;&lt;array&gt; &lt;!-- å¾®ä¿¡ URL Scheme ç™½åå•--&gt; &lt;string&gt;wechat&lt;/string&gt; &lt;string&gt;weixin&lt;/string&gt; &lt;string&gt;weixinULAPI&lt;/string&gt; &lt;!-- QQã€Qzone URL Scheme ç™½åå•--&gt; &lt;string&gt;mqqopensdklaunchminiapp&lt;/string&gt; &lt;string&gt;mqqopensdkminiapp&lt;/string&gt; &lt;string&gt;mqqapi&lt;/string&gt; &lt;string&gt;mqq&lt;/string&gt; &lt;string&gt;mqqOpensdkSSoLogin&lt;/string&gt; &lt;string&gt;mqqconnect&lt;/string&gt; &lt;string&gt;mqqopensdkdataline&lt;/string&gt; &lt;string&gt;mqqopensdkgrouptribeshare&lt;/string&gt; &lt;string&gt;mqqopensdkfriend&lt;/string&gt; &lt;string&gt;mqqopensdkapi&lt;/string&gt; &lt;string&gt;mqqopensdkapiV2&lt;/string&gt; &lt;string&gt;mqqopensdkapiV3&lt;/string&gt; &lt;string&gt;mqqopensdkapiV4&lt;/string&gt; &lt;string&gt;mqzoneopensdk&lt;/string&gt; &lt;string&gt;wtloginmqq&lt;/string&gt; &lt;string&gt;wtloginmqq2&lt;/string&gt; &lt;string&gt;mqqwpa&lt;/string&gt; &lt;string&gt;mqzone&lt;/string&gt; &lt;string&gt;mqzonev2&lt;/string&gt; &lt;string&gt;mqzoneshare&lt;/string&gt; &lt;string&gt;wtloginqzone&lt;/string&gt; &lt;string&gt;mqzonewx&lt;/string&gt; &lt;string&gt;mqzoneopensdkapiV2&lt;/string&gt; &lt;string&gt;mqzoneopensdkapi19&lt;/string&gt; &lt;string&gt;mqzoneopensdkapi&lt;/string&gt; &lt;string&gt;mqqbrowser&lt;/string&gt; &lt;string&gt;mttbrowser&lt;/string&gt; &lt;string&gt;tim&lt;/string&gt; &lt;string&gt;timapi&lt;/string&gt; &lt;string&gt;timopensdkfriend&lt;/string&gt; &lt;string&gt;timwpa&lt;/string&gt; &lt;string&gt;timgamebindinggroup&lt;/string&gt; &lt;string&gt;timapiwallet&lt;/string&gt; &lt;string&gt;timOpensdkSSoLogin&lt;/string&gt; &lt;string&gt;wtlogintim&lt;/string&gt; &lt;string&gt;timopensdkgrouptribeshare&lt;/string&gt; &lt;string&gt;timopensdkapiV4&lt;/string&gt; &lt;string&gt;timgamebindinggroup&lt;/string&gt; &lt;string&gt;timopensdkdataline&lt;/string&gt; &lt;string&gt;wtlogintimV1&lt;/string&gt; &lt;string&gt;timapiV1&lt;/string&gt; &lt;!-- æ–°æµªå¾®åš URL Scheme ç™½åå•--&gt; &lt;string&gt;sinaweibohd&lt;/string&gt; &lt;string&gt;sinaweibo&lt;/string&gt; &lt;string&gt;sinaweibosso&lt;/string&gt; &lt;string&gt;weibosdk&lt;/string&gt; &lt;string&gt;weibosdk2.5&lt;/string&gt; &lt;!-- æ”¯ä»˜å® URL Scheme ç™½åå•--&gt; &lt;string&gt;alipay&lt;/string&gt; &lt;string&gt;alipayshare&lt;/string&gt; &lt;!-- é’‰é’‰ URL Scheme ç™½åå•--&gt; &lt;string&gt;dingtalk&lt;/string&gt; &lt;string&gt;dingtalk-open&lt;/string&gt; &lt;!-- ä¼ä¸šå¾®ä¿¡--&gt; &lt;string&gt;wxwork&lt;/string&gt; &lt;string&gt;wxworkdebug&lt;/string&gt; &lt;string&gt;wxworkrdm&lt;/string&gt; &lt;string&gt;wxworkrelease&lt;/string&gt; &lt;!--æŠ–éŸ³--&gt; &lt;string&gt;douyinopensdk&lt;/string&gt; &lt;string&gt;douyinsharesdk&lt;/string&gt; &lt;string&gt;snssdk1128&lt;/string&gt; &lt;!--Linkedin URL Scheme ç™½åå•--&gt; &lt;string&gt;linkedin&lt;/string&gt; &lt;string&gt;linkedin-sdk2&lt;/string&gt; &lt;string&gt;linkedin-sdk&lt;/string&gt; &lt;!-- æ˜“ä¿¡ URL Scheme ç™½åå•--&gt; &lt;string&gt;yixin&lt;/string&gt; &lt;string&gt;yixinopenapi&lt;/string&gt; &lt;!-- instagram URL Scheme ç™½åå•--&gt; &lt;string&gt;instagram&lt;/string&gt; &lt;!-- whatsapp URL Scheme ç™½åå•--&gt; &lt;string&gt;whatsapp&lt;/string&gt; &lt;!-- line URL Scheme ç™½åå•--&gt; &lt;string&gt;line&lt;/string&gt; &lt;!-- Facebook URL Scheme ç™½åå•--&gt; &lt;string&gt;fbapi&lt;/string&gt; &lt;string&gt;fb-messenger-api&lt;/string&gt; &lt;string&gt;fb-messenger-share-api&lt;/string&gt; &lt;string&gt;fbauth2&lt;/string&gt; &lt;string&gt;fbshareextension&lt;/string&gt; &lt;!-- Kakao URL Scheme ç™½åå•--&gt; &lt;!-- æ³¨ï¼šä»¥ä¸‹ç¬¬ä¸€ä¸ªå‚æ•°éœ€æ›¿æ¢ä¸ºè‡ªå·±çš„kakao appkey--&gt; &lt;!-- æ ¼å¼ä¸º kakao + \"kakao appkey\"--&gt; &lt;string&gt;kakaofa63a0b2356e923f3edd6512d531f546&lt;/string&gt; &lt;string&gt;kakaokompassauth&lt;/string&gt; &lt;string&gt;storykompassauth&lt;/string&gt; &lt;string&gt;kakaolink&lt;/string&gt; &lt;string&gt;kakaotalk-4.5.0&lt;/string&gt; &lt;string&gt;kakaostory-2.9.0&lt;/string&gt; &lt;!-- pinterest URL Scheme ç™½åå•--&gt; &lt;string&gt;pinterestsdk.v1&lt;/string&gt; &lt;!-- Tumblr URL Scheme ç™½åå•--&gt; &lt;string&gt;tumblr&lt;/string&gt; &lt;!-- å°è±¡ç¬”è®° --&gt; &lt;string&gt;evernote&lt;/string&gt; &lt;string&gt;en&lt;/string&gt; &lt;string&gt;enx&lt;/string&gt; &lt;string&gt;evernotecid&lt;/string&gt; &lt;string&gt;evernotemsg&lt;/string&gt; &lt;!-- æœ‰é“äº‘ç¬”è®°--&gt; &lt;string&gt;youdaonote&lt;/string&gt; &lt;string&gt;ynotedictfav&lt;/string&gt; &lt;string&gt;com.youdao.note.todayViewNote&lt;/string&gt; &lt;string&gt;ynotesharesdk&lt;/string&gt; &lt;!-- Google+--&gt; &lt;string&gt;gplus&lt;/string&gt; &lt;!-- Pocket--&gt; &lt;string&gt;pocket&lt;/string&gt; &lt;string&gt;readitlater&lt;/string&gt; &lt;string&gt;pocket-oauth-v1&lt;/string&gt; &lt;string&gt;fb131450656879143&lt;/string&gt; &lt;string&gt;en-readitlater-5776&lt;/string&gt; &lt;string&gt;com.ideashower.ReadItLaterPro3&lt;/string&gt; &lt;string&gt;com.ideashower.ReadItLaterPro&lt;/string&gt; &lt;string&gt;com.ideashower.ReadItLaterProAlpha&lt;/string&gt; &lt;string&gt;com.ideashower.ReadItLaterProEnterprise&lt;/string&gt; &lt;!-- VKontakte--&gt; &lt;string&gt;vk&lt;/string&gt; &lt;string&gt;vk-share&lt;/string&gt; &lt;string&gt;vkauthorize&lt;/string&gt; &lt;!-- Twitter--&gt; &lt;string&gt;twitter&lt;/string&gt; &lt;string&gt;twitterauth&lt;/string&gt;&lt;/array&gt; éœ€è¦æ³¨æ„ï¼Œé»˜è®¤åœ¨Xocdeä¸­æ‰“å¼€çš„info.plistæ–‡ä»¶æ˜¯ä»¥plistæµè§ˆæ¨¡å¼æ‰“å¼€çš„ï¼Œå¦‚ä¸‹ï¼š æˆ‘ä»¬å¯ä»¥ä»¥æ–‡æœ¬çš„æ–¹å¼æ‰“å¼€ï¼Œå°†æ‰€éœ€è¦çš„ä»£ç å¤åˆ¶è¿›å»å³å¯ï¼Œæ–¹æ³•å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 3.é…ç½®URL Schemeé…ç½®ç™½åå•çš„ç›®çš„æ˜¯ä¸ºäº†è®©æˆ‘ä»¬çš„åº”ç”¨å¯ä»¥æ‰“å¼€ç¬¬ä¸‰æ–¹Appè¿›è¡Œåˆ†äº«æ“ä½œï¼Œè€Œé…ç½®URL Schemeçš„ä½œç”¨æ˜¯å½“åˆ†äº«æ“ä½œå®Œæˆåï¼Œç¬¬ä¸‰æ–¹Appå¯ä»¥å†æ¬¡å”¤é†’æˆ‘ä»¬çš„Appï¼Œå›åˆ°Appå†…åšåç»­é€»è¾‘ã€‚ åœ¨å·¥ç¨‹çš„Infoé¡¹ç›®ä¸­è¿›è¡ŒURL Typesçš„é…ç½®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¦‚ä¸Šå›¾ä¸­ï¼Œæˆ‘ä»¬åªé…ç½®äº†å¾®ä¿¡å’ŒQQçš„URL Schemeï¼Œåœ¨é…ç½®çš„æ—¶å€™ï¼Œä¸åŒå¹³å°æœ‰ä¸åŒçš„è§„åˆ™ï¼Œä¾‹å¦‚å¾®ä¿¡æ˜¯ï¼š wx + å¾®ä¿¡å¼€æ”¾å¹³å°çš„åº”ç”¨appKey å…·ä½“æ¯ä¸ªåˆ†äº«å¹³å°çš„é…ç½®è§„åˆ™å¯å‚è€ƒå¦‚ä¸‹æ–‡æ¡£ï¼š https://developer.umeng.com/docs/128606/detail/193653#h3â€“sso-12 å…­ã€è¿›è¡Œåˆ†äº«æ“ä½œå‰é¢çš„å·¥ä½œå®Œæˆåï¼Œè¿›è¡Œåˆ†äº«æ“ä½œå°±éå¸¸å®¹æ˜“ï¼Œä»¥æ–‡æœ¬åˆ†äº«ä¸ºä¾‹ï¼Œåªéœ€è¦åˆ›å»ºå‡ºUMSocialMessageObjectå¯¹è±¡å³å¯ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567- (void)shareText:(UMSocialPlatformType)type &#123; UMSocialMessageObject *object = [[UMSocialMessageObject alloc] init]; object.text = @\"title\"; [[UMSocialManager defaultManager] shareToPlatform:type messageObject:object currentViewController:self completion:^(id result, NSError *error) &#123; NSLog(@\"%@\",error); &#125;];&#125; åŒæ ·ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ†äº«ç½‘é¡µã€å°ç¨‹åºã€å›¾æ–‡ã€è§†é¢‘ã€éŸ³ä¹ç­‰æ•°æ®ï¼Œä½¿ç”¨ä¸åŒçš„ä¼ å‚å³å¯ï¼Œå…·ä½“åˆ†äº«ç±»å‹çš„ä¼ å‚æ–¹å¼å¯ä»¥åœ¨ä¸‹é¢çš„æ–‡æ¡£ä¸­æŸ¥è¯¢ï¼š https://developer.umeng.com/docs/128606/detail/193655#h2-u5206u4EABu7F51u9875u94FEu63A51 è°ƒç”¨å¦‚ä¸Šçš„æ–¹æ³•è¿›è¡Œåˆ†äº«æ˜¯çº¯ä¸šåŠ¡é€»è¾‘å±‚é¢çš„ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€æ±‚ä»»æ„çš„å®šåˆ¶åŒ–è‡ªå·±çš„åˆ†äº«UIã€‚å¦‚æœä½ æ¥å…¥äº†UShareUIåº“ï¼Œåˆ™å¯ä»¥ä»…ä»…é€šè¿‡ä¸€äº›ç®€å•çš„é…ç½®ï¼Œæ›´åŠ å¿«é€Ÿçš„æ¥å…¥åˆ†äº«åŠŸèƒ½ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223@implementation ViewController- (void)viewDidLoad &#123; [super viewDidLoad]; [UMSocialShareUIConfig shareInstance].sharePageScrollViewConfig.shareScrollViewBackgroundColor = [UIColor greenColor]; &#125;- (IBAction)share:(id)sender &#123; [UMSocialUIManager showShareMenuViewInWindowWithPlatformSelectionBlock:^(UMSocialPlatformType platformType, NSDictionary *userInfo) &#123; [self shareText:platformType]; &#125;];&#125;- (void)shareText:(UMSocialPlatformType)type &#123; UMSocialMessageObject *object = [[UMSocialMessageObject alloc] init]; object.text = @\"title\"; [[UMSocialManager defaultManager] shareToPlatform:type messageObject:object currentViewController:self completion:^(id result, NSError *error) &#123; NSLog(@\"%@\",error); &#125;];&#125;@end è¿è¡Œä¸Šé¢ä»£ç ï¼Œæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š è¿™ä¸ªåˆ†äº«é¢æ¿ä¸­çš„ç»„ä»¶éƒ½æœ‰æš´éœ²æ¥å£ä¾›å¼€å‘è€…è¿›è¡Œå®šåˆ¶åŒ–ä½¿ç”¨ï¼Œæ¥å…¥éå¸¸ä¾¿æ·ã€‚","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSåŸç†åˆ†æä¹‹ä»æºç çœ‹loadä¸initializeæ–¹æ³•","slug":"409iOSåŸç†åˆ†æä¹‹ä»æºç çœ‹loadä¸initializeæ–¹æ³•","date":"2021-02-17T16:00:00.000Z","updated":"2021-07-15T11:32:53.551Z","comments":true,"path":"2021/02/18/409iOSåŸç†åˆ†æä¹‹ä»æºç çœ‹loadä¸initializeæ–¹æ³•/","link":"","permalink":"http://huishao.cc/2021/02/18/409iOSåŸç†åˆ†æä¹‹ä»æºç çœ‹loadä¸initializeæ–¹æ³•/","excerpt":"","text":"iOSåŸç†åˆ†æä¹‹ä»æºç çœ‹loadä¸initializeæ–¹æ³•ä¸€ã€å¼•è¨€åœ¨iOSå¼€å‘ä¸­ï¼ŒNSObjectç±»æ˜¯ä¸‡äº‹ä¸‡ç‰©çš„åŸºç±»ï¼Œå…¶åœ¨Objective-Cçš„æ•´ç†ç±»æ¶æ„ä¸­éå¸¸é‡è¦ï¼Œå…¶ä¸­æœ‰ä¸¤ä¸ªå¾ˆæœ‰åçš„æ–¹æ³•ï¼šloadæ–¹æ³•ä¸initializeæ–¹æ³•ã€‚ 12+ (void)load;+ (void)initialize; è¯´èµ·è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œä½ çš„ç¬¬ä¸€ååº”ä¸€å®šæ˜¯è§‰å¾—å¤ªè€å¥—äº†ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•çš„è°ƒç”¨æ—¶æœºåŠä½œç”¨å‡ ä¹æˆä¸ºäº†iOSé¢è¯•çš„å¿…è€ƒé¢˜ã€‚å…¶æœ¬èº«è°ƒç”¨æ—¶æœºä¹Ÿéå¸¸ç®€å•ï¼š 1. loadæ–¹æ³•åœ¨pre-mainé˜¶æ®µè¢«è°ƒç”¨ï¼Œæ¯ä¸ªç±»éƒ½ä¼šè°ƒç”¨ä¸”åªä¼šè°ƒç”¨ä¸€æ¬¡ã€‚ 2. initializeæ–¹æ³•åœ¨ç±»æˆ–å­ç±»ç¬¬ä¸€æ¬¡è¿›è¡Œæ–¹æ³•è°ƒç”¨å‰ä¼šè°ƒç”¨ã€‚ ä¸Šé¢çš„ä¸¤ç‚¹è¯´æ˜æœ¬èº«æ˜¯æ­£ç¡®çš„ï¼Œä½†æ˜¯é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰è®¸å¤šé—®é¢˜å€¼å¾—æˆ‘ä»¬æ·±ç©¶ï¼Œä¾‹å¦‚ï¼š 1. å­ç±»ä¸çˆ¶ç±»çš„loadæ–¹æ³•çš„è°ƒç”¨é¡ºåºæ˜¯æ€æ ·çš„ï¼Ÿ 2. ç±»ä¸åˆ†ç±»çš„loadæ–¹æ³•è°ƒç”¨é¡ºåºæ˜¯æ€æ ·çš„ï¼Ÿ 3. å­ç±»æœªå®ç°loadæ–¹æ³•ï¼Œä¼šè°ƒç”¨çˆ¶ç±»çš„ä¹ˆï¼Ÿ 4. å½“æœ‰å¤šä¸ªåˆ†ç±»éƒ½å®ç°äº†loadæ–¹æ³•æ—¶ï¼Œä¼šæ€ä¹ˆæ ·ï¼Ÿ 5. æ¯ä¸ªç±»çš„loadæ–¹æ³•çš„è°ƒç”¨é¡ºåºæ˜¯æ€æ ·çš„ï¼Ÿ 6. çˆ¶ç±»ä¸å­ç±»çš„initializeçš„æ–¹æ³•è°ƒç”¨é¡ºåºæ˜¯æ€æ ·çš„ï¼Ÿ 7. å­ç±»å®ç°initializeæ–¹æ³•åï¼Œè¿˜ä¼šè°ƒç”¨çˆ¶ç±»çš„initializeæ–¹æ³•ä¹ˆï¼Ÿ 8. å¤šä¸ªåˆ†ç±»éƒ½å®ç°äº†initializeæ–¹æ³•åï¼Œä¼šæ€ä¹ˆæ ·ï¼Ÿ 9. â€¦ å¦‚ä¸Šæ‰€æåˆ°çš„é—®é¢˜ï¼Œä½ ç°åœ¨éƒ½èƒ½ç»™å‡ºæ˜ç¡®çš„ç­”æ¡ˆä¹ˆï¼Ÿå…¶å®ï¼Œloadä¸initializeæ–¹æ³•æœ¬èº«è¿˜æœ‰è®¸å¤šéå¸¸æœ‰æ„æ€çš„ç‰¹ç‚¹ï¼Œæœ¬ç¯‡åšå®¢ï¼Œæˆ‘ä»¬å°†ç»“åˆObjective-Cæºç ï¼Œå¯¹è¿™ä¸¤ä¸ªæ–¹æ³•çš„å®ç°åŸç†åšæ·±å…¥çš„åˆ†æï¼Œç›¸ä¿¡ï¼Œå¦‚æœä½ å¯¹loadä¸initializeè¿˜ä¸å¤Ÿäº†è§£ï¼Œä¸èƒ½å®Œå…¨æ˜ç™½ä¸Šé¢æ‰€æå‡ºçš„é—®é¢˜ï¼Œé‚£ä¹ˆæœ¬ç¯‡åšå®¢å°†ä¼šä½¿å…¶æ”¶è·æ»¡æ»¡ã€‚æ— è®ºåœ¨ä»¥åçš„é¢è¯•ä¸­ï¼Œè¿˜æ˜¯å·¥ä½œä¸­ä½¿ç”¨åˆ°loadå’Œinitializeæ–¹æ³•æ—¶ï¼Œéƒ½å¯èƒ½å¸®åŠ©ä½ ä»æºç ä¸Šç†è§£å…¶æ‰§è¡ŒåŸç†ã€‚ äºŒã€å®è·µå‡ºçœŸçŸ¥ - å…ˆçœ‹loadæ–¹æ³•åœ¨å¼€å§‹åˆ†æä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆå¯ä»¥å…ˆåˆ›å»ºä¸€ä¸ªæµ‹è¯•å·¥ç¨‹ï¼Œå¯¹loadæ–¹æ³•çš„æ‰§è¡Œæ—¶æœºå…ˆåšä¸€ä¸ªç®€å•çš„æµ‹è¯•ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªXcodeçš„å‘½ä»¤è¡Œç¨‹åºå·¥ç¨‹ï¼Œåœ¨å…¶ä¸­åˆ›å»ºä¸€äº›ç±»ã€å­ç±»å’Œåˆ†ç±»ï¼Œæ–¹ä¾¿æˆ‘ä»¬æµ‹è¯•ï¼Œç›®å½•ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å…¶ä¸­ï¼ŒMyObjectOneå’ŒMyObjectTwoéƒ½æ˜¯ç»§æ‰¿è‡ªNSObjectçš„ç±»ï¼ŒMySubObjectOneæ˜¯MyObjectOneçš„å­ç±»ï¼ŒMySubObjectTwoæ˜¯MyObjectTwoçš„å­ç±»ï¼ŒåŒæ—¶æˆ‘ä»¬è¿˜åˆ›å»ºäº†3ä¸ªåˆ†ç±»ï¼Œåœ¨ç±»ä¸­å®ç°loadæ–¹æ³•ï¼Œå¹¶åšæ‰“å°å¤„ç†ï¼Œå¦‚ä¸‹ï¼š 123+ (void)load &#123; NSLog(@\"load:%@\", [self className]);&#125; åŒæ ·ï¼Œç±»ä¼¼çš„ä¹Ÿåœ¨åˆ†ç±»ä¸­åšå®ç°ï¼š 123+ (void)load &#123; NSLog(@\"load-category:%@\", [self className]);&#125; æœ€åæˆ‘ä»¬åœ¨mainå‡½æ•°ä¸­æ·»åŠ ä¸€ä¸ªLogï¼š 123456int main(int argc, const char * argv[]) &#123; @autoreleasepool &#123; NSLog(@\"Main\"); &#125; return 0;&#125; è¿è¡Œå·¥ç¨‹ï¼Œæ‰“å°ç»“æœå¦‚ä¸‹ï¼š 123456782021-02-18 14:33:46.773294+0800 KCObjc[21400:23090040] load:MyObjectOne2021-02-18 14:33:46.773867+0800 KCObjc[21400:23090040] load:MySubObjectOne2021-02-18 14:33:46.773959+0800 KCObjc[21400:23090040] load:MyObjectTwo2021-02-18 14:33:46.774008+0800 KCObjc[21400:23090040] load:MySubObjectTwo2021-02-18 14:33:46.774052+0800 KCObjc[21400:23090040] load-category:MyObjectTwo2021-02-18 14:33:46.774090+0800 KCObjc[21400:23090040] load-category:MyObjectOne2021-02-18 14:33:46.774127+0800 KCObjc[21400:23090040] load-category:MyObjectOne2021-02-18 14:33:46.774231+0800 KCObjc[21400:23090040] Main ä»æ‰“å°ç»“æœå¯ä»¥çœ‹å‡ºï¼Œloadæ–¹æ³•åœ¨mainæ–¹æ³•å¼€å§‹ä¹‹å‰è¢«è°ƒç”¨ï¼Œæ‰§è¡Œé¡ºåºä¸Šæ¥è¯´ï¼Œå…ˆè°ƒç”¨ç±»çš„loadæ–¹æ³•ï¼Œå†è°ƒç”¨åˆ†ç±»çš„loadæ–¹æ³•ï¼Œä»çˆ¶å­ç±»çš„å…³ç³»ä¸Šçœ‹æ¥ï¼Œå…ˆè°ƒç”¨çˆ¶ç±»çš„loadæ–¹æ³•ï¼Œå†è°ƒç”¨å­ç±»çš„loadæ–¹æ³•ã€‚ ä¸‹é¢ï¼Œæˆ‘ä»¬å°±ä»æºç ä¸Šæ¥åˆ†æä¸‹ï¼Œç³»ç»Ÿå¦‚æ­¤è°ƒç”¨loadæ–¹æ³•ï¼Œæ˜¯æºè‡ªäºä»€ä¹ˆæ ·çš„å¥¥å¦™ã€‚ ä¸‰ã€ä»æºç åˆ†æloadæ–¹æ³•çš„è°ƒç”¨è¦æ·±å…¥çš„ç ”ç©¶loadæ–¹æ³•ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦ä»Objective-Cçš„åˆå§‹åŒ–å‡½æ•°è¯´èµ·ï¼š 12345678910111213141516171819202122void _objc_init(void)&#123; static bool initialized = false; if (initialized) return; initialized = true; // fixme defer initialization until an objc-using image is found? environ_init(); tls_init(); static_init(); runtime_init(); exception_init(); cache_init(); _imp_implementationWithBlock_init(); // å…¶ä»–çš„æˆ‘ä»¬éƒ½ä¸éœ€è¦å…³æ³¨ï¼Œåªéœ€è¦å…³æ³¨è¿™è¡Œä»£ç  _dyld_objc_notify_register(&amp;map_images, load_images, unmap_image);#if __OBJC2__ didCallDyldNotifyRegister = true;#endif&#125; _objc_initå‡½æ•°å®šä¹‰åœ¨objc-os.mmæ–‡ä»¶ä¸­ï¼Œè¿™ä¸ªå‡½æ•°ç”¨æ¥åšObjective-Cç¨‹åºçš„åˆå§‹åŒ–ï¼Œç”±å¼•å¯¼ç¨‹åºè¿›è¡Œè°ƒç”¨ï¼Œå…¶è°ƒç”¨å®é™…ä¼šéå¸¸çš„æ—©ï¼Œå¹¶ä¸”æ˜¯æ“ä½œç³»ç»Ÿå¼•å¯¼ç¨‹åºå¤æ‚è°ƒç”¨é©±åŠ¨ï¼Œå¯¹å¼€å‘è€…æ— æ„Ÿã€‚åœ¨_objc_initå‡½æ•°ä¸­ï¼Œä¼šè¿›è¡Œç¯å¢ƒçš„åˆå§‹åŒ–ï¼Œruntimeçš„åˆå§‹åŒ–ä»¥åŠç¼“å­˜çš„åˆå§‹åŒ–ç­‰ç­‰æ“ä½œï¼Œå…¶ä¸­å¾ˆé‡è¦çš„ä¸€æ­¥æ“ä½œæ˜¯æ‰§è¡Œ_dyld_objc_notify_registerå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¼šè°ƒç”¨load_imageså‡½æ•°æ¥è¿›è¡Œé•œåƒçš„åŠ è½½ã€‚ loadæ–¹æ³•çš„è°ƒç”¨ï¼Œå…¶å®å°±æ˜¯ç±»åŠ è½½è¿‡ç¨‹ä¸­çš„ä¸€æ­¥ï¼Œé¦–å…ˆï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªload_imageså‡½æ•°çš„å®ç°ï¼š 12345678910111213141516171819202122voidload_images(const char *path __unused, const struct mach_header *mh)&#123; if (!didInitialAttachCategories &amp;&amp; didCallDyldNotifyRegister) &#123; didInitialAttachCategories = true; loadAllCategories(); &#125; // Return without taking locks if there are no +load methods here. if (!hasLoadMethods((const headerType *)mh)) return; recursive_mutex_locker_t lock(loadMethodLock); // Discover load methods &#123; mutex_locker_t lock2(runtimeLock); prepare_load_methods((const headerType *)mh); &#125; // Call +load methods (without runtimeLock - re-entrant) call_load_methods();&#125; æ»¤æ‰å…¶ä¸­æˆ‘ä»¬ä¸å…³å¿ƒçš„éƒ¨åˆ†ï¼Œä¸loadæ–¹æ³•è°ƒç”¨ç›¸å…³çš„æ ¸å¿ƒå¦‚ä¸‹ï¼š 123456789101112voidload_images(const char *path __unused, const struct mach_header *mh)&#123; // é•œåƒä¸­æ²¡æœ‰loadæ–¹æ³•ï¼Œç›´æ¥è¿”å› if (!hasLoadMethods((const headerType *)mh)) return; &#123; // å‡†å¤‡loadæ–¹æ³• prepare_load_methods((const headerType *)mh); &#125; // è¿›è¡Œloadæ–¹æ³•çš„è°ƒç”¨ call_load_methods();&#125; æœ€æ ¸å¿ƒçš„éƒ¨åˆ†åœ¨äºloadæ–¹æ³•çš„å‡†å¤‡ä¸laodæ–¹æ³•çš„è°ƒç”¨ï¼Œæˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥çœ‹ï¼Œå…ˆæ¥çœ‹loadæ–¹æ³•çš„å‡†å¤‡(æˆ‘ä»¬å»æ‰äº†æ— å…³ç´§è¦çš„éƒ¨åˆ†)ï¼š 123456789101112131415161718void prepare_load_methods(const headerType *mhdr)&#123; size_t count, i; // è·å–æ‰€æœ‰ç±» ç»„æˆåˆ—è¡¨ classref_t const *classlist = _getObjc2NonlazyClassList(mhdr, &amp;count); for (i = 0; i &lt; count; i++) &#123; // å°†æ‰€æœ‰ç±»çš„loadæ–¹æ³•è¿›è¡Œæ•´ç† schedule_class_load(remapClass(classlist[i])); &#125; // è·å–æ‰€æœ‰çš„åˆ†ç±» ç»„æˆåˆ—è¡¨ category_t * const *categorylist = _getObjc2NonlazyCategoryList(mhdr, &amp;count); for (i = 0; i &lt; count; i++) &#123; category_t *cat = categorylist[i]; // å°†åˆ†ç±»çš„loadæ–¹æ³•è¿›è¡Œæ•´ç† add_category_to_loadable_list(cat); &#125;&#125; çœ‹åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬åŸºæœ¬å°±æœ‰å¤´ç»ªäº†ï¼Œloadæ–¹æ³•çš„è°ƒç”¨é¡ºåºï¼ŒåŸºæœ¬å¯ä»¥ç¡®å®šæ˜¯ç”±æ•´ç†è¿‡ç¨‹æ‰€å†³å®šçš„ï¼Œå¹¶ä¸”æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œç±»çš„loadæ–¹æ³•æ•´ç†ä¸åˆ†ç±»çš„loadæ–¹æ³•æ•´ç†æ˜¯äº’ç›¸ç‹¬ç«‹çš„ï¼Œå› æ­¤ä¹Ÿå¯ä»¥æ¨æ–­å…¶è°ƒç”¨çš„æ—¶æœºä¹Ÿæ˜¯ç‹¬ç«‹çš„ã€‚é¦–å…ˆæˆ‘ä»¬å…ˆæ¥çœ‹ç±»çš„loadæ–¹æ³•æ•´ç†å‡½æ•°schedule_class_load(å»æ‰æ— å…³ä»£ç å)ï¼š 12345678910111213static void schedule_class_load(Class cls)&#123; // ç±»ä¸å­˜åœ¨æˆ–è€…å·²ç»åŠ è½½è¿‡loadï¼Œåˆ™return if (!cls) return; if (cls-&gt;data()-&gt;flags &amp; RW_LOADED) return; // ä¿è¯åŠ è½½é¡ºåºï¼Œé€’å½’è¿›è¡Œçˆ¶ç±»åŠ è½½ schedule_class_load(cls-&gt;superclass); // å°†å½“å‰ç±»çš„loadæ–¹æ³•åŠ è½½è¿›loadæ–¹æ³•åˆ—è¡¨ä¸­ add_class_to_loadable_list(cls); // å°†å½“å‰ç±»è®¾ç½®ä¸ºå·²ç»åŠ è½½è¿‡laod cls-&gt;setInfo(RW_LOADED); &#125; å¯ä»¥çœ‹åˆ°ï¼Œschedule_class_loadå‡½æ•°ä¸­ä½¿ç”¨äº†é€’å½’çš„æ–¹å¼æ¼”ç€ç»§æ‰¿é“¾é€å±‚å‘ä¸Šï¼Œä¿è¯åœ¨åŠ è½½loadæ–¹æ³•æ—¶ï¼Œå…ˆåŠ è½½çˆ¶ç±»ï¼Œå†åŠ è½½å­ç±»ã€‚add_class_to_loadable_listæ˜¯æ ¸å¿ƒçš„loadæ–¹æ³•æ•´ç†å‡½æ•°ï¼Œå¦‚ä¸‹(å»æ‰äº†æ— å…³ä»£ç )ï¼š 1234567891011121314151617181920void add_class_to_loadable_list(Class cls)&#123; IMP method; // è¯»å–ç±»ä¸­çš„loadæ–¹æ³• method = cls-&gt;getLoadMethod(); if (!method) return; // ç±»ä¸­æ²¡æœ‰å®ç°loadæ–¹æ³•ï¼Œç›´æ¥è¿”å› // æ„å»ºå­˜å‚¨åˆ—è¡¨åŠæ‰©å®¹é€»è¾‘ if (loadable_classes_used == loadable_classes_allocated) &#123; loadable_classes_allocated = loadable_classes_allocated*2 + 16; loadable_classes = (struct loadable_class *) realloc(loadable_classes, loadable_classes_allocated * sizeof(struct loadable_class)); &#125; // å‘åˆ—è¡¨ä¸­æ·»åŠ  loadable_class ç»“æ„ä½“ï¼Œè¿™ä¸ªç»“æ„ä½“ä¸­å­˜å‚¨äº†ç±»ä¸å¯¹åº”çš„laodæ–¹æ³• loadable_classes[loadable_classes_used].cls = cls; loadable_classes[loadable_classes_used].method = method; // æ ‡è®°åˆ—è¡¨indexçš„æŒ‡é’ˆç§»åŠ¨ loadable_classes_used++;&#125; loadable_clasç»“æ„ä½“çš„å®šä¹‰å¦‚ä¸‹ï¼š 1234struct loadable_class &#123; Class cls; // may be nil IMP method;&#125;; getLoadMethoå‡½æ•°çš„å®ç°ä¸»è¦æ˜¯ä»ç±»ä¸­è·å–åˆ°loadæ–¹æ³•çš„å®ç°ï¼Œå¦‚ä¸‹ï¼š 1234567891011121314151617IMP objc_class::getLoadMethod()&#123; // è·å–æ–¹æ³•åˆ—è¡¨ const method_list_t *mlist; mlist = ISA()-&gt;data()-&gt;ro()-&gt;baseMethods(); if (mlist) &#123; // éå†ï¼Œæ‰¾åˆ°loadæ–¹æ³•è¿”å› for (const auto&amp; meth : *mlist) &#123; const char *name = sel_cname(meth.name); if (0 == strcmp(name, \"load\")) &#123; return meth.imp; &#125; &#125; &#125; return nil;&#125; ç°åœ¨ï¼Œå…³äºç±»çš„loadæ–¹æ³•çš„å‡†å¤‡é€»è¾‘å·²ç»éå¸¸æ¸…æ™°äº†ï¼Œæœ€ç»ˆä¼šæŒ‰ç…§å…ˆçˆ¶ç±»åå­ç±»çš„é¡ºåºå°†æ‰€æœ‰ç±»çš„loadæ–¹æ³•æ·»åŠ è¿›åä¸ºloadable_classesçš„åˆ—è¡¨ä¸­ï¼Œloadable_classesè¿™ä¸ªåå­—ä½ è¦æ³¨æ„ä¸€ä¸‹ï¼Œåé¢æˆ‘ä»¬è¿˜ä¼šé‡åˆ°å®ƒã€‚ æˆ‘ä»¬å†æ¥çœ‹åˆ†ç±»çš„laodæ–¹æ³•å‡†å¤‡è¿‡ç¨‹ï¼Œå…¶ä¸æˆ‘ä»¬ä¸Šé¢ä»‹ç»çš„ç±»éå¸¸ç›¸ä¼¼ï¼Œadd\\_category\\_to\\_loadable\\_listå‡½æ•°ç®€åŒ–åå¦‚ä¸‹ï¼š 12345678910111213141516171819void add_category_to_loadable_list(Category cat)&#123; IMP method; // è·å–å½“å‰åˆ†ç±»çš„loadæ–¹æ³• method = _category_getLoadMethod(cat); if (!method) return; // åˆ—è¡¨åˆ›å»ºä¸æ‰©å®¹é€»è¾‘ if (loadable_categories_used == loadable_categories_allocated) &#123; loadable_categories_allocated = loadable_categories_allocated*2 + 16; loadable_categories = (struct loadable_category *) realloc(loadable_categories, loadable_categories_allocated * sizeof(struct loadable_category)); &#125; // å°†åˆ†ç±»ä¸loadæ–¹æ³•è¿›è¡Œå­˜å‚¨ loadable_categories[loadable_categories_used].cat = cat; loadable_categories[loadable_categories_used].method = method; loadable_categories_used++;&#125; å¯ä»¥çœ‹åˆ°ï¼Œæœ€ç»ˆåˆ†ç±»çš„loadæ–¹æ³•æ˜¯å­˜å‚¨åœ¨äº†loadable_categoriesåˆ—è¡¨ä¸­ã€‚ å‡†å¤‡å¥½äº†loadæ–¹æ³•ï¼Œæˆ‘ä»¬å†æ¥åˆ†æä¸‹loadæ–¹æ³•çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œcall\\_load\\_methodså‡½æ•°çš„æ ¸å¿ƒå®ç°å¦‚ä¸‹ï¼š 123456789101112131415void call_load_methods(void)&#123; bool more_categories; do &#123; // å…ˆå¯¹ loadable_classes è¿›è¡Œéå†ï¼Œloadable_classes_usedè¿™ä¸ªå­—æ®µå¯ä»¥ç†è§£ä¸ºåˆ—è¡¨çš„å…ƒç´ ä¸ªæ•° while (loadable_classes_used &gt; 0) &#123; call_class_loads(); &#125; // å†å¯¹ç±»åˆ«è¿›è¡Œéå†è°ƒç”¨ more_categories = call_category_loads(); &#125; while (loadable_classes_used &gt; 0 || more_categories); &#125; call_class_loadså‡½æ•°å®ç°ç®€åŒ–åå¦‚ä¸‹ï¼š 12345678910111213141516171819202122static void call_class_loads(void)&#123; int i; // loadable_classesåˆ—è¡¨ struct loadable_class *classes = loadable_classes; // éœ€è¦æ‰§è¡Œloadæ–¹æ³•ä¸ªæ•° int used = loadable_classes_used; // æ¸…ç†æ•°æ® loadable_classes = nil; loadable_classes_allocated = 0; loadable_classes_used = 0; // å¾ªç¯è¿›è¡Œæ‰§è¡Œ å¾ªç¯çš„å¾ªåºæ˜¯ä»å‰åˆ°å for (i = 0; i &lt; used; i++) &#123; // è·å–ç±» Class cls = classes[i].cls; // è·å–å¯¹åº”loadæ–¹æ³• load_method_t load_method = (load_method_t)classes[i].method; if (!cls) continue; // æ‰§è¡Œloadæ–¹æ³• (*load_method)(cls, @selector(load)); &#125;&#125; call_category_loadså‡½æ•°çš„å®ç°è¦å¤æ‚ä¸€äº›ï¼Œç®€åŒ–åå¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627static bool call_category_loads(void)&#123; int i, shift; bool new_categories_added = NO; // è·å–loadable_categoriesåˆ†ç±»loadæ–¹æ³•åˆ—è¡¨ struct loadable_category *cats = loadable_categories; int used = loadable_categories_used; int allocated = loadable_categories_allocated; loadable_categories = nil; loadable_categories_allocated = 0; loadable_categories_used = 0; // ä»å‰å¾€åéå†è¿›è¡Œloadæ–¹æ³•çš„è°ƒç”¨ for (i = 0; i &lt; used; i++) &#123; Category cat = cats[i].cat; load_method_t load_method = (load_method_t)cats[i].method; Class cls; if (!cat) continue; cls = _category_getClass(cat); if (cls &amp;&amp; cls-&gt;isLoadable()) &#123; (*load_method)(cls, @selector(load)); cats[i].cat = nil; &#125; &#125; return new_categories_added;&#125; ç°åœ¨ï¼Œæˆ‘ç›¸ä¿¡ä½ å·²ç»å¯¹loadæ–¹æ³•ä¸ºä½•ç±»å…ˆè°ƒç”¨ï¼Œåˆ†ç±»åè°ƒç”¨ï¼Œå¹¶ä¸”ä¸ºä½•çˆ¶ç±»å…ˆè°ƒç”¨ï¼Œå­ç±»åè°ƒç”¨ã€‚ä½†æ˜¯è¿˜æœ‰ä¸€ç‚¹ï¼Œæˆ‘ä»¬ä¸ç”šæ˜äº†ï¼Œå³ç±»ä¹‹é—´æˆ–åˆ†ç±»ä¹‹é—´çš„è°ƒç”¨é¡ºåºæ˜¯æ€ä¹ˆç¡®å®šçš„ï¼Œä»æºç ä¸­å¯ä»¥çœ‹åˆ°ï¼Œç±»åˆ—è¡¨æ˜¯é€šè¿‡_getObjc2NonlazyClassListå‡½æ•°è·å–çš„ï¼ŒåŒæ ·åˆ†ç±»çš„åˆ—è¡¨æ˜¯é€šè¿‡_getObjc2NonlazyCategoryListå‡½æ•°è·å–çš„ã€‚è¿™ä¸¤ä¸ªå‡½æ•°è·å–åˆ°çš„ç±»æˆ–åˆ†ç±»çš„é¡ºåºå®é™…ä¸Šæ˜¯ä¸ç±»æºæ–‡ä»¶çš„ç¼–è¯‘é¡ºåºæœ‰å…³çš„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¯ä»¥çœ‹åˆ°ï¼Œæ‰“å°çš„loadæ–¹æ³•çš„æ‰§è¡Œé¡ºåºä¸æºä»£ç çš„ç¼–è¯‘é¡ºåºæ˜¯ä¸€ç›´çš„ã€‚ å››ã€initializeæ–¹æ³•åˆ†ææˆ‘ä»¬å¯ä»¥é‡‡ç”¨å’Œåˆ†æloadæ–¹æ³•æ—¶ä¸€æ ·çš„ç­–ç•¥æ¥å¯¹initializeæ–¹æ³•çš„æ‰§è¡Œæƒ…å†µï¼Œè¿›è¡Œæµ‹è¯•ï¼Œé¦–å…ˆå°†æµ‹è¯•å·¥ç¨‹ä¸­æ‰€æœ‰ç±»ä¸­æ·»åŠ initializeæ–¹æ³•çš„å®ç°ã€‚æ­¤æ—¶å¦‚æœç›´æ¥è¿è¡Œå·¥ç¨‹ï¼Œä½ ä¼šå‘ç°æ§åˆ¶å°æ²¡æœ‰ä»»ä½•è¾“å‡ºï¼Œè¿™æ˜¯ç”±äºåªæœ‰ç¬¬ä¸€æ¬¡è°ƒç”¨ç±»çš„æ–¹æ³•æ—¶ï¼Œæ‰ä¼šæ‰§è¡Œinitializeæ–¹æ³•ï¼Œåœ¨mainå‡½æ•°ä¸­ç¼–å†™å¦‚ä¸‹æµ‹è¯•ä»£ç ï¼š 123456789101112int main(int argc, const char * argv[]) &#123; @autoreleasepool &#123; [MySubObjectOne new]; [MyObjectOne new]; [MyObjectTwo new]; NSLog(@\"------------\"); [MySubObjectOne new]; [MyObjectOne new]; [MyObjectTwo new]; &#125; return 0;&#125; è¿è¡Œä»£ç æ§åˆ¶å°æ‰“å°æ•ˆæœå¦‚ä¸‹ï¼š 12342021-02-18 21:29:55.761897+0800 KCObjc[43834:23521232] initialize-cateOne:MyObjectOne2021-02-18 21:29:55.762526+0800 KCObjc[43834:23521232] initialize:MySubObjectOne2021-02-18 21:29:55.762622+0800 KCObjc[43834:23521232] initialize-cate:MyObjectTwo2021-02-18 21:29:55.762665+0800 KCObjc[43834:23521232] ------------ å¯ä»¥çœ‹åˆ°ï¼Œæ‰“å°æ•°æ®éƒ½å‡ºç°åœ¨åˆ†å‰²çº¿å‰ï¼Œè¯´æ˜ä¸€æ—¦ä¸€ä¸ªç±»çš„initializeæ–¹æ³•è¢«è°ƒç”¨åï¼Œåç»­å†å‘è¿™ä¸ªç±»å‘é€æ¶ˆæ¯ï¼Œä¹Ÿä¸ä¼šåœ¨è°ƒç”¨initializeæ–¹æ³•ï¼Œè¿˜æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œéœ€è¦æ³¨æ„ï¼Œå¦‚æœå¯¹å­ç±»å‘é€æ¶ˆæ¯ï¼Œçˆ¶ç±»çš„initializeä¼šå…ˆè°ƒç”¨ï¼Œå†è°ƒç”¨å­ç±»çš„initializeï¼ŒåŒæ—¶ï¼Œåˆ†ç±»ä¸­å¦‚æœå®ç°äº†initializeæ–¹æ³•åˆ™ä¼šè¦†ç›–ç±»æœ¬èº«çš„ï¼Œå¹¶ä¸”åˆ†ç±»çš„åŠ è½½é¡ºåºé åçš„ä¼šè¦†ç›–ä¹‹å‰çš„ã€‚ä¸‹é¢æˆ‘ä»¬å°±é€šè¿‡æºç æ¥åˆ†æä¸‹initializeæ–¹æ³•çš„è¿™ç§è°ƒç”¨ç‰¹ç‚¹ã€‚ é¦–å…ˆï¼Œåœ¨è°ƒç”¨ç±»çš„ç±»æ–¹æ³•æ—¶ï¼Œä¼šæ‰§è¡Œruntimeä¸­çš„class_getClassMethodæ–¹æ³•æ¥å¯»æ‰¾å®ç°å‡½æ•°ï¼Œè¿™ä¸ªæ–¹æ³•åœ¨æºç ä¸­çš„å®ç°å¦‚ä¸‹ï¼š 12345Method class_getClassMethod(Class cls, SEL sel)&#123; if (!cls || !sel) return nil; return class_getInstanceMethod(cls-&gt;getMeta(), sel);&#125; é€šè¿‡æºç å¯ä»¥çœ‹åˆ°ï¼Œè°ƒç”¨ä¸€ä¸ªç±»çš„ç±»æ–¹æ³•ï¼Œå®é™…ä¸Šæ˜¯è°ƒç”¨å…¶å…ƒç±»çš„ç¤ºä¾‹æ–¹æ³•ï¼ŒgetMetaå‡½æ•°ç”¨æ¥è·å–ç±»çš„å…ƒç±»ï¼Œå…³äºç±»å’Œå…ƒç±»çš„ç›¸å…³ç»„ç»‡åŸç†ï¼Œæˆ‘ä»¬è¿™é‡Œå…ˆä¸æ‰©å±•ã€‚æˆ‘ä»¬éœ€è¦å…³æ³¨çš„æ˜¯class_getInstanceMethodè¿™ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°çš„å®ç°ä¹Ÿéå¸¸ç®€å•ï¼Œå¦‚ä¸‹ï¼š 12345678910Method class_getInstanceMethod(Class cls, SEL sel)&#123; if (!cls || !sel) return nil; // åšæŸ¥è¯¢æ–¹æ³•åˆ—è¡¨ï¼Œå°è¯•æ–¹æ³•è§£æç›¸å…³å·¥ä½œ lookUpImpOrForward(nil, sel, cls, LOOKUP_RESOLVER); // ä»ç±»å¯¹è±¡ä¸­è·å–æ–¹æ³• return _class_getMethod(cls, sel);&#125; åœ¨class_getInstanceMethodæ–¹æ³•çš„å®ç°ä¸­ï¼Œ_class_getMethodæ˜¯æœ€ç»ˆè·å–è¦è°ƒç”¨çš„æ–¹æ³•çš„å‡½æ•°ï¼Œåœ¨è¿™ä¹‹å‰ï¼ŒlookUpImpOrForwardå‡½æ•°ä¼šåšä¸€äº›å‰ç½®æ“ä½œï¼Œå…¶ä¸­å°±æœ‰initializeå‡½æ•°çš„è°ƒç”¨é€»è¾‘ï¼Œæˆ‘ä»¬å»æ‰æ— å…³çš„é€»è¾‘ï¼ŒlookUpImpOrForwardä¸­æ ¸å¿ƒçš„å®ç°å¦‚ä¸‹ï¼š 12345678910IMP lookUpImpOrForward(id inst, SEL sel, Class cls, int behavior)&#123; IMP imp = nil; // æ ¸å¿ƒåœ¨äº!cls-&gt;isInitialized() å¦‚æœå½“å‰ç±»æœªåˆå§‹åŒ–è¿‡ï¼Œä¼šæ‰§è¡ŒinitializeAndLeaveLockedå‡½æ•° if (slowpath((behavior &amp; LOOKUP_INITIALIZE) &amp;&amp; !cls-&gt;isInitialized())) &#123; cls = initializeAndLeaveLocked(cls, inst, runtimeLock); &#125; return imp;&#125; initializeAndLeaveLockedä¼šç›´æ¥è°ƒç”¨initializeAndMaybeRelockå‡½æ•°ï¼Œå¦‚ä¸‹ï¼š 1234static Class initializeAndLeaveLocked(Class cls, id obj, mutex_t&amp; lock)&#123; return initializeAndMaybeRelock(cls, obj, lock, true);&#125; initializeAndMaybeRelockå‡½æ•°ä¸­ä¼šåšç±»çš„åˆå§‹åŒ–é€»è¾‘ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå…¶æ ¸å¿ƒç›¸å…³ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314static Class initializeAndMaybeRelock(Class cls, id inst, mutex_t&amp; lock, bool leaveLocked)&#123; // å¦‚æœå·²ç»åˆå§‹åŒ–è¿‡ï¼Œç›´æ¥è¿”å› if (cls-&gt;isInitialized()) &#123; return cls; &#125; // æ‰¾åˆ°å½“å‰ç±»çš„éå…ƒç±» Class nonmeta = getMaybeUnrealizedNonMetaClass(cls, inst); // è¿›è¡Œåˆå§‹åŒ–æ“ä½œ initializeNonMetaClass(nonmeta); return cls;&#125; initializeNonMetaClasså‡½æ•°ä¼šé‡‡ç”¨é€’å½’çš„æ–¹å¼æ²¿ç€ç»§æ‰¿é“¾å‘ä¸ŠæŸ¥è¯¢ï¼Œæ‰¾åˆ°æ‰€æœ‰æœªåˆå§‹åŒ–è¿‡çš„çˆ¶ç±»è¿›è¡Œåˆå§‹åŒ–ï¼Œæ ¸å¿ƒå®ç°ç®€åŒ–å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334void initializeNonMetaClass(Class cls)&#123; Class supercls; // æ ‡è®°æ˜¯å¦éœ€è¦åˆå§‹åŒ– bool reallyInitialize = NO; // çˆ¶ç±»å¦‚æœå­˜åœ¨ï¼Œå¹¶ä¸”æ²¡æœ‰åˆå§‹åŒ–è¿‡ï¼Œåˆ™é€’å½’è¿›è¡Œçˆ¶ç±»çš„åˆå§‹åŒ– supercls = cls-&gt;superclass; if (supercls &amp;&amp; !supercls-&gt;isInitialized()) &#123; initializeNonMetaClass(supercls); &#125; SmallVector&lt;_objc_willInitializeClassCallback, 1&gt; localWillInitializeFuncs; &#123; // å¦‚æœå½“å‰ä¸æ˜¯æ­£åœ¨åˆå§‹åŒ–ï¼Œå¹¶ä¸”å½“å‰ç±»æ²¡æœ‰åˆå§‹åŒ–è¿‡ if (!cls-&gt;isInitialized() &amp;&amp; !cls-&gt;isInitializing()) &#123; // è®¾ç½®åˆå§‹åŒ–æ ‡å¿—ï¼Œæ­¤ç±»æ ‡è®°ä¸ºåˆå§‹åŒ–è¿‡ cls-&gt;setInitializing(); // æ ‡è®°éœ€è¦è¿›è¡Œåˆå§‹åŒ– reallyInitialize = YES; &#125; &#125; // æ˜¯å¦éœ€è¦è¿›è¡Œåˆå§‹åŒ– if (reallyInitialize) &#123; @try &#123; // è°ƒç”¨åˆå§‹åŒ–å‡½æ•° callInitialize(cls); &#125; @catch (...) &#123; @throw; &#125; return; &#125;&#125; callInitializeå‡½æ•°æœ€ç»ˆä¼šè°ƒç”¨objc_msgSendå‡½æ•°æ¥å‘ç±»å‘é€initializeåˆå§‹åŒ–æ¶ˆæ¯ï¼Œå¦‚ä¸‹ï¼š 12345void callInitialize(Class cls)&#123; ((void(*)(Class, SEL))objc_msgSend)(cls, @selector(initialize)); asm(\"\");&#125; éœ€è¦æ³¨æ„ï¼Œinitializeæ–¹æ³•ä¸loadæ–¹æ³•æœ€å¤§çš„åŒºåˆ«åœ¨äºå…¶æœ€ç»ˆæ˜¯é€šè¿‡objc_msgSendæ¥å®ç°çš„ï¼Œæ¯ä¸ªç±»å¦‚æœæœªåˆå§‹åŒ–è¿‡ï¼Œéƒ½ä¼šé€šè¿‡objc_msgSendæ¥å‘ç±»å‘é€ä¸€æ¬¡initializeæ¶ˆæ¯ï¼Œå› æ­¤ï¼Œå¦‚æœå­ç±»æ²¡æœ‰å¯¹initializeå®ç°ï¼ŒæŒ‰ç…§objc_msgSendçš„æ¶ˆæ¯æœºåˆ¶ï¼Œå…¶æ˜¯ä¼šæ²¿ç€ç»§æ‰¿é“¾ä¸€è·¯å‘ä¸Šæ‰¾åˆ°çˆ¶ç±»çš„å®ç°è¿›è¡Œè°ƒç”¨çš„ï¼Œæ‰€æœ‰initializeæ–¹æ³•å¹¶ä¸æ˜¯åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ï¼Œå‡å¦‚çˆ¶ç±»ä¸­å®ç°äº†è¿™ä¸ªæ–¹æ³•ï¼Œå¹¶ä¸”å®ƒæœ‰å¤šä¸ªæœªå®ç°æ­¤æ–¹æ³•çš„å­ç±»ï¼Œåˆ™å½“æ¯ä¸ªå­ç±»ç¬¬ä¸€æ¬¡æ¥å—æ¶ˆæ¯æ—¶ï¼Œéƒ½ä¼šè°ƒç”¨ä¸€éçˆ¶ç±»çš„initializeæ–¹æ³•ï¼Œè¿™ç‚¹éå¸¸é‡è¦ï¼Œåœ¨å®é™…å¼€å‘ä¸­ä¸€å®šè¦ç‰¢è®°ã€‚ äº”ã€ç»“è¯­loadå’Œinitializeæ–¹æ³•æ˜¯iOSå¼€å‘ä¸­éå¸¸ç®€å•ä¹Ÿä¹Ÿéå¸¸å¸¸ç”¨çš„ä¸¤ä¸ªæ–¹æ³•ï¼Œç„¶è€Œå…¶ä¸æ™®é€šçš„æ–¹æ³•æ¯”èµ·æ¥ï¼Œè¿˜æœ‰æœ‰ä¸€äº›ç‰¹æ®Šï¼Œé€šè¿‡å¯¹æºç çš„è§£è¯»ï¼Œæˆ‘ä»¬å¯ä»¥æ›´åŠ æ·±åˆ»çš„ç†è§£è¿™äº›ç‰¹æ®Šä¹‹å¤„çš„åŸå› åŠåŸç†ï¼Œç¼–ç¨‹çš„è¿‡ç¨‹å°±åƒä¿®è¡Œï¼ŒçŸ¥å…¶ç„¶ä¹ŸçŸ¥å…¶æ‰€ä»¥ç„¶ï¼Œä¸å¤§å®¶å…±å‹‰ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š805263726","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"SwiftUIç›´é€šè½¦ç³»åˆ—ï¼ˆ6ï¼‰â€”â€” ä½¿ç”¨åŠ¨ç”»","slug":"408SwiftUIç›´é€šè½¦ç³»åˆ—ï¼ˆ6ï¼‰â€”â€” ä½¿ç”¨åŠ¨ç”»","date":"2020-11-29T16:00:00.000Z","updated":"2021-07-15T11:31:50.661Z","comments":true,"path":"2020/11/30/408SwiftUIç›´é€šè½¦ç³»åˆ—ï¼ˆ6ï¼‰â€”â€” ä½¿ç”¨åŠ¨ç”»/","link":"","permalink":"http://huishao.cc/2020/11/30/408SwiftUIç›´é€šè½¦ç³»åˆ—ï¼ˆ6ï¼‰â€”â€” ä½¿ç”¨åŠ¨ç”»/","excerpt":"","text":"SwiftUIç›´é€šè½¦ç³»åˆ—ï¼ˆ6ï¼‰â€”â€” ä½¿ç”¨åŠ¨ç”»æœ¬ç³»åˆ—åšå®¢æ˜¯é’ˆå¯¹SwiftUIå¼€å‘æ¡†æ¶çš„å¿«é€Ÿå…¥é—¨ä»‹ç»ï¼Œä¹‹å‰ç³»åˆ—åšå®¢åœ°å€ï¼š SwiftUIç›´é€šè½¦ç³»åˆ—ï¼ˆ1ï¼‰â€”â€” è§†å›¾çš„å¸ƒå±€ä¸ç»„ç»‡ SwiftUIç›´é€šè½¦ç³»åˆ—ï¼ˆ2ï¼‰â€”â€” åˆ—è¡¨è§†å›¾ SwiftUIç›´é€šè½¦ç³»åˆ—ä¸‰ï¼ˆ3ï¼‰â€”â€” ä½¿ç”¨å¯¼èˆª SwiftUIç›´é€šè½¦ç³»åˆ—ï¼ˆ4ï¼‰â€”â€” å¤„ç†ç”¨æˆ·äº¤äº’ SwiftUIç›´é€šè½¦ç³»åˆ—ï¼ˆ5ï¼‰â€”â€” è‡ªå®šä¹‰ç»˜åˆ¶ å‰é¢çš„åšå®¢æ•´ä½“å¯¹ä½¿ç”¨SwiftUIè¿›è¡Œé¡µé¢å¸ƒå±€ä¸ç®€å•çš„ç”¨æˆ·äº¤äº’åšäº†ä»‹ç»ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œä½œä¸ºä¸€ä¸ªä¼˜ç§€çš„UIæ¡†æ¶ï¼Œå…¶å¾ˆé‡è¦çš„ä¸€ç‚¹æ˜¯å¯¹åŠ¨ç”»çš„æ”¯æŒï¼ŒåŠ¨ç”»æ˜¯æå‡ç”¨æˆ·ä½“éªŒçš„é‡è¦æ–¹å¼ï¼Œåœ¨SwiftUIä¸­ï¼Œå®ç°åŠ¨ç”»æ•ˆæœå°†å˜å¾—éå¸¸å®¹æ˜“ã€‚ ä¸€ã€ä½¿ç”¨å±æ€§åŠ¨ç”»å±æ€§åŠ¨ç”»æ˜¯æŒ‡å½“ç»„ä»¶çš„å±æ€§å‘ç”Ÿå˜åŒ–æ—¶æ‰€å±•ç¤ºåŠ¨ç”»æ•ˆæœï¼Œä¾‹å¦‚ç»„ä»¶çš„é¢œè‰²ã€ä½ç½®ã€å°ºå¯¸ã€æ—‹è½¬è§’åº¦ç­‰ã€‚åœ¨SwiftUIä¸­ï¼Œæˆ‘ä»¬çŸ¥é“è¦åŠ¨æ€çš„å¯¹ç»„ä»¶æ ·å¼è¿›è¡Œæ›´æ”¹ï¼Œéœ€è¦ä½¿ç”¨çŠ¶æ€æ¥æ§åˆ¶ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨çŠ¶æ€æ¥æ§åˆ¶åŠ¨ç”»åŠ¨ä½œã€‚ ä¾‹å¦‚ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªæŒ‰é’®ç»„ä»¶ï¼Œå½“ç‚¹å‡»æ—¶ï¼Œè®©å…¶æ—‹è½¬180åº¦ï¼Œå¹¶ç•¥å¾®æ”¾å¤§ï¼Œä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617struct DrawContent:View &#123; @State private var begin = false var body: some View &#123; VStack(alignment: .center, spacing: 20) &#123; Button(action: &#123; self.begin.toggle() &#125;) &#123; Text(\"å¼€å§‹\") .font(Font.system(size: 30)) .rotationEffect(.degrees(self.begin ? 180 : 0)) .scaleEffect(self.begin ? 2 : 1) .animation(.easeInOut(duration: 3)) &#125; &#125; &#125;&#125; å…¶ä¸­ï¼ŒbeginçŠ¶æ€å±æ€§ç”¨æ¥è®°å½•åŠ¨ç”»çš„çŠ¶æ€ï¼Œå½“ä¸€æ¬¡ç‚¹å‡»æ­¤æŒ‰é’®æ—¶ï¼Œä¼šå°†å½“å‰æŒ‰é’®æ”¾å¤§ä¸€å€ï¼Œå¹¶æ—‹è½¬180åº¦ï¼Œå†æ¬¡ç‚¹å‡»æŒ‰é’®ä¼šåŠ¨ç”»è¿˜åŸã€‚ rotationEffectç”¨æ¥å®šä¹‰ç»„ä»¶çš„æ—‹è½¬è§’åº¦ï¼ŒscaleEffectç”¨æ¥å®šä¹‰ç»„ä»¶ç¼©æ”¾çš„æ¯”ä¾‹ï¼Œä¸ä¹‹ç±»ä¼¼ï¼Œå¤§éƒ¨åˆ†ç”¨æ¥æ¸²æŸ“è§†å›¾æ ·å¼çš„å±æ€§éƒ½æ”¯æŒè¿›è¡ŒåŠ¨ç”»ã€‚animationç”¨æ¥è®¾ç½®åŠ¨ç”»çš„æ‰§è¡Œæ–¹å¼ï¼Œå¦‚ä¸Šä»£ç æ‰€ç¤ºï¼Œè®¾ç½®çš„ä¸ºeaseInOutè¡¨ç¤ºåŠ¨ç”»æ‰§è¡Œçš„è¿‡ç¨‹é‡‡ç”¨æ¸å…¥æ¸å‡ºçš„æ–¹å¼ï¼Œä¸”åŠ¨ç”»æ‰§è¡Œçš„æ—¶é•¿ä¸º3ç§’ã€‚ äºŒã€ä½¿ç”¨è½¬åœºåŠ¨ç”»å±æ€§åŠ¨ç”»ç”¨åœ¨ç»„ä»¶çš„æŸäº›å±æ€§å‘ç”Ÿå˜åŒ–çš„åœºæ™¯ï¼Œè½¬åœºåŠ¨ç”»ä¼šå½±å“ç»„ä»¶çš„åˆ‡æ¢åŠ¨ä½œã€‚å½“å¯¹ç»„ä»¶è¿›è¡Œå±•ç¤ºæˆ–éšè—æ—¶ï¼Œé€šå¸¸å¯ä»¥é‡‡ç”¨è½¬åœºåŠ¨ç”»æ¥å¤„ç†ã€‚æˆ‘ä»¬ä»¥ä¸Šä¸€ç¯‡åšå®¢è‡ªå®šä¹‰çš„å›¾å½¢ç»„ä»¶ä¸ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºå…¶å‡ºç°æ—¶åŠ ä¸€ä¸ªæ»‘åŠ¨åŠ¨ç”»ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637extension Animation &#123; static func custom() -&gt; Animation &#123; Animation.spring(response: 1.5, dampingFraction: 0.5, blendDuration: 0.5) .speed(2) .delay(0.03) &#125;&#125;struct DrawContent:View &#123; @State private var begin = false var body: some View &#123; VStack(alignment: /*@START_MENU_TOKEN@*/.center/*@END_MENU_TOKEN@*/, spacing: 20) &#123; Button(action: &#123; withAnimation &#123; self.begin.toggle() &#125; &#125;) &#123; Text(\"å¼€å§‹\") .font(Font.system(size: 30)) .rotationEffect(.degrees(self.begin ? 180 : 0)) .scaleEffect(self.begin ? 2 : 1) .animation(.easeInOut(duration: 3)) &#125; if self.begin &#123; ZStack&#123; ForEach(0 ..&lt; 10) &#123; i in DrawTestView(angle: Angle(degrees:Double(36*i))).opacity( 0.3) &#125; &#125;.animation(.custom()) .transition(.slide) &#125; &#125; &#125;&#125; å¦‚ä¸Šä»£ç æ‰€ç¤ºï¼Œå…¶ä¸­customæ˜¯æˆ‘ä»¬è‡ªå®šä¹‰çš„ä¸€ç§åŠ¨ç”»æ¨¡å¼ï¼Œä¸Šé¢é‡‡ç”¨äº†é˜»å°¼åŠ¨ç”»ï¼Œå¹¶è‡ªå®šä¹‰äº†åŠ¨ç”»çš„é˜»å°¼å‚æ•°ï¼Œé€Ÿåº¦ï¼Œå»¶æ—¶ç­‰å±æ€§ã€‚","categories":[{"name":"SwiftUI","slug":"SwiftUI","permalink":"http://huishao.cc/categories/SwiftUI/"}],"tags":[],"keywords":[{"name":"SwiftUI","slug":"SwiftUI","permalink":"http://huishao.cc/categories/SwiftUI/"}]},{"title":"SwiftUIç›´é€šè½¦ç³»åˆ—ï¼ˆ5ï¼‰â€”â€” è‡ªå®šä¹‰ç»˜åˆ¶","slug":"407SwiftUIç›´é€šè½¦ç³»åˆ—ï¼ˆ5ï¼‰â€”â€” è‡ªå®šä¹‰ç»˜åˆ¶","date":"2020-10-31T16:00:00.000Z","updated":"2021-07-15T11:30:35.566Z","comments":true,"path":"2020/11/01/407SwiftUIç›´é€šè½¦ç³»åˆ—ï¼ˆ5ï¼‰â€”â€” è‡ªå®šä¹‰ç»˜åˆ¶/","link":"","permalink":"http://huishao.cc/2020/11/01/407SwiftUIç›´é€šè½¦ç³»åˆ—ï¼ˆ5ï¼‰â€”â€” è‡ªå®šä¹‰ç»˜åˆ¶/","excerpt":"","text":"SwiftUIç›´é€šè½¦ç³»åˆ—ï¼ˆ5ï¼‰â€”â€” è‡ªå®šä¹‰ç»˜åˆ¶å‰æƒ…å›é¡¾ï¼š SwiftUIç›´é€šè½¦ç³»åˆ—ï¼ˆ1ï¼‰â€”â€” è§†å›¾çš„å¸ƒå±€ä¸ç»„ç»‡ SwiftUIç›´é€šè½¦ç³»åˆ—ï¼ˆ2ï¼‰â€”â€” åˆ—è¡¨è§†å›¾ SwiftUIç›´é€šè½¦ç³»åˆ—ä¸‰ï¼ˆ3ï¼‰â€”â€” ä½¿ç”¨å¯¼èˆª SwiftUIç›´é€šè½¦ç³»åˆ—ï¼ˆ4ï¼‰â€”â€” å¤„ç†ç”¨æˆ·äº¤äº’ åœ¨UIå¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šä½¿ç”¨åˆ°å„å¼å„æ ·çš„å›¾æ ‡æˆ–å›¾å½¢ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨å›¾ç‰‡æ¥æ¸²æŸ“å›¾å½¢ï¼Œåœ¨SwiftUIä¸­ä¹Ÿæä¾›äº†ç›¸å…³çš„æ¥å£æ¥å¯¹å›¾å½¢ç»˜åˆ¶æä¾›æ”¯æŒï¼Œç†è®ºä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ä¸ä½¿ç”¨å¤–éƒ¨å›¾ç‰‡æ¥è‡ªå®šä¹‰ç»˜åˆ¶å‡ºæˆ‘ä»¬æƒ³è¦æ¸²æŸ“çš„å›¾å½¢ã€‚ ä¸€ã€å›¾å½¢ç»˜åˆ¶é¦–å…ˆï¼Œåœ¨å®šä¹‰SwiftUIç»„ä»¶æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è·¯å¾„çš„å®šä¹‰ç»˜åˆ¶å…¶è¦è¡¨ç°çš„UIå›¾å½¢ï¼Œä¾‹å¦‚è¦åœ¨é¡µé¢ä¸Šæ˜¾ç¤ºä¸€ä¸ªè±å½¢å›¾å½¢ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718struct DrawTestView:View &#123; var body: some View &#123; Path &#123; path in let width = 200 let height = 200 path.move(to: CGPoint(x: width, y: height)) path.addLine(to: CGPoint(x: 100, y: 400)) path.addLine(to: CGPoint(x: 200, y: 600)) path.addLine(to: CGPoint(x: 300, y: 400)) &#125;.fill(Color.red) &#125;&#125;struct ContentView_Previews: PreviewProvider &#123; static var previews: some View &#123; DrawTestView() &#125;&#125; æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤º: ä¸Šé¢çš„ä»£ç å¾ˆå¥½ç†è§£ï¼Œä½¿ç”¨Pathåœ¨å®šä¹‰Viewæ—¶ï¼Œmoveæ–¹æ³•ç”¨æ¥è¿›è¡Œç»˜åˆ¶ç‚¹çš„ç§»åŠ¨ï¼Œç®€å•ç†è§£ï¼Œå¦‚æœæˆ‘ä»¬å°†å›¾å½¢çš„ç»˜åˆ¶ç±»æ¯”ä¸ç”¨ç¬”ä½œç”»ï¼Œåˆ™moveæ–¹æ³•çš„ä½œç”¨å°±æ˜¯ç§»åŠ¨ç¬”å°–çš„ä½ç½®ã€‚addLineæ–¹æ³•ç”¨æ¥å‘è§†å›¾ä¸Šç”»ä¸€æ¡çº¿ï¼Œå®šä¹‰å®Œäº†è·¯å¾„åï¼Œè°ƒç”¨fillæ–¹æ³•ç”¨æ¥è¿›è¡Œå›¾å½¢å†…éƒ¨é¢œè‰²çš„å¡«å……ã€‚å¦‚ä¸Šä»£ç æ‰€ç¤ºï¼Œå®é™…ä¸Šæˆ‘ä»¬åªç”»äº†ä¸‰æ¡çº¿ï¼Œç³»ç»Ÿé»˜è®¤å°†ä¸‰æ¡çº¿åŠæœ€åä¸€ä¸ªç‚¹ä¸åŸç‚¹çš„è¿çº¿ç»„æˆçš„å›¾å½¢å†…éƒ¨è¿›è¡Œäº†é¢œè‰²çš„å¡«å……ï¼Œå¦‚æœæˆ‘ä»¬ä¸å¯¹å†…éƒ¨è¿›è¡Œé¢œè‰²å¡«å……ï¼Œåªå°†çº¿çš„é¢œè‰²æ˜¾ç¤ºå‡ºæ¥ï¼Œå°±æ›´åŠ ç›´è§‚äº†ï¼Œä»£ç å¦‚ä¸‹ï¼š 123456789101112struct DrawTestView:View &#123; var body: some View &#123; Path &#123; path in let width = 200 let height = 200 path.move(to: CGPoint(x: width, y: height)) path.addLine(to: CGPoint(x: 100, y: 400)) path.addLine(to: CGPoint(x: 200, y: 600)) path.addLine(to: CGPoint(x: 300, y: 400)) &#125;.stroke(Color.red,lineWidth: 10) &#125;&#125; æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¸addLineçš„ä½¿ç”¨æ–¹æ³•ç±»ä¼¼ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡æ·»åŠ çŸ©å½¢ã€æ¤­åœ†ã€è´å¡å°”æ›²çº¿ç­‰ç­‰æ–¹æ³•æ¥ç»˜åˆ¶å›¾å½¢ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516struct DrawTestView:View &#123; var body: some View &#123; Path &#123; path in let width = 200 let height = 200 path.move(to: CGPoint(x: width, y: height)) path.addLine(to: CGPoint(x: 100, y: 400)) path.addLine(to: CGPoint(x: 200, y: 600)) path.addLine(to: CGPoint(x: 300, y: 400)) path.addRect(CGRect(x: 20, y: 20, width: 30, height: 30)) path.addEllipse(in: CGRect(x: 60, y: 20, width: 60, height: 30)) path.addCurve(to: CGPoint(x: 100, y: 100), control1: CGPoint(x: 160, y: 100), control2: CGPoint(x: 60, y: 80)) path.addRoundedRect(in: CGRect(x: 140, y: 20, width: 50, height: 40), cornerSize: CGSize(width: 20, height: 20)) &#125;.stroke(Color.red,lineWidth: 3) &#125;&#125; æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š äºŒã€è®¾ç½®ç»˜åˆ¶å±æ€§åœ¨SwiftUIä¸­ï¼Œå®Œæˆäº†å›¾å½¢çš„å®šä¹‰æ˜¯ä¸€æ­¥ï¼Œä¹‹åæˆ‘ä»¬è¿˜éœ€è¦å°†å›¾å½¢æè¾¹ç»˜åˆ¶æˆ–å¡«å……ç»˜åˆ¶ã€‚æ— è®ºæ˜¯æè¾¹ç»˜åˆ¶è¿˜æ˜¯å¡«å……ç»˜åˆ¶ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥å®šåˆ¶åŒ–çš„å¯¹ç»˜åˆ¶å±æ€§è¿›è¡Œæ§åˆ¶ï¼Œä¾‹å¦‚ä¸‹é¢çš„ç¤ºä¾‹ä»£ç ï¼š 1234567891011121314151617181920212223struct DrawTestView:View &#123; var body: some View &#123; VStack &#123; Path &#123; path in let width = 200 let height = 0 path.move(to: CGPoint(x: width, y: height)) path.addLine(to: CGPoint(x: 100, y: 200)) path.addLine(to: CGPoint(x: 200, y: 400)) path.addLine(to: CGPoint(x: 300, y: 200)) path.addLine(to: CGPoint(x: 200, y: 0)) &#125;.stroke(style: StrokeStyle(lineWidth: 3, lineCap: CGLineCap.butt, lineJoin: .bevel, miterLimit: 2, dash: [15,4], dashPhase: 2)).foregroundColor(.blue) Path &#123; path in let width = 200 let height = 20 path.move(to: CGPoint(x: width, y: height)) path.addLine(to: CGPoint(x: 100, y: 220)) path.addLine(to: CGPoint(x: 200, y: 420)) path.addLine(to: CGPoint(x: 300, y: 220)) &#125;.fill(LinearGradient(gradient: Gradient(colors: [Color.red, Color.blue]), startPoint: .top, endPoint: .bottom)) &#125; &#125;&#125; æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¯¹äºæè¾¹ç»˜åˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®çº¿çš„é£æ ¼ï¼Œé—´è·ï¼Œè½¬è§’é£æ ¼ç­‰ã€‚å¯¹äºå¡«å……ç»˜åˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºå…¶è®¾ç½®æ¸å˜å¡«å……ï¼Œä¸Šé¢ä»£ç ç¤ºä¾‹çš„æ˜¯çº¿æ€§æ¸å˜æ•ˆæœï¼Œç³»ç»Ÿè¿˜æä¾›äº†åœ†å¿ƒæ¸å˜ç­‰åŠŸèƒ½ã€‚ ä¸‰ã€ç®€å•çš„å›¾å½¢å˜æ¢å’Œç»„åˆæœ‰è§„å¾‹çš„å¯¹ç»˜åˆ¶çš„å›¾å½¢è¿›è¡Œå˜æ¢å’Œç»„åˆå¾€å¾€å¯ä»¥å¾—åˆ°éå¸¸ç¾è§‚çš„å¤åˆå›¾å½¢ï¼Œä¾‹å¦‚å¯¹äºä¸Šé¢ç»˜åˆ¶çš„è±å½¢ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹é€æ˜åº¦è¿›è¡Œå›¾å½¢ç»„åˆï¼Œå¹¶ä½¿ç”¨æ—‹è½¬å˜æ¢çš„æ–¹å¼ä½¿å…¶æ„å»ºå‡ºæ›´åŠ ç¾è§‚çš„å›¾æ ‡ï¼Œä¿®æ”¹ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829struct DrawTestView:View &#123; let angle:Angle var body: some View &#123; Path &#123; path in let width = 250 let height = 150 path.move(to: CGPoint(x: width, y: height)) path.addLine(to: CGPoint(x: 100, y: 300)) path.addLine(to: CGPoint(x: 200, y: 450)) path.addLine(to: CGPoint(x: 300, y: 100)) &#125;.fill(LinearGradient(gradient: Gradient(colors: [Color.red, Color.blue]), startPoint: .top, endPoint: .bottom)).rotationEffect(angle, anchor: .center) &#125;&#125;struct DrawContent:View &#123; var body: some View &#123; ZStack&#123; ForEach(0 ..&lt; 10) &#123; i in DrawTestView(angle: Angle(degrees:Double(36*i))).opacity(0.3) &#125; &#125; &#125;&#125;struct ContentView_Previews: PreviewProvider &#123; static var previews: some View &#123; DrawContent() &#125;&#125; æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š","categories":[{"name":"SwiftUI","slug":"SwiftUI","permalink":"http://huishao.cc/categories/SwiftUI/"}],"tags":[],"keywords":[{"name":"SwiftUI","slug":"SwiftUI","permalink":"http://huishao.cc/categories/SwiftUI/"}]},{"title":"SwiftUIç›´é€šè½¦ç³»åˆ—ï¼ˆ4ï¼‰â€”â€” å¤„ç†ç”¨æˆ·äº¤äº’","slug":"406SwiftUIç›´é€šè½¦ç³»åˆ—ï¼ˆ4ï¼‰â€”â€” å¤„ç†ç”¨æˆ·äº¤äº’","date":"2020-09-28T16:00:00.000Z","updated":"2021-07-15T11:29:48.314Z","comments":true,"path":"2020/09/29/406SwiftUIç›´é€šè½¦ç³»åˆ—ï¼ˆ4ï¼‰â€”â€” å¤„ç†ç”¨æˆ·äº¤äº’/","link":"","permalink":"http://huishao.cc/2020/09/29/406SwiftUIç›´é€šè½¦ç³»åˆ—ï¼ˆ4ï¼‰â€”â€” å¤„ç†ç”¨æˆ·äº¤äº’/","excerpt":"","text":"SwiftUIç›´é€šè½¦ç³»åˆ—ï¼ˆ4ï¼‰â€”â€” å¤„ç†ç”¨æˆ·äº¤äº’å‰æƒ…å›é¡¾ï¼š SwiftUIç›´é€šè½¦ç³»åˆ—ï¼ˆ1ï¼‰â€”â€” è§†å›¾çš„å¸ƒå±€ä¸ç»„ç»‡ SwiftUIç›´é€šè½¦ç³»åˆ—ï¼ˆ2ï¼‰â€”â€” åˆ—è¡¨è§†å›¾ SwiftUIç›´é€šè½¦ç³»åˆ—ï¼ˆ3ï¼‰â€”â€” ä½¿ç”¨å¯¼èˆª å‰é¢ï¼Œæˆ‘ä»¬ä»‹ç»äº†åœ¨SwiftUIä¸­å¸ƒå±€ä¸é¡µé¢è·³è½¬çš„ç›¸å…³é€»è¾‘ï¼Œå…¶ä¸­é¡µé¢è·³è½¬å¯ä»¥ç®—æ˜¯å¤„ç†ç”¨æˆ·äº¤äº’ï¼ŒSwiftUIè™½ç„¶ä»åå­—ä¸Šå¬ï¼Œæ˜¯ä¸€ä¸ªUIæ¡†æ¶ï¼Œä½†æ˜¯å…¶ä¾ç„¶æœ‰å¾ˆå¼ºå¤§çš„äº¤äº’å¤„ç†èƒ½åŠ›ã€‚æœ¬ç¯‡åšå®¢ï¼Œæˆ‘ä»¬å°±å…¶ç”¨æˆ·äº¤äº’èƒ½åŠ›è¿›è¡Œä»‹ç»å’Œå­¦ä¹ ã€‚ ä¸€ã€SwiftUIä¸­çš„æŒ‰é’®æŒ‰é’®æ˜¯å¤„ç†ç”¨æˆ·äº¤äº’çš„æœ€åŸºç¡€çš„ç»„ä»¶ï¼Œåœ¨SwiftUIä¸­ï¼Œä½¿ç”¨Buttonå¯ä»¥ååˆ†æ–¹ä¾¿çš„å®šä¹‰æŒ‰é’®ç»„ä»¶ï¼Œå¦‚ä¸‹ï¼š 1234567891011121314151617181920var count = 0struct SimpleView:View &#123; var body: some View &#123; VStack(alignment: .center, spacing: 20) &#123; Button(action:&#123; count += 1 &#125;)&#123; Text(\"æŒ‰é’®ä¸€\") &#125; Text(\"\\(count)\") &#125; &#125;&#125;struct ContentView_Previews: PreviewProvider &#123; static var previews: some View &#123; SimpleView() &#125;&#125; åœ¨é¢„è§ˆç•Œé¢ï¼Œå¯ä»¥çœ‹åˆ°ä¸€ä¸ªæŒ‰é’®å’Œè®¡æ•°å™¨å·²ç»å¸ƒå±€åœ¨äº†é¡µé¢ä¸Šï¼Œæˆ‘ä»¬å°è¯•ç‚¹å‡»æŒ‰é’®ï¼Œä¼šå‘ç°å˜é‡countè™½ç„¶å·²ç»è¢«æ”¹å˜äº†ï¼Œä½†æ˜¯é¡µé¢å¹¶æ²¡æœ‰æ›´æ–°ã€‚èƒ½å¤Ÿæ¥æ”¶åˆ°ç”¨æˆ·äº¤äº’åªæ˜¯ç¬¬ä¸€æ­¥ï¼Œåœ¨SwiftUIä¸­é€šè¿‡ç”¨æˆ·äº¤äº’è€Œè¿›è¡Œé¡µé¢çš„åˆ·æ–°æ‰æ˜¯æ ¸å¿ƒæˆ‘ä»¬éœ€è¦å…³æ³¨çš„ã€‚æ•ˆæœå¦‚ä¸‹ï¼š äºŒã€çŠ¶æ€SwiftUIé‡‡ç”¨çš„æ˜¯æè¿°æ€§çš„ç»“æ„åŒ–å¸ƒå±€ç­–ç•¥ï¼Œå³é€šè¿‡å®šä¹‰ç»“æ„ä½“è¿™ç§ç»“æ„åŒ–çš„æ•°æ®æ¥æè¿°é¡µé¢çš„å¸ƒå±€ã€‚è¿™ç§å¸ƒå±€æ€è·¯å¼€å‘ç›´è§‚å¿«é€Ÿï¼Œå¹¶ä¸”éå¸¸æ˜“äºå…¥é—¨ä¸Šæ‰‹ã€‚å…¶ä¸æµè¡Œçš„å‰ç«¯æ¡†æ¶Flutterï¼ŒReactç­‰å¸ƒå±€æ€è·¯å·²ç»éå¸¸ç›¸ä¼¼ã€‚å› æ­¤ï¼Œå¯¹äºé¡µé¢çš„åˆ·æ–°æ“ä½œï¼Œæˆ‘ä»¬ä¹Ÿä¸èƒ½é‡‡ç”¨åŸå§‹çš„iOSå¼€å‘é¡µé¢åˆ·æ–°çš„æ–¹å¼(å¯¹å¯¹è±¡è¿›è¡Œæ“ä½œ)ï¼Œè€Œæ˜¯è¦ä½¿ç”¨çŠ¶æ€æ¥å¯¹ç»„ä»¶è¿›è¡Œç®¡ç†ï¼Œæ”¹å˜ç»„ä»¶çš„çŠ¶æ€æ¥å®ç°ç»„ä»¶åˆ·æ–°æ“ä½œã€‚ ä¿®æ”¹ä¸Šé¢ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819struct SimpleView:View &#123; @State var count = 0 var body: some View &#123; VStack(alignment: /*@START_MENU_TOKEN@*/.center/*@END_MENU_TOKEN@*/, spacing: 20) &#123; Button(action:&#123; self.count += 1 &#125;)&#123; Text(\"æŒ‰é’®ä¸€\") &#125; Text(\"\\(self.count)\") &#125; &#125;&#125;struct ContentView_Previews: PreviewProvider &#123; static var previews: some View &#123; SimpleView() &#125;&#125; é‡æ–°æ¢å¤é¢„è§ˆï¼Œå¯ä»¥çœ‹åˆ°è®¡æ•°å™¨çš„åŠŸèƒ½å·²ç»æ­£å¸¸äº†ã€‚@Stateæ˜¯SwiftUIä¸­æä¾›çš„ä¸€ä¸ªå±æ€§è£…é¥°å™¨ï¼Œå…¶å¯ä»¥å°†æŸä¸ªå±æ€§æŒ‡å®šä¸ºæœ‰çŠ¶æ€çš„ï¼Œå½“æœ‰çŠ¶æ€çš„å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¸å…¶ç»‘å®šçš„ç»„ä»¶ä¼šè‡ªåŠ¨åˆ·æ–°ã€‚ å¦‚æœæœ‰çŠ¶æ€å±æ€§åœ¨çˆ¶ç»„ä»¶ä¸­ï¼Œè€Œæˆ‘ä»¬éœ€è¦åœ¨å­ç»„ä»¶ä¸­å¤„ç†ç”¨æˆ·äº¤äº’é€»è¾‘è¿›è¡Œé¡µé¢åˆ·æ–°ï¼Œè¿™æ—¶ï¼Œå¦‚æœä¸åšç‰¹æ®Šçš„å¤„ç†ï¼Œå­ç»„ä»¶ä¼šå› ä¸ºç»“æ„ä½“ä¸å¯ä¿®æ”¹çš„åŸåˆ™è€Œå¯¼è‡´æ— æ³•å¯¹ä¼ é€’è¿›æ¥çš„çŠ¶æ€å±æ€§è¿›è¡Œæ›´æ”¹ã€‚å¯¹äºè¿™ç§åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨SwiftUIä¸­æä¾›çš„@Bindingè£…é¥°å™¨æ¥ä¿®æ”¹å­ç»„ä»¶ä¸­çš„å±æ€§ï¼Œä¾‹å¦‚ï¼š 123456789101112131415161718192021222324252627struct SimpleSubText:View &#123; @Binding var count:Int var body: some View &#123; Button(action:&#123; self.count += 1 &#125;)&#123; Text(\"æŒ‰é’®ä¸€\") &#125; Text(\"\\(self.count)\") &#125;&#125;struct SimpleView:View &#123; @State var count = 0 var body: some View &#123; VStack(alignment: /*@START_MENU_TOKEN@*/.center/*@END_MENU_TOKEN@*/, spacing: 20) &#123; SimpleSubText(count: $count) &#125; &#125;&#125;struct ContentView_Previews: PreviewProvider &#123; static var previews: some View &#123; SimpleView() &#125;&#125; ä¸‰ã€ä½¿ç”¨ç¯å¢ƒå¯¹è±¡ä½¿ç”¨çŠ¶æ€æ¥ç®¡ç†ç»„ä»¶åˆ·æ–°å¹¶ä¸å¤æ‚ï¼Œä½†æ˜¯å¦‚æœç»„ä»¶çš„åµŒå¥—å±‚æ•°è¾ƒå¤šï¼Œæœ‰çŠ¶æ€æ•°æ®çš„ä¼ é€’å¯èƒ½éœ€è¦å±‚å±‚ä¸‹ä¼ ï¼Œè¿™ä¼šä½¿æ•°æ®çš„æµè½¬å˜å¾—ç›¸å¯¹å¤æ‚ã€‚åœ¨SwiftUIä¸­ï¼Œè¿˜æœ‰å¦å¤–ä¸€ç§æ–¹å¼ï¼Œå¯ä»¥å®šä¹‰ç¯å¢ƒå¯¹è±¡ï¼Œç¯å¢ƒå¯¹è±¡åœ¨SwiftUIç»„ä»¶çš„ä»»æ„ä½ç½®éƒ½å¯ä»¥è‡ªç”±è®¿é—®å’Œä¿®æ”¹ï¼Œä¸ç¯å¢ƒå¯¹è±¡æœ‰ç»‘å®šå…³ç³»çš„ç»„ä»¶éƒ½ä¼šæ¥æ”¶åˆ°å˜åŠ¨çš„é€šçŸ¥å¹¶åˆ·æ–°ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233// ä½œä¸ºç¯å¢ƒæ•°æ®çš„ç±»ï¼Œå¿…é¡»æ˜¯å¯ç»‘å®šç›‘å¬çš„ï¼Œéœ€è¦ç»§æ‰¿ObservableObjectclass EnviData: ObservableObject &#123; @Published var count = 0&#125;struct SimpleSubText:View &#123; // è·å–ç¯å¢ƒæ•°æ®è¿›è¡Œä½¿ç”¨ @EnvironmentObject var data:EnviData var body: some View &#123; Button(action:&#123; self.data.count += 1 &#125;)&#123; Text(\"æŒ‰é’®ä¸€\") &#125; Text(\"\\(self.data.count)\") &#125;&#125;struct SimpleView:View &#123; var body: some View &#123; VStack(alignment: .center, spacing: 20) &#123; SimpleSubText() &#125; &#125;&#125;struct ContentView_Previews: PreviewProvider &#123; static var previews: some View &#123; // ä¼ é€’ç¯å¢ƒæ•°æ® SimpleView().environmentObject(EnviData()) &#125;&#125; éœ€è¦æ³¨æ„ï¼Œå¹¶ä¸æ˜¯ç¯å¢ƒå¯¹è±¡ä¸­æ‰€æœ‰çš„å±æ€§éƒ½ä¼šè§¦å‘ç»‘å®šå’Œç›‘å¬ï¼Œåªæœ‰ä½¿ç”¨@publishedçš„å±æ€§æ‰ä¼šè§¦å‘ï¼Œå› æ­¤ç¯å¢ƒå¯¹è±¡ä¹Ÿæ˜¯æ”¯æŒé™æ€çš„å†…éƒ¨å±æ€§ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š805263726","categories":[{"name":"SwiftUI","slug":"SwiftUI","permalink":"http://huishao.cc/categories/SwiftUI/"}],"tags":[],"keywords":[{"name":"SwiftUI","slug":"SwiftUI","permalink":"http://huishao.cc/categories/SwiftUI/"}]},{"title":"SwiftUIç›´é€šè½¦ç³»åˆ—ï¼ˆ3ï¼‰â€”â€” ä½¿ç”¨å¯¼èˆª","slug":"405SwiftUIç›´é€šè½¦ç³»åˆ—ï¼ˆ3ï¼‰â€”â€” ä½¿ç”¨å¯¼èˆª","date":"2020-09-26T16:00:00.000Z","updated":"2021-07-15T11:29:07.634Z","comments":true,"path":"2020/09/27/405SwiftUIç›´é€šè½¦ç³»åˆ—ï¼ˆ3ï¼‰â€”â€” ä½¿ç”¨å¯¼èˆª/","link":"","permalink":"http://huishao.cc/2020/09/27/405SwiftUIç›´é€šè½¦ç³»åˆ—ï¼ˆ3ï¼‰â€”â€” ä½¿ç”¨å¯¼èˆª/","excerpt":"","text":"SwiftUIç›´é€šè½¦ç³»åˆ—ä¸‰ï¼ˆ3ï¼‰â€”â€” ä½¿ç”¨å¯¼èˆªå…³äºSwiftUIï¼Œæˆ‘ä»¬å‰ä¸¤ç¯‡åšå®¢ä»‹ç»äº†ç‹¬ç«‹ç»„ä»¶çš„å¸ƒå±€ä¸å±æ€§è®¾ç½®ç›¸å…³å†…å®¹ï¼Œå¹¶ä¸”ä»‹ç»äº†å¼€å‘ä¸­æœ€å¸¸ç”¨çš„åˆ—è¡¨è§†å›¾çš„ä½¿ç”¨ã€‚ä½†æ˜¯ä¸€ä¸ªå®Œæ•´çš„åº”ç”¨ç¨‹åºä¸å¯èƒ½æ˜¯å•ç•Œé¢çš„ï¼Œå¦‚ä½•ä½¿ç”¨SwiftUIè¿›è¡Œç•Œé¢é—´çš„å¯¼èˆªè·³è½¬ï¼Œæ˜¯æˆ‘ä»¬æœ¬åšå®¢è®¨è®ºçš„é‡ç‚¹ã€‚å‰ä¸¤ç¯‡åšå®¢åœ°å€å¦‚ä¸‹ï¼š SwiftUIç›´é€šè½¦ç³»åˆ—ï¼ˆ1ï¼‰â€”â€” è§†å›¾çš„å¸ƒå±€ä¸ç»„ç»‡ SwiftUIç›´é€šè½¦ç³»åˆ—ï¼ˆ2ï¼‰â€”â€” åˆ—è¡¨è§†å›¾ åœ¨æœ¬ç³»åˆ—çš„ç¬¬äºŒç¯‡åšå®¢ä¸­ï¼Œæˆ‘ä»¬èƒ½å¤Ÿä½¿ç”¨SwiftUIæ¥æ„å»ºåˆ—è¡¨è§†å›¾ï¼Œé€šå¸¸ï¼Œåˆ—è¡¨è§†å›¾ç”¨æ¥å±•ç¤ºç›®å½•é¡µé¢ï¼Œå½“ç”¨æˆ·ç‚¹å‡»åˆ—è¡¨ä¸­çš„æŸä¸€é¡¹æ—¶ï¼Œéœ€è¦è·³è½¬åˆ°è¯¦æƒ…é¡µã€‚åœ¨iOSåº”ç”¨ä¸­ï¼Œé¡µé¢çš„è·³è½¬å¸¸ç”¨å¯¼èˆªæ§åˆ¶å™¨è¿›è¡Œç®¡ç†ã€‚åœ¨SwiftUIä¸­ï¼Œåˆ›å»ºä¸€ä¸ªå¯¼èˆªä¹Ÿæ˜¯éå¸¸ç®€å•çš„ï¼Œåªéœ€è¦åœ¨ç»„ä»¶æœ€å¤–å±‚åµŒå¥—NavigationViewå³å¯ã€‚ä»¥æˆ‘ä»¬ä¹‹å‰çš„åˆ—è¡¨è§†å›¾Demoä¸ºä¾‹ï¼Œæ”¹å†™ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182import SwiftUIimport UIKitstruct ContactModel &#123; var name:String var phone:String&#125;let modelData = [ ContactModel(name:\"ç‹å°ä¸«\", phone:\"15137348888\"), ContactModel(name:\"æå°äºŒ\", phone:\"15137348989\")]struct ContentView: View &#123; var body: some View &#123; VStack (alignment: .leading, spacing: 10) &#123; Text(\"Hello, SwiftUI!å•Šå•Šå•Š\") .foregroundColor(Color.red) .underline() .font(Font.system(size: 25)) Spacer() Text(\"Hello, SwiftUI!\") .foregroundColor(Color.red) .underline() .font(Font.system(size: 25)) &#125; .padding(EdgeInsets(top: 30, leading: 0, bottom: 30, trailing: 0)) &#125;&#125;struct Label:UIViewRepresentable &#123; func makeUIView(context: Context) -&gt; UILabel &#123; UILabel(frame: .zero) &#125; func updateUIView(_ uiView: UILabel, context: Context) &#123; uiView.text = \"Hello\" &#125;&#125;struct ContentImage:View &#123; var body: some View &#123; Image(\"demo\") .clipShape(Circle()) .shadow(radius: 30) &#125;&#125;struct RowContent:View &#123; var contactModel:ContactModel var body: some View &#123; HStack(alignment:.top) &#123; Image(\"demo\").resizable().frame(width: 70, height: 70) VStack(alignment:.leading, spacing: 10) &#123; Text(self.contactModel.name).bold().font(Font.system(size: 25)) Text(self.contactModel.phone).font(Font.system(size: 20)) &#125; Spacer() &#125;.padding(EdgeInsets(top: 10, leading: 20, bottom: 10, trailing: 20)) &#125;&#125;struct ListContent:View &#123; var body: some View &#123; NavigationView &#123; List(modelData, id: \\.name) &#123; model in RowContent(contactModel: model) &#125; .navigationBarTitle(\"é€šè®¯å½•\") &#125; &#125;&#125;struct ContentView_Previews: PreviewProvider &#123; static var previews: some View &#123; ListContent() &#125;&#125; ä½ åªéœ€è¦å…³æ³¨ListContentç»“æ„ä½“å³å¯ï¼Œå…¶ä¸­ä¸ºåˆ—è¡¨è§†å›¾è®¾ç½®äº†å¯¼èˆªï¼Œå¹¶ä¸”å®šä¹‰äº†å¯¼èˆªæ ä¸Šçš„æ ‡é¢˜ï¼Œæ•ˆæœå¦‚ä¸‹å›¾ï¼š è¦å®ç°é¡µé¢çš„è·³è½¬ï¼Œéœ€è¦ä¸ºè¦è§¦å‘è·³è½¬çš„ç»„ä»¶æ·»åŠ NavigationLinkåŒ…è£¹ï¼ŒNavigationLinkå¯ä»¥æŒ‡å‘è¦è·³è½¬çš„è¯¦æƒ…é¡µé¢ï¼Œå¦‚ä¸‹ï¼š 123456789101112struct ListContent:View &#123; var body: some View &#123; NavigationView &#123; List(modelData, id: \\.name) &#123; model in NavigationLink(destination: ContentImage()) &#123; RowContent(contactModel: model) &#125; &#125; .navigationBarTitle(\"é€šè®¯å½•\") &#125; &#125;&#125; å¦‚æœè¯¦æƒ…é¡µé¢æ˜¯åŠ¨æ€çš„ï¼Œåœ¨è·³è½¬æ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†æ•°æ®ä¼ é€’è¿‡å»ï¼Œå¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627struct ContentImage:View &#123; var name:String var phone:String var body: some View &#123; VStack() &#123; Image(\"demo\") .clipShape(Circle()) .shadow(radius: 30) .offset(x: 0, y: -70) Text(name).offset(x: 0, y: -50) Text(phone).offset(x: 0, y: -30) &#125; &#125;&#125;struct ListContent:View &#123; var body: some View &#123; NavigationView &#123; List(modelData, id: \\.name) &#123; model in NavigationLink(destination: ContentImage(name: model.name, phone: model.phone)) &#123; RowContent(contactModel: model) &#125; &#125; .navigationBarTitle(\"é€šè®¯å½•\") &#125; &#125;&#125; æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š é»˜è®¤å¯¼èˆªçš„æ ‡é¢˜æ˜¯å¤§æ–‡å­—é£æ ¼çš„ï¼Œè‹¥è¦ä½¿ç”¨å¸¸è§„é£æ ¼çš„ï¼Œéœ€è¦é…ç½®å…¶displayModeå±æ€§ï¼Œå¦‚ä¸‹ï¼š 123456789101112struct ListContent:View &#123; var body: some View &#123; NavigationView &#123; List(modelData, id: \\.name) &#123; model in NavigationLink(destination: ContentImage(name: model.name, phone: model.phone)) &#123; RowContent(contactModel: model) &#125; &#125; .navigationBarTitle(\"é€šè®¯å½•\", displayMode: .inline) &#125; &#125;&#125; æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š805263726","categories":[{"name":"SwiftUI","slug":"SwiftUI","permalink":"http://huishao.cc/categories/SwiftUI/"}],"tags":[],"keywords":[{"name":"SwiftUI","slug":"SwiftUI","permalink":"http://huishao.cc/categories/SwiftUI/"}]},{"title":"SwiftUIç›´é€šè½¦ç³»åˆ—ï¼ˆ2ï¼‰â€”â€” åˆ—è¡¨è§†å›¾","slug":"404 SwiftUIç›´é€šè½¦ç³»åˆ—ï¼ˆ2ï¼‰â€”â€” åˆ—è¡¨è§†å›¾","date":"2020-08-27T16:00:00.000Z","updated":"2021-07-15T11:28:25.160Z","comments":true,"path":"2020/08/28/404 SwiftUIç›´é€šè½¦ç³»åˆ—ï¼ˆ2ï¼‰â€”â€” åˆ—è¡¨è§†å›¾/","link":"","permalink":"http://huishao.cc/2020/08/28/404 SwiftUIç›´é€šè½¦ç³»åˆ—ï¼ˆ2ï¼‰â€”â€” åˆ—è¡¨è§†å›¾/","excerpt":"","text":"SwiftUIç›´é€šè½¦ç³»åˆ—ï¼ˆ2ï¼‰â€”â€” åˆ—è¡¨è§†å›¾åˆ—è¡¨è§†å›¾çš„å¼€å‘ä¸­éå¸¸å¸¸ç”¨çš„é¡µé¢å…ƒç´ ã€‚SwiftUIä¸­ä¹Ÿæœ‰ä¸“é—¨ç”¨æ¥æ¸²æŸ“åˆ—è¡¨çš„å…ƒç´ æä¾›ã€‚ ä¸€ã€ç¼–å†™è¡Œè§†å›¾åˆ—è¡¨å®é™…ä¸Šæ˜¯ä¸€ç»„è¡Œè§†å›¾çš„ç»„åˆï¼Œåœ¨å¸ƒå±€åˆ—è¡¨è§†å›¾ä¹‹å‰ï¼Œä½ é¦–å…ˆéœ€è¦å®šä¹‰å¥½è¡Œè§†å›¾çš„å¸ƒå±€ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªImageå…ƒç´ å’Œä¸¤ä¸ªTextå…ƒç´ æ¥å¸ƒå±€ä¸€ä¸ªç®€å•çš„è”ç³»äººè¡Œè§†å›¾ã€‚ 123456789101112struct RowContent:View &#123; var body: some View &#123; HStack(alignment:.top) &#123; Image(\"demo\").resizable().frame(width: 70, height: 70) VStack(alignment:.leading, spacing: 10) &#123; Text(\"ç‹å°ä¸«\").bold().font(Font.system(size: 25)) Text(\"15137344444\").font(Font.system(size: 20)) &#125; Spacer() &#125;.padding(EdgeInsets(top: 10, leading: 20, bottom: 10, trailing: 20)) &#125;&#125; åœ¨é¢„è§ˆç•Œé¢ä¸Šä¸å¸ƒå±€æƒ…å†µè¿›è¡Œé¢„è§ˆï¼Œå¦‚ä¸‹å›¾ï¼š äºŒã€å…³è”æ•°æ®åˆ—è¡¨ä¸­å±•ç¤ºçš„æ•°æ®å¾€å¾€æ˜¯ä¸€ç»„ç›¸ä¼¼ç±»å‹çš„æ•°æ®ã€‚ä»¥ä¸Šè”ç³»äººè¡Œè§†å›¾ä¸ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ç»„è”ç³»äººæ•°æ®æ¥å¡«å……åˆ°åˆ—è¡¨çš„è¡Œè§†å›¾ä¸­ã€‚é¦–å…ˆå®šä¹‰ä¸€ä¸ªç»“æ„ä½“ç”¨æ¥æè¿°è”ç³»äººä¿¡æ¯ï¼Œå¦‚ä¸‹ï¼š 123456789struct ContactModel &#123; var name:String var phone:String&#125;let modelData = [ ContactModel(name:\"ç‹å°ä¸«\", phone:\"15137348888\"), ContactModel(name:\"æå°äºŒ\", phone:\"15137348989\")] å¦‚ä¸Šä»£ç æ‰€ç¤ºï¼Œå…¶ä¸­ContactModelå®šä¹‰äº†è”ç³»äººçš„åŸºæœ¬ä¿¡æ¯ï¼ŒmodelDataæ˜¯ä¸€ç»„è”ç³»äººæ¨¡å‹ï¼Œå®é™…åº”ç”¨ä¸­ï¼ŒmodelDataçš„æ•°æ®æ¥æºå¯èƒ½æ˜¯ç½‘ç»œï¼Œä¹Ÿå¯èƒ½æ˜¯æœ¬åœ°æ–‡ä»¶ã€‚ä¿®æ”¹RowContentä»£ç å¦‚ä¸‹ï¼š 123456789101112131415struct RowContent:View &#123; var contactModel:ContactModel var body: some View &#123; HStack(alignment:.top) &#123; Image(\"demo\").resizable().frame(width: 70, height: 70) VStack(alignment:.leading, spacing: 10) &#123; Text(self.contactModel.name).bold().font(Font.system(size: 25)) Text(self.contactModel.phone).font(Font.system(size: 20)) &#125; Spacer() &#125;.padding(EdgeInsets(top: 10, leading: 20, bottom: 10, trailing: 20)) &#125;&#125; SwiftUIçš„å®æ—¶é¢„è§ˆåŠŸèƒ½ä¹Ÿæ”¯æŒå¯¹ä¸€ç»„ç»„ä»¶è¿›è¡Œé¢„è§ˆï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678struct ContentView_Previews: PreviewProvider &#123; static var previews: some View &#123; Group &#123; RowContent(contactModel: modelData[0]) RowContent(contactModel: modelData[1]) &#125;.previewLayout(.fixed(width: 400, height: 80)) &#125;&#125; æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¸‰ã€ä½¿ç”¨åˆ—è¡¨ç»„ä»¶SwiftUIä¸­ä½¿ç”¨Listç»„ä»¶æ¥æ„å»ºåˆ—è¡¨ï¼Œå°†å¸ƒå±€å¥½çš„åˆ—è¡¨è¡Œè§†å›¾åµŒå…¥å…¶ä¸­å³å¯å±•ç¤ºå‡ºåˆ—è¡¨ç•Œé¢ï¼Œå¦‚ä¸‹ï¼š 1234567891011121314struct ListContent:View &#123; var body: some View &#123; List &#123; RowContent(contactModel: modelData[0]) RowContent(contactModel: modelData[1]) &#125; &#125;&#125;struct ContentView_Previews: PreviewProvider &#123; static var previews: some View &#123; ListContent() &#125;&#125; æ­¤æ—¶ï¼Œé¢„è§ˆæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š åœ¨å®é™…å¼€å‘ä¸­ï¼Œä¸€èˆ¬æˆ‘ä¼šé‡‡ç”¨åŠ¨æ€çš„æ–¹å¼æ¥æ„å»ºåˆ—è¡¨ï¼Œé€šè¿‡å¯¹æ•°æ®æºçš„ä¾¿åˆ©ï¼Œå¯ä»¥å¾ªç¯ç”Ÿæˆåˆ—è¡¨è¡Œï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567struct ListContent:View &#123; var body: some View &#123; List(modelData, id: \\.name) &#123; model in RowContent(contactModel: model) &#125; &#125;&#125; å…¶ä¸­idæ˜¯ä¸€ä¸ªè¡Œæ ‡è¯†å­—æ®µï¼Œä½¿ç”¨æ•°æ®æºä¸­èƒ½å¤Ÿä¿è¯å”¯ä¸€çš„å­—æ®µæ¥è®¾ç½®å³å¯ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š805263726","categories":[{"name":"SwiftUI","slug":"SwiftUI","permalink":"http://huishao.cc/categories/SwiftUI/"}],"tags":[],"keywords":[{"name":"SwiftUI","slug":"SwiftUI","permalink":"http://huishao.cc/categories/SwiftUI/"}]},{"title":"SwiftUIç›´é€šè½¦ç³»åˆ—ï¼ˆ1ï¼‰â€”â€” è§†å›¾çš„å¸ƒå±€ä¸ç»„ç»‡","slug":"403SwiftUIç›´é€šè½¦ç³»åˆ—ï¼ˆ1ï¼‰â€”â€” è§†å›¾çš„å¸ƒå±€ä¸ç»„ç»‡","date":"2020-08-25T16:00:00.000Z","updated":"2021-07-15T11:27:40.179Z","comments":true,"path":"2020/08/26/403SwiftUIç›´é€šè½¦ç³»åˆ—ï¼ˆ1ï¼‰â€”â€” è§†å›¾çš„å¸ƒå±€ä¸ç»„ç»‡/","link":"","permalink":"http://huishao.cc/2020/08/26/403SwiftUIç›´é€šè½¦ç³»åˆ—ï¼ˆ1ï¼‰â€”â€” è§†å›¾çš„å¸ƒå±€ä¸ç»„ç»‡/","excerpt":"","text":"SwiftUIç›´é€šè½¦ç³»åˆ—ï¼ˆ1ï¼‰â€”â€” è§†å›¾çš„å¸ƒå±€ä¸ç»„ç»‡ä¸€ã€å¼•è¨€SwiftUIæä¾›äº†ä¸€ç§æ›´å¿«ã€æ›´é«˜æ•ˆä¹Ÿæ›´ç®€å•çš„é¡µé¢å¼€å‘æ–¹å¼ã€‚æˆ‘ä»¬çŸ¥é“ç›¸å¯¹äºObjective-Cï¼ŒSwiftè¯­è¨€æœ¬èº«å°±æ›´åŠ é«˜æ•ˆç®€æ´ï¼ŒSwiftUIé‡‡ç”¨äº†ç»“æ„åŒ–çš„å¸ƒå±€æ–¹å¼ï¼Œä½¿å¾—åº”ç”¨çš„ç•Œé¢å¼€å‘æ›´åŠ ç›´è§‚å¿«é€Ÿã€‚æœ¬ç³»åˆ—åšå®¢ï¼ŒåŸºäºAppleå®˜æ–¹çš„SwiftUI Tutorialsä¸ºå‚è€ƒï¼Œé…åˆä»£ç ç¤ºä¾‹ä»‹ç»äº†SwiftUIçš„åŸºç¡€åº”ç”¨å’Œç‰¹æ€§ï¼Œå¸®åŠ©å¤§å®¶å¿«é€Ÿå…¥é—¨SwiftUIå¼€å‘ï¼Œä¸ºå·¥ä½œä¸­çš„å¼€å‘æ•ˆç‡èµ‹èƒ½ã€‚ äºŒã€SwiftUIåˆä½“éªŒåšä¸ºAppleç›¸å…³äº§å“çš„å¼€å‘è€…ï¼Œå½±å“ç•Œé¢å¼€å‘æ•ˆç‡çš„ä¸€å¤§é—®é¢˜æ˜¯æ¯æ¬¡ä»£ç çš„ä¿®æ”¹è¦æŸ¥çœ‹æ•ˆæœéƒ½éœ€è¦é‡æ–°ç¼–è¯‘è¿è¡Œã€‚å¾€å¾€ï¼Œè°ƒè¯•éªŒè¯çš„æ—¶é—´è¦è¿œè¿œå¤§äºç¼–ç æ—¶é—´ï¼Œä¸¥é‡å½±å“äº†å¼€å‘æ•ˆç‡ã€‚å½“ç„¶ï¼Œè¿™ä¹Ÿæ˜¯å¤§å¤šæ•°ç¼–è¯‘å‹è¯­è¨€æ‰€å…±æœ‰çš„ç—›ç‚¹ã€‚ä½¿ç”¨SwiftUIé…åˆXcodeçš„é¢„è§ˆåŠŸèƒ½ï¼Œå¯ä»¥åšåˆ°ä»£ç çš„å®æ—¶ä¿®æ”¹å®æ—¶é¢„è§ˆæ•ˆæœï¼Œç•Œé¢çš„å¼€å‘æ•ˆç‡éå¸¸é«˜ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªæ¨¡æ¿å·¥ç¨‹ä½“éªŒä¸‹SwiftUIçš„åŸºç¡€åŠŸèƒ½ã€‚ä½¿ç”¨Xcodeæ–°å»ºä¸€ä¸ªAppé¡¹ç›®ï¼Œåœ¨é€‰æ‹©è¯­è¨€æ—¶ï¼Œé€‰æ‹©Swiftï¼Œå¹¶ä½¿ç”¨SwiftUIåˆ›å»ºç•Œé¢å…¥å£ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ åˆ›å»ºå‡ºçš„å·¥ç¨‹ä¸­åŒ…å«3ä¸ªswiftæ–‡ä»¶ï¼Œå…¶ä¸­AppDelegate.swiftæ–‡ä»¶æ˜¯åº”ç”¨çš„å…¥å£æ–‡ä»¶ï¼Œå…¶åœ¨ä»»ä½•æ¨¡æ¿é¡¹ç›®ä¸­å‡ ä¹éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«æ”¯æŒã€‚SceneDelegate.swiftæ–‡ä»¶æ˜¯iOS 13åæ–°å¼•å…¥çš„ï¼Œç”¨æ¥è¿›è¡Œå¤šåœºæ™¯çš„ç®¡ç†ï¼Œæˆ‘ä»¬ä¹Ÿæ— éœ€å…³æ³¨ã€‚ContentView.swiftæ–‡ä»¶æ˜¯æœ€ç»ˆçš„ç•Œé¢å®šä¹‰æ–‡ä»¶ï¼Œå…¶ä¸­ä½¿ç”¨SwiftUIå®šä¹‰äº†ç•Œé¢çš„æ˜¾ç¤ºå†…å®¹ï¼ŒContentView.swiftæ–‡ä»¶ä¸­çš„ä»£ç å¦‚ä¸‹ï¼š 12345678910111213import SwiftUIstruct ContentView: View &#123; var body: some View &#123; Text(\"Hello, SwiftUI!\") &#125;&#125;struct ContentView_Previews: PreviewProvider &#123; static var previews: some View &#123; ContentView() &#125;&#125; å¦‚ä¸Šä»£ç æ‰€ç¤ºï¼ŒContentViewæ˜¯å®šä¹‰çš„ä¸€ä¸ªè§†å›¾ç»“æ„ä½“ï¼Œå…¶æè¿°çš„å°±æ˜¯ç•Œé¢çš„æ¸²æŸ“ä¿¡æ¯ï¼Œå…¶ä¸­Textä¼šåœ¨é¡µé¢ä¸Šæ¸²æŸ“å‡ºä¸€ä¸ªæ–‡æœ¬æ ‡ç­¾ï¼Œæ˜¾ç¤ºâ€œHello Swift!â€ï¼ŒContentView_Previewså®šä¹‰äº†å½“å‰ç•Œé¢çš„é¢„è§ˆè§†å›¾ï¼Œä½ å¯ä»¥å°è¯•å¯¹Textä¸­çš„æ–‡æœ¬è¿›è¡Œä¿®æ”¹ï¼Œä¿®æ”¹åé¢„è§ˆé¡µé¢å°±ä¼šå®æ—¶çš„å±•ç¤ºå‡ºå½“å‰çš„ç•Œé¢æ¨¡æ ·ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ å¯ä»¥é€šè¿‡ä¸ºTextç»„ä»¶è®¾ç½®å±æ€§æ¥å®æ—¶çš„æ”¹å˜ç•Œé¢ï¼Œä¾‹å¦‚æ–‡æœ¬çš„é¢œè‰²ï¼Œå­—ä½“ï¼Œæ˜¯å¦åŠ ä¸‹åˆ’çº¿ç­‰ç­‰ï¼Œå¦‚ä¸‹ï¼š 12345678struct ContentView: View &#123; var body: some View &#123; Text(\"Hello, SwiftUI!\") .foregroundColor(Color.red) .underline() .font(Font.system(size: 25)) &#125;&#125; æ­¤æ—¶é¡µé¢æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š é€šè¿‡ä»£ç å¯ä»¥ä¿®æ”¹UIå…ƒç´ çš„å±æ€§ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è®¾ç½®å®¹å™¨çš„å¯¹é½æ–¹å¼å’Œå…ƒç´ é—´è·ç­‰ï¼Œå¦‚ä¸‹ï¼š 1234567891011121314struct ContentView: View &#123; var body: some View &#123; VStack (alignment: .leading, spacing: 10) &#123; Text(\"Hello, SwiftUI!å•Šå•Šå•Š\") .foregroundColor(Color.red) .underline() .font(Font.system(size: 25)) Text(\"Hello, SwiftUI!\") .foregroundColor(Color.red) .underline() .font(Font.system(size: 25)) &#125; &#125;&#125; å…¶ä¸­alignmentè®¾ç½®å†…éƒ¨ç»„ä»¶çš„å¯¹å…¶æ–¹å¼ï¼Œspacingè®¾ç½®ç»„ä»¶é—´è·ç¦»ï¼Œå¯¹äºæ°´å¹³æ ˆï¼Œspacingè®¾ç½®çš„æ˜¯åˆ—é—´è·ï¼Œå¯¹äºå‚ç›´æ ˆï¼Œspacingè®¾ç½®çš„æ˜¯è¡Œé—´è·ã€‚é»˜è®¤ï¼Œç»„ä»¶ä¼šè‡ªåŠ¨è®¡ç®—å…¶åšå æ®çš„ä½ç½®ï¼ŒSwiftUIä¸­ä¹Ÿæä¾›äº†ä¸€ç§ç‰¹æ®Šçš„å ä½å…ƒç´ ï¼Œå…¶å¯ä»¥å°†å‰©ä½™çš„ç©ºé—´å……æ»¡ï¼Œä¾‹å¦‚åœ¨ä¸¤ä¸ªå‚ç›´å¸ƒå±€çš„å…ƒç´ ä¸­é—´åŠ å…¥ä¸€ä¸ªå ä½å…ƒç´ ï¼Œåˆ™å…¶ä¼šè¿›è¡Œä¸¤ç«¯å¸ƒå±€ï¼Œå¦‚ä¸‹ï¼š 123456789101112131415struct ContentView: View &#123; var body: some View &#123; VStack (alignment: .leading, spacing: 10) &#123; Text(\"Hello, SwiftUI!å•Šå•Šå•Š\") .foregroundColor(Color.red) .underline() .font(Font.system(size: 25)) Spacer() Text(\"Hello, SwiftUI!\") .foregroundColor(Color.red) .underline() .font(Font.system(size: 25)) &#125; &#125;&#125; æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¯ä»¥å‘ç°ï¼ŒSwiftUIåœ¨å¸ƒå±€ä¸Šï¼Œå¾ˆå¤šæ€è·¯éƒ½å’ŒCSSå¸ƒå±€å¾ˆåƒï¼Œå¯¹äºç»„ä»¶å…ƒç´ ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä¸ºå…¶è¿½åŠ å†…é—´è·Paddingï¼Œä¾‹å¦‚ï¼š 12345678910111213141516struct ContentView: View &#123; var body: some View &#123; VStack (alignment: .leading, spacing: 10) &#123; Text(\"Hello, SwiftUI!å•Šå•Šå•Š\") .foregroundColor(Color.red) .underline() .font(Font.system(size: 25)) Spacer() Text(\"Hello, SwiftUI!\") .foregroundColor(Color.red) .underline() .font(Font.system(size: 25)) &#125; .padding(EdgeInsets(top: 30, leading: 0, bottom: 30, trailing: 0)) &#125;&#125; ä¸‰ã€ä½¿ç”¨å›¾ç‰‡ç»„ä»¶åœ¨SwiftUIä¸­ï¼Œå¯ä»¥æ–¹ä¾¿çš„å¸ƒå±€å›¾ç‰‡å…ƒç´ ï¼Œå¹¶è®¾ç½®å›¾ç‰‡çš„åœ†è§’ï¼Œé˜´å½±ï¼Œè¾¹æ¡†ç­‰ã€‚ä½¿ç”¨å¦‚ä¸‹ä»£ç å³å¯åœ¨ç•Œé¢ä¸­é—´å¸ƒå±€å‡ºä¸€ä¸ªå›¾ç‰‡å…ƒç´ ï¼š 12345struct ContentImage:View &#123; var body: some View &#123; Image(\"demo\") &#125;&#125; å…¶ä¸­â€œdemoâ€ä¸ºå·¥ç¨‹ä¸­ä¸€ä¸ªèµ„æºå›¾ç‰‡çš„åå­—ã€‚é¢„è§ˆæ•ˆæœå¦‚ä¸‹ï¼š å›¾ç‰‡å…ƒç´ ä¹Ÿæœ‰å¾ˆå¤šå±æ€§å¯ä»¥è®¾ç½®ï¼Œå¦‚clipShapeè®¾ç½®å…ƒç´ çš„å½¢çŠ¶ï¼Œshadowè®¾ç½®å…ƒç´ çš„é˜´å½±ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567struct ContentImage:View &#123; var body: some View &#123; Image(\"demo\") .clipShape(Circle()) .shadow(radius: 30) &#125;&#125; æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å››ã€åœ¨SwiftUIä¸­ä½¿ç”¨UIKitç»„ä»¶ä¸Šé¢æˆ‘ä»¬ä½¿ç”¨çš„æ–‡æœ¬ä¸å›¾ç‰‡å…ƒç´ ï¼Œéƒ½æ˜¯SwiftUIæ¡†æ¶ä¸­å®šä¹‰çš„åŸºç¡€ç»„ä»¶ã€‚åœ¨å®é™…å¼€å‘ä¸­çš„æ›´å¤šæ—¶å€™ï¼Œä½ éœ€è¦ç»“åˆUIKitæ¥è‡ªå®šä¹‰ä¸€ä¸ªSwiftUIç»„ä»¶ï¼Œè¿™æœ¬èº«ä¹Ÿéå¸¸æ–¹ä¾¿ã€‚ä¾‹å¦‚æˆ‘ä»¬è¦ä½¿ç”¨UIKitä¸­çš„UILabelç»„ä»¶ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789struct Label:UIViewRepresentable &#123; func makeUIView(context: Context) -&gt; UILabel &#123; UILabel(frame: .zero) &#125; func updateUIView(_ uiView: UILabel, context: Context) &#123; uiView.text = \"Hello\" &#125;&#125; UIViewRepresentableåè®®ç”¨æ¥å°†UIKitä¸­çš„ç»„ä»¶å®šä¹‰ä¸ºä¸€ä¸ªSwiftUIå…ƒç´ ï¼Œå…¶ä¸­æœ‰ä¸¤ä¸ªæ–¹æ³•æ˜¯å¿…é¡»è¦å®ç°çš„ï¼ŒmakeUIViewç”¨æ¥è¿”å›ä¸€ä¸ªæŒ‡å®šçš„UIKitç»„ä»¶ï¼ŒupdateUIViewå½“ç»„ä»¶æ›´æ–°æ—¶ä¼šè¢«è°ƒç”¨ã€‚ æœ‰äº†è¿™äº›åŸºç¡€çŸ¥è¯†ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥ä½¿ç”¨SwiftUIæ¥å®ç°ç®€å•çš„é¡µé¢æ„å»ºäº†ï¼Œä½ å¯ä»¥å°è¯•ç”¨å…¶åšäº›ç®€å•çš„é¡µé¢ç»„åˆï¼Œåªéœ€è¦æŠŠæ¡ä½ï¼Œåœ¨SwiftUIä¸­ï¼Œæ— è®ºç®€å•è¿˜æ˜¯å¤æ‚çš„ç•Œé¢éƒ½æ˜¯é€šè¿‡æ°´å¹³å’Œå’Œå‚ç›´æ ˆçš„ç»„åˆï¼ŒåŠ ä¸Šç»„ä»¶çš„ä½ç½®åç§»æ‰€å¸ƒå±€å‡ºæ¥çš„ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š805263726","categories":[{"name":"SwiftUI","slug":"SwiftUI","permalink":"http://huishao.cc/categories/SwiftUI/"}],"tags":[],"keywords":[{"name":"SwiftUI","slug":"SwiftUI","permalink":"http://huishao.cc/categories/SwiftUI/"}]},{"title":"iOS14æ–°ç‰¹æ€§æ¢ç´¢ä¹‹äºŒï¼šApp Widgetå°ç»„ä»¶åº”ç”¨","slug":"402iOS14æ–°ç‰¹æ€§æ¢ç´¢ä¹‹äºŒï¼šApp Widgetå°ç»„ä»¶åº”ç”¨","date":"2020-07-09T16:00:00.000Z","updated":"2021-07-15T11:26:47.566Z","comments":true,"path":"2020/07/10/402iOS14æ–°ç‰¹æ€§æ¢ç´¢ä¹‹äºŒï¼šApp Widgetå°ç»„ä»¶åº”ç”¨/","link":"","permalink":"http://huishao.cc/2020/07/10/402iOS14æ–°ç‰¹æ€§æ¢ç´¢ä¹‹äºŒï¼šApp Widgetå°ç»„ä»¶åº”ç”¨/","excerpt":"","text":"iOS14æ–°ç‰¹æ€§æ¢ç´¢ä¹‹äºŒï¼šApp Widgetå°ç»„ä»¶åº”ç”¨iOS 14é™¤äº†å¼•å…¥äº†äº®çœ¼çš„App ClipsåŠŸèƒ½å¤–ã€‚è¿˜æœ‰ä¸€ä¸ªä¹Ÿéå¸¸æƒ¹äº‰è®®çš„åŠŸèƒ½å°±æ˜¯App Widgetã€‚App Widgetå¯ä»¥ç†è§£ä¸ºå°ç»„ä»¶ï¼Œåœ¨éå¸¸æ—©çš„Androidç‰ˆæœ¬ä¸­å°±æœ‰äº†Widgetçš„æ¦‚å¿µï¼Œåº”ç”¨å¼€å‘è€…å¯ä»¥ä¸ºç³»ç»Ÿå¼€å‘è‡ªå·±åº”ç”¨ç›¸å¥‘åˆçš„Widgetæ¥è®©ç”¨æˆ·æ›´åŠ æ–¹ä¾¿çš„ä½¿ç”¨åº”ç”¨æä¾›çš„åŠŸèƒ½ã€‚ä¾‹å¦‚Androidæ—©æœŸç³»ç»Ÿä¸­éå¸¸å¸¸è§çš„é’Ÿè¡¨æ—¶é—´ç»„ä»¶ã€å¿«æ·è®¾ç½®ç»„ä»¶ç­‰ã€‚ç”¨æˆ·å¯ä»¥å°†è¿™äº›å°ç»„ä»¶æ ¹æ®è‡ªå·±çš„å–œå¥½æ”¾åœ¨å±å¹•çš„æŒ‡å®šä½ç½®ã€‚ä»è¿™ç‚¹çœ‹ï¼ŒiOS 14æä¾›çš„App WidgetåŠŸèƒ½çš„ç¡®ä¸èƒ½ç®—æ˜¯ä¸€ç§åˆ›æ–°ï¼Œæœ€å¤šç®—æ˜¯ä¸€ç§å¢å¼ºã€‚ å…¶å®ï¼ŒiOS Widgetçš„æ¦‚å¿µå¹¶éæ˜¯iOS 14çªç„¶å¼•å…¥çš„ï¼Œåœ¨iOS 10å‘å¸ƒæ—¶ï¼ŒiOSç³»ç»Ÿå°±å¼•å…¥äº†Extensionç›¸å…³åŠŸèƒ½ï¼Œå…¶ä¸­æœ‰ä¸€ç§Extensionå«åšToday Extensionï¼Œè¿™å°±æ˜¯iOS 14ä¸­Widgetçš„å‰èº«ã€‚Today Extensionå…è®¸å¼€å‘è€…ä¸ºè´Ÿä¸€å±å¼€å‘å¿«æ·åŠŸèƒ½å…¥å£ã€‚å…³äºToday Extensionçš„åº”ç”¨ï¼Œå¦‚ä¸‹åšå®¢æœ‰è¯¦ç»†çš„ä»‹ç»ï¼š iOS8æ–°ç‰¹æ€§æ‰©å±•(Extension)åº”ç”¨ä¹‹ä¸€â€”â€”Todayæ‰©å±•ï¼šhttps://my.oschina.net/u/2340880/blog/485533 iOSä¸­Todayæ‰©å±•æ’ä»¶ä¸å®¿ä¸»APPçš„äº¤äº’ï¼šhttps://my.oschina.net/u/2340880/blog/711807 éœ€è¦æ³¨æ„ï¼Œåœ¨iOS 14ä¸­ï¼ŒToday Extensionç›¸å…³çš„æ¥å£éƒ½å·²ç»è¢«åºŸå¼ƒï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨æ–°çš„WidgetKitæ¡†æ¶æä¾›çš„å°ç»„ä»¶æ¥å£å¼€å‘Widgetã€‚åœ¨iOS 14ä¸Šï¼ŒToday Extensionä¾ç„¶å¯ä»¥ä½¿ç”¨ï¼Œä½†æ˜¯å…¶åŠŸèƒ½å—é™ï¼Œåªèƒ½åœ¨è´Ÿä¸€å±å±•ç¤ºå®ƒï¼Œç”¨æˆ·ä¸èƒ½éšæ„çš„å°†å…¶æ”¾åœ¨æŒ‡å®šå±çš„æŒ‡å®šä½ç½®ã€‚ 1. å…³äºApp WidgetWidgetä¸ºåº”ç”¨ç¨‹åºæä¾›äº†è¿™æ ·ä¸€ç§åŠŸèƒ½ï¼šå…¶å¯ä»¥è®©ç”¨æˆ·åœ¨ä¸»å±å¹•ä¸Šå±•ç¤ºAppä¸­ç”¨æˆ·æ‰€å…³å¿ƒçš„ä¿¡æ¯ã€‚ä¾‹å¦‚ä¸€æ¬¾å¤©æ°”è½¯ä»¶ï¼Œå…¶å¯ä»¥é™„å¸¦ä¸€ä¸ªWidgetè®©ç”¨æˆ·åœ¨ä¸»å±å¹•å°±å¯æŸ¥çœ‹ä»Šæ—¥çš„å¤©æ°”æƒ…å†µï¼Œä¾‹å¦‚è‚¡ç¥¨ç›¸å…³çš„è½¯ä»¶ï¼Œç”¨æˆ·å°†è‡ªå·±æ„Ÿå…´è¶£çš„è‚¡ç¥¨æ”¶è—ï¼Œæ— éœ€æ‰“å¼€Appï¼Œåœ¨ä¸»å±å¹•å³å¯æŸ¥åˆ°å¯¹åº”çš„è‚¡ä»·ä¿¡æ¯ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ˜¯ç³»ç»Ÿæä¾›çš„ç”µæ± Widgetå±•ç¤ºåœ¨ä¸»å±å¹•ä¸Šçš„ç¤ºä¾‹ï¼š ä¸€ä¸ªAppä¹Ÿå¯ä»¥æä¾›å¤šä¸ªWidgetç»„ä»¶ï¼Œç”¨æˆ·å¯ä»¥é€‰æ‹©å°†å…¶æœ€å…³å¿ƒçš„æ”¾ç½®åœ¨æœ€é‡è¦çš„ä½ç½®ä¸Šï¼Œä»¥ä¾¿æœ€æ–¹ä¾¿çš„è·å–ä¿¡æ¯ã€‚å¯¹äºåŒä¸€ç§Widgetç»„ä»¶ï¼Œå¼€å‘è€…ä¹Ÿå¯ä»¥æä¾›ä¸åŒçš„å°ºå¯¸æˆ–ä¸åŒçš„å¸ƒå±€ï¼Œè¿™å¯ä»¥æä¾›ç»™ç”¨æˆ·æ›´å¤šçš„é€‰æ‹©ä»¥æ»¡è¶³ä¸åŒç”¨æˆ·çš„åå¥½ã€‚ ä¸ºåº”ç”¨ç¨‹åºæ·»åŠ ä¸€ä¸ªWidgetç»„ä»¶å¹¶ä¸å¤æ‚ï¼Œä½†æ˜¯æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œå°ç»„ä»¶çš„UIéƒ¨åˆ†åªèƒ½å¤Ÿä½¿ç”¨SwiftUIæ¥å¼€å‘ï¼Œå› æ­¤å¦‚æœä½ è¦å¼€å‘Widgetç»„ä»¶ï¼Œå¿…é¡»æœ‰ä¸€äº›Swiftçš„åŸºç¡€å¹¶å¯¹SwiftUIæœ‰ä¸€å®šçš„äº†è§£ã€‚å¯¹äºSwiftä¸SwiftUIçš„ç›¸å…³å†…å®¹ï¼Œæœ¬ç¯‡åšå®¢å°±ä¸å†åšè¿‡å¤šèµ˜è¿°ã€‚ 2. åˆ›å»ºApp Widgetä¸å…¶ä»–çš„Extensionæ‰©å±•ç±»ä¼¼ï¼ŒApp Widgetæœ¬èº«ä¹Ÿæ˜¯ä¸€ç§æ‰©å±•ï¼Œå› æ­¤å…¶åªèƒ½ä¾èµ–ä¸€ä¸ªå®¿ä¸»Appè€Œå­˜åœ¨ï¼Œé¦–å…ˆå‘å·²æœ‰çš„Appä¸­æ·»åŠ App Widgetéå¸¸ç®€å•ï¼Œä¸ºé¡¹ç›®åˆ›å»ºä¸€ä¸ªæ–°çš„Targetï¼Œé€‰æ‹©å…¶ä¸­çš„Widget Extensionæ¨¡æ¿è¿›è¡Œåˆ›å»ºï¼Œå¦‚ä¸‹å›¾ï¼š åˆ›å»ºå®Œæˆåï¼ŒXcodeä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬åˆ›å»ºå’Œé…ç½®çš„æ–‡ä»¶çš„å·¥ä½œéƒ½å®Œæˆï¼Œé»˜è®¤çš„æ¨¡æ¿ä¸ºæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæ˜¾ç¤ºå½“å‰æ—¶é—´çš„ç»„ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨çœŸæœºä¸Šè¿è¡Œå®ƒ(Bateç‰ˆæœ¬çš„Xcodeæ¨¡æ‹Ÿå™¨è¿è¡Œä¼šæœ‰äº›å¼‚å¸¸)ï¼Œä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†è¿™ä¸ªæ˜¾ç¤ºæ—¶é—´çš„å°ç»„ä»¶æ”¾ç½®åœ¨ä¸»å±å¹•çš„ä»»æ„ä½ç½®ï¼Œå¹¶ä¸”ï¼Œé»˜è®¤æä¾›äº†3ç§å°ºå¯¸ä¾›ç”¨æˆ·é€‰æ‹©ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š Xcodeä¸ºæˆ‘ä»¬åˆ›å»ºçš„è¿™ä¸ªæ¨¡æ¿è™½ç„¶ç®€å•ï¼Œä½†æ˜¯äº”è„ä¿±å…¨ã€‚WidgetåŠ è½½çš„å…¥å£æ˜¯@mainæ ‡è®°çš„ç»“æ„ä½“ï¼Œä»£ç å¦‚ä¸‹ï¼š 123456789101112@mainstruct WidgetExt: Widget &#123; private let kind: String = \"WidgetExt\" public var body: some WidgetConfiguration &#123; StaticConfiguration(kind: kind, provider: Provider(), placeholder: PlaceholderView()) &#123; entry in WidgetExtEntryView(entry: entry) &#125; .configurationDisplayName(\"My Widget\") .description(\"This is an example widget.\") &#125;&#125; WidgetExtæ˜¯æˆ‘ä»¬ä¸ºç»„ä»¶targeté¡¹ç›®è®¾ç½®çš„åå­—ï¼Œæ¨¡æ¿è‡ªåŠ¨ä½¿ç”¨è¿™ä¸ªåå­—å¸®æˆ‘ä»¬ç”Ÿæˆäº†ä¸€ä¸ªå®ç°äº†Widgetåè®®çš„ç»“æ„ä½“ã€‚ç»“æ„ä½“ä¸­å®ç°äº†ä¸¤ä¸ªå±æ€§ï¼Œå…¶å®Widgetåè®®æä¾›çš„æ ¸å¿ƒåªè¯»å±æ€§åªæœ‰ä¸€ä¸ªbodyï¼Œå°†ä¸Šé¢çš„ä»£ç æ”¹å†™å¦‚ä¸‹ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼š 12345678910@mainstruct WidgetExt: Widget &#123; public var body: some WidgetConfiguration &#123; StaticConfiguration(kind: \"WidgetExt\", provider: Provider(), placeholder: PlaceholderView()) &#123; entry in WidgetExtEntryView(entry: entry) &#125; .configurationDisplayName(\"My Widget\") .description(\"This is an example widget.\") &#125;&#125; ä¸Šé¢ä»£ç çš„æ ¸å¿ƒåœ¨äºbodyåªè¯»å±æ€§çš„å®ç°ï¼Œå…¶éœ€è¦è¿”å›ä¸€ä¸ªå®ç°äº†WidgetConfigurationåè®®çš„ç¤ºä¾‹ã€‚è¿™ä¸ªåè®®æè¿°äº†ç»„ä»¶çš„é…ç½®ä¿¡æ¯ï¼ŒStaticConfigurationæ˜¯ç³»ç»Ÿæä¾›çš„ç»„ä»¶é…ç½®ç»“æ„ä½“ï¼Œå…¶ç”¨æ¥å¯¹é™æ€ç±»å‹çš„ç»„ä»¶æä¾›é…ç½®ã€‚StaticConfigurationå®Œæ•´çš„æ„é€ æ–¹æ³•å¦‚ä¸‹ï¼š 123456public init&lt;Provider, PlaceholderContent&gt;(kind: String, provider: Provider, placeholder: PlaceholderContent, content: @escaping (Provider.Entry) -&gt; Content) where Provider : TimelineProvider, PlaceholderContent : View å¯ä»¥çœ‹åˆ°ï¼Œä¸Šé¢æ„é€ æ–¹æ³•ä¸­çš„Providerå’ŒPlaceholderContentå®é™…ä¸Šæ˜¯ä¸¤ä¸ªæ³›å‹ï¼Œæˆ‘ä»¬åé¢å†ä»‹ç»ã€‚ç›®å‰ï¼Œæˆ‘ä»¬å…ˆå…³æ³¨ä¸‹æ„é€ æ–¹æ³•éœ€è¦ä¼ çš„å‡ ä¸ªå‚æ•°ã€‚ kindï¼šè¿™ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå­—ç¬¦å·ï¼Œæˆ‘ä»¬å¯ä»¥ä»»æ„æä¾›ï¼Œç”¨æ¥æ ‡è¯†è¿™ä¸ªWidgetç»„ä»¶ã€‚ providerï¼šç®€å•ç†è§£ï¼Œè¿™æ˜¯ä¸€ä¸ªæ•°æ®æä¾›å¯¹è±¡ï¼Œç”¨æ¥ä¸ºå°ç»„ä»¶æä¾›æ¸²æŸ“æ•°æ®ï¼Œå…¶å¿…é¡»å®ç°TimelineProvideråè®®ï¼Œå³æ˜¯åŸºäºæ—¶é—´çº¿æ¥é©±åŠ¨å°ç»„ä»¶çš„æ¸²æŸ“ã€‚ placeholderï¼šæä¾›ä¸€ä¸ªå ä½çš„è§†å›¾ï¼Œå½“å°ç»„ä»¶æ²¡æœ‰æ•°æ®æˆ–è€…åœ¨é”å±çŠ¶æ€æ—¶ï¼Œä¼šæ˜¾ç¤ºè¿™ä¸ªå ä½è§†å›¾ã€‚ contentï¼šä¸ºå°ç»„ä»¶æä¾›å†…å®¹ï¼Œæ˜¯ä¸€ä¸ªé—­åŒ…ï¼Œå…¶ä¸­ä¼šæŠŠProviderçš„entryå±æ€§ä¼ å…¥ï¼Œå› æ­¤å°ç»„ä»¶çš„è§†å›¾æ¸²æŸ“å®é™…æ˜¯ç”±Provideré©±åŠ¨çš„ã€‚ æ˜ç™½äº†ä¸Šé¢å‡ ä¸ªå‚æ•°çš„æ„ä¹‰ï¼Œå¼€å‘å°ç»„ä»¶å°±éå¸¸è½»æ¾äº†ã€‚é¦–å…ˆï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªåˆé€‚çš„Provideræ¥ä¸ºå°ç»„ä»¶æä¾›æ•°æ®æ”¯æŒï¼Œä»¥æ¨¡æ¿ä¸­çš„ä»£ç ä¸ºä¾‹ï¼Œå¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627struct Provider: TimelineProvider &#123; public typealias Entry = SimpleEntry public func snapshot(with context: Context, completion: @escaping (SimpleEntry) -&gt; ()) &#123; let entry = SimpleEntry(date: Date()) completion(entry) &#125; public func timeline(with context: Context, completion: @escaping (Timeline&lt;Entry&gt;) -&gt; ()) &#123; var entries: [SimpleEntry] = [] // Generate a timeline consisting of five entries an hour apart, starting from the current date. let currentDate = Date() for hourOffset in 0 ..&lt; 5 &#123; let entryDate = Calendar.current.date(byAdding: .hour, value: hourOffset, to: currentDate)! let entry = SimpleEntry(date: entryDate) entries.append(entry) &#125; let timeline = Timeline(entries: entries, policy: .atEnd) completion(timeline) &#125;&#125;struct SimpleEntry: TimelineEntry &#123; public let date: Date&#125; å¦‚ä¸Šä»£ç æ‰€ç¤ºï¼ŒProviderç»“æ„ä½“å®ç°äº†TimelineProvideråè®®ï¼Œè¿™ä¸ªåè®®ä¸­åªå®šä¹‰äº†ä¸¤ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯ä¸Šé¢å®ç°çš„snapshotæ–¹æ³•å’Œtimelineæ–¹æ³•ã€‚ å…¶ä¸­snapshopæ–¹æ³•åœ¨å°ç»„ä»¶å¯åŠ¨æ—¶ä¼šè¢«è°ƒç”¨ä¸€æ¬¡ï¼Œç”¨æ¥ä¸ºå°ç»„ä»¶æä¾›é¦–å±æ¸²æŸ“æ‰€éœ€è¦çš„æ•°æ®ï¼Œå…¶é€šå¸¸ç”¨æ¥æä¾›ä¸€äº›åˆå§‹åŒ–çš„æ•°æ®ã€‚è°ƒç”¨å®Œsnapshotæ–¹æ³•åï¼Œä¼šè°ƒç”¨timelineæ–¹æ³•æ¥å®šä¹‰è¦æ›´æ–°ç»„ä»¶çš„æ—¶é—´çº¿ï¼Œè¿™ä¸ªæ–¹æ³•çš„å›è°ƒä¸­éœ€è¦ä¼ å…¥ä¸€ç»„Timelineå¯¹è±¡ï¼Œå¦‚ä¸Šä»£ç æ‰€ç¤ºï¼Œå…¶å®šä¹‰å½“å‰æ—¶åˆ»å¼€å§‹ï¼Œæ¯éš”ä¸€ä¸ªå°æ—¶è¿›è¡Œä¸€æ¬¡åˆ·æ–°ï¼Œå°†å½“å‰ç»„ä»¶æ˜¾ç¤ºçš„æ—¶é—´åˆ·æ–°æˆæœ€æ–°çš„æ—¶åˆ»ï¼Œå½“æœ€åä¸€æ¬¡åˆ·æ–°ä»»åŠ¡ç»“æŸåï¼Œä¼šå†æ¬¡è°ƒç”¨timelineå‡½æ•°é‡æ–°è®¾ç½®ä¸€ç»„æ›´æ–°çš„æ—¶é—´çº¿ã€‚å…³äºæ—¶é—´çº¿çš„è¯¦ç»†ä»‹ç»ï¼Œåé¢ä¼šæåŠã€‚ æœ‰äº†Provideræ¥å¯¹ç»„ä»¶çš„æ›´æ–°æä¾›é©±åŠ¨åï¼Œå°±æ˜¯å°ç»„ä»¶é¡µé¢çš„æ¸²æŸ“äº†ï¼Œåœ¨StaticConfigurationæ„é€ æ–¹æ³•çš„é—­åŒ…ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è¿”å›ä¸€ä¸ªViewä½œä¸ºå°ç»„ä»¶çš„å†…å®¹ï¼Œæ¨¡æ¿æä¾›çš„ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567struct WidgetExtEntryView : View &#123; var entry: Provider.Entry var body: some View &#123; Text(entry.date, style: .time) &#125;&#125; åœ¨å‘ä¸»å±å¹•æ·»åŠ å°ç»„ä»¶æ—¶ï¼Œç”¨æˆ·å¯ä»¥é€‰æ‹©ä¸åŒå°ºå¯¸çš„å°ç»„ä»¶è¿›è¡Œæ·»åŠ ï¼Œåœ¨å°ç»„ä»¶çš„æ¸²æŸ“å¸ƒå±€æ—¶ï¼Œå¼€å‘è€…ä¹Ÿå¯ä»¥æ ¹æ®ä¸åŒçš„ç¯å¢ƒå°ºå¯¸é…ç½®ä¸åŒçš„æ¸²æŸ“ç­–ç•¥ï¼Œä¾‹å¦‚ä¸‹é¢ä»£ç ï¼š 123456789101112131415struct WidgetExtEntryView : View &#123; @Environment(\\.widgetFamily) var family: WidgetFamily var entry: Provider.Entry @ViewBuilder var body: some View &#123; switch family &#123; case .systemSmall: Text(entry.date, style: .time) case .systemMedium: Text(entry.date, style: .date) case .systemLarge: Text(entry.date, style: .relative) default: Text(entry.date, style: .time) &#125; &#125;&#125; å…¶ä¸­é€šè¿‡Enviromentç”¨æ¥åˆ¤æ–­å½“å‰ç»„ä»¶çš„ç¯å¢ƒæƒ…å†µï¼Œå³ç»„ä»¶çš„å°ºå¯¸ä¿¡æ¯ï¼Œä¸Šé¢ä»£ç æ ¹æ®ä¸åŒçš„å°ºå¯¸æ¸²æŸ“äº†ä¸åŒæ ¼å¼çš„æ—¶é—´ã€‚ ç°åœ¨ï¼Œæˆ‘ä»¬å¯¹å°ç»„ä»¶çš„åˆ›å»ºæµç¨‹å·²ç»æœ‰äº†åˆæ­¥çš„äº†è§£ï¼Œéœ€è¦æ³¨æ„ï¼Œå°ç»„ä»¶åªèƒ½ç”¨æ¥å±•ç¤ºé™æ€çš„ä¿¡æ¯ï¼Œå¹¶èƒ½æ”¯æŒå¯äº¤äº’çš„ç»„ä»¶ï¼Œä¾‹å¦‚é€‰æ‹©å™¨æˆ–æ»šåŠ¨è§†å›¾ï¼Œå½“ç”¨æˆ·ç‚¹å‡»å°ç»„ä»¶æ—¶ï¼Œä¼šå”¤èµ·Appæœ¬èº«ï¼Œå¹¶ä¼ é€’ä¸€ä¸ªç‰¹æ®Šçš„URLç”¨æ¥ç»™å®¿ä¸»Appåšé€»è¾‘å¤„ç†ã€‚ä¸€ä¸ªAppåªèƒ½åˆ›å»ºä¸€ä¸ªApp Widgetï¼Œä½†è¿™å¹¶ä¸æ˜¯è¯´æˆ‘ä»¬åªèƒ½æœ‰ä¸€ç§åŠŸèƒ½ç±»å‹çš„ç»„ä»¶ï¼Œå¯ä»¥é€šè¿‡å®šä¹‰ç»„ä»¶åŒ…ï¼Œæ¥æä¾›å¤šä¸ªå°ç»„ä»¶ä¾›ç”¨æˆ·è¿›è¡Œä½¿ç”¨ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728struct WidgetExt: Widget &#123; public var body: some WidgetConfiguration &#123; StaticConfiguration(kind: \"WidgetExt\", provider: Provider(), placeholder: PlaceholderView()) &#123; entry in WidgetExtEntryView(entry: entry) &#125; .configurationDisplayName(\"My Widget\") .description(\"This is an example widget.\") &#125;&#125;struct WidgetExt2: Widget &#123; public var body: some WidgetConfiguration &#123; StaticConfiguration(kind: \"WidgetExt2\", provider: Provider(), placeholder: PlaceholderView()) &#123; entry in PlaceholderView() &#125; .configurationDisplayName(\"My Widget\") .description(\"This is an example widget.\") &#125;&#125;@mainstruct WidgetsExt: WidgetBundle &#123; @WidgetBundleBuilder var body: some Widget &#123; WidgetExt() WidgetExt2() &#125;&#125; éœ€è¦æ³¨æ„ï¼Œä¸åŒçš„å°ç»„ä»¶å®šä¹‰çš„kindå‚æ•°è¦æœ‰å·®å¼‚ã€‚ 3. App Widget çš„æ›´æ–°æœºåˆ¶é€šè¿‡å‰é¢çš„Widgetåˆä½“éªŒï¼Œæˆ‘ä»¬çŸ¥é“App Widgetå¯ä»¥é€šè¿‡å®šä¹‰æ—¶é—´çº¿æ¥å®ç°è§†å›¾çš„åŠ¨æ€æ›´æ–°ã€‚App Widgetä½¿ç”¨SwiftUIæ¥è¿›è¡Œè§†å›¾çš„æ¸²æŸ“ã€‚Widgetæœ‰å•ç‹¬çš„ç³»ç»Ÿè¿›ç¨‹è¿›è¡Œç»´æŠ¤ï¼Œå› æ­¤å³ä¾¿å°ç»„ä»¶å·²ç»æ˜¾ç¤ºåœ¨å±å¹•ä¸Šï¼Œå…¶ä¹Ÿå¹¶ä¸æ˜¯ä¸€ç›´éƒ½æ˜¯æ´»è·ƒçš„ï¼Œå¼€å‘è€…å¯ä»¥å®šä¹‰ä¸€äº›æ—¶æœºæ¥å¯¹å°ç»„ä»¶çš„å†…å®¹è¿›è¡Œæ›´æ–°ã€‚ é¦–å…ˆï¼Œåœ¨å¼€å‘å°ç»„ä»¶æ—¶ï¼Œæˆ‘ä»¬è¦æ¸…æ¥šæ‰€éœ€è¦çš„æ›´æ–°æ—¶æœºã€‚ä¾‹å¦‚å¯¹äºå¤©æ°”ç±»å°ç»„ä»¶ï¼Œå¯èƒ½éœ€è¦æ¯3å°æ—¶å¯¹ç»„ä»¶è¿›è¡Œä¸€æ¬¡æ›´æ–°ã€‚å½“æˆ‘ä»¬å®šä¹‰å°ç»„ä»¶Widgetæ—¶ï¼Œéœ€è¦æŒ‡å®šä¸€ä¸ªTimelineProvideræ¥å¯¹å…¶æ›´æ–°è¿›è¡Œé©±åŠ¨ï¼ŒTimelineProviderå¯ä»¥ç†è§£ä¸ºå®šä¹‰äº†ä¸€æ¡æ—¶é—´çº¿ï¼Œé…åˆå®˜æ–¹æ–‡æ¡£ä¸­çš„ä¸€å¼ å›¾ç‰‡æ¥ç†è§£æ—¶é—´çº¿çš„ä½œç”¨ä¼šæ¯”è¾ƒå®¹æ˜“ï¼š å¦‚ä¸Šå›¾ä¸­æ‰€ç¤ºï¼Œå…¶å®šä¹‰æ—¶é—´çº¿ä¸ºä¹‹åæ¯å°æ—¶è¿›è¡Œåˆ·æ–°ï¼Œç”±äºå°†æ—¶é—´çº¿çš„Refreshæœºåˆ¶è®¾ç½®ä¸ºäº†atEndï¼Œ3å°æ—¶åç³»ç»Ÿä¼šé‡æ–°è¯·æ±‚æ–°çš„Timelineç­–ç•¥ï¼Œä¸Šå›¾ä¸­å°†ç¬¬2æ¬¡è¯·æ±‚Timelineç­–ç•¥æ˜¯è®¾ç½®ä¸ºäº†ç«‹å³åˆ·æ–°ä¸€æ¬¡ï¼Œä¹‹åç”±äºæ—¶é—´çº¿çš„Refreshæœºåˆ¶è®¾ç½®ä¸ºäº†neverï¼Œä¹‹åä¸ä¼šå†å°è¯•è¯·æ±‚æ—¶é—´çº¿è¿›è¡Œç»„ä»¶æ›´æ–°ã€‚æ—¶é—´è½´çš„Refreshé€‰é¡¹å®é™…ä¸Šæ˜¯è®¾ç½®äº†å½“å·²ç»å®šä¹‰çš„æ—¶é—´è½´æ‰§è¡Œå®Œæˆåï¼Œç³»ç»Ÿå°†é‡‡ç”¨æ€æ ·çš„ç­–ç•¥(æ˜¯é‡æ–°è¯·æ±‚è¿˜æ˜¯ä»æ­¤ç»“æŸæ›´æ–°)ã€‚ä¾‹å¦‚ä¸‹å›¾ï¼š ä¸Šå›¾æè¿°äº†è¿™æ ·ä¸€ç§é€»è¾‘ï¼Œé¦–å…ˆè¯·æ±‚çš„æ—¶é—´çº¿å®šä¹‰åœ¨æœªæ¥3ä¸ªå°æ—¶ï¼Œæ¯å°æ—¶æ›´æ–°ä¸€æ¬¡ï¼Œå¹¶åœ¨2å°æ—¶å€™é‡æ–°è¯·æ±‚æ—¶é—´çº¿ï¼Œ2å°æ—¶åæ–°è¯·æ±‚çš„æ—¶é—´çº¿å®šä¹‰2å°æ—¶ååˆ·æ–°Widgetå¹¶æŒ‡å®šäº†2å°æ—¶å€™é‡æ–°è¯·æ±‚æ—¶é—´çº¿ï¼Œå†2å°æ—¶ä¹‹åï¼Œé‡æ–°è¯·æ±‚çš„æ—¶é—´çº¿å®šä¹‰ç«‹å³åˆ·æ–°ç»„ä»¶ï¼Œå¹¶æŒ‡å®šä¹‹åä¸å†è¯·æ±‚æ–°çš„æ—¶é—´çº¿ï¼Œç»„ä»¶åˆ·æ–°ä»æ­¤ç»“æŸã€‚ é™¤äº†é€šè¿‡è®¾ç½®Timelineçš„Refreshæœºåˆ¶è®©Widgetè¯·æ±‚æ—¶é—´çº¿æ¥è¿›è¡Œåˆ·æ–°æœºåˆ¶çš„å®šä¹‰å¤–ï¼Œå®¿ä¸»Appä¹Ÿå¯ä»¥å¯¹Widgetçš„åˆ·æ–°æœºåˆ¶è¿›è¡Œå®šä¹‰ã€‚å®¿ä¸»Appå¯ä»¥ä½¿ç”¨WidgetCenteræ¥è§¦å‘æŒ‡å®šWidgetçš„åˆ·æ–°æœºåˆ¶æ›´æ–°ï¼Œå¦‚ä¸‹ï¼š 1WidgetCenter.shared.reloadTimelines(ofKind: \"æŒ‡å®šçš„widgetçš„kind\") åŒæ ·ï¼ŒWidgetCenterç›®å‰ä¹Ÿåªèƒ½ä½¿ç”¨Swiftæ¥è°ƒç”¨ã€‚ é¡ºä¾¿æä¸€ä¸‹ï¼Œå…³äºWidgetCenterï¼Œå…¶æœ¬èº«éå¸¸ç®€å•ï¼Œæä¾›çš„æ¥å£éå¸¸ç²¾ç®€ï¼Œå¦‚ä¸‹ï¼š 123456789101112131415// è·å–å•ä¾‹å¯¹è±¡static let shared: WidgetCenter // è·å–å½“å‰Widgetsçš„ç”¨æˆ·è‡ªå®šä¹‰é…ç½®/*struct WidgetInfo &#123; public let configuration: INIntent? public let family: WidgetFamily public let kind: String&#125;*/func getCurrentConfigurations((Result&lt;[WidgetInfo], Error&gt;) -&gt; ())// é‡æ–°åˆ·æ–°æŸä¸ªWidgetçš„æ—¶é—´çº¿func reloadTimelines(ofKind: String)// åˆ·æ–°æ‰€æœ‰Widgetçš„æ—¶é—´çº¿func reloadAllTimelines() 4. å¯é…ç½®çš„Widgetç»„ä»¶å‰é¢æˆ‘ä»¬æ‰€ä»‹ç»çš„æ„å»ºå°ç»„ä»¶çš„æ–¹å¼ï¼Œè™½ç„¶å¯ä»¥é€šè¿‡æ—¶é—´çº¿åšéƒ¨åˆ†æ›´æ–°é€»è¾‘ï¼Œä½†å¯¹ç”¨æˆ·æ¥è¯´ï¼Œä¾ç„¶æ˜¯é™æ€çš„ã€‚ç”¨æˆ·ä¸èƒ½å¤Ÿæ ¹æ®è‡ªå·±çš„åå¥½å¯¹ç»„ä»¶è¿›è¡Œé…ç½®ï¼Œè¿˜ä»¥å¤©æ°”ç±»ç»„ä»¶ä¸ºä¾‹ï¼Œæœ‰äº›ç”¨æˆ·å¯èƒ½å…³å¿ƒçš„æ˜¯ç©ºæ°”è´¨é‡ï¼Œæ¹¿åº¦ç­‰ä¿¡æ¯ï¼Œæœ‰äº›ç”¨æˆ·å¯èƒ½åªå…³å¿ƒé˜´å¤©é›¨å¤©çš„ä¿¡æ¯ï¼Œç”±äºå°ç»„ä»¶çš„æ˜¾ç¤ºç©ºé—´æœ‰é™ï¼Œæœ‰æ—¶å€™ä½ æ— æ³•å°†æ‰€æœ‰çš„ä¿¡æ¯éƒ½å±•ç¤ºåœ¨ç»„ä»¶å†…ï¼Œå› æ­¤è®©ç”¨æˆ·é€‰æ‹©ä»–æ„Ÿå…´è¶£çš„ä¿¡æ¯è¿›è¡Œå°ç»„ä»¶çš„é…ç½®éå¸¸é‡è¦ã€‚ é¦–å…ˆï¼Œå¦‚æœè¦è®©æˆ‘ä»¬å¼€å‘çš„Widgetå¯ä»¥æ”¯æŒç”¨æˆ·é…ç½®ï¼Œéœ€è¦åœ¨Widgetçš„targetå·¥ç¨‹ä¸­æ·»åŠ ä¸€ä¸ªé…ç½®å±æ€§è¡¨æ–‡ä»¶ï¼Œä½¿ç”¨Xcodeæ–°å»ºä¸€ä¸ªSiriKit Intent Definition Fileçš„æ–‡ä»¶ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¹‹åï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„Intenté…ç½®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ ä¸€ç³»åˆ—çš„ç”¨æˆ·é…ç½®é¡¹ï¼Œç³»ç»Ÿæä¾›äº†å„ç§ç±»å‹çš„é…ç½®é¡¹ï¼Œå¦‚è®©ç”¨æˆ·ä¼ å…¥å­—ç¬¦ä¸²ä¿¡æ¯çš„é…ç½®é¡¹ï¼Œå¼€å…³é…ç½®é¡¹ï¼Œæ—¥æœŸé…ç½®é¡¹ç­‰ç­‰ï¼Œå¦‚ä¸‹å›¾ï¼š ä¹‹åï¼Œé‡æ–°è¿è¡ŒWidgetï¼Œæˆ‘ä»¬çš„å°ç»„ä»¶å°±ä»¥æ”¯æŒç”¨æˆ·é…ç½®åŠŸèƒ½ï¼Œç”¨æˆ·å¯ä»¥ç¼–è¾‘å°ç»„ä»¶è¿›è¡Œè®¾ç½®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å½“ç”¨æˆ·ä¿®æ”¹äº†é…ç½®é¡¹åï¼Œç»„ä»¶ä¼šé‡æ–°è¯·æ±‚Timelineæ—¶é—´çº¿ï¼Œåœ¨timelineå›è°ƒæ–¹æ³•ä¸­ï¼Œä¼šä¼ å…¥configurationå¯¹è±¡ï¼Œç”¨æ¥å­˜å‚¨ç”¨æˆ·çš„é…ç½®ä¿¡æ¯ï¼Œå¦‚ä¸‹ï¼š 12345678910111213public func timeline(for configuration: ConfigurationIntent, with context: Context, completion: @escaping (Timeline&lt;Entry&gt;) -&gt; ()) &#123; // configurationä¸­å­˜æ”¾ç”¨æˆ·é…ç½®ä¿¡æ¯ var entries: [SimpleEntry] = [] let currentDate = Date() for hourOffset in 0 ..&lt; 5 &#123; let entryDate = Calendar.current.date(byAdding: .hour, value: hourOffset, to: currentDate)! let entry = SimpleEntry(date: entryDate, configuration: configuration) entries.append(entry) &#125; let timeline = Timeline(entries: entries, policy: .atEnd) completion(timeline)&#125; ä¸Šé¢æ¼”ç¤ºçš„è¿™ç§é…ç½®æ–¹å¼ï¼Œé€‚ç”¨äºå½“é…ç½®é¡¹å›ºå®šçš„åœºæ™¯ï¼Œæ›´å¤šæ—¶å€™ï¼Œå¯èƒ½è¿é…ç½®é¡¹éƒ½æ˜¯åŠ¨æ€çš„ï¼Œæ¯”å¦‚æˆ‘ä»¬çš„åº”ç”¨ä¼šæ ¹æ®æœåŠ¡ç«¯çš„çŠ¶æ€æ¥æä¾›ä¸åŒçš„æœåŠ¡ï¼Œè¿™æ—¶å¯æä¾›ç»™ç”¨æˆ·å¼€å¯çš„æœåŠ¡é¡¹ç›®å°±æ˜¯åŠ¨æ€çš„ã€‚Widgetçš„é…ç½®é¡¹ä¹Ÿæ”¯æŒåŠ¨æ€è¿›è¡Œé…ç½®ï¼Œè¿™éœ€è¦ä½¿ç”¨åˆ°Intents Extensionçš„ç›¸å…³åŠŸèƒ½ï¼Œæœ¬ç¯‡åšå®¢å°±ä¸å†è¿‡å¤šä»‹ç»ã€‚ ç»“è¯­ï¼šApp Widgetsæœ¬èº«å¹¶æ²¡æœ‰ä»€ä¹ˆæ–°æ„ï¼Œåªæ˜¯æ‰©å¤§äº†iOSç³»ç»Ÿä¸­ç»„ä»¶çš„èƒ½åŠ›ï¼Œè¿™ä»ä¸€å®šç¨‹åº¦ä¸Šå¯ä»¥å¸¦ç»™ç”¨æˆ·æ›´å¥½çš„æœåŠ¡å’Œæ›´å¤šå…ƒçš„äº¤äº’ä½“éªŒã€‚è„±ç¦»App Widgetsè¿™ä¸ªåŠŸèƒ½çš„äº§å“æ„ä¹‰æœ¬èº«ï¼ŒiOS 14æ¨å‡ºè¿™ä¸ªåŠŸèƒ½è¿˜æœ‰ä¸€ç‚¹éå¸¸ä»¤äººæƒŠè®¶ï¼Œå°±æ˜¯App Widgetsåªèƒ½ä½¿ç”¨SwiftUIè¿›è¡Œå¼€å‘ï¼Œè¿™æˆ–è®¸ä»å¦ä¸€ä¸ªè§’åº¦æš—ç¤ºäº†Swiftåœ¨æœªæ¥çš„æ¨å¹¿åŠ›åº¦ï¼Œä¸iOSå¼€å‘æ‰€ä½¿ç”¨è¯­è¨€çš„æœ€ç»ˆæ–¹å‘ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š805263726","categories":[{"name":"iOS14ä¸“é¢˜","slug":"iOS14ä¸“é¢˜","permalink":"http://huishao.cc/categories/iOS14ä¸“é¢˜/"}],"tags":[],"keywords":[{"name":"iOS14ä¸“é¢˜","slug":"iOS14ä¸“é¢˜","permalink":"http://huishao.cc/categories/iOS14ä¸“é¢˜/"}]},{"title":"iOS14æ–°ç‰¹æ€§æ¢ç´¢ä¹‹ä¸€ï¼šApp Clipsè½»åº”ç”¨","slug":"401iOS14æ–°ç‰¹æ€§æ¢ç´¢ä¹‹ä¸€ï¼šApp Clipsè½»åº”ç”¨","date":"2020-07-01T16:00:00.000Z","updated":"2021-07-15T11:26:03.910Z","comments":true,"path":"2020/07/02/401iOS14æ–°ç‰¹æ€§æ¢ç´¢ä¹‹ä¸€ï¼šApp Clipsè½»åº”ç”¨/","link":"","permalink":"http://huishao.cc/2020/07/02/401iOS14æ–°ç‰¹æ€§æ¢ç´¢ä¹‹ä¸€ï¼šApp Clipsè½»åº”ç”¨/","excerpt":"","text":"iOS14æ–°ç‰¹æ€§æ¢ç´¢ä¹‹ä¸€ï¼šApp Clipsè½»åº”ç”¨ App Clipsæ˜¯è‹¹æœWWDC 2020æ‰€å‘å¸ƒçš„iOS 14æ–°ç‰¹æ€§ä¸­æœ€å…·ç„¦ç‚¹çš„ä¸€é¡¹åŠŸèƒ½ã€‚ä¸€ç»æ›å…‰ï¼Œå°±å¼•å‘äº†äº’è”ç½‘ä¸Šé’ˆå¯¹å…¶ç‰¹æ€§çš„å„ç§è®¨è®ºã€‚æœ‰äººè¯´App Clipsæ˜¯è‹¹æœæ¨¡ä»¿å¾®ä¿¡æ¨å‡ºçš„iOSå¹³å°çš„å°ç¨‹åºï¼›æœ‰äººè¯´å®ƒæ˜¯è½»é‡çº§çš„åº”ç”¨ç¨‹åºï¼Œä¸ºç”¨æˆ·æä¾›äº†ç®€æ´ç‰ˆçš„Appä½“éªŒï¼›åŒæ ·ï¼Œå¯¹AppClipsçš„è¯„ä»·ä¹Ÿæ˜¯ä¼—è¯´çº·çº­ï¼Œæœ‰äººçœ‹å¥½ä¹Ÿæœ‰äººçœ‹è·Œï¼Œæœ‰äººè§‰å¾—æ˜¯æ–°çš„å¹³å°ä¹Ÿæœ‰äººè§‰å¾—éå¸¸é¸¡è‚‹ã€‚ æ— è®ºå¦‚ä½•ï¼ŒAppClipséƒ½æ˜¯Appleç»™iPhoneç”¨æˆ·æä¾›äº†ä¸€ç§æ–°çš„äº¤äº’æ–¹å¼å’Œæ–°çš„åº”ç”¨ä½¿ç”¨ä½“éªŒï¼Œä½œä¸ºå¼€å‘è€…ï¼Œæˆ‘ä»¬æ›´éœ€è¦åšçš„æ˜¯äº†è§£è¿™æ ·ä¸€ç§æ–°çš„æŠ€æœ¯çš„åº”ç”¨ï¼Œå¹¶å°†å…¶èµ‹èƒ½åˆ°æˆ‘ä»¬çš„äº§å“ä¸­ï¼Œä¸ºç”¨æˆ·æä¾›æ›´å¥½çš„ä½¿ç”¨ä½“éªŒï¼Œä¸ºäº§å“å¸¦æ¥æ›´å¤§çš„ä»·å€¼ã€‚ æœ¬ç¯‡åšå®¢ï¼Œä¹Ÿæ˜¯åŸºäºè¿™æ ·çš„æƒ³æ³•ï¼Œå°†å…¨é¢çš„ä»‹ç»App Clipsçš„åº”ç”¨ä¸å¼€å‘ç»†èŠ‚ï¼Œå¸®åŠ©å¤§å®¶æœ€å¿«çš„äº†è§£ä¸ä¸Šæ‰‹è¿™æ ·ä¸€ç§æŠ€æœ¯ã€‚æˆ‘åœ¨ç¼–å†™æœ¬ç¯‡åšå®¢æ—¶ï¼Œä½¿ç”¨çš„ä¾ç„¶æ˜¯iOS14çš„bateç‰ˆæœ¬ï¼Œå¼€å‘å·¥å…·Xcodeçš„ç‰ˆæœ¬ä¹Ÿæ˜¯12.0Bateç‰ˆæœ¬ï¼Œå› æ­¤ï¼Œä¸èƒ½ä¿è¯åç»­Appleä¸ä¼šå¯¹App Clipsçš„æŸäº›ç‰¹æ€§è¿›è¡Œä¼˜åŒ–ä¿®æ”¹ã€‚å¦‚æœä½ åœ¨ä¹‹åå¾ˆä¹…çš„æŸä¸ªæ—¶é—´é˜…è¯»åˆ°æœ¬ç¯‡åšå®¢ï¼Œè¯·æœ‰é€‰æ‹©çš„å€Ÿé‰´ä¸å¸æ”¶ã€‚ 1. å…³äºApp Clips App Clipsç”¨ä¸­æ–‡å¦‚ä½•ç¿»è¯‘ï¼Œä¸€ç›´æ²¡æœ‰æ‰¾åˆ°åˆé€‚çš„è¯æ±‡ã€‚å¯ä»¥å«ä»–åº”ç”¨åˆ‡ç‰‡ï¼Œä¹Ÿå¯ä»¥å«å®ƒè½»åº”ç”¨ï¼Œæ›´å¯ä»¥ç§°å®ƒä¸ºå°ç¨‹åºï¼Œè¿™äº›ç§°å‘¼å¥½åƒéƒ½åˆé€‚åˆå¥½åƒéƒ½æ’é‚£ä¹ˆä¸€ç‚¹æ„Ÿè§‰ï¼Œæˆ‘ä»¬ä¸å¦‚å°±å«å®ƒApp Clipså¥½äº†ã€‚ å¼€å‘ä¸€ä¸ªApp Clipsçš„ç›®çš„æ˜¯æä¾›ä½ çš„Appä¸­çš„éƒ¨åˆ†åŠŸèƒ½è®©ç”¨æˆ·å¯ä»¥å¿«é€Ÿä½¿ç”¨ï¼Œå¹¶ä¸”ä¸éœ€è¦ä¸‹è½½å®Œæ•´çš„Appã€‚è¿™å¥è¯æœ‰ä¸¤ä¸ªéå¸¸é‡è¦çš„ç‚¹ï¼Œé¦–å…ˆApp Clipæä¾›å®Œæ•´åº”ç”¨ç¨‹åºçš„ä¸€éƒ¨åˆ†åŠŸèƒ½ï¼Œè¿™è¡¨æ˜ä½ ä¸€å®šè¦æœ‰ä¸€ä¸ªå®Œæ•´åŠŸèƒ½çš„Appï¼Œæ‰å¯ä»¥å¼€å‘ä¸Šçº¿App Clipsï¼Œä¸iOSå¼€å‘ä¸­å…¶ä»–çš„Extensionç±»ä¼¼ï¼ŒApp Clipä¹Ÿå¯ä»¥ç†è§£ä¸ºä¸€ç§Extensionï¼Œå…¶å¿…é¡»ç”±ä¸€ä¸ªå®¿ä¸»Appæ¥æ‰¿è½½ã€‚ ä¸€ä¸ªApp Clipä¹Ÿå¯ä»¥ç†è§£ä¸ºæ˜¯æŸä¸ªAppçš„è½»é‡çº§ç‰ˆæœ¬ï¼Œç”¨æ¥æä¾›ä¸€äº›å®Œæˆç¬æ—¶çš„ä»»åŠ¡çš„åŠŸèƒ½ï¼Œä¾‹å¦‚ä¸ºä¸€æ¯å’–å•¡è¿›è¡Œæ”¯ä»˜ã€ä½¿ç”¨åº—é“ºæä¾›çš„ä¼˜æƒ åˆ¸ã€å…¬å…±çš„ä¿¡æ¯æŸ¥è¯¢ç­‰ç­‰ã€‚ App Clipçš„å¯åŠ¨éœ€è¦ç”±ä¸€ä¸ªè°ƒç”¨æ–¹è°ƒèµ·ï¼Œåœ¨iOSå¼€å‘ä¸­ï¼Œæ›´ä¸“ä¸šç‚¹çš„æœ¯è¯­å«**_invocation_**ï¼Œ**_invocation_**å¯ä»¥æ˜¯å¤šç§å½¢æ€çš„ï¼Œä¾‹å¦‚é€šè¿‡ç‚¹å‡»åŸºäºä½ç½®ä¿¡æ¯çš„æ¨èBannerï¼Œç‚¹å‡»Sariçš„æ¨èæˆ–è€…é€šè¿‡æ‰«æäºŒç»´ç æˆ–NFCç­‰ã€‚App Clipè¢«**_invocation_**è°ƒèµ·åï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡å®ƒå®Œæˆä¸€ä»¶ä¸“æ³¨çš„ä»»åŠ¡ï¼Œå½“ç”¨æˆ·ä¸å†éœ€è¦ä½¿ç”¨å®ƒæ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨çš„è¢«iPhoneç§»é™¤ï¼Œè¿™ä¸ªè¿‡ç¨‹å¯¹ç”¨æˆ·æ¥è¯´æ˜¯æ— æ„ŸçŸ¥çš„ï¼Œå› æ­¤App Clipä¹Ÿä¸ä¼šå ç”¨ç”¨æˆ·çš„æ¡Œé¢ç©ºé—´ã€‚ 2. å¼€å‘App Clipå‰çš„å‡†å¤‡åœ¨å¼€å‘App Clipå‰ï¼Œä½ é¦–å…ˆéœ€è¦æ˜ç¡®ä¸€ä¸ªæ ¸å¿ƒåŸåˆ™ï¼š _ App ClipsæŠ€æœ¯ä¸€å®šè¦ç”¨åœ¨å¸®åŠ©ç”¨æˆ·æ–¹ä¾¿å¯åŠ¨å¹¶å¿«é€Ÿå®Œæˆç‰¹å®šä»»åŠ¡ã€‚_ è¿™ä¸ªåŸåˆ™éå¸¸é‡è¦ï¼Œå®ƒæ˜¯App Clipsè¢«æä¾›ä½¿ç”¨çš„åˆè¡·ï¼Œå¦‚æœä½ æä¾›çš„App Clipéå¸¸åºå¤§ä¸”æ“ä½œå¤æ‚ï¼Œé‚£ä¸ä»…æ— æ³•ä¸§å¤±äº†App Clipå…·æœ‰çš„â€œå¿«é€Ÿâ€ä¼˜åŠ¿ï¼Œè€Œä¸”ä¹Ÿä¼šè®©ç”¨æˆ·äº§ç”Ÿå›°æ‰°ï¼Œé€ æˆç³Ÿç³•çš„ç”¨æˆ·ä½“éªŒã€‚æ¢å¥è¯è¯´ï¼ŒApp Clipsåº”è¯¥æ˜¯â€œéšç”¨éšèµ°â€çš„ï¼Œå³åœ¨ç”¨æˆ·éœ€è¦ä½¿ç”¨æ—¶å¿«é€Ÿå¯åŠ¨ï¼Œå†ç”¨æˆ·ä½¿ç”¨å®Œæˆåä¹Ÿç«‹åˆ»æ¶ˆå¤±ã€‚ åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¼€å‘ä¸€æ¬¾App Clipä¸å¼€å‘æ­£å¸¸çš„iOSåº”ç”¨å¹¶æ²¡æœ‰ç‰¹åˆ«å¤§çš„å·®å¼‚ï¼Œå®ƒä¸å¼€å‘æ™®é€šiOSåº”ç”¨æœ‰ç€ç›¸å…³çš„Frameworkæ”¯æŒï¼Œä¾‹å¦‚ä½¿ç”¨UIKitå¼€å‘åº”ç”¨çš„ç•Œé¢ã€‚åŒæ ·ï¼ŒApp Clipsä¹Ÿå¯ä»¥åƒå®Œæ•´Appä¸€æ ·çš„ä½¿ç”¨è®¾å¤‡çš„ç¡¬ä»¶ï¼ˆå½“ç„¶éœ€è¦ç”³è¯·å¯¹åº”çš„æƒé™ï¼‰ï¼Œä¾‹å¦‚ä½¿ç”¨ç›¸æœºã€è“ç‰™ç­‰ç­‰ã€‚è¿˜æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œä¸€ä¸ªå®Œæ•´çš„Appåªèƒ½æ‹¥æœ‰ä¸€ä¸ªApp Clipï¼Œå¹¶ä¸”App Clipæä¾›çš„åŠŸèƒ½åœ¨ä¸»Appä¸­ä¹Ÿéœ€è¦è¢«å®Œæ•´çš„æ”¯æŒæ‰è¡Œã€‚ å‰é¢è¯´è¿‡ï¼ŒApp Clipçš„å¯åŠ¨éœ€è¦ç”±**_invocation_**æ¥è§¦å‘ï¼Œ**_invocation_**åŒ…æ‹¬å¦‚ä¸‹5ä¸­åœºæ™¯ï¼š é€šè¿‡NFCæ‰«ææ¥å”¤èµ· é€šè¿‡ç‚¹å‡»Sariæä¾›çš„åŸºäºåœ°ç†ä½ç½®çš„æ¨è åœ¨åœ°å›¾Appä¸Šç‚¹å‡»æŒ‡å®šçš„é“¾æ¥ ç‚¹å‡»ç½‘é¡µä¸Šçš„æ™ºèƒ½æ¨èæ¨ªå¹… é€šè¿‡Messages Appåˆ†äº«çš„é“¾æ¥ å”¤èµ·ä¸€ä¸ªApp Clipçš„è¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼ˆæ¥è‡ªAppleå®˜æ–¹æ–‡æ¡£ï¼‰ å¦‚ä¸Šå›¾ï¼Œå½“æŸä¸ªinvocationè§¦å‘äº†App Clipæ—¶ï¼Œç³»ç»Ÿé¦–å…ˆä¼šæ£€æŸ¥invocationå…³è”çš„URLï¼Œé€šè¿‡URLè·å–ç”¨æ¥å±•ç¤ºé¢„è§ˆä¿¡æ¯çš„æ•°æ®ï¼Œé¢„è§ˆä¿¡æ¯åŒ…æ‹¬ä¸€ä¸ªèƒŒæ™¯å›¾æ¡ˆï¼Œæè¿°æ ‡é¢˜ä¸å¯åŠ¨æŒ‰é’®ï¼Œç”¨æˆ·ç‚¹å‡»å¯åŠ¨æŒ‰é’®åä¼šæ‰“å¼€App Clipã€‚æˆ‘ä»¬å¯ä»¥åœ¨App Clipå¯åŠ¨æ—¶æ‹¿åˆ°ä¼ é€’è¿›æ¥çš„URLï¼Œé€šè¿‡URLçš„å‚æ•°è¿›è¡Œä¸åŒçš„é€»è¾‘å¤„ç†ã€‚ äº†è§£äº†App Clipsçš„å¯åŠ¨è¿‡ç¨‹ï¼Œæˆ‘ä»¬çŸ¥é“å®é™…ä¸Šåœ¨å¯åŠ¨App Clipä¹‹å‰ï¼Œç³»ç»Ÿä¼šå…ˆå¼¹å‡ºä¸€ä¸ªé¢„è§ˆå¡ç‰‡ï¼Œè¿™ä¸ªå¡ç‰‡ä¸Šçš„ä¿¡æ¯å¯ä»¥ç”±å¼€å‘è€…åœ¨iTunes Connectä¸Šè‡ªè¡Œå®šä¹‰ã€‚ åœ¨ç€æ‰‹å¼€å‘App Clipsä¹‹å‰ï¼Œè¿˜æœ‰ä¸€äº›äº‹æƒ…æˆ‘ä»¬éœ€è¦è€ƒè™‘ã€‚ A. æä¾›ç•…å¿«çš„ç”¨æˆ·ä½“éªŒApp Clipsä¸ä¼šåƒé€šå¸¸çš„Appé‚£æ ·å±•ç¤ºä¸€ä¸ªå›¾æ ‡åœ¨ä¸»å±å¹•ä¸Šï¼Œç”¨æˆ·ä¸éœ€è¦å¯¹App Clipsè¿›è¡Œç®¡ç†ï¼Œä¸ç”¨ä¸‹è½½ä¹Ÿæ— éœ€åˆ é™¤ï¼Œå½“æŒ‡å®šçš„App Clipä¸€æ®µæ—¶é—´ä¸æ´»è·ƒåï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å¯¹å®ƒä»¬è¿›è¡Œæ¸…é™¤ã€‚å› æ­¤ï¼Œå®˜æ–¹å»ºè®®ï¼ŒApp Clipsæä¾›çš„åŠŸèƒ½åº”è¯¥æ˜¯çº¿æ€§çš„ï¼Œè®©ç”¨æˆ·ä¸€æ¬¡æ€§çš„å®Œæˆä»»åŠ¡ã€‚ B. App Clipséœ€è¦è¶³å¤Ÿå°å·§App Clipsåº”è¯¥è¶³å¤Ÿçš„å°å·§ï¼Œå®˜æ–¹é™å®šä¸å¯è¶…è¿‡10Må¤§å°ï¼Œåªæœ‰è¶³å¤Ÿå°ï¼Œåœ¨ç”¨æˆ·éœ€è¦ä½¿ç”¨çš„æ—¶å€™æ‰èƒ½ä»¥æ›´çŸ­çš„æ—¶é—´åŠ è½½ä¸å±•ç¤ºã€‚ C. æ£€æŸ¥å¯ç”¨çš„æ¡†æ¶åœ¨å¼€å‘ä¹‹å‰ï¼Œé¦–å…ˆè¦ç¡®è®¤ä¸‹App Clipså¯ç”¨çš„æ¡†æ¶ï¼Œå¤§éƒ¨åˆ†ä¸»Appå¯ç”¨çš„æ¡†æ¶åœ¨App Clipsä¸­éƒ½å¯ä»¥ä½¿ç”¨ï¼Œä½†å¹¶ä¸æ˜¯æ‰€æœ‰ï¼ŒCallKit, CareKit, CloudKit, HealthKit, HomeKit, ResearchKit, SensorKit, å’Œ Speechåœ¨App Clipsä¸­æ˜¯ä¸è¢«æ”¯æŒçš„ã€‚ D. ä¿æŠ¤ç”¨æˆ·éšç§ç”±äºApp Clipsä¼šä»¥æ¨èæˆ–å…¶ä»–å¹¿å‘Šçš„æ–¹å¼è§¦å‘ï¼Œå› æ­¤ä¿æŠ¤ç”¨æˆ·çš„éšç§éå¸¸é‡è¦ã€‚åœ¨App Clipsä¸­ï¼Œéšç§ä¿æŠ¤ä¼šä¸€ç›´è¢«å¯ç”¨ï¼Œä¾‹å¦‚å¯¹åå°å®šä½æƒé™çš„ç”³è¯·ï¼Œå½“ç”¨æˆ·åŒæ„åï¼Œæ¬¡æ—¥çš„å‡Œæ™¨4ç‚¹ï¼Œè¿™ä¸ªæƒé™ä¼šè¢«é‡æ–°å…³é—­ï¼Œå¦‚æœå†æ¬¡å¯ç”¨äº†App Clipsï¼Œéœ€è¦é‡æ–°å‘ç”¨æˆ·ç”³è¯·ã€‚å½“ç„¶ï¼Œè¿˜æœ‰ä¸€äº›æƒé™åœ¨App Clipsä¸­æ˜¯ç¦æ­¢è·å–çš„ï¼Œå…¶ä¸­æœ‰ï¼šè¿åŠ¨å’Œå¥èº«æ•°æ®ï¼ŒéŸ³ä¹å’Œå¤šåª’ä½“æ–‡ä»¶ï¼Œé€šè®¯å½•/ä¿¡æ¯/ç…§ç‰‡ç­‰æ–‡ä»¶ã€‚é™¤äº†å…¶å®¿ä¸»Appæ„å¤–ï¼ŒApp Clipsä¹Ÿä¸å¯ä»¥å’Œå…¶ä»–åº”ç”¨å…±äº«æ•°æ®ã€‚ E. æ€è€ƒä¸»Appçš„å“ªäº›åŠŸèƒ½æ˜¯é€‚åˆåœ¨App Clipæä¾›çš„App Clipsæä¾›ç¬æ—¶çš„åº”ç”¨ä½“éªŒï¼Œå› æ­¤æ›´å¤šæ—¶å€™ï¼Œåœ¨å¼€å‘App Clipsä¹‹å‰ï¼Œä½ æœ€å…ˆåº”è¯¥æ€è€ƒçš„æ˜¯ä¸»Appä¸Šçš„å“ªäº›åŠŸèƒ½æ˜¯é€‚åˆåœ¨App Clipsä¸Šæä¾›çš„ã€‚è¿™éœ€è¦ä»äº§å“è§’åº¦æ·±åº¦çš„æ€è€ƒï¼Œå¹¶çœŸå®çš„ç«™åœ¨ç”¨æˆ·çš„è§’åº¦ä½“éªŒã€‚ 3. åˆ›å»ºä¸€ä¸ªApp Clipç¨‹åºå‰é¢è®²äº†å¾ˆå¤šå¼€å‘App Clipså‰çš„å‡†å¤‡ï¼Œç°åœ¨å°±è®©æˆ‘ä»¬ä¸Šæ‰‹åˆ›å»ºä¸€ä¸ªApp Clipä½“éªŒä¸€ä¸‹ã€‚åˆ›å»ºApp Clipéå¸¸ç®€å•ï¼Œé¦–å…ˆå…¶éœ€è¦ä¸€ä¸ªå®¿ä¸»Appï¼Œå¦‚æœä¸ºå·²ç»å­˜åœ¨çš„ä¸€ä¸ªå®Œå…¨åº”ç”¨ç¨‹åºæ·»åŠ App Clipï¼Œå°±æ›´åŠ å®¹æ˜“ï¼Œæˆ‘ä»¬åªéœ€è¦æ–°å»ºä¸€ä¸ªTargetï¼Œé€‰æ‹©App Clipå³å¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š æ–°å»ºäº†App Clipçš„Targetåï¼ŒXcodeä¼šè‡ªåŠ¨çš„å¸®æˆ‘ä»¬åˆ›å»ºå¥½ä¸€ç³»åˆ—å¿…é¡»çš„æ–‡ä»¶ï¼Œå¹¶åšå¥½é…ç½®ã€‚è¿™æ—¶ï¼Œç›´æ¥è¿è¡Œtargetå¯¹åº”çš„schemeå³å¯åœ¨æ¨¡æ‹Ÿå™¨æˆ–çœŸæœºä¸Šè¿è¡ŒApp Clipåšæµ‹è¯•ï¼Œå½“å‰ï¼Œå¦‚æœä½ è¿è¡Œä¼šå‡ºç°ä¸€ä¸ªç©ºç™½çš„é¡µé¢ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬è¿˜æ²¡æœ‰ç¼–å†™ä»»ä½•ä»£ç ã€‚ å‰é¢è¯´è¿‡ï¼ŒApp Clipçš„è¿è¡Œéœ€è¦**_invocation_**è¿›è¡Œè°ƒç”¨ï¼Œå¯¹äº**_invocation_**çš„è°ƒç”¨ï¼Œå¦‚æœç”¨æˆ·å®‰è£…äº†å®Œå…¨çš„ä¸»Appï¼Œåˆ™ä¼šå”¤èµ·ä¸»Appæ¥å¤„ç†ç”¨æˆ·ä»»åŠ¡ï¼Œå¦‚æœç”¨æˆ·æ²¡æœ‰å®‰è£…ä¸»Appï¼Œåˆ™è‡ªåŠ¨è°ƒèµ·App Clipã€‚æ— è®ºé€šè¿‡å“ªç§**_invocation_**æ¥è°ƒèµ·App Clipï¼Œæˆ‘ä»¬éƒ½éœ€è¦åœ¨App Clipçš„targetä¸­é…ç½®æŒ‡å®šçš„åŸŸæƒé™ã€‚åœ¨targetå·¥ç¨‹çš„è®¾ç½®é¡µé¢ï¼Œæ‰¾åˆ°Associated Domainsé€‰é¡¹ï¼Œåœ¨å…¶ä¸­æ·»åŠ è¦è°ƒèµ·App Clipçš„åŸŸåï¼Œéœ€è¦æ‰¾åˆ°è¿™æ ·çš„æ ¼å¼ï¼šappclips:xxx.comã€‚è¿™ç§é…ç½®æ–¹å¼ä¸Deep linkçš„é€»è¾‘åŸºæœ¬ä¸€è‡´ã€‚ ä¸‹é¢ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•å‘App Clipå·¥ç¨‹ä¸­æ·»åŠ ä¸€äº›ä»£ç ã€‚è§‚å¯ŸApp Clipçš„å·¥ç¨‹ç›®å½•ç»“æ„ï¼Œå¯ä»¥å‘ç°ï¼Œå…¶å’Œæ­£å¸¸çš„Appå‡ ä¹æ²¡æœ‰ä»€ä¹ˆå·®å¼‚ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š æˆ‘ä»¬ç®€å•çš„åœ¨ViewControllerä¸­æ·»åŠ ä¸€äº›ä»£ç ï¼Œä¾‹å¦‚ç‚¹å‡»å±å¹•åï¼Œéšæœºæ”¹å˜ç•Œé¢çš„é¢œè‰²ï¼Œå¦‚ä¸‹ï¼š 123456789101112131415161718192021#import \"ViewController.h\"@interface ViewController ()@end@implementation ViewController- (void)viewDidLoad &#123; [super viewDidLoad];&#125;- (void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event &#123; [self changeColor];&#125;- (void)changeColor &#123; self.view.backgroundColor = [UIColor colorWithRed:arc4random()%255/255.0 green:arc4random()%255/255.0 blue:arc4random()%255/255.0 alpha:1];&#125;@end åœ¨å¼€å‘App Clipsæ—¶ï¼Œæˆ‘ä»¬åº”è¯¥å°½é‡çš„è®©ä¸»Appçš„ä»£ç ä¸App Clipséœ€è¦ä½¿ç”¨çš„ä»£ç å…±äº«ï¼Œå…±äº«ä»£ç éå¸¸å®¹æ˜“ï¼Œå°†å¯ä»¥å…±äº«çš„ä»£ç ä¿è¯åœ¨é™æ€åº“æˆ–åŠ¨æ€åº“å†…å³å¯ã€‚æœ‰æ—¶å€™ï¼Œä½ å¯èƒ½éœ€è¦åœ¨å…±äº«çš„ä»£ç ä¸­åŒºåˆ†ç¯å¢ƒï¼Œæ¯”å¦‚æŸäº›ä»£ç åªåœ¨targetç¯å¢ƒä¸‹è¢«ç¼–è¯‘ï¼ŒæŸäº›åˆ™åªåœ¨ä¸»Appç¯å¢ƒä¸‹è¢«ç¼–è¯‘ã€‚å¯ä»¥ä¸ºtargetæ·»åŠ ä¸€ä¸ªç‰¹æ®Šçš„ç¼–è¯‘å®æ¥åŒºåˆ†ç¯å¢ƒï¼ŒObjective-Cçš„å·¥ç¨‹ï¼Œè¿™ä¸ªç¼–è¯‘é€‰é¡¹éœ€è¦åœ¨Build Settingsçš„Preprocessor Macrosé€‰é¡¹ä¸‹è¿›è¡Œé…ç½®ï¼ŒSwiftçš„å·¥ç¨‹åˆ™éœ€è¦åœ¨Active Compilation Conditionsé€‰é¡¹ä¸‹è¿›è¡Œé…ç½®ï¼Œä¾‹å¦‚æˆ‘ä»¬ä¸ºtargetå·¥ç¨‹æ·»åŠ ä¸€ä¸ªCLIPçš„ç¼–è¯‘å®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¹‹åï¼Œåœ¨ç¼–å†™ä»£ç æ—¶ï¼Œå¯¹äºé’ˆå¯¹targetçš„ä»£ç ï¼Œå°±å¯ä»¥å°†å…¶é€šè¿‡æ¡ä»¶ç¼–è¯‘åŒºåˆ†ï¼š 12345- (void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event &#123;#ifdef CLIP self.view.backgroundColor = [UIColor colorWithRed:arc4random()%255/255.0 green:arc4random()%255/255.0 blue:arc4random()%255/255.0 alpha:1];#endif&#125; å¯¹äºå‘å¸ƒApp Clipsçš„ç¨‹åºï¼Œè¿˜æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œåœ¨ç³»ç»Ÿå¼¹å‡ºé¢„è§ˆå¡ç‰‡ä¹‹å‰ï¼Œé¦–å…ˆä¼šå…ˆé€šè¿‡invocationå…³è”çš„URLå¯¹App Clipè¿›è¡Œæ ¡éªŒï¼Œå¦‚æœæ ¡éªŒä¸æˆåŠŸï¼Œåˆ™ä¸ä¼šå¼¹å‡ºé¢„è§ˆå¡ç‰‡ä¹Ÿä¸ä¼šæ‰“å¼€App Clipç¨‹åºã€‚è¦æˆåŠŸè¿›è¡ŒéªŒè¯ï¼Œé™¤äº†åœ¨Xcodeå·¥ç¨‹ä¸­é…ç½®æ­£ç¡®çš„Associated Domainså¤–ï¼Œè¿˜éœ€è¦å¯¹æˆ‘ä»¬çš„WebæœåŠ¡åšä¸€äº›ä¿®æ”¹ã€‚éœ€è¦åœ¨æœåŠ¡å™¨æ·»åŠ Apple App Site Associationæ–‡ä»¶ï¼Œå¹¶ä¸”æ·»åŠ ä¸Šç±»ä¼¼å¦‚ä¸‹çš„é…ç½®æ¥æ”¯æŒApp Clipsï¼š 123456&#123; \"appclips\": &#123; \"apps\": [\"ABCED12345.com.example.MyApp.Clip\"] &#125; ...&#125; 4. æµ‹è¯•App Clipsçš„å¯åŠ¨è™½ç„¶App Clipsçš„å¯åŠ¨éœ€è¦ç”±**_invocation_**è§¦å‘ï¼Œä½†æ˜¯åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¾ç„¶æœ‰æ–¹æ³•æ¥æ¨¡æ‹ŸWebå‘å‡ºçš„**_invocation_**æ¥å¯åŠ¨App Clipã€‚ç¼–è¾‘åœ¨App Clipå¯¹åº”çš„schemeï¼Œåœ¨å…¶ä¸­æ·»åŠ  _XCAppClipURLè¿™ä¸ªé”®å€¼æ¥é…ç½®æ¨¡æ‹Ÿä»æŸä¸ªURLè°ƒèµ·App Clipsï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å½“App Clipè¢«è°ƒèµ·åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€äº›å›è°ƒæ–¹æ³•æ¥æ‹¿åˆ°URLä¿¡æ¯ï¼Œæ ¹æ®ä¸åŒçš„ä¿¡æ¯ï¼Œå¯ä»¥å°†ä¸åŒçš„åŠŸèƒ½çº¿å±•ç¤ºç»™ç”¨æˆ·è¿›è¡Œä½¿ç”¨ã€‚ä»¥UIKitå·¥ç¨‹ä¸ºä¾‹ï¼Œå½“App Clipè¢«è°ƒèµ·æ—¶ï¼Œä¼šè°ƒç”¨å¦‚ä¸‹æ–¹æ³•ï¼š 123- (void)scene:(UIScene *)scene continueUserActivity:(NSUserActivity *)userActivity &#123; NSLog(@\"%@\", userActivity);&#125; åœ¨UNUserAvtivityå¯¹è±¡ä¸­å¯ä»¥è·å–åˆ°ä¼ é€’çš„URLç­‰ä¿¡æ¯ã€‚å¦‚æœä½ çš„App Clipæ˜¯å¯ä»¥è¢«ç‰¹æ®Šçš„åœ°ç†ä½ç½®è§¦å‘çš„ï¼Œé‚£ä¹ˆéœ€è¦åœ¨Clipå¯¹åº”targetçš„info.plistä¸­æ·»åŠ  NSAppClipé”®ï¼Œå¹¶å°†å…¶ä¸­çš„ NSAppClipRequestLocationConfirmationé”®è®¾ç½®ä¸ºYESã€‚ 5. é…ç½®é¢„è§ˆå¡ç‰‡åœ¨çœŸæ­£çš„å¯åŠ¨App Clipä¹‹å‰ï¼Œé¦–å…ˆä¼šå¼¹å‡ºé¢„è§ˆå¡ç‰‡ã€‚åœ¨æäº¤App Clipæ—¶ï¼Œæ˜¯è·Ÿå®¿ä¸»Appä¸€èµ·æ‰“åŒ…ä¸Šä¼ åˆ°App Store Connectä¸Šçš„ï¼ŒApp Clipçš„é¢„è§ˆå¡ç‰‡é…ç½®ä¹Ÿæ˜¯åœ¨App Store Connectä¸Šå®Œæˆï¼Œæä¾›ç»™å¼€å‘è€…è‡ªç”±é…ç½®çš„åœ°æ–¹å¹¶ä¸å¤šï¼ŒåŒ…æ‹¬3ä¸ªæ–¹é¢ï¼š é…ç½®ä¸€ä¸ªå¤´å›¾ é…ç½®å‰¯æ ‡é¢˜å¹¶æä¾›æè¿°æ–‡æ¡ˆ é…ç½®äº¤äº’æŒ‰é’® 6. å…³äºæ•°æ®å…±äº«App Clipsçš„å’Œå®¿ä¸»Appçš„æ•°æ®å…±äº«å¹¶æ²¡æœ‰ä»€ä¹ˆç‰¹æ®Šçš„åœ°æ–¹ï¼Œå…¶å’Œæ™®é€šExtension Targetä¸å®¿ä¸»Appé€šä¿¡çš„æ–¹å¼ä¸€æ ·ï¼Œåªè¦åˆ›å»ºä¸€ä¸ªApp Groupï¼Œå¹¶å°†App Clipsä¸å®¿ä¸»Appæ”¾å…¥åŒä¸€ä¸ªApp Groupä¸­ï¼Œä¹‹åå°±å¯ä»¥é€šè¿‡NSUserDefaultæ¥è¿›è¡Œæ•°æ®çš„å…±äº«ã€‚","categories":[{"name":"iOS14ä¸“é¢˜","slug":"iOS14ä¸“é¢˜","permalink":"http://huishao.cc/categories/iOS14ä¸“é¢˜/"}],"tags":[],"keywords":[{"name":"iOS14ä¸“é¢˜","slug":"iOS14ä¸“é¢˜","permalink":"http://huishao.cc/categories/iOS14ä¸“é¢˜/"}]},{"title":"iOSå½•å±æ¡†æ¶ReplayKitçš„åº”ç”¨æ€»ç»“","slug":"400iOSå½•å±æ¡†æ¶ReplayKitçš„åº”ç”¨æ€»ç»“","date":"2020-05-11T16:00:00.000Z","updated":"2021-07-15T11:25:10.889Z","comments":true,"path":"2020/05/12/400iOSå½•å±æ¡†æ¶ReplayKitçš„åº”ç”¨æ€»ç»“/","link":"","permalink":"http://huishao.cc/2020/05/12/400iOSå½•å±æ¡†æ¶ReplayKitçš„åº”ç”¨æ€»ç»“/","excerpt":"","text":"iOSå½•å±æ¡†æ¶ReplayKitçš„åº”ç”¨æ€»ç»“ReplayKitæ˜¯iOSè‡ªå¸¦çš„ä¸€ä¸ªå±å¹•å½•åˆ¶çš„æ¡†æ¶ï¼Œå…¶æ”¯æŒåº”ç”¨ç¨‹åºå¯¹å½“å‰åº”ç”¨å†…é¡µé¢è¿›è¡Œå½•å±ï¼Œå¹¶å°†æœ€ç»ˆçš„è§†é¢‘ä¿å­˜åˆ°ç³»ç»Ÿç›¸å†Œä¸­ã€‚ReplayKitåœ¨iOS 9ä¹‹åå¼•å…¥ï¼Œå…¶æ¥å£ç®€ä»‹ï¼Œå¯ä»¥éå¸¸æ–¹ä¾¿çš„ä¸ºåº”ç”¨æ·»åŠ å½•å±åŠŸèƒ½ã€‚éœ€è¦æ³¨æ„ï¼Œåœ¨æŸäº›iOS 12ç³»ç»Ÿä¸Šï¼Œå¼€å¯å½•å±å¯èƒ½ä¼šå¤±è´¥(é€šå¸¸éœ€è¦é‡å¯è®¾å¤‡è§£å†³)ã€‚ åœ¨ReplayKitæ¡†æ¶ä¸­ï¼Œæœ‰ä¸¤ä¸ªéå¸¸é‡è¦çš„ç±»ï¼Œåˆ†åˆ«æ˜¯RPScreenRecorderç±»ä¸RPPreviewViewControllerç±»ã€‚RPScreenRecorderæ˜¯å½•å±æ ¸å¿ƒåŠŸèƒ½ç±»ï¼ŒRPPreviewViewControlleræ˜¯å½•å±ç»“æŸåçš„é¢„è§ˆæ§åˆ¶å™¨ç±»ã€‚ ä¸‹é¢ï¼Œåˆ—ä¸¾äº†ä¸€ä¸ªç®€å•çš„å½•å±ç¤ºä¾‹ä»£ç ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970@interface ViewController () &lt;RPScreenRecorderDelegate, RPPreviewViewControllerDelegate&gt;@end@implementation ViewController- (void)viewDidLoad &#123; self.view.backgroundColor = [UIColor whiteColor]; [super viewDidLoad]; // è·å–å½•å±åŠŸèƒ½æ˜¯å¦å¯ç”¨ NSLog(@\"%d\", [RPScreenRecorder sharedRecorder].available); // è®¾ç½®å½•å±ä»£ç† [RPScreenRecorder sharedRecorder].delegate = self; UIButton *btn = [UIButton buttonWithType:UIButtonTypeSystem]; [btn setTitle:@\"Start\" forState:UIControlStateNormal]; [btn addTarget:self action:@selector(start) forControlEvents:UIControlEventTouchUpInside]; btn.frame = CGRectMake(100, 100, 100, 30); [self.view addSubview:btn]; UIButton *btn2 = [UIButton buttonWithType:UIButtonTypeSystem]; [btn2 setTitle:@\"End\" forState:UIControlStateNormal]; [btn2 addTarget:self action:@selector(stop) forControlEvents:UIControlEventTouchUpInside]; btn2.frame = CGRectMake(100, 150, 100, 30); [self.view addSubview:btn2];&#125;- (void)stop &#123; // ç»“æŸå½•å± [[RPScreenRecorder sharedRecorder] stopRecordingWithHandler:^(RPPreviewViewController * _Nullable previewViewController, NSError * _Nullable error) &#123; NSLog(@\"stopRecordingWithHandler\"); if (!error) &#123; previewViewController.previewControllerDelegate = self; // åˆ°è§†é¢‘é¢„è§ˆæ§åˆ¶å™¨ [self presentViewController:previewViewController animated:YES completion:nil]; &#125; &#125;];&#125;// å¼€å§‹å½•å±- (void)start &#123; [[RPScreenRecorder sharedRecorder] startRecordingWithHandler:^(NSError * _Nullable error) &#123; NSLog(@\"startRecordingWithHandlerError:%@\", error); &#125;];&#125;- (void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event &#123; self.view.backgroundColor = [UIColor colorWithRed:arc4random()%255/255.0 green:arc4random()%255/255.0 blue:arc4random()%255/255.0 alpha:1];&#125;// å½•å±ç»“æŸçš„å›è°ƒ- (void)screenRecorder:(RPScreenRecorder *)screenRecorder didStopRecordingWithPreviewViewController:(nullable RPPreviewViewController *)previewViewController error:(nullable NSError *)error &#123; NSLog(@\"didStopRecordingWithPreviewViewControllerError:%@\", error);&#125;// å½•å±å¯ç”¨æ€§æ”¹å˜çš„å›è°ƒ- (void)screenRecorderDidChangeAvailability:(RPScreenRecorder *)screenRecorder &#123; NSLog(@\"screenRecorderDidChangeAvailability:%d\", screenRecorder.available);&#125;// å½•å±é¢„è§ˆæ§åˆ¶å™¨çš„ä»£ç†å›è°ƒ- (void)previewControllerDidFinish:(RPPreviewViewController *)previewController &#123; [previewController dismissViewControllerAnimated:YES completion:nil];&#125;- (void)previewController:(RPPreviewViewController *)previewController didFinishWithActivityTypes:(NSSet &lt;NSString *&gt; *)activityTypes &#123; NSLog(@\"didFinishWithActivityTypes %@\", activityTypes);&#125;@end å…¶ä¸­ï¼ŒRPScreenRecorderç±»ä¸­æä¾›äº†ä¸°å¯Œçš„æ¥å£å¯ä»¥ä½¿ç”¨ï¼Œåˆ—ä¸¾å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930@interface RPScreenRecorder : NSObject// è·å–å•ä¾‹+ (RPScreenRecorder *)sharedRecorder;// iOS 10 ä¹‹å‰ä½¿ç”¨ï¼Œå¯ä»¥é€šçŸ¥æ˜¯å¦å¼€å¯éº¦å…‹é£- (void)startRecordingWithMicrophoneEnabled:(BOOL)microphoneEnabled handler:(nullable void(^)(NSError * _Nullable error))handler;// iOS 10 ä¹‹åä½¿ç”¨ å¼€å¯å½•å±- (void)startRecordingWithHandler:(nullable void(^)(NSError * _Nullable error))handler;// ç»“æŸå½•å±- (void)stopRecordingWithHandler:(nullable void(^)(RPPreviewViewController * _Nullable previewViewController, NSError * _Nullable error))handler;// æ”¾å¼ƒå½•å±- (void)discardRecordingWithHandler:(void(^)(void))handler;// å¼€å¯å½•å±ï¼Œå¯ä»¥è·å–åˆ°è§†é¢‘æµæ•°æ® iOS 11åå¯ç”¨- (void)startCaptureWithHandler:(nullable void(^)(CMSampleBufferRef sampleBuffer, RPSampleBufferType bufferType, NSError * _Nullable error))captureHandler completionHandler:(nullable void(^)(NSError * _Nullable error))completionHandler;// ç»“æŸè§†é¢‘æµæ•è·- (void)stopCaptureWithHandler:(nullable void(^)(NSError * _Nullable error))handler;// è®¾ç½®ä»£ç†å¯¹è±¡@property (nonatomic, weak, nullable) id&lt;RPScreenRecorderDelegate&gt; delegate;// å½•å±åŠŸèƒ½æ˜¯å¦å¯ç”¨@property (nonatomic, readonly, getter=isAvailable) BOOL available;// æ˜¯å¦æ­£åœ¨å½•åˆ¶ä¸­@property (nonatomic, readonly, getter=isRecording) BOOL recording;// æ˜¯å¦ä½¿ç”¨éº¦å…‹é£@property (nonatomic, getter=isMicrophoneEnabled) BOOL microphoneEnabled;// æ˜¯å¦å¯ä»¥ä½¿ç”¨ç›¸æœº@property (nonatomic, getter=isCameraEnabled) BOOL cameraEnabled;// è®¾ç½®æ‘„åƒå¤´æ¨¡å¼ å‰ç½®/åç½®@property (nonatomic) RPCameraPosition cameraPosition;// ç›¸æœºé¢„è§ˆè§†å›¾@property (nonatomic, readonly, nullable) UIView *cameraPreviewView;@end åœ¨å½•å±çš„æ—¶å€™ï¼Œä¹Ÿæ”¯æŒè°ƒç”¨ç³»ç»Ÿçš„éº¦å…‹é£å’Œæ‘„åƒå¤´å…±åŒå®Œæˆå½•åˆ¶ã€‚RPScreenRecorderDelegateåè®®ä¸­å®šä¹‰äº†ä¸€äº›å›è°ƒæ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š 123456// åœæ­¢å½•å±åçš„å›è°ƒ iOS 10 ä¹‹å‰ä½¿ç”¨- (void)screenRecorder:(RPScreenRecorder *)screenRecorder didStopRecordingWithError:(NSError *)error previewViewController:(nullable RPPreviewViewController *)previewViewController;// åœæ­¢å½•å±åçš„å›è°ƒ iOS 10 ä¹‹åä½¿ç”¨- (void)screenRecorder:(RPScreenRecorder *)screenRecorder didStopRecordingWithPreviewViewController:(nullable RPPreviewViewController *)previewViewController error:(nullable NSError *)error;// å½•å±æƒé™æ›´æ”¹çš„å›è°ƒ- (void)screenRecorderDidChangeAvailability:(RPScreenRecorder *)screenRecorder; RPPreviewViewControllerç±»æ˜¯è§†é¢‘é¢„è§ˆæ§åˆ¶å™¨ç±»ï¼Œè¿™ä¸ªæ§åˆ¶å™¨æ²¡æœ‰æš´éœ²å¤ªå¤šçš„å±æ€§ç»™å¼€å‘è€…ä½¿ç”¨ï¼Œå…¶ä¸­é¢„è§ˆæ¨¡å¼å¯ä»¥é€‰æ‹©åˆ†äº«æ¨¡å¼æˆ–ç¼–è¾‘æ¨¡å¼ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œå…¶ä¸­è¿˜æä¾›äº†ä¸€ä¸ªä»£ç†åè®®ç»™å¼€å‘è€…è¿›è¡Œä½¿ç”¨ï¼Œç”¨æ¥å¯¹ç”¨æˆ·çš„æ“ä½œè¿›è¡Œå¤„ç†ï¼Œå¦‚ä¸‹ï¼š 1234567@protocol RPPreviewViewControllerDelegate &lt;NSObject&gt;@optional// é¢„è§ˆç»“æŸ- (void)previewControllerDidFinish:(RPPreviewViewController *)previewController;// ç”¨æˆ·è¡Œä¸ºå›è°ƒ- (void)previewController:(RPPreviewViewController *)previewController didFinishWithActivityTypes:(NSSet &lt;NSString *&gt; *)activityTypes;@end","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"ä½¿ç”¨Pythonç¼–å†™iOSåŸç”Ÿåº”ç”¨çš„æ¡†æ¶è®¾è®¡æ€è€ƒ(é¦–ç¯‡)","slug":"399ä½¿ç”¨Pythonç¼–å†™iOSåŸç”Ÿåº”ç”¨çš„æ¡†æ¶è®¾è®¡æ€è€ƒ(é¦–ç¯‡)","date":"2020-04-29T16:00:00.000Z","updated":"2021-07-15T11:24:15.096Z","comments":true,"path":"2020/04/30/399ä½¿ç”¨Pythonç¼–å†™iOSåŸç”Ÿåº”ç”¨çš„æ¡†æ¶è®¾è®¡æ€è€ƒ(é¦–ç¯‡)/","link":"","permalink":"http://huishao.cc/2020/04/30/399ä½¿ç”¨Pythonç¼–å†™iOSåŸç”Ÿåº”ç”¨çš„æ¡†æ¶è®¾è®¡æ€è€ƒ(é¦–ç¯‡)/","excerpt":"","text":"ä½¿ç”¨Pythonç¼–å†™iOSåŸç”Ÿåº”ç”¨çš„æ¡†æ¶è®¾è®¡æ€è€ƒ(é¦–ç¯‡)ä¸€ã€å¼•å­ä½¿ç”¨Pythonç¼–å†™iOSåŸç”Ÿåº”ç”¨ï¼Œä¸ºä½•æœ‰è¿™æ ·çš„æƒ³æ³•ï¼Œå…¶å®æœ¬æ¥æ˜¯æºäºå¯¹JSç±»çš„è·¨å¹³å°æ¡†æ¶çš„å­¦ä¹ ã€‚ç†Ÿæ‚‰åŸç”Ÿå¼€å‘çš„åŒå­¦ä»¬éƒ½çŸ¥é“ï¼Œå¯¹äºå¯è·¨å¹³å°çš„åŸç”Ÿæ¡†æ¶ï¼Œä½¿ç”¨JSå®ç°çš„å äº†å¤§åŠï¼Œå…¶åŸå› æ˜¯ç”±äºAppleå†…ç½®äº†JavaScriptCoreè¿™æ ·ä¸€ä¸ªJSå¼•æ“ï¼Œä½¿å¾—JavaScriptä¸Objective-Cçš„äº¤äº’å˜å¾—éå¸¸å®¹æ˜“ï¼Œèƒ½å¤Ÿäº¤äº’ï¼Œæˆ‘ä»¬å°±å¯ä»¥å®¹æ˜“çš„ç¼–å†™å‡ºå„ç§å„æ ·çš„æ¡¥æ¥ä¸ºJSç«¯æä¾›åŸç”ŸåŠŸèƒ½ï¼Œéšç€åŸç”Ÿç«¯æ¡¥çš„å…¨é¢æ”¯æŒå’ŒJSç«¯ç»„ä»¶çš„ä¸°å¯Œï¼Œä¸€ä¸ªå®Œæ•´çš„çŸ¿å¹³å°æ¡†æ¶å°±è¯ç”Ÿäº†ã€‚è™½è¯´è¿™æ˜¯ä¸€ä¸ªåºå¤§çš„å·¥ç¨‹ï¼Œä½†æ˜¯å®ç°æ€è·¯å¹¶ä¸æ·±å¥¥ï¼Œä¹‹å‰ä¹Ÿæœ‰åšå®¢ä¹Ÿæœ‰ä»‹ç»ï¼š https://my.oschina.net/u/2340880/blog/856321 æœ‰äº†JavaScriptæ¡†æ¶å®ç°æ€è·¯çš„åŸºç¡€ï¼Œé‚£ä¹ˆä¸å…å°±å¾ˆå®¹æ˜“æƒ³åˆ°ï¼Œå…¶å®åœ¨è¯­è¨€å±‚é¢ï¼Œè¯­è¨€å¯ä»¥åšçš„äº‹æƒ…éƒ½æ˜¯ç›¸ä¼¼çš„ï¼Œåªè¦æœ‰å¯¹åº”çš„å¼•æ“å¯ç”¨ï¼Œé‚£ä¹ˆåŸåˆ™ä¸Šè¯´ï¼Œä»»ä½•è¯­è¨€éƒ½å¯ä»¥ç¼–å†™iOSåº”ç”¨ç¨‹åºï¼Œåªæœ‰éš¾ä»¥ä¸æ–¹ä¾¿ä¸å¦çš„å·®åˆ«ã€‚å¯¹äºPythonæ¥è¯´ï¼Œå…¶çš„ç¡®æœ‰iOSç‰ˆæœ¬çš„è§£é‡Šå™¨å¯ç”¨ã€‚ äºŒã€åœ¨iOSå¹³å°ä½¿ç”¨Pythonè§£é‡Šå™¨Githubä¸Šæœ‰å¾ˆå¤šæœ‰è¶£çš„é¡¹ç›®ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªé¡¹ç›®å¯ä»¥å°†Pythonæºç ç¼–è¯‘æˆå¯ä»¥åœ¨iOSå¹³å°è¿è¡Œçš„Frameworkï¼Œå…¶åœ°å€å¦‚ä¸‹ï¼š https://github.com/beeware/Python-Apple-support æœ‰äº†è¿™ä¸ªå·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©ä»»æ„ç‰ˆæœ¬çš„Pythonæ¥å°†å…¶æ‰“åŒ…æˆFrameworkåœ¨iOSå¹³å°è¿è¡Œï¼Œå½“ç„¶å¦‚æœä½ å¯¹ç‰ˆæœ¬æ²¡æœ‰ç‰¹æ®Šçš„è¦æ±‚ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥ä»ä¸‹é¢çš„åœ°å€ä¸‹è½½å·²ç»æ‰“åŒ…å¥½çš„Framewokä½¿ç”¨ï¼š https://github.com/pybee/Python-iOS-support/releases ä¸‹è½½å®Œæˆåï¼Œä¼šå¾—åˆ°ä¸¤ä¸ªFrameworkï¼Œå°†ä»–ä»¬æ·»åŠ è¿›å·¥ç¨‹ï¼Œå¹¶è¿›è¡Œé“¾æ¥ï¼Œå¦‚ä¸‹å›¾ï¼š éœ€è¦æ³¨æ„ï¼Œå¯¹äºPython.frameworkè¦æ›´ç‰¹æ®Šä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶æ‹·è´è¿›å·¥ç¨‹çš„Bundleä¸­ï¼Œä»¥ä¾¿åç»­ä½¿ç”¨ã€‚ ä¸‰ã€ç¼–å†™æ¡¥æ¥æ–‡ä»¶è¿™éƒ¨åˆ†ä¸»è¦æœ‰Objective-Cå®ç°ï¼Œç”¨æ¥å¯åŠ¨Pythonå¼•æ“ï¼ŒåŠ è½½Pythonä¸šåŠ¡ä»£ç çš„å…¥å£æ–‡ä»¶ï¼Œåšå„ç§åŸç”Ÿç»„ä»¶ä¸Pythonç»„ä»¶çš„æ¡¥æ¥ç­‰ã€‚é¦–å…ˆç¼–å†™ä¸€ä¸ªå¤´æ–‡ä»¶ç”¨æ¥è¿›è¡Œé™æ€å˜é‡å’Œå®çš„å®šä¹‰ï¼Œå¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930//// BrdgeDefine.h// PyNativeDemo//// Created by ç²å°‘ on 2020/4/30.// Copyright Â© 2020 jaki. All rights reserved.//#ifndef BrdgeDefine_h#define BrdgeDefine_h#import &lt;Python/Python.h&gt;#define INTERFACE_INSTANCE + (instancetype)sharedInstance;#define IMPLEMENTATION_INSTANCE \\+ (instancetype)sharedInstance &#123; \\ static id instance = nil; \\ static dispatch_once_t onceToken; \\ dispatch_once(&amp;onceToken, ^&#123; \\ if (!instance) &#123; \\ instance = [[self alloc] init]; \\ &#125; \\ &#125;); \\ return instance; \\&#125;#define SELF_INSTANCE [self.class sharedInstance]#endif /* BrdgeDefine_h */ ç¼–å†™Pythonæ¡¥çš„å¼•æ“ç±»ï¼Œå¦‚ä¸‹ï¼š BridgeEnigine.h: 1234567891011121314#import &lt;Foundation/Foundation.h&gt;#import \"BrdgeDefine.h\"#import &lt;UIKit/UIKit.h&gt;NS_ASSUME_NONNULL_BEGIN@interface BridgeEngine : NSObjectINTERFACE_INSTANCE+ (UIViewController *)setupEngine;@endNS_ASSUME_NONNULL_END BridgeEnigine.m: 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162#import \"BridgeEngine.h\"#import \"DisplayRender.h\"#import \"PythonRun.h\"@interface BridgeEngine ()@end@implementation BridgeEngineIMPLEMENTATION_INSTANCE+ (UIViewController *)setupEngine &#123; [SELF_INSTANCE startEngine]; [SELF_INSTANCE loadLib]; [SELF_INSTANCE runMain]; return [SELF_INSTANCE renderRoot];&#125;- (void)startEngine &#123; NSString* frameworkPath = [NSString stringWithFormat:@\"%@/Resources\",[SELF_INSTANCE p_pythonFrameworkPath]]; wchar_t *pythonHome = [SELF_INSTANCE stingTowWchar_t:frameworkPath]; Py_SetPythonHome(pythonHome); Py_Initialize(); PyEval_InitThreads(); if (Py_IsInitialized()) &#123; NSLog(@\"ğŸ˜„åˆå§‹åŒ–ç¯å¢ƒæˆåŠŸğŸ˜„\"); &#125; else &#123; NSLog(@\"ğŸ˜¢Pythonåˆå§‹åŒ–ç¯å¢ƒå¤±è´¥ğŸ˜¢\"); exit(0); &#125;&#125;- (void)loadLib &#123; NSString *path = [NSString stringWithFormat:@\"import sys\\nsys.path.append(\\\"%@\\\")\",[[NSBundle mainBundle] resourcePath]]; PyRun_SimpleString([path UTF8String]); NSLog(@\"ğŸ˜„libåŠ è½½æˆåŠŸğŸ˜„\");&#125;- (void)runMain &#123; PyObject * pModule = PyImport_ImportModule([@\"main\" UTF8String]);//å¯¼å…¥æ¨¡å— [PythonRun sharedInstance].mainItemDic = PyModule_GetDict(pModule);&#125;- (UIViewController *)renderRoot &#123; return [[DisplayRender sharedInstance] renderRoot:@\"Main\"];&#125;- (wchar_t *)stingTowWchar_t:(NSString*)string &#123; return (wchar_t*)[string cStringUsingEncoding:NSUTF32StringEncoding];&#125;- (NSString*)p_pythonFrameworkPath&#123; NSString* path = [[NSBundle mainBundle] pathForResource:@\"Python\" ofType:@\"framework\"]; return path;&#125;- (void)dealloc &#123; Py_Finalize();&#125;@end å…¶ä¸­æœ‰ä½¿ç”¨åˆ°DisplayRenderï¼Œç”±äºPythonæ²¡æœ‰åŠæ³•ä¸»åŠ¨è°ƒç”¨åŸç”Ÿï¼Œåˆæ­¥è®¾æƒ³ï¼Œè®©è¿™ä¸ªç±»é€šè¿‡å¸§åˆ·æ–°æ¥è´Ÿè´£å¯¹ç•Œé¢çš„æ¸²æŸ“ç»´æŠ¤ï¼Œç¼–ç å¦‚ä¸‹ï¼š DisplayRender.h: 123456789101112131415#import &lt;Foundation/Foundation.h&gt;#import &lt;UIKit/UIKit.h&gt;#import \"BrdgeDefine.h\"NS_ASSUME_NONNULL_BEGIN@interface DisplayRender : NSObjectINTERFACE_INSTANCE- (UIViewController *)renderRoot:(NSString *)main;@endNS_ASSUME_NONNULL_END DisplayRender.m: 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253#import \"DisplayRender.h\"#import \"PythonRun.h\"#import \"BridgeColor.h\"#import \"ViewMaker.h\"@interface DisplayRender ()@property (nonatomic, strong) UIViewController *rootController;@property (nonatomic, strong) NSMutableArray&lt;UIView *&gt; *subViews;@end@implementation DisplayRenderIMPLEMENTATION_INSTANCE- (UIViewController *)renderRoot:(NSString *)main &#123; NSDictionary *root = [[PythonRun sharedInstance] run:[main UTF8String] method:[@\"render_main_view\" UTF8String]]; NSLog(@\"AppLaunchFinishğŸ™…â€â™€ï¸\"); [self renderController:root]; return self.rootController;&#125;- (void)renderController:(NSDictionary *)info &#123; [self.subViews enumerateObjectsUsingBlock:^(UIView * _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) &#123; [obj removeFromSuperview]; &#125;]; [self.subViews removeAllObjects]; NSString *bg = [info objectForKey:@\"color\"]; self.rootController.view.backgroundColor = [BridgeColor colorWith:bg]; NSArray *views = [info objectForKey:@\"subViews\"]; for (NSUInteger i = 0; i &lt; views.count; i++) &#123; id view = [ViewMaker makerView:[views[i] objectForKey:@\"name\"]]; for (NSString *key in [views[i] allKeys]) &#123; if (![key isEqualToString:@\"name\"]) &#123; [view setValue:[views[i] objectForKey:key] forKey:key]; &#125; &#125; [self.subViews addObject:view]; [self.rootController.view addSubview:view]; &#125;&#125;- (UIViewController *)rootController &#123; if (!_rootController) &#123; _rootController = [[UIViewController alloc] init]; &#125; return _rootController;&#125;@end PythonRunæ˜¯ä¸€ä¸ªå·¥å…·ç±»ï¼Œèµ·æ¥è°ƒç”¨Pythonè§£é‡Šå™¨å¯¹Pythonä»£ç è¿›è¡Œæ‰§è¡Œï¼Œå¹¶é€šè¿‡æ•°æ®ä¸åŸç”Ÿç«¯è¿›è¡Œäº¤äº’ï¼Œç¼–ç å¦‚ä¸‹ï¼š PythonRun.h: 12345678910111213141516#import &lt;Foundation/Foundation.h&gt;#import \"BrdgeDefine.h\"NS_ASSUME_NONNULL_BEGIN@interface PythonRun : NSObjectINTERFACE_INSTANCE@property (nonatomic, assign) PyObject *mainItemDic;- (NSDictionary *)run:(const char *)item method:(const char *)method;@endNS_ASSUME_NONNULL_END PythonRun.m: 123456789101112131415161718192021222324252627282930313233343536373839#import \"PythonRun.h\"@implementation PythonRunIMPLEMENTATION_INSTANCE- (NSDictionary *)run:(const char *)item method:(const char *)method &#123; PyObject* pClassCalc = PyDict_GetItemString(self.mainItemDic,item); PyObject* pInstanceCalc = PyInstanceMethod_New(pClassCalc); PyObject* pRet = PyObject_CallMethod(pClassCalc, method, \"O\", pInstanceCalc); return [self dumpInfo:pRet];&#125;- (NSDictionary *)dumpInfo:(PyObject *)pRet &#123; // è§£ææ•°æ® char * resultCString = NULL; PyArg_Parse(pRet, \"s\", &amp;resultCString); //å°†pythonç±»å‹çš„è¿”å›å€¼è½¬æ¢ä¸ºc return [self dumpString:resultCString];&#125;- (NSDictionary *)dumpString:(const char *)resultCString &#123; NSString *jsonString = [NSString stringWithCString:resultCString encoding:NSUTF8StringEncoding]; NSDictionary *info = [NSJSONSerialization JSONObjectWithData:[jsonString dataUsingEncoding:NSUTF8StringEncoding] options:NSJSONReadingMutableContainers error:nil]; NSMutableDictionary *dic = [NSMutableDictionary dictionaryWithDictionary:info]; for (NSString *k in dic.allKeys) &#123; if ([k isEqualToString:@\"subViews\"]) &#123; NSMutableArray *array = [NSMutableArray array]; for (NSUInteger i = 0; i &lt; [dic[k] count]; i++) &#123; [array addObject:[self dumpString:[dic[k][i] UTF8String]]]; &#125; dic[k] = [array copy]; &#125; &#125; NSLog(@\"dumpInfoâ„ï¸:%@\", dic); return [dic copy];&#125;@end é€šè¿‡ä¸Šé¢3ä¸ªæ ¸å¿ƒç±»ï¼Œä¸€ä¸ªç®€æ˜“çš„Pythonå¼•æ“å°±å®Œæ•´äº†ï¼Œä¸‹é¢è¿˜éœ€è¦ç¼–å†™å‡ ä¸ªè½¬æ¢ç±»ï¼Œç”¨æ¥å°†Pythonå¯¹è±¡è½¬æ¢æˆObjective-Cçš„å¯¹è±¡ï¼Œç¼–å†™BridgeColorç±»å¦‚ä¸‹ï¼š BridgeColor.h: 123456789101112#import &lt;Foundation/Foundation.h&gt;#import &lt;UIKit/UIKit.h&gt;NS_ASSUME_NONNULL_BEGIN@interface BridgeColor : NSObject+ (UIColor *)colorWith:(NSString *)c;@endNS_ASSUME_NONNULL_END BridgeColor.m: 1234567891011121314151617#import \"BridgeColor.h\"@implementation BridgeColor+ (UIColor *)colorWith:(NSString *)c &#123; if ([c isEqualToString:@\"red\"]) &#123; return [UIColor redColor]; &#125; else if ([c isEqualToString:@\"white\"]) &#123; return [UIColor whiteColor]; &#125; else if ([c isEqualToString:@\"purple\"]) &#123; return [UIColor purpleColor]; &#125; return [UIColor clearColor];&#125;@end BridgeLabel.h: 12345678910111213141516171819#import &lt;UIKit/UIKit.h&gt;NS_ASSUME_NONNULL_BEGIN@interface BridgeLabel : UILabel@property (nonatomic, strong) NSNumber *left;@property (nonatomic, strong) NSNumber *top;@property (nonatomic, strong) NSNumber *width;@property (nonatomic, strong) NSNumber *height;@property (nonatomic, strong) NSNumber *font_size;@property (nonatomic, copy) NSString *background_color;@property (nonatomic, copy) NSString *t;@property (nonatomic, copy) NSString *color;@endNS_ASSUME_NONNULL_END BridgeLabel.m: 12345678910111213141516171819202122232425262728293031323334353637383940414243444546#import \"BridgeLabel.h\"#import \"BridgeColor.h\"@implementation BridgeLabel- (void)setLeft:(NSNumber *)left &#123; _left = left; self.frame = CGRectMake(left.floatValue, self.frame.origin.y, self.frame.size.width, self.frame.size.height);&#125;- (void)setTop:(NSNumber *)top &#123; _top = top; self.frame = CGRectMake(self.frame.origin.x, top.floatValue, self.frame.size.width, self.frame.size.height);&#125;- (void)setWidth:(NSNumber *)width &#123; _width = width; self.frame = CGRectMake(self.frame.origin.x, self.frame.origin.y, width.floatValue, self.frame.size.height);&#125;- (void)setHeight:(NSNumber *)height &#123; _height = height; self.frame = CGRectMake(self.frame.origin.x, self.frame.origin.y, self.frame.size.width, height.floatValue);&#125;- (void)setColor:(NSString *)color &#123; _color = color; self.textColor = [BridgeColor colorWith:color];&#125;- (void)setT:(NSString *)t &#123; _t = t; self.text = t;&#125;- (void)setFont_size:(NSNumber *)font_size &#123; _font_size = font_size; self.font = [UIFont systemFontOfSize:font_size.intValue];&#125;- (void)setBackground_color:(NSString *)background_color &#123; _background_color = background_color; self.backgroundColor = [BridgeColor colorWith:background_color];&#125;@end ViewMaker.h: 1234567891011#import &lt;Foundation/Foundation.h&gt;NS_ASSUME_NONNULL_BEGIN@interface ViewMaker : NSObject+ (id)makerView:(NSString *)name;@endNS_ASSUME_NONNULL_END ViewMaker.m: 12345678910111213#import \"ViewMaker.h\"#import \"BridgeLabel.h\"@implementation ViewMaker+ (id)makerView:(NSString *)name &#123; if ([name isEqualToString:@\"Label\"]) &#123; return [[BridgeLabel alloc] init]; &#125; return nil;&#125;@end å››ã€ç¼–å†™Pythonä¸šåŠ¡ä»£ç åœ¨é¡¹ç›®ä¸­æ·»åŠ ä¸¤ä¸ªPythonæ–‡ä»¶ï¼Œä¸€ä¸ªå‘½åä¸ºmain.pyä½œä¸ºåº”ç”¨ç¨‹åºçš„å…¥å£æ–‡ä»¶ï¼Œä¸€ä¸ªå‘½åä¸ºlabel.pyä½œä¸ºæ ‡ç­¾ç»„ä»¶ï¼Œmain.pyæ–‡ä»¶ç¼–å†™ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829import jsonfrom label import *class Main(): def application_Launch(self): pass def render_main_view(self): l = Label(\"HelloWorld\") l.color = \"red\" l.font_size = 21 l.background_color = \"white\" l.left = 100 l.top = 100 l.width = 200 l.height = 30 l2 = Label(\"hhahha\") l2.color = \"red\" l2.font_size = 21 l2.background_color = \"white\" l2.left = 100 l2.top = 300 l2.width = 200 l2.height = 30 return json.dumps(&#123; \"color\": \"purple\", \"subViews\": [l.render(), l2.render()] &#125;) label.pyç¼–å†™ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425import jsonclass Label: def __init__(self, text): self.t = text self.color = \"\" self.left = 0 self.top = 0 self.width = 0 self.height = 0 self.font_size = 0 self.background_color = \"\" def render(self): return json.dumps(&#123; \"name\": \"Label\", \"t\": self.t, \"color\": self.color, \"left\": self.left, \"top\": self.top, \"width\": self.width, \"height\": self.height, \"font_size\": self.font_size, \"background_color\": self.background_color &#125;) åˆ°æ­¤ï¼Œä¸€ä¸ªç®€æ˜“çš„Python iOSåº”ç”¨Demoå·¥ç¨‹å°±æ­å»ºå®Œæˆäº†ï¼Œä¸Šé¢ä»£ç åˆ›å»ºäº†ä¸¤ä¸ªæ–‡æœ¬æ ‡ç­¾åœ¨é¡µé¢ä¸Šï¼Œå¹¶å¯¹ç»„ä»¶çš„éƒ¨åˆ†å±æ€§è¿›è¡Œäº†é…ç½®ï¼Œä¸Šé¢å®ç°çš„æ¯ä¸ªç±»éƒ½éå¸¸ç®€å•ï¼Œä½œä¸ºæ€è·¯çš„æ¼”ç¤ºï¼Œåç»­æœ‰æ—¶é—´ä¼šç»§ç»­è¡¥å……å®Œå–„ï¼Œå¹¶é€šè¿‡åšå®¢è¿›è¡Œè¿è½½ä»‹ç»ï¼Œä¸Šé¢å·¥ç¨‹çš„è¿è¡Œæ•ˆæœå¦‚ä¸‹å›¾ï¼š äº”ã€åç»­è®¾æƒ³ é€šè¿‡DisplayLinkæ¥è¿›è¡Œé¡µé¢çš„å˜æ›´åˆ·æ–°ï¼Œä¸ºç»„ä»¶å¢åŠ IDï¼Œè®¾è®¡ä¸€ç§ç®—æ³•æ¥å®ç°é«˜æ•ˆçš„é¡µé¢åˆ·æ–°ã€‚ å°†ç»„ä»¶çš„åŠŸèƒ½å®Œå–„ï¼Œæ·»åŠ æ›´å¤šåŸç”Ÿç»„ä»¶çš„æ”¯æŒã€‚ å°†äº‹ä»¶è¿›è¡ŒåŒ…è£…ï¼Œå®šä¹‰å›è°ƒå‡½æ•°ï¼Œè®©Pythonç«¯æœ‰ç”¨å¤„ç†äº‹ä»¶çš„èƒ½åŠ›ã€‚ å¢åŠ æ›´å¤šå·¥å…·æ¥å£ï¼Œå¦‚ç½‘ç»œï¼Œæ•°æ®æ–‡ä»¶æ“ä½œç­‰ã€‚ æœ¬ç¯‡åšå®¢å†…å®¹æ¯”è¾ƒç¼©ç•¥ï¼Œä½ å¯ä»¥åœ¨å¦‚ä¸‹åœ°å€æ‰¾åˆ°å®Œæ•´çš„Demoå·¥ç¨‹ï¼š https://github.com/ZYHshao/PyNativeDemo/tree/master/PyNativeDemo éœ€è¦æ³¨æ„ï¼Œå·¥ç¨‹è¾ƒå¤§ï¼ŒåŸå› æ˜¯æˆ‘å°†Pythonåº“ä¹Ÿæ”¾äº†è¿›å»ï¼Œè¿™æ ·å¯ä»¥ä¿è¯ä½ ä¸‹è½½çš„ä»£ç æ˜¯å¯è¿è¡Œçš„ã€‚","categories":[{"name":"ä¸‡è¨€å½’å®—","slug":"ä¸‡è¨€å½’å®—","permalink":"http://huishao.cc/categories/ä¸‡è¨€å½’å®—/"}],"tags":[],"keywords":[{"name":"ä¸‡è¨€å½’å®—","slug":"ä¸‡è¨€å½’å®—","permalink":"http://huishao.cc/categories/ä¸‡è¨€å½’å®—/"}]},{"title":"å±æ€§â€œ__attribute__â€åœ¨Objective-Cä¸­çš„åº”ç”¨","slug":"398å±æ€§â€œ__attribute__â€åœ¨Objective-Cä¸­çš„åº”ç”¨","date":"2020-04-26T16:00:00.000Z","updated":"2021-07-15T11:23:16.499Z","comments":true,"path":"2020/04/27/398å±æ€§â€œ__attribute__â€åœ¨Objective-Cä¸­çš„åº”ç”¨/","link":"","permalink":"http://huishao.cc/2020/04/27/398å±æ€§â€œ__attribute__â€åœ¨Objective-Cä¸­çš„åº”ç”¨/","excerpt":"","text":"å±æ€§â€œ__attribute__â€åœ¨Objective-Cä¸­çš„åº”ç”¨å…³äº\\_\\_attribute\\_\\_ï¼Œä½ å¯èƒ½ç”¨çš„ä¸å¤šï¼Œä½†æ˜¯ä¸€å®šç»å¸¸è§åˆ°ï¼Œåœ¨ç³»ç»Ÿçš„Foundationæ¡†æ¶ä¸­ï¼Œ\\_\\_attribute\\_\\_çš„ä½¿ç”¨éå¸¸é¢‘ç¹ã€‚é¦–å…ˆï¼Œ\\_\\_attribute\\_\\_ç”¨äºåœ¨å‡½æ•°ï¼Œå˜é‡æˆ–ç±»å‹å£°æ˜æ—¶è¿›è¡Œç‰¹æ®Šå±æ€§è®¾ç½®çš„ç¼–è¯‘å™¨æŒ‡ä»¤ã€‚éœ€è¦æ³¨æ„ï¼Œå®ƒæ˜¯ä¸€ç§ç¼–è¯‘å™¨æŒ‡ä»¤ï¼Œè¿™ä¹Ÿå°±è¡¨æ˜äº†ä½¿ç”¨å®ƒæˆ‘ä»¬å¯ä»¥åšæ›´é«˜çº§çš„æ£€æŸ¥ä¸ä¼˜åŒ–åŠŸèƒ½ã€‚ __attribute__æ ¹æ®å…¶ä¿®é¥°çš„åœºæ™¯ä¸åŒå¯ä»¥åˆ†ä¸º3ç§ç±»å‹ï¼Œåˆ†åˆ«ä¸ºå‡½æ•°å±æ€§ï¼Œå˜é‡å±æ€§å’Œç±»å‹å±æ€§ã€‚__attribute__çš„ä½¿ç”¨æ ¼å¼å¦‚ä¸‹ï¼š 1__attribute__((å±æ€§åˆ—è¡¨)) ä¸‹é¢ï¼Œæˆ‘ä»¬æ¥ä»‹ç»å‡ ç§å¸¸ç”¨çš„__attribute__å±æ€§ã€‚ 1.formatformatç”¨æ¥å¯¹æ ¼å¼åŒ–å­—ç¬¦ä¸²çš„å‚æ•°ä½¿ç”¨æƒ…å†µè¿›è¡Œæ£€æŸ¥ï¼Œä¾‹å¦‚åœ¨ä½¿ç”¨NSLogå‡½æ•°è¿›è¡Œè¾“å‡ºæ—¶ï¼Œå¦‚æœæˆ‘ä»¬ä¼ å…¥çš„å¯å˜å‚æ•°æ²¡æœ‰åœ¨æ ¼å¼åŒ–å­—ç¬¦ä¸²ä¸­ä½¿ç”¨ï¼Œç¼–è¯‘å™¨ä¼šæç¤ºè­¦å‘Šï¼Œå¦‚ä¸‹ï¼š å…¶å®è¿™ä¸ªæç¤ºè­¦å‘Šçš„åŠŸèƒ½å°±æ˜¯å€ŸåŠ©__attribute__çš„formatå±æ€§å®ç°çš„ï¼Œä¾‹å¦‚æˆ‘ä»¬è‡ªå®šä¹‰ä¸€ä¸ªLOGæ–¹æ³•ä½¿å…¶æ‹¥æœ‰ç›¸åŒçš„åŠŸèƒ½ï¼Œå¦‚ä¸‹ï¼š 1void MyLog(NSString *format, ...) __attribute__((format(__NSString__, 1, 2))); formatå±æ€§æœ‰3ä¸ªå‚æ•°å¯ä»¥è®¾ç½®ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šè¦æ£€æŸ¥çš„æ ¼å¼åŒ–é£æ ¼ï¼Œè¿™é‡Œè®¾ç½®ä¸ºNSStringçš„æ ¼å¼åŒ–é£æ ¼ï¼Œç¬¬2ä¸ªå‚æ•°ä¸ºæ ¼å¼åŒ–å­—ç¬¦ä¸²å‚æ•°çš„ä½ç½®ï¼Œä»1å¼€å§‹ï¼Œç¬¬3ä¸ªå‚æ•°ä¸ºå¯¹åº”çš„æ ¼å¼åŒ–å¯å˜å‚æ•°çš„ä½ç½®ã€‚ 2.deprecateddeprecatedå¯ä»¥æŒ‡å®šè¢«ä¿®é¥°çš„å‡½æ•°åœ¨ç¼–è¯‘æ—¶äº§ç”Ÿè­¦å‘Šï¼Œè¡¨ç¤ºè¿™ä¸ªå‡½æ•°å·²ç»è¿‡æœŸï¼Œæç¤ºå¼€å‘è€…è°¨æ…ä½¿ç”¨ï¼Œä¾‹å¦‚ï¼š deprecatedå±æ€§ä¹Ÿå¯ä»¥æ·»åŠ ä¸€ä¸ªå‚æ•°æ¥æŒ‡å®šè¦è¾“å‡ºçš„è­¦å‘Šä¿¡æ¯ï¼Œä¾‹å¦‚ï¼š 3. availabilityè¿™ä¸ªå±æ€§ç”¨æ¥æŒ‡å®šæ¥å£çš„å¯ç”¨ç‰ˆæœ¬ï¼Œä¾‹å¦‚æŒ‡å®šå¯ç”¨çš„å¹³å°ï¼Œæ¥å£å¼•å…¥çš„ç‰ˆæœ¬ï¼ŒåºŸå¼ƒçš„ç‰ˆæœ¬ï¼Œä¸å¯ç”¨çš„ç‰ˆæœ¬ä»¥åŠæç¤ºä¿¡æ¯ç­‰ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š å…¶ä¸­ï¼Œç¬¬1ä¸ªå‚æ•°æŒ‡å®šAPIå¯ç”¨çš„å¹³å°ï¼Œå¯é€‰åˆ™ä¸ºmacosæˆ–iosï¼Œintroducedå‚æ•°è®¾ç½®APIå¼•å…¥çš„ç³»ç»Ÿç‰ˆæœ¬ï¼Œdeprecatedå‚æ•°è®¾ç½®APIåºŸå¼ƒçš„ç‰ˆæœ¬ï¼Œobsoletedå‚æ•°ç”¨æ¥è®¾ç½®APIä¸å¯ä½¿ç”¨çš„ç‰ˆæœ¬ã€‚ä¸availabilityå±æ€§ç›¸ä¼¼ï¼Œè¿˜æœ‰ä¸€ä¸ªunavailabelå±æ€§å¯ç”¨ï¼Œè¿™ä¸ªå±æ€§ç›´æ¥å°†æŸä¸ªAPIæ ‡è®°ä¸ºä¸å¯ç”¨ï¼Œä¾‹å¦‚ï¼š 4. nonnullnonnullå±æ€§ç”¨æ¥æŒ‡å®šæŸäº›æŒ‡é’ˆå‚æ•°ä¸èƒ½ä¸ºç©ºï¼Œå…¶å†…å¯ä»¥ä¼ å…¥ä¸€ç»„ä¸‹æ ‡(ä»1å¼€å§‹)ï¼Œè¢«ä¸‹æ ‡æŒ‡å®šçš„å‚æ•°ä¸å¯ä¸ºç©ºï¼Œä¾‹å¦‚ï¼š 5. constconstå±æ€§æ˜¯ä¸€ç§ç¼–è¯‘ä¼˜åŒ–åŠŸèƒ½ï¼Œå…¶å¯ä»¥å°†æŸä¸ªå‡½æ•°æŒ‡å®šä¸ºconstç±»å‹çš„ï¼Œè¿™æ—¶ä¼šå°†å‡½æ•°çš„è¿”å›å€¼å½“åšconstå˜é‡æ¥ä½¿ç”¨ï¼Œè¿™æ—¶å¦‚æœæ²¡æœ‰ä½¿ç”¨åˆ°è¿”å›å€¼ï¼Œåˆ™å‡½æ•°æœ¬èº«ä¼šè¢«ä¼˜åŒ–ï¼Œé¿å…æ‰§è¡Œé€ æˆé¢å¤–çš„æ€§èƒ½æ¶ˆè€—ï¼Œä¾‹å¦‚ï¼š 5. cleanupcleanupå±æ€§å¯ä»¥å®ç°ä¸€ä¸ªéå¸¸å¼ºå¤§çš„åŠŸèƒ½ï¼Œå®ƒæœ‰è¿™æ ·çš„ä¸€ç§ç‰¹ç‚¹ï¼Œå¯ä»¥ä¸ºæŸä¸ªå˜é‡æŒ‡å®šä¸€ä¸ªæ¸…ç†å‡½æ•°ï¼Œå½“å˜é‡ç¦»å¼€å…¶ä½œç”¨åŸŸçš„æ—¶å€™ï¼Œä¼šè°ƒç”¨è¿™ä¸ªæ¸…ç†å‡½æ•°ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112void clean(int *p) &#123; NSLog(@\"å˜é‡%dè¢«æ¸…ç†\", *p);&#125;int main(int argc, const char * argv[]) &#123; @autoreleasepool &#123; int a __attribute__((cleanup(clean))) = 10; a = 20; &#125; // ç¦»å¼€ä½œç”¨åŸŸå å°†æ‰“å° å˜é‡20è¢«æ¸…ç† return 0;&#125; éœ€è¦æ³¨æ„ï¼ŒæŒ‡å®šçš„æ¸…ç†å‡½æ•°ä¼šå°†å½“å‰å˜é‡çš„æŒ‡é’ˆä½œä¸ºå‚æ•°ä¼ å…¥ã€‚ 6. constructorä¸destructorconstructorå±æ€§å¯ä»¥æŒ‡å®šå‡½æ•°åœ¨mainå‡½æ•°æ‰§è¡Œä¹‹å‰è¿›è¡Œè°ƒç”¨ï¼Œä¸ä¹‹å¯¹åº”destructorå¯ä»¥æŒ‡å®šæŸä¸ªå‡½æ•°åœ¨mainå‡½æ•°æ‰§è¡Œç»“æŸä¹‹åå†æ‰§è¡Œã€‚è¿™æ˜¯ä¸€ç§éå¸¸å¼ºå¤§çš„æœºåˆ¶ï¼Œåœ¨å®é™…åº”ç”¨ä¸­ä¹Ÿéå¸¸é¢‘ç¹ï¼Œä¾‹å¦‚å¯¹ä»¥ä¸€ä¸ªæ‹¥æœ‰æ¨¡å—åŒ–å’Œè·¯ç”±åŠŸèƒ½çš„åº”ç”¨ç¨‹åºï¼Œå¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼æ¥è‡ªåŠ¨åŒ–çš„è¿›è¡Œè·¯ç”±æ³¨å†Œ(æ— éœ€æ‰‹åŠ¨è°ƒç”¨)ï¼Œéœ€è¦æ³¨æ„ï¼Œconstructorä¸destructorå±æ€§éƒ½å¯ä»¥è®¾ç½®ä¸€ä¸ªä¼˜å…ˆçº§å‚æ•°ï¼Œä¼˜å…ˆçº§é«˜çš„å‡½æ•°ä¼šå…ˆæ‰§è¡Œ(0-100çš„ä¼˜å…ˆçº§ä¸ºç³»ç»Ÿä¿ç•™)ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031void __attribute__((constructor(101))) func1() &#123; NSLog(@\"Func1\");&#125;void __attribute__((constructor(102))) func2() &#123; NSLog(@\"Func2\");&#125;void __attribute__((destructor(101))) func3() &#123; NSLog(@\"Func3\");&#125;void __attribute__((destructor(102))) func4() &#123; NSLog(@\"Func4\");&#125;// ä¼šä¾æ¬¡æ‰“å°/* 2020-04-27 16:05:57.270522+0800 TestDemo[33430:13458931] Func1 2020-04-27 16:05:57.271017+0800 TestDemo[33430:13458931] Func2 2020-04-27 16:05:57.271193+0800 TestDemo[33430:13458931] mainå‡½æ•°æ‰§è¡Œ 2020-04-27 16:05:57.271273+0800 TestDemo[33430:13458931] Func4 2020-04-27 16:05:57.271316+0800 TestDemo[33430:13458931] Func3 */int main(int argc, const char * argv[]) &#123; @autoreleasepool &#123; NSLog(@\"mainå‡½æ•°æ‰§è¡Œ\"); &#125; return 0;&#125; 7. objc_subclassing_restrictedè¿™æ˜¯Objective-Cä¸­å¸¸ç”¨çš„ä¸€ä¸ªå±æ€§ï¼Œæœ‰æ—¶å€™ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªç±»ï¼Œä½†æ˜¯ä¸å¸Œæœ›å†æœ‰å…¶ä»–çš„ç±»ç»§æ‰¿äºå®ƒï¼Œå³æˆ‘ä»¬è¦å®šä¹‰çš„ç±»æœ¬èº«å°±æ˜¯ä¸€ä¸ªæœ€ç»ˆç±»ï¼Œä¸èƒ½å†è¢«ç»§æ‰¿ï¼Œè¿™æ˜¯å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªå±æ€§æ¥ä¿®é¥°ï¼Œå¦‚æœæœ‰ç±»ç»§æ‰¿å®ƒä¼šæŠ¥ç¼–è¯‘é”™è¯¯ï¼Œä¾‹å¦‚ï¼š 8. objc_requires_superè¿™ä¸ªå±æ€§ç”¨æ¥ä¿®é¥°Objective-Cä¸­çˆ¶ç±»çš„æ–¹æ³•ï¼Œå¦‚æœå­ç±»è¿›è¡Œäº†é‡å†™ï¼Œåœ¨é‡å†™çš„æ–¹æ³•ä¸­æ²¡æœ‰è°ƒç”¨çˆ¶ç±»æ–¹æ³•ï¼Œåˆ™ä¼šè¿›è¡Œç¼–è¯‘å™¨æç¤ºã€‚åœ¨å®é™…ç¼–ç¨‹ä¸­ï¼Œå¾ˆå¤šæ—¶å€™ï¼Œéƒ½æ˜¯ç”±äºå­ç±»é‡å†™äº†çˆ¶ç±»çš„æ–¹æ³•é€ æˆä¸å¯é¢„çŸ¥çš„é—®é¢˜ï¼Œé€šè¿‡ä½¿ç”¨è¿™ä¸ªå±æ€§å¯ä»¥æœ‰æ•ˆçš„å¯¹å¼€å‘è€…è¿›è¡Œæç¤ºï¼Œä¾‹å¦‚ï¼š 9. enable_ifenable_ifæä¾›äº†ä¸€ç§æ–¹å¼å¯¹å‡½æ•°çš„å‚æ•°è¿›è¡Œæ ¡éªŒï¼Œä¸æ»¡è¶³æ ¡éªŒè§„åˆ™çš„å‚æ•°ä¼ é€’å°†åœ¨ç¼–è¯‘æ—¶æŠ¥é”™ï¼Œä½¿å¾—å‡½æ•°çš„ä½¿ç”¨æ›´åŠ å®‰å…¨ï¼Œä¾‹å¦‚ï¼š è¿™ç§ç¼–è¯‘æ—¶å³å¯å¯¹å‡½æ•°å‚æ•°è¿›è¡Œæ£€æŸ¥çš„æœºåˆ¶å¯ä»¥é¿å…å†™å¾ˆå¤šè¿è¡Œæ—¶çš„ä»£ç ï¼Œå¹¶ä¸”æ¯”è¿è¡Œæ—¶æ›´é«˜æ•ˆçš„è§„é¿é”™è¯¯ã€‚ 10. overloadableåœ¨Cè¯­è¨€ä¸­ï¼Œå¯¹äºç›¸åŒçš„å‡½æ•°åï¼Œå“ªæ€•å‚æ•°ä¸åŒï¼Œä¹Ÿä¸èƒ½å¤Ÿé‡å¤å®šä¹‰ã€‚overliadableå±æ€§å¯ä»¥æŒ‡å®šæŸä¸ªå‡½æ•°ä¸ºå¯é‡è½½ï¼Œè¿™æ ·æ—¢å¯å®šä¹‰åå­—ç›¸å…³å‚æ•°ä¸åŒçš„å¤šä¸ªCå‡½æ•°ï¼Œåœ¨è°ƒç”¨æ—¶ï¼Œç¼–è¯‘å™¨ä¼šæ ¹æ®ä¼ å…¥çš„å‚æ•°ç±»å‹è‡ªè¡Œåˆ¤æ–­å…·ä½“è°ƒç”¨å“ªä¸ªå‡½æ•°ï¼Œå¦‚ä¸‹ï¼š 11. objc_runtime_nameè¿™æ˜¯ä¸€ä¸ªå¾ˆæœ‰è¶£çš„å±æ€§ï¼Œå…¶å¯ä»¥è¿è¡Œæ—¶æ”¹å˜Objective-Cç±»çš„ç±»åï¼Œä½†æ˜¯ä¸ä¼šå½±å“å…¶è¡Œä¸ºã€‚è¿™ä¸ªå±æ€§é€šå¸¸å¯ä»¥ç”¨æ¥åšä»£ç æ··æ·†åŠ å¯†ï¼Œä¾‹å¦‚ï¼š 1234567891011121314151617181920212223__attribute__((objc_runtime_name(\"Some\")))@interface MyObject : NSObject- (void)myObject:(int)param;@end@implementation MyObject- (void)myObject:(int)param &#123; NSLog(@\"myObject\");&#125;@endint main(int argc, const char * argv[]) &#123; @autoreleasepool &#123; MyObject *object = [[MyObject alloc] init]; [object myObject:1]; NSLog(@\"%@\", [object class]); // Some &#125; return 0;&#125; ä¸Šé¢çš„ä»£ç å¯ä»¥å¾ˆå¥½çš„è¿è¡Œï¼Œä½†æ˜¯åœ¨æ‰“å°å…¶ç±»å‹æ—¶å´ä¼šæ‰“å°å‡ºä¸€ä¸ªè«åå…¶å¦™çš„Someï¼Œéœ€è¦æ³¨æ„ï¼Œè¿™ä¸ªå±æ€§è¦è°¨æ…ä½¿ç”¨ï¼Œå…¶æœ‰æ—¶å€™ä¹Ÿä¼šéå¸¸å±é™©ï¼Œä¾‹å¦‚ä»£ç ä¸­æœ‰åšè¿™æ ·çš„é€»è¾‘å°±ä¼šäº§ç”ŸæœªçŸ¥çš„å¼‚å¸¸ï¼Œå¹¶ä¸”å¾ˆéš¾å®šä½ï¼š 1[[object className] isEqualToString:@\"MyObject\"] é™¤äº†ä¸Šé¢ä»‹ç»çš„11ä¸­å¸¸ç”¨çš„å±æ€§å¤–ï¼Œå¯ç”¨çš„å±æ€§è¿˜æœ‰å¾ˆå¤šï¼Œä¾‹å¦‚å¯¹å†…å­˜çš„åˆ†é…è¿›è¡Œç®¡ç†çš„å±æ€§ï¼Œå¯¹åˆå§‹åŒ–æ–¹æ³•è¿›è¡Œä¿®é¥°çš„å±æ€§ç­‰ï¼Œå¦‚æœæœ‰å…´è¶£ï¼Œå¯ä»¥å‚è€ƒå¦‚ä¸‹æ–‡æ¡£ï¼š https://gcc.gnu.org/onlinedocs/gcc-4.0.0/gcc/Function-Attributes.html ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š805263726","categories":[{"name":"Objective-Cæµ…æ¢","slug":"Objective-Cæµ…æ¢","permalink":"http://huishao.cc/categories/Objective-Cæµ…æ¢/"}],"tags":[],"keywords":[{"name":"Objective-Cæµ…æ¢","slug":"Objective-Cæµ…æ¢","permalink":"http://huishao.cc/categories/Objective-Cæµ…æ¢/"}]},{"title":"ç©è½¬iOSâ€œå®å®šä¹‰â€","slug":"397ç©è½¬iOSâ€œå®å®šä¹‰â€","date":"2020-04-21T16:00:00.000Z","updated":"2021-07-15T11:22:16.134Z","comments":true,"path":"2020/04/22/397ç©è½¬iOSâ€œå®å®šä¹‰â€/","link":"","permalink":"http://huishao.cc/2020/04/22/397ç©è½¬iOSâ€œå®å®šä¹‰â€/","excerpt":"","text":"ç©è½¬iOSâ€œå®å®šä¹‰â€å®å®šä¹‰åœ¨Cç±»è¯­è¨€ä¸­éå¸¸é‡è¦ï¼Œå› ä¸ºå®æ˜¯ä¸€ç§é¢„ç¼–è¯‘æ—¶çš„åŠŸèƒ½ï¼Œå› æ­¤å…¶å¯ä»¥æ¯”è¿è¡Œæ—¶æ›´é«˜å±‚é¢çš„å¯¹ç¨‹åºæµç¨‹è¿›è¡Œæ§åˆ¶ã€‚åœ¨åˆå­¦å®å®šä¹‰çš„æ—¶å€™ï¼Œå¤§å®¶å¯èƒ½éƒ½ä¼šæœ‰è¿™æ ·ä¸€ç§æ„Ÿè§‰ï¼šå°±æ˜¯å®Œå…¨æ›¿æ¢ä¹ˆï¼Œå¤ªç®€å•äº†ã€‚ä½†å¦‚æœä½ çœŸè¿™ä¹ˆæƒ³ï¼Œé‚£ä½ å°±å¤ªå¤©çœŸäº†ï¼Œä¸è¯´è‡ªå·±ç¼–å†™å®ï¼Œåœ¨Foundationæ¡†æ¶ä¸­å†…ç½®å®šä¹‰çš„è®¸å¤šå®è¦çœ‹æ˜ç™½ä¹Ÿè¦è´¹ä¸€ç•ªè„‘ç­‹ã€‚æœ¬ç¯‡åšå®¢ï¼Œæ€»ç»“äº†å‰è¾ˆçš„ç»éªŒï¼ŒåŒæ—¶æ”¶é›†äº†ä¸€äº›ç¼–å†™éå¸¸å·§å¦™çš„å®è¿›è¡Œåˆ†æï¼Œå¸Œæœ›å¯ä»¥å¸®åŠ©å¤§å®¶å¯¹å®å®šä¹‰æœ‰æ›´åŠ æ·±åˆ»çš„ç†è§£ï¼Œå¹¶ä¸”å¯ä»¥å°†å¿ƒå¾—åº”ç”¨äºå®é™…å¼€å‘ä¸­ã€‚ ä¸€ã€å‡†å¤‡å®çš„æœ¬è´¨æ˜¯é¢„ç¼–è¯‘æ—¶çš„æ›¿æ¢ï¼Œåœ¨å¼€å§‹æ­£æ–‡ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆä»‹ç»ä¸€ç§è§‚å¯Ÿå®æ›¿æ¢åç»“æœçš„æ–¹æ³•ï¼Œè¿™æ ·å¸®åŠ©æˆ‘ä»¬æ›´æ–¹ä¾¿çš„å¯¹å®æœ€ç»ˆçš„ç»“æœè¿›è¡ŒéªŒè¯ä¸æµ‹è¯•ã€‚Xcodeå¼€å‘å·¥å…·è‡ªå¸¦æŸ¥çœ‹é¢„ç¼–è¯‘ç»“æœçš„åŠŸèƒ½ï¼Œé¦–å…ˆéœ€è¦å¯¹å·¥ç¨‹ç¼–è¯‘ä¸€éï¼Œä¹‹åé€‰æ‹©å·¥å…·æ ä¸­çš„Assistanté€‰é¡¹ï¼Œæ‰“å¼€åŠ©æ‰‹çª—å£ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¹‹åé€‰æ‹©çª—å£çš„Preprocessé€‰é¡¹ï¼Œå³å¯æ‰“å¼€é¢„ç¼–è¯‘ç»“æœçª—å£ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œå®è¢«æ›¿æ¢åçš„æœ€ç»ˆç»“æœï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š åé¢ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨è¿™ç§æ–¹å¼æ¥å¯¹ç¼–å†™çš„å®è¿›è¡ŒéªŒè¯ã€‚ äºŒã€å…³äºâ€œå®å®šä¹‰â€å®ä½¿ç”¨#defineæ¥è¿›è¡Œå®šä¹‰ï¼Œå®å®šä¹‰åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯å¯¹è±¡å¼å®ï¼Œä¸€ç§æ˜¯å‡½æ•°å¼å®ã€‚å¯¹è±¡å¼å®é€šå¸¸å¯¹æ¥å®šä¹‰é‡å€¼ï¼Œåœ¨é¢„ç¼–è¯‘æ—¶ï¼Œç›´æ¥å°†å®åæ›¿æ¢æˆå¯¹åº”çš„é‡å€¼ï¼Œå‡½æ•°å¼å®åœ¨å®šä¹‰æ—¶å¯ä»¥è®¾ç½®å‚æ•°ï¼Œå…¶ä½œç”¨ä¸å‡½æ•°å¾ˆç±»ä¼¼ã€‚ ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å°†Ï€çš„å€¼å®šä¹‰æˆä¸€ä¸ªå¯¹è±¡å¼å®ï¼Œåœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œç”¨æœ‰æ„ä¹‰çš„å®åè¦æ¯”ç›´æ¥ä½¿ç”¨Ï€çš„å­—é¢å€¼æ–¹ä¾¿å¾ˆå¤šï¼Œä¾‹å¦‚ï¼š 12345678910#import &lt;Foundation/Foundation.h&gt;#define PI 3.1415926int main(int argc, const char * argv[]) &#123; @autoreleasepool &#123; // insert code here... CGFloat res = PI * 3; NSLog(@\"%f\", res); &#125; return 0;&#125; å‡½æ•°å¼å®è¦æ›´åŠ çµæ´»ä¸€äº›ï¼Œä¾‹å¦‚å¯¹åœ†é¢ç§¯è®¡ç®—çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†å…¶å®šä¹‰æˆä¸€ä¸ªå®ï¼š 12345678910#define PI 3.1415926#define CircleArea(r) PI * r * rint main(int argc, const char * argv[]) &#123; @autoreleasepool &#123; // insert code here... CGFloat res = CircleArea(1); NSLog(@\"%f\", res); &#125; return 0;&#125; ç°åœ¨ï¼Œæœ‰äº†è¿™ä¸ªé¢ç§¯è®¡ç®—å®æˆ‘ä»¬å¯ä»¥æ›´åŠ æ–¹ä¾¿çš„è®¡ç®—åœ†çš„é¢ç§¯äº†ï¼Œçœ‹ä¸Šå»å¾ˆå®Œç¾ï¼Œåé¢æˆ‘ä»¬å°±ä½¿ç”¨è¿™ä¸ªå‡½æ•°å¼å®ä¸ºä¾‹ï¼Œæ¥æ·±å…¥ç†è§£å®çš„åŸç†ã€‚ ä¸‰ã€ä»ä¸€ä¸ªç®€å•çš„å‡½æ•°å¼å®è¯´èµ·å†æ¥çœ‹ä¸‹ä¸Šé¢æˆ‘ä»¬ç¼–å†™çš„è®¡ç®—é¢ç§¯çš„å®ï¼Œæ­£å¸¸æƒ…å†µä¸‹å¥½åƒæ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„ï¼Œå½’æ ¹ç»“åº•å®å¹¶ä¸æ˜¯å‡½æ•°ï¼Œå¦‚æœå®Œå…¨æŠŠå…¶ä½œä¸ºå‡½æ•°ä½¿ç”¨ï¼Œæˆ‘ä»¬å°±å¯èƒ½ä¼šé™·å…¥ä¸€ç³»åˆ—çš„é™·é˜±ä¸­ï¼Œæ¯”å¦‚è¿™æ ·ä½¿ç”¨ï¼š 12345678910#define PI 3.1415926#define CircleArea(r) PI * r * rint main(int argc, const char * argv[]) &#123; @autoreleasepool &#123; // insert code here... CGFloat res = CircleArea(1 + 1); NSLog(@\"%f\", res); &#125; return 0;&#125; è¿è¡Œä»£ç ï¼Œè¿ç®—çš„ç»“æœå¹¶ä¸æ˜¯åŠå¾„ä¸º2ä¸ªåœ†çš„é¢ç§¯ï¼Œå“ªé‡Œå‡ºäº†é—®é¢˜å‘¢ï¼Œæˆ‘ä»¬è¿˜æ˜¯å…ˆçœ‹ä¸‹å®é¢„ç¼–è¯‘åçš„ç»“æœï¼š 1CGFloat res = 3.1415926 * 1 + 1 * 1 + 1; ä¸€ç›®äº†ç„¶äº†ï¼Œç”±äºè¿ç®—ç¬¦çš„ä¼˜å…ˆçº§é—®é¢˜å¯¼è‡´äº†è¿ç®—é¡ºåºé”™è¯¯ï¼Œåœ¨ç¼–ç¨‹ä¸­ï¼Œæ‰€æœ‰è¿ç®—ç¬¦ä¼˜å…ˆçº§äº§ç”Ÿçš„é—®é¢˜éƒ½å¯ä»¥ä½¿ç”¨ä¸€ç§æ–¹å¼è§£å†³ï¼šç”¨å°æ‹¬å·ã€‚å¯¹CircleAreaå®è¿›è¡Œä¸€ä¸‹æ”¹é€ ï¼Œå¦‚ä¸‹ï¼š 1#define CircleArea(r) (PI * (r) * (r)) å¯¹æ‰§è¡Œé¡ºåºè¿›è¡Œäº†å¼ºåˆ¶çš„æ§åˆ¶ï¼Œä»£ç æ‰§è¡Œåˆæ¢å¤äº†æ­£å¸¸ï¼Œçœ‹ä¸Šå»å¥½åƒæ˜¯æ²¡æœ‰é—®é¢˜äº†ï¼Œç°åœ¨å°±æ»¡æ„äº†è¿˜ä¸ºæ—¶è¿‡æ—©ï¼Œä¾‹å¦‚ä¸‹é¢è¿™æ ·ä½¿ç”¨è¿™ä¸ªå®ï¼š 123456789101112#import &lt;Foundation/Foundation.h&gt;#define PI 3.1415926#define CircleArea(r) PI * (r) * (r)int main(int argc, const char * argv[]) &#123; @autoreleasepool &#123; // insert code here... int r = 1; CGFloat res = CircleArea(r++); NSLog(@\"%f, %d\", res, r); &#125; return 0;&#125; è¿è¡Œï¼Œå‘ç°ç»“æœåˆé”™äº†ï¼Œä¸ä»…è®¡ç®—ç»“æœä¸æˆ‘ä»¬çš„é¢„æœŸä¸ç¬¦ï¼Œå˜é‡è‡ªåŠ çš„çš„ç»“æœä¹Ÿä¸å¯¹äº†ï¼Œæˆ‘ä»¬æ£€æŸ¥å…¶å±•å¼€çš„ç»“æœï¼š 1CGFloat res = 3.1415926 * (r++) * (r++); åŸæ¥é—®é¢˜å‡ºåœ¨è¿™é‡Œï¼Œå®åœ¨å±•å¼€çš„æ—¶å€™ï¼Œå°†å‚æ•°æ›¿æ¢äº†ä¸¤æ¬¡ï¼Œç”±äºå‚æ•°æœ¬èº«æ˜¯ä¸€ä¸ªè‡ªåŠ è¡¨è¾¾å¼ï¼Œæ‰€ä»¥è¢«è‡ªåŠ äº†ä¸¤æ¬¡ï¼Œäº§ç”Ÿäº†é—®é¢˜ï¼Œé‚£ä¹ˆè¿™ä¸ªé—®é¢˜æ€ä¹ˆè§£å†³å‘¢ï¼ŒCè¯­è¨€ä¸­æœ‰ä¸€ç§å¾ˆæœ‰ç”¨çš„è¯­æ³•ï¼Œå³ä½¿ç”¨å¤§æ‹¬å·å®šä¹‰ä»£ç å—ï¼Œä»£ç å—ä¼šå°†æœ€åä¸€æ¡è¯­å¥çš„æ‰§è¡Œç»“æœè¿”å›ï¼Œä¿®æ”¹ä¸Šé¢å®å®šä¹‰å¦‚ä¸‹ï¼š 12345678910111213141516#import &lt;Foundation/Foundation.h&gt;#define PI 3.1415926#define CircleArea(r) \\(&#123; \\ typeof(r) _r = r; \\ (PI * (_r) * (_r)); \\&#125;)int main(int argc, const char * argv[]) &#123; @autoreleasepool &#123; int r = 1; CGFloat res = CircleArea(r++); NSLog(@\"%f, %d\", res, r); &#125; return 0;&#125; è¿™æ¬¡ç¨‹åºåˆæ¢å¤çš„äº†æ­£å¸¸ã€‚ä½†æ˜¯ï¼Œå¦‚æœå¦‚æœåœ¨è°ƒç”¨å®æ˜¯å˜é‡çš„åå­—ä¸å®å†…çš„ä¸´æ—¶å˜é‡äº§ç”Ÿäº†é‡åï¼Œç¾éš¾å°±åˆå‘ç”Ÿäº†ï¼Œä¾‹å¦‚ï¼š 12345678910111213141516#import &lt;Foundation/Foundation.h&gt;#define PI 3.1415926#define CircleArea(r) \\(&#123; \\ typeof(r) _r = r; \\ (PI * (_r) * (_r)); \\&#125;)int main(int argc, const char * argv[]) &#123; @autoreleasepool &#123; int _r = 1; CGFloat res = CircleArea(_r); NSLog(@\"%f, %d\", res, _r); &#125; return 0;&#125; è¿è¡Œä¸Šé¢ä»£ç ï¼Œä¼šå‘ç°å®å†…çš„ä¸´æ—¶å˜é‡æ²¡æœ‰è¢«åˆå§‹åŒ–æˆåŠŸã€‚è¿™ç¡®å®éš¾å—ï¼Œæˆ‘ä»¬åœ¨è¿›ä¸€æ­¥ï¼Œæ¯”å¦‚å¯¹ä¸´æ—¶å˜é‡çš„åå­—åšä¸€äº›æ‰‹è„šï¼Œå°†å…¶å‘½åä¸ºæå…¶ä¸å®¹æ˜“é‡å¤çš„åå­—ï¼Œå…¶å®ç³»ç»Ÿå†…ç½®çš„ä¸€ä¸ªå®å°±æ˜¯ä¸“é—¨ç”¨æ¥æ„é€ å”¯ä¸€æ€§å˜é‡åçš„ï¼š__COUNTER__ï¼Œè¿™ä¸ªå®æ˜¯ä¸€ä¸ªè®¡æ•°å™¨ï¼Œåœ¨ç¼–è¯‘çš„æ—¶å€™ä¼šè‡ªåŠ¨è¿›è¡Œç´¯åŠ ï¼Œå†æ¬¡å¯¹æˆ‘ä»¬ç¼–å†™çš„å®è¿›è¡Œæ”¹é€ ï¼Œå¦‚ä¸‹ï¼š 123456789101112131415161718#import &lt;Foundation/Foundation.h&gt;#define PI 3.1415926#define PAST(A, B) A##B#define CircleArea(r) __CircleArea(r, __COUNTER__)#define __CircleArea(r, v) \\(&#123; \\ typeof(r) PAST(_r, v) = r; \\ (PI * PAST(_r, v) * PAST(_r, v)); \\&#125;)int main(int argc, const char * argv[]) &#123; @autoreleasepool &#123; int _r = 1; CGFloat res = CircleArea(_r); CGFloat res2 = CircleArea(_r); NSLog(@\"%f, %f\", res, res2); &#125; return 0;&#125; è¿™é‡Œæ”¹é€ åï¼Œæˆ‘ä»¬çš„å®å°±æ²¡æœ‰é‚£ä¹ˆå®¹æ˜“ç†è§£äº†ï¼Œé¦–å…ˆ__COUNTER__åœ¨æ¯æ¬¡å®æ›¿æ¢æ—¶éƒ½ä¼šè¿›è¡Œè‡ªå¢ï¼Œ##æ˜¯ä¸€ç§å®ä¸­ä¸“ç”¨çš„ç‰¹æ®Šç¬¦å·ï¼Œç”¨æ¥å°†å‚æ•°æ‹¼æ¥åˆ°ä¸€èµ·ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„ï¼Œä½¿ç”¨##ç¬¦å·æ‹¼æ¥çš„å¦‚æœæ˜¯å¦å¤–ä¸€ä¸ªå®ï¼Œåˆ™å…¶ä¼šé˜»æ­¢å®çš„å±•å¼€ï¼Œå› æ­¤æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªè½¬æ¢å®PAST(A, B)æ¥å¤„ç†æ‹¼æ¥ã€‚å¦‚æœä½ ä¸€ä¸‹å­ä¸èƒ½ç†è§£ä¸ºä»€ä¹ˆè¿™æ ·å°±å¯ä»¥è§£å†³å®å±•å¼€çš„é—®é¢˜ï¼Œä½ åªéœ€è¦è®°ä½è¿™æ ·ä¸€æ¡å®å±•å¼€çš„åŸåˆ™ï¼šå¦‚æœå½¢å‚æœ‰ä½¿ç”¨#æˆ–##è¿™ç§å¤„ç†ç¬¦å·ï¼Œåˆ™ä¸ä¼šè¿›è¡Œå®å‚æ•°çš„å±•å¼€ï¼Œå¦åˆ™å…ˆå±•å¼€å®å‚æ•°ï¼Œåœ¨å±•å¼€å½“å‰å®ã€‚ä¸Šé¢ä»£ç æœ€ç»ˆé¢„ç¼–è¯‘çš„ç»“æœå¦‚ä¸‹ï¼š 123456789int main(int argc, const char * argv[]) &#123; @autoreleasepool &#123; int _r = 1; CGFloat res = (&#123; typeof(_r) _r0 = _r; (3.1415926 * _r0 * _r0); &#125;); CGFloat res2 = (&#123; typeof(_r) _r1 = _r; (3.1415926 * _r1 * _r1); &#125;); NSLog(@\"%f, %f\", res, res2); &#125; return 0;&#125; ä¸€ä¸ªç®€å•çš„è®¡ç®—åœ†é¢ç§¯çš„å®ï¼Œä¸ºäº†å®‰å…¨ï¼Œæˆ‘ä»¬å°±è¿›è¡Œäº†è¿™ä¹ˆå¤šçš„å¤„ç†ï¼Œçœ‹æ¥è¦ç”¨å¥½å®ï¼Œçš„ç¡®ä¸å®¹æ˜“ã€‚ å››ã€ç¼–å†™å®æ—¶çš„å¥½ä¹ æƒ¯é€šè¿‡å‰é¢çš„ä»‹ç»ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œå¦‚æœéšéšæ„æ„çš„ç¼–å†™ä¸€ä¸ªå®æ˜¯éå¸¸ä¸è´Ÿè´£ä»»çš„ï¼Œçœ‹ä¸Šå»å¥½åƒæ²¡é—®é¢˜ä¸åœ¨ä»»ä½•åœºæ™¯ä¸‹ä½¿ç”¨éƒ½æ²¡æœ‰é—®é¢˜æ˜¯å®Œå…¨ä¸åŒçš„ã€‚åœ¨ç¼–å†™å®æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åˆ»æ„çš„å»åŸ¹å…»è¿™æ ·å‡ ä¸ªç¼–ç ä¹ æƒ¯ï¼š å‚æ•°ä¸è®¡ç®—ç»“æœè¦åŠ å°æ‹¬å· è¿™æ¡åŸåˆ™åº”è¯¥ä¸å¿…å¤šè¯´äº†ï¼Œå‰é¢çš„ç¤ºä¾‹ä¸­å°±æœ‰æ¼”ç¤ºï¼Œå®Œæ•´çš„æ·»åŠ å°æ‹¬å·å¯ä»¥é¿å…å¾ˆå¤šç”±äºè¿ç®—ç¬¦ä¼˜å…ˆçº§é€ æˆçš„å¼‚å¸¸é—®é¢˜ã€‚ å¤šè¯­å¥åŠŸèƒ½æ€§å®ï¼Œè¦ä½¿ç”¨do-whileåŒ…è£¹ è¿™æ¡åŸåˆ™çœ‹ä¸Šå»æœ‰äº›è«åå…¶å¦™ï¼Œä½†æ˜¯å…¶éå¸¸é‡è¦ï¼Œä¾‹å¦‚ï¼Œæˆ‘ä»¬éœ€è¦ç¼–å†™ä¸€ä¸ªè‡ªå®šä¹‰çš„LOGå®ï¼Œåœ¨è¿›è¡Œæ‰“å°æ—¶æ·»åŠ ä¸€äº›è‡ªå®šä¹‰çš„ä¿¡æ¯ï¼Œä½ æˆ–è®¸ä¼šè¿™æ ·å†™ï¼š 12345678910#define LOG(string) \\NSLog(@\"è‡ªå®šä¹‰çš„ä¿¡æ¯\"); \\NSLog(string);int main(int argc, const char * argv[]) &#123; @autoreleasepool &#123; LOG(@\"info\") &#125; return 0;&#125; è¿è¡Œä»£ç ï¼Œç›®å‰è²Œä¼¼æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœå…¶å’Œifè¯­å¥è¿›è¡Œç»“åˆï¼Œå¯èƒ½é—®é¢˜å°±æ¥äº†ï¼š 1234567int main(int argc, const char * argv[]) &#123; @autoreleasepool &#123; if (NO) LOG(@\"info\") &#125; return 0;&#125; è¿è¡Œä»£ç ï¼Œè¿˜æ˜¯æœ‰ä¸€è¡ŒLOGä¿¡æ¯è¢«è¾“å‡ºäº†ï¼Œçœ‹ä¸‹å…¶é¢„ç¼–è¯‘åçš„ç»“æœå¦‚ä¸‹ï¼š 1234567int main(int argc, const char * argv[]) &#123; @autoreleasepool &#123; if (__objc_no) NSLog(@\"è‡ªå®šä¹‰çš„ä¿¡æ¯\"); NSLog(@\"info\"); &#125; return 0;&#125; æ‰¾åˆ°é—®é¢˜äº†ï¼Œç”±äºifç»“æ„å¦‚æœä¸åŠ å¤§æ‹¬å·è¿›è¡Œè§„èŒƒï¼Œå…¶é»˜è®¤ä½œç”¨åŸŸåªæœ‰ä¸€å¥ä»£ç ï¼Œå¤šå†™å¤§æ‹¬å·æ˜¯ä¸ä¼šå‡ºé—®é¢˜ï¼Œå› æ­¤ç¼–å†™å¤šè¯­å¥å®æ—¶ï¼ŒåŠ ä¸Šå¤§æ‹¬å·æ˜¯ä¸€ä¸ªå¥½ä¹ æƒ¯ï¼Œå¦‚ä¸‹ï¼š 123#define LOG(string) \\&#123;NSLog(@\"è‡ªå®šä¹‰çš„ä¿¡æ¯\"); \\NSLog(string);&#125; è¿™æ ·è§£å†³äº†é—®é¢˜ï¼Œä½†æ˜¯å¹¶ä¸å®Œç¾ï¼Œå‡è®¾åœ¨ä½¿ç”¨æ—¶è¿™æ ·å†™ï¼š 123456789int main(int argc, const char * argv[]) &#123; @autoreleasepool &#123; if (NO) LOG(@\"NO\"); else LOG(@\"YES\"); &#125; return 0;&#125; ç»“æœå‘ç°è¿˜æ˜¯ä¼šæŠ¥é”™ï¼Œæ˜¯ç”±äºåˆ†å·æ£çš„é¬¼ï¼Œé¢„ç¼–è¯‘ç»“æœå¦‚ä¸‹ï¼š 123456789int main(int argc, const char * argv[]) &#123; @autoreleasepool &#123; if (__objc_no) &#123;NSLog(@\"è‡ªå®šä¹‰çš„ä¿¡æ¯\"); NSLog(@\"NO\");&#125;; else &#123;NSLog(@\"è‡ªå®šä¹‰çš„ä¿¡æ¯\"); NSLog(@\"YES\");&#125;; &#125; return 0;&#125; æˆ‘ä»¬çŸ¥é“ï¼Œåƒifï¼Œwhileï¼Œforè¿™ç§è¯­æ³•ç»“æ„å—çš„å¤§æ‹¬å·åæ˜¯ä¸éœ€è¦åˆ†å·çš„ï¼Œæˆ‘ä»¬ä¸ºäº†å…¼å®¹å•è¡Œifè¯­å¥ç”±äºå®çš„åŸå› è¢«å±•å¼€æˆå¤šè¡Œçš„é—®é¢˜å¼ºè¡ŒåŠ äº†ä¸€ä¸ªå¤§æ‹¬å·ä¸Šå»ï¼Œå°±äº§ç”Ÿè¿™æ ·çš„é—®é¢˜äº†ï¼Œè§£å†³å®ƒçš„ä¸€ä¸ªå¥½æ–¹æ³•æ˜¯çœŸçš„å°†å¤šè¡Œçš„å®è½¬åŒ–æˆå•è¯­å¥ï¼Œdo-whlieç»“æ„å°±å¯ä»¥å®ç°è¿™ç§æ•ˆæœï¼Œä¿®æ”¹å®å¦‚ä¸‹ï¼š 123456789101112#define LOG(string) \\do &#123;NSLog(@\"è‡ªå®šä¹‰çš„ä¿¡æ¯\"); \\NSLog(string);&#125; while(0);int main(int argc, const char * argv[]) &#123; @autoreleasepool &#123; if (NO) LOG(@\"NO\") else LOG(@\"YES\"); &#125; return 0;&#125; é¢„ç¼–è¯‘åï¼š 123456789int main(int argc, const char * argv[]) &#123; @autoreleasepool &#123; if (__objc_no) do &#123;NSLog(@\"è‡ªå®šä¹‰çš„ä¿¡æ¯\"); NSLog(@\"NO\");&#125; while(0); else do &#123;NSLog(@\"è‡ªå®šä¹‰çš„ä¿¡æ¯\"); NSLog(@\"YES\");&#125; while(0);; &#125; return 0;&#125; ç°åœ¨ï¼Œæ— è®ºå¤–é¢æ€ä¹ˆä½¿ç”¨ï¼Œè¿™ä¸ªå®éƒ½å¯ä»¥æ­£å¸¸å·¥ä½œäº†ã€‚ å¯¹äºä¸å®šå‚æ•°çš„å®ï¼Œå€ŸåŠ©##ç¬¦å·æ¥æ‹¼æ¥å‚æ•° åœ¨å®šä¹‰å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰å‡½æ•°çš„å‚æ•°ä¸ºä¸å®šä¸ªæ•°å‚æ•°ï¼Œå®šä¹‰å‡½æ•°å¼å®æ—¶ä¹Ÿç±»ä¼¼ï¼Œä½¿ç”¨ç¬¦å·â€â€¦â€å¯ä»¥æŒ‡å®šä¸å®šä¸ªæ•°å‚æ•°ï¼Œä¾‹å¦‚å¯¹LOGå®è¿›è¡Œè°ƒæ•´ï¼Œå¦‚ä¸‹ï¼š 123456789101112#define LOG(format, ...) \\do &#123;NSLog(@\"è‡ªå®šä¹‰çš„ä¿¡æ¯\"); \\NSLog(format, __VA_ARGS__);&#125; while(0);int main(int argc, const char * argv[]) &#123; @autoreleasepool &#123; if (NO) LOG(@\"%d\", NO) else LOG(@\"%d\", YES); &#125; return 0;&#125; __VA_ARGS__ä¹Ÿæ˜¯ä¸€ä¸ªå†…ç½®çš„å®ç¬¦å·ï¼Œåˆ™ä½œç”¨æ˜¯ä»£è¡¨å®å®šä¹‰ä¸­çš„å¯å˜å‚æ•°â€œâ€¦â€ï¼Œéœ€è¦æ³¨æ„ï¼Œå¦‚æœæŒ‰ç…§ä¸Šé¢çš„å†™æ³•ï¼Œå¦‚æœæˆ‘ä»¬ä¼ å…¥çš„å¯å˜å‚æ•°ä¸º0ä¸ªï¼Œä¼šäº§ç”Ÿé—®é¢˜ï¼Œå…¶åŸå› ä¹Ÿæ˜¯ç”±äºå¤šäº†ä¸€ä¸ªé€—å·ï¼Œä¾‹å¦‚ï¼š 123456789int main(int argc, const char * argv[]) &#123; @autoreleasepool &#123; if (NO) LOG(@\"%d\") // è¿™é‡Œä¼šè¢«é¢„ç¼–è¯‘æˆNSLog(@\"%d\", ) else LOG(@\"%d\", YES); &#125; return 0;&#125; è§£å†³æ–¹æ¡ˆæ˜¯å¯¹å¯å˜å‚æ•°è¿›è¡Œä¸€æ¬¡##æ‹¼æ¥ï¼Œå®åœ¨ä½¿ç”¨##ç¬¦å·è¿›è¡Œå‚æ•°æ‹¼æ¥æ—¶ï¼Œå¦‚æœåé¢çš„å‚æ•°ä¸ºç©ºï¼Œå…¶ä¼šè‡ªåŠ¨å°†å‰é¢çš„é€—å·å»æ‰ï¼Œå¦‚ä¸‹ï¼š 123#define LOG(format, ...) \\do &#123;NSLog(@\"è‡ªå®šä¹‰çš„ä¿¡æ¯\"); \\NSLog(format, ##__VA_ARGS__);&#125; while(0); äº”ã€ç‰¹æ®Šçš„å®ç¬¦å·ä¸å¸¸ç”¨å†…ç½®å®æœ‰å‡ ä¸ªç‰¹æ®Šçš„ç¬¦å·å¯ä»¥è®©å®å®šä¹‰å˜å¾—éå¸¸çµæ´»ï¼Œå¸¸ç”¨çš„ç‰¹æ®Šç¬¦å·å’Œç‰¹æ®Šå®åˆ—ä¸¾å¦‚ä¸‹ï¼š # äº•å·çš„ä½œç”¨æ˜¯å°†å‚æ•°å­—ç¬¦ä¸²åŒ–ï¼Œä¾‹å¦‚ï¼š 12345678#define Test(p) #pint main(int argc, const char * argv[]) &#123; @autoreleasepool &#123; Test(abc); // é¢„ç¼–è¯‘åæˆä¸º \"abc\"; &#125; return 0;&#125; ## åŒäº•å·æˆ‘ä»¬å‰é¢æœ‰ä½¿ç”¨è¿‡ï¼Œå…¶ä½œç”¨æ˜¯å¯¹å‚æ•°è¿›è¡Œæ‹¼æ¥ï¼Œä¾‹å¦‚ï¼š 12345678#define Test(a,b) a##bint main(int argc, const char * argv[]) &#123; @autoreleasepool &#123; Test(1,2); // é¢„ç¼–è¯‘åæˆä¸º 12; &#125; return 0;&#125; __VA_ATGS__ å¯å˜å‚æ•°å®ä¸­ä¸“ç”¨ï¼Œè¡¨ç¤ºæ‰€æœ‰ä¼ å…¥çš„å¯å˜å‚æ•°ã€‚ __COUNTER__ ä¸€ä¸ªç´¯åŠ è®¡æ•°å®ï¼Œå¸¸ç”¨æ¥æ„é€ å”¯ä¸€å˜é‡åã€‚ __LINE__ è®°å½•LOGä¿¡æ¯æ—¶ï¼Œå¸¸ç”¨çš„ä¸€ä¸ªå†…ç½®å®ï¼Œé¢„ç¼–è¯‘æ—¶ä¼šå°†å…¶æ›¿æ¢ä¸ºå½“å‰çš„è¡Œå·ã€‚ __FILE__ è®°å½•LOGä¿¡æ¯æ—¶ï¼Œå¸¸ç”¨çš„ä¸€ä¸ªå†…ç½®å®ï¼Œé¢„ç¼–è¯‘æ—¶ä¼šå°†å…¶æ›¿æ¢ä¸ºå½“å‰æ–‡ä»¶çš„å…¨è·¯å¾„ã€‚ __FILE_NAME__ è®°å½•LOGä¿¡æ¯æ—¶ï¼Œå¸¸ç”¨çš„ä¸€ä¸ªå†…ç½®å®ï¼Œé¢„ç¼–è¯‘æ—¶ä¼šå°†å…¶æ›¿æ¢ä¸ºå½“å‰çš„æ–‡ä»¶åã€‚ __DATE__ è®°å½•LOGä¿¡æ¯æ—¶ï¼Œå¸¸ç”¨çš„ä¸€ä¸ªå†…ç½®å®ï¼Œé¢„ç¼–è¯‘æ—¶ä¼šå°†å…¶æ›¿æ¢ä¸ºå½“å‰æ—¥æœŸã€‚ __TIME__ è®°å½•LOGä¿¡æ¯æ—¶ï¼Œå¸¸ç”¨çš„ä¸€ä¸ªå†…ç½®å®ï¼Œé¢„ç¼–è¯‘æ—¶ä¼šå°†å…¶æ›¿æ¢ä¸ºå½“å‰æ—¶é—´ã€‚ å…­ã€å®çš„å±•å¼€è§„åˆ™é€šè¿‡å‰é¢çš„ä»‹ç»ï¼Œå¯¹äºåº”ç”¨å®æˆ‘ä»¬å·²ç»æ²¡æœ‰å¤ªå¤§çš„é—®é¢˜ï¼Œå¹¶ä¸”ä¹Ÿäº†è§£äº†å¾ˆå¤šå®çš„ä½¿ç”¨æŠ€å·§ã€‚è¿™ä¸€å°èŠ‚å°†æ›´æ·±å…¥çš„å¯¹å®çš„æ›¿æ¢è§„åˆ™è¿›è¡Œè®¨è®ºã€‚å®æœ¬èº«æ˜¯æ”¯æŒåµŒå¥—çš„ï¼Œä¾‹å¦‚ï¼š 12345678#define M1(A) M2(A)#define M2(A) Aint main(int argc, const char * argv[]) &#123; @autoreleasepool &#123; M1(1); &#125; return 0;&#125; ä¸Šé¢ä»£ç ä¸­å®šä¹‰çš„ä¸¤ä¸ªå®åŸºæœ¬ä¸Šæ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼ŒM1å®æ›¿æ¢åçš„ç»“æœæ˜¯M2å®ï¼ŒM2å®æœ€ç»ˆè¢«æ›¿æ¢ä¸ºå‚æ•°æœ¬èº«ï¼Œä»è¿™ä¸ªä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œå®æ˜¯å¯ä»¥åµŒå¥—é€’å½’å±•å¼€çš„ï¼Œä½†æ˜¯é€’å½’å±•å¼€æ˜¯æœ‰åŸåˆ™ï¼Œä¸ä¼šå‡ºç°æ— é™é€’å½’ï¼Œä¾‹å¦‚ï¼š 12345678#define M1(A) M2(A)#define M2(A) M1(A)int main(int argc, const char * argv[]) &#123; @autoreleasepool &#123; M1(1); // æœ€ç»ˆå±•å¼€ä¸º M1(1) &#125; return 0;&#125; å®çš„å±•å¼€éœ€è¦ç¬¦åˆä¸‹é¢åŸåˆ™ï¼š åœ¨å±•å¼€å®çš„è¿‡ç¨‹ä¸­ä¼šå…ˆå°†å‚æ•°è¿›è¡Œå±•å¼€ï¼Œå¦‚æœä½¿ç”¨##å¯¹å‚æ•°è¿›è¡Œäº†æ‹¼æ¥æˆ–ä½¿ç”¨#è¿›è¡Œäº†å¤„ç†ï¼Œåˆ™æ­¤å‚æ•°ä¸ä¼šè¢«å±•å¼€ã€‚ åœ¨å®çš„å±•å¼€è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæ›¿æ¢åˆ—è¡¨ä¸­å‡ºç°äº†è¦è¢«å±•å¼€çš„å®ï¼Œåˆ™æ­¤å®ä¸ä¼šè¢«å±•å¼€ã€‚ ä¸Šé¢çš„å±•å¼€åŸåˆ™æåˆ°äº†æ›¿æ¢åˆ—è¡¨ï¼Œå®åœ¨å±•å¼€è¿‡ç¨‹ä¸­ä¼šç»´æŠ¤ä¸€ä¸ªæ›¿æ¢åˆ—è¡¨ï¼Œå±•å¼€çš„è¿‡ç¨‹ä¸­éœ€è¦ä»å‚æ•°åˆ°å®æœ¬èº«ï¼Œä»å¤–å±‚å®åˆ°å†…å±‚å®ä¸€å±‚ä¸€å±‚çš„æ›¿æ¢ï¼Œæ¯æ¬¡æ›¿æ¢çš„æ—¶å€™éƒ½ä¼šå°†è¢«æ›¿æ¢çš„å®åæ”¾å…¥ç»´æŠ¤çš„æ›¿æ¢åˆ—è¡¨ä¸­ï¼Œå†ä¸‹ä¸€è½®æ›¿æ¢ä¸­ï¼Œå¦‚æœå†æ¬¡å‡ºç°æ›¿æ¢åˆ—è¡¨ä¸­å‡ºç°è¿‡çš„å®åï¼Œåˆ™ä¸ä¼šè¢«å†æ¬¡æ›¿æ¢ã€‚ä»¥æˆ‘ä»¬ä¸Šé¢çš„ä»£ç ä¸ºä¾‹è¿›è¡Œåˆ†æï¼š é¦–å…ˆM1å®åœ¨ç¬¬ä¸€è½®æ›¿æ¢åï¼Œè¢«æ›¿æ¢æˆäº†M2ï¼Œæ­¤æ—¶æ›¿æ¢åˆ—è¡¨ä¸­æ”¾å…¥å®åM1ã€‚ M2ä¾ç„¶æ˜¯ä¸€ä¸ªå®åï¼Œç¬¬äºŒè½®å¯¹M2è¿›è¡Œæ›¿æ¢ï¼Œå°†å…¶æ›¿æ¢ä¸ºM1ï¼Œå†æ¬¡å°†M2æ”¾å…¥æ›¿æ¢åˆ—è¡¨ï¼Œæ­¤æ—¶æ›¿æ¢åˆ—è¡¨ä¸­æœ‰å®åM1å’ŒM2ã€‚ M1ä¾ç„¶æ˜¯å®åï¼Œä½†æ˜¯æ›¿æ¢åˆ—è¡¨ä¸­å·²ç»å­˜åœ¨M1ï¼Œæ­¤å®åä¸å†å±•å¼€ã€‚ ä¸ƒã€å®çš„å¦™ç”¨è¿™ä¸€å°èŠ‚ï¼Œæˆ‘ä»¬è¦è½¬èº«æˆä¸ºé‰´èµå®¶ï¼Œæ¥å¯¹å¾ˆå¤šå®ç”¨çš„å®çš„å·§å¦™æ¡ˆä¾‹è¿›è¡Œåˆ†æä¸é‰´èµã€‚ä»è¿™äº›ä¼˜ç§€çš„ä½¿ç”¨æ¡ˆä¾‹ä¸­ï¼Œå¯ä»¥æ‰©å®½æˆ‘ä»¬å¯¹å®ä½¿ç”¨çš„æ€è·¯ã€‚ MINä¸MAX Foundataionå†…ç½®äº†ä¸€äº›å¸¸ç”¨çš„è¿ç®—å®ï¼Œå¦‚è·å–ä¸¤ä¸ªæ•°çš„æœ€å¤§å€¼ã€æœ€å°å€¼ã€ç»å¯¹å€¼ç­‰ç­‰ã€‚ä»¥MAXå®ä¸ºä¾‹ï¼Œè¿™ä¸ªå®çš„ç¼–å†™åŸºæœ¬æ¶µç›–äº†å‡½æ•°å¼å®æ‰€æœ‰è¦æ³¨æ„çš„ç‚¹ï¼Œå¦‚ä¸‹ï¼š 12345#define __NSX_PASTE__(A,B) A##B#if !defined(MAX) #define __NSMAX_IMPL__(A,B,L) (&#123; __typeof__(A) __NSX_PASTE__(__a,L) = (A); __typeof__(B) __NSX_PASTE__(__b,L) = (B); (__NSX_PASTE__(__a,L) &lt; __NSX_PASTE__(__b,L)) ? __NSX_PASTE__(__b,L) : __NSX_PASTE__(__a,L); &#125;) #define MAX(A,B) __NSMAX_IMPL__(A,B,__COUNTER__)#endif å…¶ä¸­__NSMAX_IMPL__å®å€ŸåŠ©è®¡æ•°__COUNTER__å’Œæ‹¼æ¥__NSX_PASTE__å®æ¥æ„é€ å”¯ä¸€çš„å†…éƒ¨å˜é‡åï¼Œæˆ‘ä»¬å‰é¢æä¾›çš„ç¤ºä¾‹å®çš„å†™æ³•ä¹ŸåŸºæœ¬æ˜¯å‚ç…§è¿™ä¸ªç³»ç»Ÿå®æ¥çš„ã€‚åé¢å¤§å®¶åœ¨ç¼–å†™å‡½æ•°å¼å®çš„æ—¶å€™ï¼Œéƒ½å¯ä»¥å‚ç…§ä¸‹è¿™ä¸ªå®çš„å®ç°ã€‚ NSAssertç­‰ NSAssertæ˜¯æ–­è¨€å®ï¼Œåœ¨å¼€å‘è°ƒè¯•ä¸­ç»å¸¸ä¼šä½¿ç”¨æ–­è¨€æ¥è¿›è¡Œå®‰å…¨ä¿éšœï¼Œè¿™ä¸ªå®çš„å®šä¹‰å¦‚ä¸‹ï¼š 123456789101112#define NSAssert(condition, desc, ...) \\ do &#123; \\ __PRAGMA_PUSH_NO_EXTRA_ARG_WARNINGS \\ if (__builtin_expect(!(condition), 0)) &#123; \\ NSString *__assert_file__ = [NSString stringWithUTF8String:__FILE__]; \\ __assert_file__ = __assert_file__ ? __assert_file__ : @\"&lt;Unknown File&gt;\"; \\ [[NSAssertionHandler currentHandler] handleFailureInMethod:_cmd \\ object:self file:__assert_file__ \\ lineNumber:__LINE__ description:(desc), ##__VA_ARGS__]; \\ &#125; \\ __PRAGMA_POP_NO_EXTRA_ARG_WARNINGS \\ &#125; while(0) NSAssertå®å®šä¹‰ä¸­ä½¿ç”¨åˆ°äº†ä¸å®šå‚æ•°æ‹¼æ¥æ¶ˆé™¤é€—å·çš„æŠ€å·§ï¼Œå¹¶ä¸”æ˜¯å¤šè¡Œå®è¯­å¥ä½¿ç”¨do-whileè¿›è¡Œä¼˜åŒ–çš„ä¸€ä¸ªå®è·µã€‚ @weakifyä¸@strongify weakifyä¸strongifyæ˜¯ReactCocoaä¸­å¸¸ç”¨çš„ä¸¤ä¸ªå®ï¼Œç”¨æ¥å¤„ç†å¾ªç¯å¼•ç”¨é—®é¢˜ã€‚è¿™ä¸¤ä¸ªå®çš„å®šä¹‰éå¸¸å·§å¦™ï¼Œä»¥weakifyå®ä¸ºä¾‹ï¼Œè¦çœ‹æ‡‚è¿™ä¸ªå®å¹¶ä¸æ˜¯ååˆ†ç®€å•ï¼Œé¦–å…ˆä¸è¿™ä¸ªå®ç›¸å…³çš„å®å®šä¹‰åˆ—ä¸¾å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233#if DEBUG#define rac_keywordify autoreleasepool &#123;&#125;#else#define rac_keywordify try &#123;&#125; @catch (...) &#123;&#125;#endif#define rac_weakify_(INDEX, CONTEXT, VAR) \\CONTEXT __typeof__(VAR) metamacro_concat(VAR, _weak_) = (VAR);#define weakify(...) \\rac_keywordify \\metamacro_foreach_cxt(rac_weakify_,, __weak, __VA_ARGS__)#define metamacro_foreach_cxt(MACRO, SEP, CONTEXT, ...) \\metamacro_concat(metamacro_foreach_cxt, metamacro_argcount(__VA_ARGS__))(MACRO, SEP, CONTEXT, __VA_ARGS__)#define metamacro_argcount(...) \\metamacro_at(20, __VA_ARGS__, 20, 19, 18, 17, 16, 15, 14, 13, 12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1)#define metamacro_at20(_0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15, _16, _17, _18, _19, ...) metamacro_head(__VA_ARGS__)#define metamacro_at(N, ...) \\metamacro_concat(metamacro_at, N)(__VA_ARGS__)#define metamacro_concat(A, B) \\metamacro_concat_(A, B)#define metamacro_concat_(A, B) A ## B#define metamacro_head(...) \\metamacro_head_(__VA_ARGS__, 0)#define metamacro_foreach_cxt1(MACRO, SEP, CONTEXT, _0) MACRO(0, CONTEXT, _0)#define metamacro_head_(FIRST, ...) FIRST å…¶ä¸­rac_keywordifyåŒºåˆ†DEBUGå’ŒRELEASEç¯å¢ƒï¼Œåœ¨DEBUGç¯å¢ƒä¸‹ï¼Œå…¶å®é™…ä¸Šæ˜¯åˆ›å»ºäº†ä¸€ä¸ªæ— ç”¨çš„autoreleasepoolï¼Œæ¶ˆé™¤å‰é¢çš„@ç¬¦å·ï¼Œåœ¨RELEASEç¯å¢ƒä¸‹ï¼Œå…¶ä¼šåˆ›å»ºä¸€ä¸ªtry-catchç»“æ„ï¼Œç”¨æ¥æ¶ˆé™¤å‚æ•°è­¦å‘Šã€‚metamacro_foreach_cxtå®æ¯”è¾ƒå¤æ‚ï¼Œå…¶å±•å¼€è¿‡ç¨‹å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324// ç¬¬ä¸€æ­¥ï¼š åŸå§‹å®metamacro_foreach_cxt(rac_weakify_,, __weak, obj)// ç¬¬äºŒæ­¥ï¼š å±•å¼€metamacro_foreach_cxtmetamacro_concat(metamacro_foreach_cxt, metamacro_argcount(obj))(rac_weakify_,, __weak, obj)// ç¬¬ä¸‰æ­¥ï¼š å±•å¼€metamacro_argcount metamacro_concat(metamacro_foreach_cxt, metamacro_at(20, obj, 20, 19, 18, 17, 16, 15, 14, 13, 12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1))(rac_weakify_,, __weak, obj)// ç¬¬å››æ­¥ï¼š å±•å¼€metamacro_at metamacro_concat(metamacro_foreach_cxt,metamacro_concat(metamacro_at, 20)(obj, 20, 19, 18, 17, 16, 15, 14, 13, 12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1))(rac_weakify_,, __weak, obj)// ç¬¬äº”æ­¥ï¼šå±•å¼€metamacro_concat metamacro_concat(metamacro_foreach_cxt,metamacro_at20(obj, 20, 19, 18, 17, 16, 15, 14, 13, 12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1))(rac_weakify_,, __weak, obj)// ç¬¬å…­æ­¥ï¼šå±•å¼€metamacro_at20 metamacro_concat(metamacro_foreach_cxt,metamacro_head(1))(rac_weakify_,, __weak, obj)// ç¬¬ä¸ƒæ­¥ï¼šå±•å¼€metamacro_head metamacro_concat(metamacro_foreach_cxt,metamacro_head_(1, 0))(rac_weakify_,, __weak, obj)// ç¬¬å…«æ­¥ï¼šå±•å¼€metamacro_head_ metamacro_concat(metamacro_foreach_cxt,1)(rac_weakify_,, __weak, obj)// ç¬¬ä¹æ­¥ï¼šå±•å¼€metamacro_concat metamacro_foreach_cxt1(rac_weakify_,, __weak, obj)// ç¬¬åæ­¥ï¼šå±•å¼€metamacro_foreach_cxt1rac_weakify_(0, __weak, obj)// ç¬¬åä¸€æ­¥ï¼šå±•å¼€rac_weakify___weak __typeof__(obj) metamacro_concat(obj, _weak_) = (obj);// ç¬¬åäºŒæ­¥ï¼šå±•å¼€metamacro_concat __weak __typeof__(obj) obj_weak_ = (obj); strongifyå®çš„å±•å¼€ä¸ä¹‹ç±»ä¼¼ã€‚ ParagraphStyleSetå® ParagraphStyleSetå®æ˜¯YYLabelä¸­æä¾›çš„ä¸€ä¸ªè®¾ç½®å±æ€§å­—ç¬¦ä¸²ParagraphStyleç›¸å…³å±æ€§çš„å¿«æ·æ–¹æ³•ï¼Œå…¶ä¸­ä½¿ç”¨åˆ°çš„ä¸€ä¸ªæŠ€å·§æ˜¯ç›´æ¥ä½¿ç”¨å®çš„å½¢å‚ä½œä¸ºå±æ€§åè¿›è¡Œä½¿ç”¨ï¼Œä½¿å¾—å„ç§å±æ€§çš„è®¾ç½®éƒ½ä½¿ç”¨åŒä¸€ä¸ªå®å³å¯å®Œæˆï¼Œå…¶å®šä¹‰å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223#define ParagraphStyleSet(_attr_) \\[self enumerateAttribute:NSParagraphStyleAttributeName \\ inRange:range \\ options:kNilOptions \\ usingBlock: ^(NSParagraphStyle *value, NSRange subRange, BOOL *stop) &#123; \\ NSMutableParagraphStyle *style = nil; \\ if (value) &#123; \\ if (CFGetTypeID((__bridge CFTypeRef)(value)) == CTParagraphStyleGetTypeID()) &#123; \\ value = [NSParagraphStyle yy_styleWithCTStyle:(__bridge CTParagraphStyleRef)(value)]; \\ &#125; \\ if (value. _attr_ == _attr_) return; \\ if ([value isKindOfClass:[NSMutableParagraphStyle class]]) &#123; \\ style = (id)value; \\ &#125; else &#123; \\ style = value.mutableCopy; \\ &#125; \\ &#125; else &#123; \\ if ([NSParagraphStyle defaultParagraphStyle]. _attr_ == _attr_) return; \\ style = [NSParagraphStyle defaultParagraphStyle].mutableCopy; \\ &#125; \\ style. _attr_ = _attr_; \\ [self yy_setParagraphStyle:style range:subRange]; \\ &#125;]; å…«ã€ç»“è¯­å®çœ‹ä¸Šå»ç®€å•ï¼Œä½†æ˜¯çœŸçš„ç”¨å¥½ç”¨å·§å´å¹¶ä¸å®¹æ˜“ï¼Œæˆ‘æƒ³ï¼Œæœ€å¥½çš„å­¦ä¹ æ–¹å¼å°±æ˜¯åœ¨å®é™…åº”ç”¨ä¸­ä¸æ–­çš„ä½¿ç”¨ï¼Œä¸æ–­çš„ç¢ç£¨ä¸ä¼˜åŒ–ã€‚å¦‚æœèƒ½å°†å®çš„ä½¿ç”¨é©¾è½»å°±ç†Ÿï¼Œä¸€å®šä¼šä¸ºä½ çš„ä»£ç èƒ½åŠ›å¸¦æ¥è´¨çš„æå‡ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š805263726","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"ç½‘ç»œæ‚è°ˆâ€”â€”èŠèŠNDSè§£æ","slug":"396ç½‘ç»œæ‚è°ˆâ€”â€”èŠèŠNDSè§£æ","date":"2019-10-30T16:00:00.000Z","updated":"2021-07-15T11:21:20.308Z","comments":true,"path":"2019/10/31/396ç½‘ç»œæ‚è°ˆâ€”â€”èŠèŠNDSè§£æ/","link":"","permalink":"http://huishao.cc/2019/10/31/396ç½‘ç»œæ‚è°ˆâ€”â€”èŠèŠNDSè§£æ/","excerpt":"","text":"ç½‘ç»œæ‚è°ˆâ€”â€”èŠèŠNDSè§£æä¸€ã€å¼•è¨€åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ä¸€ä¸ªåœ°å€ï¼Œç‚¹å‡»å›è½¦ä¹‹åå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿè¿™æ˜¯ä¸€ä¸ªé¢è¯•ä¸­å¸¸è§çš„é—®é¢˜ ï¼Œè¿™ä¸ªçœ‹ä¼¼å¸¸è§ç®€å•çš„æ“ä½œï¼Œå…¶ä¸­å´éšè—äº†å¤§é‡å¤æ‚çš„äº’è”ç½‘æŠ€æœ¯ã€‚æœ¬ç¯‡åšå®¢ï¼Œæˆ‘ä»¬å°±èŠä¸€èŠç½‘ä¸Šå†²æµªçš„ç¬¬ä¸€æ­¥ï¼šDNSè§£æã€‚ DNSè§£ææ˜¯ä¸€ç§æœåŠ¡ï¼Œå…¶åˆè¢«ç§°ä¸ºåŸŸåè§£æã€‚å®ƒçš„ä½œç”¨æ˜¯å°†åŸŸåè§£æåˆ°å…·ä½“çš„ç½‘ç»œIPåœ°å€ï¼Œä»¥ä¾¿è¿›è¡Œåç»­çš„ç½‘ç»œè¿æ¥æ“ä½œã€‚DNSè§£æè¯´èµ·æ¥ä¹Ÿç®€å•ï¼Œä»è¡¨é¢ä¸Šçœ‹ï¼Œå°±æ˜¯é€šè¿‡ä¸€ä¸ªæŸ¥è¯¢æœåŠ¡ï¼Œå°†åŸŸåæ˜ å°„æˆIPåœ°å€ï¼Œå¯ä»¥å¾€æ·±å¤„æ¨æ•²ï¼Œä½ å°±ä¼šå‘ç°å…¶å®å¹¶æ²¡æœ‰é‚£ä¹ˆç®€å•ï¼Œä¸–ç•Œä¸Šæœ‰æ— æ•°çš„ç»ˆç«¯æ¥å…¥äº’è”ç½‘ï¼ŒDNSæœåŠ¡æ˜¯å¦‚ä½•ä»æµ©å¦‚çƒŸæµ·çš„æ•°æ®ä¸­æ‰¾åˆ°ç›®æ ‡æ•°æ®çš„ï¼ŒDNSæœåŠ¡æ˜¯å¦‚ä½•ä¿è¯æœç´¢æ€§èƒ½çš„ç­‰ç­‰éƒ½æ˜¯å€¼å¾—è®¨è®ºçš„è¯é¢˜ã€‚ äºŒã€åˆ†å±‚çš„ç½‘ç»œåœ¨æ·±å…¥äº†è§£DNSè§£æä¹‹å‰ï¼Œé¦–å…ˆéœ€è¦å¯¹æˆ‘ä»¬å½“ä¸‹ä½¿ç”¨çš„ç½‘ç»œç³»ç»Ÿæœ‰å¤§è‡´çš„äº†è§£ã€‚å…³äºç½‘ç»œç³»ç»Ÿçš„åˆ†å±‚ï¼Œæµè¡Œçš„æœ‰OSIçš„7å±‚æ¨¡å‹ä¸TCP/IPçš„äº”å±‚æ¨¡å‹ï¼Œå…¶ä¸­å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä»¥OSIçš„7å±‚ç½‘ç»œæ¨¡å‹ä¸ºä¾‹ï¼Œå…¶ä¸­æ¯ä¸€å±‚éƒ½è´Ÿè´£å¯¹åº”çš„åè®®ï¼Œä¸¤å°ç»ˆç«¯åœ¨è¿›è¡Œäº¤äº’æ—¶ï¼ŒåŒå±‚ä¹‹é—´è¿›è¡Œäº¤äº’ã€‚æˆ‘ä»¬ä»ä¸Šåˆ°ä¸‹æ¥çœ‹ï¼š åº”ç”¨å±‚ï¼šé¡¾åæ€ä¹‰åº”ç”¨å±‚çš„ä¸»è¦ä½œç”¨æ˜¯æ­å»ºåº”ç”¨ï¼Œå…¶è´Ÿè´£å®ç°åº”ç”¨å±‚é¢çš„åè®®ï¼Œä¾‹å¦‚æ–‡ä»¶ä¼ è¾“FTPåè®®ï¼Œè¿˜æœ‰æˆ‘ä»¬æœ€å¸¸ç”¨çš„HTTPåè®®ä»¥åŠé‚®ç®±ç›¸å…³åè®®ç­‰ã€‚ è¡¨ç¤ºå±‚ï¼šè¡¨ç¤ºå±‚ç”¨æ¥å¯¹åº”ç”¨å±‚çš„æ•°æ®è¿›è¡Œå°è£…å¤„ç†ï¼Œå¦‚å‹ç¼©ä¸è§£å‹ã€‚ ä¼šè¯å±‚ï¼šä¼šè¯å±‚ä½äºä¼ è¾“å±‚ä¹‹ä¸Šï¼Œå…¶ç”¨æ¥ç®¡ç†ä¸€å¯¹ä¼šè¯ï¼Œå³ä¼šè¯çš„è¿æ¥å¼€å§‹ï¼ŒåŒæ­¥ï¼Œä¸­æ–­ç­‰ç­‰ã€‚ ä¼ è¾“å±‚ï¼šä¼ è¾“å±‚è¿°è´£æ•°æ®çš„åˆ†æ®µä¼ è¾“ä¸æ¥æ”¶é‡ç»„ï¼Œè¿™ä¸€å±‚æœ‰TCPã€UDPç­‰ä¼ è¾“åè®®ã€‚ ç½‘ç»œå±‚ï¼šç½‘è·¯å±‚è´Ÿè´£æ ¹æ®IPæ¥å°†æ•°æ®ä¼ é€’åˆ°æŒ‡å®šçš„ç›®çš„ä¸»æœºï¼Œå…¶ä¼šç¡®å®šä¼ è¾“è·¯ç”±ç­‰é—®é¢˜ã€‚ æ•°æ®é“¾è·¯å±‚ï¼šå°†æ•°æ®è¿›è¡ŒMACåœ°å€çš„å°è£…ä¸è§£å°ç­‰ã€‚ ç‰©ç†å±‚ï¼šå®šä¹‰ç‰©ç†åª’ä»‹çš„åè®®ï¼Œä»¥äºŒè¿›åˆ¶çš„æ–¹å¼ä¼ è¾“æ•°æ®ï¼Œå®šä¹‰æ•°æ®çš„ä¼ è¾“é€Ÿç‡ç­‰å‚æ•°ã€‚ å½“æ•°æ®çœŸæ­£çš„é€šè¿‡7å±‚ç½‘ç»œæ¨¡å‹ä¼ è¾“ä¹‹å‰ï¼Œé¦–è¦ç¡®å®šçš„æ˜¯æ•°æ®è¦ä¼ è¾“åˆ°å“ªé‡Œï¼Œæˆ‘ä»¬çŸ¥é“é€šè¿‡IPåœ°å€ç¡®å®šæ•°æ®è¦åˆ°è¾¾çš„ç›®çš„ç»ˆç«¯ï¼Œç„¶è€ŒIPåœ°å€æ˜¯æœ‰ä¸€ä¸²æ•°å­—(å­—æ¯)ä¸ç‚¹ç¬¦å·æ„æˆçš„ï¼Œå¯è¯»æ€§å¾ˆå·®ä¸”éš¾äºè®°å¿†ï¼Œå› æ­¤é‡‡ç”¨åˆ«åçš„æ–¹å¼æ¥ä»£æ›¿ç›´æ¥ä½¿ç”¨IPè¿›è¡Œåœ°å€ç¡®å®šï¼Œè¿™ä¸ªåˆ«åå°±æ˜¯åŸŸåï¼Œå°†åŸŸåè§£æä¸ºIPçš„è¿‡ç¨‹å°±æ˜¯åŸŸåè§£æã€‚ ä¸‰ã€DNSæœåŠ¡å™¨æ—¢ç„¶éœ€è¦å°†åŸŸåè§£ææˆä¸ºIPåœ°å€ï¼Œåˆ™å°±éœ€è¦æœ‰ä¸€ä¸ªæœåŠ¡å™¨æä¾›è¿™æ ·çš„è§£æåŠŸèƒ½ï¼Œè¿™ä¸ªæœåŠ¡å™¨éœ€è¦ç»´æŠ¤è¿™ä¸€å¼ åŸŸåä¸IPåœ°å€æ˜ å°„çš„è¡¨ï¼Œåœ¨å®¢æˆ·æå‡ºè§£æéœ€æ±‚æ—¶ï¼Œä»è¡¨ä¸­æŸ¥è¯¢å‡ºåŸŸåå¯¹åº”çš„IPåœ°å€è¿”å›ç»™å®¢æˆ·ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ç„¶è€Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œä¸Šå›¾ä¸­çš„è®¾è®¡ç»“æ„æ˜æ˜¾æ˜¯ä¸åˆ‡å®é™…çš„ï¼Œç”±ä¸€å°æœåŠ¡å™¨æ¥ç»´æŠ¤æ‰€æœ‰çš„åŸŸåä¸IPæ˜ å°„å…³ç³»æ˜æ˜¾æ˜¯ä¸ç°å®çš„ã€‚é¦–å…ˆï¼Œä¸–ç•Œä¸Šçš„åŸŸåå’ŒIPæ•°é‡éå¸¸åºå¤§ï¼Œå¹¶ä¸”æ›´æ–°ä¹Ÿéå¸¸é¢‘ç¹ï¼Œç»´æŠ¤æˆæœ¬å¾ˆå¤šã€‚å¦ä¸€æ–¹é¢ï¼Œå¤§é‡çš„å®¢æˆ·åŒæ—¶è¿›è¡ŒåŸŸåè§£æè¯·æ±‚ï¼Œä¹Ÿä¼šä½¿è§£æçš„æ•ˆç‡å’Œé€Ÿåº¦å‡ºç°ç“¶é¢ˆã€‚ç°å®ä¸­çš„DNSè§£ææ˜¯é‡‡ç”¨å±‚å±‚é€’è¿›ï¼Œå¤šçº§ç¼“å­˜ï¼Œé€’å½’æŸ¥è¯¢çš„ç»“æ„ç»„ç»‡è€Œæˆçš„ï¼Œä¸‹å›¾å¾ˆå¥½çš„æè¿°äº†è¿™ä¸€è¿‡ç¨‹ï¼š ä»å›¾ä¸­å¯ä»¥çœ‹åˆ°é¦–å…ˆå½“å®¢æˆ·ç«¯å‘èµ·DNSè§£ææ—¶ï¼Œä¼šä»æœ¬æœºNDSç¼“å­˜ä¸­è¿›è¡ŒæŸ¥æ‰¾ï¼ŒåŒæ ·ä¹Ÿä¼šæŸ¥æ‰¾æœ¬æœºçš„Hostsæ–‡ä»¶ä¸­æ˜¯å¦æœ‰æŒ‡å®šå¯¹åº”çš„è§£æè§„åˆ™ï¼Œç”±äºæœ¬æœºçš„Hostsæ–‡ä»¶å…·æœ‰æœ€é«˜çš„ä¼˜å…ˆçº§ï¼Œå› æ­¤æˆ‘ä»¬æƒ³åœ¨æœ¬æœºå°†æŸä¸ªåŸŸåå¼ºåˆ¶æŒ‡å‘ä¸€ä¸ªå›ºå®šçš„IPï¼Œåˆ™å¯ä»¥é‡‡ç”¨ä¿®æ”¹Hostsæ–‡ä»¶çš„æ–¹å¼ï¼Œåœ¨Macç³»ç»Ÿä¸­ï¼Œæ­¤Hostsæ–‡ä»¶åœ¨etcæ–‡ä»¶å¤¹ä¸‹ã€‚ å½“æœ¬æœºç¼“å­˜ä¸­æ²¡æœ‰è§£æå‡ºæ­¤åŸŸåçš„ä¿¡æ¯ä¸”Hostsæ–‡ä»¶ä¸­ä¹Ÿæ²¡æœ‰æŒ‡å®šæ—¶ï¼Œä¼šæƒ³æœ¬åœ°DNSæœåŠ¡å™¨å‘èµ·æŸ¥è¯¢ï¼Œæœ¬åœ°DNSæœåŠ¡å™¨ä¹Ÿä¼šç»´æŠ¤ä¸€å¼ ç¼“å­˜è¡¨ç”¨æ¥æé«˜æŸ¥è¯¢æ•ˆç‡ï¼Œå¦‚æœæœ¬åœ°DNSæœåŠ¡å™¨æ²¡æœ‰æŸ¥åˆ°ï¼Œä¼šå‘æ ¹DNSæœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œæ ¹DNSæœåŠ¡å™¨ä¼šé‡‡ç”¨é€’å½’è¿­ä»£çš„æ–¹å¼è¿›è¡Œæœç´¢ï¼Œå…¨çƒæœ‰13å°æ ¹DNSæœåŠ¡å™¨ï¼Œæ ¹DNSæœåŠ¡å™¨ä¼šæ ¹æ®åŸŸååç¼€è¿”å›å¯¹åº”çš„é¡¶çº§åŸŸåæœåŠ¡å™¨ï¼Œé¡¶çº§åŸŸåæœåŠ¡å™¨ä¼šå†æ¬¡æ ¹æ®åŸŸååˆ†ç±»å°†æŒ‡å®šçš„ä¸»DNSåœ°å€è¿”å›ï¼Œå¦‚æ­¤è¿­ä»£ç›´åˆ°è§£æåˆ°å¯¹åº”çš„IPåœ°å€å†ä¸€æ­¥æ­¥è¿”å›ç»™å®¢æˆ·æœºã€‚ å››ã€åŸŸåæœåŠ¡å™¨ç±»å‹æ ¹åŸŸåæœåŠ¡å™¨æ ¹åŸŸåæœåŠ¡å™¨æ˜¯åŸŸåè§£æç³»ç»Ÿä¸­æœ€é«˜çº§åˆ«çš„åŸŸåæœåŠ¡å™¨ï¼Œå…¶å¤æ‚è¿”å›é¡¶çº§åŸŸåæœåŠ¡å™¨ï¼Œä»–ä»¬æ˜¯äº’è”ç½‘çš„åŸºç¡€ã€‚ç›®å‰ï¼Œå…¨çƒæœ‰13ä¸ªæ ¹åŸŸåæœåŠ¡å™¨åœ°å€(å¹¶éå®é™…çš„æœåŠ¡å™¨æ•°é‡)ï¼Œå¯ä»¥åœ¨å¦‚ä¸‹ç½‘ç«™æŸ¥æ‰¾åˆ°è¿™äº›æ ¹åŸŸåæœåŠ¡å™¨çš„ä¿¡æ¯ã€‚ https://zh.wikipedia.org/wiki/%E6%A0%B9%E7%B6%B2%E5%9F%9F%E5%90%8D%E7%A8%B1%E4%BC%BA%E6%9C%8D%E5%99%A8 é¡¶çº§åŸŸåæœåŠ¡å™¨é¡¶çº§åŸŸåæœåŠ¡å™¨ç”¨äºæŸä¸ªé¡¶çº§åŸŸåä¸‹çš„DNSè§£æï¼Œä¾‹å¦‚æœ‰ä¸“é—¨è´Ÿè´£.comåç¼€çš„é¡¶çº§åŸŸåæœåŠ¡å™¨ï¼Œè´Ÿè´£.eduåç¼€çš„é¡¶çº§åŸŸåæœåŠ¡å™¨ç­‰ï¼Œé¡¶çº§åŸŸåæœåŠ¡å™¨å°†æŸ¥è¯¢åˆ°çš„ä¸»åŸŸåæœåŠ¡å™¨è¿”å›ã€‚ ä¸»åŸŸåæœåŠ¡å™¨ä¸»åŸŸåæœåŠ¡å™¨è´Ÿè´£æŸä¸ªåŒºåŸŸçš„åŸŸåè§£æã€‚åŒæ ·ï¼Œä¸»åŸŸåæœåŠ¡å™¨ä¼šé…å¥—è¾…åŠ©åŸŸåæœåŠ¡å™¨è¿›è¡Œå¤‡ä»½ä¸åˆ†æ‹…è´Ÿè½½ã€‚ äº”ã€æ‰‹åŠ¨è¿›è¡ŒDNSè§£æä¸€æ¬¡å®Œæ•´çš„HTTPè¯·æ±‚é¦–å…ˆè¦åšçš„å°±æ˜¯DNSè§£æ(å¦‚æœæ˜¯é€šè¿‡åŸŸåè¿›è¡Œè¯·æ±‚)ã€‚å¹³æ—¶åœ¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¾ˆå°‘å…³æ³¨æ˜¯å› ä¸ºå‘èµ·HTTPçš„ç½‘ç»œè¯·æ±‚å±‚å¸®æˆ‘ä»¬å°è£…å¥½äº†è¿™ä¸€éƒ¨åˆ†é€»è¾‘ã€‚æœ‰æ—¶å€™ï¼Œä¸ºäº†æé«˜è¯·æ±‚çš„æ•ˆç‡æˆ–é˜²æ­¢DNSåŠ«æŒï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±è¿›è¡ŒDNSè§£æã€‚ ä»¥iOSä¸­çš„ç¼–ç¨‹ä¸ºä¾‹ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨CoreFoundationæ¡†æ¶ä¸­çš„æ¥å£è¿›è¡ŒNDSè§£æï¼š 1234567891011121314151617181920212223242526272829303132333435Boolean result;CFHostRef hostRef;CFArrayRef addresses = NULL;CFArrayRef names = NULL;NSMutableArray * ipsArr = [[NSMutableArray alloc] init];CFStringRef hostNameRef = CFStringCreateWithCString(kCFAllocatorDefault, \"www.baidu.com\", kCFStringEncodingASCII);hostRef = CFHostCreateWithName(kCFAllocatorDefault, hostNameRef);CFAbsoluteTime start = CFAbsoluteTimeGetCurrent();result = CFHostStartInfoResolution(hostRef, kCFHostAddresses, NULL);if (result == true) &#123; addresses = CFHostGetAddressing(hostRef, &amp;result); names = CFHostGetNames(hostRef, &amp;result);&#125;if(result)&#123; struct sockaddr_in* remoteAddr; for(int i = 0; i &lt; CFArrayGetCount(addresses); i++) &#123; CFDataRef saData = (CFDataRef)CFArrayGetValueAtIndex(addresses, i); remoteAddr = (struct sockaddr_in*)CFDataGetBytePtr(saData); if(remoteAddr != NULL) &#123; //è·å–IPåœ°å€ char ip[16]; strcpy(ip, inet_ntoa(remoteAddr-&gt;sin_addr)); NSString * ipStr = [NSString stringWithCString:ip encoding:NSUTF8StringEncoding]; [ipsArr addObject:ipStr]; &#125; &#125;&#125;CFAbsoluteTime end = CFAbsoluteTimeGetCurrent();NSLog(@\"name:%@\", names);NSLog(@\"IP:%@ \\n time cost: %0.3fs\", ipsArr,end - start);CFRelease(hostNameRef);CFRelease(hostRef); è¿è¡Œä¸Šé¢ä»£ç ï¼Œå³å¯å°†æŒ‡å®šåŸŸåçš„IPåœ°å€è§£æå‡ºæ¥ï¼Œå…¶ä¸­CFHostCreateWithNameæ–¹æ³•æ ¹æ®åŸŸååˆ›å»ºä¸€ä¸ªä¸»æœºå¼•ç”¨å¯¹è±¡ï¼ŒCFHostStartInfoResolutionæ–¹æ³•ç”¨æ¥è¿›è¡Œä¸»æœºä¿¡æ¯çš„è§£æï¼Œå¦‚æœè§£ææˆåŠŸï¼ŒCFHostGetAddressingæ–¹æ³•ç”¨æ¥è·å–å…·ä½“çš„IPåœ°å€æ•°æ®ã€‚ ä¸Šé¢è¿›è¡ŒNDSè§£æçš„æ–¹æ³•æ¯”è¾ƒä¸Šå±‚ï¼Œè¿˜æœ‰ä¸€ç§æ–¹å¼å¯ä»¥è·å–åˆ°æ›´å¤šçš„ä¿¡æ¯ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627CFAbsoluteTime start = CFAbsoluteTimeGetCurrent();char *ptr, **pptr;struct hostent *hptr;char str[32];ptr = \"www.baidu.com\";NSMutableArray * ips = [NSMutableArray array];NSMutableArray * alis = [NSMutableArray array];if((hptr = gethostbyname(ptr)) == NULL)&#123; return 0;&#125;for(pptr=hptr-&gt;h_addr_list; *pptr!=NULL; pptr++) &#123; // inet_ntopæ–¹æ³•æ˜¯å°†äºŒè¿›åˆ¶æ•°æ®è½¬æ¢æˆIPå­—ç¬¦ä¸² NSString * ipStr = [NSString stringWithCString:inet_ntop(hptr-&gt;h_addrtype, *pptr, str, sizeof(str)) encoding:NSUTF8StringEncoding]; [ips addObject:ipStr?:@\"\"];&#125;// è·å–ä¸»æœºåˆ«åfor(pptr=hptr-&gt;h_aliases; *pptr!=NULL; pptr++) &#123; NSString * ali = [NSString stringWithCString:*pptr encoding:NSUTF8StringEncoding]; [alis addObject:ali?:@\"\"];&#125;CFAbsoluteTime end = CFAbsoluteTimeGetCurrent();// è·å–ä¸»æœºåNSLog(@\"%s\", hptr-&gt;h_name);NSLog(@\"alias:%@\", alis);NSLog(@\"ip:%@\\ntime cost: %0.3fs\", ips,end - start); gethostbynameæ–¹æ³•å¯ä»¥æ–¹ä¾¿çš„è·å–æŒ‡å®šåŸŸåçš„ä¸»æœºä¿¡æ¯ï¼Œå…¶åªæ”¯æŒIPV4ï¼Œè‹¥æ”¯æŒè§£æIPV6ï¼Œéœ€è¦ä½¿ç”¨gethostbyname2æ–¹æ³•ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•éƒ½ä¼šè¿”å›hostentç»“æ„ä½“ï¼Œå…¶ä¸­å°è£…äº†ä¸»æœºçš„ä¿¡æ¯ã€‚ é™¤äº†ä¸Šé¢ä»‹ç»çš„ä¸¤ç§æ–¹ä¾¿çš„æ–¹å¼å¤–ï¼Œä¹Ÿå¯ä»¥ç›´æ¥é€šè¿‡Cè¯­è¨€çš„Socketæ¥å£æ¥è¿›è¡ŒDNSè§£æï¼ŒDNSå®é™…ä¸Šä¹Ÿæ˜¯ä¸€ç§åè®®ï¼Œåªéœ€è¦å‘åŸŸåè§£ææœåŠ¡å™¨çš„æŒ‡å®šç«¯å£å‘é€æŒ‡å®šçš„è¯·æ±‚æ•°æ®å³å¯è·å–åˆ°è§£æçš„ç»“æœï¼Œä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;string.h&gt;#include &lt;unistd.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/socket.h&gt;#include &lt;netinet/in.h&gt;#include &lt;netdb.h&gt;#include &lt;arpa/inet.h&gt;#define DNS_SVR \"198.41.0.4\"#define DNS_HOST 0x01#define DNS_CNAME 0x05int socketfd;struct sockaddr_in dest;static voidsend_dns_request(const char *dns_name);static voidparse_dns_response();/** * Generate DNS question chunk */static voidgenerate_question(const char *dns_name , unsigned char *buf , int *len);static intis_pointer(int in);static voidparse_dns_name(unsigned char *chunk , unsigned char *ptr , char *out , int *len);int main(int argc , char *argv[])&#123; socketfd = socket(AF_INET , SOCK_DGRAM , 0); if(socketfd &lt; 0)&#123; perror(\"create socket failed\"); exit(-1); &#125; bzero(&amp;dest , sizeof(dest)); dest.sin_family = AF_INET; dest.sin_port = htons(53); dest.sin_addr.s_addr = inet_addr(DNS_SVR); send_dns_request(\"www.baidu.com\"); parse_dns_response(); return 0;&#125;static void parse_dns_response()&#123; unsigned char buf[1024]; unsigned char *ptr = buf; struct sockaddr_in addr; char *src_ip; int n , i , flag , querys , answers; int type , ttl , datalen , len; char cname[128] , aname[128] , ip[20] , *cname_ptr; unsigned char netip[4]; size_t addr_len = sizeof(struct sockaddr_in); n = recvfrom(socketfd , buf , sizeof(buf) , 0 , (struct sockaddr*)&amp;addr , &amp;addr_len); ptr += 4; /* move ptr to Questions */ querys = ntohs(*((unsigned short*)ptr)); ptr += 2; /* move ptr to Answer RRs */ answers = ntohs(*((unsigned short*)ptr)); ptr += 6; /* move ptr to Querys */ /* move over Querys */ for(i= 0 ; i &lt; querys ; i ++)&#123; for(;;)&#123; flag = (int)ptr[0]; ptr += (flag + 1); if(flag == 0) break; &#125; ptr += 4; &#125; printf(\"-------------------------------\\n\"); /* now ptr points to Answers */ for(i = 0 ; i &lt; answers ; i ++)&#123; bzero(aname , sizeof(aname)); len = 0; parse_dns_name(buf , ptr , aname , &amp;len); ptr += 2; /* move ptr to Type*/ type = htons(*((unsigned short*)ptr)); ptr += 4; /* move ptr to Time to live */ ttl = htonl(*((unsigned int*)ptr)); ptr += 4; /* move ptr to Data lenth */ datalen = ntohs(*((unsigned short*)ptr)); ptr += 2; /* move ptr to Data*/ if(type == DNS_CNAME)&#123; bzero(cname , sizeof(cname)); len = 0; parse_dns_name(buf , ptr , cname , &amp;len); printf(\"%s is an alias for %s\\n\" , aname , cname); ptr += datalen; &#125; if(type == DNS_HOST)&#123; bzero(ip , sizeof(ip)); if(datalen == 4)&#123; memcpy(netip , ptr , datalen); inet_ntop(AF_INET , netip , ip , sizeof(struct sockaddr)); printf(\"%s has address %s\\n\" , aname , ip); printf(\"\\tTime to live: %d minutes , %d seconds\\n\" , ttl / 60 , ttl % 60); &#125; ptr += datalen; &#125; &#125; ptr += 2;&#125;static voidparse_dns_name(unsigned char *chunk , unsigned char *ptr , char *out , int *len)&#123; int n , alen , flag; char *pos = out + (*len); for(;;)&#123; flag = (int)ptr[0]; if(flag == 0) break; if(is_pointer(flag))&#123; n = (int)ptr[1]; ptr = chunk + n; parse_dns_name(chunk , ptr , out , len); break; &#125;else&#123; ptr ++; memcpy(pos , ptr , flag); pos += flag; ptr += flag; *len += flag; if((int)ptr[0] != 0)&#123; memcpy(pos , \".\" , 1); pos += 1; (*len) += 1; &#125; &#125; &#125;&#125;static int is_pointer(int in)&#123; return ((in &amp; 0xc0) == 0xc0);&#125;static void send_dns_request(const char *dns_name)&#123; unsigned char request[256]; unsigned char *ptr = request; unsigned char question[128]; int question_len; generate_question(dns_name , question , &amp;question_len); *((unsigned short*)ptr) = htons(0xff00); ptr += 2; *((unsigned short*)ptr) = htons(0x0100); ptr += 2; *((unsigned short*)ptr) = htons(1); ptr += 2; *((unsigned short*)ptr) = 0; ptr += 2; *((unsigned short*)ptr) = 0; ptr += 2; *((unsigned short*)ptr) = 0; ptr += 2; memcpy(ptr , question , question_len); ptr += question_len; sendto(socketfd , request , question_len + 12 , 0 , (struct sockaddr*)&amp;dest , sizeof(struct sockaddr));&#125;static voidgenerate_question(const char *dns_name , unsigned char *buf , int *len)&#123; char *pos; unsigned char *ptr; int n; *len = 0; ptr = buf; pos = (char*)dns_name; for(;;)&#123; n = strlen(pos) - (strstr(pos , \".\") ? strlen(strstr(pos , \".\")) : 0); *ptr ++ = (unsigned char)n; memcpy(ptr , pos , n); *len += n + 1; ptr += n; if(!strstr(pos , \".\"))&#123; *ptr = (unsigned char)0; ptr ++; *len += 1; break; &#125; pos += n + 1; &#125; *((unsigned short*)ptr) = htons(1); *len += 2; ptr += 2; *((unsigned short*)ptr) = htons(1); *len += 2;&#125; å…¶ä¸­198.41.0.4æ˜¯ä»»æ„é€‰æ‹©çš„ä¸€ä¸ªæ ¹åŸŸåæœåŠ¡å™¨çš„åœ°å€ï¼Œå¦‚æœè§£ææˆåŠŸï¼Œå°†åœ¨æ§åˆ¶å°çœ‹åˆ°å¦‚ä¸‹çš„æ‰“å°ä¿¡æ¯ï¼š 123456-------------------------------www.baidu.com is an alias for www.a.shifen.comwww.a.shifen.com has address 112.80.248.76 Time to live: 1 minutes , 7 secondswww.a.shifen.com has address 112.80.248.75 Time to live: 1 minutes , 7 seconds","categories":[{"name":"ç¼–ç¨‹ç ç‘","slug":"ç¼–ç¨‹ç ç‘","permalink":"http://huishao.cc/categories/ç¼–ç¨‹ç ç‘/"}],"tags":[],"keywords":[{"name":"ç¼–ç¨‹ç ç‘","slug":"ç¼–ç¨‹ç ç‘","permalink":"http://huishao.cc/categories/ç¼–ç¨‹ç ç‘/"}]},{"title":"iOSå¼€å‘ä¹‹ExternalAccessoryæ¡†æ¶çš„åº”ç”¨","slug":"395iOSå¼€å‘ä¹‹ExternalAccessoryæ¡†æ¶çš„åº”ç”¨","date":"2019-06-26T16:00:00.000Z","updated":"2021-07-15T11:20:27.816Z","comments":true,"path":"2019/06/27/395iOSå¼€å‘ä¹‹ExternalAccessoryæ¡†æ¶çš„åº”ç”¨/","link":"","permalink":"http://huishao.cc/2019/06/27/395iOSå¼€å‘ä¹‹ExternalAccessoryæ¡†æ¶çš„åº”ç”¨/","excerpt":"","text":"iOSå¼€å‘ä¹‹ExternalAccessoryæ¡†æ¶çš„åº”ç”¨ExternalAccessoryæ¡†æ¶ç”¨æ¥å¯¹å¤–è®¾è¿›è¡Œç®¡ç†ï¼ŒiOSå¤–è®¾é€šå¸¸æ˜¯é€šè¿‡MFIè®¤è¯çš„å¤–éƒ¨è®¾å¤‡ï¼Œå¯ä»¥é€šè¿‡è“ç‰™è¿›è¡Œè¿æ¥ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨lightingç«¯å£è¿›è¡Œè¿æ¥ã€‚ EAAccessoryManagerç±»ç”¨æ¥å¯¹å¤–è®¾è¿›è¡Œç®¡ç†ï¼Œå…¶ä¸­å±æ€§æ–¹æ³•å¦‚ä¸‹ï¼š 123456789101112@interface EAAccessoryManager : NSObject// è·å–å•ä¾‹å¯¹è±¡+ (EAAccessoryManager *)sharedAccessoryManager;// æ‰“å¼€è“ç‰™å¤–è®¾æœç´¢åˆ—è¡¨- (void)showBluetoothAccessoryPickerWithNameFilter:(nullable NSPredicate *)predicate completion:(nullable EABluetoothAccessoryPickerCompletion)completion;// æ³¨å†Œæœ¬åœ°é€šçŸ¥ å½“å¤–è®¾è¿æ¥çŠ¶æ€å˜åŒ–åä¼šè§¦å‘é€šçŸ¥- (void)registerForLocalNotifications;// å–æ¶ˆé€šçŸ¥çš„æ³¨å†Œ- (void)unregisterForLocalNotifications;// æ‰€æœ‰è¿æ¥çš„å¤–è®¾åˆ—è¡¨@property (nonatomic, readonly) NSArray&lt;EAAccessory *&gt; *connectedAccessories;@end å¦‚æœæ³¨å†Œäº†æœ¬åœ°é€šçŸ¥ï¼Œåˆ™å¯ä»¥ç›‘å¬ä¸‹é¢ä¸¤ä¸ªé€šçŸ¥ï¼š 12EAAccessoryDidConnectNotification // å¤–è®¾å·²ç»è¿æ¥çš„é€šçŸ¥EAAccessoryDidDisconnectNotification // å¤–è®¾æ–­å¼€è¿æ¥çš„é€šçŸ¥ EAAccessoryæ˜¯å¤–è®¾å¯¹è±¡ï¼Œå…¶ä¸­å®šä¹‰äº†å¤–è®¾çš„ç›¸å…³ä¿¡æ¯ï¼Œå¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930@interface EAAccessory : NSObject// æ˜¯å¦å·²ç»è¿æ¥@property(nonatomic, readonly, getter=isConnected) BOOL connected;// è¿æ¥ID@property(nonatomic, readonly) NSUInteger connectionID;// åˆ¶é€ å•†@property(nonatomic, readonly) NSString *manufacturer; // å¤–è®¾åç§°@property(nonatomic, readonly) NSString *name;// æ¨¡å¼ç¼–ç @property(nonatomic, readonly) NSString *modelNumber;// åºåˆ—å·@property(nonatomic, readonly) NSString *serialNumber;// å›ºä»¶ç‰ˆæœ¬@property(nonatomic, readonly) NSString *firmwareRevision;// ç¡¬ä»¶ç‰ˆæœ¬@property(nonatomic, readonly) NSString *hardwareRevision;// æ¥å£ç±»å‹@property(nonatomic, readonly) NSString *dockType;// åè®®åˆ—è¡¨@property(nonatomic, readonly) NSArray&lt;NSString *&gt; *protocolStrings;// ä»£ç†@property(nonatomic, assign, nullable) id&lt;EAAccessoryDelegate&gt; delegate;@end@protocol EAAccessoryDelegate &lt;NSObject&gt;@optional// å¤–è®¾æ–­å¼€è¿æ¥æ—¶è°ƒç”¨- (void)accessoryDidDisconnect:(EAAccessory *)accessory;@end éœ€è¦æ³¨æ„ï¼Œä¸å¤–è®¾è¿›è¡Œé€šè®¯éœ€è¦æŒ‡å®šå¯¹åº”çš„åè®®ï¼Œé¦–å…ˆï¼Œéœ€è¦åœ¨iOSåº”ç”¨çš„info.plistæ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹é”®æ¥æŒ‡å®šæ­¤åº”ç”¨è¦äº¤äº’çš„å¤–è®¾åè®®ï¼š å…·ä½“çš„å¤–è®¾åè®®éœ€è¦æŸ¥çœ‹å¤–è®¾çš„è¯´æ˜æ–‡æ¡£ã€‚ EASessionç±»ç”¨æ¥è¿›è¡Œå¤–è®¾äº¤äº’ï¼Œè§£æå¦‚ä¸‹ï¼š 123456789101112@interface EASession : NSObject// æŒ‡å®šå¤–è®¾å’Œåè®®æ¥åˆ›å»ºä¼šè¯å¯¹è±¡- (nullable instancetype)initWithAccessory:(EAAccessory *)accessory forProtocol:(NSString *)protocolString;// å¤–è®¾å¯¹è±¡@property (nonatomic, readonly, nullable) EAAccessory *accessory;// åè®®@property (nonatomic, readonly, nullable) NSString *protocolString;// è¾“å…¥æµ ç”¨æ¥å‘å¤–è®¾å‘é€æ•°æ®@property (nonatomic, readonly, nullable) NSInputStream *inputStream;// è¾“å‡ºæµ ç”¨æ¥æ¥æ”¶å¤–è®¾å‘é€çš„æ•°æ®@property (nonatomic, readonly, nullable) NSOutputStream *outputStream;@end EAWiFiUnconfiguredAccessoryBrowserç±»ç”¨æ¥æµè§ˆæœªé…ç½®çš„WIFIå¤–è®¾ï¼š 1234567891011121314151617181920212223242526272829303132333435363738@interface EAWiFiUnconfiguredAccessoryBrowser : NSObject// åˆå§‹åŒ–æ–¹æ³•- (instancetype)initWithDelegate:(nullable id&lt;EAWiFiUnconfiguredAccessoryBrowserDelegate&gt;)delegate queue:(nullable dispatch_queue_t)queue;// ä»£ç†@property (weak, nonatomic, nullable) id&lt;EAWiFiUnconfiguredAccessoryBrowserDelegate&gt; delegate;// æœªé…ç½®çš„å¤–è®¾@property (readonly, copy, atomic) NSSet&lt;EAWiFiUnconfiguredAccessory *&gt; *unconfiguredAccessories;// å¼€å§‹è¿›è¡Œæœç´¢- (void)startSearchingForUnconfiguredAccessoriesMatchingPredicate:(nullable NSPredicate *)predicate;// ç»“æŸæœç´¢- (void)stopSearchingForUnconfiguredAccessories;// å¯¹å¤–è®¾è¿›è¡Œé…ç½®- (void)configureAccessory:(EAWiFiUnconfiguredAccessory *)accessory withConfigurationUIOnViewController:(UIViewController *)viewController;@end@protocol EAWiFiUnconfiguredAccessoryBrowserDelegate &lt;NSObject&gt;// æœç´¢çŠ¶æ€æ”¹å˜åè°ƒç”¨çš„å›è°ƒ/*typedef NS_ENUM(NSInteger, EAWiFiUnconfiguredAccessoryBrowserState)&#123; EAWiFiUnconfiguredAccessoryBrowserStateWiFiUnavailable = 0, // WIFIä¸å¯ç”¨ EAWiFiUnconfiguredAccessoryBrowserStateStopped, // åœæ­¢ EAWiFiUnconfiguredAccessoryBrowserStateSearching, // æœç´¢ä¸­ EAWiFiUnconfiguredAccessoryBrowserStateConfiguring, // é…ç½®ä¸­&#125;;*/- (void)accessoryBrowser:(EAWiFiUnconfiguredAccessoryBrowser *)browser didUpdateState:(EAWiFiUnconfiguredAccessoryBrowserState)state;// å‘ç°äº†æœªé…ç½®çš„å¤–è®¾- (void)accessoryBrowser:(EAWiFiUnconfiguredAccessoryBrowser *)browser didFindUnconfiguredAccessories:(NSSet&lt;EAWiFiUnconfiguredAccessory *&gt; *)accessories;// ç§»é™¤äº†æœªé…ç½®çš„å¤–è®¾- (void)accessoryBrowser:(EAWiFiUnconfiguredAccessoryBrowser *)browser didRemoveUnconfiguredAccessories:(NSSet&lt;EAWiFiUnconfiguredAccessory *&gt; *)accessories;// å®Œæˆé…ç½®- (void)accessoryBrowser:(EAWiFiUnconfiguredAccessoryBrowser *)browser didFinishConfiguringAccessory:(EAWiFiUnconfiguredAccessory *)accessory withStatus:(EAWiFiUnconfiguredAccessoryConfigurationStatus)status;@end EAWiFiUnconfiguredAccessoryå¯¹è±¡æè¿°WIFIå¤–è®¾ï¼Œå¦‚ä¸‹ï¼š 12345678910111213141516171819202122@interface EAWiFiUnconfiguredAccessory : NSObject// åç§°@property(copy, nonatomic, readonly) NSString *name;// è®¾å¤‡å•†@property(copy, nonatomic, readonly) NSString *manufacturer;// æ¨¡å¼@property(copy, nonatomic, readonly) NSString *model;// WIFIçš„SSID@property(copy, nonatomic, readonly) NSString *ssid;// ç¡¬ä»¶åœ°å€@property(copy, nonatomic, readonly) NSString *macAddress;//å±æ€§ /*typedef NS_OPTIONS(NSUInteger, EAWiFiUnconfiguredAccessoryProperties)&#123; EAWiFiUnconfiguredAccessoryPropertySupportsAirPlay = (1 &lt;&lt; 0), EAWiFiUnconfiguredAccessoryPropertySupportsAirPrint = (1 &lt;&lt; 1), EAWiFiUnconfiguredAccessoryPropertySupportsHomeKit = (1 &lt;&lt; 2)&#125;;*/@property(readonly, nonatomic, readonly) EAWiFiUnconfiguredAccessoryProperties properties;@end","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSå¼€å‘ä¹‹EventKitUIæ¡†æ¶çš„åº”ç”¨","slug":"394iOSå¼€å‘ä¹‹EventKitUIæ¡†æ¶çš„åº”ç”¨","date":"2019-06-25T16:00:00.000Z","updated":"2021-07-15T11:19:43.242Z","comments":true,"path":"2019/06/26/394iOSå¼€å‘ä¹‹EventKitUIæ¡†æ¶çš„åº”ç”¨/","link":"","permalink":"http://huishao.cc/2019/06/26/394iOSå¼€å‘ä¹‹EventKitUIæ¡†æ¶çš„åº”ç”¨/","excerpt":"","text":"iOSå¼€å‘ä¹‹EventKitUIæ¡†æ¶çš„åº”ç”¨å‰é¢åšå®¢ï¼Œæœ‰ä»‹ç»EventKitè¿™ä¸ªæ¡†æ¶çš„ä½¿ç”¨ï¼Œä½¿ç”¨EventKitå¯ä»¥ä¸ç³»ç»Ÿçš„æ—¥å†å’Œæé†’åº”ç”¨è¿›è¡Œäº¤äº’ï¼Œè¯»å†™ç”¨æˆ·çš„æ—¥ç¨‹äº‹ä»¶ã€‚EventKitUIï¼Œé¡¾åæ€ä¹‰ï¼Œå…¶å®åŸºäºEventKitæ¡†æ¶ï¼Œæä¾›äº†ä¸€å¥—ç³»ç»Ÿçš„äº‹ä»¶ç®¡ç†ç•Œé¢ã€‚EventKitçš„åŸºç¡€å†…å®¹ä»‹ç»å¦‚ä¸‹ï¼š https://my.oschina.net/u/2340880/blog/3066175 ä¸€ã€EKCalendarChooseræ—¥å†é€‰æ‹©é¡µé¢EKCalendarChooseræä¾›äº†é€‰æ‹©æ—¥å†ï¼Œå³é€‰æ‹©EKCalendarå¯¹è±¡çš„è§†å›¾æ§åˆ¶å™¨ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345EKCalendarChooser *chooser = [[EKCalendarChooser alloc] initWithSelectionStyle:EKCalendarChooserSelectionStyleSingle displayStyle:EKCalendarChooserDisplayAllCalendars eventStore:self.eventStore];chooser.showsDoneButton = YES;chooser.showsCancelButton = YES;chooser.delegate = self;[self.navigationController pushViewController:chooser animated:YES]; éœ€è¦æ³¨æ„ï¼Œåœ¨å®ä¾‹åŒ–EKCalendarChooserçš„æ—¶å€™ï¼Œéœ€è¦å…³è”ä¸€ä¸ªEKEventStoreå¯¹è±¡ï¼Œç”¨æ¥è¿›è¡Œæ•°æ®æ“ä½œã€‚ EKCalendarChooserä¸­å±æ€§æ–¹æ³•å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930// å®ä¾‹åŒ–æ–¹æ³•/*typedef NS_ENUM(NSInteger, EKCalendarChooserSelectionStyle) &#123; EKCalendarChooserSelectionStyleSingle, // å•é€‰æ¨¡å¼ EKCalendarChooserSelectionStyleMultiple // å¤šé€‰æ¨¡å¼&#125;;typedef NS_ENUM(NSInteger, EKCalendarChooserDisplayStyle) &#123; EKCalendarChooserDisplayAllCalendars, // å±•ç¤ºå…¨éƒ¨æ—¥å† EKCalendarChooserDisplayWritableCalendarsOnly // åªå±•ç¤ºå¯å†™çš„æ—¥å†&#125;;*/- (id)initWithSelectionStyle:(EKCalendarChooserSelectionStyle)selectionStyle displayStyle:(EKCalendarChooserDisplayStyle)displayStyle eventStore:(EKEventStore *)eventStore;// å®ä¾‹åŒ–æ–¹æ³• entityTypeå‚æ•°å†³å®šæ˜¯ ç³»ç»Ÿçš„æ—¥å† è¿˜æ˜¯ æé†’ å¯¹åº”çš„ EKCalander- (id)initWithSelectionStyle:(EKCalendarChooserSelectionStyle)style displayStyle:(EKCalendarChooserDisplayStyle)displayStyle entityType:(EKEntityType)entityType eventStore:(EKEventStore *)eventStore;// è·å–ç”¨æˆ·é€‰ä¸­çš„æ—¥å† é›†åˆ@property(nonatomic, copy) NSSet&lt;EKCalendar *&gt; *selectedCalendars;// é€‰æ‹©çš„é£æ ¼@property(nonatomic, readonly) EKCalendarChooserSelectionStyle selectionStyle;// ä»£ç†å¯¹è±¡@property(nonatomic, weak, nullable) id&lt;EKCalendarChooserDelegate&gt; delegate;// æ˜¯å¦å±•ç¤ºå®ŒæˆæŒ‰é’® åœ¨å¯¼èˆªä¸Š@property(nonatomic) BOOL showsDoneButton;// æ˜¯å¦å±•ç¤ºå–æ¶ˆæŒ‰é’®åœ¨å¯¼èˆªä¸Š@property(nonatomic) BOOL showsCancelButton; EKCalendarChooserDelegateä»£ç†ä¸­å®šä¹‰çš„æ–¹æ³•å¦‚ä¸‹ï¼š 123456789@protocol EKCalendarChooserDelegate &lt;NSObject&gt;@optional// ç”¨æˆ·é€‰æ‹©æ”¹å˜åè§¦å‘çš„å›è°ƒ- (void)calendarChooserSelectionDidChange:(EKCalendarChooser *)calendarChooser;// ç”¨æˆ·é€‰æ‹©å®Œæˆåè§¦å‘çš„å›è°ƒ- (void)calendarChooserDidFinish:(EKCalendarChooser *)calendarChooser;// ç”¨æˆ·å–æ¶ˆé€‰æ‹©åè§¦å‘çš„å›è°ƒ- (void)calendarChooserDidCancel:(EKCalendarChooser *)calendarChooser;@end äºŒã€EKEventViewControlleräº‹ä»¶è¯¦æƒ…é¡µé¢EKEventViewControlleræä¾›äº†å±•ç¤ºæŸä¸ªäº‹ä»¶è¯¦æƒ…çš„è¯•å›¾æ§åˆ¶å™¨ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415161718192021- (void)queryEvent &#123; for (EKCalendar *cal in [self.eventStore calendarsForEntityType:EKEntityTypeEvent]) &#123; if ([cal.title isEqualToString:@\"ç²å°‘çš„äº‹é¡¹æ—¥å†\"]) &#123; NSCalendar *calendar = [NSCalendar currentCalendar]; NSDateComponents *oneMonthFromNowComponents = [[NSDateComponents alloc] init]; oneMonthFromNowComponents.month = 1; NSDate *oneMonthFromNow = [calendar dateByAddingComponents:oneMonthFromNowComponents toDate:[NSDate date] options:0]; NSPredicate*predicate = [self.eventStore predicateForEventsWithStartDate:[NSDate date] endDate:oneMonthFromNow calendars:@[cal]]; NSArray *eventArray = [self.eventStore eventsMatchingPredicate:predicate]; // æ‰“å¼€æ§åˆ¶å™¨ EKEventViewController *controller = [[EKEventViewController alloc] init]; controller.event = eventArray.firstObject; [self presentViewController:controller animated:YES completion:nil]; &#125; &#125;&#125; EKEventViewControllerä¹Ÿæ”¯æŒè¿›è¡Œäº‹ä»¶çš„ç¼–è¾‘ï¼Œå…¶ä¸­å±æ€§æ–¹æ³•å¦‚ä¸‹ï¼š 12345678910@interface EKEventViewController : UIViewController// ä»£ç†å¯¹è±¡@property(nonatomic, weak, nullable) id&lt;EKEventViewDelegate&gt; delegate;// å¯¹åº”çš„äº‹ä»¶å¯¹è±¡ï¼Œåœ¨ä½¿ç”¨æ§åˆ¶å™¨æ—¶ï¼Œå¿…é¡»è®¾ç½®è¿™ä¸ªå±æ€§@property(nonatomic, retain, null_unspecified) EKEvent *event;// è®¾ç½®æ˜¯å¦å…è®¸ç¼–è¾‘@property(nonatomic) BOOL allowsEditing;// è®¾ç½®æ˜¯å¦å…è®¸æ—¥å†é¢„è§ˆ@property(nonatomic) BOOL allowsCalendarPreview;@end EKEventViewDelegateä¸­åªå®šä¹‰äº†ä¸€ä¸ªæ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š 123456789101112@protocol EKEventViewDelegate &lt;NSObject&gt;@required// å®ŒæˆæŸä¸ªè¡Œä¸ºåä¼šè°ƒç”¨çš„ä»£ç†å›è°ƒ/*typedef NS_ENUM(NSInteger, EKEventViewAction) &#123; EKEventViewActionDone, // å®Œæˆäº†äº‹ä»¶ EKEventViewActionResponded, // å›å¤äº†äº‹ä»¶ EKEventViewActionDeleted, // åˆ é™¤äº†äº‹ä»¶&#125;;*/- (void)eventViewController:(EKEventViewController *)controller didCompleteWithAction:(EKEventViewAction)action __OSX_AVAILABLE_STARTING(__MAC_NA,__IPHONE_4_2);@end ä¸‰ã€EKEventEditViewControlleräº‹ä»¶ç¼–è¾‘æ§åˆ¶å™¨EKEventEditViewControlleræä¾›äº†äº‹ä»¶ç¼–è¾‘çš„è§†å›¾æ§åˆ¶å™¨ï¼Œå¯¹äºå¯ç¼–è¾‘çš„EKEventViewControllerè§†å›¾æ§åˆ¶å™¨ï¼Œå½“ç”¨æˆ·ç‚¹å‡»çš„ç¼–è¾‘æŒ‰é’®åï¼Œä¹Ÿä¼šè°ƒç”¨EKEventEditViewControllerè§†å›¾æ§åˆ¶å™¨è¿›è¡Œç¼–è¾‘ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123EKEventEditViewController *controller = [[EKEventEditViewController alloc] init];controller.event = eventArray.firstObject;[self presentViewController:controller animated:YES completion:nil]; å…¶ä¸­å±æ€§æ–¹æ³•å¦‚ä¸‹ï¼š 12345678910@interface EKEventEditViewController : UINavigationController// ä»£ç†å¯¹è±¡@property(nonatomic, weak, nullable) id&lt;EKEventEditViewDelegate&gt; editViewDelegate;// ç¼–è¾‘è¡Œä¸ºå®Œæˆåï¼Œè¿›è¡Œæ•°æ®æ“ä½œçš„EKEventStoreå¯¹è±¡@property(nonatomic, retain, null_unspecified) EKEventStore *eventStore;// è¦è¿›è¡Œç¼–è¾‘çš„äº‹ä»¶å¯¹è±¡@property(nonatomic, retain, nullable) EKEvent *event;// å–æ¶ˆç¼–è¾‘- (void)cancelEditing;@end EKEventEditViewDelegateè§£æå¦‚ä¸‹ï¼š 12345678@protocol EKEventEditViewDelegate &lt;NSObject&gt;@required// å®ŒæˆæŸä¸ªç¼–è¾‘åŠ¨ä½œåè°ƒç”¨- (void)eventEditViewController:(EKEventEditViewController *)controller didCompleteWithAction:(EKEventEditViewAction)action;@optional// è®¾ç½®æ–°å»ºäº‹ä»¶é»˜è®¤å¯¹è±¡çš„æ—¥å†- (EKCalendar *)eventEditViewControllerDefaultCalendarForNewEvents:(EKEventEditViewController *)controller;@end","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSå¼€å‘ä¹‹DeviceCheckæ¡†æ¶çš„åº”ç”¨","slug":"393iOSå¼€å‘ä¹‹EventKitæ¡†æ¶çš„åº”ç”¨","date":"2019-06-23T16:00:00.000Z","updated":"2021-07-15T11:18:28.128Z","comments":true,"path":"2019/06/24/393iOSå¼€å‘ä¹‹EventKitæ¡†æ¶çš„åº”ç”¨/","link":"","permalink":"http://huishao.cc/2019/06/24/393iOSå¼€å‘ä¹‹EventKitæ¡†æ¶çš„åº”ç”¨/","excerpt":"","text":"iOSå¼€å‘ä¹‹DeviceCheckæ¡†æ¶çš„åº”ç”¨DeviceCheckæ¡†æ¶æ˜¯iOS 11åæä¾›çš„ä¸€ä¸ªè®°å½•ç”¨æˆ·è®¾å¤‡çš„å·¥å…·æ¡†æ¶ã€‚ åœ¨å®é™…åº”ç”¨ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°éœ€è¦è¯†åˆ«ç”¨æˆ·è®¾å¤‡çš„éœ€æ±‚ï¼Œä¾‹å¦‚æŸäº›å…è´¹è¯•ç”¨çš„åº”ç”¨ç¨‹åºï¼Œä¼šæ ¹æ®è®¾å¤‡åˆ¤æ–­ç”¨æˆ·æ˜¯å¦å·²ç»è¯•ç”¨è¿‡ã€‚AppleåŸºäºä¿æŠ¤ç”¨æˆ·éšç§çš„åŸåˆ™ï¼Œå¼€å‘è€…ä¸èƒ½ç›´æ¥è·å–ç”¨æˆ·è®¾å¤‡çš„ç›¸å…³æ ‡è¯†ä¿¡æ¯ï¼ŒiOS 11åï¼ŒAppleæä¾›äº†DeviceCheckæ¡†æ¶ç”¨æ¥æä¾›è®¾å¤‡æ£€æŸ¥åŠŸèƒ½ã€‚ DeviceCheckéå¸¸ç®€å•ï¼Œå¤§éƒ¨åˆ†è®¾å¤‡æ£€æŸ¥çš„é€»è¾‘è¦äº¤ç»™æœåŠ¡ç«¯è°ƒç”¨Appleæä¾›çš„æ¥å£æ¥å®ç°ã€‚ DeviceCheckæ¡†æ¶ä¸­åªæä¾›äº†ä¸€ä¸ªç±»ï¼šDCDeviceã€‚å…¶ä¸­å®šä¹‰å¦‚ä¸‹ï¼š 12345678@interface DCDevice : NSObject// ç±»å±æ€§ è·å–å®ä¾‹å¯¹è±¡@property (class, readonly) DCDevice *currentDevice;// æ£€æŸ¥æ¡†æ¶æ˜¯å¦å¯ç”¨@property (getter=isSupported, readonly) BOOL supported;// è¯·æ±‚Token- (void)generateTokenWithCompletionHandler:(void(^)(NSData * _Nullable token, NSError * _Nullable error))completion;@end DeviceCheckæ¡†æ¶çš„æ ¸å¿ƒåœ¨äºè·å–è®¾å¤‡çš„Tokenæ•°æ®ï¼Œæ‹¿åˆ°Tokenæ•°æ®åå¯ä»¥ä»¿ç…§æœåŠ¡ç«¯å‘é€æ¨é€çš„ç›¸å…³æµç¨‹è¿›è¡Œç”¨æˆ·è®¾å¤‡æ£€æŸ¥ä¿¡æ¯çš„è¯»æˆ–å†™ã€‚è¯¦ç»†æ–‡æ¡£åœ°å€å¦‚ä¸‹ï¼š https://developer.apple.com/documentation/devicecheck/accessing_and_modifying_per-device_data ä½¿ç”¨tokenè¿›è¡Œè®¾å¤‡æ£€æŸ¥æ—¶éœ€è¦å‘é€Queryè¯·æ±‚ï¼Œå‚æ•°å¦‚ä¸‹ï¼š ![](https://oscimg.oschina.net/oscnet/83369ca91f61f83ab1eb4e79fda6f074e47.jpg) åœ¨Appleè¿”å›çš„æ•°æ®ä¸­ä¼šåŒ…å«ä¸¤ä¸ªäºŒè¿›åˆ¶çš„ä½å’Œä¸€ä¸ªæ—¶é—´æˆ³ï¼š å¯ä»¥å‘ç°ï¼Œå…¶å®Appleæä¾›ç»™å¼€å‘è€…æ ‡è®°ç”¨æˆ·è®¾å¤‡çš„èƒ½åŠ›ååˆ†æœ‰é™ï¼Œæ»¡æ‰“æ»¡ç®—ï¼Œå¼€å‘è€…åªèƒ½å¯¹ç”¨æˆ·è®¾å¤‡æ ‡è®°4ç§çŠ¶æ€ã€‚é€šè¿‡ä¸¤ä¸ªå¸ƒå°”ä½ï¼Œç”¨æ¥è·å–å½“å‰è®¾å¤‡æ˜¯å¦å‚åŠ äº†æ´»åŠ¨æˆ–è€…æ˜¯å¦å·²ç»ä½¿ç”¨è¿‡è¯•ç”¨èµ„æ ¼ç­‰ç­‰ã€‚å¼€å‘è€…ä¹Ÿå¯ä»¥å¯¹è¿™ä¸¤ä¸ªå¸ƒå°”å€¼è¿›è¡Œä¿®æ”¹ï¼Œä¸Šä¼ è¯·æ±‚çš„å‚æ•°å¦‚ä¸‹ï¼š","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSå¼€å‘ä¹‹DeviceCheckæ¡†æ¶çš„åº”ç”¨","slug":"392iOSå¼€å‘ä¹‹DeviceCheckæ¡†æ¶çš„åº”ç”¨","date":"2019-06-23T16:00:00.000Z","updated":"2021-07-15T11:12:41.388Z","comments":true,"path":"2019/06/24/392iOSå¼€å‘ä¹‹DeviceCheckæ¡†æ¶çš„åº”ç”¨/","link":"","permalink":"http://huishao.cc/2019/06/24/392iOSå¼€å‘ä¹‹DeviceCheckæ¡†æ¶çš„åº”ç”¨/","excerpt":"","text":"iOSå¼€å‘ä¹‹DeviceCheckæ¡†æ¶çš„åº”ç”¨DeviceCheckæ¡†æ¶æ˜¯iOS 11åæä¾›çš„ä¸€ä¸ªè®°å½•ç”¨æˆ·è®¾å¤‡çš„å·¥å…·æ¡†æ¶ã€‚ åœ¨å®é™…åº”ç”¨ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°éœ€è¦è¯†åˆ«ç”¨æˆ·è®¾å¤‡çš„éœ€æ±‚ï¼Œä¾‹å¦‚æŸäº›å…è´¹è¯•ç”¨çš„åº”ç”¨ç¨‹åºï¼Œä¼šæ ¹æ®è®¾å¤‡åˆ¤æ–­ç”¨æˆ·æ˜¯å¦å·²ç»è¯•ç”¨è¿‡ã€‚AppleåŸºäºä¿æŠ¤ç”¨æˆ·éšç§çš„åŸåˆ™ï¼Œå¼€å‘è€…ä¸èƒ½ç›´æ¥è·å–ç”¨æˆ·è®¾å¤‡çš„ç›¸å…³æ ‡è¯†ä¿¡æ¯ï¼ŒiOS 11åï¼ŒAppleæä¾›äº†DeviceCheckæ¡†æ¶ç”¨æ¥æä¾›è®¾å¤‡æ£€æŸ¥åŠŸèƒ½ã€‚ DeviceCheckéå¸¸ç®€å•ï¼Œå¤§éƒ¨åˆ†è®¾å¤‡æ£€æŸ¥çš„é€»è¾‘è¦äº¤ç»™æœåŠ¡ç«¯è°ƒç”¨Appleæä¾›çš„æ¥å£æ¥å®ç°ã€‚ DeviceCheckæ¡†æ¶ä¸­åªæä¾›äº†ä¸€ä¸ªç±»ï¼šDCDeviceã€‚å…¶ä¸­å®šä¹‰å¦‚ä¸‹ï¼š 12345678@interface DCDevice : NSObject// ç±»å±æ€§ è·å–å®ä¾‹å¯¹è±¡@property (class, readonly) DCDevice *currentDevice;// æ£€æŸ¥æ¡†æ¶æ˜¯å¦å¯ç”¨@property (getter=isSupported, readonly) BOOL supported;// è¯·æ±‚Token- (void)generateTokenWithCompletionHandler:(void(^)(NSData * _Nullable token, NSError * _Nullable error))completion;@end DeviceCheckæ¡†æ¶çš„æ ¸å¿ƒåœ¨äºè·å–è®¾å¤‡çš„Tokenæ•°æ®ï¼Œæ‹¿åˆ°Tokenæ•°æ®åå¯ä»¥ä»¿ç…§æœåŠ¡ç«¯å‘é€æ¨é€çš„ç›¸å…³æµç¨‹è¿›è¡Œç”¨æˆ·è®¾å¤‡æ£€æŸ¥ä¿¡æ¯çš„è¯»æˆ–å†™ã€‚è¯¦ç»†æ–‡æ¡£åœ°å€å¦‚ä¸‹ï¼š https://developer.apple.com/documentation/devicecheck/accessing_and_modifying_per-device_data ä½¿ç”¨tokenè¿›è¡Œè®¾å¤‡æ£€æŸ¥æ—¶éœ€è¦å‘é€Queryè¯·æ±‚ï¼Œå‚æ•°å¦‚ä¸‹ï¼š ![](https://oscimg.oschina.net/oscnet/83369ca91f61f83ab1eb4e79fda6f074e47.jpg) åœ¨Appleè¿”å›çš„æ•°æ®ä¸­ä¼šåŒ…å«ä¸¤ä¸ªäºŒè¿›åˆ¶çš„ä½å’Œä¸€ä¸ªæ—¶é—´æˆ³ï¼š å¯ä»¥å‘ç°ï¼Œå…¶å®Appleæä¾›ç»™å¼€å‘è€…æ ‡è®°ç”¨æˆ·è®¾å¤‡çš„èƒ½åŠ›ååˆ†æœ‰é™ï¼Œæ»¡æ‰“æ»¡ç®—ï¼Œå¼€å‘è€…åªèƒ½å¯¹ç”¨æˆ·è®¾å¤‡æ ‡è®°4ç§çŠ¶æ€ã€‚é€šè¿‡ä¸¤ä¸ªå¸ƒå°”ä½ï¼Œç”¨æ¥è·å–å½“å‰è®¾å¤‡æ˜¯å¦å‚åŠ äº†æ´»åŠ¨æˆ–è€…æ˜¯å¦å·²ç»ä½¿ç”¨è¿‡è¯•ç”¨èµ„æ ¼ç­‰ç­‰ã€‚å¼€å‘è€…ä¹Ÿå¯ä»¥å¯¹è¿™ä¸¤ä¸ªå¸ƒå°”å€¼è¿›è¡Œä¿®æ”¹ï¼Œä¸Šä¼ è¯·æ±‚çš„å‚æ•°å¦‚ä¸‹ï¼š","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSå¼€å‘ä¹‹CoreTelephoneyæ¡†æ¶çš„åº”ç”¨","slug":"391iOSå¼€å‘ä¹‹CoreTelephoneyæ¡†æ¶çš„åº”ç”¨","date":"2019-02-25T16:00:00.000Z","updated":"2021-07-15T11:09:35.235Z","comments":true,"path":"2019/02/26/391iOSå¼€å‘ä¹‹CoreTelephoneyæ¡†æ¶çš„åº”ç”¨/","link":"","permalink":"http://huishao.cc/2019/02/26/391iOSå¼€å‘ä¹‹CoreTelephoneyæ¡†æ¶çš„åº”ç”¨/","excerpt":"","text":"iOSå¼€å‘ä¹‹CoreTelephoneyæ¡†æ¶çš„åº”ç”¨CoreTelephoneyæ¡†æ¶ç”¨æ¥è·å–æ‰‹æœºç½‘ç»œçŠ¶æ€ä»¥åŠè¿è¥å•†ç›¸å…³ä¿¡æ¯ã€‚ ä¸€ã€CTTelephonyNetworkInfoç±»è¿™ä¸ªç±»æ˜¯CoreTelephoneyæ¡†æ¶çš„æ ¸å¿ƒï¼Œä½¿ç”¨å®ƒæ¥è·å–æ‰‹æœºçš„è¿è¥å•†ã€ç½‘ç»œç­‰çŠ¶æ€ä¿¡æ¯ã€‚ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567- (void)viewDidLoad &#123; [super viewDidLoad]; CTTelephonyNetworkInfo *info = [[CTTelephonyNetworkInfo alloc] init]; //è·å–è¿è¥å•†ä¿¡æ¯ CTCarrier *carrier = info.subscriberCellularProvider; NSLog(@\"carrier:%@\", [carrier description]);&#125; è¿è¥å•†ä¿¡æ¯ç¤ºä¾‹å¦‚ä¸‹ï¼š 12345Carrier name: [ä¸­å›½ç§»åŠ¨]Mobile Country Code: [460]Mobile Network Code:[02]ISO Country Code:[cn]Allows VOIP? [YES] CTTelephonyNetworkInfoç±»è§£æå¦‚ä¸‹ï¼š 123456789101112131415161718192021//è·å–æ‰€æœ‰è¿è¥å•†ä¿¡æ¯ iOS 12 åæ”¯æŒ@property(readonly, retain, nullable) NSDictionary&lt;NSString *, CTCarrier *&gt; *serviceSubscriberCellularProviders;//å½“å‰è·å–è¿è¥å•†ä¿¡æ¯@property(readonly, retain, nullable) CTCarrier *subscriberCellularProvider;//æ— çº¿ç½‘ç»œæä¾›ä¿¡æ¯@property (nonatomic, readonly, retain, nullable) NSDictionary&lt;NSString *, NSString *&gt; * serviceCurrentRadioAccessTechnology;//å½“å‰æ— çº¿ç½‘ç»œä¿¡æ¯/*CTRadioAccessTechnologyGPRS //2.5gCTRadioAccessTechnologyEdge //2.7GCTRadioAccessTechnologyWCDMA //3GCTRadioAccessTechnologyHSDPA //3.5GCTRadioAccessTechnologyHSUPA //3Gä¸4Gä¹‹é—´çš„è¿‡åº¦æŠ€æœ¯CTRadioAccessTechnologyCDMA1x //3GCTRadioAccessTechnologyCDMAEVDORev0 CTRadioAccessTechnologyCDMAEVDORevA CTRadioAccessTechnologyCDMAEVDORevB CTRadioAccessTechnologyeHRPD CTRadioAccessTechnologyLTE //4G*/ @property (nonatomic, readonly, retain, nullable) NSString* currentRadioAccessTechnology; CTCattierç±»ä¸­å®šä¹‰äº†è¿è¥å•†ç›¸å…³çš„ä¿¡æ¯ï¼Œè§£æå¦‚ä¸‹ï¼š 12345678910//è¿è¥å•†åå­—@property (nonatomic, readonly, retain, nullable) NSString *carrierName;//å›½å®¶ç¼–ç @property (nonatomic, readonly, retain, nullable) NSString *mobileCountryCode;//ç½‘ç»œç¼–ç @property (nonatomic, readonly, retain, nullable) NSString *mobileNetworkCode;//ISOç¼–ç @property (nonatomic, readonly, retain, nullable) NSString* isoCountryCode;//æ˜¯å¦å…è®¸VOIP@property (nonatomic, readonly, assign) BOOL allowsVOIP; CTCellularDataç±»ç”¨æ¥ç›‘å¬ç”¨æˆ·çš„ç½‘ç»œçŠ¶æ€ï¼Œå¯ä»¥è®¾ç½®å½“ç½‘ç»œçŠ¶æ€å‘ç”Ÿå˜åŒ–åå›è°ƒçš„æ–¹æ³•ï¼Œä¾‹å¦‚ï¼š 1234567891011121314151617cellularData = [[CTCellularData alloc] init]; // çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶è°ƒç”¨cellularData.cellularDataRestrictionDidUpdateNotifier = ^(CTCellularDataRestrictedState restrictedState) &#123; switch (restrictedState) &#123; case kCTCellularDataRestrictedStateUnknown: NSLog(@\"èœ‚çªç§»åŠ¨ç½‘ç»œçŠ¶æ€ï¼šæœªçŸ¥\"); break; case kCTCellularDataRestricted: NSLog(@\"èœ‚çªç§»åŠ¨ç½‘ç»œçŠ¶æ€ï¼šå…³é—­\"); break; case kCTCellularDataNotRestricted: NSLog(@\"èœ‚çªç§»åŠ¨ç½‘ç»œçŠ¶æ€ï¼šå¼€å¯\"); break; default: break; &#125;&#125;; éœ€è¦æ³¨æ„ï¼Œåœ¨iOSä¸­ä½¿ç”¨ç½‘ç»œéœ€è¦è·å–ç”¨æˆ·æƒé™ï¼Œå¦‚æœç”¨æˆ·æ²¡æœ‰ç»™ç½‘ç»œæƒé™ï¼Œè·å–åˆ°çš„çŠ¶æ€ä¹Ÿå°†æ˜¯æœªå¼€å¯ã€‚ äºŒã€CTCallCenterä½¿ç”¨CTCallCenterç›¸å…³ç±»å¯ä»¥è·å–å½“å‰é€šè¯ç”µè¯çš„ç›¸å…³ä¿¡æ¯ï¼ŒCTCallCenteré€šè¿‡ç®¡ç†ä¸­å¿ƒï¼Œå…¶ä¸­æä¾›äº†ä¸€ä¸ªæ–¹æ³•æ¥è·å–å½“å‰è¿›è¡Œä¸­çš„é€šè¯ï¼š 12//è·å–å½“å‰æ‰€æœ‰æ¿€æ´»ä¸­çš„é€šè¯@property(readonly, retain, nullable) NSSet&lt;CTCall*&gt; *currentCalls; é€šè¯è¢«æŠ½è±¡æˆCTCallå¯¹è±¡ï¼Œè§£æå¦‚ä¸‹ï¼š 12345678910//å½“å‰é€šè¯çŠ¶æ€/*CTCallStateDialing æ‹¨å·CTCallStateIncoming æ¥ç”µCTCallStateConnected æ¥é€šCTCallStateDisconnected æŒ‚æ–­*/@property(nonatomic, readonly, copy) NSString *callState;//é€šè¯ID@property(nonatomic, readonly, copy) NSString *callID;","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSå¼€å‘ä¹‹CoreSpotlightæ¡†æ¶çš„åº”ç”¨","slug":"390iOSå¼€å‘ä¹‹CoreSpotlightæ¡†æ¶çš„åº”ç”¨","date":"2019-02-24T16:00:00.000Z","updated":"2021-07-15T11:07:19.255Z","comments":true,"path":"2019/02/25/390iOSå¼€å‘ä¹‹CoreSpotlightæ¡†æ¶çš„åº”ç”¨/","link":"","permalink":"http://huishao.cc/2019/02/25/390iOSå¼€å‘ä¹‹CoreSpotlightæ¡†æ¶çš„åº”ç”¨/","excerpt":"","text":"iOSå¼€å‘ä¹‹CoreSpotlightæ¡†æ¶çš„åº”ç”¨CoreSpotlightæ˜¯iOSæä¾›çš„ä¸€å¥—æœ¬åœ°æ£€ç´¢æ¨èåŠŸèƒ½ã€‚å¼€å‘è€…å¯ä»¥ä¸ºè‡ªå·±çš„åº”ç”¨æ·»åŠ æœ¬åœ°ç´¢å¼•ï¼Œç”¨æˆ·é€šè¿‡ç´¢å¼•ä¸­å®šä¹‰çš„å…³é”®å­—å¯ä»¥æœç´¢å¹¶å®šä½åˆ°åº”ç”¨ç¨‹åºå†…çš„æŒ‡å®šåŠŸèƒ½ã€‚ ä¸€ã€ä¸€ä¸ªç®€å•çš„æ·»åŠ ç´¢å¼•ç¤ºä¾‹123456789101112131415161718192021- (void)viewDidLoad &#123; [super viewDidLoad]; //åˆ›å»ºç´¢å¼•å±æ€§å¯¹è±¡ CSSearchableItemAttributeSet *set = [[CSSearchableItemAttributeSet alloc] initWithItemContentType:(NSString*)kUTTypeText]; //è®¾ç½®ç´¢å¼•å±æ€§ set.title = @\"å“ˆå“ˆå“ˆ\"; set.displayName = @\"Hello\"; set.alternateNames = @[@\"aaa\",@\"bbb\"]; set.keywords = @[@\"333\",@\"444\"]; set.version = @\"1.1\"; set.path = @\"path\"; set.thumbnailURL = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@\"image\" ofType:@\"png\"]]; //åˆ›å»ºç´¢å¼• CSSearchableItem *item = [[CSSearchableItem alloc] initWithUniqueIdentifier:@\"1111\" domainIdentifier:@\"huishao\" attributeSet:set]; //æ·»åŠ ç´¢å¼• [[CSSearchableIndex defaultSearchableIndex] indexSearchableItems:@[item] completionHandler:^(NSError * _Nullable error) &#123; if (error) &#123; NSLog(@\"buildSearchableItem Error:%@\",error.localizedDescription); &#125; &#125;];&#125; åœ¨æœç´¢æ ä¸­æœç´¢ç´¢å¼•çš„å…³é”®å­—ï¼Œæ ‡é¢˜ï¼Œåç§°ã€è·¯å¾„éƒ½å¯ä»¥æœç´¢åˆ°å½“å‰åº”ç”¨ç¨‹åºã€‚ä¾‹å¦‚ï¼š äºŒã€CSSearchableIndexç´¢å¼•ç®¡ç†ç±»CSSearchableIndexç±»æä¾›äº†å¯¹ç´¢å¼•çš„æ“ä½œåŠŸèƒ½ï¼Œä¾‹å¦‚æ·»åŠ ç´¢å¼•ï¼ŒæŸ¥æ‰¾ç´¢å¼•ï¼Œåˆ é™¤ç´¢å¼•ç­‰ç­‰ï¼Œè§£æå¦‚ä¸‹ï¼š 1234567891011121314151617//ä»£ç†å¯¹è±¡@property (weak,nullable) id&lt;CSSearchableIndexDelegate&gt; indexDelegate; //è·å–ç´¢å¼•æ£€ç´¢æ˜¯å¦å¯ç”¨+ (BOOL)isIndexingAvailable;//è·å–é»˜è®¤æä¾›çš„ç´¢å¼•ç®¡ç†å¯¹è±¡+ (instancetype)defaultSearchableIndex;//åˆ›å»ºä¸€ä¸ªç´¢å¼•ç®¡ç†å¯¹è±¡- (instancetype)initWithName:(NSString *)name;- (instancetype)initWithName:(NSString *)name protectionClass:(nullable NSFileProtectionType)protectionClass;//è·å–ç´¢å¼•ç®¡ç†å¯¹è±¡ä¸­çš„æ‰€æœ‰ç´¢å¼•- (void)indexSearchableItems:(NSArray&lt;CSSearchableItem *&gt; *)items completionHandler:(void (^ __nullable)(NSError * __nullable error))completionHandler;//é€šè¿‡æ ‡è¯†ç¬¦æ¥åˆ é™¤ç´¢å¼•- (void)deleteSearchableItemsWithIdentifiers:(NSArray&lt;NSString *&gt; *)identifiers completionHandler:(void (^ __nullable)(NSError * __nullable error))completionHandler;//é€šè¿‡åŸŸåæ¥åˆ é™¤ç´¢å¼•- (void)deleteSearchableItemsWithDomainIdentifiers:(NSArray&lt;NSString *&gt; *)domainIdentifiers completionHandler:(void (^ __nullable)(NSError * __nullable error))completionHandler;//åˆ é™¤æ‰€æœ‰ç´¢å¼•- (void)deleteAllSearchableItemsWithCompletionHandler:(void (^ __nullable)(NSError * __nullable error))completionHandler; ä¸‰ã€CSSearchableIndexDelegateè¯¦è§£CSSearchableIndexDelegateæä¾›äº†ç´¢å¼•æŸ¥æ‰¾çš„ç›¸å…³å›è°ƒæ–¹æ³•ï¼Œè§£æå¦‚ä¸‹ï¼š 12345678910111213//è¿™ä¸ªä»£ç†é‡æ–°ç´¢å¼•æ‰€æœ‰å¯æœç´¢çš„æ•°æ®ï¼Œå¹¶ä¸”æ¸…é™¤ä»»ä½•æœ¬åœ°çŠ¶æ€ï¼ˆå¯èƒ½è¯¥çŠ¶æ€å·²ç»è¢«æŒä¹…åŒ–ï¼‰ï¼Œå› ä¸ºç´¢å¼•å·²ç»ä¸¢å¤±äº†- (void)searchableIndex:(CSSearchableIndex *)searchableIndex reindexAllSearchableItemsWithAcknowledgementHandler:(void (^)(void))acknowledgementHandler;//æ ¹æ®idé‡æ–°ç´¢å¼•æ‰€æœ‰å¯æœç´¢çš„æ•°æ®- (void)searchableIndex:(CSSearchableIndex *)searchableIndex reindexSearchableItemsWithIdentifiers:(NSArray &lt;NSString *&gt; *)identifiers acknowledgementHandler:(void (^)(void))acknowledgementHandler;//å·²ç»è¿›å…¥èŠ‚èƒ½æ¨¡å¼è°ƒç”¨çš„æ–¹æ³•- (void)searchableIndexDidThrottle:(CSSearchableIndex *)searchableIndex;// ç»“æŸèŠ‚èƒ½æ¨¡å¼è°ƒç”¨çš„æ–¹æ³•- (void)searchableIndexDidFinishThrottle:(CSSearchableIndex *)searchableIndex;//ç”¨æ¥æä¾›æ•°æ®- (nullable NSData *)dataForSearchableIndex:(CSSearchableIndex *)searchableIndex itemIdentifier:(NSString *)itemIdentifier typeIdentifier:(NSString *)typeIdentifier error:(out NSError ** __nullable)outError;//ç”¨æ¥æä¾›æ–‡ä»¶åœ°å€- (nullable NSURL *)fileURLForSearchableIndex:(CSSearchableIndex *)searchableIndex itemIdentifier:(NSString *)itemIdentifier typeIdentifier:(NSString *)typeIdentifier inPlace:(BOOL)inPlace error:(out NSError ** __nullable)outError; å››ã€CSSearchableItemç´¢å¼•ç±»CSSearchableItemç”¨æ¥è¿›è¡Œç´¢å¼•çš„å®šä¹‰ï¼Œè§£æå¦‚ä¸‹ï¼š 123456789101112//é€šè¿‡è®¾ç½®å”¯ä¸€æ ‡è¯†ç¬¦ã€åŸŸåå’Œå±æ€§æ¥å®šä¹‰ç´¢å¼•- (instancetype)initWithUniqueIdentifier:(nullable NSString *)uniqueIdentifier domainIdentifier:(nullable NSString *)domainIdentifier attributeSet:(CSSearchableItemAttributeSet *)attributeSet;//å”¯ä¸€æ ‡è¯†ç¬¦@property (copy) NSString *uniqueIdentifier;//åŸŸåæ ‡è¯†ç¬¦@property (copy, nullable) NSString *domainIdentifier;//è¿‡æœŸæ—¶é—´@property (copy, null_resettable) NSDate * expirationDate;//å±æ€§@property (strong) CSSearchableItemAttributeSet *attributeSet; äº”ã€CSSearchableItemAttributeSetç±»è¿™ä¸ªç±»çš„ä¸»è¦ä½œç”¨æ˜¯è¿›è¡Œç´¢å¼•ä¿¡æ¯çš„é…ç½®ï¼ŒCSSearchableItemAttributeSetå¹¶æ²¡å®šä¹‰å¤ªå¤šçš„å±æ€§ï¼ŒCoreSpotlightä¸­æä¾›äº†è¿™ä¸ªç±»çš„å¤§é‡Categoryæ¥è¡¥å……è¿™ä¸ªç±»çš„åŠŸèƒ½ï¼Œè§£æå¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136//---------------æ ‡å‡†---------------------------------//é€šè¿‡ç±»å‹åˆ›å»ºä¸€ä¸ªç´¢å¼•ä¿¡æ¯ç±»- (instancetype)initWithItemContentType:(nonnull NSString *)itemContentType;//è®¾ç½®ç´¢å¼•çš„å±•ç¤ºåç§° å¯ä»¥è¿›è¡Œæœç´¢@property(nullable, copy) NSString *displayName;//è®¾ç½®å¯äº¤äº’çš„åç§°æ•°ç»„ å¯ä»¥è¿›è¡Œæœç´¢@property(nullable, copy) NSArray&lt;NSString*&gt; *alternateNames;//è®¾ç½®ç´¢å¼•çš„å®Œæ•´è·¯å¾„ å¯ä»¥è¿›è¡Œæœç´¢@property(nullable, copy) NSString *path;//è®¾ç½®ç´¢å¼•å…³è”çš„æ–‡ä»¶URL@property(nullable, strong) NSURL *contentURL;//è®¾ç½®ç´¢å¼•ç¼©ç•¥å›¾çš„URL@property(nullable, strong) NSURL *thumbnailURL;//è®¾ç½®ç´¢å¼•ç¼©ç•¥å›¾æ•°æ®@property(nullable, copy) NSData *thumbnailData;//æ•°æ®æœ€åæ›´æ”¹æ—¥æœŸ@property(nullable, strong) NSDate *metadataModificationDate;//å†…å®¹ç±»å‹@property(nullable, copy) NSString *contentType;//å…³é”®å­—æ•°ç»„@property(nullable, copy) NSArray&lt;NSString*&gt; *keywords;//è®¾ç½®æ ‡é¢˜@property(nullable, copy) NSString *title;//è®¾ç½®ç‰ˆæœ¬@property(nullable, copy) NSString *version;//è®¾ç½®æœç´¢æƒé‡ 0-100ä¹‹é—´@property(nullable, strong) NSNumber *rankingHint;//åŸŸåæ ‡è¯†@property(nullable, copy) NSString *domainIdentifier;//------------åŠ¨ä½œç›¸å…³--------------------------------//æ˜¯å¦æ”¯æŒæ‹¨æ‰“ç”µè¯ å¿…é¡»å…ˆè®¾ç½®phoneNumberså±æ€§@property(nullable, strong) NSNumber *supportsPhoneCall;//æ˜¯å¦æ”¯æŒå¯¼èˆª å¿…é¡»å…ˆè®¾ç½®ç»çº¬åº¦ä¿¡æ¯@property(nullable, strong) NSNumber *supportsNavigation;//------------å®¹å™¨ç›¸å…³--------------------------------//è®¾ç½®å®¹å™¨æ ‡é¢˜@property(nullable, copy) NSString *containerTitle;//è®¾ç½®å®¹å™¨æ˜¾ç¤ºå@property(nullable, copy) NSString *containerDisplayName;//è®¾ç½®å®¹å™¨æ ‡è¯†@property(nullable, copy) NSString *containerIdentifier;//è®¾ç½®å®¹å™¨é¡ºåº@property(nullable, strong) NSNumber *containerOrder;//-----------å›¾ç‰‡ç›¸å…³-------------------------------//å›¾ç‰‡é«˜åº¦@property(nullable, strong) NSNumber *pixelHeight;//å›¾ç‰‡é«˜åº¦@property(nullable, strong) NSNumber *pixelWidth;//åƒç´ æ€»æ•°@property(nullable, strong) NSNumber *pixelCount;//é¢œè‰²ç©ºé—´@property(nullable, copy) NSString *colorSpace;//æ¯ä¸€å¸§çš„bitæ•°@property(nullable, strong) NSNumber *bitsPerSample;//æ‹ç…§æ—¶æ˜¯å¦å¼€å¯é—ªå…‰ç¯@property(nullable, strong, getter=isFlashOn) NSNumber *flashOn;//ç„¦è·æ˜¯å¦35æ¯«ç±³@property(nullable, strong, getter=isFocalLength35mm) NSNumber *focalLength35mm;//è®¾å¤‡åˆ¶é€ å•†ä¿¡æ¯@property(nullable, copy) NSString *acquisitionMake;//è®¾å¤‡æ¨¡å‹ä¿¡æ¯@property(nullable, copy) NSString *acquisitionModel;//... æ›´å¤šå›¾ç‰‡ä¿¡æ¯//----------åª’ä½“ç›¸å…³-------------------------------//ç¼–è¾‘è€…@property(nullable, copy) NSArray&lt;NSString*&gt; *editors;//ä¸‹è½½æ—¶é—´@property(nullable, strong) NSDate *downloadedDate;//æ–‡ä»¶æè¿°@property(nullable, copy) NSString *comment;//å†…å®¹ç‰ˆæƒ@property(nullable, copy) NSString *copyright;//æœ€åä½¿ç”¨æ—¶é—´@property(nullable, strong) NSDate *lastUsedDate;//æ·»åŠ æ—¶é—´@property(nullable, strong) NSDate *addedDate;//æ—¶é•¿@property(nullable, strong) NSNumber *duration;//è”ç³»äººå…³é”®å­—@property(nullable, copy) NSArray&lt;NSString*&gt; *contactKeywords;//åª’ä½“ç±»å‹@property(nullable, copy) NSArray&lt;NSString*&gt; *mediaTypes;//æ€»æ¯”ç‰¹ç‡@property(nullable, strong) NSNumber *totalBitRate;//è§†é¢‘æ¯”ç‰¹å¸@property(nullable, strong) NSNumber *videoBitRate;//éŸ³é¢‘æ¯”ç‰¹ç‡@property(nullable, strong) NSNumber *audioBitRate;//ç»„ç»‡ä¿¡æ¯@property(nullable, copy) NSArray&lt;NSString*&gt; *organizations;//åˆ›å»ºè€…@property(nullable, copy) NSString *role;//è¯­è¨€ä¿¡æ¯@property(nullable, copy) NSArray&lt;NSString*&gt; *languages;//å‘å¸ƒè€…@property(nullable, copy) NSArray&lt;NSString*&gt; *publishers;//åœ°å€@property(nullable, strong) NSURL *URL;//... æ›´å¤šåª’ä½“ä¿¡æ¯//---------------ä¿¡æ¯ç›¸å…³---------------------------//ç½‘é¡µæ•°æ®@property(nullable, copy) NSData *HTMLContentData;//æ–‡æœ¬æ•°æ®@property(nullable, copy) NSString *textContent;//ä½œè€…æ•°æ®@property(nullable, copy) NSArray&lt;CSPerson*&gt; *authors;//é‚®ç®±åœ°å€@property(nullable, copy) NSArray&lt;NSString*&gt; *authorEmailAddresses;@property(nullable, copy) NSArray&lt;NSString*&gt; *emailAddresses;//ç”µè¯å·ç @property(nullable, copy) NSArray&lt;NSString*&gt; *phoneNumbers;//... æ›´å¤š//--------------åœ°å€ç›¸å…³-------------------//é‚®ç¼–@property(nullable, copy) NSString *postalCode;//åŸå¸‚@property(nullable, copy) NSString *city;//å›½å®¶@property(nullable, copy) NSString *country;//æµ·æ‹”@property(nullable, strong) NSNumber *altitude;//ç»åº¦@property(nullable, strong) NSNumber *latitude;//çº¬åº¦@property(nullable, strong) NSNumber *longitude;//é€Ÿåº¦@property(nullable, strong) NSNumber *speed;//æ—¶é—´æˆ³@property(nullable, strong) NSDate *timestamp;//... æ›´å¤š","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"MD5åŠ å¯†åŸç†è§£æåŠOCç‰ˆåŸç†å®ç°","slug":"389MD5åŠ å¯†åŸç†è§£æåŠOCç‰ˆåŸç†å®ç°","date":"2019-01-27T16:00:00.000Z","updated":"2021-07-15T11:06:32.900Z","comments":true,"path":"2019/01/28/389MD5åŠ å¯†åŸç†è§£æåŠOCç‰ˆåŸç†å®ç°/","link":"","permalink":"http://huishao.cc/2019/01/28/389MD5åŠ å¯†åŸç†è§£æåŠOCç‰ˆåŸç†å®ç°/","excerpt":"","text":"MD5åŠ å¯†åŸç†è§£æåŠOCç‰ˆåŸç†å®ç°ä¸€ã€MD5ç®—æ³•åŸºç¡€æ¦‚å¿µMD5ç®—æ³•æ˜¯Hashç®—æ³•çš„ä¸€ç§ï¼Œå«åšè®¯æ¯æ‘˜è¦æ¼”ç®—æ³•ã€‚æ‰€è°“æ‘˜è¦ï¼Œä»å­—é¢æ„æ€ç†è§£ï¼Œæ˜¯æŒ‡å†…å®¹çš„å¤§æ¦‚ã€‚åœ¨MD5ç®—æ³•ä¸­ï¼Œè¿™ä¸ªæ‘˜è¦æ˜¯æŒ‡å°†ä»»æ„æ•°æ®æ˜ å°„æˆä¸€ä¸ª128ä½é•¿çš„æ‘˜è¦ä¿¡æ¯ã€‚å¹¶ä¸”å…¶æ˜¯ä¸å¯é€†çš„ï¼Œå³ä»æ‘˜è¦ä¿¡æ¯æ— æ³•åå‘æ¨æ¼”ä¸­åŸæ–‡ï¼Œåœ¨æ¼”ç®—è¿‡ç¨‹ä¸­ï¼ŒåŸæ–‡çš„å†…å®¹ä¹Ÿæ˜¯æœ‰ä¸¢å¤±çš„ã€‚ å› ä¸ºMD5ç®—æ³•æœ€ç»ˆç”Ÿæˆçš„æ˜¯ä¸€ä¸ª128ä½é•¿çš„æ•°æ®ï¼Œä»åŸç†ä¸Šè¯´ï¼Œæœ‰2^128ç§å¯èƒ½ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸å·¨å¤§çš„æ•°æ®ï¼Œçº¦ç­‰äº3.4ä¹˜10çš„38æ¬¡æ–¹ï¼Œè™½ç„¶è¿™ä¸ªæ˜¯ä¸ªå¤©æ–‡æ•°å­—ï¼Œä½†æ˜¯ä¸–ç•Œä¸Šå¯ä»¥è¿›è¡ŒåŠ å¯†çš„æ•°æ®åŸåˆ™ä¸Šè¯´æ˜¯æ— é™çš„ï¼Œå› æ­¤æ˜¯å¯èƒ½å­˜åœ¨ä¸åŒçš„å†…å®¹ç»è¿‡MD5åŠ å¯†åå¾—åˆ°åŒæ ·çš„æ‘˜è¦ä¿¡æ¯ï¼Œä½†è¿™ä¸ªç¢°ä¸­çš„æ¦‚ç‡éå¸¸å°ã€‚ äºŒã€MD5çš„ä½¿ç”¨åœºæ™¯MD5å¸¸ç”¨åœ¨å¯†ç åŠ å¯†ä¸­ï¼Œä¸€èˆ¬ä¸ºäº†ä¿è¯ç”¨æˆ·å¯†ç çš„å®‰å…¨ï¼Œåœ¨æ•°æ®åº“ä¸­å­˜å‚¨çš„éƒ½æ˜¯ç”¨æˆ·çš„å¯†ç ç»è¿‡MD5åŠ å¯†åçš„å€¼ï¼Œåœ¨å®¢æˆ·ç«¯ç”¨æˆ·è¾“å…¥å¯†ç åï¼Œä¹Ÿä¼šä½¿ç”¨MD5è¿›è¡ŒåŠ å¯†ï¼Œè¿™æ ·å³ä½¿ç”¨æˆ·çš„ç½‘ç»œè¢«çªƒå¬ï¼Œçªƒå¬è€…ä¾ç„¶æ— æ³•æ‹¿åˆ°ç”¨æˆ·çš„åŸå§‹å¯†ç ï¼Œå¹¶ä¸”å³ä½¿ç”¨æˆ·æ•°æ®åº“è¢«ç›—ï¼Œæ²¡æœ‰å­˜å‚¨æ˜æ–‡çš„å¯†ç å¯¹ç”¨æˆ·æ¥è¯´ä¹Ÿå¤šäº†ä¸€å±‚å®‰å…¨ä¿éšœã€‚ MD5ç­¾åæŠ€æœ¯è¿˜å¸¸ç”¨äºé˜²æ­¢ä¿¡æ¯çš„ç¯¡æ”¹ã€‚ä½¿ç”¨MD5å¯ä»¥å¯¹ä¿¡æ¯è¿›è¡Œç­¾åï¼Œæ¥æ”¶è€…æ‹¿åˆ°ä¿¡æ¯ååªè¦é‡æ–°è®¡ç®—ç­¾åå’ŒåŸå§‹ç­¾åè¿›è¡Œå¯¹æ¯”ï¼Œå³å¯çŸ¥é“æ•°æ®ä¿¡æ¯æ˜¯å¦ä¸­é€”è¢«ç¯¡æ”¹äº†ã€‚ ä¸‰ã€MD5ç®—æ³•åŸç†MD5ç®—æ³•å¤§è‡´åˆ†ä¸º4æ­¥å®Œæˆï¼š ç¬¬1æ­¥ï¼šè¿›è¡Œæ•°æ®å¡«å……æ•´ç† è¿™ä¸€æ­¥æ˜¯å¯¹è¦åŠ å¯†çš„æ•°æ®è¿›è¡Œå¡«å……å’Œæ•´ç†ï¼Œå°†è¦åŠ å¯†çš„äºŒè¿›åˆ¶æ•°æ®å¯¹512å–æ¨¡ï¼Œå¾—åˆ°çš„ç»“æœå¦‚æœä¸å¤Ÿ448ä½ï¼Œåˆ™è¿›è¡Œè¡¥è¶³ï¼Œè¡¥è¶³çš„æ–¹å¼æ˜¯ç¬¬1ä½å¡«å……1ï¼Œåé¢å…¨éƒ¨å¡«å……0ã€‚ ç¬¬2æ­¥ï¼šè®°å½•æ•°æ®é•¿åº¦ ç»è¿‡ç¬¬ä¸€æ­¥æ•´ç†å®Œæˆåçš„æ•°æ®çš„ä½æ•°å¯ä»¥è¡¨ç¤ºä¸ºN\\*512+448ï¼Œå†å‘å…¶åè¿½åŠ 64ä½ç”¨æ¥å­˜å‚¨æ•°æ®çš„é•¿åº¦ï¼Œæ¯”å¦‚æ•°æ®çš„é•¿åº¦ä¸º16å­—èŠ‚ï¼Œåˆ™ç”¨10000æ¥å¡«å……å64ä½ã€‚è¿™ä¸€æ­¥åšå®Œåï¼Œæ•°æ®çš„ä½æ•°å°†å˜æˆ(N+1)\\*512ã€‚ ç¬¬3æ­¥ï¼šä»¥æ ‡å‡†çš„å¹»æ•°ä½œä¸ºè¾“å…¥ MD5çš„å®ç°éœ€è¦æ¯512ä¸ªå­—èŠ‚è¿›è¡Œä¸€æ¬¡å¤„ç†ï¼Œåä¸€æ¬¡å¤„ç†çš„è¾“å…¥ä¸ºå‰ä¸€æ¬¡å¤„ç†çš„è¾“å‡ºï¼Œå› æ­¤ï¼Œåœ¨å¾ªç¯å¤„ç†å¼€å§‹ä¹‹å‰ï¼Œéœ€è¦æ‹¿4ä¸ªæ ‡å‡†æ•°ä½œä¸ºè¾“å…¥ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ï¼š 1unsigned int A=0x67452301,B=0xefcdab89,C=0x98badcfe,D=0x10325476; ç¬¬4æ­¥ï¼šè¿›è¡ŒNè½®å¾ªç¯å¤„ç†ï¼Œå°†æœ€åçš„ç»“æœè¾“å‡º è¿™ä¸€æ­¥é‡è¦çš„æ˜¯æ¯ä¸€è½®çš„å¤„ç†ç®—æ³•ï¼Œæ¯ä¸€è½®å¤„ç†ä¹Ÿè¦å¾ªç¯64æ¬¡ï¼Œè¿™64æ¬¡å¾ªç¯è¢«åˆ†ä¸º4å„ç»„ï¼Œæ¯16æ¬¡å¾ªç¯ä¸ºä¸€ç»„ï¼Œæ¯ç»„å¾ªç¯ä½¿ç”¨ä¸åŒçš„é€»è¾‘å¤„ç†å‡½æ•°ï¼Œå¤„ç†å®Œæˆåï¼Œå°†è¾“å‡ºä½œä¸ºè¾“å…¥è¿›å…¥ä¸‹ä¸€è½®å¾ªç¯ã€‚ å››ã€MD5æ ¸å¿ƒç®—æ³•çš„å®ç° è¿™é‡Œæ¼”ç¤ºçš„æ˜¯æ¯è½®å¾ªç¯çš„æ ¸å¿ƒç®—æ³•ï¼š é¦–å…ˆè¿›è¡Œ3ä¸ªå‡½æ•°çš„å£°æ˜ï¼š 123456//å°†å¤§ç«¯å­—èŠ‚åºè½¬æ¢ä¸ºå°ç«¯å­—èŠ‚åºvoid convertToLittleEndian(unsigned int *data, int len);//è¿›è¡Œå¾ªç¯å·¦ç§»å‡½æ•°void ROL(unsigned int *s, unsigned short cx);//MD5åŠ å¯†å‡½æ•°void MD5(NSString *str); MD5ç®—æ³•ä¸­å¤„ç†çš„æ•°æ®éƒ½æ˜¯å°ç«¯å­—èŠ‚åºçš„ï¼Œè€Œä½¿ç”¨Objective-Cå¤„ç†çš„NSDataå¯¹è±¡çš„å­—èŠ‚åºæ˜¯å¤§ç«¯å­—èŠ‚åºï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åšä¸€ä¸‹è½¬æ¢ã€‚å‡½æ•°å®ç°å¦‚ä¸‹ï¼š 123456789101112void convertToLittleEndian(unsigned int *data, int len)&#123; for (int index = 0; index &lt; len; index ++) &#123; *data = ((*data &amp; 0xff000000) &gt;&gt; 24) | ((*data &amp; 0x00ff0000) &gt;&gt; 8) | ((*data &amp; 0x0000ff00) &lt;&lt; 8) | ((*data &amp; 0x000000ff) &lt;&lt; 24); data ++; &#125;&#125; åœ¨MD5ä¸­æœ‰éœ€è¦å¯¹å­—èŠ‚æ•°æ®è¿›è¡Œå¾ªç¯å·¦ç§»çš„æ“ä½œï¼Œå¾ªç¯å·¦ç§»å‡½æ•°å®ç°å¦‚ä¸‹ï¼š 123456void ROL(unsigned int *s, unsigned short cx)&#123; if (cx &gt; 32)cx %= 32; *s = (*s &lt;&lt; cx) | (*s &gt;&gt; (32 - cx)); return;&#125; ä¸‹é¢æ˜¯MD5å‡½æ•°çš„æ ¸å¿ƒå®ç°ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108void MD5(NSString *str)&#123; const void * bytes[str.length]; //å­—ç¬¦ä¸²è½¬å­—èŠ‚æµ [str getBytes:bytes maxLength:str.length usedLength:nil encoding:NSUTF8StringEncoding options:NSStringEncodingConversionExternalRepresentation range:NSMakeRange(0, str.length) remainingRange:nil]; //ä½¿ç”¨NSDataå­˜å‚¨ NSMutableData * data = [[NSMutableData alloc] initWithBytes:bytes length:str.length]; BOOL first = YES; //è¿›è¡Œæ•°æ®å¡«å…… if (data.length&lt;56) &#123; do &#123; if (first) &#123; int byte = 0b10000000; [data appendBytes:&amp;byte length:1]; first = NO; &#125;else&#123; int byte = 0b00000000; [data appendBytes:&amp;byte length:1]; &#125; &#125; while (data.length&lt;56); &#125; int length = (int)str.length*8%((int)pow(2, 64)); [data appendBytes:&amp;length length:8]; void * newBytes[64]; memcpy(newBytes, [data bytes], 64); //å¤§å°ç«¯è½¬æ¢ convertToLittleEndian(newBytes, 64); NSData * newData = [NSData dataWithBytes:newBytes length:data.length]; NSMutableArray * subData = [NSMutableArray array]; //è¿›è¡Œåˆ†ç»„ for (int i = 0; i&lt;16; i++) &#123; [subData addObject: [newData subdataWithRange:NSMakeRange(i*4, 4)]]; &#125; //åˆå§‹è¾“å…¥ unsigned int A=0x67452301,B=0xefcdab89,C=0x98badcfe,D=0x10325476; unsigned int a=A,b=B,c=C,d=D; unsigned int s[64] = &#123; 7, 12, 17, 22, 7, 12, 17, 22, 7, 12, 17, 22, 7, 12, 17, 22,5, 9, 14, 20, 5, 9, 14, 20, 5, 9, 14, 20, 5, 9, 14, 20, 4, 11,16, 23, 4, 11, 16, 23, 4, 11, 16, 23, 4, 11, 16, 23, 6, 10, 15,21, 6, 10, 15, 21, 6, 10, 15, 21, 6, 10, 15, 21 &#125;; unsigned int k[64] = &#123; 0xd76aa478, 0xe8c7b756, 0x242070db, 0xc1bdceee, 0xf57c0faf, 0x4787c62a, 0xa8304613, 0xfd469501, 0x698098d8, 0x8b44f7af, 0xffff5bb1, 0x895cd7be, 0x6b901122, 0xfd987193, 0xa679438e, 0x49b40821, 0xf61e2562, 0xc040b340, 0x265e5a51, 0xe9b6c7aa, 0xd62f105d, 0x02441453, 0xd8a1e681, 0xe7d3fbc8, 0x21e1cde6, 0xc33707d6, 0xf4d50d87, 0x455a14ed, 0xa9e3e905, 0xfcefa3f8, 0x676f02d9, 0x8d2a4c8a, 0xfffa3942, 0x8771f681, 0x6d9d6122, 0xfde5380c, 0xa4beea44, 0x4bdecfa9, 0xf6bb4b60, 0xbebfbc70, 0x289b7ec6, 0xeaa127fa, 0xd4ef3085, 0x04881d05, 0xd9d4d039, 0xe6db99e5, 0x1fa27cf8, 0xc4ac5665, 0xf4292244, 0x432aff97, 0xab9423a7, 0xfc93a039, 0x655b59c3, 0x8f0ccc92, 0xffeff47d, 0x85845dd1, 0x6fa87e4f, 0xfe2ce6e0, 0xa3014314, 0x4e0811a1, 0xf7537e82, 0xbd3af235, 0x2ad7d2bb, 0xeb86d391 &#125;; //64æ¬¡å¾ªç¯å¤„ç† for (int i = 0; i &lt;= 64; i++) &#123; if (i&lt;64) &#123; unsigned int f; unsigned int g; if (i&lt;16) &#123; f = (b&amp;c)|((~b)&amp;d); g = i; &#125;else if(i&lt;32) &#123; f = (b&amp;d)|((~d)&amp;c); g = (5*i+1)%16; &#125;else if(i&lt;48)&#123; f = b^c^d; g = (3*i+5)%16; &#125;else&#123; f = c^((~d)|b); g = (7*i)%16; &#125; unsigned int * temp = (unsigned int *) [subData[g] bytes]; unsigned int *tem = malloc(sizeof(unsigned int)); memcpy(tem, temp, 4); convertToLittleEndian(tem, 4); unsigned int res = (a+f+*tem+k[i]); ROL(&amp;res,s[i]); unsigned int t = res+b; a = d; d = c; c = b; b = t; &#125;else&#123; A = a+A; B = b+B; C = c+C; D = d+D; &#125; &#125; //å¤§å°ç«¯è½¬æ¢ unsigned int * newA = malloc(sizeof(unsigned int)); memcpy(newA, &amp;A, 4); NSLog(@\"%0x\",*newA); convertToLittleEndian(newA, 4); unsigned int * newB = malloc(sizeof(unsigned int)); memcpy(newB, &amp;B, 4); convertToLittleEndian(newB, 4); unsigned int * newC = malloc(sizeof(unsigned int)); memcpy(newC, &amp;C, 4); convertToLittleEndian(newC, 4); unsigned int * newD = malloc(sizeof(unsigned int)); memcpy(newD, &amp;D, 4); convertToLittleEndian(newD, 4); NSLog(@\"AAA:%0x %0x %0x %0x \",*newA,*newB,*newC,*newD);&#125;","categories":[{"name":"ç¼–ç¨‹ç ç‘","slug":"ç¼–ç¨‹ç ç‘","permalink":"http://huishao.cc/categories/ç¼–ç¨‹ç ç‘/"}],"tags":[],"keywords":[{"name":"ç¼–ç¨‹ç ç‘","slug":"ç¼–ç¨‹ç ç‘","permalink":"http://huishao.cc/categories/ç¼–ç¨‹ç ç‘/"}]},{"title":"iOSå¼€å‘ä¹‹CoreMotionæ¡†æ¶çš„åº”ç”¨","slug":"388iOSå¼€å‘ä¹‹CoreMotionæ¡†æ¶çš„åº”ç”¨","date":"2019-01-21T16:00:00.000Z","updated":"2021-07-15T11:05:22.378Z","comments":true,"path":"2019/01/22/388iOSå¼€å‘ä¹‹CoreMotionæ¡†æ¶çš„åº”ç”¨/","link":"","permalink":"http://huishao.cc/2019/01/22/388iOSå¼€å‘ä¹‹CoreMotionæ¡†æ¶çš„åº”ç”¨/","excerpt":"","text":"iOSå¼€å‘ä¹‹CoreMotionæ¡†æ¶çš„åº”ç”¨æˆ‘ä»¬çŸ¥é“ï¼Œç°åœ¨æ™ºèƒ½æ‰‹æœºæ‰‹æœºçš„åŠŸèƒ½å·²ç»è¶Šæ¥è¶Šå¼ºå¤§ã€‚å°å°çš„æ‰‹æœºä¸­é›†æˆäº†ä¼—å¤šçš„ä¼ æ„Ÿå™¨é…ä»¶ã€‚é€šè¿‡è¿™äº›ä¼ æ„Ÿå™¨å¯ä»¥è·å–åˆ°æ‰‹æœºç”šè‡³ç”¨æˆ·çš„çŠ¶æ€ä¿¡æ¯ã€‚ åœ¨iOS5ä¹‹å‰ï¼ŒåŠ é€Ÿåº¦ä¼ æ„Ÿå™¨çš„ç›¸å…³ä¿¡æ¯å°è£…åœ¨UIAccelerometerè¿™ä¸ªç±»ä¸­ï¼Œå…¶ä¸»è¦ç”¨æ¥è·å–è®¾å¤‡åœ¨ä¸‰ç»´ç©ºé—´ä¸­çš„çŠ¶æ€ä¿¡æ¯ï¼Œä¹‹åï¼ŒåŠ é€Ÿåº¦ä¼ æ„Ÿå™¨ä»¥åŠèºæ—‹ä»ªä¼ æ„Ÿå™¨çš„ç›¸å…³ä¿¡æ¯éƒ½å°è£…åœ¨äº†CoreMotionè¿™ä¸ªæ¡†æ¶ä¸­ï¼Œè¿™ä¸ªæ¡†æ¶å¯¹åŠ é€Ÿåº¦ï¼Œç£åŠ›ä»¥åŠèºæ—‹ä»ªä¼ æ„Ÿå™¨ä¿¡æ¯è¿›è¡Œç»Ÿä¸€ç®¡ç†ï¼Œå¹¶å°è£…äº†è®¸å¤šå¼ºå¤§çš„è®¡ç®—æ–¹æ³•å¸®åŠ©å¼€å‘è€…è·å–è®¾å¤‡çš„ç©ºé—´çŠ¶æ€ã€‚ ä¹‹å‰æœ‰å†™è¿‡ä¸€ç¯‡å…³äºUIAccelerometerä¸CoreMotionç®€å•ä½¿ç”¨çš„åšå®¢ï¼Œæ¯”è¾ƒåç”¨æ³•ä»‹ç»ï¼Œå¹¶ä¸ç³»ç»Ÿï¼Œæœ¬ç¯‡åšå®¢æ˜¯é’ˆå¯¹CoreMotionçš„å®Œå–„ä¸è¡¥å……ã€‚ https://my.oschina.net/u/2340880/blog/543434 ä¸€ã€CoreMotionæ¡†æ¶æ•´ä½“ç»“æ„åœ¨å­¦ä¹ è¿™ä¸ªæ¡†æ¶ä¹‹å‰ï¼Œé¦–å…ˆéœ€è¦å¯¹æ¡†æ¶ä¸­ç±»çš„å…³ç³»ä¸ä½œç”¨æœ‰ä¸ªæ•´ä½“çš„äº†è§£ã€‚ä¸‹å›¾å±•ç¤ºäº†CoreMotionæ¡†æ¶çš„æ•´ä½“ç»“æ„ï¼š ä»ä¸Šå›¾ä¸­å¯ä»¥çœ‹å‡ºï¼ŒCoreMotionæ¡†æ¶ä¸­ä¸»è¦åˆ†ä¸º3å¤§å—ï¼Œä¸€éƒ¨åˆ†æ˜¯ç”¨æ¥è·å–è®¾å¤‡çš„è¿åŠ¨çŠ¶æ€ï¼Œå¦‚é€Ÿåº¦ï¼ŒåŠ é€Ÿåº¦ï¼Œæµ·æ‹”ï¼Œä¸‰ç»´æ–¹å‘ç­‰ã€‚ä¸€éƒ¨åˆ†æ˜¯ç”¨æ¥é…åˆiWatchè¿›è¡Œç”¨æˆ·çš„è¿åŠ¨çŠ¶æ€è·å–ã€å¦ä¸€éƒ¨åˆ†ä¸ºç”¨æˆ·æ­¥æ•°ç›¸å…³æ¥å£ã€‚ äºŒã€CMMotionManagerCMMotionManagerç±»æ˜¯CoreMotionæ¡†æ¶ä¸­éå¸¸æ ¸å¿ƒçš„ä¸€ä¸ªç±»ï¼Œå…¶ç”¨æ¥è¿›è¡Œè®¾å¤‡è¿åŠ¨ä¿¡æ¯çš„æ•´ä½“ç®¡ç†ã€‚ä¸»è¦åŒ…æ‹¬å¼€å¯æ›´æ–°ä¿¡æ¯ï¼Œåœæ­¢æ›´æ–°ä¿¡æ¯ï¼Œè·å–æ›´æ–°ä¿¡æ¯ç­‰ã€‚è§£æå¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758//è·å–åŠ é€Ÿè®¡æ˜¯å¦å¯ç”¨@property(readonly, nonatomic, getter=isAccelerometerAvailable) BOOL accelerometerAvailable;//åŠ é€Ÿè®¡æ›´æ–°é—´éš”@property(assign, nonatomic) NSTimeInterval accelerometerUpdateInterval;//åŠ é€Ÿè®¡æ˜¯å¦åœ¨æŒç»­è¿›è¡Œæ›´æ–°@property(readonly, nonatomic, getter=isAccelerometerActive) BOOL accelerometerActive;//æœ€åä¸€æ¬¡æ›´æ–°çš„åŠ é€Ÿè®¡ä¿¡æ¯ CMAccelerometerDataåé¢ä¼šä»‹ç»@property(readonly, nullable) CMAccelerometerData *accelerometerData;//å¼€å§‹è¿›è¡ŒåŠ é€Ÿè®¡æ•°æ®æ›´æ–°- (void)startAccelerometerUpdates;//å¼€å§‹è¿›è¡ŒåŠ é€Ÿè®¡æ•°æ®æ›´æ–° å¹¶ä¸”æŒ‡å®šå›è°ƒå‡½æ•°ä»¥åŠå›è°ƒå‡½æ•°æ‰§è¡Œçš„çº¿ç¨‹- (void)startAccelerometerUpdatesToQueue:(NSOperationQueue *)queue withHandler:(CMAccelerometerHandler)handler;//åœæ­¢åŠ é€Ÿè®¡æ•°æ®çš„æ›´æ–°- (void)stopAccelerometerUpdates;//é™€èºä»ªæ˜¯å¦å¯ç”¨@property(readonly, nonatomic, getter=isGyroAvailable) BOOL gyroAvailable;//é™€èºä»ªæ•°æ®çš„æ›´æ–°é—´éš”@property(assign, nonatomic) NSTimeInterval gyroUpdateInterval;//é™€èºä»ªæ˜¯å¦åœ¨æŒç»­è¿›è¡Œæ›´æ–°@property(readonly, nonatomic, getter=isGyroActive) BOOL gyroActive;//é™€èºä»ªæ•°æ®@property(readonly, nullable) CMGyroData *gyroData;//å¼€å¯é™€èºä»ªçš„æ›´æ–°- (void)startGyroUpdates;//å¼€å§‹è¿›è¡Œé™€èºä»ªçš„æ›´æ–° å¹¶ä¸”æŒ‡å®šå›è°ƒå‡½æ•°ä»¥åŠå›è°ƒå‡½æ•°æ‰§è¡Œçš„çº¿ç¨‹- (void)startGyroUpdatesToQueue:(NSOperationQueue *)queue withHandler:(CMGyroHandler)handler;//åœæ­¢è¿›è¡Œé™€èºä»ªæ•°æ®çš„æ›´æ–°- (void)stopGyroUpdates;//ç£åŠ›è®¡æ˜¯å¦å¯ç”¨@property(readonly, nonatomic, getter=isMagnetometerAvailable) BOOL magnetometerAvailable;//ç£åŠ›è®¡æ•°æ®æ›´æ–°é—´éš”@property(assign, nonatomic) NSTimeInterval magnetometerUpdateInterval;//ç£åŠ›è®¡æ•°æ®æ˜¯å¦åœ¨æŒç»­æ›´æ–°@property(readonly, nonatomic, getter=isMagnetometerActive) BOOL magnetometerActive;//ç£åŠ›è®¡æ•°æ®@property(readonly, nullable) CMMagnetometerData *magnetometerData;//å¼€å§‹æ›´æ–°ç£åŠ›è®¡æ•°æ®- (void)startMagnetometerUpdates;//å¼€å§‹æ›´æ–°ç£åŠ›è®¡æ•°æ® å¹¶ä¸”æŒ‡å®šå›è°ƒå‡½æ•°ä»¥åŠå›è°ƒå‡½æ•°æ‰§è¡Œçš„çº¿ç¨‹- (void)startMagnetometerUpdatesToQueue:(NSOperationQueue *)queue withHandler:(CMMagnetometerHandler)handler;//åœæ­¢ç£åŠ›è®¡çš„æ›´æ–°- (void)stopMagnetometerUpdates;//è®¾å¤‡è¿åŠ¨æ•°æ®å¹¶éæŸä¸ªä¼ æ„Ÿå™¨çš„æ•°æ® è€Œæ˜¯ä¸Šé¢3ç§ä¼ æ„Ÿå™¨æ•°æ®çš„ç»„åˆä¸è¿ç®—//è®¾å¤‡è¿åŠ¨æ•°æ®æ˜¯å¦å¯ç”¨@property(readonly, nonatomic, getter=isDeviceMotionAvailable) BOOL deviceMotionAvailable;//è®¾å¤‡è¿åŠ¨æ•°æ®æ›´æ–°é—´éš”@property(assign, nonatomic) NSTimeInterval deviceMotionUpdateInterval;//æ˜¯å¦åœ¨æŒç»­æ›´æ–°è®¾å¤‡è¿åŠ¨æ•°æ®@property(readonly, nonatomic, getter=isDeviceMotionActive) BOOL deviceMotionActive;//æœ€åä¸€æ¬¡æ›´æ–°çš„è®¾å¤‡è¿åŠ¨ä¿¡æ¯æ•°æ®@property(readonly, nullable) CMDeviceMotion *deviceMotion;//å¼€å§‹æ›´æ–°è®¾å¤‡è¿åŠ¨æ•°æ®- (void)startDeviceMotionUpdates;//å¼€å§‹æ›´æ–°è®¾å¤‡è¿åŠ¨æ•°æ® å¹¶æŒ‡å®šå›è°ƒå‡½æ•°ä»¥åŠå›è°ƒå‡½æ•°æ‰§è¡Œçš„çº¿ç¨‹- (void)startDeviceMotionUpdatesToQueue:(NSOperationQueue *)queue withHandler:(CMDeviceMotionHandler)handler;//åœæ­¢æ›´æ–°è®¾å¤‡è¿åŠ¨ä¿¡æ¯- (void)stopDeviceMotionUpdates; ä¸Šé¢çš„æ–¹æ³•çœ‹ä¸Šå»éå¸¸ç¹å¤šï¼Œå…¶å®å¾ˆæœ‰è§„å¾‹ï¼Œæ€»çš„æ¥è¯´å°±æ˜¯å¯¹æ˜¯å¦å¼€å¯ä¼ æ„Ÿå™¨æ•°æ®è¿›è¡Œç®¡ç†ï¼Œå¹¶ä¸”è¿›è¡Œä¼ æ„Ÿå™¨æ•°æ®çš„è·å–ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹å‡ ç§å…·ä½“çš„ä¼ æ„Ÿå™¨æ•°æ®ç±»çš„å®šä¹‰ã€‚ ä¸‰ã€æ•°æ®æ¨¡å‹ç±»é¦–å…ˆï¼ŒCoreMotionæ¡†æ¶ä¸­çš„æ•°æ®æ¨¡å‹ç±»éƒ½ç»§æ‰¿è‡ªCMLogItemç±»ï¼Œè¿™ä¸ªç±»é‡Œé¢åªæœ‰ä¸€ä¸ªå±æ€§ï¼š 123@interface CMLogItem : NSObject &lt;NSSecureCoding, NSCopying&gt;@property(readonly, nonatomic) NSTimeInterval timestamp;@end CMLogItemç±»çš„timestampå±æ€§ç”¨æ¥æ ‡è®°æ•°æ®è®°å½•çš„æ—¶é—´æˆ³ã€‚ 1.åŠ é€Ÿè®¡æ•°æ®CMAccelerometerDataæ˜¯åŠ é€Ÿè®¡æ•°æ®çš„æ•°æ®æ¨¡å‹ç±»ï¼š 12345678910@interface CMAccelerometerData : CMLogItem//åŠ é€Ÿè®¡æ•°æ®@property(readonly, nonatomic) CMAcceleration acceleration;@end//åŠ é€Ÿè®¡æ•°æ®ç»“æ„ä½“typedef struct &#123; double x; //xæ–¹å‘åŠ é€Ÿåº¦ double y; //yæ–¹å‘åŠ é€Ÿåº¦ double z; //zæ–¹å‘åŠ é€Ÿåº¦&#125; CMAcceleration; 2ã€é™€èºä»ªæ•°æ®CMGyroDataæ˜¯é™€èºä»ªæ•°æ®çš„æ•°æ®æ¨¡å‹ç±»ï¼š 1234567891011@interface CMGyroData : CMLogItem//è§’é€Ÿåº¦æ•°æ®@property(readonly, nonatomic) CMRotationRate rotationRate;@end//è§’é€Ÿåº¦ç»“æ„ä½“typedef struct &#123; double x; //xæ–¹å‘çš„è§’é€Ÿåº¦ double y; //yæ–¹å‘çš„è§’é€Ÿåº¦ double z; //zæ–¹å‘çš„è§’é€Ÿåº¦&#125; CMRotationRate; 3.ç£å¼ºè®¡æ•°æ®CMMagnetometerDataæ˜¯ç£å¼ºè®¡æ•°æ®æ¨¡å‹ç±»ï¼š 123456789101112@interface CMMagnetometerData : CMLogItem&#123;//ç£å¼ºæ•°æ®@property(readonly, nonatomic) CMMagneticField magneticField;@endtypedef struct &#123; double x; //xè½´ç£åœº double y; //yè½´ç£åœº double z; //zè½´ç£åœº&#125; CMMagneticField; 4.è®¾å¤‡è¿åŠ¨ä¿¡æ¯CMDeviceMotionç±»åŒ…å«äº†è®¾å¤‡çš„ç©ºé—´çŠ¶æ€ä¿¡æ¯ï¼š 1234567891011121314@interface CMDeviceMotion : CMLogItem//è®¾å¤‡çš„ç©ºé—´çŠ¶æ€ CMAttitudeåé¢ä¼šä»‹ç»@property(readonly, nonatomic) CMAttitude *attitude;//è®¾å¤‡çš„ é™€èºä»ªæ•°æ®@property(readonly, nonatomic) CMRotationRate rotationRate;//è®¾å¤‡çš„ åŠ é€Ÿè®¡æ•°æ®@property(readonly, nonatomic) CMAcceleration gravity;//è·å–ç”¨æˆ·ç»™è®¾å¤‡å¸¦æ¥çš„åŠ é€Ÿåº¦@property(readonly, nonatomic) CMAcceleration userAcceleration;//è®¾å¤‡é™„è¿‘ç£åœºç›¸å…³ä¿¡æ¯@property(readonly, nonatomic) CMCalibratedMagneticField magneticField;//è¿”å›èˆªå‘è§’åº¦@property(readonly, nonatomic) double heading;@end CMCalibratedMagneticFieldæ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œå¦‚ä¸‹ï¼š 1234567891011typedef struct &#123; CMMagneticField field; //ç£åœº CMMagneticFieldCalibrationAccuracy accuracy; //ç£åœºå¼ºåº¦&#125; CMCalibratedMagneticField;typedef NS_ENUM(int, CMMagneticFieldCalibrationAccuracy) &#123; CMMagneticFieldCalibrationAccuracyUncalibrated = -1, CMMagneticFieldCalibrationAccuracyLow, //ä½ CMMagneticFieldCalibrationAccuracyMedium,//ä¸­ CMMagneticFieldCalibrationAccuracyHigh//é«˜&#125; ; CMAttitudeç±»ä¸­å°è£…çš„ä¿¡æ¯å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728@interface CMAttitude : NSObject &lt;NSCopying, NSSecureCoding&gt;&#123;//è®¾å¤‡ç¿»æ»šå¼§åº¦@property(readonly, nonatomic) double roll;//æ—‹è½¬å¼§åº¦@property(readonly, nonatomic) double pitch;//èˆªå@property(readonly, nonatomic) double yaw;//æè¿°è®¾å¤‡çŠ¶æ€çš„æ—‹è½¬çŸ©é˜µ@property(readonly, nonatomic) CMRotationMatrix rotationMatrix;//æè¿°è®¾å¤‡å§¿æ€çš„å››å…ƒæ•°@property(readonly, nonatomic) CMQuaternion quaternion;//è¿›è¡Œè½¬æ¢- (void)multiplyByInverseOfAttitude:(CMAttitude *)attitude;@end//å››å…ƒæ•°typedef struct&#123; double x, y, z, w;&#125; CMQuaternion;//çŸ©é˜µtypedef struct &#123; double m11, m12, m13; double m21, m22, m23; double m31, m32, m33;&#125; CMRotationMatrix; å››ã€é«˜åº¦ä¿¡æ¯CoreMotionæ¡†æ¶ä¸­çš„CMAltimeterç±»æä¾›å¯¹è®¾å¤‡é«˜åº¦ç›¸å…³ä¿¡æ¯çš„æ•°æ®æ”¯æŒï¼Œè¿™ä¸ªç±»æ˜¯iOS 8åæ–°åŠ å…¥çš„ï¼ŒCMAltimeterç±»è§£æå¦‚ä¸‹ï¼š 12345678910@interface CMAltimeter : NSObject//æ˜¯å¦æ”¯æŒç›¸å¯¹é«˜åº¦å˜åŒ–+ (BOOL)isRelativeAltitudeAvailable;//è¿›è¡Œç”¨æˆ·æƒé™çš„ç”³è¯·+ (CMAuthorizationStatus)authorizationStatus;//å¼€å§‹æ›´æ–°é«˜åº¦å˜åŒ–ä¿¡æ¯æ•°æ®- (void)startRelativeAltitudeUpdatesToQueue:(NSOperationQueue *)queue withHandler:(CMAltitudeHandler)handler;//åœæ­¢æ›´æ–°é«˜åº¦å˜åŒ–ä¿¡æ¯æ•°æ®- (void)stopRelativeAltitudeUpdates;@end CMAltitudeDataæ˜¯é«˜åº¦ä¿¡æ¯æ•°æ®ï¼š 123456@interface CMAltitudeData : CMLogItem//ç›¸å¯¹é«˜åº¦ å•ä½ä¸ºç±³@property(readonly, nonatomic) NSNumber *relativeAltitude;//å‹åŠ› å•ä½ä¸ºåƒå¸•@property(readonly, nonatomic) NSNumber *pressure;@end äº”ã€ç”¨æˆ·æ´»åŠ¨ä¿¡æ¯CMMotionActivityManagerç±»æ˜¯iOS 7ä¹‹åæ–°å¼•å…¥åˆ°CoreMotionæ¡†æ¶ä¸­çš„ï¼Œè¿™ä¸ªç±»ç”¨æ¥å¯¹ç”¨æˆ·çš„æ´»åŠ¨ä¿¡æ¯è¿›è¡Œç®¡ç†ï¼Œè§£æå¦‚ä¸‹ï¼š 12345678910111213141516@interface CMMotionActivityManager : NSObject//æ´»åŠ¨æ•°æ®æ˜¯å¦å¯ç”¨+ (BOOL)isActivityAvailable;//è¿›è¡Œç”¨æˆ·æƒé™çš„ç”³è¯·+ (CMAuthorizationStatus)authorizationStatus;//è¯·æ±‚æŸä¸€æ®µæ—¶é—´å†…çš„ç”¨æˆ·æ´»åŠ¨ä¿¡æ¯- (void)queryActivityStartingFromDate:(NSDate *)start toDate:(NSDate *)end toQueue:(NSOperationQueue *)queue withHandler:(CMMotionActivityQueryHandler)handler;//å¼€å§‹è¿›è¡Œç”¨æˆ·æ´»åŠ¨ä¿¡æ¯çš„æ›´æ–°- (void)startActivityUpdatesToQueue:(NSOperationQueue *)queue withHandler:(CMMotionActivityHandler)handler;//åœæ­¢ç”¨æˆ·æ´»åŠ¨ä¿¡æ¯çš„æ›´æ–°- (void)stopActivityUpdates;@end CMMotionActivityæ˜¯ç”¨æˆ·æ´»åŠ¨ä¿¡æ¯çš„å…·ä½“è®°å½•: 12345678910111213141516171819202122232425@interface CMMotionActivity : CMLogItem//æ•°æ®çš„å¯ä¿¡åº¦/*typedef NS_ENUM(NSInteger, CMMotionActivityConfidence) &#123; CMMotionActivityConfidenceLow = 0, //å¯ä¿¡åº¦ä½ CMMotionActivityConfidenceMedium, //å¯ä¿¡åº¦ä¸­ CMMotionActivityConfidenceHigh //å¯ä¿¡åº¦é«˜&#125;;*/@property(readonly, nonatomic) CMMotionActivityConfidence confidence;//è®°å½•å¼€å§‹æ—¶é—´@property(readonly, nonatomic) NSDate *startDate;//æ˜¯å¦æ˜¯ä½ç½®çŠ¶æ€ å¦‚æœæ˜¯ å¯èƒ½å…³æœºçŠ¶æ€@property(readonly, nonatomic) BOOL unknown;//è®¾å¤‡æ˜¯å¦æ²¡æœ‰ç§»åŠ¨@property(readonly, nonatomic) BOOL stationary;//è®¾å¤‡æŒæœ‰è€…æ˜¯å¦åœ¨æ­¥è¡Œ@property(readonly, nonatomic) BOOL walking;//è®¾å¤‡æŒæœ‰è€…æ˜¯å¦åœ¨è·‘æ­¥@property(readonly, nonatomic) BOOL running;//è®¾å¤‡æŒæœ‰è€…æ˜¯å¦åœ¨ä¹˜è½¦@property(readonly, nonatomic) BOOL automotive;//è®¾å¤‡æŒæœ‰è€…æ˜¯å¦åœ¨éª‘è‡ªè¡Œè½¦@property(readonly, nonatomic) BOOL cycling;@end å…­ã€ç”¨æˆ·æ‰‹è‡‚åŠ¨ä½œåˆ†æåœ¨iOS 12ç³»ç»Ÿåï¼ŒCoreMotionæ¡†æ¶ä¸­åˆå¼•å…¥äº†ä¸€äº›åˆ—é…åˆiWatchè¿›è¡Œç”¨æˆ·æ‰‹è‡‚åŠ¨ä½œåˆ†æçš„ç±»ï¼Œå¯ä»¥åˆ†æå‡ºç”¨æˆ·æ˜¯å¦å‘ç”Ÿäº†è¿åŠ¨éšœç¢ç­‰ã€‚å…¶ä¸»è¦ç”±CMMovementDisorderManagerç±»è¿›è¡Œç®¡ç†ï¼Œå¦‚ä¸‹ï¼š 12345678910111213141516@interface CMMovementDisorderManager : NSObject//è¿åŠ¨éšœç¢ç®¡ç†ç±»æ˜¯å¦å¯ç”¨+ (BOOL)isAvailable;//è¿›è¡Œç”¨æˆ·æƒé™çš„è¯·æ±‚+ (CMAuthorizationStatus)authorizationStatus;//è®°å½•å’Œè®¡ç®—ä¸€æ®µæ—¶é—´å†…çš„éœ‡é¢¤å’Œè¿åŠ¨å¼‚å¸¸ç»“æœ- (void)monitorKinesiasForDuration:(NSTimeInterval)duration;//è·å–ä¸€æ®µæ—¶é—´å†…çš„è¿åŠ¨éšœç¢è®°å½•æ•°æ®- (void)queryDyskineticSymptomFromDate:(NSDate *)fromDate toDate:(NSDate *)toDate withHandler:(CMDyskineticSymptomResultHandler)handler;//è·å–ä¸€æ®µæ—¶é—´å†…çš„éœ‡é¢¤è®°å½•æ•°æ®- (void)queryTremorFromDate:(NSDate *)fromDate toDate:(NSDate *)toDate withHandler:(CMTremorResultHandler)handler;//æœ€åä¸€æ¬¡æ›´æ–°æ•°æ®çš„æ—¶é—´- (NSDate * _Nullable)lastProcessedDate;//æœ€åä¸€æ¬¡è®¡ç®—æ•°æ®çš„è¿‡æœŸæ—¶é—´- (NSDate * _Nullable)monitorKinesiasExpirationDate;@end CMDyskineticSymptomResultè¿åŠ¨éšœç¢æ•°æ®æ¨¡å‹ï¼š 12345678910@interface CMDyskineticSymptomResult : NSObject &lt;NSCopying, NSSecureCoding&gt;//è®°å½•æ•°æ®çš„å¼€å§‹æ—¶é—´@property (copy, nonatomic, readonly) NSDate *startDate;//è®°å½•æ•°æ®çš„ç»“æŸæ—¶é—´@property (copy, nonatomic, readonly) NSDate *endDate;//è¿åŠ¨å¼‚å¸¸å¯èƒ½å‡ºç°çš„ç™¾åˆ†æ¯” @property (nonatomic, readonly) float percentUnlikely;//æ­£å¸¸çš„ç™¾åˆ†æ¯”@property (nonatomic, readonly) float percentLikely;@end CMTremorResultè®°å½•ç”¨æˆ·éœ‡é¢¤æ•°æ®ï¼š 1234567891011121314151617@interface CMTremorResult : NSObject &lt;NSCopying, NSSecureCoding&gt;//æ•°æ®è®°å½•å¼€å§‹æ—¶é—´@property (copy, nonatomic, readonly) NSDate *startDate;//æ•°æ®è®°å½•ç»“æŸæ—¶é—´@property (copy, nonatomic, readonly) NSDate *endDate;//æ— æ³•ç¡®å®šçš„æ—¶é—´ç™¾åˆ†æ¯”@property (nonatomic, readonly) float percentUnknown;//æœªæ£€æµ‹åˆ°éœ‡é¢¤çš„æ—¶é—´ç™¾åˆ†æ¯”@property (nonatomic, readonly) float percentNone;//å¯èƒ½å‘ç”Ÿéœ‡é¢¤çš„ç™¾åˆ†æ¯”ä½ å¾®éœ‡é¢¤@property (nonatomic, readonly) float percentSlight;//å¯èƒ½å‘ç”Ÿéœ‡é¢¤çš„ç™¾åˆ†æ¯”é«˜ å¾®éœ‡é¢¤@property (nonatomic, readonly) float percentMild;//å¯èƒ½å‘ç”Ÿéœ‡é¢¤çš„ç™¾åˆ†æ¯”é«˜ ä¸­ç­‰éœ‡é¢¤@property (nonatomic, readonly) float percentModerate;//å¯èƒ½å‘ç”Ÿéœ‡é¢¤çš„ç™¾åˆ†æ¯”é«˜ é«˜éœ‡é¢¤@property (nonatomic, readonly) float percentStrong; ä¸ƒã€è®¡æ­¥å™¨åº”ç”¨åœ¨iOS 8ä¹‹åï¼ŒCoreMotionä¸­å¼•å…¥äº†CMPedometerç›¸å…³è®¡æ­¥å™¨ç±»ï¼Œè¿™äº›ç±»å°è£…çš„æ›´åŠ åº”ç”¨å±‚ï¼Œå¼€å‘è€…å¯ä»¥ç›´æ¥è·å–ç”¨æˆ·æ­¥æ•°ç›¸å…³æ•°æ®ï¼ŒCMPedometeræ˜¯ç®¡ç†ç±»ï¼Œè§£æå¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829@interface CMPedometer : NSObject//è®¡æ­¥å™¨æ˜¯å¦å¯ç”¨+ (BOOL)isStepCountingAvailable;//è·ç¦»æ£€æµ‹æ˜¯å¦å¯ç”¨+ (BOOL)isDistanceAvailable;//æ¥¼å±‚æ£€æµ‹æ˜¯å¦å¯ç”¨+ (BOOL)isFloorCountingAvailable;//é€Ÿåº¦ä¼°ç®—æ˜¯å¦æ”¯æŒ+ (BOOL)isPaceAvailable;//é¢‘ç‡ä¼°ç®—æ˜¯å¦æ”¯æŒ+ (BOOL)isCadenceAvailable;//è®¡æ­¥å™¨åŠŸèƒ½æ˜¯å¦æ”¯æŒ+ (BOOL)isPedometerEventTrackingAvailable;//è¿›è¡Œç”¨æˆ·æƒé™ç”³è¯·+ (CMAuthorizationStatus)authorizationStatus;//è¯·æ±‚ä¸€æ®µæ—¶é—´çš„è®¡æ­¥å™¨æ•°æ®- (void)queryPedometerDataFromDate:(NSDate *)start toDate:(NSDate *)end withHandler:(CMPedometerHandler)handler;//è¯·æ±‚ä»æŸä¸ªæ—¶é—´è‡³ä»Šçš„è®¡æ­¥å™¨æ•°æ®- (void)startPedometerUpdatesFromDate:(NSDate *)start withHandler:(CMPedometerHandler)handler;//åœæ­¢è®¡æ­¥å™¨æ•°æ®æ›´æ–°- (void)stopPedometerUpdates;//å¼€å§‹æ›´æ–°è®¡æ­¥å™¨äº‹ä»¶- (void)startPedometerEventUpdatesWithHandler:(CMPedometerEventHandler)handler;//åœæ­¢æ›´æ–°è®¡æ•°å™¨äº‹ä»¶- (void)stopPedometerEventUpdates;@end CMPedometerEventç±»è®°å½•è®¡æ­¥å™¨çš„äº‹ä»¶å˜åŒ–ï¼š 1234567891011@interface CMPedometerEvent : NSObject &lt;NSSecureCoding, NSCopying&gt;//è®°å½•æ•°æ®çš„æ—¶é—´@property(readonly, nonatomic) NSDate *date;/*typedef NS_ENUM(NSInteger, CMPedometerEventType) &#123; CMPedometerEventTypePause, //è®¡æ­¥å™¨æš‚åœ CMPedometerEventTypeResume //è®¡æ­¥å™¨æ¢å¤&#125;*/@property(readonly, nonatomic) CMPedometerEventType type;@end CMPedometerDataè®¡æ­¥å™¨æ•°æ®ç±»ï¼š 1234567891011121314151617181920@interface CMPedometerData//è®°å½•å¼€å§‹æ—¶é—´@property(readonly, nonatomic) NSDate *startDate;//è®°å½•ç»“æŸæ—¶é—´@property(readonly, nonatomic) NSDate *endDate;//æ­¥æ•°@property(readonly, nonatomic) NSNumber *numberOfSteps;//è·ç¦»@property(readonly, nonatomic, nullable) NSNumber *distance;//é€šè¿‡æ¥¼æ¢¯ä¸Šå‡çš„æ¥¼å±‚æ•°@property(readonly, nonatomic, nullable) NSNumber *floorsAscended;//é€šè¿‡æ¥¼æ¢¯ä¸‹é™çš„æ¥¼å±‚æ•°@property(readonly, nonatomic, nullable) NSNumber *floorsDescended;//ä¼°ç®—é€Ÿåº¦@property(readonly, nonatomic, nullable) NSNumber *currentPace;//æ­¥æ•°é¢‘ç‡@property(readonly, nonatomic, nullable) NSNumber *currentCadence;//å¹³å‡é€Ÿåº¦@property(readonly, nonatomic, nullable) NSNumber *averageActivePace;@end åœ¨CoreMotionä¸­ï¼ŒCMStepCounterä¹Ÿæ˜¯ä¸€ä¸ªè®°å½•å™¨ç±»ï¼Œå…¶æ¯”è¾ƒç®€æ˜“ï¼Œåªåœ¨iOS8ä¹‹å‰è¿›è¡Œä½¿ç”¨ï¼Œè§£æå¦‚ä¸‹ï¼š 123456789101112131415@interface CMStepCounter : NSObject//è®¡æ­¥å™¨æ˜¯å¦å¯ç”¨+ (BOOL)isStepCountingAvailable;//è¯·æ±‚ä¸€æ®µæ—¶é—´å†…çš„æ­¥æ•°ä¿¡æ¯- (void)queryStepCountStartingFrom:(NSDate *)start to:(NSDate *)end toQueue:(NSOperationQueue *)queue withHandler:(CMStepQueryHandler)handler;//è¿›è¡Œä¸æ˜¯æ›´æ–°- (void)startStepCountingUpdatesToQueue:(NSOperationQueue *)queue updateOn:(NSInteger)stepCounts withHandler:(CMStepUpdateHandler)handler;//åœæ­¢è®¡æ­¥å™¨æ›´æ–°- (void)stopStepCountingUpdates;@end","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSå¼€å‘ä¹‹CoreLocationæ¡†æ¶ä½¿ç”¨","slug":"387iOSå¼€å‘ä¹‹CoreLocationæ¡†æ¶ä½¿ç”¨","date":"2018-12-25T16:00:00.000Z","updated":"2021-07-15T11:02:24.379Z","comments":true,"path":"2018/12/26/387iOSå¼€å‘ä¹‹CoreLocationæ¡†æ¶ä½¿ç”¨/","link":"","permalink":"http://huishao.cc/2018/12/26/387iOSå¼€å‘ä¹‹CoreLocationæ¡†æ¶ä½¿ç”¨/","excerpt":"","text":"iOSå¼€å‘ä¹‹CoreLocationæ¡†æ¶ä½¿ç”¨CoreLocationæ¡†æ¶æ˜¯iOSå¼€å‘ä¸­æ¯”è¾ƒåŸºç¡€çš„ä¸€ä¸ªä½ç½®ä¿¡æ¯ç›¸å…³æ¡†æ¶ï¼Œå…³äºå®šä½å’Œåœ°å›¾ï¼Œä¹‹å‰ä¹Ÿæœ‰åšå®¢å¤šè¯¦ç»†çš„ä»‹ç»ã€‚ä½†æ˜¯å¯¹äºCoreLocationæ¡†æ¶ï¼Œå¹¶æ²¡æœ‰å®Œæ•´å’Œç»†è‡´çš„è®°å½•ã€‚æœ¬ç¯‡åšå®¢å°†å‰–æè¿™ä¸ªæ¡†æ¶çš„ç»“æ„å¹¶è¿›è¡Œåº”ç”¨ç¤ºä¾‹ã€‚ä¸‹å›¾ä¸ºCoreLocationæ¡†æ¶çš„ç›¸å…³ç±»å¸ƒå±€å›¾ï¼š ä»å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œåœ¨CoreLocationæ¡†æ¶ä¸­é™¤äº†ä¸€äº›æ•°æ®æ¨¡å‹ï¼ŒCLLocationManagerä½œç”¨æœ€ä¸ºé‡è¦ï¼Œå®ƒæ˜¯æ•´ä¸ªæ¡†æ¶çš„ç®¡ç†ä¸­å¿ƒï¼Œä»å›¾ä¸­ä¹Ÿå¯ä»¥çœ‹å‡ºï¼ŒCoreLocationæ¡†æ¶åŠŸèƒ½ä¹Ÿéå¸¸å®Œå–„ï¼Œå¸¸è§„å®šä½ï¼Œæ–¹å‘ä¿¡æ¯è·å–ï¼Œå®¤å†…å®šä½ï¼ŒGEOç¼–ç ç­‰åŠŸèƒ½éƒ½æ”¯æŒã€‚ ä¸€ã€CLLocationManagerç®¡ç†ç±»è¯¦è§£CLLocationManagerä½œä¸ºæ•´ä¸ªCoreLocationæ¡†æ¶çš„æ ¸å¿ƒç®¡ç†ç±»ï¼Œå…¶ç¬¬ä¸€éƒ¨åˆ†åŠŸèƒ½æ˜¯è·å–è®¾å¤‡çš„åŠŸèƒ½å¯ç”¨æ€§ï¼Œå¦‚ä¸‹ï¼š 1234567891011121314//è·å–ä½ç½®æœåŠ¡æ˜¯å¦å¯ç”¨+ (BOOL)locationServicesEnabled;//è·å–æ–¹å‘ä¿¡æ¯æœåŠ¡æ˜¯å¦å¯ç”¨+ (BOOL)headingAvailable;//è·å–è®¾å¤‡æ˜¯å¦æ”¯æŒæ˜¾è‘—ä½ç½®æ›´æ”¹çš„ç›‘å¬+ (BOOL)significantLocationChangeMonitoringAvailable;//è·å–æ˜¯å¦æ”¯æŒé’ˆå¯¹æŸç§ä½ç½®åŒºåŸŸæ”¹å˜çš„ç›‘å¬+ (BOOL)isMonitoringAvailableForClass:(Class)regionClass;//è·å–æ˜¯å¦æ”¯æŒåŒºåŸŸç›‘å¬ åŒä¸Šé¢ä¸€ä¸ªå‡½æ•°ä½œç”¨ä¸€è‡´+ (BOOL)regionMonitoringAvailable;//è·å–åŒºåŸŸç›‘å¬æ˜¯å¦å¯ç”¨ é™¤äº†è®¾å¤‡æ”¯æŒ è¿˜éœ€è¦ ç”¨æˆ·æˆæƒ+ (BOOL)regionMonitoringEnabled;//è·å–æ˜¯å¦æ”¯æŒæµ‹è·+ (BOOL)isRangingAvailable; åœ¨ä½¿ç”¨CLLocationManagerçš„æœåŠ¡ä¹‹å‰ï¼Œé¦–å…ˆéœ€è¦è·å–ç”¨æˆ·çš„æˆæƒï¼Œåœ¨iOS8ä¹‹åï¼Œè¿˜éœ€è¦åœ¨info.plistä¸­æ·»åŠ ç›¸å…³çš„é”®ï¼Œå¦‚ä¸‹ï¼š ä¸Šé¢æ ‡å‡ºçš„3ä¸ªé”®ï¼Œåªéœ€è¦è®¾ç½®ä¸€ä¸ªï¼Œæ ¹æ®è‡ªå·±çš„å®šä½è¦æ±‚æ¥é€‰æ‹©å³å¯ã€‚ ä¸‹é¢åˆ—å‡ºäº†ä¸ç”¨æˆ·æˆæƒç›¸å…³çš„æ–¹æ³•ï¼š 123456789101112131415//è·å–å½“å‰ç”¨æˆ·æˆæƒç±»å‹/*CLAuthorizationStatusæšä¸¾å¦‚ä¸‹ï¼škCLAuthorizationStatusNotDetermined ç”¨æˆ·ç›®å‰è¿˜æ²¡æœ‰é€‰æ‹©kCLAuthorizationStatusRestricted å½“å‰åº”ç”¨å°šæœªæˆæƒkCLAuthorizationStatusDenied ç”¨æˆ·æ‹’ç»ä½¿ç”¨ä½ç½®æœåŠ¡kCLAuthorizationStatusAuthorizedAlways ç”¨æˆ·æˆæƒå§‹ç»ˆå¯ä»¥ä½¿ç”¨ä½ç½®æœåŠ¡kCLAuthorizationStatusAuthorizedWhenInUse ç”¨æˆ·æˆæƒå¯ä»¥åœ¨APPä½¿ç”¨æ—¶ä½¿ç”¨ä½ç½®kCLAuthorizationStatusAuthorized ç”¨æˆ·æˆæƒä½¿ç”¨ä½ç½® iOS8ä¹‹å‰*/+ (CLAuthorizationStatus)authorizationStatus;//è¯·æ±‚åœ¨APPä½¿ç”¨æ—¶ä½¿ç”¨ç”¨æˆ·çš„ä½ç½®ä¿¡æ¯- (void)requestWhenInUseAuthorization;//è¯·æ±‚å§‹ç»ˆä½¿ç”¨ç”¨æˆ·çš„ä½ç½®ä¿¡æ¯- (void)requestAlwaysAuthorization; ä¸‹é¢åˆ—ä¸¾äº†CLLocationManagerä¸­æ ¸å¿ƒçš„å±æ€§å’Œæ–¹æ³•ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586//è®¾ç½®ä»£ç†@property(assign, nonatomic, nullable) id&lt;CLLocationManagerDelegate&gt; delegate;//å®šä½æœåŠ¡æ˜¯å¦å¯ç”¨@property(readonly, nonatomic) BOOL locationServicesEnabled;//ä½ç½®æœåŠ¡çš„ç”¨é€”ï¼Œç›®å‰è¿™ä¸ªå±æ€§ä¸å†ä½¿ç”¨ï¼Œåœ¨info.plistä¸­é…ç½®@property(copy, nonatomic, nullable) NSString *purpose;//æŒ‡å®šå®šä½æ´»åŠ¨çš„è¡Œä¸º/*CLActivityTypeAutomotiveNavigation æ±½è½¦å¯¼èˆªCLActivityTypeFitness æ­¥è¡ŒCLActivityTypeOtherNavigation å…¶ä»–å¯¼èˆª å¦‚ç«è½¦ è½®èˆ¹CLActivityTypeAirborne é£æœºå¯¼èˆªCLActivityTypeOther å…¶ä»–ç±»å‹*/@property(assign, nonatomic) CLActivityType activityType;//è®¾ç½®ä»¥ç±³ä¸ºå•ä½çš„ç²¾åº¦ï¼Œå½“å°äºæ­¤ç²¾åº¦çš„ä½ç½®æ”¹å˜ä¸ä¼šæ”¶åˆ°é€šçŸ¥CLLocationDistanceå°±æ˜¯doubleç±»å‹@property(assign, nonatomic) CLLocationDistance distanceFilter;//è®¾ç½®é¢„æœŸçš„å®šä½ç²¾åº¦CLLocationAccuracyä¸ºdoubleç±»å‹ ä¸ä¸€å®šå®Œå…¨ç²¾å‡† åªæ˜¯è®¾ç½®é¢„æœŸ@property(assign, nonatomic) CLLocationAccuracy desiredAccuracy;//è®¾ç½®æ˜¯å¦è‡ªåŠ¨æš‚åœä½ç½®æ›´æ–° æ ¹æ®ç”µé‡ç­‰@property(assign, nonatomic) BOOL pausesLocationUpdatesAutomatically;//è®¾ç½®æ˜¯å¦åœ¨åå°ä¸€ç›´æ›´æ–°å®šä½@property(assign, nonatomic) BOOL allowsBackgroundLocationUpdates;//å½“åå°å®šä½æ—¶ æ˜¯å¦æ˜¾ç¤ºæ´»åŠ¨æŒ‡ç¤ºå™¨ åœ¨çŠ¶æ€æ ä¸Š@property(assign, nonatomic) BOOL showsBackgroundLocationIndicator;//æœ€è¿‘çš„ä¸€æ¬¡ä½ç½®ä¿¡æ¯@property(readonly, nonatomic, copy, nullable) CLLocation *location;//æ˜¯å¦æ”¯æŒæ–¹å‘@property(readonly, nonatomic) BOOL headingAvailable;//è®¾ç½®æœ€å°æ–¹å‘æ›´æ–°ç²¾åº¦@property(assign, nonatomic) CLLocationDegrees headingFilter;//ç”¨æ¥ä½œä¸ºå‚è€ƒçš„ç‰©ç†è®¾å¤‡æ–¹å‘/* CLDeviceOrientationUnknown , CLDeviceOrientationPortrait, CLDeviceOrientationPortraitUpsideDown, CLDeviceOrientationLandscapeLeft, CLDeviceOrientationLandscapeRight, CLDeviceOrientationFaceUp, CLDeviceOrientationFaceDown*/@property(assign, nonatomic) CLDeviceOrientation headingOrientation;//æœ€è¿‘ä¸€æ¬¡æ›´æ–°çš„æ–¹å‘ä¿¡æ¯@property(readonly, nonatomic, copy, nullable) CLHeading *heading;//è®¾ç½®æœ€å¤§çš„åŒºåŸŸç›‘å¬èŒƒå›´@property (readonly, nonatomic) CLLocationDistance maximumRegionMonitoringDistance;//ä¸€ç»„ç›®å‰æ­£åœ¨ç›‘å¬çš„èŒƒå›´é›†åˆ@property (readonly, nonatomic, copy) NSSet&lt;__kindof CLRegion *&gt; *monitoredRegions;//è¿”å›ä¸€ç»„æ”¯æŒæµ‹è·çš„èŒƒå›´@property (readonly, nonatomic, copy) NSSet&lt;__kindof CLRegion *&gt; *rangedRegions;//å¼€å§‹æ›´æ–°ä½ç½®ä¿¡æ¯- (void)startUpdatingLocation;//åœæ­¢æ›´æ–°ä½ç½®ä¿¡æ¯- (void)stopUpdatingLocation;//è¯·æ±‚ä¸€æ¬¡ä½ç½®ä¿¡æ¯- (void)requestLocation;//å¼€å§‹æ›´æ–°æ–¹å‘ä¿¡æ¯- (void)startUpdatingHeading;//åœæ­¢æ›´æ–°æ–¹å‘ä¿¡æ¯- (void)stopUpdatingHeading;//å–æ¶ˆèˆªå‘æ ¡å‡†- (void)dismissHeadingCalibrationDisplay;//å¼€å§‹æ˜¾è‘—ä½ç½®å˜åŒ–çš„ç›‘å¬- (void)startMonitoringSignificantLocationChanges;//åœæ­¢çº¿æŸä½ç½®å˜åŒ–çš„ç›‘å¬- (void)stopMonitoringSignificantLocationChanges;//å¼€å¯èŒƒå›´ç›‘å¬- (void)startMonitoringForRegion:(CLRegion *)region desiredAccuracy:(CLLocationAccuracy)accuracy;- (void)startMonitoringForRegion:(CLRegion *)region;//åœæ­¢èŒƒå›´ç›‘å¬- (void)stopMonitoringForRegion:(CLRegion *)region;//è·å–æŒ‡å®šåŒºåŸŸçš„çŠ¶æ€ ä¼šåœ¨ä»£ç†å›è°ƒä¸­è¿”å›- (void)requestStateForRegion:(CLRegion *)region;//å¼€å§‹è®¡ç®—ä¿¡æ ‡èŒƒå›´ å…³äºBeacon æ˜¯ä¸€ç§ä¸“é—¨çš„å®¤å†…å®šä½æœåŠ¡- (void)startRangingBeaconsInRegion:(CLBeaconRegion *)region;//åœæ­¢è®¡ç®—ä¿¡æ ‡èŒƒå›´- (void)stopRangingBeaconsInRegion:(CLBeaconRegion *)region;//å…è®¸å»¶è¿Ÿæ›´æ–° å³ä½ç½®æ”¹å˜äº†å¤šå°‘è·ç¦»æˆ–è€…é—´éš”äº†å¤šå°‘ç§’åæ›´æ–°- (void)allowDeferredLocationUpdatesUntilTraveled:(CLLocationDistance)distance timeout:(NSTimeInterval)timeout;//ä¸å…è®¸è¿›è¡Œå»¶è¿Ÿæ›´æ–°- (void)disallowDeferredLocationUpdates;//è®¾å¤‡æ˜¯å¦æ”¯æŒå»¶è¿Ÿæ›´æ–°+ (BOOL)deferredLocationUpdatesAvailable; äºŒã€CLLocationManagerDelegateåè®®CLLocationManagerDelegateé…åˆCLLocationManagerè¿›è¡Œä½¿ç”¨ï¼Œå…¶ä¸­å®šä¹‰äº†ç®¡ç†å™¨åœ¨æä¾›æœåŠ¡æ—¶è¿›è¡Œå›è°ƒçš„ç›¸å…³å‡½æ•°ã€‚è§£æå¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455//ä½ç½®æ›´æ–°åè°ƒç”¨çš„å›è°ƒ ä¼šå°†åŸä½ç½®å’Œæ›´æ–°åçš„ä½ç½®ä¿¡æ¯ä¼ å…¥- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation;//ä½ç½®æ›´æ–°åè°ƒç”¨çš„å›è°ƒ ä¼šä¼ å…¥æŒ‰æ—¶é—´æ’åºçš„ä¸€ç»„ä½ç½®ä¿¡æ¯å¯¹è±¡- (void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray&lt;CLLocation *&gt; *)locations;//æ–¹å‘ä¿¡æ¯æ›´æ–°åè°ƒç”¨çš„å›è°ƒ- (void)locationManager:(CLLocationManager *)manager didUpdateHeading:(CLHeading *)newHeading;//è¿”å›å¸ƒå°”å€¼è®¾ç½®æ˜¯å¦éœ€è¦è¿›è¡Œæ–¹å‘æ ¡å‡†- (BOOL)locationManagerShouldDisplayHeadingCalibration:(CLLocationManager *)manager;//å½“ç›‘å¬çš„åŒºåŸŸçŠ¶æ€å˜åŒ–æ—¶è°ƒç”¨/*CLRegionStateå®šä¹‰åŒºåŸŸçš„çŠ¶æ€CLRegionStateUnknown æœªçŸ¥çŠ¶æ€CLRegionStateInside è¿›å…¥CLRegionStateOutside å‡ºå»*/- (void)locationManager:(CLLocationManager *)manager didDetermineState:(CLRegionState)state forRegion:(CLRegion *)region ;//åŒºåŸŸå†…æœ‰æ–°çš„ä¿¡æ ‡å¯ç”¨æ—¶è°ƒç”¨- (void)locationManager:(CLLocationManager *)manager didRangeBeacons:(NSArray&lt;CLBeacon *&gt; *)beacons inRegion:(CLBeaconRegion *)region;//åŒºåŸŸå†…çš„ä¿¡æ ‡æµ‹è·å‘ç”Ÿé”™è¯¯æ—¶è°ƒç”¨- (void)locationManager:(CLLocationManager *)manager rangingBeaconsDidFailForRegion:(CLBeaconRegion *)region withError:(NSError *)error;//è¿›å…¥ç›‘å¬åŒºåŸŸæ—¶è°ƒç”¨- (void)locationManager:(CLLocationManager *)manager didEnterRegion:(CLRegion *)region;//é€€å‡ºç›‘å¬åŒºåŸŸæ—¶è°ƒç”¨- (void)locationManager:(CLLocationManager *)manager didExitRegion:(CLRegion *)region;//æœåŠ¡å‘ç”Ÿé”™è¯¯æ—¶è°ƒç”¨- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error;//ç›‘å¬åŒºåŸŸå‘ç”Ÿé”™è¯¯æ—¶è°ƒç”¨- (void)locationManager:(CLLocationManager *)manager monitoringDidFailForRegion:(nullable CLRegion *)region withError:(NSError *)error;//ç”¨æˆ·æˆæƒæ”¹å˜æ—¶è°ƒç”¨- (void)locationManager:(CLLocationManager *)manager didChangeAuthorizationStatus:(CLAuthorizationStatus)status;//å¼€å¯åŒºåŸŸç›‘å¬æ—¶è°ƒç”¨- (void)locationManager:(CLLocationManager *)manager didStartMonitoringForRegion:(CLRegion *)region;//æš‚åœä½ç½®æ›´æ–°æ—¶è°ƒç”¨- (void)locationManagerDidPauseLocationUpdates:(CLLocationManager *)manager;//æ¢å¤ä½ç½®æ›´æ–°æ—¶è°ƒç”¨- (void)locationManagerDidResumeLocationUpdates:(CLLocationManager *)manager;//å»¶è¿Ÿæ›´æ–°ä½ç½®ä¿¡æ¯é”™è¯¯æ—¶è°ƒç”¨- (void)locationManager:(CLLocationManager *)manager didFinishDeferredUpdatesWithError:(nullable NSError *)error;//å¦‚æœå¯ç”¨äº†è®¿é—®ç›‘å¬ åˆ™æ”¶åˆ°è®¿é—®ä¼šè°ƒç”¨- (void)locationManager:(CLLocationManager *)manager didVisit:(CLVisit *)visit; ä¸‰ã€è¿›è¡ŒGEOç¼–ç çš„å·¥å…·ç±»CLGeocoderå¦‚å‰æ‰€è¿°ï¼Œä½¿ç”¨CLLocationManagerè·å–åˆ°çš„ä½ç½®ä¿¡æ¯æ˜¯CLLocationå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å°è£…äº†ç»çº¬åº¦ç­‰åŸºç¡€ä¿¡æ¯ï¼Œä½†æ˜¯åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¾€å¾€éœ€è¦è·å–åˆ°çš„æ˜¯ä½ç½®çš„æ›´å¤šå®é™…ä¿¡æ¯ï¼Œæ¯”å¦‚å›½å®¶ï¼Œçœä»½ï¼ŒåŸå¸‚ç­‰ç­‰ï¼ŒGEOç¼–ç çš„ä½œç”¨å°±æ˜¯é€šè¿‡ç»çº¬åº¦ä¿¡æ¯å‘èµ·è¯·æ±‚ï¼Œè·å–ç°å®æ„ä¹‰çš„æ›´å¤šæ•°æ®ã€‚CLGeocoderç±»è§£æå¦‚ä¸‹ï¼š 123456789101112131415161718192021//æ˜¯å¦æ­£åœ¨è¿›è¡ŒGEOç¼–ç @property (nonatomic, readonly, getter=isGeocoding) BOOL geocoding;//ååœ°ç†ä½ç½®ä¿¡æ¯ç¼–ç  /*CLGeocodeCompletionHandlerä¼šä¼ å›ä¸€ç»„æ ‡å¿—å»ºç­‘ç‰©*/- (void)reverseGeocodeLocation:(CLLocation *)location completionHandler:(CLGeocodeCompletionHandler)completionHandler;//ä½œç”¨åŒä¸Š localç”¨æ¥è®¾ç½®åŒºåŸŸ å¯ä»¥é€šè¿‡è¿™ä¸ªå‚æ•°æ§åˆ¶è¿”å›çš„è¯­è¨€- (void)reverseGeocodeLocation:(CLLocation *)location preferredLocale:(nullable NSLocale *)locale completionHandler:(CLGeocodeCompletionHandler)completionHandler;//ä¸‹é¢è¿™äº›æ–¹æ³•é€šå¸¸ä¸ AddressBooké…åˆä½¿ç”¨//å°†åœ°å€ä¿¡æ¯å­—å…¸è¿›è¡Œç¼–ç  è¿™ä¸ªæ–¹æ³•ä¸AddressBookæ¡†æ¶é…åˆä½¿ç”¨ AddressBookæ¡†æ¶ä¸­å®šä¹‰è¿™ä¸ªå­—å…¸- (void)geocodeAddressDictionary:(NSDictionary *)addressDictionary completionHandler:(CLGeocodeCompletionHandler)completionHandler;- (void)geocodeAddressString:(NSString *)addressString completionHandler:(CLGeocodeCompletionHandler)completionHandler;- (void)geocodeAddressString:(NSString *)addressString inRegion:(nullable CLRegion *)region completionHandler:(CLGeocodeCompletionHandler)completionHandler;- (void)geocodeAddressString:(NSString *)addressString inRegion:(nullable CLRegion *)region preferredLocale:(nullable NSLocale *)locale completionHandler:(CLGeocodeCompletionHandler)completionHandler;//å¯¹é‚®ç¼–åœ°å€è¿›è¡ŒGEOç¼–ç - (void)geocodePostalAddress:(CNPostalAddress *)postalAddress completionHandler:(CLGeocodeCompletionHandler)completionHandler;- (void)geocodePostalAddress:(CNPostalAddress *)postalAddress preferredLocale:(nullable NSLocale *)locale completionHandler:(CLGeocodeCompletionHandler)completionHandler;//å–æ¶ˆç¼–ç - (void)cancelGeocode; å››ã€ä½ç½®ä¿¡æ¯æ¨¡å‹CLLocationç›¸å…³ç±»é¦–å…ˆåœ¨CoreLocationæ¡†æ¶ä¸­ï¼Œä½ç½®çš„ç»çº¬åº¦æ˜¯ç”±CLLocationCoordinate2Dç»“æ„ä½“æè¿°çš„ï¼Œè¿™ä¸ªç»“æ„ä½“å®šä¹‰å¦‚ä¸‹ï¼š 1234struct CLLocationCoordinate2D &#123; CLLocationDegrees latitude; //ç²¾åº¦ CLLocationDegrees longitude;//ç»´åº¦&#125;; ä½¿ç”¨ä¸‹é¢çš„å‡½æ•°å¯ä»¥å¿«é€Ÿçš„æ£€æŸ¥å’Œåˆ›å»ºCLLocationCoordinate2Då¯¹è±¡ï¼š 1234//æ£€æŸ¥ç»çº¬åº¦å¯¹è±¡æ˜¯å¦æœ‰æ•ˆBOOL CLLocationCoordinate2DIsValid(CLLocationCoordinate2D coord);//åˆ›å»ºå¯¹è±¡CLLocationCoordinate2D CLLocationCoordinate2DMake(CLLocationDegrees latitude, CLLocationDegrees longitude); CLFloorç±»æ˜¯ä¸€ä¸ªç”¨æ¥æè¿°æ¥¼å±‚ä¿¡æ¯çš„æ¨¡å‹ï¼Œå¹¶ä¸ä¸€å®šç²¾å‡†ï¼Œæ˜¯åŸºäºåœ°é¢çš„ç²—ç•¥è®¡ç®—ï¼Œå…¶ä¸­å±æ€§å¦‚ä¸‹ï¼š 12345@interface CLFloor : NSObject &lt;NSCopying, NSSecureCoding&gt;//æ¥¼å±‚ åœ°ä¸‹å®¤å¯èƒ½ä¸ºè´Ÿå€¼@property(readonly, nonatomic) NSInteger level;@end ä¸‹é¢åˆ—ä¸¾äº†CLLocationä¸­å°è£…çš„å±æ€§çš„æ–¹æ³•ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445//åˆå§‹åŒ–æ–¹æ³•//é€šè¿‡ç»çº¬åº¦åˆå§‹åŒ– CLLocationDegreeså°±æ˜¯doubleç±»å‹- (instancetype)initWithLatitude:(CLLocationDegrees)latitude longitude:(CLLocationDegrees)longitude;//åˆå§‹åŒ–æ–¹æ³•/*hAccuracyè®¾ç½®æ°´å¹³æ–¹å‘çš„ç²¾ç¡®åº¦verticalAccuracy è®¾ç½®å‚ç›´æ–¹å‘çš„ç²¾ç¡®åº¦timestamp è®¾ç½®æ—¶é—´æˆ³*/- (instancetype)initWithCoordinate:(CLLocationCoordinate2D)coordinate altitude:(CLLocationDistance)altitude horizontalAccuracy:(CLLocationAccuracy)hAccuracy verticalAccuracy:(CLLocationAccuracy)vAccuracy timestamp:(NSDate *)timestamp;/*courseè®¾ç½®æ–¹å‘speed è®¾ç½®é€Ÿåº¦*/- (instancetype)initWithCoordinate:(CLLocationCoordinate2D)coordinate altitude:(CLLocationDistance)altitude horizontalAccuracy:(CLLocationAccuracy)hAccuracy verticalAccuracy:(CLLocationAccuracy)vAccuracy course:(CLLocationDirection)course speed:(CLLocationSpeed)speed timestamp:(NSDate *)timestamp;//è·å–ä½ç½®å¯¹è±¡çš„ç»çº¬åº¦ä¿¡æ¯@property(readonly, nonatomic) CLLocationCoordinate2D coordinate;//è·å–æµ·æ³¢é«˜åº¦@property(readonly, nonatomic) CLLocationDistance altitude;//æ°´å¹³æ–¹å‘ç²¾åº¦@property(readonly, nonatomic) CLLocationAccuracy horizontalAccuracy;//å‚ç›´æ–¹å‘ç²¾åº¦@property(readonly, nonatomic) CLLocationAccuracy verticalAccuracy;//æ–¹å‘å€¼ 0-360ä¹‹é—´@property(readonly, nonatomic) CLLocationDirection course;//é€Ÿåº¦ å•ä½m/s@property(readonly, nonatomic) CLLocationSpeed speed;//æ—¶é—´æˆ³@property(readonly, nonatomic, copy) NSDate *timestamp;//æ¥¼å±‚ä¿¡æ¯@property(readonly, nonatomic, copy, nullable) CLFloor *floor;//è·å–åˆ°æŸä¸ªä½ç½®ä¹‹é—´çš„è·ç¦»- (CLLocationDistance)getDistanceFrom:(const CLLocation *)location;- (CLLocationDistance)distanceFromLocation:(const CLLocation *)location; äº”ã€èˆªå‘ä¿¡æ¯æ¨¡å‹CLHeadingå½“ä½¿ç”¨CLLocationManagerè¿›è¡Œèˆªå‘ä¿¡æ¯çš„è¯·æ±‚æ—¶ï¼Œä»£ç†å›è°ƒä¸­ä¼šè·å–åˆ°CLHeadingå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å°è£…äº†èˆªå‘ç›¸å…³æ•°æ®ï¼Œè§£æå¦‚ä¸‹ï¼š 1234567891011121314//åœ°ç£æ–¹å‘0-360@property(readonly, nonatomic) CLLocationDirection magneticHeading;//åœ°ç†æ–¹å‘0-360@property(readonly, nonatomic) CLLocationDirection trueHeading;//èˆªå‘ç²¾åº¦@property(readonly, nonatomic) CLLocationDirection headingAccuracy;//xè½´æµ‹é‡çš„åŸå§‹å€¼@property(readonly, nonatomic) CLHeadingComponentValue x;//yè½´æµ‹é‡çš„åŸå§‹å€¼@property(readonly, nonatomic) CLHeadingComponentValue y;//zè½´æµ‹é‡çš„åŸå§‹å€¼@property(readonly, nonatomic) CLHeadingComponentValue z;//æ—¶é—´æˆ³@property(readonly, nonatomic, copy) NSDate *timestamp; å…­ã€åœ°æ ‡æ•°æ®æ¨¡å‹CLPlacemarkCLPlacemarkæ˜¯è¿›è¡ŒGEOç¼–ç åè¿”å›çš„åœ°æ ‡å¯¹è±¡ï¼Œè§£æå¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536//åˆå§‹åŒ–æ–¹æ³• ä½¿ç”¨å¦ä¸€ä¸ªplacemarkæ‹·è´- (instancetype)initWithPlacemark:(CLPlacemark *) placemark;//ä½ç½®ä¿¡æ¯@property (nonatomic, readonly, copy, nullable) CLLocation *location;//åŒºåŸŸèŒƒå›´ä¿¡æ¯@property (nonatomic, readonly, copy, nullable) CLRegion *region;//æ—¶åŒº@property (nonatomic, readonly, copy, nullable) NSTimeZone *timeZone;//åœ°ç†ä¿¡æ¯å­—å…¸@property (nonatomic, readonly, copy, nullable) NSDictionary *addressDictionary;//åœ°æ ‡åå­—@property (nonatomic, readonly, copy, nullable) NSString *name;//è¡—é“åå­—@property (nonatomic, readonly, copy, nullable) NSString *thoroughfare;//å­è¡—é“åå­—@property (nonatomic, readonly, copy, nullable) NSString *subThoroughfare;//åŸé•‡@property (nonatomic, readonly, copy, nullable) NSString *locality;//å­åŸé•‡@property (nonatomic, readonly, copy, nullable) NSString *subLocality;//å·åŸŸä¿¡æ¯@property (nonatomic, readonly, copy, nullable) NSString *administrativeArea;//å­å·åŸŸä¿¡æ¯@property (nonatomic, readonly, copy, nullable) NSString *subAdministrativeArea;//é‚®ç¼–@property (nonatomic, readonly, copy, nullable) NSString *postalCode;//ISOå›½å®¶ç¼–ç @property (nonatomic, readonly, copy, nullable) NSString *ISOcountryCode;//å›½å®¶@property (nonatomic, readonly, copy, nullable) NSString *country;//æ°´åŸŸåç§°@property (nonatomic, readonly, copy, nullable) NSString *inlandWater;//æµ·æ´‹åç§°@property (nonatomic, readonly, copy, nullable) NSString *ocean;//ç›¸å…³çš„å…´è¶£ç‚¹æ•°ç»„@property (nonatomic, readonly, copy, nullable) NSArray&lt;NSString *&gt; *areasOfInterest; åœ¨CLPlacemarkå¯¹è±¡ä¸­æœ‰å°è£…regionå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å°è£…åŒºåŸŸä¿¡æ¯ï¼Œå¦‚ä¸‹ï¼š 1234567891011121314//é€šè¿‡ä¸­å¿ƒç‚¹å’ŒåŠå¾„åˆ›å»ºåŒºåŸŸ- (instancetype)initCircularRegionWithCenter:(CLLocationCoordinate2D)center radius:(CLLocationDistance)radius identifier:(NSString *)identifier;//åŒºåŸŸä¸­å¿ƒ@property (readonly, nonatomic) CLLocationCoordinate2D center;//åŠå¾„@property (readonly, nonatomic) CLLocationDistance radius;//è¿›å…¥åŒºåŸŸæ˜¯å¦å‘å‡ºæé†’ éœ€è¦å¼€å¯äº†ä½ç½®åŒºåŸŸç›‘å¬@property (nonatomic, assign) BOOL notifyOnEntry;//ç¦»å¼€åŒºåŸŸæ˜¯å¦å‘å‡ºæé†’ éœ€è¦å¼€å¯äº†ä½ç½®åŒºåŸŸç›‘å¬@property (nonatomic, assign) BOOL notifyOnExit;//æ£€æŸ¥æŸä¸ªç‚¹æ˜¯å¦åœ¨åŒºåŸŸå†…- (BOOL)containsCoordinate:(CLLocationCoordinate2D)coordinate; CLRegionç±»è¿˜æœ‰ä¸¤ä¸ªå­ç±»ï¼ŒCLCircularRegionç±»ç”¨æ¥åˆ›å»ºåœ†å½¢åŒºåŸŸï¼Œæä¾›äº†ä¸€ä¸ªä¾¿æ·çš„åˆå§‹åŒ–æ–¹æ³•ï¼Œå…¶ä½œç”¨å’ŒCLRegionåŸºæœ¬ä¸€è‡´ã€‚CLBeaconRegionä¸“é—¨ç”¨æ¥æ”¯æŒBeaconæŠ€æœ¯ï¼ŒBeaconæŠ€æœ¯æ˜¯å®¤å†…å®šä½æŠ€æœ¯çš„ä¸€ç§ï¼Œä¾‹å¦‚å•†åœºä¸­æœ‰å¾ˆå¤šåº—é“ºï¼Œå¦‚æœæœ‰åº—é“ºéƒ¨ç½²äº†Beaconå‘å°„è®¾å¤‡ï¼Œåˆ™å½“iOSè®¾å¤‡ä½œä¸ºæ¥æ”¶è®¾å¤‡é è¿‘æ—¶ä¼šå—åˆ°é€šçŸ¥ã€‚CLBeaconRegioné™¤äº†åŒ…å«åŸºç¡€çš„åŒºåŸŸä¿¡æ¯å¤–ï¼Œè¿˜å°è£…äº†ä¸Beaconè®¾å¤‡ç›¸å…³çš„è®¾å¤‡ç ç­‰ä¿¡æ¯ã€‚ ä¸ƒã€åŒºåŸŸè®¿é—®åŠŸèƒ½åœ¨iOS8ä¹‹å‰ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è·å–ç”¨æˆ·æ˜¯å¦åœ¨æŸä¸ªåŒºåŸŸåœç•™äº†ä¸€æ®µæ—¶é—´æ˜¯æ¯”è¾ƒå›°éš¾çš„ï¼Œå¯èƒ½è¦å¤šæ¬¡å®šä½å¹¶è¿›è¡Œæ•´ç†å’Œåˆ†æã€‚åœ¨iOS8åï¼ŒCoreLocationæ¡†æ¶ä¸­æä¾›äº†æ–¹ä¾¿çš„æ–¹æ³•æ¥å¤„ç†è¿™ä¸ªé—®é¢˜ã€‚ é¦–å…ˆï¼Œç”¨æˆ·çš„åŒºåŸŸåœç•™å¯ä»¥ç†è§£ä¸ºç”¨æˆ·å¯¹æŸä¸ªåŒºåŸŸè¿›è¡Œäº†è®¿é—®ï¼Œå¼€å¯å’Œå…³é—­è®¿é—®ç›‘å¬ååˆ†æ–¹ä¾¿ï¼Œå¦‚ä¸‹ï¼š 123456@interface CLLocationManager (CLVisitExtensions)//å¼€å¯æœåŠ¡- (void)startMonitoringVisits;//å…³é—­æœåŠ¡- (void)stopMonitoringVisits;@end å¼€å¯åï¼Œå½“æœ‰ç›¸å…³çš„è®¿é—®ä¿¡æ¯æ—¶ï¼Œä¼šå›è°ƒä»£ç†ä¸­çš„ç›¸åº”å‡½æ•°ï¼Œå¹¶ä¸”æ”¶åˆ°CLVisitå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ä¿¡æ¯å¦‚ä¸‹ï¼š 12345678//è®¿é—®å¼€å§‹æ—¶é—´@property (nonatomic, readonly, copy) NSDate *arrivalDate;//è®¿é—®ç»“æŸæ—¶é—´@property (nonatomic, readonly, copy) NSDate *departureDate;//ä½ç½®@property (nonatomic, readonly) CLLocationCoordinate2D coordinate;//ç²¾åº¦@property (nonatomic, readonly) CLLocationAccuracy horizontalAccuracy; çƒ­çˆ±æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œå†™ä»£ç ï¼Œäº¤æœ‹å‹ ç²å°‘ QQï¼š316045346","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSå¼€å‘ä¹‹CoreImageæ¡†æ¶ä½¿ç”¨","slug":"386iOSå¼€å‘ä¹‹CoreImageæ¡†æ¶ä½¿ç”¨","date":"2018-12-21T16:00:00.000Z","updated":"2021-07-15T11:01:22.459Z","comments":true,"path":"2018/12/22/386iOSå¼€å‘ä¹‹CoreImageæ¡†æ¶ä½¿ç”¨/","link":"","permalink":"http://huishao.cc/2018/12/22/386iOSå¼€å‘ä¹‹CoreImageæ¡†æ¶ä½¿ç”¨/","excerpt":"","text":"iOSå¼€å‘ä¹‹CoreImageæ¡†æ¶ä½¿ç”¨CoreImageæ¡†æ¶æ˜¯ä¸€ä¸ªä¸“é—¨ç”¨æ¥å¯¹å›¾ç‰‡è¿›è¡Œå¤„ç†çš„æ¡†æ¶ï¼Œå…¶ä¸­æä¾›äº†è®¸å¤šé«˜çº§åŠŸèƒ½ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…å®ŒæˆUIKitæˆ–è€…CoreGraphicsæ¡†æ¶æ— æ³•å®Œæˆçš„ä»»åŠ¡ï¼Œå¹¶ä¸”ä½¿ç”¨CoreImageæ¡†æ¶å¯ä»¥ååˆ†è½»æ¾çš„å®ç°æ»¤é•œä»¥åŠå›¾åƒè¯†åˆ«ç­‰æµè¡ŒæŠ€æœ¯ã€‚æœ¬ç¯‡åšå®¢ä¸»è¦ä»‹ç»å’Œæ€»ç»“CoreImageæ¡†æ¶çš„ä½¿ç”¨ï¼Œå¹¶æä¾›èŒƒä¾‹ä»£ç ã€‚ ä¸€ã€å›¾åƒè¿‡æ»¤å™¨1.å‡ ç»„å†…ç½®çš„è¿‡æ»¤å™¨CIFilteræ˜¯CoreImageä¸­æä¾›çš„å›¾åƒè¿‡æ»¤å™¨ï¼Œä¹Ÿå¯ä»¥å°†å…¶ç†è§£ä¸ºæ»¤é•œã€‚è®¸å¤šç¾é¢œåº”ç”¨ï¼Œå›¾åƒå¤„ç†åº”ç”¨ç­‰éƒ½æ˜¯ä¸ºåŸå›¾æ·»åŠ äº†æ»¤é•œæ•ˆæœã€‚æœ¬èŠ‚æˆ‘ä»¬ç€é‡çœ‹ä¸‹ä¸è¿™ä¸ªç±»ç›¸å…³çš„åº”ç”¨ã€‚é¦–å…ˆï¼ŒCoreImagheé»˜è®¤æä¾›äº†éå¸¸å¤šçš„æ»¤é•œæ•ˆæœï¼Œä½†æ˜¯å¹¶æ²¡æœ‰è¯¦ç»†çš„æ–‡æ¡£ä»‹ç»ï¼Œæœ‰å…³æ»¤é•œæ•ˆæœå¯ä»¥åˆ†ä¸ºä¸‹é¢å‡ ä¸ªç±»åˆ«ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940//é€šè¿‡æ”¹å˜å›¾åƒçš„å‡ ä½•å½¢çŠ¶æ¥åˆ›å»º3Dæ•ˆæœï¼Œç±»ä¼¼éš†èµ· è¿‡æ»¤å™¨ç»„NSString * const kCICategoryDistortionEffect;//æ—‹è½¬æ‰­æ›²ç›¸å…³è¿‡æ»¤å™¨ç»„NSString * const kCICategoryGeometryAdjustment;//æ··åˆè¿‡æ»¤å™¨ç»„ å¯¹ä¸¤ä¸ªå›¾åƒè¿›è¡Œæ··åˆæ“ä½œNSString * const kCICategoryCompositeOperation;//ä¸€ç§è‰²è°ƒè¿‡æ»¤å™¨ç»„ ç±»ä¼¼æŠ¥çº¸é£æ ¼NSString * const kCICategoryHalftoneEffect;//é¢œè‰²è¿‡æ»¤å™¨ç»„ è°ƒæ•´å¯¹æ¯”åº¦ äº®åº¦ç­‰NSString * const kCICategoryColorEffect;//å¤šä¸ªå›¾åƒæºçš„è¿‡æ»¤å™¨NSString * const kCICategoryTransition;//å¹³é“ºå›¾åƒè¿‡æ»¤å™¨NSString * const kCICategoryTileEffect;//æ»¤å…‰ç±»è¿‡æ»¤å™¨ é€šå¸¸ä½œä¸ºå…¶ä»–è¿‡æ»¤å™¨çš„è¾“å…¥NSString * const kCICategoryGenerator;//å‡å¼±å›¾åƒæ•°æ®çš„è¿‡æ»¤å™¨ é€šå¸¸ç”¨æ¥è¿›è¡Œå›¾åƒåˆ†æNSString * const kCICategoryReduction;//æ¸å˜è¿‡æ»¤å™¨ NSString * const kCICategoryGradient;//ç”»åƒè¿‡æ»¤å™¨NSString * const kCICategoryStylize;//é”åŒ–è¿‡æ»¤å™¨NSString * const kCICategorySharpen;//æ¨¡ç³Šè¿‡æ»¤å™¨NSString * const kCICategoryBlur;//è§†é¢‘å›¾ç‰‡ç›¸å…³è¿‡æ»¤å™¨NSString * const kCICategoryVideo;//é™æ€å›¾ç‰‡ç›¸å…³è¿‡æ»¤å™¨NSString * const kCICategoryStillImage;//äº¤å‰å›¾åƒè¿‡æ»¤å™¨NSString * const kCICategoryInterlaced;//éçŸ©å½¢å›¾åƒä¸Šçš„è¿‡æ»¤å™¨NSString * const kCICategoryNonSquarePixels;//é«˜åŠ¨æ€å›¾åƒçš„è¿‡æ»¤å™¨NSString * const kCICategoryHighDynamicRange;//CoreImageå†…ç½®çš„è¿‡æ»¤å™¨NSString * const kCICategoryBuiltIn;//å¤åˆçš„è¿‡æ»¤å™¨NSString * const kCICategoryFilterGenerator; ä¸Šé¢åˆ—å‡ºäº†éå¸¸å¤šçš„ç±»åˆ«ï¼Œå…¶å®ä¸Šé¢åªæ˜¯æŒ‰ç…§ä¸åŒçš„åœºæ™¯å°†è¿‡æ»¤å™¨è¿›è¡Œäº†åˆ†ç±»ï¼Œæ¯ä¸ªåˆ†ç±»ä¸­éƒ½å®šä¹‰äº†è®¸å¤šå†…ç½®çš„è¿‡æ»¤å™¨ï¼Œä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•å¯ä»¥è·å–æ¯ä¸ªåˆ†ç±»ä¸‹æä¾›çš„è¿‡æ»¤å™¨ï¼š 1234//è·å–æŸä¸ªåˆ†ç±»çš„æ‰€æœ‰è¿‡æ»¤å™¨å+ (NSArray&lt;NSString *&gt; *)filterNamesInCategory:(nullable NSString *)category;//è·å–ä¸€ç»„åˆ†ç±»ä¸‹çš„æ‰€æœ‰è¿‡æ»¤å™¨å+ (NSArray&lt;NSString *&gt; *)filterNamesInCategories:(nullable NSArray&lt;NSString *&gt; *)categories; 2.è¿‡æ»¤å™¨çš„ä¸€ä¸ªç®€å•ç¤ºä¾‹ä¸‹é¢ç¤ºä¾‹ä»£ç æ¼”ç¤ºè¿‡æ»¤å™¨çš„ç®€å•åº”ç”¨ï¼š 123456789101112131415UIImage * img = [UIImage imageNamed:@\"1.png\"];CIImage * image = [[CIImage alloc]initWithImage:img];CIFilter * filter = [CIFilter filterWithName:@\"CIBoxBlur\" keysAndValues:kCIInputImageKey,image, nil];[filter setDefaults];CIContext * context = [[CIContext alloc]initWithOptions:nil];CIImage * output = [filter outputImage];CGImageRef ref = [context createCGImage:output fromRect:[output extent]];UIImage * newImage = [UIImage imageWithCGImage:ref];CGImageRelease(ref);UIImageView * imageView = [[UIImageView alloc]initWithFrame:CGRectMake(170, 30, 150, 400)];imageView.image = newImage;[self.view addSubview:imageView]; UIImageView * imageView2 = [[UIImageView alloc]initWithFrame:CGRectMake(0, 30, 150, 400)];imageView2.image = img;[self.view addSubview:imageView2]; æ•ˆæœå¦‚ä¸‹å›¾ï¼š ä¸Šé¢æ¼”ç¤ºäº†ç®€å•çš„æ¨¡ç³Šè¿‡æ»¤æ•ˆæœã€‚ 3.å¯¹CIFilterç±»è¿›è¡Œè§£æCIFilterç±»çš„è§£æå¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142//è¿‡æ»¤åè¾“å‡ºçš„å›¾åƒ@property (readonly, nonatomic, nullable) CIImage *outputImage;//è¿‡æ»¤å™¨åç§°@property (nonatomic, copy) NSString *name;//æ˜¯å¦å¼€å¯CoreAnimationåŠ¨ç”»æ•ˆæœ@property (getter=isEnabled) BOOL enabled;//è¿”å›å½“å‰è¿‡æ»¤å™¨æ‰€æœ‰æ”¯æŒçš„è¾“å…¥é”®@property (nonatomic, readonly) NSArray&lt;NSString *&gt; *inputKeys;//è¿”å›å½“å‰è¿‡æ»¤å™¨æ‰€æœ‰æ”¯æŒçš„è¾“å‡ºé”®@property (nonatomic, readonly) NSArray&lt;NSString *&gt; *outputKeys;//å°†è¿‡æ»¤å™¨çš„æ‰€æœ‰è¾“å…¥å€¼è®¾ç½®ä¸ºé»˜è®¤å€¼- (void)setDefaults;//è¿”å›å½“å‰è¿‡æ»¤å™¨çš„å±æ€§å­—æ®µ/*éœ€è¦æ³¨æ„è¿™ä¸ªå­—æ®µå¯¹äºå­¦ä¹ æ­¤è¿‡æ»¤å™¨éå¸¸æœ‰ç”¨å…¶ä¸­ä¼šå£°æ˜æ­¤è¿‡æ»¤å™¨çš„è¾“å…¥å’Œè¾“å‡º å³å¦‚æœä½¿ç”¨*/@property (nonatomic, readonly) NSDictionary&lt;NSString *,id&gt; *attributes;//ç”¨æ¥è¿›è¡Œè¿‡æ»¤å™¨çš„è‡ªå®šä¹‰ åé¢ä¼šä»‹ç»- (nullable CIImage *)apply:(CIKernel *)k arguments:(nullable NSArray *)args options:(nullable NSDictionary&lt;NSString *,id&gt; *)dict;//åŒä¸Š- (nullable CIImage *)apply:(CIKernel *)k, ...;//æ ¹æ®è¿‡æ»¤å™¨çš„åç§°åˆ›å»ºè¿‡æ»¤å™¨+ (nullable CIFilter *) filterWithName:(NSString *) name;//åˆ›å»ºè¿‡æ»¤å™¨ åŒæ—¶è¿›è¡Œé…ç½®+ (nullable CIFilter *)filterWithName:(NSString *)name keysAndValues:key0, ...;+ (nullable CIFilter *)filterWithName:(NSString *)name withInputParameters:(nullable NSDictionary&lt;NSString *,id&gt; *)params;//æ³¨å†Œè¿‡æ»¤å™¨+ (void)registerFilterName:(NSString *)name constructor:(id&lt;CIFilterConstructor&gt;)anObject classAttributes:(NSDictionary&lt;NSString *,id&gt; *)attributes;//å°†ä¸€ç»„è¿‡æ»¤å™¨è¿›è¡Œç¼–ç + (nullable NSData*)serializedXMPFromFilters:(NSArray&lt;CIFilter *&gt; *)filters inputImageExtent:(CGRect)extent;//è¿›è¡Œåç¼–ç + (NSArray&lt;CIFilter *&gt; *)filterArrayFromSerializedXMP:(NSData *)xmpData inputImageExtent:(CGRect)extent error:(NSError **)outError; 4.å¸¸ç”¨è¿‡æ»¤å™¨è¯¦è§£ åŒºåŸŸå‡¸èµ·è¿‡æ»¤å™¨ è¿™ä¸ªè¿‡æ»¤å™¨çš„ä½œç”¨æ˜¯åœ¨å›¾ç‰‡çš„æŸä¸ªåŒºåŸŸåˆ›å»ºä¸€å—å‡¸èµ·ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456/*kCIInputCenterKeyé”®ç”¨æ¥è®¾ç½®æ»¤é•œä¸­å¿ƒkCIInputScaleKey è®¾ç½®ä¸º0åˆ™æ²¡æœ‰å½±å“ 1åˆ™ä¼šå‡¸èµ·æ•ˆæœ -1åˆ™ä¼šå‡¹å…¥æ•ˆæœkCIInputRadiusKey è®¾ç½®æ»¤é•œçš„å½±å“èŒƒå›´*/CIFilter * filter = [CIFilter filterWithName:@\"CIBumpDistortion\" keysAndValues:kCIInputImageKey,image,kCIInputCenterKey,[[CIVector alloc] initWithX:100 Y:200],kCIInputScaleKey,@-1,kCIInputRadiusKey,@150, nil]; æ•ˆæœå¦‚ä¸‹ï¼š çº¿æ€§å‡¹å‡¸è¿‡æ»¤å™¨ è¿™ä¸ªè¿‡æ»¤å™¨åˆ›å»ºç±»ä¼¼æ³¢çº¹æ•ˆæœï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345/*ä¸ä¸Šä¸€ä¸ªè¿‡æ»¤å™¨ç›¸æ¯” å¯ä»¥è®¾ç½®kCIInputAngleKey è§’åº¦ 0-2Ï€*/CIFilter * filter = [CIFilter filterWithName:@\"CIBumpDistortionLinear\" keysAndValues:kCIInputImageKey,image,kCIInputCenterKey,[[CIVector alloc] initWithX:100 Y:200],kCIInputScaleKey,@-1,kCIInputRadiusKey,@150,kCIInputAngleKey,@(M_PI_2), nil]; æ•ˆæœå¦‚ä¸‹ï¼š åœ†å½¢é£æº…è¿‡æ»¤å™¨ è¿™ä¸ªè¿‡æ»¤å™¨çš„ä½œç”¨æ˜¯é€‰å–å›¾åƒçš„æŸä¸ªåŒºåŸŸï¼Œå¯¹å…¶å››å‘¨è¿›è¡Œé£æº…æ‹‰ä¼¸ï¼Œä¾‹å¦‚ï¼š 1CIFilter * filter = [CIFilter filterWithName:@\"CICircleSplashDistortion\" keysAndValues:kCIInputImageKey,image,kCIInputCenterKey,[[CIVector alloc] initWithX:100 Y:200],kCIInputRadiusKey,@50, nil]; æ•ˆæœå¦‚ä¸‹ï¼š åœ†å½¢ç¼ ç»•è¿‡æ»¤å™¨ è¿™ä¸ªè¿‡æ»¤å™¨é€‰å–æŸä¸ªåŒºåŸŸï¼Œè¿›è¡Œç¼ ç»•æ•ˆæœï¼Œä¾‹å¦‚ï¼š 1CIFilter * filter = [CIFilter filterWithName:@\"CICircularWrap\" keysAndValues:kCIInputImageKey,image,kCIInputCenterKey,[[CIVector alloc] initWithX:100 Y:200],kCIInputRadiusKey,@20, kCIInputAngleKey,@3,nil]; æ•ˆæœå¦‚ä¸‹ï¼š ç°åº¦æ··åˆè¿‡æ»¤å™¨ è¿™ä¸ªè¿‡æ»¤å™¨å°†æä¾›æ··åˆå›¾åƒçš„ç°åº¦å€¼åº”ç”¨äºç›®æ ‡å›¾åƒï¼Œä¾‹å¦‚ï¼š 1234/*inputDisplacementImageè®¾ç½®è¦æ··åˆçš„ç°åº¦å›¾ç‰‡*/CIFilter * filter = [CIFilter filterWithName:@\"CIDroste\" keysAndValues:kCIInputImageKey,image,kCIInputScaleKey,@200,@\"inputDisplacementImage\",image2,nil]; æ•ˆæœå¦‚ä¸‹ï¼š é€’å½’ç»˜åˆ¶å›¾åƒåŒºåŸŸ 1CIFilter * filter = [CIFilter filterWithName:@\"CIDroste\" keysAndValues:kCIInputImageKey,image,@\"inputInsetPoint0\",[[CIVector alloc] initWithX:100 Y:100],@\"inputInsetPoint1\",[[CIVector alloc] initWithX:200 Y:200],@\"inputPeriodicity\",@1,@\"inputRotation\",@0,@\"inputStrands\",@1,@\"inputZoom\",@1,nil]; æ•ˆæœå¦‚ä¸‹ï¼š ç»ç’ƒçº¹ç†è¿‡æ»¤å™¨ è¿™ä¸ªè¿‡æ»¤å™¨ç”¨æä¾›å›¾ç‰‡ä½œä¸ºç›®æ ‡å›¾ç‰‡çš„çº¹ç†ï¼Œè¿›è¡Œæ··åˆï¼Œä¾‹å¦‚ï¼š 1234/*inputTextureè®¾ç½®çº¹ç†å›¾åƒ*/CIFilter * filter = [CIFilter filterWithName:@\"CIGlassDistortion\" keysAndValues:kCIInputImageKey,image,kCIInputCenterKey,[[CIVector alloc] initWithX:100 Y:200],kCIInputScaleKey,@100,@\"inputTexture\",image2,nil]; æ•ˆæœå¦‚ä¸‹ï¼š è±å½¢é€é•œè¿‡æ»¤å™¨ 1234567/*inputPoint0è®¾ç½®ç¬¬ä¸€ä¸ªåœ†çš„åœ†å¿ƒinputPoint1è®¾ç½®ç¬¬äºŒä¸ªåœ†çš„åœ†å¿ƒinputRadiusè®¾ç½®åŠå¾„inputRefractionè®¾ç½®æŠ˜å°„ç‡ 0-5ä¹‹é—´*/CIFilter * filter = [CIFilter filterWithName:@\"CIGlassLozenge\" keysAndValues:kCIInputImageKey,image,@\"inputPoint0\",[[CIVector alloc] initWithX:100 Y:200],@\"inputPoint1\",[[CIVector alloc] initWithX:200 Y:200],@\"inputRadius\",@100,@\"inputRefraction\",@2,nil]; æ•ˆæœå¦‚ä¸‹ï¼š åœ†å­”å½¢å˜è¿‡æ»¤å™¨ 1CIFilter * filter = [CIFilter filterWithName:@\"CIHoleDistortion\" keysAndValues:kCIInputImageKey,image,@\"inputRadius\",@50,kCIInputCenterKey,[[CIVector alloc] initWithX:100 Y:200],nil]; æ•ˆæœå¦‚ä¸‹ï¼š ä¹å®«æ ¼æ‹‰ä¼¸è¿‡æ»¤å™¨ 1CIFilter * filter = [CIFilter filterWithName:@\"CINinePartStretched\" keysAndValues:kCIInputImageKey,image2,@\"inputBreakpoint0\",[[CIVector alloc] initWithX:50 Y:50],@\"inputBreakpoint1\",[[CIVector alloc] initWithX:100 Y:100],@\"inputGrowAmount\",[[CIVector alloc] initWithX:50 Y:50],nil]; æ•ˆæœå¦‚ä¸‹ï¼š ä¹å®«æ ¼å¤åˆ¶è¿‡æ»¤å™¨ 1CIFilter * filter = [CIFilter filterWithName:@\"CINinePartTiled\" keysAndValues:kCIInputImageKey,image2,@\"inputBreakpoint0\",[[CIVector alloc] initWithX:50 Y:50],@\"inputBreakpoint1\",[[CIVector alloc] initWithX:100 Y:100],@\"inputGrowAmount\",[[CIVector alloc] initWithX:50 Y:50],@\"inputFlipYTiles\",@1,nil]; æ•ˆæœå¦‚ä¸‹ï¼š ç´§ç¼©è¿‡æ»¤å™¨ 1CIFilter * filter = [CIFilter filterWithName:@\"CIPinchDistortion\" keysAndValues:kCIInputImageKey,image2,@\"inputCenter\",[[CIVector alloc] initWithX:150 Y:150],@\"inputRadius\",@500,@\"inputScale\",@1,nil]; æ•ˆæœå¦‚ä¸‹ï¼š æ‹‰ä¼¸è£å‰ªè¿‡æ»¤å™¨ 1234/*inputSize è®¾ç½®æ‹‰ä¼¸è£å‰ªå°ºå¯¸*/CIFilter * filter = [CIFilter filterWithName:@\"CIStretchCrop\" keysAndValues:kCIInputImageKey,image2,@\"inputCenterStretchAmount\",@1,@\"inputCropAmount\",@0.5,@\"inputSize\",[[CIVector alloc] initWithX:300 Y:150],nil]; æ•ˆæœå¦‚ä¸‹ï¼š ç¯çŠ¶é€é•œè¿‡æ»¤å™¨ è¿™ä¸ªè¿‡æ»¤å™¨åˆ›å»ºä¸€ä¸ªç¯çŠ¶é€é•œï¼Œå¯¹å›¾åƒè¿›è¡Œæ‰­æ›²ã€‚ 1234567/*inputCenterè®¾ç½®ç¯ä¸­å¿ƒinputRadius è®¾ç½®åŠå¾„inputRefraction è®¾ç½®æŠ˜å°„ç‡inputWidth è®¾ç½®ç¯å®½åº¦*/CIFilter * filter = [CIFilter filterWithName:@\"CITorusLensDistortion\" keysAndValues:kCIInputImageKey,image2,@\"inputCenter\",[[CIVector alloc] initWithX:150 Y:150],@\"inputRadius\",@150,@\"inputRefraction\",@1.6,@\"inputWidth\",@40,nil]; æ•ˆæœå¦‚ä¸‹ï¼š æ—‹è½¬è¿‡æ»¤å™¨ 1CIFilter * filter = [CIFilter filterWithName:@\"CITwirlDistortion\" keysAndValues:kCIInputImageKey,image2,@\"inputAngle\",@3.14,@\"inputCenter\",[[CIVector alloc] initWithX:150 Y:150],@\"inputRadius\",@150,nil]; æ•ˆæœå¦‚ä¸‹ï¼š æ¶¡æµè¿‡æ»¤å™¨ 12//inputAngle è®¾ç½®æ¶¡æµè§’åº¦CIFilter * filter = [CIFilter filterWithName:@\"CIVortexDistortion\" keysAndValues:kCIInputImageKey,image2,@\"inputAngle\",@(M_PI*10),@\"inputCenter\",[[CIVector alloc] initWithX:150 Y:150],@\"inputRadius\",@150,nil]; æ•ˆæœå¦‚ä¸‹ï¼š å½¢å˜è¿‡æ»¤å™¨ è¿™ä¸ªè¿‡æ»¤å™¨å¯¹å›¾åƒè¿›è¡Œç®€å•çš„å½¢å˜å¤„ç†ï¼Œå¦‚ç¼©æ”¾ï¼Œæ—‹è½¬ï¼Œå¹³ç§»ç­‰ã€‚ 12CGAffineTransform tr = CGAffineTransformMakeRotation(M_PI_2);CIFilter * filter = [CIFilter filterWithName:@\"CIAffineTransform\" keysAndValues:kCIInputImageKey,image2,@\"inputTransform\",[NSValue valueWithCGAffineTransform:tr],nil]; æ•ˆæœå¦‚ä¸‹ï¼š çŸ©å½¢è£å‰ªè¿‡æ»¤å™¨ 1CIFilter * filter = [CIFilter filterWithName:@\"CICrop\" keysAndValues:kCIInputImageKey,image2,@\"inputRectangle\",[[CIVector alloc] initWithCGRect:CGRectMake(0, 0, 150, 150)],nil]; æ•ˆæœå¦‚ä¸‹ï¼š è¾¹ç¼˜é‡‡æ ·è¿‡æ»¤å™¨ 1CIFilter * filter = [CIFilter filterWithName:@\"CIEdgePreserveUpsampleFilter\" keysAndValues:kCIInputImageKey,image,@\"inputLumaSigma\",@0.15,@\"inputSpatialSigma\",@3,@\"inputSmallImage\",image2,nil]; æ•ˆæœå¦‚ä¸‹ï¼š çŸ©å½¢çŸ«æ­£è¿‡æ»¤å™¨ 1CIFilter * filter = [CIFilter filterWithName:@\"CIPerspectiveCorrection\" keysAndValues:kCIInputImageKey,image2,@\"inputBottomLeft\",[[CIVector alloc] initWithX:0 Y:0],@\"inputBottomRight\",[[CIVector alloc] initWithX:150 Y:0],@\"inputTopLeft\",[[CIVector alloc] initWithX:0 Y:150],@\"inputTopRight\",[[CIVector alloc] initWithX:150 Y:150],nil]; æ•ˆæœå¦‚å›¾ï¼š æ—‹è½¬çŸ«æ­£è¿‡æ»¤å™¨ 1CIFilter * filter = [CIFilter filterWithName:@\"CIStraightenFilter\" keysAndValues:kCIInputImageKey,image2,@\"inputAngle\",@3.14,nil]; æ•ˆæœå¦‚ä¸‹ï¼š èƒŒæ™¯æ··åˆè¿‡æ»¤å™¨ é€šè¿‡æä¾›ä¸€ä¸ªå›¾åƒä½œä¸ºèƒŒæ™¯ä¸ç›®æ ‡å›¾åƒè¿›è¡Œæ··åˆã€‚ 1CIFilter * filter = [CIFilter filterWithName:@\"CIAdditionCompositing\" keysAndValues:kCIInputImageKey,image2,@\"inputBackgroundImage\",image,nil]; æ•ˆæœå¦‚ä¸‹ï¼š è‰²å½©æ··åˆè¿‡æ»¤å™¨ 1CIFilter * filter = [CIFilter filterWithName:@\"CIColorBlendMode\" keysAndValues:kCIInputImageKey,image2,@\"inputBackgroundImage\",image,nil]; æ•ˆæœå¦‚ä¸‹ï¼š æš—æ··åˆè¿‡æ»¤å™¨ 1CIFilter * filter = [CIFilter filterWithName:@\"CIColorBurnBlendMode\" keysAndValues:kCIInputImageKey,image2,@\"inputBackgroundImage\",image,nil]; æ•ˆæœå¦‚ä¸‹ï¼š äº®æ··åˆè¿‡æ»¤å™¨ 1CIFilter * filter = [CIFilter filterWithName:@\"CIColorDodgeBlendMode\" keysAndValues:kCIInputImageKey,image2,@\"inputBackgroundImage\",image,nil]; æš—é€‰æ‹©æ··åˆæ¨¡å¼è¿‡æ»¤å™¨ è¿™ä¸ªè¿‡æ»¤å™¨å°†é€‰æ‹©è¾ƒæš—çš„å›¾åƒä½œä¸ºæ··åˆèƒŒæ™¯ï¼Œä¾‹å¦‚ï¼š 1CIFilter * filter = [CIFilter filterWithName:@\"CIDarkenBlendMode\" keysAndValues:kCIInputImageKey,image2,@\"inputBackgroundImage\",image,nil]; æ•ˆæœå¦‚ä¸‹ï¼š äº®é€‰æ‹©æ··åˆæ¨¡å¼è¿‡æ»¤å™¨ è¿™ä¸ªè¿‡æ»¤å™¨å°†é€‰æ‹©è¾ƒäº®çš„å›¾åƒä½œä¸ºæ··åˆèƒŒæ™¯ï¼Œä¾‹å¦‚ï¼š 1CIFilter * filter = [CIFilter filterWithName:@\"CIDifferenceBlendMode\" keysAndValues:kCIInputImageKey,image2,@\"inputBackgroundImage\",image,nil]; æ•ˆæœå¦‚ä¸‹ï¼š åˆ†å¼€æ··åˆæ¨¡å¼è¿‡æ»¤å™¨ 1CIFilter * filter = [CIFilter filterWithName:@\"CIDivideBlendMode\" keysAndValues:kCIInputImageKey,image2,@\"inputBackgroundImage\",image,nil]; æ•ˆæœå¦‚ä¸‹ï¼š æ’é™¤æ··åˆæ¨¡å¼è¿‡æ»¤å™¨ 1CIFilter * filter = [CIFilter filterWithName:@\"CIExclusionBlendMode\" keysAndValues:kCIInputImageKey,image2,@\"inputBackgroundImage\",image,nil]; æ•ˆæœå¦‚ä¸‹ï¼š å¼ºå…‰æ··åˆæ¨¡å¼è¿‡æ»¤å™¨ 1CIFilter * filter = [CIFilter filterWithName:@\"CIHardLightBlendMode\" keysAndValues:kCIInputImageKey,image2,@\"inputBackgroundImage\",image,nil]; æ•ˆæœå¦‚ä¸‹ï¼š è‰²è°ƒæ··åˆæ¨¡å¼è¿‡æ»¤å™¨ 1CIFilter * filter = [CIFilter filterWithName:@\"CIHueBlendMode\" keysAndValues:kCIInputImageKey,image2,@\"inputBackgroundImage\",image,nil]; æ•ˆæœå¦‚ä¸‹ï¼š å‡è½»æ··åˆæ¨¡å¼è¿‡æ»¤å™¨ 1CIFilter * filter = [CIFilter filterWithName:@\"CILightenBlendMode\" keysAndValues:kCIInputImageKey,image2,@\"inputBackgroundImage\",image,nil]; æ•ˆæœå¦‚ä¸‹ï¼š çº¿æ€§ç‡ƒçƒ§æ··åˆæ¨¡å¼è¿‡æ»¤å™¨ 1CIFilter * filter = [CIFilter filterWithName:@\"CILinearBurnBlendMode\" keysAndValues:kCIInputImageKey,image2,@\"inputBackgroundImage\",image,nil]; æ•ˆæœå¦‚ä¸‹ï¼š çº¿æ€§é«˜äº®æ··åˆè¿‡æ»¤å™¨ 1CIFilter * filter = [CIFilter filterWithName:@\"CILinearDodgeBlendMode\" keysAndValues:kCIInputImageKey,image2,@\"inputBackgroundImage\",image,nil]; æ•ˆæœå¦‚ä¸‹ï¼š äº®åº¦æ··åˆè¿‡æ»¤å™¨ 1CIFilter * filter = [CIFilter filterWithName:@\"CILuminosityBlendMode\" keysAndValues:kCIInputImageKey,image2,@\"inputBackgroundImage\",image,nil]; æ•ˆæœå¦‚ä¸‹ï¼š æœ€å¤§å€¼æ··åˆè¿‡æ»¤å™¨ 1CIFilter * filter = [CIFilter filterWithName:@\"CIMaximumCompositing\" keysAndValues:kCIInputImageKey,image2,@\"inputBackgroundImage\",image,nil]; æ•ˆæœå¦‚ä¸‹ï¼š æœ€å°å€¼æ··åˆè¿‡æ»¤å™¨ 1CIFilter * filter = [CIFilter filterWithName:@\"CIMinimumCompositing\" keysAndValues:kCIInputImageKey,image2,@\"inputBackgroundImage\",image,nil]; æ•ˆæœå¦‚ä¸‹ï¼š å¤šé‡æ··åˆè¿‡æ»¤å™¨ 1CIFilter * filter = [CIFilter filterWithName:@\"CIMultiplyBlendMode\" keysAndValues:kCIInputImageKey,image2,@\"inputBackgroundImage\",image,nil]; æ•ˆæœå¦‚ä¸‹ï¼š å¤šé‡åˆæˆè¿‡æ»¤å™¨ 1CIFilter * filter = [CIFilter filterWithName:@\"CIMultiplyCompositing\" keysAndValues:kCIInputImageKey,image2,@\"inputBackgroundImage\",image,nil]; é‡å æ··åˆæ¨¡å¼ 1CIFilter * filter = [CIFilter filterWithName:@\"CIOverlayBlendMode\" keysAndValues:kCIInputImageKey,image2,@\"inputBackgroundImage\",image,nil]; äº®æ··åˆæ¨¡å¼ 1CIFilter * filter = [CIFilter filterWithName:@\"CIPinLightBlendMode\" keysAndValues:kCIInputImageKey,image2,@\"inputBackgroundImage\",image,nil]; é¥±å’Œæ··åˆæ¨¡å¼ 1CIFilter * filter = [CIFilter filterWithName:@\"CISaturationBlendMode\" keysAndValues:kCIInputImageKey,image2,@\"inputBackgroundImage\",image,nil]; å±å¹•æ··åˆæ¨¡å¼ 1CIFilter * filter = [CIFilter filterWithName:@\"CIScreenBlendMode\" keysAndValues:kCIInputImageKey,image2,@\"inputBackgroundImage\",image,nil]; æºå›¾åƒä¸Šå±‚æ··åˆ 1CIFilter * filter = [CIFilter filterWithName:@\"CISourceAtopCompositing\" keysAndValues:kCIInputImageKey,image2,@\"inputBackgroundImage\",image,nil]; åœ†å±è¿‡æ»¤å™¨ 12345/*inputSharpness è®¾ç½®åœ†åœˆé”åº¦inputWidth è®¾ç½®é—´è·*/CIFilter * filter = [CIFilter filterWithName:@\"CICircularScreen\" keysAndValues:kCIInputImageKey,image2,kCIInputCenterKey,[[CIVector alloc] initWithX:150 Y:150],@\"inputSharpness\",@0.7,@\"inputWidth\",@6,nil]; åŠè‰²è°ƒè¿‡æ»¤å™¨ 1CIFilter * filter = [CIFilter filterWithName:@\"CICMYKHalftone\" keysAndValues:kCIInputImageKey,image2,@\"inputAngle\",@0,kCIInputCenterKey,[[CIVector alloc] initWithX:150 Y:150],@\"inputGCR\",@1,@\"inputSharpness\",@0.7,@\"inputUCR\",@0.5,@\"inputWidth\",@6,nil]; ç‚¹å±è¿‡æ»¤å™¨ 1CIFilter * filter = [CIFilter filterWithName:@\"CIDotScreen\" keysAndValues:kCIInputImageKey,image2,@\"inputAngle\",@0,kCIInputCenterKey,[[CIVector alloc] initWithX:150 Y:150],@\"inputSharpness\",@0.7,@\"inputWidth\",@6,nil]; é˜´å½±å±è¿‡æ»¤å™¨ 1CIFilter * filter = [CIFilter filterWithName:@\"CIHatchedScreen\" keysAndValues:kCIInputImageKey,image2,@\"inputAngle\",@0,kCIInputCenterKey,[[CIVector alloc] initWithX:150 Y:150],@\"inputSharpness\",@0.7,@\"inputWidth\",@6,nil]; çº¿æ€§sRGBè¿‡æ»¤å™¨ 1CIFilter * filter = [CIFilter filterWithName:@\"CILinearToSRGBToneCurve\" keysAndValues:kCIInputImageKey,image2,nil]; è‰²å½©ç¿»è½¬è¿‡æ»¤å™¨ 1CIFilter * filter = [CIFilter filterWithName:@\"CIColorInvert\" keysAndValues:kCIInputImageKey,image2,nil]; è‰²å›¾è¿‡æ»¤å™¨ 1CIFilter * filter = [CIFilter filterWithName:@\"CIColorMap\" keysAndValues:kCIInputImageKey,image2,@\"inputGradientImage\",image,nil]; å•è‰²è¿‡æ»¤å™¨ 12345/*inputColor è®¾ç½®è¾“å…¥é¢œè‰²inputIntensity è®¾ç½®å½±å“ç¨‹åº¦*/CIFilter * filter = [CIFilter filterWithName:@\"CIColorMonochrome\" keysAndValues:kCIInputImageKey,image2,@\"inputColor\",[CIColor colorWithRed:0.5 green:0.5 blue:0.5],@\"inputIntensity\",@1,nil]; åˆ†è‰²é•œè¿‡æ»¤å™¨ 1234/*inputLevelsè®¾ç½®äº®åº¦çº§åˆ«*/CIFilter * filter = [CIFilter filterWithName:@\"CIColorPosterize\" keysAndValues:kCIInputImageKey,image2,@\"inputLevels\",@6,nil]; åè‰²è¿‡æ»¤å™¨ 1CIFilter * filter = [CIFilter filterWithName:@\"CIFalseColor\" keysAndValues:kCIInputImageKey,image2,@\"inputColor0\",[CIColor colorWithRed:0 green:0 blue:0],@\"inputColor1\",[CIColor colorWithRed:1 green:1 blue:0],nil]; å…‰æ•ˆè¤ªè‰²è¿‡æ»¤å™¨ 1CIFilter * filter = [CIFilter filterWithName:@\"CIPhotoEffectFade\" keysAndValues:kCIInputImageKey,image2,nil]; å…‰æ•ˆç¬æ—¶è¿‡æ»¤å™¨ 1CIFilter * filter = [CIFilter filterWithName:@\"CIPhotoEffectInstant\" keysAndValues:kCIInputImageKey,image2,nil]; å…‰æ•ˆå•å…‰è¿‡æ»¤å™¨ 1CIFilter * filter = [CIFilter filterWithName:@\"CIPhotoEffectMono\" keysAndValues:kCIInputImageKey,image2,nil]; é»‘è‰²å…‰æ•ˆåº”è¿‡æ»¤å™¨ 1CIFilter * filter = [CIFilter filterWithName:@\"CIPhotoEffectNoir\" keysAndValues:kCIInputImageKey,image2,nil]; å…‰æ¸è¿›è¿‡æ»¤å™¨ 1CIFilter * filter = [CIFilter filterWithName:@\"CIPhotoEffectProcess\" keysAndValues:kCIInputImageKey,image2,nil]; å…‰è½¬ç§»è¿‡æ»¤å™¨ 1CIFilter * filter = [CIFilter filterWithName:@\"CIPhotoEffectTransfer\" keysAndValues:kCIInputImageKey,image2,nil]; æ£•è¤è‰²è¿‡æ»¤å™¨ 1CIFilter * filter = [CIFilter filterWithName:@\"CISepiaTone\" keysAndValues:kCIInputImageKey,image2,nil]; çƒ­å›¾è¿‡æ»¤å™¨ 1CIFilter * filter = [CIFilter filterWithName:@\"CIThermal\" keysAndValues:kCIInputImageKey,image2,nil]; Xå°„çº¿è¿‡æ»¤å™¨ 1CIFilter * filter = [CIFilter filterWithName:@\"CIXRay\" keysAndValues:kCIInputImageKey,image2,nil]; æ¨¡ç³Šè¿‡æ»¤å™¨ 12//å‚æ•°è¿›è¡Œæ¨¡ç³Šæ•ˆæœçš„è®¾ç½®CIFilter * filter = [CIFilter filterWithName:@\"CIBokehBlur\" keysAndValues:kCIInputImageKey,image2,@\"inputSoftness\",@0.5,@\"inputRingSize\",@0.1,@\"inputRingAmount\",@0,@\"inputRadius\",@10,nil]; ç›’æ¨¡ç³Šè¿‡æ»¤å™¨ 1CIFilter * filter = [CIFilter filterWithName:@\"CIBoxBlur\" keysAndValues:kCIInputImageKey,image2,@\"inputRadius\",@10,nil]; é˜€ç“£æ¨¡ç³Šè¿‡æ»¤å™¨ 1CIFilter * filter = [CIFilter filterWithName:@\"CIDiscBlur\" keysAndValues:kCIInputImageKey,image2,@\"inputRadius\",@25,nil]; é«˜æ–¯æ¨¡ç³Šè¿‡æ»¤å™¨ 1CIFilter * filter = [CIFilter filterWithName:@\"CIGaussianBlur\" keysAndValues:kCIInputImageKey,image2,@\"inputRadius\",@10,nil]; æ¢¯åº¦æ¨¡ç³Šè¿‡æ»¤å™¨ 1CIFilter * filter = [CIFilter filterWithName:@\"CIMorphologyGradient\" keysAndValues:kCIInputImageKey,image2,@\"inputRadius\",@5,nil]; è¿åŠ¨æ¨¡ç³Šè¿‡æ»¤å™¨ 1CIFilter * filter = [CIFilter filterWithName:@\"CIMotionBlur\" keysAndValues:kCIInputImageKey,image2,@\"inputRadius\",@5,nil]; ç¼©æ”¾æ¨¡ç³Šè¿‡æ»¤å™¨ 1CIFilter * filter = [CIFilter filterWithName:@\"CIZoomBlur\" keysAndValues:kCIInputImageKey,image2,nil]; 5.è‡ªå®šä¹‰è¿‡æ»¤å™¨ä¸Šé¢æ¼”ç¤ºäº†éå¸¸å¤šçš„å¸¸ç”¨å†…ç½®è¿‡æ»¤å™¨ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ç»§æ‰¿CIFilteræ¥è‡ªå®šä¹‰è¿‡æ»¤å™¨ã€‚ è‡ªå®šä¹‰è¿‡æ»¤å™¨ä¹‹å‰ï¼Œé¦–å…ˆéœ€è¦äº†è§£CIKernelè¿™ä¸ªç±»ï¼ŒCIKernelæ˜¯Core Image Kernel Language çš„æŠ½è±¡å¯¹è±¡ã€‚CIKLæ˜¯CoreImageä¸­ä¸“é—¨ç”¨æ¥ç¼–å†™åƒç´ å¤„ç†å‡½æ•°çš„è¯­è¨€ã€‚ CIKernelç›¸å…³ç±»è§£æå¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829//åŸºç±» ç”¨äºé€šç”¨çš„è¿‡æ»¤å‡½æ•°@interface CIKernel : NSObject//ä»å­—ç¬¦ä¸²åŠ è½½ä¸€ç»„è¿‡æ»¤å‡½æ•°+ (nullable NSArray&lt;CIKernel *&gt; *)kernelsWithString:(NSString *)string;//ä»å­—ç¬¦ä¸²åŠ è½½ä¸€ä¸ªè¿‡æ»¤å‡½æ•°+ (nullable instancetype)kernelWithString:(NSString *)string ;//åç§°@property (atomic, readonly) NSString *name ;//è¿›è¡Œå›¾ç‰‡ç”Ÿæˆ- (nullable CIImage *)applyWithExtent:(CGRect)extent roiCallback:(CIKernelROICallback)callback arguments:(nullable NSArray&lt;id&gt; *)args;@end//ç”¨äºé¢œè‰²ä¿®æ­£çš„è¿‡æ»¤å‡½æ•°@interface CIColorKernel : CIKernel+ (nullable instancetype)kernelWithString:(NSString *)string;- (nullable CIImage *)applyWithExtent:(CGRect)extent arguments:(nullable NSArray&lt;id&gt; *)args;@end//ç”¨äºå½¢çŠ¶ä¿®æ­£çš„è¿‡æ»¤å‡½æ•°@interface CIWarpKernel : CIKernel+ (nullable instancetype)kernelWithString:(NSString *)string;@end//ç”¨äºè‰²å½©æ··åˆçš„è¿‡æ»¤å‡½æ•°@interface CIBlendKernel : CIColorKernel+ (nullable instancetype)kernelWithString:(NSString *)string;- (nullable CIImage *)applyWithForeground:(CIImage*)foreground background:(CIImage*)background;@end ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¿»è½¬å›¾åƒçš„è‡ªå®šä¹‰è¿‡æ»¤å™¨ç¤ºæ„ï¼Œé¦–å…ˆæ–°å»ºä¸€ä¸ªæ–°çš„cikernelæ–‡ä»¶ï¼Œå‘½åä¸ºa.cikernelï¼Œå¦‚ä¸‹ï¼š 1234567kernel vec2 mirrorX ( float imageWidth )&#123;// è·å–å¾…å¤„ç†ç‚¹çš„ä½ç½®vec2 currentVec = destCoord();// è¿”å›æœ€ç»ˆæ˜¾ç¤ºä½ç½®return vec2 ( imageWidth - currentVec.x , currentVec.y );&#125; æ–°å»ºä¸€ä¸ªè¿‡æ»¤å™¨ç±»ï¼Œå‘½åä¸ºMyFilterï¼Œå¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051#import &lt;CoreImage/CoreImage.h&gt;@interface MyFilter : CIFilter@property(nonatomic,strong)CIImage * inputImage;@end#import \"MyFilter.h\"@interface MyFilter()@property(nonatomic,strong)CIWarpKernel * kernel;@end@implementation MyFilter- (instancetype)init &#123; self = [super init]; if (self) &#123; //ä»æ–‡ä»¶è¯»å–è¿‡æ»¤å‡½æ•° NSBundle *bundle = [NSBundle bundleForClass: [self class]]; NSURL *kernelURL = [bundle URLForResource:@\"a\" withExtension:@\"cikernel\"]; NSError *error; NSString *kernelCode = [NSString stringWithContentsOfURL:kernelURL encoding:NSUTF8StringEncoding error:&amp;error]; NSArray *kernels = [CIKernel kernelsWithString:kernelCode]; self.kernel = [kernels objectAtIndex:0]; &#125; return self;&#125;- (CIImage *)outputImage&#123; CGFloat inputWidth = self.inputImage.extent.size.width; CIImage *result = [self.kernel applyWithExtent:self.inputImage.extent roiCallback:^CGRect(int index, CGRect destRect) &#123; return destRect; &#125; inputImage:self.inputImage arguments:@[@(inputWidth)]]; return result;&#125;//è®¾ç½®è¯´æ˜å­—å…¸-(NSDictionary&lt;NSString *,id&gt; *)attributes&#123; return @&#123; @\"inputImage\" : @&#123; @\"CIAttributeClass\" : @\"CIImage\", @\"CIAttributeDisplayName\" : @\"Image--\", @\"CIAttributeType\" : @\"CIAttributeTypeImage\" &#125;&#125;;&#125;@end å¦‚ä¸‹è¿›è¡Œä½¿ç”¨å³å¯ï¼š 123456MyFilter * filter = [[MyFilter alloc]init];filter.inputImage = image2;CIContext * context = [[CIContext alloc]initWithOptions:nil];CIImage * output = [filter outputImage];CGImageRef ref = [context createCGImage:output fromRect:output.extent];UIImage * newImage = [UIImage imageWithCGImage:ref]; äºŒã€ä½¿ç”¨CoreImageå®ç°äººè„¸è¯†åˆ«äººè„¸è¯†åˆ«æ˜¯ç›®å‰éå¸¸çƒ­é—¨çš„ä¸€ç§å›¾åƒå¤„ç†æŠ€æœ¯ï¼ŒCoreImageå†…ç½®äº†å¯¹äººè„¸è¿›è¡Œè¯†åˆ«çš„ç›¸å…³åŠŸèƒ½æ¥å£ï¼Œå¹¶ä¸”å¯ä»¥å¯¹äººè„¸é¢éƒ¨ç‰¹å¾è¿›è¡ŒæŠ“å–ï¼Œä¸‹é¢æˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªç®€å•çš„å®æ—¶è¯†åˆ«äººè„¸ç‰¹å¾çš„Demoã€‚ é¦–å…ˆåˆ›å»ºä¸€ä¸ªè§†å›¾ä½œä¸ºå›¾åƒæ‰«æè§†å›¾ï¼Œå¦‚ä¸‹ï¼š .hæ–‡ä»¶ 123//.h æ–‡ä»¶@interface FaceView : UIView@end .mæ–‡ä»¶ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196//// FaceView.m// CoreImageDemo//// Created by jaki on 2018/12/22.// Copyright Â© 2018å¹´ jaki. All rights reserved.//#import \"FaceView.h\"#import &lt;AVFoundation/AVFoundation.h&gt;#import \"FaceHandle.h\"//å®šä¹‰çº¿ç¨‹#define FACE_SCAN_QUEUE \"FACE_SCAN_QUEUE\"@interface FaceView()&lt;AVCaptureVideoDataOutputSampleBufferDelegate&gt;@property(nonatomic,strong)AVCaptureSession *captureSession;@property(nonatomic,strong)AVCaptureDeviceInput * captureInput;@property(nonatomic,strong)AVCaptureVideoDataOutput * captureOutput;@property(nonnull,strong)AVCaptureVideoPreviewLayer * videoLayer;@property(nonatomic,strong)dispatch_queue_t queue;@property(nonatomic,assign)BOOL hasHandle;@property(nonatomic,strong)UIView * faceView;@end@implementation FaceView#pragma mark - Override-(instancetype)init&#123; self = [super init]; if (self) &#123; [self install]; &#125; return self;&#125;-(instancetype)initWithFrame:(CGRect)frame&#123; self = [super initWithFrame:frame]; if (self) &#123; [self install]; &#125; return self;&#125;-(void)layoutSubviews&#123; [super layoutSubviews]; self.videoLayer.frame = self.bounds;&#125;#pragma mark - InnerFunc-(void)install&#123; if (![UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]) &#123; NSLog(@\"ä¸æ”¯æŒ\"); return; &#125; self.queue = dispatch_queue_create(FACE_SCAN_QUEUE, NULL); [self.captureSession startRunning]; AVAuthorizationStatus status = [AVCaptureDevice authorizationStatusForMediaType:AVMediaTypeVideo]; if (status!=AVAuthorizationStatusAuthorized) &#123; NSLog(@\"éœ€è¦æƒé™\"); return; &#125; self.videoLayer = [AVCaptureVideoPreviewLayer layerWithSession:self.captureSession]; self.videoLayer.frame = CGRectZero; self.videoLayer.videoGravity = AVLayerVideoGravityResizeAspectFill; [self.layer addSublayer:self.videoLayer]; [self addSubview:self.faceView]; self.faceView.frame = CGRectMake(0, 0, self.frame.size.width, self.frame.size.height); &#125;//å°†äººè„¸ç‰¹å¾ç‚¹æ ‡è®°å‡ºæ¥-(void)renderReactWithInfo:(NSDictionary *)info&#123; for (UIView * v in self.faceView.subviews) &#123; [v removeFromSuperview]; &#125; NSArray * faceArray = info[FACE_HANDLE_INFO_FACE_ARRAY]; for (int i = 0;i &lt; faceArray.count; i++) &#123; NSDictionary * face = faceArray[i]; NSValue * faceValue = face[FACE_HANDLE_INFO_FACE_FRAME]; if (faceValue) &#123; CGRect faceR = [faceValue CGRectValue]; UIView * faceView = [[UIView alloc]initWithFrame:faceR]; faceView.backgroundColor = [UIColor clearColor]; faceView.layer.borderColor = [UIColor redColor].CGColor; faceView.layer.borderWidth = 2; [self.faceView addSubview:faceView]; &#125; NSValue * leftEye = face[FACE_HANDLE_INFO_FACE_LEFT_EYE_FRAME]; if (leftEye) &#123; CGRect leftEyeR = [leftEye CGRectValue]; UIView * eye = [[UIView alloc]initWithFrame:leftEyeR]; eye.backgroundColor = [UIColor clearColor]; eye.layer.borderColor = [UIColor greenColor].CGColor; eye.layer.borderWidth = 2; [self.faceView addSubview:eye]; &#125; NSValue * rightEye = face[FACE_HANDLE_INFO_FACE_RIGHT_EYE_FRAME]; if (rightEye) &#123; CGRect rightEyeR = [rightEye CGRectValue]; UIView * eye = [[UIView alloc]initWithFrame:rightEyeR]; eye.backgroundColor = [UIColor clearColor]; eye.layer.borderColor = [UIColor greenColor].CGColor; eye.layer.borderWidth = 2; [self.faceView addSubview:eye]; &#125; NSValue * mouth = face[FACE_HANDLE_INFO_FACE_MOUTH_FRAME]; if (mouth) &#123; CGRect mouthR = [mouth CGRectValue]; UIView * mouth = [[UIView alloc]initWithFrame:mouthR]; mouth.backgroundColor = [UIColor clearColor]; mouth.layer.borderColor = [UIColor orangeColor].CGColor; mouth.layer.borderWidth = 2; [self.faceView addSubview:mouth]; &#125; &#125;&#125;#pragma AVDelegate//è¿›è¡Œç”»é¢çš„æ•è·-(void)captureOutput:(AVCaptureOutput *)output didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection&#123; if (self.hasHandle) &#123; return; &#125; self.hasHandle = YES; CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer); CVPixelBufferLockBaseAddress(imageBuffer,0); uint8_t *baseAddress = (uint8_t *)CVPixelBufferGetBaseAddress(imageBuffer); size_t bytesPerRow = CVPixelBufferGetBytesPerRow(imageBuffer); size_t width = CVPixelBufferGetWidth(imageBuffer); size_t height = CVPixelBufferGetHeight(imageBuffer); CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB(); CGContextRef newContext = CGBitmapContextCreate(baseAddress,width, height, 8, bytesPerRow, colorSpace,kCGBitmapByteOrder32Little | kCGImageAlphaPremultipliedFirst); CGImageRef newImage = CGBitmapContextCreateImage(newContext); CGContextRelease(newContext); CGColorSpaceRelease(colorSpace); UIImage *image= [UIImage imageWithCGImage:newImage scale:1.0 orientation:UIImageOrientationRight]; CGImageRelease(newImage); //image //è¿›è¡Œäººè„¸è¯†åˆ«çš„æ ¸å¿ƒå·¥å…·ç±» [[FaceHandle sharedInstance] handleImage:image viewSize:self.frame.size completed:^(BOOL success, NSDictionary *info) &#123; self.hasHandle = NO; [self renderReactWithInfo:info]; &#125;]; CVPixelBufferUnlockBaseAddress(imageBuffer,0);&#125;#pragma mark - setter and getter-(AVCaptureSession *)captureSession&#123; if (!_captureSession) &#123; _captureSession = [[AVCaptureSession alloc]init]; [_captureSession addInput:self.captureInput]; [_captureSession addOutput:self.captureOutput]; &#125; return _captureSession;&#125;-(AVCaptureDeviceInput *)captureInput&#123; if (!_captureInput) &#123; _captureInput = [AVCaptureDeviceInput deviceInputWithDevice:[AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo] error:nil]; &#125; return _captureInput;&#125;-(AVCaptureVideoDataOutput *)captureOutput&#123; if (!_captureOutput) &#123; _captureOutput = [[AVCaptureVideoDataOutput alloc]init]; _captureOutput.alwaysDiscardsLateVideoFrames = YES; [_captureOutput setSampleBufferDelegate:self queue:self.queue]; _captureOutput.videoSettings = @&#123;(__bridge NSString *)kCVPixelBufferPixelFormatTypeKey:@(kCVPixelFormatType_32BGRA)&#125;; &#125; return _captureOutput;&#125;-(UIView *)faceView&#123; if (!_faceView) &#123; _faceView = [[UIView alloc]init]; _faceView.backgroundColor = [UIColor clearColor]; &#125; return _faceView;&#125;@end åœ¨çœŸæœºä¸Šè¿è¡Œå·¥ç¨‹ï¼Œé€šè¿‡æ‘„åƒå¤´å¯ä»¥å°†å®æ—¶çš„ç”»é¢æ•è·åˆ°å±å¹•ä¸Šï¼Œä¸‹é¢å®ç°æ ¸å¿ƒçš„äººè„¸è¯†åˆ«ä»£ç ï¼š åˆ›å»ºç»§æ‰¿äºNSObjectçš„FaceHandleç±»ï¼Œå¦‚ä¸‹ï¼š .hæ–‡ä»¶ 1234567891011121314151617extern const NSString * FACE_HANDLE_INFO_FACE_ARRAY;extern const NSString * FACE_HANDLE_INFO_FACE_FRAME;extern const NSString * FACE_HANDLE_INFO_FACE_LEFT_EYE_FRAME;extern const NSString * FACE_HANDLE_INFO_FACE_RIGHT_EYE_FRAME;extern const NSString * FACE_HANDLE_INFO_FACE_MOUTH_FRAME;extern const NSString * FACE_HANDLE_INFO_ERROR;@interface FaceHandle : NSObject+(instancetype)sharedInstance;-(void)handleImage:(UIImage *)image viewSize:(CGSize )viewSize completed:(void(^)(BOOL success,NSDictionary * info))completion;@end .mæ–‡ä»¶ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130#import \"FaceHandle.h\"#define FACE_HANDLE_DISPATCH_QUEUE \"FACE_HANDLE_DISPATCH_QUEUE\"const NSString * FACE_HANDLE_INFO_FACE_FRAME = @\"FACE_HANDLE_INFO_FACE_FRAME\";const NSString * FACE_HANDLE_INFO_FACE_LEFT_EYE_FRAME = @\"FACE_HANDLE_INFO_FACE_LEFT_EYE_FRAME\";const NSString * FACE_HANDLE_INFO_FACE_RIGHT_EYE_FRAME = @\"FACE_HANDLE_INFO_FACE_RIGHT_EYE_FRAME\";const NSString * FACE_HANDLE_INFO_FACE_MOUTH_FRAME = @\"FACE_HANDLE_INFO_FACE_MOUTH_FRAME\";const NSString * FACE_HANDLE_INFO_ERROR = @\"FACE_HANDLE_INFO_ERROR\";const NSString * FACE_HANDLE_INFO_FACE_ARRAY = @\"FACE_HANDLE_INFO_FACE_ARRAY\";@interface FaceHandle()@property(nonatomic,strong)dispatch_queue_t workingQueue;@end@implementation FaceHandle+(instancetype)sharedInstance&#123; static dispatch_once_t onceToken; static FaceHandle * sharedInstance = nil; if (!sharedInstance) &#123; dispatch_once(&amp;onceToken, ^&#123; sharedInstance = [[FaceHandle alloc] init]; &#125;); &#125; return sharedInstance;&#125;#pragma mark - Override-(instancetype)init&#123; self = [super init]; if (self) &#123; self.workingQueue = dispatch_queue_create(FACE_HANDLE_DISPATCH_QUEUE, NULL); &#125; return self;&#125;#pragma mark - InnerFunc-(void)handleImage:(UIImage *)image viewSize:(CGSize )viewSize completed:(void (^)(BOOL , NSDictionary *))completion&#123; if (!image) &#123; if (completion) &#123; completion(NO,@&#123;FACE_HANDLE_INFO_ERROR:@\"å›¾ç‰‡æ•è·å‡ºé”™\"&#125;); &#125; return; &#125; dispatch_async(self.workingQueue, ^&#123; UIImage * newImage = [self strectImage:image withSize:viewSize]; if (newImage) &#123; NSArray * faceArray = [self analyseFaceImage:newImage]; if (completion) &#123; dispatch_async(dispatch_get_main_queue(), ^&#123; completion(YES,@&#123;FACE_HANDLE_INFO_FACE_ARRAY:faceArray&#125;); &#125;); &#125; &#125;else&#123; if (completion) &#123; dispatch_async(dispatch_get_main_queue(), ^&#123; completion(NO,@&#123;FACE_HANDLE_INFO_ERROR:@\"å›¾ç‰‡è¯†åˆ«å‡ºé”™\"&#125;); &#125;); &#125; &#125; &#125;);&#125;//å›¾ç‰‡æ”¾å¤§å¤„ç†-(UIImage *)strectImage:(UIImage *)img withSize:(CGSize)size&#123; UIGraphicsBeginImageContext(size); CGRect thumbnailRect = CGRectZero; thumbnailRect.origin = CGPointMake(0, 0); thumbnailRect.size.width = size.width; thumbnailRect.size.height = size.height; [img drawInRect:thumbnailRect]; UIImage * newImage = UIGraphicsGetImageFromCurrentImageContext(); UIGraphicsEndImageContext(); if (newImage) &#123; return newImage; &#125; return nil;&#125;-(NSArray *)analyseFaceImage:(UIImage *)image&#123; NSMutableArray * dataArray = [NSMutableArray array]; CIImage * cImage = [CIImage imageWithCGImage:image.CGImage]; NSDictionary* opts = [NSDictionary dictionaryWithObject: CIDetectorAccuracyHigh forKey:CIDetectorAccuracy]; //è¿›è¡Œåˆ†æ CIDetector* detector = [CIDetector detectorOfType:CIDetectorTypeFace context:nil options:opts]; //è·å–ç‰¹å¾æ•°ç»„ NSArray* features = [detector featuresInImage:cImage]; CGSize inputImageSize = [cImage extent].size; CGAffineTransform transform = CGAffineTransformIdentity; transform = CGAffineTransformScale(transform, 1, -1); transform = CGAffineTransformTranslate(transform, 0, -inputImageSize.height); for (CIFaceFeature *faceFeature in features)&#123; NSMutableDictionary * faceDic = [NSMutableDictionary dictionary]; CGRect faceViewBounds = CGRectApplyAffineTransform(faceFeature.bounds, transform); [faceDic setValue:[NSValue valueWithCGRect:faceViewBounds] forKey:(NSString *)FACE_HANDLE_INFO_FACE_FRAME]; CGFloat faceWidth = faceFeature.bounds.size.width; if(faceFeature.hasLeftEyePosition)&#123; CGPoint faceViewLeftPoint = CGPointApplyAffineTransform(faceFeature.leftEyePosition, transform); CGRect leftEyeBounds = CGRectMake(faceViewLeftPoint.x-faceWidth*0.1, faceViewLeftPoint.y-faceWidth*0.1, faceWidth*0.2, faceWidth*0.2); [faceDic setValue:[NSValue valueWithCGRect:leftEyeBounds] forKey:(NSString *)FACE_HANDLE_INFO_FACE_LEFT_EYE_FRAME]; &#125; if(faceFeature.hasRightEyePosition)&#123; //è·å–äººå³çœ¼å¯¹åº”çš„point CGPoint faceViewRightPoint = CGPointApplyAffineTransform(faceFeature.rightEyePosition, transform); CGRect rightEyeBounds = CGRectMake(faceViewRightPoint.x-faceWidth*0.1, faceViewRightPoint.y-faceWidth*0.1, faceWidth*0.2, faceWidth*0.2); [faceDic setValue:[NSValue valueWithCGRect:rightEyeBounds] forKey:(NSString *)FACE_HANDLE_INFO_FACE_RIGHT_EYE_FRAME]; &#125; if(faceFeature.hasMouthPosition)&#123; //è·å–äººå˜´å·´å¯¹åº”çš„point CGPoint faceViewMouthPoint = CGPointApplyAffineTransform(faceFeature.mouthPosition, transform); CGRect mouthBounds = CGRectMake(faceViewMouthPoint.x-faceWidth*0.2, faceViewMouthPoint.y-faceWidth*0.2, faceWidth*0.4, faceWidth*0.4); [faceDic setValue:[NSValue valueWithCGRect:mouthBounds] forKey:(NSString *)FACE_HANDLE_INFO_FACE_MOUTH_FRAME]; &#125; [dataArray addObject:faceDic]; &#125; return [dataArray copy];&#125;@end æ‰“å¼€ç™¾åº¦ï¼Œéšä¾¿æœç´¢ä¸€äº›äººè„¸å›¾ç‰‡è¿›è¡Œè¯†åˆ«ï¼Œå¯ä»¥çœ‹åˆ°è¯†åˆ«ç‡è¿˜æ˜¯å¾ˆé«˜ï¼Œå¦‚ä¸‹å›¾ï¼š ä¸‰ã€CIImageä¸­æä¾›äº†å…¶ä»–å›¾åƒè¯†åˆ«åŠŸèƒ½CIDetectoré™¤äº†å¯ä»¥ç”¨æ¥è¿›è¡Œäººè„¸è¯†åˆ«å¤–ï¼Œè¿˜æ”¯æŒè¿›è¡ŒäºŒç»´ç ã€çŸ©å½¢ã€æ–‡å­—ç­‰æ£€æµ‹ã€‚ çŸ©å½¢åŒºåŸŸè¯†åˆ«ï¼Œç”¨æ¥æ£€æµ‹å›¾åƒä¸­çš„çŸ©å½¢è¾¹ç•Œï¼Œæ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930-(NSArray *)analyseRectImage:(UIImage *)image&#123; NSMutableArray * dataArray = [NSMutableArray array]; CIImage * cImage = [CIImage imageWithCGImage:image.CGImage]; NSDictionary* opts = [NSDictionary dictionaryWithObject: CIDetectorAccuracyHigh forKey:CIDetectorAccuracy]; CIDetector* detector = [CIDetector detectorOfType:CIDetectorTypeRectangle context:nil options:opts]; NSArray* features = [detector featuresInImage:cImage]; CGSize inputImageSize = [cImage extent].size; CGAffineTransform transform = CGAffineTransformIdentity; transform = CGAffineTransformScale(transform, 1, -1); transform = CGAffineTransformTranslate(transform, 0, -inputImageSize.height); for (CIRectangleFeature *feature in features)&#123; NSLog(@\"%lu\",features.count); NSMutableDictionary * dic = [NSMutableDictionary dictionary]; CGRect viewBounds = CGRectApplyAffineTransform(feature.bounds, transform); [dic setValue:[NSValue valueWithCGRect:viewBounds] forKey:@\"rectBounds\"]; CGPoint topLeft = CGPointApplyAffineTransform(feature.topLeft, transform); [dic setValue:[NSValue valueWithCGPoint:topLeft] forKey:@\"topLeft\"]; CGPoint topRight = CGPointApplyAffineTransform(feature.topRight, transform); [dic setValue:[NSValue valueWithCGPoint:topRight] forKey:@\"topRight\"]; CGPoint bottomLeft = CGPointApplyAffineTransform(feature.bottomLeft, transform); [dic setValue:[NSValue valueWithCGPoint:bottomLeft] forKey:@\"bottomLeft\"]; CGPoint bottomRight = CGPointApplyAffineTransform(feature.bottomRight, transform); [dic setValue:[NSValue valueWithCGPoint:bottomRight] forKey:@\"bottomRight\"]; [dataArray addObject:dic]; &#125; return [dataArray copy];&#125; æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š äºŒç»´ç æ‰«æä¸ä»…å¯ä»¥åˆ†æå‡ºå›¾ç‰‡ä¸­çš„äºŒç»´ç ä½ç½®ï¼Œè¿˜å¯ä»¥è§£æå‡ºäºŒç»´ç æ•°æ®ï¼Œæ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930-(NSArray *)analyseQRImage:(UIImage *)image&#123; NSMutableArray * dataArray = [NSMutableArray array]; CIImage * cImage = [CIImage imageWithCGImage:image.CGImage]; NSDictionary* opts = [NSDictionary dictionaryWithObject: CIDetectorAccuracyHigh forKey:CIDetectorAccuracy]; CIDetector* detector = [CIDetector detectorOfType:CIDetectorTypeQRCode context:nil options:opts]; NSArray* features = [detector featuresInImage:cImage]; CGSize inputImageSize = [cImage extent].size; CGAffineTransform transform = CGAffineTransformIdentity; transform = CGAffineTransformScale(transform, 1, -1); transform = CGAffineTransformTranslate(transform, 0, -inputImageSize.height); for (CIQRCodeFeature *feature in features)&#123; NSMutableDictionary * dic = [NSMutableDictionary dictionary]; CGRect viewBounds = CGRectApplyAffineTransform(feature.bounds, transform); [dic setValue:[NSValue valueWithCGRect:viewBounds] forKey:@\"rectBounds\"]; CGPoint topLeft = CGPointApplyAffineTransform(feature.topLeft, transform); [dic setValue:[NSValue valueWithCGPoint:topLeft] forKey:@\"topLeft\"]; CGPoint topRight = CGPointApplyAffineTransform(feature.topRight, transform); [dic setValue:[NSValue valueWithCGPoint:topRight] forKey:@\"topRight\"]; CGPoint bottomLeft = CGPointApplyAffineTransform(feature.bottomLeft, transform); [dic setValue:[NSValue valueWithCGPoint:bottomLeft] forKey:@\"bottomLeft\"]; CGPoint bottomRight = CGPointApplyAffineTransform(feature.bottomRight, transform); [dic setValue:[NSValue valueWithCGPoint:bottomRight] forKey:@\"bottomRight\"]; [dic setValue:feature.messageString forKey:@\"content\"]; [dataArray addObject:dic]; &#125; return [dataArray copy];&#125; CIImageæ¡†æ¶ä¸­è¿˜æ”¯æŒå¯¹æ–‡æœ¬åŒºåŸŸè¿›è¡Œåˆ†æï¼Œæ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031-(NSArray *)analyseTextImage:(UIImage *)image&#123; NSMutableArray * dataArray = [NSMutableArray array]; CIImage * cImage = [CIImage imageWithCGImage:image.CGImage]; NSDictionary* opts = [NSDictionary dictionaryWithObject: CIDetectorAccuracyHigh forKey:CIDetectorAccuracy]; CIDetector* detector = [CIDetector detectorOfType:CIDetectorTypeText context:nil options:nil]; NSArray* features = [detector featuresInImage:cImage options:@&#123;CIDetectorReturnSubFeatures:@YES&#125;]; CGSize inputImageSize = [cImage extent].size; CGAffineTransform transform = CGAffineTransformIdentity; transform = CGAffineTransformScale(transform, 1, -1); transform = CGAffineTransformTranslate(transform, 0, -inputImageSize.height); for (CITextFeature *feature in features)&#123; NSLog(@\"%@\",feature.subFeatures); NSMutableDictionary * dic = [NSMutableDictionary dictionary]; CGRect viewBounds = CGRectApplyAffineTransform(feature.bounds, transform); [dic setValue:[NSValue valueWithCGRect:viewBounds] forKey:@\"rectBounds\"]; CGPoint topLeft = CGPointApplyAffineTransform(feature.topLeft, transform); [dic setValue:[NSValue valueWithCGPoint:topLeft] forKey:@\"topLeft\"]; CGPoint topRight = CGPointApplyAffineTransform(feature.topRight, transform); [dic setValue:[NSValue valueWithCGPoint:topRight] forKey:@\"topRight\"]; CGPoint bottomLeft = CGPointApplyAffineTransform(feature.bottomLeft, transform); [dic setValue:[NSValue valueWithCGPoint:bottomLeft] forKey:@\"bottomLeft\"]; CGPoint bottomRight = CGPointApplyAffineTransform(feature.bottomRight, transform); [dic setValue:[NSValue valueWithCGPoint:bottomRight] forKey:@\"bottomRight\"]; [dataArray addObject:dic]; &#125; return [dataArray copy];&#125; æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å››ã€CoreImageä¸­çš„ç›¸å…³æ ¸å¿ƒç±»1.CIColorç±»CIColorç±»æ˜¯CoreImageä¸­æè¿°è‰²å½©çš„ç±»ã€‚ 12345678910111213141516171819202122232425262728293031323334353637//é€šè¿‡CGColoråˆ›å»ºCIColor+ (instancetype)colorWithCGColor:(CGColorRef)c;//æ„é€ æ–¹æ³•+ (instancetype)colorWithRed:(CGFloat)r green:(CGFloat)g blue:(CGFloat)b alpha:(CGFloat)a;+ (instancetype)colorWithRed:(CGFloat)r green:(CGFloat)g blue:(CGFloat)b;+ (nullable instancetype)colorWithRed:(CGFloat)r green:(CGFloat)g blue:(CGFloat)b alpha:(CGFloat)a colorSpace:(CGColorSpaceRef)colorSpace;+ (nullable instancetype)colorWithRed:(CGFloat)r green:(CGFloat)g blue:(CGFloat)b colorSpace:(CGColorSpaceRef)colorSpace;- (instancetype)initWithCGColor:(CGColorRef)c;//é€šè¿‡å­—ç¬¦ä¸²åˆ›å»ºCIColorå¯¹è±¡+ (instancetype)colorWithString:(NSString *)representation;- (instancetype)initWithRed:(CGFloat)r green:(CGFloat)g blue:(CGFloat)b alpha:(CGFloat)a;- (instancetype)initWithRed:(CGFloat)r green:(CGFloat)g blue:(CGFloat)b;- (nullable instancetype)initWithRed:(CGFloat)r green:(CGFloat)g blue:(CGFloat)b alpha:(CGFloat)a colorSpace:(CGColorSpaceRef)colorSpace;- (nullable instancetype)initWithRed:(CGFloat)r green:(CGFloat)g blue:(CGFloat)b colorSpace:(CGColorSpaceRef)colorSpace;//è·å–é¢œè‰²åˆ†é‡ä¸ªæ•°@property (readonly) size_t numberOfComponents;//é¢œè‰²åˆ†é‡@property (readonly) const CGFloat *components;//é¢œè‰²é€æ˜åº¦@property (readonly) CGFloat alpha;//è‰²å½©ç©ºé—´@property (readonly) CGColorSpaceRef colorSpace;//çº¢ç»¿è“åˆ†é‡@property (readonly) CGFloat red;@property (readonly) CGFloat green;@property (readonly) CGFloat blue;//ä¸‹é¢æ˜¯å®šä¹‰çš„ä¸€äº›ä¾¿æ·çš„é¢œè‰²å˜é‡@property (class, strong, readonly) CIColor *blackColor ;@property (class, strong, readonly) CIColor *whiteColor ;@property (class, strong, readonly) CIColor *grayColor ;@property (class, strong, readonly) CIColor *redColor ;@property (class, strong, readonly) CIColor *greenColor ;@property (class, strong, readonly) CIColor *blueColor ;@property (class, strong, readonly) CIColor *cyanColor ;@property (class, strong, readonly) CIColor *magentaColor ;@property (class, strong, readonly) CIColor *yellowColor ;@property (class, strong, readonly) CIColor *clearColor 2.CIImageç±»CIImageæ˜¯CoreImageä¸­æœ€æ ¸å¿ƒçš„ç±»ï¼Œå®ƒæè¿°äº†å›¾åƒå¯¹è±¡ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118//åˆ›å»ºä¸€ä¸ªæ–°çš„CIImageå®ä¾‹+ (CIImage *)imageWithCGImage:(CGImageRef)image;//é€šè¿‡å­—å…¸åˆ›å»ºä¸€ä¸ªæ–°çš„CIImageå®ä¾‹/*å­—å…¸ä¸­çš„é”®kCIImageColorSpace è®¾ç½®é¢œè‰²ç©ºé—´ ä¸ºCGColorSpaceRefå¯¹è±¡kCIImageNearestSampling æ˜¯å¦ä¸´è¿‘é‡‡æ · å¸ƒå°”å€¼kCIImageProperties è®¾ç½®å›¾ç‰‡å±æ€§å­—å…¸kCIImageApplyOrientationProperty å¸ƒå°”å€¼ æ˜¯å¦æ ¹æ®æ–¹å‘è¿›è¡Œè½¬æ¢kCIImageTextureTarget NSNumberå€¼ è®¾ç½®OpebGLç›®æ ‡çº¹ç†å¸¸æ•°kCIImageTextureFormat NSNumberå€¼ è®¾ç½®OpebGL formatkCIImageAuxiliaryDepth å¸ƒå°”å€¼ æ˜¯å¦è¿”å›æ·±åº¦å›¾åƒkCIImageAuxiliaryDisparity å¸ƒå°”å€¼ æ˜¯å¦è¿”å›è¾…åŠ©æ—¶å·®å›¾åƒkCIImageAuxiliaryPortraitEffectsMatte å¸ƒå°”å€¼ æ˜¯å¦è¿”å›è‚–åƒæ¨¡æ¿*/+ (CIImage *)imageWithCGImage:(CGImageRef)image options:(nullable NSDictionary&lt;CIImageOption, id&gt; *)options;//é€šè¿‡CALayerè¿›è¡ŒCIImageçš„åˆ›å»º+ (CIImage *)imageWithCGLayer:(CGLayerRef)layer NS_DEPRECATED_MAC(10_4,10_11);+ (CIImage *)imageWithCGLayer:(CGLayerRef)layer options:(nullable NSDictionary&lt;CIImageOption, id&gt; *)options;//ä½¿ç”¨bitmapæ•°æ®åˆ›å»ºCIImage+ (CIImage *)imageWithBitmapData:(NSData *)data bytesPerRow:(size_t)bytesPerRow size:(CGSize)size format:(CIFormat)format colorSpace:(nullable CGColorSpaceRef)colorSpace;//é€šè¿‡çº¹ç†åˆ›å»ºCIImage+ (CIImage *)imageWithTexture:(unsigned int)name size:(CGSize)size flipped:(BOOL)flipped colorSpace:(nullable CGColorSpaceRef)colorSpace;+ (CIImage *)imageWithTexture:(unsigned int)name size:(CGSize)size flipped:(BOOL)flipped options:(nullable NSDictionary&lt;CIImageOption, id&gt; *)options;+ (nullable CIImage *)imageWithMTLTexture:(id&lt;MTLTexture&gt;)texture options:(nullable NSDictionary&lt;CIImageOption, id&gt; *)options;//é€šè¿‡urlåˆ›å»ºCIImage+ (nullable CIImage *)imageWithContentsOfURL:(NSURL *)url;+ (nullable CIImage *)imageWithContentsOfURL:(NSURL *)url options:(nullable NSDictionary&lt;CIImageOption, id&gt; *)options;//é€šè¿‡NSDateåˆ›å»ºCIImage+ (nullable CIImage *)imageWithData:(NSData *)data;+ (nullable CIImage *)imageWithData:(NSData *)data options:(nullable NSDictionary&lt;CIImageOption, id&gt; *)options;//é€šè¿‡CVImageBufferRefåˆ›å»ºCIImage+ (CIImage *)imageWithCVImageBuffer:(CVImageBufferRef)imageBuffer;+ (CIImage *)imageWithCVImageBuffer:(CVImageBufferRef)imageBuffer options:(nullable NSDictionary&lt;CIImageOption, id&gt; *)options;//é€šè¿‡CVPixelBufferRefåˆ›å»ºCIImage+ (CIImage *)imageWithCVPixelBuffer:(CVPixelBufferRef)pixelBuffer;+ (CIImage *)imageWithCVPixelBuffer:(CVPixelBufferRef)pixelBuffer options:(nullable NSDictionary&lt;CIImageOption, id&gt; *)options;//é€šè¿‡é¢œè‰²åˆ›å»ºCIImage+ (CIImage *)imageWithColor:(CIColor *)color;//åˆ›å»ºç©ºCIImage+ (CIImage *)emptyImage;//åˆå§‹åŒ–æ–¹æ³•- (instancetype)initWithCGImage:(CGImageRef)image;- (instancetype)initWithCGImage:(CGImageRef)image options:(nullable NSDictionary&lt;CIImageOption, id&gt; *)options;- (instancetype)initWithCGLayer:(CGLayerRef)layer);- (instancetype)initWithCGLayer:(CGLayerRef)layer;- (instancetype)initWithBitmapData:(NSData *)data bytesPerRow:(size_t)bytesPerRow size:(CGSize)size format:(CIFormat)format colorSpace:(nullable CGColorSpaceRef)colorSpace;- (instancetype)initWithTexture:(unsigned int)name size:(CGSize)size flipped:(BOOL)flipped colorSpace:(nullable CGColorSpaceRef)colorSpace;- (instancetype)initWithTexture:(unsigned int)name size:(CGSize)size flipped:(BOOL)flipped options:(nullable NSDictionary&lt;CIImageOption, id&gt; *)options;- (nullable instancetype)initWithMTLTexture:(id&lt;MTLTexture&gt;)texture options:(nullable NSDictionary&lt;CIImageOption, id&gt; *)optionsï¼›- (nullable instancetype)initWithContentsOfURL:(NSURL *)url;- (nullable instancetype)initWithContentsOfURL:(NSURL *)url options:(nullable NSDictionary&lt;CIImageOption, id&gt; *)options;- (instancetype)initWithCVImageBuffer:(CVImageBufferRef)imageBuffer;- (instancetype)initWithCVImageBuffer:(CVImageBufferRef)imageBuffer options:(nullable NSDictionary&lt;CIImageOption, id&gt; *)options;- (instancetype)initWithCVPixelBuffer:(CVPixelBufferRef)pixelBuffer;- (instancetype)initWithCVPixelBuffer:(CVPixelBufferRef)pixelBuffer options:(nullable NSDictionary&lt;CIImageOption, id&gt; *)options;- (instancetype)initWithColor:(CIColor *)color;//è¿½åŠ å˜æ¢ è¿”å›ç»“æœCIImageå¯¹è±¡- (CIImage *)imageByApplyingTransform:(CGAffineTransform)matrix;- (CIImage *)imageByApplyingOrientation:(int)orientation;- (CIImage *)imageByApplyingCGOrientation:(CGImagePropertyOrientation)orientation;//æ ¹æ®æ–¹å‘è·å–å˜æ¢- (CGAffineTransform)imageTransformForOrientation:(int)orientation;- (CGAffineTransform)imageTransformForCGOrientation:(CGImagePropertyOrientation)orientation;//è¿›è¡Œæ··åˆ- (CIImage *)imageByCompositingOverImage:(CIImage *)dest;//åŒºåŸŸè£å‰ª- (CIImage *)imageByCroppingToRect:(CGRect)rect;//è¿”å›å›¾åƒè¾¹ç¼˜- (CIImage *)imageByClampingToExtent;//è®¾ç½®è¾¹ç¼˜ è¿”å›æ–°å›¾åƒå¯¹è±¡- (CIImage *)imageByClampingToRect:(CGRect)rect;//ç”¨è¿‡æ»¤å™¨è¿›è¡Œè¿‡æ»¤- (CIImage *)imageByApplyingFilter:(NSString *)filterName withInputParameters:(nullable NSDictionary&lt;NSString *,id&gt; *)params;- (CIImage *)imageByApplyingFilter:(NSString *)filterName;//å›¾åƒè¾¹ç¼˜@property (NS_NONATOMIC_IOSONLY, readonly) CGRect extent;//å±æ€§å­—å…¸@property (atomic, readonly) NSDictionary&lt;NSString *,id&gt; *properties;//é€šè¿‡URLåˆ›å»ºçš„å›¾åƒçš„URL@property (atomic, readonly, nullable) NSURL *url;//é¢œè‰²ç©ºé—´@property (atomic, readonly, nullable) CGColorSpaceRef colorSpace;//é€šè¿‡CGImageåˆ›å»ºçš„CGImageå¯¹è±¡@property (nonatomic, readonly, nullable) CGImageRef CGImage; 3.CIContextç±»CIContextæ˜¯CoreImageä¸­çš„ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œç”¨æ¥è¿›è¡Œå›¾ç‰‡çš„æ¸²æŸ“ï¼Œå·²ç»è½¬æ¢ä¸ºå…¶ä»–æ¡†æ¶çš„å›¾åƒå¯¹è±¡ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116//é€šè¿‡CGContextRefä¸Šä¸‹æ–‡åˆ›å»ºCIContextä¸Šä¸‹æ–‡/*é…ç½®å­—å…¸ä¸­å¯ä»¥è¿›è¡Œé…ç½®çš„ï¼škCIContextOutputColorSpace è®¾ç½®è¾“å‡ºçš„é¢œè‰²ç©ºé—´kCIContextWorkingColorSpace è®¾ç½®å·¥ä½œçš„é¢œè‰²ç©ºé—´kCIContextWorkingFormat è®¾ç½®ç¼“å†²åŒºæ•°æ®æ ¼å¼kCIContextHighQualityDownsample å¸ƒå°”å€¼kCIContextOutputPremultiplied è®¾ç½®è¾“å‡ºæ˜¯å¦å¸¦alphaé€šé“kCIContextCacheIntermediates å¸ƒå°”å€¼kCIContextUseSoftwareRenderer è®¾ç½®æ˜¯å¦ä½¿ç”¨è½¯ä»¶æ¸²æŸ“kCIContextPriorityRequestLow æ˜¯å¦ä½è´¨é‡*/+ (CIContext *)contextWithCGContext:(CGContextRef)cgctx options:(nullable NSDictionary&lt;CIContextOption, id&gt; *)options;//åˆ›å»ºä¸Šä¸‹æ–‡å¯¹è±¡+ (CIContext *)contextWithOptions:(nullable NSDictionary&lt;CIContextOption, id&gt; *)options;+ (CIContext *)context;- (instancetype)initWithOptions:(nullable NSDictionary&lt;CIContextOption, id&gt; *)options;//ä½¿ç”¨æŒ‡å®šçš„å¤„ç†å™¨åˆ›å»ºCIContext+ (CIContext *)contextWithMTLDevice:(id&lt;MTLDevice&gt;)device;+ (CIContext *)contextWithMTLDevice:(id&lt;MTLDevice&gt;)device options:(nullable NSDictionary&lt;CIContextOption, id&gt; *)options;//å·¥ä½œçš„é¢œè‰²ç©ºé—´@property (nullable, nonatomic, readonly) CGColorSpaceRef workingColorSpace;//ç¼“å†²åŒºæ ¼å¼@property (nonatomic, readonly) CIFormat workingFormat;//è¿›è¡ŒCIImageå›¾åƒçš„ç»˜åˆ¶- (void)drawImage:(CIImage *)image atPoint:(CGPoint)atPoint fromRect:(CGRect)fromRect;- (void)drawImage:(CIImage *)image inRect:(CGRect)inRect fromRect:(CGRect)fromRect;//ä½¿ç”¨CIImageåˆ›å»ºCGImageRef- (nullable CGImageRef)createCGImage:(CIImage *)image; fromRect:(CGRect)fromRect;- (nullable CGImageRef)createCGImage:(CIImage *)image fromRect:(CGRect)fromRect format:(CIFormat)format colorSpace:(nullable CGColorSpaceRef)colorSpace;//åˆ›å»ºCALayer- (nullable CGLayerRef)createCGLayerWithSize:(CGSize)size info:(nullable CFDictionaryRef)info;//å°†å›¾ç‰‡å†™å…¥bitMapæ•°æ®- (void)render:(CIImage *)image toBitmap:(void *)data rowBytes:(ptrdiff_t)rowBytes bounds:(CGRect)bounds format:(CIFormat)format;//å°†å›¾ç‰‡å†™å…¥ç¼“å­˜- (void)render:(CIImage *)image toCVPixelBuffer:(CVPixelBufferRef)buffer colorSpace:(nullable CGColorSpaceRef)colorSpace;- (void)render:(CIImage *)imagetoCVPixelBuffer:(CVPixelBufferRef)buffer bounds:(CGRect)bounds colorSpace:(nullable CGColorSpaceRef)colorSpaceï¼›//å°†å›¾ç‰‡å†™å…¥çº¹ç†- (void)render:(CIImage *)image toMTLTexture:(id&lt;MTLTexture&gt;)texture commandBuffer:(nullable id&lt;MTLCommandBuffer&gt;)commandBuffer bounds:(CGRect)bounds colorSpace:(CGColorSpaceRef)colorSpace;//æ¸…é™¤ç¼“å­˜- (void)clearCaches;//è¾“å…¥å›¾åƒçš„æœ€å¤§å°ºå¯¸- (CGSize)inputImageMaximumSize;//è¾“å‡ºå›¾åƒçš„æœ€å¤§å°ºå¯¸- (CGSize)outputImageMaximumSize;//å°†CIImageå†™æˆTIFFæ•°æ®- (nullable NSData*) TIFFRepresentationOfImage:(CIImage*)image format:(CIFormat)format colorSpace:(CGColorSpaceRef)colorSpace options:(NSDictionary&lt;CIImageRepresentationOption, id&gt;*)options;//å°†CIImageå†™æˆJPEGæ•°æ®- (nullable NSData*) JPEGRepresentationOfImage:(CIImage*)image colorSpace:(CGColorSpaceRef)colorSpace options:(NSDictionary&lt;CIImageRepresentationOption, id&gt;*)options;//å°†CIImageå†™æˆHEIFæ•°æ®- (nullable NSData*) HEIFRepresentationOfImage:(CIImage*)image format:(CIFormat)format colorSpace:(CGColorSpaceRef)colorSpace options:(NSDictionary&lt;CIImageRepresentationOption, id&gt;*)options;//å°†CIImageå†™æˆPNGæ•°æ®- (nullable NSData*) PNGRepresentationOfImage:(CIImage*)image format:(CIFormat)format colorSpace:(CGColorSpaceRef)colorSpace options:(NSDictionary&lt;CIImageRepresentationOption, id&gt;*)options;//å°†CIImageå†™å…¥TIFFæ–‡ä»¶- (BOOL) writeTIFFRepresentationOfImage:(CIImage*)image toURL:(NSURL*)url format:(CIFormat)format colorSpace:(CGColorSpaceRef)colorSpace options:(NSDictionary&lt;CIImageRepresentationOption, id&gt;*)options error:(NSError **)errorPtr;//å°†CIImageå†™å…¥PNGæ–‡ä»¶- (BOOL) writePNGRepresentationOfImage:(CIImage*)image toURL:(NSURL*)url format:(CIFormat)format colorSpace:(CGColorSpaceRef)colorSpace options:(NSDictionary&lt;CIImageRepresentationOption, id&gt;*)options error:(NSError **)errorPtr;//å°†CIImageå†™å…¥JPEGæ–‡ä»¶- (BOOL) writeJPEGRepresentationOfImage:(CIImage*)image toURL:(NSURL*)url colorSpace:(CGColorSpaceRef)colorSpace options:(NSDictionary&lt;CIImageRepresentationOption, id&gt;*)options error:(NSError **)errorPtr;//å°†CIImageå†™HEIFæ–‡ä»¶- (BOOL) writeHEIFRepresentationOfImage:(CIImage*)image toURL:(NSURL*)url format:(CIFormat)format colorSpace:(CGColorSpaceRef)colorSpace options:(NSDictionary&lt;CIImageRepresentationOption, id&gt;*)options error:(NSError **)errorPtr; 4.CIDetectorç±»å‰é¢æœ‰è¿‡CIDetectorç±»çš„åŠŸèƒ½æ¼”ç¤ºï¼Œè¿™æ˜¯CIImageæ¡†æ¶ä¸­éå¸¸å¼ºå¤§çš„ä¸€ä¸ªç±»ï¼Œä½¿ç”¨å®ƒå¯ä»¥è¿›è¡Œå¤æ‚çš„å›¾ç‰‡è¯†åˆ«æŠ€æœ¯ï¼Œè§£æå¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829//åˆ›å»ºCIDetectorå®ä¾‹ /*typeç”¨æ¥æŒ‡å®šè¯†åˆ«çš„ç±»å‹CIDetectorTypeFace äººè„¸è¯†åˆ«æ¨¡å¼CIDetectorTypeRectangle çŸ©å½¢æ£€æµ‹æ¨¡å¼CIDetectorTypeText æ–‡æœ¬åŒºåŸŸæ£€æµ‹æ¨¡å¼CIDetectorTypeQRCode äºŒç»´ç æ‰«ææ¨¡å¼optionå¯ä»¥æŒ‡å®šé…ç½®å­—å…¸ å¯é…ç½®çš„é”®å¦‚ä¸‹CIDetectorAccuracy è®¾ç½®æ£€æµ‹ç²¾åº¦ CIDetectorAccuracyLow ä½ CIDetectorAccuracyHigh é«˜CIDetectorTracking è®¾ç½®æ˜¯å¦è·Ÿè¸ªç‰¹å¾CIDetectorMinFeatureSize è®¾ç½®ç‰¹å¾æœ€å°å°ºå¯¸ 0-1ä¹‹é—´ ç›¸å¯¹å›¾ç‰‡CIDetectorMaxFeatureCount è®¾ç½®æœ€å¤§ç‰¹å¾æ•°CIDetectorImageOrientation è®¾ç½®æ–¹å‘CIDetectorEyeBlink è®¾ç½®å¸ƒå°”å€¼ æ˜¯å¦æå–é¢éƒ¨è¡¨æƒ… çœ¨çœ¼CIDetectorSmile è®¾ç½®å¸ƒå°”å€¼ æ˜¯å¦æå–é¢éƒ¨è¡¨æƒ… å¾®ç¬‘CIDetectorFocalLength è®¾ç½®ç„¦è·CIDetectorAspectRatio è®¾ç½®æ£€æµ‹åˆ°çŸ©å½¢çš„å®½é«˜æ¯”CIDetectorReturnSubFeatures è®¾ç½®æ˜¯å¦æå–å­ç‰¹å¾*/+ (nullable CIDetector *)detectorOfType:(NSString*)type context:(nullable CIContext *)context options:(nullable NSDictionary&lt;NSString *,id&gt; *)options;//è¿›è¡Œå›¾ç‰‡åˆ†æ æå–ç‰¹å¾æ•°ç»„- (NSArray&lt;CIFeature *&gt; *)featuresInImage:(CIImage *)image;- (NSArray&lt;CIFeature *&gt; *)featuresInImage:(CIImage *)image options:(nullable NSDictionary&lt;NSString *,id&gt; *)options; 5.CIFeatureç›¸å…³ç±»CIFeatureä¸å…¶ç›¸å…³å­ç±»å®šä¹‰äº†ç‰¹å¾æ•°æ®æ¨¡å‹ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384@interface CIFeature : NSObject &#123;&#125;//ç‰¹å¾ç±»å‹/*CIFeatureTypeFaceCIFeatureTypeRectangleCIFeatureTypeQRCodeCIFeatureTypeText*/@property (readonly, retain) NSString *type;//ç‰¹å¾åœ¨å›¾ç‰‡ä¸­çš„bounds@property (readonly, assign) CGRect bounds;@end//äººè„¸ç‰¹å¾å¯¹è±¡@interface CIFaceFeature : CIFeature//ä½ç½®å°ºå¯¸@property (readonly, assign) CGRect bounds;//å·¦çœ¼ä½ç½®@property (readonly, assign) BOOL hasLeftEyePosition;@property (readonly, assign) CGPoint leftEyePosition;//æ˜¯å¦æœ‰å·¦çœ¼ç‰¹å¾@property (readonly, assign) BOOL hasRightEyePosition;//å³çœ¼ä½ç½®@property (readonly, assign) CGPoint rightEyePosition;//æ˜¯å¦æœ‰å³çœ¼ç‰¹å¾@property (readonly, assign) BOOL hasMouthPosition;//å£éƒ¨ç‰¹å¾@property (readonly, assign) CGPoint mouthPosition;//æ˜¯å¦æœ‰è·Ÿè¸ªç‰¹å¾ID@property (readonly, assign) BOOL hasTrackingID;//è·Ÿè¸ªç‰¹å¾ID@property (readonly, assign) int trackingID;@property (readonly, assign) BOOL hasTrackingFrameCount;@property (readonly, assign) int trackingFrameCount;@property (readonly, assign) BOOL hasFaceAngle;@property (readonly, assign) float faceAngle;//æ˜¯å¦å¾®ç¬‘@property (readonly, assign) BOOL hasSmile;//å·¦çœ¼æ˜¯å¦é—­çœ¼@property (readonly, assign) BOOL leftEyeClosed;//å³çœ¼æ˜¯å¦é—­çœ¼@property (readonly, assign) BOOL rightEyeClosed;@end//çŸ©å½¢ç‰¹å¾å¯¹è±¡@interface CIRectangleFeature : CIFeature//ä½ç½®å°ºå¯¸@property (readonly) CGRect bounds;@property (readonly) CGPoint topLeft;@property (readonly) CGPoint topRight;@property (readonly) CGPoint bottomLeft;@property (readonly) CGPoint bottomRight;@end//äºŒç»´ç ç‰¹å¾å¯¹è±¡@interface CIQRCodeFeature : CIFeature//ä½ç½®å°ºå¯¸ä¿¡æ¯@property (readonly) CGRect bounds;@property (readonly) CGPoint topLeft;@property (readonly) CGPoint topRight;@property (readonly) CGPoint bottomLeft;@property (readonly) CGPoint bottomRight;//äºŒç»´ç å†…å®¹@property (nullable, readonly) NSString* messageString;//äºŒç»´ç æè¿°æ•°æ®@property (nullable, readonly) CIQRCodeDescriptor *symbolDescriptor NS_AVAILABLE(10_13, 11_0);@end//æ–‡æœ¬ç‰¹å¾å¯¹è±¡@interface CITextFeature : CIFeature//ä½ç½®ä¿¡æ¯@property (readonly) CGRect bounds;@property (readonly) CGPoint topLeft;@property (readonly) CGPoint topRight;@property (readonly) CGPoint bottomLeft;@property (readonly) CGPoint bottomRight;//å­ç‰¹å¾@property (nullable, readonly) NSArray *subFeatures;@end çƒ­çˆ±æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œå†™ä»£ç ï¼Œäº¤æœ‹å‹ ç²å°‘ QQï¼š316045346","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSå¼€å‘ä¹‹CFNetworkæ¡†æ¶ä½¿ç”¨","slug":"385iOSå¼€å‘ä¹‹CFNetworkæ¡†æ¶ä½¿ç”¨","date":"2018-10-23T16:00:00.000Z","updated":"2021-07-15T11:00:07.575Z","comments":true,"path":"2018/10/24/385iOSå¼€å‘ä¹‹CFNetworkæ¡†æ¶ä½¿ç”¨/","link":"","permalink":"http://huishao.cc/2018/10/24/385iOSå¼€å‘ä¹‹CFNetworkæ¡†æ¶ä½¿ç”¨/","excerpt":"","text":"iOSå¼€å‘ä¹‹CFNetworkæ¡†æ¶ä½¿ç”¨ä¸€ã€å¼•è¨€åœ¨iOSåº”ç”¨å¼€å‘ä¸­ï¼ŒCFNetworkæ¡†æ¶å…¶å®å¹¶ä¸æ˜¯éå¸¸å¸¸ç”¨çš„ï¼Œç›¸å¯¹NSURLSessionæ¡†æ¶è€Œè¨€ï¼Œè¿™æ˜¯ä¸€ä¸ªç›¸å¯¹åº•å±‚çš„ç½‘ç»œå·¥ä½œæ¡†æ¶ã€‚å®˜æ–¹æ–‡æ¡£ä¸­çš„ä¸‹å›¾æè¿°äº†CFNetworkåœ¨æ•´ä¸ªç½‘ç»œä½“ç³»ä¸­çš„ä½ç½®ï¼š CFNetworkä¸CoreFoundationå…³ç³»å¯†åˆ‡ï¼Œå…¶å®åŸºäºCoreFoundationæ¡†æ¶çš„ï¼Œç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š æœ¬ç¯‡åšå®¢ä¸­ä¸ä¼šè¿‡å¤šçš„è®¾è®¡CoreFoundationæ¡†æ¶ä¸­çš„å†…å®¹ï¼Œä¸»è¦æ€»ç»“å’Œä»‹ç»CFNetworkçš„ç›¸å…³å†…å®¹ä¸ç®€å•åº”ç”¨ã€‚ äºŒã€ä½¿ç”¨CFNetworkè¿›è¡Œç®€å•çš„ç½‘ç»œè¯·æ±‚CFNetworkæ˜¯ä½¿ç”¨Cè¯­è¨€å®ç°çš„ä¸€å¥—ç½‘ç»œè®¿é—®æ¡†æ¶ï¼Œè¿›è¡Œä¸€ä¸ªç®€å•çš„ç½‘ç»œè¯·æ±‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920//åˆ›å»ºè¯·æ±‚æ–¹æ³•å­—ç¬¦ä¸² CFStringRef method = CFSTR(\"GET\");//åˆ›å»ºè¯·æ±‚URLå­—ç¬¦ä¸²CFStringRef urlStr = CFSTR(\"http://www.baidu.com\");//åˆ›å»ºè¯·æ±‚URLå¯¹è±¡CFURLRef url = CFURLCreateWithString(kCFAllocatorDefault, urlStr, NULL);//åˆ›å»ºHTTPæ¶ˆæ¯å¯¹è±¡CFHTTPMessageRef request = CFHTTPMessageCreateRequest(kCFAllocatorDefault, method, url, kCFHTTPVersion1_1);//è¿›è¡Œè¯·æ±‚å¤´çš„è®¾ç½®CFHTTPMessageSetHeaderFieldValue(request, CFSTR(\"key\"), CFSTR(\"Value\"));//åˆ›å»ºè¯»å–æµå¯¹è±¡CFReadStreamRef readStream = CFReadStreamCreateForHTTPRequest(kCFAllocatorDefault, request);//å®šä¹‰è¯»å–æµä¸Šä¸‹æ–‡CFStreamClientContext ctxt = &#123;0, (__bridge void *)(self), NULL, NULL, NULL&#125;;//è®¾ç½®è¯»å–çš„å®¢æœç«¯ å³å›è°ƒç›¸å…³CFReadStreamSetClient(readStream, kCFStreamEventHasBytesAvailable|kCFStreamEventEndEncountered|kCFStreamEventOpenCompleted|kCFStreamEventCanAcceptBytes|kCFStreamEventErrorOccurred, myCallBack, &amp;ctxt);//å°†è¯»å–æµåŠ å…¥runloopä¸­CFReadStreamScheduleWithRunLoop(readStream, CFRunLoopGetCurrent(), kCFRunLoopCommonModes);//å¼€å¯æµprintf(\"%d\",CFReadStreamOpen(readStream)); å®ç°myCallBackå›è°ƒå‡½æ•°å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425void myCallBack (CFReadStreamRef stream,CFStreamEventType type,void *clientCallBackInfo)&#123; //æµä¸­æœ‰å¯è¯»æ•°æ®çš„å›è°ƒ if (type == kCFStreamEventHasBytesAvailable) &#123; //å°†æµä¸­çš„æ•°æ®å­˜å…¥åˆ°æ•°ç»„ä¸­ UInt8 buff [1024]; CFReadStreamRead(stream, buff, 1024); printf(\"%s\",buff); //æµæ‰“å¼€å®Œæˆçš„å›è°ƒ &#125;else if(type==kCFStreamEventOpenCompleted)&#123; NSLog(@\"open\"); //æµå¼‚å¸¸çš„å›è°ƒ &#125;else if (type==kCFStreamEventErrorOccurred)&#123; NSLog(@\"error:%@\",CFErrorCopyDescription( CFReadStreamCopyError(stream))); //å¯ä»¥æ¥æ”¶å†™æ•°æ®æ—¶è°ƒç”¨ &#125;else if (type==kCFStreamEventCanAcceptBytes)&#123; NSLog(@\"kCFStreamEventCanAcceptBytes\"); //è¯»å–ç»“æŸå›è°ƒ &#125;else if(type==kCFStreamEventEndEncountered)&#123; NSLog(@\"end\"); //å…³é—­æµ CFReadStreamClose(stream); //å°†æµä»runloopä¸­ç§»é™¤ CFReadStreamUnscheduleFromRunLoop(stream, CFRunLoopGetCurrent(), kCFRunLoopCommonModes); &#125;&#125; ä¸Šé¢æ¼”ç¤ºäº†ç®€å•çš„GETè¯·æ±‚ï¼Œå¦‚æœä½¿ç”¨çš„è¯·æ±‚æ–¹æ³•ä¸ºPOSTï¼Œåˆ™å¯ä»¥è¿›è¡Œè¯·æ±‚ä½“çš„è®¾ç½®ï¼Œä¸Šé¢ç¤ºä¾‹ä»£ç ä¸­ï¼ŒCFStringRefã€CFURLRefã€CFReadStreamRefç­‰ç›¸å…³çš„ç±»ä¸ºCoreFoundationæ¡†æ¶ä¸­çš„ï¼Œè¿™é‡Œæš‚ä¸æ·±ç©¶ï¼Œç®€å•ä½¿ç”¨å³å¯ã€‚åé¢æˆ‘ä»¬å°†è¯¦ç»†çš„æ¢è®¨CFNetworkä¸­ç›¸å…³ç±»çš„ä½¿ç”¨ã€‚ ä¸‰ã€CFHTTPMessageRefè¯¦è§£åœ¨åŸºäºCçš„æ¡†æ¶ä¸­ï¼Œç±»å¯¹è±¡éƒ½æ˜¯ä½¿ç”¨ç»“æ„ä½“æŒ‡é’ˆæè¿°çš„ï¼ŒCFHTTPMessageRefæ˜¯HTTPæ¶ˆæ¯çš„å°è£…ï¼Œå…¶å¯ä»¥æ˜¯ä¸€ä¸ªHTTPè¯·æ±‚ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªHTTPå›æ‰§ã€‚ä¸å…¶ç›¸å…³çš„æ–¹æ³•è§£æå¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061//è¿”å›CGHTTPMessageRefçš„ç±»å‹IDCFTypeID CFHTTPMessageGetTypeID(void);//åˆ›å»ºä¸€ä¸ªHTTPè¯·æ±‚æ¶ˆæ¯/*allocä¸ºå†…å­˜ç®¡ç†å™¨ ä¸€èˆ¬ä½¿ç”¨é»˜è®¤çš„kCFAllocatorDefaultrequestMethodä¸ºè¯·æ±‚æ–¹æ³•urlä¸ºè¯·æ±‚çš„è·¯å¾„httpVersionä¸ºè¯·æ±‚çš„HTTPç‰ˆæœ¬HTTPç‰ˆæœ¬å®šä¹‰å¦‚ä¸‹ï¼škCFHTTPVersion1_0kCFHTTPVersion1_1kCFHTTPVersion2_0*/CFHTTPMessageRef CFHTTPMessageCreateRequest(CFAllocatorRef __nullable alloc, CFStringRef requestMethod, CFURLRef url, CFStringRef httpVersion);//åˆ›å»ºä¸€ä¸ªHTTPå›æ‰§æ¶ˆæ¯/*allocå†…å­˜ç®¡ç†å™¨statusCode è¯·æ±‚å›æ‰§çŠ¶æ€ç statusDescription è¯·æ±‚å›æ‰§çŠ¶æ€æè¿°httpVersion HTTPç‰ˆæœ¬å·*/CFHTTPMessageRef CFHTTPMessageCreateResponse(CFAllocatorRef __nullable alloc,CFIndex statusCode,CFStringRef __nullable statusDescription,CFStringRef httpVersion);//åˆ›å»ºä¸€ä¸ªç©ºçš„HTTPæ¶ˆæ¯ /*isRequest å¦‚æœä¼ å…¥kCFBooleanTrue åˆ™ä¸ºè¯·æ±‚ç±»å‹ å¦åˆ™ä¸ºå›æ‰§ç±»å‹*/CFHTTPMessageRef CFHTTPMessageCreateEmpty(CFAllocatorRef __nullable alloc, Boolean isRequest);//å¤åˆ¶ä¸€ä¸ªHTTPæ¶ˆæ¯CFHTTPMessageRef CFHTTPMessageCreateCopy(CFAllocatorRef __nullable alloc, CFHTTPMessageRef message);//åˆ¤æ–­ä¸€ä¸ªHTTPæ¶ˆæ¯æ˜¯è¯·æ±‚ è¿˜æ˜¯ å›æ‰§Boolean CFHTTPMessageIsRequest(CFHTTPMessageRef message);//è·å–HTTPç‰ˆæœ¬CFStringRef CFHTTPMessageCopyVersion(CFHTTPMessageRef message);//è·å–æ¶ˆæ¯ä½“å†…å®¹ è¯·æ±‚ä½“æˆ–è€…å›æ‰§ä½“CFDataRef CFHTTPMessageCopyBody(CFHTTPMessageRef message);//è®¾ç½®æ¶ˆæ¯ä½“å†…å®¹void CFHTTPMessageSetBody(CFHTTPMessageRef message, CFDataRef bodyData);//è·å–æŸä¸ªæ¶ˆæ¯å¤´å†…å®¹CFStringRef CFHTTPMessageCopyHeaderFieldValue(CFHTTPMessageRef message, CFStringRef headerField);//è·å–æ‰€æœ‰æ¶ˆæ¯å¤´å­—æ®µCFDictionaryRef CFHTTPMessageCopyAllHeaderFields(CFHTTPMessageRef message);//è®¾ç½®æ¶ˆæ¯å¤´void CFHTTPMessageSetHeaderFieldValue(CFHTTPMessageRef message, CFStringRef headerField, CFStringRef __nullable value);//å‘ç©ºæ¶ˆæ¯ä¸­è¿½åŠ åºåˆ—åŒ–çš„æ•°æ®Boolean CFHTTPMessageAppendBytes(CFHTTPMessageRef message, const UInt8 *newBytes, CFIndex numBytes);//è¿”å›æ¶ˆæ¯å¤´æ•°æ®æ˜¯å¦å‡†å¤‡å®ŒæˆBoolean CFHTTPMessageIsHeaderComplete(CFHTTPMessageRef message);//å°†ä¸€ä¸ªæ¶ˆæ¯å¯¹è±¡åºåˆ—åŒ–æˆæ•°æ®CFDataRef CFHTTPMessageCopySerializedMessage(CFHTTPMessageRef message);/*=================ä¸‹é¢è¿™äº›æ–¹æ³•é’ˆå¯¹äºè¯·æ±‚ç±»å‹çš„æ¶ˆæ¯=====================*///è·å–æ¶ˆæ¯ä¸­çš„urlCFURLRef CFHTTPMessageCopyRequestURL(CFHTTPMessageRef request);//è·å–æ¶ˆæ¯çš„è¯·æ±‚æ–¹æ³•CFStringRef CFHTTPMessageCopyRequestMethod(CFHTTPMessageRef request);//æ·»åŠ è®¤è¯ä¿¡æ¯Boolean CFHTTPMessageAddAuthentication(CFHTTPMessageRef request,CFHTTPMessageRef __nullable authenticationFailureResponse,CFStringRef username,CFStringRef password,CFStringRef __nullable authenticationScheme,Boolean forProxy);/*=================ä¸‹é¢è¿™äº›æ–¹æ³•é’ˆå¯¹äºç»˜åˆ¶ç±»å‹çš„æ¶ˆæ¯=====================*///è·å–å›æ‰§çŠ¶æ€ç CFIndex CFHTTPMessageGetResponseStatusCode(CFHTTPMessageRef response);//è·å–å›æ‰§çŠ¶æ€è¡Œä¿¡æ¯CFStringRef CFHTTPMessageCopyResponseStatusLine(CFHTTPMessageRef response); å››ã€è¿›è¡Œè¯·æ±‚ä¸å›è°ƒå¤„ç†CFHTTPMessageRefçš„ä¸»è¦ç”¨é€”æ˜¯æ„å»ºå‡ºHTTPçš„è¯·æ±‚æˆ–å›æ‰§å¯¹è±¡ï¼Œè¯·æ±‚çš„ç›¸å…³å‘èµ·ä¸å›è°ƒæ–¹æ³•éƒ½å°è£…åœ¨CFHTTPStream.hè¿™ä¸ªå¤´æ–‡ä»¶ä¸­ï¼Œè§£æå¦‚ä¸‹ï¼š 123456//é€šè¿‡ä¸€ä¸ªHTTPè¯·æ±‚åˆ›å»ºä¸€ä¸ªè¯»å–æµå¯¹è±¡CFReadStreamRef CFReadStreamCreateForHTTPRequest(CFAllocatorRef __nullable alloc, CFHTTPMessageRef request);//é€šè¿‡ä¸€ä¸ªHTTPè¯·æ±‚åˆ›å»ºè¯»å–æµå¯¹è±¡ ä½†æ˜¯è¯·æ±‚çš„bodyä¼šè¢«å¿½ç•¥ å–requestBodyä½œä¸ºè¯·æ±‚ä½“CFReadStreamRef CFReadStreamCreateForStreamedHTTPRequest(CFAllocatorRef __nullable alloc, CFHTTPMessageRef requestHeaders, CFReadStreamRef requestBody);//è®¾ç½®è¯»å–æµæ˜¯å¦è‡ªåŠ¨é‡å®šå‘void CFHTTPReadStreamSetRedirectsAutomatically(CFReadStreamRef httpStream, Boolean shouldAutoRedirect); äº”ã€å…³äºè¯·æ±‚çš„è¯ä¹¦éªŒè¯æœ‰æ—¶ï¼Œå®¢æˆ·ç«¯åœ¨å‘æœåŠ¡ç«¯è¿›è¡Œè¯·æ±‚æ—¶æ”¶åˆ°çŠ¶æ€ä¸º401çš„å›æ‰§ï¼Œè¿™æ—¶å¾€å¾€è¡¨æ˜éœ€è¦å®¢æˆ·ç«¯æä¾›ç”¨æˆ·å‡­è¯ï¼Œåœ¨CFNetWorkæ¡†æ¶ä¸­ï¼Œç”¨æˆ·å‡­è¯ä¸è¯ä¹¦éªŒè¯ç›¸å…³æ–¹æ³•å°è£…åœ¨CFHTTPAuthentication.hå¤´æ–‡ä»¶ä¸­ã€‚è§£æå¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031//è·å–CFHTTPAuthenticationç±»IDCFTypeID CFHTTPAuthenticationGetTypeID(void);/*é€šè¿‡ä¸€ä¸ª401æˆ–è€…407çš„è¯·æ±‚å›æ‰§åˆ›å»ºä¸€ä¸ª ç”¨æˆ·è®¤è¯å¯¹è±¡*/CFHTTPAuthenticationRef CFHTTPAuthenticationCreateFromResponse(CFAllocatorRef __nullable alloc, CFHTTPMessageRef response);//è·å–ä¸€ä¸ªç”¨æˆ·è®¤è¯å¯¹è±¡æ˜¯å¦æœ‰æ•ˆBoolean CFHTTPAuthenticationIsValid(CFHTTPAuthenticationRef auth, CFStreamError * __nullable error);//è·å–æŸä¸ªç”¨æˆ·è®¤è¯å¯¹è±¡æ˜¯å¦æ˜¯æŸä¸ªè¯·æ±‚çš„Boolean CFHTTPAuthenticationAppliesToRequest(CFHTTPAuthenticationRef auth, CFHTTPMessageRef request);//è·å–æŸä¸ªç”¨æˆ·è®¤è¯æ˜¯å¦å¿…é¡»æœ‰åºè¿›è¡ŒBoolean CFHTTPAuthenticationRequiresOrderedRequests(CFHTTPAuthenticationRef auth);//ä½¿ç”¨ç»™å®šçš„ç”¨æˆ·åå’Œå¯†ç æ‰§è¡Œè¯ä¹¦éªŒè¯æ–¹æ³•Boolean CFHTTPMessageApplyCredentials(CFHTTPMessageRef request,CFHTTPAuthenticationRef auth,CFStringRef __nullable username,CFStringRef __nullable password,CFStreamError * __nullable error);/*æ­¤æ–¹æ³•å’Œä¸Šé¢æ–¹æ³•ä½œç”¨ä¸€è‡´ ä¸åŒçš„æ˜¯ä½¿ç”¨å­—å…¸æ¥è¿›è¡Œç”¨æˆ·åå’Œå¯†ç çš„è®¾ç½® å­—æ®µçš„é”®å¦‚ä¸‹ï¼škCFHTTPAuthenticationUsername ç”¨æˆ·åé”®kCFHTTPAuthenticationPassword å¯†ç é”®kCFHTTPAuthenticationAccountDomain è´¦æˆ·åŸŸ*/Boolean CFHTTPMessageApplyCredentialDictionary(CFHTTPMessageRef request,CFHTTPAuthenticationRef auth,CFDictionaryRef dict,CFStreamError * __nullable error);//è¿”å›ç”¨æˆ·å‡­è¯çš„è´¦æˆ·åŸŸCFStringRef CFHTTPAuthenticationCopyRealm(CFHTTPAuthenticationRef auth);//è¿”å›ä¸€ç»„è´¦æˆ·åŸŸCFArrayRef CFHTTPAuthenticationCopyDomains(CFHTTPAuthenticationRef auth);//è¿”å›ç”¨æˆ·å‡­è¯çš„éªŒè¯æ–¹æ³•CFStringRef CFHTTPAuthenticationCopyMethod(CFHTTPAuthenticationRef auth);//è·å–ç”¨æˆ·å‡­è¯éªŒè¯æ˜¯å¦éœ€è¦ç”¨æˆ·åå’Œå¯†ç Boolean CFHTTPAuthenticationRequiresUserNameAndPassword(CFHTTPAuthenticationRef auth);//è·å–æ˜¯å¦éœ€è¦è´¦æˆ·åŸŸBoolean CFHTTPAuthenticationRequiresAccountDomain(CFHTTPAuthenticationRef auth); å…­ã€è¿›è¡ŒFTPåè®®çš„æ•°æ®äº¤æ¢CFNetWorkæ¡†æ¶ä¹Ÿæ”¯æŒä¸FTPåè®®çš„æœåŠ¡ç«¯è¿›è¡Œæ•°æ®äº¤äº’ï¼Œæ–¹æ³•è§£æå¦‚ä¸‹ï¼š 123456//æ ¹æ®URLåˆ›å»ºFTPè¯»å–æµå¯¹è±¡ ç”¨æ¥è¿›è¡Œæ–‡ä»¶ä¸‹è½½CFReadStreamRef CFReadStreamCreateWithFTPURL(CFAllocatorRef __nullable alloc, CFURLRef ftpURL);//è§£ææ–‡ä»¶æˆ–ç›®å½•çš„æ ¼å¼åŒ–æ•°æ®CFIndex CFFTPCreateParsedResourceListing(CFAllocatorRef __nullable alloc, const UInt8 *buffer, CFIndex bufferLength, CFDictionaryRef __nullable * __nullable parsed);//æ ¹æ®URLåˆ›å»ºä¸€ä¸ªFTPå†™å…¥æµå¯¹è±¡ ç”¨æ¥è¿›è¡Œæ–‡ä»¶ä¸Šä¼ CFWriteStreamRef CFWriteStreamCreateWithFTPURL(CFAllocatorRef __nullable alloc, CFURLRef ftpURL); å¯¹äºFTPå†™å…¥å’Œè¯»å–æµæ¥è¯´ï¼Œå¯ä»¥ä½¿ç”¨CFReadStreamSetProperty()å‡½æ•°æˆ–è€…CFWriteStreamSetProperty()å‡½æ•°æ¥è¿›è¡Œå±æ€§çš„è®¾ç½®ï¼Œå¯è®¾ç½®çš„å±æ€§åˆ—ä¸¾å¦‚ä¸‹ï¼š 12345678910111213141516171819202122kCFStreamPropertyFTPUserName //è®¾ç½®ç”¨æˆ·åkCFStreamPropertyFTPPassword //è®¾ç½®å¯†ç kCFStreamPropertyFTPUsePassiveMode //å¸ƒå°”å€¼ è®¾ç½®æ˜¯å¦è¢«åŠ¨æ¨¡å¼kCFStreamPropertyFTPResourceSize //èµ„æºå¤§å°kCFStreamPropertyFTPFileTransferOffset //è®°å½•æ–‡ä»¶ä½ç½® ç”¨æ¥æ–­ç‚¹ç»­ä¼ kCFStreamPropertyFTPAttemptPersistentConnection //æ˜¯å¦é‡ç”¨è¿æ¥kCFStreamPropertyFTPProxy //è®¾ç½®ä»£ç†å­—å…¸kCFStreamPropertyFTPFetchResourceInfo //èµ„æºè¯¦æƒ…å­—å…¸//ä¸‹é¢ä¸ºä»£ç†å­—å…¸ä¸­å¯ä»¥å®šä¹‰çš„é”®kCFStreamPropertyFTPProxyHost //ä»£ç†ä¸»æœºkCFStreamPropertyFTPProxyPort //ä»£ç†ç«¯å£kCFStreamPropertyFTPProxyUser //ä»£ç†ç”¨æˆ·åkCFStreamPropertyFTPProxyPassword //ä»£ç†å¯†ç //ä¸‹é¢æ˜¯èµ„æºè¯¦æƒ…å­—å…¸ä¸­å¯ä»¥å®šä¹‰çš„é”®kCFFTPResourceMode //èµ„æºæ¨¡å¼kCFFTPResourceName //èµ„æºåkCFFTPResourceOwne //èµ„æºæ‰€æœ‰è€…kCFFTPResourceGroup //èµ„æºç»„kCFFTPResourceLink //èµ„æºé“¾æ¥kCFFTPResourceSize //èµ„æºå°ºå¯¸kCFFTPResourceType //èµ„æºç±»å‹kCFFTPResourceModDate //ä¿®æ”¹æ—¶é—´ ä¸ƒã€ä¸»æœºåœ°å€ç›¸å…³æ“ä½œCFNetWorkä¸­ä¹Ÿå°è£…äº†ä¸ä¸»æœºåœ°å€åŸŸåç›¸å…³çš„æ“ä½œæ–¹æ³•ï¼Œä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åŸŸåè¿›è¡ŒDNSè§£æå‡ºIPåœ°å€ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567891011#import &lt;netinet/in.h&gt;#import &lt;arpa/inet.h&gt;CFStringRef hostString = CFSTR(\"www.baidu.com\");CFHostRef host = CFHostCreateWithName(CFAllocatorGetDefault(), hostString);CFHostStartInfoResolution(host, kCFHostAddresses, NULL);CFArrayRef addresses = CFHostGetAddressing(host, NULL);for (int i = 0; i&lt;CFArrayGetCount(addresses); i++) &#123; struct sockaddr_in * ip; ip = (struct sockaddr_in *)CFDataGetBytePtr(CFArrayGetValueAtIndex(addresses, i)); printf(\"%s\\n\",inet_ntoa(ip-&gt;sin_addr));&#125; CFHostRefå¯¹è±¡æ“ä½œç›¸å…³æ–¹æ³•è§£æå¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738//è·å–ç±»å‹IDCFTypeID CFHostGetTypeID(void);//æ ¹æ®åŸŸååˆ›å»ºCFHostRefå¯¹è±¡CFHostRef CFHostCreateWithName(CFAllocatorRef __nullable allocator, CFStringRef hostname);/*æ ¹æ®åœ°å€åˆ›å»ºCFHostRefå¯¹è±¡addrå‚æ•°ä¸ºsockaddrç»“æ„ä½“æ•°æ®*/CFHostRef CFHostCreateWithAddress(CFAllocatorRef __nullable allocator, CFDataRef addr);//CFHostRefå¯¹è±¡çš„å¤åˆ¶CFHostRef CFHostCreateCopy(CFAllocatorRef __nullable alloc, CFHostRef host);//å¯¹æŒ‡å®šä¸»æœºè¿›è¡Œä¿¡æ¯é¢„æŸ¥æ‰¾ è¿”å›å€¼æ ‡æ˜æ˜¯å¦æŸ¥æ‰¾æˆåŠŸBoolean CFHostStartInfoResolution(CFHostRef theHost, CFHostInfoType info, CFStreamError * __nullable error);//è·å–ä¸»æœºçš„åœ°å€åˆ—è¡¨ æ•°ç»„ä¸­ä¸ºsockaddrç»“æ„ä½“æ•°æ®CFArrayRef CFHostGetAddressing(CFHostRef theHost, Boolean * __nullable hasBeenResolved);//è·å–ä¸»æœºååˆ—è¡¨CFArrayRef CFHostGetNames(CFHostRef theHost, Boolean * __nullable hasBeenResolved);//è·å–ä¸»æœºå¯è¾¾æ€§ä¿¡æ¯CFDataRef CFHostGetReachability(CFHostRef theHost, Boolean * __nullable hasBeenResolved);//å–æ¶ˆæœªå®Œæˆçš„è§£æ/*è§£æç±»å‹æšä¸¾typedef CF_ENUM(int, CFHostInfoType) &#123; //åœ°å€ kCFHostAddresses = 0, //ä¸»æœºå kCFHostNames = 1, //å¯è¾¾æ€§ä¿¡æ¯ kCFHostReachability = 2&#125;;*/void CFHostCancelInfoResolution(CFHostRef theHost, CFHostInfoType info);//è®¾ç½®å®¢æˆ·ç«¯å›è°ƒBoolean CFHostSetClient(CFHostRef theHost, CFHostClientCallBack __nullable clientCB, CFHostClientContext * __nullable clientContext);//æ³¨å†Œè¿›Runloopvoid CFHostScheduleWithRunLoop(CFHostRef theHost, CFRunLoopRef runLoop, CFStringRef runLoopMode);//ä»Runloopä¸­æ³¨é”€void CFHostUnscheduleFromRunLoop(CFHostRef theHost, CFRunLoopRef runLoop, CFStringRef runLoopMode); å…«ã€åç»­ä¸Šé¢ä»‹ç»çš„å†…å®¹æ›´å¤šè¿˜æ˜¯å…³äºä½¿ç”¨CFNetWorkæ¡†æ¶è¿›è¡ŒHTTPæˆ–FTPè¯·æ±‚çš„ç›¸å…³æ–¹æ³•ï¼Œå…¶å®CFNetWorkæ¡†æ¶ä¸­è¿˜æä¾›äº†å¤æ‚çš„BonjouræœåŠ¡åŠŸèƒ½ï¼Œå…¶ä¸CFNetServiceç›¸å…³ï¼Œè¿™éƒ¨åˆ†å†…å®¹åé¢æœ‰æ—¶é—´å†è¿›è¡Œæ•´ç†æ€»ç»“å§ã€‚ æ¬¢è¿äº¤æµ ç²å°‘ QQ 316045346","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"GCCç¼–è¯‘è¿‡ç¨‹è®°","slug":"384 GCCç¼–è¯‘è¿‡ç¨‹è®°","date":"2018-10-15T16:00:00.000Z","updated":"2021-07-15T08:57:19.230Z","comments":true,"path":"2018/10/16/384 GCCç¼–è¯‘è¿‡ç¨‹è®°/","link":"","permalink":"http://huishao.cc/2018/10/16/384 GCCç¼–è¯‘è¿‡ç¨‹è®°/","excerpt":"","text":"GCCç¼–è¯‘è¿‡ç¨‹è®°ä¸€ã€å¼•è¨€ å¯¹äºç¼–ç¨‹å·¥ä½œè€…æ¥è¯´ï¼ŒGCCæ˜¯ä¸€ä¸ªç†Ÿæ‚‰çš„åå­—ï¼Œå®ƒçš„å…¨ç§°æ˜¯â€œGNU Compiler Collectionâ€ã€‚GCCæ˜¯ä¸€ç»„ç¼–è¯‘å™¨é›†åˆï¼Œç›®å‰å…¶æ”¯æŒCã€C++ã€Objective-Cã€Objective-C++ã€Goå’ŒRBIGè¯­è¨€çš„ç¼–è¯‘ã€‚æœ¬ç¯‡åšå®¢ä¸»è¦æ€»ç»“ä½¿ç”¨GCCè¿›è¡Œä»£ç ç¼–è¯‘çš„æ–¹æ³•ä»¥åŠä»æºæ–‡ä»¶ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶çš„æ•´ä¸ªè¿‡ç¨‹ã€‚ GCCå®Œæ•´çš„ç¼–è¯‘è¿‡ç¨‹åˆ†ä¸º4ä¸ªé˜¶æ®µï¼Œåˆ†åˆ«ä¸ºé¢„å¤„ç†ã€ç¼–è¯‘ã€è£…è½½å’Œé“¾æ¥ã€‚ç»è¿‡å®Œæ•´çš„4éƒ¨å¤„ç†åï¼ŒGCCä¼šå°†æºæ–‡ä»¶ç¼–è¯‘æˆå¯æ‰§è¡Œæ–‡ä»¶è¿›è¡Œè¾“å‡ºï¼Œä½†æ˜¯å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬è¿›è¡Œè°ƒç”¨æ—¶å¹¶ä¸éœ€è¦æ¯ä¸€ä¸ªè¿‡ç¨‹éƒ½å•ç‹¬è°ƒç”¨ï¼Œå¯ä»¥ä½¿ç”¨ç»„åˆå‘½ä»¤æ¥è®©GCCå¸®æˆ‘ä»¬å¤„ç†å®Œæˆè¿™äº›å·¥ä½œã€‚ äºŒã€GCCç¼–è¯‘çš„è¾“å‡ºå‚æ•°ç”±äºGCCæ˜¯ä¸€ç»„ç¼–è¯‘å™¨é›†åˆï¼Œå› æ­¤è¾“å…¥çš„æ–‡ä»¶åç¼€åå†³å®šäº†GCCçš„ç¼–è¯‘æ–¹å¼ï¼Œä¸‹é¢åˆ—å‡ºäº†å¸¸è§çš„æ–‡ä»¶åç¼€åå¯¹åº”çš„ç¼–è¯‘æ–¹å¼ï¼š | æ–‡ä»¶åç¼€å | ç¼–è¯‘æ–¹å¼ || .c | Cè¯­è¨€æºä»£ç ï¼Œå¹¶ä¸”éœ€è¦è¿›è¡Œé¢„å¤„ç† || .i | å·²ç»é¢„å¤„ç†å®Œæˆåçš„Cè¯­è¨€æºä»£ç  || .ii | å·²ç»é¢„å¤„ç†å®Œæˆåçš„C++æºä»£ç  || .m | Objective-Cæºä»£ç ï¼Œå¹¶ä¸”å¿…é¡»è¿›è¡Œlibobjcåº“çš„é“¾æ¥ || .mi | å·²ç»é¢„å¤„ç†å®Œæˆåçš„Objective-Cæºä»£ç  || .Mæˆ–.mm | Objective-C++æºä»£ç ï¼Œå¹¶ä¸”å¿…é¡»è¿›è¡Œlibobjcåº“çš„é“¾æ¥ || .mii | å·²ç»é¢„å¤„ç†å®Œæˆåçš„Objective-C++æºä»£ç  || .h | C,C++,Objective-Cçš„å¤´æ–‡ä»¶ï¼Œä¼šè¢«å¤„ç†è¿›é¢„ç¼–è¯‘å¤´ || .cc , .cp , .cxx , .cpp , .CPP , .c++ , .C | C++è¯­è¨€æºæ–‡ä»¶ï¼Œéœ€è¦è¿›è¡Œé¢„ç¼–è¯‘å¤„ç† || .f , .for , .ftn | å·²ç»é¢„å¤„ç†å®Œæˆåçš„Fortranè¯­è¨€æºæ–‡ä»¶ || .F , .FOR , .fpp , .FPP , .FTN | Fortranè¯­è¨€æºæ–‡ä»¶ï¼Œéœ€è¦è¿›è¡Œé¢„ç¼–è¯‘å¤„ç† || .go | Goè¯­è¨€æºæ–‡ä»¶ | ä¸‹é¢ä»¥ä¸€ä¸ªç®€å•çš„Cè¯­è¨€æºæ–‡ä»¶æ¥ä½œä¸ºç¤ºä¾‹æ–‡ä»¶è¿›è¡ŒGCCçš„ç¼–è¯‘æ¼”ç¤ºï¼Œé¦–å…ˆç¼–å†™ä¸€ä¸ªç®€å•çš„Cç¨‹åºå¦‚ä¸‹ï¼Œå°†æ–‡ä»¶åå‘½åä¸ºa.cï¼š 123456#include &lt;stdio.h&gt;int main(int argc, char const *argv[])&#123; printf(\"%s\\n\",\"Hello\"); return 0;&#125; Â·é¢„ç¼–è¯‘å¤„ç†ä½¿ç”¨ -E å‚æ•°è®¾ç½®GCCåªè¿›è¡Œé¢„ç¼–è¯‘å¤„ç†ï¼Œä¾‹å¦‚å¯¹ä¸Šé¢çš„a.cæºæ–‡ä»¶æ‰§è¡Œå¦‚ä¸‹çš„GCCå‘½ä»¤ï¼š 1gcc a.c -E &gt; a.i éœ€è¦æ³¨æ„ï¼ŒGCCä¼šå°†ç¼–è¯‘åçš„å†…å®¹è¾“å‡ºåˆ°a.iè¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œæ‰§è¡Œå‘½ä»¤åï¼Œæ‰“å¼€a.iæ–‡ä»¶ï¼Œä½ ä¼šå‘ç°ä¸€ä¸ªç®€å•çš„Cæºæ–‡ä»¶è¢«é¢„å¤„ç†æˆäº†500å¤šè¡Œä»£ç ï¼Œä½ å¯ä»¥å°è¯•åœ¨æºæ–‡ä»¶ä¸­æ·»åŠ å®å®šä¹‰ï¼Œé¢„å¤„ç†åæ‰€æœ‰çš„å®å®šä¹‰éƒ½è¢«ç›´æ¥æ›¿æ¢äº†ã€‚ ä½¿ç”¨ -S å‚æ•°è®¾ç½®GCCè¿›è¡Œç¼–è¯‘åŠŸèƒ½ï¼Œå¯ä»¥å°†é¢„å¤„ç†åçš„æ–‡ä»¶ç¼–è¯‘ä¸ºæ±‡ç¼–æºä»£ç ï¼Œä¾‹å¦‚ï¼š 1gcc a.i -S &gt; a.S .Sä¸ºåç¼€åçš„æ–‡ä»¶ä¸ºæ±‡ç¼–æºæ–‡ä»¶ï¼Œ-Sç¼–è¯‘æ˜¯é«˜çº§è¯­è¨€å‘ä½çº§è¯­è¨€è½¬æ¢çš„è¿‡ç¨‹ã€‚ ä½¿ç”¨ -c å‚æ•°è®¾ç½®GCCè¿›è¡Œç¼–è¯‘ï¼Œå¯ä»¥å°†æ±‡ç¼–åçš„æ±‡ç¼–æºæ–‡ä»¶ç¼–è¯‘æˆæœºå™¨ä»£ç ã€‚ä¾‹å¦‚ï¼š 1gcc a.i -c &gt; a.o .oåç¼€åçš„æ–‡ä»¶ä¸€èˆ¬æˆ‘ä»¬å°±æ²¡æœ‰åŠæ³•è¯»æ‡‚äº†ï¼Œå…¶æ˜¯æœºå™¨ç ã€‚-cç¼–è¯‘æ˜¯ç¼–ç¨‹è¯­è¨€å‘æœºå™¨è¯­è¨€è½¬æ¢çš„è¿‡ç¨‹ã€‚ é™¤äº†ä¸Šé¢æåˆ°çš„å‡ ä¸ªå‚æ•°å¤–ï¼Œå¯ä»¥ä½¿ç”¨-oå‚æ•°ç›´æ¥ç”Ÿæˆç›®æ ‡æ–‡ä»¶ï¼Œè¿™ä¸ªå‚æ•°ä¼šæ ¹æ®è¾“å…¥æ–‡ä»¶çš„åç¼€åè¿›è¡Œå¤„ç†ï¼Œç›´æ¥ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ï¼Œä¾‹å¦‚ï¼š 1gcc a.o -o a.out å…¶å®ä½¿ç”¨.cä¸ºåç¼€åçš„Cè¯­è¨€æºæ–‡ä»¶ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨-oå‚æ•°ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ï¼Œæ­¤æ—¶GCCä¼šèšåˆå‰é¢çš„é¢„å¤„ç†ï¼Œç¼–è¯‘ï¼Œè¿æ¥ç­‰è¿‡ç¨‹ã€‚.outä¸ºåç¼€åçš„æ–‡ä»¶æ˜¯å¯æ‰§è¡Œæ–‡ä»¶ï¼Œåœ¨ç»ˆç«¯å¯ä»¥ç›´æ¥æ‰§è¡Œï¼Œå¦‚ä¸‹ï¼š","categories":[{"name":"ç¼–ç¨‹ç ç‘","slug":"ç¼–ç¨‹ç ç‘","permalink":"http://huishao.cc/categories/ç¼–ç¨‹ç ç‘/"}],"tags":[],"keywords":[{"name":"ç¼–ç¨‹ç ç‘","slug":"ç¼–ç¨‹ç ç‘","permalink":"http://huishao.cc/categories/ç¼–ç¨‹ç ç‘/"}]},{"title":"iOSå¼€å‘ä¹‹BusinessChatæ¡†æ¶ä½¿ç”¨","slug":"383 iOSå¼€å‘ä¹‹BusinessChatæ¡†æ¶ä½¿ç”¨","date":"2018-10-11T16:00:00.000Z","updated":"2021-07-15T08:55:58.542Z","comments":true,"path":"2018/10/12/383 iOSå¼€å‘ä¹‹BusinessChatæ¡†æ¶ä½¿ç”¨/","link":"","permalink":"http://huishao.cc/2018/10/12/383 iOSå¼€å‘ä¹‹BusinessChatæ¡†æ¶ä½¿ç”¨/","excerpt":"","text":"iOSå¼€å‘ä¹‹BusinessChatæ¡†æ¶ä½¿ç”¨BusinessChatæ˜¯iOS11.3åå¼•å…¥çš„æ–°æ¡†æ¶ï¼Œè¿™ä¸ªæ¡†æ¶é…åˆiMessageåº”ç”¨å°†å•†å®¶ä¸ç”¨æˆ·æ›´åŠ ç´§å¯†çš„ç»“åˆèµ·æ¥ï¼Œå¹¶ä¸”ä¸ºå•†å®¶æä¾›äº†å¦å¤–ä¸€ç§éå¸¸æ–¹ä¾¿çš„å®¢æœç³»ç»Ÿã€‚ æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨iOS10ä¸­æ–°å¼•å…¥äº†iMessageæ‰©å±•ï¼ŒiMessageæ‰©å±•é™¤äº†ä¸°å¯Œäº†è¡¨æƒ…åŒ…å¤–ï¼Œå¼€å‘è€…ä¹Ÿå¯ä»¥å¼€å‘ä¸€äº›åŠŸèƒ½ç‹¬ç«‹çš„iMessageåº”ç”¨ï¼Œå…³äºiMessageæ‰©å±•çš„ç›¸å…³åº”ç”¨ï¼Œå¦‚ä¸‹åšå®¢ä¸­æœ‰ç€å®Œæ•´çš„ä»‹ç»ã€‚ https://my.oschina.net/u/2340880/blog/749331 éšç€iMessageæ‰©å±•ä½¿å¾—iMessageåŠŸèƒ½çš„è¶Šæ¥è¶Šå¼ºå¤§ï¼Œå…¶ä¸ºç”¨æˆ·æä¾›èƒ½åŠ›å’Œä¸ç¬¬ä¸‰æ–¹APPäº¤äº’èƒ½åŠ›ä¹Ÿè¶Šæ¥è¶Šå¼ºï¼ŒBusinessChatæ¡†æ¶æ˜¯æä¾›ç»™åº”ç”¨ç¨‹åºè°ƒç”¨iMessageæ¥ä¸å•†å®¶çš„å®¢æœç³»ç»Ÿè”ç³»çš„åŠŸèƒ½æ¡†æ¶ã€‚ è®¸å¤šæœåŠ¡ç±»çš„åº”ç”¨ç¨‹åºéƒ½æœ‰å®¢æœç³»ç»Ÿï¼Œä¾‹å¦‚å½“ç”¨æˆ·ä½¿ç”¨ç”µå•†ç±»åº”ç”¨ç¨‹åºæ—¶é€šå¸¸ä¼šéœ€è¦è”ç³»å•†å®¶ã€‚è¦ä½¿ç”¨BusinessChatç›¸å…³åŠŸèƒ½ï¼Œé¦–å…ˆéœ€è¦æ³¨å†Œæˆä¸ºAppleå•†å®¶ï¼Œåœ¨å¦‚ä¸‹ç½‘ç«™è¿›è¡Œå•†å®¶æ³¨å†Œï¼š https://register.apple.com ç•Œé¢å¦‚ä¸‹ï¼š ä½¿ç”¨AppleIDç™»å½•åï¼Œå¡«å†™å¿…è¦çš„å•†å®¶ä¿¡æ¯å’Œæˆå‘˜ä¿¡æ¯ï¼Œå³å¯è¿›è¡Œç”³è¯·ï¼Œæäº¤ç”³è¯·åï¼Œéœ€è¦Appleè¿›è¡Œå®¡æ ¸ï¼Œå¦‚æœå®¡æ ¸é€šè¿‡ä¼šåˆ†é…å•†æˆ·IDç»™æˆ‘ä»¬ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨è¿™ä¸ªå•†æˆ·IDæ¥è¿›è¡Œæˆ‘ä»¬çš„å¼€å‘ã€‚ BusinessChatæ¡†æ¶ä¸­æœ‰ä¸¤ä¸ªç±»ï¼šBCChatButtonç±»å’ŒBCChatActionç±»ï¼ŒBCChatButtonç±»æ˜¯å•çº¯çš„UIæ”¯æŒç±»ï¼Œå®ƒæä¾›äº†åŒæ„çš„è”ç³»å®¢æœæŒ‰é’®æ ·å¼ï¼ŒBCChatActionç±»ç”¨æ¥å¤„ç†è¡Œä¸ºé€»è¾‘ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617@implementation ViewController- (void)viewDidLoad &#123; [super viewDidLoad]; BCChatButton * btn = [[BCChatButton alloc]initWithStyle:BCChatButtonStyleDark]; btn.frame = CGRectMake(50, 100, 200,100); [btn addTarget:self action:@selector(click) forControlEvents:UIControlEventTouchUpInside]; [self.view addSubview:btn];&#125;-(void)click&#123; NSLog(@\"message\"); [BCChatAction openTranscript:@\"8d7f4b79-bf77-45ab-86b5-b74f56d47737\" intentParameters:@&#123;BCParameterNameIntent:@\"buy\",BCParameterNameGroup:@\"custom\",BCParameterNameBody:@\"Hello World\"&#125;];&#125;@end è¿è¡Œä»£ç ï¼ŒæŒ‰é’®æ ·å¼å¦‚ä¸‹å›¾ï¼š ç‚¹å‡»æŒ‰é’®åï¼Œä¼šè°ƒèµ·iMessageåº”ç”¨ï¼Œç”¨æˆ·å¯ä»¥ç›´æ¥ä¸å•†æˆ·è¿›å®¢æœè¡Œè”ç³»ã€‚ BCChatButtonæ˜¯ä¸€ä¸ªçº¯UIçš„æŒ‰é’®ç±»ï¼Œå…¶ç»§æ‰¿è‡ªUIControlï¼Œä½¿ç”¨æ–¹å¼å’Œæ­£å¸¸çš„UIButtonä¸€æ ·ï¼Œéœ€è¦æ³¨æ„ï¼Œå…¶ä¸­å¹¶æ²¡æœ‰å°è£…äº¤äº’é€»è¾‘ï¼ŒæŒ‰é’®çš„è§¦å‘äº‹ä»¶éœ€è¦å¼€å‘è€…è‡ªå·±å®šä¹‰ã€‚BCChatActionæ¥è¿›è¡Œäº¤äº’é€»è¾‘çš„å¤„ç†ï¼Œè¿™ä¸ªç±»ä¸­åªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š 123456789/*businessIdentifierä¸ºå•†æˆ·IDintentParametersä¸ºæ„å›¾å‚æ•°å­—å…¸ï¼Œå…¶ä¸­å¯å®šä¹‰é”®å€¼å¦‚ä¸‹ï¼šBCParameterNameIntent å®šä¹‰æ„å›¾ ç”¨æˆ·å‘é€æ¶ˆæ¯æ—¶å¯ä»¥è®©å•†æˆ·æ›´æ¸…æ¥šç”¨æˆ·çš„é—®é¢˜é¢†åŸŸBCParameterNameGroup å®šä¹‰ç»„ å¸®åŠ©å•†æˆ·å°†é—®é¢˜åˆ†å‘æ˜ç¡®çš„ç»„ BCParameterNameBody ä¿¡æ¯å†…å®¹*/+ (void)openTranscript:(NSString *)businessIdentifier intentParameters:(NSDictionary&lt;BCParameterName, NSString *&gt; *)intentParameters;","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSå¼€å‘ä¹‹AVKitæ¡†æ¶ä½¿ç”¨","slug":"382iOSå¼€å‘ä¹‹AVKitæ¡†æ¶ä½¿ç”¨","date":"2018-10-10T16:00:00.000Z","updated":"2021-07-15T08:51:04.027Z","comments":true,"path":"2018/10/11/382iOSå¼€å‘ä¹‹AVKitæ¡†æ¶ä½¿ç”¨/","link":"","permalink":"http://huishao.cc/2018/10/11/382iOSå¼€å‘ä¹‹AVKitæ¡†æ¶ä½¿ç”¨/","excerpt":"","text":"iOSå¼€å‘ä¹‹AVKitæ¡†æ¶ä½¿ç”¨ä¸€ã€å¼•è¨€åœ¨iOSå¼€å‘æ¡†æ¶ä¸­ï¼ŒAVKitæ˜¯ä¸€ä¸ªéå¸¸ä¸Šå±‚ï¼Œååº”ç”¨çš„æ¡†æ¶ï¼Œå®ƒæ˜¯åŸºäºAVFoundationçš„ä¸€å±‚è§†å›¾å±‚å°è£…ã€‚å…¶ä¸­ç›¸å…³æ–‡ä»¶å’Œç±»éƒ½ååˆ†ç®€å•ï¼Œæœ¬ç¯‡åšå®¢ä¸»è¦æ•´ç†å’Œæ€»ç»“AVKitä¸­ç›¸å…³ç±»çš„ä½¿ç”¨æ–¹æ³•ã€‚ äºŒã€AVRoutePickerViewAVRoutePickerViewæ˜¯iOS 11åæ–°åŠ å…¥çš„ç±»ï¼ŒAirPlayæ˜¯iOSè®¾å¤‡æ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨çš„ä¸€å¤§ç‰¹ç‚¹ã€‚å…¶ä½œç”¨æ˜¯å°†å½“å‰æ‰‹æœºæ’­æ”¾çš„éŸ³é¢‘æˆ–è€…è§†é¢‘æŠ•é€åˆ°å…¶ä»–å¤–éƒ¨è®¾å¤‡ä¸Šï¼Œä¾‹å¦‚æ”¯æŒAirPlayçš„ç”µè§†ï¼Œè½¦è½½è®¾å¤‡ç­‰ã€‚AVRoutePickerViewåªæ˜¯ä¸€ä¸ªæŒ‰é’®ï¼Œå…¶ç”¨æ¥æ–¹ä¾¿ç”¨æˆ·å¯ä»¥ç›´æ¥åœ¨åº”ç”¨ç¨‹åºå†…å”¤å‡ºAirPlayé€‰æ‹©çª—å£ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314151617- (void)viewDidLoad &#123; [super viewDidLoad]; AVRoutePickerView * view = [[AVRoutePickerView alloc]initWithFrame:CGRectMake(100, 100, 60, 60)]; //æ´»è·ƒçŠ¶æ€é¢œè‰² view.activeTintColor = [UIColor redColor]; //è®¾ç½®ä»£ç† view.delegate = self; [self.view addSubview:view];&#125;//AirPlayç•Œé¢å¼¹å‡ºæ—¶å›è°ƒ- (void)routePickerViewWillBeginPresentingRoutes:(AVRoutePickerView *)routePickerView&#123; NSLog(@\"!!!!!!!!\");&#125;//AirPlayç•Œé¢ç»“æŸæ—¶å›è°ƒ- (void)routePickerViewDidEndPresentingRoutes:(AVRoutePickerView *)routePickerView&#123; NSLog(@\"@@@@@@@@\");&#125; æŒ‰é’®å’Œå¼¹å‡ºç•Œé¢æ•ˆæœå¦‚ä¸‹ï¼š ä»ä¸Šé¢çš„ç¤ºä¾‹ä»£ç ä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œå¯¹äºAVRoutePickerViewï¼Œæˆ‘ä»¬åŸºæœ¬æ²¡æœ‰ä»»ä½•å¯ä»¥è¿›è¡Œè‡ªå®šä¹‰çš„ä½™åœ°ï¼Œä»UIæ•ˆæœåˆ°æŒ‰é’®çš„è§¦å‘æ–¹æ³•å…¨éƒ¨ç”±AVKitå°è£…å¥½äº†ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªå”¤å‡ºç³»ç»ŸåŠŸèƒ½çš„æ¥å£ã€‚ ä¸‰ã€AVPlayerViewControllerAVPlayerViewControlleræ˜¯å¯¹AVFoundationä¸­çš„AVPlayerä¸AVPlayerLayerçš„å°è£…ï¼Œå®ƒæ˜¯ä¸€ä¸ªå°è£…å¥½çš„è§†å›¾æ§åˆ¶å™¨ï¼ŒåŒ…å«äº†è§†é¢‘çš„æ’­æ”¾å’Œæ§åˆ¶åŠŸèƒ½ã€‚è¿™ä¸ªç±»åœ¨iOS8ä¹‹åå¯ç”¨ï¼Œè§£æå¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132@interface AVPlayerViewController : UIViewController//è§†é¢‘æ’­æ”¾å™¨å¯¹è±¡@property (nonatomic, strong, nullable) AVPlayer *player;//æ˜¯å¦æ˜¾ç¤ºè§†é¢‘æ’­æ”¾æ§åˆ¶ç»„ä»¶@property (nonatomic) BOOL showsPlaybackControls;//è®¾ç½®è§†é¢‘çš„å¡«å……æ–¹å¼/*//æŒ‰æ¯”ä¾‹ç¼©æ”¾AVF_EXPORT AVLayerVideoGravity const AVLayerVideoGravityResizeAspect NS_AVAILABLE(10_7, 4_0);//æŒ‰æ¯”ä¾‹å¡«å……AVF_EXPORT AVLayerVideoGravity const AVLayerVideoGravityResizeAspectFill NS_AVAILABLE(10_7, 4_0);//å……æ»¡AVF_EXPORT AVLayerVideoGravity const AVLayerVideoGravityResize NS_AVAILABLE(10_7, 4_0);*/@property (nonatomic, copy) AVLayerVideoGravity videoGravity;//è§†é¢‘çš„ç¬¬ä¸€å¸§æ˜¯å¦å·²ç»å‡†å¤‡å¥½äº†@property (nonatomic, readonly, getter = isReadyForDisplay) BOOL readyForDisplay;//è·å–è§†é¢‘çš„å°ºå¯¸@property (nonatomic, readonly) CGRect videoBounds;//å†…å®¹è¦†ç›–å±‚ å¯ä»¥å‘å…¶ä¸Šæ·»åŠ å­è§†å›¾ ä¼šå‡ºç°åœ¨è§†é¢‘å±‚ä¸æ§åˆ¶å±‚ä¹‹é—´@property (nonatomic, readonly, nullable) UIView *contentOverlayView;//æ˜¯å¦å…è®¸ç”»ä¸­ç”» iOS9ä»¥ä¸Šå¯ç”¨ ipadå¯ç”¨@property (nonatomic) BOOL allowsPictureInPicturePlayback API_AVAILABLE(ios(9.0));//æ˜¯å¦å¯¹ä¿¡æ¯ä¸­å¿ƒçš„æ’­æ”¾å™¨ä¿¡æ¯è¿›è¡Œæ›´æ–° é»˜è®¤ä¸ºYES@property (nonatomic) BOOL updatesNowPlayingInfoCenter API_AVAILABLE(ios(10.0));//æ˜¯å¦é»˜è®¤è¿›è¡Œå…¨å±æ’­æ”¾@property (nonatomic) BOOL entersFullScreenWhenPlaybackBegins API_AVAILABLE(ios(11.0));//æ’­æ”¾ç»“æŸå æ˜¯å¦é»˜è®¤é€€å‡ºå…¨å±@property (nonatomic) BOOL exitsFullScreenWhenPlaybackEnds API_AVAILABLE(ios(11.0));//ä»£ç†@property (nonatomic, weak, nullable) id &lt;AVPlayerViewControllerDelegate&gt; delegate API_AVAILABLE(ios(9.0));@end AVPlayerViewControllerDelegateè§£æå¦‚ä¸‹ï¼š 1234567891011121314//å°†è¦å¼€å§‹ç”»ä¸­ç”»æ—¶è°ƒç”¨- (void)playerViewControllerWillStartPictureInPicture:(AVPlayerViewController *)playerViewController;//å·²ç»å¼€å§‹ç”»ä¸­ç”»æ—¶è°ƒç”¨- (void)playerViewControllerDidStartPictureInPicture:(AVPlayerViewController *)playerViewController;//å¼€å¯ç”»ä¸­ç”»å¤±è´¥è°ƒç”¨- (void)playerViewController:(AVPlayerViewController *)playerViewController failedToStartPictureInPictureWithError:(NSError *)error;//å°†è¦ç»“æŸç”»ä¸­ç”»è°ƒç”¨- (void)playerViewControllerWillStopPictureInPicture:(AVPlayerViewController *)playerViewController;//å·²ç»ç»“æŸç”»ä¸­ç”»è°ƒç”¨- (void)playerViewControllerDidStopPictureInPicture:(AVPlayerViewController *)playerViewController;//æ˜¯å¦è‡ªåŠ¨å…³é—­æ§åˆ¶å™¨å½“ç”»ä¸­ç”»å¼€å§‹æ—¶- (BOOL)playerViewControllerShouldAutomaticallyDismissAtPictureInPictureStart:(AVPlayerViewController *)playerViewController;//ç”»ä¸­ç”»ç»“æŸåå›å¤ä¹‹å‰çš„ç”¨æˆ·ç•Œé¢- (void)playerViewController:(AVPlayerViewController *)playerViewController restoreUserInterfaceForPictureInPictureStopWithCompletionHandler:(void (^)(BOOL restored))completionHandler; å››ã€AVPictureInPictureControllerAVPictureInPictureControlleræ˜¯ä¸€ä¸ªæ§åˆ¶å™¨ï¼Œç”¨æ¥å¯¹ç”»ä¸­ç”»è¿›è¡Œç›¸å…³æ“ä½œï¼Œè§£æå¦‚ä¸‹ï¼š 1234567891011121314151617181920212223@interface AVPictureInPictureController : NSObject//è·å–å½“å‰è®¾å¤‡æ˜¯å¦æ”¯æŒç”»ä¸­ç”»+ (BOOL)isPictureInPictureSupported;//ç”»ä¸­ç”»è½¬æ¢å¼€å§‹æŒ‰é’®å›¾åƒ+ (UIImage *)pictureInPictureButtonStartImageCompatibleWithTraitCollection:(nullable UITraitCollection *)traitCollection;//ç”»ä¸­ç”»è½¬æ¢ç»“æŸæŒ‰é’®å›¾åƒ+ (UIImage *)pictureInPictureButtonStopImageCompatibleWithTraitCollection:(nullable UITraitCollection *)traitCollection;//æ„é€ æ–¹æ³•- (nullable instancetype)initWithPlayerLayer:(AVPlayerLayer *)playerLayer;//æ’­æ”¾å™¨è§†å›¾@property (nonatomic, readonly) AVPlayerLayer *playerLayer;//ä»£ç†@property (nonatomic, weak, nullable) id &lt;AVPictureInPictureControllerDelegate&gt; delegate;//å¼€å§‹ç”»ä¸­ç”»- (void)startPictureInPicture;//ç»“æŸç”»ä¸­ç”»- (void)stopPictureInPicture;//ç”»ä¸­ç”»ç›®å‰æ˜¯å¦å¯ç”¨@property (nonatomic, readonly, getter = isPictureInPicturePossible) BOOL pictureInPicturePossible;//ç”»ä¸­ç”»æ˜¯å¦æ¿€æ´»@property (nonatomic, readonly, getter = isPictureInPictureActive) BOOL pictureInPictureActive;//æ˜¯å¦æ”¯æŒç”»ä¸­ç”»@property (nonatomic, readonly, getter = isPictureInPictureSuspended) BOOL pictureInPictureSuspended;","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSå¼€å‘ä¹‹AssetsLibraryæ¡†æ¶ä½¿ç”¨","slug":"381iOSå¼€å‘ä¹‹AssetsLibraryæ¡†æ¶ä½¿ç”¨","date":"2018-09-10T16:00:00.000Z","updated":"2021-07-15T08:50:08.709Z","comments":true,"path":"2018/09/11/381iOSå¼€å‘ä¹‹AssetsLibraryæ¡†æ¶ä½¿ç”¨/","link":"","permalink":"http://huishao.cc/2018/09/11/381iOSå¼€å‘ä¹‹AssetsLibraryæ¡†æ¶ä½¿ç”¨/","excerpt":"","text":"iOSå¼€å‘ä¹‹AssetsLibraryæ¡†æ¶ä½¿ç”¨ä¸€ã€å¼•è¨€AssetsLibraryæ¡†æ¶æ˜¯ä¸“é—¨ç”¨æ¥æ“ä½œç›¸å†Œç›¸å…³èµ„æºçš„ä¸€ä¸ªæ¡†æ¶ï¼Œå…¶æ˜¯iOS4åˆ°iOS9ä¹‹é—´å¸¸ä½¿ç”¨çš„ä¸€ä¸ªæ¡†æ¶ï¼Œåœ¨iOS9ä¹‹åï¼Œç³»ç»Ÿç³»ç»Ÿäº†Photosæ¡†æ¶ä»£æ›¿äº†AssetsLibraryæ¡†æ¶ï¼Œä½†æ˜¯AssetsLibraryæ¡†æ¶ä¾ç„¶å¯ä»¥ä½¿ç”¨ï¼Œå¹¶ä¸”å…¶ç»“æ„å’Œè®¾è®¡æ€è·¯ä¾ç„¶å€¼å¾—æˆ‘ä»¬è¿›è¡Œåˆ†æå­¦ä¹ ã€‚ äºŒã€æ¦‚è¿°AssetsLibraryæ¡†æ¶ä¼šæ“ä½œç³»ç»Ÿçš„ç›¸å†Œï¼Œå› æ­¤é¦–å…ˆéœ€è¦è¿›è¡Œæƒé™çš„ç”³è¯·ï¼Œåœ¨ä½¿ç”¨ä¹‹å‰ï¼Œé¦–å…ˆéœ€è¦åœ¨Info.plistæ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹é”®å€¼ï¼š Privacy - Photo Library Usage Description AssetsLibraryæ¡†æ¶ä¸­æ ¸å¿ƒçš„ç±»å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¸‰ã€ALAssetsLibraryèµ„æºåº“å¯¹è±¡ALAssetsLibraryç±»ç”¨æ¥æ„å»ºèµ„æºåº“å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ç”¨æ¥æ•´ä½“æ“ä½œç³»ç»Ÿçš„ç›¸å†Œèµ„æºï¼Œåœ¨ä½¿ç”¨å®ƒä¹‹å‰æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•æ¥è·å–ç”¨æˆ·çš„æˆæƒæƒ…å†µï¼š 1+ (ALAuthorizationStatus)authorizationStatus; ALAuthorizationStatusæšä¸¾å®šä¹‰äº†ç”¨æˆ·çš„æˆæƒæƒ…å†µï¼Œå®šä¹‰å¦‚ä¸‹ï¼š 123456typedef NS_ENUM(NSInteger, ALAuthorizationStatus) &#123; ALAuthorizationStatusNotDetermined, // ç”¨æˆ·å°šæœªé€‰æ‹©æ˜¯å¦æˆæƒ ALAuthorizationStatusRestricted, //åº”ç”¨å°šæœªæˆæƒ ALAuthorizationStatusDenied), // ç”¨æˆ·æ‹’ç»æˆæƒ ALAuthorizationStatusAuthorized // ç”¨æˆ·å·²ç»æˆæƒ&#125; å¦‚æœç”¨æˆ·å°šæœªæˆæƒè¿‡ï¼Œé‚£ä¹ˆä»»ä½•è®¿é—®æ“ä½œéƒ½å°†è§¦å‘æˆæƒæœºåˆ¶ã€‚ èµ„æºåº“ä¸­çš„èµ„æºæ•°æ®æ˜¯ä»¥ç»„çš„æ–¹å¼è¿›è¡Œå­˜å‚¨ï¼Œä¸‹é¢ä»£ç ç¤ºä¾‹äº†è·å–èµ„æºç»„çš„æ–¹å¼ï¼š 1234567891011121314151617_library = [[ALAssetsLibrary alloc]init];[_library enumerateGroupsWithTypes:ALAssetsGroupAll usingBlock:^(ALAssetsGroup *group, BOOL *stop) &#123; if (group) &#123; // éå†ç›¸å†Œè¿˜æœªç»“æŸ // è®¾ç½®è¿‡æ»¤å™¨ [group setAssetsFilter:[ALAssetsFilter allPhotos]]; if (group.numberOfAssets) &#123; NSLog(@\"%@\",group); &#125; &#125; else &#123; // éå†ç»“æŸï¼ˆå½“groupä¸ºç©ºçš„æ—¶å€™å°±æ„å‘³ç€ç»“æŸï¼‰ NSLog(@\"æ²¡æœ‰ç›¸å†Œåˆ—è¡¨äº†\"); &#125; &#125; failureBlock:^(NSError *error) &#123; NSLog(@\"å¤±è´¥\");&#125;]; ä¸Šé¢ç¤ºä¾‹çš„æšä¸¾å‡½æ•°ç”¨æ¥æ ¹æ®å‚æ•°ç±»å‹è·å–èµ„æºç»„ï¼ŒALAssetsGroupTypeå‚æ•°å†³å®šè·å–ç»„çš„ç±»å‹ï¼Œå¯é€‰å€¼æšä¸¾å¦‚ä¸‹ï¼š 123456789enum &#123; ALAssetsGroupLibrary ,// ç¼–è¾‘åº“ ALAssetsGroupAlbum ,//ç›¸å†Œåº“ ALAssetsGroupEvent ,//äº‹ä»¶åº“ ALAssetsGroupFaces ,// iTunesåŒæ­¥ ALAssetsGroupSavedPhotos ,// ä¿å­˜çš„ç›¸ç‰‡ ALAssetsGroupPhotoStream ,// The PhotoStream album. ALAssetsGroupAll ,//æ‰€æœ‰åº“&#125;; æšä¸¾è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è¿‡å»åˆ°ALAssetsGroupç±»å‹çš„å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ä¸­å°è£…äº†ç›¸ç‰‡èµ„æºä¿¡æ¯ï¼Œåé¢ä¼šä»‹ç»ã€‚ ä¸‹é¢åˆ—ä¸¾äº†ALAssetsLibraryä¸­å…¶ä»–å¸¸ç”¨çš„æ–¹æ³•ï¼š 12345678910111213141516171819202122232425262728//ç›´æ¥é€šè¿‡URLæ¥è·å–èµ„æº- (void)assetForURL:(NSURL *)assetURL resultBlock:(ALAssetsLibraryAssetForURLResultBlock)resultBlock failureBlock:(ALAssetsLibraryAccessFailureBlock)failureBlock;//ç›´æ¥é€šè¿‡URLæ¥è·å–èµ„æºç»„- (void)groupForURL:(NSURL *)groupURL resultBlock:(ALAssetsLibraryGroupResultBlock)resultBlock failureBlock:(ALAssetsLibraryAccessFailureBlock)failureBlock;//å‘ç›¸å†Œåº“ä¸­æ·»åŠ ä¸€ä¸ªæ–°çš„èµ„æºç»„ å¯ä»¥è‡ªå®šä¹‰åç§°- (void)addAssetsGroupAlbumWithName:(NSString *)name resultBlock:(ALAssetsLibraryGroupResultBlock)resultBlock failureBlock:(ALAssetsLibraryAccessFailureBlock)failureBlock;//å‘ç›¸å†Œä¸­å†™å…¥ä¸€å¼ å›¾ç‰‡ orientationå‚æ•°è®¾ç½®å›¾ç‰‡çš„æ–¹å‘/*typedef NS_ENUM(NSInteger, ALAssetOrientation) &#123; ALAssetOrientationUp , // å‘ä¸Š é»˜è®¤çš„ ALAssetOrientationDown , // å‘ä¸‹ ALAssetOrientationLeft , // å‘å·¦ ALAssetOrientationRight , // å‘å³ ALAssetOrientationUpMirrored , // ALAssetOrientationDownMirrored , // horizontal flip ALAssetOrientationLeftMirrored , // vertical flip ALAssetOrientationRightMirrored , // vertical flip&#125;;*/- (void)writeImageToSavedPhotosAlbum:(CGImageRef)imageRef orientation:(ALAssetOrientation)orientation completionBlock:(ALAssetsLibraryWriteImageCompletionBlock)completionBlock;//å‘ç›¸å†Œä¸­å†™å…¥ä¸€å¼ å›¾ç‰‡ å¹¶å¯ä»¥è®¾ç½®å›¾ç‰‡çš„å…ƒæ•°æ®- (void)writeImageToSavedPhotosAlbum:(CGImageRef)imageRef metadata:(NSDictionary *)metadata completionBlock:(ALAssetsLibraryWriteImageCompletionBlock)completionBlock;//å‘ç›¸å†Œä¸­å†™å…¥å›¾ç‰‡æ•°æ® å¹¶å¯ä»¥è®¾ç½®å…ƒæ•°æ®- (void)writeImageDataToSavedPhotosAlbum:(NSData *)imageData metadata:(NSDictionary *)metadata completionBlock:(ALAssetsLibraryWriteImageCompletionBlock)completionBlock;//å°†æŸä¸ªè·¯å¾„çš„è§†é¢‘å†™å…¥ç›¸å†Œä¸­- (void)writeVideoAtPathToSavedPhotosAlbum:(NSURL *)videoPathURL completionBlock:(ALAssetsLibraryWriteVideoCompletionBlock)completionBlock;//æ£€æŸ¥è·¯å¾„ä¸­çš„è§†é¢‘æ˜¯å¦å’Œç›¸å†Œç›¸å…¼å®¹- (BOOL)videoAtPathIsCompatibleWithSavedPhotosAlbum:(NSURL *)videoPathURL; å½“èµ„æºåº“æ”¹å˜æ—¶ï¼Œç³»ç»Ÿä¼šå‘å‡ºå¦‚ä¸‹é€šçŸ¥ï¼š 12//èµ„æºåº“æ”¹å˜çš„é€šçŸ¥extern NSString *const ALAssetsLibraryChangedNotification; é€šçŸ¥ä¸­ä¼ é€’çš„ä¿¡æ¯ä¸­åŒ…å«å¦‚ä¸‹å­—æ®µï¼š 12345678//èµ„æºåº“æ›´æ–°extern NSString *const ALAssetLibraryUpdatedAssetsKey;//æ’å…¥ç»„extern NSString *const ALAssetLibraryInsertedAssetGroupsKey;//æ›´æ–°ç»„extern NSString *const ALAssetLibraryUpdatedAssetGroupsKey;//åˆ é™¤ç»„extern NSString *const ALAssetLibraryDeletedAssetGroupsKey; ä¸‹é¢åˆ—ä¸¾äº†æ“ä½œè¿‡ç¨‹ä¸­çš„ä¸€äº›å¼‚å¸¸å®šä¹‰ï¼š 123456789101112enum &#123; ALAssetsLibraryUnknownError = -1, // æœªçŸ¥é”™è¯¯ ALAssetsLibraryWriteFailedError = -3300, //å†™å…¥é”™è¯¯ ALAssetsLibraryWriteBusyError = -3301, // å†™å…¥ç¹å¿™ å¯ä»¥é‡è¯• ALAssetsLibraryWriteInvalidDataError = -3302, // æ— æ•ˆæ•°æ® ALAssetsLibraryWriteIncompatibleDataError = -3303, // ä¸å…¼å®¹çš„æ•°æ® ALAssetsLibraryWriteDataEncodingError = -3304, // æ•°æ®ç¼–ç é”™è¯¯ ALAssetsLibraryWriteDiskSpaceError = -3305, // å†…å­˜ä¸è¶³ ALAssetsLibraryDataUnavailableError = -3310, // æ•°æ®ä¸å¯ç”¨ ALAssetsLibraryAccessUserDeniedError = -3311, // æƒé™é”™è¯¯ ALAssetsLibraryAccessGloballyDeniedError = -3312, // æƒé™é”™è¯¯&#125;; å››ã€ALAssetsGroupèµ„æºç»„å¯¹è±¡èµ„æºç»„å…¶å®å°±æ˜¯å¯¹åº”ä¸æˆ‘ä»¬ç›¸å†Œä¸­çš„ä¸€ç»„èµ„æºï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¦‚ä¸‹çš„æ–¹ä¾¿éå†å‡ºå…¶ä¸­çš„æ‰€æœ‰èµ„æºï¼š 123456789101112131415161718_library = [[ALAssetsLibrary alloc]init];[_library enumerateGroupsWithTypes:ALAssetsGroupAll usingBlock:^(ALAssetsGroup *group, BOOL *stop) &#123; if (group) &#123; // éå†ç›¸å†Œè¿˜æœªç»“æŸ // è®¾ç½®è¿‡æ»¤å™¨ [group setAssetsFilter:[ALAssetsFilter allPhotos]]; if (group.numberOfAssets) &#123; [group enumerateAssetsUsingBlock:^(ALAsset *result, NSUInteger index, BOOL *stop) &#123; NSLog(@\"%d:%@\",index,result); &#125;]; &#125; &#125; else &#123; // éå†ç»“æŸï¼ˆå½“groupä¸ºç©ºçš„æ—¶å€™å°±æ„å‘³ç€ç»“æŸï¼‰ NSLog(@\"æ²¡æœ‰ç›¸å†Œåˆ—è¡¨äº†\"); &#125;&#125; failureBlock:^(NSError *error) &#123; NSLog(@\"å¤±è´¥\");&#125;]; ALAssetsGroupä¸­ç›¸å…³æ–¹æ³•è§£æå¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728//è·å–ç›¸å…³å±æ€§/*extern NSString *const ALAssetsGroupPropertyName;//ç»„åå­—extern NSString *const ALAssetsGroupPropertyType;//ç»„ç±»å‹extern NSString *const ALAssetsGroupPropertyPersistentID; //IDextern NSString *const ALAssetsGroupPropertyURL;//ç»„URL*/- (id)valueForProperty:(NSString *)property;//è·å–å½“å‰ç»„çš„ç¼©ç•¥å›¾æµ·æŠ¥- (CGImageRef)posterImage;//è®¾ç½®è¿‡æ»¤å™¨- (void)setAssetsFilter:(ALAssetsFilter *)filter;//è·å–ç»„ä¸­èµ„æºä¸ªæ•°- (NSInteger)numberOfAssets;//è¿›è¡Œèµ„æºæšä¸¾- (void)enumerateAssetsUsingBlock:(ALAssetsGroupEnumerationResultsBlock)enumerationBlock;/*typedef NS_OPTIONS(NSUInteger, NSEnumerationOptions) &#123; NSEnumerationConcurrent = (1UL &lt;&lt; 0),//é¡ºåºæšä¸¾ NSEnumerationReverse = (1UL &lt;&lt; 1), //é€†åºæšä¸¾&#125;;*/- (void)enumerateAssetsWithOptions:(NSEnumerationOptions)options usingBlock:(ALAssetsGroupEnumerationResultsBlock)enumerationBlock;- (void)enumerateAssetsAtIndexes:(NSIndexSet *)indexSet options:(NSEnumerationOptions)options usingBlock:(ALAssetsGroupEnumerationResultsBlock)enumerationBlock;//è·å–å½“å‰ç»„æ˜¯å¦å…è®¸ç¼–è¾‘@property (nonatomic, readonly, getter=isEditable) BOOL editable;//å‘ç»„ä¸­æ·»åŠ ä¸€ä¸ªèµ„æº- (BOOL)addAsset:(ALAsset *)asset; ä¸Šé¢æœ‰æåˆ°èµ„æºè¿‡æ»¤å™¨ï¼Œèµ„æºè¿‡æ»¤å™¨ç”¨æ¥è®¾ç½®è¿‡æ»¤ç»„ä¸­çš„èµ„æºï¼Œæœ‰3ä¸ªç±»æ–¹æ³•å¯ä»¥ç›´æ¥è·å–ç³»ç»Ÿæä¾›çš„è¿‡æ»¤å™¨ï¼š 12345678@interface ALAssetsFilter : NSObject &#123;//æ‰€æœ‰å›¾ç‰‡èµ„æº+ (ALAssetsFilter *)allPhotos;// æ‰€æœ‰è§†é¢‘èµ„æº+ (ALAssetsFilter *)allVideos;// æ‰€æœ‰èµ„æº+ (ALAssetsFilter *)allAssets;@end äº”ã€ALAssetèµ„æºå¯¹è±¡ALAssetæ˜¯å°è£…å¥½çš„èµ„æºå¯¹è±¡ç±»ï¼Œå¦‚ä¸‹æ–¹æ³•å¯ä»¥è·å–åˆ°èµ„æºä¸­å°è£…çš„å±æ€§ï¼š 1- (id)valueForProperty:(NSString *)property; å±æ€§åçš„å®šä¹‰å¦‚ä¸‹ï¼š 12345678910111213141516//è·å–èµ„æºç±»å‹/*è¿™ä¸ªå±æ€§å°†è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²extern NSString *const ALAssetTypePhoto//ç…§ç‰‡ç±»å‹extern NSString *const ALAssetTypeVideo//è§†é¢‘ç±»å‹extern NSString *const ALAssetTypeUnknown//æœªçŸ¥ç±»å‹*/extern NSString *const ALAssetPropertyType;//ä¼šè¿”å›ä¸€ä¸ªCLLocationå¯¹è±¡ å›¾ç‰‡çš„åœ°å€ä¿¡æ¯extern NSString *const ALAssetPropertyLocation;//è§†é¢‘èµ„æºçš„æ—¶é•¿ NSNumberå¯¹è±¡extern NSString *const ALAssetPropertyDuration;//èµ„æºæ–¹å‘extern NSString *const ALAssetPropertyOrientation;//èµ„æºæ—¥æœŸ ä¼šè¿”å›NSDateå¯¹è±¡extern NSString *const ALAssetPropertyDate; ä¸‹é¢åˆ—ä¸¾äº†ALAssetä¸­å¸¸ç”¨æ–¹æ³•ï¼š 12345678910111213141516171819//è·å–é»˜è®¤çš„Representationå¯¹è±¡- (ALAssetRepresentation *)defaultRepresentation;//è·å–æŒ‡å®šçš„Representationå¯¹è±¡- (ALAssetRepresentation *)representationForUTI:(NSString *)representationUTI;//è·å–èµ„æºç¼©ç•¥å›¾- (CGImageRef)thumbnail;- (CGImageRef)aspectRatioThumbnail;//å†™å…¥å›¾ç‰‡æ•°æ®- (void)writeModifiedImageDataToSavedPhotosAlbum:(NSData *)imageData metadata:(NSDictionary *)metadata completionBlock:(ALAssetsLibraryWriteImageCompletionBlock)completionBlock;//å†™å…¥è§†é¢‘æ•°æ®- (void)writeModifiedVideoAtPathToSavedPhotosAlbum:(NSURL *)videoPathURL completionBlock:(ALAssetsLibraryWriteVideoCompletionBlock)completionBlock;//åŸå§‹èµ„æºå¯¹è±¡@property (nonatomic, readonly) ALAsset *originalAsset;//æ˜¯å¦å…è®¸ç¼–è¾‘@property (nonatomic, readonly, getter=isEditable) BOOL editable;//æ›¿æ¢å›¾ç‰‡æ•°æ®- (void)setImageData:(NSData *)imageData metadata:(NSDictionary *)metadata completionBlock:(ALAssetsLibraryWriteImageCompletionBlock)completionBlock;//æ›¿æ¢è§†é¢‘æ•°æ®- (void)setVideoAtPath:(NSURL *)videoPathURL completionBlock:(ALAssetsLibraryWriteVideoCompletionBlock)completionBlock; å…­ã€å…³äºALAssetRepresentationç±»æ¯ä¸€ä¸ªALAssetå¯¹è±¡ä¸­éƒ½å°è£…äº†ä¸€ä¸ªALAssetRepresentationå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡çš„ä½œç”¨æ˜¯è·å–èµ„æºçš„è¯¦ç»†ä¿¡æ¯ï¼Œè§£æå¦‚ä¸‹ï¼š 1234567891011121314151617181920212223//è·å–UTI- (NSString *)UTI;//è·å–èµ„æºçš„å°ºå¯¸- (CGSize)dimensions;//è·å–èµ„æºçš„å¤§å°- (long long)size;//è¯»å–æ•°æ®- (NSUInteger)getBytes:(uint8_t *)buffer fromOffset:(long long)offset length:(NSUInteger)length error:(NSError **)error;//è·å–å›¾ç‰‡æ•°æ®- (CGImageRef)fullResolutionImage;- (CGImageRef)CGImageWithOptions:(NSDictionary *)options;//è·å–å…¨å±å›¾ç‰‡- (CGImageRef)fullScreenImage;//è·å–èµ„æºURL- (NSURL *)url;//è·å–èµ„æºå…ƒæ•°æ®- (NSDictionary *)metadata;//è·å–èµ„æºæ–¹å‘- (ALAssetOrientation)orientation;//ç¼©æ”¾æ¯”- (float)scale;//è·å–èµ„æºåç§°- (NSString *)filename;","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSå¼€å‘ä¹‹AdSupportæ¡†æ¶ä½¿ç”¨","slug":"380 iOSå¼€å‘ä¹‹AdSupportæ¡†æ¶ä½¿ç”¨","date":"2018-09-09T16:00:00.000Z","updated":"2021-07-15T08:49:26.125Z","comments":true,"path":"2018/09/10/380 iOSå¼€å‘ä¹‹AdSupportæ¡†æ¶ä½¿ç”¨/","link":"","permalink":"http://huishao.cc/2018/09/10/380 iOSå¼€å‘ä¹‹AdSupportæ¡†æ¶ä½¿ç”¨/","excerpt":"","text":"iOSå¼€å‘ä¹‹AdSupportæ¡†æ¶ä½¿ç”¨AdSupportä»å­—é¢æ„æ€ä¸Šç†è§£æ˜¯ç”¨æ¥è¿›è¡Œå¹¿å‘Šæ”¯æŒï¼Œè¿™ä¸ªæ¡†æ¶ååˆ†ç®€å•ï¼Œé‡Œé¢åªæœ‰ä¸€ä¸ªç±»ï¼Œç±»ä¸­åªæœ‰ä¸€ä¸ªæ–¹æ³•å’Œä¸¤ä¸ªå±æ€§ã€‚ AdSupportçš„å”¯ä¸€ç”¨é€”æ˜¯ç”¨æ¥è·å–è®¾å¤‡å”¯ä¸€çš„ä¸€ä¸ªå¹¿å‘Šæ ‡è¯†ç¬¦ã€‚å¯ä»¥ä½¿ç”¨æ­¤æ ‡è¯†ç¬¦ç”¨æ¥æ ‡è®°ç”¨æˆ·æ˜¯å¦æ¥æºäºæŸä¸ªå¹¿å‘Šæ¨å¹¿ï¼Œè®¾å¤‡é‡å¯ï¼Œé‡è£…åº”ç”¨ç¨‹åºéƒ½ä¸ä¼šä½¿å¹¿å‘Šæ ‡è¯†ç¬¦ä¿®æ”¹ã€‚ 123456789@interface ASIdentifierManager : NSObject//è·å–å•ä¾‹ç®¡ç†ç±»+ (ASIdentifierManager * _Nonnull)sharedManager;//è·å–å¹¿å‘Šæ ‡è¯†ç¬¦@property (nonnull, nonatomic, readonly) NSUUID *advertisingIdentifier;//ç”¨æˆ·æ˜¯å¦åŒæ„è·Ÿè¸ªå¹¿å‘Šæ ‡è¯†ç¬¦@property (nonatomic, readonly, getter=isAdvertisingTrackingEnabled) BOOL advertisingTrackingEnabled;@end","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSå¼€å‘ä¹‹AddressBookUIæ¡†æ¶è¯¦è§£","slug":"379iOSå¼€å‘ä¹‹AddressBookUIæ¡†æ¶è¯¦è§£","date":"2018-08-22T16:00:00.000Z","updated":"2021-07-15T08:48:34.762Z","comments":true,"path":"2018/08/23/379iOSå¼€å‘ä¹‹AddressBookUIæ¡†æ¶è¯¦è§£/","link":"","permalink":"http://huishao.cc/2018/08/23/379iOSå¼€å‘ä¹‹AddressBookUIæ¡†æ¶è¯¦è§£/","excerpt":"","text":"iOSå¼€å‘ä¹‹AddressBookUIæ¡†æ¶è¯¦è§£ä¸€ã€å…³äºAddressBookUIæ¡†æ¶AddressbookUIæ˜¯iOSå¼€å‘æ¡†æ¶ä¸­æä¾›çš„ä¸€å¥—é€šè®¯å½•ç•Œé¢ç»„ä»¶ã€‚å…¶ä¸­å°è£…å¥½äº†ä¸€å¥—é€‰æ‹©è”ç³»äººï¼ŒæŸ¥çœ‹è”ç³»äººçš„ç•Œé¢ï¼Œåœ¨éœ€è¦æ—¶å¼€å‘è€…å¯ä»¥ç›´æ¥è°ƒç”¨ã€‚å½“ç„¶å¯¹äºè”ç³»äººç•Œé¢ï¼Œå¼€å‘è€…ä¹Ÿå¯ä»¥è¿›è¡Œå®Œå…¨çš„è‡ªå®šä¹‰ï¼Œä¸‹é¢é“¾æ¥åšå®¢ä¸­ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨AddressBookæ¡†æ¶æ“ä½œé€šè®¯å½•ä¸è”ç³»äººã€‚ https://my.oschina.net/u/2340880/blog/1930414 AddressBookUIæ¡†æ¶ä¸»è¦æä¾›äº†å¦‚ä¸‹å‡ ä¸ªç±»ï¼š ABNewPersonViewControllerï¼šæ–°å»ºè”ç³»äººç•Œé¢è§†å›¾æ§åˆ¶å™¨ ABPeoplePickerNavigationControllerï¼šä»é€šè®¯å½•é€‰æ‹©è”ç³»äººç•Œé¢è§†å›¾æ§åˆ¶å™¨ ABPersonViewControllerï¼šè”ç³»äººè¯¦æƒ…ç•Œé¢è§†å›¾æ§åˆ¶å™¨ ABUnknownPersonViewControllerï¼šä¸€ä¸ªæœªåœ¨å½“å‰é€šè®¯å½•ä¸­çš„è”ç³»äººæŸ¥çœ‹ç•Œé¢ï¼Œå¯ä»¥æ·»åŠ å’Œç¼–è¾‘ äºŒã€ABNewPersonViewControlleræ–°å»ºè”ç³»äººç•Œé¢ABNewPersonViewControllerç±»çš„ä½¿ç”¨éå¸¸ç®€å•ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123ABNewPersonViewController *picker = [[ABNewPersonViewController alloc] init];picker.newPersonViewDelegate = self;[self presentModalViewController:picker animated:YES]; æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ABNewPersonViewControllerè§£æå¦‚ä¸‹ï¼š 12345678//ä»£ç†@property(nonatomic,assign,nullable) id&lt;ABNewPersonViewControllerDelegate&gt; newPersonViewDelegate;//é€šè®¯å½•å®ä¾‹ åªè¯»@property(nonatomic,readwrite,nullable) ABAddressBookRef addressBook;//è”ç³»äºº åªè¯»@property(nonatomic,readwrite,nullable) ABRecordRef displayedPerson;//è”ç³»äººç»„ åªè¯»@property(nonatomic,readwrite,nullable) ABRecordRef parentGroup; è”ç³»äººçš„æ–°å»ºå›è°ƒå¯ä»¥åœ¨ä»£ç†æ–¹æ³•ä¸­å¤„ç†ï¼Œå¦‚ä¸‹ï¼š 1234@protocol ABNewPersonViewControllerDelegate &lt;NSObject&gt;//æ–°å»ºè”ç³»äººå®Œæˆåçš„å›è°ƒ- (void)newPersonViewController:(ABNewPersonViewController *)newPersonView didCompleteWithNewPerson:(nullable ABRecordRef)person;@end ä¸‰ã€ABPeoplePickerNavigationControlleré€‰æ‹©è”ç³»äººç•Œé¢ABPeoplePickerNavigationControlleræ˜¯ç”¨æˆ·é€šè®¯å½•ç•Œé¢ï¼Œå¼€å‘è€…åœ¨éœ€è¦ç”¨æˆ·é€‰æ‹©è”ç³»äººæ—¶ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨è¿™ä¸ªç•Œé¢æ¥è®©ç”¨æˆ·è¿›è¡Œé€‰æ‹©ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123ABPeoplePickerNavigationController *vc = [[ABPeoplePickerNavigationController alloc] init];vc.peoplePickerDelegate = self;[self presentViewController:vc animated:YES completion:nil]; æ•ˆæœå¦‚ä¸‹å›¾ï¼š ABPeoplePickerNavigationControllerè§£æå¦‚ä¸‹ï¼š 123456789101112//ä»£ç†@property(nonatomic,assign,nullable) id&lt;ABPeoplePickerNavigationControllerDelegate&gt; peoplePickerDelegate;//éœ€è¦å±•ç¤ºçš„ç”¨æˆ·è”ç³»äººå±æ€§å­—æ®µ æ•°ç»„ä¸­ä¸ºå±æ€§çš„ID åœ¨AddressBookæ¡†æ¶ä»‹ç»çš„åšå®¢ä¸­æœ‰è®²è§£@property(nonatomic,copy,nullable) NSArray&lt;NSNumber*&gt; *displayedProperties;//é€šè®¯å½•å®ä¾‹@property(nonatomic,readwrite,nullable) ABAddressBookRef addressBook;//è®¾ç½®ä¸€ä¸ªç­›é€‰æ¡ä»¶ è¿‡æ»¤æ‰ä¸å¯æ˜¾ç¤ºçš„è”ç³»äºº@property(nonatomic,copy,nullable) NSPredicate *predicateForEnablingPerson;//è®¾ç½®ä¸€ä¸ªç­›é€‰æ¡ä»¶ è¿‡æ»¤æ‰ä¸å¯é€‰æ‹©çš„è”ç³»äºº@property(nonatomic,copy,nullable) NSPredicate *predicateForSelectionOfPerson;//è®¾ç½®ä¸€ä¸ªç­›é€‰æ¡ä»¶ è¿‡æ»¤æ‰ä¸å¯æ˜¾ç¤ºçš„å±æ€§@property(nonatomic,copy,nullable) NSPredicate *predicateForSelectionOfProperty; ç”¨æ¥è¿›è¡Œè”ç³»äººç­›é€‰çš„å±æ€§å®šä¹‰å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223extern NSString * const ABPersonNamePrefixProperty NS_AVAILABLE_IOS(8_0);extern NSString * const ABPersonGivenNameProperty NS_AVAILABLE_IOS(8_0); extern NSString * const ABPersonMiddleNameProperty NS_AVAILABLE_IOS(8_0); extern NSString * const ABPersonFamilyNameProperty NS_AVAILABLE_IOS(8_0); extern NSString * const ABPersonNameSuffixProperty NS_AVAILABLE_IOS(8_0); extern NSString * const ABPersonPreviousFamilyNameProperty NS_AVAILABLE_IOS(8_0); extern NSString * const ABPersonNicknameProperty NS_AVAILABLE_IOS(8_0); extern NSString * const ABPersonPhoneticGivenNameProperty NS_AVAILABLE_IOS(8_0); extern NSString * const ABPersonPhoneticMiddleNameProperty NS_AVAILABLE_IOS(8_0); extern NSString * const ABPersonPhoneticFamilyNameProperty NS_AVAILABLE_IOS(8_0); extern NSString * const ABPersonOrganizationNameProperty NS_AVAILABLE_IOS(8_0); extern NSString * const ABPersonDepartmentNameProperty NS_AVAILABLE_IOS(8_0); extern NSString * const ABPersonJobTitleProperty NS_AVAILABLE_IOS(8_0); extern NSString * const ABPersonBirthdayProperty NS_AVAILABLE_IOS(8_0); extern NSString * const ABPersonNoteProperty NS_AVAILABLE_IOS(8_0); extern NSString * const ABPersonPhoneNumbersProperty NS_AVAILABLE_IOS(8_0); extern NSString * const ABPersonEmailAddressesProperty NS_AVAILABLE_IOS(8_0); extern NSString * const ABPersonUrlAddressesProperty NS_AVAILABLE_IOS(8_0); extern NSString * const ABPersonDatesProperty NS_AVAILABLE_IOS(8_0); extern NSString * const ABPersonInstantMessageAddressesProperty NS_AVAILABLE_IOS(8_0); extern NSString * const ABPersonRelatedNamesProperty NS_AVAILABLE_IOS(8_0); extern NSString * const ABPersonSocialProfilesProperty NS_AVAILABLE_IOS(8_0); extern NSString * const ABPersonPostalAddressesProperty NS_AVAILABLE_IOS(8_0); ABPeoplePickerNavigationControllerDelegateä¸­æ–¹æ³•è§£é‡Šå¦‚ä¸‹ï¼š 123456//é€‰ä¸­è”ç³»äººè¿›è¡Œå›è°ƒ- (void)peoplePickerNavigationController:(ABPeoplePickerNavigationController*)peoplePicker didSelectPerson:(ABRecordRef)person;//é€‰æ‹©è”ç³»äººå±æ€§- (void)peoplePickerNavigationController:(ABPeoplePickerNavigationController*)peoplePicker didSelectPerson:(ABRecordRef)person property:(ABPropertyID)property identifier:(ABMultiValueIdentifier)identifier;//å–æ¶ˆé€‰æ‹©- (void)peoplePickerNavigationControllerDidCancel:(ABPeoplePickerNavigationController *)peoplePicker; å››ã€ABPersonViewControllerè”ç³»äººè¯¦æƒ…ç•Œé¢ABPersonViewControlleræ˜¯è”ç³»äººçš„è¯¦æƒ…å±•ç¤ºç•Œé¢ï¼Œç®€å•ä½¿ç”¨å¦‚ä¸‹ï¼š 1234567891011CFErrorRef error = NULL;ABAddressBookRef addressBook = ABAddressBookCreateWithOptions(NULL, &amp;error);CFArrayRef peopleArray = ABAddressBookCopyArrayOfAllPeople(addressBook);ABRecordRef person = CFArrayGetValueAtIndex(peopleArray, 0);ABPersonViewController *viewController = [[ABPersonViewController alloc] init];viewController.personViewDelegate = self;viewController.displayedPerson = person;viewController.allowsActions = NO;viewController.allowsEditing = YES;viewController.displayedProperties = @[[NSNumber numberWithInt:kABPersonPhoneProperty]];[self presentViewController:viewController animated:YES completion:nil]; ç•Œé¢å¦‚ä¸‹ï¼š ABPersonViewControllerä¸­å¸¸ç”¨å±æ€§æ–¹æ³•è§£æå¦‚ä¸‹ï¼š 12345678910111213141516//ä»£ç†@property(nonatomic,assign,nullable) id&lt;ABPersonViewControllerDelegate&gt; personViewDelegate;//é€šè®¯å½•å®ä¾‹@property(nonatomic,readwrite,nullable) ABAddressBookRef addressBook;//è”ç³»äººè®°å½•å®ä¾‹@property(nonatomic,readwrite) ABRecordRef displayedPerson;//å±•ç¤ºçš„å±æ€§å­—æ®µ@property(nonatomic,copy,nullable) NSArray&lt;NSNumber*&gt; *displayedProperties;//æ˜¯å¦å…è®¸ç¼–è¾‘@property(nonatomic) BOOL allowsEditing;//æ˜¯å¦å…è®¸æ´»åŠ¨æŒ‰é’® ä¾‹å¦‚åˆ†äº«@property(nonatomic) BOOL allowsActions;//æ˜¯å¦å…è®¸å…³è”å…¶ä»–è”ç³»äºº@property(nonatomic) BOOL shouldShowLinkedPeople;//è®¾ç½®å±æ€§é«˜äº®- (void)setHighlightedItemForProperty:(ABPropertyID)property withIdentifier:(ABMultiValueIdentifier)identifier; ABPersonViewControllerDelegateä¸­æ–¹æ³•è§£é‡Šå¦‚ä¸‹ï¼š 12//é€‰æ‹©å±æ€§å‘é€æ—¶è°ƒç”¨- (BOOL)personViewController:(ABPersonViewController *)personViewController shouldPerformDefaultActionForPerson:(ABRecordRef)person property:(ABPropertyID)property identifier:(ABMultiValueIdentifier)identifier; äº”ã€å…³äºABUnknownPersonViewControllerABUnknownPersonViewControllerç•Œé¢ä¸ABPersonViewControlleråŸºæœ¬ä¸€è‡´ï¼Œä¸åŒçš„æ˜¯ï¼ŒABPersonViewControlleréœ€è¦ä½¿ç”¨ä¸€ä¸ªé€šè®¯å½•ä¸­å·²ç»å­˜åœ¨çš„è”ç³»äººä½œä¸ºå‚æ•°è¿›è¡Œå±•ç¤ºï¼ŒABUnknownPersonViewControlleråˆ™ä¸ç„¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªé€šè®¯å½•ä¸­ä¸å­˜åœ¨çš„è”ç³»äººå¯¹è±¡æ¥è¿›è¡Œç•Œé¢çš„æ¸²æŸ“ï¼Œå¹¶ä¸”æ”¯æŒç”¨æˆ·é€‰æ‹©å°†æ­¤è”ç³»äººå­˜å…¥é€šè®¯å½•ä¸­ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š 1234ABUnknownPersonViewController *unknown=[[ABUnknownPersonViewController alloc]init];unknown.displayedPerson=ABPersonCreate();unknown.allowsAddingToAddressBook=YES;//å…è®¸æ·»åŠ [self presentViewController:unknown animated:YES completion:nil]; ABUnknownPersonViewControllerä¸­å±æ€§æ–¹æ³•è§£é‡Šå¦‚ä¸‹ï¼š 1234567891011121314//ä»£ç†@property(nonatomic,assign,nullable) id&lt;ABUnknownPersonViewControllerDelegate&gt; unknownPersonViewDelegate;//é€šè®¯å½•å®ä¾‹å¯¹è±¡@property(nonatomic,readwrite,nullable) ABAddressBookRef addressBook;//è”ç³»äººå®ä¾‹@property(nonatomic,readwrite) ABRecordRef displayedPerson;//æç¤ºåå­—@property(nonatomic,copy,nullable) NSString *alternateName;//æç¤ºä¿¡æ¯@property(nonatomic,copy,nullable) NSString *message;//æ˜¯å¦å…è®¸æ´»åŠ¨@property(nonatomic) BOOL allowsActions;//æ˜¯å¦å…è®¸æ·»åŠ ç”µè¯æœ¬@property(nonatomic) BOOL allowsAddingToAddressBook; ABUnknownPersonViewControllerDelegateæ–¹æ³•ï¼š 1234//è”ç³»äººè§£é‡Šæ—¶è°ƒç”¨- (void)unknownPersonViewController:(ABUnknownPersonViewController *)unknownCardViewController didResolveToPerson:(nullable ABRecordRef)person;//å‘é€æ´»åŠ¨- (BOOL)unknownPersonViewController:(ABUnknownPersonViewController *)personViewController shouldPerformDefaultActionForPerson:(ABRecordRef)person property:(ABPropertyID)property identifier:(ABMultiValueIdentifier)identifier;","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSå¼€å‘ä¹‹AddressBookæ¡†æ¶è¯¦è§£","slug":"378iOSå¼€å‘ä¹‹AddressBookæ¡†æ¶è¯¦è§£","date":"2018-08-18T16:00:00.000Z","updated":"2021-07-15T08:47:49.730Z","comments":true,"path":"2018/08/19/378iOSå¼€å‘ä¹‹AddressBookæ¡†æ¶è¯¦è§£/","link":"","permalink":"http://huishao.cc/2018/08/19/378iOSå¼€å‘ä¹‹AddressBookæ¡†æ¶è¯¦è§£/","excerpt":"","text":"iOSå¼€å‘ä¹‹AddressBookæ¡†æ¶è¯¦è§£ä¸€ã€å†™åœ¨å‰é¢é¦–å…ˆï¼ŒAddressBookæ¡†æ¶æ˜¯ä¸€ä¸ªå·²ç»è¿‡æ—¶çš„æ¡†æ¶ï¼ŒiOS9ä¹‹åå®˜æ–¹æä¾›äº†Contactsæ¡†æ¶æ¥è¿›è¡Œç”¨æˆ·é€šè®¯å½•ç›¸å…³æ“ä½œã€‚å°½ç®¡å¦‚æ­¤ï¼ŒAddressBookæ¡†æ¶ä¾ç„¶æ˜¯ä¸€ä¸ªéå¸¸ä¼˜é›…å¹¶ä¸”ä½¿ç”¨æ–¹ä¾¿çš„é€šè®¯å½•å¸®åŠ©åº“ã€‚æœ¬ç¯‡åšå®¢åªè¦æ€»ç»“AddressBookæ¡†æ¶çš„ç›¸å…³ä½¿ç”¨æ–¹æ³•ã€‚ åœ¨AddressBookæ¡†æ¶ä¸­ï¼Œä¸¤ä¸ªæœ€é‡è¦çš„æ•°æ®æ¨¡å‹ä¸ºABAddressbookRefä¸ABRecordRefã€‚å‰è€…æˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºé€šè®¯å½•çš„æŠ½è±¡å¯¹è±¡ï¼Œç”¨å®ƒæ¥å…·ä½“æ“ä½œé€šè®¯å½•çš„è¡Œä¸ºï¼Œåè€…å¯ä»¥ç†è§£ä¸ºé€šè®¯å½•ä¸­è®°å½•çš„æŠ½è±¡å¯¹è±¡ï¼Œå…¶ä¸­å°è£…äº†è”ç³»äººçš„ç›¸å…³ä¿¡æ¯ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š äºŒã€å…³äºç”¨æˆ·æƒé™ç”³è¯·åœ¨åº”ç”¨ç¨‹åºå†…ï¼Œè‹¥éœ€è¦ä½¿ç”¨ç”¨æˆ·çš„é€šè®¯å½•æƒé™éœ€è¦å¾å¾—ç”¨æˆ·çš„åŒæ„(æ¯•ç«Ÿé€šè®¯å½•å±äºç”¨æˆ·éšç§)ã€‚å› æ­¤ï¼Œåœ¨ä½¿ç”¨ä¹‹å‰ï¼Œå¼€å‘è€…é¦–å…ˆéœ€è¦è¿›è¡Œæƒé™çš„ç”³è¯·ï¼Œé¦–å…ˆï¼Œéœ€è¦åœ¨info.plistæ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹é”®ï¼š Privacy - Contacts Usage Description ä½¿ç”¨å¦‚ä¸‹ä»£ç è¿›è¡Œä½¿ç”¨æƒé™çš„ç”³è¯·ï¼š 123456789101112131415//è·å–ç”¨æˆ·æˆæƒçŠ¶æ€ABAuthorizationStatus status = ABAddressBookGetAuthorizationStatus();//å¦‚æœå°šæœªè·å–è¿‡æˆæƒ è¿›è¡Œæˆæƒç”³è¯·if (status==kABAuthorizationStatusNotDetermined) &#123; //åˆ›å»ºé€šè®¯å½•å¯¹è±¡ è¿™ä¸ªæ–¹æ³•ä¸­ç¬¬1ä¸ªå‚æ•°ä¸ºé¢„ç•™å‚æ•° ä¼ NULL å³å¯ ç¬¬2ä¸ªå‚æ•°å¯ä»¥ä¼ ä¸€ä¸ªCFErrorRefçš„æŒ‡é’ˆ ABAddressBookRef addressBookRef = ABAddressBookCreateWithOptions(NULL, NULL); //è¯·æ±‚æˆæƒ ABAddressBookRequestAccessWithCompletion(addressBookRef, ^(bool granted, CFErrorRef error) &#123; if (granted) &#123;//è¯·æ±‚æˆæƒé¡µé¢ç”¨æˆ·åŒæ„æˆæƒ //å¯ä»¥è¿›è¡Œä½¿ç”¨ &#125; //é‡Šæ”¾å†…å­˜ CFRelease(addressBookRef); &#125;);&#125; ABAuthorizationStatusæ˜¯æˆæƒçŠ¶æ€çš„æšä¸¾ï¼Œæ„ä¹‰å¦‚ä¸‹ï¼š 123456typedef CF_ENUM(CFIndex, ABAuthorizationStatus) &#123; kABAuthorizationStatusNotDetermined = 0, // å°šæœªç”³è¯·è¿‡æˆæƒ kABAuthorizationStatusRestricted, // æˆæƒè¢«é™åˆ¶ æ— æ³•ä½¿ç”¨ kABAuthorizationStatusDenied, // ç”¨æˆ·æ‹’ç»æˆæƒ kABAuthorizationStatusAuthorized // å·²ç»æˆæƒ&#125; ä¸‰ã€è·å–åŸºç¡€çš„é€šè®¯å½•ä¿¡æ¯ä¸‹é¢ä»£ç æ¼”ç¤ºäº†å¦‚ä½•è·å–åŸºç¡€çš„é€šè®¯å½•è”ç³»äººä¿¡æ¯ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041//è·å–é€šè®¯å½•ABAddressBookRef addressBook = ABAddressBookCreateWithOptions(NULL, NULL);//è·å–è”ç³»äººæ•°é‡CFIndex personCount = ABAddressBookGetPersonCount(addressBook);//æ‹¿åˆ°æ‰€æœ‰è”ç³»äººCFArrayRef peopleArray = ABAddressBookCopyArrayOfAllPeople(addressBook);for (int i = 0; i &lt; personCount; i++) &#123; //è·å–è®°å½• ABRecordRef person = CFArrayGetValueAtIndex(peopleArray, i); //æ‹¿åˆ°å§“å //å§“ éœ€è¦è½¬æ¢æˆNSStringç±»å‹ NSString *lastNameValue = (__bridge_transfer NSString *)ABRecordCopyValue(person, kABPersonLastNameProperty); //å NSString *firstNameValue = (__bridge_transfer NSString *)ABRecordCopyValue(person, kABPersonFirstNameProperty); NSLog(@\"%@:%@\",lastNameValue,firstNameValue); //æ‹¿åˆ°ç”µè¯ ç”µè¯å¯èƒ½æœ‰å¤šä¸ª ABMultiValueRef phones = ABRecordCopyValue(person, kABPersonPhoneProperty); //è§£æç”µè¯æ•°æ® CFIndex phoneCount = ABMultiValueGetCount(phones); for (int j = 0; j &lt; phoneCount ; j++) &#123; //ç”µè¯æ ‡ç­¾æœ¬åœ°åŒ–(ä¾‹å¦‚æ˜¯ä½å®…,å·¥ä½œç­‰) NSString *phoneLabel = (__bridge_transfer NSString *)ABAddressBookCopyLocalizedLabel(ABMultiValueCopyLabelAtIndex(phones, j)); //æ‹¿åˆ°æ ‡ç­¾ä¸‹å¯¹åº”çš„ç”µè¯å·ç  NSString *phoneValue = (__bridge_transfer NSString *)ABMultiValueCopyValueAtIndex(phones, j); NSLog(@\"%@:%@\",phoneLabel,phoneValue); &#125; CFRelease(phones); //é‚®ç®± å¯èƒ½å¤šä¸ª ABMultiValueRef emails = ABRecordCopyValue(person, kABPersonEmailProperty); CFIndex emailCount = ABMultiValueGetCount(emails); for (int k = 0; k &lt; emailCount; k++) &#123; NSString *emailLabel = (__bridge_transfer NSString *)ABAddressBookCopyLocalizedLabel(ABMultiValueCopyLabelAtIndex(emails, k)); NSString *emailValue = (__bridge_transfer NSString *)ABMultiValueCopyValueAtIndex(emails, k); NSLog(@\"%@:%@\",emailLabel,emailValue); &#125; NSLog(@\"==============\"); CFRelease(emails);&#125;CFRelease(addressBook);CFRelease(peopleArray); æ‰“å°ä¿¡æ¯å¦‚ä¸‹ï¼š å…³äºå¯è·å–åˆ°çš„è”ç³»äººå±æ€§ï¼Œé”®å€¼åˆ—ä¸¾å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130//åkABPersonFirstNameProperty//å§“kABPersonLastNameProperty//ä¸­é—´åkABPersonMiddleNameProperty//å‰ç¼€ ç”¨æˆ·åœ¨å­˜å‚¨è”ç³»äººæ—¶ å¯ä»¥æ·»åŠ è‡ªå®šä¹‰çš„å‰ç¼€ ä¾‹å¦‚ å¥³å£« ç”·å£«ç­‰ç­‰kABPersonPrefixProperty//åç¼€kABPersonSuffixProperty//æ˜µç§°kABPersonNicknameProperty//å§“å‘éŸ³è¯´æ˜å­—æ®µ ç”¨æˆ·è‡ªå®šä¹‰çš„kABPersonFirstNamePhoneticProperty//åå‘éŸ³è¯´æ˜å­—æ®µ ç”¨æˆ·è‡ªå®šä¹‰çš„kABPersonLastNamePhoneticProperty//ä¸­é—´åå‘éŸ³è¯´æ˜å­—æ®µ ç”¨æˆ·è‡ªå®šä¹‰çš„kABPersonMiddleNamePhoneticProperty//å…¬å¸åkABPersonOrganizationProperty//éƒ¨é—¨åkABPersonDepartmentProperty//å¤´è¡”kABPersonJobTitleProperty//ç”µå­é‚®ä»¶ä¿¡æ¯ è¿”å›ä¸€ç»„ éœ€è¦æ‰‹åŠ¨è§£ækABPersonEmailProperty//è¿”å›ç”Ÿæ—¥ä¿¡æ¯ æ—¥æœŸå¯¹è±¡kABPersonBirthdayProperty//ç¬”è®°ä¿¡æ¯kABPersonNoteProperty//è®°å½•çš„åˆ›å»ºæ—¥æœŸkABPersonCreationDateProperty//è®°å½•çš„æœ€åä¿®æ”¹æ—¥æœŸkABPersonModificationDateProperty//åœ°å€ä¿¡æ¯ è¿”å› ä¸€ç»„/*ä¾‹å¦‚ï¼šABMultiValueRef address = ABRecordCopyValue(person, kABPersonAddressProperty); for (int j=0; j&lt;ABMultiValueGetCount(address); j++) &#123; //åœ°å€ç±»å‹ NSString *type = (__bridge NSString *)(ABMultiValueCopyLabelAtIndex(address, j)); NSDictionary * temDic = (__bridge NSDictionary *)(ABMultiValueCopyValueAtIndex(address, j)); //åœ°å€å­—ç¬¦ä¸²ï¼Œå¯ä»¥æŒ‰éœ€æ±‚æ ¼å¼åŒ– NSString * adress = [NSString stringWithFormat:@\"å›½å®¶:%@\\nçœ:%@\\nå¸‚:%@\\nè¡—é“:%@\\né‚®ç¼–:%@\",[temDic valueForKey:(NSString*)kABPersonAddressCountryKey],[temDic valueForKey:(NSString*)kABPersonAddressStateKey],[temDic valueForKey:(NSString*)kABPersonAddressCityKey],[temDic valueForKey:(NSString*)kABPersonAddressStreetKey],[temDic valueForKey:(NSString*)kABPersonAddressZIPKey]]; &#125;*/kABPersonAddressProperty//åœ°å€å­—å…¸ä¸­çš„è¡—é“ä¿¡æ¯é”®kABPersonAddressStreetKey//åœ°å€å­—å…¸ä¸­çš„åŸå¸‚ä¿¡æ¯é”®kABPersonAddressCityKey//åœ°å€å­—å…¸ä¸­çš„åœ°åŒºä¿¡æ¯é”®kABPersonAddressStateKey//åœ°å€å­—å…¸ä¸­çš„å‹ç¼©ç ä¿¡æ¯é”®kABPersonAddressZIPKey//åœ°å€å­—å…¸ä¸­çš„å›½å®¶ä¿¡æ¯é”®kABPersonAddressCountryKey//åœ°å€å­—å…¸ä¸­çš„å›½å®¶ç¼–ç ä¿¡æ¯é”®kABPersonAddressCountryCodeKey//è·å– ä¸€ç»„ çºªå¿µæ—¥æ—¥æœŸ kABPersonDateProperty//ä»å…·ä½“çš„æ—¥æœŸå®ä½“ä¸­è·å–çºªå¿µæ—¥ æ ‡ç­¾kABPersonAnniversaryLabel//è·å–ä¸€ç»„ç”µè¯å·ç kABPersonPhoneProperty//ä¸‹é¢è¿™äº›å¯¹åº”ç”µè¯ç±»å‹kABPersonPhoneMobileLabelkABPersonPhoneIPhoneLabelkABPersonPhoneMainLabelkABPersonPhoneHomeFAXLabelkABPersonPhoneWorkFAXLabelkABPersonPhoneOtherFAXLabelkABPersonPhonePagerLabel//è·å–ç¤¾äº¤ç›¸å…³ä¿¡æ¯kABPersonInstantMessageProperty//ä¸‹é¢è¿™äº›å¯¹åº”ç¤¾äº¤å¹³å°kABPersonInstantMessageServiceKey kABPersonInstantMessageServiceYahookABPersonInstantMessageServiceJabberkABPersonInstantMessageServiceMSNkABPersonInstantMessageServiceICQkABPersonInstantMessageServiceAIMkABPersonInstantMessageServiceQQ kABPersonInstantMessageServiceGoogleTalkkABPersonInstantMessageServiceSkypekABPersonInstantMessageServiceFacebookkABPersonInstantMessageServiceGaduGadu//ç¤¾äº¤ç”¨æˆ·åkABPersonInstantMessageUsernameKey//è·å–ä¸€ç»„urlkABPersonURLProperty//urlç›¸å…³æ ‡ç­¾kABPersonHomePageLabel//å…³è”ä¿¡æ¯kABPersonRelatedNamesProperty//å…³è”ä¿¡æ¯ç›¸å…³çš„æ ‡ç­¾kABPersonFatherLabel kABPersonMotherLabel kABPersonParentLabelkABPersonBrotherLabel kABPersonSisterLabel kABPersonChildLabelkABPersonFriendLabelkABPersonSpouseLabel kABPersonPartnerLabel kABPersonAssistantLabelkABPersonManagerLabel//è·å–ç¤¾äº¤è´¦æˆ·ç›¸å…³kABPersonSocialProfileProperty//ç¤¾äº¤è´¦æˆ·ç›¸å…³keykABPersonSocialProfileURLKeykABPersonSocialProfileServiceKeykABPersonSocialProfileUsernameKeykABPersonSocialProfileUserIdentifierKeykABPersonSocialProfileServiceTwitterkABPersonSocialProfileServiceSinaWeibokABPersonSocialProfileServiceGameCenterkABPersonSocialProfileServiceFacebookkABPersonSocialProfileServiceMyspacekABPersonSocialProfileServiceLinkedInkABPersonSocialProfileServiceFlickr//å‘¨æœŸæ€§æ—¥æœŸä¿¡æ¯kABPersonAlternateBirthdayProperty//å‘¨æœŸæ€§æ—¥æœŸç›¸å…³é”®kABPersonAlternateBirthdayCalendarIdentifierKeykABPersonAlternateBirthdayEraKeykABPersonAlternateBirthdayYearKeykABPersonAlternateBirthdayMonthKeykABPersonAlternateBirthdayIsLeapMonthKeykABPersonAlternateBirthdayDayKey å››ã€å…³äºABMultiValueRefå¦‚ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬åœ¨è·å–è”ç³»äººç›¸å…³ä¿¡æ¯æ—¶ï¼Œå¾ˆå¤šåœºæ™¯éƒ½ä¼šè·å–ä¸€ç»„ï¼Œä¾‹å¦‚å¯¹äºç”µè¯å·ç ï¼Œåœ°å€ï¼Œé‚®ç®±è¿™ç±»çš„æ•°æ®ã€‚åœ¨AddressBookæ¡†æ¶ä¸­ï¼Œè¿™ä¸€ç»„æ•°æ®è¢«å°è£…ä¸ºABMultiValueRefå¯¹è±¡ã€‚å¯¹äºABMultiValueRefå¯¹è±¡ï¼Œæœ‰å¦‚ä¸‹æ–¹æ³•å¯ä»¥å¯¹å…¶è¿›è¡Œå¤„ç†ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344//è·å–å†…éƒ¨å°è£…å€¼çš„ç±»å‹/*enum &#123; kABInvalidPropertyType = 0x0, // æ— æ•ˆ kABStringPropertyType = 0x1, // å­—ç¬¦ä¸² kABIntegerPropertyType = 0x2, // æ•´æ•° kABRealPropertyType = 0x3, // å±æ€§ kABDateTimePropertyType = 0x4, // æ—¶é—´ kABDictionaryPropertyType = 0x5, // å­—å…¸ kABMultiStringPropertyType = kABMultiValueMask | kABStringPropertyType, // èšåˆå­—ç¬¦ä¸² kABMultiIntegerPropertyType = kABMultiValueMask | kABIntegerPropertyType, // èšåˆæ•´å‹ kABMultiRealPropertyType = kABMultiValueMask | kABRealPropertyType, // èšåˆå±æ€§ kABMultiDateTimePropertyType = kABMultiValueMask | kABDateTimePropertyType, // èšåˆæ—¶é—´ kABMultiDictionaryPropertyType = kABMultiValueMask | kABDictionaryPropertyType, // èšåˆå­—å…¸&#125;;*/ABPropertyType ABMultiValueGetPropertyType(ABMultiValueRef multiValue)//è·å–å…¶ä¸­å°è£…çš„å€¼çš„ä¸ªæ•°CFIndex ABMultiValueGetCount(ABMultiValueRef multiValue)//æ ¹æ®ç´¢å¼•è·å–å€¼ABMultiValueCopyValueAtIndex(ABMultiValueRef multiValue, CFIndex index)//è·å–æ‰€æœ‰çš„å€¼ ç»„æˆæ•°ç»„CFArrayRef ABMultiValueCopyArrayOfAllValues(ABMultiValueRef multiValue)//æ ¹æ®ç´¢å¼•è·å–æ ‡ç­¾CFStringRef ABMultiValueCopyLabelAtIndex(ABMultiValueRef multiValue, CFIndex index)//æ ¹æ®IDè·å–å€¼ABMultiValueIdentifier ABMultiValueGetIdentifierAtIndex(ABMultiValueRef multiValue, CFIndex index)//æ ¹æ®ID è·å–ç´¢å¼•CFIndex ABMultiValueGetIndexForIdentifier(ABMultiValueRef multiValue, ABMultiValueIdentifier identifier)//è·å–ç¬¬ä¸€ä¸ªå€¼CFIndex ABMultiValueGetFirstIndexOfValue(ABMultiValueRef multiValue, CFTypeRef value)//ä¸‹é¢è¿™äº›ä¸å†™è”ç³»äººä¿¡æ¯ç›¸å…³//åˆ›å»ºä¸€ä¸ªå¯å˜çš„æ•°æ®å¯¹è±¡ ABMutableMultiValueRef ABMultiValueCreateMutable(ABPropertyType type)//ä¸ºæŸä¸ªæ ‡ç­¾æ·»åŠ å€¼bool ABMultiValueAddValueAndLabel(ABMutableMultiValueRef multiValue, CFTypeRef value, CFStringRef label, ABMultiValueIdentifier *outIdentifier)//åœ¨æŸä¸ªç´¢å¼•å¤„æ’å…¥ æ ‡ç­¾å’Œå€¼bool ABMultiValueInsertValueAndLabelAtIndex(ABMutableMultiValueRef multiValue, CFTypeRef value, CFStringRef label, CFIndex index, ABMultiValueIdentifier *outIdentifier)//åˆ é™¤æŸä¸ªç´¢å¼•å¤„çš„æ ‡ç­¾å’Œå€¼bool ABMultiValueRemoveValueAndLabelAtIndex(ABMutableMultiValueRef multiValue, CFIndex index)//æ›¿æ¢æŸä¸ªç´¢å¼•å¤„çš„å€¼bool ABMultiValueReplaceValueAtIndex(ABMutableMultiValueRef multiValue, CFTypeRef value, CFIndex index)//æ›¿æ¢æŸä¸ªç´¢å¼•å¤„çš„æ ‡ç­¾bool ABMultiValueReplaceLabelAtIndex(ABMutableMultiValueRef multiValue, CFStringRef label, CFIndex index) äº”ã€ABRecordRefå¯¹è±¡ABRecordRefè™½ç„¶å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒç†è§£ä¸ºè”ç³»äººå¯¹è±¡ï¼Œä½†æ˜¯å…¶å®å¹¶ä¸æ­£ç¡®ï¼Œå®é™…ä¸Šå®ƒæ˜¯ä¸€ä¸ªæŠ½è±¡çš„è®°å½•å¯¹è±¡ï¼Œåœ¨AddressBookæ¡†æ¶ä¸­æœ‰3ç§ç±»å‹çš„ABRecordRefï¼š 12345enum &#123; kABPersonType = 0, //è”ç³»äººç±»å‹ kABGroupType = 1, //ç»„ç±»å‹ kABSourceType = 2 //èµ„æºç±»å‹&#125;; å¯ä»¥æ“ä½œABRecordRefçš„æ–¹æ³•éå¸¸ç®€å•ï¼Œæ— éè¯»ä¸å†™ï¼Œå¦‚ä¸‹ï¼š 12345678//è·å–è®°å½•ç±»å‹ABRecordType ABRecordGetRecordType(ABRecordRef record);//è·å–è®°å½•ä¸­çš„æ•°æ®CFTypeRef ABRecordCopyValue(ABRecordRef record, ABPropertyID property);//è®¾ç½®è®°å½•ä¸­çš„æ•°æ®bool ABRecordSetValue(ABRecordRef record, ABPropertyID property, CFTypeRef value, CFErrorRef* error);//åˆ é™¤è®°å½•ä¸­çš„æ•°æ®bool ABRecordRemoveValue(ABRecordRef record, ABPropertyID property, CFErrorRef* error); å…­ã€è”ç³»äººç»„åœ¨iOSç³»ç»Ÿçš„è”ç³»äººåº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹è”ç³»äººè¿›è¡Œåˆ†ç»„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š AddressBookæ¡†æ¶ä¸­çš„å¦‚ä¸‹æ–¹æ³•ä¸è”ç³»äººç»„æ“ä½œç›¸å…³ï¼š 123456789101112131415161718192021//åˆ›å»ºä¸€ä¸ªè”ç³»äººç»„è®°å½•ABRecordRef ABGroupCreate(void);//åœ¨æŒ‡å®šçš„èµ„æºä¸­åˆ›å»ºABRecordRef ABGroupCreateInSource(ABRecordRef source);//è·å–èµ„æºABRecordRef ABGroupCopySource(ABRecordRef group);//è·å–ç»„ä¸­çš„æ‰€æœ‰æˆå‘˜CFArrayRef ABGroupCopyArrayOfAllMembers(ABRecordRef group);//æ ¹æ®æŒ‡å®šçš„æ’åºæ–¹æ³•è·å–ç»„ä¸­æ‰€æœ‰æˆå‘˜CFArrayRef ABGroupCopyArrayOfAllMembersWithSortOrdering(ABRecordRef group, ABPersonSortOrdering sortOrdering);//å‘ç»„ä¸­æ·»åŠ æˆå‘˜bool ABGroupAddMember(ABRecordRef group, ABRecordRef person, CFErrorRef* error);//åˆ é™¤ç»„ä¸­çš„æˆå‘˜bool ABGroupRemoveMember(ABRecordRef group, ABRecordRef member, CFErrorRef* error);//æ ¹æ®æŸæ¡è®°å½•è·å–ç»„ABRecordRef ABAddressBookGetGroupWithRecordID(ABAddressBookRef addressBook, ABRecordID recordID);//è·å–é€šè®¯å½•ä¸­æ‰€æœ‰ç»„çš„ä¸ªæ•°CFIndex ABAddressBookGetGroupCount(ABAddressBookRef addressBook);//è·å–é€šè®¯å½•ä¸­æ‰€æœ‰ç»„CFArrayRef ABAddressBookCopyArrayOfAllGroups(ABAddressBookRef addressBook);CFArrayRef ABAddressBookCopyArrayOfAllGroupsInSource(ABAddressBookRef addressBook, ABRecordRef source); ä¸ƒã€é‡ä¸­ä¹‹é‡â€”â€”ABAddressBookRefå¯¹è±¡å‰é¢ä»‹ç»äº†è®¸å¤šæ“ä½œè”ç³»äººï¼Œæ“ä½œç»„çš„æ–¹æ³•ï¼Œæ‰€æœ‰è¿™äº›æ“ä½œçš„åŸºç¡€éƒ½æ˜¯åŸºäºä¸€ä¸ªé€šè®¯å½•å¯¹è±¡ABAddressBookRefçš„ã€‚é™¤äº†æœ€å‰é¢æ¼”ç¤ºçš„ç”³è¯·æƒé™çš„ç›¸å…³æ–¹æ³•ï¼Œå¦‚ä¸‹åˆ—ä¸¾äº†ä¸ABAddressBookRefç›¸å…³çš„å…¶ä»–å¸¸ç”¨å‡½æ•°ï¼š 12345678910111213141516//å­˜å‚¨é€šè®¯å½•bool ABAddressBookSave(ABAddressBookRef addressBook, CFErrorRef* error);//è·å–é€šè®¯å½•æ˜¯å¦æœ‰æœªä¿å­˜çš„æ›´æ”¹bool ABAddressBookHasUnsavedChanges(ABAddressBookRef addressBook);//å‘é€šè®¯å½•ä¸­æ·»åŠ ä¸€æ¡è®°å½•bool ABAddressBookAddRecord(ABAddressBookRef addressBook, ABRecordRef record, CFErrorRef* error);//ç§»é™¤é€šè®¯å½•ä¸­çš„ä¸€æ¡è®°å½•bool ABAddressBookRemoveRecord(ABAddressBookRef addressBook, ABRecordRef record, CFErrorRef* error);//æ³¨å†Œé€šè®¯å½•å‘ç”Ÿå˜åŒ–æ—¶çš„å¤–éƒ¨ç›‘å¬void ABAddressBookRegisterExternalChangeCallback(ABAddressBookRef addressBook, ABExternalChangeCallback callback, void *context);//ç§»é™¤é€šè®¯å½•å‘ç”Ÿå˜åŒ–æ—¶çš„å¤–éƒ¨ç›‘å¬void ABAddressBookUnregisterExternalChangeCallback(ABAddressBookRef addressBook, ABExternalChangeCallback callback, void *context);//å°†æœªä¿å­˜çš„æ›´æ”¹é‡ç½®void ABAddressBookRevert(ABAddressBookRef addressBook);//å·¥å…·æ–¹æ³•ï¼Œè¿›è¡Œæ ‡ç­¾çš„æœ¬åœ°åŒ–è½¬æ¢CFStringRef ABAddressBookCopyLocalizedLabel(CFStringRef label);","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSå¼€å‘ä¹‹Accountsæ¡†æ¶è¯¦è§£","slug":"377iOSå¼€å‘ä¹‹Accountsæ¡†æ¶è¯¦è§£","date":"2018-08-05T16:00:00.000Z","updated":"2021-07-15T08:47:05.676Z","comments":true,"path":"2018/08/06/377iOSå¼€å‘ä¹‹Accountsæ¡†æ¶è¯¦è§£/","link":"","permalink":"http://huishao.cc/2018/08/06/377iOSå¼€å‘ä¹‹Accountsæ¡†æ¶è¯¦è§£/","excerpt":"","text":"iOSå¼€å‘ä¹‹Accountsæ¡†æ¶è¯¦è§£Accountsæ¡†æ¶æ˜¯iOSåŸç”Ÿæä¾›çš„ä¸€å¥—è´¦æˆ·ç®¡ç†æ¡†æ¶ï¼Œå…¶æ”¯æŒFacebookï¼Œæ–°æµªå¾®åšï¼Œè…¾è®¯å¾®åšï¼ŒTwitterå’Œé¢†è‹±è´¦æˆ·ç®¡ç†çš„åŠŸèƒ½ã€‚éœ€è¦æ³¨æ„ï¼Œåœ¨iOS 11åŠä»¥ä¸Šç³»ç»Ÿä¸­ï¼Œå°†æ­¤åŠŸèƒ½å·²ç»åˆ é™¤ï¼Œå› æ­¤Accounts.frameworkå®é™…ä¸Šå·²ç»æ²¡æœ‰å¤ªå¤§çš„æ„ä¹‰ï¼Œå…¶åªåœ¨iOS 11ä¹‹å‰çš„ç³»ç»Ÿä¸Šå¯ç”¨ã€‚ ä¸€ã€Accountsæ¡†æ¶æ¦‚è§ˆ ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼ŒAccountsæ¡†æ¶ä¸­æœ€é‡è¦çš„3ä¸ªç±»æ˜¯ACAccountCredentialç±»ã€ACAccountç±»å’ŒACAccountStoreç±»ã€‚åé¢æˆ‘ä»¬ç€é‡ä»‹ç»è¿™3ä¸ªç±»ã€‚ é¦–å…ˆå…ˆæ¥çœ‹ACAccountTypeç±»ï¼Œè¿™ä¸ªç±»ç”¨æ¥å®šä¹‰è´¦æˆ·ç±»å‹ï¼Œå¦‚ä¸‹ï¼š 12345678@interface ACAccountType : NSObject//ç±»å‹æè¿°@property (readonly, nonatomic) NSString *accountTypeDescription;//æ ‡è¯†ç¬¦@property (readonly, nonatomic) NSString *identifier;//æ­¤ç±»è´¦æˆ·æ˜¯å¦å·²ç»æˆæƒ@property (readonly, nonatomic) BOOL accessGranted;@end éœ€è¦æ³¨æ„ï¼Œè¿™ä¸ªç±»ä¸­çš„å±æ€§éƒ½æ˜¯åªè¯»çš„ï¼Œè¿™ä¹Ÿå°±æ˜¯è¯´ï¼Œå¼€å‘è€…ä¸èƒ½å¤Ÿç›´æ¥ä½¿ç”¨è¿™ä¸ªç±»è¿›è¡Œå¯¹è±¡çš„æ„å»ºï¼Œéœ€è¦å€ŸåŠ©ACAccountStoreç±»æ¥åˆ›å»ºACAccountTypeå®ä¾‹ï¼Œåé¢ä¼šä»‹ç»ã€‚ ACErrorCodeå®šä¹‰äº†é”™è¯¯ç çš„æ„ä¹‰ï¼Œå¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425typedef enum ACErrorCode &#123; ACErrorUnknown = 1,//æœªçŸ¥é”™è¯¯ ACErrorAccountMissingRequiredProperty, // ç¼ºå°‘å¿…é€‰å±æ€§é”™è¯¯ ACErrorAccountAuthenticationFailed, // æˆæƒå¤±è´¥ ACErrorAccountTypeInvalid, // æˆæƒæ— æ•ˆ ACErrorAccountAlreadyExists, // è´¦æˆ·å·²ç»å­˜åœ¨ ACErrorAccountNotFound, // è´¦æˆ·æœªæ‰¾åˆ° ACErrorPermissionDenied, // æ²¡æœ‰æƒé™ ACErrorAccessInfoInvalid, // ä¿¡æ¯å¤±æ•ˆ ACErrorClientPermissionDenied, // å®¢æˆ·ç«¯æ²¡æœ‰æƒé™ ACErrorAccessDeniedByProtectionPolicy, // æ— æ³•å–å¾—è¯ä¹¦ ACErrorCredentialNotFound, // è¯ä¹¦æœªæ‰¾åˆ° ACErrorFetchCredentialFailed, // è¯·æ±‚è¯ä¹¦å¤±è´¥ ACErrorStoreCredentialFailed, // å­˜å‚¨è¯ä¹¦å¤±è´¥ ACErrorRemoveCredentialFailed, // åˆ é™¤è¯ä¹¦å¤±è´¥ ACErrorUpdatingNonexistentAccount, // æ›´æ–°å¤±è´¥ ACErrorInvalidClientBundleID, // æ— æ•ˆçš„BundleID ACErrorDeniedByPlugin, // æƒé™è¢«é˜»æ­¢ ACErrorCoreDataSaveFailed, // æ•°æ®åº“å­˜å‚¨å¤±è´¥ ACErrorFailedSerializingAccountInfo, //åºåˆ—åŒ–æ•°æ®å¤±è´¥ ACErrorInvalidCommand, //æ— æ•ˆçš„å‘½ä»¤ ACErrorMissingTransportMessageID, //ç¼ºå°‘å®‰å…¨ä¿¡æ¯ ACErrorCredentialItemNotFound, // è¯ä¹¦ç¼ºå°‘å­—æ®µ ACErrorCredentialItemNotExpired, // è¯ä¹¦å­—æ®µå¤±æ•ˆ&#125; ACErrorCode; äºŒã€è¿›è¡Œè´¦æˆ·æ“ä½œåœ¨iOS 11ä»¥ä¸‹çš„ç³»ç»Ÿä¸­ï¼Œåœ¨è®¾ç½®ä¸­å¯ä»¥æ‰¾åˆ°è´¦æˆ·ç®¡ç†é€‰é¡¹ï¼Œå¦‚ä¸‹å›¾ï¼š ç‚¹å‡»ç›¸åº”çš„ç¤¾äº¤å¹³å°ï¼Œé€šè¿‡è´¦å·å¯†ç å¯ä»¥è¿›è¡Œç™»å½•ã€‚è¿™é‡Œä¸€æ—¦è®¾ç½®ç™»å½•ï¼Œé‚£ä¹ˆåœ¨ç¬¬ä¸‰æ–¹åº”ç”¨ç¨‹åºä¸­ä¾¿å¯ä»¥é€šè¿‡Accountsæ¡†æ¶æ¥è·å–æˆæƒä¿¡æ¯ã€‚ é¦–å…ˆï¼Œè¦ä½¿ç”¨Accountsæ¡†æ¶ï¼Œéœ€è¦å¯¼å…¥ç›¸åº”å¤´æ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š 1#import &lt;Accounts/Accounts.h&gt; ä½†åº”ç”¨ç¨‹åºé¦–æ¬¡ä½¿ç”¨ç”¨æˆ·ç¤¾äº¤å¹³å°çš„è´¦æˆ·æ—¶ï¼Œéœ€è¦è·å–ç”¨æˆ·çš„æˆæƒï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314//åˆ›å»ºæ“ä½œå¯¹è±¡ACAccountStore *accountStore = [[ACAccountStore alloc] init];//é€šè¿‡æ“ä½œå¯¹è±¡ æ„å»ºç¤¾äº¤å¹³å°ç±»å‹ç¤ºä¾‹ è¿™é‡Œé‡‡ç”¨çš„æ–°æµªå¾®åšACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierSinaWeibo];//è¿›è¡Œç”¨æˆ·æˆæƒè¯·æ±‚[accountStore requestAccessToAccountsWithType: accountType options:nil completion:^(BOOL granted, NSError *error) &#123; if (error) &#123; NSLog(@\"error = %@\", [error localizedDescription]); &#125; dispatch_async(dispatch_get_main_queue(), ^&#123; if(granted)&#123; NSLog(@\"æˆæƒé€šè¿‡äº†\"); &#125;);&#125;]; è·å–ç”¨æˆ·æˆæƒç•Œé¢å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¸€æ—¦ç”¨æˆ·æˆæƒé€šè¿‡ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•è·å–åˆ°ç”¨æˆ·çš„ç¤¾äº¤å¹³å°è´¦æˆ·ä¿¡æ¯ï¼š 123ACAccountStore *accountStore = [[ACAccountStore alloc] init];ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierSinaWeibo];NSArray *twitterAccounts = [accountStore accountsWithAccountType:accountType]; Accountsæ¡†æ¶æ”¯æŒçš„ç¤¾äº¤å¹³å°ç±»å‹IDå¦‚ä¸‹ï¼š 12345NSString * const ACAccountTypeIdentifierTwitter;//TwitterNSString * const ACAccountTypeIdentifierFacebook;//FacebookNSString * const ACAccountTypeIdentifierSinaWeibo;//æ–°æµªå¾®åšNSString * const ACAccountTypeIdentifierTencentWeibo;//è…¾è®¯å¾®åšNSString * const ACAccountTypeIdentifierLinkedIn;//é¢†è‹± åœ¨è°ƒç”¨requestAccessToAccountsWithTypeæ–¹æ³•æ—¶ï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ªå­—å…¸å‚æ•°ï¼ŒæŸäº›ç¤¾äº¤å¹³å°çš„æˆæƒéœ€è¦é…ç½®ä¸€äº›é¢å¤–å‚æ•°ï¼Œä¾‹å¦‚ï¼š 123456789101112//facebookç›¸å…³NSString * const ACFacebookAppIdKey;//è®¾ç½®appidNSString * const ACFacebookPermissionsKey;//è®¾ç½®æƒé™keyNSString * const ACFacebookAudienceKey; //æƒé™keyNSString * const ACFacebookAudienceEveryone;//å…¬å¼€æƒé™NSString * const ACFacebookAudienceFriends;//å¥½å‹æƒé™NSString * const ACFacebookAudienceOnlyMe;//ç§äººæƒé™//é¢†è‹±ç›¸å…³NSString * const ACLinkedInAppIdKey;//é¢†è‹±appidNSString * const ACLinkedInPermissionsKey; //è®¾ç½®æƒé™key//è…¾è®¯å¾®åšNSString *const ACTencentWeiboAppIdKey; //è®¾ç½®appid ä¸‰ã€ç”¨æˆ·ä¿¡æ¯ç›¸å…³ç±»è§£æACAccountç±»è§£æå¦‚ä¸‹ï¼š 123456789@interface ACAccount : NSObject- (instancetype)initWithAccountType:(ACAccountType *)type;//æ„é€ æ–¹æ³•@property (readonly, weak, NS_NONATOMIC_IOSONLY) NSString *identifier;//æ ‡è¯†ç¬¦@property (strong, NS_NONATOMIC_IOSONLY) ACAccountType *accountType;//è´¦æˆ·ç±»å‹@property (copy, NS_NONATOMIC_IOSONLY) NSString *accountDescription;//è´¦æˆ·æè¿°@property (copy, NS_NONATOMIC_IOSONLY) NSString *username;//ç”¨æˆ·å@property (readonly, NS_NONATOMIC_IOSONLY) NSString *userFullName;//å®Œæ•´åç§°@property (strong, NS_NONATOMIC_IOSONLY) ACAccountCredential *credential;//æˆæƒå‡­è¯@end ACAccountCredentialç±»è§£æå¦‚ä¸‹ï¼š 123456789@interface ACAccountCredential : NSObject//æ„é€ æ–¹æ³•- (instancetype)initWithOAuthToken:(NSString *)token tokenSecret:(NSString *)secret;- (instancetype)initWithOAuth2Token:(NSString *)token refreshToken:(NSString *)refreshToken expiryDate:(NSDate *)expiryDate;//token@property (copy, nonatomic) NSString *oauthToken;@end å››ã€ACAccountStoreç±»è§£æ12345678910111213141516171819202122@interface ACAccountStore : NSObject//æ‰€æœ‰è´¦æˆ·åˆ—è¡¨@property (readonly, weak, NS_NONATOMIC_IOSONLY) NSArray *accounts;//æ ¹æ®idè·å–è´¦æˆ·- (ACAccount *)accountWithIdentifier:(NSString *)identifier;//æ ¹æ®idè·å–è´¦æˆ·ç±»å‹å¯¹è±¡- (ACAccountType *)accountTypeWithAccountTypeIdentifier:(NSString *)typeIdentifier;//è·å–æŒ‡å®šç±»å‹çš„æ‰€æœ‰è´¦æˆ·- (NSArray *)accountsWithAccountType:(ACAccountType *)accountType;//è¿›è¡Œè´¦æˆ·å­˜å‚¨- (void)saveAccount:(ACAccount *)account withCompletionHandler:(ACAccountStoreSaveCompletionHandler)completionHandler;//è¿›è¡Œè´¦æˆ·ä½¿ç”¨æƒé™ç”³è¯·- (void)requestAccessToAccountsWithType:(ACAccountType *)accountType withCompletionHandler:(ACAccountStoreRequestAccessCompletionHandler)handler NS_DEPRECATED(NA, NA, 5_0, 6_0);- (void)requestAccessToAccountsWithType:(ACAccountType *)accountType options:(NSDictionary *)options completion:(ACAccountStoreRequestAccessCompletionHandler)completion;//å¦‚æœè´¦æˆ·æƒé™å·²ç»è¿‡æœŸ è°ƒç”¨æ­¤æ–¹æ³•è¿›è¡Œåˆ·æ–°- (void)renewCredentialsForAccount:(ACAccount *)account completion:(ACAccountStoreCredentialRenewalHandler)completionHandler;//åˆ é™¤è´¦æˆ·- (void)removeAccount:(ACAccount *)account withCompletionHandler:(ACAccountStoreRemoveCompletionHandler)completionHandler;@end åƒé‡Œä¹‹é¥å§‹äºè¶³ä¸‹ï¼Œå†°å†»ä¸‰å°ºéä¸€æ—¥ä¹‹å¯’ â€”â€”å…±å‹‰","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSä¸­çš„CADisplayLinkå®šæ—¶å™¨","slug":"376iOSä¸­çš„CADisplayLinkå®šæ—¶å™¨","date":"2018-07-04T16:00:00.000Z","updated":"2021-07-15T08:46:08.710Z","comments":true,"path":"2018/07/05/376iOSä¸­çš„CADisplayLinkå®šæ—¶å™¨/","link":"","permalink":"http://huishao.cc/2018/07/05/376iOSä¸­çš„CADisplayLinkå®šæ—¶å™¨/","excerpt":"","text":"iOSä¸­çš„CADisplayLinkå®šæ—¶å™¨è¯´åˆ°å®šæ—¶å™¨ï¼Œåœ¨iOSä¸­æœ€å¸¸ç”¨çš„ä¸ºNSTimerç±»ï¼Œå…¶å®CADisplayLinkç±»åœ¨æŸäº›åœºæ™¯ä¸‹ä½¿ç”¨ï¼Œè¦æ¯”NSTimerç±»æ›´åŠ é€‚åˆã€‚é¦–å…ˆCADisplayLinkä¹Ÿæ˜¯ä¸€ç§å®šæ—¶å™¨ï¼Œå¹¶ä¸”å…¶å’Œå±å¹•çš„åˆ·æ–°ç‡å§‹ç»ˆä¿æŒä¸€è‡´(å¾ˆå¤šæ—¶å€™ä¼šä½¿ç”¨CADisplayLinkæ¥æ£€æµ‹å±å¹•çš„å¸§ç‡)ã€‚ç”±äºCADisplayLinkçš„è¿™ç§ç‰¹æ€§ï¼Œä½¿ç”¨å®ƒæ¥å®ç°æµç•…çš„åŠ¨ç”»æ•ˆæœéå¸¸åˆé€‚ã€‚ CADisplayLinkç±»éå¸¸ç®€å•ï¼Œè§£æå¦‚ä¸‹ï¼š 123456789101112131415161718192021222324//åˆ›å»ºCADisplayLinkå¯¹è±¡ /*éœ€è¦æ³¨æ„ å®šæ—¶å™¨å¯¹è±¡åˆ›å»ºå å¹¶ä¸ä¼šé©¬ä¸Šæ‰§è¡Œ éœ€è¦æ·»åŠ åˆ°runloopä¸­*/+ (CADisplayLink *)displayLinkWithTarget:(id)target selector:(SEL)sel;//å°†å½“å‰å®šæ—¶å™¨å¯¹è±¡åŠ å…¥ä¸€ä¸ªRunLoopä¸­- (void)addToRunLoop:(NSRunLoop *)runloop forMode:(NSRunLoopMode)mode;//å°†å½“å‰å®šæ—¶å™¨å¯¹è±¡ä»ä¸€ä¸ªRunLoopä¸­ç§»é™¤ å¦‚æœè¿™ä¸ªRunloopæ˜¯å®šæ—¶å™¨æ‰€æ³¨å†Œçš„æœ€åä¸€ä¸ª ç§»é™¤åå®šæ—¶å™¨å°†è¢«é‡Šæ”¾- (void)removeFromRunLoop:(NSRunLoop *)runloop forMode:(NSRunLoopMode)mode;//å°†å®šæ—¶å™¨å¤±æ•ˆæ‰ è°ƒç”¨è¿™ä¸ªå‡½æ•°å ä¼šå°†å®šæ—¶å™¨ä»æ‰€æœ‰æ³¨å†Œçš„Runloopä¸­ç§»é™¤- (void)invalidate;//å½“å‰æ—¶é—´æˆ³@property(readonly, nonatomic) CFTimeInterval timestamp;//è·ç¦»ä¸Šæ¬¡æ‰§è¡Œæ‰€é—´éš”çš„æ—¶é—´@property(readonly, nonatomic) CFTimeInterval duration;//é¢„è®¡ä¸‹æ¬¡æ‰§è¡Œçš„æ—¶é—´æˆ³@property(readonly, nonatomic) CFTimeInterval targetTimestamp;//è®¾ç½®æ˜¯å¦æš‚åœ@property(getter=isPaused, nonatomic) BOOL paused;//è®¾ç½®é¢„æœŸçš„æ¯ç§’æ‰§è¡Œå¸§æ•° ä¾‹å¦‚è®¾ç½®ä¸º1 åˆ™ä»¥æ¯ç§’ä¸€æ¬¡çš„é€Ÿç‡æ‰§è¡Œ@property(nonatomic) NSInteger preferredFramesPerSecond CA_AVAILABLE_IOS_STARTING(10.0, 10.0, 3.0);//åŒä¸Š @property(nonatomic) NSInteger frameInterval CA_AVAILABLE_BUT_DEPRECATED_IOS (3.1, 10.0, 9.0, 10.0, 2.0, 3.0, \"use preferredFramesPerSecond\"); æˆ‘çš„åšå®¢å³å°†æ¬è¿åŒæ­¥è‡³è…¾è®¯äº‘+ç¤¾åŒºï¼Œé‚€è¯·å¤§å®¶ä¸€åŒå…¥é©»ï¼šhttps://cloud.tencent.com/developer/support-plan?invite_code=29qwh7m53g4kc","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"ç©è½¬iOSè½¬åœºåŠ¨ç”»","slug":"375ç©è½¬iOSè½¬åœºåŠ¨ç”»","date":"2018-07-03T16:00:00.000Z","updated":"2021-07-15T08:45:22.023Z","comments":true,"path":"2018/07/04/375ç©è½¬iOSè½¬åœºåŠ¨ç”»/","link":"","permalink":"http://huishao.cc/2018/07/04/375ç©è½¬iOSè½¬åœºåŠ¨ç”»/","excerpt":"","text":"ç©è½¬iOSè½¬åœºåŠ¨ç”»ä¸€ã€å¼•è¨€å…³äºåŠ¨ç”»åœ¨iOSå¼€å‘ä¸­çš„åº”ç”¨ï¼Œæ›¾ç»æ•´ç†è¿‡ä¸€ç³»åˆ—çš„åšå®¢è¿›è¡Œæ€»ç»“ã€‚åŒ…æ‹¬ç®€å•çš„UIViewå±‚çš„åŠ¨ç”»ï¼ŒCALayerå±‚çš„åŠ¨ç”»ï¼ŒAutolayoutè‡ªåŠ¨å¸ƒå±€åŠ¨ç”»ä»¥åŠCoreAnimationæ ¸å¿ƒåŠ¨ç”»æ¡†æ¶ç­‰ã€‚æœ¬ç¯‡åšå®¢ä¸»è¦æ·±å…¥è®¨è®ºè§†å›¾æ§åˆ¶å™¨ã€å¯¼èˆªæ§åˆ¶å™¨æ¥è¿›è¡Œç•Œé¢è·³è½¬æ—¶çš„ä¸“åœºåŠ¨ç”»ç›¸å…³å†…å®¹ã€‚ä¹‹å‰çš„åŠ¨ç”»ç›¸å…³åšå®¢åˆ—ä¸¾å¦‚ä¸‹ï¼š iOSåŠ¨ç”»å¼€å‘ä¹‹ä¸€â€”â€”UIViewAnimationåŠ¨ç”»çš„ä½¿ç”¨ï¼šhttps://my.oschina.net/u/2340880/blog/484457 iOSåŠ¨ç”»å¼€å‘ä¹‹äºŒâ€”â€”UIViewåŠ¨ç”»æ‰§è¡Œçš„å¦ä¸€ç§æ–¹å¼ï¼šhttps://my.oschina.net/u/2340880/blog/484538 iOSåŠ¨ç”»å¼€å‘ä¹‹ä¸‰â€”â€”UIViewçš„è½¬åœºåˆ‡æ¢ï¼šhttps://my.oschina.net/u/2340880/blog/484669 iOSåŠ¨ç”»å¼€å‘ä¹‹å››â€”â€”æ ¸å¿ƒåŠ¨ç”»ç¼–ç¨‹(CoreAnimation)ï¼šhttps://my.oschina.net/u/2340880/blog/484793 iOSåŠ¨ç”»å¼€å‘ä¹‹äº”â€”â€”ç‚«é…·çš„ç²’å­æ•ˆæœï¼šhttps://my.oschina.net/u/2340880/blog/485095 iOSå¼€å‘CoreAnimationè§£è¯»ä¹‹ä¸€â€”â€”åˆè¯†CoreAnimationæ ¸å¿ƒåŠ¨ç”»ç¼–ç¨‹ï¼šhttps://my.oschina.net/u/2340880/blog/535235 iOSå¼€å‘CoreAnimationè§£è¯»ä¹‹äºŒâ€”â€”å¯¹CALayerçš„åˆ†æï¼šhttps://my.oschina.net/u/2340880/blog/536048 iOSå¼€å‘CoreAnimationè§£è¯»ä¹‹ä¸‰â€”â€”å‡ ç§å¸¸ç”¨Layerçš„ä½¿ç”¨è§£æï¼šhttps://my.oschina.net/u/2340880/blog/538024 iOSå¼€å‘CoreAnimationè§£è¯»ä¹‹å››â€”â€”Layerå±‚åŠ¨ç”»å†…å®¹ï¼šhttps://my.oschina.net/u/2340880/blog/539599 iOSå¼€å‘CoreAnimationè§£è¯»ä¹‹äº”â€”â€”é«˜çº§åŠ¨ç”»æŠ€å·§ï¼šhttps://my.oschina.net/u/2340880/blog/539827 iOSå¼€å‘CoreAnimationè§£è¯»ä¹‹äº”â€”â€”CATransform3Då˜æ¢çš„åº”ç”¨ï¼šhttps://my.oschina.net/u/2340880/blog/539878 iOSä¸­æ’­æ”¾gifåŠ¨æ€å›¾çš„æ–¹å¼æ¢è®¨ï¼šhttps://my.oschina.net/u/2340880/blog/608560 iOSç•Œé¢å¸ƒå±€ä¹‹ä¸‰â€”â€”çº¯ä»£ç çš„autoLayoutåŠå¸ƒå±€åŠ¨ç”»ï¼šhttps://my.oschina.net/u/2340880/blog/524089 å¼€å§‹æœ¬ç¯‡åšå®¢å‰ï¼Œå…ˆä¸Šä¸€å¼ å›¾ï¼Œå¦‚æœä½ è§‰å¾—ä¸å¥½ç†è§£ï¼Œæ²¡å…³ç³»ï¼Œçœ‹å®Œåé¢çš„å†…å®¹å†å›æ¥çœ‹è¿™å¼ å›¾ï¼Œå°±ä¸€ç›®äº†ç„¶äº†ã€‚ äºŒã€UIViewControllerè¿›è¡Œæ¨¡æ€è·³è½¬çš„è½¬åœºé¦–å…ˆï¼Œä½¿ç”¨CoreAnimationæ¡†æ¶ä¸­çš„CATransitionç±»ä¹Ÿå¯ä»¥å®ç°è§†å›¾æ§åˆ¶å™¨çš„è½¬åœºåŠ¨ç”»ï¼Œå‰é¢çš„åšå®¢æœ‰è¿‡è®¨è®ºï¼Œè¿™é‡Œä¸å†é‡å¤ã€‚presentViewControllerè¿™ä¸ªå‡½æ•°ä½¿ç”¨ç‡å¯è°“æ˜¯éå¸¸é«˜çš„ï¼Œé»˜è®¤çš„è½¬åœºåŠ¨ç”»ä¸ºæ–°çš„è§†å›¾æ§åˆ¶å™¨ä»ä¸‹å‘ä¸Šå¼¹å‡ºï¼ŒdismissViewControllerAnimatedå‡½æ•°çš„è¿”å›åŠ¨ç”»åˆ™æ˜¯å¼¹å‡ºåŠ¨ç”»çš„é€†åºæ’­æ”¾ã€‚å…¶å®ï¼Œç³»ç»Ÿæä¾›äº†4ç§è½¬åœºåŠ¨ç”»ä¾›å¼€å‘è€…é€‰æ‹©ï¼Œé€šè¿‡è®¾ç½®å°†è¦å¼¹å‡ºçš„UIViewControllerå®ä¾‹çš„å¦‚ä¸‹å±æ€§ï¼š 1@property(nonatomic,assign) UIModalTransitionStyle modalTransitionStyle; UIModalTransitionStyleæ˜¯ä¸€ä¸ªæšä¸¾ï¼Œå¦‚ä¸‹ï¼š 123456typedef NS_ENUM(NSInteger, UIModalTransitionStyle) &#123; UIModalTransitionStyleCoverVertical = 0, //ä»ä¸‹å‘ä¸Šå¼¹èµ· é»˜è®¤é¡¹ UIModalTransitionStyleFlipHorizontal __TVOS_PROHIBITED, //æ°´å¹³ç¿»è½¬ UIModalTransitionStyleCrossDissolve, //æ¸éšæ¸ç° UIModalTransitionStylePartialCurl NS_ENUM_AVAILABLE_IOS(3_2) __TVOS_PROHIBITED, //ç¿»é¡µ&#125;; å¾ˆå¤šæ—¶å€™ï¼Œä¸Šé¢4ç§æšä¸¾çš„è½¬åœºåŠ¨ç”»æ ·å¼å¹¶ä¸èƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨UIViewControllerTransitioningDelegateåè®®æ¥å®Œå…¨è‡ªå®šä¹‰æƒ³è¦çš„è½¬åœºåŠ¨ç”»æ•ˆæœã€‚ é¦–å…ˆåˆ›å»ºä¸€ä¸ªç±»ï¼Œä½¿å…¶éµå®ˆUIViewControllerTransitioningDelegateåè®®ï¼Œæ¯”å¦‚æˆ‘è¿™é‡Œå°†ç±»åå»åšTransDelegateï¼Œç»§æ‰¿è‡ªNSObjectã€‚åœ¨ç•Œé¢è·³è½¬æ—¶ï¼Œå°†è¦å¼¹å‡ºçš„è§†å›¾æ§åˆ¶å™¨è®¾ç½®å¦‚ä¸‹ï¼š 1234ViewController2 * v2 = [ViewController2 new];self.transDelegate = [[TransDelegate alloc]init];v2.transitioningDelegate = self.transDelegate;[self presentViewController:v2 animated:YES completion:nil]; æˆ‘ä»¬å…ˆæ¥çœ‹UIViewControllerTransitioningDelegateåè®®ä¸­çš„å¦‚ä¸‹å‡ ä¸ªå‡½æ•°ï¼š 12345678910111213141516//è¿™ä¸ªå‡½æ•°ç”¨æ¥è®¾ç½®å½“æ‰§è¡Œpresentæ–¹æ³•æ—¶ è¿›è¡Œçš„è½¬åœºåŠ¨ç”»/*presentedä¸ºè¦å¼¹å‡ºçš„Controllerpresentingä¸ºå½“å‰çš„Controllersourceä¸ºæºContrller å¯¹äºpresentåŠ¨ä½œ presentingä¸sourceæ˜¯ä¸€æ ·çš„*/- (nullable id &lt;UIViewControllerAnimatedTransitioning&gt;)animationControllerForPresentedController:(UIViewController *)presented presentingController:(UIViewController *)presenting sourceController:(UIViewController *)source;//è¿™ä¸ªå‡½æ•°ç”¨æ¥è®¾ç½®å½“æ‰§è¡Œdismissæ–¹æ³•æ—¶ è¿›è¡Œçš„è½¬åœºåŠ¨ç”»- (nullable id &lt;UIViewControllerAnimatedTransitioning&gt;)animationControllerForDismissedController:(UIViewController *)dismissed;//è¿™ä¸ªå‡½æ•°ç”¨æ¥è®¾ç½®å½“æ‰§è¡Œpresentæ–¹æ³•æ—¶ è¿›è¡Œå¯äº¤äº’çš„è½¬åœºåŠ¨ç”»- (nullable id &lt;UIViewControllerInteractiveTransitioning&gt;)interactionControllerForPresentation:(id &lt;UIViewControllerAnimatedTransitioning&gt;)animator;//è¿™ä¸ªå‡½æ•°ç”¨æ¥è®¾ç½®å½“æ‰§è¡Œdismissæ–¹æ³•æ—¶ è¿›è¡Œå¯äº¤äº’çš„è½¬åœºåŠ¨ç”»- (nullable id &lt;UIViewControllerInteractiveTransitioning&gt;)interactionControllerForDismissal:(id &lt;UIViewControllerAnimatedTransitioning&gt;)animator;//iOS8åæä¾›çš„æ–°æ¥å£ è¿”å›UIPresentationControllerå¤„ç†è½¬åœº- (nullable UIPresentationController *)presentationControllerForPresentedViewController:(UIViewController *)presented presentingViewController:(nullable UIViewController *)presenting sourceViewController:(UIViewController *)source NS_AVAILABLE_IOS(8_0); æˆ‘ä»¬å…ˆæ¥çœ‹ä¸Šé¢çš„å‰ä¸¤ä¸ªå‡½æ•°ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°éƒ½è¦è¿”å›ä¸€ä¸ªå®ç°äº†UIViewControllerAnimatedTransitioningåè®®çš„å¯¹è±¡ï¼ŒUIViewControllerAnimatedTransitioningåˆ™ç”¨æ¥è´Ÿè´£å…·ä½“çš„åŠ¨ç”»å±•ç¤ºï¼Œä¾‹å¦‚æˆ‘ä»¬åœ¨åˆ›å»ºä¸€ä¸ªå‘½åä¸ºAniObjectçš„ç±»ï¼Œç»§æ‰¿è‡ªNSObjectï¼Œä½¿å…¶å®ç°UIViewControllerAnimatedTransitioningåè®®ï¼Œåœ¨TransDelegateç±»ä¸­å®ç°å¦‚ä¸‹ï¼š 123- (nullable id &lt;UIViewControllerAnimatedTransitioning&gt;)animationControllerForPresentedController:(UIViewController *)presented presentingController:(UIViewController *)presenting sourceController:(UIViewController *)source&#123; return [AniObject new];&#125; ä¸‹é¢æˆ‘ä»¬æ¥å®ç°AniObjectç±»æ¥å…·ä½“çš„å¤„ç†åŠ¨ç”»æ•ˆæœï¼š UIViewControllerAnimatedTransitioningåè®®ä¸­æœ‰ä¸¤ä¸ªå‡½æ•°æ˜¯å¿…é¡»å®ç°çš„ï¼Œå¦‚ä¸‹ï¼š 12345678910111213141516171819202122//è¿™ä¸ªå‡½æ•°ç”¨æ¥è®¾ç½®åŠ¨ç”»æ‰§è¡Œçš„æ—¶é•¿- (NSTimeInterval)transitionDuration:(nullable id &lt;UIViewControllerContextTransitioning&gt;)transitionContext&#123; return 2;&#125;//è¿™ä¸ªå‡½æ•°ç”¨æ¥å¤„ç†å…·ä½“çš„åŠ¨ç”»- (void)animateTransition:(id &lt;UIViewControllerContextTransitioning&gt;)transitionContext&#123; //è·³è½¬çš„ç•Œé¢ UIViewController *toVC = [transitionContext viewControllerForKey:UITransitionContextToViewControllerKey]; //æœ€ç»ˆçš„ä½ç½® CGRect finalRect = [transitionContext finalFrameForViewController:toVC]; //èµ·å§‹ä½ç½® toVC.view.frame = CGRectOffset(finalRect, [[UIScreen mainScreen]bounds].size.width, 0); //æ·»åŠ åˆ°å†…å®¹è§†å›¾ [[transitionContext containerView]addSubview:toVC.view]; //æ‰§è¡ŒåŠ¨ç”» [UIView animateWithDuration:[self transitionDuration:transitionContext] animations:^&#123; toVC.view.frame = finalRect; &#125; completion:^(BOOL finished) &#123; //å®ŒæˆåŠ¨ç”» [transitionContext completeTransition:YES]; &#125;];&#125; ä¸Šé¢æˆ‘ä»¬å®ç°äº†ä¸€ä¸ªç®€å•çš„è‡ªå®šä¹‰è½¬åœºåŠ¨ç”»ï¼Œå°†presentåŠ¨ç”»ä¿®æ”¹æˆäº†ä»å³ä¾§æ»‘å…¥ï¼Œä½†æ˜¯dismissåŠ¨ç”»ä¾ç„¶æ˜¯é»˜è®¤çš„ä»ä¸‹æ–¹åˆ’å‡ºã€‚æ•ˆæœå¦‚ä¸‹ï¼š ä¸‹é¢æˆ‘ä»¬æ¥åˆ†æä¸‹transitionContextè¿™ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å®é™…ä¸Šæ˜¯ä¸€ä¸ªè½¬åœºä¸Šä¸‹æ–‡ï¼Œä½¿ç”¨å®ƒæ¥è¿›è¡ŒåŠ¨ç”»çš„å®šä¹‰å’Œæ‰§è¡Œï¼š 1234567891011121314151617181920212223242526272829303132333435363738//å®¹å™¨è§†å›¾ ç”¨æ¥è¡¨ç°åŠ¨ç”»@property(nonatomic, readonly) UIView *containerView;//ä¸‹é¢æ˜¯å‡ ä¸ªåªè¯»å±æ€§//æ˜¯å¦åº”è¯¥æ‰§è¡ŒåŠ¨ç”»@property(nonatomic, readonly, getter=isAnimated) BOOL animated;//æ˜¯å¦æ˜¯å¯äº¤äº’çš„@property(nonatomic, readonly, getter=isInteractive) BOOL interactive; // This indicates whether the transition is currently interactive.//æ˜¯å¦è¢«å–æ¶ˆäº†@property(nonatomic, readonly) BOOL transitionWasCancelled;//è½¬åœºé£æ ¼@property(nonatomic, readonly) UIModalPresentationStyle presentationStyle;//è°ƒç”¨è¿™ä¸ªå‡½æ•°æ¥æ›´æ–°è½¬åœºè¿‡ç¨‹çš„ç™¾åˆ†æ¯” ç”¨äºå¯äº¤äº’åŠ¨ç”»çš„é˜ˆå€¼- (void)updateInteractiveTransition:(CGFloat)percentComplete;//å®Œæˆå¯äº¤äº’çš„è½¬åœºäº¤äº’åŠ¨ä½œæ—¶è°ƒç”¨- (void)finishInteractiveTransition;//å–æ¶ˆå¯äº¤äº’çš„è½¬åœºäº¤äº’åŠ¨ä½œæ—¶è°ƒç”¨- (void)cancelInteractiveTransition;//è½¬åœºåŠ¨ç”»è¢«ä¸­æ–­ æš‚åœæ—¶è°ƒç”¨- (void)pauseInteractiveTransition;//è½¬åœºåŠ¨ç”»å®Œæˆæ—¶è°ƒç”¨- (void)completeTransition:(BOOL)didComplete;//è·å–è½¬åœºä¸­çš„ä¸¤ä¸ªè§†å›¾æ§åˆ¶å™¨/*UITransitionContextViewControllerKeyçš„å®šä¹‰UITransitionContextFromViewControllerKey //åŸè§†å›¾æ§åˆ¶å™¨UITransitionContextToViewControllerKey //è·³è½¬çš„è§†å›¾æ§åˆ¶å™¨*/- (nullable __kindof UIViewController *)viewControllerForKey:(UITransitionContextViewControllerKey)key;//ç›´æ¥è·å–è½¬åœºä¸­çš„è§†å›¾/*UITransitionContextFromViewKey //åŸè§†å›¾UITransitionContextToViewKey //è½¬åœºçš„è§†å›¾*/- (nullable __kindof UIView *)viewForKey:(UITransitionContextViewKey)key;//è·å–è§†å›¾æ§åˆ¶å™¨çš„åˆè¯†ä½ç½®- (CGRect)initialFrameForViewController:(UIViewController *)vc;//è·å–è§†å›¾æ§åˆ¶å™¨è½¬åœºåçš„ä½ç½®- (CGRect)finalFrameForViewController:(UIViewController *)vc; é€šè¿‡ä¸Šé¢çš„ä»‹ç»ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨UIViewControllerContextTransitioningéšå¿ƒæ‰€æ¬²çš„å®šåˆ¶è½¬åœºåŠ¨ç”»ï¼Œä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªå›°éš¾æˆ‘ä»¬æ— æ³•å…‹æœï¼Œé‚£å°±æ˜¯å¯ä»¥äº¤äº’çš„è½¬åœºåŠ¨ç”»ã€‚æˆ‘ä»¬åœ¨ä½¿ç”¨ç³»ç»Ÿçš„å¯¼èˆªæ§åˆ¶å™¨æ—¶ï¼Œå³åˆ’è¿”å›æ•ˆæœå¯¹ç”¨æˆ·ä½“éªŒååˆ†å‹å¥½ï¼Œæˆ‘ä»¬ä¸‹é¢å°±æ¥è¯•ç€å°†è§†å›¾æ§åˆ¶å™¨çš„æ¨¡æ€è·³è½¬è®¾è®¡æˆç±»ä¼¼å¯¼èˆªå¯äº¤äº’çš„ã€‚ é¦–å…ˆæˆ‘ä»¬éœ€è¦å®ç°TransDelegateç±»ä¸­çš„å¦‚ä¸‹ä¸¤ä¸ªå‡½æ•°ï¼š 1234567- (nullable id &lt;UIViewControllerAnimatedTransitioning&gt;)animationControllerForDismissedController:(UIViewController *)dismissed&#123; return [AniObject new];&#125;- (nullable id &lt;UIViewControllerInteractiveTransitioning&gt;)interactionControllerForDismissal:(id &lt;UIViewControllerAnimatedTransitioning&gt;)animator&#123; //éµå®ˆäº†UIViewControllerInteractiveTransitioningåè®®çš„å¯¹è±¡ return self.object;&#125; UIViewControllerInteractiveTransitioningåè®®ç”¨æ¥å¤„ç†å¯äº¤äº’çš„è½¬åœºåŠ¨ç”»çš„å…·ä½“è¡¨ç°ï¼Œéœ€è¦æ³¨æ„ï¼Œå› ä¸ºä½¿ç”¨çš„æ˜¯å¯äº¤äº’çš„è½¬åœºåŠ¨ç”»ï¼ŒUIViewControllerAnimatedTransitioningåè®®ä¸­çš„animateTransition:æ–¹æ³•å¯ä»¥ç©ºå®ç°ã€‚ä¸‹é¢æˆ‘ä»¬å†åˆ›å»ºä¸€ä¸ªéµå®ˆUIViewControllerInteractiveTransitioningåè®®çš„ç±»ï¼Œæ¯”å¦‚å‘½åä¸ºIntObjectï¼Œä¸Šé¢ä»£ç ä¸­çš„self.objectå³æ˜¯è¿™ä¸ªç±»çš„ç¤ºä¾‹ï¼ŒIntObject.hæ–‡ä»¶å¦‚ä¸‹ï¼š 123456789@interface IntObject : NSObject&lt;UIViewControllerInteractiveTransitioning&gt;-(void)updateAniProgress:(CGFloat)progress;-(void)finish;-(void)cancel;@end IntObject.mæ–‡ä»¶å®ç°å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546@interface IntObject()@property(nonatomic,strong)id&lt;UIViewControllerContextTransitioning&gt; context;@end@implementation IntObject//è¿™ä¸ªå‡½æ•°ç”¨æ¥ä¿å­˜transitionContext-(void)startInteractiveTransition:(id&lt;UIViewControllerContextTransitioning&gt;)transitionContext&#123; self.context = transitionContext; //è·³è½¬çš„ç•Œé¢ UIViewController *toVC = [transitionContext viewControllerForKey:UITransitionContextToViewControllerKey]; UIViewController * fromVC = [transitionContext viewControllerForKey:UITransitionContextFromViewControllerKey]; //æœ€ç»ˆçš„ä½ç½® toVC.view.frame = [transitionContext finalFrameForViewController:toVC]; //æ·»åŠ åˆ°å†…å®¹è§†å›¾ [[transitionContext containerView]insertSubview:toVC.view belowSubview:fromVC.view];&#125;//æ›´æ–°åŠ¨ç”»çŠ¶æ€-(void)updateAniProgress:(CGFloat)progress&#123; UIView *frameVC = [self.context viewForKey:UITransitionContextFromViewKey]; //æœ€ç»ˆçš„ä½ç½® CGRect fR = CGRectMake( [UIScreen mainScreen].bounds.size.width*progress, 0, [UIScreen mainScreen].bounds.size.width, [UIScreen mainScreen].bounds.size.height); frameVC.frame = fR;&#125;//ç»“æŸè½¬åœº-(void)finish&#123; [UIView animateWithDuration:0.2 animations:^&#123; UIView *frameVC = [self.context viewForKey:UITransitionContextFromViewKey]; frameVC.frame = CGRectMake([UIScreen mainScreen].bounds.size.width, 0, [UIScreen mainScreen].bounds.size.width, [UIScreen mainScreen].bounds.size.height); &#125; completion:^(BOOL finished) &#123; [self.context completeTransition:YES]; &#125;];&#125;//å–æ¶ˆè½¬åœº-(void)cancel&#123; [UIView animateWithDuration:0.2 animations:^&#123; UIView *frameVC = [self.context viewForKey:UITransitionContextFromViewKey]; frameVC.frame = CGRectMake(0, 0, [UIScreen mainScreen].bounds.size.width, [UIScreen mainScreen].bounds.size.height); &#125; completion:^(BOOL finished) &#123; [self.context cancelInteractiveTransition]; &#125;];&#125;@end ä¸‹é¢æˆ‘ä»¬æ¥æ·»åŠ æ‰‹åŠ¿ï¼Œåœ¨ViewController2ç±»ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253@interface ViewController2 ()@property(nonatomic,strong)UIPanGestureRecognizer * pan;@end@implementation ViewController2- (void)viewDidLoad &#123; [super viewDidLoad]; self.view.backgroundColor = [UIColor redColor]; [self.view addGestureRecognizer:self.pan]; // Do any additional setup after loading the view.&#125;-(void)pan:(UIPanGestureRecognizer *)pan&#123; CGPoint translatedPoint = [pan translationInView:self.view]; CGFloat persent = translatedPoint.x / [[UIScreen mainScreen]bounds].size.width; if (persent&lt;0) &#123; return; &#125; persent = fabs(persent); IntObject * obj = [(TransDelegate *)self.transitioningDelegate object]; switch (pan.state) &#123; case UIGestureRecognizerStateBegan:&#123; [self dismissViewControllerAnimated:YES completion:nil]; break; &#125; case UIGestureRecognizerStateChanged:&#123; //æ‰‹åŠ¿è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡updateInteractiveTransitionè®¾ç½®popè¿‡ç¨‹è¿›è¡Œçš„ç™¾åˆ†æ¯” [obj updateAniProgress:persent]; break; &#125; case UIGestureRecognizerStateEnded:&#123; //æ‰‹åŠ¿å®Œæˆåç»“æŸæ ‡è®°å¹¶ä¸”åˆ¤æ–­ç§»åŠ¨è·ç¦»æ˜¯å¦è¿‡åŠï¼Œè¿‡åˆ™finishInteractiveTransitionå®Œæˆè½¬åœºæ“ä½œï¼Œå¦è€…å–æ¶ˆè½¬åœºæ“ä½œ if (persent &gt; 0.5) &#123; [obj finish]; &#125;else&#123; [obj cancel]; &#125; break; &#125; default: break; &#125;&#125;-(UIPanGestureRecognizer *)pan&#123; if (!_pan) &#123; _pan = [[UIPanGestureRecognizer alloc]initWithTarget:self action:@selector(pan:)]; &#125; return _pan;&#125;@end æ‰‹åŠ¿æ•ˆæœå¦‚ä¸‹ï¼š å…¶å®ï¼Œä¸Šé¢æ¼”ç¤ºçš„æ˜¯æˆ‘ä»¬è‡ªå·±åˆ›å»ºäº†ä¸€ä¸ªç±»æ¥å®ç°UIViewControllerInteractiveTransitioningåè®®ï¼Œå…¶å®ç³»ç»Ÿä¹Ÿä¸ºæˆ‘ä»¬æä¾›ä¸€ä¸ªç±»ï¼šUIPercentDrivenInteractiveTransitionç±»ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è°ƒç”¨è¿™ä¸ªç±»çš„å¦‚ä¸‹3ä¸ªå‡½æ•°è€Œä¸éœ€è¦æˆ‘ä»¬è‡ªå·±é‡å†™äº†ï¼Œä½†æ˜¯å¿…é¡»å®ç°UIViewControllerAnimatedTransitioningåè®®ä¸­çš„transitionContextå‡½æ•°æ¥å®ç°åŠ¨ç”»æ•ˆæœã€‚ 123- (void)updateInteractiveTransition:(CGFloat)percentComplete;- (void)cancelInteractiveTransition;- (void)finishInteractiveTransition; å…¶å®ç°åŸç†ä¸æˆ‘ä»¬ä¸Šé¢è¿›è¡Œå®Œå…¨çš„è‡ªå®šä¹‰æ˜¯ä¸€æ ·çš„ã€‚ ä¸‰ã€å¯¼èˆªè½¬åœºåŠ¨ç”»çš„è‡ªå®šä¹‰å¯¼èˆªè½¬åœºåŠ¨ç”»çš„åŸç†ä¸æ¨¡æ€è·³è½¬è½¬åœºåŠ¨ç”»çš„åŸç†åŸºæœ¬æ˜¯ä¸€è‡´çš„ï¼Œä¸åŒçš„æˆ‘ä»¬éœ€è¦è®¾ç½®UINavigationControllerå®ä¾‹çš„delegateä¸ºéµå®ˆUINavigationControllerDelegateåè®®çš„ç±»å¯¹è±¡ã€‚ä¹‹åå®ç°å¦‚ä¸‹ä¸¤ä¸ªå‡½æ•°ï¼š 1234567891011121314//è®¾ç½®è½¬åœºçš„åŠ¨ç”»ä¸è®ºæ˜¯pushæˆ–pop è¿”å›nil åˆ™ä½¿ç”¨ç³»ç»Ÿé»˜è®¤çš„å¯¼èˆªè½¬åœºåŠ¨ç”»- (nullable id &lt;UIViewControllerAnimatedTransitioning&gt;)navigationController:(UINavigationController *)navigationController animationControllerForOperation:(UINavigationControllerOperation)operation fromViewController:(UIViewController *)fromVC toViewController:(UIViewController *)toVC &#123; NSLog(@\"sss\"); return nil;&#125;//è®¾ç½®å¯äº¤äº’çš„è½¬åœºåŠ¨ç”»- (nullable id &lt;UIViewControllerInteractiveTransitioning&gt;)navigationController:(UINavigationController *)navigationController interactionControllerForAnimationController:(id &lt;UIViewControllerAnimatedTransitioning&gt;) animationController&#123; NSLog(@\"aaa\"); return nil;&#125; å¯ä»¥çœ‹åˆ° animationControllerForOperation:å‡½æ•°ä¾ç„¶éœ€è¦è¿”å›ä¸€ä¸ªéµå®ˆäº†UIViewControllerAnimatedTransitioningåè®®çš„å¯¹è±¡ï¼Œä½¿ç”¨æ–¹å¼å’Œå‰é¢æ‰€ä»‹ç»çš„æ¨¡æ€è·³è½¬è‡ªå®šä¹‰è½¬åœºä¸€æ¨¡ä¸€æ ·ã€‚UINavigationControllerOperationè¿™ä¸ªæšä¸¾å°†å‘ŠçŸ¥å¼€å‘è€…å¯¼èˆªæ‰€åšçš„æ“ä½œï¼Œå¦‚ä¸‹ï¼š 12345typedef NS_ENUM(NSInteger, UINavigationControllerOperation) &#123; UINavigationControllerOperationNone, //æ—  UINavigationControllerOperationPush, //pushæ“ä½œ UINavigationControllerOperationPop, //popæ“ä½œ&#125;; å®ç°UIViewControllerInteractiveTransitioningåè®®å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849@interface IntObject()@property(nonatomic,strong)id&lt;UIViewControllerContextTransitioning&gt; context;@end@implementation IntObject-(void)startInteractiveTransition:(id&lt;UIViewControllerContextTransitioning&gt;)transitionContext&#123; self.context = transitionContext; //è·³è½¬çš„ç•Œé¢ UIViewController *toVC = [transitionContext viewControllerForKey:UITransitionContextToViewControllerKey]; UIViewController * fromVC = [transitionContext viewControllerForKey:UITransitionContextFromViewControllerKey]; //æœ€ç»ˆçš„ä½ç½® toVC.view.frame = [transitionContext finalFrameForViewController:toVC]; //æ·»åŠ åˆ°å†…å®¹è§†å›¾ [[transitionContext containerView]insertSubview:toVC.view belowSubview:fromVC.view];&#125;-(void)updateAniProgress:(CGFloat)progress&#123; UIView *frameVC = [self.context viewForKey:UITransitionContextFromViewKey]; //æœ€ç»ˆçš„ä½ç½® CGRect fR = CGRectMake( [UIScreen mainScreen].bounds.size.width*progress, 0, [UIScreen mainScreen].bounds.size.width, [UIScreen mainScreen].bounds.size.height); frameVC.frame = fR; [self.context updateInteractiveTransition:progress];&#125;-(void)finish&#123; [UIView animateWithDuration:0.2 animations:^&#123; UIView *frameVC = [self.context viewForKey:UITransitionContextFromViewKey]; frameVC.frame = CGRectMake([UIScreen mainScreen].bounds.size.width, 0, [UIScreen mainScreen].bounds.size.width, [UIScreen mainScreen].bounds.size.height); &#125; completion:^(BOOL finished) &#123; [self.context finishInteractiveTransition]; [self.context completeTransition:YES]; &#125;];&#125;-(void)cancel&#123; [UIView animateWithDuration:0.2 animations:^&#123; UIView *frameVC = [self.context viewForKey:UITransitionContextFromViewKey]; frameVC.frame = CGRectMake(0, 0, [UIScreen mainScreen].bounds.size.width, [UIScreen mainScreen].bounds.size.height); &#125; completion:^(BOOL finished) &#123; [self.context cancelInteractiveTransition]; [self.context completeTransition:NO]; &#125;];&#125;@end å¦‚æ­¤å³å¯ä»¥è½»æ¾å®ç°å¯äº¤äº’çš„è‡ªå®šä¹‰å¯¼èˆªåŠ¨ç”»ã€‚ å››ã€UITabBarControllerçš„è½¬åœºåŠ¨ç”»UITabbarä¹Ÿå¯ä»¥è¿›è¡Œè½¬åœºåŠ¨ç”»çš„è‡ªå®šä¹‰ï¼Œéœ€è¦è®¾ç½®UITabBarControllerçš„delegateå¹¶å®ç°åè®®ä¸­çš„å¦‚ä¸‹ä¸¤ä¸ªå‡½æ•°ï¼š 12345678910//è®¾ç½®éäº¤äº’çš„è½¬åœºåŠ¨ç”»- (nullable id &lt;UIViewControllerAnimatedTransitioning&gt;)tabBarController:(UITabBarController *)tabBarController animationControllerForTransitionFromViewController:(UIViewController *)fromVC toViewController:(UIViewController *)toVC &#123;&#125;//è®¾ç½®äº¤äº’çš„è½¬åœºåŠ¨ç”»- (nullable id &lt;UIViewControllerInteractiveTransitioning&gt;)tabBarController:(UITabBarController *)tabBarController interactionControllerForAnimationController: (id &lt;UIViewControllerAnimatedTransitioning&gt;)animationController&#123; &#125; è¿™ä¸¤ä¸ªå‡½æ•°çš„åº”ç”¨å’Œå¯¼èˆªè‡ªå®šä¹‰åŠ¨ç”»åŸºæœ¬æ˜¯ä¸€è‡´çš„ï¼Œè¿™é‡Œå°±ä¸å†åˆ—ä¸¾ä»£ç ï¼Œç®€å•çš„æ•ˆæœè§ä¸‹å›¾ï¼š","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"ä½¿ç”¨Jenkinsé…ç½®iOSè‡ªåŠ¨åŒ–æ„å»ºå·¥å…·","slug":"374ä½¿ç”¨Jenkinsé…ç½®iOSè‡ªåŠ¨åŒ–æ„å»ºå·¥å…·","date":"2018-06-27T16:00:00.000Z","updated":"2021-07-15T08:44:35.538Z","comments":true,"path":"2018/06/28/374ä½¿ç”¨Jenkinsé…ç½®iOSè‡ªåŠ¨åŒ–æ„å»ºå·¥å…·/","link":"","permalink":"http://huishao.cc/2018/06/28/374ä½¿ç”¨Jenkinsé…ç½®iOSè‡ªåŠ¨åŒ–æ„å»ºå·¥å…·/","excerpt":"","text":"ä½¿ç”¨Jenkinsé…ç½®iOSè‡ªåŠ¨åŒ–æ„å»ºå·¥å…·å…³äºiOSè‡ªåŠ¨åŒ–æ„å»ºå…¶å®å¹¶ä¸å¤æ‚ï¼Œé€šè¿‡ä¸€äº›ç®€å•çš„Gitä¸XcodeæŒ‡ä»¤ï¼ŒåŠ ä¸ŠUIï¼Œæˆ‘ä»¬è‡ªå·±ä¹Ÿå¯ä»¥åŠ¨æ‰‹ç¼–å†™ä¸€æ¬¾è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·ã€‚è¿™åœ¨ä¹‹å‰çš„åšå®¢ä¸­ä¹Ÿæœ‰æ¶‰åŠï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥åœ¨å¦‚ä¸‹åœ°å€æ‰¾åˆ°è¿™ç¯‡åšå®¢ï¼š è‡ªå·±åŠ¨æ‰‹è®¾è®¡ä¸€æ¬¾iOSè‡ªåŠ¨æ„å»ºå‘å¸ƒå·¥å…·ï¼šhttps://my.oschina.net/u/2340880/blog/1486246 æœ¬ç¯‡åšå®¢ä¸»è¦è®°å½•ä½¿ç”¨Jenkinsæ­å»ºiOSè‡ªåŠ¨åŒ–æ„å»ºé¡¹ç›®çš„è¿‡ç¨‹ï¼Œå…³äºJenkinsçš„æ›´å¤šè‡ªåŠ¨åŒ–è„šæœ¬çš„åº”ç”¨ï¼Œæœ‰æœºä¼šåé¢å†å‡ºä¸“é—¨çš„åšå®¢ä»‹ç»ã€‚ ä¸€ã€Jenkinsçš„å®‰è£…ä¸å¯åŠ¨Jenkinsçš„å®‰è£…éå¸¸æ–¹é¢ï¼Œåœ¨å¦‚ä¸‹å®˜ç½‘å¯ä»¥ç›´æ¥ä¸‹è½½Jenkinsçš„å®‰è£…åŒ…ï¼Œå…¶ä¸­æœ‰æ”¯æŒå„ä¸ªå¹³å°çš„å®‰è£…åŒ…ï¼Œé€‰æ‹©è‡ªå·±æ‰€éœ€è¦çš„è¿›è¡Œä¸‹è½½å®‰è£…å³å¯ã€‚ https://jenkins.io/ å®‰è£…å®Œæˆåï¼ŒJenkinsä¼šè‡ªåŠ¨å¯åŠ¨è¿è¡Œï¼Œåœ¨å½“å‰ç”µè„‘çš„8080ç«¯å£å¼€å¯ä¸€ä¸ªWebåº”ç”¨æœåŠ¡ï¼Œå¦‚æœæ˜¯ç¬¬ä¸€æ¬¡å®‰è£…å¯åŠ¨ï¼Œæˆ‘ä»¬éœ€è¦é…ç½®ä¸€ä¸ªè´¦æˆ·ä½œä¸ºåˆå§‹ç”¨æˆ·ã€‚ å¯¹äºåœ¨Macä¸ŠJenkinsçš„å¯åŠ¨ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼š æ–¹å¼ä¸€ï¼šç›´æ¥è¿è¡ŒJavaå½’æ¡£æ–‡ä»¶å¯åŠ¨Jenkins å¦‚æœæ˜¯Macç”µè„‘ï¼ŒJenkinså®‰è£…å®Œæˆåï¼Œåœ¨Applicationsç›®å½•ä¸‹ä¼šå¤šå‡ºä¸€ä¸ªJenkinsæ–‡ä»¶å¤¹ï¼Œè¿™ä¸ªæ–‡ä»¶å¤¹ä¸­åŒ…å«ä¸€ä¸ªjenkins.warçš„æ–‡ä»¶ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ¥å¯åŠ¨Jenkinsï¼š java -jar /Applications/Jenkins/jenkins.war ä½¿ç”¨è¿™ç§æ–¹å¼å¯åŠ¨çš„Jenkinsï¼Œè¦å…³é—­æœåŠ¡éœ€è¦æ‰¾åˆ°JenkinsæœåŠ¡å¯¹åº”çš„PIDï¼Œåœ¨ç»ˆç«¯è¾“å…¥å¦‚ä¸‹å‘½ä»¤: 1ps åœ¨ç»ˆç«¯è¾“å‡ºçš„ä¿¡æ¯ä¸­ï¼Œå¯ä»¥çœ‹åˆ°JenkinsæœåŠ¡æ‰€å¯¹åº”çš„PIDå·ï¼Œå¦‚ä¸‹å›¾ï¼š ç»ˆç«¯ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å°†æ­¤æœåŠ¡æ€æ­»å³å¯ï¼š 1kill -9 PIDå· æ–¹å¼äºŒï¼šä½¿ç”¨Macçš„å¯åŠ¨è¿›è¡Œæ§åˆ¶å™¨å¯åŠ¨Jenkins å¦‚æœæˆåŠŸå®‰è£…äº†Jenkinsï¼Œåœ¨Macç”µè„‘ç£ç›˜çš„èµ„æºåº“ä¸­çš„LaunchDaemonsæ–‡ä»¶å¤¹ä¸‹å¯ä»¥æ‰¾åˆ°Jenkinsçš„å¯åŠ¨é…ç½®æ–‡ä»¶ï¼Œå¦‚ä¸‹å›¾ï¼š åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å³å¯å¯åŠ¨JenkinsæœåŠ¡ï¼š 1sudo launchctl load /Library/LaunchDaemons/org.jenkins-ci.plist ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å…³é—­JenkinsæœåŠ¡ï¼š 1sudo launchctl unload /Library/LaunchDaemons/org.jenkins-ci.plist äºŒã€åˆ›å»ºæŒç»­é›†æˆé¡¹ç›®åœ¨Jenkinsçš„ä¸»é¡µé€‰æ‹©æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œåˆ›å»ºé€‰é¡¹ä¸­ï¼Œæˆ‘ä»¬è¾“å…¥é¡¹ç›®åç§°ï¼Œå¹¶é€‰æ‹©æ„å»ºä¸€ä¸ªè‡ªç”±é£æ ¼çš„è½¯ä»¶ï¼Œå¦‚ä¸‹å›¾ï¼š ä¸‹ä¸€æ­¥å°†è¿›å…¥åˆ°é¡¹ç›®é…ç½®ç•Œé¢ï¼Œé¦–å…ˆéœ€è¦è®¾ç½®ä¸‹é€šç”¨çš„é…ç½®ï¼Œå¦‚ä¸‹å›¾ï¼š å…¶ä¸­ï¼Œæè¿°éƒ¨åˆ†å¯ä»¥å¡«å†™é¡¹ç›®çš„ç›¸å…³ä»‹ç»ï¼Œä¸¢å¼ƒæ—§çš„æ„å»ºè®¾ç½®æ„å»ºè®°å½•ä¿å­˜çš„å¤©æ•°å’Œæœ€å¤šä¿æŒå¤šå°‘ä¸ªæ„å»ºè®°å½•ç­‰ã€‚ æºç ç®¡ç†çš„é…ç½®æ˜¯æ¯”è¾ƒé‡è¦çš„ä¸€æ­¥ï¼Œå…¶ç”¨æ¥è®¾ç½®æ„å»ºé¡¹ç›®ä»å“ªé‡Œæ‹‰å–é¡¹ç›®çš„æºä»£ç ä»¥åŠè¿›è¡Œæºç æ›´æ–°çš„æ“ä½œã€‚å¦‚ä¸‹å›¾ï¼š å¦‚æœä½¿ç”¨çš„æ˜¯Gitä»“åº“ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œéœ€è¦é…ç½®é¡¹ç›®çš„è·¯å¾„ï¼Œè´¦æˆ·ä»¥åŠè¦è¿›è¡Œæ„å»ºçš„åˆ†æ”¯ã€‚è´¦æˆ·çš„ä¸»è¦ç”¨é€”æ˜¯ä½¿å¾—Jenkinsæœ‰æƒé™æ‹‰å–é¡¹ç›®çš„ä»£ç ï¼Œå¦‚æœä¹‹å‰æ²¡æœ‰æ·»åŠ è¿‡ï¼Œå¯ä»¥ç‚¹å‡»å³ä¾§çš„AddæŒ‰é’®è¿›è¡Œæ·»åŠ ï¼Œå¦‚ä¸‹å›¾ï¼š å¯ä»¥é€‰æ‹©é…ç½®ç”¨æˆ·ååŠ å¯†ç çš„æ–¹å¼æ·»åŠ è´¦æˆ·ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨SSHå…¬é’¥çš„æ–¹å¼ã€‚ ä¸‹ä¸€æ­¥æˆ‘ä»¬éœ€è¦é…ç½®æ„å»ºçš„è§¦å‘å™¨ï¼Œæ„å»ºè§¦å‘å™¨æœ‰å¤šç§å½¢å¼ï¼Œæ¯”å¦‚å®šæ—¶è§¦å‘æ„å»ºï¼Œè¿œç¨‹è§¦å‘ï¼Œä»£ç æäº¤åè§¦å‘ç­‰ç­‰ï¼Œå¦‚ä¸‹å›¾ï¼š å…¶ä¸­è¿œç¨‹è§¦å‘æ˜¯æŒ‡æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿œç¨‹è®¿é—®JenkinsæœåŠ¡å™¨åœ°å€åŠ ä¸Šä»¤ç‰Œå‚æ•°æ¥è§¦å‘æ„å»ºã€‚ ä¹‹åå†æ„å»ºä¸€æ ä¸­é€‰æ‹©å¢åŠ æ„å»ºæ­¥éª¤-&gt;æ‰§è¡ŒShellï¼Œæ·»åŠ å¦‚ä¸‹Shellè„šæœ¬ï¼š 12345678export LANG=en_US.UTF-8export LANGUAGE=en_US.UTF-8export LC_ALL=en_US.UTF-8/usr/local/bin/pod installxcodebuild -archivePath &quot;/Users/Shared/Jenkins/Home/workspace/Jenkinsé¡¹ç›®åç§°/ä½ çš„é¡¹ç›®å.xcarchive&quot; -workspace ä½ çš„é¡¹ç›®å.xcworkspace -sdk iphoneos -scheme &quot;ä½ çš„é¡¹ç›®å&quot; -configuration &quot;Release&quot; archivexcodebuild -exportArchive -archivePath &quot;/Users/Shared/Jenkins/Home/workspace/Jenkinsé¡¹ç›®åç§°/ä½ çš„é¡¹ç›®å.xcarchive&quot; -exportPath &quot;/Users/Shared/Jenkins/Home/workspace/Jenkinsé¡¹ç›®åç§°/buildIPA&quot; -exportOptionsPlist &apos;/Users/Shared/Jenkins/Home/workspace/Tictalk-iOS/ExportOptions.plist&apos; -allowProvisioningUpdatescurl -F &quot;file=@/Users/Shared/Jenkins/Home/workspace/Jenkinsé¡¹ç›®åç§°/buildIPA/ä½ çš„é¡¹ç›®å.ipa&quot; -F &quot;uKey=è’²å…¬è‹±userKey&quot; -F &quot;_api_key=è’²å…¬è‹±apikey&quot; https://qiniu-storage.pgyer.com/apiv1/app/upload ä¸Šé¢è„šæœ¬ä¸­ï¼Œxcodebuild -archivePath å‘½ä»¤ç”¨æ¥ç¼–è¯‘é¡¹ç›®ï¼Œå¦‚æœä½ çš„é¡¹ç›®æ²¡æœ‰ä½¿ç”¨workspaceï¼Œéœ€è¦å°†å‘½ä»¤ä¸­çš„workspaceä¿®æ”¹æˆprojectï¼Œconfigurationå‚æ•°ç”¨æ¥é…ç½®ç¼–è¾‘çš„æ–¹å¼ï¼ŒReleaseä¸ºå‘å¸ƒç¯å¢ƒã€‚xcodebuild -exportArchive å‘½ä»¤ç”¨æ¥åˆ°å¤„APIåŒ…ï¼Œéœ€è¦é¢å¤–æ³¨æ„ï¼Œæå‰æˆ‘ä»¬éœ€è¦åœ¨/Users/Shared/Jenkins/Home/workspace/Jenkinsé¡¹ç›®åç§°/ä½ çš„é¡¹ç›®åè¿™ä¸ªç›®å½•ä¸‹æ·»åŠ ä¸€ä¸ªExportOptions.plistæ–‡ä»¶ï¼Œæ–°Xcodeå¦‚æœä¸é…ç½®è¿™ä¸ªæ–‡ä»¶æ˜¯æ— æ³•æ‰“åŒ…æˆåŠŸçš„ã€‚curl -F å‘½ä»¤æ˜¯ç”¨æ¥å°†æ‰“åŒ…å¥½çš„IPAåŒ…è‡ªåŠ¨ä¸Šä¼ åˆ°è’²å…¬è‹±åˆ†å‘å¹³å°ã€‚ ExportOptions.plistæ–‡ä»¶ç¼–å†™æ ¼å¼å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;!DOCTYPE plist PUBLIC \"-//Apple//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\"&gt;&lt;plist version=\"1.0\"&gt;&lt;dict&gt; &lt;key&gt;compileBitcode&lt;/key&gt; &lt;false/&gt; &lt;key&gt;method&lt;/key&gt; &lt;string&gt;ad-hoc(IPAåŒ…æ¨¡å¼)&lt;/string&gt; &lt;key&gt;provisioningProfiles&lt;/key&gt; &lt;dict&gt;(ä¸‹é¢è®¾ç½®bundleIDå¯¹åº”çš„provisioningProfilesæ–‡ä»¶å) &lt;key&gt;com.***&lt;/key&gt; &lt;string&gt;AD_HOC&lt;/string&gt; &lt;key&gt;com.***.TKNotificationCentent&lt;/key&gt; &lt;string&gt;Content&lt;/string&gt; &lt;key&gt;com.***.TKNotificationService&lt;/key&gt; &lt;string&gt;Service&lt;/string&gt; &lt;/dict&gt;(ä¸‹é¢é…ç½®è¯ä¹¦) &lt;key&gt;signingCertificate&lt;/key&gt; &lt;string&gt;iPhone Distribution&lt;/string&gt; &lt;key&gt;signingStyle&lt;/key&gt; &lt;string&gt;manual&lt;/string&gt; &lt;key&gt;stripSwiftSymbols&lt;/key&gt; &lt;true/&gt;(ä¸‹é¢é…ç½®teamID) &lt;key&gt;teamID&lt;/key&gt; &lt;string&gt;KJYHPT****&lt;/string&gt; &lt;key&gt;thinning&lt;/key&gt; &lt;string&gt;&amp;lt;none&amp;gt;&lt;/string&gt;&lt;/dict&gt;&lt;/plist&gt; ä¸‰ã€æ„å»ºå¯èƒ½å‡ºé”™çš„åœ°æ–¹é…ç½®å®Œäº†ä¸Šé¢çš„è„šæœ¬ï¼Œä½ å¯ä»¥å°è¯•ç‚¹å‡»ç«‹å³æ„å»ºæŒ‰é’®è¿›è¡Œæ„å»ºï¼Œå½“ç„¶æ„å»ºè¿‡ç¨‹ä¸­ææœ‰å¯èƒ½ä¼šå‡ºé”™ï¼Œä½ å¯ä»¥æ ¹æ®logè¾“å‡ºæ£€æŸ¥ä¸‹æ˜¯å¦æ˜¯å› ä¸ºä¸‹é¢çš„é—®é¢˜ã€‚ 1.gitç›¸å…³å‘½ä»¤å‡ºé”™å¯èƒ½æ˜¯Jenkinsæ‰¾ä¸åˆ°gitæ‰€åœ¨ä½ç½®ï¼Œåœ¨Jenkinsçš„ç³»ç»Ÿè®¾ç½®ä¸­é€‰æ‹©å…¨å±€å·¥å…·é…ç½®ï¼Œé…ç½®gitè·¯å¾„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 2.podç›¸å…³å‘½ä»¤å‡ºé”™ è¿™ä¸€æ­¥å‡ºé”™çš„å¯èƒ½æ€§æå¤§ï¼Œé¦–å…ˆä½ çš„ç”µè„‘å¯ä»¥ä½¿ç”¨podä¸ä»£è¡¨jenkinsç”¨æˆ·æœ‰ä½¿ç”¨podçš„æƒé™ï¼Œæœ€å¥½ä½¿ç”¨jenkinsç”¨æˆ·ç™»å½•ç”µè„‘ï¼Œè¿›è¡Œpodçš„æ›´æ–°å‡çº§ï¼Œæˆ–è€…ç›´æ¥ä½¿ç”¨jenkinsç”¨æˆ·ç™»å½•ï¼Œæ‰¾åˆ°æˆ‘ä»¬çš„é¡¹ç›®ï¼Œæ‰‹åŠ¨ä½¿ç”¨podè¿›è¡Œç¬¬ä¸‰æ–¹çš„å®‰è£…ã€‚ 3.xcodebuildç›¸å…³å‘½ä»¤å‡ºé”™å’Œgitå‘½ä»¤å‡ºé”™çš„é—®é¢˜åŸºæœ¬ä¸€è‡´ï¼Œæˆ‘ä»¬éœ€è¦é…ç½®è·¯å¾„ã€‚åœ¨Jenkinsçš„ç³»ç»Ÿè®¾ç½®ä¸­æ‰¾åˆ°ç³»ç»Ÿé…ç½®ï¼Œè®¾ç½®xcodeç›¸å…³å·¥å…·å¦‚ä¸‹ï¼š 4.ç¼–è¯‘è¿‡ç¨‹ä¸­è¯ä¹¦æˆ–é…ç½®æ–‡ä»¶å‡ºé”™é¦–å…ˆç¡®ä¿ä½ çš„åº”ç”¨è¯ä¹¦æ”¾åœ¨äº†é’¥åŒ™ä¸²çš„ç³»ç»Ÿåˆ†ç±»ä¸‹ï¼Œå¦‚å›¾ï¼š å…¶æ¬¡ï¼Œéœ€è¦å°†Provisioning Profilesæ–‡ä»¶å¤åˆ¶åˆ°ä¸‹é¢çš„ç›®å½•ä¸‹ï¼Œåˆ‡è®°ï¼š /Users/Shared/Jenkins/Library/MobileDevice/Provisioning Profiles æœ€åï¼Œè¯·ç¡®è®¤å¯ä»¥ä½¿ç”¨Xcodeæ‰‹åŠ¨è¿›è¡Œç¼–è¾‘å’Œæ‰“åŒ…ã€‚è€Œä¸”è¯ä¹¦å’ŒProvisioning Profilesæ–‡ä»¶ä¸€å®šè¦æ­£ç¡®å’ŒåŒ¹é…ã€‚","categories":[{"name":"å°ç å·¥å…·","slug":"å°ç å·¥å…·","permalink":"http://huishao.cc/categories/å°ç å·¥å…·/"}],"tags":[],"keywords":[{"name":"å°ç å·¥å…·","slug":"å°ç å·¥å…·","permalink":"http://huishao.cc/categories/å°ç å·¥å…·/"}]},{"title":"iOS:JSONè½¬OCå±æ€§å°å·¥å…·èƒ½","slug":"373iOS-JSONè½¬OCå±æ€§å°å·¥å…·","date":"2018-06-08T16:00:00.000Z","updated":"2021-07-15T08:43:46.375Z","comments":true,"path":"2018/06/09/373iOS-JSONè½¬OCå±æ€§å°å·¥å…·/","link":"","permalink":"http://huishao.cc/2018/06/09/373iOS-JSONè½¬OCå±æ€§å°å·¥å…·/","excerpt":"","text":"iOS:JSONè½¬OCå±æ€§å°å·¥å…·åœ¨iOSå¼€å‘ä¸­ï¼Œåªè¦æœ‰ç½‘ç»œæ¨¡å—ï¼Œå°±éœ€è¦æ•°æ®æ¨¡å‹çš„ç¼–å†™ã€‚åœ¨è¿›è¡Œæ•°æ®æ¨¡å‹çš„è§£æå’Œæ˜ å°„æ—¶ï¼ŒJSONModelæ˜¯ä¸€ä¸ªéå¸¸å¸¸ç”¨ä¸”ä¼˜ç§€çš„ç¬¬ä¸‰æ–¹æ¡†æ¶ï¼Œä¹‹å‰æœ‰æœ‰è¿‡åšå®¢å¯¹å…¶åˆ†æï¼Œåœ°å€å¦‚ä¸‹ï¼š JSONModelæºç åˆ†æï¼šhttps://my.oschina.net/u/2340880/blog/1787561ã€‚ æ— è®ºä½¿ç”¨ä»€ä¹ˆç¬¬ä¸‰æ–¹çš„JSONæ•°æ®è§£ææ¡†æ¶ï¼Œæˆ‘ä»¬éƒ½éœ€è¦æ‰‹åŠ¨æ¥ç¼–å†™æ•°æ®æ¨¡å‹ç±»ï¼Œè¿™æ˜¯ä¸€ä¸ªååˆ†æœºæ¢°æ€§çš„ä½“åŠ›æ´»ï¼Œæœ¬ç¯‡åšå®¢å°†ä»‹ç»ä¸€ä¸ªé…åˆä¸JSONModelä½¿ç”¨çš„è‡ªåŠ¨ç”Ÿæˆå±æ€§è„šæœ¬(æ”¯æŒç±»çš„åµŒå¥—)ã€‚ æœ¬è„šæœ¬é‡‡ç”¨çš„è¯­è¨€ä¸ºJavaScriptï¼Œé‡‡ç”¨JavaScriptç¼–å†™æœ‰ä¸¤ä¸ªå¥½å¤„ï¼Œé¦–å…ˆå…¶å¯ä»¥åœ¨nodeç¯å¢ƒè¿è¡Œï¼Œå¯ä»¥ååˆ†æ–¹ä¾¿çš„æ“ä½œæ–‡ä»¶ï¼Œä½¿ç”¨å®ƒå¯ä»¥ç›´æ¥å°†JSONæ–‡ä»¶è½¬æ¢æˆOCæ•°æ®æ¨¡å‹ç±»ã€‚å…¶æ¬¡ï¼Œå®ƒä¹Ÿååˆ†å®¹æ˜“åœ¨Webç«¯è¿è¡Œï¼Œå¯ä»¥é€šè¿‡ç½‘é¡µå¯è§†åŒ–çš„è¿›è¡Œæ•°æ®æ¨¡å‹çš„è½¬æ¢ã€‚ é—²è¯å°‘è¯´ï¼Œç›´æ¥ä¸Šæºç ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134var fileManager = require('fs');var gettype=Object.prototype.toString;String.prototype.firstUpperCase = function()&#123; return this.replace(/\\b(\\w)(\\w*)/g, function($0, $1, $2) &#123; return $1.toUpperCase() + $2.toLowerCase(); &#125;);&#125;var arguments = process.argv.splice(2);var path = arguments[0];if (!path) &#123; console.log(\"è¯·ä¼ å…¥è¦è½¬æ¢çš„JSONæ–‡ä»¶è·¯å¾„\"); return;&#125;console.log('jsonæ–‡ä»¶è·¯å¾„:', path);try&#123; var result = JSON.parse(fileManager.readFileSync(path));&#125;catch(error)&#123; console.log(\"è§£æJSONæ–‡ä»¶å¤±è´¥:\"+error); return;&#125;if (!result) &#123; console.log(\"è§£æJSONæ–‡ä»¶æ— æ•ˆ\"); return;&#125;var classArray = new Array();parseObject(\"MyObject\",result);var stringAll=\"\";//è¾“å‡ºfor (var i = classArray.length-1; i &gt;=0 ; i--) &#123; let cla = classArray[i]; stringAll+=\"@protocol \"+cla.name+\" @end\\r\\n\\r\\n@interface \"+cla.name+\" : JSONModel\\r\\n\\r\\n\"; console.log(\"@protocol \"+cla.name+\" @end\\r\\n\\r\\n@interface \"+cla.name+\" : JSONModel\\r\\n\\r\\n\"); for (var j = 0; j &lt; cla.property.length; j++) &#123; stringAll+=cla.property[j]+\"\\r\\n\\r\\n\"; console.log(cla.property[j]+\"\\r\\n\\r\\n\"); &#125; stringAll+=\"@end\\r\\n\\r\\n\"; console.log(\"@end\\r\\n\\r\\n\");&#125;stringAll+=\"===========mæ–‡ä»¶======================\\r\\n\";console.log(\"===========mæ–‡ä»¶======================\\r\\n\");for (var i = classArray.length-1; i &gt;=0 ; i--) &#123; let cla = classArray[i]; stringAll+=\"@implementation \"+cla.name+\"\\r\\n\\r\\n@end\\r\\n\\r\\n\"; console.log(\"@implementation \"+cla.name+\"\\r\\n\\r\\n@end\\r\\n\\r\\n\");&#125;let paths = path.split(\"/\");paths.pop();let newPath = paths.join(\"/\")+\"/oc.txt\";fileManager.writeFileSync(newPath,stringAll);//æ ¸å¿ƒè§£æå‡½æ•°function parseObject(k,result)&#123; let c = new Class(k); classArray.push(c); for (var i = 0; i &lt; Object.getOwnPropertyNames(result).length; i++) &#123; let key = Object.getOwnPropertyNames(result)[i]; let value = result[key]; let type = getType(value); if(type==null)&#123; continue; &#125; if (type==\"Object\") &#123; //è¿›è¡ŒäºŒæ¬¡è§£æ if (Object.getOwnPropertyNames(value).length==0) &#123; c.property.push(\"@property(nonatomic,strong)NSDictionary&lt;Optional&gt;*\"+key+\";\"); &#125;else&#123; parseObject(key.firstUpperCase(),value); c.property.push(\"@property(nonatomic,strong)\"+key.firstUpperCase()+\"&lt;Optional,\"+key.firstUpperCase()+\"&gt;*\"+key+\";\"); &#125; continue; &#125; if (type==\"Array\") &#123; if (value.length&gt;0) &#123; let obj = value[0]; let t = getType(obj); if (t==null) &#123; continue; &#125; if (t==\"Object\") &#123; c.property.push(\"@property(nonatomic,strong)NSArray&lt;\"+key.firstUpperCase()+\"*&gt;&lt;Optional,\"+key.firstUpperCase()+\"&gt;*\"+key+\";\"); parseObject(key.firstUpperCase(),obj); &#125;else&#123; c.property.push(\"@property(nonatomic,strong)NSArray&lt;\"+t+\"*&gt;&lt;Optional&gt;*\"+key+\";\"); &#125; &#125;else&#123; c.property.push(\"@property(nonatomic,strong)NSArray&lt;Optional&gt;*\"+key+\";\"); &#125; continue; &#125; if (type==\"id\") &#123; c.property.push(\"@property(nonatomic,strong)\"+type+\"&lt;Optional&gt;\"+key+\";\"); continue; &#125; c.property.push(\"@property(nonatomic,strong)\"+type+\"&lt;Optional&gt;*\"+key+\";\"); &#125;&#125;//è·å–è¦è½¬æ¢çš„ç±»å‹function getType(obj)&#123; if (typeof obj == 'number') &#123; return \"NSNumber\"; &#125; if (typeof obj == 'undefined') &#123; return \"id\"; &#125; if (typeof obj == 'null') &#123; return \"id\"; &#125; if (typeof obj == 'function') &#123; return null; &#125; if (typeof obj == 'string') &#123; return \"NSString\" &#125; if (typeof obj == 'boolean') &#123; return \"NSNumber\" &#125; if (typeof obj == 'object') &#123; if (gettype.call(obj)==\"[object Object]\") &#123; return \"Object\"; &#125; if (gettype.call(obj)==\"[object Array]\") &#123; return \"Array\"; &#125; if (gettype.call(obj)==\"[object Null]\")&#123; return \"id\"; &#125; &#125;&#125;//ç±» function Class(name)&#123; this.name = name; this.property = new Array();&#125; åœ¨ç»ˆç«¯ä½¿ç”¨å¦‚ä¸‹æŒ‡ä»¤ç›´æ¥è¿è¡Œæ­¤è„šæœ¬ï¼š 1node Tool.js /Users/jaki/Desktop/json.json å‘½ä»¤åé¢æ‰€è·Ÿçš„å‚æ•°ä¸ºJSONæ–‡ä»¶çš„è·¯å¾„ï¼ŒJSONæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344&#123; \"code\": 0, \"message\": \"\", \"result\": &#123; \"aid\": \"be3bdab8-fbf5-4e89-97cb-56b00048b09b\", \"audios\": [], \"avatar_url\": \"https://www.google.com/a.jpg\", \"call_price\": 0, \"cid\": \"efad6549-be62-40d7-a425-40f9b7730192\", \"cover_url\": \"https://www.google.com/a.jpg\", \"created_on\": \"1528349104\", \"fields\": [ &#123; \"key\": \"name\", \"value\": \"Mr.Wang\" &#125;, &#123; \"key\": \"company\", \"value\": \"TicTalk\" &#125;, &#123; \"key\": \"position\", \"value\": \"Senior Engineer\" &#125; ], \"geo\": &#123; \"description\": \"Shanghai, China\", \"latitude\": 48.82694828196076, \"longitude\": 2.367038433387592 &#125;, \"id\": 2, \"message_price\": 0, \"photo_sets\": [], \"pid\": \"9b64395f-687c-4f34-9a5d-68d9adafa4cc\", \"rid\": \"578ff973-c707-42b2-bfc2-87e4dc8e0efd\", \"role_open\": false, \"sid\": \"8f560338-dfa5-48be-b44c-65fd87798543\", \"status\": 0, \"updated_on\": \"1528349104\", \"video_price\": 0, \"videos\": [], \"world_open\": true &#125;&#125; è¿è¡Œåï¼Œå¯ä»¥çœ‹åˆ°åœ¨JSONæ–‡ä»¶åŒä¸€ç›®å½•ä¸‹ç”Ÿæˆäº†oc.txtæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495969798@protocol Geo @end@interface Geo : JSONModel@property(nonatomic,strong)NSString&lt;Optional&gt;*description;@property(nonatomic,strong)NSNumber&lt;Optional&gt;*latitude;@property(nonatomic,strong)NSNumber&lt;Optional&gt;*longitude;@end@protocol Fields @end@interface Fields : JSONModel@property(nonatomic,strong)NSString&lt;Optional&gt;*key;@property(nonatomic,strong)NSString&lt;Optional&gt;*value;@end@protocol Result @end@interface Result : JSONModel@property(nonatomic,strong)NSString&lt;Optional&gt;*aid;@property(nonatomic,strong)NSArray&lt;Optional&gt;*audios;@property(nonatomic,strong)NSString&lt;Optional&gt;*avatar_url;@property(nonatomic,strong)NSNumber&lt;Optional&gt;*call_price;@property(nonatomic,strong)NSString&lt;Optional&gt;*cid;@property(nonatomic,strong)NSString&lt;Optional&gt;*cover_url;@property(nonatomic,strong)NSString&lt;Optional&gt;*created_on;@property(nonatomic,strong)NSArray&lt;Fields*&gt;&lt;Optional,Fields&gt;*fields;@property(nonatomic,strong)Geo&lt;Optional,Geo&gt;*geo;@property(nonatomic,strong)NSNumber&lt;Optional&gt;*id;@property(nonatomic,strong)NSNumber&lt;Optional&gt;*message_price;@property(nonatomic,strong)NSArray&lt;Optional&gt;*photo_sets;@property(nonatomic,strong)NSString&lt;Optional&gt;*pid;@property(nonatomic,strong)NSString&lt;Optional&gt;*rid;@property(nonatomic,strong)NSNumber&lt;Optional&gt;*role_open;@property(nonatomic,strong)NSString&lt;Optional&gt;*sid;@property(nonatomic,strong)NSNumber&lt;Optional&gt;*status;@property(nonatomic,strong)NSString&lt;Optional&gt;*updated_on;@property(nonatomic,strong)NSNumber&lt;Optional&gt;*video_price;@property(nonatomic,strong)NSArray&lt;Optional&gt;*videos;@property(nonatomic,strong)NSNumber&lt;Optional&gt;*world_open;@end@protocol MyObject @end@interface MyObject : JSONModel@property(nonatomic,strong)NSNumber&lt;Optional&gt;*code;@property(nonatomic,strong)NSString&lt;Optional&gt;*message;@property(nonatomic,strong)Result&lt;Optional,Result&gt;*result;@end===========mæ–‡ä»¶======================@implementation Geo@end@implementation Fields@end@implementation Result@end@implementation MyObject@end åé¢æˆ‘ä»¬åªéœ€è¦å°†ç±»åè°ƒæ•´æˆæ‰€éœ€è¦çš„å³å¯ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªå³ç”¨çš„ç½‘é¡µè½¬æ¢å™¨ï¼Œé‡‡ç”¨çš„è„šæœ¬ä»£ç å’Œä¸Šé¢çš„ä»£ç åŸºæœ¬ä¸€è‡´ï¼š http://zyhshao.github.io/JSONToOC.html ä½¿ç”¨æ•ˆæœå¦‚ä¸‹ï¼š çƒ­çˆ±æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ä¸­æœ‰è¶£çš„äº‹åŠ¡ï¼Œäº’ç›¸äº¤æµï¼Œä¹Ÿåœ¨æœ‹å‹ QQï¼š316045346 â€”â€”ç²å°‘","categories":[{"name":"å°ç å·¥å…·","slug":"å°ç å·¥å…·","permalink":"http://huishao.cc/categories/å°ç å·¥å…·/"}],"tags":[],"keywords":[{"name":"å°ç å·¥å…·","slug":"å°ç å·¥å…·","permalink":"http://huishao.cc/categories/å°ç å·¥å…·/"}]},{"title":"iOSä½¿ç”¨VOIPä¸CallKitå®ç°ä½“éªŒä¼˜è´¨çš„ç½‘ç»œé€šè®¯åŠŸèƒ½","slug":"372iOSä½¿ç”¨VOIPä¸CallKitå®ç°ä½“éªŒä¼˜è´¨çš„ç½‘ç»œé€šè®¯åŠŸèƒ½","date":"2018-04-23T16:00:00.000Z","updated":"2021-07-15T08:42:28.270Z","comments":true,"path":"2018/04/24/372iOSä½¿ç”¨VOIPä¸CallKitå®ç°ä½“éªŒä¼˜è´¨çš„ç½‘ç»œé€šè®¯åŠŸèƒ½/","link":"","permalink":"http://huishao.cc/2018/04/24/372iOSä½¿ç”¨VOIPä¸CallKitå®ç°ä½“éªŒä¼˜è´¨çš„ç½‘ç»œé€šè®¯åŠŸèƒ½/","excerpt":"","text":"iOSä½¿ç”¨VOIPä¸CallKitå®ç°ä½“éªŒä¼˜è´¨çš„ç½‘ç»œé€šè®¯åŠŸèƒ½VOIPæ˜¯Appleæä¾›ç»™å¼€å‘è€…çš„ç½‘ç»œç”µè¯åŠŸèƒ½æ¥å£ã€‚ç®€å•æ¥è¯´ï¼Œå…¶å¯ä»¥è®©ä½ çš„åº”ç”¨ç¨‹åºåœ¨å®Œå…¨æ€æ­»çš„æƒ…å†µä¸‹è¢«æœåŠ¡ç«¯å”¤é†’ã€‚CallKitæ˜¯iOS10å¼•å…¥çš„æ–°æ¡†æ¶ï¼Œä½¿ç”¨å®ƒå¯ä»¥è®©ä½ çš„åº”ç”¨ç¨‹åºè°ƒç”¨ç³»ç»Ÿçš„é€šè¯å’Œé€šè¯è®°å½•ç•Œé¢ã€‚è¯•æƒ³ä¸€ä¸‹ï¼Œç”¨æˆ·å¯ä»¥åœ¨é”å±ï¼Œåº”ç”¨è¢«æ€æ­»ï¼Œåº”ç”¨åœ¨åå°ç­‰æƒ…å†µä¸‹æ”¶åˆ°é€šè®¯è¯·æ±‚å¹¶ä¸”å¼¹å‡ºç³»ç»Ÿçš„é€šè¯ç•Œé¢è¿›è¡Œäº¤äº’æ˜¯å¤šä¹ˆé…·çš„ä¸€ä»¶äº‹ã€‚ ä¸€ã€åˆ›å»ºVOIPæ¨é€è¯ä¹¦VOIPè¯´æ˜¯ä¸€ç§ç½‘ç»œç”µè¯æœåŠ¡ï¼Œå…¶å®è´¨æ˜¯ä¸€ç§ç‰¹æ®Šçš„é•¿è¿æ¥ï¼Œä½¿ç”¨å®ƒæ¯ä¸ªç½‘ç»œç”µè¯ç±»APPä¸éœ€è¦è‡ªå·±å•ç‹¬è¿›è¡Œä¿æ´»ç»´æŠ¤ï¼Œåœ¨è¿›è¡Œé€šè¯è¯·æ±‚æ—¶ï¼Œåªéœ€è¦å‘é€ä¸€æ¡VOIPæ¨é€ï¼ŒVOIPæ¨é€ä¼šå°†åº”ç”¨ç¨‹åºæ‹‰èµ·ï¼Œä¹‹åç”±åº”ç”¨ç¨‹åºå¤„ç†é€šè®¯é€»è¾‘ã€‚VOIPä¹Ÿæ˜¯Pushçš„ä¸€ç§ï¼Œåªæ˜¯å…¶æ˜¯ä¸€ç§ç‰¹æ®Šçš„Pushï¼Œæ™®é€šçš„Pushå½“åº”ç”¨è¢«æ€æ­»åå¯ä»¥æ”¶åˆ°ï¼Œä½†æ˜¯ç”¨æˆ·ç‚¹å‡»Pushæ¶ˆæ¯å‰åº”ç”¨ç¨‹åºæ˜¯ä¸ä¼šè¢«æ¿€æ´»çš„ï¼ŒVOIPåˆ™ä¸ç„¶ï¼Œå¯ä»¥ç›´æ¥æ¿€æ´»åº”ç”¨ã€‚ VOIPæ¨é€è¯ä¹¦çš„åˆ›å»ºæ–¹å¼ä¸æ™®é€šæ¨é€è¯ä¹¦çš„åˆ›å»ºæ–¹å¼åŸºæœ¬ä¸€è‡´ï¼Œé¦–å…ˆéœ€è¦ç”ŸæˆcertSigningRequestæ–‡ä»¶ï¼Œæ‰“å¼€é’¥åŒ™ä¸²åº”ç”¨ï¼š åœ¨è¯ä¹¦åŠ©ç†æ é€‰æ‹©ä»è¯ä¹¦é¢å‘æœºæ„ç”³è¯·è¯ä¹¦ï¼š å¡«å†™ç›¸å…³èµ„æ–™åï¼Œå°†ç”Ÿæˆçš„æ–‡ä»¶ä¿å­˜ï¼š åœ¨Appleå¼€å‘è€…ä¸­å¿ƒåˆ›å»ºæ–°çš„è¯ä¹¦ï¼Œè¯ä¹¦ç±»å‹é€‰æ‹©ç”Ÿäº§ç¯å¢ƒçš„VOIPæœåŠ¡è¯ä¹¦ï¼š éœ€è¦æ³¨æ„ï¼Œæ™®é€šçš„æ¨é€åˆ†å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒï¼ŒVOIPè¯ä¹¦ä¸è¿›è¡ŒåŒºåˆ†ï¼Œç”Ÿäº§ç¯å¢ƒå’Œå¼€å‘ç¯å¢ƒæ˜¯é€šç”¨çš„ã€‚ä¹‹åé€‰æ‹©ä¸€ä¸ªAppIDå¹¶ä¸”ä¸Šä¼ å‰é¢ç”Ÿæˆçš„certSigningRequestæ–‡ä»¶æ¥å®ŒæˆVOIPè¯ä¹¦çš„åˆ›å»ºã€‚ åˆ›å»ºå®Œæˆåï¼Œåœ¨è¯ä¹¦åˆ—è¡¨å¯ä»¥çœ‹åˆ°å¤šäº†ä¸€ä¸ªVOIPæœåŠ¡è¯ä¹¦ï¼Œå¯ä»¥åŠ è½½æ­¤è¯ä¹¦è¿›è¡ŒVOIPæ¨é€ã€‚ äºŒã€PushKitè¯¦ææˆ‘ä»¬çŸ¥é“ï¼Œå®¢æˆ·ç«¯è‹¥æƒ³è¦æ¥æ”¶æ™®é€šçš„Pushæ¶ˆæ¯ï¼Œæ˜¯éœ€è¦æ³¨å†ŒTokenï¼Œé€šè¿‡Tokenæ¥è¿›è¡Œä¸ªæ¨çš„ã€‚VOIPæ¨é€ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯è¿™ç±»æ¨é€éœ€è¦ä½¿ç”¨PushKitæ¡†æ¶ã€‚ é¦–å…ˆéœ€è¦ç”¨åˆ°PKPushRegisteyç±»ï¼Œè¿™ä¸ªç±»è¿›è¡Œæ¨é€çš„ç›¸å…³é…ç½®å’ŒTokençš„ç”³è¯·ï¼š 12345678910111213141516@interface PKPushRegistry : NSObject//ä»£ç†å¯¹è±¡@property (readwrite,weak,nullable) id&lt;PKPushRegistryDelegate&gt; delegate;//ç›®æ ‡æ¨é€ç±»å‹/*PK_EXPORT PKPushType const PKPushTypeVoIP NS_AVAILABLE_IOS(8_0);//VOIPæ¨é€PK_EXPORT PKPushType const PKPushTypeComplication NS_AVAILABLE_IOS(9_0);//Watchæ›´æ–°PK_EXPORT PKPushType const PKPushTypeFileProvider NS_AVAILABLE_IOS(11_0);//æ–‡ä»¶ä¼ è¾“*/@property (readwrite,copy,nullable) NSSet&lt;PKPushType&gt; *desiredPushTypes;//è·å–æœ¬åœ°ç¼“å­˜çš„Token ç”³è¯·Tokenæ‰§è¡Œå›è°ƒå è¿™ä¸ªæ–¹æ³•å¯ä»¥ç›´æ¥è·å–ç¼“å­˜- (nullable NSData *)pushTokenForType:(PKPushType)type;//åˆå§‹åŒ–ï¼Œå¹¶è®¾ç½®å·¥ä½œçº¿ç¨‹- (instancetype)initWithQueue:(nullable dispatch_queue_t)queue NS_DESIGNATED_INITIALIZER;- (instancetype)init NS_UNAVAILABLE;@end PKPushRegistryDelegateç›¸å…³å‡½æ•°æ„ä¹‰å¦‚ä¸‹ï¼š 123456789101112131415161718//ç”³è¯·Tokenæ›´æ–°åå›è°ƒ/*PKPushCredentialsæ˜¯è¯ä¹¦å¯¹è±¡ï¼Œå…¶ä¸­å±æ€§å¦‚ä¸‹ï¼š@property (readonly,copy) PKPushType type;//æ¨é€ç±»å‹@property (readonly,copy) NSData *token; //Token*/- (void)pushRegistry:(PKPushRegistry *)registry didUpdatePushCredentials:(PKPushCredentials *)pushCredentials forType:(PKPushType)type;//æ”¶åˆ°æ¨é€åæ‰§è¡Œçš„å›è°ƒ/*PKPushPayloadä¸ºæ¨é€ä¿¡æ¯ å…¶ä¸­å±æ€§å¦‚ä¸‹ï¼š@property (readonly,copy) PKPushType type; //æ¨é€ç±»å‹@property (readonly,copy) NSDictionary *dictionaryPayload; //æœåŠ¡ç«¯å‘æ¥çš„ä¿¡æ¯*/- (void)pushRegistry:(PKPushRegistry *)registry didReceiveIncomingPushWithPayload:(PKPushPayload *)payload forType:(PKPushType)type NS_DEPRECATED_IOS(8_0, 11_0);//ä½œç”¨åŒä¸Šï¼Œæœ€åçš„blockéœ€è¦åœ¨é€»è¾‘å¤„ç†å®Œæˆåä¸»åŠ¨å›è°ƒ- (void)pushRegistry:(PKPushRegistry *)registry didReceiveIncomingPushWithPayload:(PKPushPayload *)payload forType:(PKPushType)type withCompletionHandler:(void(^)(void))completion NS_AVAILABLE_IOS(11_0);//Tokenå¤±æ•ˆçš„å›è°ƒ- (void)pushRegistry:(PKPushRegistry *)registry didInvalidatePushTokenForType:(PKPushType)type; å¦‚æœé…ç½®æˆåŠŸï¼Œåœ¨æ”¶åˆ°VOIPæ¨é€æ—¶ï¼Œæ— è®ºåº”ç”¨ç¨‹åºæ˜¯å¦æ´»è·ƒï¼Œéƒ½ä¼šæ‰§è¡Œä»£ç†å‡½æ•°ï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥åœ¨å…¶ä¸­è¿›è¡Œé€»è¾‘å¤„ç†ã€‚ ä¸‰ã€å…³äºCallKitæ¡†æ¶CallKitæ¡†æ¶æ˜¯iOS10åç³»ç»Ÿæä¾›çš„ä¸€å¥—ç½‘ç»œç”µè¯UIå’Œäº¤äº’ç›¸å…³æ¥å£ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥è°ƒç”¨ç³»ç»Ÿçš„ç”µè¯ç•Œé¢æ¥è¿›è¡Œé€»è¾‘ä¼ é€’ã€‚ä¸‹å›¾æ¯”è¾ƒå½¢è±¡çš„è¡¨è¾¾äº†åº”ç”¨ç¨‹åºä¸CallKitçš„å…³ç³»ï¼š ä»¥æ”¶åˆ°ç½‘ç»œç”µè¯ä¸ºä¾‹ï¼Œå¦‚æœåº”ç”¨ç¨‹åºåœ¨å‰å°ï¼Œå®¢æˆ·ç«¯å¯ä»¥ç›´æ¥å¤„ç†é€šè®¯é€»è¾‘ï¼Œå¦‚æœåº”ç”¨ç¨‹åºä¸åœ¨å‰å°ï¼ŒæœåŠ¡ç«¯å¯ä»¥å‘é€ä¸€æ¡VOIPæ¨é€å”¤é†’APPï¼Œä¹‹åAPPé€šçŸ¥CallKitæ¡†æ¶æ¥å”¤èµ·ç³»ç»Ÿçš„é€šè®¯ç•Œé¢ã€‚CXProviderç±»ä¸»è¦è´Ÿè´£ç³»ç»ŸæœåŠ¡äºAPPä¹‹é—´çš„äº¤äº’ã€‚ä¾‹å¦‚å¯ä»¥é€šè¿‡å®ƒæ¥æ›´æ–°é€šè¯ç•Œé¢ï¼Œæ˜¾ç¤ºé€šè¯çš„æ¥è‡ªæ–¹ï¼Œå½“ç”¨æˆ·ç‚¹å‡»é€šè¯ç•Œé¢çš„æŸäº›æŒ‰é’®åï¼Œä¹Ÿé€šè¿‡å®ƒæ¥é€šçŸ¥APPåšé€»è¾‘å¤„ç†ã€‚ éœ€è¦æ³¨æ„ï¼Œä¸Šå›¾åœ¨CallKitå’ŒSystemä¹‹é—´æœ‰ä¸¤ä¸ªåŒå‘çš„ç™½è‰²ç®­å¤´ï¼Œè¿™æè¿°äº†CallKitå’Œç³»ç»Ÿäº¤äº’çš„å››ä¸ªæ–¹å‘ã€‚ é¦–å…ˆï¼ŒAppæƒ³è¦å’Œç³»ç»Ÿäº¤äº’ï¼Œä¾‹å¦‚æ¥æ”¶åˆ°VOIPé€šçŸ¥åå¼¹å‡ºé€šè¯ç•Œé¢ï¼Œéœ€è¦ä½¿ç”¨CXProvideré€šè¿‡CXCallUpdateæ¥è¿›è¡Œæ§åˆ¶ã€‚å¦‚ä¸‹å›¾ï¼š ä¹‹åç³»ç»Ÿä¼šå°†ä¸€äº›ç”¨æˆ·æ“ä½œé€šè¿‡CSActionä¼ é€’ä¼šAPPï¼Œå¦‚ä¸‹ï¼š APPä¸­è¿›è¡Œçš„æ“ä½œå¦‚æœéœ€è¦é€šçŸ¥ç³»ç»Ÿï¼Œéœ€è¦ä½¿ç”¨CXCallControlleré€šè¿‡CXTransactionä¼ é€’ã€‚ä¾‹å¦‚Appå†…çš„é€šè®¯éœ€è¦æ·»åŠ åˆ°ç³»ç»Ÿçš„å†å²é€šè¯åˆ—è¡¨ã€‚å¦‚ä¸‹ï¼š 1.å…ˆæ¥çœ‹CXProviderç±»CXProviderç±»ç”¨æ¥å¯¹ç³»ç»Ÿé€šè¯ç•Œé¢è¿›è¡Œä¸€äº›é…ç½®æ“ä½œï¼Œå¹¶å¤„ç†å›è°ƒé€»è¾‘ï¼Œè§£æå¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536//åˆå§‹åŒ–æ–¹æ³• ä½¿ç”¨CXProviderConfigurationæ¥è¿›è¡Œé…ç½® åé¢ä¼šä»‹ç»- (instancetype)initWithConfiguration:(CXProviderConfiguration *)configuration NS_DESIGNATED_INITIALIZER;- (instancetype)init NS_UNAVAILABLE;//è®¾ç½®ä»£ç†ä¸ä»£ç†å‡½æ•°æ‰€å·¥ä½œçš„çº¿ç¨‹- (void)setDelegate:(nullable id&lt;CXProviderDelegate&gt;)delegate queue:(nullable dispatch_queue_t)queue;//å‘ç³»ç»Ÿå‘èµ·ä¸€ä¸ªæ–°çš„é€šè¯è¯·æ±‚/*UUIDä¸ºæ­¤é€šè¯è¯·æ±‚çš„æ ‡è¯† å¯ä»¥ä½¿ç”¨å®ƒæ¥å…³é—­é€šè¯updateè®¾ç½®ç•Œé¢çš„æ›´æ–°å‚æ•°*/- (void)reportNewIncomingCallWithUUID:(NSUUID *)UUID update:(CXCallUpdate *)update completion:(void (^)(NSError *_Nullable error))completion;//ç»“æŸæŸä¸ªé€šè¯ ä½¿ç”¨ä¸Šé¢çš„UUIDä½œä¸ºæ ‡è¯†/*//é€šè¯ç»“æŸçš„åŸå› è®¾ç½®typedef NS_ENUM(NSInteger, CXCallEndedReason) &#123; CXCallEndedReasonFailed = 1, // é€šè¯æœåŠ¡å¤±è´¥ CXCallEndedReasonRemoteEnded = 2, // å¯¹æ–¹æŒ‚æ–­ CXCallEndedReasonUnanswered = 3, // è¶…æ—¶ å¯¹æ–¹ä¸ºæ¥å¬ CXCallEndedReasonAnsweredElsewhere = 4, // é€šè¯åœ¨å…¶ä»–è®¾å¤‡æ¥å¬ CXCallEndedReasonDeclinedElsewhere = 5, // é€šè¯åœ¨å…¶ä»–è®¾å¤‡æ‹’ç»&#125; API_AVAILABLE(ios(10.0));*/- (void)reportCallWithUUID:(NSUUID *)UUID endedAtDate:(nullable NSDate *)dateEnded reason:(CXCallEndedReason)endedReason;//æ›´æ–°é€šè¯å¯¹æ–¹çš„ä¿¡æ¯- (void)reportCallWithUUID:(NSUUID *)UUID updated:(CXCallUpdate *)update;//è°ƒç”¨è¿™ä¸ªå‡½æ•°æ¥è¿›è¡Œé€šè¯å‘¼å‡ºå¼€å§‹- (void)reportOutgoingCallWithUUID:(NSUUID *)UUID startedConnectingAtDate:(nullable NSDate *)dateStartedConnecting;//è°ƒç”¨è¿™ä¸ªå‡½æ•°æ¥è¿›è¡Œé€šè¯å‘¼å‡ºè¿æ¥å®Œæˆ- (void)reportOutgoingCallWithUUID:(NSUUID *)UUID connectedAtDate:(nullable NSDate *)dateConnected;//é…ç½®å¯¹è±¡@property (nonatomic, readwrite, copy) CXProviderConfiguration *configuration;//è°ƒç”¨æ­¤å‡½æ•°æ¥å°†é€šè¯å¤±æ•ˆ- (void)invalidate;//æ‰€æœ‰æœªå®Œæˆçš„äº‹ç‰©@property (nonatomic, readonly, copy) NSArray&lt;CXTransaction *&gt; *pendingTransactions;- (NSArray&lt;__kindof CXCallAction *&gt; *)pendingCallActionsOfClass:(Class)callActionClass withCallUUID:(NSUUID *)callUUID; 2.åœ¨çœ‹CXProviderConfigurationç±»è¿™ä¸ªç±»ç”¨æ¥è¿›è¡ŒProviderçš„é…ç½®ï¼Œä¾‹å¦‚è®¾ç½®é€šè®¯æœåŠ¡åç§°ï¼Œé“ƒå£°ï¼Œå›¾æ ‡ï¼Œæ˜¯å¦æ”¯æŒç»„ç­‰ã€‚è§£æå¦‚ä¸‹ï¼š 12345678910111213141516//è®¾ç½®æœåŠ¡åç§°@property (nonatomic, readonly, copy) NSString *localizedName;//è®¾ç½®é“ƒå£° èµ„æºå¿…é¡»åœ¨ appçš„ bundleé‡Œ@property (nonatomic, strong, nullable) NSString *ringtoneSound;//è®¾ç½®åº”ç”¨å›¾æ ‡@property (nonatomic, copy, nullable) NSData *iconTemplateImageData;//è®¾ç½®æœ€å¤§æ”¯æŒçš„ç»„æ•° é»˜è®¤ä¸º2@property (nonatomic) NSUInteger maximumCallGroups;//è®¾ç½®æœ€å¤§çš„æ¯ç»„äººæ•° é»˜è®¤ä¸º5@property (nonatomic) NSUInteger maximumCallsPerCallGroup;//è®¾ç½®æ˜¯å¦å°†é€šè¯è®°å½•ä¿å­˜è¿›æœ€è¿‘é€šè¯åˆ—è¡¨@property (nonatomic) BOOL includesCallsInRecents;//è®¾ç½®æ˜¯å¦æ”¯æŒè§†é¢‘é€šè¯@property (nonatomic) BOOL supportsVideo;//è®¾ç½®æ”¯æŒçš„æ“ä½œç±»å‹@property (nonatomic, copy) NSSet&lt;NSNumber *&gt; *supportedHandleTypes; å½“Appæ¥æ”¶åˆ°æ¥ç”µVOIPé€šçŸ¥æ—¶ï¼Œå¯ä»¥ä½¿ç”¨CXCallUpdateæ¥æ›´æ–°çŠ¶æ€å”¤å‡ºé€šè¯ç•Œé¢ã€‚ 3.CXCallUpdateç±»1234567891011121314//è¿œç¨‹æ“ä½œå¯¹è±¡ å¦‚æœæ˜¯æ¥æ”¶æ–¹ åˆ™æ­¤ä¸ºå‘¼å«æ–¹ å¦‚æœæ˜¯å‘¼å«æ–¹ åˆ™æ­¤ä¸ºæ¥æ”¶æ–¹@property (nonatomic, copy, nullable) CXHandle *remoteHandle;//åç§°@property (nonatomic, copy, nullable) NSString *localizedCallerName;//æ˜¯å¦æ”¯æŒæš‚æ—¶æŒ‚èµ·@property (nonatomic) BOOL supportsHolding;//æ˜¯å¦æ”¯æŒç»„@property (nonatomic) BOOL supportsGrouping;//æ˜¯å¦æ”¯æŒéç»„é€šè¯@property (nonatomic) BOOL supportsUngrouping;//æ˜¯å¦æ”¯æŒDTMF@property (nonatomic) BOOL supportsDTMF;//æ˜¯å¦åŒ…å«è§†é¢‘@property (nonatomic) BOOL hasVideo; CXHandleä¸­æ¥å®šä¹‰æ“ä½œçš„ç±»å‹ï¼Œè§£æå¦‚ä¸‹ï¼š 12345678910111213//ç±»å‹/*typedef NS_ENUM(NSInteger, CXHandleType) &#123; CXHandleTypeGeneric = 1,//é€šç”¨ CXHandleTypePhoneNumber = 2,//ç”µè¯ CXHandleTypeEmailAddress = 3,//é‚®ç®±åœ°å€&#125; API_AVAILABLE(ios(10.0));*/@property (nonatomic, readonly) CXHandleType type;//å€¼@property (nonatomic, readonly, copy) NSString *value;- (instancetype)initWithType:(CXHandleType)type value:(NSString *)value NS_DESIGNATED_INITIALIZER; ä¸‹é¢ç»™å‡ºäº†ç®€å•çš„å½“è¢«å«æ”¶åˆ°VOIPåè°ƒèµ·é€šè¯ç•Œé¢çš„ä»£ç ï¼š 1234567891011CXCallUpdate * callUpdate = [[CXCallUpdate alloc]init];callUpdate.supportsGrouping = YES;callUpdate.supportsDTMF = YES;callUpdate.hasVideo = YES;callUpdate.supportsHolding = YES;[callUpdate setLocalizedCallerName:nickName];CXHandle * handle = [[CXHandle alloc]initWithType:CXHandleTypePhoneNumber value:from];callUpdate.remoteHandle = handle; [[self shareInstance].callProvider reportNewIncomingCallWithUUID:[self shareInstance].uuid update:callUpdate completion:^(NSError * _Nullable error) &#123; LOG(@\"åŠèµ·ç•Œé¢\");&#125;]; é”å±å’Œåº”ç”¨ç¨‹åºåœ¨åå°çš„æ•ˆæœåˆ†åˆ«å¦‚ä¸‹æ‰€ç¤ºï¼š 4.CXProviderDelegateç›¸å…³å‡½æ•°è§£æCXProviderDelegateä¸­çš„ç›¸å…³å‡½æ•°ç”¨æ¥å¤„ç†ç³»ç»Ÿé€šè¯ç•Œé¢çš„æŸäº›æ“ä½œå›è°ƒç»™åº”ç”¨ç¨‹åºã€‚ 123456789101112131415161718192021222324252627//å½“æ¥æ”¶åˆ°å‘¼å«é‡ç½®æ—¶ è°ƒç”¨çš„å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å¿…é¡»è¢«å®ç°ï¼Œå…¶ä¸éœ€åšä»»ä½•é€»è¾‘ï¼Œåªç”¨æ¥é‡ç½®çŠ¶æ€- (void)providerDidReset:(CXProvider *)provider;//å‘¼å«å¼€å§‹æ—¶å›è°ƒ - (void)providerDidBegin:(CXProvider *)provider;//éŸ³é¢‘ä¼šè¯æ¿€æ´»çŠ¶æ€çš„å›è°ƒ- (void)provider:(CXProvider *)provider didActivateAudioSession:(AVAudioSession *)audioSession;//éŸ³é¢‘ä¼šè¯åœç”¨çš„å›è°ƒ- (void)provider:(CXProvider *)provider didDeactivateAudioSession:(AVAudioSession *)audioSession;//è¡Œä¸ºè¶…æ—¶çš„å›è°ƒ - (void)provider:(CXProvider *)provider timedOutPerformingAction:(CXAction *)action;//æœ‰äº‹åŠ¡è¢«æäº¤æ—¶è°ƒç”¨ //å¦‚æœè¿”å›YES åˆ™è¡¨ç¤ºäº‹åŠ¡è¢«æ•è·å¤„ç† åé¢çš„å›è°ƒéƒ½ä¸ä¼šè°ƒç”¨ å¦‚æœè¿”å›NO åˆ™è¡¨ç¤ºäº‹åŠ¡ä¸è¢«æ•è·ï¼Œä¼šå›è°ƒåé¢çš„å‡½æ•°- (BOOL)provider:(CXProvider *)provider executeTransaction:(CXTransaction *)transaction;//ç‚¹å‡»å¼€å§‹æŒ‰é’®çš„å›è°ƒ- (void)provider:(CXProvider *)provider performStartCallAction:(CXStartCallAction *)action;//ç‚¹å‡»æ¥å¬æŒ‰é’®çš„å›è°ƒ- (void)provider:(CXProvider *)provider performAnswerCallAction:(CXAnswerCallAction *)action;//ç‚¹å‡»ç»“æŸæŒ‰é’®çš„å›è°ƒ- (void)provider:(CXProvider *)provider performEndCallAction:(CXEndCallAction *)action;//ç‚¹å‡»ä¿æŒé€šè¯æŒ‰é’®çš„å›è°ƒ- (void)provider:(CXProvider *)provider performSetHeldCallAction:(CXSetHeldCallAction *)action;//ç‚¹å‡»é™éŸ³æŒ‰é’®çš„å›è°ƒ- (void)provider:(CXProvider *)provider performSetMutedCallAction:(CXSetMutedCallAction *)action;//ç‚¹å‡»ç»„æŒ‰é’®çš„å›è°ƒ- (void)provider:(CXProvider *)provider performSetGroupCallAction:(CXSetGroupCallAction *)action;//DTMFåŠŸèƒ½å›è°ƒ- (void)provider:(CXProvider *)provider performPlayDTMFCallAction:(CXPlayDTMFCallAction *)action; éœ€è¦æ³¨æ„ï¼Œä¸Šé¢çš„æœ€åå‡ ä¸ªå›è°ƒä¸­CXStartCallActionéƒ½ä¼šæä¾›ä¸€ä¸ªfullfillçš„å‡½æ•°ï¼Œå½“å¤„ç†å®Œæˆå›è°ƒé€»è¾‘åï¼Œå¼€å‘è€…éœ€è¦æ‰‹åŠ¨è°ƒç”¨æ­¤å‡½æ•°æ¥é€šçŸ¥ç³»ç»Ÿã€‚åŒæ ·ï¼Œå…¶ä¸­è¿˜æœ‰ä¸€ä¸ªfailå’Œtimeoutå‡½æ•°ï¼Œè°ƒç”¨å®ƒè¦é€šçŸ¥ç³»ç»Ÿæ­¤è¡Œä¸ºæ‰§è¡Œå¤±è´¥å’Œè¶…æ—¶ã€‚ 5.CXCallControllerè§£æå½“ç”¨æˆ·åœ¨åº”ç”¨ç¨‹åºå†…éƒ¨è¿›è¡Œçš„é€šè®¯æ“ä½œæ—¶ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªç±»æ¥é€šçŸ¥ç³»ç»Ÿã€‚ 12345678910//åˆå§‹åŒ–æ–¹æ³•- (instancetype)init;- (instancetype)initWithQueue:(dispatch_queue_t)queue;//é€šè®¯ç›‘å¬@property (nonatomic, readonly, strong) CXCallObserver *callObserver;//å‘èµ·ä¸€ä¸ªäº‹åŠ¡è¯·æ±‚ CXProviderä¹‹åä¼šæ¥æ”¶åˆ°è¯·æ±‚ è¿›è¡Œé€»è¾‘- (void)requestTransaction:(CXTransaction *)transaction completion:(void (^)(NSError *_Nullable error))completion;//é€šè¿‡è¡Œä¸ºå‘èµ·äº‹åŠ¡- (void)requestTransactionWithActions:(NSArray&lt;CXAction *&gt; *)actions completion:(void (^)(NSError *_Nullable error))completion API_AVAILABLE(ios(11.0));- (void)requestTransactionWithAction:(CXAction *)action completion:(void (^)(NSError *_Nullable error))completion API_AVAILABLE(ios(11.0)); 6.CXTransactionç±»CXTransactionæ˜¯å°è£…äº†è¡Œä¸ºçš„äº‹åŠ¡ã€‚ 1234567891011//å”¯ä¸€ ID@property (nonatomic, readonly, copy) NSUUID *UUID;//è¡Œä¸ºå®Œæˆåçš„å›è°ƒ@property (nonatomic, readonly, assign, getter=isComplete) BOOL complete;//è¡Œä¸ºæ•°ç»„@property (nonatomic, readonly, copy) NSArray&lt;__kindof CXAction *&gt; *actions;//åˆå§‹åŒ–å‡½æ•°- (instancetype)initWithActions:(NSArray&lt;CXAction *&gt; *)actions;- (instancetype)initWithAction:(CXAction *)action;//æ·»åŠ è¡Œä¸º- (void)addAction:(CXAction *)action; å››ã€è¿›è¡Œæ¥ç”µæ‹¦æˆªä¸å·ç è¯†åˆ«ä¸Šé¢æˆ‘ä»¬ä»‹ç»äº†ä½¿ç”¨CallKitæ¡†æ¶æ¥å®ç°çš„é€šè®¯åŠŸèƒ½ï¼Œæœ‰é€šè®¯åŠŸèƒ½å°±éš¾å…éœ€è¦è¿›è¡Œè”ç³»äººè¯†åˆ«ä¸é»‘åå•ã€‚CallKitæ¡†æ¶ä¸­è¿˜æœ‰ä¸€éƒ¨åˆ†å†…å®¹å¯ä»¥ç»“åˆCall Directory Extensionæ¥å®ç°å·ç æ‹¦æˆªä¸è¯†åˆ«ã€‚ é¦–å…ˆåˆ›å»ºä¸€ä¸ªæ‰©å±•Targetï¼Œé€‰æ‹©Call Directory Extensionï¼š åˆ›å»ºå¥½Targetå·¥ç¨‹åï¼Œå…¶å®éœ€è¦çš„æ ¸å¿ƒä»£ç Xcodeå·²ç»å¸®æˆ‘ä»¬éƒ½ç”Ÿæˆã€‚ ç¬¬ä¸€æ­¥ï¼Œéœ€è¦åœ¨ä¸»APPä¸­è¿›è¡Œå·ç æœåŠ¡çš„éªŒè¯å’Œæ›´æ–°ï¼Œ 1234567891011_manager = [[CXCallDirectoryManager alloc]init]; [_manager getEnabledStatusForExtensionWithIdentifier:@\"jaki.CallKitTest.Ex\" completionHandler:^(CXCallDirectoryEnabledStatus enabledStatus, NSError * _Nullable error) &#123; if (enabledStatus==CXCallDirectoryEnabledStatusEnabled) &#123; NSLog(@\"å…è®¸\"); &#125;else&#123; NSLog(@\"è¯·å¼€å¯\"); &#125; &#125;]; [_manager reloadExtensionWithIdentifier:@\"jaki.CallKitTest.Ex\" completionHandler:^(NSError * _Nullable error) &#123; NSLog(@\"åˆ·æ–°é…ç½®\"); &#125;]; é€šå¸¸æƒ…å†µä¸‹ï¼Œå½“ç”¨æˆ·åœ¨ä¸»APPä¸­è¿›è¡Œæ·»åŠ è”ç³»äººï¼Œç™»å½•ï¼Œåˆ‡æ¢è´¦æˆ·ç­‰æ“ä½œåï¼Œéœ€è¦é€šçŸ¥æ‰©å±•ç¨‹åºè¿›è¡Œå·ç åº“çš„æ›´æ–°ï¼Œå½“ç„¶ï¼Œä¸€èˆ¬åœ¨å·ç åº“æ›´æ–°æ—¶éœ€è¦ä»ä¸»APPä¼ é€’æ•°æ®ç»™æ‰©å±•ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡Groupæ¥å®ç°ï¼Œè¿™é‡Œä¸å†å±•å¼€ã€‚ å·¥ç¨‹è¿è¡Œåï¼Œä¼šåœ¨ç”¨æˆ·çš„â€œè®¾ç½®-&gt;ç”µè¯-&gt;æ¥ç”µç»„ç»‡ä¸èº«ä»½è¯†åˆ«â€é¡¹ç›®ä¸­çœ‹åˆ°æ‰©å±•ç¨‹åºï¼š å½“ç”¨æˆ·æ‰“å¼€æ­¤æœåŠ¡æˆ–è€…è°ƒç”¨ä¸Šé¢çš„reloadExtensionæ—¶ï¼Œä¼šä»æ‰§è¡Œæ‰©å±•ç¨‹åºçš„ç›¸å…³æ–¹æ³•æ¥é‡æ–°åŠ è½½å·ç åº“ã€‚éœ€è¦æ³¨æ„ï¼ŒreloadExtensionå‡½æ•°ä¸­çš„idå‚æ•°ä¸ºæ‰©å±•é¡¹ç›®çš„bundleIDï¼Œä¸æ˜¯ä¸»é¡¹ç›®çš„ã€‚ åœ¨æ‰©å±•å·¥ç¨‹çš„info.plistæ–‡ä»¶ä¸­ï¼Œé»˜è®¤é…ç½®å¥½äº†å¤„ç†æ¥ç”µçš„æ“ä½œç±»ï¼Œå¦‚æœè¦è‡ªå®šä¹‰ï¼Œéœ€è¦å¼€å‘è€…æ‰‹åŠ¨ä¿®æ”¹ï¼š é»˜è®¤çš„CallDirectoryHandlerç±»ä¸ºæ¥ç”µæ‹¦æˆªä¸èº«ä»½è¯†åˆ«çš„æ“ä½œç±»ï¼Œå…¶é›†æˆè‡ªCXCallDirectoryProviderç±»ï¼Œå½“æ”¶åˆ°åŠ è½½å·ç åº“çš„è¯·æ±‚æ—¶ï¼Œä¼šæ‰§è¡Œä¸‹é¢çš„å‡½æ•°ï¼š 123456789101112131415- (void)beginRequestWithExtensionContext:(CXCallDirectoryExtensionContext *)context &#123; context.delegate = self; //æ˜¯å¦æ”¯æŒå¢é‡æ›´æ–° if (context.isIncremental) &#123; [self addOrRemoveIncrementalBlockingPhoneNumbersToContext:context]; [self addOrRemoveIncrementalIdentificationPhoneNumbersToContext:context]; &#125; else &#123; [self addAllBlockingPhoneNumbersToContext:context]; [self addAllIdentificationPhoneNumbersToContext:context]; &#125; //å®Œæˆæ›´æ–°æ“ä½œ [context completeRequestWithCompletionHandler:nil];&#125; ä¸Šé¢æ˜¯Xcodeé»˜è®¤æä¾›çš„å®ç°ï¼Œååˆ†ä¼˜é›…ï¼Œåœ¨iOS11åï¼Œå·ç åº“çš„æ›´æ–°æ”¯æŒå¢é‡ï¼Œæ‰€ä»¥è¿™é‡Œè¿›è¡Œçš„åŒºåˆ†ã€‚ CXCallDirectoryExtensionContextæ˜¯ä¸€ä¸ªæ“ä½œä¸Šä¸‹æ–‡ï¼Œé€šè¿‡å®ƒå¯ä»¥åƒå·ç åº“ä¸­æ·»åŠ åˆ é™¤æ•°æ®ã€‚è§£æå¦‚ä¸‹ï¼š 12345678910111213141516//æ˜¯å¦æ”¯æŒå¢é‡æ›´æ–°@property (nonatomic, readonly, getter=isIncremental) BOOL incremental API_AVAILABLE(ios(11.0));//æ·»åŠ ä¸€ä¸ªé»‘åå•å·ç - (void)addBlockingEntryWithNextSequentialPhoneNumber:(CXCallDirectoryPhoneNumber)phoneNumber;//ç§»é™¤ä¸€ä¸ªé»‘åå•å·ç - (void)removeBlockingEntryWithPhoneNumber:(CXCallDirectoryPhoneNumber)phoneNumber API_AVAILABLE(ios(11.0));//ç§»é™¤æ‰€æœ‰çš„é»‘åå•å·ç - (void)removeAllBlockingEntries API_AVAILABLE(ios(11.0));//æ·»åŠ ä¸€ä¸ªèº«ä»½è¯†åˆ«- (void)addIdentificationEntryWithNextSequentialPhoneNumber:(CXCallDirectoryPhoneNumber)phoneNumber label:(NSString *)label;//ç§»é™¤ä¸€ä¸ªèº«ä»½è¯†åˆ«- (void)removeIdentificationEntryWithPhoneNumber:(CXCallDirectoryPhoneNumber)phoneNumber API_AVAILABLE(ios(11.0));//ç§»é™¤æ‰€æœ‰èº«ä»½è¯†åˆ«- (void)removeAllIdentificationEntries API_AVAILABLE(ios(11.0));//å®Œæˆæ“ä½œå éœ€è¦æ‰‹åŠ¨è°ƒç”¨æ­¤å‡½æ•°- (void)completeRequestWithCompletionHandler:(nullable void (^)(BOOL expired))completion; æ·»åŠ äº†é»‘åå•åï¼Œç”¨æˆ·å°†æ”¶ä¸åˆ°æ­¤å·ç çš„ç”µè¯ï¼ŒåŒæ ·ï¼Œè®¾ç½®äº†èº«ä»½è¯†åˆ«åï¼Œå½“ç”¨æˆ·æ’­å‡ºå‰ï¼Œä¼šæ˜¾ç¤ºè®¾ç½®çš„èº«ä»½ä¿¡æ¯(éœ€è¦æ³¨æ„ï¼Œå¤§é™†å·ç éœ€è¦å‰é¢å¸¦86)ï¼Œå¦‚ä¸‹ï¼š","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"Masonryæºç è§£æ","slug":"371Masonryæºç è§£æ","date":"2018-04-19T16:00:00.000Z","updated":"2021-07-15T08:41:29.301Z","comments":true,"path":"2018/04/20/371Masonryæºç è§£æ/","link":"","permalink":"http://huishao.cc/2018/04/20/371Masonryæºç è§£æ/","excerpt":"","text":"Masonryæºç è§£æMasonryçš„æ ¸å¿ƒä¾ç„¶æ˜¯ä½¿ç”¨åŸç”Ÿçš„NSLayoutConstraintç±»æ¥è¿›è¡Œæ·»åŠ çº¦æŸï¼Œé€šè¿‡ç»Ÿä¸€çš„å°è£…å’Œé“¾å¼å‡½æ•°å¼ç¼–ç¨‹çš„æ–¹å¼è®©å¼€å‘è€…æ·»åŠ çº¦æŸå¸ƒå±€æ›´åŠ æ–¹ä¾¿ã€‚ ä¸€ã€æ ¸å¿ƒçš„View+MASAdditionsç±»åˆ«è¿™ä¸ªç±»åˆ«æ˜¯Masonryä¸­ç”¨æ¥æ·»åŠ ï¼Œæ›´æ–°å’Œé‡ç½®çº¦æŸçš„æ ¸å¿ƒç±»åˆ«ã€‚å…¶ä¸­æä¾›äº†æˆ‘ä»¬æœ€å¸¸ç”¨çš„å¸ƒå±€å‡½æ•°ã€‚é¦–å…ˆä»ç±»åˆ«å‘½åä¸Šä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œæ­¤ç±»åˆ«æ‰©å±•çš„ç±»æ˜¯é€šè¿‡å®æ¥è®¾ç½®çš„ï¼š 1@interface MAS_VIEW (MASAdditions) MAS_VIEWå®åšåˆ°äº†å¹³å°å±è”½çš„ä½œç”¨ï¼Œåœ¨iOSä¸Šï¼Œå…¶ä¸ºUIViewï¼Œåœ¨MacOSä¸Šå…¶å®NSViewã€‚ MASAdditionsç±»åˆ«ä¸­å®šä¹‰äº†è®¸å¤šå¸ƒå±€å±æ€§ï¼Œä¾‹å¦‚ä¸Šï¼Œä¸‹ï¼Œå·¦ï¼Œå³è¾¹è·ï¼Œå®½åº¦é«˜åº¦ç­‰ç­‰ã€‚è¿™äº›å±æ€§è¢«æŠ½è±¡ä¸ºMASViewAttributeå¯¹è±¡ï¼Œå…³äºè¿™ä¸ªå¯¹è±¡ï¼Œåé¢ä¼šå…·ä½“ä»‹ç»ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738//å·¦@property (nonatomic, strong, readonly) MASViewAttribute *mas_left;//ä¸Š@property (nonatomic, strong, readonly) MASViewAttribute *mas_top;//å³@property (nonatomic, strong, readonly) MASViewAttribute *mas_right;//ä¸‹@property (nonatomic, strong, readonly) MASViewAttribute *mas_bottom;//å‰@property (nonatomic, strong, readonly) MASViewAttribute *mas_leading;//å@property (nonatomic, strong, readonly) MASViewAttribute *mas_trailing;//å®½@property (nonatomic, strong, readonly) MASViewAttribute *mas_width;//é«˜@property (nonatomic, strong, readonly) MASViewAttribute *mas_height;//æ°´å¹³ä¸­å¿ƒ@property (nonatomic, strong, readonly) MASViewAttribute *mas_centerX;//å‚ç›´ä¸­å¿ƒ@property (nonatomic, strong, readonly) MASViewAttribute *mas_centerY;//åŸºçº¿@property (nonatomic, strong, readonly) MASViewAttribute *mas_baseline;//è¿™ä¸ªæ˜¯ä¸€ä¸ªé“¾å¼ç¼–ç¨‹çš„é€šç”¨è½¬æ¢æ–¹æ³•ï¼Œä½¿ç”¨è¿™ä¸ªå±æ€§å°†ç³»ç»Ÿçš„NSLayoutAttributeè½¬æ¢æˆæŠ½è±¡çš„MASViewAttributeå¯¹è±¡@property (nonatomic, strong, readonly) MASViewAttribute *(^mas_attribute)(NSLayoutAttribute attr);//åŸºçº¿ç›¸å…³@property (nonatomic, strong, readonly) MASViewAttribute *mas_firstBaseline;@property (nonatomic, strong, readonly) MASViewAttribute *mas_lastBaseline;//å®‰å…¨åŒº ç›¸å…³@property (nonatomic, strong, readonly) MASViewAttribute *mas_safeAreaLayoutGuide API_AVAILABLE(ios(11.0),tvos(11.0));@property (nonatomic, strong, readonly) MASViewAttribute *mas_safeAreaLayoutGuideTop API_AVAILABLE(ios(11.0),tvos(11.0));@property (nonatomic, strong, readonly) MASViewAttribute *mas_safeAreaLayoutGuideBottom API_AVAILABLE(ios(11.0),tvos(11.0));@property (nonatomic, strong, readonly) MASViewAttribute *mas_safeAreaLayoutGuideLeft API_AVAILABLE(ios(11.0),tvos(11.0));@property (nonatomic, strong, readonly) MASViewAttribute *mas_safeAreaLayoutGuideRight API_AVAILABLE(ios(11.0),tvos(11.0));//å…³è”çš„keyå€¼@property (nonatomic, strong) id mas_key; ä¸‹é¢æ˜¯3ä¸ªæœ€å¸¸ä½¿ç”¨çš„å¸ƒå±€æ–¹æ³•ï¼š 123456//åˆ›å»ºçº¦æŸ- (NSArray *)mas_makeConstraints:(void(NS_NOESCAPE ^)(MASConstraintMaker *make))block;//æ›´æ–°çº¦æŸ- (NSArray *)mas_updateConstraints:(void(NS_NOESCAPE ^)(MASConstraintMaker *make))block;//é‡æ–°åˆ›å»ºçº¦æŸ- (NSArray *)mas_remakeConstraints:(void(NS_NOESCAPE ^)(MASConstraintMaker *make))block; è¿™3ä¸ªå‡½æ•°çš„å…·ä½“å®ç°åŸºæœ¬ä¸€è‡´ï¼Œå…¶æ ¸å¿ƒæµç¨‹éƒ½æ˜¯ï¼šå…³é—­è§†å›¾Autoresizingç‰¹æ€§-&gt;åˆ›å»ºçº¦æŸç”Ÿæˆå™¨-&gt;é…ç½®çº¦æŸç”Ÿæˆå™¨-&gt;å›è°ƒå¼€å‘è€…çº¦æŸè®¾ç½®-&gt;è¿›è¡Œçº¦æŸåŠ è½½ã€‚è¿™3ä¸ªå‡½æ•°ä¸åŒçš„åœ°æ–¹åªåœ¨é…ç½®çº¦æŸç”Ÿæˆå™¨éƒ¨åˆ†ï¼Œé…ç½®äº†updateExistingå‚æ•°ä¸ºYESï¼Œè¡¨ç¤ºè¦è¿›è¡Œå·²æœ‰çº¦æŸçš„æ›´æ–°ï¼Œé…ç½®äº†removeExistingä¸ºYESè¡¨ç¤ºè¦é‡æ–°åˆ›å»ºçº¦æŸã€‚çº¦æŸç”Ÿæˆå™¨è¢«æŠ½è±¡ä¸ºMASConstraintMakerå¯¹è±¡ï¼Œä¸‹é¢æ¥å…·ä½“çœ‹è¿™ä¸ªç±»ã€‚ äºŒã€MASConstraintMakerçº¦æŸç”Ÿæˆå™¨MASConstraintç±»ä¸»è¦ç”¨æ¥æ„å»ºçº¦æŸå¯¹è±¡ã€‚å…¶ä¸­è™½ç„¶å’ŒMASAdditionsæ‰©å±•ç±»ä¼¼ï¼Œä¹Ÿæ˜¯å®šä¹‰äº†çº¦æŸå±æ€§å¯¹è±¡ï¼Œä½†æ˜¯å…¶æ‰€æœ‰çš„Getæ–¹æ³•éƒ½è¢«é‡æ–°å®ç°äº†ï¼Œå½“æˆ‘ä»¬é€šè¿‡Getæ–¹æ³•è°ƒç”¨çº¦æŸå±æ€§æ—¶ï¼Œä¼šæ‰§è¡Œä¸‹é¢æ ¸å¿ƒå‡½æ•°ï¼š 123456789101112131415161718192021- (MASConstraint *)constraint:(MASConstraint *)constraint addConstraintWithLayoutAttribute:(NSLayoutAttribute)layoutAttribute &#123; //åˆ›å»ºå±æ€§ MASViewAttribute *viewAttribute = [[MASViewAttribute alloc] initWithView:self.view layoutAttribute:layoutAttribute]; //åˆ›å»ºçº¦æŸå¯¹è±¡ MASViewConstraint *newConstraint = [[MASViewConstraint alloc] initWithFirstViewAttribute:viewAttribute]; if ([constraint isKindOfClass:MASViewConstraint.class]) &#123; //è¿›è¡Œå¤åˆ //replace with composite constraint NSArray *children = @[constraint, newConstraint]; MASCompositeConstraint *compositeConstraint = [[MASCompositeConstraint alloc] initWithChildren:children]; compositeConstraint.delegate = self; [self constraint:constraint shouldBeReplacedWithConstraint:compositeConstraint]; return compositeConstraint; &#125; if (!constraint) &#123; newConstraint.delegate = self; [self.constraints addObject:newConstraint]; &#125; //å°†çº¦æŸå¯¹è±¡è¿”å› return newConstraint;&#125; ä¸Šé¢å‡½æ•°çš„è®¾è®¡å¯ä»¥å·§å¦™çš„å®ç°å¤åˆçº¦æŸï¼Œä¾‹å¦‚make.width.height.equalTo(@100)è¿™æ ·ä¸€æ¡çº¦æŸï¼Œå®é™…ä¸Šä»widthå¼€å§‹åé¢çš„å±æ€§éƒ½è¢«å¤åˆè¿›äº†MASCompositeConstraintå¯¹è±¡ã€‚çº¦æŸçš„å±æ€§åˆ›å»ºå‡ºæ¥åï¼Œéœ€è¦å¯¹å…¶è¿›è¡Œå€¼çš„è®¾ç½®ï¼Œä¸‹é¢æ¥çœ‹MASViewConstraintå¯¹è±¡ã€‚ ä¸‰ã€MASConstraintçº¦æŸå¯¹è±¡MASViewConstraintç±»ç»§æ‰¿è‡ªMASConstraintç±»ï¼ŒMASConstraintç±»è¿˜æœ‰ä¸€ä¸ªå­ç±»ä¸ºMASCompositeConstraintç±»ã€‚MASConstraintä¸­å®šä¹‰äº†åŸºç¡€çš„çº¦æŸå€¼è®¾ç½®æ–¹æ³•ï¼Œéƒ½æ˜¯é‡‡ç”¨blockå›è°ƒçš„æ–¹å¼ï¼Œå› æ­¤å¯ä»¥è¿›è¡Œé“¾å¼ç¼–ç¨‹ï¼š 123456789101112131415161718192021222324//ä½ç½®- (MASConstraint * (^)(MASEdgeInsets insets))insets;//å°ºå¯¸åç§»- (MASConstraint * (^)(CGSize offset))sizeOffset;//ä¸­å¿ƒä½ç½®åç§»- (MASConstraint * (^)(CGPoint offset))centerOffset;//æ¯”ä¾‹ *- (MASConstraint * (^)(CGFloat multiplier))multipliedBy;//æ¯”ä¾‹ /- (MASConstraint * (^)(CGFloat divider))dividedBy;//ä¼˜å…ˆçº§- (MASConstraint * (^)(MASLayoutPriority priority))priority;//ç›´æ¥è®¾ç½®ä¸ºä½ä¼˜å…ˆçº§- (MASConstraint * (^)(void))priorityLow;//ç›´æ¥è®¾ç½®ä¸ºä¸­ä¼˜å…ˆçº§- (MASConstraint * (^)(void))priorityMedium;//ç›´æ¥è®¾ç½®ä¸ºé«˜ä¼˜å…ˆçº§- (MASConstraint * (^)(void))priorityHigh;//è®¾ç½®ç»å¯¹ç­‰äº- (MASConstraint * (^)(id attr))equalTo;//å¤§äºç­‰äº- (MASConstraint * (^)(id attr))greaterThanOrEqualTo;//å°äºç­‰äº- (MASConstraint * (^)(id attr))lessThanOrEqualTo; é˜…è¯»è¿™ä¸ªå±æ€§çš„Getæ–¹æ³•ï¼Œä½ ä¼šå‘ç°ä»–ä»¬æœ€åéƒ½è¿”å›äº†å½“å‰å¯¹è±¡æœ¬èº«ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºé“¾å¼ç¼–ç¨‹æ‰€å‡†å¤‡ï¼ŒMASConstraintä¸­è¿˜æœ‰ä¸¤ä¸ªå±æ€§æ¯”è¾ƒæœ‰è¶£ï¼š 12- (MASConstraint *)with;- (MASConstraint *)and; è¿™ä¸¤ä¸ªå±æ€§æ²¡æœ‰å®é™…çš„ä½œç”¨ä¹Ÿæ²¡æœ‰ä»»ä½•å½±å“ï¼Œä»–ä»¬çš„å®ç°æ˜¯ç›´æ¥è¿”å›å½“å‰å¯¹è±¡ï¼Œå¢å¼ºä»£ç å¯è¯»æ€§ã€‚ MASConstraintç±»ä¸­çš„installå’Œuninstallå‡½æ•°æ˜¯æ ¸å¿ƒçš„çº¦æŸæ·»åŠ æ–¹æ³•ï¼Œå…¶ä¸­ä¼šè¿›è¡Œç³»ç»ŸåŸç”Ÿçº¦æŸå¯¹è±¡çš„è½¬æ¢æ·»åŠ æˆ–è€…åˆ é™¤æ“ä½œã€‚æ ¸å¿ƒçš„installå‡½æ•°è§£æå¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364- (void)install &#123; //å¦‚æœå·²ç»è¢«åŠ è½½ ç›´æ¥è¿”å› if (self.hasBeenInstalled) &#123; return; &#125; //å¦‚æœç³»ç»Ÿlayoutå¯¹è±¡å·²ç»åˆ›å»º ç›´æ¥æ·»åŠ ä¹‹å è¿”å› if ([self supportsActiveProperty] &amp;&amp; self.layoutConstraint) &#123; self.layoutConstraint.active = YES; [self.firstViewAttribute.view.mas_installedConstraints addObject:self]; return; &#125; //è·å–å¸ƒå±€çš„è§†å›¾ä¸å±æ€§ MAS_VIEW *firstLayoutItem = self.firstViewAttribute.item; NSLayoutAttribute firstLayoutAttribute = self.firstViewAttribute.layoutAttribute; MAS_VIEW *secondLayoutItem = self.secondViewAttribute.item; NSLayoutAttribute secondLayoutAttribute = self.secondViewAttribute.layoutAttribute; //å¦‚æœä¸æ˜¯å°ºå¯¸å¸ƒå±€å¹¶ä¸” ç›¸å¯¹è§†å›¾ä¸å­˜åœ¨ é»˜è®¤å¯¹çˆ¶è§†å›¾è¿›è¡Œç›¸å¯¹å¸ƒå±€ if (!self.firstViewAttribute.isSizeAttribute &amp;&amp; !self.secondViewAttribute) &#123; secondLayoutItem = self.firstViewAttribute.view.superview; secondLayoutAttribute = firstLayoutAttribute; &#125; //åˆ›å»ºå¸ƒå±€å¯¹è±¡ MASLayoutConstraint *layoutConstraint = [MASLayoutConstraint constraintWithItem:firstLayoutItem attribute:firstLayoutAttribute relatedBy:self.layoutRelation toItem:secondLayoutItem attribute:secondLayoutAttribute multiplier:self.layoutMultiplier constant:self.layoutConstant]; //è®¾ç½®keyå’Œä¼˜å…ˆçº§ layoutConstraint.priority = self.layoutPriority; layoutConstraint.mas_key = self.mas_key; //è®¾ç½®çº¦æŸå¯¹è±¡å¯¹ç”¨äºçš„è§†å›¾ if (self.secondViewAttribute.view) &#123; //è·å–å…±åŒçš„çˆ¶è§†å›¾ MAS_VIEW *closestCommonSuperview = [self.firstViewAttribute.view mas_closestCommonSuperview:self.secondViewAttribute.view]; NSAssert(closestCommonSuperview, @\"couldn't find a common superview for %@ and %@\", self.firstViewAttribute.view, self.secondViewAttribute.view); self.installedView = closestCommonSuperview; &#125; else if (self.firstViewAttribute.isSizeAttribute) &#123; self.installedView = self.firstViewAttribute.view; &#125; else &#123; self.installedView = self.firstViewAttribute.view.superview; &#125; MASLayoutConstraint *existingConstraint = nil; //æ›´æ–°çº¦æŸçš„æ“ä½œ if (self.updateExisting) &#123; existingConstraint = [self layoutConstraintSimilarTo:layoutConstraint]; &#125; if (existingConstraint) &#123; // just update the constant existingConstraint.constant = layoutConstraint.constant; self.layoutConstraint = existingConstraint; &#125; else &#123; //æ·»åŠ çº¦æŸ [self.installedView addConstraint:layoutConstraint]; self.layoutConstraint = layoutConstraint; [firstLayoutItem.mas_installedConstraints addObject:self]; &#125;&#125; å››ã€ä¸€ä¸ªå°æŠ€å·§Masonryä¸­çš„ä¸€ä¸ªå‡½æ•°å€¼å¾—æˆ‘ä»¬å­¦ä¹ ï¼Œå…¶ä½œç”¨æ˜¯å¯¹ä»»ä½•ç±»å‹çš„å€¼è¿›è¡Œä¸€å±‚å¯¹è±¡åŒ…è£…ï¼Œå‡½æ•°å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263//å€¼åŒ…è£…å®#define MASBoxValue(value) _MASBoxValue(@encode(__typeof__((value))), (value))static inline id _MASBoxValue(const char *type, ...) &#123; va_list v; va_start(v, type); id obj = nil; //è¿›è¡Œç±»å‹åˆ¤æ–­ ç»“æ„ä½“åŒ…è£…æˆNSValue åŸºæœ¬ç±»å‹åŒ…è£…æˆNSNumber if (strcmp(type, @encode(id)) == 0) &#123; id actual = va_arg(v, id); obj = actual; &#125; else if (strcmp(type, @encode(CGPoint)) == 0) &#123; CGPoint actual = (CGPoint)va_arg(v, CGPoint); obj = [NSValue value:&amp;actual withObjCType:type]; &#125; else if (strcmp(type, @encode(CGSize)) == 0) &#123; CGSize actual = (CGSize)va_arg(v, CGSize); obj = [NSValue value:&amp;actual withObjCType:type]; &#125; else if (strcmp(type, @encode(MASEdgeInsets)) == 0) &#123; MASEdgeInsets actual = (MASEdgeInsets)va_arg(v, MASEdgeInsets); obj = [NSValue value:&amp;actual withObjCType:type]; &#125; else if (strcmp(type, @encode(double)) == 0) &#123; double actual = (double)va_arg(v, double); obj = [NSNumber numberWithDouble:actual]; &#125; else if (strcmp(type, @encode(float)) == 0) &#123; float actual = (float)va_arg(v, double); obj = [NSNumber numberWithFloat:actual]; &#125; else if (strcmp(type, @encode(int)) == 0) &#123; int actual = (int)va_arg(v, int); obj = [NSNumber numberWithInt:actual]; &#125; else if (strcmp(type, @encode(long)) == 0) &#123; long actual = (long)va_arg(v, long); obj = [NSNumber numberWithLong:actual]; &#125; else if (strcmp(type, @encode(long long)) == 0) &#123; long long actual = (long long)va_arg(v, long long); obj = [NSNumber numberWithLongLong:actual]; &#125; else if (strcmp(type, @encode(short)) == 0) &#123; short actual = (short)va_arg(v, int); obj = [NSNumber numberWithShort:actual]; &#125; else if (strcmp(type, @encode(char)) == 0) &#123; char actual = (char)va_arg(v, int); obj = [NSNumber numberWithChar:actual]; &#125; else if (strcmp(type, @encode(bool)) == 0) &#123; bool actual = (bool)va_arg(v, int); obj = [NSNumber numberWithBool:actual]; &#125; else if (strcmp(type, @encode(unsigned char)) == 0) &#123; unsigned char actual = (unsigned char)va_arg(v, unsigned int); obj = [NSNumber numberWithUnsignedChar:actual]; &#125; else if (strcmp(type, @encode(unsigned int)) == 0) &#123; unsigned int actual = (unsigned int)va_arg(v, unsigned int); obj = [NSNumber numberWithUnsignedInt:actual]; &#125; else if (strcmp(type, @encode(unsigned long)) == 0) &#123; unsigned long actual = (unsigned long)va_arg(v, unsigned long); obj = [NSNumber numberWithUnsignedLong:actual]; &#125; else if (strcmp(type, @encode(unsigned long long)) == 0) &#123; unsigned long long actual = (unsigned long long)va_arg(v, unsigned long long); obj = [NSNumber numberWithUnsignedLongLong:actual]; &#125; else if (strcmp(type, @encode(unsigned short)) == 0) &#123; unsigned short actual = (unsigned short)va_arg(v, unsigned int); obj = [NSNumber numberWithUnsignedShort:actual]; &#125; va_end(v); return obj;&#125; å…¶ä¸­@encode()æ˜¯ä¸€ä¸ªç¼–è¯‘æ—¶ç‰¹æ€§ï¼Œå…¶å¯ä»¥å°†ä¼ å…¥çš„ç±»å‹è½¬æ¢ä¸ºæ ‡å‡†çš„OCç±»å‹å­—ç¬¦ä¸²ã€‚","categories":[{"name":"iOSç¬¬ä¸‰æ–¹åº“","slug":"iOSç¬¬ä¸‰æ–¹åº“","permalink":"http://huishao.cc/categories/iOSç¬¬ä¸‰æ–¹åº“/"}],"tags":[],"keywords":[{"name":"iOSç¬¬ä¸‰æ–¹åº“","slug":"iOSç¬¬ä¸‰æ–¹åº“","permalink":"http://huishao.cc/categories/iOSç¬¬ä¸‰æ–¹åº“/"}]},{"title":"HTML5ä¸­Canvaså…ƒç´ çš„ä½¿ç”¨æ€»ç»“","slug":"370HTML5ä¸­Canvaså…ƒç´ çš„ä½¿ç”¨æ€»ç»“","date":"2018-04-15T16:00:00.000Z","updated":"2021-07-15T08:39:04.870Z","comments":true,"path":"2018/04/16/370HTML5ä¸­Canvaså…ƒç´ çš„ä½¿ç”¨æ€»ç»“/","link":"","permalink":"http://huishao.cc/2018/04/16/370HTML5ä¸­Canvaså…ƒç´ çš„ä½¿ç”¨æ€»ç»“/","excerpt":"","text":"HTML5ä¸­Canvaså…ƒç´ çš„ä½¿ç”¨æ€»ç»“Canvasæä¾›äº†å¼€å‘è€…è‡ªå®šä¹‰ç»˜å›¾çš„æ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥å…¬å›½getContext()å‡½æ•°æ¥è·å–ç»˜å›¾ä¸Šä¸‹æ–‡è¿›è¡Œç»˜åˆ¶æ“ä½œï¼Œè¿™ä¸ªå‡½æ•°ä¸­å¯ä»¥ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼Œå…¶ä¸­ç¬¬1ä¸ªå‚æ•°è®¾ç½®ç»˜å›¾ä¸Šä¸‹æ–‡çš„ç±»å‹ï¼Œæ¯”è¾ƒå¸¸ç”¨çš„æ˜¯&quot;2d&quot;ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨&quot;webgl&quot;æ¥ä½¿ç”¨webOpenGLå®ç°3Dç»˜åˆ¶ã€‚æœ¬ç¯‡åšå®¢ä¸»è¦æ€»ç»“2dç»˜åˆ¶çš„ç›¸å…³æ–¹æ³•ã€‚ 1.è¿›è¡Œç®€å•çš„å›¾å½¢ç»˜åˆ¶ä½¿ç”¨Canvasè¿›è¡Œå¹³é¢å›¾å½¢ç»˜åˆ¶æ¯”è¾ƒç®€å•ã€‚ä¾‹å¦‚ä½¿ç”¨å¦‚ä¸‹å‡½æ•°åˆ™å¯ä»¥ç›´æ¥ç»˜åˆ¶ä¸€ä¸ªçŸ©å½¢åŒºåŸŸã€‚ 123var c = document.getElementById(\"canvas\");var context = c.getContext(\"2d\");context.strokeRect(20,20,100,100); å›¾å½¢æ•ˆæœå¦‚ä¸‹ï¼š ä¸strokeRectå¯¹åº”ï¼Œä½¿ç”¨fillRectå¯ä»¥ç»˜åˆ¶å¡«å……çŸ©å½¢ï¼Œä¾‹å¦‚ï¼š 123var c = document.getElementById(\"canvas\");var context = c.getContext(\"2d\");context.fillRect(20,20,100,100); æ•ˆæœå¦‚ä¸‹ï¼š ä½¿ç”¨clearRectå‡½æ•°å¯ä»¥è¿›è¡ŒçŸ©å½¢åŒºåŸŸçš„æ“¦é™¤ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234var c = document.getElementById(\"canvas\");var context = c.getContext(\"2d\");context.strokeRect(20,20,100,100);context.clearRect(10,10,100,100); æ•ˆæœå¦‚ä¸‹å›¾ï¼š ä¸Šé¢çš„ç»˜åˆ¶å›¾å½¢çš„æ–¹æ³•å®é™…ä¸Šæ˜¯ä¸€ä¸ªå¤åˆçš„å‡½æ•°ï¼Œå…¶å®Œæˆäº†è·¯å¾„çš„å®šä¹‰å’Œç»˜åˆ¶ä¸¤æ­¥ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå®šä¹‰å›¾å½¢è·¯å¾„ï¼Œä¾‹å¦‚ï¼š 12345678var c = document.getElementById(\"canvas\");var context = c.getContext(\"2d\");context.beginPath();context.moveTo(20,20);context.lineTo(20,100);context.lineTo(100,100);context.closePath();context.stroke(); æ•ˆæœå¦‚ä¸‹ï¼š beginPathå‡½æ•°ç”¨æ¥å¼€å¯ä¸€ä¸ªè·¯å¾„ï¼ŒmoveToå‡½æ•°ç”¨äºå°†ç”»ç¬”ç§»åŠ¨åˆ°æŸä¸ªç‚¹ï¼ŒlineToå‡½æ•°ç”¨æ¥å®šä¹‰ä¸€æ¡çº¿ï¼Œçº¿çš„èµ·ç‚¹ä¸ºå½“å‰ç”»ç¬”æ‰€åœ¨ä½ç½®ï¼Œå‚æ•°ä¸ºç»ˆç‚¹ä½ç½®ã€‚closePathå‡½æ•°ç”¨æ¥å…³é—­è·¯å¾„ï¼Œå½“ç„¶ï¼Œæ­¤å‡½æ•°å¹¶éä¸€å®šè¦è°ƒç”¨ï¼Œå¦‚æœä¸è°ƒç”¨å¯ä»¥ç»˜åˆ¶éé—­åˆçš„å›¾å½¢ã€‚strokeå‡½æ•°ç”¨æ¥å°†å·²ç»å®šä¹‰çš„å›¾å½¢è¿›è¡Œç»˜åˆ¶ï¼Œä¸å…¶å¯¹åº”è¿˜æœ‰ä¸€ä¸ªfillå‡½æ•°ç”¨æ¥è¿›è¡Œå¡«å……ç»˜åˆ¶ã€‚ quadraticCurveToä¸bezierCurveToä¸¤ä¸ªå‡½æ•°åˆ†åˆ«ç”¨æ¥åˆ›å»ºäºŒæ¬¡ä¸ä¸‰æ¬¡è´å¡å°”æ›²çº¿è·¯å¾„ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456context.moveTo(20,120);context.quadraticCurveTo(20,200,100,180);context.stroke();context.moveTo(20,200);context.bezierCurveTo(20,300,60,300,60,200);context.stroke(); æ•ˆæœå¦‚ä¸‹å›¾ï¼š å…³äºè´å¡å°”æ›²çº¿çš„ç›¸å…³å†…å®¹ï¼Œå¯ä»¥æŸ¥é˜…ä¸‹é¢çš„åšå®¢ï¼š https://my.oschina.net/u/2340880/blog/1519503ã€‚ arcå‡½æ•°ç”¨æ¥åˆ›å»ºåœ†å½¢å¼§çº¿ï¼Œä¾‹å¦‚ï¼š 123context.moveTo(110,350);context.arc(60,350,50,0,2*Math.PI,false);context.stroke(); arcå‡½æ•°ä¸­ï¼Œå‰ä¸¤ä¸ªä¸ªå‚æ•°è®¾ç½®åœ†å¿ƒç‚¹ï¼Œç¬¬3ä¸ªå‚æ•°è®¾ç½®åŠå¾„ï¼Œç¬¬4ä¸ªå’Œç¬¬5ä¸ªå‚æ•°è®¾ç½®åœ†å¼§çš„èµ·å§‹ç‚¹å’Œç»“æŸç‚¹ï¼Œä»¥å¼§åº¦åˆ¶è¡¨ç¤ºï¼Œæœ€åä¸€ä¸ªå‚æ•°ä¸ºå¸ƒå°”å€¼ï¼Œè®¾ç½®æ˜¯å¦é€†å‘ç»˜åˆ¶ã€‚è¿˜æœ‰ä¸€ä¸ªarcToå‡½æ•°ç”¨æ¥ç»˜åˆ¶ä¸¤æ¡åˆ‡çº¿é—´çš„åœ†å¼§ï¼Œå¦‚ä¸‹ï¼š 123context.moveTo(20,420);context.arcTo(80,420,80,600,50);context.stroke(); æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä½¿ç”¨clipå‡½æ•°å¯ä»¥è¿›è¡Œè£å‰ªæ“ä½œï¼Œè£å‰ªä¹‹åï¼Œä¹‹åçš„ç»˜åˆ¶åªèƒ½ç»˜åˆ¶åœ¨è£å‰ªçš„åŒºåŸŸå†…ï¼Œä¾‹å¦‚ï¼š 123context.rect(0,500,100,30);context.clip();context.fillRect(0,500,200,200); æ•ˆæœå¦‚ä¸‹ï¼š æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œä½¿ç”¨clipå‡½æ•°è¿›è¡Œè£å‰ªåï¼Œä¹‹åçš„ç»˜åˆ¶å°†åªèƒ½åœ¨è£å‰ªçš„åŒºåŸŸå†…è¿›è¡Œç»˜åˆ¶ï¼Œå¦‚æœæƒ³åœ¨è£å‰ªåŒºåŸŸå¤–ç»˜åˆ¶ï¼Œéœ€è¦ä½¿ç”¨saveå’Œrestoreä¸¤ä¸ªå‡½æ•°æ¥å¤„ç†ï¼Œåœ¨è£å‰ªå‰ï¼Œä½¿ç”¨saveå‡½æ•°æ¥ä¿å­˜å½“å‰ç»˜å›¾ä¸Šä¸‹æ–‡çš„çŠ¶æ€ï¼Œæƒ³è¦åœ¨è£å‰ªåŒºåŸŸå¤–ç»˜åˆ¶æ—¶ä½¿ç”¨restoreå‡½æ•°æ¥è¿˜åŸç»˜å›¾ä¸Šä¸‹æ–‡ã€‚ 2.ç»˜åˆ¶æ–‡æœ¬å’Œå›¾åƒå‰é¢ç¤ºä¾‹äº†ä½¿ç”¨Canvasè¿›è¡Œå›¾å½¢çš„ç»˜åˆ¶ï¼Œé™¤äº†å›¾å½¢ï¼Œä½¿ç”¨Canvasä¹Ÿå¯ä»¥è½»æ¾çš„ç»˜åˆ¶å‡ºå›¾åƒä¸æ–‡æœ¬ã€‚ä½¿ç”¨drawImageå‡½æ•°è¿›è¡Œå›¾åƒçš„ç»˜åˆ¶ï¼Œå¦‚ä¸‹ï¼š 12345var image = document.createElement(\"img\");image.src = 'img/HBuilder.png';image.onload = function()&#123; context.drawImage(image,0,600);&#125; éœ€è¦æ³¨æ„ï¼Œä¸Šé¢åˆ›å»ºäº†imgå…ƒç´ åï¼Œè®¾ç½®srcå±æ€§åä¸èƒ½ç«‹åˆ»è¿›è¡Œæ¸²æŸ“ï¼Œå› ä¸ºå›¾ç‰‡çš„åŠ è½½æ˜¯éœ€è¦æ—¶é—´çš„ï¼Œç›´æ¥æ¸²æŸ“ä¼šæ— æ³•è·å–å›¾åƒæ•°æ®ã€‚drawImageè¿™ä¸ªå‡½æ•°æ€»å…±å¯ä»¥æœ‰8ä¸ªå‚æ•°ï¼ŒdrawImage(img,sx,sy,sw,sh,x,y,w,h)ã€‚å…¶ä¸­sxï¼Œsyå’Œswï¼Œshç”¨æ¥å¯¹åŸå›¾åƒè¿›è¡Œè£å‰ªï¼Œåªé€‰æ‹©å›¾åƒä¸­çš„éƒ¨åˆ†è¿›è¡Œç»˜åˆ¶ï¼Œxï¼Œyï¼Œwï¼Œhè®¾ç½®ç»˜åˆ¶åœ¨ç”»å¸ƒä¸Šçš„åæ ‡å’Œå°ºå¯¸ã€‚ å…³äºæ–‡æœ¬ç»˜åˆ¶ï¼Œå¯ä»¥ä½¿ç”¨fillTextæˆ–strokeTextå‡½æ•°ï¼Œåˆ†åˆ«ç”¨æ¥ç»˜åˆ¶å®å¿ƒå’Œç©ºå¿ƒæ–‡å­—ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š 1234context.font = \"20px Georgia\";//è®¾ç½®å­—ä½“ context.textAlign = 'start'; //è®¾ç½®æ–‡å­—å¯¹é½æ–¹å¼context.fillText(\"Hello World\",0,750,200);context.strokeText(\"Hello World\",0,800,200); æ•ˆæœå¦‚ä¸‹ï¼š 3.ç»˜åˆ¶å±æ€§çš„è®¾ç½®åœ¨ç»˜åˆ¶è¿‡ç¨‹ä¸­ï¼Œå¼€å‘è€…å¯ä»¥å¯¹ç»˜åˆ¶çš„çº¿æ¡é¢œè‰²ï¼Œå¡«å……é¢œè‰²ï¼Œé£æ ¼ï¼Œé˜´å½±ç­‰è¿›è¡Œè®¾ç½®ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789context.fillStyle = 'red'; //è®¾ç½®å¡«å……é¢œè‰²context.strokeStyle = 'blue'; //è®¾ç½®çº¿æ¡é¢œè‰²context.shadowColor = 'green'; //è®¾ç½®é˜´å½±é¢œè‰²context.shadowBlur = 10; //è®¾ç½®é˜´å½±æ¨¡ç³Šåº¦context.shadowOffsetX = 10; //è®¾ç½®é˜´å½±Xè½´åç§»é‡context.shadowOffsetY = 5; //è®¾ç½®é˜´å½±Yè½´åç§»é‡context.lineCap = 'round'; //è®¾ç½®çº¿å¸½æ ·å¼context.lineJoin = 'round'; //è®¾ç½®æŠ˜ç‚¹æ ·å¼context.lineWidth = 1; //è®¾ç½®çº¿æ¡å®½åº¦ æ•ˆæœå¦‚ä¸‹å›¾ï¼š å…³äºfillStyleå’ŒstrokeStyleä¸¤ä¸ªå±æ€§æ¯”è¾ƒç‰¹æ®Šï¼Œä»åå­—ä¹Ÿå¯ä»¥äº†è§£å…¶æ˜¯è®¾ç½®å¡«å……æˆ–çº¿æ¡çš„é£æ ¼ï¼Œè®¾ç½®é¢œè‰²åªæ˜¯ä¸€ç§æ–¹å¼ï¼Œå…¶è¿˜å¯ä»¥è®¾ç½®ä¸ºä¸€ä¸ªæ¸å˜å¯¹è±¡ï¼Œç”¨æ¥å®ç°æ¸å˜æ•ˆæœã€‚ä¾‹å¦‚ï¼š 12345var g = context.createLinearGradient(0,750,200,750);g.addColorStop(0,'black');g.addColorStop(0.5,'red');context.fillStyle = g;context.fillText(\"Hello World\",0,750,200); æ•ˆæœå…¥ä¸‹å›¾ï¼š createLinearGradientå‡½æ•°ç”¨æ¥åˆ›å»ºçº¿æ€§æ¸å˜å±‚ï¼Œå…¶ä¸­4ä¸ªå‚æ•°è®¾ç½®èµ·å§‹ç‚¹çš„xï¼Œyå’Œç»“æŸç‚¹çš„xï¼Œyã€‚è°ƒç”¨addColorStopå‡½æ•°ç”¨æ¥æƒ³æ¸å˜å±‚ä¸­æ·»åŠ ä¸´ç•Œç‚¹å’Œé¢œè‰²å€¼ã€‚ä¹Ÿå¯ä»¥åˆ›å»ºå‘æ•£å‹æ¸å˜ï¼Œä¾‹å¦‚ï¼š 12345var g = context.createRadialGradient(70,800,20,70,800,50);g.addColorStop(0,'black');g.addColorStop(1,'red');context.fillStyle = g;context.fillRect(20,750,100,100); æ•ˆæœå¦‚ä¸‹ï¼š createRadiaGradientå‡½æ•°çš„å‰3ä¸ªå‚æ•°è®¾ç½®æ¸å˜å¼€å§‹å¤„çš„åœ†å¼§(åˆ†åˆ«è®¾ç½®åœ†å¿ƒxï¼Œyåæ ‡å’ŒåŠå¾„)ï¼Œå3ä¸ªå‚æ•°è®¾ç½®æ¸å˜ç»“æŸå¤„çš„åœ†å¼§(åˆ†åˆ«è®¾ç½®åœ†å¿ƒxï¼Œyåæ ‡å’ŒåŠå¾„)ã€‚ fillStyleå’ŒstrokeStyleä¹Ÿå¯ä»¥è®¾ç½®ä¸ºä¸€ä¸ªæ¨¡å¼èƒŒæ™¯ï¼Œä¾‹å¦‚å°†å›¾ç‰‡è¿›è¡Œé‡å¤å¾—åˆ°çš„èƒŒæ™¯ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345image.onload = function()&#123; var p = context.createPattern(image,'repeat'); context.fillStyle = p; context.fillRect(20,750,200,200);&#125; æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¯é€‰çš„é‡å¤æ¨¡å¼è¿˜æœ‰ï¼š repeat-xï¼šåªåœ¨æ°´å¹³æ–¹å‘é‡å¤ã€‚ repeat-yï¼šåªåœ¨ç«–ç›´æ–¹å‘é‡å¤ã€‚ no-repeatï¼šä¸é‡å¤ï¼Œåªæ˜¾ç¤ºä¸€æ¬¡ã€‚ 4.è¿›è¡Œç”»å¸ƒè½¬æ¢ç”»å¸ƒä¹Ÿå¯ä»¥è¿›è¡Œä¸€äº›ç®€å•çš„å˜æ¢æ“ä½œï¼Œä¾‹å¦‚æ—‹è½¬ï¼Œç¼©æ”¾ç­‰ç­‰ã€‚éœ€è¦æ³¨æ„ï¼Œå¯¹ç”»å¸ƒçš„æ“ä½œä¸ä¼šå½±å“åˆ°å·²ç»ç»˜åˆ¶åˆ°ç”»å¸ƒä¸Šçš„å†…å®¹ï¼Œä¹‹åç»˜åˆ¶çš„å†…å®¹ä¼šå—åˆ°å½±å“ã€‚ä½¿ç”¨scale(x,y)å‡½æ•°å¯ä»¥å¯¹ç”»å¸ƒè¿›è¡Œç¼©æ”¾ï¼Œå…¶ä¸­ä¸¤ä¸ªå‚æ•°xå’Œyåˆ†åˆ«è®¾ç½®æ°´å¹³å’Œç«–ç›´æ–¹å‘çš„ç¼©æ”¾æ¯”ä¾‹ã€‚rotate(angle)å‡½æ•°ç”¨æ¥å¯¹ç”»å¸ƒè¿›è¡Œæ—‹è½¬ï¼Œå…¶ä¸­çš„å‚æ•°ä¸ºæ—‹è½¬çš„è§’åº¦å€¼ã€‚translate(x,y)å‡½æ•°ç”¨æ¥å¯¹ç”»å¸ƒè¿›è¡Œå¹³ç§»ï¼Œå‚æ•°xï¼Œyåˆ†åˆ«è®¾ç½®æ°´å¹³å’Œç«–ç›´æ–¹å‘çš„å¹³ç§»é‡ã€‚è¿˜æœ‰ä¸€ä¸ªå¤åˆçš„transform(a,b,c,d,e,f)å‡½æ•°ï¼Œä½¿ç”¨è¿™ä¸ªå‡½æ•°å¯ä»¥ä¸€æ­¥è®¾ç½®å¹³ç§»ï¼Œæ—‹è½¬å’Œç¼©æ”¾å±æ€§ï¼Œå‚æ•°æ„ä¹‰å¦‚ä¸‹ï¼š aï¼šè®¾ç½®æ°´å¹³ç¼©æ”¾æ¯” bï¼šè®¾ç½®æ°´å¹³å€¾æ–œ cï¼šè®¾ç½®å‚ç›´å€¾æ–œ dï¼šè®¾ç½®å‚ç›´ç¼©æ”¾æ¯” eï¼šè®¾ç½®æ°´å¹³å¹³ç§» fï¼šè®¾ç½®å‚ç›´å¹³ç§» éœ€è¦æ³¨æ„ï¼Œå¦‚æœä½ å¤šæ¬¡è°ƒç”¨transformï¼Œæ¯æ¬¡çš„transformå˜æ¢éƒ½å°†åœ¨ä¸Šä¸€æ¬¡çš„åŸºç¡€ä¸Šè¿›è¡Œã€‚å¦‚æœä½ ä¸æƒ³ä¿ç•™ä¸Šä¸€æ¬¡çš„è®°å½•ï¼Œå¯ä»¥è°ƒç”¨setTransform()å‡½æ•°æ¥é‡ç½®è®¾ç½®ã€‚","categories":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}],"tags":[],"keywords":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}]},{"title":"JSONModelæºç è§£æ","slug":"369JSONModelæºç è§£æ","date":"2018-03-29T16:00:00.000Z","updated":"2021-07-15T08:37:43.737Z","comments":true,"path":"2018/03/30/369JSONModelæºç è§£æ/","link":"","permalink":"http://huishao.cc/2018/03/30/369JSONModelæºç è§£æ/","excerpt":"","text":"JSONModelæºç è§£æä¸€ã€å¼•è¨€åšç§»åŠ¨ç«¯å¼€å‘ï¼Œè§£æç½‘ç»œæ•°æ®æ˜¯å¿…ä¸å¯å°‘çš„å·¥ä½œä¹‹ä¸€ã€‚iOSåŸç”Ÿæ¡†æ¶å¾ˆæ—©å‰å°±å·²ç»æä¾›äº†å°†JSONæ•°æ®ç›´æ¥æ˜ å°„æˆæ•°ç»„æˆ–è€…å­—å…¸å¯¹è±¡çš„æ–¹æ³•ï¼Œå¹¶ä¸”ç»“åˆKVCï¼Œä¹Ÿå¯ä»¥å°†å­—å…¸æ•°æ®ç›´æ¥èµ‹å€¼ç»™å¯¹è±¡ã€‚ä½†æ˜¯è¿™ç§æ–¹å¼ååˆ†ä¸çµæ´»ï¼Œä¾‹å¦‚å¦‚æœç½‘ç»œæ•°æ®ä¸­çš„å­—æ®µä¸æˆ‘ä»¬æ•°æ®æ¨¡å‹ä¸­çš„å­—æ®µä¸ä¸€è‡´ï¼ŒæŸäº›ç½‘ç»œæ•°æ®çš„å­—æ®µå¯èƒ½ä¸ºnilç­‰ç­‰éƒ½éœ€è¦å¼€å‘è€…å•ç‹¬çš„å¤„ç†ã€‚ä½¿ç”¨JSOMModelå¯ä»¥ååˆ†æ–¹ä¾¿çš„å¤„ç†æ˜ å°„è¿‡ç¨‹ä¸­çš„å„ç§æƒ…å†µã€‚ äºŒã€JSOMModelç±»æ¦‚è§ˆå¹³æ—¶åœ¨ä½¿ç”¨JSOMModelæ¡†æ¶æ—¶ï¼Œå¾€å¾€åªä¼šç”¨åˆ°JSOMModelè¿™ä¸€ä¸ªç±»ï¼Œå…¶å®JSOMModelä¸­è¿˜å°è£…äº†ä¸€å¥—ç½‘ç»œè¯·æ±‚é€»è¾‘ï¼Œä½ å¯ä»¥ç›´æ¥å¯¹æŸä¸ªå¯¹è±¡è°ƒç”¨è¯·æ±‚æ¥æ˜ å°„æˆä¸ºæ•°æ®æ¨¡å‹ã€‚ä½†æ˜¯æˆ‘å»ºè®®å°½é‡å°†æ•°æ®çš„è¯·æ±‚å’Œè§£æåˆ†å¼€æ¥åšï¼Œè¿™æ ·æ›´åˆ©äºè¯·æ±‚çš„ç»´æŠ¤(åœ¨æ–°çš„JSOMModelç‰ˆæœ¬ä¸­ï¼Œä¹Ÿå°†æœ‰å…³ç½‘ç»œè¯·æ±‚çš„éƒ¨åˆ†æ ‡è®°ä¸ºäº†å¼ƒç”¨)ã€‚JSOMModelåŠŸèƒ½ååˆ†å¼ºå¤§ï¼Œä»£ç é‡å´å¹¶ä¸ç‰¹åˆ«å¤šï¼Œç»“æ„é€»è¾‘ä¹Ÿè¾ƒä¸ºæ¸…æ™°ã€‚å…¶ä¸­ç±»çš„å…³ç³»å’Œç»“æ„å¦‚ä¸‹å›¾è¡¨ç¤ºã€‚ å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå…¶ä¸­ç½‘ç»œç›¸å…³æ¨¡å—å·²ç»å¼ƒç”¨ï¼Œå¹¶ä¸”ä¹Ÿä¸æ˜¯JSONModelçš„æ ¸å¿ƒæ¨¡å—ï¼Œä¸åœ¨æœ¬æ¬¡åšå®¢çš„æ¢è®¨èŒƒå›´ä¹‹å†…ã€‚JSONModelErrorå®šä¹‰äº†è®¸å¤šé”™è¯¯ç±»å‹ï¼Œä¸»è¦ç”¨æ¥å½“è¯·æ±‚æˆ–æ•°æ®è§£æå¼‚å¸¸æ—¶è¿›è¡ŒæŠ›å‡ºï¼Œéœ€è¦æ³¨æ„ï¼ŒJSONModelå®šä¹‰çš„è‡ªå·±çš„logå‡½æ•°ï¼Œå…¶åªä¼šåœ¨æ¨¡æ‹Ÿå™¨è¿è¡Œæ—¶è¿›è¡Œæ‰“å°ã€‚ ä¸‰ã€JSONModelClassPropertyç±»çš„æ„ä¹‰å°†ç½‘ç»œæ•°æ®æ˜ å°„ä¸ºModelæ¨¡å‹çš„å®è´¨å³æ˜¯å¯¹Modelå¯¹è±¡ä¸­å±æ€§çš„èµ‹å€¼ï¼Œåœ¨JSONModelä¸­ï¼Œç±»çš„å±æ€§è¢«æŠ½è±¡ä¸ºJSONModelClassPropertyå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ä¸­å°è£…è¿™æ­¤å±æ€§çš„ç›¸å…³ä¿¡æ¯(é€šè¿‡runtimeæ¥åŠ¨æ€ç”Ÿæˆ)ã€‚JSONModelClassProertyç±»ä¸­çš„å±æ€§æ„ä¹‰å¦‚ä¸‹ï¼š 12345678910111213141516171819202122@interface JSONModelClassProperty : NSObject//å·²ç»å¼ƒç”¨ è¿™ä¸ªç”¨æ¥æ ‡è¯†å½“å‰å±æ€§æ˜¯å¦æ˜¯å¯¹è±¡çš„ä¸»é”® ç”¨æ¥è¿›è¡Œæ•°æ®æ¨¡å‹çš„æ¯”è¾ƒ@property (assign, nonatomic) BOOL isIndex DEPRECATED_ATTRIBUTE;//å±æ€§å@property (copy, nonatomic) NSString *name;//å±æ€§ç±»å‹@property (assign, nonatomic) Class type;//å±æ€§ç»“æ„ä½“åç§° åŸºæœ¬æ•°æ®ç±»å‹çš„å±æ€§ ä¼šè¢«æŠ½è±¡æˆç»“æ„ä½“@property (strong, nonatomic) NSString *structName;//å±æ€§éµå®ˆçš„åè®®å@property (copy, nonatomic) NSString *protocol;//å½“å‰å±æ€§æ˜¯å¦æ˜¯å¯é€‰å±æ€§ å¦‚æœæ˜¯ åœ¨è§£ææ—¶å…è®¸è¿™ä¸ªå±æ€§å€¼ä¸ºnil@property (assign, nonatomic) BOOL isOptional;//æ˜¯å¦æ˜¯æ ‡å‡†çš„jsonæ•°æ®ï¼Œå¦‚æœæ˜¯åˆ™ä¸ç”¨å†è°ƒç”¨æ•°æ®è½¬æ¢çš„æ–¹æ³•@property (assign, nonatomic) BOOL isStandardJSONType;//å½“å‰å±æ€§æ˜¯å¦æ˜¯å¯å˜çš„ å¦‚æœæ˜¯ åˆ™ä¼šåˆ›å»ºå¯å˜å¯¹è±¡@property (assign, nonatomic) BOOL isMutable;//è‡ªå®šä¹‰çš„ å±æ€§getå‡½æ•°@property (assign, nonatomic) SEL customGetter;//è‡ªå®šä¹‰çš„å±æ€§ setå‡½æ•°@property (strong, nonatomic) NSMutableDictionary *customSetters;@end å››ã€å…³äºå±æ€§æ˜ å°„å™¨JSONKeyMapperç®€å•ç†è§£ï¼ŒJSONKeyMapperå±æ€§æ˜ å°„å™¨çš„ä½œç”¨å°±æ˜¯ç”¨æ¥åˆ¶å®šåœ¨æ•°æ®è§£ææ—¶æ‰€éµå¾ªçš„è§„åˆ™ã€‚æœ€ç†æƒ³çš„æƒ…å†µæ˜¯JSONæ•°æ®ä¸æˆ‘ä»¬è¦è§£ææˆçš„æ•°æ®æ¨¡å‹å®Œå…¨å¯¹åº”ï¼Œä¾‹å¦‚ï¼š JSONæ•°æ®ï¼š 1&#123; \"firstName\":\"Bill\" , \"lastName\":\"Gates\" &#125; æ•°æ®Model: 1234567@interface MyOnject : NSObject@property(nonatomic,strong)NSString * firstName;@property(nonatomic,strong)NSString * lastName;@end ç„¶è€Œåœ¨å®é™…çš„å¼€å‘ä¸­ï¼Œè¿™ç§å®Œç¾çš„æƒ…å†µå´å¾ˆå°‘å‡ºç°ï¼Œæˆ‘ä»¬æ›´å¤šé‡åˆ°çš„æ˜¯ï¼ŒJSONæ•°æ®ä¸­æŸäº›å­—æ®µå¯èƒ½æœ‰ä¹Ÿå¯èƒ½æ— ï¼Œæ•°æ®Modelä¸­éœ€è¦å¢åŠ äº›æœ¬åœ°å­—æ®µï¼ŒJSONæ•°æ®å’ŒModelçš„æŸäº›å­—æ®µåç§°å¯èƒ½ä¸ä¸€è‡´ã€‚æ›´åŠ å¤æ‚ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥Modelçš„æŸä¸ªå±æ€§æ˜¯å¦ä¸€ä¸ªModelã€‚æˆ–è€…æŸä¸ªå±æ€§æ˜¯æ•°ç»„ï¼Œæ•°ç»„ä¸­å­˜æ”¾çš„æ˜¯å¦ä¸€ç§Modelã€‚ JSONKeyMapperæ¥å£å®šä¹‰å¦‚ä¸‹ï¼š 123456789101112//é€šè¿‡å­—å…¸æ¥åˆ›å»ºæ˜ å°„å™¨ å­—å…¸çš„é”®ä¸ºæ•°æ®Modelçš„å±æ€§å å€¼ä¸ºJSOMæ•°æ®çš„å±æ€§å - (instancetype)initWithModelToJSONDictionary:(NSDictionary *)toJSON;//é€šè¿‡blockæ¥å»ºç«‹æ˜ å°„å…³ç³» blockçš„å®šä¹‰å¦‚ä¸‹ï¼Œå…¶ä¸­ä¼šå°†JSOMæ•°æ®çš„å±æ€§åä¼ å…¥ éœ€è¦è¿”å›è¦å¯¹åº”Modelçš„å±æ€§å/*typedef NSString *(^JSONModelKeyMapBlock)(NSString *keyName);*/ - (instancetype)initWithModelToJSONBlock:(JSONModelKeyMapBlock)toJSON;//åˆ›å»ºä¸€ä¸ª å°†ä»¥ä¸‹åˆ’çº¿åˆ†å‰²çš„å‘½åé”® è½¬æ¢æˆé©¼å³°å‘½å ä¾‹å¦‚ first_name =&gt; firstName+ (instancetype)mapperForSnakeCase;//åˆ›å»ºä¸€ä¸ª å°†é¦–å­—æ¯å¤§å†™çš„æ˜æ˜é”® è½¬æ¢æˆé©¼å³° ä¾‹å¦‚ FirstName =&gt; firstName+ (instancetype)mapperForTitleCase; äº”ã€æ ¸å¿ƒæ•°æ®æ¨¡å‹ç±»JSONModelJSONModelæ¡†æ¶ä¸­æœ€æ ¸å¿ƒçš„ç±»JSONModelç±»ï¼Œå…¶ä¸­ä»£ç å¤§çº¦æœ‰1400è¡Œï¼Œé™¤äº†ä¸€äº›è°ƒè¯•ï¼Œå¤å†™å’Œæä¾›æ–¹ä¾¿åŠŸèƒ½çš„ä»£ç å¤–ï¼Œæ ¸å¿ƒä»£ç åœ¨800è¡Œå·¦å³ã€‚é¦–å…ˆï¼Œå…¶å¤´æ–‡ä»¶ä¸­å£°æ˜äº†å‡ ä¸ªåè®®ï¼Œå¦‚ä¸‹ï¼š 123456@protocol Index@end@protocol Ignore@end@protocol Optional@end éœ€è¦æ³¨æ„ï¼Œè¿™äº›åè®®é‡Œé¢éƒ½æ²¡æœ‰çº¦å®šä»»ä½•æ–¹æ³•ï¼Œå®ƒä»¬ä¹Ÿä¸ä¼šç”¨æ¥å®ç°çš„ï¼Œå…¶ä½œä¸ºå±æ€§çš„ä¸€ç§æ ‡è®°ï¼Œä¾‹å¦‚å°†å±æ€§æ·»åŠ Ignoreåè®®ï¼Œåˆ™JSONModelä¸ä¼šå¯¹è¿™ä¸ªå±æ€§è¿›è¡Œè§£æï¼Œä½¿ç”¨è¿™ç§æ–¹å¼æ¥è¿›è¡Œæœ¬åœ°æ•°æ®çš„ç®¡ç†ï¼Œä¾‹å¦‚ï¼š 123456789@interface MyOnject : JSONModel@property(nonatomic,strong)NSString * firstName;@property(nonatomic,strong)NSString * lastName;//è¿™ä¸ªå±æ€§æ˜¯æœ¬åœ°æ‹¼æ¥ ä½¿ç”¨@property(nonatomic,strong)NSString&lt;Ignore&gt; * fullName;@end Optionalåè®®è¡¨ç¤ºè¿™ä¸ªå±æ€§æ˜¯å¯é€‰çš„ï¼Œå³JSONæ•°æ®ä¸­å¦‚æœæœ‰è¿™ä¸ªå±æ€§å°±è§£æï¼Œå¦‚æœæ²¡æœ‰å°±è·³è¿‡ã€‚Indexåè®®æ ‡è®°è¿™ä¸ªå±æ€§æ˜¯å½“å‰å¯¹è±¡çš„ä¸»é”®ï¼Œå·²ç»å¼ƒç”¨ã€‚ æœ‰äº†è¿™3ä¸ªåè®®ï¼Œåœ¨å£°æ˜å±æ€§æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ååˆ†å®¹æ˜“çš„è®¾å®šä»–ä»¬çš„è§£æè§„åˆ™ï¼Œåœ¨JSONModelä¸­ï¼Œåè®®é™¤äº†å¯ä»¥ç”¨æ¥è§„å®šè§£æè§„åˆ™å¤–ï¼Œè¿˜å¯ä»¥ç”¨æ¥æŒ‡å®šè‡ªå®šä¹‰æ•°æ®ç±»å‹çš„è§£æï¼Œåªæ˜¯æˆ‘ä»¬éœ€è¦è‡ªå·±å®šä¹‰ä¸€ä¸ªåè®®ï¼Œåç§°ä¸è‡ªå®šä¹‰ç±»åä¸€è‡´ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314151617181920#import \"JSONModel.h\"@protocol Address@end@interface Address:JSONModel@property(nonatomic,strong)NSString * info;@end@interface MyObject : JSONModel@property(nonatomic,strong)NSString&lt;Optional&gt; * firstName;@property(nonatomic,strong)NSString * lastName;@property(nonatomic,strong)NSArray&lt;Address&gt; * address;@end å¦‚ä¸Šä»£ç æ‰€ä»¥ï¼Œåœ¨è§£ææ•°æ®æ—¶ï¼Œä¼šç›´æ¥å°†addressæ•°ç»„ä¸­èµ‹å€¼ä¸ºAddressçš„å¯¹è±¡ï¼Œå½“å‰ä¹Ÿå¯ä»¥ç›´æ¥è§£æå¯¹è±¡ï¼Œä¾‹å¦‚ï¼š 1234567891011121314151617181920@protocol Address@end@interface Address:JSONModel@property(nonatomic,strong)NSString * info;@end@interface MyObject : JSONModel@property(nonatomic,strong)NSString&lt;Optional&gt; * firstName;@property(nonatomic,strong)NSString * lastName;@property(nonatomic,strong)Address&lt;Address&gt; * address;@end éœ€è¦æ³¨æ„ï¼Œåœ¨Objective-Cä¸­ï¼Œåªæœ‰NSObjectçš„å­ç±»å¯ä»¥éµå®ˆåè®®ï¼ŒåŸå§‹æ•°æ®ç±»å‹æ˜¯ä¸èƒ½éµå®ˆåè®®çš„ï¼Œé‚£ä¹ˆå¯¹äºç±»ä¼¼BOOLï¼Œintè¿™æ ·çš„å±æ€§æœ‰æ²¡æœ‰åŠæ³•è®¾ç½®ä»–ä»¬çš„å¿½ç•¥è§£ææˆ–è€…å¯é€‰è§£æå‘¢ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡é‡å†™JSONModelä¸­çš„ä¸€äº›å‡½æ•°æ¥å®ç°ï¼Œè¿™ç§æ–¹æ³•æ›´åŠ é€šç”¨ï¼ŒJSONModelç±»æ¥å£æ„ä¹‰å¦‚ä¸‹ï¼š 1234567891011121314151617181920//å°†JSONå­—ç¬¦ä¸²è§£ææˆæ•°æ®æ¨¡å‹å¯¹è±¡- (instancetype)initWithString:(NSString *)string error:(JSONModelError **)err;- (instancetype)initWithString:(NSString *)string usingEncoding:(NSStringEncoding)encoding error:(JSONModelError **)err;//å°†æ•°æ®æ¨¡å‹å¯¹è±¡è½¬æ¢æˆJSONå­—ç¬¦ä¸²- (NSString *)toJSONString;//å°†æ•°æ®æ¨¡å‹å¯¹è±¡è½¬æ¢æˆJSONæ•°æ®- (NSData *)toJSONData;//å°†æ•°æ®æ¨¡å‹å¯¹è±¡ä¸­çš„æŸäº›é”®ç»„åˆæˆJSONå­—ç¬¦ä¸²- (NSString *)toJSONStringWithKeys:(NSArray *)propertyNames;//å°†æ•°æ®æ¨¡å‹å¯¹è±¡ä¸­çš„æŸäº›é”®ç»„åˆæˆJSONæ•°æ®- (NSData *)toJSONDataWithKeys:(NSArray *)propertyNames;//é‡å†™è¿™ä¸ªå‡½æ•° æ¥è®¾ç½®è§£ææ—¶ä½¿ç”¨çš„å±æ€§æ˜ å°„å™¨+ (JSONKeyMapper *)keyMapper;//é‡å†™è¿™ä¸ªå‡½æ•° æ¥è®¾ç½®æŸä¸ªå±æ€§æ˜¯å¦æ˜¯å¯é€‰çš„+ (BOOL)propertyIsOptional:(NSString *)propertyName;//é‡å†™è¿™ä¸ªå‡½æ•° æ¥è®¾ç½®æŸä¸ªå±æ€§æ˜¯å¦æ˜¯å¿½ç•¥çš„+ (BOOL)propertyIsIgnored:(NSString *)propertyName;//é‡å†™è¿™ä¸ªå‡½æ•° æ¥è®¾ç½® å¦‚æœæŸä¸ªå±æ€§é›†åˆä¸­æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰å¯¹è±¡æˆ–æœ¬èº«æ˜¯è‡ªå®šä¹‰å¯¹è±¡ è®¾ç½®æ­¤å¯¹è±¡çš„ç±»+ (Class)classForCollectionProperty:(NSString *)propertyName; JSONModelçš„æºç è¿™é‡Œå°±ä¸åœ¨åˆ—ä¸¾ï¼Œå…¶é¦–å…ˆåœ¨ç±»loadå‡½æ•°ä¸­è¿›è¡Œé™æ€æ•°æ®çš„åŠ è½½ï¼Œæ‰€æ”¯æŒçš„åŸç”Ÿç±»å‹å’ŒåŸºç¡€æ•°æ®ç±»å‹çš„å®šä¹‰ç­‰ã€‚åœ¨å¯¹è±¡çš„åˆå§‹åŒ–æ–¹æ³•ä¸­ï¼Œé¦–å…ˆä½¿ç”¨runtimeè·å–æ‰€æœ‰çš„å±æ€§å’Œå±æ€§çš„ä¿®é¥°å†…å®¹ï¼Œæ‰€è°“ä¿®é¥°å†…å®¹ï¼Œå³æ˜¯æŒ‡å±æ€§åç§°ï¼Œç±»å‹ï¼Œæ‰€éµå®ˆçš„åè®®ï¼Œä»¥åŠæ˜¯å¦å¿½ç•¥ï¼Œæ˜¯å¦å¯é€‰ï¼Œæ˜¯å¦æ˜¯ä¸»é”®ç­‰å†…å®¹(è¿‡ç¨‹ä¸­ä¼šä½¿ç”¨åˆ°å±æ€§æ˜ å°„å™¨keyMapperè¿›è¡Œè½¬åŒ–)ï¼Œå°†å…¶æŠ½è±¡æˆJSONModelClassPropertyå¯¹è±¡ã€‚åé¢åœ¨è§£ææ—¶ï¼Œä¼šæ ¹æ®JSONModelClassPropertyä¸­çš„è‡ªå®šä¹‰setterå’Œå…¶ä»–ä¿¡æ¯è¿›è¡Œèµ‹å€¼ã€‚","categories":[{"name":"iOSç¬¬ä¸‰æ–¹åº“","slug":"iOSç¬¬ä¸‰æ–¹åº“","permalink":"http://huishao.cc/categories/iOSç¬¬ä¸‰æ–¹åº“/"}],"tags":[],"keywords":[{"name":"iOSç¬¬ä¸‰æ–¹åº“","slug":"iOSç¬¬ä¸‰æ–¹åº“","permalink":"http://huishao.cc/categories/iOSç¬¬ä¸‰æ–¹åº“/"}]},{"title":"ä»ä¸€äº›ç®€å•çš„ä¾‹å­çœ‹ç®—æ³•æ—¶é—´å¤æ‚åº¦","slug":"368ä»ä¸€äº›ç®€å•çš„ä¾‹å­çœ‹ç®—æ³•æ—¶é—´å¤æ‚åº¦","date":"2018-03-17T16:00:00.000Z","updated":"2021-07-15T08:34:50.127Z","comments":true,"path":"2018/03/18/368ä»ä¸€äº›ç®€å•çš„ä¾‹å­çœ‹ç®—æ³•æ—¶é—´å¤æ‚åº¦/","link":"","permalink":"http://huishao.cc/2018/03/18/368ä»ä¸€äº›ç®€å•çš„ä¾‹å­çœ‹ç®—æ³•æ—¶é—´å¤æ‚åº¦/","excerpt":"","text":"ä»ä¸€äº›ç®€å•çš„ä¾‹å­çœ‹ç®—æ³•æ—¶é—´å¤æ‚åº¦åœ¨ç¼–ç¨‹ä¸­ï¼Œä¸€æ®µä»£ç çš„æ‰§è¡Œæ•ˆç‡å®é™…ä¸Šå¾ˆéš¾ä¼°ç®—å’Œé¢„æµ‹ï¼Œå…¶ä¸»è¦å—åˆ°å¦‚ä¸‹å‡ ä¸ªæ–¹é¢çš„å½±å“ï¼š 1.ç®—æ³•ä¾æ®çš„æ•°å­¦åŸºç¡€ã€‚ 2.ç¼–è¯‘å™¨äº§ç”Ÿçš„ä»£ç è´¨é‡å’Œè¯­è¨€çš„æ‰§è¡Œæ•ˆç‡ã€‚ 3.é—®é¢˜çš„è¾“å…¥è§„æ¨¡ã€‚ 4.ç¡¬ä»¶çš„æ‰§è¡Œé€Ÿåº¦ã€‚ é€šå¸¸æƒ…å†µä¸‹ï¼Œé—®é¢˜çš„è¾“å…¥è§„æ¨¡å’Œç®—æ³•çš„æ•°å­¦åŸºç¡€æ˜¯ç¼–ç äººå‘˜éœ€è¦è€ƒè™‘çš„æ¡ä»¶ã€‚æ—¶é—´å¤æ‚åº¦æ˜¯ä¸€ä¸ªç”¨æ¥æè¿°ç®—æ³•æ‰§è¡Œæ•ˆç‡çš„é‡è¦æ ‡å‡†ã€‚ åœ¨ç†è§£æ—¶é—´å¤æ‚åº¦ä¹‹å‰ï¼Œä½ åº”è¯¥å…ˆäº†è§£ä»€ä¹ˆå«åšç®—æ³•çš„æ—¶é—´é¢‘åº¦ï¼Œæ‰€è°“æ—¶é—´é¢‘åº¦å³æ˜¯ä¸€ä¸ªç®—æ³•è§£å†³é—®é¢˜æ‰€æ¶ˆè€—çš„æ—¶é—´ã€‚ä½†æ˜¯ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸€ä¸ªç®—æ³•è§£å†³é—®é¢˜æ¶ˆè€—çš„æ—¶é—´é€šå¸¸ä¸è¾“å…¥å€¼æœ‰å…³ï¼Œä¾‹å¦‚æˆ‘ä»¬è¾“å…¥ä¸€ä¸ªæ•´æ•°ï¼Œæ‰¾åˆ°æ¯”å®ƒå°çš„æ‰€æœ‰æ­£å¶æ•°ï¼Œä»£ç å¦‚ä¸‹ï¼š 1234567let n = 10;for (var i = 0; i &lt; n; i++) &#123; if (i%2==0) &#123; console.log(i); &#125;&#125; ä¸Šé¢ä»£ç ï¼Œå½“è¾“å…¥nä¸º10æ—¶ï¼Œå¾ªç¯ä¼šæ‰§è¡Œ10æ¬¡ï¼Œå¦‚æœæ—¶é—´é¢‘åº¦tï¼Œåˆ™å½“è¾“å…¥nä¸º20æ—¶ï¼Œæ—¶é—´é¢‘åº¦ä¸º2tã€‚æ—¶é—´å¤æ‚åº¦æ˜¯ç”¨æ¥æè¿°éšç€é—®é¢˜è§„æ¨¡nçš„å˜åŒ–æ—¶é—´é¢‘åº¦tçš„å˜åŒ–è§„å¾‹ã€‚ä¸‹é¢æ˜¯ä¸€æ®µæ›´åŠ æ•°å­¦é£æ ¼çš„æè¿°ï¼š ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç®—æ³•ä¸­åŸºæœ¬æ“ä½œé‡å¤æ‰§è¡Œçš„æ¬¡æ•°æ˜¯é—®é¢˜è§„æ¨¡nçš„æŸä¸ªå‡½æ•°ï¼Œç”¨T(n)è¡¨ç¤ºï¼Œè‹¥æœ‰æŸä¸ªè¾…åŠ©å‡½æ•°f(n),ä½¿å¾—å½“nè¶‹è¿‘äºæ— ç©·å¤§æ—¶ï¼ŒT(n)/f(n)çš„æé™å€¼ä¸ºä¸ç­‰äºé›¶çš„å¸¸æ•°ï¼Œåˆ™ç§°f(n)æ˜¯T(n)çš„åŒæ•°é‡çº§å‡½æ•°ã€‚è®°ä½œT(n)=ï¼¯(f(n)),ç§°ï¼¯(f(n)) ä¸ºç®—æ³•çš„æ¸è¿›æ—¶é—´å¤æ‚åº¦ï¼Œç®€ç§°æ—¶é—´å¤æ‚åº¦ã€‚ è®¡ç®—ä¸€ä¸ªç®—æ³•çš„æ—¶é—´å¤æ‚åº¦æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†ç®—æ³•åˆ†è§£ä¸ºé€æ¡è¯­å¥ï¼Œè®¡ç®—æ¯æ¡è¯­å¥çš„æ—¶é—´å¤æ‚åº¦åå†è¿›è¡Œç´¯åŠ ï¼Œå¦‚ä¸‹ä»£ç çš„ä½œç”¨æ˜¯å¯¹è¾“å…¥è¿›è¡Œæ±‚ç´¯åŠ ï¼š 123456let n = 10; let res = 0; //1for (var i = n; i &gt; 0; i--) &#123; //1+(n+1)+(n+1) res = i+res; //n&#125;console.log(res);//1 å½“nè¾“å…¥ä¸º10æ—¶ï¼Œæ—¶é—´é¢‘åº¦ä¸º1+1+n+1+n+1+n+1 = 3n+5ã€‚è®¾ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦å‡½æ•°ä¸ºf(n),(3n+5)/f(n)å½“nè¶‹äºæ— ç©·å¤§æ—¶ï¼Œä¸Šå¼å¯ä»¥ç®€åŒ–ä¸º3n/f(n)ï¼Œå–f(n)=n,ä¸Šæ¬¡ç»“æœä¸ºéé›¶å¸¸æ•°ï¼Œå› æ­¤æ­¤ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸ºf(n)=nï¼Œè®°åšO(n)ã€‚ å½“ç®—æ³•çš„æ‰§è¡Œæ—¶é—´é¢‘åº¦å’Œnæ— å…³æ—¶ï¼Œç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(1)ï¼Œè¿™æ˜¯æ—¶é—´å¤æ‚åº¦æœ€å°çš„å‡½æ•°ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„ï¼Œæ—¶é—´å¤æ‚åº¦å°å¹¶ä¸èƒ½è¯´æ˜ç®—æ³•æ‰§è¡Œè€—è´¹çš„æ—¶é—´çŸ­ï¼Œæ¯”å¦‚ä¸€ä¸‡è¡Œä»£ç æ¯è¡Œåªæ‰§è¡Œä¸€æ¬¡çš„ç®—æ³•æ—¶é—´å¤æ‚åº¦ä¹Ÿä¸ºO(1)ã€‚ å¸¸è§çš„ç®—æ³•æ—¶é—´å¤æ‚åº¦ç”±å°åˆ°å¤§ä»¥æ­¤ä¸ºï¼š ÎŸ(1)ï¼œÎŸ(logÂ²_n_)ï¼œÎŸ(n)ï¼œÎŸ(nlogÂ²_n_)ï¼œÎŸ(_n_2)ï¼œÎŸ(_n_3)ï¼œâ€¦ï¼œÎŸ(_2_n)ï¼œÎŸ(n!) å…¶ä¸­O(logÂ² nï¼‰æ˜¯é™¤äº†O(1)å¤–æ—¶é—´å¤æ‚åº¦æœ€å°çš„å‡½æ•°ï¼Œä¾‹å¦‚å¦‚ä¸‹ä»£ç ï¼š 1234567let n = 10; var i = 1;while(i&lt;n)&#123;//2^t&lt;n t&lt;log2(n) tä¸ºæ—¶é—´é¢‘åº¦ i = i * 2; tip++;&#125; ä¸Šé¢çš„æ—¶é—´é¢‘åº¦ä¸º 1+1+log2(n)+log2(n)+log2(n)ï¼Œå»æ‰å¸¸æ•°é¡¹åä¸º3log2(n)ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(log2(n))ã€‚å¦‚æœå°†ä¸Šé¢çš„ä»£ç åœ¨åŠ ä¸€å±‚å¾ªç¯ï¼Œåˆ™æ—¶é—´å¤æ‚åº¦ä¼šå˜ä¸ºO(nlog3(n)): 123456789let n = 10; for (var i = 0; i &lt; n; i++) &#123;// 1+n+1+n+1 var j = 1; //n while(j&lt;n)&#123;//[3^t&lt;n t&lt;log3(n)]n tä¸ºæ—¶é—´é¢‘åº¦ j = j*3; &#125;&#125; é€šè¿‡ä¸Šé¢çš„ç¤ºä¾‹ï¼Œä¹Ÿå¾ˆå®¹æ˜“å¯ä»¥çœ‹å‡ºï¼Œå¾ªç¯å±‚æ•°çš„å¢å¤šä¼šå‰§çƒˆçš„å¢åŠ ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ï¼Œå¦‚æœåœ¨é€’å½’å‡½æ•°ä¸­ä½¿ç”¨å¾ªç¯ï¼Œåˆ™å¾ˆå®¹æ˜“äº§ç”Ÿæ—¶é—´å¤æ‚åº¦ä¸ºO(n!)çš„ä»£ç ï¼Œä»æ•°å­¦ä¸Šçœ‹ï¼Œè¿™ç§ä»£ç éšç€è¾“å…¥å¤æ‚åº¦çš„å¢åŠ æ€§èƒ½ä¼šæ€¥å‰§ä¸‹é™ï¼Œåœ¨ä½¿ç”¨é€’å½’åŠ å¾ªç¯æ—¶ï¼Œè¿˜æ˜¯è¦å¤šå¤šæ³¨æ„ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567891011function func(n) &#123; //n if (n&lt;0) &#123; return; &#125; var i = 0; //n for (; i &lt; n; i++) &#123; //n*(n-1)*(n-2)...*1 console.log(\"tip\"); &#125; func(--i);&#125;func(10); ä¸Šé¢ç¤ºä¾‹çš„JavaScriptä»£ç å½“ä¼ å…¥nä¸º150æ—¶çš„è€—æ—¶å·²ç»å’Œæ­£å¸¸å¾ªç¯10000æ¬¡çš„ç›¸åŒã€‚","categories":[{"name":"ç¼–ç¨‹ç ç‘","slug":"ç¼–ç¨‹ç ç‘","permalink":"http://huishao.cc/categories/ç¼–ç¨‹ç ç‘/"}],"tags":[],"keywords":[{"name":"ç¼–ç¨‹ç ç‘","slug":"ç¼–ç¨‹ç ç‘","permalink":"http://huishao.cc/categories/ç¼–ç¨‹ç ç‘/"}]},{"title":"iOSå¼€å‘ä¸­Logæ¨¡å—çš„è§£å†³æ–¹æ¡ˆ","slug":"367iOSå¼€å‘ä¸­Logæ¨¡å—çš„è§£å†³æ–¹æ¡ˆ","date":"2018-03-14T16:00:00.000Z","updated":"2021-07-15T08:33:37.588Z","comments":true,"path":"2018/03/15/367iOSå¼€å‘ä¸­Logæ¨¡å—çš„è§£å†³æ–¹æ¡ˆ/","link":"","permalink":"http://huishao.cc/2018/03/15/367iOSå¼€å‘ä¸­Logæ¨¡å—çš„è§£å†³æ–¹æ¡ˆ/","excerpt":"","text":"iOSå¼€å‘ä¸­Logæ¨¡å—çš„è§£å†³æ–¹æ¡ˆåœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œè°ƒè¯•æ¨¡å—ï¼ŒLogæ¨¡å—ï¼Œå¯è§†åŒ–ç›‘æ§æ¨¡å—ç­‰éƒ½å±äºæŠ€æœ¯éœ€æ±‚ï¼Œå¹¶éä¸šåŠ¡éœ€æ±‚ï¼Œå› æ­¤åœ¨è¿›è¡Œè¿™ç±»æ¨¡å—çš„æ„å»ºæ—¶ï¼Œæˆ‘ä»¬æ›´å¤šçš„åº”è¯¥ä»¥é¢å‘åˆ‡é¢çš„æ€æƒ³æ¥ç¼–ç¨‹ã€‚ä¾‹å¦‚Logæ¨¡å—ï¼Œå…¶å¾€å¾€åªæ˜¯åœ¨Debugæ¨¡å¼ä¸‹éœ€è¦ï¼Œåœ¨ç¼–å†™æ—¶å°±è¦æ³¨æ„è®©å…¶å¯ä»¥è‡ªåŠ¨é€‚åº”ç¼–è¯‘ç¯å¢ƒè€Œä¸éœ€ä»£ç åšåˆ‡æ¢æ“ä½œã€‚ æœ¬ç¯‡åšå®¢ä¸»è¦ä»‹ç»ä¸ºé¡¹ç›®æ·»åŠ Logæ¨¡å—çš„å¼€å‘æ€è·¯ï¼Œå¹¶ä¸”æ¨èä¸€æ¬¾å¼€æºå¹¶ä¸”æ”¯æŒCocoapodsçš„Logåº“ã€‚ ä¸€ã€æ¥å£çš„æä¾›é¢å‘åˆ‡é¢ç¼–ç¨‹çš„æ ¸å¿ƒå°±æ˜¯è¦è¶³å¤Ÿç®€æ´ï¼Œä¸å½±å“ä¸»ä½“å·¥ç¨‹æ¨¡å—ï¼Œä¸ä¾èµ–ä¹Ÿä¸å¼•å…¥ä»»ä½•å…¶ä»–æ¨¡å—çš„å†…å®¹ã€‚Logå¼•æ“çš„æ¥å£è®¾è®¡å¯ä»¥å…¨éƒ¨é‡‡ç”¨å®çš„æ¨¡å¼ï¼Œä½¿ç”¨é¢„ç¼–è¯‘å…³é”®å­—å¯ä»¥ååˆ†å®¹æ˜“çš„å¯¹Debugå’ŒReleaseç¯å¢ƒè¿›è¡Œåˆ†åˆ«å¤„ç†ï¼Œå¦‚ä¸‹ï¼š 123456789101112131415161718#ifndef YHDevLog#define YHDevlOG#ifdef DEBUG#define START_DEBUG_MODE() [YHDevLogManager installDevLogView];#define WARN_LOG(msg,...) [YHDevLogManager pushLog:0 format:msg,##__VA_ARGS__,nil];#define ERROR_LOG(msg,...) [YHDevLogManager pushLog:1 format:msg,##__VA_ARGS__,nil];#define LOG(msg,...) [YHDevLogManager pushLog:2 format:msg,##__VA_ARGS__,nil];#else#define START_DEBUG_MODE()#define WARN_LOG(msg,...)#define ERROR_LOG(msg,...)#define LOG(msg,...)#endif#endif å…¶ä¸­ï¼ŒWARN_LOGï¼ŒERROR_LOGï¼ŒLOGä¸‰ä¸ªå®ç”¨æ¥è¿›è¡Œä¸åŒçº§åˆ«çš„Logæ‰“å°ï¼Œå¹¶ä¸”æä¾›äº†æ ¼å¼åŒ–å­—ç¬¦ä¸²çš„æ”¯æŒã€‚START_DEBUG_MODE()å®ç”¨æ¥å¼€å¯æ¨¡å—ï¼Œå¯ä»¥åœ¨åº”ç”¨ç¨‹åºå¯åŠ¨å®Œæˆåè°ƒç”¨å¼€å¯ã€‚ äºŒã€è®¾è®¡ä¸€ä¸ªModelæ¥æè¿°Logä¿¡æ¯Logä¿¡æ¯æ˜¯çº¯æ–‡æœ¬çš„ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦å°†å…¶æŠ½è±¡æˆä¸€ç§Modelæ¥è¿›è¡Œæè¿°ï¼ŒåŒºåˆ†Logçš„çº§åˆ«ï¼Œç±»å‹æˆ–è€…å…¶ä»–é€»è¾‘ï¼ŒYHDevLogä¸­çš„Modelè®¾è®¡å¦‚ä¸‹ï¼š 12345678910111213@interface YHDevLogModel : NSObject@property(nonatomic,strong)NSString * content;/** 0 warn 1 error 2 plain */@property(nonatomic,assign)int type;//æ˜¯å¦å±•å¼€è¯¦æƒ…@property(nonatomic,assign)BOOL isOpen;@end ä¸‰ã€Logçª—å£çš„è®¾è®¡å…³äºLogçª—å£ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨æ‚¬æµ®windowçš„æ–¹å¼ï¼Œä¸ºäº†é¿å…å½±å“ä¸»åº”ç”¨åŠŸèƒ½ï¼Œçª—å£çš„æ‚¬æµ®æ¨¡å¼åº”è¯¥å¯ä»¥è‡ªç”±è°ƒæ•´ï¼Œçª—å£ä¸­å¯ä»¥ä½¿ç”¨TableViewæ¥å±•ç¤ºLogä¿¡æ¯ï¼Œä½¿ç”¨åŠŸèƒ½æŒ‰é’®æ¥æ§åˆ¶çª—å£å°ºå¯¸å’Œè¿›è¡ŒLogçš„åˆ†ç±»å’Œæ¸…ç©ºç­‰ã€‚å…³äºUIæ–¹é¢çš„ä»£ç ï¼Œå› ä¸ºé‡‡ç”¨çš„æ˜¯çº¯æ‰‹å†™çš„Autolayoutï¼Œè¿™é‡Œå°±ä¸åœ¨åˆ—ä¸¾ä»£ç ï¼Œæœ‰å…´è¶£çš„å¯ä»¥å†å¦‚ä¸‹åœ°å€æ‰¾åˆ°ï¼š https://github.com/ZYHshao/YHDevLog ä¸€äº›æ•ˆæœå›¾ï¼š ä½¿ç”¨ä¸‹é¢çš„Podå¯ä»¥ç›´æ¥ä½¿ç”¨æ­¤Logç»„ä»¶ï¼š pod â€˜YHDevLogâ€™ æ¬¢è¿å…±åŒæ¢è®¨ï¼Œä¸€èµ·è¿›æ­¥ï¼","categories":[{"name":"å°ç å·¥å…·","slug":"å°ç å·¥å…·","permalink":"http://huishao.cc/categories/å°ç å·¥å…·/"}],"tags":[],"keywords":[{"name":"å°ç å·¥å…·","slug":"å°ç å·¥å…·","permalink":"http://huishao.cc/categories/å°ç å·¥å…·/"}]},{"title":"30åˆ†é’Ÿæ‘¸é€iOSä¸­è°“è¯NSPredicateçš„æ¥é¾™å»è„‰","slug":"366 30åˆ†é’Ÿæ‘¸é€iOSä¸­è°“è¯NSPredicateçš„æ¥é¾™å»è„‰","date":"2018-03-11T16:00:00.000Z","updated":"2021-07-15T08:32:23.761Z","comments":true,"path":"2018/03/12/366 30åˆ†é’Ÿæ‘¸é€iOSä¸­è°“è¯NSPredicateçš„æ¥é¾™å»è„‰/","link":"","permalink":"http://huishao.cc/2018/03/12/366 30åˆ†é’Ÿæ‘¸é€iOSä¸­è°“è¯NSPredicateçš„æ¥é¾™å»è„‰/","excerpt":"","text":"30åˆ†é’Ÿæ‘¸é€iOSä¸­è°“è¯NSPredicateçš„æ¥é¾™å»è„‰ä¸€ã€å¼•è¨€åœ¨ç°ä»£æ±‰è¯­çš„è§£é‡Šä¸­ï¼Œè°“è¯æ˜¯ç”¨æ¥æè¿°æˆ–åˆ¤æ–­å®¢ä½“æ€§è´¨ã€ç‰¹å¾æˆ–è€…å®¢ä½“ä¹‹é—´å…³ç³»çš„è¯é¡¹ã€‚é€šä¿—çš„è¯´ï¼Œå®ƒæ˜¯æè¿°äº‹ç‰©å±æ€§çš„ã€‚åœ¨iOSå¼€å‘Cocoaæ¡†æ¶ä¸­ï¼Œæœ‰æä¾›NSPredicateç±»ï¼Œè¿™ä¸ªç±»é€šå¸¸ä¹Ÿè¢«æˆä¸ºè°“è¯ç±»ï¼Œå…¶ä¸»è¦çš„ä½œç”¨æ˜¯åœ¨Cocoaä¸­å¸®åŠ©æŸ¥è¯¢å’Œæ£€ç´¢ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„ï¼Œå®è´¨ä¸Šè°“è¯å¹¶ä¸æ˜¯æä¾›æŸ¥è¯¢å’Œæ£€ç´¢çš„æ”¯æŒï¼Œå®ƒæ˜¯ä¸€ç§æè¿°æŸ¥è¯¢æ£€ç´¢æ¡ä»¶çš„æ–¹å¼ï¼Œå°±åƒæ›´åŠ æ ‡å‡†é€šç”¨çš„æ­£åˆ™è¡¨è¾¾å¼ä¸€æ ·ã€‚ NSPredicateæä¾›çš„è°“è¯å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼šæ¯”è¾ƒè°“è¯å’Œå¤åˆè°“è¯ã€‚ æ¯”è¾ƒè°“è¯ï¼šæ¯”è¾ƒè°“è¯é€šè¿‡ä½¿ç”¨æ¯”è¾ƒè¿ç®—ç¬¦æ¥æè¿°æ‰€ç¬¦åˆæ¡ä»¶çš„å±æ€§çŠ¶æ€ã€‚ å¤åˆè°“è¯ï¼šå¤åˆè°“è¯ç”¨æ¥ç»„åˆå¤šä¸ªæ¯”è¾ƒè°“è¯çš„ç»“æœï¼Œå–äº¤é›†ï¼Œå¹¶é›†æˆ–è¡¥é›†ã€‚ å¯¹äºæ¯”è¾ƒè°“è¯ï¼Œå¯ä»¥æè¿°ç²¾å‡†çš„æ¯”è¾ƒä¹Ÿå¯ä»¥é€šè¿‡èŒƒå›´æˆ–è€…åŒ…å«ç­‰è¿›è¡Œæ¨¡ç³Šæ¯”è¾ƒã€‚éœ€è¦æ³¨æ„ï¼Œä»»ä½•Cocoaç±»å¯¹è±¡éƒ½å¯ä»¥æ”¯æŒè°“è¯ï¼Œä½†æ˜¯æ­¤ç±»éœ€è¦å®ç°é”®å€¼ç¼–ç (key-value-coding)åè®®ã€‚ äºŒã€NSPredicateç±»çš„åº”ç”¨è§£æNSPredicateæä¾›åˆ›å»ºè°“è¯å¯¹è±¡å’Œè§£æè°“è¯å¯¹è±¡çš„æ–¹æ³•ï¼Œå®ƒä¹Ÿæ˜¯Cocoaä¸­æœ‰å…³è°“è¯çš„ç±»ä¸­çš„åŸºç±»ã€‚æˆ‘ä»¬åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼ŒNSPredicateç±»çš„åº”ç”¨é¢‘ç‡ä¹Ÿæœ€é«˜ã€‚ åˆ›å»ºè°“è¯å¯¹è±¡æœ‰3ç§æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯é€šè¿‡æ ¼å¼åŒ–å­—ç¬¦ä¸²åˆ›å»ºè°“è¯ï¼Œç›´æ¥é€šè¿‡ä»£ç åˆ›å»ºè°“è¯ï¼Œé€šè¿‡æ¨¡æ¿åˆ›å»ºè°“è¯ã€‚NSPredicateæä¾›äº†å¦‚ä¸‹å‡½æ•°æ¥è¿›è¡Œåˆå§‹åŒ–ï¼š 1234//é€šè¿‡æ ¼å¼åŒ–å­—ç¬¦ä¸²æ¥è¿›è¡Œè°“è¯å¯¹è±¡çš„åˆå§‹åŒ–+ (NSPredicate *)predicateWithFormat:(NSString *)predicateFormat argumentArray:(nullable NSArray *)arguments;+ (NSPredicate *)predicateWithFormat:(NSString *)predicateFormat, ...;+ (NSPredicate *)predicateWithFormat:(NSString *)predicateFormat arguments:(va_list)argList; ä½¿ç”¨æ ¼å¼åŒ–å­—ç¬¦ä¸²è¿›è¡Œè°“è¯çš„åˆå§‹åŒ–ååˆ†çµæ´»ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„ï¼Œå…¶è°“è¯å­—ç¬¦ä¸²çš„è¯­æ³•å’Œæ­£åˆ™è¡¨è¾¾å¼å¹¶ä¸ä¸€æ ·ï¼Œåé¢ä¼šæœ‰å…·ä½“çš„ä»‹ç»ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªè°“è¯æ£€ç´¢ç¤ºä¾‹ï¼š 1234567//æ£€ç´¢å±æ€§lengthä¸º5çš„å¯¹è±¡NSPredicate * predicate = [NSPredicate predicateWithFormat:@\"length = 5\"];//å¯¹äºè¿™ä¸ªæ•°ç»„ä¸­çš„å­—ç¬¦ä¸²ï¼Œå³æ˜¯æ£€ç´¢å­—ç¬¦ä¸²é•¿åº¦ä¸º5çš„å…ƒç´ NSArray * test = @[@\"sda\",@\"321\",@\"sf12\",@\"dsdwq1\",@\"swfas\"];NSArray * result = [test filteredArrayUsingPredicate:predicate];//å°†æ‰“å°@[@\"swfas\"]NSLog(@\"%@\",result); å…¶å®ï¼Œä½ ä¹Ÿå¯ä»¥åƒä½¿ç”¨NSLogå‡½æ•°ä¸€æ ·æ¥è¿›è¡Œæ ¼å¼åŒ–å­—ç¬¦ä¸²çš„æ„é€ ï¼Œå¯ä»¥ä½¿ç”¨%@,%dç­‰ç­‰æ ¼å¼åŒ–å­—ç¬¦æ¥åœ¨è¿è¡Œæ—¶æ›¿æ¢ä¸ºå˜é‡çš„å®é™…å€¼ã€‚åŒæ—¶ä¹Ÿéœ€è¦æ³¨æ„ï¼Œè¿™ç§æ ¼å¼åŒ–å­—ç¬¦ä¸²åˆ›å»ºçš„è°“è¯è¯­å¥å¹¶ä¸ä¼šè¿›è¡Œè¯­æ³•æ£€æŸ¥ï¼Œé”™è¯¯çš„è¯­æ³•ä¼šäº§ç”Ÿè¿è¡Œæ—¶é”™è¯¯ï¼Œè¦æ ¼å¤–å°å¿ƒã€‚æœ‰ä¸€ä¸ªå°ç»†èŠ‚éœ€è¦æ³¨æ„ï¼Œåœ¨è¿›è¡Œæ ¼å¼åŒ–æ—¶ï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯å˜é‡åˆ™ä¸éœ€è¦æ·»åŠ å¼•å·ï¼Œè§£æå™¨ä¼šå¸®åŠ©ä½ æ·»åŠ ï¼Œå¦‚æœä½¿ç”¨åˆ°å¸¸é‡ï¼Œåˆ™è¦ç”¨è½¬ä¹‰å­—ç¬¦è¿›è¡Œè½¬ä¹‰ï¼Œä¾‹å¦‚ï¼š 1NSPredicate * predicate = [NSPredicate predicateWithFormat:@\"name = %@ &amp;&amp; age = \\\"25\\\"\",name]; å¯¹äºå±æ€§åï¼Œå¦‚æœä¹Ÿéœ€è¦è¿›è¡Œæ ¼å¼åŒ–ï¼Œéœ€è¦æ³¨æ„ä¸èƒ½ä½¿ç”¨%@ç¬¦å·ï¼Œè¿™ä¸ªç¬¦å·åœ¨è§£ææ—¶ä¼šè¢«è§£æå™¨è‡ªåŠ¨æ·»åŠ ä¸Šå¼•å·ï¼Œå¯ä»¥ä½¿ç”¨%Kï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456NSString * key = @\"length\";NSPredicate * predicate = [NSPredicate predicateWithFormat:@\"%K = 5\",key];NSArray * test = @[@\"sda\",@\"321\",@\"sf12\",@\"dsdwq1\",@\"swfas\"];NSArray * result = [test filteredArrayUsingPredicate:predicate];//å°†æ‰“å°@[@\"swfas\"]NSLog(@\"%@\",result); é€šè¿‡æ¨¡æ¿æ¥åˆ›å»ºè°“è¯å¯¹è±¡ä¹Ÿæ˜¯ä¸€ç§ååˆ†å¸¸ç”¨çš„æ–¹å¼ï¼Œå’Œæ ¼å¼åŒ–å­—ç¬¦ä¸²ä¸åŒçš„æ˜¯ï¼Œè°“è¯æ¨¡æ¿ä¸­åªæœ‰é”®åï¼Œæ²¡æœ‰é”®å€¼ï¼Œé”®å€¼éœ€è¦åœ¨å­—å…¸ä¸­è¿›è¡Œæä¾›ï¼Œä¾‹å¦‚ï¼š 123456NSPredicate * predicate = [NSPredicate predicateWithFormat:@\"length = $LENGTH\"];predicate = [predicate predicateWithSubstitutionVariables:@&#123;@\"LENGTH\":@5&#125;];NSArray * test = @[@\"sda\",@\"321\",@\"sf12\",@\"dsdwq1\",@\"swfas\"];NSArray * result = [test filteredArrayUsingPredicate:predicate];//å°†æ‰“å°@[@\"swfas\"]NSLog(@\"%@\",result); NSPredicateä¸­å…¶ä»–å±æ€§ä¸æ–¹æ³•è§£æå¦‚ä¸‹ï¼š 123456789101112131415161718192021222324//åˆ›å»ºä¸€ä¸ªæ€»æ˜¯éªŒè¯é€šè¿‡(YES)æˆ–ä¸é€šè¿‡(NO)çš„è°“è¯å¯¹è±¡/*å¦‚æœåˆ›å»ºçš„æ˜¯éªŒè¯é€šè¿‡çš„ï¼Œåˆ™ä»»ä½•æ£€ç´¢éƒ½ä¼šæˆåŠŸè¿›è¡Œè¿”å›ï¼Œå¦åˆ™ä»»ä½•æ£€ç´¢éƒ½ä¼šå¤±è´¥ä¸è¿”å›ä»»ä½•å¯¹è±¡*/+ (NSPredicate *)predicateWithValue:(BOOL)value;//è‡ªå®šä¹‰å®ç°æ£€ç´¢å‡½æ•°/*ä¾‹å¦‚å‰é¢çš„ç¤ºä¾‹ä¹Ÿå¯ä»¥è¿™æ ·å†™NSPredicate * predicate = [NSPredicate predicateWithBlock:^BOOL(id _Nullable evaluatedObject, NSDictionary&lt;NSString *,id&gt; * _Nullable bindings) &#123; if ([evaluatedObject length]==5) &#123; return YES; &#125; return NO; &#125;];*/+ (NSPredicate*)predicateWithBlock:(BOOL (^)(id _Nullable evaluatedObject, NSDictionary&lt;NSString *, id&gt; * _Nullable bindings))block;//æ ¼å¼åŒ–å­—ç¬¦ä¸²å±æ€§@property (readonly, copy) NSString *predicateFormat; //å½“ä½¿ç”¨è°“è¯æ¨¡æ¿æ¥è¿›è¡Œå¯¹è±¡åˆ›å»ºæ—¶ï¼Œè¿™ä¸ªå‡½æ•°ç”¨æ¥è®¾ç½®è°“è¯æ¨¡æ¿ä¸­å˜é‡æ›¿æ¢- (instancetype)predicateWithSubstitutionVariables:(NSDictionary&lt;NSString *, id&gt; *)variables;//æ£€æŸ¥ä¸€ä¸ªObjectå¯¹è±¡æ˜¯å¦å¯ä»¥é€šè¿‡éªŒè¯- (BOOL)evaluateWithObject:(nullable id)object; //ç”¨è°“è¯æ¨¡æ¿è¿›è¡Œå¯¹è±¡çš„éªŒè¯- (BOOL)evaluateWithObject:(nullable id)object substitutionVariables:(nullable NSDictionary&lt;NSString *, id&gt; *)bindings; ä¸‰ã€é€šè¿‡ä»£ç æ¥åˆ›å»ºè°“è¯å¯¹è±¡å‰é¢æˆ‘ä»¬è¯´æœ‰3ç§åˆ›å»ºè°“è¯å¯¹è±¡çš„æ–¹å¼ï¼Œæœ‰ä¸¤ç§æˆ‘ä»¬å·²ç»æœ‰ä»‹ç»ï¼Œé€šè¿‡ä»£ç ç›´æ¥åˆ›å»ºè°“è¯å¯¹è±¡æ˜¯æœ€å¤æ‚çš„ä¸€ç§ã€‚é€šè¿‡ä»£ç æ¥åˆ›å»ºè°“è¯å¯¹è±¡ååˆ†ç±»ä¼¼é€šè¿‡ä»£ç æ¥åˆ›å»ºAutolayoutçº¦æŸã€‚é€šè¿‡å‰é¢æˆ‘ä»¬çš„ä»‹ç»ï¼Œè°“è¯å®é™…æ˜¯ç”¨è¡¨è¾¾å¼æ¥éªŒè¯å¯¹è±¡ï¼Œç”¨ä»£ç æ¥åˆ›å»ºè°“è¯å®é™…å°±æ˜¯ç”¨ä»£ç æ¥åˆ›å»ºè¡¨è¾¾å¼ã€‚ 1.å…ˆæ¥çœ‹NSComparisonPredicateç±»è¿™ä¸ªç±»æ˜¯NSPredicateçš„å­ç±»ï¼Œå…¶ç”¨æ¥åˆ›å»ºæ¯”è¾ƒç±»å‹çš„è°“è¯ã€‚ä¾‹å¦‚ä½¿ç”¨ä¸‹é¢çš„ä»£ç æ¥æ”¹å†™ä¸Šé¢çš„ä¾‹å­ï¼š 12345678910//åˆ›å»ºå·¦ä¾§è¡¨è¾¾å¼å¯¹è±¡ å¯¹åº”ä¸ºé”®NSExpression * left = [NSExpression expressionForKeyPath:@\"length\"];//åˆ›å»ºå³ä¾§è¡¨è¾¾å¼å¯¹è±¡ å¯¹åº”ä¸ºå€¼NSExpression * right = [NSExpression expressionForConstantValue:[NSNumber numberWithInt:5]];//åˆ›å»ºæ¯”è¾ƒè°“è¯å¯¹è±¡ è¿™é‡Œè®¾ç½®ä¸ºä¸¥æ ¼ç­‰äºNSComparisonPredicate * pre = [NSComparisonPredicate predicateWithLeftExpression:left rightExpression:right modifier:NSDirectPredicateModifier type:NSEqualToPredicateOperatorType options:NSCaseInsensitivePredicateOption];NSArray * test = @[@\"sda\",@\"321\",@\"sf12\",@\"dsdwq1\",@\"swfas\"];NSArray * result = [test filteredArrayUsingPredicate:pre];//å°†æ‰“å°@[@\"swfas\"]NSLog(@\"%@\",result); NSComparisonPredicateModifierç”¨æ¥è¿›è¡Œæ¡ä»¶çš„ä¿®é¥°è®¾ç½®ï¼Œæšä¸¾å¦‚ä¸‹ï¼š 12345typedef NS_ENUM(NSUInteger, NSComparisonPredicateModifier) &#123; NSDirectPredicateModifier = 0, //ç›´æ¥è¿›è¡Œæ¯”è¾ƒæ“ä½œ NSAllPredicateModifier, //ç”¨äºæ•°ç»„æˆ–é›†åˆ åªæœ‰å½“å†…éƒ¨æ‰€æœ‰å…ƒç´ éƒ½é€šè¿‡éªŒè¯æ—¶ é›†åˆæ‰ç®—é€šè¿‡ NSAnyPredicateModifier //åŒäºæ•°ç»„æˆ–é›†åˆ å½“å†…éƒ¨æœ‰ä¸€ä¸ªå…ƒç´ æ»¡è¶³æ—¶ é›†åˆç®—é€šè¿‡éªŒè¯&#125;; å…³äºNSAllPredicateModifierå’ŒNSAnyPredicateModifierï¼Œè¿™ä¸¤ä¸ªæšä¸¾ä¸“é—¨ç”¨äºæ•°ç»„æˆ–é›†åˆç±»å‹å¯¹è±¡çš„éªŒè¯ï¼ŒALLä¼šéªŒè¯å…¶ä¸­æ‰€æœ‰å…ƒç´ ï¼Œå…¨éƒ¨é€šè¿‡åæ•°ç»„æˆ–é›†åˆæ‰ç®—éªŒè¯é€šè¿‡ï¼ŒANYåˆ™åªè¦æœ‰ä¸€ä¸ªå…ƒç´ éªŒè¯é€šè¿‡ï¼Œæ•°ç»„æˆ–é›†åˆå°±ç®—éªŒè¯é€šè¿‡ï¼Œä¾‹å¦‚ï¼š 12345NSPredicate * pre = [NSPredicate predicateWithFormat:@\"ALL length = 5\"];NSArray * test = @[@[@\"aaa\",@\"aa\"],@[@\"bbbb\",@\"bbbbb\"],@[@\"ccccc\",@\"ccccc\"]]; NSArray * result = [test filteredArrayUsingPredicate:pre]; //å°†æ‰“å°@[@[@\"ccccc\",@\"ccccc\"]] NSLog(@\"%@\",result); NSPredicateOperatorTypeæšä¸¾ç”¨æ¥è®¾ç½®è¿ç®—ç¬¦ç±»å‹ï¼Œå¦‚ä¸‹ï¼š 12345678910111213141516typedef NS_ENUM(NSUInteger, NSPredicateOperatorType) &#123; NSLessThanPredicateOperatorType = 0, // å°äº NSLessThanOrEqualToPredicateOperatorType, // å°äºç­‰äº NSGreaterThanPredicateOperatorType, // å¤§äº NSGreaterThanOrEqualToPredicateOperatorType, // å¤§äºç­‰äº NSEqualToPredicateOperatorType, // ç­‰äº NSNotEqualToPredicateOperatorType, //ä¸ç­‰äº NSMatchesPredicateOperatorType, //æ­£åˆ™æ¯”é… NSLikePredicateOperatorType, //LikeåŒ¹é… ä¸SQLç±»ä¼¼ NSBeginsWithPredicateOperatorType, //å·¦è¾¹çš„è¡¨è¾¾å¼ ä»¥å³è¾¹çš„è¡¨è¾¾å¼ä½œä¸ºå¼€å¤´ NSEndsWithPredicateOperatorType,//å·¦è¾¹çš„è¡¨è¾¾å¼ ä»¥å³è¾¹çš„è¡¨è¾¾å¼ä½œä¸ºç»“å°¾ NSInPredicateOperatorType, // å·¦è¾¹çš„è¡¨è¾¾å¼ å‡ºç°åœ¨å³è¾¹çš„é›†åˆä¸­ NSCustomSelectorPredicateOperatorType,//ä½¿ç”¨è‡ªå®šä¹‰çš„å‡½æ•°æ¥è¿›è¡Œ éªŒè¯ NSContainsPredicateOperatorType, //å·¦è¾¹çš„é›†åˆåŒ…æ‹¬å³è¾¹çš„å…ƒç´  NSBetweenPredicateOperatorType //å·¦è¾¹è¡¨è¾¾å¼çš„å€¼åœ¨å³è¾¹çš„èŒƒå›´ä¸­ ä¾‹å¦‚ 1 BETWEEN &#123; 0 , 33 &#125;&#125;; NSComparisonPredicateOptionsæšä¸¾ç”¨æ¥è®¾ç½®æ¯”è¾ƒçš„æ–¹å¼ï¼Œå¦‚ä¸‹ï¼š 123456//å¦‚æœä¸éœ€è¦ç‰¹æ®ŠæŒ‡å®š è¿™ä¸ªæšä¸¾å€¼ä¹Ÿå¯ä»¥ä¼ 0typedef NS_OPTIONS(NSUInteger, NSComparisonPredicateOptions) &#123; NSCaseInsensitivePredicateOption = 0x01, //ä¸åŒºåˆ†å¤§å°å†™ NSDiacriticInsensitivePredicateOption = 0x02,//ä¸åŒºåˆ†è¯»éŸ³ç¬¦å· NSNormalizedPredicateOption //æ¯”è¾ƒå‰è¿›è¡Œé¢„å¤„ç† ä»£æ›¿ä¸Šé¢ä¸¤ä¸ªé€‰é¡¹&#125;; 2.NSExpressionç±»NSExpressionç±»åˆ™æ˜¯æä¾›åˆ›å»ºè¡¨è¾¾å¼ï¼Œä¸‹é¢åˆ—å‡ºäº†å…¶ä¸­ä¸€äº›æ–¹ä¾¿ç†è§£çš„æ–¹æ³•ï¼š 12345678910111213141516//é€šè¿‡æ ¼å¼åŒ–å­—ç¬¦ä¸²åˆ›å»ºè¡¨è¾¾å¼+ (NSExpression *)expressionWithFormat:(NSString *)expressionFormat argumentArray:(NSArray *)arguments;+ (NSExpression *)expressionWithFormat:(NSString *)expressionFormat, ...;+ (NSExpression *)expressionWithFormat:(NSString *)expressionFormat arguments:(va_list)argList;//ç›´æ¥é€šè¿‡å¯¹è±¡åˆ›å»ºå¸¸äº®çš„è¡¨è¾¾å¼+ (NSExpression *)expressionForConstantValue:(nullable id)obj; //åˆ›å»ºå˜é‡è¡¨è¾¾å¼ éªŒè¯æ—¶å°†ä»bindingå­—å…¸ä¸­è¿›è¡Œæ›¿æ¢+ (NSExpression *)expressionForVariable:(NSString *)string; //å°†å¤šä¸ªè¡¨è¾¾å¼ç»„åˆæˆä¸€ä¸ª+ (NSExpression *)expressionForAggregate:(NSArray&lt;NSExpression *&gt; *)subexpressions;+ (NSExpression *)expressionForUnionSet:(NSExpression *)left with:(NSExpression *)right;+ (NSExpression *)expressionForIntersectSet:(NSExpression *)left with:(NSExpression *)right;+ (NSExpression *)expressionForMinusSet:(NSExpression *)left with:(NSExpression *)right;+ (NSExpression *)expressionForSubquery:(NSExpression *)expression usingIteratorVariable:(NSString *)variable predicate:(NSPredicate *)predicate;//é€šè¿‡é¢„å®šä¹‰çš„å‡½æ•°å’Œå‚æ•°æ•°ç»„æ¥æ„å»ºè¡¨è¾¾å¼å¯¹è±¡ é¢„å®šä¹‰çš„å‡½æ•° å¯è§devå¼€å‘æ–‡æ¡£+ (NSExpression *)expressionForFunction:(NSString *)name arguments:(NSArray *)parameters; 3.NSCompoundPredicateç±»è¿™ä¸ªç±»ä¹Ÿæ˜¯NSPredicateç±»çš„å­ç±»ï¼Œå…¶ä½¿ç”¨é€»è¾‘å…³ç³»æ¥ç»„åˆå¤šä¸ªè°“è¯å¯¹è±¡ï¼Œè§£æå¦‚ä¸‹ï¼š 123456789101112131415//è¿›è¡Œå¯¹è±¡åˆå§‹åŒ–/*typedef NS_ENUM(NSUInteger, NSCompoundPredicateType) &#123; NSNotPredicateType = 0, //å–é NSAndPredicateType, //ä¸è¿ç®— NSOrPredicateType, //æˆ–è¿ç®—&#125;;*/- (instancetype)initWithType:(NSCompoundPredicateType)type subpredicates:(NSArray&lt;NSPredicate *&gt; *)subpredicates;//å¿«é€Ÿåˆ›å»ºä¸è¿ç®—+ (NSCompoundPredicate *)andPredicateWithSubpredicates:(NSArray&lt;NSPredicate *&gt; *)subpredicates;//å¿«é€Ÿåˆ›å»ºæˆ–è¿ç®—+ (NSCompoundPredicate *)orPredicateWithSubpredicates:(NSArray&lt;NSPredicate *&gt; *)subpredicates;//å¿«é€Ÿåˆ›å»ºéè¿ç®—+ (NSCompoundPredicate *)notPredicateWithSubpredicate:(NSPredicate *)predicate; å››ã€è°“è¯çš„å‡ ç§ä½¿ç”¨åœºæ™¯è°“è¯ä¸»è¦ç”¨åœ¨éªŒè¯å¯¹è±¡ï¼Œæ•°ç»„å’Œé›†åˆçš„è¿‡æ»¤ã€‚å¯¹è±¡çš„éªŒè¯å‰é¢æœ‰ä»‹ç»ï¼Œå…³äºæ•°æ®å’Œé›†åˆçš„è¿‡æ»¤å‡½æ•°ï¼Œç±»åˆ«å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031@interface NSArray&lt;ObjectType&gt; (NSPredicateSupport)//ä¸å¯å˜æ•°ç»„ä½¿ç”¨è¿‡æ»¤å™¨åè¿”å›æ–°æ•°ç»„- (NSArray&lt;ObjectType&gt; *)filteredArrayUsingPredicate:(NSPredicate *)predicate; @end@interface NSMutableArray&lt;ObjectType&gt; (NSPredicateSupport)//å¯å˜æ•°ç»„å¯ä»¥ç›´æ¥è¿›è¡Œè¿‡æ»¤æ“ä½œ- (void)filterUsingPredicate:(NSPredicate *)predicate;@end@interface NSSet&lt;ObjectType&gt; (NSPredicateSupport)//ä¸å¯å˜é›†åˆè¿‡æ»¤åè¿”å›æ–°é›†åˆ- (NSSet&lt;ObjectType&gt; *)filteredSetUsingPredicate:(NSPredicate *)predicate;@end@interface NSMutableSet&lt;ObjectType&gt; (NSPredicateSupport)//å¯å˜é›†åˆå¯ä»¥ç›´æ¥è¿›è¡Œè¿‡æ»¤æ“ä½œ- (void)filterUsingPredicate:(NSPredicate *)predicate;@end@interface NSOrderedSet&lt;ObjectType&gt; (NSPredicateSupport)- (NSOrderedSet&lt;ObjectType&gt; *)filteredOrderedSetUsingPredicate:(NSPredicate *)p;@end@interface NSMutableOrderedSet&lt;ObjectType&gt; (NSPredicateSupport)- (void)filterUsingPredicate:(NSPredicate *)p;@end äº”ã€è°“è¯çš„æ ¼å¼åŒ–è¯­æ³•æ€»è§ˆä¸‹é¢åˆ—å‡ºäº†åœ¨è°“è¯çš„æ ¼å¼åŒ–å­—ç¬¦ä¸²è§„åˆ™è¯­æ³•ã€‚ | è¯­æ³•è§„åˆ™ | æ„ä¹‰ || = | å·¦ä¾§ç­‰äºå³ä¾§ || == | å·¦ä¾§ç­‰äºå³ä¾§ï¼Œä¸=ä¸€è‡´ || &gt;= | å·¦ä¾§å¤§äºç­‰äºå³ä¾§ || =&gt; | å·¦ä¾§å¤§äºç­‰äºå³ä¾§ ä¸ &gt;=ä¸€è‡´ || &lt;= | å·¦ä¾§å°äºç­‰äºå³ä¾§ || =&lt; | å·¦ä¾§å°äºç­‰äºå³ä¾§ ä¸&lt;=ä¸€è‡´ || &gt; | å·¦ä¾§å¤§äºå³ä¾§ || &lt; | å·¦ä¾§å°äºå³ä¾§ || != | å·¦ä¾§ä¸ç­‰äºå³ä¾§ || &lt;&gt; | å·¦ä¾§ä¸ç­‰äºå³ä¾§ ä¸!=ä¸€è‡´ || BETWEEN | å·¦ä¾§åœ¨å³ä¾§çš„é›†åˆä¸­ key BETWEEN @[@1,@2] || TRUEPREDICATE | æ€»æ˜¯è¿”å›YESçš„è°“è¯ || FALSEPREDICATE | æ€»æ˜¯è¿”å›NOçš„è°“è¯ || AND | é€»è¾‘ä¸ || &amp;&amp; | é€»è¾‘ä¸ ä¸ANDä¸€è‡´ || OR | é€»è¾‘æˆ– || || | é€»è¾‘æˆ– ä¸ORä¸€è‡´ || NOT | é€»è¾‘é || ! | é€»è¾‘é ä¸NOTä¸€è‡´ || BEGINWITH | å·¦ä¾§ä»¥å³ä¾§å­—ç¬¦ä¸²å¼€å¤´ || ENDWITH | å·¦ä¾§ä»¥å³ä¾§å­—ç¬¦ä¸²ç»“å°¾ || CONTAINS | å·¦ä¾§é›†åˆåŒ…å«å³ä¾§å…ƒç´  || LIKE | å·¦ä¾§ç­‰äºå³ä¾§ å¹¶ä¸” *å’Œ?ç­‰é€šé…ç¬¦å¯ä»¥ä½¿ç”¨ || MATCHES | æ­£åˆ™åŒ¹é… || ANY | å¯¹äºæ•°ç»„é›†åˆç±»ï¼ŒéªŒè¯å…¶ä¸­ä»»ä¸€å…ƒç´  || SOME | åŒANYä¸€è‡´ || ALL | å¯¹äºæ•°ç»„é›†åˆç±»ï¼ŒéªŒè¯å…¶ä¸­æ‰€æœ‰å…ƒç´  || NONE | ä½œç”¨ç­‰åŒäºNOT (ANY) || IN | å·¦ä¾§åœ¨å³ä¾§é›†åˆä¸­ || SELF | è¢«éªŒè¯çš„å¯¹è±¡æœ¬èº« |","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSé«˜è´¨é‡çš„åŠ¨ç”»å®ç°è§£å†³æ–¹æ¡ˆâ€”â€”Lottie","slug":"365iOSé«˜è´¨é‡çš„åŠ¨ç”»å®ç°è§£å†³æ–¹æ¡ˆâ€”â€”Lottie","date":"2018-02-10T16:00:00.000Z","updated":"2021-07-15T08:30:06.923Z","comments":true,"path":"2018/02/11/365iOSé«˜è´¨é‡çš„åŠ¨ç”»å®ç°è§£å†³æ–¹æ¡ˆâ€”â€”Lottie/","link":"","permalink":"http://huishao.cc/2018/02/11/365iOSé«˜è´¨é‡çš„åŠ¨ç”»å®ç°è§£å†³æ–¹æ¡ˆâ€”â€”Lottie/","excerpt":"","text":"iOSé«˜è´¨é‡çš„åŠ¨ç”»å®ç°è§£å†³æ–¹æ¡ˆâ€”â€”LottieçœŸå¿ƒçš„è®¤ä¸ºLottieæ˜¯ä¸€æ¬¾ååˆ†ä¼˜ç§€ä¸”å®ç”¨çš„åŠ¨ç”»å¼€å‘åº“ï¼Œä¸åªå¯¹äºiOSå’ŒandroidåŸç”Ÿå¼€å‘è€…æ¥è¯´å…¶è®©å¤æ‚åŠ¨ç”»çš„å®ç°å‡ ä¹æ²¡æœ‰æˆæœ¬ï¼Œå¯¹äºè®¾è®¡å¸ˆæ¥è¯´ï¼Œå®ƒçš„æ‰€è§å³æ‰€å¾—ï¼Œä¸éœ€å¯¼å‡ºå¸§å›¾åƒç­‰ä¼˜åŠ¿ä¹Ÿååˆ†æ˜æ˜¾ã€‚æœ¬ç¯‡åšå®¢ä¸»è¦ä»¥iOSå¹³å°ä¸ºä¾‹ï¼Œç®€å•ä»‹ç»å’Œæ€»ç»“LottieåŠ¨ç”»åº“çš„ä½¿ç”¨æ–¹å¼ã€‚ ä¸€ã€å‡ ä¸ªæœ‰ç”¨é“¾æ¥Lottieå®˜ç½‘ï¼šhttps://airbnb.design/lottie/ã€‚ LottieFilesï¼šhttps://www.lottiefiles.com/ã€‚ LottieFilesæ˜¯ä¸€ä¸ªåœ¨çº¿çš„æµ‹è¯•LottieåŠ¨ç”»çš„ç½‘ç«™ï¼Œå¹¶ä¸”å…¶ä¸Šé¢ä¹Ÿæä¾›äº†è®¸å¤šå¸¸ç”¨çš„LottieåŠ¨ç”»ç»„ä»¶ã€‚ äºŒã€ä¸€ä¸ªç®€å•çš„å°Demoå…ˆæ¥çœ‹ä¸€ä¸ªç®€å•çš„å°ä¾‹å­ï¼Œæˆ‘åœ¨LottieFilesä¸Šæ‰¾äº†ä¸€ä¸ªéª‘è¡ŒåŠ¨ç”»çš„JSONæ–‡ä»¶ï¼Œæ­¤æ–‡ä»¶çš„ä¸‹è½½åœ°å€å¦‚ä¸‹ï¼š https://www.lottiefiles.com/download/1385 è¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒç‚«é…·çš„éª‘è¡ŒåŠ¨ç”»ï¼Œè¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœä½¿ç”¨GIFæˆ–å¸§åŠ¨ç”»æ¥å®ç°ï¼Œéœ€è¦ç´ æçš„å¤§å°å¯èƒ½è¦è¿œè¿œè¶…è¿‡136kã€‚å°†ä¸‹è½½çš„JSONæ–‡ä»¶æ·»åŠ åˆ°iOSé¡¹ç›®ä¸­ï¼Œä¹‹åå°±åƒä½¿ç”¨å›¾ç‰‡ä¸€æ ·çš„æ¥ä½¿ç”¨å®ƒå³å¯ï¼Œä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819#import &lt;Lottie/Lottie.h&gt;@interface ViewController ()@property(nonatomic,strong)LOTAnimationView * animationView;@end@implementation ViewController- (void)viewDidLoad &#123; [super viewDidLoad]; self.animationView = [LOTAnimationView animationNamed:@\"go.json\"]; [self.view addSubview:self.animationView]; self.animationView.frame = CGRectMake(20, 30, 280, 200); self.animationView.loopAnimation = YES; [self.animationView play];&#125;@end åŠ¨ç”»æ•ˆæœå¦‚ä¸‹å›¾ï¼š æ— è®ºæ˜¯ä»æµç•…åº¦è¿˜æ˜¯æ€§èƒ½ä¸Šï¼ŒåŠ¨ç”»æ•ˆæœéƒ½è¦æ¯”GIFå›¾ç‰‡å¥½è®¸å¤šã€‚ ä¸‰ã€å¯¹Lottieåº“çš„åº”ç”¨è§£æé¦–å…ˆLOTAnimationViewç±»æ˜¯æ˜¾ç¤ºLottieåŠ¨ç”»çš„è§†å›¾ç±»ï¼Œä»æºä»£ç ä¸­çœ‹å®ƒæ˜¯ç»§æ‰¿è‡ªLOTViewï¼Œä¸è¦æ…Œï¼Œè¿™ä¸ªLOTViewå¹¶ä¸æ˜¯ä»€ä¹ˆç¨€å¥‡å¤æ€ªçš„ç±»ï¼Œå®ƒå…¶å®å°±æ˜¯ä¸ºäº†ä»£ç ç»Ÿä¸€ï¼Œæ˜¯UIViewæˆ–NSViewçš„åˆ«åè€Œå·²ã€‚ å¦‚æœä½ å°†åŠ¨ç”»ç›´æ¥æ‹–å…¥åˆ°ä¸»å·¥ç¨‹ä¸‹é¢ï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥ä½¿ç”¨åŠ¨ç”»JSONæ–‡ä»¶åæ¥è¿›è¡ŒåŠ¨ç”»çš„åˆ›å»ºï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š 12//ç›´æ¥ä»mainBundleä¸­åŠ è½½ç´ æ+ (nonnull instancetype)animationNamed:(nonnull NSString *)animationName NS_SWIFT_NAME(init(name:)); ä½ ä¹Ÿå¯ä»¥ä»è‡ªå®šä¹‰çš„Bundleæˆ–è€…ä½¿ç”¨å…¶ä»–æ–¹å¼æ¥åŠ è½½JSONæ–‡ä»¶ï¼š 123456789//ä»è‡ªå®šä¹‰çš„BundleåŠ è½½åŠ¨ç”»+ (nonnull instancetype)animationNamed:(nonnull NSString *)animationName inBundle:(nonnull NSBundle *)bundle NS_SWIFT_NAME(init(name:bundle:));//ç›´æ¥ä»JSONå­—å…¸åŠ è½½åŠ¨ç”»+ (nonnull instancetype)animationFromJSON:(nonnull NSDictionary *)animationJSON NS_SWIFT_NAME(init(json:));//ç›´æ¥é€šè¿‡JSONæ–‡ä»¶åŠ è½½åŠ¨ç”»+ (nonnull instancetype)animationWithFilePath:(nonnull NSString *)filePath NS_SWIFT_NAME(init(filePath:));+ (nonnull instancetype)animationFromJSON:(nullable NSDictionary *)animationJSON inBundle:(nullable NSBundle *)bundle NS_SWIFT_NAME(init(json:bundle:));//ä»URLåŠ è½½- (nonnull instancetype)initWithContentsOfURL:(nonnull NSURL *)url; å…¶å®æ— è®ºä¸Šé¢å“ªç§æ–¹å¼åŠ è½½åŠ¨ç”»ï¼Œéƒ½æ˜¯é€šè¿‡LOTCompositionç»„ä»¶ç±»å®ä¾‹åŒ–çš„ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥é€šè¿‡è¿™ä¸ªç±»æ¥æ„å»ºåŠ¨ç”»è§†å›¾ï¼š 12345678910//å¸¸ç”¨çš„æ„é€ æ–¹æ³•+ (nullable instancetype)animationNamed:(nonnull NSString *)animationName NS_SWIFT_NAME(init(name:));+ (nullable instancetype)animationNamed:(nonnull NSString *)animationName inBundle:(nonnull NSBundle *)bundle NS_SWIFT_NAME(init(name:bundle:));+ (nullable instancetype)animationWithFilePath:(nonnull NSString *)filePath NS_SWIFT_NAME(init(filePath:));+ (nonnull instancetype)animationFromJSON:(nonnull NSDictionary *)animationJSON NS_SWIFT_NAME(init(json:));+ (nonnull instancetype)animationFromJSON:(nullable NSDictionary *)animationJSON inBundle:(nullable NSBundle *)bundle NS_SWIFT_NAME(init(json:bundle:));- (instancetype _Nonnull)initWithJSON:(NSDictionary * _Nullable)jsonDictionary withAssetBundle:(NSBundle * _Nullable)bundle; JSONæ–‡ä»¶ä¸­åŒ…å«çš„ä¿¡æ¯éå¸¸ä¸°å¯Œï¼Œä¼šä¸LOTCompositionå®ä¾‹è¿›è¡Œæ˜ å°„ï¼Œä¾‹å¦‚åŠ¨ç”»çš„æ—¶é•¿ï¼Œèµ·å§‹å¸§å’Œç»“æŸå¸§ï¼Œå®½é«˜å°ºå¯¸ç­‰ã€‚ æ„é€ å‡ºLOTAnimationViewå®ä¾‹åï¼Œéœ€è¦è°ƒç”¨æ–¹æ³•è¿›è¡ŒåŠ¨ç”»çš„æ’­æ”¾ï¼Œä¸‹é¢åˆ—å‡ºäº†LOTAnimationViewä¸­çš„å¸¸ç”¨å±æ€§ä¸æ–¹æ³•ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940//è·å–åŠ¨ç”»æ˜¯å¦æ­£åœ¨æ’­æ”¾@property (nonatomic, readonly) BOOL isAnimationPlaying;//è®¾ç½®åŠ¨ç”»æ˜¯å¦å¾ªç¯æ’­æ”¾@property (nonatomic, assign) BOOL loopAnimation;//è®¾ç½®åŠ¨ç”»æ˜¯å¦è‡ªåŠ¨é€†åºæ’­æ”¾@property (nonatomic, assign) BOOL autoReverseAnimation;//è®¾ç½®æ˜¯å¦ç¼“å­˜@property (nonatomic, assign) BOOL cacheEnable;//åŠ¨ç”»å®Œæˆçš„å›è°ƒblock@property (nonatomic, copy, nullable) LOTAnimationCompletionBlock completionBlock;//ç»„ä»¶å®ä¾‹@property (nonatomic, strong, nullable) LOTComposition *sceneModel;//ä»æŒ‡å®šçš„è¿›åº¦ä½ç½®æ’­æ”¾åŠ¨ç”»- (void)playToProgress:(CGFloat)toProgress withCompletion:(nullable LOTAnimationCompletionBlock)completion;//æ’­æ”¾æŒ‡å®šåŒºé—´å†…çš„åŠ¨ç”»- (void)playFromProgress:(CGFloat)fromStartProgress toProgress:(CGFloat)toEndProgress withCompletion:(nullable LOTAnimationCompletionBlock)completion;//æ’­æ”¾åˆ°åŠ¨ç”»çš„æŸä¸€å¸§- (void)playToFrame:(nonnull NSNumber *)toFrame withCompletion:(nullable LOTAnimationCompletionBlock)completion;//æ’­æ”¾æŒ‡å®šå¸§åŒºé—´å†…çš„åŠ¨ç”»- (void)playFromFrame:(nonnull NSNumber *)fromStartFrame toFrame:(nonnull NSNumber *)toEndFrame withCompletion:(nullable LOTAnimationCompletionBlock)completion;//æ’­æ”¾åŠ¨ç”» å¯ä»¥è®¾ç½®å›è°ƒ- (void)playWithCompletion:(nullable LOTAnimationCompletionBlock)completion;//ç›´æ¥æ’­æ”¾åŠ¨ç”»- (void)play;//æš‚åœæ’­æ”¾- (void)pause;//åœæ­¢æ’­æ”¾- (void)stop;//è®¾ç½®å½“å‰å¸§- (void)setProgressWithFrame:(nonnull NSNumber *)currentFrame;//è®¾ç½®æŸä¸€å¸§å¯¹åº”çš„åŠ¨ç”»å±æ€§å€¼- (void)setValue:(nonnull id)value forKeypath:(nonnull NSString *)keypath atFrame:(nullable NSNumber *)frame;","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"MJRefreshæºç åˆ†æ","slug":"364MJRefreshæºç åˆ†æ","date":"2018-01-29T16:00:00.000Z","updated":"2021-07-15T08:19:20.200Z","comments":true,"path":"2018/01/30/364MJRefreshæºç åˆ†æ/","link":"","permalink":"http://huishao.cc/2018/01/30/364MJRefreshæºç åˆ†æ/","excerpt":"","text":"MJRefreshæºç åˆ†æ æ¯æ¬¡è¯»ä¼˜ç§€çš„ä»£ç éƒ½æ˜¯ä¸€æ¬¡æ·±åˆ»çš„å­¦ä¹ ï¼Œæ¯ä¸€æ¬¡æ¨¡ä»¿ï¼Œéƒ½æ˜¯åˆ›é€ çš„å¼€å§‹ï¼ â€”â€”QQ 316045346 æ¬¢è¿äº¤æµ ä¸€ã€MJRefreshæºç ç»“æ„åˆ†æMJRefreshä¸»è¦ä¸ºUIScrollViewï¼ŒUITableViewå’ŒUICollectionViewæ·»åŠ å¤´éƒ¨å’Œå°¾éƒ¨åˆ·æ–°æ§ä»¶ã€‚å…¶ä¸»è¦ç”±3å¤§å—ç»„æˆï¼Œç±»åˆ«å·¥å…·ï¼Œæ ¸å¿ƒUIScrollViewç±»åˆ«å’Œå¤´éƒ¨å°¾éƒ¨åˆ·æ–°ç»„ä»¶ã€‚å¦‚ä¸‹å›¾ï¼š äºŒã€å·¥å…·ç±»åˆ«ä¸Šé¢ç¤ºæ„å›¾ä¸­åˆ—å‡ºçš„å‡ ä¸ªå·¥å…·ç±»åˆ«ä¸»è¦æä¾›æ–¹ä¾¿å±æ€§è®¿é—®çš„åŠŸèƒ½ã€‚å…¶ä¸»è¦æ˜¯ä¸ºäº†æ–¹ä¾¿MJRefreshåº“è‡ªå·±çš„è°ƒç”¨ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥å¯¹å®ƒè¿›è¡Œä½¿ç”¨ã€‚ UIView+MJExtensionç±»åˆ«æä¾›äº†å¯¹UIViewç»„ä»¶ä½ç½®å’Œå°ºå¯¸çš„å¿«é€Ÿè®¿é—®æ–¹æ³•ï¼Œå¹¶ä¸”éƒ½æ”¯æŒå¿«é€Ÿè·å–å’Œè®¾ç½®ï¼š 123456@property (assign, nonatomic) CGFloat mj_x;@property (assign, nonatomic) CGFloat mj_y;@property (assign, nonatomic) CGFloat mj_w;@property (assign, nonatomic) CGFloat mj_h;@property (assign, nonatomic) CGSize mj_size;@property (assign, nonatomic) CGPoint mj_origin; UIScrollView+MJExtensionæä¾›äº†å¯¹UIScrollViewçš„å†…å®¹å°ºå¯¸ï¼Œåç§»é‡ç­‰å±æ€§çš„å¿«é€Ÿè®¿é—®ï¼š 123456789101112@property (readonly, nonatomic) UIEdgeInsets mj_inset;@property (assign, nonatomic) CGFloat mj_insetT;@property (assign, nonatomic) CGFloat mj_insetB;@property (assign, nonatomic) CGFloat mj_insetL;@property (assign, nonatomic) CGFloat mj_insetR;@property (assign, nonatomic) CGFloat mj_offsetX;@property (assign, nonatomic) CGFloat mj_offsetY;@property (assign, nonatomic) CGFloat mj_contentW;@property (assign, nonatomic) CGFloat mj_contentH; NSBundle+MJRefreshè¿™ä¸ªç±»åˆ«æä¾›å¯¹åº“ä¸­èµ„æºçš„è®¿é—®æ–¹æ³•ï¼š 123456+ (instancetype)mj_refreshBundle;//è·å–ç®­å¤´å›¾ç‰‡+ (UIImage *)mj_arrowImage;//è·å–å›½é™…åŒ–å­—ç¬¦ä¸²+ (NSString *)mj_localizedStringForKey:(NSString *)key value:(NSString *)value;+ (NSString *)mj_localizedStringForKey:(NSString *)key; ä¸‰ã€å…³äºUIScrollView+MJRefreshè¿™ä¸ªç±»åˆ«æ˜¯MJRefreshåº“çš„æ ¸å¿ƒï¼Œå…¶ä¸­æä¾›çš„mj\\_headerå’Œmj\\_footerä¸¤ä¸ªå±æ€§ç”¨æ¥æ·»åŠ å¤´éƒ¨å’Œå°¾éƒ¨åˆ·æ–°ç»„ä»¶ã€‚è¿™ä¸¤ä¸ªç»„ä»¶æ˜¯ä½œä¸ºå­è§†å›¾æ·»åŠ åœ¨UIScrollViewä¸Šçš„ï¼Œå› æ­¤å’ŒUIScrollViewçš„åŸç”Ÿå¤´å°¾è§†å›¾éƒ½ä¸å½±å“ã€‚åœ¨ä»¥å‰ç‰ˆæœ¬çš„MJRefreshä¸­ï¼Œä½¿ç”¨çš„æ˜¯headerå’Œfooterå±æ€§ï¼Œå®¹æ˜“äº§ç”Ÿç–‘æƒ‘ï¼Œå› æ­¤åé¢ç‰ˆæœ¬æ¡†æ¶ä¸­éƒ½æ·»åŠ äº†mjå‰ç¼€ã€‚ UIScrollView+MJRefreshç±»åˆ«åœ¨å¼€å‘è€…è®¾ç½®mj\\_headerå’Œmj\\_footerå±æ€§æ—¶ï¼Œå°†è¿™ä¸¤ä¸ªç»„ä»¶æ·»åŠ ä¸ºå½“å‰æ»šåŠ¨è§†å›¾çš„æœ€ä¸‹å±‚å­è§†å›¾ï¼Œä¸ºäº†æ»¡è¶³æŸäº›è‡ªåŠ¨åŠ è½½çš„éœ€æ±‚ï¼Œè¿™é‡Œé¢æœ‰ç”¨runtimeå°†UITableViewå’ŒUICollectionViewçš„reloadå‡½æ•°è¿›è¡Œæ›¿æ¢ï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯ä¸ºäº†åœ¨æ•°æ®åŠ è½½æ—¶ç»Ÿè®¡ç•Œé¢çš„å…ƒç´ ä¸ªæ•°ã€‚ å››ã€åˆ·æ–°ç»„ä»¶MJRefreshComponentæ˜¯åˆ·æ–°ç»„ä»¶çš„åŸºç±»ï¼Œå…¶ä¸­å®šäº†ä¸€äº›é€šç”¨æ–¹æ³•ã€‚é¦–å…ˆï¼ŒMJRefreshåº“çš„åˆ·æ–°ç»„ä»¶æ ¸å¿ƒæ€æƒ³æ˜¯åŸºäºçŠ¶æ€çš„ï¼Œå³é€šè¿‡çŠ¶æ€æ¥è§¦å‘æŸäº›ç»„ä»¶è¡Œä¸ºï¼Œä¾‹å¦‚æ­£å¸¸çš„å¸¸æ€ï¼Œä¸‹æ‹‰çš„pullingæ€ï¼Œé‡Šæ”¾çš„refreshingæ€ç­‰ç­‰ã€‚å¼€å‘è€…é™¤äº†å¯ä»¥æ‰‹åŠ¨è®¾ç½®çŠ¶æ€å¤–ï¼Œä¸»è¦é€šè¿‡ç›‘å¬UIScrollViewçš„åç§»é‡ç­‰å±æ€§æ¥æ”¹å˜çŠ¶æ€ã€‚å½“UIScrollViewæœ‰åç§»é‡æˆ–å†…å®¹å°ºå¯¸çš„å˜åŒ–æ—¶ï¼ŒMJRefreshComponentä¼šè°ƒç”¨scrollViewContentOffsetDidChangeå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¸»è¦äº¤ç»™å…¶å­ç±»å®ç°ã€‚ MJRefreshHeaderç±»æ˜¯å¤´éƒ¨åˆ·æ–°ç»„ä»¶çš„åŸºç±»ï¼Œå…¶å°†åˆ·æ–°ç»„ä»¶å¸ƒå±€åœ¨UIScrollViewç»„ä»¶çš„é¡¶éƒ¨ï¼Œå¹¶ä¸”å°è£…äº†è®°å½•ä¸Šæ¬¡åˆ·æ–°æ—¶é—´çš„åŠŸèƒ½ã€‚MJRefreshStateHeaderæä¾›äº†æ¥å£ä¾›å¼€å‘è€…è®¾ç½®ä¸åŒçŠ¶æ€ä¸‹åˆ·æ–°ç»„ä»¶æ‰€æ˜¾ç¤ºçš„æ–‡å­—ï¼ŒMJRefreshNormalHeaderæ˜¯ä¸€ä¸ªæ›´åŠ ä¸Šå±‚çš„å¤´éƒ¨åˆ·æ–°ç»„ä»¶ï¼Œå…¶çŠ¶æ€æ–‡å­—æ˜¯é»˜è®¤å®šä¹‰å¥½çš„ï¼Œå¹¶ä¸”æ”¯æŒå›½é™…åŒ–ã€‚MJRefreshGifHeaderå¯ä»¥æ”¯æŒæ˜¾ç¤ºè‡ªå®šä¹‰åˆ·æ–°åŠ¨ç”»ï¼Œå…¶å¯ä»¥ä¸ºæŸä¸ªçŠ¶æ€è®¾ç½®ä¸€ç»„å›¾ç‰‡ã€‚ å°¾éƒ¨åˆ·æ–°ç»„ä»¶çš„ç¼–å†™é€»è¾‘å’Œå¤´éƒ¨åˆ·æ–°ç»„ä»¶çš„ç¼–å†™é€»è¾‘åŸºæœ¬ä¸€è‡´ï¼ŒMJRefreshä¸­çš„å°¾éƒ¨åˆ·æ–°ç»„ä»¶åˆ†ä¸ºäº†ä¸¤ç±»ï¼Œä¸€ç±»æ˜¯åˆ·æ–°å®Œæˆåè‡ªåŠ¨æ¶ˆå¤±çš„ï¼Œä¸€ç±»æ˜¯è‡ªåŠ¨åˆ·æ–°ï¼Œåˆ·æ–°å®Œæˆåä¸ä¼šè‡ªåŠ¨æ¶ˆå¤±ï¼Œåªæ˜¯æ”¹å˜çŠ¶æ€ã€‚MFRefreshFooterä¸MJRefreshHeaderçš„å®ç°åŸºæœ¬ä¸€è‡´ï¼ŒMJRefreshBackFooteræœ‰åˆ·æ–°å®Œæˆåè‡ªåŠ¨è¿˜åŸçš„åŠŸèƒ½ï¼ŒMJRefreshBackNormalFooteræ˜¯æ¯”è¾ƒä¸Šå±‚çš„å°è£…ï¼Œå…¶æ˜¾ç¤ºé»˜è®¤çš„çŠ¶æ€æ–‡æ¡ˆï¼Œå¹¶ä¸”æ”¯æŒå›½é™…åŒ–ã€‚MJRefreshBackStateFooteråˆ™å¯ä»¥æ‰‹åŠ¨è®¾ç½®ä¸åŒçŠ¶æ€ä¸‹åˆ·æ–°ç»„ä»¶æ˜¾ç¤ºçš„æ–‡å­—ã€‚MJRefreshBackGifFooterç”¨æ¥æ˜¾ç¤ºè‡ªå®šä¹‰åŠ¨ç”»çš„å°¾éƒ¨åˆ·æ–°ç»„ä»¶ã€‚MJRefreshAutoFooteræ˜¯è‡ªåŠ¨å°¾éƒ¨åˆ·æ–°ç»„ä»¶çš„åŸºç±»ï¼Œå…¶å¯ä»¥è®¾ç½®å½“å°¾éƒ¨åˆ·æ–°ç»„ä»¶å‡ºç°å¤šå°‘æ¯”ä¾‹æ—¶è¿›è¡Œåˆ·æ–°(é»˜è®¤æ˜¯å®Œå…¨å‡ºç°åè¿›è¡Œåˆ·æ–°)ã€‚MJRefreshAutoStateFooterå¯ä»¥è‡ªå®šä¹‰å…¶å„ä¸ªçŠ¶æ€çš„æ–‡æ¡ˆã€‚åŒæ ·ï¼Œä¹Ÿæœ‰æ¯”è¾ƒä¸Šå±‚çš„MJRefreshAotuNormalFooterç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶å°è£…å¥½äº†å›½é™…åŒ–çš„æ–‡æ¡ˆå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼ŒMJRefreshAutoGifFooterç»„ä»¶å¯ä»¥æ˜¾ç¤ºè‡ªå®šåŠ¨ç”»çš„å°¾éƒ¨åˆ·æ–°ã€‚ äº”ã€MJRefreshä¸­çš„ç¼–ç¨‹é£æ ¼æŠ€å·§ä¸å°äº®ç‚¹1.å¤ç”¨ï¼Œå¤ç”¨ï¼Œå†å¤ç”¨ä¹‹æ‰€ä»¥çœ‹MJRefreshåº“çš„ä»£ç éå¸¸èˆ’æœï¼Œå¾ˆå¤§ä¸€éƒ¨åˆ†æºè‡ªå…¶æ·±å…¥çš„å¤ç”¨ã€‚é¦–å…ˆMJRefreshComponentç±»æŠ½è±¡å‡ºäº†å›è°ƒä¸åˆ·æ–°å‡½æ•°ï¼Œå¹¶ä¸”æå–å‡ºäº†éœ€è¦å­ç±»å¤å†™çš„é€šç”¨çš„å¸ƒå±€ã€ç›‘å¬ç­‰å‡½æ•°ï¼Œè®©å­ç±»çš„ç»“æ„éå¸¸ç»Ÿä¸€ã€‚MJRefreshHeaderå’ŒMJRefreshFooterä½œä¸ºå¤´éƒ¨ä¸å°¾éƒ¨åˆ·æ–°ç»„ä»¶çš„åŸºç±»ï¼ŒæŠ½è±¡å‡ºäº†æ„é€ å‡½æ•°ï¼Œå¹¶ä¸”å®ç°äº†å¤§éƒ¨åˆ†ç»„ä»¶ä¸å¤–éƒ¨çš„å¸ƒå±€ï¼Œé€»è¾‘åŠ¨ä½œç­‰å‡½æ•°ã€‚å†å­ç±»åˆ™ä¸“æ³¨ä¸å®ç°å­ç±»è‡ªèº«çš„UIä¸åŠŸèƒ½ã€‚è¿˜æœ‰ä¸€ä¸ªå°ç»†èŠ‚ï¼Œä¹Ÿå¯ä»¥çœ‹å‡ºMJRefreshå¯¹å¤ç”¨çš„è¿½æ±‚ï¼Œåœ¨setStateå‡½æ•°çš„å®ç°ä¸­ï¼Œå¦‚æœæ–°çš„çŠ¶æ€ä¸æ—§çš„çŠ¶æ€ä¸€è‡´ï¼Œåˆ™ä¸éœ€è¦åšä»»ä½•é€»è¾‘ï¼Œæ‰€æœ‰çš„setStateå‡½æ•°éƒ½éœ€è¦è¿™ä¸ªé€»è¾‘ï¼ŒMJRefreshä¸­é‡‡ç”¨çš„å®çš„æ–¹å¼è¿›è¡Œæ›¿æ¢ï¼Œä½¿ä»£ç å˜å¾—ååˆ†ç®€æ´ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314#define MJRefreshCheckState \\MJRefreshState oldState = self.state; \\if (state == oldState) return; \\[super setState:state];///////////- (void)setState:(MJRefreshState)state&#123; MJRefreshCheckState // è®¾ç½®çŠ¶æ€æ–‡å­— self.stateLabel.text = self.stateTitles[@(state)];&#125; 2.å¦ä¸€ç§å®‰å…¨æ‰§è¡Œblockçš„æ–¹å¼å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬åœ¨æ‰§è¡Œblockçš„æ—¶å€™éƒ½ä¼šå…ˆæ£€æŸ¥ä¸‹è¿™ä¸ªblockæ˜¯å¦ä¸ºnilï¼Œä¸‹é¢æ˜¯æˆ‘ä»¬å¸¸ç”¨çš„ä»£ç ï¼š 123if (block) &#123; block();&#125; åœ¨MJRefreshä¸­æœ‰ä½¿ç”¨é—®å·å†’å·çš„æ–¹å¼æ¥ä»£æ›¿ifè¯­å¥ï¼Œå¦‚ä¸‹ï¼š 1234- (void)executeReloadDataBlock&#123; ! self.mj_reloadDataBlock ? : self.mj_reloadDataBlock(self.mj_totalDataCount);&#125; è¿™ä¸ªè¡¨è¾¾å¼åˆçœ‹ä¼šæœ‰ä¸€äº›ç–‘æƒ‘ï¼Œå…¶å®?:çš„ä½œç”¨æ˜¯è¿”å›ä¸€ä¸ªå€¼ï¼Œå¦‚æœ?:å‰çš„è¡¨è¾¾å¼ä¸ºnilçš„è¯ï¼Œåˆ™ä¼šè¿”å›?:åé¢çš„å€¼ï¼ŒåŒæ ·ï¼Œå¦‚æœ?:å‰é¢çš„è¡¨è¾¾å¼ä¸ä¸ºnilçš„è¯ï¼Œåˆ™ç›´æ¥è¿”å›ï¼Œä¸ä¼šæ‰§è¡Œåˆ°åé¢çš„è¡¨è¾¾å¼ï¼Œä¸Šé¢çš„å†™æ³•å…¶å®å’Œç¬¬ä¸€ç§ifè¯­å¥çš„ä½œç”¨å®Œå…¨ä¸€è‡´ã€‚","categories":[{"name":"iOSç¬¬ä¸‰æ–¹åº“","slug":"iOSç¬¬ä¸‰æ–¹åº“","permalink":"http://huishao.cc/categories/iOSç¬¬ä¸‰æ–¹åº“/"}],"tags":[],"keywords":[{"name":"iOSç¬¬ä¸‰æ–¹åº“","slug":"iOSç¬¬ä¸‰æ–¹åº“","permalink":"http://huishao.cc/categories/iOSç¬¬ä¸‰æ–¹åº“/"}]},{"title":"SDWebImageæºç åˆ†æ","slug":"363SDWebImageæºç åˆ†æ","date":"2017-12-28T16:00:00.000Z","updated":"2021-07-15T08:17:02.224Z","comments":true,"path":"2017/12/29/363SDWebImageæºç åˆ†æ/","link":"","permalink":"http://huishao.cc/2017/12/29/363SDWebImageæºç åˆ†æ/","excerpt":"","text":"SDWebImageæºç åˆ†æ æ¯æ¬¡è¯»ä¼˜ç§€çš„ä»£ç éƒ½æ˜¯ä¸€æ¬¡æ·±åˆ»çš„å­¦ä¹ ï¼Œæ¯ä¸€æ¬¡æ¨¡ä»¿ï¼Œéƒ½æ˜¯åˆ›é€ çš„å¼€å§‹ï¼ â€”â€”QQ 316045346 æ¬¢è¿äº¤æµ SDWebImageæ˜¯iOSå¼€å‘ä¸­éå¸¸æµè¡Œçš„ä¸€ä¸ªç½‘ç»œå›¾ç‰‡åŠ è½½åº“ï¼Œå¦‚æœä½ è§‚å¯Ÿå…¶æºç ï¼Œä¼šå‘ç°å…¶ä¸­çš„æ–‡ä»¶éå¸¸å¤šï¼Œè™½ç„¶æ–‡ä»¶æ•°å¾ˆå¤šï¼Œä½†æ˜¯ä½œè€…çš„ä»£ç ç»“æ„å’Œæ¡ç†å´æ˜¯éæ¸…æ™°ã€‚SDWebImageçš„ä»£ç ç»“æ„åŸºæœ¬å¯ä»¥åˆ†ä¸º3å—ï¼šåº”ç”¨å±‚ç±»åˆ«ã€æ ¸å¿ƒåŠŸèƒ½ç±»ã€å·¥å…·ç±»ä¸ç±»åˆ«ã€‚å…¶ä¸­æˆ‘ä»¬æœ€å¸¸ä½¿ç”¨çš„æ˜¯åº”ç”¨å±‚çš„ç±»åˆ«ã€‚ä¾‹å¦‚UIImageViewçš„å›¾ç‰‡åŠ è½½ï¼ŒUIButtonçš„å›¾ç‰‡åŠ è½½ç­‰ã€‚ ä¸€ã€å¸®åŠ©ç±»ä¸ç±»åˆ«çš„è§£æ1.NSData+ImageContentTypeè¿™ä¸ªç±»åˆ«æ˜¯ä¸€ä¸ªå›¾ç‰‡æ•°æ®çš„æ ¼å¼å¸®åŠ©ç±»ï¼Œä½¿ç”¨å®ƒå¯ä»¥æ–¹ä¾¿çš„è·å–å›¾ç‰‡æ•°æ®çš„å›¾ç‰‡æ ¼å¼ï¼Œå…¶ä¸­æšä¸¾äº†å¸¸ç”¨çš„å›¾ç‰‡æ ¼å¼å¦‚ä¸‹ï¼š 123456789typedef NS_ENUM(NSInteger, SDImageFormat) &#123; SDImageFormatUndefined = -1, //æœªçŸ¥æ ¼å¼ SDImageFormatJPEG = 0, //jpeg SDImageFormatPNG, //png SDImageFormatGIF, //gif SDImageFormatTIFF, //tiff SDImageFormatWebP, //webp SDImageFormatHEIC //heic&#125;; å…¶åŸç†æ˜¯æ ¹æ®å›¾ç‰‡æ•°æ®çš„ç¬¬1ä¸ªå­—èŠ‚ç è¿›è¡Œåˆ†æï¼Œä¸åŒæ ¼å¼çš„å›¾åƒæ•°æ®åœ¨å¼€å¤´éƒ½ä¼šæœ‰ä¸€éƒ¨åˆ†çš„ç”¨æ¥è¡¨æ˜å›¾åƒä¿¡æ¯çš„æ•°æ®å—ï¼Œé€šè¿‡å®ƒå¯ä»¥è·å–å›¾ç‰‡çš„å…·ä½“æ ¼å¼ã€‚è¿™ä¸ªç±»åˆ«ä¸­åªæä¾›äº†ä¸¤ä¸ªæ–¹æ³•ï¼š 1234//è·å–å›¾åƒæ•°æ®æ ¼å¼+ (SDImageFormat)sd_imageFormatForImageData:(nullable NSData *)data;//å°†SDImageFormatè½¬æ¢æˆCFStringRef+ (nonnull CFStringRef)sd_UTTypeFromSDImageFormat:(SDImageFormat)format; 2ã€SDWebImageFrameè¿™ä¸ªç±»æ˜¯SDWebImageä¸­å°è£…çš„å›¾åƒå¸§ç±»ï¼Œä¸»è¦ç”¨æ¥åˆ›å»ºåŠ¨ç”»å›¾åƒã€‚ 123456//å½“å‰å¸§å›¾åƒ@property (nonatomic, strong, readonly, nonnull) UIImage *image;//æ—¶é—´@property (nonatomic, readonly, assign) NSTimeInterval duration;//åˆå§‹åŒ–æ–¹æ³•+ (instancetype _Nonnull)frameWithImage:(UIImage * _Nonnull)image duration:(NSTimeInterval)duration; 3.UIImageçš„ç¼–ç ä¸è§£ç SDWebImageCoderä¸­å®šä¹‰äº†ä¸€ä¸ªåè®®ï¼Œå…¶ä¸­çº¦å®šäº†æ–¹æ³•æ¥å¯¹å›¾åƒæ•°æ®è¿›è¡Œè§£ç ä¸ç¼–ç ï¼Œå®ç°è¿™ä¸ªåè®®çš„ä¸»è¦æœ‰SDWebImageIOCoderå’ŒSDWebImageGIFCoderã€‚ 12345678910111213141516//æ•°æ®æ˜¯å¦å¯ä»¥è¿›è¡Œè§£ç  é™¤äº†webpç±»å‹çš„ å…¶ä»–ç±»å‹çš„å›¾åƒéƒ½å¯ä»¥è§£ç - (BOOL)canDecodeFromData:(nullable NSData *)data;//è¿›è¡Œå›¾ç‰‡æ•°æ®è§£ç - (nullable UIImage *)decodedImageWithData:(nullable NSData *)data;//è¿›è¡Œå¢é‡è§£ç - (nullable UIImage *)decompressedImageWithImage:(nullable UIImage *)image data:(NSData * _Nullable * _Nonnull)data options:(nullable NSDictionary&lt;NSString*, NSObject*&gt;*)optionsDict;//è·å–æ­¤ç±»å‹å›¾åƒæ˜¯å¦å¯ä»¥ç¼–ç - (BOOL)canEncodeToFormat:(SDImageFormat)format;//å°†å›¾ç‰‡ç¼–ç ä¸ºæ•°æ®- (nullable NSData *)encodedDataWithImage:(nullable UIImage *)image format:(SDImageFormat)format;//è·å–æ­¤å›¾åƒæ•°æ®æ˜¯å¦å¯ä»¥å¢é‡è§£ç - (BOOL)canIncrementallyDecodeFromData:(nullable NSData *)data;//è¿›è¡Œå¢é‡è§£ç - (nullable UIImage *)incrementallyDecodedImageWithData:(nullable NSData *)data finished:(BOOL)finished; 4.å›¾åƒæ•°æ®é¢„åŠ è½½SDWebImagePrefetcherç±»æä¾›äº†å›¾åƒæ•°æ®çš„é¢„åŠ è½½åŠŸèƒ½ï¼Œåœ¨è¿›è¡Œç”¨æˆ·ä½“éªŒä¼˜åŒ–ï¼Œéœ€è¦é¢„åŠ è½½æŸäº›å¸¸æ€å›¾åƒæ—¶ï¼Œå¯ä»¥ç”¨ä½¿ç”¨è¿™ä¸ªç±»ã€‚ 123456789101112131415161718@interface SDWebImagePrefetcher : NSObject//ç®¡ç†ä¸­å¿ƒ@property (strong, nonatomic, readonly, nonnull) SDWebImageManager *manager;//è®¾ç½®æœ€å¤§çš„åŒæ—¶ä¸‹è½½æ•°@property (nonatomic, assign) NSUInteger maxConcurrentDownloads;//é…ç½® æšä¸¾ è®¾ç½®ä¼˜å…ˆçº§ç­‰@property (nonatomic, assign) SDWebImageOptions options;//å•ä¾‹å¯¹è±¡+ (nonnull instancetype)sharedImagePrefetcher;//æ„é€ æ–¹æ³•- (nonnull instancetype)initWithImageManager:(nonnull SDWebImageManager *)manager NS_DESIGNATED_INITIALIZER;//è¿›è¡Œé¢„ä¸‹è½½- (void)prefetchURLs:(nullable NSArray&lt;NSURL *&gt; *)urls;- (void)prefetchURLs:(nullable NSArray&lt;NSURL *&gt; *)urls progress:(nullable SDWebImagePrefetcherProgressBlock)progressBlock completed:(nullable SDWebImagePrefetcherCompletionBlock)completionBlock;//å–æ¶ˆé¢„ä¸‹è½½è¡Œä¸º- (void)cancelPrefetching; SDWebImagePrefetcherè¿˜æä¾›äº†ä»£ç†æ¥å¯¹é¢„ä¸‹è½½è¿‡ç¨‹è¿›è¡Œç›‘å¬ï¼Œå¦‚ä¸‹ï¼š 1234//å½“ä¸€å¼ å›¾ç‰‡è¢«ä¸‹è½½å®Œåè°ƒç”¨- (void)imagePrefetcher:(nonnull SDWebImagePrefetcher *)imagePrefetcher didPrefetchURL:(nullable NSURL *)imageURL finishedCount:(NSUInteger)finishedCount totalCount:(NSUInteger)totalCount;//ä¸ä¸‹è½½ä»»åŠ¡å…¨éƒ¨ç»“æŸåè°ƒç”¨- (void)imagePrefetcher:(nonnull SDWebImagePrefetcher *)imagePrefetcher didFinishWithTotalCount:(NSUInteger)totalCount skippedCount:(NSUInteger)skippedCount; äºŒã€æ ¸å¿ƒåŠŸèƒ½SDWebImageçš„æ ¸å¿ƒåŠŸèƒ½ç±»ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 1.ç¼“å­˜ç®¡ç†ç±»SDImageCacheSDImageCacheç±»è´Ÿè´£æ‰€æœ‰ç½‘ç»œå›¾ç‰‡æ•°æ®çš„ç¼“å­˜ï¼Œå…¶ä»é€»è¾‘ä¸Šåˆ†ä¸ºä¸¤çº§ç¼“å­˜ï¼Œå†…å­˜ç¼“å­˜å’Œç¡¬ç›˜ç¼“å­˜ã€‚å¼€å‘è€…å¯ä»¥ä½¿ç”¨å•ä¾‹æ–¹æ³•æ¥è·å–é»˜è®¤çš„SDImageCacheå®ä¾‹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç‰¹æ®Šçš„Nameå€¼æ¥åˆ›å»ºç¼“å­˜å®ä¾‹ï¼Œå¸¸ç”¨å‡½æ•°åˆ—ä¸¾å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334//ç¼“å­˜å›¾ç‰‡åˆ°å†…å­˜å’Œç£ç›˜- (void)storeImage:(nullable UIImage *)image forKey:(nullable NSString *)key completion:(nullable SDWebImageNoParamsBlock)completionBlock;//ç¼“å­˜å›¾ç‰‡åˆ°ç£ç›˜- (void)storeImage:(nullable UIImage *)image forKey:(nullable NSString *)key toDisk:(BOOL)toDisk completion:(nullable SDWebImageNoParamsBlock)completionBlock;- (void)storeImage:(nullable UIImage *)image imageData:(nullable NSData *)imageData forKey:(nullable NSString *)key toDisk:(BOOL)toDisk completion:(nullable SDWebImageNoParamsBlock)completionBlock;- (void)storeImageDataToDisk:(nullable NSData *)imageData forKey:(nullable NSString *)key;//å¼‚æ­¥æ£€æŸ¥ç£ç›˜ç¼“å­˜æ˜¯å¦å­˜åœ¨- (void)diskImageExistsWithKey:(nullable NSString *)key completion:(nullable SDWebImageCheckCacheCompletionBlock)completionBlock;//æ£€æŸ¥å†…å­˜ç¼“å­˜æ˜¯å¦å­˜åœ¨- (nullable UIImage *)imageFromMemoryCacheForKey:(nullable NSString *)key;//è·å–ç£ç›˜ç¼“å­˜æ•°æ®- (nullable UIImage *)imageFromDiskCacheForKey:(nullable NSString *)key;//è·å–å†…å­˜å’Œç£ç›˜ç¼“å­˜æ•°æ®- (nullable UIImage *)imageFromCacheForKey:(nullable NSString *)key;//å¼‚æ­¥åˆ é™¤ç¼“å­˜- (void)removeImageForKey:(nullable NSString *)key withCompletion:(nullable SDWebImageNoParamsBlock)completion;- (void)removeImageForKey:(nullable NSString *)key fromDisk:(BOOL)fromDisk withCompletion:(nullable SDWebImageNoParamsBlock)completion;//æ¸…é™¤æ‰€æœ‰å†…å­˜ç¼“å­˜- (void)clearMemory;//åˆ é™¤æ‰€æœ‰è¿‡æœŸæ•°æ®- (void)deleteOldFilesWithCompletionBlock:(nullable SDWebImageNoParamsBlock)completionBlock;//è·å–ç£ç›˜ç¼“å­˜å¤§å°- (NSUInteger)getSize;//è·å–ç£ç›˜ç¼“å­˜å›¾ç‰‡æ•°- (NSUInteger)getDiskCount; SDImageCacheConfigç”¨æ¥å¯¹ç¼“å­˜è¿›è¡Œé…ç½®ï¼Œå¦‚ä¸‹ï¼š 123456//æ˜¯å¦å…è®¸ç¼“å­˜åˆ°å†…å­˜@property (assign, nonatomic) BOOL shouldCacheImagesInMemory;//ç¼“å­˜ç”Ÿå‘½@property (assign, nonatomic) NSInteger maxCacheAge;//æœ€å¤§ç¼“å­˜å®¹é‡@property (assign, nonatomic) NSUInteger maxCacheSize; 2.ä¸‹è½½å™¨SDWebImageDownloaderSDWebImageDownloaderæä¾›å¯¹å›¾ç‰‡ä¸‹è½½çš„æ”¯æŒç®¡ç†ï¼Œå…¶å¯ä»¥é…ç½®åŒæ—¶æœ€å¤§ä¸‹è½½æ•°é‡ï¼Œä¸‹è½½è¶…æ—¶ç­‰ï¼š 12345678910111213141516171819202122232425//åŒæ—¶æœ€å¤§ä¸‹è½½æ•°é‡@property (assign, nonatomic) NSInteger maxConcurrentDownloads;//å½“å‰æ­£åœ¨ä¸‹è½½çš„ä»»åŠ¡æ•°é‡@property (readonly, nonatomic) NSUInteger currentDownloadCount;//è®¾ç½®è¶…æ—¶æ—¶é—´@property (assign, nonatomic) NSTimeInterval downloadTimeout;//è¯ä¹¦@property (strong, nonatomic, nullable) NSURLCredential *urlCredential;//ç”¨æˆ·å@property (strong, nonatomic, nullable) NSString *username;//å¯†ç @property (strong, nonatomic, nullable) NSString *password;//è®¾ç½®è¯·æ±‚å¤´- (void)setValue:(nullable NSString *)value forHTTPHeaderField:(nullable NSString *)field;//è·å–è¯·æ±‚å¤´- (nullable NSString *)valueForHTTPHeaderField:(nullable NSString *)field;//å¼€å§‹ä¸‹è½½ä»»åŠ¡- (nullable SDWebImageDownloadToken *)downloadImageWithURL:(nullable NSURL *)url options:(SDWebImageDownloaderOptions)options progress:(nullable SDWebImageDownloaderProgressBlock)progressBlock completed:(nullable SDWebImageDownloaderCompletedBlock)completedBlock;//å–æ¶ˆä¸‹è½½ä»»åŠ¡- (void)cancel:(nullable SDWebImageDownloadToken *)token;//å–æ¶ˆæ‰€æœ‰ä¸‹è½½ä»»åŠ¡- (void)cancelAllDownloads; ä¸‰ã€åº”ç”¨ç±»åˆ«1.UIButton+WebCacheè¿™ä¸ªç±»åˆ«ç”¨æ¥å¯¹æŒ‰é’®è®¾ç½®ç½‘ç»œå›¾ç‰‡ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253//å½“å‰çŠ¶æ€çš„å›¾ç‰‡URL- (nullable NSURL *)sd_currentImageURL;//è·å–æŒ‡å®šçŠ¶æ€çš„å›¾ç‰‡URL- (nullable NSURL *)sd_imageURLForState:(UIControlState)state;//ä¸ºæŸä¸ªçŠ¶æ€è®¾ç½®ç½‘ç»œå›¾ç‰‡- (void)sd_setImageWithURL:(nullable NSURL *)url forState:(UIControlState)state;- (void)sd_setImageWithURL:(nullable NSURL *)url forState:(UIControlState)state placeholderImage:(nullable UIImage *)placeholder;- (void)sd_setImageWithURL:(nullable NSURL *)url forState:(UIControlState)state placeholderImage:(nullable UIImage *)placeholder options:(SDWebImageOptions)options;- (void)sd_setImageWithURL:(nullable NSURL *)url forState:(UIControlState)state completed:(nullable SDExternalCompletionBlock)completedBlock;- (void)sd_setImageWithURL:(nullable NSURL *)url forState:(UIControlState)state placeholderImage:(nullable UIImage *)placeholder completed:(nullable SDExternalCompletionBlock)completedBlock;- (void)sd_setImageWithURL:(nullable NSURL *)url forState:(UIControlState)state placeholderImage:(nullable UIImage *)placeholder options:(SDWebImageOptions)options completed:(nullable SDExternalCompletionBlock)completedBlock;//ä¸‹é¢è¿™äº›æ–¹æ³•è®¾ç½®æŒ‰é’®çš„èƒŒæ™¯å›¾- (nullable NSURL *)sd_currentBackgroundImageURL;- (nullable NSURL *)sd_backgroundImageURLForState:(UIControlState)state;- (void)sd_setBackgroundImageWithURL:(nullable NSURL *)url forState:(UIControlState)state;- (void)sd_setBackgroundImageWithURL:(nullable NSURL *)url forState:(UIControlState)state placeholderImage:(nullable UIImage *)placeholder;- (void)sd_setBackgroundImageWithURL:(nullable NSURL *)url forState:(UIControlState)state placeholderImage:(nullable UIImage *)placeholder options:(SDWebImageOptions)options;- (void)sd_setBackgroundImageWithURL:(nullable NSURL *)url forState:(UIControlState)state completed:(nullable SDExternalCompletionBlock)completedBlock;- (void)sd_setBackgroundImageWithURL:(nullable NSURL *)url forState:(UIControlState)state placeholderImage:(nullable UIImage *)placeholder completed:(nullable SDExternalCompletionBlock)completedBlock;- (void)sd_setBackgroundImageWithURL:(nullable NSURL *)url forState:(UIControlState)state placeholderImage:(nullable UIImage *)placeholder options:(SDWebImageOptions)options completed:(nullable SDExternalCompletionBlock)completedBlock;//å–æ¶ˆå›¾ç‰‡ä¸‹è½½- (void)sd_cancelImageLoadForState:(UIControlState)state;- (void)sd_cancelBackgroundImageLoadForState:(UIControlState)state; 2.UIImageView+WebCacheä¸UIImageView+HighlightedWebCacheè¿™ä¸¤ä¸ªç±»åˆ«çš„ä½œç”¨éƒ½æ˜¯å¯¹UIImageViewå®ä¾‹è¿›è¡Œå›¾ç‰‡è®¾ç½®ï¼Œåˆ†åˆ«è®¾ç½®æ­£å¸¸çŠ¶æ€çš„å›¾ç‰‡å’Œé«˜äº®çŠ¶æ€çš„å›¾ç‰‡ã€‚åªä¸¾ä¾‹UIImageView+WebCacheä¸­æ–¹æ³•å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930//è®¾ç½®ç½‘ç»œå›¾ç‰‡- (void)sd_setImageWithURL:(nullable NSURL *)url;- (void)sd_setImageWithURL:(nullable NSURL *)url placeholderImage:(nullable UIImage *)placeholder;- (void)sd_setImageWithURL:(nullable NSURL *)url placeholderImage:(nullable UIImage *)placeholder options:(SDWebImageOptions)options;- (void)sd_setImageWithURL:(nullable NSURL *)url completed:(nullable SDExternalCompletionBlock)completedBlock;- (void)sd_setImageWithURL:(nullable NSURL *)url placeholderImage:(nullable UIImage *)placeholder completed:(nullable SDExternalCompletionBlock)completedBlock;- (void)sd_setImageWithURL:(nullable NSURL *)url placeholderImage:(nullable UIImage *)placeholder options:(SDWebImageOptions)options completed:(nullable SDExternalCompletionBlock)completedBlock;- (void)sd_setImageWithURL:(nullable NSURL *)url placeholderImage:(nullable UIImage *)placeholder options:(SDWebImageOptions)options progress:(nullable SDWebImageDownloaderProgressBlock)progressBlock completed:(nullable SDExternalCompletionBlock)completedBlock;- (void)sd_setImageWithPreviousCachedImageWithURL:(nullable NSURL *)url placeholderImage:(nullable UIImage *)placeholder options:(SDWebImageOptions)options progress:(nullable SDWebImageDownloaderProgressBlock)progressBlock completed:(nullable SDExternalCompletionBlock)completedBlock;//å¯¹ä¸€ç»„urlè¿›è¡Œä¸‹è½½å¹¶ä»¥åŠ¨ç”»æ–¹å¼æ˜¾ç¤º- (void)sd_setAnimationImagesWithURLs:(nonnull NSArray&lt;NSURL *&gt; *)arrayOfURLs;//å–æ¶ˆå½“å‰å›¾ç‰‡ä¸‹è½½- (void)sd_cancelCurrentAnimationImagesLoad; å…³äºSDWebImageOptionsï¼Œå®ƒæ˜¯ä¸€ä¸ªé…ç½®æšä¸¾ï¼š 12345678910111213141516171819202122232425typedef NS_OPTIONS(NSUInteger, SDWebImageOptions) &#123; //é…ç½®è¿™ä¸ªå‚æ•°ä¸‹è½½å¤±è´¥çš„urlå°†ä¼šé‡è¯•ä¸‹è½½ SDWebImageRetryFailed = 1 &lt;&lt; 0, //ä½ä¼˜å…ˆçº§ SDWebImageLowPriority = 1 &lt;&lt; 1, //ä»…ä»…è¿›è¡Œå†…å­˜ç¼“å­˜ SDWebImageCacheMemoryOnly = 1 &lt;&lt; 2, //è¿›è¡Œåˆ†æ­¥ä¸‹è½½ SDWebImageProgressiveDownload = 1 &lt;&lt; 3, //åˆ·æ–°ç¼“å­˜ SDWebImageRefreshCached = 1 &lt;&lt; 4, //æ”¯æŒåå° SDWebImageContinueInBackground = 1 &lt;&lt; 5, //ä¿æŒcookie SDWebImageHandleCookies = 1 &lt;&lt; 6, //å…è®¸è¯ä¹¦ SDWebImageAllowInvalidSSLCertificates = 1 &lt;&lt; 7, //é«˜ä¼˜å…ˆçº§ SDWebImageHighPriority = 1 &lt;&lt; 8, //é…ç½®æ­¤å‚æ•° å½“å›¾ç‰‡åŠ è½½ç»“æŸåæ‰ä¼šæ˜¾ç¤ºplaceholder SDWebImageDelayPlaceholder = 1 &lt;&lt; 9, //æ‰§è¡Œå›¾ç‰‡å˜æ¢ SDWebImageTransformAnimatedImage = 1 &lt;&lt; 10, SDWebImageScaleDownLargeImages = 1 &lt;&lt; 12&#125;;","categories":[{"name":"iOSç¬¬ä¸‰æ–¹åº“","slug":"iOSç¬¬ä¸‰æ–¹åº“","permalink":"http://huishao.cc/categories/iOSç¬¬ä¸‰æ–¹åº“/"}],"tags":[],"keywords":[{"name":"iOSç¬¬ä¸‰æ–¹åº“","slug":"iOSç¬¬ä¸‰æ–¹åº“","permalink":"http://huishao.cc/categories/iOSç¬¬ä¸‰æ–¹åº“/"}]},{"title":"ä»AFNetworkingæºç åˆ†æåˆ°åº”ç”¨å…¨è§£","slug":"362ä»AFNetworkingæºç åˆ†æåˆ°åº”ç”¨å…¨è§£","date":"2017-11-23T16:00:00.000Z","updated":"2021-07-15T07:28:26.336Z","comments":true,"path":"2017/11/24/362ä»AFNetworkingæºç åˆ†æåˆ°åº”ç”¨å…¨è§£/","link":"","permalink":"http://huishao.cc/2017/11/24/362ä»AFNetworkingæºç åˆ†æåˆ°åº”ç”¨å…¨è§£/","excerpt":"","text":"ä»AFNetworkingæºç åˆ†æåˆ°åº”ç”¨å…¨è§£ä¸€ã€å¼•è¨€AFNetworkingæ˜¯iOS/OSå¼€å‘ä¸­å¸¸ç”¨çš„ä¸€ä¸ªç¬¬ä¸‰æ–¹ç½‘ç»œåº“ï¼Œå¯ä»¥è¯´å®ƒæ˜¯ç›®å‰æœ€æµè¡Œçš„ç½‘ç»œåº“ï¼Œä½†å…¶ä»£ç ç»“æ„å…¶å®å¹¶ä¸å¤æ‚ï¼Œä¹Ÿå¯ä»¥è¯´éå¸¸ç®€æ´ä¼˜ç¾ã€‚åœ¨AFNetworkingä¸­ï¼Œå¤§é‡ä½¿ç”¨çš„çº¿ç¨‹å®‰å…¨çš„å¼€å‘æŠ€å·§ï¼Œè¯»æ­¤æºç ä¹Ÿæ˜¯ä¸€æ¬¡å¾ˆå¥½çš„å¤šçº¿ç¨‹å­¦ä¹ æœºä¼šã€‚æœ¬ç¯‡åšå®¢ä»ä¸»è¦ç»“æ„å’Œç½‘ç»œè¯·æ±‚çš„ä¸»æµç¨‹è¿›è¡Œåˆ†äº«ï¼Œè§£æäº†AFNetworkingçš„è®¾è®¡æ€è·¯ä¸å·¥ä½œåŸç†ï¼Œåé¢è¿˜æœ‰å…¶ä¸­æä¾›çš„UIæ‰©å±•åŒ…çš„æ¥å£åº”ç”¨æ€»ç»“ã€‚ æ¯æ¬¡è¯»ä¼˜ç§€çš„ä»£ç éƒ½æ˜¯ä¸€æ¬¡æ·±åˆ»çš„å­¦ä¹ ï¼Œæ¯ä¸€æ¬¡æ¨¡ä»¿ï¼Œéƒ½æ˜¯åˆ›é€ çš„å¼€å§‹ï¼ äºŒã€æ ¸å¿ƒæºç åˆ†æå¹³æ—¶æˆ‘ä»¬åœ¨ä½¿ç”¨AFNetworkingæ¡†æ¶æ—¶ï¼Œå¤§å¤šåªä½¿ç”¨å…¶ä¸­çš„è¯·æ±‚ç®¡ç†åŠŸèƒ½ã€‚å…¶å®ï¼Œè¿™ä¸ªæœ‰åçš„æ¡†æ¶ä¸­è¿˜æä¾›äº†è®¸å¤šå…¶ä»–çš„å·¥å…·ï¼Œé™¤äº†å¯ä»¥æ–¹ä¾¿çš„è¿›è¡Œç½‘ç»œå®‰å…¨éªŒè¯ï¼Œè¯·æ±‚æ•°æ®ä¸å›æ‰§æ•°æ®çš„åºåˆ—åŒ–ï¼Œç½‘ç»œçŠ¶æ€èŒ¶å°ç­‰åŸºç¡€åº”ç”¨å¤–ï¼Œè¿˜æä¾›äº†UIKitå·¥å…·åŒ…ï¼Œå…¶ä¸­æä¾›æœ‰å¸¸ç”¨ç»„ä»¶çš„æ‰©å±•ï¼Œå›¾ç‰‡ä¸‹è½½å™¨å’Œç¼“å­˜å™¨ç­‰ã€‚ å¯¹äºAFNetworkingæ¡†æ¶çš„æ ¸å¿ƒï¼Œæ— éAFURLSesstionManagerç±»ï¼Œè¿™ä¸ªç±»æ˜¯åŸºäºç³»ç»Ÿçš„NSURLSesstionå›è¯ç±»è¿›è¡Œçš„ç®¡ç†è€…åŒ…è£…ï¼Œä¸‹å›¾æ˜¯AFæ¡†æ¶ä¸€ä¸ªæ•´ä½“çš„ç»“æ„ã€‚ æŠŠæ¡è¿™ä¸ªç»“æ„ï¼Œæˆ‘ä»¬å†æ¥å­¦ä¹ AFæ¡†æ¶å°†å˜å¾—ååˆ†å®¹æ˜“ä¸Šæ‰‹ï¼Œæ‰“å¼€AFURLSesstionManagerç±»ï¼Œä½ ä¼šå‘ç°å®ƒæœ‰1200å¤šè¡Œä»£ç ï¼Œä½†æ˜¯AFURLSesstionManagerç±»çœŸæ­£çš„å®ç°ç¡®å®ä»500å¤šè¡Œå¼€å§‹çš„ï¼Œä¹‹å‰çš„ä»£ç æ˜¯å†…éƒ¨çš„ä»£ç†å¤„ç†ç±»ï¼Œå°±åƒåœ¨MVVMæ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬æ€»æ˜¯å–œæ¬¢å°†æ§åˆ¶å™¨çš„é€»è¾‘æ”¾å…¥View-Modelä¸­ä¸€æ ·ï¼ŒAFURLSesstionManagerå®ä¾‹ä¹Ÿä¼šå°†é€šçŸ¥ï¼Œå›è°ƒç­‰æ“ä½œäº¤ç»™è¿™ä¸ªä»£ç†å®ä¾‹å¤„ç†ã€‚ 1.AFURLSesstionManageré¦–å…ˆå…ˆæ¥çœ‹AFURLSesstionManagerç±»çš„åˆå§‹åŒ–æ–¹æ³•ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445- (instancetype)initWithSessionConfiguration:(NSURLSessionConfiguration *)configuration &#123; self = [super init]; if (!self) &#123; return nil; &#125; if (!configuration) &#123; //ä½¿ç”¨é»˜è®¤ configuration = [NSURLSessionConfiguration defaultSessionConfiguration]; &#125; self.sessionConfiguration = configuration; //ä»£ç†æ–¹æ³•æ‰§è¡Œåšåœ¨çš„æ“ä½œé˜Ÿåˆ— self.operationQueue = [[NSOperationQueue alloc] init]; self.operationQueue.maxConcurrentOperationCount = 1; //åˆ›å»ºsesstionä¼šè¯ self.session = [NSURLSession sessionWithConfiguration:self.sessionConfiguration delegate:self delegateQueue:self.operationQueue]; //é»˜è®¤å°†è¿”å›æ•°æ®æŒ‰ç…§jsonè¿›è¡Œè§£æ self.responseSerializer = [AFJSONResponseSerializer serializer]; //ä½¿ç”¨é»˜è®¤çš„å®‰å…¨éªŒè¯ self.securityPolicy = [AFSecurityPolicy defaultPolicy];#if !TARGET_OS_WATCH //ä½¿ç”¨é»˜è®¤çš„ç½‘ç»œçŠ¶æ€ç›‘æµ‹ self.reachabilityManager = [AFNetworkReachabilityManager sharedManager];#endif //æ¯ä¸€ä¸ªè¯·æ±‚ä»»åŠ¡éƒ½å¯¹åº”æœ‰ä¸€ä¸ªdelegate å­˜åœ¨è¿™é‡Œé¢ self.mutableTaskDelegatesKeyedByTaskIdentifier = [[NSMutableDictionary alloc] init]; //åˆå§‹åŒ–é” self.lock = [[NSLock alloc] init]; self.lock.name = AFURLSessionManagerLockName; //ä¸‹é¢çš„åšæ³•æ˜¯ä¸ºäº†é˜²æ­¢ è¢«ä¿®æ”¹äº†sesstionçš„ç³»ç»Ÿå®ç°æœ‰åˆå§‹ä»»åŠ¡ [self.session getTasksWithCompletionHandler:^(NSArray *dataTasks, NSArray *uploadTasks, NSArray *downloadTasks) &#123; for (NSURLSessionDataTask *task in dataTasks) &#123; [self addDelegateForDataTask:task uploadProgress:nil downloadProgress:nil completionHandler:nil]; &#125; for (NSURLSessionUploadTask *uploadTask in uploadTasks) &#123; [self addDelegateForUploadTask:uploadTask progress:nil completionHandler:nil]; &#125; for (NSURLSessionDownloadTask *downloadTask in downloadTasks) &#123; [self addDelegateForDownloadTask:downloadTask progress:nil destination:nil completionHandler:nil]; &#125; &#125;]; return self;&#125; ç”¨AFURLSesstionManageråˆ›å»ºè¯·æ±‚ä»»åŠ¡æœ‰ä¸‰ç±»ï¼Œå½“ç„¶ä¹Ÿå¯¹åº”NSURLSesstionä¸­çš„æ•°æ®è¯·æ±‚ä»»åŠ¡ï¼Œä¸Šä¼ ä»»åŠ¡å’Œä¸‹è½½ä»»åŠ¡ã€‚æˆ‘ä»¬ä»¥æ•°æ®è¯·æ±‚ä»»åŠ¡ä¸ºä¾‹ï¼Œæ ¸å¿ƒæ–¹æ³•å¦‚ä¸‹ï¼š 123456789101112131415- (NSURLSessionDataTask *)dataTaskWithRequest:(NSURLRequest *)request uploadProgress:(nullable void (^)(NSProgress *uploadProgress)) uploadProgressBlock downloadProgress:(nullable void (^)(NSProgress *downloadProgress)) downloadProgressBlock completionHandler:(nullable void (^)(NSURLResponse *response, id _Nullable responseObject, NSError * _Nullable error))completionHandler &#123; __block NSURLSessionDataTask *dataTask = nil; url_session_manager_create_task_safely(^&#123; //åˆ›å»ºä»»åŠ¡ dataTask = [self.session dataTaskWithRequest:request]; &#125;); //è¿›è¡Œä»£ç†è®¾ç½® [self addDelegateForDataTask:dataTask uploadProgress:uploadProgressBlock downloadProgress:downloadProgressBlock completionHandler:completionHandler]; return dataTask;&#125; ä¸Šä¼ ä»»åŠ¡å’Œä¸‹è½½ä»»åŠ¡çš„åˆ›å»ºæºç å’Œä¸Šé¢å¤§åŒå°å¼‚ï¼Œåªæ˜¯åˆ›å»ºå‡ºçš„ä»»åŠ¡ç±»å‹ä¸åŒï¼Œå®ƒä»¬éƒ½è¦è¿›è¡Œä¸‹ä¸€æ­¥ä»£ç†çš„è®¾ç½®ï¼Œè¿˜ä»¥æ•°æ®è¯·æ±‚ä»»åŠ¡çš„ä»£ç†è®¾ç½®ä¸ºä¾‹ï¼Œæºç å¦‚ä¸‹ï¼š 12345678910111213141516- (void)addDelegateForDataTask:(NSURLSessionDataTask *)dataTask uploadProgress:(nullable void (^)(NSProgress *uploadProgress)) uploadProgressBlock downloadProgress:(nullable void (^)(NSProgress *downloadProgress)) downloadProgressBlock completionHandler:(void (^)(NSURLResponse *response, id responseObject, NSError *error))completionHandler&#123; //åˆ›å»ºå†…éƒ¨ä»£ç† AFURLSessionManagerTaskDelegate *delegate = [[AFURLSessionManagerTaskDelegate alloc] init]; delegate.manager = self; delegate.completionHandler = completionHandler; dataTask.taskDescription = self.taskDescriptionForSessionTasks; //è®¾ç½®ä»£ç† [self setDelegate:delegate forTask:dataTask]; delegate.uploadProgressBlock = uploadProgressBlock; delegate.downloadProgressBlock = downloadProgressBlock;&#125; éœ€è¦æ³¨æ„ï¼ŒåŸç”Ÿçš„NSURLSesstionTaskçš„ä»£ç†å…¶å®ä¾ç„¶æ˜¯AFURLSesstionManagerç±»è‡ªèº«ï¼Œè¿™é‡ŒManagerä½œä¸ºä¸­ä»‹æ¥è¿›è¡Œæ–¹æ³•çš„ä¼ é€’(å®ƒä¹Ÿä¼šè‡ªå·±å¤„ç†ä¸€äº›å›è°ƒï¼Œä¸å¼€å‘è€…ç›¸å…³çš„å›è°ƒæ‰ä¼šè½¬ç»™å†…éƒ¨ä»£ç†å¤„ç†)ã€‚ ä¸Šé¢çš„æµç¨‹å°±æ˜¯AFURLSesstionManageråˆ›å»ºçš„ä»»åŠ¡çš„ä¸»æµç¨‹äº†ï¼Œéœ€è¦æ³¨æ„ï¼Œå®ƒåªåˆ›å»ºå‡ºä»»åŠ¡å¹¶ä¸ä¼šæ‰§è¡Œï¼Œéœ€è¦å¼€å‘è€…æ‰‹åŠ¨è°ƒç”¨resumeæ‰èƒ½æ¿€æ´»ä»»åŠ¡ã€‚ä¸‹é¢çš„æµç¨‹å°±æ˜¯ç³»ç»Ÿçš„NSURLSesstionTaskDelagateç›¸å…³çš„å›è°ƒäº†ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186//æ¥æ”¶åˆ°URLé‡å®šå‘æ—¶å›è°ƒ- (void)URLSession:(NSURLSession *)session task:(NSURLSessionTask *)taskwillPerformHTTPRedirection:(NSHTTPURLResponse *)response newRequest:(NSURLRequest *)request completionHandler:(void (^)(NSURLRequest *))completionHandler&#123; NSURLRequest *redirectRequest = request; //è¿™é‡Œä¼šæ‰§è¡Œç”¨æˆ·è‡ªå®šä¹‰çš„é‡å®šå‘block if (self.taskWillPerformHTTPRedirection) &#123; redirectRequest = self.taskWillPerformHTTPRedirection(session, task, response, request); &#125; //ç»§ç»­é‡å®šå‘åçš„è¯·æ±‚ if (completionHandler) &#123; completionHandler(redirectRequest); &#125;&#125;//æ¥æ”¶åˆ°å®‰å…¨è®¤è¯æŒ‘æˆ˜çš„å›è°ƒ- (void)URLSession:(NSURLSession *)session task:(NSURLSessionTask *)taskdidReceiveChallenge:(NSURLAuthenticationChallenge *)challenge completionHandler:(void (^)(NSURLSessionAuthChallengeDisposition disposition, NSURLCredential *credential))completionHandler&#123; NSURLSessionAuthChallengeDisposition disposition = NSURLSessionAuthChallengePerformDefaultHandling; __block NSURLCredential *credential = nil; //å¦‚æœå¼€å‘è€…æœ‰æä¾›block äº¤å¼€å‘è€…å¤„ç† å¦åˆ™ç”¨é»˜è®¤çš„å®‰å…¨éªŒè¯æ–¹æ¡ˆå¤„ç† if (self.taskDidReceiveAuthenticationChallenge) &#123; disposition = self.taskDidReceiveAuthenticationChallenge(session, task, challenge, &amp;credential); &#125; else &#123; if ([challenge.protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodServerTrust]) &#123; if ([self.securityPolicy evaluateServerTrust:challenge.protectionSpace.serverTrust forDomain:challenge.protectionSpace.host]) &#123; disposition = NSURLSessionAuthChallengeUseCredential; credential = [NSURLCredential credentialForTrust:challenge.protectionSpace.serverTrust]; &#125; else &#123; disposition = NSURLSessionAuthChallengeCancelAuthenticationChallenge; &#125; &#125; else &#123; disposition = NSURLSessionAuthChallengePerformDefaultHandling; &#125; &#125; if (completionHandler) &#123; completionHandler(disposition, credential); &#125;&#125;//éœ€è¦æä¾›æ•°æ®æµä¼ å‘æœåŠ¡å™¨æ—¶è°ƒç”¨- (void)URLSession:(NSURLSession *)session task:(NSURLSessionTask *)task needNewBodyStream:(void (^)(NSInputStream *bodyStream))completionHandler&#123; NSInputStream *inputStream = nil; if (self.taskNeedNewBodyStream) &#123; inputStream = self.taskNeedNewBodyStream(session, task); &#125; else if (task.originalRequest.HTTPBodyStream &amp;&amp; [task.originalRequest.HTTPBodyStream conformsToProtocol:@protocol(NSCopying)]) &#123; inputStream = [task.originalRequest.HTTPBodyStream copy]; &#125; if (completionHandler) &#123; completionHandler(inputStream); &#125;&#125;//å·²ç»å‘é€æ•°æ®åè°ƒç”¨- (void)URLSession:(NSURLSession *)session task:(NSURLSessionTask *)task didSendBodyData:(int64_t)bytesSent totalBytesSent:(int64_t)totalBytesSenttotalBytesExpectedToSend:(int64_t)totalBytesExpectedToSend&#123; int64_t totalUnitCount = totalBytesExpectedToSend; if(totalUnitCount == NSURLSessionTransferSizeUnknown) &#123; NSString *contentLength = [task.originalRequest valueForHTTPHeaderField:@\"Content-Length\"]; if(contentLength) &#123; totalUnitCount = (int64_t) [contentLength longLongValue]; &#125; &#125; if (self.taskDidSendBodyData) &#123; self.taskDidSendBodyData(session, task, bytesSent, totalBytesSent, totalUnitCount); &#125;&#125;//è¯·æ±‚ä»»åŠ¡å®Œæˆæ—¶å›è°ƒ- (void)URLSession:(NSURLSession *)session task:(NSURLSessionTask *)taskdidCompleteWithError:(NSError *)error&#123; //æ‹¿åˆ°å†…éƒ¨ä»£ç† äº¤ç»™å®ƒå¤„ç† AFURLSessionManagerTaskDelegate *delegate = [self delegateForTask:task]; // delegate may be nil when completing a task in the background if (delegate) &#123; [delegate URLSession:session task:task didCompleteWithError:error]; [self removeDelegateForTask:task]; &#125; if (self.taskDidComplete) &#123; self.taskDidComplete(session, task, error); &#125;&#125;//æ¥æ”¶åˆ°è¿”å›æ•°æ®æ—¶å›è°ƒ- (void)URLSession:(NSURLSession *)session dataTask:(NSURLSessionDataTask *)dataTaskdidReceiveResponse:(NSURLResponse *)response completionHandler:(void (^)(NSURLSessionResponseDisposition disposition))completionHandler&#123; NSURLSessionResponseDisposition disposition = NSURLSessionResponseAllow; if (self.dataTaskDidReceiveResponse) &#123; disposition = self.dataTaskDidReceiveResponse(session, dataTask, response); &#125; if (completionHandler) &#123; completionHandler(disposition); &#125;&#125;//æ­¤è¯·æ±‚å°†è¦å˜æ›´æˆä¸‹è½½ä»»åŠ¡æ—¶å›è°ƒ- (void)URLSession:(NSURLSession *)session dataTask:(NSURLSessionDataTask *)dataTaskdidBecomeDownloadTask:(NSURLSessionDownloadTask *)downloadTask&#123; //é‡æ–°è®¾ç½®å†…éƒ¨ä»£ç† AFURLSessionManagerTaskDelegate *delegate = [self delegateForTask:dataTask]; if (delegate) &#123; [self removeDelegateForTask:dataTask]; [self setDelegate:delegate forTask:downloadTask]; &#125; if (self.dataTaskDidBecomeDownloadTask) &#123; self.dataTaskDidBecomeDownloadTask(session, dataTask, downloadTask); &#125;&#125;//å¼€å§‹è·å–æ•°æ®æ—¶è°ƒç”¨- (void)URLSession:(NSURLSession *)session dataTask:(NSURLSessionDataTask *)dataTask didReceiveData:(NSData *)data&#123; //äº¤ç»™å†…éƒ¨ä»£ç†å¤„ç† AFURLSessionManagerTaskDelegate *delegate = [self delegateForTask:dataTask]; [delegate URLSession:session dataTask:dataTask didReceiveData:data]; if (self.dataTaskDidReceiveData) &#123; self.dataTaskDidReceiveData(session, dataTask, data); &#125;&#125;//å°†è¦ç¼“å­˜å›æ‰§æ•°æ®æ—¶è°ƒç”¨- (void)URLSession:(NSURLSession *)session dataTask:(NSURLSessionDataTask *)dataTask willCacheResponse:(NSCachedURLResponse *)proposedResponse completionHandler:(void (^)(NSCachedURLResponse *cachedResponse))completionHandler&#123; NSCachedURLResponse *cachedResponse = proposedResponse; if (self.dataTaskWillCacheResponse) &#123; cachedResponse = self.dataTaskWillCacheResponse(session, dataTask, proposedResponse); &#125; if (completionHandler) &#123; completionHandler(cachedResponse); &#125;&#125;//ä¸‹è½½ä»»åŠ¡ç»“æŸåå›è°ƒ- (void)URLSession:(NSURLSession *)session downloadTask:(NSURLSessionDownloadTask *)downloadTaskdidFinishDownloadingToURL:(NSURL *)location&#123; AFURLSessionManagerTaskDelegate *delegate = [self delegateForTask:downloadTask]; if (self.downloadTaskDidFinishDownloading) &#123; NSURL *fileURL = self.downloadTaskDidFinishDownloading(session, downloadTask, location); if (fileURL) &#123; delegate.downloadFileURL = fileURL; NSError *error = nil; //æ•°æ®ä½ç½®ç§»åŠ¨ [[NSFileManager defaultManager] moveItemAtURL:location toURL:fileURL error:&amp;error]; if (error) &#123; [[NSNotificationCenter defaultCenter] postNotificationName:AFURLSessionDownloadTaskDidFailToMoveFileNotification object:downloadTask userInfo:error.userInfo]; &#125; return; &#125; &#125; //å†…éƒ¨ä»£ç†è¿›è¡Œåç»­å¤„ç† if (delegate) &#123; [delegate URLSession:session downloadTask:downloadTask didFinishDownloadingToURL:location]; &#125;&#125; åˆ°æ­¤ï¼ŒAFURLSesstionManagerç±»çš„ä»»åŠ¡åŸºæœ¬å®Œæˆï¼Œå¤´æ–‡ä»¶ä¸­çš„æ¥å£æ›´å¤šæä¾›äº†ä¸Šè¿°å›è°ƒçš„è®¾ç½®è¿˜æœ‰äº›é€šçŸ¥çš„å‘é€ã€‚ä¸‹é¢æˆ‘ä»¬è¦æ¥çœ‹ä¸‹å†…éƒ¨ä»£ç†AFURLSesstionManagerTaskDelegateç±»çš„ä½œç”¨ï¼Œéœ€è¦æ³¨æ„AFURLSesstionManagerTaskDelegateæ˜¯ä¸€ä¸ªç±»ï¼Œå¹¶ä¸æ˜¯åè®®ï¼Œå…¶é™¤äº†å¤„ç†ä¸Šé¢ä»‹ç»çš„Managerè½¬å‘è¿‡æ¥çš„å›åˆ°å¤–ï¼Œè¿˜ä¼šè¿›è¡Œè¯·æ±‚è¿›åº¦çš„æ§åˆ¶ã€‚å…¶é…ç½®æ–¹æ³•å’Œä¸€äº›ç›‘å¬è¿™é‡Œä¸å†è¿‡å¤šä»‹ç»ï¼Œä¸»è¦æ¥çœ‹å…¶å¯¹Managerè½¬å‘è¿‡æ¥çš„å›åˆ°çš„å¤„ç†ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596//æ¥æ”¶åˆ°æ•°æ®å å°†æ•°æ®è¿›è¡Œæ‹¼æ¥- (void)URLSession:(__unused NSURLSession *)session dataTask:(__unused NSURLSessionDataTask *)dataTask didReceiveData:(NSData *)data&#123; [self.mutableData appendData:data];&#125;//è¯·æ±‚å®Œæˆå- (void)URLSession:(__unused NSURLSession *)session task:(NSURLSessionTask *)taskdidCompleteWithError:(NSError *)error&#123;#pragma clang diagnostic push#pragma clang diagnostic ignored \"-Wgnu\" __strong AFURLSessionManager *manager = self.manager; __block id responseObject = nil; //é…ç½®ä¸€ä¸ªä¿¡æ¯å­—å…¸ __block NSMutableDictionary *userInfo = [NSMutableDictionary dictionary]; userInfo[AFNetworkingTaskDidCompleteResponseSerializerKey] = manager.responseSerializer; //æ‹¿åˆ°è¯·æ±‚ç»“æœæ•°æ® NSData *data = nil; if (self.mutableData) &#123; data = [self.mutableData copy]; //We no longer need the reference, so nil it out to gain back some memory. self.mutableData = nil; &#125; //ä¸‹è½½ä¿¡æ¯é…ç½® if (self.downloadFileURL) &#123; userInfo[AFNetworkingTaskDidCompleteAssetPathKey] = self.downloadFileURL; &#125; else if (data) &#123; userInfo[AFNetworkingTaskDidCompleteResponseDataKey] = data; &#125; //é”™è¯¯ä¿¡æ¯é…ç½® if (error) &#123; userInfo[AFNetworkingTaskDidCompleteErrorKey] = error; dispatch_group_async(manager.completionGroup ?: url_session_manager_completion_group(), manager.completionQueue ?: dispatch_get_main_queue(), ^&#123; if (self.completionHandler) &#123; self.completionHandler(task.response, responseObject, error); &#125; dispatch_async(dispatch_get_main_queue(), ^&#123; [[NSNotificationCenter defaultCenter] postNotificationName:AFNetworkingTaskDidCompleteNotification object:task userInfo:userInfo]; &#125;); &#125;); &#125; else &#123; dispatch_async(url_session_manager_processing_queue(), ^&#123; NSError *serializationError = nil; //ç”¨å›æ‰§æ•°æ®åºåˆ—åŒ–ç±»è¿›è¡Œæ•°æ®å¤„ç† responseObject = [manager.responseSerializer responseObjectForResponse:task.response data:data error:&amp;serializationError]; if (self.downloadFileURL) &#123; responseObject = self.downloadFileURL; &#125; if (responseObject) &#123; userInfo[AFNetworkingTaskDidCompleteSerializedResponseKey] = responseObject; &#125; if (serializationError) &#123; userInfo[AFNetworkingTaskDidCompleteErrorKey] = serializationError; &#125; dispatch_group_async(manager.completionGroup ?: url_session_manager_completion_group(), manager.completionQueue ?: dispatch_get_main_queue(), ^&#123; if (self.completionHandler) &#123; self.completionHandler(task.response, responseObject, serializationError); &#125; dispatch_async(dispatch_get_main_queue(), ^&#123; [[NSNotificationCenter defaultCenter] postNotificationName:AFNetworkingTaskDidCompleteNotification object:task userInfo:userInfo]; &#125;); &#125;); &#125;); &#125;#pragma clang diagnostic pop&#125;//ä¸‹è½½å¤„ç†- (void)URLSession:(NSURLSession *)session downloadTask:(NSURLSessionDownloadTask *)downloadTaskdidFinishDownloadingToURL:(NSURL *)location&#123; NSError *fileManagerError = nil; self.downloadFileURL = nil; if (self.downloadTaskDidFinishDownloading) &#123; self.downloadFileURL = self.downloadTaskDidFinishDownloading(session, downloadTask, location); if (self.downloadFileURL) &#123; [[NSFileManager defaultManager] moveItemAtURL:location toURL:self.downloadFileURL error:&amp;fileManagerError]; if (fileManagerError) &#123; [[NSNotificationCenter defaultCenter] postNotificationName:AFURLSessionDownloadTaskDidFailToMoveFileNotification object:downloadTask userInfo:fileManagerError.userInfo]; &#125; &#125; &#125;&#125; 2.AFHTTPSesstionManageräº†è§£äº†AFURLSesstionManagerï¼Œå­¦ä¹ AFHTTPSesstionManagerå°†ååˆ†è½»æ¾ï¼Œè¿™ä¸ªç±»åªæ˜¯å‰è€…é¢å‘åº”ç”¨çš„ä¸€å±‚å°è£…ã€‚æˆ‘ä»¬å¯ä»¥å…ˆä»å®ƒçš„æ¥å£çœ‹èµ·ï¼Œè¿™ä¹Ÿæ˜¯å¼€å‘è€…æœ€ç†Ÿæ‚‰å’Œå¸¸ç”¨çš„éƒ¨åˆ†ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273@interface AFHTTPSessionManager : AFURLSessionManager &lt;NSSecureCoding, NSCopying//åŸºç¡€URL@property (readonly, nonatomic, strong, nullable) NSURL *baseURL;//è¯·æ±‚åºåˆ—åŒ–å¯¹è±¡@property (nonatomic, strong) AFHTTPRequestSerializer &lt;AFURLRequestSerialization&gt; * requestSerializer;//å›æ‰§åºåˆ—åŒ–å¯¹è±¡@property (nonatomic, strong) AFHTTPResponseSerializer &lt;AFURLResponseSerialization&gt; * responseSerializer;//åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„Managerå®ä¾‹ æ³¨æ„ä¸æ˜¯å•ä¾‹+ (instancetype)manager;//åˆå§‹åŒ–æ–¹æ³•- (instancetype)initWithBaseURL:(nullable NSURL *)url;- (instancetype)initWithBaseURL:(nullable NSURL *)url sessionConfiguration:(nullable NSURLSessionConfiguration *)configuration NS_DESIGNATED_INITIALIZER;//è¿›è¡Œgetè¯·æ±‚- (nullable NSURLSessionDataTask *)GET:(NSString *)URLString parameters:(nullable id)parameters success:(nullable void (^)(NSURLSessionDataTask *task, id _Nullable responseObject))success failure:(nullable void (^)(NSURLSessionDataTask * _Nullable task, NSError *error))failure DEPRECATED_ATTRIBUTE;- (nullable NSURLSessionDataTask *)GET:(NSString *)URLString parameters:(nullable id)parameters progress:(nullable void (^)(NSProgress *downloadProgress))downloadProgress success:(nullable void (^)(NSURLSessionDataTask *task, id _Nullable responseObject))success failure:(nullable void (^)(NSURLSessionDataTask * _Nullable task, NSError *error))failure;//è¿›è¡ŒHEADè¯·æ±‚- (nullable NSURLSessionDataTask *)HEAD:(NSString *)URLString parameters:(nullable id)parameters success:(nullable void (^)(NSURLSessionDataTask *task))success failure:(nullable void (^)(NSURLSessionDataTask * _Nullable task, NSError *error))failure;//è¿›è¡ŒPOSTè¯·æ±‚- (nullable NSURLSessionDataTask *)POST:(NSString *)URLString parameters:(nullable id)parameters success:(nullable void (^)(NSURLSessionDataTask *task, id _Nullable responseObject))success failure:(nullable void (^)(NSURLSessionDataTask * _Nullable task, NSError *error))failure DEPRECATED_ATTRIBUTE;- (nullable NSURLSessionDataTask *)POST:(NSString *)URLString parameters:(nullable id)parameters progress:(nullable void (^)(NSProgress *uploadProgress))uploadProgress success:(nullable void (^)(NSURLSessionDataTask *task, id _Nullable responseObject))success failure:(nullable void (^)(NSURLSessionDataTask * _Nullable task, NSError *error))failure;- (nullable NSURLSessionDataTask *)POST:(NSString *)URLString parameters:(nullable id)parameters constructingBodyWithBlock:(nullable void (^)(id &lt;AFMultipartFormData&gt; formData))block success:(nullable void (^)(NSURLSessionDataTask *task, id _Nullable responseObject))success failure:(nullable void (^)(NSURLSessionDataTask * _Nullable task, NSError *error))failure DEPRECATED_ATTRIBUTE;- (nullable NSURLSessionDataTask *)POST:(NSString *)URLString parameters:(nullable id)parameters constructingBodyWithBlock:(nullable void (^)(id &lt;AFMultipartFormData&gt; formData))block progress:(nullable void (^)(NSProgress *uploadProgress))uploadProgress success:(nullable void (^)(NSURLSessionDataTask *task, id _Nullable responseObject))success failure:(nullable void (^)(NSURLSessionDataTask * _Nullable task, NSError *error))failure;//è¿›è¡ŒPUTè¯·æ±‚- (nullable NSURLSessionDataTask *)PUT:(NSString *)URLString parameters:(nullable id)parameters success:(nullable void (^)(NSURLSessionDataTask *task, id _Nullable responseObject))success failure:(nullable void (^)(NSURLSessionDataTask * _Nullable task, NSError *error))failure;//è¿›è¡ŒPATCHè¯·æ±‚- (nullable NSURLSessionDataTask *)PATCH:(NSString *)URLString parameters:(nullable id)parameters success:(nullable void (^)(NSURLSessionDataTask *task, id _Nullable responseObject))success failure:(nullable void (^)(NSURLSessionDataTask * _Nullable task, NSError *error))failure;//è¿›è¡ŒDELETEè¯·æ±‚- (nullable NSURLSessionDataTask *)DELETE:(NSString *)URLString parameters:(nullable id)parameters success:(nullable void (^)(NSURLSessionDataTask *task, id _Nullable responseObject))success failure:(nullable void (^)(NSURLSessionDataTask * _Nullable task, NSError *error))failure; ä¸Šé¢æ‰€æœ‰çš„è¯·æ±‚ï¼Œä¸€æ—¦åˆ›å»ºå°±ä¼šè‡ªåŠ¨resumeï¼Œå¼€å‘åˆ™ä¸éœ€è¦é¢å¤–å¼€å¯ã€‚ 3.è¯·æ±‚åºåˆ—åŒ–AFURLRequestSerializationAFURLRequestSerializationæ˜¯ä¸€ä¸ªåè®®ï¼Œå®ƒçš„ä½œç”¨å…¶å®å°±æ˜¯æ¥å°†è¯·æ±‚è¿›è¡Œé…ç½®ï¼Œå…¶ä¸­åªå®šä¹‰äº†ä¸€ä¸ªæ¥å£ï¼š 1234567@protocol AFURLRequestSerialization &lt;NSObject, NSSecureCoding, NSCopying&gt;//å°†è¯·æ±‚å’Œå‚æ•°è¿›è¡Œé…ç½®åè¿”å›- (nullable NSURLRequest *)requestBySerializingRequest:(NSURLRequest *)request withParameters:(nullable id)parameters error:(NSError * _Nullable __autoreleasing *)error NS_SWIFT_NOTHROW;@end å®ç°è¿™ä¸ªæ¥å£çš„ç±»ä¸»è¦æ˜¯AFHTTPRequestSerizlizaerç±»ï¼Œå…¶è¿˜æœ‰ä¸¤ä¸ªå­ç±»ï¼Œåˆ†åˆ«ä¸ºAFJSONRequestSerizlizaerå’ŒAFPropertyListRequestSerializerç±»ã€‚ åœ¨ä½¿ç”¨AFNetworkingè¿›è¡Œç½‘ç»œè¯·æ±‚æ—¶ï¼Œå¦‚æœä½ æœ‰è¿‡æŠ“åŒ…ï¼Œä½ ä¸€å®šä¼šå‘ç°ï¼Œåœ¨å‘é€çš„æ™®é€šHTTPè¯·æ±‚çš„HEADä¸­é»˜è®¤åŒ…å«äº†è®¸å¤šä¿¡æ¯ï¼Œå…¶å®è¿™äº›éƒ½æ˜¯AFHTTPRequestSerizlizaerç±»åšçš„ï¼Œä»–é»˜è®¤ä¼šå‘è¯·æ±‚å¤´ä¸­æ·»åŠ Accept-Languageï¼ŒUser-Agentä»¥åŠå…¶ä»–å¯é…ç½®çš„å¤´éƒ¨ä¿¡æ¯(ç¼“å­˜ï¼ŒCookieï¼Œè¶…æ—¶æ—¶é—´ï¼Œç”¨æˆ·åå¯†ç ç­‰)ã€‚åœ¨è¿›è¡Œè¯·æ±‚å‚æ•°é…ç½®çš„æ—¶å€™ï¼ŒAFHTTPRequestSerizlizaerä¼šæ ¹æ®è¯·æ±‚æ–¹æ³•æ¥é€‰æ‹©é…ç½®åˆ°urlåé¢æˆ–è€…æ·»åŠ åˆ°è¯·æ±‚bodyä¸­(HEADï¼ŒDELETEï¼ŒGETä¼šè¿½åŠ URLï¼Œå…¶ä»–æ·»åŠ body)ã€‚AFJSONRequestSerizlizaerçš„ä½œç”¨ä¸AFHTTPRequestSerizlizaerä¸€è‡´ï¼Œä¸åŒçš„æ˜¯ä¼šå°†è¯·æ±‚å¤´ä¸­çš„Content-Typeè®¾ç½®ä¸ºapplication/jsonå¹¶ä¸”å°†å‚æ•°æ ¼å¼åŒ–æˆJSONæ•°æ®æ”¾ç½®åœ¨è¯·æ±‚ä½“ä¸­ï¼ŒAFPropertyListRequestSerializerç±»åˆ™æ˜¯å°†Content-Typeè®¾ç½®ä¸ºapplication/x-plistï¼Œå¹¶ä¸”å°†å‚æ•°æ ¼å¼åŒ–æˆPlistæ•°æ®æ”¾å…¥è¯·æ±‚ä½“ã€‚ 4.å›æ‰§æ•°æ®åºåˆ—åŒ–AFURLResponseSerializationAFNetworkingè¿›è¡Œç½‘ç»œè¯·æ±‚æœ‰ä¸€ä¸ªååˆ†æ–¹ä¾¿çš„åœ°æ–¹åœ¨äºå®ƒå¯ä»¥ç›´æ¥å°†è¿”å›æ•°æ®è¿›è¡Œè§£æã€‚å…¶ä¸­AFHTTPResponseSerializeræ˜¯æœ€åŸºç¡€çš„è§£æç±»ï¼Œå®ƒåªä¼šæ ¹æ®è¿”å›å¤´ä¿¡æ¯æ¥æ ¡éªŒè¿”å›æ•°æ®çš„æœ‰æ•ˆæ€§ï¼Œæ•´ç†åç›´æ¥å°†åŸæ•°æ®è¿”å›ã€‚AFJSONResponseSerializerç±»ç”¨æ¥è§£æè¿”å›æ•°æ®ä¸ºJSONæ•°æ®çš„å›æ‰§ï¼Œç”¨è¿™ä¸ªç±»è¿›è¡Œè§£ææ—¶ï¼Œè¿”å›å¤´ä¿¡æ¯ä¸­çš„MIMETypeå¿…é¡»ä¸ºapplication/jsonï¼Œtext/jsonæˆ–text/javascriptã€‚AFXMLParserResponseSerializerç±»ç”¨æ¥è§£æXMLæ•°æ®ï¼Œå…¶ä¼šè¿”å›ä¸€ä¸ªXMLè§£æå™¨ï¼Œä½¿ç”¨å®ƒæ—¶ï¼Œè¿”å›å¤´ä¿¡æ¯ä¸­çš„MIMETypeå¿…é¡»ä¸ºapplication/xmlæˆ–text/xmlã€‚AFXMLDocumentResponseSerializerç±»å°†è¿”å›æ•°æ®è§£ææˆXMLæ–‡æ¡£ã€‚AFPropertyListResponseSerializerç”¨æ¥å°†è¿”å›æ•°æ®è§£ææˆPlistæ•°æ®ã€‚AFImageResponseSerializerç±»ç”¨æ¥å°†è¿”å›æ•°æ®è§£ææˆUIImageå›¾ç‰‡ï¼Œå…¶æ”¯æŒçš„MIMETypeç±»å‹ä¸ºimage/tiffï¼Œimage/jpegï¼Œimage/gifï¼Œimage/pngï¼Œimage/icoï¼Œimage/x-iconï¼Œimage/bmpï¼Œimage/x-bmpï¼Œimage/x-xbitmapï¼Œimage/x-win-bitmapã€‚ é™¤äº†ä¸Šé¢åˆ—å‡ºçš„è¿™äº›ç±»å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªAFCompoundResponseSerializerç±»ï¼Œè¿™ä¸ªç±»ç¤ºä¾‹ä¸­å¯ä»¥é…ç½®å¤šä¸ªResponseSerializerå®ä¾‹ï¼Œè§£æçš„æ—¶å€™ä¼šè¿›è¡Œéå†å°è¯•æ‰¾åˆ°å¯ä»¥è§£æçš„æ¨¡å¼ï¼Œè¿™ç§æ¨¡å¼ä¹Ÿå«æ··åˆè§£ææ¨¡å¼ã€‚ ä¸‰ã€UIå·¥å…·åŒ…æºç åˆ†æ1.AFAutoPurgingImageCacheå›¾ç‰‡ç¼“å­˜æºç åˆ†æAFAutoPurgingImageCacheç±»æ˜¯AFæ¡†æ¶ä¸­æä¾›çš„å›¾ç‰‡ç¼“å­˜å™¨ï¼Œéœ€è¦æ³¨æ„ï¼Œå®ƒå¹¶ä¸æ˜¯ä¸€ä¸ªæŒä¹…åŒ–çš„ç¼“å­˜å·¥å…·ï¼Œåªåšä¸´æ—¶æ€§çš„ç¼“å­˜ã€‚å…¶ä¸­å°è£…äº†è‡ªåŠ¨æ¸…ç¼“å­˜å’ŒæŒ‰æ—¶é—´å‘½ä¸­çš„é€»è¾‘ã€‚ æ¯ä¸€ä¸ªAFAutoPurgingImageCacheç±»å®ä¾‹ä¸­éƒ½æœ‰ä¸€ä¸ªç¼“å­˜æ± ï¼Œç¼“å­˜æ± æœ‰ä¸¤ä¸ªä¸´ç•Œå€¼ï¼Œæœ€å¤§å®¹é‡ä¸æœŸæœ›å®¹é‡ã€‚å½“å®é™…ä½¿ç”¨çš„å†…å­˜è¶…è¿‡æœ€å¤§å®¹é‡æ—¶ï¼Œç¼“å­˜æ± ä¼šè‡ªåŠ¨æ¸…ç†åˆ°æœŸæœ›å®¹é‡ã€‚åœ¨ç¼“å­˜æ± ä¸­ï¼Œå­˜æ”¾çš„å®é™…ä¸Šæ˜¯AFCacheImageå¯¹è±¡ï¼Œè¿™ä¸ªå†…éƒ¨ç±»å¯¹UIImageè¿›è¡Œäº†åŒ…è£…ï¼Œå¦‚ä¸‹ï¼š 123456789101112@interface AFCachedImage : NSObject//å…³è”çš„UIImage@property (nonatomic, strong) UIImage *image;//id@property (nonatomic, strong) NSString *identifier;//å›¾ç‰‡å¤§å°@property (nonatomic, assign) UInt64 totalBytes;//æœ€åä½¿ç”¨æ—¶é—´@property (nonatomic, strong) NSDate *lastAccessDate;//è¿™ä¸ªå±æ€§æ²¡æœ‰ä½¿ç”¨åˆ°@property (nonatomic, assign) UInt64 currentMemoryUsage;@end æ¸…ç¼“å­˜çš„é€»è¾‘ååˆ†ç®€å•ï¼Œè¿™é‡Œå°±ä¸åšä»£ç è§£æï¼Œæµç¨‹æ˜¯æ¯æ¬¡è¿›è¡Œå›¾ç‰‡ç¼“å­˜æ—¶ï¼Œåˆ¤æ–­æ˜¯å¦è¶…å‡ºç¼“å­˜æ± æœ€å¤§å®¹é‡ï¼Œå¦‚æœè¶…å‡ºï¼Œå°†AFCacheImageå¯¹è±¡æŒ‰ç…§lastAccessDateå±æ€§è¿›è¡Œæ’åºåè¿›è¡ŒæŒ‰é¡ºåºåˆ é™¤ç›´åˆ°åˆ°è¾¾æœŸæœ›å®¹é‡ã€‚å½“æ”¶åˆ°ç³»ç»Ÿçš„å†…å­˜è­¦å‘Šæ—¶ï¼Œä¹Ÿä¼šå”¤èµ·æ¸…é™¤å†…å­˜æ“ä½œã€‚ 2.AFImageDownloaderå›¾ç‰‡ä¸‹è½½å™¨æºç è§£æAFImageDownloaderç±»ä¸“é—¨ç”¨æ¥ä¸‹è½½å›¾ç‰‡ï¼Œå…¶ä½†å•ç‹¬çš„çº¿ç¨‹çš„è¿›è¡Œå›¾ç‰‡çš„ä¸‹è½½å¤„ç†ï¼Œå¹¶ä¸”å†…ç½®äº†å¤šä»»åŠ¡æŒ‚èµ·ç­‰å¾…å’Œå›¾ç‰‡æ•°æ®ç¼“å­˜çš„ç‰¹æ€§ã€‚AFImageDownloderç±»çš„æ ¸å¿ƒæœ‰ä¸¤ä¸ªçº¿ç¨‹ï¼š 12@property (nonatomic, strong) dispatch_queue_t synchronizationQueue;@property (nonatomic, strong) dispatch_queue_t responseQueue; å…¶ä¸­synchronizationQueueæ˜¯ä¸€ä¸ªåŒæ­¥çº¿ç¨‹ï¼Œç”¨æ¥åˆ›å»ºä¸å¼€å§‹ä¸‹è½½ä»»åŠ¡ï¼Œä¹Ÿå¯ä»¥ç†è§£è¿™ä¸ªä¸²è¡Œçº¿ç¨‹ä¸ºè¿™ä¸ªä¸‹è½½å™¨ç±»çš„ä¸»è¦ä»£ç æ‰§è¡Œæ‰€åœ¨çš„çº¿ç¨‹ï¼ŒresponseQueueæ˜¯ä¸€ä¸ªå¹¶è¡Œçº¿ç¨‹ï¼Œå…¶ç”¨æ¥å½“è¯·æ±‚å®Œæˆåå¤„ç†æ•°æ®ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸‹è½½å™¨å¯ä»¥åŒæ—¶ä¸‹è½½4å¼ å›¾ç‰‡ï¼Œå¦‚æœå›¾ç‰‡çš„è¯·æ±‚å¤§äº4ï¼Œå¤šå‡ºçš„è¯·æ±‚ä¼šè¢«æš‚æ—¶æŒ‚èµ·ï¼Œç­‰å¾…å…¶ä»–è¯·æ±‚å®Œæˆåœ¨è¿›è¡Œæ¿€æ´»ã€‚å…¶æ ¸å¿ƒæµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒAFImageDownloaderç±»ä¸­æœ‰å¤§é‡çš„æ“ä½œä»»åŠ¡æ± å’Œä¿®æ”¹æ¿€æ´»ä»»åŠ¡æ•°çš„æ“ä½œï¼Œä¸ºäº†ä¿è¯æ•°æ®çš„å®‰å…¨ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä½•AFImageDownloaderçš„ä¸»é¢˜æ“ä½œè¦åœ¨å…¶è‡ªå»ºçš„ä¸²è¡Œçº¿ç¨‹ä¸­æ‰§è¡Œã€‚æ ¸å¿ƒæ–¹æ³•ä»£ç è§£æå¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117- (nullable AFImageDownloadReceipt *)downloadImageForURLRequest:(NSURLRequest *)request withReceiptID:(nonnull NSUUID *)receiptID success:(nullable void (^)(NSURLRequest *request, NSHTTPURLResponse * _Nullable response, UIImage *responseObject))success failure:(nullable void (^)(NSURLRequest *request, NSHTTPURLResponse * _Nullable response, NSError *error))failure &#123; __block NSURLSessionDataTask *task = nil; //åœ¨ä¸²è¡Œçº¿ç¨‹ä¸­æ‰§è¡Œ dispatch_sync(self.synchronizationQueue, ^&#123; //å–å½“å‰å›¾ç‰‡çš„urlä½œä¸ºæ ‡è¯† NSString *URLIdentifier = request.URL.absoluteString; //æ£€æŸ¥urlçš„å¯ç”¨æ€§ if (URLIdentifier == nil) &#123; if (failure) &#123; NSError *error = [NSError errorWithDomain:NSURLErrorDomain code:NSURLErrorBadURL userInfo:nil]; dispatch_async(dispatch_get_main_queue(), ^&#123; failure(request, nil, error); &#125;); &#125; return; &#125; //æ£€æŸ¥ä»»åŠ¡æ± ä¸­æ˜¯å¦å·²ç»æœ‰æ­¤ä»»åŠ¡ AFImageDownloaderMergedTask *existingMergedTask = self.mergedTasks[URLIdentifier]; if (existingMergedTask != nil) &#123; //å·²ç»å­˜åœ¨æ­¤ä»»åŠ¡ åˆ™è¿½åŠ å›è°ƒ ä¹‹åè¿”å› è¿™æ ·åšçš„ç›®çš„æ˜¯ å…ˆåä¸¤æ¬¡å¯¹ç›¸åŒå›¾ç‰‡çš„è¯·æ±‚ å¯ä»¥åªè¿›è¡Œä¸€æ¬¡è¯·æ±‚ï¼Œå¹¶ä¸”æ‰§è¡Œä¸åŒçš„ä¸¤æ¬¡å›è°ƒ AFImageDownloaderResponseHandler *handler = [[AFImageDownloaderResponseHandler alloc] initWithUUID:receiptID success:success failure:failure]; [existingMergedTask addResponseHandler:handler]; task = existingMergedTask.task; return; &#125; //è¿›è¡Œç¼“å­˜çš„æ£€æŸ¥ switch (request.cachePolicy) &#123; case NSURLRequestUseProtocolCachePolicy: case NSURLRequestReturnCacheDataElseLoad: case NSURLRequestReturnCacheDataDontLoad: &#123; UIImage *cachedImage = [self.imageCache imageforRequest:request withAdditionalIdentifier:nil]; if (cachedImage != nil) &#123; if (success) &#123; dispatch_async(dispatch_get_main_queue(), ^&#123; success(request, nil, cachedImage); &#125;); &#125; return; &#125; break; &#125; default: break; &#125; //åˆ›å»ºæ•°æ®è¯·æ±‚ä»»åŠ¡ NSUUID *mergedTaskIdentifier = [NSUUID UUID]; NSURLSessionDataTask *createdTask; __weak __typeof__(self) weakSelf = self; createdTask = [self.sessionManager dataTaskWithRequest:request completionHandler:^(NSURLResponse * _Nonnull response, id _Nullable responseObject, NSError * _Nullable error) &#123; dispatch_async(self.responseQueue, ^&#123; __strong __typeof__(weakSelf) strongSelf = weakSelf; AFImageDownloaderMergedTask *mergedTask = self.mergedTasks[URLIdentifier]; if ([mergedTask.identifier isEqual:mergedTaskIdentifier]) &#123; mergedTask = [strongSelf safelyRemoveMergedTaskWithURLIdentifier:URLIdentifier]; if (error) &#123; for (AFImageDownloaderResponseHandler *handler in mergedTask.responseHandlers) &#123; if (handler.failureBlock) &#123; dispatch_async(dispatch_get_main_queue(), ^&#123; handler.failureBlock(request, (NSHTTPURLResponse*)response, error); &#125;); &#125; &#125; &#125; else &#123; [strongSelf.imageCache addImage:responseObject forRequest:request withAdditionalIdentifier:nil]; for (AFImageDownloaderResponseHandler *handler in mergedTask.responseHandlers) &#123; if (handler.successBlock) &#123; dispatch_async(dispatch_get_main_queue(), ^&#123; handler.successBlock(request, (NSHTTPURLResponse*)response, responseObject); &#125;); &#125; &#125; &#125; &#125; [strongSelf safelyDecrementActiveTaskCount]; [strongSelf safelyStartNextTaskIfNecessary]; &#125;); &#125;]; //åˆ›å»ºå¤„ç†å›è°ƒ AFImageDownloaderResponseHandler *handler = [[AFImageDownloaderResponseHandler alloc] initWithUUID:receiptID success:success failure:failure]; //åˆ›å»ºå›¾ç‰‡ä»»åŠ¡ è¿½åŠ å›è°ƒ AFImageDownloaderMergedTask *mergedTask = [[AFImageDownloaderMergedTask alloc] initWithURLIdentifier:URLIdentifier identifier:mergedTaskIdentifier task:createdTask]; [mergedTask addResponseHandler:handler]; self.mergedTasks[URLIdentifier] = mergedTask; //è¿›è¡Œæ¿€æ´»æˆ–æŒ‚èµ·æ•°æ®è¯·æ±‚ä»»åŠ¡ if ([self isActiveRequestCountBelowMaximumLimit]) &#123; [self startMergedTask:mergedTask]; &#125; else &#123; [self enqueueMergedTask:mergedTask]; &#125; task = mergedTask.task; &#125;); if (task) &#123; //å°†å›æ‰§è¿”å› ç”¨æ¥å–æ¶ˆä»»åŠ¡ return [[AFImageDownloadReceipt alloc] initWithReceiptID:receiptID task:task]; &#125; else &#123; return nil; &#125;&#125; 3.UIImageViewä¸UIButtonä¸¤ä¸ªç±»åˆ«çš„è®¾è®¡åˆ†æUIImageView+AFNetworkingç±»åˆ«ä¸UIButton+AFNetworkingç±»åˆ«æ˜¯AFä¸­æä¾›äº†ä¸¤ä¸ªåŠ è½½ç½‘ç»œå›¾ç‰‡çš„å·¥å…·ç±»åˆ«ã€‚è¿™ä¸¤ä¸ªç±»åˆ«éƒ½ä¸ºå…¶å®ä¾‹å¯¹è±¡å…³è”äº†ä¸€ä¸ªå›¾ç‰‡ä¸‹è½½å™¨ï¼Œå¼€å‘è€…å¯ä»¥è‡ªå®šä¹‰è¿™ä¸ªä¸‹è½½å™¨ä¹Ÿå¯ä»¥ä½¿ç”¨é»˜è®¤æä¾›çš„ï¼Œä¾‹å¦‚ï¼š 1234567891011+ (AFImageDownloader *)sharedImageDownloader &#123;#pragma clang diagnostic push#pragma clang diagnostic ignored \"-Wgnu\" return objc_getAssociatedObject(self, @selector(sharedImageDownloader)) ?: [AFImageDownloader defaultInstance];#pragma clang diagnostic pop&#125;+ (void)setSharedImageDownloader:(AFImageDownloader *)imageDownloader &#123; objc_setAssociatedObject(self, @selector(sharedImageDownloader), imageDownloader, OBJC_ASSOCIATION_RETAIN_NONATOMIC);&#125; è™½ç„¶å¤´æ–‡ä»¶ä¸­æä¾›äº†å¤šä¸ªè®¾ç½®å›¾ç‰‡çš„æ¥å£æ–¹æ³•ï¼Œä½†å®é™…æ ¸å¿ƒæ–¹æ³•åªæœ‰ä¸€ä¸ªï¼Œå…¶ä»–æ–¹æ³•éƒ½æ˜¯åŸºäºè¿™ä¸ªæ ¸å¿ƒæ–¹æ³•æ—¶å€™å°è£…çš„éå†æ–¹æ³•ï¼Œä»¥UIImageViewç±»åˆ«ä¸ºä¾‹ï¼ŒUIButtonç±»åˆ«ä¹Ÿç±»ä¼¼ï¼Œå¦‚å›¾ï¼š è¿›è¡Œç½‘ç»œå›¾ç‰‡è®¾ç½®çš„è¿‡ç¨‹å¦‚ä¸‹å›¾ï¼š æ ¸å¿ƒæ–¹æ³•ä»£ç åˆ†æï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970- (void)setImageWithURLRequest:(NSURLRequest *)urlRequest placeholderImage:(UIImage *)placeholderImage success:(void (^)(NSURLRequest *request, NSHTTPURLResponse * _Nullable response, UIImage *image))success failure:(void (^)(NSURLRequest *request, NSHTTPURLResponse * _Nullable response, NSError *error))failure&#123; //æ£€æŸ¥è¯·æ±‚æ˜¯å¦åˆæ³• if ([urlRequest URL] == nil) &#123; [self cancelImageDownloadTask]; self.image = placeholderImage; return; &#125; //æ£€æŸ¥æ­¤è¯·æ±‚æ˜¯å¦æ­£åœ¨è¿›è¡Œä¸­ if ([self isActiveTaskURLEqualToURLRequest:urlRequest])&#123; return; &#125; //å–æ¶ˆå½“å‰UIç»„ä»¶çš„ä¸‹è½½ä»»åŠ¡ [self cancelImageDownloadTask]; //æ‹¿åˆ°å›¾ç‰‡ä¸‹è½½å™¨ AFImageDownloader *downloader = [[self class] sharedImageDownloader]; //æ‹¿åˆ°ç¼“å­˜å™¨ id &lt;AFImageRequestCache&gt; imageCache = downloader.imageCache; //æ£€æŸ¥ç¼“å­˜å›¾ç‰‡æ˜¯å¦å­˜åœ¨ UIImage *cachedImage = [imageCache imageforRequest:urlRequest withAdditionalIdentifier:nil]; if (cachedImage) &#123; if (success) &#123; success(urlRequest, nil, cachedImage); &#125; else &#123; self.image = cachedImage; &#125; [self clearActiveDownloadInformation]; &#125; else &#123; if (placeholderImage) &#123; self.image = placeholderImage; &#125; __weak __typeof(self)weakSelf = self; //å–ä¸€ä¸ªéšæœºçš„UUIDä½œä¸ºæ ‡å¿— NSUUID *downloadID = [NSUUID UUID]; //ä»»åŠ¡æ§åˆ¶å¯¹è±¡ AFImageDownloadReceipt *receipt; receipt = [downloader downloadImageForURLRequest:urlRequest withReceiptID:downloadID success:^(NSURLRequest * _Nonnull request, NSHTTPURLResponse * _Nullable response, UIImage * _Nonnull responseObject) &#123; __strong __typeof(weakSelf)strongSelf = weakSelf; //æ£€æŸ¥å½“å‰çš„ä»»åŠ¡idå’Œè¯·æ±‚çš„ä»»åŠ¡idæ˜¯å¦ä¸€è‡´ if ([strongSelf.af_activeImageDownloadReceipt.receiptID isEqual:downloadID]) &#123; if (success) &#123; success(request, response, responseObject); &#125; else if(responseObject) &#123; strongSelf.image = responseObject; &#125; //æ¸…ç©ºä»»åŠ¡ä¿¡æ¯ [strongSelf clearActiveDownloadInformation]; &#125; &#125; failure:^(NSURLRequest * _Nonnull request, NSHTTPURLResponse * _Nullable response, NSError * _Nonnull error) &#123; __strong __typeof(weakSelf)strongSelf = weakSelf; if ([strongSelf.af_activeImageDownloadReceipt.receiptID isEqual:downloadID]) &#123; if (failure) &#123; failure(request, response, error); &#125; [strongSelf clearActiveDownloadInformation]; &#125; &#125;]; //å­˜å‚¨ä»»åŠ¡æ§åˆ¶å¯¹è±¡ self.af_activeImageDownloadReceipt = receipt; &#125;&#125; 4.AFNetworkActivityIndicatorManagerç±»è®¾è®¡è§£æAFNetworkActivityIndicatorManagerç±»ç”¨æ¥ç®¡ç†ç³»ç»Ÿåœ¨çŠ¶æ€æ ä¸Šçš„æŒ‡ç¤ºå™¨æ˜¾ç¤ºæˆ–éšè—ã€‚ç³»ç»ŸçŠ¶æ€æ ä¸Šçš„æŒ‡ç¤ºå™¨æä¾›çš„æ¥å£éå¸¸ç®€å•ï¼Œåªæœ‰ä¸€ä¸ªï¼š 1[[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:YES]; ä¸Šé¢æ–¹æ³•çš„å‚æ•°å†³å®šæŒ‡ç¤ºå™¨æ˜¯å¦æ˜¾ç¤ºã€‚AFNetworkActivityIndicatorManagerä»ä¸¤ä¸ªæ–¹å‘æ¥ç®¡ç†è¿™ä¸ªæŒ‡ç¤ºå™¨ï¼Œå¯ä»¥å¼€å‘è€…æ‰‹åŠ¨è®¾ç½®ï¼ŒåŒæ—¶ä»–ä¹Ÿä¼šå¯¹æ‰€æœ‰AFNetworkingå‘å‡ºçš„è¯·æ±‚çŠ¶æ€è¿›è¡Œç›‘å¬ï¼Œæ¥è‡ªåŠ¨é€‚åº”å†³å®šæ˜¯å¦æ˜¾ç¤ºæŒ‡ç¤ºå™¨ã€‚ ä»¥å‰æˆ‘åœ¨è®¾è®¡å…¨å±€Loadingæ—¶ï¼Œé€šå¸¸ç›´æ¥ä¸ºä»–æš´æ¼æ˜¾éšä¸¤ä¸ªæ¥å£ï¼Œå½“å¤„ç†å¤šä¸ªå¹¶è¡Œè¯·æ±‚çš„æ—¶å€™å°±å¾ˆå°´å°¬äº†ï¼Œå› ä¸ºä½ æ— æ³•ä¿è¯Loadingåœ¨æœ€åå®Œæˆçš„è¯·æ±‚ç»“æŸåå†éšè—ã€‚ AFNetworkActivityIndicatorManageré‡‡ç”¨äº†è§¦å‘å™¨çš„è®¾è®¡æ¨¡å¼(å…¶å®æœ‰äº›åƒå¼•ç”¨è®¡æ•°)ï¼Œè¯·æ±‚æ¥å¯¹è§¦å‘å™¨è¿›è¡ŒåŠ æˆ–å‡çš„æ“ä½œï¼Œè§¦å‘å™¨å†³å®šæ˜¯å¦è§¦å‘æ˜¾ç¤ºæŒ‡ç¤ºå™¨ã€‚åé¢çš„åº”ç”¨è§£æä¸­ä¼šæœ‰å…·ä½“çš„æ¥å£è§£é‡Šã€‚ å››ã€åº”ç”¨å…¨è§£1.æ£€æµ‹ç½‘ç»œçŠ¶æ€åœ¨AFNetworkingä¸­æä¾›äº†ç®¡ç†ç±»AFNetworkReachabilityManagerç±»ï¼Œè¿™ä¸ªç±»ä¸“é—¨ç”¨äºç½‘ç»œçŠ¶æ€çš„æ£€æµ‹ã€‚å…¶ä»£ç é‡å¾ˆå°‘ï¼Œæ¥å£è®¾è®¡ä¹Ÿååˆ†ç®€å•ã€‚AFNetworkReachabilityManagerç±»è§£æå¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435//è¿”å›é»˜è®¤çš„å•ä¾‹å¯¹è±¡+ (instancetype)sharedManager;//åˆ›å»ºä¸€ä¸ªæ–°çš„ç®¡ç†å¯¹è±¡+ (instancetype)manager;+ (instancetype)managerForDomain:(NSString *)domain;+ (instancetype)managerForAddress:(const void *)address;- (instancetype)initWithReachability:(SCNetworkReachabilityRef)reachability;//è·å–å½“å‰çš„ç½‘ç»œçŠ¶æ€/*typedef NS_ENUM(NSInteger, AFNetworkReachabilityStatus) &#123; AFNetworkReachabilityStatusUnknown = -1, //æœªçŸ¥ AFNetworkReachabilityStatusNotReachable = 0, //æœªè¿æ¥ AFNetworkReachabilityStatusReachableViaWWAN = 1, //ç§»åŠ¨ç½‘è·¯ AFNetworkReachabilityStatusReachableViaWiFi = 2, //WIFI&#125;;*/@property (readonly, nonatomic, assign) AFNetworkReachabilityStatus networkReachabilityStatus;//è·å–å½“å‰ç½‘ç»œæ˜¯å¦è¿æ¥@property (readonly, nonatomic, assign, getter = isReachable) BOOL reachable;//è·å–å½“å‰æ˜¯å¦æ˜¯ç§»åŠ¨ç½‘ç»œ@property (readonly, nonatomic, assign, getter = isReachableViaWWAN) BOOL reachableViaWWAN;//è·å–å½“å‰æ˜¯å¦æ˜¯WIFIç½‘ç»œ@property (readonly, nonatomic, assign, getter = isReachableViaWiFi) BOOL reachableViaWiFi;//å¼€å¯ç½‘ç»œçŠ¶æ€ç›‘å¬ å½“ç½‘ç»œçŠ¶æ€å˜åŒ–æ—¶ä¼šæœ‰å›è°ƒ- (void)startMonitoring;//åœæ­¢è¿›è¡Œç½‘ç»œçŠ¶æ€ç›‘å¬- (void)stopMonitoring;//è®¾ç½®ç½‘ç»œçŠ¶æ€å‘ç”Ÿå˜åŒ–åçš„å›è°ƒ- (void)setReachabilityStatusChangeBlock:(nullable void (^)(AFNetworkReachabilityStatus status))block;//æ ¼å¼åŒ–çš„ç½‘ç»œçŠ¶æ€å­—ç¬¦ä¸²- (NSString *)localizedNetworkReachabilityStatusString;//å¦‚æœå¼€å¯äº†ç½‘ç»œçŠ¶æ€ç›‘å¬ åˆ™ç½‘ç»œçŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ä¹Ÿä¼š å‘è¿™ä¸ªé€šçŸ¥FOUNDATION_EXPORT NSString * const AFNetworkingReachabilityDidChangeNotification;//é€šçŸ¥ä¸­userinfoå­—å…¸ä¸­å¯¹åº”ç½‘ç»œçŠ¶æ€çš„é”®åFOUNDATION_EXPORT NSString * const AFNetworkingReachabilityNotificationStatusItem; 2.UIButton+AFNetworkingç±»åˆ«è¿™ä¸ªç±»åˆ«æ˜¯AFNetworkingä¸­UIéƒ¨åˆ†æ‰€æä¾›äº†ä¸€ä¸ªå·¥å…·ï¼Œç”¨æ¥åˆ›å»ºè¿œç¨‹å›¾ç‰‡æŒ‰é’®ã€‚ 1234567891011121314151617181920212223242526272829303132//è®¾ç½®å…±äº«çš„ä¸‹è½½å™¨å¯¹è±¡ ç”¨æ¥è¿›è¡Œç½‘ç»œå›¾ç‰‡çš„ä¸‹è½½+ (void)setSharedImageDownloader:(AFImageDownloader *)imageDownloader;//è·å–å…±äº«çš„ä¸‹è½½å™¨å¯¹è±¡+ (AFImageDownloader *)sharedImageDownloader;//ä¸‹é¢è¿™äº›æ–¹æ³•ç”¨æ¥è®¾ç½®æŒ‰é’®å›¾ç‰‡- (void)setImageForState:(UIControlState)state withURL:(NSURL *)url;- (void)setImageForState:(UIControlState)state withURL:(NSURL *)url placeholderImage:(nullable UIImage *)placeholderImage;- (void)setImageForState:(UIControlState)state withURLRequest:(NSURLRequest *)urlRequest placeholderImage:(nullable UIImage *)placeholderImage success:(nullable void (^)(NSURLRequest *request, NSHTTPURLResponse * _Nullable response, UIImage *image))success failure:(nullable void (^)(NSURLRequest *request, NSHTTPURLResponse * _Nullable response, NSError *error))failure;//ä¸‹é¢è¿™äº›æ–¹æ³•ç”¨æ¥è®¾ç½®æŒ‰é’®èƒŒæ™¯å›¾ç‰‡- (void)setBackgroundImageForState:(UIControlState)state withURL:(NSURL *)url;- (void)setBackgroundImageForState:(UIControlState)state withURL:(NSURL *)url placeholderImage:(nullable UIImage *)placeholderImage;- (void)setBackgroundImageForState:(UIControlState)state withURLRequest:(NSURLRequest *)urlRequest placeholderImage:(nullable UIImage *)placeholderImage success:(nullable void (^)(NSURLRequest *request, NSHTTPURLResponse * _Nullable response, UIImage *image))success failure:(nullable void (^)(NSURLRequest *request, NSHTTPURLResponse * _Nullable response, NSError *error))failure;//å–æ¶ˆæŒ‰é’®å›¾ç‰‡ä¸‹è½½ä»»åŠ¡- (void)cancelImageDownloadTaskForState:(UIControlState)state;//å–æ¶ˆæŒ‰é’®èƒŒæ™¯å›¾ç‰‡ä¸‹è½½ä»»åŠ¡- (void)cancelBackgroundImageDownloadTaskForState:(UIControlState)state; 3.UIImageView+AFNetworkingç±»åˆ«è¿™ä¸ªç±»åˆ«æ˜¯AFNetworkingæ¡†æ¶æä¾›äº†UIImageViewåŠ è½½å¼‚æ­¥å›¾ç‰‡çš„æ–¹æ¡ˆ(æ›´å¤šæ—¶å€™å¯èƒ½ä¼šç”¨SDWebImage)ã€‚ 123456789101112131415//è®¾ç½®å…±äº«çš„å›¾ç‰‡ä¸‹è½½å™¨+ (void)setSharedImageDownloader:(AFImageDownloader *)imageDownloader;//è·å–å…±äº«çš„å›¾ç‰‡ä¸‹è½½å™¨+ (AFImageDownloader *)sharedImageDownloader;//è®¾ç½®å›¾ç‰‡- (void)setImageWithURL:(NSURL *)url;- (void)setImageWithURL:(NSURL *)url placeholderImage:(nullable UIImage *)placeholderImage;- (void)setImageWithURLRequest:(NSURLRequest *)urlRequest placeholderImage:(nullable UIImage *)placeholderImage success:(nullable void (^)(NSURLRequest *request, NSHTTPURLResponse * _Nullable response, UIImage *image))success failure:(nullable void (^)(NSURLRequest *request, NSHTTPURLResponse * _Nullable response, NSError *error))failure;//å–æ¶ˆå›¾ç‰‡ä¸‹è½½ä»»åŠ¡- (void)cancelImageDownloadTask; 4.çŠ¶æ€æ çš„ç½‘ç»œçŠ¶æ€æŒ‡ç¤ºå™¨AFNetworkingçš„UIå·¥å…·åŒ…ä¸­æä¾›äº†AFNetworkActivityIndicatorManagerç±»ï¼Œè¿™ä¸ªç®¡ç†ç±»ç”¨æ¥å¯¹iOSè®¾å¤‡çŠ¶æ€æ ä¸Šæ´»åŠ¨æŒ‡ç¤ºå™¨çš„æ˜¾ç¤ºéšè—è¿›è¡Œç®¡ç†ã€‚å…¶æä¾›çš„æ¥å£ååˆ†ç®€å•ï¼Œè§£æå¦‚ä¸‹ï¼š 12345678910111213141516171819202122//è®¾ç½®æ˜¯å¦æœ‰æ•ˆ /*å¦‚æœè®¾ç½®ä¸ºYESï¼Œåˆ™å¯ä»¥æ‰‹åŠ¨è¿›è¡Œæ§åˆ¶å™¨çš„æ§åˆ¶å¦‚æœè®¾ç½®ä¸ºNOï¼Œåˆ™æ§åˆ¶å™¨åªä¼šæ ¹æ®ç½‘ç»œé€šçŸ¥æ¥ç»å¯¹æ˜¯å¦æ˜¾ç¤º*/@property (nonatomic, assign, getter = isEnabled) BOOL enabled;//æŒ‡ç¤ºå™¨å½“å‰æ˜¯å¦æ˜¾ç¤º@property (readonly, nonatomic, assign, getter=isNetworkActivityIndicatorVisible) BOOL networkActivityIndicatorVisible;//æŒ‡ç¤ºå™¨çš„å»¶æ—¶æ˜¾ç¤ºæ—¶é—´ å½“å¤šä¹…åå¦‚æœç½‘ç»œè¯·æ±‚è¿˜æ²¡æœ‰å®Œæˆ å†è¿›è¡Œæ˜¾ç¤º@property (nonatomic, assign) NSTimeInterval activationDelay;//è®¾ç½®å½“è¯·æ±‚ç»“æŸå¤šä¹…å æ´»åŠ¨æŒ‡ç¤ºå™¨éšè— é»˜è®¤ä¸º0.17s@property (nonatomic, assign) NSTimeInterval completionDelay;//è·å–å•ä¾‹å¯¹è±¡+ (instancetype)sharedManager;//æ‰‹åŠ¨å¯¹è§¦å‘å™¨åŠ 1 //å½“è®¡æ•°å¤§äº0 åˆ™æ˜¾ç¤ºæŒ‡ç¤ºå™¨- (void)incrementActivityCount;//æ‰‹åŠ¨å¯¹è§¦å‘å™¨å‡1//å½“è®¡æ•°ä¸å¤§äº0 åˆ™éšè—æŒ‡ç¤ºå™¨- (void)decrementActivityCount;//è®¾ç½®æŒ‡ç¤ºå™¨çŠ¶æ€æ”¹å˜çš„å›è°ƒ- (void)setNetworkingActivityActionWithBlock:(nullable void (^)(BOOL networkActivityIndicatorVisible))block; 5.UIActivityIndicatorView+AFNetworkingä¸UIRefreshControl+AFNetworkingç±»åˆ«è¿™ä¸¤ä¸ªç±»åˆ«å¯ä»¥å°†ä¸€ä¸ªè¯·æ±‚ä»»åŠ¡ç»‘å®šåˆ°æ´»åŠ¨æŒ‡ç¤ºå™¨æˆ–åŸç”Ÿåˆ·æ–°ç»„ä»¶ä¸Šï¼Œä»»åŠ¡çš„å®Œæˆä¸å¦æ¥å†³å®šæ§ä»¶æ˜¯å¦å±•ç¤ºåŠ¨ç”»ã€‚ 1234567//UIActivityIndicatorView+AFNetworking//å°†ä»»åŠ¡ç»‘å®šåˆ°æ´»åŠ¨æŒ‡ç¤ºå™¨ä¸Š- (void)setAnimatingWithStateOfTask:(nullable NSURLSessionTask *)task;//UIRefresh+AFNetworing//å°†ä»»åŠ¡ç»‘å®šåˆ°åˆ·æ–°ç»„ä»¶ä¸Š- (void)setRefreshingWithStateOfTask:(NSURLSessionTask *)task; 6.UIProgressView+AFNetworkingç±»åˆ«è¿™ä¸ªç±»åˆ«å¯ä»¥å°†ä¸Šä¼ å’Œä¸‹è½½ä»»åŠ¡ç»‘å®šåˆ°è¿›åº¦æ¡ç»„ä»¶ä¸Šã€‚ 123456//å°†ä¸Šä¼ ä»»åŠ¡ç»‘å®š- (void)setProgressWithUploadProgressOfTask:(NSURLSessionUploadTask *)task animated:(BOOL)animated;//å°†ä¸‹è½½ä»»åŠ¡ç»‘å®š- (void)setProgressWithDownloadProgressOfTask:(NSURLSessionDownloadTask *)task animated:(BOOL)animated; 7.UIWebView+AFNetworkingç±»åˆ«è¿™ä¸ªç±»åˆ«æ˜¯å¯¹UIWebViewçš„ä¸€ç§æ‰©å±•(ç”±äºWebKitï¼Œè¿™ä¸ªç±»åˆ«å¾ˆå°‘ä¼šç”¨åˆ°äº†)ï¼Œå…¶ä¸»è¦ä½œç”¨æ˜¯å°†WebViewçš„ç›´æ¥åŠ è½½æ”¹ä¸ºå…ˆä¸‹è½½æœ¬åœ°æ•°æ®ï¼Œç„¶åè¿›è¡Œæœ¬åœ°æ•°æ®çš„åŠ è½½ï¼Œå¹¶å¯ä»¥æä¾›ä¸€ä¸ªè¿›åº¦ã€‚ 123456789101112//è¿™ä¸ªæ–¹æ³•æ˜¯ä¸‹é¢æ–¹æ³•çš„å°è£…- (void)loadRequest:(NSURLRequest *)request progress:(NSProgress * _Nullable __autoreleasing * _Nullable)progress success:(nullable NSString * (^)(NSHTTPURLResponse *response, NSString *HTML))success failure:(nullable void (^)(NSError *error))failure;//è¿›è¡Œç½‘é¡µæ•°æ®è¯·æ±‚ï¼Œå®Œæˆåä¼šå°†ç½‘é¡µæ•°æ®è¿”å› å¹¶ä¸”è‡ªåŠ¨çš„è¿›è¡ŒåŠ è½½- (void)loadRequest:(NSURLRequest *)request MIMEType:(nullable NSString *)MIMEType textEncodingName:(nullable NSString *)textEncodingName progress:(NSProgress * _Nullable __autoreleasing * _Nullable)progress success:(nullable NSData * (^)(NSHTTPURLResponse *response, NSData *data))success failure:(nullable void (^)(NSError *error))failure; 8.å›¾ç‰‡ä¸‹è½½å™¨AFImageDownloaderçš„åº”ç”¨AFImageDownloaderæ˜¯AFæ¡†æ¶ä¸­æä¾›çš„å›¾ç‰‡ä¸‹è½½ç®¡ç†ç±»ã€‚å…¶å†…éƒ¨å°è£…äº†ä¸€ä¸ªAFImageDownloadReceiptå›æ‰§ç±»ï¼Œè¿™ä¸ªç±»å®ä¾‹ç”¨æ¥è¿›è¡Œæ­£åœ¨ä¸‹è½½å›¾ç‰‡ä»»åŠ¡çš„å–æ¶ˆã€‚AFImageDownloaderè§£æå¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031//å›¾ç‰‡ç¼“å­˜å™¨@property (nonatomic, strong, nullable) id &lt;AFImageRequestCache&gt; imageCache;//è¯·æ±‚ä¼šè¯ç®¡ç†ç±»@property (nonatomic, strong) AFHTTPSessionManager *sessionManager;//è®¾ç½®ä¸‹è½½å™¨å±æ€§/*ä¸‹è½½å™¨å¯ä»¥è®¾ç½®åŒæ—¶ä¸‹è½½å›¾ç‰‡çš„æœ€å¤§æ•°é‡ å¦‚æœè¶…å‡ºæ•°é‡çš„è¯·æ±‚ä¼šè¢«æš‚æ—¶æŒ‚èµ·typedef NS_ENUM(NSInteger, AFImageDownloadPrioritization) &#123; AFImageDownloadPrioritizationFIFO,//è¢«æŒ‚èµ·çš„è¯·æ±‚éµå®ˆå…ˆæŒ‚èµ·çš„å…ˆå¼€å§‹ AFImageDownloadPrioritizationLIFO//è¢«æŒ‚èµ·çš„è¯·æ±‚éµå®ˆåæŒ‚èµ·çš„å…ˆå¼€å§‹&#125;;*/@property (nonatomic, assign) AFImageDownloadPrioritization downloadPrioritizaton;//è·å–å•ä¾‹å¯¹è±¡+ (instancetype)defaultInstance;//è·å–é»˜è®¤çš„urlç¼“å­˜å™¨+ (NSURLCache *)defaultURLCache;//ä½¿ç”¨åˆå§‹åŒ–æ–¹æ³•æ–°å»ºå¯¹è±¡- (instancetype)initWithSessionManager:(AFHTTPSessionManager *)sessionManager downloadPrioritization:(AFImageDownloadPrioritization)downloadPrioritization maximumActiveDownloads:(NSInteger)maximumActiveDownloads imageCache:(nullable id &lt;AFImageRequestCache&gt;)imageCache;//è¿›è¡Œå›¾ç‰‡è¯·æ±‚ éšæœºç”Ÿæˆuuid- (nullable AFImageDownloadReceipt *)downloadImageForURLRequest:(NSURLRequest *)request success:(nullable void (^)(NSURLRequest *request, NSHTTPURLResponse * _Nullable response, UIImage *responseObject))success failure:(nullable void (^)(NSURLRequest *request, NSHTTPURLResponse * _Nullable response, NSError *error))failure;//å’Œä¸Šé¢æ–¹æ³•ä¸€æ ·ï¼Œä½¿ç”¨è‡ªå®šä¹‰çš„uuid- (nullable AFImageDownloadReceipt *)downloadImageForURLRequest:(NSURLRequest *)request withReceiptID:(NSUUID *)receiptID success:(nullable void (^)(NSURLRequest *request, NSHTTPURLResponse * _Nullable response, UIImage *responseObject))success failure:(nullable void (^)(NSURLRequest *request, NSHTTPURLResponse * _Nullable response, NSError *error))failure; 9.å›¾ç‰‡ç¼“å­˜å™¨åº”ç”¨AFæ¡†æ¶ä¸­UIKitå·¥å…·åŒ…é‡Œçš„ADAutoPurgingImageCacheç±»ç”¨æ¥è¿›è¡Œå›¾ç‰‡ç¼“å­˜ï¼Œå…¶è¿˜å°è£…äº†è‡ªåŠ¨æ¸…ç¼“å­˜çš„é€»è¾‘ï¼Œç¼“å­˜çš„å‘½ä¸­åˆ™æ˜¯å®Œå…¨æŒ‰ç…§ä½¿ç”¨æ—¶é—´å…ˆåä¸ºæ ‡å‡†ã€‚ç±»æ¥å£è§£æå¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435//å›¾ç‰‡ç¼“å­˜åè®®@protocol AFImageCache &lt;NSObject&gt;//æ ¹æ®idæ¥ç¼“å­˜å›¾ç‰‡- (void)addImage:(UIImage *)image withIdentifier:(NSString *)identifier;//æ ¹æ®idæ¥åˆ é™¤å›¾ç‰‡- (BOOL)removeImageWithIdentifier:(NSString *)identifier;//åˆ é™¤æ‰€æœ‰å›¾ç‰‡ç¼“å­˜- (BOOL)removeAllImages;//æ ¹æ®idæ¥å–ç¼“å­˜- (nullable UIImage *)imageWithIdentifier:(NSString *)identifier;@end//ç½‘ç»œå›¾ç‰‡ç¼“å­˜åè®®@protocol AFImageRequestCache &lt;AFImageCache&gt;//ç¼“å­˜æŸä¸ªurlçš„å›¾ç‰‡ ç”¨url+idçš„æ–¹å¼- (void)addImage:(UIImage *)image forRequest:(NSURLRequest *)request withAdditionalIdentifier:(nullable NSString *)identifier;//ç§»é™¤æŸä¸ªç¼“å­˜å›¾ç‰‡- (BOOL)removeImageforRequest:(NSURLRequest *)request withAdditionalIdentifier:(nullable NSString *)identifier;//è·å–ç¼“å­˜- (nullable UIImage *)imageforRequest:(NSURLRequest *)request withAdditionalIdentifier:(nullable NSString *)identifier;@end//ç¼“å­˜å™¨å®ä¾‹ç±»@interface AFAutoPurgingImageCache : NSObject &lt;AFImageRequestCache&gt;//ç¼“å­˜ç©ºé—´å¤§å° é»˜è®¤ä¸º100M@property (nonatomic, assign) UInt64 memoryCapacity;//å½“ç¼“å­˜è¶…è¿‡æœ€å¤§é™åˆ¶æ—¶è¿›è¡Œæ¸…ç¼“å­˜ æ¸…ç¼“å­˜åçš„ç¼“å­˜åº•çº¿å¤§å°è®¾ç½® é»˜è®¤60M@property (nonatomic, assign) UInt64 preferredMemoryUsageAfterPurge;//å·²ç”¨ç©ºé—´å¤§å°@property (nonatomic, assign, readonly) UInt64 memoryUsage;//åˆå§‹åŒ–æ–¹æ³•- (instancetype)init;- (instancetype)initWithMemoryCapacity:(UInt64)memoryCapacity preferredMemoryCapacity:(UInt64)preferredMemoryCapacity;@end æ¯æ¬¡è¯»ä¼˜ç§€çš„ä»£ç éƒ½æ˜¯ä¸€æ¬¡æ·±åˆ»çš„å­¦ä¹ ï¼Œæ¯ä¸€æ¬¡æ¨¡ä»¿ï¼Œéƒ½æ˜¯åˆ›é€ çš„å¼€å§‹ï¼ â€”â€”QQ 316045346 æ¬¢è¿äº¤æµ","categories":[{"name":"iOSç¬¬ä¸‰æ–¹åº“","slug":"iOSç¬¬ä¸‰æ–¹åº“","permalink":"http://huishao.cc/categories/iOSç¬¬ä¸‰æ–¹åº“/"}],"tags":[],"keywords":[{"name":"iOSç¬¬ä¸‰æ–¹åº“","slug":"iOSç¬¬ä¸‰æ–¹åº“","permalink":"http://huishao.cc/categories/iOSç¬¬ä¸‰æ–¹åº“/"}]},{"title":"Tkinterä¹‹Menuç»„ä»¶ç”¨æ³•","slug":"361Tkinterä¹‹Menuç»„ä»¶ç”¨æ³•","date":"2017-11-01T16:00:00.000Z","updated":"2021-07-15T07:25:02.688Z","comments":true,"path":"2017/11/02/361Tkinterä¹‹Menuç»„ä»¶ç”¨æ³•/","link":"","permalink":"http://huishao.cc/2017/11/02/361Tkinterä¹‹Menuç»„ä»¶ç”¨æ³•/","excerpt":"","text":"Tkinterä¹‹Menuç»„ä»¶ç”¨æ³•å¼€å‘å·¥å…·ç±»æ¡Œé¢åº”ç”¨ä½¿ç”¨Pythonã€Javaè¿™ç±»è¯­è¨€æ˜¯ä¸€ç§ä¸é”™çš„é€‰æ‹©ï¼Œä»–ä»¬çš„GUIåº“éƒ½å¯ä»¥å¾ˆå¥½çš„æ”¯æŒè·¨å¹³å°ç‰¹æ€§ã€‚æœ¬ç³»åˆ—åšå®¢ä¸»è¦æ€»ç»“Tkinteråº“ä¸­æä¾›çš„UIç»„ä»¶ï¼Œå…³äºJavaçš„GUIå¼€å‘ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥åœ¨å¦‚ä¸‹ç³»åˆ—åšå®¢ä¸­æ‰¾åˆ°ï¼š https://my.oschina.net/u/2340880/blog?catalog=5647945&amp;temp=1509528194945ã€‚ Tkinterä¸­æœ‰æä¾›Menuèœå•ç»„ä»¶ä¸­å¯ä»¥æ·»åŠ å¦‚ä¸‹å‡ ç§ç»„ä»¶: 1_åŠ¨ä½œé¡¹ï¼šç®€å•çš„è¡Œä¸ºæŒ‰é’®ï¼Œç”¨æˆ·ç‚¹å‡»åä¼šæ‰§è¡Œç›¸åº”çš„æ–¹æ³•ã€‚ 2_å­èœå•ï¼šè¡Œä¸ºå®Œæ•´çš„å­èœå•é¡¹ã€‚ 3_æ§åˆ¶æŒ‰é’®ï¼šå¯æœ‰é€‰ä¸­ä¸éé€‰ä¸­çŠ¶æ€ï¼Œç”¨æ¥åšå¼€å…³ã€‚ 4_å•é€‰åˆ—è¡¨ï¼šä¸€ç»„å•é€‰æŒ‰é’®ã€‚ ä¸ºä¸€ä¸ªçª—å£æ·»åŠ èœå•ååˆ†å®¹æ˜“ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345678910root = Tk()rootMenu = Menu(root)root.config(menu=rootMenu)item = Menu(master=rootMenu,postcommand=call,tearoff=1)rootMenu.add_cascade(menu=item,label=\"File\")item.add_command(label='new File')subItem = Menu(item)subItem.add_command(label=\"Open in noew window\")item.add_cascade(menu=subItem,label=\"Open\") æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š Menuæ„é€ å‡½æ•°ä¸­ç¬¬1ä¸ªå‚æ•°å¯ä»¥ä¼ å…¥èœå•æ‰€å±çš„çª—å£æˆ–è€…çˆ¶èœå•ï¼Œåé¢å¯ä»¥æ·»åŠ ä¸€äº›èœå•é…ç½®ï¼Œä¾‹å¦‚ï¼š | å±æ€§ | æ„ä¹‰ || activebackground | æ´»è·ƒæ—¶çš„èƒŒæ™¯è‰² || activeborderwidth | æ´»è·ƒæ—¶çš„è¾¹æ¡†å®½åº¦ || activeforeground | æ´»è·ƒæ—¶çš„å‰æ™¯è‰² || bg æˆ–è€… background | æ­£å¸¸çŠ¶æ€èƒŒæ™¯è‰² || bd æˆ–è€… borderwidth | æ­£å¸¸çŠ¶æ€å˜å®½å®½åº¦ || cursor | é¼ æ ‡æ ·å¼ || disabledforeground | æ— æ•ˆçŠ¶æ€çš„å‰æ™¯è‰² || font | èœå•å­—ä½“ || fg æˆ–è€… foreground | æ­£å¸¸çŠ¶æ€çš„å‰æ™¯è‰² || postcommand | è®¾ç½®èœå•è¢«å”¤å‡ºæ—¶çš„å›è°ƒ || relief | è®¾ç½®èœå•æµ®é›•æ•ˆæœ || selectcolor | è®¾ç½®èœå•é€‰ä¸­é¢œè‰² || tearoff | å¯ä»¥è®¾ç½®ä¸º0å’Œ1ï¼Œè¡¨ç¤ºæ­¤èœå•æ˜¯å¦å¯ä»¥ç‹¬ç«‹å‡ºæ¥ || tearoffcommand | èœå•ç‹¬ç«‹è¢«è§¦å‘æ—¶çš„å›è°ƒ || title | å¯è®¾ç½®ç‹¬ç«‹èœå•çš„æ ‡é¢˜ | éœ€è¦æ³¨æ„ï¼Œåœ¨MacOSç³»ç»Ÿä¸Šï¼Œèœå•çš„æ ·å¼æ˜¯ç”±ç³»ç»Ÿç»´æŠ¤çš„ï¼Œä¸Šé¢çš„å¤§å¤šå±æ€§éƒ½å°†æ²¡æœ‰æ•ˆæœã€‚ ä¸‹é¢è¿™äº›æ–¹æ³•ç”¨æ¥è¿›è¡Œèœå•é…ç½®ï¼š 123456789101112131415161718192021222324252627282930313233343536373839#æ·»åŠ ä¸€ä¸ªå­èœå• coptionä¸ºé…ç½®é€‰é¡¹add_cascade(coption...)#æ·»åŠ ä¸€ä¸ªåˆ‡æ¢æŒ‰é’® coptionä¸ºé…ç½®é€‰é¡¹add_checkbutton(coption...)#æ·»åŠ ä¸€ä¸ªåŠŸèƒ½æŒ‰é’® coptionä¸ºé…ç½®é€‰é¡¹add_command(coption...)#æ·»åŠ ä¸€ä¸ªå•é€‰æŒ‰é’® coptionä¸ºé…ç½®é€‰é¡¹add_radiobutton(coption...)#æ·»åŠ ä¸€ä¸ªåˆ†å‰²çº¿add_separator()#åˆ é™¤index1 åˆ° index2ä¹‹é—´çš„é€‰é¡¹delete(index1,index2)#è·å–èœå•æŸä¸€é¡¹çš„å±æ€§å€¼entrycget(index,coption)#é‡æ–°é…ç½®èœå•ä¸­æŸé¡¹çš„å±æ€§entryconfigure(index,coption...)#è¿”å›å‚æ•°ä½ç½®å¯¹åº”çš„é€‰é¡¹ç´¢å¼•index(i)#åœ¨æŒ‡å®šä½ç½®æ’å…¥ä¸€ä¸ªå­èœå•insert_cascade(index,coption...)#åœ¨æŒ‡å®šä½ç½®æ’å…¥ä¸€ä¸ªåˆ‡æ¢æŒ‰é’®insert_checkbutton(index,coption...)#åœ¨æŒ‡å®šä½ç½®æ’å…¥ä¸€ä¸ªåŠŸèƒ½æŒ‰é’®insert_command(index,coption...)#åœ¨æŒ‡å®šä½ç½®æ’å…¥ä¸€ä¸ªå•é€‰æŒ‰é’®insert_radiobutton(index,coption...)#åœ¨æŒ‡å®šä½ç½®æ’å…¥ä¸€ä¸ªåˆ†å‰²çº¿insert_separator(index)#ä»£ç æ‰‹åŠ¨è°ƒç”¨ä¸€æ¬¡æŸä¸ªé€‰é¡¹invoke(index)#åœ¨çª—å£æŒ‡å®šä½ç½®å¼¹å‡ºèœå•post(x,y)#è·å–ä¸ªé€‰é¡¹çš„ç±»å‹type(index)#è·å–æŸä¸ªé€‰é¡¹è·ç¦»èœå•é¡¶éƒ¨çš„åç§»é‡yposition(n)#æ·»åŠ ä¸€ä¸ªé€‰é¡¹ å¯ä»¥æ˜¯åŠŸèƒ½æŒ‰é’®ï¼Œåˆ‡æ¢æŒ‰é’®ï¼Œå•é€‰æŒ‰é’®æˆ–å­èœå•ï¼Œç”±ç±»å‹ç¡®è®¤#ç±»å‹å¯é€‰ cascade checkbutton command radiobutton separatoradd(kind,coption) ä¸Šé¢åˆ—ä¸¾æ–¹æ³•ä¸­çš„coptionç”¨æ¥è¿›è¡Œä¸€äº›é…ç½®é¡¹çš„è®¾ç½®ï¼Œå¯é€‰é…ç½®é¡¹å¦‚ä¸‹ï¼š | å±æ€§å | æ„ä¹‰ || accelerator | è®¾ç½®å¿«æ·é”® || activebackground | æ¿€æ´»çŠ¶æ€èƒŒæ™¯è‰² || activeforeground | æ¿€æ´»çŠ¶æ€å‰æ™¯è‰² || background | æ­£å¸¸çŠ¶æ€èƒŒæ™¯è‰² || bitmap | è®¾ç½®bitmapå›¾æ ‡ || columnbreak | è®¾ç½®åˆ†åˆ— || command | è®¾ç½®æ¿€æ´»æ—¶çš„å›è°ƒå‡½æ•° || compound | è®¾ç½®å±•ç¤ºæ–‡æœ¬å’Œå›¾æ ‡æ˜¯çš„å¸ƒå±€æ–¹å¼ || font | è®¾ç½®å­—ä½“ || foreground | è®¾ç½®æ­£å¸¸çŠ¶æ€çš„å‰æ™¯è‰² || hidemargin | è®¾ç½®æ˜¯å¦éšè—å¤–è¾¹è· è®¾ç½®Trueæˆ–False || image | è®¾ç½®å›¾ç‰‡ gifæ ¼å¼ || label | è®¾ç½®æ˜¾ç¤ºçš„æ–‡æœ¬ || menu | è¿™ä¸ªé€‰é¡¹åªç”¨åœ¨æ·»åŠ å­èœå•ä¸­ || offvalue | è®¾ç½®checkbuttonå…³é—­æ—¶çš„å€¼ || onvalue | è®¾ç½®checkbuttonå¼€å¯æ—¶çš„å€¼ || selectcolor | è®¾ç½®é€‰ä¸­çŠ¶æ€çš„é¢œè‰² || selectimage | è®¾ç½®é€‰ä¸­çŠ¶æ€çš„å›¾åƒ || state | è®¾ç½®é€‰é¡¹çŠ¶æ€ï¼ŒDISABLEDæˆ–ACTIVE || underline | è®¾ç½®ä¸‹åˆ’çº¿ || value | é€‰é¡¹çš„å€¼ || variable | ç”¨äºå•é€‰æŒ‰é’®æˆ–åˆ‡æ¢æŒ‰é’® |","categories":[{"name":"Python","slug":"Python","permalink":"http://huishao.cc/categories/Python/"}],"tags":[],"keywords":[{"name":"Python","slug":"Python","permalink":"http://huishao.cc/categories/Python/"}]},{"title":"iOS11æ–°ç‰¹æ€§ï¼šæ–°å¢æ‹–æ‹½äº¤äº’ä½“éªŒ","slug":"360iOS11æ–°ç‰¹æ€§ï¼šæ–°å¢æ‹–æ‹½äº¤äº’ä½“éªŒ","date":"2017-10-19T16:00:00.000Z","updated":"2021-07-15T07:23:11.410Z","comments":true,"path":"2017/10/20/360iOS11æ–°ç‰¹æ€§ï¼šæ–°å¢æ‹–æ‹½äº¤äº’ä½“éªŒ/","link":"","permalink":"http://huishao.cc/2017/10/20/360iOS11æ–°ç‰¹æ€§ï¼šæ–°å¢æ‹–æ‹½äº¤äº’ä½“éªŒ/","excerpt":"","text":"iOS11æ–°ç‰¹æ€§ï¼šæ–°å¢æ‹–æ‹½äº¤äº’ä½“éªŒä¸€ã€å¼•è¨€åœ¨ä½¿ç”¨PCè¿›è¡Œæ“ä½œæ—¶ï¼Œä½ ä¸€å®šé‡åˆ°è¿‡è¿™æ ·çš„åœºæ™¯ï¼Œå¯ä»¥å°†å›¾ç‰‡ç›´æ¥æ‹–å…¥èŠå¤©è½¯ä»¶è¿›è¡Œå‘é€ï¼Œå¯ä»¥å°†æ–‡æ¡£ã€éŸ³ä¹ã€è§†é¢‘æ–‡ä»¶ç­‰æ–‡ä»¶æ‹–å…¥ç›¸åº”åº”ç”¨ç¨‹åºç›´æ¥è¿›è¡Œä½¿ç”¨ã€‚è¿™ç§æ‹–æ‹½æ“ä½œäº¤äº’æå¤§çš„æ–¹ä¾¿äº†ç”µè„‘çš„ä½¿ç”¨ã€‚åœ¨iOS11ä¸­ï¼Œä½ å¯ä»¥åœ¨iPhoneæˆ–iPadä¸Šæ„å»ºè¿™ç§äº¤äº’ä½“éªŒï¼ è¯´åœ¨å‰é¢çš„è¯ï¼š æ‹–æ‹½æ“ä½œåœ¨iPadä¸Šæ˜¯æ”¯æŒè·¨åº”ç”¨ç¨‹åºçš„ï¼Œä½ å¯ä»¥ä»ä¸€ä¸ªåº”ç”¨ä¸­æ‹–å–é¡¹ç›®ï¼Œé€šè¿‡Homeé”®å›åˆ°ä¸»ç•Œé¢å¹¶ä¸”æ‰“å¼€å¦ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œç„¶åå°†è¢«æ‹–æ‹½çš„é¡¹ç›®ä¼ é€’ç»™è¿™ä¸ªåº”ç”¨ç¨‹åºä¸­ã€‚åœ¨iPhoneä¸Šï¼Œæ‹–æ‹½æ“ä½œåªæ”¯æŒå½“å‰åº”ç”¨ç¨‹åºå†…ï¼Œä½ å¯ä»¥å°†æŸä¸ªå…ƒç´ ä»ä¸€ä¸ªç•Œé¢æ‹–æ‹½åˆ°å¦ä¸€ä¸ªï¼Œè¿™ç§ç»´åº¦çš„æ“ä½œå¯ä»¥ç»™è®¾è®¡äººå‘˜æ›´å¤§çš„çµæ´»æ€§ã€‚ æ‹–æ‹½æ“ä½œè¢«è®¾è®¡æˆç³»ç»Ÿç®¡ç†ï¼Œå¼€å‘è€…ä¸éœ€è¦ä¸ºAppç”³è¯·ç‰¹æ®Šçš„ç”¨æˆ·æƒé™ã€‚ äºŒã€æ‹–æ‹½æºå¯¹äºæ‹–æ‹½æ“ä½œï¼Œè‡³å°‘è¦æœ‰ä¸¤ä¸ªç»„ä»¶ï¼Œä¸€ä¸ªç»„ä»¶ä½œä¸ºæ‹–æ‹½æºç”¨æ¥æä¾›æ•°æ®ï¼Œä¸€ä¸ªç»„ä»¶ä½œä¸ºæ‹–æ‹½ç›®çš„ç”¨æ¥æ¥æ”¶æ•°æ®ï¼Œå½“å‰ï¼ŒåŒä¸€ä¸ªç»„ä»¶æ—¢å¯ä»¥æ˜¯æ‹–æ‹½æºä¹Ÿå¯ä»¥æ˜¯æ‹–æ‹½ç›®çš„ã€‚é¦–å…ˆæˆ‘ä»¬å…ˆæ¥çœ‹æ‹–æ‹½æºï¼Œåœ¨UIKitæ¡†æ¶ä¸­ï¼ŒiOS11é»˜è®¤å®ç°äº†ä¸€äº›ç»„ä»¶å¯ä»¥ä½œä¸ºæ‹–æ‹½æºï¼Œ ä¾‹å¦‚UITextFieldã€UITextViewã€UITableViewå’ŒUICollectionViewç­‰ã€‚æ–‡æœ¬ç»„ä»¶é»˜è®¤æ”¯æŒæ‹–æ‹½æ“ä½œè¿›è¡Œæ–‡æœ¬çš„ä¼ é€’ï¼Œå¯¹äºåˆ—è¡¨ç»„ä»¶åˆ™é»˜è®¤æ”¯æŒå…ƒç´ çš„æ‹–æ‹½ã€‚ä¾‹å¦‚ï¼Œåœ¨UITextFieldé€‰ä¸­çš„æ–‡æ¡ˆä¸­è¿›è¡Œæ‹–æ‹½ï¼Œå¯ä»¥å°†æ–‡å­—æ‹–æ‹½å‡ºæ¥ï¼Œæ•ˆæœå¦‚ä¸‹å›¾ï¼š ä»»æ„çš„UIViewç»„ä»¶éƒ½å¯ä»¥ä½œä¸ºæ‹–æ‹½æºï¼Œè®©å…¶æˆä¸ºæ‹–æ‹½æºå…¶å®ä¹Ÿååˆ†ç®€å•ï¼Œåªéœ€è¦3æ­¥ï¼š 1.åˆ›å»ºä¸€ä¸ªUIDragInteractionè¡Œä¸ºå¯¹è±¡ã€‚ 2.è®¾ç½®UIDragInteractionå¯¹è±¡çš„ä»£ç†å¹¶å®ç°ç›¸åº”æ–¹æ³•ã€‚ 3.å°†UIDragInteractionå¯¹è±¡æ·»åŠ åˆ°æŒ‡å®šViewä¸Šã€‚ æœ€ç®€å•çš„å¯æ‹–æ‹½ç»„ä»¶çš„åˆ›å»ºç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930- (void)viewDidLoad &#123; [super viewDidLoad]; [self.view addSubview:self.dragView];&#125;//åˆ›å»ºView-(UIView *)dragView&#123; if (!_dragView) &#123; _dragView = [[UIView alloc]initWithFrame:CGRectMake(100, 100, 100, 100)]; _dragView.backgroundColor = [UIColor redColor]; [_dragView addInteraction:self.dragInteraction]; &#125; return _dragView;&#125;//åˆ›å»ºæ‹–æ‹½è¡Œä¸ºå¯¹è±¡-(UIDragInteraction *)dragInteraction&#123; if (!_dragInteraction) &#123; _dragInteraction = [[UIDragInteraction alloc]initWithDelegate:self]; //è¦è®¾ç½®å¯ç”¨ æ³¨æ„ï¼ï¼ï¼ [_dragInteraction setEnabled:YES]; &#125; return _dragInteraction;&#125;//å®ç°æä¾›æ•°æ®çš„ä»£ç†æ–¹æ³•- (NSArray&lt;UIDragItem *&gt; *)dragInteraction:(UIDragInteraction *)interaction itemsForBeginningSession:(id&lt;UIDragSession&gt;)session&#123; //æ•°æ®æä¾›è€… NSItemProvider * provider = [[NSItemProvider alloc]initWithObject:@\"Hello World\"]; UIDragItem * item = [[UIDragItem alloc]initWithItemProvider:provider]; return @[item];&#125; ä¸Šé¢çš„dragInteraction:ä»£ç†æ–¹æ³•ç”¨æ¥æä¾›è¦ä¼ é€’çš„æ•°æ®ï¼Œä¼ é€’çš„æ•°æ®å¿…é¡»éµå®ˆç›¸åº”çš„æ‰¿è¯ºåè®®ï¼Œåé¢ä¼šç»™å¤§å®¶ä»‹ç»ï¼Œè¿™é‡Œåªæ˜¯ç®€å•è¿”å›äº†ä¸€ä¸ªå­—ç¬¦ä¸²æ•°æ®Hello Worldï¼Œè¿è¡Œå·¥ç¨‹ï¼Œä½ å¯ä»¥è¯•éªŒä¸‹ï¼Œå¯ä»¥ç›´æ¥å°†æˆ‘ä»¬è‡ªå®šä¹‰çš„è§†å›¾æ‹–æ‹½è¿›UITextFieldå¹¶åœ¨å…¶ä¸­æ˜¾ç¤ºHello Worldã€‚ ä¸‰ã€å…³äºUIDragInteractionç±»æ‰€æœ‰å¯ä»¥æ¥æ”¶æ‹–æ‹½è¡Œä¸ºçš„ç»„ä»¶éƒ½å¿…é¡»é€šè¿‡è¿™ä¸ªç±»å®ç°ï¼Œè¿™ä¸ªç±»ä¸­å±æ€§æ„ä¹‰åˆ—ä¸¾å¦‚ä¸‹ï¼š 12345678910//åˆå§‹åŒ–æ–¹æ³•- (instancetype)initWithDelegate:(id&lt;UIDragInteractionDelegate&gt;)delegate;//ä»£ç†@property (nonatomic, nullable, readonly, weak) id&lt;UIDragInteractionDelegate&gt; delegate;//æ˜¯å¦æ”¯æŒå¤šç§æ‰‹åŠ¿éƒ½æ¥æ”¶å“åº”@property (nonatomic) BOOL allowsSimultaneousRecognitionDuringLift;//è®¾ç½®æ˜¯å¦æœ‰æ•ˆ@property (nonatomic, getter=isEnabled) BOOL enabled;//è·å–é»˜è®¤æ˜¯å¦æœ‰æ•ˆ ä¸åŒçš„è®¾å¤‡è¿™ä¸ªå€¼å°†æœ‰æ‰€åŒºåˆ«@property (class, nonatomic, readonly, getter=isEnabledByDefault) BOOL enabledByDefault; å››ã€UIDragInteractionDelegateåè®®UIDragInteractionDelegateç”¨æ¥å¤„ç†æ‹–æ‹½æºçš„è¡Œä¸ºä¸æ•°æ®ã€‚å…¶ä¸­å®šä¹‰äº†ä¸€ä¸ªå¿…é¡»å®ç°çš„æ–¹æ³•å’Œè®¸å¤šå¯é€‰å®ç°çš„æ–¹æ³•ã€‚è§£æå¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748/*è¿™ä¸ªæ–¹æ³•æ˜¯å¿…é¡»å®ç°çš„ç”¨æ¥è¿”å›æ‹–æ‹½æºæä¾›çš„æ•°æ®éœ€è¦æ³¨æ„ï¼Œè¿™ä¸ªå‡½æ•°éœ€è¦è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­å¯ä»¥æœ‰å¤šä¸ªæ•°æ®æºå¦‚æœè¿”å›ç©ºæ•°ç»„ï¼Œåˆ™æ‹–æ‹½è¡Œä¸ºä¸ä¼šå¼€å§‹*/- (NSArray&lt;UIDragItem *&gt; *)dragInteraction:(UIDragInteraction *)interaction itemsForBeginningSession:(id&lt;UIDragSession&gt;)session;/*è¿™ä¸ªæ–¹æ³•ç”¨æ¥è‡ªå®šä¹‰æ‹–æ‹½æ•ˆæœçš„é¢„è§ˆè§†å›¾ å…³äºé¢„è§ˆè§†å›¾ï¼Œåé¢ä¼šä»‹ç»éœ€è¦æ³¨æ„ï¼Œç³»ç»Ÿé»˜è®¤ä¼šæä¾›ä¸€ä¸ªé¢„è§ˆè§†å›¾ï¼Œä¸å®ç°è¿™ä¸ªæ–¹æ³•å³æ˜¯ä½¿ç”¨ç³»ç»Ÿé»˜è®¤çš„å¦‚æœè¿”å›nilï¼Œåˆ™ä¼šå»é™¤é¢„è§ˆåŠ¨ç”»*/- (nullable UITargetedDragPreview *)dragInteraction:(UIDragInteraction *)interaction previewForLiftingItem:(UIDragItem *)item session:(id&lt;UIDragSession&gt;)session;/*æ‹–æ‹½åŠ¨ç”»å³å°†å¼€å§‹æ—¶ä¼šè°ƒç”¨æ­¤å‡½æ•°*/- (void)dragInteraction:(UIDragInteraction *)interaction willAnimateLiftWithAnimator:(id&lt;UIDragAnimating&gt;)animator session:(id&lt;UIDragSession&gt;)session;//æ‹–æ‹½è¡Œä¸ºä¼šè¯å³å°†å¼€å§‹æ—¶è°ƒç”¨çš„æ–¹æ³•- (void)dragInteraction:(UIDragInteraction *)interaction sessionWillBegin:(id&lt;UIDragSession&gt;)session;//è¿™ä¸ªæ–¹æ³•è®¾ç½®æ•°æ®çš„é˜²æ­¢æ˜¯å¦å…è®¸æ•°æ®çš„ ç§»åŠ¨æ“ä½œï¼Œéœ€è¦æ³¨æ„ï¼Œè¿™ä¸ªåªæœ‰åœ¨appå†…æœ‰æ•ˆï¼Œè·¨appçš„æ“ä½œä¼šæ€»æ˜¯å¤åˆ¶æ•°æ®- (BOOL)dragInteraction:(UIDragInteraction *)interaction sessionAllowsMoveOperation:(id&lt;UIDragSession&gt;)session;//è®¾ç½®æ˜¯å¦å…è®¸è·¨åº”ç”¨ç¨‹åºè¿›è¡Œæ‹–æ‹½ ipad- (BOOL)dragInteraction:(UIDragInteraction *)interaction sessionIsRestrictedToDraggingApplication:(id&lt;UIDragSession&gt;)session;//è®¾ç½®é¢„è§ˆè§†å›¾æ˜¯å¦æ˜¾ç¤ºåŸå§‹å¤§å°- (BOOL)dragInteraction:(UIDragInteraction *)interaction prefersFullSizePreviewsForSession:(id&lt;UIDragSession&gt;)session;/*å½“æ‹–æ‹½æºè¢«ç§»åŠ¨æ—¶è°ƒç”¨ï¼Œå¯ä»¥ç”¨å¦‚ä¸‹æ–¹æ³•è·å–å…¶åæ ‡NSLog(@\"%f,%f\",[session locationInView:self.view].x,[session locationInView:self.view].y);*/- (void)dragInteraction:(UIDragInteraction *)interaction sessionDidMove:(id&lt;UIDragSession&gt;)session;//æ‹–æ‹½è¡Œä¸ºå°†è¦ç»“æŸæ—¶è°ƒç”¨- (void)dragInteraction:(UIDragInteraction *)interaction session:(id&lt;UIDragSession&gt;)session willEndWithOperation:(UIDropOperation)operation;//æ‹–æ‹½è¡Œä¸ºå·²ç»ç»“æŸæ—¶è°ƒç”¨- (void)dragInteraction:(UIDragInteraction *)interaction session:(id&lt;UIDragSession&gt;)session didEndWithOperation:(UIDropOperation)operation;//æ‹–æ‹½æºè¿›è¡Œäº†æ”¾ç½®æ“ä½œåè°ƒç”¨- (void)dragInteraction:(UIDragInteraction *)interaction sessionDidTransferItems:(id&lt;UIDragSession&gt;)session;//è®¾ç½®æ‹–æ‹½åŠ¨ä½œå–æ¶ˆçš„è§†å›¾åŠ¨ç”» è¿”å›nilåˆ™æ¶ˆé™¤åŠ¨ç”»-(nullable UITargetedDragPreview *)dragInteraction:(UIDragInteraction *)interaction previewForCancellingItem:(UIDragItem *)item withDefault:(UITargetedDragPreview *)defaultPreview;//æ‹–æ‹½åŠ¨ä½œå³å°†å–æ¶ˆæ—¶è°ƒç”¨çš„æ–¹æ³•- (void)dragInteraction:(UIDragInteraction *)interaction item:(UIDragItem *)item willAnimateCancelWithAnimator:(id&lt;UIDragAnimating&gt;)animator;//è®¾ç½®æ˜¯å¦å…è®¸å‘æ‹–æ‹½ä¸­çš„é¡¹ç›®æ·»åŠ æ•°æ®/*å¯ä»¥è¿”å›æ•°æ®è½½ä½“æ•°ç»„ å½“æ‹–æ‹½è¿‡ç¨‹ä¸­ ç‚¹å‡»å¯æ‹–æ‹½çš„ç»„ä»¶æ—¶ä¼šè§¦å‘*/- (NSArray&lt;UIDragItem *&gt; *)dragInteraction:(UIDragInteraction *)interaction itemsForAddingToSession:(id&lt;UIDragSession&gt;)session withTouchAtPoint:(CGPoint)point;//è®¾ç½®å…è®¸è¿›è¡Œæ‹–æ‹½ä¸­è¿½åŠ æ•°æ®çš„æ‹–æ‹½è¡Œä¸ºä¼šè¯- (nullable id&lt;UIDragSession&gt;)dragInteraction:(UIDragInteraction *)interaction sessionForAddingItems:(NSArray&lt;id&lt;UIDragSession&gt;&gt; *)sessions withTouchAtPoint:(CGPoint)point;//å°†è¦å‘æ‹–æ‹½ç»„ä»¶ä¸­è¿½åŠ æ•°æ®æ—¶è°ƒç”¨- (void)dragInteraction:(UIDragInteraction *)interaction session:(id&lt;UIDragSession&gt;)session willAddItems:(NSArray&lt;UIDragItem *&gt; *)items forInteraction:(UIDragInteraction *)addingInteraction; ä¸Šé¢åˆ—ä¸¾çš„åè®®æ–¹æ³•ä¸­æœ‰å…³è”åˆ°å…¶ä»–è®¸å¤šiOS11ä¸­æ–°å¢çš„ç±»ï¼Œåé¢ä¼šä¸€ä¸€ä»‹ç»ã€‚å…¶å®ï¼Œå®Œæˆäº†ä»¥ä¸Šå†…å®¹çš„äº†è§£ï¼Œä½ å°±å·²ç»å¯ä»¥å®Œå…¨éšå¿ƒæ‰€æ¬²çš„å®šåˆ¶æ‹–æ‹½æºç»„ä»¶äº†ã€‚ äº”ã€æ”¾ç½®ç›®çš„åœ°æ‹–æ‹½æºæ˜¯æ•°æ®çš„æä¾›è€…ï¼Œæ”¾ç½®ç›®çš„åœ°å°±æ˜¯æ•°æ®çš„æ¥æ”¶è€…ã€‚å‰é¢æˆ‘ä»¬ä¹Ÿå®éªŒè¿‡ï¼Œå°†è‡ªå®šä¹‰çš„æ‹–æ‹½æºæ‹–æ‹½è¿›UITextFieldåï¼Œæ–‡æœ¬æ¡†ä¸­ä¼šè‡ªåŠ¨å¡«å……æˆ‘ä»¬æä¾›çš„æ–‡æœ¬æ•°æ®ã€‚åŒæ ·ï¼Œå¯¹äºä»»ä½•è‡ªå®šä¹‰çš„UIViewè§†å›¾ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è®©å…¶æˆä¸ºæ”¾ç½®ç›®çš„åœ°ï¼Œéœ€è¦å®Œæˆå¦‚ä¸‹3æ­¥ï¼š 1.åˆ›å»ºä¸€ä¸ªUIDropInteractionè¡Œä¸ºå¯¹è±¡ã€‚ 2.è®¾ç½®UIDropInteractionå¯¹è±¡çš„ä»£ç†å¹¶å®ç°åè®®æ–¹æ³•ã€‚ 3.å°†å…¶æ·»åŠ åˆ°è‡ªå®šä¹‰çš„è§†å›¾ä¸­ã€‚ ä¾‹å¦‚ï¼Œæˆ‘ä»¬å°†è‡ªå®šä¹‰çš„UILabelç»„ä»¶ç”¨æ¥æ˜¾ç¤ºæ‹–æ‹½çš„æ–‡æ¡ˆï¼š 12345678910111213141516171819202122232425262728293031323334353637383940//æ·»åŠ è§†å›¾- (void)viewDidLoad &#123; [super viewDidLoad]; //æœ‰å…³æ‹–æ‹½æºçš„ä»£ç  å‰é¢å·²ç»åˆ—ä¸¾è¿‡ è¿™é‡Œä¸å†é‡å¤ [self.view addSubview:self.dragView]; [self.view addSubview:self.dropLabel];&#125;-(UILabel *)dropLabel&#123; if (!_dropLabel) &#123; _dropLabel = [[UILabel alloc]initWithFrame:CGRectMake(10, 300, 300, 30)]; _dropLabel.backgroundColor = [UIColor greenColor]; _dropLabel.userInteractionEnabled = YES; [_dropLabel addInteraction:self.dropInteraction]; &#125; return _dropLabel;&#125;//æ”¾ç½®ç›®çš„åœ°è¡Œä¸ºå¯¹è±¡-(UIDropInteraction*)dropInteraction&#123; if (!_dropInteraction) &#123; _dropInteraction = [[UIDropInteraction alloc]initWithDelegate:self]; &#125; return _dropInteraction;&#125;//è¿™ä¸ªæ–¹æ³•è¿”å›æ˜¯å¦å“åº”æ­¤æ”¾ç½®ç›®çš„åœ°çš„æ”¾ç½®è¯·æ±‚-(BOOL)dropInteraction:(UIDropInteraction *)interaction canHandleSession:(id&lt;UIDropSession&gt;)session&#123; return YES;&#125;//è®¾ç½®ä»¥ä½•ç§æ–¹å¼å“åº”æ‹–æ”¾ä¼šè¯è¡Œä¸º-(UIDropProposal *)dropInteraction:(UIDropInteraction *)interaction sessionDidUpdate:(id&lt;UIDropSession&gt;)session&#123; return [[UIDropProposal alloc]initWithDropOperation:UIDropOperationCopy];&#125;//å·²ç»åº”ç”¨æ‹–æ”¾è¡Œä¸ºåæ‰§è¡Œçš„æ“ä½œ-(void)dropInteraction:(UIDropInteraction *)interaction performDrop:(id&lt;UIDropSession&gt;)session&#123; [session loadObjectsOfClass:[NSString class] completion:^(NSArray&lt;__kindof id&lt;NSItemProviderReading&gt;&gt; * _Nonnull objects) &#123; self.dropLabel.text = objects.firstObject; &#125;];&#125; ä¸Šé¢çš„ä»£ç å°†æˆ‘ä»¬è‡ªå®šä¹‰çš„æ‹–æ‹½æºæä¾›çš„Hello Worldæ‹–æ”¾è¿›äº†UILabelç»„ä»¶ä¸­ã€‚ å…­ã€å…³äºUIDropInteractionç±»ä¸UIDragInteractionç±»ç±»ä¼¼ï¼Œè¿™ä¸ªç±»çš„ä½œç”¨æ˜¯è®©ç»„ä»¶æœ‰ç›¸åº”æ”¾ç½®æ“ä½œçš„èƒ½åŠ›ã€‚å…¶ä¸­å±æ€§å¦‚ä¸‹ï¼š 123456//åˆå§‹åŒ–æ–¹æ³•- (instancetype)initWithDelegate:(id&lt;UIDropInteractionDelegate&gt;)delegate;//ä»£ç†å¯¹è±¡@property (nonatomic, nullable, readonly, weak) id&lt;UIDropInteractionDelegate&gt; delegate;//æ˜¯å¦å…è®¸å¤šä¸ªäº¤äº’è¡Œä¸º@property (nonatomic, assign) BOOL allowsSimultaneousDropSessions; ä¸ƒã€UIDropInteractionDelegateåè®®UIDropInteractionDelegateåè®®ä¸­æ‰€å®šä¹‰çš„æ–¹æ³•å…¨éƒ¨æ˜¯å¯é€‰å®ç°çš„ï¼Œå…¶ç”¨æ¥å¤„ç†ç”¨æˆ·æ”¾ç½®äº¤äº’è¡Œä¸ºã€‚ 123456789101112131415161718192021222324//æ”¾ç½®è¡Œä¸ºå³å°†å“åº”æ—¶è§¦å‘çš„æ–¹æ³• è¿”å›å€¼ç¡®å®šæ˜¯å¦å“åº”æ­¤æ¬¡è¡Œä¸º- (BOOL)dropInteraction:(UIDropInteraction *)interaction canHandleSession:(id&lt;UIDropSession&gt;)session;//å½“ä¸Šé¢çš„åè®®æ–¹æ³•è¿”å›YESæ—¶ä¼šæ¥ç€è°ƒç”¨è¿™ä¸ªå‡½æ•°- (void)dropInteraction:(UIDropInteraction *)interaction sessionDidEnter:(id&lt;UIDropSession&gt;)session;//å°†è¦å¤„ç†æ•°æ®æ—¶å›è°ƒçš„æ–¹æ³•/*å½“æ•°æ®æºæ•°æ®æ·»åŠ æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•ä¹Ÿä¼šè¢«é‡æ–°è°ƒç”¨ è¿™ä¸ªå‡½æ•°éœ€è¦è¿”å›ä¸€ä¸ªå¤„ç†è¡Œä¸ºæ–¹å¼UIDropProposalå¯¹è±¡ï¼Œè¿™ä¸ªæˆ‘ä»¬åé¢å†è¯´*/- (UIDropProposal *)dropInteraction:(UIDropInteraction *)interaction sessionDidUpdate:(id&lt;UIDropSession&gt;)session;//æ”¾ç½®è¡Œä¸ºç›¸åº”ç»“æŸçš„æ—¶å€™ä¼šè°ƒç”¨æ­¤æ–¹æ³•- (void)dropInteraction:(UIDropInteraction *)interaction sessionDidExit:(id&lt;UIDropSession&gt;)session;//è¿™ä¸ªæ–¹æ³•å½“ç”¨æˆ·è¿›è¡Œæ”¾ç½®æ—¶ä¼šè°ƒç”¨ï¼Œå¯ä»¥ä»sessionä¸­è·å–è¢«ä¼ é€’çš„æ•°æ®- (void)dropInteraction:(UIDropInteraction *)interaction performDrop:(id&lt;UIDropSession&gt;)session;//æ”¾ç½®åŠ¨ç”»å®Œæˆåä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•- (void)dropInteraction:(UIDropInteraction *)interaction concludeDrop:(id&lt;UIDropSession&gt;)session;//æ•´ä¸ªæ‹–æ”¾è¡Œä¸ºç»“æŸåä¼šè°ƒç”¨- (void)dropInteraction:(UIDropInteraction *)interaction sessionDidEnd:(id&lt;UIDropSession&gt;)session;//ä¸‹é¢è¿™äº›æ–¹æ³•ç”¨æ¥è‡ªå®šä¹‰æ”¾ç½®åŠ¨ç”»//è®¾ç½®æ”¾ç½®é¢„è§ˆåŠ¨ç”»- (nullable UITargetedDragPreview *)dropInteraction:(UIDropInteraction *)interaction previewForDroppingItem:(UIDragItem *)item withDefault:(UITargetedDragPreview *)defaultPreview;//è¿™ä¸ªå‡½æ•°æ¯å½“æœ‰ä¸€ä¸ªæ‹–æ‹½æ•°æ®é¡¹æ”¾å…¥æ—¶éƒ½ä¼šè°ƒç”¨ä¸€æ¬¡ å¯ä»¥è¿›è¡ŒåŠ¨ç”»- (void)dropInteraction:(UIDropInteraction *)interaction item:(UIDragItem *)item willAnimateDropWithAnimator:(id&lt;UIDragAnimating&gt;)animator; éœ€è¦æ³¨æ„ï¼ŒUIDropProposalç±»ç”¨æ¥è¿›è¡Œå¤„ç†å›æ‰§ï¼Œå±æ€§æ–¹æ³•è§£æå¦‚ä¸‹ï¼š 1234567891011121314151617181920//åˆå§‹åŒ–æ–¹æ³•/*typedef NS_ENUM(NSUInteger, UIDropOperation) &#123; //å–æ¶ˆè¿™æ¬¡è¡Œä¸º UIDropOperationCancel = 0, //æ‹’ç»è¡Œä¸º UIDropOperationForbidden = 1, //æ¥æ”¶æ‹·è´æ•°æ® UIDropOperationCopy = 2, //æ¥æ”¶ç§»åŠ¨æ•°æ® UIDropOperationMove = 3,&#125;*/- (instancetype)initWithDropOperation:(UIDropOperation)operation;//å¤„ç†æ–¹å¼@property (nonatomic, readonly) UIDropOperation operation;//ç²¾å‡†å®šä½@property (nonatomic, getter=isPrecise) BOOL precise;//è®¾ç½®æ˜¯å¦å±•ç¤ºå®Œæ•´çš„é¢„è§ˆå°ºå¯¸@property (nonatomic) BOOL prefersFullSizePreview; å…«ã€æ‹–æ‹½æ•°æ®è½½ä½“UIDragItemç±»UIDragItemç±»ç”¨æ¥æ‰¿è½½è¦ä¼ é€’çš„æ•°æ®ã€‚å…¶é€šè¿‡NSItemProviderç±»æ¥è¿›è¡Œæ„å»ºï¼Œä¼ é€’çš„æ•°æ®ç±»å‹æ˜¯æœ‰ä¸¥æ ¼è§„å®šçš„ï¼Œå¿…é¡»éµå®ˆä¸€å®šçš„åè®®ï¼Œç³»ç»Ÿçš„NSStringï¼ŒNSAttributeStringï¼ŒNSURLï¼ŒUIColorå’ŒUIImageæ˜¯é»˜è®¤æ”¯æŒçš„ï¼Œä½ å¯ä»¥ç›´æ¥ä¼ é€’è¿™äº›æ•°æ®ã€‚ UIDragItemä¸­æä¾›çš„å±æ€§æ–¹æ³•ï¼š 12345678//åˆå§‹åŒ–æ–¹æ³•- (instancetype)initWithItemProvider:(NSItemProvider *)itemProvider;//æ•°æ®æä¾›è€…å®ä¾‹@property (nonatomic, readonly) __kindof NSItemProvider *itemProvider;//ç”¨æ¥ä¼ é€’ä¸€äº›é¢å¤–çš„å…³è”ä¿¡æ¯@property (nonatomic, strong, nullable) id localObject;//ç”¨æ¥è‡ªå®šä¹‰æ¯ä¸ªitemæ·»åŠ æ—¶çš„é¢„è§ˆåŠ¨ç”»@property (nonatomic, copy, nullable) UIDragPreview * _Nullable (^previewProvider)(void); ä¹ã€UIDropSessionä¸UIDragSessionåœ¨ä¸æ‹–æ‹½äº¤äº’ç›¸å…³çš„æ¥å£ä¸­ï¼Œè¿™ä¸¤ä¸ªæ˜¯é¢å‘åè®®ç¼–ç¨‹çš„ç»ä½³èŒƒä¾‹ï¼Œé¦–å…ˆåœ¨UIKitæ¡†æ¶ä¸­åªå®šä¹‰äº†è¿™ä¸¤ä¸ªåè®®ï¼Œè€Œå¹¶æ²¡æœ‰ç›¸å…³çš„å®ç°ç±»ï¼Œåœ¨æ‹–æ‹½è¡Œä¸ºçš„ç›¸å…³å›è°ƒæ¥å£ä¸­ï¼Œå¾ˆå¤šidç±»å‹çš„å‚æ•°éƒ½éµå®ˆäº†è¿™ä¸ªåè®®ï¼Œæˆ‘ä»¬æ— éœ€çŸ¥é“æ˜¯å“ªä¸ªç±»å®ç°çš„ï¼Œç›´æ¥è¿›è¡Œä½¿ç”¨å³å¯ï¼š UIDropSessionï¼š 1234567891011121314151617//ç»§æ‰¿äºUIDragDropSession(æä¾›åŸºç¡€æ•°æ®), NSProgressReporting(æä¾›æ•°æ®è¯»å–è¿›åº¦)@protocol UIDropSession &lt;UIDragDropSession, NSProgressReporting&gt;//åŸå§‹çš„dragSesstionä¼šè¯ å¦‚æœæ˜¯è·¨åº”ç”¨çš„ åˆ™ä¸ºnil@property (nonatomic, readonly, nullable) id&lt;UIDragSession&gt; localDragSession;//è®¾ç½®è¿›åº¦é£æ ¼/*typedef NS_ENUM(NSUInteger, UIDropSessionProgressIndicatorStyle) &#123; UIDropSessionProgressIndicatorStyleNone, // æ—  UIDropSessionProgressIndicatorStyleDefault, // é»˜è®¤çš„&#125; API_AVAILABLE(ios(11.0)) API_UNAVAILABLE(watchos, tvos);*/@property (nonatomic) UIDropSessionProgressIndicatorStyle progressIndicatorStyle;//è¿›è¡Œæ•°æ®çš„åŠ è½½- (NSProgress *)loadObjectsOfClass:(Class&lt;NSItemProviderReading&gt;)aClass completion:(void(^)(NSArray&lt;__kindof id&lt;NSItemProviderReading&gt;&gt; *objects))completion;@end UIDragSessionï¼š 12345API_AVAILABLE(ios(11.0)) API_UNAVAILABLE(watchos, tvos) @protocol UIDragSession &lt;UIDragDropSession&gt;//è®¾ç½®è¦ä¼ é€’çš„é¢å¤–ä¿¡æ¯ åªæœ‰åœ¨åŒä¸ªAPPå†…å¯è§@property (nonatomic, strong, nullable) id localContext;@end UIDragDropSessionï¼š 123456789101112//ä¼ é€’çš„æ•°æ®æ•°ç»„@property (nonatomic, readonly) NSArray&lt;UIDragItem *&gt; *items;//å½“å‰æ“ä½œè¡Œä¸ºçš„åæ ‡- (CGPoint)locationInView:(UIView *)view;//æ­¤æ¬¡è¡Œä¸ºæ˜¯å¦å…è®¸ç§»åŠ¨æ“ä½œ@property (nonatomic, readonly) BOOL allowsMoveOperation;//æ˜¯å¦æ”¯æŒåº”ç”¨ç¨‹åºå±‚é¢çš„æ‹–æ‹½@property (nonatomic, readonly, getter=isRestrictedToDraggingApplication) BOOL restrictedToDraggingApplication;//éªŒè¯ä¼ é€’çš„æ•°æ®æ˜¯å¦æ”¯æŒæŸä¸ªæ•°æ®ç±»å‹åè®®- (BOOL)hasItemsConformingToTypeIdentifiers:(NSArray&lt;NSString *&gt; *)typeIdentifiers;//éªŒè¯ä¼ é€’çš„æ•°æ®æ˜¯å¦å¯ä»¥åŠ è½½æŸä¸ªç±»- (BOOL)canLoadObjectsOfClass:(Class&lt;NSItemProviderReading&gt;)aClass; åã€äº¤äº’é¢„è§ˆç±»UITargetedDragPreviewUITargetedDragPreviewä¸“é—¨ç”¨æ¥å¤„ç†æ‹–æ”¾äº¤äº’è¿‡ç¨‹ä¸­çš„åŠ¨ç”»ä¸é¢„è§ˆè§†å›¾ã€‚æ–¹æ³•è§£æå¦‚ä¸‹ï¼š 123456789101112131415161718192021//åˆ›å»ºä¸€ä¸ªé¢„è§ˆå¯¹è±¡ /*viewï¼šè¦åˆ›å»ºçš„é¢„è§ˆè§†å›¾ éœ€è¦æ³¨æ„ï¼Œè¿™ä¸ªè§†å›¾å¿…é¡»åœ¨windowä¸Šparamï¼šé…ç½®å‚æ•°targetï¼šå®¹å™¨è§†å›¾ï¼Œç”¨æ¥å±•ç¤ºé¢„è§ˆï¼Œä¸€èˆ¬è®¾ç½®ä¸ºviewçš„çˆ¶è§†å›¾*/- (instancetype)initWithView:(UIView *)view parameters:(UIDragPreviewParameters *)parameters target:(UIDragPreviewTarget *)target;//åŒä¸Š-(instancetype)initWithView:(UIView *)view parameters:(UIDragPreviewParameters *)parameters;//åŒä¸Š- (instancetype)initWithView:(UIView *)view;//åŠ¨ç”»æ‰¿è½½è€…@property (nonatomic, readonly) UIDragPreviewTarget* target;//åŠ¨ç”»è§†å›¾@property (nonatomic, readonly) UIView *view;//é…ç½®å‚æ•°@property (nonatomic, readonly, copy) UIDragPreviewParameters *parameters;//å°ºå¯¸@property (nonatomic, readonly) CGSize size;//è¿”å›æ–°çš„å¯¹è±¡- (UITargetedDragPreview *)retargetedPreviewWithTarget:(UIDragPreviewTarget *)newTarget; UIDragPreviewTargetä¸»è¦ç”¨æ¥è®¾ç½®åŠ¨ç”»çš„èµ·å§‹è§†å›¾ä¸ç»“æŸæ—¶å›å½’çš„è§†å›¾ï¼Œå…¶ä¸­å±æ€§æ–¹æ³•å¦‚ä¸‹ï¼š 12345678910111213/*åˆå§‹åŒ–æ–¹æ³•containerï¼šå¿…é¡»æ˜¯åœ¨windowä¸Šçš„viewcenterï¼šåŠ¨ç”»èµ·ç‚¹ä¸ç»ˆç‚¹transform:è¿›è¡Œå˜æ¢*/- (instancetype)initWithContainer:(UIView *)container center:(CGPoint)center transform:(CGAffineTransform)transform;//åŒä¸Š- (instancetype)initWithContainer:(UIView *)container center:(CGPoint)center;//å¯¹åº”å±æ€§@property (nonatomic, readonly) UIView *container;@property (nonatomic, readonly) CGPoint center;@property (nonatomic, readonly) CGAffineTransform transform; UIDragPreviewParametersç”¨æ¥è¿›è¡Œæ‹–æ‹½åŠ¨ç”»çš„é…ç½®ï¼Œè§£æå¦‚ä¸‹ï¼š 123456//æ„é€ æ–¹æ³•å¹¶è®¾ç½®è·¯å¾„çŸ©å½¢- (instancetype)initWithTextLineRects:(NSArray&lt;NSValue /* CGRect */ *&gt; *)textLineRects;//æ˜¾ç¤ºçš„è·¯å¾„@property (nonatomic, copy, nullable) UIBezierPath *visiblePath;//èƒŒæ™¯è‰²@property (nonatomic, copy, null_resettable) UIColor *backgroundColor; æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»»æ„è‡ªå®šä¹‰çš„è§†å›¾æ¥å±•ç°è¿™ä¸ªé¢„è§ˆåŠ¨ç”»ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š åä¸€ã€ä½¿ç”¨æ‹–æ‹½æ“ä½œè¿›è¡Œè‡ªå®šä¹‰æ•°æ®çš„ä¼ é€’æœ¬ç¯‡æ–‡ç« åˆ°è¿™é‡Œï¼Œå…¶å®åŸºæœ¬çš„å†…å®¹éƒ½å·²ç»è¯´å®Œäº†ï¼Œè™½ç„¶æ¯”è¾ƒè¯¦ç»†ï¼Œä¹Ÿå¯èƒ½éš¾å…å†—ä½™ï¼Œå¦‚æœä½ è€ç€æ€§å­çœ‹åˆ°äº†è¿™é‡Œï¼Œé‚£ä¹ˆæˆ‘é¦–å…ˆé’¦ä½©ä½ çš„æ¯…åŠ›å¹¶ä¸”æ„Ÿè°¢ä½ çš„è€å¿ƒã€‚å…¶å®ï¼Œæ‹–æ‹½äº¤äº’å¦‚æœè¿›è¡Œåªèƒ½å¯¹ç³»ç»Ÿçš„æä¾›çš„æ•°æ®ç±»å‹è¿›è¡Œæ“ä½œåˆ™åº”ç”¨å°±å±€é™å¤ªå¤šã€‚è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœæˆ‘ä»¬å¯ä»¥é€šè¿‡æ‹–æ‹½å•†å“æ¥è¿›è¡Œè´­ä¹°ï¼Œæ‹–æ‹½è”ç³»äººæ¥è¿›è¡Œå‘é€ï¼Œæˆ–è€…åœ¨æ¸¸æˆä¸­ï¼Œæ‹–æ‹½è¿›è¡Œå¡ç‰‡çš„èåˆï¼Œè£…å¤‡çš„æç‚¼ç­‰ç­‰è¿™ç§äº¤äº’æ“ä½œæ˜¯ä¸æ˜¯ä¼šå¾ˆç•…å¿«ã€‚æœ€åï¼Œæˆ‘ä»¬å°±æ¥çœ‹çœ‹å¦‚ä½•è®©è‡ªå®šä¹‰çš„æ•°æ®ç±»å‹æ”¯æŒæ‹–æ‹½æ“ä½œã€‚ é¦–å…ˆä½ éœ€è¦å…³æ³¨ä¸¤ä¸ªåè®®ï¼ŒNSItemProviderWritingä¸NSItemProviderReadingã€‚Writingåè®®ç”¨æ¥è®©æ•°æ®æ”¯æŒæä¾›ç»™æ•°æ®æºï¼ŒReadingåè®®è®©æ•°æ®æ”¯æŒä»æ•°æ®æºè¯»å‡ºï¼Œç”¨è‡ªå®šä¹‰çš„Personç±»ä¸ºä¾‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364#import &lt;Foundation/Foundation.h&gt;//éµå®ˆåè®®@interface Person : NSObject&lt;NSItemProviderWriting,NSItemProviderReading&gt;//è‡ªå®šä¹‰å†…å®¹@property(nonatomic,strong)NSString * name;@property(nonatomic,assign)NSUInteger age;@end//.mæ–‡ä»¶@implementation Person//æ•°æ®å½’æ¡£- (nullable NSProgress *)loadDataWithTypeIdentifier:(NSString *)typeIdentifier forItemProviderCompletionHandler:(void (^)(NSData * _Nullable data, NSError * _Nullable error))completionHandler&#123; NSProgress * pro = [NSProgress new]; NSData * data = [NSKeyedArchiver archivedDataWithRootObject:self]; completionHandler(data,nil); return pro;&#125;+(NSItemProviderRepresentationVisibility)itemProviderVisibilityForRepresentationWithTypeIdentifier:(NSString *)typeIdentifier&#123; return NSItemProviderRepresentationVisibilityAll;&#125;- (NSItemProviderRepresentationVisibility)itemProviderVisibilityForRepresentationWithTypeIdentifier:(NSString *)typeIdentifier&#123; return NSItemProviderRepresentationVisibilityAll;&#125;//æä¾›ä¸€ä¸ªæ ‡è¯†ç¬¦+(NSArray&lt;NSString *&gt; *)writableTypeIdentifiersForItemProvider&#123; return @[@\"object\"];&#125;-(NSArray&lt;NSString *&gt; *)writableTypeIdentifiersForItemProvider&#123; return @[@\"object\"];&#125;- (instancetype)initWithCoder:(NSCoder *)coder&#123; self = [super init]; if (self) &#123; self.name = [coder decodeObjectForKey:@\"name\"]; self.age = [coder decodeIntegerForKey:@\"age\"]; &#125; return self;&#125;- (void)encodeWithCoder:(NSCoder *)aCoder&#123; [aCoder encodeObject:self.name forKey:@\"name\"]; [aCoder encodeInteger:self.age forKey:@\"age\"];&#125;//è¿™ä¸¤ä¸ªæ˜¯è¯»åè®®+(NSArray&lt;NSString *&gt; *)readableTypeIdentifiersForItemProvider&#123; return @[@\"object\"];&#125;//è§£å½’æ¡£è¿”å›+ (nullable instancetype)objectWithItemProviderData:(NSData *)data typeIdentifier:(NSString *)typeIdentifier error:(NSError **)outError&#123; Person * p = [NSKeyedUnarchiver unarchiveObjectWithData:data]; return p;&#125;@end éœ€è¦æ³¨æ„ï¼Œåœ¨æ‹–æ”¾è¡Œä¸ºè¯»å–æ•°æ®æ—¶çš„ç±»å‹è¦å¯¹åº”ï¼Œå¦‚ä¸‹ï¼š 123456-(void)dropInteraction:(UIDropInteraction *)interaction performDrop:(id&lt;UIDropSession&gt;)session&#123; NSLog(@\"%@\",session.items.lastObject.localObject); [session loadObjectsOfClass:[Person class] completion:^(NSArray&lt;__kindof id&lt;NSItemProviderReading&gt;&gt; * _Nonnull objects) &#123; self.dropLabel.text = ((Person*)objects.firstObject).name; &#125;];&#125; å†™äº†è¿™ä¹ˆå¤šï¼Œéš¾å…æœ‰ç–æ¼ä¸é”™è¯¯ï¼Œæ¬¢è¿æŒ‡å¯¼äº¤æµ","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"Objective-Cå…³äºidå¼•å‘çš„ä¸€äº›æ€è€ƒ","slug":"359Objective-Cå…³äºidå¼•å‘çš„ä¸€äº›æ€è€ƒ","date":"2017-10-13T16:00:00.000Z","updated":"2021-07-15T07:22:22.532Z","comments":true,"path":"2017/10/14/359Objective-Cå…³äºidå¼•å‘çš„ä¸€äº›æ€è€ƒ/","link":"","permalink":"http://huishao.cc/2017/10/14/359Objective-Cå…³äºidå¼•å‘çš„ä¸€äº›æ€è€ƒ/","excerpt":"","text":"Objective-Cå…³äºidå¼•å‘çš„ä¸€äº›æ€è€ƒObjective-Cæ˜¯é¢å‘å¯¹è±¡è¯­è¨€ï¼Œä½†å…¶ä¸­åˆå¹¶éå…¨éƒ¨æ˜¯å¯¹è±¡ã€‚åœ¨åˆå­¦è¿™é—¨è¯­è¨€æ—¶ï¼Œæˆ‘å¸¸å¸¸ä»æ„è¯†ä¸Šå°†NSå¼€å¤´çš„ç±»å‹ä¸Cè¯­è¨€åŸæœ¬çš„é‚£äº›ç±»å‹åˆ†å‰²å¼€æ¥ï¼Œå‡è£…ä»–ä»¬ä¹‹é—´æ²¡æœ‰è”ç³»ï¼Œåªå…³æ³¨â€œç±»â€çš„ä¸–ç•Œã€‚ç„¶è€Œç±»ç»ˆç©¶åªæ˜¯ä¸€ç§åº”ç”¨ä¸Šçš„æŠ½è±¡ï¼Œå°±åƒâ€œè¯­æ³•ç³–â€ä¸€æ ·ï¼ŒæŠ›å¼€åä¸½çš„å¤–è¡¨ï¼Œå†…éƒ¨ä¾ç„¶æ˜¯æœ€æœ´ç´ çš„ç»“æ„ä½“å’ŒæŒ‡é’ˆã€‚æœ¬ç¯‡åšå®¢çš„æ¥ç”±æºè‡ªæœ‹å‹çš„ä¸€ä¸ªé—®é¢˜ï¼šåœ¨ARCç¯å¢ƒï¼ŒperformSelector:withObject:æ–¹æ³•å¦‚ä½•ä¼ é€’éå¯¹è±¡ç±»å‹çš„æ•°æ®å‘¢ï¼Ÿè¿™ä¸ªé—®é¢˜ä¹çœ‹èµ·æ¥ç®€å•ï¼Œä½†è¦è¾ƒè¾ƒçœŸï¼Œå´ä¹Ÿå¹¶éé‚£ä¹ˆç®€å•ã€‚ä¸‹é¢çš„å†…å®¹éƒ½æ˜¯æœ‰è¿™ä¸ªç®€å•çš„é—®é¢˜å¼•å‡ºçš„ï¼Œå¦‚æœä½ æ„Ÿå…´è¶£ï¼Œåœ¨è¯»ä¹‹å‰å¯ä»¥å…ˆè¯•ç€è§£å†³ä¸‹ä¸Šé¢çš„ç–‘é—®ã€‚ ä¸€ã€è¿˜è¦å…ˆè¯´ididæ˜¯Objective-Cä¸­å®šä¹‰çš„ä¸€ç§æ³›å‹å®ç°ï¼Œå®ƒå¯ä»¥è¡¨ç¤ºä»»ä½•å¯¹è±¡ç±»å‹ã€‚å°½ç®¡idçœ‹èµ·æ¥æ˜¯å¦‚æ­¤ç®€å•ï¼Œä½†ç»†ç»†ç¢ç£¨ï¼Œå…¶å´åŒ…å«äº†3å±‚æ„ä¹‰ï¼š 1.ä½œä¸ºå‚æ•°æˆ–è¿”å›å€¼ å°†idç±»å‹ä½œä¸ºå‡½æ•°çš„å‚æ•°æˆ–è¿”å›å€¼æ˜¯æœ€æµ…çš„ä¸€å±‚æ„ä¹‰ï¼Œå…¶å¢åŠ äº†å‡½æ•°çš„çµæ´»æ€§ï¼ŒFoundationæ¡†æ¶ä¸­ä¹Ÿæœ‰å…¶å¤§é‡çš„åº”ç”¨ï¼Œä¾‹å¦‚å¯å˜æ•°ç»„è¿½åŠ å…ƒç´ ã€‚ 2.idç±»å‹çš„å‚æ•°ä¸ä¼šè¿›è¡Œç±»å‹æ£€æŸ¥ è¿™æ˜¯idç±»å‹ååˆ†é‡è¦çš„ä¸€ä¸ªç‰¹ç‚¹ï¼Œå£°æ˜ä¸ºidç±»å‹çš„å¯¹è±¡å°±ç›¸å½“äºå‘Šè¯‰äº†ç¼–è¯‘å™¨ä¸è¿›è¡Œç±»å‹æ£€æŸ¥(è¿™ä¹Ÿæ˜¯å’ŒNSObjectç±»å‹æœ€å¤§åŒºåˆ«)ã€‚å› æ­¤ï¼Œä½ å¯ä»¥å°†idç±»å‹çš„å˜é‡èµ‹å€¼ç»™ä»»ä½•å¯¹è±¡ç±»å‹ï¼Œä¹Ÿå¯ä»¥å°†ä»»ä½•å¯¹è±¡ç±»å‹çš„å˜é‡èµ‹å€¼ç»™idç±»å‹ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œä½¿ç”¨idç±»å‹çš„å¯¹è±¡å¯ä»¥è°ƒç”¨ä»»æ„æ–¹æ³•ï¼Œéƒ½ä¸ä¼šè¿›è¡Œç±»å‹æ£€æŸ¥ã€‚ 3.idæ˜¯ä¸€ç§ä¼˜é›…çš„ç¼–ç¨‹æ–¹å¼ ç”±äºidç±»å‹ä¸ä¼šè¿›è¡Œç¼–è¯‘æ£€æŸ¥ï¼Œè¦çº¦æŸç±»å‹æ–¹æ³•å®ç°æœ€å¥½çš„æ–¹å¼å°±æ˜¯é€šè¿‡åè®®ï¼Œid&lt;protocol&gt;æ˜¯ä¸€ç§ååˆ†ä¼˜é›…çš„ç¼–ç¨‹æ–¹å¼ï¼Œå…¶ä¸å†å…³å¿ƒç±»å‹ï¼Œåªæ³¨é‡çº¦å®šçš„å®ç°ï¼ŒFoundationæ¡†æ¶ä¸­çš„ä»£ç†å¤šé‡‡ç”¨è¿™ç§æ–¹å¼è®¾è®¡ã€‚ å¦å¤–ï¼Œåœ¨objc.hæ–‡ä»¶ä¸­ï¼Œidè¢«å®šä½ä¸ºå¦‚ä¸‹ï¼š 12345struct objc_object &#123; Class _Nonnull isa OBJC_ISA_AVAILABILITY;&#125;;//ç»“æ„ä½“æŒ‡é’ˆtypedef struct objc_object *id; äºŒã€å…³äºvoidä¸void*åœ¨å¼€å‘ä¸­ï¼Œvoidç”¨çš„æœ€å¤šçš„åœ°æ–¹è¦æ•°æ ‡è®°Objective-Cæ— è¿”å›å€¼çš„å‡½æ•°ï¼ŒObjective-Cå‡½æ•°å’ŒCå‡½æ•°ä¸åŒï¼Œå…¶å¿…é¡»æœ‰ä¸€ä¸ªç¡®å®šçš„è¿”å›å€¼ç±»å‹ï¼Œå¦‚æœæ²¡æœ‰è¿”å›å€¼ï¼Œåˆ™éœ€è¦ä½¿ç”¨voidæ¥æ ‡è®°è¿”å›å€¼ç±»å‹ï¼Œè€ŒCå‡½æ•°æ˜¯å¯ä»¥ä¸æŒ‡å®šè¿”å›å€¼ç±»å‹çš„ï¼Œé»˜è®¤çš„Cå‡½æ•°åˆ™æ˜¯è¿”å›intç±»å‹çš„å€¼ï¼Œä¾‹å¦‚ä¸‹é¢çš„ä¸¤ä¸ªå‡½æ•°å®é™…ä¸Šæ˜¯å®Œå…¨ä¸€æ ·çš„ï¼š 123456789print()&#123; printf(\"cccccc\"); return 0;&#125;int print()&#123; printf(\"cccccc\"); return 0;&#125; voidåœ¨Cè¯­è¨€ä¸­è¿˜æœ‰ä¸€å¤§ç”¨é€”åœ¨äºçº¦æŸæ— å‚å‡½æ•°ï¼Œä¾‹å¦‚ä¸Šé¢ç¤ºä¾‹çš„å‡½æ•°è™½ç„¶æ²¡æœ‰å‚æ•°ï¼Œä½†æ˜¯å¦‚æœä½ åœ¨è°ƒç”¨çš„æ—¶å€™å¼ºåˆ¶ä¼ å…¥å‚æ•°ç¼–è¯‘å™¨ä¹Ÿä¸å‡ºè¿›è¡Œé”™è¯¯æé†’ï¼Œå¦‚æœå°†å‡½æ•°ä¿®æ”¹å¦‚ä¸‹ï¼Œåˆ™æ­¤å‡½æ•°å°±å®Œå…¨ä¸èƒ½ä¼ å…¥å‚æ•°äº†ï¼š 1234int print(void)&#123; printf(\"cccccc\"); return 0;&#125; å½’æ ¹ç»“åº•ï¼Œvoidå¤§å¤šæ—¶å€™ç”¨æ¥è¡¨ç¤ºâ€œç©ºâ€ï¼Œè€Œvoid * åˆ™å®Œå…¨ä¸åŒï¼Œå®ƒæ‰€æè¿°çš„å®é™…ä¸Šæ˜¯ä»»æ„ç±»å‹çš„æŒ‡é’ˆã€‚è¿™é‡Œå’Œidå¾ˆåƒå¯¹ä¸å¯¹ï¼Œè™½ç„¶idæè¿°çš„æ˜¯Objective-Cå¯¹è±¡ä½†æ˜¯æœ¬è´¨ä¹Ÿæ˜¯æŒ‡é’ˆï¼Œé‚£ä¹ˆæ ¹æ®æˆ‘ä»¬çš„æ¨æµ‹ï¼Œidç±»å‹çš„æ•°æ®å’Œvoid*ç±»å‹çš„æ•°æ®æ˜¯å¯ä»¥è¿›è¡Œç±»å‹è½¬æ¢çš„ã€‚äº‹å®ä¸Šï¼Œåœ¨MRCç¯å¢ƒä¸‹ç¡®å®å¦‚æ­¤ï¼ŒARCç¯å¢ƒä¸‹åˆ™è¦æ›´å¤æ‚ä¸€äº›ï¼Œç”±äºARCæœºåˆ¶è¦å¯¹Objective-Cå¯¹è±¡è¿›è¡Œå¼•ç”¨è®¡æ•°ç®¡ç†ï¼Œå¯¹CæŒ‡é’ˆå¹¶ä¸ä¼šï¼Œå› æ­¤åœ¨ARCç¯å¢ƒä¸‹ç¼–è¯‘å™¨æ˜¯ä¸å…è®¸æˆ‘ä»¬ç›´æ¥å°†idäºvoid*è¿›è¡Œè¿›è¡Œè½¬æ¢çš„ï¼Œä¾‹å¦‚ä¸‹é¢çš„æŠ¥é”™ï¼š ä¸‰ã€ARCä¸­ç”¨__bridgeçš„åº”ç”¨å‰é¢è¯´è¿‡ï¼Œç”±äºARCçš„åŸå› ï¼Œå¯¼è‡´æ— æ³•åœ¨Objective-Cå¯¹è±¡ä¸CæŒ‡é’ˆç±»å‹ä¹‹é—´è¿›è¡Œç›´æ¥è½¬æ¢ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡\\_\\_bridgeæ¥è½¬æ¢ï¼Œä»å­—é¢ç†è§£ï¼Œ\\_\\_bridgeçš„ä½œç”¨å°±æ˜¯ç”¨æ¥æ¡¥æ¥ã€‚åœ¨åšObjective-Cç›¸å…³å¼€å‘æ—¶ï¼Œä½ ä¸€å®šé‡åˆ°è¿‡CoreFoundationæ¡†æ¶ä¸Foundationæ¡†æ¶æ··ç”¨çš„æƒ…å†µï¼ŒCFæ¡†æ¶ä¸­çš„ç±»éƒ½æ˜¯ç”±Cè¯­è¨€ç›´æ¥å®ç°çš„ï¼Œä¾‹å¦‚CFStringï¼ŒCFURLç­‰ï¼Œå…¶è™½ç„¶å¯ä»¥å’ŒNSStringï¼ŒNSURLäº’ç”¨ï¼Œä½†åœ¨ARCç¯å¢ƒåœ¨ï¼Œå´å¿…é¡»è¿›è¡Œæ¡¥æ¥è½¬æ¢ï¼Œå³ä½¿ç”¨__bridgeã€‚ä¸Šé¢çš„ä»£ç å¯ä»¥åšå¦‚ä¸‹ä¿®æ”¹ï¼š 123int a = 10;void * ap = &amp;a;id c = (__bridge id)ap; åŒæ ·ï¼Œå°†idç±»å‹è½¬æ¢ä¸ºvoid *å¦‚ä¸‹ï¼š 12NSNumber * num = [[NSNumber alloc]initWithInt:1];void * cNumber = (__bridge void *)num; ä¸__bridgeç›¸å¯¹åº”çš„è¿˜æœ‰__bridge_transferä¸__bridge_retainedï¼Œä»–ä»¬çš„åŒºåˆ«æ˜¯__bridgeä¸ä¼šæ”¹å˜å¯¹è±¡çš„æ‰€æœ‰æƒï¼Œ__bridge_transferä¼šå°†å¯¹è±¡æ‰€æœ‰æƒè¿›è¡Œè½¬ç§»ï¼Œå³releaseæ‰è½¬æ¢å‰çš„Objective-Cå¯¹è±¡ï¼Œè€Œ__bridge_retainedåˆ™æ˜¯å°†æ‰€æœ‰æƒè¿›è¡Œretainå¼ºå¼•ç”¨ã€‚ å››ã€è§£å†³æœ€åˆçš„é—®é¢˜å†æ¥çœ‹æˆ‘ä»¬æœ€åˆçš„é—®é¢˜ï¼Œä¸‹é¢æ–¹æ³•çš„ä¸¤ä¸ªå‚æ•°éƒ½æ˜¯idç±»å‹çš„ï¼š 1- (id)performSelector:(SEL)aSelector withObject:(id)object1 withObject:(id)object2; è™½ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨å…¶ä»–æ–¹å¼æ¥è¾¾åˆ°ç›¸åŒçš„æ•ˆæœï¼Œæ¯”å¦‚ä¿®æ”¹åŸå‡½æ•°çš„å‚æ•°ç±»å‹ï¼Œæˆ–è€…ä½¿ç”¨NSInvocationæ¥å‘é€æ¶ˆæ¯ï¼Œä¸€ç§æ›´ç®€ä¾¿çš„æ–¹å¼å¦‚ä¸‹ï¼š 12345678910- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view, typically from a nib. int a = 10; [self performSelector:@selector(log:age:) withObject:@\"huishao\" withObject:(__bridge id)(void*)a];&#125;-(void)log:(NSString *)name age:(int)age&#123; NSLog(@\"%@,%d\",name,age);&#125; æœ€åï¼Œæ€»ç»“ä¸€ç‚¹ï¼Œå…¶å®ä¸è®ºä»»ä½•ç¼–ç¨‹è¯­è¨€ï¼Œç±»å‹æ£€æŸ¥éƒ½æ˜¯ç¼–è¯‘æ—¶çš„ç‰¹æ€§ï¼ŒçœŸæ­£ä¼ é€’çš„æ•°æ®ä¾ç„¶æ˜¯åœ¨è¿è¡Œæ—¶å†³å®šçš„ã€‚","categories":[{"name":"Objective-Cæµ…æ¢","slug":"Objective-Cæµ…æ¢","permalink":"http://huishao.cc/categories/Objective-Cæµ…æ¢/"}],"tags":[],"keywords":[{"name":"Objective-Cæµ…æ¢","slug":"Objective-Cæµ…æ¢","permalink":"http://huishao.cc/categories/Objective-Cæµ…æ¢/"}]},{"title":"Swift4è¯­æ³•æ–°ç‰¹æ€§","slug":"358Swift4è¯­æ³•æ–°ç‰¹æ€§","date":"2017-08-23T16:00:00.000Z","updated":"2021-07-15T07:20:51.447Z","comments":true,"path":"2017/08/24/358Swift4è¯­æ³•æ–°ç‰¹æ€§/","link":"","permalink":"http://huishao.cc/2017/08/24/358Swift4è¯­æ³•æ–°ç‰¹æ€§/","excerpt":"","text":"Swift4è¯­æ³•æ–°ç‰¹æ€§éšç€iPhone Xçš„æ¥åˆ°ï¼ŒiOS11çš„å‘å¸ƒï¼ŒSwiftè¯­è¨€ä¹Ÿæ›´æ–°åˆ°äº†ç¬¬4ä¸ªç‰ˆæœ¬ã€‚åœ¨Swift4ä¸­ï¼Œæ— è®ºæ˜¯ä»£ç é£æ ¼è¿˜æ˜¯ç¼–ç¨‹ç†å¿µéƒ½æ›´è¿›ä¸€æ­¥çš„èåˆäº†è®¸å¤šç°ä»£ç¼–ç¨‹çš„æ€æƒ³ã€‚å¯¹äºç†Ÿæ‚‰ä¼ ç»Ÿè¯­è¨€çš„å¼€å‘è€…æ¥è¯´(å°¤å…¶æ˜¯Objective-Cã€Javaå’ŒC++)ï¼Œå¯èƒ½ä¼šæ„Ÿè§‰è¿™äº›ç‰¹æ€§å¹¶æ²¡æœ‰å¤šå¤§çš„ä»·å€¼åè€Œéå¸¸ä¸ä¹ æƒ¯ï¼Œä½†æ˜¯æˆ‘ä»¬ä¾ç„¶å¯ä»¥èŒ¶ä½™é¥­å(æ²¡äº‹å¹²çš„æ—¶å€™)ï¼Œä¸€çª¥Swift4è¯­è¨€çš„ç©æ³•ï¼Œä½“éªŒä¸€ä¸‹Swiftè¯­è¨€çš„è®¾è®¡æ€æƒ³å’Œç¼–ç é£æ ¼ã€‚ ä¸€ã€ç‹¬å å†…å­˜è®¿é—®æƒé™ç‹¬å è®¿é—®æƒé™æ˜¯Swift4ä¸­å¼•å…¥çš„ä¸€å¤§æ–°ç‰¹æ€§ã€‚ç„¶è€Œå¤§éƒ¨åˆ†äººéƒ½å°†è¿™ä¸€ç‰¹æ€§è¯¯è§£äº†ï¼Œå¦‚æœä½ åœ¨ç™¾åº¦ä¸Šæœç´¢ swift4 exclusive access to memoryç›¸å…³å…³é”®å­—ï¼Œå¤§éƒ¨åˆ†åšå®¢æˆ–æ€»ç»“éƒ½ä¼šè¯´è¿™æ˜¯ä¸€ç§ç¼–è¯‘å™¨çš„ç¼–è¯‘æ—¶ç‰¹æ€§ï¼Œå¯ä»¥åœ¨ä¾‹å¦‚æ•°ç»„è¶Šç•Œæ—¶ã€å¯¹éå†ä¸­çš„æ•°ç»„è¿›è¡Œåˆ æ·»å…ƒç´ æ—¶äº§ç”Ÿç¼–è¯‘å¼‚å¸¸ã€‚å…¶å®å¹¶éå¦‚æ­¤ï¼Œç‹¬å å†…å­˜è®¿é—®æƒé™ç‰¹æ€§æ˜¯ä¸€ç§ç¼–è¯‘æ—¶å’Œè¿è¡Œæ—¶çš„å®‰å…¨ç‰¹æ€§ï¼Œå…¶å’Œæ•°ç»„ä¹Ÿæ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œå½“ä¸¤ä¸ªå˜é‡è®¿é—®åŒä¸€å—å†…å­˜æ—¶ï¼Œä¼šäº§ç”Ÿç‹¬å å†…å­˜è®¿é—®é™åˆ¶ã€‚ é¦–å…ˆï¼Œåœ¨Swiftä¸­å¯¹å†…å­˜çš„è®¿é—®æœ‰è¯»è®¿é—®ä¸å†™è®¿é—®ä¸¤ç§ï¼Œä¾‹å¦‚ï¼š 1234//è¯»è®¿é—®var name = \"jaki\"//å†™è®¿é—®print(name) åœ¨Swift4ä»¥å‰ï¼Œç¨‹åºå¯¹å†…å­˜çš„è¯»å†™è®¿é—®å¹¶æ²¡æœ‰ä¸¥æ ¼çš„æ§åˆ¶ï¼Œå¦‚æœä½ åœ¨è¯»å†…å­˜æ—¶æœ‰å†™å†…å­˜æ“ä½œï¼Œæˆ–è€…å†™å†…å­˜æ—¶æœ‰è¯»æ“ä½œå¹¶ä¸ä¼šäº§ç”Ÿä»€ä¹ˆå¼‚å¸¸(å½“ç„¶ï¼Œä½ è‡ªå·±è¦æ¸…æ¥šè¯»å†™åå˜é‡çš„å€¼ï¼Œä»¥å…äº§ç”Ÿé€»è¾‘æ­§ä¹‰)ã€‚Swift4ä¸­åˆ™å¼•å…¥äº†ç‹¬å å†…å­˜è®¿é—®æƒé™çš„ç‰¹æ€§ï¼Œå¦‚æœå¤åˆå¦‚ä¸‹3ä¸ªæ¡ä»¶ï¼Œåˆ™ç¨‹åºä¼šäº§ç”Ÿè¯»å†™æƒé™å†²çªï¼š 1.è‡³å°‘æœ‰ä¸€ä¸ªå˜é‡åœ¨ä½¿ç”¨å†™æƒé™ã€‚ 2.å˜é‡è®¿é—®çš„æ˜¯åŒä¸€ä¸ªå†…å­˜åœ°å€ã€‚ 3.æŒç»­æ—¶é—´æœ‰é‡å ã€‚ åœ¨å¼€å‘ä¸­ï¼Œå¯èƒ½ä¼šäº§ç”Ÿè¯»å†™æƒé™å†²çªçš„æƒ…å†µæœ‰3ç§ï¼š 1.inout å‚æ•°è¯»å†™æƒé™å†²çªä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå€¼ç±»å‹çš„ä¼ å‚æ€»ä¼šäº§ç”Ÿå¤åˆ¶æ“ä½œã€‚inoutå‚æ•°åˆ™ä½¿å¾—å‡½æ•°å†…å¯ä»¥ç›´æ¥ä¿®æ”¹å¤–éƒ¨å˜é‡çš„å€¼ã€‚inoutå‚æ•°æ˜¯æœ€å®¹æ˜“äº§ç”Ÿè¯»å†™å†²çªçš„åœºæ™¯ï¼Œä¾‹å¦‚ä¸‹é¢çš„ä»£ç ï¼š1234567var stepSize = 1func increment(_ number: inout Int) &#123; number += stepSize//crash&#125;increment(&amp;stepSize) ä¸Šé¢çš„ä»£ç åœ¨Swift3ä¸­æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œåœ¨Swift4ç¯å¢ƒä¸­è¿è¡Œåˆ™ä¼šç›´æ¥crashã€‚åœ¨å‡½æ•°ä¸­ï¼Œinoutå‚æ•°ä»å£°æ˜å¼€å§‹åˆ°å‡½æ•°çš„ç»“æŸï¼Œè¿™ä¸ªå˜é‡å§‹ç»ˆå¼€å¯ç€å†™æƒé™ï¼Œå¯¹åº”ä¸Šé¢ä»£ç ï¼Œnumberå‚æ•°å¼€å¯è¿™å†™æƒé™ï¼ŒstepSizeåˆ™è¿›è¡Œäº†è¯»è®¿é—®ï¼Œå¦‚æ­¤åˆ™æ»¡è¶³ä¸Šé¢çš„æƒé™å†²çªè§„åˆ™ï¼Œä¼šäº§ç”Ÿè¯»å†™å†²çªã€‚åŒæ ·ï¼Œå¦‚æœå¯¹ä¸¤ä¸ªinoutå‚æ•°è®¿é—®åŒä¸€ä¸ªå†…å­˜åœ°å€ï¼Œä¹Ÿä¼šäº§ç”Ÿè¯»å†™æƒé™å†²çªï¼Œä¾‹å¦‚ï¼š 1234567var stepSize = 1func increment(_ number: inout Int,_ number2: inout Int) &#123; var a = number+number2&#125;increment(&amp;stepSize,&amp;stepSize) 2.ç»“æ„ä½“ä¸­è‡ªä¿®æ”¹å‡½æ•°çš„è¯»å†™å†²çªSwiftè¯­è¨€ä¸­çš„ç»“æ„ä½“ä¹Ÿæ˜¯ä¸€ç§å€¼ç±»å‹ï¼Œå› æ­¤å…¶ä¹Ÿå­˜åœ¨è¯»å†™å†²çªçš„åœºæ™¯ï¼Œä¾‹å¦‚å¦‚ä¸‹ä»£ç ï¼š 123456789101112struct Player &#123; var name: String var health: Int var energy: Int let maxHealth = 10 mutating func shareHealth(_ player:inout Player) &#123; health = player.health &#125;&#125;var play = Player(name: \"jaki\", health: 10, energy: 10)play.shareHealth(&amp;play)//äº§ç”Ÿé”™è¯¯ ä¸Šé¢shareHealthå‡½æ•°ä¸­ä½¿ç”¨åˆ°çš„healthæ˜¯å¯¹selfè‡ªèº«çš„è¯»è®¿é—®ï¼Œè€Œinoutå‚æ•°æ˜¯å†™è®¿é—®ï¼Œä¼šäº§ç”Ÿè¯»å†™æƒé™å†²çªã€‚ 3.å€¼ç±»å‹ä¸­å±æ€§çš„è¯»å†™è®¿é—®æƒé™å†²çªåœ¨Siwftè¯­è¨€ä¸­ï¼Œåƒç»“æ„ä½“ï¼Œæšä¸¾å’Œå…ƒç»„ä¸­éƒ½æœ‰å±æ€§çš„æ¦‚å¿µã€‚ç”±äºå…¶éƒ½æ˜¯å€¼ç±»å‹ï¼Œåœ¨å¯¹ä¸åŒçš„å±æ€§è¿›è¡Œè®¿é—®æ—¶ä¹Ÿä¼šäº§ç”Ÿå†²çªï¼Œä¾‹å¦‚ï¼š 1234567891011class Demo &#123; var playerInformation = (health: 10, energy: 20) func balance(_ p1 :inout Int,_ p2 :inout Int) &#123; &#125; func test() &#123; self.balance(&amp;playerInformation.health, &amp;playerInformation.energy)//crash &#125;&#125;let demo = Demo()demo.test() çœ‹åˆ°è¿™é‡Œä½ ä¸€å®šè§‰å¾—è¿™å¤ªä¸¥æ ¼äº†ï¼Œå¯¹ä¸åŒå±æ€§çš„è®¿é—®ä¹Ÿä¼šäº§ç”Ÿè¯»å†™å†²çªã€‚å®é™…ä¸Šï¼Œåœ¨å¼€å‘ä¸­å¤§éƒ¨åˆ†çš„è¿™ç§è®¿é—®éƒ½ä¼šè¢«è®¤ä¸ºæ˜¯å®‰å…¨çš„ï¼Œä½ éœ€è¦æ»¡è¶³ä¸‹é¢3ä¸ªæ¡ä»¶ï¼š 1.ä½ è®¿é—®çš„æ˜¯å­˜å‚¨å±æ€§è€Œä¸æ˜¯è®¡ç®—å±æ€§ã€‚ 2.ä½ è®¿é—®çš„æ˜¯ç»“æ„ä½“å±€éƒ¨å˜é‡(å‡½æ•°ä¸­çš„å˜é‡)è€Œä¸æ˜¯å…¨å±€å˜é‡ã€‚ 3.ä½ çš„ç»“æ„ä½“ä¸è¢«é—­åŒ…æ•è·ï¼Œæˆ–è€…åªæ˜¯è¢«éé€ƒé€¸çš„é—­åŒ…æ•è·ã€‚ å°†ä¸Šé¢çš„playerInformationå˜é‡ä¿®æ”¹æˆå±€éƒ¨çš„ï¼Œç¨‹åºå°±å¯ä»¥æ­£å¸¸è¿è¡Œäº†ï¼š 123456789101112class Demo &#123; func balance(_ p1 :inout Int,_ p2 :inout Int) &#123; &#125; func test() &#123; var playerInformation = (health: 10, energy: 20) self.balance(&amp;playerInformation.health, &amp;playerInformation.energy) &#125;&#125;let demo = Demo()demo.test() å…¶å®ï¼ŒSwfit4ä¸­çš„ç‹¬å å†…å­˜è®¿é—®æƒé™ç‰¹æ€§ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬éƒ½ä¸ä¼šä½¿ç”¨åˆ°ï¼Œä½†æ˜¯äº†è§£ä¸€ä¸‹è¿˜æ˜¯å¾ˆæœ‰å¿…è¦ï¼ŒSwiftæ˜¯ä¸€ç§å®‰å…¨æ€§æé«˜çš„è¯­è¨€ï¼Œä¹Ÿæ˜¯å…¶è®¾è®¡çš„æ ¸å¿ƒæ€æƒ³ä¸æ–¹å‘ï¼Œä¾‹å¦‚ç±»æ„é€ æ–¹æ³•çš„å®‰å…¨æ€§æ£€æŸ¥ç‰¹æ€§ï¼Œå˜é‡ç±»å‹çš„å®‰å…¨é™åˆ¶ç‰¹æ€§ç­‰ç­‰éƒ½æ˜¯å°†å¼€å‘è€…ç¼–å†™ä»£ç çš„å®‰å…¨äº¤ç»™è¯­è¨€ç‰¹æ€§æ¥è´Ÿè´£ï¼Œè€Œä¸æ˜¯å¼€å‘è€…çš„ç»éªŒã€‚è¿™è®©åˆå­¦è€…å¯ä»¥æ›´å°‘çš„å‡ºé”™ï¼Œè¯­è¨€è¿è¡Œæ—¶çš„ä¸å¯æ§å› ç´ æ›´å°‘ã€‚ äºŒã€å…³è”ç±»å‹å¯ä»¥æ·»åŠ whereçº¦æŸå­å¥associatedtypeæ˜¯Swiftåè®®ä¸­ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„å…³é”®å­—ï¼Œå…¶ä¹Ÿæ˜¯Swiftæ³›å‹ç¼–ç¨‹æ€æƒ³çš„ä¸€ç§å®ç°ã€‚åœ¨Swift3ä¸­ï¼Œassociatedtypeä»è¯­æ³•ä¸Šæ˜¯ä¸èƒ½è¿½åŠ whereå­å¥çš„ï¼ŒSwift4å¢å¼ºäº†associatedtypeçš„åŠŸèƒ½ï¼Œå…¶å¯ä»¥ä½¿ç”¨whereå­å¥è¿›è¡Œæ›´åŠ ç²¾å‡†çš„çº¦æŸï¼Œçœ‹ä¸‹é¢çš„ä»£ç ï¼š 1234567891011121314151617181920212223242526272829//å®¹å™¨åè®®protocol Container &#123; //çº¦æŸitem æ³›å‹ä¸º Intç±»å‹ associatedtype Item where Item == Int func append(_ item: Item) var count: Int &#123; get &#125; subscript(i: Int) -&gt; Item &#123; get &#125;&#125;class MyIntArray: Container &#123; //è¿™ä¸ªåœ°æ–¹å¿…é¡»æŒ‡å®šä¸ºIntå¦åˆ™ä¼šæŠ¥é”™ typealias Item = Int func append(_ item: Int) &#123; self.innerArray.append(item) &#125; var count: Int&#123; get&#123; return self.innerArray.count &#125; &#125; subscript(i: Int) -&gt; Int &#123; return self.innerArray[i] &#125; var innerArray = [Int]() &#125; ä¸‰ã€å¯ä»¥åˆ›å»ºå¤šè¡Œå­—ç¬¦ä¸²åœ¨Swift4ä»¥å‰ï¼Œå­—ç¬¦ä¸²åªèƒ½åˆ›å»ºå•è¡Œçš„ï¼ŒSwift4ä¸­å¼•å…¥äº†å­—é¢é‡åˆ›å»ºå¤šè¡Œæ–‡æœ¬çš„è¯­æ³•ï¼Œä¾‹å¦‚ï¼š 123456var multiLineString = \"\"\"abcdjaki24\"\"\"print(multiLineString) è¿™ç§æ–¹å¼å¯ä»¥å¤§å¤§å‡å°‘åœ¨åˆ›å»ºå­—ç¬¦ä¸²æ—¶äººä¸ºæ·»åŠ æ¢è¡Œç¬¦ã€‚ å…³äºStringæ“ä½œçš„ç›¸å…³APIï¼Œåœ¨Swift4ä¸­ä¹Ÿæœ‰è®¸å¤šä¼˜åŒ–ï¼Œä¾‹å¦‚å­—ç¬¦ä¸²çš„ä¸‹æ ‡æ“ä½œä¸å­—ç¬¦æ“ä½œä¸€ç›´æ˜¯Swiftè¯­è¨€çš„ç¡¬ä¼¤ï¼Œä½¿ç”¨èµ·æ¥ååˆ†éº»çƒ¦ï¼Œåœ¨Swift4ä¸­éƒ½è¿›è¡Œäº†ä¼˜åŒ–ã€‚å–å­—ç¬¦ä¸²çš„å­ä¸²çš„æ–¹å¼ä¹Ÿæ›´åŠ è§„èŒƒã€‚ å››ã€å¢å¼ºåŒºé—´è¿ç®—ç¬¦Swiftè¯­è¨€ä¸­çš„åŒºé—´è¿ç®—ç¬¦ä½¿ç”¨èµ·æ¥ååˆ†æ–¹ä¾¿ï¼Œä¾‹å¦‚åœ¨Swift3ä¸­ï¼Œæˆ‘ä»¬è‹¥è¦éå†æ•°ç»„çš„èŒƒå›´ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„ä»£ç ï¼š 12345//Swift3ä»£ç let array = [\"1\",\"2\",\"3\"]for item in array[0..&lt;array.count]&#123; print(item)&#125; Swift3ä¸­çš„â€¦è¿ç®—ç¬¦åªæ˜¯ä½œä¸ºé—­åŒºé—´è¿ç®—ç¬¦ä½¿ç”¨ï¼Œåœ¨Swift4ä¸­ï¼Œå¯ä»¥ç”¨å®ƒæ¥å–é›†åˆç±»å‹çš„è¾¹ç•Œï¼Œå¦‚å­—ç¬¦ä¸²ï¼Œæ•°ç»„ç­‰ï¼Œçœ‹å¦‚ä¸‹ä»£ç ï¼š 1234let array = [\"1\",\"2\",\"3\"]for item in array[0...]&#123; print(item)&#125; äº”ã€ä¸‹æ ‡æ–¹æ³•æ”¯æŒæ³›å‹subscriptæ–¹æ³•å¯ä»¥ä¸ºSwiftä¸­çš„ç±»æ·»åŠ ä¸‹æ ‡è®¿é—®çš„æ”¯æŒï¼Œåœ¨Swift4ä¸­ï¼Œsubscriptæ–¹æ³•æ›´åŠ å¼ºå¤§ï¼Œå…¶ä¸åªå¯ä»¥æ”¯æŒæ³›å‹ï¼Œè€Œä¸”å¯ä»¥æ”¯æŒwhereå­å¥è¿›è¡Œåè®®ä¸­å…³è”ç±»å‹çš„çº¦æŸï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930//ä¸‹æ ‡åè®®protocol Sub &#123; associatedtype T func getIndex()-&gt;T&#125;//å®ç°ä¸‹æ ‡åè®®çš„ä¸€ç§ä¸‹æ ‡ç±»class Index:Sub &#123; init(_ index:Int) &#123; self.index = index &#125; var index:Int func getIndex() -&gt; Int &#123; return self.index &#125;&#125;class MyArray &#123; var array = Array&lt;Int&gt;() func push(item:Int) &#123; self.array.append(item) &#125; //æ³›å‹ å¹¶è¿›è¡Œçº¦æŸ subscript&lt;T:Sub&gt;(i:T)-&gt;Int where T.T == Int &#123; return self.array[i.getIndex()] &#125;&#125;var a = MyArray()a.push(item: 1)print(a[Index(0)]) å…­ã€åè®®æ”¯æŒæ··åˆSwiftåœ¨å¯¹å˜é‡ç±»å‹è¿›è¡Œç•Œå®šæ—¶ï¼Œæ˜¯æ”¯æŒä½¿ç”¨åè®®çš„ï¼Œä¾‹å¦‚ï¼Œåœ¨Swift3ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™å¦‚ä¸‹çš„ä»£ç ï¼š 123456789101112131415161718192021222324//swift3protocol People &#123; var name:String&#123;set get&#125; var age:Int&#123;set get&#125;&#125;protocol Teach &#123; func teachSwift()&#125;class Teacher: People,Teach &#123; var name: String = \"jaki\" var age: Int = 25 func teachSwift() &#123; print(\"teaching...\") &#125;&#125;func printTeacher(p:Teacher) &#123; print(p.name,p.age) p.teachSwift()&#125; ä¸Šé¢çš„ä»£ç ä¸­ï¼ŒprintTeacheræ–¹æ³•é‡Œä½¿ç”¨Teacherç±»å¯¹å‚æ•°è¿›è¡Œçš„ç•Œå®šï¼Œå®é™…ä¸Šè¿™ç§åšæ³•å¹¶ä¸å¥½ï¼ŒTeacherç±»çŸ¥è¯†Teachåè®®ä¸Peopleåè®®çš„ä¸€ç§æ··åˆå®ç°ï¼Œåœ¨å®šä¹‰æ–¹æ³•å‚æ•°æ—¶ï¼Œåº”è¯¥ä½¿ç”¨åè®®æ¥è¿›è¡Œå‚æ•°çš„ç•Œå®šï¼Œå¯æ˜¯Teacherç±»åŒæ—¶å®ç°äº†ä¸¤ä¸ªåè®®ï¼Œè¿™åœ¨Swift3ç‰ˆæœ¬ä¸­æ˜¯æ— æ³•è§£å†³çš„é—®é¢˜ï¼Œåœ¨Swift4ä¸­ä½ åˆ™å¯ä»¥è¿™æ ·å†™ï¼š 1234567891011121314151617181920212223protocol People &#123; var name:String&#123;set get&#125; var age:Int&#123;set get&#125;&#125;protocol Teach &#123; func teachSwift()&#125;class Teacher: People,Teach &#123; var name: String = \"jaki\" var age: Int = 25 func teachSwift() &#123; print(\"teaching...\") &#125;&#125;func printTeacher(p:Teach&amp;People) &#123; print(p.name,p.age) p.teachSwift()&#125; &amp;å¤åˆå¯ä»¥å¯¹åè®®è¿›è¡Œæ··åˆï¼Œæ›´åŠ è´´è¿‘é¢å‘åè®®çš„ç¼–ç¨‹æ–¹å¼ã€‚ ä¸ƒã€ä¸€ç‚¹æ€»ç»“ä»Swiftè¯­è¨€ç¬¬1ä¸ªç‰ˆæœ¬å‘å¸ƒåˆ°Swift3å’ŒSwift3.2è¿›è¡Œäº†è¯­è¨€å†…å®¹å’Œé£æ ¼çš„å¤§æ”¹ï¼ŒSwift4ä¸­è¿›è¡Œçš„æ”¹åŠ¨å®é™…å¹¶ä¸å¤§è€Œä¸”å¤§å¤šæ˜¯ä½ å¼€å‘ä¸­å¯èƒ½å¹¶ç”¨ä¸åˆ°çš„ç‰¹æ€§ã€‚éšç€Swiftè¯­è¨€çš„æˆé•¿ï¼Œè¿™ç§è¯­è¨€çš„è®¾è®¡é£æ ¼æ˜¯ä¸å…¶ä»–ä¼ ç»Ÿè¯­è¨€æœ‰ç€æœ¬è´¨çš„åŒºåˆ«ï¼Œæˆ‘ä¸ªäººæ„Ÿæ‚Ÿï¼ŒSwiftè¯­è¨€å¦‚ä¸‹çš„ç‰¹ç‚¹ç¡®å®å€¼å¾—æˆ‘ä»¬å­¦ä¹ ä¸æ€è€ƒï¼š 1.å®‰å…¨æ€§æé«˜æ‰€è°“å®‰å…¨æ€§ï¼Œå®é™…ä¸Šå°±æ˜¯è¯­è¨€æ˜¯å¦å®¹æ˜“å‡ºé”™ï¼Œå†é€šä¿—ä¸€äº›ï¼Œå³æ˜¯ä¸€ç§ç¼–ç¨‹è¯­è¨€æ˜¯ä¾èµ–å…¶è‡ªèº«ç‰¹æ€§é˜²æ­¢å…¶å‡ºé”™è¿˜æ˜¯ä¾èµ–å¼€å‘è€…ç»éªŒé˜²æ­¢å…¶å‡ºé”™ã€‚æˆ‘è®°å¾—åœ¨åˆå­¦JavaScriptæ—¶æ„Ÿè§‰ååˆ†è‹¦æ¼ï¼Œå› ä¸ºJavaScriptæ˜¯å˜é‡å¼±ç±»å‹çš„ï¼Œå¹¶ä¸”å…¶éšå¼è½¬æ¢ååˆ†å±é™©(è™½ç„¶ä»£ç ç¼–å†™èµ·æ¥ç•…å¿«æ— æ¯”)ã€‚åœ¨Swiftä¸­ï¼Œåˆ™åŸºæœ¬ä¸ä¼šå‡ºç°ç±»å‹ä¸åŒ¹é…ï¼Œç±»å‹è¢«éšå¼è½¬æ¢äº†ç­‰é—®é¢˜ã€‚å½“ç„¶ï¼Œæ¢å¥è¯è¯´ï¼Œè¿™ä¹Ÿä½¿å¾—ç¼–ç¨‹è€…å¿…é¡»éµå®ˆæ›´å¤šçš„è§„åˆ™(æˆ–è€…è¯´å†™æ›´å¤šçš„ä»£ç )ï¼Œè™½ç„¶å„æœ‰åˆ©å¼Šï¼Œä½†å¯¹åˆå­¦è€…æ¥è¯´ï¼ŒSwiftæ˜æ˜¾è¦å‹å¥½å¾ˆå¤šã€‚ Swiftè¯­è¨€å®‰å…¨æ€§æé«˜è¡¨ç°åœ¨å¦‚ä¸‹å‡ ç‚¹ï¼š 1.ç”¨letå’Œvaræ¥åˆ†åˆ«å£°æ˜å¸¸é‡å’Œå˜é‡ï¼Œletå£°æ˜çš„é‡å€¼ä¸å¯æ”¹ï¼Œä»é€»è¾‘ä¸Šä¿è¯å˜é‡å®‰å…¨ã€‚ 2.å˜é‡ç±»å‹å¿…é¡»æ˜ç¡®(å¾ˆå¤šæ—¶å€™ä½ æ²¡æŒ‡å®šæ˜¯å› ä¸ºç¼–è¯‘å™¨çš„æ¨æ–­åŠŸèƒ½)ï¼Œä»ç±»å‹ä¸Šä¿è¯å®‰å…¨ã€‚ 3.é—­åŒ…åˆ†ä¸ºé€ƒé€¸å’Œéé€ƒé€¸ï¼Œä»é€»è¾‘ä¸Šä¿è¯é—­åŒ…ä½¿ç”¨çš„å®‰å…¨ã€‚ 4.æº¢å‡ºè¿ç®—ç¬¦ä¸ç®—æœ¯è¿ç®—ç¬¦åˆ†å¼€ï¼Œä»ä»£ç ä¸Šä¿è¯å®‰å…¨ã€‚ 5.ç±»çš„åˆå§‹åŒ–æ£€æŸ¥ç­–ç•¥ï¼Œä»ç±»çš„å®šä¹‰ä¸Šä¿è¯å®‰å…¨ã€‚ 6.åˆ é™¤++ä¸â€“è¿ç®—ç¬¦ï¼Œåˆ é™¤å¸¸è§„forå¾ªç¯ï¼Œä»ä¹ æƒ¯ä¸Šä¿è¯å®‰å…¨ã€‚ 2.çµæ´»æ€§æé«˜Swiftè¯­è¨€çš„çµæ´»æ€§éå¸¸æœ‰ç°ä»£ç¼–ç¨‹è¯­è¨€çš„ç‰¹ç‚¹ï¼Œæœ‰å…¶æ˜¯å…¶å¯¹æ³›å‹çš„æ”¯æŒï¼Œæ˜¯çš„é¢å‘åè®®çš„ç¼–ç¨‹æ–¹å¼åœ¨Swiftè¯­è¨€ä¸Šå¯ä»¥ç•…è¡Œæ— é˜»ã€‚çµæ´»æ€§è¡¨ç°åœ¨å¦‚ä¸‹å‡ ç‚¹ï¼š 1.å¼ºå¤§çš„æ³›å‹ç¼–ç¨‹æ–¹å¼ï¼Œåè®®å…³è”ç±»å‹ç­‰ã€‚ 2.whereå­å¥å¯ä»¥ç²¾å‡†çš„è¿›è¡Œæ³›å‹çº¦æŸã€‚ 3.Optioalç±»å‹å’Œå¯å¤±è´¥æ„é€ æ–¹æ³•çš„æ”¯æŒã€‚ 4.Anyä¸AntObjectç±»å‹çš„æ”¯æŒã€‚ 5.å¼ºå¤§çš„æšä¸¾å’Œç»“æ„ä½“ã€‚ 6.é€’å½’æšä¸¾çš„æ”¯æŒã€‚ 7.æ”¯æŒé‡è½½ä¸è‡ªå®šä¹‰è¿ç®—ç¬¦ã€‚ 3.ç¼–ç ä½“éªŒæé«˜ç¼–ç ä½“éªŒè¿™ç‚¹å¹¶ä¸å®Œå…¨ä¾èµ–ä¸Swiftè¯­æ³•ï¼Œä¹Ÿå¤šæœ‰ç¼–è¯‘å™¨çš„åŠŸåŠ³ã€‚ 1.æ”¯æŒå­—ç¬¦ä¸²å†…åµŒå˜é‡æ¥æ„å»ºå­—ç¬¦ä¸²ã€‚ 2.æ”¯æŒåç½®é—­åŒ…çš„å†™æ³•ã€‚ 3.å…ƒç»„ç±»å‹çš„æ”¯æŒã€‚ 4.æ”¯æŒé»˜è®¤éšå¼æ‹†åŒ…ç±»å‹ã€‚ 5.æ”¯æŒåŒºé—´è¿ç®—ç¬¦ã€‚ 6.å‡½æ•°åˆ†å†…å¤–ä¸¤ç§å‚æ•°å(å¤–å‚æ•°åå¯ä»¥çœç•¥)ã€‚ 7.è¯­æ³•ä¸Šæ”¯æŒä¾¿åˆ©æ„é€ æ–¹æ³•ã€‚ 8.è¯­æ³•å±‚é¢æ”¯æŒçš„æ‡’åŠ è½½ã€‚ ä¸Šé¢åªæ˜¯åˆ—å‡ºäº†ä¸€äº›ç‰¹æ€§ï¼ŒSwiftè¯­è¨€ä¸­æœ‰æ„æ€çš„åœ°æ–¹å¤šçš„ä¸¾ä¸èƒœä¸¾ï¼Œå¦‚æœä½ æœ‰æ„æ›´æ·±å…¥çš„äº†è§£å®ƒï¼Œä½ å¯ä»¥æœç´¢æ¸…åå¤§å­¦å‡ºç‰ˆç¤¾çš„ã€ŠSwiftä»å…¥é—¨åˆ°ç²¾é€šã€‹ä¸€ä¹¦ï¼Œå…¶ä¸­æ˜¯æˆ‘å¯¹Swift3è¿›è¡Œçš„å…¨é¢è®²è§£ï¼Œä¹ŸåŒ…å«iOSå¼€å‘çš„éƒ¨åˆ†çŸ¥è¯†å’Œå®æˆ˜ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥é€šè¿‡QQ316045346è”ç³»æˆ‘æœ¬äººè¿›è¡Œäº¤æµä¸äº’ç›¸å­¦ä¹ ã€‚æœ€åï¼Œä¸€è¯­ä»¥æ€»ç»“Swiftè¯­è¨€ï¼šä¸€é—¨ååˆ†å¼ºå¤§å¹¶ä¸”ååˆ†æ˜“å…¥é—¨çš„ç°ä»£ç¼–ç¨‹è¯­è¨€ï¼Œåªè¦ä½ æŒæ¡äº†æ‰€æœ‰è¯­æ³•è§„åˆ™ï¼Œæƒ³å‡ºé”™å¾ˆéš¾ï¼","categories":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}],"tags":[],"keywords":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}]},{"title":"æŒ–ä¸€æŒ–è´å¡å°”æ›²çº¿é‚£äº›äº‹","slug":"357æŒ–ä¸€æŒ–è´å¡å°”æ›²çº¿é‚£äº›äº‹","date":"2017-08-22T16:00:00.000Z","updated":"2021-07-15T07:19:50.758Z","comments":true,"path":"2017/08/23/357æŒ–ä¸€æŒ–è´å¡å°”æ›²çº¿é‚£äº›äº‹/","link":"","permalink":"http://huishao.cc/2017/08/23/357æŒ–ä¸€æŒ–è´å¡å°”æ›²çº¿é‚£äº›äº‹/","excerpt":"","text":"æŒ–ä¸€æŒ–è´å¡å°”æ›²çº¿é‚£äº›äº‹ä¸€ã€å‰ä¸–ä»Šç”Ÿè´å¡å°”æ›²çº¿çš„æœ€åˆè®¾è®¡æ˜¯æœåŠ¡äºå·¥ä¸šè®¾è®¡ï¼Œå°¤å…¶åº”ç”¨ä¸æ±½è½¦æ›²çº¿è®¾è®¡ã€‚éšç€è®¡ç®—æœºç”»å›¾çš„åº”ç”¨å¹¿æ³›ï¼Œè‹¥æƒ³åœ¨è®¡ç®—æœºä¸Šç”»å‡ºå¹³æ»‘ç²¾å‡†çš„æ›²çº¿å¹¶ä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹ï¼Œè´å¡å°”æ›²çº¿è§£å†³äº†è¿™æ ·çš„é—®é¢˜ï¼Œè´å¡å°”è™šçº¿é€šè¿‡èµ·å§‹ç‚¹ä¸ç»“æŸç‚¹æ¥ç¡®å®šæ›²çº¿çš„é¦–å°¾ï¼Œé€šè¿‡è‹¥å¹²ä¸ªæ§åˆ¶ç‚¹æ¥ç¡®å®šæ›²çº¿çš„èµ°å‘ã€‚ç”±äºå…¶ç”±æ³•å›½å·¥ç¨‹å¸ˆçš®åŸƒå°”Â·è´å¡å°”å¹¿æ³›æ¨å¹¿ï¼Œå› æ­¤è¿™ç§æ›²çº¿è¢«å‘½åä¸ºè´å¡å°”æ›²çº¿ã€‚ äºŒã€æ•°å­¦åŸºç¡€å¹³é¢ä¸Šçš„ä»»æ„è¿ç»­æ›²çº¿å¯ä»¥é€šè¿‡ä¼¯æ©æ–¯å¦å¤šé¡¹å¼æ¥è¿›è¡Œé€¼è¿‘æ‹Ÿåˆï¼Œå› æ­¤ï¼Œå½“æˆ‘ä»¬æƒ³åœ¨å¹³é¢ä¸­ç”»ä¸€æ¡æ›²çº¿çš„æ—¶å€™ï¼Œå¦‚æœå¯ä»¥æ¨¡æ‹Ÿå‡ºæ­¤æ›²çº¿çš„å‡½æ•°ï¼Œåˆ™å¯ä»¥ååˆ†ç²¾å‡†çš„æ§åˆ¶è®¡ç®—æœºæ¥æç»˜ä¸€ç³»åˆ—æ›²çº¿ä¸Šçš„ç‚¹æ¥ç»˜åˆ¶æ›²çº¿ã€‚è´å¡å°”æ›²çº¿å°±æ˜¯åŸºäºè¿™æ ·çš„æ•°å­¦åŸºç¡€ã€‚ é¦–å…ˆï¼Œå¯¹äºä¸€æ¡è´å¡å°”æ›²çº¿ï¼Œå…¶3è¦ç´ åˆ†åˆ«æ˜¯ï¼šèµ·å§‹ç‚¹ï¼Œç»“æŸç‚¹å’Œæ§åˆ¶ç‚¹ã€‚å…¶ä¸­æ›²çº¿çš„èµ·ç‚¹åœ¨èµ·å§‹ç‚¹ï¼Œç»ˆç‚¹åœ¨ç»“æŸç‚¹ï¼Œæ›²çº¿å¹¶ä¸ç©¿è¿‡æ§åˆ¶ç‚¹ï¼Œæ§åˆ¶ç‚¹æ¥æŒæ¡æ›²çº¿çš„èµ°å‘ï¼Œæ§åˆ¶ç‚¹ä¸ªæ•°å¯ä»¥ä¸å®šã€‚ 1ã€ä¸€é˜¶è´å¡å°”æ›²çº¿ä¸€é˜¶è´å¡å°”æ›²çº¿æ§åˆ¶ç‚¹çš„ä¸ªæ•°ä¸º0ï¼Œåªæœ‰èµ·å§‹ç‚¹ä¸ç»“æŸç‚¹ã€‚å…¶å®ä¸€é˜¶è´å¡å°”æ›²çº¿å°±æ˜¯ä¸€æ¡ä»èµ·å§‹ç‚¹åˆ°ç»“æŸç‚¹çš„ç›´çº¿æ®µã€‚å…¶å…¬å¼å¦‚ä¸‹ï¼š ä¸Šé¢å…¬å¼ä¸­ï¼ŒPä¸ºæ›²çº¿ä¸Šçš„ç‚¹ï¼ŒP0ä¸ºèµ·å§‹ç‚¹ï¼ŒP1ä¸ºç»“æŸç‚¹ã€‚(å¯¹äºå¹³é¢ä¸Šçš„ç‚¹ï¼Œåˆ†åˆ«ç”¨ä¸Šé¢å…¬å¼è®¡ç®—xï¼Œyåæ ‡å³å¯)ã€‚ç”±äºå…¶å…¬å¼ä¸ºçº¿æ€§å…¬å¼ï¼Œæ‰€æœ‰è¿™ç§è´å¡å°”æ›²çº¿ä¹Ÿè¢«ç§°ä¸ºä¸€é˜¶è´å¡å°”æ›²çº¿ã€‚ä¸‹å›¾å¯ä»¥å¾ˆå¥½çš„æè¿°å½“tä»0åˆ°1å˜åŒ–æ—¶ï¼Œçº¿æ®µçš„ç»˜åˆ¶è¿‡ç¨‹ï¼š 2ã€äºŒé˜¶è´å¡å°”æ›²çº¿äºŒé˜¶è´å¡å°”æ›²çº¿æœ‰ä¸€ä¸ªæ§åˆ¶ç‚¹ï¼Œå‡è®¾èµ·å§‹ç‚¹ï¼Œæ§åˆ¶ç‚¹å’Œç»“æŸç‚¹åˆ†åˆ«ä¸ºP0ã€P1ã€P2ã€‚è¿æ¥P0P1ï¼ŒP1P2ï¼Œåœ¨åŒºé—´0-1ä¹‹é—´ï¼Œåœ¨P0P1çº¿æ®µä¸Šå–ç‚¹Mï¼Œåœ¨P1P2çº¿æ®µä¸Šå–ç‚¹Nï¼Œä½¿å¾—P0M/P0P1=P1N/P1P2ï¼Œæ‰¾åˆ°çº¿æ®µMNä¸Šä¸€ç‚¹Qï¼ŒåŒæ—¶ä½¿å¾—MQ/QN=P0M/P0P1=P1N/P1P2ï¼Œæ‰€æœ‰Qç‚¹çš„é›†åˆå³ä¸ºæ‰€æ±‚è´å¡å°”æ›²çº¿ã€‚ä¸Šé¢çš„æè¿°æœ‰äº›æŠ½è±¡ï¼Œä½¿ç”¨æ•°å­¦æ¨å¯¼å°±ä¹‰ä¸€ç›®äº†ç„¶äº†ï¼Œå…¬å¼æ¨å¯¼å¦‚ä¸‹ï¼š ç»˜å›¾è¿‡ç¨‹å¦‚ä¸‹ï¼š 3.é«˜é˜¶è´å¡å°”æ›²çº¿æœ‰äº†ä¸€é˜¶ä¸äºŒé˜¶çš„åŸºç¡€ï¼Œé«˜é˜¶è´å¡å°”æ›²çº¿ä¹Ÿæ˜¯é€šè¿‡ç›¸åŒçš„æ–¹å¼æ¥æ¨å¯¼ï¼Œä¸€ä¸ªé€šç”¨çš„é€’æ¨å…¬å¼å¦‚ä¸‹ï¼š ä¸‰é˜¶å’Œå››é˜¶çš„ç»˜åˆ¶è¿‡ç¨‹æ¼”ç¤ºå¦‚ä¸‹ï¼š ä¸‰ã€iOSä¸­çš„è´å¡å°”æ›²çº¿çš„åº”ç”¨è™½ç„¶è´å¡å°”æ›²çº¿åœ¨å¾ˆå¤šå¼€å‘é¢†åŸŸéƒ½ååˆ†å®¹æ˜“å®ç°ï¼Œç”±äºæˆ‘å¯¹iOSå¼€å‘æ¯”è¾ƒç†Ÿï¼Œå¹¶ä¸”ä¸Šé¢çš„æ›²çº¿ç»˜åˆ¶ç¤ºä¾‹ä¹Ÿæ˜¯æˆ‘é€šè¿‡iOSç¨‹åºå®ç°çš„ã€‚è¿™é‡Œå°±å¯¹åœ¨iOSä¸­åº”ç”¨è´å¡å°”æ›²çº¿è¿›è¡Œç®€å•çš„è®¨è®ºï¼Œé¦–å…ˆCoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¸­æä¾›äº†CGPathå¯ä»¥ç›´æ¥åˆ›å»ºè´å¡å°”æ›²çº¿ï¼Œç³»ç»Ÿæ”¯æŒçš„è´å¡å°”æ›²çº¿å‡½æ•°æœ‰äºŒé˜¶ä¸ä¸‰é˜¶ã€‚å‰é¢æœ‰åšå®¢ä¸“é—¨è®¨è®ºï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ï¼Œåœ°å€å¦‚ä¸‹ï¼š https://my.oschina.net/u/2340880/blog/757072ã€‚ è¿™é‡Œä¸»è¦åˆ—ä¸¾UIKitæ¡†æ¶ä¸­çš„UIBezierPathç±»ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263//æ„é€ æ–¹æ³•+ (instancetype)bezierPath;//ä½¿ç”¨çŸ©å½¢è¿›è¡Œæ„é€ + (instancetype)bezierPathWithRect:(CGRect)rect;//ä½¿ç”¨åœ†è§’çŸ©å½¢è¿›è¡Œæ„é€ + (instancetype)bezierPathWithOvalInRect:(CGRect)rect;//åˆ›å»ºåœ†è§’çŸ©å½¢è´å¡å°”è·¯å¾„ å¹¶è®¾ç½®åœ†è§’åŠå¾„+ (instancetype)bezierPathWithRoundedRect:(CGRect)rect cornerRadius:(CGFloat)cornerRadius; + (instancetype)bezierPathWithRoundedRect:(CGRect)rect byRoundingCorners:(UIRectCorner)corners cornerRadii:(CGSize)cornerRadii;//ä½¿ç”¨åœ†å¼§åˆ›å»º+ (instancetype)bezierPathWithArcCenter:(CGPoint)center radius:(CGFloat)radius startAngle:(CGFloat)startAngle endAngle:(CGFloat)endAngle clockwise:(BOOL)clockwise;//ä½¿ç”¨CGPathåˆ›å»º+ (instancetype)bezierPathWithCGPath:(CGPathRef)CGPath;//CGPathå¯¹è±¡@property(nonatomic) CGPathRef CGPath;//å°†è·¯å¾„ç§»åŠ¨åˆ°æŸä¸ªç‚¹- (void)moveToPoint:(CGPoint)point;//æ·»åŠ ä¸€å¤©çº¿- (void)addLineToPoint:(CGPoint)point;//æ·»åŠ ä¸€ä¸ªäºŒé˜¶è´å¡å°”æ›²çº¿æ®µ- (void)addCurveToPoint:(CGPoint)endPoint controlPoint1:(CGPoint)controlPoint1 controlPoint2:(CGPoint)controlPoint2;//æ·»åŠ ä¸€ä¸ªä¸‰é˜¶è´å¡å°”æ›²çº¿æ®µ- (void)addQuadCurveToPoint:(CGPoint)endPoint controlPoint:(CGPoint)controlPoint;//æ·»åŠ åœ†å¼§- (void)addArcWithCenter:(CGPoint)center radius:(CGFloat)radius startAngle:(CGFloat)startAngle endAngle:(CGFloat)endAngle clockwise:(BOOL)clockwise;//å…³é—­è·¯å¾„- (void)closePath;//ç§»é™¤æ‰€æœ‰ç‚¹- (void)removeAllPoints;//æ·»åŠ ä¸€æ®µè·¯å¾„- (void)appendPath:(UIBezierPath *)bezierPath;//å¯¹è·¯å¾„è¿›è¡Œé€†å‘- (UIBezierPath *)bezierPathByReversingPath;//è¿›è¡Œtransformå˜æ¢- (void)applyTransform:(CGAffineTransform)transform;//è·¯å¾„æ˜¯å¦ä¸ºç©º@property(readonly,getter=isEmpty) BOOL empty;//å°ºå¯¸@property(nonatomic,readonly) CGRect bounds;//å½“å‰ç‚¹@property(nonatomic,readonly) CGPoint currentPoint;//åˆ¤æ–­æ˜¯å¦åŒ…å«æŸä¸ªç‚¹- (BOOL)containsPoint:(CGPoint)point;//è®¾ç½®çº¿å®½@property(nonatomic) CGFloat lineWidth;//è®¾ç½®çº¿å¸½é£æ ¼@property(nonatomic) CGLineCap lineCapStyle;//è®¾ç½®æŠ˜ç‚¹é£æ ¼@property(nonatomic) CGLineJoin lineJoinStyle;@property(nonatomic) CGFloat miterLimit;@property(nonatomic) CGFloat flatness;//å¥‡å¶è§„åˆ™@property(nonatomic) BOOL usesEvenOddFillRule;//è¿›è¡Œè™šçº¿è®¾ç½®- (void)setLineDash:(nullable const CGFloat *)pattern count:(NSInteger)count phase:(CGFloat)phase;- (void)getLineDash:(nullable CGFloat *)pattern count:(nullable NSInteger *)count phase:(nullable CGFloat *)phase;//è¿›è¡Œå¡«å……ç»˜åˆ¶- (void)fill;//è¿›è¡Œè·¯å¾„ç»˜åˆ¶- (void)stroke; å››ã€ç¤ºä¾‹ç¨‹åºä¸‹é¢æ˜¯ä¸€ä¸ªiOSå¹³å°çš„æ¼”ç¤ºå°Demoï¼Œä½¿ç”¨å®ƒå¯ä»¥åŠ¨æ€è¿›è¡Œè´å¡å°”æ›²çº¿çš„ç»˜åˆ¶å¹¶è§‚å¯Ÿåˆ°è¾…åŠ©çº¿ä¸ç»˜åˆ¶è¿‡ç¨‹ï¼Œå¯ä»¥çµæ´»çš„é…ç½®ç»˜åˆ¶çš„é€Ÿåº¦å’Œæ§åˆ¶ç‚¹ï¼š Githubåœ°å€å¦‚ä¸‹ï¼š https://github.com/ZYHshao/Bezelã€‚","categories":[{"name":"ç¼–ç¨‹ç ç‘","slug":"ç¼–ç¨‹ç ç‘","permalink":"http://huishao.cc/categories/ç¼–ç¨‹ç ç‘/"}],"tags":[],"keywords":[{"name":"ç¼–ç¨‹ç ç‘","slug":"ç¼–ç¨‹ç ç‘","permalink":"http://huishao.cc/categories/ç¼–ç¨‹ç ç‘/"}]},{"title":"iOSåº”ç”¨å†…è¯„ä»·ä¸è´­ä¹°ä¸‰æ–¹APPç»„ä»¶","slug":"356iOSåº”ç”¨å†…è¯„ä»·ä¸è´­ä¹°ä¸‰æ–¹APPç»„ä»¶","date":"2017-08-20T16:00:00.000Z","updated":"2021-07-15T07:17:04.634Z","comments":true,"path":"2017/08/21/356iOSåº”ç”¨å†…è¯„ä»·ä¸è´­ä¹°ä¸‰æ–¹APPç»„ä»¶/","link":"","permalink":"http://huishao.cc/2017/08/21/356iOSåº”ç”¨å†…è¯„ä»·ä¸è´­ä¹°ä¸‰æ–¹APPç»„ä»¶/","excerpt":"","text":"iOSåº”ç”¨å†…è¯„ä»·ä¸è´­ä¹°ä¸‰æ–¹APPç»„ä»¶é¦–å…ˆæ¥è¯´åº”ç”¨å†…è¯„ä»·ç»„ä»¶ï¼Œåº”ç”¨å†…è¯„ä»·ç»„ä»¶æ˜¯iOS10.3ä¸­æ–°å¼•å…¥çš„åŠŸèƒ½ã€‚å…¶å°è£…åœ¨StoreKitæ¡†æ¶ä¸­ã€‚ç”¨æˆ·å¯ä»¥ç›´æ¥åœ¨APPå†…å”¤èµ·è¯„ä»·ç»„ä»¶å¯¹åº”ç”¨ç¨‹åºè¿›è¡Œè¯„æ˜Ÿï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1[SKStoreReviewController requestReview]; æ•ˆæœå¦‚ä¸‹å›¾ï¼š åœ¨æ¨¡æ‹Ÿå™¨ä¸Šï¼Œè¿™ä¸ªSubmitæŒ‰é’®æ˜¯ä¸å¯ç‚¹å‡»çš„ï¼Œå¦‚æœåœ¨çœŸæœºä¸Šï¼Œå¹¶ä¸”åº”ç”¨ç¨‹åºå·²ç»ä¸Šçº¿ï¼Œå¯ä»¥ç›´æ¥è¿›è¡Œè¯„ä»·ã€‚è¿™ä¸ªæ–¹ä¾¿çš„è¯„ä»·ç»„ä»¶å¯ä»¥é¿å…è®©ç”¨æˆ·è·³å‡ºAPPè¿›è¡Œè¯„ä»·çš„ä¸å¥½ä½“éªŒã€‚ SKStoreReviewControllerä¸­åªæœ‰requestReviewè¿™ä¸€ä¸ªç±»æ–¹æ³•ï¼Œéœ€è¦æ³¨æ„ï¼Œåªæœ‰åœ¨iOS10.3åæ‰å¯ä»¥ä½¿ç”¨ã€‚ä½†æ˜¯StoreKitè¿™ä¸ªæ¡†æ¶å¾ˆæ—©å°±æœ‰äº†ã€‚é‡Œé¢è¿˜æœ‰ä¸€ä¸ªç±»å¯ä»¥è®©ç”¨æˆ·ç›´æ¥åœ¨åº”ç”¨å†…æ‰“å¼€ä¸€ä¸ªç¬¬ä¸‰æ–¹åº”ç”¨çš„AppStoreè´­ä¹°é¡µã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345SKStoreProductViewController * controller = [[SKStoreProductViewController alloc]init];[self presentViewController:controller animated:YES completion:nil];[controller loadProductWithParameters:@&#123;SKStoreProductParameterITunesItemIdentifier:@(321231)&#125; completionBlock:^(BOOL result, NSError * _Nullable error) &#123; &#125;]; ä¸Šé¢ä»£ç SKStoreProuctViewControlleræ˜¯åº”ç”¨ç¨‹åºè´­ä¹°é¡µè§†å›¾æ§åˆ¶å™¨ï¼Œå…¶è°ƒç”¨loadProductWithParametersæ–¹æ³•è¿›è¡Œé¡µé¢çš„åŠ è½½ï¼Œè¿™ä¸ªæ–¹æ³•æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬1ä¸ªå‚æ•°ç”¨æ¥è®¾ç½®é…ç½®å­—å…¸ï¼Œç¬¬2ä¸ªå‚æ•°å›è°ƒBlockæ¥å‘Šè¯‰å¼€å‘è€…é¡µé¢çš„åŠ è½½æ˜¯å¦æˆåŠŸã€‚å…³äºé…ç½®å­—å…¸ï¼Œæœ‰å¦‚ä¸‹é”®å€¼å¯¹å¯ç”¨ï¼š 12345678910//è®¾ç½®è¦åŠ è½½çš„APPID NSNumberç±»å‹SKStoreProductParameterITunesItemIdentifier//å¹¿å‘ŠtokenSKStoreProductParameterAdvertisingPartnerToken//affiliate tokenSKStoreProductParameterAffiliateToken//CampaignTokenSKStoreProductParameterCampaignToken//ProviderTokenSKStoreProductParameterProviderToken å†å¤šè¯´ä¸€ç‚¹ï¼Œå…³äºappidçš„è·å–ï¼Œå¯ä»¥ç›´æ¥åœ¨https://linkmaker.itunes.apple.com/ã€‚ç½‘ç«™è¿›è¡Œæœç´¢ï¼Œä¹‹åå¯ä»¥è·å–åˆ°åº”ç”¨çš„ä¸‹è½½urlåœ°å€ï¼Œè¿™ä¸ªurlåœ°å€æ˜¯è¢«ç¼–ç è¿‡çš„ï¼Œè§£ç åå…¶ä¸­çš„å‚æ•°å³æœ‰appidå€¼ã€‚","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"ä¸€ä¸ªç§»åŠ¨å¼€å‘è€…çš„Mockæ•°æ®ä¹‹è·¯","slug":"355ä¸€ä¸ªç§»åŠ¨å¼€å‘è€…çš„Mockæ•°æ®ä¹‹è·¯","date":"2017-08-19T16:00:00.000Z","updated":"2021-07-15T02:28:02.210Z","comments":true,"path":"2017/08/20/355ä¸€ä¸ªç§»åŠ¨å¼€å‘è€…çš„Mockæ•°æ®ä¹‹è·¯/","link":"","permalink":"http://huishao.cc/2017/08/20/355ä¸€ä¸ªç§»åŠ¨å¼€å‘è€…çš„Mockæ•°æ®ä¹‹è·¯/","excerpt":"","text":"ä¸€ä¸ªç§»åŠ¨å¼€å‘è€…çš„Mockæ•°æ®ä¹‹è·¯ä¸€ã€å§‹ç”±åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œå¾ˆå¤§ä¸€éƒ¨åˆ†å·¥ä½œéƒ½æ˜¯å°†åå°æ•°æ®è·å–åˆ°åå±•ç¤ºåœ¨å‰ç«¯ç•Œé¢ä¸Šã€‚å¦‚æœæ¥å£æ˜¯ç°æˆçš„ï¼Œè¿™ä¸ªè¿‡ç¨‹è¿˜ç›¸å¯¹å®¹æ˜“ä¸€äº›ï¼Œä½†æ˜¯å¦‚æœæ¥å£çš„å¼€å‘å’Œå‰ç«¯å¼€å‘æ˜¯åŒæ—¶è¿›è¡Œçš„ï¼Œåœ¨ä»…ä»…æœ‰æ¥å£æ–‡æ¡£å¹¶æ— æµ‹è¯•ç¯å¢ƒçš„æƒ…å†µä¸‹ï¼Œå‰ç«¯å¼€å‘è€…å°±è¦ç—›è‹¦äº†ï¼Œæ‰€å¾—éæ‰€è§çš„ç›²å†™æ–¹å¼ä¸ä½†æ•ˆç‡ä½ä¸‹ï¼Œä¹Ÿæœ‰å¾ˆå¤§çš„é—æ¼é£é™©ã€‚å¦‚æœæˆ‘ä»¬æœ‰åŠæ³•è‡ªå·±æ ¹æ®æ¥å£æ–‡æ¡£æ¨¡æ‹Ÿè¿™äº›æ•°æ®ï¼Œé‚£å¼€å‘è¿‡ç¨‹ä¸­çš„ä½“éªŒå°±ä¼šå¥½å¾ˆå¤šäº†ã€‚å¹¸è¿çš„æ˜¯ï¼Œé€šè¿‡node.jsï¼Œexpresså’Œmock.jsï¼Œæˆ‘ä»¬å¯ä»¥éå¸¸å®¹æ˜“çš„è¿›è¡Œæ•°æ®Mockã€‚ äºŒã€å‡†å¤‡å·¥ä½œ1.node.jsé¦–å…ˆä½ éœ€è¦å®‰è£…node.jsï¼Œnode.jsæ˜¯ä¸€ä¸ªJavaScriptè¿è¡Œç¯å¢ƒï¼Œåœ¨å…¶å®˜ç½‘å¯ä»¥ååˆ†æ–¹ä¾¿çš„è¿›è¡Œä¸‹è½½å®‰è£…ï¼šhttp://nodejs.cn/ã€‚ 2.expressexpressæ˜¯ä¸€ä¸ªåŸºäºNodeå¹³å°çš„Webå¼€å‘æ¡†æ¶ï¼Œä½¿ç”¨å®ƒå¯ä»¥ååˆ†æ–¹ä¾¿çš„æ­å»ºæœ¬åœ°çš„webæœåŠ¡ï¼Œç”¨æ¥éƒ¨ç½²æˆ‘ä»¬çš„Mockæ•°æ®ï¼Œexpresså¯ä»¥é€šè¿‡npmæ¥è¿›è¡Œå®‰è£…ï¼Œå®˜ç½‘å¦‚ä¸‹ï¼šhttp://www.expressjs.com.cn/ã€‚å…¶ä¸­çš„è¯¦ç»†çš„å®‰è£…æ–¹æ³•ã€‚ 3.mock.jsmock.jsæ˜¯ä¸€ä¸ªæ¨¡æ‹Ÿæ•°æ®ç»“æ„ï¼Œç”Ÿæˆéšæœºæ•°æ®çš„jsåº“ã€‚å…¶æœ‰ä¸€å¥—è¯­æ³•è§„åˆ™ç”¨æ¥æ¨¡æ‹Ÿç»“æ„å’Œç”Ÿæˆæ•°æ®ã€‚å…¶å®˜ç½‘å¦‚ä¸‹ï¼Œå®‰è£…è¿‡ç¨‹ä¹Ÿååˆ†ç®€å•ï¼šhttp://mockjs.com/ã€‚ ä¸‰ã€Mock.jsè¯­æ³•è§„åˆ™åŠèŒƒä¾‹å¯¹äºMockæ•°æ®ï¼Œæœ€é‡è¦çš„æ˜¯æŒæ¡å’Œçµæ´»è¿ç”¨Mock.jsçš„è¯­æ³•è§„åˆ™ï¼Œèƒ½å¤Ÿç†Ÿç»ƒçš„ç¼–å†™å‡ºMockæ•°æ®ç»“æ„å¿…å¤‡çš„æŠ€èƒ½ã€‚åœ¨Mock.jsä¸­ï¼Œè¯­æ³•è§„åˆ™ä¸»è¦åˆ†ä¸ºä¸¤å—ï¼šæ•°æ®æ¨¡æ¿å’Œæ•°æ®å ä½ç¬¦ã€‚ 1.æ•°æ®æ¨¡æ¿æ•°æ®ç‰ˆæœ¬ä¸»è¦çš„ä½œç”¨æ˜¯ç”¨æ¥ç”Ÿæˆæ•°æ®ç»“æ„ã€‚æ•°æ®æ¨¡æ¿çš„ç»„æˆç”±å¦‚ä¸‹ä¸‰éƒ¨åˆ†ï¼šå±æ€§åï¼Œç”Ÿæˆè§„åˆ™å’Œå±æ€§å€¼ã€‚åœ¨è¯­æ³•ä¸Šçš„ç»“æ„å¦‚ä¸‹ï¼š å±æ€§å|ç”Ÿæˆè§„åˆ™:å±æ€§å€¼ æœ€ç®€å•çš„æ•°æ®æ¨¡æ¿æ˜¯ä¸ä½¿ç”¨ç”Ÿæˆè§„åˆ™ï¼Œç›´æ¥ç”¨å­—é¢é‡æ¥è¡¨ç¤ºï¼Œä»£ç å¦‚ä¸‹ï¼š 123&#123;name:'ç²å°‘'&#125; ç”Ÿæˆçš„mockæ•°æ®å¦‚ä¸‹æ‰€ç¤ºï¼š å¯¹äºæ¨¡æ‹Ÿå­—ç¬¦ä¸²ç±»å‹çš„æ•°æ®ï¼Œæœ‰ä¸¤ç§æ¨¡æ¿å¯ä»¥å®šä¹‰ï¼š æ¨¡æ¿1ï¼šâ€™å±æ€§å|min-maxâ€™:å±æ€§å€¼ é€šè¿‡é‡å¤ä¸€ä¸ªå­—ç¬¦ä¸²minåˆ°maxæ¬¡ä¹‹é—´æ¥ç”Ÿæˆæ•°æ®ã€‚ç¤ºä¾‹ï¼š 123&#123;'name|1-10':'ç²å°‘'&#125; ç”Ÿæˆçš„mockæ•°æ®å¦‚ä¸‹ï¼š æ¨¡æ¿2ï¼šâ€™å±æ€§å|countâ€™:å±æ€§å€¼ é€šè¿‡é‡å¤ä¸€ä¸ªå­—ç¬¦ä¸²countæ¬¡æ¥ç”Ÿæˆæ•°æ®ã€‚ç¤ºä¾‹ï¼š 1234&#123;'name|1-10':'ç²å°‘','moreName|10':'ç²å°‘'&#125; ç”Ÿæˆæ•°æ®å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¯¹äºæ¨¡æ‹Ÿæ•°å€¼ç±»å‹çš„æ•°æ®ï¼Œæœ‰3ç§æ¨¡æ¿å¯ä»¥å®šä¹‰ï¼š æ¨¡æ¿1ï¼šâ€™å±æ€§å|+1â€™:å±æ€§å€¼ å±æ€§å€¼è‡ªåŠ¨è‡ªå¢ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789&#123;'array|1-10':[ &#123; 'name|1-10':'ç²å°‘', 'moreName|10':'ç²å°‘', 'id|+1':0 &#125;]&#125; ç”Ÿæˆæ•°æ®å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š æ¨¡æ¿2ï¼šâ€™å±æ€§å|min-maxâ€™:å±æ€§å€¼ ç”Ÿæˆåœ¨minåˆ°maxä¹‹é—´çš„æ•´æ•°ï¼Œä»£ç å¦‚ä¸‹ï¼š 12345678910&#123;'array|1-5':[ &#123; 'name|1-10':'ç²å°‘', 'moreName|10':'ç²å°‘', 'id|+1':0, 'age|20-25':20 &#125;]&#125; æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š æ¨¡æ¿3ï¼šâ€™å±æ€§å|min-max.dmin-dmaxâ€™:å±æ€§å€¼ ç”Ÿæˆæµ®ç‚¹æ•°ï¼Œæ•´æ•°éƒ¨åˆ†åœ¨minåˆ°maxä¹‹é—´ï¼Œå°æ•°éƒ¨åˆ†ä¿ç•™dminåˆ°dmaxä½ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011&#123;'array|1-5':[ &#123; 'name|1-10':'ç²å°‘', 'moreName|10':'ç²å°‘', 'id|+1':0, 'age|20-25':20, 'weight|60-70.1-4':60 &#125;]&#125; ç”Ÿæˆæ•°æ®å¦‚ä¸‹ï¼š å¯¹äºæ¨¡æ‹Ÿå¸ƒå°”ç±»å‹çš„æ•°æ®ï¼Œæœ‰ä¸¤ç§æ¨¡æ¿å¯ä»¥å®šä¹‰ï¼š æ¨¡æ¿1ï¼šâ€™å±æ€§å|1â€™:å±æ€§å€¼ éšæœºç”Ÿæˆä¸€ä¸ªå¸ƒå°”å€¼ï¼Œä¾‹å¦‚ï¼š 123456789101112&#123;'array|1-5':[ &#123; 'name|1-10':'ç²å°‘', 'moreName|10':'ç²å°‘', 'id|+1':0, 'age|20-25':20, 'weight|60-70.1-4':60, 'isWiner|1':true &#125;]&#125; ç”Ÿæˆçš„æ•°æ®å¦‚ä¸‹ï¼š æ¨¡æ¿2ï¼šâ€™å±æ€§å|min-maxâ€™:å±æ€§å€¼ éšæœºç”Ÿæˆä¸€ä¸ªå¸ƒå°”å€¼ï¼Œå€¼å’Œå±æ€§å€¼ç›¸åŒçš„æ¦‚ç‡ä¸ºmin/(min+max)ï¼Œå€¼ä¸å±æ€§å€¼ä¸åŒçš„æ¦‚ç‡ä¸ºmax/(min+max)ã€‚ å¯¹äºæ¨¡æ‹Ÿå¯¹è±¡ç±»å‹çš„æ•°æ®ï¼Œæœ‰ä¸¤ç§æ¨¡æ¿å¯ä»¥å®šä¹‰ï¼š æ¨¡æ¿1ï¼šâ€™å±æ€§å|countâ€™:å±æ€§å€¼ æœ€ç»ˆç”Ÿæˆçš„å¯¹è±¡çš„å±æ€§ä¸ºä»å±æ€§å€¼ä¸­éšæœºå–countä¸ªå±æ€§ï¼Œä¾‹å¦‚ï¼š 123456789101112131415161718&#123;'array|1-5':[ &#123; 'name|1-10':'ç²å°‘', 'moreName|10':'ç²å°‘', 'id|+1':0, 'age|20-25':20, 'weight|60-70.1-4':60, 'isWiner|1':true, 'job|3':&#123; num:1234, address:'xxxxx', phone:12321, name:'cjj' &#125; &#125;]&#125; ç”Ÿæˆçš„æ•°æ®å¦‚ä¸‹ï¼š æ¨¡æ¿2ï¼šâ€™å±æ€§å|min-maxâ€™:å±æ€§å€¼ ä»å±æ€§å€¼çš„å±æ€§ä¸­éšæœºå–minåˆ°maxä¸ªä½œä¸ºæœ€ç»ˆç”Ÿæˆçš„å¯¹è±¡å±æ€§ã€‚ å¯¹äºæ¨¡æ‹Ÿæ•°ç»„ç±»å‹çš„æ•°æ®ï¼Œæœ‰4ç§æ¨¡æ¿å¯ä»¥å®šä¹‰ï¼š æ¨¡æ¿1ï¼šâ€™å±æ€§å|1â€™:å±æ€§å€¼ ä»å±æ€§å€¼æ•°ç»„ä¸­éšæœºå–1ä¸ªå€¼ä½œä¸ºæœ€ç»ˆå€¼ã€‚ æ¨¡æ¿2ï¼šâ€™å±æ€§å|+1â€™:å±æ€§å€¼ ä»å±æ€§å€¼æ•°ç»„ä¸­ä¾æ¬¡å–1ä¸ªå€¼ä½œä¸ºæœ€ç»ˆå€¼ã€‚ æ¨¡æ¿3ï¼šâ€™å±æ€§å|min-maxâ€™:å±æ€§å€¼ é€šè¿‡é‡å¤minåˆ°maxæ­¤å±æ€§å€¼ç”Ÿæˆä¸€ä¸ªæ•°ç»„ã€‚ æ¨¡æ¿4ï¼šâ€™å±æ€§å|countâ€™:å±æ€§å€¼ é€šè¿‡é‡å¤countæ­¤å±æ€§å€¼ç”Ÿæˆæ•°ç»„ã€‚ é™¤äº†ä¸Šé¢åˆ—ä¸¾çš„åˆ›å»ºæ¨¡æ¿çš„æ–¹å¼å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨å‡½æ•°å€¼å’Œæ­£åˆ™è¡¨è¾¾å¼å€¼ä½œä¸ºæ¨¡æ¿ï¼Œå¦‚æœæ˜¯å‡½æ•°ï¼Œåˆ™ç”Ÿæˆçš„å€¼ä¸ºå‡½æ•°çš„è¿”å›å€¼ï¼Œå¦‚æœæ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼Œåˆ™ç”Ÿæˆçš„å€¼ä¸ºå¯åŒ¹é…çš„å­—ç¬¦ä¸²ã€‚ 2.æ•°æ®å ä½ç¬¦æ•°æ®å ä½ç¬¦å®é™…ä¸Šå°±æ˜¯æŒ‡å®šç”Ÿæˆçš„éšæœºæ•°æ®ï¼Œå®ƒå’ŒMock.Randomåº“ä¸­çš„ç”Ÿæˆéšæœºæ•°æ®æ–¹æ³•ä¸€ä¸€å¯¹åº”ï¼Œå…¶å¯ä»¥æ¨¡æ‹Ÿé‚®ç®±åœ°å€ï¼Œç”µè¯å·ï¼Œå§“åï¼Œè¡Œæ®µç­‰å„ç§æ•°æ®ã€‚æ•°æ®å ä½ç¬¦æ ¼å¼å¦‚ä¸‹ï¼š @æ–¹æ³•å æˆ– @æ–¹æ³•å(å‚æ•°) æ¨¡æ‹Ÿå¸ƒå°”ç±»å‹æ•°æ®ï¼š 1.æ— å‚ï¼šbooleanéšæœºè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415161718&#123;'array|1-5':[ &#123; 'name|1-10':'ç²å°‘', 'moreName|10':'ç²å°‘', 'id|+1':0, 'age|20-25':20, 'weight|60-70.1-4':60, 'isWiner|1':'@boolean', 'job|3':&#123; num:1234, address:'xxxxx', phone:12321, name:'cjj' &#125; &#125;]&#125; 2.æœ‰å‚ï¼šboolean(min,max,current)ï¼ŒæŒ‡å®šcurrentå‡ºç°çš„æ¦‚ç‡ã€‚ æ¨¡æ‹Ÿéšæœºè‡ªç„¶æ•°ï¼š 1.æ— å‚ï¼šnaturaléšæœºè¿”å›ä¸€ä¸ªå¤§äºç­‰äº0çš„æ•´æ•°ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415161718&#123;'array|1-5':[ &#123; 'name|1-10':'ç²å°‘', 'moreName|10':'ç²å°‘', 'id|+1':0, 'age|20-25':20, 'weight|60-70.1-4':60, 'isWiner|1':'@boolean', 'job|3':&#123; num:'@natural', address:'xxxxx', phone:12321, name:'cjj' &#125; &#125;]&#125; ç”Ÿæˆæ•°æ®å¦‚ä¸‹ï¼š 2.æœ‰å‚æ•°ï¼šnatural(nim,max)ï¼Œéšæœºç”Ÿæˆä¸€ä¸ªåœ¨minä¸maxä¹‹é—´çš„è‡ªç„¶æ•°ã€‚ æ¨¡æ‹Ÿéšæœºæ•´æ•°ï¼š 1.æ— å‚ï¼šintegeréšæœºç”Ÿæˆä¸€ä¸ªæ•´æ•°ã€‚ 2.æœ‰å‚ï¼šinterger(min,max)ï¼Œéšæœºç”Ÿæˆä¸€ä¸ªåœ¨minåˆ°maxä¹‹é—´çš„æ•´æ•°ã€‚ æ¨¡æ‹Ÿéšæœºæµ®ç‚¹æ•°ï¼š 1.æ— å‚ï¼šfloatéšæœºç”Ÿæˆä¸€ä¸ªæµ®ç‚¹æ•°ã€‚ 2.æœ‰å‚ï¼šfloat(min,max,dmin,dmax)ï¼Œéšæœºç”Ÿæˆä¸€ä¸ªæ•´æ•°éƒ¨åˆ†åœ¨minåˆ°maxä¹‹é—´ï¼Œå°æ•°ä½æ•°ä¸ºdminåˆ°dmaxä¹‹é—´çš„æµ®ç‚¹æ•°ã€‚ æ¨¡æ‹Ÿéšæœºå­—ç¬¦ï¼š 1.æ— å‚ï¼šcharacteréšæœºç”Ÿæˆä¸€ä¸ªå­—ç¬¦ã€‚ 2.æœ‰å‚ï¼šcharacter(cs),csä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç”Ÿæˆçš„å­—ç¬¦ä»cså­—ç¬¦ä¸²ä¸­ä»»å–ä¸€ä¸ªï¼Œå¦‚æœä¼ å…¥çš„cså­—ç¬¦ä¸²ä¸ºä¸€ä¸‹å…¶ä¸­ä¹‹ä¸€ï¼Œåˆ™è¡¨ç¤ºä»å†…ç½®å­—ç¬¦é›†ä¸­é€‰ï¼š lowerï¼šå°å†™å­—æ¯ upperï¼šå¤§å†™å­—ç¬¦ numberï¼šæ•°å€¼å­—ç¬¦ symbolï¼šç³»ç»Ÿå­—ç¬¦ æ¨¡æ‹Ÿéšæœºå­—ç¬¦ä¸²ï¼š 1.æ— å‚ï¼šstringéšæœºç”Ÿæˆä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ 2.æœ‰å‚ï¼š æ ¼å¼1ï¼šstring(length)ç”ŸæˆæŒ‡å®šé•¿åº¦çš„å­—ç¬¦ä¸²ã€‚ æ ¼å¼2ï¼šstring(cs,length)ä»cså­—ç¬¦æ± ä¸­ç”ŸæˆæŒ‡å®šé•¿åº¦å­—ç¬¦ä¸²ã€‚ æ ¼å¼3ï¼šstring(min,max)ç”Ÿæˆé•¿åº¦åœ¨minåˆ°maxä¹‹é—´çš„å­—ç¬¦ä¸²ã€‚ æ ¼å¼4ï¼šstring(cs,min,max)ä»cså­—ç¬¦é›†ä¸­ç”Ÿæˆé•¿åº¦åœ¨minåˆ°maxä¹‹é—´çš„å­—ç¬¦ä¸²ã€‚ æ¨¡æ‹Ÿæ•´å‹æ•°ç»„ï¼š æœ‰å‚ï¼š æ ¼å¼1ï¼šrange(stop)ç”Ÿæˆä¸€ä¸ªæ•´å‹æ•°ç»„ï¼Œstopä¸ºæ•°ç»„ä¸­çš„æ•°å€¼ç»“æŸè¾¹ç•Œã€‚ æ ¼å¼2ï¼šrange(start,stop)startä¸ºæ•°å€¼çš„èµ·å§‹è¾¹ç•Œï¼Œstopä¸ºæ•°ç»„ä¸­çš„æ•°å€¼ç»“æŸè¾¹ç•Œã€‚ æ ¼å¼3ï¼šrange(start,stop,step)startä¸ºæ•°å€¼çš„èµ·å§‹è¾¹ç•Œï¼Œstopä¸ºæ•°å€¼çš„ç»“æŸè¾¹ç•Œï¼Œstepä¸ºæ­¥é•¿ã€‚ ç¤ºä¾‹ï¼š 12345678910111213141516171819&#123;'array|1-5':[ &#123; 'name|1-10':'ç²å°‘', 'moreName|10':'ç²å°‘', 'id|+1':0, 'age|20-25':20, 'weight|60-70.1-4':60, 'isWiner|1':'@boolean', 'job|3':&#123; num:'@natural', address:'xxxxx', phone:12321, name:'@string(3)' &#125;, node:'@range(3,5,1)' &#125;]&#125; æ¨¡æ‹Ÿæ—¥æœŸå­—ç¬¦ä¸²ï¼š 1.æ— å‚ï¼šdateéšæœºç”Ÿæˆä¸€ä¸ªæ—¥æœŸå­—ç¬¦ä¸²ã€‚ 2.æœ‰å‚ï¼šdate(format)formatç”¨æ¥è®¾ç½®å¦‚æœŸå­—ç¬¦ä¸²çš„æ ¼å¼ï¼Œä¾‹å¦‚ï¼š 12345678&#123; 'data|3-5':[ &#123; time:'@date', ctime:'@date(yyyy-MM-dd HH-mm-ss A)' &#125; ]&#125; ç”Ÿæˆæ•°æ®å¦‚ä¸‹ï¼š æ¨¡æ‹Ÿæ—¶é—´å­—ç¬¦ä¸²ï¼š 1.æ— å‚ï¼štimeç›´æ¥ç”Ÿæˆä¸€ä¸ªæ—¶é—´å­—ç¬¦ä¸²ã€‚ 2.æœ‰å‚ï¼štime(format)ç”Ÿæˆæ ¼å¼åŒ–çš„æ—¶é—´å­—ç¬¦ä¸²ã€‚ æ¨¡æ‹Ÿæ—¥æœŸæ—¶é—´å­—ç¬¦ä¸²ï¼š 1.æ— å‚ï¼šdetetimeç”Ÿæˆé»˜è®¤æ ¼å¼çš„æ—¥æœŸæ—¶é—´å­—ç¬¦ä¸²ã€‚ 2.æœ‰å‚ï¼šdatetime(format)ç”ŸæˆæŒ‡å®šæ ¼å¼çš„æ—¥æœŸæ—¶é—´å­—ç¬¦ä¸²ã€‚ æ¨¡æ‹Ÿå½“å‰æ—¥æœŸå­—ç¬¦ä¸²ï¼š 1.æ— å‚ï¼šnowç”Ÿæˆå½“å‰æ—¥æœŸæ—¶é—´å­—ç¬¦ä¸²ã€‚ 2.æœ‰å‚ï¼š æ ¼å¼1ï¼šnow(unit,format)ï¼Œunitè®¾ç½®æ—¶é—´å•ä½ï¼Œformatè®¾ç½®æ ¼å¼åŒ–æ–¹å¼ã€‚æ—¶é—´å•ä½å¯é€‰ï¼šyearï¼Œmonthï¼Œweekï¼Œdayï¼Œhourï¼Œminuteï¼Œsecondã€‚ æ ¼å¼2ï¼šnow(format) æ ¼å¼3ï¼šnowï¼ˆunitï¼‰ æ¨¡æ‹Ÿå›¾ç‰‡ç´ æï¼š 1.æ— å‚ï¼šiamgeéšæœºç”Ÿæˆä¸€ä¸ªå°ºå¯¸çš„å›¾ç‰‡åœ°å€ï¼Œæ­¤åœ°å€å¯ä»¥ç›´æ¥è¯·æ±‚åˆ°å›¾åƒã€‚ä¾‹å¦‚ï¼š 123456789&#123; 'data|3-5':[ &#123; time:'@date', expriseTime:'@datetime', image:'@image' &#125; ]&#125; ç”Ÿæˆæ•°æ®å¦‚ä¸‹ï¼š 2.æœ‰å‚ï¼š æ ¼å¼1ï¼šimage(size,background,foreground,format,text)ï¼ŒsizeæŒ‡å®šå›¾ç‰‡çš„å°ºå¯¸ï¼Œæ ¼å¼ä¸º300x250ï¼ŒbackgroundæŒ‡å®šå›¾ç‰‡çš„èƒŒæ™¯è‰²ï¼ŒforegroundæŒ‡å®šå›¾ç‰‡çš„å‰æ™¯è‰²ï¼ŒformatæŒ‡å®šå›¾ç‰‡çš„æ ¼å¼ï¼Œå¯é€‰pngã€gifã€jpgï¼Œtextå‚æ•°æŒ‡å®šå›¾ç‰‡ä¸Šçš„æ–‡å­—ã€‚ æ ¼å¼2ï¼šimage(size) æ ¼å¼3ï¼šimage(size,background) æ ¼å¼4ï¼šimage(size,background,foreground) æ ¼å¼5ï¼šimage(size,background,foreground,text) æ¨¡æ‹Ÿå›¾ç‰‡äºŒè¿›åˆ¶ç´ ææ•°æ®ï¼š 1.æ— å‚ï¼šdataImageç”Ÿæˆéšæœºçš„base64å›¾åƒç¼–ç ã€‚ 2.æœ‰å‚ï¼š æ ¼å¼1ï¼šdataImage(size,text)ï¼Œsizeå‚æ•°è¿™æ˜¯å›¾ç‰‡å°ºå¯¸ï¼Œtextå‚æ•°è®¾ç½®å›¾ç‰‡ä¸Šçš„æ–‡å­—ã€‚ æ ¼å¼2ï¼šdataImage(size) æ¨¡æ‹Ÿé¢œè‰²å­—ç¬¦ä¸²çš„ç›¸å…³å ä½ç¬¦ï¼š 1.colorï¼šéšæœºç”Ÿæˆæ ¼å¼ä¸ºâ€œ#rrggbbâ€çš„é¢œè‰²ã€‚ 2.hexï¼šéšæœºç”Ÿæˆæ ¼å¼ä¸ºâ€œ#rrggbbâ€çš„é¢œè‰²å€¼ã€‚ 3.rgbï¼šéšæœºç”Ÿæˆæ ¼å¼ä¸ºâ€œrgb(r,g,b)â€çš„é¢œè‰²å€¼ã€‚ 4.rgbaï¼šéšæœºç”Ÿæˆæ ¼å¼ä¸ºâ€œrgba(r,g,b,a)â€çš„é¢œè‰²å€¼ã€‚ 5.hslï¼šéšæœºç”Ÿæˆæ ¼å¼ä¸ºâ€œhsl(h,s,l)â€çš„é¢œè‰²å€¼ã€‚ æ¨¡æ‹Ÿè‹±æ–‡æ–‡æœ¬æ®µè½ï¼š 1.æ— å‚ï¼šparagraphéšæœºç”Ÿæˆä¸€æ®µæ–‡æœ¬ã€‚ 2.æœ‰å‚ï¼š æ ¼å¼1ï¼šparagraph(min,max)éšæœºç”Ÿæˆä¸€æ®µæ–‡æœ¬ï¼Œå¥å­ä¸ªæ•°åœ¨minäºmaxä¹‹é—´ã€‚ æ ¼å¼2ï¼šparagraph(len)éšæœºç”Ÿæˆä¸€æ®µæ–‡æœ¬ï¼Œlenè®¾ç½®å¥å­ä¸ªæ•°ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910&#123; 'data|3-5':[ &#123; time:'@date', expriseTime:'@datetime', image:'@image(\"300x250\",\"#222312\",\"#f1f2f3\",\"jpg\",\"image\")' , content:'@paragraph(1,3)' &#125; ]&#125; ç”Ÿæˆçš„éšæœºæ•°æ®å¦‚ä¸‹ï¼š æ¨¡æ‹Ÿä¸­æ–‡æ–‡æœ¬æ®µè½ï¼š 1.æ— å‚ï¼šcparagraphéšæœºç”Ÿæˆä¸­æ–‡æ®µè½ 2.æœ‰å‚ï¼š æ ¼å¼1ï¼šcparagraph(min,max) æ ¼å¼2ï¼šcparagraph(len) æ¨¡æ‹Ÿè‹±æ–‡å¥å­ï¼š 1.æ— å‚ï¼šsentenceéšæœºç”Ÿæˆä¸€å¥æ–‡æœ¬ï¼Œé¦–å­—æ¯ä¼šå¤§å†™ã€‚ 2.æœ‰å‚ï¼š æ ¼å¼1ï¼šsentence(min,max)ï¼Œéšæœºç”Ÿæˆä¸€å¥æ–‡æœ¬ï¼Œæ–‡æœ¬ä¸­å•è¯ä¸ªæ•°ä¸ºminåˆ°maxä¹‹é—´ã€‚ æ ¼å¼2ï¼šsentence(len)ï¼Œéšæœºç”Ÿæˆä¸€å¥æ–‡æœ¬ï¼Œæ–‡æœ¬ä¸­å•è¯ä¸ªæ•°ä¸ºlenã€‚ æ¨¡æ‹Ÿä¸­æ–‡å¥å­ï¼š 1.æ— å‚ï¼šcsentenceéšæœºç”Ÿæˆä¸€å¥ä¸­æ–‡æ–‡æœ¬ã€‚ 2.æœ‰å‚ï¼š æ ¼å¼1ï¼šcsentence(min,max) æ ¼å¼2ï¼šcsentence(len) æ¨¡æ‹Ÿè‹±æ–‡å•è¯ï¼š 1.æ— å‚ï¼šwordéšæœºç”Ÿæˆä¸€ä¸ªå•è¯ã€‚ 2.æœ‰å‚ï¼š æ ¼å¼1ï¼šword(min,max)ï¼Œç”Ÿæˆå•è¯ä¸­å­—ç¬¦ä¸ªæ•°ä¸ºminåˆ°maxä¹‹é—´ã€‚ æ ¼å¼2ï¼šword(len)ï¼Œç”Ÿæˆå•è¯ä¸­å­—ç¬¦ä¸ªæ•°ä¸ºlenã€‚ æ¨¡æ‹Ÿä¸­æ–‡è¯ï¼š 1.æ— å‚ï¼šcwordéšæœºç”Ÿæˆä¸€ä¸ªæ±‰å­—ã€‚ 2.æœ‰å‚ï¼š æ ¼å¼1ï¼šcword(pool)ï¼Œpoolä¸ºæ±‰å­—å­—ç¬¦ä¸²ï¼Œä»poolå­—ç¬¦æ± ä¸­é€‰å–ä¸€ä¸ªæ±‰å­—ã€‚ æ ¼å¼2ï¼šcword(length)ï¼Œéšæœºç”Ÿæˆä¸€ä¸ªè¯ï¼Œæ±‰å­—ä¸ªæ•°ä¸ºlengthã€‚ æ ¼å¼3ï¼šcword(min,max)ï¼Œéšæœºç”Ÿæˆä¸€ä¸ªè¯ï¼Œæ±‰å­—ä¸ªæ•°ä¸ºminåˆ°maxä¹‹é—´ã€‚ æ ¼å¼4ï¼šcword(pool,length) æ ¼å¼5ï¼šcword(pool,min,max) æ¨¡æ‹Ÿæ ‡é¢˜ï¼š 1.æ— å‚ï¼štitleéšæœºç”Ÿæˆæ ‡é¢˜ã€‚ 2.æœ‰å‚ï¼š æ ¼å¼1ï¼štitle(len)ç”Ÿæˆå•è¯ä¸ªæ•°ä¸ºlençš„æ ‡é¢˜ã€‚ æ ¼å¼2ï¼štitle(min,max)ç”Ÿæˆå•è¯ä¸ªæ•°ä¸ºminåˆ°maxä¹‹é—´çš„æ ‡é¢˜ã€‚ æ¨¡æ‹Ÿä¸­æ–‡æ ‡é¢˜ï¼š 1.æ— å‚ï¼šctitle 2.æœ‰å‚ï¼š æ ¼å¼1ï¼šctitle(len) æ ¼å¼2ï¼šctitle(min,max) æ¨¡æ‹Ÿå§“åç›¸å…³çš„å ä½ç¬¦ï¼š 1.firstéšæœºç”Ÿæˆå¸¸è§çš„è‹±æ–‡åã€‚ 2.lastéšæœºç”Ÿæˆå¸¸è§çš„è‹±æ–‡å§“ã€‚ 3.name(middle)ï¼Œéšæœºç”Ÿæˆä¸€ä¸ªè‹±æ–‡å§“åï¼Œmiddleä¸ºå¸ƒå°”å‚æ•°ï¼Œè®¾ç½®æ˜¯å¦ç”Ÿæˆä¸­é—´åã€‚ 4.cfirstéšæœºç”Ÿæˆä¸€ä¸ªä¸­æ–‡å§“ã€‚ 5.clastéšæœºç”Ÿæˆä¸€ä¸ªä¸­æ–‡åã€‚ 6.cnameéšæœºç”Ÿæˆä¸€ä¸ªä¸­æ–‡å§“åã€‚ æ¨¡æ‹Ÿç½‘å€ç›¸å…³å ä½ç¬¦ï¼š 1.url(protocol,host)éšæœºç”Ÿæˆä¸€ä¸ªurlï¼ŒprotocolæŒ‡å®šåè®®ï¼ŒhostæŒ‡å®šä¸»æœºï¼Œä¹Ÿå¯ä»¥æ— å‚ã€‚ 2.protocoléšæœºç”Ÿæˆä¸€ä¸ªurlåè®®ï¼Œä¾‹å¦‚httpã€‚ 3.domainéšæœºç”Ÿæˆä¸€ä¸ªåŸŸåã€‚ 4.tldéšæœºç”Ÿæˆä¸€ä¸ªé¡¶çº§åŸŸåã€‚ 5.email(domain)éšæœºç”Ÿæˆä¸€ä¸ªemailåœ°å€ï¼ŒdomainæŒ‡å®šåŸŸåï¼Œä¹Ÿå¯ä»¥æ— å‚ã€‚ 6.ipéšæœºç”Ÿæˆä¸€ä¸ªipåœ°å€ã€‚ æ¨¡æ‹Ÿåœ°å€ç›¸å…³å ä½ç¬¦ï¼š 1.regionéšæœºç”Ÿæˆä¸€ä¸ªä¸­å›½åŒºåŸŸï¼Œä¾‹å¦‚ååŒ—ã€‚ 2.provinceéšæœºç”Ÿæˆä¸€ä¸ªä¸­å›½çœä»½ã€‚ 3.city(pro)éšæœºç”Ÿæˆä¸€ä¸ªä¸­å›½åŸå¸‚ï¼Œproä¸ºå¸ƒå°”å€¼ï¼ŒæŒ‡å®šæ˜¯å¦ç”Ÿæˆå…¶æ‰€åœ¨çš„çœä»½ï¼Œä¹Ÿå¯ä»¥æ— å‚ã€‚ 4.county(all)éšæœºç”Ÿæˆä¸€ä¸ªä¸­å›½å¿ï¼Œallä¸ºå¸ƒå°”å€¼ï¼ŒæŒ‡å®šæ˜¯å¦ç”Ÿæˆå…¶æ‰€åœ¨çš„çœå¸‚ã€‚ä¹Ÿå¯ä»¥æ— å‚ã€‚ 5.zipéšæœºç”Ÿæˆä¸€ä¸ªé‚®ç¼–ã€‚ æ¨¡æ‹Ÿidç›¸å…³å ä½ç¬¦ï¼š 1.guidéšæœºç”Ÿæˆä¸€ä¸ªGUIDã€‚ 2.idéšæœºç”Ÿæˆä¸€ä¸ª18ä½èº«ä»½è¯å·ã€‚ å››ã€ä¸€ä¸ªç”¨expressæ­å»ºMockæœåŠ¡çš„ç¤ºä¾‹1234567891011121314151617181920var express = require('express');var app = express();var Mock = require('mockjs');app.get('/mock', function(req, res)&#123; var data = Mock.mock(&#123; \"name\":'@cname', \"content\":'@string(0, 5)', &#125;); response = &#123; \"data\":data &#125; res.end(JSON.stringify(response));&#125;);var server = app.listen(8082, function()&#123; var host = server.address().address var port = server.address().port&#125;) ä¸Šé¢ä»£ç å¼€å¯äº†ä¸€ä¸ªgetè¯·æ±‚ï¼Œå¦‚æœæ­£ç¡®å®‰è£…äº†nodeï¼Œexpressï¼Œmock.jsï¼Œä½¿ç”¨nodeè¿è¡Œæ­¤æ–‡ä»¶åç›´æ¥åœ¨æµè§ˆå™¨é€šè¿‡127.0.0.1:8082/mockåœ°å€è¿›è¡Œè®¿é—®å³å¯çœ‹åˆ°ç”Ÿæˆçš„mockæ•°æ®ã€‚ Mockæ•°æ®çš„åˆè¡·æ˜¯åœ¨å‰ç«¯å¼€å‘ä¸­è¿›è¡Œæ¥å£çš„æ¨¡æ‹Ÿä½¿ç”¨ï¼Œåœ¨æ¥å£ç»“æ„å’Œè®¿é—®urléƒ½å·²ç»ç¡®å®šï¼Œåªæ˜¯æ²¡å¼€å‘å®Œæˆæ˜¯ï¼Œå¯ä»¥ä½¿ç”¨Charlesç»“åˆMockæ•°æ®æ¥ä»¿çœŸæ¥å£è¿”å›ã€‚Charleså·¥å…·å¯ä»¥å°†æŸä¸ªè¯·æ±‚æ˜ å°„åˆ°å¦å¤–ä¸€ä¸ªåœ°å€ä¸Šï¼Œåœ¨CharlesæŠ“åˆ°çš„è¯·æ±‚ä¸Šé‚®ä»¶ï¼Œå¼¹å‡ºçš„èœå•ä¸­é€‰æ‹©Map Remoteé€‰é¡¹ã€‚ åœ¨å¼¹å‡ºçš„çª—å£ä¸­å°†æ˜ å°„åˆ°çš„ä¸»æœºè®¾ç½®ä¸º127.0.0.1ï¼Œç«¯å£è®¾ç½®ä¸º8082ï¼Œåœ°å€è®¾ç½®ä¸ºmockå³å¯è®¿é—®ä¸Šé¢æ–‡ä»¶ç”Ÿæˆçš„æ¨¡æ‹Ÿæ•°æ®ã€‚ äº”ã€ä¸€ä¸ªæ–¹ä¾¿æ˜“ç”¨çš„Javaæ¨¡æ‹Ÿæ•°æ®å®¢æˆ·ç«¯æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦mockçš„æ¥å£æœ‰å¾ˆå¤šï¼Œå¦‚æœèƒ½å¤Ÿæ–¹ä¾¿çš„å¯¹è¿™äº›mockæ–‡ä»¶è¿›è¡Œç®¡ç†ä¸ç”¨æ¯æ¬¡éƒ½é€šè¿‡ç»ˆç«¯æ¥æ“ä½œå°±æ›´æ–¹ä¾¿äº†ã€‚è¿™é‡Œæœ‰æˆ‘å†™çš„ä¸€ä¸ªJARå°å·¥å…·ï¼Œå¯ä»¥åœ¨Macæˆ–Windowsä¸Šæ‰©å¹³å°è¿›è¡Œä½¿ç”¨ã€‚ä¸‹è½½åœ°å€å¦‚ä¸‹ï¼š http://zyhshao.github.io/EasyMock/welcome.htmlã€‚ è¿™ä¸ªå·¥å…·å°±æ˜¯ä¸€ä¸ªç®€å•çš„JARåŒ…ï¼Œåœ¨å…¶ä¸­å°è£…äº†æ“ä½œç»ˆç«¯çš„å‘½åï¼Œåªéœ€è¦åœ¨å·¦å³åˆ—è¡¨ä¸­åˆ›å»ºç›¸åº”çš„è¯·æ±‚è·¯å¾„ï¼Œåœ¨å³ä¾§ç›´æ¥ç¼–å†™Mock.jsæ¨¡æ‹Ÿæ•°æ®å¯¹è±¡åï¼Œå¼€å¯æœåŠ¡å³å¯ï¼Œå¼€å¯æœåŠ¡åä¼šå°†å·¦å³åˆ—è¡¨ä¸­æ‰€æœ‰çš„æ¥å£éƒ½å¼€å¯ã€‚å¦‚ä¸‹å›¾ï¼š è¿˜éœ€è¦æ³¨æ„ï¼Œè¿™ä¸ªå·¥å…·ä¸ååˆ†å®Œå–„ï¼Œå¦‚æœæœ‰äº§ç”Ÿé”™è¯¯ä¼šè¢«æ•è·ä½†å¹¶æ²¡æœ‰ä»»ä½•æç¤ºï¼Œå¦‚æœä½ æ²¡æ­£ç¡®å®‰è£…nodeæˆ–è€…expressæˆ–è€…mock.jsï¼Œå†æˆ–è€…ä½ çš„mock.jsä»£ç æœ‰é—®é¢˜ï¼ŒæœåŠ¡éƒ½ä¸èƒ½æ­£ç¡®å¯åŠ¨ã€‚","categories":[{"name":"æ—¥å¸¸æŠ€å·§","slug":"æ—¥å¸¸æŠ€å·§","permalink":"http://huishao.cc/categories/æ—¥å¸¸æŠ€å·§/"}],"tags":[],"keywords":[{"name":"æ—¥å¸¸æŠ€å·§","slug":"æ—¥å¸¸æŠ€å·§","permalink":"http://huishao.cc/categories/æ—¥å¸¸æŠ€å·§/"}]},{"title":"å°†iOSé¡¹ç›®è¿›è¡Œå­å·¥ç¨‹åŒ–","slug":"354å°†iOSé¡¹ç›®è¿›è¡Œå­å·¥ç¨‹åŒ–","date":"2017-07-25T16:00:00.000Z","updated":"2021-07-15T02:26:49.854Z","comments":true,"path":"2017/07/26/354å°†iOSé¡¹ç›®è¿›è¡Œå­å·¥ç¨‹åŒ–/","link":"","permalink":"http://huishao.cc/2017/07/26/354å°†iOSé¡¹ç›®è¿›è¡Œå­å·¥ç¨‹åŒ–/","excerpt":"","text":"å°†iOSé¡¹ç›®è¿›è¡Œå­å·¥ç¨‹åŒ–åœ¨iOSé¡¹ç›®å¼€å‘ä¸­ï¼Œéšç€é¡¹ç›®çš„è¶Šæ¥è¶Šå¤§ï¼Œå·¥ç¨‹çš„ç»“æ„åŒ–ä¼šå˜å·®ï¼Œç¼–è¯‘çš„é€Ÿåº¦ä¹Ÿä¼šè¶Šæ¥è¶Šæ…¢ã€‚ä½¿ç”¨é™æ€åº“æˆ–åŠ¨æ€åº“çš„æ–¹å¼æ¥æ„å»ºå­å·¥ç¨‹ä¸ä»…å¯ä»¥åŠ å¿«é¡¹ç›®çš„ç¼–è¯‘é€Ÿåº¦ï¼Œä»ç»“æ„ä¸Šï¼Œä¹Ÿä¼˜åŒ–äº†é¡¹ç›®çš„ç»„ç»‡ã€‚æœ‰ä¸¤ç§æ–¹å¼æ¥æ¥å¯¹é¡¹ç›®è¿›è¡Œå­å·¥ç¨‹åŒ–ï¼Œå¯ä»¥åœ¨é¡¹ç›®ä¸­åˆ›å»ºå­é¡¹ç›®ï¼Œä¹Ÿå¯ä»¥åˆ›å»ºå¹¶åˆ—çš„é¡¹ç›®ï¼Œå»ºç«‹é¡¹ç›®ä¾èµ–ã€‚éœ€è¦æ³¨æ„ï¼Œæ— è®ºå“ªç§æ–¹å¼ï¼Œä½ éƒ½åº”è¯¥å°½é‡ä¿è¯å­å·¥ç¨‹ä¸è¦ç”¨åˆ°ä¸»å·¥ç¨‹ä¸­çš„å†…å®¹ï¼Œå¦‚æœå¿…é¡»è¿™æ ·åšï¼Œä½ å¯ä»¥é‡‡ç”¨ä»£ç†æˆ–å…¶ä»–å›è°ƒç¼–ç¨‹æ–¹å¼æ¥è½¬äº¤ç»™ä¸»å·¥ç¨‹è‡ªå·±å¤„ç†ã€‚ ä¸€ã€åˆ›å»ºå­å·¥ç¨‹çš„ä¸€ä¸ªç¤ºä¾‹ä½¿ç”¨Xcodeæ–°å»ºä¸€ä¸ªå‘½åä¸ºProjectDemoçš„å·¥ç¨‹ï¼Œåœ¨ProjectDemoå·¥ç¨‹ä¸­å†æ¬¡æ–°å»ºä¸€ä¸ªframeworkåº“å·¥ç¨‹ï¼Œç‚¹å‡»æ–°å»ºæ–‡ä»¶ä¸­çš„Project...é€‰é¡¹ï¼Œé€‰æ‹©å…¶ä¸­çš„Cocoa Touch Frameworkå·¥ç¨‹(åˆ›å»ºCocoa Touch Static Libraryåˆ™ä¼šæ‰“åŒ…ä¸ºé™æ€åº“)ã€‚ å°†æ–°åˆ›å»ºçš„å·¥ç¨‹å‘½åä¸ºLoginLibï¼Œç”¨æ¥æ¨¡æ‹Ÿé¡¹ç›®ä¸­çš„ç™»å½•æ¨¡å—ã€‚éœ€è¦æ³¨æ„ï¼Œæ–°å»ºå·¥ç¨‹æ—¶ï¼Œéœ€è¦å°†å…¶åŠ å…¥ProjectDemoç»„ï¼Œå¦‚ä¸‹å›¾ï¼š å¯¹äºåˆ›å»ºçš„LoginLibå·¥ç¨‹ï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªLoginLib.hå¤´æ–‡ä»¶ç”¨æ¥å…¬å¼€å¤–ç•Œéœ€è¦ä½¿ç”¨åˆ°çš„ç±»ï¼Œä¾¿äºæ¼”ç¤ºï¼Œæˆ‘åœ¨é‡Œé¢åˆ›å»ºä¸€ä¸ªè§†å›¾æ§åˆ¶å™¨å’Œä¸€ä¸ªç±»åˆ«å·¥å…·ç±»ï¼Œç»“æ„å¦‚ä¸‹ï¼š é…ç½®LoginLibçš„å¤´æ–‡ä»¶é€‰é¡¹ï¼Œå°†å¤–ç•Œéœ€è¦ç”¨åˆ°çš„è¿›è¡Œå…¬å¼€ï¼Œå¦‚ä¸‹ï¼š ç°åœ¨ï¼Œåˆ†åˆ«ç¼–è¯‘LoginLibå·¥ç¨‹å’ŒProjectDemoå·¥ç¨‹ï¼Œéƒ½æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯ä½ ä¾ç„¶æ— æ³•åœ¨ProjectDemoå·¥ç¨‹ä¸­ä½¿ç”¨LoginLibåº“ä¸­çš„å†…å®¹ï¼Œä½ éœ€è¦å»ºç«‹ä¸»å­å·¥ç¨‹çš„å…³è”ï¼Œåœ¨ProjectDemoå·¥ç¨‹ä¸­å»ºç«‹ä¾èµ–å·¥ç¨‹å¹¶æ¥å…¥åŠ¨æ€åº“ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š é…ç½®Target Dependenciesçš„ä½œç”¨æ˜¯ç¡®ä¿æ¯æ¬¡ä¸»å·¥ç¨‹ç¼–è¯‘å‰éƒ½ä¼šå…ˆå¯¹æ‰€ä¾èµ–çš„å·¥ç¨‹è¿›è¡Œç¼–è¯‘ã€‚ä¹‹åï¼Œåœ¨ProjectDemoå·¥ç¨‹ä¸­å¯¼å…¥LoginLibç›¸å…³å¤´æ–‡ä»¶å³å¯ä½¿ç”¨å…¶ä¸­åŠŸèƒ½ã€‚ æ³¨æ„ï¼Œå¦‚æœæŠ¥é”™æ‰¾ä¸åˆ°å¤´æ–‡ä»¶ï¼Œä½ éœ€è¦è®¾ç½®ä¸€ä¸‹å¤´æ–‡ä»¶çš„å¯»æ‰¾è·¯å¾„ï¼Œåœ¨ProjectDemoçš„Build Settingä¸­æœç´¢headerï¼Œå¦‚ä¸‹å›¾ è®¾ç½®Header Search Pathså¦‚ä¸‹å³å¯ã€‚ äºŒã€åˆ›å»ºä¾èµ–æ¨¡å—å·¥ç¨‹çš„ä¸€ä¸ªç¤ºä¾‹å¼€å‘ä¸­è¿˜æœ‰ä¸€ç§åœºæ™¯ï¼Œå…¬å¸å¯èƒ½æœ‰ä¸€ç»„Appï¼Œè¿™äº›Appä¸­å¯èƒ½æœ‰å¾ˆå¤šç›¸ä¼¼çš„æ¨¡å—ï¼Œä¾‹å¦‚æŸäº›åº”ç”¨ç¨‹åºåˆ†ä¸ºç”¨æˆ·ç«¯å’Œè€æ¿ç«¯ï¼Œä»–ä»¬éƒ½æœ‰ç›¸åŒçš„ç™»å½•æ¨¡å—ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨workspaceæ¥è¿›è¡Œé¡¹ç›®å’Œæ¨¡å—çš„ç®¡ç†ã€‚æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹å‘½åä¸ºProjectsï¼Œåœ¨å…¶ä¸­åˆ›å»ºä¸€ä¸ªworkspaceæ–‡ä»¶ï¼Œä¹Ÿå‘½åä¸ºProjectsã€‚åœ¨workspaceæ–‡ä»¶ä¸­æ–°å»ºä¸¤ä¸ªé¡¹ç›®å·¥ç¨‹å’Œä¸€ä¸ªåŠ¨æ€åº“å·¥ç¨‹ï¼Œåœ¨åˆ›å»ºæ—¶ï¼Œæ³¨æ„é€‰æ‹©åŠ å…¥workspaceï¼Œå¦‚ä¸‹å›¾ï¼š åˆ›å»ºçš„3ä¸ªå·¥ç¨‹åˆ†åˆ«å‘½åä¸ºUserProjectï¼ŒBossProjectå’ŒLoginLibï¼Œç»“æ„å¦‚ä¸‹ï¼š ç±»ä¼¼æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªç¤ºä¾‹ï¼Œé…ç½®å®Œå¤´æ–‡ä»¶è·¯å¾„åï¼Œå°†åŠ¨æ€åº“å¼•å…¥UserProjectå’ŒBossProjectå·¥ç¨‹ï¼Œå³å®ç°äº†LoginLibæ¨¡å—çš„å¤ç”¨ã€‚ ä¸‰ã€å¦‚æœå­å·¥ç¨‹åªèƒ½å¤Ÿæœ‰èµ„æºæ–‡ä»¶å¦‚æœå­å·¥ç¨‹ä¸­æœ‰èµ„æºæ–‡ä»¶ï¼Œæ— è®ºæ˜¯plistæ–‡ä»¶è¿˜æ˜¯å›¾ç‰‡ç´ æï¼Œåœ¨ä¸»å·¥ç¨‹è°ƒç”¨åŠ¨æ€åº“æ—¶ï¼Œè¿™äº›æ–‡ä»¶éƒ½æ˜¯æ²¡æœ‰è¢«æ‰“åŒ…è¿›æ¥çš„ã€‚æœ‰ä¸¤ç§æ–¹å¼æ¥å¤„ç†è¿™ä¸ªé—®é¢˜ï¼š 1.å°†èµ„æºæ–‡ä»¶æ‰“åŒ…æˆBundleåŒ…ï¼Œä»åŒ…ä¸­å–èµ„æºXcodeå¯ä»¥åˆ›å»ºBundleèµ„æºåŒ…ï¼Œè¿™ç§æ–‡ä»¶åˆ›å»ºåç¼–è¯‘æ—¶ä¼šè‡ªåŠ¨æ‰“åŒ…æˆBundleæ–‡ä»¶ã€‚éœ€è¦æ³¨æ„ï¼ŒXcodeåªèƒ½åˆ›å»ºMacOSä¸‹çš„Bundleæ¨¡æ¿ï¼Œåˆ›å»ºåéœ€è¦å°†ç¼–è¯‘é€‰é¡¹è®¾ç½®ä¸ºiOSã€‚è¿™ç§æ–¹å¼æœ‰å¾ˆå¤§çš„å¼Šç«¯ï¼Œé¦–å…ˆä¸»å·¥ç¨‹å¿…é¡»å¼•å…¥ç¼–è¯‘åçš„BundleåŒ…ï¼Œå¦‚æœæ¯æ¬¡æ–°å¢æˆ–ä¿®æ”¹èµ„æºï¼Œéƒ½è¦é‡æ–°æ‰“åŒ…å’Œå¯¼å…¥ã€‚å…¶æ¬¡ï¼Œåœ¨å­å·¥ç¨‹ä¸­å¯¹ç´ æè¿›è¡Œä½¿ç”¨æ—¶ï¼Œéƒ½å¿…é¡»ä»¥Bundleä¸ºåª’ä»‹ï¼Œå¢åŠ çš„å¤æ‚åº¦ã€‚ 2.ä½¿ç”¨shellæ‹·è´èµ„æºè„šæœ¬è¿™ç§æ–¹å¼æ¯æ¬¡åœ¨ç¼–è¯‘æ—¶éƒ½ä¼šå°†èµ„æºè¿›è¡Œæ‹·è´ï¼Œç±»ä¼¼CocoaPodsçš„ç®¡ç†æ¨¡å¼ï¼Œæ¨èä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸»å·¥ç¨‹çš„ç¼–è¯‘é€‰é¡¹ä¸­æ–°å»ºä¸€ä¸ªè„šæœ¬æ–‡ä»¶ï¼Œå¦‚å›¾ï¼š ç¼–å†™å¦‚ä¸‹è„šæœ¬ä»£ç å³å¯ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130#!/bin/sh# set -emkdir -p \"$&#123;TARGET_BUILD_DIR&#125;/$&#123;UNLOCALIZED_RESOURCES_FOLDER_PATH&#125;\"install_resource()&#123; if [[ \"$1\" = /* ]] ; then RESOURCE_PATH=\"$1\" fi if [[ ! -e \"$RESOURCE_PATH\" ]] ; then cat &lt;&lt; EOMerror: Resource \"$RESOURCE_PATH\" not found.EOM exit 1 fi case $RESOURCE_PATH in *.storyboard) echo \"ibtool --reference-external-strings-file --errors --warnings --notices --minimum-deployment-target $&#123;!DEPLOYMENT_TARGET_SETTING_NAME&#125; --output-format human-readable-text --compile $&#123;TARGET_BUILD_DIR&#125;/$&#123;UNLOCALIZED_RESOURCES_FOLDER_PATH&#125;/`basename \\\"$RESOURCE_PATH\\\" .storyboard`.storyboardc $RESOURCE_PATH --sdk $&#123;SDKROOT&#125; $&#123;TARGET_DEVICE_ARGS&#125;\" ibtool --reference-external-strings-file --errors --warnings --notices --minimum-deployment-target $&#123;!DEPLOYMENT_TARGET_SETTING_NAME&#125; --output-format human-readable-text --compile \"$&#123;TARGET_BUILD_DIR&#125;/$&#123;UNLOCALIZED_RESOURCES_FOLDER_PATH&#125;/`basename \\\"$RESOURCE_PATH\\\" .storyboard`.storyboardc\" \"$RESOURCE_PATH\" --sdk \"$&#123;SDKROOT&#125;\" $&#123;TARGET_DEVICE_ARGS&#125; ;; *.xib) echo \"ibtool --reference-external-strings-file --errors --warnings --notices --minimum-deployment-target $&#123;!DEPLOYMENT_TARGET_SETTING_NAME&#125; --output-format human-readable-text --compile $&#123;TARGET_BUILD_DIR&#125;/$&#123;UNLOCALIZED_RESOURCES_FOLDER_PATH&#125;/`basename \\\"$RESOURCE_PATH\\\" .xib`.nib $RESOURCE_PATH --sdk $&#123;SDKROOT&#125; $&#123;TARGET_DEVICE_ARGS&#125;\" ibtool --reference-external-strings-file --errors --warnings --notices --minimum-deployment-target $&#123;!DEPLOYMENT_TARGET_SETTING_NAME&#125; --output-format human-readable-text --compile \"$&#123;TARGET_BUILD_DIR&#125;/$&#123;UNLOCALIZED_RESOURCES_FOLDER_PATH&#125;/`basename \\\"$RESOURCE_PATH\\\" .xib`.nib\" \"$RESOURCE_PATH\" --sdk \"$&#123;SDKROOT&#125;\" $&#123;TARGET_DEVICE_ARGS&#125; ;; *.framework) echo \"mkdir -p $&#123;TARGET_BUILD_DIR&#125;/$&#123;FRAMEWORKS_FOLDER_PATH&#125;\" mkdir -p \"$&#123;TARGET_BUILD_DIR&#125;/$&#123;FRAMEWORKS_FOLDER_PATH&#125;\" echo \"rsync -av $RESOURCE_PATH $&#123;TARGET_BUILD_DIR&#125;/$&#123;FRAMEWORKS_FOLDER_PATH&#125;\" rsync -av \"$RESOURCE_PATH\" \"$&#123;TARGET_BUILD_DIR&#125;/$&#123;FRAMEWORKS_FOLDER_PATH&#125;\" ;; *.xcdatamodel) echo \"xcrun momc \\\"$RESOURCE_PATH\\\" \\\"$&#123;TARGET_BUILD_DIR&#125;/$&#123;UNLOCALIZED_RESOURCES_FOLDER_PATH&#125;/`basename \"$RESOURCE_PATH\"`.mom\\\"\" xcrun momc \"$RESOURCE_PATH\" \"$&#123;TARGET_BUILD_DIR&#125;/$&#123;UNLOCALIZED_RESOURCES_FOLDER_PATH&#125;/`basename \"$RESOURCE_PATH\" .xcdatamodel`.mom\" ;; *.xcdatamodeld) echo \"xcrun momc \\\"$RESOURCE_PATH\\\" \\\"$&#123;TARGET_BUILD_DIR&#125;/$&#123;UNLOCALIZED_RESOURCES_FOLDER_PATH&#125;/`basename \"$RESOURCE_PATH\" .xcdatamodeld`.momd\\\"\" xcrun momc \"$RESOURCE_PATH\" \"$&#123;TARGET_BUILD_DIR&#125;/$&#123;UNLOCALIZED_RESOURCES_FOLDER_PATH&#125;/`basename \"$RESOURCE_PATH\" .xcdatamodeld`.momd\" ;; *.xcmappingmodel) echo \"xcrun mapc \\\"$RESOURCE_PATH\\\" \\\"$&#123;TARGET_BUILD_DIR&#125;/$&#123;UNLOCALIZED_RESOURCES_FOLDER_PATH&#125;/`basename \"$RESOURCE_PATH\" .xcmappingmodel`.cdm\\\"\" xcrun mapc \"$RESOURCE_PATH\" \"$&#123;TARGET_BUILD_DIR&#125;/$&#123;UNLOCALIZED_RESOURCES_FOLDER_PATH&#125;/`basename \"$RESOURCE_PATH\" .xcmappingmodel`.cdm\" ;; *.xcassets) echo \"all xcassets will compile later!\" ;; *) echo \"$RESOURCE_PATH\" echo \"$RESOURCE_PATH\" &gt;&gt; \"$RESOURCES_TO_COPY\" ;; esac&#125;install_project_resouces()&#123; PROJECT_RESOURCE_DIR=\"$&#123;PROJECT_DIR&#125;/../$1\" if [[ ! -e \"$&#123;PROJECT_RESOURCE_DIR&#125;\" ]]; then cat &lt;&lt; EOMerror: PROJECT_RESOURCE_DIR \"$&#123;PROJECT_RESOURCE_DIR&#125;\" not foundEOM exit 1 fi echo \"copy resources in $&#123;PROJECT_RESOURCE_DIR&#125; to $&#123;TARGET_BUILD_DIR&#125;/$&#123;UNLOCALIZED_RESOURCES_FOLDER_PATH&#125;\" ALL_RESOURCES=() FIND_ALL_RESOURCES=$(find \"$PROJECT_RESOURCE_DIR\" -iname \"*.xcassets\" -o -iname \"*.xib\" -o -iname \"*.storyboard\" -o -iname \"*.plist\" ! -iname \"Info.plist\") while read line; do ALL_RESOURCES+=(\"$line\") done &lt;&lt;&lt;\"$FIND_ALL_RESOURCES\" RESOURCES_TO_COPY=\"$&#123;PROJECT_RESOURCE_DIR&#125;/resources-to-copy.txt\" &gt; \"$RESOURCES_TO_COPY\" case \"$&#123;TARGETED_DEVICE_FAMILY&#125;\" in 1,2) TARGET_DEVICE_ARGS=\"--target-device ipad --target-device iphone\" ;; 1) TARGET_DEVICE_ARGS=\"--target-device iphone\" ;; 2) TARGET_DEVICE_ARGS=\"--target-device ipad\" ;; 3) TARGET_DEVICE_ARGS=\"--target-device tv\" ;; *) TARGET_DEVICE_ARGS=\"--target-device mac\" ;; esac for i in $&#123;ALL_RESOURCES[@]&#125;; do install_resource \"$&#123;i&#125;\" done mkdir -p \"$&#123;TARGET_BUILD_DIR&#125;/$&#123;UNLOCALIZED_RESOURCES_FOLDER_PATH&#125;\" rsync -avr --copy-links --no-relative --exclude '*/.svn/*' --files-from=\"$RESOURCES_TO_COPY\" / \"$&#123;TARGET_BUILD_DIR&#125;/$&#123;UNLOCALIZED_RESOURCES_FOLDER_PATH&#125;\" if [[ \"$&#123;ACTION&#125;\" == \"install\" ]] &amp;&amp; [[ \"$&#123;SKIP_INSTALL&#125;\" == \"NO\" ]]; then mkdir -p \"$&#123;INSTALL_DIR&#125;/$&#123;UNLOCALIZED_RESOURCES_FOLDER_PATH&#125;\" rsync -avr --copy-links --no-relative --exclude '*/.svn/*' --files-from=\"$RESOURCES_TO_COPY\" / \"$&#123;INSTALL_DIR&#125;/$&#123;UNLOCALIZED_RESOURCES_FOLDER_PATH&#125;\" fi rm -f \"$RESOURCES_TO_COPY\"&#125;for module in $&#123;MODULES&#125;; do install_project_resouces \"$&#123;module&#125;\"doneXCASSETS_SEARCH_DIR=\"$&#123;PROJECT_DIR&#125;/..\"XCASSET_FILES=()if [[ -n \"$&#123;WRAPPER_EXTENSION&#125;\" ]] &amp;&amp; [ \"`xcrun --find actool`\" ]then # Find all other xcassets (this unfortunately includes those of path pods and other targets). ALL_XCASSETS=$(find \"$XCASSETS_SEARCH_DIR\" -iname \"*.xcassets\" -type d) while read line; do if [[ $line != \"$&#123;PODS_ROOT&#125;*\" ]]; then XCASSET_FILES+=(\"$line\") fi done &lt;&lt;&lt;\"$ALL_XCASSETS\" echo \"compile all xcassets: $&#123;XCASSET_FILES[@]&#125;\" printf \"%s\\0\" \"$&#123;XCASSET_FILES[@]&#125;\" | xargs -0 xcrun actool --output-format human-readable-text --notices --warnings --platform \"$&#123;PLATFORM_NAME&#125;\" --minimum-deployment-target \"$&#123;!DEPLOYMENT_TARGET_SETTING_NAME&#125;\" $&#123;TARGET_DEVICE_ARGS&#125; --compress-pngs --compile \"$&#123;BUILT_PRODUCTS_DIR&#125;/$&#123;UNLOCALIZED_RESOURCES_FOLDER_PATH&#125;\"fiecho \"all done!\" å››ã€ä¸€ç‚¹å°ä½“æ‚Ÿæœ¬åšå®¢æ‰€è®¨è®ºçš„ï¼Œåªæ˜¯ä»å·¥ç¨‹ç»“æ„ä¸Šå®ç°æ¨¡å—åŒ–ä¸ç»„ä»¶åŒ–çš„æ–¹å¼ï¼Œä¸€ä¸ªå…¬å¸å¯èƒ½ä¼šæœ‰å¾ˆå¤šä¸ªAppäº§å“ï¼Œä½†å…¶ä¸­ä¸€å®šæœ‰æŸäº›åŸºç¡€æ¨¡å—æ˜¯å¯ä»¥å¤ç”¨çš„ï¼Œé™¤äº†è¿›è¡Œé™æ€åº“å°è£…æˆ–åŠ¨æ€åº“å°è£…å¤–ï¼Œè¿›è¡Œå¹¶åˆ—å·¥ç¨‹åŒ–ä¹Ÿæ˜¯ä¸€ç§å¾ˆå¥½çš„é€‰æ‹©ï¼Œè¿™æ ·å¯ä»¥åŒæ­¥å¼€å‘ï¼Œè¿­ä»£æ›´å¿«ã€‚é™¤äº†å…¬ç”¨çš„æ¨¡å—ï¼Œè¿˜æœ‰ä¸€äº›æ¨¡å—å¯èƒ½å¹¶ä¸å…¬ç”¨ä½†æ˜¯ç¡®å¯ä»¥ç‹¬ç«‹å¼€å‘ï¼Œä¾‹å¦‚èµ„è®¯ç±»é¡¹ç›®ä¸­å¯èƒ½ä¼šæœ‰ç”¨æˆ·æ¨¡å—ï¼Œç¤¾äº¤æ¨¡å—å’Œå†…å®¹æ¨¡å—ï¼Œå°†è¿™äº›æ‹†åˆ†ä¸ºé¡¹ç›®å†…çš„å­å·¥ç¨‹å¯ä»¥ä½¿é¡¹ç›®çš„ç»“æ„æ›´åŠ æ¸…æ™°ï¼Œæ¨¡å—åŒ–æµ‹è¯•ä¹Ÿæ›´å®¹æ˜“è¿›è¡Œã€‚ æœ€åï¼Œä»…ä»…é¡¹ç›®ç»“æ„ä¸Šçš„æ¨¡å—åŒ–è¿œè¿œè¾¾ä¸åˆ°çœŸæ­£å®ç°ç»„ä»¶åŒ–é¡¹ç›®çš„è¦æ±‚ï¼Œéµå®ˆåè®®ä¸ºæ ‡å‡†ï¼Œä»¥å‡½æ•°å¼ç¼–ç¨‹ä¸ºæ–¹å¼ï¼Œå…¨å±€ç€çœ¼çš„æ¥å£è®¾è®¡ä¸è·¯ç”±è§„åˆ’ï¼Œè‰¯å¥½çš„ç¼–ç¨‹ä¹ æƒ¯ä¸ç»Ÿä¸€çš„ä»£ç é£æ ¼ï¼Œè¿™ç§ä»£ç å±‚é¢çš„é¡¹ç›®å¼€å‘ç®¡ç†æ‰çœŸæ­£ä»»é‡é“è¿œã€‚åé¢æœ‰æ—¶é—´æˆ‘ä¼šé™†ç»­é€šè¿‡å…¶ä»–åšå®¢æ¥æ¢è®¨è¿™äº›é—®é¢˜ã€‚å¸Œæœ›ä¸€èµ·äº¤æµï¼Œå…±åŒå­¦ä¹ ï¼","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"OS Xå¼€å‘ï¼šä¸‹æ‹‰èœå•æŒ‰é’®NSPopUpButtonåº”ç”¨","slug":"352OS Xå¼€å‘ï¼šä¸‹æ‹‰èœå•æŒ‰é’®NSPopUpButtonåº”ç”¨","date":"2017-07-23T16:00:00.000Z","updated":"2021-07-15T02:24:02.218Z","comments":true,"path":"2017/07/24/352OS Xå¼€å‘ï¼šä¸‹æ‹‰èœå•æŒ‰é’®NSPopUpButtonåº”ç”¨/","link":"","permalink":"http://huishao.cc/2017/07/24/352OS Xå¼€å‘ï¼šä¸‹æ‹‰èœå•æŒ‰é’®NSPopUpButtonåº”ç”¨/","excerpt":"","text":"OS Xå¼€å‘ï¼šä¸‹æ‹‰èœå•æŒ‰é’®NSPopUpButtonåº”ç”¨NSPopUpButtonæ˜¯ä¸€ä¸ªä¸‹æ‹‰æŒ‰é’®ï¼Œå½“ç”¨æˆ·ç‚¹å‡»æ—¶ï¼Œå…¶ä¼šå¼¹å‡ºä¸€ä¸ªä¸‹æ‹‰é€‰æ‹©èœå•ã€‚ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112- (void)viewDidLoad &#123; [super viewDidLoad]; NSPopUpButton * popUpButton = [[NSPopUpButton alloc]initWithFrame:CGRectMake(100, 400, 200, 300)]; //è®¾ç½®å¼¹å‡ºèœå• NSMenu * menu = [[NSMenu alloc]initWithTitle:@\"menu\"]; [menu insertItemWithTitle:@\"one\" action:@selector(null) keyEquivalent:@\"\" atIndex:0]; [menu addItemWithTitle:@\"two\" action:@selector(null) keyEquivalent:@\"\"]; popUpButton.menu = menu; //è®¾ç½®å¼¹å‡ºèœå•çš„ä½ç½® popUpButton.preferredEdge = NSRectEdgeMaxX; [self.view addSubview:popUpButton];&#125; æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š NSPopUpButtonç»§æ‰¿ä¸NSButtonï¼Œå› æ­¤NSButtonæ·»åŠ è§¦å‘äº‹ä»¶çš„æ–¹å¼åœ¨NSPopUpButtonä¸­ä¾ç„¶ä½¿ç”¨ï¼ŒNSPopUpButtonç±»ä¸­å±æ€§å’Œæ–¹æ³•è§£æå¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960//åˆå§‹åŒ–æ–¹æ³• flagå‚æ•°å†³å®šæ˜¯ä¸‹æ‹‰èœå•æ¨¡å¼è¿˜æ˜¯å¼¹å‡ºèœå•æ¨¡å¼- (instancetype)initWithFrame:(NSRect)buttonFrame pullsDown:(BOOL)flag;//è®¾ç½®ä¸‹æ‹‰èœå•@property (nullable, strong) NSMenu *menu;//è®¾ç½®å½“äº¤äº’äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œæ˜¯å¦ç¦ç”¨é€‰é¡¹@property BOOL autoenablesItems;//é£æ ¼è®¾ç½®æ˜¯å¦ä¸ºä¸‹æ‹‰èœå•@property BOOL pullsDown;//è®¾ç½®èœå•å¼¹å‡ºçš„ä¼˜å…ˆä½ç½®@property NSRectEdge preferredEdge;//åˆ—è¡¨æŒ‰é’®ç›¸å…³//æ·»åŠ ä¸€ä¸ªæŒ‰é’®- (void)addItemsWithTitles:(NSArray&lt;NSString *&gt; *)itemTitles;//æ’å…¥ä¸€ä¸ªæŒ‰é’®- (void)insertItemWithTitle:(NSString *)title atIndex:(NSInteger)index;//é€šè¿‡æ ‡é¢˜ç§»é™¤ä¸€ä¸ªæŒ‰é’®- (void)removeItemWithTitle:(NSString *)title;//é€šè¿‡ç´¢å¼•ç§»é™¤æŒ‰é’®- (void)removeItemAtIndex:(NSInteger)index;//ç§»é™¤æ‰€æœ‰æŒ‰é’®- (void)removeAllItems;//æ‰€æœ‰åˆ—è¡¨é€‰é¡¹æŒ‰é’®æ•°ç»„@property (readonly, copy) NSArray&lt;NSMenuItem *&gt; *itemArray;//æŒ‰é’®ä¸ªæ•°@property (readonly) NSInteger numberOfItems;//è·å–æŒ‰é’®ç´¢å¼•çš„æ–¹æ³•- (NSInteger)indexOfItem:(NSMenuItem *)item;- (NSInteger)indexOfItemWithTitle:(NSString *)title;- (NSInteger)indexOfItemWithTag:(NSInteger)tag;- (NSInteger)indexOfItemWithRepresentedObject:(nullable id)obj;- (NSInteger)indexOfItemWithTarget:(nullable id)target andAction:(nullable SEL)actionSelector;//è·å–æŒ‰é’®çš„æ–¹æ³•- (nullable NSMenuItem *)itemAtIndex:(NSInteger)index;- (nullable NSMenuItem *)itemWithTitle:(NSString *)title;//è·å–æœ€åä¸€ä¸ªæŒ‰é’®@property (nullable, readonly, strong) NSMenuItem *lastItem;//é€‰æ‹©æŸä¸ªæŒ‰é’®çš„æ–¹æ³•- (void)selectItem:(nullable NSMenuItem *)item;- (void)selectItemAtIndex:(NSInteger)index;- (void)selectItemWithTitle:(NSString *)title;- (BOOL)selectItemWithTag:(NSInteger)tag;- (void)setTitle:(NSString *)string;//è·å–é€‰ä¸­çš„æŒ‰é’®@property (nullable, readonly, strong) NSMenuItem *selectedItem;//è·å–å·²ç»é€‰ä¸­çš„æŒ‰é’®ç´¢å¼•@property (readonly) NSInteger indexOfSelectedItem;//è·å–å·²ç»é€‰ä¸­çš„æŒ‰é’®tag@property (readonly) NSInteger selectedTag;//å°†é€‰ä¸­çš„æ ‡é¢˜æ˜¾ç¤ºè¿›è¡ŒåŒæ­¥- (void)synchronizeTitleAndSelectedItem;//è·å–æŸä¸ªç´¢å¼•æŒ‰é’®çš„æ ‡é¢˜- (NSString *)itemTitleAtIndex:(NSInteger)index;//è·å–æŒ‰é’®æ ‡é¢˜æ•°ç»„@property (readonly, copy) NSArray&lt;NSString *&gt; *itemTitles;//è·å–é€‰ä¸­çš„æŒ‰é’®æ ‡é¢˜@property (nullable, readonly, copy) NSString *titleOfSelectedItem;//å½“ä¸‹æ‹‰èœå•å¼¹å‡ºæ—¶å‘é€çš„é€šçŸ¥APPKIT_EXTERN NSNotificationName NSPopUpButtonWillPopUpNotification;","categories":[{"name":"macOSå¼€å‘","slug":"macOSå¼€å‘","permalink":"http://huishao.cc/categories/macOSå¼€å‘/"}],"tags":[],"keywords":[{"name":"macOSå¼€å‘","slug":"macOSå¼€å‘","permalink":"http://huishao.cc/categories/macOSå¼€å‘/"}]},{"title":"è‡ªå·±åŠ¨æ‰‹è®¾è®¡ä¸€æ¬¾iOSè‡ªåŠ¨æ„å»ºå‘å¸ƒå·¥å…·","slug":"353è‡ªå·±åŠ¨æ‰‹è®¾è®¡ä¸€æ¬¾iOSè‡ªåŠ¨æ„å»ºå‘å¸ƒå·¥å…·","date":"2017-07-23T16:00:00.000Z","updated":"2021-07-15T02:25:27.916Z","comments":true,"path":"2017/07/24/353è‡ªå·±åŠ¨æ‰‹è®¾è®¡ä¸€æ¬¾iOSè‡ªåŠ¨æ„å»ºå‘å¸ƒå·¥å…·/","link":"","permalink":"http://huishao.cc/2017/07/24/353è‡ªå·±åŠ¨æ‰‹è®¾è®¡ä¸€æ¬¾iOSè‡ªåŠ¨æ„å»ºå‘å¸ƒå·¥å…·/","excerpt":"","text":"è‡ªå·±åŠ¨æ‰‹è®¾è®¡ä¸€æ¬¾iOSè‡ªåŠ¨æ„å»ºå‘å¸ƒå·¥å…·ä¸€ã€å¼•è¨€åœ¨iOSå¼€å‘ä¸­ï¼Œä½ å¯èƒ½ç»å¸¸ä¼šé‡åˆ°è¿™æ ·çš„åœºæ™¯ï¼š è‡ªå·±è´Ÿè´£çš„åŠŸèƒ½æ¨¡å—å¼€å‘å®Œæˆåï¼Œå°†å…¶åˆå¹¶åˆ°æµ‹è¯•åˆ†æ”¯ï¼Œç„¶åæ‰“æµ‹è¯•åŒ…ç»™æµ‹è¯•å®‰è£…ã€‚æµ‹è¯•å‘ç°bugï¼Œè¿™æ—¶ä½ å¯èƒ½æ­£åœ¨å¼€å‘åˆ†æ”¯ä¸Šåšå…¶ä»–çš„äº‹æƒ…ï¼Œä½†æ˜¯ä½ éœ€è¦ä¿®æ”¹äº†bugï¼Œæäº¤åˆ°æµ‹è¯•åˆ†æ”¯ï¼Œå†æ¬¡æ‰“æµ‹è¯•åŒ…ç»™æµ‹è¯•äººå‘˜ä½¿ç”¨ã€‚ååå¤å¤çš„åˆ‡æ¢åˆ†æ”¯ï¼Œååå¤å¤çš„æ„å»ºæ‰“åŒ…å°†æµªè´¹ä½ å¤§é‡çš„æ—¶é—´ï¼Œä½œä¸ºä¸€åå·¥ç¨‹å¸ˆï¼Œæœ€ä¸èƒ½å®¹å¿çš„ä¾¿æ˜¯åœ¨é‡å¤çš„äº‹æƒ…ä¸Šæµªè´¹æ—¶é—´ã€‚äºæ˜¯ï¼Œä½ æƒ³ï¼Œæˆ‘å¯ä»¥è‡ªå·±åŠ¨æ‰‹å†™ä¸€ä¸ªè‡ªåŠ¨æ„å»ºå‘å¸ƒçš„å°å·¥å…·ã€‚ æœ¬ç¯‡åšå®¢å°±æ˜¯åŸºäºä¸Šé¢çš„æƒ³æ³•ï¼Œç»™å¤§å®¶ä»‹ç»ç¼–å†™ä¸€ä¸ªç®€æ´çš„è‡ªåŠ¨åŒ–å·¥å…·çš„å…·ä½“æ­¥éª¤ä¸æ ¸å¿ƒè¦ç‚¹ã€‚åœ¨ç¼–å†™æœ¬åšå®¢æ—¶ï¼Œæˆ‘ä¹ŸåŸºäºè¿™æ ·çš„æƒ³æ³•å¼€å‘äº†ä¸€æ¬¾Macä¸Šçš„iOSè‡ªåŠ¨æ„å»ºï¼Œæ‰“åŒ…ï¼Œå‘å¸ƒå·¥å…·ï¼Œå¹¶ä¸”å°†ä»£ç å¼€æºåœ¨Githubï¼Œå¦‚æœæœ‰å…´è¶£ï¼Œä½ ä¹Ÿå¯ä»¥ä½œä¸ºå‚è€ƒã€‚ äºŒã€éœ€æ±‚åˆ†æå¼€å‘å·¥å…·ä¹Ÿæ˜¯ä¸€ç§äº§å“ï¼Œåœ¨å¼€å§‹åšä¸€ä»¶äº§å“ä¹‹å‰ï¼Œéœ€æ±‚åˆ†ææ˜¯ååˆ†é‡è¦çš„æ­¥éª¤ã€‚å•†ä¸šäº§å“çš„éœ€æ±‚è€…æ˜¯ç”¨æˆ·ï¼Œè€Œå¼€å‘å·¥å…·çš„éœ€æ±‚è€…å°±æ˜¯ä½ è‡ªå·±ã€‚é¦–å…ˆï¼Œç»“åˆå·¥ä½œéœ€è¦ï¼Œä¸€æ¬¾è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·åº”è¯¥è‡³å°‘æ»¡è¶³å¦‚ä¸‹è¿™äº›åŠŸèƒ½éœ€æ±‚ï¼š 1.å®ƒåº”è¯¥æ”¯æŒå¤šä¸ªé¡¹ç›®åŒæ—¶è¿›è¡Œè‡ªåŠ¨åŒ–æ„å»ºã€‚ 2.åº”è¯¥å¯ä»¥æ–¹ä¾¿çš„æ–°å¢ä¸åˆ é™¤é¡¹ç›®ã€‚ 3.å®ƒåº”è¯¥å…·å¤‡Gitæ“ä½œèƒ½åŠ›ï¼Œè‡ªåŠ¨é€‰æ‹©åˆé€‚çš„åˆ†æ”¯è¿›è¡Œæ„å»ºã€‚ 4.å®ƒéœ€è¦è°ƒç”¨Xcodeå‘½ä»¤æ¥å®Œæˆæ‰“åŒ…å·¥ä½œã€‚ 5.å®ƒå…·å¤‡å‘å¸ƒåˆ°ç¬¬ä¸‰æ–¹å¹³å°çš„èƒ½åŠ›(ä¾‹å¦‚è’²å…¬è‹±)ã€‚ 6.å®ƒå¯ä»¥çµæ´»çš„è¿›è¡Œæ¨¡å¼é…ç½®ï¼ŒGitæ¨¡å—ï¼ŒXcodeæ„å»ºæ¨¡å—å’Œå‘å¸ƒæ¨¡å—å¯ä»¥è‡ªç”±ç»„åˆã€‚ 7.å®ƒåº”è¯¥æœ‰ä¸€ä¸ªè¾“å‡ºçª—å£ï¼Œå¯ä»¥è®©ä½¿ç”¨è€…è·å–æ„å»ºçš„è¿›åº¦ä»¥åŠlogæ—¥å¿—ã€‚ 8.å®ƒæœ‰è®°å¿†åŠŸèƒ½ï¼Œä¼šå°†é…ç½®ä¿¡æ¯ä¿å­˜åˆ°æœ¬åœ°ã€‚ ä¸Šé¢åˆ—å‡ºçš„åŠŸèƒ½ç‚¹æ˜¯è¿™ä¸ªè‡ªåŠ¨åŒ–æ„å»ºå·¥å…·çš„ä¸€äº›åŸºç¡€åŠŸèƒ½ï¼Œå®ç°äº†è¿™äº›åŠŸèƒ½ï¼Œä½ çš„è½¯ä»¶ä¾¿å¯ä»¥æ­£å¼çš„æŠ•å…¥ä½¿ç”¨ï¼Œä½†æ˜¯å®ƒå¹¶ä¸å®Œå–„ï¼Œä½ å¯ä»¥åœ¨è‡ªå·±è§„åˆ’çš„ç¬¬äºŒç‰ˆï¼Œç¬¬ä¸‰ç‰ˆä¸­ç»§ç»­ä¸°å¯ŒåŠŸèƒ½ï¼Œä¼˜åŒ–ä½“éªŒã€‚ ä¸‰ã€æŠ€æœ¯åˆ†ææ˜ç¡®äº†éœ€æ±‚ï¼Œä½ ä¸‹ä¸€æ­¥éœ€è¦è€ƒè™‘çš„ä¾¿æ˜¯å®ç°è¿™äº›éœ€æ±‚æ‰€éœ€è¦çš„æŠ€æœ¯ã€‚ 1.æ”¯æŒå¤šä¸ªé¡¹ç›®åŒæ—¶è¿›è¡Œè‡ªåŠ¨åŒ–æ„å»ºã€‚åœ¨ç•Œé¢ä¸Šï¼Œå¯ä»¥é‡‡ç”¨åˆ—è¡¨çš„æ–¹å¼è¿›è¡Œå·²æ·»åŠ é¡¹ç›®çš„å±•ç¤ºã€‚NSTableViewæ˜¯ä¸€ä¸ªå¾ˆå¥½é€‰æ‹©ï¼Œå…¶ä½¿ç”¨æ–¹ä¾¿ï¼Œç»“åˆxibæ–‡ä»¶æ¥ç¼–å†™cellï¼Œå…¶å¼€å‘æ•ˆç‡ä¹Ÿååˆ†é«˜ã€‚å…³äºè¿›è¡Œå¤šä¸ªé¡¹ç›®çš„åŒæ—¶æ„å»ºï¼Œå¯ä»¥é‡‡ç”¨å¤šçº¿ç¨‹ç¼–ç¨‹æŠ€æœ¯ï¼Œåœ¨Objective-Cä¸­ï¼ŒNSOperationQueueå¯ä»¥æ–¹ä¾¿çš„è¿›è¡Œå¤šçº¿ç¨‹ä»»åŠ¡ç®¡ç†ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒæ¥å®ç°å¼‚æ­¥ç¼–ç¨‹ã€‚ 2.æ–°å¢ä¸åˆ é™¤é¡¹ç›®ã€‚å¯¹äºiOSå·¥ç¨‹çš„è‡ªåŠ¨æ„å»ºï¼Œæ–°å¢å’Œåˆ é™¤é¡¹ç›®æ— éå°±æ˜¯ä¿å­˜æˆ–åˆ é™¤xcodeæ–‡ä»¶çš„è·¯å¾„ï¼Œå½“ç„¶ï¼Œä½ å¯ä»¥ä¹Ÿéœ€è¦ä¸€äº›é™„å¸¦çš„æ•°æ®ç”¨äºæ˜¾ç¤ºï¼Œä¾‹å¦‚é¡¹ç›®åç­‰ã€‚ 3.æ“ä½œGitã€‚å®‰è£…äº†Xcodeå·¥å…·ï¼ŒGitå·¥å…·ä¼šè¢«è‡ªåŠ¨çš„å®‰è£…ã€‚ä½ å¯ä»¥ç›´æ¥åœ¨ç»ˆç«¯é€šè¿‡å‘½ä»¤è¡Œæ¥è°ƒç”¨Gitå‘½ä»¤ï¼Œä½ å¯ä»¥ä½¿ç”¨Foundationæ¡†æ¶ä¸­çš„NSAppleScriptç±»æ¥åœ¨OS Xå¹³å°è½¯ä»¶ä¸­æ‰§è¡Œè„šæœ¬å‘½ä»¤ï¼Œå…³äºGitæ¨¡å—ï¼Œä½ éœ€è¦ä½¿ç”¨åˆ°çš„å‘½ä»¤å¦‚ä¸‹ï¼š â‘ æ‹‰å–é¡¹ç›®æ‰€æœ‰åˆ†æ”¯ï¼šgit branch â‘¡è¿›è¡Œåˆ†æ”¯çš„åˆ‡æ¢ï¼šgit checkout \\[åˆ†æ”¯å\\] â‘¢ä»è¿œç«¯æ‹‰å–ä»£ç ï¼šgit pull 4.ä½¿ç”¨Xcodeå‘½ä»¤æ¥è¿›è¡Œå·¥ç¨‹çš„æ„å»ºã€‚å’Œæ“ä½œGitå‘½ä»¤ç±»ä¼¼ï¼Œä½ éœ€è¦ä½¿ç”¨åˆ°çš„Xcodeçš„æ„å»ºå‘½ä»¤å¦‚ä¸‹ï¼š â‘ æ¸…ç†å·¥ç¨‹ï¼šxcodebuild clean -\\[å·¥ç¨‹ç±»å‹\\] \\[å·¥ç¨‹åœ°å€\\] -scheme \\[schemeåç§°\\] CONFIGURATION=\\[DEBUGæ¨¡å¼\\] â‘¡å¯¼å‡ºarchiveæ–‡ä»¶ï¼šxcodebuild archive -\\[å·¥ç¨‹ç±»å‹\\] \\[å·¥ç¨‹åœ°å€\\] -scheme \\[schemeåç§°\\] -archivePath \\[å¯¼å‡ºè·¯å¾„\\] CONFIGURATION=\\[DEBUGæ¨¡å¼\\] â‘¢å¯¼å‡ºIPAå®‰è£…åŒ…ï¼šxcodebuild -exportArchive -archivePath \\[archiveæ–‡ä»¶è·¯å¾„\\] -exportPath \\[å¯¼å‡ºè·¯å¾„\\] exportOptionsPlist \\[é…ç½®plistæ–‡ä»¶\\] 5.å‘å¸ƒåˆ°ç¬¬ä¸‰æ–¹å¹³å°è¿™ä¸€æ­¥å…¶å®å°±æ˜¯IPAå®‰è£…åŒ…çš„ä¸Šä¼ ï¼Œä½ å¯ä»¥é•¿ä¼ åˆ°è’²å…¬è‹±å¹³å°ä½œä¸ºç§æœ‰é¡¹ç›®ä¾›æµ‹è¯•äººå‘˜ä½¿ç”¨ï¼Œä½ ä¹Ÿå¯ä»¥ä¸Šä¼ åˆ°å…¬å¸è‡ªå·±çš„æœåŠ¡å™¨ï¼ŒAFNetworkingæ˜¯ä¸€ä¸ªåŒæ—¶æ”¯æŒiOSå’ŒOS Xçš„ç½‘ç»œç¬¬ä¸‰æ–¹åº“ï¼Œä½ å¯ä»¥é€‰æ‹©ä½¿ç”¨å®ƒæ¥ä¸Šä¼ æ–‡ä»¶ã€‚ 6.çµæ´»çš„ç»„åˆæ¨¡å—ã€‚è¿™éƒ¨åˆ†å°±å®Œå…¨æ˜¯ä»£ç é€»è¾‘äº†ï¼Œåœ¨è®¾è®¡æ—¶ï¼Œä½ å¯ä»¥å°†æ¯ä¸ªæ¨¡å—å°è£…æˆå…·ä½“çš„ä»»åŠ¡ï¼Œä»»åŠ¡ä¹‹é—´åªèƒ½é¡ºåºè¿›è¡Œæ‰§è¡Œï¼Œç„¶åè‡ªç”±ç»„åˆè¿™äº›ä»»åŠ¡å³å¯ã€‚ 7.è¾“å‡ºçª—å£ã€‚ä½¿ç”¨NSTextViewæ¥æ˜¾ç¤ºè¾“å‡ºä¿¡æ¯ï¼Œæ— è®ºæ˜¯æ‰§è¡Œè„šæœ¬ï¼Œè¿˜æ˜¯ä¸Šä¼ æ–‡ä»¶ï¼Œå¦‚æœå‡ºé”™ï¼Œéƒ½ä¼šæœ‰ä¿¡æ¯åé¦ˆã€‚ 8.è®°å¿†åŠŸèƒ½ã€‚ä½ å¯ä»¥é€‰æ‹©ä½¿ç”¨æ•°æ®åº“æ¥å­˜å‚¨æ¯ä¸ªé¡¹ç›®çš„ä¿¡æ¯ï¼Œå› ä¸ºæ•°æ®é‡å¹¶ä¸å¤§ï¼Œæˆ‘åœ¨å¼€å‘è¿™ä¸ªè½¯ä»¶æ—¶ï¼Œé‡‡ç”¨çš„æ˜¯å½’æ¡£çš„åŸç†æ¥è¿›è¡Œæ•°æ®çš„æŒä¹…åŒ–ã€‚ å››ã€ç•Œé¢è®¾è®¡åœ¨Xcodeä¸­ï¼Œä½¿ç”¨storyboardå¼€å‘ç•Œé¢æ˜¯ä¸€ä»¶ä»€ä¹ˆç•…å¿«çš„äº‹æƒ…ã€‚åœ¨å¼€å‘é¡¹ç›®çš„ä¸»ç•Œé¢æ—¶ï¼Œæˆ‘å‚ç…§äº†SourceTressçš„è®¾è®¡ï¼Œä¹Ÿæ„Ÿè°¢ [@é­”ç¬›](https://my.oschina.net/u/157488) æä¾›çš„ç•Œé¢æ€è·¯ã€‚æˆ‘æƒ³ä½œä¸ºå¼€å‘è€…çš„å·¥å…·æ— éœ€ç»šä¸½çš„å¤–è¡¨ï¼Œç®€çº¦æ˜¯å®ç”¨ï¼Œç„¶åçœ‹ä¸Šå»èˆ’æœå°±ç®—è¾¾åˆ°è¦æ±‚ã€‚ä¸»é¡µé¢æˆªå›¾å¦‚ä¸‹ï¼Œå…¶ä¹Ÿååˆ†ç®€å•ï¼Œåªæ˜¯ä½œä¸ºæ•°æ®çš„å±•ç¤ºã€‚ æ·»åŠ å·¥ç¨‹ç•Œé¢æˆ‘é‡‡ç”¨çš„æ˜¯å¼¹å‡ºçª—å£çš„æ¨¡å¼ï¼Œæ­£å¦‚ä¸Šé¢åˆ†æï¼Œæ·»åŠ å·¥ç¨‹çš„å®è´¨å°±æ˜¯æ‹¿åˆ°Xcodeé¡¹ç›®æ–‡ä»¶çš„åœ°å€ï¼Œç•Œé¢æ•ˆæœå¦‚ä¸‹ï¼š é¡¹ç›®è¯¦æƒ…ç•Œé¢ç•¥å¾®å¤æ‚ï¼Œå…¶ä¸­éœ€è¦é…ç½®ç¼–è¯‘æ¨¡å—ï¼ŒGitæ¨¡å—å’Œå‘å¸ƒæ¨¡å—ï¼Œç•Œé¢å¦‚ä¸‹ï¼š å…³äºé€»è¾‘ä¸åŠŸèƒ½çš„ç¼–å†™ï¼Œä»£ç è¾ƒå¤šï¼Œéœ€è¦çš„æœ‹å‹å¯ä»¥è‡ªåŠ¨æŸ¥çœ‹æºç ã€‚ äº”ã€æ‰©å±•ä¸æºç Jenkinsæ˜¯ä¸€ä¸ªæŒç»­é›†æˆä¸å‘å¸ƒè½¯ä»¶çš„å¹³å°ã€‚åç»­ä½ å¯ä»¥ä¸ºä½ çš„è‡ªåŠ¨æ„å»ºå·¥å…·æ·»åŠ è½®è¯¢æ‰“åŒ…çš„åŠŸèƒ½ï¼Œå°†å…¶è¿è¡Œåœ¨ä¸€å°ä½œä¸ºæœåŠ¡å™¨çš„Macç”µè„‘ä¸Šï¼Œå®ƒå°±æ˜¯å…·æœ‰äº†æŒç»­é›†æˆåŠŸèƒ½ã€‚ è½¯ä»¶ä¸‹è½½åœ°å€ï¼šhttp://zyhshao.github.io/AutoBuild/welcome.htmlã€‚ githubæºç ï¼šhttps://github.com/ZYHshao/AutoBuildã€‚ æ¬¢è¿starO(âˆ©_âˆ©)O æ¬¢è¿æŒ‡æ•™ å…±åŒå­¦ä¹ ","categories":[{"name":"å°ç å·¥å…·","slug":"å°ç å·¥å…·","permalink":"http://huishao.cc/categories/å°ç å·¥å…·/"}],"tags":[],"keywords":[{"name":"å°ç å·¥å…·","slug":"å°ç å·¥å…·","permalink":"http://huishao.cc/categories/å°ç å·¥å…·/"}]},{"title":"OS Xå¼€å‘ï¼šNSProgressIndicatorè¿›åº¦æŒ‡ç¤ºå™¨æ§ä»¶","slug":"351OS Xå¼€å‘ï¼šNSProgressIndicatorè¿›åº¦æŒ‡ç¤ºå™¨æ§ä»¶","date":"2017-07-20T16:00:00.000Z","updated":"2021-07-15T02:23:04.328Z","comments":true,"path":"2017/07/21/351OS Xå¼€å‘ï¼šNSProgressIndicatorè¿›åº¦æŒ‡ç¤ºå™¨æ§ä»¶/","link":"","permalink":"http://huishao.cc/2017/07/21/351OS Xå¼€å‘ï¼šNSProgressIndicatorè¿›åº¦æŒ‡ç¤ºå™¨æ§ä»¶/","excerpt":"","text":"OS Xå¼€å‘ï¼šNSProgressIndicatorè¿›åº¦æŒ‡ç¤ºå™¨æ§ä»¶NSProgressIndicatoræ˜¯OS Xå¹³å°ä¸Šçš„æ´»åŠ¨æŒ‡ç¤ºå™¨æ§ä»¶ï¼Œå¼€å‘è€…å¯ä»¥è®¾ç½®åœ†ç¯æ ·å¼å’Œè¿›åº¦æ¡æ ·å¼ä¸¤ç§ã€‚ 1234567891011121314151617- (void)viewDidLoad &#123; [super viewDidLoad]; NSProgressIndicator * progressIndicator = [[NSProgressIndicator alloc]initWithFrame:CGRectMake(30, 100, 200, 10)]; //è®¾ç½®æ˜¯ç²¾å‡†çš„è¿›åº¦æ¡è¿˜æ˜¯æ¨¡ç³Šçš„æŒ‡ç¤ºå™¨ progressIndicator.indeterminate = YES; //æ˜¯å¦è´å¡å°”é£æ ¼ progressIndicator.bezeled = YES; //è®¾ç½®æ§åˆ¶å™¨å°ºå¯¸ progressIndicator.controlSize = NSControlSizeSmall; //è®¾ç½®å½“å‰è¿›åº¦ progressIndicator.doubleValue = 5; //è®¾ç½®é£æ ¼ progressIndicator.style = NSProgressIndicatorBarStyle; //è®¾ç½®æ˜¯å¦å½“åŠ¨ç”»åœæ­¢æ—¶éšè— progressIndicator.displayedWhenStopped = YES; [self.view addSubview:progressIndicator];&#125; æ•ˆæœå¦‚å›¾ï¼š NSProgressIndicatorç±»ä¸­å±æ€§æ–¹æ³•è§£æå¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839//è®¾ç½®æ˜¯å¦æ˜¯æ¨¡ç³Šæ¨¡å¼ ç‰§æˆ·æ¨¡å¼ä¸‹ï¼Œä¸æ˜¾ç¤ºå…·ä½“çš„è¿›åº¦ï¼Œé€šè¿‡åŠ¨ç”»æç¤ºç”¨æˆ·æ­£åœ¨åŠ è½½@property (getter=isIndeterminate) BOOL indeterminate; //è®¾ç½®æ˜¯å¦è´å¡å°”é£æ ¼@property (getter=isBezeled) BOOL bezeled;//æŒ‡ç¤ºå™¨çš„æ§åˆ¶è‰²@property NSControlTint controlTint;//æŒ‡ç¤ºå™¨çš„å°ºå¯¸è®¾ç½®/*typedef NS_ENUM(NSUInteger, NSControlSize) &#123; NSControlSizeRegular,//æ ‡å‡† NSControlSizeSmall,//å° NSControlSizeMini,//è¿·ä½ &#125;;*/@property NSControlSize controlSize;//è®¾ç½®å½“å‰è¿›åº¦å€¼@property double doubleValue;//è®¾ç½®è¿›åº¦å€¼å¢é‡ï¼Œå³åŸå§‹å€¼å¤¹ç€deltaå€¼- (void)incrementBy:(double)delta;//è¿›åº¦æ¡æœ€å°å€¼@property double minValue;//è¿›åº¦æ¡æœ€å¤§å€¼@property double maxValue;//æ˜¯å¦åœ¨å¤šçº¿ç¨‹ä¸­æ‰§è¡ŒåŠ¨ç”»@property BOOL usesThreadedAnimation;//å¼€å§‹åŠ¨ç”»- (void)startAnimation:(nullable id)sender;//ç»“æŸåŠ¨ç”»- (void)stopAnimation:(nullable id)sender;//è®¾ç½®é£æ ¼/*typedef NS_ENUM(NSUInteger, NSProgressIndicatorStyle) &#123; NSProgressIndicatorBarStyle = 0, //è¿›åº¦æ¡é£æ ¼ NSProgressIndicatorSpinningStyle = 1 //é£ç«è½®é£æ ¼&#125;;*/@property NSProgressIndicatorStyle style;//è®¾ç½®åŠ¨ç”»åœæ­¢æ—¶è¿›åº¦æ¡æ˜¯å¦ä¾ç„¶æ˜¾ç¤º@property (getter=isDisplayedWhenStopped) BOOL displayedWhenStopped;","categories":[{"name":"macOSå¼€å‘","slug":"macOSå¼€å‘","permalink":"http://huishao.cc/categories/macOSå¼€å‘/"}],"tags":[],"keywords":[{"name":"macOSå¼€å‘","slug":"macOSå¼€å‘","permalink":"http://huishao.cc/categories/macOSå¼€å‘/"}]},{"title":"OS Xå¼€å‘ï¼šNSTextFieldæ–‡æœ¬è¾“å…¥æ¡†","slug":"350OS Xå¼€å‘ï¼šNSTextFieldæ–‡æœ¬è¾“å…¥æ¡†","date":"2017-07-18T16:00:00.000Z","updated":"2021-07-15T02:22:10.584Z","comments":true,"path":"2017/07/19/350OS Xå¼€å‘ï¼šNSTextFieldæ–‡æœ¬è¾“å…¥æ¡†/","link":"","permalink":"http://huishao.cc/2017/07/19/350OS Xå¼€å‘ï¼šNSTextFieldæ–‡æœ¬è¾“å…¥æ¡†/","excerpt":"","text":"OS Xå¼€å‘ï¼šNSTextFieldæ–‡æœ¬è¾“å…¥æ¡†NSTextFieldç»„ä»¶å¯ä»¥æ¥æ”¶ç”¨æˆ·çš„è¾“å…¥ï¼Œå’ŒUITextFieldä¸åŒï¼Œå…¶å¯ä»¥å°†ç”¨æˆ·çš„è¾“å…¥è¿›è¡Œå¤šè¡Œæ˜¾ç¤ºã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920- (void)viewDidLoad &#123; [super viewDidLoad]; //åˆ›å»º MyTextField * textField = [[MyTextField alloc]initWithFrame:NSMakeRect(100, 200, 300, 40)]; //è®¾ç½®é»˜è®¤æç¤ºæ–‡å­— textField.placeholderString = @\"é»˜è®¤æ–‡å­—\"; //è®¾ç½®èƒŒæ™¯ textField.backgroundColor = [NSColor redColor]; //è®¾ç½®æ˜¯å¦æ¸²æŸ“èƒŒæ™¯ textField.drawsBackground = YES; //è®¾ç½®æ–‡å­—é¢œè‰² textField.textColor = [NSColor blueColor]; //è®¾ç½®æ˜¯å¦è¾¹æ¡† textField.bordered = YES; //è®¾ç½®æ˜¯å¦è´å¡å°” textField.bezeled = YES; //è®¾ç½®ä»£ç† textField.delegate = self; [self.view addSubview:textField];&#125; NSTextFieldç±»è§£æå¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849//è®¾ç½®é»˜è®¤æç¤ºæ–‡å­—@property (nullable, copy) NSString *placeholderString;//å¯Œæ–‡æœ¬æç¤ºæ–‡å­—@property (nullable, copy) NSAttributedString *placeholderAttributedString;//è®¾ç½®èƒŒæ™¯è‰²@property (nullable, copy) NSColor *backgroundColor;//è®¾ç½®æ˜¯å¦æ¸²æŸ“èƒŒæ™¯è‰²@property BOOL drawsBackground;//è®¾ç½®æ–‡å­—é¢œè‰²@property (nullable, copy) NSColor *textColor;//è®¾ç½®æ˜¯å¦æœ‰è¾¹æ¡†@property (getter=isBordered) BOOL bordered;//è®¾ç½®è´å¡å°”è¾¹æ¡†@property (getter=isBezeled) BOOL bezeled;//è®¾ç½®æ˜¯å¦å¯ç¼–è¾‘@property (getter=isEditable) BOOL editable;//è®¾ç½®æ˜¯å¦å¯é€‰æ‹©æ–‡å­—@property (getter=isSelectable) BOOL selectable;//é€‰æ‹©æ–‡æœ¬- (void)selectText:(nullable id)sender;//ä»£ç†@property (nullable, assign) id&lt;NSTextFieldDelegate&gt; delegate;//æ˜¯å¦å…è®¸ç§°ä¸ºç¬¬ä¸€å“åº”@property (readonly) BOOL acceptsFirstResponder;//è®¾ç½®è´å¡å°”é£æ ¼/*typedef NS_ENUM(NSUInteger, NSTextFieldBezelStyle) &#123; NSTextFieldSquareBezel = 0, NSTextFieldRoundedBezel = 1&#125;;*/@property NSTextFieldBezelStyle bezelStyle;//å­ç±»å¯ä»¥é‡å†™å¦‚ä¸‹æ–¹æ³•ï¼š//å³å°†è¿›å…¥ç¼–è¾‘çŠ¶æ€æ—¶è¢«è°ƒç”¨ è¿”å›å€¼å†³å®šæ˜¯å¦å…è®¸ç¼–è¾‘- (BOOL)textShouldBeginEditing:(NSText *)textObject;//å³å°†ç»“æŸç¼–è¾‘çŠ¶æ€æ—¶è°ƒç”¨ è¿”å›å€¼å†³å®šæ˜¯å¦å…è®¸ç»“æŸç¼–è¾‘- (BOOL)textShouldEndEditing:(NSText *)textObject;//å·²ç»å¼€å§‹ç¼–è¾‘æ—¶è°ƒç”¨- (void)textDidBeginEditing:(NSNotification *)notification;//å·²ç»ç»“æŸç¼–è¾‘æ—¶è°ƒç”¨- (void)textDidEndEditing:(NSNotification *)notification;//æ–‡æœ¬æ”¹å˜æ—¶è°ƒç”¨- (void)textDidChange:(NSNotification *)notification;//ä¸‹é¢è¿™äº›æ–¹æ³•ç”¨æ¥å¿«æ·åˆ›å»ºNSTextField+ (instancetype)labelWithString:(NSString *)stringValue;+ (instancetype)wrappingLabelWithString:(NSString *)stringValue;+ (instancetype)textFieldWithString:(nullable NSString *)stringValue;+ (instancetype)labelWithAttributedString:(NSAttributedString *)attributedStringValue;","categories":[{"name":"macOSå¼€å‘","slug":"macOSå¼€å‘","permalink":"http://huishao.cc/categories/macOSå¼€å‘/"}],"tags":[],"keywords":[{"name":"macOSå¼€å‘","slug":"macOSå¼€å‘","permalink":"http://huishao.cc/categories/macOSå¼€å‘/"}]},{"title":"OS Xå¼€å‘ï¼šNSButtonæŒ‰é’®æ§ä»¶åº”ç”¨","slug":"349OS Xå¼€å‘ï¼šNSButtonæŒ‰é’®æ§ä»¶åº”ç”¨","date":"2017-07-17T16:00:00.000Z","updated":"2021-07-15T02:20:23.974Z","comments":true,"path":"2017/07/18/349OS Xå¼€å‘ï¼šNSButtonæŒ‰é’®æ§ä»¶åº”ç”¨/","link":"","permalink":"http://huishao.cc/2017/07/18/349OS Xå¼€å‘ï¼šNSButtonæŒ‰é’®æ§ä»¶åº”ç”¨/","excerpt":"","text":"OS Xå¼€å‘ï¼šNSButtonæŒ‰é’®æ§ä»¶åº”ç”¨NSButtonæ§ä»¶ç”¨æ¥åˆ›å»ºåŠŸèƒ½æŒ‰é’®ï¼Œå’ŒUIButtonç›¸æ¯”ï¼Œå…¶æ ·å¼è¦ä¸°å¯Œè®¸å¤šã€‚NSButtonç»§æ‰¿è‡ªNSControlï¼Œå…¶ä½¿ç”¨setTargetä¸setActionæ¥æ·»åŠ è§¦å‘æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š 1234NSButton * btn = [[NSButton alloc]initWithFrame:CGRectMake(50, 300, 90, 25)];[btn setTarget:self];[btn setAction:@selector(click)];[self.view addSubview:btn]; NSButtonç±»ä¸­å¸¸ç”¨å±æ€§å’Œæ–¹æ³•è§£æå¦‚ä¸‹: 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263//è®¾ç½®æŒ‰é’®æ ‡é¢˜@property (copy) NSString *title;//è®¾ç½®æŒ‰é’®å¼€å¯çŠ¶æ€çš„æ ‡é¢˜@property (copy) NSString *alternateTitle;//è®¾ç½®æŒ‰é’®å›¾ç‰‡@property (nullable, strong) NSImage *image;//è®¾ç½®æŒ‰é’®å¼€å¯çŠ¶æ€å›¾ç‰‡@property (nullable, strong) NSImage *alternateImage;//è®¾ç½®æŒ‰é’®å›¾ç‰‡ä½ç½®/*typedef NS_ENUM(NSUInteger, NSCellImagePosition) &#123; NSNoImage = 0, //æ— å›¾ç‰‡ NSImageOnly = 1, //åªæœ‰å›¾ç‰‡ NSImageLeft = 2, //å›¾ç‰‡åœ¨å·¦ä¾§ NSImageRight = 3, //å›¾ç‰‡åœ¨å³ä¾§ NSImageBelow = 4, //å›¾ç‰‡åœ¨ä¸‹ä¾§ NSImageAbove = 5, //å›¾ç‰‡åœ¨ä¸Šä¾§ NSImageOverlaps = 6, //å›¾ç‰‡é‡å  NSImageLeading API_AVAILABLE(macosx(10.12)) = 7, //æ­£æ–¹å‘ NSImageTrailing API_AVAILABLE(macosx(10.12)) = 8 //é€†æ–¹å‘&#125;;*/@property NSCellImagePosition imagePosition;//è®¾ç½®å›¾ç‰‡ç¼©æ”¾æ¨¡å¼/*typedef NS_ENUM(NSUInteger, NSImageScaling) &#123; NSImageScaleProportionallyDown = 0, // ä¸‹æ–¹ç¼©æ”¾ NSImageScaleAxesIndependently, // æ•´ä½“ç¼©æ”¾ NSImageScaleNone, // ä¸ç¼©æ”¾. NSImageScaleProportionallyUpOrDown, // ä¸Šä¸‹ç¼©æ”¾ NSScaleProportionally NS_ENUM_DEPRECATED_MAC(10_0, 10_10, \"Use NSImageScaleProportionallyDown instead\") = 0, NSScaleToFit NS_ENUM_DEPRECATED_MAC(10_0, 10_10, \"Use NSImageScaleAxesIndependently instead\"), NSScaleNone NS_ENUM_DEPRECATED_MAC(10_0, 10_10, \"Use NSImageScaleNone instead\")&#125;;*/@property NSImageScaling imageScaling NS_AVAILABLE_MAC(10_5);//å›¾ç‰‡æ˜¯å¦ç¯ç»•æ ‡é¢˜@property BOOL imageHugsTitle;//è®¾ç½®æŒ‰é’®çŠ¶æ€/*enum &#123; NSMixedState = -1, //æ··åˆçŠ¶æ€ NSOffState = 0, //å…³é—­çŠ¶æ€ NSOnState = 1, //å¼€å¯çŠ¶æ€&#125;;*/@property NSInteger state;//è®¾ç½®æ˜¯å¦æ˜¾ç¤ºè¾¹æ¡†@property (getter=isBordered) BOOL bordered;//è®¾ç½®æŒ‰é’®æ˜¯å¦é€æ˜@property (getter=isTransparent) BOOL transparent;//è®¾ç½®å¿«æ·é”®@property (copy) NSString *keyEquivalent;//è®¾ç½®å¯Œæ–‡æœ¬æ ‡é¢˜@property (copy) NSAttributedString *attributedTitle;@property (copy) NSAttributedString *attributedAlternateTitle;//è®¾ç½®è¾¹æ¡†é£æ ¼@property NSBezelStyle bezelStyle;//è®¾ç½®æ˜¯å¦å½“é¼ æ ‡ç§»åŠ¨åˆ°æŒ‰é’®ä¸Šæ—¶æ˜¾ç¤ºè¾¹æ¡†@property BOOL showsBorderOnlyWhileMouseInside;//è®¾ç½®æŒ‰é’®å£°éŸ³@property (nullable, strong) NSSound *sound; ä¸‹é¢æ˜¯ä¸€äº›ä¾¿æ·åˆ›å»ºæŒ‰é’®çš„æ–¹æ³•ï¼š 12345678910//åˆ›å»ºæ ‡å‡†çš„æŒ‰é’® åŒ…æ‹¬æ ‡é¢˜å’Œå›¾ç‰‡+ (instancetype)buttonWithTitle:(NSString *)title image:(NSImage *)image target:(nullable id)target action:(nullable SEL)action;//åˆ›å»ºæ–‡å­—æŒ‰é’®+ (instancetype)buttonWithTitle:(NSString *)title target:(nullable id)target action:(nullable SEL)action;//åˆ›å»ºå›¾ç‰‡æŒ‰é’®+ (instancetype)buttonWithImage:(NSImage *)image target:(nullable id)target action:(nullable SEL)action;//åˆ›å»ºå¤é€‰æ¡†æŒ‰é’®+ (instancetype)checkboxWithTitle:(NSString *)title target:(nullable id)target action:(nullable SEL)action;//åˆ›å»ºå•é€‰æ¡†æŒ‰é’®+ (instancetype)radioButtonWithTitle:(NSString *)title target:(nullable id)target action:(nullable SEL)action;","categories":[{"name":"macOSå¼€å‘","slug":"macOSå¼€å‘","permalink":"http://huishao.cc/categories/macOSå¼€å‘/"}],"tags":[],"keywords":[{"name":"macOSå¼€å‘","slug":"macOSå¼€å‘","permalink":"http://huishao.cc/categories/macOSå¼€å‘/"}]},{"title":"OS X å¼€å‘ï¼šæ‰“å¼€æ–‡ä»¶é¢æ¿NSOpenPanelåº”ç”¨","slug":"348OS X å¼€å‘ï¼šæ‰“å¼€æ–‡ä»¶é¢æ¿NSOpenPanelåº”ç”¨","date":"2017-07-16T16:00:00.000Z","updated":"2021-07-15T02:17:45.789Z","comments":true,"path":"2017/07/17/348OS X å¼€å‘ï¼šæ‰“å¼€æ–‡ä»¶é¢æ¿NSOpenPanelåº”ç”¨/","link":"","permalink":"http://huishao.cc/2017/07/17/348OS X å¼€å‘ï¼šæ‰“å¼€æ–‡ä»¶é¢æ¿NSOpenPanelåº”ç”¨/","excerpt":"","text":"OS X å¼€å‘ï¼šæ‰“å¼€æ–‡ä»¶é¢æ¿NSOpenPanelåº”ç”¨åœ¨Macæ¡Œé¢è½¯ä»¶å¼€å‘ä¸­ï¼Œå¦‚æœæ¶‰åŠåˆ°å¯¹æ–‡ä»¶çš„æ“ä½œï¼Œæ— è®ºæ˜¯æ–°å»ºæ–‡ä»¶è¿˜æ˜¯é€‰æ‹©æˆ–è¯»å–æ–‡ä»¶ï¼Œéƒ½ç¦»ä¸å¼€æ–‡ä»¶è·¯å¾„çš„å®šä½ï¼ŒNSOpenPanelç±»æä¾›äº†ç®€æ´çš„æ–‡ä»¶é€‰æ‹©é¢æ¿ï¼Œå…¶ç»§æ‰¿è‡ªNSSavePanel(ä¸€ä¸ªä¸“é—¨ç”¨æ¥å­˜å‚¨æ–‡ä»¶çš„ç±»)ï¼ŒNSOpenPanelçš„ä½¿ç”¨éå¸¸ç®€å•ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213NSOpenPanel * panel = [NSOpenPanel openPanel];//è®¾ç½®æ˜¯å¦è§£æåˆ«åpanel.resolvesAliases = NO;//è®¾ç½®æ˜¯å¦å…è®¸é€‰æ‹©æ–‡ä»¶å¤¹panel.canChooseDirectories = YES;//è®¾ç½®æ˜¯å¦å…è®¸é€‰æ‹©æ–‡ä»¶panel.canChooseFiles = YES;//è®¾ç½®æ˜¯å¦å…è®¸å¤šé€‰panel.allowsMultipleSelection = YES;NSInteger result = [panel runModal];if (result==NSFileHandlingPanelOKButton) &#123; NSLog(@\"%@\",panel.URLs);&#125; åœ¨ä½¿ç”¨runModelæ–¹æ³•å¼¹å‡ºé¢æ¿åï¼Œç”¨æˆ·å¯ä»¥é€‰æ‹©é¢æ¿ä¸­çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š runModelæ–¹æ³•çš„è¿”å›å€¼ä¸ºNSIntegerç±»å‹ï¼Œå…¶æ˜¯ä¸€ä¸ªæšä¸¾å€¼ï¼Œæšä¸¾çš„æ„ä¹‰å¦‚ä¸‹ï¼š 1234enum &#123; NSFileHandlingPanelCancelButton = NSModalResponseCancel,//ç”¨æˆ·ç‚¹å‡»äº†å–æ¶ˆæŒ‰é’® NSFileHandlingPanelOKButton = NSModalResponseOK,//ç”¨æˆ·ç‚¹å‡»äº†OKæŒ‰é’®&#125;;","categories":[{"name":"macOSå¼€å‘","slug":"macOSå¼€å‘","permalink":"http://huishao.cc/categories/macOSå¼€å‘/"}],"tags":[],"keywords":[{"name":"macOSå¼€å‘","slug":"macOSå¼€å‘","permalink":"http://huishao.cc/categories/macOSå¼€å‘/"}]},{"title":"OS Xå¼€å‘NSMenuåº”ç”¨è¯¦è§£","slug":"347OS Xå¼€å‘NSMenuåº”ç”¨è¯¦è§£","date":"2017-07-13T16:00:00.000Z","updated":"2021-07-15T02:15:56.741Z","comments":true,"path":"2017/07/14/347OS Xå¼€å‘NSMenuåº”ç”¨è¯¦è§£/","link":"","permalink":"http://huishao.cc/2017/07/14/347OS Xå¼€å‘NSMenuåº”ç”¨è¯¦è§£/","excerpt":"","text":"OS Xå¼€å‘NSMenuåº”ç”¨è¯¦è§£ä¸€ã€å¼•è¨€NSMenuåœ¨Macæ¡Œé¢è½¯ä»¶å¼€å‘ä¸­å¾€å¾€æœ‰3ä¸ªæ–¹é¢çš„åº”ç”¨ï¼Œä½œä¸ºç¨‹åºçš„ä¸»èœå•æ ä½¿ç”¨ï¼Œä½œä¸ºè§†å›¾é‚®ä»¶èœå•ä½¿ç”¨å’Œä½œä¸ºDockèœå•ä½¿ç”¨ã€‚ äºŒã€ä¸»åº”ç”¨èœå•ä½¿ç”¨Xcodeæ–°å»ºOX Såº”ç”¨æ—¶ï¼Œå¯ä»¥é€‰æ‹©ä½¿ç”¨Storyboardã€‚Storyboardé‡Œé¢ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªèœå•æ ï¼Œä½ å¯ä»¥è‡ªè¡Œåœ¨èœå•ä¸­è¿›è¡Œå¢åˆ æ”¹æ“ä½œï¼Œèœå•ä¸­çš„Itemè§¦å‘æ–¹æ³•ä¹Ÿå¯ä»¥ç›´æ¥ä¸AppDelegateè¿›è¡Œå…³è”ï¼Œå®ç°è‡ªå®šä¹‰çš„èœå•é€»è¾‘ï¼Œå¦‚å›¾ï¼š ä¸‰ï¼šDockèœå•å½“ä¸€æ¬¾Macæ¡Œé¢è½¯ä»¶è¿è¡Œæ—¶ï¼Œä¼šåœ¨Dockæ ä¸Šæ˜¾ç¤ºä¸€ä¸ªå›¾æ ‡ï¼Œå½“åœ¨æ­¤å›¾æ ‡ä¸Šç‚¹å‡»å³é”®æ—¶ï¼Œä¼šå‡ºç°ä¸€ä¸ªDockèœå•ï¼Œè‡ªå®šä¹‰æ­¤Dockèœå•ä¹Ÿååˆ†å®¹æ˜“ï¼Œç›´æ¥åœ¨AppDelegateä¸­é‡å†™å¦‚ä¸‹æ–¹æ³•å³å¯ï¼š 1234567891011121314151617-(NSMenu *)applicationDockMenu:(NSApplication *)sender&#123; NSMenu * menu = [[NSMenu alloc]initWithTitle:@\"Menu\"]; NSMenuItem * item1 = [[NSMenuItem alloc]initWithTitle:@\"èœå•1\" action:@selector(click) keyEquivalent:@\"\"]; item1.target = self; NSMenuItem * item2 = [[NSMenuItem alloc]initWithTitle:@\"èœå•2\" action:@selector(click) keyEquivalent:@\"\"]; item2.target = self; NSMenuItem * item3 = [[NSMenuItem alloc]initWithTitle:@\"èœå•3\" action:@selector(click) keyEquivalent:@\"\"]; NSMenu * subMenu = [[NSMenu alloc]initWithTitle:@\"subMenu\"]; NSMenuItem * item4 = [[NSMenuItem alloc]initWithTitle:@\"èœå•4\" action:@selector(click) keyEquivalent:@\"\"]; item4.target = self; [subMenu addItem:item4]; [menu addItem:item1]; [menu addItem:item2]; [menu addItem:item3]; [menu setSubmenu:subMenu forItem:item3]; return menu;&#125; æ•ˆæœå¦‚ä¸‹ï¼š å››ã€è§†å›¾å³é”®å¼¹å‡ºèœå•è§†å›¾å³é”®å¼¹å‡ºèœå•æ˜¯åŸºäºNSViewè§†å›¾çš„ï¼Œä¾‹å¦‚ï¼š 123456789101112131415161718- (void)viewDidLoad &#123; [super viewDidLoad]; NSMenu * menu = [[NSMenu alloc]initWithTitle:@\"Menu\"]; NSMenuItem * item1 = [[NSMenuItem alloc]initWithTitle:@\"èœå•1\" action:@selector(click) keyEquivalent:@\"\"]; item1.target = self; NSMenuItem * item2 = [[NSMenuItem alloc]initWithTitle:@\"èœå•2\" action:@selector(click) keyEquivalent:@\"\"]; item2.target = self; NSMenuItem * item3 = [[NSMenuItem alloc]initWithTitle:@\"èœå•3\" action:@selector(click) keyEquivalent:@\"\"]; NSMenu * subMenu = [[NSMenu alloc]initWithTitle:@\"subMenu\"]; NSMenuItem * item4 = [[NSMenuItem alloc]initWithTitle:@\"èœå•4\" action:@selector(click) keyEquivalent:@\"\"]; item4.target = self; [subMenu addItem:item4]; [menu addItem:item1]; [menu addItem:item2]; [menu addItem:item3]; [menu setSubmenu:subMenu forItem:item3]; [self.view setMenu:menu];&#125; æ•ˆæœå¦‚ä¸‹ï¼š äº”ã€NSMenuItemè¯¦è§£NSMenuItemæ˜¯èœå•ä¸­çš„æ¯ä¸€ä¸ªèœå•é€‰é¡¹å¯¹è±¡ï¼Œå…¶ä¸­å¸¸ç”¨å±æ€§æ–¹æ³•å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566//è®¾ç½®æ˜¯å¦å¯ç”¨ç”¨æˆ·å¿«æ·é”®+ (void)setUsesUserKeyEquivalents:(BOOL)flag;//è®¾ç½®ç”¨æˆ·å¿«æ·é”®å¯ç”¨çŠ¶æ€+ (BOOL)usesUserKeyEquivalents;//åˆ›å»ºä¸€ä¸ªåˆ†å‰²çº¿+ (NSMenuItem *)separatorItem;//ä½¿ç”¨æ ‡é¢˜ï¼Œå¿«æ·é”®å’Œæ–¹æ³•é€‰æ‹©å™¨æ¥å¯¹Itemè¿›è¡Œåˆå§‹åŒ–- (instancetype)initWithTitle:(NSString *)string action:(nullable SEL)selector keyEquivalent:(NSString *)charCode;//å…¶æ‰€åœ¨çš„èœå•å¯¹è±¡@property (nullable, assign) NSMenu *menu;//å…¶æ˜¯å¦æœ‰å­èœå•@property (readonly) BOOL hasSubmenu;//å­èœå•å¯¹è±¡@property (nullable, strong) NSMenu *submenu;//å¦‚æœæ­¤Itemæ˜¯æŸä¸ªå­èœå•ä¸­çš„ï¼Œæ­¤å±æ€§è·å–ä¸å­èœå•å…³è”çš„çˆ¶item@property (nullable, readonly, assign) NSMenuItem *parentItem;//Itemæ ‡é¢˜@property (copy) NSString *title;//å¯Œæ–‡æœ¬æ ‡é¢˜@property (nullable, copy) NSAttributedString *attributedTitle;//æ˜¯å¦æ˜¯åˆ†éš”çº¿Item@property (getter=isSeparatorItem, readonly) BOOL separatorItem;//ç»‘å®šçš„å¿«æ·é”®@property (copy) NSString *keyEquivalent;//å¿«æ·é”®ç±»å‹/*typedef NS_OPTIONS(NSUInteger, NSEventModifierFlags) &#123; NSEventModifierFlagCapsLock = 1 &lt;&lt; 16, // Caps locké”® NSEventModifierFlagShift = 1 &lt;&lt; 17, // shifté”® NSEventModifierFlagControl = 1 &lt;&lt; 18, // controlé”® NSEventModifierFlagOption = 1 &lt;&lt; 19, // optioné”® NSEventModifierFlagCommand = 1 &lt;&lt; 20, // commandé”® NSEventModifierFlagNumericPad = 1 &lt;&lt; 21, // å°é”®ç›˜ä»»æ„é”® NSEventModifierFlagHelp = 1 &lt;&lt; 22, // å¸®åŠ©é”® NSEventModifierFlagFunction = 1 &lt;&lt; 23, // ä»»æ„åŠŸèƒ½æŒ‰é’®&#125;;*/@property NSEventModifierFlags keyEquivalentModifierMask;//Itemå›¾æ ‡@property (nullable, strong) NSImage *image;//ItemçŠ¶æ€@property NSInteger state;//å¼€å¯çŠ¶æ€ä¸‹çš„å›¾æ ‡@property (null_resettable, strong) NSImage *onStateImage;//å…³é—­çŠ¶æ€ä¸‹çš„å›¾æ ‡@property (nullable, strong) NSImage *offStateImage;//æ··åˆçŠ¶æ€ä¸‹çš„å›¾æ ‡@property (null_resettable, strong) NSImage *mixedStateImage;//æ˜¯å¦æœ‰æ•ˆ@property (getter=isEnabled) BOOL enabled;//æ˜¯å¦å‰ç½®@property (getter=isAlternate) BOOL alternate;//Itemç¼©è¿›çº§åˆ«@property NSInteger indentationLevel;//è®¾ç½®äº¤äº’å“åº”è€…@property (nullable, weak) id target;//è®¾ç½®äº¤äº’ç›¸åº”æ–¹æ³•@property (nullable) SEL action;//è®¾ç½®tagå€¼@property NSInteger tag;//æ˜¯å¦é«˜äº®@property (getter=isHighlighted, readonly) BOOL highlighted;//è®¾ç½®æ˜¯å¦éšè—@property (getter=isHidden) BOOL hidden;//è®¾ç½®æç¤ºæ–‡æœ¬@property (nullable, copy) NSString *toolTip; å…­ã€NSMenuè¯¦è§£12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758//åˆå§‹åŒ–æ–¹æ³•- (instancetype)initWithTitle:(NSString *)title;//æ ‡é¢˜@property (copy) NSString *title;//åœ¨æ‰€åœ¨çš„äº¤äº’ç‚¹å¼¹å‡ºèœå•+ (void)popUpContextMenu:(NSMenu*)menu withEvent:(NSEvent*)event forView:(NSView*)view;+ (void)popUpContextMenu:(NSMenu*)menu withEvent:(NSEvent*)event forView:(NSView*)view withFont:(nullable NSFont*)font;- (BOOL)popUpMenuPositioningItem:(nullable NSMenuItem *)item atLocation:(NSPoint)location inView:(nullable NSView *)view NS_AVAILABLE_MAC(10_6);//è®¾ç½®èœå•æ æ˜¯å¦å¯è§+ (void)setMenuBarVisible:(BOOL)visible;+ (BOOL)menuBarVisible;//çˆ¶èœå•@property (nullable, assign) NSMenu *supermenu;//æ’å…¥Item- (void)insertItem:(NSMenuItem *)newItem atIndex:(NSInteger)index;- (NSMenuItem *)insertItemWithTitle:(NSString *)string action:(nullable SEL)selector keyEquivalent:(NSString *)charCode atIndex:(NSInteger)index;//æ·»åŠ Item- (void)addItem:(NSMenuItem *)newItem;- (NSMenuItem *)addItemWithTitle:(NSString *)string action:(nullable SEL)selector keyEquivalent:(NSString *)charCode;//åˆ é™¤æŸä¸ªä½ç½®çš„Item- (void)removeItemAtIndex:(NSInteger)index;//åˆ é™¤Item- (void)removeItem:(NSMenuItem *)item;//ä¸ºæŸä¸ªItemè®¾ç½®å­èœå•- (void)setSubmenu:(nullable NSMenu *)menu forItem:(NSMenuItem *)item;//åˆ é™¤æ‰€æœ‰Item- (void)removeAllItems;//Itemæ•°ç»„@property (readonly, copy) NSArray&lt;NSMenuItem *&gt; *itemArray;//è·å–Itemä¸ªæ•°@property (readonly) NSInteger numberOfItems;//è·å–æŸä¸ªä½ç½®çš„Item- (nullable NSMenuItem *)itemAtIndex:(NSInteger)index;//è·å–æŸä¸ªItemçš„ä½ç½®- (NSInteger)indexOfItem:(NSMenuItem *)item;- (NSInteger)indexOfItemWithTitle:(NSString *)title;- (NSInteger)indexOfItemWithTag:(NSInteger)tag;- (NSInteger)indexOfItemWithSubmenu:(nullable NSMenu *)submenu;- (NSInteger)indexOfItemWithTarget:(nullable id)target andAction:(nullable SEL)actionSelector;//æ ¹æ®æ ‡é¢˜è·å–item- (nullable NSMenuItem *)itemWithTitle:(NSString *)title;//æ ¹æ®tagè·å–Item- (nullable NSMenuItem *)itemWithTag:(NSInteger)tag;//åˆ·æ–°èœå•- (void)update;//è·å–èœå•é«˜åº¦@property (readonly) CGFloat menuBarHeight;//å–æ¶ˆèœå•- (void)cancelTracking;- (void)cancelTrackingWithoutAnimation;//è·å–é«˜äº®çš„Item@property (nullable, readonly, strong) NSMenuItem *highlightedItem;//æœ€å°å®½åº¦@property CGFloat minimumWidth;//å°ºå¯¸@property (readonly) NSSize size;//å­—ä½“@property (null_resettable, strong) NSFont *font;","categories":[{"name":"macOSå¼€å‘","slug":"macOSå¼€å‘","permalink":"http://huishao.cc/categories/macOSå¼€å‘/"}],"tags":[],"keywords":[{"name":"macOSå¼€å‘","slug":"macOSå¼€å‘","permalink":"http://huishao.cc/categories/macOSå¼€å‘/"}]},{"title":"NSAlertç»„ä»¶åº”ç”¨æ€»ç»“","slug":"346NSAlertç»„ä»¶åº”ç”¨æ€»ç»“","date":"2017-07-12T16:00:00.000Z","updated":"2021-07-15T02:15:13.856Z","comments":true,"path":"2017/07/13/346NSAlertç»„ä»¶åº”ç”¨æ€»ç»“/","link":"","permalink":"http://huishao.cc/2017/07/13/346NSAlertç»„ä»¶åº”ç”¨æ€»ç»“/","excerpt":"","text":"NSAlertç»„ä»¶åº”ç”¨æ€»ç»“ä¸€ã€å¼•è¨€åœ¨æ¡Œé¢è½¯ä»¶å¼€å‘ä¸­ï¼Œå½“ç”¨æˆ·è¿›è¡Œéæ³•çš„æ“ä½œæˆ–æœ‰é£é™©çš„æ“ä½œæ—¶ï¼Œæ—¶é•¿éœ€è¦å¼¹å‡ºè­¦å‘Šæ¡†æ¥æç¤ºç”¨æˆ·ã€‚åœ¨OS Xç³»ç»Ÿä¸Šï¼ŒNSAlertæ˜¯ä¸“é—¨çš„è­¦å‘Šæ¡†ç»„ä»¶ã€‚å…¶æä¾›äº†ç®€æ´çš„æ¥å£ä¾›å¼€å‘è€…è¿›è¡Œä½¿ç”¨ã€‚ äºŒã€NSAlertçš„ç®€å•ä½¿ç”¨ä½¿ç”¨è­¦å‘Šæ¡†æœ€ç®€å•çš„ä½¿ç”¨æ–¹å¼æ˜¯æç¤ºé”™è¯¯ä¿¡æ¯ï¼Œé”™è¯¯ä¿¡æ¯è­¦å‘Šåªèµ·åˆ°æç¤ºç”¨æˆ·çš„ä½œç”¨ï¼Œå…¶åªæœ‰ä¸€ä¸ªOKæŒ‰é’®ï¼Œç‚¹å‡»åè­¦å‘Šæ¡†ä¼šå…³é—­ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š 12345- (IBAction)alert:(id)sender &#123; NSError * error = [NSError errorWithDomain:@\"testError\" code:1001 userInfo:@&#123;@\"userid\":@\"1000\"&#125;]; NSAlert * alert = [NSAlert alertWithError:error]; [alert runModal];&#125; æ•ˆæœå›¾å¦‚ä¸‹ï¼š è­¦å‘Šæ¡†çš„å±•ç°æœ‰ä¸¤ç§æ–¹å¼ï¼Œåˆ†åˆ«ä¸ºæ¨¡æ€çª—ä¸å¼¹å‡ºæŠ½å±‰ã€‚å¼¹å‡ºæŠ½å±‰ä¼šæ˜¾ç¤ºåœ¨å½“å‰ç»‘å®šçš„çª—å£ä¸Šï¼Œæ¨¡æ€çª—åˆ™ä¼šè‡ªæˆçª—å£ï¼Œå¼¹å‡ºåœ¨å±å¹•ä¸­å¤®ã€‚ ä½ ä¹Ÿå¯ä»¥å¯¹è­¦å‘Šæ¡†è¿›è¡Œè‡ªå®šä¹‰è®¾ç½®ï¼Œä¾‹å¦‚æ–‡æœ¬ï¼Œæ ‡é¢˜ï¼Œå›¾æ ‡ç­‰ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415161718- (IBAction)alert:(id)sender &#123; NSAlert * alert = [[NSAlert alloc]init]; alert.icon = [NSImage imageNamed:@\"icon\"]; alert.messageText = @\"è­¦å‘Šä¿¡æ¯\"; alert.informativeText = @\"é¢å¤–æä¾›çš„å†…å®¹\"; alert.showsHelp = YES; alert.helpAnchor = @\"mac\"; alert.alertStyle = NSAlertStyleInformational; alert.showsSuppressionButton = YES; [alert.suppressionButton setTarget:self]; [alert.suppressionButton setAction:@selector(click)]; [alert addButtonWithTitle:@\"1\"]; [alert addButtonWithTitle:@\"2\"]; [alert addButtonWithTitle:@\"3\"]; [alert addButtonWithTitle:@\"4\"]; long res = [alert runModal]; NSLog(@\"%ld\",res);&#125; æ•ˆæœå¦‚ä¸‹ï¼š ä¸‰ã€NSAlertå±æ€§ä¸æ–¹æ³•è§£æNSAlertç±»ä¸­çš„å±æ€§å’Œæ–¹æ³•è§£æå¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536//ç›´æ¥ä½¿ç”¨é”™è¯¯ä¿¡æ¯åˆ›å»ºè­¦å‘Šæ¡†+ (NSAlert *)alertWithError:(NSError *)error;//è®¾ç½®è­¦å‘Šæ¡†ä¿¡æ¯@property (copy) NSString *messageText;//è®¾ç½®é¢å¤–ä¿¡æ¯å†…å®¹@property (copy) NSString *informativeText;//è®¾ç½®è­¦å‘Šæ¡†å›¾æ ‡@property (null_resettable, strong) NSImage *icon;//å‘è­¦å‘Šæ¡†ä¸­æ·»åŠ æŒ‰é’®- (NSButton *)addButtonWithTitle:(NSString *)title;//æŒ‰é’®æ•°ç»„@property (readonly, copy) NSArray&lt;NSButton *&gt; *buttons;//æ˜¯å¦æ˜¾ç¤ºå¸®åŠ©æŒ‰é’®@property BOOL showsHelp;//è®¾ç½®å¸®åŠ©æ‰‹å†Œé”šç‚¹ ç”¨äºå®šäº@property (nullable, copy) NSString *helpAnchor;//è®¾ç½®è­¦å‘Šæ¡†é£æ ¼/*typedef NS_ENUM(NSUInteger, NSAlertStyle) &#123; NSAlertStyleWarning = 0, //è­¦å‘Šé£æ ¼ NSAlertStyleInformational = 1,//æç¤ºä¿¡æ¯é£æ ¼ NSAlertStyleCritical = 2 //éªŒè¯é£æ ¼&#125;;*/@property NSAlertStyle alertStyle;//æ˜¯å¦æ˜¾ç¤ºä¸å†æç¤ºæŒ‰é’®@property BOOL showsSuppressionButton NS_AVAILABLE_MAC(10_5);//è·å–ä¸å†æç¤ºæŒ‰é’®@property (nullable, readonly, strong) NSButton *suppressionButton NS_AVAILABLE_MAC(10_5);//ä»£ç†å¯¹è±¡@property (nullable, weak) id&lt;NSAlertDelegate&gt; delegate;//ä»¥æ¨¡æ€çª—å£çš„æ–¹å¼å¼¹å‡ºè­¦å‘Šæ¡†ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯åŒæ­¥çš„ï¼Œå½“ç”¨æˆ·ç‚¹å‡»è­¦å‘Šæ¡†ä¸­æŒ‰é’®åä¼šè¿”å›ï¼Œè¿”å›çš„NSModalResponseå®é™…ä¸Šæ˜¯//æ•´å‹æ•°æ®ï¼Œç¬¬1ä¸ªæŒ‰é’®ä¸º1000ï¼Œåé¢ä¸€æ¬¡é€’å¢ï¼Œå¦‚1001ï¼Œ1002...- (NSModalResponse)runModal;//ä»¥çª—å£æŠ½å±‰çš„æ–¹å¼å¼¹å‡ºè­¦å‘Šæ¡†ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯å¼‚æ­¥çš„ï¼Œå½“ç”¨æˆ·ç‚¹å‡»è­¦å‘Šæ¡†ä¸­çš„æŒ‰é’®åä¼šå›è°ƒblock- (void)beginSheetModalForWindow:(NSWindow *)sheetWindow completionHandler:(void (^ __nullable)(NSModalResponse returnCode))handler NS_AVAILABLE_MAC(10_9); NSAlertDelegateåè®®ä¸­åªå®šä¹‰äº†ä¸€ä¸ªæ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š 12345@protocol NSAlertDelegate &lt;NSObject&gt;@optional//å½“ç”¨æˆ·ç‚¹å‡»å¸®åŠ©æŒ‰é’®åå›è°ƒçš„æ–¹æ³• è¿”å›å€¼å†³å®šæ˜¯å¦å¼¹å‡ºå¸®åŠ©çª—å£- (BOOL)alertShowHelp:(NSAlert *)alert;@end é™¤äº†ä¸Šé¢åˆ—å‡ºçš„æ–¹æ³•å¤–ï¼ŒNSAlertä¸­è¿˜æœ‰ä¸¤ä¸ªå·²ç»å¼ƒç”¨çš„ä¾¿æ·æ„é€ å’Œå¼¹å‡ºæ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š 1234//åˆ›å»ºè­¦å‘Šæ¡†+ (NSAlert *)alertWithMessageText:(nullable NSString *)message defaultButton:(nullable NSString *)defaultButton alternateButton:(nullable NSString *)alternateButton otherButton:(nullable NSString *)otherButton informativeTextWithFormat:(NSString *)format, ...;//å¼¹å‡ºè­¦å‘Šæ¡†- (void)beginSheetModalForWindow:(NSWindow *)window modalDelegate:(nullable id)delegate didEndSelector:(nullable SEL)didEndSelector contextInfo:(nullable void *)contextInfo;","categories":[{"name":"macOSå¼€å‘","slug":"macOSå¼€å‘","permalink":"http://huishao.cc/categories/macOSå¼€å‘/"}],"tags":[],"keywords":[{"name":"macOSå¼€å‘","slug":"macOSå¼€å‘","permalink":"http://huishao.cc/categories/macOSå¼€å‘/"}]},{"title":"Javaå¼€å‘GUIä¹‹å›¾å½¢ç»˜åˆ¶","slug":"345Javaå¼€å‘GUIä¹‹å›¾å½¢ç»˜åˆ¶","date":"2017-06-21T16:00:00.000Z","updated":"2021-07-15T02:13:24.087Z","comments":true,"path":"2017/06/22/345Javaå¼€å‘GUIä¹‹å›¾å½¢ç»˜åˆ¶/","link":"","permalink":"http://huishao.cc/2017/06/22/345Javaå¼€å‘GUIä¹‹å›¾å½¢ç»˜åˆ¶/","excerpt":"","text":"Javaå¼€å‘GUIä¹‹å›¾å½¢ç»˜åˆ¶åœ¨Javaçš„GUIç»„ä»¶ä¸­ï¼Œæ¯ä¸€ä¸ªè§†å›¾éƒ½æœ‰ä¸€ä¸ªpaintæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•è´Ÿè´£ç»„ä»¶çš„ç»˜åˆ¶ï¼Œå…¶ä¸­ä¼šä¼ å…¥Graphicså¯¹è±¡å‚æ•°ï¼Œå¼€å‘è€…å¯ä»¥åœ¨paintæ–¹æ³•ä¸­æ“ä½œè¿™ä¸ªå¯¹è±¡è¿›è¡Œè‡ªå®šä¹‰å›¾å½¢çš„ç»˜åˆ¶ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455class DrawPanel extends Panel&#123; private static final long serialVersionUID = 1L; public DrawPanel() &#123; super(); &#125; @Override public void paint(Graphics g) &#123; // TODO Auto-generated method stub super.paint(g); Color bg = Color.WHITE; Color fg = Color.RED; //ç»˜åˆ¶èƒŒæ™¯ g.setColor(bg); g.draw3DRect(50, 50, 699, 140, true); g.draw3DRect(53, 53, 692, 133, true); g.setColor(fg); //ç»˜åˆ¶çº¿ g.drawLine(60, 60, 140, 60); //ç»˜åˆ¶çŸ©å½¢ g.drawRect(150, 60, 80, 50); //ç»˜åˆ¶åœ†è§’çŸ©å½¢ g.drawRoundRect(240, 60, 80, 50, 25, 25); //ç»˜åˆ¶æ¤­åœ† g.drawOval(330, 60, 80, 50); //ç»˜åˆ¶å¼§çº¿ g.drawArc(420, 60, 50, 50, 0, 90); //ç»˜åˆ¶é—­åˆæŠ˜çº¿ Polygon polygon = new Polygon(); polygon.addPoint(510, 60); polygon.addPoint(550, 60); polygon.addPoint(550, 110); polygon.addPoint(590, 110); g.drawPolygon(polygon); //å¡«å……çŸ©å½¢ g.fillRect(600, 60, 80, 50); //å¡«å……3DçŸ©å½¢ g.fill3DRect(60, 120, 80, 50, true); //å¡«å……åœ†è§’çŸ©å½¢ g.fillRoundRect(150, 120, 80, 50, 25, 25); //å¡«å……æ¤­åœ† g.fillOval(240, 120, 80, 50); //å¡«å……å¼§çº¿ g.fillArc(330, 120, 50, 50, 0, 90); //å¡«å……é—­åˆæŠ˜çº¿ Polygon polygon2 = new Polygon(); polygon2.addPoint(390, 120); polygon2.addPoint(440, 120); polygon2.addPoint(440, 180); polygon2.addPoint(490, 180); g.fillPolygon(polygon2); //ç»˜åˆ¶æ–‡å­— g.drawString(\"finish draw test!\", 500, 150); &#125;&#125; æ•ˆæœå¦‚ä¸‹å›¾ï¼š","categories":[{"name":"Java","slug":"Java","permalink":"http://huishao.cc/categories/Java/"}],"tags":[],"keywords":[{"name":"Java","slug":"Java","permalink":"http://huishao.cc/categories/Java/"}]},{"title":"è‡ªå®šä¹‰Windowæ ‡é¢˜æ titleBar","slug":"343è‡ªå®šä¹‰Windowæ ‡é¢˜æ titleBar","date":"2017-06-19T16:00:00.000Z","updated":"2021-07-14T11:40:53.094Z","comments":true,"path":"2017/06/20/343è‡ªå®šä¹‰Windowæ ‡é¢˜æ titleBar/","link":"","permalink":"http://huishao.cc/2017/06/20/343è‡ªå®šä¹‰Windowæ ‡é¢˜æ titleBar/","excerpt":"","text":"è‡ªå®šä¹‰Windowæ ‡é¢˜æ titleBaråœ¨è¿›è¡ŒOS Xè½¯ä»¶å¼€å‘æ—¶ï¼ŒWindowè‡ªå¸¦çš„æ ‡é¢˜æ ååˆ†ç®€æ˜“ï¼Œå¾€å¾€ä¸èƒ½è¾¾åˆ°æˆ‘ä»¬çš„éœ€æ±‚ï¼Œå¦‚ä¸‹å›¾ï¼š åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®é¡¹ç›®çš„éœ€è¦å¯¹æ ‡é¢˜æ è¿›è¡Œè‡ªå®šä¹‰ã€‚è‡ªå®šä¹‰æ ‡é¢˜æ ä¸»è¦æœ‰å¦‚ä¸‹ä¸¤ç§æ€è·¯ï¼š 1.å»æ‰ç³»ç»Ÿçš„æ ‡é¢˜æ ï¼Œä½¿ç”¨è‡ªå®šä¹‰çš„Viewæ¥åšæ ‡é¢˜æ ã€‚ 2.éšè—ç³»ç»Ÿçš„æ ‡é¢˜æ ï¼Œè¿›è¡Œæ ‡é¢˜æ çš„é€æ˜å¤„ç†ã€‚ ä¸Šé¢ä¸¤ç§æ€è·¯ä¸­ç¬¬2ç§è¦æ›´å¥½ä¸€äº›ï¼Œæˆ‘ä»¬å¯ä»¥æœç”¨ç³»ç»Ÿçš„åŠŸèƒ½æŒ‰é’®ï¼Œå³å…³é—­ã€æœ€å°åŒ–å’Œæœ€å¤§åŒ–æŒ‰é’®ã€‚ é¦–å…ˆï¼Œç°åœ¨Windowçš„contentViewä¸­æ·»åŠ ä¸€ä¸ªè‡ªå®šä¹‰çš„Viewï¼Œä½œä¸ºæ ‡é¢˜æ è§†å›¾ï¼ŒViewä¸Šå¯ä»¥æ·»åŠ å›¾æ ‡æˆ–ä»»æ„è‡ªå®šä¹‰çš„åŠŸèƒ½æŒ‰é’®ã€‚å¦‚ä¸‹ï¼š é€šè¿‡å¦‚ä¸‹ä»£ç æ¥è®¾ç½®æ ‡é¢˜æ ï¼š 1234567891011121314151617181920//å°†ç³»ç»Ÿçš„æ ‡é¢˜æ è®¾ç½®é€æ˜ self.window.titlebarAppearsTransparent = YES;//å°†ç³»ç»Ÿæ ‡é¢˜è¿›è¡Œéšè—self.window.titleVisibility = NSWindowTitleHidden;//è®¾ç½®å¯ä»¥é€šè¿‡æ‹–æ‹½windowèƒŒæ™¯è§†å›¾è¿›è¡Œçª—å£çš„ç§»åŠ¨[self.window setMovableByWindowBackground:YES];//è®¾ç½®windowçš„å†…å®¹éƒ¨åˆ†å……æ»¡æ•´ä¸ªçª—å£[self.window setStyleMask:[self.window styleMask] | NSWindowStyleMaskFullSizeContentView];//è·å–åˆ°windowsçš„ä¸»è§†å›¾ NSView * themeView = self.window.contentView.superview;//æ ¹æ®å±‚çº§ç»“æ„è·å–åˆ°æ ‡é¢˜æ è§†å›¾NSView * titleView = themeView.subviews[1];titleView.autoresizesSubviews = YES;//é‡æ–°å¯¹æ ‡é¢˜æ è§†å›¾çš„å°ºå¯¸è¿›è¡Œå¸ƒå±€ï¼Œä½¿å¾—ç³»ç»Ÿçš„åŠŸèƒ½æŒ‰é’®å‡ºç°åœ¨è‡ªå®šä¹‰æ ‡é¢˜ä¸­çš„ç«–ç›´ä¸­é—´[titleView mas_remakeConstraints:^(MASConstraintMaker *make) &#123; make.left.equalTo(@10); make.width.equalTo(@70); make.top.equalTo(@9); make.height.equalTo(@22);&#125;]; éœ€è¦æ³¨æ„ï¼Œä¸Šé¢å¯¹æ ‡é¢˜æ çš„å¸ƒå±€è¿›è¡Œäº†é‡è®¾ï¼Œè¿™æ ·æ˜¯ä¸ºäº†è®©ç³»ç»Ÿçš„3ä¸ªåŠŸèƒ½æŒ‰é’®æ˜¾ç¤ºåœ¨è‡ªå®šä¹‰æ ‡é¢˜æ çš„ä¸­é—´ï¼Œä½†æ˜¯å½“ç”¨æˆ·ä½¿ç”¨å…¨å±åŠŸèƒ½è¿›è¡Œå…¨å±ä¸éå…¨å±åˆ‡æ¢æ—¶ï¼Œç³»ç»Ÿä¼šå¯¹æ ‡é¢˜æ çš„å°ºå¯¸è¿›è¡Œé‡æ–°å¸ƒå±€ï¼Œå°†åŠŸèƒ½æŒ‰é’®æ”¾å›åŸæ¥çš„ä½ç½®ï¼Œä¸ºäº†é¿å…è¿™æ ·çš„é—®é¢˜ï¼Œå¯ä»¥ç›‘å¬ç”¨æˆ·å…¨å±åˆ‡æ¢äº‹ä»¶ï¼Œé€€å‡ºå…¨å±æ—¶ï¼Œè¿›è¡Œé‡æ–°å¸ƒå±€ã€‚ æ•´ä½“æ•ˆæœå¦‚ä¸‹ï¼š","categories":[{"name":"macOSå¼€å‘","slug":"macOSå¼€å‘","permalink":"http://huishao.cc/categories/macOSå¼€å‘/"}],"tags":[],"keywords":[{"name":"macOSå¼€å‘","slug":"macOSå¼€å‘","permalink":"http://huishao.cc/categories/macOSå¼€å‘/"}]},{"title":"Javaå¼€å‘GUIä¹‹ç»å¯¹å¸ƒå±€","slug":"344Javaå¼€å‘GUIä¹‹ç»å¯¹å¸ƒå±€","date":"2017-06-19T16:00:00.000Z","updated":"2021-07-15T02:11:41.603Z","comments":true,"path":"2017/06/20/344Javaå¼€å‘GUIä¹‹ç»å¯¹å¸ƒå±€/","link":"","permalink":"http://huishao.cc/2017/06/20/344Javaå¼€å‘GUIä¹‹ç»å¯¹å¸ƒå±€/","excerpt":"","text":"Javaå¼€å‘GUIä¹‹ç»å¯¹å¸ƒå±€å‰é¢å¤šç¯‡åšå®¢ä»‹ç»äº†Javaçš„awtåŒ…ä¸­çš„å¸ƒå±€ç®¡ç†ç±»ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä¸ä½¿ç”¨ä»»ä½•å¸ƒå±€ç®¡ç†ç±»ï¼Œå¼€å‘è€…å¯ä»¥ç›´æ¥è®¾ç½®ç»„ä»¶çš„åæ ‡å’Œå°ºå¯¸ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718static void AbsoluteLayoutTest()&#123; Frame frame = new Frame(\"Grid\"); //è®¾ç½®ä¸ä½¿ç”¨ä»»ä½•å¸ƒå±€ç®¡ç†ç±» Panel pannel = new Panel(null); Button button1 = new Button(\"Button1\"); pannel.add(button1); button1.reshape(10, 10, 60, 20); Button button2 = new Button(\"Button2\"); pannel.add(button2); button2.reshape(80, 40, 60, 20); Button button3 = new Button(\"Button3\"); pannel.add(button3); button3.reshape(10, 70, 60, 20); frame.add(pannel); frame.pack(); frame.show();&#125; ç»„ä»¶çš„reshapeæ–¹æ³•ç”¨äºé‡è®¾ç»„ä»¶çš„ä½ç½®å’Œå°ºå¯¸ï¼Œå…¶å‰ä¸¤ä¸ªå‚æ•°ç¡®å®šxï¼Œyåæ ‡ï¼Œåä¸¤ä¸ªå‚æ•°ç¡®å®šå®½åº¦ä¸é«˜åº¦ï¼Œæ•ˆæœå¦‚ä¸‹å›¾ï¼š","categories":[{"name":"Java","slug":"Java","permalink":"http://huishao.cc/categories/Java/"}],"tags":[],"keywords":[{"name":"Java","slug":"Java","permalink":"http://huishao.cc/categories/Java/"}]},{"title":"Javaå¼€å‘GUIä¹‹GridBagLayoutå¸ƒå±€","slug":"342Javaå¼€å‘GUIä¹‹GridBagLayoutå¸ƒå±€","date":"2017-06-18T16:00:00.000Z","updated":"2021-07-14T11:39:02.940Z","comments":true,"path":"2017/06/19/342Javaå¼€å‘GUIä¹‹GridBagLayoutå¸ƒå±€/","link":"","permalink":"http://huishao.cc/2017/06/19/342Javaå¼€å‘GUIä¹‹GridBagLayoutå¸ƒå±€/","excerpt":"","text":"Javaå¼€å‘GUIä¹‹GridBagLayoutå¸ƒå±€GridBagLayoutå¸ƒå±€ç®¡ç†å™¨æ˜¯æ¯”GridLayoutå¸ƒå±€æ›´åŠ å¼ºå¤§çš„è¡¨æ ¼å¸ƒå±€ã€‚GridLayoutè¿›è¡Œçš„è¡¨æ ¼å¸ƒå±€å…¶ä¸­å…ƒç´ å°ºå¯¸ç›¸åŒï¼Œè€ŒGridBagLayoutåˆ™å¯ä»¥çµæ´»é…ç½®å…¶ä¸­å…ƒç´ çš„å°ºå¯¸å’Œä½ç½®ã€‚åŒæ ·ï¼ŒGridBagLayoutçš„ä½¿ç”¨ä¹Ÿæ›´åŠ å¤æ‚ï¼Œå…¶å¸ƒå±€ä¾èµ–GridBagConstraintsç±»ã€‚ å…ˆçœ‹å¦‚ä¸‹ç»å…¸ç¤ºä¾‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051static void GridBagLayoutTest()&#123; Frame frame = new Frame(\"GridBag\"); GridBagLayout layout = new GridBagLayout(); GridBagConstraints constraints = new GridBagConstraints(); Panel pannel = new Panel(layout); constraints.fill = GridBagConstraints.BOTH; constraints.weightx = 1.0; Button button1 = new Button(\"Button1\"); layout.setConstraints(button1, constraints); pannel.add(button1); Button button2 = new Button(\"Button2\"); layout.setConstraints(button2, constraints); pannel.add(button2); Button button3 = new Button(\"Button3\"); layout.setConstraints(button3, constraints); pannel.add(button3); constraints.gridwidth = GridBagConstraints.REMAINDER; Button button4 = new Button(\"Button4\"); layout.setConstraints(button4, constraints); pannel.add(button4); constraints.weightx=0; Button button5 = new Button(\"Button5\"); layout.setConstraints(button5, constraints); pannel.add(button5); constraints.gridwidth = GridBagConstraints.RELATIVE; Button button6 = new Button(\"Button6\"); layout.setConstraints(button6, constraints); pannel.add(button6); constraints.gridwidth = GridBagConstraints.REMAINDER; Button button7 = new Button(\"Button7\"); layout.setConstraints(button7, constraints); pannel.add(button7); constraints.gridwidth=1; constraints.gridheight=2; constraints.weighty=1.0; Button button8 = new Button(\"Button8\"); layout.setConstraints(button8, constraints); pannel.add(button8); constraints.weighty=0; constraints.gridwidth=GridBagConstraints.REMAINDER; constraints.gridheight = 1; Button button9 = new Button(\"Button9\"); layout.setConstraints(button9, constraints); pannel.add(button9); Button button10 = new Button(\"Button10\"); layout.setConstraints(button10, constraints); pannel.add(button10); frame.add(pannel); frame.pack(); frame.show();&#125; ä¸Šé¢ä»£ç å¸ƒå±€äº†10ä¸ªæŒ‰é’®ï¼Œå…¶ä¸­å¤ç”¨äº†åŒä¸€ä¸ªGridBagConstraintså¯¹è±¡ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š GridBagLayoutç±»ä¸­å¸¸ç”¨æ–¹æ³•åˆ—ä¸¾å¦‚ä¸‹ï¼š 12345678//æ„é€ æ–¹æ³•public GridBagLayout ();//è®¾ç½®ç»„ä»¶çš„å¸ƒå±€public void setConstraints(Component comp, GridBagConstraints constraints);//è·å–æŸä¸ªç»„ä»¶çš„å¸ƒå±€å¯¹è±¡public GridBagConstraints getConstraints(Component comp);//è·å–å¸ƒå±€åŸç‚¹public Point getLayoutOrigin (); åœ¨GridBagLayoutä¸­å…¶ç€è‡³å…³é‡è¦ä½œç”¨çš„ç±»æ˜¯GridBagConstraintså¸ƒå±€ç±»ï¼Œå…¶ç²¾ç¡®ç¡®å®šæ¯ä¸ªå­ç»„ä»¶çš„ä½ç½®å’Œå°ºå¯¸ä¿¡æ¯ã€‚ä¸‹é¢æˆ‘ä»¬æ¥ä¸€ç‚¹ç‚¹ä»‹ç»è¿™ä¸ªç±»ä¸­å±æ€§çš„æ„ä¹‰ï¼š fillï¼šè¿™ä¸ªå±æ€§ç¡®å®šå½“è¢«å¸ƒå±€ç»„ä»¶å°ºå¯¸å°äºå…¶è¢«æŒ‡å®šçš„è¡¨æ ¼å°ºå¯¸æ—¶ï¼Œç»„ä»¶çš„æ‹‰ä¼¸æ¨¡å¼ï¼Œå¯é€‰å€¼å®šä¹‰åœ¨GridBagConstraintsç±»ä¸­ï¼Œå¦‚ä¸‹ï¼š 12345678//ä¸è¿›è¡Œå°ºå¯¸å¤„ç† é»˜è®¤å±…ä¸­public static final int NONE = 0;//æ°´å¹³å’Œç«–ç›´å‡æ‹‰ä¼¸åˆ°å……æ»¡public static final int BOTH = 1;//æ°´å¹³æ–¹å‘æ‹‰ä¼¸å……æ»¡public static final int HORIZONTAL = 2;//ç«–ç›´æ–¹å‘æ‹‰ä¼¸å……æ»¡public static final int VERTICAL = 3; anchorï¼šè¿™ä¸ªå±æ€§ç¡®å®šå½“è¢«å¸ƒå±€ç»„ä»¶å°ºå¯¸å°äºå…¶è¢«æŒ‡å®šçš„è¡¨æ ¼å°ºå¯¸æ—¶ï¼Œç»„ä»¶çš„å¸ƒå±€ä½ç½®ï¼Œå¯é€‰å€¼å¦‚ä¸‹ï¼š 123456789101112131415161718//å±…ä¸­public static final int CENTER = 10;//å¸ƒå±€åœ¨ä¸Šæ–¹public static final int NORTH = 11;//å¸ƒå±€åœ¨å³ä¸Šæ–¹public static final int NORTHEAST = 12;//å¸ƒå±€åœ¨å³æ–¹public static final int EAST = 13;//å¸ƒå±€åœ¨å³ä¸‹æ–¹public static final int SOUTHEAST = 14;//å¸ƒå±€åœ¨ä¸‹æ–¹public static final int SOUTH = 15;//å¸ƒå±€åœ¨å·¦ä¸‹æ–¹public static final int SOUTHWEST = 16;//å¸ƒå±€åœ¨å·¦æ–¹public static final int WEST = 17;//å¸ƒå±€åœ¨å·¦ä¸Šæ–¹public static final int NORTHWEST = 18; gridwidthä¸gridheightï¼šè¿™ä¸¤ä¸ªå±æ€§åˆ†åˆ«è®¾ç½®ç»„ä»¶çš„å®½åº¦ä¸é«˜åº¦ï¼Œä»–ä»¬å¯ä»¥è®¾ç½®ä¸ºå›ºå®šçš„æ•°å€¼ï¼Œä¹Ÿå¯ä»¥è®¾ç½®ä¸ºä¸‹é¢å‡ ä¸ªç‰¹æ®Šçš„å€¼æ¥è¡¨ç¤ºç‰¹æ®Šçš„æ„ä¹‰ï¼š 1234//å æ®å…¶ä»–ç»„ä»¶å¸ƒå±€åä½™ä¸‹çš„å°ºå¯¸public static final int RELATIVE = -1;//æš‚å±…æ­¤è¡Œæˆ–è€…æ­¤åˆ—çš„å‰©ä¸‹å…¨éƒ¨ï¼Œåç½®çš„ç»„ä»¶å¦èµ·ä¸€è¡Œæˆ–ä¸€åˆ—public static final int REMAINDER = 0; gridxä¸gridyï¼šè¿™ä¸¤ä¸ªå€¼è®¾ç½®ç»„ä»¶å¸ƒå±€å·¦ä¸Šè§’æ‰€åœ¨çš„å•å…ƒæ ¼ï¼Œå•ä½ä¸ºå•å…ƒæ ¼ï¼Œé»˜è®¤ä¼šæ’åˆ—åœ¨ä¸Šä¸€ä¸ªå•å…ƒæ ¼ä¹‹åã€‚ weightxä¸weightyï¼šè¿™ä¸¤ä¸ªå€¼è®¾ç½®ç»„ä»¶å¸ƒå±€çš„æ°´å¹³æƒé‡å’Œç«–ç›´æƒé‡ã€‚ insetsï¼šè®¾ç½®ç»„ä»¶è¾¹è·ã€‚","categories":[{"name":"Java","slug":"Java","permalink":"http://huishao.cc/categories/Java/"}],"tags":[],"keywords":[{"name":"Java","slug":"Java","permalink":"http://huishao.cc/categories/Java/"}]},{"title":"Javaå¼€å‘GUIä¹‹FlowLayoutæµå¸ƒå±€","slug":"340Javaå¼€å‘GUIä¹‹FlowLayoutæµå¸ƒå±€","date":"2017-06-17T16:00:00.000Z","updated":"2021-07-14T11:37:05.564Z","comments":true,"path":"2017/06/18/340Javaå¼€å‘GUIä¹‹FlowLayoutæµå¸ƒå±€/","link":"","permalink":"http://huishao.cc/2017/06/18/340Javaå¼€å‘GUIä¹‹FlowLayoutæµå¸ƒå±€/","excerpt":"","text":"Javaå¼€å‘GUIä¹‹FlowLayoutæµå¸ƒå±€FlowLayouté¡¾åæ€ä¹‰ï¼Œå³æµå¼å¸ƒå±€ã€‚å…¶é»˜è®¤ä»¥è¡Œè¿›è¡Œå¸ƒå±€ï¼Œå¯ä»¥è®¾ç½®å¯¹é½æ¨¡å¼ï¼Œå½“ä¸€è¡Œçš„è·ç¦»ä¸å¤Ÿç»„ä»¶è¿›è¡Œæ’åˆ—æ—¶ï¼ŒFlowLayoutä¼šè‡ªè¡Œè¿›è¡Œæ¢è¡Œã€‚ 12345678910111213static void FlowLayoutTest()&#123; Frame frame = new Frame(\"Flow\"); FlowLayout layout = new FlowLayout(FlowLayout.RIGHT, 30, 20); Panel pannel = new Panel(layout); pannel.add(new Button(\"Button1\")); pannel.add(new Button(\"Button2\")); pannel.add(new Button(\"Button3\")); pannel.add(new Button(\"Button4\")); pannel.add(new Button(\"Button5\")); frame.add(pannel); frame.pack(); frame.show();&#125; æ•ˆæœå¦‚ä¸‹ï¼š FlowLayoutç±»æ ¸å¿ƒæ–¹æ³•ç»“å±€å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930//æ„é€ æ–¹æ³• é»˜è®¤å±…ä¸­å¯¹é½ è¡Œåˆ—é—´è·ä¸º5public FlowLayout();//alignè®¾ç½®å¯¹é½æ¨¡å¼/*//å·¦å¯¹é½public static final int LEFT = 0;//å±…ä¸­å¯¹é½public static final int CENTER = 1;//å³å¯¹é½public static final int RIGHT = 2;*/public FlowLayout(int align);//hgapè®¾ç½®æ°´å¹³é—´è· vgapè®¾ç½®ç«–ç›´é—´è·public FlowLayout(int align, int hgap, int vgap);//è·å–å¯¹é½æ¨¡å¼public int getAlignment();//è®¾ç½®å¯¹é½æ¨¡å¼public void setAlignment(int align);//è·å–æ°´å¹³é—´è·public int getHgap();//è®¾ç½®æ°´å¹³é—´è·public void setHgap(int hgap) ;//è·å–ç«–ç›´é—´è·public int getVgap();//è®¾ç½®ç«–ç›´é—´è·public void setVgap(int vgap) ;//è®¾ç½®æ˜¯å¦åŸºçº¿å¯¹é½public void setAlignOnBaseline(boolean alignOnBaseline) ;//è·å–æ˜¯å¦åŸºçº¿å¯¹é½public boolean getAlignOnBaseline() ;","categories":[{"name":"Java","slug":"Java","permalink":"http://huishao.cc/categories/Java/"}],"tags":[],"keywords":[{"name":"Java","slug":"Java","permalink":"http://huishao.cc/categories/Java/"}]},{"title":"Javaå¼€å‘GUIä¹‹CardLayoutå¡ç‰‡å¸ƒå±€","slug":"339Javaå¼€å‘GUIä¹‹CardLayoutå¡ç‰‡å¸ƒå±€","date":"2017-06-17T16:00:00.000Z","updated":"2021-07-14T11:36:02.645Z","comments":true,"path":"2017/06/18/339Javaå¼€å‘GUIä¹‹CardLayoutå¡ç‰‡å¸ƒå±€/","link":"","permalink":"http://huishao.cc/2017/06/18/339Javaå¼€å‘GUIä¹‹CardLayoutå¡ç‰‡å¸ƒå±€/","excerpt":"","text":"Javaå¼€å‘GUIä¹‹CardLayoutå¡ç‰‡å¸ƒå±€CardLayoutå¸ƒå±€å…è®¸è¿›è¡Œå¤šå¥—ç•Œé¢çš„è®¾è®¡ï¼Œé€šè¿‡åˆ‡æ¢ç•Œé¢æ¥å®ç°å¸ƒå±€æ ·å¼çš„æ”¹å˜ã€‚CardLayoutç±»ä¼¼ä¸ä¸€å å¡ç‰‡ï¼Œé»˜è®¤æœ€å…ˆæ·»åŠ çš„åœ¨å‰é¢ï¼Œç•Œé¢å§‹ç»ˆåªå±•ç¤ºä¸€ä¸ªå¡ç‰‡ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829static Panel cardPannel;static void CardLayoutTest()&#123; Frame frame = new Frame(\"Label\"); Panel top = new Panel(); Choice choice = new Choice(); choice.add(\"BUTTON\"); choice.add(\"LABEL\"); choice.addItemListener(new CardLayoutChoiceListener()); top.add(choice); CardLayout layout = new CardLayout(); cardPannel = new Panel(layout); Panel p1 = new Panel(); p1.add(new Button(\"one\")); p1.add(new Button(\"two\")); p1.add(new Button(\"three\")); cardPannel.add(\"BUTTON\", p1); Panel p2 = new Panel(); p2.add(new Label(\"label\")); p2.add(new Label(\"label\")); p2.add(new Label(\"label\")); cardPannel.add(\"LABEL\", p2); top.add(cardPannel); frame.add(top); frame.pack(); frame.show();&#125; Choiceçš„ç›‘å¬å¯¹è±¡ç±»å¦‚ä¸‹ï¼š 123456789class CardLayoutChoiceListener implements ItemListener&#123; @Override public void itemStateChanged(ItemEvent e) &#123; // TODO Auto-generated method stub ((CardLayout)APP.cardPannel.getLayout()).show(APP.cardPannel, (String) e.getItem()); &#125; &#125; éœ€è¦æ³¨æ„ï¼ŒCardLayoutåœ¨è¿›è¡Œå¡ç‰‡åˆ‡æ¢æ—¶ï¼Œæ˜¯é€šè¿‡å¡ç‰‡åæ¥ç¡®å®šçš„ï¼Œæ‰€ä»¥ä¸Šé¢çš„ä»£ç å°†Choiceçš„æ ‡é¢˜è®¾ç½®ä¸ºå’Œå¡ç‰‡çš„åç§°ä¸€è‡´ã€‚ CardLayoutç±»ä¸­æ–¹æ³•æ€»ç»“å¦‚ä¸‹ï¼š 12345678910111213141516171819202122//é»˜è®¤çš„æ„é€ æ–¹æ³•public CardLayout();//æ„é€ æ–¹æ³• hgapè®¾ç½®å¡ç‰‡æ°´å¹³é—´è· vgapè®¾ç½®å¡ç‰‡ç«–ç›´é—´è· public CardLayout(int hgap, int vgap);//è·å–æ°´å¹³é—´è·public int getHgap();//è®¾ç½®æ°´å¹³é—´è·public void setHgap(int hgap);//è·å–ç«–ç›´é—´è·public int getVgap();//è®¾ç½®ç«–ç›´é—´è·public void setVgap(int vgap);//æ˜¾ç¤ºç¬¬ä¸€ä¸ªå¡ç‰‡ç•Œé¢ parentä¸ºçˆ¶å®¹å™¨public void first(Container parent);//æ˜¾ç¤ºä¸‹ä¸€ä¸ªå¡ç‰‡ç•Œé¢public void next(Container parent);//æ˜¾ç¤ºä¸Šä¸€ä¸ªå¡ç‰‡ç•Œé¢public void previous(Container parent);//æ˜¾ç¤ºæœ€åä¸€ä¸ªå¡ç‰‡ç•Œé¢public void last(Container parent);//æ˜¾ç¤ºæŒ‡å®šåç§°çš„å¡ç‰‡ç•Œé¢public void show(Container parent, String name);","categories":[{"name":"Java","slug":"Java","permalink":"http://huishao.cc/categories/Java/"}],"tags":[],"keywords":[{"name":"Java","slug":"Java","permalink":"http://huishao.cc/categories/Java/"}]},{"title":"Javaå¼€å‘GUIä¹‹GridLayoutç½‘æ ¼å¸ƒå±€","slug":"341Javaå¼€å‘GUIä¹‹GridLayoutç½‘æ ¼å¸ƒå±€","date":"2017-06-17T16:00:00.000Z","updated":"2021-07-14T11:38:02.607Z","comments":true,"path":"2017/06/18/341Javaå¼€å‘GUIä¹‹GridLayoutç½‘æ ¼å¸ƒå±€/","link":"","permalink":"http://huishao.cc/2017/06/18/341Javaå¼€å‘GUIä¹‹GridLayoutç½‘æ ¼å¸ƒå±€/","excerpt":"","text":"Javaå¼€å‘GUIä¹‹GridLayoutç½‘æ ¼å¸ƒå±€GridLayoutæ˜¯ç®€å•çš„ç½‘æ ¼å¸ƒå±€ï¼Œä½¿ç”¨å…¶å¯ä»¥æ–¹ä¾¿çš„å®ç°å¤šè¡Œå¤šåˆ—çš„å¸ƒå±€æ ·å¼ã€‚ 12345678910111213static void GridLayoutTest()&#123;a Frame frame = new Frame(\"Grid\"); GridLayout layout = new GridLayout(2, 3, 10, 10); Panel pannel = new Panel(layout); pannel.add(new Button(\"Button1\")); pannel.add(new Button(\"Button2\")); pannel.add(new Button(\"Button3\")); pannel.add(new Button(\"Button4\")); pannel.add(new Button(\"Button5\")); frame.add(pannel); frame.pack(); frame.show();&#125; æ•ˆæœå¦‚ä¸‹ï¼š GridLayoutç±»ä¸­å¸¸ç”¨æ–¹æ³•æ€»ç»“å¦‚ä¸‹ï¼š 12345678910111213141516171819202122//æ„é€ æ–¹æ³•public GridLayout();//è®¾ç½®è¡Œæ•°ä¸åˆ—æ•°public GridLayout(int rows, int cols);//è®¾ç½®è¡Œæ•°ä¸åˆ—æ•° ä»¥åŠæ°´å¹³ç«–ç›´é—´è·public GridLayout(int rows, int cols, int hgap, int vgap);//è·å–è¡Œæ•°public int getRows();//è®¾ç½®è¡Œæ•°public void setRows(int rows);//è·å–åˆ—æ•°public int getColumns();//è®¾ç½®åˆ—æ•°public void setColumns(int cols) ;//è·å–æ°´å¹³é—´è·public int getHgap();//è®¾ç½®æ°´å¹³é—´è·public void setHgap(int hgap);//è·å–ç«–ç›´é—´è·public int getVgap();//è®¾ç½®ç«–ç›´é—´è·public void setVgap(int vgap);","categories":[{"name":"Java","slug":"Java","permalink":"http://huishao.cc/categories/Java/"}],"tags":[],"keywords":[{"name":"Java","slug":"Java","permalink":"http://huishao.cc/categories/Java/"}]},{"title":"Javaå¼€å‘GUIä¹‹BorderLayoutè¾¹ç•Œå¸ƒå±€","slug":"338Javaå¼€å‘GUIä¹‹BorderLayoutè¾¹ç•Œå¸ƒå±€","date":"2017-06-15T16:00:00.000Z","updated":"2021-07-14T11:33:31.594Z","comments":true,"path":"2017/06/16/338Javaå¼€å‘GUIä¹‹BorderLayoutè¾¹ç•Œå¸ƒå±€/","link":"","permalink":"http://huishao.cc/2017/06/16/338Javaå¼€å‘GUIä¹‹BorderLayoutè¾¹ç•Œå¸ƒå±€/","excerpt":"","text":"Javaå¼€å‘GUIä¹‹BorderLayoutè¾¹ç•Œå¸ƒå±€å‰é¢åšå®¢ä¸­æ‰€æåŠçš„ä¾‹å­éƒ½æ˜¯é’ˆå¯¹å•ç‹¬çš„è§†å›¾ç»„ä»¶ï¼Œå°†ç»„ä»¶ç»„åˆå¹¶å¸ƒå±€åœ¨åˆé€‚çš„ä½ç½®æ‰èƒ½ç®—æ˜¯å®Œæ•´çš„ç•Œé¢ã€‚Javaä¸­çš„å¸ƒå±€é‡‡ç”¨å¸ƒå±€ç®¡ç†å™¨æ¨¡å¼è¿›è¡Œï¼Œæä¾›äº†è·¨å¹³å°æ€§ï¼ŒBoaderLayoutå¸ƒå±€ç®¡ç†å™¨ä¼šå°†å…¶å†…å®¹åˆ†æˆ5ä¸ªéƒ¨åˆ†ï¼Œä¸Šä¸‹å·¦å³å’Œä¸­å¿ƒï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼ša 12345678910111213static void BorderLayoutTest()&#123; Frame frame = new Frame(\"Label\"); BorderLayout layout = new BorderLayout(10,15); Panel pannel = new Panel(layout); pannel.add(BorderLayout.NORTH, new Button(\"åŒ—æ–¹\")); pannel.add(BorderLayout.SOUTH, new Button(\"å—æ–¹\")); pannel.add(BorderLayout.EAST, new Button(\"ä¸œæ–¹\")); pannel.add(BorderLayout.WEST, new Button(\"è¥¿æ–¹\")); pannel.add(BorderLayout.CENTER, new Button(\"ä¸­å¿ƒ\")); frame.add(pannel); frame.pack(); frame.show();&#125; æ•ˆæœå¦‚ä¸‹ï¼š BorderLayoutä¸­å¸¸ç”¨æ–¹æ³•è§£æï¼š 12345678910111213141516171819202122//å¸¸é‡ æŒ‡å®šå¸ƒå±€åœ¨åŒ—æ–¹ä½ç½®public static final String NORTH = \"North\";//å¸¸é‡ æŒ‡å®šå¸ƒå±€åœ¨å—æ–¹ä½ç½®public static final String SOUTH = \"South\";//å¸¸é‡ æŒ‡å®šå¸ƒå±€åœ¨ä¸œæ–¹ä½ç½®public static final String EAST = \"East\";//å¸¸é‡ æŒ‡å®šå¸ƒå±€åœ¨è¥¿æ–¹ä½ç½®public static final String WEST = \"West\";//å¸¸é‡ æŒ‡å®šå¸ƒå±€åœ¨ä¸­å¿ƒä½ç½®public static final String CENTER = \"Center\";//åˆå§‹åŒ–æ–¹æ³• é»˜è®¤æ— é—´è·public BorderLayout();//åˆå§‹åŒ–æ–¹æ³• hgapè®¾ç½®æ°´å¹³é—´è· vgapè®¾ç½®å‚ç›´é—´è·public BorderLayout(int hgap, int vgap);//è·å–æ°´å¹³é—´è·public int getHgap();//è®¾ç½®æ°´å¹³é—´è·public void setHgap(int hgap);//è·å–å‚ç›´é—´è·public int getVgap();//è®¾ç½®å‚ç›´é—´è·public void setVgap(int vgap); é™¤äº†ä¸Šé¢çš„æ–¹æ³•ï¼Œå¸ƒå±€ç®¡ç†å™¨ç›¸å…³ç±»ä¸­éƒ½å®ç°äº†æ·»åŠ ç»„ä»¶çš„æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•ä¸€èˆ¬å¼€å‘è€…æ˜¯ä¸éœ€è¦è°ƒç”¨åˆ°çš„ï¼Œå½“å‘å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶æ—¶ï¼Œå®¹å™¨ä¼šç”¨å…¶å¯¹åº”çš„å¸ƒå±€ç®¡ç†å™¨æ¥è°ƒç”¨è¿™äº›æ–¹æ³•è¿›è¡Œå¸ƒå±€ã€‚","categories":[{"name":"Java","slug":"Java","permalink":"http://huishao.cc/categories/Java/"}],"tags":[],"keywords":[{"name":"Java","slug":"Java","permalink":"http://huishao.cc/categories/Java/"}]},{"title":"Javaå¼€å‘GUIä¹‹å¯ç¼–è¾‘åŒºåŸŸ","slug":"337Javaå¼€å‘GUIä¹‹å¯ç¼–è¾‘åŒºåŸŸ","date":"2017-06-14T16:00:00.000Z","updated":"2021-07-14T11:30:54.659Z","comments":true,"path":"2017/06/15/337Javaå¼€å‘GUIä¹‹å¯ç¼–è¾‘åŒºåŸŸ/","link":"","permalink":"http://huishao.cc/2017/06/15/337Javaå¼€å‘GUIä¹‹å¯ç¼–è¾‘åŒºåŸŸ/","excerpt":"","text":"Javaå¼€å‘GUIä¹‹å¯ç¼–è¾‘åŒºåŸŸJavaçš„awtåŒ…ä¸­æä¾›äº†å•è¡Œçš„æ–‡æœ¬ç¼–è¾‘ç»„ä»¶TextFieldä¸å¤šè¡Œçš„æ–‡æœ¬ç¼–è¾‘åŒºTextAreaï¼Œè¿™ä¸¤ä¸ªç»„ä»¶éƒ½æ˜¯ç»§æ‰¿è‡ªTextComponentç±»ã€‚ 1234567891011121314 static void TextTest()&#123; Frame frame = new Frame(\"Label\"); Panel pannel = new Panel(); TextField textField = new TextField(\"è¯·å¼€å§‹ä½ çš„è¡¨æ¼”\",16); //è®¾ç½®å¯†æ–‡è¾“å…¥// textField.setEchoChar('*'); textField.addTextListener(new TextFieldListener()); pannel.add(textField); TextArea textArea = new TextArea(\"æ˜¯æ—¶å€™è¡¨æ¼”çœŸæ­£çš„æŠ€æœ¯äº†Â·Â·Â·\",5,20); pannel.add(textArea); frame.add(pannel); frame.pack(); frame.show(); &#125; æ•ˆæœå¦‚ä¸‹ï¼š TextComponentç±»ä¸­æä¾›äº†å¯ç¼–è¾‘ç»„ä»¶çš„åŸºæœ¬æ–¹æ³•ï¼š 12345678910111213141516171819202122232425262728293031323334//è®¾ç½®æ˜¯å¦æ”¯æŒåˆ‡æ¢è¾“å…¥æ³•public void enableInputMethods(boolean enable);//è®¾ç½®æ–‡æœ¬public synchronized void setText(String t);//è·å–æ–‡æœ¬public synchronized String getText();//è·å–é€‰ä¸­çš„æ–‡æ¡ˆpublic synchronized String getSelectedText();//è·å–æ˜¯å¦å¯ç¼–è¾‘public boolean isEditable();//è®¾ç½®æ˜¯å¦å¯ç¼–è¾‘public synchronized void setEditable(boolean b);//è·å–èƒŒæ™¯è‰²public Color getBackground();//è®¾ç½®èƒŒæ™¯è‰²public void setBackground(Color c);//è·å–é€‰ä¸­æ–‡æ¡ˆçš„èµ·ç‚¹public synchronized int getSelectionStart();//è®¾ç½®é€‰ä¸­æ–‡æ¡ˆçš„èµ·ç‚¹public synchronized void setSelectionStart(int selectionStart);//è®¾ç½®é€‰ä¸­æ–‡æ¡ˆç»ˆç‚¹public synchronized int getSelectionEnd();//è®¾ç½®é€‰ä¸­æ–‡æ¡ˆç»ˆç‚¹public synchronized void setSelectionEnd(int selectionEnd);//è®¾ç½®é€‰ä¸­æ–‡æ¡ˆpublic synchronized void select(int selectionStart, int selectionEnd);//é€‰ä¸­å…¨éƒ¨æ–‡æ¡ˆpublic synchronized void selectAll();//è®¾ç½®æ–‡æ¡ˆå˜åŒ–çš„ç›‘å¬public synchronized void addTextListener(TextListener l);//ç§»é™¤ç›‘å¬public synchronized void removeTextListener(TextListener l);//è·å–ç›‘å¬è€…public synchronized TextListener[] getTextListeners(); TextFieldç”¨äºå•è¡Œçš„æ–‡æœ¬è¾“å…¥ï¼Œå¹¶ä¸”å¯ä»¥è®¾ç½®å¯†æ–‡è¾“å…¥ï¼Œå¯¹ç™»å½•æ¡†ååˆ†é€‚ç”¨ï¼š 123456789101112131415161718192021222324252627//æ„é€ æ–¹æ³•public TextField();//textå‚æ•°è®¾ç½®æ–‡æœ¬public TextField(String text);//columnså‚æ•°è®¾ç½®åˆ—æ•° ä¼šå½±å“å®½åº¦public TextField(int columns);public TextField(String text, int columns);//è·å–è¾“å…¥æ–‡æœ¬è¢«æ›¿æ¢æˆçš„å¯†æ–‡å­—ç¬¦public char getEchoChar();//è®¾ç½®è¾“å…¥æ–‡æœ¬è¢«æ›¿æ¢æˆçš„å¯†æ–‡å­—ç¬¦public void setEchoChar(char c);//è®¾ç½®å¯†æ–‡å­—ç¬¦ å·²ç»å¼ƒç”¨ é€‚ç”¨ä¸Šé¢çš„æ–¹æ³•public synchronized void setEchoCharacter(char c);//è®¾ç½®æ–‡æ¡ˆpublic void setText(String t);//è·å–æ˜¯å¦è®¾ç½®å¯†æ–‡è¾“å…¥public boolean echoCharIsSet();//è·å–åˆ—æ•°public int getColumns();//è®¾ç½®åˆ—æ•°public void setColumns(int columns) ;//æ·»åŠ åŠ¨ä½œç›‘å¬public synchronized void addActionListener(ActionListener l);//ç§»é™¤åŠ¨ä½œç›‘å¬public synchronized void removeActionListener(ActionListener l);//è·å–ç›‘å¬è€…public synchronized ActionListener[] getActionListeners(); TextAreaç±»ä¸­çš„æ–¹æ³•æ€»ç»“å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637//æ„é€ æ–¹æ³•public TextArea();//textå‚æ•°è®¾ç½®æ–‡æœ¬public TextArea(String text);//è®¾ç½®è¡Œæ•°ä¸åˆ—æ•°public TextArea(int rows, int columns);public TextArea(String text, int rows, int columns);//scrollbarsè®¾ç½®æ»šåŠ¨æ¡æ¨¡å¼/*public static final int SCROLLBARS_BOTH = 0;//æ°´å¹³å’Œç«–ç›´éƒ½æ˜¾ç¤ºæ»šåŠ¨æ¡public static final int SCROLLBARS_VERTICAL_ONLY = 1;//ä»…ä»…æ˜¾ç¤ºç«–ç›´æ»šåŠ¨æ¡public static final int SCROLLBARS_HORIZONTAL_ONLY = 2;//ä»…ä»…æ˜¾ç¤ºæ°´å¹³æ»šåŠ¨æ¡public static final int SCROLLBARS_NONE = 3; //ä¸æ˜¾ç¤ºæ»šåŠ¨æ¡*/public TextArea(String text, int rows, int columns, int scrollbars);//åœ¨æŒ‡å®šä½ç½®æ’å…¥å­—ç¬¦ä¸²public void insert(String str, int pos);//åŒä¸Š å·²ç»å¼ƒç”¨ ä½¿ç”¨ä¸Šé¢çš„æ–¹æ³•public synchronized void insertText(String str, int pos);//åœ¨å·²æœ‰æ–‡æœ¬åè¿½åŠ å­—ç¬¦ä¸²public void append(String str);//åŒä¸Šï¼Œå·²ç»å¼ƒç”¨ ä½¿ç”¨ä¸Šé¢æ–¹æ³•public synchronized void appendText(String str);//æ›¿æ¢æŸä¸ªèŒƒå›´å†…çš„å­—ç¬¦ä¸²public void replaceRange(String str, int start, int end);//åŒä¸Šï¼Œå·²ç»å¼ƒç”¨ ä½¿ç”¨ä¸Šé¢æ–¹æ³•public synchronized void replaceText(String str, int start, int end);//è·å–è¡Œæ•°public int getRows();//è®¾ç½®è¡Œæ•°public void setRows(int rows);//è·å–åˆ—æ•°public int getColumns();//è®¾ç½®åˆ—æ•°public void setColumns(int columns);//è·å–æ»šåŠ¨æ¡æ¨¡å¼public int getScrollbarVisibility();","categories":[{"name":"Java","slug":"Java","permalink":"http://huishao.cc/categories/Java/"}],"tags":[],"keywords":[{"name":"Java","slug":"Java","permalink":"http://huishao.cc/categories/Java/"}]},{"title":"Javaå¼€å‘GUIä¹‹æ»šåŠ¨æ¡","slug":"336Javaå¼€å‘GUIä¹‹æ»šåŠ¨æ¡","date":"2017-06-13T16:00:00.000Z","updated":"2021-07-14T11:29:55.995Z","comments":true,"path":"2017/06/14/336Javaå¼€å‘GUIä¹‹æ»šåŠ¨æ¡/","link":"","permalink":"http://huishao.cc/2017/06/14/336Javaå¼€å‘GUIä¹‹æ»šåŠ¨æ¡/","excerpt":"","text":"Javaå¼€å‘GUIä¹‹æ»šåŠ¨æ¡æ»šåŠ¨æ¡ç»„ä»¶å¯ä»¥å®ç°ç”¨æˆ·æ‹–åŠ¨è°ƒæ•´æ•ˆæœï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456789101112static void ScrollBarTest()&#123; Frame frame = new Frame(\"Label\"); Panel pannel = new Panel(); Scrollbar scrollbar = new Scrollbar(Scrollbar.HORIZONTAL, 5, 2, 0, 20); scrollbar.setUnitIncrement(1); scrollbar.setBlockIncrement(5); scrollbar.addAdjustmentListener(new ScrollBarListener()); pannel.add(scrollbar); frame.add(pannel); frame.pack(); frame.show();&#125; AdjustmentListenerç”¨æ¥ç›‘å¬æ»šåŠ¨æ¡çš„å€¼å˜åŒ–ï¼Œå…¶å®ç°å¦‚ä¸‹ï¼š 123456789class ScrollBarListener implements AdjustmentListener&#123; @Override public void adjustmentValueChanged(AdjustmentEvent e) &#123; // TODO Auto-generated method stub System.out.println(e.getValue()); &#125; &#125; ScrollBarç»„ä»¶ä¸­å¸¸ç”¨æ–¹æ³•åˆ—ä¸¾å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657//æ„é€ æ–¹æ³•public Scrollbar();//orientationå‚æ•°è®¾ç½®æ»šåŠ¨æ¡çš„æ»šåŠ¨é˜²çº¿/*public static final int HORIZONTAL = 0; //æ°´å¹³æ»šåŠ¨public static final int VERTICAL = 1; //ç«–ç›´æ»šåŠ¨*/public Scrollbar(int orientation);/*value:æ»šåŠ¨æ¡çš„åˆå§‹å€¼visible:æ»šåŠ¨æ¡çš„å¯è§å€¼(æ¯”ä¾‹ï¼Œç¡®å®šæ»‘å—çš„å°ºå¯¸)minimum:æ»šåŠ¨æ¡çš„æœ€å°å€¼maximum:æ»šåŠ¨æ¡çš„æœ€å¤§å€¼*/public Scrollbar(int orientation, int value, int visible, int minimum, int maximum);//è·å–æ»šåŠ¨æ¡æ–¹å‘public int getOrientation();//è®¾ç½®æ»šåŠ¨æ¡æ–¹å‘public void setOrientation(int orientation);//è·å–æ»šåŠ¨æ¡å½“å‰å€¼public int getValue();//è®¾ç½®æ»šåŠ¨æ¡å½“å‰å€¼public void setValue(int newValue);//è·å–æ»šåŠ¨æ¡æœ€å°å€¼public int getMinimum();//è®¾ç½®æ»šåŠ¨æ¡æœ€å°å€¼public void setMinimum(int newMinimum);//è·å–æ»šåŠ¨æ¡æœ€å¤§å€¼public int getMaximum();//è®¾ç½®æ»šåŠ¨æ¡æœ€å¤§å€¼public void setMaximum(int newMaximum);//è·å–æ»šåŠ¨æ¡å¯è§å€¼public int getVisibleAmount();//è·å–æ»šåŠ¨æ¡å¯è§å€¼ å·²ç»å¼ƒç”¨ï¼Œä½¿ç”¨ä¸Šé¢æ–¹æ³•public int getVisible();//è®¾ç½®æ»šåŠ¨æ¡å¯è§å€¼public void setVisibleAmount(int newAmount);//è®¾ç½®å•å…ƒå¢å€¼public void setUnitIncrement(int v);//è·å–å•å…ƒå¢å€¼public int getUnitIncrement();//è®¾ç½®å—å¢å€¼public void setBlockIncrement(int v);//è·å–å—å¢å€¼public int getBlockIncrement() ;//è®¾ç½® å½“å‰å€¼ å¯è§å€¼ æœ€å°å€¼å’Œæœ€å¤§å€¼public void setValues(int value, int visible, int minimum, int maximum);//è·å–å€¼æ˜¯å¦æ­£åœ¨è°ƒèŠ‚public boolean getValueIsAdjusting();//è®¾ç½®å€¼æ˜¯å¦æ­£åœ¨è°ƒèŠ‚public void setValueIsAdjusting(boolean b);//è®¾ç½®æ»šåŠ¨æ¡å€¼å˜åŒ–çš„ç›‘å¬public synchronized void addAdjustmentListener(AdjustmentListener l) ;//ç§»é™¤ç›‘å¬public synchronized void removeAdjustmentListener(AdjustmentListener l);//è·å–æ‰€æœ‰ç›‘å¬è€…public synchronized AdjustmentListener[] getAdjustmentListeners();","categories":[{"name":"Java","slug":"Java","permalink":"http://huishao.cc/categories/Java/"}],"tags":[],"keywords":[{"name":"Java","slug":"Java","permalink":"http://huishao.cc/categories/Java/"}]},{"title":"Javaå¼€å‘GUIä¹‹Menuèœå•","slug":"335Javaå¼€å‘GUIä¹‹Menuèœå•","date":"2017-06-12T16:00:00.000Z","updated":"2021-07-14T11:29:13.743Z","comments":true,"path":"2017/06/13/335Javaå¼€å‘GUIä¹‹Menuèœå•/","link":"","permalink":"http://huishao.cc/2017/06/13/335Javaå¼€å‘GUIä¹‹Menuèœå•/","excerpt":"","text":"Javaå¼€å‘GUIä¹‹Menuèœå•åœ¨MacOSä¸Šçš„è½¯ä»¶éƒ½æœ‰ä¸€ä¸ªèœå•æ ï¼Œä¼šæµ®ç°åœ¨å±å¹•é¡¶éƒ¨ï¼ŒJavaçš„awtåŒ…ä¸­ä¹Ÿæä¾›äº†æ„å»ºèœå•åŠŸèƒ½çš„ç›¸å…³ç»„ä»¶ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334static void MenuTest()&#123; Frame frame = new Frame(\"Menu\"); //åˆ›å»ºèœå•æ  MenuBar menuBar = new MenuBar(); //è®¾ç½®èœå•æ  frame.setMenuBar(menuBar); //åˆ›å»ºèœå• Menu m1 = new Menu(\"æ–‡ä»¶\", true); //å‘èœå•æ ä¸­æ·»åŠ èœå• menuBar.add(m1); //åˆ›å»ºé€‰é¡¹ MenuItem menuItem1 = new MenuItem(\"æ–°å»º\"); MenuItem menuItem2 = new MenuItem(\"æ‰“å¼€\"); //å‘èœå•ä¸­æ·»åŠ é€‰é¡¹ m1.add(menuItem1); m1.add(menuItem2); Menu m2 = new Menu(\"ç¼–è¾‘\", true); menuBar.add(m2); MenuItem menuItem3 = new MenuItem(\"å¤åˆ¶\"); MenuItem menuItem4 = new MenuItem(\"ç²˜è´´\"); m2.add(menuItem3); m2.add(menuItem4); Menu m3 = new Menu(\"å¸®åŠ©\", true); menuBar.setHelpMenu(m3); MenuItem menuItem5 = new MenuItem(\"é—®è¯¢\"); MenuItem menuItem6 = new MenuItem(\"è”ç³»æˆ‘ä»¬\"); m3.add(menuItem5); m3.add(menuItem6); frame.pack(); frame.show();&#125; æ•ˆæœå¦‚ä¸‹ï¼š MenuBarç”¨æ¥åˆ›å»ºèœå•æ ï¼Œå…¶ä¸­å¸¸ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š 123456789101112131415161718//æ„é€ æ–¹æ³•public MenuBar();//è·å–å¸®åŠ©èœå•public Menu getHelpMenu();//è®¾ç½®å¸®åŠ©èœå•public void setHelpMenu(Menu m);//æ·»åŠ èœå•public Menu add(Menu m);//æ ¹æ®ä¸‹æ ‡ç§»é™¤èœå•public void remove(int index);//ç§»é™¤ä¸€ä¸ªèœå•public void remove(MenuComponent m);//è·å–èœå•æ ä¸­èœå•ä¸ªæ•°public int getMenuCount();//è·å–èœå•æ ä¸­èœå•ä¸ªæ•° å·²ç»å¼ƒç”¨ ä½¿ç”¨ä¸Šé¢çš„æ–¹æ³•public int countMenus();//æ ¹æ®ä¸‹æ ‡è·å–èœå•å¯¹è±¡public Menu getMenu(int i); Menuç±»ä¸ºèœå•å¯¹è±¡ï¼Œå…¶ä¸­å¯ä»¥æ·»åŠ é€‰é¡¹ç±»MenuItemå¯¹è±¡ï¼ŒMenuç±»ä¸­å¸¸ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132//æ„é€ å‡½æ•°public Menu();//labelå‚æ•°è®¾ç½®èœå•çš„æ ‡é¢˜public Menu(String label);//å¸ƒå°”å€¼å‚æ•°è®¾ç½®æ˜¯å¦ä¸ºtear-offèœå•public Menu(String label, boolean tearOff);//è·å–èœå•æ˜¯å¦ä¸ºtear-offèœå•public boolean isTearOff();//è·å–é€‰é¡¹ä¸ªæ•°public int getItemCount();//è·å–é€‰é¡¹ä¸ªæ•° å·²ç»å¼ƒç”¨ ä½¿ç”¨ä¸Šé¢æ–¹æ³•public int countItems();//è·å–æŸä¸ªé€‰é¡¹å¯¹è±¡public MenuItem getItem(int index);//æ·»åŠ ä¸€ä¸ªèœå•é€‰é¡¹public MenuItem add(MenuItem mi);//æ·»åŠ ä¸€ä¸ªæŒ‡å®šæ ‡é¢˜çš„èœå•é¡¹public void add(String label);//æ’å…¥ä¸€ä¸ªèœå•é¡¹public void insert(MenuItem menuitem, int index);//æ’å…¥ä¸€ä¸ªæŒ‡å®šæ ‡é¢˜çš„èœå•é¡¹public void insert(String label, int index) ;//æ·»åŠ åˆ†å‰²çº¿public void addSeparator();//æ’å…¥åˆ†å‰²çº¿public void insertSeparator(int index);//æ ¹æ®ä¸‹æ ‡ç§»é™¤ä¸€ä¸ªé€‰é¡¹public void remove(int index);//ç§»é™¤ä¸€ä¸ªé€‰é¡¹public void remove(MenuComponent item);//ç§»é™¤æ‰€æœ‰é€‰é¡¹public void removeAll() ; ä¸‹é¢æ˜¯MenuItemç±»çš„æ–¹æ³•è§£æï¼š 1234567891011121314151617181920212223242526//æ„é€ æ–¹æ³•public MenuItem();//labelå‚æ•°è®¾ç½®é€‰é¡¹æ ‡é¢˜public MenuItem(String label);//MenuShortcutä¸ºè®¾ç½®å¿«æ·é”®public MenuItem(String label, MenuShortcut s);//è·å–é€‰é¡¹æ ‡é¢˜public String getLabel() ;//è®¾ç½®é€‰é¡¹æ ‡é¢˜public synchronized void setLabel(String label);//è·å–é€‰é¡¹æ˜¯å¦æœ‰æ•ˆpublic boolean isEnabled();//è®¾ç½®é€‰é¡¹public synchronized void setEnabled(boolean b);//è·å–å¿«æ·é”®public MenuShortcut getShortcut();//è®¾ç½®å¿«æ·é”®public void setShortcut(MenuShortcut s);//åˆ é™¤å¿«æ·é”®public void deleteShortcut();//æ·»åŠ äº‹ä»¶ç›‘å¬public synchronized void addActionListener(ActionListener l);//ç§»é™¤äº‹ä»¶ç›‘å¬public synchronized void removeActionListener(ActionListener l);//è·å–æ‰€æœ‰ç›‘å¬è€…public synchronized ActionListener[] getActionListeners();","categories":[{"name":"Java","slug":"Java","permalink":"http://huishao.cc/categories/Java/"}],"tags":[],"keywords":[{"name":"Java","slug":"Java","permalink":"http://huishao.cc/categories/Java/"}]},{"title":"Javaå¼€å‘GUIä¹‹åˆ—è¡¨","slug":"334Javaå¼€å‘GUIä¹‹åˆ—è¡¨","date":"2017-06-08T16:00:00.000Z","updated":"2021-07-14T11:28:28.714Z","comments":true,"path":"2017/06/09/334Javaå¼€å‘GUIä¹‹åˆ—è¡¨/","link":"","permalink":"http://huishao.cc/2017/06/09/334Javaå¼€å‘GUIä¹‹åˆ—è¡¨/","excerpt":"","text":"Javaå¼€å‘GUIä¹‹åˆ—è¡¨awtåŒ…ä¸­çš„Listæ§ä»¶å¯ä»¥åˆ›å»ºä¸€ä¸ªé€‰æ‹©åˆ—è¡¨ï¼Œæ­¤åˆ—è¡¨å¯ä»¥æ”¯æŒå•é€‰ï¼Œä¹Ÿå¯ä»¥æ”¯æŒå¤šé€‰ã€‚ 12345678910111213141516171819202122static void ListTest()&#123; Frame frame = new Frame(\"List\"); Panel pannel = new Panel(); List list = new List(); //å‘åˆ—è¡¨ä¸­æ·»åŠ é€‰é¡¹ list.add(\"é¸£äºº\"); list.add(\"ä½åŠ©\"); list.add(\"å¡å¡è¥¿\"); list.add(\"å°æ¨±\"); list.add(\"é‡‰\"); list.add(\"å¤§è›‡ä¸¸\"); //è®¾ç½®å…è®¸å¤šé€‰ list.setMultipleSelections(true); //æ·»åŠ åˆ—è¡¨é€‰é¡¹åˆ‡æ¢çš„ç›‘å¬ list.addItemListener(new ListListener()); //æ·»åŠ åˆ—è¡¨è¡Œä¸ºçš„ç›‘å¬ ä¾‹å¦‚åŒå‡»æŸé¡¹ list.addActionListener(new ListListener()); pannel.add(list); frame.add(pannel); frame.pack(); frame.show();&#125; ListListenerç±»çš„ç®€å•å®ç°å¦‚ä¸‹ï¼š 12345678910111213141516class ListListener implements ActionListener,ItemListener&#123; @Override public void itemStateChanged(ItemEvent e) &#123; // TODO Auto-generated method stub System.out.println(e.getSource()); &#125; @Override public void actionPerformed(ActionEvent e) &#123; // TODO Auto-generated method stub System.out.println(e); System.out.println(\"======\"); &#125; &#125; Listæ§ä»¶ä¸­çš„æ–¹æ³•è§£æï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374//æ„é€ æ–¹æ³•public List();//rows:è®¾ç½®è¡Œæ•°public List(int rows);//è®¾ç½®è¡Œæ•°ä¸æ˜¯å¦æ”¯æŒå¤šé€‰ macä¸Šä½¿ç”¨commandå¯ä»¥å¤šé€‰public List(int rows, boolean multipleMode);//è·å–åˆ—è¡¨ä¸­é€‰é¡¹ä¸ªæ•°public int getItemCount();//è·å–åˆ—è¡¨ä¸­é€‰é¡¹ä¸ªæ•° å·²ç»å¼ƒç”¨ ä½¿ç”¨ä¸Šé¢çš„æ–¹æ³•public int countItems();//è·å–æŸä¸ªä½ç½®çš„é€‰é¡¹public String getItem(int index);//è·å–æ‰€æœ‰é€‰é¡¹public synchronized String[] getItems();//æ·»åŠ ä¸€ä¸ªé€‰é¡¹public void add(String item);//æ·»åŠ ä¸€ä¸ªé€‰é¡¹ å·²ç»å¼ƒç”¨ ä½¿ç”¨ä¸Šé¢çš„æ–¹æ³•public void addItem(String item);//åœ¨æŒ‡å®šä½ç½®æ·»åŠ ä¸€ä¸ªé€‰é¡¹public void add(String item, int index);//åœ¨æŒ‡å®šä½ç½®æ·»åŠ ä¸€ä¸ªé€‰é¡¹ å·²ç»å¼ƒç”¨ ä½¿ç”¨ä¸Šé¢çš„æ–¹æ³•public synchronized void addItem(String item, int index);//æ›¿æ¢ä¸€ä¸ªä½ç½®çš„é€‰é¡¹public synchronized void replaceItem(String newValue, int index);//åˆ é™¤æ‰€æœ‰é€‰é¡¹public void removeAll();//åˆ é™¤æ‰€æœ‰é€‰é¡¹ å·²ç»å¼ƒç”¨ ä½¿ç”¨ä¸Šé¢çš„æ–¹æ³•public synchronized void clear();//åˆ é™¤æŸä¸ªé€‰é¡¹public synchronized void remove(String item);//ç§»é™¤æŸä¸ªä½ç½®çš„é€‰é¡¹public void remove(int position);//åˆ é™¤æŸä¸ªä½ç½®çš„é€‰é¡¹ å·²ç»å¼ƒç”¨ ä½¿ç”¨ä¸Šé¢æ–¹æ³•public void delItem(int position);//è·å–é€‰ä¸­çš„é€‰é¡¹çš„ä½ç½®public synchronized int getSelectedIndex();//è·å–æ‰€æœ‰é€‰ä¸­çš„é€‰é¡¹çš„ä½ç½®public synchronized int[] getSelectedIndexes();//è·å–é€‰ä¸­çš„é€‰é¡¹public synchronized String getSelectedItem();//è·å–æ‰€æœ‰é€‰ä¸­çš„é€‰é¡¹public synchronized String[] getSelectedItems();//è·å–æ‰€æœ‰é€‰ä¸­çš„é€‰é¡¹public Object[] getSelectedObjects();//ä»£ç é€‰ä¸­æŸä¸ªä½ç½®çš„é€‰é¡¹public void select(int index);//ä»£ç å–æ¶ˆæŸä¸ªé€‰é¡¹çš„é€‰ä¸­public synchronized void deselect(int index);//åˆ¤æ–­æŸä¸ªä½ç½®çš„é€‰é¡¹æ˜¯å¦é€‰ä¸­public boolean isIndexSelected(int index);//åˆ¤æ–­æŸä¸ªä½ç½®çš„é€‰é¡¹æ˜¯å¦é€‰ä¸­ å·²ç»å¼ƒç”¨ ä½¿ç”¨ä¸Šé¢æ–¹æ³•public boolean isSelected(int index);//è·å–è¡Œæ•°public int getRows();//è·å–æ˜¯å¦å¯å¤šé€‰public boolean isMultipleMode();//è·å–æ˜¯å¦å…è®¸å¤šé€‰ å·²ç»å¼ƒç”¨ ä½¿ç”¨ä¸Šé¢æ–¹æ³•public boolean allowsMultipleSelections();//è®¾ç½®æ˜¯å¦å…è®¸å¤šé€‰public void setMultipleMode(boolean b);//è®¾ç½®æ˜¯å¦å…è®¸å¤šé€‰ å·²ç»å¼ƒç”¨ ä½¿ç”¨ä¸Šé¢æ–¹æ³•public synchronized void setMultipleSelections(boolean b);//æ·»åŠ é€‰é¡¹é€‰ä¸­çŠ¶æ€ç›‘å¬public synchronized void addItemListener(ItemListener l);//ç§»é™¤é€‰é¡¹é€‰ä¸­çŠ¶æ€ç›‘å¬public synchronized void removeItemListener(ItemListener l);//è·å–ç›‘å¬è€…public synchronized ItemListener[] getItemListeners();//æ·»åŠ ç”¨æˆ·è¡Œä¸ºç›‘å¬public synchronized void addActionListener(ActionListener l);//ç§»é™¤ç”¨æˆ·è¡Œä¸ºç›‘å¬public synchronized void removeActionListener(ActionListener l);//è·å–ç›‘å¬public synchronized ActionListener[] getActionListeners();","categories":[{"name":"Java","slug":"Java","permalink":"http://huishao.cc/categories/Java/"}],"tags":[],"keywords":[{"name":"Java","slug":"Java","permalink":"http://huishao.cc/categories/Java/"}]},{"title":"Javaå¼€å‘GUIä¹‹Labelæ ‡ç­¾","slug":"333Javaå¼€å‘GUIä¹‹Labelæ ‡ç­¾","date":"2017-06-06T16:00:00.000Z","updated":"2021-07-14T11:27:47.615Z","comments":true,"path":"2017/06/07/333Javaå¼€å‘GUIä¹‹Labelæ ‡ç­¾/","link":"","permalink":"http://huishao.cc/2017/06/07/333Javaå¼€å‘GUIä¹‹Labelæ ‡ç­¾/","excerpt":"","text":"Javaå¼€å‘GUIä¹‹Labelæ ‡ç­¾Labelæ§ä»¶æ˜¯awtåŒ…ä¸­æœ€ç®€å•çš„å‡ ä¸ªè§†å›¾æ§ä»¶ä¹‹ä¸€ï¼Œå…¶ç”¨æ¥æ˜¾ç¤ºå›ºå®šçš„æ–‡æœ¬ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011Frame frame = new Frame(\"Label\");Panel pannel = new Panel();Label label = new Label(\"åˆšå¥½é‡è§ä½ \", Label.LEFT);pannel.add(label);Label label2 = new Label(\"å¦‚æœå†ç›¸é‡\", Label.CENTER);pannel.add(label2);Label label3 = new Label(\"æˆ‘ä¼šè®°å¾—ä½ \", Label.RIGHT);pannel.add(label3);frame.add(pannel);frame.pack();frame.show(); Labelç±»ä¸­å®šä¹‰äº†3ä¸ªé™æ€å˜é‡ï¼Œå…¶ä¸­LEFTè¡¨ç¤ºæ–‡æœ¬å·¦å¯¹é½ï¼ŒCENTERè¡¨ç¤ºæ–‡æœ¬å±…ä¸­å¯¹é½ï¼ŒRIGHTè¡¨ç¤ºå³å¯¹é½ã€‚ 123456789101112//åˆå§‹åŒ–æ–¹æ³• é»˜è®¤å·¦å¯¹é½public Label();public Label(String text);public Label(String text, int alignment);//è·å–æ–‡æœ¬å¯¹é½æ¨¡å¼public int getAlignment(); //è®¾ç½®æ–‡æœ¬å¯¹é½æ¨¡å¼public synchronized void setAlignment(int alignment);//è·å–æ ‡ç­¾æ–‡æœ¬public String getText();//è®¾ç½®æ ‡ç­¾æ–‡æœ¬public void setText(String text);","categories":[{"name":"Java","slug":"Java","permalink":"http://huishao.cc/categories/Java/"}],"tags":[],"keywords":[{"name":"Java","slug":"Java","permalink":"http://huishao.cc/categories/Java/"}]},{"title":"Javaå¼€å‘GUIä¹‹Dialogå¼¹å‡ºçª—å£","slug":"332Javaå¼€å‘GUIä¹‹Dialogå¼¹å‡ºçª—å£","date":"2017-06-04T16:00:00.000Z","updated":"2021-07-14T11:26:51.896Z","comments":true,"path":"2017/06/05/332Javaå¼€å‘GUIä¹‹Dialogå¼¹å‡ºçª—å£/","link":"","permalink":"http://huishao.cc/2017/06/05/332Javaå¼€å‘GUIä¹‹Dialogå¼¹å‡ºçª—å£/","excerpt":"","text":"Javaå¼€å‘GUIä¹‹Dialogå¼¹å‡ºçª—å£ æ„é€ æ–¹æ³•ï¼š 12345678910111213141516171819202122232425//åˆ›å»ºå¼¹å‡ºçª— ownerä¸ºæ‹¥æœ‰å…¶çš„çª—å£public Dialog(Frame owner);//åˆ›å»ºå¼¹å‡ºçª—ï¼Œmodalè®¾ç½®å…¶æ˜¯å¦æ˜¯æ¨¡æ€çš„ å¦‚æœæ˜¯æ¨¡æ€çš„ åˆ™å¼¹å‡ºçª—æ˜¾ç¤ºæ—¶ä¸èƒ½æ“ä½œå…¶ä»–çª—å£public Dialog(Frame owner, boolean modal);//åˆ›å»ºå¼¹å‡ºçª— titleè®¾ç½®å¼¹å‡ºçª—æ ‡é¢˜public Dialog(Frame owner, String title);//åŒä¸Špublic Dialog(Frame owner, String title, boolean modal);public Dialog(Frame owner, String title, boolean modal, GraphicsConfiguration gc); public Dialog(Dialog owner);public Dialog(Dialog owner, String title);public Dialog(Dialog owner, String title, boolean modal);public Dialog(Dialog owner, String title, boolean modal, GraphicsConfiguration gc);public Dialog(Window owner);public Dialog(Window owner, String title);/*ModalityTypeæ˜¯æ¨¡å¼æšä¸¾MODELESSï¼šä¸è¦†ç›–ä»»ä½•çª—å£DOCUMENT_MODALï¼šé˜»æ­¢æ–‡æ¡£å†…çš„æ‰€æœ‰çª—å£APPLICATION_MODALï¼šé˜»æ­¢åº”ç”¨ç¨‹åºçš„æ‰€æœ‰çª—å£TOOLKIT_MODAL*/public Dialog(Window owner, ModalityType modalityType);public Dialog(Window owner, String title, ModalityType modalityType);public Dialog(Window owner, String title, ModalityType modalityType, GraphicsConfiguration gc); å…¶ä»–å¸¸ç”¨æ–¹æ³•ï¼š 12345678910111213141516171819202122232425262728//è·å–å¼¹å‡ºçª—æ˜¯å¦æ˜¯æ¨¡æ€çš„public boolean isModal();//è®¾ç½®å¼¹å‡ºçª—æ˜¯å¦ä¸ºæ¨¡æ€çª—å£public void setModal(boolean modal);//è·å–å¼¹å‡ºçª—æ¨¡æ€ç±»å‹public ModalityType getModalityType();//è®¾ç½®å¼¹å‡ºçª—æ¨¡æ€ç±»å‹public void setModalityType(ModalityType type);//è·å–å¼¹å‡ºçª—æ ‡é¢˜public String getTitle();//è®¾ç½®å¼¹å‡ºçª—æ ‡é¢˜public void setTitle(String title);//è®¾ç½®å¼¹å‡ºçª—æ˜¾ç¤ºæˆ–éšè—public void setVisible(boolean b);//æ˜¾ç¤ºå¼¹å‡ºçª— å·²ç»å¼ƒç”¨ ä½¿ç”¨setVisibleæ–¹æ³•public void show();//éšè—å¼¹å‡ºçª— å·²ç»å¼ƒç”¨ ä½¿ç”¨setVisibleæ–¹æ³•public void hide();//è·å–å¼¹å‡ºçª—æ˜¯å¦å°ºå¯¸å¯è°ƒæ•´public boolean isResizable();//è®¾ç½®å¼¹å‡ºçª—å°ºå¯¸æ˜¯å¦å¯è°ƒæ•´public void setResizable(boolean resizable);//è®¾ç½®å¼¹å‡ºçª—é€æ˜åº¦public void setOpacity(float opacity);//è®¾ç½®å¼¹å‡ºçª—å½¢çŠ¶public void setShape(Shape shape);//è®¾ç½®å¼¹å‡ºçª—èƒŒæ™¯è‰²public void setBackground(Color bgColor);","categories":[{"name":"Java","slug":"Java","permalink":"http://huishao.cc/categories/Java/"}],"tags":[],"keywords":[{"name":"Java","slug":"Java","permalink":"http://huishao.cc/categories/Java/"}]},{"title":"Javaå¼€å‘GUIä¹‹é€‰æ‹©åˆ—è¡¨","slug":"331Javaå¼€å‘GUIä¹‹é€‰æ‹©åˆ—è¡¨","date":"2017-06-01T16:00:00.000Z","updated":"2021-07-14T11:26:12.559Z","comments":true,"path":"2017/06/02/331Javaå¼€å‘GUIä¹‹é€‰æ‹©åˆ—è¡¨/","link":"","permalink":"http://huishao.cc/2017/06/02/331Javaå¼€å‘GUIä¹‹é€‰æ‹©åˆ—è¡¨/","excerpt":"","text":"Javaå¼€å‘GUIä¹‹é€‰æ‹©åˆ—è¡¨é€‰æ‹©åˆ—è¡¨åœ¨å¤šä¸ªé€‰é¡¹ä¾›ç”¨æˆ·è¿›è¡Œé€‰æ‹©çš„åœºæ™¯ä¸­ä½¿ç”¨å¹¿æ³›ã€‚å…¶ä½¿ç”¨ä¹Ÿéå¸¸ç®€å•ï¼ŒJavaçš„awtåŒ…ä¸­æä¾›äº†Choiceæ§ä»¶ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819public static Label label = new Label();static void choseTest()&#123; Frame frame = new Frame(\"BUTTON\"); Panel pannel = new Panel(); //åˆ›å»ºé€‰æ‹©åˆ—è¡¨ Choice choice = new Choice(); //æ·»åŠ é€‰é¡¹ choice.add(\"é¸£äºº\"); choice.addItem(\"ä½åŠ©\"); choice.insert(\"å¡å¡è¥¿\", 0); //æ·»åŠ ç”¨æˆ·é€‰æ‹©æ”¹å˜çš„ç›‘å¬ choice.addItemListener(new MyItemListener()); pannel.add(choice); label.setText(choice.getSelectedItem()+\"ä¸€å®šå¯ä»¥æˆä¸ºæœ€NBçš„ç«å½±ï¼\"); pannel.add(label); frame.add(pannel); frame.pack(); frame.show();&#125; MyItemListenerç±»å®ç°å¦‚ä¸‹ï¼š 12345678910111213class MyItemListener implements ItemListener&#123; @Override public void itemStateChanged(ItemEvent e) &#123; // TODO Auto-generated method stub if (e.getSource().getClass()==Choice.class) &#123; ButtonTest.label.setText(e.getItem()+\"ä¸€å®šå¯ä»¥æˆä¸ºæœ€NBçš„ç«å½±ï¼\"); &#125;else&#123; System.out.println(((Checkbox)e.getSource()).getState()); &#125; &#125; &#125; è¿è¡Œæ•ˆæœå¦‚ä¸‹ï¼š Choiceç±»è§£æå¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930//è·å–é€‰é¡¹ä¸ªæ•°public int getItemCount();//è·å–æŸä¸ªé€‰é¡¹public String getItem(int index);//è¿½åŠ ä¸€ä¸ªé€‰é¡¹public void add(String item);public void addItem(String item);//æ’å…¥ä¸€ä¸ªé€‰é¡¹public void insert(String item, int index);//é€šè¿‡æ ‡é¢˜åˆ é™¤ä¸€ä¸ªé€‰é¡¹public void remove(String item);//é€šè¿‡ä½ç½®åˆ é™¤ä¸€ä¸ªé€‰é¡¹public void remove(int position);//åˆ é™¤æ‰€æœ‰é€‰é¡¹public void removeAll();//è·å–å½“å‰é€‰ä¸­çš„é€‰é¡¹æ ‡é¢˜public synchronized String getSelectedItem();//è·å–å½“å‰é€‰ä¸­çš„é€‰é¡¹ä½ç½®public int getSelectedIndex();//ç”¨ä»£ç é€‰ä¸­æŸä¸ªä½ç½®çš„é€‰é¡¹public synchronized void select(int pos);//ç”¨ä»£ç é€‰ä¸­æŸä¸ªæ ‡é¢˜çš„é€‰é¡¹public synchronized void select(String str);//æ·»åŠ ç”¨æˆ·é€‰æ‹©ç›‘å¬public synchronized void addItemListener(ItemListener l);//ç§»é™¤ç›‘å¬public synchronized void removeItemListener(ItemListener l);//è·å–æ‰€æœ‰ç›‘å¬å¯¹è±¡public synchronized ItemListener[] getItemListeners();public &lt;T extends EventListener&gt; T[] getListeners(Class&lt;T&gt; listenerType);","categories":[{"name":"Java","slug":"Java","permalink":"http://huishao.cc/categories/Java/"}],"tags":[],"keywords":[{"name":"Java","slug":"Java","permalink":"http://huishao.cc/categories/Java/"}]},{"title":"Javaå¼€å‘GUIä¹‹å•å¤é€‰æ¡†","slug":"330Javaå¼€å‘GUIä¹‹å•å¤é€‰æ¡†","date":"2017-05-31T16:00:00.000Z","updated":"2021-07-14T08:15:48.256Z","comments":true,"path":"2017/06/01/330Javaå¼€å‘GUIä¹‹å•å¤é€‰æ¡†/","link":"","permalink":"http://huishao.cc/2017/06/01/330Javaå¼€å‘GUIä¹‹å•å¤é€‰æ¡†/","excerpt":"","text":"Javaå¼€å‘GUIä¹‹å•å¤é€‰æ¡†å•å¤é€‰æ¡†åœ¨å¤„ç†ä¸€äº›ç”¨æˆ·é€‰é¡¹æ—¶ååˆ†æ–¹ä¾¿ã€‚åœ¨Javaçš„GUIä½“ç³»ä¸­ï¼Œå¤é€‰æ¡†ä½¿ç”¨Checkboxç±»æ¥åˆ›å»ºï¼Œå•é€‰æ¡†å®é™…ä¸Šæ˜¯å°†å¤šä¸ªå¤é€‰æ¡†ç»“åˆæˆä¸ºç»„ï¼ŒåŒä¸€ç»„çš„å¤é€‰æ¡†åŒæ—¶åªèƒ½æœ‰ä¸€ä¸ªè¢«é€‰ä¸­ã€‚ 12345678910111213141516171819202122232425262728Frame frame = new Frame(\"BUTTON\");Panel pannel = new Panel();frame.add(pannel);MyItemListener listener = new MyItemListener();//æ— å‚çš„æ„é€ æ–¹æ³•Checkbox checkbox1 = new Checkbox();//è®¾ç½®æ˜¾ç¤ºæ–‡æœ¬checkbox1.setLabel(\"æ˜¯å¦å·²é€€æ¬¾\");//è®¾ç½®é€‰ä¸­çŠ¶æ€checkbox1.setState(true);//æ·»åŠ çŠ¶æ€å˜åŒ–ç›‘å¬checkbox1.addItemListener(listener);//ä½¿ç”¨è®¾ç½®æ–‡æœ¬å’ŒçŠ¶æ€çš„æ„é€ æ–¹æ³•Checkbox checkbox2 = new Checkbox(\"æ˜¯å¦å¼€é€šé¢å¤–æœåŠ¡\", false);checkbox2.addItemListener(listener);pannel.add(checkbox1);pannel.add(checkbox2);//åˆ›å»ºç»„CheckboxGroup group = new CheckboxGroup();Checkbox checkbox3 = new Checkbox(\"ç”·\", false);checkbox3.addItemListener(listener);checkbox3.setCheckboxGroup(group);Checkbox checkbox4 = new Checkbox(\"å¥³\", false, group);checkbox4.addItemListener(listener);pannel.add(checkbox3);pannel.add(checkbox4);frame.pack();frame.show(); MyItemListenerå®ç°äº†ItemListeneræ¥å£ï¼Œå¦‚ä¸‹ï¼š 123456789class MyItemListener implements ItemListener&#123; @Override public void itemStateChanged(ItemEvent e) &#123; // TODO Auto-generated method stub System.out.println(((Checkbox)e.getSource()).getState()); &#125; &#125; æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š Checkboxç±»å¸¸ç”¨æ–¹æ³•æ±‡æ€»ï¼š 12345678910111213141516171819//è·å–æ ‡é¢˜æ–‡æœ¬public String getLabel();//è®¾ç½®æ ‡é¢˜public void setLabel(String label);//è·å–å½“å‰å¤é€‰æ¡†çš„é€‰ä¸­çŠ¶æ€public boolean getState();//è®¾ç½®å½“å‰å¤é€‰æ¡†çš„é€‰ä¸­çŠ¶æ€public void setState(boolean state);//è·å–å¤é€‰æ¡†æ‰€åœ¨çš„ç»„public CheckboxGroup getCheckboxGroup();//è®¾ç½®å¤é€‰æ¡†ç»„public void setCheckboxGroup(CheckboxGroup g);//æ·»åŠ çŠ¶æ€ç›‘å¬å¯¹è±¡public synchronized void addItemListener(ItemListener l);//ç§»é™¤çŠ¶æ€ç›‘å¬å¯¹è±¡public synchronized void removeItemListener(ItemListener l);//è·å–çŠ¶æ€ç›‘å¬å¯¹è±¡public synchronized ItemListener[] getItemListeners();public &lt;T extends EventListener&gt; T[] getListeners(Class&lt;T&gt; listenerType); CheckboxGroupå¸¸ç”¨æ–¹æ³•æ±‡æ€»ï¼š 1234//è·å–ç»„ä¸­å½“å‰é€‰ä¸­çš„checkboxpublic Checkbox getSelectedCheckbox();//è®¾ç½®å½“å‰é€‰ä¸­çš„checkboxpublic void setSelectedCheckbox(Checkbox box);","categories":[{"name":"Java","slug":"Java","permalink":"http://huishao.cc/categories/Java/"}],"tags":[],"keywords":[{"name":"Java","slug":"Java","permalink":"http://huishao.cc/categories/Java/"}]},{"title":"Javaå¼€å‘GUIä¹‹Buttonæ§ä»¶","slug":"329Javaå¼€å‘GUIä¹‹Buttonæ§ä»¶","date":"2017-05-25T16:00:00.000Z","updated":"2021-07-14T08:14:58.889Z","comments":true,"path":"2017/05/26/329Javaå¼€å‘GUIä¹‹Buttonæ§ä»¶/","link":"","permalink":"http://huishao.cc/2017/05/26/329Javaå¼€å‘GUIä¹‹Buttonæ§ä»¶/","excerpt":"","text":"Javaå¼€å‘GUIä¹‹Buttonæ§ä»¶Javaä¸­çš„awtåŒ…æä¾›äº†ä¸°å¯Œçš„ç”¨æˆ·ç•Œé¢ç»„ä»¶ã€‚é‡è¦çš„æ˜¯ï¼ŒJavaçš„è·¨å¹³å°æ€§ä½¿ç”¨awtåŒ…å¯ä»¥åœ¨Windowsï¼ŒMacOSç­‰å¹³å°åˆ›å»ºæ¡Œé¢è½¯ä»¶ã€‚æœ¬ç¯‡åšå®¢æ€»ç»“Buttonæ§ä»¶çš„ç®€å•ä½¿ç”¨ã€‚ 1234567891011121314151617181920212223242526272829303132package App;import java.awt.*;import java.awt.event.ActionEvent;import java.awt.event.ActionListener;public class ButtonTest &#123; public static void main(String[] args ) &#123; //åˆ›å»ºé¢æ¿ Frame frame = new Frame(\"BUTTON\"); //åˆ›å»ºæŒ‰é’® Button button1 = new Button(); //è®¾ç½®æŒ‰é’®æ ‡é¢˜ button1.setLabel(\"æŒ‰é’®\"); //è®¾ç½®æŒ‰é’®æ ‡è®° ç”¨åœ¨è§¦å‘æ–¹æ³•ä¸­åˆ†åŒºæŒ‰é’® button1.setActionCommand(\"tag1\"); //è·å–æŒ‰é’®æ ‡é¢˜ System.out.println(button1.getLabel()); //æ·»åŠ æŒ‰é’® frame.add(button1); //æ·»åŠ äº¤äº’ç›‘å¬ button1.addActionListener(new MyActionListener()); frame.pack(); frame.show(); &#125;&#125;class MyActionListener implements ActionListener&#123; @Override public void actionPerformed(ActionEvent e) &#123; // TODO Auto-generated method stub //è¿™é‡Œå¯ä»¥å–åˆ°æŒ‰é’®è®¾ç½®çš„actionCommandå€¼ System.out.println(e.getActionCommand()); &#125;&#125; ä¸addActionCommandæ–¹æ³•å¯¹åº”ï¼ŒButtonç±»ä¸­è¿˜æœ‰ä¸€äº›ç§»é™¤ç›‘å¬ä¸è·å–ç›‘å¬è€…çš„æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š 123456//ç§»é™¤ä¸€ä¸ªç›‘å¬è€…public synchronized void removeActionListener(ActionListener l);//è·å–ç›‘å¬è€…åˆ—è¡¨public synchronized ActionListener[] getActionListeners();//è·å–ç›‘å¬è€…åˆ—è¡¨ æ³›å‹æ•°ç»„public &lt;T extends EventListener&gt; T[] getListeners(Class&lt;T&gt; listenerType); ActionEventç±»ä¸­å®šä¹‰äº†äº¤äº’è¡Œä¸ºçš„ä¸€äº›ç‰¹å¾ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314class MyActionListener implements ActionListener&#123; @Override public void actionPerformed(ActionEvent e) &#123; // TODO Auto-generated method stub //è·å–è§¦å‘æ—¶é—´ System.out.println(e.getWhen()); //è·å–è§¦å‘æ¨¡å¼ System.out.println(e.getModifiers()); //è·å–è§¦å‘äº‹ä»¶çš„æ§ä»¶ æ­¤å¤„ä¸ºButtonæŒ‰é’® System.out.println(e.getSource()); //è·å–å…³è”çš„actionCommandå€¼ System.out.println(e.getActionCommand()); &#125;&#125; getModifiersæ–¹æ³•è·å–äº‹ä»¶çš„æ¨¡å¼ï¼Œè¿”å›å€¼å®šä¹‰å¦‚ä¸‹ï¼š 12345678//æŒ‰ä½shifté”®ç‚¹å‡»æŒ‰é’®public static final int SHIFT_MASK = Event.SHIFT_MASK;//æŒ‰ä½ctrlé”®ç‚¹å‡»æŒ‰é’®public static final int CTRL_MASK = Event.CTRL_MASK;//æŒ‰ä½metaé”®ç‚¹å‡»æŒ‰é’®public static final int META_MASK = Event.META_MASK;//æŒ‰ä½alté”®ç‚¹å‡»æŒ‰é’®public static final int ALT_MASK = Event.ALT_MASK;","categories":[{"name":"Java","slug":"Java","permalink":"http://huishao.cc/categories/Java/"}],"tags":[],"keywords":[{"name":"Java","slug":"Java","permalink":"http://huishao.cc/categories/Java/"}]},{"title":"iOSå¼€å‘ä¸­æ´»åŠ¨è§†å›¾æ§åˆ¶å™¨UIActivityViewControllerçš„åº”ç”¨","slug":"328iOSå¼€å‘ä¸­æ´»åŠ¨è§†å›¾æ§åˆ¶å™¨UIActivityViewControllerçš„åº”ç”¨","date":"2017-05-14T16:00:00.000Z","updated":"2021-07-14T08:14:01.010Z","comments":true,"path":"2017/05/15/328iOSå¼€å‘ä¸­æ´»åŠ¨è§†å›¾æ§åˆ¶å™¨UIActivityViewControllerçš„åº”ç”¨/","link":"","permalink":"http://huishao.cc/2017/05/15/328iOSå¼€å‘ä¸­æ´»åŠ¨è§†å›¾æ§åˆ¶å™¨UIActivityViewControllerçš„åº”ç”¨/","excerpt":"","text":"iOSå¼€å‘ä¸­æ´»åŠ¨è§†å›¾æ§åˆ¶å™¨UIActivityViewControllerçš„åº”ç”¨åœ¨iOSå¼€å‘ä¸­ï¼ŒUIActivityViewControllerå¸¸ç”¨æ¥å¼¹å‡ºåˆ†äº«é¢æ¿ï¼Œå…¶å®é™¤äº†ç”¨æ¥ç¤¾ä¼šåŒ–åˆ†äº«ï¼ŒUIActivityViewControllerè¿˜æœ‰ä¸€å¤§åº”ç”¨æ˜¯ç”¨æ¥è¿›è¡Œè‡ªå®šä¹‰è¡Œä¸ºã€‚å…ˆçœ‹å¦‚ä¸‹ç¤ºä¾‹ä»£ç ï¼š 123456789101112//æ´»åŠ¨å†…å®¹NSString * content = @\"æ´»åŠ¨çš„å†…å®¹\";//æ´»åŠ¨çš„urlNSURL * url = [NSURL URLWithString:@\"https://www.baidu.com\"];//æ´»åŠ¨çš„å›¾ç‰‡UIImage * image = [UIImage imageNamed:@\"ios\"];UIActivityViewController * con = [[UIActivityViewController alloc]initWithActivityItems:@[content,url,image] applicationActivities:nil];//æ´»åŠ¨è¡Œä¸ºç»“æŸåå›è°ƒçš„blockcon.completionWithItemsHandler = ^(UIActivityType activityType, BOOL completed, NSArray * returnedItems, NSError * __nullable activityError)&#123; NSLog(@\"%@\\n%@\",activityType,returnedItems);&#125;;[self presentViewController:con animated:YES completion:nil]; æ´»åŠ¨é¢æ¿å¦‚ä¸‹å›¾ï¼š éœ€è¦æ³¨æ„ï¼Œæ´»åŠ¨é¢æ¿å¯ä»¥åˆ†ä¸º3ä¸ªéƒ¨åˆ†ï¼Œæœ€ä¸Šé¢ä¸ºAirDropä¼ è¾“åŠŸèƒ½ï¼Œä¸­é—´ä¸ºåˆ†äº«ç›¸å…³åŠŸèƒ½ï¼Œæœ€ä¸‹é¢ä¸ºæ•°æ®å¤„ç†åŠŸèƒ½ã€‚UIActivityViewControllerç»§æ‰¿è‡ªUIViewControllerï¼Œç±»è§£æå¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526//åˆå§‹åŒ–æ–¹æ³•- (instancetype)init;- (instancetype)initWithNibName:(nullable NSString *)nibNameOrNil bundle:(nullable NSBundle *)nibBundleOrNil;- (nullable instancetype)initWithCoder:(NSCoder *)aDecoder;/*activityItemså‚æ•°ç”¨æ¥è®¾ç½®æ´»åŠ¨æ•°æ®æ•°ç»„ï¼Œå…¶ä¸­å¯ä»¥æ˜¯ä»»æ„ç±»å‹çš„å¯¹è±¡ï¼Œä½†æ˜¯åªæœ‰å¯ä»¥å¤„ç†è¿™äº›æ•°æ®çš„è¡Œä¸ºä¼šè¢«å±•ç¤ºå‡ºæ¥applicationActivitieå‚æ•°å¯ä»¥è®¾ç½®è‡ªå®šä¹‰çš„æ“ä½œè¡Œä¸ºï¼Œåé¢ä¼šä»‹ç»*/- (instancetype)initWithActivityItems:(NSArray *)activityItems applicationActivities:(nullable NSArray&lt;__kindof UIActivity *&gt; *)applicationActivitie;/*æ´»åŠ¨è¡Œä¸ºç»“æŸåæ‰§è¡Œçš„å›è°ƒblockï¼Œå…¶ä¸­å‚æ•°å¦‚ä¸‹ï¼štypedef void (^UIActivityViewControllerCompletionWithItemsHandler)(UIActivityType __nullable activityType, BOOL completed, NSArray * __nullable returnedItems, NSError * __nullable activityError);activityType:æ´»åŠ¨çš„ç±»å‹completed:æ´»åŠ¨æ˜¯å¦å®ŒæˆreturnItems:æ‰©å±•ç¨‹åºè¿”å›çš„æ•°æ®*/@property(nullable, nonatomic, copy) UIActivityViewControllerCompletionWithItemsHandler completionWithItemsHandler;//è¿™ä¸ªå‚æ•°å¯ä»¥è®¾ç½®ä¸è¢«æ˜¾ç¤ºçš„æ´»åŠ¨ç±»å‹@property(nullable, nonatomic, copy) NSArray&lt;UIActivityType&gt; *excludedActivityTypes;//ä¸‹é¢è¿™äº›æ–¹æ³•åœ¨iOS8åè¢«å¼ƒç”¨ åœ¨iOS6-iOS8ä¹‹å‰å¯ç”¨//è®¾ç½®æ´»åŠ¨è¡Œä¸ºç»“æŸåå›è°ƒçš„block/*typedef void (^UIActivityViewControllerCompletionHandler)(UIActivityType __nullable activityType, BOOL completed);*/@property(nullable, nonatomic, copy) UIActivityViewControllerCompletionHandler completionHandler; ä¸Šé¢åˆå§‹åŒ–æ–¹æ³•ä¸­æœ‰æåˆ°activityItemsè¿™ä¸ªå‚æ•°ï¼Œç³»ç»Ÿæä¾›çš„ä¸€äº›åˆ†äº«ä¸æ´»åŠ¨è¡Œä¸ºå¯æ”¯æŒçš„æ•°æ®ç±»å‹åˆ—è¡¨å¦‚ä¸‹ï¼š ç³»ç»Ÿæä¾›äº†ä¸€äº›æ´»åŠ¨ç±»å‹ï¼Œä¾‹å¦‚åˆ†äº«åˆ°å¾®åšã€è„¸ä¹¦ã€è¿›è¡Œæ·»åŠ æç¤ºã€å‘é€ä¿¡æ¯ç­‰ï¼Œç³»ç»Ÿæä¾›çš„æ´»åŠ¨ç±»å‹åˆ—ä¸¾å¦‚ä¸‹(UIActivityTypeå®é™…ä¸Šå°±æ˜¯NSString*)ï¼š 123456789101112131415UIActivityType const UIActivityTypePostToFacebook;//è„¸ä¹¦UIActivityType const UIActivityTypePostToTwitter;//æ¨ç‰¹UIActivityType const UIActivityTypePostToWeibo; // å¾®åšUIActivityType const UIActivityTypeMessage;//å‘é€ä¿¡æ¯UIActivityType const UIActivityTypeMail;//å‘é€é‚®ä»¶UIActivityType const UIActivityTypePrint;//æ‰“å°UIActivityType const UIActivityTypeCopyToPasteboard;//å¤åˆ¶UIActivityType const UIActivityTypeAssignToContact;//å…³è”åˆ°è”ç³»äººUIActivityType const UIActivityTypeSaveToCameraRoll;//å­˜ç…§ç‰‡UIActivityType const UIActivityTypeAddToReadingList;//æ·»åŠ åˆ°æé†’åˆ—è¡¨UIActivityType const UIActivityTypePostToFlickr;//FlickrUIActivityType const UIActivityTypePostToVimeo;//VimeoUIActivityType const UIActivityTypePostToTencentWeibo;//è…¾è®¯å¾®åšUIActivityType const UIActivityTypeAirDrop;//AirDropUIActivityType const UIActivityTypeOpenInIBooks;//åœ¨IBooksä¸­æ‰“å¼€ è‡ªå®šä¹‰æ´»åŠ¨è¡Œä¸ºéœ€è¦åˆ›å»ºç»§æ‰¿äºUIActivityç±»çš„å­ç±»ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536#import \"CustomActivity.h\"@implementation CustomActivity//è®¾ç½®æ´»åŠ¨ç±»åˆ«+(UIActivityCategory)activityCategory&#123; return UIActivityCategoryShare;&#125;//è®¾ç½®æ´»åŠ¨ç±»å‹-(UIActivityType)activityType&#123; return @\"Custom\";&#125;//è®¾ç½®æ´»åŠ¨æ ‡é¢˜-(NSString *)activityTitle&#123; return @\"title\";&#125;//è®¾ç½®æ´»åŠ¨å›¾æ ‡-(UIImage *)activityImage&#123; return [UIImage imageNamed:@\"ios\"];&#125;//è®¾ç½®æ˜¯å¦å¯ä»¥å¯¹æŒ‡å®šçš„æ•°æ®è¿›è¡Œå“åº”-(BOOL)canPerformWithActivityItems:(NSArray *)activityItems&#123; NSLog(@\"%@\",activityItems); return YES;&#125;//ä¸ºè¦å“åº”çš„æ´»åŠ¨è¿›è¡Œå‡†å¤‡å·¥ä½œ- (void)prepareWithActivityItems:(NSArray *)activityItems&#123; &#125;//å“åº”äº’åŠ¨-(void)performActivity&#123; NSLog(@\"=========\"); //æ´»åŠ¨å¤„ç†å®Œæˆå å¿…é¡»è°ƒç”¨activityDidFinishå‡½æ•° [self activityDidFinish:YES];&#125;@end ç”¨è‡ªå®šä¹‰çš„æ´»åŠ¨å¯¹UIActivityViewControllerè¿›è¡Œåˆå§‹åŒ–ï¼š 123456789NSString * content = @\"æ´»åŠ¨çš„å†…å®¹\";NSURL * url = [NSURL URLWithString:@\"https://www.baidu.com\"];UIImage * image = [UIImage imageNamed:@\"ios\"];CustomActivity * activity = [[CustomActivity alloc]init];UIActivityViewController * con = [[UIActivityViewController alloc]initWithActivityItems:@[content,url,image] applicationActivities:@[activity]];con.completionWithItemsHandler = ^(UIActivityType activityType, BOOL completed, NSArray * returnedItems, NSError * __nullable activityError)&#123; NSLog(@\"%@\\n%@\",activityType,returnedItems);&#125;;[self presentViewController:con animated:YES completion:nil]; æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š UIActivityç±»è§£æå¦‚ä¸‹ï¼š 123456789101112131415161718192021222324//å­ç±»å®ç°ï¼Œè®¾ç½®è‡ªå®šä¹‰æ´»åŠ¨çš„ç±»åˆ«/*typedef NS_ENUM(NSInteger, UIActivityCategory) &#123; UIActivityCategoryAction,//è¡Œä¸ºç±»åˆ« æ˜¾ç¤ºåœ¨æ´»åŠ¨é¢æ¿ä¸‹é¢ UIActivityCategoryShare,//åˆ†äº«ç±»åˆ«ï¼Œæ˜¾ç¤ºåœ¨æ´»åŠ¨é¢æ¿ä¸­é—´&#125;;*/+ (UIActivityCategory)activityCategory;//å­ç±»å®ç° è®¾ç½®è‡ªå®šä¹‰æ´»åŠ¨çš„ç±»å‹ è¿”å›å­—ç¬¦ä¸²- (nullable UIActivityType)activityType;//å­ç±»å®ç° è®¾ç½®è‡ªå®šä¹‰æ´»åŠ¨çš„æ ‡é¢˜ è¿”å›å­—ç¬¦ä¸² - (nullable NSString *)activityTitle;//å­ç±»å®ç° è®¾ç½®è‡ªå®šä¹‰æ´»åŠ¨çš„å›¾æ ‡ UIImage - (nullable UIImage *)activityImage; //å­ç±»å®ç° activityItemsä¸ºæ´»åŠ¨æ•°æ®æ•°ç»„ è¿”å›å¸ƒå°”å€¼å†³å®šæ­¤æ´»åŠ¨æ˜¯å¦å¯ä»¥å“åº”è¿™äº›æ•°æ®- (BOOL)canPerformWithActivityItems:(NSArray *)activityItems;//å­ç±»å®ç° å¦‚æœä¸Šé¢çš„æ–¹æ³•è¿”å›YESï¼Œä¼šæ¥ç€æ‰§è¡Œè¿™ä¸ªæ–¹æ³•ï¼Œå¼€å‘è€…å¯ä»¥åšäº›æ´»åŠ¨å¤„ç†çš„å‡†å¤‡- (void)prepareWithActivityItems:(NSArray *)activityItems;//å­ç±»å®ç° è¿”å›ä¸€ä¸ªè§†å›¾æ§åˆ¶å™¨ä½œä¸ºå¤„ç†æ´»åŠ¨çš„æ¨¡æ€è§†å›¾ æ´»åŠ¨å¤„ç†å®Œæˆåéœ€è¦è°ƒç”¨activityDidFinishæ–¹æ³• - (nullable UIViewController *)activityViewController; //å­ç±»å®ç° å¦‚æœå­ç±»æ²¡æœ‰å®ç°ä¸Šä¸€ä¸ªæ–¹æ³• æˆ–è€…è¿”å›nilï¼Œåˆ™ä¼šæ‰§è¡Œè¿™ä¸ªæ–¹æ³•æ¥å¤„ç†æ´»åŠ¨ æ´»åŠ¨å¤„ç†å®Œæˆåéœ€è¦è°ƒç”¨activityDidFinishæ–¹æ³•- (void)performActivity; //æ´»åŠ¨å¤„ç†å®Œæˆåéœ€è¦è°ƒç”¨è¿™ä¸ªæ–¹æ³• ä¹‹åä¼šé€šçŸ¥UIActivityViewControlleræ‰§è¡Œæ´»åŠ¨å®Œæˆåçš„å›è°ƒblock- (void)activityDidFinish:(BOOL)completed;","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"åŠ¨æ€çš„Objective-Câ€”â€”å…³äºæ¶ˆæ¯æœºåˆ¶ä¸è¿è¡Œæ—¶çš„æ¢è®¨","slug":"327åŠ¨æ€çš„Objective-Câ€”â€”å…³äºæ¶ˆæ¯æœºåˆ¶ä¸è¿è¡Œæ—¶çš„æ¢è®¨","date":"2017-05-04T16:00:00.000Z","updated":"2021-07-14T08:12:45.591Z","comments":true,"path":"2017/05/05/327åŠ¨æ€çš„Objective-Câ€”â€”å…³äºæ¶ˆæ¯æœºåˆ¶ä¸è¿è¡Œæ—¶çš„æ¢è®¨/","link":"","permalink":"http://huishao.cc/2017/05/05/327åŠ¨æ€çš„Objective-Câ€”â€”å…³äºæ¶ˆæ¯æœºåˆ¶ä¸è¿è¡Œæ—¶çš„æ¢è®¨/","excerpt":"","text":"åŠ¨æ€çš„Objective-Câ€”â€”å…³äºæ¶ˆæ¯æœºåˆ¶ä¸è¿è¡Œæ—¶çš„æ¢è®¨ä¸€ã€å¼•è¨€Objective-Cæ˜¯ä¸€ç§å¾ˆä¼˜ç¾çš„è¯­è¨€ï¼Œè‡³å°‘åœ¨æˆ‘ä½¿ç”¨å…¶è¿›è¡Œç¼–ç¨‹çš„è¿‡ç¨‹ä¸­ï¼Œæ˜¯å¾ˆäº«å—ä»–é‚£è¿‘ä¹è‡ªç„¶è¯­è¨€çš„å‡½æ•°å‘½åã€çµæ´»å¤šæ ·çš„æ–¹æ³•è°ƒç”¨æ–¹å¼ä»¥åŠé…åˆIDEæµé¡ºç•…å¿«ç¼–å†™ä½“éªŒã€‚Objective-Cæ˜¯æ‰©å±•ä¸Cé¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€ï¼Œç„¶è€Œå…¶æ–¹æ³•çš„è°ƒç”¨æ–¹å¼åˆå’Œå¤§å¤šé¢å‘å¯¹è±¡è¯­è¨€å¤§æœ‰ä¸åŒï¼Œå…¶é‡‡ç”¨çš„æ˜¯æ¶ˆæ¯ä¼ é€’ã€è½¬å‘çš„æ–¹å¼è¿›è¡Œæ–¹æ³•çš„è°ƒç”¨ã€‚å› æ­¤åœ¨Objective-Cä¸­å¯¹è±¡çš„çœŸæ­£è¡Œä¸ºå¾€å¾€æ˜¯åœ¨è¿è¡Œæ—¶ç¡®å®šè€Œéåœ¨ç¼–è¯‘æ—¶ç¡®å®šï¼Œæ‰€ä»¥Objective-Cåˆè¢«ç§°ä¸ºæ˜¯ä¸€ç§è¿è¡Œæ—¶çš„åŠ¨æ€è¯­è¨€ã€‚ æœ¬ç¯‡åšå®¢æ—¢ä¸ä»‹ç»iOSå¼€å‘ï¼Œä¹Ÿä¸æåŠMacOSå¼€å‘ï¼Œåªå¯¹Objective-Cè¯­è¨€çš„è¿™ç§æ¶ˆæ¯æœºåˆ¶ä¸è¿è¡Œæ—¶åŠ¨æ€è¿›è¡Œæ¢è®¨ï¼Œæ‰€æåŠçš„å†…å®¹ä¹Ÿéƒ½æ˜¯æˆ‘å¼€å‘ä¸­çš„ä¸ªäººç§¯ç´¯ä¸ç»éªŒï¼Œå¦‚æœåé¢‡ä¹‹å¤„ï¼Œæ¬¢è¿è®¨è®ºæŒ‡æ­£ã€‚ äºŒã€æ¶ˆæ¯å‘é€ä¸è½¬å‘æœºåˆ¶1.åˆçª¥æ¶ˆæ¯å‘é€æœºåˆ¶è®¸å¤šé¢å‘å¯¹è±¡è¯­è¨€ä¸­æ–¹æ³•çš„è°ƒç”¨éƒ½æ˜¯é‡‡ç”¨obj.functionè¿™æ ·çš„æ–¹å¼ï¼Œåœ¨Objective-Cè¯­è¨€ä¸­å´æ˜¯é‡‡ç”¨ä¸­æ‹¬å·åŒ…è£¹çš„æ–¹å¼è¿›è¡Œæ–¹æ³•è°ƒç”¨ï¼Œä¾‹å¦‚\\[obj function\\]ã€‚å®é™…ä¸Šï¼ŒObjective-Cä¸­çš„æ¯ä¸€å¥æ–¹æ³•è°ƒç”¨æœ€åéƒ½ä¼šè½¬æ¢æˆä¸€æ¡æ¶ˆæ¯è¿›è¡Œå‘é€ã€‚ä¸€æ¡æ¶ˆæ¯åŒ…å«3éƒ¨åˆ†å†…å®¹ï¼šæ–¹æ³•é€‰æ‹©å™¨ã€æ¥æ”¶æ¶ˆæ¯çš„å¯¹è±¡ä»¥åŠå‚æ•°ã€‚objc_msgSendå‡½æ•°å°±æ˜¯ç”¨æ¥å‘é€è¿™ç§æ¶ˆæ¯ã€‚ä¾‹å¦‚ï¼Œåˆ›å»ºä¸€ä¸ªXcodeå‘½ä»¤è¡Œå·¥ç¨‹ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç±»ï¼Œå‘½åä¸ºMyObjectï¼Œå¦‚ä¸‹ï¼š MyObject.hæ–‡ä»¶ï¼š 12345#import &lt;Foundation/Foundation.h&gt;@interface MyObject : NSObject@end MyObject.mæ–‡ä»¶ï¼š 123456789#import \"MyObject.h\"@implementation MyObject-(void)showSelf&#123; NSLog(@\"MyObject\");&#125;@end é¦–å…ˆåœ¨MyObject.hæ–‡ä»¶ä¸­å¹¶æ²¡æœ‰æš´æ¼ä»»ä½•æ–¹æ³•ï¼ŒMyObject.mæ–‡ä»¶ä¸­æ·»åŠ äº†ä¸€ä¸ªshowSelfæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•åªæ˜¯åšäº†ç®€å•çš„æ‰“å°æ“ä½œã€‚ å°†main.mæ–‡ä»¶ä¿®æ”¹å¦‚ä¸‹ï¼š 1234567891011121314151617#import &lt;Foundation/Foundation.h&gt;#import \"MyObject.h\"#import &lt;objc/message.h&gt;int main(int argc, const char * argv[]) &#123; @autoreleasepool &#123; MyObject * obj = [[MyObject alloc]init]; [obj class];//ä¸ºäº†æ¶ˆé™¤æœªå®šä¹‰é€‰æ‹©å™¨çš„è­¦å‘Š#pragma clang diagnostic push#pragma clang diagnostic ignored\"-Wundeclared-selector\" //è¿›è¡Œæ¶ˆæ¯å‘é€ ((void(*)(id,SEL))objc_msgSend)(obj,@selector(showSelf));#pragma clang diagnostic pop &#125; return 0;&#125; è¿è¡Œå·¥ç¨‹ï¼Œå¯ä»¥çœ‹åˆ°æ§åˆ¶å°æ‰§è¡Œäº†MyObjectç±»çš„ç¤ºä¾‹æ–¹æ³•showSelfã€‚å¦‚æœè¦è¿›è¡Œä¼ å‚ï¼Œåœ¨objc_msgSendæ–¹æ³•ä¸­ç»§ç»­æ·»åŠ å‚æ•°ï¼Œå¹¶ä¸”æŒ‡å®šå¯¹åº”çš„å‡½æ•°ç±»å‹å³å¯ï¼Œä¾‹å¦‚ï¼š MyObject.mæ–‡ä»¶ï¼š 123456789#import \"MyObject.h\"@implementation MyObject-(void)showSelf:(NSString*)name age:(int)age&#123; NSLog(@\"MyObject:%@,%d\",name,age);&#125;@end main.mæ–‡ä»¶ï¼š 1234567891011121314151617#import &lt;Foundation/Foundation.h&gt;#import \"MyObject.h\"#import &lt;objc/message.h&gt;int main(int argc, const char * argv[]) &#123; @autoreleasepool &#123; MyObject * obj = [[MyObject alloc]init]; [obj class];//ä¸ºäº†æ¶ˆé™¤æœªå®šä¹‰é€‰æ‹©å™¨çš„è­¦å‘Š#pragma clang diagnostic push#pragma clang diagnostic ignored\"-Wundeclared-selector\" //è¿›è¡Œæ¶ˆæ¯å‘é€ ((void(*)(id,SEL,NSString*,int))objc_msgSend)(obj,@selector(showSelf:age:),@\"ç²å°‘\",25);#pragma clang diagnostic pop &#125; return 0;&#125; è¿è¡Œå·¥ç¨‹å¯ä»¥çœ‹åˆ°æ–¹æ³•è¢«è°ƒç”¨ï¼Œå‚æ•°è¢«æ­£ç¡®ä¼ å…¥ã€‚ 2.æ¶ˆæ¯ä¼ é€’æ˜¯åŸºäºç»§æ‰¿é“¾çš„ä¸Šé¢ä»£ç åªæ˜¯ç®€å•æ¼”ç¤ºäº†æ¶ˆæ¯å‘é€çš„æ•ˆæœï¼Œä¸‹é¢æˆ‘ä»¬æ¥å‰–æä¸‹æ¶ˆæ¯å‘é€çš„è¿‡ç¨‹ä¸åŸç†ï¼Œæ˜ç™½äº†è¿™ä¸ªåŸç†ï¼Œå¯¹Objective-Cä¸­è®¸å¤šç¥å¥‡çš„ç°è±¡ä½ å°†ä¼šè±ç„¶å¼€æœ—ï¼Œåé¢æˆ‘ä¼šå†å…·ä½“å‘ä½ ä»‹ç»è¿™äº›ç°è±¡ã€‚ åœ¨ä»‹ç»æ¶ˆæ¯æœºåˆ¶ä¹‹å‰ï¼Œæˆ‘è¿˜æ˜¯è¦å†å•°å—¦ä¸€ç‚¹ï¼Œå…³äº@selector()æˆ‘ä»¬è¿˜éœ€è¦æ·±å…¥ç†è§£ä¸€ä¸‹ï¼Œé€šè¿‡@selector(æ–¹æ³•å)å¯ä»¥è·å–åˆ°ä¸€ä¸ªSELç±»å‹çš„å¯¹è±¡ï¼ŒSELå®é™…ä¸Šæ˜¯objc\\_selectorç»“æ„ä½“æŒ‡é’ˆï¼Œåœ¨Objective-Cåº“å¤´æ–‡ä»¶ä¸­æ²¡æœ‰æ‰¾åˆ°objc\\_selectorç»“æ„ä½“çš„å®šä¹‰ï¼Œä½†æˆ‘ä»¬å¯ä»¥åˆç†çŒœæµ‹ï¼Œå…¶ä¸­å¾ˆæœ‰å¯èƒ½åŒ…å«çš„æ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆã€‚å› æ­¤SELä¹Ÿå¯ä»¥ç†è§£ä¸ºå‡½æ•°ç­¾åï¼Œåœ¨ç¨‹åºçš„ç¼–è¯‘é˜¶æ®µï¼Œæˆ‘ä»¬å®šä¹‰ç±»ä¸­æ‰€æœ‰æ‰€å‘ä¼šç”Ÿæˆä¸€ä¸ªæ–¹æ³•ç­¾ååˆ—è¡¨ï¼Œè¿™ä¸ªåˆ—è¡¨æ—¶ç±»ç›´æ¥å…³è”çš„(åŸåˆ™ä¸Šæ¥è¯´ï¼Œç±»çš„æœ¬è´¨ä¹Ÿæ˜¯å¯¹è±¡ï¼Œå®ƒæ˜¯ä¸€ä¸ªå•ä¾‹å¯¹è±¡)ï¼Œåœ¨è¿è¡Œæ—¶é€šè¿‡æ–¹æ³•ç­¾åè¡¨æ¥æ‰¾åˆ°å…·ä½“è¦æ‰§è¡Œçš„å‡½æ•°ã€‚ æˆ‘ä»¬å†æ¥çœ‹objc_msgSend()å‡½æ•°ï¼Œå‰é¢è¯´è¿‡ï¼Œå®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæ¥æ”¶æ¶ˆæ¯çš„å¯¹è±¡ï¼Œç¬¬2ä¸ªå‚æ•°ä¸ºæ–¹æ³•ç­¾åï¼Œä¹‹åä¸ºä¼ é€’çš„å‚æ•°ã€‚é‚£ä¹ˆObjective-Cè¿è¡Œæ—¶æ˜¯å¦‚ä½•æ ¹æ®ä¸€ä¸ªå¯¹è±¡å®ä¾‹æ¥æ‰¾åˆ°æ–¹æ³•ç­¾åè¡¨ï¼Œå†æ‰¾åˆ°è¦æ‰§è¡Œçš„æ–¹æ³•å‘¢ï¼Œçœ‹ä¼¼éº»çƒ¦çš„äº‹æƒ…å…¶å®åŸç†ä¹Ÿéå¸¸ç®€å•ï¼Œç»†å¿ƒè§‚å¯Ÿï¼Œä½ ä¼šå‘ç°æ‰€æœ‰çš„NSObjectå­ç±»å¯¹è±¡ä¸­éƒ½åŒ…å«ä¸€ä¸ªisaæˆå‘˜å˜é‡ï¼Œè¯·çœ‹NSObjectç±»çš„å®šä¹‰ï¼š 123@interface NSObject &lt;NSObject&gt; &#123; Class isa OBJC_ISA_AVAILABILITY;&#125; è¿™ä¸ªisaå˜é‡æ˜¯Classç±»å‹ï¼Œæˆ‘ä»¬çš„ä¸»è§’ç»ˆäºæ¥äº†ï¼ŒClassé¡¾åæ€ä¹‰å°±æ˜¯â€œç±»â€ç±»å‹ï¼Œå…¶å®è´¨æ˜¯objc_classç»“æ„ä½“æŒ‡é’ˆï¼š 1typedef struct objc_class *Class; æœ‰äº›è’™åœˆäº†å§ï¼Œä¸ç”¨ç€æ€¥ï¼Œæ‹¨å¼€å±‚å±‚è¿·é›¾ï¼Œä½ å°±ä¼šå‘ç°Objective-Cä¸­ç±»æœ¬è´¨ä¸Šåªæ˜¯ç»“æ„ä½“è€Œå·²ï¼Œä¸‹é¢æ˜¯objc_classç»“æ„ä½“çš„å®šä¹‰ï¼š 1234567891011121314151617181920212223242526struct objc_class &#123; //å…ƒç±»æŒ‡é’ˆ Class isa OBJC_ISA_AVAILABILITY;#if !__OBJC2__ //çˆ¶ç±» Class super_class OBJC2_UNAVAILABLE; //ç±»å const char *name OBJC2_UNAVAILABLE; //ç±»çš„ç‰ˆæœ¬ long version OBJC2_UNAVAILABLE; //ä¿¡æ¯ long info OBJC2_UNAVAILABLE; //å†…å­˜å¸ƒå±€ long instance_size OBJC2_UNAVAILABLE; //å˜é‡åˆ—è¡¨ struct objc_ivar_list *ivars OBJC2_UNAVAILABLE; //å‡½æ•°åˆ—è¡¨ struct objc_method_list **methodLists OBJC2_UNAVAILABLE; //ç¼“å­˜æ–¹å¼ struct objc_cache *cache OBJC2_UNAVAILABLE; //åè®®åˆ—è¡¨ struct objc_protocol_list *protocols OBJC2_UNAVAILABLE;#endif&#125; OBJC2_UNAVAILABLE; æ¯ä¸€ä¸ªâ€œç±»â€å¯¹è±¡æ˜¯ä¹Ÿæœ‰ä¸€ä¸ªisaæŒ‡é’ˆï¼Œè¿™ä¸ªæŒ‡é’ˆæŒ‡å‘çš„ç±»å®é™…ä¸Šæ˜¯å…ƒç±»ï¼Œå³æ„é€ â€œç±»â€çš„ç±»ã€‚ç°åœ¨ä½ æ— é¡»çº ç»“è¿™äº›æ¦‚å¿µï¼Œä¸¾ä¸€ä¸ªä¾‹å­ä½ å°±èƒ½æ˜ç™½ï¼Œåœ¨Objective-Cå¼€å‘ä¸­æœ‰åŠ æ–¹æ³•ä¸å‡æ–¹æ³•ï¼Œå‡æ–¹æ³•æ˜¯å®ä¾‹å¯¹è±¡è°ƒç”¨çš„æ–¹æ³•ï¼Œæ¯ä¸€ä¸ªâ€œç±»â€ä¸­éƒ½åŒ…å«ä¸€ä¸ªå‡½æ•°åˆ—è¡¨ï¼Œå°±æ˜¯ä¸Šé¢çš„objc_method_listç»“æ„ä½“æ•°ç»„æŒ‡é’ˆï¼ŒåŒæ ·å¦‚æœè°ƒç”¨åŠ æ–¹æ³•ï¼Œå®é™…ä¸Šæ˜¯ä»ç±»çš„å…ƒç±»ä¸­æ‰¾åˆ°å¯¹åº”çš„æ–¹æ³•åˆ—è¡¨ï¼Œè¿™ä¸ªåˆ—è¡¨å°±æ˜¯æˆ‘ä»¬å‰é¢æåˆ°çš„æ–¹æ³•ç­¾ååˆ—è¡¨ï¼Œè¿›è¡Œæ–¹æ³•çš„æ‰§è¡Œã€‚å…³äºå®ä¾‹å¯¹è±¡ï¼Œâ€œç±»â€å¯¹è±¡å’Œå…ƒç±»ï¼Œä¸‹å›¾å¾ˆå¥½çš„è¡¨ç°äº†ä»–ä»¬ä¹‹é—´çš„å…³ç³»ï¼š éœ€è¦æ³¨æ„ï¼Œä½¿ç”¨LLDBè°ƒè¯•å™¨æˆ‘ä»¬æ˜¯å¯ä»¥æ‹¿åˆ°å¯¹è±¡çš„isaæŒ‡é’ˆçš„ï¼Œå¹¶ä¸”å¯ä»¥çœ‹å‡ºå®ƒçš„ç¡®ä¸ºClassç±»å‹ï¼Œä½†æ˜¯æˆ‘ä»¬ç¼ºæ— æ³•é€šè¿‡isaæŒ‡é’ˆç»§ç»­å‘ä¸‹å–æŠ“å–æ›´å¤šç±»çš„ä¿¡æ¯ï¼Œå…¶æ‰€åœ¨çš„å†…å­˜æ˜¯ç¦æ­¢æˆ‘ä»¬è®¿é—®çš„ã€‚ä½†æ˜¯Objective-Cè¿è¡Œæ—¶æä¾›äº†ä¸€äº›æ–¹æ³•å¯ä»¥è·å–åˆ°è¿™äº›ä¿¡æ¯ï¼Œåé¢æˆ‘ä»¬ä¼šä¸€ä¸€ä»‹ç»ã€‚ ä¸Šé¢æˆ‘ä»¬ä»‹ç»çš„æ¶ˆæ¯å‘é€æœºåˆ¶å…¶å®ååˆ†ä¸å®Œæ•´ï¼Œé¦–å…ˆObjective-Cæ˜¯æ”¯æŒç»§æ‰¿çš„ï¼Œå› æ­¤å¦‚æœåœ¨å½“å‰å¯¹è±¡çš„ç±»çš„æ–¹æ³•åˆ—è¡¨ä¸­æ²¡æœ‰æ‰¾åˆ°æ­¤æ¶ˆæ¯å¯¹åº”çš„æ–¹æ³•ç­¾åï¼Œç³»ç»Ÿä¼šé€šè¿‡super_classä¸€å±‚å±‚ç»§ç»­å‘ä¸Šï¼Œç›´åˆ°æ‰¾åˆ°ç›¸åº”çš„æ–¹æ³•æˆ–è€…åˆ°è¾¾ç»§æ‰¿é“¾çš„é¡¶ç«¯ã€‚ æœ‰äº†ä¸Šé¢çš„ç†è®ºçŸ¥è¯†ä½œä¸ºåŸºç¡€ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ›´æ·±å…¥çš„åˆ†ææ¶ˆæ¯ä¼ é€’çš„è¿‡ç¨‹äº†ï¼Œé¦–å…ˆï¼Œå¦‚æœæ¶ˆæ¯çš„æ¥æ”¶å¯¹è±¡åˆšå¥½å¯ä»¥å¤„ç†è¿™ä¸ªæ¶ˆæ¯ï¼Œå³å…¶isaæŒ‡é’ˆå¯¹åº”çš„ç±»ä¸­å¯ä»¥æŸ¥æ‰¾åˆ°è¿™ä¸ªæ–¹æ³•ï¼Œé‚£ä¹ˆä¸‡äº‹å¤§å‰ï¼Œæ‰¾åˆ°å¯¹åº”æ–¹æ³•ç›´æ¥æ‰§è¡Œå°±å¤§åŠŸå‘Šæˆï¼Œå¯ä»¥å¦‚æœæ¥æ”¶å¯¹è±¡æ— æ³•å¤„ç†ï¼Œå…¶çˆ¶ç±»ï¼Œçˆ¶çˆ¶ç±»...ç­‰éƒ½æ— æ³•å¤„ç†ï¼Œé‚£ä¹ˆè¯¥æ€ä¹ˆåŠå‘¢ï¼ŒObjective-Cä¸ºäº†å¢å¼ºè¯­è¨€çš„åŠ¨æ€æ€§ï¼Œå¦‚æœçœŸçš„å‡ºç°äº†è¿™ç§æƒ…å†µï¼Œç¨‹åºå¹¶ä¸ä¼šé©¬ä¸Šcrashï¼Œåœ¨crashå‰ï¼Œæœ‰3æ¬¡æœºä¼šå¯ä»¥æŒ½æ•‘æœ¬æ¡æ¶ˆæ¯çš„å‘½è¿ã€‚ 3.æ‹¯æ•‘æœªçŸ¥æ¶ˆæ¯çš„3æ ¹æ•‘å‘½ç¨»è‰ç¬¬ä¸€æ ¹æ•‘å‘½ç¨»è‰ï¼š å¦‚ä¸Šæ‰€è¯´ï¼Œå¦‚æœå¯¹è±¡æ•´ä¸ªç»§æ‰¿é“¾éƒ½æ— æ³•å¤„ç†å½“å‰æ¶ˆæ¯ï¼Œé‚£ä¹ˆé¦–å…ˆä¼šè°ƒç”¨æ¥æ”¶å¯¹è±¡æ‰€å±ç±»çš„resolveInstanceMethodæ–¹æ³•(è¿™ä¸ªå¯¹åº”å®ä¾‹æ–¹æ³•ï¼Œå¦‚æœæ˜¯æ— æ³•å¤„ç†çš„ç±»æ–¹æ³•æ¶ˆæ¯ï¼Œåˆ™ä¼šè°ƒç”¨resolveClassMethodæ–¹æ³•)ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œå¼€å‘è€…æœ‰æœºä¼šä¸ºç±»åŠ¨æ€æ·»åŠ æ–¹æ³•ï¼Œå¦‚æœåŠ¨æ€æ·»åŠ äº†æ–¹æ³•ï¼Œå¯ä»¥åœ¨è¿™ä¸ªæ–¹æ³•ä¸­è¿”å›YESï¼Œé‚£ä¹ˆæ­¤æ¡æ¶ˆæ¯ä¾ç„¶ä¼šè¢«æˆåŠŸå¤„ç†ã€‚ä¾‹å¦‚æˆ‘ä»¬å°†main.mæ–‡ä»¶ä¿®æ”¹å¦‚ä¸‹ï¼š 1234567891011121314151617#import &lt;Foundation/Foundation.h&gt;#import \"MyObject.h\"#import &lt;objc/message.h&gt;int main(int argc, const char * argv[]) &#123; @autoreleasepool &#123; MyObject * obj = [[MyObject alloc]init]; [obj class];//ä¸ºäº†æ¶ˆé™¤æœªå®šä¹‰é€‰æ‹©å™¨çš„è­¦å‘Š#pragma clang diagnostic push#pragma clang diagnostic ignored\"-Wundeclared-selector\" //è¿›è¡Œæ¶ˆæ¯å‘é€ ((void(*)(id,SEL))objc_msgSend)(obj,@selector(showSelf));#pragma clang diagnostic pop &#125; return 0;&#125; MyObjectç±»ä¸åšä»»ä½•ä¿®æ”¹ï¼Œå½“æˆ‘ä»¬è¿è¡Œç¨‹åºï¼Œç¨‹åºä¼šç›´æ¥crashæ‰ï¼Œç°åœ¨æˆ‘ä»¬åœ¨MyObjectç±»ä¸­æ·»åŠ å¦‚ä¸‹æ–¹æ³•ï¼š 1234567+(BOOL)resolveInstanceMethod:(SEL)sel&#123; NSLog(@\"resolveInstanceMethod\"); if ([NSStringFromSelector(sel) isEqualToString:@\"showSelf\"]) &#123; class_addMethod(self, sel, newFunc, \"v@:\"); &#125; return [super resolveInstanceMethod:sel];&#125; å…¶ä¸­class_addMethodå‡½æ•°ç”¨æ¥å‘ç±»ä¸­åŠ¨æ€æ·»åŠ æ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºClasså¯¹è±¡ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºæ–¹æ³•é€‰æ‹©å™¨ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºIMPç±»å‹çš„å‡½æ•°æŒ‡é’ˆï¼Œç¬¬å››ä¸ªå‚æ•°ä¸ºæŒ‡å®šæ–¹æ³•çš„è¿”å›å€¼å’Œå‚æ•°ç±»å‹ã€‚è¿™ä¸ªå‚æ•°é‡‡ç”¨çš„æ˜¯Cå­—ç¬¦ä¸²çš„å½¢å¼æ¥æŒ‡å®šè¿”å›å€¼å’Œå‚æ•°çš„ç±»å‹ï¼Œç¬¬1ä¸ªå­—ç¬¦ä¸ºè¿”å›å€¼ç±»å‹ï¼Œå…¶åéƒ½ä¸ºå‚æ•°ç±»å‹ï¼Œéœ€è¦æ³¨æ„ï¼Œä½¿ç”¨è¿™ç§æ–¹å¼æ·»åŠ æ–¹æ³•çš„æ—¶å€™ç³»ç»Ÿä¼šé»˜è®¤ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯è°ƒç”¨æ­¤æ–¹æ³•çš„å®ä¾‹å¯¹è±¡å’Œæ–¹æ³•é€‰æ‹©å™¨ï¼Œä¸Šé¢ç¤ºä¾‹ä»£ç ä¸­çš„â€@â€è¡¨ç¤ºç¬¬1ä¸ªidç±»å‹çš„å‚æ•°ï¼Œâ€:â€è¡¨ç¤ºç¬¬2ä¸ªé€‰æ‹©å™¨ç±»å‹çš„å‚æ•°ï¼Œåé¢æˆ‘ä¼šæŠŠå­—ç¬¦æ‰€è¡¨ç¤ºçš„å‚æ•°ç±»å‹æ˜ å°„è¡¨æä¾›ç»™å¤§å®¶ã€‚ æŠ½ä¸å‰¥èŒ§ä¸€ä¸‹ï¼ŒIMPå’ŒSELå¹¶ä¸åŒï¼ŒSELå¯ä»¥ç†è§£ä¸ºå‡½æ•°ç­¾åï¼Œå…¶ä¸å‡½æ•°åç›¸å…³è”ï¼Œè€ŒIMPæ˜¯å‡½æ•°æ‰€åœ¨åœ°å€çš„æŒ‡é’ˆï¼Œå…¶å®šä¹‰å¦‚ä¸‹ï¼š 1typedef void (*IMP)(void /* id, SEL, ... */ ); ç®€å•ç†è§£ï¼Œé€šè¿‡IMPæˆ‘ä»¬å¯ä»¥ç›´æ¥æ‹¿åˆ°å‡½æ•°çš„åœ°å€ï¼Œåé¢ä¼šå¯¹å‡½æ•°åšæ›´æ·±å…¥çš„å‰–æï¼Œåˆ°æ—¶å€™ä½ èƒ½å°±èƒ½è±ç„¶ä½ å¼€æœ—ã€‚ è¿è¡Œå·¥ç¨‹ï¼Œæ ¹æ®æ‰“å°ä¿¡æ¯å¯ä»¥çœ‹åˆ°showSelfæ–¹æ³•è¢«æ·»åŠ å¹¶æ­£å¸¸æ‰§è¡Œäº†ã€‚ ç¬¬äºŒæ ¹æ•‘å‘½ç¨»è‰ï¼š æŠ›å¼€è¿è¡Œæ—¶æ·»åŠ æ–¹æ³•è¿™ä¸€æ‰‹æ®µï¼Œå°†resolveInstanceMethodæ–¹æ³•åˆ å»ï¼Œæ˜¯ä¸æ˜¯æˆ‘ä»¬çš„ç¨‹åºå°±å¿…ç„¶èµ°è¿›crashçš„æ·±æ¸Šäº†ï¼Œå…¶å®ä¸ç„¶ï¼Œä¸Šå¸è¿˜ä¼šç»™ä½ å¦ä¸€æ ¹æ•‘å‘½ç¨»è‰ï¼Œå½“é€šè¿‡è¿è¡Œæ—¶æ·»åŠ æ–¹æ³•è¢«å¦å®šåï¼Œç³»ç»Ÿä¼šæ¥ç€è°ƒç”¨forwardingTargetForSelectoræ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ç”¨æ¥å¯¹æ¶ˆæ¯è¿›è¡Œè½¬å‘ï¼Œæ²¡é”™ï¼Œé‡ç‚¹æ¥äº†ï¼ŒObjective-Cä¸­å¼ºå¤§çš„æ¶ˆæ¯è½¬å‘æœºåˆ¶çš„å¥¥å¦™å°±åœ¨è¿™é‡Œã€‚forwardingTargetForSelectoræ–¹æ³•éœ€è¦è¿”å›ä¸€ä¸ªidç±»å‹çš„å¯¹è±¡ï¼Œç³»ç»Ÿä¼šå°†å½“å‰å¯¹è±¡æœåŠ¡å¤„ç†çš„æ¶ˆæ¯è½¬å‘ç»™è¿™ä¸ªæ–¹æ³•è¿”å›çš„å¯¹è±¡ï¼Œå¦‚æœè¿™ä¸ªè¿”å›çš„å¯¹è±¡å¯ä»¥å¤„ç†ï¼Œé‚£ä¹ˆç¨‹åºä¾ç„¶å¯ä»¥å¾ˆå¥½çš„æ‰§è¡Œä¸‹å»ã€‚ ä¾‹å¦‚ï¼Œåœ¨æˆ‘ä»¬çš„å‘½ä»¤è¡Œå·¥ç¨‹ä¸­æ–°æ·»åŠ ä¸€ä¸ªç±»ï¼Œå‘½åä¸ºSubObjectï¼Œå®ç°å¦‚ä¸‹ï¼š SubObject.hæ–‡ä»¶ï¼š 12345#import &lt;Foundation/Foundation.h&gt;@interface SubObject : NSObject@end SubObject.mæ–‡ä»¶ï¼š 1234567#import \"SubObject.h\"@implementation SubObject-(void)showSelf&#123; NSLog(@\"subObject\");&#125;@end åœ¨MyObjectç±»ä¸­å®ç°å¦‚ä¸‹æ–¹æ³•ï¼š 1234567-(id)forwardingTargetForSelector:(SEL)aSelector&#123; NSLog(@\"forwardingTargetForSelector\"); if ([NSStringFromSelector(aSelector) isEqualToString:@\"showSelf\"]) &#123; return [SubObject new]; &#125; return [super forwardingTargetForSelector:aSelector];&#125; forwardingTargetForSelectoræ–¹æ³•å¯ä»¥è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼ŒObjective-Cä¼šå°†å½“å‰å¯¹è±¡æ— æ³•å¤„ç†çš„æ¶ˆæ¯è½¬å‘ç»™è¿™ä¸ªæ–¹æ³•è¿”å›çš„å¯¹è±¡ï¼Œå¦‚æœè¿”å›nilï¼Œåˆ™è¡¨ç¤ºä¸è¿›è¡Œæ¶ˆæ¯è½¬å‘ï¼Œè¿™æ—¶ä½ å¦‚æœè¿˜æƒ³æŒ½æ•‘æ­¤æ¬¡crashï¼Œä½ å°±éœ€è¦ç”¨åˆ°ç¬¬ä¸‰æ ¹æ•‘å‘½ç¨»è‰äº†ã€‚æˆ‘ä»¬å¯ä»¥è¿™ç§æ¶ˆæ¯è½¬å‘çš„æœºåˆ¶æ¥æ¨¡æ‹ŸObjective-Cä¸­çš„å¤šç»§æ‰¿ã€‚ ç¬¬ä¸‰æ ¹æ•‘å‘½ç¨»è‰ï¼š å¦‚æœä½ ä¸å¹¸é”™è¿‡äº†å‰ä¸¤æ¬¡æ‹¯æ•‘æœªçŸ¥æ¶ˆæ¯çš„æœºä¼šï¼Œé‚£ä¹ˆä½ è¿˜æœ‰æœ€åä¸€æ¬¡æœºä¼š(ä¸­å›½æœ‰å¥å¤è¯ï¼Œäº‹ä¸è¿‡ä¸‰ï¼Œä¸–é—´ä¸‡äº‹ä¹ŸæœçœŸå¦‚æ­¤...)ã€‚å½“æ¶ˆæ¯è½¬å‘ç­–ç•¥ä¹Ÿè¢«å¦å®šåï¼Œç³»ç»Ÿä¼šè°ƒç”¨methodSignatureForSelectoræ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•çš„ä¸»è¦ç”¨é€”æ˜¯è¯¢é—®è¿™ä¸ªé€‰æ‹©å™¨æ˜¯å¦æ˜¯æœ‰æ•ˆçš„ï¼Œæˆ‘ä»¬éœ€è¦è¿”å›ä¸€ä¸ªNSMethodSignatureï¼Œé¡¾åæ€ä¹‰ï¼Œè¿™ä¸ªå¯¹è±¡æ˜¯å‡½æ•°ç­¾åçš„æŠ½è±¡ã€‚å¦‚æœæˆ‘ä»¬è¿”å›äº†æœ‰æ•ˆçš„å‡½æ•°ç­¾åï¼Œé‚£ä¹ˆæ¥ç€ç³»ç»Ÿä¼šè°ƒç”¨forwardInvocationæ–¹æ³•ï¼Œè¿™é‡Œæ˜¯æ‹¯æ•‘åº”ç”¨ç¨‹åºçš„æœ€åä¸€æ ¹ç¨»è‰äº†ï¼Œè¿™ä¸ªå‡½æ•°ä¼šç›´æ¥å°†æ¶ˆæ¯åŒ…è£…æˆNSInvocationå¯¹è±¡ä¼ å…¥ï¼Œæˆ‘ä»¬ç›´æ¥å°†å…¶å‘é€ç»™å¯ä»¥å¤„ç†æ­¤æ¶ˆæ¯çš„å¯¹è±¡å³å¯(å½“ç„¶ä½ ä¹Ÿå¯ä»¥ç›´æ¥æŠ›å¼ƒï¼Œä¸ç†ä¼šè¿™æ¡æœªçŸ¥çš„æ¶ˆæ¯)ã€‚ ä¾‹å¦‚ï¼Œåœ¨MyObjectç±»ä¸­å°†forwardingTargetForSelectoræ–¹æ³•åˆ å»ï¼Œå®ç°å¦‚ä¸‹ä¸¤ä¸ªæ–¹æ³•ï¼š 1234567891011121314151617//è¯¢é—®æ­¤é€‰æ‹©å™¨æ˜¯å¦æ˜¯æœ‰æ•ˆçš„-(NSMethodSignature *)methodSignatureForSelector:(SEL)aSelector&#123; NSLog(@\"methodSignatureForSelector\"); if ([NSStringFromSelector(aSelector) isEqualToString:@\"showSelf\"]) &#123; return [[SubObject new] methodSignatureForSelector:aSelector]; &#125; return [super methodSignatureForSelector:aSelector];&#125;//å¤„ç†æ¶ˆæ¯-(void)forwardInvocation:(NSInvocation *)anInvocation&#123; NSLog(@\"forwardInvocation\"); if ([NSStringFromSelector(anInvocation.selector) isEqualToString:@\"showSelf\"]) &#123; [anInvocation invokeWithTarget:[SubObject new]]; &#125;else&#123; [super forwardInvocation:anInvocation]; &#125;&#125; å†æ¬¡è¿è¡Œå·¥ç¨‹ï¼Œç¨‹åºåˆè¢«ä½ æŒ½æ•‘äº†ä¸€æ¬¡ã€‚ ä½ çœŸçš„éœ€è¦æ•‘å‘½ç¨»è‰ä¹ˆï¼Ÿ é€šè¿‡ä¸Šé¢çš„ä¸‰æ ¹æ•‘å‘½ç¨»è‰ï¼Œæˆ‘ç›¸ä¿¡ä½ ä¸€å®šå¯¹Objective-Cæ¶ˆæ¯æœºåˆ¶æœ‰äº†å…¨é¢è€Œæ·±å…¥çš„äº†è§£ï¼Œä¸Šé¢çš„ä»£ç ä¹Ÿåªæ˜¯ä¸ºäº†ç¤ºä¾‹æ‰€ç”¨ï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼Œä½ éƒ½ä¸ä¼šä½¿ç”¨åˆ°è¿™äº›å‡½æ•°(æ¯•ç«Ÿå¦‚æœä½ éœ€è¦æ•‘å‘½ç¨»è‰ï¼Œè¯´æ˜ä½ å·²ç»è½æ°´äº†)ã€‚é™¤éæŸäº›ç‰¹æ®Šéœ€æ±‚æˆ–è€…åšä¸€äº›è°ƒè¯•æ¡†æ¶çš„å¼€å‘ï¼Œå¦åˆ™å°½é‡ä¸è¦ä»‹å…¥æ¶ˆæ¯çš„å‘é€æœºåˆ¶ï¼Œå°±åƒç”Ÿç—…å°±åŒ»ï¼Œå‘ç°é—®é¢˜æ€»æ¯”é€ƒé¿æ²»ç–—è¦å¥½ã€‚é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œå¦‚æœä½ æ²¡æœ‰ä½¿ç”¨ä»»ä½•æ•‘å‘½ç¨»è‰ï¼Œå½“å‘æŸä¸ªå¯¹è±¡å‘é€äº†æ— æ³•å¤„ç†çš„æ¶ˆæ¯æ—¶ï¼Œç³»ç»Ÿä¼šæœ€ç»ˆè°ƒç”¨åˆ°NSObjectç±»çš„doesNotRecognizeSelectoræ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šæŠ›å‡ºå¼‚å¸¸ä¿¡æ¯ï¼Œæ­£å› å¦‚æ­¤ï¼Œä½ åœ¨Xcodeçš„æ§åˆ¶å°ä¼šç»å¸¸çœ‹åˆ°å¦‚ä¸‹å›¾æ‰€ç¤ºçš„crashä¿¡æ¯ï¼š ä½ ä¹Ÿå¯ä»¥é‡å†™è¿™ä¸ªæ–¹æ³•æ¥è‡ªå®šä¹‰è¾“å‡ºä¿¡æ¯ï¼Œä¾‹å¦‚ï¼š 12345678-(void)doesNotRecognizeSelector:(SEL)aSelector&#123; NSLog(@\"doesNotRecognizeSelector\"); if ([NSStringFromSelector(aSelector) isEqualToString:@\"showSelf\"]) &#123; NSLog(@\"not have a method named showSelf\"); return; &#125; [super doesNotRecognizeSelector:aSelector];&#125; ä¸‹å›¾å®Œæ•´å±•ç¤ºäº†Objective-Cæ•´ä¸ªæ¶ˆæ¯å‘é€ä¸è½¬å‘æœºåˆ¶ï¼š ä¸‰ã€å‘é€æ¶ˆæ¯çš„å‡ ä¸ªå‡½æ•°1.æœ€é‡è¦çš„ä¸¤ä¸ªå‘é€æ¶ˆæ¯å‡½æ•°æ—¢ç„¶Objective-Cå‡½æ•°æœ€ç»ˆçš„è°ƒç”¨éƒ½æ˜¯è¦è½¬æ¢æˆæ¶ˆæ¯å‘é€ï¼Œé‚£ä¹ˆäº†è§£ä¸‹é¢è¿™äº›æ¶ˆæ¯å‘é€å‡½æ•°æ˜¯ååˆ†å¿…è¦çš„ï¼Œè¿™äº›æ–¹æ³•éƒ½å®šä¹‰åœ¨objc/message.hæ–‡ä»¶ä¸­ï¼Œå…¶ä¸­æœ€é‡è¦çš„ä¸¤ä¸ªæ–¹æ³•æ˜¯ï¼š 1234567891011121314//å‘é€æ¶ˆæ¯çš„å‡½æ•°/*self:æ¶ˆæ¯çš„æ¥æ”¶å¯¹è±¡op:æ–¹æ³•é€‰æ‹©å™¨...:å‚æ•°*/id objc_msgSend(id self, SEL op, ...);//å‘é€æ¶ˆæ¯ç»™çˆ¶ç±»/*super:çˆ¶ç±»å¯¹è±¡ç»“æ„ä½“ op:æ–¹æ³•é€‰æ‹©å™¨...:å‚æ•°*/id objc_msgSendSuper(struct objc_super *super, SEL op, ...); objc_msgSendå‡½æ•°å‰é¢å·²ç»æœ‰è¿‡ä»‹ç»ï¼Œobjc_msgSendSuperå‡½æ•°åˆ™æ˜¯ä»çˆ¶ç±»ä¸­æ‰¾æ–¹æ³•çš„å®ç°è¿›è¡Œæ‰§è¡Œã€‚éœ€è¦æ³¨æ„ï¼Œè¿™ä¸ªå‡½æ•°éå¸¸é‡è¦ï¼Œç†è§£äº†è¿™ä¸ªè¿™ä¸ªå‡½æ•°è¿›è¡Œæ¶ˆæ¯å‘é€çš„åŸç†ï¼Œä½ å°±æ˜ç™½superå…³é”®å­—çš„æŸäº›ä»¤äººç–‘æƒ‘çš„è¡Œä¸ºäº†ã€‚ 2.superå…³é”®å­—åˆ°åº•åšäº†ä»€ä¹ˆåšäº†è¿™ä¹ˆä¹…çš„Objective-Cå¼€å‘ï¼Œä½ æ˜¯å¦çœŸçš„ç†è§£superå…³é”®å­—çš„å«ä¹‰ï¼Ÿä½ ä¸€å®šä¼šè¯´ï¼Œè¿™å¾ˆç®€å•å•Šï¼Œselfè°ƒç”¨æœ¬ç±»çš„æ–¹æ³•ï¼Œsuperè°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•ã€‚é‚£ä¹ˆæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªå°æ¡ˆä¾‹ï¼š åœ¨å‰é¢åˆ›å»ºçš„å‘½ä»¤è¡Œå·¥ç¨‹ä¸­æ–°å»ºä¸€ä¸ªç±»ï¼Œä½¿å…¶ç»§æ‰¿äºMyObjectç±»ï¼Œå‘½åä¸ºMyObjectSonï¼Œåœ¨å…¶ä¸­æä¾›ä¸¤ä¸ªæ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š MyObjectSon.hæ–‡ä»¶ï¼š 12345#import \"MyObject.h\"@interface MyObjectSon : MyObject-(void)showClass;-(void)showSuperClass;@end MyObjectSon.mæ–‡ä»¶ï¼š 12345678910#import \"MyObjectSon.h\"@implementation MyObjectSon-(void)showClass&#123; NSLog(@\"%@\",[self className]);&#125;-(void)showSuperClass&#123; NSLog(@\"%@\",[super className]);&#125;@end åˆ†åˆ«è°ƒç”¨ä¸¤ä¸ªæ–¹æ³•ï¼Œä½ ä¼šæƒŠå¥‡çš„å‘ç°ï¼Œæ‰“å°ç»“æ„éƒ½æ˜¯â€œMyObjectSonâ€ï¼Œsuperå…³é”®å­—å¤±æ•ˆäº†ä¹ˆï¼Ÿéä¹Ÿéä¹Ÿï¼Œä¸‹é¢æˆ‘ä»¬æ¥ç”¨æ¶ˆæ¯å‘é€æœºåˆ¶é‡æ–°æ¨¡æ‹Ÿè¿™ä¸¤ä¸ªæ–¹æ³•çš„è°ƒç”¨ã€‚ é¦–å…ˆ\\[self className\\]åœ¨è°ƒç”¨æ—¶ä¼šé‡‡ç”¨å‰é¢ä»‹ç»çš„æ¶ˆæ¯å‘é€æœºåˆ¶å…ˆä»å½“å‰ç±»ä¸­æ‰¾classNameå‡½æ•°ï¼Œå½“å‰ç±»ä¸­å¹¶æ²¡æœ‰æä¾›classNameå‡½æ•°ï¼Œæ‰€ä»¥æ¶ˆæ¯ä¼šéšç€ç»§æ‰¿é“¾å‘ä¸Šä¼ é€’ï¼Œæ‰¾åˆ°MyObjectç±»ä¸­ä¹Ÿæ²¡æœ‰classNameå‡½æ•°çš„å®ç°ï¼Œä¼šç»§ç»­å‘ä¸Šï¼Œæœ€ç»ˆåœ¨NSObjectç±»ä¸­æ‰¾åˆ°è¿™ä¸ªæ–¹æ³•ï¼Œè®°ä½ï¼Œè¿™æ¡æ¶ˆæ¯å¤„ç†çš„ä¸¤ä¸ªè¦ç´ æ˜¯ï¼šå½“å‰MyObjectSonå®ä¾‹å¯¹è±¡ä½œä¸ºæ¥æ”¶è€…ï¼ŒNSObjectç±»ä¸­çš„classNameæ–¹æ³•ä½œä¸ºè°ƒç”¨å‡½æ•°ã€‚ å½“è°ƒç”¨\\[super className\\]æ—¶ï¼Œé¦–å…ˆä¼šä½¿ç”¨objc_msgSendSuperæ–¹æ³•è¿›è¡Œæ¶ˆæ¯çš„å‘é€ï¼Œç­‰ä»·äºå¦‚ä¸‹ä»£ç ï¼š 123456-(void)showSuperClass&#123; //åˆ›å»ºçˆ¶ç±»æ¥æ”¶å¯¹è±¡ç»“æ„ä½“ struct objc_super superObj = &#123;self, object_getClass([MyObject new])&#125;; NSString * name = ((id(*)(struct objc_super*,SEL))objc_msgSendSuper)(&amp;superObj,@selector(className)); NSLog(@\"%@\",name);&#125; objc_msgSendSuperå‡½æ•°ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºä¸€ä¸ªçˆ¶ç±»æ¥æ”¶è€…ç»“æ„ä½“æŒ‡é’ˆï¼Œobjc_superç»“æ„ä½“å®šä¹‰å¦‚ä¸‹ï¼š 123456struct objc_super &#123; //æ¥æ”¶è€… __unsafe_unretained id receiver; //æ¥æ”¶è€…ç±»å‹ __unsafe_unretained Class super_class;&#125;; åœ¨æ„é€ objc_superè¿™ä¸ªç»“æ„ä½“æ—¶ï¼Œreceiveä¸ºæ¥æ”¶æ¶ˆæ¯çš„å¯¹è±¡ï¼Œsuper_classä¸ºä»å“ªä¸ªç±»ä¸­æŸ¥æ–¹æ³•ã€‚å¦‚æ­¤æ¥çœ‹ä¸€äº›éƒ½æ¸…æ¥šäº†ï¼Œç³»ç»Ÿé¦–å…ˆä»MyObjectç±»ä¸­æ‰¾classNameæ–¹æ³•ï¼Œæ²¡æœ‰ç›¸åº”çš„å®ç°ï¼Œä¼šç»§ç»­å‘ä¸Šç›´åˆ°æ‰¾åˆ°NSObjectç±»ä¸­çš„classNameæ–¹æ³•ï¼Œä¹‹åè¿›è¡Œæ‰§è¡Œã€‚è¿™æ¡æ¶ˆæ¯å¤„ç†çš„ä¸¤ä¸ªè¦ç´ æ˜¯ï¼šå½“å‰MyObjectSonå®ä¾‹å¯¹è±¡ä½œä¸ºæ¥æ”¶è€…ï¼ŒNSObjectç±»ä¸­çš„classNameæ–¹æ³•ä½œä¸ºè°ƒç”¨å‡½æ•°ã€‚è¿™æ ·åˆ†æä¸‹æ¥ï¼Œæ— è®ºæ˜¯ä½¿ç”¨selfæ‰§è¡Œçš„classNameæ–¹æ³•è¿˜æ˜¯ä½¿ç”¨superæ‰§è¡Œçš„classNameæ–¹æ³•ï¼Œè¡Œä¸ºå®è´¨ä¸Šæ˜¯å®Œå…¨ä¸€è‡´çš„ï¼ 3.ä¸€äº›è¾…åŠ©çš„æ¶ˆæ¯å‘é€å‡½æ•°ç‰¹æ®Šè¿”å›å€¼ç±»å‹å¯¹åº”ä¸åŒçš„å‘é€æ¶ˆæ¯å‡½æ•°ï¼š 12345//è¿”å›å€¼ä¸ºç»“æ„ä½“æ—¶ä½¿ç”¨æ­¤æ–¹æ³•å‘é€æ¶ˆæ¯void objc_msgSend_stret(id self, SEL op, ...);void objc_msgSendSuper_stret(struct objc_super *super, SEL op, ...);//è¿”å›å€¼ä¸ºæµ®ç‚¹æ•°æ—¶ä½¿ç”¨æ­¤æ–¹æ³•å‘é€æ¶ˆæ¯double objc_msgSend_fpret(id self, SEL op, ...); é™¤äº†ä½¿ç”¨SELæ–¹æ³•é€‰æ‹©å™¨æ¥å‘é€æ¶ˆæ¯ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨Methodæ¥å‘é€æ¶ˆæ¯ï¼š 123456789//è¿›è¡Œå‡½æ•°çš„è°ƒç”¨/*receiver:æ¥æ”¶è€…m:å‡½æ•°...:å‚æ•°*/id method_invoke(id receiver, Method m, ...);//è¿”å›ç»“æ„ä½“æ•°æ®çš„å‡½æ•°è°ƒç”¨void method_invoke_stret(id receiver, Method m, ...); Methodä¹Ÿæ˜¯ä¸€ç§ç»“æ„ä½“æŒ‡é’ˆï¼Œå…¶å®šä¹‰å¦‚ä¸‹ï¼š 12345678struct objc_method &#123; //é€‰æ‹©å™¨ SEL method_name OBJC2_UNAVAILABLE; //å‚æ•°ç±»å‹ char *method_types OBJC2_UNAVAILABLE; //å‡½æ•°åœ°å€ IMP method_imp OBJC2_UNAVAILABLE;&#125; ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415int main(int argc, const char * argv[]) &#123; @autoreleasepool &#123; MyObject * obj = [[MyObject alloc]init]; [obj class];//ä¸ºäº†æ¶ˆé™¤æœªå®šä¹‰é€‰æ‹©å™¨çš„è­¦å‘Š#pragma clang diagnostic push#pragma clang diagnostic ignored\"-Wundeclared-selector\" //è¿›è¡Œæ¶ˆæ¯å‘é€ Method method = class_getInstanceMethod([MyObject class], @selector(showSelf:age:)); ((void(*)(id,Method,NSString *,int))method_invoke)(obj,method,@\"ç²å°‘\",25);#pragma clang diagnostic pop &#125; return 0;&#125; ä¸‹é¢è¿™äº›æ–¹æ³•å¯ä»¥è·³è¿‡å½“å‰å¯¹è±¡ï¼Œç›´æ¥è¿›è¡Œæ¶ˆæ¯è½¬å‘ï¼š 123//è·³è¿‡å½“å‰å¯¹è±¡ç›´æ¥è¿›è¡Œæ¶ˆæ¯è½¬å‘æœºåˆ¶id _objc_msgForward(id receiver, SEL sel, ...);void _objc_msgForward_stret(id receiver, SEL sel, ...); ä¸€ç‚¹å»ºè®®ï¼Œä¸Šé¢ä¸¤ä¸ªæ–¹æ³•éƒ½æ˜¯ä»¥ä¸‹åˆ’çº¿å¼€å¤´ï¼Œè¿™ä¹Ÿè¡¨æ˜è®¾è®¡è€…å¹¶ä¸æƒ³è®©ä½ ç›´æ¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œç¡®å®å¦‚æ­¤ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•ä¼šç›´æ¥å‡ºå‘å¯¹è±¡çš„æ¶ˆæ¯è½¬å‘æµç¨‹ï¼Œå³ä¾¿å½“å‰å¯¹è±¡ç±»å·²ç»å®ç°äº†ç›¸åº”çš„æ–¹æ³•ä¹Ÿä¸ä¼šè¿›è¡ŒæŸ¥æ‰¾ã€‚ å››ã€æ˜¯æ—¶å€™æ¥é‡æ¸©ä¸‹Runtimeäº†æ‰€è°“è¿è¡Œæ—¶æ˜¯é’ˆå¯¹äºç¼–è¯‘æ—¶è€Œè¨€çš„ï¼Œæœ¬ç¯‡æ–‡ç« çš„å¼€å¤´ï¼Œæˆ‘ä»¬å°±è¯´è¿‡Objective-Cæ˜¯ä¸€ç§æåŠ¨æ€çš„è¿è¡Œæ—¶è¯­è¨€ã€‚å¯¹è±¡çš„è¡Œä¸ºæ˜¯åœ¨è¿è¡Œæ—¶è¢«å†³å®šçš„ï¼Œæˆ‘ä»¬å‰è¾¹ä¹Ÿäº†è§£äº†æœ‰å…³isaæŒ‡é’ˆå³Classçš„å†…å®¹ï¼Œè™½ç„¶æˆ‘ä»¬å¹¶ä¸èƒ½ç›´æ¥è®¿é—®isaæŒ‡é’ˆï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡objc/runtime.hæ–‡ä»¶ä¸­å®šä¹‰çš„è¿è¡Œæ—¶æ–¹æ³•æ¥è·å–æˆ–æ”¹å˜ç±»ä¸å¯¹è±¡çš„è¡Œä¸ºã€‚ 1.ç±»ç›¸å…³æ“ä½œå‡½æ•°123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263//å¯¹OCå¯¹è±¡è¿›è¡Œå†…å­˜æ‹·è´ åœ¨ARCç¯å¢ƒä¸‹ä¸å¯ç”¨/*obj:è¦æ‹·è´çš„å¯¹è±¡size:å†…å­˜å¤§å°*/id object_copy(id obj, size_t size);//è¿›è¡ŒOCå¯¹è±¡å†…å­˜çš„é‡Šæ”¾ åœ¨ARCç¯å¢ƒä¸‹ä¸å¯ç”¨id object_dispose(id obj);//è·å–OCå¯¹è±¡çš„ç±» æ³¨æ„ è¿™ä¸ªè¿”å›å€¼å’ŒisaæŒ‡é’ˆå¹¶ä¸æ˜¯åŒä¸€ä¸ªæŒ‡é’ˆClass object_getClass(id obj); //é‡å»ºå¯¹è±¡çš„ç±»Class object_setClass(id obj, Class cls); //åˆ¤æ–­ä¸€ä¸ªOCå¯¹è±¡æ˜¯å¦æ˜¯ç±»æˆ–å…ƒç±»(å‰é¢è¯´è¿‡ç±»å®é™…ä¸Šä¹Ÿæ˜¯å¯¹è±¡)BOOL object_isClass(id obj);//è·å–OCå¯¹è±¡çš„ç±»åconst char *object_getClassName(id obj);//é€šè¿‡ç±»åè·å–â€œç±»â€å¯¹è±¡Class objc_getClass(const char *name);//é€šè¿‡ç±»åè·å–å…ƒç±»å¯¹è±¡Class objc_getMetaClass(const char *name);//è¿™ä¸ªæ–¹æ³•ä¹Ÿæ˜¯è¿”å›ç±»çš„å®šä¹‰ åªæ˜¯å¦‚æœæ˜¯æœªæ³¨å†Œçš„ ä¼šè¿”å›nilClass objc_lookUpClass(const char *name);//è¿™ä¸ªæ–¹æ³•ä¹Ÿæ˜¯è¿”å›ç±»çš„å®šä¹‰ åªæ˜¯å¦‚æœæ˜¯æœªæ³¨å†Œçš„ ä¼šç›´æ¥æ€æ­»è¿›ç¨‹Class objc_getRequiredClass(const char *name);/*è·å–æ‰€æœ‰å·²ç»æ³¨å†Œçš„ç±» ä¼šè¿”å›å·²ç»æ³¨å†Œçš„ç±»çš„ä¸ªæ•°é€šå¸¸ä½¿ç”¨å¦‚ä¸‹ç¤ºä¾‹ä»£ç ï¼šint numClasses; Class * classes = NULL; numClasses = objc_getClassList(NULL, 0); if (numClasses &gt; 0) &#123; classes = (Class*)malloc(sizeof(Class) * numClasses); numClasses = objc_getClassList(classes, numClasses); NSLog(@\"number of classes: %d\", numClasses); for (int i = 0; i &lt; numClasses; i++) &#123; Class cls = classes[i]; NSLog(@\"class name: %s\", class_getName(cls)); &#125; free(classes); &#125;*/int objc_getClassList(Class *buffer, int bufferCount);//æ‹·è´æ‰€æœ‰æ³¨å†Œè¿‡çš„ç±»åˆ—è¡¨ å‚æ•°ä¸ºè¾“å‡ºç±»çš„ä¸ªæ•°Class *objc_copyClassList(unsigned int *outCount);//è·å–Classç±»åå­—ç¬¦ä¸²const char *class_getName(Class cls);//åˆ¤æ–­ä¸€ä¸ªClassæ˜¯å¦ä¸ºå…ƒç±»BOOL class_isMetaClass(Class cls);//è·å–ä¸€ä¸ªç±»çš„çˆ¶ç±»Class class_getSuperclass(Class cls);//ä¿®æ”¹ä¸€ä¸ªç±»çš„çˆ¶ç±»Class class_setSuperclass(Class cls, Class newSuper);//è·å–ä¸€ä¸ªç±»çš„ç‰ˆæœ¬int class_getVersion(Class cls);//è®¾ç½®ä¸€ä¸ªç±»çš„ç‰ˆæœ¬void class_setVersion(Class cls, int version);//è·å–ç±»çš„å†…å­˜å¸ƒå±€size_t class_getInstanceSize(Class cls); ä¸Šé¢åˆ—ä¸¾çš„æ–¹æ³•éƒ½å’Œç±»ç›¸å…³ï¼Œä½ æ²¡çœ‹é”™ï¼Œé€šè¿‡object_setClass()åŠ¨æ€æ”¹å˜å¯¹è±¡æ‰€å±çš„ç±»ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„ï¼Œå¯¹è±¡çš„æˆå‘˜å˜é‡å¹¶ä¸ä¼šå—åˆ°å½±å“ï¼Œæ–¹æ³•åˆ™å…¨éƒ¨æ›¿æ¢ä¸ºæ–°ç±»çš„æ–¹æ³•ã€‚å¦‚æœä½ å–œæ¬¢ï¼Œä½ ç”šè‡³å¯ä»¥è¿è¡Œæ—¶åŠ¨æ€ä¿®æ”¹ç±»çš„çˆ¶ç±»ï¼Œè¿™ååˆ†é…·å§ã€‚ä¸‹é¢è¿™äº›æ–¹æ³•åˆ™ä¸ç±»ä¸­çš„å˜é‡æœ‰å…³ï¼š 2.å˜é‡å±æ€§ç›¸å…³æ“ä½œå‡½æ•°123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105//è·å–ç±»é¢å¤–åˆ†é…å†…å­˜çš„æŒ‡é’ˆvoid *object_getIndexedIvars(id obj);//æ ¹æ®å˜é‡åè·å–å®ä¾‹å˜é‡æŒ‡é’ˆ/*Ivarå®è´¨ä¸Šæ˜¯ä¸€ä¸ªç»“æ„ä½“æŒ‡é’ˆï¼Œå­˜æ”¾å˜é‡ä¿¡æ¯ï¼Œå¦‚ä¸‹ï¼šstruct objc_ivar &#123; //å˜é‡å char *ivar_name OBJC2_UNAVAILABLE; //å˜é‡ç±»å‹ char *ivar_type OBJC2_UNAVAILABLE; int ivar_offset OBJC2_UNAVAILABLE;#ifdef __LP64__ int space OBJC2_UNAVAILABLE;#endif&#125; */Ivar class_getInstanceVariable(Class cls, const char *name);//æ ¹æ®å˜é‡åè·å–ç±»å˜é‡æŒ‡é’ˆIvar class_getClassVariable(Class cls, const char *name);//è·å–æ‰€æœ‰å®ä¾‹å˜é‡æŒ‡é’ˆ outCountè¾“å‡ºå®ä¾‹å˜é‡ä¸ªæ•°Ivar *class_copyIvarList(Class cls, unsigned int *outCount);//é€šè¿‡å˜é‡æŒ‡é’ˆè·å–å…·ä½“å˜é‡çš„å€¼id object_getIvar(id obj, Ivar ivar);//é€šè¿‡å˜é‡æŒ‡é’ˆè®¾ç½®å…·ä½“å˜é‡çš„å€¼void object_setIvar(id obj, Ivar ivar, id value);//é€šè¿‡å˜é‡æŒ‡é’ˆè®¾ç½®å˜é‡çš„å€¼ å¹¶è¿›è¡Œå¼ºå¼•ç”¨void object_setIvarWithStrongDefault(id obj, Ivar ivar, id value);//ç›´æ¥é€šè¿‡å˜é‡åä¿®æ”¹å®ä¾‹å˜é‡çš„å€¼ ä¼šè¿”å›å˜é‡æŒ‡é’ˆIvar object_setInstanceVariable(id obj, const char *name, void *value);//ç”¨æ³•åŒä¸ŠIvar object_setInstanceVariableWithStrongDefault(id obj, const char *name, void *value);//é€šè¿‡å˜é‡åç›´æ¥è·å–ç¤ºä¾‹å˜é‡çš„å€¼Ivar object_getInstanceVariable(id obj, const char *name, void **outValue);//è·å–ç±»å˜é‡å†…å­˜å¸ƒå±€const uint8_t *class_getIvarLayout(Class cls);//è®¾ç½®ç±»å˜é‡å†…å­˜å¸ƒå±€void class_setIvarLayout(Class cls, const uint8_t *layout);//è·å–ç±»å˜é‡å¸ƒå±€ å¼±å¼•ç”¨const uint8_t *class_getWeakIvarLayout(Class cls);//åŒä¸Švoid class_setWeakIvarLayout(Class cls, const uint8_t *layout);//é€šè¿‡å±æ€§åè·å–å±æ€§/*å±æ€§ç‰¹æŒ‡ä½¿ç”¨@prototypeå®šä¹‰çš„objc_property_tæ˜¯ä¸€ä¸ªç»“æ„ä½“æŒ‡é’ˆï¼Œå…¶æè¿°çš„æ˜¯å±æ€§çš„ä¿¡æ¯ï¼Œå¦‚ä¸‹ï¼štypedef struct &#123; const char *name; /**å±æ€§å */ const char *value; /**å±æ€§å€¼ */&#125; objc_property_attribute_t;*/objc_property_t class_getProperty(Class cls, const char *name);//è·å–æ‰€æœ‰å±æ€§åˆ—è¡¨objc_property_t *class_copyPropertyList(Class cls, unsigned int *outCount);//å‘ç±»æ·»åŠ ä¸€ä¸ªå®ä¾‹å˜é‡/*éœ€è¦æ³¨æ„ï¼Œå·²ç»æ³¨å†Œå­˜åœ¨çš„ç±»æ˜¯ä¸èƒ½é€šè¿‡è¿™ä¸ªæ–¹æ³•è¿½åŠ å®ä¾‹å˜é‡çš„è¿™ä¸ªæ–¹æ³•åªèƒ½åœ¨objc_allocateClassPairå‡½æ•°æ‰§è¡Œåå¹¶ä¸”objc_registerClassPairæ‰§è¡Œå‰è¿›è¡Œè°ƒç”¨å³è¿™ä¸ªå‡½æ•°æ˜¯ç”¨æ¥åŠ¨æ€ç”Ÿæˆç±»çš„*/BOOL class_addIvar(Class cls, const char *name, size_t size, uint8_t alignment, const char *types);//å‘ç±»ä¸­æ·»åŠ å±æ€§BOOL class_addProperty(Class cls, const char *name, const objc_property_attribute_t *attributes, unsigned int attributeCount);//è¿›è¡Œç±»å±æ€§çš„æ›¿æ¢void class_replaceProperty(Class cls, const char *name, const objc_property_attribute_t *attributes, unsigned int attributeCount);//è·å–å˜é‡æŒ‡é’ˆå¯¹åº”çš„å˜é‡åconst char *ivar_getName(Ivar v);//è·å–ç¼–ç åçš„å˜é‡ç±»å‹const char *ivar_getTypeEncoding(Ivar v);//è·å–å±æ€§åconst char *property_getName(objc_property_t property);//è·å–å±æ€§attributeconst char *property_getAttributes(objc_property_t property);char *property_copyAttributeValue(objc_property_t property, const char *attributeName);//è·å–å±æ€§attributeåˆ—è¡¨objc_property_attribute_t *property_copyAttributeList(objc_property_t property, unsigned int *outCount);//è¿›è¡Œå±æ€§å…³è” è¿™ç§æ–¹å¼å¯ä»¥ä¸ºå·²ç»å­˜åœ¨çš„ç±»çš„å®ä¾‹æ‰©å±•å±æ€§/*object:è¦æ·»åŠ å±æ€§çš„å¯¹è±¡key:å…³è”çš„é”®value:æ·»åŠ çš„å±æ€§çš„å€¼policy:æ·»åŠ å±æ€§çš„ç­–ç•¥typedef OBJC_ENUM(uintptr_t, objc_AssociationPolicy) &#123; //assign OBJC_ASSOCIATION_ASSIGN = 0, /**&lt; Specifies a weak reference to the associated object. */ //retain nonatimic OBJC_ASSOCIATION_RETAIN_NONATOMIC = 1, /**&lt; Specifies a strong reference to the associated object. * The association is not made atomically. */ //copy nonatomic OBJC_ASSOCIATION_COPY_NONATOMIC = 3, /**&lt; Specifies that the associated object is copied. * The association is not made atomically. */ //retain OBJC_ASSOCIATION_RETAIN = 01401, /**&lt; Specifies a strong reference to the associated object. * The association is made atomically. */ //copy OBJC_ASSOCIATION_COPY = 01403 /**&lt; Specifies that the associated object is copied. * The association is made atomically. */&#125;;*/void objc_setAssociatedObject(id object, const void *key, id value, objc_AssociationPolicy policy);//è·å–å…³è”å±æ€§çš„å€¼id objc_getAssociatedObject(id object, const void *key);//ç§»é™¤ä¸€ä¸ªå…³è”çš„å±æ€§void objc_removeAssociatedObjects(id object); 3.æ–¹æ³•æ“ä½œç›¸å…³å‡½æ•°1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374//é€šè¿‡é€‰æ‹©å™¨è·å–æŸä¸ªç±»çš„å®ä¾‹æ–¹æ³•Method class_getInstanceMethod(Class cls, SEL name);//é€šè¿‡é€‰æ‹©å™¨å®šä¹‰æŸä¸ªç±»çš„ç±»æ–¹æ³•Method class_getClassMethod(Class cls, SEL name);//é€šè¿‡é€‰æ‹©å™¨è·å–æŸä¸ªç±»çš„æ–¹æ³•å‡½æ•°æŒ‡é’ˆIMP class_getMethodImplementation(Class cls, SEL name);//åŒä¸ŠIMP class_getMethodImplementation_stret(Class cls, SEL name);//åˆ¤æ–­æŸä¸ªç±»æ˜¯å¦å¯ä»¥ç›¸åº”é€‰æ‹©å™¨BOOL class_respondsToSelector(Class cls, SEL sel);//è·å–æŸä¸ªç±»çš„å®ä¾‹æ–¹æ³•åˆ—è¡¨Method *class_copyMethodList(Class cls, unsigned int *outCount);//ä¸ºæŸä¸ªç±»åŠ¨æ€æ·»åŠ ä¸€ä¸ªå®ä¾‹æ–¹æ³•/*cls:æ·»åŠ æ–¹æ³•çš„ç±»SELï¼šæ·»åŠ çš„æ–¹æ³•é€‰æ‹©å™¨IMP:æ–¹æ³•å®ç°types:å‚æ•°ç±»å‹å­—ç¬¦ä¸²*/BOOL class_addMethod(Class cls, SEL name, IMP imp, const char *types); //æ›¿æ¢ä¸€ä¸ªæ–¹æ³•çš„å®ç°/*cls:ç±»SEL:è¦æ›¿æ¢å®ç°çš„é€‰æ‹©å™¨IMP:å®ç°types:å‚æ•°ç±»å‹å­—ç¬¦ä¸²*/IMP class_replaceMethod(Class cls, SEL name, IMP imp, const char *types);//è·å–å‡½æ•°çš„é€‰æ‹©å™¨SEL method_getName(Method m);//è·å–å‡½æ•°çš„å®ç°IMP method_getImplementation(Method m);//è·å–å‡½æ•°çš„å‚æ•°ç±»å‹const char *method_getTypeEncoding(Method m);//è·å–å‡½æ•°çš„å‚æ•°ä¸ªæ•°unsigned int method_getNumberOfArguments(Method m);//è·å–å‡½æ•°çš„è¿”å›å€¼ç±»å‹char *method_copyReturnType(Method m);//æ‹·è´å‚æ•°ç±»å‹åˆ—è¡¨char *method_copyArgumentType(Method m, unsigned int index);//è·å–è¿”å›å€¼ç±»å‹void method_getReturnType(Method m, char *dst, size_t dst_len) ;//è·å–å‚æ•°ç±»å‹void method_getArgumentType(Method m, unsigned int index, char *dst, size_t dst_len);//è·å–å‡½æ•°æè¿°ä¿¡æ¯/*objc_method_descriptionç»“æ„ä½“æè¿°å‡½æ•°ä¿¡æ¯ å¦‚ä¸‹ï¼šstruct objc_method_description &#123; //å‡½æ•°å SEL name; /**&lt; The name of the method */ //å‚æ•°ç±»å‹ char *types; /**&lt; The types of the method arguments */&#125;;*/struct objc_method_description *method_getDescription(Method m);//ä¿®æ”¹æŸä¸ªå‡½æ•°çš„å®ç°IMP method_setImplementation(Method m, IMP imp);//äº¤æ¢ä¸¤ä¸ªå‡½æ•°çš„å®ç°void method_exchangeImplementations(Method m1, Method m2);//è·å–é€‰æ‹©å™¨åç§°const char *sel_getName(SEL sel);//é€šè¿‡åç§°è·å–é€‰æ‹©å™¨SEL sel_getUid(const char *str);//æ³¨å†Œä¸€ä¸ªé€‰æ‹©å™¨SEL sel_registerName(const char *str);//åˆ¤æ–­ä¸¤ä¸ªé€‰æ‹©å™¨æ˜¯å¦ç›¸ç­‰BOOL sel_isEqual(SEL lhs, SEL rhs);//å°†blockä½œä¸ºIMPçš„å®ç°IMP imp_implementationWithBlock(id block);//è·å–IMPçš„å®ç°blockid imp_getBlock(IMP anImp);//åˆ é™¤IMPçš„blockå®ç°BOOL imp_removeBlock(IMP anImp); ä¸Šé¢åˆ—ä¸¾çš„å‡½æ•°ä¸­å¾ˆå¤šéƒ½ç”¨åˆ°å‚æ•°ç±»å‹çš„æŒ‡å®šï¼Œtypeséœ€è¦è®¾ç½®ä¸ºCé£æ ¼çš„å­—ç¬¦æ•°ç»„ï¼Œå³Cå­—ç¬¦ä¸²ï¼Œå…¶ä¸­ç¬¬1ä¸ªå­—ç¬¦è¡¨ç¤ºè¿”å›å€¼ç±»å‹ï¼Œå…¶ä½™å­—ç¬¦ä¾æ¬¡è¡¨ç¤ºå‚æ•°ç±»å‹ï¼Œå‚æ•°ç±»å‹ä¸å­—ç¬¦çš„æ˜ å°„è¡¨å¦‚ä¸‹ï¼š 4.åè®®ç›¸å…³æ“ä½œå‡½æ•°1234567891011121314151617181920212223242526272829303132333435363738394041424344//åˆ¤æ–­æŸä¸ªç±»æ˜¯å¦éµå®ˆæŸä¸ªåè®®BOOL class_conformsToProtocol(Class cls, Protocol *protocol);//æ‹·è´æŸä¸ªç±»çš„åè®®åˆ—è¡¨Protocol * __unsafe_unretained *class_copyProtocolList(Class cls, unsigned int *outCount);//åŠ¨æ€å‘ç±»ä¸­æ·»åŠ åè®®BOOL class_addProtocol(Class cls, Protocol *protocol);//é€šè¿‡åè®®åè·å–æŸä¸ªåè®®æŒ‡é’ˆProtocol *objc_getProtocol(const char *name);//æ‹·è´æ‰€æœ‰åè®®åˆ—è¡¨Protocol * __unsafe_unretained *objc_copyProtocolList(unsigned int *outCount);//åˆ¤æ–­æŸä¸ªåè®®æ˜¯å¦ç»§æ‰¿äºå¦ä¸€ä¸ªåè®®BOOL protocol_conformsToProtocol(Protocol *proto, Protocol *other);//åˆ¤æ–­ä¸¤ä¸ªåè®®æ˜¯å¦ç›¸åŒBOOL protocol_isEqual(Protocol *proto, Protocol *other);//è·å–åè®®åconst char *protocol_getName(Protocol *p);//è·å–åè®®ä¸­æŸä¸ªå‡½æ•°çš„æè¿°/*p:åè®®æŒ‡é’ˆaSel:æ–¹æ³•é€‰æ‹©å™¨isRequiredMethod:æ˜¯å¦æ˜¯å¿…å®ç°çš„isInstanceMehod:æ˜¯å¦æ˜¯å®ä¾‹æ–¹æ³•*/struct objc_method_description protocol_getMethodDescription(Protocol *p, SEL aSel, BOOL isRequiredMethod, BOOL isInstanceMethod);//è·å–åè®®æ–¹æ³•æè¿°åˆ—è¡¨struct objc_method_description *protocol_copyMethodDescriptionList(Protocol *p, BOOL isRequiredMethod, BOOL isInstanceMethod, unsigned int *outCount);//è·å–åè®®ä¸­çš„å±æ€§æè¿°objc_property_t protocol_getProperty(Protocol *proto, const char *name, BOOL isRequiredProperty, BOOL isInstanceProperty);//è·å–åè®®ä¸­çš„å±æ€§æè¿°åˆ—è¡¨objc_property_t *protocol_copyPropertyList(Protocol *proto, unsigned int *outCount);//åŒä¸Šobjc_property_t *protocol_copyPropertyList2(Protocol *proto, unsigned int *outCount, BOOL isRequiredProperty, BOOL isInstanceProperty);//è·å–é€‚é…åè®®åˆ—è¡¨Protocol * __unsafe_unretained *protocol_copyProtocolList(Protocol *proto, unsigned int *outCount);//åˆ›å»ºä¸€ä¸ªåè®®Protocol *objc_allocateProtocol(const char *name);//è¿›è¡Œåè®®æ³¨å†Œvoid objc_registerProtocol(Protocol *proto);//å‘åè®®ä¸­æ·»åŠ ä¸€ä¸ªæ–¹æ³•æè¿°void protocol_addMethodDescription(Protocol *proto, SEL name, const char *types, BOOL isRequiredMethod, BOOL isInstanceMethod);//å‘åè®®ä¸­æ·»åŠ å¦ä¸€ä¸ªåè®®void protocol_addProtocol(Protocol *proto, Protocol *addition);//å‘åè®®ä¸­æ·»åŠ å±æ€§æè¿°void protocol_addProperty(Protocol *proto, const char *name, const objc_property_attribute_t *attributes, unsigned int attributeCount, BOOL isRequiredProperty, BOOL isInstanceProperty); åè®®å®è´¨ä¹Ÿæ˜¯ä¸€ä¸ªObjective-Cå¯¹è±¡ã€‚ 5.åŠ¨æ€æ„å»ºç±»å®ä¾‹ç›¸å…³å‡½æ•°123456789101112131415161718192021//åŠ¨æ€åˆ›å»ºä¸€ä¸ªç±»å®ä¾‹/*cls:ç±»åsize_t:åˆ†é…é¢å¤–çš„å†…å­˜ ç”¨æ¥å­˜æ”¾ç±»å®šä¹‰ä¹‹å¤–çš„å˜é‡*/id class_createInstance(Class cls, size_t extraBytes);//åŒä¸Šid objc_constructInstance(Class cls, void *bytes);//é”€æ¯ä¸€ä¸ªå®ä¾‹void *objc_destructInstance(id obj);//åŠ¨æ€å®šä¹‰ä¸€ä¸ªç±» /*superClass:æŒ‡å®šçˆ¶ç±»name:ç±»åextraBytes:é¢å¤–çš„å†…å­˜ç©ºé—´*/Class objc_allocateClassPair(Class superclass, const char *name,size_t extraBytes);//è¿›è¡Œç±»çš„æ³¨å†Œ éœ€è¦æ³¨æ„ è¦æ·»åŠ å±æ€§ å¿…é¡»åœ¨æ³¨å†Œç±»ä¹‹å‰æ·»åŠ void objc_registerClassPair(Class cls);//é”€æ¯ä¸€ä¸ªç±»void objc_disposeClassPair(Class cls); äº”ã€è¿è¡Œæ—¶çš„å‡ ç‚¹åº”ç”¨æ‰©å±•åˆ°æ­¤æœ¬ç¯‡æ–‡ç« ç»ˆäºè¦å‘Šä¸€æ®µè½äº†ï¼Œç›¸ä¿¡ä½ å¦‚æœèƒ½çœ‹åˆ°è¿™é‡Œï¼Œä½ ä¸€å®šæœ‰è¶…å‡¡çš„è€å¿ƒã€‚ä½†æ˜¯åˆ‡è®°Objective-Cçš„æ¶ˆæ¯æœºåˆ¶é…åˆè¿è¡Œæ—¶æ˜¯å¯ä»¥ç»™å¼€å‘è€…æå¤§çš„å…ƒç¼–ç¨‹è‡ªç”±ï¼Œä½†æ˜¯ä¸é€‚å½“çš„ä½¿ç”¨ä¹Ÿä¼šé€ æˆç ´åæ€§çš„åæœã€‚ä¸‹é¢å‡ ç¯‡åšå®¢ä»ä¸€äº›æ–¹é¢ä»‹ç»äº†Runtimeçš„å‡ ç‚¹åº”ç”¨ï¼Œä½ å¯ä»¥ä»ä¸­ç®¡ä¸­çª¥è±¹ï¼Œå¯è§ä¸€æ–‘ã€‚ 1.runtimeåŸºç¡€åº”ç”¨ï¼šhttps://my.oschina.net/u/2340880/blog/489072 2.ä½¿ç”¨runtimeå…¨å±€ä¿®æ”¹UILabelå­—ä½“ï¼šhttps://my.oschina.net/u/2340880/blog/538356 3.ä½¿ç”¨runtimeè‡ªåŠ¨åŒ–å½’æ¡£ï¼šhttps://my.oschina.net/u/2340880/blog/514330 4.ä»£ç è°ƒè¯•æ¡†æ¶çš„è®¾è®¡ï¼šhttps://my.oschina.net/u/2340880/blog/504675","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"NSTextFieldæ§ä»¶åº”ç”¨è¯¦è§£","slug":"326NSTextFieldæ§ä»¶åº”ç”¨è¯¦è§£","date":"2017-04-26T16:00:00.000Z","updated":"2021-07-14T08:11:53.791Z","comments":true,"path":"2017/04/27/326NSTextFieldæ§ä»¶åº”ç”¨è¯¦è§£/","link":"","permalink":"http://huishao.cc/2017/04/27/326NSTextFieldæ§ä»¶åº”ç”¨è¯¦è§£/","excerpt":"","text":"NSTextFieldæ§ä»¶åº”ç”¨è¯¦è§£NSTextFieldç”¨æ¥æ¥æ”¶ç”¨æˆ·æ–‡æœ¬è¾“å…¥ï¼Œå…¶å¯ä»¥æ¥æ”¶é”®ç›˜äº‹ä»¶ã€‚åˆ›å»ºNSTextFiledçš„ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738- (void)viewDidLoad &#123; [super viewDidLoad]; //åˆ›å»ºTextFieldå¯¹è±¡ _textField = [[NSTextField alloc]initWithFrame:NSMakeRect(50, 30, 200, 50)]; //è®¾ç½®é»˜è®¤æ˜¾ç¤ºçš„æç¤ºå­—ç¬¦ä¸² _textField.placeholderString = @\"è¯·å¡«å†™ä½ çš„æ¢¦æƒ³\"; //è®¾ç½®é»˜è®¤æ˜¾ç¤ºçš„æç¤ºå­—ç¬¦ä¸² ä½¿ç”¨çš„å¸¦å±æ€§çš„å­—ç¬¦ä¸² NSMutableAttributedString * attriString = [[NSMutableAttributedString alloc]initWithString:@\"è¯·å¡«å†™ä½ çš„æ¢¦æƒ³\"]; [attriString addAttribute:NSForegroundColorAttributeName value:[NSColor redColor] range:NSMakeRange(5, 2)]; _textField.placeholderAttributedString = attriString; //è®¾ç½®æ–‡æœ¬æ¡†èƒŒæ™¯é¢œè‰² _textField.backgroundColor = [NSColor greenColor]; //è®¾ç½®æ˜¯å¦ç»˜åˆ¶èƒŒæ™¯ _textField.drawsBackground = YES; //è®¾ç½®æ–‡å­—é¢œè‰² _textField.textColor = [NSColor blueColor]; //è®¾ç½®æ˜¯å¦æ˜¾ç¤ºè¾¹æ¡† _textField.bordered = YES; //è®¾ç½®æ˜¯å¦ç»˜åˆ¶è´å¡å°”é£æ ¼çš„è¾¹æ¡† _textField.bezeled = YES; //è®¾ç½®æ˜¯å¦å¯ä»¥ç¼–è¾‘ _textField.editable = YES; //è®¾ç½®æ–‡æœ¬æ¡†æ˜¯å¦å¯ä»¥é€‰ä¸­ _textField.selectable = YES; //è®¾ç½®è´å¡å°”é£æ ¼ _textField.bezelStyle = NSTextFieldSquareBezel; //è®¾ç½®å€¾å‘å¸ƒå±€å®½åº¦ _textField.preferredMaxLayoutWidth = 100; //è®¾ç½®æœ€å¤§è¡Œæ•° _textField.maximumNumberOfLines = 5; //è®¾ç½®æ–­è¡Œæ¨¡å¼ [[_textField cell] setLineBreakMode:NSLineBreakByCharWrapping]; //è®¾ç½®æ˜¯å¦å¯ç”¨å•è¡Œæ¨¡å¼ [[_textField cell]setUsesSingleLineMode:NO]; //è®¾ç½®è¶…å‡ºè¡Œæ•°æ˜¯å¦éšè— [[_textField cell] setTruncatesLastVisibleLine: YES ]; [self.view addSubview:_textField];&#125; éœ€è¦æ³¨æ„ï¼Œåœ¨AppKitåæ ‡ä½“ç³»ä¸­ï¼ŒåŸç‚¹åœ¨å·¦ä¸‹è§’ï¼Œè¿™å’Œæ•°å­¦ä¸­çš„åæ ‡ç³»ä¸€è‡´ã€‚è¿è¡Œå·¥ç¨‹ï¼Œæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š NSTextFieldç±»ä¸­å¸¸ç”¨çš„å±æ€§å’Œæ–¹æ³•åˆ—ä¸¾å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364//è®¾ç½®é»˜è®¤æ˜¾ç¤ºçš„æç¤ºæ–‡å­—@property (nullable, copy) NSString *placeholderString NS_AVAILABLE_MAC(10_10);//è®¾ç½®é»˜è®¤æ˜¾ç¤ºçš„æç¤ºæ–‡å­— å¸¦å±æ€§çš„æ–‡æœ¬@property (nullable, copy) NSAttributedString *placeholderAttributedString NS_AVAILABLE_MAC(10_10);//è®¾ç½®èƒŒæ™¯é¢œè‰²@property (nullable, copy) NSColor *backgroundColor;//è®¾ç½®æ˜¯å¦ç»˜åˆ¶èƒŒæ™¯@property BOOL drawsBackground;//è®¾ç½®æ–‡å­—é¢œè‰²@property (nullable, copy) NSColor *textColor;//è®¾ç½®æ˜¯å¦ç»˜åˆ¶è¾¹æ¡†@property (getter=isBordered) BOOL bordered;//è®¾ç½®æ˜¯å¦è´å¡å°”ç»˜åˆ¶@property (getter=isBezeled) BOOL bezeled;//è®¾ç½®æ˜¯å¦å…è®¸ç¼–è¾‘@property (getter=isEditable) BOOL editable;//è®¾ç½®æ˜¯å¦å…è®¸æ–‡æœ¬æ¡†é€‰ä¸­@property (getter=isSelectable) BOOL selectable;//è®¾ç½®ä»£ç†@property (nullable, assign) id&lt;NSTextFieldDelegate&gt; delegate;//è·å–æ˜¯å¦æ¥å—ç¬¬ä¸€å“åº”@property (readonly) BOOL acceptsFirstResponder;//è®¾ç½®è´å¡å°”é£æ ¼/*typedef NS_ENUM(NSUInteger, NSTextFieldBezelStyle) &#123; NSTextFieldSquareBezel = 0, NSTextFieldRoundedBezel = 1&#125;;*/@property NSTextFieldBezelStyle bezelStyle;//è®¾ç½®ä¸€ä¸ªé¢„å®šçš„æœ€å¤§å®½åº¦@property CGFloat preferredMaxLayoutWidth;//è®¾ç½®æœ€å¤§è¡Œæ•°@property NSInteger maximumNumberOfLines;//è®¾ç½®æ˜¯å¦å…è®¸ç¼–è¾‘æ–‡æœ¬å±æ€§@property BOOL allowsEditingTextAttributes;//è®¾ç½®æ˜¯å¦å…è®¸ç”¨æˆ·å‘æ–‡æœ¬æ¡†ä¸­æ‹–æ‹½å›¾ç‰‡@property BOOL importsGraphics;//ä¸‹é¢è¿™äº›æ–¹æ³•ç”¨äºå­ç±»è¿›è¡Œé‡å†™//é€‰æ‹©æ–‡æœ¬æ¡†æ—¶è°ƒç”¨- (void)selectText:(nullable id)sender;//è¯¢é—®æ˜¯å¦å…è®¸å¼€å§‹ç¼–è¾‘æ–‡æœ¬æ¡†- (BOOL)textShouldBeginEditing:(NSText *)textObject;//è¯¢é—®æ˜¯å¦å…è®¸ç»“æŸç¼–è¾‘æ–‡æœ¬æ¡†- (BOOL)textShouldEndEditing:(NSText *)textObject;//æ–‡æœ¬æ¡†å·²ç»å¼€å§‹è¿›å…¥ç¼–è¾‘çš„é€šçŸ¥- (void)textDidBeginEditing:(NSNotification *)notification;//æ–‡æœ¬æ¡†å·²ç»ç»“æŸç¼–è¾‘çš„é€šçŸ¥- (void)textDidEndEditing:(NSNotification *)notification;//æ–‡æœ¬æ¡†ä¸­æ–‡å­—å‘ç”Ÿå˜åŒ–çš„é€šçŸ¥- (void)textDidChange:(NSNotification *)notification;//ä¸‹é¢ä¸¤ä¸ªå±æ€§ä¸TouchBarç›¸å…³ åªæœ‰å†è¾ƒé«˜ç‰ˆæœ¬çš„macç”µè„‘ä¸­æœ‰æ•ˆ//è‡ªåŠ¨å®Œæˆç¼–è¾‘@property (getter=isAutomaticTextCompletionEnabled) BOOL automaticTextCompletionEnabled NS_AVAILABLE_MAC(10_12_2);//å­—ç¬¦é€‰æ‹©æŒ‰é’®@property BOOL allowsCharacterPickerTouchBarItem NS_AVAILABLE_MAC(10_12_2);//ä¸‹é¢æ˜¯ä¸€äº›ä¾¿æ·åˆ›å»ºNSTextFieldå¯¹è±¡çš„æ–¹æ³•+ (instancetype)labelWithString:(NSString *)stringValue NS_SWIFT_NAME(init(labelWithString:)) NS_AVAILABLE_MAC(10_12);+ (instancetype)wrappingLabelWithString:(NSString *)stringValue NS_SWIFT_NAME(init(wrappingLabelWithString:)) NS_AVAILABLE_MAC(10_12);+ (instancetype)labelWithAttributedString:(NSAttributedString *)attributedStringValue NS_SWIFT_NAME(init(labelWithAttributedString:)) NS_AVAILABLE_MAC(10_12);+ (instancetype)textFieldWithString:(nullable NSString *)stringValue NS_AVAILABLE_MAC(10_12); NSTextFieldç±»ç»§æ‰¿è‡ªNSControlç±»ï¼ŒNSControlç±»ä¸­å®šä¹‰äº†è®¸å¤šå±æ€§å¯ä»¥è·å–åˆ°æ–‡æœ¬æ¡†ä¸­çš„æ–‡æœ¬ï¼Œä¾‹å¦‚stringValueå±æ€§ï¼Œæœ¬æ–‡ä¸­ä¸å†èµ˜è¿°ã€‚ å…³äºNSTextFieldDelegateåè®®ï¼Œå…¶å®é™…ä¸Šæ˜¯ç»§æ‰¿è‡ªNSControlTextEditingDelegateåè®®ï¼Œè¿™ä¸ªåè®®ä¸­å®šä¹‰äº†NSTextFieldæ§ä»¶åœ¨æ´»åŠ¨è¿‡ç¨‹ä¸­çš„å›è°ƒæ–¹æ³•ï¼Œä¾‹å¦‚å¼€å§‹ç¼–è¾‘ï¼Œç»“æŸç¼–è¾‘ç­‰ã€‚","categories":[{"name":"macOSå¼€å‘","slug":"macOSå¼€å‘","permalink":"http://huishao.cc/categories/macOSå¼€å‘/"}],"tags":[],"keywords":[{"name":"macOSå¼€å‘","slug":"macOSå¼€å‘","permalink":"http://huishao.cc/categories/macOSå¼€å‘/"}]},{"title":"macOSå¼€å‘ä¹‹NSTableViewçš„åº”ç”¨è¯¦è§£","slug":"325macOSå¼€å‘ä¹‹NSTableViewçš„åº”ç”¨è¯¦è§£","date":"2017-04-24T16:00:00.000Z","updated":"2021-07-14T08:11:01.348Z","comments":true,"path":"2017/04/25/325macOSå¼€å‘ä¹‹NSTableViewçš„åº”ç”¨è¯¦è§£/","link":"","permalink":"http://huishao.cc/2017/04/25/325macOSå¼€å‘ä¹‹NSTableViewçš„åº”ç”¨è¯¦è§£/","excerpt":"","text":"NSTableViewçš„åº”ç”¨è¯¦è§£ä¸€ã€å¼•è¨€å’ŒiOSå¼€å‘ä¸­çš„UITableViewæœ‰å¾ˆå¤§å·®åˆ«ï¼ŒNSTableViewå¹¶éæ˜¯ä¸€ä¸ªå¯æ»šåŠ¨çš„åˆ—è¡¨è§†å›¾ï¼Œå…¶æ˜¯ä¸€ä¸ªä¸å¯æ»šåŠ¨ã€æ”¯æŒå¤šåˆ—å¤šè¡Œçš„åŸå§‹åˆ—è¡¨è§†å›¾ã€‚è‹¥è¦ä½¿NSTableViewæ”¯æŒæ»šåŠ¨ï¼Œé€šå¸¸ä¼šå°†å…¶åµŒå¥—å…¥NSScrollViewæ§ä»¶ä¸­ã€‚ä¸UITableViewç±»ä¼¼ï¼ŒNSTableViewçš„æ•°æ®ä¹Ÿæ˜¯ç”¨è¿‡DataSourceä»£ç†æ¥æä¾›ï¼Œé€šè¿‡Delegateä»£ç†æ¥è¿›è¡Œè¡¨æ ¼è§†å›¾çš„å®šåˆ¶åŒ–ã€‚åœ¨OS X v10.6ç‰ˆæœ¬ä¹‹å‰ï¼ŒNSTableViewä¸­è¡Œæ•°æ®è½½ä½“è§†å›¾å¿…é¡»æ˜¯NSCellçš„å­ç±»ï¼Œä¹‹åç‰ˆæœ¬çš„OS Xæ”¯æŒå¼€å‘è€…åˆ›å»ºåŸºäºViewçš„TableViewè§†å›¾ï¼ŒåŒæ ·ä¹Ÿæ”¯æŒåŸºäºCellçš„TabelViewè§†å›¾ï¼Œåœ¨å¼€å‘è€…ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®å®é™…éœ€æ±‚é€‰æ‹©ã€‚ äºŒã€æ„å»ºä¸€ä¸ªç®€å•çš„åˆ—è¡¨è§†å›¾é¦–å…ˆæ–°å»ºä¸€ä¸ªæµ‹è¯•å·¥ç¨‹ï¼Œåœ¨ViewController.mæ–‡ä»¶ä¸­ç¼–å†™å¦‚ä¸‹ä»£ç ï¼š 123456789101112131415161718192021222324252627282930313233343536373839#import \"ViewController.h\"@interface ViewController()&lt;NSTableViewDelegate,NSTableViewDataSource&gt;@end@implementation ViewController&#123; NSTableView * _tableView; NSMutableArray * _dataArray;&#125;- (void)viewDidLoad &#123; [super viewDidLoad]; _dataArray = [NSMutableArray array]; for (int i=0; i&lt;20; i++) &#123; [_dataArray addObject:[NSString stringWithFormat:@\"%dè¡Œæ•°æ®\",i]]; &#125; NSScrollView * scrollView = [[NSScrollView alloc] init]; scrollView.hasVerticalScroller = YES; scrollView.frame = self.view.bounds; [self.view addSubview:scrollView]; _tableView = [[NSTableView alloc]initWithFrame:self.view.bounds]; NSTableColumn * column = [[NSTableColumn alloc]initWithIdentifier:@\"test\"]; [_tableView addTableColumn:column]; _tableView.delegate = self; _tableView.dataSource = self; [_tableView reloadData]; scrollView.contentView.documentView = _tableView;&#125;-(NSInteger)numberOfRowsInTableView:(NSTableView *)tableView&#123; return _dataArray.count;&#125;-(id)tableView:(NSTableView *)tableView objectValueForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row&#123; return _dataArray[row];&#125;@end è¿è¡Œå·¥ç¨‹æ•ˆæœå¦‚ä¸‹å›¾ï¼š è¿™æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„TableViewç¤ºä¾‹ï¼Œä½†æ˜¯ç»†è¯»ä»£ç ï¼Œéº»é›€è™½å°äº”è„ä¿±å…¨ã€‚é¦–å…ˆNSTableViewä¸­çš„åˆ—æ˜¯ç”±NSTableColumnç±»æè¿°çš„ã€‚ä¸€ä¸ªåˆ—è¡¨å¯ä»¥æœ‰å¤šä¸ªåˆ—ã€‚ä¹Ÿæ­£å¦‚å‰é¢æ‰€è¯´ï¼ŒnumberOfRowsInTableViewæ–¹æ³•ä¸ºæ•°æ®æºä»£ç†å¿…é¡»å®ç°çš„æ–¹æ³•ï¼Œå…¶ä¸­éœ€è¦è¿”å›åˆ—è¡¨çš„è¡Œæ•°ã€‚objectValueForTableColumnæ–¹æ³•åˆ™æ˜¯åŸºäºCellçš„TableViewå¿…é¡»å®ç°çš„æ–¹æ³•ï¼Œå…¶ä¸­éœ€è¦è¿”å›æ¯ä¸ªåˆ—è¡¨è¡Œæ‰€å¡«å……çš„æ•°æ®ã€‚ ä¸‰ã€å…³äºNSTableColumeçš„æ¢ç©¶NSTableColumeç®€å•ç†è§£å°±æ˜¯ä¸€åˆ—ï¼Œå…¶ä¸­å¯ä»¥è¿›è¡Œæ­¤åˆ—æ ·å¼çš„ç›¸å…³è®¾ç½®ï¼ŒNSTableColumnç±»ä¸­å¸¸ç”¨å±æ€§è§£æå¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243//åˆå§‹åŒ–æ–¹æ³•ï¼ŒæŒ‡å®šä¸€ä¸ªåˆ—ID- (instancetype)initWithIdentifier:(NSString *)identifier;//ä¸æ­¤åˆ—å…³è”çš„ID@property (copy) NSString *identifier;//å…³è”çš„TableView@property (nullable, assign) NSTableView *tableView;//è®¾ç½®åˆ—å®½åº¦@property CGFloat width;//è®¾ç½®æœ€å°åˆ—å®½åº¦@property CGFloat minWidth;//è®¾ç½®æœ€å¤§åˆ—å®½åº¦@property CGFloat maxWidth;//è®¾ç½®ç±»æ ‡é¢˜@property (copy) NSString *title;/*åˆ—æ ‡é¢˜è§†å›¾ å¼€å‘è€…å¯ä»¥å¯¹å…¶è¿›è¡Œä¿®æ”¹éœ€è¦æ³¨æ„ï¼ŒNSTableHeaderCellæ˜¯ç»§æ‰¿è‡ªNSTextFieldCell*/@property (strong) __kindof NSTableHeaderCell *headerCell;//è®¾ç½®æ­¤åˆ—æ˜¯å¦å¯ä»¥è¿›è¡Œç¼–è¾‘@property (getter=isEditable) BOOL editable;//è¿›è¡Œåˆ—å°ºå¯¸çš„è°ƒæ•´ ä»¥åˆ—æ ‡é¢˜è§†å›¾çš„å®½åº¦ä¸ºæ ‡å‡† - (void)sizeToFit;//æä¾›äº†è¿™ä¸ªå±æ€§ï¼Œä¼šåœ¨åˆ—æ ‡é¢˜é‚£é‡Œæ˜¾ç¤ºä¸€ä¸ªæ’åºæŒ‰é’® ç‚¹å‡»åˆ—æ ‡é¢˜åå¯ä»¥è¿›è¡Œæ’åºæ“ä½œ(ä¼šå›è°ƒç›¸å…³åè®®æ–¹æ³•)@property (nullable, copy) NSSortDescriptor *sortDescriptorPrototype;//è®¾ç½®åˆ—å°ºå¯¸çš„è°ƒæ•´æ¨¡å¼ æšä¸¾å¦‚ä¸‹/*typedef NS_OPTIONS(NSUInteger, NSTableColumnResizingOptions) &#123; NSTableColumnNoResizing = 0, //ä¸å…è®¸è¿›è¡Œå®½åº¦è°ƒæ•´ //è¯¦è§NSTabelViewçš„columnAutoresizingStyleå±æ€§ NSTableColumnAutoresizingMask = ( 1 &lt;&lt; 0 ), //ä½¿ç”¨tableViewçš„columnè°ƒæ•´ç­–ç•¥ NSTableColumnUserResizingMask = ( 1 &lt;&lt; 1 ), //å…è®¸ç”¨æˆ·è¿›è¡Œå°ºå¯¸è°ƒæ•´&#125;;*/@property NSTableColumnResizingOptions resizingMask;//è®¾ç½®åˆ—å¤´çš„æç¤ºæ ‡é¢˜ å½“é¼ æ ‡æ‚¬åœåœ¨ç±»æ ‡é¢˜ä¸Šæ—¶ ä¼šæ˜¾ç¤ºæ­¤æç¤º@property (nullable, copy) NSString *headerToolTip;//è®¾ç½®æ­¤åˆ—æ˜¯å¦éšè—@property (getter=isHidden) BOOL hidden;//è®¾ç½®æ­¤åˆ—æ‰€æœ‰è¡Œçš„æ•°æ®è½½ä½“è§†å›¾ å¦‚æœä¸è®¾ç½® é»˜è®¤ä¸ºNSTextFieldCell@property (strong) id dataCell;//ä¸ºTableViewåˆ—è¡¨æä¾›æ•°æ®è½½ä½“è§†å›¾- (id)dataCellForRow:(NSInteger)row; å››ã€Cell-Baseï¼šåŸºäºCellçš„TableViewè§†å›¾Cell-Baseæ˜¯OS Xæ—©èµ·ç‰ˆæœ¬ä¸­å¸¸ç”¨çš„æ„é€ TabelViewçš„æ–¹å¼ï¼Œå…¶ä¸­æ¯ä¸€è¡Œçš„æ•°æ®è½½ä½“éƒ½å¿…é¡»æ˜¯NSCellçš„å­ç±»ã€‚å¦‚æœ¬æ–‡å¼€å¤´çš„ç¤ºä¾‹ä»£ç ï¼ŒCell-Baseçš„TableViewå¿…é¡»å®ç°çš„ä¸¤ä¸ªåè®®æ–¹æ³•æ˜¯numberOfRowsInTableViewå’ŒobjectValueForTableColumnæ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªæ–¹æ³•è®¾ç½®åˆ—è¡¨è¡Œæ•°ï¼Œç¬¬2ä¸ªæ–¹æ³•è®¾ç½®æ¯ä¸ªæ•°æ®è½½ä½“å¯¹åº”çš„å…·ä½“æ•°æ®ã€‚éœ€è¦æ³¨æ„ï¼Œå¦‚æœåªå®ç°è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œåˆ™NSTableViewä¼šè‡ªåŠ¨ä»åˆ—å¯¹è±¡NSTableColumeä¸­å–å…·ä½“çš„è¡Œè§†å›¾ï¼Œé€šè¿‡dataCellForRowæ–¹æ³•ã€‚å½“objectValueForTableColumnæ–¹æ³•å°†æ¯ä¸ªè¡Œå…·ä½“çš„æ•°æ®è¿”å›åï¼Œä¼šè°ƒç”¨cellçš„setObjectValueæ–¹æ³•(å› æ­¤å¦‚æœè¦è‡ªå®šä¹‰cellï¼Œå¿…é¡»å®ç°è¿™ä¸ªæ–¹æ³•)ã€‚å¦‚æœæˆ‘ä»¬è¦å¯¹Cellçš„æ¸²æŸ“è¿›è¡Œä¸€äº›å®šåˆ¶ï¼Œå¯ä»¥åœ¨å¦‚ä¸‹æ–¹æ³•ä¸­å®ç°ï¼š 12//å°†è¦æ¸²æŸ“cellè°ƒç”¨çš„æ–¹æ³• å¼€å‘è€…å¯ä»¥æ‹¿åˆ°cellå¯¹è±¡åšå®šåˆ¶- (void)tableView:(NSTableView *)tableView willDisplayCell:(id)cell forTableColumn:(nullable NSTableColumn *)tableColumn row:(NSInteger)row; å®ç°ä¸‹é¢çš„æ–¹æ³•å¯ä»¥è¿”å›ä¸€ä¸ªè‡ªå®šä¹‰çš„Cellï¼Œå¦‚æœå®ç°äº†è¿™ä¸ªæ–¹æ³•ï¼Œåˆ™TableViewä¸ä¼šå†ä»NSTableColumnå¯¹è±¡ä¸­æ‹¿Cellå®ä¾‹ï¼š 123456//è¿”å›è‡ªå®šä¹‰çš„Cellå®ä¾‹/*éœ€è¦æ³¨æ„ï¼Œè¿™ä¸ªæ–¹æ³•åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨çš„æ—¶å€™ tableColumuå¯¹è±¡æ˜¯nil å¦‚æœè¿™æ—¶è¿”å›äº†Cellï¼Œåˆ™æ­¤Cellå®½åº¦ä¼šè¦†ç›–æ•´ä¸ªåˆ—è¡¨åœ¨ä½¿ç”¨æ—¶è¦å¤šåŠ æ³¨æ„*/- (nullable NSCell *)tableView:(NSTableView *)tableView dataCellForTableColumn:(nullable NSTableColumn *)tableColumn row:(NSInteger)row; å…¶ä»–æ–¹æ³•çš„å®ä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596#import \"ViewController.h\"#import \"MyCell.h\"@interface ViewController()&lt;NSTableViewDelegate,NSTableViewDataSource&gt;@end@implementation ViewController&#123; NSTableView * _tableView; NSMutableArray * _dataArray;&#125;- (void)viewDidLoad &#123; [super viewDidLoad]; _dataArray = [NSMutableArray array]; for (int i=0; i&lt;20; i++) &#123; [_dataArray addObject:[NSString stringWithFormat:@\"%dè¡Œæ•°æ®\",i]]; &#125; NSScrollView * scrollView = [[NSScrollView alloc] init]; scrollView.hasVerticalScroller = YES; scrollView.frame = self.view.bounds; [self.view addSubview:scrollView]; _tableView = [[NSTableView alloc]initWithFrame:self.view.bounds]; NSTableColumn * column = [[NSTableColumn alloc]initWithIdentifier:@\"test\"]; NSTableColumn * column2 = [[NSTableColumn alloc]initWithIdentifier:@\"test2\"]; column2.width = 100; column2.minWidth = 100; column2.maxWidth = 100; column2.title = @\"æ•°æ®\"; column2.editable = YES ; column2.headerToolTip = @\"æç¤º\"; column2.hidden=NO; column2.sortDescriptorPrototype = [NSSortDescriptor sortDescriptorWithKey:@\"title\" ascending:NO]; column.resizingMask =NSTableColumnUserResizingMask;// column.dataCell = [[NSButtonCell alloc]initTextCell:@\"\"]; [_tableView addTableColumn:column]; [_tableView addTableColumn:column2]; _tableView.delegate = self; _tableView.dataSource = self; scrollView.contentView.documentView = _tableView;&#125;//è®¾ç½®è¡Œæ•° é€šç”¨-(NSInteger)numberOfRowsInTableView:(NSTableView *)tableView&#123; return _dataArray.count;&#125;//ç»‘å®šæ•°æ®-(id)tableView:(NSTableView *)tableView objectValueForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row&#123; return _dataArray[row];&#125;//ç”¨æˆ·ç¼–è¾‘åˆ—è¡¨- (void)tableView:(NSTableView *)tableView setObjectValue:(nullable id)object forTableColumn:(nullable NSTableColumn *)tableColumn row:(NSInteger)row&#123; NSLog(@\"%@\",object); _dataArray[row] = object;&#125;//cell-baseçš„cellå±•ç¤ºå‰è°ƒç”¨ å¯ä»¥è¿›è¡Œè‡ªå®šåˆ¶- (void)tableView:(NSTableView *)tableView willDisplayCell:(id)cell forTableColumn:(nullable NSTableColumn *)tableColumn row:(NSInteger)row&#123; NSTextFieldCell * _cell = cell; _cell.textColor = [NSColor redColor];&#125;//è®¾ç½®æ˜¯å¦å¯ä»¥è¿›è¡Œç¼–è¾‘- (BOOL)tableView:(NSTableView *)tableView shouldEditTableColumn:(nullable NSTableColumn *)tableColumn row:(NSInteger)row&#123; return YES;&#125;//è®¾ç½®é¼ æ ‡æ‚¬åœåœ¨cellä¸Šæ˜¾ç¤ºçš„æç¤ºæ–‡æœ¬- (NSString *)tableView:(NSTableView *)tableView toolTipForCell:(NSCell *)cell rect:(NSRectPointer)rect tableColumn:(nullable NSTableColumn *)tableColumn row:(NSInteger)row mouseLocation:(NSPoint)mouseLocation&#123; return @\"tip\";&#125;//å½“åˆ—è¡¨é•¿åº¦æ— æ³•å±•ç¤ºå®Œæ•´æŸè¡Œæ•°æ®æ—¶ å½“é¼ æ ‡æ‚¬åœåœ¨æ­¤è¡Œä¸Š æ˜¯å¦æ‰©å±•æ˜¾ç¤º- (BOOL)tableView:(NSTableView *)tableView shouldShowCellExpansionForTableColumn:(nullable NSTableColumn *)tableColumn row:(NSInteger)row&#123; return YES;&#125;//è®¾ç½®cellçš„äº¤äº’èƒ½åŠ›/*å¦‚æœè¿”å›YESï¼Œåˆ™Cellçš„äº¤äº’èƒ½åŠ›ä¼šå˜å¼ºï¼Œä¾‹å¦‚NSButtonCellçš„ç‚¹å‡»å°†ä¼šè°ƒç”¨- (void)tableView:(NSTableView *)tableView setObjectValueæ–¹æ³•*/- (BOOL)tableView:(NSTableView *)tableView shouldTrackCell:(NSCell *)cell forTableColumn:(nullable NSTableColumn *)tableColumn row:(NSInteger)row&#123; return YES;&#125;//è‡ªå®šä¹‰cell- (nullable NSCell *)tableView:(NSTableView *)tableView dataCellForTableColumn:(nullable NSTableColumn *)tableColumn row:(NSInteger)row&#123; if (tableColumn!=nil) &#123; MyCell * cell = [[MyCell alloc]init]; return cell; &#125; return nil; &#125;-(CGFloat)tableView:(NSTableView *)tableView heightOfRow:(NSInteger)row&#123; return 30;&#125;//æ’åºå›è°ƒå‡½æ•°-(void)tableView:(NSTableView *)tableView sortDescriptorsDidChange:(NSArray&lt;NSSortDescriptor *&gt; *)oldDescriptors&#123; NSLog(@\"%@\",oldDescriptors[0]);&#125;@end äº”ã€View-Baseï¼šåŸºäºViewçš„TableViewè§†å›¾åŸºäºView-Baseçš„TableViewè¦æ¯”åŸºäºCellçš„TableViewæ›´åŠ çµæ´»ï¼Œå…¶ä¸­æ¯è¡Œæ•°æ®è½½ä½“å¯ä»¥æ˜¯ä»»æ„NSViewçš„å­ç±»ã€‚ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879//// ViewController.m// TableView//// Created by jaki on 17/4/14.// Copyright Â© 2017å¹´ jaki. All rights reserved.//#import \"ViewController.h\"#import \"MyCell.h\"#import \"TableRow.h\"@interface ViewController()&lt;NSTableViewDelegate,NSTableViewDataSource&gt;@end@implementation ViewController&#123; NSTableView * _tableView; NSMutableArray * _dataArray;&#125;- (void)viewDidLoad &#123; [super viewDidLoad]; _dataArray = [NSMutableArray array]; for (int i=0; i&lt;20; i++) &#123; [_dataArray addObject:[NSString stringWithFormat:@\"%dè¡Œæ•°æ®\",i]]; &#125; NSScrollView * scrollView = [[NSScrollView alloc] init]; scrollView.hasVerticalScroller = YES; scrollView.frame = self.view.bounds; [self.view addSubview:scrollView]; _tableView = [[NSTableView alloc]initWithFrame:self.view.bounds]; NSTableColumn * column = [[NSTableColumn alloc]initWithIdentifier:@\"test\"]; NSTableColumn * column2 = [[NSTableColumn alloc]initWithIdentifier:@\"test2\"]; column2.width = 100; column2.minWidth = 100; column2.maxWidth = 100; column2.title = @\"æ•°æ®\"; column2.editable = YES ; column2.headerToolTip = @\"æç¤º\"; column2.hidden=NO; column2.sortDescriptorPrototype = [NSSortDescriptor sortDescriptorWithKey:@\"title\" ascending:NO]; column.resizingMask =NSTableColumnUserResizingMask; _tableView.delegate = self; _tableView.dataSource = self; [_tableView addTableColumn:column]; [_tableView addTableColumn:column2]; scrollView.contentView.documentView = _tableView;&#125;//è®¾ç½®è¡Œæ•° é€šç”¨-(NSInteger)numberOfRowsInTableView:(NSTableView *)tableView&#123; return _dataArray.count;&#125;//View-base//è®¾ç½®æŸä¸ªå…ƒç´ çš„å…·ä½“è§†å›¾- (nullable NSView *)tableView:(NSTableView *)tableView viewForTableColumn:(nullable NSTableColumn *)tableColumn row:(NSInteger)row&#123; //æ ¹æ®IDå–è§†å›¾ NSTextField * view = [tableView makeViewWithIdentifier:@\"cellId\" owner:self]; if (view==nil) &#123; view = [[NSTextField alloc]initWithFrame:CGRectMake(0, 0, 100, 30)]; view.backgroundColor = [NSColor clearColor]; view.identifier = @\"cellId\"; &#125; return view;&#125;//è®¾ç½®æ¯è¡Œå®¹å™¨è§†å›¾- (nullable NSTableRowView *)tableView:(NSTableView *)tableView rowViewForRow:(NSInteger)row&#123; TableRow * rowView = [[TableRow alloc]init]; return rowView;&#125;//å½“æ·»åŠ è¡Œæ—¶è°ƒç”¨çš„å›è°ƒ- (void)tableView:(NSTableView *)tableView didAddRowView:(NSTableRowView *)rowView forRow:(NSInteger)row&#123; NSLog(@\"add\");&#125;//å½“ç§»é™¤è¡Œæ—¶è°ƒç”¨çš„å›è°ƒ- (void)tableView:(NSTableView *)tableView didRemoveRowView:(NSTableRowView *)rowView forRow:(NSInteger)row&#123; NSLog(@\"remove\");&#125;@end ä¸Šé¢ä»£ç ä¸­ç”¨åˆ°äº†TableRowç±»ï¼Œå…¶å®å®ƒæ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„ç»§æ‰¿è‡ªNSTableRowViewçš„ç±»ï¼Œå®ç°å¦‚ä¸‹ï¼š 123456789101112131415161718#import \"TablerRow.h\"@implementation TablerRow//ç»˜åˆ¶é€‰ä¸­çŠ¶æ€çš„èƒŒæ™¯-(void)drawSelectionInRect:(NSRect)dirtyRect&#123; NSRect selectionRect = NSInsetRect(self.bounds, 5.5, 5.5); [[NSColor colorWithCalibratedWhite:.72 alpha:1.0] setStroke]; [[NSColor colorWithCalibratedWhite:.82 alpha:1.0] setFill]; NSBezierPath *selectionPath = [NSBezierPath bezierPathWithRoundedRect:selectionRect xRadius:10 yRadius:10]; [selectionPath fill]; [selectionPath stroke];&#125;//ç»˜åˆ¶èƒŒæ™¯-(void)drawBackgroundInRect:(NSRect)dirtyRect&#123; [super drawBackgroundInRect:dirtyRect]; [[NSColor greenColor]setFill]; NSRectFill(dirtyRect);&#125;@end å…³äºNSTableRowViewç±»æˆ‘ä»¬ä¸‹é¢æ¥åšå…·ä½“ä»‹ç»ã€‚ å…­ã€NSTableRowViewè§£æNSTableRowViewç”¨åœ¨View-Baseçš„TableViewä¸­ï¼Œå…¶ä½œä¸ºè¡Œå®¹å™¨å­˜åœ¨ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647//é€‰ä¸­çš„é«˜äº®é£æ ¼/*typedef NS_ENUM(NSInteger, NSTableViewSelectionHighlightStyle) &#123; //æ— é«˜äº®é£æ ¼ NSTableViewSelectionHighlightStyleNone, //è§„åˆ™çš„é«˜äº®é£æ ¼ NSTableViewSelectionHighlightStyleRegular = 0, //æºåˆ—è¡¨é£æ ¼ NSTableViewSelectionHighlightStyleSourceList = 1,&#125;;*/@property NSTableViewSelectionHighlightStyle selectionHighlightStyle;//æ˜¯å¦å¼ºè°ƒ@property(getter=isEmphasized) BOOL emphasized;//è®¾ç½®æ˜¯å¦è¡Œç»„é£æ ¼@property(getter=isGroupRowStyle) BOOL groupRowStyle;//æ˜¯å¦é€‰ä¸­çŠ¶æ€@property(getter=isSelected) BOOL selected;//å…¶å‰ä¸€è¡Œçš„é€‰ä¸­çŠ¶æ€@property(getter=isPreviousRowSelected) BOOL previousRowSelected;//å…¶åä¸€è¡Œçš„é€‰ä¸­çŠ¶æ€@property(getter=isNextRowSelected) BOOL nextRowSelected;//è®¾ç½®æ­¤è¡Œæ˜¯å¦æµ®åŠ¨@property(getter=isFloating) BOOL floating;//æ‹–æ”¾æ‹–åŠ¨æ•ˆæœ@property(getter=isTargetForDropOperation) BOOL targetForDropOperation;//æ‹–æ”¾é£æ ¼@property NSTableViewDraggingDestinationFeedbackStyle draggingDestinationFeedbackStyle;//è®¾ç½®æ‹–æ”¾ç›®æ ‡çš„ç¼©è¿›é‡@property CGFloat indentationForDropOperation;//èƒŒæ™¯è‰²@property(copy) NSColor *backgroundColor;//å­ç±»é‡å†™ä¸‹é¢æ–¹æ³•æ¥è¿›è¡Œè¡Œå®¹å™¨è§†å›¾çš„è‡ªå®šä¹‰//ç”»èƒŒæ™¯è‰²- (void)drawBackgroundInRect:(NSRect)dirtyRect;//ç”»é€‰ä¸­èƒŒæ™¯- (void)drawSelectionInRect:(NSRect)dirtyRect;//ç”»åˆ†å‰²çº¿- (void)drawSeparatorInRect:(NSRect)dirtyRect;//ç»˜åˆ¶æ‹–æ”¾æ—¶çš„ç”¨æˆ·åé¦ˆIU- (void)drawDraggingDestinationFeedbackInRect:(NSRect)dirtyRect;//åˆ—æ•°@property(readonly) NSInteger numberOfColumns;//æä¾›çš„è®¿é—®ç‰¹å®šè§†å›¾çš„æ–¹æ³•- (nullable id)viewAtColumn:(NSInteger)column; ä¸ƒã€æ¥æ€»ç»“ä¸‹NSTableViewDataSourceåè®®1234567891011121314151617181920212223242526/*æ— è®ºåŸºäºCellè¿˜æ˜¯åŸºäºViewï¼Œè¿™ä¸ªæ–¹æ³•éƒ½éœ€è¦å®ç°ï¼Œç”¨æ¥è®¾ç½®åˆ—è¡¨çš„è¡Œæ•°*/- (NSInteger)numberOfRowsInTableView:(NSTableView *)tableView;/*å¦‚æœä½¿ç”¨cell-baseçš„TableViewè§†å›¾ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯å¿…é¡»å®ç°çš„ï¼Œå…¶ä¸ºè¦æ¸²æŸ“çš„cellæä¾›æ•°æ®*/- (nullable id)tableView:(NSTableView *)tableView objectValueForTableColumn:(nullable NSTableColumn *)tableColumn row:(NSInteger)row;/*è¿™ä¸ªå‡½æ•°å½“ç”¨æˆ·ç¼–è¾‘äº†cellä¸­çš„å†…å®¹æ—¶ä¼šè¢«è°ƒç”¨ï¼Œä¸€èˆ¬éœ€è¦åœ¨å…¶ä¸­è¿›è¡Œæ•°æ®æºçš„ä¿®æ”¹*/- (void)tableView:(NSTableView *)tableView setObjectValue:(nullable id)object forTableColumn:(nullable NSTableColumn *)tableColumn row:(NSInteger)row;/*å½“ç”¨æˆ·ä¿®æ”¹äº†è¡Œæ’åºè§„åˆ™æ—¶è°ƒç”¨çš„å›è°ƒ*/- (void)tableView:(NSTableView *)tableView sortDescriptorsDidChange:(NSArray&lt;NSSortDescriptor *&gt; *)oldDescriptors;//ä¸‹é¢è¿™äº›æ–¹æ³•å…¨éƒ¨ä¸åˆ—è¡¨çš„æ•°æ®æ‹–æ‹½ç›¸å…³- (nullable id &lt;NSPasteboardWriting&gt;)tableView:(NSTableView *)tableView pasteboardWriterForRow:(NSInteger)row;- (void)tableView:(NSTableView *)tableView draggingSession:(NSDraggingSession *)session willBeginAtPoint:(NSPoint)screenPoint forRowIndexes:(NSIndexSet *)rowIndexes NS_AVAILABLE_MAC(10_7);- (void)tableView:(NSTableView *)tableView draggingSession:(NSDraggingSession *)session endedAtPoint:(NSPoint)screenPoint operation:(NSDragOperation)operation NS_AVAILABLE_MAC(10_7);- (void)tableView:(NSTableView *)tableView updateDraggingItemsForDrag:(id &lt;NSDraggingInfo&gt;)draggingInfo NS_AVAILABLE_MAC(10_7);- (BOOL)tableView:(NSTableView *)tableView writeRowsWithIndexes:(NSIndexSet *)rowIndexes toPasteboard:(NSPasteboard *)pboard;- (NSDragOperation)tableView:(NSTableView *)tableView validateDrop:(id &lt;NSDraggingInfo&gt;)info proposedRow:(NSInteger)row proposedDropOperation:(NSTableViewDropOperation)dropOperation;- (BOOL)tableView:(NSTableView *)tableView acceptDrop:(id &lt;NSDraggingInfo&gt;)info row:(NSInteger)row dropOperation:(NSTableViewDropOperation)dropOperation;- (NSArray&lt;NSString *&gt; *)tableView:(NSTableView *)tableView namesOfPromisedFilesDroppedAtDestination:(NSURL *)dropDestination forDraggedRowsWithIndexes:(NSIndexSet *)indexSet; å…«ã€æ¥æ€»ç»“ä¸‹NSTableViewDelegateåè®®123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120//view-baseçš„TableViewç›¸å…³delegateæ–¹æ³•/*è®¾ç½®æ¯ä¸ªæ•°æ®è½½ä½“çš„View*/- (nullable NSView *)tableView:(NSTableView *)tableView viewForTableColumn:(nullable NSTableColumn *)tableColumn row:(NSInteger)row;/*è‡ªå®šä¹‰è¡Œè§†å›¾*/- (nullable NSTableRowView *)tableView:(NSTableView *)tableView rowViewForRow:(NSInteger)row NS_AVAILABLE_MAC(10_7);/*æ·»åŠ ä¸€è¡Œæ—¶ä¼šè°ƒç”¨çš„å›è°ƒ*/- (void)tableView:(NSTableView *)tableView didAddRowView:(NSTableRowView *)rowView forRow:(NSInteger)row;/*ç§»é™¤ä¸€è¡Œæ—¶ä¼šè°ƒç”¨çš„å›è°ƒ*/- (void)tableView:(NSTableView *)tableView didRemoveRowView:(NSTableRowView *)rowView forRow:(NSInteger)row;//cell-baseçš„TableViewç›¸å…³delegateæ–¹æ³•/*cellå°†è¦æ¸²æŸ“æ—¶è°ƒç”¨çš„å›è°ƒï¼Œå¯ä»¥åœ¨å…¶ä¸­å¯¹cellè¿›è¡Œå®šåˆ¶*/- (void)tableView:(NSTableView *)tableView willDisplayCell:(id)cell forTableColumn:(nullable NSTableColumn *)tableColumn row:(NSInteger)row;/*è®¾ç½®æŸä¸ªcellæ˜¯å¦å¯ä»¥ç¼–è¾‘*/- (BOOL)tableView:(NSTableView *)tableView shouldEditTableColumn:(nullable NSTableColumn *)tableColumn row:(NSInteger)row;/*è®¾ç½®å½“é¼ æ ‡æ‚¬åœåœ¨cellä¸Šæ—¶ æ˜¾ç¤ºçš„æç¤ºæ–‡æ¡ˆ*/- (NSString *)tableView:(NSTableView *)tableView toolTipForCell:(NSCell *)cell rect:(NSRectPointer)rect tableColumn:(nullable NSTableColumn *)tableColumn row:(NSInteger)row mouseLocation:(NSPoint)mouseLocation;/*å½“cellçš„å®½åº¦ä¸å¤Ÿæ˜¾ç¤ºå®Œå…¨cellçš„å†…å®¹æ—¶ï¼Œè®¾ç½®æ˜¯å¦å…è®¸é¼ æ ‡æ”¾ç½®æ‰©å±•cell*/- (BOOL)tableView:(NSTableView *)tableView shouldShowCellExpansionForTableColumn:(nullable NSTableColumn *)tableColumn row:(NSInteger)row;/*è®¾ç½®æ˜¯å¦åŠ å¼ºcellçš„äº¤äº’èƒ½åŠ›ï¼Œè¿™æ ·ä¸€äº›æŒ‰é’®çŠ¶æ€çš„ä¿®æ”¹ä¹Ÿä¼šè§¦å‘cellç¼–è¾‘çš„çŠ¶æ€*/- (BOOL)tableView:(NSTableView *)tableView shouldTrackCell:(NSCell *)cell forTableColumn:(nullable NSTableColumn *)tableColumn row:(NSInteger)row;/*è®¾ç½®è‡ªå®šä¹‰cell*/- (nullable NSCell *)tableView:(NSTableView *)tableView dataCellForTableColumn:(nullable NSTableColumn *)tableColumn row:(NSInteger)row;//é€šç”¨çš„TableViewä»£ç†æ–¹æ³•/*è®¾ç½®æ˜¯å¦å…è®¸ä¿®æ”¹é€‰ä¸­*/- (BOOL)selectionShouldChangeInTableView:(NSTableView *)tableView;/*è®¾ç½®æŸè¡Œæ˜¯å¦å¯ä»¥é€‰ä¸­*/- (BOOL)tableView:(NSTableView *)tableView shouldSelectRow:(NSInteger)row;/*å½“ç”¨æˆ·é€šè¿‡é”®ç›˜æˆ–é¼ æ ‡å°†è¦é€‰ä¸­æŸè¡Œæ—¶ï¼Œè¿”å›è®¾ç½®è¦é€‰ä¸­çš„è¡Œå¦‚æœå®ç°äº†è¿™ä¸ªæ–¹æ³•ï¼Œä¸Šé¢ä¸€ä¸ªæ–¹æ³•å°†ä¸ä¼šè¢«è°ƒç”¨*/- (NSIndexSet *)tableView:(NSTableView *)tableView selectionIndexesForProposedSelection:(NSIndexSet *)proposedSelectionIndexes;/*è®¾ç½®æŸåˆ—æ˜¯å¦å¯ä»¥è¢«é€‰ä¸­*/- (BOOL)tableView:(NSTableView *)tableView shouldSelectTableColumn:(nullable NSTableColumn *)tableColumn;/*ç”¨æˆ·ç‚¹å‡»åˆ—å¤´æ—¶è°ƒç”¨çš„æ–¹æ³•*/- (void)tableView:(NSTableView *)tableView mouseDownInHeaderOfTableColumn:(NSTableColumn *)tableColumn;/*ç”¨æ³•åŒä¸Š*/- (void)tableView:(NSTableView *)tableView didClickTableColumn:(NSTableColumn *)tableColumn;/*å¯¹åˆ—è¿›è¡Œæ‹–æ‹½æ”¹å˜é¡ºåºæ—¶è°ƒç”¨çš„æ–¹æ³•*/- (void)tableView:(NSTableView *)tableView didDragTableColumn:(NSTableColumn *)tableColumn;/*è®¾ç½®è¡Œé«˜*/- (CGFloat)tableView:(NSTableView *)tableView heightOfRow:(NSInteger)row;/*ä¸‹é¢è¿™äº›æ–¹æ³•ä¸è¡Œæ£€ç´¢æœ‰å…³*/- (nullable NSString *)tableView:(NSTableView *)tableView typeSelectStringForTableColumn:(nullable NSTableColumn *)tableColumn row:(NSInteger)row NS_AVAILABLE_MAC(10_5);- (NSInteger)tableView:(NSTableView *)tableView nextTypeSelectMatchFromRow:(NSInteger)startRow toRow:(NSInteger)endRow forString:(NSString *)searchString NS_AVAILABLE_MAC(10_5);- (BOOL)tableView:(NSTableView *)tableView shouldTypeSelectForEvent:(NSEvent *)event withCurrentSearchString:(nullable NSString *)searchString NS_AVAILABLE_MAC(10_5);/*è®¾ç½®æŸè¡Œæ˜¯å¦ç»˜åˆ¶æˆç»„æ ·å¼*/- (BOOL)tableView:(NSTableView *)tableView isGroupRow:(NSInteger)row;/*è°ƒæ•´åˆ—å®½åº¦*/- (CGFloat)tableView:(NSTableView *)tableView sizeToFitWidthOfColumn:(NSInteger)column;/*è®¾ç½®æ˜¯å¦æ”¯æŒåˆ—çš„ç§»åŠ¨æ’åº*/- (BOOL)tableView:(NSTableView *)tableView shouldReorderColumn:(NSInteger)columnIndex toColumn:(NSInteger)newColumnIndex;//è®¾ç½®æŸè¡Œå‘å·¦æˆ–å‘å³æ»‘åŠ¨æ—¶è¦æ˜¾ç¤ºçš„åŠŸèƒ½æŒ‰é’®/*typedef NS_ENUM(NSInteger, NSTableRowActionEdge) &#123; NSTableRowActionEdgeLeading, // å·¦åˆ’ NSTableRowActionEdgeTrailing, // å³åˆ’&#125; NS_ENUM_AVAILABLE_MAC(10_11);*/- (NSArray&lt;NSTableViewRowAction *&gt; *)tableView:(NSTableView *)tableView rowActionsForRow:(NSInteger)row edge:(NSTableRowActionEdge)edge NS_AVAILABLE_MAC(10_11);/*TableViewé€‰ä¸­ä¿®æ”¹æ—¶è°ƒç”¨*/- (void)tableViewSelectionDidChange:(NSNotification *)notification;/*TableViewåˆ—ç§»åŠ¨å®Œæˆæ—¶è°ƒç”¨çš„å‡½æ•°*/- (void)tableViewColumnDidMove:(NSNotification *)notification;/*TableViewåˆ—å®½åº¦å˜åŒ–æ—¶è°ƒç”¨çš„å‡½æ•°*/- (void)tableViewColumnDidResize:(NSNotification *)notification;/*TableViewé€‰ä¸­æ­£åœ¨ä¿®æ”¹æ—¶è°ƒç”¨çš„å‡½æ•°*/- (void)tableViewSelectionIsChanging:(NSNotification *)notification; ä¹ã€NSTableViewä¸­å¸¸ç”¨çš„å±æ€§å’Œæ–¹æ³•123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191//åˆå§‹åŒ–æ–¹æ³•- (instancetype)initWithFrame:(NSRect)frameRect;- (nullable instancetype)initWithCoder:(NSCoder *)coder;//è®¾ç½®ä»£ç†@property (nullable, weak) id &lt;NSTableViewDataSource&gt; dataSource;@property (nullable, weak) id &lt;NSTableViewDelegate&gt; delegate;//è®¾ç½®TableViewçš„å¤´è§†å›¾ ä¼šè¢«åˆ—å¤´å›¾å°±è¡Œè¦†ç›–@property (nullable, strong) NSTableHeaderView *headerView;//è®¾ç½®å¤´å›¾å³ä¾§è§†å›¾ å¯ä»¥è‡ªå®šä¹‰å›¾æ ‡@property (nullable, strong) NSView *cornerView;//è®¾ç½®æ˜¯å¦å…è®¸åˆ—æ‹–æ‹½æ’åº@property BOOL allowsColumnReordering;//è®¾ç½®æ˜¯å¦å…è®¸è°ƒæ•´åˆ—å®½åº¦@property BOOL allowsColumnResizing;//è°ƒæ•´åˆ—å®½åº¦çš„é£æ ¼/*typedef NS_ENUM(NSUInteger, NSTableViewColumnAutoresizingStyle) &#123; //ä¸å¯è°ƒæ•´ NSTableViewNoColumnAutoresizing = 0, //å¹³åˆ† NSTableViewUniformColumnAutoresizingStyle, //ä»åå¾€å‰è°ƒæ•´ NSTableViewSequentialColumnAutoresizingStyle, //ä»å‰å¾€åè°ƒæ•´ NSTableViewReverseSequentialColumnAutoresizingStyle, //æœ€åä¸€åˆ—å¯è°ƒæ•´ NSTableViewLastColumnOnlyAutoresizingStyle, //ç¬¬ä¸€åˆ—å¯è°ƒæ•´ NSTableViewFirstColumnOnlyAutoresizingStyle&#125;;*/@property NSTableViewColumnAutoresizingStyle columnAutoresizingStyle;//è®¾ç½®åˆ†å‰²çº¿é£æ ¼/*typedef NS_OPTIONS(NSUInteger, NSTableViewGridLineStyle) &#123; //æ— åˆ†å‰²çº¿ NSTableViewGridNone = 0, //ç«–ç›´åˆ†å‰²çº¿ NSTableViewSolidVerticalGridLineMask = 1 &lt;&lt; 0, //æ°´å¹³åˆ†å‰²çº¿ NSTableViewSolidHorizontalGridLineMask = 1 &lt;&lt; 1, //æ°´å¹³è™šçº¿åˆ†å‰²çº¿ NSTableViewDashedHorizontalGridLineMask ,&#125;;*/@property NSTableViewGridLineStyle gridStyleMask;//è®¾ç½®cellä¹‹é—´çš„é—´éš” éœ€è¦è®¾ç½®ä¸ºNSSizeå¯¹è±¡@property NSSize intercellSpacing;//æ˜¯å¦å¼€å¯æ–‘é©¬çº¹@property BOOL usesAlternatingRowBackgroundColors;//èƒŒæ™¯è‰²@property (copy) NSColor *backgroundColor;//è®¾ç½®åˆ†å‰²çº¿é¢œè‰²@property (copy) NSColor *gridColor;//è®¾ç½®è¡Œå°ºå¯¸é£æ ¼/*typedef NS_ENUM(NSInteger, NSTableViewRowSizeStyle) &#123; //é»˜è®¤ NSTableViewRowSizeStyleDefault = -1, //è‡ªå®šä¹‰ NSTableViewRowSizeStyleCustom = 0, //å°å°ºå¯¸é£æ ¼ NSTableViewRowSizeStyleSmall = 1, //ä¸­ç­‰å°ºå¯¸é£æ ¼ NSTableViewRowSizeStyleMedium = 2, //å¤§å°ºå¯¸é£æ ¼ NSTableViewRowSizeStyleLarge = 3,&#125; NS_ENUM_AVAILABLE_MAC(10_7);*/@property NSTableViewRowSizeStyle rowSizeStyle;//è¡Œé«˜@property CGFloat rowHeight;//è·å–æ‰€æœ‰åˆ—å¯¹è±¡@property (readonly, copy) NSArray&lt;NSTableColumn *&gt; *tableColumns;//è·å–åˆ—æ•°@property (readonly) NSInteger numberOfColumns;//è·å–è¡Œæ•°@property (readonly) NSInteger numberOfRows;//æ·»åŠ ä¸€åˆ—- (void)addTableColumn:(NSTableColumn *)tableColumn;//ç§»é™¤ä¸€åˆ—- (void)removeTableColumn:(NSTableColumn *)tableColumn;//ç§»åŠ¨åˆ—- (void)moveColumn:(NSInteger)oldIndex toColumn:(NSInteger)newIndex;//æ ¹æ®idè·å–åˆ—çš„ä¸‹æ ‡- (NSInteger)columnWithIdentifier:(NSString *)identifier;//æ ¹æ®idè·å–åˆ—å¯¹è±¡- (nullable NSTableColumn *)tableColumnWithIdentifier:(NSString *)identifier;//æ»šåŠ¨åˆ°æŒ‡å®šè¡Œå¯è§- (void)scrollRowToVisible:(NSInteger)row;//æ»šåŠ¨åˆ°æŒ‡å®šåˆ—å¯è§- (void)scrollColumnToVisible:(NSInteger)column;//é‡æ–°åŠ è½½æ•°æ®- (void)reloadData;//é‡æ–°åŠ è½½æŒ‡å®šä½ç½®çš„æ•°æ®- (void)reloadDataForRowIndexes:(NSIndexSet *)rowIndexes columnIndexes:(NSIndexSet *)columnIndexes;//è·å–ç¼–è¾‘çš„åˆ—@property (readonly) NSInteger editedColumn;//è·å–ç¼–è¾‘çš„è¡Œ@property (readonly) NSInteger editedRow;//è·å–ç‚¹å‡»çš„åˆ—@property (readonly) NSInteger clickedColumn;//è·å–ç‚¹å‡»çš„è¡Œ@property (readonly) NSInteger clickedRow;//è®¾ç½®åˆ—å¤´æç¤ºå›¾ç‰‡- (void)setIndicatorImage:(nullable NSImage *)image inTableColumn:(NSTableColumn *)tableColumn;//è·å–åˆ—å¤´æç¤ºå›¾ç‰‡- (nullable NSImage *)indicatorImageInTableColumn:(NSTableColumn *)tableColumn;//ä¸‹é¢è¿™äº›æ–¹æ³•ä¸åˆ—è¡¨æ‹–æ‹½æœ‰å…³@property BOOL verticalMotionCanBeginDrag;- (BOOL)canDragRowsWithIndexes:(NSIndexSet *)rowIndexes atPoint:(NSPoint)mouseDownPoint;- (NSImage *)dragImageForRowsWithIndexes:(NSIndexSet *)dragRows tableColumns:(NSArray&lt;NSTableColumn *&gt; *)tableColumns event:(NSEvent *)dragEvent offset:(NSPointPointer)dragImageOffset;- (void)setDraggingSourceOperationMask:(NSDragOperation)mask forLocal:(BOOL)isLocal;- (void)setDropRow:(NSInteger)row dropOperation:(NSTableViewDropOperation)dropOperation;//ä¸‹é¢è¿™äº›æ–¹æ³•ä¸åˆ—è¡¨é€‰ä¸­æœ‰å…³//æ˜¯å¦æ”¯æŒå¤šé€‰@property BOOL allowsMultipleSelection;//æ˜¯å¦å…è®¸éƒ½ä¸é€‰ä¸­@property BOOL allowsEmptySelection;//æ˜¯å¦æ”¯æŒé€‰ä¸­åˆ— å¦‚æœè®¾ç½®ä¸ºYES ç‚¹å‡»åˆ—å¤´ä¼šå°†æ•´åˆ—é€‰ä¸­@property BOOL allowsColumnSelection;//å…¨é€‰ ç”¨äºå­ç±»é‡å†™- (void)selectAll:(nullable id)sender;//å…¨ä¸é€‰ ç”¨äºå­ç±»é‡å†™- (void)deselectAll:(nullable id)sender;//è¿›è¡Œåˆ—é€‰ä¸­- (void)selectColumnIndexes:(NSIndexSet *)indexes byExtendingSelection:(BOOL)extend;//è¿›è¡Œè¡Œé€‰ä¸­- (void)selectRowIndexes:(NSIndexSet *)indexes byExtendingSelection:(BOOL)extend;//è·å–æ‰€æœ‰é€‰ä¸­åˆ—index@property (readonly, copy) NSIndexSet *selectedColumnIndexes;//è·å–æ‰€æœ‰é€‰ä¸­è¡Œindex@property (readonly, copy) NSIndexSet *selectedRowIndexes;//å–æ¶ˆæŸåˆ—çš„é€‰ä¸­- (void)deselectColumn:(NSInteger)column;//å–æ¶ˆæŸè¡Œçš„é€‰ä¸­- (void)deselectRow:(NSInteger)row;//åˆ¤æ–­æŸåˆ—æ˜¯å¦è¢«é€‰ä¸­- (BOOL)isColumnSelected:(NSInteger)column;//åˆ¤æ–­æŸè¡Œæ˜¯å¦è¢«é€‰ä¸­- (BOOL)isRowSelected:(NSInteger)row;//è·å–é€‰ä¸­çš„åˆ—æ•°@property (readonly) NSInteger numberOfSelectedColumns;//è·å–é€‰ä¸­çš„è¡Œæ•°@property (readonly) NSInteger numberOfSelectedRows;//è·å–æŸåˆ—çš„ä½ç½®å°ºå¯¸- (NSRect)rectOfColumn:(NSInteger)column;//è·å–æŸè¡Œçš„ä½ç½®å°ºå¯¸- (NSRect)rectOfRow:(NSInteger)row;//è·å–æŸä¸ªèŒƒå›´å†…çš„åˆ—- (NSIndexSet *)columnIndexesInRect:(NSRect)rect;//è·å–æŸä¸ªèŒƒå›´å†…çš„è¡Œ- (NSRange)rowsInRect:(NSRect)rect;//è·å–åŒ…å«æŸä¸ªç‚¹çš„åˆ—- (NSInteger)columnAtPoint:(NSPoint)point;//è·å–åŒ…å«æŸä¸ªç‚¹çš„è¡Œ- (NSInteger)rowAtPoint:(NSPoint)point;//è·å–æŸä¸ªcellçš„ä½ç½®å°ºå¯¸- (NSRect)frameOfCellAtColumn:(NSInteger)column row:(NSInteger)row;//è·å–æŸä¸ªä½ç½®çš„Viewï¼Œç”¨äºview-base- (nullable __kindof NSView *)viewAtColumn:(NSInteger)column row:(NSInteger)row makeIfNecessary:(BOOL)makeIfNecessary;//è·å–æŸè¡Œçš„è§†å›¾ ç”¨äºview-base- (nullable __kindof NSTableRowView *)rowViewAtRow:(NSInteger)row makeIfNecessary:(BOOL)makeIfNecessary;//è·å–æŸä¸ªViewæ‰€åœ¨çš„è¡Œ ç”¨äºview-base- (NSInteger)rowForView:(NSView *)view;//è·å–æŸä¸ªViewæ‰€åœ¨çš„åˆ— ç”¨äºview-base- (NSInteger)columnForView:(NSView *)view;//åˆ›å»ºä¸€ä¸ªç”¨äºæ¸²æŸ“çš„View ç”¨äºview-base- (nullable __kindof NSView *)makeViewWithIdentifier:(NSString *)identifier owner:(nullable id)owner;//ä¸‹é¢è¿™äº›æ–¹æ³•ç”¨æ¥æ ¹æ®åˆ—è¡¨æ•°æ®//å¼€å§‹æ›´æ–°- (void)beginUpdates NS_AVAILABLE_MAC(10_7);//ç»“æŸæ›´æ–°- (void)endUpdates NS_AVAILABLE_MAC(10_7);//æ’å…¥è¡Œ- (void)insertRowsAtIndexes:(NSIndexSet *)indexes withAnimation:(NSTableViewAnimationOptions)animationOptions NS_AVAILABLE_MAC(10_7);//åˆ é™¤è¡Œ- (void)removeRowsAtIndexes:(NSIndexSet *)indexes withAnimation:(NSTableViewAnimationOptions)animationOptions NS_AVAILABLE_MAC(10_7);//ç§»åŠ¨è¡Œ- (void)moveRowAtIndex:(NSInteger)oldIndex toIndex:(NSInteger)newIndex NS_AVAILABLE_MAC(10_7);//éšè—è¡Œ- (void)hideRowsAtIndexes:(NSIndexSet *)indexes withAnimation:(NSTableViewAnimationOptions)rowAnimation NS_AVAILABLE_MAC(10_11);//å–æ¶ˆéšè—è¡Œ- (void)unhideRowsAtIndexes:(NSIndexSet *)indexes withAnimation:(NSTableViewAnimationOptions)rowAnimation NS_AVAILABLE_MAC(10_11);//æ‰€æœ‰éšè—çŠ¶æ€çš„è¡Œ@property (readonly, copy) NSIndexSet *hiddenRowIndexes; åã€ç›¸å…³é€šçŸ¥12345678//åˆ—è¡¨é€‰æ‹©æ”¹å˜åå‘çš„é€šçŸ¥APPKIT_EXTERN NSNotificationName NSTableViewSelectionDidChangeNotification;//åˆ—ç§»åŠ¨åå‘çš„é€šçŸ¥APPKIT_EXTERN NSNotificationName NSTableViewColumnDidMoveNotification; //åˆ—å®½åº¦æ”¹å˜åå‘çš„é€šçŸ¥APPKIT_EXTERN NSNotificationName NSTableViewColumnDidResizeNotification;//é€‰æ‹©æ”¹å˜æ—¶å‘çš„é€šçŸ¥ APPKIT_EXTERN NSNotificationName NSTableViewSelectionIsChangingNotification;","categories":[{"name":"macOSå¼€å‘","slug":"macOSå¼€å‘","permalink":"http://huishao.cc/categories/macOSå¼€å‘/"}],"tags":[],"keywords":[{"name":"macOSå¼€å‘","slug":"macOSå¼€å‘","permalink":"http://huishao.cc/categories/macOSå¼€å‘/"}]},{"title":"Gitå‘½ä»¤é›†åå…­â€”â€”æ¨é€å‘½ä»¤","slug":"324Gitå‘½ä»¤é›†åå…­â€”â€”æ¨é€å‘½ä»¤","date":"2017-04-13T16:00:00.000Z","updated":"2021-07-14T08:09:53.707Z","comments":true,"path":"2017/04/14/324Gitå‘½ä»¤é›†åå…­â€”â€”æ¨é€å‘½ä»¤/","link":"","permalink":"http://huishao.cc/2017/04/14/324Gitå‘½ä»¤é›†åå…­â€”â€”æ¨é€å‘½ä»¤/","excerpt":"","text":"Gitå‘½ä»¤é›†åå…­â€”â€”æ¨é€å‘½ä»¤1.git push :repositoryä¸ºè¿œç¨‹ä¸»æœºåœ°å€ï¼Œå°†æœ¬åœ°æŒ‡å®šåˆ†æ”¯æ¨é€åˆ°è¿œç¨‹æŒ‡å®šåˆ†æ”¯ã€‚ 2.git push origin masterå°†æœ¬åœ°çš„masteråˆ†æ”¯æ¨é€åˆ°è¿œç¨‹çš„masteråˆ†æ”¯ã€‚ 3.git push origin :masteråˆ é™¤è¿œç¨‹masteråˆ†æ”¯ï¼Œå½“çœç•¥æœ¬åœ°åˆ†æ”¯åæ—¶ï¼Œæ•ˆæœç­‰åŒäºåˆ é™¤è¿œç¨‹æ­¤åˆ†æ”¯ã€‚ 4.git push originå°†å½“å‰åˆ†æ”¯æ¨é€åˆ°originä¸»æœºçš„å¯¹åº”åˆ†æ”¯ã€‚ 5.git pushè¿›è¡Œé»˜è®¤æ¨é€ã€‚ 6.git push origin â€“delete åˆ é™¤è¿œç¨‹æŸä¸ªåˆ†æ”¯ã€‚ 7.git push â€“all originå°†æœ¬åœ°æ‰€æœ‰åˆ†æ”¯éƒ½æ¨é€åˆ°originä¸»æœºã€‚ 8.git push origin â€“tagsæ¨é€æ ‡ç­¾ã€‚","categories":[{"name":"GIT","slug":"GIT","permalink":"http://huishao.cc/categories/GIT/"}],"tags":[],"keywords":[{"name":"GIT","slug":"GIT","permalink":"http://huishao.cc/categories/GIT/"}]},{"title":"Gitå‘½ä»¤é›†åäº”â€”â€”æ‹‰å–å‘½ä»¤","slug":"323Gitå‘½ä»¤é›†åäº”â€”â€”æ‹‰å–å‘½ä»¤","date":"2017-03-30T16:00:00.000Z","updated":"2021-07-14T08:04:37.630Z","comments":true,"path":"2017/03/31/323Gitå‘½ä»¤é›†åäº”â€”â€”æ‹‰å–å‘½ä»¤/","link":"","permalink":"http://huishao.cc/2017/03/31/323Gitå‘½ä»¤é›†åäº”â€”â€”æ‹‰å–å‘½ä»¤/","excerpt":"","text":"Gitå‘½ä»¤é›†åäº”â€”â€”æ‹‰å–å‘½ä»¤pullå‘½ä»¤ç”¨äºä»å…¶ä»–ä»“åº“æˆ–æœ¬åœ°åˆ†æ”¯æ‹‰å–æ›´æ”¹åˆ°å½“å‰åˆ†æ”¯ã€‚ 1.git pullå°†è¿œç¨‹ä»“åº“çš„æ›´æ”¹å¿«é€Ÿæ‹‰å–åˆ°å½“å‰åˆ†æ”¯ã€‚2.git pull ä»æŒ‡å®šçš„ä»“åº“æ‹‰å–æ›´æ–°ã€‚ 3.git pull â€“commitæ‹‰å–åè¿›è¡Œåˆå¹¶æ“ä½œï¼Œå¹¶æäº¤ç»“æœã€‚ 4.git pull â€“no-conmitæ‹‰å–åè¿›è¡Œåˆå¹¶ä½†æ˜¯ä¸æäº¤ã€‚ 5.git pull â€“rebaseæ‹‰å–åä½¿ç”¨rebaseçš„æ–¹å¼è¿›è¡Œåˆå¹¶ï¼Œå…¶ä¼šé‡æ–°æ•´ç†commitè®°å½•ã€‚","categories":[{"name":"GIT","slug":"GIT","permalink":"http://huishao.cc/categories/GIT/"}],"tags":[],"keywords":[{"name":"GIT","slug":"GIT","permalink":"http://huishao.cc/categories/GIT/"}]},{"title":"Gitå‘½ä»¤é›†åå››â€”â€”æŠ“å–å‘½ä»¤","slug":"322Gitå‘½ä»¤é›†åå››â€”â€”æŠ“å–å‘½ä»¤","date":"2017-03-27T16:00:00.000Z","updated":"2021-07-14T07:54:13.936Z","comments":true,"path":"2017/03/28/322Gitå‘½ä»¤é›†åå››â€”â€”æŠ“å–å‘½ä»¤/","link":"","permalink":"http://huishao.cc/2017/03/28/322Gitå‘½ä»¤é›†åå››â€”â€”æŠ“å–å‘½ä»¤/","excerpt":"","text":"Gitå‘½ä»¤é›†åå››â€”â€”æŠ“å–å‘½ä»¤Gitä¸­æä¾›çš„fetchå‘½ä»¤ç”¨äºå°†è¿œç«¯çš„æ›´æ–°æŠ“å–åˆ°æœ¬åœ°ä»“åº“ä¸­ã€‚ 1.git fetch ä»æŒ‡å®šçš„è¿œç«¯æŠ“å–æŒ‡å®šåˆ†æ”¯çš„æ›´æ–°ã€‚ 2.git fetch â€“allæŠ“å–æ‰€æœ‰è¿œç«¯çš„æ‰€æœ‰æ›´æ–°ã€‚ 3.git fetch â€“pruneæŠ“å–å‰åˆ é™¤è¿œç¨‹ä¸Šä¸åœ¨è·Ÿè¸ªçš„å¼•ç”¨ã€‚ 4.git fetch â€“tagsæŠ“å–è¿œç¨‹åˆ†æ”¯ä¸Šçš„æ‰€æœ‰æ ‡ç­¾ã€‚ 5.git fetch â€“progressè¾“å‡ºæŠ“å–è¿›åº¦ã€‚ 6.git fetch â€“ipv4ä½¿ç”¨IPv4åœ°å€ã€‚å¿½ç•¥IPv6åœ°å€ã€‚ 7.git fetch â€“ipv6ä½¿ç”¨IPv6åœ°å€ï¼Œå¿½ç•¥iPV4åœ°å€ã€‚","categories":[{"name":"GIT","slug":"GIT","permalink":"http://huishao.cc/categories/GIT/"}],"tags":[],"keywords":[{"name":"GIT","slug":"GIT","permalink":"http://huishao.cc/categories/GIT/"}]},{"title":"ç»å…¸æ’åºç®—æ³•è§£æ","slug":"321ç»å…¸æ’åºç®—æ³•è§£æ","date":"2017-03-23T16:00:00.000Z","updated":"2021-07-14T07:53:32.133Z","comments":true,"path":"2017/03/24/321ç»å…¸æ’åºç®—æ³•è§£æ/","link":"","permalink":"http://huishao.cc/2017/03/24/321ç»å…¸æ’åºç®—æ³•è§£æ/","excerpt":"","text":"ç»å…¸æ’åºç®—æ³•è§£æè®¸å¤šé«˜çº§è¯­è¨€ä¸­éƒ½æä¾›æœ‰æ’åºå‡½æ•°ï¼Œä½†æ˜¯æŒæ¡ä¸€äº›ç»å…¸æ’åºç®—æ³•çš„åŸºæœ¬åŸç†å’Œç¼–ç æ–¹æ³•è¿˜æ˜¯å¾ˆæœ‰å¿…è¦ï¼Œè¿™ä¸ªå­¦ä¹ è¿‡ç¨‹å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½çš„ç†è§£æ¯ç§æ’åºç®—æ³•çš„è®¾è®¡æ€è·¯ï¼Œæœ¬ç¯‡åšå®¢å°†ä»‹ç»9ç§ååˆ†ç»å…¸çš„æ’åºç®—æ³•ï¼Œæä¾›äº†è§£é‡Šæ€§è¯­è¨€JavaScriptä¸ç¼–è¯‘å‹è¯­è¨€Cçš„æºä»£ç ã€‚ ä¸€ã€ç›´æ¥æ’å…¥æ’åºç›´æ¥æ’å…¥æ’åºæ˜¯æœ€ç®€å•çš„ä¸€ç§æ’åºç®—æ³•ï¼Œä¹Ÿæœ€å®¹æ˜“ç†è§£ã€‚å®ƒçš„æ ¸å¿ƒæ€æƒ³ä¸ºå°†å…ƒç´ é€ä¸ªæ’å…¥ä¸€ä¸ªæœ‰åºçš„æ•°åˆ—ä¸­ã€‚ç”¨æ–‡å­—æè¿°å¯ä»¥åˆ†ä¸ºå¦‚ä¸‹å‡ æ­¥ï¼š 1.æŠŠæ•°åˆ—ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ å–å‡ºï¼Œä½œä¸ºæœ‰åºæ•°åˆ—çš„èµ·å§‹å…ƒç´ ã€‚ 2.ä¾æ¬¡æ‹¿æ•°åˆ—ä¸­çš„å…¶ä»–å…ƒç´ ä¸æœ‰åºæ•°åˆ—ä¸­çš„å…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼Œå°†å…¶æ’å…¥æ­£ç¡®çš„ä½ç½®ã€‚ ç”¨å›¾ç¤ºæè¿°æ’å…¥æ’åºå¦‚ä¸‹ï¼š ç›´æ¥æ’å…¥æ’åºçš„ç‰¹ç‚¹æ˜¯å¯¹æ–°å…ƒç´ çš„æ¯è½®æ’å…¥å‰ï¼Œæœ‰åºæ•°åˆ—ä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½æ˜¯æ’åºå¥½çš„ï¼Œå³ä»»æ„æ—¶åˆ»ï¼Œè¢«æ’åºåŠ¨è¿‡çš„å…ƒç´ ç»„æˆçš„æ•°åˆ—éƒ½æ˜¯æœ‰åºçš„ã€‚ ç”¨JavaScriptå®ç°çš„ç®€å•æ’å…¥æ’åºï¼š 123456789101112//æ’å…¥æ’åºvar array = [1,54,2,64,12,65,76,46,34,98];for(var i = 0;i&lt;array.length-1;i++)&#123; var temp = array[i+1]; for(var j = i+1;j&gt;0;j--)&#123; if (temp&lt;array[j]) &#123; array[j+1] = array[j]; array[j] = temp; &#125; &#125;&#125;console.log(array);//[ 1, 2, 12, 34, 46, 54, 64, 65, 76, 98 ] ç”¨Cå®ç°çš„ç®€å•æ’å…¥æ’åºï¼š 1234567891011121314151617181920#include &lt;stdio.h&gt;void mySort(int array[],int size)&#123; for(int i=0;i&lt;size-1;i++)&#123; int temp = array[i+1]; for(int j=i+1;j&gt;0;j--)&#123; if(temp&lt;array[j])&#123; array[j+1] = array[j]; array[j] = temp; &#125; &#125; &#125;&#125;int main()&#123; int a[] = &#123;1, 2, 12, 34, 46, 54, 64, 65, 76, 98 &#125;; mySort(a,10); for(int i = 0;i&lt;10;i++)&#123; printf(\"%d\\n\",a[i]); &#125; return 0;&#125; äºŒã€äºŒåˆ†æ’å…¥æ’åº(æŠ˜åŠæ’å…¥æ’åº)äºŒåˆ†æ’å…¥æ’åºä¹Ÿæ˜¯æ’å…¥æ’åºçš„ä¸€ç§ï¼Œå…¶åˆå«åšæŠ˜åŠæ’å…¥æ’åºã€‚å®ƒä¸ç›´æ¥æ’å…¥æ’åºçš„å”¯ä¸€ä¸åŒåªåœ¨äºæŸ¥æ‰¾æ’å…¥ä½ç½®çš„æ–¹å¼ã€‚ç›´æ¥æ’å…¥æ’åºæ˜¯é€šè¿‡éå†æ¥æŸ¥æ‰¾è¦æ’å…¥å…ƒç´ çš„ä½ç½®ï¼ŒäºŒåˆ†æ’å…¥æ’åºåˆ™æ˜¯é€šè¿‡äºŒåˆ†æ³•æ¥æŸ¥æ‰¾è¦æ’å…¥çš„ä½ç½®ï¼Œä¹‹åå°†æ­¤ä½ç½®æ‰€æœ‰å…ƒç´ åç§»ï¼Œå°†æ’åºçš„å…ƒç´ è¿›è¡Œæ’å…¥ã€‚ JavaScriptå®ç°çš„äºŒåˆ†æ’å…¥æ’åºï¼š 123456789101112131415161718192021var array = [1,54,2,64,12,65,76,46,34,98];//äºŒåˆ†æ’å…¥æ’åºfor(var i=0;i&lt;array.length-1;i++)&#123; var temp = array[i+1]; var left = 0; var right = i; var middle; while(left&lt;=right)&#123; middle = Math.round((left+right)/2); if (array[middle]&gt;temp) &#123; right=middle-1; &#125;else&#123; left = middle+1; &#125; &#125; for(var j=i+1;j&gt;left;j--)&#123; array[j] = array[j-1]; &#125; array[left] = temp;&#125;console.log(array);//[ 1, 2, 12, 34, 46, 54, 64, 65, 76, 98 ]; Cå®ç°çš„äºŒåˆ†æ’å…¥æ’åºï¼š 12345678910111213141516171819202122232425262728#include &lt;stdio.h&gt;//äºŒåˆ†æ’å…¥æ’åºvoid mySort(int array[],int size)&#123; for(int i=0;i&lt;size-1;i++)&#123; int temp = array[i+1]; int left=0,right=i,middle; while(left&lt;=right)&#123; middle = (left+right)/2; if(array[middle]&gt;temp)&#123; right=middle-1; &#125;else &#123; left = middle+1; &#125; &#125; for(int j =i+1;j&gt;left;j--)&#123; array[j] = array[j-1]; &#125; array[left] = temp; &#125;&#125;int main()&#123; int a[] = &#123;1, 2, 12, 34, 46, 54, 64, 65, 76, 98 &#125;; mySort(a,10); for(int i = 0;i&lt;10;i++)&#123; printf(\"%d\\n\",a[i]); &#125; return 0;&#125; ä¸‰ã€å¸Œå°”æ’åºå¸Œå°”æ’åºä¹Ÿæ˜¯æ’å…¥æ’åºçš„ä¸€ç§ï¼Œå®ƒå…ˆå°†æ•´ä¸ªæ•°åˆ—åˆ†å‰²æˆè‹¥å¹²ä¸ªå°çš„å­åºåˆ—è¿›è¡Œæ’å…¥æ’åºï¼Œé€æ¸å‡å°‘å­åºåˆ—çš„ä¸ªæ•°ï¼Œç›´åˆ°æœ€åç»„åˆæˆä¸€ä¸ªæ•°åˆ—ï¼Œå®Œæˆæ•´ä¸ªæ’åºè¿‡ç¨‹ã€‚å¸Œå°”æ’åºçš„è¿‡ç¨‹ä½¿ç”¨æ–‡å­—æè¿°å¯ä»¥è¡¨ç¤ºä¸ºå¦‚ä¸‹å‡ æ­¥ï¼š 1.å‡è®¾æ•°åˆ—å…ƒç´ ä¸ªæ•°ä¸ºnï¼Œå…ˆå–ä¸€ä¸ªå°äºnçš„å¢é‡d1ï¼Œå°†æ‰€æœ‰é—´éš”d1è·ç¦»çš„å…ƒç´ æ”¾ä¸º1ç»„è¿›è¡Œæ’å…¥æ’åºï¼Œd1é€šå¸¸å–å€¼n/2ï¼Œå‘ä¸‹å–æ•´ã€‚ 2.å†æ¬¡å–d2&lt;d1ï¼Œå°†æ‰€æœ‰é—´éš”d2è·ç¦»çš„å…ƒç´ æ”¾ä¸º1ç»„è¿›è¡Œæ’å…¥æ’åºï¼Œé€šå¸¸d2å–å€¼ä¸ºd1/2ï¼Œå‘ä¸‹å–æ•´ã€‚ 3.é‡å¤æ­¥éª¤2ï¼Œç›´åˆ°å–å¾—dç­‰äº1ã€‚ å›¾ç¤ºå¸Œå°”æ’åºå¦‚ä¸‹ï¼š JavaScriptå®ç°çš„å¸Œå°”æ’åºï¼š 123456789101112131415161718192021222324var array = [1,54,2,64,12,65,76,46,34,98];//å¸Œå°”æ’åº//æ­¥é•¿ åˆ†ç»„æ•°var d = Math.floor(array.length/2);while(d&gt;=1)&#123; //æ¯ç»„å…ƒç´ ä¸ªæ•° var counts = Math.floor(array.length/d); //æ¯ç»„æ’åºä¾æ¬¡ for (var i = 0; i &lt; d ; i++) &#123; //ç»„å†…çš„æ’å…¥æ’åº for(var j = 0;j&lt;counts-1;j++)&#123; var temp = array[(j+1)*d]; for(var k = ((j+1)*d);k&gt;0;k-=d)&#123; if (temp&lt;array[k]) &#123; array[k+d] = array[k]; array[k] = temp; &#125; &#125; &#125; &#125; //é‡å–då€¼ d=Math.floor(d/2);&#125;console.log(array);//[ 1, 2, 12, 34, 46, 54, 64, 65, 76, 98 ]; Cå®ç°çš„å¸Œå°”æ’åºï¼š 1234567891011121314151617181920212223242526272829303132#include &lt;stdio.h&gt;//å¸Œå°”æ’åºvoid mySort(int array[],int size)&#123; int d = size/2; while(d&gt;=1)&#123; //æ¯ç»„å…ƒç´ ä¸ªæ•° int counts = size/d; //æ¯ç»„æ’åºä¾æ¬¡ for (int i = 0; i &lt; d ; i++) &#123; //ç»„å†…çš„æ’å…¥æ’åº for(int j = 0;j&lt;counts-1;j++)&#123; int temp = array[(j+1)*d]; for(int k = ((j+1)*d);k&gt;0;k-=d)&#123; if (temp&lt;array[k]) &#123; array[k+d] = array[k]; array[k] = temp; &#125; &#125; &#125; &#125; //é‡å–då€¼ d=d/2;&#125;&#125;int main()&#123; int a[] = &#123;1, 2, 12, 34, 46, 54, 64, 65, 76, 98 &#125;; mySort(a,10); for(int i = 0;i&lt;10;i++)&#123; printf(\"%d\\n\",a[i]); &#125; return 0;&#125; å››ã€é€‰æ‹©æ’åºå‰è¾¹æ‰€è¯´çš„3ç§æ’åºç®—æ³•åŸç†ä¸Šéƒ½æ˜¯æ’å…¥æ’åºï¼Œå³ä»æ— åºæ•°åˆ—ä¸­é€ä¸ªå–å…ƒç´ å°†å…¶æ’å…¥åˆ°æœ‰åºæ•°åˆ—ä¸­çš„åˆé€‚ä½ç½®ã€‚é€‰æ‹©æ’åºåˆ™åˆšå¥½ä¸ä¹‹ç›¸åï¼Œå…¶ä»æ— åºæ•°åˆ—ä¸­å…ˆæ‰¾åˆ°æœ€å°å€¼ï¼Œæ”¾åœ¨æ’åºæ•°åˆ—é¦–éƒ¨ï¼Œåœ¨ä¾æ¬¡æ‰¾åˆ°å‰©ä½™æ•°åˆ—çš„ä¸­æœ€å°å€¼è¿½åŠ å…¥æœ‰åºæ•°åˆ—ï¼Œæœ€ç»ˆå®Œæˆæ•°åˆ—çš„æ’åºã€‚ç”¨æ–‡å­—æè¿°é€‰æ‹©æ’åºæ­¥éª¤ä¸å¦‚ï¼š 1.æ‰¾åˆ°æ•°åˆ—ä¸­çš„æœ€å°å€¼ï¼Œå°†å…¶ä½œä¸ºæœ‰åºæ•°åˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚ 2.ä»å‰©ä½™æ•°åˆ—ä¸­æ‰¾åˆ°æœ€å°å€¼ï¼Œè¿½åŠ å…¥æœ‰åºæ•°åˆ—ã€‚ 3.é‡å¤æ­¥éª¤2ï¼Œç›´åˆ°æ’å®Œæ•´ä¸ªæ•°åˆ—ã€‚ å›¾ç¤ºæè¿°é€‰æ‹©æ’åºå¦‚ä¸‹ï¼š JavaScriptå®ç°çš„é€‰æ‹©æ’åºç®—æ³•ï¼š 1234567891011121314151617var array = [1,54,2,64,12,65,76,46,34,98];//é€‰æ‹©æ’åºfor(var i=0;i&lt;array.length-1;i++)&#123; //æ‰¾åˆ°æœ€å°å€¼ var min = array[i]; var index = i; for (var j = i+1; j &lt;array.length; j++) &#123; if (array[j]&lt;min) &#123; min = array[j]; index = j; &#125; &#125; //è¿›è¡Œäº¤æ¢ array[index]=array[i]; array[i]=min;&#125;console.log(array);//[ 1, 2, 12, 34, 46, 54, 64, 65, 76, 98 ] Cå®ç°çš„é€‰æ‹©æ’åºç®—æ³•ï¼š 1234567891011121314151617181920212223//é€‰æ‹©æ’åºvoid mySort(int array[],int size)&#123; for(int i=0;i&lt;size-1;i++)&#123; int min = array[i]; int index = i; for(int j=i+1;j&lt;size;j++)&#123; if(array[j]&lt;min)&#123; min = array[j]; index = j; &#125; &#125; array[index] = array[i]; array[i]=min; &#125;&#125;int main()&#123; int a[] = &#123;1, 2, 12, 34, 46, 54, 64, 65, 76, 98&#125;; mySort(a,11); for(int i = 0;i&lt;10;i++)&#123; printf(\"%d\\n\",a[i]); &#125; return 0;&#125; äº”ã€å†’æ³¡æ’åºå†’æ³¡æ’åºå’Œé€‰æ‹©æ’åºæ˜¯æˆ‘ä»¬å­¦ä¹ ç¼–ç¨‹è¯¾æ—¶å¿…ä¸å¯å°‘çš„ä¸¤ç§æ’åºç®—æ³•ï¼Œå†’æ³¡æ’åºç®—æ³•çš„æ ¸å¿ƒæ˜¯æ¯æ¬¡æ¯”è¾ƒç›¸é‚»çš„è¿ä¸ªå…ƒç´ ï¼Œå¦‚æœå®ƒä»¬çš„é¡ºåºä¸å¯¹ï¼Œåˆ™è¿›è¡Œäº¤æ¢ï¼Œä¸€è½®æ’åºä¸‹æ¥ï¼Œæœ€å¤§å€¼ä¸€å®šè¢«æ’åºåˆ°æ•°åˆ—çš„æœ«ç«¯ã€‚ä¹‹åé™¤å»æœ€åä¸€ä¸ªå…ƒç´ å†è¿›è¡Œç¬¬äºŒè½®å†’æ³¡ï¼Œç›´åˆ°æ•´ä¸ªæ•°åˆ—æ’åºå®Œæˆã€‚ç”¨æ–‡å­—æè¿°å†’æ³¡æ’åºçš„è¿‡ç¨‹å¦‚ä¸‹ï¼š 1.ä»å·¦å‘å³ä¾æ¬¡æ¯”è¾ƒç›¸é‚»ä¸¤å…ƒç´ ï¼Œå¦‚æœé¡ºåºä¸å¯¹ï¼Œåˆ™è¿›è¡Œäº¤æ¢ï¼Œæœ€ç»ˆæœ€å¤§çš„å…ƒç´ è¢«æ”¾åœ¨æœ€åã€‚ 2.é™¤å»æœ€åä¸€ä¸ªå…ƒç´ ï¼Œé‡å¤æ­¥éª¤1ï¼Œæœ€ç»ˆå‰©ä¸‹å…ƒç´ ä¸­æœ€å¤§çš„è¢«æ”¾åœ¨å€’æ•°ç¬¬2ä¸ªä½ç½®ã€‚ 3.ç»§ç»­ä¸Šé¢çš„é‡å¤ï¼Œç›´åˆ°æ’å®Œæ•´ä¸ªæ•°åˆ—ã€‚ JavaScriptå®ç°çš„å†’æ³¡æ’åºç®—æ³•ï¼š 123456789101112var array = [1,54,2,64,12,65,76,46,34,98];//å†’æ³¡æ’åºfor(var i=0;i&lt;array.length-1;i++)&#123; for(var j=0;j&lt;array.length-i-1;j++)&#123; var temp = array[j]; if (temp&gt;array[j+1]) &#123; array[j] = array[j+1]; array[j+1] = temp; &#125; &#125;&#125;console.log(array);//[ 1, 2, 12, 34, 46, 54, 64, 65, 76, 98 ] Cå®ç°çš„å†’æ³¡æ’åºç®—æ³•ï¼š 123456789101112131415161718192021#include &lt;stdio.h&gt;//å†’æ³¡æ’åºvoid mySort(int array[],int size)&#123; for(int i =0;i&lt;size-1;i++)&#123; for(int j=0;j&lt;size-1-i;j++)&#123; int temp = array[j]; if(temp&gt;array[j+1])&#123; array[j] = array[j+1]; array[j+1] = temp; &#125; &#125; &#125;&#125;int main()&#123; int a[] = &#123;1, 2, 12, 34, 46, 54, 64, 65, 76, 98&#125;; mySort(a,10); for(int i = 0;i&lt;10;i++)&#123; printf(\"%d\\n\",a[i]); &#125; return 0;&#125; å…­ã€åŒå‘å†’æ³¡æ’åºåŒå‘å†’æ³¡æ’åºæ˜¯å†’æ³¡æ’åºçš„ä¸€ç§å˜ä½“ï¼Œå†’æ³¡æ’åºæ¯æ¬¡æ¯”è¾ƒéƒ½æ˜¯ä»å·¦å‘å³ï¼Œæ‰¾å‡ºæœ€å¤§çš„æ”¾åœ¨æœ€åã€‚åŒå‘å†’æ³¡æ’åºåˆ™æ˜¯ç¬¬ä¸€è½®ä»å·¦å‘å³å°†æœ€å¤§çš„æ”¾æœ€åï¼Œç¬¬äºŒè½®ä»å³å‘å·¦å°†æœ€å°çš„æ”¾æœ€é¦–ï¼Œå¦‚æ­¤äº¤æ›¿ç›´åˆ°æ•´ä¸ªæ•°åˆ—æ’åºå®Œæˆã€‚æ–‡å­—æè¿°åŒå‘å†’æ³¡æ’åºæ­¥éª¤å¦‚ä¸‹ï¼š 1.ä»å·¦å‘å³ä¾æ¬¡æ¯”è¾ƒç›¸é‚»ä¸¤ä¸ªå…ƒç´ ï¼Œå¦‚æœé¡ºåºä¸å¯¹ï¼Œåˆ™è¿›è¡Œäº¤æ¢ï¼Œå¦‚æ­¤ä¸€è½®ä¸‹æ¥ï¼Œæœ€å¤§çš„å…ƒç´ åœ¨æœ€åã€‚ 2.é™¤å»å·²ç»æ’åºå¥½çš„å…ƒç´ ï¼Œä»å³å‘å·¦ä¾æ¬¡æ¯”è¾ƒç›¸é‚»çš„ä¸¤ä¸ªå…ƒç´ ï¼Œå¦‚æœé¡ºåºä¸å¯¹ï¼Œåˆ™è¿›è¡Œäº¤æ¢ï¼Œæœ€å°çš„å…ƒç´ åœ¨é¦–éƒ¨ã€‚ 3.äº¤æ›¿é‡å¤æ­¥éª¤1ä¸æ­¥éª¤2ç›´åˆ°æ’åºå®Œæˆã€‚ åŒå‘å†’æ³¡æ’åºç¤ºæ„å›¾å¦‚ä¸‹ï¼š JavaScriptå®ç°çš„åŒå‘å†’æ³¡æ’åºç®—æ³•ï¼š 12345678910111213141516171819202122232425var array = [1,54,2,64,12,65,76,46,34,98];//åŒå‘å†’æ³¡æ’åºvar start = 0;var end = array.length;while(end-start&gt;0)&#123; //ä»å·¦å‘å³å†’æ³¡ for(var i=start;i&lt;end-1;i++)&#123; var temp = array[i]; if (array[i+1]&lt;temp) &#123; array[i] = array[i+1]; array[i+1] = temp; &#125; &#125; end--; //ä»å³å‘å·¦å†’æ³¡ for(var j=end;j&gt;start+1;j--)&#123; var temp = array[j]; if (array[j-1]&gt;temp) &#123; array[j] = array[j-1]; array[j-1] = temp; &#125; &#125; start++;&#125;console.log(array);//[ 1, 2, 12, 34, 46, 54, 64, 65, 76, 98 ] Cå®ç°çš„åŒå‘å†’æ³¡æ’åºç®—æ³•ï¼š 1234567891011121314151617181920212223242526272829303132#include &lt;stdio.h&gt;//åŒå‘å†’æ³¡æ’åºvoid mySort(int array[],int size)&#123; int start = 0; int end = size; //ä»å·¦å‘å³å†’æ³¡ for(int i=start;i&lt;end-1;i++)&#123; int temp = array[i]; if (array[i+1]&lt;temp) &#123; array[i] = array[i+1]; array[i+1] = temp; &#125; &#125; end--; //ä»å³å‘å·¦å†’æ³¡ for(int j=end;j&gt;start+1;j--)&#123; int temp = array[j]; if (array[j-1]&gt;temp) &#123; array[j] = array[j-1]; array[j-1] = temp; &#125; &#125; start++;&#125;int main()&#123; int a[] = &#123;1, 2, 12, 34, 46, 54, 64, 65, 76, 98,33&#125;; mySort(a,11); for(int i = 0;i&lt;11;i++)&#123; printf(\"%d\\n\",a[i]); &#125; return 0;&#125; ä¸ƒã€å¿«é€Ÿæ’åºç®—æ³•å¿«é€Ÿæ’åºç®—æ³•å’ŒåŸºæœ¬æ€è·¯æ˜¯é€šè¿‡ä¸€è¶Ÿæ’åºå°†æ•°åˆ—åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œå…¶ä¸­ä¸€éƒ¨åˆ†çš„æ‰€æœ‰æ•°æ®éƒ½æ¯”å¦ä¸€éƒ¨åˆ†å°ã€‚ä¹‹ååœ¨åˆ†åˆ«åœ¨ä¸¤ä¸ªå­æ•°åˆ—ä¸­è¿›è¡Œé€’å½’ï¼Œç›´åˆ°æœ€ç»ˆæ’åºå®Œæˆã€‚å¿«é€Ÿæ’åºç®—æ³•çš„æ ¸å¿ƒæ˜¯é€’å½’ï¼Œå› æ­¤å…¶æ•ˆç‡ååˆ†é«˜ã€‚ç”¨æ–‡å­—æè¿°å¿«é€Ÿæ’åºçš„æ­¥éª¤å¦‚ä¸‹ï¼š 1.éšæœºå–ä¸€ä¸ªå…ƒç´ ä½œä¸ºåŸºå‡†ï¼Œå°†å°äºæ­¤å…ƒç´ çš„æ•°æ®éƒ½æ”¾åœ¨æ­¤å…ƒç´ çš„å·¦ä¾§ï¼Œå¤§äºæ­¤å…ƒç´ çš„æ•°æ®éƒ½æ”¾åœ¨æ­¤å…ƒç´ çš„å³ä¾§ï¼Œå°†æ•°åˆ—åˆ†éš”æˆå·¦å³ä¸¤ä¸ªå­æ•°åˆ—ã€‚ 2.åˆ†åˆ«å¯¹å·¦å³å­æ•°åˆ—è¿›è¡Œæ­¥éª¤1çš„é€’å½’ï¼Œç›´åˆ°æ•°åˆ—é•¿åº¦ä¸º1æˆ–è€…0ï¼Œè¡¨ç¤ºæ’åºå®Œæˆã€‚ JavaScriptå®ç°çš„å¿«é€Ÿæ’åºç®—æ³•ï¼š 12345678910111213141516171819202122232425262728293031323334353637var array = [1, 54, 2, 64, 12, 65, 76, 46, 34, 98, 34];//å¿«é€Ÿæ’åºfunction sort(array, left, right) &#123; if (right - left &gt;= 1) &#123; //å–ç¬¬ä¸€ä¸ªå…ƒç´ ä½œä¸ºåŸºå‡† let base = array[left]; let i = left + 1; let index = left; while (i &lt;= right) &#123; //å¤§äºç­‰äºçš„å·²ç»åœ¨å³è¾¹ ä¸éœ€è¦ä¿®æ”¹ å°äºçš„è¦æ”¾åœ¨å·¦è¾¹ if (array[i] &lt; base) &#123; if (index + 1 == i) &#123; //äº¤æ¢ array[index] = array[i]; array[i] = base; index++; &#125; else &#123; //å…ˆå°†baseä¸å…¶åä¸€ä¸ªå…ƒç´ äº¤æ¢ array[index] = array[index + 1]; array[index + 1] = base; //äº¤æ¢ let temp = array[index]; array[index] = array[i]; array[i] = temp; index++; &#125; &#125; i++; &#125; //é€’å½’æ’åº sort(array, left, index - 1); sort(array, index + 1, right); &#125;&#125;sort(array, 0, array.length - 1);console.log(array); //[ 1, 2, 12, 34,34, 46, 54, 64, 65, 76, 98 ] Cè¯­è¨€å®ç°çš„å¿«é€Ÿæ’åºï¼š 123456789101112131415161718192021222324252627282930313233343536#include &lt;stdio.h&gt;//å¿«é€Ÿæ’åºvoid mySort(int array[],int left,int right)&#123; if(right-left&gt;=1)&#123; int base = array[left]; int i = left+1; int index = left; while(i&lt;=right)&#123; if(array[i]&lt;base)&#123; if(index+1==i)&#123; array[index] = array[i]; array[i]=base; index = i; &#125;else&#123; array[index]=array[index+1]; array[index+1] = base; int temp = array[index]; array[index] = array[i]; array[i] = temp; index++; &#125; &#125; i++; &#125; mySort(array, left, index-1); mySort(array, index+1, right); &#125;&#125;int main()&#123; int a[] = &#123;1, 2, 12, 34, 46, 54, 64, 65, 76, 98,34&#125;; mySort(a,0,10); for(int i = 0;i&lt;11;i++)&#123; printf(\"%d\\n\",a[i]); &#125; return 0;&#125; å…«ã€å †æ’åºå †æ’åºæ˜¯æ¯”å¿«é€Ÿæ’åºæ›´åŠ å¤æ‚çš„ä¸€ç§æ’åºç®—æ³•ã€‚å †æ’åºä½¿ç”¨åˆ°äº†å †è¿™æ ·ä¸€ç§æ•°æ®ç»“æ„ã€‚é¦–å…ˆæˆ‘ä»¬éœ€è¦ææ¸…æ¥šä»€ä¹ˆæ˜¯å †ç»“æ„ã€‚å †æ˜¯ä¸€ç§ç±»ä¼¼å®Œå…¨äºŒå‰æ ‘ï¼ŒåŒæ—¶åˆæ»¡è¶³å¦‚ä¸‹æ¡ä»¶çš„æ•°æ®ç»“æ„ï¼šæ‰€æœ‰å­èŠ‚ç‚¹çš„å€¼æ€»æ˜¯å°äº(å¤§äº)çˆ¶èŠ‚ç‚¹ã€‚æ‰€æœ‰å­èŠ‚ç‚¹çš„å€¼éƒ½å°äºçˆ¶èŠ‚ç‚¹çš„å †å«å¤§é¡¶å †ï¼Œæ‰€æœ‰å­èŠ‚ç‚¹éƒ½å¤§äºçˆ¶èŠ‚ç‚¹çš„å †å«å°é¡¶å †ã€‚ äºŒå‰æ ‘ä½ åº”è¯¥æ¯”è¾ƒç†Ÿæ‚‰ï¼Œä¸‹å›¾å°±æ˜¯ä¸€ä¸ªå°é¡¶å †çš„ç¤ºä¾‹ï¼š æ­¤äºŒå‰æ ‘ä¸­ä»»ä½•ä¸€ä¸ªå­èŠ‚ç‚¹çš„å€¼éƒ½æ˜¯å¤§äºçˆ¶èŠ‚ç‚¹ã€‚å¦‚ä½•å°†æ•°åˆ—æ„é€ æˆè¿™æ ·ä¸€ä¸ªå †ç»“æ„å‘¢ï¼Œå…¶å®ååˆ†ç®€å•ï¼Œå°†æ•°åˆ—æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹ï¼Œä»å·¦åˆ°å³çš„åŸåˆ™æ¥æ„é€ å®Œå…¨äºŒå‰æ ‘å³å¯ã€‚ä¾‹å¦‚å¦‚ä¸‹æ•°åˆ—[1, 54, 2, 64, 12, 65, 76, 46, 34, 98, 34]å¦‚æœå°†å…¶æ„é€ æˆå †å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š æ­£å¸¸æƒ…å†µä¸‹ï¼Œè¿™ä¸ªç”±æ•°ç»„æ˜ å°„æˆçš„äºŒå‰æ ‘å¹¶ä¸ç¬¦åˆæˆ‘ä»¬å †çš„è¦æ±‚ï¼Œå¦åˆ™ä¹Ÿå°±ä¸éœ€è¦æˆ‘ä»¬ç”¨ç®—æ³•æ¥æ’åºäº†ã€‚è¦è®©è¿™ä¸ªäºŒå‰æ ‘ç¬¦åˆè¦æ±‚ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œæ•´ç†ï¼Œå³ä»æœ«èŠ‚ç‚¹å¼€å§‹è¿›è¡Œè°ƒæ•´ï¼Œä¾‹å¦‚å…ˆä»12ï¼Œ98ï¼Œ34ä¸­æ‰¾åˆ°æœ€å°çš„ï¼Œæ”¾åœ¨ç°åœ¨12æ‰€åœ¨çš„ä½ç½®ï¼Œç„¶åä»64ï¼Œ46ï¼Œ34ä¸­æ‰¾åˆ°æœ€å°çš„å…ƒç´ è¿›è¡Œä¸Šæµ®ï¼Œæ¥ç€å†ä¸€å±‚å±‚ä¸Šæµ®ä¸Šå»ï¼Œç›´åˆ°å †é¡¶å…ƒç´ ä¸ºæ‰€æœ‰å…ƒç´ ä¸­çš„æœ€å°å…ƒç´ ã€‚æ•´ç†å®Œæˆåï¼Œæˆ‘ä»¬åªéœ€è¦å°†å †é¡¶å…ƒç´ å’Œæœ€åä¸€ä¸ªå…ƒç´ è¿›è¡Œäº¤æ¢ï¼Œä¹‹åé™¤æ‰æœ€åä¸€ä¸ªå…ƒç´ å†è¿›è¡Œå †æ•´ç†ï¼Œæ•´ç†å®Œæˆåå†å°†é¡¶å…ƒç´ (æ­¤æ—¶ä¸ºç¬¬2å°)ä¸å€’æ•°ç¬¬äºŒä¸ªå…ƒç´ äº¤æ¢ï¼Œä¾æ¬¡è¿›è¡Œä¸‹å»ï¼Œå³å¯å®Œæˆæ•°åˆ—çš„æ’åºã€‚ ç”¨æ–‡å­—æè¿°å †æ’åºæ­¥éª¤å¦‚ä¸‹ï¼š 1.å…ˆå°†æ•°åˆ—æ•´ç†æˆç¬¦åˆè¦æ±‚çš„å †ã€‚ 2.å°†é¦–æœ«å…ƒç´ äº¤æ¢ã€‚ 3.é™¤æ‰æœ€åä¸€ä¸ªå…ƒç´ åœ¨è¿›è¡Œå †çš„æ•´ç†ã€‚ 4.é‡å¤è¿›è¡Œ2å’Œ3ï¼Œç›´åˆ°æ•°åˆ—æ’åºå®Œæˆã€‚ JavaScriptå®ç°çš„å †æ’åºç®—æ³•ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758var array = [1, 54, 2, 64, 12, 65, 76, 46, 34, 98, 34];//å †æ’åº//å †è°ƒæ•´ å¤§é¡¶function store(array,index,end)&#123; let top = array[index]; let left; let right; if (index*2+1&lt;=end) &#123; left = index*2+1; &#125;else&#123; //æ²¡æœ‰å·¦å­æ ‘ è¯´æ˜å·²ç»æ˜¯å¶å­èŠ‚ç‚¹ //æ— éœ€è°ƒæ•´ç›´æ¥return return; &#125; if (index*2+2&lt;=end) &#123; right = index*2+2; &#125;else&#123; //æ²¡æœ‰å³å­æ ‘ è°ƒæ•´å·¦å­æ ‘å³å¯ if (array[left]&gt;top) &#123; array[index] = array[left]; array[left] = top; top = array[index]; &#125; return; &#125; //æ‰¾å‡ºå †å•å…ƒä¸­çš„æœ€å¤§å€¼ if (array[left]&gt;top) &#123; array[index] = array[left]; array[left] = top; top = array[index]; &#125; if (array[right]&gt;top) &#123; array[index] = array[right]; array[right] = top; top = array[index]; &#125;&#125;function sort(array,end)&#123; //å…ˆå°†å †è¿›è¡Œè°ƒæ•´ å€’å™è°ƒæ•´ let i = end; while(i&gt;=0)&#123; store(array,i,end) i--; &#125; //æ ¹èŠ‚ç‚¹ä¸€å®šæ˜¯æœ€å¤§çš„ æ”¾æœ€å å†è¿›è¡Œå †æ•´ç† let temp = array[end]; array[end] = array[0]; array[0] = temp; end--; if (end&gt;0) &#123; sort(array,end); &#125;else&#123; return; &#125; &#125;sort(array, array.length-1);console.log(array); //[ 1, 2, 12, 34,34, 46, 54, 64, 65, 76, 98 ] Cè¯­è¨€å®ç°çš„å †æ’åºç®—æ³•ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162#include &lt;stdio.h&gt;void store(int array[],int index,int end)&#123; int top = array[index]; int left; int right; if (index*2+1&lt;=end) &#123; left = index*2+1; &#125;else&#123; //æ²¡æœ‰å·¦å­æ ‘ è¯´æ˜å·²ç»æ˜¯å¶å­èŠ‚ç‚¹ //æ— éœ€è°ƒæ•´ç›´æ¥return return; &#125; if (index*2+2&lt;=end) &#123; right = index*2+2; &#125;else&#123; //æ²¡æœ‰å³å­æ ‘ è°ƒæ•´å·¦å­æ ‘å³å¯ if (array[left]&gt;top) &#123; array[index] = array[left]; array[left] = top; top = array[index]; &#125; return; &#125; //æ‰¾å‡ºå †å•å…ƒä¸­çš„æœ€å¤§å€¼ if (array[left]&gt;top) &#123; array[index] = array[left]; array[left] = top; top = array[index]; &#125; if (array[right]&gt;top) &#123; array[index] = array[right]; array[right] = top; top = array[index]; &#125;&#125;void mySort(int array[],int end)&#123; //å…ˆå°†å †è¿›è¡Œè°ƒæ•´ å€’å™è°ƒæ•´ int i = end; while(i&gt;=0)&#123; store(array,i,end); i--; &#125; //æ ¹èŠ‚ç‚¹ä¸€å®šæ˜¯æœ€å¤§çš„ æ”¾æœ€å å†è¿›è¡Œå †æ•´ç† int temp = array[end]; array[end] = array[0]; array[0] = temp; end--; if (end&gt;0) &#123; mySort(array,end); &#125;else&#123; return; &#125; &#125;int main()&#123; int a[] = &#123;1, 2, 12, 34, 46, 54, 64, 65, 76, 98,34&#125;; mySort(a,10); for(int i = 0;i&lt;11;i++)&#123; printf(\"%d\\n\",a[i]); &#125; return 0;&#125; éœ€è¦æ³¨æ„ï¼Œå¤§é¡¶å †æ’åºå®Œæˆåä¸ºå‡åºï¼Œå°é¡¶å †æ’åºå®Œæˆåä¸ºé™åºã€‚ ä¹ã€å½’å¹¶æ’åºå½’å¹¶æ’åºçš„æ ¸å¿ƒå¹¶ä¸æ˜¯äº¤æ¢å…ƒç´ çš„é¡ºåºï¼Œè€Œæ˜¯å°†æ•°åˆ—åˆ†æˆå¤šä¸ªæœ‰åºå°æ•°åˆ—ï¼Œå°†ç›¸é‚»çš„å°æ•°åˆ—è¿›è¡Œå½’å¹¶ã€‚æ–‡å­—æè¿°å½’å¹¶æ’åºæ­¥éª¤å¦‚ä¸‹ï¼š 1.æŠŠé•¿åº¦ä¸ºnçš„æ•°åˆ—åˆ†æˆé•¿åº¦ä¸º1çš„nä¸ªæ•°åˆ—ã€‚ 2.ç›¸é‚»æ•°åˆ—è¿›è¡Œæ’åºå½’å¹¶ã€‚ 3.é‡å¤æ“ä½œ2ï¼Œç›´åˆ°æ‰€æœ‰æ•°åˆ—å½’å¹¶æˆ1ä¸ªæ•´ä½“ã€‚ JavaScriptå®ç°çš„å½’å¹¶æ’åºç®—æ³•ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940var array = [1, 54, 2, 64, 12, 65, 76, 46, 34, 98, 34];//å½’å¹¶æ’åºfunction mergeArray(arrL,arrR)&#123; var tempArray = new Array(); let i = 0; let j = 0; while(i&lt;arrL.length &amp;&amp; j&lt;arrR.length)&#123; if (arrL[i]&lt;arrR[j]) &#123; tempArray.push(arrL[i]); i++; &#125;else&#123; tempArray.push(arrR[j]); j++; &#125; &#125; while(i&lt;arrL.length)&#123; tempArray.push(arrL[i]); i++; &#125; while(j&lt;arrR.length)&#123; tempArray.push(arrR[j]); j++ &#125; return tempArray;&#125;function sort(array)&#123; if (array.length&gt;1) &#123; let arrL = array.slice(0,Math.floor(array.length/2)); let arrR = array.slice(Math.floor(array.length/2),array.length); if (arrL.length&gt;1) &#123; arrL = sort(arrL); &#125; if (arrR.length&gt;1) &#123; arrR = sort(arrR); &#125; return mergeArray(arrL,arrR); &#125; return array;&#125;console.log(sort(array)); //[ 1, 2, 12, 34,34, 46, 54, 64, 65, 76, 98 ] Cè¯­è¨€å®ç°çš„å½’å¹¶æ’åºç®—æ³•ï¼š 123456789101112131415161718192021222324252627282930313233343536373839#include &lt;stdio.h&gt;void merge(int array[],int temp[],int start,int end,int middle)&#123; int i=start,j=middle+1,k=start; while(i&lt;middle+1 &amp;&amp; j&lt;end+1)&#123; if(array[i]&lt;array[j])&#123; temp[k++] = array[i++]; &#125;else &#123; temp[k++] = array[j++]; &#125; &#125; while(i&lt;middle+1)&#123; temp[k++] = array[i++]; &#125; while(j&lt;end+1)&#123; temp[k++] = array[j++]; &#125; for(i=start;i&lt;=end;i++)&#123; array[i] = temp[i]; // printf(\"%d,\",temp[i]); &#125;&#125;void sort(int array[],int temp[],int start,int end)&#123; int middle; if(start&lt;end)&#123; middle = (start+end)/2; sort(array, temp, start, middle); sort(array, temp, middle+1, end); merge(array, temp, start, end, middle); &#125;&#125;int main()&#123; int a[] = &#123;1, 2, 12, 34, 46, 54, 64, 65, 76, 98,34&#125;; int b[11] = &#123;0&#125;; sort(a,b,0,10); for(int i = 0;i&lt;11;i++)&#123; printf(\"%d\\n\",a[i]); &#125; return 0;&#125;","categories":[{"name":"ç¼–ç¨‹ç ç‘","slug":"ç¼–ç¨‹ç ç‘","permalink":"http://huishao.cc/categories/ç¼–ç¨‹ç ç‘/"}],"tags":[],"keywords":[{"name":"ç¼–ç¨‹ç ç‘","slug":"ç¼–ç¨‹ç ç‘","permalink":"http://huishao.cc/categories/ç¼–ç¨‹ç ç‘/"}]},{"title":"Gitå‘½ä»¤é›†åä¸‰â€”â€”å¿«ç…§æ“ä½œ","slug":"320 Gitå‘½ä»¤é›†åä¸‰â€”â€”å¿«ç…§æ“ä½œ","date":"2017-03-20T16:00:00.000Z","updated":"2021-07-14T03:04:12.761Z","comments":true,"path":"2017/03/21/320 Gitå‘½ä»¤é›†åä¸‰â€”â€”å¿«ç…§æ“ä½œ/","link":"","permalink":"http://huishao.cc/2017/03/21/320 Gitå‘½ä»¤é›†åä¸‰â€”â€”å¿«ç…§æ“ä½œ/","excerpt":"","text":"Gitå‘½ä»¤é›†åä¸‰â€”â€”å¿«ç…§æ“ä½œGitå·¥å…·ä¸­æä¾›äº†ä¸€ä¸ªstashå‘½ä»¤ï¼Œè¿™ä¸ªå‘½ä»¤çš„ä½œç”¨æ˜¯åˆ›å»ºå¿«ç…§ã€‚å¿«ç…§ä¸»è¦çš„ç”¨é€”æ˜¯å°†å½“å‰æœªæ›´æ–°åˆ°ç¼“å­˜åŒºçš„ä¿®æ”¹è¿›è¡Œå…¥æ ˆä¿å­˜ï¼Œåˆ›å»ºå¿«ç…§åï¼ŒGitçš„çŠ¶æ€ä¼šå˜å›ä¸Šä¸€æ¬¡æäº¤æ—¶çš„çŠ¶æ€ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥åšå…¶ä»–çš„æ“ä½œã€‚åˆ›å»ºçš„å¿«ç…§ä¼šè¢«ä¿å­˜åœ¨æ ˆä¸­ï¼Œåœ¨éœ€è¦çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æ¢å¤å¿«ç…§ã€‚ä¸¾ä¸€ä¸ªå°ä¾‹å­ï¼Œå®é™…å¼€å‘ä¸­ï¼Œå¾ˆå¤šæƒ…å†µæˆ‘ä»¬éƒ½ä¼šä»ä¸»åˆ†æ”¯æ‹‰å‡ºä¸€ä¸ªæ–°çš„åˆ†æ”¯è¿›è¡Œæ–°åŠŸèƒ½çš„å¼€å‘ï¼Œå¦‚æœæˆ‘ä»¬åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæœ‰ä¸€ä¸ªç´§æ€¥çš„bugéœ€è¦åˆ°ä¸»åˆ†æ”¯ä¸­ä¿®æ”¹ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¸¸å¸¸ä¼šå°†ç›®å‰ä¸ºå®Œå–„çš„ä»£ç å…ˆæäº¤åˆ°æ–°çš„åˆ†æ”¯ï¼Œç„¶ååˆ‡å›ä¸»åˆ†æ”¯ä¿®æ”¹bugï¼Œä¹‹åå†å›æ¥ç»§ç»­å¼€å‘ã€‚ä½†æ˜¯å¦‚æœè¿™ä¸ªæ–°çš„åˆ†æ”¯å¹¶ä¸åªæ˜¯ä½ ä¸€ä¸ªäººå¼€å‘ï¼Œä½ çš„ä¸å®Œå–„çš„æäº¤å¾ˆæœ‰å¯èƒ½é€ æˆåˆ«äººæ— æ³•å·¥ä½œï¼Œå…¶å®ä½ å¯ä»¥ä½¿ç”¨Gitçš„å¿«ç…§å‘½ä»¤ï¼Œå…ˆå°†è‡ªå·±çš„ä¿®æ”¹å­˜æˆå¿«ç…§å…¥æ ˆä¿å­˜ï¼Œå›åˆ°ä¸»åˆ†æ”¯ä¿®æ”¹å®Œbugåï¼Œåœ¨å°†å¿«ç…§å‡ºæ ˆå³å¯ã€‚ 1.git stashå°†å½“å‰æœªæ›´æ–°åˆ°ç¼“å­˜åŒºçš„ä¿®æ”¹åˆ›å»ºæˆå¿«ç…§ã€‚éœ€è¦æ³¨æ„ï¼Œå¿«ç…§æ˜¯é‡‡ç”¨æ ˆçš„æ–¹å¼ç®¡ç†ã€‚æˆ‘ä»¬å¯ä»¥å…¥æ ˆå¤šä¸ªå¿«ç…§ï¼Œä¾‹å¦‚å…ˆåšä¸€éƒ¨åˆ†ä¿®æ”¹ï¼Œåˆ›å»ºä¸ºå¿«ç…§ï¼Œä¹‹ååˆè¿›è¡Œäº†ä¿®æ”¹ï¼Œå†æ¬¡åˆ›å»ºå¿«ç…§ã€‚ç¬¬2æ¬¡å¿«ç…§å¹¶ä¸ä¼šè¦†ç›–ä»¥å‰çš„å¿«ç…§ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šæ¢å¤åˆ°çš„å¿«ç…§ã€‚ 2.git stash listæ‰“å°å½“å‰æ ˆä¸­çš„æ‰€æœ‰å¿«ç…§ã€‚ 3.git stash show æ‰“å°æŸä¸ªå¿«ç…§çš„ä¿®æ”¹ä¿¡æ¯ï¼Œåé¢çš„stashå‚æ•°æŒ‡å®šå¿«ç…§åœ¨æ ˆä¸­çš„ä½ç½®ï¼Œå‘½ä»¤æ ¼å¼å¦‚ä¸‹ï¼šstash@{num}ï¼Œæœ€åå…¥æ ˆçš„ä¸ºstash@{0}ï¼Œå‘å‰ä¾æ¬¡ä¸ºstash@{1}ã€stash@{2}...ã€‚å¦‚æœä¸é™stashå‚æ•°ï¼Œåˆ™é»˜è®¤å°†æ‰“å°æ ˆé¡¶å¿«ç…§çš„ä¿¡æ¯ã€‚ 4.git stash pop æ¢å¤åˆ°æŸä¸ªå¿«ç…§ç‰ˆæœ¬ï¼Œå¦‚æœä¸åŠ stashå‚æ•°ï¼Œåˆ™é»˜è®¤ä¼šæ¢å¤åˆ°æ ˆé¡¶çš„å¿«ç…§ç‰ˆæœ¬ã€‚è¿™ä¸ªå‘½ä»¤ä¼šå°†æ¢å¤çš„å¿«ç…§ä»æ ˆä¸­åˆ é™¤æ‰ã€‚ 5.git stash apply æ¢å¤åˆ°æŸä¸ªå¿«ç…§çš„ç‰ˆæœ¬ï¼Œå¦‚æœä¸åŠ stashå‚æ•°ï¼Œåˆ™é»˜è®¤ä¼šæ¢å¤åˆ°æ ˆé¡¶çš„å¿«ç…§ç‰ˆæœ¬ã€‚è¿™ä¸ªå‘½ä»¤å’Œpopçš„ä¸åŒä¹‹å¤„åœ¨äºæ¢å¤çš„å¿«ç…§å¹¶ä¸ä¼šä»æ ˆä¸­åˆ é™¤ã€‚ 6.git stash clearæ¸…ç©ºæ ˆä¸­çš„æ‰€æœ‰å¿«ç…§ã€‚ 7.git stash drop æ¸…é™¤æ ˆä¸­çš„æŸä¸ªå¿«ç…§ï¼Œå¦‚æœä¸è®¾ç½®stashå‚æ•°ï¼Œåˆ™ä¼šé»˜è®¤æ¸…é™¤æ ˆé¡¶çš„å¿«ç…§ã€‚","categories":[{"name":"GIT","slug":"GIT","permalink":"http://huishao.cc/categories/GIT/"}],"tags":[],"keywords":[{"name":"GIT","slug":"GIT","permalink":"http://huishao.cc/categories/GIT/"}]},{"title":"Gitå‘½ä»¤é›†åäºŒâ€”â€”åˆ†æ”¯åˆå¹¶","slug":"319Gitå‘½ä»¤é›†åäºŒâ€”â€”åˆ†æ”¯åˆå¹¶","date":"2017-03-14T16:00:00.000Z","updated":"2021-07-14T03:03:28.623Z","comments":true,"path":"2017/03/15/319Gitå‘½ä»¤é›†åäºŒâ€”â€”åˆ†æ”¯åˆå¹¶/","link":"","permalink":"http://huishao.cc/2017/03/15/319Gitå‘½ä»¤é›†åäºŒâ€”â€”åˆ†æ”¯åˆå¹¶/","excerpt":"","text":"Gitå‘½ä»¤é›†åäºŒâ€”â€”åˆ†æ”¯åˆå¹¶1.git merge å°†æŒ‡å®šåˆ†æ”¯åˆå¹¶è¿›å½“å‰åˆ†æ”¯ã€‚ 2.git merge â€“commit å°†æŒ‡å®šåˆ†æ”¯åˆå¹¶è¿›å½“å‰åˆ†æ”¯ï¼Œå¹¶ä¸”ç›´æ¥æäº¤ã€‚ 3.git merge â€“no-commit å°†æŒ‡å®šåˆ†æ”¯åˆå¹¶è¿›å½“å‰åˆ†æ”¯ï¼Œå¹¶ä¸è‡ªåŠ¨æäº¤ã€‚ 4.git merge â€“edit å°†æŒ‡å®šåˆ†æ”¯åˆå¹¶è¿›å½“å‰åˆ†æ”¯ï¼Œåœ¨æäº¤ä¹‹å‰è¿›è¡Œåˆå¹¶ä¿¡æ¯çš„ç¼–è¾‘ã€‚ 5.git merge â€“no-edit å°†æŒ‡å®šåˆ†æ”¯åˆå¹¶è¿›å½“å‰åˆ†æ”¯ï¼Œä¸è¿›è¡Œæäº¤ä¿¡æ¯çš„ç¼–è¾‘ã€‚ 6.git merge â€“no-ff -m å°†æŒ‡å®šåˆ†æ”¯åˆå¹¶è¿›å½“å‰åˆ†æ”¯ï¼Œåœ¨åˆå¹¶æ“ä½œåæäº¤ä¸€æ¡åˆå¹¶ä¿¡æ¯ã€‚ 7.git merge å°†æŸæ¬¡æäº¤åˆå¹¶è¿›å½“å‰åˆ†æ”¯ã€‚","categories":[{"name":"GIT","slug":"GIT","permalink":"http://huishao.cc/categories/GIT/"}],"tags":[],"keywords":[{"name":"GIT","slug":"GIT","permalink":"http://huishao.cc/categories/GIT/"}]},{"title":"Gitå‘½ä»¤é›†åäºŒâ€”â€”åˆ‡æ¢åˆ†æ”¯ä¸è¿˜åŸæ–‡ä»¶","slug":"318Gitå‘½ä»¤é›†åäºŒâ€”â€”åˆ‡æ¢åˆ†æ”¯ä¸è¿˜åŸæ–‡ä»¶","date":"2017-03-13T16:00:00.000Z","updated":"2021-07-14T03:02:51.611Z","comments":true,"path":"2017/03/14/318Gitå‘½ä»¤é›†åäºŒâ€”â€”åˆ‡æ¢åˆ†æ”¯ä¸è¿˜åŸæ–‡ä»¶/","link":"","permalink":"http://huishao.cc/2017/03/14/318Gitå‘½ä»¤é›†åäºŒâ€”â€”åˆ‡æ¢åˆ†æ”¯ä¸è¿˜åŸæ–‡ä»¶/","excerpt":"","text":"Gitå‘½ä»¤é›†åäºŒâ€”â€”åˆ‡æ¢åˆ†æ”¯ä¸è¿˜åŸæ–‡ä»¶1.git checkout åˆ‡æ¢å½“å‰å·¥ä½œåˆ†æ”¯ã€‚ 2.git checkout -b æ–°å»ºä¸€ä¸ªåˆ†æ”¯å¹¶åˆ‡æ¢åˆ°æ­¤åˆ†æ”¯ã€‚å¦‚æœåˆ†æ”¯å·²ç»å­˜åœ¨ä¼šæŠ¥é”™ã€‚ 3.git checkout -B æ–°å»ºä¸€ä¸ªåˆ†æ”¯å¹¶åˆ‡æ¢åˆ°æ­¤åˆ†æ”¯ã€‚å¦‚æœåˆ†æ”¯å·²ç»å­˜åœ¨åˆ™ç›´æ¥è¿›è¡Œåˆ‡æ¢ã€‚ 4.git checkout â€“merge åˆ‡æ¢åˆ†æ”¯ï¼Œå¦‚æœå½“å‰åˆ†æ”¯æœ‰æœªæäº¤çš„æ–‡ä»¶ï¼Œåˆ™ä¼šè‡ªåŠ¨è¿›è¡Œåˆå¹¶æ“ä½œã€‚ 5.git checkout å°†ä¿®æ”¹è¿‡ä½†æ˜¯æœªä½¿ç”¨addå‘½ä»¤æ›´æ–°åˆ°ç¼“å­˜åŒºçš„æ–‡ä»¶è¿˜åŸã€‚","categories":[{"name":"GIT","slug":"GIT","permalink":"http://huishao.cc/categories/GIT/"}],"tags":[],"keywords":[{"name":"GIT","slug":"GIT","permalink":"http://huishao.cc/categories/GIT/"}]},{"title":"Gitå‘½ä»¤é›†åä¸€â€”â€”åˆ›å»ºåˆ†æ”¯å‘½ä»¤","slug":"317Gitå‘½ä»¤é›†åä¸€â€”â€”åˆ›å»ºåˆ†æ”¯å‘½ä»¤","date":"2017-03-12T16:00:00.000Z","updated":"2021-07-14T03:02:01.435Z","comments":true,"path":"2017/03/13/317Gitå‘½ä»¤é›†åä¸€â€”â€”åˆ›å»ºåˆ†æ”¯å‘½ä»¤/","link":"","permalink":"http://huishao.cc/2017/03/13/317Gitå‘½ä»¤é›†åä¸€â€”â€”åˆ›å»ºåˆ†æ”¯å‘½ä»¤/","excerpt":"","text":"Gitå‘½ä»¤é›†åä¸€â€”â€”åˆ›å»ºåˆ†æ”¯å‘½ä»¤å¯¹åˆ†æ”¯æ“ä½œçš„å¼ºå¤§æ”¯æŒæ˜¯Gitç®¡ç†å·¥å…·çš„ä¸€å¤§ä¼˜åŠ¿ã€‚ä½ å¯ä»¥æ–¹ä¾¿çš„è¿›è¡Œåˆ†æ”¯çš„åˆ›å»ºã€åˆå¹¶ã€åˆ é™¤ç­‰ã€‚ 1.git branch â€“listæ‰“å°æ‰€æœ‰åˆ†æ”¯ä»¥åŠå½“å‰æ‰€åœ¨çš„åˆ†æ”¯ã€‚ 2.git branch åˆ›å»ºæ–°åˆ†æ”¯ã€‚ 3.git branch â€“delete åˆ é™¤ä¸€ä¸ªåˆ†æ”¯ã€‚ 4.git branch â€“color â€¦è®¾ç½®è¾“å‡ºå¤šé¢œè‰²é£æ ¼ã€‚ 5.git branch â€“no-color â€¦è®¾ç½®è¾“å‡ºæ— é¢œè‰²é£æ ¼ã€‚ 6.git branch â€“allè¾“å‡ºæ‰€æœ‰è¿œç¨‹å’Œæœ¬åœ°åˆ†æ”¯ã€‚ 7.git branch â€“containsåªæ‰“å°å‡ºåŒ…å«æŸä¸ªcommitæäº¤çš„åˆ†æ”¯ã€‚ 8.git branch â€“mergedåªæ‰“å°å‡ºåŒ…å«æŸä¸ªæäº¤çš„åˆ†æ”¯ã€‚ 9.git branch â€“no-mergedåªæ‰“å°å‡ºä¸åŒ…å«æŸæ¬¡æäº¤çš„åˆ†æ”¯ã€‚ 10.git branch -m ä¿®æ”¹å·²ç»å­˜åœ¨çš„åˆ†æ”¯åç§°ã€‚","categories":[{"name":"GIT","slug":"GIT","permalink":"http://huishao.cc/categories/GIT/"}],"tags":[],"keywords":[{"name":"GIT","slug":"GIT","permalink":"http://huishao.cc/categories/GIT/"}]},{"title":"è®©ä½ çš„iOSåº”ç”¨ç¨‹åºæ”¯æŒè¿è¡ŒJavaScriptè„šæœ¬ï¼šJavaScriptCoreæ¡†æ¶è¯¦è§£","slug":"316è®©ä½ çš„iOSåº”ç”¨ç¨‹åºæ”¯æŒè¿è¡ŒJavaScriptè„šæœ¬ï¼šJavaScriptCoreæ¡†æ¶è¯¦è§£","date":"2017-03-09T16:00:00.000Z","updated":"2021-07-14T03:01:16.429Z","comments":true,"path":"2017/03/10/316è®©ä½ çš„iOSåº”ç”¨ç¨‹åºæ”¯æŒè¿è¡ŒJavaScriptè„šæœ¬ï¼šJavaScriptCoreæ¡†æ¶è¯¦è§£/","link":"","permalink":"http://huishao.cc/2017/03/10/316è®©ä½ çš„iOSåº”ç”¨ç¨‹åºæ”¯æŒè¿è¡ŒJavaScriptè„šæœ¬ï¼šJavaScriptCoreæ¡†æ¶è¯¦è§£/","excerpt":"","text":"è®©ä½ çš„iOSåº”ç”¨ç¨‹åºæ”¯æŒè¿è¡ŒJavaScriptè„šæœ¬ï¼šJavaScriptCoreæ¡†æ¶è¯¦è§£è¯´åˆ°JavaScriptè„šæœ¬ï¼ŒiOSå¼€å‘è€…éƒ½ä¼šæƒ³åˆ°ä¸€ä¸ªåå«JavaScriptCoreçš„æ¡†æ¶ã€‚è¿™ä¸ªæ¡†æ¶çš„ç¡®ååˆ†å¼ºå¤§ï¼Œå…¶ä¸­å°è£…äº†ä¸€å¥—JavaScriptè¿è¡Œç¯å¢ƒä»¥åŠNativeä¸JSæ•°æ®ç±»å‹ä¹‹é—´çš„è½¬æ¢æ¡¥æ¢ã€‚æœ¬ç¯‡åšå®¢ä¸»è¦è®¨è®ºå¦‚ä½•ä½¿ç”¨æ­¤æ¡†æ¶æ¥åœ¨iOSåº”ç”¨ä¸­è¿è¡ŒJavaScriptè„šæœ¬ã€‚ ä¸€ã€JavaScriptCoreæ¡†æ¶ç»“æ„åœ¨å­¦ä¹ ä¸€ä¸ªæ¡†æ¶æ—¶ï¼Œé¦–å…ˆåº”è¯¥å…ˆäº†è§£æ•´ä¸ªæ¡†æ¶çš„ç»“æ„ï¼Œæ‹¿iOSå¼€å‘æ¥ä¸¾ä¾‹ï¼Œå¯¹äºä¸€ä¸ªé™Œç”Ÿçš„æ¡†æ¶ï¼Œç¬¬ä¸€æ­¥éœ€è¦å…ˆææ¸…æ¥šè¿™é‡Œé¢éƒ½åŒ…å«å“ªäº›ç±»ï¼Œä¸ªå„ç±»ä¹‹é—´æ˜¯æ€æ ·çš„å…³ç³»ï¼Œè¿™ä¸ªæ¡†æ¶å’Œå…¶ä»–çš„æ¡†æ¶é—´æœ‰æ— è”ç³»ä»¥åŠæ€æ ·äº§ç”Ÿçš„è”ç³»ã€‚å°†äº›é—®é¢˜ææ¸…æ¥šï¼Œæœ‰äº†å¤§ä½“ä¸Šçš„è®¤è¯†åï¼Œæˆ‘ä»¬å†æ¥å­¦ä¹ å…¶ä¸­çš„æ¯ä¸ªç±»å³å…¶ä»–ç»†èŠ‚çš„åº”ç”¨å°†éå¸¸å®¹æ˜“ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€å¼ JavaScriptCoreæ¡†æ¶çš„ç»“æ„å›¾ï¼š è¿™å¼ å›¾æ˜¯æˆ‘æ‰‹å·¥ç”»çš„ï¼Œä¸æ˜¯é‚£ä¹ˆç¾è§‚å¹¶ä¸”æ²¡æœ‰æ–‡å­—çš„è§£é‡Šï¼Œä½†æ˜¯æˆ‘è§‰å¾—å®ƒèƒ½éå¸¸ç›´è§‚çš„è¡¨è¾¾JavaScriptCoreä¸­åŒ…å«çš„ç±»ä¹‹é—´çš„å…³ç³»ã€‚ä¸‹é¢æˆ‘æ¥å‘ä½ è§£é‡Šè¿™å¼ å›¾ç©¶ç«Ÿè¡¨è¾¾äº†ä»€ä¹ˆæ„æ€ï¼Œé¦–å…ˆåŸç”Ÿçš„iOSåº”ç”¨æ˜¯æ”¯æŒå¤šçº¿ç¨‹æ‰§è¡Œä»»åŠ¡çš„ï¼Œæˆ‘ä»¬çŸ¥é“JavaScriptæ˜¯å•çº¿ç¨‹ï¼Œä½†è¿™å¹¶ä¸ä»£è¡¨æˆ‘ä»¬ä¸èƒ½åœ¨Nativeä¸­å¼‚æ­¥æ‰§è¡Œä¸åŒçš„JavaScriptä»£ç ã€‚ 1.JSVirtualMachineâ€”â€”JavaScriptçš„è™šæ‹Ÿæœº JavaScriptCoreä¸­æä¾›äº†ä¸€ä¸ªåä¸ºJSVirtualMachineçš„ç±»ï¼Œé¡¾åæ€ä¹‰ï¼Œè¿™ä¸ªç±»å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªJSè™šæ‹Ÿæœºã€‚åœ¨Nativeä¸­ï¼Œåªè¦ä½ æ„¿æ„ï¼Œä½ å¯ä»¥åˆ›å»ºä»»æ„å¤šä¸ªJSVirtualMachineå¯¹è±¡ï¼Œå„ä¸ªJSViretualMachineå¯¹è±¡é—´æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œä»–ä»¬ä¹‹é—´ä¸èƒ½å…±äº«æ•°æ®ä¹Ÿä¸èƒ½ä¼ é€’æ•°æ®ï¼Œå¦‚æœä½ æŠŠä»–ä»¬æ”¾åœ¨ä¸åŒçš„Nativeçº¿ç¨‹ï¼Œä»–ä»¬å°±å¯ä»¥å¹¶è¡Œçš„æ‰§è¡Œæ— å…³çš„JSä»»åŠ¡ã€‚ 2.JSContextâ€”â€”JavaScriptè¿è¡Œç¯å¢ƒ JSContextä¸Šä¸‹æ–‡å¯¹è±¡å¯ä»¥ç†è§£ä¸ºæ˜¯JSçš„è¿è¡Œç¯å¢ƒï¼ŒåŒä¸€ä¸ªJSVirtualMachineå¯¹è±¡å¯ä»¥å…³è”å¤šä¸ªJSContextå¯¹è±¡ï¼Œå¹¶ä¸”åœ¨WebViewä¸­æ¯æ¬¡åˆ·æ–°æ“ä½œåï¼Œæ­¤WebViewçš„JSè¿è¡Œç¯å¢ƒéƒ½æ˜¯ä¸åŒçš„JSContextå¯¹è±¡ã€‚å…¶ä½œç”¨å°±æ˜¯ç”¨æ¥æ‰§è¡ŒJSä»£ç ï¼Œåœ¨Nativeå’ŒJSé—´è¿›è¡Œæ•°æ®çš„ä¼ é€’ã€‚ 3.JSValueâ€”â€”JavaScriptå€¼å¯¹è±¡ JavaScriptå’ŒObjective-Cè™½ç„¶éƒ½æ˜¯é¢å‘å¯¹è±¡è¯­è¨€ï¼Œä½†å…¶å®ç°æœºåˆ¶å®Œå…¨ä¸åŒï¼ŒOCæ˜¯åŸºäºç±»çš„ï¼ŒJSæ˜¯åŸºäºåŸå‹çš„ï¼Œå¹¶ä¸”ä»–ä»¬çš„æ•°æ®ç±»å‹é—´ä¹Ÿå­˜åœ¨å¾ˆå¤§çš„å·®å¼‚ã€‚å› æ­¤è‹¥è¦åœ¨Nativeå’ŒJSé—´æ— éšœç¢çš„è¿›è¡Œæ•°æ®çš„ä¼ é€’ï¼Œå°±éœ€è¦ä¸€ä¸ªä¸­é—´å¯¹è±¡åšæ¡¥æ¥ï¼Œè¿™ä¸ªå¯¹è±¡å°±æ˜¯JSValueã€‚ 4.JSExport JSExportæ˜¯ä¸€ä¸ªåè®®ï¼ŒNativeä¸­éµå®ˆæ­¤è§£æçš„ç±»å¯ä»¥å°†æ–¹æ³•å’Œå±æ€§è½¬æ¢ä¸ºJSçš„æ¥å£ä¾›JSè°ƒç”¨ã€‚ 5.ä¸€äº›ç”¨äºCè¯­è¨€çš„ç»“æ„ ä½ ä¸€å®šæ³¨æ„åˆ°äº†ï¼Œä¸Šå›¾çš„å³ä¸‹è§’è¿˜æœ‰ä¸€å—è¢«è™šçº¿åŒ…å›´çš„åŒºåŸŸï¼Œå…¶ä¸­çš„&quot;ç±»&quot;éƒ½æ˜¯Cè¯­è¨€é£æ ¼ï¼ŒJavaScriptCoreæ¡†æ¶æ˜¯æ”¯æŒåœ¨Objective-Cã€Swiftå’ŒCä¸‰ç§è¯­è¨€ä¸­ä½¿ç”¨çš„ã€‚ äºŒã€åœ¨Nativeä¸­è¿è¡ŒJavaScriptè„šæœ¬ä»£ç æˆ‘ä»¬å…ˆæ¥ç¼–å†™ä¸€ä¸ªæœ€ç®€å•çš„ä¾‹å­ï¼Œä½¿ç”¨OCä»£ç æ¥æ‰§è¡Œä¸€æ®µJSè„šæœ¬ã€‚é¦–å…ˆæ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œå°†å…¶åç¼€è®¾ç½®ä¸º.jsï¼Œæˆ‘è¿™é‡Œå°†å®ƒå‘½ä»¤ä¸ºmain.jsï¼Œåœ¨å…¶ä¸­ç¼–å†™å¦‚ä¸‹ä»£ç ï¼š 123(function()&#123; console.log(\"Hello Native\");&#125;)(); ä¸Šé¢æ˜¯ä¸€ä¸ªè‡ªæ‰§è¡Œçš„å‡½æ•°ï¼Œå…¶ä¸­æ‰“å°äº†â€œHello Nativeâ€å­—ç¬¦ä¸²ã€‚åœ¨Nativeä¸­ç¼–å†™å¦‚ä¸‹ä»£ç ï¼š 12345678- (void)viewDidLoad &#123; [super viewDidLoad]; NSString * path = [[NSBundle mainBundle] pathForResource:@\"main\" ofType:@\"js\"]; NSData * jsData = [[NSData alloc]initWithContentsOfFile:path]; NSString * jsCode = [[NSString alloc]initWithData:jsData encoding:NSUTF8StringEncoding]; self.jsContext = [[JSContext alloc]init]; [self.jsContext evaluateScript:jsCode];&#125; éœ€è¦æ³¨æ„ï¼Œå…¶å®è¿™é‡Œæˆ‘å°†åˆ›å»ºçš„JSContextå¯¹è±¡ä½œä¸ºäº†å½“å‰è§†å›¾æ§åˆ¶å™¨çš„å±æ€§ï¼Œè¿™æ ·åšçš„ç›®çš„ä»…ä»…æ˜¯ä¸ºäº†æ–¹ä¾¿è°ƒè¯•ï¼Œä¸è¿‡ä¸å¯¹æ­¤contextå¯¹è±¡è¿›è¡Œå¼•ç”¨ï¼Œå½“viewDidLoadå‡½æ•°æ‰§è¡Œå®Œæˆåï¼ŒJSè¿è¡Œç¯å¢ƒä¹Ÿå°†è¢«é”€æ¯ï¼Œæˆ‘ä»¬å°±æ— æ³•åœ¨Safariä¸­ç›´è§‚çš„çœ‹åˆ°JSä»£ç çš„æ‰§è¡Œç»“æœäº†ã€‚ è¿è¡Œå·¥ç¨‹ï¼Œè®°å¾—è¦æ‰“å¼€Safariæµè§ˆå™¨çš„è‡ªåŠ¨æ˜¾ç¤ºJSContentæ£€æŸ¥å™¨ï¼Œå¦‚ä¸‹å›¾ï¼š å½“iOSæ¨¡æ‹Ÿå™¨è·‘èµ·æ¥åï¼ŒSafariä¼šè‡ªåŠ¨å¼¹å‡ºå¼€å‘è€…å·¥å…·ï¼Œåœ¨æ§åˆ¶å°é‡Œé¢å¯ä»¥çœ‹åˆ°æ¥è‡ªJavaScriptçš„çœŸæŒšé—®å€™ï¼š åˆšæ‰æˆ‘ä»¬åªæ˜¯ç®€å•äº†é€šè¿‡åŸç”Ÿè°ƒç”¨äº†ä¸€æ®µJSä»£ç ï¼Œä½†æ˜¯å¦‚æœNativeåœ¨è°ƒJSæ–¹æ³•æ—¶æ— æ³•ä¼ å‚é‚£ä¹Ÿå¤ªlowäº†ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å°†è¦ä¼ é€’çš„å‚æ•°æ ¼å¼åŒ–åˆ°å­—ç¬¦ä¸²ä¸­ï¼Œä¿®æ”¹main.jsæ–‡ä»¶å¦‚ä¸‹ï¼š 1234function put(name)&#123; console.log(\"Hello \"+name);&#125;;put(%@); å†å°è£…ä¸€ä¸ªOCæ–¹æ³•å¦‚ä¸‹ï¼š 1234567-(void)runJS_Hello:(NSString *)name&#123; NSString * path = [[NSBundle mainBundle] pathForResource:@\"main\" ofType:@\"js\"]; NSData * jsData = [[NSData alloc]initWithContentsOfFile:path]; NSString * jsCode = [[NSString alloc]initWithData:jsData encoding:NSUTF8StringEncoding]; NSString * finiString = [NSString stringWithFormat:jsCode,name]; [self.jsContext evaluateScript:finiString];&#125; åœ¨viewDidLoadä¸­è¿›è¡Œè°ƒç”¨ï¼Œå¦‚ä¸‹ï¼š 12345- (void)viewDidLoad &#123; [super viewDidLoad]; self.jsContext = [[JSContext alloc]init]; [self runJS_Hello:@\"'é˜¿å‡¡è¾¾'\"];&#125; è¿è¡Œå†çœ‹Safariæ§åˆ¶å°çš„ç»“æœï¼Œç¼–ç¨‹äº†Hello é˜¿å‡¡è¾¾~ï¼š å…¶å®evaluateScriptå‡½æ•°æ‰§è¡Œåä¼šå°†JSä»£ç çš„æ‰§è¡Œç»“æœè¿›è¡Œè¿”å›ï¼Œæ˜¯JSValueç±»å‹çš„å¯¹è±¡ï¼Œåé¢ä¼šå†ä»‹ç»ã€‚ ä¸‰ã€åœ¨JavaScriptä¸­è°ƒç”¨Nativeæ–¹æ³•æœ‰æ¥æ— å¾€éå›å­ï¼ŒåŒæ ·ä¹Ÿå¯ä»¥åœ¨åŸç”Ÿä¸­ç¼–å†™æ–¹æ³•è®©JSæ¥è°ƒç”¨ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678- (void)viewDidLoad &#123; [super viewDidLoad]; void(^block)() = ^()&#123; NSLog(@\"Hello JavaScript\"); &#125;; self.jsContext = [[JSContext alloc]init]; [self.jsContext setObject:block forKeyedSubscript:@\"oc_hello\"];&#125; ä¸Šé¢setObject:forKeyedSubscript:æ–¹æ³•ç”¨æ¥å‘JSContextç¯å¢ƒçš„å…¨å±€å¯¹è±¡ä¸­æ·»åŠ å±æ€§ï¼Œè¿™é‡Œæ·»åŠ äº†ä¸€ä¸ªå‡½æ•°å±æ€§ï¼Œå–åä¸ºoc_helloã€‚è¿™é‡ŒJavaScriptCoreä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬æŠŠä¸€äº›æ•°æ®ç±»å‹è¿›è¡Œè½¬æ¢ï¼Œä¼šå°†OCçš„å‡½æ•°è½¬æ¢ä¸ºJSçš„å‡½æ•°ï¼Œè¿è¡Œå·¥ç¨‹ï¼Œåœ¨Safariçš„æ§åˆ¶å°ä¸­è°ƒç”¨oc_helloå‡½æ•°ï¼Œå¯ä»¥çœ‹åˆ°åœ¨Xcodeæ§åˆ¶å°è¾“å‡ºäº†å¯¹JavaScriptçš„çœŸæŒšé—®å€™ï¼Œå¦‚ä¸‹ï¼š åŒæ ·ï¼Œå¦‚æœå£°æ˜çš„blockæ˜¯å¸¦å‚æ•°çš„ï¼ŒJSåœ¨è°ƒç”¨æ­¤OCæ–¹æ³•æ—¶ä¹Ÿéœ€è¦ä¼ å…¥å‚æ•°ï¼Œå¦‚æœblockæœ‰è¿”å›å€¼ï¼Œåˆ™åœ¨JSä¸­ä¹Ÿèƒ½è·å–åˆ°è¿”å›å€¼ï¼Œä¾‹å¦‚ï¼š 123456BOOL (^block)(NSString *) = ^(NSString *name)&#123; NSLog(@\"%@\", [NSString stringWithFormat:@\"Hello %@\",name]); return YES;&#125;;self.jsContext = [[JSContext alloc]init];[self.jsContext setObject:block forKeyedSubscript:@\"oc_hello\"]; å››ã€æ·±å…¥JSContextç±»çœ‹åˆ°è¿™ï¼Œä½ å·²ç»å­¦ä¼šæœ€åŸºç¡€çš„OCä¸JSäº’ç›¸é—®å¥½(äº¤äº’)ã€‚ä¸‹é¢æˆ‘ä»¬å†æ¥æ·±å…¥çœ‹ä¸‹JSContextä¸­çš„å±æ€§å’Œæ–¹æ³•ã€‚ åˆ›å»ºJSContextå¯¹è±¡æœ‰å¦‚ä¸‹ä¸¤ç§æ–¹å¼ï¼š 1234//åˆ›å»ºä¸€ä¸ªæ–°çš„JSè¿è¡Œç¯å¢ƒ- (instancetype)init;//åˆ›å»ºä¸€ä¸ªæ–°çš„JSè¿è¡Œç¯å¢ƒ å¹¶å…³è”åˆ°æŸä¸ªè™šæ‹Ÿæœºå¯¹è±¡ä¸Š- (instancetype)initWithVirtualMachine:(JSVirtualMachine *)virtualMachine; æ‰§è¡ŒJSä»£ç æœ‰å¦‚ä¸‹ä¸¤ä¸ªæ–¹æ³•ï¼š 1234//æ‰§è¡ŒJSä»£ç  ç»“æœå°†å°è£…æˆJSValueå¯¹è±¡è¿”å›- (JSValue *)evaluateScript:(NSString *)script;//ä½œç”¨åŒä¸Š- (JSValue *)evaluateScript:(NSString *)script withSourceURL:(NSURL *)sourceURL NS_AVAILABLE(10_10, 8_0); ä¸‹é¢çš„å±æ€§å’Œæ–¹æ³•å¯ä»¥è·å–åˆ°JSè¿è¡Œç¯å¢ƒä¸­çš„ä¸€äº›ä¿¡æ¯ï¼š 1234567891011121314151617181920212223242526//å½“å‰çš„JSè¿è¡Œç¯å¢ƒ å½“JSè°ƒç”¨OCæ–¹æ³•æ—¶ï¼Œåœ¨OCæ–¹æ³•ä¸­å¯ä»¥ç”¨æ­¤æ–¹æ³•è·å–åˆ°JSè¿è¡Œç¯å¢ƒ+ (JSContext *)currentContext;//è·å–å½“å‰æ‰§è¡Œçš„JSå‡½æ•°ï¼Œå½“JSè°ƒç”¨OCæ–¹æ³•æ—¶ï¼Œåœ¨OCæ–¹æ³•ä¸­å¯ä»¥ç”¨æ­¤æ–¹æ³•è·å–åˆ°æ‰§è¡Œçš„å‡½æ•°+ (JSValue *)currentCallee;//è·å–å½“å‰æ‰§è¡Œçš„JSå‡½æ•°ä¸­çš„thisæŒ‡å‘çš„å¯¹è±¡+ (JSValue *)currentThis;//è·å–å½“å‰æ‰§è¡Œå‡½æ•°çš„å‚æ•°åˆ—è¡¨ï¼Œå½“JSè°ƒç”¨OCæ–¹æ³•æ—¶ï¼Œåœ¨OCæ–¹æ³•ä¸­å¯ä»¥ç”¨æ­¤æ–¹æ³•è·å–åˆ°æ‰§è¡Œçš„å‡½æ•°çš„å‚æ•°åˆ—è¡¨+ (NSArray *)currentArguments;//è·å–å½“å‰JSè¿è¡Œç¯å¢ƒçš„å…¨å±€å¯¹è±¡@property (readonly, strong) JSValue *globalObject;//å½“è¿è¡Œçš„JavaScriptä»£ç æŠ›å‡ºäº†æœªæ•è·çš„å¼‚å¸¸æ—¶ï¼Œè¿™ä¸ªå±æ€§ä¼šè¢«èµ‹å€¼ä¸ºæŠ›å‡ºçš„å¼‚å¸¸@property (strong) JSValue *exception;//è®¾ç½®ä¸ºä¸€ä¸ªå¼‚å¸¸æ•è·çš„blockï¼Œå¦‚æœå¼‚å¸¸è¢«æ­¤blockæ•è·ï¼Œexceptionå±æ€§å°±ä¸å†è¢«èµ‹å€¼äº†@property (copy) void(^exceptionHandler)(JSContext *context, JSValue *exception);//å½“å‰è¿è¡Œç¯å¢ƒæ‰€å…³è”çš„è™šæ‹Ÿæœº@property (readonly, strong) JSVirtualMachine *virtualMachine;//å½“å‰è¿è¡Œç¯å¢ƒåç§°@property (copy) NSString *name;//è·å–å½“å‰JSè¿è¡Œç¯å¢ƒå…¨å±€å¯¹è±¡ä¸Šçš„æŸä¸ªå±æ€§- (JSValue *)objectForKeyedSubscript:(id)key;//è®¾ç½®å½“å‰JSè¿è¡Œç¯å¢ƒå…¨å±€å¯¹è±¡ä¸Šçš„å±æ€§- (void)setObject:(id)object forKeyedSubscript:(NSObject &lt;NSCopying&gt; *)key;//å°†Cè¯­è¨€ç¯å¢ƒçš„JSè¿è¡Œç¯å¢ƒè½¬æ¢ä¸ºOCç¯å¢ƒçš„JSè¿è¡Œç¯å¢ƒ+ (JSContext *)contextWithJSGlobalContextRef:(JSGlobalContextRef)jsGlobalContextRef;//Cè¯­è¨€ç¯å¢ƒçš„JSè¿è¡Œä¸Šä¸‹æ–‡@property (readonly) JSGlobalContextRef JSGlobalContextRef; äº”ã€æ·±å…¥JSValueç±»JSValueæ˜¯JavaScriptä¸Objective-Cä¹‹é—´çš„æ•°æ®æ¡¥æ¢ã€‚åœ¨Objective-Cä¸­è°ƒç”¨JSè„šæœ¬æˆ–è€…JSè°ƒç”¨OCæ–¹æ³•éƒ½å¯ä»¥ä½¿ç”¨JSValueæ¥ä¼ è¾“æ•°æ®ã€‚å…¶ä¸­å±æ€§å’Œæ–¹æ³•ç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324//æ‰€å¯¹åº”çš„JSè¿è¡Œç¯å¢ƒ@property (readonly, strong) JSContext *context;//åœ¨æŒ‡å®šçš„JSè¿è¡Œç¯å¢ƒä¸­åˆ›å»ºä¸€ä¸ªJSValueå¯¹è±¡+ (JSValue *)valueWithObject:(id)value inContext:(JSContext *)context;//åˆ›å»ºå¸ƒå°”å€¼+ (JSValue *)valueWithBool:(BOOL)value inContext:(JSContext *)context;//åˆ›å»ºæµ®ç‚¹å€¼+ (JSValue *)valueWithDouble:(double)value inContext:(JSContext *)context;//åˆ›å»º32ä½æ•´å‹å€¼+ (JSValue *)valueWithInt32:(int32_t)value inContext:(JSContext *)context;//åˆ›å»º32ä½æ— ç¬¦å·æ•´å½¢å€¼+ (JSValue *)valueWithUInt32:(uint32_t)value inContext:(JSContext *)context;//åˆ›å»ºç©ºçš„JSå¯¹è±¡+ (JSValue *)valueWithNewObjectInContext:(JSContext *)context;//åˆ›å»ºç©ºçš„JSæ•°ç»„+ (JSValue *)valueWithNewArrayInContext:(JSContext *)context;//åˆ›å»ºJSæ­£åˆ™å¯¹è±¡+ (JSValue *)valueWithNewRegularExpressionFromPattern:(NSString *)pattern flags:(NSString *)flags inContext:(JSContext *)context;//åˆ›å»ºJSé”™è¯¯ä¿¡æ¯+ (JSValue *)valueWithNewErrorFromMessage:(NSString *)message inContext:(JSContext *)context;//åˆ›å»ºJS nullå€¼+ (JSValue *)valueWithNullInContext:(JSContext *)context;//åˆ›å»ºJS undefinedå€¼+ (JSValue *)valueWithUndefinedInContext:(JSContext *)context; JavaScriptä¸­çš„æ•°æ®ç±»å‹å’ŒObjective-Cçš„æ•°æ®ç±»å‹è¿˜æ˜¯æœ‰ç€å¾ˆå¤§çš„å·®å¼‚ï¼Œå…¶ä¸­å¯¹åº”å…³ç³»å¦‚ä¸‹ï¼š | Objective-C | JavaScript || nil | undefined || NSNull | null || NSString | string || NSNumber | number boolean || NSDictionary | Object || NSArray | Array || NSDate | Date || Block | Function || id | Object || Class | Object | ä¸‹é¢è¿™äº›æ–¹æ³•å¯ä»¥å°†JSValueå€¼è½¬æ¢ä¸ºObjective-Cä¸­çš„æ•°æ®ç±»å‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192//å°†JSValueè½¬æ¢ä¸ºOCå¯¹è±¡- (id)toObject;//å°†JSValueè½¬æ¢æˆç‰¹å®šOCç±»çš„å¯¹è±¡- (id)toObjectOfClass:(Class)expectedClass;//å°†JSValueè½¬æ¢æˆå¸ƒå°”å€¼- (BOOL)toBool;//å°†JSValueè½¬æ¢æˆæµ®ç‚¹å€¼- (double)toDouble;//å°†JSValueè½¬æ¢æˆ32ä½æ•´å‹å€¼- (int32_t)toInt32;//å°†JSValueè½¬æ¢æˆ32ä½æ— ç¬¦å·æ•´å‹å€¼- (uint32_t)toUInt32;//å°†JSValueè½¬æ¢æˆNSNumberå€¼- (NSNumber *)toNumber;//å°†JSValueè½¬æ¢æˆNSStringå€¼- (NSString *)toString;//å°†JSValueè½¬æ¢æˆNSDateå€¼- (NSDate *)toDate;//å°†JSValueè½¬æ¢æˆNSArrayå€¼- (NSArray *)toArray;//å°†JSValueè½¬æ¢æˆNSDictionaryå€¼- (NSDictionary *)toDictionary;//è·å–JSValueå¯¹è±¡ä¸­æŸä¸ªå±æ€§çš„å€¼- (JSValue *)valueForProperty:(NSString *)property;//è®¾ç½®JSValueå¯¹è±¡ä¸­æŸä¸ªå±æ€§çš„å€¼- (void)setValue:(id)value forProperty:(NSString *)property;//åˆ é™¤JSValueå¯¹è±¡ä¸­çš„æŸä¸ªå±æ€§- (BOOL)deleteProperty:(NSString *)property;//åˆ¤æ–­JSValueå¯¹è±¡ä¸­æ˜¯å¦åŒ…å«æŸä¸ªå±æ€§- (BOOL)hasProperty:(NSString *)property;//å®šä¹‰JSValueä¸­çš„æŸä¸ªå±æ€§ è¿™ä¸ªæ–¹æ³•å’ŒJavaScriptä¸­Objectæ„é€ å‡½æ•°çš„definePropertyæ–¹æ³•ä¸€è‡´/*ç¬¬2ä¸ªå‚æ•°è®¾ç½®æ­¤å±æ€§çš„æè¿°ä¿¡æ¯ å¯ä»¥è®¾ç½®çš„é”®å€¼å¦‚ä¸‹ï¼šNSString * const JSPropertyDescriptorWritableKey;//è®¾ç½®å¸ƒå°”å€¼ æ˜¯å¦å¯å†™NSString * const JSPropertyDescriptorEnumerableKey;//è®¾ç½®å¸ƒå°”å€¼ æ˜¯å¦å¯æšä¸¾NSString * const JSPropertyDescriptorConfigurableKey;//è®¾ç½®å¸ƒå°”å€¼ æ˜¯å¦å¯é…ç½®NSString * const JSPropertyDescriptorValueKey;//è®¾ç½®æ­¤å±æ€§çš„å€¼NSString * const JSPropertyDescriptorGetKey;//è®¾ç½®æ­¤å±æ€§çš„getæ–¹æ³•NSString * const JSPropertyDescriptorSetKey;//è®¾ç½®æ­¤å±æ€§çš„setæ–¹æ³•ä»¥ä¸Šsetã€getæ–¹æ³•çš„é”®å’Œvalueã€å¯å†™æ€§çš„é”®ä¸èƒ½åŒæ—¶å­˜åœ¨ï¼Œå…¶è¯­æ³•æ˜¯JavaScriptä¿æŒä¸€è‡´*/- (void)defineProperty:(NSString *)property descriptor:(id)descriptor;//è·å–JSæ•°ç»„å¯¹è±¡æŸä¸ªä¸‹æ ‡çš„å€¼- (JSValue *)valueAtIndex:(NSUInteger)index;//è®¾ç½®JSæ•°ç»„å¯¹è±¡æŸä¸ªä¸‹æ ‡çš„å€¼- (void)setValue:(id)value atIndex:(NSUInteger)index;//åˆ¤æ–­æ­¤å¯¹è±¡æ˜¯å¦ä¸ºundefined@property (readonly) BOOL isUndefined;//åˆ¤æ–­æ­¤å¯¹è±¡æ˜¯å¦ä¸ºnull@property (readonly) BOOL isNull;//åˆ¤æ–­æ­¤å¯¹è±¡æ˜¯å¦ä¸ºå¸ƒå°”å€¼@property (readonly) BOOL isBoolean;//åˆ¤æ–­æ­¤å¯¹è±¡æ˜¯å¦ä¸ºæ•°å€¼@property (readonly) BOOL isNumber;//åˆ¤æ–­æ­¤å¯¹è±¡æ˜¯å¦ä¸ºå­—ç¬¦ä¸²@property (readonly) BOOL isString;//åˆ¤æ–­æ­¤å¯¹è±¡æ˜¯å¦ä¸ºobjectå¯¹è±¡@property (readonly) BOOL isObject;//åˆ¤æ–­æ­¤å¯¹è±¡æ˜¯å¦ä¸ºæ•°ç»„@property (readonly) BOOL isArray;//åˆ¤æ–­æ­¤å¯¹è±¡æ˜¯å¦ä¸ºæ—¥æœŸå¯¹è±¡@property (readonly) BOOL isDate;//æ¯”è¾ƒä¸¤ä¸ªJSValueæ˜¯å¦å…¨ç›¸ç­‰ å¯¹åº”JavaScriptä¸­çš„===- (BOOL)isEqualToObject:(id)value;//æ¯”è¾ƒä¸¤ä¸ªJSValueå¯¹è±¡çš„å€¼æ˜¯å¦ç›¸ç­‰ å¯¹åº”JavaScriptä¸­çš„==- (BOOL)isEqualWithTypeCoercionToObject:(id)value;//åˆ¤æ–­æŸä¸ªå¯¹è±¡æ˜¯å¦åœ¨å½“å‰å¯¹è±¡çš„åŸå‹é“¾ä¸Š- (BOOL)isInstanceOf:(id)value;//å¦‚æœJSValueæ˜¯Functionå¯¹è±¡ å¯ä»¥è°ƒç”¨æ­¤æ–¹æ³• å’ŒJavaScriptä¸­çš„callæ–¹æ³•ä¸€è‡´- (JSValue *)callWithArguments:(NSArray *)arguments;//å¦‚æœJSValueæ˜¯ä¸€ä¸ªæ„é€ æ–¹æ³•å¯¹è±¡ å¯ä»¥è°ƒç”¨æ­¤æ–¹æ³• å’ŒJavaScriptä¸­ä½¿ç”¨newå…³é”®å­—ä¸€è‡´- (JSValue *)constructWithArguments:(NSArray *)arguments;//ç”¨æ­¤å¯¹è±¡è¿›è¡Œå‡½æ•°çš„è°ƒç”¨ å½“å‰å¯¹è±¡ä¼šè¢«ç»‘å®šåˆ°thisä¸­- (JSValue *)invokeMethod:(NSString *)method withArguments:(NSArray *)arguments;//å°†CGPointè½¬æ¢ä¸ºJSValueå¯¹è±¡+ (JSValue *)valueWithPoint:(CGPoint)point inContext:(JSContext *)context;//å°†NSRangeè½¬æ¢ä¸ºJSValueå¯¹è±¡+ (JSValue *)valueWithRange:(NSRange)range inContext:(JSContext *)context;//å°†CGRectè½¬æ¢ä¸ºJSValueå¯¹è±¡+ (JSValue *)valueWithRect:(CGRect)rect inContext:(JSContext *)context;//å°†CGSizeè½¬æ¢ä¸ºJSValueå¯¹è±¡+ (JSValue *)valueWithSize:(CGSize)size inContext:(JSContext *)context;//è½¬æ¢æˆCGPointæ•°æ®- (CGPoint)toPoint;//è½¬æ¢æˆNSRangeæ•°æ®- (NSRange)toRange;//è½¬æ¢æˆCGRectæ•°æ®- (CGRect)toRect;//è½¬æ¢ä¸ºCGSizeæ•°æ®- (CGSize)toSize;//å°†Cé£æ ¼çš„JSValueRefå¯¹è±¡è½¬æ¢ä¸ºJSValueå¯¹è±¡+ (JSValue *)valueWithJSValueRef:(JSValueRef)value inContext:(JSContext *)context; å…¶å®åœ¨JavaScriptCoreæ¡†æ¶ä¸­è¿˜æœ‰ä¸€ä¸ªJSManagerValueç±»ï¼Œè¿™ä¸ªçš„ä¸»è¦ä½œç”¨æ˜¯ç®¡ç†å†…å­˜ã€‚è™½ç„¶æˆ‘ä»¬åœ¨ç¼–å†™Objective-Cä»£ç æ—¶æœ‰å¼ºå¤§çš„è‡ªåŠ¨å¼•ç”¨æŠ€æœ¯(ARCæŠ€æœ¯)ï¼Œæˆ‘ä»¬ä¸€èˆ¬æ— éœ€å…³å¿ƒå¯¹è±¡çš„å†…å­˜é—®é¢˜ï¼Œåœ¨ç¼–å†™JavaScriptä»£ç æ—¶ä¹Ÿæœ‰å¼ºå¤§çš„åƒåœ¾å›æ”¶æœºåˆ¶(è¿™ç§æœºåˆ¶ä¸‹ç”šè‡³è¿å¾ªç¯å¼•ç”¨éƒ½ä¸æ˜¯é—®é¢˜)ï¼Œä½†æ˜¯åœ¨OCå’ŒJSæ··åˆå¼€å‘æ—¶ï¼Œå°±å¾ˆå®¹æ˜“å‡ºç°é—®é¢˜äº†ï¼Œæ¯”å¦‚ä¸€ä¸ªJSåƒåœ¾å›æ”¶æœºåˆ¶é‡Šæ”¾æ‰çš„å¯¹è±¡OCä¸­å´è¿˜åœ¨ç”¨ï¼Œåè¿‡æ¥ä¹Ÿæ˜¯ä¸€æ ·ã€‚JSManagerValueå¯¹JSValueè¿›è¡Œäº†ä¸€å±‚åŒ…è£…ï¼Œå®ƒå¯ä»¥ä¿è¯åœ¨é€‚åˆæ—¶å€™ä½¿ç”¨è¿™ä¸ªå¯¹è±¡æ—¶å¯¹è±¡éƒ½ä¸ä¼šè¢«é‡Šæ”¾ï¼Œå…¶ä¸­æ–¹æ³•å¦‚ä¸‹ï¼š 123456//åˆ›å»ºJSVlaueå¯¹è±¡çš„åŒ…è£…JSManagerValue+ (JSManagedValue *)managedValueWithValue:(JSValue *)value;+ (JSManagedValue *)managedValueWithValue:(JSValue *)value andOwner:(id)owner;- (instancetype)initWithValue:(JSValue *)value;//è·å–æ‰€åŒ…è£…çš„JSValueå¯¹è±¡@property (readonly, strong) JSValue *value; å…­ã€Objective-Cä¸JavaScriptå¤æ‚å¯¹è±¡çš„æ˜ å°„æˆ‘ä»¬åœ¨ä½¿ç”¨JavaScriptè°ƒç”¨Objective-Cæ–¹æ³•çš„å®è´¨æ˜¯å°†ä¸€ä¸ªOCå‡½æ•°è®¾ç½®ä¸ºäº†JSå…¨å±€å¯¹è±¡çš„ä¸€ä¸ªå±æ€§ï¼Œå½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥è®¾ç½®éå‡½æ•°çš„å±æ€§æˆ–è€…ä»»æ„JSValue(æˆ–è€…å¯ä»¥è½¬æ¢ä¸ºJSValue)çš„å€¼ã€‚ä¾‹å¦‚ï¼š 123self.jsContext = [[JSContext alloc]init];//å‘JSå…¨å±€å¯¹è±¡ä¸­æ·»åŠ ä¸€ä¸ªè·å–å½“å‰Nativeè®¾å¤‡ç±»å‹çš„å±æ€§[self.jsContext setObject:@\"iOS\" forKeyedSubscript:@\"deviceType\"]; ä½†æ˜¯å¦‚æœæˆ‘ä»¬æƒ³æŠŠOCè‡ªå®šä¹‰çš„ä¸€ä¸ªç±»çš„å¯¹è±¡è®¾ç½®ä¸ºJSå…¨å±€å¯¹è±¡çš„æŸä¸ªå±æ€§ï¼ŒJSå’ŒOCæœ‰ç€å®Œå…¨ä¸åŒçš„å¯¹è±¡åŸç†ï¼Œå¦‚æœä¸åšä»»ä½•å¤„ç†ï¼ŒJSæ˜¯æ¥æ”¶ä¸åˆ°OCå¯¹è±¡ä¸­å®šä¹‰çš„å±æ€§å’Œæ–¹æ³•çš„ã€‚è¿™æ—¶å°±éœ€è¦ä½¿ç”¨åˆ°å‰é¢æåˆ°çš„JSExportåè®®ï¼Œéœ€è¦æ³¨æ„ï¼Œè¿™ä¸ªåè®®ä¸æ˜¯ç”¨æ¥è¢«ç±»éµå®ˆçš„ï¼Œå®ƒé‡Œé¢æ²¡æœ‰è§„å®šä»»ä½•æ–¹æ³•ï¼Œå…¶æ˜¯ç”¨æ¥è¢«ç»§æ‰¿å®šä¹‰æ–°çš„åè®®çš„ï¼Œè‡ªå®šä¹‰çš„åè®®ä¸­çº¦å®šçš„æ–¹æ³•å’Œå±æ€§å¯ä»¥åœ¨JSä¸­è¢«è·å–åˆ°ï¼Œç¤ºä¾‹å¦‚ä¸‹: OCä¸­æ–°å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„ç±»ï¼š 1234567891011121314151617181920@protocol MyObjectProtocol &lt;JSExport&gt;@property(nonatomic,strong)NSString * name;@property(nonatomic,strong)NSString * subject;@property(nonatomic,assign)NSInteger age;-(void)sayHi;@end@interface MyObject : NSObject&lt;MyObjectProtocol&gt;@property(nonatomic,strong)NSString * name;@property(nonatomic,strong)NSString * subject;@property(nonatomic,assign)NSInteger age;@end@implementation MyObject-(void)sayHi&#123; NSLog(@\"Hello JavaScript\");&#125;@end æ·»åŠ åˆ°JSå…¨å±€å¯¹è±¡ä¸­ï¼š 12345MyObject* object = [MyObject new];object.name = @\"Jaki\";object.age = 25;object.subject = @\"OC\";[jsContext setObject:object forKeyedSubscript:@\"deviceObject\"]; åœ¨JSè¿è¡Œç¯å¢ƒä¸­å¯ä»¥å®Œæ•´çš„åˆ°deviceObjectå¯¹è±¡ï¼Œå¦‚ä¸‹ï¼š ä¸ƒã€Cè¯­è¨€é£æ ¼çš„APIè§£é‡ŠJavaScriptCoreæ¡†æ¶ä¸­é™¤äº†åŒ…å«å®Œæ•´çš„Objective-Cå’ŒSwiftè¯­è¨€çš„APIå¤–ï¼Œä¹Ÿæä¾›äº†å¯¹Cè¯­è¨€çš„æ”¯æŒã€‚ ä¸JSè¿è¡Œç¯å¢ƒç›¸å…³çš„æ–¹æ³•å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627//åˆ›å»ºä¸€ä¸ªJSContextRefç»„/*JSContextRefç›¸å½“äºJSContextï¼ŒåŒä¸€ç»„ä¸­çš„æ•°æ®å¯ä»¥å…±äº«*/JSContextGroupRef JSContextGroupCreate(void);//å†…å­˜å¼•ç”¨JSContextGroupRef JSContextGroupRetain(JSContextGroupRef group);//å†…å­˜å¼•ç”¨é‡Šæ”¾void JSContextGroupRelease(JSContextGroupRef group);//åˆ›å»ºä¸€ä¸ªå…¨å±€çš„è¿è¡Œç¯å¢ƒJSGlobalContextRef JSGlobalContextCreate(JSClassRef globalObjectClass);//åŒä¸ŠJSGlobalContextRef JSGlobalContextCreateInGroup(JSContextGroupRef group, JSClassRef globalObjectClass);//å†…å­˜å¼•ç”¨JSGlobalContextRef JSGlobalContextRetain(JSGlobalContextRef ctx);//å†…å­˜å¼•ç”¨é‡Šæ”¾void JSGlobalContextRelease(JSGlobalContextRef ctx);//è·å–å…¨å±€å¯¹è±¡JSObjectRef JSContextGetGlobalObject(JSContextRef ctx);//è·å–JSContextRefç»„JSContextGroupRef JSContextGetGroup(JSContextRef ctx);//è·å–å…¨å±€çš„è¿è¡Œç¯å¢ƒJSGlobalContextRef JSContextGetGlobalContext(JSContextRef ctx);//è·å–è¿è¡Œç¯å¢ƒåJSStringRef JSGlobalContextCopyName(JSGlobalContextRef ctx);//è®¾ç½®è¿è¡Œç¯å¢ƒåvoid JSGlobalContextSetName(JSGlobalContextRef ctx, JSStringRef name); ä¸å®šä¹‰JSå¯¹è±¡çš„ç›¸å…³æ–¹æ³•å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465//å®šä¹‰JSç±»/*å‚æ•°JSClassDefinitionæ˜¯ä¸€ä¸ªç»“æ„ä½“ å…¶ä¸­å¯ä»¥å®šä¹‰è®¸å¤šå›è°ƒ*/JSClassRef JSClassCreate(const JSClassDefinition* definition);//å¼•ç”¨å†…å­˜JSClassRef JSClassRetain(JSClassRef jsClass);//é‡Šæ”¾å†…å­˜void JSClassRelease(JSClassRef jsClass);//åˆ›å»ºä¸€ä¸ªJSå¯¹è±¡JSObjectRef JSObjectMake(JSContextRef ctx, JSClassRef jsClass, void* data);//å®šä¹‰JSå‡½æ•°JSObjectRef JSObjectMakeFunctionWithCallback(JSContextRef ctx, JSStringRef name, JSObjectCallAsFunctionCallback callAsFunction);//å®šä¹‰æ„é€ å‡½æ•°JSObjectRef JSObjectMakeConstructor(JSContextRef ctx, JSClassRef jsClass, JSObjectCallAsConstructorCallback callAsConstructor);//å®šä¹‰æ•°ç»„JSObjectRef JSObjectMakeArray(JSContextRef ctx, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception);//å®šä¹‰æ—¥æœŸå¯¹è±¡JSObjectRef JSObjectMakeDate(JSContextRef ctx, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception);//å®šä¹‰å¼‚å¸¸å¯¹è±¡JSObjectRef JSObjectMakeError(JSContextRef ctx, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception);//å®šä¹‰æ­£åˆ™å¯¹è±¡JSObjectRef JSObjectMakeRegExp(JSContextRef ctx, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception);//å®šä¹‰å‡½æ•°å¯¹è±¡JSObjectRef JSObjectMakeFunction(JSContextRef ctx, JSStringRef name, unsigned parameterCount, const JSStringRef parameterNames[], JSStringRef body, JSStringRef sourceURL, int startingLineNumber, JSValueRef* exception);//è·å–å¯¹è±¡çš„å±æ€§JSValueRef JSObjectGetPrototype(JSContextRef ctx, JSObjectRef object);//è®¾ç½®å¯¹è±¡çš„å±æ€§void JSObjectSetPrototype(JSContextRef ctx, JSObjectRef object, JSValueRef value);//æ£€æŸ¥å¯¹è±¡æ˜¯å¦åŒ…å«æŸä¸ªå±æ€§bool JSObjectHasProperty(JSContextRef ctx, JSObjectRef object, JSStringRef propertyName);//è·å–å¯¹è±¡å±æ€§JSValueRef JSObjectGetProperty(JSContextRef ctx, JSObjectRef object, JSStringRef propertyName, JSValueRef* exception);//å®šä¹‰å¯¹è±¡å±æ€§void JSObjectSetProperty(JSContextRef ctx, JSObjectRef object, JSStringRef propertyName, JSValueRef value, JSPropertyAttributes attributes, JSValueRef* exception);//åˆ é™¤å¯¹è±¡å±æ€§bool JSObjectDeleteProperty(JSContextRef ctx, JSObjectRef object, JSStringRef propertyName, JSValueRef* exception);//è·å–æ•°ç»„å€¼JSValueRef JSObjectGetPropertyAtIndex(JSContextRef ctx, JSObjectRef object, unsigned propertyIndex, JSValueRef* exception);//è®¾ç½®æ•°ç»„å€¼void JSObjectSetPropertyAtIndex(JSContextRef ctx, JSObjectRef object, unsigned propertyIndex, JSValueRef value, JSValueRef* exception);//è·å–ç§æœ‰æ•°æ®void* JSObjectGetPrivate(JSObjectRef object);//è®¾ç½®ç§æœ‰æ•°æ®bool JSObjectSetPrivate(JSObjectRef object, void* data);//åˆ¤æ–­æ˜¯å¦ä¸ºå‡½æ•°bool JSObjectIsFunction(JSContextRef ctx, JSObjectRef object);//å°†å¯¹è±¡ä½œä¸ºå‡½æ•°æ¥è°ƒç”¨JSValueRef JSObjectCallAsFunction(JSContextRef ctx, JSObjectRef object, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception);//åˆ¤æ–­æ˜¯å¦ä¸ºæ„é€ å‡½æ•°bool JSObjectIsConstructor(JSContextRef ctx, JSObjectRef object);//å°†å¯¹è±¡ä½œä¸ºæ„é€ å‡½æ•°æ¥è°ƒç”¨JSObjectRef JSObjectCallAsConstructor(JSContextRef ctx, JSObjectRef object, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception);//è·å–æ‰€æœ‰å±æ€§åJSPropertyNameArrayRef JSObjectCopyPropertyNames(JSContextRef ctx, JSObjectRef object);//è¿›è¡Œå†…å­˜å¼•ç”¨JSPropertyNameArrayRef JSPropertyNameArrayRetain(JSPropertyNameArrayRef array);//å†…å­˜é‡Šæ”¾void JSPropertyNameArrayRelease(JSPropertyNameArrayRef array);//è·å–å±æ€§ä¸ªæ•°size_t JSPropertyNameArrayGetCount(JSPropertyNameArrayRef array);//åœ¨å±æ€§åæ•°ç»„ä¸­å–å€¼JSStringRef JSPropertyNameArrayGetNameAtIndex(JSPropertyNameArrayRef array, size_t index);//æ·»åŠ å±æ€§åvoid JSPropertyNameAccumulatorAddName(JSPropertyNameAccumulatorRef accumulator, JSStringRef propertyName); JSæ•°æ®ç±»å‹ç›¸å…³å®šä¹‰åœ¨JSValueRefä¸­ï¼Œå¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859//è·å–å€¼çš„ç±»å‹/*æšä¸¾å¦‚ä¸‹ï¼štypedef enum &#123; kJSTypeUndefined, kJSTypeNull, kJSTypeBoolean, kJSTypeNumber, kJSTypeString, kJSTypeObject&#125; JSType;*/JSType JSValueGetType(JSContextRef ctx, JSValueRef);//åˆ¤æ–­æ˜¯å¦ä¸ºundefinedç±»å‹bool JSValueIsUndefined(JSContextRef ctx, JSValueRef value);//åˆ¤æ–­æ˜¯å¦ä¸ºnullç±»å‹bool JSValueIsNull(JSContextRef ctx, JSValueRef value);//åˆ¤æ–­æ˜¯å¦ä¸ºå¸ƒå°”ç±»å‹bool JSValueIsBoolean(JSContextRef ctx, JSValueRef value);//åˆ¤æ–­æ˜¯å¦ä¸ºæ•°å€¼ç±»å‹bool JSValueIsNumber(JSContextRef ctx, JSValueRef value);//åˆ¤æ–­æ˜¯å¦ä¸ºå­—ç¬¦ä¸²ç±»å‹bool JSValueIsString(JSContextRef ctx, JSValueRef value);//åˆ¤æ–­æ˜¯å¦ä¸ºå¯¹è±¡ç±»å‹bool JSValueIsObject(JSContextRef ctx, JSValueRef value);//æ˜¯å¦æ˜¯ç±»bool JSValueIsObjectOfClass(JSContextRef ctx, JSValueRef value, JSClassRef jsClass);//æ˜¯å¦æ˜¯æ•°ç»„bool JSValueIsArray(JSContextRef ctx, JSValueRef value);//æ˜¯å¦æ˜¯æ—¥æœŸbool JSValueIsDate(JSContextRef ctx, JSValueRef value);//æ¯”è¾ƒå€¼æ˜¯å¦ç›¸ç­‰bool JSValueIsEqual(JSContextRef ctx, JSValueRef a, JSValueRef b, JSValueRef* exception);//æ¯”è¾ƒå€¼æ˜¯å¦å…¨ç­‰bool JSValueIsStrictEqual(JSContextRef ctx, JSValueRef a, JSValueRef b);//æ˜¯å¦æ˜¯æŸä¸ªç±»çš„å®ä¾‹bool JSValueIsInstanceOfConstructor(JSContextRef ctx, JSValueRef value, JSObjectRef constructor, JSValueRef* exception);//åˆ›å»ºundefinedå€¼JSValueRef JSValueMakeUndefined(JSContextRef ctx);//åˆ›å»ºnullå€¼JSValueRef JSValueMakeNull(JSContextRef ctx);//åˆ›å»ºå¸ƒå°”å€¼JSValueRef JSValueMakeBoolean(JSContextRef ctx, bool boolean);//åˆ›å»ºæ•°å€¼JSValueRef JSValueMakeNumber(JSContextRef ctx, double number);//åˆ›å»ºå­—ç¬¦ä¸²å€¼JSValueRef JSValueMakeString(JSContextRef ctx, JSStringRef string);//é€šè¿‡JSONåˆ›å»ºå¯¹è±¡JSValueRef JSValueMakeFromJSONString(JSContextRef ctx, JSStringRef string);//å°†å¯¹è±¡è½¬ä¸ºJSONå­—ç¬¦ä¸²JSStringRef JSValueCreateJSONString(JSContextRef ctx, JSValueRef value, unsigned indent, JSValueRef* exception);//è¿›è¡Œå¸ƒå°”å€¼è½¬æ¢bool JSValueToBoolean(JSContextRef ctx, JSValueRef value);//è¿›è¡Œæ•°å€¼è½¬æ¢double JSValueToNumber(JSContextRef ctx, JSValueRef value, JSValueRef* exception);//å­—ç¬¦ä¸²å€¼èµ‹å€¼JSStringRef JSValueToStringCopy(JSContextRef ctx, JSValueRef value, JSValueRef* exception);//å€¼ä¸å¯¹è±¡çš„è½¬æ¢JSObjectRef JSValueToObject(JSContextRef ctx, JSValueRef value, JSValueRef* exception); åœ¨Cé£æ ¼çš„APIä¸­ï¼Œå­—ç¬¦ä¸²ä¹Ÿè¢«åŒ…è£…æˆäº†JSStringRefç±»å‹ï¼Œå…¶ä¸­æ–¹æ³•å¦‚ä¸‹ï¼š 12345678910111213//åˆ›å»ºjså­—ç¬¦ä¸²JSStringRef JSStringCreateWithCharacters(const JSChar* chars, size_t numChars);JSStringRef JSStringCreateWithUTF8CString(const char* string);//å†…å­˜å¼•ç”¨äºé‡Šæ”¾JSStringRef JSStringRetain(JSStringRef string);void JSStringRelease(JSStringRef string);//è·å–å­—ç¬¦ä¸²é•¿åº¦size_t JSStringGetLength(JSStringRef string);//è½¬æˆUTF8å­—ç¬¦ä¸²size_t JSStringGetUTF8CString(JSStringRef string, char* buffer, size_t bufferSize);//å­—ç¬¦ä¸²æ¯”è¾ƒbool JSStringIsEqual(JSStringRef a, JSStringRef b);bool JSStringIsEqualToUTF8CString(JSStringRef a, const char* b); å…«ã€Hybird App æ„å»ºæ€è·¯Hybird Appæ˜¯æŒ‡æ··åˆæ¨¡å¼ç§»åŠ¨åº”ç”¨ï¼Œå³å…¶ä¸­æ—¢åŒ…å«åŸç”Ÿçš„ç»“æ„æœ‰å†…åµŒæœ‰Webçš„ç»„ä»¶ã€‚è¿™ç§Appä¸ä»…æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒå¯ä»¥è¾¾åˆ°å’ŒåŸç”Ÿæ‰€å·®æ— å‡ çš„ç¨‹åº¦ï¼Œæ›´å¤§çš„ä¼˜åŠ¿åœ¨äºbugä¿®å¤å¿«ï¼Œç‰ˆæœ¬è¿­ä»£æ— éœ€å‘ç‰ˆã€‚3æœˆ8æ—¥è‹¹æœç»™è®¸å¤šå¼€å‘è€…å‘é€äº†ä¸€å°è­¦å‘Šé‚®ä»¶ï¼Œä¸»è¦æ˜¯æç¤ºå¼€å‘è€…ä¸‹è½½è„šæœ¬åŠ¨æ€æ›´æ”¹AppåŸæœ¬è¡Œä¸ºçš„åšæ³•å°†ä¼šè¢«æå®¡æ‹’ç»ã€‚å…¶å®è¿™æ¬¡é‚®ä»¶æ‰€æå†…å®¹å’ŒHybird Appå¹¶æ— å¤ªå¤§å…³ç³»(å¯¹ReactNativeä¹Ÿæ²¡æœ‰å½±å“)ï¼Œè‹¹æœè­¦å‘Šçš„æ˜¯ç½‘ç»œä¸‹å‘è„šæœ¬å¹¶ä¸”ä½¿ç”¨runtimeåŠ¨æ€ä¿®æ”¹Nativeè¡Œä¸ºçš„åº”ç”¨ï¼ŒHybird Appçš„å®è´¨å¹¶æ²¡æœ‰ä¿®æ”¹åŸNativeçš„è¡Œä¸ºï¼Œè€Œæ˜¯å°†ä¸‹å‘çš„èµ„æºè¿›è¡ŒåŠ è½½å’Œç•Œé¢æ¸²æŸ“ï¼Œç±»ä¼¼WebViewã€‚ å…³äºæ··åˆå¼€å‘ï¼Œæˆ‘ä»¬æœ‰ä¸¤ç§æ¨¡å¼ï¼š 1.Nativeå†…åµŒWebViewï¼Œé€šè¿‡JSä¸OCäº¤äº’å®ç°ä¸šåŠ¡æ— ç¼çš„è¡”æ¥ã€‚ æ— è®ºæ˜¯UIWebViewè¿˜æ˜¯WKWebKitï¼Œæˆ‘ä»¬éƒ½å¯ä»¥åœ¨å…¶ä¸­æ‹¿åˆ°å½“å‰çš„JSContextï¼Œç„¶æ˜¯ä½¿ç”¨å‰é¢ä»‹ç»çš„æ–¹æ³•ä¾¿å¯ä»¥å®ç°æ•°æ®äº’é€šä¸äº¤äº’ã€‚è¿™ç§æ–¹å¼æ˜¯æœ€ç®€å•çš„æ··åˆå¼€å‘ï¼Œä½†å…¶æ€§èƒ½å’ŒåŸç”Ÿç›¸æ¯”è¦å·®ä¸€äº›ã€‚ç¤ºæ„å›¾å¦‚ä¸‹ï¼š 2.ä¸‹å‘JSè„šæœ¬ï¼Œä½¿ç”¨ç±»ä¼¼ReactNativeçš„æ¡†æ¶è¿›è¡ŒåŸç”Ÿæ¸²æŸ“ è¿™æ˜¯ä¸€ç§æ•ˆç‡éå¸¸é«˜çš„æ··åˆå¼€å‘æ¨¡å¼ï¼Œå¹¶ä¸”ReactNativeä¹Ÿæœ¬èº«æ”¯æŒandroidå’ŒiOSå…¬ç”¨ä¸€å¥—ä»£ç ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨JavaScriptCoreè‡ªå·±å®ç°ä¸€å¥—è§£æé€»è¾‘ï¼Œä½¿ç”¨JavaScriptæ¥ç¼–å†™Nativeåº”ç”¨ï¼Œè¦å®Œæ•´å®ç°è¿™æ ·ä¸€å¥—ä¸œè¥¿å¤ªå¤æ‚äº†ï¼Œæˆ‘ä»¬ä¹Ÿæ²¡æœ‰èƒ½åŠ›å®Œæˆä¸€ä¸ªå¦‚æ­¤åºå¤§çš„å·¥ç¨‹ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥åšä¸€ä¸ªå°Demoæ¥æ¨¡æ‹Ÿå…¶åŸç†ï¼Œè¿™æ ·å¯ä»¥æ›´å¥½çš„å¸®åŠ©æˆ‘ä»¬ç†è§£Hybird Appçš„æ„å»ºåŸç†ã€‚ æˆ‘ä»¬æ‰“ç®—å®ç°è¿™æ ·çš„åŠŸèƒ½ï¼šé€šè¿‡ä¸‹å‘JSè„šæœ¬åˆ›å»ºåŸç”Ÿçš„UILabelæ ‡ç­¾ä¸UIButtonæ§ä»¶ï¼Œé¦–å…ˆç¼–å†™JSä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253(function()&#123; console.log(\"ProgectInit\"); //JSè„šæœ¬åŠ è½½å®Œæˆå è‡ªåŠ¨renderç•Œé¢ return render();&#125;)();//JSæ ‡ç­¾ç±»function Label(rect,text,color)&#123; this.rect = rect; this.text = text; this.color = color; this.typeName = \"Label\";&#125;//JSæŒ‰é’®ç±»function Button(rect,text,callFunc)&#123; this.rect = rect; this.text = text; this.callFunc = callFunc; this.typeName = \"Button\";&#125;//JS Rectç±»function Rect(x,y,width,height)&#123; this.x = x; this.y = y; this.width = width; this.height = height;&#125;//JSé¢œè‰²ç±»function Color(r,g,b,a)&#123; this.r = r; this.g = g; this.b = b; this.a = a;&#125; //æ¸²æŸ“æ–¹æ³• ç•Œé¢çš„æ¸²æŸ“å†™åœ¨è¿™é‡Œé¢ function render()&#123; var rect = new Rect(20,100,280,30); var color = new Color(1,0,0,1); var label = new Label(rect,\"Hello World\",color); var rect2 = new Rect(20,150,280,30); var color2 = new Color(0,1,0,1); var label2 = new Label(rect2,\"Hello Native\",color2); var rect3 = new Rect(20,200,280,30); var color3 = new Color(0,0,1,1); var label3 = new Label(rect3,\"Hello JavaScript\",color3); var rect4 = new Rect(20,240,280,30); var button = new Button(rect4,\"æˆ‘æ˜¯ä¸€ä¸ªæŒ‰é’®\",function()&#123; var randColor = new Color(Math.random(),Math.random(),Math.random(),1); Globle.changeBackgroundColor(randColor); &#125;); //å°†æ§ä»¶ä»¥æ•°ç»„å½¢å¼è¿”å› return [label,label2,label3,button]; &#125; åˆ›å»ºä¸€ä¸ªObjective-Cç±»ç»‘å®šåˆ°JSå…¨å±€å¯¹è±¡ä¸Šï¼Œä½œä¸ºOCæ–¹æ³•çš„æ¡¥æ¥å™¨ï¼š 123456789101112131415161718//.h#import &lt;Foundation/Foundation.h&gt;#import &lt;UIKit/UIKit.h&gt;#import &lt;JavaScriptCore/JavaScriptCore.h&gt;@protocol GloblePrptocol &lt;JSExport&gt;-(void)changeBackgroundColor:(JSValue *)value;@end@interface Globle : NSObject&lt;GloblePrptocol&gt;@property(nonatomic,weak)UIViewController * ownerController;@end//.m#import \"Globle.h\"@implementation Globle-(void)changeBackgroundColor:(JSValue *)value&#123; self.ownerController.view.backgroundColor = [UIColor colorWithRed:value[@\"r\"].toDouble green:value[@\"g\"].toDouble blue:value[@\"b\"].toDouble alpha:value[@\"a\"].toDouble];&#125;@end åœ¨ViewControllerä¸­å®ç°ä¸€ä¸ªç•Œé¢æ¸²æŸ“çš„renderè§£é‡Šæ–¹æ³•ï¼Œå¹¶å»ºç«‹æŒ‰é’®çš„æ–¹æ³•è½¬æ¢ï¼Œå¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667//// ViewController.m// JavaScriptCoreTest//// Created by vip on 17/3/6.// Copyright Â© 2017å¹´ jaki. All rights reserved.//#import \"ViewController.h\"#import &lt;JavaScriptCore/JavaScriptCore.h&gt;#import \"Globle.h\"@interface ViewController ()@property(nonatomic,strong)JSContext * jsContext;@property(nonatomic,strong)NSMutableArray * actionArray;@property(nonatomic,strong)Globle * globle;@end@implementation ViewController- (void)viewDidLoad &#123; [super viewDidLoad]; //åˆ›å»ºJSè¿è¡Œç¯å¢ƒ self.jsContext = [JSContext new]; //ç»‘å®šæ¡¥æ¥å™¨ self.globle = [Globle new]; self.globle.ownerController = self; self.jsContext[@\"Globle\"] = self.globle; self.actionArray = [NSMutableArray array]; [self render];&#125;//ç•Œé¢æ¸²æŸ“è§£é‡Šå™¨-(void)render&#123; NSString * path = [[NSBundle mainBundle] pathForResource:@\"main\" ofType:@\"js\"]; NSData * jsData = [[NSData alloc]initWithContentsOfFile:path]; NSString * jsCode = [[NSString alloc]initWithData:jsData encoding:NSUTF8StringEncoding]; JSValue * jsVlaue = [self.jsContext evaluateScript:jsCode]; for (int i=0; i&lt;jsVlaue.toArray.count; i++) &#123; JSValue * subValue = [jsVlaue objectAtIndexedSubscript:i]; if ([[subValue objectForKeyedSubscript:@\"typeName\"].toString isEqualToString:@\"Label\"]) &#123; UILabel * label = [UILabel new]; label.frame = CGRectMake(subValue[@\"rect\"][@\"x\"].toDouble, subValue[@\"rect\"][@\"y\"].toDouble, subValue[@\"rect\"][@\"width\"].toDouble, subValue[@\"rect\"][@\"height\"].toDouble); label.text = subValue[@\"text\"].toString; label.textColor = [UIColor colorWithRed:subValue[@\"color\"][@\"r\"].toDouble green:subValue[@\"color\"][@\"g\"].toDouble blue:subValue[@\"color\"][@\"b\"].toDouble alpha:subValue[@\"color\"][@\"a\"].toDouble]; [self.view addSubview:label]; &#125;else if ([[subValue objectForKeyedSubscript:@\"typeName\"].toString isEqualToString:@\"Button\"])&#123; UIButton * button = [UIButton buttonWithType:UIButtonTypeSystem]; button.frame = CGRectMake(subValue[@\"rect\"][@\"x\"].toDouble, subValue[@\"rect\"][@\"y\"].toDouble, subValue[@\"rect\"][@\"width\"].toDouble, subValue[@\"rect\"][@\"height\"].toDouble); [button setTitle:subValue[@\"text\"].toString forState:UIControlStateNormal]; button.tag = self.actionArray.count; [button addTarget:self action:@selector(buttonAction:) forControlEvents:UIControlEventTouchUpInside]; [self.actionArray addObject:subValue[@\"callFunc\"]]; [self.view addSubview:button]; &#125; &#125;&#125;//æŒ‰é’®è½¬æ¢æ–¹æ³•-(void)buttonAction:(UIButton *)btn&#123; JSValue * action = self.actionArray[btn.tag]; //æ‰§è¡ŒJSæ–¹æ³• [action callWithArguments:nil];&#125;@end è¿è¡Œå·¥ç¨‹ï¼Œæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œç‚¹å‡»æŒ‰é’®å³å¯å®ç°ç®€å•çš„ç•Œé¢é¢œè‰²åˆ‡æ¢ï¼š ä¸Šé¢çš„ç¤ºä¾‹å·¥ç¨‹æˆ‘åªå®ç°äº†UILabelç±»ä¸UIButtonç±»çš„JS-OCè½¬æ¢ï¼Œå¦‚æœå°†åŸç”Ÿæ§ä»¶å’ŒJSå¯¹è±¡å†è¿›è¡Œä¸€å±‚ç»‘å®šï¼Œå¹¶ä¸”å®ç°å¤§éƒ¨åˆ†JSç±»ä¸åŸç”Ÿç±»å’Œä»–ä»¬å†…éƒ¨çš„å±æ€§ï¼Œåˆ™æˆ‘ä»¬å°±å¼€å‘äº†ä¸€å¥—Hybird Appå¼€å‘æ¡†æ¶ï¼Œä½†å¹¶æ²¡æœ‰è¿™ä¸ªå¿…è¦ï¼Œå¦‚æœä½ å¯¹æ›´å¤šå…´è¶£ï¼Œå¯ä»¥æ·±å…¥å­¦ä¹ ä¸‹ReactNativeã€‚ æ–‡ä¸­çš„ç¤ºä¾‹Demoæˆ‘æ”¾åœ¨äº†Githubä¸Šï¼Œåœ°å€å¦‚ä¸‹ï¼š[https://github.com/ZYHshao/Demo-Hybird](https://github.com/ZYHshao/Demo-Hybird)ã€‚ å‰ç«¯å­¦ä¹ æ–°äººï¼Œæœ‰å¿—åŒé“åˆçš„æœ‹å‹ï¼Œæ¬¢è¿äº¤æµä¸æŒ‡å¯¼ï¼ŒQQç¾¤:541458536","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"Gitå‘½ä»¤é›†ä¹‹åâ€”â€”æ–‡ä»¶ç§»åŠ¨å‘½ä»¤","slug":"315Gitå‘½ä»¤é›†ä¹‹åâ€”â€”æ–‡ä»¶ç§»åŠ¨å‘½ä»¤","date":"2017-03-08T16:00:00.000Z","updated":"2021-07-14T03:00:22.731Z","comments":true,"path":"2017/03/09/315Gitå‘½ä»¤é›†ä¹‹åâ€”â€”æ–‡ä»¶ç§»åŠ¨å‘½ä»¤/","link":"","permalink":"http://huishao.cc/2017/03/09/315Gitå‘½ä»¤é›†ä¹‹åâ€”â€”æ–‡ä»¶ç§»åŠ¨å‘½ä»¤/","excerpt":"","text":"Gitå‘½ä»¤é›†ä¹‹åâ€”â€”æ–‡ä»¶ç§»åŠ¨å‘½ä»¤1.git rm åˆ é™¤æŸä¸ªæ–‡ä»¶ã€‚è¿™ä¸ªå‘½ä»¤ä¼šå°†æ–‡ä»¶ç›´æ¥åˆ é™¤ï¼Œå¹¶å°†æ­¤æ“ä½œæ›´æ–°åˆ°ç¼“å­˜åŒºï¼Œç›´æ¥è¿›è¡Œcommitæäº¤å³å¯ã€‚ 2.git rm â€“force åˆ é™¤æ—¶è¦†ç›–ç¼“å­˜åŒºï¼Œè¿›è¡Œå¼ºåˆ¶åˆ é™¤ã€‚ 3.git rm â€“cached è¿™ä¸ªå‘½ä»¤åªä¼šåˆ é™¤ç´¢å¼•ä¸­çš„æ–‡ä»¶ï¼Œå³Gitä»“åº“ä¸­å…³äºæ­¤æ–‡ä»¶çš„è®°å½•ï¼Œä¸ä¼šçœŸçš„å°†æ–‡ä»¶åˆ é™¤ï¼Œæ­¤æ—¶Gitçš„çŠ¶æ€åº”è¯¥æ˜¯æœ‰æ–°æ·»åŠ çš„æ–‡ä»¶æœªæ›´æ–°åˆ°ç¼“å­˜åŒºã€‚ 4.git rm â€“quiet è®¾ç½®Gitçš„è¾“å‡ºä¿¡æ¯ä¸ºç²¾ç®€æ¨¡å¼ã€‚ 5.git mv ç§»åŠ¨æŸä¸ªæ–‡ä»¶çš„ä½ç½®å¹¶ä¸”é‡å‘½ä»¤ã€‚","categories":[{"name":"GIT","slug":"GIT","permalink":"http://huishao.cc/categories/GIT/"}],"tags":[],"keywords":[{"name":"GIT","slug":"GIT","permalink":"http://huishao.cc/categories/GIT/"}]},{"title":"Gitå‘½ä»¤é›†ä¹‹ä¹â€”â€”é‡ç½®å‘½ä»¤","slug":"314Gitå‘½ä»¤é›†ä¹‹ä¹â€”â€”é‡ç½®å‘½ä»¤","date":"2017-03-06T16:00:00.000Z","updated":"2021-07-14T02:59:37.523Z","comments":true,"path":"2017/03/07/314Gitå‘½ä»¤é›†ä¹‹ä¹â€”â€”é‡ç½®å‘½ä»¤/","link":"","permalink":"http://huishao.cc/2017/03/07/314Gitå‘½ä»¤é›†ä¹‹ä¹â€”â€”é‡ç½®å‘½ä»¤/","excerpt":"","text":"Gitå‘½ä»¤é›†ä¹‹ä¹â€”â€”é‡ç½®å‘½ä»¤1.git reset HEAD^è¿”å›åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬çŠ¶æ€ï¼Œéœ€è¦æ³¨æ„ï¼Œè¿™ä¸ªå‘½ä»¤ä¸ä¼šä¿®æ”¹æœ¬åœ°æ–‡ä»¶çš„å†…å®¹ï¼Œè¿™äº›æ–°çš„å†…å®¹ä¼šå˜ä¸ºæœªæ›´æ–°åˆ°ç¼“å­˜åŒºçš„çŠ¶æ€ã€‚ 2.git reset HEAD^ é€€å›æŸä¸ªæ–‡ä»¶åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬çš„çŠ¶æ€ï¼ŒåŒæ ·ä¸ä¼šä¿®æ”¹æœ¬åœ°æ–‡ä»¶çš„å†…å®¹ï¼Œè¿™äº›æ–°çš„å†…å®¹ä¼šå˜æˆæœªæ›´æ–°åˆ°ç¼“å­˜åŒºçš„çŠ¶æ€ã€‚ 3.git reset HEAD~né€€å›åˆ°nä¸ªç‰ˆæœ¬ä¹‹å‰ï¼ŒåŒæ ·ä¸ä¼šä¿®æ”¹æœ¬åœ°æ–‡ä»¶çš„å†…å®¹ï¼Œè¿™äº›æ–°çš„å†…å®¹ä¼šå˜æˆæœªæ›´æ–°åˆ°ç¼“å­˜åŒºçš„çŠ¶æ€ã€‚ 4.git reset é€€å›åˆ°æŸä¸ªæŒ‡å®šçš„commitï¼ŒåŒæ ·ä¸ä¼šä¿®æ”¹æœ¬åœ°æ–‡ä»¶çš„å†…å®¹ï¼Œè¿™äº›æ–°çš„å†…å®¹ä¼šå˜æˆæœªæ›´æ–°åˆ°ç¼“å­˜åŒºçš„çŠ¶æ€ã€‚ æ³¨æ„ï¼šgitåœ¨è¿›è¡Œresetæ“ä½œæ—¶ï¼Œæ˜¯å¯ä»¥è®¾ç½®æ“ä½œæ¨¡å¼çš„ï¼Œå¸¸ç”¨çš„æ¨¡å¼æœ‰hardï¼Œsoftï¼Œmixed3ç§ã€‚å¦‚æœä¸è¿›è¡Œè®¾ç½®ï¼Œé»˜è®¤éƒ½æ˜¯mixedæ¨¡å¼çš„ï¼Œä¸Šé¢çš„åˆ—å‡ºçš„resetå‘½ä»¤éƒ½æ˜¯å·¥ä½œåœ¨è¿™ä¸ªæ¨¡å¼ä¸‹çš„ã€‚ 5.git reset â€“mixed mixedæ¨¡å¼æ˜¯é»˜è®¤çš„æ¨¡å¼ï¼Œä¸æŒ‡å®šçš„è¯ä¹Ÿæ˜¯è¿™ä¸ªæ¨¡å¼ã€‚è¿™ä¸ªæ¨¡å¼åªä¼šé‡ç½®Gitå½“å‰æ¸¸æ ‡æŒ‡é’ˆåˆ°æŸæ¬¡æäº¤ï¼Œå¹¶ä¸ä¼šä¿®æ”¹æœ¬åœ°æ–‡ä»¶ï¼Œæœ¬åœ°æ–‡ä»¶ä¸­çš„å˜åŒ–éƒ½å°†ä½œä¸ºä¸ºæ›´æ–°åˆ°ç¼“å­˜åŒºçš„çŠ¶æ€ã€‚ 6.git reset â€“hard hardæ¨¡å¼ä¼šå°†Gitå½“å‰æ¸¸æ ‡æŒ‡é’ˆé‡ç½®åˆ°æŒ‡å®šæäº¤åŒæ—¶å°†æœ¬åœ°æ–‡ä»¶ä¹Ÿæ¢å¤åˆ°æ¸¸æ ‡æ‰€åœ¨çš„æäº¤æ—¶çš„çŠ¶æ€ã€‚æ–°çš„æ–‡ä»¶ä¿®æ”¹å°†è¢«ä¸¢å¼ƒã€‚ 7.git reset â€“soft softæ¨¡å¼å°†Gitæ¸¸æ ‡æŒ‡é’ˆé‡ç½®åˆ°æŒ‡å®šçš„æäº¤ï¼Œä¸ä¿®æ”¹æœ¬åœ°æ–‡ä»¶çŠ¶æ€ï¼Œä½†æ˜¯ä¹Ÿä¸ä¿®æ”¹ç¼“å­˜åŒºçŠ¶æ€ï¼Œæ‰€æœ‰çš„æ›´æ”¹å°†é»˜è®¤ä½œä¸ºä¸‹æ¬¡commitçš„å†…å®¹ã€‚","categories":[{"name":"GIT","slug":"GIT","permalink":"http://huishao.cc/categories/GIT/"}],"tags":[],"keywords":[{"name":"GIT","slug":"GIT","permalink":"http://huishao.cc/categories/GIT/"}]},{"title":"Gitå‘½ä»¤é›†ä¹‹å…«â€”â€”æäº¤å‘½ä»¤","slug":"313Gitå‘½ä»¤é›†ä¹‹å…«â€”â€”æäº¤å‘½ä»¤","date":"2017-03-05T16:00:00.000Z","updated":"2021-07-14T02:58:49.845Z","comments":true,"path":"2017/03/06/313Gitå‘½ä»¤é›†ä¹‹å…«â€”â€”æäº¤å‘½ä»¤/","link":"","permalink":"http://huishao.cc/2017/03/06/313Gitå‘½ä»¤é›†ä¹‹å…«â€”â€”æäº¤å‘½ä»¤/","excerpt":"","text":"Gitå‘½ä»¤é›†ä¹‹å…«â€”â€”æäº¤å‘½ä»¤1.git commit â€“message å°†ä½¿ç”¨addå‘½ä»¤æ›´æ–°åçš„ä¿®æ”¹è¿›è¡Œæäº¤ï¼Œmsgä¸ºæœ¬æ¬¡æäº¤æ“ä½œçš„æ³¨é‡Šä¿¡æ¯ã€‚ 2.git commit â€“all â€“message ä½¿ç”¨è¿™ä¸ªå‘½ä»¤å¯ä»¥è‡ªåŠ¨å°†ä¿®æ”¹æˆ–åˆ é™¤çš„æ–‡ä»¶è¿›è¡Œæ›´æ–°åˆ°ç¼“å­˜åŒºï¼Œç„¶ååœ¨è¿›è¡Œæäº¤ï¼Œå³æ­¤å‘½ä»¤å®é™…ä¸ŠåŒ…æ‹¬äº†ä¸¤æ­¥æ“ä½œï¼Œå…ˆå°†ä¿®æ”¹æˆ–åˆ é™¤çš„æ–‡ä»¶addæ›´æ–°ï¼Œå†æäº¤ï¼Œéœ€è¦æ³¨æ„ï¼Œè¿™ä¸ªå‘½ä»¤ä¸ä¼šå°†æ–°æ·»åŠ çš„æ–‡ä»¶æ›´æ–°åˆ°ç¼“å­˜åŒºã€‚ 3.git commit â€“reuse-message ä½¿ç”¨æŒ‡å®šæäº¤çš„æ³¨é‡Šä¿¡æ¯ä½œä¸ºæœ¬æ¬¡æäº¤çš„æ³¨é‡Šä¿¡æ¯ï¼Œcommitä¸ºæŸæ¬¡æäº¤çš„æäº¤ç¼–å·ï¼Œåœ¨gitä¸­æ¯æ¬¡è¿›è¡Œæäº¤æ“ä½œéƒ½ä¼šè®¡ç®—å‡ºä¸€ä¸ªç¼–ç ï¼Œå¯ä»¥ä½¿ç”¨git logå‘½ä»¤è¿›è¡ŒæŸ¥çœ‹ï¼Œå¦‚ä¸‹ï¼š 4.git commit â€“reedit-message è¿™ä¸ªå‘½ä»¤å’Œ--reuse-messageå‘½ä»¤å·®ä¸å¤šï¼Œä¹Ÿæ˜¯å¤åˆ¶ä¸€ä¸ªæŒ‡å®šæäº¤çš„æ³¨é‡Šä¿¡æ¯ï¼Œè¿™ä¸ªå‘½ä»¤å…è®¸å¯¹æ³¨é‡Šä¿¡æ¯è¿›è¡Œä¿®æ”¹åï¼Œåœ¨æäº¤ã€‚ 5.git commit â€“fixup æŒ‡å®šæ­¤æ¬¡æäº¤æ˜¯æŸæ¬¡æäº¤çš„ä¿®å¤ï¼Œä¼šè‡ªåŠ¨åœ¨è¢«ä¿®æ”¹å¤æäº¤æ‰€å¯¹åº”çš„æ³¨é‡Šå‰åŠ fixupä½œä¸ºæœ¬æ¬¡æäº¤æ³¨é‡Šå‰ç¼€ã€‚ 6.git commit â€“squash å°†æ­¤æ¬¡æäº¤ä½œä¸ºæŒ‡å®šæäº¤çš„åˆå¹¶ã€‚ 7.git commit â€“short â€“message è®¾ç½®æ‰§è¡Œå‘½ä»¤åçš„è¾“å‡ºç»“æœä¸ºç²¾ç®€æ¨¡å¼ã€‚ 8.git commit â€“branch â€“message åœ¨è¾“å‡ºä¸­æ˜¾ç¤ºåˆ†æ”¯ä¿¡æ¯ã€‚ 9.git commit â€“long â€“message è®¾ç½®æ‰§è¡Œå‘½ä»¤åçš„è¾“å‡ºç»“æœä¸ºè¯¦æƒ…æ¨¡å¼ã€‚ 10.git commit â€“author â€“message ä¸ºæ­¤æ¬¡æäº¤è®¾ç½®æŒ‡å®šçš„ä½œè€…ã€‚ 11.git commit â€“amendä¿®æ”¹æœ€åä¸€æ¬¡æäº¤çš„æ³¨é‡Šä¿¡æ¯ã€‚","categories":[{"name":"GIT","slug":"GIT","permalink":"http://huishao.cc/categories/GIT/"}],"tags":[],"keywords":[{"name":"GIT","slug":"GIT","permalink":"http://huishao.cc/categories/GIT/"}]},{"title":"Gitå‘½ä»¤é›†ä¹‹ä¸ƒâ€”â€”å·®å¼‚æŸ¥è¯¢å‘½ä»¤","slug":"312Gitå‘½ä»¤é›†ä¹‹ä¸ƒâ€”â€”å·®å¼‚æŸ¥è¯¢å‘½ä»¤","date":"2017-03-01T16:00:00.000Z","updated":"2021-07-14T02:58:04.391Z","comments":true,"path":"2017/03/02/312Gitå‘½ä»¤é›†ä¹‹ä¸ƒâ€”â€”å·®å¼‚æŸ¥è¯¢å‘½ä»¤/","link":"","permalink":"http://huishao.cc/2017/03/02/312Gitå‘½ä»¤é›†ä¹‹ä¸ƒâ€”â€”å·®å¼‚æŸ¥è¯¢å‘½ä»¤/","excerpt":"","text":"Gitå‘½ä»¤é›†ä¹‹ä¸ƒâ€”â€”å·®å¼‚æŸ¥è¯¢å‘½ä»¤1.git diffæŸ¥çœ‹æœªæäº¤çš„æ–‡ä»¶å˜åŒ–ã€‚ä¼šåœ¨æ§åˆ¶å°å°†æ–‡ä»¶çš„å‰åå˜åŒ–è¿›è¡Œæ‰“å°ã€‚ 2.git diff â€“rawå°†æ–‡ä»¶å˜åŒ–çš„è¾“å‡ºæ ¼å¼åŒ–å±‚å•è¡Œæ¨¡å¼ï¼Œåªæ‰“å°å‡ºæœ‰å˜åŒ–çš„æ–‡ä»¶ã€‚ 3.git diff â€“statç”Ÿæˆä¸€ä¸ªå·®å¼‚æŠ¥å‘Šï¼Œä¾‹å¦‚å¤šå°‘ä¸ªæ–‡ä»¶ä¿®æ”¹äº†ï¼Œä¿®æ”¹äº†ä»€ä¹ˆã€‚æ‰“å°ç¤ºä¾‹å¦‚ä¸‹ï¼š 4.git diff â€“numstatç”Ÿæˆä¸€ä¸ªæ•°å­—é£æ ¼çš„å·®å¼‚æŠ¥å‘Šã€‚åªæ˜¾ç¤ºå¡«åŠ äº†å¤šå°‘ï¼Œåˆ é™¤äº†å¤šå°‘å’Œä¿®æ”¹çš„æ–‡ä»¶åã€‚ 5.git diff â€“shortstatç”Ÿæˆä¸€ä¸ªç®€æ´çš„å·®å¼‚æŠ¥å‘Šã€‚ 6.git diff â€“name-onlyä»…ä»…å¯¹å˜åŒ–çš„æ–‡ä»¶åè¿›è¡Œæ‰“å°ã€‚ 7.git diff â€“name-statuså¯¹å˜åŒ–çš„æ–‡ä»¶åå’Œå˜åŒ–çš„çŠ¶æ€è¿›è¡Œæ‰“å°ã€‚ 8.git diff â€“coloræ‰“å°ç»“æœè¿›è¡Œé¢œè‰²åŒºåˆ†ã€‚ 9.git diff â€“word-diffä»¥å­—çš„ç»´åº¦æ˜¾ç¤ºå·®å¼‚ã€‚","categories":[{"name":"GIT","slug":"GIT","permalink":"http://huishao.cc/categories/GIT/"}],"tags":[],"keywords":[{"name":"GIT","slug":"GIT","permalink":"http://huishao.cc/categories/GIT/"}]},{"title":"Gitå‘½ä»¤é›†ä¹‹å…­â€”â€”æŸ¥çœ‹ä»“åº“çŠ¶æ€","slug":"311Gitå‘½ä»¤é›†ä¹‹å…­â€”â€”æŸ¥çœ‹ä»“åº“çŠ¶æ€","date":"2017-02-28T16:00:00.000Z","updated":"2021-07-14T02:57:19.142Z","comments":true,"path":"2017/03/01/311Gitå‘½ä»¤é›†ä¹‹å…­â€”â€”æŸ¥çœ‹ä»“åº“çŠ¶æ€/","link":"","permalink":"http://huishao.cc/2017/03/01/311Gitå‘½ä»¤é›†ä¹‹å…­â€”â€”æŸ¥çœ‹ä»“åº“çŠ¶æ€/","excerpt":"","text":"Gitå‘½ä»¤é›†ä¹‹å…­â€”â€”æŸ¥çœ‹ä»“åº“çŠ¶æ€1.git statusæŸ¥çœ‹å½“å‰ä»“åº“çŠ¶æ€ï¼Œæ˜¯å¦æœ‰æœªç¼“å­˜çš„æ–‡ä»¶æˆ–è€…æ˜¯å¦æœ‰æœªæäº¤çš„ä¿®æ”¹ã€‚ 2.git status â€“shortä½¿ç”¨ç®€æ´çš„æ ¼å¼è¿›è¡ŒçŠ¶æ€è¾“å‡ºã€‚ 3.git status â€“branchåœ¨è¾“å‡ºä¿¡æ¯ä¸­æ˜¾ç¤ºå½“å‰æ‰€åœ¨åˆ†æ”¯ã€‚ 4.git status â€“longä½¿ç”¨è¯¦ç»†æ ¼å¼è¿›è¡ŒçŠ¶æ€çš„è¾“å‡ºã€‚é»˜è®¤å°±æ˜¯è¿™ç§æ ¼å¼ã€‚ 5.git status â€“untracked-filesæ˜¾ç¤ºæœªè·Ÿè¸ªçš„æ–‡ä»¶ã€‚ 6.git status â€“ignoredæ˜¾ç¤ºè¢«å¿½ç•¥çš„æ–‡ä»¶ã€‚","categories":[{"name":"GIT","slug":"GIT","permalink":"http://huishao.cc/categories/GIT/"}],"tags":[],"keywords":[{"name":"GIT","slug":"GIT","permalink":"http://huishao.cc/categories/GIT/"}]},{"title":"Gitå‘½ä»¤é›†ä¹‹äº”â€”â€”æ›´æ–°å†…å®¹çŠ¶æ€å‘½ä»¤","slug":"310Gitå‘½ä»¤é›†ä¹‹äº”â€”â€”æ›´æ–°å†…å®¹çŠ¶æ€å‘½ä»¤","date":"2017-02-27T16:00:00.000Z","updated":"2021-07-14T02:55:53.721Z","comments":true,"path":"2017/02/28/310Gitå‘½ä»¤é›†ä¹‹äº”â€”â€”æ›´æ–°å†…å®¹çŠ¶æ€å‘½ä»¤/","link":"","permalink":"http://huishao.cc/2017/02/28/310Gitå‘½ä»¤é›†ä¹‹äº”â€”â€”æ›´æ–°å†…å®¹çŠ¶æ€å‘½ä»¤/","excerpt":"","text":"Gitå‘½ä»¤é›†ä¹‹äº”â€”â€”æ›´æ–°å†…å®¹çŠ¶æ€å‘½ä»¤Gitæ˜¯ä¸€ç§åˆ†å¸ƒå¼çš„é¡¹ç›®ç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼Œåˆ†å¸ƒå¼çš„ç‰¹ç‚¹æ˜¯å¹¶ä¸å­˜åœ¨ä¸­å¿ƒæœåŠ¡å™¨ï¼Œæ¯ä¸ªäººç”µè„‘ä¸­çš„é¡¹ç›®å·¥ç¨‹éƒ½æ˜¯ä¸€ä¸ªå®Œæ•´çš„Gitå·¥ç¨‹ã€‚åœ¨Gitä¸­ï¼Œæ¯æ¬¡å·¥ç¨‹çš„å˜æ›´éƒ½å¯ä»¥ç†è§£ä¸ºä¸€æ¬¡æ“ä½œï¼Œå¯ä»¥æ˜¯ä¿®æ”¹æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯æ·»åŠ æ–‡ä»¶æˆ–åˆ é™¤æ–‡ä»¶ã€‚å½“æˆ‘ä»¬æƒ³æŠŠæŸäº›æ“ä½œè¿›è¡Œæäº¤æ—¶ï¼Œé¦–å…ˆéœ€è¦ä½¿ç”¨addå‘½ä»¤æ¥å°†GitçŠ¶æ€è¿›è¡Œæ›´æ–°ï¼Œæœ¬ç¯‡åšå®¢ä»‹ç»ä¸Gitä¸­ä¸æ›´æ–°å†…å®¹çŠ¶æ€ç›¸å…³çš„å‘½ä»¤ã€‚ é¦–å…ˆåœ¨ä¸€ä¸ªç©ºçš„æ–‡ä»¶å¤¹ä¸­ä½¿ç”¨git initå‘½ä»¤åˆ›å»ºGitä»“åº“ï¼Œä½¿ç”¨git statuså‘½ä»¤æŸ¥çœ‹å½“å‰çš„ä»“åº“çŠ¶æ€å¦‚ä¸‹ï¼š å¯ä»¥çœ‹åˆ°ï¼Œç»ˆç«¯æç¤ºæˆ‘ä»¬å½“å‰æ‰€åœ¨çš„åˆ†æ”¯ä¸ºmasteråˆ†æ”¯ï¼Œæ²¡æœ‰ä¸œè¥¿å¯ä»¥æäº¤ã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥åœ¨å·¥ç¨‹æ–‡ä»¶å¤¹ä¸­æ–°å»ºä¸€ä¸ªtxtæ ¼å¼çš„æ–‡æœ¬æ–‡ä»¶ï¼Œå†åœ¨ç»ˆç«¯ä½¿ç”¨git statuså‘½ä»¤æŸ¥çœ‹çŠ¶æ€ï¼Œç»“æœå¦‚ä¸‹ï¼š å¯ä»¥çœ‹åˆ°ï¼ŒGitæç¤ºæˆ‘ä»¬æœ‰ä¸€ä¸ªä¸ºè·Ÿè¸ªçš„æ–‡ä»¶combinï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ¥æ›´æ–°Gitä»“åº“çš„çŠ¶æ€ï¼š 1git add combin å†æ¬¡æ£€æŸ¥Gitä»“åº“çš„çŠ¶æ€ï¼Œå¦‚ä¸‹ï¼š å¯ä»¥çœ‹åˆ°ï¼Œæ–°æ·»åŠ çš„æ–‡ä»¶å·²ç»è¢«å­˜å…¥ç¼“å­˜åŒºï¼ŒGitçŠ¶æ€å˜ä¸ºæœ‰ä¸€ä¸ªæ”¹å˜æœªæäº¤ï¼Œåé¢åœ¨ä½¿ç”¨commitå‘½ä»¤å³å¯è¿›è¡Œæœ¬æ¬¡æ“ä½œçš„æäº¤ã€‚ åŒæ ·ï¼Œå¦‚æœæˆ‘ä»¬å¯¹ä¸€ä¸ªå·²ç»å­˜åœ¨çš„æ–‡ä»¶è¿›è¡Œäº†ä¿®æ”¹ï¼ŒæŸ¥çœ‹Gitä»“åº“çŠ¶æ€å¦‚ä¸‹ï¼š è‹¥è¦æäº¤æ­¤æ¬¡ä¿®æ”¹ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦å…ˆä½¿ç”¨addå°†æ­¤æ–‡ä»¶æ“ä½œæ›´æ–°åˆ°ç¼“å­˜åŒºï¼Œä¹‹åå†æäº¤ã€‚ ä¸addå‘½ä»¤ç›¸å…³å‚æ•°è§£æå¦‚ä¸‹ï¼š 1.git add å°†æŸä¸ªæ–‡ä»¶çš„ä¿®æ”¹çŠ¶æ€æ›´æ–°åˆ°Gitç¼“å­˜åŒºã€‚ 2.git add â€“dry-run å¹¶ä¸çœŸæ­£çš„æ›´æ–° GitçŠ¶æ€ï¼Œä»…ä»…å±•ç¤ºä¸‹æ›´æ–°ç»“æœã€‚ 3.git add â€“force å…è®¸æ·»åŠ å¿½ç•¥çš„æ–‡ä»¶ã€‚ 4.git add â€“edit æ‰“å¼€å·®å¼‚ç¼–è¯‘æ¨¡å¼ã€‚ 5.git add â€“allä¸æŒ‡å®šæ–‡ä»¶åˆ™ä¼šæ›´æ–°æ‰€æœ‰æœ‰å˜åŒ–çš„æ–‡ä»¶è¿›ç¼“å­˜åŒºã€‚ 6.git add â€“refreshä¸æ›´æ–°æ–‡ä»¶ï¼Œä»…ä»…è¿›è¡Œåˆ·æ–°ã€‚ 7.git add â€“ignore-errorså¦‚æœæŸäº›æ–‡ä»¶ç”±äºé”™è¯¯æ— æ³•è¢«æ›´æ–°ï¼Œåˆ™å¿½ç•¥è¿™äº›é”™è¯¯ï¼Œå°†å…¶ä»–æ–‡ä»¶è¿›è¡Œæ›´æ–°ã€‚","categories":[{"name":"GIT","slug":"GIT","permalink":"http://huishao.cc/categories/GIT/"}],"tags":[],"keywords":[{"name":"GIT","slug":"GIT","permalink":"http://huishao.cc/categories/GIT/"}]},{"title":"Gitå‘½ä»¤é›†ä¹‹å››â€”â€”å…‹éš†å‘½ä»¤","slug":"309Gitå‘½ä»¤é›†ä¹‹å››â€”â€”å…‹éš†å‘½ä»¤","date":"2017-02-27T16:00:00.000Z","updated":"2021-07-14T02:55:07.260Z","comments":true,"path":"2017/02/28/309Gitå‘½ä»¤é›†ä¹‹å››â€”â€”å…‹éš†å‘½ä»¤/","link":"","permalink":"http://huishao.cc/2017/02/28/309Gitå‘½ä»¤é›†ä¹‹å››â€”â€”å…‹éš†å‘½ä»¤/","excerpt":"","text":"Gitå‘½ä»¤é›†ä¹‹å››â€”â€”å…‹éš†å‘½ä»¤1.git clone è¿™ä¸ªå‘½ä»¤æ˜¯æœ€åŸºæœ¬çš„å…‹éš†å‘½ä»¤ï¼Œå…¶å¯ä»¥ä»ä¸€ä¸ªè¿œç¨‹ä»“åº“ä¸­å°†Gitä»“åº“å…‹éš†å²›æœ¬åœ°ï¼Œéœ€è¦æ³¨æ„ï¼Œç¬¬2ä¸ªå‚æ•°å¯ä»¥çœç•¥ï¼Œå¦‚æœçœç•¥ï¼Œåˆ™åœ¨æœ¬åœ°é»˜è®¤åˆ›å»ºä¸€ä¸ªå’Œè¿œç¨‹ä»“åº“åç›¸åŒçš„ç›®å½•ï¼Œä¸çœç•¥åˆ™åœ¨æœ¬åœ°åˆ›å»ºçš„ç›®å½•åå³æ˜¯è®¾ç½®çš„dicNameå€¼ã€‚Gitä¸åªå¯ä»¥å…‹éš†è¿œç¨‹ä»“åº“ï¼Œä¹Ÿå¯ä»¥å¯¹æœ¬åœ°çš„ä»“åº“è¿›è¡Œå…‹éš†ï¼Œä½†è¿™å¹¶æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰ã€‚ 2.git clone â€“local å…‹éš†æœ¬åœ°ä»“åº“ã€‚ 3.git clone â€“quiet å…‹éš†è¿‡ç¨‹ä¸­åªå¯¹é”™è¯¯ä¿¡æ¯è¿›è¡Œè¾“å‡ºã€‚ 4.git clone â€“progress å…‹éš†è¿‡ç¨‹ä¸­æŠ¥å‘Šè¿›è¡ŒçŠ¶æ€ã€‚ 5.git clone â€“no-checkout å…‹éš†å®Œæˆåï¼Œä¸å¯¹å½“å‰åˆ†æ”¯è¿›è¡Œæ£€å‡ºã€‚ 6.git clone â€“origin ä½¿ç”¨è‡ªå®šä¹‰çš„åç§°ä»£æ›¿è¿œç¨‹originåã€‚ 7.git clone â€“branch å…‹éš†ä»“åº“åç›´æ¥å°†æŒ‡å®šçš„åˆ†æ”¯æ£€å‡ºã€‚ 8.git clone â€“templateè®¾ç½®ä¸€ä¸ªæŒ‡å®šçš„æ¨¡æ¿è¿›è¡Œå…‹éš†ã€‚ 9.git clone â€“config =å¯¹æ–°å…‹éš†çš„ä»“åº“åº”ç”¨æŒ‡å®šçš„é…ç½®ã€‚","categories":[{"name":"GIT","slug":"GIT","permalink":"http://huishao.cc/categories/GIT/"}],"tags":[],"keywords":[{"name":"GIT","slug":"GIT","permalink":"http://huishao.cc/categories/GIT/"}]},{"title":"Gitå‘½ä»¤é›†ä¹‹ä¸‰â€”â€”å¸®åŠ©ä¸åˆå§‹åŒ–å‘½ä»¤","slug":"308Gitå‘½ä»¤é›†ä¹‹ä¸‰â€”â€”å¸®åŠ©ä¸åˆå§‹åŒ–å‘½ä»¤","date":"2017-02-20T16:00:00.000Z","updated":"2021-07-14T02:39:20.142Z","comments":true,"path":"2017/02/21/308Gitå‘½ä»¤é›†ä¹‹ä¸‰â€”â€”å¸®åŠ©ä¸åˆå§‹åŒ–å‘½ä»¤/","link":"","permalink":"http://huishao.cc/2017/02/21/308Gitå‘½ä»¤é›†ä¹‹ä¸‰â€”â€”å¸®åŠ©ä¸åˆå§‹åŒ–å‘½ä»¤/","excerpt":"","text":"Gitå‘½ä»¤é›†ä¹‹ä¸‰â€”â€”å¸®åŠ©å‘½ä»¤1.git help â€“allæ‰“å°æ‰€æœ‰å¯ç”¨çš„å‘½ä»¤ã€‚ 2.git help â€“guidesæ‰“å°å¯ç”¨çš„ç”¨æˆ·æŒ‡å—ã€‚ 3.git help â€“manå±•ç¤ºgitå‘½ä»¤å¸®åŠ©ä¿¡æ¯ã€‚ 4.git initåœ¨å½“å‰ç›®å½•ä¸‹åˆå§‹åŒ–åˆ›å»ºä¸€ä¸ªGitä»“åº“ã€‚ 5.git init â€“quietåˆå§‹åŒ–ä»“åº“çš„æ—¶å€™åªè¾“å‡ºé”™è¯¯ä¿¡æ¯ã€‚ 6.git init â€“bareåˆ›å»ºGitè£¸åº“ã€‚ 7.git init â€“templateæŒ‡å®šæ¨¡æ¿åˆ›å»ºGitä»“åº“ã€‚","categories":[{"name":"GIT","slug":"GIT","permalink":"http://huishao.cc/categories/GIT/"}],"tags":[],"keywords":[{"name":"GIT","slug":"GIT","permalink":"http://huishao.cc/categories/GIT/"}]},{"title":"Gitå‘½ä»¤é›†ä¹‹äºŒâ€”â€”é…ç½®å‘½ä»¤","slug":"307Gitå‘½ä»¤é›†ä¹‹äºŒâ€”â€”é…ç½®å‘½ä»¤","date":"2017-02-19T16:00:00.000Z","updated":"2021-07-14T02:38:34.132Z","comments":true,"path":"2017/02/20/307Gitå‘½ä»¤é›†ä¹‹äºŒâ€”â€”é…ç½®å‘½ä»¤/","link":"","permalink":"http://huishao.cc/2017/02/20/307Gitå‘½ä»¤é›†ä¹‹äºŒâ€”â€”é…ç½®å‘½ä»¤/","excerpt":"","text":"Gitå‘½ä»¤é›†ä¹‹äºŒâ€”â€”é…ç½®å‘½ä»¤Gitåˆå§‹åŒ–çš„.gitç›®å½•ä¸­ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªconfigæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸­æ˜¯å¯¹Gitä»“åº“åšä¸€äº›ä¸ªæ€§åŒ–çš„é…ç½®ã€‚Gitçš„ç”¨æˆ·é…ç½®é»˜è®¤ä¼šä»å…¨å±€æ–‡ä»¶ä¸­ç»§æ‰¿ï¼Œé¡¹ç›®çš„configæ–‡ä»¶å¯ä»¥è¿›è¡Œè¦†ç›–ä¸ä¸ªæ€§åŒ–ä¿®æ”¹ã€‚Gitæä¾›äº†è®¸å¤šå‘½ä»¤æ¥å¯¹é…ç½®æ–‡ä»¶è¿›è¡Œå¢åˆ æ”¹æŸ¥æ“ä½œã€‚ 1.git config â€“replace-all key valueè¿™ä¸ªå‘½ä»¤ç”¨æ¥ä¿®æ”¹æŸä¸ªé…ç½®é”®å€¼å¯¹ï¼Œä¸æ·»åŠ --replace-allå‚æ•°ä¹Ÿå¯ä»¥è¿›è¡Œé…ç½®é”®å€¼çš„ä¿®æ”¹ï¼Œåªæ˜¯å¯¹äºæŸä¸ªé”®å¯èƒ½å­˜åœ¨å¤šä¸ªå¯¹åº”å€¼æ—¶ï¼Œæ·»åŠ è¿™ä¸ªå‚æ•°åä¼šå…¨éƒ¨è¿›è¡Œä¿®æ”¹ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1git config --replace-all core.bare &quot;true&quot; 2.git config â€“add key valueå‘é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ªé…ç½®é”®ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1git config --add core.new &quot;new&quot; 3.git config â€“get keyæŸ¥è¯¢æŸä¸ªé…ç½®é”®çš„å€¼ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1git config --get core.new 4.git config â€“get-all keyå’ŒæŸ¥è¯¢å‘½ä»¤ç±»ä¼¼ï¼Œç”¨äºä¸€å¯¹å¤šé”®å€¼çš„æŸ¥è¯¢ã€‚ 5.git config â€“global æ·»åŠ â€“globalå‚æ•° å¯¹åº”å…¨å±€çš„Gité…ç½®ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1git config --global --list 6.git config â€“systemæ·»åŠ --systemå‚æ•° å¯¹åº”ç³»ç»Ÿçš„Gité…ç½®ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1git config --system --list 7.git config â€“localæ·»åŠ --systemå‚æ•° å¯¹åº”é¡¹ç›®çš„Gité…ç½®ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1it config --local --list 8.git config â€“file ä½¿ç”¨ç»™å®šçš„æ–‡ä»¶ä½œä¸ºGité…ç½®æ–‡ä»¶ã€‚ 9.git config â€“remove-section sectionNameåˆ é™¤ä¸€ä¸ªé…ç½®åˆ†åŒºï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1git config --remove-section core 10.git config â€“rename-section section newNameä¿®æ”¹ä¸€ä¸ªé…ç½®åˆ†åŒºçš„åå­—ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1git config --rename-section core coor 11.git config â€“unset keyåˆ é™¤ä¸€ä¸ªé…ç½®é”®ã€‚ 12.git config â€“unset-allåˆ é™¤é…ç½®çš„é”®ï¼Œç”¨äºä¸€å¯¹å¤šé”®å€¼çš„åˆ é™¤ï¼Œä¼šåˆ é™¤æ‰€æœ‰è¿™ä¸ªé”®å¯¹åº”çš„å€¼ã€‚ 13.git config â€“listæ‰“å°é…ç½®ä¿¡æ¯ã€‚ 14.git config â€“name-only â€“list åªå¯¹é…ç½®æ–‡ä»¶ä¸­çš„é”®è¿›è¡Œæ‰“å°ã€‚","categories":[{"name":"GIT","slug":"GIT","permalink":"http://huishao.cc/categories/GIT/"}],"tags":[],"keywords":[{"name":"GIT","slug":"GIT","permalink":"http://huishao.cc/categories/GIT/"}]},{"title":"Gitå‘½ä»¤é›†ä¹‹ä¸€â€”â€”é…ç½®å‚æ•°","slug":"306Gitå‘½ä»¤é›†ä¹‹ä¸€â€”â€”é…ç½®å‚æ•°","date":"2017-02-16T16:00:00.000Z","updated":"2021-07-14T02:37:53.196Z","comments":true,"path":"2017/02/17/306Gitå‘½ä»¤é›†ä¹‹ä¸€â€”â€”é…ç½®å‚æ•°/","link":"","permalink":"http://huishao.cc/2017/02/17/306Gitå‘½ä»¤é›†ä¹‹ä¸€â€”â€”é…ç½®å‚æ•°/","excerpt":"","text":"Gitå‘½ä»¤é›†ä¹‹ä¸€â€”â€”é…ç½®å‚æ•°1.â€“versionå‘½ä»¤ä½¿ç”¨git â€“versionå‘½ä»¤å¯ä»¥è·å–å½“å‰å®‰è£…ä¸ªGitç‰ˆæœ¬å·ã€‚ 2.â€“helpå‘½ä»¤è·å–Gitå¸®åŠ©æ–‡æ¡£ï¼Œä¿¡æ¯ç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142usage: git [--version] [--help] [-C &lt;path&gt;] [-c name=value] [--exec-path[=&lt;path&gt;]] [--html-path] [--man-path] [--info-path] [-p | --paginate | --no-pager] [--no-replace-objects] [--bare] [--git-dir=&lt;path&gt;] [--work-tree=&lt;path&gt;] [--namespace=&lt;name&gt;] &lt;command&gt; [&lt;args&gt;]These are common Git commands used in various situations:start a working area (see also: git help tutorial) clone Clone a repository into a new directory init Create an empty Git repository or reinitialize an existing onework on the current change (see also: git help everyday) add Add file contents to the index mv Move or rename a file, a directory, or a symlink reset Reset current HEAD to the specified state rm Remove files from the working tree and from the indexexamine the history and state (see also: git help revisions) bisect Use binary search to find the commit that introduced a bug grep Print lines matching a pattern log Show commit logs show Show various types of objects status Show the working tree statusgrow, mark and tweak your common history branch List, create, or delete branches checkout Switch branches or restore working tree files commit Record changes to the repository diff Show changes between commits, commit and working tree, etc merge Join two or more development histories together rebase Reapply commits on top of another base tip tag Create, list, delete or verify a tag object signed with GPGcollaborate (see also: git help workflows) fetch Download objects and refs from another repository pull Fetch from and integrate with another repository or a local branch push Update remote refs along with associated objects&apos;git help -a&apos; and &apos;git help -g&apos; list available subcommands and someconcept guides. See &apos;git help &lt;command&gt;&apos; or &apos;git help &lt;concept&gt;&apos;to read about a specific subcommand or concept. 3.-C è¿™ä¸ªå‘½ä»¤ç”¨äºä¿®æ”¹gitå‘½ä»¤æ‰§è¡Œçš„ç›®å½•ï¼Œä¾‹å¦‚åœ¨æ¡Œé¢æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å’Œè¿›å…¥åˆ°IBoxæ–‡ä»¶å¤¹ä¸­æ‰§è¡Œstatusæ˜¯ä¸€æ ·çš„ï¼š 1git -C iBox status 4.-c =åœ¨æ‰§è¡Œgitå‘½ä»¤æ—¶ï¼Œæ·»åŠ è¿™æ ·çš„ä¸€ä¸ªå‚æ•°å°†ä½¿ç”¨æ–°çš„valueå€¼æ›¿æ¢æ‰configæ–‡ä»¶ä¸­nameå¯¹åº”çš„å‚æ•°é…ç½®çš„å€¼æ¥æ‰§è¡Œå‘½ä»¤ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1git -c bare=false status 5.â€“exec-pathæ‰“å°Gitä¸»ç¨‹åºæ‰€åœ¨çš„è·¯å¾„ã€‚ 6.â€“html-pathæ‰“å°Gitæ–‡æ¡£æ‰€åœ¨è·¯å¾„ã€‚ 7.â€“man-pathæ‰“å°Gitå¸®åŠ©æ–‡æ¡£æ‰€åœ¨è·¯å¾„ã€‚ 8.â€“info-pathæ‰“å°è®°å½•Gitç‰ˆæœ¬ä¿¡æ¯çš„æ–‡ä»¶è·¯å¾„ã€‚ 9.â€“paginateå¯¹Gitçš„è¾“å‡ºè¿›è¡Œåˆ†é¡µï¼Œå¯¹äºå¤§é‡ä¿¡æ¯çš„æ‰“å°ï¼Œå¯ä»¥åˆ†é¡µè¿›è¡ŒæŸ¥çœ‹ã€‚ 10.â€“no-pagerå¯¹Gitçš„è¾“å‡ºä¸è¿›è¡Œåˆ†é¡µã€‚ 11.â€“git-dir=è®¾ç½®Gitä»“åº“çš„è·¯å¾„ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½æ˜¯åœ¨å½“å‰Gitä»“åº“ç›®å½•å†…æ‰§è¡ŒGitå‘½ä»¤ï¼Œæœ‰æ—¶å€™ä¹Ÿå¯ä»¥åœ¨å…¶ä»–ç›®å½•ä¸‹å¯¹æŸä¸ªGitä»“åº“è¿›è¡Œæ“ä½œï¼Œä¾‹å¦‚: 1git --git-dir=GitDemo/.git status 12.â€“work-tree=è®¾ç½®Gitçš„å·¥ä½œç›®å½•ï¼Œè¿™ä¸ªç›®å½•ä¸­æ–‡ä»¶å˜åŒ–éƒ½ä¼šè®°å½•åˆ°Gitç®¡ç†ä»“åº“ä¸­ã€‚ 13.â€“namespace=è®¾ç½®Gitçš„å‘½åç©ºé—´ã€‚ 14.â€“bareå°†Gitä»“åº“è§†ä¸ºè£¸åº“ã€‚","categories":[{"name":"GIT","slug":"GIT","permalink":"http://huishao.cc/categories/GIT/"}],"tags":[],"keywords":[{"name":"GIT","slug":"GIT","permalink":"http://huishao.cc/categories/GIT/"}]},{"title":"æ·±å…¥ç†è§£JavaScriptå‡½æ•°","slug":"305æ·±å…¥ç†è§£JavaScriptå‡½æ•°","date":"2017-02-14T16:00:00.000Z","updated":"2021-07-14T02:36:53.494Z","comments":true,"path":"2017/02/15/305æ·±å…¥ç†è§£JavaScriptå‡½æ•°/","link":"","permalink":"http://huishao.cc/2017/02/15/305æ·±å…¥ç†è§£JavaScriptå‡½æ•°/","excerpt":"","text":"æ·±å…¥ç†è§£JavaScriptå‡½æ•°ä¸€ã€å¼•è¨€ä»åŠŸèƒ½ä¸Šç†è§£ï¼Œå‡½æ•°æ˜¯ä¸€ç»„å¯ä»¥éšæ—¶è¿è¡Œçš„è¯­å¥ï¼Œæ˜¯ä¸€æ®µä»£ç å—ï¼Œä¹Ÿæ˜¯æ‰€è°“çš„å­ç¨‹åºã€‚åœ¨JavaScriptä¸­ï¼Œå‡½æ•°å®è´¨ä¸Šä¹Ÿæ˜¯ä¸€ç§å¯¹è±¡ï¼Œæ˜¯Functionå¯¹è±¡ã€‚å‡½æ•°é€šå¸¸ä¼šæœ‰å‚æ•°ä¸è¿”å›å€¼(ä¸æ˜¯å¿…é¡»)ï¼Œåœ¨JavaScriptä¸­ï¼Œå‡½æ•°çš„åº”ç”¨ååˆ†çµæ´»ï¼Œä¹Ÿæœ‰å¤šç§å®šä¹‰å‡½æ•°çš„æ–¹æ³•ã€‚ äºŒã€å‡ ç§å®šä¹‰å‡½æ•°çš„æ–¹å¼åœ¨JavaScriptä¸­ï¼Œå¯ä»¥é€šè¿‡å‡½æ•°è¯­å¥æ¥å£°æ˜å’Œå®šä¹‰å‡½æ•°ã€å¯ä»¥é€šè¿‡å‡½æ•°è¡¨è¾¾å¼æ¥å°†åˆ›å»ºå‡½æ•°ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨Functionæ„é€ æ–¹æ³•æ¥åˆ›å»ºå‡½æ•°å¯¹è±¡ã€‚ 1ã€ä½¿ç”¨å‡½æ•°è¯­å¥æ¥å®šä¹‰å‡½æ•°JavaScriptä¸­æœ‰ä¸€ç§ç‰¹æ®Šçš„è¯­æ³•æ¥ç›´æ¥å®šä¹‰å‡½æ•°ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234//ä½¿ç”¨å‡½æ•°è¯­å¥å®šä¹‰å‡½æ•°function outputName()&#123; console.log(\"Jaki\");&#125; å‡½æ•°è¯­å¥æœ‰è¿™æ ·çš„ç»“æ„ï¼šfunction name(paramâ€¦){}ã€‚å…¶ä¸­functionä¸ºå‡½æ•°è¯­å¥çš„å…³é”®å­—ï¼Œnameä¸ºè‡ªå®šä¹‰çš„å‡½æ•°åç§°ï¼Œå°æ‹¬å·ä¸­å®šä¹‰å‡½æ•°çš„å½¢å‚ï¼Œå¤§æ‹¬å·ä¸­å¯ä»¥è¿›è¡Œä»£ç çš„ç¼–å†™ã€‚ å¦‚æœä»…ä»…å¯¹ä¸Šé¢çš„ä»£ç è¿›è¡Œè¿è¡Œï¼Œä½ ä¼šå‘ç°ç¨‹åºå¹¶æ²¡æœ‰æ‰§è¡Œä»»ä½•è¡Œä¸ºï¼Œå‡½æ•°å¿…é¡»åœ¨è°ƒç”¨æ—¶æ‰ä¼šè¢«æ‰§è¡Œï¼Œè°ƒç”¨å‡½æ•°ç¤ºä¾‹å¦‚ä¸‹ï¼š 12345//ä½¿ç”¨å‡½æ•°è¯­å¥å®šä¹‰å‡½æ•°function outputName()&#123; console.log(\"Jaki\");&#125;outputName();//å°†æ‰“å°Jaki ä¸Šé¢çš„å®šä¹‰çš„å‡½æ•°æ˜¯æœ€ç®€å•çš„å‡½æ•°å½¢å¼ï¼Œå‡½æ•°ä¹Ÿå¯ä»¥é€šè¿‡ä¼ å…¥å‚æ•°çš„å·®å¼‚æ¥åšä¸åŒçš„åŠŸèƒ½ï¼Œä¾‹å¦‚ä¿®æ”¹ä¸Šé¢çš„å‡½æ•°ï¼Œä½¿å…¶ä¼ å…¥å§“åå¹¶ä¸”è¿›è¡Œæ‰“å°è¾“å‡ºï¼š 12345//ä½¿ç”¨å‡½æ•°è¯­å¥å®šä¹‰å‡½æ•°function outputName(name)&#123; console.log(name);&#125;outputName(\"å¼ ä¸‰\");//å°†æ‰“å°å¼ ä¸‰ å‡½æ•°ä¹Ÿå¯ä»¥æä¾›ä¸€ä¸ªè¿”å›å€¼ï¼Œä¾‹å¦‚ä¸€ä¸ªç®€å•çš„åŠ æ³•è¿ç®—å‡½æ•°ï¼Œå¦‚ä¸‹ï¼š 12345function add(a,b)&#123; return a+b;&#125;var res = add(3,4);console.log(res);//7 åœ¨JavaScriptä¸­ï¼Œå‡½æ•°çš„è¿”å›å€¼ç±»å‹ä¸éœ€è¦ç‰¹æ®ŠæŒ‡å®šï¼Œç›´æ¥ä½¿ç”¨returnè¯­å¥è¿”å›å³å¯ã€‚éœ€è¦æ³¨æ„ï¼Œå®é™…ä¸Šä»»ä½•å‡½æ•°éƒ½æ˜¯æœ‰è¿”å›å€¼çš„ï¼Œå¦‚æœå‡½æ•°ä½“ä¸­æ²¡æœ‰ä½¿ç”¨returnè¯­å¥æ˜¾å¼çš„è¿›è¡Œè¿”å›ï¼Œåˆ™é»˜è®¤ä¼šè¿”å›undefinedã€‚ JavaScriptä¸­å‡½æ•°çš„å®šä¹‰ä¸ä½¿ç”¨ä¸ä¸€å®šéè¦æŒ‰ç…§é¡ºåºè¿›è¡Œï¼Œå®é™…ä¸Šä¹Ÿå¯ä»¥å°†å‡½æ•°çš„å®šä¹‰å†™åœ¨ä½¿ç”¨ä¹‹å(è§£é‡Šå™¨ä¼šåœ¨ä¸å¤„ç†é˜¶æ®µè§£é‡Šå®šä¹‰çš„å‡½æ•°)ï¼Œå¦‚ä¸‹ï¼š 12345var res = add(3,4);function add(a,b)&#123; return a+b;&#125;console.log(res);//7 2.ä½¿ç”¨å‡½æ•°è¡¨è¾¾å¼æ¥å®šä¹‰å‡½æ•°ä½¿ç”¨å‡½æ•°è¡¨è¾¾å¼æ¥å®šä¹‰å‡½æ•°ä¸å‡½æ•°è¯­å¥çš„è¯­æ³•ååˆ†ç›¸ä¼¼ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456//ä½¿ç”¨å‡½æ•°è¡¨è¾¾å¼æ¥å®šä¹‰å‡½æ•°var addFunc = function(a,b)&#123; return a+b; &#125;;var res = addFunc(3,3);console.log(res);//6 è¿™ç§æ–¹å¼å®šä¹‰çš„å‡½æ•°å®é™…ä¸Šæ˜¯åˆ›å»ºäº†ä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼Œä¹‹åå°†è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨èµ‹å€¼ç»™äº†ä¸€ä¸ªå˜é‡ï¼Œé€šè¿‡å˜é‡å¼€å‘è€…å¯ä»¥è®¿é—®å’Œè°ƒç”¨å‡½æ•°ã€‚éœ€è¦æ³¨æ„ï¼Œå‡½æ•°è¡¨è¾¾å¼ä¸å‡½æ•°è¯­å¥çš„æœ€å¤§åŒºåˆ«åœ¨äºå…¶å¯ä»¥çœç•¥å‡½æ•°åï¼Œå³å¯ä»¥å®šä¹‰åŒ¿åå‡½æ•°ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼å®šä¹‰çš„å‡½æ•°åœ¨å‡½æ•°å®šä¹‰ä¹‹å‰æ˜¯ä¸èƒ½å¤Ÿè¢«è°ƒç”¨çš„ï¼Œè¿™ä¹Ÿå¾ˆå¥½ç†è§£ï¼ŒJavaScriptè§£é‡Šå™¨åœ¨é¢„å¤„ç†æœŸé—´åªæ˜¯è§£æé™¤äº†addFuncå˜é‡ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰å¯¹å…¶è¡¨è¾¾å¼è¿›è¡Œè¿ç®—ï¼Œè¿™æ—¶å‡½æ•°å¹¶æ²¡æœ‰è¢«å®šä¹‰ï¼Œä¾‹å¦‚ä¸‹é¢çš„ä»£ç å°†æŠ¥é”™ï¼š 12345var res = addFunc(3,3);//ä½¿ç”¨å‡½æ•°è¡¨è¾¾å¼æ¥å®šä¹‰å‡½æ•°var addFunc = function(a,b)&#123; return a+b; &#125;; å…¶å®å‡½æ•°è¯­å¥ä¸å‡½æ•°è¡¨è¾¾å¼å®šä¹‰çš„å‡½æ•°è¿˜æœ‰ä¸€ç‚¹é‡å¤§åŒºåˆ«ï¼Œå‡½æ•°è¯­å¥å®šä¹‰åå‡½æ•°åå®é™…ä¸Šæ˜¯æ— æ³•ä¿®æ”¹çš„ï¼Œè€Œä½¿ç”¨å‡½æ•°è¡¨è¾¾å¼å®šä¹‰çš„å‡½æ•°æ˜¯å°†å¼•ç”¨èµ‹å€¼ç»™äº†å˜é‡ï¼Œå˜é‡å¯ä»¥é‡æ–°èµ‹å€¼ï¼Œä¹Ÿå¯ä»¥å°†ä¸¤ä¸ªå˜é‡èµ‹å€¼ä¸ºåŒä¸€ä¸ªå‡½æ•°å¯¹è±¡çš„å¼•ç”¨ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910//ä½¿ç”¨å‡½æ•°è¡¨è¾¾å¼æ¥å®šä¹‰å‡½æ•°var addFunc = function(a,b)&#123; return a+b; &#125;;//å°†addFuncçš„å€¼èµ‹å€¼ç»™å¦ä¸€ä¸ªå˜é‡var addFunc2 = addFunc;//å°†addFuncå˜é‡ä¿®æ”¹ä¸ºæ•´å‹å€¼addFunc = 3;var res = addFunc2(3,3);console.log(res);//6 å¦‚æœéœ€è¦åœ¨å‡½æ•°å†…éƒ¨è°ƒç”¨å‡½æ•°æœ¬èº«ï¼Œå³éœ€è¦å®šä¹‰é€’å½’å‡½æ•°æ—¶ï¼Œå‡½æ•°è¡¨è¾¾å¼ä¹Ÿå¯ä»¥è¿›è¡Œå‡½æ•°å‘½åï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011//å®šä¹‰ä¸€ä¸ªé€’å½’é˜¶ä¹˜å‡½æ•°var mathFunc = function mathF(a)&#123; var res = a; a--; if (a&gt;0) &#123; res *= mathFunc(a); &#125; return res;&#125;;var mathRes = mathFunc(5);console.log(mathRes);//120 éœ€è¦æ³¨æ„ï¼Œå‡½æ•°è¡¨è¾¾å¼å®šä¹‰çš„å‡½æ•°ååªèƒ½ä½œç”¨äºå‡½æ•°å†…éƒ¨ã€‚ 3.ä½¿ç”¨Functionæ„é€ å‡½æ•°å‰é¢æœ‰æåˆ°ï¼Œå‡½æ•°åœ¨JavaScriptä¸­å®é™…ä¸Šä¹Ÿæ˜¯ä¸€ç§å¯¹è±¡ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨newå…³é”®å­—æ¥è¿›è¡Œå‡½æ•°å¯¹è±¡çš„æ„é€ ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123//Functionæ„é€ å™¨var myFunc = new Function(\"name\",\"console.log(name)\");myFunc(\"Jaki\");//Jaki Functionæ„é€ å…¶çš„æ ¼å¼å¦‚ä¸‹ï¼šFunction(param,paramâ€¦,funcbody)ã€‚å…¶ä¸­å‚æ•°ä¸ªæ•°ä¸å›ºå®šï¼Œæœ€åä¸€ä¸ªå‚æ•°ä¸ºåˆ›å»ºçš„å‡½æ•°çš„å‡½æ•°ä½“å­—ç¬¦ä¸²ï¼Œå‰é¢çš„å‚æ•°å…¨éƒ¨éƒ½å°†ä½œä¸ºå‡½æ•°çš„å½¢å‚ä¼ å…¥å‡½æ•°ä½“å†…ã€‚ å®é™…ä¸Šï¼Œæ— è®ºé€šè¿‡å“ªç§æ–¹å¼åˆ›å»ºçš„å‡½æ•°ï¼Œå…¶å®è´¨ä¸Šéƒ½æ˜¯Functionå¯¹è±¡ï¼ŒFunctionå¯¹è±¡ä¸­ä¹Ÿæœ‰ä¸€äº›å†…ç½®çš„å±æ€§ï¼Œå…¶ä¸­æœ€é•¿ç”¨çš„ä¸ºargumentså±æ€§ã€‚argumentså±æ€§æ˜¯å®é™…ä¼ å…¥å‡½æ•°çš„å‚æ•°æ•°ç»„ï¼Œå…¶lengthå±æ€§ä¸ºå‡½æ•°æ‰€ä¼ å…¥çš„å‚æ•°ä¸ªæ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¼€å‘è€…åœ¨å®šä¹‰å‡½æ•°çš„æ—¶å€™å®é™…ä¸Šå¯ä»¥ä¸å®šä¹‰å½¢å‚ï¼Œåœ¨è°ƒç”¨å‡½æ•°çš„æ—¶å€™ç›´æ¥è¿›è¡Œå®å‚çš„ä¼ å…¥ï¼Œå‡½æ•°å†…éƒ¨è¿˜æ˜¯å¯ä»¥è·å–åˆ°å‚æ•°ï¼ŒJavaScriptå‡½æ•°çš„å¯¹è±¡ç‰¹æ€§ä½¿å¾—å…¶ååˆ†çµæ´»ï¼Œå½¢å‚å¹¶ä¸èƒ½å†³å®šå‡½æ•°çš„å‚æ•°ä¸ªæ•°ä¸ç±»å‹ï¼Œå®å‚ã€å‡½æ•°ä½“å’Œè¿”å›å€¼è¿™äº›éƒ½å¯ä»¥åœ¨è¿è¡Œæ—¶å†³å®šï¼ç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789function testFunc()&#123; console.log(arguments.length); console.log(arguments);&#125;/*3&#123; '0': '1', '1': 2, '2': 3 &#125;*/testFunc('1',2,3); å‡½æ•°æ˜¯åŠŸèƒ½å®Œæ•´çš„å¯¹è±¡ï¼Œå®é™…ä¸Šå‡½æ•°å¯¹è±¡æœ¬èº«ä¹Ÿæœ‰ä¸€ä¸ªlengthå±æ€§ï¼Œè¿™ä¸ªå±æ€§å°†è·å–åˆ°å‡½æ•°é¢„æœŸå½¢å‚çš„ä¸ªæ•°ï¼Œå³å¯ä»¥æ–¹ä¾¿çš„è·å–åˆ°å‡½æ•°é¢„æœŸéœ€è¦ä¼ å…¥çš„å‚æ•°çš„ä¸ªæ•°ï¼Œä¾‹å¦‚ï¼š 123456789function testFunc()&#123; console.log(arguments.length); console.log(arguments);&#125;function textFunc2(name)&#123; &#125;console.log(testFunc.length); //0console.log(textFunc2.length); //1 ä¸‰ã€ç†è§£å‡½æ•°è¯­å¥ä¸å‡½æ•°è¡¨è¾¾å¼å‡½æ•°è¯­å¥æ˜¯å®šä¹‰å‡½æ•°çš„ä¸€ç§è¯­æ³•ï¼Œè€Œå‡½æ•°è¡¨è¾¾å¼å®é™…ä¸Šå°±æ˜¯è¿”å›ä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼Œå› æ­¤å‡½æ•°è¡¨è¾¾å¼å¯ä»¥ç›´æ¥è¿›è¡Œè°ƒç”¨ï¼Œè¯·çœ‹å¦‚ä¸‹ä»£ç ï¼š 123var addFuncS = function(a,b)&#123; console.log(a+b); &#125;(1,2);//3 ä¸Šé¢çš„ä»£ç ä¸­çš„addFuncSå·²ç»ä¸å†æ˜¯ä¸€ä¸ªå‡½æ•°å¯¹è±¡çš„å¼•ç”¨ï¼Œè€Œæ˜¯æ•°å€¼3ã€‚åœ¨å‡½æ•°è¡¨è¾¾å¼åé¢å¯ä»¥ç›´æ¥è·Ÿå°æ‹¬å·ä¼ å‚è¿›è¡Œå‡½æ•°çš„è°ƒç”¨ï¼Œä½†æ˜¯å¦‚ä¸‹çš„å†™æ³•å°†ä¼šæŠ¥é”™ï¼š 123function addFuncE()&#123; console.log(\"hello\");&#125;(); åœ¨JavaScriptä¸­å‡½æ•°è¡¨è¾¾å¼ååˆ†å®¹æ˜“è¢«è¯¯è®¤ä¸ºæ˜¯å‡½æ•°å®šä¹‰çš„è¯­æ³•ï¼ŒåŒºåˆ†äº†ä¸Šé¢ä¸¤ç§æƒ…å†µï¼Œä½ ä¼šå‘ç°è¿™æ˜¯åœ¨ç¼–ç¨‹è¿‡ç¨‹ä¸­ååˆ†å±é™©ï¼ŒJavaScriptä¸­çš„å‡½æ•°è¯­æ³•æœ‰å¦‚ä¸‹ä¸¤æ¡è§„åˆ™ï¼š 1.å½“å‡½æ•°è¯­æ³•æˆä¸ºè¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†æ—¶ï¼Œå…¶ä¼šè¢«è½¬æ¢æˆä¸ºå‡½æ•°è¡¨è¾¾å¼ã€‚ 2.å†…åµŒäºéå‡½æ•°çš„å…¶ä»–ä»£ç å—ä¸­æ—¶ï¼Œå‡½æ•°è¯­æ³•ä¼šè¢«è½¬æ¢æˆå‡½æ•°è¡¨è¾¾å¼ã€‚ ä¾‹å­å¦‚ä¸‹ï¼š 123456789//å‡½æ•°è¯­æ³•è¢«è½¬æ¢æˆå‡½æ•°è¡¨è¾¾å¼//1.å‡½æ•°è¯­æ³•æˆä¸ºè¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†(function f1()&#123;console.log(\"f1\")&#125;)();//2.å‡½æ•°è¯­æ³•å†…åµŒäºéå‡½æ•°çš„ä»£ç å—æ±‡æ€»if (true) &#123; (function f2()&#123; console.log(\"f2\"); &#125;)();&#125;","categories":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}],"tags":[],"keywords":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}]},{"title":"iOSä¸­ImageIOæ¡†æ¶è¯¦è§£ä¸åº”ç”¨åˆ†æ","slug":"304 iOSä¸­ImageIOæ¡†æ¶è¯¦è§£ä¸åº”ç”¨åˆ†æ","date":"2017-02-13T16:00:00.000Z","updated":"2021-07-14T02:36:02.871Z","comments":true,"path":"2017/02/14/304 iOSä¸­ImageIOæ¡†æ¶è¯¦è§£ä¸åº”ç”¨åˆ†æ/","link":"","permalink":"http://huishao.cc/2017/02/14/304 iOSä¸­ImageIOæ¡†æ¶è¯¦è§£ä¸åº”ç”¨åˆ†æ/","excerpt":"","text":"iOSä¸­ImageIOæ¡†æ¶è¯¦è§£ä¸åº”ç”¨åˆ†æä¸€ã€å¼•è¨€ImageIOæ¡†æ¶æä¾›äº†è¯»å–ä¸å†™å…¥å›¾ç‰‡æ•°æ®çš„åŸºæœ¬æ–¹æ³•ï¼Œä½¿ç”¨å®ƒå¯ä»¥ç›´æ¥è·å–åˆ°å›¾ç‰‡æ–‡ä»¶çš„å†…å®¹æ•°æ®ï¼ŒImageIOæ¡†æ¶ä¸­åŒ…å«6ä¸ªå¤´æ–‡ä»¶ï¼Œå…¶ä¸­å®Œæˆä¸»è¦åŠŸèƒ½çš„æ˜¯å‰ä¸¤ä¸ªå¤´æ–‡ä»¶ä¸­å®šä¹‰çš„æ–¹æ³•ï¼š 1.CGImageSource.h:è´Ÿè´£è¯»å–å›¾ç‰‡æ•°æ®ã€‚ 2.CGImageDestination.h:è´Ÿè´£å†™å…¥å›¾ç‰‡æ•°æ®ã€‚ 3.CGImageMetadata.h:å›¾ç‰‡æ–‡ä»¶å…ƒæ•°æ®ç±»ã€‚ 4.CGImageProperties:å®šä¹‰äº†æ¡†æ¶ä¸­ä½¿ç”¨çš„å­—ç¬¦ä¸²å¸¸é‡å’Œå®ã€‚ 5.ImageIOBase.h:é¢„å¤„ç†é€»è¾‘ï¼Œæ— éœ€å…³å¿ƒã€‚ äºŒã€CGImageSourceè¯¦è§£CGImageSourceç±»çš„ä¸»è¦ä½œç”¨æ˜¯ç”¨æ¥è¯»å–å›¾ç‰‡æ•°æ®ï¼Œåœ¨å¹³æ—¶å¼€å‘ä¸­ï¼Œå…³äºå›¾ç‰‡æˆ‘ä»¬ä½¿ç”¨çš„æœ€å¤šçš„å¯èƒ½æ˜¯UIImageç±»ï¼ŒUIImageæ˜¯iOSç³»ç»ŸUIç³»ç»Ÿä¸­ç”¨äºæ„å»ºå›¾åƒå¯¹è±¡çš„ç±»ï¼Œä½†æ˜¯å…¶ä¸­åªæœ‰å›¾åƒæ•°æ®ï¼Œå®é™…ä¸Šä¸€ä¸ªå›¾ç‰‡æ–‡ä»¶ä¸­å­˜å‚¨çš„é™¤äº†å›¾ç‰‡æ•°æ®å¤–ï¼Œè¿˜æœ‰ä¸€äº›åœ°ç†ä½ç½®ã€è®¾å¤‡ç±»å‹ã€æ—¶é—´ç­‰ä¿¡æ¯ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œä¸€ä¸ªå›¾ç‰‡æ–‡ä»¶ä¸­å¯èƒ½å­˜å‚¨çš„ä¹Ÿä¸åªä¸€å¼ å›¾åƒ(ä¾‹å¦‚gifæ–‡ä»¶)ã€‚CGImageSourceå°±æ˜¯è¿™æ ·çš„ä¸€ä¸ªæŠ½è±¡å›¾ç‰‡æ•°æ®ç¤ºä¾‹ï¼Œä»å…¶ä¸­å¯ä»¥è·å–åˆ°æˆ‘ä»¬æ‰€å…³å¿ƒçš„æ‰€æœ‰æ•°æ®ã€‚ è¯»å–å›¾ç‰‡æ–‡ä»¶æ•°æ®ï¼Œå¹¶å°†å…¶å±•ç¤ºåœ¨è§†å›¾çš„ç®€å•ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415//è·å–å›¾ç‰‡æ–‡ä»¶è·¯å¾„NSString * path = [[NSBundle mainBundle]pathForResource:@\"timg\" ofType:@\"jpeg\"];NSURL * url = [NSURL fileURLWithPath:path];CGImageRef myImage = NULL;CGImageSourceRef myImageSource;//é€šè¿‡æ–‡ä»¶è·¯å¾„åˆ›å»ºCGImageSourceå¯¹è±¡myImageSource = CGImageSourceCreateWithURL((CFURLRef)url, NULL);//è·å–ç¬¬ä¸€å¼ å›¾ç‰‡myImage = CGImageSourceCreateImageAtIndex(myImageSource, 0, NULL);CFRelease(myImageSource);UIImageView * image = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 200, 200)];image.image = [UIImage imageWithCGImage:myImage];[self.view addSubview:image]; ä¸Šé¢çš„ç¤ºä¾‹ä»£ç é‡‡ç”¨çš„æ˜¯æœ¬åœ°çš„ä¸€ä¸ªç´ ææ–‡ä»¶ï¼Œå½“ç„¶é€šè¿‡ç½‘ç»œå›¾ç‰‡é“¾æ¥ä¹Ÿæ˜¯å¯ä»¥åˆ›å»ºCGImageSourceç‹¬äº«çš„ã€‚é™¤äº†é€šè¿‡URLé“¾æ¥çš„æ–¹å¼åˆ›å»ºå¯¹è±¡ï¼ŒImageIOæ¡†æ¶ä¸­è¿˜æä¾›äº†ä¸¤ç§æ–¹æ³•ï¼Œè§£æå¦‚ä¸‹ï¼š 1234567//é€šè¿‡æ•°æ®æä¾›å™¨åˆ›å»ºCGImageSourceå¯¹è±¡/*CGDataProviderRefæ˜¯CoreGraphicsæ¡†æ¶ä¸­çš„ä¸€ä¸ªæ•°æ®è¯»å–ç±»ï¼Œå…¶ä¹Ÿå¯ä»¥é€šè¿‡Dataæ•°æ®ï¼ŒURLå’Œæ–‡ä»¶åæ¥åˆ›å»º*/CGImageSourceRef __nullable CGImageSourceCreateWithDataProvider(CGDataProviderRef __nonnull provider, CFDictionaryRef __nullable options);//é€šè¿‡Dataæ•°æ®åˆ›å»ºCGImageSourceå¯¹è±¡CGImageSourceRef __nullable CGImageSourceCreateWithData(CFDataRef __nonnull data, CFDictionaryRef __nullable options); éœ€è¦æ³¨æ„ï¼Œä¸Šé¢æ‰€æåˆ°çš„æ‰€æœ‰åˆ›å»ºCGImageSourceçš„æ–¹æ³•ä¸­éƒ½å¯ä»¥ä¼ å…¥ä¸€ä¸ªCFDictionaryRefç±»å‹çš„å­—å…¸ï¼Œå¯ä»¥é…ç½®çš„é”®å€¼æ„ä¹‰å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930/*è®¾ç½®ä¸€ä¸ªé¢„æœŸçš„å›¾ç‰‡æ–‡ä»¶æ ¼å¼ï¼Œéœ€è¦è®¾ç½®ä¸ºå­—ç¬¦ä¸²ç±»å‹çš„å€¼*/const CFStringRef kCGImageSourceTypeIdentifierHint;/*è®¾ç½®æ˜¯å¦ä»¥è§£ç çš„æ–¹å¼è¯»å–å›¾ç‰‡æ•°æ® é»˜è®¤ä¸ºkCFBooleanTrueå¦‚æœè®¾ç½®ä¸ºtrueï¼Œåœ¨è¯»å–æ•°æ®æ—¶å°±è¿›è¡Œè§£ç  å¦‚æœä¸ºfalse åˆ™åœ¨æ¸²æŸ“æ—¶æ‰è¿›è¡Œè§£ç */const CFStringRef kCGImageSourceShouldCache;/*è¿”å›CGImageå¯¹è±¡æ—¶æ˜¯å¦å…è®¸ä½¿ç”¨æµ®ç‚¹å€¼ é»˜è®¤ä¸ºkCFBooleanFalse*/const CFStringRef kCGImageSourceShouldAllowFloa;/*è®¾ç½®å¦‚æœä¸å­˜åœ¨ç¼©ç•¥å›¾åˆ™åˆ›å»ºä¸€ä¸ªç¼©ç•¥å›¾ï¼Œç¼©ç•¥å›¾çš„å°ºå¯¸å—å¼€å‘è€…è®¾ç½®å½±å“ï¼Œå¦‚æœä¸è®¾ç½®å°ºå¯¸æé™ï¼Œåˆ™ä¸ºå›¾ç‰‡æœ¬èº«å¤§å°é»˜è®¤ä¸ºkCFBooleanFalse*/const CFStringRef kCGImageSourceCreateThumbnailFromImageIfAbsent;/*è®¾ç½®æ˜¯å¦åˆ›å»ºç¼©ç•¥å›¾ï¼Œæ— è®ºåŸå›¾åƒæœ‰æ²¡æœ‰åŒ…å«ç¼©ç•¥å›¾kCFBooleanFalse*/const CFStringRef kCGImageSourceCreateThumbnailFromImageAlways;/*è®¾ç½®ç¼©ç•¥å›¾çš„å®½é«˜å°ºå¯¸ éœ€è¦è®¾ç½®ä¸ºCFNumberå€¼*/const CFStringRef kCGImageSourceThumbnailMaxPixelSize;/*è®¾ç½®ç¼©ç•¥å›¾æ˜¯å¦è¿›è¡ŒTransfromå˜æ¢*/const CFStringRef kCGImageSourceCreateThumbnailWithTransform; CGImageSourceç±»ä¸­å…¶ä»–æ–¹æ³•è§£æå¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849//è·å–CGImageSourceç±»åœ¨CoreFundationæ¡†æ¶ä¸­çš„idCFTypeID CGImageSourceGetTypeID (void);//è·å–æ‰€æ”¯æŒçš„å›¾ç‰‡æ ¼å¼æ•°ç»„CFArrayRef __nonnull CGImageSourceCopyTypeIdentifiers(void);//è·å–CGImageSourceå¯¹è±¡çš„å›¾ç‰‡æ ¼å¼CFStringRef __nullable CGImageSourceGetType(CGImageSourceRef __nonnull isrc);//è·å–CGImageSourceä¸­çš„å›¾ç‰‡å¼ æ•° ä¸åŒ…æ‹¬ç¼©ç•¥å›¾size_t CGImageSourceGetCount(CGImageSourceRef __nonnull isrc);//è·å–CGImageSourceçš„æ–‡ä»¶ä¿¡æ¯/*å­—å…¸å‚æ•°å¯é…ç½®çš„é”®å€¼å¯¹ä¸åˆ›å»ºCGImageSourceæ‰€ä¼ å‚æ•°æ„ä¹‰ä¸€è‡´è¿”å›çš„å­—å…¸ä¸­çš„é”®å€¼æ„ä¹‰åé¢ä»‹ç»*/CFDictionaryRef __nullable CGImageSourceCopyProperties(CGImageSourceRef __nonnull isrc, CFDictionaryRef __nullable options);//è·å–CGImageSourceä¸­æŸä¸ªå›¾åƒçš„é™„åŠ æ•°æ®/*indexå‚æ•°è®¾ç½®è·å–ç¬¬å‡ å¼ å›¾åƒ optionså‚æ•°å¯é…ç½®çš„é”®å€¼å¯¹ä¸åˆ›å»ºCGImageSourceæ‰€ä¼ å‚æ•°æ„ä¹‰ä¸€è‡´è¿”å›çš„å­—å…¸ä¸­çš„é”®å€¼æ„ä¹‰åé¢ä»‹ç»*/CFDictionaryRef __nullable CGImageSourceCopyPropertiesAtIndex(CGImageSourceRef __nonnull isrc, size_t index, CFDictionaryRef __nullable options);//è·å–å›¾ç‰‡çš„å…ƒæ•°æ®ä¿¡æ¯ CGImageMetadataRefç±»æ˜¯å›¾åƒåŸæ•°æ®çš„æŠ½è±¡CGImageMetadataRef __nullable CGImageSourceCopyMetadataAtIndex (CGImageSourceRef __nonnull isrc, size_t index, CFDictionaryRef __nullable options);//è·å–CGImageSourceä¸­çš„å›¾ç‰‡æ•°æ®CGImageRef __nullable CGImageSourceCreateImageAtIndex(CGImageSourceRef __nonnull isrc, size_t index, CFDictionaryRef __nullable options);//åˆ é™¤ä¸€ä¸ªæŒ‡å®šç´¢å¼•å›¾åƒçš„ç¼“å­˜void CGImageSourceRemoveCacheAtIndex(CGImageSourceRef __nonnull isrc, size_t index);//è·å–æŸä¸€å¸§å›¾ç‰‡çš„ç¼©ç•¥å›¾CGImageRef __nullable CGImageSourceCreateThumbnailAtIndex(CGImageSourceRef __nonnull isrc, size_t index, CFDictionaryRef __nullable options);//åˆ›å»ºä¸€ä¸ªç©ºçš„CGImageSourceå®¹å™¨ï¼Œé€æ­¥åŠ è½½å¤§å›¾ç‰‡CGImageSourceRef __nonnull CGImageSourceCreateIncremental(CFDictionaryRef __nullable options);//ä½¿ç”¨æ–°çš„æ•°æ®æ›´æ–°CGImageSourceå®¹å™¨void CGImageSourceUpdateData(CGImageSourceRef __nonnull isrc, CFDataRef __nonnull data, bool final);//æ›´æ–°æ•°æ®æä¾›å™¨æ¥å¡«å……CGImageSourceå®¹å™¨void CGImageSourceUpdateDataProvider(CGImageSourceRef __nonnull isrc, CGDataProviderRef __nonnull provider, bool final);//è·å–å½“å‰CGImageSourceçš„çŠ¶æ€/*CGImageSourceStatusæšä¸¾æ„ä¹‰ï¼štypedef CF_ENUM(int32_t, CGImageSourceStatus) &#123; kCGImageStatusUnexpectedEOF = -5, //æ–‡ä»¶ç»“å°¾å‡ºé”™ kCGImageStatusInvalidData = -4, //æ•°æ®æ— æ•ˆ kCGImageStatusUnknownType = -3, //æœªçŸ¥çš„å›¾ç‰‡ç±»å‹ kCGImageStatusReadingHeader = -2, //è¯»æ ‡é¢˜è¿‡ç¨‹ä¸­ kCGImageStatusIncomplete = -1, //æ“ä½œä¸å®Œæ•´ kCGImageStatusComplete = 0 //æ“ä½œå®Œæ•´&#125;;*/CGImageSourceStatus CGImageSourceGetStatus(CGImageSourceRef __nonnull isrc);//åŒä¸Šï¼Œè·å–æŸä¸€ä¸ªå›¾ç‰‡çš„çŠ¶æ€CGImageSourceStatus CGImageSourceGetStatusAtIndex(CGImageSourceRef __nonnull isrc, size_t index); ä¸‰ã€CGImageDestinationè¯¦è§£CGImageSourceæ˜¯å›¾ç‰‡æ–‡ä»¶æ•°æ®çš„æŠ½è±¡å¯¹è±¡ï¼Œè€ŒCGImageDestinationçš„ä½œç”¨åˆ™æ˜¯å°†æŠ½è±¡çš„å›¾ç‰‡æ•°æ®å†™å…¥æŒ‡å®šçš„ç›®æ ‡ä¸­ã€‚å°†å›¾ç‰‡å†™æˆæ–‡ä»¶ç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415//åˆ›å»ºå­˜å‚¨è·¯å¾„NSArray *paths=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask,YES);NSString *newPath = [paths.firstObject stringByAppendingPathComponent:[NSString stringWithFormat:@\"image.png\"]];CFURLRef URL = CFURLCreateWithFileSystemPath ( kCFAllocatorDefault, (CFStringRef)newPath, kCFURLPOSIXPathStyle, false);//åˆ›å»ºCGImageDestinationå¯¹è±¡CGImageDestinationRef myImageDest = CGImageDestinationCreateWithURL(URL,CFSTR(\"public.png\"), 1, NULL);UIImage * image = [UIImage imageNamed:@\"timg.jpeg\"];//å†™å…¥å›¾ç‰‡CGImageDestinationAddImage(myImageDest, image.CGImage, NULL);CGImageDestinationFinalize(myImageDest);CFRelease(myImageDest); åŒæ ·ï¼Œé™¤äº†å¯ä»¥ç›´æ¥å°†å›¾ç‰‡æ•°æ®å†™å…¥urlå¤–ï¼Œä¹Ÿå¯ä»¥Dataæ•°æ®æˆ–æ•°æ®æ¶ˆè´¹å™¨ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š 1234//å°†å›¾ç‰‡æ•°æ®å†™å…¥æ•°æ®æ¶ˆè´¹è€…CGImageDestinationRef __nullable CGImageDestinationCreateWithDataConsumer(CGDataConsumerRef __nonnull consumer, CFStringRef __nonnull type, size_t count, CFDictionaryRef __nullable options);//å°†å›¾ç‰‡æ•°æ®å†™å…¥DataCGImageDestinationRef __nullable CGImageDestinationCreateWithData(CFMutableDataRef __nonnull data, CFStringRef __nonnull type, size_t count, CFDictionaryRef __nullable options); éœ€è¦æ³¨æ„ï¼Œä¸Šé¢æ–¹æ³•çš„typeå‚æ•°è®¾ç½®å†™å…¥æ•°æ®çš„æ–‡ä»¶æ ¼å¼ï¼Œå¿…é¡»ä¸ºImageIOæ¡†æ¶æ‰€æ”¯æŒçš„æ ¼å¼ï¼Œå‰é¢æœ‰æ–¹æ³•å¯ä»¥è·å–æ‰€æœ‰æ”¯æŒçš„æ ¼å¼ï¼Œè¿˜æœ‰ä¸€ç‚¹ï¼Œè¿™3ä¸ªå†™å…¥æ–¹æ³•çš„ä¸­optionså‚æ•°ç›®å‰å¹¶æ²¡æœ‰ä»€ä¹ˆä½œç”¨ï¼Œå…¶æ˜¯ç•™ç»™æœªæ¥ä½¿ç”¨çš„ï¼Œç›®å‰ä¼ å…¥NULLå³å¯ã€‚ CGImageDestinationç±»ä¸­çš„å…¶ä»–æ–¹æ³•è§£æå¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546//è·å–CGImageDestinationçš„CFTypeIDCFTypeID CGImageDestinationGetTypeID(void);//è·å–CGImageDestinationæ‰€æ”¯æŒçš„å›¾ç‰‡æ–‡ä»¶ç±»å‹/*ç›®å‰æ”¯æŒå¦‚ä¸‹ï¼šiOS10.1 ( \"public.jpeg\", \"public.png\", \"com.compuserve.gif\", \"public.tiff\", \"public.jpeg-2000\", \"com.microsoft.ico\", \"com.microsoft.bmp\", \"com.adobe.photoshop-image\", \"com.adobe.pdf\", \"com.truevision.tga-image\", \"com.ilm.openexr-image\", \"public.pbm\", \"public.pvr\", \"org.khronos.astc\", \"org.khronos.ktx\", \"com.microsoft.dds\", \"com.apple.rjpeg\")*/CFArrayRef __nonnull CGImageDestinationCopyTypeIdentifiers(void);//è®¾ç½®å›¾ç‰‡æ–‡ä»¶å±æ€§/*å¯ä»¥è®¾ç½®çš„é”®å€¼å¯¹æ„ä¹‰å¦‚ä¸‹ï¼šconst CFStringRef kCGImageDestinationLossyCompressionQuality; //è®¾ç½®å‹ç¼©è´¨é‡ 0-1ä¹‹é—´çš„cfnumberrefå€¼const CFStringRef kCGImageDestinationBackgroundColor; //å°†å›¾ç‰‡æ•°æ®å†™ä¸ºæ— alphaé€šé“æ—¶çš„é»˜è®¤èƒŒæ™¯è‰² cgcolorå€¼*/void CGImageDestinationSetProperties(CGImageDestinationRef __nonnull idst, CFDictionaryRef __nullable properties);//å‘CGImageDestinationä¸­æ·»åŠ ä¸€å¼ å›¾ç‰‡ å…¶ä¸­çš„optionå‚æ•°æ„ä¹‰å’Œä¸Šé¢ä¸€è‡´ï¼Œè®¾ç½®æ­¤å›¾ç‰‡çš„è´¨é‡ä¸æ— alphaé»˜è®¤èƒŒæ™¯è‰²void CGImageDestinationAddImage(CGImageDestinationRef __nonnull idst, CGImageRef __nonnull image, CFDictionaryRef __nullable properties);//é€šè¿‡CGImageSourceå¯¹è±¡æ¥å‘CGImageDestinationä¸­æ·»åŠ å›¾ç‰‡void CGImageDestinationAddImageFromSource(CGImageDestinationRef __nonnull idst, CGImageSourceRef __nonnull isrc, size_t index, CFDictionaryRef __nullable properties);//è¿›è¡Œå†™å…¥æ“ä½œ æ‰§è¡Œæ­¤æ–¹æ³•å ä¸å¯ä»¥åœ¨å†™å…¥å…¶ä»–ä¿¡æ¯bool CGImageDestinationFinalize(CGImageDestinationRef __nonnull idst);//æ·»åŠ å›¾ç‰‡å…ƒä¿¡æ¯void CGImageDestinationAddImageAndMetadata(CGImageDestinationRef __nonnull idst, CGImageRef __nonnull image, CGImageMetadataRef __nullable metadata, CFDictionaryRef __nullable options);//å°†CGImageSourceä¿¡æ¯æ‹·è´è¿›CGImageDestination/*optionså‚æ•°å¯ä»¥ç”¨æ¥æ·»åŠ å…ƒä¿¡æ¯*/bool CGImageDestinationCopyImageSource(CGImageDestinationRef __nonnull idst, CGImageSourceRef __nonnull isrc, CFDictionaryRef __nullable options, __nullable CFErrorRef * __nullable err); ä¸Šé¢åˆ—ä¸¾çš„æ–¹æ³•ä¸­ï¼ŒCGImageDestinationCopyImageSource()æ–¹æ³•ä¸­çš„optionså‚æ•°å¯ä»¥æ·»åŠ ä¸€äº›å›¾ç‰‡çš„å…ƒä¿¡æ¯ï¼Œå¯ä»¥è®¾ç½®çš„é”®å€¼å¯¹æ„ä¹‰å¦‚ä¸‹ï¼š 123456789101112//è®¾ç½®å…ƒä¿¡æ¯ éœ€è¦è®¾ç½®ä¸ºCGImageMetadataRefå¯¹è±¡const CFStringRef kCGImageDestinationMetadata;//æ˜¯å¦å°†CGImageSourceçš„å…ƒä¿¡æ¯ä¿¡æ¯åˆå¹¶æ“ä½œ é»˜è®¤ä¸ºkCFBooleanFalseconst CFStringRef kCGImageDestinationMergeMetadata;//XMPæ•°æ®æ˜¯å¦ä¸è¢«å†™å…¥ é»˜è®¤ä¸ºkCFBooleanFalseconst CFStringRef kCGImageMetadataShouldExcludeXMP;//GPSä¿¡æ¯æ˜¯å¦ä¸è¢«å†™å…¥ é»˜è®¤ä¸ºkCFBooleanFalseconst CFStringRef kCGImageMetadataShouldExcludeGPS;//æ›´æ–°å…ƒæ•°æ®çš„æ—¶é—´å€¼ éœ€è¦è®¾ç½®ä¸ºCFStringRefæˆ–è€…CFDateRefconst CFStringRef kCGImageDestinationDateTime;//æ›´æ–°å…ƒæ•°æ®çš„æ–¹å‘å€¼ éœ€è¦è®¾ç½®ä¸ºNSNumber1-8const CFStringRef kCGImageDestinationOrientation; å››ã€å…³äºCGImageMetadataå‰é¢æˆ‘ä»¬å¾ˆå¤šæ¬¡æåˆ°å…ƒæ•°æ®ï¼ŒCGImageMetadataç±»å°±æ˜¯å…ƒæ•°æ®çš„æŠ½è±¡ï¼Œå…¶ä¸­å°è£…äº†ä¸€äº›æ–¹æ³•ä¾›å¼€å‘è€…è¯»å–æˆ–å†™å…¥å…ƒæ•°æ®ä¿¡æ¯ã€‚å¥‡æ€ªçš„æ˜¯Appleçš„å®˜æ–¹æ–‡æ¡£ä¸APIæ–‡æ¡£ä¸­å¹¶æ²¡æœ‰CGImageMetadataçš„ä»‹ç»ä¸è§£é‡Šï¼Œåšå®¢ä¸­æœ¬éƒ¨åˆ†çš„å†…å®¹ï¼Œå¤šå‡ºè‡ªæˆ‘çš„ç†è§£ï¼Œæœ‰ç–æ¼å’Œä¸å¯¹çš„åœ°æ–¹ï¼Œæ¸…æ¥šçš„æœ‹å‹å¯ä»¥æŒ‡ç‚¹ä¸å»ºè®®ã€‚ å‰è¾¹ä»‹ç»ï¼ŒCGImageSourceä¸­æœ‰è·å–å›¾ç‰‡å…ƒæ•°æ®çš„æ–¹æ³•ï¼ŒCGImageDestinationä¸­ä¹Ÿæœ‰å†™å…¥å›¾ç‰‡å…ƒæ•°æ®çš„æ–¹æ³•ï¼Œå…ƒæ•°æ®ä¸­æŠ½è±¡å‡ºçš„CGImageMetadataTagæ˜¯å¯¹å…·ä½“æ•°æ®å†…å®¹çš„å°è£…ã€‚CGImageMetadataè§£æå¦‚ä¸‹ï¼š 123456789101112131415161718//è·å–CGImageMetadataç±»çš„CFTypeIDCFTypeID CGImageMetadataGetTypeID(void);//åˆ›å»ºä¸€ä¸ªç©ºçš„å¯å˜çš„CGImageMetadataå¯¹è±¡CGMutableImageMetadataRef __nonnull CGImageMetadataCreateMutable(void);//æ‹·è´ä¸€ä¸ªå¯å˜çš„CGImageMetadataå¯¹è±¡CGMutableImageMetadataRef __nullable CGImageMetadataCreateMutableCopy(CGImageMetadataRef __nonnull metadata);//è·å–CGImageMetadataTagç±»çš„CFTypeIDCFTypeID CGImageMetadataTagGetTypeID(void);//åˆ›å»ºä¸€ä¸ªCGImageMetadataTagå¯¹è±¡/*è¿™ä¸ªæ–¹æ³•æ¯”è¾ƒå¤æ‚xmlnså‚æ•°è®¾ç½®å‘½åç©ºé—´prefixå‚æ•°è®¾ç½®å‘½åç©ºé—´çš„ç¼©å†™æˆ–å‰ç¼€nameå‚æ•°è®¾ç½®CGImageMetadataTagçš„åç§°typeå‚æ•°è®¾ç½®CGImageMetadataTagå¯¹åº”å€¼çš„ç±»å‹valueå‚æ•°è®¾ç½®CGImageMetadataTagçš„å¯¹åº”å€¼*/CGImageMetadataTagRef __nullable CGImageMetadataTagCreate (CFStringRef __nonnull xmlns, CFStringRef __nullable prefix, CFStringRef __nonnull name, CGImageMetadataType type, CFTypeRef __nonnull value); ä¸Šé¢åˆ›å»ºCGImageMetadataTagçš„æ–¹æ³•ä¸­ï¼Œxmlnsè®¾ç½®å‘½åç©ºé—´ï¼Œå¿…é¡»ä½¿ç”¨ä¸€ä¸ªé¢„å®šä¹‰çš„å‘½åç©ºé—´æˆ–è€…è‡ªå®šä¹‰çš„å‘½åç©ºé—´ï¼Œå¯¹äºè‡ªå®šä¹‰çš„å‘½åç©ºé—´ï¼Œå¿…é¡»éµå®ˆAdobeçš„XMPè§„èŒƒã€‚ä¸€äº›å…±ç”¨çš„å‘½åç©ºé—´å®šä¹‰å¦‚ä¸‹ï¼š 123456789101112131415161718//Exifå‘½åç©ºé—´const CFStringRef kCGImageMetadataNamespaceExif;//ExifAuxå‘½åç©ºé—´const CFStringRef kCGImageMetadataNamespaceExifAux;//ExifEXå‘½åç©ºé—´const CFStringRef kCGImageMetadataNamespaceExifEX;//DublineCoreå‘½åç©ºé—´const CFStringRef kCGImageMetadataNamespaceDublinCore;//IPTCCoreå‘½åç©ºé—´const CFStringRef kCGImageMetadataNamespaceIPTCCore;//Photoshopå‘½åç©ºé—´const CFStringRef kCGImageMetadataNamespacePhotoshop;//TIFFå‘½åç©ºé—´const CFStringRef kCGImageMetadataNamespaceTIFF;//XMPBasicå‘½åç©ºé—´const CFStringRef kCGImageMetadataNamespaceXMPBasic;//XMPRightså‘½åç©ºé—´const CFStringRef kCGImageMetadataNamespaceXMPRights; ä¸Šé¢åˆ›å»ºCGImageMetadataTagçš„æ–¹æ³•ä¸­prefixè®¾ç½®å‘½åç©ºé—´ç¼©å†™æˆ–å‰ç¼€ï¼ŒåŒæ ·ä¸€äº›å…¬ç”¨çš„å‰ç¼€å®šä¹‰å¦‚ä¸‹ï¼š 123456789101112131415161718//Exifå‘½åç©ºé—´å‰ç¼€const CFStringRef kCGImageMetadataPrefixExif;//ExifAuxå‘½åç©ºé—´å‰ç¼€const CFStringRef kCGImageMetadataPrefixExifAux;//ExifEXå‘½åç©ºé—´å‰ç¼€const CFStringRef kCGImageMetadataPrefixExifEX;//DublinCoreå‘½åç©ºé—´å‰ç¼€const CFStringRef kCGImageMetadataPrefixDublinCore;//IPCCoreå‘½åç©ºé—´å‰ç¼€const CFStringRef kCGImageMetadataPrefixIPTCCore;//Photoshopå‘½åç©ºé—´å‰ç¼€const CFStringRef kCGImageMetadataPrefixPhotoshop;//TIFFå‘½åç©ºé—´å‰ç¼€const CFStringRef kCGImageMetadataPrefixTIFF;//XMPBasicå‘½åç©ºé—´å‰ç¼€const CFStringRef kCGImageMetadataPrefixXMPBasic;//XMPRightså‘½åç©ºé—´å‰ç¼€const CFStringRef kCGImageMetadataPrefixXMPRights; ä¸Šé¢åˆ›å»ºCGImageMetadataTagçš„æ–¹æ³•ä¸­typeè®¾ç½®å¯¹åº”å€¼çš„ç±»å‹ï¼Œå…¶æ˜¯ä¸€ä¸ªCGImageMetadataTypeç±»å‹çš„æšä¸¾ï¼Œæ„ä¹‰å¦‚ä¸‹ï¼š 123456789101112131415161718typedef CF_ENUM(int32_t, CGImageMetadataType) &#123; //æ— æ•ˆçš„æ•°æ®ç±»å‹ kCGImageMetadataTypeInvalid = -1, //åŸºæœ¬çš„CFTypeç±»å‹ kCGImageMetadataTypeDefault = 0, //å­—ç¬¦ä¸²ç±»å‹ kCGImageMetadataTypeString = 1, //æ— éœ€é›†åˆç±»å‹ kCGImageMetadataTypeArrayUnordered = 2, //æœ‰åºé›†åˆç±»å‹ kCGImageMetadataTypeArrayOrdered = 3, //æœ‰åºé˜µåˆ— kCGImageMetadataTypeAlternateArray = 4, //ç‰¹æ®Šçš„æ•°ç»„ å…¶ä¸­å…ƒç´ è¿›è¡Œä¸åŒçš„æœ¬åœ°åŒ– kCGImageMetadataTypeAlternateText = 5, //ç»“æ„ç±»å‹ å¦‚å­—å…¸ kCGImageMetadataTypeStructure = 6&#125;; è·å–åˆ°CGImageMetadataTagåï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹æ³•æ¥è·å–å…¶ä¸­å°è£…çš„ä¿¡æ¯ï¼š 123456789101112//è·å–æ ‡ç­¾çš„å‘½åç©ºé—´CFStringRef __nullable CGImageMetadataTagCopyNamespace(CGImageMetadataTagRef __nonnull tag);//è·å–æ ‡ç­¾çš„å‘½åç©ºé—´å‰ç¼€CFStringRef __nullable CGImageMetadataTagCopyPrefix(CGImageMetadataTagRef __nonnull tag);//è·å–æ ‡ç­¾åç§°CFStringRef __nullable CGImageMetadataTagCopyName(CGImageMetadataTagRef __nonnull tag);//è·å–æ ‡ç­¾çš„å€¼CFTypeRef __nullable CGImageMetadataTagCopyValue(CGImageMetadataTagRef __nonnull tag);//è·å–æ ‡ç­¾å€¼çš„ç±»å‹CGImageMetadataType CGImageMetadataTagGetType(CGImageMetadataTagRef __nonnull tag);//è·å–æ ‡ç­¾çš„Qualifieræ•°ç»„CFArrayRef __nullable CGImageMetadataTagCopyQualifiers(CGImageMetadataTagRef __nonnull tag); ä¸‹é¢è¿™äº›æ–¹æ³•ç”¨äºå‘CGImageMetadataä¸­æ·»åŠ æ ‡ç­¾æˆ–è€…è·å–æ ‡ç­¾ï¼š 12345678910111213141516//è·å–CGImageMetadataä¸­çš„æ‰€æœ‰æ ‡ç­¾CFArrayRef __nullable CGImageMetadataCopyTags(CGImageMetadataRef __nonnull metadata);//é€šè¿‡è·¯å¾„æŸ¥æ‰¾ç‰¹æ®Šçš„æ ‡ç­¾CGImageMetadataTagRef __nullable CGImageMetadataCopyTagWithPath(CGImageMetadataRef __nonnull metadata, CGImageMetadataTagRef __nullable parent, CFStringRef __nonnull path);//é€šè¿‡è·¯å¾„æŸ¥æ‰¾ç‰¹æ®Šæ ‡ç­¾çš„å€¼ CFStringRef __nullable CGImageMetadataCopyStringValueWithPath(CGImageMetadataRef __nonnull metadata, CGImageMetadataTagRef __nullable parent, CFStringRef __nonnull path);//ä¸ºä¸€ä¸ªå‰ç¼€æ³¨å†Œä¸€ä¸ªå‘½åç©ºé—´bool CGImageMetadataRegisterNamespaceForPrefix(CGMutableImageMetadataRef __nonnull metadata, CFStringRef __nonnull xmlns, CFStringRef __nonnull prefix, __nullable CFErrorRef * __nullable err);//é€šè¿‡è·¯å¾„ä¸ºCGImageMetadataè®¾ç½®æ ‡ç­¾bool CGImageMetadataSetTagWithPath(CGMutableImageMetadataRef __nonnull metadata, CGImageMetadataTagRef __nullable parent, CFStringRef __nonnull path, CGImageMetadataTagRef __nonnull tag);//é€šè¿‡è·¯å¾„ä¸ºCGImageMetadataè®¾ç½®æ ‡ç­¾çš„å€¼bool CGImageMetadataSetValueWithPath(CGMutableImageMetadataRef __nonnull metadata, CGImageMetadataTagRef __nullable parent, CFStringRef __nonnull path, CFTypeRef __nonnull value);//é€šè¿‡è·¯å¾„ç§»é™¤ä¸€ä¸ªæ ‡ç­¾bool CGImageMetadataRemoveTagWithPath(CGMutableImageMetadataRef __nonnull metadata, CGImageMetadataTagRef __nullable parent, CFStringRef __nonnull path);//å¯¹æ ‡ç­¾è¿›è¡Œæšä¸¾void CGImageMetadataEnumerateTagsUsingBlock(CGImageMetadataRef __nonnull metadata, CFStringRef __nullable rootPath, CFDictionaryRef __nullable options, CGImageMetadataTagBlock __nonnull block); äº”ã€CGImagePropertiesä¸­å®šä¹‰çš„å­—å…¸æ„ä¹‰å‰é¢æåˆ°çš„CGImageSourceCopyPropertiesæ–¹æ³•ä¸CGImageSourceCopyPropertiesAtIndexæ–¹æ³•éƒ½ä¼šè¿”å›ä¸€ä¸ªå­—å…¸ï¼Œå­—å…¸ä¸­å¯èƒ½åŒ…å«å¦‚ä¸‹æœ‰æ„ä¹‰çš„é”®ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940//TIFFä¿¡æ¯å­—å…¸const CFStringRef kCGImagePropertyTIFFDictionary;/GIFä¿¡æ¯å­—å…¸const CFStringRef kCGImagePropertyGIFDictionary;//JFIFä¿¡æ¯å­—å…¸const CFStringRef kCGImagePropertyJFIFDictionary;//EXifä¿¡æ¯å­—å…¸const CFStringRef kCGImagePropertyExifDictionary;//PNGä¿¡æ¯å­—å…¸const CFStringRef kCGImagePropertyPNGDictionary;//IPTCä¿¡æ¯å­—å…¸const CFStringRef kCGImagePropertyIPTCDictionary;//GPSä¿¡æ¯å­—å…¸const CFStringRef kCGImagePropertyGPSDictionary;//åŸå§‹ä¿¡æ¯å­—å…¸const CFStringRef kCGImagePropertyRawDictionary;//CIFFä¿¡æ¯å­—å…¸const CFStringRef kCGImagePropertyCIFFDictionary;//ä½³èƒ½ç›¸æœºä¿¡æ¯å­—å…¸const CFStringRef kCGImagePropertyMakerCanonDictionary;//å°¼åº·ç›¸æœºä¿¡æ¯å­—å…¸const CFStringRef kCGImagePropertyMakerNikonDictionary;//æŸ¯å°¼å¡ç›¸æœºä¿¡æ¯å­—å…¸const CFStringRef kCGImagePropertyMakerMinoltaDictionary;//å¯Œå£«ç›¸æœºä¿¡æ¯å­—å…¸const CFStringRef kCGImagePropertyMakerFujiDictionary;//å¥¥æ—å·´æ–¯ç›¸æœºä¿¡æ¯å­—å…¸const CFStringRef kCGImagePropertyMakerOlympusDictionary;//å®¾å¾—ç›¸æœºä¿¡æ¯å­—å…¸const CFStringRef kCGImagePropertyMakerPentaxDictionary;//å¯¹åº”Photoshopç›¸ç‰‡çš„ä¿¡æ¯å­—å…¸const CFStringRef kCGImageProperty8BIMDictionary;//NDGä¿¡æ¯å­—å…¸const CFStringRef kCGImagePropertyDNGDictionary ;//ExifAuxä¿¡æ¯å­—å…¸const CFStringRef kCGImagePropertyExifAuxDictionary;//OpenEXRä¿¡æ¯å­—å…¸const CFStringRef kCGImagePropertyOpenEXRDictionary;//Appleç›¸æœºä¿¡æ¯å­—å…¸const CFStringRef kCGImagePropertyMakerAppleDictionary ; CGImageSourceCopyPropertiesæ–¹æ³•è¿”å›çš„å­—å…¸ä¸­è¿˜å¯èƒ½ä¼šæœ‰å¦‚ä¸‹ä¸€ä¸ªç‰¹æ®Šçš„é”®ï¼š 12//å¯¹åº”æ–‡ä»¶å¤§å°const CFStringRef kCGImagePropertyFileSize; CGImageSourceCopyPropertiesAtIndexæ–¹æ³•ä¸­å¯èƒ½åŒ…å«çš„ç‰¹æ®Šé”®ï¼š 123456789101112131415161718192021222324252627282930313233//åƒç´ é«˜åº¦const CFStringRef kCGImagePropertyPixelHeight;//åƒç´ å®½åº¦const CFStringRef kCGImagePropertyPixelWidth;//DPIé«˜åº¦const CFStringRef kCGImagePropertyDPIHeight;//DPIå®½åº¦const CFStringRef kCGImagePropertyDPIWidth;//é¢œè‰²ä½æ•°const CFStringRef kCGImagePropertyDepth;//å›¾ç‰‡çš„æ˜¾ç¤ºæ–¹å‘/*å¯¹åº”Numberå€¼ * 1 = å·¦ä¸Šåˆ°å³ä¸‹. * 2 = å³ä¸Šåˆ°å·¦ä¸‹. * 3 = å³ä¸‹åˆ°å·¦ä¸Š. * 4 = å·¦ä¸‹åˆ°å³ä¸Š. * 5 = è¡Œåˆ—ç½®æ¢ å·¦ä¸Šåˆ°å³ä¸‹. * 6 = è¡Œåˆ—ç½®æ¢ å³ä¸Šåˆ°å·¦ä¸‹. * 7 = è¡Œåˆ—ç½®æ¢ å³ä¸‹åˆ°å·¦ä¸Š. * 8 = è¡Œåˆ—ç½®æ¢ å·¦ä¸‹åˆ°å³ä¸Š.*/const CFStringRef kCGImagePropertyOrientation;//é¢œè‰²æ˜¯å¦æ”¯æŒæµ®ç‚¹æ•°const CFStringRef kCGImagePropertyIsFloat;//å›¾åƒæ˜¯å¦åŒ…å«åƒç´ æ ·æœ¬const CFStringRef kCGImagePropertyIsIndexed;//å›¾åƒæ˜¯å¦åŒ…å«alphaé€šé“const CFStringRef kCGImagePropertyHasAlpha;//å›¾åƒçš„é¢œè‰²æ¨¡å¼const CFStringRef kCGImagePropertyColorModel;//åµŒå…¥å›¾ç‰‡çš„ICCé…ç½®æ–‡ä»¶åç§°const CFStringRef kCGImagePropertyProfileName; kCGImagePropertyColorModelé”®å¯è¿”å›çš„å€¼æœ‰å¦‚ä¸‹å‡ ç§å®šä¹‰ï¼š 12345678//RBGæ¨¡å¼const CFStringRef kCGImagePropertyColorModelRGB;//Grayæ¨¡å¼const CFStringRef kCGImagePropertyColorModelGray;//CMYKæ¨¡å¼const CFStringRef kCGImagePropertyColorModelCMYK;//Labæ¨¡å¼const CFStringRef kCGImagePropertyColorModelLab; kCGImagePropertyTIFFDictionaryé”®å¯è¿”å›çš„å€¼å®šä¹‰å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940//å›¾ç‰‡æ•°æ®å‹ç¼©æ–¹æ¡ˆconst CFStringRef kCGImagePropertyTIFFCompression;//å›¾ç‰‡æ•°æ®çš„è‰²å½©ç©ºé—´const CFStringRef kCGImagePropertyTIFFPhotometricInterpretation;//æ–‡æ¡£åç§°const CFStringRef kCGImagePropertyTIFFDocumentName;//å›¾ç‰‡æè¿°const CFStringRef kCGImagePropertyTIFFImageDescription;//ç›¸æœºè®¾å¤‡åconst CFStringRef kCGImagePropertyTIFFMake;//ç›¸æœºè®¾å¤‡æ¨¡å¼const CFStringRef kCGImagePropertyTIFFModel;//å›¾ç‰‡æ–¹å‘const CFStringRef kCGImagePropertyTIFFOrientation;//æ¨ªå‘æ¯ä¸ªåˆ†è¾¨ä½çš„åƒç´ æ•°const CFStringRef kCGImagePropertyTIFFXResolution;//çºµå‘æ¯ä¸ªåˆ†è¾¨ä½çš„åƒç´ æ•°const CFStringRef kCGImagePropertyTIFFYResolution;//åˆ†è¾¨ç‡å•ä½const CFStringRef kCGImagePropertyTIFFResolutionUnit;//åˆ›å»ºå›¾åƒçš„è½¯ä»¶åç§°å’Œç‰ˆæœ¬const CFStringRef kCGImagePropertyTIFFSoftware;//transformå‡½æ•°const CFStringRef kCGImagePropertyTIFFTransferFunction;//æ—¥æœŸæ—¶é—´const CFStringRef kCGImagePropertyTIFFDateTime;//ä½œè€…const CFStringRef kCGImagePropertyTIFFArtist;//åˆ›å»ºå›¾ç‰‡çš„ç”µè„‘ç³»ç»Ÿconst CFStringRef kCGImagePropertyTIFFHostComputer;//å…¬å¸ä¿¡æ¯const CFStringRef kCGImagePropertyTIFFCopyright;//å›¾ç‰‡çš„ç™½ç‚¹const CFStringRef kCGImagePropertyTIFFWhitePoint;//å›¾åƒçš„åŸè‰²è‰²åº¦const CFStringRef kCGImagePropertyTIFFPrimaryChromaticities;//å›¾ç‰‡çš„ç“¦ç‰‡å®½åº¦const CFStringRef kCGImagePropertyTIFFTileWidth;//å›¾ç‰‡çš„ç“¦ç‰‡é«˜åº¦const CFStringRef kCGImagePropertyTIFFTileLength; kCGImagePropertyJFIFDictionaryå¯¹åº”çš„å­—å…¸ä¸­å¯èƒ½åŒ…å«å¦‚ä¸‹æ„ä¹‰çš„é”®ï¼š 12345678910//JFIFç‰ˆæœ¬const CFStringRef kCGImagePropertyJFIFVersion;//æ¨ªå‘åƒç´ å¯†åº¦const CFStringRef kCGImagePropertyJFIFXDensity;//çºµå‘åƒç´ å¯†åº¦const CFStringRef kCGImagePropertyJFIFYDensity;//åƒç´ å¯†åº¦å•å…ƒconst CFStringRef kCGImagePropertyJFIFDensityUnit;//æ˜¯å¦æ˜¯é«˜è´¨é‡å›¾åƒç‰ˆæœ¬const CFStringRef kCGImagePropertyJFIFIsProgressive; kCGImagePropertyExifDictionaryå¯¹åº”çš„å­—å…¸ä¸­å¯èƒ½åŒ…å«å¦‚ä¸‹æ„ä¹‰çš„é”® ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134//æ›å…‰æ—¶é—´const CFStringRef kCGImagePropertyExifExposureTime;//ExifNumberconst CFStringRef kCGImagePropertyExifFNumber;//æ›å…‰ç¨‹åºconst CFStringRef kCGImagePropertyExifExposureProgram;//æ¯ä¸ªé€šé“çš„å…‰è°±çµæ•åº¦const CFStringRef kCGImagePropertyExifSpectralSensitivity;//ISOé€Ÿåº¦ç­‰çº§const CFStringRef kCGImagePropertyExifISOSpeedRatings;//ExifOECFconst CFStringRef kCGImagePropertyExifOECF;//çµæ•ç±»å‹const CFStringRef kCGImagePropertyExifSensitivityType;//è¾“å‡ºçµæ•æ ‡å‡†const CFStringRef kCGImagePropertyExifStandardOutputSensitivity;//æ¨èæ›å…‰æŒ‡æ•°const CFStringRef kCGImagePropertyExifRecommendedExposureIndex;//ISOé€Ÿç‡const CFStringRef kCGImagePropertyExifISOSpeed;const CFStringRef kCGImagePropertyExifISOSpeedLatitudeyyy;const CFStringRef kCGImagePropertyExifISOSpeedLatitudezzz;//Exifç‰ˆæœ¬const CFStringRef kCGImagePropertyExifVersion;//åŸå§‹æ—¥æœŸæ—¶é—´const CFStringRef kCGImagePropertyExifDateTimeOriginal;//æ•°å­—åŒ–æ—¥æœŸæ—¶é—´const CFStringRef kCGImagePropertyExifDateTimeDigitized;//å‹ç¼©é…ç½®const CFStringRef kCGImagePropertyExifComponentsConfiguration;//å‹ç¼©æ¨¡å¼åƒç´ ä½const CFStringRef kCGImagePropertyExifCompressedBitsPerPixel;//å¿«é—¨é€Ÿåº¦å€¼const CFStringRef kCGImagePropertyExifShutterSpeedValue;//å­”å¾„å€¼const CFStringRef kCGImagePropertyExifApertureValue;//äº®åº¦å€¼const CFStringRef kCGImagePropertyExifBrightnessValue;//æ›å…‰åå·®å€¼const CFStringRef kCGImagePropertyExifExposureBiasValue;//æœ€å¤§å…‰åœˆå€¼const CFStringRef kCGImagePropertyExifMaxApertureValue;//è·ç¦»const CFStringRef kCGImagePropertyExifSubjectDistance;//æµ‹å…‰æ¨¡å¼const CFStringRef kCGImagePropertyExifMeteringMode;//å…‰æºconst CFStringRef kCGImagePropertyExifLightSource;//æ‹æ‘„æ—¶çš„é—ªå…‰çŠ¶æ€const CFStringRef kCGImagePropertyExifFlash;//ç„¦è·const CFStringRef kCGImagePropertyExifFocalLength;//ä¸»ä½“åŒºåŸŸconst CFStringRef kCGImagePropertyExifSubjectArea;//ç›¸æœºåˆ¶é€ å•†æŒ‡å®šçš„ä¿¡æ¯const CFStringRef kCGImagePropertyExifMakerNote;//ç”¨æˆ·ä¿¡æ¯const CFStringRef kCGImagePropertyExifUserComment;//æ—¥æœŸå’Œæ—¶é—´æ ‡è®°çš„ç§’åˆ†æ•°const CFStringRef kCGImagePropertyExifSubsecTime;//åŸå§‹æ—¶é—´const CFStringRef kCGImagePropertyExifSubsecTimeOriginal;//æ•°å­—æ—¶é—´const CFStringRef kCGImagePropertyExifSubsecTimeDigitized;//FlashPixç‰ˆæœ¬ä¿¡æ¯const CFStringRef kCGImagePropertyExifFlashPixVersion;//è‰²å½©ç©ºé—´const CFStringRef kCGImagePropertyExifColorSpace;//Xæ–¹å‘åƒç´ const CFStringRef kCGImagePropertyExifPixelXDimension;//Yæ–¹å‘åƒç´ const CFStringRef kCGImagePropertyExifPixelYDimension;//ä¸å›¾åƒç›¸å…³çš„å£°éŸ³æ–‡ä»¶const CFStringRef kCGImagePropertyExifRelatedSoundFile;//FlashEnergyconst CFStringRef kCGImagePropertyExifFlashEnergy;//FrequencyResponseconst CFStringRef kCGImagePropertyExifSpatialFrequencyResponse;//åƒç´ æ•°ç›®const CFStringRef kCGImagePropertyExifFocalPlaneXResolution;const CFStringRef kCGImagePropertyExifFocalPlaneYResolution;const CFStringRef kCGImagePropertyExifFocalPlaneResolutionUnit;//å›¾åƒä¸»ä½“çš„ä½ç½®const CFStringRef kCGImagePropertyExifSubjectLocation;//é€‰æ‹©çš„æ›å…‰æŒ‡æ•°const CFStringRef kCGImagePropertyExifExposureIndex;//ä¼ æ„Ÿå™¨ç±»å‹const CFStringRef kCGImagePropertyExifSensingMethod;//å›¾åƒæ–‡ä»¶æºconst CFStringRef kCGImagePropertyExifFileSource;//åœºæ™¯ç±»å‹const CFStringRef kCGImagePropertyExifSceneType;//CFAæ¨¡å—const CFStringRef kCGImagePropertyExifCFAPattern;//å¯¹å›¾åƒæ•°æ®è¿›è¡Œç‰¹æ®Šæ¸²æŸ“const CFStringRef kCGImagePropertyExifCustomRendered;//æ›å…‰æ¨¡å¼è®¾ç½®const CFStringRef kCGImagePropertyExifExposureMode;//ç™½å¹³è¡¡æ¨¡å¼const CFStringRef kCGImagePropertyExifWhiteBalance;//æ•°å­—å˜ç„¦æ¯”const CFStringRef kCGImagePropertyExifDigitalZoomRatio;//35æ¯«ç±³èƒ¶ç‰‡çš„ç­‰æ•ˆç„¦è·const CFStringRef kCGImagePropertyExifFocalLenIn35mmFilm;//åœºæ™¯æ•æ‰ç±»å‹ï¼ˆæ ‡å‡†ï¼Œæ™¯è§‚ï¼Œè‚–åƒï¼Œå¤œæ™šï¼‰const CFStringRef kCGImagePropertyExifSceneCaptureType;//å›¾åƒå¢ç›Šconst CFStringRef kCGImagePropertyExifGainControl;//å›¾åƒå¯¹æ¯”åº¦const CFStringRef kCGImagePropertyExifContrast;//å›¾åƒé¥±å’Œåº¦const CFStringRef kCGImagePropertyExifSaturation;//å›¾åƒé”åº¦const CFStringRef kCGImagePropertyExifSharpness;//æ‹æ‘„æ¡ä»¶const CFStringRef kCGImagePropertyExifDeviceSettingDescription;//ä¸»ä½“è·ç¦»const CFStringRef kCGImagePropertyExifSubjectDistRange;//å›¾åƒçš„å”¯ä¸€æ ‡è¯†const CFStringRef kCGImagePropertyExifImageUniqueID;//ç›¸æœºæ‰€æœ‰è€…const CFStringRef kCGImagePropertyExifCameraOwnerName;//ç›¸æœºåºåˆ—å·const CFStringRef kCGImagePropertyExifBodySerialNumber;//é€é•œè§„æ ¼ä¿¡æ¯const CFStringRef kCGImagePropertyExifLensSpecification;//é€é•œåˆ¶é€ å•†åç§°const CFStringRef kCGImagePropertyExifLensMake;//é€é•œæ¨¡å¼const CFStringRef kCGImagePropertyExifLensModel;//é€é•œåºåˆ—å·const CFStringRef kCGImagePropertyExifLensSerialNumber;//ä¼½é©¬è®¾ç½®const CFStringRef kCGImagePropertyExifGamma; kCGImagePropertyExifAuxDictionaryå¯¹åº”çš„å­—å…¸ä¸­å¯èƒ½åŒ…å«çš„é”®å®šä¹‰å¦‚ä¸‹ï¼š 123456789101112131415161718//é•œå¤´ä¿¡æ¯const CFStringRef kCGImagePropertyExifAuxLensInfo;//é•œå¤´æ¨¡å¼const CFStringRef kCGImagePropertyExifAuxLensModel;//åºåˆ—å·const CFStringRef kCGImagePropertyExifAuxSerialNumber;//é•œå¤´IDconst CFStringRef kCGImagePropertyExifAuxLensID;//é•œå¤´åºåˆ—å·const CFStringRef kCGImagePropertyExifAuxLensSerialNumber;//å›¾ç‰‡ç¼–å·const CFStringRef kCGImagePropertyExifAuxImageNumber;//é—ªå…‰è¡¥å¿const CFStringRef kCGImagePropertyExifAuxFlashCompensation;//æ‰€æœ‰è€…åç§°const CFStringRef kCGImagePropertyExifAuxOwnerName;//å›ºä»¶ä¿¡æ¯const CFStringRef kCGImagePropertyExifAuxFirmware; kCGImagePropertyGIFDictionaryå¯¹åº”çš„å­—å…¸ä¸­å¯èƒ½åŒ…å«çš„é”®å®šä¹‰å¦‚ä¸‹ï¼š 123456789//åŠ¨ç”»å¾ªç¯æ¬¡æ•°const CFStringRef kCGImagePropertyGIFLoopCount;//ä¸¤å¸§ä¹‹é—´çš„å»¶æ—¶const CFStringRef kCGImagePropertyGIFDelayTime;//é¢œè‰²Mapconst CFStringRef kCGImagePropertyGIFImageColorMap;const CFStringRef kCGImagePropertyGIFHasGlobalColorMap;//ä¸¤å¸§ä¹‹é—´çš„å»¶æ—¶const CFStringRef kCGImagePropertyGIFUnclampedDelayTime; kCGImagePropertyPNGDictionaryå¯¹åº”çš„å­—å…¸ä¸­å¯èƒ½åŒ…å«çš„é”®å®šä¹‰å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031//PNGä¼½é©¬å€¼const CFStringRef kCGImagePropertyPNGGamma;//æ··åˆç±»å‹const CFStringRef kCGImagePropertyPNGInterlaceType;//Xæ–¹å‘åƒç´ æ•°const CFStringRef kCGImagePropertyPNGXPixelsPerMeter;//Yæ–¹å‘åƒç´ æ•°const CFStringRef kCGImagePropertyPNGYPixelsPerMeter;//RGBæ„å›¾const CFStringRef kCGImagePropertyPNGsRGBIntent;//è‰²åº¦const CFStringRef kCGImagePropertyPNGChromaticities;//ä½œè€…const CFStringRef kCGImagePropertyPNGAuthor;//å…¬å¸const CFStringRef kCGImagePropertyPNGCopyright;//åˆ›å»ºæ—¶é—´const CFStringRef kCGImagePropertyPNGCreationTime;//æè¿°const CFStringRef kCGImagePropertyPNGDescription;//æœ€åä¿®æ”¹æ—¥æœŸæ—¶é—´const CFStringRef kCGImagePropertyPNGModificationTime;//è½¯ä»¶const CFStringRef kCGImagePropertyPNGSoftware;//æ ‡é¢˜const CFStringRef kCGImagePropertyPNGTitle;//åŠ¨ç”»å¾ªç¯æ¬¡æ•°const CFStringRef kCGImagePropertyAPNGLoopCount;//ä¸¤å¸§ä¹‹é—´çš„å»¶æ—¶const CFStringRef kCGImagePropertyAPNGDelayTime;const CFStringRef kCGImagePropertyAPNGUnclampedDelayTime; kCGImagePropertyGPSDictionaryå¯¹åº”çš„å­—å…¸ä¸­å¯èƒ½åŒ…å«çš„é”®å®šä¹‰å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364//GPSç‰ˆæœ¬const CFStringRef kCGImagePropertyGPSVersion;//çº¬åº¦æ˜¯å—çº¬æˆ–åŒ—çº¬const CFStringRef kCGImagePropertyGPSLatitudeRef;//çº¬åº¦const CFStringRef kCGImagePropertyGPSLatitude;//ç»åº¦æ˜¯ä¸œç»æˆ–è¥¿ç»const CFStringRef kCGImagePropertyGPSLongitudeRef;//ç»åº¦const CFStringRef kCGImagePropertyGPSLongitude;//æµ·æ‹”æ ‡å‡†const CFStringRef kCGImagePropertyGPSAltitudeRef;//æµ·æ‹”é«˜åº¦const CFStringRef kCGImagePropertyGPSAltitude;//æ—¶é—´æˆ³const CFStringRef kCGImagePropertyGPSTimeStamp;//æµ‹é‡GPSçš„å«æ˜Ÿconst CFStringRef kCGImagePropertyGPSSatellites;//GPSçŠ¶æ€const CFStringRef kCGImagePropertyGPSStatus;//æµ‹é‡æ¨¡å¼const CFStringRef kCGImagePropertyGPSMeasureMode;//ç²¾åº¦æ•°æ®const CFStringRef kCGImagePropertyGPSDOP;//é€Ÿåº¦æ ‡å‡†const CFStringRef kCGImagePropertyGPSSpeedRef;//é€Ÿåº¦const CFStringRef kCGImagePropertyGPSSpeed;//è¿åŠ¨æ–¹å‘å‚è€ƒconst CFStringRef kCGImagePropertyGPSTrackRef;//è¿åŠ¨æ–¹å‘const CFStringRef kCGImagePropertyGPSTrack;//ä½ç½®æ–¹å‘å‚è€ƒconst CFStringRef kCGImagePropertyGPSImgDirectionRef;//ä½ç½®æ–¹å‘const CFStringRef kCGImagePropertyGPSImgDirection;//åœ°å›¾æµ‹é‡æ•°æ®const CFStringRef kCGImagePropertyGPSMapDatum;//åœ°ç†çº¬åº¦å—çº¬æˆ–åŒ—çº¬const CFStringRef kCGImagePropertyGPSDestLatitudeRef;//åœ°ç†çº¬åº¦const CFStringRef kCGImagePropertyGPSDestLatitude;//åœ°ç†ç»åº¦ ä¸œç»æˆ–è¥¿ç»const CFStringRef kCGImagePropertyGPSDestLongitudeRef;//åœ°ç†ç»åº¦const CFStringRef kCGImagePropertyGPSDestLongitude;//æ–¹ä½å‚ç…§const CFStringRef kCGImagePropertyGPSDestBearingRef;//åœ°ç†æ–¹ä½const CFStringRef kCGImagePropertyGPSDestBearing;//è·ç¦»å‚ç…§const CFStringRef kCGImagePropertyGPSDestDistanceRef;//è·ç¦»const CFStringRef kCGImagePropertyGPSDestDistance;//æŸ¥æ‰¾åœ°ç†ä½ç½®çš„æ–¹æ³•const CFStringRef kCGImagePropertyGPSProcessingMethod;//GPSåœ°åŒºåconst CFStringRef kCGImagePropertyGPSAreaInformation;//æ—¥æœŸæ—¶é—´const CFStringRef kCGImagePropertyGPSDateStamp;//æ ¡æ­£ä¿¡æ¯const CFStringRef kCGImagePropertyGPSDifferental;//é”™è¯¯ä¿¡æ¯const CFStringRef kCGImagePropertyGPSHPositioningError; kCGImagePropertyIPTCDictionaryå¯¹åº”çš„å­—å…¸ä¸­å¯èƒ½åŒ…å«çš„é”®å®šä¹‰å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102//å¯¹è±¡ç±»å‹const CFStringRef kCGImagePropertyIPTCObjectTypeReference;//å¯¹è±¡å±æ€§const CFStringRef kCGImagePropertyIPTCObjectAttributeReference;//å¯¹è±¡åç§°const CFStringRef kCGImagePropertyIPTCObjectName;//ç¼–è¾‘çŠ¶æ€const CFStringRef kCGImagePropertyIPTCEditStatus;//æ›´æ–°çŠ¶æ€const CFStringRef kCGImagePropertyIPTCEditorialUpdate;//ç´§æ€¥ç­‰çº§const CFStringRef kCGImagePropertyIPTCUrgency;//ä¸»ä½“const CFStringRef kCGImagePropertyIPTCSubjectReference;//ç±»åˆ«const CFStringRef kCGImagePropertyIPTCCategory;//è¡¥å……ç±»åˆ«const CFStringRef kCGImagePropertyIPTCSupplementalCategory;//Fixtureæ ‡è¯†const CFStringRef kCGImagePropertyIPTCFixtureIdentifier;//å…³é”®å­—const CFStringRef kCGImagePropertyIPTCKeywords;//å†…å®¹å®šä½ç const CFStringRef kCGImagePropertyIPTCContentLocationCode;//å†…å®¹ä½ç½®åç§°const CFStringRef kCGImagePropertyIPTCContentLocationName;//å›¾åƒä½¿ç”¨çš„æœ€æ—©æ—¥æœŸconst CFStringRef kCGImagePropertyIPTCReleaseDate;//å›¾åƒä½¿ç”¨çš„æœ€æ—©æ—¶é—´const CFStringRef kCGImagePropertyIPTCReleaseTime;//æœ€åä¸€æ¬¡ä½¿ç”¨æ—¥æœŸconst CFStringRef kCGImagePropertyIPTCExpirationDate;//æœ€åä¸€æ¬¡ä½¿ç”¨æ—¶é—´const CFStringRef kCGImagePropertyIPTCExpirationTime;//å›¾åƒä½¿ç”¨çš„ç‰¹åˆ«è¯´æ˜const CFStringRef kCGImagePropertyIPTCSpecialInstructions;//å»ºè®®è¡Œä¸ºconst CFStringRef kCGImagePropertyIPTCActionAdvised;//æœåŠ¡å‚è€ƒconst CFStringRef kCGImagePropertyIPTCReferenceService;//æ—¥æœŸå‚è€ƒconst CFStringRef kCGImagePropertyIPTCReferenceDate;//å‚è€ƒç const CFStringRef kCGImagePropertyIPTCReferenceNumber;//åˆ›å»ºæ—¥æœŸconst CFStringRef kCGImagePropertyIPTCDateCreated;//åˆ›å»ºæ—¶é—´const CFStringRef kCGImagePropertyIPTCTimeCreated;//æ•°å­—åˆ›å»ºæ—¥æœŸconst CFStringRef kCGImagePropertyIPTCDigitalCreationDate;//æ•°å­—åˆ›å»ºæ—¶é—´const CFStringRef kCGImagePropertyIPTCDigitalCreationTime;//åŸå§‹ç¨‹åºconst CFStringRef kCGImagePropertyIPTCOriginatingProgram;//ç¨‹åºç‰ˆæœ¬const CFStringRef kCGImagePropertyIPTCProgramVersion;å›¾åƒçš„ç¼–è¾‘å‘¨æœŸï¼ˆæ—©æ™¨ï¼Œæ™šä¸Šæˆ–ä¸¤è€…ï¼‰ã€‚const CFStringRef kCGImagePropertyIPTCObjectCycle;//ä¸æƒ³åˆ›å»ºè€…åç§°const CFStringRef kCGImagePropertyIPTCByline;//å›¾åƒåˆ›å»ºæ ‡é¢˜const CFStringRef kCGImagePropertyIPTCBylineTitle;//åŸå¸‚ä¿¡æ¯const CFStringRef kCGImagePropertyIPTCCity;//åŸå¸‚å†…ä½ç½®const CFStringRef kCGImagePropertyIPTCSubLocation;//çœä»½const CFStringRef kCGImagePropertyIPTCProvinceState;//å›½å®¶ç¼–ç const CFStringRef kCGImagePropertyIPTCCountryPrimaryLocationCode;//å›½å®¶åç§°const CFStringRef kCGImagePropertyIPTCCountryPrimaryLocationName;//OriginalTransmissionå‚è€ƒconst CFStringRef kCGImagePropertyIPTCOriginalTransmissionReference;//å›¾åƒå†…å®¹æ‘˜è¦const CFStringRef kCGImagePropertyIPTCHeadline;//æä¾›å›¾åƒæœåŠ¡çš„åç§°const CFStringRef kCGImagePropertyIPTCCredit;//å›¾åƒæºconst CFStringRef kCGImagePropertyIPTCSource;//å…¬å¸æç¤ºconst CFStringRef kCGImagePropertyIPTCCopyrightNotice;//è”ç³»äººconst CFStringRef kCGImagePropertyIPTCContact;//æè¿°const CFStringRef kCGImagePropertyIPTCCaptionAbstract;//å›¾åƒç¼–è¾‘è€…const CFStringRef kCGImagePropertyIPTCWriterEditor;//å›¾åƒç±»å‹const CFStringRef kCGImagePropertyIPTCImageType;//æ–¹å‘ä¿¡æ¯const CFStringRef kCGImagePropertyIPTCImageOrientation;//è¯­è¨€ä¿¡æ¯const CFStringRef kCGImagePropertyIPTCLanguageIdentifier;//æ˜Ÿçº§const CFStringRef kCGImagePropertyIPTCStarRating;//è”ç³»äººè¯¦ç»†ä¿¡æ¯const CFStringRef kCGImagePropertyIPTCCreatorContactInfo;//å›¾åƒä½¿ç”¨æƒé™const CFStringRef kCGImagePropertyIPTCRightsUsageTerms;//åœºæ™¯ä»£ç const CFStringRef kCGImagePropertyIPTCScene; ä¸Šé¢çš„kCGImagePropertyIPTCCreatorContactInfoå¯¹åº”çš„å­—å…¸ä¸­é”®çš„å®šä¹‰å¦‚ä¸‹ï¼š 12345678910111213141516//è”ç³»äººåŸå¸‚const CFStringRef kCGImagePropertyIPTCContactInfoCity;//è”ç³»äººå›½å®¶const CFStringRef kCGImagePropertyIPTCContactInfoCountry;//è”ç³»äººåœ°å€const CFStringRef kCGImagePropertyIPTCContactInfoAddress;//é‚®ç¼–const CFStringRef kCGImagePropertyIPTCContactInfoPostalCode;//çœä»½const CFStringRef kCGImagePropertyIPTCContactInfoStateProvince;//ç”µå­é‚®ä»¶const CFStringRef kCGImagePropertyIPTCContactInfoEmails;//ç”µè¯const CFStringRef kCGImagePropertyIPTCContactInfoPhones;//ç½‘å€const CFStringRef kCGImagePropertyIPTCContactInfoWebURLs; kCGImageProperty8BIMDictionaryå¯¹åº”çš„å­—å…¸ä¸­å¯èƒ½åŒ…å«çš„é”®å®šä¹‰å¦‚ä¸‹ï¼š 1234//Photoshopæ–‡ä»¶çš„å›¾å±‚åconst CFStringRef kCGImageProperty8BIMLayerNames;//ç‰ˆæœ¬const CFStringRef kCGImageProperty8BIMVersion; kCGImagePropertyDNGDictionaryå¯¹åº”çš„å­—å…¸ä¸­å¯èƒ½åŒ…å«çš„é”®å®šä¹‰å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334//DNGç‰ˆæœ¬const CFStringRef kCGImagePropertyDNGVersion;//å…¼å®¹çš„æœ€è€ç‰ˆæœ¬const CFStringRef kCGImagePropertyDNGBackwardVersion;//æ‘„åƒæœºæ¨¡å‹const CFStringRef kCGImagePropertyDNGUniqueCameraModel;const CFStringRef kCGImagePropertyDNGLocalizedCameraModel;//ç›¸æœºåºåˆ—ç const CFStringRef kCGImagePropertyDNGCameraSerialNumber;//é•œå¤´ä¿¡æ¯const CFStringRef kCGImagePropertyDNGLensInfo;//é»‘åº¦ç­‰çº§const CFStringRef kCGImagePropertyDNGBlackLevel;//ç™½åº¦ç­‰çº§const CFStringRef kCGImagePropertyDNGWhiteLevel;const CFStringRef kCGImagePropertyDNGCalibrationIlluminant1;const CFStringRef kCGImagePropertyDNGCalibrationIlluminant2;const CFStringRef kCGImagePropertyDNGColorMatrix1;const CFStringRef kCGImagePropertyDNGColorMatrix2;const CFStringRef kCGImagePropertyDNGCameraCalibration1;const CFStringRef kCGImagePropertyDNGCameraCalibration2;const CFStringRef kCGImagePropertyDNGAsShotNeutral;const CFStringRef kCGImagePropertyDNGAsShotWhiteXY;const CFStringRef kCGImagePropertyDNGBaselineExposure;const CFStringRef kCGImagePropertyDNGBaselineNoise;const CFStringRef kCGImagePropertyDNGBaselineSharpness;const CFStringRef kCGImagePropertyDNGPrivateData;const CFStringRef kCGImagePropertyDNGCameraCalibrationSignature;const CFStringRef kCGImagePropertyDNGProfileCalibrationSignature;const CFStringRef kCGImagePropertyDNGNoiseProfile;const CFStringRef kCGImagePropertyDNGWarpRectilinear;const CFStringRef kCGImagePropertyDNGWarpFisheye;const CFStringRef kCGImagePropertyDNGFixVignetteRadial; kCGImagePropertyCIFFDictionaryå¯¹åº”çš„å­—å…¸ä¸­å¯èƒ½åŒ…å«çš„é”®å®šä¹‰å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142//ç›¸æœºä¿¡æ¯const CFStringRef kCGImagePropertyCIFFDescription;//å›ºä»¶ç‰ˆæœ¬const CFStringRef kCGImagePropertyCIFFFirmware;//æ‰€æœ‰è€…åç§°const CFStringRef kCGImagePropertyCIFFOwnerName;//å›¾ç‰‡åconst CFStringRef kCGImagePropertyCIFFImageName;//å›¾ç‰‡æ–‡ä»¶åconst CFStringRef kCGImagePropertyCIFFImageFileName;//æ›å…‰æ–¹å¼const CFStringRef kCGImagePropertyCIFFReleaseMethod;//æ›å…‰æ—¶é—´const CFStringRef kCGImagePropertyCIFFReleaseTiming;//RecordIDconst CFStringRef kCGImagePropertyCIFFRecordID;//æ›å…‰æ—¶é—´const CFStringRef kCGImagePropertyCIFFSelfTimingTime;//ç›¸æœºåºåˆ—å·const CFStringRef kCGImagePropertyCIFFCameraSerialNumber;//å›¾ç‰‡ç¼–ç const CFStringRef kCGImagePropertyCIFFImageSerialNumber;//é©±åŠ¨æ¨¡å¼const CFStringRef kCGImagePropertyCIFFContinuousDrive);//ç„¦ç‚¹æ¨¡å¼const CFStringRef kCGImagePropertyCIFFFocusMode;//æµ‹é‡æ¨¡å¼const CFStringRef kCGImagePropertyCIFFMeteringMode;//æ›å…‰æ¨¡å¼const CFStringRef kCGImagePropertyCIFFShootingMode;//é€é•œæ¨¡å¼const CFStringRef kCGImagePropertyCIFFLensModel;//æœ€é•¿é•œå¤´é•¿åº¦const CFStringRef kCGImagePropertyCIFFLensMaxMM;//æœ€çŸ­é•œå¤´é•¿åº¦const CFStringRef kCGImagePropertyCIFFLensMinMM;//ç™½å¹³è¡¡ç­‰çº§const CFStringRef kCGImagePropertyCIFFWhiteBalanceIndex;//æ›å…‰è¡¥å¿const CFStringRef kCGImagePropertyCIFFFlashExposureComp;//å®æµ‹æ›å…‰å€¼const CFStringRef kCGImagePropertyCIFFMeasuredEV); å…­ã€ImageIOæ¡†æ¶åœ¨å®é™…å¼€å‘ä¸­çš„å‡ ä¸ªåº”ç”¨1.æ˜¾ç¤ºç‰¹æ®Šæ ¼å¼çš„å›¾ç‰‡åœ¨å¹³æ—¶å¼€å‘ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨UIImageæ¥è¯»å–å›¾ç‰‡ï¼ŒUIImageæ”¯æŒçš„å›¾ç‰‡åŒ…æ‹¬pngä¸jpgç­‰ï¼Œä½†æ˜¯ç±»ä¼¼windowsç³»ç»Ÿçš„icoå›¾æ ‡ï¼ŒUIImageé»˜è®¤æ˜¯æ— æ³•æ˜¾ç¤ºçš„ï¼Œå¯ä»¥é€šè¿‡ImageIOæ¡†æ¶æ¥åœ¨iOSç³»ç»Ÿä¸­ä½¿ç”¨icoå›¾æ ‡ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112NSString * path = [[NSBundle mainBundle]pathForResource:@\"image\" ofType:@\"ico\"];NSURL * url = [NSURL fileURLWithPath:path];CGImageRef myImage = NULL;CGImageSourceRef myImageSource;CFDictionaryRef myOptions = NULL;myImageSource = CGImageSourceCreateWithURL((CFURLRef)url, NULL);myImage = CGImageSourceCreateImageAtIndex(myImageSource, 0, NULL);CFRelease(myImageSource);UIImageView * image = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 200, 200)];image.image = [UIImage imageWithCGImage:myImage]; 2.è¯»å–æ•°ç ç›¸æœºæ‹æ‘„å›¾ç‰‡çš„åœ°ç†ä½ç½®ã€æ—¶é—´ç­‰ä¿¡æ¯3.å¯¹ç›¸å†Œä¸­å›¾ç‰‡çš„åœ°ç†ä½ç½®ï¼Œæ—¶é—´ç­‰ä¿¡æ¯è¿›è¡Œè‡ªå®šä¹‰ä¿®æ”¹ã€‚4.å°†è‡ªå®šä¹‰æ ¼å¼çš„å›¾ç‰‡æ•°æ®å†™å…¥æœ¬åœ°æ–‡ä»¶ã€‚5.å±•ç¤ºGIFåŠ¨å›¾è¯¦æƒ…è§åšå®¢ï¼š[https://my.oschina.net/u/2340880/blog/608560](https://my.oschina.net/u/2340880/blog/608560)ã€‚ 6.æ¸è¿›æ¸²æŸ“å¤§å›¾æ¸è¿›æ¸²æŸ“æŠ€æœ¯åœ¨å¯¹åŠ è½½å¤§å›¾ç‰‡æ—¶ç‰¹åˆ«é‡è¦ï¼Œä½ åº”è¯¥ä½¿ç”¨è¿‡åœ°å›¾è½¯ä»¶ï¼Œåœ°å›¾è§†å›¾åœ¨åŠ è½½æ—¶æ˜¯å±€éƒ¨è¿›è¡ŒåŠ è½½ï¼Œå½“ç§»åŠ¨æˆ–è€…æ”¾å¤§æ—¶ï¼Œåœ°å›¾ä¼šä¸€éƒ¨åˆ†ä¸€éƒ¨åˆ†çš„æ¸è¿›è¿›è¡ŒåŠ è½½ï¼Œä½¿ç”¨ImageIOæ¡†æ¶å¯ä»¥å®ç°å¤§å›¾æ¸è¿›æ¸²æŸ“çš„æ•ˆæœï¼Œä¸€èˆ¬åœ¨å¯¹å¤§å›¾ç‰‡è¿›è¡Œç½‘ç»œè¯·æ±‚æ—¶ï¼Œå¯ä»¥è·å–ä¸€éƒ¨åˆ†æ•°æ®å°±åŠ è½½ä¸€éƒ¨åˆ†æ•°æ®ï¼Œä¸ºäº†ä¾¿äºæ¼”ç¤ºï¼Œåšå®¢ä¸­ä½¿ç”¨å®šæ—¶å™¨æ¥é»˜è®¤ç½‘ç»œè¿”å›æ•°æ®ï¼Œä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051@interface ViewController ()&#123; NSMutableData * _data; NSData * _allData; NSUInteger length; UIImageView * _imageView; NSTimer * timer; NSInteger le;&#125;@end@implementation ViewController- (void)viewDidLoad &#123; [super viewDidLoad]; _data = [[NSMutableData alloc]init]; NSString * path = [[NSBundle mainBundle]pathForResource:@\"Default-Portrait-ns@2x\" ofType:@\"png\"]; _allData = [NSData dataWithContentsOfFile:path]; length = _allData.length; le = length/10; timer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(updateImage) userInfo:nil repeats:YES]; _imageView = [[UIImageView alloc]initWithFrame:self.view.frame]; [self.view addSubview:_imageView];&#125;-(void)updateImage&#123; static int index = 0; if (index==10) &#123; return; &#125; NSUInteger l; if (index==9) &#123; l=length-le*9; &#125;else&#123; l= le; &#125; Byte by[l]; [_allData getBytes:by range:NSMakeRange(index*le, l)]; [_data appendBytes:by length:l]; CGImageSourceRef myImageSource = CGImageSourceCreateWithData((CFDataRef)_data, NULL); CGImageRef myImage = CGImageSourceCreateImageAtIndex(myImageSource, 0, NULL); CFRelease(myImageSource); _imageView.image = [UIImage imageWithCGImage:myImage]; // image.image = [UIImage imageNamed:@\"image.ico\"]; index++;&#125;@end æ•ˆæœå¦‚ä¸‹ï¼š","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"JavaScriptåŸºç¡€ä¹‹å…«â€”â€”å…¨å±€å‡½æ•°çš„åº”ç”¨","slug":"303JavaScriptåŸºç¡€ä¹‹å…«â€”â€”å…¨å±€å‡½æ•°çš„åº”ç”¨","date":"2017-01-05T16:00:00.000Z","updated":"2021-07-14T02:30:07.116Z","comments":true,"path":"2017/01/06/303JavaScriptåŸºç¡€ä¹‹å…«â€”â€”å…¨å±€å‡½æ•°çš„åº”ç”¨/","link":"","permalink":"http://huishao.cc/2017/01/06/303JavaScriptåŸºç¡€ä¹‹å…«â€”â€”å…¨å±€å‡½æ•°çš„åº”ç”¨/","excerpt":"","text":"JavaScriptåŸºç¡€ä¹‹å…«â€”â€”å…¨å±€å‡½æ•°çš„åº”ç”¨JavaScriptä¸­æä¾›äº†ä¸€äº›å¸¸ç”¨çš„å…¨å±€å‡½æ•°ï¼Œå¼€å‘è€…å¯ä»¥ç›´æ¥å¯¹å…¶è¿›è¡Œè°ƒç”¨ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425var url = \"jaki.io/v3/ç²å°‘\";//å¯¹å­—ç¬¦ä¸²è¿›è¡Œurlç¼–ç  è¿™ä¸ªæ–¹æ³•ä¸ä¼šå¯¹ascllç è¿›è¡Œç¼–ç var enUrl = encodeURI(url);console.log(enUrl);//jaki.io/v3/%E7%8F%B2%E5%B0%91//å¯¹å­—ç¬¦ä¸²è¿›è¡Œurlè§£ç console.log(decodeURI(enUrl));//jaki.io/v3/ç²å°‘//è¿›è¡Œuriå…¨ç¼–ç var enCompUrl = encodeURIComponent(url);console.log(enCompUrl);//jaki.io%2Fv3%2F%E7%8F%B2%E5%B0%91//è®°æ€§URIå…¨è§£ç console.log(decodeURIComponent(enCompUrl));//jaki.io/v3/ç²å°‘//eval()æ–¹æ³•å¯ä»¥å°†æŸä¸ªå­—ç¬¦ä¸²è§£é‡ŠæˆJSä»£ç è¿›è¡Œæ‰§è¡Œeval(\"console.log('eval')\");//æ£€æŸ¥æŸä¸ªå€¼æ˜¯å¦ä¸ºæœ‰é™æ•°å­—console.log(isFinite(Infinity));//æ£€æŸ¥æŸä¸ªå€¼æ˜¯å¦ä¸ºéæ•°å­—console.log(isNaN(\"s\"));//æŠŠå¯¹è±¡çš„å€¼è½¬æ¢ä¸ºæ•°å­—console.log(Number(\"222\"));//å°†ä¸€ä¸ªå­—ç¬¦ä¸²è§£ææˆæµ®ç‚¹æ•°console.log(parseFloat(\"3.14\"));//å°†ä¸€ä¸ªå­—ç¬¦ä¸²è§£ææˆæ•´æ•°console.log(parseInt(\"123\"));//æŠŠå¯¹è±¡çš„å€¼è½¬æ¢æˆå­—ç¬¦ä¸²console.log(new Date()); éœ€è¦æ³¨æ„ï¼ŒencodeURI()ä¸encodeURIComponent()æ–¹æ³•éƒ½æ˜¯ç”¨æ¥å¯¹URIè¿›è¡Œç¼–ç ï¼Œä¸åŒçš„æ˜¯ï¼ŒencodeURI()æ–¹æ³•ä¸ä¼šå¯¹ascllå­—ç¬¦è¿›è¡Œç¼–ç ï¼Œåœ¨è¿›è¡Œæœ‰ä¸­æ–‡å­—ç¬¦çš„urlç¼–ç æ—¶ï¼Œéœ€è¦ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ã€‚ å‰ç«¯å­¦ä¹ æ–°äººï¼Œæœ‰å¿—åŒé“åˆçš„æœ‹å‹ï¼Œæ¬¢è¿äº¤æµä¸æŒ‡å¯¼ï¼ŒQQç¾¤:541458536","categories":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}],"tags":[],"keywords":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}]},{"title":"JavaScriptåŸºç¡€ä¹‹ä¸ƒâ€”â€”JavaScriptä¸­çš„æ­£åˆ™è¡¨è¾¾å¼","slug":"301JavaScriptåŸºç¡€ä¹‹ä¸ƒâ€”â€”JavaScriptä¸­çš„æ­£åˆ™è¡¨è¾¾å¼","date":"2017-01-04T16:00:00.000Z","updated":"2021-07-14T02:28:47.417Z","comments":true,"path":"2017/01/05/301JavaScriptåŸºç¡€ä¹‹ä¸ƒâ€”â€”JavaScriptä¸­çš„æ­£åˆ™è¡¨è¾¾å¼/","link":"","permalink":"http://huishao.cc/2017/01/05/301JavaScriptåŸºç¡€ä¹‹ä¸ƒâ€”â€”JavaScriptä¸­çš„æ­£åˆ™è¡¨è¾¾å¼/","excerpt":"","text":"JavaScriptåŸºç¡€ä¹‹ä¸ƒâ€”â€”JavaScriptä¸­çš„æ­£åˆ™è¡¨è¾¾å¼æ­£åˆ™è¡¨è¾¾å¼åœ¨å‰ç«¯å¼€å‘ä¸­åº”ç”¨ååˆ†å¹¿æ³›ï¼Œä»è¡¨å•éªŒè¯åˆ°å†…å®¹æ›¿æ¢ï¼Œæ­£åˆ™å¤šå‘æŒ¥ç€ååˆ†é‡è¦çš„ä½œç”¨ã€‚JavaScriptä¸­æä¾›äº†ä¸“é—¨çš„æ­£åˆ™å¯¹è±¡ã€‚ åœ¨JavaScriptä¸­ï¼Œæœ‰ä¸¤ç§æ–¹å¼åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼ï¼Œåˆ†åˆ«å¯ä»¥é€šè¿‡ç›´æ¥é‡è¯­æ³•æ¥åˆ›å»ºå’ŒRegExpå¯¹è±¡æ¥åˆ›å»ºï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456var string = \"Hello World123454321,&#123;name:jaki,age:25&#125;Hello,HELLO\";//ä½¿ç”¨ç›´æ¥é‡è¯­æ³•åˆ›å»ºæ­£åˆ™console.log(string.match(/ello/g));//[ 'ello', 'ello' ]//ä½¿ç”¨å¯¹è±¡æ„é€ æ­£åˆ™var reg1 = new RegExp(\"ello\",\"g\");console.log(string.match(reg1));//[ 'ello', 'ello' ] ä½¿ç”¨ç›´æ¥é‡è¯­æ³•åˆ›å»ºæ­£åˆ™çš„æ¨¡æ¿å¦‚ä¸‹: /param/attri å…¶ä¸­paramæ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼Œattriä¸ºä¿®é¥°å‚æ•°ï¼Œå¯ä»¥é€‰æ‹©çš„æœ‰ï¼Œiã€gã€m3ä¸ªã€‚iä»£è¡¨å¿½ç•¥å¤§å°å†™ï¼Œgä»£è¡¨å…¨å±€æ£€ç´¢ï¼Œmä»£è¡¨å¤šè¡Œæ£€ç´¢ã€‚ åŒæ ·ï¼Œä½¿ç”¨RegExpå¯¹è±¡çš„æ„é€ æ–¹æ³•æ¥æ„é€ æ­£åˆ™å¯¹è±¡ä¹Ÿéœ€è¦ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬1ä¸ªå‚æ•°ä¸ºæ­£åˆ™è¡¨è¾¾å¼ï¼Œç¬¬2ä¸ªå‚æ•°ä¸ºä¿®é¥°å‚æ•°ã€‚ æ­£åˆ™è¡¨è¾¾å¼å¯ä»¥ä½¿ç”¨æ‹¬å·æ¥è¿›è¡ŒèŒƒå›´æŸ¥æ‰¾ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415161718//i è¡¨ç¤ºå¿½ç•¥å¤§å°å†™ gè¡¨ç¤ºå…¨å±€æœç´¢ mè¡¨ç¤ºå¤šè¡Œæœç´¢var reg2 = new RegExp(\"ello\",\"igm\");console.log(string.match(reg2));//[ 'ello', 'ello', 'ELLO' ]//[]å†…è¡¨ç¤ºåŒ¹é…èŒƒå›´å†…çš„æŸä¸ªå­—ç¬¦var reg3 = new RegExp(\"[abcd]\",\"g\");console.log(string.match(reg3));//å‰é¢åŠ ä¸Š^è¡¨ç¤ºå–å åŒ¹é…é™¤äº†[]å†…çš„æ‰€æœ‰å…¶ä»–å­—ç¬¦var reg4 = new RegExp(\"[^abcd]\",\"g\");console.log(string.match(reg4));//è¿›è¡ŒèŒƒå›´åŒ¹é… å¦‚ä¸‹åªåŒ¹é…æ•°å­—var reg5 = new RegExp(\"[0-9]\",\"g\");console.log(string.match(reg5));//è¿›è¡ŒèŒƒå›´åŒ¹é… å¦‚ä¸‹åªåŒ¹é…è‹±æ–‡å­—ç¬¦var reg6 = new RegExp(\"[a-z]\",\"ig\");console.log(string.match(reg6));//è¿›è¡ŒæŒ‡å®šä¸²çš„åŒ¹é…var reg7 = new RegExp(\"(123|hell)\",\"ig\");//[ 'Hell', '123', 'Hell', 'HELL' ]console.log(string.match(reg7)); åœ¨æ„é€ æ­£åˆ™è¡¨è¾¾å¼æ—¶ï¼Œä¹Ÿå¯ä»¥çµæ´»çš„ä½¿ç”¨è®¸å¤šå…ƒå­—ç¬¦ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728//å…ƒå­—ç¬¦//.å…ƒå­—ç¬¦ä¼šæ¯”é…ä»»ä½•å­—ç¬¦ é™¤äº†æ¢è¡Œå’Œè¡Œç»“æŸç¬¦var reg8 = new RegExp(\"e.l\",\"g\");console.log(string.match(reg8));//x+ç”¨äºåŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªxå­—ç¬¦var reg9 = new RegExp('l+',\"g\");console.log(string.match(reg9));//x*åŒ¹é…0ä¸ªæˆ–å¤šä¸ªxå­—ç¬¦var reg10 = new RegExp('He*',\"g\");console.log(string.match(reg10));//x?åŒ¹é…0ä¸ªæˆ–1ä¸ªxå­—ç¬¦var reg11 = new RegExp('He?',\"g\");console.log(string.match(reg11));//x&#123;n&#125;åŒ¹é…æœ‰nä¸ªxå­—ç¬¦var reg12 = new RegExp('l&#123;2&#125;',\"g\");console.log(string.match(reg12));//x&#123;n,m&#125;åŒ¹é…æœ‰n-mé—´ä¸ªxå­—ç¬¦var reg13 = new RegExp('l&#123;1,5&#125;',\"g\");console.log(string.match(reg13));//x&#123;n,&#125;åŒ¹é…è‡³å°‘æœ‰nä¸ªxå­—ç¬¦var reg14 = new RegExp('l&#123;1,&#125;',\"g\");console.log(string.match(reg14));//x$åŒ¹é…ä»¥xç»“å°¾var reg15 = new RegExp('O$',\"g\");console.log(string.match(reg15));//^xåŒ¹é…ä»¥xå¼€å¤´var reg15 = new RegExp('^H',\"g\");console.log(string.match(reg15)); å…³äºRegExpå¯¹è±¡ï¼Œå…¶ä¸­ä¹Ÿå°è£…äº†ä¸€äº›å±æ€§å’Œæ–¹æ³•ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678//è·å–æ˜¯å¦æœ‰ç›¸åº”æ ‡å¿—ä½console.log(reg15.global);console.log(reg15.ignoreCase);console.log(reg15.multiline);//æ£€ç´¢å­—ç¬¦ä¸²ä¸­æ­£åˆ™åŒ¹é…console.log(reg15.exec(string));//æ£€æµ‹å­—ç¬¦ä¸²æ˜¯å¦åŒ¹é… ä¼šè¿”å›trueæˆ–è€…falseconsole.log(reg15.test(string)); å‰ç«¯å­¦ä¹ æ–°äººï¼Œæœ‰å¿—åŒé“åˆçš„æœ‹å‹ï¼Œæ¬¢è¿äº¤æµä¸æŒ‡å¯¼ï¼ŒQQç¾¤:541458536","categories":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}],"tags":[],"keywords":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}]},{"title":"Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°äºŒåâ€”â€”å·¥å…·æ¡çš„åº”ç”¨","slug":"302Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°äºŒåâ€”â€”å·¥å…·æ¡çš„åº”ç”¨","date":"2017-01-04T16:00:00.000Z","updated":"2021-07-14T02:29:26.234Z","comments":true,"path":"2017/01/05/302Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°äºŒåâ€”â€”å·¥å…·æ¡çš„åº”ç”¨/","link":"","permalink":"http://huishao.cc/2017/01/05/302Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°äºŒåâ€”â€”å·¥å…·æ¡çš„åº”ç”¨/","excerpt":"","text":"Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°äºŒåâ€”â€”å·¥å…·æ¡çš„åº”ç”¨å·¥å…·æ¡ç”¨äºå‘ç”¨æˆ·è¿›è¡ŒæŸä¸ªæ“ä½œçš„æç¤ºï¼Œåœ¨Bootstrapæ¡†æ¶ä¸­ï¼Œä¸ºæŒ‰é’®æ·»åŠ å·¥å…·æ¡ååˆ†ç®€å•ï¼Œåªéœ€å¦‚ä¸‹ä»£ç ï¼š 1&lt;button class=\"btn btn-primary\" data-toggle=\"tooltip\" data-placement=\"top\" id=\"btn\"&gt;å·¥å…·æ¡&lt;/button&gt; éœ€è¦æ³¨æ„ï¼Œè¦ä½¿å·¥å…·æ¡æ˜¾ç°ï¼Œå¿…é¡»å…ˆè¿›è¡Œå·¥å…·æ¡å¯¹è±¡çš„æ„é€ ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567$(\"#btn\").tooltip(&#123; animation:false, delay:1000, placement:'top', title:'æ ‡é¢˜ï¼ï¼ï¼ï¼', trigger:'click'&#125;); è¿™ä¸ªæ–¹æ³•ä¸­å¯ä»¥ä¼ å…¥ä¸€ä¸ªå¯¹è±¡å‚æ•°ï¼Œå…¶ä¸­animationå±æ€§è®¾ç½®å·¥å…·æ¡çš„æ˜¾éšæ˜¯å¦æœ‰åŠ¨ç”»æ•ˆæœï¼›delayå±æ€§è®¾ç½®è§¦å‘åå»¶è¿Ÿå¤šä¹…è¿›è¡Œå·¥å…·æ¡çš„æ˜¾éšæ“ä½œï¼›placementå±æ€§è®¾ç½®å·¥å…·æ¡å‡ºç°çš„ä½ç½®ï¼Œå¯é€‰topï¼Œbottomï¼Œleftï¼Œrightï¼Œautoé€‰é¡¹ï¼›titleå±æ€§è®¾ç½®å·¥å…·æ æ ‡é¢˜ï¼›triggerå±æ€§è®¾ç½®è§¦å‘æ–¹å¼ï¼Œå¯é€‰clickï¼Œhoverï¼Œfocuså’Œmanualã€‚ å·¥å…·æ¡æ•ˆæœå¦‚ä¸‹ï¼š å¼€å‘è€…ä¹Ÿå¯ä»¥æ‰‹åŠ¨è°ƒç”¨æ–¹æ³•æ¥æ§åˆ¶å·¥å…·æ¡çš„æ˜¾ç¤ºéšè—ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112//æ˜¾ç¤ºå·¥å…·æ $('#show').on('click',function()&#123; $('#btn').tooltip('show');&#125;);//éšè—å·¥å…·æ $('#hide').on('click',function()&#123; $('#btn').tooltip('hide');&#125;);//åˆ‡æ¢æ˜¾éšçŠ¶æ€$('#toggle').on('click',function()&#123; $('#btn').tooltip('toggle');&#125;); Bootstrapä¸­è¿˜å¯¹å·¥å…·æ¡æä¾›äº†ä¸€äº›çŠ¶æ€ç›‘å¬æ–¹æ³•ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112$('#btn').on('show.bs.tooltip',function()&#123; console.log(\"å·¥å…·æ¡å°†è¦å¼€å¯\");&#125;);$('#btn').on('shown.bs.tooltip',function()&#123; console.log(\"å·¥å…·æ¡å·²ç»å¼€å¯\");&#125;);$('#btn').on('hide.bs.tooltip',function()&#123; console.log(\"å·¥å…·æ¡å°†è¦å…³é—­\");&#125;);$('#btn').on('hidden.bs.tooltip',function()&#123; console.log(\"å·¥å…·æ¡å·²ç»å…³é—­\");&#125;); å¦å¤–ï¼Œæœ¬ç¯‡åšå®¢ä¸­æ‰€æœ‰çš„å®ä¾‹ä»£ç åŠæ˜¾ç¤ºæ•ˆæœï¼Œåœ¨å¦‚ä¸‹åœ°å€ä¸­ï¼Œéœ€è¦çš„å¯ä»¥è‡ªè¡Œå¯¹ç…§å­¦ä¹ ã€‚ http://zyhshao.github.io/bootStrapDemo/toolJS.htmlã€‚ å‰ç«¯å­¦ä¹ æ–°äººï¼Œæœ‰å¿—åŒé“åˆçš„æœ‹å‹ï¼Œæ¬¢è¿äº¤æµä¸æŒ‡å¯¼ï¼ŒQQç¾¤:541458536","categories":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}],"tags":[],"keywords":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}]},{"title":"JavaScriptåŸºç¡€ä¹‹å…­â€”â€”å†…ç½®å¯¹è±¡","slug":"300JavaScriptåŸºç¡€ä¹‹å…­â€”â€”å†…ç½®å¯¹è±¡","date":"2017-01-03T16:00:00.000Z","updated":"2021-07-13T11:13:17.231Z","comments":true,"path":"2017/01/04/300JavaScriptåŸºç¡€ä¹‹å…­â€”â€”å†…ç½®å¯¹è±¡/","link":"","permalink":"http://huishao.cc/2017/01/04/300JavaScriptåŸºç¡€ä¹‹å…­â€”â€”å†…ç½®å¯¹è±¡/","excerpt":"","text":"JavaScriptåŸºç¡€ä¹‹å…­â€”â€”å†…ç½®å¯¹è±¡ä¸€ã€æ„é€ å¯¹è±¡JavaScriptä¸­çš„ä¸€äº›æ•°æ®éƒ½æ˜¯å¯¹è±¡ï¼Œå¯¹è±¡å®é™…ä¸Šæ˜¯å±æ€§ä¸æ–¹æ³•çš„åŒ…è£…ã€‚å¹¶ä¸åƒå…¶ä»–ç±»ä¼¼Swift/OC/Javaç±»çš„é¢å‘å¯¹è±¡è¯­è¨€ï¼Œåœ¨ç›®å‰JavaScriptçš„å®ç°ä¸­å¹¶æ²¡æœ‰ç±»çš„æ¦‚å¿µï¼Œå¼€å‘è€…æœ‰å¦‚ä¸‹ä¸¤ç§æ–¹å¼æ¥è¿›è¡Œå¯¹è±¡çš„æ„é€ ï¼š 1234567891011121314//åˆ›å»ºå¯¹è±¡çš„æ–¹å¼æœ‰ä¸¤ç§ å¯ä»¥ç›´æ¥åˆ›å»ºå¯¹è±¡çš„å®ä¾‹var obj = new Object();obj.name = \"jaki\";obj.age = 25;console.log(obj);//ä¹Ÿå¯ä»¥ä½¿ç”¨å¤§æ‹¬å·æ‰åˆ›å»ºå¯¹è±¡var obj2 = &#123; name:\"jaki\", age:25, show:function()&#123; console.log(this.name+\"--\"+this.age); &#125;&#125;;obj2.show(); å›é¡¾Swiftè¯­è¨€çš„å¯¹è±¡åˆ›å»ºæ–¹æ³•ï¼Œæ˜¯é€šè¿‡ç±»è°ƒç”¨æ„é€ æ–¹æ³•ï¼Œå› æ­¤ï¼Œåœ¨JavaScriptä¸­ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å‡½æ•°æ¥æ¨¡æ‹Ÿç±»çš„åŠŸèƒ½ï¼Œæ­¤ç±»çš„å‡½æ•°å¯ä»¥ç§°ä¸ºæ„é€ å‡½æ•°ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910//æ¨¡æ‹Ÿç±» æ„é€ æ–¹æ³•function Person(name,age)&#123; this.name = name; this.age = age; this.show = function()&#123; console.log(this.name+\"--\"+this.age); &#125;;&#125;var p = new Person(\"jaki\",25);p.show(); JavaScriptä¸­çš„å¯¹è±¡å‘—æ„é€ å‡ºæ¥åï¼Œä¾ç„¶å¯ä»¥ä¸ºå…¶åŠ¨æ€æ·»åŠ å±æ€§æˆ–æ–¹æ³•ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213//æ¨¡æ‹Ÿç±» æ„é€ æ–¹æ³•function Person(name,age)&#123; this.name = name; this.age = age; this.show = function()&#123; console.log(this.name+\"--\"+this.age); &#125;;&#125;var p = new Person(\"jaki\",25);p.show();//å·²ç»æ„é€ çš„å¯¹è±¡ ä¹Ÿå¯ä»¥å¢åŠ å±æ€§p.phone = \"1111\"console.log(p.phone); äºŒã€æ•°å€¼å¯¹è±¡Numberåœ¨JavaScriptä¸­ï¼Œæ•°å€¼æ˜¯ä¸€ç§åŸºæœ¬æ•°æ®ç±»å‹ï¼Œä½†æ˜¯Numberæ˜¯æ•°å€¼å¯¹è±¡ï¼Œå¯ä»¥ç†è§£ä¸ºå¯¹æ•°å€¼çš„åŒ…è£…ã€‚å¹¶ä¸”JavaScriptä¸­çš„æ•°å€¼åªæœ‰ä¸€ç§ç±»å‹ï¼Œå¯ä»¥åˆ›å»ºæ•´æ•°ï¼Œä¹Ÿå¯ä»¥åˆ›å»ºå°æ•°ï¼Œå¦‚ä¸‹ï¼š 12345//æ•°å­—å¯¹è±¡//JSä¸­åªæœ‰ä¸€ç§æ•°å­—å¯¹è±¡Number //å¯ä»¥æè¿°æ•´æ•° ä¹Ÿå¯ä»¥æè¿°å°æ•°var c = 10;var c1 = 3.14; ä¹Ÿæ”¯æŒä½¿ç”¨ç§‘å­¦è®¡æ•°æ³•æ¥å¯¹æ•°å€¼è¿›è¡Œæè¿°ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234//ä¹Ÿå¯ä»¥ä½¿ç”¨ç§‘å­¦è®¡æ•°æ³•æ¥è®¡æ•°var c2 = 1.2e5;var c3 = 123e-5;console.log(c2,c3); åœ¨JavaScriptä¸­ï¼Œä½¿ç”¨å‰ç¼€0æ¥æè¿°å…«è¿›åˆ¶æ•°å€¼ï¼Œä½¿ç”¨å‰ç¼€0xæ¥æè¿°åå…­è¿›è¡Œçš„æ•°å€¼ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456//ä½¿ç”¨0ä¸ºå‰ç¼€ çº¦å®šä¸º8è¿›åˆ¶var c4 = 017;console.log(c4); //åè¿›åˆ¶15//ä½¿ç”¨0xå‰ç¼€çº¦å®šä¸ºåå…­è¿›åˆ¶var c5 = 0x11;console.log(c5); //åè¿›åˆ¶17 éœ€è¦æ³¨æ„ï¼šå’Œå…¶ä»–è¯­è¨€ä¸åŒï¼ŒJavaScriptä¸­ä¸èƒ½éšæ„çš„æ•°å€¼å‰é¢åŠ 0ï¼Œå¦åˆ™ä¼šè¢«è®¤ä¸ºæ˜¯å…«è¿›åˆ¶è®¡æ•°ã€‚ å…³äºNumberï¼Œå¦‚æœä½¿ç”¨newæ¥è¿›è¡Œæ„é€ ï¼Œä¼šè¿”å›ä¸€ç›´æ•°å€¼å¯¹è±¡ï¼Œå…¶ä¸­å¯ä»¥ç©¿å…¥ä¸€ä¸ªå‚æ•°ä½œä¸ºæ•°å€¼å¯¹è±¡çš„åŸå§‹å€¼ï¼Œå¦‚æœå°†Number()ä½œä¸ºå‡½æ•°æ¥ä½¿ç”¨ï¼Œåˆ™ä¼šç›´æ¥è¿”å›ä¸€ä¸ªå…·ä½“çš„æ•°å€¼ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678//Numberå¯ä»¥ä½œä¸ºæ„é€ æ–¹æ³•æ¥ä½¿ç”¨ ä¼ å…¥çš„å‚æ•°ä¸ºè¦æ„é€ çš„Numberå€¼var objc = new Number(15);console.log(objc);//Numberä¹Ÿå¯ä»¥ä½œä¸ºå‡½æ•°æ¥ä½¿ç”¨ è¿™æ—¶ä»–å°†è¿”å›æ•°å€¼æˆ–è€…NaNvar objc2 = Number(2);console.log(objc2); //2var objc3 = Number(\"c\");console.log(objc3);//NaN Numberä¸­å†…ç½®äº†ä¸€äº›å¸¸ç”¨çš„å±æ€§ä¸æ–¹æ³•ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011//å¸¸ç”¨å†…ç½®å±æ€§//è¿”å›å¯è¡¨ç¤ºçš„æœ€å¤§å€¼console.log(Number.MAX_VALUE);//è¿”å›å¯è¡¨ç¤ºçš„æœ€å°å€¼console.log(Number.MIN_VALUE);//è¿”å›éæ•°å­—å€¼console.log(Number.NaN);//è¡¨ç¤ºè´Ÿæ— ç©·å¤§ å‘ç”Ÿæº¢å‡ºæ—¶ ä¼šè¿”å›console.log(Number.NEGATIVE_INFINITY);//è¡¨ç¤ºæ­£æ— ç©·å¤§ å‘ç”Ÿæº¢å‡ºæ—¶ ä¼šè¿”å›console.log(Number.POSITIVE_INFINITY); å¯¹è±¡å®ä¾‹çš„å¸¸ç”¨æ–¹æ³•ï¼š 123456789101112131415161718//å¸¸ç”¨å†…ç½®æ–¹æ³•var c6 = 100;//å°†æ•°æ®è½¬æ¢æˆå­—ç¬¦ä¸²console.log(c6.toString());//toString()æ–¹æ³•ä¸­å¯ä»¥ä¼ å…¥ä¸€ä¸ªå‚æ•° é»˜è®¤ä¸º10è¿›åˆ¶ å¯é€‰2-36console.log(c6.toString(36));//toLocaleString()æ–¹æ³•è¿”å›æœ¬åœ°ç¯å¢ƒæ ¼å¼çš„å­—ç¬¦ä¸² ä¸€èˆ¬10è¿›åˆ¶console.log(c6.toLocaleString());var c7 = 3.1415926;//toFixed()æ–¹æ³•ç”¨äºå°†æ•°å­—è½¬æ¢æˆå­—ç¬¦ä¸² å¯ä»¥æŒ‡å®šå°æ•°ä½æ•° ä¼šå››èˆäº”å…¥console.log(c7.toFixed(3));//å°†æ•°å€¼è½¬æ¢æˆæŒ‡æ•°è®¡æ•°æ³•console.log(c7.toExponential(1));//toPrecision()æ–¹æ³•å¯ä»¥å°†æ•°å€¼è½¬æ¢ä¸ºæŒ‡å®šä½æ•°console.log(c7.toPrecision(4));//è¿”å›åŸå§‹æ•°å€¼console.log(c7.valueOf()); éœ€è¦æ³¨æ„ï¼Œå¯¹äºè¿›åˆ¶è½¬æ¢ï¼ŒtoString()æ–¹æ³•æ”¯æŒ2-36è¿›åˆ¶ï¼Œè¿™å¾ˆå¥½ç†è§£ï¼Œæ•°å­—0-9åŠ ä¸Š26ä¸ªè‹±æ–‡å­—æ¯ï¼Œæœ€å¤šå¯ä»¥è¡¨è¾¾36ä¸ªæ•°å­—ã€‚ ä¸‰ã€å­—ç¬¦ä¸²å¯¹è±¡StringJavaScriptè¯­è¨€ä¸­çš„å­—ç¬¦ä¸²å¯¹è±¡å°è£…äº†å¤§é‡çš„æ“ä½œæ–¹æ³•ï¼Œéœ€è¦æ³¨æ„ï¼ŒJavaScriptä¸­çš„Stringå¯¹è±¡æ˜¯ä¸å¯å˜çš„ï¼Œæ‰€æœ‰å¯¹å­—ç¬¦ä¸²çš„æ“ä½œéƒ½æ˜¯è¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ã€‚Stringå¯¹è±¡ä¸­æœ€å¸¸ç”¨çš„ä¸€ä¸ªå±æ€§ä¸ºlengthå±æ€§ï¼Œè¿™ä¸ªå±æ€§å¯ä»¥è·å–å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345//å­—ç¬¦ä¸²å¯¹è±¡var str1 = new String(\"HelloWorld\");var str2 = String(\"HELLO\");//lengthå±æ€§å¯ä»¥è·å–å­—ç¬¦ä¸²çš„é•¿åº¦console.log(str1.length); //10 Stringå¯¹è±¡ä¸­å°è£…çš„ä¸€äº›å¸¸ç”¨æ–¹æ³•ç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071//é™æ€æ–¹æ³•//é€šè¿‡Unicodeå€¼åˆ›å»ºå­—ç¬¦var str3 = String.fromCharCode(100,102,103,104);//dfghconsole.log(str3);//åˆ›å»ºhtmlé”šç‚¹console.log(str1.anchor(\"label\")); //&lt;a name=\"label\"&gt;HelloWorld&lt;/a&gt;//åµŒå…¥bigæ ‡ç­¾ä¸­console.log(str1.big());//&lt;big&gt;HelloWorld&lt;/big&gt;//åµŒå…¥smallæ ‡ç­¾console.log(str1.small());//&lt;small&gt;HelloWorld&lt;/small&gt;//åµŒå…¥blickæ ‡ç­¾ä¸­console.log(str1.blink());//&lt;blink&gt;HelloWorld&lt;/blink&gt;//åµŒå…¥bæ ‡ç­¾ä¸­console.log(str1.bold());//&lt;b&gt;HelloWorld&lt;/b&gt;//è·å–æŒ‡å®šä½ç½®çš„å­—ç¬¦ ä»0å¼€å§‹console.log(str1.charAt(1));//e//è·å–æŒ‡å®šä½ç½®å­—ç¬¦çš„unicodeç console.log(str1.charCodeAt(1));//101//å­—ç¬¦ä¸²æ‹¼æ¥console.log(str1.concat(\"1\",\"2\",\"3\"));//HelloWorld123//åµŒå…¥æ‰“å°æ¨¡å¼console.log(str1.fixed());//&lt;tt&gt;HelloWorld&lt;/tt&gt;//æŒ‡å®šHTMLå­—ä½“é¢œè‰²console.log(str1.fontcolor('red'));//&lt;font color=\"red\"&gt;HelloWorld&lt;/font&gt;//æŒ‡å®šHTMLå­—ä½“å¤§å°console.log(str1.fontsize(24));//&lt;font size=\"24\"&gt;HelloWorld&lt;/font&gt;//indexOf()æ–¹æ³•ç”¨äºæ£€æŸ¥æŸä¸ªå­ä¸²åœ¨çˆ¶ä¸²ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼Œå…¶ä¸­ç¬¬1ä¸ªå‚æ•°ä¸ºè¦æ£€ç´¢çš„å­ä¸²ï¼Œç¬¬2ä¸ªå‚æ•°ä¸ºä»æŸä¸ªä½ç½®å¼€å§‹æ£€ç´¢console.log(str1.indexOf('l',3));//3 æ³¨æ„ï¼Œå¦‚æœæ²¡æœ‰æ£€ç´¢åˆ° ä¼šè¿”å›-1//åµŒå…¥iæ ‡ç­¾ä¸­console.log(str1.italics());//&lt;i&gt;HelloWorld&lt;/i&gt;//ä»åå¾€å‰æ£€ç´¢ åŒindexOf()æ–¹æ³•console.log(str1.lastIndexOf(\"l\",10));//8//åµŒå…¥aæ ‡ç­¾ä¸­console.log(str1.link(\"www.baidu.com\"));//&lt;a href=\"www.baidu.com\"&gt;HelloWorld&lt;/a&gt;//è¿›è¡Œå­—ç¬¦ä¸²æ¯”è¾ƒ å¦‚æœstr1&lt;å‚æ•° åˆ™è¿”å›-1 å¦‚æœå¤§äº åˆ™è¿”å›1 ç›¸ç­‰ åˆ™è¿”å›0console.log(str1.localeCompare(\"Z\"));//-1//match()æ–¹æ³•ç”¨äºå­—ç¬¦ä¸²æ£€ç´¢ å…¶å°†è¿”å›ä¸€ä¸ªæ£€ç´¢ç»“æœå¯¹è±¡//match()æ–¹æ³•çš„å‚æ•°å¯ä»¥ä¸º//å­—ç¬¦ä¸²:è¦æ£€ç´¢çš„å­—ç¬¦ä¸²//æ­£åˆ™è¡¨è¾¾å¼:è¦æ£€ç´¢çš„æ­£åˆ™è¡¨è¾¾å¼console.log(str1.match(\"ell\"));//[ 'ell', index: 1, input: 'HelloWorld' ]console.log(str1.match(/ell/));//è¿›è¡Œå­—ç¬¦ä¸²æ›¿æ¢ ç¬¬1ä¸ªå‚æ•°ä¸ºè¦è¢«æ›¿æ¢çš„å­—ç¬¦æˆ–è€…æ­£åˆ™ ç¬¬2ä¸ªå‚æ•°ä¸ºæ›¿æ¢æˆçš„å­—ç¬¦ä¸²console.log(str1.replace(\"Hello\",\"hahaha\"));//hahahaWorld//è¿›è¡Œå­ä¸²åŒ¹é… å¯ä»¥æ˜¯å­—ç¬¦ä¸²å‚æ•°ä¹Ÿå¯ä»¥æ˜¯æ­£åˆ™ è¿™ä¸ªæ–¹æ³•ä¸èƒ½æŒ‡å®šæ£€ç´¢èµ·ç‚¹console.log(str1.search(\"World\"));//5//è¿›è¡Œå­—ç¬¦ä¸²æˆªå–console.log(str1.slice(0,5));//Hello//è¿›è¡Œå­—ç¬¦ä¸²åˆ†éš”æ“ä½œ//ç¬¬ä¸€ä¸ªå‚æ•°ï¼šåˆ†éš”æ ‡å‡† å¯ä»¥ä¼šå­—ç¬¦ä¸²æˆ–è€…æ­£åˆ™//ç¬¬äºŒä¸ªå‚æ•°ï¼šè¿”å›æ•°ç»„ä¸­å…ƒç´ çš„æœ€å¤§ä¸ªæ•°console.log(str1.split('o',10));//[ 'Hell', 'W', 'rld' ]//åµŒå…¥strikeæ ‡ç­¾ä¸­console.log(str1.strike());//&lt;strike&gt;HelloWorld&lt;/strike&gt;//åµŒå…¥subæ ‡ç­¾console.log(str1.sub());//&lt;sub&gt;HelloWorld&lt;/sub&gt;//è¿›è¡Œå­—ç¬¦ä¸²æˆªå– ç¬¬1ä¸ªå‚æ•°ä¸ºèµ·å§‹ä½ç½® ç¬¬2ä¸ªå‚æ•°ä¸ºéœ€è¦æˆªå–çš„é•¿åº¦console.log(str1.substr(0,5));//Hello//è¿›è¡Œå­—ç¬¦ä¸²æˆªå– è·å–ä¸¤ä¸ªç´¢å¼•ä¹‹é—´çš„å­—ç¬¦console.log(str1.substring(5,10));//World//åµŒå…¥supæ ‡ç­¾ä¸­console.log(str1.sup());//&lt;sup&gt;HelloWorld&lt;/sup&gt;//å…¨éƒ¨è½¬æ¢ä¸ºå°å†™å­—æ¯console.log(str1.toLocaleLowerCase());console.log(str1.toLowerCase());//å…¨éƒ¨è½¬æ¢ä¸ºå¤§å†™å­—æ¯console.log(str1.toLocaleUpperCase());console.log(str1.toUpperCase());//è¿”å›å­—ç¬¦ä¸²å¯¹è±¡çš„åŸå§‹å€¼console.log(str1.valueOf()); å››ã€æ—¥æœŸå¯¹è±¡DateJavaScriptä¸­æä¾›ä¸°å¯Œçš„æ—¥æœŸå¤„ç†æ–¹æ³•ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889//æ—¥æœŸå¯¹è±¡date//åˆ›å»ºå½“å‰æ—¶é—´å¯¹è±¡var date1 = new Date();console.log(date1);//2017-01-04T02:00:05.617Z//è¿”å›å½“å‰çš„æ—¥æœŸvar date2 = Date();console.log(date2);//Wed Jan 04 2017 10:04:56 GMT+0800 (CST)//è·å–æ—¶é—´å¯¹è±¡æ˜¯ä¸€ä¸ªæœˆä¸­çš„ç¬¬å‡ å¤© 1-31ä¹‹é—´ å¿…é¡»æ˜¯Dateå¯¹è±¡è°ƒç”¨console.log(date1.getDate()); //4//è·å–æ—¶é—´å¯¹è±¡æ˜¯ä¸€å‘¨ä¸­çš„ç¬¬å‡ å¤© å‘¨æ—¥ä¸º0console.log(date1.getDay()); //3//è¿”å›æœˆä»½ æ³¨æ„ è¿™ä¸ªä¼šè¿”å›0-11ä¹‹é—´console.log(date1.getMonth()); //0//è·å–å®Œæ•´çš„å¹´console.log(date1.getFullYear()); //2017//è·å–å°æ—¶0-23console.log(date1.getHours());//è·å–åˆ†é’Ÿ0-59console.log(date1.getMinutes());//è·å–ç§’0-59console.log(date1.getSeconds());//è·å–æ¯«ç§’0-999console.log(date1.getMilliseconds());//è·å–æ—¶é—´æˆ³ ä»1970å¹´1æœˆ1æ—¥ èµ·console.log(date1.getTime());//è¿”å›æœ¬åœ°æ—¶é—´ä¸æ ¼æ—å¨æ²»æ—¶é—´çš„åˆ†é’Ÿå·®console.log(date1.getTimezoneOffset());//-480//è¿”å›ä¸–ç•Œæ—¶é—´ä¸­ ä¸€ä¸ªæœˆä¸­çš„ç¬¬å‡ å¤© 1-31console.log(date1.getUTCDate());//è¿”å›ä¸–ç•Œæ—¶é—´ä¸­ ä¸€å‘¨ä¸­çš„ç¬¬å‡ å¤© å‘¨æ—¥ä¸º0console.log(date1.getUTCDay());//è¿”å›ä¸–ç•Œæ—¶é—´ä¸­çš„æœˆä»½ 0-11console.log(date1.getUTCMonth());//è¿”å›ä¸–ç•Œæ—¶é—´ä¸­çš„å¹´console.log(date1.getUTCFullYear());//è¿”å›ä¸–ç•Œæ—¶é—´ä¸­å°æ—¶console.log(date1.getUTCHours());//è¿”å›ä¸–ç•Œæ—¶é—´ä¸­çš„åˆ†é’Ÿconsole.log(date1.getUTCMinutes());//è¿”å›ä¸–ç•Œæ—¶é—´ä¸­çš„ç§’console.log(date1.getUTCSeconds());//è¿”å›ä¸–ç•Œæ—¶é—´ä¸­çš„æ¯«ç§’console.log(date1.getUTCMilliseconds());//é™æ€æ–¹æ³• è¿”å›ä»1970.1.1åˆ°æŒ‡å®šæ—¥æœŸé—´çš„æ¯«ç§’console.log(Date.parse(date1));//è®¾ç½®æ—¥æœŸ 1ä¸ªæœˆä¸­çš„æŸä¸€å¤© 1-31date1.setDate(1);//è®¾ç½®æœˆä»½date1.setMonth(2);//è®¾ç½®å¹´ä»½date1.setFullYear(2011);//è®¾ç½®æ—¶date1.setHours(10);//è®¾ç½®åˆ†date1.setMinutes(20);//è®¾ç½®ç§’date1.setSeconds(23);//è®¾ç½®æ¯«ç§’date1.setMilliseconds(100);console.log(date1);//é€šè¿‡æ—¶é—´æˆ³è®¾ç½®dateå¯¹è±¡date1.setTime(1483599203000);console.log(date1);//ä¸‹é¢è¿™äº›æ–¹æ³•è®¾ç½®æ—¶é—´æ—¶é—´date1.setUTCDate(3);date1.setUTCMonth(10);date1.setUTCFullYear(2020);date1.setUTCHours(22);date1.setUTCMinutes(22);date1.setUTCSeconds(34);date1.setUTCMilliseconds(112);console.log(date1);//è½¬æ¢ä¸ºæœ¬åœ°æ—¶é—´å­—ç¬¦ä¸²console.log(date1.toString());//Wed Nov 04 2020 06:22:34 GMT+0800 (CST)//è½¬æ¢æ—¶é—´éƒ¨åˆ†console.log(date1.toTimeString());//06:22:34 GMT+0800 (CST)//è½¬æ¢æ—¥æœŸéƒ¨åˆ†console.log(date1.toDateString());//Wed Nov 04 2020//è½¬æ¢ä¸ºä¸–ç•Œæ—¶é—´å­—ç¬¦ä¸²console.log(date1.toUTCString());//Tue, 03 Nov 2020 22:22:34 GMT//è½¬æ¢æˆæœ¬åœ°æ ¼å¼çš„å­—ç¬¦ä¸²console.log(date1.toLocaleString());//11/4/2020, 6:22:34 AM//åªè½¬æ¢æœ¬åœ°æ ¼å¼çš„æ—¶é—´console.log(date1.toLocaleTimeString());//6:22:34 AM//åªè½¬æ¢æ—¥æœŸconsole.log(date1.toLocaleDateString());//11/4/2020//è¿”å›ä»1970.1.1åˆ°æŒ‡å®šæ—¶é—´çš„æ—¶é—´æˆ³ //å‚æ•°å«ä¹‰ä¸º å¹´ æœˆ æ—¥ æ—¶ åˆ† ç§’ æ¯«ç§’console.log(Date.UTC(2012,1,1,1,1,1,1)); äº”ã€æ•°ç»„å¯¹è±¡Arrayæ•°ç»„å¯¹è±¡ç”¨äºå­˜æ”¾ä¸€ç»„æ•°æ®ï¼ŒJavaScriptè¯­è¨€å¹¶ä¸åƒSwiftè¯­è¨€é‚£æ ·å¼ºè°ƒç±»å‹ï¼Œå› æ­¤æ•°ç»„ä¸­å­˜æ”¾çš„å…ƒç´ ç±»å‹ååˆ†è‡ªç”±ï¼ŒJavaScriptä¸­æ•°ç»„çš„ç›¸å…³æ–¹æ³•ç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647//æœ‰ä¸‰ç§æ–¹å¼è¿›è¡Œæ•°ç»„çš„æ„é€ //æ„é€ ç©ºæ•°ç»„var array1 = new Array();//æ„é€ æŒ‡å®šä¸ªæ•°å…ƒç´ çš„æ•°ç»„var array2 = new Array(5);//æ„é€ åˆå§‹æ•°ç»„var array3 = new Array(1,2,3,4)//lengthå±æ€§å¯ä»¥è·å–æ•°ç»„å…ƒç´ ä¸ªæ•°console.log(array3.length);//4//è¿›è¡Œæ•°ç»„è¿æ¥console.log(array3.concat([5,6],['q','w']));//å°†æ•°ç»„ä¸­æ‰€æœ‰å…ƒç´ ä»¥æŒ‡å®šåˆ†éš”ç¬¦è¿›è¡Œæ‹¼æ¥ä¸ºå­—ç¬¦ä¸²console.log(array3.join(\"-\"));//åˆ é™¤æ•°ç»„ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ array3.pop();console.log(array3);//å‘æ•°ç»„ä¸­æ·»åŠ ä¸€ä¸ªå…ƒç´ array3.push(5);console.log(array3);//è¿›è¡Œæ•°ç»„é¢ å€’array3.reverse();console.log(array3);//åˆ é™¤æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°array3.shift();console.log(array3);//å‘æ•°ç»„å¼€å¤´æ’å…¥ä¸€äº›å…ƒç´ array3.unshift(1,1,1);console.log(array3);//å¯¹æ•°ç»„å…ƒç´ è¿›è¡Œæ’åº array3.sort(function(a,b)&#123; if (a&gt;b) &#123; return true; &#125;else&#123; return false; &#125;&#125;);console.log(array3);//åˆ é™¤æ•°ç»„ä¸­çš„å…ƒç´  å¹¶æ’å…¥å…¶ä»–å…ƒç´ //ç¬¬1ä¸ªå‚æ•°ä¸ºå‚æ•°å…ƒç´ çš„ä½ç½®//ç¬¬2ä¸ªå‚æ•°ä¸ºåˆ é™¤å…ƒç´ çš„ä¸ªæ•°//ä¹‹åå¯ä»¥æœ‰ä»»æ„ä¸ªå‚æ•°ï¼Œä½œä¸ºæ’å…¥å…ƒç´ array3.splice(0,2,'c',5);console.log(array3);//å°†æ•°ç»„è½¬æ¢ä¸ºå­—ç¬¦ä¸² ä½¿ç”¨é€—å·æ‹¼æ¥console.log(array3.toString());console.log(array3.toLocaleString()); éœ€è¦æ³¨æ„ï¼Œæ•°ç»„çš„æ’åºæ–¹æ³•sort()ä¸­éœ€è¦ä¼ å…¥ä¸€ä¸ªæ’åºå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¸­ä¼šä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æè¿°æ•°ç»„ä¸­ç›¸é‚»çš„ä¸¤ä¸ªå…ƒç´ ï¼Œå¦‚æœéœ€è¦äº¤æ¢ä½ç½®ï¼Œè¿”å›trueå³å¯ï¼Œå¦åˆ™è¿”å›falseå³å¯ã€‚å¦å¤–ï¼Œæ•°ç»„çš„toString()æ–¹æ³•ä¸join()æ–¹æ³•ä½œç”¨ç›¸ä¼¼ï¼Œä¸åŒçš„æ˜¯join()æ–¹æ³•æ›´åŠ è‡ªç”±ï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡å‚æ•°å†³å®šè¿›è¡Œæ‹¼æ¥çš„æ–¹å¼ï¼Œå¦‚æœä¸ä¼ å‚æ•°ï¼Œåˆ™é»˜è®¤ä¹Ÿä¼šä»¥é€—å·è¿›è¡Œåˆ†å‰²æ‹¼æ¥ã€‚ å…­ã€å…³äºBooleanå¯¹è±¡Booleanå¯¹è±¡ç”¨æ¥æè¿°é€»è¾‘å€¼ï¼ŒJavaScriptä¸­çš„Booleanå¯¹è±¡å¯ä»¥ç†è§£ä¸ºå¯¹å¸ƒå°”å€¼çš„ä¸€ç§åŒ…è£…ï¼Œå½“ä½¿ç”¨æ„é€ å‡½æ•°æ¥è¿›è¡ŒBooleanå¯¹è±¡çš„åˆ›å»ºæ—¶ï¼Œå¦‚æœä¸ä¼ å‚æ•°ï¼Œé»˜è®¤ä¼šæ„é€ falseå€¼çš„å¯¹è±¡åŒ…è£…ï¼Œå¦‚ä¸‹ï¼š 12var b1 = new Boolean();console.log(b1);//[Boolean: false] å¦‚æœå°†Boolean()å½“åšå‡½æ•°æ¥ä½¿ç”¨ï¼Œå°†ä¼šè¿”å›ä¸€ä¸ªåŸºæœ¬å¸ƒå°”å€¼ï¼Œå¦‚ä¸‹ï¼š 12var b2 = Boolean();console.log(b2);//false åœ¨åˆ›å»ºå¸ƒå°”å€¼æ—¶ï¼Œä¸‹é¢è¿™äº›ä¼ å‚éƒ½å°†åˆ›å»ºåŒ…è£…falseçš„å¸ƒå°”å¯¹è±¡ï¼š 1234567var myBoolean=new Boolean();var myBoolean=new Boolean(0);var myBoolean=new Boolean(null);var myBoolean=new Boolean(\"\");var myBoolean=new Boolean(false);var myBoolean=new Boolean(NaN);var myBoolean=new Boolean(undefined); é™¤äº†ä¸Šé¢æ‰€åˆ—ä¸¾çš„å‚æ•°æƒ…å†µå¤–ï¼Œå…¶ä½™çš„éƒ½å°†æ„é€ trueåŒ…è£…å¯¹è±¡ã€‚ ä¸ƒã€JavaScriptä¸­çš„æ•°å­¦å¯¹è±¡åŠæ–¹æ³•JavaScriptä¸­è¿˜å†…ç½®äº†ä¸€ä¸ªMathæ•°å­¦å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ä¸­å°è£…äº†è®¸å¤šæ•°å­¦ä¸­å¸¸ç”¨çš„å¸¸æ•°å’Œç®—æœ¯æ–¹æ³•ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950//Mathå¯¹è±¡//è‡ªç„¶å¯¹æ•°econsole.log(Math.E);//2.718281828459045//2çš„è‡ªç„¶å¯¹æ•°console.log(Math.LN2);//0.6931471805599453//10çš„è‡ªç„¶å¯¹æ•°console.log(Math.LN10);//2.302585092994046//ä»¥2ä¸ºåº•eçš„å¯¹æ•°console.log(Math.LOG2E);//1.4426950408889634//ä»¥10ä¸ºåº•eçš„å¯¹æ•°console.log(Math.LOG10E);//0.4342944819032518//åœ†å‘¨ç‡console.log(Math.PI);//3.141592653589793//æ ¹å·2çš„å€’æ•°console.log(Math.SQRT1_2);//0.7071067811865476//æ ¹å·2console.log(Math.SQRT2);//1.4142135623730951//æ±‚ç»å¯¹å€¼å‡½æ•°console.log(Math.abs(-5));//5//æ±‚åä½™å¼¦å‡½æ•°console.log(Math.acos(0.5));//æ±‚åæ­£å¼¦å‡½æ•°console.log(Math.asin(0.5));//æ±‚åæ­£åˆ‡å‡½æ•°console.log(Math.atan(1));//æ±‚åˆ°(x,y)ç‚¹çš„è§’åº¦console.log(Math.atan2(1,0));//è¿›è¡Œå‘ä¸Šèˆå…¥console.log(Math.ceil(1.3));//2//è¿›è¡Œå‘ä¸‹èˆå…¥console.log(Math.floor(1.3));//1//æ±‚è‡ªç„¶å¯¹æ•°console.log(Math.log(10));//2.302585092994046//è¿”å›æœ€å¤§å€¼console.log(Math.max(1,2));//2//è¿”å›æœ€å°å€¼console.log(Math.min(1,2));//1//æ±‚å¹‚å‡½æ•°console.log(Math.pow(10,2));//100//å–0-1ä¹‹é—´çš„éšæœºæ•°console.log(Math.random());//è¿›è¡Œå››èˆäº”å…¥console.log(Math.round(1.3));//1//æ±‚æ­£å¼¦å€¼console.log(Math.sin(2));//æ±‚ä½™å¼¦å€¼console.log(Math.cos(2));//æ±‚æ­£åˆ‡å€¼console.log(Math.tan(1)); å‰ç«¯å­¦ä¹ æ–°äººï¼Œæœ‰å¿—åŒé“åˆçš„æœ‹å‹ï¼Œæ¬¢è¿äº¤æµä¸æŒ‡å¯¼ï¼ŒQQç¾¤:541458536","categories":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}],"tags":[],"keywords":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}]},{"title":"JavaScriptåŸºç¡€ä¹‹äº”â€”â€”å¼‚å¸¸çš„æŠ›å‡ºä¸æ•è·","slug":"298JavaScriptåŸºç¡€ä¹‹äº”â€”â€”å¼‚å¸¸çš„æŠ›å‡ºä¸æ•è·","date":"2017-01-01T16:00:00.000Z","updated":"2021-07-13T11:09:11.182Z","comments":true,"path":"2017/01/02/298JavaScriptåŸºç¡€ä¹‹äº”â€”â€”å¼‚å¸¸çš„æŠ›å‡ºä¸æ•è·/","link":"","permalink":"http://huishao.cc/2017/01/02/298JavaScriptåŸºç¡€ä¹‹äº”â€”â€”å¼‚å¸¸çš„æŠ›å‡ºä¸æ•è·/","excerpt":"","text":"JavaScriptåŸºç¡€ä¹‹äº”â€”â€”å¼‚å¸¸çš„æŠ›å‡ºä¸æ•è·ä»»ä½•ç¨‹åºåœ¨è¿è¡Œè¿‡ç¨‹ä¸­éƒ½ä¼šäº§ç”Ÿå¼€å‘è€…æ„æƒ³ä¸åˆ°çš„å¼‚å¸¸ï¼Œå› æ­¤å¯¹å¼‚å¸¸çš„å¤„ç†é€»è¾‘æ˜¯ä¸€ç§ç¼–ç¨‹å¿…å¤‡çš„èƒ½åŠ›ã€‚åœ¨JavaScriptè¯­è¨€ä¸­ï¼Œä½¿ç”¨try-catchå—æ¥å®Œæˆå¯¹å¼‚å¸¸çš„æ•è·ä¸å¤„ç†ã€‚ æ­£å¸¸æƒ…å†µä¸‹ï¼Œå½“JavaScriptç¨‹åºè¿è¡Œåˆ°æœ‰å¼‚å¸¸çš„åœ°æ–¹æ—¶ï¼Œç¨‹åºä¼šè‡ªåŠ¨ä¸­æ–­ï¼Œä¾‹å¦‚å¼€å‘è€…ä½¿ç”¨äº†ä¸€ç§æœªå®šä¹‰çš„å˜é‡æˆ–å‡½æ•°ã€ç”±äºæ‰‹è¯¯é€ æˆçš„é”™å­—ã€ç”±äºç”¨æˆ·è¾“å…¥éæ³•é€ æˆçš„æ„æƒ³ä¸åˆ°çš„é”™è¯¯ç­‰ã€‚ä½†æ˜¯å¼€å‘è€…å¯ä»¥ä½¿ç”¨try-catchç»“æ„å¯¹å¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„ä»£ç è¿›è¡Œå¼‚å¸¸æ•è·ï¼Œå¦‚æœæ•è·åˆ°å¼‚å¸¸ï¼Œå¼€å‘è€…å¯ä»¥é€‰æ‹©å¤„ç†æˆ–ä¸å¤„ç†ï¼Œå¦‚æœå¼‚å¸¸è¢«æ•è·ï¼Œç¨‹åºå°±ä¸ä¼šä¸­æ–­ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456//å¼‚å¸¸çš„æŠ›å‡ºä¸æ•è·try&#123; consele.log(\"å¼‚å¸¸\");&#125;catch(error)&#123; console.log(error);&#125; é™¤äº†æŸäº›ç³»ç»ŸæŠ›å‡ºçš„å¼‚å¸¸å¤–ï¼Œå¼€å‘è€…ä¹Ÿå¯ä»¥å®šä¹‰å’ŒæŠ›å‡ºè‡ªå·±çš„å¼‚å¸¸ï¼Œä½¿ç”¨throwå…³é”®å­—å¯ä»¥æŠ›å‡ºå¼‚å¸¸ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789//ä½¿ç”¨throwå…³é”®å­—ç”¨äºå¼‚å¸¸çš„æŠ›å‡ºvar func = function()&#123; throw \"My Error\"&#125;try&#123; func();&#125;catch(error)&#123; console.log(error);&#125; éœ€è¦æ³¨æ„ï¼ŒæŠ›å‡ºçš„å¼‚å¸¸å¯ä»¥æ˜¯è‡ªå®šçš„å¼‚å¸¸å¯¹è±¡ï¼Œå¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œå¯ä»¥ä½¿ä»»æ„JavaScriptå¯¹è±¡ã€‚ å‰ç«¯å­¦ä¹ æ–°äººï¼Œæœ‰å¿—åŒé“åˆçš„æœ‹å‹ï¼Œæ¬¢è¿äº¤æµä¸æŒ‡å¯¼ï¼ŒQQç¾¤:541458536","categories":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}],"tags":[],"keywords":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}]},{"title":"Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åä¹â€”â€”æ ‡ç­¾é¡µçš„ä½¿ç”¨","slug":"299Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åä¹â€”â€”æ ‡ç­¾é¡µçš„ä½¿ç”¨","date":"2017-01-01T16:00:00.000Z","updated":"2021-07-13T11:11:23.457Z","comments":true,"path":"2017/01/02/299Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åä¹â€”â€”æ ‡ç­¾é¡µçš„ä½¿ç”¨/","link":"","permalink":"http://huishao.cc/2017/01/02/299Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åä¹â€”â€”æ ‡ç­¾é¡µçš„ä½¿ç”¨/","excerpt":"","text":"Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åä¹â€”â€”æ ‡ç­¾é¡µçš„ä½¿ç”¨Bootstrapä¸­é€šè¿‡ä¸ºå¯¼èˆªæ ‡ç­¾å¢åŠ data-toggle=&quot;tab&quot;ï¼Œé…åˆç±»æˆ–idæ¥è¿›è¡Œæ ‡ç­¾é¡µçš„å…³è”ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526 &lt;ul class=\"nav nav-tabs\"&gt; &lt;li class=\"active\"&gt; &lt;a href=\"#one\" data-toggle=\"tab\" id=\"aone\"&gt;ç¬¬ä¸€é¡µ&lt;/a&gt; &lt;/li&gt; &lt;li&gt; &lt;a href=\"#two\" data-toggle=\"tab\" id=\"atwo\"&gt;ç¬¬äºŒé¡µ&lt;/a&gt; &lt;/li&gt; &lt;li&gt; &lt;a href=\"#three\" data-toggle=\"tab\" id=\"athree\"&gt;ç¬¬ä¸‰é¡µ&lt;/a&gt; &lt;/li&gt; &lt;li&gt; &lt;a href=\"#four\" data-toggle=\"tab\" id=\"afour\"&gt;ç¬¬å››é¡µ&lt;/a&gt; &lt;/li&gt; &lt;/ul&gt; &lt;!-- Tab panes --&gt; &lt;div class=\"tab-content\"&gt; &lt;div class=\"tab-pane active fade in\" id=\"one\"&gt;On iPhone 7 and iPhone 7 Plus, haptics provide additional ways to physically engage users with tactile feedback that gets attention and reinforces actions. Some system-provided interface elements, such as pickers, switches, and sliders, automatically provide haptic feedback as users interact with them&lt;/div&gt; &lt;div class=\"tab-pane\" id=\"two\"&gt;Using one of the concrete subclasses, you ask the system to generate haptics for a specific scenario and iOS manages the strength and behavior of the feedback based on the scenario you choose. In addition, you can call the prepare method of UIFeedbackGenerator to inform the system that haptic feedback is about to be required and to minimize latency. To learn how to use haptics to provide the best user experience in your app, see â€œHaptic Feedbackâ€ in iOS Human Interface Guidelines.&lt;/div&gt; &lt;div class=\"tab-pane\" id=\"three\"&gt;When the user makes a request involving your service, SiriKit sends your extension an intent object, which describes the userâ€™s request and provides any data related to that request. You use the intent object to provide an appropriate response object, which includes details of how you can handle the userâ€™s request. Siri typically handles all user interactions, but you can use an extension to provide custom UI that incorporates branding or additional information from your app.&lt;/div&gt; &lt;div class=\"tab-pane\" id=\"four\"&gt;To learn how to support SiriKit and give users new ways to access your services, read SiriKit Programming Guide. When youâ€™re ready to implement the app extensions that handle various intents, see Intents Framework Reference and Intents UI Framework Reference.&lt;/div&gt; &lt;/div&gt; æ•ˆæœå¦‚å›¾ï¼š ä¸ºtab-paneç±»å¢åŠ fade inç±»å¯ä»¥ä½¿æ ‡ç­¾åˆ‡æ¢æ—¶å¸¦æ¸å…¥åŠ¨ç”»ã€‚ Bootstrapä¸­çš„æ ‡ç­¾é¡µJSç»„ä»¶æä¾›äº†ä¸€ä¸ªtabå‡½æ•°ï¼Œä½¿ç”¨è¿™ä¸ªæ–¹æ³•å¯ä»¥å®ç°ä»£ç æ§åˆ¶æ ‡ç­¾çš„åˆ‡æ¢ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415161718&lt;button class=\"btn btn-primary\" id=\"cone\"&gt;ç¬¬ä¸€é¡µ&lt;/button&gt;&lt;button class=\"btn btn-primary\" id=\"ctwo\"&gt;ç¬¬äºŒé¡µ&lt;/button&gt;&lt;button class=\"btn btn-primary\" id=\"cthree\"&gt;ç¬¬ä¸‰é¡µ&lt;/button&gt;&lt;button class=\"btn btn-primary\" id=\"cfour\"&gt;ç¬¬å››é¡µ&lt;/button&gt;&lt;script&gt; $(\"#cone\").on(\"click\",function()&#123; $(\"#aone\").tab('show'); &#125;); $(\"#ctwo\").on(\"click\",function()&#123; $(\"#atwo\").tab('show'); &#125;); $(\"#cthree\").on(\"click\",function()&#123; $(\"#athree\").tab('show'); &#125;); $(\"#cfour\").on(\"click\",function()&#123; $(\"#afour\").tab('show'); &#125;);&lt;/script&gt; Bootstrapä¸­è¿˜æä¾›äº†ä¸€äº›ç›‘å¬äº‹ä»¶ï¼Œå¼€å‘è€…å¯ä»¥å‘å¯¼èˆªæ ‡ç­¾ä¸­æ·»åŠ è¿™äº›ç›‘å¬äº‹ä»¶æ¥ç›‘å¬æ ‡ç­¾é¡µçš„çŠ¶æ€ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112$(\"#aone\").on(\"show.bs.tab\",function()&#123; console.log(\"æ­¤æ ‡ç­¾é¡µå°†è¦æ˜¾ç¤º\");&#125;);$(\"#aone\").on(\"shown.bs.tab\",function()&#123; console.log(\"æ­¤æ ‡ç­¾é¡µå·²ç»æ˜¾ç¤º\");&#125;);$(\"#aone\").on(\"hide.bs.tab\",function()&#123; console.log(\"æ­¤æ ‡ç­¾é¡µå°†è¦éšè—\");&#125;);$(\"#aone\").on(\"hidden.bs.tab\",function()&#123; console.log(\"æ­¤æ ‡ç­¾é¡µå·²ç»éšè—\");&#125;); å¦å¤–ï¼Œæœ¬ç¯‡åšå®¢ä¸­æ‰€æœ‰çš„å®ä¾‹ä»£ç åŠæ˜¾ç¤ºæ•ˆæœï¼Œåœ¨å¦‚ä¸‹åœ°å€ä¸­ï¼Œéœ€è¦çš„å¯ä»¥è‡ªè¡Œå¯¹ç…§å­¦ä¹ ã€‚ http://zyhshao.github.io/bootStrapDemo/PageJS.htmlã€‚ å‰ç«¯å­¦ä¹ æ–°äººï¼Œæœ‰å¿—åŒé“åˆçš„æœ‹å‹ï¼Œæ¬¢è¿äº¤æµä¸æŒ‡å¯¼ï¼ŒQQç¾¤:541458536","categories":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}],"tags":[],"keywords":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}]},{"title":"JavaScriptåŸºç¡€ä¹‹å››â€”â€”é€‰æ‹©ä¸å¾ªç¯ç»“æ„","slug":"297JavaScriptåŸºç¡€ä¹‹å››â€”â€”é€‰æ‹©ä¸å¾ªç¯ç»“æ„","date":"2016-12-30T16:00:00.000Z","updated":"2021-07-13T11:06:51.060Z","comments":true,"path":"2016/12/31/297JavaScriptåŸºç¡€ä¹‹å››â€”â€”é€‰æ‹©ä¸å¾ªç¯ç»“æ„/","link":"","permalink":"http://huishao.cc/2016/12/31/297JavaScriptåŸºç¡€ä¹‹å››â€”â€”é€‰æ‹©ä¸å¾ªç¯ç»“æ„/","excerpt":"","text":"JavaScriptåŸºç¡€ä¹‹å››â€”â€”é€‰æ‹©ä¸å¾ªç¯ç»“æ„é€‰æ‹©ç»“æ„ä¸å¾ªç¯ç»“æ„æ˜¯ç¼–ç¨‹ä¸­å¤„ç†é€»è¾‘çš„æ ¸å¿ƒç»“æ„ï¼ŒJavaScriptä¸­æ”¯æŒif-elseå’Œswitch-caseé€‰æ‹©ç»“æ„ï¼Œæ”¯æŒforï¼Œfor-in,do-while,whileå¾ªç¯ç»“æ„ã€‚å¹¶ä¸”å¯ä»¥ä½¿ç”¨breakä¸continueè¯­å¥è¿›è¡Œå¾ªç¯çš„è·³å‡ºï¼Œç®€å•çš„æ¡ä»¶é€‰æ‹©ifè¯­å¥ç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314151617//ifæ¡ä»¶è¯­å¥if (true) &#123; console.log(\"æ¡ä»¶è¯­å¥\");&#125;;if (false) &#123;&#125; else &#123; console.log(\"if-elseè¯­å¥\");&#125;;var a = 10;if (a &lt; 10) &#123; console.log(\"a&lt;10\");&#125; else if (a == 10) &#123; console.log(\"a=10\");&#125; else &#123; console.log(\"a&gt;10\");&#125;; switch-caseé€‰æ‹©ç»“æ„ç”¨äºå¤šåˆ†æ”¯æ¡ä»¶çš„é€‰æ‹©ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415161718//é€‰æ‹©è¯­å¥var b = \"hi\";switch (b) &#123; case \"hello\": &#123; console.log(\"Hello world\"); &#125; break; case \"hi\": &#123; console.log(\"Hi world\"); &#125; break; default: &#123; console.log(\"éƒ½æ²¡åŒ¹é…ä¸Š\"); &#125;&#125; éœ€è¦æ³¨æ„ï¼Œæ¯ä¸ªcaseç»“æ„åé¢åŸåˆ™ä¸Šéƒ½éœ€è¦ä½¿ç”¨breakè¿›è¡Œä¸­æ–­åŒ¹é…ï¼Œå¦‚æœä¸æ·»åŠ æ­¤breakï¼Œåˆ™åŒ¹é…åˆ°ä¸€ä¸ªcaseè¯­å¥åswitchç»“æ„å¹¶ä¸ä¼šç»“æŸï¼Œä¼šç»§ç»­å°è¯•åŒ¹é…åé¢çš„caseæ¡ä»¶ã€‚ forå¾ªç¯ç»“æ„ç”¨äºå¤„ç†å¤§é‡é‡å¤çš„é€»è¾‘ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910for (var i = 0; i &lt; 10; i++) &#123; console.log(\"å¾ªç¯\" + i);&#125;for (var i = 0; i &lt; 10; i++) &#123; console.log(\"å¾ªç¯\" + i); if (i == 2) &#123; //ä½¿ç”¨breakå¯ä»¥æå‰ä¸­æ–­å¾ªç¯ break; &#125;;&#125; JavaScriptè¿˜æœ‰ä¸€ç§æ›´é«˜æ•ˆçš„å¾ªç¯æ¨¡å¼ï¼Œfor-inç»“æ„ï¼Œè¿™ç§ç»“æ„ä¸“é—¨ç”¨æ¥éå†å¯¹è±¡ï¼Œå…¶å¯ä»¥å°†å¯¹è±¡çš„å±æ€§éå†å‡ºæ¥ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415var obj1 = &#123; name: \"jaki\", age: 25&#125;;var obj2 = [1, 2, 3, 4, 5, 6, 7, 8];for (var x in obj1) &#123; //è·³è¿‡æœ¬æ¬¡å¾ªç¯ å¹¶ä¸æ˜¯è·³å‡ºå¾ªç¯ if (x == \"name\") continue; console.log(x + \":\" + obj1[x]);&#125;for (var x in obj2) &#123; console.log(x + \":\" + obj2[x]);&#125; éœ€è¦æ³¨æ„ï¼Œå¯¹äºæ•°ç»„ï¼Œå…¶éå†å‡ºæ¥çš„æ˜¯æ•°ç»„çš„ä¸‹æ ‡ï¼Œå¹¶ä¸æ˜¯å…¶ä¸­çš„å€¼ï¼Œè¿™å’ŒC/OC,Swiftç­‰è¯­è¨€æœ‰æ‰€å·®å¼‚ï¼Œä¹Ÿè¯æ˜äº†æ•°ç»„åœ¨JavaScriptä¸­å…¶å®å°±æ˜¯ä¸€ç§ç‰¹æ®Šçš„å¯¹è±¡ã€‚ whileå¾ªç¯å’Œdo-whileå¾ªç¯çš„å·®å¼‚åœ¨äºwhlieç»“æ„æ˜¯å…ˆè¿›è¡Œå¾ªç¯æ¡ä»¶çš„åˆ¤æ–­ï¼Œå†è¿›å…¥å¾ªç¯ä½“ï¼Œè€Œdo-whileç»“æ„åˆ™æ˜¯å…ˆè¿›å…¥å¾ªç¯ä½“ï¼Œåœ¨è¿›è¡Œå¾ªç¯æ¡ä»¶çš„åˆ¤æ–­ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789var c = 1;while (c &lt; 10) &#123; console.log(c); c++;&#125;do &#123; console.log(c); c--;&#125; while (c &gt; 1); å‰é¢æåˆ°è¿‡breakå’Œcontinueè¯­å¥ï¼Œbreakè¯­å¥ç”¨äºä¸­æ–­switch-caseåŒ¹é…æˆ–è€…è·³å‡ºæœ€è¿‘çš„å¾ªç¯ï¼Œè·³å‡ºå¾ªç¯çš„æ„æ€æ˜¯æŒ‡æ‰§è¡Œåˆ°breakåï¼Œæ— è®ºåé¢å¾ªç¯æ¬¡æ•°è¿˜æœ‰å¤šå°‘æ¬¡ï¼Œç›´æ¥è·³å‡ºï¼Œæ‰§è¡Œå¾ªç¯ç»“æ„ä¹‹åçš„ä»£ç ã€‚continueè¯­å¥çš„ä½œç”¨åˆ™æ˜¯è·³å‡ºæœ€è¿‘çš„æœ¬æ¬¡å¾ªç¯ï¼Œæ¥ç€è¿›è¡Œå¾ªç¯æ¡ä»¶çš„åˆ¤æ–­ï¼Œå¦‚æœæ»¡è¶³ä¼šç»§ç»­è¿›è¡Œå¾ªç¯ï¼Œå¹¶ä¸”å¦‚æœæœ‰å¤šå±‚å¾ªç¯åµŒå¥—ï¼Œbreakå’Œcontinueä¹Ÿå¯ä»¥é€šè¿‡labelæ ‡ç­¾æŒ‡å®šå…·ä½“è·³å‡ºé‚£å±‚å¾ªç¯ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678LAB: for (var i = 0; i &lt; 5; i++) &#123; for (var j = 0; j &lt; 5; j++) &#123; if (j == 2) &#123; break LAB &#125;; console.log(i + '==' + j); &#125;;&#125;; ä¸Šé¢çš„ä»£ç ï¼Œå¦‚æœä¸ä½¿ç”¨LABæ ‡ç­¾ï¼Œåˆ™å¤–å±‚å¾ªç¯ä¸ä¼šè¢«ä¸­æ–­ã€‚ å‰ç«¯å­¦ä¹ æ–°äººï¼Œæœ‰å¿—åŒé“åˆçš„æœ‹å‹ï¼Œæ¬¢è¿äº¤æµä¸æŒ‡å¯¼ï¼ŒQQç¾¤:541458536","categories":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}],"tags":[],"keywords":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}]},{"title":"JavaScriptåŸºç¡€ä¹‹ä¸‰â€”â€”åŸºæœ¬è¿ç®—ç¬¦","slug":"296JavaScriptåŸºç¡€ä¹‹ä¸‰â€”â€”åŸºæœ¬è¿ç®—ç¬¦","date":"2016-12-29T16:00:00.000Z","updated":"2021-07-13T11:03:44.946Z","comments":true,"path":"2016/12/30/296JavaScriptåŸºç¡€ä¹‹ä¸‰â€”â€”åŸºæœ¬è¿ç®—ç¬¦/","link":"","permalink":"http://huishao.cc/2016/12/30/296JavaScriptåŸºç¡€ä¹‹ä¸‰â€”â€”åŸºæœ¬è¿ç®—ç¬¦/","excerpt":"","text":"JavaScriptåŸºç¡€ä¹‹ä¸‰â€”â€”åŸºæœ¬è¿ç®—ç¬¦å¤§å¤šæ•°è¯­è¨€æ”¯æŒçš„åŸºæœ¬è¿ç®—ç¬¦éƒ½å·®åˆ«ä¸å¤§ã€‚å…¶ä¸­æœ€å¸¸ç”¨çš„è«å±èµ‹å€¼è¿ç®—ç¬¦ï¼Œç¼–ç¨‹åˆå­¦è€…æ€»æ˜¯ä¼šå°†èµ‹å€¼è¿ç®—ç¬¦ä¸ç›¸ç­‰è¿ç®—ç¬¦æ··æ·†ï¼Œéœ€è¦æ³¨æ„ï¼Œèµ‹å€¼è¿ç®—ç¬¦ç”¨äºå°†ç­‰å·å³ä¾§çš„å€¼èµ‹å€¼ç»™ç­‰å·å·¦ä¾§çš„å˜é‡ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12//èµ‹å€¼è¿ç®—ç¬¦var v = 10; åŸºæœ¬çš„ç®—æœ¯è¿ç®—ç¬¦åœ¨JavaScriptä¸­éƒ½æ˜¯æ”¯æŒçš„ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516171819202122//+åŠ æ³•è¿ç®—ç¬¦var sum = 4+5;console.log(sum);//åŠ æ³•è¿ç®—ç¬¦ä¹Ÿå¯ä»¥ç”¨äºå­—ç¬¦ä¸²ä¹‹é—´çš„æ‹¼æ¥var str = \"Hello\" + \"World\";//å¦‚æœæŠŠæ•°å­—ä¸å­—ç¬¦ä¸²è¿›è¡Œç›¸åŠ  ç»“æœä¸ºå­—ç¬¦ä¸²str = str + sum;console.log(str);//-å‡æ³•è¿ç®—ç¬¦var sub = 10-2;console.log(sub);//*ä¹˜æ³•è¿ç®—ç¬¦var mul = 5*2;console.log(mul);//\\é™¤æ³•è¿ç®—ç¬¦var dev = 30/4;console.log(dev);//%å–ä½™è¿ç®—ç¬¦var rem = 10.5%2.5;console.log(rem);rem = 10%3;console.log(rem); JavaScriptè¯­è¨€ä¸­çš„å–ä½™è¿ç®—ç¬¦ååˆ†å¼ºå¤§ï¼Œå…¶ä¸ä»…å¯ä»¥ç”¨äºæ•´æ•°é—´çš„å–ä½™è¿ç®—ï¼Œä¹Ÿå¯ä»¥ç”¨äºå°æ•°é—´çš„å–ä½™è¿ç®—(Swift2.2ä»¥å‰çš„ç‰ˆæœ¬ä¹Ÿå¯ä»¥æ”¯æŒæµ®ç‚¹æ•°å–ä½™è¿ç®—ï¼Œåé¢çš„ç‰ˆæœ¬å°†è¿™ä¸ªç‰¹æ€§åˆ æ‰äº†)ã€‚ é™¤äº†å‰é¢åˆ—ä¸¾çš„ç®—æœ¯è¿ç®—ç¬¦å¤–ï¼ŒJavaScriptä¹Ÿæ”¯æŒé€’å¢ä¸é€’å‡è¿ç®—ç¬¦ï¼Œå’ŒCä¸­çš„æ­¤ç±»è¿ç®—ç¬¦ç”¨æ³•ä¸€è‡´ï¼Œå…¶å¯ä»¥æ”¾åœ¨æ“ä½œæ•°å‰ä¹Ÿå¯ä»¥æ”¾åœ¨æ“ä½œæ•°åã€‚é€šä¿—çš„ç†è§£ï¼Œå½“è¿ç®—ç¬¦æ”¾åœ¨æ“ä½œæ•°å‰è¡¨ç¤ºå…ˆè¿›è¡Œé€’å¢æˆ–é€’å‡ï¼Œå†å°†ç»“æœè¿”å›ï¼›å½“è¿ç®—ç¬¦æ”¾åœ¨æ“ä½œç¬¦åè¡¨ç¤ºå…ˆå°†æ“ä½œæ•°çš„å€¼è¿”å›ï¼Œå†è¿›è¡Œé€’å¢æˆ–é€’å‡æ“ä½œï¼Œæ¼”ç¤ºå¦‚ä¸‹ï¼š 123456789101112//ç´¯åŠ var t1 = 5;console.log(t1++);console.log(t1);console.log(++t1);console.log(t1);//é€’å‡var t2 = 5;console.log(t2--);console.log(t2);console.log(--t2);console.log(t2); å¦‚æœå°†èµ‹å€¼è¿ç®—ç¬¦ä¸ç®—æœ¯è¿ç®—ç¬¦ç»“åˆèµ·æ¥ï¼Œå°±ç»„æˆäº†å¤åˆèµ‹å€¼è¿ç®—ç¬¦ï¼Œå¤åˆè¿ç®—ç¬¦å°†æ¥æ”¶çš„å˜é‡æœ¬èº«è¿›è¡Œç®—æœ¯è¿ç®—åè¿”å›ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567//å¤åˆè¿ç®—ç¬¦var t3 = 5;t3+=1;t3-=1;t3*=2;t3/=2;t3%=2; åœ¨æ¡ä»¶ä¸å¾ªç¯ç»“æ„ä¸­ï¼Œé€»è¾‘è¡¨è¾¾å¼ååˆ†é‡è¦ï¼Œé€»è¾‘è¿ç®—ç¬¦æ˜¯æ„æˆé€»è¾‘è¡¨è¾¾å¼çš„åŸºç¡€ï¼Œåœ¨ç¼–ç¨‹çš„ä¸–ç•Œä¸­é€»è¾‘å€¼åªæœ‰ä¸¤ä¸ªï¼ŒéçœŸå³å‡ã€‚æ¯”è¾ƒè¿ç®—ç¬¦ä¼šè¿”å›ä¸€ä¸ªé€»è¾‘å€¼ï¼ŒJavaScriptä¸­æ”¯æŒçš„æ¯”è¾ƒè¿ç®—ç¬¦å¦‚ä¸‹ï¼š 12345678910111213141516171819//æ¯”è¾ƒè¿ç®—ç¬¦//æ¯”è¾ƒå€¼æ˜¯å¦ç›¸ç­‰ falseconsole.log(3==4);//å½“æ•°å­—å’Œå­—ç¬¦ä¸²è¿›è¡Œæ¯”è¾ƒæ—¶ åªå¯¹å€¼æ˜¯å¦ç›¸ç­‰è¿›è¡Œæ¯”è¾ƒ trueconsole.log(3=='3');//å…¨ç­‰æ¯”è¾ƒ å€¼å’Œç±»å‹éƒ½ç›¸ç­‰æ‰è¿”å›true ä¸‹é¢ç¤ºä¾‹ä¸ºfasleconsole.log(3==='3');//æ˜¯å¦ä¸ç­‰ åªæ¯”è¾ƒå€¼console.log(3!='3');//æ˜¯å¦ä¸å…¨ç­‰ å€¼å’Œç±»å‹éƒ½æ¯”è¾ƒconsole.log(3!=='3');//å°äºæ¯”è¾ƒconsole.log(3&lt;4);//å¤§äºæ¯”è¾ƒconsole.log(3&gt;4);//ä¸å¤§äºæ¯”è¾ƒconsole.log(3&lt;=4);//ä¸å°äºæ¯”è¾ƒconsole.log(3&gt;=4); ä¸Šé¢åˆ—ä¸¾çš„æ¯”è¾ƒè¿ç®—ç¬¦ä¸­çš„â€œ==â€ä¸â€œ===â€éœ€è¦æ³¨æ„ï¼Œå‰è€…æ˜¯å¯¹å€¼è¿›è¡Œæ¯”è¾ƒï¼Œå¹¶ä¸æ¯”è¾ƒç±»å‹ï¼Œåè€…é™¤äº†æ¯”è¾ƒå€¼ä¹‹å¤–ï¼Œè¿˜ä¼šå¯¹ç±»å‹è¿›è¡Œæ¯”è¾ƒã€‚ JavaScriptä¸­æ”¯æŒçš„é€»è¾‘è¿ç®—ç¬¦æœ‰ä¸è¿ç®—ç¬¦ï¼Œæˆ–è¿ç®—ç¬¦å’Œéè¿ç®—ç¬¦ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789//è¿›è¡Œä¸è¿ç®— æœ‰1ä¸ªä¸ºfalseåˆ™ä¸ºfalse éƒ½ä¸ºtrueæ‰ä¸ºtrueconsole.log(false&amp;&amp;true);console.log(true&amp;&amp;true);//è¿›è¡Œæˆ–è¿ç®— æœ‰1ä¸ªä¸ºtrueåˆ™ä¸ºtrue éƒ½ä¸ºfalseæ‰ä¸ºfalseconsole.log(false||true);console.log(false&amp;&amp;false);//è¿›è¡Œéè¿ç®—console.log(!false);console.log(!true); JavaScriptä¸­è¿˜æœ‰ä¸€ä¸ªè¿ç®—ç¬¦ååˆ†å¸¸ç”¨ï¼Œæ¡ä»¶è¿ç®—ç¬¦(é—®å·å†’å·è¿ç®—ç¬¦)é€šå¸¸å¯ä»¥ç”¨æ¥ä»£æ›¿ç®€å•çš„æ¡ä»¶è¯­å¥ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567//æ¡ä»¶è¿ç®—ç¬¦var a;a = true?\"aaa\":\"bbb\";console.log(a);var b;b = false?\"aaa\":\"bbb\";console.log(b); å‰ç«¯å­¦ä¹ æ–°äººï¼Œæœ‰å¿—åŒé“åˆçš„æœ‹å‹ï¼Œæ¬¢è¿äº¤æµä¸æŒ‡å¯¼ï¼ŒQQç¾¤:541458536","categories":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}],"tags":[],"keywords":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}]},{"title":"Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åå…«â€”â€”å¯¼èˆªæ»šåŠ¨ç›‘å¬","slug":"295 Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åå…«â€”â€”å¯¼èˆªæ»šåŠ¨ç›‘å¬","date":"2016-12-28T16:00:00.000Z","updated":"2021-07-13T10:58:35.538Z","comments":true,"path":"2016/12/29/295 Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åå…«â€”â€”å¯¼èˆªæ»šåŠ¨ç›‘å¬/","link":"","permalink":"http://huishao.cc/2016/12/29/295 Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åå…«â€”â€”å¯¼èˆªæ»šåŠ¨ç›‘å¬/","excerpt":"","text":"Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åå…«â€”â€”å¯¼èˆªæ»šåŠ¨ç›‘å¬Bootstrapæ¡†æ¶ä¸­æä¾›äº†ååˆ†æ–¹ä¾¿çš„æ–¹æ³•æ¥ä½¿ç”¨å¯¼èˆªå…³è”å†…å®¹å¿«ï¼Œå¹¶ä¸”å¼€å‘è€…å¯ä»¥ç›‘å¬æ»šåŠ¨è¿›è¡Œå¯¼èˆªæŒ‰é’®çš„åˆ‡æ¢ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;link rel=\"stylesheet\" href=\"../bower_components/bootstrap/dist/css/bootstrap.css\" /&gt; &lt;script type=\"text/javascript\" src=\"../bower_components/jquery/dist/jquery.js\"&gt;&lt;/script&gt; &lt;script type=\"text/javascript\" src=\"../bower_components/bootstrap/dist/js/bootstrap.js\"&gt;&lt;/script&gt; &lt;style&gt; .scrollspy-example &#123; position: relative; height: 200px; margin-top: 10px; overflow: auto &#125; &lt;/style&gt; &lt;title&gt;æ»šåŠ¨ç›‘å¬&lt;/title&gt; &lt;/head&gt; &lt;body class=\"container\"&gt; &lt;br /&gt; &lt;br /&gt; &lt;!--å¯¼èˆªæ --&gt; &lt;nav id=\"navbar\" class=\"navbar navbar-default navbar-static\"&gt; &lt;div class=\"navbar-header\"&gt; &lt;button class=\"navbar-toggle\" type=\"button\" data-toggle=\"collapse\" data-target=\".navigationShow\"&gt; &lt;span class=\"icon-bar\"&gt;&lt;/span&gt; &lt;span class=\"icon-bar\"&gt;&lt;/span&gt; &lt;span class=\"icon-bar\"&gt;&lt;/span&gt; &lt;/button&gt; &lt;a class=\"navbar-brand\" href=\"#\"&gt;åˆ—è¡¨&lt;/a&gt; &lt;/div&gt; &lt;!--å¯¼èˆªå®¹å™¨--&gt; &lt;div class=\"navbar-collapse navigationShow\"&gt; &lt;!--å¯¼èˆª--&gt; &lt;ul class=\"nav navbar-nav\"&gt; &lt;li class=\"active\"&gt; &lt;a href=\"#One\"&gt;ç¬¬ä¸€é¡¹&lt;/a&gt; &lt;/li&gt; &lt;li class=\"\"&gt; &lt;a href=\"#Two\"&gt;ç¬¬äºŒé¡¹&lt;/a&gt; &lt;/li&gt; &lt;li class=\"dropdown\"&gt; &lt;a href=\"#\" id=\"navbarDrop1\" class=\"dropdown-toggle\" data-toggle=\"dropdown\"&gt;èœå• &lt;span class=\"caret\"&gt;&lt;/span&gt;&lt;/a&gt; &lt;ul class=\"dropdown-menu\"&gt; &lt;li class=\"\"&gt; &lt;a href=\"#one\"&gt;èœå•1&lt;/a&gt; &lt;/li&gt; &lt;li class=\"\"&gt; &lt;a href=\"#two\"&gt;èœå•2&lt;/a&gt; &lt;/li&gt; &lt;li class=\"divider\"&gt;&lt;/li&gt; &lt;li class=\"\"&gt; &lt;a href=\"#three\"&gt;èœå•3&lt;/a&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;/nav&gt; &lt;!--å†…å®¹div ä½¿ç”¨data-spy=\"scroll\"æ¥è¿›è¡Œæ»šåŠ¨ç›‘å¬--&gt; &lt;div data-spy=\"scroll\" data-target=\"#navbar\" class=\"scrollspy-example\"&gt; &lt;!--idéœ€è¦å¯¹åº”--&gt; &lt;h4 id=\"One\"&gt;ç¬¬ä¸€é¡¹&lt;/h4&gt; &lt;p&gt;Ad leggings keytar, brunch id art party dolor labore. Pitchfork yr enim lo-fi before they sold out qui. Tumblr farm-to-table bicycle rights whatever. Anim keffiyeh carles cardigan. Velit seitan mcsweeney's photo booth 3 wolf moon irure. Cosby sweater lomo jean shorts, williamsburg hoodie minim qui you probably haven't heard of them et cardigan trust fund culpa biodiesel wes anderson aesthetic. Nihil tattooed accusamus, cred irony biodiesel keffiyeh artisan ullamco consequat.&lt;/p&gt; &lt;h4 id=\"Two\"&gt;ç¬¬äºŒé¡¹&lt;/h4&gt; &lt;p&gt;Veniam marfa mustache skateboard, adipisicing fugiat velit pitchfork beard. Freegan beard aliqua cupidatat mcsweeney's vero. Cupidatat four loko nisi, ea helvetica nulla carles. Tattooed cosby sweater food truck, mcsweeney's quis non freegan vinyl. Lo-fi wes anderson +1 sartorial. Carles non aesthetic exercitation quis gentrify. Brooklyn adipisicing craft beer vice keytar deserunt.&lt;/p&gt; &lt;h4 id=\"one\"&gt;one&lt;/h4&gt; &lt;p&gt;Occaecat commodo aliqua delectus. Fap craft beer deserunt skateboard ea. Lomo bicycle rights adipisicing banh mi, velit ea sunt next level locavore single-origin coffee in magna veniam. High life id vinyl, echo park consequat quis aliquip banh mi pitchfork. Vero VHS est adipisicing. Consectetur nisi DIY minim messenger bag. Cred ex in, sustainable delectus consectetur fanny pack iphone.&lt;/p&gt; &lt;h4 id=\"two\"&gt;two&lt;/h4&gt; &lt;p&gt;In incididunt echo park, officia deserunt mcsweeney's proident master cleanse thundercats sapiente veniam. Excepteur VHS elit, proident shoreditch +1 biodiesel laborum craft beer. Single-origin coffee wayfarers irure four loko, cupidatat terry richardson master cleanse. Assumenda you probably haven't heard of them art party fanny pack, tattooed nulla cardigan tempor ad. Proident wolf nesciunt sartorial keffiyeh eu banh mi sustainable. Elit wolf voluptate, lo-fi ea portland before they sold out four loko. Locavore enim nostrud mlkshk brooklyn nesciunt.&lt;/p&gt; &lt;h4 id=\"three\"&gt;three&lt;/h4&gt; &lt;p&gt;Ad leggings keytar, brunch id art party dolor labore. Pitchfork yr enim lo-fi before they sold out qui. Tumblr farm-to-table bicycle rights whatever. Anim keffiyeh carles cardigan. Velit seitan mcsweeney's photo booth 3 wolf moon irure. Cosby sweater lomo jean shorts, williamsburg hoodie minim qui you probably haven't heard of them et cardigan trust fund culpa biodiesel wes anderson aesthetic. Nihil tattooed accusamus, cred irony biodiesel keffiyeh artisan ullamco consequat.&lt;/p&gt; &lt;p&gt;Keytar twee blog, culpa messenger bag marfa whatever delectus food truck. Sapiente synth id assumenda. Locavore sed helvetica cliche irony, thundercats you probably haven't heard of them consequat hoodie gluten-free lo-fi fap aliquip. Labore elit placeat before they sold out, terry richardson proident brunch nesciunt quis cosby sweater pariatur keffiyeh ut helvetica artisan. Cardigan craft beer seitan readymade velit. VHS chambray laboris tempor veniam. Anim mollit minim commodo ullamco thundercats. &lt;/p&gt; &lt;/div&gt; &lt;/body&gt;&lt;/html&gt; æ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š å¼€å‘è€…ä¹Ÿå¯ä»¥å¯¹å¯¼èˆªæ ‡ç­¾çš„åˆ‡æ¢äº‹ä»¶è¿›è¡Œç›‘å¬ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š 1234$('#navbar').on('activate.bs.scrollspy',function(e)&#123; console.log(\"æ»šåŠ¨å¯¼èˆªæ”¹å˜\");&#125;) å¦å¤–ï¼Œæœ¬ç¯‡åšå®¢ä¸­æ‰€æœ‰çš„å®ä¾‹ä»£ç åŠæ˜¾ç¤ºæ•ˆæœï¼Œåœ¨å¦‚ä¸‹åœ°å€ä¸­ï¼Œéœ€è¦çš„å¯ä»¥è‡ªè¡Œå¯¹ç…§å­¦ä¹ ã€‚ http://zyhshao.github.io/bootStrapDemo/scrollJS.htmlã€‚ å‰ç«¯å­¦ä¹ æ–°äººï¼Œæœ‰å¿—åŒé“åˆçš„æœ‹å‹ï¼Œæ¬¢è¿äº¤æµä¸æŒ‡å¯¼ï¼ŒQQç¾¤:541458536","categories":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}],"tags":[],"keywords":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}]},{"title":"JavaScriptåŸºç¡€ä¹‹äºŒâ€”â€”æ–¹æ³•ä¸å±æ€§","slug":"294JavaScriptåŸºç¡€ä¹‹äºŒâ€”â€”æ–¹æ³•ä¸å±æ€§","date":"2016-12-28T16:00:00.000Z","updated":"2021-07-13T10:57:44.959Z","comments":true,"path":"2016/12/29/294JavaScriptåŸºç¡€ä¹‹äºŒâ€”â€”æ–¹æ³•ä¸å±æ€§/","link":"","permalink":"http://huishao.cc/2016/12/29/294JavaScriptåŸºç¡€ä¹‹äºŒâ€”â€”æ–¹æ³•ä¸å±æ€§/","excerpt":"","text":"JavaScriptåŸºç¡€ä¹‹äºŒâ€”â€”æ–¹æ³•ä¸å±æ€§å’Œç¼–è¯‘å‹è¯­è¨€å¿…é¡»ç”±ç±»äº§ç”Ÿå¯¹è±¡ä¸åŒï¼ŒJavaScriptè¯­è¨€ä¸­å¹¶æ²¡æœ‰ä¸¥æ ¼çš„ç±»çš„ç•Œå®šï¼Œå¹¶ä¸”å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ä¹Ÿå¯ä»¥è¿›è¡ŒåŠ¨æ€çš„ç»‘å®šã€‚å±æ€§æ˜¯å¯¹è±¡ä¸­å°è£…çš„ä¸€äº›å€¼æ•°æ®ï¼Œå…¶ç”¨æ¥æè¿°å¯¹æ­¤å¯¹è±¡çš„æŸäº›ç‰¹æ€§ï¼Œæ–¹æ³•ä¹Ÿç§°ä¸ºè¡Œä¸ºï¼Œå…¶ç”¨æ¥æè¿°å¯¹è±¡çš„ä¸€äº›è¡Œä¸ºåŠ¨ä½œï¼Œåˆ›å»ºå¯¹è±¡æœ‰ä¸¤ç§æ–¹å¼ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å¤§æ‹¬å·çš„æ–¹å¼åˆ›å»ºï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨new Object()æ¥åˆ›å»ºï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213//å¯¹è±¡æ‹¥æœ‰å±æ€§ä¸æ–¹æ³•//å±æ€§æè¿°å¯¹è±¡çš„æŸäº›å€¼var person = new Object();//åå­—å’Œå¹´é¾„å±æ€§person.name = 'Jaki';person.age = 25;//è¡Œèµ°æ–¹æ³•person.run = function()&#123; console.log(\"å‰è¿›1å…¬é‡Œ\");&#125;//è°ƒç”¨æ–¹æ³•person.run();console.log(person); æ•°å­—ï¼Œå­—ç¬¦ä¸²ç­‰æ•°æ®å®è´¨ä¸Šä¹Ÿæ˜¯å¯¹è±¡ï¼Œå­—ç¬¦ä¸²å¯¹è±¡å†…ç½®äº†ä¸€äº›å±æ€§ä¸æ–¹æ³•ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112var txt = \"Hello WorldW\";//è·å–å­—ç¬¦ä¸²é•¿åº¦å±æ€§console.log(txt.length);//è·å–å­ä¸²åœ¨å­—ç¬¦ä¸²ä¸­çš„ä½ç½® å¦‚æœæ²¡æ‰¾åˆ° ä¼šè¿”å›-1 ä»å‰å¾€åæœç´¢console.log(txt.indexOf(\"W\"));//è·å–å­ä¸²åœ¨å­—ç¬¦ä¸²ä¸­çš„ä½ç½® å¦‚æœæ²¡æ‰¾åˆ° ä¼šè¿”å›-1 ä»åå¾€å‰æœç´¢console.log(txt.lastIndexOf(\"W\"));//æ ¹æ®æ­£åˆ™è¡¨è¾¾å¼æˆ–è€…å­—ç¬¦ä¸²æœç´¢å­ä¸²console.log(txt.search(/W/));//è¿™ä¸ªæ–¹æ³•æœ‰ä¸¤ä¸ªå‚æ•° ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯éœ€è¦æ›¿æ¢çš„æ­£åˆ™æˆ–è€…å­ä¸² ç¬¬2ä¸ªå‚æ•°æ˜¯æ›¿æ¢åçš„å­ä¸²txt = txt.replace(\"World\",\"W\");console.log(txt); æ–¹æ³•ä¹Ÿæ˜¯å‡½æ•°ï¼ŒJavaScriptä¸­ä½¿ç”¨functionå…³é”®å­—æ¥å®šä¹‰å‡½æ•°ï¼Œå‡½æ•°å¯ä»¥æœ‰å‚æ•°åˆ—è¡¨ä¹Ÿå¯ä»¥æ²¡æœ‰ï¼Œå¯ä»¥é€šè¿‡returnè¿”å›å€¼ä¹Ÿå¯ä»¥æ— è¿”å›å€¼ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345function addFunc(param1,param2)&#123; console.log(param1+param2); return param1+param2;&#125;addFunc(5,6); éœ€è¦æ³¨æ„ï¼Œåœ¨å‡½æ•°å†…ä½¿ç”¨varå£°æ˜çš„å˜é‡ä¸ºå±€éƒ¨å˜é‡ï¼Œå½“å‡½æ•°ç»“æŸåï¼Œå±€éƒ¨å˜é‡ä¼šè¢«é”€æ¯ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„ï¼Œå¦‚æœåœ¨å‡½æ•°å†…æ²¡æœ‰å£°æ˜å˜é‡è€Œç›´æ¥ä½¿ç”¨ï¼Œåˆ™æ­¤å˜é‡ä¼šè¢«é»˜è®¤å£°æ˜ä¸ºå…¨å±€çš„ï¼Œåœ¨å‡½æ•°å¤–é¢ä¾ç„¶å¯ä»¥ä½¿ç”¨ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567function addFunc(param1,param2)&#123; console.log(param1+param2); sum = param1+param2; return param1+param2;&#125;addFunc(5,6);console.log(sum); å‰ç«¯å­¦ä¹ æ–°äººï¼Œæœ‰å¿—åŒé“åˆçš„æœ‹å‹ï¼Œæ¬¢è¿äº¤æµä¸æŒ‡å¯¼ï¼ŒQQç¾¤:541458536","categories":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}],"tags":[],"keywords":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}]},{"title":"JavaScriptåŸºç¡€ä¹‹ä¸€â€”â€”è¯­å¥ä¸æ•°æ®ç±»å‹","slug":"293JavaScriptåŸºç¡€ä¹‹ä¸€â€”â€”è¯­å¥ä¸æ•°æ®ç±»å‹","date":"2016-12-27T16:00:00.000Z","updated":"2021-07-13T10:57:01.225Z","comments":true,"path":"2016/12/28/293JavaScriptåŸºç¡€ä¹‹ä¸€â€”â€”è¯­å¥ä¸æ•°æ®ç±»å‹/","link":"","permalink":"http://huishao.cc/2016/12/28/293JavaScriptåŸºç¡€ä¹‹ä¸€â€”â€”è¯­å¥ä¸æ•°æ®ç±»å‹/","excerpt":"","text":"JavaScriptåŸºç¡€ä¹‹ä¸€â€”â€”è¯­å¥ä¸æ•°æ®ç±»å‹JavaScriptè¯­å¥çš„ç¼–å†™ååˆ†è‡ªç”±ï¼Œæ¯è¡Œå¯ä»¥ç¼–å†™ä¸€å¥è¯­å¥ä¹Ÿå¯ä»¥ç¼–å†™å¤šå¥è¯­å¥ã€‚éœ€è¦æ³¨æ„ï¼Œå¦‚æœå¼€å‘è€…è¦åœ¨ä¸€è¡Œä¸­ç¼–å†™å¤šå¥è¯­å¥ï¼Œéœ€è¦ä½¿ç”¨åˆ†å·è¿›è¡Œåˆ†å‰²ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345//JSä¸­çš„è¯­å¥å¯ä»¥ç”±åˆ†å·ç»“å°¾ï¼Œä¹Ÿå¯ä»¥ä¸å†™åˆ†å·console.log(\"æ— åˆ†å·ç»“å°¾è¯­å¥\")console.log(\"æœ‰åˆ†å·ç»“å°¾è¯­å¥\");//å¦‚æœè¦åœ¨åŒä¸€è¡Œä¸­å†™å¤šä¸ªè¯­å¥ éœ€è¦ç”¨åˆ†å·è¿›è¡Œåˆ†å‰² æœ€åä¸€å¥è¯­å¥å¯ä»¥ä¸å¸¦åˆ†å·console.log('ç»„');console.log('åˆ') JavaScriptè¯­è¨€æ˜¯ä¸€ç§å¯¹å¤§å°å†™ååˆ†æ•æ„Ÿçš„è¯­è¨€ï¼Œå¤§å°å†™å­—æ¯ä¸åŒçš„å˜é‡ï¼Œå‡½æ•°åœ¨JavaScriptä¸­è¢«è®¤å®šä¸ºä¸¤ä¸ªå˜é‡æˆ–å‡½æ•°ï¼Œå¦‚ä¸‹ï¼š 123//JSæ˜¯å¯¹å¤§å°å†™æ•æ„Ÿçš„ å¤§å†™å­—æ¯ä¸å°å†™å­—æ¯åœ¨JSä¸­æ˜¯ä¸åŒçš„var name = 'jaki';var NAME = 'JAKI'; åœ¨å­—ç¬¦ä¸²ä¸­ï¼Œå¼€å‘è€…å¯ä»¥ä½¿ç”¨åæ–œæ æ¥è¿›è¡ŒæŠ˜è¡Œï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345//å¯¹äºå­—ç¬¦ä¸² æ”¯æŒä½¿ç”¨\\è¿›è¡ŒæŠ˜è¡Œ å‡½æ•°å’Œå…³é”®å­—åˆ™ä¸è¡Œvar address = 'China \\ ShangHai. \\ 1102';console.log(address); éœ€è¦æ³¨æ„ï¼Œå‡½æ•°åã€å…³é”®å­—ç­‰ä¸èƒ½å¤Ÿè¿›è¡ŒæŠ˜è¡Œæ“ä½œã€‚ JavaScriptä¸­çš„æ³¨é‡Šåˆ†ä¸ºä¸¤ç§ï¼Œä½¿ç”¨//è¿›è¡Œå•è¡Œæ³¨é‡Šå’Œä½¿ç”¨/**/è¿›è¡Œå¤šè¡Œæ³¨é‡Šï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345//æ³¨é‡Šå¯ä»¥æ˜¯è¿™æ ·çš„å•è¡Œæ³¨é‡Š/*ä¹Ÿå¯ä»¥æ˜¯å¤šè¡Œæ³¨é‡Šç±»ä¼¼è¿™æ ·çš„*/ éœ€è¦æ³¨æ„ï¼ŒJavaScriptä¸­çš„æ³¨é‡Šä¸èƒ½åµŒå¥—ï¼Œè¿™å’ŒSwiftè¯­è¨€æœ‰åŒºåˆ«ï¼Œå¦‚ä¸‹çš„å†™æ³•ä¼šæŠ¥é”™ï¼š 12345/*/*åµŒå¥—*/ä¹Ÿå¯ä»¥æ˜¯å¤šè¡Œæ³¨é‡Šç±»ä¼¼è¿™æ ·çš„*/ åœ¨JavaScriptä¸­ä½¿ç”¨varå…³é”®å­—æ¥å£°æ˜å˜é‡ï¼Œå£°æ˜å˜é‡çš„æ—¶å€™å¯ä»¥ç›´æ¥èµ‹å€¼ä¹Ÿå¯ä»¥ä¸è¿›è¡Œèµ‹å€¼ï¼Œåœ¨åŒä¸€è¡Œè¯­å¥ä¸­å¯ä»¥åŒæ—¶å£°æ˜å¤šä¸ªå˜é‡ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567//JSä½¿ç”¨varæ¥è¿›è¡Œå˜é‡çš„å£°æ˜var obj1;obj1 = 'OBJ'//å˜é‡åœ¨å£°æ˜çš„æ—¶å€™ ä¹Ÿå¯ä»¥ç›´æ¥èµ‹å€¼var obj2 = 'OBJ'//ä¸€æ¡è¯­å¥ä¸­ä¹Ÿå¯ä»¥å£°æ˜å¤šä¸ªå˜é‡ ä½¿ç”¨,è¿›è¡Œåˆ†å‰²var obj3 = 2,obj4 = 1.5,obj5=\"OBJ\" JavaScriptè¯­è¨€æ‹¥æœ‰åŠ¨æ€çš„æ•°æ®ç±»å‹ï¼Œè™½ç„¶åœ¨å˜é‡å£°æ˜ä¸Šï¼ŒJavaScriptä¸Swiftè¯­è¨€æœ‰äº›ç›¸ä¼¼ï¼Œä½†å…¶æœ¬è´¨å®Œå…¨ä¸åŒï¼ŒSwiftè¯­è¨€æ˜¯å¼ºç±»å‹è¯­è¨€ï¼Œåœ¨å˜é‡å£°æ˜æ—¶ä¸æŒ‡å®šç±»å‹çš„åŸå› æ˜¯Xcodeå·¥å…·ä¼šè‡ªåŠ¨æ¨æ–­å˜é‡ç±»å‹ï¼Œå¹¶ä¸”Swiftè¯­è¨€ä¸­çš„å˜é‡ç±»å‹ä¸€æ—¦ç¡®å®šåˆ™ä¸èƒ½æ›´æ”¹ï¼ŒJavaScriptåˆ™ä¸ç„¶ï¼Œå…¶æ˜¯æ ¹æ®æ‰€åˆ†é…çš„å€¼çš„ç±»å‹æ¥ç¡®å®šå˜é‡çš„ç±»å‹ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234//JSä¸­çš„åŸºæœ¬æ•°æ®ç±»å‹//JSæ˜¯åŠ¨æ€ç±»å‹è¯­è¨€ åŒä¸€ä¸ªå˜é‡å¯ä»¥æ¥æ”¶ä¸åŒæ•°æ®ç±»å‹çš„æ•°æ®var obj6 = 6;//æ•°å­—obj6 = \"6\";//å­—ç¬¦ä¸² JavaScriptä¸­çš„å­—ç¬¦ä¸²å¯ä»¥ä½¿ç”¨å•å¼•å·ä¹Ÿå¯ä»¥ä½¿ç”¨åŒå¼•å·ï¼Œéœ€è¦æ³¨æ„ï¼Œå¦‚æœåœ¨å­—ç¬¦ä¸²ä¸­è¦å¼•ç”¨å­—ç¬¦ä¸²ï¼Œéœ€è¦äº¤æ›¿ä½¿ç”¨å•åŒå¼•å·ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456//å¦‚æœåœ¨å­—ç¬¦ä¸²å†…éœ€è¦å¼•ç”¨å­—ç¬¦ä¸² éœ€è¦äº¤æ›¿å•å¼•å·ä¸åŒå¼•å·obj6='ä½ å¥½\"jaki\"';obj6=\"ä½ å¥½'Jaki'\";console.log(obj6);//typeof()ç”¨äºè·å–å˜é‡ç±»å‹console.log(typeof(obj6)); åœ¨JavaScriptä¸­ï¼Œéƒ¨åˆ†æ•´å‹ä¸æµ®ç‚¹å‹ï¼Œéƒ½ç»Ÿä¸€ä¸ºæ•°å­—ç±»å‹ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345//JSåªæœ‰ä¸€ç§æ•°å­—ç±»å‹ å¯ä»¥æ˜¯å°æ•° ä¹Ÿå¯ä»¥æ˜¯æ•´æ•°var obj8 = 34;var obj9 = 55.4;console.log(typeof(obj8));console.log(typeof(obj9)); JavaScriptä¸­ä½¿ç”¨å¸ƒå°”ç±»å‹æ¥è¡¨ç¤ºé€»è¾‘å€¼ï¼Œå¸ƒå°”ç±»å‹åªæœ‰ä¸¤ç§å€¼ï¼Œtrueæˆ–è€…falseï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234//å¸ƒå°”ç±»å‹var obj10 = true;var obj11 = false;console.log(typeof(obj11)); JavaScriptä¸­æœ‰ä¸¤ç§æ–¹å¼æ¥åˆ›å»ºæ•°ç»„ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345//æ•°ç»„var className = ['1','2','3'];var peoples = new Array(\"jaki\",\"annay\",\"marck\");console.log(className[1]);console.log(peoples); éœ€è¦æ³¨æ„ï¼Œæ•°ç»„çš„ä¸‹æ ‡ä»0å¼€å§‹ã€‚ JavaScriptä¸­æœ€å¸¸ç”¨çš„æ•°æ®ç±»å‹è¦å±å¯¹è±¡äº†ï¼ŒJavaScriptä¸­å®šä¹‰å¯¹è±¡çš„æ–¹å¼å¦‚ä¸‹ï¼š 12345//å¯¹è±¡var student = &#123;name:'jaki',age:24&#125;;console.log(typeof(student));console.log(student.name);console.log(student['age']); å¯¹è±¡ä¸­å®šä¹‰çš„é”®å€¼å¯¹è¢«ç§°ä¸ºå¯¹è±¡çš„å±æ€§ï¼Œè®¿é—®å¯¹è±¡çš„å±æ€§æœ‰ä¸¤ç§æ–¹æ³•ï¼Œä¸€ç§æ˜¯é€šè¿‡ç‚¹è¯­æ³•ï¼Œä¸€ç§æ˜¯é€šè¿‡é”®åã€‚ é™¤äº†ä¸Šè¿°æ•°æ®ç±»å‹å¤–ï¼ŒJavaScriptä¸­è¿˜æœ‰ä¸¤ç§ç‰¹æ®Šçš„æ•°æ®ç±»å‹ï¼Œundefinedä¸nullï¼Œå‰è€…è¡¨ç¤ºæœªå®šä¹‰ï¼Œåè€…è¡¨ç¤ºç©ºï¼Œå¦‚æœåªæ˜¯å£°æ˜äº†å˜é‡ï¼Œæ²¡åšèµ‹å€¼ï¼Œåˆ™æ­¤å˜é‡å°±æ˜¯æœªå®šä¹‰çš„ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456//Undefinedè¡¨ç¤ºä¸ºå®šä¹‰ nullè¡¨ç¤ºç©ºå€¼var uni;var cz = 5;cz = null;console.log(uni);console.log(cz); å‰ç«¯å­¦ä¹ æ–°äººï¼Œæœ‰å¿—åŒé“åˆçš„æœ‹å‹ï¼Œæ¬¢è¿äº¤æµä¸æŒ‡å¯¼ï¼ŒQQç¾¤:541458536","categories":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}],"tags":[],"keywords":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}]},{"title":"Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åä¸ƒâ€”â€”ä¸‹æ‹‰åˆ—è¡¨äº¤äº’","slug":"291Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åä¸ƒâ€”â€”ä¸‹æ‹‰åˆ—è¡¨äº¤äº’","date":"2016-12-26T16:00:00.000Z","updated":"2021-07-13T10:54:27.129Z","comments":true,"path":"2016/12/27/291Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åä¸ƒâ€”â€”ä¸‹æ‹‰åˆ—è¡¨äº¤äº’/","link":"","permalink":"http://huishao.cc/2016/12/27/291Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åä¸ƒâ€”â€”ä¸‹æ‹‰åˆ—è¡¨äº¤äº’/","excerpt":"","text":"Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åä¸ƒâ€”â€”ä¸‹æ‹‰åˆ—è¡¨äº¤äº’ä¸ºdropdown-toggleç±»æ·»åŠ data-toggle=&quot;dropdown&quot;å±æ€§å¯ä»¥å®ç°å…¶ä¸‹æ‹‰åˆ—è¡¨åŠŸèƒ½çš„ç»‘å®šï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314151617181920&lt;div class=\"dropdown col-md-2\" id=\"drop\"&gt; &lt;button class=\"btn dropdown-toggle btn-primary\" data-toggle=\"dropdown\"&gt; ä¸‹æ‹‰åˆ—è¡¨ &lt;span class=\"caret\"&gt;&lt;/span&gt; &lt;/button&gt; &lt;ul class=\"dropdown-menu\"&gt; &lt;li&gt; &lt;a&gt;é‡‘ç‰›åº§&lt;/a&gt; &lt;/li&gt; &lt;li&gt; &lt;a&gt;æ‘©ç¾¯åº§&lt;/a&gt; &lt;/li&gt; &lt;li&gt; &lt;a&gt;ç‹®å­åº§&lt;/a&gt; &lt;/li&gt; &lt;li&gt; &lt;a&gt;ç™½ç¾Šåº§&lt;/a&gt; &lt;/li&gt; &lt;/ul&gt;&lt;/div&gt; ç‚¹å‡»æ­¤æŒ‰é’®åï¼Œå¯ä»¥è‡ªåŠ¨å®ç°ä¸‹æ‹‰åˆ—è¡¨çš„æ˜¾ç¤ºæˆ–éšè—ã€‚ Bootstrapä¸­çš„ä¸‹æ‹‰åˆ—è¡¨æ§ä»¶ä¹Ÿå®šä¹‰äº†ä¸€äº›æ–¹æ³•å›è°ƒï¼Œå…¶ä¼šåœ¨drop-menuçš„çˆ¶æ ‡ç­¾ä¸Šè¿›è¡Œç»‘å®šï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112$('#myDropMenu').on('show.bs.dropdown',function()&#123; console.log(\"ä¸‹æ‹‰æ¡†å°†è¦å±•ç¤º\");&#125;);$('#myDropMenu').on('shown.bs.dropdown',function()&#123; console.log(\"ä¸‹æ‹‰æ¡†å·²ç»å±•ç¤º\");&#125;);$('#myDropMenu').on('hide.bs.dropdown',function()&#123; console.log(\"ä¸‹æ‹‰æ¡†å°†è¦éšè—\");&#125;);$('#myDropMenu').on('hidden.bs.dropdown',function()&#123; console.log(\"ä¸‹æ‹‰æ¡†å·²ç»å±•ç¤º\");&#125;); å¦å¤–ï¼Œæœ¬ç¯‡åšå®¢ä¸­æ‰€æœ‰çš„å®ä¾‹ä»£ç åŠæ˜¾ç¤ºæ•ˆæœï¼Œåœ¨å¦‚ä¸‹åœ°å€ä¸­ï¼Œéœ€è¦çš„å¯ä»¥è‡ªè¡Œå¯¹ç…§å­¦ä¹ ã€‚ http://zyhshao.github.io/bootStrapDemo/dropdownJS.htmlã€‚ å‰ç«¯å­¦ä¹ æ–°äººï¼Œæœ‰å¿—åŒé“åˆçš„æœ‹å‹ï¼Œæ¬¢è¿äº¤æµä¸æŒ‡å¯¼ï¼ŒQQç¾¤:541458536","categories":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}],"tags":[],"keywords":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}]},{"title":"é…ç½®Sublime Textå·¥å…·è¿è¡ŒJavaScriptä»£ç ","slug":"292é…ç½®Sublime Textå·¥å…·è¿è¡ŒJavaScriptä»£ç ","date":"2016-12-26T16:00:00.000Z","updated":"2021-07-13T10:55:42.149Z","comments":true,"path":"2016/12/27/292é…ç½®Sublime Textå·¥å…·è¿è¡ŒJavaScriptä»£ç /","link":"","permalink":"http://huishao.cc/2016/12/27/292é…ç½®Sublime Textå·¥å…·è¿è¡ŒJavaScriptä»£ç /","excerpt":"","text":"é…ç½®Sublime Textå·¥å…·è¿è¡ŒJavaScriptä»£ç SublimeTextæ˜¯ä¸€æ¬¾åŠå¼ºå¤§çš„è·¨å¹³å°ç¼–è¾‘å™¨ï¼Œå…¶ä¸°å¯Œçš„æ’ä»¶å¯ä»¥å¸®åŠ©å¼€å‘è€…ç¼–å†™å„ç§è¯­è¨€çš„ä»£ç ã€‚å¹¶ä¸”å…¶è‡ªå¸¦æ§åˆ¶å°ï¼Œå¼€å‘è€…å®ç°ç®€å•çš„é…ç½®å³å¯åœ¨SublimeTextæ§åˆ¶å°ä¸­è¿›è¡Œä»£ç çš„è°ƒè¯•è¿è¡Œã€‚ åœ¨SublimeTextä¸­è¿è¡ŒJavaScriptä»£ç ååˆ†ç®€å•ï¼Œå®ç°è¿è¡ŒJavaScriptä»£ç éœ€è¦å€ŸåŠ©node.jsç¯å¢ƒï¼Œé¦–å…ˆéœ€è¦å®‰è£…node.jsç¯å¢ƒï¼Œnode.jsç¯å¢ƒå¯ä»¥åœ¨å¦‚ä¸‹ç½‘å€è¿›è¡Œä¸‹è½½å®‰è£…ï¼š https://nodejs.org/en/ã€‚ å®‰è£…å®Œæˆnodeç¯å¢ƒåï¼Œåœ¨ç»ˆç«¯è¾“å…¥å¦‚ä¸‹å‘½ä»¤è·å–nodeçš„è·¯å¾„ï¼š 1which node ç¤ºä¾‹å¦‚ä¸‹ï¼š æ‰“å¼€SublimeTextç¼–è¾‘å™¨ï¼Œåœ¨èœå•ä¸­çš„Tools-&gt;Build System-&gt;New Build Systemï¼Œå¦‚ä¸‹å›¾ï¼š éœ€è¦æ³¨æ„ï¼Œå›¾ä¸­çš„JavaScriptæ˜¯æˆ‘é…ç½®å®Œæˆåå¢åŠ çš„ï¼Œé»˜è®¤æ˜¯æ— æ³•è¿è¡ŒJavaScriptä»£ç çš„ï¼ŒBuild Systemä¸­ä¹Ÿä¸ä¼šæœ‰è¿™ä¸€é¡¹ã€‚ åœ¨æ–°å»ºçš„æ–‡ä»¶ä¸­å†™å…¥å¦‚ä¸‹ä¿¡æ¯åè¿›è¡Œä¿å­˜ï¼š 1234&#123; \"cmd\": [\"/usr/local/bin/node\", \"$file\"], \"selector\": \"source.js\" &#125; æ³¨æ„cmdæ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå¯¹è±¡æ˜¯åˆšæ‰ä»ç»ˆç«¯æŸ¥åˆ°çš„nodeè·¯å¾„ï¼Œselectorå¯¹åº”è¦ç¼–è¯‘çš„æ–‡ä»¶åç¼€ã€‚ è¿›è¡Œä¿å­˜ï¼Œå°†å…¶æ–‡ä»¶åå‘½åä¸ºJavaScript(å…¶å®ä»€ä¹ˆéƒ½å¯ä»¥)ã€‚ æ–°å»ºä¸€ä¸ªSublimeTextæ–‡ä»¶ï¼Œå°†å…¶ä¿å­˜ä¸ºjsæ–‡ä»¶ï¼Œåœ¨å…¶ä¸­ç¼–å†™JavaScriptä»£ç ï¼Œä½¿ç”¨command+B(Mac)å³å¯è¿›è¡ŒJavaScriptä»£ç çš„è¿è¡Œï¼Œæ•ˆæœå¦‚ä¸‹ï¼š å‰ç«¯å­¦ä¹ æ–°äººï¼Œæœ‰å¿—åŒé“åˆçš„æœ‹å‹ï¼Œæ¬¢è¿äº¤æµä¸æŒ‡å¯¼ï¼ŒQQç¾¤:541458536","categories":[{"name":"å°ç å·¥å…·","slug":"å°ç å·¥å…·","permalink":"http://huishao.cc/categories/å°ç å·¥å…·/"}],"tags":[],"keywords":[{"name":"å°ç å·¥å…·","slug":"å°ç å·¥å…·","permalink":"http://huishao.cc/categories/å°ç å·¥å…·/"}]},{"title":"Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åå…­â€”â€”æ¨¡æ€æ¡†äº¤äº’","slug":"290 Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åå…­â€”â€”æ¨¡æ€æ¡†äº¤äº’","date":"2016-12-25T16:00:00.000Z","updated":"2021-07-13T10:53:43.620Z","comments":true,"path":"2016/12/26/290 Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åå…­â€”â€”æ¨¡æ€æ¡†äº¤äº’/","link":"","permalink":"http://huishao.cc/2016/12/26/290 Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åå…­â€”â€”æ¨¡æ€æ¡†äº¤äº’/","excerpt":"","text":"Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åå…­â€”â€”æ¨¡æ€æ¡†äº¤äº’æ¨¡æ€æ¡†ä¹Ÿå¯ä»¥ç§°ä¸ºå¼¹å‡ºçª—ï¼Œå…¶ä½œç”¨æ˜¯å½“ç”¨æˆ·ç‚¹å‡»æŸä¸ªåŠŸèƒ½æŒ‰é’®åï¼Œåœ¨ç½‘é¡µä¸Šå¼¹å‡ºä¸€ä¸ªå†…å®¹çª—å£ã€‚åœ¨Bootstrapä¸­ï¼Œåˆ›å»ºæ¨¡æ€æ¡†ååˆ†ç®€å•ã€‚é¦–å…ˆæ¨¡æ€æ¡†ç»„ä»¶é€šè¿‡modalç±»æ¥åˆ›å»ºï¼Œå…¶é»˜è®¤éšè—ï¼Œå¼€å‘è€…å¯ä»¥ä½¿ç”¨dataç›¸å…³å±æ€§æ¥å°†å…¶å”¤å‡ºã€‚ç®€å•ç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728&lt;button type=\"button\" class=\"btn btn-primary btn-lg\" data-toggle=\"modal\" data-target=\"#myModal\"&gt;æ­£å¸¸æ¨¡æ€æ¡†&lt;/button&gt;&lt;!--è¿™é‡Œè®¾ç½®çš„idç”¨äºç»‘å®šåœ¨æŒ‰é’®äº‹ä»¶ä¸Š--&gt;&lt;div class=\"modal fade\" id=\"myModal\" tabindex=\"-1\"&gt; &lt;!--modal-dialogä¸ºæ‚¬æµ®æ¡†æ¨¡å¼çš„æ¨¡æ€æ¡†--&gt; &lt;div class=\"modal-dialog\"&gt; &lt;!--æ¨¡æ€æ¡†ç»„ä»¶å†…å®¹éƒ¨åˆ†--&gt; &lt;div class=\"modal-content\"&gt; &lt;!--å¤´éƒ¨å†…å®¹--&gt; &lt;div class=\"modal-header\"&gt; &lt;!--ä¸ºæŒ‰é’®ç»‘å®šdata-dismiss=\"modal\"å¯ä»¥å®ç°ç‚¹å‡»å–æ¶ˆæ¨¡æ€æ¡†--&gt; &lt;button type=\"button\" class=\"close\" data-dismiss=\"modal\"&gt;&lt;span&gt;&amp;times;&lt;/span&gt; &lt;/button&gt; &lt;h4 class=\"modal-title\" id=\"myModalLabel\"&gt;æ¨¡æ€æ¡†æ ‡é¢˜&lt;/h4&gt; &lt;/div&gt; &lt;!--æ¨¡æ€æ¡†ä¸»ä½“å†…å®¹--&gt; &lt;div class=\"modal-body\"&gt; æ¨¡æ€æ¡†å†…å®¹ &lt;/div&gt; &lt;!--æ¨¡æ€æ¡†å°¾éƒ¨å†…å®¹--&gt; &lt;div class=\"modal-footer\"&gt; &lt;button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\"&gt;å…³é—­&lt;/button&gt; &lt;button type=\"button\" class=\"btn btn-primary\" data-dismiss=\"modal\"&gt;ä¿å­˜&lt;/button&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt;&lt;/div&gt; æ•ˆæœå¦‚ä¸‹ï¼š å¯ä»¥ä¸ºmodel-dialogç±»å¢åŠ modal-lgæˆ–è€…modal-små¯ä»¥åˆ›å»ºå¤§å·çš„æ¨¡æ€æ¡†æˆ–è€…å°å·çš„æ¨¡æ€æ¡†ã€‚éœ€è¦æ³¨æ„ï¼Œæ¨¡æ€æ¡†çš„å¼¹å‡ºæ—¶æœ‰æ¸å…¥åŠ¨ç”»çš„ï¼Œå¦‚æœä¸éœ€è¦åŠ¨ç”»æ•ˆæœï¼Œåªéœ€è¦å°†fadeç±»å»æ‰å³å¯ã€‚ å¯¹äºå®šä¹‰ä¸ºmodalæ¨¡å—çš„divï¼Œå¼€å‘è€…ä¹Ÿå¯ä»¥é€šè¿‡è®¾ç½®dataå±æ€§çš„æ–¹å¼æ¥å¯¹æ¨¡æ€æ¡†è¿›è¡Œè®¾ç½®ï¼Œåˆ—ä¸¾å¦‚ä¸‹ï¼š | data-backdrop | å¸ƒå°”â€trueâ€æˆ–â€falseâ€ | å¦‚æœè®¾ç½®ä¸ºtrueï¼Œåˆ™æ˜¾ç¤ºç°è‰²èƒŒæ™¯ï¼Œå¦åˆ™ä¸æ˜¾ç¤ºç°è‰²èƒŒæ™¯ || data-keyboard | å¸ƒå°”å€¼ | è®¾ç½®ç‚¹å‡»é”®ç›˜escé”®æ˜¯å¦éšè—æ¨¡æ€æ¡†ï¼Œæ³¨æ„ï¼Œå¿…é¡»è®¾ç½®tabindexå±æ€§ï¼Œè¿™ä¸ªå€¼æ‰æœ‰æ•ˆ || data-show | å¸ƒå°”å€¼ | æ¨¡æ€æ¡†åˆå§‹åŒ–åæ˜¯å¦ç«‹å³å±•ç¤º || data-remote | è·¯å¾„ | å¦‚æœé…ç½®äº†urlï¼Œä¼šå°†å†…å®¹åŠ è½½è¿›modal-contentä¸­ | modalæ¨¡å—ä¹Ÿæ”¯æŒé€šè¿‡jsä»£ç æ¥è¿›è¡Œç›¸å…³æ§åˆ¶ï¼Œæ”¯æŒçš„æ–¹æ³•å¦‚ä¸‹ï¼š 12345678910111213141516171819 $('#open').on(\"click\",function()&#123; //å±•ç¤ºæ¨¡æ€æ¡† $('#myModal').modal('show');&#125;);$('#close').on(\"click\",function()&#123; //éšè—æ¨¡æ€æ¡† $('#myModal').modal('hide');&#125;);$('#exchange').on(\"click\",function()&#123; //æ˜¾ç¤ºæˆ–éšè—è¿›è¡Œåˆ‡æ¢ $('#myModal').modal('toggle');&#125;);$('#setting').on(\"click\",function()&#123; //å¯¹æ¨¡æ€æ¡†çš„å±æ€§è¿›è¡Œè®¾ç½® ä¼ å…¥å¯¹è±¡ $('#myModal').modal(&#123; keyboard:false &#125;);&#125;); æ¨¡æ€æ¡†ä¹Ÿå¯ä»¥æ·»åŠ ä¸€äº›ç‰¹æœ‰çš„äº‹ä»¶å›è°ƒï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415$('#myModal').on('show.bs.modal',function(e)&#123; console.log(\"æ¨¡æ€æ¡†å°†è¦å±•ç¤ºè§¦å‘\")&#125;);$('#myModal').on('shown.bs.modal',function(e)&#123; console.log(\"æ¨¡æ€æ¡†å·²ç»å±•ç¤ºåè§¦å‘\")&#125;);$('#myModal').on('hide.bs.modal',function(e)&#123; console.log(\"æ¨¡æ€æ¡†å°†è¦æ¶ˆå¤±è§¦å‘\")&#125;);$('#myModal').on('hidden.bs.modal',function(e)&#123; console.log(\"æ¨¡æ€æ¡†å·²ç»æ¶ˆå¤±åè§¦å‘\")&#125;);$('#myModal').on('loaded.bs.modal',function(e)&#123; console.log(\"ä»è¿œç«¯æ•°æ®æºåŠ è½½æ•°æ®å®Œæˆ\")&#125;); å¦å¤–ï¼Œæœ¬ç¯‡åšå®¢ä¸­æ‰€æœ‰çš„å®ä¾‹ä»£ç åŠæ˜¾ç¤ºæ•ˆæœï¼Œåœ¨å¦‚ä¸‹åœ°å€ä¸­ï¼Œéœ€è¦çš„å¯ä»¥è‡ªè¡Œå¯¹ç…§å­¦ä¹ ã€‚ http://zyhshao.github.io/bootStrapDemo/modelJS.htmlã€‚ å‰ç«¯å­¦ä¹ æ–°äººï¼Œæœ‰å¿—åŒé“åˆçš„æœ‹å‹ï¼Œæ¬¢è¿äº¤æµä¸æŒ‡å¯¼ï¼ŒQQç¾¤:541458536","categories":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}],"tags":[],"keywords":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}]},{"title":"ReactNativeåº”ç”¨ä¹‹æ±‡ç‡æ¢ç®—å™¨å¼€å‘å…¨è§£æ","slug":"289ReactNativeåº”ç”¨ä¹‹æ±‡ç‡æ¢ç®—å™¨å¼€å‘å…¨è§£æ","date":"2016-12-25T16:00:00.000Z","updated":"2021-07-13T10:51:59.892Z","comments":true,"path":"2016/12/26/289ReactNativeåº”ç”¨ä¹‹æ±‡ç‡æ¢ç®—å™¨å¼€å‘å…¨è§£æ/","link":"","permalink":"http://huishao.cc/2016/12/26/289ReactNativeåº”ç”¨ä¹‹æ±‡ç‡æ¢ç®—å™¨å¼€å‘å…¨è§£æ/","excerpt":"","text":"ReactNativeåº”ç”¨ä¹‹æ±‡ç‡æ¢ç®—å™¨å¼€å‘å…¨è§£æä¸€ã€å¼•è¨€æœ¬ç¯‡åšå®¢å°†ä»‹ç»å¦‚ä½•å¼€å‘ä¸€æ¬¾ç®€æ˜“çš„ReactNativeå°åº”ç”¨æ±‡ç‡æ¢ç®—å™¨ã€‚æœ¬åº”ç”¨ä»…ä½œä¸ºå­¦ä¹ ä½¿ç”¨ï¼Œå…¶æ”¯æŒåœ¨äººæ°‘å¸ä¸ç¾å…ƒé—´è¿›è¡Œæ±‡ç‡è®¡ç®—ã€‚æ±‡ç‡è®¡ç®—å™¨åº”ç”¨ä¸»è¦åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šé”®ç›˜ä¸æ˜¾ç¤ºå±ã€‚é”®ç›˜æä¾›ç»™ä¸ç”¨æˆ·è¿›è¡Œè¾“å…¥ï¼Œåœ¨æ˜¾ç¤ºå±ä¸Šè¿›è¡Œæ±‡ç‡æ¢ç®—ç»“æœçš„æ˜¾ç¤ºã€‚å¤æ‚çš„ç•Œé¢æ— éæ˜¯ç®€å•ç»„ä»¶çš„ç»„åˆä½¿ç”¨ï¼Œå› æ­¤ï¼Œåœ¨è¿›è¡Œå¼€å‘ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥æ€è€ƒå¯èƒ½éœ€è¦ä½¿ç”¨åˆ°çš„ç‹¬ç«‹ç»„ä»¶çš„å¼€å‘ï¼Œä¾‹å¦‚é”®ç›˜æŒ‰é’®çš„å¼€å‘ï¼Œæœ‰é”®ç›˜æŒ‰é’®ç»„æˆçš„é”®ç›˜çš„å¼€å‘ï¼Œæ˜¾ç¤ºå±å¼€å‘ç­‰ã€‚é¦–å…ˆåˆ›å»ºä¸€ä¸ªåˆå§‹çš„ReactNativeå·¥ç¨‹ï¼Œå°†index.ios.jsä¸index.android.jsæ–‡ä»¶ä¸­çš„å†…å®¹å…¨éƒ¨åˆ æ‰ã€‚åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­æ–°å»º4ä¸ªç›®å½•ï¼Œåˆ†åˆ«ä¸ºconstã€controllerã€imageå’Œviewã€‚è¿™4ä¸ªç›®å½•ç”¨äºå­˜æ”¾åé¢æˆ‘ä»¬éœ€è¦æ–°å»ºçš„é™æ€æ–‡ä»¶ï¼Œæ§åˆ¶å™¨æ–‡ä»¶ï¼Œå›¾ç‰‡ç´ æå’Œè§†å›¾æ–‡ä»¶ã€‚ äºŒã€ç”¨æˆ·é”®ç›˜çš„å°è£…åœ¨viewæ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ªKeyButton.jsæ–‡ä»¶ï¼Œå…¶ç”¨æ¥åˆ›å»ºé”®ç›˜ä¸Šçš„ç‹¬ç«‹æŒ‰é’®ï¼Œå°†å…¶å®ç°å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859import React, &#123; Component,PropTypes &#125; from 'react';import &#123; TouchableHighlight, Text, StyleSheet, Image&#125; from 'react-native';export default class KeyButton extends Component&#123; render()&#123; //æ ¹æ®numberå±æ€§æ¥åšåˆ¤æ–­ if (this.props.number == 'åˆ ') &#123; return( &lt;TouchableHighlight underlayColor='#f06d30' style=&#123;[keyButtonStyles.buttonStyleNormal,&#123;alignItems:'center'&#125;]&#125; onPress=&#123;this.props.buttonPress.bind(this,this.props.number)&#125;&gt; &lt;Image source=&#123;require('../image/delete.png')&#125;/&gt; &lt;/TouchableHighlight&gt; ); &#125;; //ç‰¹æ®ŠæŒ‰é’®éœ€è¦çŠ¶æ€æ¥åˆ¤æ–­ var buttonStyle; if(this.props.number == 'C' || this.props.number == '=')&#123; buttonStyle = keyButtonStyles.buttonStyleSpecial; &#125;else&#123; buttonStyle = keyButtonStyles.buttonStyleNormal; &#125; return( &lt;TouchableHighlight underlayColor='#f06d30' style=&#123;buttonStyle&#125; onPress=&#123;this.props.buttonPress.bind(this,this.props.number)&#125;&gt; &lt;Text style=&#123;keyButtonStyles.textStyle&#125;&gt;&#123;this.props.number&#125;&lt;/Text&gt; &lt;/TouchableHighlight&gt; ); &#125;&#125;//é…ç½®æ ·å¼åˆ—è¡¨const keyButtonStyles = StyleSheet.create(&#123; //æ­£å¸¸æŒ‰é’®æ ·å¼ buttonStyleNormal:&#123; flex:1, backgroundColor:'#323637', justifyContent: 'center', &#125;, //ç‰¹æ®ŠæŒ‰é’®æ ·å¼ buttonStyleSpecial:&#123; flex:1, backgroundColor:'#f06d30', justifyContent: 'center', &#125;, //æ–‡æœ¬æ ·å¼ textStyle:&#123; color:'white', textAlign:'center', fontSize:30 &#125;&#125;); ä¸Šé¢ä»£ç ä¸­é¢„ç•™numberå±æ€§ä½œä¸ºæŒ‰é’®çš„æ ‡é¢˜ï¼Œä¸åŒçš„æŒ‰é’®å¯èƒ½å¸¦æœ‰ä¸åŒçš„æ ·å¼ï¼ŒåŒæ ·é€šè¿‡è¿™ä¸ªå±æ€§æ¥åšåŒºåˆ†ã€‚æŒ‰é’®çš„è§¦å‘äº‹ä»¶ç»‘å®šç»™äº†buttonPresså±æ€§ï¼Œå¹¶ä¸”åœ¨æŒ‰é’®è§¦å‘æ‰§è¡Œæ—¶ï¼Œå°†æŒ‰é’®çš„numberå±æ€§ä¼ é€’å‡ºå»ã€‚ åœ¨constæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ªConst,jsæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸­ç”¨æ¥å®šä¹‰å…¨å±€çš„ä¸€äº›æ ·å¼ï¼Œå®ç°å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324import React, &#123; Component &#125; from 'react';import &#123; StyleSheet &#125; from 'react-native';export default mainViewStyles = StyleSheet.create(&#123; //ä¸»ç•Œé¢å®¹å™¨çš„æ ·å¼ container:&#123; flex:1, flexDirection:'column', backgroundColor:'black' &#125;, //æ˜¾ç¤ºå±çš„æ ·å¼ screenView:&#123; flex:3, backgroundColor:'#f06d30' &#125;, //é”®ç›˜çš„æ ·å¼ keyboardView:&#123; flex:7, backgroundColor:'#323637' &#125;&#125;); åœ¨Viewæ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ªKeyboardView.jsæ–‡ä»¶ï¼Œå°†å…¶ä½œä¸ºé”®ç›˜è§†å›¾ç±»ï¼Œå°†å…¶å®ç°å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647import React, &#123; Component &#125; from 'react';import &#123; View, Text, StyleSheet &#125; from 'react-native';import KeyButton from './KeyButton';import mainViewStyles from '../const/Const';export default class KeyboardView extends Component &#123; render()&#123; return( &lt;View style=&#123;mainViewStyles.keyboardView&#125;&gt; &lt;View style=&#123;keyboardViewStyles.keyboardRow&#125;&gt; &lt;KeyButton number='1' buttonPress=&#123;this.props.buttonPress&#125;/&gt; &lt;KeyButton number='2' buttonPress=&#123;this.props.buttonPress&#125;/&gt; &lt;KeyButton number='3' buttonPress=&#123;this.props.buttonPress&#125;/&gt; &lt;KeyButton number='åˆ ' buttonPress=&#123;this.props.buttonPress&#125;/&gt; &lt;/View&gt; &lt;View style=&#123;keyboardViewStyles.keyboardRow&#125;&gt; &lt;KeyButton number='4' buttonPress=&#123;this.props.buttonPress&#125;/&gt; &lt;KeyButton number='5' buttonPress=&#123;this.props.buttonPress&#125;/&gt; &lt;KeyButton number='6' buttonPress=&#123;this.props.buttonPress&#125;/&gt; &lt;KeyButton number='0' buttonPress=&#123;this.props.buttonPress&#125;/&gt; &lt;/View&gt; &lt;View style=&#123;keyboardViewStyles.keyboardRow&#125;&gt; &lt;KeyButton number='7' buttonPress=&#123;this.props.buttonPress&#125;/&gt; &lt;KeyButton number='8' buttonPress=&#123;this.props.buttonPress&#125;/&gt; &lt;KeyButton number='9' buttonPress=&#123;this.props.buttonPress&#125;/&gt; &lt;KeyButton number='.' buttonPress=&#123;this.props.buttonPress&#125;/&gt; &lt;/View&gt; &lt;View style=&#123;keyboardViewStyles.keyboardRow&#125;&gt; &lt;KeyButton number='C' buttonPress=&#123;this.props.buttonPress&#125;/&gt; &lt;KeyButton number='-' buttonPress=&#123;this.props.buttonPress&#125;/&gt; &lt;KeyButton number='+' buttonPress=&#123;this.props.buttonPress&#125;/&gt; &lt;KeyButton number='=' buttonPress=&#123;this.props.buttonPress&#125;/&gt; &lt;/View&gt; &lt;/View&gt; ); &#125;&#125;const keyboardViewStyles = StyleSheet.create(&#123; keyboardRow:&#123; flex:1, backgroundColor:'black', flexDirection:'row' &#125;&#125;); ä¸Šé¢ä»¥ä¹å®«æ ¼çš„å¸ƒå±€æ¨¡å¼åˆ›å»ºäº†16ä¸ªåŠŸèƒ½æŒ‰é’®ï¼Œå¹¶ä¸”å°†æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶å±æ€§ç»‘å®šç»™é”®ç›˜çš„buttonPresså±æ€§ï¼Œç”±ä¸Šå±‚è§†å›¾æ¥åšå¤„ç†ï¼Œè¿™é‡Œä½¿ç”¨äº†flexæƒé‡çš„å¸ƒå±€æ¨¡å¼ã€‚ è‡³æ­¤ï¼Œé”®ç›˜éƒ¨åˆ†å…ˆå‘Šä¸€æ®µè½ï¼Œæˆ‘ä»¬éœ€è¦å¯¹æ˜¾ç¤ºå±è¿›è¡Œå¼€å‘ï¼Œåœ¨Viewæ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ªScreenView.jsæ–‡ä»¶ï¼Œå°†å…¶ä½œä¸ºæ˜¾ç¤ºå±è§†å›¾ç±»ï¼Œæ˜¾ç¤ºå±ç±»å’Œé”®ç›˜æ¯”èµ·æ¥è¦å¤æ‚è®¸å¤šï¼Œå› ä¸ºå…¶è¦å®ç°å„ç§å±å¹•æ“ä½œåŠŸèƒ½ï¼Œä¾‹å¦‚å›é€€ï¼Œåˆ é™¤ï¼Œæ¸…ç©ºï¼Œè®¡ç®—ç­‰ï¼Œå®ç°å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157import React, &#123; Component &#125; from 'react';import &#123; View, Text, StyleSheet, TouchableHighlight, Image &#125; from 'react-native';import mainViewStyles from '../const/Const';export default class ScreenView extends Component &#123; constructor(props) &#123; super(props); //è¿™ä¸‰ä¸ªçŠ¶æ€åˆ†åˆ«ç”¨æ¥æ ‡è®°æ˜¯ç¾å…ƒè½¬äººæ°‘å¸æˆ–è€…äººæ°‘å¸è½¬ç¾å…ƒï¼Œç¾å…ƒæ•°ï¼Œäººæ°‘å¸æ•° this.state = &#123; transUS:true, USMoney:'0', CHMoney:'0' &#125;; let __this = this; //è¿›è¡Œç¾å…ƒè½¬äººæ°‘å¸æˆ–è€…äººæ°‘å¸è½¬ç¾å…ƒè½¬æ¢æ—¶è°ƒç”¨ this.change = function()&#123; __this.setState(&#123;transUS:!__this.state.transUS&#125;); &#125;; //æ•°å­—ç±»æŒ‰é’®è¢«ç‚¹å‡»è§¦å‘çš„æ–¹æ³• this.buttonClick = function(count)&#123; var us=__this.state.USMoney,ch=__this.state.CHMoney; if (__this.state.transUS) &#123; if (us=='0') &#123;us=count;&#125;else&#123;us=__this.state.USMoney+count;&#125;; &#125;else&#123; if (ch=='0') &#123;ch=count;&#125;else&#123;ch=__this.state.CHMoney+count;&#125;; &#125;; __this.setState(&#123; USMoney:us, CHMoney:ch &#125;); &#125;; //æ¸…é™¤æŒ‰é’®è¢«ç‚¹å‡»è§¦å‘çš„æ–¹æ³• this.clear = function()&#123; __this.setState(&#123; USMoney:'0', CHMoney:'0' &#125;); &#125;; //å›é€€æŒ‰é’®è¢«ç‚¹å‡»è§¦å‘çš„æ–¹æ³• this.delete = function()&#123; if (__this.state.transUS) &#123; if (__this.state.USMoney.length&gt;1) &#123; let newUS = __this.state.USMoney.substring(0,__this.state.USMoney.length-1); __this.setState(&#123;USMoney:newUS&#125;); &#125;else if(__this.state.USMoney&gt;'0')&#123; __this.setState(&#123;USMoney:'0'&#125;); &#125; &#125;else&#123; if (__this.state.CHMoney.length&gt;1) &#123; let newCH = __this.state.CHMoney.substring(0,__this.state.CHMoney.length-1); __this.setState(&#123;CHMoney:newCH&#125;); &#125;else if(__this.state.CHMoney&gt;'0')&#123; __this.setState(&#123;CHMoney:'0'&#125;); &#125; &#125; &#125;; //å‡å·è§¦å‘çš„æ–¹æ³• this.sub = function()&#123; if (__this.state.transUS) &#123; if(__this.state.USMoney&gt;'0')&#123; let newUS = (parseInt(__this.state.USMoney)-1).toString(); __this.setState(&#123;USMoney:newUS&#125;); &#125; &#125;else&#123; if(__this.state.CHMoney&gt;'0')&#123; let newCH = (parseInt(__this.state.CHMoney)-1).toString(); __this.setState(&#123;CHMoney:newCH&#125;); &#125; &#125; &#125;; //åŠ å·è§¦å‘çš„æ–¹æ³• this.add = function()&#123; if (__this.state.transUS) &#123; let newUS = (parseFloat(__this.state.USMoney)+1).toString(); __this.setState(&#123;USMoney:newUS&#125;); &#125;else&#123; let newCH = (parseFloat(__this.state.CHMoney)+1).toString(); __this.setState(&#123;CHMoney:newCH&#125;); &#125; &#125;; //è¿›è¡Œæ±‡ç‡è½¬æ¢ this.trans = function()&#123; if (__this.state.transUS) &#123; let us = parseFloat(__this.state.USMoney); __this.setState(&#123;CHMoney:(us*6.7).toFixed(2).toString()&#125;); &#125;else&#123; let ch = parseFloat(__this.state.CHMoney); __this.setState(&#123;USMoney:(ch/6.7).toFixed(2).toString()&#125;); &#125; &#125; &#125; render()&#123; let transText = this.state.transUS?\"ä»ç¾å…ƒ\":\"ä»äººæ°‘å¸\"; let transToText = this.state.transUS?\"åˆ°äººæ°‘å¸\":\"åˆ°ç¾å…ƒ\"; let topText = this.state.transUS?this.state.USMoney+'$':this.state.CHMoney+'ï¿¥'; let bottomText = this.state.transUS?this.state.CHMoney+'ï¿¥':this.state.USMoney+'$'; return( &lt;View style=&#123;mainViewStyles.screenView&#125;&gt; &lt;Text style=&#123;&#123; color:'white', textAlign:'right', marginRight:20, marginTop:20, fontSize:17 &#125;&#125;&gt;&#123;transText&#125;&lt;/Text&gt; &lt;Text style=&#123;&#123; color:'white', textAlign:'right', fontSize:37, marginRight:20, &#125;&#125;&gt;&#123;topText&#125;&lt;/Text&gt; &lt;View style=&#123;&#123; flexDirection:'row', zIndex:100, marginTop:-7.5 &#125;&#125;&gt; &lt;TouchableHighlight underlayColor='#f06d30' style=&#123;&#123; left:50, marginTop:0, &#125;&#125; onPress=&#123;this.change&#125;&gt; &lt;Image source=&#123;require('../image/exchange.png')&#125;/&gt; &lt;/TouchableHighlight&gt; &lt;View style=&#123;&#123; marginLeft:70, height:1, backgroundColor:'white', marginTop:10, flex:1 &#125;&#125;&gt;&lt;/View&gt; &lt;/View&gt; &lt;Text style=&#123;&#123; marginTop:10, color:'white', textAlign:'right', fontSize:17, marginRight:20, marginTop:-3, zIndex:99 &#125;&#125;&gt;&#123;transToText&#125;&lt;/Text&gt; &lt;Text style=&#123;&#123; color:'white', textAlign:'right', fontSize:37, marginRight:20 &#125;&#125;&gt;&#123;bottomText&#125;&lt;/Text&gt; &lt;/View&gt; ); &#125;&#125; å°è£…å¥½äº†é”®ç›˜ä¸æ˜¾ç¤ºå±ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶è”åŠ¨ç»“åˆèµ·æ¥ï¼Œåœ¨Viewæ–‡ä»¶å¤¹ä¸‹å†åˆ›å»ºä¸€ä¸ªMainView.jsæ–‡ä»¶ï¼Œå®ç°å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546import React, &#123; Component &#125; from 'react';import &#123; View, Text, StyleSheet &#125; from 'react-native';import KeyboardView from './KeyboardView';import mainViewStyles from '../const/Const';import ScreenView from './ScreenView';// æ±‡ç‡æ¢ç®—å™¨ä¸»ç•Œé¢è§†å›¾export default class MainView extends Component &#123; constructor(props) &#123; super(props); this.state = &#123;&#125;; &#125; render() &#123; let __this = this; return ( &lt;View style=&#123;mainViewStyles.container&#125;&gt; &lt;ScreenView ref=\"screenView\"/&gt; &lt;KeyboardView buttonPress=&#123;function(title)&#123; __this.buttonPress(title); &#125;&#125;/&gt; &lt;/View&gt; ) &#125; buttonPress(title)&#123; //æ ¹æ®æŒ‰é”®ç±»å‹è¿›è¡Œç›¸å…³åŠŸèƒ½è°ƒç”¨ if (title=='åˆ ') &#123; this.refs.screenView.delete(); &#125;else if(title=='C')&#123; this.refs.screenView.clear(); &#125;else if(title=='-')&#123; this.refs.screenView.sub(); &#125;else if(title=='+')&#123; this.refs.screenView.add(); &#125;else if(title=='=')&#123; this.refs.screenView.trans(); &#125;else&#123; this.refs.screenView.buttonClick(title); &#125; &#125;&#125; åˆ°æ­¤ï¼ŒReactNativeåº”ç”¨æ±‡ç‡è½¬æ¢å™¨çš„æ ¸å¿ƒåŠŸèƒ½å·²ç»å…¨éƒ¨å®Œæˆäº†ï¼Œæ­¤åº”ç”¨åªæœ‰ä¸€ä¸ªç•Œé¢ï¼Œå…¶å®æˆ‘ä»¬å·²ç»å¯ä»¥ç›´æ¥å°†MainViewç»„å»ºæ³¨å†Œä¸ºé¡¹ç›®çš„æ ¹ç»„å»ºï¼Œä½†æ˜¯å¦‚æœæ˜¯å¤šç•Œé¢çš„åº”ç”¨ï¼Œæˆ‘ä»¬æœ€å¥½å†ä½¿ç”¨Controllerå°†å…¶è¿›è¡Œå°è£…ï¼Œåœ¨Controlleræ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ªMainViewController.jsæ–‡ä»¶ï¼Œä¸ºå…¶æä¾›ä¸€ä¸ªview()æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š 1234567891011import React, &#123; Component &#125; from 'react';import &#123; AppRegistry, Text &#125; from 'react-native';import MainView from '../View/MainView';export class MainViewController&#123; view()&#123; return( &lt;MainView /&gt; ); &#125;&#125; ä¿®æ”¹index.ios.jsä¸index.android.jsæ–‡ä»¶å¦‚ä¸‹ï¼š 1234567891011121314151617import React, &#123; Component &#125; from 'react';import &#123; AppRegistry, Text&#125; from 'react-native';import &#123; MainViewController&#125; from './Controller/MainViewController';class News extends Component &#123; render() &#123; let controller = new MainViewController(); return controller.view(); &#125;&#125;AppRegistry.registerComponent('News', () =&gt; News); è¿è¡Œé¡¹ç›®ï¼Œæ•ˆæœå¦‚ä¸‹å›¾ï¼š iOSï¼š androidï¼š æœ¬é¡¹ç›®çš„å®Œæ•´ä»£ç githubåœ°å€å¦‚ä¸‹ï¼š https://github.com/ZYHshao/ReactNative-ExchangeRateã€‚ ReactNativeå…´è¶£ç¾¤ï¼š605794212ï¼Œæ¬¢è¿äº¤æµå­¦ä¹ ã€‚","categories":[{"name":"ReactNative","slug":"ReactNative","permalink":"http://huishao.cc/categories/ReactNative/"}],"tags":[],"keywords":[{"name":"ReactNative","slug":"ReactNative","permalink":"http://huishao.cc/categories/ReactNative/"}]},{"title":"ReactNativeå¼€å‘ç¯å¢ƒçš„æ­å»ºä¸å¼€å‘å‰å‡†å¤‡","slug":"288ReactNativeå¼€å‘ç¯å¢ƒçš„æ­å»ºä¸å¼€å‘å‰å‡†å¤‡","date":"2016-12-22T16:00:00.000Z","updated":"2021-07-13T10:50:33.404Z","comments":true,"path":"2016/12/23/288ReactNativeå¼€å‘ç¯å¢ƒçš„æ­å»ºä¸å¼€å‘å‰å‡†å¤‡/","link":"","permalink":"http://huishao.cc/2016/12/23/288ReactNativeå¼€å‘ç¯å¢ƒçš„æ­å»ºä¸å¼€å‘å‰å‡†å¤‡/","excerpt":"","text":"ReactNativeå¼€å‘ç¯å¢ƒçš„æ­å»ºä¸å¼€å‘å‰å‡†å¤‡ä¸€ã€å‡†å¤‡å·¥ä½œåœ¨ReactNativeä¸­æ–‡ç½‘ä¸Šæœ‰è¯¦ç»†çš„å¼€å‘æ–‡æ¡£ä¸æ•™ç¨‹ï¼Œé¦–å…ˆï¼Œæƒ³è¦ç³»ç»Ÿäº†è§£ReactNativeçš„æœ‹å‹å¯ä»¥åœ¨å¦‚ä¸‹ç½‘ç«™ä¸­è·å–è¯¦ç»†ä¿¡æ¯ï¼š http://reactnative.cn/ã€‚ æœ¬ç¯‡åšå®¢è®°å½•æ­å»ºReactNativeå¼€å‘ç¯å¢ƒä¸­çš„ä¸€äº›é—®é¢˜ä¸æ³¨æ„ç‚¹ï¼Œä¹Ÿä»‹ç»åœ¨MacOSç³»ç»Ÿä¸Šæ­å»ºReactNativeå¼€å‘ç¯å¢ƒçš„å…¨è¿‡ç¨‹ä¸ä¸€äº›å°ç»éªŒæŠ€å·§ã€‚ ReactNativeæœ€å¤§çš„é­…åŠ›åœ¨äºå…¶ç¼–å†™çš„ä»£ç å¯ä»¥è·¨å¹³å°åº”ç”¨ï¼Œå› æ­¤æˆ‘æåŠ›æ¨èåœ¨MacOSä¸Šè¿›è¡ŒReactNativeåº”ç”¨çš„å¼€å‘ï¼Œç”±äºXcodeå¼€å‘å·¥å…·åªèƒ½è¿è¡Œä¸MacOSç³»ç»Ÿï¼Œåœ¨Windowsæˆ–Linuxç³»ç»Ÿä¸Šå°†æ— æ³•è¿›è¡ŒiOSå¹³å°çš„è°ƒè¯•ï¼Œå› æ­¤æœ¬ç¯‡åšå®¢ä¹Ÿå°†åŸºäºMacOSç³»ç»Ÿè¿›è¡Œæ¼”ç¤ºã€‚ åœ¨ReactNativeç¯å¢ƒä¹‹å‰ï¼Œå¼€å‘è€…éœ€è¦å…ˆå®‰è£…ä¸€äº›å°å·¥å…·ï¼Œé¦–å…ˆéœ€è¦å®‰å“Homebrewå·¥å…·ï¼ŒHomebrewå·¥å…·æ˜¯Macç³»ç»Ÿçš„åŒ…ç®¡ç†å™¨ï¼Œåœ¨ç»ˆç«¯è¿è¡Œå¦‚ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…ï¼š 1/usr/bin/ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot; å®‰è£…å®Œæˆåï¼Œå¯ä»¥ä½¿ç”¨brew -vå‘½ä»¤æ£€æŸ¥Homebrewç‰ˆæœ¬ï¼Œæ­£å¸¸è¾“å‡ºç‰ˆæœ¬å·è¯´æ˜å®‰è£…æˆåŠŸï¼š åœ¨å®‰è£…è¿‡ç¨‹ä¸­ï¼Œå¦‚æœé‡åˆ°æƒé™é—®é¢˜ï¼Œéœ€è¦ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è¿›è¡Œä¿®å¤ï¼š 1sudo chown -R `whoami` /usr/local å®‰è£…å®ŒæˆHomebrewåï¼Œéœ€è¦ä½¿ç”¨å…¶æ¥è¿›è¡ŒNodeç¯å¢ƒçš„å®‰è£…ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š å®‰è£…å®Œæˆåï¼ŒåŒæ ·å¯ä»¥ä½¿ç”¨node -vå‘½ä»¤æ¥æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸï¼š è™½ç„¶Yarnæ˜¯facebookæä¾›çš„ä»£æ›¿npmçš„åŒ…ç®¡ç†å·¥å…·ï¼Œä½†æˆ‘ä¸ªäººæ›´å€¾å‘ä½¿ç”¨npmæ¥è¿›è¡ŒReactNativeåŒ…çš„å®‰è£…ï¼Œåœ¨ä½¿ç”¨ä¹‹å‰ï¼Œå¯ä»¥é€šè¿‡æ›¿æ¢æºé•œåƒçš„æ–¹å¼æ¥è¿›è¡Œnpmçš„åŠ é€Ÿ(åœ¨æ— æ³•ç§‘å­¦ä¸Šç½‘çš„å‰æä¸‹): 12npm config set registry https://registry.npm.taobao.org --globalnpm config set disturl https://npm.taobao.org/dist --global ä¹‹åä½¿ç”¨npm config get registryæ¥æ£€æŸ¥æºé•œåƒçš„æ›¿æ¢æ˜¯å¦æˆåŠŸï¼š ä¹‹åæˆ‘ä»¬éœ€è¦å®‰è£…ReactNativeçš„å‘½ä»¤è¡Œå·¥å…·react-natice-cliã€‚è¿™ä¸ªå·¥å…·ç”¨æ¥åˆå§‹åŒ–ReactNativeé¡¹ç›®ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š 1npm install -g react-native-cli ä½¿ç”¨react-native -vå‘½ä»¤æ¥æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸï¼š åˆ°æ­¤ï¼ŒReactNativeçš„åŸºç¡€ç¯å¢ƒå·²ç»æ­å»ºå®Œæˆäº†ï¼Œä¸‹é¢éœ€è¦é…ç½®iOSä¸Androidå¼€å‘å·¥å…·ã€‚ äºŒã€Xcodeä¸Android Studioé…ç½®XcodeåŸºæœ¬æ— éœ€è¿›è¡Œé¢å¤–çš„é…ç½®ï¼Œä½ åªéœ€è¦ä»AppStoreä¸Šä¸‹è½½ä¸‹æ¥æœ€æ–°ç‰ˆæœ¬çš„Xcodeå¼€å‘å·¥å…·å®‰è£…å®Œæˆå³å¯ï¼ŒXcodeä¼šæ‰“åŒ…å®‰è£…å‘½ä»¤è¡Œå·¥å…·ï¼Œgitå·¥å…·å’Œæ‰€éœ€è¦çš„æ¨¡æ‹Ÿå™¨ã€‚ å¯¹äºAndroidå¼€å‘ç¯å¢ƒï¼Œé¦–å…ˆä½ éœ€è¦ä¿è¯ä½ çš„Android Studioå·¥å…·ç‰ˆæœ¬åœ¨2.0ä»¥ä¸Šå¹¶ä¸”Javaç‰ˆæœ¬è¦åœ¨1.8ä»¥ä¸Šï¼Œjavac -versionå‘½ä»¤å¯ä»¥æŸ¥çœ‹å½“å‰çš„JDKç‰ˆæœ¬ï¼Œå¦‚æœä½äº1.8ï¼Œå¯ä»¥åˆ°å®˜ç½‘ä¸‹è½½ï¼š å®˜ç½‘ï¼šhttp://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.htmlã€‚ ä¸‹è½½å®‰è£…å®ŒæˆAndroid Studioåï¼Œé¦–å…ˆéœ€è¦å¯¹SDKè¿›è¡Œç›¸åº”é…ç½®ï¼Œæ‰“å¼€Android Studioï¼Œæ‰“å¼€æ¬¢è¿ç•Œé¢çš„SDK Managerï¼Œå¦‚ä¸‹å›¾ï¼š é€‰ä¸­å…¶ä¸­çš„SDK Platformsï¼Œå‹¾é€‰Show Package Detailsã€‚æˆ‘é€‰æ‹©Android6.0ç›¸å…³çš„SDKè¿›è¡Œå®‰è£…ï¼ŒAndroid SDK Platform 23,Intel x86 Atom_64 System Imageä¸ºå¿…é€‰ï¼Œ å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜éœ€è¦å®‰è£…SDK Toolsï¼Œå¿…é¡»å®‰è£…å…¶ä¸­çš„23.0.1ç‰ˆæœ¬ï¼Œåˆ‡è®°ï¼Œè¿™æ˜¯å¿…é¡»ï¼å¦‚ä¸‹å›¾ï¼š ä¹‹åéšä¾¿ä½¿ç”¨Android Studioåˆ›å»ºä¸€ä¸ªé¡¹ç›®ï¼Œæ‰“å¼€å…¶ä¸­çš„AVD Managerï¼Œå¦‚ä¸‹ï¼š AVD Managerç”¨æ¥ç®¡ç†Androidæ¨¡æ‹Ÿå™¨ï¼Œå¦‚æœä»¥åæ¨¡æ‹Ÿå™¨ï¼Œå¯ä»¥ç‚¹å‡»è¿è¡ŒæŒ‰é’®å¼€è¿è¡Œæ¨¡æ‹Ÿå™¨ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªæ¨¡æ‹Ÿå™¨ï¼Œå¦‚ä¸‹å›¾ï¼š åšå®Œä¸Šè¿°æ­¥éª¤åï¼Œåˆ‡è®°è¦é…ç½®Android SDKçš„ç¯å¢ƒå˜é‡ï¼Œåœ¨ç»ˆç«¯ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è¿›è¡Œç¯å¢ƒå˜é‡æ–‡ä»¶çš„ç¼–è¾‘ï¼š 1sudo vi ~/.bash_profile åœ¨æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹è·¯å¾„ï¼š 1export ANDROID_HOME=~/Library/Android/sdk ä¹‹ååœ¨ç»ˆç«¯æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤æ¥ä½¿è®¾ç½®ç”Ÿæ•ˆï¼š 1source ~/.bash_profile å¯ä»¥ä½¿ç”¨echo $ANDROID_HOMEå‘½ä»¤æ¥æ£€æŸ¥ç¯å¢ƒå˜é‡çš„é…ç½®æ˜¯å¦æ­£ç¡®ï¼Œå¦‚ä¸‹ï¼š ä¸‰ã€è¿è¡Œç¬¬ä¸€ä¸ªé¡¹ç›®HelloWorldå¦‚æœä¸Šé¢çš„ç¯å¢ƒé…ç½®å’Œå¼€å‘å·¥å…·çš„é…ç½®éƒ½å·²é¡ºåˆ©å®Œæˆï¼Œé‚£ä¹ˆä½ ç¦»ç¬¬ä¸€ä¸ªReactNativeé¡¹ç›®å·²ç»ä¸è¿œäº†ï¼Œä¸‹é¢æˆ‘ä»¬æ¥é€šè¿‡ReactNativeåˆ›å»ºHelloWorldé¡¹ç›®ã€‚ åœ¨ç»ˆç«¯è¿è¡Œreact-native init HelloWorldå‘½ä»¤æ¥åˆ›å»ºReactNativeé¡¹ç›®ï¼Œè¿™ä¸ªå‘½ä»¤æ˜¯ä¸€ä¸ªä¸€ç«™å¼é›†æˆå‘½ä»¤ï¼Œå…¶ä¼šåˆ›å»ºé¡¹ç›®å¹¶ä¸”å°†æ‰€æœ‰ä¾èµ–åŒ…éƒ½å®‰è£…å®Œæˆã€‚å‘½ä»¤æˆåŠŸæ‰§è¡Œåï¼Œè¿›å…¥åˆ°é¡¹ç›®æ ¹ç›®å½•ä¸­ï¼Œå¦‚ä¸‹ï¼š ä½¿ç”¨react-native run-iosæˆ–è€…react-native run-androidæ¥è¿›è¡ŒiOSé¡¹ç›®æˆ–è€…Androidé¡¹ç›®çš„è¿è¡Œï¼Œå¦‚æœä½ çœ‹åˆ°å¦‚ä¸‹å›¾æ‰€ç¤ºçš„ç•Œé¢ï¼Œæ­å–œä½ ï¼Œä½ çš„ReactNativeé¡¹ç›®å·²ç»å¯ä»¥è·‘èµ·æ¥äº†(éœ€è¦æ³¨æ„ï¼šè¿è¡Œå®‰å“é¡¹ç›®çš„æ—¶å€™ï¼Œå®‰å“æ¨¡æ‹Ÿå™¨å¿…é¡»å…ˆå¯åŠ¨)ï¼š éœ€è¦æ³¨æ„ï¼Œè¿è¡ŒiOSé¡¹ç›®æ—¶ï¼Œä¼šé»˜è®¤å¯åŠ¨Xcodeçš„é»˜è®¤æ¨¡æ‹Ÿå™¨ï¼Œå¦‚æœè¦å¯åŠ¨ç‰¹å®šçš„æ¨¡æ‹Ÿå™¨ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š 1react-native run-ios --simulator &quot;iPhone SE&quot; xcrun simctl list deviceså‘½ä»¤å¯ä»¥æ‰“å°å‡ºæ‰€æœ‰å¯ç”¨çš„iOSæ¨¡æ‹Ÿå™¨ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š è§‚å¯ŸHelloWorldé¡¹ç›®ç»“æ„ï¼Œå…¶ç›®å½•å¦‚ä¸‹å›¾ï¼š å…¶ä¸­node_modulesä¸ºnodeä¾èµ–åŒ…çš„ç›®å½•ï¼Œandoridæ–‡ä»¶å¤¹ä¸ºå®‰å“é¡¹ç›®ç›®å½•ï¼Œiosæ–‡ä»¶å¤¹ä¸ºiOSé¡¹ç›®ç›®å½•ã€‚index.android.jsä¸index.ios.jsä¸¤ä¸ªæ–‡ä»¶æ˜¯æœ€ä¸ºé‡è¦çš„ä¸¤ä¸ªæ–‡ä»¶ï¼Œè¿™ä¸¤ä¸ªæ–‡ä»¶æ˜¯iOSé¡¹ç›®ä¸Androidé¡¹ç›®çš„å…¥å£æ–‡ä»¶ï¼Œæ‰“å¼€index.ios.jsæ–‡ä»¶ï¼Œå°†å…¶ä¸­çš„ä»£ç ä¿®æ”¹å¦‚ä¸‹ï¼š 123456789101112131415161718192021import React, &#123; Component &#125; from 'react';import &#123; AppRegistry, StyleSheet, Text, View&#125; from 'react-native';export default class HelloWorld extends Component &#123; render() &#123; return ( &lt;Text style=&#123;&#123; flex:1, top:100, left:100, fontSize:30 &#125;&#125;&gt;HelloWorld&lt;/Text&gt; ); &#125;&#125;AppRegistry.registerComponent('HelloWorld', () =&gt; HelloWorld); ä¸Šé¢çš„ä»£ç å°±æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„é¡¹ç›®HelloWorldï¼Œåœ¨iOSæ¨¡æ‹Ÿå™¨ä¸­ä½¿ç”¨command+Ræ¥è¿›è¡Œç•Œé¢çš„åˆ·æ–°ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š åœ¨å®‰å“æ¨¡æ‹Ÿå™¨ä¸­åŒå‡»Ré”®æ¥è¿›è¡Œç•Œé¢çš„åˆ·æ–°ã€‚ æç¤ºï¼šå¦‚æœåœ¨iOSæ¨¡æ‹Ÿå™¨ä¸­ä½¿ç”¨command+Ræ— æ•ˆï¼Œéœ€è¦å°†æ¨¡æ‹Ÿå™¨çš„Connect Hardware Keyboardè¿›è¡Œå‹¾é€‰ï¼Œå¦‚ä¸‹ï¼š å››ã€ReactNativeå¼€å‘å·¥å…·çš„é€‰æ‹©facebookæä¾›äº†ä¸€ä¸ªå«åšNuclideçš„å·¥å…·ä¸“é—¨å¼€å‘ReactNativeåº”ç”¨ï¼Œå…¶å®ä¸€ä¸ªåŸºäºatomçš„é›†æˆå¼€å‘ç¯å¢ƒï¼Œä½†æ˜¯æˆ‘ä¸ªäººæ›´å–œæ¬¢ä½¿ç”¨SublimeTextæ¥è¿›è¡ŒReactNativeåº”ç”¨çš„å¼€å‘ã€‚é€šè¿‡å®‰è£…ç›¸åº”çš„æ’ä»¶ï¼ŒSublimeTextæ¥ç¼–å†™ReactNativeåº”ç”¨å°†ååˆ†ç•…å¿«ã€‚ é¦–å…ˆä¸‹è½½SublineTextç¼–è¾‘å·¥å…·ï¼Œå¯ä»¥åœ¨å®˜ç½‘è¿›è¡Œä¸‹è½½ï¼š http://www.sublimetext.com/ã€‚ åœ¨å¯¹SublimeTextè¿›è¡Œæ’ä»¶å®‰è£…å‰ï¼Œéœ€è¦å…ˆä¸ºå…¶å®‰è£…åŒ…ç®¡ç†å·¥å…·PackageControlã€‚åœ¨SublimeTextå·¥å…·çš„å¯¼èˆªä¸­é€‰æ‹©Viewä¸‹çš„Show Consoleæ¥æ‰“å¼€å‘½ä»¤è¡Œï¼Œå¦‚ä¸‹ï¼š åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥å¦‚ä¸‹ä»£ç è¿›è¡Œï¼Œæ•²å‡»å›è½¦è¿›è¡Œå®‰è£…ï¼š SublimeText2ï¼š 1import urllib2,os; pf='Package Control.sublime-package'; ipp = sublime.installed_packages_path(); os.makedirs( ipp ) if not os.path.exists(ipp) else None; urllib2.install_opener( urllib2.build_opener( urllib2.ProxyHandler( ))); open( os.path.join( ipp, pf), 'wb' ).write( urllib2.urlopen( 'http://sublime.wbond.net/' +pf.replace( ' ','%20' )).read()); print( 'Please restart Sublime Text to finish installation') SublimeText3: 1import urllib.request,os; pf = 'Package Control.sublime-package'; ipp = sublime.installed_packages_path(); urllib.request.install_opener( urllib.request.build_opener( urllib.request.ProxyHandler()) ); open(os.path.join(ipp, pf), 'wb').write(urllib.request.urlopen( 'http://sublime.wbond.net/' + pf.replace(' ','%20')).read()) ç”±äºç½‘ç»œç­‰å¤šç§åŸå› ï¼Œä¸Šé¢ä½¿ç”¨ä»£ç å®‰è£…PackageControlçš„æ–¹æ³•å¾ˆå¤§å¯èƒ½ä¼šå¤±è´¥ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä»å®˜ç½‘ä¸‹è½½å®‰è£…åŒ…ï¼Œå°†å…¶æ”¾åœ¨SublimeTextçš„åŒ…å®‰è£…ç›®å½•ä¸­ï¼Œé‡å¯SublimeTextæ¥è¿›è¡Œå®‰è£…ï¼Œç‚¹å‡»SublimeTextçš„Preferences-&gt;Browse Packagesé€‰é¡¹å¯ä»¥æµè§ˆSublimeTextçš„åŒ…ç›®å½•ï¼š å°†ä¸‹è½½å¥½çš„PackageControlå®‰è£…åŒ…æ”¾å…¥Installed Packageç›®å½•ä¸­é‡å¯å³å¯ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªç›®å½•ï¼Œå¯ä»¥æ‰‹åŠ¨åˆ›å»ºï¼š PackageControlçš„å®˜æ–¹ä¸‹è½½åœ°å€ä¸ºï¼šhttp://sublime.wbond.net/Package%20Control.sublime-packageã€‚ æ¸©é¦¨æç¤ºï¼šPackageControlçš„å®˜æ–¹ä¸‹è½½åœ°å€è®¿é—®èµ·æ¥ä¹Ÿæœ‰ä¸€å®šéš¾åº¦ï¼Œæˆ‘å°†è¿™ä¸ªå®‰è£…åŒ…æ”¾åœ¨äº†æˆ‘çš„githubä¸Šä¸€ä»½ï¼Œå¦‚æœéœ€è¦ï¼Œå¯ä»¥ä»ä¸‹é¢çš„åœ°å€ä¸‹è½½ï¼š http://zyhshao.github.io/file/Package%20Control.sublime-packageã€‚ å®‰è£…å®ŒæˆPackageControlå·¥å…·åï¼Œå³å¯ä½¿ç”¨å…¶æ¥è¿›è¡ŒSublimeTextæ’ä»¶çš„å®‰è£…ã€‚ åœ¨SublimeTextä¸­é€‰æ‹©Preferences-&gt;PackageControlå³å¯è°ƒå‡ºPackageControlå‘½ä»¤é¢æ¿ï¼Œå¦‚ä¸‹ï¼š PackageControlä¸­æä¾›äº†è®¸å¤šå®ç”¨çš„æ–¹æ³•ï¼Œä¾‹å¦‚install Packageç”¨æ¥å®‰è£…æ’ä»¶ï¼ŒList Packagesç”¨æ¥æŸ¥çœ‹å·²ç»å®‰è£…è¿‡çš„æ’ä»¶ï¼ŒRemove Packageç”¨æ¥åˆ é™¤ä¸€ä¸ªå·²ç»å®‰è£…çš„æ’ä»¶ç­‰ï¼Œå¦‚ä¸‹ï¼š ç‚¹å‡»Install Packageè¿›å…¥SublimeTextæ’ä»¶çš„æœç´¢ç•Œé¢ï¼Œæœç´¢åˆ°æ‰€éœ€è¦å®‰è£…çš„æ’ä»¶å®‰è£…å³å¯ï¼Œå¦‚ä¸‹ï¼š æ¸©é¦¨æç¤ºï¼šåœ¨ä½¿ç”¨PackageContrlçš„Install Packageå‘½ä»¤æ—¶ï¼Œå¾ˆæœ‰å¯èƒ½ä¼šå‡ºç°è¶…æ—¶é—®é¢˜ï¼ŒåŸå› æ˜¯PackageControléœ€è¦æ‹‰å–ä¸€ä¸ªchannelsæ–‡ä»¶åˆ—è¡¨ï¼Œè€Œè¿™ä¸ªæ–‡ä»¶åœ¨å›½å†…å¾€å¾€éš¾ä»¥è®¿é—®åˆ°ï¼Œæˆ‘ä¹Ÿåœ¨æˆ‘çš„githubä¸Šå­˜æ”¾äº†ä¸€ä»½å¤‡ä»½ï¼Œéœ€è¦å°†PackageControlçš„channelsæ‹‰å–è·¯å¾„åšä¸‹ä¿®æ”¹ï¼Œé€‰æ‹©SublimeTextçš„Preferences-&gt;PackageSettings-&gt;PackageControl-&gt;Settings-Defaulté€‰é¡¹ï¼Œå¦‚ä¸‹ï¼š å°†å…¶ä¸­çš„channelså‚æ•°ä¿®æ”¹å¦‚ä¸‹å³å¯ï¼š 123&quot;channels&quot;: [ &quot;http://zyhshao.github.io/file/channel_v3.json&quot;], äº”ã€æ¨èå‡ ä¸ªç¼–å†™ReactNativeå¥½ç”¨çš„SublimeTextæ’ä»¶æ’ä»¶ä¸€ï¼šEmmetEmmetæ’ä»¶æ˜¯å‰ç«¯ç¥å™¨ï¼Œå…¶æä¾›äº†jsçš„è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½ï¼Œä½¿ç”¨PackageControlæœç´¢å®‰è£…emmetæ’ä»¶åï¼Œæ‰“å¼€SublimeTextä¸­çš„Preferences-&gt;Package Settings-&gt;Emmet-&gt;Key Bindings-Userï¼Œå°†å…¶æ–‡ä»¶ä¿®æ”¹ä¸ºå¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344[&#123; \"keys\": [\"tab\"], \"command\": \"expand_abbreviation_by_tab\", // put comma-separated syntax selectors for which // you want to expandEmmet abbreviations into \"operand\" key // instead of SCOPE_SELECTOR. // Examples: source.js, text.html - source \"context\": [&#123; \"operand\": \"source.js\", \"operator\": \"equal\", \"match_all\": true, \"key\": \"selector\" &#125;, // run only if there's no selected text &#123; \"match_all\": true, \"key\": \"selection_empty\" &#125;, // don't work if there are active tabstops &#123; \"operator\": \"equal\", \"operand\": false, \"match_all\": true, \"key\": \"has_next_field\" &#125;, // don't work if completion popup is visible and you // want to insert completion with Tab. If you want to // expand Emmet with Tab even if popup is visible -- // remove this section &#123; \"operand\": false, \"operator\": \"equal\", \"match_all\": true, \"key\": \"auto_complete_visible\" &#125;, &#123; \"match_all\": true, \"key\": \"is_abbreviation\" &#125; ]&#125;] æ’ä»¶äºŒï¼šjsformatjsformatæ’ä»¶å¯ä»¥è¿›è¡Œjsä»£ç çš„æ ¼å¼åŒ–ï¼Œä½¿ç”¨PackageControlå®‰è£…å®Œæˆåï¼Œé€‰ä¸­jsä»£ç ï¼Œä½¿ç”¨control+option+få³å¯è¿›è¡Œä»£ç çš„æ ¼å¼åŒ–æ“ä½œã€‚ æ’ä»¶ä¸‰ï¼šReactJSReactJSæ’ä»¶æ”¯æŒå¯¹Reactä»£ç è¿›è¡Œé«˜äº®ï¼Œå¹¶ä¸”æ”¯æŒå¿«æ·åˆ›å»ºå‡½æ•°ï¼ŒåŸå‹ç­‰æ“ä½œï¼Œç†Ÿç»ƒä½¿ç”¨å¯ä»¥å¤§å¤§æé«˜å¼€å‘æ•ˆç‡ï¼Œå…¶ç”¨æ³•githubå¦‚ä¸‹ï¼š https://github.com/facebookarchive/sublime-reactã€‚ æ’ä»¶å››ï¼šTerminalTerminalä¹Ÿæ˜¯SublimeTextå¼€å‘ReactNativeåº”ç”¨ç¥å™¨ï¼Œå®‰è£…å¥½åï¼Œä½¿ç”¨command+shift+Tå¯ä»¥ç›´æ¥åœ¨å½“å‰ç›®å½•æ‰“å¼€ç»ˆç«¯ã€‚ æ’ä»¶äº”ï¼šreact-native-snippetsreact-native-snippetså¯ä»¥å¿«é€Ÿçš„åˆ›å»ºReactNativeç±»ç­‰ä»£ç å—ï¼Œç”¨æ³•githubå¦‚ä¸‹ï¼š https://github.com/Shrugs/react-native-snippetsã€‚ æœ€åï¼Œå†æ¨èä¸€æ¬¾SublimeTextçš®è‚¤Heroï¼Œæˆ‘ä¸ªäººéå¸¸å–œæ¬¢è¿™æ¬¾çš®è‚¤ï¼Œå…¶å®‰è£…ä¸é…ç½®æ–¹æ³•åœ¨å¦‚ä¸‹githubä¸Šæœ‰è¯¦ç»†ä»‹ç»ï¼š https://github.com/nickbalestra/heroã€‚ æ•ˆæœå¦‚ä¸‹ï¼š æœ‰äº†ä¸Šé¢çš„è¿™äº›å·¥å…·ï¼Œæˆ‘ä»¬çš„SublimeTextå°±ç¼–ç¨‹äº†ä¸€æ¬¾å¼ºå¤§ReactNativeå¼€å‘IDEï¼Œå°½æƒ…äº«å—ç•…å¿«ç¼–ç çš„æ„Ÿè§‰å§ï¼ åˆ°æ­¤ä¸ºæ­¢ï¼Œæœ¬ç¯‡åšå®¢å°†æ‰€æœ‰å¼€å‘ReactNativeåº”ç”¨çš„å‡†å¤‡å·¥ä½œå·²ç»ä»‹ç»å®Œæ¯•ï¼Œåé¢çš„åšå®¢å°†è®°å½•æ‰‹æŠŠæ‰‹å¼€å‘ä¸€æ¬¾ReactNativeåº”ç”¨ç¨‹åºçš„å­¦ä¹ è¿‡ç¨‹ï¼šReactNativeç®€æ˜“æ±‡ç‡æ¢ç®—å™¨ï¼æœŸå¾…ä¸æ‚¨çš„å…±åŒäº¤æµä¸è¿›æ­¥ï¼ ReactNativeå…´è¶£ç¾¤ï¼š605794212ï¼Œæ¬¢è¿äº¤æµå­¦ä¹ ã€‚","categories":[{"name":"ReactNative","slug":"ReactNative","permalink":"http://huishao.cc/categories/ReactNative/"}],"tags":[],"keywords":[{"name":"ReactNative","slug":"ReactNative","permalink":"http://huishao.cc/categories/ReactNative/"}]},{"title":"Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åäº”â€”â€”é¢æ¿ä¸äº•","slug":"287Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åäº”â€”â€”é¢æ¿ä¸äº•","date":"2016-12-21T16:00:00.000Z","updated":"2021-07-13T09:56:41.872Z","comments":true,"path":"2016/12/22/287Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åäº”â€”â€”é¢æ¿ä¸äº•/","link":"","permalink":"http://huishao.cc/2016/12/22/287Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åäº”â€”â€”é¢æ¿ä¸äº•/","excerpt":"","text":"Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åäº”â€”â€”é¢æ¿ä¸äº•Bootstrapä¸­çš„é¢æ¿ç”±pannelç›¸å…³ç±»æ¥åˆ›å»ºï¼Œä¸€ä¸ªå®Œæ•´çš„é¢æ¿åˆ†ä¸ºé¢æ¿å¤´éƒ¨ã€é¢æ¿ä½“å’Œé¢æ¿æ³¨è„šï¼Œå¹¶ä¸”Bootstrapä¸­é»˜è®¤å®šä¹‰äº†ä¸€äº›é¢æ¿é£æ ¼ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667&lt;p&gt;æ ‡å‡†æ ·å¼çš„é¢æ¿&lt;/p&gt; &lt;div class=\"panel panel-default\"&gt; &lt;div class=\"panel-heading\"&gt; é¢æ¿æ ‡é¢˜ &lt;/div&gt; &lt;div class=\"panel-body\"&gt; é¢æ¿å†…å®¹......... &lt;/div&gt; &lt;div class=\"panel-footer\"&gt; é¢æ¿æ³¨è„š.......... &lt;/div&gt; &lt;/div&gt; &lt;div class=\"panel panel-primary\"&gt; &lt;div class=\"panel-heading\"&gt; é¢æ¿æ ‡é¢˜ &lt;/div&gt; &lt;div class=\"panel-body\"&gt; é¢æ¿å†…å®¹......... &lt;/div&gt; &lt;div class=\"panel-footer\"&gt; é¢æ¿æ³¨è„š.......... &lt;/div&gt; &lt;/div&gt; &lt;div class=\"panel panel-success\"&gt; &lt;div class=\"panel-heading\"&gt; é¢æ¿æ ‡é¢˜ &lt;/div&gt; &lt;div class=\"panel-body\"&gt; é¢æ¿å†…å®¹......... &lt;/div&gt; &lt;div class=\"panel-footer\"&gt; é¢æ¿æ³¨è„š.......... &lt;/div&gt; &lt;/div&gt; &lt;div class=\"panel panel-info\"&gt; &lt;div class=\"panel-heading\"&gt; é¢æ¿æ ‡é¢˜ &lt;/div&gt; &lt;div class=\"panel-body\"&gt; é¢æ¿å†…å®¹......... &lt;/div&gt; &lt;div class=\"panel-footer\"&gt; é¢æ¿æ³¨è„š.......... &lt;/div&gt; &lt;/div&gt; &lt;div class=\"panel panel-warning\"&gt; &lt;div class=\"panel-heading\"&gt; é¢æ¿æ ‡é¢˜ &lt;/div&gt; &lt;div class=\"panel-body\"&gt; é¢æ¿å†…å®¹......... &lt;/div&gt; &lt;div class=\"panel-footer\"&gt; é¢æ¿æ³¨è„š.......... &lt;/div&gt; &lt;/div&gt; &lt;div class=\"panel panel-danger\"&gt; &lt;div class=\"panel-heading\"&gt; é¢æ¿æ ‡é¢˜ &lt;/div&gt; &lt;div class=\"panel-body\"&gt; é¢æ¿å†…å®¹......... &lt;/div&gt; &lt;div class=\"panel-footer\"&gt; é¢æ¿æ³¨è„š.......... &lt;/div&gt; &lt;/div&gt; æ•ˆæœå¦‚ä¸‹ï¼š é¢æ¿ä¸­ä¹Ÿå¯ä»¥è¿½åŠ åˆ—è¡¨ç»„ï¼Œæ˜¯çš„é¢æ¿æ›´å…·æ‰©å±•æ€§ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415&lt;p&gt;åœ¨é¢æ¿ä¸­è¿½åŠ åˆ—è¡¨ç»„&lt;/p&gt;&lt;div class=\"panel panel-danger\"&gt; &lt;div class=\"panel-heading\"&gt; é¢æ¿æ ‡é¢˜ &lt;/div&gt; &lt;div class=\"panel-body\"&gt; é¢æ¿å†…å®¹......... &lt;/div&gt; &lt;div class=\"list-group\"&gt; &lt;div class=\"list-group-item\"&gt;æ•°æ®&lt;/div&gt; &lt;div class=\"list-group-item\"&gt;æ•°æ®&lt;/div&gt; &lt;div class=\"list-group-item\"&gt;æ•°æ®&lt;/div&gt; &lt;div class=\"list-group-item\"&gt;æ•°æ®&lt;/div&gt; &lt;/div&gt; &lt;/div&gt; æ•ˆæœå¦‚ä¸‹ï¼š Bootstrapä¸­è¿˜å®šä¹‰äº†ä¸€ç§æ ·å¼Wellï¼Œå…¶æ•ˆæœç±»ä¼¼åµŒå…¥ç•Œé¢å†…ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234&lt;p&gt;Wellæ•ˆæœ&lt;/p&gt;&lt;div class=\"well\"&gt; è¿™é‡Œæ˜¯å†…å®¹ï¼ï¼ï¼ï¼ï¼ï¼ï¼&lt;/div&gt; æ•ˆæœå¦‚ä¸‹ï¼š å¦å¤–ï¼Œæœ¬ç¯‡åšå®¢ä¸­æ‰€æœ‰çš„å®ä¾‹ä»£ç åŠæ˜¾ç¤ºæ•ˆæœï¼Œåœ¨å¦‚ä¸‹åœ°å€ä¸­ï¼Œéœ€è¦çš„å¯ä»¥è‡ªè¡Œå¯¹ç…§å­¦ä¹ ã€‚ http://zyhshao.github.io/bootStrapDemo/pannelAndWell.htmlã€‚ å‰ç«¯å­¦ä¹ æ–°äººï¼Œæœ‰å¿—åŒé“åˆçš„æœ‹å‹ï¼Œæ¬¢è¿äº¤æµä¸æŒ‡å¯¼ï¼ŒQQç¾¤:541458536","categories":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}],"tags":[],"keywords":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}]},{"title":"Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åå››â€”â€”åª’ä½“å¯¹è±¡ä¸åˆ—è¡¨ç»„","slug":"286Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åå››â€”â€”åª’ä½“å¯¹è±¡ä¸åˆ—è¡¨ç»„","date":"2016-12-19T16:00:00.000Z","updated":"2021-07-13T09:54:38.816Z","comments":true,"path":"2016/12/20/286Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åå››â€”â€”åª’ä½“å¯¹è±¡ä¸åˆ—è¡¨ç»„/","link":"","permalink":"http://huishao.cc/2016/12/20/286Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åå››â€”â€”åª’ä½“å¯¹è±¡ä¸åˆ—è¡¨ç»„/","excerpt":"","text":"Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åå››â€”â€”åª’ä½“å¯¹è±¡ä¸åˆ—è¡¨ç»„åœ¨ç§»åŠ¨å¼€å‘ä¸­ç»å¸¸ä¼šä½¿ç”¨åˆ°åˆ—è¡¨ï¼Œä½¿ç”¨åª’ä½“å¯¹è±¡å¯ä»¥æ–¹ä¾¿çš„åˆ›å»ºåˆ—è¡¨ä¸­æ¯ä¸€è¡Œå…ƒç´ ï¼Œå¸¸è§„çš„åª’ä½“å¯¹è±¡å®ä¾‹å¦‚ä¸‹ï¼š 12345678910&lt;p&gt;å¸¸è§„çš„åª’ä½“å¯¹è±¡&lt;/p&gt;&lt;div class=\"media\"&gt; &lt;div class=\"media-left\"&gt; &lt;img src=\"image/icon.png\" /&gt; &lt;/div&gt; &lt;div class=\"media-body\"&gt; &lt;h4 class=\"media-heading\"&gt;ç¤¾ç§‘é™¢ï¼šç»æµä¸ä¼šå‘ç”Ÿç¡¬ç€é™† è­¦æƒ•é«˜æˆ¿ä»·å¯¹æ¶ˆè´¹æŒ¤å‡ºæ•ˆåº”&lt;/h4&gt; ä»2010å¹´å¼€å§‹ä¸­å›½ç»æµå¢é€Ÿé€å¹´ä¸‹æ»‘ï¼Œåˆ°2015å¹´ç»æµå¢é€Ÿä¸º6.9%ï¼Œè¿™æ˜¯ä»1990å¹´ä»¥æ¥æœ€ä½çš„å¢é€Ÿï¼Œä¹Ÿæ˜¯ä»æ”¹é©å¼€æ”¾ä»¥æ¥é¦–æ¬¡è¿ç»­å…­å¹´ç»æµå¢é€Ÿä¸‹æ»‘ã€‚ç”±äºä»Šå¹´å‰ä¸‰å­£åº¦ç»æµå¢é€Ÿä¸º6.7%ï¼ŒåŒ—äº¬å¤§å­¦å›½å®¶å‘å±•ç ”ç©¶é™¢åèª‰é™¢é•¿ã€å›½åŠ¡é™¢å‚äº‹æ—æ¯…å¤«åœ¨18æ—¥ä¸¾è¡Œçš„ç¬¬ä¸€å±Šå›½å®¶å‘å±•è®ºå›ä¸Šè¡¨ç¤ºï¼Œ 2016å¹´çš„ç»æµå¢é€Ÿè¿˜ä¼šç»§ç»­ä¸‹è¡Œï¼Œä½äº6.9%ã€‚ &lt;/div&gt; &lt;/div&gt; æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä½¿ç”¨media-middleç±»ä¸media-bottomç±»å¯ä»¥è®¾ç½®åª’ä½“å¯¹è±¡å±…ä¸­æˆ–è€…åº•éƒ¨å¯¹é½ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516171819&lt;p&gt;åª’ä½“å¯¹è±¡å±…ä¸­æ˜¾ç¤º&lt;/p&gt;&lt;div class=\"media\"&gt; &lt;div class=\"media-left media-middle\"&gt; &lt;img src=\"image/icon.png\" /&gt; &lt;/div&gt; &lt;div class=\"media-body\"&gt; &lt;h4 class=\"media-heading\"&gt;ç¤¾ç§‘é™¢ï¼šç»æµä¸ä¼šå‘ç”Ÿç¡¬ç€é™† è­¦æƒ•é«˜æˆ¿ä»·å¯¹æ¶ˆè´¹æŒ¤å‡ºæ•ˆåº”&lt;/h4&gt; ä»2010å¹´å¼€å§‹ä¸­å›½ç»æµå¢é€Ÿé€å¹´ä¸‹æ»‘ï¼Œåˆ°2015å¹´ç»æµå¢é€Ÿä¸º6.9%ï¼Œè¿™æ˜¯ä»1990å¹´ä»¥æ¥æœ€ä½çš„å¢é€Ÿï¼Œä¹Ÿæ˜¯ä»æ”¹é©å¼€æ”¾ä»¥æ¥é¦–æ¬¡è¿ç»­å…­å¹´ç»æµå¢é€Ÿä¸‹æ»‘ã€‚ç”±äºä»Šå¹´å‰ä¸‰å­£åº¦ç»æµå¢é€Ÿä¸º6.7%ï¼ŒåŒ—äº¬å¤§å­¦å›½å®¶å‘å±•ç ”ç©¶é™¢åèª‰é™¢é•¿ã€å›½åŠ¡é™¢å‚äº‹æ—æ¯…å¤«åœ¨18æ—¥ä¸¾è¡Œçš„ç¬¬ä¸€å±Šå›½å®¶å‘å±•è®ºå›ä¸Šè¡¨ç¤ºï¼Œ 2016å¹´çš„ç»æµå¢é€Ÿè¿˜ä¼šç»§ç»­ä¸‹è¡Œï¼Œä½äº6.9%ã€‚ &lt;/div&gt;&lt;/div&gt;&lt;br /&gt;&lt;p&gt;åª’ä½“å¯¹è±¡åº•éƒ¨å¯¹é½&lt;/p&gt;&lt;div class=\"media\"&gt; &lt;div class=\"media-left media-bottom\"&gt; &lt;img src=\"image/icon.png\" /&gt; &lt;/div&gt; &lt;div class=\"media-body\"&gt; &lt;h4 class=\"media-heading\"&gt;ç¤¾ç§‘é™¢ï¼šç»æµä¸ä¼šå‘ç”Ÿç¡¬ç€é™† è­¦æƒ•é«˜æˆ¿ä»·å¯¹æ¶ˆè´¹æŒ¤å‡ºæ•ˆåº”&lt;/h4&gt; ä»2010å¹´å¼€å§‹ä¸­å›½ç»æµå¢é€Ÿé€å¹´ä¸‹æ»‘ï¼Œåˆ°2015å¹´ç»æµå¢é€Ÿä¸º6.9%ï¼Œè¿™æ˜¯ä»1990å¹´ä»¥æ¥æœ€ä½çš„å¢é€Ÿï¼Œä¹Ÿæ˜¯ä»æ”¹é©å¼€æ”¾ä»¥æ¥é¦–æ¬¡è¿ç»­å…­å¹´ç»æµå¢é€Ÿä¸‹æ»‘ã€‚ç”±äºä»Šå¹´å‰ä¸‰å­£åº¦ç»æµå¢é€Ÿä¸º6.7%ï¼ŒåŒ—äº¬å¤§å­¦å›½å®¶å‘å±•ç ”ç©¶é™¢åèª‰é™¢é•¿ã€å›½åŠ¡é™¢å‚äº‹æ—æ¯…å¤«åœ¨18æ—¥ä¸¾è¡Œçš„ç¬¬ä¸€å±Šå›½å®¶å‘å±•è®ºå›ä¸Šè¡¨ç¤ºï¼Œ 2016å¹´çš„ç»æµå¢é€Ÿè¿˜ä¼šç»§ç»­ä¸‹è¡Œï¼Œä½äº6.9%ã€‚ &lt;/div&gt;&lt;/div&gt; æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š åœ¨å®é™…å¼€å‘ä¸­ï¼Œåˆ—è¡¨ç»„çš„åº”ç”¨ä¹Ÿååˆ†å¹¿æ³›ï¼ŒBootstrapä¸­å®šä¹‰çš„åˆ—è¡¨ç»„æ ·å¼ååˆ†çµæ´»ï¼Œå¼€å‘è€…å¯ä»¥çµæ´»çš„å¯¹å…¶è¿›è¡Œè‡ªå®šä¹‰æ“ä½œï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314151617&lt;p&gt;åˆ—è¡¨ç»„ç¤ºä¾‹&lt;/p&gt;&lt;ul class=\"list-group\"&gt; &lt;li class=\"list-group-item list-group-item-info\"&gt; æœªè¯»æ¶ˆæ¯ &lt;span class=\"badge\"&gt;2&lt;/span&gt; &lt;/li&gt; &lt;li class=\"list-group-item list-group-item-success\"&gt; ä¸ªäººä¸­å¿ƒ &lt;/li&gt; &lt;li class=\"list-group-item list-group-item-danger\"&gt; é€€å‡ºç™»å½• &lt;/li&gt; &lt;li class=\"list-group-item list-group-item-warning\"&gt; &lt;div class=\"list-group-item-heading\"&gt;æ¸©é¦¨æç¤º&lt;/div&gt; &lt;small&gt;æ›´å¤šåŠŸèƒ½è¯·è¿›ä¸ªäººä¸­å¿ƒ&lt;/small&gt; &lt;/li&gt;&lt;/ul&gt; æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¦å¤–ï¼Œæœ¬ç¯‡åšå®¢ä¸­æ‰€æœ‰çš„å®ä¾‹ä»£ç åŠæ˜¾ç¤ºæ•ˆæœï¼Œåœ¨å¦‚ä¸‹åœ°å€ä¸­ï¼Œéœ€è¦çš„å¯ä»¥è‡ªè¡Œå¯¹ç…§å­¦ä¹ ã€‚ http://zyhshao.github.io/bootStrapDemo/medioAndListGroup.htmlã€‚ å‰ç«¯å­¦ä¹ æ–°äººï¼Œæœ‰å¿—åŒé“åˆçš„æœ‹å‹ï¼Œæ¬¢è¿äº¤æµä¸æŒ‡å¯¼ï¼ŒQQç¾¤:541458536","categories":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}],"tags":[],"keywords":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}]},{"title":"Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åä¸‰â€”â€”è­¦å‘Šæ¡†ä¸è¿›åº¦æ¡","slug":"285Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åä¸‰â€”â€”è­¦å‘Šæ¡†ä¸è¿›åº¦æ¡","date":"2016-12-18T16:00:00.000Z","updated":"2021-07-13T09:53:01.637Z","comments":true,"path":"2016/12/19/285Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åä¸‰â€”â€”è­¦å‘Šæ¡†ä¸è¿›åº¦æ¡/","link":"","permalink":"http://huishao.cc/2016/12/19/285Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åä¸‰â€”â€”è­¦å‘Šæ¡†ä¸è¿›åº¦æ¡/","excerpt":"","text":"Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åä¸‰â€”â€”è­¦å‘Šæ¡†ä¸è¿›åº¦æ¡åœ¨Bootstrapä¸­ï¼Œä½¿ç”¨alertç›¸å…³ç±»å¯ä»¥å®ç°ç®€æ´çš„è­¦å‘Šæ¡†æ§ä»¶ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345&lt;p&gt;alertç›¸å…³ç±»å¯ä»¥å®ç°ç®€æ´çš„è­¦å‘Šæ¡†æ ·å¼&lt;/p&gt;&lt;div class=\"alert alert-success\"&gt;æˆåŠŸé£æ ¼çš„è­¦å‘Šæ¡†&lt;/div&gt;&lt;div class=\"alert alert-info\"&gt;è¯¦æƒ…é£æ ¼çš„è­¦å‘Šæ¡†&lt;/div&gt;&lt;div class=\"alert alert-warning\"&gt;è­¦å‘Šé£æ ¼çš„è­¦å‘Šæ¡†&lt;/div&gt;&lt;div class=\"alert alert-danger\"&gt;å±é™©é£æ ¼çš„è­¦å‘Šæ¡†&lt;/div&gt; æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š è­¦å‘Šæ¡†ä¸Šé¢ä¹Ÿå¯ä»¥æ·»åŠ æœ‰ä¸€ä¸ªå…³é—­æŒ‰é’®ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456&lt;p&gt;å¸¦å…³é—­æŒ‰é’®çš„è­¦å‘Šæ¡†&lt;/p&gt;&lt;div class=\"alert alert-warning alert-dismissible\"&gt;å¯å…³é—­çš„è­¦å‘Šæ¡†&lt;button type=\"button\" class=\"close\"&gt; &lt;span aria-hidden=\"true\"&gt;&amp;times;&lt;/span&gt;&lt;/button&gt;&lt;/div&gt; æ•ˆæœå¦‚ä¸‹ï¼š è­¦å‘Šæ¡†ä¸­ä¹Ÿå¯ä»¥æ·»åŠ è·³è½¬é“¾æ¥ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345&lt;p&gt;å¸¦é“¾æ¥çš„è­¦å‘Šæ¡†&lt;/p&gt;&lt;div class=\"alert alert-danger\"&gt; æ‚¨è¾“å…¥çš„ç”¨æˆ·åæˆ–å¯†ç æœ‰è¯¯ &lt;a class=\"alert-link\" href=\"#\"&gt;æ‰¾å›å¯†ç &lt;/a&gt;&lt;/div&gt; æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å…³äºè¿›åº¦æ¡ç»„ä»¶ï¼ŒBootstrapä¸­ä½¿ç”¨progressç±»æ¥åˆ›å»ºï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345&lt;p&gt;é»˜è®¤çš„è¿›åº¦æ¡ç»„ä»¶&lt;/p&gt;&lt;div class=\"progress\"&gt; &lt;div class=\"progress-bar\" style=\"width: 60%;\"&gt; &lt;/div&gt;&lt;/div&gt; æ•ˆæœå¦‚ä¸‹ï¼š è¿›åº¦æ¡ç»„ä»¶ä¹Ÿæ”¯æŒå¤šç§æ ·å¼ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415161718192021&lt;p&gt;å„ç§é£æ ¼çš„è¿›åº¦æ¡ç»„ä»¶&lt;/p&gt;&lt;div class=\"progress\"&gt; &lt;div class=\"progress-bar progress-bar-danger\" style=\"width: 60%;\"&gt; 60% &lt;/div&gt;&lt;/div&gt;&lt;div class=\"progress\"&gt; &lt;div class=\"progress-bar progress-bar-info\" style=\"width: 60%;\"&gt; 60% &lt;/div&gt;&lt;/div&gt;&lt;div class=\"progress\"&gt; &lt;div class=\"progress-bar progress-bar-success\" style=\"width: 60%;\"&gt; 60% &lt;/div&gt;&lt;/div&gt;&lt;div class=\"progress\"&gt; &lt;div class=\"progress-bar progress-bar-success\" style=\"width: 60%;\"&gt; 60% &lt;/div&gt;&lt;/div&gt; æ•ˆæœå¦‚ä¸‹å›¾ï¼š è¿›åº¦æ¡ä¹Ÿæ”¯æŒæ¡çº¹æ¨¡å¼ï¼Œä½¿ç”¨progress-bar-stripedç±»å¯ä»¥åˆ›å»ºæ¡çº¹è¿›åº¦æ¡ï¼Œæ·»åŠ activeç±»å¯ä»¥å±•ç°æ¡çº¹åŠ¨ç”»ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456&lt;p&gt;å¸¦æ¡çº¹çš„è¿›åº¦æ¡&lt;/p&gt;&lt;div class=\"progress\"&gt; &lt;div class=\"progress-bar progress-bar-success progress-bar-striped active\" style=\"width: 60%;\"&gt; 60% &lt;/div&gt;&lt;/div&gt; æ•ˆæœå¦‚ä¸‹å›¾ï¼š å¦å¤–ï¼Œæœ¬ç¯‡åšå®¢ä¸­æ‰€æœ‰çš„å®ä¾‹ä»£ç åŠæ˜¾ç¤ºæ•ˆæœï¼Œåœ¨å¦‚ä¸‹åœ°å€ä¸­ï¼Œéœ€è¦çš„å¯ä»¥è‡ªè¡Œå¯¹ç…§å­¦ä¹ ã€‚ http://zyhshao.github.io/bootStrapDemo/alertAndProgress.htmlã€‚ å‰ç«¯å­¦ä¹ æ–°äººï¼Œæœ‰å¿—åŒé“åˆçš„æœ‹å‹ï¼Œæ¬¢è¿äº¤æµä¸æŒ‡å¯¼ï¼ŒQQç¾¤:541458536","categories":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}],"tags":[],"keywords":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}]},{"title":"æ·±å…¥ç†è§£HTTPSåŠåœ¨iOSç³»ç»Ÿä¸­é€‚é…HTTPSç±»å‹ç½‘ç»œè¯·æ±‚(ä¸‹)","slug":"284æ·±å…¥ç†è§£HTTPSåŠåœ¨iOSç³»ç»Ÿä¸­é€‚é…HTTPSç±»å‹ç½‘ç»œè¯·æ±‚(ä¸‹)","date":"2016-12-17T16:00:00.000Z","updated":"2021-07-13T09:52:17.536Z","comments":true,"path":"2016/12/18/284æ·±å…¥ç†è§£HTTPSåŠåœ¨iOSç³»ç»Ÿä¸­é€‚é…HTTPSç±»å‹ç½‘ç»œè¯·æ±‚(ä¸‹)/","link":"","permalink":"http://huishao.cc/2016/12/18/284æ·±å…¥ç†è§£HTTPSåŠåœ¨iOSç³»ç»Ÿä¸­é€‚é…HTTPSç±»å‹ç½‘ç»œè¯·æ±‚(ä¸‹)/","excerpt":"","text":"æ·±å…¥ç†è§£HTTPSåŠåœ¨iOSç³»ç»Ÿä¸­é€‚é…HTTPSç±»å‹ç½‘ç»œè¯·æ±‚(ä¸‹)ä¸€ã€å¼•è¨€ä¸Šä¸€ç¯‡åšå®¢è¯¦ç»†è®¨è®ºäº†HTTPSåè®®çš„åŸç†ï¼Œæ­å»ºHTTPSæµ‹è¯•ç¯å¢ƒä»¥åŠè¯ä¹¦çš„ç›¸å…³åŸºç¡€ã€‚æœ¬ç¯‡åšå®¢å°†ç»§ç»­æ¢è®¨æ›´å¤šåœ¨iOSå¼€å‘ä¸­é€‚é…HTTPSç±»å‹è¯·æ±‚çš„å†…å®¹ã€‚ä¸Šç¯‡åšå®¢çš„åœ°å€å¦‚ä¸‹ï¼š https://my.oschina.net/u/2340880/blog/807358ã€‚ äºŒã€å…³äºNSURLAuthenticationChallengeç›¸å…³ç±»æˆ‘ä»¬åœ¨å®ç°URLSessionçš„è®¤è¯åè®®æ–¹æ³•æ—¶ï¼Œä¼šæ¥æ”¶åˆ°ä¸€ä¸ªNSURLAuthenticationChallengeç±»å‹çš„å‚æ•°ã€‚ç®€å•ç†è§£ï¼Œè¿™ä¸ªå‚æ•°å°±æ˜¯æœåŠ¡ç«¯å‘èµ·çš„ä¸€ä¸ªéªŒè¯æŒ‘æˆ˜ï¼Œå®¢æˆ·ç«¯éœ€è¦æ ¹æ®æŒ‘æˆ˜çš„ç±»å‹æä¾›ç›¸åº”çš„æŒ‘æˆ˜å‡­è¯ã€‚å½“ç„¶ï¼ŒæŒ‘æˆ˜å‡­è¯ä¸ä¸€å®šéƒ½æ˜¯è¿›è¡ŒHTTPSè¯ä¹¦çš„ä¿¡ä»»ï¼Œä¹Ÿå¯èƒ½æ˜¯éœ€è¦å®¢æˆ·ç«¯æä¾›ç”¨æˆ·å¯†ç æˆ–è€…æä¾›åŒå‘éªŒè¯æ—¶çš„å®¢æˆ·ç«¯è¯ä¹¦ã€‚å½“è¿™ä¸ªæŒ‘æˆ˜å‡­è¯è¢«éªŒè¯é€šè¿‡æ—¶ï¼Œè¯·æ±‚ä¾¿å¯ä»¥ç»§ç»­é¡ºåˆ©è¿›è¡Œã€‚NSURLAuthenticationChallengeç±»å¯¹è±¡ä¸­æœ‰ä¸€ä¸ªsenderä»£ç†å®ä¾‹ï¼Œå¼€å‘è€…é€šè¿‡è¿™ä¸ªå®ä¾‹æ¥å¯æ§é‡‡ç”¨æ€æ ·çš„éªŒè¯æ–¹å¼ã€‚è§£æå¦‚ä¸‹ï¼š 12345678910//ä½¿ç”¨å‡­è¯è¿›è¡ŒéªŒè¯- (void)useCredential:(NSURLCredential *)credential forAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge;//è¯•å›¾ä¸æä¾›å‡­è¯ç»§ç»­è¯·æ±‚- (void)continueWithoutCredentialForAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge;//å–æ¶ˆå‡­è¯éªŒè¯- (void)cancelAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge;//ä½¿ç”¨é»˜è®¤æä¾›çš„å‡­è¯è¡Œä¸º- (void)performDefaultHandlingForAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge;//æ‹’ç»å½“å‰æä¾›çš„å—ä¿æŠ¤æ§ä»¶å¹¶ä¸”å°è¯•ä¸æä¾›å‡­è¯ç»§ç»­è¯·æ±‚- (void)rejectProtectionSpaceAndContinueWithChallenge:(NSURLAuthenticationChallenge *)challenge; å¯ä»¥çœ‹åˆ°ï¼Œä¸Šé¢çš„åè®®æ–¹æ³•ä¸­å¦‚æœè¦è¿›è¡Œå‡­è¯çš„éªŒè¯ï¼Œéœ€è¦å®¢æˆ·ç«¯æä¾›ä¸€ä¸ªå‡­è¯å¯¹è±¡NSURLCredentialã€‚è¿™ä¸ªç±»å¯ä»¥ç®€å•ç†è§£ä¸ºå®¢æˆ·ç«¯åˆ›å»ºçš„å‡­è¯ä¿¡æ¯ï¼Œè§£æå¦‚ä¸‹ï¼š 123456789101112131415161718//é€šè¿‡ç”¨æˆ·åå’Œå¯†ç è¿›è¡Œå‡­è¯çš„åˆ›å»º- (instancetype)initWithUser:(NSString *)user password:(NSString *)password persistence:(NSURLCredentialPersistence)persistence;//åŒä¸Š+ (NSURLCredential *)credentialWithUser:(NSString *)user password:(NSString *)password persistence:(NSURLCredentialPersistence)persistence;//ç”¨æˆ·åå±æ€§ åªè¯»@property (nullable, readonly, copy) NSString *user;//å¯†ç å±æ€§ åªè¯»@property (nullable, readonly, copy) NSString *password;//æ˜¯å¦æœ‰å¯†ç  åªè¯»@property (readonly) BOOL hasPassword;//é€šè¿‡å®¢æˆ·ç«¯æä¾›è¯ä¹¦è¿›è¡ŒåŒå‘éªŒè¯- (instancetype)initWithIdentity:(SecIdentityRef)identity certificates:(nullable NSArray *)certArray persistence:(NSURLCredentialPersistence)persistence NS_AVAILABLE(10_6, 3_0);//åŒä¸Š+ (NSURLCredential *)credentialWithIdentity:(SecIdentityRef)identity certificates:(nullable NSArray *)certArray persistence:(NSURLCredentialPersistence)persistence NS_AVAILABLE(10_6, 3_0);//åˆ›å»ºè¯ä¹¦ä¿¡ä»»å‡­è¯ ç”¨æˆ·è‡ªç­¾åçš„HTTPSè¯·æ±‚- (instancetype)initWithTrust:(SecTrustRef)trust NS_AVAILABLE(10_6, 3_0);//åŒä¸Š+ (NSURLCredential *)credentialForTrust:(SecTrustRef)trust NS_AVAILABLE(10_6, 3_0); ä¸Šé¢æ–¹æ³•ä¸­çš„NSURLCredentialPersistenceæšä¸¾ç”¨æ¥è®¾ç½®å‡­è¯çš„å­˜å‚¨æ–¹å¼ï¼Œè§£æå¦‚ä¸‹ï¼š 123456typedef NS_ENUM(NSUInteger, NSURLCredentialPersistence) &#123; NSURLCredentialPersistenceNone, //ä¸ä¿å­˜ NSURLCredentialPersistenceForSession, //åœ¨æœ¬URLSessionä¸­æœ‰æ•ˆ NSURLCredentialPersistencePermanent, //ä¿å­˜åœ¨é’¥åŒ™ä¸²ä¸­ ï¼Œæ°¸ä¹…æœ‰æ•ˆ NSURLCredentialPersistenceSynchronizable NS_ENUM_AVAILABLE(10_8, 6_0) //æ°¸ä¹…æœ‰æ•ˆ å¹¶ä¸”è¢«æ‰€æœ‰APPIDè®¾å¤‡å…±äº«&#125;; ä¸‰ã€ä½¿ç”¨AFNetworkingè¿›è¡Œè‡ªç­¾åè¯ä¹¦HTTPSè¯·æ±‚çš„è®¤è¯ä½¿ç”¨AFNetworkingä¹Ÿå¯ä»¥å¾ˆæ–¹ä¾¿çš„è¿›è¡Œè‡ªç­¾åè¯ä¹¦çš„è®¤è¯ï¼Œè¿˜ä»¥ä¸Šä¸€èŠ‚åšå®¢æ­å»ºçš„HTTPSç¯å¢ƒä¸ºä¾‹ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253-(void)afHttps&#123; NSURLRequest * req = [NSURLRequest requestWithURL:[NSURL URLWithString:@\"https://localhost:8080/users\"]]; AFSecurityPolicy *securityPolicy = [AFSecurityPolicy policyWithPinningMode:AFSSLPinningModeCertificate]; // securityPolicy.allowInvalidCertificates = YES;//æ˜¯å¦å…è®¸ä½¿ç”¨è‡ªç­¾åè¯ä¹¦ securityPolicy.validatesDomainName = NO;//æ˜¯å¦éœ€è¦éªŒè¯åŸŸåï¼Œé»˜è®¤YES AFHTTPSessionManager *_manager = [AFHTTPSessionManager manager]; _manager.responseSerializer = [AFHTTPResponseSerializer serializer]; _manager.securityPolicy = securityPolicy; //è®¾ç½®è¶…æ—¶ [_manager.requestSerializer willChangeValueForKey:@\"timeoutinterval\"]; _manager.requestSerializer.timeoutInterval = 20.f; [_manager.requestSerializer didChangeValueForKey:@\"timeoutinterval\"]; _manager.requestSerializer.cachePolicy = NSURLRequestReloadIgnoringCacheData; _manager.responseSerializer.acceptableContentTypes = [NSSet setWithObjects:@\"application/xml\",@\"text/html\",@\"text/plain\",@\"application/json\",nil]; [_manager setSessionDidReceiveAuthenticationChallengeBlock:^NSURLSessionAuthChallengeDisposition(NSURLSession *session, NSURLAuthenticationChallenge *challenge, NSURLCredential *__autoreleasing *_credential) &#123; SecTrustRef serverTrust = [[challenge protectionSpace] serverTrust]; /** * å¯¼å…¥å¤šå¼ CAè¯ä¹¦ */ NSString *cerPath = [[NSBundle mainBundle] pathForResource:@\"cert\" ofType:@\"der\"];//è‡ªç­¾åè¯ä¹¦ NSData* caCert = [NSData dataWithContentsOfFile:cerPath]; NSArray *cerArray = @[caCert]; _manager.securityPolicy.pinnedCertificates = cerArray; SecCertificateRef caRef = SecCertificateCreateWithData(NULL, (__bridge CFDataRef)caCert); NSArray *caArray = @[(__bridge id)(caRef)]; SecTrustSetAnchorCertificates(serverTrust, (__bridge CFArrayRef)caArray); SecTrustSetAnchorCertificatesOnly(serverTrust,NO); NSURLSessionAuthChallengeDisposition disposition = NSURLSessionAuthChallengePerformDefaultHandling; __autoreleasing NSURLCredential *credential = nil; if ([challenge.protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodServerTrust]) &#123; if ([_manager.securityPolicy evaluateServerTrust:challenge.protectionSpace.serverTrust forDomain:challenge.protectionSpace.host]) &#123; credential = [NSURLCredential credentialForTrust:challenge.protectionSpace.serverTrust]; if (credential) &#123; disposition = NSURLSessionAuthChallengeUseCredential; &#125; else &#123; disposition = NSURLSessionAuthChallengePerformDefaultHandling; &#125; &#125; else &#123; disposition = NSURLSessionAuthChallengeCancelAuthenticationChallenge; &#125; &#125; else &#123; disposition = NSURLSessionAuthChallengePerformDefaultHandling; &#125; return disposition; &#125;]; [[_manager dataTaskWithRequest:req completionHandler:^(NSURLResponse * _Nonnull response, id _Nullable responseObject, NSError * _Nullable error) &#123; NSLog(@\"%@,%@\",[[NSString alloc]initWithData:responseObject encoding:NSUTF8StringEncoding],error); &#125;]resume];&#125; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"æ·±å…¥ç†è§£HTTPSåŠåœ¨iOSç³»ç»Ÿä¸­é€‚é…HTTPSç±»å‹ç½‘ç»œè¯·æ±‚(ä¸Š)","slug":"283æ·±å…¥ç†è§£HTTPSåŠåœ¨iOSç³»ç»Ÿä¸­é€‚é…HTTPSç±»å‹ç½‘ç»œè¯·æ±‚(ä¸Š)","date":"2016-12-15T16:00:00.000Z","updated":"2021-07-13T09:51:28.588Z","comments":true,"path":"2016/12/16/283æ·±å…¥ç†è§£HTTPSåŠåœ¨iOSç³»ç»Ÿä¸­é€‚é…HTTPSç±»å‹ç½‘ç»œè¯·æ±‚(ä¸Š)/","link":"","permalink":"http://huishao.cc/2016/12/16/283æ·±å…¥ç†è§£HTTPSåŠåœ¨iOSç³»ç»Ÿä¸­é€‚é…HTTPSç±»å‹ç½‘ç»œè¯·æ±‚(ä¸Š)/","excerpt":"","text":"æ·±å…¥ç†è§£HTTPSåŠåœ¨iOSç³»ç»Ÿä¸­é€‚é…HTTPSç±»å‹ç½‘ç»œè¯·æ±‚ä¸€ã€å¼•è¨€æœ¬ç¯‡åšå®¢ä¸»è¦è®¨è®ºå¦‚ä½•åœ¨å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯ä¹‹é—´è¿›è¡ŒHTTPSç½‘ç»œä¼ è¾“ï¼Œä¸ºäº†æ·±å…¥ç†è§£ç½‘ç»œä¼ è¾“çš„åŸºç¡€åŸç†ï¼Œæ›´åŠ çµæ´»çš„æ ¡éªŒè¯ä¹¦ï¼Œåšå®¢çš„å‰åŠéƒ¨åˆ†ä¹Ÿå°†ä»‹ç»ä¸€äº›HTTPSç½‘ç»œä¼ è¾“åŸç†ã€‚å½“ç„¶ï¼Œæ–‡ç« ä¸­æœ‰ä¸æ­£å’Œç–æ¼ä¹‹å¤„ï¼Œè¿˜æœ›æœ‹å‹ä¸åæŒ‡æ­£ï¼Œæ„Ÿè°¢ï¼ äºŒã€HTTPä¸HTTPSæˆ‘ä»¬éƒ½çŸ¥é“ï¼ŒHTTPæ˜¯ä¸€ç§å¸¸ç”¨çš„ç½‘ç»œä¼ è¾“åè®®ï¼Œå®ƒæ˜¯åŸºäºTCPçš„ä¸€ç§åº”ç”¨å±‚åè®®ï¼Œåº”ç”¨å±‚æ˜¯ä»€ä¹ˆæ ·çš„ä¸€ä¸ªæ¦‚å¿µï¼Œé€šè¿‡ä¸‹é¢è¿™å¼ ç¤ºæ„å›¾å¯ä»¥å¾ˆå¥½çš„ç†è§£ï¼š HTTPåè®®çš„ç½‘ç»œä¼ è¾“ååˆ†å¸¸è§ï¼Œä¾‹å¦‚ç½‘æ˜“çš„ä¸»é¡µhttp://www.163.com/ã€‚HTTPç±»å‹çš„ç½‘ç»œä¼ è¾“ä½¿ç”¨ååˆ†æ–¹ä¾¿ï¼Œä½†æ˜¯å…¶åœ¨å®‰å…¨æ€§ä¸Šå´æœ‰å¾ˆå¤§é—®é¢˜ï¼Œåˆ—ä¸¾å¦‚ä¸‹ï¼š 1.HTTPåè®®åœ¨ä¼ è¾“æ•°æ®æ—¶æ˜¯æ˜æ–‡çš„ï¼Œä»»ä½•äººé€šè¿‡ä¸€ä¸ªç®€å•çš„æŠ“åŒ…å·¥å…·ï¼Œå°±å¯ä»¥æˆªè·åˆ°æ‰€æœ‰ä¼ è¾“æ•°æ®ã€‚ 2.HTTPåè®®åœ¨ä¼ è¾“æ•°æ®æ—¶æ— æ³•ä¿è¯æ•°æ®çš„å®Œæ•´ï¼Œåœ¨æˆªè·åˆ°æ˜æ–‡æ•°æ®åï¼Œå¾ˆå®¹æ˜“å°±å¯ä»¥å°†å…¶ç¯¡æ”¹ï¼Œè¿™ä¹Ÿæ˜¯ä¸€äº›ç½‘é¡µæ€»æ˜¯è¢«æ¤å…¥æ¶æ„å¹¿å‘Šçš„åŸå› ã€‚ 3.HTTPåè®®åœ¨ä¼ è¾“æ•°æ®æ—¶æ— æ³•ä¿è¯çœŸå®æ€§ï¼Œè¿™ä¹Ÿæ˜¯æœ€ææ€–çš„ä¸€ç‚¹ã€‚è¯¯å…¥äº†åŸŸåæ¬ºéª—çš„é’“é±¼ç½‘ç«™ï¼Œæå®¹æ˜“å¯¹ç”¨æˆ·å¸¦æ¥è´¢äº§æŸå¤±ã€‚ åŸºäºä¸Šé¢3ç‚¹å®‰å…¨æ€§çš„è€ƒè™‘ï¼Œä¸€ç§æ›´åŠ å®‰å…¨çš„ç½‘ç»œä¼ è¾“åè®®åŠ¿å¿…è¦æ¨è¡Œï¼Œé‚£å°±æ˜¯HTTPSã€‚ è¦ç†è§£HTTPSåè®®ï¼Œé¦–å…ˆéœ€è¦æ˜ç™½ä»€ä¹ˆæ˜¯SSL/TLSã€‚SSLå…¨ç§°â€œSecure Sockets Layerâ€ï¼Œæ„æ€ä¸ºå®‰å…¨å¥—æ¥å±‚ã€‚å…¶å®ç”±ç½‘æ™¯å…¬å¸ä¸ºäº†è§£å†³HTTPä¼ è¾“åè®®åœ¨å®‰å…¨æ–¹é¢çš„ç¼ºé™·è€Œè®¾è®¡çš„ã€‚åæ¥è¢«æ ‡å‡†åŒ–ï¼Œæ›´åä¸ºTLSï¼Œå…¨ç§°â€œTransport Layer Securityâ€ï¼Œæ„æ€ä¸ºä¼ è¾“å±‚å®‰å…¨åè®®ã€‚ é‚£ä¹ˆç°åœ¨å°±å¥½ç†è§£äº†ï¼Œå…¶å®HTTPSå°±æ˜¯å°†HTTPåè®®ä¸TLSåè®®ç»„åˆèµ·æ¥ï¼Œåœ¨ä¸æ”¹å˜HTTPåè®®åŸè®¾è®¡çš„åŸºç¡€ä¸Šï¼Œä¸ºå…¶æ·»åŠ å®‰å…¨æ€§æ ¡éªŒå¹¶å¯¹ä¼ è¾“çš„æ•°æ®è¿›è¡ŒåŠ å¯†ã€‚é‚£ä¹ˆTLSç©¶ç«Ÿåœ¨ç½‘ç»œä¼ è¾“çš„é‚£ä¸€å±‚è¿›è¡Œäº†å¤„ç†äº†ï¼Œä¸‹å›¾å¯ä»¥å¾ˆå¥½çš„è¡¨ç¤ºï¼š ä¸‰ã€è¯ä¹¦ é€šè¿‡å‰é¢æ‰€ä»‹ç»ï¼Œæˆ‘ä»¬çŸ¥é“HTTPSä¸»è¦æ˜¯ä¸ºäº†è§£å†³3ä¸ªé—®é¢˜ï¼šæ•°æ®åŠ å¯†ã€æ•°æ®å®Œæ•´ã€æ•°æ®çœŸå®ã€‚é‚£ä¹ˆä¸‹ä¸€æ­¥å°±æ˜¯å¦‚ä½•è§£å†³è¿™äº›é—®é¢˜ï¼Œæ•°æ®åŠ å¯†åœ¨å‘é€æ•°æ®å‰ä¾èµ–SSLå±‚å¯¹æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œæ•°æ®å®Œæ•´ä¸çœŸå®æ€§åˆ™è¦é å¦ä¸€ç§å…³é”®æŠ€æœ¯ï¼šæ•°å­—è¯ä¹¦ã€‚ é€šè¿‡ä¸€ä¸ªå°ä¾‹å­å¯ä»¥å¾ˆå®¹æ˜“çš„ç†è§£è¯ä¹¦çš„ä½œç”¨ï¼Œè¿™ä¸ªä¾‹å­çš„æ¥æºæ˜¯&lt;ç¼–ç¨‹éšæƒ³&gt;çš„ä½œè€…ï¼Œæˆ‘è¿™é‡Œæš‚ä¸”å€Ÿç”¨ä¸€ä¸‹ï¼šAå…¬å¸çš„aåˆ°Bå…¬å¸åŠäº‹ï¼Œä¸ºäº†è¯æ˜aç¡®å®æ˜¯Aå…¬å¸çš„èŒå‘˜è€Œä¸æ˜¯å•†ä¸šé—´è°ï¼ŒAå…¬å¸ä¼šä¸ºaæä¾›ä¸€ä¸ªå¸¦æœ‰å…¬ç« çš„è¯æ˜ï¼Œå½“Bå…¬å¸çœ‹åˆ°è¿™ä¸ªè¯æ˜æ—¶ï¼Œå°±å¯ä»¥ä¿¡ä»»åŠäº‹å‘˜aã€‚å¯¹æ¯”ç½‘ç»œä¼ è¾“ï¼Œè¿™ä¸ªè¯æ˜å°±æ˜¯è¯ä¹¦ï¼Œè¯ä¹¦å¯ä»¥ä¿è¯è¿™ä¸ªç½‘ç«™çš„çœŸå®æ€§ã€‚æˆ‘ä»¬ç»§ç»­å¾€ååˆ†æï¼Œå½“Bå…¬å¸ä¸è¶Šæ¥è¶Šå¤šçš„å…¬å¸è¿›è¡Œå•†ä¸šåˆä½œæ—¶ï¼Œå°±åˆæœ‰æ–°çš„é—®é¢˜å‡ºç°äº†ï¼Œæ¯”å¦‚Cå…¬å¸çš„cæ¥Bå…¬å¸åŠäº‹ï¼Œå°±éœ€è¦æ‹¿Cå…¬å¸å¸¦å…¬ç« çš„è¯æ˜ï¼ŒDå…¬å¸çš„dæ¥Bå…¬å¸åŠäº‹å°±éœ€è¦æ‹¿Då…¬å¸å¸¦å…¬ç« çš„è¯æ˜...è¿™æ ·ä¸€æ¥ï¼ŒBå…¬å¸è¦å­˜æ”¾å¥½å¤šå…¬å¸çš„å…¬ç« å’Œè¯æ˜çš„æ¨¡æ¿ï¼Œæ‰èƒ½å¤Ÿå®Œæˆæ ¡éªŒã€‚è¿™æ ·æœªå…ä¹Ÿå¤ªéº»çƒ¦äº†ï¼Œå¯¹åº”åˆ°ç½‘ç»œä¼ è¾“ä¸­ï¼Œå®¢æˆ·ç«¯å°±æ˜¯Bå…¬å¸ï¼Œå„ä¸ªç½‘ç«™éƒ½æœ‰è‡ªå·±çš„è¯ä¹¦æ–‡ä»¶ï¼Œè¿™æ ·å®¢æˆ·ç«¯éœ€è¦å®‰è£…ä¿¡ä»»å¤§é‡çš„è¯ä¹¦ï¼Œä¸ºäº†è§£å†³è¿™æ ·çš„é—®é¢˜ï¼Œå°±æœ‰äº†ç¬¬ä¸‰æ–¹CAæœºæ„ã€‚ç¬¬ä¸‰æ–¹CAæœºæ„æ˜¯ç”±å¤§å®¶å…¬è®¤ä¿¡ä»»çš„æœºæ„ï¼Œä¾‹å¦‚Rå…¬å¸ä¸ºç¬¬ä¸‰æ–¹ä¿¡ä»»æœºæ„ï¼Œå…¶ä¸šåŠ¡æ˜¯ä¸ºå…¶ä»–å…¬å¸æä¾›å…¬ç« è¯æ˜ï¼Œè¿™æ ·ä¸€æ¥ï¼ŒBå…¬å¸åªè¦ä¿æœ‰è¿™ä¸ªRå…¬å¸çš„å…¬ç« è¯æ˜å‰¯æœ¬ï¼Œå…¶ä»–Aï¼ŒCï¼ŒDå…¬å¸çš„åŠäº‹å‘˜ä¹Ÿåªéœ€è¦ä»Rå…¬å¸ç”³è¯·åˆ°ä¸€ä¸ªå…¬ç« è¯æ˜å°±å¯ä»¥åˆ°Bå…¬å¸æ¥äº¤æµä¸šåŠ¡äº†ã€‚ CAçš„å…¨ç§°æ˜¯â€œCertificate Authorityâ€ï¼Œæ„ä¸ºè¯ä¹¦æˆæƒä¸­å¿ƒã€‚å¤§éƒ¨åˆ†CAæœºæ„é¢å‘çš„è¯ä¹¦éƒ½æ˜¯éœ€è¦ä»˜è´¹çš„ï¼ŒCAæœºæ„é¢å‘çš„è¯ä¹¦ä¸€èˆ¬éƒ½æ˜¯æ ¹è¯ä¹¦ï¼Œæ ¹è¯ä¹¦ä¹Ÿæ¯”è¾ƒå®¹æ˜“ç†è§£ï¼Œé¦–å…ˆè¯ä¹¦æ˜¯æœ‰é“¾å¼ä¿¡ä»»å…³ç³»çš„ï¼Œä¾‹å¦‚Yè¯ä¹¦æ˜¯ç”±CAæœºæ„é¢å‘çš„æ ¹è¯ä¹¦ï¼Œç”±è¿™ä¸ªYè¯ä¹¦è¿˜å¯ä»¥åˆ›å»ºå‡ºè®¸å¤šå­è¯ä¹¦ï¼Œå­è¯ä¹¦å¯ä»¥ç»§ç»­åˆ›å»ºå­è¯ä¹¦ï¼Œåªè¦æ ¹è¯ä¹¦æ˜¯å—ä¿¡ä»»çš„ï¼Œå…¶ä¸‹æ‰€æœ‰çš„å­è¯ä¹¦éƒ½æ˜¯å—ä¿¡ä»»çš„ï¼Œå¦‚ä¸‹å›¾ï¼š æˆ‘ä»¬å¯ä»¥æ‰“å¼€å¼€æºä¸­å›½åšå®¢çš„ä¸»é¡µï¼š[https://www.oschina.net/blog](https://www.oschina.net/blog)ã€‚åœ¨Chromeæµè§ˆå™¨åœ°å€æ å·¦è¾¹å¯ä»¥æŸ¥çœ‹è¯ä¹¦ä¿¡æ¯ï¼Œå¦‚ä¸‹ï¼š ç‚¹å‡»è¯ä¹¦ä¿¡æ¯ï¼Œå¯ä»¥çœ‹åˆ°å®Œæ•´çš„è¯ä¹¦é“¾ï¼Œå¦‚ä¸‹å›¾ï¼š ä»å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæ ¹è¯ä¹¦æ˜¯ç”±CAæœºæ„VerSignå…¬å¸é¢å‘çš„ã€‚æ­¤å¤„è¿˜å¯ä»¥çœ‹åˆ°å½“å‰è¯ä¹¦æ˜¯å¦æœ‰æ•ˆä»¥åŠè¿‡æœŸæ—¶é—´ï¼Œå¦‚æœè¯ä¹¦æ— æ•ˆåˆ™è¯´æ˜æ­¤ç½‘é¡µä¿¡æ¯æœ‰å¯èƒ½è¢«ç¯¡æ”¹è¿‡ï¼Œç”¨æˆ·åœ¨è®¿é—®æ—¶å°±è¦å°å¿ƒäº†ã€‚ é™¤äº†CAæœºæ„å¯ä»¥ç­¾å‘è¯ä¹¦å¤–ï¼Œä¸ªäººå…¶å®ä¹Ÿæ˜¯å¯ä»¥åˆ›å»ºè¯ä¹¦çš„ï¼Œå½“ç„¶ä¸ªäººåˆ›å»ºçš„è¯ä¹¦ä¹Ÿæ˜¯ä¸è¢«ä¿¡ä»»çš„ï¼Œæˆ‘ä»¬å§‘ä¸”æŠŠè¿™ç±»è¯ä¹¦å«åšè‡ªç­¾åè¯ä¹¦ï¼Œå¦‚æœç”¨è‡ªç­¾åè¯ä¹¦æ­å»ºäº†HTTPSçš„æœåŠ¡ï¼Œåˆ™å®¢æˆ·ç«¯éœ€è¦å®‰è£…å¯¹åº”çš„è¯ä¹¦ä¿¡ä»»ï¼Œæ‰å¯ä»¥è¿›è¡Œæ­¤æœåŠ¡çš„è®¿é—®ã€‚åé¢æˆ‘ä»¬ä¼šè¿›ä¸€æ­¥è®¨è®ºè‡ªç­¾åè¯ä¹¦çš„ä½¿ç”¨ã€‚ å››ã€æ­å»ºä¸€ä¸ªæœ¬åœ°çš„HTTPSæœåŠ¡ä½¿ç”¨Node.jså¯ä»¥å¿«é€Ÿçš„æ­å»ºå‰ç«¯æœåŠ¡ï¼Œæˆ‘ä»¬è¿™é‡Œä½¿å€ŸåŠ©Expressæ¡†æ¶æ¥æ­å»ºæœ¬åœ°çš„HTTPSæœåŠ¡ï¼Œç”¨äºæµ‹è¯•æˆ‘ä»¬åè¾¹å°†è¦è¿›è¡ŒHTTPSé€šè®¯ã€‚Expressæ­å»ºæ­å»ºé¡¹ç›®æ¨¡æ¿çš„è¿‡ç¨‹åœ¨ä»¥å‰çš„ä¸€ç¯‡åšå®¢ä¸­æœ‰è¯¦ç»†çš„ä»‹ç»ï¼Œè¿™é‡Œå°±ä¸å†é‡å¤äº†ï¼Œåœ°å€å¦‚ä¸‹ï¼š ä½¿ç”¨Expressæ­å»ºå‰ç«¯é¡¹ç›®ï¼šhttps://my.oschina.net/u/2340880/blog/794928ã€‚ æ ¹æ®å‰é¢æ‰€è¿°ï¼Œæ­å»ºHTTPSæœåŠ¡éœ€è¦æœ‰è¯ä¹¦å‡­è¯ï¼Œä¸¤ç§è¯ä¹¦æˆ‘ä»¬å¯ä»¥é€‰æ‹©ï¼Œä¸€ç§æ˜¯CAæœºæ„ç­¾å‘çš„è¯ä¹¦ï¼Œè¿˜æœ‰ä¸€ç§æ˜¯æˆ‘ä»¬è‡ªå·±åˆ¶ä½œçš„è‡ªç­¾åè¯ä¹¦ï¼Œåœ¨Macç”µè„‘ä¸Šæ‰“å¼€é’¥åŒ™ä¸²è®¿é—®åº”ç”¨ï¼Œæ‰“å¼€å…¶ä¸­çš„è¯ä¹¦åŠ©ç†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š é€‰æ‹©å…¶ä¸­çš„ä¸ºæ‚¨è‡ªå·±åˆ›å»ºè¯ä¹¦é€‰é¡¹ï¼Œå¦‚ä¸‹å›¾ï¼š åœ¨ä¹‹åçš„ç•Œé¢ä¸­ï¼Œè¾“å…¥è¯ä¹¦çš„åç§°ï¼Œé€‰æ‹©è¯ä¹¦ç±»å‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¸Šé¢ï¼Œæˆ‘æŠŠè¯ä¹¦çš„åå­—åˆ›å»ºæˆäº†ç²å°‘ï¼Œèº«ä»½ç±»å‹é€‰æ‹©çš„æ˜¯è‡ªç­¾åçš„æ ¹è¯ä¹¦ï¼Œè¯ä¹¦ç±»å‹é€‰æ‹©SSLæœåŠ¡å™¨ï¼Œä¹‹åç‚¹å‡»åˆ›å»ºå³å¯å®Œæˆè¯ä¹¦çš„åˆ›å»ºã€‚ åˆ›å»ºå®Œæˆåï¼Œåœ¨é’¥åŒ™ä¸²è®¿é—®çš„ç™»å½•è¯ä¹¦ä¸­ï¼Œå¯ä»¥çœ‹åˆ°å·²ç»æœ‰äº†ç²å°‘è¿™ä¸ªè‡ªç­¾åçš„è¯ä¹¦ï¼Œå¦‚ä¸‹å›¾ï¼š åœ¨è¯ä¹¦ä¸Šç‚¹å‡»å³é”®ï¼Œé€‰æ‹©å¯¼å‡ºé€‰é¡¹ï¼Œåå­—æˆ‘å°†å…¶å–åä¸ºhuishaoï¼Œæ–‡ä»¶ç±»å‹è¦é€‰æ‹©.p12ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ç‚¹å‡»å­˜å‚¨åï¼Œéœ€è¦è®¾ç½®ä¸€ä¸ªè®¿é—®å¯†ç ï¼Œè¿™ä¸ªå¯†ç å°†æ¥å°†ç”¨äºä».p12æ–‡ä»¶ä¸­è·å–è¯ä¹¦å’Œå¯†é’¥ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¹‹åï¼Œç³»ç»Ÿæœ‰å¯èƒ½ä¼šè®©ä½ å†æ¬¡è¾“å…¥ä¸€ä¸ªå¯†ç ï¼Œå°†å…¥ä¸‹å›¾æ‰€ç¤ºï¼Œæ³¨æ„ï¼Œè¿™é‡Œéœ€è¦è¾“å…¥çš„æ˜¯ç³»ç»Ÿçš„ç™»å½•å¯†ç ï¼š å®Œæˆä¸Šé¢æ“ä½œåï¼Œæˆ‘ä»¬å·²ç»å°†ä¸€ä¸ª.p12æ–‡ä»¶å¯¼å‡ºåˆ°äº†æ¡Œé¢ã€‚é‚£ä¹ˆè¿™ä¸ª.p12æ–‡ä»¶åˆ°åº•æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿å‘¢ï¼Œå®ƒå’Œè¯ä¹¦ä¹‹é—´åˆæœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Œå…¶å®.p12æ–‡ä»¶ä¸€ä¸ªå¤åˆæ–‡ä»¶ï¼Œå…¶ä¸­åŒ…è£…äº†ç§é’¥ä¸è¯ä¹¦ä¿¡æ¯ï¼Œä½¿ç”¨OpenSSLå·¥å…·å¯ä»¥å°†å…¶ä¸­çš„ä¿¡æ¯è¿›è¡Œæå–ï¼Œæ­å»ºä¸€ä¸ªHTTPSçš„æœåŠ¡å™¨éœ€è¦ä¸¤ä¸ªæ–‡ä»¶ï¼Œåˆ†åˆ«é—®è¯ä¹¦æ–‡ä»¶å’Œç§é’¥æ–‡ä»¶ï¼Œä¸‹é¢æˆ‘ä»¬æ¥ä».p12æ–‡ä»¶ä¸­æå–è¿™äº›éœ€è¦çš„æ–‡ä»¶ã€‚ æ‰“å¼€ç»ˆç«¯ï¼Œcdåˆ°huishao.p12æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ä¸‹ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å¯ä»¥å°†.p12æ–‡ä»¶ä¸­çš„ç§é’¥åˆ†è§£å‡ºæ¥ï¼š 1openssl pkcs12 -in huishao.p12 -nocerts -out privateKey.pem -nodes ä¹‹é—´ä¼šè¦æ±‚è¾“å…¥å¯¼å‡º.p12æ–‡ä»¶æ—¶æ‰€è®¾ç½®çš„å¯†ç ã€‚ ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å°†.p12æ–‡ä»¶ä¸­çš„è¯ä¹¦åˆ†è§£å‡ºæ¥ï¼š 1openssl pkcs12 -in huishao.p12 -nokeys -out cert.pem -nodes ä¹‹é—´ä¹Ÿä¼šè¦æ±‚è¾“å…¥å¯¼å‡º.p12æ–‡ä»¶æ—¶æ‰€è®¾ç½®çš„å¯†ç ã€‚å®Œæˆä¸Šé¢ä¸¤éƒ¨æ“ä½œåï¼Œå¯ä»¥çœ‹åˆ°å½“å‰æ–‡ä»¶å¤¹ä¸‹å¤šäº†ä¸¤ä¸ªæ–‡ä»¶ï¼Œåˆ†åˆ«ä¸ºcert.pemä¸privateKey.pemï¼Œä»–ä»¬åˆ†åˆ«æ˜¯è¯ä¹¦æ–‡ä»¶ä¸å¯†é’¥æ–‡ä»¶ï¼Œå°†ä»–ä»¬æ‹·è´åˆ°Expressé¡¹ç›®çš„binæ–‡ä»¶å¤¹ä¸‹ï¼Œä½¿å¾—Expressé¡¹ç›®çš„ç»“æ„çœ‹èµ·æ¥å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¸‹é¢æˆ‘ä»¬æ¥é…ç½®Expressé¡¹ç›®ã€‚ åœ¨ç”Ÿæˆå¥½çš„Expressé¡¹ç›®ä¸­çš„wwwæ–‡ä»¶çš„æœ«å°¾æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š 123456789101112131415161718192021/*HTTPS*/var fs = require('fs');var https = require('https');/*å¯†é’¥æ–‡ä»¶*/var privatekey = fs.readFileSync('./privateKey.pem', 'utf8'); /*è¯ä¹¦æ–‡ä»¶*/var certificate = fs.readFileSync('./cert.pem', 'utf8'); var options=&#123;key:privatekey, cert:certificate&#125;; var serverHttps = https.createServer(options, app); /*ç»‘å®šç«¯å£*/serverHttps.listen(8080,function () &#123; console.log('Https server listening on port ' + 8080);&#125;); ç”¨ç»ˆç«¯åœ¨binæ–‡ä»¶å¤¹ä¸‹è¿è¡Œ node wwwï¼Œæ•ˆæœå¦‚ä¸‹ï¼š åœ¨æµè§ˆå™¨æ‰“å¼€ï¼šhttps://localhost:8080/usersï¼Œå¦‚æœæœåŠ¡å™¨æ­å»ºæˆåŠŸï¼ŒChromeä¸­ä¼šå‡ºç°å¦‚ä¸‹æ•ˆæœï¼š ç‚¹å‡»é«˜çº§ï¼Œç‚¹å‡»å…¶ä¸­çš„ç»§ç»­è®¿é—®ï¼Œå¯ä»¥æ­£å¸¸è·å–åˆ°æœåŠ¡å™¨è¿”å›çš„æ•°æ®ã€‚åˆ°æ­¤ï¼Œæˆ‘ä»¬çš„HTTPSæœåŠ¡å°±æ­å»ºæˆåŠŸäº†ã€‚ äº”ã€iOSå¼€å‘ä¸­é€šè¿‡é…ç½®info.plistæ–‡ä»¶æ¥å…è®¸HTTPåè®®ç±»å‹çš„é€šè®¯å‰é¢æ‰¯äº†å¤ªå¤šï¼Œç»ˆäºæåˆ°é‡ç‚¹éƒ¨åˆ†äº†ã€‚Appleåœ¨iOS9ä¸­å°±å·²ç»æ¼å‡ºä¸€äº›å¼ºåˆ¶HTTPSé€šè®¯çš„ç«¯å€ªï¼Œåªæ˜¯ç»™äº†å¼€å‘è€…ä¸€äº›è¿‡æ¸¡ï¼Œåœ¨iOS10åŠä»¥åçš„å®¡æ ¸æœºåˆ¶ä¸­ï¼ŒAppleå¯¹äºå¼ºåˆ¶HTTPSçš„æ¨åŠ¨å°†ä¼šè¶Šæ¥è¶Šå¼ºï¼Œå¦‚ä½•è®©è‡ªå·±çš„åº”ç”¨ç¨‹åºå°½å¿«çš„é€‚é…HTTPSç›¸å…³çš„æ ‡å‡†ï¼Œæ˜¯iOSå¼€å‘è€…å¿…é¡»é¢å¯¹çš„ä»»åŠ¡ã€‚ é€šè¿‡å‰é¢çš„åˆ†ææˆ‘ä»¬äº†è§£ï¼ŒCAæœºæ„ç­¾å‘çš„è¯ä¹¦æ˜¯è¢«é»˜è®¤ä¿¡ä»»çš„ï¼Œè¿™å°±æ˜¯è¯´ï¼Œå¦‚æœä½ çš„å…¬å¸æ¯”è¾ƒæœ‰é’±ï¼Œæ„¿æ„èŠ±é’±ä»CAæœºæ„ç”³è¯·ä¸€ä¸ªä»˜è´¹çš„è¯ä¹¦ï¼Œé‚£ä¹ˆå¾ˆå¹¸è¿ï¼Œä½ çš„iOSå·¥ç¨‹æ˜¯ä¸éœ€è¦åšä»»ä½•ä¿®æ”¹çš„ï¼Œè¿™äº›CAæœºæ„ç­¾å‘çš„è¯ä¹¦æ˜¯é»˜è®¤å—ä¿¡ä»»çš„ï¼Œå› æ­¤ä½ å¯ä»¥ç›´æ¥åœ¨ç¨‹åºä¸­è¿›è¡ŒHTTPSç±»å‹çš„è¯·æ±‚ï¼Œæ‰€éœ€è¦ä¿®æ”¹çš„åªæ˜¯å°†è¯·æ±‚urlæ”¹æˆhttpså¼€å¤´ã€‚ä½†æ˜¯å¦ä¸€ç§æƒ…å†µï¼Œæ— è®ºå‡ºäºä»€ä¹ˆåŸå› ï¼Œä½ çš„åå°æœåŠ¡ç”¨çš„æ˜¯è‡ªç­¾åçš„è¯ä¹¦ï¼Œå°±æƒ³æˆ‘ä»¬ä¸Šé¢æ­å»ºçš„HTTPSæœåŠ¡ä¸€æ ·ï¼Œå¦‚æœåœ¨ä¸åšä»»ä½•å¤„ç†çš„æƒ…å†µä¸‹åœ¨é¡¹ç›®ä¸­è®¿é—®è¿™æ ·çš„æœåŠ¡ï¼Œå°±ä¼šå‡ºç°é—®é¢˜äº†ï¼ŒåŸå› æ˜¯æˆ‘ä»¬è‡ªå·±åˆ›å»ºçš„è‡ªç­¾åè¯ä¹¦æ˜¯ä¸å—ä¿¡ä»»çš„ï¼Œç³»ç»Ÿé»˜è®¤æ‹’ç»äº†è¯·æ±‚ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678-(void)normalHttps&#123; NSURLRequest * req = [NSURLRequest requestWithURL:[NSURL URLWithString:@\"https://localhost:8080/users\"]]; NSURLSessionConfiguration * config = [NSURLSessionConfiguration defaultSessionConfiguration]; NSURLSession * session = [NSURLSession sessionWithConfiguration:config delegate:nil delegateQueue:[NSOperationQueue mainQueue]]; [[session dataTaskWithRequest:req completionHandler:^(NSData * _Nullable data, NSURLResponse * _Nullable response, NSError * _Nullable error) &#123; NSLog(@\"%@,%@\",[[NSString alloc]initWithData:data encoding:NSUTF8StringEncoding],error); &#125;] resume];&#125; è¿è¡Œå·¥ç¨‹åå¯ä»¥çœ‹åˆ°ï¼Œå¹¶æ²¡æœ‰è·å–åˆ°ç›¸å…³æ•°æ®ï¼ŒXcodeæç¤ºä¸ºï¼š 1NSURLSession/NSURLConnection HTTP load failed (kCFStreamErrorDomainSSL, -9802) å¥½äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å…ˆä¸ç®¡HTTPSçš„é—®é¢˜ï¼Œå¦‚æœæˆ‘ä»¬ç›´æ¥å¯¹HTTPåè®®çš„æœåŠ¡è¿›è¡Œè¯·æ±‚ï¼Œä¼šä¸ä¼šæœ‰é—®é¢˜å‘¢ï¼Œå°†ä»£ç ä¿®æ”¹å¦‚ä¸‹ï¼š 12345678-(void)normalHttps&#123; NSURLRequest * req = [NSURLRequest requestWithURL:[NSURL URLWithString:@\"http://localhost:3000/users\"]]; NSURLSessionConfiguration * config = [NSURLSessionConfiguration defaultSessionConfiguration]; NSURLSession * session = [NSURLSession sessionWithConfiguration:config delegate:nil delegateQueue:[NSOperationQueue mainQueue]]; [[session dataTaskWithRequest:req completionHandler:^(NSData * _Nullable data, NSURLResponse * _Nullable response, NSError * _Nullable error) &#123; NSLog(@\"%@,%@\",[[NSString alloc]initWithData:data encoding:NSUTF8StringEncoding],error); &#125;] resume];&#125; éœ€è¦æ³¨æ„ï¼šExpressåœ¨è¿›è¡Œé¡¹ç›®æ¨¡æ¿çš„åˆ›å»ºæ—¶ï¼Œä¼šé»˜è®¤å¸®æˆ‘ä»¬ç»‘å®šä¸€ä¸ª3000ç«¯å£çš„HTTPæœåŠ¡ã€‚ è¿è¡Œå·¥ç¨‹åï¼Œå¯ä»¥å‘ç°HTTPåè®®çš„è¯·æ±‚ä¹Ÿæ— æ³•è®¿é—®ï¼ŒæŠ¥é”™å¦‚ä¸‹ï¼š 1App Transport Security has blocked a cleartext HTTP (http://) resource load since it is insecure. Temporary exceptions can be configured via your app&apos;s Info.plist file. å…¶æ„æ€å¤§è‡´æ˜¯è¯´åº”ç”¨ç¨‹åºä¼ è¾“å®‰å…¨è¦æ±‚å¼ºåˆ¶ä½¿ç”¨HTTPSç±»å‹çš„æœåŠ¡ï¼Œä½†æ˜¯å¼€å‘è€…å¯ä»¥é€šè¿‡é…ç½®info.plsitæ–‡ä»¶æ¥å›é¿è¿™ä¸€æ”¿ç­–ã€‚è¿™å°±æ˜¯æˆ‘ä»¬è¿™èŠ‚çš„é‡ç‚¹ï¼Œé€šè¿‡æ–‡ä»¶é…ç½®çš„æ–¹å¼æ¥è·³è¿‡åº”ç”¨å®‰å…¨ä¼ è¾“åè®®ã€‚ åœ¨iOS9ä¹‹åï¼Œå¼€å‘è€…å¯ä»¥åœ¨Info.plistæ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹é”®ï¼šNSAppTransportSecurityã€‚è¿™ä¸ªé”®ç”¨æ¥é…ç½®APPä¼ è¾“å®‰å…¨çš„ç›¸å…³ç­–ç•¥ï¼Œæ˜¯å­—å…¸ç±»å‹ï¼Œå…¶ä¸­å¯ä»¥è®¾ç½®çš„é”®æœ‰äº”ä¸ªï¼Œå¦‚ä¸‹ï¼š NSAllowsArbitraryLoadsï¼šå¸ƒå°”å€¼ï¼Œé»˜è®¤ä¸ºNOï¼Œè®¾ç½®ä¸ºYESåˆ™ä»£è¡¨é™¤äº†NSExceptionDomainsä¸­è®¾ç½®çš„åŸŸåå¤–ï¼Œå…¶ä»–æ‰€æœ‰è¯·æ±‚çš„åè®®ç±»å‹éƒ½ä¸å—é™åˆ¶ï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥æ”¯æŒHTTPç±»å‹çš„è¯·æ±‚ï¼Œè¿™ä¸ªé”®çš„ä½œç”¨åŸŸæ˜¯å…¨å±€çš„ï¼ŒAppå†…æ‰€æœ‰çš„è¯·æ±‚éƒ½å—å½±å“ï¼Œä½†æ˜¯å¦‚æœå¼€å‘è€…è®¾ç½®ä¸ºäº†YESï¼Œåœ¨æäº¤å®¡æ ¸æ—¶éœ€è¦è¯´æ˜åŸå› ã€‚ NSAllowsArbitraryLoadsForMediaï¼šå¸ƒå°”å€¼ï¼Œé»˜è®¤ä¸ºNOï¼Œè®¾ç½®ä¸ºYESçš„è¯ï¼Œåˆ™åº”ç”¨ç¨‹åºå†…æ‰€æœ‰çš„åª’ä½“æ•°æ®çš„åŠ è½½å°†ä¸å—åè®®ç±»å‹çš„é™åˆ¶ï¼ŒåŒæ ·å¦‚æœå¼€å‘è€…è®¾ç½®ä¸ºäº†YESï¼Œåˆ™åœ¨æäº¤å®¡æ ¸æ—¶éœ€è¦è¯´æ˜åŸå› ã€‚ NSAllowsArbitraryLoadsInWebContentï¼šå¸ƒå°”å€¼ï¼Œé»˜è®¤ä¸ºNOã€‚å¦‚æœè®¾ç½®ä¸ºYESï¼Œåˆ™åº”ç”¨ç¨‹åºå†…æ‰€æœ‰WebViewçš„è¯·æ±‚åŠ è½½ä¸å—åè®®ç±»å‹çš„é™åˆ¶ï¼Œå¼€å‘è€…è®¾ç½®ä¸ºäº†YESï¼Œåˆ™åœ¨æäº¤å®¡æ ¸æ—¶éœ€è¦è¯´æ˜åŸå› ã€‚ NSAllowsLocalNetworkingï¼šå¸ƒå°”å€¼ï¼Œé»˜è®¤ä¸ºNOï¼Œå¦‚æœè®¾ç½®ä¸ºYESï¼Œåˆ™åœ¨åŠ è½½æœ¬åœ°èµ„æºæ—¶ä¸å—å®‰å…¨ä¼ è¾“åè®®çš„é™åˆ¶ã€‚ NSExceptionDomainsï¼šå­—å…¸ï¼Œå…¶ä¸»è¦å¯¹æŸäº›ç‰¹æ®ŠåŸŸååšé™åˆ¶ã€‚å…¶ä¸­ç»“æ„å¯ä»¥è¡¨ç¤ºå¦‚ä¸‹ï¼š 12345678910111213141516NSAppTransportSecurity : Dictionary &#123; NSAllowsArbitraryLoads : Boolean NSAllowsArbitraryLoadsForMedia : Boolean NSAllowsArbitraryLoadsInWebContent : Boolean NSAllowsLocalNetworking : Boolean //å¯¹æŸäº›åŸŸååšç‰¹æ®Šé™åˆ¶ NSExceptionDomains : Dictionary &#123; &lt;domain-name-string&gt; : Dictionary &#123; NSIncludesSubdomains : Boolean NSExceptionAllowsInsecureHTTPLoads : Boolean NSExceptionMinimumTLSVersion : String NSExceptionRequiresForwardSecrecy : Boolean // Default value is YES NSRequiresCertificateTransparency : Boolean &#125; &#125;&#125; NSIncludesSubdomainsï¼šå¸ƒå°”å€¼ï¼Œè¿™ä¸ªé”®çš„ä½œç”¨æ˜¯è®¾ç½®æ­¤åŸŸåä¸‹çš„æ‰€æœ‰å­åŸŸåæ˜¯å¦é‡‡ç”¨å’Œçˆ¶åŸŸåç›¸åŒçš„é…ç½®ã€‚ NSExceptionAllowsInsecureHTTPLoadsï¼šå¸ƒå°”å€¼ï¼Œè®¾ç½®æ˜¯å¦å…è®¸æ­¤åŸŸåä½¿ç”¨è‡ªç­¾åçš„è¯ä¹¦è¿›è¡Œè¯·æ±‚ï¼Œé»˜è®¤ä¸ºNOï¼Œå¦‚æœè®¾ç½®ä¸ºYESï¼Œåˆ™åœ¨æäº¤æ—¶éœ€è¦è¯´æ˜åŸå› ã€‚ NSExceptionMinimumTLSVersionï¼šè®¾ç½®æ‰€ä½¿ç”¨çš„TLSç‰ˆæœ¬ã€‚ NSExceptionRequiresForwardSecretï¼šè®¾ç½®ä¸ºNOï¼Œåˆ™ä¸å…è®¸å‘å‰åŠ å¯†æ–¹å¼ã€‚ NSRequiresCertificateTransparencyï¼šå¦‚æœè®¾ç½®ä¸ºYESï¼Œåˆ™æœåŠ¡ç«¯çš„è¯ä¹¦è¦æœ‰æœ‰æ•ˆçš„é€æ˜æ—¶é—´æˆ³ã€‚ å…­ã€iOSä¸­ä½¿ç”¨è‡ªç­¾åçš„è¯ä¹¦è¿›è¡ŒHTTPSè¯·æ±‚æ ¡éªŒé€šè¿‡Info.plistæ–‡ä»¶æˆ‘ä»¬æ˜¯å¯ä»¥ç»•è¿‡å®‰å…¨ä¼ è¾“åè®®çš„ï¼Œä½†æ˜¯ä¸å¹¸çš„æ˜¯ï¼Œä»æ–‡æ¡£ä¸Šçœ‹ï¼Œæ— è®ºå¼€å‘è€…é€šè¿‡å“ªç§æ–¹å¼æ¥ç»•è¿‡å®‰å…¨ä¼ è¾“åè®®ï¼ŒAppleéƒ½è¦æ±‚å¼€å‘è€…åœ¨æå®¡æ—¶æä¾›åˆé€‚çš„ç†ç”±ï¼Œè¿™å°±æ˜¯è¯´ï¼šå¦‚æœä½ ä½¿ç”¨äº†HTTPåè®®çš„è¯·æ±‚ï¼Œæ²¡æœ‰å……è¶³ç†ç”±çš„è¯ï¼Œä½ çš„Appæœ‰å¾ˆå¤§çš„å¯èƒ½è¢«å®¡æ ¸æ‹’ç»ã€‚å› æ­¤ï¼Œæ›´åŠ ä¿é™©çš„ä¸€ç§æ–¹å¼æ˜¯å°†æ‰€æœ‰çš„æœåŠ¡éƒ½æ¢æˆHTTPSåè®®çš„ï¼Œå¦‚æœæœ‰CAè¯ä¹¦ï¼Œå½“ç„¶å®Œäº‹å¤§å‰ï¼Œå¦‚æœæ²¡æœ‰ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡éªŒè¯è‡ªç­¾åè¯ä¹¦çš„æ–¹å¼æ¥é€‚é…HTTPSåè®®ã€‚ åœ¨è¿›è¡ŒHTTPSè¯·æ±‚æ—¶ï¼ŒæœåŠ¡ç«¯ä¼šå…ˆå°†è¯ä¹¦æ–‡ä»¶è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå¦‚æœå®¢æˆ·ç«¯çš„è¯ä¹¦ä¿¡ä»»åˆ—è¡¨ä¸­åŒ…å«è¿™ä¸ªè¯ä¹¦ï¼Œåˆ™æ­¤è¯·æ±‚å¯ä»¥æ­£å¸¸è¿›è¡Œï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™è¯·æ±‚ä¼šè¢«æ‹’ç»ã€‚å› æ­¤ï¼Œåœ¨iOSä¸­é€‚é…è‡ªç­¾åè¯ä¹¦çš„HTTPSè¯·æ±‚å®é™…ä¸Šå°±æ˜¯å°†è¿™ä¸ªè‡ªç­¾åçš„è¯ä¹¦å®‰è£…è¿›å®¢æˆ·ç«¯çš„ä¿¡ä»»åˆ—è¡¨ã€‚iOSä¸­éœ€è¦ä½¿ç”¨çš„è¯ä¹¦æ˜¯deræ ¼å¼çš„ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å°†pemæ ¼å¼çš„è¯ä¹¦è½¬æ¢æˆderæ ¼å¼çš„è¯ä¹¦ï¼š 1openssl x509 -inform PEM -in cert.pem -outform DER -out cert.der å°†ç”Ÿæˆçš„certæ–‡ä»¶æ·»åŠ è¿›å·¥ç¨‹ä¸­ï¼Œä¿®æ”¹è¯·æ±‚å¦‚ä¸‹ï¼š 123456789-(void)normalHttps&#123; NSURLRequest * req = [NSURLRequest requestWithURL:[NSURL URLWithString:@\"https://localhost:8080/users\"]]; NSURLSessionConfiguration * config = [NSURLSessionConfiguration defaultSessionConfiguration]; NSURLSession * session = [NSURLSession sessionWithConfiguration:config delegate:self delegateQueue:[NSOperationQueue mainQueue]]; NSURLSessionTask * task = [session dataTaskWithRequest:req completionHandler:^(NSData * _Nullable data, NSURLResponse * _Nullable response, NSError * _Nullable error) &#123; NSLog(@\"%@,%@\",[[NSString alloc]initWithData:data encoding:NSUTF8StringEncoding],error); &#125;]; [task resume];&#125; é™¤æ­¤ä¹‹å¤–ï¼Œéœ€è¦å®ç°ä¸€ä¸ªSURLSessionDelegateçš„åè®®æ–¹æ³•å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334- (void)URLSession:(NSURLSession *)session didReceiveChallenge:(NSURLAuthenticationChallenge *)challenge completionHandler:(void (^)(NSURLSessionAuthChallengeDisposition disposition, NSURLCredential * _Nullable credential))completionHandler &#123; NSLog(@\"è¯ä¹¦è®¤è¯\"); //å…ˆåˆ¤æ–­è¯ä¹¦æ˜¯å¦æœ‰æ•ˆ if ([[[challenge protectionSpace] authenticationMethod] isEqualToString: NSURLAuthenticationMethodServerTrust]) &#123; //è¯ä¹¦éªŒè¯è¯·æ±‚ SecTrustRef serverTrust = [[challenge protectionSpace] serverTrust]; /** * å¯¼å…¥å¤šå¼ CAè¯ä¹¦ï¼ˆCertification Authorityï¼Œæ”¯æŒSSLè¯ä¹¦ä»¥åŠè‡ªç­¾åçš„CAï¼‰ */ NSString *cerPath = [[NSBundle mainBundle] pathForResource:@\"cert\" ofType:@\"der\"];//è‡ªç­¾åè¯ä¹¦ NSData* caCert = [NSData dataWithContentsOfFile:cerPath]; //å¯ä»¥æ·»åŠ å¤šå¼ è¯ä¹¦ NSArray *caArray = @[caCert]; //éªŒè¯è§„åˆ™ NSMutableArray *policies = [NSMutableArray array]; [policies addObject:(__bridge_transfer id)SecPolicyCreateBasicX509()]; SecTrustSetPolicies(serverTrust, (__bridge CFArrayRef)policies); NSMutableArray *pinnedCertificates = [NSMutableArray array]; //è¿›è¡Œè‡ªç­¾åè¯ä¹¦çš„æ·»åŠ  for (NSData *certificateData in caArray) &#123; [pinnedCertificates addObject:(__bridge_transfer id)SecCertificateCreateWithData(NULL, (__bridge CFDataRef)certificateData)]; &#125; SecTrustSetAnchorCertificates(serverTrust, (__bridge CFArrayRef)pinnedCertificates); SecTrustResultType result = -1; //é€šè¿‡æœ¬åœ°å¯¼å…¥çš„è¯ä¹¦æ¥éªŒè¯æœåŠ¡å™¨çš„è¯ä¹¦æ˜¯å¦å¯ä¿¡ SecTrustEvaluate(serverTrust, &amp;result); NSURLCredential *credential = [NSURLCredential credentialForTrust:serverTrust]; completionHandler(NSURLSessionAuthChallengeUseCredential,credential); return [[challenge sender] useCredential: credential forAuthenticationChallenge: challenge]; &#125;&#125; å¦‚ä¸Šä¿®æ”¹åï¼Œå†æ¬¡è¿è¡Œå·¥ç¨‹ï¼Œå¯ä»¥çœ‹åˆ°å·²ç»æˆåŠŸè¯·æ±‚åˆ°äº†HTTPSè‡ªç­¾åè¯ä¹¦æœåŠ¡æä¾›çš„æ•°æ®ï¼š ä»‹äºç¯‡å¹…è¿‡é•¿ï¼Œå…³äºNSURLAuthenticationChallengeç›¸å…³ç±»çš„æ›´å¤šæ¢è®¨å’Œå¸¸ç”¨ç½‘ç»œåº“AFNetworkingä¸­HTTPSçš„é€‚é…ï¼Œä¸‹ç¯‡åšå®¢ä¼šç»§ç»­ä»‹ç»ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åäºŒâ€”â€”å·¨å¹•ä¸ç¼©ç•¥å›¾","slug":"282Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åäºŒâ€”â€”å·¨å¹•ä¸ç¼©ç•¥å›¾","date":"2016-12-13T16:00:00.000Z","updated":"2021-07-13T09:50:14.731Z","comments":true,"path":"2016/12/14/282Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åäºŒâ€”â€”å·¨å¹•ä¸ç¼©ç•¥å›¾/","link":"","permalink":"http://huishao.cc/2016/12/14/282Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åäºŒâ€”â€”å·¨å¹•ä¸ç¼©ç•¥å›¾/","excerpt":"","text":"Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åäºŒâ€”â€”å·¨å¹•ä¸ç¼©ç•¥å›¾å·¨å¹•ç”¨äºåˆ›å»ºä¸€å—åŒºåŸŸï¼Œæ­¤åŒºåŸŸå¯ä»¥ç”¨æ¥å±•ç¤ºç½‘é¡µé¡µå¤´æˆ–è€…éœ€è¦é‡ç‚¹æç¤ºçš„åœ°æ–¹ï¼Œä½¿ç”¨jumbotronç±»æ¥åˆ›å»ºå·¨å¹•ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456&lt;p&gt;å·¨å¹•æ¼”ç¤º&lt;/p&gt;&lt;div class=\"jumbotron\"&gt; &lt;h1&gt;å‹¿å¿˜å›½è€»ï¼ä¹ä¸€å…«ï¼&lt;/h1&gt; &lt;p&gt;ä¹ä¸€å…«äº‹å˜ï¼ˆåˆç§°å¥‰å¤©äº‹å˜ã€æŸ³æ¡æ¹–äº‹ä»¶ï¼‰æ˜¯æ—¥æœ¬åœ¨ä¸­å›½ä¸œåŒ—è“„æ„åˆ¶é€ å¹¶å‘åŠ¨çš„ä¸€åœºä¾µåæˆ˜äº‰ï¼Œæ˜¯æ—¥æœ¬å¸å›½ä¸»ä¹‰ä¾µåçš„å¼€ç«¯ã€‚1931å¹´9æœˆ18æ—¥å¤œï¼Œåœ¨æ—¥æœ¬å…³ä¸œå†›å®‰æ’ä¸‹ï¼Œé“é“â€œå®ˆå¤‡é˜Ÿâ€ç‚¸æ¯æ²ˆé˜³æŸ³æ¡æ¹–é™„è¿‘æ—¥æœ¬ä¿®ç­‘çš„å—æ»¡é“è·¯è·¯è½¨ï¼Œå¹¶æ ½èµƒå«ç¥¸äºä¸­å›½å†›é˜Ÿã€‚æ—¥å†›ä»¥æ­¤ä¸ºå€Ÿå£ï¼Œç‚®è½°æ²ˆé˜³åŒ—å¤§è¥ï¼Œæ˜¯ä¸ºâ€œä¹ä¸€å…«äº‹å˜â€ã€‚&lt;/p&gt; &lt;p&gt;&lt;a class=\"btn btn-primary btn-lg\"&gt;æŸ¥çœ‹è¯¦æƒ…&lt;/a&gt;&lt;/p&gt;&lt;/div&gt; æ•ˆæœå¦‚ä¸‹ï¼š é™¤äº†ä½¿ç”¨å·¨å¹•ï¼Œå¼€å‘è€…ä¹Ÿå¯ä»¥ä½¿ç”¨page-headerç±»æ¥åˆ›å»ºé¡µå¤´ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345&lt;p&gt;é¡µå¤´æ¼”ç¤º&lt;/p&gt;&lt;div class=\"page-header\"&gt; &lt;h1&gt;å‰äº‹ä¸å¿˜ï¼Œåäº‹ä¹‹å¸ˆï¼&lt;small&gt;ç¥­å¥ å—äº¬å¤§å± æ€ä¸­é‡éš¾çš„ä¸‰åä¸‡åŒèƒï¼&lt;/small&gt;&lt;/h1&gt;&lt;/div&gt;&lt;p&gt;å—äº¬å¤§å± æ€æŒ‡æŠ—æ—¥æˆ˜äº‰æœŸé—´ï¼Œä¸­å›½å½“æ—¶çš„é¦–éƒ½å—äº¬äº1937å¹´12æœˆ13æ—¥æ²¦é™·åï¼Œæ—¥å†›åœ¨å—äº¬åŠé™„è¿‘åœ°åŒºè¿›è¡Œé•¿è¾¾å››åå¤šå¤©çš„å¤§å± æ€[1] ã€‚æ—¥å†›åœ¨å—äº¬åŸå†…å¯¹å¤§é‡å¹³æ°‘åŠæˆ˜ä¿˜æ— æ¶ä¸ä½œã€‚å—äº¬å¤§å± æ€çš„æ­»äº¡äººæ•°è¶…è¿‡30ä¸‡ã€‚&lt;/p&gt; æ•ˆæœå¦‚ä¸‹ï¼š Bootstrapä¸­çš„ç¼©ç•¥å›¾ä¹Ÿååˆ†å®¹æ˜“åˆ›å»ºï¼Œä½¿ç”¨thumbnailç±»å¯ä»¥å°†å›¾ç‰‡å…ƒç´ åˆ›å»ºä¸ºç¼©ç•¥å›¾æ ·å¼ï¼Œå¦‚ä¸‹: 12345678&lt;p&gt;ç¼©ç•¥å›¾&lt;/p&gt;&lt;div class=\"row\"&gt; &lt;div class=\"col-xs-6 col-md-3\"&gt; &lt;a href=\"#\" class=\"thumbnail\"&gt; &lt;img src=\"image/test.png\"&gt; &lt;/a&gt; &lt;/div&gt;&lt;/div&gt; æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ç¼©ç•¥å›¾ç»„ä»¶ä¸­ä¹Ÿå¯ä»¥æ·»åŠ å…¶ä»–é™„ä»¶ï¼Œä¾‹å¦‚æ ‡é¢˜ï¼Œæ®µè½ï¼ŒæŒ‰é’®ç­‰ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516&lt;p&gt;ç¼©ç•¥å›¾ä¹Ÿå¯ä»¥æ·»åŠ ä¸€äº›é™„ä»¶&lt;/p&gt;&lt;div class=\"row\"&gt; &lt;div class=\"col-sm-6 col-md-4\"&gt; &lt;div class=\"thumbnail\"&gt; &lt;img src=\"image/nanjing.png\"&gt; &lt;div class=\"caption\"&gt; &lt;h3&gt;å›½å®¶å…¬ç¥­&lt;/h3&gt; &lt;p&gt;å—äº¬å¤§å± æ€æŒ‡æŠ—æ—¥æˆ˜äº‰æœŸé—´ï¼Œä¸­å›½å½“æ—¶çš„é¦–éƒ½å—äº¬äº1937å¹´12æœˆ13æ—¥æ²¦é™·åï¼Œæ—¥å†›åœ¨å—äº¬åŠé™„è¿‘åœ°åŒºè¿›è¡Œé•¿è¾¾å››åå¤šå¤©çš„å¤§å± æ€[1] ã€‚æ—¥å†›åœ¨å—äº¬åŸå†…å¯¹å¤§é‡å¹³æ°‘åŠæˆ˜ä¿˜è¿›è¡Œå± æ€ã€æŠ¢æ ã€å¼ºå¥¸ã€æ— æ¶ä¸ä½œã€‚å—äº¬å¤§å± æ€çš„æ­»äº¡äººæ•°è¶…è¿‡30ä¸‡ã€‚&lt;/p&gt; &lt;p&gt; &lt;a href=\"#\" class=\"btn btn-primary\" role=\"button\"&gt;ç½‘ä¸ŠçŒ®èŠ±&lt;/a&gt; &lt;a href=\"#\" class=\"btn btn-default\" role=\"button\"&gt;æ›´å¤šå²æ–™&lt;/a&gt; &lt;/p&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt;&lt;/div&gt; æ•ˆæœå¦‚ä¸‹ï¼š å¦å¤–ï¼Œæœ¬ç¯‡åšå®¢ä¸­æ‰€æœ‰çš„å®ä¾‹ä»£ç åŠæ˜¾ç¤ºæ•ˆæœï¼Œåœ¨å¦‚ä¸‹åœ°å€ä¸­ï¼Œéœ€è¦çš„å¯ä»¥è‡ªè¡Œå¯¹ç…§å­¦ä¹ ã€‚ http://zyhshao.github.io/bootStrapDemo/screen.htmlã€‚ å‰ç«¯å­¦ä¹ æ–°äººï¼Œæœ‰å¿—åŒé“åˆçš„æœ‹å‹ï¼Œæ¬¢è¿äº¤æµä¸æŒ‡å¯¼ï¼ŒQQç¾¤:541458536","categories":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}],"tags":[],"keywords":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}]},{"title":"Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åä¸€â€”â€”åˆ†é¡µä¸æ ‡ç­¾","slug":"281Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åä¸€â€”â€”åˆ†é¡µä¸æ ‡ç­¾","date":"2016-12-12T16:00:00.000Z","updated":"2021-07-13T09:49:14.215Z","comments":true,"path":"2016/12/13/281Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åä¸€â€”â€”åˆ†é¡µä¸æ ‡ç­¾/","link":"","permalink":"http://huishao.cc/2016/12/13/281Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åä¸€â€”â€”åˆ†é¡µä¸æ ‡ç­¾/","excerpt":"","text":"Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åä¸€â€”â€”åˆ†é¡µä¸æ ‡ç­¾åœ¨å¼€å‘æœç´¢ç»“æœé¡µã€åˆ—è¡¨é¡µæ—¶é€šå¸¸ä¼šä½¿ç”¨åˆ°åˆ†é¡µå™¨æ§ä»¶ï¼ŒBootstrapä¸­æä¾›äº†æ–¹ä¾¿çš„ç±»æ¥è¿›è¡Œåˆ†é¡µå™¨çš„åˆ›å»ºï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324&lt;p&gt;æ ‡å‡†çš„åˆ†é¡µå™¨æ§ä»¶&lt;/p&gt;&lt;ul class=\"pagination\"&gt; &lt;li&gt; &lt;a href=\"#\"&gt;&amp;laquo;&lt;/a&gt; &lt;/li&gt; &lt;li&gt; &lt;a href=\"#\"&gt;1&lt;/a&gt; &lt;/li&gt; &lt;li&gt; &lt;a href=\"#\"&gt;2&lt;/a&gt; &lt;/li&gt; &lt;li&gt; &lt;a href=\"#\"&gt;3&lt;/a&gt; &lt;/li&gt; &lt;li&gt; &lt;a href=\"#\"&gt;4&lt;/a&gt; &lt;/li&gt; &lt;li&gt; &lt;a href=\"#\"&gt;5&lt;/a&gt; &lt;/li&gt; &lt;li&gt; &lt;a href=\"#\"&gt;&amp;raquo;&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt; æ•ˆæœå¦‚ä¸‹ï¼š ä¸ºliå…ƒç´ æ·»åŠ disabledç±»æˆ–è€…activeç±»å¯ä»¥å°†å…¶è®¾ç½®ä¸ºç¦ç”¨æˆ–è€…æ¿€æ´»çŠ¶æ€ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324&lt;p&gt;ä½¿ç”¨disabledç±»ä¸activeç±»å¯ä»¥å°†é¡µæ ‡ç­¾è®¾ç½®ä¸ºç¦ç”¨æˆ–æ¿€æ´»&lt;/p&gt;&lt;ul class=\"pagination\"&gt; &lt;li class=\"disabled\"&gt; &lt;a href=\"#\"&gt;&amp;laquo;&lt;/a&gt; &lt;/li&gt; &lt;li class=\"active\"&gt; &lt;a href=\"#\"&gt;1&lt;/a&gt; &lt;/li&gt; &lt;li&gt; &lt;a href=\"#\"&gt;2&lt;/a&gt; &lt;/li&gt; &lt;li&gt; &lt;a href=\"#\"&gt;3&lt;/a&gt; &lt;/li&gt; &lt;li&gt; &lt;a href=\"#\"&gt;4&lt;/a&gt; &lt;/li&gt; &lt;li&gt; &lt;a href=\"#\"&gt;5&lt;/a&gt; &lt;/li&gt; &lt;li&gt; &lt;a href=\"#\"&gt;&amp;raquo;&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt; æ•ˆæœå¦‚ä¸‹å›¾ï¼š é™¤äº†åˆ†é¡µå™¨æ§ä»¶ï¼ŒBootstrapä¸­è¿˜æä¾›äº†ä¸€ç§æ›´ä¸ºç®€å•çš„åˆ†é¡µæ§ä»¶ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789&lt;p&gt;åªæœ‰å‰è¿›ä¸åé€€çš„åˆ†é¡µå™¨&lt;/p&gt;&lt;ul class=\"pager\"&gt; &lt;li&gt; &lt;a href=\"#\"&gt;Previous&lt;/a&gt; &lt;/li&gt; &lt;li&gt; &lt;a href=\"#\"&gt;Next&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt; æ•ˆæœå¦‚ä¸‹ï¼š è¿™ç§åˆ†é¡µæ§ä»¶é»˜è®¤æ˜¯å±…ä¸­çš„ï¼Œä½¿ç”¨previousä¸nextç±»å¯ä»¥å®ç°ä¸¤ç«¯å¯¹é½çš„æ•ˆæœï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789&lt;p&gt;è¿›è¡Œä¸¤ç«¯å¯¹é½&lt;/p&gt;&lt;ul class=\"pager\"&gt; &lt;li class=\"previous\"&gt; &lt;a href=\"#\"&gt;Previous&lt;/a&gt; &lt;/li&gt; &lt;li class=\"next\"&gt; &lt;a href=\"#\"&gt;Next&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt; æ•ˆæœå¦‚ä¸‹ï¼š Bootstrapä¸­çš„æ ‡ç­¾æ˜¯ä¸€ç§ç”¨äºå±•ç¤ºæ–‡æœ¬çš„æ§ä»¶ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567&lt;p&gt;æ ‡ç­¾æ§ä»¶æ¼”ç¤º&lt;/p&gt;&lt;span class=\"label label-default\"&gt;æ ‡ç­¾&lt;/span&gt;&lt;span class=\"label label-primary\"&gt;æ ‡ç­¾&lt;/span&gt;&lt;span class=\"label label-success\"&gt;æ ‡ç­¾&lt;/span&gt;&lt;span class=\"label label-info\"&gt;æ ‡ç­¾&lt;/span&gt;&lt;span class=\"label label-warning\"&gt;æ ‡ç­¾&lt;/span&gt;&lt;span class=\"label label-danger\"&gt;æ ‡ç­¾&lt;/span&gt; æ•ˆæœå¦‚ä¸‹ï¼š å¼€å‘è€…ä¹Ÿå¯ä»¥ä½¿ç”¨badgeç±»æ¥åˆ›å»ºæ°”æ³¡ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456&lt;p&gt;è¿›è¡Œæ°”æ³¡çš„åˆ›å»º&lt;/p&gt;&lt;a href=\"#\"&gt;é“¾æ¥&lt;span class=\"badge\"&gt;3&lt;/span&gt;&lt;/a&gt;&lt;button class=\"btn btn-primary\" type=\"button\"&gt; æŒ‰é’® &lt;span class=\"badge\"&gt;4&lt;/span&gt;&lt;/button&gt; å¦å¤–ï¼Œæœ¬ç¯‡åšå®¢ä¸­æ‰€æœ‰çš„å®ä¾‹ä»£ç åŠæ˜¾ç¤ºæ•ˆæœï¼Œåœ¨å¦‚ä¸‹åœ°å€ä¸­ï¼Œéœ€è¦çš„å¯ä»¥è‡ªè¡Œå¯¹ç…§å­¦ä¹ ã€‚ http://zyhshao.github.io/bootStrapDemo/pageAndLabel.htmlã€‚ å‰ç«¯å­¦ä¹ æ–°äººï¼Œæœ‰å¿—åŒé“åˆçš„æœ‹å‹ï¼Œæ¬¢è¿äº¤æµä¸æŒ‡å¯¼ï¼ŒQQç¾¤:541458536","categories":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}],"tags":[],"keywords":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}]},{"title":"Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åâ€”â€”å¯¼èˆªæ ç›¸å…³ç»„ä»¶","slug":"280Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åâ€”â€”å¯¼èˆªæ ç›¸å…³ç»„ä»¶","date":"2016-12-11T16:00:00.000Z","updated":"2021-07-13T08:56:20.635Z","comments":true,"path":"2016/12/12/280Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åâ€”â€”å¯¼èˆªæ ç›¸å…³ç»„ä»¶/","link":"","permalink":"http://huishao.cc/2016/12/12/280Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åâ€”â€”å¯¼èˆªæ ç›¸å…³ç»„ä»¶/","excerpt":"","text":"Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åâ€”â€”å¯¼èˆªæ ç›¸å…³ç»„ä»¶Bootstrapä¸­æä¾›çš„å¯¼èˆªæ åˆ†ä¸ºä¸¤ç§æ¨¡å¼ï¼Œä½¿ç”¨nav-tabsç±»å¯ä»¥åˆ›å»ºé¡µå¡æ¨¡å¼çš„å¯¼èˆªæ ï¼Œä½¿ç”¨nav-pillsç±»å¯ä»¥åˆ›å»ºèƒ¶å›Šæ¨¡å¼çš„å¯¼èˆªæ ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314&lt;p&gt;å¯¼èˆªåˆ†ä¸ºä¸¤ç§ï¼Œé¡µå¡æ¨¡å¼å’Œèƒ¶å›Šæ¨¡å¼&lt;/p&gt;&lt;p&gt;é¡µå¡æ¨¡å¼&lt;/p&lt;ul class=\"nav nav-tabs\"&gt; &lt;li class=\"active\"&gt;&lt;a&gt;ä¸»é¡µ&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a&gt;æ´»åŠ¨&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a&gt;ç•™è¨€&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;hr /&gt;&lt;p&gt;èƒ¶å›Šæ¨¡å¼&lt;/p&gt;&lt;ul class=\"nav nav-pills\"&gt; &lt;li class=\"active\"&gt;&lt;a&gt;ä¸»é¡µ&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a&gt;æ´»åŠ¨&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a&gt;ç•™è¨€&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt; æ•ˆæœå¦‚ä¸‹å›¾ï¼š é’ˆå¯¹èƒ¶å›Šå¼å¯¼èˆªï¼Œä¹Ÿå¯ä»¥è®¾ç½®å…¶æ’åˆ—æ–¹å‘ä¸ºå †å ï¼Œæ·»åŠ nav-stackedç±»å³å¯ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456&lt;p&gt;å †å æ’åˆ—çš„èƒ¶å›Šå¯¼èˆª&lt;/p&gt;&lt;ul class=\"nav nav-pills nav-stacked\"&gt; &lt;li class=\"active\"&gt;&lt;a&gt;ä¸»é¡µ&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a&gt;æ´»åŠ¨&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a&gt;ç•™è¨€&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt; æ•ˆæœå¦‚ä¸‹ï¼š å¯¼èˆªä¸­ä¹Ÿå¯ä»¥è¿›è¡Œä¸‹æ‹‰èœå•çš„åµŒå¥—ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314151617&lt;p&gt;å¯¼èˆªä¸­åµŒå¥—ä¸‹æ‹‰èœå•&lt;/p&gt;&lt;ul class=\"nav nav-pills\"&gt; &lt;li&gt;&lt;a&gt;ä¸»é¡µ&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a&gt;æ´»åŠ¨&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a&gt;ç•™è¨€&lt;/a&gt;&lt;/li&gt; &lt;li class=\"dropdown active\"&gt; &lt;a class=\"dropdown-toggle\"&gt; æ›´å¤š &lt;span class=\"caret\"&gt;&lt;/span&gt; &lt;/a&gt; &lt;ul class=\"dropdown-menu\"&gt; &lt;li&gt;&lt;a&gt;ä¸ªäººä¸­å¿ƒ&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a&gt;è®¾ç½®&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a&gt;é€€å‡º&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt;&lt;/ul&gt; æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š é™¤äº†é»˜è®¤çš„å¯¼èˆªæ ç»„ä»¶ï¼ŒBootstrapä¸­è¿˜æ”¯æŒè‡ªå®šä¹‰å¯¼èˆªæ¡ï¼Œä½¿ç”¨navbarç±»å¯ä»¥åˆ›å»ºå¯¼èˆªæ¡å®¹å™¨ï¼Œå…¶å†…å¯ä»¥å¸ƒå±€å›¾æ ‡ï¼Œæ–‡æœ¬ï¼ŒæŒ‰é’®å’Œè¡¨å•ç­‰ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516&lt;p&gt;è‡ªå®šä¹‰å¯¼èˆªæ¡&lt;/p&gt;&lt;nav class=\"navbar navbar-default\"&gt; &lt;div class=\"container\"&gt; &lt;div class=\"navbar-header\"&gt; &lt;a class=\"navbar-brand\"&gt;&lt;img src=\"image/icon.png\" width=\"20px\" /&gt;&lt;/a&gt; &lt;/div&gt; &lt;form class=\"navbar-form navbar-left\"&gt; &lt;div class=\"form-group\"&gt; &lt;input type=\"text\" class=\"form-control\" placeholder=\"Search\"&gt; &lt;/div&gt; &lt;button class=\"btn btn-default\"&gt;Search&lt;/button&gt; &lt;/form&gt; &lt;button class=\"btn btn-warning navbar-btn navbar-left\"&gt;æç¤º&lt;/button&gt; &lt;p class=\"navbar-text\"&gt;å¯¼èˆªæ–‡æœ¬&lt;/p&gt; &lt;/div&gt;&lt;/nav&gt; æ•ˆæœå¦‚ä¸‹å›¾ï¼š ä½¿ç”¨navbar-fixed-topç±»æˆ–è€…navbar-fixed-bottomç±»å¯ä»¥å°†å¯¼èˆªæ¡å›ºå®šåœ¨é¡¶éƒ¨æˆ–åº•éƒ¨ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233&lt;p&gt;å°†å¯¼èˆªæ å›ºå®šåœ¨é¡¶éƒ¨&lt;/p&gt; &lt;nav class=\"navbar navbar-default navbar-fixed-top\"&gt; &lt;div class=\"container\"&gt; &lt;div class=\"navbar-header\"&gt; &lt;a class=\"navbar-brand\"&gt;&lt;img src=\"image/icon.png\" width=\"20px\" /&gt;&lt;/a&gt; &lt;/div&gt; &lt;form class=\"navbar-form navbar-left\"&gt; &lt;div class=\"form-group\"&gt; &lt;input type=\"text\" class=\"form-control\" placeholder=\"Search\"&gt; &lt;/div&gt; &lt;button class=\"btn btn-default\"&gt;Search&lt;/button&gt; &lt;/form&gt; &lt;button class=\"btn btn-warning navbar-btn navbar-left\"&gt;æç¤º&lt;/button&gt; &lt;p class=\"navbar-text\"&gt;å¯¼èˆªæ–‡æœ¬&lt;/p&gt; &lt;/div&gt; &lt;/nav&gt; &lt;hr /&gt; &lt;p&gt;å°†å¯¼èˆªæ å›ºå®šåœ¨åº•éƒ¨&lt;/p&gt; &lt;nav class=\"navbar navbar-default navbar-fixed-bottom\"&gt; &lt;div class=\"container\"&gt; &lt;div class=\"navbar-header\"&gt; &lt;a class=\"navbar-brand\"&gt;&lt;img src=\"image/icon.png\" width=\"20px\" /&gt;&lt;/a&gt; &lt;/div&gt; &lt;form class=\"navbar-form navbar-left\"&gt; &lt;div class=\"form-group\"&gt; &lt;input type=\"text\" class=\"form-control\" placeholder=\"Search\"&gt; &lt;/div&gt; &lt;button class=\"btn btn-default\"&gt;Search&lt;/button&gt; &lt;/form&gt; &lt;button class=\"btn btn-warning navbar-btn navbar-left\"&gt;æç¤º&lt;/button&gt; &lt;p class=\"navbar-text\"&gt;å¯¼èˆªæ–‡æœ¬&lt;/p&gt; &lt;/div&gt; &lt;/nav&gt; ä½¿ç”¨navbar-inverseç±»å¯ä»¥å°†å¯¼èˆªæ¡è¿›è¡Œåè‰²å¤„ç†ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516&lt;p&gt;å°†å¯¼èˆªæ¡è¿›è¡Œåè‰²å¤„ç†&lt;/p&gt;&lt;nav class=\"navbar navbar-default navbar-inverse\"&gt; &lt;div class=\"container\"&gt; &lt;div class=\"navbar-header\"&gt; &lt;a class=\"navbar-brand\"&gt;&lt;img src=\"image/icon.png\" width=\"20px\" /&gt;&lt;/a&gt; &lt;/div&gt; &lt;form class=\"navbar-form navbar-left\"&gt; &lt;div class=\"form-group\"&gt; &lt;input type=\"text\" class=\"form-control\" placeholder=\"Search\"&gt; &lt;/div&gt; &lt;button class=\"btn btn-default\"&gt;Search&lt;/button&gt; &lt;/form&gt; &lt;button class=\"btn btn-warning navbar-btn navbar-left\"&gt;æç¤º&lt;/button&gt; &lt;p class=\"navbar-text\"&gt;å¯¼èˆªæ–‡æœ¬&lt;/p&gt; &lt;/div&gt;&lt;/nav&gt; æ•ˆæœå¦‚ä¸‹å›¾ï¼š Bootstrapä¹Ÿæ”¯æŒè¿›è¡Œè·¯å¾„å¯¼èˆªçš„åˆ›å»ºï¼Œå…¶éœ€è¦ä½¿ç”¨æœ‰åºåˆ—è¡¨é…åˆbreadcrumbç±»ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910&lt;p&gt;è¿›è¡Œè·¯å¾„å¯¼èˆªçš„åˆ›å»º&lt;/p&gt;&lt;ol class=\"breadcrumb\"&gt; &lt;li&gt; &lt;a href=\"#\"&gt;ä¸»é¡µ&lt;/a&gt; &lt;/li&gt; &lt;li&gt; &lt;a href=\"#\"&gt;æ–°é—»åˆ—è¡¨&lt;/a&gt; &lt;/li&gt; &lt;li class=\"active\"&gt;å›½é™…æ–°é—»&lt;/li&gt;&lt;/ol&gt; æ•ˆæœå¦‚ä¸‹å›¾ï¼š å¦å¤–ï¼Œæœ¬ç¯‡åšå®¢ä¸­æ‰€æœ‰çš„å®ä¾‹ä»£ç åŠæ˜¾ç¤ºæ•ˆæœï¼Œåœ¨å¦‚ä¸‹åœ°å€ä¸­ï¼Œéœ€è¦çš„å¯ä»¥è‡ªè¡Œå¯¹ç…§å­¦ä¹ ã€‚ http://zyhshao.github.io/bootStrapDemo/navigation.htmlã€‚ å‰ç«¯å­¦ä¹ æ–°äººï¼Œæœ‰å¿—åŒé“åˆçš„æœ‹å‹ï¼Œæ¬¢è¿äº¤æµä¸æŒ‡å¯¼ï¼ŒQQç¾¤:541458536","categories":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}],"tags":[],"keywords":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}]},{"title":"Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°ä¹â€”â€”è¾“å…¥æ¡†ç»„","slug":"279Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åâ€”â€”å¯¼èˆªæ ç›¸å…³ç»„ä»¶","date":"2016-12-10T16:00:00.000Z","updated":"2021-07-13T08:52:55.403Z","comments":true,"path":"2016/12/11/279Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åâ€”â€”å¯¼èˆªæ ç›¸å…³ç»„ä»¶/","link":"","permalink":"http://huishao.cc/2016/12/11/279Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°åâ€”â€”å¯¼èˆªæ ç›¸å…³ç»„ä»¶/","excerpt":"","text":"Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°ä¹â€”â€”è¾“å…¥æ¡†ç»„å°†inputæ ‡ç­¾ä¸input-group-addonç±»ç»„åˆä½¿ç”¨å¯ä»¥ä¸ºè¾“å…¥æ¡†æ·»åŠ å‰åæŒ‚ä»¶ï¼Œéœ€è¦æ³¨æ„ï¼ŒBootstrapä¸æ”¯æŒåœ¨è¾“å…¥æ¡†æ§ä»¶ä¸€ä¾§æ·»åŠ å¤šä¸ªæŒ‚ä»¶ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516&lt;p&gt;è¾“å…¥æ¡†çš„å‰åå¯ä»¥æ·»åŠ é¢å¤–çš„æ ‡é¢˜å…ƒç´ &lt;/p&gt;&lt;div class=\"input-group form-group\"&gt; &lt;span class=\"input-group-addon\"&gt;é‚®ç®±&lt;/span&gt; &lt;input type=\"text\" class=\"form-control\" placeholder=\"é‚®ç®±\"&gt;&lt;/div&gt;&lt;div class=\"input-group form-group\"&gt; &lt;input type=\"text\" class=\"form-control\"&gt; &lt;span class=\"input-group-addon\"&gt;å¹³ç±³&lt;/span&gt;&lt;/div&gt;&lt;div class=\"input-group form-group\"&gt; &lt;span class=\"input-group-addon\"&gt;ä½™é¢&lt;/span&gt; &lt;input type=\"text\" class=\"form-control\"&gt; &lt;span class=\"input-group-addon\"&gt;.00&lt;/span&gt;&lt;/div&gt; æ•ˆæœå¦‚ä¸‹ï¼š ä¹Ÿå¯ä»¥å°†è¾“å…¥æ¡†ç»„åˆä¸ºé€‰æ‹©æ§ä»¶ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213&lt;p&gt;å°†è¾“å…¥æ¡†ç»„åˆä¸ºé€‰æ‹©ç»„ä»¶&lt;/p&gt;&lt;div class=\"input-group form-group\"&gt; &lt;span class=\"input-group-addon\"&gt; &lt;input type=\"checkbox\"&gt; &lt;/span&gt; &lt;input type=\"text\" class=\"form-control\"&gt;&lt;/div&gt;&lt;div class=\"input-group form-group\"&gt; &lt;span class=\"input-group-addon\"&gt; &lt;input type=\"radio\"&gt; &lt;/span&gt; &lt;input type=\"text\" class=\"form-control\"&gt;&lt;/div&gt; æ•ˆæœå¦‚ä¸‹ï¼š åœ¨è¾“å…¥æ¡†çš„å‰åï¼Œä¹Ÿå¯ä»¥æ·»åŠ åŠŸèƒ½æŒ‰é’®ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213&lt;p&gt;ä¸ºè¾“å…¥æ¡†æ·»åŠ åŠŸèƒ½æŒ‰é’®&lt;/p&gt;&lt;div class=\"input-group form-group\"&gt; &lt;span class=\"input-group-btn\"&gt; &lt;button class=\"btn btn-default\" type=\"button\"&gt;æ˜Ÿåº§&lt;/button&gt; &lt;/span&gt; &lt;input type=\"text\" class=\"form-control\"&gt;&lt;/div&gt;&lt;div class=\"input-group form-group\"&gt; &lt;input type=\"text\" class=\"form-control\"&gt; &lt;span class=\"input-group-btn\"&gt; &lt;button class=\"btn btn-primary\" type=\"button\"&gt;å‰å¾€&lt;/button&gt; &lt;/span&gt;&lt;/div&gt; æ•ˆæœå¦‚ä¸‹å›¾ï¼š åœ¨è¾“å…¥æ¡†ç»„ä»¶ä¸­ï¼Œä¹Ÿå¯ä»¥ä¸ä¸‹æ‹‰èœå•è¿›è¡ŒåµŒå¥—ä½¿ç”¨ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344&lt;p&gt;åœ¨è¾“å…¥æ¡†ç»„ä»¶ä¸­åµŒå¥—ä¸‹æ‹‰èœå•ç»„ä»¶&lt;/p&gt;&lt;div class=\"input-group\"&gt; &lt;div class=\"input-group-btn\"&gt; &lt;button type=\"button\" class=\"btn btn-default dropdown-toggle\"&gt;æ˜Ÿåº§ &lt;span class=\"caret\"&gt;&lt;/span&gt;&lt;/button&gt; &lt;ul class=\"dropdown-menu\"&gt; &lt;li&gt; &lt;a href=\"#\"&gt;é‡‘ç‰›&lt;/a&gt; &lt;/li&gt; &lt;li&gt; &lt;a href=\"#\"&gt;ç‹®å­&lt;/a&gt; &lt;/li&gt; &lt;li&gt; &lt;a href=\"#\"&gt;æ‘©ç¾¯&lt;/a&gt; &lt;/li&gt; &lt;li class=\"divider\"&gt;&lt;/li&gt; &lt;li&gt; &lt;a href=\"#\"&gt;æ— &lt;/a&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;input type=\"text\" class=\"form-control\"&gt;&lt;/div&gt;&lt;div class=\"input-group\"&gt; &lt;input type=\"text\" class=\"form-control\"&gt; &lt;div class=\"input-group-btn\"&gt; &lt;button type=\"button\" class=\"btn btn-default\"&gt;é‡‘ç‰›&lt;/button&gt; &lt;button class=\"btn btn-default dropdown-toggle\"&gt;&lt;span class=\"caret\"&gt;&lt;/span&gt;&lt;/button&gt; &lt;ul class=\"dropdown-menu\"&gt; &lt;li&gt; &lt;a href=\"#\"&gt;é‡‘ç‰›&lt;/a&gt; &lt;/li&gt; &lt;li&gt; &lt;a href=\"#\"&gt;ç‹®å­&lt;/a&gt; &lt;/li&gt; &lt;li&gt; &lt;a href=\"#\"&gt;æ‘©ç¾¯&lt;/a&gt; &lt;/li&gt; &lt;li class=\"divider\"&gt;&lt;/li&gt; &lt;li&gt; &lt;a href=\"#\"&gt;æ— &lt;/a&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/div&gt;&lt;/div&gt; æ•ˆæœå¦‚ä¸‹ï¼š å¦å¤–ï¼Œæœ¬ç¯‡åšå®¢ä¸­æ‰€æœ‰çš„å®ä¾‹ä»£ç åŠæ˜¾ç¤ºæ•ˆæœï¼Œåœ¨å¦‚ä¸‹åœ°å€ä¸­ï¼Œéœ€è¦çš„å¯ä»¥è‡ªè¡Œå¯¹ç…§å­¦ä¹ ã€‚ http://zyhshao.github.io/bootStrapDemo/inputGroup.htmlã€‚ å‰ç«¯å­¦ä¹ æ–°äººï¼Œæœ‰å¿—åŒé“åˆçš„æœ‹å‹ï¼Œæ¬¢è¿äº¤æµä¸æŒ‡å¯¼ï¼ŒQQç¾¤:541458536","categories":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}],"tags":[],"keywords":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}]},{"title":"Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°ä¹â€”â€”è¾“å…¥æ¡†ç»„","slug":"278Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°ä¹â€”â€”è¾“å…¥æ¡†ç»„","date":"2016-12-10T16:00:00.000Z","updated":"2021-07-13T08:52:55.403Z","comments":true,"path":"2016/12/11/278Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°ä¹â€”â€”è¾“å…¥æ¡†ç»„/","link":"","permalink":"http://huishao.cc/2016/12/11/278Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°ä¹â€”â€”è¾“å…¥æ¡†ç»„/","excerpt":"","text":"Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°ä¹â€”â€”è¾“å…¥æ¡†ç»„å°†inputæ ‡ç­¾ä¸input-group-addonç±»ç»„åˆä½¿ç”¨å¯ä»¥ä¸ºè¾“å…¥æ¡†æ·»åŠ å‰åæŒ‚ä»¶ï¼Œéœ€è¦æ³¨æ„ï¼ŒBootstrapä¸æ”¯æŒåœ¨è¾“å…¥æ¡†æ§ä»¶ä¸€ä¾§æ·»åŠ å¤šä¸ªæŒ‚ä»¶ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516&lt;p&gt;è¾“å…¥æ¡†çš„å‰åå¯ä»¥æ·»åŠ é¢å¤–çš„æ ‡é¢˜å…ƒç´ &lt;/p&gt;&lt;div class=\"input-group form-group\"&gt; &lt;span class=\"input-group-addon\"&gt;é‚®ç®±&lt;/span&gt; &lt;input type=\"text\" class=\"form-control\" placeholder=\"é‚®ç®±\"&gt;&lt;/div&gt;&lt;div class=\"input-group form-group\"&gt; &lt;input type=\"text\" class=\"form-control\"&gt; &lt;span class=\"input-group-addon\"&gt;å¹³ç±³&lt;/span&gt;&lt;/div&gt;&lt;div class=\"input-group form-group\"&gt; &lt;span class=\"input-group-addon\"&gt;ä½™é¢&lt;/span&gt; &lt;input type=\"text\" class=\"form-control\"&gt; &lt;span class=\"input-group-addon\"&gt;.00&lt;/span&gt;&lt;/div&gt; æ•ˆæœå¦‚ä¸‹ï¼š ä¹Ÿå¯ä»¥å°†è¾“å…¥æ¡†ç»„åˆä¸ºé€‰æ‹©æ§ä»¶ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213&lt;p&gt;å°†è¾“å…¥æ¡†ç»„åˆä¸ºé€‰æ‹©ç»„ä»¶&lt;/p&gt;&lt;div class=\"input-group form-group\"&gt; &lt;span class=\"input-group-addon\"&gt; &lt;input type=\"checkbox\"&gt; &lt;/span&gt; &lt;input type=\"text\" class=\"form-control\"&gt;&lt;/div&gt;&lt;div class=\"input-group form-group\"&gt; &lt;span class=\"input-group-addon\"&gt; &lt;input type=\"radio\"&gt; &lt;/span&gt; &lt;input type=\"text\" class=\"form-control\"&gt;&lt;/div&gt; æ•ˆæœå¦‚ä¸‹ï¼š åœ¨è¾“å…¥æ¡†çš„å‰åï¼Œä¹Ÿå¯ä»¥æ·»åŠ åŠŸèƒ½æŒ‰é’®ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213&lt;p&gt;ä¸ºè¾“å…¥æ¡†æ·»åŠ åŠŸèƒ½æŒ‰é’®&lt;/p&gt;&lt;div class=\"input-group form-group\"&gt; &lt;span class=\"input-group-btn\"&gt; &lt;button class=\"btn btn-default\" type=\"button\"&gt;æ˜Ÿåº§&lt;/button&gt; &lt;/span&gt; &lt;input type=\"text\" class=\"form-control\"&gt;&lt;/div&gt;&lt;div class=\"input-group form-group\"&gt; &lt;input type=\"text\" class=\"form-control\"&gt; &lt;span class=\"input-group-btn\"&gt; &lt;button class=\"btn btn-primary\" type=\"button\"&gt;å‰å¾€&lt;/button&gt; &lt;/span&gt;&lt;/div&gt; æ•ˆæœå¦‚ä¸‹å›¾ï¼š åœ¨è¾“å…¥æ¡†ç»„ä»¶ä¸­ï¼Œä¹Ÿå¯ä»¥ä¸ä¸‹æ‹‰èœå•è¿›è¡ŒåµŒå¥—ä½¿ç”¨ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344&lt;p&gt;åœ¨è¾“å…¥æ¡†ç»„ä»¶ä¸­åµŒå¥—ä¸‹æ‹‰èœå•ç»„ä»¶&lt;/p&gt;&lt;div class=\"input-group\"&gt; &lt;div class=\"input-group-btn\"&gt; &lt;button type=\"button\" class=\"btn btn-default dropdown-toggle\"&gt;æ˜Ÿåº§ &lt;span class=\"caret\"&gt;&lt;/span&gt;&lt;/button&gt; &lt;ul class=\"dropdown-menu\"&gt; &lt;li&gt; &lt;a href=\"#\"&gt;é‡‘ç‰›&lt;/a&gt; &lt;/li&gt; &lt;li&gt; &lt;a href=\"#\"&gt;ç‹®å­&lt;/a&gt; &lt;/li&gt; &lt;li&gt; &lt;a href=\"#\"&gt;æ‘©ç¾¯&lt;/a&gt; &lt;/li&gt; &lt;li class=\"divider\"&gt;&lt;/li&gt; &lt;li&gt; &lt;a href=\"#\"&gt;æ— &lt;/a&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;input type=\"text\" class=\"form-control\"&gt;&lt;/div&gt;&lt;div class=\"input-group\"&gt; &lt;input type=\"text\" class=\"form-control\"&gt; &lt;div class=\"input-group-btn\"&gt; &lt;button type=\"button\" class=\"btn btn-default\"&gt;é‡‘ç‰›&lt;/button&gt; &lt;button class=\"btn btn-default dropdown-toggle\"&gt;&lt;span class=\"caret\"&gt;&lt;/span&gt;&lt;/button&gt; &lt;ul class=\"dropdown-menu\"&gt; &lt;li&gt; &lt;a href=\"#\"&gt;é‡‘ç‰›&lt;/a&gt; &lt;/li&gt; &lt;li&gt; &lt;a href=\"#\"&gt;ç‹®å­&lt;/a&gt; &lt;/li&gt; &lt;li&gt; &lt;a href=\"#\"&gt;æ‘©ç¾¯&lt;/a&gt; &lt;/li&gt; &lt;li class=\"divider\"&gt;&lt;/li&gt; &lt;li&gt; &lt;a href=\"#\"&gt;æ— &lt;/a&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/div&gt;&lt;/div&gt; æ•ˆæœå¦‚ä¸‹ï¼š å¦å¤–ï¼Œæœ¬ç¯‡åšå®¢ä¸­æ‰€æœ‰çš„å®ä¾‹ä»£ç åŠæ˜¾ç¤ºæ•ˆæœï¼Œåœ¨å¦‚ä¸‹åœ°å€ä¸­ï¼Œéœ€è¦çš„å¯ä»¥è‡ªè¡Œå¯¹ç…§å­¦ä¹ ã€‚ http://zyhshao.github.io/bootStrapDemo/inputGroup.htmlã€‚ å‰ç«¯å­¦ä¹ æ–°äººï¼Œæœ‰å¿—åŒé“åˆçš„æœ‹å‹ï¼Œæ¬¢è¿äº¤æµä¸æŒ‡å¯¼ï¼ŒQQç¾¤:541458536","categories":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}],"tags":[],"keywords":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}]},{"title":"Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°å…«â€”â€”æŒ‰é’®ç»„","slug":"277Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°å…«â€”â€”æŒ‰é’®ç»„","date":"2016-12-09T16:00:00.000Z","updated":"2021-07-12T11:10:21.085Z","comments":true,"path":"2016/12/10/277Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°å…«â€”â€”æŒ‰é’®ç»„/","link":"","permalink":"http://huishao.cc/2016/12/10/277Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°å…«â€”â€”æŒ‰é’®ç»„/","excerpt":"","text":"Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°å…«â€”â€”æŒ‰é’®ç»„åœ¨Bootstrapå®šä¹‰çš„Cssæ ·å¼ä¸­ï¼Œå¼€å‘è€…å¯ä»¥å°†ä¸€ç»„btnæ§ä»¶åŒ…è£¹åœ¨btn-groupç±»ä¸­ä½¿å…¶ç»„åˆæˆæŒ‰é’®ç»„æ§ä»¶ï¼Œç»„åˆåçš„æ§ä»¶å·¦å³ä¸¤ä¾§çš„æŒ‰é’®å°†è¢«åœ†è§’å¤„ç†ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456&lt;p&gt;æ­£å¸¸çš„æŒ‰é’®ç»„&lt;/p&gt;&lt;div class=\"btn-group\"&gt; &lt;button class=\"btn btn-default\"&gt;å·¦æŒ‰é’®&lt;/button&gt; &lt;button class=\"btn btn-danger\"&gt;ä¸­å¿ƒæŒ‰é’®&lt;/button&gt; &lt;button class=\"btn btn-primary\"&gt;å³æŒ‰é’®&lt;/button&gt;&lt;/div&gt; æ•ˆæœå¦‚ä¸‹ï¼š ä¹Ÿå¯ä»¥å°†ä¸€ç»„æŒ‰é’®ç»„åŒ…è£¹åœ¨btn-toolbarç±»ä¸­ï¼Œä½¿å…¶ç»„åˆæˆä¸ºæŒ‰é’®ç»„å·¥å…·æ ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415&lt;p&gt;æŒ‰é’®ç»„å·¥å…·æ &lt;/p&gt;&lt;div class=\"btn-toolbar\"&gt; &lt;div class=\"btn-group\"&gt; &lt;button class=\"btn btn-default\"&gt;å·¦æŒ‰é’®&lt;/button&gt; &lt;button class=\"btn btn-danger\"&gt;ä¸­å¿ƒæŒ‰é’®&lt;/button&gt; &lt;button class=\"btn btn-primary\"&gt;å³æŒ‰é’®&lt;/button&gt; &lt;/div&gt; &lt;div class=\"btn-group\"&gt; &lt;button class=\"btn btn-default\"&gt;å·¦æŒ‰é’®&lt;/button&gt; &lt;button class=\"btn btn-primary\"&gt;å³æŒ‰é’®&lt;/button&gt; &lt;/div&gt; &lt;div class=\"btn-group\"&gt; &lt;button class=\"btn btn-primary\"&gt;ç‹¬ç«‹æŒ‰é’®&lt;/button&gt; &lt;/div&gt;&lt;/div&gt; æ•ˆæœå¦‚ä¸‹ï¼š æŒ‰é’®ç»„ä¹Ÿå¯ä»¥è¿›è¡ŒåµŒå¥—ï¼Œä½¿ç”¨æŒ‰é’®ç»„åµŒå¥—çš„æ–¹å¼ä¹Ÿå¯ä»¥å®ç°ä¸‹æ‹‰èœå•æ•ˆæœï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213&lt;div class=\"btn-group\"&gt; &lt;button class=\"btn btn-default\"&gt;å·¦æŒ‰é’®&lt;/button&gt; &lt;button class=\"btn btn-danger\"&gt;ä¸­å¿ƒæŒ‰é’®&lt;/button&gt; &lt;div class=\"btn-group\"&gt; &lt;button class=\"btn btn-info dropdown-toggle\"&gt;èœå• &lt;span class=\"caret\"&gt;&lt;/span&gt; &lt;/button&gt; &lt;ul class=\"dropdown-menu\"&gt; &lt;li&gt;&lt;a&gt;é‡‘ç‰›&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a&gt;ç‹®å­&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/div&gt;&lt;/div&gt; æ•ˆæœå¦‚ä¸‹ï¼š é»˜è®¤çš„æŒ‰é’®ç»„æ˜¯æ°´å¹³æ’åˆ—çš„ï¼Œä¸ºå…¶è®¾ç½®btn-group-verticalç±»å¯ä»¥å°†å…¶è®¾ç½®ä¸ºç«–ç›´æ’åˆ—çš„ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456&lt;p&gt;ç«–ç›´æ’åˆ—çš„æŒ‰é’®ç»„&lt;/p&gt;&lt;div class=\"btn-group-vertical\"&gt; &lt;button class=\"btn btn-default\"&gt;å·¦æŒ‰é’®&lt;/button&gt; &lt;button class=\"btn btn-danger\"&gt;ä¸­å¿ƒæŒ‰é’®&lt;/button&gt; &lt;button class=\"btn btn-primary\"&gt;å³æŒ‰é’®&lt;/button&gt;&lt;/div&gt; æ•ˆæœå¦‚ä¸‹ï¼š å¦‚æœéœ€è¦ä½¿æŒ‰é’®ç»„å¡«å……å…¶çˆ¶å®¹å™¨ï¼Œéœ€è¦è®¾ç½®btn-group-justifiedç±»ï¼Œå¹¶ä¸”ä½¿ç”¨aæ ‡ç­¾ä½œä¸ºæŒ‰é’®ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456&lt;p&gt;è®¾ç½®æŒ‰é’®ç»„å®½åº¦å……æ»¡çˆ¶å®¹å™¨&lt;/p&gt;&lt;div class=\"btn-group btn-group-justified\"&gt; &lt;a class=\"btn btn-default\"&gt;å·¦æŒ‰é’®&lt;/a&gt; &lt;a class=\"btn btn-danger\"&gt;ä¸­å¿ƒæŒ‰é’®&lt;/a&gt; &lt;a class=\"btn btn-primary\"&gt;å³æŒ‰é’®&lt;/a&gt;&lt;/div&gt; æ•ˆæœå¦‚ä¸‹ï¼š é€šè¿‡æŒ‰é’®ç»„ï¼Œå¯ä»¥ååˆ†æ–¹ä¾¿çš„å®ç°åˆ†è£‚å¼ä¸‹æ‹‰èœå•ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516171819202122&lt;p&gt;åˆ†è£‚å¼ä¸‹æ‹‰èœå•&lt;/p&gt;&lt;div class=\"btn-group\"&gt; &lt;button type=\"button\" class=\"btn btn-danger\"&gt;é‡‘ç‰›&lt;/button&gt; &lt;button type=\"button\" class=\"btn btn-danger dropdown-toggle\"&gt; &lt;span class=\"caret\"&gt;&lt;/span&gt; &lt;/button&gt; &lt;ul class=\"dropdown-menu\"&gt; &lt;li&gt; &lt;a href=\"#\"&gt;é‡‘ç‰›&lt;/a&gt; &lt;/li&gt; &lt;li&gt; &lt;a href=\"#\"&gt;ç‹®å­&lt;/a&gt; &lt;/li&gt; &lt;li&gt; &lt;a href=\"#\"&gt;æ‘©ç¾¯&lt;/a&gt; &lt;/li&gt; &lt;li class=\"divider\"&gt;&lt;/li&gt; &lt;li&gt; &lt;a href=\"#\"&gt;æ— &lt;/a&gt; &lt;/li&gt; &lt;/ul&gt;&lt;/div&gt; æ•ˆæœå¦‚ä¸‹ï¼š å¦å¤–ï¼Œæœ¬ç¯‡åšå®¢ä¸­æ‰€æœ‰çš„å®ä¾‹ä»£ç åŠæ˜¾ç¤ºæ•ˆæœï¼Œåœ¨å¦‚ä¸‹åœ°å€ä¸­ï¼Œéœ€è¦çš„å¯ä»¥è‡ªè¡Œå¯¹ç…§å­¦ä¹ ã€‚ http://zyhshao.github.io/bootStrapDemo/buttonGroup.htmlã€‚ å‰ç«¯å­¦ä¹ æ–°äººï¼Œæœ‰å¿—åŒé“åˆçš„æœ‹å‹ï¼Œæ¬¢è¿äº¤æµä¸æŒ‡å¯¼ï¼ŒQQç¾¤:541458536","categories":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}],"tags":[],"keywords":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}]},{"title":"iOS10ä¸ºç”¨æˆ·æ·»åŠ è§¦æ‘¸åé¦ˆ","slug":"275iOS10ä¸ºç”¨æˆ·æ·»åŠ è§¦æ‘¸åé¦ˆ","date":"2016-12-08T16:00:00.000Z","updated":"2021-07-12T11:08:32.094Z","comments":true,"path":"2016/12/09/275iOS10ä¸ºç”¨æˆ·æ·»åŠ è§¦æ‘¸åé¦ˆ/","link":"","permalink":"http://huishao.cc/2016/12/09/275iOS10ä¸ºç”¨æˆ·æ·»åŠ è§¦æ‘¸åé¦ˆ/","excerpt":"","text":"iOS10ä¸ºç”¨æˆ·æ·»åŠ è§¦æ‘¸åé¦ˆåœ¨iOS10ä¸­ï¼ŒUIKitæ¡†æ¶ä¸­æ–°å¢åŠ äº†3ä¸ªç±»ï¼ŒUIImpactFeedbackGeneratorç±»ã€UINotificationFeedbackGeneratorç±»ä¸UISelectionFeedbackGeneratorç±»ã€‚å¼€å‘è€…ä½¿ç”¨è¿™3ä¸ªç±»å¯ä»¥è¿›ä¸€æ­¥ä¸ºç”¨æˆ·çš„æŸäº›äº¤äº’æ“ä½œå¢å¼ºåé¦ˆã€‚ä¸¾ä¾‹è€Œè¨€ï¼Œå½“ç”¨æˆ·ç‚¹å‡»äº†æŸä¸ªæŒ‰é’®ï¼Œå¼€å‘è€…å¯ä»¥ä¸ºå…¶æä¾›ä¸€ä¸ªé€‚å½“çš„éœ‡åŠ¨æ•ˆæœä½œä¸ºè§¦è§‰ä¸Šçš„åé¦ˆã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849//è¿™ä¸ªæ–¹æ³•é€šè¿‡ä¼ å…¥å‚æ•°æ¥ç¡®å®šè§¦å‘ä»€ä¹ˆæ ·çš„ç”¨æˆ·è§¦è§‰åé¦ˆ-(void)feedbackStart:(int)style&#123; switch (style) &#123; case 1: &#123; UIImpactFeedbackGenerator * imp = [[UIImpactFeedbackGenerator alloc]initWithStyle:UIImpactFeedbackStyleHeavy]; [imp impactOccurred]; &#125; break; case 2: &#123; UIImpactFeedbackGenerator * imp = [[UIImpactFeedbackGenerator alloc]initWithStyle:UIImpactFeedbackStyleMedium]; [imp impactOccurred]; &#125; break; case 3: &#123; UIImpactFeedbackGenerator * imp = [[UIImpactFeedbackGenerator alloc]initWithStyle:UIImpactFeedbackStyleLight]; [imp impactOccurred]; &#125; break; case 4: &#123; UINotificationFeedbackGenerator * imp = [[UINotificationFeedbackGenerator alloc]init]; [imp notificationOccurred:UINotificationFeedbackTypeError]; &#125; break; case 5: &#123; UINotificationFeedbackGenerator * imp = [[UINotificationFeedbackGenerator alloc]init]; [imp notificationOccurred:UINotificationFeedbackTypeSuccess]; &#125; break; case 6: &#123; UINotificationFeedbackGenerator * imp = [[UINotificationFeedbackGenerator alloc]init]; [imp notificationOccurred:UINotificationFeedbackTypeWarning]; &#125; break; case 7: &#123; UISelectionFeedbackGenerator * imp = [[UISelectionFeedbackGenerator alloc]init]; [imp selectionChanged]; &#125; break; default: break; &#125;&#125; UIImpactFeedbackGeneratorç±»æ˜¯æ ‡å‡†çš„è§¦è§‰åé¦ˆç±»ï¼Œå…¶è°ƒç”¨impactOccurredæ–¹æ³•æ¥è§¦å‘åé¦ˆï¼Œå…¶å®ä¾‹åœ¨åˆ›å»ºæ—¶ï¼Œå¯ä»¥é€šè¿‡æšä¸¾æ¥åˆ›å»ºå¼ºåº¦ä¸åŒçš„åé¦ˆï¼š 12345678typedef NS_ENUM(NSInteger, UIImpactFeedbackStyle) &#123; //è½»åº¦çš„åé¦ˆ UIImpactFeedbackStyleLight, //ä¸­ç­‰å¼ºåº¦çš„åé¦ˆ UIImpactFeedbackStyleMedium, //é«˜å¼ºåº¦çš„åé¦ˆ UIImpactFeedbackStyleHeavy&#125;; UINotificationFeedbackGeneratorç±»æ˜¯ä¸“ç”¨äºé€šçŸ¥ç±»äº¤äº’çš„è§¦è§‰åé¦ˆï¼Œå…¶åœ¨è¿›è¡Œåé¦ˆæ—¶ä¹Ÿæœ‰3ä¸­æšä¸¾ç±»å‹å¯é€‰ï¼Œè§£æå¦‚ä¸‹ï¼š 12345678typedef NS_ENUM(NSInteger, UINotificationFeedbackType) &#123; //æˆåŠŸç±»é€šçŸ¥çš„åé¦ˆ UINotificationFeedbackTypeSuccess, //è­¦å‘Šç±»é€šçŸ¥çš„åé¦ˆ UINotificationFeedbackTypeWarning, //é”™è¯¯ç±»é€šçŸ¥çš„åé¦ˆ UINotificationFeedbackTypeError&#125;; UISelectionFeedbackGeneratorç±»åˆ›å»ºçš„åé¦ˆåº”ç”¨ä¸æŸäº›é€‰æ‹©å™¨æ§ä»¶ï¼Œä¾‹å¦‚ç”¨æˆ·åœ¨ä¸€ä¸ªå•é€‰åˆ—è¡¨ä¸­åˆ‡æ¢é€‰é¡¹ã€åˆ‡æ¢æŒ‰é’®çš„å¼€å…³çŠ¶æ€æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å…¶æ¥è¿›è¡Œè§¦è§‰åé¦ˆã€‚ éœ€è¦æ³¨æ„ï¼šä¸æ˜¯æ‰€æœ‰çš„åœºæ™¯éƒ½éœ€è¦åé¦ˆï¼Œé¢‘ç¹çš„è§¦è§‰åé¦ˆä¼šç»™ç”¨æˆ·ä»£ç å›°æ‰°ï¼Œå¼€å‘è€…åœ¨ä½¿ç”¨è¿™äº›ç±»æ—¶è¦é€‚å½“ã€‚ æœ‰æ—¶å€™ï¼Œé¢‘ç¹çš„è§¦è§‰åé¦ˆå¯èƒ½ä¼šå¼•èµ·åé¦ˆå»¶æ—¶ï¼Œè¿™å°†å¤§å¤§é™ä½ç”¨æˆ·çš„ä½“éªŒï¼Œå®˜æ–¹å»ºè®®å¼€å‘è€…åœ¨åˆé€‚çš„æ—¶æœºåˆ›å»ºåé¦ˆï¼Œç„¶åè°ƒç”¨prepareæ–¹æ³•æ¥ä½¿åé¦ˆå‡†å¤‡å®Œæˆï¼Œä¹‹ååœ¨éœ€è¦çš„æ—¶æœºå†è¿›è¡Œåé¦ˆçš„è§¦å‘ã€‚éœ€è¦æ³¨æ„ï¼ŒUIImpactFeedbackGeneratorç±»ã€UINotificationFeedbackGeneratorç±»ä¸UISelectionFeedbackGeneratorç±»éƒ½æœ‰ä¸€ä¸ªç›¸åŒçš„çˆ¶ç±»UIFeedbackGeneratorç±»ï¼Œè¿™ä¸ªç±»ä¸­å®šä¹‰äº†prepareæ–¹æ³•ï¼Œå½“è°ƒç”¨è¿™ä¸ªæ–¹æ³•æ—¶ï¼Œç³»ç»Ÿä¼šè°ƒèµ·ç›¸å…³æœåŠ¡æ¥è¿›è¡Œè§¦è§‰è§¦è§‰åé¦ˆçš„å‡†å¤‡å·¥ä½œã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOS10ä¸“é¢˜","slug":"iOS10ä¸“é¢˜","permalink":"http://huishao.cc/categories/iOS10ä¸“é¢˜/"}],"tags":[],"keywords":[{"name":"iOS10ä¸“é¢˜","slug":"iOS10ä¸“é¢˜","permalink":"http://huishao.cc/categories/iOS10ä¸“é¢˜/"}]},{"title":"Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°ä¸ƒâ€”â€”ä¸‹æ‹‰èœå•","slug":"276Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°ä¸ƒâ€”â€”ä¸‹æ‹‰èœå•","date":"2016-12-08T16:00:00.000Z","updated":"2021-07-12T11:09:24.550Z","comments":true,"path":"2016/12/09/276Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°ä¸ƒâ€”â€”ä¸‹æ‹‰èœå•/","link":"","permalink":"http://huishao.cc/2016/12/09/276Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°ä¸ƒâ€”â€”ä¸‹æ‹‰èœå•/","excerpt":"","text":"Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°ä¸ƒâ€”â€”ä¸‹æ‹‰èœå•åœ¨Bootstrapçš„Cssæ¡†æ¶ä¸­ï¼Œä¸‹æ‹‰èœå•å±äºç»„ä»¶ã€‚ä¸€ä¸ªå®Œæ•´çš„ä¸‹æ‹‰èœå•åº”è¯¥æœ‰ä¸¤éƒ¨åˆ†ç»„æˆï¼Œä¸€ä¸ªè§¦å‘æŒ‰é’®ä¸ä¸€ä¸ªé€‰é¡¹åˆ—è¡¨ã€‚è§¦å‘æŒ‰é’®dropdown-toggleç±»æ¥åˆ›å»ºï¼Œé€‰é¡¹åˆ—è¡¨æœ‰drop-menuç±»æ¥åˆ›å»ºï¼Œè¿™ä¸¤éƒ¨åˆ†å…ƒç´ éœ€è¦åŒ…è£¹åœ¨ä¸€ä¸ªdropdownç±»å…ƒç´ ä¸­ï¼Œæ‰èƒ½æ­£ç¡®ç»„åˆï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345678910111213&lt;p&gt;æ­£å¸¸çš„ä¸‹æ‹‰èœå•æ ·å¼&lt;/p&gt;&lt;div class=\"dropdown\"&gt; &lt;button class=\"btn btn-default dropdown-toggle\"&gt; ä¸‹æ‹‰èœå• &lt;span class=\"caret\"&gt;&lt;/span&gt; &lt;/button&gt; &lt;ul class=\"dropdown-menu\" &gt; &lt;li&gt;&lt;a&gt;ç™½ç¾Šåº§&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a&gt;é‡‘ç‰›åº§&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a&gt;æ‘©ç¾¯åº§&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a&gt;ç‹®å­åº§&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt;&lt;/div&gt; é»˜è®¤åˆ›å»ºçš„ä¸‹æ‹‰èœå•æ˜¯éšè—çš„ï¼Œä¸ºäº†æ¼”ç¤ºæ–¹ä¾¿ï¼Œå¯ä»¥å°†ulçš„displayå±æ€§é‡è®¾ï¼š 12345&lt;style&gt; ul&#123; display: block !important; &#125;&lt;/style&gt; æ•ˆæœå¦‚ä¸‹å›¾ï¼š ä½¿ç”¨dropdown-menu-leftæˆ–è€…dropdown-menu-rightå¯ä»¥å®ç°å¯¹èœå•åˆ—è¡¨çš„å·¦å¯¹é½æˆ–è€…å³å¯¹é½ã€‚ ä¸ºåˆ—è¡¨çš„liå…ƒç´ æ·»åŠ dropdown-headerç±»å¯ä»¥å°†æ­¤è¡Œè®¾ç½®ä¸ºå¤´ä¿¡æ¯è¡Œï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314&lt;p&gt;å¯ä»¥ä½¿ç”¨dropdown-headerç±»æ¥è¿›è¡Œèœå•å¤´çš„è®¾ç½®&lt;/p&gt;&lt;div class=\"dropdown\"&gt; &lt;button class=\"btn btn-default dropdown-toggle\"&gt; ä¸‹æ‹‰èœå• &lt;span class=\"caret\"&gt;&lt;/span&gt; &lt;/button&gt; &lt;ul class=\"dropdown-menu\" &gt; &lt;li class=\"dropdown-header\"&gt;æ˜Ÿåº§&lt;/li&gt; &lt;li&gt;&lt;a&gt;ç™½ç¾Šåº§&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a&gt;é‡‘ç‰›åº§&lt;/a&gt;&lt;/li&gt; &lt;li class=\"dropdown-header\"&gt;å±ç›¸&lt;/li&gt; &lt;li&gt;&lt;a&gt;çŒ´&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt;&lt;/div&gt; æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¸ºliæ ‡ç­¾è®¾ç½®dividerç±»å¯ä»¥å°†æ­¤è¡Œè®¾ç½®ä¸ºåˆ†å‰²çº¿ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415161718192021&lt;p&gt;å¯ä»¥ä½¿ç”¨dividerç±»å¯ä»¥ä¸ºèœå•è®¾ç½®åˆ†å‰²çº¿&lt;/p&gt;&lt;div class=\"dropdown\"&gt; &lt;button class=\"btn btn-default dropdown-toggle\"&gt; ä¸‹æ‹‰èœå• &lt;span class=\"caret\"&gt;&lt;/span&gt; &lt;/button&gt; &lt;ul class=\"dropdown-menu\"&gt; &lt;li class=\"dropdown-header\"&gt;æ˜Ÿåº§&lt;/li&gt; &lt;li&gt; &lt;a&gt;ç™½ç¾Šåº§&lt;/a&gt; &lt;/li&gt; &lt;li&gt; &lt;a&gt;é‡‘ç‰›åº§&lt;/a&gt; &lt;/li&gt; &lt;li class=\"divider\"&gt;&lt;/li&gt; &lt;li class=\"dropdown-header\"&gt;å±ç›¸&lt;/li&gt; &lt;li&gt; &lt;a&gt;çŒ´&lt;/a&gt; &lt;/li&gt; &lt;/ul&gt;&lt;/div&gt; æ•ˆæœå¦‚ä¸‹ï¼š å¯ä»¥ä¸ºliè®¾ç½®disabledç±»æ¥å°†æ­¤è¡Œé€‰é¡¹è®¾ç½®ä¸ºç¦ç”¨ï¼Œè®¾ç½®ç¦ç”¨åï¼Œæ­¤è¡Œæ ‡ç­¾ä¹Ÿå°†æ— æ³•ç‚¹å‡»ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314151617181920&lt;p&gt;å¯ä»¥ä½¿ç”¨disabledç±»æ¥ç¦ç”¨æŸäº›é€‰é¡¹&lt;/p&gt;&lt;div class=\"dropdown\"&gt; &lt;button class=\"btn btn-default dropdown-toggle\"&gt; ä¸‹æ‹‰èœå• &lt;span class=\"caret\"&gt;&lt;/span&gt; &lt;/button&gt; &lt;ul class=\"dropdown-menu\"&gt; &lt;li class=\"dropdown-header\"&gt;æ˜Ÿåº§&lt;/li&gt; &lt;li class=\"disabled\"&gt; &lt;a&gt;ç™½ç¾Šåº§&lt;/a&gt; &lt;/li&gt; &lt;li&gt; &lt;a&gt;é‡‘ç‰›åº§&lt;/a&gt; &lt;/li&gt; &lt;li class=\"dropdown-header\"&gt;å±ç›¸&lt;/li&gt; &lt;li&gt; &lt;a&gt;çŒ´&lt;/a&gt; &lt;/li&gt; &lt;/ul&gt;&lt;/div&gt; å¦å¤–ï¼Œæœ¬ç¯‡åšå®¢ä¸­æ‰€æœ‰çš„å®ä¾‹ä»£ç åŠæ˜¾ç¤ºæ•ˆæœï¼Œåœ¨å¦‚ä¸‹åœ°å€ä¸­ï¼Œéœ€è¦çš„å¯ä»¥è‡ªè¡Œå¯¹ç…§å­¦ä¹ ã€‚ http://zyhshao.github.io/bootStrapDemo/dropList.htmlã€‚ å‰ç«¯å­¦ä¹ æ–°äººï¼Œæœ‰å¿—åŒé“åˆçš„æœ‹å‹ï¼Œæ¬¢è¿äº¤æµä¸æŒ‡å¯¼ï¼ŒQQç¾¤:541458536","categories":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}],"tags":[],"keywords":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}]},{"title":"Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°äº”â€”â€”æŒ‰é’®","slug":"273Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°äº”â€”â€”æŒ‰é’®","date":"2016-12-07T16:00:00.000Z","updated":"2021-07-12T11:06:19.431Z","comments":true,"path":"2016/12/08/273Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°äº”â€”â€”æŒ‰é’®/","link":"","permalink":"http://huishao.cc/2016/12/08/273Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°äº”â€”â€”æŒ‰é’®/","excerpt":"","text":"Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°äº”â€”â€”æŒ‰é’®Bootstrapä¸­é¢„è®¾äº†defaultï¼Œprimaryï¼Œinfoï¼Œwarningï¼Œdangerå’Œlink6ç§æŒ‰é’®é£æ ¼ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678&lt;p&gt;Bootstrapä¸­é¢„è®¾çš„æŒ‰é’®æ ·å¼å¦‚ä¸‹&lt;/p&gt;&lt;button type=\"button\" class=\"btn btn-default\"&gt;æ­£å¸¸&lt;/button&gt;&lt;button type=\"button\" class=\"btn btn-primary\"&gt;é‡è¦&lt;/button&gt;&lt;button type=\"button\" class=\"btn btn-success\"&gt;æˆåŠŸ&lt;/button&gt;&lt;button type=\"button\" class=\"btn btn-info\"&gt;ä¿¡æ¯&lt;/button&gt;&lt;button type=\"button\" class=\"btn btn-warning\"&gt;è­¦å‘Š&lt;/button&gt;&lt;button type=\"button\" class=\"btn btn-danger\"&gt;å±é™©&lt;/button&gt;&lt;button type=\"button\" class=\"btn btn-link\"&gt;é“¾æ¥&lt;/button&gt; æ•ˆæœå¦‚ä¸‹ï¼š å¯ä»¥ä¸ºæŒ‰é’®å…ƒç´ æ·»åŠ btn-lgï¼Œbtn-smï¼Œbtn-xsç±»æ¥è¿›è¡ŒæŒ‰é’®å°ºå¯¸çš„è®¾ç½®ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345&lt;p&gt;è®¾ç½®æŒ‰é’®çš„å¤§å°&lt;/p&gt;&lt;button type=\"button\" class=\"btn btn-default btn-lg\"&gt;æ­£å¸¸&lt;/button&gt;&lt;button type=\"button\" class=\"btn btn-primary\"&gt;é‡è¦&lt;/button&gt;&lt;button type=\"button\" class=\"btn btn-success btn-sm\"&gt;æˆåŠŸ&lt;/button&gt;&lt;button type=\"button\" class=\"btn btn-info btn-xs\"&gt;ä¿¡æ¯&lt;/button&gt; æ•ˆæœå¦‚ä¸‹å›¾ï¼š ä½¿ç”¨btn-blockç±»å¯ä»¥å°†æŒ‰é’®è®¾ç½®ä¸ºå……æ»¡æ•´ä¸ªçˆ¶å…ƒç´ ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123&lt;p&gt;ä½¿ç”¨btn-blockç±»å¯ä»¥å°†æŒ‰é’®è®¾ç½®ä¸ºå……æ»¡çˆ¶å…ƒç´ &lt;/p&gt;&lt;button type=\"button\" class=\"btn btn-default btn-block\"&gt;æ­£å¸¸&lt;/button&gt;&lt;button type=\"button\" class=\"btn btn-primary btn-block\"&gt;é‡è¦&lt;/button&gt; æ•ˆæœå¦‚ä¸‹ï¼š éœ€è¦æ³¨æ„ï¼šå½“buttonæ ‡ç­¾è¢«ç”¨æˆ·ç‚¹å‡»æ—¶ï¼ŒæŒ‰é’®å‘¨å›´ä¼šå‡ºç°è¾¹æ¡†ï¼Œå¦‚æœä¸éœ€è¦è¿™ä¸ªè¾¹æ¡†ï¼Œå¯ä»¥ä½¿ç”¨aæ ‡ç­¾æ¥åˆ›å»ºæŒ‰é’®ã€‚ å¦å¤–ï¼Œæœ¬ç¯‡åšå®¢ä¸­æ‰€æœ‰çš„å®ä¾‹ä»£ç åŠæ˜¾ç¤ºæ•ˆæœï¼Œåœ¨å¦‚ä¸‹åœ°å€ä¸­ï¼Œéœ€è¦çš„å¯ä»¥è‡ªè¡Œå¯¹ç…§å­¦ä¹ ã€‚ http://zyhshao.github.io/bootStrapDemo/button.htmlã€‚ å‰ç«¯å­¦ä¹ æ–°äººï¼Œæœ‰å¿—åŒé“åˆçš„æœ‹å‹ï¼Œæ¬¢è¿äº¤æµä¸æŒ‡å¯¼ï¼ŒQQç¾¤:541458536","categories":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}],"tags":[],"keywords":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}]},{"title":"Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°å…­â€”â€”å›¾ç‰‡ä¸å…¶ä»–è¾…åŠ©ç±»","slug":"274Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°å…­â€”â€”å›¾ç‰‡ä¸å…¶ä»–è¾…åŠ©ç±»","date":"2016-12-07T16:00:00.000Z","updated":"2021-07-12T11:07:31.147Z","comments":true,"path":"2016/12/08/274Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°å…­â€”â€”å›¾ç‰‡ä¸å…¶ä»–è¾…åŠ©ç±»/","link":"","permalink":"http://huishao.cc/2016/12/08/274Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°å…­â€”â€”å›¾ç‰‡ä¸å…¶ä»–è¾…åŠ©ç±»/","excerpt":"","text":"Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°å…­â€”â€”å›¾ç‰‡ä¸å…¶ä»–è¾…åŠ©ç±»åœ¨é¡µé¢ä¸­æ’å…¥å›¾ç‰‡ï¼ŒBootstrapæ¡†æ¶ä¸­å®šä¹‰äº†3ä¸­å›¾ç‰‡çš„Cssç±»æ ·å¼ï¼Œåˆ†åˆ«ä¸ºåœ†è§’å›¾ç‰‡img-roundedç±»ï¼Œåœ†å½¢å›¾ç‰‡img-circleç±»å’Œå¸¦è¾¹æ¡†çš„å›¾ç‰‡img-thumbnailç±»ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234&lt;p&gt;è®¾ç½®img-roundedç±»å¯ä»¥ä½¿å›¾ç‰‡æ˜¾ç¤ºåœ†è§’ï¼Œimg-circleç±»å¯ä»¥ä½¿å›¾ç‰‡æ˜¾ç¤ºåœ†å½¢ï¼Œimg-thumbnailå¯ä»¥ä¸ºå›¾ç‰‡åŠ ä¸Šè¾¹æ¡†&lt;/p&gt;&lt;img src=\"image/test.png\" class=\"img-rounded\" /&gt;&lt;img src=\"image/test.png\" class=\"img-circle\" /&gt;&lt;img src=\"image/test.png\" class=\"img-thumbnail\" /&gt; æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š text-xxxç›¸å…³ç±»å®šä¹‰äº†ä¸€äº›å¸¸ç”¨çš„å­—ä½“é¢œè‰²ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456&lt;p class=\"text-muted\"&gt;æ­£å¸¸æ–‡å­—&lt;/p&gt;&lt;p class=\"text-primary\"&gt;é‡è¦æ–‡å­—&lt;/p&gt;&lt;p class=\"text-success\"&gt;æˆåŠŸæ–‡å­—&lt;/p&gt;&lt;p class=\"text-info\"&gt;è¯¦æƒ…æ–‡å­—&lt;/p&gt;&lt;p class=\"text-warning\"&gt;è­¦å‘Šæ–‡å­—&lt;/p&gt;&lt;p class=\"text-danger\"&gt;å±é™©æ–‡å­—&lt;/p&gt; æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¸ä¸Šé¢æ–‡å­—é¢œè‰²çš„ç±»ç›¸å¯¹åº”ï¼ŒBootstrapä¸­ä¹Ÿå®šä¹‰äº†ä¸€ç»„èƒŒæ™¯é¢œè‰²ç±»ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456&lt;p class=\"bg-muted\"&gt;æ­£å¸¸èƒŒæ™¯&lt;/p&gt;&lt;p class=\"bg-primary\"&gt;é‡è¦èƒŒæ™¯&lt;/p&gt;&lt;p class=\"bg-success\"&gt;æˆåŠŸèƒŒæ™¯&lt;/p&gt;&lt;p class=\"bg-info\"&gt;è¯¦æƒ…èƒŒæ™¯&lt;/p&gt;&lt;p class=\"bg-warning\"&gt;è­¦å‘ŠèƒŒæ™¯&lt;/p&gt;&lt;p class=\"bg-danger\"&gt;å±é™©èƒŒæ™¯&lt;/p&gt; æ•ˆæœå¦‚ä¸‹ï¼š ä½¿ç”¨caretç±»å¯ä»¥æ–¹ä¾¿çš„åˆ›å»ºå€’ä¸‰è§’å›¾æ¡ˆï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12&lt;p&gt;ä½¿ç”¨caretç±»å¯ä»¥åˆ›å»ºä¸€ä¸ªå€’ä¸‰è§’å›¾æ¡ˆ&lt;/p&gt;&lt;span class=\"caret\"&gt;&lt;/span&gt; æ•ˆæœå¦‚ä¸‹ï¼š ä½¿ç”¨showå’Œhiddenç±»å¯ä»¥è¿›è¡Œæ ‡ç­¾çš„æ˜¾ç¤ºä¸éšè—ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1&lt;p class=\"hidden\"&gt;showå’Œhiddenå¯ä»¥è¿›è¡Œä¾¿ç­¾çš„æ˜¾ç¤ºä¸éšè—&lt;/p&gt; Bootstrapä¸­è¿˜æä¾›äº†ä¸€äº›ä¸å“åº”ç±»å¼€å‘ç›¸å…³çš„ç±»ï¼Œå¼€å‘è€…å¯ä»¥è®¾ç½®æŸäº›å…ƒç´ åœ¨æŸä¸ªå°ºå¯¸çš„å±å¹•ä¸­å¯è§æˆ–è€…éšè—ï¼Œä¹Ÿå¯ä»¥è®¾ç½®æŸä¸ªå…ƒç´ åœ¨æµè§ˆå™¨æˆ–æ‰“å°æœºä¸Šå¯è§æˆ–éšè—ï¼Œå¦‚ä¸‹ï¼š å±å¹•å°ºå¯¸å“åº”å¼ç±»ï¼š æ˜¾ç¤ºè®¾å¤‡å“åº”å¼ç±»ï¼š å¦å¤–ï¼Œæœ¬ç¯‡åšå®¢ä¸­æ‰€æœ‰çš„å®ä¾‹ä»£ç åŠæ˜¾ç¤ºæ•ˆæœï¼Œåœ¨å¦‚ä¸‹åœ°å€ä¸­ï¼Œéœ€è¦çš„å¯ä»¥è‡ªè¡Œå¯¹ç…§å­¦ä¹ ã€‚ http://zyhshao.github.io/bootStrapDemo/images.htmlã€‚ å‰ç«¯å­¦ä¹ æ–°äººï¼Œæœ‰å¿—åŒé“åˆçš„æœ‹å‹ï¼Œæ¬¢è¿äº¤æµä¸æŒ‡å¯¼ï¼ŒQQç¾¤:541458536","categories":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}],"tags":[],"keywords":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}]},{"title":"iOSå¼€å‘CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¹‹ä¹â€”â€”PDFæ–‡ä»¶çš„æ¸²æŸ“ä¸åˆ›å»º","slug":"272iOSå¼€å‘CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¹‹ä¹â€”â€”PDFæ–‡ä»¶çš„æ¸²æŸ“ä¸åˆ›å»º","date":"2016-12-06T16:00:00.000Z","updated":"2021-07-12T11:05:12.259Z","comments":true,"path":"2016/12/07/272iOSå¼€å‘CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¹‹ä¹â€”â€”PDFæ–‡ä»¶çš„æ¸²æŸ“ä¸åˆ›å»º/","link":"","permalink":"http://huishao.cc/2016/12/07/272iOSå¼€å‘CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¹‹ä¹â€”â€”PDFæ–‡ä»¶çš„æ¸²æŸ“ä¸åˆ›å»º/","excerpt":"","text":"iOSå¼€å‘CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¹‹ä¹â€”â€”PDFæ–‡ä»¶çš„æ¸²æŸ“ä¸åˆ›å»ºä¸€ã€æ¸²æŸ“å·²æœ‰çš„PDFæ–‡æ¡£åœ¨CoreGraphicsæ¡†æ¶ä¸­ï¼Œæœ‰ä¸¤ä¸ªç±»å‹ä¸PDFæ–‡æ¡£çš„æ¸²æŸ“æœ‰å…³ï¼Œåˆ†åˆ«ä¸ºCGPDFDocumentRefä¸CGPDFPageRefã€‚å…¶ä¸­ï¼ŒCGPDFDocumentRefå¯¹åº”æ•´ä¸ªPDFæ–‡æ¡£ï¼Œé‡Œé¢å°è£…äº†è®¸å¤šæ–‡æ¡£ç›¸å…³çš„ä¿¡æ¯ï¼ŒCGPDFPageRefå¯¹åº”PDFæ–‡æ¡£ä¸­æŸä¸€é¡µçš„å†…å®¹ï¼Œé€šè¿‡å®ƒå¼€å‘è€…å¯ä»¥å°†PDFå†…å®¹é€šè¿‡CGContextä¸Šä¸‹æ–‡æ¸²æŸ“åˆ°æŒ‡å®šç›®æ ‡ä¸Šã€‚ å¦‚ä¸‹ä»£ç æ¼”ç¤ºäº†åœ¨è‡ªå®šä¹‰Viewçš„drawRect:æ–¹æ³•ä¸­è¿›è¡ŒPDFæ–‡æ¡£çš„ç»˜åˆ¶ï¼š 12345678910111213141516171819202122-(void)drawRect:(CGRect)rect&#123; //ç”±äºåæ ‡ç³»ä¸åŒï¼Œéœ€è¦è¿›è¡Œç¿»è½¬ CGContextRef contextRef = UIGraphicsGetCurrentContext(); //è¿›è¡Œåæ ‡ç³»çš„ç¿»è½¬ CGContextTranslateCTM(contextRef, 0, rect.size.height); CGContextScaleCTM(contextRef, 1.0, -1.0); //è·å–pdfæ–‡ä»¶çš„è·¯å¾„ NSString * path = [[NSBundle mainBundle] pathForResource:@\"MyText\" ofType:@\"pdf\"]; CFStringRef pathString = CFStringCreateWithCString(NULL, [path cStringUsingEncoding:NSUTF8StringEncoding], kCFStringEncodingUTF8); //åˆ›å»ºurl CFURLRef url = CFURLCreateWithFileSystemPath(NULL, pathString, kCFURLPOSIXPathStyle, 0); CFRelease(pathString); //è¿›è¡ŒCGPDFDocumentRefå¼•ç”¨çš„åˆ›å»º CGPDFDocumentRef document = CGPDFDocumentCreateWithURL(url); CFRelease(url); //è·å–æ–‡æ¡£çš„ç¬¬1é¡µ CGPDFPageRef page1 = CGPDFDocumentGetPage(document, 1); //è¿›è¡Œç»˜åˆ¶ CGContextDrawPDFPage(contextRef, page1); CGPDFPageRelease(page1); CGPDFDocumentRelease(document);&#125; æ•ˆæœå¦‚ä¸‹ï¼š CGPDFDocumentä¸­æä¾›çš„æ–¹æ³•è§£æå¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132//é€šè¿‡æ•°æ®æä¾›è€…ç±»æ¥åˆ›å»ºPDFæ–‡æ¡£å¯¹è±¡CGPDFDocumentRef CGPDFDocumentCreateWithProvider(CGDataProviderRef cg_nullable provider);//é€šè¿‡urlæ¥åˆ›å»ºPDFæ–‡æ¡£CGPDFDocumentRef CGPDFDocumentCreateWithURL(CFURLRef cg_nullable url);//è¿›è¡Œå¼•ç”¨è®¡æ•°+1CGPDFDocumentRef CGPDFDocumentRetain(CGPDFDocumentRef cg_nullable document);//è¿›è¡Œå¼•ç”¨è®¡æ•°-1,éœ€è¦æ³¨æ„ï¼Œå…¶ä½œç”¨å’ŒCFRelease()ç›¸ä¼¼ï¼Œä¸åŒçš„æ˜¯å¦‚æœdocumentä¸ºNULLï¼Œä¸æ˜¯å‘ç”Ÿcrashvoid CGPDFDocumentRelease(CGPDFDocumentRef cg_nullable document);//è·å–PDFæ–‡æ¡£çš„ç‰ˆæœ¬void CGPDFDocumentGetVersion(CGPDFDocumentRef cg_nullable document, int * majorVersion, int * minorVersion);//åˆ¤æ–­æ–‡æ¡£æ˜¯å¦æ˜¯åŠ å¯†çš„bool CGPDFDocumentIsEncrypted(CGPDFDocumentRef cg_nullable document);//ä½¿ç”¨å¯†ç å¯¹PDFæ–‡æ¡£è¿›è¡Œè§£å¯† è¿”å›å€¼ä¸º1è¡¨ç¤ºè§£å¯†æˆåŠŸbool CGPDFDocumentUnlockWithPassword(CGPDFDocumentRef cg_nullable document, const char * password);//åˆ¤æ–­PDFæ–‡æ¡£æ˜¯å¦å·²ç»è§£é”bool CGPDFDocumentIsUnlocked(CGPDFDocumentRef cg_nullable document);//è·å–æ­¤PDFæ–‡æ¡£æ˜¯å¦å…è®¸ç»˜åˆ¶bool CGPDFDocumentAllowsPrinting(CGPDFDocumentRef cg_nullable document);//è·å–æ­¤æ–‡æ¡£æ˜¯å¦å…è®¸æ‹·è´bool CGPDFDocumentAllowsCopying(CGPDFDocumentRef cg_nullable document);//è·å–PDFæ–‡æ¡£çš„æ€»é¡µæ•°size_t CGPDFDocumentGetNumberOfPages(CGPDFDocumentRef cg_nullable document);//è·å–æ–‡æ¡£ä¸­æŸé¡µæ•°æ®CGPDFPageRef __nullable CGPDFDocumentGetPage(CGPDFDocumentRef cg_nullable document, size_t pageNumber);//è·å–æ–‡æ¡£çš„ç›®å½•ä¿¡æ¯CGPDFDictionaryRef __nullable CGPDFDocumentGetCatalog(CGPDFDocumentRef cg_nullable document);//è·å–æ–‡æ¡£è¯¦æƒ…ä¿¡æ¯CGPDFDictionaryRef __nullable CGPDFDocumentGetInfo(CGPDFDocumentRef cg_nullable document);//è·å–æ–‡æ¡£idCGPDFArrayRef __nullable CGPDFDocumentGetID(CGPDFDocumentRef cg_nullable document);//è·å–CGPDFDocumentç±»åœ¨CoreGraphicsæ¡†æ¶ä¸­çš„idCFTypeID CGPDFDocumentGetTypeID(void); CGPDFDocumentä¸­è¿˜æœ‰ä¸€äº›å·²ç»å¼ƒç”¨çš„æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•ç°åœ¨å°è£…åœ¨CGPDFPageä¸­ï¼Œå¼ƒç”¨çš„æ–¹æ³•å¦‚ä¸‹ï¼š 123456CGRect CGPDFDocumentGetMediaBox(CGPDFDocumentRef cg_nullable document,int page);CGRect CGPDFDocumentGetCropBox(CGPDFDocumentRef cg_nullable document, int page);CGRect CGPDFDocumentGetBleedBox(CGPDFDocumentRef cg_nullable document, int page);CGRect CGPDFDocumentGetTrimBox(CGPDFDocumentRef cg_nullable document, int page);CGRect CGPDFDocumentGetArtBox(CGPDFDocumentRef cg_nullable document, int page);int CGPDFDocumentGetRotationAngle(CGPDFDocumentRef cg_nullable document, int page); CGPDFPageä¸­çš„ä¸»è¦æ–¹æ³•åˆ—ä¸¾å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223//è¿›è¡Œå¼•ç”¨è®¡æ•°+1CGPDFPageRef CGPDFPageRetain(CGPDFPageRef cg_nullable page);//è¿›è¡Œå¼•ç”¨è®¡æ•°-1void CGPDFPageRelease(CGPDFPageRef cg_nullable page);//è·å–å¯¹åº”çš„PDFæ–‡æ¡£å¯¹è±¡CGPDFDocumentRef __nullable CGPDFPageGetDocument(CGPDFPageRef cg_nullable page);//è·å–å½“å‰é¡µæ˜¯æ–‡æ¡£ä¸­çš„ç¬¬å‡ é¡µsize_t CGPDFPageGetPageNumber(CGPDFPageRef cg_nullable page);//è·å–ä¸æ–‡æ¡£æ­¤é¡µç›¸å…³è”çš„åª’ä½“åŒºåŸŸ/*typedef CF_ENUM (int32_t, CGPDFBox) &#123; kCGPDFMediaBox = 0, kCGPDFCropBox = 1, kCGPDFBleedBox = 2, kCGPDFTrimBox = 3, kCGPDFArtBox = 4&#125;;*/CGRect CGPDFPageGetBoxRect(CGPDFPageRef cg_nullable page, CGPDFBox box);//è·å–æ­¤é¡µçš„æ—‹è½¬è§’åº¦int CGPDFPageGetRotationAngle(CGPDFPageRef cg_nullable page);//transformå˜æ¢CGAffineTransform CGPDFPageGetDrawingTransform(CGPDFPageRef cg_nullable page, CGPDFBox box, CGRect rect, int rotate, bool preserveAspectRatio); äºŒã€ä½¿ç”¨ä»£ç åˆ›å»ºPDFæ–‡ä»¶å¦‚ä¸‹ç¤ºä¾‹ä»£ç æ¼”ç¤ºäº†åˆ›å»ºPDFæ–‡æ¡£çš„è¿‡ç¨‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354-(void)creatPDF&#123; //ç»˜å›¾ä¸Šä¸‹æ–‡ CGContextRef pdfContext; CFStringRef path; CFURLRef url; CFDataRef boxData = NULL; CFMutableDictionaryRef myDictionary = NULL; CFMutableDictionaryRef pageDictionary = NULL; //æ–‡ä»¶å­˜æ”¾çš„è·¯å¾„ NSString * filePath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, true).firstObject; NSLog(@\"%@\",filePath); const char * filename = [[NSString stringWithFormat:@\"%@/MyText\",filePath] cStringUsingEncoding:kCFStringEncodingUTF8]; path = CFStringCreateWithCString (NULL, filename,kCFStringEncodingUTF8); url = CFURLCreateWithFileSystemPath (NULL, path,kCFURLPOSIXPathStyle, 0); CFRelease (path); //æ–‡æ¡£ä¿¡æ¯å­—å…¸ myDictionary = CFDictionaryCreateMutable(NULL, 0, &amp;kCFTypeDictionaryKeyCallBacks, &amp;kCFTypeDictionaryValueCallBacks); //è®¾ç½®æ–‡æ¡£åç§° CFDictionarySetValue(myDictionary, kCGPDFContextTitle, CFSTR(\"My PDF File\")); //è®¾ç½®åˆ›å»ºè€… CFDictionarySetValue(myDictionary, kCGPDFContextCreator, CFSTR(\"My Name\")); //è®¾ç½®æ–‡æ¡£å°ºå¯¸ CGRect pageRect = CGRectMake(0, 0, 200, 200); //åˆ›å»ºæ–‡æ¡£ pdfContext = CGPDFContextCreateWithURL (url, &amp;pageRect, myDictionary); CFRelease(myDictionary); CFRelease(url); //è®¾ç½®å†…å®¹ä¿¡æ¯å­—å…¸ pageDictionary = CFDictionaryCreateMutable(NULL, 0, &amp;kCFTypeDictionaryKeyCallBacks, &amp;kCFTypeDictionaryValueCallBacks); boxData = CFDataCreate(NULL,(const UInt8 *)&amp;pageRect, sizeof (CGRect)); CFDictionarySetValue(pageDictionary, kCGPDFContextMediaBox, boxData); //å¼€å§‹æ¸²æŸ“ä¸€é¡µ CGPDFContextBeginPage (pdfContext, pageDictionary); CGFloat colors[4] = &#123;1,0,0,1&#125;; CGContextSetFillColorSpace(pdfContext, CGColorSpaceCreateWithName(kCGColorSpaceGenericRGB)); CGContextSetFillColor(pdfContext, colors); CGContextFillRect(pdfContext, CGRectMake(0, 0, 100, 100)); //ç»“æŸæ­¤é¡µçš„æ¸²æŸ“ CGPDFContextEndPage (pdfContext); //å¼€å§‹æ–°ä¸€é¡µå†…å®¹çš„æ¸²æŸ“ CGPDFContextBeginPage (pdfContext, pageDictionary); CGContextSetFillColorSpace(pdfContext, CGColorSpaceCreateWithName(kCGColorSpaceGenericRGB)); CGContextSetFillColor(pdfContext, colors); CGContextFillRect(pdfContext, CGRectMake(0, 0, 100, 100)); CGPDFContextEndPage (pdfContext); CGContextRelease (pdfContext); CFRelease(pageDictionary); CFRelease(boxData);&#125; ä¸Šé¢ä»£ç åˆ›å»ºå‡ºçš„PDFæ–‡ä»¶å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š åœ¨åˆ›å»ºPDFæ–‡æ¡£æ—¶ï¼Œå¼€å‘è€…è¿˜å¯ä»¥ä½¿ç”¨å¦‚ä¸‹åˆ—ä¸¾çš„æ–¹æ³•æ¥å¯¹æ–‡æ¡£è¿›è¡Œè¶…é“¾æ¥æ·»åŠ ï¼Œå†…å®¹ä¿¡æ¯è®¾ç½®ç­‰ï¼š 1234567891011121314//å…³é—­æ–‡æ¡£ä¸Šä¸‹æ–‡ï¼Œå…³é—­åå°†ä¸èƒ½å†æ¬¡å†™å…¥void CGPDFContextClose(CGContextRef cg_nullable context);//å¼€å¯æ–°ä¸€é¡µå†…å®¹çš„ç»˜åˆ¶void CGPDFContextBeginPage(CGContextRef cg_nullable context, CFDictionaryRef __nullable pageInfo);//ç»“æŸå½“å‰é¡µå†…å®¹çš„ç»˜åˆ¶void CGPDFContextEndPage(CGContextRef cg_nullable context);//æ·»åŠ å…ƒæ•°æ®void CGPDFContextAddDocumentMetadata(CGContextRef cg_nullable context, CFDataRef __nullable metadata);//ä¸ºæŸä¸ªåŒºåŸŸæ·»åŠ è¶…é“¾æ¥void CGPDFContextSetURLForRect(CGContextRef cg_nullable context, CFURLRef url, CGRect rect);//åœ¨æ–‡æ¡£çš„æŸä¸ªç‚¹æ·»åŠ ä¸€ä¸ªç›®æ ‡void CGPDFContextAddDestinationAtPoint(CGContextRef cg_nullable context, CFStringRef name, CGPoint point);//ä¸ºæŸä¸ªåŒºåŸŸæ·»åŠ è·³è½¬ç›®æ ‡åŠŸèƒ½void CGPDFContextSetDestinationForRect(CGContextRef cg_nullable context, CFStringRef name, CGRect rect); åœ¨è®¾ç½®æ–‡æ¡£ä¿¡æ¯å­—å…¸æ—¶ï¼Œæ”¯æŒçš„å¸¸ç”¨é”®å¦‚ä¸‹ï¼š 1234567891011121314151617181920//è®¾ç½®æ–‡æ¡£æ ‡é¢˜ å¯é€‰è®¾ç½®const CFStringRef kCGPDFContextTitle;//è®¾ç½®æ–‡æ¡£çš„ä½œè€… å¯é€‰è®¾ç½®const CFStringRef kCGPDFContextAuthor;//è®¾ç½®æ–‡æ¡£çš„å‰¯æ ‡é¢˜ å¯é€‰è®¾ç½®const CFStringRef kCGPDFContextSubject;//ä¸ºæ–‡æ¡£è®¾ç½®å…³é”®å­— å¯é€‰è®¾ç½® å¯ä»¥è®¾ç½®ä¸ºä¸€ä¸ªæ•°ç»„ è®¾ç½®å¤šä¸ªå…³é”®å­—const CFStringRef kCGPDFContextKeywords;//è®¾ç½®æ–‡æ¡£çš„åˆ›å»ºè€…const CFStringRef kCGPDFContextCreator;//ä¸ºæ–‡æ¡£è®¾ç½®æ‰€æœ‰è€…å¯†ç const CFStringRef kCGPDFContextOwnerPassword;//ä¸ºæ–‡æ¡£è®¾ç½®ç”¨æˆ·å¯†ç const CFStringRef kCGPDFContextUserPassword;//è®¾ç½®åŠ å¯†å¯†é’¥é•¿åº¦const CFStringRef kCGPDFContextEncryptionKeyLength;//è®¾ç½®æ˜¯å¦å…è®¸ç»˜åˆ¶const CFStringRef kCGPDFContextAllowsPrinting;//è®¾ç½®æ˜¯å¦å…è®¸å¤åˆ¶const CFStringRef kCGPDFContextAllowsCopying; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°å››â€”â€”è¡¨å•","slug":"271 Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°å››â€”â€”è¡¨å•","date":"2016-12-05T16:00:00.000Z","updated":"2021-07-12T11:03:32.473Z","comments":true,"path":"2016/12/06/271 Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°å››â€”â€”è¡¨å•/","link":"","permalink":"http://huishao.cc/2016/12/06/271 Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°å››â€”â€”è¡¨å•/","excerpt":"","text":"Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°å››â€”â€”è¡¨å•ä¸€ã€åŸºæœ¬è¡¨å•æ ·å¼åœ¨Bootstrapæ¡†æ¶ä¸­ï¼Œå¯ä»¥ä¸ºè¡¨å•æ ‡ç­¾æ·»åŠ form-controlå±æ€§æ¥ä¸ºå…¶è®¾ç½®é»˜è®¤æ ·å¼ï¼Œé»˜è®¤è¡¨å•æ§ä»¶çš„å®½åº¦å°†å……æ»¡çˆ¶å®¹å™¨æ ‡ç­¾ã€‚éœ€è¦æ³¨æ„ï¼Œåœ¨å¸ƒå±€è¡¨å•æ—¶ï¼Œå¯ä»¥ä¸ºå…¶è®¾ç½®ä¸€ä¸ªlabelæ ‡ç­¾ç”¨äºè¯´æ˜ï¼Œå°†labelæ ‡ç­¾çš„forå±æ€§ä¸è¡¨å•æ ‡ç­¾çš„idç›¸å¯¹åº”ï¼Œå¯ä»¥å®ç°å½“ç”¨æˆ·ç‚¹å‡»labelæ ‡ç­¾æ—¶ä½¿å…¶å¯¹åº”çš„è¡¨å•è‡ªåŠ¨è·å–è¾“å…¥ç„¦ç‚¹ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617&lt;p&gt;Bootstrapä¸ºé»˜è®¤çš„è¡¨å•ä¾¿ç­¾æ·»åŠ äº†æ ·å¼&lt;/p&gt;&lt;form&gt; &lt;div class=\"form-group\"&gt; &lt;label for=\"exampleInputEmail1\"&gt;Email address&lt;/label&gt; &lt;input type=\"email\" class=\"form-control\" id=\"exampleInputEmail1\" placeholder=\"Enter email\"&gt; &lt;/div&gt; &lt;div class=\"form-group\"&gt; &lt;label for=\"exampleInputPassword1\"&gt;Password&lt;/label&gt; &lt;input type=\"password\" class=\"form-control\" id=\"exampleInputPassword1\" placeholder=\"Password\"&gt; &lt;/div&gt; &lt;div class=\"checkbox\"&gt; &lt;label&gt; &lt;input type=\"checkbox\"&gt;æ€§åˆ« &lt;/label&gt; &lt;/div&gt; &lt;button type=\"submit\"&gt;æäº¤&lt;/button&gt;&lt;/form&gt; éœ€è¦æ³¨æ„ï¼Œå°†labelå’Œè¡¨å•æ ‡ç­¾åŒ…è£¹åœ¨form-groupç±»å†…ï¼Œä¼šè‡ªåŠ¨è¿›è¡Œé—´è·çš„å¸ƒå±€è®¾ç½®ã€‚æ•ˆæœå¦‚ä¸‹ï¼š é»˜è®¤æƒ…å†µä¸‹ï¼Œlabelä¸è¡¨å•å…ƒç´ çš„æ’åˆ—æ˜¯ç«–ç›´å¸ƒå±€çš„ï¼Œå¯ä»¥ä½¿ç”¨form-horizontalç±»æ¥å°†å…¶è®¾ç½®ä¸ºæ°´å¹³å¸ƒå±€ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314151617181920&lt;p&gt;ä½¿ç”¨from-horizontalç±»å¯ä»¥å°†labelä¸è¡¨å•è¿›è¡Œæ°´å¹³æ’åˆ—ï¼Œå¹¶å¯ä»¥ç»“åˆæ …æ ¼ç³»ç»Ÿä½¿ç”¨&lt;/p&gt;&lt;form class=\"form-horizontal\" role=\"form\"&gt; &lt;div class=\"form-group\"&gt; &lt;label for=\"inputEmail3\" class=\"col-sm-2\"&gt;Email&lt;/label&gt; &lt;div class=\"col-sm-10\"&gt; &lt;input type=\"email\" class=\"form-control\" id=\"inputEmail3\" placeholder=\"Email\"&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=\"form-group\"&gt; &lt;label for=\"inputPassword3\" class=\"col-sm-2\"&gt;Password&lt;/label&gt; &lt;div class=\"col-sm-10\"&gt; &lt;input type=\"password\" class=\"form-control\" id=\"inputPassword3\" placeholder=\"Password\"&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=\"form-group\"&gt; &lt;div class=\"col-sm-offset-2 col-sm-10\"&gt; &lt;button type=\"submit\" class=\"btn btn-default\"&gt;Sign in&lt;/button&gt; &lt;/div&gt; &lt;/div&gt;&lt;/form&gt; æ•ˆæœå¦‚ä¸‹ï¼š äºŒã€é€‰æ‹©æ¡†ä¸ä¸‹æ‹‰åˆ—è¡¨HTMLä¸­æœ‰å•é€‰æ¡†å’Œå¤é€‰æ¡†ä¸¤ç§é€‰æ‹©æ¡†æ ‡ç­¾ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233&lt;p&gt;é»˜è®¤çš„å•é€‰æ¡†ä¸å¤é€‰æ¡†æ ·å¼&lt;/p&gt;&lt;p&gt;å¤é€‰æ¡†&lt;/p&gt;&lt;div class=\"checkbox\"&gt;&lt;label&gt; &lt;input type=\"checkbox\" name=\"\" id=\"\" value=\"\" /&gt; è¶³çƒ&lt;/label&gt;&lt;/div&gt;&lt;div class=\"checkbox\"&gt;&lt;label&gt; &lt;input type=\"checkbox\" name=\"\" id=\"\" value=\"\" /&gt; ç¯®çƒ&lt;/label&gt;&lt;/div&gt;&lt;div class=\"checkbox\"&gt;&lt;label&gt; &lt;input type=\"checkbox\" name=\"\" id=\"\" value=\"\" /&gt; ä¹’ä¹“çƒ&lt;/label&gt;&lt;/div&gt;&lt;p&gt;å•é€‰æ¡†&lt;/p&gt;&lt;div class=\"radio\"&gt; &lt;label&gt; &lt;input type=\"radio\" name=\"sex\"/&gt; ç”· &lt;/label&gt;&lt;/div&gt;&lt;div class=\"radio\"&gt; &lt;label&gt; &lt;input type=\"radio\" name=\"sex\"/&gt; å¥³ &lt;/label&gt;&lt;/div&gt; å¯ä»¥çœ‹åˆ°ï¼Œé»˜è®¤çš„å•é€‰æ¡†ä¸å¤é€‰æ¡†çš„æ’åˆ—ä¹Ÿæ˜¯å‚ç›´å¸ƒå±€çš„ï¼Œä½¿ç”¨checkbox-inlineç±»å’Œradio-inlineç±»å¯ä»¥å®ç°æ°´å¹³æ’åˆ—å¸ƒå±€ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233&lt;p&gt;æ°´å¹³æ’åˆ—çš„å•é€‰æ¡†ä¸å¤é€‰æ¡†æ ·å¼&lt;/p&gt;&lt;p&gt;å¤é€‰æ¡†&lt;/p&gt;&lt;div class=\"checkbox-inline\"&gt; &lt;label&gt; &lt;input type=\"checkbox\" name=\"\" id=\"\" value=\"\" /&gt; è¶³çƒ&lt;/label&gt;&lt;/div&gt;&lt;div class=\"checkbox-inline\"&gt; &lt;label&gt; &lt;input type=\"checkbox\" name=\"\" id=\"\" value=\"\" /&gt; ç¯®çƒ&lt;/label&gt;&lt;/div&gt;&lt;div class=\"checkbox-inline\"&gt; &lt;label&gt; &lt;input type=\"checkbox\" name=\"\" id=\"\" value=\"\" /&gt; ä¹’ä¹“çƒ&lt;/label&gt;&lt;/div&gt;&lt;p&gt;å•é€‰æ¡†&lt;/p&gt;&lt;div class=\"radio-inline\"&gt; &lt;label&gt; &lt;input type=\"radio\" name=\"sex\"/&gt; ç”· &lt;/label&gt;&lt;/div&gt;&lt;div class=\"radio-inline\"&gt; &lt;label&gt; &lt;input type=\"radio\" name=\"sex\"/&gt; å¥³ &lt;/label&gt;&lt;/div&gt; æ•ˆæœå¦‚ä¸‹å›¾ï¼š Bootstrapæ¡†æ¶ä¸­é»˜è®¤çš„ä¸‹æ‹‰åˆ—è¡¨æ ·å¼ç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678&lt;p&gt;é»˜è®¤çš„ä¸‹æ‹‰åˆ—è¡¨&lt;/p&gt;&lt;select class=\"form-control\"&gt; &lt;option&gt;ä¸Šæµ·&lt;/option&gt; &lt;option&gt;åŒ—äº¬&lt;/option&gt; &lt;option&gt;éƒ‘å·&lt;/option&gt; &lt;option&gt;æ·±åœ³&lt;/option&gt; &lt;option&gt;å¹¿å·&lt;/option&gt;&lt;/select&gt; æ•ˆæœå¦‚ä¸‹ï¼š å¼€å‘è€…ä¹Ÿå¯ä»¥é€šè¿‡æ·»åŠ multipleå‚æ•°çš„æ–¹å¼æ¥è¿›è¡Œä¸‹æ‹‰é€‰é¡¹çš„å…¨éƒ¨å±•ç¤ºï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678&lt;p&gt;ä½¿ç”¨multipleå‚æ•°æ¥è¿›è¡Œä¸‹æ‹‰é€‰é¡¹çš„å…¨éƒ¨å±•ç¤º&lt;/p&gt;&lt;select multiple class=\"form-control\"&gt; &lt;option&gt;ä¸Šæµ·&lt;/option&gt; &lt;option&gt;åŒ—äº¬&lt;/option&gt; &lt;option&gt;éƒ‘å·&lt;/option&gt; &lt;option&gt;æ·±åœ³&lt;/option&gt; &lt;option&gt;å¹¿å·&lt;/option&gt;&lt;/select&gt; æ•ˆæœå¦‚ä¸‹ï¼š ä¸‰ã€è¡¨å•çŠ¶æ€ä¸ºè¡¨å•å…ƒç´ æ·»åŠ disabledå±æ€§æ¥å°†è¡¨å•è®¾ç½®ä¸ºç¦ç”¨çŠ¶æ€ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567&lt;p&gt;ç¦ç”¨è¡¨å•&lt;/p&gt;&lt;input class=\"form-control\" placeholder=\"è¢«ç¦ç”¨çš„è¾“å…¥æ¡†\" type=\"text\" disabled/&gt;&lt;div class=\"checkbox\"&gt;&lt;label&gt; &lt;input type=\"checkbox\" disabled/&gt;è¢«ç¦ç”¨çš„å¤é€‰æ¡†&lt;/label&gt;&lt;/div&gt; æ•ˆæœå¦‚ä¸‹ï¼š å¦‚æœåœ¨å¼€å‘ä¸­éœ€è¦ä½¿ä¸€ç»„çš„è¡¨å•å…ƒç´ å…¨éƒ¨å¤„äºç¦ç”¨çŠ¶æ€ï¼Œå¯ä»¥ä½¿ç”¨fieldsetæ ‡ç­¾è¿›è¡ŒåŒ…è£¹ï¼Œå¹¶ä¸ºfieldsetæ ‡ç­¾æ·»åŠ disabledå±æ€§ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415161718192021 &lt;p&gt;è¿›è¡Œä¸€ç»„è¡¨å•å…ƒç´ çš„ç¦ç”¨&lt;/p&gt; &lt;form&gt; &lt;fieldset disabled&gt; &lt;div class=\"form-group\"&gt; &lt;label for=\"disabledTextInput\"&gt;è¢«ç¦ç”¨çš„è¾“å…¥æ¡†&lt;/label&gt; &lt;input type=\"text\" id=\"disabledTextInput\" class=\"form-control\" placeholder=\"è¢«ç¦ç”¨çš„è¾“å…¥æ¡†\"&gt; &lt;/div&gt; &lt;div class=\"form-group\"&gt; &lt;label for=\"disabledSelect\"&gt;è¢«ç¦ç”¨çš„ä¸‹æ‹‰èœå•&lt;/label&gt; &lt;select id=\"disabledSelect\" class=\"form-control\"&gt; &lt;option&gt;è¢«ç¦ç”¨çš„ä¸‹æ‹‰èœå•&lt;/option&gt; &lt;/select&gt; &lt;/div&gt; &lt;div class=\"checkbox\"&gt; &lt;label&gt; &lt;input type=\"checkbox\"&gt; è¢«ç¦ç”¨çš„é€‰æ‹©æ¡†&lt;/label&gt; &lt;/div&gt; &lt;button type=\"submit\" class=\"btn btn-primary\"&gt;è¢«ç¦ç”¨çš„æŒ‰é’®&lt;/button&gt; &lt;/fieldset&gt; &lt;/form&gt; æ•ˆæœå¦‚ä¸‹ï¼š Bootstrapä¸­ä¹Ÿå®šä¹‰å¥½äº†ä¸€äº›æ ¡éªŒçŠ¶æ€çš„æ ·å¼ï¼Œä¾‹å¦‚è­¦å‘Šï¼ŒæˆåŠŸï¼Œé”™è¯¯ç­‰çŠ¶æ€ï¼Œä¸ºè¡¨å•å…ƒç´ çš„çˆ¶æ ‡ç­¾æ·»åŠ è¿™äº›çŠ¶æ€ç±»å³å¯ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112&lt;p&gt;æ ¡éªŒçŠ¶æ€&lt;/p&gt;&lt;form&gt; &lt;div class=\"has-error form-group\"&gt; &lt;input class=\"form-control\" placeholder=\"é”™è¯¯çŠ¶æ€çš„è¡¨å•\" type=\"text\" /&gt; &lt;/div&gt; &lt;div class=\"has-success form-group\"&gt; &lt;input class=\"form-control\" placeholder=\"æˆåŠŸçŠ¶æ€çš„è¡¨å•\" type=\"text\" /&gt; &lt;/div&gt; &lt;div class=\"has-warning form-group\"&gt; &lt;input class=\"form-control\" placeholder=\"è­¦å‘ŠçŠ¶æ€çš„è¡¨å•\" type=\"text\" /&gt; &lt;/div&gt;&lt;/form&gt; æ•ˆæœå¦‚ä¸‹ï¼š å¼€å‘è€…ä¹Ÿå¯ä»¥ä¸ºéªŒè¯è¡¨å•çš„å³ä¾§æ·»åŠ ä¸€ä¸ªå°å›¾æ ‡ï¼Œå‰æéœ€è¦ä¸ºè¡¨å•å…ƒç´ çš„çˆ¶å…ƒç´ è®¾ç½®has-feedbackç±»ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415&lt;p&gt;ä¸ºè¡¨å•æ·»åŠ å³ä¾§icon&lt;/p&gt;&lt;form&gt; &lt;div class=\"form-group has-error has-feedback \"&gt; &lt;input class=\"form-control\" placeholder=\"é”™è¯¯çŠ¶æ€çš„è¡¨å•\" type=\"text\" /&gt; &lt;span class=\"glyphicon glyphicon-eur form-control-feedback\"&gt;&lt;/span&gt; &lt;/div&gt; &lt;div class=\"has-success form-group has-feedback\"&gt; &lt;input class=\"form-control\" placeholder=\"æˆåŠŸçŠ¶æ€çš„è¡¨å•\" type=\"text\" /&gt; &lt;span class=\"glyphicon glyphicon-ok form-control-feedback\"&gt;&lt;/span&gt; &lt;/div&gt; &lt;div class=\"has-warning form-group has-feedback\"&gt; &lt;input class=\"form-control\" placeholder=\"è­¦å‘ŠçŠ¶æ€çš„è¡¨å•\" type=\"text\" /&gt; &lt;span class=\"glyphicon glyphicon-off form-control-feedback\"&gt;&lt;/span&gt; &lt;/div&gt;&lt;/form&gt; æ•ˆæœå¦‚ä¸‹ï¼š å¦å¤–ï¼Œæœ¬ç¯‡åšå®¢ä¸­æ‰€æœ‰çš„å®ä¾‹ä»£ç åŠæ˜¾ç¤ºæ•ˆæœï¼Œåœ¨å¦‚ä¸‹åœ°å€ä¸­ï¼Œéœ€è¦çš„å¯ä»¥è‡ªè¡Œå¯¹ç…§å­¦ä¹ ã€‚ http://zyhshao.github.io/bootStrapDemo/form.htmlã€‚ å‰ç«¯å­¦ä¹ æ–°äººï¼Œæœ‰å¿—åŒé“åˆçš„æœ‹å‹ï¼Œæ¬¢è¿äº¤æµä¸æŒ‡å¯¼ï¼ŒQQç¾¤:541458536","categories":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}],"tags":[],"keywords":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}]},{"title":"Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°ä¸‰â€”â€”ä»£ç ä¸è¡¨æ ¼","slug":"270Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°ä¸‰â€”â€”ä»£ç ä¸è¡¨æ ¼","date":"2016-12-04T16:00:00.000Z","updated":"2021-07-12T07:11:52.053Z","comments":true,"path":"2016/12/05/270Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°ä¸‰â€”â€”ä»£ç ä¸è¡¨æ ¼/","link":"","permalink":"http://huishao.cc/2016/12/05/270Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°ä¸‰â€”â€”ä»£ç ä¸è¡¨æ ¼/","excerpt":"","text":"Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°ä¸‰â€”â€”ä»£ç ä¸è¡¨æ ¼ä¸€ã€ä»£ç åœ¨æŠ€æœ¯åšå®¢æ–‡ç« ç±»é¡µé¢çš„å¼€å‘ä¸­ï¼Œå¸¸å¸¸éœ€è¦åœ¨æ–‡æœ¬æ€»æ’å…¥è¯´æ˜ä»£ç ï¼Œä½¿ç”¨codeä¾¿ç­¾å¯ä»¥åˆ›å»ºè¿™ç§æ•ˆæœï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12&lt;p&gt;codeæ ‡ç­¾ç”¨äºåœ¨æ–‡æœ¬ä¸­æ’å…¥ä»£ç &lt;/p&gt;&lt;div&gt;å®šä¹‰å˜é‡a:&lt;code&gt;int a = 3; &lt;/code&gt;&lt;/div&gt; æ•ˆæœå¦‚ä¸‹ï¼š kbdæ ‡ç­¾å¯ä»¥ç”¨æ¥æç¤ºè¿›è¡Œé”®ç›˜è¾“å…¥ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12&lt;p&gt;kbdæ ‡ç­¾å¯ä»¥åˆ›å»ºç”¨æˆ·é”®ç›˜è¾“å…¥çš„æ•ˆæœ&lt;/p&gt;&lt;div&gt;ä½¿ç”¨é”®ç›˜ä¸Šçš„&lt;kbd&gt;control&lt;/kbd&gt;+&lt;kbd&gt;v&lt;/kbd&gt;æ¥è¿›è¡Œæ–‡æœ¬çš„ç²˜è´´&lt;/div&gt; æ•ˆæœï¼š å¯ä»¥ä½¿ç”¨preæ ‡ç­¾æ¥è¿›è¡Œæˆæ®µä»£ç çš„æ’å…¥ï¼ŒåŒæ—¶å¯ä»¥ä½¿ç”¨pre-scrollableç±»æ¥å°†ä»£ç å—ä¿®é¥°ä¸ºå¯æ»šåŠ¨çš„ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567&lt;pre class=\"pre-scrollable\"&gt;&amp;lt;head&amp;gt; &amp;lt;meta charset=\"UTF-8\"&amp;gt; &amp;lt;link rel=\"stylesheet\" href=\"../bower_components/bootstrap/dist/css/bootstrap.min.css\" /&amp;gt; &amp;lt;title&amp;lt;ä»£ç ä¸è¡¨æ ¼&amp;lt;/title&amp;gt;&amp;lt;/head&amp;gt;&lt;/pre&gt; æ•ˆæœå¦‚ä¸‹ï¼š é™¤äº†ä¸Šé¢æè¿°çš„æ ‡ç­¾å’Œç±»å¤–ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç¨‹åºä¸­çš„å˜é‡ä¼šä»¥æ–œä½“æ¥æ˜¾ç¤ºï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨varæ ‡ç­¾æ¥åŒ…è£¹ï¼Œç¨‹åºè¾“å‡ºç»“æœå¯ä»¥ä½¿ç”¨sampæ ‡ç­¾æ¥åŒ…è£¹ã€‚ äºŒã€è¡¨æ ¼ä¸ºH5æ ‡ç­¾tableæ·»åŠ tableç±»å¯ä»¥ä½¿ç”¨Bootstrapå®šä¹‰çš„è¡¨æ ¼æ ·å¼ï¼Œç¤ºä¾‹å¦‚ä¸‹: 1234567891011121314&lt;p&gt;ä½¿ç”¨tableæ ‡ç­¾æ·»åŠ tableç±»å¯ä»¥è¿›è¡Œè¡¨æ ¼çš„åˆ›å»º&lt;/p&gt;&lt;table class=\"table\"&gt; &lt;thead&gt;å­¦ç”Ÿè¡¨&lt;/thead&gt; &lt;tr&gt; &lt;th&gt;ç­çº§&lt;/th&gt; &lt;th&gt;å§“å&lt;/th&gt; &lt;th&gt;å¹´é¾„&lt;/th&gt; &lt;/tr&gt; &lt;tr&gt; &lt;th&gt;3å¹´1ç­&lt;/th&gt; &lt;th&gt;jaki&lt;/th&gt; &lt;th&gt;24&lt;/th&gt; &lt;/tr&gt;&lt;/table&gt; æ•ˆæœå¦‚ä¸‹ï¼š ä¸ºè¡¨æ ¼æ·»åŠ tabke-stripedç±»å¯ä»¥å®ç°æ–‘é©¬çº¹æ ·å¼çš„è¡¨æ ¼ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516171819&lt;p&gt;ä½¿ç”¨table-stripedç±»å¯ä»¥ä¸ºè¡¨æ ¼æ·»åŠ æ–‘é©¬çº¹&lt;/p&gt;&lt;table class=\"table table-striped\"&gt; &lt;thead&gt;å­¦ç”Ÿè¡¨&lt;/thead&gt; &lt;tr&gt; &lt;th&gt;ç­çº§&lt;/th&gt; &lt;th&gt;å§“å&lt;/th&gt; &lt;th&gt;å¹´é¾„&lt;/th&gt; &lt;/tr&gt; &lt;tr&gt; &lt;th&gt;3å¹´1ç­&lt;/th&gt; &lt;th&gt;jaki&lt;/th&gt; &lt;th&gt;24&lt;/th&gt; &lt;/tr&gt; &lt;tr&gt; &lt;th&gt;3å¹´2ç­&lt;/th&gt; &lt;th&gt;Annay&lt;/th&gt; &lt;th&gt;22&lt;/th&gt; &lt;/tr&gt;&lt;/table&gt; æ•ˆæœå¦‚ä¸‹ï¼š Bootstrapé»˜è®¤çš„åˆ—è¡¨æ ·å¼æ˜¯ä¸å¸¦è¾¹æ¡†çš„ï¼Œå¯ä»¥ä½¿ç”¨table-borderedç±»æ¥ä¸ºåˆ—è¡¨æ·»åŠ è¾¹æ¡†ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516171819&lt;p&gt;ä½¿ç”¨table-boarderedç±»å¯ä»¥ä¸ºè¡¨æ ¼æ·»åŠ è¾¹æ¡†&lt;/p&gt;&lt;table class=\"table table-striped table-bordered\"&gt; &lt;thead&gt;å­¦ç”Ÿè¡¨&lt;/thead&gt; &lt;tr&gt; &lt;th&gt;ç­çº§&lt;/th&gt; &lt;th&gt;å§“å&lt;/th&gt; &lt;th&gt;å¹´é¾„&lt;/th&gt; &lt;/tr&gt; &lt;tr&gt; &lt;th&gt;3å¹´1ç­&lt;/th&gt; &lt;th&gt;jaki&lt;/th&gt; &lt;th&gt;24&lt;/th&gt; &lt;/tr&gt; &lt;tr&gt; &lt;th&gt;3å¹´2ç­&lt;/th&gt; &lt;th&gt;Annay&lt;/th&gt; &lt;th&gt;22&lt;/th&gt; &lt;/tr&gt;&lt;/table&gt; æ•ˆæœå¦‚ä¸‹ï¼š ä½¿ç”¨table-hoverç±»ä¿®é¥°çš„åˆ—è¡¨ï¼Œå½“é¼ æ ‡æ‚¬åœæ—¶ä¼šæœ‰é«˜äº®æ•ˆæœï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516171819&lt;p&gt;ä½¿ç”¨table-hoverç±»ä¿®é¥°çš„åˆ—è¡¨ï¼Œå½“é¼ æ ‡æ‚¬åœæ—¶ ä¼šæœ‰é«˜äº®æ•ˆæœ&lt;/p&gt;&lt;table class=\"table table-hover\"&gt; &lt;thead&gt;å­¦ç”Ÿè¡¨&lt;/thead&gt; &lt;tr&gt; &lt;th&gt;ç­çº§&lt;/th&gt; &lt;th&gt;å§“å&lt;/th&gt; &lt;th&gt;å¹´é¾„&lt;/th&gt; &lt;/tr&gt; &lt;tr&gt; &lt;th&gt;3å¹´1ç­&lt;/th&gt; &lt;th&gt;jaki&lt;/th&gt; &lt;th&gt;24&lt;/th&gt; &lt;/tr&gt; &lt;tr&gt; &lt;th&gt;3å¹´2ç­&lt;/th&gt; &lt;th&gt;Annay&lt;/th&gt; &lt;th&gt;22&lt;/th&gt; &lt;/tr&gt;&lt;/table&gt; ä½¿ç”¨.table-condensedç±»å¯ä»¥æ˜¯é»˜è®¤çš„åˆ—è¡¨paddingå‡åŠã€‚ å¯¹äºè¡Œæ ‡ç­¾trä¸åˆ—è¡¨å‰thï¼Œå¼€å‘è€…ä¹Ÿå¯ä»¥ä½¿ç”¨å¦‚ä¸‹ç±»æ¥ä¿®é¥°ï¼Œä¸ºå…¶æŒ‡å®šçŠ¶æ€ï¼š .activeç±»ï¼šå°†æ­¤è¡Œæˆ–è€…æ­¤åˆ—æ ‡è®°ä¸ºé«˜äº®çŠ¶æ€ã€‚ .successç±»ï¼šå°†æ­¤è¡Œæˆ–è€…æ­¤åˆ—æ ‡è®°ä¸ºæˆåŠŸçŠ¶æ€ã€‚ .infoç±»ï¼šå°†æ­¤è¡Œæˆ–è€…æ­¤åˆ—æ ‡è®°ä¸ºè¯¦æƒ…çŠ¶æ€ã€‚ .warningç±»ï¼šå°†æ­¤è¡Œæˆ–è€…æ­¤åˆ—æ ‡è®°ä¸ºè­¦å‘ŠçŠ¶æ€ã€‚ .dangerç±»ï¼šå°†æ­¤è¡Œæˆ–è€…æ­¤åˆ—æ ‡è®°ä¸ºå±é™©çŠ¶æ€ã€‚ ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334&lt;p&gt;ä¸ºåˆ—è¡¨è®¾ç½®çŠ¶æ€&lt;/p&gt;&lt;table class=\"table table-hover table-condensed\"&gt; &lt;thead&gt;å­¦ç”Ÿè¡¨&lt;/thead&gt; &lt;tr&gt; &lt;th&gt;ç­çº§&lt;/th&gt; &lt;th&gt;å§“å&lt;/th&gt; &lt;th&gt;å¹´é¾„&lt;/th&gt; &lt;/tr&gt; &lt;tr class=\"active\"&gt; &lt;th&gt;3å¹´1ç­&lt;/th&gt; &lt;th&gt;jaki&lt;/th&gt; &lt;th&gt;24&lt;/th&gt; &lt;/tr&gt; &lt;tr class=\"success\"&gt; &lt;th&gt;3å¹´2ç­&lt;/th&gt; &lt;th&gt;Annay&lt;/th&gt; &lt;th&gt;22&lt;/th&gt; &lt;/tr&gt; &lt;tr class=\"info\"&gt; &lt;th&gt;3å¹´1ç­&lt;/th&gt; &lt;th&gt;CJ&lt;/th&gt; &lt;th&gt;19&lt;/th&gt; &lt;/tr&gt; &lt;tr class=\"warning\"&gt; &lt;th&gt;3å¹´1ç­&lt;/th&gt; &lt;th&gt;jaki&lt;/th&gt; &lt;th&gt;24&lt;/th&gt; &lt;/tr&gt; &lt;tr&gt; &lt;th&gt;3å¹´2ç­&lt;/th&gt; &lt;th class=\"danger\"&gt;Annay&lt;/th&gt; &lt;th&gt;22&lt;/th&gt; &lt;/tr&gt;&lt;/table&gt; æ•ˆæœå¦‚ä¸‹ï¼š åˆ—è¡¨å…ƒç´ ä¹Ÿå¯ä»¥åŒ…è£¹åœ¨table-responsiveç±»å†…ï¼Œæ­¤æ—¶åˆ—è¡¨ä¼šå˜æˆå“åº”å¼åˆ—è¡¨ï¼Œå½“å±å¹•å°ºå¯¸å°äº768pxæ—¶ï¼Œä¼šè‡ªåŠ¨å‡ºç°æ°´å¹³æ»šåŠ¨æ¡ã€‚ å¦å¤–ï¼Œæœ¬ç¯‡åšå®¢ä¸­æ‰€æœ‰çš„å®ä¾‹ä»£ç åŠæ˜¾ç¤ºæ•ˆæœï¼Œåœ¨å¦‚ä¸‹åœ°å€ä¸­ï¼Œéœ€è¦çš„å¯ä»¥è‡ªè¡Œå¯¹ç…§å­¦ä¹ ã€‚ http://zyhshao.github.io/bootStrapDemo/codeAndGroup.htmlã€‚ å‰ç«¯å­¦ä¹ æ–°äººï¼Œæœ‰å¿—åŒé“åˆçš„æœ‹å‹ï¼Œæ¬¢è¿äº¤æµä¸æŒ‡å¯¼ï¼ŒQQç¾¤:541458536","categories":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}],"tags":[],"keywords":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}]},{"title":"iOSå¼€å‘CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¹‹å…«â€”â€”å±‚èšåˆ","slug":"269iOSå¼€å‘CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¹‹å…«â€”â€”å±‚èšåˆ","date":"2016-12-03T16:00:00.000Z","updated":"2021-07-12T07:09:44.931Z","comments":true,"path":"2016/12/04/269iOSå¼€å‘CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¹‹å…«â€”â€”å±‚èšåˆ/","link":"","permalink":"http://huishao.cc/2016/12/04/269iOSå¼€å‘CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¹‹å…«â€”â€”å±‚èšåˆ/","excerpt":"","text":"iOSå¼€å‘CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¹‹å…«â€”â€”å±‚èšåˆæ­£å¸¸æƒ…å†µä¸‹ï¼Œåœ¨ä½¿ç”¨CoreGraphicsæ¡†æ¶ä¸­çš„æ–¹æ³•è¿›è¡Œå›¾å½¢ç»˜åˆ¶æ—¶ï¼Œæ¯ä¸€é—­åˆçš„å›¾å½¢éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å±‚ï¼Œå¦‚æœåœ¨ç»˜åˆ¶æ—¶æ·»åŠ äº†é˜´å½±æ•ˆæœï¼Œåˆ™é€šè¿‡é˜´å½±å¯ä»¥å¾ˆæ˜æ˜¾çš„çœ‹åˆ°å›¾å½¢çš„åˆ†å±‚æƒ…å†µï¼Œåç»˜åˆ¶çš„å›¾å½¢åœ¨ä¸Šå±‚ï¼Œå…ˆç»˜åˆ¶çš„å›¾å½¢åœ¨ä¸‹å±‚ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415-(void)drawRect:(CGRect)rect&#123; float width = rect.size.width/2; CGPoint center = CGPointMake(rect.size.width/2, rect.size.height/2); CGSize myShadowOffset = CGSizeMake (10, -20); CGContextRef myContext = UIGraphicsGetCurrentContext(); //è®¾ç½®é˜´å½± CGContextSetShadow (myContext, myShadowOffset, 10); //ç»˜åˆ¶ä¸‰ä¸ªåœ†å½¢ CGContextSetRGBFillColor (myContext, 0, 1, 0, 1); CGContextFillEllipseInRect(myContext, CGRectMake(center.x-width/2, center.y-width/4*3, width, width)); CGContextSetRGBFillColor (myContext, 0, 0, 1, 1); CGContextFillEllipseInRect(myContext, CGRectMake(center.x-width/4, center.y-width/4, width, width)); CGContextSetRGBFillColor (myContext, 1, 0, 0, 1); CGContextFillEllipseInRect(myContext, CGRectMake(center.x-width/4*3, center.y-width/4, width, width));&#125; è¿è¡Œæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä»å›¾ä¸­å¯ä»¥å‘ç°ï¼Œæ‰€ç»˜åˆ¶çš„3ä¸ªåœ†å½¢å¹¶éæ˜¯åœ¨åŒä¸€å±‚çº§ä¸Šï¼Œæœ‰æ—¶å¼€å‘è€…å¯èƒ½éœ€è¦ç»˜åˆ¶è¾¹ç•Œå¤æ‚çš„å›¾å½¢ï¼Œè¿˜ä»¥ä¸Šé¢çš„ä¾‹å­æ¥è¯´ï¼Œå¦‚æœå¼€å‘è€…éœ€è¦ç»˜åˆ¶æŸä¸ªå›¾å½¢çš„è¾¹ç•Œæ˜¯æœ‰3ä¸ªåœ†å½¢æ‹¼æ¥è€Œæˆï¼Œå‡ºç°è¿™æ ·çš„å±‚çº§æ•ˆæœæ˜¯ä¸åˆç†çš„ã€‚CoreGraphicsæ¡†æ¶ä¸­ä¹Ÿæä¾›äº†è¿›è¡Œå›¾å½¢èšåˆç»˜åˆ¶çš„æ–¹æ³•ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415161718-(void)drawRect:(CGRect)rect&#123; float width = rect.size.width/2; CGPoint center = CGPointMake(rect.size.width/2, rect.size.height/2); CGSize myShadowOffset = CGSizeMake (10, -20); CGContextRef myContext = UIGraphicsGetCurrentContext(); CGContextSetShadow (myContext, myShadowOffset, 10); CGContextBeginTransparencyLayer (myContext, NULL); //å¼€å¯å›¾å½¢èšåˆç»˜åˆ¶ //ä¹‹åçš„ç»˜åˆ¶ä»£ç éƒ½å°†ç»˜åˆ¶åˆ°ç»Ÿä¸€å±‚ä¸Š CGContextSetRGBFillColor (myContext, 0, 1, 0, 1); CGContextFillEllipseInRect(myContext, CGRectMake(center.x-width/2, center.y-width/4*3, width, width)); CGContextSetRGBFillColor (myContext, 0, 0, 1, 1); CGContextFillEllipseInRect(myContext, CGRectMake(center.x-width/4, center.y-width/4, width, width)); CGContextSetRGBFillColor (myContext, 1, 0, 0, 1); CGContextFillEllipseInRect(myContext, CGRectMake(center.x-width/4*3, center.y-width/4, width, width)); //ç»“æŸèšåˆç»˜åˆ¶ CGContextEndTransparencyLayer (myContext);&#125; æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š æœ‰äº†èšåˆç»˜åˆ¶è¿™æ ·çš„æ–¹æ³•ï¼Œè¿›è¡Œå¤æ‚å›¾å½¢çš„ç»˜åˆ¶å°†æ›´åŠ çµæ´»ï¼ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°äºŒâ€”â€”æ’ç‰ˆæ ‡ç­¾ä¸ç±»","slug":"268Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°äºŒâ€”â€”æ’ç‰ˆæ ‡ç­¾ä¸ç±»","date":"2016-12-02T16:00:00.000Z","updated":"2021-07-12T07:06:41.048Z","comments":true,"path":"2016/12/03/268Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°äºŒâ€”â€”æ’ç‰ˆæ ‡ç­¾ä¸ç±»/","link":"","permalink":"http://huishao.cc/2016/12/03/268Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°äºŒâ€”â€”æ’ç‰ˆæ ‡ç­¾ä¸ç±»/","excerpt":"","text":"Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°äºŒâ€”â€”æ’ç‰ˆæ ‡ç­¾ä¸ç±»Bootstrapä¸­å¯¹hæ ‡ç­¾çš„å­—ä½“å’Œå­—å·è¿›è¡Œäº†å¾®è°ƒï¼Œå¼€å‘è€…é™¤äº†å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™äº›æ ‡ç­¾è¿›è¡Œæ ‡é¢˜çš„ä¿®é¥°å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨.h1åˆ°.h6ç±»æ¥å°†å…¶ä»–å…ƒç´ çš„å­—ä½“è¿›è¡Œä¿®é¥°ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415&lt;p&gt;h1 åˆ° h6 æ ‡ç­¾çš„æ ·å¼&lt;/p&gt;&lt;h1&gt;h1. Bootstrap heading&lt;/h1&gt;&lt;h2&gt;h2. Bootstrap heading&lt;/h2&gt;&lt;h3&gt;h3. Bootstrap heading&lt;/h3&gt;&lt;h4&gt;h4. Bootstrap heading&lt;/h4&gt;&lt;h5&gt;h5. Bootstrap heading&lt;/h5&gt;&lt;h6&gt;h6. Bootstrap heading&lt;/h6&gt;&lt;hr /&gt;&lt;p&gt;.h1 åˆ° .h6 ç±»çš„æ ·å¼&lt;/p&gt;&lt;div class=\"h1\"&gt;h1. Bootstrap heading&lt;/div&gt;&lt;div class=\"h2\"&gt;h1. Bootstrap heading&lt;/div&gt;&lt;div class=\"h3\"&gt;h1. Bootstrap heading&lt;/div&gt;&lt;div class=\"h4\"&gt;h1. Bootstrap heading&lt;/div&gt;&lt;div class=\"h5\"&gt;h1. Bootstrap heading&lt;/div&gt;&lt;div class=\"h6\"&gt;h1. Bootstrap heading&lt;/div&gt; åœ¨æ ‡é¢˜æˆ–è€…å…¶ä»–æ ‡ç­¾ä¸­ä½¿ç”¨smallæ ‡ç­¾æˆ–è€…smallç±»å¯ä»¥æ·»åŠ å†…éƒ¨å‰¯æ ‡é¢˜ï¼Œå‰¯æ ‡é¢˜é™¤äº†å­—å·ä¼šè¿›è¡Œç¼©å°è°ƒæ•´å¤–ï¼Œè¿˜ä¼šä¿®æ”¹æ–‡å­—çš„é¢œè‰²ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123&lt;p&gt;å¯ä»¥ä½¿ç”¨smallæ ‡ç­¾æˆ–è€….samllç±»æ¥å‘æ ‡é¢˜ä¸­æ·»åŠ å‰¯æ ‡é¢˜&lt;/p&gt;&lt;h3&gt;h3æ ‡é¢˜ &lt;small&gt;smallæ ‡ç­¾å‰¯æ ‡é¢˜&lt;/small&gt;&lt;/h3&gt;&lt;span class=\"h3\"&gt;h3Classç±» &lt;span class=\"small\"&gt;smallç±»å‰¯æ ‡é¢˜&lt;/span&gt;&lt;/span&gt; æ•ˆæœå¦‚ä¸‹ï¼š ä½¿ç”¨.leadå¯ä»¥å®ç°æ®µè½çš„å¼ºè°ƒæ˜¾ç¤ºï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªæ™®é€šæ®µè½&lt;/p&gt;&lt;p class=\"lead\"&gt;è¿™æ˜¯ä¸€ä¸ªå¼ºè°ƒæ®µè½&lt;/p&gt;&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªæ™®é€šæ®µè½&lt;/p&gt; æ•ˆæœå¦‚ä¸‹ï¼š ä½¿ç”¨markæ ‡ç­¾æˆ–è€…markç±»å¯ä»¥è¿›è¡Œç‰¹æ®Šæ–‡æœ¬çš„æ ‡è®°ï¼Œå¦‚ä¸‹ï¼š 12&lt;p&gt;ä½¿ç”¨markæ ‡ç­¾å¯ä»¥å®ç°éƒ¨åˆ†æ–‡æœ¬è¿›è¡Œæ ‡è®°&lt;/p&gt;&lt;div class=\"mark\"&gt;è¿›è¡Œ&lt;mark&gt;ç‰¹æ®Šæ–‡å­—&lt;/mark&gt;çš„æ ‡è®°&lt;/div&gt; æ•ˆæœå¦‚ä¸‹ï¼š ä½¿ç”¨delæ ‡ç­¾æˆ–è€…sæ ‡ç­¾å¯ä»¥å®ç°å¯¹æ–‡æœ¬æ·»åŠ åˆ é™¤çº¿æ•ˆæœï¼Œå¦‚ä¸‹ï¼š 1234&lt;p&gt;ä½¿ç”¨delæ ‡ç­¾æˆ–è€…sæ ‡ç­¾å¯ä»¥å®ç°æ–‡æœ¬çš„åˆ é™¤æ•ˆæœ&lt;/p&gt;&lt;del&gt;delæ ‡ç­¾çš„åˆ é™¤æ•ˆæœ&lt;/del&gt;&lt;br /&gt;&lt;s&gt;sæ ‡ç­¾çš„åˆ é™¤æ•ˆæœ&lt;/s&gt; æ•ˆæœå¦‚ä¸‹ï¼š ä½¿ç”¨insæ ‡ç­¾æˆ–è€…uæ ‡ç­¾å¯ä»¥å®ç°ä¸ºæœ¬æ–‡æ·»åŠ ä¸‹åˆ’çº¿æ•ˆæœï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234&lt;p&gt;ä½¿ç”¨insæ ‡ç­¾æˆ–è€…uæ ‡ç­¾å¯ä»¥å®ç°æ–‡æœ¬æ·»åŠ ä¸‹åˆ’çº¿&lt;/p&gt;&lt;ins&gt;insæ ‡ç­¾çš„ä¸‹åˆ’çº¿æ•ˆæœ&lt;/ins&gt;&lt;br /&gt;&lt;u&gt;uæ ‡ç­¾çš„ä¸‹åˆ’çº¿æ•ˆæœ&lt;/u&gt; æ•ˆæœå¦‚ä¸‹ï¼š ä½¿ç”¨strongæ ‡ç­¾å¯ä»¥å¯¹ç‰¹æ®Šæœ¬æ–‡è¿›è¡Œç€é‡æ ‡è®°ï¼Œå¦‚ä¸‹: 12&lt;p&gt;ä½¿ç”¨strongæ ‡ç­¾å¯ä»¥å®ç°å¯¹ç‰¹æ®Šæ–‡æœ¬è¿›è¡Œç€é‡æ ‡è®°&lt;/p&gt;&lt;div&gt;è¿›è¡Œæ–‡æœ¬çš„&lt;strong&gt;ç€é‡&lt;/strong&gt;æ ‡è®°&lt;/div&gt; æ•ˆæœå¦‚ä¸‹å›¾ ä½¿ç”¨emæ ‡ç­¾å¯ä»¥è¿›è¡Œç‰¹æ®Šæ–‡æœ¬çš„æ–œä½“å¤„ç†ï¼Œå¦‚ä¸‹ï¼š 12&lt;p&gt;ä½¿ç”¨emæ ‡ç­¾å¯ä»¥è¿›è¡Œæ–‡æœ¬çš„æ–œä½“å¤„ç†&lt;/p&gt;&lt;p&gt;è¿›è¡Œ&lt;em&gt;ç‰¹æ®Šæ–‡æœ¬&lt;/em&gt;çš„æ–œä½“å¤„ç†&lt;/p&gt; æ•ˆæœå¦‚ä¸‹ï¼š ä½¿ç”¨text-leftç±»å¯ä»¥å®ç°æ–‡æœ¬çš„å·¦å¯¹é½å¸ƒå±€ï¼Œä¸ä¹‹å¯¹åº”text-centerå°†æ–‡æœ¬è¿›è¡Œä¸­å¿ƒå¯¹é½å¸ƒå±€ï¼Œtext-rightç±»æ¥å°†æ–‡æœ¬è¿›è¡Œå³å¯¹é½å¸ƒå±€ï¼Œtext-justufyç±»è®¾ç½®æ–‡æœ¬è¿›è¡Œè‡ªé€‚åº”å¯¹é½ï¼Œtext-nowarpç±»å°†è®¾ç½®æ–‡æœ¬ä¸æ¢è¡Œçš„è¿›è¡Œå¸ƒå±€ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910&lt;mark&gt;text-leftç±»è¿›è¡Œå·¦å¯¹é½å¸ƒå±€&lt;/mark&gt;&lt;p class=\"text-left \"&gt;æ–‡æœ¬å·¦å¯¹é½æ’ç‰ˆã€‚æ–‡æœ¬å·¦å¯¹é½æ’ç‰ˆã€‚æ–‡æœ¬å·¦å¯¹é½æ’ç‰ˆã€‚æ–‡æœ¬å·¦å¯¹é½æ’ç‰ˆã€‚æ–‡æœ¬å·¦å¯¹é½æ’ç‰ˆã€‚æ–‡æœ¬å·¦å¯¹é½æ’ç‰ˆã€‚æ–‡æœ¬å·¦å¯¹é½æ’ç‰ˆã€‚æ–‡æœ¬å·¦å¯¹é½æ’ç‰ˆã€‚æ–‡æœ¬å·¦å¯¹é½æ’ç‰ˆã€‚æ–‡æœ¬å·¦å¯¹é½æ’ç‰ˆã€‚æ–‡æœ¬å·¦å¯¹é½æ’ç‰ˆã€‚æ–‡æœ¬å·¦å¯¹é½æ’ç‰ˆã€‚&lt;/p&gt;&lt;mark&gt;text-centerç±»è¿›è¡Œä¸­å¿ƒå¯¹é½å¸ƒå±€&lt;/mark&gt;&lt;p class=\"text-center \"&gt;æ–‡æœ¬å±…ä¸­å¯¹é½ã€‚æ–‡æœ¬å±…ä¸­å¯¹é½ã€‚æ–‡æœ¬å±…ä¸­å¯¹é½ã€‚æ–‡æœ¬å±…ä¸­å¯¹é½ã€‚æ–‡æœ¬å±…ä¸­å¯¹é½ã€‚æ–‡æœ¬å±…ä¸­å¯¹é½ã€‚æ–‡æœ¬å±…ä¸­å¯¹é½ã€‚æ–‡æœ¬å±…ä¸­å¯¹é½ã€‚æ–‡æœ¬å±…ä¸­å¯¹é½ã€‚æ–‡æœ¬å±…ä¸­å¯¹é½ã€‚æ–‡æœ¬å±…ä¸­å¯¹é½ã€‚æ–‡æœ¬å±…ä¸­å¯¹é½ã€‚&lt;/p&gt;&lt;mark&gt;text-rightç±»è¿›è¡Œå³å¯¹é½å¸ƒå±€&lt;/mark&gt;&lt;p class=\"text-right \"&gt;æ–‡æœ¬å³å¯¹é½ã€‚æ–‡æœ¬å³å¯¹é½ã€‚æ–‡æœ¬å³å¯¹é½ã€‚æ–‡æœ¬å³å¯¹é½ã€‚æ–‡æœ¬å³å¯¹é½ã€‚æ–‡æœ¬å³å¯¹é½ã€‚æ–‡æœ¬å³å¯¹é½ã€‚æ–‡æœ¬å³å¯¹é½ã€‚æ–‡æœ¬å³å¯¹é½ã€‚æ–‡æœ¬å³å¯¹é½ã€‚æ–‡æœ¬å³å¯¹é½ã€‚æ–‡æœ¬å³å¯¹é½ã€‚&lt;/p&gt;&lt;mark&gt;text-justifyç±»è¿›è¡Œè‡ªé€‚åº”å¸ƒå±€&lt;/mark&gt;&lt;p class=\"text-justify \"&gt;æ­£å¸¸æ–¹å‘å¸ƒå±€ã€‚æ­£å¸¸æ–¹å‘å¸ƒå±€ã€‚æ­£å¸¸æ–¹å‘å¸ƒå±€ã€‚æ­£å¸¸æ–¹å‘å¸ƒå±€ã€‚æ­£å¸¸æ–¹å‘å¸ƒå±€ã€‚æ­£å¸¸æ–¹å‘å¸ƒå±€ã€‚æ­£å¸¸æ–¹å‘å¸ƒå±€ã€‚æ­£å¸¸æ–¹å‘å¸ƒå±€ã€‚æ­£å¸¸æ–¹å‘å¸ƒå±€ã€‚æ­£å¸¸æ–¹å‘å¸ƒå±€ã€‚&lt;/p&gt;&lt;mark&gt;text-nowarpç±»è¿›è¡Œä¸æ¢è¡Œå¸ƒå±€&lt;/mark&gt;&lt;p class=\"text-nowrap\"&gt;ä¸æ¢è¡Œå¸ƒå±€ã€‚ä¸æ¢è¡Œå¸ƒå±€ã€‚ä¸æ¢è¡Œå¸ƒå±€ã€‚ä¸æ¢è¡Œå¸ƒå±€ã€‚ä¸æ¢è¡Œå¸ƒå±€ã€‚ä¸æ¢è¡Œå¸ƒå±€ã€‚ä¸æ¢è¡Œå¸ƒå±€ã€‚ä¸æ¢è¡Œå¸ƒå±€ã€‚ä¸æ¢è¡Œå¸ƒå±€ã€‚ä¸æ¢è¡Œå¸ƒå±€ã€‚&lt;/p&gt; æ•ˆæœå¦‚ä¸‹å›¾ï¼š text-lowercaseç±»å¯ä»¥å°†æ‰€æœ‰ä¿®é¥°çš„æ–‡æœ¬è½¬æ¢æˆå°å†™ï¼Œä¸ä¹‹å¯¹åº”text-uppercaseç±»å¯ä»¥å°†æ‰€æœ‰ä¿®é¥°çš„æ–‡æœ¬è½¬æ¢æˆå¤§å†™ï¼Œtext-capitalizeç±»åˆ™åªä¼šå¤„ç†æ¯ä¸ªå•è¯çš„é¦–å­—æ¯ï¼Œå°†å…¶è½¬æ¢ä¸ºå¤§å†™ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š 123456&lt;mark&gt;å°†æ‰€æœ‰å­—æ¯è½¬æ¢æˆå°å†™å­—æ¯&lt;/mark&gt;&lt;p class=\"text-lowercase\"&gt;My name is Jaki.&lt;/p&gt;&lt;mark&gt;å°†æ‰€æœ‰å­—æ¯è½¬æ¢æˆå¤§å†™å­—æ¯&lt;/mark&gt;&lt;p class=\"text-uppercase\"&gt;My name is Jaki.&lt;/p&gt;&lt;mark&gt;å°†æ‰€æœ‰å•è¯é¦–å­—æ¯å­—æ¯è½¬æ¢æˆå¤§å†™å­—æ¯&lt;/mark&gt;&lt;p class=\"text-capitalize\"&gt;My name is Jaki.&lt;/p&gt; æ•ˆæœå¦‚ä¸‹å›¾ï¼š ä½¿ç”¨abbræ ‡ç­¾å¯ä»¥è¿›è¡ŒæŸäº›å†…å®¹çš„ç¼©ç•¥æ˜¾ç¤ºï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12ä½¿ç”¨abbræ ‡ç­¾å¯ä»¥å°†æŸäº›æ–‡æœ¬è¿›è¡Œç¼©ç•¥è®¾ç½®ï¼Œå½“é¼ æ ‡æ”¾ç½®åœ¨å¯¹åº”æ–‡æœ¬ä¸Šæ—¶ï¼Œä¼šæ˜¾ç¤ºæ ‡ç­¾ä¸­titleæ‰€è®¾ç½®çš„å†…å®¹&lt;abbr title=\"è¿™ä¸ªæ˜¯è¯¦ç»†ä¿¡æ¯\"&gt;ä¿¡æ¯&lt;/abbr&gt; æ•ˆæœå¦‚ä¸‹ï¼š å¦‚æœè¦åœ¨é¡µé¢ä¸­è¿›è¡Œå†…å®¹çš„å¼•ç”¨ï¼Œå¯ä»¥ä½¿ç”¨blockquoteæ ‡ç­¾è¿›è¡ŒåŒ…è£¹ï¼Œåœ¨blockquoteæ ‡ç­¾ä¸­å¯ä»¥ç»§ç»­åµŒå¥—footeræ ‡ç­¾æ¥è¿›è¡Œå¼•ç”¨çš„æ ‡æ³¨ï¼Œå¦‚ä¸‹ï¼š 12345ä½¿ç”¨blockquoteæ ‡ç­¾å¯ä»¥è¿›è¡Œå†…å®¹çš„å¼•ç”¨ï¼Œå…¶ä¸­å¯ä»¥åµŒå¥—fooeræ ‡ç­¾è¿›è¡Œæ ‡æ³¨&lt;blockquote&gt; &lt;p&gt;å†°å†»ä¸‰å°ºï¼Œéä¸€æ—¥ä¹‹å¯’ã€‚&lt;/p&gt; &lt;footer&gt;ä¿—è¯­&lt;/footer&gt;&lt;/blockquote&gt; æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š .blockquote-reverseç±»å¯ä»¥å°†blockquoteä¸­çš„å†…å®¹è¿›è¡Œå³å¯¹é½ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345&lt;hr /&gt; ä½¿ç”¨blockquoteæ ‡ç­¾å¯ä»¥è¿›è¡Œå†…å®¹çš„å¼•ç”¨ï¼Œå…¶ä¸­å¯ä»¥åµŒå¥—fooeræ ‡ç­¾è¿›è¡Œæ ‡æ³¨&lt;blockquote class=\"blockquote-reverse\"&gt; &lt;p&gt;å†°å†»ä¸‰å°ºï¼Œéä¸€æ—¥ä¹‹å¯’ã€‚&lt;/p&gt; &lt;footer&gt;ä¿—è¯­&lt;/footer&gt;&lt;/blockquote&gt; å¦å¤–ï¼Œæœ¬ç¯‡åšå®¢ä¸­æ‰€æœ‰çš„å®ä¾‹ä»£ç åŠæ˜¾ç¤ºæ•ˆæœï¼Œåœ¨å¦‚ä¸‹åœ°å€ä¸­ï¼Œéœ€è¦çš„å¯ä»¥è‡ªè¡Œå¯¹ç…§å­¦ä¹ ã€‚ http://zyhshao.github.io/bootStrapDemo/typeset.htmlã€‚ å‰ç«¯å­¦ä¹ æ–°äººï¼Œæœ‰å¿—åŒé“åˆçš„æœ‹å‹ï¼Œæ¬¢è¿äº¤æµä¸æŒ‡å¯¼ï¼ŒQQç¾¤:541458536","categories":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}],"tags":[],"keywords":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}]},{"title":"Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°ä¸€â€”â€”å¼ºå¤§çš„æ …æ ¼å¸ƒå±€","slug":"267Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°ä¸€â€”â€”å¼ºå¤§çš„æ …æ ¼å¸ƒå±€","date":"2016-11-30T16:00:00.000Z","updated":"2021-07-12T06:59:29.228Z","comments":true,"path":"2016/12/01/267Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°ä¸€â€”â€”å¼ºå¤§çš„æ …æ ¼å¸ƒå±€/","link":"","permalink":"http://huishao.cc/2016/12/01/267Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°ä¸€â€”â€”å¼ºå¤§çš„æ …æ ¼å¸ƒå±€/","excerpt":"","text":"Bootstrapå“åº”å¼å‰ç«¯æ¡†æ¶ç¬”è®°ä¸€â€”â€”å¼ºå¤§çš„æ …æ ¼å¸ƒå±€ä¸€ã€Bootstrapï¼ŸBootstrapæ˜¯ä¸€æ¬¾HTMLï¼ŒCsså’ŒJavaScriptå¼€å‘æ¡†æ¶ï¼Œå…¶ä¹Ÿæ”¯æŒå¼€å‘è€…è¿›è¡Œè‡ªå®šä¹‰æ„å»ºï¼Œå¼€å‘è€…ä¹Ÿå¯ä»¥åªæ‰“åŒ…è‡ªå·±éœ€è¦çš„åŠŸèƒ½æ¨¡å—ä½¿ç”¨ã€‚Bootstrapçš„ä¸­æ–‡ç½‘å€å¦‚ä¸‹ï¼š http://v3.bootcss.com/ã€‚ Bootstrapæ˜¯ä¸€æ¬¾å“åº”å¼çš„ç¼–ç¨‹æ¡†æ¶ï¼Œæ‰€è°“å“åº”å¼ï¼Œæ˜¯æŒ‡åœ¨ä¸åŒå±å¹•å°ºå¯¸çš„è®¾å¤‡ä¸Šï¼Œä½¿ç”¨Bootstrapå¼€å‘çš„é¡¹ç›®å¯ä»¥è‡ªåŠ¨è¿›è¡Œå¸ƒå±€è°ƒæ•´é€‚é…ã€‚å…¶å“åº”å¼å¸ƒå±€çš„æ ¸å¿ƒæ˜¯æ …æ ¼ç³»ç»Ÿï¼Œæ …æ ¼ç³»ç»Ÿå°†æµè§ˆå™¨åˆ†éš”æˆä¸€å®šæ•°é‡çš„è¡Œå’Œåˆ—ã€‚é»˜è®¤æ …æ ¼ç³»ç»Ÿå°†æµè§ˆå™¨çª—å£åˆ†ä¸º12åˆ—ï¼Œå¼€å‘è€…å¯ä»¥ä¸ºå…ƒç´ è®¾ç½®å…¶åœ¨å¯¹åº”è®¾å¤‡å°ºå¯¸ä¸­æ‰€å çš„åˆ—æ•°ã€‚ äºŒã€å‡åˆ†ä¸å°ºå¯¸é€‚é…Bootstrapå°†æµè§ˆå™¨å°ºå¯¸åˆ†ä¸º4ä¸ªç­‰çº§ï¼Œåˆ†åˆ«ä¸ºxsï¼Œsmï¼Œmdå’Œlgã€‚xsæ˜¯æŒ‡æµè§ˆå™¨å®½åº¦å°äº768æ—¶çš„çŠ¶æ€ï¼Œä¸€èˆ¬å¯¹åº”ç§»åŠ¨æ‰‹æœºè®¾å¤‡ï¼ŒsmæŒ‡æµè§ˆå™¨å®½åº¦å¤§äº768ä¸”å°äº992æ—¶çš„çŠ¶æ€ï¼Œå…¶ä¸€èˆ¬å¯¹åº”å¹³æ¿è®¾å¤‡ï¼ŒmdæŒ‡æµè§ˆå™¨å®½åº¦å¤§äº768ä¸”å°äº1200æ—¶çš„çŠ¶æ€ï¼Œä¸€èˆ¬å¯¹åº”æ­£å¸¸çš„ä¸ªäººç”µè„‘ï¼Œlgæ˜¯æŒ‡æµè§ˆå™¨å®½åº¦å¤§äº1200æ—¶çš„çŠ¶æ€ã€‚å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š åœ¨å¼€å‘è€…ä½¿ç”¨æ …æ ¼ç±»å¯¹æ ‡ç­¾è¿›è¡Œå®šä¹‰çš„æ—¶å€™ï¼Œéœ€è¦æ³¨æ„ï¼Œå¦‚æœåªè®¾ç½®äº†é«˜ç­‰çº§çš„æ …æ ¼ç±»ï¼Œåˆ™åœ¨æ­¤ç­‰çº§ä»¥ä¸‹çš„æµè§ˆå™¨å°ºå¯¸éƒ½å°†é‡‡ç”¨ç«–ç›´å †å ï¼Œæ­¤ç­‰çº§åŠä»¥ä¸Šç­‰çº§çš„æµè§ˆå™¨å°ºå¯¸ä¸­éƒ½å°†æ°´å¹³æ’åˆ—ã€‚ä¾‹å¦‚ï¼Œå¦‚æœé…ç½®äº†ä¸¤ä¸ªæ ‡ç­¾çš„ç±»éƒ½ä¸ºä¸ºcol-md-6ï¼Œåˆ™åœ¨992ä»¥ä¸‹å°ºå¯¸çš„çš„æµè§ˆå™¨ä¸­ç«–ç›´å †å å¸ƒå±€ï¼Œåœ¨992å³ä»¥ä¸Šå°ºå¯¸çš„æµè§ˆå™¨ä¸­éƒ½å°†æ°´å¹³å‡åˆ†ä¸€è¡Œã€‚ æ …æ ¼ç³»ç»Ÿçš„ä¸€è¡Œä¸­è¢«åˆ†æˆäº†12åˆ—ï¼Œé»˜è®¤ä¸€è¡Œä¸­ä¹Ÿæœ€å¤šå¯ä»¥æ·»åŠ 12ä¸ªåˆ—ï¼Œå¦‚ä¸‹ä»£ç æ¼”ç¤ºäº†ç«–ç›´å †å å¸ƒå±€ä¸æ°´å¹³å¸ƒå±€åœ¨æ …æ ¼ç³»ç»Ÿä¸­çš„åº”ç”¨ï¼š 123456789101112131415161718192021222324252627282930313233343536373839&lt;body class=\"container\"&gt; &lt;p&gt;å°†mdä»¥ä¸Šå°ºå¯¸çª—å£å®½åº¦åˆ†ä¸º12ä»½ï¼Œmdä¸€ä¸‹å°ºå¯¸çš„çª—å£å°†ç«–ç›´å †å æ’åˆ—&lt;/p&gt; &lt;div class=\"row\"&gt; &lt;div class=\"col-md-1\"&gt;.col-md-1&lt;/div&gt; &lt;div class=\"col-md-1\"&gt;.col-md-1&lt;/div&gt; &lt;div class=\"col-md-1\"&gt;.col-md-1&lt;/div&gt; &lt;div class=\"col-md-1\"&gt;.col-md-1&lt;/div&gt; &lt;div class=\"col-md-1\"&gt;.col-md-1&lt;/div&gt; &lt;div class=\"col-md-1\"&gt;.col-md-1&lt;/div&gt; &lt;div class=\"col-md-1\"&gt;.col-md-1&lt;/div&gt; &lt;div class=\"col-md-1\"&gt;.col-md-1&lt;/div&gt; &lt;div class=\"col-md-1\"&gt;.col-md-1&lt;/div&gt; &lt;div class=\"col-md-1\"&gt;.col-md-1&lt;/div&gt; &lt;div class=\"col-md-1\"&gt;.col-md-1&lt;/div&gt; &lt;div class=\"col-md-1\"&gt;.col-md-1&lt;/div&gt; &lt;/div&gt; &lt;hr /&gt; &lt;p&gt;å°†mdä»¥ä¸Šå°ºå¯¸çš„çª—å£å®½åº¦è¿›è¡Œ2ç­‰åˆ†ï¼Œmdä¸€ä¸‹å°ºå¯¸çš„çª—å£å°†ç«–ç›´å †å æ’åˆ—&lt;/p&gt; &lt;div class=\"row\"&gt; &lt;div class=\"col-md-6\"&gt;.col-md-6&lt;/div&gt; &lt;div class=\"col-md-6\"&gt;.col-md-6&lt;/div&gt; &lt;/div&gt; &lt;hr /&gt; &lt;p&gt;å°†mdä»¥ä¸Šå°ºå¯¸çš„çª—å£å®½åº¦è¿›è¡Œ2:1ç­‰åˆ†ï¼Œmdä¸€ä¸‹å°ºå¯¸çš„çª—å£å°†ç«–ç›´å †å æ’åˆ—&lt;/p&gt; &lt;div class=\"row\"&gt; &lt;div class=\"col-md-8\"&gt;.col-md-8&lt;/div&gt; &lt;div class=\"col-md-4\"&gt;.col-md-4&lt;/div&gt; &lt;/div&gt; &lt;hr /&gt; &lt;p&gt;å°†xsä»¥ä¸Šå°ºå¯¸çš„çª—å£å®½åº¦è¿›è¡Œ6ç­‰åˆ†ï¼Œxsä¸ºæœ€å°ç­‰çº§&lt;/p&gt; &lt;div class=\"row\"&gt; &lt;div class=\"col-xs-2\"&gt;.col-xs-2&lt;/div&gt; &lt;div class=\"col-xs-2\"&gt;.col-xs-2&lt;/div&gt; &lt;div class=\"col-xs-2\"&gt;.col-xs-2&lt;/div&gt; &lt;div class=\"col-xs-2\"&gt;.col-xs-2&lt;/div&gt; &lt;div class=\"col-xs-2\"&gt;.col-xs-2&lt;/div&gt; &lt;div class=\"col-xs-2\"&gt;.col-xs-2&lt;/div&gt; &lt;/div&gt;&lt;/body&gt; ä¸Šé¢ä»£ç åœ¨çª—å£å°ºå¯¸å¤§äºç­‰äº992æ—¶çš„æ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š å°†æµè§ˆå™¨çª—å£ç¼©å°ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œé™¤äº†ç¬¬4è¡Œå¯ä»¥ç»§ç»­ä¿æŒ6ç­‰åˆ†å¤–ï¼Œå…¶å®ƒè¡Œç­‰å˜æˆäº†ç«–ç›´å †å å¸ƒå±€ï¼š å¦‚æœéœ€è¦å¯¹ç§»åŠ¨è®¾å¤‡å’Œæ¡Œé¢æ˜¯è¢«è¿›è¡Œå¸ƒå±€çš„åŒºåˆ«åŒ–ï¼Œå¯ä»¥ä¸ºæŸä¸ªæ ‡ç­¾é…ç½®å¤šå¥—ä¸åŒç­‰çº§ä¸‹çš„æ …æ ¼ç±»ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567&lt;p&gt;åœ¨mdåŠä»¥ä¸Šå°ºå¯¸çª—å£ä¸­è¿›è¡Œ4ç­‰åˆ†ï¼Œåœ¨mdä»¥ä¸‹å°ºå¯¸smä»¥ä¸Šå°ºå¯¸çª—å£è¿›è¡Œ2ç­‰åˆ†å¸ƒå±€ï¼Œåœ¨smä»¥ä¸‹å‚¨å­˜çª—å£è¿›è¡Œç«–ç›´å †å å¸ƒå±€&lt;/p&gt;&lt;div class=\"row\"&gt; &lt;div class=\"col-md-3 col-sm-6\"&gt;.col-md-3 .col-sm-6&lt;/div&gt; &lt;div class=\"col-md-3 col-sm-6\"&gt;.col-md-3 .col-sm-6&lt;/div&gt; &lt;div class=\"col-md-3 col-sm-6\"&gt;.col-md-3 .col-sm-6&lt;/div&gt; &lt;div class=\"col-md-3 col-sm-6\"&gt;.col-md-3 .col-sm-6&lt;/div&gt;&lt;/div&gt; éœ€è¦æ³¨æ„ï¼Œé»˜è®¤Bootstrapä¸­ä¸€è¡Œæœ€å¤šå¯ä»¥åŒ…å«12åˆ—ï¼Œå¦‚æœåˆ—æ•°è¶…å‡º12ï¼Œå°†å¦èµ·ä¸€è¡Œè¿›è¡Œå¸ƒå±€ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456&lt;p&gt;Bootstrapæœ€å¤šä¸€è¡Œå¯ä»¥åˆ†é…12åˆ—ï¼Œè¶…å‡ºå°†å¦èµ·ä¸€è¡Œï¼Œä¾‹å¦‚ä¸‹é¢ä¸‰ä¸ªdivï¼Œå®½åº¦åˆ†åˆ«ä¸º8ï¼Œ3ï¼Œ4ï¼Œç¬¬3ä¸ªdivå°†å¦èµ·ä¸€è¡Œå¸ƒå±€&lt;/p&gt;&lt;div class=\"row\"&gt; &lt;div class=\"col-md-8\"&gt;.col-md-8&lt;/div&gt; &lt;div class=\"col-md-3\"&gt;.col-md-3&lt;/div&gt; &lt;div class=\"col-md-4 \"&gt;.col-md-4&lt;/div&gt;&lt;/div&gt; æ•ˆæœå¦‚ä¸‹å›¾ï¼š ä¸‰ã€åˆ—çš„è°ƒæ•´å¾ˆå¤šåœºæ™¯ä¸‹ï¼Œæ¯åˆ—å…ƒç´ çš„é«˜åº¦å¹¶ä¸ä¸€å®šå‡ç­‰ï¼Œåœ¨åˆ—é«˜åº¦ä¸å‡ç­‰æƒ…å†µä¸‹çš„æ …æ ¼å¸ƒå±€ï¼Œå¾ˆå¯èƒ½ä¼šå‡ºç°å¼€å‘è€…æ„æƒ³ä¸åˆ°çš„å¸ƒå±€å·®é”™ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456&lt;p&gt;åˆ—é«˜åº¦ä¸å‡ç­‰é€ æˆçš„å¸ƒå±€é”™ä¹±&lt;/p&gt;&lt;div class=\"row\"&gt; &lt;div class=\"col-md-6\"&gt;.col-md-4 å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹&lt;/div&gt; &lt;div class=\"col-md-6\"&gt;.col-md-4&lt;/div&gt; &lt;div class=\"col-md-4 \"&gt;.col-md-4&lt;/div&gt;&lt;/div&gt; ä¸Šé¢ä»£ç çš„æ …æ ¼å¸ƒå±€æ•ˆæœå¦‚ä¸‹ï¼š å¦‚å›¾æ‰€ç¤ºï¼Œå¼€å‘è€…æœ¬æ„æ˜¯å°†ç¬¬3ä¸ªdivå¦èµ·ä¸€è¡Œè¿›è¡Œå¸ƒå±€ï¼Œç”±äºå‰ä¸¤ä¸ªdivé«˜åº¦çš„ä¸å‡ç­‰ï¼Œå¯¼è‡´ç¬¬3ä¸ªdivç›´æ¥å¸ƒå±€åœ¨äº†ç¬¬2ä¸ªdivä¸‹é¢ï¼Œå¯ä»¥é€šè¿‡visible-md-blockç­‰ç±»æ¥è¿›è¡Œå¼ºåˆ¶å¦èµ·ä¸€è¡Œï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678&lt;p&gt;è§£å†³åˆ—é«˜åº¦ä¸å‡ç­‰é€ æˆçš„å¸ƒå±€é”™ä¹±&lt;/p&gt;&lt;div class=\"row\"&gt; &lt;div class=\"col-md-6\"&gt;.col-md-4 å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹&lt;/div&gt; &lt;div class=\"col-md-6\"&gt;.col-md-4&lt;/div&gt; &lt;div class=\"clearfix visible-md-block\"&gt;&lt;/div&gt; &lt;div class=\"col-md-4 \"&gt;.col-md-4&lt;/div&gt;&lt;/div&gt; æ•ˆæœå¦‚ä¸‹ï¼š åœ¨ä½¿ç”¨æ …æ ¼å¸ƒå±€æ—¶ï¼Œå¼€å‘è€…ä¹Ÿä¸éœ€è¦å°†æ¯ä¸€è¡Œä¸­çš„12åˆ—éƒ½å æ»¡ï¼Œå¯ä»¥é€šè¿‡åˆ—åç§»è®¾ç½®æ¥è¿›è¡Œåˆ—çš„å®šä½ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789&lt;p&gt;è¿›è¡Œåˆ—åç§»æ“ä½œ&lt;/p&gt;&lt;p&gt;å°†å 1/3è¡Œçš„ä¸€åˆ—å‘å³ä¾¿å®œ1/3è¡Œ ä½¿å…¶å›ºå®šåœ¨ä¸­é—´&lt;/p&gt;&lt;div class=\"row\"&gt; &lt;div class=\"col-md-4 col-md-offset-4\"&gt;.col-md-4 .col-md-offset-4&lt;/div&gt;&lt;/div&gt;&lt;div class=\"row\"&gt; &lt;div class=\"col-md-2\"&gt;.col-md-2&lt;/div&gt; &lt;div class=\"col-md-2 col-md-offset-8\"&gt;.col-md-2 .col-md-offset-8&lt;/div&gt;&lt;/div&gt; æ•ˆæœå¦‚ä¸‹ï¼š Bootstrapçš„æ …æ ¼ç³»ç»Ÿä¹Ÿæ”¯æŒè¿›è¡Œåˆ—çš„åµŒå¥—ï¼Œéœ€è¦æ³¨æ„ï¼Œåœ¨åµŒå¥—ä¸­ä¹Ÿä¸å¯ä»¥è¶…è¿‡12åˆ—ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789&lt;p&gt;è¿›è¡Œåˆ—çš„åµŒå¥—&lt;/p&gt;&lt;div class=\"row\"&gt; &lt;div class=\"col-md-8\"&gt;.col-md-8 &lt;div class=\"row\"&gt; &lt;div class=\"col-md-6\"&gt;.col-md-6&lt;/div&gt; &lt;div class=\"col-md-6\"&gt;.col-md-6&lt;/div&gt; &lt;/div&gt; &lt;/div&gt;&lt;/div&gt; æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š .col-md-push- å’Œ .col-md-pull-ä¸¤ä¸ªç±»å¯ä»¥æ–¹ä¾¿çš„å®ç°å¯¹åˆ—çš„ç§»åŠ¨ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345&lt;p&gt;è¿›è¡Œåˆ—çš„ç§»åŠ¨&lt;/p&gt;&lt;div class=\"row\"&gt; &lt;div class=\"col-md-2 col-md-push-8\"&gt;.col-md-8 å‘å³ç§»åŠ¨8æ ¼&lt;/div&gt; &lt;div class=\"col-md-2 col-md-pull-2\"&gt;.col-md-2 å‘å·¦ç§»åŠ¨2æ ¼&lt;/div&gt;&lt;/div&gt; æ•ˆæœå¦‚ä¸‹ï¼š å¦å¤–ï¼Œæœ¬ç¯‡åšå®¢ä¸­æ‰€æœ‰çš„å®ä¾‹ä»£ç åŠæ˜¾ç¤ºæ•ˆæœï¼Œåœ¨å¦‚ä¸‹åœ°å€ä¸­ï¼Œéœ€è¦çš„å¯ä»¥è‡ªè¡Œå¯¹ç…§å­¦ä¹ ã€‚ http://zyhshao.github.io/bootStrapDemo/gridSystem.htmlã€‚ å‰ç«¯å­¦ä¹ æ–°äººï¼Œæœ‰å¿—åŒé“åˆçš„æœ‹å‹ï¼Œæ¬¢è¿äº¤æµä¸æŒ‡å¯¼ï¼ŒQQç¾¤:541458536","categories":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}],"tags":[],"keywords":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}]},{"title":"iOSå¼€å‘CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¹‹ä¸ƒâ€”â€”å›¾åƒå¤„ç†","slug":"266iOSå¼€å‘CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¹‹ä¸ƒâ€”â€”å›¾åƒå¤„ç†","date":"2016-11-27T16:00:00.000Z","updated":"2021-07-12T06:34:22.595Z","comments":true,"path":"2016/11/28/266iOSå¼€å‘CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¹‹ä¸ƒâ€”â€”å›¾åƒå¤„ç†/","link":"","permalink":"http://huishao.cc/2016/11/28/266iOSå¼€å‘CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¹‹ä¸ƒâ€”â€”å›¾åƒå¤„ç†/","excerpt":"","text":"iOSå¼€å‘CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¹‹ä¸ƒâ€”â€”å›¾åƒå¤„ç†ä¸€ã€å¼•è¨€ä½å›¾å›¾åƒæ•°æ®å®é™…ä¸Šä¸€ä¸ªåƒç´ é˜µåˆ—ï¼Œå…¶ä¸­æ¯ä¸ªåƒç´ ä»£è¡¨äº†å›¾åƒä¸­çš„ä¸€ä¸ªç‚¹ã€‚ä½å›¾å®é™…ä¸Šåªæ”¯æŒçŸ©å½¢åŒºåŸŸçš„æ¸²æŸ“ï¼Œä½†æ˜¯ä½¿ç”¨é€æ˜æŠ€æœ¯å¯ä»¥å®ç°ä»»æ„å½¢çŠ¶å›¾åƒçš„æ¸²æŸ“ã€‚å¼€å‘è€…ä¹Ÿå¯ä»¥å¯¹è¦è¿›è¡Œæ¸²æŸ“çš„å›¾åƒè¿›è¡Œæ—‹è½¬ã€åˆ‡å‰²ç­‰æ“ä½œã€‚ äºŒã€é€šè¿‡å›¾åƒè£å‰ªåˆ›å»ºå›¾åƒCoreGraphicsæ¡†æ¶ä¸­æä¾›äº†è®¸å¤šæ–¹æ³•æ¥åˆ›å»ºä½å›¾æ•°æ®å¼•ç”¨CGImageRefå¯¹è±¡ï¼Œå…¶ä¸­å°è£…åœ¨CGImage.hæ–‡ä»¶ä¸­ã€‚åœ¨UIKitæ¡†æ¶ä¸­ä¹Ÿæä¾›äº†æ–¹ä¾¿çš„æ¥å£ä¾›å¼€å‘è€…è¿›è¡ŒCGImageRefä¸UIImageå¯¹è±¡çš„ç›¸äº’è½¬æ¢ã€‚ é€šè¿‡CoreGraphicsæ¡†æ¶ä¸­æä¾›çš„å›¾åƒè£å‰ªæ–¹æ³•ï¼Œå¼€å‘è€…å¯ä»¥æˆªå–ä¸€å¼ å¤§å›¾ç‰‡ä¸­çš„ä¸€éƒ¨åˆ†ä½œä¸ºæ–°çš„å›¾åƒè¿›è¡Œæ¸²æŸ“ã€‚åœ¨Webå¼€å‘ä¸­ï¼Œä¸ºäº†å‡å°‘è¯·æ±‚æ¬¡æ•°ï¼Œå¸¸å¸¸ä¼šå°†è®¸å¤šå°å›¾ç‰‡åˆæˆä¸€å¼ å¤§å›¾ç‰‡è¿”å›ç»™å‰ç«¯ï¼ŒåŒæ—¶è¿˜ä¼šç»™å‰ç«¯è¿”å›ä¸€ä¸ªjsonæ–‡ä»¶ï¼Œæ–‡ä»¶ä¸­å­˜æ”¾ç€æ¯ä¸ªç‹¬ç«‹å°å›¾çš„åæ ‡ä½ç½®ï¼Œå‰ç«¯åœ¨ä½¿ç”¨æ—¶è¿›è¡Œæˆªå–å³å¯ï¼Œè¿™ç§å›¾ç‰‡å¸¸å¸¸è¢«ç§°ä½œé›ªç¢§å›¾ã€‚åœ¨iOSå¼€å‘ä¸­æ¸¸æˆå¼€å‘ä¸­ï¼Œå¾ˆå¤šæ¸¸æˆå¼•æ“ä¹Ÿæä¾›äº†ç±»ä¼¼çš„æ–¹æ³•ï¼Œæ–¹ä¾¿å¼€å‘è€…å¯¹æ¸¸æˆç´ æè¿›è¡Œç®¡ç†ã€‚å®é™…ä¸Šï¼Œé€šè¿‡CoreGraphicsæ¡†æ¶ï¼Œå¼€å‘è€…ä¹Ÿå¯ä»¥è‡ªå·±å®ç°ä¸€å¥—è¿™æ ·çš„å›¾ç‰‡åŠ è½½é€»è¾‘ï¼Œå¦‚æœåœ¨è‡ªå·±çš„åº”ç”¨ä¸­ï¼ŒåŒæ—¶éœ€è¦å¼‚æ­¥åŠ è½½çš„å°å›¾ç‰‡å¾ˆå¤šï¼Œä¹Ÿå¯ä»¥è®¾è®¡æˆä¸‹è½½ä¸€å¼ å¤§å›¾åä»ä¸­æˆªå–éœ€è¦çš„å›¾ç‰‡ã€‚è¿›è¡Œå›¾åƒæˆªå–çš„ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456789101112-(void)drawRect:(CGRect)rect&#123; CGContextRef contextRef = UIGraphicsGetCurrentContext(); //è¿›è¡Œåæ ‡ç³»çš„ç¿»è½¬ CGContextTranslateCTM(contextRef, 0, rect.size.height); CGContextScaleCTM(contextRef, 1.0, -1.0); CGImageRef orignImage = [UIImage imageNamed:@\"image\"].CGImage; CGContextDrawImage(contextRef, CGRectMake(0, 0, 320, 200), orignImage); CGImageRef rectImage = CGImageCreateWithImageInRect(orignImage, CGRectMake(300, 400, 800, 400)); CGContextDrawImage(contextRef, CGRectMake(0, 220, 320, 200), rectImage); CGImageRelease(orignImage); CGImageRelease(rectImage);&#125; æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š éœ€è¦æ³¨æ„ï¼ŒCGContextDrawImage()æ–¹æ³•æ¸²æŸ“çš„å›¾åƒæ˜¯ä¸Šä¸‹ç¿»è½¬çš„ï¼Œå¯ä»¥é€šè¿‡è°ƒæ•´åæ ‡ç³»æ¥å°†å›¾ç‰‡ç¿»è½¬å›æ¥ã€‚ ä¸‰ã€é€šè¿‡è†œå±‚æ¥å®ç°å›¾åƒçš„è‡ªå®šä¹‰è£å‰ªé€šè¿‡Maskè†œå±‚å¯ä»¥å®ç°ç‚«é…·çš„å›¾åƒè£å‰ªä¸é£æ ¼é‡ç»˜ã€‚è†œå±‚å¯ä»¥ç®€å•çš„ç†è§£ä¸ºå°†ä¸€ä¸ªå›¾å±‚è¿½åŠ åˆ°åŸå›¾å±‚ä¸Šï¼Œä½†éœ€è¦æ³¨æ„ï¼Œå›¾å±‚ä¸­é¢œè‰²ä¸ºçº¯é»‘çš„éƒ¨åˆ†ï¼Œä¼šæŒ‰ç…§åŸå›¾ç»˜åˆ¶ï¼Œçº¯ç™½çš„éƒ¨åˆ†ä¼šè¢«å®Œå…¨é®æŒ¡ï¼Œè¿™ä¸­é—´çš„é¢œè‰²ä¼šä»¥ç‰¹å®šçš„ç®—æ³•è¿›è¡Œalphaå€¼çš„æ›´æ”¹ã€‚ä¾‹å¦‚å°†å¦‚ä¸‹å›¾ç‰‡ä½œä¸ºè†œå±‚ç»˜åˆ¶åˆ°åŸå›¾åƒä¸Šï¼š ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021-(void)drawRect:(CGRect)rect&#123; CGContextRef contextRef = UIGraphicsGetCurrentContext(); //è¿›è¡Œåæ ‡ç³»çš„ç¿»è½¬ CGContextTranslateCTM(contextRef, 0, rect.size.height); CGContextScaleCTM(contextRef, 1.0, -1.0); CGImageRef orignImage = [UIImage imageNamed:@\"image\"].CGImage; CGImageRef maskRef = [UIImage imageNamed:@\"maskImage\"].CGImage; //é€šè¿‡å›¾ç‰‡æ•°æ®åˆ›å»ºè†œå±‚ CGImageRef mask = CGImageMaskCreate(CGImageGetWidth(maskRef), CGImageGetHeight(maskRef), CGImageGetBitsPerComponent(maskRef), CGImageGetBitsPerPixel(maskRef), CGImageGetBytesPerRow(maskRef), CGImageGetDataProvider(maskRef), nil, YES); CGImageRef resultImage = CGImageCreateWithMask(orignImage, mask); CGContextDrawImage(contextRef, CGRectMake(0, 0, 320, 200), resultImage); CGImageRelease(orignImage); CGImageRelease(maskRef); CGImageRelease(mask);&#125; æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š é™¤äº†ä½¿ç”¨å›¾ç‰‡è†œå±‚æ¥å¯¹åŸå›¾åƒæ•°æ®è¿›è¡Œè£å‰ªå¤„ç†å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡é¢œè‰²æ•°æ®å®šä¹‰è†œå±‚æ¥è¿›è¡Œè£å‰ªã€‚è¿™ä¸ªæ–¹æ³•å°±èƒ½åŠ å¼ºå¤§äº†ï¼Œå…¶å¯ä»¥å°†å›¾åƒä¸­æŸä¸ªèŒƒå›´çš„é¢œè‰²æ‰€å¯¹åº”çš„æ‰€æœ‰åŒºåŸŸè£å‰ªå‡ºæ¥ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314-(void)drawRect:(CGRect)rect&#123; CGContextRef contextRef = UIGraphicsGetCurrentContext(); //è¿›è¡Œåæ ‡ç³»çš„ç¿»è½¬ CGContextTranslateCTM(contextRef, 0, rect.size.height); CGContextScaleCTM(contextRef, 1.0, -1.0); CGImageRef orignImage = [UIImage imageNamed:@\"image2\"].CGImage; const CGFloat myMaskingColors[6] = &#123;35, 154, 23, 194, 103, 214&#125;; CGImageRef mask2 = CGImageCreateWithMaskingColors(orignImage, myMaskingColors); CGContextDrawImage(contextRef, CGRectMake(0, 0, 320, 200), mask2); CGImageRelease(orignImage); CGImageRelease(mask2);&#125; CGImageCreateWithMaskingColors()è¿™ä¸ªæ–¹æ³•éœ€è¦ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦è¿›è¡Œè£å‰ªçš„å›¾åƒï¼Œé‚£äºŒä¸ªå‚æ•°éœ€è¦è®¾ç½®ä¸ºä¸€ä¸ªè¡¨ç¤ºè‰²å½©çš„æ•°ç»„ï¼Œéœ€è¦æ³¨æ„ï¼Œè¿™ä¸ªæ•°ç»„ä¸­å…ƒç´ çš„ä¸ªæ•°éœ€è¦æ˜¯å½“å‰è‰²å½©ç©ºé—´é¢œè‰²åŸè‰²æ•°çš„ä¸¤å€ï¼Œä¾‹å¦‚RGBè‰²å½©ç©ºé—´å¯¹åº”è¿™ä¸ªæ•°ç»„éœ€è¦æœ‰6ä¸ªå…ƒç´ {min1,max1,min2,max2,min3,max3}ã€‚ä¹‹åä¼šå¯¹å›¾åƒæ•°æ®ä¸­çš„æ¯ä¸€ä¸ªåƒç´ ç‚¹è¿›è¡Œéå†ï¼Œå‡å¦‚æ­¤åƒç´ ç‚¹çš„é¢œè‰²å€¼ä¸º{c1,c2,c3}ã€‚åˆ™å½“æ»¡è¶³å¦‚ä¸‹æ¡ä»¶æ—¶ï¼Œè¿™ä¸ªåƒç´ ç‚¹ä¼šè¢«è£å‰ªï¼š min1&lt;c1&lt;max1,min2&lt;c2&lt;max2,min3&lt;c3&lt;max3 éœ€è¦æ³¨æ„ï¼Œä½¿ç”¨è¿™ç§æ–¹å¼è¿›è¡Œè†œå±‚è£å‰ªï¼ŒåŸå›¾åƒä¸å¯ä»¥æœ‰alphaé€šé“ï¼Œè‰²å€¼çš„å–å€¼èŒƒå›´ä¸º0-255ä¹‹é—´ã€‚ä¸Šé¢ç¤ºä¾‹ä»£ç ä¼šå°†åŸå›¾åƒè£å‰ªæˆå¦‚ä¸‹æ•ˆæœï¼š å¯¹äºè¢«è£å‰ªå‡ºæ¥çš„éƒ¨åˆ†ï¼Œå¼€å‘è€…å¯ä»¥ä½¿ç”¨å…¶ä»–é¢œè‰²è¿›è¡Œå¡«å……ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415-(void)drawRect:(CGRect)rect&#123; CGContextRef contextRef = UIGraphicsGetCurrentContext(); //è¿›è¡Œåæ ‡ç³»çš„ç¿»è½¬ CGContextTranslateCTM(contextRef, 0, rect.size.height); CGContextScaleCTM(contextRef, 1.0, -1.0); CGImageRef orignImage = [UIImage imageNamed:@\"image2\"].CGImage; //è®¾ç½®å¡«å…… [[UIColor redColor] setFill]; CGContextFillRect(contextRef, CGRectMake(0, 0, 320, 200)); const CGFloat myMaskingColors[6] = &#123;35, 154, 23, 194, 103, 214&#125;; CGImageRef mask2 = CGImageCreateWithMaskingColors(orignImage, myMaskingColors); CGContextDrawImage(contextRef, CGRectMake(0, 0, 320, 200), mask2); CGImageRelease(orignImage);&#125; æ•ˆæœå¦‚ä¸‹å›¾ï¼š é™¤äº†ä¸Šé¢ä»‹ç»äº†ä¸¤ç§å¯¹å›¾åƒè¿›è¡Œè£å‰ªçš„æ–¹æ³•å¤–ï¼ŒCoreGraphicsæ¡†æ¶ä¸­è¿˜æä¾›äº†ä¸€ç§è£å‰ªæ–¹å¼ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819-(void)drawRect:(CGRect)rect&#123; CGContextRef contextRef = UIGraphicsGetCurrentContext(); //è¿›è¡Œåæ ‡ç³»çš„ç¿»è½¬ CGContextTranslateCTM(contextRef, 0, rect.size.height); CGContextScaleCTM(contextRef, 1.0, -1.0); CGImageRef orignImage = [UIImage imageNamed:@\"image2\"].CGImage; CGImageRef maskRef = [UIImage imageNamed:@\"maskImage\"].CGImage; CGImageRef mask = CGImageMaskCreate(CGImageGetWidth(maskRef), CGImageGetHeight(maskRef), CGImageGetBitsPerComponent(maskRef), CGImageGetBitsPerPixel(maskRef), CGImageGetBytesPerRow(maskRef), CGImageGetDataProvider(maskRef), nil, YES); //è¿›è¡Œè†œå±‚çš„è£å‰ª CGContextClipToMask(contextRef, CGRectMake(0, 0, 320, 200), mask); CGContextDrawImage(contextRef, CGRectMake(0, 0, 320, 200), orignImage); CGImageRelease(orignImage);&#125; å››ã€è¿›è¡Œå›¾åƒæ··åˆä½¿ç”¨CoreGraphicsæ¡†æ¶ä¹Ÿå¯ä»¥ç»˜åˆ¶å¤æ‚çš„å›¾åƒæ··åˆæ•ˆæœï¼Œåœ¨è¿›è¡Œå›¾åƒæ··åˆæ—¶ï¼Œéœ€è¦å…ˆç»˜åˆ¶èƒŒæ™¯å›¾åƒï¼Œä¹‹åè®¾ç½®å›¾åƒæ··åˆæ¨¡å¼ï¼Œåœ¨ç»˜åˆ¶å‰æ™¯å›¾åƒï¼ŒCoreGraphicsä¼šæ ¹æ®æ··åˆæ¨¡å¼æ¥è¿›è¡Œæœ€åå›¾åƒçš„ç»˜åˆ¶ã€‚ä¾‹å¦‚ä½¿ç”¨å¦‚ä¸‹èƒŒæ™¯å›¾åƒæ¥ä¸å‰æ™¯å›¾åƒæ¥è¿›è¡Œæ··åˆï¼š èƒŒæ™¯å›¾åƒï¼š å‰æ™¯å›¾åƒï¼š ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345678910111213-(void)drawRect:(CGRect)rect&#123; CGContextRef contextRef = UIGraphicsGetCurrentContext(); //è¿›è¡Œåæ ‡ç³»çš„ç¿»è½¬ CGContextTranslateCTM(contextRef, 0, rect.size.height); CGContextScaleCTM(contextRef, 1.0, -1.0); CGImageRef background = [UIImage imageNamed:@\"background\"].CGImage; CGContextDrawImage(contextRef, CGRectMake(60, 25, 200, 150), background); CGContextSetBlendMode(contextRef, kCGBlendModeNormal); CGImageRef orignImage = [UIImage imageNamed:@\"image2\"].CGImage; CGContextDrawImage(contextRef, CGRectMake(0, 0, 320, 200), orignImage); CGImageRelease(background); CGImageRelease(orignImage);&#125; kCGBlendModeNormalæ¨¡å¼çš„æ··åˆå°±æ˜¯ç®€å•è¦†ç›–ï¼Œå‰æ™¯å›¾åƒä¼šå®Œå…¨å°†èƒŒæ™¯å›¾åƒè¦†ç›–ï¼Œè¿è¡Œæ•ˆæœå¦‚ä¸‹ï¼š kCGBlendModeMultiplyæ¨¡å¼æ˜¯å åŠ æ··åˆæ¨¡å¼ï¼Œå…¶ä¼šå°†å‰æ™¯å›¾alphaåŒ–ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š kCGBlendModeScreenæ¨¡å¼ä¼šå°†å‰æ™¯å›¾è¿›è¡Œè£å‰ªï¼Œæœ€ç»ˆçš„ç»“æœé¢œè‰²å°†æ¯”åŸå›¾è½»ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š kCGBlendModeOverlayæ¨¡å¼ä¹Ÿä¼šå°†å‰æ™¯å›¾è¿›è¡Œè£å‰ªï¼Œä¼šä¿æŒåŸå›¾è‰²å½©ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š kCGBlendModeDarkenæ··åˆæ¨¡å¼ä¼šå°†åŸå›¾è‰²å€¼åŠ æ·±ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š kCGBlendModeLightenåœ¨æ··åˆæ—¶åˆ™ä¼šé€‰æ‹©è‰²å€¼è¾ƒè½»çš„å›¾åƒè¿›è¡Œæ··åˆï¼Œæ•ˆæœå¦‚ä¸‹ï¼š kCGBlendModeColorDodgeæ··åˆæ¨¡å¼æ•ˆæœå¦‚ä¸‹ï¼š kCGBlendModeColorBurnæ··åˆæ¨¡å¼æ•ˆæœå¦‚ä¸‹ï¼š kCGBlendModeSoftLightä¸ºæŸ”å…‰æ··åˆæ¨¡å¼ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š kCGBlendModeHardLightä¸ºé‡å…‰æ··åˆæ¨¡å¼ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š kCGBlendModeDifferenceå·®å¼‚æ··åˆæ¨¡å¼ä¼šå–é¢œè‰²çš„é€†å‘å€¼ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š kCGBlendModeExclusionæ··åˆæ¨¡å¼æ•ˆæœå¦‚ä¸‹ï¼š kCGBlendModeHueæ··åˆæ¨¡å¼ä¼šæ”¹å˜è‰²å½©çš„é¥±å’Œåº¦ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š kCGBlendModeSaturationæ··åˆæ¨¡å¼æ•ˆæœå¦‚ä¸‹ï¼š kCGBlendModeColoræ··åˆæ¨¡å¼æ•ˆæœå¦‚ä¸‹ï¼š kCGBlendModeLuminosityå…‰å½±æ··åˆæ¨¡å¼ä¼šå°†å‰æ™¯å›¾è¿›è¡Œé»‘ç™½åŒ–ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"ä½¿ç”¨Expresså¿«é€Ÿæ­å»ºå‰ç«¯é¡¹ç›®æ¡†æ¶","slug":"265ä½¿ç”¨Expresså¿«é€Ÿæ­å»ºå‰ç«¯é¡¹ç›®æ¡†æ¶","date":"2016-11-26T16:00:00.000Z","updated":"2021-07-12T06:31:48.290Z","comments":true,"path":"2016/11/27/265ä½¿ç”¨Expresså¿«é€Ÿæ­å»ºå‰ç«¯é¡¹ç›®æ¡†æ¶/","link":"","permalink":"http://huishao.cc/2016/11/27/265ä½¿ç”¨Expresså¿«é€Ÿæ­å»ºå‰ç«¯é¡¹ç›®æ¡†æ¶/","excerpt":"","text":"ä½¿ç”¨Expresså¿«é€Ÿæ­å»ºå‰ç«¯é¡¹ç›®æ¡†æ¶Expressæ˜¯åŸºäºNode.jsçš„å‰ç«¯Webå¼€å‘æ¡†æ¶ï¼Œä½¿ç”¨å…¶å¯ä»¥ç®€æ´å¿«é€Ÿçš„åˆ›å»ºå¥å£®å‹å¥½çš„APIæœåŠ¡ã€‚åœ¨å‰ç«¯æˆ–ç§»åŠ¨ç«¯çš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥å€ŸåŠ©Expressçš„è¿™é¡¹åŠŸèƒ½æ¨¡æ‹ŸAPIæ•°æ®ï¼Œæ–¹ä¾¿å¼€å‘è°ƒè¯•ã€‚ Expressæ˜¯åŸºäºNode.jså¹³å°çš„ï¼Œå› æ­¤åœ¨å®‰è£…Expressä¹‹å‰ï¼Œéœ€è¦å…ˆå®‰è£…Node.jsã€‚ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ¥æ£€æŸ¥ç³»ç»Ÿä¸­æ‰€å®‰è£…çš„nodeç‰ˆæœ¬ï¼š 1node -v å¦‚æœç³»ç»Ÿä¸­æ²¡æœ‰å®‰è£…Node.jsï¼Œå¯ä»¥åœ¨å¦‚ä¸‹ç½‘ç«™è¿›è¡Œä¸‹è½½å®‰è£…ï¼š https://nodejs.org/en/ã€‚ åˆ›å»ºä¸€ä¸ªæµ‹è¯•å·¥ç¨‹ç›®å½•ï¼Œç”¨äºå­˜æ”¾Expressé¡¹ç›®æ¡†æ¶ï¼Œé¦–å…ˆåœ¨ç»ˆç«¯ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è¿›è¡ŒExpressçš„å…¨å±€å®‰è£…ï¼š 1npm install express-generator -g éœ€è¦æ³¨æ„ï¼Œå¾ˆå¤šæ—¶å€™å›½å†…ç½‘ç»œä½¿ç”¨npmçš„æ—¶å€™ä¼šéå¸¸æ…¢ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤æ¥ä¿®æ”¹ä»“åº“æºã€‚ 1npm install -g cnpm --registry=https://registry.npm.taobao.org ä¹‹åä½¿ç”¨cnpmæ¥è¿›è¡ŒåŒ…çš„å®‰è£…ï¼š 1cnpm install express-generator -g å®‰è£…å¥½Expressåï¼Œåœ¨æ–°å»ºçš„æ–‡ä»¶å¤¹ç›®å½•ä¸‹ï¼Œæ‰§è¡ŒExpressçš„åˆå§‹åŒ–ï¼š 1express å¦‚æœæ–‡ä»¶å¤¹ä¸ä¸ºç©ºï¼Œä¼šæç¤ºæ˜¯å¦ç»§ç»­æ“ä½œï¼Œè¾“å…¥yesåå›è½¦å³å¯ã€‚ åˆå§‹åŒ–å®Œæˆåçš„Expressé¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š å…¶ä¸­ä¼šé»˜è®¤åˆ›å»ºä¸€ä¸ªpackage.jsonæ–‡ä»¶ï¼Œå…¶ä¸­ä¼šæ·»åŠ è®¸å¤šä¾èµ–åŒ…ï¼Œåœ¨é¡¹ç›®ç›®å½•ä¸­æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤æ¥å®‰è£…è¿™äº›ä¾èµ–ï¼š 1npm install ä¾èµ–å®‰è£…å®Œæˆåï¼Œå·¥ç¨‹ä¸­ä¼šå¤šä¸€ä¸ªnode_modulesçš„æ–‡ä»¶å¤¹ï¼Œé‡Œé¢æ˜¯æ‰€æœ‰ä¾èµ–åŒ…æ–‡ä»¶ã€‚ å†æ¥çœ‹Expressæ¨¡æ¿ä¸­çš„æ–‡ä»¶ï¼Œå…¶ä¸­binæ–‡ä»¶å¤¹ä¸‹é¢çš„www.jsæ–‡ä»¶æ˜¯æœåŠ¡çš„å¯åŠ¨æ–‡ä»¶ï¼Œå…¶ä¸­å¯åŠ¨äº†HTTPçš„æœåŠ¡ï¼Œé»˜è®¤ç«¯å£ä¸º3000ã€‚routesæ–‡ä»¶å¤¹ä¸‹é¢çš„æ–‡ä»¶ç”¨äºé…ç½®apiè·¯ç”±ï¼Œé»˜è®¤æœ‰index.jsä¸users.jsä¸¤ä¸ªã€‚app.jsæ–‡ä»¶ä¸­å¯¹apiè¿›è¡Œäº†åˆå§‹åŒ–ä¸é…ç½®ã€‚å¯ä»¥åœ¨users.jsä¸­æ·»åŠ ä¸€ä¸ªæµ‹è¯•apiå¦‚ä¸‹ï¼š 123456789101112var express = require('express');var router = express.Router();/* è¿™ä¸ªæ˜¯é»˜è®¤ç”Ÿæˆçš„. */router.get('/', function(req, res, next) &#123; res.send('respond with a resource');&#125;);/* æ·»åŠ ä¸€ä¸ªæµ‹è¯•api*/router.get('/testAPi',function(rep,res,next)&#123; res.send('&#123;name:jaki,age:24&#125;');&#125;);module.exports = router; åœ¨é¡¹ç›®ç›®å½•ä¸‹é€šè¿‡ç»ˆç«¯æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤æ¥å°†æœåŠ¡å¼€å¯ï¼š 1node bin/www å¦‚æœæœåŠ¡å¯åŠ¨æˆåŠŸï¼Œåœ¨æµè§ˆå™¨è¾“å…¥http://127.0.0.1:3000/users/testAPiä¼šè¿”å›æˆ‘ä»¬send()æ–¹æ³•ä¼ é€’çš„å­—ç¬¦ä¸²ã€‚ å°æç¤ºï¼šMacOSç³»ç»Ÿåœ¨æœåŠ¡è¿›è¡Œä¸­ï¼Œå¯ä»¥ä½¿ç”¨control+cæ¥é‡Šæ”¾ç«¯å£çš„ç›‘å¬ï¼Œå¦‚æœä¸å°å¿ƒä½¿ç”¨control+zæˆ–è€…å…³é—­äº†ç»ˆç«¯ï¼Œä¼šå¯¼è‡´æ‰€ç›‘å¬ç«¯å£çš„æ— æ³•é‡Šæ”¾ï¼Œä¸‹æ¬¡å¦‚æœå†æ¬¡å¯åŠ¨nodeæœåŠ¡ï¼Œä¼šæŠ¥Port 3000 is already in useçš„é”™è¯¯ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•æ¥è¿›è¡Œæ‰€ç›‘å¬ç«¯å£çš„é‡Šæ”¾ï¼š é¦–å…ˆä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹æ‰€æœ‰ç›‘å¬æŸä¸ªç«¯å£çš„æœåŠ¡ï¼Œä¾‹å¦‚3000ç«¯å£ï¼š 1sudo lsof -i:3000 ä¹‹åç»ˆç«¯ä¼šå°†æœåŠ¡åä¸è¿›è¡Œidå‘Šè¯‰æˆ‘ä»¬ï¼Œå¦‚ä¸‹ï¼š 12COMMAND PID USER FD TYPE DEVICE SIZE/OFF NODE NAMEnode 829 vip 13u IPv6 0x9c3536500e84e203 0t0 TCP *:hbci (LISTEN) ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ¥æ€æ­»å¯¹åº”è¿›ç¨‹å³å¯ï¼š 1sudo kill -9 829","categories":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}],"tags":[],"keywords":[{"name":"å‰åç«¯","slug":"å‰åç«¯","permalink":"http://huishao.cc/categories/å‰åç«¯/"}]},{"title":"iOSå¼€å‘CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¹‹å…­â€”â€”æ¢¯åº¦æ¸å˜","slug":"264iOSå¼€å‘CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¹‹å…­â€”â€”æ¢¯åº¦æ¸å˜","date":"2016-11-14T16:00:00.000Z","updated":"2021-07-12T02:40:32.427Z","comments":true,"path":"2016/11/15/264iOSå¼€å‘CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¹‹å…­â€”â€”æ¢¯åº¦æ¸å˜/","link":"","permalink":"http://huishao.cc/2016/11/15/264iOSå¼€å‘CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¹‹å…­â€”â€”æ¢¯åº¦æ¸å˜/","excerpt":"","text":"iOSå¼€å‘CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¹‹å…­â€”â€”æ¢¯åº¦æ¸å˜ä¸€ã€å¼•è¨€ å…³äºé¢œè‰²æ¢¯åº¦æ¸å˜è§†å›¾çš„åˆ›å»ºï¼ŒCoreGraphicsæ¡†æ¶ä¸­æä¾›äº†ä¸¤ä¸ªç±»å‹CGShadingRefä¸CGGradientRefã€‚CoreGraphicsæ¡†æ¶åœ¨ç»˜åˆ¶æ¢¯åº¦æ¸å˜æ—¶ï¼Œæœ‰ä¸¤ç§ç»˜åˆ¶æ–¹å¼ï¼Œåˆ†åˆ«ä¸ºè½´å‘ç»˜åˆ¶ä¸å¾„å‘ç»˜åˆ¶ã€‚è½´å‘ç»˜åˆ¶æ˜¯æŒ‡ç¡®å®šä¸¤ä¸ªç‚¹ï¼Œèµ·ç‚¹ä¸ç»ˆç‚¹è¿æ¥çš„ç›´çº¿ä½œä¸ºæ¢¯åº¦æ¸å˜çš„è½´ï¼Œå‚ç›´äºæ­¤è½´çš„çº¿å…±äº«ç›¸åŒçš„é¢œè‰²ï¼Œç”±èµ·ç‚¹å‘ç»ˆç‚¹è¿›è¡Œé¢œè‰²æ¸å˜ã€‚å¾„å‘æ¸å˜æ˜¯æŒ‡ç”±ä¸¤ä¸ªåœ†è¿æ¥æˆåœ†å°ï¼Œåœ¨åŒä¸€åœ†å‘¨ä¸Šçš„æ‰€æœ‰ç‚¹å…±äº«ç›¸åŒçš„é¢œè‰²ï¼Œç”±èµ·å§‹åœ†å‘ç»ˆç‚¹åœ†è¿›è¡Œé¢œè‰²æ¸å˜ã€‚ è½´å‘æ¸å˜ï¼š å¾„å‘æ¸å˜ï¼š å‰é¢è¯´åˆ°ï¼ŒCGShadingRefä¸CGGradientReféƒ½å¯ä»¥ç”¨äºåˆ›å»ºæ¢¯åº¦æ¸å˜è§†å›¾ï¼Œè¿™ä¸¤ä¸ªç±»å‹åœ¨ä½¿ç”¨ä½¿åˆæœ‰ä¸€äº›ä¸åŒï¼ŒCGShadingRefåœ¨ä½¿ç”¨ä½¿éœ€è¦å¼€å‘è€…ä¸ºå…¶æä¾›ä¸€ä¸ªé¢œè‰²è®¡ç®—æ–¹æ³•ï¼ŒCGGradientRefåˆ™ä¸éœ€è¦ï¼Œç›¸æ¯”ä¹‹ä¸‹ï¼ŒCGGradientRefæ›´åƒæ˜¯ä¸ºäº†æ–¹ä¾¿å¼€å‘è€…ä½¿ç”¨è€Œä»CGShadingRefä¸­æ‰©å±•å‡ºçš„ä¸€ä¸ªç±»å‹ã€‚ äºŒã€ä½¿ç”¨CGGradientRefåˆ›å»ºæ¢¯åº¦æ¸å˜è§†å›¾åˆ›å»ºä¸€ä¸ªUIViewå­ç±»ï¼Œåœ¨å…¶drawRect:æ–¹æ³•ä¸­ç¼–å†™å¦‚ä¸‹æµ‹è¯•ä»£ç ï¼š 123456789101112131415-(void)drawRect:(CGRect)rect&#123; CGGradientRef gradientRef; CGColorSpaceRef colorSpaceRef; CGFloat locs[2] = &#123;0,1&#125;; CGFloat colors[8] = &#123; 1.0, 0, 0, 1.0, // å‰4ä¸ªä¸ºèµ·å§‹é¢œè‰²çš„rgba 0, 1, 0, 1.0 &#125;; // å4ä¸ªä¸ºç»“æŸé¢œè‰²çš„rgba colorSpaceRef = CGColorSpaceCreateWithName(kCGColorSpaceGenericRGB); gradientRef = CGGradientCreateWithColorComponents (colorSpaceRef, colors, locs, 2); CGContextRef contextRef = UIGraphicsGetCurrentContext(); //è¿™ä¸ªæ–¹æ³•ç”¨äºåˆ›å»ºè½´å‘æ¸å˜// CGContextDrawLinearGradient(contextRef, gradientRef, rect.origin, CGPointMake(rect.origin.x+rect.size.width, rect.origin.y+rect.size.height), 0); //è¿™ä¸ªæ–¹æ³•ç”¨äºåˆ›å»ºå¾„å‘æ¸å˜ CGContextDrawRadialGradient(contextRef, gradientRef, CGPointMake(rect.origin.x+rect.size.width/2, rect.origin.y+rect.size.height/2), rect.size.width/2, CGPointMake(rect.origin.x+rect.size.width/2, rect.origin.y+rect.size.height/2), rect.size.width/4, 0);&#125; CGContextDrawRadiaGradient()æ–¹æ³•ä¸­çš„å‚æ•°è§£æå¦‚ä¸‹ï¼š 1234567891011121314151617/*c:ç»˜å›¾ä¸Šä¸‹æ–‡gradieent:æ¸å˜å¯¹è±¡startCenter:æ¸å˜èµ·å§‹åœ†å¿ƒstartRadius:æ¸å˜èµ·å§‹åœ†åŠå¾„endCenter:æ¸å˜ç»ˆæ­¢åœ†å¿ƒendRadius:æ¸å˜ç»ˆæ­¢åœ†åŠå¾„options:æ¸å˜çš„å¡«å……é£æ ¼ è®¾ç½®ä¸º0åˆ™ä¸è¿›è¡Œå¡«å……typedef CF_OPTIONS (uint32_t, CGGradientDrawingOptions) &#123; kCGGradientDrawsBeforeStartLocation = (1 &lt;&lt; 0), //èµ·ç‚¹ä»¥å‰ä¹Ÿè¿›è¡Œå¡«å…… kCGGradientDrawsAfterEndLocation = (1 &lt;&lt; 1) //ç»ˆç‚¹ä¹‹åä¹Ÿè¿›è¡Œå¡«å……&#125;;*/ CG_EXTERN void CGContextDrawRadialGradient(CGContextRef cg_nullable c, CGGradientRef cg_nullable gradient, CGPoint startCenter, CGFloat startRadius, CGPoint endCenter, CGFloat endRadius, CGGradientDrawingOptions options) CG_AVAILABLE_STARTING(__MAC_10_5, __IPHONE_2_0); CGGradientä¸­å®šä¹‰çš„æ–¹æ³•è§£æå¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526//è·å–CGGradientç±»åœ¨CoreGraphicsæ¡†æ¶ä¸­çš„idCFTypeID CGGradientGetTypeID(void);//åˆ›å»ºCGGradientRef/*space:è‰²å½©ç©ºé—´components:è‰²å€¼æ•°ç»„locations:æ¸å˜ä¸´ç•Œç‚¹count:locationsæ•°ç»„ä¸­å…ƒç´ ä¸ªæ•°*/CGGradientRef __nullable CGGradientCreateWithColorComponents( CGColorSpaceRef cg_nullable space, const CGFloat * cg_nullable components, const CGFloat * __nullable locations, size_t count);//åˆ›å»ºCGGradientRef è¿™ä¸ªæ–¹æ³•locationsä¸­çš„å…ƒç´ ä¸ªæ•°éœ€è¦ä¸colorsä¸­çš„å¯¹åº”/*space:è‰²å½©ç©ºé—´colors:é¢œè‰²æ•°ç»„locations:æ¸å˜ä¸´ç•Œç‚¹*/CGGradientRef __nullable CGGradientCreateWithColors( CGColorSpaceRef __nullable space, CFArrayRef cg_nullable colors, const CGFloat * __nullable locations);//è¿›è¡Œå¼•ç”¨è®¡æ•°+1CGGradientRef cg_nullable CGGradientRetain( CGGradientRef cg_nullable gradient);//è¿›è¡Œå¼•ç”¨è®¡æ•°-1void CGGradientRelease(CGGradientRef cg_nullable gradient); ä¸‰ã€CGShadingRefçš„åº”ç”¨CGShadingRefçš„ä½¿ç”¨å°±ä¸åƒCGGradientRefé‚£ä¹ˆæ–¹ä¾¿ï¼Œå…¶ä¸­æ–¹æ³•è§£æå¦‚ä¸‹ï¼š 1234567891011121314151617181920212223//è·å–CGShadingRefåœ¨CoreGraphicsæ¡†æ¶ä¸­çš„idCFTypeID CGShadingGetTypeID(void);//åˆ›å»ºè½´å‘æ¸å˜çš„CGShadingRefå¯¹è±¡/*space:è‰²å½©ç©ºé—´start:èµ·å§‹ç‚¹end:ç»“æŸç‚¹function:é¢œè‰²è®¡ç®—å‡½æ•°extendStart:æ˜¯å¦å¡«å……èµ·å§‹ç‚¹ä»¥å‰extendEnd:æ˜¯å¦å¡«å……ç»“æŸç‚¹ä¹‹å*/CGShadingRef __nullable CGShadingCreateAxial( CGColorSpaceRef cg_nullable space, CGPoint start, CGPoint end, CGFunctionRef cg_nullable function, bool extendStart, bool extendEnd);//åˆ›å»ºå¾„å‘æ¸å˜çš„CGShadingRefå¯¹è±¡ å‚æ•°åŒä¸ŠCGShadingRef __nullable CGShadingCreateRadial( CGColorSpaceRef cg_nullable space, CGPoint start, CGFloat startRadius, CGPoint end, CGFloat endRadius, CGFunctionRef cg_nullable function, bool extendStart, bool extendEnd);//å¼•ç”¨è®¡æ•°+1CGShadingRef cg_nullable CGShadingRetain(CGShadingRef cg_nullable shading);//å¼•ç”¨è®¡æ•°-1void CGShadingRelease(CGShadingRef cg_nullable shading); ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172//é¢œè‰²è®¡ç®—å‡½æ•°/*info æ˜¯å¼€å‘è€…åé¢å°†ä¼ å…¥çš„è‰²å½©ç©ºé—´çš„å‚æ•°ä¸ªæ•°in ä¸ºè¾“å…¥å‚æ•° å¯¹åº”0-1ä¹‹é—´out ä¸ºè¾“å‡ºå‚æ•° ä¸ºæ‰€å¯¹åº”é¢œè‰²ç©ºé—´çš„æ¯ä¸ªè‰²å€¼*/static void myCalculateShadingValues (void *info, const CGFloat *in, CGFloat *out)&#123; size_t k, components; double frequency[4] = &#123; 55, 220, 110, 0 &#125;; //è·å–è‰²å½©ç©ºé—´çš„è‰²å€¼æ•° components = (size_t)info; for (k = 0; k &lt; components - 1; k++) //*out++ çš„ä½œç”¨æ˜¯æŒ‡é’ˆå³ç§» outæŒ‡é’ˆå¯ä»¥ç†è§£ä¸ºæ•°ç»„ å³ç§»ä½œç”¨å’Œæ•°ç»„èµ‹å€¼ä¸€è‡´ *out++ = (1 + sin(*in * frequency[k]))/2; //æœ€åè¿½åŠ ä¸Šé€æ˜åº¦å€¼ *out++ = 1; // alpha&#125;-(void)drawRect:(CGRect)rect&#123; size_t numComponents; //è¾“å…¥å‚æ•°çš„èŒƒå›´ å…¶ä¸­å…ƒç´ ä¸ªæ•°æ˜¯ è¾“å…¥å‚æ•°ä¸ªæ•°çš„ä¸¤å€ static const CGFloat input_value_range [2] = &#123; 0, 1 &#125;; //è¾“å‡ºå‚æ•°çš„èŒƒå›´ å…¶ä¸­å…ƒç´ ä¸ªæ•°æ˜¯ è¾“å‡ºå‚æ•°ä¸ªæ•°çš„ä¸¤å€ static const CGFloat output_value_ranges [8] = &#123; 0, 1, 0, 1, 0, 1, 0, 1 &#125;; //ç»„åˆå›è°ƒå‡½æ•° static const CGFunctionCallbacks callbacks = &#123; 0, &amp;myCalculateShadingValues, NULL &#125;; //è·å–è‰²å½©ç©ºé—´çš„è‰²å€¼æ•° numComponents = 1 + CGColorSpaceGetNumberOfComponents (CGColorSpaceCreateWithName(kCGColorSpaceGenericRGB)); //åˆ›å»ºCGFunctionRef CGFunctionRef func = CGFunctionCreate ((void *) numComponents, 1, input_value_range, numComponents, output_value_ranges, &amp;callbacks); CGPoint startPoint, endPoint; CGFloat startRadius, endRadius; CGAffineTransform myTransform; //èµ·å§‹åœ†ä½ç½® startPoint = CGPointMake(0.25,0.3); //åŠå¾„ startRadius = .1; //ç»ˆæ­¢åœ†ä½ç½® endPoint = CGPointMake(.7,0.7); //åŠå¾„ endRadius = .25; //åˆ›å»ºCGShadingRef CGShadingRef myShading = CGShadingCreateRadial (CGColorSpaceCreateWithName(kCGColorSpaceGenericRGB), startPoint, startRadius, endPoint, endRadius, func, false, false); CGContextRef context = UIGraphicsGetCurrentContext(); //è¿›è¡Œtransformçš„æ˜ å°„ myTransform = CGAffineTransformMakeScale(320, 568); CGContextConcatCTM(context, myTransform); CGContextSaveGState(context); //è¿›è¡Œç»˜åˆ¶ CGContextDrawShading(context, myShading); &#125; ä¸Šé¢çš„ç¤ºä¾‹ä»£ç æ•ˆæœå¦‚ä¸‹å›¾ï¼š å››ã€ä¸€äº›å°æŠ€å·§çµæ´»çš„åº”ç”¨CGContextDrawRadialGradient()æ–¹æ³•å¯ä»¥åˆ›å»ºå‡ºä¼ªç«‹ä½“æ•ˆæœçš„å›¾å½¢ï¼Œä¾‹å¦‚å¦‚ä¸‹ä»£ç ï¼š 123456789101112-(void)drawRect:(CGRect)rect&#123; CGGradientRef gradientRef; CGColorSpaceRef colorSpaceRef; CGFloat locs[2] = &#123;0,1&#125;; CGFloat colors[8] = &#123; 1.0, 0, 0, 1.0, // å‰4ä¸ªä¸ºèµ·å§‹é¢œè‰²çš„rgba 1, 1, 1, 1.0 &#125;; // å4ä¸ªä¸ºç»“æŸé¢œè‰²çš„rgba colorSpaceRef = CGColorSpaceCreateWithName(kCGColorSpaceGenericRGB); gradientRef = CGGradientCreateWithColorComponents (colorSpaceRef, colors, locs, 2); CGContextRef contextRef = UIGraphicsGetCurrentContext(); CGContextDrawRadialGradient(contextRef, gradientRef, CGPointMake(rect.origin.x+rect.size.width/2, rect.origin.y+rect.size.height/2), rect.size.width/2, CGPointMake(rect.origin.x+rect.size.width/2, rect.origin.y+rect.size.height/2-100), 0, 0);&#125; é€šè¿‡è°ƒæ•´å†…åœ†çš„ä½ç½®å’ŒåŠå¾„ï¼Œå¯ä»¥åšåˆ°å…‰å½±çš„ç§»åŠ¨ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š 1234567891011121314151617181920//æ¨¡æ‹Ÿé‡‘å±åŸå­-(void)drawRect:(CGRect)rect&#123; CGGradientRef gradientRef; CGColorSpaceRef colorSpaceRef; CGFloat locs[8] = &#123;0,0.2,0.4,0.5,0.6,0.8,0.9,1.0&#125;; CGFloat colors[64] = &#123; 1.0, 0, 0, 1.0, // å‰4ä¸ªä¸ºèµ·å§‹é¢œè‰²çš„rgba 0.0, 1, 0, 1.0, 0.0, 0, 1, 1.0, 1.0, 0, 0, 1.0, 0.0, 1, 0, 1.0, 1.0, 0, 0, 1.0, 1.0, 1, 0, 1.0, 1, 1, 1, 1.0 &#125;; // å4ä¸ªä¸ºç»“æŸé¢œè‰²çš„rgba colorSpaceRef = CGColorSpaceCreateWithName(kCGColorSpaceGenericRGB); gradientRef = CGGradientCreateWithColorComponents (colorSpaceRef, colors, locs, 8); CGContextRef contextRef = UIGraphicsGetCurrentContext();// CGContextDrawLinearGradient(contextRef, gradientRef, rect.origin, CGPointMake(rect.origin.x+rect.size.width, rect.origin.y+rect.size.height), 0); CGContextDrawRadialGradient(contextRef, gradientRef, CGPointMake(rect.origin.x+rect.size.width/2, rect.origin.y+rect.size.height/2), rect.size.width/2, CGPointMake(rect.origin.x+rect.size.width/2, rect.origin.y+rect.size.height/2-100), 0, 0);&#125; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSå¼€å‘CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¹‹å››â€”â€”å˜æ¢å‡½æ•°","slug":"263iOSå¼€å‘CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¹‹äº”â€”â€”Patternsæ¨¡å‹çš„åº”ç”¨","date":"2016-11-01T16:00:00.000Z","updated":"2021-07-12T02:39:40.981Z","comments":true,"path":"2016/11/02/263iOSå¼€å‘CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¹‹äº”â€”â€”Patternsæ¨¡å‹çš„åº”ç”¨/","link":"","permalink":"http://huishao.cc/2016/11/02/263iOSå¼€å‘CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¹‹äº”â€”â€”Patternsæ¨¡å‹çš„åº”ç”¨/","excerpt":"","text":"iOSå¼€å‘CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¹‹äº”â€”â€”Patternsæ¨¡å‹çš„åº”ç”¨ä¸€ã€å¼•è¨€Patternsç§°ä¸ºæ¨¡å‹å¯èƒ½å¹¶ä¸ç›´è§‚ï¼Œè¯´ä¸€ä¸ªåœºæ™¯æˆ‘ä»¬æˆ–è®¸å°±å¯ä»¥æ›´åŠ å®¹æ˜“çš„ç†è§£Patternsã€‚åœ¨å¼€å‘ä¸­ï¼Œå¼€å‘è€…ç»å¸¸ä¼šé‡åˆ°è¿™æ ·çš„éœ€æ±‚ï¼Œå°†æŸä¸ªå›¾ç‰‡æˆ–è€…æŸä¸ªå›¾å½¢è¿›è¡Œå¹³é“ºä½œä¸ºç•Œé¢çš„èƒŒæ™¯ï¼Œå½“ç„¶iOSä¸­æœ‰ç°æˆçš„æ–¹æ³•æ¥å°†å›¾ç‰‡è½¬æ¢ä¸ºèƒŒæ™¯è‰²è¿›è¡ŒèƒŒæ™¯çš„æ¸²æŸ“ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼å¹¶ä¸å¤ªçµæ´»ï¼Œä¾‹å¦‚èƒŒæ™¯èŠ±çº¹çš„ç€è‰²ï¼ŒèƒŒæ™¯å›¾ç‰‡çš„å¹³é“ºé—´è·è®¾ç½®ç­‰éœ€æ±‚éƒ½æ— æ³•æ»¡è¶³ã€‚Patternså°±æ˜¯ç”¨æ¥å¤„ç†è¿™æ ·çš„éœ€æ±‚ã€‚ Patternså¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæ¨¡å‹å•å…ƒï¼Œå³èŠ±çº¹èƒŒæ™¯ä¸­çš„ä¸€ä¸ªèŠ±çº¹å•å…ƒï¼Œå¼€å‘è€…å¯ä»¥è‡ªå®šä¹‰è¿™ä¸ªå•å…ƒçš„ç»˜åˆ¶å†…å®¹ï¼Œä¸€æ—¦åˆ›å»ºäº†CGPatternRefå¼•ç”¨ï¼Œå¼€å‘è€…å°±å¯ä»¥å°†å®ƒå‘æ™®é€šé¢œè‰²ä¸€æ ·è¿›è¡Œä½¿ç”¨ï¼Œå¯ä»¥è¿›è¡Œå¡«å……ï¼Œå¯ä»¥è¿›è¡Œè·¯å¾„ç»˜åˆ¶ç­‰ã€‚ äºŒã€åˆ›å»ºCGPatternRefæ¨¡å‹å¼•ç”¨åœ¨UIViewå­ç±»çš„drawRect:æ–¹æ³•ä¸­æ¥åšå¦‚ä¸‹çš„æµ‹è¯•ï¼š 12345678910111213141516171819- (void)drawRect:(CGRect)rect &#123; // Drawing code //åˆ›å»ºå›è°ƒç»“æ„ä½“ åé¢ä¼šä»‹ç» CGPatternCallbacks callback = &#123;0,&amp;drawPatternCallback,&amp;releaseInfoCallback&#125;; //åˆ›å»ºæ¨¡å‹å¼•ç”¨ CGPatternRef pattren = CGPatternCreate(NULL, CGRectMake(0, 0, 30,30), CGAffineTransformIdentity, 35, 35, kCGPatternTilingConstantSpacing, false, &amp;callback); //åˆ›å»ºé¢œè‰²æ•°ç»„ ä»£è¡¨RGBAçš„å€¼ static const CGFloat color[4] = &#123; 0, 1, 0, 1 &#125;; //åˆ›å»ºé¢œè‰²ç©ºé—´ CGColorSpaceRef baseSpace = CGColorSpaceCreateWithName (kCGColorSpaceGenericRGB); CGColorSpaceRef patternSpace = CGColorSpaceCreatePattern (baseSpace); //è®¾ç½®å¡«å……é¢œè‰²ç©ºé—´ CGContextSetFillColorSpace (UIGraphicsGetCurrentContext(), patternSpace); //è®¾ç½®å¡«å……æ¨¡å‹ CGContextSetFillPattern(UIGraphicsGetCurrentContext(), pattren, color); //è¿›è¡Œå¡«å…… CGContextFillRect(UIGraphicsGetCurrentContext(), CGRectMake(0, 0, 200, 200)); &#125; ä¸Šé¢çš„ç¤ºä¾‹ä»£ç ä¸­ï¼Œæœ‰å‡ ä¸ªåœ°æ–¹éœ€è¦è¿›è¡Œä»‹ç»ï¼š CGPatternCallBacksæ˜¯CoreGraphicsæ¡†æ¶çš„CGPattern.hæ–‡ä»¶ä¸­å®šä¹‰çš„ä¸€ä¸ªç»“æ„ä½“ï¼Œè¿™ä¸ªç»“æ„ä½“ç»„åˆäº†æ¨¡å‹Patternçš„ç‰ˆæœ¬ï¼Œåˆ›å»ºå›è°ƒå’Œé‡Šæ”¾å›è°ƒã€‚åˆ›å»ºå›è°ƒå’Œé‡Šæ”¾å›è°ƒéœ€è¦ä¼ å…¥ä¸¤ä¸ªæ–¹æ³•å—çš„åœ°å€ï¼Œå³blockã€‚è¿™ä¸¤ä¸ªblockçš„æ ¼å¼å®šä¹‰å¦‚ä¸‹ï¼š 1234567//åˆ›å»ºæ¨¡å‹å›è°ƒçš„æ ¼å¼å®šä¹‰//infoå‚æ•°ä¸ºéœ€è¦ä¼ é€’ç»™å›è°ƒå‡½æ•°çš„æ•°æ®//contentå‚æ•°ä¸ºæ‰€ç»˜åˆ¶çš„å›¾å½¢ä¸Šä¸‹æ–‡typedef void (*CGPatternDrawPatternCallback)(void * __nullable info, CGContextRef cg_nullable context);//é‡Šæ”¾å›è°ƒ å¼€å‘è€…å¯ä»¥åœ¨å…¶ä¸­è¿›è¡Œå†…å­˜çš„é‡Šæ”¾typedef void (*CGPatternReleaseInfoCallback)(void * __nullable info); æˆ‘ä»¬æ‰€å®ç°çš„drawPatternCallback(),releaseInfoCallback()æ–¹æ³•ç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627// ç»˜åˆ¶ å›è°ƒ#define PSIZE 16void drawPatternCallback(void *info,CGContextRef myContext)&#123;//è¿™é‡Œæˆ‘å€Ÿç”¨äº†å®˜æ–¹æ–‡æ¡£ä¸­çš„ä»£ç  å¦‚ä¸‹çš„ä»£ç å°†ç»˜åˆ¶å‡ºäº”è§’æ˜Ÿ int k; double r, theta; r = 0.8 * PSIZE / 2; theta = 2 * M_PI * (2.0 / 5.0); // 144 degrees CGContextTranslateCTM (myContext, PSIZE/2, PSIZE/2); CGContextMoveToPoint(myContext, 0, r); for (k = 1; k &lt; 5; k++) &#123; CGContextAddLineToPoint (myContext, r * sin(k * theta), r * cos(k * theta)); &#125; CGContextClosePath(myContext); CGContextFillPath(myContext);&#125;// ç§»é™¤ å›è°ƒvoid releaseInfoCallback(void *info) &#123; &#125; åœ¨å›è¿‡æ¥çœ‹åˆ›å»ºCGPatternRefçš„æ–¹æ³•ï¼š 123456789101112/*è¿™ä¸ªæ–¹æ³•ç¬¬1ä¸ªå‚æ•°ä¸ºè¦ä¼ é€’è¿›åˆ›å»ºæ¨¡å‹æ–¹æ³•çš„ä¿¡æ¯ç¬¬2ä¸ªå‚æ•°ä¸ºè®¾ç½®æ¯ä¸ªæ¨¡å‹å•å…ƒçš„å°ºå¯¸ç¬¬3ä¸ªå‚æ•°è®¾ç½®æ¨¡å‹çš„å‡ ä½•å˜æ¢ç¬¬4ä¸ªå‚æ•°è®¾ç½®æ¨¡å‹çš„æ•´ä½“å®½åº¦ é€šè¿‡è¿™ä¸ªå‚æ•°å¯ä»¥è®¾ç½®è¾¹è·ç¬¬5ä¸ªå‚æ•°è®¾ç½®æ¨¡å‹çš„æ•´ä½“é«˜åº¦ é€šè¿‡è¿™ä¸ªå‚æ•°å¯ä»¥è®¾ç½®è¾¹è·ç¬¬6ä¸ªå‚æ•°è®¾ç½®æ¨¡å‹çš„æ¸²æŸ“æ–¹å¼ç¬¬7ä¸ªå‚æ•°è®¾ç½®ä¸ºæœ‰è‰²æ¸²æŸ“è¿˜æ˜¯æ— è‰²æ¸²æŸ“ ç¬¬8ä¸ªå‚æ•°è®¾ç½®ç›¸å…³å›è°ƒç»“æ„ä½“*/CGPatternRef pattren = CGPatternCreate(NULL, CGRectMake(0, 0, 30,30), CGAffineTransformIdentity, 35, 35, kCGPatternTilingConstantSpacing, false, &amp;callback); å…³äºæ¨¡å‹çš„æ¸²æŸ“æ–¹å¼ï¼Œéœ€è¦è®¾ç½®ä¸ºCGPatternTilingç±»å‹çš„æšä¸¾ï¼Œå¦‚ä¸‹ï¼š 12345678typedef CF_ENUM (int32_t, CGPatternTiling) &#123; //æ— å¤±çœŸçš„å¹³é“º å°†è°ƒæ•´å•å…ƒä¹‹é—´çš„é—´è· kCGPatternTilingNoDistortion, //ç»†å¾®è°ƒæ•´å•å…ƒå¤§å° kCGPatternTilingConstantSpacingMinimalDistortion, //æ’å®šé—´è·ï¼Œé€šè¿‡è°ƒæ•´å•å…ƒå¤§å°å®ç° ä¼šå¤±çœŸ kCGPatternTilingConstantSpacing&#125;; CGContextSetFillPattern()æ–¹æ³•ç”¨äºå°†æ¨¡å‹è®¾ç½®ä¸ºè¦æ¸²æŸ“ç•Œé¢çš„é¢œæ–™ï¼Œä¹‹åè°ƒç”¨CGContextStrokePath(), CGContextFillPath(), CGContextFillRect()ç­‰ç›¸å…³æ–¹æ³•éƒ½å¯ä»¥å®ç°å°†æ¨¡å‹é“ºå¹³æ¸²æŸ“åˆ°æŒ‡å®šå®¹å™¨ã€‚éœ€è¦æ³¨æ„ï¼ŒCGContextSetFillPattern()æ–¹æ³•ä¸­ç¬¬1ä¸ªå‚æ•°ä¸ºç»˜å›¾ä¸Šä¸‹æ–‡ï¼Œç¬¬2ä¸ªå‚æ•°ä¸ºæ¨¡å‹CGPatternRefå¼•ç”¨ï¼Œç¬¬3ä¸ªå‚æ•°ä¸ºä¸€ä¸ªè‰²å€¼æ•°ç»„ï¼Œè¿™é‡Œå¦‚æœæ¨¡å¼æ˜¯æ— è‰²æ¸²æŸ“æ–¹å¼åˆ›å»ºçš„ï¼Œéœ€è¦ä¼ å…¥4ä¸ªå…ƒç´ çš„RGBAæ•°ç»„ï¼Œå¦‚æœæ˜¯æœ‰è‰²æ¨¡å¼åˆ›å»ºçš„ï¼Œéœ€è¦ä¼ å…¥ä¸€ä¸ªé€æ˜åº¦å€¼ï¼Œå¯ä»¥æ˜¯floatç±»å‹çš„æŒ‡é’ˆã€‚ è¿è¡Œå·¥ç¨‹ï¼Œæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤º: å°†ä»£ç ç®€å•ä¿®æ”¹å¦‚ä¸‹ï¼Œå°±å¯ä»¥å®ç°ä»¥äº”è§’æ˜Ÿå›´æˆçš„çŸ©å½¢ï¼š 1234567891011121314- (void)drawRect:(CGRect)rect &#123; // Drawing code CGPatternCallbacks callback = &#123;0,&amp;drawPatternCallback,&amp;releaseInfoCallback&#125;; CGPatternRef pattren = CGPatternCreate(NULL, CGRectMake(0, 0, 30,30), CGAffineTransformIdentity, 30, 30, kCGPatternTilingConstantSpacing, false, &amp;callback); static const CGFloat color[4] = &#123; 1, 0, 0, 1 &#125;; CGColorSpaceRef baseSpace; CGColorSpaceRef patternSpace; baseSpace = CGColorSpaceCreateWithName (kCGColorSpaceGenericRGB); patternSpace = CGColorSpaceCreatePattern (baseSpace); CGContextSetStrokeColorSpace (UIGraphicsGetCurrentContext(), patternSpace); CGContextSetStrokePattern(UIGraphicsGetCurrentContext(), pattren, color); CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 40); CGContextStrokeRect(UIGraphicsGetCurrentContext(), CGRectMake(0, 0, 200, 200));&#125; æ•ˆæœå¦‚ä¸‹: ä¸‰ã€CGPatternä¸­å…¶ä»–æ–¹æ³•123456//è·å–CGPatternåœ¨CoreGraphicsæ¡†æ¶ä¸­çš„idCFTypeID CGPatternGetTypeID(void);//è¿›è¡Œå¼•ç”¨è®¡æ•°åŠ 1CGPatternRef cg_nullable CGPatternRetain(CGPatternRef cg_nullable pattern);//è¿›è¡Œå¼•ç”¨è®¡æ•°å‡1void CGPatternRelease(CGPatternRef cg_nullable pattern); ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSå¼€å‘CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¹‹å››â€”â€”å˜æ¢å‡½æ•°","slug":"262iOSå¼€å‘CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¹‹å››â€”â€”å˜æ¢å‡½æ•°","date":"2016-10-29T16:00:00.000Z","updated":"2021-07-12T02:36:31.763Z","comments":true,"path":"2016/10/30/262iOSå¼€å‘CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¹‹å››â€”â€”å˜æ¢å‡½æ•°/","link":"","permalink":"http://huishao.cc/2016/10/30/262iOSå¼€å‘CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¹‹å››â€”â€”å˜æ¢å‡½æ•°/","excerpt":"","text":"iOSå¼€å‘CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¹‹å››â€”â€”å˜æ¢å‡½æ•°ä¸€ã€å¼•è¨€åœ¨ä¸Šä¸€ç¯‡åšå®¢ä¸­ï¼Œä»‹ç»äº†æœ‰å…³CGContextç›¸å…³æ“ä½œæ–¹æ³•ï¼Œå…¶ä¸­å¯ä»¥ç›´æ¥è°ƒç”¨ä¸€äº›æ–¹æ³•æ¥è¿›è¡Œæ‰€ç»˜åˆ¶å›¾å½¢çš„å¹³ç§»ï¼Œç¼©æ”¾ï¼Œç¿»è½¬ç­‰å˜æ¢ã€‚å¯¹äºå›¾å½¢äº†å‡ ä½•å˜æ¢ï¼Œå¼€å‘è€…ä¹Ÿå¯ä»¥é‡‡ç”¨å¦ä¸€ç§æ–¹å¼å®ç°ï¼ŒCoreGraphicsæ¡†æ¶ä¸­æä¾›äº†CGAffineTransformç»“æ„ä½“ï¼Œè¿™ä¸ªç»“æ„ä½“ä¸­å®šä¹‰äº†å›¾å½¢å˜æ¢çš„ç›¸å…³ä¿¡æ¯ã€‚ å…³äºCGContextçš„ç›¸å…³å†…å¦‚åšåœ°å€å®¢å¦‚ä¸‹ï¼šhttps://my.oschina.net/u/2340880/blog/759070ã€‚ äºŒã€ä½¿ç”¨CGAffineTransformç›¸å…³å‡½æ•°è¿›è¡Œç»˜åˆ¶å›¾å½¢çš„å‡ ä½•å˜æ¢CGAffineTransformä¸­å®šä¹‰çš„æ–¹æ³•å³æ„ä¹‰åˆ—ä¸¾å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930//åˆ›å»ºæ ‡å‡†çš„å˜æ¢çŸ©é˜µCGAffineTransform CGAffineTransformIdentity;//æ‰‹åŠ¨åˆ›å»ºå˜æ¢çŸ©é˜µCGAffineTransform CGAffineTransformMake(CGFloat a, CGFloat b, CGFloat c, CGFloat d, CGFloat tx, CGFloat ty);//åˆ›å»ºå¹³ç§»å˜æ¢CGAffineTransform CGAffineTransformMakeTranslation(CGFloat tx, CGFloat ty);//åˆ›å»ºç¼©æ”¾å˜æ¢CGAffineTransform CGAffineTransformMakeScale(CGFloat sx, CGFloat sy);//åˆ›å»ºæ—‹è½¬å˜æ¢CGAffineTransform CGAffineTransformMakeRotation(CGFloat angle);//åˆ¤æ–­æŸä¸ªå˜åŒ–æ˜¯å¦æ˜¯æ¥è‡ªæ ‡å‡†çŸ©é˜µçš„å˜æ¢bool CGAffineTransformIsIdentity(CGAffineTransform t);//å¯¹æŸä¸ªå˜æ¢çŸ©é˜µè¿›è¡Œå¹³ç§»å˜æ¢CGAffineTransform CGAffineTransformTranslate(CGAffineTransform t, CGFloat tx, CGFloat ty);//å¯¹æŸä¸ªå˜æ¢çŸ©é˜µè¿›è¡Œç¼©æ”¾å˜æ¢CGAffineTransform CGAffineTransformScale(CGAffineTransform t, CGFloat sx, CGFloat sy);//å¯¹æŸä¸ªå˜æ¢çŸ©é˜µè¿›è¡Œæ—‹è½¬å˜æ¢CGAffineTransform CGAffineTransformRotate(CGAffineTransform t, CGFloat angle);//å¯¹æŸä¸ªå˜æ¢çŸ©é˜µè¿›è¡Œç¿»è½¬å˜æ¢CGAffineTransform CGAffineTransformInvert(CGAffineTransform t);//å¯¹ä¸¤ä¸ªå˜æ¢çŸ©é˜µè¿›è¡Œè®¡ç®—CGAffineTransform CGAffineTransformConcat(CGAffineTransform t1, CGAffineTransform t2);//æ¯”è¾ƒä¸¤ä¸ªå˜æ¢çŸ©é˜µæ˜¯å¦ç›¸åŒbool CGAffineTransformEqualToTransform(CGAffineTransform t1, CGAffineTransform t2);//è·å–åº”ç”¨å˜æ¢åæŸç‚¹çš„åæ ‡CGPoint CGPointApplyAffineTransform(CGPoint point, CGAffineTransform t);//è·å–åº”ç”¨å˜æ¢åæŸä¸ªåŒºåŸŸçš„å°ºå¯¸CGSize CGSizeApplyAffineTransform(CGSize size, CGAffineTransform t);//è·å–åº”ç”¨å˜æ¢åæŸä¸ªåŒºåŸŸçš„ä½ç½®å’Œå°ºå¯¸CGRect CGRectApplyAffineTransform(CGRect rect, CGAffineTransform t); ä¸Šè¿°å˜æ¢æ–¹æ³•å¯ä»¥ç›´æ¥ä½œç”¨äºViewï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678- (void)viewDidLoad &#123; [super viewDidLoad]; UIImageView * view = [[UIImageView alloc]initWithFrame:CGRectMake(100, 100, 200, 200)]; view.backgroundColor =[UIColor whiteColor]; view.image = [UIImage imageNamed:@\"image\"]; view.transform = CGAffineTransformRotate(CGAffineTransformIdentity, M_PI_4); [self.view addSubview:view];&#125; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSå¼€å‘CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¹‹ä¸‰â€”â€”é¢œè‰²ä¸è‰²å½©ç©ºé—´","slug":"261 iOSå¼€å‘CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¹‹ä¸‰â€”â€”é¢œè‰²ä¸è‰²å½©ç©ºé—´","date":"2016-10-19T16:00:00.000Z","updated":"2021-07-12T02:35:47.245Z","comments":true,"path":"2016/10/20/261 iOSå¼€å‘CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¹‹ä¸‰â€”â€”é¢œè‰²ä¸è‰²å½©ç©ºé—´/","link":"","permalink":"http://huishao.cc/2016/10/20/261 iOSå¼€å‘CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¹‹ä¸‰â€”â€”é¢œè‰²ä¸è‰²å½©ç©ºé—´/","excerpt":"","text":"iOSå¼€å‘CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¹‹ä¸‰â€”â€”é¢œè‰²ä¸è‰²å½©ç©ºé—´ä¸€ã€å¼•è¨€é¢œè‰²çš„å®è´¨æ˜¯è¡¨ç¤ºé¢œè‰²çš„äºŒè¿›åˆ¶æ•°æ®ï¼Œå¦‚æœæ²¡æœ‰ç¡®å®šçš„è§„åˆ™ï¼Œåˆ™è¿™äº›äºŒè¿›åˆ¶æ•°æ®å®Œå…¨æ²¡æœ‰æ„ä¹‰ã€‚æ‰€è°“è‰²å½©ç©ºé—´ï¼Œå³æ˜¯è¡¨ç¤ºè¿™äº›é¢œè‰²æ•°æ®ä¿¡æ¯æ˜¯å¦‚ä½•è§£é‡Šçš„ã€‚åŒæ ·çš„ä¸€å¼ å›¾ç‰‡ï¼Œåœ¨ä¸åŒçš„è‰²å½©ç©ºé—´ä¸‹ï¼Œå…¶æ¸²æŸ“çš„æ¨¡æ ·å°†æœ‰å¾ˆå¤§çš„ä¸åŒã€‚åœ¨CoreGraphicsæ¡†æ¶ä¸­ï¼Œä¸è‰²å½©ç›¸å…³çš„åŠŸèƒ½ä¸»è¦æœ‰CGColorä¸CGColorSpaceæ„æˆã€‚ äºŒã€å…³äºCGColorç›¸å…³æ–¹æ³•çš„è§£æCGColorRefæ˜¯CoreGraphicsæ¡†æ¶ä¸­ç”¨äºæè¿°é¢œè‰²çš„å¼•ç”¨ç±»å‹ï¼Œå…¶ä¸­å¸¸ç”¨æ–¹æ³•è§£æå¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364//æ ¹æ®è‰²å½©ç©ºé—´åˆ›å»ºä¸€ä¸ªCGColorRefå®ä¾‹/*éœ€è¦æ³¨æ„ï¼Œè¿™ä¸ªæ–¹æ³•ä¸­çš„ç¬¬2ä¸ªå‚æ•°éœ€è¦ä¼ é€’ä¸€ä¸ªfloatæ•°æ®ï¼Œå…¶éœ€è¦å’Œç¬¬1ä¸ªå‚æ•°çš„è‰²å½©ç©ºé—´æ„ä¹‰å¯¹åº”ä¾‹å¦‚åœ¨RGBAè‰²å½©ç©ºé—´ä¸­ï¼Œfloatæ•°ç»„ä¸­éœ€è¦ä¼ é€’4ä¸ªå€¼ï¼Œåˆ†åˆ«è¡¨ç¤ºçº¢ç»¿è“å’Œé€æ˜åº¦*/CGColorRef __nullable CGColorCreate(CGColorSpaceRef cg_nullable space, const CGFloat * cg_nullable components);//åˆ›å»ºé»‘ç™½è‰²å½©ç©ºé—´ä¸‹çš„é¢œè‰²/*å‚æ•° grayä¸ºç°åº¦alpha ä¸ºé€æ˜åº¦*/CGColorRef CGColorCreateGenericGray(CGFloat gray, CGFloat alpha);//åˆ›å»ºRGBè‰²å½©ç©ºé—´ä¸‹çš„é¢œè‰²CGColorRef CGColorCreateGenericRGB(CGFloat red, CGFloat green, CGFloat blue, CGFloat alpha);//åˆ›å»ºCMYBå°åˆ·æ¨¡å¼è‰²å½©ç©ºé—´ä¸‹çš„é¢œè‰²CGColorCreateGenericCMYK(CGFloat cyan, CGFloat magenta, CGFloat yellow, CGFloat black, CGFloat alpha);//è·å–é¢œè‰²å¸¸é‡/*colorNameå®šä¹‰å¦‚ä¸‹ï¼š //æ ‡å‡†ç™½è‰² CFStringRef kCGColorWhite; //æ ‡å‡†é»‘è‰² CFStringRef kCGColorBlack; //æ ‡å‡†é€æ˜è‰² CFStringRef kCGColorClear;*/CGColorRef __nullable CGColorGetConstantColor(CFStringRef cg_nullable colorName);//é€šè¿‡æ¨¡å¼ä¸è‰²å½©ç©ºé—´åˆ›å»ºé¢œè‰²CGColorRef __nullable CGColorCreateWithPattern(CGColorSpaceRef cg_nullable space, CGPatternRef cg_nullable pattern, const CGFloat * cg_nullable components);//å¤åˆ¶ä¸€ä¸ªCGColorRefCGColorRef __nullable CGColorCreateCopy(CGColorRef cg_nullable color);//å¤åˆ¶é¢œè‰² å¹¶è¿½åŠ é€æ˜åº¦CGColorRef __nullable CGColorCreateCopyWithAlpha(CGColorRef cg_nullable color, CGFloat alpha);//å°†åŸè‰²å½©ç©ºé—´ä¸ç›®æ ‡è‰²å½©ç©ºé—´ç›¸åŒ¹é… åˆ›å»ºé¢œè‰²å®ä¾‹/*CGColorRenderingInterè®¾ç½®é¢œè‰²æ¸²æŸ“æ¨¡å¼typedef CF_ENUM (int32_t, CGColorRenderingIntent) &#123; kCGRenderingIntentDefault, //é»˜è®¤çš„æ¸²æŸ“æ¨¡å¼ kCGRenderingIntentAbsoluteColorimetric, //ç»å¯¹æ¯”è‰²æ¨¡å¼ kCGRenderingIntentRelativeColorimetric, //ç›¸å¯¹æ¯”è‰²æ¨¡å¼ kCGRenderingIntentPerceptual, //å‹ç¼©è‰²åŸŸæ¨¡å¼ kCGRenderingIntentSaturation //è½¬æ¢è‰²åŸŸæ¨¡å¼&#125;;*/CGColorRef __nullable CGColorCreateCopyByMatchingToColorSpace(cg_nullable CGColorSpaceRef, CGColorRenderingIntent intent, CGColorRef cg_nullable color, __nullable CFDictionaryRef options);//å†…å­˜å¼•ç”¨+1CGColorRef cg_nullable CGColorRetain(CGColorRef cg_nullable color);//å†…å­˜å¼•ç”¨-1void CGColorRelease(CGColorRef cg_nullable color);//æ¯”è¾ƒä¸¤ä¸ªé¢œè‰²å¼•ç”¨æ˜¯å¦ç›¸åŒbool CGColorEqualToColor(CGColorRef cg_nullable color1, CGColorRef cg_nullable color2);//è·å–é¢œè‰²å†…å®¹çš„è‰²å½©æè¿°å€¼ä¸ªæ•° åŒ…æ‹¬alphaé€šé“size_t CGColorGetNumberOfComponents(CGColorRef cg_nullable color);//è·å–é¢œè‰²è‰²å½©æè¿°å€¼æ•°ç»„CGFloat * __nullable CGColorGetComponents(CGColorRef cg_nullable color);//è·å–é¢œè‰²çš„é€æ˜åº¦CGFloat CGColorGetAlpha(CGColorRef cg_nullable color);//è·å–é¢œè‰²çš„è‰²å½©ç©ºé—´CGColorSpaceRef __nullable CGColorGetColorSpace(CGColorRef cg_nullable color);//è·å–ä¸æ­¤é¢œè‰²ç›¸å…³çš„æ¨¡å‹CGPatternRef __nullable CGColorGetPattern(CGColorRef cg_nullable color);//è·å–CGColorRefç±»åœ¨CoreGraphicsæ¡†æ¶ä¸­çš„idCFTypeID CGColorGetTypeID(void); ä¸‰ã€å…³äºCGColorSpaceç›¸å…³æ–¹æ³•è§£æCGColorSpaceç”¨æ¥æè¿°è‰²å½©ç©ºé—´ï¼Œå…¶ä¸­æ–¹æ³•è§£æå¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384//åˆ›å»ºä¸€ä¸ªåŸºäºè®¾å¤‡çš„é»‘ç™½è‰²å½©ç©ºé—´CGColorSpaceRef cg_nullable CGColorSpaceCreateDeviceGray(void);//åˆ›å»ºä¸€ä¸ªåŸºäºè®¾å¤‡çš„RGBè‰²å½©ç©ºé—´CGColorSpaceRef cg_nullable CGColorSpaceCreateDeviceRGB(void);//åˆ›å»ºä¸€ä¸ªåŸºäºè®¾å¤‡çš„CMYKè‰²å½©ç©ºé—´CGColorSpaceRef cg_nullable CGColorSpaceCreateDeviceCMYK(void);//åˆ›å»ºä¸€ä¸ªç»è¿‡æ ¡å‡†çš„é»‘ç™½è‰²å½©ç©ºé—´CGColorSpaceRef __nullable CGColorSpaceCreateCalibratedGray(const CGFloat whitePoint[3], const CGFloat blackPoint[3], CGFloat gamma);//åˆ›å»ºä¸€ä¸ªç»è¿‡æ ¡å‡†çš„RGBè‰²å½©ç©ºé—´CGColorSpaceRef __nullable CGColorSpaceCreateCalibratedRGB(const CGFloat whitePoint[3], const CGFloat blackPoint[3], const CGFloat gamma[3], const CGFloat matrix[9]);//åˆ›å»ºä¸€ä¸ªç»è¿‡æ ¡å‡†çš„LABè‰²å½©ç©ºé—´CGColorSpaceRef __nullable CGColorSpaceCreateLab(const CGFloat whitePoint[3], const CGFloat blackPoint[3], const CGFloat range[4]);//ä½¿ç”¨ICCæ–‡ä»¶åˆ›å»ºICC-basedè‰²å½©ç©ºé—´CGColorSpaceRef __nullable CGColorSpaceCreateWithICCProfile(CFDataRef cg_nullable data);CGColorSpaceRef __nullable CGColorSpaceCreateICCBased(size_t nComponents, const CGFloat * __nullable range, CGDataProviderRef cg_nullable profile, CGColorSpaceRef __nullable alternate);//ä½¿ç”¨ç´¢å¼•åˆ›å»ºè‰²å½©ç©ºé—´CGColorSpaceRef __nullable CGColorSpaceCreateIndexed(CGColorSpaceRef cg_nullable baseSpace, size_t lastIndex, const unsigned char * cg_nullable colorTable);//é€šè¿‡åç§°åˆ›å»ºè‰²å½©ç©ºé—´/*æ ‡å‡†çš„é»‘ç™½è‰²å½©ç©ºé—´CFStringRef kCGColorSpaceGenericGray;æ ‡å‡†çš„RGBè‰²å½©ç©ºé—´const CFStringRef kCGColorSpaceGenericRGB;æ ‡å‡†çš„CMYKè‰²å½©ç©ºé—´CFStringRef kCGColorSpaceGenericCMYK;displatP3è‰²å½©ç©ºé—´CFStringRef kCGColorSpaceDisplayP3;LinearRGBè‰²å½©ç©ºé—´CFStringRef kCGColorSpaceGenericRGBLinear;Adobe RGB 1998 ç‰ˆæœ¬çš„è‰²å½©ç©ºé—´CFStringRef kCGColorSpaceAdobeRGB1998;é»‘ç™½è‰²å½©ç©ºé—´ è®¾ç½®ä¼½é©¬å€¼ä¸º2.2CFStringRef kCGColorSpaceGenericGrayGamma2_2;XYZè‰²å½©ç©ºé—´CFStringRef kCGColorSpaceGenericXYZ;ACEScgè‰²å½©ç©ºé—´kCGColorSpaceACESCGLinear;ITU-R Recommendation BT.709 è‰²å½©ç©ºé—´kCGColorSpaceITUR_709;ITU-R Recommendation BT.2020è‰²å½©ç©ºé—´kCGColorSpaceITUR_2020;RGBè‰²å½©ç©ºé—´kCGColorSpaceROMMRGB;DCI P3 è‰²å½©ç©ºé—´kCGColorSpaceDCIP3;æ‰©å±•çš„sRGBè‰²å½©ç©ºé—´kCGColorSpaceExtendedSRGB;çº¿æ€§sRGBè‰²å½©ç©ºé—´kCGColorSpaceLinearSRGB;æ‰©å±•çš„çº¿æ€§sRGBæ‰©å±•ç©ºé—´CFStringRef kCGColorSpaceExtendedLinearSRGB;æ‰©å±•çš„é»‘ç™½è‰²å½©ç©ºé—´CFStringRef kCGColorSpaceExtendedGray;æ‰©å±•çš„çº¿æ€§é»‘ç™½è‰²å½©ç©ºé—´CFStringRef kCGColorSpaceLinearGray;æ‰©å±•çš„Generic Gray 2.2è‰²å½©ç©ºé—´CFStringRef kCGColorSpaceExtendedLinearGray;*/CGColorSpaceRef __nullable CGColorSpaceCreateWithName(CFStringRef cg_nullable name);//å†…å­˜å¼•ç”¨è®¡æ•°+1CGColorSpaceRef cg_nullable CGColorSpaceRetain(CGColorSpaceRef cg_nullable space);//å†…å­˜å¼•ç”¨è®¡æ•°-1void CGColorSpaceRelease(CGColorSpaceRef cg_nullable space);//è¿›è¡Œè‰²å½©ç©ºé—´çš„å¤åˆ¶CFStringRef __nullable CGColorSpaceCopyName(CGColorSpaceRef cg_nullable space);//è·å–CGColorRefç±»åœ¨CoreGraphicsæ¡†æ¶ä¸­çš„idCFTypeID CGColorSpaceGetTypeID(void);//è·å–è‰²å½©ç©ºé—´é¢œè‰²å€¼å‚æ•°ä¸ªæ•°CGColorSpaceGetNumberOfComponents(CGColorSpaceRef cg_nullable space);//è·å–è‰²å½©ç©ºé—´æ¨¡å¼/*typedef CF_ENUM (int32_t, CGColorSpaceModel) &#123; kCGColorSpaceModelUnknown = -1, æœªçŸ¥æ¨¡å¼ kCGColorSpaceModelMonochrome, å•è‰²è‰²å½©ç©ºé—´æ¨¡å¼ kCGColorSpaceModelRGB, RGBè‰²å½©ç©ºé—´æ¨¡å¼ kCGColorSpaceModelCMYK, CMYKè‰²å½©ç©ºé—´æ¨¡å¼ kCGColorSpaceModelLab, LABè‰²å½©ç©ºé—´æ¨¡å¼ kCGColorSpaceModelDeviceN, è®¾å¤‡è‰²å½©ç©ºé—´æ¨¡å¼ kCGColorSpaceModelIndexed, å¼•ç”¨è‰²å½©ç©ºé—´æ¨¡å¼ kCGColorSpaceModelPattern æ¨¡å‹è‰²å½©ç©ºé—´æ¨¡å¼&#125;;*/CGColorSpaceModel CGColorSpaceGetModel(CGColorSpaceRef cg_nullable space); ç›¸åŒçš„å›¾åƒï¼Œä½¿ç”¨ä¸åŒçš„è‰²å½©ç©ºé—´è¿›è¡Œæ¸²æŸ“ï¼Œå¾—åˆ°çš„ç»“æœå¯èƒ½å¤§ä¸ä¸€æ ·ï¼Œä¾‹å¦‚å¦‚ä¸‹ä»£ç ä¿®æ”¹å›¾ç‰‡çš„è‰²å½©ç©ºé—´ï¼š 1234567891011- (void)viewDidLoad &#123; [super viewDidLoad]; CGImageRef image = CGImageCreateCopyWithColorSpace([UIImage imageNamed:@\"image\"].CGImage, CGColorSpaceCreateWithName(kCGColorSpaceGenericRGB)); CGImageRef image2 = CGImageCreateCopyWithColorSpace([UIImage imageNamed:@\"image\"].CGImage, CGColorSpaceCreateWithName(kCGColorSpaceROMMRGB)); UIImageView * imageView = [[UIImageView alloc]initWithImage:[UIImage imageWithCGImage:image]]; UIImageView * imageView2 = [[UIImageView alloc]initWithImage:[UIImage imageWithCGImage:image2]]; imageView.frame = CGRectMake(100, 100, 200, 200); imageView2.frame = CGRectMake(100, 300, 200, 200); [self.view addSubview:imageView]; [self.view addSubview:imageView2];&#125; æ•ˆæœå¦‚ä¸‹ï¼š åŸå›¾å¦‚ä¸‹ï¼š æ¨¡æ‹Ÿå™¨è¿è¡Œå¦‚ä¸‹ï¼š ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSå¼€å‘CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¹‹äºŒâ€”â€”æ·±å…¥ç†è§£å›¾å½¢ä¸Šä¸‹æ–‡","slug":"260iOSå¼€å‘CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¹‹äºŒâ€”â€”æ·±å…¥ç†è§£å›¾å½¢ä¸Šä¸‹æ–‡","date":"2016-10-15T16:00:00.000Z","updated":"2021-07-12T02:33:58.310Z","comments":true,"path":"2016/10/16/260iOSå¼€å‘CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¹‹äºŒâ€”â€”æ·±å…¥ç†è§£å›¾å½¢ä¸Šä¸‹æ–‡/","link":"","permalink":"http://huishao.cc/2016/10/16/260iOSå¼€å‘CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¹‹äºŒâ€”â€”æ·±å…¥ç†è§£å›¾å½¢ä¸Šä¸‹æ–‡/","excerpt":"","text":"iOSå¼€å‘CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¹‹äºŒâ€”â€”æ·±å…¥ç†è§£å›¾å½¢ä¸Šä¸‹æ–‡ä¸€ã€å¼•è¨€åœ¨ä¸Šä¸€ç¯‡åšå®¢ä¸­ï¼Œä»‹ç»äº†æœ‰å…³CGPathç»˜åˆ¶è·¯å¾„çš„ç›¸å…³æ–¹æ³•ï¼Œå…¶ä¸­åœ¨Viewè§†å›¾çš„drawRectæ–¹æ³•ä¸­ï¼Œå·²ç»ä½¿ç”¨è¿‡ä¸Šä¸‹æ–‡å°†Pathè·¯å¾„ç»˜åˆ¶åˆ°å½“å‰è§†å›¾ä¸Šï¼Œä¸Šä¸€ç¯‡åšå®¢åªæ˜¯æŠ›ç –å¼•ç‰ï¼Œæœ¬ç‰‡åšå®¢å°†æ›´æ·±å…¥çš„ä»‹ç»ä¸‹æœ‰å…³ä¸Šä¸‹æ–‡çš„æ›´å¤šå†…å®¹ã€‚å…³äºæ¥èƒ¡æœå•ŠCGPathåº”ç”¨çš„åšå®¢åœ°å€å¦‚ä¸‹ï¼š iOSå¼€å‘CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¹‹ä¸€â€”â€”CGPathçš„åº”ç”¨ï¼šhttps://my.oschina.net/u/2340880/blog/757072ã€‚ äºŒã€å…³äºå›¾å½¢ä¸Šä¸‹æ–‡Graphics Context GraphicsContextå¯¹äºå¼€å‘è€…æ¥è¯´æ˜¯å®Œå…¨é€æ˜çš„ï¼Œå¼€å‘è€…ä¸éœ€è¦å…³å¿ƒå…¶å®ç°ï¼Œä¹Ÿä¸éœ€è¦å…³å¿ƒå…¶ç»˜åˆ¶æ–¹å¼ï¼Œå¼€å‘è€…åªéœ€è¦å°†è¦ç»˜åˆ¶çš„å†…å®¹ä¼ é€’ç»™å›¾å½¢ä¸Šä¸‹æ–‡ï¼Œç”±å›¾å½¢ä¸Šä¸‹æ–‡æ¥å°†å†…å®¹ç»˜åˆ¶åˆ°å¯¹åº”çš„ç›®æ ‡ä¸Šã€‚è¿™ä¸ªç›®æ ‡å¯ä»¥æ˜¯è§†å›¾ï¼Œçª—å£ï¼Œæ‰“å°æœºï¼ŒPDFæ–‡æ¡£æˆ–è€…ä½å›¾å¯¹è±¡ã€‚éœ€è¦æ³¨æ„ï¼Œç»˜åˆ¶çš„é¡ºåºåœ¨CoreGraphicsæ¡†æ¶ä¸­ååˆ†é‡è¦ï¼Œå¦‚æœåç»˜åˆ¶çš„å†…å®¹å’Œå…ˆç»˜åˆ¶çš„å†…å®¹æœ‰ä½ç½®å†²çªï¼Œåç»˜åˆ¶çš„å†…å®¹å°†è¦†ç›–å…ˆç»˜åˆ¶çš„å†…å®¹ã€‚ ç‰¹å®šçš„ä¸Šä¸‹æ–‡ç”¨äºå°†å†…å®¹ç»˜åˆ¶åˆ°ç‰¹å®šçš„è¾“å‡ºæºä¸Šï¼ŒCoreGraphicsä¸­æä¾›å¦‚ä¸‹å‡ ç§å›¾å½¢ä¸Šä¸‹æ–‡ï¼š 1.ä½å›¾å›¾å½¢ä¸Šä¸‹æ–‡ï¼šä½å›¾å›¾å½¢ä¸Šä¸‹æ–‡ç”¨äºå°†RGBå›¾åƒï¼ŒGMYKå›¾åƒæˆ–è€…é»‘ç™½å›¾åƒç»˜åˆ¶åˆ°ä¸€ä¸ªä½å›¾(bitmap)å¯¹è±¡ä¸­ã€‚ 2.PDFå›¾å½¢ä¸Šä¸‹æ–‡ï¼šPDFå›¾å½¢ä¸Šä¸‹æ–‡å¯ä»¥å¸®åŠ©å¼€å‘è€…åˆ›å»ºPDFæ–‡ä»¶ï¼Œå°†å†…å®¹ç»˜åˆ¶è¿›PDFæ–‡ä»¶ä¸­ï¼Œå…¶ä¸ä½å›¾ä¸Šä¸‹æ–‡æœ€å¤§çš„åŒºåˆ«åœ¨äºPDFæ•°æ®å¯ä»¥ä¿å­˜å¤šé¡µå›¾åƒã€‚ 3.çª—å£ä¸Šä¸‹æ–‡ï¼šç”¨äºOSç³»ç»Ÿä¸­çš„çª—å£ç»˜åˆ¶ã€‚ 4.å›¾å±‚ä¸Šä¸‹æ–‡ï¼šç”¨äºå°†å†…å®¹ç»˜åˆ¶åœ¨Layerå›¾å±‚ä¸Šã€‚ 5.æ‰“å°ä¸Šä¸‹æ–‡ï¼šä½¿ç”¨Macæ‰“å°åŠŸèƒ½æ—¶ï¼Œæ­¤ä¸Šä¸‹æ–‡ç”¨äºå°†å†…å®¹ç»˜åˆ¶åœ¨æ‰“å°è¾“å‡ºæºä¸Šã€‚ ä¸‰ã€åœ¨UIKitæ¡†æ¶ä¸­æ“ä½œå›¾å½¢ä¸Šä¸‹æ–‡åœ¨UIKitæ¡†æ¶ä¸­æœ‰ä¸€ä¸ªUIGraphicså¤´æ–‡ä»¶ï¼Œå…¶ä¸­å°è£…äº†è®¸å¤šå¯¹å½“å‰å›¾å½¢ä¸Šä¸‹æ–‡è¿›è¡Œæ“ä½œçš„æ–¹æ³•ã€‚é¦–å…ˆä»»ä½•UIViewå’Œå…¶å­ç±»çš„è§†å›¾æ§ä»¶éƒ½æœ‰ä¸€ä¸ªdrawRectæ–¹æ³•ï¼Œå½“è§†å›¾å°†è¦è¢«ç»˜åˆ¶æ—¶ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œåœ¨drawRectæ–¹æ³•ä¸­å¼€å‘è€…å¯ä»¥è·å–åˆ°å½“å‰è§†å›¾çš„å›¾å½¢ä¸Šä¸‹æ–‡ï¼Œé€šè¿‡è¿™ä¸ªå›¾å½¢ä¸Šä¸‹æ–‡å¯ä»¥å¯¹è§†å›¾è¿›è¡Œè‡ªå®šä¹‰çš„ç»˜åˆ¶ã€‚UIGraphicså¤´æ–‡ä»¶ä¸­å®šä¹‰çš„å¦‚ä¸‹æ–¹æ³•å¯ä»¥å¯¹å½“å‰çš„å›¾å½¢ä¸Šä¸‹æ–‡è¿›è¡Œæ“ä½œï¼š 123456//è¿™ä¸ªæ–¹æ³•ç”¨äºè·å–å½“å‰çš„å›¾å½¢ä¸Šä¸‹æ–‡UIKIT_EXTERN CGContextRef __nullable UIGraphicsGetCurrentContext(void) CF_RETURNS_NOT_RETAINED;//è¿™ä¸ªæ–¹æ³•ç”¨äºå°†æŸä¸ªå›¾å½¢ä¸Šä¸‹æ–‡å¯¹è±¡å‹å…¥æ ˆä¸­ ä½¿å…¶å˜ä¸ºå½“å‰çš„å›¾å½¢ä¸Šä¸‹æ–‡UIKIT_EXTERN void UIGraphicsPushContext(CGContextRef context);//è¿™ä¸ªæ–¹æ³•ç”¨äºå°†å½“å‰çš„å›¾å½¢ä¸Šä¸‹æ–‡å‡ºæ ˆ å½“å‰çš„å›¾å½¢ä¸Šä¸‹æ–‡å§‹ç»ˆæ˜¯æ ˆé¡¶çš„å›¾å½¢ä¸Šä¸‹æ–‡UIKIT_EXTERN void UIGraphicsPopContext(void); éœ€è¦æ³¨æ„ï¼Œä¸Šé¢çš„UIGraphicsPushContext()ä¸UIGraphicsPopContext()æ–¹æ³•å¸¸ç”¨äºåˆ‡æ¢å½“å‰çš„å›¾å½¢ä¸Šä¸‹æ–‡ã€‚ 12345678//ä¸‹é¢è¿™ä¸¤ä¸ªæ–¹æ³•ç”¨äºå‘å½“å‰çš„å›¾å½¢ä¸Šä¸‹æ–‡ä¸­å¡«å……çŸ©å½¢ UIKIT_EXTERN void UIRectFillUsingBlendMode(CGRect rect, CGBlendMode blendMode);UIKIT_EXTERN void UIRectFill(CGRect rect);//ä¸‹é¢è¿™ä¸¤ä¸ªæ–¹æ³•ç”¨äºå‘å½“å‰çš„å›¾å½¢ä¸Šä¸‹æ–‡ä¸­ç»˜åˆ¶çŸ©å½¢è¾¹æ¡†UIKIT_EXTERN void UIRectFrameUsingBlendMode(CGRect rect, CGBlendMode blendMode);UIKIT_EXTERN void UIRectFrame(CGRect rect);//è¿™ä¸ªæ–¹æ³•ç”¨äºè£å‰ªå½“å‰çš„å›¾å½¢ä¸Šä¸‹æ–‡çš„ç»˜åˆ¶åŒºåŸŸUIKIT_EXTERN void UIRectClip(CGRect rect); ä¸Šé¢æ–¹æ³•ä¸­çš„CGBlendModeå‚æ•°ç”¨äºè®¾ç½®å›¾åƒçš„æ··åˆæ¨¡å¼ï¼Œæ„ä¹‰åˆ—ä¸¾å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152typedef CF_ENUM (int32_t, CGBlendMode) &#123; //åœ¨èƒŒæ™¯å›¾åƒä¹‹ä¸Šç»˜åˆ¶åŸå›¾åƒ kCGBlendModeNormal, //å°†èƒŒæ™¯ä¸åŸå›¾åƒè¿›è¡Œæ··åˆ kCGBlendModeMultiply, //å°†èƒŒæ™¯ä¸åŸå›¾åƒè¿›è¡Œé€†å‘æ··åˆ kCGBlendModeScreen, //è¦†ç›–åŸå›¾åƒ åŒæ—¶ä¿æŒèƒŒæ™¯é˜´å½± kCGBlendModeOverlay, //è¿›è¡Œç°åº¦å¤åˆ kCGBlendModeDarken, //è¿›è¡Œäº®åº¦å¤åˆ kCGBlendModeLighten, //å¤åˆæ—¶ é»‘è‰²ä¸è¿›è¡Œå¤åˆ kCGBlendModeColorDodge, //å¤åˆæ—¶ ç™½è‰²ä¸è¿›è¡Œå¤åˆ kCGBlendModeColorBurn, //å¤åˆæ—¶ æ ¹æ®é»‘ç™½è‰²å€¼æ¯”ä¾‹è¿›è¡Œå¤åˆ kCGBlendModeSoftLight, kCGBlendModeHardLight, //å¤åˆæ—¶ å°†åŸå›¾åƒä¸­æœ‰å…³èƒŒæ™¯å›¾åƒçš„è‰²å€¼å»é™¤ kCGBlendModeDifference, //ä¸kCGBlendModeDifferenceç±»ä¼¼ å¯¹æ¯”åº¦æ›´ä½ kCGBlendModeExclusion, //ä½¿ç”¨åŸå›¾åƒçš„è‰²è°ƒä¸é¥±å’Œåº¦ kCGBlendModeHue, //åŒkCGBlendModeHue çº¯ç°åº¦çš„åŒºåŸŸä¸äº§ç”Ÿå˜åŒ– kCGBlendModeSaturation, //åŒkCGBlendModeHue ä¿ç•™ç°åº¦ç­‰çº§ kCGBlendModeColor, //ä¸kCGBlendModeHueæ•ˆæœç›¸å kCGBlendModeLuminosity, //ä¸‹é¢è¿™äº›æšä¸¾å®šä¹‰äº†MacOSä¸­å›¾åƒå¤åˆçš„è®¡ç®—æ–¹å¼ //R ç»“æœ //S åŸå›¾åƒ //D èƒŒæ™¯å›¾åƒ //Ra Sa Daä¸ºå¸¦é€æ˜alphaé€šé“ kCGBlendModeClear, /* R = 0 */ kCGBlendModeCopy, /* R = S */ kCGBlendModeSourceIn, /* R = S*Da */ kCGBlendModeSourceOut, /* R = S*(1 - Da) */ kCGBlendModeSourceAtop, /* R = S*Da + D*(1 - Sa) */ kCGBlendModeDestinationOver, /* R = S*(1 - Da) + D */ kCGBlendModeDestinationIn, /* R = D*Sa */ kCGBlendModeDestinationOut, /* R = D*(1 - Sa) */ kCGBlendModeDestinationAtop, /* R = S*(1 - Da) + D*Sa */ kCGBlendModeXOR, /* R = S*(1 - Da) + D*(1 - Sa) */ kCGBlendModePlusDarker, /* R = MAX(0, (1 - D) + (1 - S)) */ kCGBlendModePlusLighter /* R = MIN(1, S + D) */&#125;; ä¸‹é¢è¿™äº›æ–¹æ³•ç”¨äºæ“ä½œä½å›¾å›¾å½¢ä¸Šä¸‹æ–‡ï¼š 12345678//è¿™ä¸ªæ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªä½å›¾å›¾å½¢ä¸Šä¸‹æ–‡ å¹¶å°†å…¶pushè¿›å›¾å½¢ä¸Šä¸‹æ–‡æ ˆä¸­ sizeå‚æ•°è®¾ç½®å›¾åƒçš„å¤§å°UIKIT_EXTERN void UIGraphicsBeginImageContext(CGSize size);//æ–¹æ³•åŒä¸Šï¼Œå…¶ä¸­opaqueå‚æ•°è®¾ç½®æ˜¯å¦ä¸ºä¸é€æ˜çš„ scaleè®¾ç½®ç¼©æ”¾å› å­UIKIT_EXTERN void UIGraphicsBeginImageContextWithOptions(CGSize size, BOOL opaque, CGFloat scale) NS_AVAILABLE_IOS(4_0);//è¿™ä¸ªæ–¹æ³•ç”¨äºå°†å½“å‰çš„ä½å›¾å›¾å½¢ä¸Šä¸‹æ–‡å†…å®¹ç”»æˆUIImageå¯¹è±¡UIKIT_EXTERN UIImage* __nullable UIGraphicsGetImageFromCurrentImageContext(void);//ç»“æŸä½å›¾å›¾å½¢ä¸Šä¸‹æ–‡çš„ç¼–è¾‘ ä¼šPOPå‡ºæ ˆUIKIT_EXTERN void UIGraphicsEndImageContext(void); æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»£ç æ¥ç”»ä¸€ä¸ªç®€å•çš„UIImageå›¾åƒï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728- (void)viewDidLoad &#123; [super viewDidLoad]; //åˆ›å»ºä½å›¾å›¾å½¢ä¸Šä¸‹æ–‡ è®¾ç½®å¤§å°ä¸º200*200 UIGraphicsBeginImageContext(CGSizeMake(200, 200)); //è·å–åˆ°å½“å‰å›¾å½¢ä¸Šä¸‹æ–‡ CGContextRef ref = UIGraphicsGetCurrentContext(); //è£å‰ªå…¶è¿›è¡Œç»˜åˆ¶çš„å°ºå¯¸ä¸º100*100 UIRectClip(CGRectMake(0, 0, 100, 100)); //è®¾ç½®çº¿æ¡é¢œè‰² [[UIColor redColor] setStroke]; //è®¾ç½®å¡«å……é¢œè‰² [[UIColor grayColor] setFill]; //è®¾ç½®è¾¹æ¡†å®½åº¦ CGContextSetLineWidth(ref, 10); //è¿›è¡Œå¡«å…… UIRectFill(CGRectMake(0, 0, 100, 100)); //è¿›è¡Œè¾¹æ¡†ç»˜åˆ¶ UIRectFrame(CGRectMake(0, 0, 200, 200)); //æ‹¿åˆ°UIImageå®ä¾‹ UIImage * image = UIGraphicsGetImageFromCurrentImageContext(); //ç»“æŸä½å›¾ä¸Šä¸‹æ–‡ç¼–è¾‘ UIGraphicsEndImageContext(); //å°†UIImageå±•ç¤ºåˆ°ç•Œé¢ä¸Š UIImageView * imageView = [[UIImageView alloc]initWithImage:image]; imageView.contentMode = UIViewContentModeCenter; imageView.frame = CGRectMake(100, 100, 200, 200); [self.view addSubview:imageView];&#125; æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¸æ“ä½œPDFå›¾å½¢ä¸Šä¸‹æ–‡çš„ç›¸å…³æ–¹æ³•å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223//è¿™ä¸ªæ–¹æ³•ç”¨äºåˆ›å»ºä¸€ä¸ªPDFå›¾å½¢ä¸Šä¸‹æ–‡ å°†å…¶å…¥æ ˆ ä½œä¸ºå½“å‰çš„å›¾å½¢ä¸Šä¸‹æ–‡ /*å…¶ä¸­pathä¸ºPDFæ–‡ä»¶å†™å…¥çš„è·¯å¾„boundsä¸ºPDFæ–‡æ¡£çš„å°ºå¯¸decumentInfoåœ°ç‚¹ä¸ºè®¾ç½®PDFæ–‡æ¡£ä¿¡æ¯ åé¢ä¼šä»‹ç»*/UIKIT_EXTERN BOOL UIGraphicsBeginPDFContextToFile(NSString *path, CGRect bounds, NSDictionary * __nullable documentInfo) NS_AVAILABLE_IOS(3_2);//è¿™ä¸ªæ–¹æ³•ç”¨äºç©¿ä»¶ä¸€ä¸ªPDFå›¾å½¢ä¸Šä¸‹æ–‡ ä½†æ˜¯å°†PDFå†…å®¹å†™æˆDataæ•°æ® å‚æ•°æ„ä¹‰åŒä¸ŠUIKIT_EXTERN void UIGraphicsBeginPDFContextToData(NSMutableData *data, CGRect bounds, NSDictionary * __nullable documentInfo) NS_AVAILABLE_IOS(3_2);//ç»“æŸPDFå›¾å½¢ä¸Šä¸‹æ–‡çš„ç¼–è¾‘ å°†å…¶å‡ºæ ˆUIKIT_EXTERN void UIGraphicsEndPDFContext(void) NS_AVAILABLE_IOS(3_2);//è¿™ä¸ªæ–¹æ³•ç”¨äºå°†å½“å‰çš„PDFå›¾å½¢ä¸Šä¸‹æ–‡æ–°å¼€ä¸€é¡µå†…å®¹UIKIT_EXTERN void UIGraphicsBeginPDFPage(void) NS_AVAILABLE_IOS(3_2);//åŒä¸ŠUIKIT_EXTERN void UIGraphicsBeginPDFPageWithInfo(CGRect bounds, NSDictionary * __nullable pageInfo) NS_AVAILABLE_IOS(3_2);//è¿”å›å½“å‰PDFå›¾å½¢ä¸Šä¸‹æ–‡æ‰€åœ¨é¡µçš„å°ºå¯¸UIKIT_EXTERN CGRect UIGraphicsGetPDFContextBounds(void) NS_AVAILABLE_IOS(3_2);//å‘PDFæ–‡æ¡£ä¸­çš„æŸä¸ªåŒºåŸŸæ·»åŠ é“¾æ¥UIKIT_EXTERN void UIGraphicsSetPDFContextURLForRect(NSURL *url, CGRect rect) NS_AVAILABLE_IOS(3_2);//å‘PDFæ–‡æ¡£ä¸­çš„æŸä¸ªåŒºåŸŸæ·»åŠ ä¸€ä¸ªè·³è½¬ç›®æ ‡ ä½¿å…¶æ»šåŠ¨åˆ°æŸç‚¹UIKIT_EXTERN void UIGraphicsAddPDFContextDestinationAtPoint(NSString *name, CGPoint point) NS_AVAILABLE_IOS(3_2);//å‘PDFæ–‡æ¡£ä¸­çš„æŸä¸ªåŒºåŸŸæ·»åŠ ä¸€ä¸ªè·³è½¬ç›®æ ‡ ä½¿å…¶æ»šåŠ¨åˆ°æŸä¸ªåŒºåŸŸUIKIT_EXTERN void UIGraphicsSetPDFContextDestinationForRect(NSString *name, CGRect rect) NS_AVAILABLE_IOS(3_2); ä¸Šé¢æœ‰æåˆ°ï¼Œåœ¨åˆ›å»ºPDFå›¾å½¢ä¸Šä¸‹æ–‡æ—¶ï¼Œå¯ä»¥è®¾ç½®ä¸€ä¸ªä¿¡æ¯å­—å…¸ï¼Œè¿™ä¸ªå­—å…¸ä¸­å¸¸ç”¨çš„å¯ä»¥è¿›è¡Œé…ç½®çš„é”®å€¼å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223//è¿™ä¸ªé”®æ˜¯å¯é€‰çš„ å¯¹åº”éœ€è¦è®¾ç½®ä¸ºå­—ç¬¦ä¸²ç±»å‹çš„å€¼ è¡¨æ˜æ–‡æ¡£ä½œè€…kCGPDFContextAuthor//è¿™ä¸ªé”®æ˜¯å¯é€‰çš„ å¯¹åº”éœ€è¦è®¾ç½®ä¸ºå­—ç¬¦ä¸²ç±»å‹çš„å€¼ è¡¨ç¤ºç”Ÿæˆæ–‡æ¡£çš„å‘½ååç§°kCGPDFContextCreator//è¿™ä¸ªé”®æ˜¯å¯é€‰çš„ å¯¹åº”éœ€è¦è®¾ç½®ä¸ºå­—ç¬¦ä¸²ç±»å‹çš„å€¼ è¡¨ç¤ºæ–‡æ¡£åç§°kCGPDFContextTitle//è¿™ä¸ªé”®è®¾ç½®æ‰€æœ‰è€…å¯†ç  éœ€è¦è®¾ç½®ä¸ºCFStringçš„å€¼kCGPDFContextOwnerPassword//è¿™ä¸ªé”®è®¾ç½®ç”¨æˆ·å¯†ç  éœ€è¦è®¾ç½®ä¸ºCFStringçš„å€¼kCGPDFContextUserPassword//è¿™ä¸ªé”®è®¾ç½®æ˜¯å¦å…è®¸åœ¨æœªè§£é”çŠ¶æ€ä¸‹è¿›è¡Œæ‰“å° éœ€è¦è®¾ç½®ä¸ºCFBolleançš„å€¼ é»˜è®¤ä¸ºå…è®¸kCGPDFContextAllowsPrinting//è¿™ä¸ªé”®è®¾ç½®æ˜¯å¦å…è®¸åœ¨æœªè§£é”çŠ¶æ€ä¸‹è¿›è¡Œå¤åˆ¶ éœ€è¦è®¾ç½®ä¸ºCFBolleançš„å€¼ é»˜è®¤ä¸ºå…è®¸kCGPDFContextAllowsCopying//è®¾ç½®è¾“å‡ºè§„èŒƒkCGPDFContextOutputIntentkCGPDFContextOutputIntents//è®¾ç½®æ–‡æ¡£çš„ä¸»é¢˜ éœ€è¦è®¾ç½®ä¸ºCFStringçš„å€¼kCGPDFContextSubject//è®¾ç½®æ–‡æ¡£çš„å…³é”®å­—kCGPDFContextKeywords//è®¾ç½®å¯†é’¥é•¿åº¦kCGPDFContextEncryptionKeyLength å››ã€CGContextåŠŸèƒ½è§£æå‰è¾¹ä»‹ç»äº†å¦‚ä½•æ‹¿åˆ°å¯¹åº”çš„å›¾å½¢ä¸Šä¸‹æ–‡ï¼Œæ‹¿åˆ°å›¾å½¢ä¸Šä¸‹æ–‡åï¼Œå¼€å‘è€…ä¾¿å¯ä»¥éšå¿ƒæ‰€æ¬²çš„é€šè¿‡å›¾å½¢ä¸Šä¸‹æ–‡å‘ç›®æ ‡ä¸Šç»˜åˆ¶å†…å®¹ã€‚CoreGraphicsæ¡†æ¶ä¸­æä¾›çš„CGContextç»˜åˆ¶ç›¸å…³æ–¹æ³•è§£æå¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243//è·å–CGContextç±»åœ¨CoreGraphicsæ¡†æ¶ä¸­çš„idå€¼CFTypeID CGContextGetTypeID(void);//å°†å½“å‰å›¾å½¢ä¸Šä¸‹æ–‡è¿›è¡Œä¿å­˜ ä¼šæ‰§è¡Œpushå…¥æ ˆvoid CGContextSaveGState(CGContextRef cg_nullable c);//å°†å›¾å½¢ä¸Šä¸‹æ–‡æ¢å¤åˆ°ä¿å­˜æ—¶çš„çŠ¶æ€ void CGContextRestoreGState(CGContextRef cg_nullable c);//å¯¹contextå†…å®¹è¿›è¡Œç¼©æ”¾æ“ä½œvoid CGContextScaleCTM(CGContextRef cg_nullable c, CGFloat sx, CGFloat sy);//å¯¹contextå†…å®¹è¿›è¡Œå¹³ç§»æ“ä½œvoid CGContextTranslateCTM(CGContextRef cg_nullable c, CGFloat tx, CGFloat ty);//å¯¹contextå†…å®¹è¿›è¡Œæ—‹è½¬æ“ä½œvoid CGContextRotateCTM(CGContextRef cg_nullable c, CGFloat angle);//å¯¹contextå†…å®¹è¿›è¡Œtransformå˜æ¢æ“ä½œvoid CGContextConcatCTM(CGContextRef cg_nullable c,CGAffineTransform transform);//è·å–æŸä¸ªcontextçš„transformå˜æ¢å¯¹è±¡CGAffineTransform CGContextGetCTM(CGContextRef cg_nullable c);//è®¾ç½®ç»˜åˆ¶çš„çº¿å®½void CGContextSetLineWidth(CGContextRef cg_nullable c, CGFloat width);//è®¾ç½®ç»˜åˆ¶çš„çº¿å¸½é£æ ¼void CGContextSetLineCap(CGContextRef cg_nullable c, CGLineCap cap);//è®¾ç½®ç»˜åˆ¶çš„çº¿è¿æ¥å¤„é£æ ¼void CGContextSetLineJoin(CGContextRef cg_nullable c, CGLineJoin join);//è®¾ç½®ç»˜åˆ¶çš„å…ˆè½¬æŠ˜å¤„é£æ ¼void CGContextSetMiterLimit(CGContextRef cg_nullable c, CGFloat limit);//è®¾ç½®è™šçº¿é…ç½®å‚æ•°void CGContextSetLineDash(CGContextRef cg_nullable c, CGFloat phase, const CGFloat * __nullable lengths, size_t count);//è®¾ç½®å¹³æ»‘åº¦void CGContextSetFlatness(CGContextRef cg_nullable c, CGFloat flatness);//è®¾ç½®é€æ˜åº¦void CGContextSetAlpha(CGContextRef cg_nullable c, CGFloat alpha);//è®¾ç½®å›¾åƒå¤åˆæ¨¡å¼void CGContextSetBlendMode(CGContextRef cg_nullable c, CGBlendMode mode);//å¼€å§‹æ–°çš„è·¯å¾„ æ—§çš„è·¯å¾„å°†è¢«æŠ›å¼ƒvoid CGContextBeginPath(CGContextRef cg_nullable c);//å°†è·¯å¾„èµ·ç‚¹ç§»åŠ¨åˆ°æŸä¸ªç‚¹void CGContextMoveToPoint(CGContextRef cg_nullable c, CGFloat x, CGFloat y);//å‘è·¯å¾„ä¸­æ·»åŠ ä¸€æ¡çº¿void CGContextAddLineToPoint(CGContextRef cg_nullable c,CGFloat x, CGFloat y);//å‘è·¯å¾„ä¸­æ·»åŠ ä¸‰æ¬¡è´å¡å°”æ›²çº¿void CGContextAddCurveToPoint(CGContextRef cg_nullable c, CGFloat cp1x, CGFloat cp1y, CGFloat cp2x, CGFloat cp2y, CGFloat x, CGFloat y);//å‘è·¯å¾„ä¸­æ·»åŠ äºŒæ¬¡è´å¡å°”æ›²çº¿void CGContextAddQuadCurveToPoint(CGContextRef cg_nullable c, CGFloat cpx, CGFloat cpy, CGFloat x, CGFloat y);//é—­åˆè·¯å¾„void CGContextClosePath(CGContextRef cg_nullable c);//å‘è·¯å¾„ä¸­æ·»åŠ ä¸€ä¸ªçŸ©å½¢void CGContextAddRect(CGContextRef cg_nullable c, CGRect rect);//å‘è·¯å¾„ä¸­æ·»åŠ ä¸€ç»„çŸ©å½¢void CGContextAddRects(CGContextRef cg_nullable c, const CGRect * __nullable rects, size_t count);//å‘è·¯å¾„ä¸­æ·»åŠ ä¸€ç»„çº¿æ¡void CGContextAddLines(CGContextRef cg_nullable c, const CGPoint * __nullable points, size_t count);//å‘è·¯å¾„ä¸­æ·»åŠ æ¤­åœ†CGContextAddEllipseInRect(CGContextRef cg_nullable c, CGRect rect);//å‘è·¯å¾„ä¸­æ·»åŠ åœ†å¼§void CGContextAddArc(CGContextRef cg_nullable c, CGFloat x, CGFloat y, CGFloat radius, CGFloat startAngle, CGFloat endAngle, int clockwise);void CGContextAddArcToPoint(CGContextRef cg_nullable c, CGFloat x1, CGFloat y1, CGFloat x2, CGFloat y2, CGFloat radius);//ç›´æ¥å‘ä¸Šä¸‹æ–‡ä¸­æ·»åŠ ä¸€ä¸ªè·¯å¾„å¯¹è±¡void CGContextAddPath(CGContextRef cg_nullable c, CGPathRef cg_nullable path);//å°†ä¸Šä¸‹æ–‡ä¸­çš„è·¯å¾„å†…å®¹æ›¿æ¢æ‰ åªç•™ä¸‹è¾¹æ¡†void CGContextReplacePathWithStrokedPath(CGContextRef cg_nullable c);//åˆ¤æ–­æŸä¸ªContextçš„è·¯å¾„æ˜¯å¦ä¸ºç©ºbool CGContextIsPathEmpty(CGContextRef cg_nullable c);//è·å–ä¸€ä¸ªContextè·¯å¾„å½“å‰ç«¯ç‚¹çš„ä½ç½®CGPoint CGContextGetPathCurrentPoint(CGContextRef cg_nullable c);//è·å–è·¯å¾„çš„å°ºå¯¸CGRect CGContextGetPathBoundingBox(CGContextRef cg_nullable c);//è¿›è¡Œå›¾å½¢ä¸Šä¸‹æ–‡çš„æ‹·è´CGPathRef __nullable CGContextCopyPath(CGContextRef cg_nullable c);//è·å–contextçš„è·¯å¾„ä¸­æ˜¯å¦åŒ…å«æŸä¸ªç‚¹bool CGContextPathContainsPoint(CGContextRef cg_nullable c, CGPoint point, CGPathDrawingMode mode);//è¿›è¡Œè·¯å¾„çš„ç»˜åˆ¶/*modeæšä¸¾æ„ä¹‰å¦‚ä¸‹ï¼š kCGPathFill, //è¿›è¡Œå¡«å…… kCGPathEOFill, //è¡¥é›†è¿›è¡Œå¡«å……ç»˜åˆ¶ kCGPathStroke, //è¾¹æ¡†ç»˜åˆ¶ kCGPathFillStroke, //è¾¹æ¡†ç»˜åˆ¶å¹¶å¡«å…… kCGPathEOFillStroke //è¡¥é›†è¿›è¡Œè¾¹æ¡†å’Œå¡«å……ç»˜åˆ¶*/void CGContextDrawPath(CGContextRef cg_nullable c, CGPathDrawingMode mode)ï¼›//è¿›è¡Œè·¯å¾„çš„å¡«å……void CGContextFillPath(CGContextRef cg_nullable c);//è¿›è¡Œè·¯å¾„æ‰€å›´æˆåŒºåŸŸçš„è¡¥é›†åŒºåŸŸå¡«å……void CGContextEOFillPath(CGContextRef cg_nullable c);//è¿›è¡Œè¾¹æ¡†ç»˜åˆ¶void CGContextStrokePath(CGContextRef cg_nullable c);//å¡«å……æŸä¸ªçŸ©å½¢åŒºåŸŸvoid CGContextFillRect(CGContextRef cg_nullable c, CGRect rect);//å¡«å……ä¸€ç»„çŸ©å½¢åŒºåŸŸvoid CGContextFillRects(CGContextRef cg_nullable c, const CGRect * __nullable rects, size_t count);//è¿›è¡ŒçŸ©å½¢åŒºåŸŸçš„è¾¹æ¡†ç»˜åˆ¶void CGContextStrokeRect(CGContextRef cg_nullable c, CGRect rect);//è¿›è¡ŒçŸ©å½¢åŒºåŸŸçš„è¾¹æ¡†ç»˜åˆ¶ å¯ä»¥è®¾ç½®è¾¹æ¡†å®½åº¦void CGContextStrokeRectWithWidth(CGContextRef cg_nullable c, CGRect rect, CGFloat width);//æ¸…é™¤æŸä¸ªçŸ©å½¢åŒºåŸŸvoid CGContextClearRect(CGContextRef cg_nullable c, CGRect rect);//è¿›è¡Œè™šçº¿åŒºåŸŸçš„å¡«å……void CGContextFillEllipseInRect(CGContextRef cg_nullable c, CGRect rect);//è¿›è¡Œè™šçº¿åŒºåŸŸè¾¹æ¡†çš„ç»˜åˆ¶void CGContextStrokeEllipseInRect(CGContextRef cg_nullable c,CGRect rect);//ç»˜åˆ¶ä¸€ç»„çº¿void CGContextStrokeLineSegments(CGContextRef cg_nullable c, const CGPoint * __nullable points, size_t count);//ä¾æ®Contextå½“å‰è·¯å¾„è¿›è¡Œè£å‰ªvoid CGContextClip(CGContextRef cg_nullable c);//è¿›è¡Œè·¯å¾„åŒºåŸŸçš„è¡¥é›†åŒºåŸŸè£å‰ªvoid CGContextEOClip(CGContextRef cg_nullable c);//è¿™ä¸ªæ–¹æ³•ååˆ†é‡è¦ å…¶å¯ä»¥å°†å›¾ç‰‡è£å‰ªæˆå›¾å½¢ä¸Šä¸‹æ–‡å®šä¹‰çš„å½¢çŠ¶void CGContextClipToMask(CGContextRef cg_nullable c, CGRect rect, CGImageRef cg_nullable mask);//è·å–è£å‰ªçš„åŒºåŸŸå°ºå¯¸CGRect CGContextGetClipBoundingBox(CGContextRef cg_nullable c);//è¿›è¡ŒåŒºåŸŸè£å‰ªvoid CGContextClipToRect(CGContextRef cg_nullable c, CGRect rect);//è¿›è¡Œä¸€ç»„åŒºåŸŸçš„è£å‰ªvoid CGContextClipToRects(CGContextRef cg_nullable c, const CGRect * rects, size_t count);//è®¾ç½®å›¾å½¢ä¸Šä¸‹æ–‡çš„å¡«å……é¢œè‰²void CGContextSetFillColorWithColor(CGContextRef cg_nullable c, CGColorRef cg_nullable color);//è®¾ç½®å›¾å½¢ä¸Šä¸‹æ–‡çš„è¾¹æ¡†é¢œè‰²void CGContextSetStrokeColorWithColor(CGContextRef cg_nullable c, CGColorRef cg_nullable color);//è®¾ç½®å›¾å½¢ä¸Šä¸‹æ–‡å¡«å……é¢œè‰²çš„è‰²å½©ç©ºé—´void CGContextSetFillColorSpace(CGContextRef cg_nullable c,CGColorSpaceRef cg_nullable space);//è®¾ç½®å›¾å½¢ä¸Šä¸‹æ–‡è¾¹æ¡†é¢œè‰²çš„è‰²å½©ç©ºé—´void CGContextSetStrokeColorSpace(CGContextRef cg_nullable c, CGColorSpaceRef cg_nullable space);//ä¸‹é¢è¿™äº›å‡½æ•°ä¸è®¾ç½®é¢œè‰²å’Œç»„ä»¶æ¨¡å—å±æ€§ç›¸å…³void CGContextSetFillColor(CGContextRef cg_nullable c, const CGFloat * cg_nullable components);void CGContextSetStrokeColor(CGContextRef cg_nullable c, const CGFloat * cg_nullable components);void CGContextSetFillPattern(CGContextRef cg_nullable c, CGPatternRef cg_nullable pattern, const CGFloat * cg_nullable components);void CGContextSetStrokePattern(CGContextRef cg_nullable c, CGPatternRef cg_nullable pattern, const CGFloat * cg_nullable components);void CGContextSetPatternPhase(CGContextRef cg_nullable c, CGSize phase);void CGContextSetGrayFillColor(CGContextRef cg_nullable c, CGFloat gray, CGFloat alpha);void CGContextSetGrayStrokeColor(CGContextRef cg_nullable c, CGFloat gray, CGFloat alpha);void CGContextSetRGBFillColor(CGContextRef cg_nullable c, CGFloat red, CGFloat green, CGFloat blue, CGFloat alpha);void CGContextSetRGBStrokeColor(CGContextRef cg_nullable c, CGFloat red, CGFloat green, CGFloat blue, CGFloat alpha);void CGContextSetCMYKFillColor(CGContextRef cg_nullable c, CGFloat cyan, CGFloat magenta, CGFloat yellow, CGFloat black, CGFloat alpha);void CGContextSetCMYKStrokeColor(CGContextRef cg_nullable c, CGFloat cyan, CGFloat magenta, CGFloat yellow, CGFloat black, CGFloat alpha);//å°†å½“å‰ä¸Šä¸‹æ–‡å†…å®¹æ¸²æŸ“è¿›é¢œè‰²intentä¸­void CGContextSetRenderingIntent(CGContextRef cg_nullable c, CGColorRenderingIntent intent);//åœ¨æŒ‡å®šåŒºåŸŸå†…æ¸²æŸ“å›¾ç‰‡void CGContextDrawImage(CGContextRef cg_nullable c, CGRect rect, CGImageRef cg_nullable image);//åœ¨åŒºåŸŸå†…è¿›è¡Œç“¦ç‰‡æ–¹å¼çš„å›¾ç‰‡æ¸²æŸ“void CGContextDrawTiledImage(CGContextRef cg_nullable c, CGRect rect, CGImageRef cg_nullable image);//è·å–ä¸Šä¸‹æ–‡æ¸²æŸ“çš„å›¾åƒè´¨é‡CGInterpolationQuality CGContextGetInterpolationQuality(CGContextRef cg_nullable c);//è®¾ç½®ä¸Šä¸‹æ–‡æ¸²æŸ“æ—¶çš„å›¾åƒè´¨é‡void CGContextSetInterpolationQuality(CGContextRef cg_nullable c, CGInterpolationQuality quality);//è®¾ç½®è¿›è¡Œé˜´å½±çš„æ¸²æŸ“void CGContextSetShadowWithColor(CGContextRef cg_nullable c, CGSize offset, CGFloat blur, CGColorRef __nullable color);void CGContextSetShadow(CGContextRef cg_nullable c, CGSize offset, CGFloat blur);//ç»˜åˆ¶çº¿æ€§æ¸å˜æ•ˆæœvoid CGContextDrawLinearGradient(CGContextRef cg_nullable c, CGGradientRef cg_nullable gradient, CGPoint startPoint, CGPoint endPoint, CGGradientDrawingOptions options);//ç»˜åˆ¶åŠå¾„æ¸å˜æ•ˆæœvoid CGContextDrawRadialGradient(CGContextRef cg_nullable c, CGGradientRef cg_nullable gradient, CGPoint startCenter, CGFloat startRadius, CGPoint endCenter, CGFloat endRadius, CGGradientDrawingOptions options);//ç”¨æ¸å˜å¡«å……ä¸Šä¸‹æ–‡çš„è£å‰ªåŒºåŸŸvoid CGContextDrawShading(CGContextRef cg_nullable c, cg_nullable CGShadingRef shading);//è®¾ç½®ç»˜åˆ¶çš„æ–‡å­—é—´è·void CGContextSetCharacterSpacing(CGContextRef cg_nullable c, CGFloat spacing);//è®¾ç½®ç»˜åˆ¶çš„æ–‡å­—ä½ç½®void CGContextSetTextPosition(CGContextRef cg_nullable c, CGFloat x, CGFloat y);//è·å–ç»˜åˆ¶çš„æ–‡å­—ä½ç½®CGPoint CGContextGetTextPosition(CGContextRef cg_nullable c);//è®¾ç½®æ–‡å­—transformå˜æ¢void CGContextSetTextMatrix(CGContextRef cg_nullable c, CGAffineTransform t);//è·å–æ–‡å­—çš„transformå˜æ¢CGAffineTransform CGContextGetTextMatrix(CGContextRef cg_nullable c);//è®¾ç½®æ–‡å­—çš„ç»˜åˆ¶æ¨¡å¼/* kCGTextFill, //å¡«å…… kCGTextStroke, //ç©ºå¿ƒ kCGTextFillStroke, //å¡«å……åŠ è¾¹æ¡† kCGTextInvisible, //åœ¨å¯æ˜¯åŒºåŸŸå†… kCGTextFillClip, //è£å‰ªå¡«å…… kCGTextStrokeClip, //è£å‰ªç»˜åˆ¶è¾¹æ¡† kCGTextFillStrokeClip,//è¿›è¡Œè£å‰ª kCGTextClip*/void CGContextSetTextDrawingMode(CGContextRef cg_nullable c, CGTextDrawingMode mode);//è®¾ç½®ç»˜åˆ¶æ–‡å­—çš„å­—ä½“void CGContextSetFont(CGContextRef cg_nullable c, CGFontRef cg_nullable font);//è®¾ç½®ç»˜åˆ¶æ–‡å­—çš„å­—å·void CGContextSetFontSize(CGContextRef cg_nullable c, CGFloat size);void CGContextShowGlyphsAtPositions(CGContextRef cg_nullable c, const CGGlyph * cg_nullable glyphs, const CGPoint * cg_nullable Lpositions, size_t count);//è®¾ç½®ç»˜åˆ¶çš„å­—ç¬¦é£æ ¼void CGContextShowGlyphsAtPositions(CGContextRef cg_nullable c, const CGGlyph * cg_nullable glyphs, const CGPoint * cg_nullable Lpositions, size_t count);//è¿›è¡ŒPDFé¡µçš„ç»˜åˆ¶void CGContextDrawPDFPage(CGContextRef cg_nullable c, CGPDFPageRef cg_nullable page);//å¼€å¯ä¸€ä¸ªæ–°çš„PDFé¡µvoid CGContextBeginPage(CGContextRef cg_nullable c, const CGRect * __nullable mediaBox);//ç»“æŸå½“å‰çš„PDFé¡µvoid CGContextEndPage(CGContextRef cg_nullable c);//å†…å­˜å¼•ç”¨åŠ 1CGContextRef cg_nullable CGContextRetain(CGContextRef cg_nullable c);//å†…å­˜å¼•ç”¨è®¡æ•°å‡1void CGContextRelease(CGContextRef cg_nullable c);//å°†ä¸Šä¸‹æ–‡ä¸­çš„å†…å®¹ç«‹å³æ¸²æŸ“åˆ°ç›®æ ‡void CGContextFlush(CGContextRef cg_nullable c);//å°†ä¸Šä¸‹æ–‡ä¸­çš„å†…å®¹è¿›è¡ŒåŒæ­¥void CGContextSynchronize(CGContextRef cg_nullable c);//æ˜¯å¦å¼€å¯æŠ—é”¯é½¿æ•ˆæœvoid CGContextSetShouldAntialias(CGContextRef cg_nullable c, bool shouldAntialias);//æ˜¯å¦å…è®¸æŠ—é”¯é½¿æ•ˆæœvoid CGContextSetAllowsAntialiasing(CGContextRef cg_nullable c, bool allowsAntialiasing);//æ˜¯å¦å¼€å¯å­—ä½“å¹³æ»‘void CGContextSetShouldSmoothFonts(CGContextRef cg_nullable c, bool shouldSmoothFonts);//æ˜¯å¦å…è®¸å­—ä½“å¹³æ»‘void CGContextSetAllowsFontSmoothing(CGContextRef cg_nullable c, bool allowsFontSmoothing);//è®¾ç½®æ˜¯å¦å¼€å¯subpixelçŠ¶æ€æ¸²æŸ“ç¬¦å·void CGContextSetShouldSubpixelPositionFonts(CGContextRef cg_nullable c, bool shouldSubpixelPositionFonts);//æ˜¯å¦å…è®¸subpixelçŠ¶æ€æ¸²æŸ“ç¬¦å·void CGContextSetAllowsFontSubpixelPositioning(CGContextRef cg_nullable c, bool allowsFontSubpixelPositioning);//è¿™ä¸ªæ–¹æ³•ä¼šåœ¨å½“å‰Contextä¸­å¼€å¯ä¸€ä¸ªé€æ˜çš„å±‚ ä¹‹åçš„ç»˜åˆ¶ä¼šç»˜åˆ¶åˆ°è¿™ä¸ªé€æ˜çš„å±‚ä¸Švoid CGContextBeginTransparencyLayer(CGContextRef cg_nullable c, CFDictionaryRef __nullable auxiliaryInfo);//åœ¨Contextä¸­å¼€å¯ä¸€ä¸ªé€æ˜çš„å±‚void CGContextBeginTransparencyLayerWithRect(CGContextRef cg_nullable c, CGRect rect, CFDictionaryRef __nullable auxInfo);//å®Œæˆé€æ˜å±‚çš„æ¸²æŸ“void CGContextEndTransparencyLayer(CGContextRef cg_nullable c);//è¿”å›ç”¨æˆ·æ§ä»¶çš„transformå˜æ¢CGAffineTransform CGContextGetUserSpaceToDeviceSpaceTransform(CGContextRef cg_nullable c);//å°†ç”¨æˆ·æ§ä»¶ç‚¹çš„åæ ‡è½¬æ¢ä¸ºè®¾å¤‡æ§ä»¶åæ ‡CGPoint CGContextConvertPointToDeviceSpace(CGContextRef cg_nullable c, CGPoint point);//å°†è®¾å¤‡ç©ºé—´çš„ç‚¹åæ ‡è½¬æ¢ä¸ºç”¨æˆ·ç©ºé—´çš„ç‚¹åæ ‡CGPoint CGContextConvertPointToUserSpace(CGContextRef cg_nullable c, CGPoint point);//å°†ç”¨äºç©ºé—´çš„å°ºå¯¸è½¬æ¢ä¸ºè®¾å¤‡ç©ºé—´çš„å°ºå¯¸CGSize CGContextConvertSizeToDeviceSpace(CGContextRef cg_nullable c, CGSize size);//å°†è®¾å¤‡ç©ºé—´çš„å°ºå¯¸è½¬æ¢ä¸ºç”¨æˆ·ç©ºé—´çš„å°ºå¯¸CGSize CGContextConvertSizeToUserSpace(CGContextRef cg_nullable c, CGSize size);//å°†ç”¨æˆ·ç©ºé—´çš„rectè½¬æ¢ä¸ºè®¾å¤‡ç©ºé—´çš„rectCGRect CGContextConvertRectToDeviceSpace(CGContextRef cg_nullable c, CGRect rect);//å°†è®¾å¤‡ç©ºé—´çš„rectè½¬æ¢ä¸ºç”¨æˆ·ç©ºé—´çš„rectCGRect CGContextConvertRectToUserSpace(CGContextRef cg_nullable c, CGRect rect);//ä¸‹é¢è¿™äº›æ–¹æ³•å·²ç»è¢«å¼ƒç”¨ //è®¾ç½®å­—ä½“ ä½¿ç”¨CoreTextç›¸å…³çš„APIä»£æ›¿void CGContextSelectFont(CGContextRef cg_nullable c, const char * cg_nullable name, CGFloat size, CGTextEncoding textEncoding);//ç»˜åˆ¶æ–‡æœ¬ ä½¿ç”¨CoreTextç›¸å…³APIä»£æ›¿void CGContextShowText(CGContextRef cg_nullable c, const char * cg_nullable string, size_t length);//åœ¨ç›¸åº”ä½ç½®ç»˜åˆ¶æ–‡æœ¬ ä½¿ç”¨CoreTextç›¸å…³APIä»£æ›¿void CGContextShowTextAtPoint(CGContextRef cg_nullable c, CGFloat x, CGFloat y, const char * cg_nullable string, size_t length);//è¿›è¡Œç¬¦å·çš„ç»˜åˆ¶ ä½¿ç”¨CoreTextç›¸å…³APIä»£æ›¿void CGContextShowGlyphs(CGContextRef cg_nullable c, const CGGlyph * __nullable g, size_t count);//åœ¨ç›¸åº”ä½ç½®ç»˜åˆ¶ç¬¦å· ä½¿ç”¨CoreTextç›¸å…³APIä»£æ›¿void CGContextShowGlyphsAtPoint(CGContextRef cg_nullable c, CGFloat x, CGFloat y, const CGGlyph * __nullable glyphs, size_t count);//ç»˜åˆ¶ç¬¦å· ä½¿ç”¨ä¸€ä¸ªå›ºå®šçš„ç¼©è¿›å€¼ ä½¿ç”¨CoreTextç›¸å…³APIä»£æ›¿void CGContextShowGlyphsWithAdvances(CGContextRef cg_nullable c, const CGGlyph * __nullable glyphs, const CGSize * __nullable advances, size_t count);//è¿›è¡ŒPDFæ–‡æ¡£ç»˜åˆ¶ CGPDFPageç›¸å…³APIä»£æ›¿void CGContextDrawPDFDocument(CGContextRef cg_nullable c, CGRect rect, CGPDFDocumentRef cg_nullable document, int page); ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSå¼€å‘CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¹‹ä¸€â€”â€”CGPathçš„åº”ç”¨","slug":"259iOSå¼€å‘CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¹‹ä¸€â€”â€”CGPathçš„åº”ç”¨","date":"2016-10-10T16:00:00.000Z","updated":"2021-07-12T02:33:11.817Z","comments":true,"path":"2016/10/11/259iOSå¼€å‘CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¹‹ä¸€â€”â€”CGPathçš„åº”ç”¨/","link":"","permalink":"http://huishao.cc/2016/10/11/259iOSå¼€å‘CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¹‹ä¸€â€”â€”CGPathçš„åº”ç”¨/","excerpt":"","text":"iOSå¼€å‘CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ä¹‹ä¸€â€”â€”CGPathçš„åº”ç”¨ä¸€ã€å¼•è¨€CoreGraphicsæ ¸å¿ƒå›¾å½¢æ¡†æ¶ç›¸è¾ƒäºUIKitæ¡†æ¶æ›´åŠ åäºåº•å±‚ã€‚åœ¨Objective-Cå·¥ç¨‹ä¸­ï¼ŒCoreGraphicså…¶ä¸­æ–¹æ³•éƒ½æ˜¯é‡‡ç”¨Cè¯­è¨€é£æ ¼è¿›è¡Œç¼–å†™çš„ï¼ŒåŒæ—¶å…¶å¹¶ä¸æ”¯æŒObjective-Cçš„è‡ªåŠ¨å¼•ç”¨è®¡æ•°ï¼Œåœ¨ä½¿ç”¨è¿™ä¸ªæ¡†æ¶è¿›è¡Œç¼–ç¨‹æ—¶ï¼Œå¼€å‘è€…è¦æ‰‹åŠ¨å¯¹å†…å­˜è¿›è¡Œç®¡ç†ã€‚åœ¨Swiftå·¥ç¨‹ä¸­ï¼ŒAppleä½¿ç”¨Swiftè¯­è¨€å¯¹CoreGraphicsçŸ¿å»ºè¿›è¡Œäº†é‡æ„ï¼Œå°†CGPathï¼ŒCGMutablePahtç­‰éƒ½é‡æ–°å®šä¹‰ä¸ºäº†ç±»ã€‚CGPathå¯ä»¥ç†è§£ä¸ºå›¾å½¢çš„è·¯å¾„ï¼Œåœ¨Objective-Cå·¥ç¨‹ä¸­ï¼Œå…¶å®ç³»ç»Ÿå®šä¹‰çš„ä¸€ä¸ªå†…éƒ¨ç»“æ„ä½“ï¼Œå¼€å‘è€…ä¸å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œå¼€å‘è€…CGPathRefå’ŒCGMutablePathRefåˆ«åä½œä¸ºCGPathçš„å¼•ç”¨ï¼Œå®é™…ä¸Šï¼ŒCGPathRefå’ŒCGMutablePathReféƒ½æ˜¯CGPathç»“æ„ä½“ç±»å‹çš„æŒ‡é’ˆï¼Œä¸åŒçš„æ˜¯ä¸€ä¸ªæ˜¯constç±»å‹ä¸å¯ä¿®æ”¹çš„ï¼Œä¸€ä¸ªæ˜¯å¯ä»¥ä¿®æ”¹çš„ï¼Œç³»ç»Ÿå®šä¹‰å¦‚ä¸‹ï¼š 12typedef struct CGPath *CGMutablePathRef;typedef const struct CGPath *CGPathRef; äºŒã€CGPathåˆ›å»ºä¸å†…å­˜ç®¡ç†çš„ç›¸å…³æ–¹æ³•å…³äºCGPathçš„åˆ›å»ºä¸å†…å­˜ç®¡ç†çš„ç›¸å…³æ–¹æ³•ï¼Œåˆ—ä¸¾å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455//è¿™ä¸ªæ–¹æ³•è·å–CGPathç±»åœ¨CoreGraphicsæ¡†æ¶ä¸­çš„å”¯ä¸€æ ‡è¯†//CFTypeID å®é™…ä¸Šæ˜¯æ— ç¬¦å·æ•´å‹çš„åˆ«å å…¶ä¸ºCoreGraphicsæ¡†æ¶ä¸­æ¯ä¸ªç±»éƒ½å®šä¹‰äº†ä¸€ä¸ªæ ‡è¯† CGPathä¸º280CFTypeID CGPathGetTypeID(void);//è¿™ä¸ªæ–¹æ³•åˆ›å»ºä¸€ä¸ªsrtuct CGPath * æŒ‡é’ˆ å¯ä»¥ç†è§£ä¸ºå¯å˜çš„CGPathç±»CGMutablePathRef CGPathCreateMutable(void);//è¿™ä¸ªæ–¹æ³•é€šè¿‡ä¸€ä¸ªCGPathRefæ¥åˆ›å»ºCGPathRef CGPathRef CGPathCreateCopy(CGPathRef path);//è¿™ä¸ªæ–¹æ³•åœ¨é€šè¿‡CGPathRefåˆ›å»ºCGPathRefæ—¶ä¼šå°†å¾—è·¯å¾„è¿›è¡Œtransformå˜æ¢åè¿”å›CGPathRef CGPathCreateCopyByTransformingPath(CGPathRef path, const CGAffineTransform * transform);//è¿™ä¸ªæ–¹æ³•é€šè¿‡CGPathRefåˆ›å»ºå¯å˜çš„CGMutablePathRefCGMutablePathRef CGPathCreateMutableCopy(CGPathRef path);//æ„ä¹‰åŒä¸Šï¼Œåœ¨åˆ›å»ºçš„CGMutablePathRefåŸºç¡€ä¸Šè¿›è¡Œä¸€æ¬¡transformå˜æ¢åœ¨è¿”å›CGMutablePathRef CGPathCreateMutableCopyByTransformingPath(CGPathRef path, const CGAffineTransform * transform)//è¿™ä¸ªæ–¹æ³•å°†åˆ›å»ºçŸ©å½¢è·¯å¾„ ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºè¦ç»˜åˆ¶çš„çŸ©å½¢åŒºåŸŸ ç¬¬2ä¸ªå‚æ•°ä¸ºè¦è¿›è¡Œçš„transformå˜æ¢CGPathRef CGPathCreateWithRect(CGRect rect,const CGAffineTransform * transform);//è¿™ä¸ªæ–¹æ³•å°†åˆ›å»ºæ¤­åœ†å½¢è·¯å¾„CGPathRef CGPathCreateWithEllipseInRect(CGRect rect, const CGAffineTransform * transform);//è¿™ä¸ªæ–¹æ³•ç”¨äºåˆ›å»ºåœ†è§’çŸ©å½¢è·¯å¾„/*rect :ç»˜åˆ¶çš„çŸ©å½¢åŒºåŸŸcornerWidth: æ¨ªå‘åœ†è§’å°ºå¯¸cornerHeight:çºµå‘åœ†è§’å°ºå¯¸*/CGPathRef CGPathCreateWithRoundedRect(CGRect rect, CGFloat cornerWidth, CGFloat cornerHeight,const CGAffineTransform * transform);//è¿™ä¸ªæ–¹æ³•ç”¨äºåˆ›å»ºè™šçº¿è·¯å¾„/*è¿™ä¸ªæ–¹æ³•ç•¥å¾®æœ‰äº›å¤æ‚ å…¶ä¸­å‚æ•°æ„ä¹‰å¦‚ä¸‹ï¼špathï¼šè¦è¿›è¡Œè™šçº¿åŒ–çš„è·¯å¾„phaseï¼šä»lengthsæ•°ç»„çš„ç¬¬å‡ éƒ¨åˆ†å¼€å§‹ç»˜åˆ¶è™šçº¿lengths:Cé£æ ¼çš„æ•°ç»„ å…¶ä¸­ä¸ºCGFloatå€¼ è¡¨ç¤ºæ¯æ®µè™šçº¿çš„ç»˜åˆ¶é•¿åº¦ ä¾‹å¦‚ä¼ å…¥æ•°ç»„ä¸º&#123;10,5&#125;ï¼Œåˆ™è™šçº¿çš„å…ˆç»˜åˆ¶é•¿åº¦ä¸º10çš„å®çº¿ åœ¨ç»˜åˆ¶é•¿åº¦ä¸º5çš„ç©ºç™½ åœ¨è¿›è¡Œå¾ªç¯countï¼šè¿™ä¸ªå‚æ•°éœ€è¦è®¾ç½®ä¸ºlengthsæ•°ç»„çš„é•¿åº¦*/CGPathRef CGPathCreateCopyByDashingPath(CGPathRef path, const CGAffineTransform * transform,CGFloat phase, const CGFloat *lengths, size_t count);//é€šè¿‡CGPathRefæ¥åˆ›å»ºæ–œçº¿/*lineWidth:è®¾ç½®çº¿å®½lineCap:è®¾ç½®çº¿å¸½é£æ ¼ å¯é€‰å‚æ•°å¦‚ä¸‹ï¼štypedef CF_ENUM(int32_t, CGLineCap) &#123; kCGLineCapButt, é»˜è®¤çš„é£æ ¼ çº¿çš„ç«¯ç‚¹ç²¾ç¡®åˆ°ç‚¹ kCGLineCapRound, åœ†æ»‘çš„ç«¯ç‚¹ çº¿çš„ç«¯ç‚¹ä¸ºåŠå¾„ä¸ºçº¿å®½ä¸€åŠçš„åœ†å¼§ kCGLineCapSquare å°–é”çš„è¿‡æ¸¡&#125;;lineJoinï¼šè®¾ç½®è¿æ¥çº¿å¤„çš„é£æ ¼ å¯é€‰å‚æ•°å¦‚ä¸‹ï¼štypedef CF_ENUM(int32_t, CGLineJoin) &#123; kCGLineJoinMiter, //ä»¥é”‹åˆ©çš„è§’ä½œä¸ºè¿æ¥çº¿çš„è½¬æŠ˜ kCGLineJoinRound, //ä»¥åœ†è§’ä½œä¸ºè¿æ¥çº¿çš„è½¬æŠ˜ kCGLineJoinBevel //è´å¡å°”é£æ ¼çš„è½¬æŠ˜&#125;;miterLimitï¼šè¿™ä¸ªå€¼å°†å†³å®šçº¿è¿æ¥å¤„è§’çš„é”‹åˆ©ç¨‹åº¦*/CGPathRef CGPathCreateCopyByStrokingPath(CGPathRef cg_nullable path, const CGAffineTransform * __nullable transform,CGFloat lineWidth, CGLineCap lineCap,CGLineJoin lineJoin, CGFloat miterLimit);//æ‰‹åŠ¨ä½¿CGPathRefå¼•ç”¨è®¡æ•°+1CGPathRef CGPathRetain(CGPathRef cg_nullable path);//æ‰‹åŠ¨ä½¿CGPathRefå¼•ç”¨è®¡æ•°-1void CGPathRelease(CGPathRef cg_nullable path); è‡ªå®šä¹‰ä¸€ä¸ªViewè§†å›¾ï¼Œåœ¨å…¶drawRectæ–¹æ³•ä¸­è¿›è¡Œç•Œé¢çš„ç»˜åˆ¶ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718- (void)drawRect:(CGRect)rect &#123; //è·å–å½“å‰ç»˜å›¾ä¸Šä¸‹æ–‡ CGContextRef contextRef = UIGraphicsGetCurrentContext(); CGPoint center = CGPointMake(rect.size.width/2, rect.size.height/2); //åˆ›å»ºåœ†è§’çŸ©å½¢è·¯å¾„ CGPathRef pathRef = CGPathCreateWithRoundedRect(CGRectMake(center.x-50, center.y-50, 100, 100), 30, 10, nil); //å°†è·¯å¾„è™šçº¿åŒ– CGFloat floats[] = &#123;10,5&#125;; pathRef = CGPathCreateCopyByDashingPath(pathRef, nil, 0, floats, 2); //è®¾ç½®ç»˜åˆ¶é¢œè‰² [[UIColor redColor] setStroke]; //å°†è·¯å¾„æ·»åŠ åˆ°ç»˜å›¾ä¸Šä¸‹æ–‡ä¸­ CGContextAddPath(contextRef, pathRef); //è¿›è¡Œç»˜åˆ¶ CGContextDrawPath(contextRef, kCGPathStroke); //å†…å­˜é‡Šæ”¾ CGPathRelease(pathRef);&#125; è¿è¡Œåæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¸‰ã€CGPathçš„è·¯å¾„ç»˜åˆ¶ç›¸å…³æ–¹æ³•123456789101112131415161718192021222324252627282930313233343536373839404142434445//å°†è·¯å¾„ç§»åŠ¨åˆ°ä¸€ä¸ªç‚¹ä½œä¸ºèµ·ç‚¹void CGPathMoveToPoint(CGMutablePathRef path,const CGAffineTransform * m, CGFloat x, CGFloat y);//å°†è·¯å¾„ç§»åŠ¨åˆ°æŸä¸ªç‚¹ç”»å‡ºä¸€æ¡çº¿void CGPathAddLineToPoint(CGMutablePathRef path,const CGAffineTransform * m, CGFloat x, CGFloat y);//å‘è·¯å¾„ä¸­æ·»åŠ ä¸€æ®µäºŒæ¬¡è´å¡å°”æ›²çº¿/*cpx:æ§åˆ¶ç‚¹çš„xåæ ‡cpy:æ§åˆ¶ç‚¹çš„yåæ ‡*/void CGPathAddQuadCurveToPoint(CGMutablePathRef path,const CGAffineTransform * m, CGFloat cpx, CGFloat cpy,CGFloat x, CGFloat y);//æ·»åŠ ä¸€æ®µä¸‰æ¬¡è´å¡å°”æ›²çº¿void CGPathAddCurveToPoint(CGMutablePathRef path,const CGAffineTransform * m, CGFloat cp1x, CGFloat cp1y,CGFloat cp2x, CGFloat cp2y, CGFloat x, CGFloat y);//è¿™ä¸ªæ–¹æ³•ç”¨äºé—­åˆè·¯å¾„ è°ƒç”¨è¿™ä¸ªæ–¹æ³•å è·¯å¾„æœ€åçš„ç«¯ç‚¹å°†å’Œèµ·ç‚¹é—­åˆvoid CGPathCloseSubpath(CGMutablePathRef path);//å‘è·¯å¾„ä¸­è¿½åŠ ä¸€ä¸ªçŸ©å½¢void CGPathAddRect(CGMutablePathRef path, const CGAffineTransform * m, CGRect rect);//å‘è·¯å¾„ä¸­è¿½åŠ ä¸€ç»„çŸ©å½¢void CGPathAddRects(CGMutablePathRef path, const CGAffineTransform * m, const CGRect * rects,size_t count);//å‘è·¯å¾„ä¸­è¿½åŠ ä¸€ç»„çº¿æ¡void CGPathAddLines(CGMutablePathRef path, const CGAffineTransform * m, const CGPoint * __nullable points, size_t count);//æ·»åŠ ä¸€ç»„æ¤­åœ†void CGPathAddEllipseInRect(CGMutablePathRef cg_nullable path,const CGAffineTransform * m, CGRect rect);//å‘è·¯å¾„ä¸­è¿½åŠ ä¸€ç»„åœ†å¼§/*x:åœ†å¿ƒxåæ ‡y:åœ†å¿ƒyåæ ‡radius:å¼§çº¿åŠå¾„startAngle:èµ·å§‹è§’åº¦endAngle:ç»ˆæ­¢è§’åº¦clockwise:æ˜¯å¦é¡ºæ—¶é’ˆç»˜åˆ¶*/void CGPathAddArc(CGMutablePathRef path, const CGAffineTransform * m, CGFloat x, CGFloat y, CGFloat radius, CGFloat startAngle, CGFloat endAngle, bool clockwise);//å‘è·¯å¾„ä¸­è¿½åŠ ä¸€ç»„åœ†å¼§/*x:åœ†å¿ƒxåæ ‡y:åœ†å¿ƒyåæ ‡radius:å¼§çº¿åŠå¾„startAngle:èµ·å§‹è§’åº¦delta:åœ†å¼§ç»˜åˆ¶çš„é•¿åº¦ ä¸ºå¼§åº¦åˆ¶ 2Ï€ä¸ºæ•´ä¸ªåœ†*/void CGPathAddRelativeArc(CGMutablePathRef path, const CGAffineTransform * __nullable matrix, CGFloat x, CGFloat y, CGFloat radius, CGFloat startAngle, CGFloat delta);//å‘è·¯å¾„ä¸­è¿½åŠ ä¸€æ®µåœ†å¼§ å¼§çº¿æ˜¯ä»¥(x1,y1)åˆ°(x2,y2)ä¸ºåˆ‡çº¿çš„å¼§çº¿void CGPathAddArcToPoint(CGMutablePathRef path,const CGAffineTransform * m, CGFloat x1, CGFloat y1, CGFloat x2, CGFloat y2, CGFloat radius);//å‘è·¯å¾„ä¸­è¿½åŠ ä¸€æ®µè·¯å¾„void CGPathAddPath(CGMutablePathRef path1,const CGAffineTransform * m, CGPathRef path2); ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415- (void)drawRect:(CGRect)rect &#123; CGContextRef contextRef = UIGraphicsGetCurrentContext(); CGPoint center = CGPointMake(rect.size.width/2, rect.size.height/2); CGMutablePathRef pathRef = CGPathCreateMutable(); CGPathMoveToPoint(pathRef, nil, center.x, center.y-50); CGPathAddLineToPoint(pathRef, nil, center.x+100, center.y); CGPathAddQuadCurveToPoint(pathRef, nil, 0, 0, center.x+100, center.y-100); CGPathAddRelativeArc(pathRef, nil, 100, 100, 50, 0, M_PI); CGPathCloseSubpath(pathRef); [[UIColor redColor] setStroke]; CGContextAddPath(contextRef, pathRef); CGContextDrawPath(contextRef, kCGPathStroke); CGPathRelease(pathRef); CGContextRelease(contextRef);&#125; æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å››ã€CGPathä¸­çš„å…¶ä»–æ–¹æ³•æ±‡æ€»123456789101112//åˆ¤æ–­æŸä¸ªè·¯å¾„æ˜¯å¦ä¸ºç©ºbool CGPathIsEmpty(CGPathRef path);//åˆ¤æ–­æŸä¸ªè·¯å¾„æ˜¯å¦ä¸ºæŸä¸ªçŸ©å½¢bool CGPathIsRect(CGPathRef cg_nullable path, CGRect * rect);//è·å–æŸä¸ªè·¯å¾„å½“å‰ç»˜åˆ¶æ‰€åœ¨çš„ç‚¹CGPoint CGPathGetCurrentPoint(CGPathRef path);//è·å–æŸä¸ªè·¯å¾„åŒ…å«æ‰€æœ‰ç‚¹çš„å°ºå¯¸CGPathGetBoundingBox(CGPathRef cg_nullable path);//è·å–æŸä¸ªè·¯å¾„çš„å°ºå¯¸CGRect CGPathGetPathBoundingBox(CGPathRef path);//åˆ¤æ–­è·¯å¾„æ˜¯å¦åŒ…å«æŸä¸ªç‚¹bool CGPathContainsPoint(CGPathRef path, const CGAffineTransform * m, CGPoint point, bool eoFill); äº”ã€å…³äºCGPathElementç»“æ„ä½“å½“æ¯æ¬¡å‘CGPathè·¯å¾„åšæ“ä½œæ—¶ï¼Œæ“ä½œçš„è¿‡ç¨‹å®é™…ä¸Šéƒ½ä¼šè¢«è®°å½•ä¸‹æ¥ï¼Œæ¯ä¸ªæ“ä½œè¡Œä¸ºèŠ‚ç‚¹éƒ½è¢«å°è£…ä¸ºäº†CGPathElementç»“æ„ä½“ï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹æ³•æ¥è·å–æ‰€æœ‰æ“ä½œè¡Œä¸ºï¼š 1CGPathApply(pathRef, nil, func); CGPathApply()æ–¹æ³•ä¸­çš„ç¬¬3ä¸ªå‚æ•°ä¸ºä¸€ä¸ªå‡½æ•°æŒ‡é’ˆï¼Œç¤ºä¾‹Cå‡½æ•°å®ç°å¦‚ä¸‹ï¼š 1234void func(void * __nullable info, const CGPathElement * element)&#123; printf(\"%d\",(*element).type);&#125; CGPathElementç»“æ„ä½“çš„å®šä¹‰å¦‚ä¸‹ï¼š 12345678910111213141516171819struct CGPathElement &#123; //æ“ä½œèŠ‚ç‚¹çš„ç±»å‹ CGPathElementType type; //å¯¹åº”çš„ç‚¹é›† CGPoint * points;&#125;;//CGPathElementTypeæšä¸¾å®šä¹‰å¦‚ä¸‹typedef CF_ENUM(int32_t, CGPathElementType) &#123; //ç§»åŠ¨åˆ°ç‚¹çš„æ“ä½œè¡Œä¸º kCGPathElementMoveToPoint, //æ·»åŠ çº¿çš„æ“ä½œè¡Œä¸º kCGPathElementAddLineToPoint, //æ·»åŠ äºŒæ¬¡è´å¡å°”æ›²çº¿çš„æ“ä½œè¡Œä¸º kCGPathElementAddQuadCurveToPoint, //æ·»åŠ ä¸‰æ¬¡è´å¡å°”æ›²çº¿çš„æ“ä½œè¡Œä¸º kCGPathElementAddCurveToPoint, //é—­åˆè·¯å¾„çš„æ“ä½œè¡Œä¸º kCGPathElementCloseSubpath&#125;; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOS10ä¸­æ›´åŠ çµæ´»çš„è‰²å½©API","slug":"258iOS10ä¸­æ›´åŠ çµæ´»çš„è‰²å½©API","date":"2016-10-08T16:00:00.000Z","updated":"2021-07-12T02:32:10.068Z","comments":true,"path":"2016/10/09/258iOS10ä¸­æ›´åŠ çµæ´»çš„è‰²å½©API/","link":"","permalink":"http://huishao.cc/2016/10/09/258iOS10ä¸­æ›´åŠ çµæ´»çš„è‰²å½©API/","excerpt":"","text":"iOS10ä¸­æ›´åŠ çµæ´»çš„è‰²å½©APIä¸€ã€åˆ›å»ºsRGBæ¨¡å¼çš„è‰²å½©åœ¨iOS10ä¸­ï¼ŒUIColorç±»ä¸­æ–°å¢åŠ äº†ä¸¤ä¸ªæ–¹æ³•ï¼Œç”¨æ¥åˆ›å»ºsRGBæ¨¡å¼çš„è‰²å½©ã€‚ä¸RGBç›¸æ¯”ï¼ŒsRGBæ˜¯æ›´åŠ æ ‡å‡†çš„è‰²å½©æ¨¡å¼ï¼ŒRGBè‰²å½©åœ¨ä¸åŒè®¾å¤‡ä¸Šå¯èƒ½å­˜åœ¨é¢œè‰²åå·®ï¼ŒsRGBåˆ™æ›´åŠ ç²¾å‡†ä½†åŒæ—¶è‰²åŸŸèŒƒå›´ä¹Ÿæ›´çª„ä¸€äº›ã€‚UIColorä¸­æ–°æ·»åŠ çš„æ–¹æ³•å¦‚ä¸‹ï¼š 1234//ç±»æ–¹æ³•åˆ›å»ºsRGBæ¨¡å¼è‰²å½©+ (UIColor *)colorWithDisplayP3Red:(CGFloat)displayP3Red green:(CGFloat)green blue:(CGFloat)blue alpha:(CGFloat)alpha NS_AVAILABLE_IOS(10_0);//åˆå§‹åŒ–æ–¹æ³•åˆ›å»ºsRGBæ¨¡å¼è‰²å½©- (UIColor *)initWithDisplayP3Red:(CGFloat)displayP3Red green:(CGFloat)green blue:(CGFloat)blue alpha:(CGFloat)alpha NS_AVAILABLE_IOS(10_0); äºŒã€å…¨å±€çš„è®¾ç½®è‰²å½©é£æ ¼ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒiOSç³»ç»Ÿä¼šæ ¹æ®ç”¨æˆ·æ‰€åœ¨ç¯å¢ƒçš„å…‰çº¿è¿›è¡Œå±å¹•è‰²å½©çš„è°ƒèŠ‚ï¼Œåœ¨iOS10ç³»ç»Ÿä¸­ï¼Œå¼€å‘è€…å¯ä»¥åœ¨info.plistæ–‡ä»¶ä¸­å…¨å±€çš„é…ç½®è‰²å½©é£æ ¼æ¥è®¾ç½®å¤–ç•Œå…‰çº¿å¯¹APPå†…è‰²å½©çš„å½±å“ç¨‹åº¦ã€‚ åœ¨info.plistæ–‡ä»¶ä¸­å¯ä»¥æ·»åŠ å¦‚ä¸‹é”®ï¼š White Point Adaptivity Style è¿™ä¸ªé”®å¯ä»¥è®¾ç½®çš„å€¼åˆ—ä¸¾å¦‚ä¸‹ï¼š Standard White Point Adaptivity Style æ ‡å‡†è‰²å½©æ¨¡å¼ Reading White Point Adaptivity Style é˜…è¯»è‰²å½©æ¨¡å¼ Photo White Point Adaptivity Style ç…§ç‰‡è‰²å½©æ¨¡å¼ Video White Point Adaptivity Style è§†é¢‘è‰²å½©æ¨¡å¼ Game White Point Adaptivity Style æ¸¸æˆè‰²å½©æ¨¡å¼ ä¸Šé¢å‡ ç§æ¨¡å¼ä»ä¸Šåˆ°ä¸‹ï¼Œå¯¹è‰²å½©çš„ä¿çœŸåº¦ä¾æ¬¡æé«˜ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOS10ä¸“é¢˜","slug":"iOS10ä¸“é¢˜","permalink":"http://huishao.cc/categories/iOS10ä¸“é¢˜/"}],"tags":[],"keywords":[{"name":"iOS10ä¸“é¢˜","slug":"iOS10ä¸“é¢˜","permalink":"http://huishao.cc/categories/iOS10ä¸“é¢˜/"}]},{"title":"iOS10è¯­éŸ³è¯†åˆ«æ¡†æ¶SpeechFrameworkåº”ç”¨","slug":"257iOS10è¯­éŸ³è¯†åˆ«æ¡†æ¶SpeechFrameworkåº”ç”¨","date":"2016-09-24T16:00:00.000Z","updated":"2021-07-12T02:31:13.871Z","comments":true,"path":"2016/09/25/257iOS10è¯­éŸ³è¯†åˆ«æ¡†æ¶SpeechFrameworkåº”ç”¨/","link":"","permalink":"http://huishao.cc/2016/09/25/257iOS10è¯­éŸ³è¯†åˆ«æ¡†æ¶SpeechFrameworkåº”ç”¨/","excerpt":"","text":"iOS10è¯­éŸ³è¯†åˆ«æ¡†æ¶SpeechFrameworkåº”ç”¨ä¸€ã€å¼•è¨€iOS10ç³»ç»Ÿæ˜¯ä¸€ä¸ªè¾ƒæœ‰çªç ´æ€§çš„ç³»ç»Ÿï¼Œå…¶åœ¨Messageï¼ŒNotificationç­‰æ–¹é¢éƒ½å¼€æ”¾äº†å¾ˆå¤šå®ç”¨æ€§çš„å¼€å‘æ¥å£ã€‚æœ¬ç¯‡åšå®¢å°†ä¸»è¦æ¢è®¨iOS10ä¸­æ–°å¼•å…¥çš„SpeechFrameworkæ¡†æ¶ã€‚æœ‰ä¸ªè¿™ä¸ªæ¡†æ¶ï¼Œå¼€å‘è€…å¯ä»¥ååˆ†å®¹æ˜“çš„ä¸ºè‡ªå·±çš„Appæ·»åŠ è¯­éŸ³è¯†åˆ«åŠŸèƒ½ï¼Œä¸éœ€è¦å†ä¾èµ–äºå…¶ä»–ç¬¬ä¸‰æ–¹çš„è¯­éŸ³è¯†åˆ«æœåŠ¡ï¼Œå¹¶ä¸”ï¼ŒAppleçš„Siriåº”ç”¨çš„å¼ºå¤§ä¹Ÿè¯æ˜äº†Appleçš„è¯­éŸ³æœåŠ¡æ˜¯è¶³å¤Ÿå¼ºå¤§çš„ï¼Œä¸é€šè¿‡ç¬¬ä¸‰æ–¹ï¼Œä¹Ÿå¤§å¤§å¢å¼ºäº†ç”¨æˆ·çš„å®‰å…¨æ€§ã€‚ äºŒã€SpeechFrameworkæ¡†æ¶ä¸­çš„é‡è¦ç±»SpeechFrameworkæ¡†æ¶æ¯”è¾ƒè½»é‡çº§ï¼Œå…¶ä¸­çš„ç±»å¹¶ä¸ååˆ†å†—æ‚ï¼Œåœ¨å­¦ä¹ SpeechFrameworkæ¡†æ¶å‰ï¼Œæˆ‘ä»¬éœ€è¦å¯¹å…¶ä¸­ç±»ä¸ç±»ä¸ç±»ä¹‹é—´çš„å…³ç³»æœ‰ä¸ªå¤§è‡´çš„ç†Ÿæ‚‰äº†è§£ã€‚ SFSpeechRecognizerï¼šè¿™ä¸ªç±»æ˜¯è¯­éŸ³è¯†åˆ«çš„æ“ä½œç±»ï¼Œç”¨äºè¯­éŸ³è¯†åˆ«ç”¨æˆ·æƒé™çš„ç”³è¯·ï¼Œè¯­è¨€ç¯å¢ƒçš„è®¾ç½®ï¼Œè¯­éŸ³æ¨¡å¼çš„è®¾ç½®ä»¥åŠå‘AppleæœåŠ¡å‘é€è¯­éŸ³è¯†åˆ«çš„è¯·æ±‚ã€‚ SFSpeechRecognitionTaskï¼šè¿™ä¸ªç±»æ˜¯è¯­éŸ³è¯†åˆ«æœåŠ¡è¯·æ±‚ä»»åŠ¡ç±»ï¼Œæ¯ä¸€ä¸ªè¯­éŸ³è¯†åˆ«è¯·æ±‚éƒ½å¯ä»¥æŠ½è±¡ä¸ºä¸€ä¸ªSFSpeechRecognitionTaskå®ä¾‹ï¼Œå…¶ä¸­SFSpeechRecognitionTaskDelegateåè®®ä¸­çº¦å®šäº†è®¸å¤šè¯·æ±‚ä»»åŠ¡è¿‡ç¨‹ä¸­çš„ç›‘å¬æ–¹æ³•ã€‚ SFSpeechRecognitionRequest:è¯­éŸ³è¯†åˆ«è¯·æ±‚ç±»ï¼Œéœ€è¦é€šè¿‡å…¶å­ç±»æ¥è¿›è¡Œå®ä¾‹åŒ–ã€‚ SFSpeechURLRecognitionRequestï¼šé€šè¿‡éŸ³é¢‘URLæ¥åˆ›å»ºè¯­éŸ³è¯†åˆ«è¯·æ±‚ã€‚ SFSpeechAudioBufferRecognitionRequest:é€šè¿‡éŸ³é¢‘æµæ¥åˆ›å»ºè¯­éŸ³è¯†åˆ«è¯·æ±‚ã€‚ SFSpeechRecognitionResultï¼šè¯­éŸ³è¯†åˆ«è¯·æ±‚ç»“æœç±»ã€‚ SFTranscriptionï¼šè¯­éŸ³è½¬æ¢åçš„ä¿¡æ¯ç±»ã€‚ SFTranscriptionSegmentï¼šè¯­éŸ³è½¬æ¢ä¸­çš„éŸ³é¢‘èŠ‚ç‚¹ç±»ã€‚ äº†è§£äº†ä¸Šè¿°ç±»çš„ä½œç”¨äºå…¶ä¹‹é—´çš„è”ç³»ï¼Œä½¿ç”¨SpeechFrameworkæ¡†æ¶å°†ååˆ†å®¹æ˜“ã€‚ ä¸‰ã€ç”³è¯·ç”¨æˆ·è¯­éŸ³è¯†åˆ«æƒé™ä¸è¿›è¡Œè¯­éŸ³è¯†åˆ«è¯·æ±‚å¼€å‘è€…è‹¥è¦åœ¨è‡ªå·±çš„Appä¸­ä½¿ç”¨è¯­éŸ³è¯†åˆ«åŠŸèƒ½ï¼Œéœ€è¦è·å–ç”¨æˆ·çš„åŒæ„ã€‚é¦–å…ˆéœ€è¦åœ¨å·¥ç¨‹çš„Info.plistæ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ªPrivacy-Speech Recognition Usage Descriptioné”®ï¼Œå…¶å®éœ€è¦å¯¹åº”ä¸€ä¸ªStringç±»å‹çš„å€¼ï¼Œè¿™ä¸ªå€¼å°†ä¼šåœ¨ç³»ç»Ÿè·å–æƒé™çš„è­¦å‘Šæ¡†ä¸­æ˜¾ç¤ºï¼ŒInfo.plistæ–‡ä»¶å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä½¿ç”¨SFSpeechRecognizeç±»çš„requestAuthorizationæ–¹æ³•æ¥è¿›è¡Œç”¨æˆ·æƒé™çš„ç”³è¯·ï¼Œç”¨æˆ·çš„åé¦ˆç»“æœä¼šåœ¨è¿™ä¸ªæ–¹æ³•çš„å›è°ƒblockä¸­ä¼ å…¥ï¼Œå¦‚ä¸‹ï¼š 123//ç”³è¯·ç”¨æˆ·è¯­éŸ³è¯†åˆ«æƒé™[SFSpeechRecognizer requestAuthorization:^(SFSpeechRecognizerAuthorizationStatus status) &#123; &#125;]; SFSpeechRecognizerAuthorzationStatusæšä¸¾ä¸­å®šä¹‰äº†ç”¨æˆ·çš„åé¦ˆç»“æœï¼Œå¦‚ä¸‹ï¼š 12345678910typedef NS_ENUM(NSInteger, SFSpeechRecognizerAuthorizationStatus) &#123; //ç»“æœæœªçŸ¥ ç”¨æˆ·å°šæœªè¿›è¡Œé€‰æ‹© SFSpeechRecognizerAuthorizationStatusNotDetermined, //ç”¨æˆ·æ‹’ç»æˆæƒè¯­éŸ³è¯†åˆ« SFSpeechRecognizerAuthorizationStatusDenied, //è®¾å¤‡ä¸æ”¯æŒè¯­éŸ³è¯†åˆ«åŠŸèƒ½ SFSpeechRecognizerAuthorizationStatusRestricted, //ç”¨æˆ·æˆæƒè¯­éŸ³è¯†åˆ« SFSpeechRecognizerAuthorizationStatusAuthorized,&#125;; å¦‚æœç”³è¯·ç”¨æˆ·è¯­éŸ³è¯†åˆ«æƒé™æˆåŠŸï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡SFSpeechRecognizeræ“ä½œç±»æ¥è¿›è¡Œè¯­éŸ³è¯†åˆ«è¯·æ±‚ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789//åˆ›å»ºè¯­éŸ³è¯†åˆ«æ“ä½œç±»å¯¹è±¡SFSpeechRecognizer * rec = [[SFSpeechRecognizer alloc]init];//é€šè¿‡ä¸€ä¸ªéŸ³é¢‘è·¯å¾„åˆ›å»ºéŸ³é¢‘è¯†åˆ«è¯·æ±‚SFSpeechRecognitionRequest * request = [[SFSpeechURLRecognitionRequest alloc]initWithURL:[[NSBundle mainBundle] URLForResource:@\"7011\" withExtension:@\"m4a\"]];//è¿›è¡Œè¯·æ±‚[rec recognitionTaskWithRequest:request resultHandler:^(SFSpeechRecognitionResult * _Nullable result, NSError * _Nullable error) &#123; //æ‰“å°è¯­éŸ³è¯†åˆ«çš„ç»“æœå­—ç¬¦ä¸² NSLog(@\"%@\",result.bestTranscription.formattedString);&#125;]; å››ã€æ·±å…¥SFSpeechRecognizerç±»SFSpeechRecognizerç±»çš„ä¸»è¦ä½œç”¨æ˜¯ç”³è¯·æƒé™ï¼Œé…ç½®å‚æ•°ä¸è¿›è¡Œè¯­éŸ³è¯†åˆ«è¯·æ±‚ã€‚å…¶ä¸­æ¯”è¾ƒé‡è¦çš„å±æ€§ä¸æ–¹æ³•å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233//è·å–å½“å‰ç”¨æˆ·æƒé™çŠ¶æ€+ (SFSpeechRecognizerAuthorizationStatus)authorizationStatus;//ç”³è¯·è¯­éŸ³è¯†åˆ«ç”¨æˆ·æƒé™+ (void)requestAuthorization:(void(^)(SFSpeechRecognizerAuthorizationStatus status))handler;//è·å–æ‰€æ”¯æŒçš„æ‰€æœ‰è¯­è¨€ç¯å¢ƒ+ (NSSet&lt;NSLocale *&gt; *)supportedLocales;//åˆå§‹åŒ–æ–¹æ³• éœ€è¦æ³¨æ„ è¿™ä¸ªåˆå§‹åŒ–æ–¹æ³•å°†é»˜è®¤ä»¥è®¾å¤‡å½“å‰çš„è¯­è¨€ç¯å¢ƒä½œä¸ºè¯­éŸ³è¯†åˆ«çš„è¯­è¨€ç¯å¢ƒ- (nullable instancetype)init;//åˆå§‹åŒ–æ–¹æ³• è®¾ç½®ä¸€ä¸ªç‰¹å®šçš„è¯­è¨€ç¯å¢ƒ- (nullable instancetype)initWithLocale:(NSLocale *)locale NS_DESIGNATED_INITIALIZER;//è¯­éŸ³è¯†åˆ«æ˜¯å¦å¯ç”¨@property (nonatomic, readonly, getter=isAvailable) BOOL available;//è¯­éŸ³è¯†åˆ«æ“ä½œç±»åè®®ä»£ç†@property (nonatomic, weak) id&lt;SFSpeechRecognizerDelegate&gt; delegate;//è®¾ç½®è¯­éŸ³è¯†åˆ«çš„é…ç½®å‚æ•° éœ€è¦æ³¨æ„ åœ¨æ¯ä¸ªè¯­éŸ³è¯†åˆ«è¯·æ±‚ä¸­ä¹Ÿæœ‰è¿™æ ·ä¸€ä¸ªå±æ€§ è¿™é‡Œè®¾ç½®å°†ä½œä¸ºé»˜è®¤å€¼//å¦‚æœSFSpeechRecognitionRequestå¯¹è±¡ä¸­ä¹Ÿè¿›è¡Œäº†è®¾ç½® åˆ™ä¼šè¦†ç›–è¿™é‡Œçš„å€¼/*typedef NS_ENUM(NSInteger, SFSpeechRecognitionTaskHint) &#123; SFSpeechRecognitionTaskHintUnspecified = 0, // æ— å®šä¹‰ SFSpeechRecognitionTaskHintDictation = 1, // æ­£å¸¸çš„å¬å†™é£æ ¼ SFSpeechRecognitionTaskHintSearch = 2, // æœç´¢é£æ ¼ SFSpeechRecognitionTaskHintConfirmation = 3, // çŸ­è¯­é£æ ¼&#125;;*/@property (nonatomic) SFSpeechRecognitionTaskHint defaultTaskHint;//ä½¿ç”¨å›è°ƒBlockçš„æ–¹å¼è¿›è¡Œè¯­éŸ³è¯†åˆ«è¯·æ±‚ è¯·æ±‚ç»“æœä¼šåœ¨Blockä¸­ä¼ å…¥- (SFSpeechRecognitionTask *)recognitionTaskWithRequest:(SFSpeechRecognitionRequest *)request resultHandler:(void (^)(SFSpeechRecognitionResult * __nullable result, NSError * __nullable error))resultHandler;//ä½¿ç”¨ä»£ç†å›è°ƒçš„æ–¹å¼è¿›è¡Œè¯­éŸ³è¯†åˆ«è¯·æ±‚- (SFSpeechRecognitionTask *)recognitionTaskWithRequest:(SFSpeechRecognitionRequest *)request delegate:(id &lt;SFSpeechRecognitionTaskDelegate&gt;)delegate;//è®¾ç½®è¯·æ±‚æ‰€å ç”¨çš„ä»»åŠ¡é˜Ÿåˆ—@property (nonatomic, strong) NSOperationQueue *queue; SFSpeechRecognizerDelegateåè®®ä¸­åªçº¦å®šäº†ä¸€ä¸ªæ–¹æ³•ï¼Œå¦‚ä¸‹: 12//å½“è¯­éŸ³è¯†åˆ«æ“ä½œå¯ç”¨æ€§å‘ç”Ÿæ”¹å˜æ—¶ä¼šè¢«è°ƒç”¨- (void)speechRecognizer:(SFSpeechRecognizer *)speechRecognizer availabilityDidChange:(BOOL)available; é€šè¿‡Blockå›è°ƒçš„æ–¹å¼è¿›è¡Œè¯­éŸ³è¯†åˆ«è¯·æ±‚ååˆ†ç®€å•ï¼Œå¦‚æœä½¿ç”¨ä»£ç†å›è°ƒçš„æ–¹å¼ï¼Œå¼€å‘è€…éœ€è¦å®ç°SFSpeechRecognitionTaskDelegateåè®®ä¸­çš„ç›¸å…³æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š 123456789101112131415//å½“å¼€å§‹æ£€æµ‹éŸ³é¢‘æºä¸­çš„è¯­éŸ³æ—¶é¦–å…ˆè°ƒç”¨æ­¤æ–¹æ³•- (void)speechRecognitionDidDetectSpeech:(SFSpeechRecognitionTask *)task;//å½“è¯†åˆ«å‡ºä¸€æ¡å¯ç”¨çš„ä¿¡æ¯å ä¼šè°ƒç”¨/*éœ€è¦æ³¨æ„ï¼Œappleçš„è¯­éŸ³è¯†åˆ«æœåŠ¡ä¼šæ ¹æ®æä¾›çš„éŸ³é¢‘æºè¯†åˆ«å‡ºå¤šä¸ªå¯èƒ½çš„ç»“æœ æ¯æœ‰ä¸€æ¡ç»“æœå¯ç”¨ éƒ½ä¼šè°ƒç”¨æ­¤æ–¹æ³•*/- (void)speechRecognitionTask:(SFSpeechRecognitionTask *)task didHypothesizeTranscription:(SFTranscription *)transcription;//å½“è¯†åˆ«å®Œæˆæ‰€æœ‰å¯ç”¨çš„ç»“æœåè°ƒç”¨- (void)speechRecognitionTask:(SFSpeechRecognitionTask *)task didFinishRecognition:(SFSpeechRecognitionResult *)recognitionResult;//å½“ä¸å†æ¥å—éŸ³é¢‘è¾“å…¥æ—¶è°ƒç”¨ å³å¼€å§‹å¤„ç†è¯­éŸ³è¯†åˆ«ä»»åŠ¡æ—¶è°ƒç”¨- (void)speechRecognitionTaskFinishedReadingAudio:(SFSpeechRecognitionTask *)task;//å½“è¯­éŸ³è¯†åˆ«ä»»åŠ¡è¢«å–æ¶ˆæ—¶è°ƒç”¨- (void)speechRecognitionTaskWasCancelled:(SFSpeechRecognitionTask *)task;//è¯­éŸ³è¯†åˆ«ä»»åŠ¡å®Œæˆæ—¶è¢«è°ƒç”¨- (void)speechRecognitionTask:(SFSpeechRecognitionTask *)task didFinishSuccessfully:(BOOL)successfully; SFSpeechRecognitionTaskç±»ä¸­å°è£…äº†å±æ€§å’Œæ–¹æ³•å¦‚ä¸‹ï¼š 12345678910111213141516171819//æ­¤ä»»åŠ¡çš„å½“å‰çŠ¶æ€/*typedef NS_ENUM(NSInteger, SFSpeechRecognitionTaskState) &#123; SFSpeechRecognitionTaskStateStarting = 0, // ä»»åŠ¡å¼€å§‹ SFSpeechRecognitionTaskStateRunning = 1, // ä»»åŠ¡æ­£åœ¨è¿è¡Œ SFSpeechRecognitionTaskStateFinishing = 2, // ä¸åœ¨è¿›è¡ŒéŸ³é¢‘è¯»å…¥ å³å°†è¿”å›è¯†åˆ«ç»“æœ SFSpeechRecognitionTaskStateCanceling = 3, // ä»»åŠ¡å–æ¶ˆ SFSpeechRecognitionTaskStateCompleted = 4, // æ‰€æœ‰ç»“æœè¿”å›å®Œæˆ&#125;;*/@property (nonatomic, readonly) SFSpeechRecognitionTaskState state;//éŸ³é¢‘è¾“å…¥æ˜¯å¦å®Œæˆ@property (nonatomic, readonly, getter=isFinishing) BOOL finishing;//æ‰‹åŠ¨å®ŒæˆéŸ³é¢‘è¾“å…¥ ä¸å†æ¥æ”¶éŸ³é¢‘- (void)finish;//ä»»åŠ¡æ˜¯å¦è¢«å–æ¶ˆ@property (nonatomic, readonly, getter=isCancelled) BOOL cancelled;//æ‰‹åŠ¨å–æ¶ˆä»»åŠ¡- (void)cancel; å…³äºéŸ³é¢‘è¯†åˆ«è¯·æ±‚ç±»ï¼Œé™¤äº†å¯ä»¥ä½¿ç”¨SFSpeechURLRecognitionRequestç±»æ¥è¿›è¡Œåˆ›å»ºå¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨SFSpeechAudioBufferRecognitionRequestç±»æ¥è¿›è¡Œåˆ›å»ºï¼š 12345678910@interface SFSpeechAudioBufferRecognitionRequest : SFSpeechRecognitionRequest@property (nonatomic, readonly) AVAudioFormat *nativeAudioFormat;//æ‹¼æ¥éŸ³é¢‘æµ- (void)appendAudioPCMBuffer:(AVAudioPCMBuffer *)audioPCMBuffer;- (void)appendAudioSampleBuffer:(CMSampleBufferRef)sampleBuffer;//å®Œæˆè¾“å…¥- (void)endAudio;@end äº”ã€è¯­éŸ³è¯†åˆ«ç»“æœç±»SFSpeechRecognitionResultSFSpeechRecognitionResultç±»æ˜¯è¯­éŸ³è¯†åˆ«ç»“æœçš„å°è£…ï¼Œå…¶ä¸­åŒ…å«äº†è®¸å¤šå¥—å¹³è¡Œçš„è¯†åˆ«ä¿¡æ¯ï¼Œå…¶æ¯ä¸€ä»½è¯†åˆ«ä¿¡æ¯éƒ½æœ‰å¯ä¿¡åº¦å±æ€§æ¥æè¿°å…¶å‡†ç¡®ç¨‹åº¦ã€‚SFSpeechRecognitionResultç±»ä¸­å±æ€§å¦‚ä¸‹ï¼š 123456//è¯†åˆ«åˆ°çš„å¤šå¥—è¯­éŸ³è½¬æ¢ä¿¡æ¯æ•°ç»„ å…¶ä¼šæŒ‰ç…§å‡†ç¡®åº¦è¿›è¡Œæ’åº@property (nonatomic, readonly, copy) NSArray&lt;SFTranscription *&gt; *transcriptions;//å‡†ç¡®æ€§æœ€é«˜çš„è¯†åˆ«å®ä¾‹@property (nonatomic, readonly, copy) SFTranscription *bestTranscription;//æ˜¯å¦å·²ç»å®Œæˆ å¦‚æœYES åˆ™æ‰€æœ‰æ‰€æœ‰è¯†åˆ«ä¿¡æ¯éƒ½å·²ç»è·å–å®Œæˆ@property (nonatomic, readonly, getter=isFinal) BOOL final; SFSpeechRecognitionResultç±»åªæ˜¯è¯­éŸ³è¯†åˆ«ç»“æœçš„ä¸€ä¸ªå°è£…ï¼ŒçœŸæ­£çš„è¯†åˆ«ä¿¡æ¯å®šä¹‰åœ¨SFTranscriptionç±»ä¸­ï¼ŒSFTranscriptionç±»ä¸­å±æ€§å¦‚ä¸‹ï¼š 1234//å®Œæ•´çš„è¯­éŸ³è¯†åˆ«å‡†æ¢åçš„æ–‡æœ¬ä¿¡æ¯å­—ç¬¦ä¸²@property (nonatomic, readonly, copy) NSString *formattedString;//è¯­éŸ³è¯†åˆ«èŠ‚ç‚¹æ•°ç»„@property (nonatomic, readonly, copy) NSArray&lt;SFTranscriptionSegment *&gt; *segments; å½“å¯¹ä¸€å¥å®Œæ•´çš„è¯è¿›è¡Œè¯†åˆ«æ—¶ï¼ŒAppleçš„è¯­éŸ³è¯†åˆ«æœåŠ¡å®é™…ä¸Šä¼šæŠŠè¿™å¥è¯­éŸ³æ‹†åˆ†æˆè‹¥å¹²ä¸ªéŸ³é¢‘èŠ‚ç‚¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹å¯èƒ½ä¸ºä¸€ä¸ªå•è¯ï¼ŒSFTranscriptionç±»ä¸­çš„segmentså±æ€§å°±å­˜æ”¾è¿™äº›èŠ‚ç‚¹ã€‚SFTranscriptionSegmentç±»ä¸­å®šä¹‰çš„å±æ€§å¦‚ä¸‹ï¼š 123456789101112//å½“å‰èŠ‚ç‚¹è¯†åˆ«åçš„æ–‡æœ¬ä¿¡æ¯@property (nonatomic, readonly, copy) NSString *substring;//å½“å‰èŠ‚ç‚¹è¯†åˆ«åçš„æ–‡æœ¬ä¿¡æ¯åœ¨æ•´ä½“è¯†åˆ«è¯­å¥ä¸­çš„ä½ç½®@property (nonatomic, readonly) NSRange substringRange;//å½“å‰èŠ‚ç‚¹çš„éŸ³é¢‘æ—¶é—´æˆ³@property (nonatomic, readonly) NSTimeInterval timestamp;//å½“å‰èŠ‚ç‚¹éŸ³é¢‘çš„æŒç»­æ—¶é—´@property (nonatomic, readonly) NSTimeInterval duration;//å¯ä¿¡åº¦/å‡†ç¡®åº¦ 0-1ä¹‹é—´@property (nonatomic, readonly) float confidence;//å…³äºæ­¤èŠ‚ç‚¹çš„å…¶ä»–å¯èƒ½çš„è¯†åˆ«ç»“æœ @property (nonatomic, readonly) NSArray&lt;NSString *&gt; *alternativeSubstrings; æ¸©é¦¨æç¤ºï¼šSpeechFrameworkæ¡†æ¶åœ¨æ¨¡æ‹Ÿå™¨ä¸Šè¿è¡Œä¼šå‡ºç°å¼‚å¸¸æƒ…å†µï¼Œæ— æ³•è¿›è¡Œè¯­éŸ³è¯†åˆ«è¯·æ±‚ã€‚ä¼šæŠ¥å‡ºkAFAssistantErrorDomainçš„é”™è¯¯ï¼Œè¿˜æœ›æœ‰çŸ¥é“è§£å†³æ–¹æ¡ˆçš„æœ‹å‹ï¼Œç»™äº›å»ºè®®ï¼ŒThanksã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOS10ä¸“é¢˜","slug":"iOS10ä¸“é¢˜","permalink":"http://huishao.cc/categories/iOS10ä¸“é¢˜/"}],"tags":[],"keywords":[{"name":"iOS10ä¸“é¢˜","slug":"iOS10ä¸“é¢˜","permalink":"http://huishao.cc/categories/iOS10ä¸“é¢˜/"}]},{"title":"iOS10ä¸­Messagesç‹¬ç«‹åº”ç”¨ä¸æ‰©å±•æ’ä»¶è¯¦æ","slug":"256iOS10ä¸­Messagesç‹¬ç«‹åº”ç”¨ä¸æ‰©å±•æ’ä»¶è¯¦æ","date":"2016-09-17T16:00:00.000Z","updated":"2021-07-12T02:30:30.707Z","comments":true,"path":"2016/09/18/256iOS10ä¸­Messagesç‹¬ç«‹åº”ç”¨ä¸æ‰©å±•æ’ä»¶è¯¦æ/","link":"","permalink":"http://huishao.cc/2016/09/18/256iOS10ä¸­Messagesç‹¬ç«‹åº”ç”¨ä¸æ‰©å±•æ’ä»¶è¯¦æ/","excerpt":"","text":"iOS10ä¸­Messagesç‹¬ç«‹åº”ç”¨ä¸æ‰©å±•æ’ä»¶è¯¦æä¸€ã€å¼•è¨€Messagesæ˜¯iOSç³»ç»Ÿä¸­åŸç”Ÿçš„ä¿¡æ¯åº”ç”¨ï¼Œå…¶æ—¢å¯ä»¥é€šè¿‡è¿è¥å•†ç½‘ç»œå‘é€çŸ­ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥é€šè¿‡äº’è”ç½‘è¿›è¡Œç±»ä¼¼å¾®ä¿¡ç±»ç¤¾äº¤è½¯ä»¶çš„å³æ—¶èŠå¤©ã€‚ä½†æ˜¯ç”±äºå…¶å°é—­æ€§ä¸åŠŸèƒ½çš„å•ä¸€ï¼Œä½¿ç”¨å…¶è¿›è¡Œå³æ—¶èŠå¤©çš„ç”¨æˆ·å¹¶ä¸å¤šã€‚éšç€iOS10ç³»ç»Ÿçš„æ¨å‡ºï¼Œæˆ–è®¸å¯ä»¥æ”¹å˜è¿™ä¸€ç°çŠ¶ã€‚åœ¨iOS10ä¸­ï¼ŒMessagesçš„åŠŸèƒ½è¢«æ‰©å±•çš„ååˆ†å¼ºå¤§ï¼Œé€šè¿‡Messagesï¼Œç”¨æˆ·å¯ä»¥åˆ†äº«å›¾ç‰‡ï¼ŒéŸ³ä¹ï¼Œè§†é¢‘ï¼Œå¯ä»¥éšæ‰‹æ¶‚é¸¦ï¼Œä½¿ç”¨è‡ªå®šä¹‰çš„è¡¨æƒ…åŒ…ï¼Œå¯ä»¥è¿›è¡ŒApple Payæ”¯ä»˜ï¼Œè´­ç‰©ï¼Œç”šè‡³å¯ä»¥åœ¨Messagesä¸­ç©æ¸¸æˆã€‚å¹¶ä¸”ï¼Œä¸Šé¢æ‰€æåˆ°çš„è¿™äº›åŠŸèƒ½éƒ½å…¨é¢å¼€å‘å‡ºäº†æ¥å£ä¾›å¼€å‘è€…è¿›è¡Œå¼€å‘ä¸æ‰©å±•ã€‚ åœ¨iOS10ä¸­ï¼Œå¼€å‘è€…å¯ä»¥è¿›è¡Œä¸Messagesç›¸å…³çš„å¼€å‘æœ‰ä¸¤ç±»ï¼šç‹¬ç«‹çš„Messagesåº”ç”¨ä¸Messagesåº”ç”¨æ‰©å±•ã€‚å…¶ä¸­ï¼ŒMessagesåº”ç”¨æ‰©å±•éœ€è¦ä¾é™„ä¸€ä¸ªå®¿ä¸»Appè€Œå­˜åœ¨ã€‚æ— è®ºå“ªç§ç±»å‹çš„Messagesåº”ç”¨ï¼Œå…¶éƒ½åˆåˆ†ä¸ºä¸¤ç±»ï¼ŒStickerPicksï¼ˆè¡¨æƒ…åŒ…ï¼‰ä¸iMessage Apps(Messagesåº”ç”¨)ã€‚ äºŒã€å¼€å‘è¡¨æƒ…åŒ…StickerPicks1.å¼€å‘ç‹¬ç«‹çš„è¡¨æƒ…åŒ…Sticker Pickså¯è°“æ˜¯iOS10ä¸­ä¸€ä¸ªååˆ†å¼ºå¤§çš„æ–°åŠŸèƒ½ã€‚åœ¨iOS10ç³»ç»Ÿçš„iPhoneä¸Šï¼ŒMessagesåº”ç”¨ä¸­ä¼šå†…åµŒä¸€ä¸ªMessage App Storeï¼Œç”¨æˆ·å¯ä»¥ç›´æ¥ä»é‡Œé¢ä¸‹è½½é’ˆå¯¹äºMessagesçš„ç‹¬ç«‹è¡¨æƒ…åŒ…å’Œç‹¬ç«‹ç¬¬ä¸‰æ–¹åº”ç”¨ã€‚å¼€å‘è€…ä¹Ÿå¯ä»¥ç‹¬ç«‹å¼€å‘è¡¨æƒ…åŒ…å‘å¸ƒåˆ°è¿™ä¸ªMessage App Storeä¸­ã€‚ å¼€å‘Sticker Picksè¡¨æƒ…åŒ…ååˆ†ç®€å•ï¼Œå¼€å‘è€…å¯ä»¥ä¸ç”¨å†™ä¸€å¥ä»£ç ï¼Œå°†æ•´ç†å¥½çš„è¡¨æƒ…è¿›è¡Œæ‰“åŒ…æäº¤å³å¯å®Œæˆã€‚ä½¿ç”¨Xcode8åˆ›å»ºä¸€ä¸ªæ–°çš„å·¥ç¨‹ï¼Œé€‰æ‹©Sticker Pack Applicationæ¨¡æ¿ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š åˆ›å»ºå‡ºå·¥ç¨‹åï¼Œå¯ä»¥å‘ç°æ¨¡æ¿ä¸­æ²¡æœ‰ä»»ä½•ä»£ç æ–‡ä»¶ï¼Œåªæœ‰ä¸€ä¸ªStickers.xcstickersåŒ…ã€‚å°†å‡†å¤‡å¥½çš„è¡¨æƒ…åŒ…å›¾ç‰‡å¯¼å…¥è¿™ä¸ªStickersä¸­ï¼Œå…¶ä¸­æ”¯æŒé™æ€å›¾ç‰‡ï¼Œä¹Ÿæ”¯æŒåŠ¨æ€è¡¨æƒ…gifå›¾ç‰‡ã€‚å…³äºå¯¼å…¥çš„å›¾ç‰‡ï¼Œæœ‰å¦‚ä¸‹å‡ æ¡è§„åˆ™ï¼š 1.å›¾ç‰‡æ–‡ä»¶çš„æ ¼å¼å¿…é¡»æ˜¯PNGã€APNGã€GIFæˆ–è€…JPEGã€‚ 2.å•ä¸ªæ–‡ä»¶çš„å¤§å°ä¸èƒ½è¶…è¿‡500KBã€‚ 3.æœ€ä¼˜çš„æ•ˆæœæ˜¯å½“å›¾ç‰‡å°ºå¯¸åœ¨100*100åˆ°206*206ä¹‹é—´ã€‚ æ³¨æ„ï¼šåœ¨æä¾›å›¾ç‰‡çš„æ—¶å€™ï¼Œå¼€å‘è€…åªéœ€è¦æä¾›@3å€å›¾å³å¯ï¼Œå³æœ€ä¼˜å°ºå¯¸åœ¨300*300åˆ°618*618ä¹‹é—´çš„å›¾ç‰‡ã€‚ç³»ç»Ÿä¼šè‡ªåŠ¨ç”Ÿæˆ@2ä¸@1å€å›¾ã€‚ å¼€å‘çš„è¡¨æƒ…åŒ…ä¼šæ˜¾ç¤ºåœ¨Messagesåº”ç”¨çš„å·¥å…·ä¸­ï¼Œéœ€è¦æ³¨æ„ï¼Œåœ¨è¡¨æƒ…åˆ—è¡¨çš„æ’ç‰ˆä¸­ï¼Œæ¯ä¸ªè¡¨æƒ…ç¼©ç•¥å›¾åªæ”¯æŒ3ç§å°ºå¯¸çš„æ’ç‰ˆï¼Œå¯¹åº”çš„å°ºå¯¸åˆ†åˆ«å¦‚ä¸‹ï¼š Smallç±»å‹ï¼š100*100 Mediumç±»å‹ï¼š136*136 Largeç±»å‹ï¼š206*206 åœ¨Xcodeä¸­ï¼Œå¯ä»¥å¯¹è¦ä½¿ç”¨çš„æ¨¡æ¿è¿›è¡Œé€‰æ‹©ï¼Œå¦‚ä¸‹å›¾ï¼š åœ¨æ¨¡æ‹Ÿå™¨ä¸­è¿è¡Œå·¥ç¨‹ï¼ŒMessagesä¸­æ•ˆæœå¦‚ä¸‹å›¾ï¼š å’Œæ™®é€šiOSåº”ç”¨ç¨‹åºä¸€æ ·ï¼Œå°†è®¾å¤‡é€‰æ‹©ä¸ºGeneric iOS Deviceåç›´æ¥Archiveså³å¯å°†è¡¨æƒ…åŒ…æäº¤åˆ°AppStoreï¼Œå®¡æ ¸é€šè¿‡åï¼Œå³å¯åœ¨Message App Storeä¸­è¿›è¡Œä¸‹è½½ã€‚ å°æç¤ºï¼šå…¶å®StickerPicksç¿»è¯‘æˆè¡¨æƒ…åŒ…å¹¶ä¸åˆé€‚ï¼Œå…¶æ›´æœ‰ä¸€å±‚è´´çº¸çš„æ¦‚å¿µã€‚å®é™…ä¸Šå…¶ä¹Ÿç¡®å®æœ‰è´´çº¸çš„åŠŸèƒ½ï¼Œåœ¨Messagesåº”ç”¨ä¸­ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡é•¿æŒ‰ç§»åŠ¨æ‰‹åŠ¿ï¼Œæ¥å°†æŸä¸ªStickeræ·»åŠ åœ¨å¦ä¸€ä¸ªStickerä¸Šé¢ã€‚å¦‚ä¸‹å›¾ï¼š 2.å¼€å‘å¯„å®¿äºå®¿ä¸»Appçš„è¡¨æƒ…åŒ…æ‰©å±•æ‰©å±•è¡¨æƒ…åŒ…ä¸ç‹¬ç«‹è¡¨æƒ…åŒ…æœ€å¤§çš„ä¸åŒåœ¨äºæ‰©å±•éœ€è¦å¯„å®¿äºæŸä¸ªå®¿ä¸»Appä¸­ï¼Œåˆ›å»ºæ‰©å±•targetï¼Œé€‰æ‹©Sticker Pick Extensionï¼Œå¦‚ä¸‹å›¾ï¼Œä¹‹åå’Œç‹¬ç«‹è¡¨æƒ…åŒ…å¼€å‘è¿‡ç¨‹ä¸€è‡´ã€‚ 3.å…³äºè¡¨æƒ…åŒ…çš„iconå›¾æ ‡StickerPicksçš„å›¾æ ‡å’Œå®¿ä¸»Appå¹¶ä¸å…±ç”¨ï¼Œå…¶éœ€è¦ä¸€å¥—ç‹¬ç‰¹å°ºå¯¸çš„iconï¼Œå°ºå¯¸å¦‚ä¸‹ï¼š æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¸‰ã€å¼€å‘Messages Appåº”ç”¨1.è®¤è¯†Messagesæ¡†æ¶å’ŒStickerPicksè¡¨æƒ…åŒ…ä¸€æ ·ï¼ŒMessages Appä¹Ÿåˆ†ä¸ºç‹¬ç«‹åº”ç”¨ä¸æ‰©å±•ä¸¤ç§ã€‚å…¶å®å®ƒä»¬çš„å¼€å‘æ€è·¯å’Œæ–¹æ³•å®Œå…¨ä¸€è‡´ï¼Œåªæ˜¯æœ‰æ— å®¿ä¸»Appçš„åŒºåˆ«ã€‚ å¼€å‘Messages Appéœ€è¦ä½¿ç”¨åˆ°iOSä¸­å¼•å…¥çš„ä¸€ä¸ªæ–°çš„å¼€å‘æ¡†æ¶Messagesã€‚Messagesæ¯”è¾ƒç®€å•ï¼Œå…¶ä¸­æ¶‰åŠåˆ°çš„ç±»å¹¶ä¸ååˆ†å¤šï¼Œä¸‹å›¾ä¸­æ¦‚è¿°äº†å…¶ä¸­é‡è¦çš„ç±»å’Œä¹‹é—´çš„å…³ç³»ï¼š MSMessageAppViewControllerï¼šè¿™ä¸ªç±»Messages Appçš„åŸºç¡€è§†å›¾æ§åˆ¶å™¨ç±»ï¼Œå…¶ç»§æ‰¿è‡ªUIViewControllerï¼Œä½†å…¶ä¸­æ·»åŠ äº†è®¸å¤šMessages Appç›¸å…³çš„å£°æ˜å‘¨æœŸæ–¹æ³•ã€‚ MSConversationï¼šæè¿°ä¸€ä¸ªä¼šè¯å®ä¾‹ã€‚ MSStickerï¼šè¡¨æƒ…è´´å›¾å®ä¾‹ã€‚ MSMessageï¼šåœ¨Messages Appä¹‹é—´è¿›è¡Œä¼ é€’çš„æ¶ˆæ¯å®ä½“ã€‚ MSMessageLayoutï¼šæŠ½è±¡ç±»ï¼Œå…¶å¹¶æ²¡æœ‰å®ç°ä»»ä½•æ–¹æ³•ï¼Œæœ‰å­ç±»å®ç°ã€‚ MSMessageTemplateLayoutï¼šç”¨äºå¯¹æ¶ˆæ¯å®ä½“MSMessageè¿›è¡Œå¸ƒå±€æ’ç‰ˆã€‚ MSStickerBorwserViewControllerï¼šç”¨äºåˆ›å»ºè¡¨æƒ…åŒ…è§†å›¾æ§åˆ¶å™¨ã€‚ MSStickerBorwserViewï¼šè¡¨æƒ…åŒ…è§†å›¾å®¹å™¨ï¼Œç±»ä¼¼CollectionViewã€‚ MSStickerViewï¼šè¡¨æƒ…æ‰¿è½½è§†å›¾ã€‚ 2.å®ç°ä¸€ä¸ªMessages Appçš„åˆ—è¡¨ç•Œé¢ä½¿ç”¨Xcodeæ–°å»ºä¸€ä¸ªMessages Appå·¥ç¨‹å¦‚ä¸‹ï¼š å…¶ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªMessagesViewControllerç±»ï¼Œè¿™ä¸ªç±»å°±æ˜¯æ­¤Messages Appçš„ä¸»ç•Œé¢è§†å›¾æ§åˆ¶å™¨ã€‚éœ€è¦æ³¨æ„ï¼ŒMessages Appçš„è§†å›¾æ§åˆ¶å™¨éƒ½åˆ†ä¸ºä¸¤ç§çŠ¶æ€ï¼Œåˆ†åˆ«ä¸ºCompact(ç´§å‡‘çš„)å’ŒExpanded(æ‰©å®½çš„)ã€‚å¹¶ä¸”åœ¨è¿™ä¸¤ç§çŠ¶æ€è¿›è¡Œåˆ‡æ¢æ—¶ï¼Œè§†å›¾çš„åº•éƒ¨çš„å·¥å…·æ å’Œå¤´éƒ¨çš„å¯¼èˆªæ ä¹Ÿä¼šäº¤æ›¿å‡ºç°ï¼Œè¿™å¯¼è‡´äº†å³ä½¿æ˜¯ä½¿ç”¨è‡ªåŠ¨å¸ƒå±€ï¼Œä¾ç„¶æ— æ³•å®Œç¾çš„è§£å†³Messages Appå¸ƒå±€çš„ç»Ÿä¸€æ€§ï¼Œéœ€è¦æ‰‹åŠ¨è¿›è¡Œè°ƒæ•´å¤„ç†ï¼Œåé¢ä¼šä»‹ç»åˆ°ã€‚ åœ¨MessagesViewControllerç±»ä¸­æ·»åŠ å…¶ä»–è§†å›¾æ§ä»¶ï¼Œå¤§éƒ¨åˆ†iOS Appå¼€å‘ä¸­å¯ä»¥ä½¿ç”¨çš„UIæ§ä»¶è¿™é‡Œéƒ½å¯ä»¥ä½¿ç”¨ï¼Œä½†æ˜¯æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œå¯¹äºå¯ä»¥å¼¹å‡ºé”®ç›˜çš„UIæ§ä»¶ï¼Œä¾‹å¦‚UITextViewä¸UITextFieldï¼Œå½“Messages Appç•Œé¢å¤„ç†Compactæ¨¡å¼æ—¶ï¼Œé”®ç›˜æ˜¯ä¸èƒ½å¼¹å‡ºçš„ï¼Œåªæœ‰å½“ç•Œé¢å¤„äºExpandedæ¨¡å¼æ—¶ï¼Œé”®ç›˜æ‰è¢«å…è®¸å¼¹å‡ºã€‚ ä¸ºäº†ä½¿Messages Appçš„ç•Œé¢åœ¨ä»»ä½•æ¨¡å¼ä¸‹éƒ½èƒ½ä¿æŒç»Ÿä¸€ï¼Œéœ€è¦æ‰‹åŠ¨å¯¹å…¶ä¸­è§†å›¾çº¦æŸè¿›è¡Œä¿®æ”¹ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view. self.dataArray = [NSMutableArray array]; [self.dataArray addObjectsFromArray:@[@\"å‘é€æ–‡æœ¬ä¿¡æ¯\",@\"æ’å…¥è¡¨æƒ…\",@\"æ’å…¥æ–‡ä»¶\",@\"æ’å…¥æ¶ˆæ¯å®ä½“\",@\"è·³è½¬ç¬¬äºŒä¸ªç•Œé¢\",@\"è´´å›¾åŒ…\"]]; [self.tableView registerClass:[UITableViewCell class] forCellReuseIdentifier:@\"cellId\"]; self.tableView.dataSource = self; self.tableView.delegate = self; self.session = [[MSSession alloc]init];&#125;-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section&#123; return self.dataArray.count;&#125;-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath&#123; UITableViewCell * cell = [tableView dequeueReusableCellWithIdentifier:@\"cellId\"]; cell.textLabel.text = self.dataArray[indexPath.row]; return cell;&#125;//è¿™ä¸ªæ–¹æ³•åœ¨Messages AppåŠ è½½å®Œæˆå¤„äºæ´»è·ƒçŠ¶æ€æ—¶è¢«è°ƒç”¨ åœ¨å…¶ä¸­æ ¹æ®æ¨¡å¼è®¾ç½®å¸ƒå±€å‚æ•°-(void)didBecomeActiveWithConversation:(MSConversation *)conversation &#123; // Called when the extension is about to move from the inactive to active state. // This will happen when the extension is about to present UI. if (self.presentationStyle==MSMessagesAppPresentationStyleCompact) &#123; _topMargan.constant = 0; _leftMargan.constant = -15; _rightMargan.constant = -15; _bottomMargan.constant=-44; &#125;else&#123; _topMargan.constant = -85; _leftMargan.constant = -15; _rightMargan.constant = -15; _bottomMargan.constant=0; &#125; [self.view layoutIfNeeded]; &#125;//è¿™ä¸ªæ–¹æ³•åœ¨è§†å›¾æ§åˆ¶å™¨çš„æ¨¡å¼å‘ç”Ÿäº†æ”¹å˜æ—¶è°ƒç”¨ åœ¨å…¶ä¸­æ ¹æ®æ¨¡å¼ä¿®æ”¹å¸ƒå±€å‚æ•°-(void)didTransitionToPresentationStyle:(MSMessagesAppPresentationStyle)presentationStyle &#123; // Called after the extension transitions to a new presentation style. // Use this method to finalize any behaviors associated with the change in presentation style. if (presentationStyle==MSMessagesAppPresentationStyleCompact) &#123; _topMargan.constant = 0; _leftMargan.constant = -15; _rightMargan.constant = -15; _bottomMargan.constant=-44; &#125;else&#123; _topMargan.constant = -85; _leftMargan.constant = -15; _rightMargan.constant = -15; _bottomMargan.constant=0; &#125; [self.view layoutIfNeeded];&#125; 3.è§£æMSMessagesAppViewControllerç±»ç”±äºMSMessagesAppViewControllerç±»æ˜¯ç»§æ‰¿äºUIViewControllerç±»çš„ï¼Œå› æ­¤UIViewControllerä¸­çš„è§†å›¾æ§åˆ¶å™¨åˆ‡æ¢æ–¹æ³•è¿™é‡Œéƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼ŒMSMessagesAppViewControllerä¸­ä¾›å¼€å‘è€…è¿›è¡Œè°ƒç”¨çš„å±æ€§å’Œæ–¹æ³•å¦‚ä¸‹ï¼š 12345678910111213141516//å½“å‰æ¿€æ´»çš„ä¼šè¯å®ä¾‹ åé¢ä¼šä»‹ç»@property (nonatomic, strong, readonly, nullable) MSConversation *activeConversation;//å½“å‰ç•Œé¢æ‰€åœ¨çš„çŠ¶æ€/*typedef NS_ENUM(NSUInteger, MSMessagesAppPresentationStyle) &#123; //ç´§å‡‘çŠ¶æ€ MSMessagesAppPresentationStyleCompact, //æ‰©å®½çŠ¶æ€ MSMessagesAppPresentationStyleExpanded&#125; NS_ENUM_AVAILABLE_IOS(10_0);*/@property (nonatomic, assign, readonly) MSMessagesAppPresentationStyle presentationStyle;//åˆ‡æ¢ç•Œé¢çŠ¶æ€-(void)requestPresentationStyle:(MSMessagesAppPresentationStyle)presentationStyle;//è°ƒç”¨æ­¤æ–¹æ³•åï¼ŒMessagesAppè¢«æ”¶å› å¼¹å‡ºé”®ç›˜-(void)dismiss; MSMessagesAppViewControllerä¸­æ–°å¢åŠ çš„å£°æ˜å‘¨æœŸæ–¹æ³•å¦‚ä¸‹ï¼š 12345678910111213141516171819202122//å½“Messages Appå°†è¦æ¿€æ´»æ—¶è°ƒç”¨-(void)willBecomeActiveWithConversation:(MSConversation *)conversation;//å½“Messages Appå·²ç»è¢«æ¿€æ´»åè°ƒç”¨-(void)didBecomeActiveWithConversation:(MSConversation *)conversation;//å½“Messages Appå°†è¦è¢«æ³¨é”€æ—¶è°ƒç”¨-(void)willResignActiveWithConversation:(MSConversation *)conversation;//å½“MessageAppå·²ç»è¢«æ³¨é”€æ—¶è°ƒç”¨-(void)didResignActiveWithConversation:(MSConversation *)conversation;//æ¶ˆæ¯å®ä½“åœ¨ä¼šè¯ä¸­å°†è¦è¢«é€‰ä¸­æ—¶è°ƒç”¨-(void)willSelectMessage:(MSMessage *)message conversation:(MSConversation *)conversation;//æ¶ˆæ¯å®ä½“åœ¨ä¼šè¯ä¸­å·²ç»è¢«é€‰ä¸­æ—¶è°ƒç”¨-(void)didSelectMessage:(MSMessage *)message conversation:(MSConversation *)conversation;//æ¥æ”¶åˆ°åŒä¸€Messages Appå‘é€çš„æ¶ˆæ¯å®ä½“æ—¶è°ƒç”¨-(void)didReceiveMessage:(MSMessage *)message conversation:(MSConversation *)conversation;//å¼€å‘å‘é€æ¶ˆæ¯æ—¶è°ƒç”¨-(void)didStartSendingMessage:(MSMessage *)message conversation:(MSConversation *)conversation;//å–æ¶ˆå‘é€æ—¶è°ƒç”¨-(void)didCancelSendingMessage:(MSMessage *)message conversation:(MSConversation *)conversation;//æ§åˆ¶å™¨ç•Œé¢æ¨¡å¼å°†è¦æ”¹å˜æ—¶è°ƒç”¨-(void)willTransitionToPresentationStyle:(MSMessagesAppPresentationStyle)presentationStyle;//æ§åˆ¶å™¨ç•Œé¢å·²ç»æ”¹å˜æ—¶è°ƒç”¨-(void)didTransitionToPresentationStyle:(MSMessagesAppPresentationStyle)presentationStyle; 4.ä½¿ç”¨MSConversationä¼šè¯ç±»æ¥è¿›è¡Œæ¶ˆæ¯çš„å‘é€MSConversationç±»ç”¨æ¥æè¿°ä¼šè¯ï¼ŒMSMessagesAppViewControllerä¸­å†…ç½®MSConversationå¯¹è±¡ï¼Œå¼€å‘è€…å¯ä»¥ç”¨å®ƒæ¥è¿›è¡Œæ¶ˆæ¯ä¼ é€’ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath&#123; switch (indexPath.row) &#123; case 0: &#123; [self.activeConversation insertText:@\"æ–°çš„ä¿¡æ¯\" completionHandler:^(NSError * error) &#123; &#125;]; &#125; break; case 1: &#123; [self.activeConversation insertSticker:[[MSSticker alloc] initWithContentsOfFileURL:[[NSURL alloc] initFileURLWithPath:[[NSBundle mainBundle] pathForResource:@\"productImage\" ofType:@\"png\"]] localizedDescription:@\"image\" error:nil] completionHandler:nil]; &#125; break; case 2: &#123; [self.activeConversation insertAttachment:[[NSURL alloc] initFileURLWithPath:[[NSBundle mainBundle] pathForResource:@\"file\" ofType:nil]] withAlternateFilename:@\"æ–‡ä»¶\" completionHandler:nil]; &#125; break; case 3: &#123; MSMessage * message = [[MSMessage alloc]initWithSession:_session]; message.URL = [NSURL URLWithString:@\"http://www.baidu.com\"]; message.accessibilityLabel = @\"message\"; message.summaryText = @\"message\"; MSMessageTemplateLayout * layout = [[MSMessageTemplateLayout alloc]init]; layout.caption = @\"caption\"; layout.subcaption = @\"subcaption\"; layout.trailingCaption = @\"trailing\"; layout.trailingSubcaption =@\"subtrailing\"; layout.image = [UIImage imageNamed:@\"productImage\"]; layout.mediaFileURL =[[NSURL alloc] initFileURLWithPath:[[NSBundle mainBundle] pathForResource:@\"productImage\" ofType:@\"png\"]]; layout.imageTitle = @\"æœåº·\"; layout.imageSubtitle = @\"é…’æ°´\"; message.layout = layout; [self.activeConversation insertMessage:message completionHandler:nil]; &#125; break; case 4: &#123; [self presentViewController:[StackerViewController new] animated:YES completion:nil ]; &#125; break; case 5: &#123; [self presentViewController:[StackController new] animated:YES completion:nil ]; &#125; break; default: break; &#125;&#125; MSConversationæ”¯æŒå‘é€çš„æ¶ˆæ¯åˆ†ä¸º4ä¸­ï¼Œåˆ†åˆ«ä¸ºæ–‡æœ¬æ¶ˆæ¯ï¼Œè¡¨æƒ…è´´å›¾æ¶ˆæ¯ï¼Œæ–‡ä»¶æ¶ˆæ¯å’ŒMessageå®ä½“æ¶ˆæ¯ï¼Œä¸Šé¢ä»£ç éƒ½åšäº†æ¼”ç¤ºã€‚MSConversationä¸­é‡è¦å±æ€§å’Œæ–¹æ³•è§£æå¦‚ä¸‹ï¼š 1234567891011121314//æœ¬åœ°çš„è®¾å¤‡UUID@property (nonatomic, readonly) NSUUID *localParticipantIdentifier;//ä¼šè¯ä¸­è¿œç¨‹è®¾å¤‡çš„UUID æ”¯æŒå¤šäººä¼šè¯@property (nonatomic, readonly) NSArray&lt;NSUUID *&gt; *remoteParticipantIdentifiers;//å½“å‰é€‰ä¸­çš„æ¶ˆæ¯å®ä½“@property (nonatomic, readonly, nullable) MSMessage *selectedMessage;//æ’å…¥æ–‡æœ¬æ¶ˆæ¯- (void)insertText:(NSString *)text completionHandler:(nullable void (^)(NSError * _Nullable))completionHandler;//æ’å…¥è¡¨æƒ…è´´å›¾æ¶ˆæ¯- (void)insertSticker:(MSSticker *)sticker completionHandler:(nullable void (^)(NSError * _Nullable))completionHandler;//æ’å…¥æ–‡ä»¶é™„ä»¶æ¶ˆæ¯- (void)insertAttachment:(NSURL *)URL withAlternateFilename:(nullable NSString *)filename completionHandler:(nullable void (^)(NSError * _Nullable))completionHandler;//æ’å…¥Messageå®ä½“æ¶ˆæ¯- (void)insertMessage:(MSMessage *)message completionHandler:(nullable void (^)(NSError * _Nullable))completionHandler; æ•ˆæœå›¾å¦‚ä¸‹ï¼š 5.æ¶ˆæ¯å®ä½“MSMessageçš„åº”ç”¨MSMessageæ˜¯Messages Appå®šä¹‰çš„ä¸€ç§æ¶ˆæ¯å®ä½“ï¼Œå…¶å¯ä»¥ç”¨æ¥åœ¨Messages Appé—´ä¼ é€’ä¿¡æ¯ï¼Œå› ä¸ºå®ƒçš„å­˜åœ¨ï¼Œé€šè¿‡Messagesç”¨ç”¨å®ç°ä¼‘é—²å¯¹æˆ˜æ¸¸æˆå˜å¾—ååˆ†å®¹æ˜“ï¼Œå¼€å‘è€…ä¸éœ€è¦åœ¨å†™å³æ—¶é€šä¿¡é“¾æ¥ï¼Œåªéœ€è®¾è®¡æ¸¸æˆé€»è¾‘å³å¯ã€‚MSMessageä¸èƒ½å¤Ÿå®Œå…¨è‡ªå®šä¹‰UIï¼Œä½†æ˜¯Messagesæ¡†æ¶ä¸­çš„MSMessageTemplateLayoutç±»å¯ä»¥å¯¹å…¶UIè¿›è¡Œç®€å•çš„é…ç½®ã€‚ MSMessageç±»ä¸­å¸¸ç”¨çš„å±æ€§å’Œæ–¹æ³•å¦‚ä¸‹ï¼š 12345678910111213//åˆå§‹åŒ–æ–¹æ³• å¯ä»¥ç»‘å®šä¸€ä¸ªsessionï¼ŒåŒä¸€ä¸ªsessionç§çš„æ¶ˆæ¯å®ä½“ä¼šè¢«å½’ä¸ºä¸€ç±»-(instancetype)initWithSession:(MSSession *)session NS_DESIGNATED_INITIALIZER;//å‘é€æ­¤æ¶ˆæ¯çš„è®¾å¤‡@property (nonatomic, readonly) NSUUID *senderParticipantIdentifier;//æ¶ˆæ¯çš„UIå¸ƒå±€ä¿¡æ¯@property (nonatomic, copy, nullable) MSMessageLayout* layout;//æ¶ˆæ¯é™„å¸¦çš„URL å¼€å‘è€…å¯ä»¥é€šè¿‡è¿™ä¸ªURLæ¥ä¼ å€¼ @property (nonatomic, copy, nullable) NSURL *URL;//æ˜¯å¦ä¿ç•™è¿‡æœŸçš„æ¶ˆæ¯@property (nonatomic, assign) BOOL shouldExpire;//ç›²äººæ¨¡å¼ä¸­å¯¹åº”çš„æ–‡æ¡ˆ@property (nonatomic, copy, nullable) NSString *accessibilityLabel; 6.æ¶ˆæ¯å®ä½“å¸ƒå±€ç±»MSMessageLayoutå‰é¢ä»‹ç»ï¼ŒMSMessageç±»ä¸­å¹¶æ²¡æœ‰å®šä¹‰UIï¼ŒUIéƒ¨åˆ†éœ€è¦é…åˆMSMessageLayoutç±»æ¥é…ç½®ã€‚éœ€è¦æ³¨æ„ï¼ŒMSMessageLayoutç±»æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œappleè®¾è®¡çš„ç›®çš„å¯èƒ½æ˜¯ä¸ºäº†ä»¥åä¾¿äºæ‰©å±•å¤šä¸ªæ¶ˆæ¯å¸ƒå±€æ¨¡æ¿ã€‚ç›®å‰ï¼Œå¼€å‘è€…åªéœ€è¦ä½¿ç”¨MSMessageTemplateLayoutç±»æ¥å¯¹æ¶ˆæ¯å®ä½“è¿›è¡Œå¸ƒå±€ã€‚ MSMessageTemplateLayoutç±»ä¸­å¯ä»¥é…ç½®çš„å±æ€§å¦‚ä¸‹ï¼š 12345678910111213141516//è®¾ç½®æ¶ˆæ¯å®ä½“çš„æ ‡é¢˜@property (nonatomic, copy, nullable) NSString *caption;//è®¾ç½®æ¶ˆæ¯å®ä½“çš„å­æ ‡é¢˜@property (nonatomic, copy, nullable) NSString *subcaption;//è®¾ç½®æ¶ˆæ¯å®ä½“çš„å³ä¾§æ ‡é¢˜@property (nonatomic, copy, nullable) NSString *trailingCaption;//è®¾ç½®æ¶ˆæ¯å®ä½“çš„å³ä¾§å­æ ‡é¢˜@property (nonatomic, copy, nullable) NSString *trailingSubcaption;//è®¾ç½®æ¶ˆæ¯å®ä½“çš„å›¾ç‰‡@property (nonatomic, strong, nullable) UIImage *image;//è®¾ç½®æ¶ˆæ¯å®ä½“çš„åª’ä½“åœ°å€ éœ€è¦æ³¨æ„ å¦‚æœè®¾ç½®çš„imageå±æ€§ è¿™ä¸ªå±æ€§å°†è¢«å¿½ç•¥@property (nonatomic, copy, nullable) NSURL *mediaFileURL;//è®¾ç½®æ¶ˆæ¯å®ä½“çš„å›¾æ ‡æ ‡é¢˜@property (nonatomic, copy, nullable) NSString *imageTitle;//è®¾ç½®æ¶ˆæ¯å®ä½“çš„å›¾ç‰‡å­æ ‡é¢˜@property (nonatomic, copy, nullable) NSString *imageSubtitle; 7.è¡¨æƒ…è´´å›¾ç±»MSStickerä¸MSStickerViewåœ¨åˆ¶ä½œè¡¨æƒ…åŒ…Sticker Picksçš„æ—¶å€™ï¼Œå¼€å‘è€…ä¸éœ€è¦ç¼–å†™ä¸€è¡Œä»£ç ï¼Œå®é™…ä¸Šå¦‚æœè¦é€šè¿‡ä»£ç æ¥å¼€å‘è¡¨æƒ…åŒ…ä¹Ÿæ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œè¿™é‡Œéœ€è¦ç”¨åˆ°çš„ä¸€ä¸ªç±»å°±æ˜¯MSStickerç±»ï¼Œç®€å•ç†è§£ï¼ŒMSStickerç±»å¯¹è±¡å°±æ˜¯ä¸€ä¸ªè¡¨æƒ…è´´å›¾ï¼Œä½†æ˜¯å®ƒä¸æ˜¯ä¸€ä¸ªViewè§†å›¾ï¼Œè‹¥æƒ³åœ¨Messages Appä¸­çœ‹åˆ°è¿™ä¸ªè¡¨æƒ…è´´å›¾ï¼Œè¿˜éœ€è¦å€ŸåŠ©ä¸€ä¸ªç±»MSStickerViewï¼ŒMSStickerViewæ˜¯ç”¨äºæ‰¿è½½è¡¨æƒ…è´´å›¾çš„è§†å›¾ç±»ï¼Œç”¨æˆ·é€‰ä¸­å®ƒåï¼Œå¯ä»¥åœ¨Messagesåº”ç”¨ä¸­è¿›è¡Œå‘é€ã€‚ é¦–å…ˆï¼ŒMSStickerç±»åˆ›å»ºæ–¹æ³•å¦‚ä¸‹ï¼š 12//åˆå§‹åŒ–æ–¹æ³• é€šè¿‡æ–‡ä»¶URL æ¥åˆ›å»ºå®ä¾‹- (nullable instancetype)initWithContentsOfFileURL:(NSURL *)fileURL localizedDescription:(NSString *)localizedDescription error:(NSError * _Nullable *)error NS_DESIGNATED_INITIALIZER; MSStickerViewç±»è§£æå¦‚ä¸‹ï¼š 1234567891011//é€šè¿‡MSStickeræ¥è¿›è¡ŒMSStickerViewç±»çš„åˆ›å»º- (instancetype)initWithFrame:(CGRect)frame sticker:(nullable MSSticker *)sticker;//è·å–åŠ¨ç”»æ’­æ”¾ä¸€éçš„æ—¶é—´ å¦‚æœæ˜¯gif@property(nonatomic, readonly) NSTimeInterval animationDuration;//å¼€å§‹åŠ¨ç”»-(void) startAnimating;//ç»“æŸåŠ¨ç”»-(void) stopAnimating;//è·å–åŠ¨ç”»çŠ¶æ€- (BOOL)isAnimating; éœ€è¦æ³¨æ„ï¼ŒMSStickerViewå¦‚æœåŠ è½½çš„æ˜¯gifç±»å‹çš„è¡¨æƒ…è´´å›¾ï¼Œé»˜è®¤ä¸ä¼šæ’­æ”¾åŠ¨ç”»ï¼Œå¼€å‘è€…å¯ä»¥è°ƒç”¨å¼€å§‹åŠ¨ç”»çš„æ–¹æ³•æ¥è¿›è¡ŒgifåŠ¨ç”»çš„æ’­æ”¾ã€‚ 8.è¡¨æƒ…åŒ…è§†å›¾æ§åˆ¶å™¨MSStickerBrowserViewControllerå…¶å®é€šè¿‡å‰é¢çš„å†…å®¹ï¼Œå·²ç»å¯ä»¥è‡ªå®šä¹‰å¼€å‘ä¸€ä¸ªè¡¨æƒ…åŒ…Messages Appäº†ï¼Œä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªè§†å›¾æ§åˆ¶å™¨ç±»MSStickerBrowserViewControllerï¼Œè¿™ä¸ªç±»å¯ä»¥æ›´åŠ ç®€å•æ–¹é¢çš„åˆ›å»ºè¡¨æƒ…åŒ…è§†å›¾æ§åˆ¶å™¨ã€‚è¦äº†è§£MSStickerBrowserViewControllerç±»ï¼Œé¦–å…ˆåº”è¯¥å…ˆäº†è§£MSStickerBrowserViewç±»ï¼Œè¿™ä¸¤ä¸ªç±»çš„å…³ç³»ååˆ†ç±»ä¼¼äºUITableViewControllerä¸UITableViewç±»çš„å…³ç³»ã€‚MSStickerBrowserViewæ˜¯ç”¨äºå±•ç¤ºè¡¨æƒ…è§†å›¾çš„å®¹å™¨ï¼Œå…¶ç»§æ‰¿è‡ªUIViewï¼Œä½†å´å’ŒUICollectionViewååˆ†ç±»ä¼¼ï¼Œå…¶ä¸­æ–¹æ³•è§£æå¦‚ä¸‹ï¼š 12345678910111213141516171819202122//åˆå§‹åŒ–æ–¹æ³• è®¾ç½®frame å’Œå…¶ä¸­è¡¨æƒ…è§†å›¾çš„å°ºå¯¸æ¨¡å¼/*typedef NS_ENUM(NSInteger, MSStickerSize) &#123; //å°å°ºå¯¸ MSStickerSizeSmall, //æ ‡å‡†å°ºå¯¸ MSStickerSizeRegular, //å¤§å°ºå¯¸ MSStickerSizeLarge&#125; NS_ENUM_AVAILABLE_IOS(10_0);*/- (instancetype)initWithFrame:(CGRect)frame stickerSize:(MSStickerSize)stickerSize NS_DESIGNATED_INITIALIZER;//æ•°æ®æºä»£ç†@property (nonatomic, weak, nullable) id &lt;MSStickerBrowserViewDataSource&gt; dataSource;//å½“å‰çš„æ»‘åŠ¨ä½ç½®@property (nonatomic, assign, readwrite) CGPoint contentOffset;//å†…å®¹åç§»å°ºå¯¸@property (nonatomic, assign, readwrite) UIEdgeInsets contentInset;//è®¾ç½®å½“å‰çš„æ»‘åŠ¨ä½ç½®- (void)setContentOffset:(CGPoint)contentOffset animated:(BOOL)animated;//åˆ·æ–°æ•°æ®- (void)reloadData; MSStickerBrowserViewçš„æ•°æ®å¡«å……éœ€è¦åœ¨ä»£ç†æ–¹æ³•ä¸­å®ç°ï¼Œå¦‚ä¸‹ï¼š 1234//è®¾ç½®è¡¨æƒ…è´´å›¾ä¸ªæ•°- (NSInteger)numberOfStickersInStickerBrowserView:(MSStickerBrowserView *)stickerBrowserView;//è®¾ç½®å…·ä½“æ¯ä¸ªä½ç½®çš„è¡¨æƒ…è´´å›¾- (MSSticker *)stickerBrowserView:(MSStickerBrowserView *)stickerBrowserView stickerAtIndex:(NSInteger)index; å†çœ‹MSStickerBrowserViewControllerå°±ååˆ†å®¹æ˜“äº†ï¼Œå®ƒåªæ˜¯å°†MSStickerBrowserViewå°è£…åœ¨äº†ä¸€ä¸ªUIViewControllerä¸­ï¼Œå¹¶ä¸”è¿™ä¸ªUIViewControlleréµå®ˆäº†MSStickerBrowserViewDataSourceåè®®ï¼Œå¼€å‘è€…ç›´æ¥å®ç°åè®®æ–¹æ³•å³å¯ã€‚ å››ã€å¼€å‘Messages Appä¸­çš„å»ºè®®ä¸‹é¢æ˜¯Appleå¯¹Messages Appçš„å®šä½å’Œä¸€äº›å»ºè®®ï¼Œè¿˜æœ‰æˆ‘çš„ä¸€äº›ç†è§£ï¼š 1.ç¡®ä¿åº”ç”¨æ˜¯æœ‰ç”¨çš„å¹¶ä¸”æ˜“äºç†è§£ã€‚ 2.åŠŸèƒ½è¦èšç„¦å•ä¸€ï¼Œä¸è¦ç»„åˆå¤šç§åŠŸèƒ½åœ¨ä¸€èµ·ã€‚ 3.Messagesé€šå¸¸ç”¨åœ¨åŒäººéæ­£å¼çš„äº¤è°ˆä¸­ï¼Œåº”ä»è¿™é‡Œå…¥æ‰‹ï¼Œè®©äº¤æµæ›´åŠ æœ‰è¶£ã€‚ 4.Messagesçš„æœ€å¤§ä¸¤ç‚¹æ˜¯åˆ†äº«ï¼Œåˆ©ç”¨è¿™ä¸€ç‚¹å‡ºå‘å¼€å‘Messages Appã€‚ 5.æ’å›¾å†…å®¹å¸ƒå±€è¦æ³¨æ„ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å°†å†…å®¹å˜ä¸ºåœ†è§’ï¼Œä¸è¦æŠŠé‡è¦çš„ä¿¡æ¯æ”¾åœ¨è§’è½ã€‚ 6.æ³¨æ„ï¼Œåœ¨ç´§å‡‘æ¨¡å¼ä¸‹ï¼ŒMessages Appçš„ç•Œé¢æ˜¯ä¸å…è®¸æ°´å¹³æ»šåŠ¨çš„ã€‚ 7.åŒæ ·ï¼Œåœ¨ç´§å‡‘æ¨¡å¼ä¸‹ï¼ŒMessages Appä¸å…è®¸é”®ç›˜è¾“å…¥ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOS10ä¸“é¢˜","slug":"iOS10ä¸“é¢˜","permalink":"http://huishao.cc/categories/iOS10ä¸“é¢˜/"}],"tags":[],"keywords":[{"name":"iOS10ä¸“é¢˜","slug":"iOS10ä¸“é¢˜","permalink":"http://huishao.cc/categories/iOS10ä¸“é¢˜/"}]},{"title":"iOS10é€šçŸ¥æ¡†æ¶UserNotificationç†è§£ä¸åº”ç”¨","slug":"255iOS10é€šçŸ¥æ¡†æ¶UserNotificationç†è§£ä¸åº”ç”¨","date":"2016-09-17T16:00:00.000Z","updated":"2021-07-12T02:29:36.715Z","comments":true,"path":"2016/09/18/255iOS10é€šçŸ¥æ¡†æ¶UserNotificationç†è§£ä¸åº”ç”¨/","link":"","permalink":"http://huishao.cc/2016/09/18/255iOS10é€šçŸ¥æ¡†æ¶UserNotificationç†è§£ä¸åº”ç”¨/","excerpt":"","text":"iOS10é€šçŸ¥æ¡†æ¶UserNotificationç†è§£ä¸åº”ç”¨ä¸€ã€å¼•è¨€å…³äºé€šçŸ¥ï¼Œæ— è®ºä¸è¿œç¨‹Pushè¿˜æ˜¯æœ¬åœ°é€šçŸ¥ï¼Œä»¥å¾€çš„iOSç³»ç»Ÿæš´æ¼ç»™å¼€å‘è€…çš„æ¥å£éƒ½æ˜¯ååˆ†æœ‰é™çš„ï¼Œå¼€å‘è€…åªèƒ½å¯¹æ ‡é¢˜å’Œå†…å®¹è¿›è¡Œç®€å•çš„å®šä¹‰ï¼Œè‡³äºUIå±•ç¤ºå’Œç”¨æˆ·äº¤äº’è¡Œä¸ºç›¸å…³çš„éƒ¨åˆ†ï¼Œå¼€å‘è€…å¼€å‘èµ·æ¥éƒ½ååˆ†å›°éš¾ã€‚è‡³äºæœ¬åœ°é€šçŸ¥ï¼ŒiOS10ä¹‹å‰é‡‡ç”¨çš„æ˜¯UILocationNotificationç±»ï¼Œè¿œç¨‹é€šçŸ¥æœ‰è‹¹æœæœåŠ¡å™¨è¿›è¡Œè½¬å‘ï¼Œæœ¬åœ°é€šçŸ¥å’Œè¿œç¨‹é€šçŸ¥å…¶å›è°ƒçš„å¤„ç†éƒ½æ˜¯é€šè¿‡AppDelegateä¸­çš„å‡ ä¸ªå›è°ƒæ–¹æ³•æ¥å®Œæˆã€‚iOS10ç³»ç»Ÿä¸­ï¼Œé€šçŸ¥åŠŸèƒ½çš„å¢å¼ºæ˜¯ä¸€å¤§ä¼˜åŒ–ä¹‹å¤„ï¼ŒiOS10ä¸­å°†é€šçŸ¥åŠŸèƒ½æ•´åˆæˆäº†ä¸€ä¸ªæ¡†æ¶UserNotificationï¼Œå…¶ç»“æ„ååˆ†ç±»ä¼¼äºiOS8ä¸­çš„UIWebViewå‘WebKitæ¡†æ¶æ•´åˆçš„æ€è·¯ã€‚å¹¶ä¸”UserNotificationç›¸æ¯”ä¹‹å‰çš„é€šçŸ¥åŠŸèƒ½æ›´åŠ å¼ºå¤§ï¼Œä¸»è¦è¡¨ç°åœ¨å¦‚ä¸‹å‡ ç‚¹ï¼š 1.é€šçŸ¥å¤„ç†ä»£ç å¯ä»¥ä»AppDelegateä¸­å‰¥ç¦»ã€‚ 2.é€šçŸ¥çš„æ³¨å†Œï¼Œè®¾ç½®ï¼Œå¤„ç†æ›´åŠ ç»“æ„åŒ–ï¼Œæ›´æ˜“äºæ¨¡å—åŒ–å¼€å‘ã€‚ 3.UserNotificationæ”¯æŒè‡ªå®šä¹‰é€šçŸ¥éŸ³æ•ˆå’Œå¯åŠ¨å›¾ã€‚ 4.UserNotificationæ”¯æŒå‘é€šçŸ¥å†…å®¹ä¸­æ·»åŠ åª’ä½“é™„ä»¶ï¼Œä¾‹å¦‚éŸ³é¢‘ï¼Œè§†é¢‘ã€‚ 5.UserNotificationæ”¯æŒå¼€å‘è€…å®šä¹‰å¤šå¥—é€šçŸ¥æ¨¡æ¿ã€‚ 6.UserNotificationæ”¯æŒå®Œå…¨è‡ªå®šä¹‰çš„é€šçŸ¥ç•Œé¢ã€‚ 7.UserNotificationæ”¯æŒè‡ªå®šä¹‰é€šçŸ¥ä¸­çš„ç”¨æˆ·äº¤äº’æŒ‰é’®ã€‚ 8.é€šçŸ¥çš„è§¦å‘æ›´åŠ å®¹æ˜“ç®¡ç†ã€‚ ä»ä¸Šé¢åˆ—ä¸¾çš„å‡ ç‚¹å°±å¯ä»¥çœ‹å‡ºï¼ŒiOS10ä¸­çš„UsreNotificationçœŸçš„æ˜¯ä¸€ä¸ªå¤§çš„æ”¹è¿›ï¼Œæ¸©æ•…è€ŒçŸ¥æ–°ï¼Œå…³äºiOSä¹‹å‰ç‰ˆæœ¬æœ¬åœ°é€šçŸ¥å’Œè¿œç¨‹é€šçŸ¥çš„ç›¸å…³å†…å®¹è¯·æŸ¥çœ‹å¦‚ä¸‹åšå®¢ï¼š æœ¬åœ°æ¨é€ï¼šhttp://my.oschina.net/u/2340880/blog/405491ã€‚ è¿œç¨‹æ¨é€ï¼šhttp://my.oschina.net/u/2340880/blog/413584ã€‚ äºŒã€UserNotificationæ¦‚è§ˆå­¦ä¹ ä¸€ä¸ªæ–°çš„æ¡†æ¶æˆ–çŸ¥è¯†æ¨¡å—æ—¶ï¼Œå®è§‚ä¸Šäº†è§£å…¶ä½“ç³»ï¼Œå¤§ä½“ä¸ŠæŒæ¡å…¶ç»“æ„æ˜¯ååˆ†å¿…è¦çš„ï¼Œè¿™æ›´æœ‰åˆ©äºæˆ‘ä»¬å¯¹è¿™ä¸ªæ¡†æ¶æˆ–æ¨¡å—çš„æ•´ä½“æŠŠæ¡ä¸ç†è§£ã€‚UserNotificationæ¡†æ¶ä¸­æ‹†åˆ†å®šä¹‰äº†è®¸å¤šç±»ã€æšä¸¾å’Œç»“æ„ä½“ï¼Œå…¶ä¸­è¿˜å®šä¹‰äº†è®¸å¤šå¸¸é‡ï¼Œç±»ä¸ç±»ä¹‹é—´è™½ç„¶å…³ç³»å¤æ‚ï¼Œä½†è„‰ç»œååˆ†æ¸…æ™°ï¼ŒæŠŠæ¡ä½ä¸»çº¿ï¼Œå±‚å±‚åˆ†æï¼Œè¾¹å¾ˆå®¹æ˜“ç†è§£å’Œåº”ç”¨UserNotificationæ¡†æ¶ã€‚ ä¸‹å›¾ä¸­åˆ—ä¸¾äº†UserNotificationæ¡†æ¶ä¸­æ‰€æœ‰æ ¸å¿ƒçš„ç±»ï¼š å¦‚å›¾ä¸­å…³ç³»æ‰€ç¤ºï¼ŒUserNotificationæ¡†æ¶ä¸­çš„æ ¸å¿ƒç±»åˆ—ä¸¾å¦‚ä¸‹ï¼š UNNotificationCenterï¼šé€šçŸ¥ç®¡ç†ä¸­å¿ƒï¼Œå•ä¾‹ï¼Œé€šçŸ¥çš„æ³¨å†Œï¼Œæ¥æ”¶é€šçŸ¥åçš„å›è°ƒå¤„ç†ç­‰ï¼Œæ˜¯UserNotificationæ¡†æ¶çš„æ ¸å¿ƒã€‚ UNNotificationï¼šé€šçŸ¥å¯¹è±¡ï¼Œå…¶ä¸­å°è£…äº†é€šçŸ¥è¯·æ±‚ã€‚ UNNotificationSettingsï¼šé€šçŸ¥ç›¸å…³è®¾ç½®ã€‚ UNNotificationCategoryï¼šé€šçŸ¥æ¨¡æ¿ã€‚ UNNotificationActionï¼šç”¨äºå®šä¹‰é€šçŸ¥æ¨¡æ¿ä¸­çš„ç”¨æˆ·äº¤äº’è¡Œä¸ºã€‚ UNNotificationRequestï¼šæ³¨å†Œé€šçŸ¥è¯·æ±‚ï¼Œå…¶ä¸­å®šä¹‰äº†é€šçŸ¥çš„å†…å®¹å’Œè§¦å‘æ–¹å¼ã€‚ UNNotificationResponseï¼šæ¥æ”¶åˆ°é€šçŸ¥åçš„å›æ‰§ã€‚ UNNotificationContentï¼šé€šçŸ¥çš„å…·ä½“å†…å®¹ã€‚ UNNotificationTriggerï¼šé€šçŸ¥çš„è§¦å‘å™¨ï¼Œç”±å…¶å­ç±»å…·ä½“å®šä¹‰ã€‚ UNNotificationAttachmentï¼šé€šçŸ¥é™„ä»¶ç±»ï¼Œä¸ºé€šçŸ¥å†…å®¹æ·»åŠ åª’ä½“é™„ä»¶ã€‚ UNNotificationSoundï¼šå®šä¹‰é€šçŸ¥éŸ³æ•ˆã€‚ UNPushNotificationTriggerï¼šè¿œç¨‹é€šçŸ¥çš„è§¦å‘å™¨ï¼ŒUNNotificationTriggerå­ç±»ã€‚ UNTimeInervalNotificationTriggerï¼šè®¡æ—¶é€šçŸ¥çš„è§¦å‘å™¨ï¼ŒUNNotificationTriggerå­ç±»ã€‚ UNCalendarNotificationTriggerï¼šå‘¨æœŸé€šçŸ¥çš„è§¦å‘å™¨ï¼ŒUNNotificationTriggerå­ç±»ã€‚ UNLocationNotificationTriggerï¼šåœ°åŸŸé€šçŸ¥çš„è§¦å‘å™¨ï¼ŒUNNotificationTriggerå­ç±»ã€‚ UNNotificationCenterDelegateï¼šåè®®ï¼Œå…¶ä¸­æ–¹æ³•ç”¨äºç›‘å¬é€šçŸ¥çŠ¶æ€ã€‚ ä¸‰ã€è¿›è¡Œé€šçŸ¥ç”¨æˆ·æƒé™ç”³è¯·ä¸åˆ›å»ºæ™®é€šçš„æœ¬åœ°é€šçŸ¥è¦åœ¨iOSç³»ç»Ÿä¸­ä½¿ç”¨é€šçŸ¥ï¼Œå¿…é¡»è·å–åˆ°ç”¨æˆ·æƒé™ï¼ŒUserNotificationæ¡†æ¶ä¸­ç”³è¯·é€šçŸ¥ç”¨æˆ·æƒé™éœ€è¦é€šè¿‡UNNotificationCenteræ¥å®Œæˆï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678//è¿›è¡Œç”¨æˆ·æƒé™çš„ç”³è¯·[[UNUserNotificationCenter currentNotificationCenter] requestAuthorizationWithOptions:UNAuthorizationOptionBadge|UNAuthorizationOptionSound|UNAuthorizationOptionAlert|UNAuthorizationOptionCarPlay completionHandler:^(BOOL granted, NSError * _Nullable error) &#123; //åœ¨blockä¸­ä¼šä¼ å…¥å¸ƒå°”å€¼grantedï¼Œè¡¨ç¤ºç”¨æˆ·æ˜¯å¦åŒæ„ if (granted) &#123; //å¦‚æœç”¨æˆ·æƒé™ç”³è¯·æˆåŠŸï¼Œè®¾ç½®é€šçŸ¥ä¸­å¿ƒçš„ä»£ç† [UNUserNotificationCenter currentNotificationCenter].delegate = self; &#125;&#125;]; ç”³è¯·ç”¨æˆ·æƒé™çš„æ–¹æ³•ä¸­éœ€è¦ä¼ å…¥ä¸€ä¸ªæƒé™å†…å®¹çš„å‚æ•°ï¼Œå…¶æšä¸¾å®šä¹‰å¦‚ä¸‹ï¼š 12345678910typedef NS_OPTIONS(NSUInteger, UNAuthorizationOptions) &#123; //å…è®¸æ›´æ–°appä¸Šçš„é€šçŸ¥æ•°å­— UNAuthorizationOptionBadge = (1 &lt;&lt; 0), //å…è®¸é€šçŸ¥å£°éŸ³ UNAuthorizationOptionSound = (1 &lt;&lt; 1), //å…è®¸é€šçŸ¥å¼¹å‡ºè­¦å‘Š UNAuthorizationOptionAlert = (1 &lt;&lt; 2), //å…è®¸è½¦è½½è®¾å¤‡æ¥æ”¶é€šçŸ¥ UNAuthorizationOptionCarPlay = (1 &lt;&lt; 3),&#125;; è·å–åˆ°ç”¨æˆ·æƒé™åï¼Œä½¿ç”¨UserNotificationåˆ›å»ºæ™®é€šçš„é€šçŸ¥ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021//é€šçŸ¥å†…å®¹ç±»UNMutableNotificationContent * content = [UNMutableNotificationContent new];//è®¾ç½®é€šçŸ¥è¯·æ±‚å‘é€æ—¶ appå›¾æ ‡ä¸Šæ˜¾ç¤ºçš„æ•°å­—content.badge = @2;//è®¾ç½®é€šçŸ¥çš„å†…å®¹content.body = @\"è¿™æ˜¯iOS10çš„æ–°é€šçŸ¥å†…å®¹ï¼šæ™®é€šçš„iOSé€šçŸ¥\";//é»˜è®¤çš„é€šçŸ¥æç¤ºéŸ³content.sound = [UNNotificationSound defaultSound];//è®¾ç½®é€šçŸ¥çš„å‰¯æ ‡é¢˜content.subtitle = @\"è¿™é‡Œæ˜¯å‰¯æ ‡é¢˜\";//è®¾ç½®é€šçŸ¥çš„æ ‡é¢˜content.title = @\"è¿™é‡Œæ˜¯é€šçŸ¥çš„æ ‡é¢˜\";//è®¾ç½®ä»é€šçŸ¥æ¿€æ´»appæ—¶çš„launchImageå›¾ç‰‡content.launchImageName = @\"lun\";//è®¾ç½®5Sä¹‹åæ‰§è¡ŒUNTimeIntervalNotificationTrigger * trigger = [UNTimeIntervalNotificationTrigger triggerWithTimeInterval:5 repeats:NO];UNNotificationRequest * request = [UNNotificationRequest requestWithIdentifier:@\"NotificationDefault\" content:content trigger:trigger];//æ·»åŠ é€šçŸ¥è¯·æ±‚[[UNUserNotificationCenter currentNotificationCenter] addNotificationRequest:request withCompletionHandler:^(NSError * _Nullable error) &#123; &#125;]; æ•ˆæœå¦‚ä¸‹é¢å›¾ç¤ºï¼š å››ã€é€šçŸ¥éŸ³æ•ˆç±»UNNotificationSoundé€šçŸ¥å¯ä»¥è¿›è¡Œè‡ªå®šä¹‰çš„éŸ³æ•ˆè®¾ç½®ï¼Œå…¶ä¸­æ–¹æ³•å¦‚ä¸‹ï¼š 1234567//ç³»ç»Ÿé»˜è®¤çš„éŸ³æ•ˆ+ (instancetype)defaultSound;//è‡ªå®šä¹‰çš„éŸ³é¢‘éŸ³æ•ˆ/*æ³¨æ„ï¼ŒéŸ³é¢‘æ–‡ä»¶å¿…é¡»åœ¨bundleä¸­æˆ–è€…åœ¨Library/Soundsç›®å½•ä¸‹*/+ (instancetype)soundNamed:(NSString *)name __WATCHOS_PROHIBITED; äº”ã€é€šçŸ¥è§¦å‘å™¨UNNotificationTriggeré€šçŸ¥è§¦å‘å™¨å¯ä»¥ç†è§£ä¸ºå®šä¹‰é€šçŸ¥çš„å‘é€æ—¶é—´ï¼ŒUNNotificationTriggeræ˜¯è§¦å‘å™¨çš„åŸºç±»ï¼Œå…·ä½“çš„è§¦å‘å™¨ç”±å®ƒçš„å››ä¸ªå­ç±»å®ç°ï¼Œå®é™…ä¸Šï¼Œå¼€å‘è€…åœ¨ä»£ç ä¸­å¯èƒ½ä¼šç”¨åˆ°çš„è§¦å‘å™¨åªæœ‰ä¸‰ç§ï¼ŒUNPushNotificationTriggerè¿œç¨‹æ¨é€è§¦å‘å™¨å¼€å‘è€…ä¸éœ€è¦åˆ›å»ºä½¿ç”¨ï¼Œè¿œç¨‹é€šçŸ¥æœ‰è¿œç¨‹æœåŠ¡å™¨è§¦å‘ï¼Œå¼€å‘è€…åªéœ€è¦åˆ›å»ºä¸æœ¬åœ°é€šçŸ¥æœ‰å…³çš„è§¦å‘å™¨è¿›è¡Œä½¿ç”¨ã€‚ 1.UNTimeIntervalNotificationTriggerUNTimeIntervalNotificationTriggeræ˜¯è®¡æ—¶è§¦å‘å™¨ï¼Œå¼€å‘è€…å¯ä»¥è®¾ç½®å…¶åœ¨æ·»åŠ é€šçŸ¥è¯·æ±‚åä¸€å®šæ—¶é—´å‘é€ã€‚ 1234//åˆ›å»ºè§¦å‘å™¨ åœ¨timeIntervalç§’åè§¦å‘ å¯ä»¥è®¾ç½®æ˜¯å¦å¾ªç¯è§¦å‘+ (instancetype)triggerWithTimeInterval:(NSTimeInterval)timeInterval repeats:(BOOL)repeats;//è·å–ä¸‹æ¬¡è§¦å‘çš„æ—¶é—´ç‚¹- (nullable NSDate *)nextTriggerDate; 2.UNCalendarNotificationTriggerUNCalendarNotificationTriggeræ˜¯æ—¥å†è§¦å‘å™¨ï¼Œå¼€å‘è€…å¯ä»¥è®¾ç½®å…¶åœ¨æŸä¸ªæ—¶é—´ç‚¹è§¦å‘ã€‚ 1234//åˆ›å»ºè§¦å‘å™¨ è®¾ç½®è§¦å‘æ—¶é—´ å¯ä»¥è®¾ç½®æ˜¯å¦å¾ªç¯è§¦å‘+ (instancetype)triggerWithDateMatchingComponents:(NSDateComponents *)dateComponents repeats:(BOOL)repeats;//ä¸‹ä¸€æ¬¡è§¦å‘çš„æ—¶é—´ç‚¹- (nullable NSDate *)nextTriggerDate; 3.UNLocationNotificationTriggerUNLocationNotificationTriggeræ˜¯åœ°åŸŸè§¦å‘å™¨ï¼Œå¼€å‘è€…å¯ä»¥è®¾ç½®å½“ç”¨æˆ·è¿›å…¥æŸä¸€åŒºåŸŸæ—¶è§¦å‘ã€‚ 1234//åœ°åŸŸä¿¡æ¯@property (NS_NONATOMIC_IOSONLY, readonly, copy) CLRegion *region;//åˆ›å»ºè§¦å‘å™¨+ (instancetype)triggerWithRegion:(CLRegion *)region repeats:(BOOL)repeats __WATCHOS_PROHIBITED; å…­ã€ä¸ºé€šçŸ¥å†…å®¹æ·»åŠ é™„ä»¶é™„ä»¶ä¸»è¦æŒ‡çš„æ˜¯åª’ä½“é™„ä»¶ï¼Œä¾‹å¦‚å›¾ç‰‡ï¼ŒéŸ³é¢‘å’Œè§†é¢‘ï¼Œä¸ºé€šçŸ¥å†…å®¹æ·»åŠ é™„ä»¶éœ€è¦ä½¿ç”¨UNNotificationAttachmentç±»ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617//åˆ›å»ºå›¾ç‰‡é™„ä»¶UNNotificationAttachment * attach = [UNNotificationAttachment attachmentWithIdentifier:@\"imageAttach\" URL:[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@\"2\" ofType:@\"jpg\"]] options:nil error:nil];UNMutableNotificationContent * content = [UNMutableNotificationContent new];//è®¾ç½®é™„ä»¶æ•°ç»„content.attachments = @[attach];content.badge = @1;content.body = @\"è¿™æ˜¯iOS10çš„æ–°é€šçŸ¥å†…å®¹ï¼šæ™®é€šçš„iOSé€šçŸ¥\";//é»˜è®¤çš„é€šçŸ¥æç¤ºéŸ³content.sound = [UNNotificationSound defaultSound];content.subtitle = @\"è¿™é‡Œæ˜¯å‰¯æ ‡é¢˜\";content.title = @\"è¿™é‡Œæ˜¯é€šçŸ¥çš„æ ‡é¢˜\";//è®¾ç½®5Sä¹‹åæ‰§è¡ŒUNTimeIntervalNotificationTrigger * trigger = [UNTimeIntervalNotificationTrigger triggerWithTimeInterval:5 repeats:NO];UNNotificationRequest * request = [UNNotificationRequest requestWithIdentifier:@\"NotificationDefaultImage\" content:content trigger:trigger];[[UNUserNotificationCenter currentNotificationCenter] addNotificationRequest:request withCompletionHandler:^(NSError * _Nullable error) &#123; &#125;]; æ•ˆæœå¦‚ä¸‹å›¾ï¼š éœ€è¦æ³¨æ„ï¼ŒUNNotificationContentçš„é™„ä»¶æ•°ç»„è™½ç„¶æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä½†æ˜¯ç³»ç»Ÿçš„é€šçŸ¥æ¨¡æ¿åªèƒ½å±•ç¤ºå…¶ä¸­çš„ç¬¬ä¸€ä¸ªé™„ä»¶ï¼Œè®¾ç½®å¤šä¸ªé™„ä»¶ä¹Ÿä¸ä¼šæœ‰é¢å¤–çš„æ•ˆæœï¼Œä½†æ˜¯å¦‚æœå¼€å‘è€…è¿›è¡Œé€šçŸ¥æ¨¡æ¿UIçš„è‡ªå®šä¹‰ï¼Œåˆ™æ­¤æ•°ç»„å°±å¯ä»¥æ´¾ä¸Šç”¨åœºäº†ã€‚éŸ³é¢‘é™„ä»¶ç•Œé¢å¦‚ä¸‹ï¼š éœ€è¦æ³¨æ„ï¼Œæ·»åŠ é™„ä»¶çš„æ ¼å¼å’Œå¤§å°éƒ½æœ‰ä¸€å®šçš„è¦æ±‚ï¼Œå¦‚ä¸‹è¡¨æ ¼æ‰€ç¤ºï¼š åˆ›å»ºé€šçŸ¥å†…å®¹é™„ä»¶UNNotificationAttachmentå®ä¾‹çš„æ–¹æ³•ä¸­æœ‰ä¸€ä¸ªoptionsé…ç½®å­—å…¸ï¼Œè¿™ä¸ªå­—å…¸ä¸­å¯ä»¥è¿›è¡Œé…ç½®çš„é”®å€¼å¯¹å¦‚ä¸‹ï¼š 12345678//é…ç½®é™„ä»¶çš„ç±»å‹çš„é”® éœ€è¦è®¾ç½®ä¸ºNSStringç±»å‹çš„å€¼ï¼Œå¦‚æœä¸è®¾ç½® åˆ™é»˜è®¤ä»æ‰©å±•åä¸­æ¨æ–­extern NSString * const UNNotificationAttachmentOptionsTypeHintKey __IOS_AVAILABLE(10.0) __WATCHOS_AVAILABLE(3.0);//é…ç½®æ˜¯å¦éšè—ç¼©ç•¥å›¾çš„é”® éœ€è¦é…ç½®ä¸ºNSNumber 0æˆ–è€…1extern NSString * const UNNotificationAttachmentOptionsThumbnailHiddenKey __IOS_AVAILABLE(10.0) __WATCHOS_AVAILABLE(3.0);//é…ç½®ä½¿ç”¨ä¸€ä¸ªæ ‡å‡†çš„çŸ©å½¢æ¥å¯¹ç¼©ç•¥å›¾è¿›è¡Œè£å‰ªï¼Œéœ€è¦é…ç½®ä¸ºCGRectCreateDictionaryRepresentation(CGRect)åˆ›å»ºçš„çŸ©å½¢å¼•ç”¨extern NSString * const UNNotificationAttachmentOptionsThumbnailClippingRectKey __IOS_AVAILABLE(10.0) __WATCHOS_AVAILABLE(3.0);//ä½¿ç”¨è§†é¢‘ä¸­çš„æŸä¸€å¸§ä½œä¸ºç¼©ç•¥å›¾ é…ç½®ä¸ºNSNumberæ—¶é—´extern NSString * const UNNotificationAttachmentOptionsThumbnailTimeKey __IOS_AVAILABLE(10.0) __WATCHOS_AVAILABLE(3.0); ä¸ƒã€å®šä¹‰é€šçŸ¥æ¨¡æ¿UNNotificationCategoryèŠå¤©ç±»è½¯ä»¶åœ¨iOSç³»ç»Ÿä¸­ï¼Œå¸¸å¸¸é‡‡ç”¨åå°æ¨é€çš„æ–¹å¼æ¨é€æ–°æ¶ˆæ¯ï¼Œç”¨æˆ·å¯ä»¥åœ¨ä¸è¿›å…¥åº”ç”¨ç¨‹åºçš„æƒ…å†µä¸‹ï¼Œç›´æ¥åœ¨å·¦é¢å›å¤é€šçŸ¥æ¨é€è¿‡æ¥çš„ä¿¡æ¯ï¼Œè¿™ç§åŠŸèƒ½å°±æ˜¯é€šè¿‡UNNotificationCategoryæ¨¡æ¿ä¸UNNotificationActionç”¨æˆ·æ´»åŠ¨æ¥å®ç°çš„ã€‚å…³äºæ–‡æœ¬å›å¤æ¡†ï¼ŒUserNotificationæ¡†æ¶ä¸­æä¾›äº†UNTextInputNotificationActionç±»ï¼Œå…¶æ˜¯UNNotificationActionçš„å­ç±»ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132//åˆ›å»ºç”¨æˆ·æ´»åŠ¨/*optionså‚æ•°å¯é€‰å¦‚ä¸‹ï¼š//éœ€è¦åœ¨è§£å¼€é”å±ä¸‹ä½¿ç”¨UNNotificationActionOptionAuthenticationRequired//æ˜¯å¦æŒ‡ç¤ºæœ‰ç ´åæ€§UNNotificationActionOptionDestructive//æ˜¯å¦å…è®¸æ´»åŠ¨åœ¨åå°å¯åŠ¨appUNNotificationActionOptionForeground//æ— è®¾ç½®UNNotificationActionOptionNone*/UNTextInputNotificationAction * action = [UNTextInputNotificationAction actionWithIdentifier:@\"action\" title:@\"å›å¤\" options:UNNotificationActionOptionAuthenticationRequired textInputButtonTitle:@\"æ´»åŠ¨\" textInputPlaceholder:@\"è¯·è¾“å…¥å›å¤å†…å®¹\"];//åˆ›å»ºé€šçŸ¥æ¨¡æ¿UNNotificationCategory * category = [UNNotificationCategory categoryWithIdentifier:@\"myNotificationCategoryText\" actions:@[action] intentIdentifiers:@[] options:UNNotificationCategoryOptionCustomDismissAction];UNMutableNotificationContent * content = [UNMutableNotificationContent new];content.badge = @1;content.body = @\"è¿™æ˜¯iOS10çš„æ–°é€šçŸ¥å†…å®¹ï¼šæ™®é€šçš„iOSé€šçŸ¥\";//é»˜è®¤çš„é€šçŸ¥æç¤ºéŸ³content.sound = [UNNotificationSound defaultSound];content.subtitle = @\"è¿™é‡Œæ˜¯å‰¯æ ‡é¢˜\";content.title = @\"è¿™é‡Œæ˜¯é€šçŸ¥çš„æ ‡é¢˜\";//è®¾ç½®é€šçŸ¥å†…å®¹å¯¹åº”çš„æ¨¡æ¿ éœ€è¦æ³¨æ„ è¿™é‡Œçš„å€¼è¦ä¸å¯¹åº”æ¨¡æ¿idä¸€è‡´content.categoryIdentifier = @\"myNotificationCategoryText\";//è®¾ç½®5Sä¹‹åæ‰§è¡ŒUNTimeIntervalNotificationTrigger * trigger = [UNTimeIntervalNotificationTrigger triggerWithTimeInterval:5 repeats:NO]; [[UNUserNotificationCenter currentNotificationCenter] setNotificationCategories:[NSSet setWithObjects:category, nil]];UNNotificationRequest * request = [UNNotificationRequest requestWithIdentifier:@\"NotificationDefaultText\" content:content trigger:trigger]; [[UNUserNotificationCenter currentNotificationCenter] addNotificationRequest:request withCompletionHandler:^(NSError * _Nullable error) &#123; &#125;]; éœ€è¦æ³¨æ„ï¼Œè¦ä½¿ç”¨æ¨¡æ¿ï¼Œé€šçŸ¥å†…å®¹UNNotificationContentçš„categoryIdentifierè¦ä¸UNNotificationCategoryçš„idä¸€è‡´ã€‚æ•ˆæœå¦‚ä¸‹ï¼š ä¹Ÿå¯ä»¥ä¸ºé€šçŸ¥æ¨¡æ¿æ·»åŠ å¤šä¸ªè‡ªå®šä¹‰çš„ç”¨æˆ·äº¤äº’æŒ‰é’®ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314151617181920UNNotificationAction * action = [UNNotificationAction actionWithIdentifier:@\"action\" title:@\"æ´»åŠ¨æ ‡é¢˜1\" options:UNNotificationActionOptionNone]; UNNotificationAction * action2 = [UNNotificationAction actionWithIdentifier:@\"action\" title:@\"æ´»åŠ¨æ ‡é¢˜2\" options:UNNotificationActionOptionNone]; UNNotificationAction * action3 = [UNNotificationAction actionWithIdentifier:@\"action\" title:@\"æ´»åŠ¨æ ‡é¢˜3\" options:UNNotificationActionOptionNone]; UNNotificationAction * action4 = [UNNotificationAction actionWithIdentifier:@\"action\" title:@\"æ´»åŠ¨æ ‡é¢˜4\" options:UNNotificationActionOptionNone]; UNNotificationCategory * category = [UNNotificationCategory categoryWithIdentifier:@\"myNotificationCategoryBtn\" actions:@[action,action2,action3,action4] intentIdentifiers:@[] options:UNNotificationCategoryOptionCustomDismissAction]; UNMutableNotificationContent * content = [UNMutableNotificationContent new]; content.badge = @1; content.body = @\"è¿™æ˜¯iOS10çš„æ–°é€šçŸ¥å†…å®¹ï¼šæ™®é€šçš„iOSé€šçŸ¥\"; //é»˜è®¤çš„é€šçŸ¥æç¤ºéŸ³ content.sound = [UNNotificationSound defaultSound]; content.subtitle = @\"è¿™é‡Œæ˜¯å‰¯æ ‡é¢˜\"; content.title = @\"è¿™é‡Œæ˜¯é€šçŸ¥çš„æ ‡é¢˜\"; content.categoryIdentifier = @\"myNotificationCategoryBtn\"; //è®¾ç½®5Sä¹‹åæ‰§è¡Œ UNTimeIntervalNotificationTrigger * trigger = [UNTimeIntervalNotificationTrigger triggerWithTimeInterval:5 repeats:NO]; UNNotificationRequest * request = [UNNotificationRequest requestWithIdentifier:@\"NotificationDefault\" content:content trigger:trigger]; [[UNUserNotificationCenter currentNotificationCenter] setNotificationCategories:[NSSet setWithObjects:category, nil]]; [[UNUserNotificationCenter currentNotificationCenter] addNotificationRequest:request withCompletionHandler:^(NSError * _Nullable error) &#123; &#125;]; éœ€è¦æ³¨æ„ï¼Œç³»ç»Ÿæ¨¡æ¿æœ€å¤šæ”¯æŒæ·»åŠ 4ä¸ªç”¨æˆ·äº¤äº’æŒ‰é’®ï¼Œå¦‚ä¸‹å›¾ï¼š å…«ã€è‡ªå®šä¹‰é€šçŸ¥æ¨¡æ¿UIé€šè¿‡å‰è¾¹çš„ä»‹ç»ï¼Œæˆ‘ä»¬å‘ç°é€šè¿‡UserNotificationæ¡†æ¶å¼€å‘è€…å·²ç»å¯ä»¥å®Œæˆè®¸å¤šä»æ¥å¾ˆéš¾å®ç°çš„æ•ˆæœã€‚ç„¶è€Œè¿™éƒ½ä¸æ˜¯UserNotificationæ¡†æ¶æœ€å¼ºå¤§çš„åœ°æ–¹ï¼ŒUserNotificationæ¡†æ¶æœ€å¼ºå¤§çš„åœ°æ–¹åœ¨äºå…¶å¯ä»¥å®Œå…¨è‡ªå®šä¹‰é€šçŸ¥çš„UIç•Œé¢ã€‚ å®Œå…¨è‡ªå®šä¹‰é€šçŸ¥ç•Œé¢æ˜¯é€šè¿‡iOSæ‰©å±•æ¥å®ç°çš„ï¼Œé¦–å…ˆåˆ›å»ºä¸€ä¸ªæ–°çš„targetï¼Œå¦‚ä¸‹å›¾ï¼š é€‰æ‹©Notification Contentï¼Œå¦‚ä¸‹ï¼š åˆ›å»ºå®Œæˆåï¼Œä¼šå‘ç°å·¥ç¨‹ä¸­å¤šäº†ä¸€ä¸ªNotification Contentçš„æ‰©å±•ï¼Œå…¶ä¸­è‡ªå¸¦ä¸€ä¸ªstoryboardæ–‡ä»¶å’Œä¸€ä¸ªNotificationViewControllerç±»ï¼Œå¼€å‘è€…å¯ä»¥åœ¨storyboardæ–‡ä»¶æˆ–è€…ç›´æ¥åœ¨Controllerç±»ä¸­è¿›è¡Œè‡ªå®šä¹‰ç•Œé¢çš„ç¼–å†™ã€‚ éœ€è¦æ³¨æ„ï¼ŒNotificationViewControllerè‡ªåŠ¨éµå®ˆäº†UNNotificationContentExtensionåè®®ï¼Œè¿™ä¸ªåè®®ä¸“é—¨ç”¨æ¥å¤„ç†è‡ªå®šä¹‰é€šçŸ¥UIçš„å†…å®¹å±•ç¤ºï¼Œå…¶ä¸­æ–¹æ³•åˆ—ä¸¾å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344//æ¥æ”¶åˆ°é€šçŸ¥æ—¶ä¼šè¢«è°ƒç”¨/*å¼€å‘è€…å¯ä»¥ä»notificationå¯¹è±¡ä¸­æ‹¿åˆ°é™„ä»¶ç­‰å†…å®¹è¿›è¡ŒUIåˆ·æ–°*/- (void)didReceiveNotification:(UNNotification *)notification;//å½“ç”¨æˆ·ç‚¹å‡»äº†é€šçŸ¥ä¸­çš„ç”¨æˆ·äº¤äº’æŒ‰é’®æ—¶ä¼šè¢«è°ƒç”¨/*responseå¯¹è±¡ä¸­æœ‰é€šçŸ¥å†…å®¹ç›¸å…³ä¿¡æ¯åœ¨å›è°ƒblockå—completionä¸­ï¼Œå¼€å‘è€…å¯ä»¥ä¼ å…¥ä¸€ä¸ªUNNotificationContentExtensionResponseOptionå‚æ•°æ¥å‘Šè¯‰ç³»ç»Ÿå¦‚ä½•å¤„ç†è¿™æ¬¡ç”¨æˆ·æ´»åŠ¨UNNotificationContentExtensionResponseOptionæšä¸¾ä¸­å¯é€‰å€¼å¦‚ä¸‹ï¼štypedef NS_ENUM(NSUInteger, UNNotificationContentExtensionResponseOption) &#123; //ä¸å…³é—­å½“å‰é€šçŸ¥ç•Œé¢ UNNotificationContentExtensionResponseOptionDoNotDismiss, //å…³é—­å½“å‰é€šçŸ¥ç•Œé¢ UNNotificationContentExtensionResponseOptionDismiss, //å…³é—­å½“å‰é€šçŸ¥ç•Œé¢å¹¶å°†ç”¨æˆ·æ´»åŠ¨ä¼ é€’ç»™å®¿ä¸»appå¤„ç† UNNotificationContentExtensionResponseOptionDismissAndForwardAction,&#125; __IOS_AVAILABLE(10_0) __TVOS_UNAVAILABLE __WATCHOS_UNAVAILABLE __OSX_UNAVAILABLE;*/- (void)didReceiveNotificationResponse:(UNNotificationResponse *)response completionHandler:(void (^)(UNNotificationContentExtensionResponseOption option))completion;/*è¿™ä¸ªå±æ€§ä½œä¸ºgetæ–¹æ³•è¿›è¡Œå®ç° è¿™ä¸ªæ–¹æ³•ç”¨æ¥è¿”å›ä¸€ä¸ªé€šçŸ¥ç•Œé¢è¦æ˜¾ç¤ºçš„åª’ä½“æŒ‰é’®typedef NS_ENUM(NSUInteger, UNNotificationContentExtensionMediaPlayPauseButtonType) &#123; //ä¸æ˜¾ç¤ºåª’ä½“æŒ‰é’® UNNotificationContentExtensionMediaPlayPauseButtonTypeNone, //é»˜è®¤çš„åª’ä½“æŒ‰é’® å½“ç‚¹å‡»æŒ‰é’®å è¿›è¡Œæ’­æ”¾ä¸æš‚åœçš„åˆ‡æ¢ æŒ‰é’®å§‹ç»ˆæ˜¾ç¤º UNNotificationContentExtensionMediaPlayPauseButtonTypeDefault, //Overlayé£æ ¼ å½“ç‚¹å‡»æŒ‰é’®åï¼Œåª’ä½“æ’­æ”¾ï¼ŒæŒ‰é’®éšè— ç‚¹å‡»åª’ä½“åï¼Œæ’­æ”¾æš‚åœï¼ŒæŒ‰é’®æ˜¾ç¤ºã€‚ UNNotificationContentExtensionMediaPlayPauseButtonTypeOverlay,&#125; __IOS_AVAILABLE(10_0) __TVOS_UNAVAILABLE __WATCHOS_UNAVAILABLE __OSX_UNAVAILABLE;*/@property (nonatomic, readonly, assign) UNNotificationContentExtensionMediaPlayPauseButtonType mediaPlayPauseButtonType;//è¿”å›åª’ä½“æŒ‰é’®çš„ä½ç½®@property (nonatomic, readonly, assign) CGRect mediaPlayPauseButtonFrame;//è¿”å›åª’ä½“æŒ‰é’®çš„é¢œè‰²@property (nonatomic, readonly, copy) UIColor *mediaPlayPauseButtonTintColor;//ç‚¹å‡»æ’­æ”¾æŒ‰é’®çš„å›è°ƒ- (void)mediaPlay;//ç‚¹å‡»æš‚åœæŒ‰é’®çš„å›è°ƒ- (void)mediaPause;//åª’ä½“å¼€å§‹æ’­æ”¾çš„å›è°ƒ- (void)mediaPlayingStarted __IOS_AVAILABLE(10_0) __TVOS_UNAVAILABLE __WATCHOS_UNAVAILABLE __OSX_UNAVAILABLE;//åª’ä½“å¼€å§‹æš‚åœçš„å›è°ƒ- (void)mediaPlayingPaused __IOS_AVAILABLE(10_0) __TVOS_UNAVAILABLE __WATCHOS_UNAVAILABLE __OSX_UNAVAILABLE; éœ€è¦æ³¨æ„ï¼Œè‡ªå®šä¹‰çš„é€šçŸ¥ç•Œé¢ä¸Šè™½ç„¶å¯ä»¥æ”¾æŒ‰é’®ï¼Œå¯ä»¥æ”¾ä»»ä½•UIæ§ä»¶ï¼Œä½†æ˜¯å…¶ä¸èƒ½è¿›è¡Œç”¨æˆ·äº¤äº’ï¼Œå”¯ä¸€å¯ä»¥è¿›è¡Œç”¨æˆ·äº¤äº’çš„æ–¹å¼æ˜¯é€šè¿‡åè®®ä¸­çš„åª’ä½“æŒ‰é’®åŠå…¶å›è°ƒæ–¹æ³•ã€‚ å®šä¹‰å¥½äº†é€šçŸ¥UIæ¨¡æ¿ï¼Œè‹¥è¦è¿›è¡Œä½¿ç”¨ï¼Œè¿˜éœ€è¦å†Notification Contentæ‰©å±•ä¸­çš„info.plistæ–‡ä»¶çš„NSExtensionå­—å…¸çš„NSExtensionAttributeså­—å…¸é‡Œè¿›è¡Œä¸€äº›é…ç½®ï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼Œå¼€å‘è€…éœ€è¦è¿›è¡Œé…ç½®çš„é”®æœ‰3ä¸ªï¼Œåˆ†åˆ«å¦‚ä¸‹ï¼š UNNotificationExtensionCategoryï¼šè®¾ç½®æ¨¡æ¿çš„categoryIdï¼Œç”¨äºä¸UNNotificationContentå¯¹åº”ã€‚ UNNotificationExtensionInitialContentSizeRatioï¼šè®¾ç½®è‡ªå®šä¹‰é€šçŸ¥ç•Œé¢çš„é«˜åº¦ä¸å®½åº¦çš„æ¯”ï¼Œå®½åº¦ä¸ºå›ºå®šå®½åº¦ï¼Œåœ¨ä¸åŒè®¾å¤‡ä¸Šæœ‰å·®åˆ«ï¼Œå¼€å‘è€…éœ€è¦æ ¹æ®å®½åº¦è®¡ç®—å‡ºé«˜åº¦è¿›è¡Œè®¾ç½®ï¼Œç³»ç»Ÿæ ¹æ®è¿™ä¸ªæ¯”å€¼æ¥è®¡ç®—é€šçŸ¥ç•Œé¢çš„é«˜åº¦ã€‚ UNNotificationExtensionDefaultContentHiddenï¼šæ˜¯æœ‰éšè—ç³»ç»Ÿé»˜è®¤çš„é€šçŸ¥ç•Œé¢ã€‚ é…ç½®info.plistæ–‡ä»¶å¦‚ä¸‹ï¼š ç”¨å¦‚ä¸‹çš„ä»£ç åˆ›å»ºé€šçŸ¥ï¼š 123456789101112131415161718UNNotificationAction * action = [UNNotificationAction actionWithIdentifier:@\"action\" title:@\"æ´»åŠ¨æ ‡é¢˜1\" options:UNNotificationActionOptionNone]; //æ ¹æ®idæ‹¿åˆ°è‡ªå®šä¹‰UIçš„æ¨¡æ¿ UNNotificationCategory * category = [UNNotificationCategory categoryWithIdentifier:@\"myNotificationCategoryH\" actions:@[action] intentIdentifiers:@[] options:UNNotificationCategoryOptionCustomDismissAction]; UNMutableNotificationContent * content = [UNMutableNotificationContent new]; content.badge = @1; content.body = @\"è¿™æ˜¯iOS10çš„æ–°é€šçŸ¥å†…å®¹ï¼šæ™®é€šçš„iOSé€šçŸ¥\"; //é»˜è®¤çš„é€šçŸ¥æç¤ºéŸ³ content.sound = [UNNotificationSound defaultSound]; content.subtitle = @\"è¿™é‡Œæ˜¯å‰¯æ ‡é¢˜\"; content.title = @\"è¿™é‡Œæ˜¯é€šçŸ¥çš„æ ‡é¢˜\"; content.categoryIdentifier = @\"myNotificationCategoryH\"; //è®¾ç½®5Sä¹‹åæ‰§è¡Œ UNTimeIntervalNotificationTrigger * trigger = [UNTimeIntervalNotificationTrigger triggerWithTimeInterval:5 repeats:NO]; UNNotificationRequest * request = [UNNotificationRequest requestWithIdentifier:@\"NotificationDefaultCustomUIH\" content:content trigger:trigger]; [[UNUserNotificationCenter currentNotificationCenter] setNotificationCategories:[NSSet setWithObjects:category, nil]]; [[UNUserNotificationCenter currentNotificationCenter] addNotificationRequest:request withCompletionHandler:^(NSError * _Nullable error) &#123; &#125;]; æ•ˆæœå¦‚ä¸‹å›¾ï¼š å¦‚æœå°†UNNotificationExtensionDefaultContentHiddené”®å€¼è®¾ç½®ä¸º0æˆ–è€…ä¸è®¾ç½®ï¼Œåˆ™ä¸ä¼šéšè—ç³»ç»Ÿé»˜è®¤çš„UIï¼Œå¦‚ä¸‹ï¼š ä¹ã€é€šçŸ¥å›è°ƒçš„å¤„ç†UserNotificationæ¡†æ¶å¯¹äºé€šçŸ¥çš„å›è°ƒå¤„ç†ï¼Œæ˜¯é€šè¿‡UNUserNotificationCenterDelegateåè®®æ¥å®ç°çš„ï¼Œè¿™ä¸ªåè®®ä¸­æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š 1234567891011121314151617181920/*è¿™ä¸ªæ–¹æ³•åœ¨åº”ç”¨åœ¨å‰å°ï¼Œå¹¶ä¸”å°†è¦å¼¹å‡ºé€šçŸ¥æ—¶è¢«è°ƒç”¨ï¼Œåå°çŠ¶æ€ä¸‹å¼¹é€šçŸ¥ä¸ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•è¿™ä¸ªæ–¹æ³•ä¸­çš„blockå—completionHandler()å¯ä»¥ä¼ å…¥ä¸€ä¸ªUNNotificationPresentationOptionsç±»å‹çš„æšä¸¾æœ‰ä¸ªè¿™ä¸ªå‚æ•°ï¼Œå¼€å‘è€…å¯ä»¥è®¾ç½®åœ¨å‰å°çŠ¶æ€ä¸‹ï¼Œä¾ç„¶å¯ä»¥å¼¹å‡ºé€šçŸ¥æ¶ˆæ¯ï¼Œæšä¸¾å¦‚ä¸‹ï¼štypedef NS_OPTIONS(NSUInteger, UNNotificationPresentationOptions) &#123; //åªä¿®æ”¹appå›¾æ ‡çš„æ¶ˆæ¯æ•° UNNotificationPresentationOptionBadge = (1 &lt;&lt; 0), //åªæç¤ºé€šçŸ¥éŸ³æ•ˆ UNNotificationPresentationOptionSound = (1 &lt;&lt; 1), //åªå¼¹å‡ºé€šçŸ¥æ¡† UNNotificationPresentationOptionAlert = (1 &lt;&lt; 2),&#125; __IOS_AVAILABLE(10.0) __TVOS_AVAILABLE(10.0) __WATCHOS_AVAILABLE(3.0);//ä»€ä¹ˆéƒ½ä¸åšstatic const UNNotificationPresentationOptions UNNotificationPresentationOptionNone */- (void)userNotificationCenter:(UNUserNotificationCenter *)center willPresentNotification:(UNNotification *)notification withCompletionHandler:(void (^)(UNNotificationPresentationOptions options))completionHandler __IOS_AVAILABLE(10.0) __TVOS_AVAILABLE(10.0) __WATCHOS_AVAILABLE(3.0);/*è¿™ä¸ªæ–¹æ³•å½“æ¥æ”¶åˆ°é€šçŸ¥åï¼Œç”¨æˆ·ç‚¹å‡»é€šçŸ¥æ¿€æ´»appæ—¶è¢«è°ƒç”¨ï¼Œæ— è®ºå‰å°è¿˜æ˜¯åå°*/- (void)userNotificationCenter:(UNUserNotificationCenter *)center didReceiveNotificationResponse:(UNNotificationResponse *)response withCompletionHandler:(void(^)())completionHandler __IOS_AVAILABLE(10.0) __WATCHOS_AVAILABLE(3.0) __TVOS_PROHIBITED; åã€UserNotificationæ¡†æ¶ä¸­å…¶ä»–é›¶æ•£çŸ¥è¯†å‰é¢æ‰€ä»‹ç»çš„å†…å®¹åŸºæœ¬æ¶µç›–äº†UserNotificationæ¡†æ¶ä¸­æ‰€æœ‰çš„å†…å®¹ï¼Œåœ¨ä»¥åçš„åº”ç”¨å¼€å‘ä¸­ï¼Œå¼€å‘è€…å¯ä»¥åœ¨é€šçŸ¥æ–¹é¢å‘æŒ¥æ›´å¤§çš„æƒ³è±¡åŠ›ä¸åˆ›é€ åŠ›ï¼Œç»™ç”¨æˆ·æ›´åŠ å‹å¥½çš„ä½“éªŒã€‚é™¤äº†å‰è¾¹æ‰€ä»‹ç»è¿‡çš„æ ¸å¿ƒå†…å®¹å¤–ï¼ŒUserNotificationæ¡†æ¶ä¸­è¿˜æœ‰ä¸€äº›é›¶æ•£çš„ç±»ã€æšä¸¾ç­‰ã€‚ 1.é”™è¯¯ç æè¿°1234567891011121314151617181920typedef NS_ENUM(NSInteger, UNErrorCode) &#123; //é€šçŸ¥ä¸è¢«å…è®¸ UNErrorCodeNotificationsNotAllowed = 1, //é™„ä»¶æ— æ•ˆurl UNErrorCodeAttachmentInvalidURL = 100, //é™„ä»¶ç±»å‹é”™è¯¯ UNErrorCodeAttachmentUnrecognizedType, //é™„ä»¶å¤§å°é”™è¯¯ UNErrorCodeAttachmentInvalidFileSize, //é™„ä»¶æ•°æ®é”™è¯¯ UNErrorCodeAttachmentNotInDataStore, UNErrorCodeAttachmentMoveIntoDataStoreFailed, UNErrorCodeAttachmentCorrupt, //æ—¶é—´æ— æ•ˆ UNErrorCodeNotificationInvalidNoDate = 1400, //æ— å†…å®¹ UNErrorCodeNotificationInvalidNoContent,&#125; __IOS_AVAILABLE(10.0) __TVOS_AVAILABLE(10.0) __WATCHOS_AVAILABLE(3.0); 2.UNNotificationç±»123456789@interface UNNotification : NSObject &lt;NSCopying, NSSecureCoding&gt;//è§¦å‘çš„æ—¶é—´@property (nonatomic, readonly, copy) NSDate *date;//å†…ç½®çš„é€šçŸ¥è¯·æ±‚å¯¹è±¡@property (nonatomic, readonly, copy) UNNotificationRequest *request;- (instancetype)init NS_UNAVAILABLE;@end 3.UNNotificationSettingsç±»UNNotificationSettingsç±»ä¸»è¦ç”¨æ¥è·å–ä¸é€šçŸ¥ç›¸å…³çš„ä¿¡æ¯ã€‚ 12345678910111213141516171819@interface UNNotificationSettings : NSObject &lt;NSCopying, NSSecureCoding&gt;//ç”¨æˆ·æƒé™çŠ¶æ€@property (NS_NONATOMIC_IOSONLY, readonly) UNAuthorizationStatus authorizationStatus;//éŸ³æ•ˆè®¾ç½®@property (NS_NONATOMIC_IOSONLY, readonly) UNNotificationSetting soundSetting __TVOS_PROHIBITED;//å›¾æ ‡æé†’è®¾ç½®@property (NS_NONATOMIC_IOSONLY, readonly) UNNotificationSetting badgeSetting __WATCHOS_PROHIBITED;//æé†’æ¡†è®¾ç½®@property (NS_NONATOMIC_IOSONLY, readonly) UNNotificationSetting alertSetting __TVOS_PROHIBITED;//é€šçŸ¥ä¸­å¿ƒè®¾ç½®@property (NS_NONATOMIC_IOSONLY, readonly) UNNotificationSetting notificationCenterSetting __TVOS_PROHIBITED;//é”å±è®¾ç½®@property (NS_NONATOMIC_IOSONLY, readonly) UNNotificationSetting lockScreenSetting __TVOS_PROHIBITED __WATCHOS_PROHIBITED;//è½¦è½½è®¾å¤‡è®¾ç½®@property (NS_NONATOMIC_IOSONLY, readonly) UNNotificationSetting carPlaySetting __TVOS_PROHIBITED __WATCHOS_PROHIBITED;//æé†’æ¡†é£æ ¼@property (NS_NONATOMIC_IOSONLY, readonly) UNAlertStyle alertStyle __TVOS_PROHIBITED __WATCHOS_PROHIBITED;@end UNNotificationSettingæšä¸¾å¦‚ä¸‹ï¼š 12345678910typedef NS_ENUM(NSInteger, UNNotificationSetting) &#123; //ä¸æ”¯æŒ UNNotificationSettingNotSupported = 0, //ä¸å¯ç”¨ UNNotificationSettingDisabled, //å¯ç”¨ UNNotificationSettingEnabled,&#125; UNAuthorizationStatusæšä¸¾å¦‚ä¸‹ï¼š 12345678910typedef NS_ENUM(NSInteger, UNAuthorizationStatus) &#123; //ä¸ºåšé€‰æ‹© UNAuthorizationStatusNotDetermined = 0, // ç”¨æˆ·æ‹’ç» UNAuthorizationStatusDenied, // ç”¨æˆ·å…è®¸ UNAuthorizationStatusAuthorized&#125; UNAlertStyleæšä¸¾å¦‚ä¸‹ï¼š 12345678typedef NS_ENUM(NSInteger, UNAlertStyle) &#123; //æ—  UNAlertStyleNone = 0, //é¡¶éƒ¨Banneræ ·å¼ UNAlertStyleBanner, //è­¦å‘Šæ¡†æ ·å¼ UNAlertStyleAlert,&#125; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOS10ä¸“é¢˜","slug":"iOS10ä¸“é¢˜","permalink":"http://huishao.cc/categories/iOS10ä¸“é¢˜/"}],"tags":[],"keywords":[{"name":"iOS10ä¸“é¢˜","slug":"iOS10ä¸“é¢˜","permalink":"http://huishao.cc/categories/iOS10ä¸“é¢˜/"}]},{"title":"iOSæ–‡æœ¬å¸ƒå±€æ¢è®¨ä¹‹ä¸‰â€”â€”ä½¿ç”¨TextKitæ¡†æ¶è¿›è¡Œå¯Œæ–‡æœ¬å¸ƒå±€","slug":"254iOSæ–‡æœ¬å¸ƒå±€æ¢è®¨ä¹‹ä¸‰â€”â€”ä½¿ç”¨TextKitæ¡†æ¶è¿›è¡Œå¯Œæ–‡æœ¬å¸ƒå±€","date":"2016-09-09T16:00:00.000Z","updated":"2021-07-12T02:27:59.479Z","comments":true,"path":"2016/09/10/254iOSæ–‡æœ¬å¸ƒå±€æ¢è®¨ä¹‹ä¸‰â€”â€”ä½¿ç”¨TextKitæ¡†æ¶è¿›è¡Œå¯Œæ–‡æœ¬å¸ƒå±€/","link":"","permalink":"http://huishao.cc/2016/09/10/254iOSæ–‡æœ¬å¸ƒå±€æ¢è®¨ä¹‹ä¸‰â€”â€”ä½¿ç”¨TextKitæ¡†æ¶è¿›è¡Œå¯Œæ–‡æœ¬å¸ƒå±€/","excerpt":"","text":"iOSæ–‡æœ¬å¸ƒå±€æ¢è®¨ä¹‹ä¸‰â€”â€”ä½¿ç”¨TextKitæ¡†æ¶è¿›è¡Œå¯Œæ–‡æœ¬å¸ƒå±€ä¸€ã€å¼•è¨€å…³äºå›¾æ–‡æ··æ’ï¼Œå…¶å®ä»¥å‰çš„åšå®¢å·²ç»è®¨è®ºå¾ˆå¤šï¼Œåœ¨å®é™…å¼€å‘ä¸­ï¼Œç»å¸¸ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„æ¡†æ¶æ¥å®Œæˆæ’ç‰ˆçš„éœ€æ±‚ï¼Œå…¶ä¸­RCLabelå’ŒRTLabelæ˜¯ä¸¤ä¸ªæ¯”è¾ƒå¥½ç”¨çš„ç¬¬ä¸‰æ–¹åº“ï¼Œä»–ä»¬çš„å®ç°éƒ½æ˜¯åŸºäºUIViewçš„ï¼Œé€šè¿‡æ›´åº•å±‚çš„CoreTextç›¸å…³APIæ¥è¿›è¡Œå›¾æ–‡å¤„ç†ã€‚ç›¸å…³ä»‹ç»åšå®¢åœ°å€å¦‚ä¸‹ï¼š iOSä¸­æ”¯æŒHTMLæ ‡ç­¾æ¸²æŸ“çš„MDHTMLLaeblï¼šhttp://my.oschina.net/u/2340880/blog/703254ã€‚ æ‰©å±•äºRCLabelçš„æ”¯æŒå¼‚æ­¥åŠ è½½ç½‘ç»œå›¾ç‰‡çš„å¯Œæ–‡æœ¬å¼•æ“çš„è®¾è®¡ï¼šhttp://my.oschina.net/u/2340880/blog/499311ã€‚ iOSå¼€å‘å°è£…ä¸€ä¸ªå¯ä»¥å“åº”è¶…é“¾æ¥çš„labelâ€”â€”åŸºäºRCLabelçš„äº¤äº’æ‰©å±•ï¼šhttp://my.oschina.net/u/2340880/blog/550194ã€‚ äºŒã€åŸç”ŸUILabelçœŸçš„åªèƒ½æ¸²æŸ“æ–‡å­—ä¹ˆï¼ŸCoreTextæ˜¯ä¸€ä¸ªæ¯”è¾ƒåº•å±‚ä¸”ååˆ†å¼ºå¤§çš„æ–‡æœ¬æ¸²æŸ“æ¡†æ¶ï¼Œä½†æ˜¯å…¶ä½¿ç”¨èµ·æ¥å¹¶ä¸æ˜¯ååˆ†æ–¹ä¾¿ã€‚åœ¨è¾ƒä½ç‰ˆæœ¬çš„iOSç³»ç»Ÿä¸­ï¼Œè¦è¿›è¡Œå¯Œæ–‡æœ¬æ’ç‰ˆååˆ†å›°éš¾ã€‚åœ¨iOS6ä¸­ï¼Œç³»ç»Ÿä¸ºUILabelï¼ŒUITextViewç­‰è¿™ç±»æ–‡æœ¬æ¸²æŸ“æ§ä»¶å¼•å…¥äº†NSAttributedStringå±æ€§ï¼Œæœ‰äº†NSAttributedStringè¿™ä¸ªç±»ï¼Œåˆ›å»ºçµæ´»å¤šå½©çš„æ–‡æœ¬æ§ä»¶å˜å¾—ååˆ†è½»æ¾ï¼Œå¼€å‘è€…åªéœ€è¦é…ç½®NSAttributedStringå±æ€§å­—ç¬¦ä¸²å³å¯ã€‚ä½†æ˜¯è¦è¿›è¡Œå›¾æ–‡æ··æ’ï¼Œä¾ç„¶æ¯”è¾ƒå›°éš¾ã€‚iOS7ä¹‹åå¼•å…¥TextKitæ¡†æ¶ï¼Œå°±å®Œç¾çš„è§£å†³äº†å›¾æ–‡æ··æ’è¿™æ ·çš„é—®é¢˜ã€‚ é¦–å…ˆï¼ŒiOS7ä¸­æ–°æ·»åŠ äº†ä¸€ç±»NSTextAttachmentï¼Œä»ç±»åç†è§£å®ƒæ˜¯ä¸€ä¸ªæ–‡æœ¬é™„ä»¶ï¼Œå…¶å®ä¹Ÿæ­£æ˜¯å¦‚æ­¤ï¼ŒNSTextAttachmentç±»å¯ä»¥å‘æ–‡æœ¬ä¸­æ·»åŠ ä¸€äº›é™„ä»¶ï¼Œè¿™æœ‰äº›å‘é‚®ä»¶ç³»ç»Ÿï¼Œå¯„ä¿¡è€…å¯ä»¥å‘é‚®ä»¶ä¸­æ·»åŠ é™„ä»¶ä¸€åŒå‘é€å‡ºå»ã€‚NSTextAttachmentç±»å¹¶ä¸ç›´æ¥å‚ä¸å¯Œæ–‡æœ¬çš„æ¸²æŸ“ä¸å¸ƒå±€ï¼Œæ¸²æŸ“å’Œå¸ƒå±€ä¾ç„¶ç”±NSAttributedStringç±»æ¥å®Œæˆï¼ŒNSAttributedStringç±»ä¸­æä¾›äº†æ–¹æ³•å°†NSTextAttachmentæ‰€æè¿°çš„å†…å®¹è½¬æ¢ä¸ºNSAttributedStringç¤ºä¾‹ã€‚ä»¥ä¸€ä¸ªç®€å•çš„å›¾æ–‡æ··æ’ä¸ºä¾‹ï¼š 123456789101112131415161718192021222324- (void)viewDidLoad &#123; [super viewDidLoad]; //è¿›è¡ŒNSTextAttachmentçš„åˆ›å»º NSTextAttachment * attach = [[NSTextAttachment alloc]init]; //è®¾ç½®æ˜¾ç¤ºçš„å›¾ç‰‡ attach.image =[UIImage imageNamed:@\"image\"]; //è®¾ç½®å°ºå¯¸ attach.bounds = CGRectMake(0, 0, 120, 60); NSTextAttachment * attach2 = [[NSTextAttachment alloc]init]; attach2.image =[UIImage imageNamed:@\"image2\"]; attach2.bounds = CGRectMake(0, 0, 100, 90); //åˆ›å»ºæ–‡æœ¬NSAttributedStringå¯¹è±¡ NSMutableAttributedString * attri = [[NSMutableAttributedString alloc]initWithString:@\"Describes a dictionary that fully specifies a font.... UIFontDescriptorInherits From NSObject UIFontDescriptor NSObject UIFontDescriptor Conforms To CVarArgT... è¿™é‡Œæ˜¯ä¸­æ–‡\"]; //å°†NSTextAttachmentæ˜ å°„ä¸ºNSAttributedStringå¯¹è±¡ NSMutableAttributedString * att = [[NSMutableAttributedString alloc]initWithAttributedString:[NSAttributedString attributedStringWithAttachment:attach]]; //å°†å›¾ç‰‡æ’å…¥NSAttributedStringä¸­ [attri insertAttributedString:att atIndex:15]; [attri insertAttributedString:[NSAttributedString attributedStringWithAttachment:attach2] atIndex:130]; UILabel * label = [[UILabel alloc]initWithFrame:CGRectMake(20, 20, 280, 540)]; label.backgroundColor = [UIColor grayColor]; label.numberOfLines = 0; label.attributedText = attri; [self.view addSubview:label];&#125; è¿è¡Œå·¥ç¨‹åï¼Œæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå…¶å®åªä½¿ç”¨UILabelä¹Ÿå¯ä»¥å®ç°å¤æ‚çš„å¯Œæ–‡æœ¬å’Œå›¾æ–‡æ··æ’ï¼š ä¸‰ã€ä¸ºå¯Œæ–‡æœ¬é™„ä»¶æ·»åŠ ç”¨æˆ·äº¤äº’èƒ½åŠ›TextKitæ¡†æ¶å¼ºå¤§åˆ°åªä½¿ç”¨UILabelå°±å¯ä»¥å®Œæˆå¤æ‚çš„å¯Œæ–‡æœ¬å¸ƒå±€ï¼Œä½†æ˜¯UILabelæœ‰ä¸€ä¸ªè‡´å‘½çš„ç¼ºé™·ï¼Œå…¶æ— æ³•è¿›è¡Œç”¨æˆ·äº¤äº’ã€‚è¯•æƒ³ï¼Œå¦‚æœå¯ä»¥å‘ä¸€æ®µæ–‡æœ¬ä¸­æ·»åŠ ä»»æ„æ•°æ®ç±»å‹çš„æ–‡ä»¶ï¼Œå½“ç”¨æˆ·ç‚¹å‡»è¿™ä¸ªæ–‡ä»¶æ—¶ï¼Œå¯ä»¥è·å–åˆ°æ–‡ä»¶æ•°æ®å¹¶è¿›è¡Œä¸šåŠ¡é€»è¾‘å¤„ç†ï¼Œè¿™å°†ååˆ†é…·ã€‚è¿™æ ·å¯Œæ–‡æœ¬å¸ƒå±€å…¶å®å°±ä¸åªå±€é™äºå›¾æ–‡æ··æ’äº†ï¼Œæˆ‘ä»¬å¯ä»¥æ’å…¥éŸ³é¢‘ï¼Œæ’å…¥è§†é¢‘ï¼Œç”šè‡³æ’å…¥ä»»æ„è‡ªå®šä¹‰æ ¼å¼çš„æ•°æ®ã€‚ç»“åˆä½¿ç”¨NSTextAttachmentä¸UITextViewï¼Œè¿™äº›éƒ½èƒ½å®ç°ã€‚å…ˆçœ‹NSTextAttachmentç±»ä¸­çš„ä¸€äº›å¸¸ç”¨å±æ€§ä¸æ–¹æ³•ï¼š 1234567891011121314//è¿™ä¸ªåˆå§‹åŒ–æ–¹æ³•ç”¨äºåˆ›å»ºæºå¸¦ä»»æ„æ•°æ®çš„æ–‡æœ¬é™„ä»¶- (instancetype)initWithData:(nullable NSData *)contentData ofType:(nullable NSString *)uti NS_DESIGNATED_INITIALIZER NS_AVAILABLE(10_11, 7_0);//æºå¸¦çš„æ•°æ®å†…å®¹@property(nullable, copy, NS_NONATOMIC_IOSONLY) NSData *contents NS_AVAILABLE(10_11, 7_0);//æ•°æ®ç±»å‹@property(nullable, copy, NS_NONATOMIC_IOSONLY) NSString *fileType NS_AVAILABLE(10_11, 7_0);//è®¾ç½®æ¸²æŸ“çš„å›¾ç‰‡ éœ€è¦æ³¨æ„ å¦‚æœè®¾ç½®çš„è¿™ä¸ª é™„ä»¶æºå¸¦çš„æ•°æ® fileWrapperç›®å½•å†…å®¹å°†æ— æ•ˆ@property(nullable, strong, NS_NONATOMIC_IOSONLY) UIImage *image NS_AVAILABLE(10_11, 7_0);//è®¾ç½®å›¾ç‰‡æ¸²æŸ“çš„å°ºå¯¸@property(NS_NONATOMIC_IOSONLY) CGRect bounds NS_AVAILABLE(10_11, 7_0);//è®¾ç½®é™„ä»¶æºå¸¦çš„æ–‡ä»¶ç›®å½• éœ€è¦æ³¨æ„ å¦‚æœè®¾ç½®äº†è¿™ä¸ªå±æ€§ imageå’Œdataå°†æ— æ•ˆ@property(nullable, strong, NS_NONATOMIC_IOSONLY) NSFileWrapper *fileWrapper; ç»“åˆUITextViewå¯ä»¥ä¸ºNSAttributedStringå±æ€§å­—ç¬¦ä¸²æ·»åŠ è¶…é“¾æ¥ï¼Œåœ¨ä»£ç å›è°ƒä¸­ç›‘å¬æ­¤è¶…é“¾æ¥çš„å›è°ƒå¯ä»¥è·å–NSTextAttachmentæºå¸¦çš„é™„ä»¶å†…å®¹ï¼Œå¦‚æ­¤å°±å¯ä»¥è‡ªç”±çš„è¿›è¡Œä¸šåŠ¡å¤„ç†äº†ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122- (void)viewDidLoad &#123; [super viewDidLoad]; //ä¿ç•™ä¸€ä¸ªæ•°ç»„å­˜æ”¾é™„ä»¶ _attArray = [NSMutableArray array]; //åˆ›å»ºé™„ä»¶æ•°æ® NSData * stringData = [NSData dataWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@\"image3\" ofType:@\"gif\"]]; NSTextAttachment * attach = [[NSTextAttachment alloc]initWithData:stringData ofType:@\"gif\"]; [_attArray addObject:attach]; attach.bounds = CGRectMake(0, 0, 30, 40); NSMutableAttributedString * attri = [[NSMutableAttributedString alloc]initWithString:@\"Describes a dictionary that fully specifies a font.... UIFontDescriptorInherits From NSObject UIFontDescriptor NSObject UIFontDescriptor Conforms To CVarArgT... è¿™é‡Œæ˜¯ä¸­æ–‡\"]; NSMutableAttributedString * att = [[NSMutableAttributedString alloc]initWithAttributedString:[NSAttributedString attributedStringWithAttachment:attach]]; //ä¸ºNSTextAttachmentè½¬æ¢ä¸ºçš„NSAttributedStringæ·»åŠ è¶…é“¾æ¥ [att addAttributes:@&#123;NSLinkAttributeName:@\"url...\"&#125; range:NSMakeRange(0, att.string.length)]; [attri insertAttributedString:att atIndex:15]; UITextView * textView = [[UITextView alloc]initWithFrame:CGRectMake(20, 20, 280, 540)]; textView.backgroundColor = [UIColor grayColor]; textView.dataDetectorTypes = UIDataDetectorTypeLink; textView.delegate =self; textView.attributedText = attri; textView.editable = NO; [self.view addSubview:textView];&#125; å®ç°å¦‚ä¸‹çš„TextViewä»£ç†æ–¹æ³•ï¼š 12345678-(BOOL)textView:(UITextView *)textView shouldInteractWithURL:(NSURL *)URL inRange:(NSRange)characterRange&#123; //å¯ä»¥è·å–åˆ°url è¿›è¡ŒåŒ¹é… NSLog(@\"%@\",URL); //å–å‡ºNSTextAttachmenté™„ä»¶ NSTextAttachment * attach =_attArray.firstObject; NSLog(@\"%@--\",attach.contents); return YES;&#125; å‘æ–‡æœ¬ä¸­æ·»åŠ ä»»æ„æ•°æ®çš„NSTextAttachmentä¼šå±•ç°ä¸€ä¸ªæ–‡ä»¶çš„å›¾æ ‡ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å½“ç”¨æˆ·ç‚¹å‡»æ–‡ä»¶å›¾æ ‡æ—¶ï¼Œä¼šå°†æºå¸¦çš„gifæ–‡ä»¶æ•°æ®è¿›è¡Œæ‰“å°ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSæ–‡æœ¬å¸ƒå±€æ¢è®¨ä¹‹äºŒâ€”â€”å…³äºTextKitæ¡†æ¶ä¸­çš„å­—ä½“æè¿°","slug":"253iOSæ–‡æœ¬å¸ƒå±€æ¢è®¨ä¹‹äºŒâ€”â€”å…³äºTextKitæ¡†æ¶ä¸­çš„å­—ä½“æè¿°","date":"2016-09-08T16:00:00.000Z","updated":"2021-07-12T02:27:07.823Z","comments":true,"path":"2016/09/09/253iOSæ–‡æœ¬å¸ƒå±€æ¢è®¨ä¹‹äºŒâ€”â€”å…³äºTextKitæ¡†æ¶ä¸­çš„å­—ä½“æè¿°/","link":"","permalink":"http://huishao.cc/2016/09/09/253iOSæ–‡æœ¬å¸ƒå±€æ¢è®¨ä¹‹äºŒâ€”â€”å…³äºTextKitæ¡†æ¶ä¸­çš„å­—ä½“æè¿°/","excerpt":"","text":"iOSæ–‡æœ¬å¸ƒå±€æ¢è®¨ä¹‹äºŒâ€”â€”å…³äºTextKitæ¡†æ¶ä¸­çš„å­—ä½“æè¿°ä¸€ã€å¼•è¨€UIFontæ˜¯iOSå¼€å‘ä¸­å¤„ç†æ–‡æœ¬å­—ä½“çš„ç±»ï¼Œå…³äºUIFontçš„ç›¸å…³å†…å®¹ï¼Œä»¥å‰çš„ä¸€ç¯‡åšå®¢æœ‰è¯¦ç»†ä»‹ç»ï¼Œæœ¬ç‰‡åšå®¢ä¸»è¦ä»‹ç»å…³äºåŠ¨æ€å­—ä½“çš„åº”ç”¨ä¸å­—ä½“æè¿°ç±»NSFontDescriptorçš„åº”ç”¨ã€‚ UIFontåº”ç”¨ä»‹ç»ï¼šhttp://my.oschina.net/u/2340880/blog/397115ã€‚ äºŒã€iOSç³»ç»Ÿä¸­çš„åŠ¨æ€å­—ä½“æ‰€è°“åŠ¨æ€å­—ä½“ï¼Œæ˜¯æŒ‡åœ¨åº”ç”¨ä½¿ç”¨ä¸­ï¼Œç”¨æˆ·å¯ä»¥åŠ¨æ€è°ƒæ•´å­—ä½“çš„é£æ ¼å­—å·ç­‰ã€‚åœ¨iOS7åŠä¹‹åçš„iOSç³»ç»Ÿç‰ˆæœ¬ï¼ŒTextKitæ¡†æ¶ä¸­æä¾›äº†ä¸€ä¸ªæ–°çš„ç±»UIFontDescriptorã€‚ç®€å•ç†è§£ï¼ŒUIFontDescriptorç±»æ˜¯ä¸“é—¨ç”¨æ¥æè¿°å­—ä½“çš„ï¼Œå…¶ä¸­æä¾›äº†è®¸å¤šæ–¹æ³•å¯ä»¥ç›´æ¥åˆ›å»ºå‡ºæŸç§å­—ä½“ï¼Œä¹Ÿå¯ä»¥å¯¹å­—ä½“è¿›è¡Œè®¾ç½®å’Œè°ƒæ•´ã€‚åŠ¨æ€å­—ä½“ä¹Ÿç”±è¿™ä¸ªç±»æ¥åˆ›å»ºã€‚ åœ¨iOS7ä¹‹åï¼Œç³»ç»Ÿå¢åŠ äº†åŠ¨æ€å­—ä½“çš„åŠŸèƒ½ï¼Œå½“ç”¨æˆ·åœ¨ç³»ç»Ÿè®¾ç½®ä¸­ä¿®æ”¹å­—ä½“çš„å±æ€§æˆ–è€…å­—å·æ—¶ï¼Œä¸ä»…ä¼šå½±å“ç³»ç»Ÿåº”ç”¨çš„å­—ä½“ï¼Œç¬¬ä¸‰æ–¹åº”ç”¨çš„å­—ä½“ä¹Ÿå¯ä»¥è¿›è¡Œç›¸åº”è°ƒæ•´ã€‚ç³»ç»Ÿè®¾ç½®å­—ä½“ç•Œé¢å¦‚ä¸‹ï¼š ä½¿ç”¨UIFontDescriptorç±»ä¸­çš„å¦‚ä¸‹æ–¹æ³•å¯ä»¥åˆ›å»ºåŠ¨æ€å­—ä½“ï¼š 12//åˆ›å»ºåŠ¨æ€å­—ä½“çš„å­—ä½“æè¿°ç±»å®ä¾‹+ (UIFontDescriptor *)preferredFontDescriptorWithTextStyle:(NSString *)style; UIFontç±»ä¸­çš„å¦‚ä¸‹æ–¹æ³•å¯ä»¥å°†å­—ä½“æè¿°ç±»è½¬æ¢æˆUIFontå­—ä½“ï¼š 1+ (UIFont *)fontWithDescriptor:(UIFontDescriptor *)descriptor size:(CGFloat)pointSize NS_AVAILABLE_IOS(7_0); ç³»ç»Ÿå®šä¹‰äº†ä¸€ç»„åŠ¨æ€å­—ä½“çš„é£æ ¼å­—ç¬¦åˆ›å¸¸é‡ï¼Œå¼€å‘è€…å¯ä»¥æ ¹æ®éœ€æ±‚é€‰ç”¨ï¼š 1234567891011121314151617181920//æ ‡é¢˜1UIKIT_EXTERN NSString *const UIFontTextStyleTitle1 NS_AVAILABLE_IOS(9_0);//æ ‡é¢˜2UIKIT_EXTERN NSString *const UIFontTextStyleTitle2 NS_AVAILABLE_IOS(9_0);//æ ‡é¢˜3UIKIT_EXTERN NSString *const UIFontTextStyleTitle3 NS_AVAILABLE_IOS(9_0);//å¤§æ ‡é¢˜UIKIT_EXTERN NSString *const UIFontTextStyleHeadline NS_AVAILABLE_IOS(7_0);//å­æ ‡é¢˜UIKIT_EXTERN NSString *const UIFontTextStyleSubheadline NS_AVAILABLE_IOS(7_0);//å†…å®¹UIKIT_EXTERN NSString *const UIFontTextStyleBody NS_AVAILABLE_IOS(7_0);//æ ‡æ³¨UIKIT_EXTERN NSString *const UIFontTextStyleCallout NS_AVAILABLE_IOS(9_0);//æ³¨è„šUIKIT_EXTERN NSString *const UIFontTextStyleFootnote NS_AVAILABLE_IOS(7_0);//å­—å¹•UIKIT_EXTERN NSString *const UIFontTextStyleCaption1 NS_AVAILABLE_IOS(7_0);//å­—å¹•2UIKIT_EXTERN NSString *const UIFontTextStyleCaption2 NS_AVAILABLE_IOS(7_0); ä¸‰ã€å…³äºUIFontDescriptorç±»UIFontDescriptorç±»å¯ä»¥ç›´æ¥é€šè¿‡å­—ä½“åç§°æ¥è¿›è¡Œåˆ›å»ºï¼š 1234//é€šè¿‡å­—ä½“åç§°å’Œå­—å·å°ºå¯¸æ¥è¿›è¡ŒUIFontDescriptorå¯¹è±¡çš„åˆ›å»º+ (UIFontDescriptor *)fontDescriptorWithName:(NSString *)fontName size:(CGFloat)size;//é€šè¿‡å­—ä½“åç§°åˆ›å»ºUIFontDescriptorå¯¹è±¡ï¼Œå¹¶ä¸”è®¾ç½®å˜æ¢å‚æ•°+ (UIFontDescriptor *)fontDescriptorWithName:(NSString *)fontName matrix:(CGAffineTransform)matrix; CGAffineTransformæ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œå…¶ç”¨äºæ–‡æœ¬çš„æ§ä»¶å˜æ¢ååˆ†å¼ºå¤§ï¼Œåœ¨CoreAnimationæ¡†æ¶ä¸­æœ‰CATransform3Dè¿™ä¸ªç»“æ„ä½“ï¼ŒCGAffineTransformä¸å…¶ç”¨æ³•ååˆ†ç›¸ä¼¼ï¼Œä½¿å…¶å®ƒå¯ä»¥å®Œæˆæ–‡å­—çš„å½¢å˜ï¼Œæ—‹è½¬ç­‰ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112//è¿›è¡Œæ—‹è½¬CGAffineTransform transfom = CGAffineTransformRotate(CGAffineTransformIdentity, 0.1);//è¿›è¡Œçºµå‘æ‹‰ä¼¸transfom = CGAffineTransformScale(transfom, 1, 3);UIFontDescriptor * fontDes = [UIFontDescriptor fontDescriptorWithName:[UIFont systemFontOfSize:14].fontName matrix:transfom];UIFont * font = [UIFont fontWithDescriptor:fontDes size:14];UILabel * label = [[UILabel alloc]initWithFrame:CGRectMake(20, 100, 280, 400)];label.backgroundColor = [UIColor grayColor];label.font = font;label.numberOfLines = 0;label.text = @\"Describes a dictionary that fully specifies a font.... UIFontDescriptorInherits From NSObject UIFontDescriptor NSObject UIFontDescriptor Conforms To CVarArgT... è¿™é‡Œæ˜¯ä¸­æ–‡\";[self.view addSubview:label]; æ•ˆæœå¦‚ä¸‹ï¼š å¼€å‘è€…ä¹Ÿå¯ä»¥é€šè¿‡é…ç½®åœ°ç‚¹çš„æ–¹å¼æ¥åˆ›å»ºUIFontDescriptorå¯¹è±¡ï¼š 1- (instancetype)initWithFontAttributes:(NSDictionary&lt;NSString *, id&gt; *)attributes; å­—å…¸ä¸­å¯ä»¥é…ç½®çš„é”®å€¼å¦‚ä¸‹ï¼š 12345678910111213141516171819//éœ€è¦é…ç½®ä¸ºNSValueå€¼ CGAffineTransformUIKIT_EXTERN NSString *const UIFontDescriptorMatrixAttribute;//éœ€è¦é…ç½®ä¸ºä¸€ä¸ªé›†åˆset åŒ…å«æ‰€æœ‰å­—ä½“å­—ç¬¦UIKIT_EXTERN NSString *const UIFontDescriptorCharacterSetAttribute;//éœ€è¦é…ç½®ä¸ºä¸€ä¸ªæ•°ç»„ æ•°ç»„ä¸­ä¸ºå­—ä½“æè¿°å¯¹è±¡UIKIT_EXTERN NSString *const UIFontDescriptorCascadeListAttribute;//éœ€è¦é…ç½®ä¸ºä¸€ä¸ªå­—å…¸ å…¶ä¸­è¿›è¡Œå­—ä½“ç‰¹å¾çš„æè¿° åé¢ä¼šä»‹ç»UIKIT_EXTERN NSString *const UIFontDescriptorTraitsAttribute;//éœ€è¦é…ç½®ä¸ºNSNumberç±»å‹çš„ æµ®ç‚¹æ•° å…¶ä¼šå½±å“åˆ°å­—ä½“æ’ç‰ˆæ—¶çš„å­—ç¬¦é—´è·UIKIT_EXTERN NSString *const UIFontDescriptorFixedAdvanceAttribute;//éœ€è¦é…ç½®ä¸ºä¸€ä¸ªæ•°ç»„ æ•°ç»„ä¸­ä¸ºå­—å…¸ å­—å…¸ä¸­å¯¹å­—å‹è¿›è¡Œé…ç½®/*//å­—å…¸ä¸­éœ€è¦é…ç½®è¿™ä¸¤ä¸ªé”®UIKIT_EXTERN NSString *const UIFontFeatureTypeIdentifierKey NS_AVAILABLE_IOS(7_0);UIKIT_EXTERN NSString *const UIFontFeatureSelectorIdentifierKey NS_AVAILABLE_IOS(7_0);*/UIKIT_EXTERN NSString *const UIFontDescriptorFeatureSettingsAttribute;//é…ç½®å­—ä½“é£æ ¼ å¯ç”¨çš„åœ¨å‰é¢åˆ—ä¸¾è¿‡UIKIT_EXTERN NSString *const UIFontDescriptorTextStyleAttribute; å…³äºå­—ä½“çš„ç‰¹å¾è—è§†ï¼Œå³ä¸Šé¢UIFontDescriptorTraitsAttributeé”®å€¼æ‰€é…ç½®çš„å­—å…¸ï¼Œè¿™ä¸ªå­—å…¸ä¸­å¯ä»¥è®¾ç½®çš„é”®å€¼å¦‚ä¸‹ï¼š 1234567891011121314151617181920//è¿™ä¸ªé”®å€¼éœ€è¦é…ç½®ä¸ºä¸€ä¸ªNSNumberå€¼ï¼Œè®¾ç½®æ–‡å­—çš„æ¸²æŸ“ç‰¹å¾ åé¢ä¼šä»‹ç»UIKIT_EXTERN NSString *const UIFontSymbolicTrait;//è®¾ç½®å­—ä½“çš„ç²—ç»†å±æ€§ /*è¿™ä¸ªé”®å¯ä»¥è®¾ç½®çš„å€¼å¦‚ä¸‹UIKIT_EXTERN const CGFloat UIFontWeightUltraLight NS_AVAILABLE_IOS(8_2);UIKIT_EXTERN const CGFloat UIFontWeightThin NS_AVAILABLE_IOS(8_2);UIKIT_EXTERN const CGFloat UIFontWeightLight NS_AVAILABLE_IOS(8_2);UIKIT_EXTERN const CGFloat UIFontWeightRegular NS_AVAILABLE_IOS(8_2);UIKIT_EXTERN const CGFloat UIFontWeightMedium NS_AVAILABLE_IOS(8_2);UIKIT_EXTERN const CGFloat UIFontWeightSemibold NS_AVAILABLE_IOS(8_2);UIKIT_EXTERN const CGFloat UIFontWeightBold NS_AVAILABLE_IOS(8_2);UIKIT_EXTERN const CGFloat UIFontWeightHeavy NS_AVAILABLE_IOS(8_2);UIKIT_EXTERN const CGFloat UIFontWeightBlack NS_AVAILABLE_IOS(8_2);*/UIKIT_EXTERN NSString *const UIFontWeightTrait;//è®¾ç½®å­—ä½“å®½åº¦UIKIT_EXTERN NSString *const UIFontWidthTrait;//è®¾ç½®å­—ä½“å€¾æ–œUIKIT_EXTERN NSString *const UIFontSlantTrait; å…³äºä¸Šé¢UIFontSymbolicTraité”®å€¼ï¼Œå®šä¹‰åœ¨UIFontDescriptorSymbolicTraitsæšä¸¾ä¸­ï¼Œå¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425typedef NS_OPTIONS(uint32_t, UIFontDescriptorSymbolicTraits) &#123; UIFontDescriptorTraitItalic = 1u &lt;&lt; 0, UIFontDescriptorTraitBold = 1u &lt;&lt; 1, UIFontDescriptorTraitExpanded = 1u &lt;&lt; 5, UIFontDescriptorTraitCondensed = 1u &lt;&lt; 6, UIFontDescriptorTraitMonoSpace = 1u &lt;&lt; 10, UIFontDescriptorTraitVertical = 1u &lt;&lt; 11, UIFontDescriptorTraitUIOptimized = 1u &lt;&lt; 12, UIFontDescriptorTraitTightLeading = 1u &lt;&lt; 15, UIFontDescriptorTraitLooseLeading = 1u &lt;&lt; 16, UIFontDescriptorClassMask = 0xF0000000, UIFontDescriptorClassUnknown = 0u &lt;&lt; 28, UIFontDescriptorClassOldStyleSerifs = 1u &lt;&lt; 28, UIFontDescriptorClassTransitionalSerifs = 2u &lt;&lt; 28, UIFontDescriptorClassModernSerifs = 3u &lt;&lt; 28, UIFontDescriptorClassClarendonSerifs = 4u &lt;&lt; 28, UIFontDescriptorClassSlabSerifs = 5u &lt;&lt; 28, UIFontDescriptorClassFreeformSerifs = 7u &lt;&lt; 28, UIFontDescriptorClassSansSerif = 8u &lt;&lt; 28, UIFontDescriptorClassOrnamentals = 9u &lt;&lt; 28, UIFontDescriptorClassScripts = 10u &lt;&lt; 28, UIFontDescriptorClassSymbolic = 12u &lt;&lt; 28&#125; NS_ENUM_AVAILABLE_IOS(7_0); ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSæ–‡æœ¬å¸ƒå±€æ¢è®¨ä¹‹ä¸€â€”â€”æ–‡æœ¬å¸ƒå±€æ¡†æ¶TextKitæµ…æ","slug":"252iOSæ–‡æœ¬å¸ƒå±€æ¢è®¨ä¹‹ä¸€â€”â€”æ–‡æœ¬å¸ƒå±€æ¡†æ¶TextKitæµ…æ","date":"2016-09-07T16:00:00.000Z","updated":"2021-07-12T02:26:22.142Z","comments":true,"path":"2016/09/08/252iOSæ–‡æœ¬å¸ƒå±€æ¢è®¨ä¹‹ä¸€â€”â€”æ–‡æœ¬å¸ƒå±€æ¡†æ¶TextKitæµ…æ/","link":"","permalink":"http://huishao.cc/2016/09/08/252iOSæ–‡æœ¬å¸ƒå±€æ¢è®¨ä¹‹ä¸€â€”â€”æ–‡æœ¬å¸ƒå±€æ¡†æ¶TextKitæµ…æ/","excerpt":"","text":"iOSæ–‡æœ¬å¸ƒå±€æ¢è®¨ä¹‹ä¸€â€”â€”æ–‡æœ¬å¸ƒå±€æ¡†æ¶TextKitæµ…æä¸€ã€å¼•è¨€åœ¨iOSå¼€å‘ä¸­ï¼Œå¤„ç†æ–‡æœ¬çš„è§†å›¾æ§ä»¶ä¸»è¦æœ‰4ä¸­ï¼ŒUILabelï¼ŒUITextFieldï¼ŒUITextViewå’ŒUIWebViewã€‚å…¶ä¸­UILabelä¸UITextFieldç›¸å¯¹ç®€å•ï¼ŒUITextViewæ˜¯åŠŸèƒ½å®Œå¤‡çš„æ–‡æœ¬å¸ƒå±€å±•ç¤ºç±»ï¼Œé€šè¿‡å®ƒå¯ä»¥è¿›è¡Œå¤æ‚çš„å¯Œæ–‡æœ¬å¸ƒå±€ï¼ŒUIWebViewä¸»è¦ç”¨æ¥åŠ è½½ç½‘é¡µæˆ–è€…pdfæ–‡ä»¶ï¼Œå…¶å¯ä»¥è¿›è¡ŒHTML,CSSå’ŒJSç­‰æ–‡ä»¶çš„è§£æã€‚ TextKitæ˜¯ä¸€ä¸ªåä¸Šå±‚çš„å¼€å‘æ¡†æ¶ï¼Œåœ¨iOS7ä»¥ä¸Šå¯ç”¨ï¼Œä½¿ç”¨å®ƒå¼€å‘è€…å¯ä»¥æ–¹ä¾¿çµæ´»å¤„ç†å¤æ‚çš„æ–‡æœ¬å¸ƒå±€ï¼Œæ»¡è¶³å¼€å‘ä¸­å¯¹æ–‡æœ¬å¸ƒå±€çš„å„ç§å¤æ‚éœ€æ±‚ã€‚TextKitå®é™…ä¸Šæ˜¯åŸºäºCoreTextçš„ä¸€ä¸ªä¸Šå±‚æ¡†æ¶ï¼Œå…¶æ˜¯é¢å‘å¯¹è±¡çš„ï¼Œå¦‚æœTextKitä¸­æä¾›çš„APIæ— æ³•æ»¡è¶³éœ€æ±‚ï¼Œå¯ä»¥ä½¿ç”¨CoreTextä¸­çš„APIè¿›è¡Œæ›´åº•å±‚çš„å¼€å‘ã€‚ å®˜æ–¹æ–‡æ¡£ä¸­çš„ä¸€å¼ å›¾ç‰‡å¾ˆç¡®åˆ‡ï¼Œç»å¸¸ä¼šè¢«ç”¨æ¥æè¿°TextKitæ¡†æ¶åœ¨iOSç³»ç»Ÿæ–‡æœ¬æ¸²æŸ“ä¸­æ‰€å¤„çš„ä½ç½®ã€‚ äºŒã€TextKitæ¡†æ¶çš„ç»“æ„ç•Œé¢åœ¨è¿›è¡Œæ–‡æœ¬çš„æ¸²æŸ“æ—¶ï¼Œæœ‰ä¸‹é¢å‡ ä¸ªå¿…è¦æ¡ä»¶ï¼š 1.è¦æ¸²æŸ“å±•ç¤ºçš„å†…å®¹ã€‚ 2.å°†å†…å®¹æ¸²æŸ“åœ¨æŸä¸ªè§†å›¾ä¸Šã€‚ 3.å†…å®¹æ¸²æŸ“åœ¨è§†å›¾ä¸Šçš„å°ºå¯¸ä½ç½®å’Œå½¢çŠ¶ã€‚ åœ¨TextKitæ¡†æ¶ä¸­ï¼Œæä¾›äº†å‡ ä¸ªç±»åˆ†åˆ«å¯¹åº”å¤„ç†ä¸Šè¿°çš„å¿…è¦æ¡ä»¶ï¼š 1.NSTextStorageå¯¹åº”è¦æ¸²æŸ“å±•ç¤ºçš„å†…å®¹ã€‚ 2.UITextViewå¯¹åº”è¦æ¸²æŸ“çš„è§†å›¾ã€‚ 3.NSTextContainerå¯¹åº”æ¸²æŸ“çš„å°ºå¯¸ä½ç½®å’Œå½¢çŠ¶ä¿¡æ¯ã€‚ é™¤äº†ä¸Šè¿°3ä¸ªç±»ä¹‹å¤–ï¼ŒTextKitæ¡†æ¶ä¸­çš„NSLayoutManagerç±»ä½œä¸ºåè°ƒè€…æ¥è¿›è¡Œå¸ƒå±€æ“ä½œã€‚ ä¸Šè¿°å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¸‰ã€ä½¿ç”¨TextKitè¿›è¡Œæ–‡æœ¬å¸ƒå±€æµç¨‹ä¸ªäººç†è§£ï¼ŒTextKitä¸»è¦ç”¨äºæ›´ç²¾ç»†çš„å¤„ç†æ–‡æœ¬å¸ƒå±€ä»¥åŠè¿›è¡Œå¤æ‚çš„å›¾æ–‡æ··æ’å¸ƒå±€ï¼Œä½¿ç”¨TextKitè¿›è¡Œæ–‡æœ¬çš„å¸ƒå±€å±•ç¤ºååˆ†ç¹çï¼Œé¦–å…ˆéœ€è¦å°†æ˜¾ç¤ºå†…å®¹å®šä¹‰ä¸ºä¸€ä¸ªNSTextStorageå¯¹è±¡ï¼Œä¹‹åä¸ºå…¶æ·»åŠ ä¸€ä¸ªå¸ƒå±€ç®¡ç†å™¨å¯¹è±¡NSLayoutManagerï¼Œåœ¨NSLayoutManagerä¸­ï¼Œéœ€è¦è¿›è¡ŒNSTextContainerçš„å®šä¹‰ï¼Œå®šä¹‰å¤šäº†NSTextContainerå¯¹è±¡åˆ™ä¼šå°†æ–‡æœ¬è¿›è¡Œåˆ†é¡µã€‚æœ€åï¼Œå°†è¦å±•ç¤ºçš„NSTextContainerç»‘å®šåˆ°å…·ä½“çš„UITextViewè§†å›¾ä¸Šã€‚ ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345678910111213//å®šä¹‰ContainerNSTextContainer * container = [[NSTextContainer alloc]initWithSize:CGSizeMake(150, 200)];//å®šä¹‰å¸ƒå±€ç®¡ç†ç±»NSLayoutManager * layoutManager = [[NSLayoutManager alloc]init];//å°†containeræ·»åŠ è¿›å¸ƒå±€ç®¡ç†ç±»ç®¡ç†[layoutManager addTextContainer:container];//å®šä¹‰ä¸€ä¸ªStorageNSTextStorage * storage = [[NSTextStorage alloc]initWithString:@\"The NSTextContainer class defines a region where text is laid out. An NSLayoutManager uses NSTextContainer to determine where to break lines, lay out portions of text, and so on.\"];//ä¸ºStorageæ·»åŠ ä¸€ä¸ªå¸ƒå±€ç®¡ç†å™¨[storage addLayoutManager:layoutManager];//å°†è¦æ˜¾ç¤ºçš„containerä¸è§†å›¾TextViewç»‘å®šUITextView * textView = [[UITextView alloc]initWithFrame:self.view.frame textContainer:container];[self.view addSubview:textView]; ä¸Šé¢ä»£ç æ¼”ç¤ºçš„è¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š éœ€è¦æ³¨æ„ï¼ŒTextKitè¿›è¡Œå¸ƒå±€çš„æ ¸å¿ƒæ€è·¯æ˜¯æœ€ç»ˆçš„è§†å›¾å¯¹åº”ä¸€ä¸ªæ–‡æœ¬å—Containerï¼Œå¹¶ä¸æ˜¯ä¸€æ®µæ–‡æœ¬å†…å®¹Storageï¼ŒLayoutManagerä¼šå°†å®Œæ•´çš„å†…å®¹æ ¹æ®å…¶ä¸­Containerçš„å°ºå¯¸è¿›è¡Œåˆ†é¡µï¼ŒTextViewæ ¹æ®éœ€è¦æ˜¾ç¤ºçš„éƒ¨åˆ†è¿›è¡ŒContainerçš„é€‰æ‹©ã€‚ å››ã€äº†è§£NSTextContainerç±»NSTextContainerå¯ä»¥ç®€å•ç†è§£ä¸ºåˆ›å»ºä¸€ä¸ªæ–‡æœ¬åŒºå—ï¼Œæ–‡æœ¬å†…å®¹å°†åœ¨è¿™ä¸ªåŒºå—ä¸­è¿›è¡Œæ¸²æŸ“ï¼Œå…¶ä¸­å¸¸ç”¨å±æ€§ä¸æ–¹æ³•å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223//åˆå§‹åŒ–æ–¹æ³• è®¾ç½®åŒºå—çš„å°ºå¯¸- (instancetype)initWithSize:(CGSize)size;//ä¸å…¶ç»‘å®šçš„layoutManager éœ€è¦æ³¨æ„ï¼Œä¸æ˜¯è®¾ç½®è¿™ä¸ªå±æ€§ ä½¿ç”¨[NSLayoutManager addTextContainer:]æ–¹å¼æ¥è¿›è¡Œç»‘å®š@property(nullable, assign, NS_NONATOMIC_IOSONLY) NSLayoutManager *layoutManager;//æ›¿æ¢ç»‘å®šçš„å¸ƒå±€ç®¡ç†ç±»å¯¹è±¡- (void)replaceLayoutManager:(NSLayoutManager *)newLayoutManager;//è·å–åŒºå—å°ºå¯¸@property(NS_NONATOMIC_IOSONLY) CGSize size;//è®¾ç½®ä»åŒºå—ä¸­å‰”é™¤æŸä¸€åŒºåŸŸ@property(copy, NS_NONATOMIC_IOSONLY) NSArray&lt;UIBezierPath *&gt; *exclusionPaths;//è®¾ç½®æˆªæ–­æ¨¡å¼ éœ€è¦æ³¨æ„ è¿™ä¸ªå±æ€§çš„è®¾ç½®åªæ˜¯ä¼šå½±å“æ­¤åŒºå—çš„æœ€åä¸€è¡Œçš„æˆªæ–­æ¨¡å¼@property(NS_NONATOMIC_IOSONLY) NSLineBreakMode lineBreakMode;//è®¾ç½®æ¯è¡Œæ–‡æœ¬å·¦å³ç©ºå‡ºçš„é—´è·@property(NS_NONATOMIC_IOSONLY) CGFloat lineFragmentPadding;//è®¾ç½®TextViewä¸Šå¯è¾“å…¥çš„æ–‡æœ¬æœ€å¤§è¡Œæ•°@property(NS_NONATOMIC_IOSONLY) NSUInteger maximumNumberOfLines;//è¿™ä¸ªæ–¹æ³•ç”¨äºæä¾›ç»™å­ç±»è¿›è¡Œé‡å†™ è¿™é‡Œè¿”å›çš„Rectæ˜¯å¯ä»¥å¸ƒå±€æ–‡æœ¬çš„åŒºåŸŸ- (CGRect)lineFragmentRectForProposedRect:(CGRect)proposedRect atIndex:(NSUInteger)characterIndex writingDirection:(NSWritingDirection)baseWritingDirection remainingRect:(nullable CGRect *)remainingRect;//è¿™ä¸ªBOOLå€¼çš„å±æ€§å†³å®šContainerçš„å®½åº¦æ˜¯å¦è‡ªé€‚åº”TextViewçš„å®½åº¦@property(NS_NONATOMIC_IOSONLY) BOOL widthTracksTextView;//è¿™ä¸ªBOOLå€¼çš„å±æ€§å†³å®šContainerçš„é«˜åº¦æ˜¯å¦è‡ªé€‚åº”TextViewçš„é«˜åº¦@property(NS_NONATOMIC_IOSONLY) BOOL heightTracksTextView; ä¸Šé¢æ‰€åˆ—ä¸¾çš„æ–¹æ³•ä¸­ï¼ŒexclusionPathså±æ€§ååˆ†å¼ºå¤§ï¼Œé€šè¿‡è®¾ç½®å®ƒï¼Œå¯ä»¥å°†å¸ƒå±€åŒºåŸŸå†…å‰”å‡ºä¸€å—åŒºåŸŸä¸è¿›è¡Œå¸ƒå±€ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456789101112[super viewDidLoad]; NSTextContainer * container = [[NSTextContainer alloc]initWithSize:CGSizeMake(300, 500)]; UIBezierPath * path = [UIBezierPath bezierPathWithArcCenter:self.view.center radius:70 startAngle:0 endAngle:M_PI*2 clockwise:YES]; container.exclusionPaths = @[path]; container.lineBreakMode = NSLineBreakByCharWrapping; NSLayoutManager * layoutManager = [[NSLayoutManager alloc]init]; [layoutManager addTextContainer:container]; NSTextStorage * storage = [[NSTextStorage alloc]initWithString:@\"The NSTextContainer class defines a region where text is laid out. An NSLayoutManager uses NSTextContainer to determine where to break lines, lay out portions of text, and so on. An NSTextContainer object normally defines rectangular regions, but you can define exclusion paths inside the text container to create regions where text does not flow. You can also subclass to create text containers with nonrectangular regions, such as circular regions, regions with holes in them, or regions that flow alongside graphics.The NSTextContainer class defines a region where text is laid out. An NSLayoutManager uses NSTextContainer to determine where to break lines, lay out portions of text, and so on. An NSTextContainer object normally defines rectangular regions, but you can define exclusion paths inside the text container to create regions where text does not flow. You can also subclass to create text containers with nonrectangular regions, such as circular regions, regions with holes in them, or regions that flow alongside graphics.An NSLayoutManager uses NSTextContainer to determine where to break lines, lay out portions of text, and so on. An NSTextContainer object normally defines rectangular regions, but you can define exclusion paths inside the text container to create regions where text does not flow. You can also subclass to create text containers with nonrectangular regions, such as circular regions, regions with holes in them, or regions that flow alongside graphics.\"]; [storage addLayoutManager:layoutManager]; UITextView * textView = [[UITextView alloc]initWithFrame:self.view.frame textContainer:container]; [self.view addSubview:textView]; æ•ˆæœå¦‚ä¸‹å›¾ï¼š äº”ã€å…³äºNSLayoutManageré¡¾åæ€ä¹‰ï¼ŒNSLayoutManagerä¸“é—¨è´Ÿè´£å¯¹æ–‡æœ¬çš„å¸ƒå±€æ¸²æŸ“ï¼Œç®€å•ç†è§£ï¼Œå…¶ä»NSTextStorageä»æ‹¿å»å±•ç¤ºçš„å†…å®¹ï¼Œå°†å»å¤„ç†åå¸ƒå±€åˆ°NSTextContainerä¸­ã€‚ NSLayoutManagerä¸NSTextContainerçš„å…³ç³»ä¸ºä¸€å¯¹å¤šï¼Œæ”¾å…¥NSLayoutManagerä¸­çš„NSTextContainerä¼šä»¥æœ‰åºæ•°ç»„çš„å½¢å¼è¿›è¡Œç®¡ç†ï¼Œåœ¨å†…å®¹å¸ƒå±€æ—¶ï¼Œè¶…å‡ºç¬¬ä¸€ä¸ªNSTextContainerçš„å†…å®¹ä¼šè¢«å¸ƒå±€åˆ°åä¸€ä¸ªNSTextContainerä¸­ã€‚ NSLayoutManagerä¸­æœ‰å…³NSTextContaineræ“ä½œçš„æ–¹æ³•å¦‚ä¸‹ï¼š 12345678910//containeræ•°ç»„@property(readonly, NS_NONATOMIC_IOSONLY) NSArray&lt;NSTextContainer *&gt; *textContainers;//æ·»åŠ ä¸€ä¸ªcontainer- (void)addTextContainer:(NSTextContainer *)container;//åœ¨æŒ‡å®šä½ç½®æ’å…¥ä¸€ä¸ªcontainer- (void)insertTextContainer:(NSTextContainer *)container atIndex:(NSUInteger)index;//åˆ é™¤ä¸€ä¸ªæŒ‡å®šçš„container- (void)removeTextContainerAtIndex:(NSUInteger)index;//æ³¨æ„ è¿™ä¸ªæ–¹æ³•ä¸éœ€è¦æ˜¾å¼çš„è°ƒç”¨ å½“å¸ƒå±€Containerå‘ç”Ÿå˜åŒ–æ—¶ ç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨- (void)textContainerChangedGeometry:(NSTextContainer *)container; ä¸å¸ƒå±€ç®¡ç†ç›¸å…³çš„å±æ€§ä¸æ–¹æ³•å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425//æ˜¯å¦æ˜¾ç¤ºéšå½¢çš„ç¬¦å·/*é»˜è®¤ä¸ºNOï¼Œå¦‚æœè®¾ç½®ä¸ºYESï¼Œåˆ™ä¼šå°†ç©ºæ ¼ç­‰éšå½¢å­—ç¬¦æ˜¾ç¤ºå‡ºæ¥*/@property(NS_NONATOMIC_IOSONLY) BOOL showsInvisibleCharacters;//æ˜¯å¦æ˜¾ç¤ºæŸäº›å¸ƒå±€æ§åˆ¶å­—ç¬¦@property(NS_NONATOMIC_IOSONLY) BOOL showsControlCharacters;//è¿™ä¸ªå±æ€§å¯ä»¥ç”¨äºè®¾ç½®æ–­å­—/*è¿™ä¸ªå±æ€§çš„å–å€¼ä¸º0åˆ°1ä¹‹é—´ é»˜è®¤ä¸º0 å³å•è¯æ¢è¡Œæ—¶ä»æ¥ä¸ä¼šä¸­æ–­ è¶Šæ¥è¿‘1 åˆ™ä½¿ç”¨è¿å­—ç¬¦è¿›è¡Œå•è¯æ¢è¡Œä¸­æ–­çš„æ¦‚ç‡è¶Šå¤§*/@property(NS_NONATOMIC_IOSONLY) CGFloat hyphenationFactor;//æ˜¯å¦ä½¿ç”¨å­—ä½“å®šä¹‰çš„è¡Œè·/*é»˜è®¤ä½¿ç”¨å­—ä½“æ‰€å®šä¹‰çš„è¡Œè·ä¿¡æ¯ é€šè¿‡è®¾ç½®è¿™ä¸ªå±æ€§ä¸ºNOå¯ä»¥å…³é—­æ­¤åŠŸèƒ½*/@property(NS_NONATOMIC_IOSONLY) BOOL usesFontLeading;//è¿™ä¸ªå±æ€§è®¾ç½®æ˜¯å¦å…è®¸å¯¹ç›¸é‚»ä½ç½®çš„å†…å®¹è¿›è¡Œå¸ƒå±€ é»˜è®¤ä¸ºYESï¼Œè®¾ç½®ä¸ºNOåå°†å¯ä»¥æä¾›å¤§æ–‡æœ¬å¸ƒå±€çš„æ•ˆç‡@property(NS_NONATOMIC_IOSONLY) BOOL allowsNonContiguousLayout;//ä¸‹é¢è¿™å‡ ä¸ªæ–¹æ³•ç”¨äºç§»é™¤æŸä¸€èŒƒå›´å†…çš„å¸ƒå±€- (void)invalidateGlyphsForCharacterRange:(NSRange)charRange changeInLength:(NSInteger)delta actualCharacterRange:(nullable NSRangePointer)actualCharRange;- (void)invalidateLayoutForCharacterRange:(NSRange)charRange actualCharacterRange:(nullable NSRangePointer)actualCharRange NS_AVAILABLE(10_5, 7_0);- (void)invalidateDisplayForCharacterRange:(NSRange)charRange;- (void)invalidateDisplayForGlyphRange:(NSRange)glyphRange; å…­ã€æ–‡æœ¬å†…å®¹ç±»NSTextStorageNSTextStorageå®é™…ä¸Šæ˜¯ç»§æ‰¿è‡ªNSMutableAttributedStringã€‚NSAttributedStringæ˜¯ä¸€ç§è‡ªå¸¦å±æ€§çš„å­—ç¬¦ä¸²ç±»ï¼Œå…³äºNSAttributedStringçš„åŸºæœ¬ç”¨æ³•ï¼Œå¦‚ä¸‹åšå®¢ä¸­æœ‰ä»‹ç»ï¼š http://my.oschina.net/u/2340880/blog/397500ã€‚ TextKitæ¡†æ¶ä¸­åœ¨å¯¹æ–‡æœ¬è¿›è¡Œå¸ƒå±€æ—¶ï¼Œä¸»è¦å…³æ³¨äº3ä¸ªæ–¹é¢ï¼š 1.å­—ç¬¦çš„å±æ€§ï¼Œä¾‹å¦‚é¢œè‰²ï¼Œå­—ä½“ç­‰ã€‚ 2.è¡Œä¸æ®µè½çš„å±æ€§ï¼Œå¦‚ç¼©è¿›ï¼Œè¡Œé—´è·ç­‰ã€‚ 3.æ–‡æ¡£å±æ€§ï¼ŒåŒ…æ‹¬å››å‘¨è¾¹è·ã€æ–‡æ¡£å°ºå¯¸ç­‰ã€‚ è¿™äº›éƒ½ç”±NSAttributedStringæ¥è¿›è¡Œå®šä¹‰ã€‚ å¦‚ä¸Šæ‰€ä»‹ç»çš„æ˜¯TextKitæ¡†æ¶çš„ä¸»è¦å·¥ä½œåŸç†ï¼Œæ–‡å­—æ¸²æŸ“ï¼Œå›¾æ–‡æ··æ’çš„æ›´å¤šå†…å®¹ï¼Œåé¢åšå®¢ä¼šç»§ç»­æ¢è®¨ã€‚æœ‰ç–æ¼ä¹‹å¤„ï¼Œå…±åŒè®¨è®ºè¿›æ­¥ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"Androidå¼€å‘ä¸­RelativeLayoutç›¸å¯¹å¸ƒå±€","slug":"251Androidå¼€å‘ä¸­RelativeLayoutç›¸å¯¹å¸ƒå±€","date":"2016-09-05T16:00:00.000Z","updated":"2021-07-12T02:25:31.791Z","comments":true,"path":"2016/09/06/251Androidå¼€å‘ä¸­RelativeLayoutç›¸å¯¹å¸ƒå±€/","link":"","permalink":"http://huishao.cc/2016/09/06/251Androidå¼€å‘ä¸­RelativeLayoutç›¸å¯¹å¸ƒå±€/","excerpt":"","text":"Androidå¼€å‘ä¸­RelativeLayoutç›¸å¯¹å¸ƒå±€RelativeLayoutå¸ƒå±€æ˜¯Androidç•Œé¢å¸ƒå±€ä¸­åº”ç”¨æœ€å¹¿ä¹Ÿæœ€å¼ºå¤§çš„ä¸€ç§å¸ƒå±€ï¼Œå…¶ä¸ä»…ååˆ†çµæ´»ï¼Œå¯ä»¥è§£å†³å¼€å‘ä¸­å„ç§ç•Œé¢å¸ƒå±€éœ€æ±‚ï¼ŒåŒæ—¶ä¹Ÿå¾ˆæ–¹ä¾¿äº†è§£å†³äº†å¤šå±å¹•å°ºå¯¸çš„é€‚é…é—®é¢˜ã€‚åœ¨iOSå¼€å‘ä¸­ï¼ŒAutolayoutæŠ€æœ¯æ€»æ˜¯è¢«èµä¸ç»å£ï¼ŒRelativeLayoutå¸ƒå±€å°±æ˜¯Andriodç³»ç»Ÿä¸­çš„Autolayoutï¼Œå…¶åˆè¢«ç§°ä¸ºç›¸å¯¹å¸ƒå±€ã€‚ æ‰€è°“ç›¸å¯¹å¸ƒå±€ï¼Œæ˜¯æŒ‡å…¶åæ ‡çš„ç¡®å®šå¹¶ä¸æ˜¯å¼€å‘è€…å†™æ­»çš„ï¼Œè€Œæ˜¯æœ‰ç³»ç»Ÿè‡ªåŠ¨è®¡ç®—å‡ºæ¥çš„ï¼Œé‚£ä¹ˆç³»ç»Ÿå¦‚ä½•è®¡ç®—æ¯ä¸ªè§†å›¾æ§ä»¶çš„ä½ç½®å‘¢ï¼Ÿå¼€å‘è€…éœ€è¦ä¸ºå…¶æ·»åŠ ä¸€äº›è§„åˆ™è¿›è¡Œçº¦æŸï¼Œè¿™äº›è§„åˆ™å¤§è‡´åŒ…æ‹¬2ç±»ï¼š ç¬¬1ç±» ä¸çˆ¶è§†å›¾ä¹‹é—´ä½ç½®å…³ç³»çš„è§„åˆ™ï¼š æ­¤ç±»è§„åˆ™åŒ…æ‹¬åœ¨çˆ¶è§†å›¾ä¸­çš„å±…ä¸­ã€å·¦å¯¹é½ã€å³å¯¹é½ã€ä¸Šå¯¹é½ã€ä¸‹å¯¹é½ç­‰ã€‚ ç¬¬2ç±» å¹³çº§è§†å›¾ä¹‹é—´ç›¸å¯¹ä½ç½®å…³ç³»çš„è§„åˆ™ï¼š æ­¤ç±»è§„åˆ™åŒ…æ‹¬åŒçº§è§†å›¾é—´å¯¹å…¶å…³ç³»ï¼Œç›¸å¯¹ä½ç½®å…³ç³»ï¼Œä¾‹å¦‚Aåœ¨Bå·¦ä¾§20åƒç´ ä½ç½®ï¼ŒBä¸Cä¸Šè¾¹ç¼˜å¯¹é½ç­‰ã€‚ ä½¿ç”¨RelativeLayoutè¿›è¡Œå¸ƒå±€ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637@Overrideprotected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); RelativeLayout relativeLayout = new RelativeLayout(this); Button button1 = new Button(this); button1.setText(\"æŒ‰é’®ä¸€\"); button1.setId(R.id.button1); RelativeLayout.LayoutParams layoutParams1 = new RelativeLayout.LayoutParams(200,200); //æ·»åŠ çº¦æŸ ä½¿å…¶é è¿‘çˆ¶è§†å›¾å³ä¸Šè§’ layoutParams1.addRule(RelativeLayout.ALIGN_PARENT_TOP); layoutParams1.addRule(RelativeLayout.ALIGN_PARENT_RIGHT); button1.setLayoutParams(layoutParams1); Button button2 = new Button(this); button2.setText(\"æŒ‰é’®äºŒ\"); button2.setId(R.id.button2); RelativeLayout.LayoutParams layoutParams2 = new RelativeLayout.LayoutParams(200,200); //æ·»åŠ çº¦æŸ è®©å…¶å³ä¾§é è¿‘æŒ‰é’®ä¸€å·¦ä¾§ ä¸Šä¾§é è¿‘æŒ‰é’®ä¸€ä¸‹ä¾§ layoutParams2.addRule(RelativeLayout.BELOW,R.id.button1); layoutParams2.addRule(RelativeLayout.LEFT_OF,R.id.button1); button2.setLayoutParams(layoutParams2); Button button3 = new Button(this); button3.setText(\"æŒ‰é’®ä¸‰\"); button3.setId(R.id.button3); RelativeLayout.LayoutParams layoutParams3 = new RelativeLayout.LayoutParams(200,200); //æ·»åŠ çº¦æŸ è®©å…¶å›ºå®šè·ç¦»æŒ‰é’®äºŒ ä¸‹æ–¹100px å·¦ä¾§è¾¹ç¼˜å¯¹å…¶ layoutParams3.addRule(RelativeLayout.ALIGN_LEFT,R.id.button2); layoutParams3.addRule(RelativeLayout.BELOW,R.id.button2); layoutParams3.topMargin = 100; button3.setLayoutParams(layoutParams3); relativeLayout.addView(button1); relativeLayout.addView(button2); relativeLayout.addView(button3); setContentView(relativeLayout);&#125; å°æç¤ºï¼šä½¿ç”¨ä»£ç åˆ›å»ºçš„è§†å›¾ï¼Œå¯ä»¥é€šè¿‡xmlæ–‡ä»¶é…ç½®idï¼Œå¦‚ä¸‹ï¼š 123456&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;&lt;resources&gt; &lt;item name=\"button1\" type=\"id\"&gt;&lt;/item&gt; &lt;item name=\"button2\" type=\"id\"&gt;&lt;/item&gt; &lt;item name=\"button3\" type=\"id\"&gt;&lt;/item&gt;&lt;/resources&gt; æ•ˆæœå¦‚ä¸‹å›¾ï¼š RelativeLayoutå¸ƒå±€ä¸­è§†å›¾ä½ç½®çš„é…ç½®ä¸»è¦ä½¿ç”¨å…¶å†…éƒ¨ç±»LayoutParamsï¼Œè¿™ä¸ªå†…éƒ¨ç±»LayoutParamsæ˜¯ç»§æ‰¿è‡ªMarginLayoutParamsã€‚å…¶ä¸­å¸¸ç”¨æ–¹æ³•å’Œå±æ€§åˆ—ä¸¾å¦‚ä¸‹ï¼š 123456789101112131415//è®¾ç½®å·¦è¾¹è·public int leftMargin;//è®¾ç½®ä¸Šè¾¹è·public int topMargin;//è®¾ç½®å³è¾¹è·public int rightMargin;//è®¾ç½®ä¸‹è¾¹è·public int bottomMargin;//æ·»åŠ ä¸€ä¸ªè§„åˆ™ è¿™ä¸ªæ–¹æ³•æ·»åŠ çš„è§„åˆ™ä¸éœ€è¦å‚ç…§è§†å›¾ ä¾‹å¦‚é è¿‘çˆ¶è§†å›¾è¾¹ç¼˜public void addRule(int verb)//æ·»åŠ ä¸€ä¸ªè§„åˆ™ è¿™ä¸ªæ–¹æ³•æ·»åŠ çš„è§„åˆ™éœ€è¦ä¸€ä¸ªå‚ç…§è§†å›¾ ä¾‹å¦‚æŸä¸¤ä¸ªå¹³çº§è§†å›¾é—´çš„ä½ç½®å…³ç³» anchorå‚æ•°ä¸ºè§†å›¾idpublic void addRule(int verb, int anchor) //ç§»é™¤ä¸€ä¸ªå¸ƒå±€è§„åˆ™public void removeRule(int verb) ç”¨äºè¿›è¡Œå¸ƒå±€è§„åˆ™é…ç½®çš„å‚æ•°å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243/*=======éœ€è¦ä½¿ç”¨addRule(int verb, int anchor)æ–¹æ³•æ·»åŠ çš„çº¦æŸè§„åˆ™==========*///å°†å½“å‰è§†å›¾çº¦æŸåˆ°æŸä¸ªè§†å›¾å·¦è¾¹public static final int LEFT_OF//å°†å½“å‰è§†å›¾çº¦æŸåˆ°æŸä¸ªè§†å›¾å³è¾¹public static final int RIGHT_OF//å°†å½“å‰è§†å›¾çº¦æŸåˆ°æŸä¸ªè§†å›¾ä¸Šè¾¹public static final int ABOVE//å°†å½“å‰è§†å›¾çº¦æŸåˆ°æŸä¸ªè§†å›¾ä¸‹è¾¹public static final int BELOW//å°†å½“å‰è§†å›¾çº¦æŸä¸æŸä¸ªè§†å›¾åŸºçº¿å¯¹é½public static final int ALIGN_BASELINE//å°†å½“å‰è§†å›¾çº¦æŸä¸æŸä¸ªè§†å›¾å·¦ä¾§å¯¹é½public static final int ALIGN_LEFT//å°†å½“å‰è§†å›¾çº¦æŸä¸æŸä¸ªè§†å›¾ä¸Šä¾§å¯¹é½public static final int ALIGN_TOP//å°†å½“å‰è§†å›¾çº¦æŸä¸æŸä¸ªè§†å›¾å³ä¾§å¯¹é½public static final int ALIGN_RIGHT//å°†å½“å‰è§†å›¾çº¦æŸä¸æŸä¸ªè§†å›¾ä¸‹ä¾§å¯¹é½public static final int ALIGN_BOTTOM//å°†å½“å‰è§†å›¾çº¦æŸä¸æŸä¸ªè§†å›¾èµ·å§‹å¯¹é½public static final int START_OF//å½“å½“å‰è§†å›¾çº¦æŸä¸æŸä¸ªè§†å›¾æœ«å°¾å¯¹é½public static final int END_OF/*========éœ€è¦ä½¿ç”¨addRule(int verb)æ–¹æ³•æ·»åŠ çš„çº¦æŸè§„åˆ™====================*///çº¦æŸå½“å‰è§†å›¾ä¸çˆ¶è§†å›¾å·¦ä¾§å¯¹é½public static final int ALIGN_PARENT_LEFT//çº¦æŸå½“å‰è§†å›¾ä¸çˆ¶è§†å›¾ä¸Šä¾§å¯¹é½public static final int ALIGN_PARENT_TOP//çº¦æŸå½“å‰è§†å›¾ä¸çˆ¶è§†å›¾ä¸Šä¾§å¯¹é½public static final int ALIGN_PARENT_RIGHT//çº¦æŸå½“å‰è§†å›¾ä¸çˆ¶è§†å›¾ä¸‹ä¾§å¯¹é½public static final int ALIGN_PARENT_BOTTOM//çº¦æŸå½“å‰è§†å›¾ä¸çˆ¶è§†å›¾å±…ä¸­å¯¹é½public static final int CENTER_IN_PARENT//çº¦æŸå½“å‰è§†å›¾ä¸çˆ¶è§†å›¾æ°´å¹³å±…ä¸­public static final int CENTER_HORIZONTAL//çº¦æŸå½“å‰è§†å›¾ä¸çˆ¶è§†å›¾å‚ç›´å±…ä¸­public static final int CENTER_VERTICAL//çº¦æŸå½“å‰è§†å›¾ä¸çˆ¶è§†å›¾èµ·å§‹å¯¹é½public static final int ALIGN_PARENT_START//çº¦æŸå½“å‰è§†å›¾ä¸çˆ¶è§†å›¾æœ«å°¾å¯¹é½public static final int ALIGN_PARENT_END ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š435043639","categories":[{"name":"Androidå°è®°","slug":"Androidå°è®°","permalink":"http://huishao.cc/categories/Androidå°è®°/"}],"tags":[],"keywords":[{"name":"Androidå°è®°","slug":"Androidå°è®°","permalink":"http://huishao.cc/categories/Androidå°è®°/"}]},{"title":"Androidå¼€å‘ä¸­TableLayoutè¡¨æ ¼å¸ƒå±€","slug":"250Androidå¼€å‘ä¸­TableLayoutè¡¨æ ¼å¸ƒå±€","date":"2016-09-04T16:00:00.000Z","updated":"2021-07-12T02:24:51.205Z","comments":true,"path":"2016/09/05/250Androidå¼€å‘ä¸­TableLayoutè¡¨æ ¼å¸ƒå±€/","link":"","permalink":"http://huishao.cc/2016/09/05/250Androidå¼€å‘ä¸­TableLayoutè¡¨æ ¼å¸ƒå±€/","excerpt":"","text":"Androidå¼€å‘ä¸­TableLayoutè¡¨æ ¼å¸ƒå±€ä¸€ã€å¼•è¨€åœ¨ç§»åŠ¨ç«¯åº”ç”¨ç¨‹åºå¼€å‘ä¸­ï¼Œå¸¸å¸¸ä¼šä½¿ç”¨åˆ°è¡¨æ ¼å¸ƒå±€ï¼ŒiOSå’ŒAndroidå¼€å‘æ¡†æ¶ä¸­éƒ½æä¾›äº†ç‹¬ç«‹çš„è¡¨æ ¼è§†å›¾æ§ä»¶ä¾›å¼€å‘è€…ä½¿ç”¨ï¼Œä¾‹å¦‚iOSä¸­çš„UITableViewã€UICollectionViewï¼ŒAndroidä¸­çš„ListViewã€GridViewç­‰ã€‚é™¤äº†ç‹¬ç«‹çš„è§†å›¾æ§ä»¶å¤–ï¼ŒAndroidä¸­è¿˜æä¾›äº†ä¸€ä¸ªå¸ƒå±€å®¹å™¨ç±»TableLayoutï¼Œä½¿ç”¨å…¶ä¹Ÿå¯ä»¥è¿›è¡Œæ–¹ä¾¿çš„è¡¨æ ¼å¸ƒå±€ã€‚ å‰è¾¹åšå®¢æœ‰ä»‹ç»è¿‡å…³äºLinearLayoutçº¿æ€§å¸ƒå±€çš„ç›¸å…³å†…å®¹ï¼ŒLinearLayoutåªèƒ½è¿›è¡Œæ°´å¹³æˆ–è€…å‚ç›´æ–¹å‘ä¸Šçš„æ’åˆ—å¸ƒå±€ï¼Œä½¿ç”¨LinearLayoutçš„å¸ƒå±€åµŒå¥—ï¼Œå®é™…ä¸Šä¹Ÿå¯ä»¥å®ç°è¡¨æ ¼å¸ƒå±€çš„æ ·å¼ã€‚å®é™…ä¸Šï¼ŒTableLayoutå°±æ˜¯é‡‡ç”¨è¿™æ ·çš„åŸç†ï¼ŒTableLayoutç»§æ‰¿äºLinearLayoutï¼Œå…¶ä¸­æ¯ä¸ªè§†å›¾å…ƒç´ ä½œä¸ºä¸€è¡Œï¼ŒåŒæ—¶Androidä¸­è¿˜æä¾›äº†ä¸€ä¸ªTableRowç±»ï¼Œè¿™ä¸ªç±»åŒæ ·ç»§æ‰¿è‡ªLinearLayoutï¼Œå…¶ä¸­æ¯ä¸ªè§†å›¾å…ƒç´ ä½œä¸ºå½“å‰è¡Œä¸­çš„ä¸€åˆ—ï¼Œç»“åˆä½¿ç”¨TableLayoutä¸TableRowï¼Œå°±å®ç°äº†è¡Œåˆ—çš„è¡¨æ ¼å¸ƒå±€ã€‚ äºŒã€å…³äºTableRowTableRowå¯ä»¥ç®€å•ç†è§£ä¸ºTableLayoutå¸ƒå±€ä¸­çš„ä¸€è¡Œï¼Œå½“ç„¶ï¼ŒTableLayoutä¸­ä¹Ÿå¯ä»¥ç›´æ¥æ·»åŠ ä»»æ„çš„Viewè§†å›¾ï¼Œä½†æ˜¯é»˜è®¤æ·»åŠ çš„Viewè§†å›¾å°†ç‹¬å ä¸€è¡Œã€‚TableRowä¸­å¯ä»¥æ·»åŠ å…¶ä»–è§†å›¾ï¼Œæ¯ä¸ªè§†å›¾è¢«ä½œä¸ºä¸€åˆ—å¤„ç†ï¼Œé€šè¿‡TableRowçš„å†…éƒ¨ç±»LayoutParamsæ¥è®¾ç½®TableRowå†…éƒ¨è§†å›¾çš„å¸ƒå±€æ–¹å¼ï¼Œå…¶ä¸­ä¸»è¦å¯ä»¥é€šè¿‡è®¾ç½®å®½é«˜æˆ–è€…è®¾ç½®æƒé‡æ¥å®šåˆ¶æ¯åˆ—è§†å›¾å…ƒç´ çš„å°ºå¯¸ï¼Œä¾‹å¦‚ï¼š 123456789101112131415161718192021222324252627282930TableLayout tableLayout = new TableLayout(this);//åˆ›å»ºè¡Œ ç¬¬ä¸€è¡Œç”¨å•ä¸ªå…ƒç´ TextView textView = new TextView(this);textView.setText(\"1000\");textView.setTextSize(20);textView.setTextAlignment(View.TEXT_ALIGNMENT_VIEW_END);tableLayout.addView(textView);//ç¬¬äºŒè¡Œä½¿ç”¨TableRowTableRow tableRow1 = new TableRow(this);//è®¾ç½®æœ¬è¡Œä¸­æ¯ä¸€åˆ—çš„æƒé‡å’ŒtableRow1.setWeightSum(10);Button button11 = new Button(this);button11.setText(\"AC\");//è®¾ç½®å›ºå®šå®½é«˜TableRow.LayoutParams layoutParams1 = new TableRow.LayoutParams(300,200);button11.setLayoutParams(layoutParams1);tableRow1.addView(button11);Button button12 = new Button(this);//é€šè¿‡æƒé‡è®¾ç½®åˆ—çš„å®½åº¦ å æ­£å¸¸åˆ—å®½çš„ä¸€åŠTableRow.LayoutParams layoutParams2 = new TableRow.LayoutParams(0,200,5);button12.setLayoutParams(layoutParams2);button12.setText(\"+/-\");tableRow1.addView(button12);Button button13 = new Button(this);button13.setText(\"%\");tableRow1.addView(button13);Button button14 = new Button(this);button14.setText(\"Ã·\");tableRow1.addView(button14);tableLayout.addView(tableRow1); ä¸Šé¢ä»£ç å‘TableRowä¸­æ·»åŠ äº†4ä¸ªè§†å›¾ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¼šç”Ÿæˆå››åˆ—ï¼ŒsetWeightSum()æ–¹æ³•ç”¨äºè®¾ç½®æ¯åˆ—çš„æƒé‡å’Œï¼Œéœ€è¦æ³¨æ„ï¼Œå®ƒä½œç”¨çš„å¯¹è±¡æ˜¯æ¯ä¸€åˆ—å…ƒç´ ï¼Œè€Œä¸æ˜¯æ•´è¡Œã€‚ä¸Šé¢çš„ä»£ç æ•ˆæœå¦‚ä¸‹ï¼š é»˜è®¤çš„åˆ—å®½æ˜¯è¯„åˆ†æ•´ä¸ªè¡Œå®½ï¼Œå¯ä»¥é€šè¿‡æŒ‡å®šå®½åº¦æˆ–è€…æƒé‡æ¥ä¿®æ”¹ç‰¹å®šåˆ—çš„åˆ—å®½ã€‚ è¿˜æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œå¦‚æœä¸€ä¸ªTableLayoutå¸ƒå±€ä¸­å¤šä¸ªTableRowï¼Œåˆ™è¡¨æ ¼çš„åˆ—æ•°ä¼šä»¥æœ€å¤šåˆ—çš„ä¸€è¡Œä¸ºå‡†ï¼Œä¾‹å¦‚åœ¨æ·»åŠ ä¸€è¡ŒTableRowï¼Œè€Œå…¶ä¸­åªæœ‰ä¸€åˆ—ï¼Œåˆ™å…¶ä¾ç„¶ä¼šé¢„ç•™4åˆ—çš„ä½ç½®ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345TableRow tableRow2 = new TableRow(this);Button button = new Button(this);button.setText(\"è·³è¿‡\");tableRow2.addView(button);tableLayout.addView(tableRow2); æ•ˆæœå¦‚ä¸‹ï¼š ä¹Ÿå¯ä»¥è®¾ç½®è·³è¿‡æŸåˆ—è¿›è¡Œå¸ƒå±€ï¼Œæˆ–è€…è¿›è¡Œåˆ—çš„åˆå¹¶ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011TableRow tableRow2 = new TableRow(this);Button button = new Button(this);button.setText(\"è·³è¿‡\");TableRow.LayoutParams layoutParams21 = new TableRow.LayoutParams();//ä»ç¬¬2åˆ—å¼€å§‹layoutParams21.column = 1;//åˆå¹¶3åˆ—layoutParams21.span = 3;button.setLayoutParams(layoutParams21);tableRow2.addView(button);tableLayout.addView(tableRow2); ä¸‰ã€å…³äºTableLayoutåœ¨å‘TableLayoutå®¹å™¨ä¸­æ·»åŠ æˆ–è€…ç§»é™¤è§†å›¾çš„æ—¶å€™ï¼Œå¼€å‘è€…å¯ä»¥å¯¹å…¶è¿›è¡Œç›‘å¬ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112TableLayout tableLayout = new TableLayout(this);tableLayout.setOnHierarchyChangeListener(new ViewGroup.OnHierarchyChangeListener() &#123; @Override public void onChildViewAdded(View parent, View child) &#123; Toast.makeText(getBaseContext(),\"add\",Toast.LENGTH_SHORT).show(); &#125; @Override public void onChildViewRemoved(View parent, View child) &#123; Toast.makeText(getBaseContext(),\"remove\",Toast.LENGTH_SHORT).show(); &#125;&#125;); å¼€å‘è€…è¿˜å¯ä»¥å¯¹è¡¨æ ¼ä¸­è§†å›¾å…ƒç´ çš„ä¸€äº›å°ºå¯¸è‡ªé€‚åº”åšä¸€äº›è®¾ç½®ï¼Œå…¶ä¸­è¿˜æœ‰ä¸€äº›å¸¸ç”¨çš„æ–¹æ³•åˆ—ä¸¾å¦‚ä¸‹ï¼š 12345678910111213141516//è·å–è¡¨æ ¼ä¸­æ‰€æœ‰åˆ—æ˜¯å¦æ˜¯å¯æ”¶ç¼©çš„public boolean isShrinkAllColumns()//è®¾ç½®è¡¨æ ¼ä¸­çš„æ‰€æœ‰åˆ—æ˜¯å¦å¯æ”¶ç¼©public void setShrinkAllColumns()//è·å–è¡¨æ ¼ä¸­çš„æ‰€æœ‰åˆ—æ˜¯å¦å¯æ‹‰ä¼¸public boolean isStretchAllColumns()//è®¾ç½®è¡¨æ ¼ä¸­çš„æ‰€æœ‰åˆ—æ˜¯å¦å¯æ‹‰ä¼¸public void setStretchAllColumns()//è®¾ç½®æŸä¸€åˆ—æ˜¯å¦å¯æ‹‰ä¼¸public void setColumnStretchable(int columnIndex, boolean isStretchable)//è·å–æŸä¸€åˆ—æ˜¯å¦å¯æ‹‰ä¼¸public boolean isColumnStretchable(int columnIndex)//è®¾ç½®æŸä¸€åˆ—æ˜¯å¦å¯æ”¶ç¼©public void setColumnShrinkable(int columnIndex, boolean isShrinkable)//è·å–æŸä¸€åˆ—æ˜¯å¦å¯æ”¶ç¼©public boolean isColumnShrinkable(int columnIndex) æ‰€è°“å¯æ”¶ç¼©çš„åˆ—ï¼Œæ˜¯æŒ‡å¦‚æœæ­¤åˆ—çš„å†…å®¹å®½åº¦è¶…å‡ºä¸€å®šå®½åº¦ï¼Œä¸ºäº†ä½¿åé¢çš„åˆ—å†…å®¹å±•ç¤ºå‡ºæ¥ï¼Œæ­¤åˆ—å®½åº¦ä¼šè‡ªåŠ¨æ”¶ç¼©ï¼Œé«˜åº¦ä¼šå¢åŠ ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š è‡³äºå¯æ‹‰ä¼¸çš„åˆ—ï¼Œæ˜¯æŒ‡å¦‚æœæ­¤è¡Œå†…å®¹å†…æœ‰å……æ»¡æ•´è¡Œï¼Œæ­¤åˆ—ä¼šè¿›è¡Œæ‹‰ä¼¸è‡ªåŠ¨å……æ»¡ã€‚ ä¸‹é¢è¿™äº›æ–¹æ³•ä¸è¡¨æ ¼ä¸­åˆ—çš„éšè—æœ‰å…³ï¼š 1234//è®¾ç½®æŸåˆ—æ˜¯å¦éšè—public void setColumnCollapsed(int columnIndex, boolean isCollapsed)//è·å–æŸåˆ—æ˜¯å¦è¢«éšè—public boolean isColumnCollapsed(int columnIndex) éœ€è¦æ³¨æ„ï¼Œåœ¨TableLayoutä¸­ä¹Ÿå®šä¹‰äº†ä¸€ä¸ªLayoutParamsçš„å†…éƒ¨ç±»ï¼Œå…¶ç”¨äºè®¾ç½®å…¶ä¸­æ¯ä¸€è¡Œè§†å›¾å…ƒç´ çš„å¸ƒå±€ï¼Œä½†æ˜¯å¼€å‘è€…åªèƒ½è®¾ç½®æ­¤å¸ƒå±€ç±»å¯¹åº”çš„é«˜åº¦å‚æ•°ï¼Œå®½åº¦å°†å¼ºåˆ¶è®¾ç½®ä¸ºMATCH_PARENTã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š435043639","categories":[{"name":"Androidå°è®°","slug":"Androidå°è®°","permalink":"http://huishao.cc/categories/Androidå°è®°/"}],"tags":[],"keywords":[{"name":"Androidå°è®°","slug":"Androidå°è®°","permalink":"http://huishao.cc/categories/Androidå°è®°/"}]},{"title":"Androidå¼€å‘ä¹‹AbsoluteLayoutç»å¯¹å¸ƒå±€","slug":"249Androidå¼€å‘ä¹‹AbsoluteLayoutç»å¯¹å¸ƒå±€","date":"2016-09-01T16:00:00.000Z","updated":"2021-07-12T02:24:10.327Z","comments":true,"path":"2016/09/02/249Androidå¼€å‘ä¹‹AbsoluteLayoutç»å¯¹å¸ƒå±€/","link":"","permalink":"http://huishao.cc/2016/09/02/249Androidå¼€å‘ä¹‹AbsoluteLayoutç»å¯¹å¸ƒå±€/","excerpt":"","text":"Androidå¼€å‘ä¹‹AbsoluteLayoutç»å¯¹å¸ƒå±€AbsoluteLayoutç»å¯¹å¸ƒå±€å·²ç»è¢«å¼ƒç”¨ï¼Œä½†æ˜¯ç›¸å…³APIä¾ç„¶æœ‰æ•ˆï¼Œå…¶åˆè¢«ç§°ä¸ºåæ ‡å¸ƒå±€ï¼Œåœ¨iOSå¼€å‘æ”¯æŒAutolayoutä¹‹å‰ï¼Œæ‰€æœ‰çš„å¸ƒå±€æ¨¡å¼éƒ½å¯ä»¥ç†è§£ä¸ºç»å¯¹å¸ƒå±€ã€‚ä½†æ˜¯iPhoneè®¾å¤‡çš„å±å¹•å°ºå¯¸æœ‰é™ï¼Œä½¿ç”¨ç»å¯¹ä¸è§‰å¹¶ä¸ä¼šå‡ºç°å¤ªå¤šéš¾ä»¥è§£å†³çš„é—®é¢˜ï¼Œä½†æ˜¯å¯¹äºAndroidè®¾å¤‡å°±ä¸åŒäº†ï¼ŒAndroidè®¾å¤‡çš„å±å¹•å°ºå¯¸å’Œåˆ†è¾¨ç‡éƒ½æ— è§„èŒƒï¼Œä½¿ç”¨åæ ‡ç»å¯¹å¸ƒå±€çš„ç¼ºé™·å°±ååˆ†æ˜æ˜¾ã€‚ AbsoluteLayoutç›´æ¥é€šè¿‡å®šä½å…¶å†…éƒ¨è§†å›¾çš„ä½ç½®åæ ‡ç‚¹å’Œå°ºå¯¸æ¥è¿›è¡Œå¸ƒå±€ï¼Œåæ·»åŠ çš„è§†å›¾ä¼˜å…ˆçº§æ›´é«˜ï¼Œå¦‚æœåæ ‡æœ‰é‡åˆï¼Œä¼šè¦†ç›–å…ˆæ·»åŠ çš„è§†å›¾ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233@Overrideprotected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); AbsoluteLayout absoluteLayout = new AbsoluteLayout(this); absoluteLayout.setLayoutParams(new ViewGroup.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT)); setContentView(absoluteLayout); //æ·»åŠ 4ä¸ªTextView TextView textView1 = new TextView(this); textView1.setText(\"ç¬¬1ä¸ªtextView\"); //éœ€è¦æ³¨æ„ è¿™é‡Œçš„LayoutParams()æ„é€ æ–¹æ³•ä¸­çš„å‚æ•° å‰ä¸¤ä¸ªå‚æ•°ä¸ºè§†å›¾çš„å®½å’Œé«˜ åä¸¤ä¸ªä¸ºxä¸yä½ç½®åæ ‡ç‚¹ textView1.setLayoutParams(new AbsoluteLayout.LayoutParams(800,300,10,10)); textView1.setBackgroundColor(Color.RED); absoluteLayout.addView(textView1); TextView textView2 = new TextView(this); textView2.setText(\"ç¬¬2ä¸ªtextView\"); textView2.setLayoutParams(new AbsoluteLayout.LayoutParams(800,300,100,200)); textView2.setBackgroundColor(Color.YELLOW); absoluteLayout.addView(textView2); TextView textView3 = new TextView(this); textView3.setText(\"ç¬¬3ä¸ªtextView\"); textView3.setLayoutParams(new AbsoluteLayout.LayoutParams(800,300,200,400)); textView3.setBackgroundColor(Color.BLUE); absoluteLayout.addView(textView3); TextView textView4 = new TextView(this); textView4.setText(\"ç¬¬4ä¸ªtextView\"); textView4.setLayoutParams(new AbsoluteLayout.LayoutParams(800,300,300,600)); textView4.setBackgroundColor(Color.GREEN); absoluteLayout.addView(textView4);&#125; å¸ƒå±€æ•ˆæœå¦‚ä¸‹å›¾ï¼š å…¶å®å¸ƒå±€å®¹å™¨ä¸­å­è§†å›¾çš„å¸ƒå±€å‚æ•°ä¸»è¦æœ‰å®šä¹‰åœ¨å„ä¸ªå¸ƒå±€å®¹å™¨ç±»çš„å†…éƒ¨ç±»LayoutParamsæ¥è®¾ç½®ã€‚éœ€è¦æ³¨æ„ï¼Œåœ¨ä¸åŒåˆ†è¾¨ç‡çš„å±å¹•ä¸Šï¼Œä½¿ç”¨AbsoluteLayoutå¸ƒå±€æ•ˆæœå¯èƒ½ä¼šéš¾äºæŠŠæ§ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š435043639","categories":[{"name":"Androidå°è®°","slug":"Androidå°è®°","permalink":"http://huishao.cc/categories/Androidå°è®°/"}],"tags":[],"keywords":[{"name":"Androidå°è®°","slug":"Androidå°è®°","permalink":"http://huishao.cc/categories/Androidå°è®°/"}]},{"title":"Androidå¼€å‘ä¹‹FrameLayoutå¸ƒå±€","slug":"248Androidå¼€å‘ä¹‹FrameLayoutå¸ƒå±€","date":"2016-09-01T16:00:00.000Z","updated":"2021-07-12T02:23:22.881Z","comments":true,"path":"2016/09/02/248Androidå¼€å‘ä¹‹FrameLayoutå¸ƒå±€/","link":"","permalink":"http://huishao.cc/2016/09/02/248Androidå¼€å‘ä¹‹FrameLayoutå¸ƒå±€/","excerpt":"","text":"Androidå¼€å‘ä¹‹FrameLayoutå¸ƒå±€åœ¨Androidå¼€å‘ä¸­ï¼ŒFrameLayoutæ˜¯æ‰€æœ‰å¸ƒå±€å®¹å™¨ä¸­æœ€ç®€å•çš„ä¸€ç§ï¼Œåœ¨å‰è¾¹åšå®¢ä¸­æœ‰ä»‹ç»å…³äºAndroidå¼€å‘ä¸­çº¿æ€§å¸ƒå±€LinearLayoutçš„åº”ç”¨ã€‚LinearLayouté‡‡ç”¨çš„æ˜¯çº¿æ€§å¹³é“ºçš„å¸ƒå±€æ¨¡å¼ï¼ŒFrameLayoutä¹Ÿè¢«ç§°ä¸ºå¸§å¸ƒå±€ã€‚ LinearLayoutåº”ç”¨ä»‹ç»åœ°å€ï¼šhttp://my.oschina.net/u/2340880/blog/740714ã€‚ FrameLayoutç®€å•ç†è§£ï¼Œå¯ä»¥å°†å¸ƒå±€å®¹å™¨ç†è§£ä¸ºä¸€ä¸ªå•å…ƒç´ æ ˆï¼Œå…ˆæ”¾å…¥çš„è§†å›¾åœ¨æ ˆåº•ï¼Œåæ”¾å…¥çš„è§†å›¾åœ¨æ ˆé¡¶ï¼Œåæ”¾å…¥çš„è§†å›¾ä¼šè¦†ç›–å…ˆæ”¾å…¥çš„è§†å›¾ã€‚å¹¶ä¸”ï¼ŒFrameLayoutä¸èƒ½å¤Ÿè®¾ç½®å…¶å†…è§†å›¾çš„ä½ç½®ï¼Œé»˜è®¤éƒ½æ˜¯ä»å·¦ä¸Šè§’å¼€å§‹å¸ƒå±€ï¼Œè¿™ä¸ªå¸ƒå±€æ¨¡å¼åœ¨ç®€å•çš„é‡å ç•Œé¢ä¸­ä½¿ç”¨ååˆ†æ–¹ä¾¿ã€‚ ä½¿ç”¨ä»£ç è¿›è¡ŒFrameLayoutå¸ƒå±€ç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526@Overrideprotected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); FrameLayout frameLayout = new FrameLayout(this); setContentView(frameLayout); //æ·»åŠ å­è§†å›¾ TextView textView1 = new TextView(this); textView1.setLayoutParams(new FrameLayout.LayoutParams(600,600)); textView1.setBackgroundColor(Color.RED); frameLayout.addView(textView1); TextView textView2 = new TextView(this); textView2.setLayoutParams(new FrameLayout.LayoutParams(400,400)); textView2.setBackgroundColor(Color.YELLOW); frameLayout.addView(textView2); TextView textView3 = new TextView(this); textView3.setLayoutParams(new FrameLayout.LayoutParams(200,200)); textView3.setBackgroundColor(Color.BLUE); frameLayout.addView(textView3); TextView textView4 = new TextView(this); textView4.setLayoutParams(new FrameLayout.LayoutParams(100,100)); textView4.setBackgroundColor(Color.GREEN); frameLayout.addView(textView4);&#125; ä¸Šé¢ç¤ºä¾‹ä»£ç åœ¨FrameLayoutä¸­æ”¾å…¥4ä¸ªTextViewï¼Œåæ”¾å…¥çš„è§†å›¾ä¾æ¬¡å‡å°ï¼Œè¿è¡Œåæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š FrameLayoutåº”è¯¥æ˜¯å¼€å‘ä¸­å¾ˆå°‘ä½¿ç”¨åˆ°çš„ä¸€ç§å¸ƒå±€æ¨¡å¼ï¼Œåœ¨ååˆ†ç®€å•çš„ç•Œé¢éœ€æ±‚ä¸­ï¼Œä½¿ç”¨å®ƒå¾€å¾€ååˆ†æ–¹ä¾¿ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š435043639","categories":[{"name":"Androidå°è®°","slug":"Androidå°è®°","permalink":"http://huishao.cc/categories/Androidå°è®°/"}],"tags":[],"keywords":[{"name":"Androidå°è®°","slug":"Androidå°è®°","permalink":"http://huishao.cc/categories/Androidå°è®°/"}]},{"title":"Androidå¼€å‘ä¹‹LinearLayoutå¸ƒå±€è¯¦è§£","slug":"247Androidå¼€å‘ä¹‹LinearLayoutå¸ƒå±€è¯¦è§£","date":"2016-08-30T16:00:00.000Z","updated":"2021-07-09T11:48:44.753Z","comments":true,"path":"2016/08/31/247Androidå¼€å‘ä¹‹LinearLayoutå¸ƒå±€è¯¦è§£/","link":"","permalink":"http://huishao.cc/2016/08/31/247Androidå¼€å‘ä¹‹LinearLayoutå¸ƒå±€è¯¦è§£/","excerpt":"","text":"Androidå¼€å‘ä¹‹LinearLayoutå¸ƒå±€è¯¦è§£LinaerLayoutåˆè¢«ç§°ä¸ºçº¿æ€§å¸ƒå±€ï¼Œæ˜¯Androidç•Œé¢å¼€å‘ä¸­å¸¸ç”¨çš„ä¸€ç§å®¹å™¨è§†å›¾æ§ä»¶ã€‚å¯ä»¥ä½¿ç”¨XMLå¸ƒå±€æ–‡ä»¶é…ç½®å’Œä»£ç åŠ¨æ€åˆ›å»ºä¸¤ç§æ–¹å¼æ¥ä½¿ç”¨LinearLayoutã€‚ä½¿ç”¨LinearLayoutå¯ä»¥ååˆ†è½»æ¾çš„å¸ƒå±€å‡ºæ¨ªå‘æˆ–è€…çºµå‘çº¿æ€§å †å ç•Œé¢ï¼Œå¹¶ä¸”ï¼ŒåµŒå¥—ä½¿ç”¨LinearLayoutä¹Ÿå¯ä»¥æ–¹ä¾¿çš„å¸ƒå±€å‡ºå¤æ‚çš„å¹³é¢ç»„åˆå¸ƒå±€ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼ŒScrollViewä¼šä¸LinearLayoutè¿›è¡Œç»“åˆä½¿ç”¨ã€‚åœ¨iOS9ä¸­æ¨å‡ºçš„UIStackViewã€åœ¨watchOSå¼€å‘ä¸­ä½¿ç”¨å’Œæ ¸å¿ƒå¸ƒå±€æ¨¡å‹Groupä¸LinearLayoutçš„æ€è·¯ååˆ†ä¸€è‡´ï¼Œå¯è§è¿™ç§çº¿æ€§å †å çš„å¸ƒå±€æ–¹å¼åœ¨ä¸€å®šåœºæ™¯ä¸‹ååˆ†æœ‰ä¼˜åŠ¿ã€‚ ä½¿ç”¨ä»£ç åŠ¨æ€åˆ›å»ºLinearLayoutç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425@Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); //åˆ›å»ºå¯¹è±¡ LinearLayout linearLayout = new LinearLayout(this); linearLayout.setBackgroundColor(Color.WHITE); setContentView(linearLayout); //è®¾ç½®å¸ƒå±€æ–¹å‘ /* æ”¯æŒæ°´å¹³å’Œç«–ç›´ä¸¤ç§ public static final int HORIZONTAL = 0; æ°´å¹³çº¿æ€§å¸ƒå±€ public static final int VERTICAL = 1; ç«–ç›´çº¿æ€§å¸ƒå±€ */ linearLayout.setOrientation(LinearLayout.VERTICAL); //è®¾ç½®æ˜¾ç¤ºåˆ†å‰²çº¿çš„æ¨¡å¼ /* public static final int SHOW_DIVIDER_NONE = 0; ä¸æ˜¾ç¤ºåˆ†å‰²çº¿ public static final int SHOW_DIVIDER_BEGINNING = 1; åœ¨å¼€å§‹å¤„æ˜¾ç¤ºåˆ†å‰²çº¿ public static final int SHOW_DIVIDER_MIDDLE = 2; åœ¨å­è§†å›¾ä¹‹é—´æ˜¾ç¤ºåˆ†å‰²çº¿ public static final int SHOW_DIVIDER_END = 4; åœ¨ç»“æŸå°¾éƒ¨æ˜¾ç¤ºåˆ†å‰²çº¿ */ linearLayout.setShowDividers(LinearLayout.SHOW_DIVIDER_MIDDLE); //è®¾ç½®åˆ†å‰²çº¿Drawable linearLayout.setDividerDrawable(ResourcesCompat.getDrawable(getResources(),R.drawable.line,null)); &#125; LinearLayoutä¸­å¸¸ç”¨å±æ€§ä¸æ–¹æ³•ï¼Œåˆ—ä¸¾å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566//è·å–åˆ†å‰²çº¿Drawableå¯¹è±¡Drawable getDividerDrawable ()//è·å–åˆ†å‰²çº¿çš„paddingå€¼int getDividerPadding ()//è·å–å­è§†å›¾å¸ƒå±€æ¨¡å¼int getGravity ()//è·å–çº¿æ€§å¸ƒå±€æ–¹å‘int getOrientation ()//è·å–å±•ç¤ºåˆ†å‰²çº¿æ¨¡å¼int getShowDividers ()//è·å–å¸ƒå±€æƒé‡å’Œfloat getWeightSum ()//è®¾ç½®æ˜¯å¦å…è®¸è®¡é‡æœ€å¤§å­å…ƒç´  ä¸æƒé‡æœ‰å…³boolean isMeasureWithLargestChildEnabled ()//è®¾ç½®åˆ†å‰²çº¿Drawablevoid setDividerDrawable (Drawable divider)//è®¾ç½®åˆ†å‰²çº¿paddingå€¼void setDividerPadding (int padding)//è®¾ç½®å­è§†å›¾å¸ƒå±€æ¨¡å¼/*å¯é€‰å‚æ•°AXIS_CLIP //åŸå§‹å¯¹é½AXIS_PULL_AFTER AXIS_PULL_BEFOREAXIS_SPECIFIEDAXIS_X_SHIFTAXIS_Y_SHIFTBOTTOM //ä¸‹å¯¹é½CENTER //å±…ä¸­å¯¹é½CENTER_HORIZONTAL // æ°´å¹³å±…ä¸­å¯¹é½CENTER_VERTICAL // ç«–ç›´å±…ä¸­å¯¹é½CLIP_HORIZONTALCLIP_VERTICALDISPLAY_CLIP_HORIZONTALDISPLAY_CLIP_VERTICALEND //æœ«å°¾å¯¹é½FILL //å……æ»¡FILL_HORIZONTAL //æ°´å¹³å……æ»¡FILL_VERTICAL //ç«–ç›´å……æ»¡HORIZONTAL_GRAVITY_MASKLEFT //å·¦å¯¹é½NO_GRAVITY //ç©ºæ¨¡å¼RELATIVE_HORIZONTAL_GRAVITY_MASKRELATIVE_LAYOUT_DIRECTIONRIGHT //å³å¯¹é½START //èµ·å§‹å¯¹é½TOP //ä¸Šå¯¹é½VERTICAL_GRAVITY_MASK*/void setGravity (int gravity)//è®¾ç½®æ°´å¹³å¸ƒå±€æ¨¡å¼void setHorizontalGravity (int horizontalGravity)//è®¾ç½®å¸ƒå±€æ–¹å‘void setOrientation (int orientation)//è®¾ç½®ç«–ç›´å¸ƒå±€æ¨¡å¼void setVerticalGravity (int verticalGravity)//è®¾ç½®å¸ƒå±€æƒé‡å’Œ/*å½“å¸ƒå±€å®¹å™¨å†…å­è§†å›¾æ˜¯é€šè¿‡æƒé‡æ¥è®¡ç®—æ‰€å æ¯”ä¾‹æ—¶ è¿™ä¸ªå€¼è¡¨ç¤ºæƒé‡æ€»å’Œ*/void setWeightSum (float weightSum)//è®¾ç½®å­è§†å›¾çš„è§¦æ‘¸äº‹ä»¶æ˜¯å¦å»¶è¿Ÿæ‰§è¡Œ/*è¿™ä¸ªå±æ€§ç”¨äºç±»å‹ScrollViewï¼ŒListViewå¯ä»¥æ»‘åŠ¨çš„è§†å›¾ä¸­ï¼Œé¿å…æ‰‹åŠ¿å†²çª*/boolean shouldDelayChildPressedState () ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š435043639","categories":[{"name":"Androidå°è®°","slug":"Androidå°è®°","permalink":"http://huishao.cc/categories/Androidå°è®°/"}],"tags":[],"keywords":[{"name":"Androidå°è®°","slug":"Androidå°è®°","permalink":"http://huishao.cc/categories/Androidå°è®°/"}]},{"title":"iOSå¼€å‘ä¸­è¡Œé«˜çµæ´»å¯å˜çš„UITableViewçš„æ€§èƒ½ä¼˜åŒ–","slug":"246iOSå¼€å‘ä¸­è¡Œé«˜çµæ´»å¯å˜çš„UITableViewçš„æ€§èƒ½ä¼˜åŒ–","date":"2016-08-26T16:00:00.000Z","updated":"2021-07-09T11:45:01.131Z","comments":true,"path":"2016/08/27/246iOSå¼€å‘ä¸­è¡Œé«˜çµæ´»å¯å˜çš„UITableViewçš„æ€§èƒ½ä¼˜åŒ–/","link":"","permalink":"http://huishao.cc/2016/08/27/246iOSå¼€å‘ä¸­è¡Œé«˜çµæ´»å¯å˜çš„UITableViewçš„æ€§èƒ½ä¼˜åŒ–/","excerpt":"","text":"iOSå¼€å‘ä¸­è¡Œé«˜çµæ´»å¯å˜çš„UITableViewçš„æ€§èƒ½ä¼˜åŒ–ä¸€ã€UITableViewçš„æ„å»ºåŸç†åœ¨æ–°é—»ç±»ï¼Œç”µå•†ç±»ç­‰åº”ç”¨ä¸­ï¼Œåº”ç”¨ç€å¤§é‡çš„å›¾æ–‡æ··æ’è§†å›¾ï¼Œåœ¨è¡¨è§†å›¾UITableViewä¸­ï¼Œå¼€å‘è€…é€šå¸¸éœ€è¦åœ¨å¦‚ä¸‹ä»£ç†æ–¹æ³•ä¸­è®¡ç®—å‡ºå½“å‰cellå¡«å……å†…å®¹åçš„é«˜åº¦ï¼Œä¹‹åå°†å…¶è¿”å›ï¼š 12345-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath&#123; //å…ˆæ ¹æ®æ•°æ®æºä¸­æ•°æ®è®¡ç®—é«˜åº¦ CGFloat height = 0; return height;&#125; ç„¶è€Œï¼Œå¦‚æœåœ¨å¦‚ä¸Šæ–¹æ³•ä¸­è¿›è¡Œæ‰“å°è°ƒè¯•å¯ä»¥å‘ç°ï¼ŒheightForRowAtIndexPathæ–¹æ³•ä¼šé‡å¤æ‰§è¡Œå¥½å¤šæ¬¡ï¼Œé¦–å…ˆï¼Œå¹¶ä¸”heightForRowAtIndexPathæ–¹æ³•çš„æ‰§è¡Œæœºåˆ¶åœ¨ä¸åŒç‰ˆæœ¬çš„iOSç³»ç»Ÿè¿˜ä¼šæœ‰å¾ˆå¤§ä¸åŒã€‚ä»¥iOS9ä¸ºä¾‹ï¼Œä¸€è¡Œcellè¦å±•ç¤ºåœ¨å±å¹•ä¸Šï¼Œè‡³å°‘è¦æ‰§è¡Œ5éTableViewçš„heightForRowAtIndexPathæ–¹æ³•ï¼š TableViewé…ç½®éƒ¨åˆ†ï¼š â‘  å½“TableViewè§†å›¾å³å°†å±•ç°åœ¨å±å¹•ä¸Šæ—¶ï¼Œä¼šæŠŠæ‰€æœ‰è¡Œçš„è¡Œé«˜æ•°æ®è¿›è¡Œæ‹‰å–ã€‚ â‘¡å½“TableViewåœ¨æ‰§è¡ŒsetLayoutMarginsæ–¹æ³•è¿›è¡Œè‡ªèº«å¸ƒå±€æ—¶ä¼šæŠŠæ‰€æœ‰è¡Œé«˜æ•°æ®è¿›è¡Œæ‹‰å–ã€‚ â‘¢TableViewåœ¨æ‰§è¡ŒlayoutSubViewsæ–¹æ³•è¿›è¡Œå­è§†å›¾å¸ƒå±€æ—¶ä¼šå†æ¬¡æŠŠæ‰€æœ‰è¡Œé«˜æ•°æ®è¿›è¡Œæ‹‰å–ã€‚ TableViewCellé…ç½®éƒ¨åˆ†ï¼š â‘£å½“ä½¿ç”¨cellIDè¿›è¡Œä¸TableViewç»‘å®šçš„cellè·å–æ—¶ä¼šæ‹‰å–æœ¬è¡Œcellçš„é«˜åº¦æ•°æ®ã€‚ â‘¤å½“cellè¿›è¡ŒlayoutSubViewsæ–¹æ³•è¿›è¡Œå¸ƒå±€æ—¶ä¼šå†æ¬¡æ‹‰å–æœ¬è¡Œcellçš„é«˜åº¦æ•°æ®ã€‚ ä¸Šé¢åˆ—ä¸¾çš„5ä¸­æ‹‰å–cellé«˜åº¦çš„åœºæ™¯ä¸­ï¼ŒTableViewé…ç½®éƒ¨åˆ†åªä¼šåœ¨TableViewç¬¬ä¸€æ¬¡å±•ç°åœ¨å±å¹•ä¸Šæ—¶å‡ºç°ï¼Œä½†æ˜¯å…¶æ‹‰å–çš„æ˜¯æ‰€æœ‰è¡Œçš„è¡Œé«˜æ•°æ®ï¼Œå¦‚æœè¡¨è§†å›¾æœ‰100è¡Œæˆ–è€…æ›´å¤šï¼Œè¿™å°†æ˜¯ä¸€ä¸ªååˆ†è€—è´¹æ€§èƒ½çš„è¿‡ç¨‹ã€‚TableViewCellé…ç½®éƒ¨åˆ†ï¼Œåªæœ‰å½“cellå°†è¦å‡ºç°åœ¨å±å¹•ä¸Šæ—¶æ‰ä¼šå‡ºç°ï¼Œå¹¶ä¸”åªæ‹‰å–å½“å‰è¡Œçš„è¡Œé«˜ï¼Œè¿™ä¸¤ç§åœºæ™¯ä¼šåœ¨ç”¨æˆ·æ»‘åŠ¨TableViewæ—¶ä¸æ–­è¢«æ‰§è¡Œï¼Œå¹¶ä¸”æ ¹æ®UITableViewçš„å¸ƒå±€cellåŸç†ï¼Œç³»ç»Ÿä¼šé»˜è®¤å‡†å¤‡å½“å‰ä¸€å±é«˜åº¦æ‰€èƒ½å®¹çº³cellä¸ªæ•°åŠ 1ä¸ªcellã€‚ å½“æ‰§è¡ŒTableViewçš„reloadDataæ–¹æ³•è¿›è¡Œç•Œé¢åˆ·æ–°æ—¶ï¼Œç³»ç»Ÿå…ˆä¼šæŠŠæ‰€æœ‰è¡Œçš„è¡Œé«˜æ•°æ®æ‹‰å–ä¸€éï¼Œä¹‹åå’ŒUITableViewCellé…ç½®éƒ¨åˆ†çš„åœºæ™¯ä¸€ç›´ï¼Œä¼šæ‹‰å–å³å°†å‡ºç°åœ¨å±å¹•ä¸Šçš„cellçš„è¡Œé«˜æ•°æ®ã€‚ ç”¨ç¤ºæ„å›¾å½¢è±¡çš„è¡¨ç¤ºä¸Šè¿°é€»è¾‘å¦‚ä¸‹ï¼š é€šè¿‡ä¸Šé¢åˆ†æï¼Œä»¥10è¡Œæ•°æ®çš„è¡¨æ ¼è§†å›¾ä¸ºä¾‹ï¼Œè‹¥ä¸€å±å¹•å¯ä»¥å‘ˆç°7è¡Œæ•°æ®(TableViewéœ€è¦å‡†å¤‡8è¡Œ)ï¼Œåˆ™åœ¨ç¬¬ä¸€æ¬¡å±•ç¤ºTableViewè§†å›¾æ—¶ï¼Œä¼šæ‰§è¡Œ44æ¬¡heightForRwoAtIndexPathæ–¹æ³•ï¼Œæ¯æ¬¡åˆ·æ–°TableViewéœ€è¦æ‰§è¡Œ24æ¬¡heightForRwoAtIndexPathæ–¹æ³•ï¼Œå¦‚æœTableViewçš„è¡Œæ•°å¢åŠ åˆ°3ä½æ•°ï¼Œåˆ™è¿™ä¸ªæ–¹æ³•çš„æ‰§è¡Œæ¬¡æ•°å°†ä¼šååˆ†ææ€–ğŸ‘¿ã€‚ è‡³äºä¸ºä½•UITableViewåœ¨è¿›è¡Œé…ç½®æ—¶ä¹Ÿéœ€è¦æ‹‰å–æ‰€æœ‰çš„è¡Œé«˜æ•°æ®ï¼Œæˆ‘çŒœæƒ³å…¶ä¸ºäº†è¿›è¡Œè§†å›¾çš„ä¸€äº›åˆå§‹åŒ–æ“ä½œï¼Œä¾‹å¦‚è¡¨è§†å›¾å³ä¾§æ»šåŠ¨æ¡çš„å®½åº¦å’Œæ‰€å æ¯”ä¾‹ç­‰ã€‚å¹¶ä¸”ï¼Œæ¯æ¬¡æ‹‰å–é«˜åº¦éƒ½ä»ä»£ç†æ–¹æ³•æ‹‰å–ï¼Œè€Œä¸æ˜¯å­˜å…¥å†…éƒ¨çš„ä¸€ä¸ªå˜é‡å±æ€§ä¸­ï¼Œé¿å…äº†å› ä¸ºæ•°æ®æºæ›´æ”¹æ—¶æœºå·§åˆè€Œäº§ç”Ÿçš„ç•Œé¢ä¸é¢„æœŸä¸ä¸€è‡´çš„é£é™©ã€‚ äºŒã€å¯¹UITableViewå¯å˜è¡Œé«˜çš„è®¡ç®—æ–¹å¼è¿›è¡Œä¼˜åŒ–é€šè¿‡å‰é¢çš„åˆ†æï¼Œå¯ä»¥ç†è§£å¦‚æœå°†å¤æ‚çš„è®¡ç®—ä»£ç å†™åœ¨heightForRowAtIndexPathæ–¹æ³•ä¸­ï¼Œä»£ä»·å°†æ˜¯éå¸¸æƒ¨é‡çš„ã€‚æ»‘åŠ¨ä¸æµç•…ï¼Œå±å¹•å¡é¡¿å¾ˆå¤šæ€§èƒ½é—®é¢˜éƒ½æ˜¯ç”±äºè¿™ä¸ªåŸå› ã€‚å¯¹äºè¡Œé«˜å›ºå®šçš„è¡¨æ ¼è§†å›¾ï¼Œå¼€å‘è€…å¯ä»¥ç›´æ¥è®¾ç½®TableViewçš„å›ºå®šè¡Œé«˜ï¼Œå¦‚ä¸‹ï¼š 1_tableView.rowHeight = 200; å¦‚æœè¡Œé«˜æ˜¯ä¸å›ºå®šäº†ï¼Œåˆ™åº”è¯¥æƒ³åŠæ³•è®©heightForRowAtIndexPathæ–¹æ³•å®Œæˆæœ€å°‘çš„å·¥ä½œï¼Œå…¶å®æœ€å°‘çš„å·¥ä½œè«è¿‡äºæ‹¿è¿‡ä¸€ä¸ªé«˜åº¦ï¼Œç›´æ¥è¿”å›ï¼Œå› æ­¤å¼€å‘è€…é€šå¸¸ä¼šå°†å¯¹åº”è¡Œçš„è¡Œé«˜è®¡ç®—ä¸€æ¬¡åï¼ŒæŠŠå€¼è¿›è¡Œä¿å­˜ï¼Œä¹‹ååœ¨æ‰§è¡ŒheightForRowAtIndexPathæ–¹æ³•æ‹‰å–è¡Œé«˜æ—¶ï¼Œç›´æ¥è¿”å›å·²ç»è®¡ç®—è¿‡çš„è¡Œé«˜æ•°æ®ï¼Œå…·ä½“å¦‚ä½•æ“ä½œæ¯”è¾ƒçµæ´»ï¼Œå¯ä»¥å¯¹åº”ä¸€ä¸ªæ•°ç»„å±æ€§ï¼Œå°†è®¡ç®—åçš„è¡Œé«˜æ”¾å…¥æ•°ç»„ä¸­ï¼Œæ¯æ¬¡å–è¡Œé«˜æ—¶ï¼Œæ£€æŸ¥æ•°ç»„ä¸­æ˜¯å¦å·²ç»æœ‰è®¡ç®—è¿‡çš„è¡Œé«˜æ•°æ®ï¼Œå¦‚æœæœ‰ç›´æ¥è¿”å›ã€‚æˆ‘ä¸ªäººæ›´å€¾å‘å°†è¡Œé«˜æ•°æ®å°è£…è¿›cellçš„æ•°æ®æ¨¡å‹Modelä¸­ã€‚ é€šè¿‡ä¼˜åŒ–ï¼Œå¯ä»¥æœ‰æ•ˆçš„å‡å°‘é‡å¤çš„é«˜åº¦è®¡ç®—ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘åŸå…ˆå¤„ç†æ­¤ç±»é—®é¢˜çš„ä¸»è¦æ–¹å¼ã€‚ç„¶è€Œï¼Œåªæ˜¯æé«˜äº†ä»£ç çš„æ€§èƒ½ï¼Œå¯¹å¼€å‘è€…æ¥è¯´ï¼Œå·¥ä½œé‡å’Œå¤æ‚åº¦æœ‰å¢è€Œæ— å‡ã€‚åœ¨å¼€å‘ä¸­é€šå¸¸ä¼šé‡åˆ°ä¸€äº›ååˆ†å¤æ‚çš„ç•Œé¢ï¼Œè€Œè¿™äº›ç•Œé¢ä¸­cellçš„é«˜åº¦éƒ½æ˜¯éœ€è¦é€šè¿‡è¯·æ±‚åˆ°çš„æ•°æ®åŠ¨æ€æ”¹å˜çš„ï¼Œæ¯ä¸ªcelléƒ½è¦å†™å¤æ‚çš„å°ºå¯¸è®¡ç®—ä»£ç ååˆ†ä»¤äººå¿ƒçƒ¦ã€‚åœ¨iOS7ä¹‹åï¼Œç³»ç»Ÿæä¾›äº†ä¸€ç§è‡ªåŠ¨è®¡ç®—cellé«˜åº¦çš„æ–¹æ³•ï¼Œè¿™æ— è®ºåœ¨æ€§èƒ½è¿˜æ˜¯å·¥ä½œé‡ä¸Šï¼Œéƒ½å®Œå…¨è§£æ”¾äº†å¼€å‘è€…ã€‚ åœ¨iOS7ç³»ç»Ÿä¹‹åï¼ŒUITableViewç±»ä¸­å¢åŠ äº†ä¸€ä¸ªestimatedRowHeightå±æ€§ï¼Œé¡¾åæ€ä¹‰ï¼Œè¿™ä¸ªå±æ€§æ˜¯è®¾ç½®UITableViewCellä¸­çš„å¤§çº¦è¡Œé«˜å€¼ã€‚è¿™ä¸ªå€¼è®¾ç½®ä¹‹åï¼Œå¼€å‘è€…æ— éœ€è®¾ç½®rowHeightå±æ€§ï¼Œä¹Ÿä¸éœ€è¦å®ç°heightForRowAtIndexPathæ–¹æ³•ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ ¹æ®UITableViewCellä¸­contentViewçš„çº¦æŸæ¥è®¡ç®—è‡ªå·±çš„è¡Œé«˜ã€‚estimatedRowHeightå±æ€§ç”¨äºTableViewè¿›è¡Œåˆå§‹åŒ–ï¼Œå…¶ä¼šå½±å“åˆ°è¡¨æ ¼è§†å›¾å³ä¾§æ»šåŠ¨æ¡çš„å®½åº¦ã€‚cellå±•ç°å‡ºæ¥æ—¶çœŸæ­£çš„è¡Œé«˜å¹¶ä¸å—è¿™ä¸ªå±æ€§å€¼çš„å½±å“ã€‚ é‚£ä¹ˆç°åœ¨é—®é¢˜æ¥äº†ï¼Œå¦‚ä½•æ‰èƒ½è®©cellæ­£ç¡®è®¡ç®—è‡ªå·±çš„é«˜åº¦ï¼Œè¿™å°±è¦ä½¿ç”¨åˆ°Autolayoutäº†ï¼Œæ— è®ºæ˜¯é€šè¿‡xibæ–‡ä»¶åˆ›å»ºçš„cellè¿˜æ˜¯ä»£ç åˆ›å»ºçš„cellï¼Œè‹¥æƒ³è®©cellè‡ªåŠ¨æ­£ç¡®çš„è®¡ç®—å‡ºè‡ªèº«çš„é«˜åº¦ï¼Œå¿…é¡»æ·»åŠ è¶³å¤Ÿå‹åŠ›çš„çº¦æŸã€‚æ‰€è°“è¶³å¤Ÿå‹åŠ›ï¼Œæ˜¯æŒ‡UITableViewCellçš„contentViewçš„ä¸Šã€ä¸‹ã€å·¦ã€å³å¿…é¡»è¢«å†…éƒ¨æ§ä»¶çš„çº¦æŸæ‰€æ’‘æ»¡ï¼Œéœ€è¦æ³¨æ„ï¼Œcellä¸Šçš„è§†å›¾å¿…é¡»æ·»åŠ åœ¨contentViewä¸Šï¼Œå¦åˆ™è®¡ç®—ä¼šå‡ºç°é—®é¢˜ã€‚ ä¾‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå·¦ä¾§çš„å›¾æ ‡è¿›è¡Œäº†ä¸çˆ¶è§†å›¾çš„å·¦ä¾§è·ç¦»çº¦æŸï¼Œæ ‡é¢˜Labelè¿›è¡Œäº†ä¸çˆ¶è§†å›¾çš„ä¸Šä¾§è·ç¦»çº¦æŸå’Œå³ä¾§è·ç¦»çº¦æŸï¼Œå†…å®¹Labelè¿›è¡Œäº†ä¸æ ‡é¢˜Labelçš„ä¸Šä¾§çº¦æŸå’Œä¸çˆ¶è§†å›¾çš„ä¸‹å†Œçº¦æŸï¼Œå¹¶ä¸”å¯¹å®½åº¦è¿›è¡Œäº†çº¦æŸã€‚æ­¤æ—¶ï¼ŒUITableViewCellçš„contentViewå››å‘¨éƒ½è¢«å­è§†å›¾è¿›è¡Œäº†çº¦æŸï¼Œå¯ä»¥æƒ³è±¡ï¼Œå†…å®¹Labelçš„æ–‡æœ¬é•¿åº¦æ˜¯ä¸å®šçš„ï¼Œå½“æ–‡æœ¬é•¿åº¦æ˜¯çš„å†…å®¹Labelè¿›è¡Œæ¢è¡Œï¼Œå†…å®¹Labelçš„é«˜åº¦æ”¹å˜çš„æ—¶å€™ï¼ŒcontentViewä¸‹å†Œä¼šå—åˆ°å†…å®¹Labelæ–½åŠ çš„å‹åŠ›ï¼Œè¿™æ—¶cellä¹Ÿä¼šæ ¹æ®çº¦æŸè‡ªåŠ¨æ‰©å……è‡ªå·±çš„é«˜åº¦ã€‚ ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233- (void)viewDidLoad &#123; [super viewDidLoad]; self.title = @\"è¡¨è§†å›¾\"; _tableView = [[UITableView alloc]initWithFrame:self.view.frame style:UITableViewStylePlain]; [_tableView registerNib:[UINib nibWithNibName:@\"TableViewCell\" bundle:nil] forCellReuseIdentifier:@\"cellid\"]; _tableView.delegate = self; _tableView.dataSource = self; //è®¾ç½®ä¸€ä¸ªæ¨¡ç³Šçš„è¡Œé«˜ç”¨äºé…ç½®TableViewå³ä¾§æ»šåŠ¨æ¡ _tableView.estimatedRowHeight = 60; [self.view addSubview:_tableView]; titleArray = @[@\"æ ‡é¢˜1\",@\"æ ‡é¢˜2\",@\"æ ‡é¢˜3\",@\"æ ‡é¢˜4\",@\"æ ‡é¢˜5\",@\"æ ‡é¢˜6\",@\"æ ‡é¢˜7\",@\"æ ‡é¢˜8\",@\"æ ‡é¢˜9\",@\"æ ‡é¢˜10\"]; detailArray = @[@\"å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹\", @\"å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹\", @\"å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹\", @\"å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹\", @\"å†…å®¹å†…å®¹å®¹å†…å®¹å†…å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹\", @\"å®¹å†…å®¹å†…å†…å®¹å†…å®¹\", @\"å†…å®¹å†…å®¹å†…å®¹å†…å®¹å®¹å†…å®¹å†…å®¹å†…å®¹\", @\"å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹\", @\"å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å®¹å†…å®¹å†…å†…å®¹å†…å®¹å†…å®¹\", @\"å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹\"];&#125;-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section&#123; return 10;&#125;-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath&#123; TableViewCell * cell = [tableView dequeueReusableCellWithIdentifier:@\"cellid\" forIndexPath:indexPath]; cell.title.text = titleArray[indexPath.row]; cell.detail.text = detailArray[indexPath.row]; return cell;&#125; é€šè¿‡ä¸Šé¢ç¤ºä¾‹å¯ä»¥çœ‹åˆ°ï¼Œååˆ†ç®€å•çš„ä»£ç å®Œç¾çš„è§£å†³äº†å›¾æ–‡æ··æ’cellé«˜åº¦çš„è‡ªé€‚åº”ã€‚AutolayoutçœŸçš„æ˜¯ä¸€ç§ååˆ†å¼ºå¤§çš„æŠ€æœ¯ğŸ˜„ã€‚ å…³äºç»†èŠ‚æ–¹é¢ï¼Œè¿˜æœ‰ä¸€ä¸ªé—®é¢˜éœ€è¦æ³¨æ„ï¼Œé¢„ä¼°çš„è¡Œé«˜ä¼šå½±å“åˆ°TableViewå³ä¾§æ»šåŠ¨æ¡çš„å±•ç°ï¼Œå¦‚æœæ¯ä¸ªcellè¡Œé«˜è·³è·ƒè·¨åº¦ååˆ†å¤§ï¼Œæ»šåŠ¨æ¡å®½åº¦çš„é…ç½®ä¼šå¤±å‡†ï¼Œéšç€ç”¨æˆ·æ»‘åŠ¨è¡¨è§†å›¾ï¼Œå³ä¾§æ»šåŠ¨æ¡å¯èƒ½ä¼šå‡ºç°é•¿çŸ­è·³è·ƒçš„æƒ…å†µï¼Œå¦‚æœå¼€å‘è€…éœ€è¦ç²¾å‡†è¿™ä¸ªæ»šåŠ¨æ¡çš„é…ç½®ï¼Œå¯ä»¥åœ¨å¦‚ä¸‹ä»£ç†æ–¹æ³•ä¸­è¿”å›å…·ä½“cellçš„ä¼°è®¡è¡Œé«˜ã€‚ 1234-(CGFloat)tableView:(UITableView *)tableView estimatedHeightForRowAtIndexPath:(NSIndexPath *)indexPath&#123; //è¿™é‡Œæ ¹æ®ä¸åŒåˆ†åŒº æˆ–è€…ä¸åŒè¡Œ è®¾ç½®ä¼°è®¡çš„è¡Œé«˜ return 44;&#125; å…³äºestimatedHeightForRowAtIndexPathæ–¹æ³•å…¶å®è¿˜æœ‰ä¸€ç§åº”ç”¨åœºæ™¯ï¼Œå‰é¢ä»‹ç»çš„ä¼˜åŒ–æ–¹å¼éƒ½æ˜¯ä»¥Autolyoutä¸ºå‰æï¼Œå¯¹äºæ²¡æœ‰ä½¿ç”¨è‡ªåŠ¨å¸ƒå±€ï¼Œcellçš„é«˜åº¦éœ€è¦æ‰‹åŠ¨è®¡ç®—çš„åœºæ™¯ä¸­ï¼Œå¦‚æœå®ç°äº†è¿™ä¸ªæ–¹æ³•ï¼Œå¹¶ä¸”å®ç°äº†heightForRowAtIndexPathæ–¹æ³•ï¼ŒheightForRowAtIndexPathæ–¹æ³•ä¼šä»¥æ‡’åŠ è½½çš„æ–¹å¼æ‰§è¡Œï¼Œåªæœ‰åœ¨cellå°†è¦å±•ç°åœ¨å±å¹•ä¸Šæ—¶heightForRowAtIndexPathæ–¹æ³•æ‰ä¼šè¢«æ‰§è¡Œï¼Œè¿™ä¹Ÿå¯ä»¥æœ‰æ•ˆå‡å°ç”±äºé«˜åº¦è®¡ç®—å¸¦æ¥çš„æ€§èƒ½è´Ÿæ‹…ã€‚ ä¸‰ã€å…³äºé«˜åº¦ä¸å®šçš„UITableViewåˆ†åŒºå¤´å°¾è§†å›¾ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒTableViewçš„åˆ†åŒºå¤´å°¾è§†å›¾é«˜åº¦éƒ½æ˜¯å›ºå®šçš„ï¼Œå› æ­¤ä¸€èˆ¬ä¸éœ€è¦è€ƒè™‘è®¡ç®—åˆ†åŒºå¤´å°¾è§†å›¾é«˜åº¦äº§ç”Ÿçš„æ€§èƒ½é—®é¢˜ï¼Œç±»æ¯”å¦‚cellçš„å¸ƒå±€åŸç†ï¼Œå…¶å®åˆ†åŒºå¤´å°¾è§†å›¾ä¹Ÿå¯ä»¥é€šè¿‡Autolayoutå®ç°è‡ªé€‚åº”é«˜åº¦ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324//è¿”å›ä¸€ä¸ªä¼°è®¡çš„åˆ†åŒºå¤´è§†å›¾é«˜åº¦-(CGFloat)tableView:(UITableView *)tableView estimatedHeightForHeaderInSection:(NSInteger)section&#123; return 10;&#125;//ä½¿ç”¨è‡ªåŠ¨å¸ƒå±€ç»™å¤´è§†å›¾æ·»åŠ è¶³å¤Ÿçš„å¸ƒå±€å‹åŠ›-(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section&#123; UIView * view = [[UIView alloc]init]; UILabel * label = [[UILabel alloc]init]; label.numberOfLines = 0; if (section==0) &#123; label.text = @\"å¤´è§†å›¾å¤´è§†å›¾å¤´è§†å›¾\"; &#125;else&#123; label.text = @\"å¤´è§†å›¾å¤´è§†å›¾å¤´è§†å›¾å¤´è§†å›¾å¤´è§†å›¾å¤´è§†å›¾å¤´è§†å›¾å¤´è§†å›¾å¤´è§†å›¾å¤´è§†å›¾å¤´è§†å›¾å¤´è§†å›¾å¤´è§†å›¾å¤´è§†å›¾å¤´è§†å›¾å¤´è§†å›¾å¤´è§†å›¾å¤´è§†å›¾å¤´è§†å›¾å¤´è§†å›¾å¤´è§†å›¾å¤´è§†å›¾å¤´è§†å›¾å¤´è§†å›¾å¤´è§†å›¾å¤´è§†å›¾å¤´è§†å›¾å¤´è§†å›¾å¤´è§†å›¾å¤´è§†å›¾\"; &#125; [view addSubview:label]; [label mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.left.equalTo(@10); make.right.equalTo(@-10); make.top.equalTo(@10); make.bottom.equalTo(@-10); &#125;]; return view;&#125; æ•ˆæœå¦‚ä¸‹å›¾ï¼š åˆ†åŒºä¸ºè§†å›¾çš„è®¾ç½®æ–¹å¼ä¸å¤´è§†å›¾ä¸€æ ·ã€‚ UITableViewç±»ä¸­è¿˜æœ‰ä¸€ä¸ªååˆ†æœ‰è¶£çš„å¸¸é‡ï¼š 1UIKIT_EXTERN const CGFloat UITableViewAutomaticDimension; UITableViewAutomaticDimensionæ˜¯ä¸€ä¸ªCGFloatç±»å‹çš„å¸¸é‡ï¼Œå…¶éœ€è¦å’Œç”¨æ¥å¤„ç†è¿”å›å¤´å°¾è§†å›¾æ ‡é¢˜çš„æ–¹æ³•ç»“åˆä½¿ç”¨ï¼Œç”¨å®ƒæ¥ä½œä¸ºTableViewåˆ†åŒºå¤´å°¾è§†å›¾çš„é«˜åº¦è¿”å›ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ ¹æ®æ ‡é¢˜æ˜¯å¦å­˜åœ¨æ¥è¿›è¡Œè‡ªé€‚åº”ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœè¿”å›çš„æ ‡é¢˜ä¸ºnilï¼Œåˆ™å¤´è§†å›¾ä¼šè¢«è‡ªåŠ¨éšè—ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314-(CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section&#123; //è§†å›¾ä¸ºnilåˆ™ä¼šè‡ªåŠ¨è¿”å›0 return UITableViewAutomaticDimension;&#125;-(NSString*)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section&#123; if (section==0) &#123; return nil; &#125;else&#123; return @\"å¤´è§†å›¾å¤´è§†å›¾å¤´è§†å›¾å¤´è§†å›¾å¤´è§†å›¾å¤´è§†å›¾å¤´è§†å›¾å¤´è§†\"; &#125;&#125; å°æç¤ºï¼šUITableViewCellåœ¨åˆ›å»ºå‡ºæ¥æ—¶ï¼Œå…¶å®½åº¦å¹¶ä¸ä¸€å®šå’ŒUITableViewå®½åº¦ä¸€è‡´ï¼Œå¦‚æœå¼€å‘è€…éœ€è¦é€šè¿‡è·å–cellçš„å®½åº¦æ¥å¤„ç†é€»è¾‘ï¼Œè¦åœ¨cellçš„layoutSubViewsé‡Œé¢è¿›è¡Œï¼Œæ­¤æ—¶cellçš„å®½åº¦æ‰æ­£ç¡®ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"Android Studio2.xç‰ˆæœ¬æ— æ³•è‡ªåŠ¨å…³è”æºç çš„è§£å†³æ–¹æ³•","slug":"245Android Studio2.xç‰ˆæœ¬æ— æ³•è‡ªåŠ¨å…³è”æºç çš„è§£å†³æ–¹æ³•","date":"2016-08-19T16:00:00.000Z","updated":"2021-07-09T11:32:09.578Z","comments":true,"path":"2016/08/20/245Android Studio2.xç‰ˆæœ¬æ— æ³•è‡ªåŠ¨å…³è”æºç çš„è§£å†³æ–¹æ³•/","link":"","permalink":"http://huishao.cc/2016/08/20/245Android Studio2.xç‰ˆæœ¬æ— æ³•è‡ªåŠ¨å…³è”æºç çš„è§£å†³æ–¹æ³•/","excerpt":"","text":"Android Studio2.xç‰ˆæœ¬æ— æ³•è‡ªåŠ¨å…³è”æºç çš„è§£å†³æ–¹æ³•åœ¨å­¦ä¹ androidå¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¯¹äºä¸€ä¸ªä¸ç†Ÿæ‚‰çš„ç±»ï¼Œé˜…è¯»æºç æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å­¦ä¹ æ–¹å¼ï¼Œä½¿ç”¨andorid studioå¼€å‘å·¥å…·çš„SDK Managerç®¡ç†å·¥å…·å¯ä»¥ååˆ†æ–¹ä¾¿çš„ä¸‹è½½SDKæºç ï¼Œæ‰“å¼€SDK Managerå·¥å…·ï¼Œä¸‹è½½æºç ç•Œé¢å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š åœ¨å¯¹åº”çš„SDKç‰ˆæœ¬ä¸­å¯ä»¥ä¸‹è½½SDKæºç ã€‚ å®‰å“æºç ä¸‹è½½å®Œæˆåï¼Œåœ¨ç±»åä¸ŠæŒ‰ä½commandé”®ï¼Œç‚¹å‡»é¼ æ ‡å·¦é”®ä¼šè·³è½¬è¿›å¯¹åº”æºç æ–‡ä»¶ï¼Œå¦‚æœæ˜¯Windowsç³»ç»Ÿï¼Œä½¿ç”¨æŒ‰ä½controlé”®ç‚¹å‡»é¼ æ ‡å·¦é”®ã€‚å¦‚æœandroid studioçš„ç‰ˆæœ¬ä¸º2.0ä»¥ä¸Šï¼Œéœ€è¦æ³¨æ„ï¼Œå°½ç®¡ä¸‹è½½äº†æºç æ–‡ä»¶ï¼Œå¯ä»¥åœ¨è·³è½¬æºç çš„æ—¶å€™ï¼Œä¼šæŠ¥é”™è¯¯æ‰¾ä¸åˆ°æºç  Sources for &apos;Android API 23 Platform&apos; not foundï¼Œå¹¶ä¸”ä¼šè·³è½¬ç±»å¯¹åº”çš„classæ–‡ä»¶ã€‚å¦‚ä¸‹å›¾ï¼š æˆ‘çŒœæƒ³å‡ºç°è¿™æ ·çš„åŸå› æ˜¯android studio2.xå·¥å…·çš„ä¸€ä¸ªå°bugï¼Œä¸‹è½½æºç åï¼Œå®ƒæ²¡æœ‰è‡ªåŠ¨å¯¹æºç è·¯å¾„è¿›è¡Œå…³è”ï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹æ®µæ·»åŠ æºç è·¯å¾„æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ 1.æ£€æŸ¥andriod sdkæºç æ˜¯å¦ä¸‹è½½æˆåŠŸï¼šé¦–å…ˆè¿›å…¥andorid sdkè·¯å¾„ä¸‹çš„sourcesç›®å½•ï¼Œå¦‚æœå…¶ä¸­æœ‰æºç æ–‡ä»¶ï¼Œè¯´æ˜andorid sdkçš„æºç æ–‡ä»¶å·²ç»ä¸‹è½½æˆåŠŸã€‚åœ¨OSç³»ç»Ÿä¸­ï¼Œè¿™ä¸ªè·¯å¾„ä¸€èˆ¬æ˜¯ï¼š~/Library/Android/sdk/sourcesã€‚ 2.åœ¨android studioåå¥½è®¾ç½®jdk.table.xmlæ–‡ä»¶ä¸­æ·»åŠ æºç è·¯å¾„ï¼Œè¿™ä¸ªæ–‡ä»¶åœ¨android studioå¼€å‘å·¥å…·çš„é…ç½®ç›®å½•ä¸­ï¼Œè·¯å¾„å¦‚ä¸‹ï¼š åœ¨Windowsç³»ç»Ÿä¸­ï¼Œä¸€èˆ¬ä¸ºï¼šç³»ç»Ÿç›˜:\\Users\\username\\.ä½ çš„android studioåç§°åŠç‰ˆæœ¬\\config\\options åœ¨OSç³»ç»Ÿä¸­ï¼Œä¸€èˆ¬ä¸ºï¼š~/Library/Preferences/ä½ çš„android studioåç§°åŠç‰ˆæœ¬/options æ‰“å¼€jdk.table.xmlæ–‡ä»¶åï¼Œæ‰¾åˆ°å¯¹åº”SDKç‰ˆæœ¬çš„æºç è·¯å¾„é…ç½®æ ‡ç­¾ï¼Œå°†ç¬¬ä¸€æ­¥ä¸­æ£€æŸ¥çš„æºç æ–‡ä»¶è·¯å¾„æ·»åŠ è¿›å…¥ï¼Œå¦‚ä¸‹å›¾ï¼š 3.å®Œå…¨å…³é—­android studioå¼€å‘å·¥å…·ï¼Œé‡æ–°å¯åŠ¨ï¼Œè¿™æ¬¡å¯ä»¥æˆåŠŸè·³è¿›æºç äº†ï¼ŒHave funã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š435043639","categories":[{"name":"Androidå°è®°","slug":"Androidå°è®°","permalink":"http://huishao.cc/categories/Androidå°è®°/"}],"tags":[],"keywords":[{"name":"Androidå°è®°","slug":"Androidå°è®°","permalink":"http://huishao.cc/categories/Androidå°è®°/"}]},{"title":"Androidå¼€å‘ä¸­åŸºç¡€åŠ¨ç”»æŠ€å·§çš„åº”ç”¨","slug":"244Androidå¼€å‘ä¸­åŸºç¡€åŠ¨ç”»æŠ€å·§çš„åº”ç”¨","date":"2016-08-16T16:00:00.000Z","updated":"2021-07-09T11:30:13.594Z","comments":true,"path":"2016/08/17/244Androidå¼€å‘ä¸­åŸºç¡€åŠ¨ç”»æŠ€å·§çš„åº”ç”¨/","link":"","permalink":"http://huishao.cc/2016/08/17/244Androidå¼€å‘ä¸­åŸºç¡€åŠ¨ç”»æŠ€å·§çš„åº”ç”¨/","excerpt":"","text":"Androidå¼€å‘ä¸­åŸºç¡€åŠ¨ç”»æŠ€å·§çš„åº”ç”¨ä¸€ã€å¼•è¨€æˆ‘æ˜¯å…ˆå…¥é—¨iOSçš„ç§»åŠ¨å¼€å‘è€…ï¼Œæåˆ°åŠ¨ç”»å¼€å‘ï¼ŒiOSå¼€å‘è€…å¾ˆå®¹æ˜“è”æƒ³åˆ°3ç§æ–¹å¼ï¼ŒUIImageViewçš„å¸§åŠ¨ç”»ï¼ŒUIViewå±‚çš„å±æ€§åŠ¨ç”»å’ŒCoreAnimationåŠ¨ç”»ã€‚Androidä¸­ä¹Ÿæœ‰3ç§æ–¹å¼åˆ›å»ºåŸºç¡€åŠ¨ç”»æ•ˆæœï¼Œåˆ†åˆ«ä¸ºView Animationï¼ŒProperty Animationå’ŒDrawable Animationã€‚ç”±äºAndroidå¼€å‘çš„å›ºæœ‰ç‰¹ç‚¹ï¼Œå…¶åœ¨è¿›è¡ŒåŠ¨ç”»ç¼–ç¨‹æ—¶ä¹Ÿæ”¯æŒä½¿ç”¨ä»£ç å’Œxmlé…ç½®æ–‡ä»¶ä¸¤ç§æ–¹å¼ã€‚æœ¬ç¯‡åšå®¢ï¼Œå°†ä¸»è¦å‘å¤§å®¶ä»‹ç»è¿™3ç§åˆ›å»ºAndroidåŠ¨ç”»æ–¹å¼çš„ä½¿ç”¨æ–¹æ³•ä¸å¯ä»¥åšåˆ°çš„æ•ˆæœã€‚ äºŒã€View AnimationåŠ¨ç”»çš„åº”ç”¨View Animationåˆè¢«ç§°ä¸ºTweened Animationï¼Œå…¶åº”ç”¨äºViewè§†å›¾å˜åŒ–çš„åŠ¨ç”»è¿‡æ¸¡æ•ˆæœã€‚View Animationä¸»è¦åˆ†ä¸ºå¦‚ä¸‹4ç±»ï¼š â‘ .AlphaAnimationï¼šé€æ˜åº¦åŠ¨ç”» â‘¡.RotateAnimationï¼šæ—‹è½¬åŠ¨ç”» â‘¢.ScaleAnimation:ç¼©æ”¾åŠ¨ç”» â‘£.TranslateAnimationï¼šä½ç§»åŠ¨ç”» 1.AlphaAnimationçš„åº”ç”¨AlphaAnimationç”¨äºå½“è§†å›¾é€æ˜åº¦å‘ç”Ÿå˜åŒ–æ—¶å±•ç¤ºè¿‡æ¸¡åŠ¨ç”»ï¼Œå¯ä»¥æ¸éšä¹Ÿå¯ä»¥æ¸ç°ã€‚ä½¿ç”¨AlphaAnimationåˆ›å»ºåŠ¨ç”»çš„æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š 123456//åˆ›å»ºAlphaAnimationåŠ¨ç”»å¯¹è±¡ æ„é€ æ–¹æ³•ä¸­éœ€è¦ä¼ å…¥ä¸¤ä¸ªfloatå€¼ åˆ†åˆ«æ˜¯è§†å›¾åŠ¨ç”»èµ·å§‹çš„alphaå€¼ä¸æœ€ç»ˆçš„alphaå€¼AlphaAnimation alphaAnimation = new AlphaAnimation(1,0);//è®¾ç½®åŠ¨ç”»æ‰§è¡Œæ—¶é—´ alphaAnimation.setDuration(3000);//è°ƒç”¨è§†å›¾çš„startAnimationæ–¹æ³•æ¥å¼€å¯åŠ¨ç”»animationImageView.startAnimation(alphaAnimation); 2.RotateAnimationçš„åº”ç”¨RotateAnimationç”¨äºåˆ›å»ºè§†å›¾çš„æ—‹è½¬åŠ¨ç”»ã€‚å…¶ç›¸æ¯”AlphaAnimationè¦å¤æ‚ä¸€äº›ï¼Œåœ¨ä½¿ç”¨æ—¶ï¼Œé™¤äº†éœ€è¦è®¾ç½®å…¶åŠ¨ç”»çš„èµ·å§‹è§’åº¦å’Œæœ€ç»ˆè§’åº¦å¤–ï¼Œè¿˜å¯ä»¥è®¾ç½®è§†å›¾æ—‹è½¬æ—¶çš„å‚ç…§ä½ç½®ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456//åˆ›å»ºæ—‹è½¬åŠ¨ç”»å¯¹è±¡RotateAnimation rotateAnimation = new RotateAnimation(0,360, Animation.RELATIVE_TO_SELF,0.5f,Animation.RELATIVE_TO_SELF,0.5f);//è®¾ç½®åŠ¨ç”»æ—¶é—´rotateAnimation.setDuration(3000);//å¼€å§‹åŠ¨ç”»animationImageView.startAnimation(rotateAnimation); è¿™é‡Œä½¿ç”¨äº†RotateAnimationç±»ä¸­æœ€å¤æ‚çš„ä¸€ä¸ªæ„é€ æ–¹æ³•ï¼Œå…¶ä¸­éœ€è¦ä¼ å…¥6ä¸ªå‚æ•°ï¼Œå‰ä¸¤ä¸ªå‚æ•°åˆ†åˆ«ä¸ºæ—‹è½¬åŠ¨ç”»çš„èµ·å§‹è§’åº¦ä¸ç»ˆæ­¢è§’åº¦ï¼Œç¬¬3ä¸ªå‚æ•°ä¸ºæ—‹è½¬å‚ç…§ç‚¹çš„xè½´ç›¸å¯¹ä½ç½®ç±»å‹ï¼Œç¬¬4ä¸ªå‚æ•°ä¸ºå‚ç…§ç‚¹xè½´ä½ç½®ï¼Œç¬¬5ä¸ªå’Œç¬¬6ä¸ªå‚æ•°åˆ†åˆ«ä¸ºæ—‹è½¬å‚ç…§ç‚¹çš„yè½´ç›¸å¯¹ä½ç½®ç±»å‹ä¸yè½´ç›¸å¯¹ä½ç½®ã€‚ å…³äºå‚ç…§ç‚¹çš„ç›¸å¯¹ä½ç½®ç±»å‹ï¼ŒAnimationç±»ä¸­å®šä¹‰äº†å‡ ä¸ªå¸¸é‡ä¾›å¼€å‘è€…é€‰æ‹©ä½¿ç”¨ï¼Œæ„ä¹‰å¦‚ä¸‹ï¼š 123456//ç»å¯¹å®šä½ ä»¥å½“å‰çª—å£åšå‚ç…§public static final int ABSOLUTE = 0;//ä»¥å…¶çˆ¶è§†å›¾åšä¸ºä½ç½®å‚ç…§public static final int RELATIVE_TO_PARENT = 2;//ä»¥æœ¬èº«ä½œä¸ºä½ç½®å‚ç…§public static final int RELATIVE_TO_SELF = 1; è¿˜æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œå¦‚æœé€‰æ‹©çš„å‚ç…§ç±»å‹æ˜¯RELATIVE_TO_SELFï¼Œåˆ™å‚ç…§ç‚¹çš„ä½ç½®å‚æ•°å–å€¼èŒƒå›´ä¸º0-1ä¹‹é—´ï¼Œä»£è¡¨çš„æ˜¯ç›¸å¯¹äºè‡ªèº«çš„ä½ç½®æ¯”ä¾‹ï¼Œå¦‚æœå‚ç…§ç±»å‹æ˜¯RELATIVE_TO_PARENTï¼Œåˆ™å‚ç…§ç‚¹çš„ä½ç½®å‚æ•°å–å€¼èŒƒå›´ä¸º0-1ä¹‹é—´ï¼Œä»£è¡¨çš„æ˜¯ç›¸å¯¹äºçˆ¶è§†å›¾çš„ä½ç½®æ¯”ä¾‹ï¼Œå¦‚æœå‚ç…§ç±»å‹æ˜¯ABSOLUTEï¼Œåˆ™å‚ç…§ç‚¹çš„ä½ç½®å‚æ•°å–å€¼ä¸ºç»å¯¹åæ ‡å€¼ï¼Œä¾‹å¦‚100ï¼Œ150ï¼Œå…¶ä»£è¡¨äº†ç›¸å¯¹çª—å£è§†å›¾çš„åæ ‡ä½ç½®ã€‚ä¾‹å¦‚ä¸Šé¢ç¤ºä¾‹ä»£ç ä¸­ï¼Œä»¥è§†å›¾æœ¬èº«ä¸ºå‚ç…§ç‰©ï¼Œxã€yè½´ä½ç½®éƒ½è®¾ç½®ä¸º0.5ï¼Œåˆ™æ—‹è½¬åŠ¨ç”»ä»¥è§†å›¾æœ¬èº«ä¸­å¿ƒä¸ºæ—‹è½¬ç‚¹ï¼Œå¦‚æœéœ€è¦ä»¥è§†å›¾å³ä¸‹è§’ä¸ºæ—‹è½¬ç‚¹ï¼Œä¿®æ”¹ä»£ç å¦‚ä¸‹ï¼š 1RotateAnimation rotateAnimation = new RotateAnimation(0,360, Animation.RELATIVE_TO_SELF,1f,Animation.RELATIVE_TO_SELF,1f); 3.ScaleAnimationçš„åº”ç”¨ScaleAnimationç”¨äºåˆ›å»ºæ”¾å¤§æˆ–è€…ç¼©å°çš„å½¢å˜åŠ¨ç”»ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456//åˆ›å»ºç¼©æ”¾åŠ¨ç”»å¯¹è±¡ScaleAnimation scaleAnimation = new ScaleAnimation(1,2,1,2,Animation.RELATIVE_TO_SELF,0.5f,Animation.RELATIVE_TO_SELF,0.5f);//è®¾ç½®åŠ¨ç”»æ—¶é—´scaleAnimation.setDuration(3000);//æ‰§è¡ŒåŠ¨ç”»animationImageView.startAnimation(scaleAnimation); ä¸Šé¢ç¤ºä¾‹ä»£ç ä¸­å‰4ä¸ªå‚æ•°åˆ†åˆ«è®¾ç½®ç¼©æ”¾åŠ¨ç”»xè½´æ–¹å‘çš„èµ·å§‹å€¼ã€æœ€ç»ˆå€¼å’Œyè½´æ–¹å‘çš„èµ·å§‹å€¼ã€ç»ˆæ­¢å€¼ã€‚éœ€è¦æ³¨æ„ï¼Œè¿™é‡Œçš„å•ä½éƒ½æ˜¯æ¯”ä¾‹ï¼Œ1è¡¨ç¤ºåŸè§†å›¾å°ºå¯¸ï¼Œ2è¡¨ç¤ºåŸè§†å›¾å°ºå¯¸çš„2å€ã€‚è¿™ä¸ªæ–¹æ³•å4ä¸ªå‚æ•°çš„æ„ä¹‰æ˜¯ç¡®å®šç¼©æ”¾å‚ç…§ç‚¹çš„ä½ç½®ï¼Œå’ŒRotateAniamtionæ„é€ æ–¹æ³•ä¸­çš„å‚æ•°æ„ä¹‰ä¸€è‡´ã€‚ 4.TranslateAnimationçš„åº”ç”¨TranslateAnimationç”¨äºåˆ›å»ºä½ç§»åŠ¨ç”»ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456//åˆ›å»ºä½ç§»åŠ¨ç”»å¯¹è±¡TranslateAnimation translateAnimation = new TranslateAnimation(Animation.ABSOLUTE,0,Animation.ABSOLUTE,100,Animation.RELATIVE_TO_SELF,0,Animation.RELATIVE_TO_SELF,1);//è®¾ç½®åŠ¨ç”»æ—¶é—´translateAnimation.setDuration(3000);//æ‰§è¡ŒåŠ¨ç”»animationImageView.startAnimation(translateAnimation); ä¸Šé¢ç¤ºä¾‹ä»£ç ä¸­ä½¿ç”¨çš„TranslateAnimationæ„é€ æ–¹æ³•ä¸­çš„8ä¸ªå‚æ•°åˆ†åˆ«ä»£è¡¨ï¼Œèµ·å§‹ä½ç½®çš„xè½´å‚ç…§ç‚¹ç±»å‹ä¸èµ·å§‹ä½ç½®çš„xè½´å€¼ã€ç»ˆæ­¢ä½ç½®çš„xè½´å‚ç…§ç‚¹ç±»å‹ä¸ç»ˆæ­¢ä½ç½®çš„xè½´å€¼ã€èµ·å§‹ä½ç½®çš„yè½´å‚ç…§ç‚¹ç±»å‹ä¸èµ·å§‹ä½ç½®çš„yè½´å€¼ã€ç»ˆæ­¢ä½ç½®çš„yè½´å‚ç…§ç‚¹ç±»å‹ä¸ç»ˆæ­¢ä½ç½®çš„yè½´å€¼ã€‚ 5.Animationç±»ä¸­çš„é€šç”¨æ–¹æ³•ä¸Šé¢ä»‹ç»çš„4ç§åŠ¨ç”»å®é™…ä¸Šéƒ½æ˜¯Animationç±»çš„å­ç±»ï¼ŒAnimationç±»ä¸­å°è£…äº†è®¸å¤šåŠ¨ç”»é€šç”¨çš„æ–¹æ³•ï¼Œä¾‹å¦‚å‰é¢ä½¿ç”¨çš„è®¾ç½®åŠ¨ç”»æ‰§è¡Œæ—¶é—´çš„æ–¹æ³•setDurationå°±æ˜¯Animationç±»çš„æ–¹æ³•ï¼Œå…¶ä¸­æ›´å¤šå¸¸ç”¨æ–¹æ³•åˆ—ä¸¾å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243//å–æ¶ˆæ­£åœ¨æ‰§è¡Œçš„åŠ¨ç”»public void cancel();//è®¾ç½®åŠ¨ç”»çš„æ‰§è¡Œå‡½æ•°public void setInterpolator(Interpolator i);//è¿™åªæ–¹æ³•è®¾ç½®å¼€å§‹åŠ¨ç”»çš„å»¶æ—¶å€¼ å•ä½ä¸ºæ¯«ç§’public void setStartOffset(long startOffset);//è®¾ç½®åŠ¨ç”»çš„æ‰§è¡Œæ—¶é—´public void setDuration(long durationMillis);//è®¾ç½®åŠ¨ç”»ç‰¹æ•ˆçš„æœ€é•¿è¿è¡Œæ—¶é—´public void restrictDuration(long durationMillis);//è®¾ç½®åŠ¨ç”»çš„æ‰§è¡Œå¼ºåº¦æ¯”ä¾‹ ä¾‹å¦‚æ”¾å¤§ä¸¤å€çš„åŠ¨ç”» è¿™ä¸ªå€¼å¦‚æœè®¾ç½®ä¸º2 å°†è¢«æ”¾å¤§4å€public void scaleCurrentDuration(float scale);//ä¸ºåŠ¨ç”»è®¾ç½®ä¸€ä¸ªå¼€å§‹çš„æ—¶é—´public void setStartTime(long startTimeMillis);//è®¾ç½®åŠ¨ç”»å¾ªç¯æ¨¡å¼/*åªæœ‰å½“åŠ¨ç”»çš„å¾ªç¯æ¬¡æ•°å¤§äº1æ—¶è¿™ä¸ªå€¼æ‰æœ‰æ•ˆæœï¼Œå…¶å¯ä»¥è®¾ç½®ä¸ºå¦‚ä¸‹å¸¸é‡ï¼šRESTART æ¯æ¬¡å¾ªç¯éƒ½ä»å¤´æ‰§è¡ŒREVERSE æ­£é€†äº¤æ›¿æ‰§è¡Œ*/public void setRepeatMode(int repeatMode);//è®¾ç½®å¾ªç¯æ¬¡æ•° è®¾ç½®ä¸ºINFINITEåˆ™ä¸ºæ— é™å¾ªç¯public void setRepeatCount(int repeatCount);//è®¾ç½®æ˜¯å¦å…è®¸å¡«å……åŠ¨ç”» è¿™ä¸ªæ–¹æ³•è®¾ç½®ä¸ºtrueåsetFillBefore()ä¸setFillAfter()æ–¹æ³•æ‰ä¼šç”Ÿæ•ˆpublic void setFillEnabled(boolean fillEnabled);//åŠ¨ç”»ç»“æŸå æ˜¯å¦ä»¥èµ·å§‹ä½ç½®å¡«å……è§†å›¾public void setFillBefore(boolean fillBefore);//åŠ¨ç”»ç»“æŸå æ˜¯å¦ä»¥ç»“æŸä½ç½®å¡«å……è§†å›¾public void setFillAfter(boolean fillAfter)//è®¾ç½®åŠ¨ç”»æ‰§è¡Œæ—¶åœ¨Zè½´ä¸Šçš„ä½ç½®/*å¯ä»¥è®¾ç½®ä¸ºå¦‚ä¸‹3ä¸­å¸¸é‡ public static final int ZORDER_BOTTOM = -1; //å°†åŠ¨ç”»æ”¾åœ¨Zè½´æœ€ä¸‹è¾¹ public static final int ZORDER_NORMAL = 0; //å°†åŠ¨ç”»æ”¾åœ¨Zè½´åŸä½ç½® public static final int ZORDER_TOP = 1; //å°†åŠ¨ç”»æ”¾åœ¨Zè½´æœ€ä¸Šè¾¹*/public void setZAdjustment(int zAdjustment);//è®¾ç½®åŠ¨ç”»çš„æ‰§è¡Œæ˜¯å¦å½±å“åˆ°å£çº¸public void setDetachWallpaper(boolean detachWallpaper);//è·å–åŠ¨ç”»æ˜¯å¦å¼€å§‹æ‰§è¡Œäº†public boolean hasStarted();//è·å–åŠ¨ç”»æ˜¯å¦ç»“æŸæ‰§è¡Œäº†public boolean hasEnded(); ä¸Šé¢åˆ—ä¸¾çš„æ–¹æ³•ä¸­ï¼ŒsetInterpolator()æ–¹æ³•å¾ˆæœ‰æ„æ€ï¼Œå…¶å¯ä»¥è®¾ç½®åŠ¨ç”»æ‰§è¡Œçš„æ—¶é—´å‡½æ•°ï¼Œä¾‹å¦‚æ˜¯å…ˆå¿«åæ…¢è¿˜æ˜¯å…ˆæ…¢åå¿«ç­‰ç­‰ï¼Œè¿™ä¸ªæ–¹æ³•éœ€è¦ä¼ å…¥ä¸€ä¸ªInterpolatorç±»å‹çš„å‚æ•°ï¼Œå®é™…ä¸Šä½¿ç”¨æ—¶æ˜¯é€šè¿‡Interpolatorçš„å­ç±»æ¥å®ç°çš„ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1ranslateAnimation.setInterpolator(new AccelerateDecelerateInterpolator()); å¯¹äºInterpolatorå‚æ•°å¼€å‘è€…å¯ä»¥è®¾ç½®çš„å­ç±»åŠæ„ä¹‰åˆ—ä¸¾å¦‚ä¸‹ï¼š AccelerateDecelerateInterpolatorï¼šå…ˆåŠ é€Ÿåå‡é€Ÿæ‰§è¡Œ AccelerateInterpolatorï¼šåŠ é€Ÿæ‰§è¡Œ AnticipateInterpolatorï¼šå…ˆåé€€æ‰§è¡Œä¸€æ­¥åæ­£å‘åŠ é€Ÿæ‰§è¡Œ(ç±»ä¼¼å¼¹ç°§æ•ˆæœ) AnticipateOvershootInterpolatorï¼šå…ˆåé€€æ‰§è¡Œä¸€æ­¥ååŠ é€Ÿæ‰§è¡Œåˆ°è¾¾æé™åå†å‰è¿›ä¸€æ­¥åå†å›åˆ°æé™(å¼¹ç°§) BounceInterpolatorï¼šåŠ¨ç”»æ‰§è¡Œåˆ°ç»“å°¾åè¿›è¡Œé˜»å°¼æ•ˆæœ CycleInterpolatorï¼šä»¥æ­£å¼¦è§„åˆ™å¾ªç¯æ‰§è¡Œæ•°æ¬¡åŠ¨ç”»ï¼Œè¿™ä¸ªç±»æ¥æ„é€ æ—¶éœ€è¦ä¼ å…¥å¾ªç¯æ¬¡æ•°ï¼Œå¦‚ä¸‹ï¼š 1new CycleInterpolator(3) DecelerateInterpolatorï¼šå‡é€Ÿæ‰§è¡ŒåŠ¨ç”» FastOutLinearInInterpolatorï¼šåŸºäºè´å¡å°”æ›²çº¿çš„é€Ÿç‡å˜åŒ– FastOutSlowInInterpolatorï¼šåŸºäºè´å¡å°”æ›²çº¿çš„é€Ÿç‡å˜åŒ– LinearInterpolatorï¼šçº¿æ€§åŒ€é€Ÿæ‰§è¡Œ LinearOutSlowInInterpolatorï¼šåŸºäºè´å¡å°”æ›²çº¿çš„é€Ÿç‡å˜åŒ– OvershootInterpolatorï¼šæ‰§è¡Œè¶…å‡ºæé™ååœ¨å›é€€ PathInterpolatorï¼šè‡ªå®šä¹‰è¿åŠ¨è·¯å¾„ 6.å®ç°å¯¹AnimationåŠ¨ç”»çŠ¶æ€çš„ç›‘å¬Animationç±»ä¸­ä¹Ÿå®šä¹‰äº†ä¸€ä¸ªç›‘å¬å™¨åè®®ï¼Œå…¶ä¸­æä¾›äº†å¯¹åŠ¨ç”»çŠ¶æ€è¿›è¡Œç›‘å¬çš„æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š 12345678public interface AnimationListener &#123; //å½“åŠ¨ç”»å¼€å§‹æ‰§è¡Œæ—¶è§¦å‘çš„æ–¹æ³• void onAnimationStart(Animation var1); //åŠ¨ç”»æ‰§è¡Œç»“æŸåè§¦å‘çš„æ–¹æ³• void onAnimationEnd(Animation var1); //åŠ¨ç”»é‡å¤æ‰§è¡Œçš„æ—¶å€™ä¼šè§¦å‘ void onAnimationRepeat(Animation var1);&#125; 7.ä½¿ç”¨xmlæ–‡ä»¶é…ç½®View Animationä¸Šé¢ä»‹ç»çš„å…¨éƒ¨æ˜¯é€šè¿‡ä»£ç æ¥åˆ›å»ºView AnimationåŠ¨ç”»ï¼ŒAndroidä¹Ÿæ”¯æŒä½¿ç”¨xmlæ–‡ä»¶æ¥é…ç½®View AnimationåŠ¨ç”»ã€‚ é¦–å…ˆåœ¨Android Studioçš„resç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªåŠ¨ç”»æ–‡ä»¶ç›®å½•ï¼Œå°†å…¶ç±»å‹é€‰æ‹©ä¸ºanimï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š åœ¨åˆ›å»ºçš„ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„xmlæ–‡ä»¶ï¼Œåœ¨å…¶ä¸­ç¼–å†™åŠ¨ç”»ä»£ç å¦‚ä¸‹ï¼š 1234&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;&lt;set xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt; &lt;alpha android:fromAlpha=\"1\" android:toAlpha=\"0\" android:duration = \"3000\"/&gt;&lt;/set&gt; åœ¨ä»£ç ä¸­ï¼Œä½¿ç”¨å¦‚ä¸‹ä»£ç æ¥åŠ è½½xmlé…ç½®çš„åŠ¨ç”»ï¼š 1234//åŠ è½½åŠ¨ç”»æ–‡ä»¶Animation animation = AnimationUtils.loadAnimation(this,R.anim.my_anmi);//æ‰§è¡ŒåŠ¨ç”»animationImageView.startAnimation(animation); 8.å¤åˆçš„View AnimationView Animationä¹Ÿæ”¯æŒè¿›è¡Œå¤åˆåŠ¨ç”»çš„æ“ä½œï¼Œå¦‚æœä½¿ç”¨xmlé…ç½®å¤åˆåŠ¨ç”»ï¼Œååˆ†ç®€å•ï¼Œåªéœ€è¦å°†è¦è¦å¤åˆçš„åŠ¨ç”»éƒ½é…ç½®è¿›xmlæ–‡ä»¶çš„setæ ‡ç­¾ä¸­å³å¯ï¼Œå¦‚ä¸‹ï¼š 12345&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;&lt;set xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt; &lt;alpha android:fromAlpha=\"1\" android:toAlpha=\"0\" android:duration = \"3000\"/&gt; &lt;scale android:fromXScale=\"1\" android:toXScale=\"2\" android:fromYScale=\"1\" android:toYScale=\"2\" android:duration=\"3000\"/&gt;&lt;/set&gt; å¦‚æœè¦ç”¨ä»£ç åˆ›å»ºå¤åˆåŠ¨ç”»ï¼Œéœ€è¦ä½¿ç”¨åˆ°AnimationSetç±»è¿›è¡Œå¤åˆï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112//åˆ›å»ºåŠ¨ç”»é›†åˆå®¹å™¨ å‚æ•°å†³å®šå®¹å™¨ä¸­æ‰€æœ‰åŠ¨ç”»æ˜¯å¦å…±ç”¨Interpolatoræ—¶åºå‡½æ•°AnimationSet set = new AnimationSet(true);//åˆ›å»ºåŠ¨ç”»RotateAnimation rotateAnimation = new RotateAnimation(0,360, Animation.RELATIVE_TO_SELF,1f,Animation.RELATIVE_TO_SELF,1f);ScaleAnimation scaleAnimation = new ScaleAnimation(1,2,1,2,Animation.RELATIVE_TO_SELF,0.5f,Animation.RELATIVE_TO_SELF,0.5f);scaleAnimation.setDuration(3000);rotateAnimation.setDuration(3000);//å°†åŠ¨ç”»æ·»åŠ è¿›é›†åˆä¸­set.addAnimation(rotateAnimation);set.addAnimation(scaleAnimation);//æ‰§è¡ŒåŠ¨ç”»animationImageView.startAnimation(set); ä¸‰ã€Property AnimationåŠ¨ç”»çš„åº”ç”¨åœ¨å‰é¢ä»‹ç»çš„View AnimationåŠ¨ç”»ä½“ç³»ä¸­ï¼Œè™½ç„¶ä½¿ç”¨èµ·æ¥ååˆ†æ–¹ä¾¿ï¼Œä½†ä¹Ÿæœ‰ååˆ†å¤šçš„å±€é™æ€§ï¼Œä¾‹å¦‚åªèƒ½æ”¯æŒé€æ˜åº¦ï¼Œä½ç½®ï¼Œç¼©æ”¾å’Œæ—‹è½¬åŠ¨ç”»ï¼Œå¹¶ä¸”åœ¨åŠ¨ç”»æ‰§è¡Œæ—¶ï¼Œè§†å›¾å®é™…ä¸Šå¹¶æ²¡æœ‰ç§»åŠ¨ï¼Œå¦‚æœéœ€è¦åšåŠ¨ç”»çš„æ˜¯å¯ä»¥ç”¨æˆ·äº¤äº’çš„æŒ‰é’®æ§ä»¶åˆ™ä¼šå¸¦æ¥å¾ˆå¤šçš„ä¸ä¾¿ã€‚åœ¨Android3.0ä¹‹åï¼Œç³»ç»Ÿæ¨å‡ºäº†Property AnimationåŠ¨ç”»ï¼Œè¿™ç§æœºåˆ¶å¯ä»¥å°†å¯¹è±¡ä»»æ„å±æ€§çš„ä¿®æ”¹å®ç°è¿‡æ¸¡åŠ¨ç”»æ•ˆæœã€‚ 1.ObjectAnimatoråŠ¨ç”»çš„åº”ç”¨ObjectAnimatoræ˜¯Property AnimationåŠ¨ç”»ä½“ç³»ä¸­æœ€ç®€å•æ˜“ç”¨çš„ä¸€ç§æ–¹å¼ï¼Œå¼€å‘è€…åªéœ€è¦è®¾ç½®è¦æ”¹å˜çš„å±æ€§å€¼å’Œä¸€äº›åŠ¨ç”»å‚æ•°å³å¯ä½¿ç”¨ï¼Œä¾‹å¦‚è‹¥è¦å®ç°è§†å›¾ä»¥yæ–¹å‘ä¸ºè½´è¿›è¡Œæ—‹è½¬æ“ä½œï¼Œä½¿ç”¨ å¦‚ä¸‹ä»£ç å®ç°ï¼š 123456//åˆ›å»ºå±æ€§åŠ¨ç”»å¯¹è±¡ObjectAnimator objectAnimator = ObjectAnimator.ofFloat(animationImageView,\"rotationY\",0,360,0);//è®¾ç½®åŠ¨ç”»æ—¶é—´objectAnimator.setDuration(3000);//å¼€å§‹åŠ¨ç”»objectAnimator.start(); ObjectAnimatorç±»çš„é™æ€æ–¹æ³•ofFloat()ç”¨äºåˆ›å»ºå±æ€§åŠ¨ç”»å®ä¾‹æœ¬èº«ï¼Œä¸å…¶ç±»ä¼¼çš„æ–¹æ³•è¿˜æœ‰ofInt()ä¸ofObject()ã€‚éœ€è¦æ³¨æ„ï¼Œè¿™äº›æ–¹æ³•ç¬¬1ä¸ªå‚æ•°ä¸ºè¦æ‰§è¡ŒåŠ¨ç”»çš„è§†å›¾ï¼Œç¬¬2ä¸ªå‚æ•°ä¸ºè¦å‘ç”ŸåŠ¨ç”»æ”¹å˜çš„å±æ€§åï¼Œä»ç¬¬3ä¸ªå‚æ•°å¼€å§‹åé¢å¯ä»¥æ·»åŠ ä»»æ„å¤šä¸ªå€¼ï¼Œè¿™äº›å€¼ä»£è¡¨äº†å±æ€§å€¼æ”¹å˜çš„è·¯å¾„ï¼Œä¾‹å¦‚ä¸Šé¢ç¤ºä¾‹ä»£ç è¡¨ç¤ºå°†è§†å›¾ä»¥yæ–¹å‘ä¸ºè½´ä»0Â°å¼€å§‹æ—‹è½¬åˆ°360Â°åå†æ—‹è½¬å›0Â°ã€‚ ObjectAnimatorç±»ç»§æ‰¿è‡ªValueAnimatorï¼ŒValueAnimatorç±»åˆ™æ›´åŠ çµæ´»è‡ªç”±ï¼Œå…¶å¯ä»¥ä¸ºè‡ªå®šä¹‰ç±»çš„è‡ªå®šä¹‰å±æ€§åšåŠ¨ç”»å¤„ç†ï¼Œåé¢ä¼šä»‹ç»ï¼ŒValueAnimatorç±»ä¸­æä¾›äº†è®¸å¤šåŠ¨ç”»é…ç½®çš„æ–¹æ³•ï¼Œå¸¸ç”¨å¦‚ä¸‹ï¼š 1234567891011121314151617181920//è®¾ç½®åŠ¨ç”»æ‰§è¡Œæ—¶é—´public ValueAnimator setDuration(long duration);//è®¾ç½®å»¶æ—¶æ‰§è¡Œpublic void setStartDelay(long startDelay);//è®¾ç½®åŠ¨ç”»å¾ªç¯æ¬¡æ•°public void setRepeatCount(int value);//è®¾ç½®åŠ¨ç”»å¾ªç¯æ¨¡å¼public void setRepeatMode(int value);//è®¾ç½®åŠ¨ç”»æ‰§è¡Œæ—¶åºæ¨¡å¼public void setInterpolator(TimeInterpolator value);//å¼€å§‹æ‰§è¡ŒåŠ¨ç”»public void start();//ç»“æŸåŠ¨ç”»public void end();//å–æ¶ˆåŠ¨ç”»public void cancel();//æ¢å¤åŠ¨ç”»public void resume();//æš‚åœåŠ¨ç”»public void pause(); éœ€è¦æ³¨æ„ï¼Œä½¿ç”¨ObjectAnimatoråˆ›å»ºåŠ¨ç”»çš„å±æ€§å¿…é¡»å®ç°setå’Œgetæ–¹æ³•ã€‚ 2.ValueAnimatorå®ç°æ›´åŠ çµæ´»çš„è‡ªå®šä¹‰åŠ¨ç”»ObjectAnimatoræ˜¯ValueAnimatorçš„å­ç±»ï¼Œå¯ä»¥ç†è§£ï¼ŒValueAnimatorè¦æ¯”ObjectAnimatoræ›´åŠ çµæ´»è‡ªç”±ï¼Œå…¶å¯ä»¥å®ç°ä»»æ„è‡ªå®šä¹‰å±æ€§çš„åŠ¨ç”»è¡Œä¸ºã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617//åˆ›å»ºValueAnimatorå®ä¾‹ValueAnimator valueAnimator = new ValueAnimator();//è®¾ç½®åŠ¨ç”»çš„è·¯å¾„å€¼valueAnimator.setFloatValues(0,200,100,300,0);//è®¾ç½®åŠ¨ç”»çš„æ‰§è¡Œæ—¶é—´valueAnimator.setDuration(6000);//æ·»åŠ åŠ¨ç”»æ‰§è¡Œç›‘å¬valueAnimator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() &#123; //è¿™ä¸ªæ–¹æ³•ä¼šåœ¨æ¯æ¬¡åŠ¨ç”»å€¼æ”¹å˜æ—¶è°ƒç”¨ @Override public void onAnimationUpdate(ValueAnimator valueAnimator) &#123; //è®¾ç½®è§†å›¾çš„æ¨ªåæ ‡ animationImageView.setX((Float) valueAnimator.getAnimatedValue()); &#125;&#125;);//æ‰§è¡ŒåŠ¨ç”»valueAnimator.start(); å¦‚æœè¿è¡Œä¸Šé¢ä»£ç ï¼Œå¯ä»¥çœ‹åˆ°è§†å›¾åœ¨6så†…ä»xåæ ‡ç‚¹ä¸º0çš„åœ°æ–¹å¹³ç§»åˆ°200åå†æ¬¡å›åˆ°100åå†æ¬¡ç§»åŠ¨åˆ°300æœ€ç»ˆå›åˆ°åŸç‚¹0ã€‚ ä¸Šé¢çš„ç¤ºä¾‹ä»£ç åªæ˜¯æ¼”ç¤ºäº†ValueAnimatorçš„å·¥ä½œåŸç†ï¼Œå¼€å‘è€…å¯ä»¥åœ¨onAnimationUpdate()æ–¹æ³•ä¸­è¿›è¡Œä»»æ„å±æ€§çš„ä¿®æ”¹ã€‚ä»…ä»ä¸Šé¢æ¼”ç¤ºä»£ç å¹¶ä¸èƒ½ä½“ç°å‡ºValueAnimatorçš„å¼ºå¤§ä¹‹å¤„ï¼Œå¯ä»¥é€šè¿‡å®ç°ç±»ä¼¼æŠ›ç‰©çº¿çš„åŠ¨ç”»æ¥ç†è§£ValueAnimatorçš„çµæ´»ä¹‹å¤„ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031//åˆ›å»ºValueAnimatorå®ä¾‹final ValueAnimator animator = new ValueAnimator();//ç¤ºä¾‹è¿›è¡ŒæŠ›ç‰©çº¿åŠ¨ç”» è®©æ§ä»¶ä»(0,0)ç‚¹ä½ç½®ç§»åŠ¨åˆ°xè½´ä¸º400çš„ä½ç½®ï¼Œyè½´æ–¹å‘åšè‡ªç”±è½ä½“animator.setObjectValues(new Point(0,0),new Point(400,0));//è®¾ç½®åŠ¨ç”»æ—¶é—´animator.setDuration(4000);//è®¾ç½®æ—¶åºä¸ºçº¿æ€§å‡½æ•°animator.setInterpolator(new LinearInterpolator());//ç”±äºæŠ›ç‰©çº¿è¿åŠ¨åœ¨xè½´å’Œyè½´ä¸Šçš„é€Ÿåº¦å˜åŒ–å¹¶ä¸ç›¸åŒ éœ€è¦è‡ªå®šä¹‰æšä¸¾å™¨animator.setEvaluator(new TypeEvaluator&lt;Point&gt;() &#123; //è¿™ä¸ªæšä¸¾æ–¹æ³•ä¸­ä¼ å…¥çš„vå€¼ä¸ºåŠ¨ç”»æ‰§è¡Œçš„æ¯”ä¾‹ 0ä¸ºåˆå§‹çŠ¶æ€ 1ä¸ºåŠ¨ç”»æ‰§è¡Œå®Œæˆ å¼€å‘è€…æ ¹æ®è¿™ä¸ªå€¼æ¨¡æ‹ŸæŠ›ç‰©çº¿åæ ‡ @Override public Point evaluate(float v, Point o,Point t1) &#123; //åˆ›å»ºPointå¯¹è±¡ æ¨¡æ‹ŸæŠ›ç‰©è¿åŠ¨ Point point = new Point(); point.x = (int)((v*8)*100); point.y = (int)((v*60)*(v*60)/4); return point; &#125;&#125;);//ç›‘å¬åŠ¨ç”»æ‰§è¡Œanimator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() &#123; @Override public void onAnimationUpdate(ValueAnimator valueAnimator) &#123; //è®¾ç½®è§†å›¾ä½ç½® animationImageView.setX(((Point)valueAnimator.getAnimatedValue()).x); animationImageView.setY(((Point)valueAnimator.getAnimatedValue()).y); &#125;&#125;);//æ‰§è¡ŒåŠ¨ç”»animator.start(); éœ€è¦æ³¨æ„ï¼ŒProperty Animationä¸View Animationæœ€å¤§çš„ä¸åŒåœ¨äºView Animationåªæ˜¯å±•ç¤ºè§†å›¾çš„ç•Œé¢åŠ¨ç”»ï¼Œå®ƒå¹¶æ²¡æœ‰çœŸæ­£æ”¹å˜è§†å›¾çš„å±æ€§ï¼Œè€ŒProperty Animationæ˜¯å®å®åœ¨åœ¨çš„æ”¹å˜äº†å‘ç”ŸåŠ¨ç”»æ§ä»¶çš„å±æ€§ã€‚ 3.Property AnimationåŠ¨ç”»çš„ç›‘å¬ValueAnimatorå¯¹è±¡å¯ä»¥ä½¿ç”¨addListener()æ–¹æ³•æ¥æ·»åŠ ç›‘å¬è€…ï¼Œæ¥å£æ–¹æ³•å¦‚ä¸‹ï¼š 1234567891011//åŠ¨ç”»ç›‘å¬æ¥å£public interface AnimatorListener &#123; //åŠ¨ç”»å¼€å§‹ void onAnimationStart(Animator var1); //åŠ¨ç”»ç»“æŸ void onAnimationEnd(Animator var1); //åŠ¨ç”»å–æ¶ˆ void onAnimationCancel(Animator var1); //åŠ¨ç”»é‡å¤ void onAnimationRepeat(Animator var1);&#125; 4.ä½¿ç”¨PropertyValuesHolderè¿›è¡ŒåŠ¨ç”»å¤åˆå¯¹äºProperty Animationï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡ValueAnimatorå®ç°è‡ªå®šä¹‰çš„å¤åˆåŠ¨ç”»ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨PropertyValuesHolderè¿›è¡Œå±æ€§åŠ¨ç”»çš„å¤åˆæ“ä½œï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789//åˆ›å»ºå­å±æ€§åŠ¨ç”» ç¿»è½¬PropertyValuesHolder holder = PropertyValuesHolder.ofFloat(\"rotationY\",0,360,90);//åˆ›å»ºå­å±æ€§åŠ¨ç”» é€æ˜PropertyValuesHolder holder2 = PropertyValuesHolder.ofFloat(\"alpha\",1,0,1);//è¿›è¡ŒåŠ¨ç”»å¤åˆObjectAnimator objectAnimation = ObjectAnimator.ofPropertyValuesHolder(animationImageView,holder,holder2);//æ‰§è¡ŒåŠ¨ç”»objectAnimation.setDuration(3000);objectAnimation.start(); ä¸‰ã€Drawable AnimationåŠ¨ç”»çš„åº”ç”¨ç›¸æ¯”å‰ä¸¤ç§åŠ¨ç”»æ¨¡å¼ï¼ŒDrawable AnimationåŠ¨ç”»è¦å®¹æ˜“çš„å¤šï¼Œå…¶ä½¿ç”¨ä¸€ç»„å›¾åƒå¿«é€Ÿåˆ‡æ¢çš„åŸç†æ¥å®ç°åŠ¨ç”»æ•ˆæœã€‚ åœ¨Android Studioçš„drawableæ–‡ä»¶å¤¹ä¸­æ·»åŠ ä¸€ä¸ªanimationæ–‡ä»¶ï¼Œxmlä»£ç å¦‚ä¸‹ï¼š 1234567891011&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;&lt;animation-list xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt; &lt;item android:drawable=\"@drawable/bird1\" android:duration=\"200\" /&gt; &lt;item android:drawable=\"@drawable/bird2\" android:duration=\"200\" /&gt; &lt;item android:drawable=\"@drawable/bird3\" android:duration=\"200\" /&gt; &lt;item android:drawable=\"@drawable/bird4\" android:duration=\"200\" /&gt; &lt;item android:drawable=\"@drawable/bird5\" android:duration=\"200\" /&gt; &lt;item android:drawable=\"@drawable/bird6\" android:duration=\"200\" /&gt; &lt;item android:drawable=\"@drawable/bird7\" android:duration=\"200\" /&gt; &lt;item android:drawable=\"@drawable/bird8\" android:duration=\"200\" /&gt;&lt;/animation-list&gt; å°†éœ€è¦å±•ç¤ºåŠ¨ç”»çš„è§†å›¾èƒŒæ™¯è®¾ç½®ä¸ºè¿™ä¸ªdrawableæ–‡ä»¶ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345&lt;ImageView android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:background=\"@drawable/anmi_draw_list\" android:id=\"@+id/animatedImageView\"/&gt; åœ¨éœ€è¦å¼€å§‹åŠ¨ç”»æ—¶ï¼Œè°ƒç”¨å¦‚ä¸‹ä»£ç å³å¯ï¼š 12//è·å–åˆ°drawableèƒŒæ™¯ è°ƒç”¨start()æ–¹æ³•å¼€å§‹åŠ¨ç”»((AnimationDrawable)animationImageView.getBackground()).start(); ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š435043639","categories":[{"name":"Androidå°è®°","slug":"Androidå°è®°","permalink":"http://huishao.cc/categories/Androidå°è®°/"}],"tags":[],"keywords":[{"name":"Androidå°è®°","slug":"Androidå°è®°","permalink":"http://huishao.cc/categories/Androidå°è®°/"}]},{"title":"iOSå¼€å‘ä¸­UITableViewCellç‚¹å‡»æ—¶å­è§†å›¾èƒŒæ™¯é€æ˜çš„è§£å†³æ–¹æ³•","slug":"243iOSå¼€å‘ä¸­UITableViewCellç‚¹å‡»æ—¶å­è§†å›¾èƒŒæ™¯é€æ˜çš„è§£å†³æ–¹æ³•","date":"2016-08-09T16:00:00.000Z","updated":"2021-07-09T11:29:13.357Z","comments":true,"path":"2016/08/10/243iOSå¼€å‘ä¸­UITableViewCellç‚¹å‡»æ—¶å­è§†å›¾èƒŒæ™¯é€æ˜çš„è§£å†³æ–¹æ³•/","link":"","permalink":"http://huishao.cc/2016/08/10/243iOSå¼€å‘ä¸­UITableViewCellç‚¹å‡»æ—¶å­è§†å›¾èƒŒæ™¯é€æ˜çš„è§£å†³æ–¹æ³•/","excerpt":"","text":"iOSå¼€å‘ä¸­UITableViewCellç‚¹å‡»æ—¶å­è§†å›¾èƒŒæ™¯é€æ˜çš„è§£å†³æ–¹æ³•åœ¨åšiOSé¡¹ç›®çš„å¼€å‘ä¸­ï¼ŒUITableViewæ§ä»¶çš„åº”ç”¨ååˆ†å¹¿æ³›ã€‚åœ¨è¿›è¡Œè‡ªå®šä¹‰UITableViewCellæ—¶ï¼Œç»å¸¸æœ‰å°ä¼™ä¼´é‡åˆ°è¿™æ ·çš„é—®é¢˜ï¼šåœ¨UITableViewCellä¸Šé¢æ·»åŠ äº†ä¸€ä¸ªæœ‰èƒŒæ™¯é¢œè‰²çš„å­è§†å›¾ï¼Œå½“ç”¨æˆ·ç‚¹å‡»UITableViewCellæˆ–è€…é€‰ä¸­UITableViewCellæ—¶ï¼ŒCellä¸Šçš„å­è§†å›¾å‘ç”Ÿäº†å¥‡æ€ªçš„å˜åŒ–ï¼Œå…¶èƒŒæ™¯è‰²å˜é€æ˜äº†ï¼Œå¦‚æœæ·»åŠ åœ¨Cellä¸Šçš„å­è§†å›¾åªæ˜¯ä¸€ä¸ªè‰²å—ï¼Œé‚£ä¹ˆæˆ‘ä»¬çœ‹èµ·æ¥ï¼Œè¿™ä¸ªå­è§†å›¾å¥½åƒè«åå…¶å¦™çš„æ¶ˆå¤±äº†ä¸€æ ·ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š äº§ç”Ÿè¿™ç§æƒ…å†µçš„ä¸»è¦åŸå› æ˜¯ç”±äºUITableViewCellçš„é€‰ä¸­é£æ ¼æ‰€è‡´ã€‚å¦‚æœå¼€å‘è€…ä¸è¿›è¡Œè®¾ç½®ï¼ŒUITableViewCellä¸­çš„selectionStyleå±æ€§é»˜è®¤é£æ ¼ä¸ºUITableViewCellSelectionStyleBlueã€‚è¿™æ—¶ï¼Œå¦‚æœç”¨æˆ·ç‚¹å‡»æˆ–è€…é€‰ä¸­äº†æŸä¸ªCellï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å°†å…¶ä¸Šå­è§†å›¾çš„èƒŒæ™¯è‰²æ”¹æˆé€æ˜ä»¥ä¾¿ç»Ÿä¸€Cellçš„æ•´ä½“èƒŒæ™¯é¢œè‰²ã€‚å¼€å‘è€…å¯ä»¥å°†å…¶è®¾ç½®ä¸ºUITableViewCellSelectionStyleNoneæšä¸¾å€¼æ¥ä¸é€‚ç”¨ä»»ä½•Cellçš„é€‰ä¸­é£æ ¼ã€‚ å¦‚æœéœ€è¦ä½¿ç”¨Cellçš„é€‰ä¸­é£æ ¼åŒæ—¶åˆä¸æƒ³è®©Cellä¸Šçš„å­è§†å›¾æ”¶åˆ°å½±å“ï¼Œæˆ‘ä»¬å¯ä»¥ç»§æ‰¿UITableViewCellååœ¨å…¶ä¸­è¦†å†™çˆ¶ç±»çš„å¦‚ä¸‹ä¸¤ä¸ªæ–¹æ³•ï¼Œåœ¨è¿™äº›æ–¹æ³•ä¸­é‡æ–°è®¾ç½®å­è§†å›¾çš„èƒŒæ™¯è‰²ï¼š 12345678910//è¿™ä¸ªæ–¹æ³•åœ¨Cellè¢«é€‰ä¸­æˆ–è€…è¢«å–æ¶ˆé€‰ä¸­æ—¶è°ƒç”¨- (void)setSelected:(BOOL)selected animated:(BOOL)animated &#123; [super setSelected:selected animated:animated]; self.testLabel.backgroundColor = [UIColor orangeColor];&#125;//è¿™ä¸ªæ–¹æ³•åœ¨ç”¨æˆ·æŒ‰ä½Cellæ—¶è¢«è°ƒç”¨-(void)setHighlighted:(BOOL)highlighted animated:(BOOL)animated&#123; [super setHighlighted:highlighted animated:animated]; self.testLabel.backgroundColor = [UIColor orangeColor];&#125; å¦‚ä¸‹å›¾ï¼š ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"æ—¥å¸¸æŠ€å·§","slug":"æ—¥å¸¸æŠ€å·§","permalink":"http://huishao.cc/categories/æ—¥å¸¸æŠ€å·§/"}],"tags":[],"keywords":[{"name":"æ—¥å¸¸æŠ€å·§","slug":"æ—¥å¸¸æŠ€å·§","permalink":"http://huishao.cc/categories/æ—¥å¸¸æŠ€å·§/"}]},{"title":"Androidä¸­SharedPreferencesä½¿ç”¨å°è®°","slug":"242Androidä¸­SharedPreferencesä½¿ç”¨å°è®°","date":"2016-08-02T16:00:00.000Z","updated":"2021-07-09T07:53:35.379Z","comments":true,"path":"2016/08/03/242Androidä¸­SharedPreferencesä½¿ç”¨å°è®°/","link":"","permalink":"http://huishao.cc/2016/08/03/242Androidä¸­SharedPreferencesä½¿ç”¨å°è®°/","excerpt":"","text":"Androidä¸­SharedPreferencesä½¿ç”¨å°è®°ä¸€ã€å¼•è¨€Androidä¸­ä½¿ç”¨SharedPreferencesæ¥è¿›è¡Œç®€å•æ•°æ®çš„æŒä¹…åŒ–å¤„ç†ï¼Œä»åå­—å°±å¯ä»¥äº†è§£ï¼Œå…¶è®¾è®¡ç›®çš„æ˜¯ä¸ºäº†ä¿å­˜åº”ç”¨ç¨‹åºçš„ä¸€äº›åå¥½è®¾ç½®ï¼Œå¦‚éŸ³é‡ï¼Œä¸»é¢˜ç­‰ä¿¡æ¯ã€‚å…¶ä¸iOSå¼€å‘ä¸­çš„NSUserDefaultååˆ†ç±»ä¼¼ï¼Œå¹¶ä¸”ï¼Œä»–ä»¬çš„å®è´¨éƒ½æ˜¯é‡‡ç”¨XMLæ ¼å¼çš„æ–‡ä»¶æ¥å­˜å‚¨æ•°æ®ã€‚ äºŒã€SharedPreferencesçš„ç®€å•åº”ç”¨å¯¹æ•°æ®çš„æŒä¹…åŒ–æ“ä½œéƒ½ä¼šåˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†ä¸ºå­˜ï¼Œå¦ä¸€éƒ¨åˆ†ä¸ºå–ã€‚é¦–å…ˆï¼Œå¼€å‘è€…åœ¨Activityä¸­ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•å¯ä»¥è·å–è·å–åˆ›å»ºä¸€ä¸ªSharedPreferenceså®ä¾‹ï¼š 1234/*è¿™ä¸ªæ–¹æ³•éœ€è¦ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæ–‡ä»¶åï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºæ–‡ä»¶æ¨¡å¼*/SharedPreferences sharedPreferences = getSharedPreferences(\"MyPreference\",MODE_PRIVATE); åœ¨getSharedPreference()æ–¹æ³•ä¸­ç¬¬ä¸€ä¸ªå‚æ•°å†³å®šè¿™ä¸ªå­˜å‚¨æ–‡ä»¶çš„åå­—ï¼Œåœ¨è·å–SharedPreferenceså®ä¾‹æ—¶ï¼Œå¦‚æœç³»ç»Ÿåˆ›å»ºè¿‡è¿™ä¸ªæ–‡ä»¶ï¼Œåˆ™ä¼šè¿”å›æœ¬åœ°çš„åŸæ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œåˆ™ä¼šè¿›è¡Œåˆ›å»ºã€‚ç¬¬äºŒä¸ªå‚æ•°å†³å®šè¿™ä¸ªæ–‡ä»¶çš„è®¿é—®æƒé™ï¼Œå¯é€‰å‚æ•°å¦‚ä¸‹ï¼š 123Activity.MODE_PRIVATE,//é»˜è®¤æ“ä½œæ¨¡å¼ï¼Œä»£è¡¨è¯¥æ–‡ä»¶æ˜¯ç§æœ‰æ•°æ®ï¼Œåªèƒ½è¢«åº”ç”¨æœ¬èº«è®¿é—®Activity.MODE_WORLD_READABLE,//è¡¨ç¤ºå½“å‰æ–‡ä»¶å¯ä»¥è¢«å…¶ä»–åº”ç”¨è¯»å–ï¼Œ Activity.MODE_WORLD_WRITEABLE,//è¡¨ç¤ºå½“å‰æ–‡ä»¶å¯ä»¥è¢«å…¶ä»–åº”ç”¨å†™å…¥ï¼› æœ‰äº†SharedPreferenceså®ä¾‹ï¼Œåœ¨éœ€è¦è¿›è¡Œæ•°æ®å­˜å‚¨æ—¶ï¼Œéœ€è¦è·å–åˆ°SharedPreferenceså®ä¾‹ä¸­çš„Editorå¯¹è±¡ï¼ŒSharedPreferencesç±»ä¸­æœ‰ä¸€ä¸ªEditorçš„å†…éƒ¨æ¥å£ï¼Œå…¶ä¸­æä¾›äº†å­˜å‚¨æ•°æ®çš„ç›¸å…³æ–¹æ³•ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹: 123456//è·å–Editorå¯¹è±¡SharedPreferences.Editor editor = sharedPreferences.edit();//è¿›è¡Œå­—ç¬¦ä¸²å­˜å‚¨editor.putString(\"password\",\"123456\");//æäº¤å­˜å‚¨å†…å®¹editor.commit(); Editoré‡‡ç”¨é”®å€¼å¯¹çš„å­˜å‚¨æ–¹å¼ï¼Œå¯ä»¥å­˜å‚¨çš„æ•°æ®å³å¸¸ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š 12345678910111213141516171819202122public interface Editor &#123; //è¿›è¡Œå­—ç¬¦ä¸²æ•°æ®å­˜å‚¨ SharedPreferences.Editor putString(String var1, String var2); //è¿›è¡Œå­—ç¬¦Setå­˜å‚¨ SharedPreferences.Editor putStringSet(String var1, Set&lt;String&gt; var2); //è¿›è¡ŒIntå€¼å­˜å‚¨ SharedPreferences.Editor putInt(String var1, int var2); //è¿›è¡ŒLongå€¼å­˜å‚¨ SharedPreferences.Editor putLong(String var1, long var2); //è¿›è¡ŒFloatå€¼å­˜å‚¨ SharedPreferences.Editor putFloat(String var1, float var2); //è¿›è¡Œå¸ƒå°”å€¼å­˜å‚¨ SharedPreferences.Editor putBoolean(String var1, boolean var2); //åˆ é™¤ä¸€ä¸ªé”® ä¸å…¶å¯¹åº”çš„å€¼ SharedPreferences.Editor remove(String var1); //æ¸…ç©ºæ‰€æœ‰æ•°æ® SharedPreferences.Editor clear(); //æäº¤å­˜å‚¨ boolean commit(); //æäº¤å­˜å‚¨è¯·æ±‚ void apply(); &#125; ä¸Šé¢çš„æ–¹æ³•ä¸­ï¼Œæœ‰ä¸¤ç‚¹éœ€è¦æ³¨æ„ï¼Œé¦–å…ˆclear()æ–¹æ³•æ˜¯å°†æ‰€æœ‰çš„é”®çš„å€¼æ¸…ç©ºï¼Œå¹¶æ²¡æœ‰åˆ é™¤é”®ï¼Œè€Œremoveæ˜¯åˆ é™¤é”®å’Œå€¼ã€‚ç¬¬äºŒç‚¹ï¼Œcommit()æ–¹æ³•å’Œapply()æ–¹æ³•éƒ½ç”¨äºæäº¤æ•°æ®ï¼Œä¸åŒçš„æ˜¯ï¼Œcommit()æ–¹æ³•ä¼šç›´æ¥å°†æ•°æ®åŒæ­¥åˆ°ç£ç›˜ï¼Œè¿”å›å€¼ä¼šå‘ŠçŸ¥å¼€å‘è€…æ˜¯å¦åŒæ­¥æˆåŠŸï¼Œè€Œapply()æ–¹æ³•åªæ˜¯å°†æ•°æ®å­˜å‚¨åœ¨å†…å­˜ï¼Œä¹‹åå¼‚æ­¥è¿›è¡Œå­˜ç›˜æ“ä½œï¼Œæ²¡æœ‰è¿”å›å€¼ï¼Œåœ¨å¼€å‘ä¸­ï¼Œå¦‚æœè¦ä¿è¯æ•°æ®ç«‹é©¬å­˜å…¥ç£ç›˜ï¼Œè¦ä½¿ç”¨commit()æ–¹æ³•ã€‚ å¯¹å­˜å‚¨çš„æ•°æ®è¿›è¡Œè¯»å–ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨SharedPreferenceså®ä¾‹çš„å¦‚ä¸‹æ–¹æ³•ï¼š 12345678910111213141516171819202122232425public interface SharedPreferences &#123; //è·å–æ‰€æœ‰é”®å€¼æ˜ å°„è¡¨ Map&lt;String, ?&gt; getAll(); //é€šè¿‡é”®è·å–å­—ç¬¦ä¸²å€¼ ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºé”® ç¬¬äºŒä¸ªå‚æ•°ä¸ºæ­¤é”®ä¸å­˜åœ¨æ—¶ä½¿ç”¨çš„é»˜è®¤å€¼ String getString(String var1, String var2); //é€šè¿‡é”®è·å–å­—ç¬¦ä¸²å€¼é›†åˆ ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºé”® ç¬¬äºŒä¸ªå‚æ•°ä¸ºæ­¤é”®ä¸å­˜åœ¨æ—¶ä½¿ç”¨çš„é»˜è®¤å€¼ Set&lt;String&gt; getStringSet(String var1, Set&lt;String&gt; var2); //é€šè¿‡é”®è·å–æ•´å½¢å€¼ ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºé”® ç¬¬äºŒä¸ªå‚æ•°ä¸ºæ­¤é”®ä¸å­˜åœ¨æ—¶ä½¿ç”¨çš„é»˜è®¤å€¼ int getInt(String var1, int var2); //é€šè¿‡é”®è·å–é•¿æ•´å½¢å€¼ ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºé”® ç¬¬äºŒä¸ªå‚æ•°ä¸ºæ­¤é”®ä¸å­˜åœ¨æ—¶ä½¿ç”¨çš„é»˜è®¤å€¼ long getLong(String var1, long var2); //é€šè¿‡é”®è·å–æµ®ç‚¹å€¼ ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºé”® ç¬¬äºŒä¸ªå‚æ•°ä¸ºæ­¤é”®ä¸å­˜åœ¨æ—¶ä½¿ç”¨çš„é»˜è®¤å€¼ float getFloat(String var1, float var2); //é€šè¿‡é”®è·å–å¸ƒå°”å€¼ ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºé”® ç¬¬äºŒä¸ªå‚æ•°ä¸ºæ­¤é”®ä¸å­˜åœ¨æ—¶ä½¿ç”¨çš„é»˜è®¤å€¼ boolean getBoolean(String var1, boolean var2); //æ£€æŸ¥æ–‡ä»¶ä¸­æ˜¯å¦åŒ…å«æŸä¸ªé”® boolean contains(String var1); //æ³¨å†Œç›‘å¬ void registerOnSharedPreferenceChangeListener(SharedPreferences.OnSharedPreferenceChangeListener var1); //å–æ¶ˆæ³¨å†Œç›‘å¬ void unregisterOnSharedPreferenceChangeListener(SharedPreferences.OnSharedPreferenceChangeListener var1); public interface OnSharedPreferenceChangeListener &#123; void onSharedPreferenceChanged(SharedPreferences var1, String var2); &#125;&#125; æ³¨å†Œç›‘å¬æ–¹æ³•å¯ä»¥æä¾›ç»™å¼€å‘è€…ä¸€ä¸ªå›è°ƒæ¥å£ï¼Œå½“SharedPreferencesä¸­æ•°æ®æ”¹å˜æ—¶ï¼Œä¼šé€šçŸ¥ç»™å¼€å‘è€…è¿›è¡Œé€»è¾‘å¤„ç†ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345678910//åˆ›å»ºç›‘å¬è€… final SharedPreferences.OnSharedPreferenceChangeListener listener = new SharedPreferences.OnSharedPreferenceChangeListener() &#123; //éœ€è¦é‡å†™è¿™ä¸ªæ–¹æ³• è¿™ä¸ªæ–¹æ³•ä¸­ä¼šä¼ å…¥å‘ç”Ÿå˜åŒ–çš„é”®s @Override public void onSharedPreferenceChanged(SharedPreferences sharedPreferences, String s) &#123; Log.d(\"**********\",s); &#125; &#125;;//è¿›è¡Œæ³¨å†ŒsharedPreferences.registerOnSharedPreferenceChangeListener(listener); æ¸©é¦¨æç¤ºï¼šå¯ä»¥åœ¨Android Device Monitorä¸­æŸ¥çœ‹åˆ›å»ºçš„SharedPreferencesæ–‡ä»¶ï¼Œè·¯å¾„ä¸ºdata/data/APPåŒ…å/shared_prefsç›®å½•ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°å…¶ä¸ºXMLæ–‡ä»¶ï¼Œå¦‚ä¸‹å›¾ï¼š ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š435043639","categories":[{"name":"Androidå°è®°","slug":"Androidå°è®°","permalink":"http://huishao.cc/categories/Androidå°è®°/"}],"tags":[],"keywords":[{"name":"Androidå°è®°","slug":"Androidå°è®°","permalink":"http://huishao.cc/categories/Androidå°è®°/"}]},{"title":"Objective-Cä¸­NSArrayç±»çš„è§£è¯»","slug":"241 Objective-Cä¸­NSArrayç±»çš„è§£è¯»","date":"2016-07-18T16:00:00.000Z","updated":"2021-07-09T07:50:39.849Z","comments":true,"path":"2016/07/19/241 Objective-Cä¸­NSArrayç±»çš„è§£è¯»/","link":"","permalink":"http://huishao.cc/2016/07/19/241 Objective-Cä¸­NSArrayç±»çš„è§£è¯»/","excerpt":"","text":"Objective-Cä¸­NSArrayç±»çš„è§£è¯»NSArrayæ•°ç»„ç±»æ˜¯Objective-Cè¯­è¨€ä¸­å¸¸ç”¨çš„ä¹Ÿæ˜¯é‡è¦çš„ä¸€ä¸ªç±»ï¼Œé™¤äº†å¼€å‘ä¸­å¸¸ç”¨åˆ°çš„ä¸€äº›åŸºç¡€åŠŸèƒ½ï¼ŒNSArrayåŠå…¶ç›¸å…³ç±»ä¸­è¿˜å°è£…äº†è®¸å¤šæ›´åŠ å¼ºå¤§çš„åŠŸèƒ½ã€‚æœ‰æœºä¼šæ€»ç»“äº†ä¸€ä¸‹ï¼Œä¸éœ€è¦çš„æœ‹å‹ä»¬åˆ†äº«ã€‚ NSArrayä¸­å±æ€§ä¸æ–¹æ³•ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168//è·å–æ•°ç»„ä¸­å…ƒç´ ä¸ªæ•°@property (readonly) NSUInteger count;//é€šè¿‡ä¸‹æ ‡è·æ•°ç»„ä¸­çš„å…ƒç´ - (ObjectType)objectAtIndex:(NSUInteger)index;//åˆå§‹åŒ–æ–¹æ³•- (instancetype)init;//é€šè¿‡Cè¯­è¨€é£æ ¼çš„æ•°ç»„åˆ›å»ºNSArrayå¯¹è±¡ éœ€è¦æ³¨æ„ï¼ŒCæ•°ç»„ä¸­éœ€è¦ä¸ºObjectiveå¯¹è±¡ï¼Œcntå‚æ•°ä¸ºCæ•°ç»„çš„é•¿åº¦//å¦‚æœcntçš„å€¼å°äºCæ•°ç»„çš„é•¿åº¦ï¼Œåˆ™ä¼šå¯¹Cæ•°æ®è¿›è¡Œæˆªå–èµ‹å€¼ï¼Œå¦‚æœå¤§äºåˆ™ç¨‹åºä¼šå´©æºƒ- (instancetype)initWithObjects:(const ObjectType [])objects count:(NSUInteger)cnt;//æ•°ç»„çš„å½’æ¡£æ–¹æ³•- (nullable instancetype)initWithCoder:(NSCoder *)aDecoder;//åƒæ•°ç»„ä¸­è¿½åŠ ä¸€ä¸ªå…ƒç´  è¿™ä¸ªæ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„- (NSArray&lt;ObjectType&gt; *)arrayByAddingObject:(ObjectType)anObject;//åƒæ•°ç»„ä¸­è¿½åŠ ä¸€ç»„å…ƒç´  è¿™ä¸ªæ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„- (NSArray&lt;ObjectType&gt; *)arrayByAddingObjectsFromArray:(NSArray&lt;ObjectType&gt; *)otherArray;//è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå°†æ•°ç»„ä¸­çš„å…ƒç´ ä»¥separatorä¸ºåˆ†éš”ç¬¦è¿›è¡Œç»„åˆ/*NSArray * array = @[@1,@2,@3,@4];å°†æ‰“å°1,2,3,4NSString * res = [array componentsJoinedByString:@\",\"];*/- (NSString *)componentsJoinedByString:(NSString *)separator;//åˆ¤æ–­æ•°ç»„ä¸­æ˜¯å¦åŒ…å«æŸä¸ªå…ƒç´ - (BOOL)containsObject:(ObjectType)anObject;//æ•°ç»„çš„æ‰“å°æ–¹æ³•@property (readonly, copy) NSString *description;- (NSString *)descriptionWithLocale:(nullable id)locale;- (NSString *)descriptionWithLocale:(nullable id)locale indent:(NSUInteger)level;//è·å–ç¬¬ä¸€ä¸ªåŒ…å«äºå¦ä¸€ä¸ªæ•°ç»„ä¸­çš„å…ƒç´ - (nullable ObjectType)firstObjectCommonWithArray:(NSArray&lt;ObjectType&gt; *)otherArray;//å°†æ•°ç»„ä¸­ä¸€å®šèŒƒå›´çš„å…ƒç´ è¯»å–åˆ°ä¸€ä¸ªCæ•°ç»„ä¸­ objectså‚æ•°éœ€è¦ä¸ºåˆ†é…å¥½ç©ºé—´çš„CæŒ‡é’ˆ- (void)getObjects:(ObjectType __unsafe_unretained [])objects range:(NSRange)range;//è·å–æŸä¸ªå…ƒç´ åœ¨æ•°å€¼ä¸­çš„ä¸‹æ ‡å€¼- (NSUInteger)indexOfObject:(ObjectType)anObject;//è·å–æŸä¸ªèŒƒå›´å†…çš„å…ƒç´ çš„ä¸‹æ ‡å€¼- (NSUInteger)indexOfObject:(ObjectType)anObject inRange:(NSRange)range;//è·å–ä¸ç»™å®šå…ƒç´ ç›¸åŒçš„å…ƒç´ åœ¨æ•°ç»„ä¸­çš„æœ€å°ä¸‹æ ‡å€¼- (NSUInteger)indexOfObjectIdenticalTo:(ObjectType)anObject;//åœ¨ä¸€å®šèŒƒå›´å†… è·å–ä¸ç»™å®šå…ƒç´ ç›¸åŒçš„å…ƒç´ åœ¨æ•°ç»„ä¸­çš„æœ€å°ä¸‹æ ‡å€¼- (NSUInteger)indexOfObjectIdenticalTo:(ObjectType)anObject inRange:(NSRange)range;//åˆ¤æ–­ä¸¤ä¸ªæ•°ç»„æ˜¯å¦ç›¸åŒ- (BOOL)isEqualToArray:(NSArray&lt;ObjectType&gt; *)otherArray;//è·å–æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ @property (nullable, nonatomic, readonly) ObjectType firstObject NS_AVAILABLE(10_6, 4_0);//è·å–æ•°ç»„ä¸­æœ€åä¸€ä¸ªå…ƒç´ @property (nullable, nonatomic, readonly) ObjectType lastObject;//è·å–æ•°ç»„çš„æšä¸¾å¯¹è±¡- (NSEnumerator&lt;ObjectType&gt; *)objectEnumerator;//è·å–æ•°ç»„çš„é€†å‘æšä¸¾å¯¹è±¡- (NSEnumerator&lt;ObjectType&gt; *)reverseObjectEnumerator;/*è¿™ä¸ªå±æ€§å¯ä»¥è·å–ä¸€ä¸ªå·²ç»æ’åºæ•°ç»„çš„æ’åºè§„åˆ™ åœ¨ä½¿ç”¨- (NSArray&lt;ObjectType&gt; *)sortedArrayUsingFunction:(NSInteger (*)(ObjectType, ObjectType, void * __nullable))comparator context:(nullable void *)context hint:(nullable NSData *)hint;æ–¹æ³•æ—¶å¯ä»¥å°†æ­¤æ’åºè§„åˆ™ä¼ å…¥ å¯¹äºæ²¡æœ‰æ’åºè¿‡çš„æ•°ç»„ï¼Œä½¿ç”¨- (NSArray&lt;ObjectType&gt; *)sortedArrayUsingFunction:(NSInteger (*)(ObjectType, ObjectType, void * __nullable))comparator context:(nullable void *)context;æ–¹æ³•ä¼šè‡ªåŠ¨äº§ç”Ÿä¸€ä¸ªè¿™æ ·çš„æ’åºè§„åˆ™*/@property (readonly, copy) NSData *sortedArrayHint;//é€šè¿‡Cæ’åºå‡½æ•°è¿›è¡Œæ’åº/*ç¤ºä¾‹ï¼šNSInteger sort(id obj1, id obj2, void *context)&#123; NSNumber *str1 =(NSNumber*) obj1; NSNumber *str2 =(NSNumber*) obj2; if ([str1 intValue] &lt; [str2 intValue]) &#123; return NSOrderedDescending; &#125; else if([str1 intValue] == [str2 intValue]) &#123; return NSOrderedSame; &#125; return NSOrderedAscending;&#125;- (void)viewDidLoad &#123; [super viewDidLoad]; NSArray * array = @[@1,@3,@2,@4]; array = [array sortedArrayUsingFunction:sort context:nil]; NSString * res = [array componentsJoinedByString:@\",\"]; NSLog(@\"%@\",res);&#125;*/- (NSArray&lt;ObjectType&gt; *)sortedArrayUsingFunction:(NSInteger (*)(ObjectType, ObjectType, void * __nullable))comparator context:(nullable void *)context;//é€šè¿‡Cæ’åºå‡½æ•°è¿›è¡Œæ•°ç»„æ’åº- (NSArray&lt;ObjectType&gt; *)sortedArrayUsingFunction:(NSInteger (*)(ObjectType, ObjectType, void * __nullable))comparator context:(nullable void *)context hint:(nullable NSData *)hint;//ä½¿ç”¨å‡½æ•°é€‰æ‹©å™¨è¿›è¡Œæ•°ç»„æ’åº- (NSArray&lt;ObjectType&gt; *)sortedArrayUsingSelector:(SEL)comparator;//è·å–æ•°ç»„ä¸€å®šèŒƒå›´çš„å­æ•°ç»„- (NSArray&lt;ObjectType&gt; *)subarrayWithRange:(NSRange)range;//å°†æ•°ç»„å†™å…¥æ–‡ä»¶- (BOOL)writeToFile:(NSString *)path atomically:(BOOL)useAuxiliaryFile;//å°†æ•°ç»„å†™å…¥æŒ‡å®šurlè·¯å¾„- (BOOL)writeToURL:(NSURL *)url atomically:(BOOL)atomically;//æ˜¯æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ è°ƒç”¨æŸä¸ªæ–¹æ³•é€‰æ‹©å™¨- (void)makeObjectsPerformSelector:(SEL)aSelector;//åŠŸèƒ½åŒä¸Š æ”¯æŒä¼ å‚- (void)makeObjectsPerformSelector:(SEL)aSelector withObject:(nullable id)argument;//è·å–ä¸€ä¸ªä¸‹æ ‡é›†åˆæ‰€å¯¹åº”çš„å…ƒç´ - (NSArray&lt;ObjectType&gt; *)objectsAtIndexes:(NSIndexSet *)indexes;//æ•°ç»„çš„ä¸‹æ ‡æ–¹æ³• å­ç±»é‡å†™- (ObjectType)objectAtIndexedSubscript:(NSUInteger)idx NS_AVAILABLE(10_8, 6_0);//å¯¹æ•°ç»„ä¸­çš„å…ƒç´ è¿›è¡Œæšä¸¾éå†- (void)enumerateObjectsUsingBlock:(void (^)(ObjectType obj, NSUInteger idx, BOOL *stop))block NS_AVAILABLE(10_6, 4_0);//å¯¹æ•°ç»„ä¸­çš„å…ƒç´ è¿›è¡Œæšä¸¾éå†/*typedef NS_OPTIONS(NSUInteger, NSEnumerationOptions) &#123; NSEnumerationConcurrent = (1UL &lt;&lt; 0),//æ­£å‘æšä¸¾ NSEnumerationReverse = (1UL &lt;&lt; 1), //é€†å‘æšä¸¾&#125;; */- (void)enumerateObjectsWithOptions:(NSEnumerationOptions)opts usingBlock:(void (^)(ObjectType obj, NSUInteger idx, BOOL *stop))block NS_AVAILABLE(10_6, 4_0);//åœ¨ä¸€ä¸ªä¸‹æ ‡é›†åˆä¸­æšä¸¾- (void)enumerateObjectsAtIndexes:(NSIndexSet *)s options:(NSEnumerationOptions)opts usingBlock:(void (^)(ObjectType obj, NSUInteger idx, BOOL *stop))block NS_AVAILABLE(10_6, 4_0);//é€šè¿‡éå†çš„æ–¹å¼æŸ¥æ‰¾ç¬¦åˆæ¡ä»¶çš„å…ƒç´ ä¸‹æ ‡- (NSUInteger)indexOfObjectPassingTest:(BOOL (^)(ObjectType obj, NSUInteger idx, BOOL *stop))predicate NS_AVAILABLE(10_6, 4_0);//é€šå¸¸ å¯ä»¥è®¾ç½®éå†æ–¹å¼- (NSUInteger)indexOfObjectWithOptions:(NSEnumerationOptions)opts passingTest:(BOOL (^)(ObjectType obj, NSUInteger idx, BOOL *stop))predicate NS_AVAILABLE(10_6, 4_0);//åŒä¸Š åœ¨ä¸€å®šä¸‹æ ‡é›†åˆä¸­éå†- (NSUInteger)indexOfObjectAtIndexes:(NSIndexSet *)s options:(NSEnumerationOptions)opts passingTest:(BOOL (^)(ObjectType obj, NSUInteger idx, BOOL *stop))predicate NS_AVAILABLE(10_6, 4_0);//é€šè¿‡éå†çš„æ–¹å¼æŸ¥æ‰¾æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„å…ƒç´ ä¸‹æ ‡- (NSIndexSet *)indexesOfObjectsPassingTest:(BOOL (^)(ObjectType obj, NSUInteger idx, BOOL *stop))predicate NS_AVAILABLE(10_6, 4_0);//åŒä¸Š- (NSIndexSet *)indexesOfObjectsWithOptions:(NSEnumerationOptions)opts passingTest:(BOOL (^)(ObjectType obj, NSUInteger idx, BOOL *stop))predicate NS_AVAILABLE(10_6, 4_0);//åŒä¸Š- (NSIndexSet *)indexesOfObjectsAtIndexes:(NSIndexSet *)s options:(NSEnumerationOptions)opts passingTest:(BOOL (^)(ObjectType obj, NSUInteger idx, BOOL *stop))predicate NS_AVAILABLE(10_6, 4_0);//é€šè¿‡blockè¿›è¡Œæ•°ç»„æ’åº- (NSArray&lt;ObjectType&gt; *)sortedArrayUsingComparator:(NSComparator)cmptr NS_AVAILABLE(10_6, 4_0);//åŒä¸Š/*typedef NS_OPTIONS(NSUInteger, NSSortOptions) &#123; NSSortConcurrent = (1UL &lt;&lt; 0),//åŒæ­¥æ’åº NSSortStable = (1UL &lt;&lt; 4),//ç¨³å®šæ’åº&#125;;*/- (NSArray&lt;ObjectType&gt; *)sortedArrayWithOptions:(NSSortOptions)opts usingComparator:(NSComparator)cmptr NS_AVAILABLE(10_6, 4_0);//äºŒåˆ†æŸ¥æ‰¾çš„æšä¸¾å‚æ•°typedef NS_OPTIONS(NSUInteger, NSBinarySearchingOptions) &#123; NSBinarySearchingFirstEqual = (1UL &lt;&lt; 8), NSBinarySearchingLastEqual = (1UL &lt;&lt; 9), NSBinarySearchingInsertionIndex = (1UL &lt;&lt; 10),&#125;;//å¯¹åŒºåŸŸæ’åºçš„æ•°ç»„è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾- (NSUInteger)indexOfObject:(ObjectType)obj inSortedRange:(NSRange)r options:(NSBinarySearchingOptions)opts usingComparator:(NSComparator)cmp NS_AVAILABLE(10_6, 4_0); // binary search//åˆ›å»ºå¯¹è±¡+ (instancetype)array;//é€šè¿‡ä¸€ä¸ªå…ƒç´ åˆ›å»ºæ•°ç»„å¯¹è±¡+ (instancetype)arrayWithObject:(ObjectType)anObject;//é€šè¿‡Cæ•°ç»„åˆ›å»ºæ•°ç»„å¯¹è±¡+ (instancetype)arrayWithObjects:(const ObjectType [])objects count:(NSUInteger)cnt;//é€šè¿‡ä¸€ç»„å…ƒç´ åˆ›å»ºæ•°ç»„å¯¹è±¡+ (instancetype)arrayWithObjects:(ObjectType)firstObj, ... NS_REQUIRES_NIL_TERMINATION;//é€šè¿‡å¦ä¸€ä¸ªæ•°ç»„åˆ›å»ºæ•°ç»„å¯¹è±¡+ (instancetype)arrayWithArray:(NSArray&lt;ObjectType&gt; *)array;//åˆå§‹åŒ–æ–¹æ³•- (instancetype)initWithObjects:(ObjectType)firstObj, ... NS_REQUIRES_NIL_TERMINATION;- (instancetype)initWithArray:(NSArray&lt;ObjectType&gt; *)array;- (instancetype)initWithArray:(NSArray&lt;ObjectType&gt; *)array copyItems:(BOOL)flag;//é€šè¿‡æ–‡ä»¶åˆ›å»ºæ•°ç»„+ (nullable NSArray&lt;ObjectType&gt; *)arrayWithContentsOfFile:(NSString *)path;//é€šè¿‡urlåˆ›å»ºæ•°ç»„+ (nullable NSArray&lt;ObjectType&gt; *)arrayWithContentsOfURL:(NSURL *)url;åŒä¸Š- (nullable NSArray&lt;ObjectType&gt; *)initWithContentsOfFile:(NSString *)path;- (nullable NSArray&lt;ObjectType&gt; *)initWithContentsOfURL:(NSURL *)url;//è·å–æ•°ç»„æ‰€æœ‰å…ƒç´  éœ€è¦ä¼ å…¥åˆ†é…äº†å†…å­˜çš„CæŒ‡é’ˆ- (void)getObjects:(ObjectType __unsafe_unretained [])objects; NSMutableArrayä¸­å±æ€§ä¸æ–¹æ³•ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667//å‘æ•°ç»„ä¸­è¿½åŠ ä¸€ä¸ªå…ƒç´ - (void)addObject:(ObjectType)anObject;//å‘æ•°ç»„æŸä¸ªä½ç½®æ’å…¥ä¸€ä¸ªå…ƒç´ - (void)insertObject:(ObjectType)anObject atIndex:(NSUInteger)index;//åˆ é™¤æ•°ç»„ä¸­æœ€åä¸€ä¸ªå…ƒç´ - (void)removeLastObject;//åˆ é™¤æ•°ç»„ä¸­æŒ‡å®šä½ç½®çš„å…ƒç´ - (void)removeObjectAtIndex:(NSUInteger)index;//æ›¿æ¢æ•°ç»„ä¸­ä¸€ä¸ªä½ç½®çš„å…ƒç´ - (void)replaceObjectAtIndex:(NSUInteger)index withObject:(ObjectType)anObject;//åˆå§‹åŒ–- (instancetype)init NS_DESIGNATED_INITIALIZER;- (instancetype)initWithCapacity:(NSUInteger)numItems NS_DESIGNATED_INITIALIZER;- (nullable instancetype)initWithCoder:(NSCoder *)aDecoder NS_DESIGNATED_INITIALIZER;//é€šè¿‡æ•°ç»„æ¥è¿½åŠ å…ƒç´ - (void)addObjectsFromArray:(NSArray&lt;ObjectType&gt; *)otherArray;//äº¤æ¢ä¸¤ä¸ªå…ƒç´ - (void)exchangeObjectAtIndex:(NSUInteger)idx1 withObjectAtIndex:(NSUInteger)idx2;//åˆ é™¤æ‰€æœ‰å…ƒç´ - (void)removeAllObjects;//åœ¨ä¸€å®šèŒƒå›´å†…åˆ é™¤å…ƒç´ - (void)removeObject:(ObjectType)anObject inRange:(NSRange)range;//åˆ é™¤ä¸€ä¸ªå…ƒç´ - (void)removeObject:(ObjectType)anObject;//åˆ é™¤æŒ‡å®šèŒƒå›´å†…ä¸‹æ ‡æœ€å°çš„æŸä¸ªå…ƒç´ - (void)removeObjectIdenticalTo:(ObjectType)anObject inRange:(NSRange)range;//åˆ é™¤æŸä¸ªå…ƒç´  ä¸‹æ ‡æœ€å°çš„- (void)removeObjectIdenticalTo:(ObjectType)anObject;//åˆ é™¤ä¸€å®šèŒƒå›´å†…çš„æ‰€æœ‰å…ƒç´ - (void)removeObjectsFromIndices:(NSUInteger *)indices numIndices:(NSUInteger)cnt NS_DEPRECATED(10_0, 10_6, 2_0, 4_0);//é€šè¿‡æ•°ç»„åˆ é™¤å…ƒç´ - (void)removeObjectsInArray:(NSArray&lt;ObjectType&gt; *)otherArray;//é€šè¿‡èŒƒå›´åˆ é™¤å…ƒç´ - (void)removeObjectsInRange:(NSRange)range;//æ›¿æ¢ä¸€ç»„å…ƒç´ - (void)replaceObjectsInRange:(NSRange)range withObjectsFromArray:(NSArray&lt;ObjectType&gt; *)otherArray range:(NSRange)otherRange;//æ›¿æ¢ä¸€ç»„å…ƒç´ - (void)replaceObjectsInRange:(NSRange)range withObjectsFromArray:(NSArray&lt;ObjectType&gt; *)otherArray;//è®¾ç½®æ•°ç»„å…ƒç´ - (void)setArray:(NSArray&lt;ObjectType&gt; *)otherArray;//è¿›è¡Œæ•°ç»„æ’åº- (void)sortUsingFunction:(NSInteger (*)(ObjectType, ObjectType, void * __nullable))compare context:(nullable void *)context;//è¿›è¡Œæ•°ç»„æ’åº- (void)sortUsingSelector:(SEL)comparator;//æ’å…¥ä¸€ç»„å…ƒç´ - (void)insertObjects:(NSArray&lt;ObjectType&gt; *)objects atIndexes:(NSIndexSet *)indexes;//åˆ é™¤ä¸€ç»„å…ƒç´ - (void)removeObjectsAtIndexes:(NSIndexSet *)indexes;//æ›¿æ¢ä¸€ç»„å…ƒç´ - (void)replaceObjectsAtIndexes:(NSIndexSet *)indexes withObjects:(NSArray&lt;ObjectType&gt; *)objects;//è®¾ç½®æŸä¸ªä¸‹æ ‡å¯¹åº”çš„å…ƒç´  å­ç±»è¦†å†™- (void)setObject:(ObjectType)obj atIndexedSubscript:(NSUInteger)idx NS_AVAILABLE(10_8, 6_0);//è¿›è¡Œæ•°ç»„æ’åº- (void)sortUsingComparator:(NSComparator)cmptr NS_AVAILABLE(10_6, 4_0);//è¿›è¡Œæ•°ç»„æ’åº- (void)sortWithOptions:(NSSortOptions)opts usingComparator:(NSComparator)cmptr NS_AVAILABLE(10_6, 4_0);//åˆ›å»ºæ•°ç»„ numItemsä¸ºå…ƒç´ ä¸ªæ•°+ (instancetype)arrayWithCapacity:(NSUInteger)numItems;//é€šè¿‡æ–‡ä»¶åˆ›å»ºæ•°ç»„+ (nullable NSMutableArray&lt;ObjectType&gt; *)arrayWithContentsOfFile:(NSString *)path;//é€šè¿‡urlåˆ›å»ºæ•°ç»„+ (nullable NSMutableArray&lt;ObjectType&gt; *)arrayWithContentsOfURL:(NSURL *)url;åŒä¸Š- (nullable NSMutableArray&lt;ObjectType&gt; *)initWithContentsOfFile:(NSString *)path;- (nullable NSMutableArray&lt;ObjectType&gt; *)initWithContentsOfURL:(NSURL *)url; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"Objective-Cæµ…æ¢","slug":"Objective-Cæµ…æ¢","permalink":"http://huishao.cc/categories/Objective-Cæµ…æ¢/"}],"tags":[],"keywords":[{"name":"Objective-Cæµ…æ¢","slug":"Objective-Cæµ…æ¢","permalink":"http://huishao.cc/categories/Objective-Cæµ…æ¢/"}]},{"title":"iOSä¸­Todayæ‰©å±•æ’ä»¶ä¸å®¿ä¸»APPçš„äº¤äº’","slug":"240iOSä¸­Todayæ‰©å±•æ’ä»¶ä¸å®¿ä¸»APPçš„äº¤äº’","date":"2016-07-13T16:00:00.000Z","updated":"2021-07-09T07:48:00.202Z","comments":true,"path":"2016/07/14/240iOSä¸­Todayæ‰©å±•æ’ä»¶ä¸å®¿ä¸»APPçš„äº¤äº’/","link":"","permalink":"http://huishao.cc/2016/07/14/240iOSä¸­Todayæ‰©å±•æ’ä»¶ä¸å®¿ä¸»APPçš„äº¤äº’/","excerpt":"","text":"iOSä¸­Todayæ‰©å±•æ’ä»¶ä¸å®¿ä¸»APPçš„äº¤äº’æ‰©å±•æ˜¯iOS8åç³»ç»Ÿå¼€å‘ç»™å¼€å‘è€…çš„æ–°å¼€å‘æ€è·¯ä¸æ¥å£ï¼Œæ¯ä¸€ä¸ªæ‰©å±•éƒ½å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªç®€å•çš„å°åº”ç”¨ç¨‹åºï¼Œåªæ˜¯å…¶ä¸æ˜¯ç‹¬ç«‹å­˜åœ¨çš„ï¼Œè¦å¯„é™„äºæŸä¸€ä¸ªä¸»åº”ç”¨ä¸Šã€‚ä»‹ç»iOS8æ‰©å±•ä¸Todayæ’ä»¶çš„ä¸“é¢˜è§å¦‚ä¸‹åšå®¢ï¼š iOS8ä¸­æ‰©å±•ä¸Todayæ’ä»¶ï¼šhttp://my.oschina.net/u/2340880/blog/485533ã€‚ ä¸Šè¿°åšå®¢ä¸­åªæ˜¯ç®€å•çš„ä»‹ç»æ‰©å±•çš„åº”ç”¨åœºæ™¯ä¸åˆ›å»ºTodayæ‰©å±•æ’ä»¶çš„æ–¹æ³•ï¼Œåœ¨å®é™…å¼€å‘ä¸­ï¼Œç”±äºæ‰©å±•æ˜¯å¯„é™„äºæŸä¸ªåº”ç”¨ç¨‹åºä¹‹ä¸Šçš„ï¼Œå› æ­¤å…¶é€šå¸¸éœ€è¦å’Œå®¿ä¸»APPè¿›è¡Œæ•°æ®äº¤äº’ã€‚åˆ›å»ºTodayæ‰©å±•Targetåï¼ŒXcodeæ¨¡æ¿ä¼šè‡ªåŠ¨å¸®åŠ©å¼€å‘è€…ç”Ÿæˆä¸€ä¸ªViewControllerä½œä¸ºä¸»ç•Œé¢ï¼Œå¼€å‘è€…å¯ä»¥å‘å…¶ä¸­æ·»åŠ å±•ç¤ºUIæˆ–è€…äº¤äº’æ§ä»¶ï¼Œååˆ†å¼ºå¤§çš„æ˜¯ï¼ŒTodayæ‰©å±•ä¸­æ˜¯æ”¯æŒå¯¹UIViewControllerçš„åˆ‡æ¢çš„ã€‚éœ€è¦æ³¨æ„ï¼Œæ‰©å±•ä¸åŸAPPæ˜¯åœ¨ä¸åŒçš„ç›®å½•ç»“æ„ä¸­çš„ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰©å±•ä¸åŸAPPçš„æ•°æ®å¹¶ä¸å…±äº«ï¼Œä»£ç ä¹Ÿä¸èƒ½å¤ç”¨ã€‚ä¾‹å¦‚åŸAPPä¸­å¯èƒ½æœ‰ç½‘ç»œè¯·æ±‚ï¼Œæ•°æ®æŒä¹…åŒ–å­˜å‚¨ç­‰ç»“æ„æ¡†æ¶ï¼Œæ‰©å±•ä¸­ä¸å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œæ‰©å±•éœ€è¦æä¾›è‡ªå·±çš„ç½‘ç»œè¯·æ±‚æ¡†æ¶çˆ±ï¼Œæ•°æ®æŒä¹…åŒ–ç»“æ„æ¡†æ¶ç­‰ã€‚ å¦‚æœé¡¹ç›®æ˜¯ä½¿ç”¨Podè¿›è¡Œçš„ç®¡ç†ï¼Œåˆ™å¯ä»¥é€šè¿‡æ‰‹åŠ¨è®¾ç½®ï¼Œä½¿æ‰©å±•ä¸­å¯ä»¥ä½¿ç”¨ç»§æ‰¿çš„Podåº“ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š å®Œæˆä¸Šé¢ä¸¤å¼ å›¾ä¸­çš„æ­¥éª¤ï¼Œå³å¯åœ¨æ‰©å±•ä¸­ä½¿ç”¨Podåº“äº†ã€‚ Xcodeæ‰©å±•æ¨¡æ¿åˆ›å»ºçš„ViewControllerä¼šè‡ªåŠ¨éµå®ˆNSWidgetProvidingè¿™ä¸ªåè®®ï¼Œè¿™ä¸ªåè®®ä¸­çš„æ–¹æ³•å’Œæ„ä¹‰å¦‚ä¸‹ï¼Œå¼€å‘è€…å¯ä»¥æ ¹æ®éœ€æ±‚é€‰æ‹©å®ç°ï¼š 1234//æ•°æ®æ›´æ–°æ—¶è°ƒç”¨çš„æ–¹æ³• ç³»ç»Ÿä¼šå®šæœŸæ›´æ–°æ‰©å±•- (void)widgetPerformUpdateWithCompletionHandler:(void (^)(NCUpdateResult result))completionHandler;//è®¾ç½®æ‰©å±•UIè¾¹è· æ³¨æ„ åœ¨ä½¿ç”¨Storyboardæ—¶ï¼Œè‹¥è¦æ‰€è§å³æ‰€å¾— è¿™ä¸ªæ–¹æ³•ä¸­éœ€è¦è¿”å›UIEdgeInsetsZero- (UIEdgeInsets)widgetMarginInsetsForProposedMarginInsets:(UIEdgeInsets)defaultMarginInsets; æ³¨æ„ï¼šTodayæ‰©å±•æœ‰å…¶è‡ªå·±çš„plisté…ç½®æ–‡ä»¶ï¼Œè‹¥éœ€è¦å¯¹æ‰©å±•è¿›è¡Œé…ç½®ï¼Œæ³¨æ„ä¸è¦ä¸å®¿ä¸»å·¥ç¨‹çš„plistæ–‡ä»¶æ··æ·†ã€‚ åœ¨Todayæ‰©å±•ä¸­æ‰“å¼€åŸå®¿ä¸»APPä½¿ç”¨openURLçš„æ–¹å¼ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1[viewController.extensionContext openURL:[NSURL URLWithString:[NSString stringWithFormat:@\"MyApp://action=%@\",@\"action\"]] completionHandler:nil]; ä¸Šé¢æ‰“å¼€åŸå®¿ä¸»APPçš„ä»£ç ä¸­ï¼ŒMyAppæ˜¯å®¿ä¸»APPé…ç½®çš„url Schemesï¼Œé…ç½®æ–¹å¼å¦‚ä¸‹å›¾ï¼š å¯ä»¥é€šè¿‡ä¸ºurlé…ç½®å‚æ•°çš„æ–¹å¼æ¥è¿›è¡ŒTodayæ‰©å±•ä¸åŸå®¿ä¸»APPçš„ä¿¡æ¯äº¤äº’ï¼Œå½“æ‰©å±•ä½¿ç”¨openURLçš„æ–¹å¼æ‰“å¼€åŸå®¿ä¸»APPæ—¶ï¼Œå®¿ä¸»APPä¼šè°ƒç”¨AppDelegateä¸­çš„å¦‚ä¸‹æ–¹æ³•ï¼š 123456-(BOOL)application:(UIApplication *)app openURL:(NSURL *)url options:(NSDictionary&lt;NSString *,id&gt; *)options&#123;//å¯ä»¥æ‹¿åˆ°urlåšç›¸åº”é€»è¾‘å¤„ç† UIAlertView * alert = [[UIAlertView alloc]initWithTitle:url.absoluteString message:nil delegate:nil cancelButtonTitle:@\"ç¡®å®š\" otherButtonTitles:nil, nil]; [alert show]; return YES;&#125; ä¸Šé¢ä»‹ç»çš„openURLçš„æ–¹å¼åªæ˜¯è¿›è¡Œè·³è½¬äº¤äº’ï¼Œå‚æ•°ä¼ é€’ï¼Œå¹¶ä¸èƒ½å®Œæˆæ•°æ®å…±äº«çš„éœ€æ±‚ï¼Œå¹¶ä¸”é€šè¿‡openURLçš„æ–¹å¼ä¼ é€’çš„æ•°æ®æ˜¯å•å‘çš„ã€‚å®é™…ä¸Šï¼Œæ‰©å±•å’ŒåŸå®¿ä¸»APPå…±äº«æ•°æ®çš„åº”ç”¨åœºæ™¯ååˆ†å¹¿æ³›ï¼Œä¾‹å¦‚ç”µå•†ç±»å®¿ä¸»APPä¸­æ‹‰å–åˆ°ä¸€æ‰¹å•†å“ä¿¡æ¯ï¼ŒTodayæ‰©å±•ä¸­ä¹Ÿéœ€è¦è¿™äº›ä¿¡æ¯è¿›è¡Œå±•ç¤ºï¼Œå¦‚æœæ•°æ®ä¸å…±äº«ï¼ŒåŒæ ·çš„æ•°æ®å°†åœ¨å®¿ä¸»APPå†…éƒ¨å’Œæ‰©å±•éƒ½éƒ½è¯·æ±‚ä¸€æ¬¡ï¼Œååˆ†æµªè´¹ï¼Œéš¾å¾ˆéš¾åŒæ­¥ã€‚ç³»ç»Ÿè¿˜æä¾›äº†å¦ä¸€ç§æ–¹å¼æ¥ä½¿å®¿ä¸»APPå’ŒTodayæ‰©å±•å¯ä»¥å…±äº«ä¸€å—å­˜å‚¨ç©ºé—´ï¼Œè¿™éœ€è¦ä½¿ç”¨App GroupæŠ€æœ¯æ¥å®ç°ã€‚å¼€å‘è€…åœ¨è¿›è¡ŒApp Groupç›¸å…³åŠŸèƒ½çš„æµ‹è¯•æ—¶ï¼Œå¿…é¡»ä¸AppIDè¿›è¡Œå…³è”ã€‚ é¦–å…ˆï¼Œéœ€è¦å¼€å¯å®¿ä¸»APPçš„App Groupï¼Œç¤ºä¾‹å›¾å¦‚ä¸‹ï¼š åœ¨Todayæ‰©å±•ä¸­ï¼Œé€‰æ‹©ç›¸åŒçš„App Groupï¼Œå¦‚ä¸‹ï¼š å¼€å¯äº†App GroupåŠŸèƒ½åï¼ŒXcodeä¼šè‡ªåŠ¨ç”Ÿæˆä¸€å¥—åŒ¹é…çš„æƒé™æ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š é…ç½®å·¥ä½œå®Œæˆåï¼Œå¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼å…±äº«æ•°æ®å­˜å‚¨ç©ºé—´ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789//ä½¿ç”¨æ•°æ®å…±äº«çš„NSUserDefaults è¿™ä¸ªNSUserDefaultsæ˜¯å®¿ä¸»APPä¸æ‰©å±•æ‰€å…±äº«çš„NSUserDefaults * defaults =[NSUserDefaults alloc]initWithSuiteName:@\"å¼€å‘è€…è®¾ç½®çš„AppGroupåç§°\"];//ä½¿ç”¨æ•°æ®å…±äº«çš„æ–‡ä»¶ç›®å½•NSFileManager * manager = [NSFileManager defaultManager];//å…±äº«ç›®å½•NSURL * baseURL = [manager containerURLForSecurityApplicationGroupIdentifier:@\"å¼€å‘è€…è®¾ç½®çš„AppGroupåç§°\"];//æ‰¾æ–‡ä»¶NSURL * filePath = [baseURL URLByAppendingPathComponent:@\"file\"]; æ³¨æ„ï¼šè¿˜æœ‰ä¸€ç‚¹ç»†èŠ‚éœ€è¦æ³¨æ„ï¼Œæ‰©å±•ä¸åŸå®¿ä¸»APPç´ ææ–‡ä»¶ä¹Ÿæ˜¯äº’ç›¸ç‹¬ç«‹çš„ï¼Œè¦åœ¨æ‰©å±•ä¸­ä½¿ç”¨çš„ç´ æå¿…é¡»æ·»åŠ è¿›æ‰©å±•Targetã€‚ å°æç¤ºï¼šä½¿ç”¨Xcodeè°ƒè¯•æ‰©å±•æ—¶ï¼Œéœ€è¦è¿è¡Œæ‰©å±•çš„Targetï¼Œå¼€å‘è€…æœ‰æ—¶ä¼šå‘ç°æ–­ç‚¹å¤±æ•ˆï¼Œå°†æ¨¡æ‹Ÿå™¨ä¸Šçš„åº”ç”¨åˆ æ‰ï¼Œé‡æ–°è¿è¡Œæ‰©å±•å³å¯è§£å†³ã€‚ Demoåœ°å€ï¼šhttp://pan.baidu.com/s/1bp0ZcYFã€‚ æˆªå›¾ï¼š ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSä¸­UIPopoverControllerä½¿ç”¨è¯¦è§£","slug":"239iOSä¸­UIPopoverControllerä½¿ç”¨è¯¦è§£","date":"2016-07-12T16:00:00.000Z","updated":"2021-07-09T07:46:12.375Z","comments":true,"path":"2016/07/13/239iOSä¸­UIPopoverControllerä½¿ç”¨è¯¦è§£/","link":"","permalink":"http://huishao.cc/2016/07/13/239iOSä¸­UIPopoverControllerä½¿ç”¨è¯¦è§£/","excerpt":"","text":"iOSä¸­UIPopoverControllerä½¿ç”¨è¯¦è§£ä¸€ã€å¼•è¨€UIPopoverControlleræ˜¯Padè®¾å¤‡ä¸­å¸¸ç”¨çš„ä¸€ç§è§†å›¾æ§åˆ¶å™¨ï¼Œå…¶åœ¨UIè¡¨ç°ä¸Šä¸ºåœ¨å½“å‰è§†å›¾æ§åˆ¶å™¨ä¸Šé¢å¼¹å‡ºä¸€ä¸ªå­è§†å›¾æ§åˆ¶å™¨ï¼Œé€šå¸¸ç”¨æ¥å±•ç¤ºäº¤äº’åˆ—è¡¨ã€‚ç¤ºä¾‹å¦‚ä¸‹å›¾ï¼š UIPopoverControlleråªèƒ½ç”¨äºiPadï¼Œåœ¨è¦å…¼å®¹iPadå’ŒiPhoneçš„é¡¹ç›®ä¸­ï¼Œéœ€è¦æ ¹æ®è®¾å¤‡ç±»å‹ä½¿ç”¨ä¸¤å¥—ä»£ç ã€‚åœ¨iOS8ä¹‹åï¼Œç³»ç»Ÿæä¾›äº†UIPresentationControlleræ¥ä»£æ›¿å¥¹ï¼ŒUIPresentationControllerå¯ä»¥å…¼å®¹iPhoneä¸iPadã€‚ äºŒã€UIPopoverControllerçš„ä½¿ç”¨è¯¦è§£é¦–å…ˆUIPopoverControlleræ˜¯ä¸€ä¸ªå®¹å™¨æ§åˆ¶å™¨ï¼Œå…¶ä¸­éœ€è¦æ‰¿è½½ä¸€ä¸ªViewControlerä½œä¸ºå†…å®¹è§†å›¾ã€‚UIPopoverControllerä½¿ç”¨å¦‚ä¸‹åˆå§‹åŒ–æ–¹æ³•åˆ›å»ºï¼š 12//åˆ›å»ºè§†å›¾æ§åˆ¶å™¨çš„æ–¹æ³• é€šè¿‡ä¸€ä¸ªå†…å®¹è§†å›¾æ§åˆ¶å™¨åˆ›å»º- (instancetype)initWithContentViewController:(UIViewController *)viewController; åˆ›å»ºå‡ºæ§åˆ¶å™¨åï¼Œè°ƒç”¨å¦‚ä¸‹æ–¹æ³•å¯ä»¥å°†æ§åˆ¶å™¨å¼¹å‡ºï¼š 12345678910111213141516//è¿™ä¸ªæ–¹æ³•å°†æ§åˆ¶å™¨ä»¥ä¸€ä¸ªCGRectåŒºåŸŸä¸ºåŸºå‡†å¼¹å‡º/*UIPopoverArrowDirectionä¸ºç®­å¤´å‡ºç°çš„æ–¹å‘typedef NS_OPTIONS(NSUInteger, UIPopoverArrowDirection) &#123; UIPopoverArrowDirectionUp = 1UL &lt;&lt; 0,//ä¸Š UIPopoverArrowDirectionDown = 1UL &lt;&lt; 1,//ä¸‹ UIPopoverArrowDirectionLeft = 1UL &lt;&lt; 2,//å·¦ UIPopoverArrowDirectionRight = 1UL &lt;&lt; 3,//å³ UIPopoverArrowDirectionAny = UIPopoverArrowDirectionUp | UIPopoverArrowDirectionDown | UIPopoverArrowDirectionLeft | UIPopoverArrowDirectionRight,//ä»»æ„æ–¹å‘ UIPopoverArrowDirectionUnknown = NSUIntegerMax//æœªçŸ¥&#125;;*///viewå‚æ•°ä¸ºé€‰æ‹©è¦åœ¨é‚£ä¸ªViewè§†å›¾ä¸Šå¼¹å‡º animatedå‚æ•°è®¾ç½®æ˜¯å¦å¸¦åŠ¨ç”»- (void)presentPopoverFromRect:(CGRect)rect inView:(UIView *)view permittedArrowDirections:(UIPopoverArrowDirection)arrowDirections animated:(BOOL)animated;//ä»¥ä¸€ä¸ªBarButtonItemä¸ºåŸºå‡†å¼¹å‡º å…¶ä½™å‚æ•°æ„ä¹‰åŒä¸Š- (void)presentPopoverFromBarButtonItem:(UIBarButtonItem *)item permittedArrowDirections:(UIPopoverArrowDirection)arrowDirections animated:(BOOL)animated; UIPopoverControllerçš„ç›¸å…³è®¾ç½®æ–¹æ³•å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425//è®¾ç½®ä»£ç†@property (nullable, nonatomic, weak) id &lt;UIPopoverControllerDelegate&gt; delegate;//è®¾ç½®å†…å®¹è§†å›¾æ§åˆ¶å™¨@property (nonatomic, strong) UIViewController *contentViewController;- (void)setContentViewController:(UIViewController *)viewController animated:(BOOL)animated;//è®¾ç½®ç•Œé¢å±•ç¤ºå°ºå¯¸@property (nonatomic) CGSize popoverContentSize;- (void)setPopoverContentSize:(CGSize)size animated:(BOOL)animated;//è·å–æ§åˆ¶å™¨å½“å‰æ˜¯å¦æ­£åœ¨å±•ç¤º@property (nonatomic, readonly, getter=isPopoverVisible) BOOL popoverVisible;//è·å–æ§åˆ¶å™¨ç®­å¤´æ–¹å‘@property (nonatomic, readonly) UIPopoverArrowDirection popoverArrowDirection;//è¿™ä¸ªå±æ€§å¯ä»¥å¢å¼ºæ§åˆ¶å™¨çš„äº¤äº’èƒ½åŠ›/*é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“è§†å›¾æ§åˆ¶å™¨å¼¹å‡ºæ—¶ï¼Œç‚¹å‡»ç•Œé¢ä¸Šçš„å…¶ä»–ä½ç½®ï¼Œè§†å›¾æ§åˆ¶å™¨ä¼šè¢«éšè— å¦‚æœéœ€è¦å½“è§†å›¾æ§åˆ¶çˆ±å¼¹å‡ºæ—¶ç•Œé¢ä¸Šçš„å…¶ä»–æ§ä»¶ä¾ç„¶å¯ä»¥è¿›è¡Œç”¨æˆ·äº¤äº’ï¼Œåˆ™éœ€è¦å°†è¿™äº›UIæ§ä»¶è®¾ç½®è¿›è¿™ä¸ªæ•°ç»„ä¸­*/@property (nullable, nonatomic, copy) NSArray&lt;__kindof UIView *&gt; *passthroughViews;//éšè—è§†å›¾æ§åˆ¶å™¨çš„æ–¹æ³•- (void)dismissPopoverAnimated:(BOOL)animated;//è®¾ç½®è§†å›¾æ§åˆ¶å™¨çš„èƒŒæ™¯é¢œè‰²@property (nullable, nonatomic, copy) UIColor *backgroundColor NS_AVAILABLE_IOS(7_0);//è®¾ç½®è§†å›¾Margin@property (nonatomic, readwrite) UIEdgeInsets popoverLayoutMargins NS_AVAILABLE_IOS(5_0);//è¿™ä¸ªå±æ€§ç”¨äºè‡ªå®šä¹‰PopoverControllerçš„UIå±•ç° ä¼ å…¥è‡ªå®šä¹‰çš„èƒŒæ™¯è§†å›¾ç±»@property (nullable, nonatomic, readwrite, strong) Class popoverBackgroundViewClass NS_AVAILABLE_IOS(5_0); ä¸‰ã€è‡ªå®šä¹‰UIå±•ç°çš„UIPopoverControlleré€šè¿‡è®¾ç½®UIPopoverControllerå¯¹è±¡çš„popoverBacjgroundViewClasså±æ€§å¯ä»¥å°†ä¸€ä¸ªè‡ªå®šä¹‰çš„ç±»ä½œä¸ºæ§åˆ¶å™¨çš„èƒŒæ™¯è§†å›¾ï¼Œéœ€è¦æ³¨æ„ï¼Œæ­¤è‡ªå®šä¹‰çš„ç±»å¿…é¡»ç»§æ‰¿è‡ªUIPopoverBackgroundViewï¼Œå¹¶ä¸”å­ç±»å¿…é¡»è¦†å†™çˆ¶ç±»ä¸­çš„ä¸€äº›åˆ—æ–¹æ³•ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081@interface MyView : UIPopoverBackgroundView@end@implementation MyView//è¿™ä¸ªæ–¹æ³•è¿”å›ç®­å¤´å®½åº¦+ (CGFloat)arrowBase&#123; return 20;&#125;//è¿™ä¸ªæ–¹æ³•ä¸­è¿”å›å†…å®¹è§†å›¾çš„åç§»+(UIEdgeInsets)contentViewInsets&#123; return UIEdgeInsetsMake(20, 20, 20, 20);&#125;//è¿™ä¸ªæ–¹æ³•è¿”å›ç®­å¤´é«˜åº¦+(CGFloat)arrowHeight&#123; return 30;&#125;//è¿™ä¸ªæ–¹æ³•è¿”å›ç®­å¤´çš„æ–¹å‘-(UIPopoverArrowDirection)arrowDirection&#123; return UIPopoverArrowDirectionUp;&#125;//è¿™ä¸ªåœ¨è®¾ç½®ç®­å¤´æ–¹å‘æ—¶è¢«è°ƒç”¨ å¯ä»¥ç›‘å¬åšå¤„ç†-(void)setArrowDirection:(UIPopoverArrowDirection)arrowDirection&#123; &#125;//è¿™ä¸ªæ–¹æ³•åœ¨è®¾ç½®ç®­å¤´åç§»é‡æ—¶è¢«è°ƒç”¨ å¯ä»¥ç›‘å¬åšå¤„ç†-(void)setArrowOffset:(CGFloat)arrowOffset&#123; &#125;//é‡å†™layoutæ–¹æ³•æ¥æ¥å®šä¹‰ç®­å¤´æ ·å¼- (void)layoutSubviews&#123; [super layoutSubviews]; CGSize arrowSize = CGSizeMake([[self class] arrowBase], [[self class] arrowHeight]); UIImage * image = [self drawArrowImage:arrowSize]; UIImageView * imageView = [[UIImageView alloc]initWithImage:image]; imageView.frame = CGRectMake(0, 0.0f, arrowSize.width, arrowSize.height); [self addSubview:imageView];&#125;//è¿™ä¸ªæ–¹æ³•ä¸­è¿›è¡ŒèƒŒæ™¯è‰²çš„è®¾ç½®- (instancetype)initWithFrame:(CGRect)frame&#123; self = [super initWithFrame:frame]; if (self) &#123; self.backgroundColor = [UIColor redColor]; &#125; return self;&#125;- (instancetype)init&#123; self = [super init]; if (self) &#123; &#125; return self;&#125;//è¿”å›å€¼å†³å®šæ˜¯å¦æ¸²æŸ“é˜´å½±+(BOOL)wantsDefaultContentAppearance&#123; return NO;&#125;//ç”»ç®­å¤´æ–¹æ³•- (UIImage *)drawArrowImage:(CGSize)size&#123; UIGraphicsBeginImageContextWithOptions(size, NO, 0); CGContextRef ctx = UIGraphicsGetCurrentContext(); [[UIColor clearColor] setFill]; CGContextFillRect(ctx, CGRectMake(0.0f, 0.0f, size.width, size.height)); CGMutablePathRef arrowPath = CGPathCreateMutable(); CGPathMoveToPoint(arrowPath, NULL, (size.width/2.0f), 0.0f); CGPathAddLineToPoint(arrowPath, NULL, size.width, size.height); CGPathAddLineToPoint(arrowPath, NULL, 0.0f, size.height); CGPathCloseSubpath(arrowPath); CGContextAddPath(ctx, arrowPath); CGPathRelease(arrowPath); UIColor *fillColor = [UIColor yellowColor]; CGContextSetFillColorWithColor(ctx, fillColor.CGColor); CGContextDrawPath(ctx, kCGPathFill); UIImage *image = UIGraphicsGetImageFromCurrentImageContext(); UIGraphicsEndImageContext(); return image;&#125;@end å››ã€UIPopoverPresentationControlleråº”ç”¨è§£æUIPopoverPresentationControlleræ˜¯iOS8åç³»ç»Ÿæ–°å¼•å…¥çš„æ§åˆ¶å™¨ï¼Œå…¶å¯ä»¥å¾ˆå¥½çš„å…¼å®¹iPhoneä¸iPadã€‚UIPopoverPresentationContrillerçš„ä½¿ç”¨éœ€è¦å’ŒUIViewControllerç»“åˆè¿›è¡Œï¼Œä½¿ç”¨è¿‡ç¨‹ç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678UITableViewController tabCon = [[UITableViewController alloc]initWithStyle:UITableViewStylePlain];//è®¾ç½®è·³è½¬æ¨¡å¼ä¸ºpopoveræ¨¡å¼tabCon.modalPresentationStyle = UIModalPresentationPopover;//è·å–åˆ°UIPopoverPresentationControllerå¯¹è±¡UIPopoverPresentationController* con = tabCon.popoverPresentationController;//è®¾ç½®å¼¹å‡ºçš„åŸºå‡†è§†å›¾con.sourceView = self.view;[self presentViewController:tabCon animated:YES completion:nil]; UIPopoverPresentationControllerä¸­å±æ€§å¦‚ä¸‹ï¼š 12345678910111213141516171819//è®¾ç½®ä»£ç†@property (nullable, nonatomic, weak) id &lt;UIPopoverPresentationControllerDelegate&gt; delegate;//è®¾ç½®å…è®¸çš„ç®­å¤´æ–¹å‘@property (nonatomic, assign) UIPopoverArrowDirection permittedArrowDirections;//è®¾ç½®åŸºå‡†è§†å›¾æˆ–è€…åŒºåŸŸ@property (nullable, nonatomic, strong) UIView *sourceView;@property (nonatomic, assign) CGRect sourceRect;//è®¾ç½®æ˜¯å¦è¦†ç›–åŸºå‡†è§†å›¾åŒºåŸŸ@property (nonatomic, assign) BOOL canOverlapSourceViewRect NS_AVAILABLE_IOS(9_0);//è®¾ç½®åŸºå‡†BarButtonItem@property (nullable, nonatomic, strong) UIBarButtonItem *barButtonItem;//è®¾ç½®å¯ä»¥è¿›è¡Œç”¨æˆ·äº¤äº’çš„è§†å›¾@property (nullable, nonatomic, copy) NSArray&lt;UIView *&gt; *passthroughViews;//è®¾ç½®èƒŒæ™¯é¢œè‰²@property (nullable, nonatomic, copy) UIColor *backgroundColor;//è®¾ç½®Margin@property (nonatomic, readwrite) UIEdgeInsets popoverLayoutMargins;//è®¾ç½®è‡ªå®šä¹‰è§†å›¾@property (nullable, nonatomic, readwrite, strong) Class &lt;UIPopoverBackgroundViewMethods&gt; popoverBackgroundViewClass; UIPopoverPresentationControllerDelegateä¸­çš„æ–¹æ³•å¦‚ä¸‹ï¼š 12345678//æ§åˆ¶å™¨å°†è¦å¼¹å‡ºæ—¶è°ƒç”¨- (void)prepareForPopoverPresentation:(UIPopoverPresentationController *)popoverPresentationController;//æ§åˆ¶å™¨å°†è¦æ¶ˆå¤±æ—¶è°ƒç”¨- (BOOL)popoverPresentationControllerShouldDismissPopover:(UIPopoverPresentationController *)popoverPresentationController;//æ§åˆ¶å™¨å·²ç»æ¶ˆå¤±æ—¶è°ƒç”¨- (void)popoverPresentationControllerDidDismissPopover:(UIPopoverPresentationController *)popoverPresentationController;//æ§åˆ¶å™¨æ¥æ”¶åˆ°å¼¹å‡ºæ¶ˆæ¯æ—¶è°ƒç”¨- (void)popoverPresentationController:(UIPopoverPresentationController *)popoverPresentationController willRepositionPopoverToRect:(inout CGRect *)rect inView:(inout UIView * __nonnull * __nonnull)view; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"iOSä½¿ç”¨UIImagePickerControllerè°ƒç”¨ç³»ç»Ÿç›¸æœºã€ç›¸å†Œä¸å›¾åº“","slug":"238 iOSä½¿ç”¨UIImagePickerControllerè°ƒç”¨ç³»ç»Ÿç›¸æœºã€ç›¸å†Œä¸å›¾åº“","date":"2016-07-11T16:00:00.000Z","updated":"2021-07-09T07:45:08.522Z","comments":true,"path":"2016/07/12/238 iOSä½¿ç”¨UIImagePickerControllerè°ƒç”¨ç³»ç»Ÿç›¸æœºã€ç›¸å†Œä¸å›¾åº“/","link":"","permalink":"http://huishao.cc/2016/07/12/238 iOSä½¿ç”¨UIImagePickerControllerè°ƒç”¨ç³»ç»Ÿç›¸æœºã€ç›¸å†Œä¸å›¾åº“/","excerpt":"","text":"iOSä½¿ç”¨UIImagePickerControllerè°ƒç”¨ç³»ç»Ÿç›¸æœºã€ç›¸å†Œä¸å›¾åº“ä¸€ã€å¼•è¨€UIImagePickerControlleræ˜¯ç³»ç»Ÿå°è£…å¥½çš„ä¸€ä¸ªå¯¼èˆªè§†å›¾æ§åˆ¶å™¨ï¼Œä½¿ç”¨å…¶å¼€å‘è€…å¯ä»¥ååˆ†æ–¹ä¾¿çš„è¿›è¡Œç›¸æœºç›¸å†Œç›¸å…³åŠŸèƒ½çš„è°ƒç”¨ã€‚UIImagePickerControllerç»§æ‰¿äºUINavigationControllerï¼Œå…¶é€šè¿‡ä»£ç†çš„æ–¹å¼å°†ç”¨æˆ·è·å–çš„å›¾ç‰‡æˆ–è€…è§†é¢‘æ–‡ä»¶ä¼ å…¥ç»™å¼€å‘è€…ã€‚ äºŒã€UIImagePickerControllerä¸­å±æ€§ä¸æ–¹æ³•çš„åº”ç”¨åœ¨ä½¿ç”¨UIImagePickerControllerä¹‹å‰ï¼Œåº”è¯¥å…ˆåˆ¤æ–­è®¾å¤‡åšæ”¯æŒçš„åª’ä½“æ–‡ä»¶è·å–ç±»å‹ï¼Œä½¿ç”¨å¦‚ä¸‹æ–¹æ³•è¿›è¡Œåˆ¤æ–­ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445//åˆ¤æ–­æ˜¯å¦æ”¯æŒæŸä¸ªæ•°æ®æä¾›ç±»å‹/*UIImagePickerControllerSourceTypeæšä¸¾å®šä¹‰å¦‚ä¸‹:typedef NS_ENUM(NSInteger, UIImagePickerControllerSourceType) &#123; //ç³»ç»Ÿå›¾åº“ UIImagePickerControllerSourceTypePhotoLibrary, //ç›¸æœº UIImagePickerControllerSourceTypeCamera, //ç³»ç»Ÿç›¸å†Œ UIImagePickerControllerSourceTypeSavedPhotosAlbum&#125; __TVOS_PROHIBITED;*/+ (BOOL)isSourceTypeAvailable:(UIImagePickerControllerSourceType)sourceType;//åˆ¤æ–­æŸä¸ªæ•°æ®æä¾›è€…æ‰€æ”¯æŒçš„æ–‡ä»¶æ ¼å¼/*æ–‡ä»¶æ ¼å¼å®šä¹‰åœ¨&lt;MobileCoreServices/MobileCoreServices.h&gt;æ¡†æ¶ä¸­*/+ (nullable NSArray&lt;NSString *&gt; *)availableMediaTypesForSourceType:(UIImagePickerControllerSourceType)sourceType; //åˆ¤æ–­æ‰€æ”¯æŒçš„ç›¸æœºè®¾å¤‡/*typedef NS_ENUM(NSInteger, UIImagePickerControllerCameraDevice) &#123; //å‰ç½®æ‘„åƒå¤´ UIImagePickerControllerCameraDeviceRear, //åç½®æ‘„åƒå¤´ UIImagePickerControllerCameraDeviceFront&#125; __TVOS_PROHIBITED;*/+ (BOOL)isCameraDeviceAvailable:(UIImagePickerControllerCameraDevice)cameraDevice NS_AVAILABLE_IOS(4_0); //åˆ¤æ–­å¯¹é—ªå…‰ç¯çš„æ”¯æŒ+ (BOOL)isFlashAvailableForCameraDevice:(UIImagePickerControllerCameraDevice)cameraDevice NS_AVAILABLE_IOS(4_0);//åˆ¤æ–­ç›¸æœºè®¾å¤‡æ”¯æŒçš„åª’ä½“æ¨¡å¼/*è¿”å›å€¼ä¸ºå¦‚ä¸‹æšä¸¾ï¼štypedef NS_ENUM(NSInteger, UIImagePickerControllerCameraCaptureMode) &#123; //ç…§ç‰‡æ¨¡å¼ UIImagePickerControllerCameraCaptureModePhoto, //è§†é¢‘æ¨¡å¼ UIImagePickerControllerCameraCaptureModeVideo&#125; __TVOS_PROHIBITED;*/+ (nullable NSArray&lt;NSNumber *&gt; *)availableCaptureModesForCameraDevice:(UIImagePickerControllerCameraDevice)cameraDevice NS_AVAILABLE_IOS(4_0); ä¸Šé¢æåˆ°çš„å®šä¹‰äº&lt;MobileCoreServices/MobileCoreServices.h&gt;æ¡†æ¶ä¸­çš„æ–‡ä»¶ç±»å‹ï¼Œåˆ—ä¸¾å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738//å›¾ç‰‡ç±»å‹extern const CFStringRef kUTTypeImage __OSX_AVAILABLE_STARTING(__MAC_10_4,__IPHONE_3_0);//JPEGæ ¼å¼extern const CFStringRef kUTTypeJPEG __OSX_AVAILABLE_STARTING(__MAC_10_4,__IPHONE_3_0);//JPEG2000æ ¼å¼extern const CFStringRef kUTTypeJPEG2000 __OSX_AVAILABLE_STARTING(__MAC_10_4,__IPHONE_3_0);extern const CFStringRef kUTTypeTIFF __OSX_AVAILABLE_STARTING(__MAC_10_4,__IPHONE_3_0);extern const CFStringRef kUTTypePICT __OSX_AVAILABLE_STARTING(__MAC_10_4,__IPHONE_3_0);extern const CFStringRef kUTTypeGIF __OSX_AVAILABLE_STARTING(__MAC_10_4,__IPHONE_3_0);extern const CFStringRef kUTTypePNG __OSX_AVAILABLE_STARTING(__MAC_10_4,__IPHONE_3_0);extern const CFStringRef kUTTypeQuickTimeImage __OSX_AVAILABLE_STARTING(__MAC_10_4,__IPHONE_3_0);extern const CFStringRef kUTTypeAppleICNS __OSX_AVAILABLE_STARTING(__MAC_10_4,__IPHONE_3_0);extern const CFStringRef kUTTypeBMP __OSX_AVAILABLE_STARTING(__MAC_10_4,__IPHONE_3_0);extern const CFStringRef kUTTypeICO __OSX_AVAILABLE_STARTING(__MAC_10_4,__IPHONE_3_0);extern const CFStringRef kUTTypeRawImage __OSX_AVAILABLE_STARTING(__MAC_10_10,__IPHONE_8_0);extern const CFStringRef kUTTypeScalableVectorGraphics __OSX_AVAILABLE_STARTING(__MAC_10_10,__IPHONE_8_0);extern const CFStringRef kUTTypeLivePhoto __OSX_AVAILABLE_STARTING(__MAC_NA,__IPHONE_9_1);//è§†é¢‘æ ¼å¼extern const CFStringRef kUTTypeAudiovisualContent __OSX_AVAILABLE_STARTING(__MAC_10_4,__IPHONE_3_0);extern const CFStringRef kUTTypeMovie __OSX_AVAILABLE_STARTING(__MAC_10_4,__IPHONE_3_0);extern const CFStringRef kUTTypeVideo __OSX_AVAILABLE_STARTING(__MAC_10_4,__IPHONE_3_0);extern const CFStringRef kUTTypeAudio __OSX_AVAILABLE_STARTING(__MAC_10_4,__IPHONE_3_0);extern const CFStringRef kUTTypeQuickTimeMovie __OSX_AVAILABLE_STARTING(__MAC_10_4,__IPHONE_3_0);extern const CFStringRef kUTTypeMPEG __OSX_AVAILABLE_STARTING(__MAC_10_4,__IPHONE_3_0);extern const CFStringRef kUTTypeMPEG2Video __OSX_AVAILABLE_STARTING(__MAC_10_10,__IPHONE_8_0);extern const CFStringRef kUTTypeMPEG2TransportStream __OSX_AVAILABLE_STARTING(__MAC_10_10,__IPHONE_8_0);extern const CFStringRef kUTTypeMP3 __OSX_AVAILABLE_STARTING(__MAC_10_4,__IPHONE_3_0);extern const CFStringRef kUTTypeMPEG4 __OSX_AVAILABLE_STARTING(__MAC_10_4,__IPHONE_3_0);extern const CFStringRef kUTTypeMPEG4Audio __OSX_AVAILABLE_STARTING(__MAC_10_4,__IPHONE_3_0);extern const CFStringRef kUTTypeAppleProtectedMPEG4Audio __OSX_AVAILABLE_STARTING(__MAC_10_4,__IPHONE_3_0);extern const CFStringRef kUTTypeAppleProtectedMPEG4Video __OSX_AVAILABLE_STARTING(__MAC_10_10,__IPHONE_8_0);extern const CFStringRef kUTTypeAVIMovie __OSX_AVAILABLE_STARTING(__MAC_10_10,__IPHONE_8_0);extern const CFStringRef kUTTypeAudioInterchangeFileFormat __OSX_AVAILABLE_STARTING(__MAC_10_10,__IPHONE_8_0);extern const CFStringRef kUTTypeWaveformAudio __OSX_AVAILABLE_STARTING(__MAC_10_10,__IPHONE_8_0);extern const CFStringRef kUTTypeMIDIAudio __OSX_AVAILABLE_STARTING(__MAC_10_10,__IPHONE_8_0); CFStringRefä¸NSStringç±»å‹çš„è½¬æ¢ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•ï¼š 1NSString * str = (__bridge NSString*)kUTTypeMovie; UIImagePickerControllerä¸­æ›´å¤šå±æ€§ä¸æ–¹æ³•è§£æå¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647//è®¾ç½®ä»£ç†@property(nullable,nonatomic,weak) id &lt;UINavigationControllerDelegate, UIImagePickerControllerDelegate&gt; delegate;//è®¾ç½®ä¹¦ä½“æä¾›è€…ç±»å‹ é»˜è®¤ä¸ºå›¾åº“@property(nonatomic) UIImagePickerControllerSourceType sourceType; //è®¾ç½®æ‰€éœ€è¦çš„æ•°æ®ç±»å‹ï¼Œéœ€è¦è®¾ç½®ä¸ºç³»ç»Ÿå®šä¹‰çš„æ–‡ä»¶ç±»å‹å­—ç¬¦ä¸²æ•°ç»„ é»˜è®¤ä¸ºkUTTypeImage@property(nonatomic,copy) NSArray&lt;NSString *&gt; *mediaTypes;//è®¾ç½®æ˜¯å¦å…è®¸ç¼–è¾‘å›¾ç‰‡ è®¾ç½®ä¸ºYESï¼Œåˆ™ç”¨æˆ·é€‰æ‹©å›¾ç‰‡æ—¶å¯ä»¥ç¼–è¾‘è£å‰ªå›¾ç‰‡@property(nonatomic) BOOL allowsEditing;//è®¾ç½®åª’ä½“æ–‡ä»¶çš„æœ€å¤§æ—¶é•¿ é»˜è®¤ä¸º10åˆ†é’Ÿ@property(nonatomic) NSTimeInterval videoMaximumDuration; //è®¾ç½®åª’ä½“æ–‡ä»¶çš„è´¨é‡ æšä¸¾å¦‚ä¸‹ï¼š/*typedef NS_ENUM(NSInteger, UIImagePickerControllerQualityType) &#123; UIImagePickerControllerQualityTypeHigh = 0, // é«˜è´¨é‡ UIImagePickerControllerQualityTypeMedium = 1, // ä¸­ç­‰è´¨é‡ UIImagePickerControllerQualityTypeLow = 2, // ä½è´¨é‡ UIImagePickerControllerQualityType640x480 NS_ENUM_AVAILABLE_IOS(4_0) = 3, UIImagePickerControllerQualityTypeIFrame1280x720 NS_ENUM_AVAILABLE_IOS(5_0) = 4, UIImagePickerControllerQualityTypeIFrame960x540 NS_ENUM_AVAILABLE_IOS(5_0) = 5,&#125; __TVOS_PROHIBITED;*/@property(nonatomic) UIImagePickerControllerQualityType videoQuality;//è®¾ç½®æ˜¯å¦æ˜¾ç¤ºç›¸æœºæ§åˆ¶ç•Œé¢@property(nonatomic) BOOL showsCameraControls;//è‡ªå®šä¹‰çš„æ‹ç…§ç•Œé¢ å…¶ä¼šè¦†ç›–åœ¨åŸæ‹ç…§ç•Œé¢ä¸Š@property(nullable, nonatomic,strong) __kindof UIView *cameraOverlayView NS_AVAILABLE_IOS(3_1); //è®¾ç½®æ‹ç…§ç•Œé¢çš„transform@property(nonatomic) CGAffineTransform cameraViewTransform ;//æ‹ç…§- (void)takePicture NS_AVAILABLE_IOS(3_1); //è¿›è¡Œè§†é¢‘æ•è·- (BOOL)startVideoCapture NS_AVAILABLE_IOS(4_0);//åœæ­¢è§†é¢‘æ•è·- (void)stopVideoCapture NS_AVAILABLE_IOS(4_0);//è®¾ç½®ç›¸æœºæ•è·æ¨¡å¼ ç…§ç‰‡æˆ–è§†é¢‘@property(nonatomic) UIImagePickerControllerCameraCaptureMode cameraCaptureMode;//è®¾ç½®ç›¸æœºè®¾å¤‡ å‰ç½®æˆ–åç½®æ‘„åƒå¤´@property(nonatomic) UIImagePickerControllerCameraDevice cameraDevice;//è®¾ç½®é—ªå…‰ç¯æ¨¡å¼/*typedef NS_ENUM(NSInteger, UIImagePickerControllerCameraFlashMode) &#123; UIImagePickerControllerCameraFlashModeOff = -1, //å…³é—­ UIImagePickerControllerCameraFlashModeAuto = 0, //è‡ªåŠ¨ UIImagePickerControllerCameraFlashModeOn = 1 //å¼€å¯&#125; __TVOS_PROHIBITED;*/@property(nonatomic) UIImagePickerControllerCameraFlashMode cameraFlashMode; ä¸‰ã€UIImagePickerControllerDelegateä¸­æ–¹æ³•è§£æ123456//ç›¸æœºæ‹ç…§å®Œæˆæˆ–è€…ä»å›¾åº“ç›¸å†Œé€‰æ‹©ç›¸ç‰‡å®Œæˆåè§¦å‘çš„å›è°ƒæ–¹æ³• editingInfoå­—å…¸ä¸­å°†ä¼ å…¥ç¼–è¾‘ä¿¡æ¯- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)image editingInfo:(nullable NSDictionary&lt;NSString *,id&gt; *)editingInfo NS_DEPRECATED_IOS(2_0, 3_0);//ç›¸æœºå½•åƒæˆ–è€…ä»å›¾åº“ç›¸å†Œé€‰æ‹©è§†é¢‘å®Œæˆåè§¦å‘çš„å›è°ƒæ–¹æ³• infoå­—å…¸ä¸­æ˜¯å…·ä½“ä¿¡æ¯- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary&lt;NSString *,id&gt; *)info;//ImagePickerControllerå–æ¶ˆé€‰æ‹©æ˜¯å›è°ƒçš„æ–¹æ³•- (void)imagePickerControllerDidCancel:(UIImagePickerController *)picker; ä¸Šé¢æ–¹æ³•ä¸­çš„ç¼–è¾‘å­—å…¸ä¸ä¿¡æ¯å­—å…¸ä¸­ï¼Œçº¦å®šå¥½äº†ä¸€äº›é”®å€¼å¯¹ï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡ç›¸åº”çš„é”®è·å–éœ€è¦çš„ä¿¡æ¯ï¼Œè§„åˆ™å¦‚ä¸‹ï¼š 12345678910111213141516//è¿™ä¸ªé”®å¯¹åº”NSStringç±»å‹çš„å€¼ æ„ä¹‰ä¸ºåª’ä½“æ–‡ä»¶çš„æ ¼å¼UIKIT_EXTERN NSString *const UIImagePickerControllerMediaType;//è¿™ä¸ªé”®å¯¹åº”UIImageç±»å‹çš„å€¼ æ„ä¹‰ä¸ºè·å–çš„åŸå§‹å›¾ç‰‡UIKIT_EXTERN NSString *const UIImagePickerControllerOriginalImage;//è¿™ä¸ªä»¶å¯¹åº”UIIImageç±»å‹çš„å€¼ æ„ä¹‰ä¸ºè·å–ç¼–è¾‘åçš„å›¾ç‰‡UIKIT_EXTERN NSString *const UIImagePickerControllerEditedImage;//è¿™ä¸ªé”®å¯¹åº”ä¸€ä¸ªNSValueå€¼ å¯ä»¥è½¬ä¸ºCGRectç±»å‹ æ„ä¹‰ä¸ºç¼–è¾‘çš„å›¾ç‰‡èŒƒå›´UIKIT_EXTERN NSString *const UIImagePickerControllerCropRect;//è¿™ä¸ªé”®å¯¹åº”åª’ä½“æ–‡ä»¶çš„URLUIKIT_EXTERN NSString *const UIImagePickerControllerMediaURL;//è¿™ä¸ªé”®å¯¹åº”å›¾åº“ä¸­çš„URLUIKIT_EXTERN NSString *const UIImagePickerControllerReferenceURL;//è¿™ä¸ªé”®å¯¹åº”ä¸€ä¸ªNSDictionary é‡Œé¢å­˜æ”¾åª’ä½“æ•°æ®UIKIT_EXTERN NSString *const UIImagePickerControllerMediaMetadata;//ç°åœºå›¾ç‰‡æ•°æ® ç›¸æœºæ•æ‰å›¾ç‰‡æ—¶ä¼šè®°å½•å£°éŸ³UIKIT_EXTERN NSString *const UIImagePickerControllerLivePhoto; å››ã€å¯¹æ•è·çš„å›¾ç‰‡ä¸è§†é¢‘è¿›è¡ŒæŒä¹…åŒ–ç³»ç»Ÿä¹Ÿæä¾›äº†å¯¹ç›¸æœºç…§ç‰‡å’Œè§†é¢‘è¿›è¡Œå­˜å‚¨çš„æ–¹å¼ï¼Œåˆ—ä¸¾å¦‚ä¸‹ï¼š 12345//å°†å›¾ç‰‡æ•°æ®å­˜å‚¨åˆ°ç›¸å†Œvoid UIImageWriteToSavedPhotosAlbum(UIImage *image, __nullable id completionTarget, __nullable SEL completionSelector, void * __nullable contextInfo);//å°†è§†é¢‘ä¿å­˜åˆ°ç›¸å†ŒBOOL UIVideoAtPathIsCompatibleWithSavedPhotosAlbum(NSString *videoPath);void UISaveVideoAtPathToSavedPhotosAlbum(NSString *videoPath, __nullable id completionTarget, __nullable SEL completionSelector, void * __nullable contextInfo); ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"iOSç¬¬ä¸‰æ–¹æ–‡ä»¶å‹ç¼©æ¡†æ¶â€”â€”Godzippa","slug":"237iOSç¬¬ä¸‰æ–¹æ–‡ä»¶å‹ç¼©æ¡†æ¶â€”â€”Godzippa","date":"2016-07-10T16:00:00.000Z","updated":"2021-07-09T03:07:31.040Z","comments":true,"path":"2016/07/11/237iOSç¬¬ä¸‰æ–¹æ–‡ä»¶å‹ç¼©æ¡†æ¶â€”â€”Godzippa/","link":"","permalink":"http://huishao.cc/2016/07/11/237iOSç¬¬ä¸‰æ–¹æ–‡ä»¶å‹ç¼©æ¡†æ¶â€”â€”Godzippa/","excerpt":"","text":"iOSç¬¬ä¸‰æ–¹æ–‡ä»¶å‹ç¼©æ¡†æ¶â€”â€”GodzippaGodzippaæ˜¯iOSå¼€å‘ä¸­å¸¸ç”¨çš„ä¸€ä¸ªç¬¬ä¸‰æ–¹æ•°æ®å‹ç¼©æ¡†æ¶ï¼Œå…¶é‡‡ç”¨ç±»åˆ«çš„æ–¹å¼ï¼Œä¸ºNSDataç±»ä¸NSFileManagerç±»æä¾›äº†å‹ç¼©å’Œè§£å‹ç¼©æ•°æ®çš„æ–¹æ³•ã€‚ Godzippaçš„githubåœ°å€å¦‚ä¸‹ï¼š[https://github.com/mattt/Godzippa](https://github.com/mattt/Godzippa)ã€‚ NSDataç±»åˆ«ä¸­æä¾›çš„æ–¹æ³•å¦‚ä¸‹ï¼š 123456789101112//è¿›è¡Œæ•°æ®å‹ç¼©æ“ä½œ- (NSData *)dataByGZipCompressingWithError:(NSError * __autoreleasing *)error;//è¿›è¡Œæ•°æ®å‹ç¼©æ“ä½œï¼Œæ”¯æŒé…ç½®ç¼“å­˜åŒºå¤§å°ï¼Œå‹ç¼©æ¯”ç­‰å‚æ•°- (NSData *)dataByGZipCompressingAtLevel:(int)level windowSize:(int)windowBits memoryLevel:(int)memLevel strategy:(int)strategy error:(NSError * __autoreleasing *)error;//è¿›è¡Œæ•°æ®è§£å‹ç¼©æ“ä½œ- (NSData *)dataByGZipDecompressingDataWithError:(NSError * __autoreleasing *)error;- (NSData *)dataByGZipDecompressingDataWithWindowSize:(int)windowBits error:(NSError * __autoreleasing *)error; NSFileManagerç±»åˆ«ä¸­æä¾›çš„æ–¹æ³•å¦‚ä¸‹ï¼š 12345678910111213//å‹ç¼©æ–‡ä»¶å¹¶å†™å…¥ç£ç›˜ è¿”å›å€¼ç¡®å®šå‹ç¼©æ“ä½œæ˜¯å¦æˆåŠŸ- (BOOL)GZipCompressFile:(NSURL *)sourceFile writingContentsToFile:(NSURL *)destinationFile error:(NSError * __autoreleasing *)error;//è¿›è¡Œæ–‡ä»¶å‹ç¼©ï¼Œæ”¯æŒé…ç½®å‹ç¼©çº§åˆ«- (BOOL)GZipCompressFile:(NSURL *)sourceFile writingContentsToFile:(NSURL *)destinationFile atLevel:(int)level error:(NSError *__autoreleasing *)error;//è¿›è¡Œæ–‡ä»¶çš„è§£å‹ç¼©- (BOOL)GZipDecompressFile:(NSURL *)sourceFile writingContentsToFile:(NSURL *)destinationFile error:(NSError * __autoreleasing *)error; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSç¬¬ä¸‰æ–¹åº“","slug":"iOSç¬¬ä¸‰æ–¹åº“","permalink":"http://huishao.cc/categories/iOSç¬¬ä¸‰æ–¹åº“/"}],"tags":[],"keywords":[{"name":"iOSç¬¬ä¸‰æ–¹åº“","slug":"iOSç¬¬ä¸‰æ–¹åº“","permalink":"http://huishao.cc/categories/iOSç¬¬ä¸‰æ–¹åº“/"}]},{"title":"iOSç¬¬ä¸‰æ–¹ç½‘ç»œè¯Šæ–­åº“â€”â€”LDNetDiagnoService","slug":"236iOSç¬¬ä¸‰æ–¹ç½‘ç»œè¯Šæ–­åº“â€”â€”LDNetDiagnoService","date":"2016-07-07T16:00:00.000Z","updated":"2021-07-09T03:06:49.639Z","comments":true,"path":"2016/07/08/236iOSç¬¬ä¸‰æ–¹ç½‘ç»œè¯Šæ–­åº“â€”â€”LDNetDiagnoService/","link":"","permalink":"http://huishao.cc/2016/07/08/236iOSç¬¬ä¸‰æ–¹ç½‘ç»œè¯Šæ–­åº“â€”â€”LDNetDiagnoService/","excerpt":"","text":"iOSç¬¬ä¸‰æ–¹ç½‘ç»œè¯Šæ–­åº“â€”â€”LDNetDiagnoService_IOSLDNetDiagnoService\\_IOSæ˜¯ä¸€ä¸ªå¼€æºçš„ç¬¬ä¸‰æ–¹ç½‘ç»œè¯Šæ–­æ¡†æ¶ï¼Œå®ƒé€šè¿‡pingä¸tracerouteåŸç†æ¥å¯¹æŒ‡å®šåŸŸåè¿›è¡Œç½‘ç»œè¯Šæ–­ã€‚å¹¶ä¸”è¿™ä¸ªåº“ä¸€ç›´åœ¨è·Ÿè¿›ç»´æŠ¤ï¼Œè¿›è¡ŒIPV\\_6-Onlyçš„æ”¯æŒã€‚ LDNetDiagnoService_IOSçš„gitåœ°å€å¦‚ä¸‹ï¼š[https://github.com/Lede-Inc/LDNetDiagnoService_IOS](https://github.com/Lede-Inc/LDNetDiagnoService_IOS)ã€‚ LDNetDiagnoServiceçš„ä½¿ç”¨ååˆ†ç®€å•ï¼Œåªéœ€è¦3æ­¥å³å¯å®Œæˆã€‚ é¦–å…ˆéœ€è¦å¯¹æœåŠ¡å¼•æ“è¿›è¡Œåˆå§‹åŒ–ï¼Œä»£ç å¦‚ä¸‹ï¼š 12345678910111213//è¿›è¡ŒæœåŠ¡å¼•æ“çš„åˆå§‹åŒ– å…¶ä¸­AppCodeï¼ŒAppNameï¼ŒUserIDä¸dormainå‚æ•°å¿…é¡»å¡«å†™ï¼Œå…¶ä»–å‚æ•°ä¼šè‡ªåŠ¨ç”Ÿæˆservice = [[LDNetDiagnoService alloc]initWithAppCode:@\"appç¼–ç \" appName:@\"demo\" appVersion:nil userID:@\"UserID\" deviceID:nil dormain:@\"www.baidu.com\" carrierName:nil ISOCountryCode:nil MobileCountryCode:nil MobileNetCode:nil];//è®¾ç½®ä»£ç†service.delegate = self; åˆå§‹åŒ–å®ŒæˆæœåŠ¡å¼•æ“åï¼Œéœ€è¦å¼€å¯æ£€æµ‹ï¼Œå¦‚ä¸‹ï¼š 1234//å¼€å§‹è¯Šæ–­ç½‘ç»œ- (void)startNetDiagnosis;//åœæ­¢è¯Šæ–­ç½‘ç»œ- (void)stopNetDialogsis; å¼€å§‹è¯Šæ–­ç½‘ç»œåï¼Œä¼šé€šè¿‡ä»£ç†æ–¹æ³•å°†è¯Šæ–­ä¿¡æ¯å›è°ƒç»™å¼€å‘è€…ï¼Œä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425/** * å‘Šè¯‰è°ƒç”¨è€…è¯Šæ–­å¼€å§‹ */- (void)netDiagnosisDidStarted&#123; NSLog(@\"å¼€å§‹è¿›è¡Œè¯Šæ–­~~\");&#125;/** * é€æ­¥è¿”å›ç›‘æ§ä¿¡æ¯ï¼Œ * å¦‚æœéœ€è¦å®æ—¶æ˜¾ç¤ºè¯Šæ–­æ•°æ®ï¼Œå®ç°æ­¤æ¥å£æ–¹æ³• */- (void)netDiagnosisStepInfo:(NSString *)stepInfo&#123; NSLog(@\"æ­£åœ¨è¯Šæ–­ï¼š%@\",stepInfo);&#125;/** * å› ä¸ºç›‘æ§è¿‡ç¨‹æ˜¯ä¸€ä¸ªå¼‚æ­¥è¿‡ç¨‹ï¼Œå½“ç›‘æ§ç»“æŸåå‘Šè¯‰è°ƒç”¨è€…ï¼› * åœ¨ç›‘æ§ç»“æŸçš„æ—¶å€™ï¼Œå¯¹ç›‘æ§å­—ç¬¦ä¸²è¿›è¡Œå¤„ç† */- (void)netDiagnosisDidEnd:(NSString *)allLogInfo&#123; NSLog(@\"è¯Šæ–­ç»“æŸ\"); NSLog(@\"%@\",allLogInfo);&#125; Xcodeè°ƒè¯•åŒºä¿¡æ¯å¦‚ä¸‹ï¼š ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSç¬¬ä¸‰æ–¹åº“","slug":"iOSç¬¬ä¸‰æ–¹åº“","permalink":"http://huishao.cc/categories/iOSç¬¬ä¸‰æ–¹åº“/"}],"tags":[],"keywords":[{"name":"iOSç¬¬ä¸‰æ–¹åº“","slug":"iOSç¬¬ä¸‰æ–¹åº“","permalink":"http://huishao.cc/categories/iOSç¬¬ä¸‰æ–¹åº“/"}]},{"title":"iOSç¬¬ä¸‰æ–¹æ˜Ÿçº§è§†å›¾æ§ä»¶â€”â€”HCSStarRatingView","slug":"235iOSç¬¬ä¸‰æ–¹æ˜Ÿçº§è§†å›¾æ§ä»¶â€”â€”HCSStarRatingView","date":"2016-07-05T16:00:00.000Z","updated":"2021-07-09T03:06:06.368Z","comments":true,"path":"2016/07/06/235iOSç¬¬ä¸‰æ–¹æ˜Ÿçº§è§†å›¾æ§ä»¶â€”â€”HCSStarRatingView/","link":"","permalink":"http://huishao.cc/2016/07/06/235iOSç¬¬ä¸‰æ–¹æ˜Ÿçº§è§†å›¾æ§ä»¶â€”â€”HCSStarRatingView/","excerpt":"","text":"iOSç¬¬ä¸‰æ–¹æ˜Ÿçº§è§†å›¾æ§ä»¶â€”â€”HCSStarRatingViewHCStarRatingViewæ˜¯ä¸€æ¬¾ååˆ†å°å·§çš„æ˜Ÿçº§è§†å›¾æ§ä»¶ï¼Œå…¶é€šè¿‡åŸç”Ÿç”»å›¾çš„æ–¹å¼æ¥æ¸²æŸ“æ˜Ÿçº§è§†å›¾é¡µé¢ï¼ŒåŒæ—¶ï¼Œå…¶ä¹Ÿæ”¯æŒå¼€å‘è€…å¯¹æ˜Ÿçº§å›¾ç‰‡çš„è‡ªå®šä¹‰æ“ä½œã€‚ HCStarRatingViewçš„gitåœ°å€å¦‚ä¸‹ï¼š[https://github.com/hsousa/HCSStarRatingView](https://github.com/hsousa/HCSStarRatingView)ã€‚ HCStarRatingViewçš„ä½¿ç”¨ååˆ†ç®€å•ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234HCSStarRatingView * starView = [[HCSStarRatingView alloc]initWithFrame:CGRectMake(20, 100, 280, 50)];starView.tintColor = [UIColor redColor];[starView addTarget:self action:@selector(didChange:) forControlEvents:UIControlEventValueChanged];[self.view addSubview:starView]; æ•ˆæœå¦‚ä¸‹å›¾ï¼š å¼€å‘è€…ä¹Ÿå¯¹å…¶è¿›è¡Œä¸€äº›è‡ªå®šä¹‰çš„è®¾ç½®ï¼Œåˆ—ä¸¾å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425//è®¾ç½®æœ€å¤§å€¼@property (nonatomic) IBInspectable NSUInteger maximumValue;//è®¾ç½®æœ€å°å€¼@property (nonatomic) IBInspectable CGFloat minimumValue;//æ˜Ÿçº§è§†å›¾å½“å‰å€¼@property (nonatomic) IBInspectable CGFloat value;//æ˜Ÿæ˜Ÿé—´é—´è·@property (nonatomic) IBInspectable CGFloat spacing;//æ˜¯å¦å…è®¸é€‰æ‹©åŠæ˜Ÿ@property (nonatomic) IBInspectable BOOL allowsHalfStars;//æ˜¯å¦æ˜¯å¦å…è®¸ç²¾ç¡®é€‰æ‹© å¯ä»¥æ ¹æ®é€‰æ‹©ä½ç½®è¿›è¡Œç²¾ç¡®@property (nonatomic) IBInspectable BOOL accurateHalfStars;//æ˜¯å¦è¿ç»­è°ƒç”¨å›è°ƒæ–¹æ³• å¦‚æœè®¾ç½®ä¸ºYES åˆ™åœ¨æ‰‹æŒ‡æ‹–åŠ¨æ—¶ ä¼šæŒç»­è°ƒç”¨å›è°ƒæ–¹æ³• å¦‚æœè®¾ç½®ä¸ºNOï¼Œåˆ™åªæœ‰æ‹–åŠ¨ç»“æŸåæ‰è°ƒç”¨å›è°ƒ@property (nonatomic) IBInspectable BOOL continuous;//æ˜¯å¦å…è®¸æˆä¸ºç¬¬ä¸€å“åº”@property (nonatomic) BOOL shouldBecomeFirstResponder;//æ·»åŠ æ‰‹åŠ¿æ—¶ä½¿ç”¨@property (nonatomic, copy) HCSStarRatingViewShouldBeginGestureRecognizerBlock shouldBeginGestureRecognizerBlock;//è‡ªå®šä¹‰æ˜Ÿæ˜Ÿè§†å›¾UI//è®¾ç½®ç©ºæ˜Ÿçš„å›¾ç‰‡@property (nonatomic, strong) IBInspectable UIImage *emptyStarImage;//è®¾ç½®åŠæ˜Ÿçš„å›¾ç‰‡@property (nonatomic, strong) IBInspectable UIImage *halfStarImage;//è®¾ç½®å…¨æ˜Ÿæ—¶çš„å›¾ç‰‡@property (nonatomic, strong) IBInspectable UIImage *filledStarImage; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSç¬¬ä¸‰æ–¹åº“","slug":"iOSç¬¬ä¸‰æ–¹åº“","permalink":"http://huishao.cc/categories/iOSç¬¬ä¸‰æ–¹åº“/"}],"tags":[],"keywords":[{"name":"iOSç¬¬ä¸‰æ–¹åº“","slug":"iOSç¬¬ä¸‰æ–¹åº“","permalink":"http://huishao.cc/categories/iOSç¬¬ä¸‰æ–¹åº“/"}]},{"title":"iOSç¬¬ä¸‰æ–¹å·¦å¯¹é½å¸ƒå±€ç±»â€”â€”UICollectionViewLeftAlignedLayout","slug":"234iOSç¬¬ä¸‰æ–¹å·¦å¯¹é½å¸ƒå±€ç±»â€”â€”UICollectionViewLeftAlignedLayout","date":"2016-07-04T16:00:00.000Z","updated":"2021-07-09T03:05:19.642Z","comments":true,"path":"2016/07/05/234iOSç¬¬ä¸‰æ–¹å·¦å¯¹é½å¸ƒå±€ç±»â€”â€”UICollectionViewLeftAlignedLayout/","link":"","permalink":"http://huishao.cc/2016/07/05/234iOSç¬¬ä¸‰æ–¹å·¦å¯¹é½å¸ƒå±€ç±»â€”â€”UICollectionViewLeftAlignedLayout/","excerpt":"","text":"iOSç¬¬ä¸‰æ–¹å·¦å¯¹é½å¸ƒå±€ç±»â€”â€”UICollectionViewLeftAlignedLayoutUICollectionViewLeftAlignedLayoutæ˜¯ç¬¬ä¸‰æ–¹çš„å·¦å¯¹é½å¸ƒå±€ç®¡ç†ç±»ï¼Œå…¶ç»§æ‰¿è‡ªUICollectionViewFlowLayoutï¼Œä½¿ç”¨å…¶å¯ä»¥æ–¹ä¾¿çš„è¿›è¡Œå·¦å¯¹é½çš„ç€‘å¸ƒæµç•Œé¢å¸ƒå±€ã€‚ UICollectionViewLeftAlignedLayoutçš„gitåœ°å€å¦‚ä¸‹ï¼š[https://github.com/mokagio/UICollectionViewLeftAlignedLayout](https://github.com/mokagio/UICollectionViewLeftAlignedLayout)ã€‚ ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334#import &lt;UICollectionViewLeftAlignedLayout.h&gt;@interface ViewController ()&lt;UICollectionViewDataSource,UICollectionViewDelegateFlowLayout&gt;@property(nonatomic,strong)UICollectionView * collectionView;@end@implementation ViewController- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view, typically from a nib. UICollectionViewLeftAlignedLayout* layout = [[UICollectionViewLeftAlignedLayout alloc]init]; self.collectionView = [[UICollectionView alloc]initWithFrame:self.view.frame collectionViewLayout:layout]; self.collectionView.dataSource = self; self.collectionView.delegate=self; [self.collectionView registerClass:[UICollectionViewCell class] forCellWithReuseIdentifier:@\"cellID\"]; [self.view addSubview:self.collectionView];&#125;-(CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout *)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath&#123; return CGSizeMake(arc4random()%100+50, 100);&#125;-(NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView&#123; return 1;&#125;-(NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section&#123; return 10;&#125;-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath&#123; UICollectionViewCell * cell = [collectionView dequeueReusableCellWithReuseIdentifier:@\"cellID\" forIndexPath:indexPath]; cell.backgroundColor = [UIColor colorWithRed:arc4random()%255/255.0 green:arc4random()%255/255.0 blue:arc4random()%255/255.0 alpha:1]; return cell;&#125;@end æ•ˆæœå¦‚ä¸‹ï¼š ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSç¬¬ä¸‰æ–¹åº“","slug":"iOSç¬¬ä¸‰æ–¹åº“","permalink":"http://huishao.cc/categories/iOSç¬¬ä¸‰æ–¹åº“/"}],"tags":[],"keywords":[{"name":"iOSç¬¬ä¸‰æ–¹åº“","slug":"iOSç¬¬ä¸‰æ–¹åº“","permalink":"http://huishao.cc/categories/iOSç¬¬ä¸‰æ–¹åº“/"}]},{"title":"iOSä¸­è¡¨å•è§†å›¾ç¬¬ä¸‰æ–¹æ§ä»¶â€”â€”FXForms","slug":"233iOSä¸­è¡¨å•è§†å›¾ç¬¬ä¸‰æ–¹æ§ä»¶â€”â€”FXForms","date":"2016-07-03T16:00:00.000Z","updated":"2021-07-09T03:04:33.884Z","comments":true,"path":"2016/07/04/233iOSä¸­è¡¨å•è§†å›¾ç¬¬ä¸‰æ–¹æ§ä»¶â€”â€”FXForms/","link":"","permalink":"http://huishao.cc/2016/07/04/233iOSä¸­è¡¨å•è§†å›¾ç¬¬ä¸‰æ–¹æ§ä»¶â€”â€”FXForms/","excerpt":"","text":"iOSä¸­è¡¨å•è§†å›¾ç¬¬ä¸‰æ–¹æ§ä»¶â€”â€”FXFormsä¸€ã€å¼•è¨€è¡¨å•è§†å›¾æ˜¯ç§»åŠ¨å¼€å‘ä¸­ååˆ†å¸¸ç”¨çš„ä¸€ç§UIæ–¹å¼ã€‚åœ¨iOSå¼€å‘ä¸­ï¼Œç³»ç»Ÿçš„UITableViewå¯ä»¥ç”¨æ¥åˆ›å»ºè¡¨å•è§†å›¾ï¼Œå…¶ç•Œé¢çš„æ¸²æŸ“ä¸é€»è¾‘çš„å¤„ç†éœ€è¦å¼€å‘è€…å®ç°è®¸å¤šä»£ç†æ–¹æ³•ã€‚FXFormsæ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„è¡¨å•åˆ›å»ºå·¥å…·ï¼Œå…¶é€šè¿‡é…ç½®çš„æ–¹å¼æ¥è¿›è¡Œè¡¨å•ç•Œé¢çš„åˆ›å»ºï¼Œå¹¶ä¸”å…¶ä¸­ä¸ºå¼€å‘è€…å°è£…å¥½äº†å„ç§å¸¸ç”¨ç±»å‹çš„è¡¨å•cellã€‚ FXFormsçš„githubåœ°å€å¦‚ä¸‹ï¼š[https://github.com/nicklockwood/FXForms](https://github.com/nicklockwood/FXForms)ã€‚ äºŒã€ä½¿ç”¨FXFormsè¿›è¡Œè¡¨å•è§†å›¾çš„åˆ›å»ºFXFormsæ¡†æ¶ä¸­æä¾›äº†ä¸€ä¸ªFXFormViewControllerè§†å›¾æ§åˆ¶å™¨ç±»ï¼Œå¼€å‘è€…å¯ä»¥ç›´æ¥ç¼–å†™ç»§æ‰¿äºè¿™ä¸ªç±»çš„ViewControlleræ¥ä¾¿æ·çš„åˆ›å»ºè¡¨å•ç•Œé¢ï¼Œé¦–å…ˆï¼ŒFXFormsæ˜¯é€šè¿‡èŠ‚ç‚¹é…ç½®çš„æ–¹å¼æ¥è¿›è¡Œè¡¨å•çš„åˆ›å»ºçš„ï¼Œè¡¨å•ä¸­æ¯ä¸€ä¸ªcelléƒ½æ˜¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¿™ä¸ªèŠ‚ç‚¹å¯ä»¥æ˜¯ç®€å•çš„å•èŠ‚ç‚¹ï¼Œä¹Ÿå¯ä»¥æ˜¯çˆ¶èŠ‚ç‚¹ï¼Œç‚¹å‡»çˆ¶èŠ‚ç‚¹åï¼Œä¼šè·³è½¬æ–°çš„è§†å›¾æ§åˆ¶å™¨ï¼Œçˆ¶èŠ‚ç‚¹ä¸­å¯ä»¥è¿›è¡Œå±‚å±‚åµŒå¥—ã€‚å¯¹äºæ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¼€å‘è€…å¯ä»¥è®¾ç½®ä¸€ä¸ªèŠ‚ç‚¹ç±»å‹ï¼Œä¸åŒçš„èŠ‚ç‚¹ç±»å‹å°†å±•ç°ä¸åŒçš„UIï¼Œå®ç°ä¸åŒçš„åŠŸèƒ½ã€‚ FXFormsä¸­çš„èŠ‚ç‚¹ç”±FXFormåè®®æ¥è¿›è¡Œé…ç½®ï¼Œåˆ›å»ºä¸€ä¸ªç®€å•çš„è¡¨å•è§†å›¾ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415161718//è§†å›¾æ§åˆ¶å™¨ç±»éƒ¨åˆ†@interface ViewController : FXFormViewController@end@implementation ViewController- (void)viewDidLoad &#123; [super viewDidLoad]; //èŠ‚ç‚¹ä¿¡æ¯è®¾ç½® self.formController.form = [MyForm new];&#125;@end//èŠ‚ç‚¹ç±»é…ç½®@interface MyForm : NSObject&lt;FXForm&gt;@property(nonatomic,strong)NSString * email;@property(nonatomic,strong)NSString * password;@property(nonatomic,assign)BOOL rememberMe;@end@implementation MyForm@end ä¸Šé¢çš„MyFormç±»ä¸­åªå®šä¹‰äº†ä¸€äº›å±æ€§ï¼Œå¹¶æ²¡æœ‰è¿›è¡Œä»»ä½•æ–¹æ³•çš„å®ç°ï¼ŒFXFormsæ¡†æ¶ä¸­å®ç°äº†è¿™æ ·çš„åŠŸèƒ½ï¼Œå¦‚æœå¼€å‘è€…ä¸è¿›è¡ŒèŠ‚ç‚¹ä¿¡æ¯çš„é…ç½®ï¼Œåˆ™FXFormsä¼šè‡ªåŠ¨æ ¹æ®èŠ‚ç‚¹é…ç½®ç±»ä¸­æ‰€æœ‰çš„å±æ€§æ¥æ¨æ–­èŠ‚ç‚¹çš„ç±»å‹ï¼Œå¦‚ä¸Šæ‰€ç¤ºï¼ŒNSStringç±»å‹çš„å±æ€§ä¼šè¢«è‡ªåŠ¨æ¨æ–­æˆå¸¦æ–‡æœ¬æ¡†çš„cellï¼ŒBOOLç±»å‹çš„å±æ€§ä¼šè¢«è‡ªåŠ¨æ¨æ–­æˆå¸¦UISwitchæ§ä»¶çš„cellã€‚è¿è¡Œæ•ˆæœå¦‚ä¸‹ï¼š å¼€å‘è€…å¯ä»¥ä¸ºèŠ‚ç‚¹é…ç½®ç±»ä¸­çš„æ¯ä¸€ä¸ªå±æ€§æä¾›ä¸€ä¸ªçº¦å®šå¥½çš„æ–¹æ³•ï¼Œåœ¨æ–¹æ³•ä¸­å¯¹æ­¤å±æ€§å¯¹åº”çš„èŠ‚ç‚¹è¿›è¡Œé…ç½®ï¼Œè¿™ä¸ªçº¦å®šå¥½çš„æ–¹æ³•åéœ€è¦ä¸å±æ€§å¯¹åº”ï¼Œå…¶æ ¼å¼æ˜¯ä½¿ç”¨å±æ€§ååŠ ä¸ŠFieldï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516@implementation MyForm//æ–¹æ³•åå¿…é¡»æ˜¯ å±æ€§å+Field è¿”å›ä¸ºNSDictionaryå­—å…¸ å­—å…¸ä¸­ä¸ºèŠ‚ç‚¹çš„é…ç½®ä¿¡æ¯-(NSDictionary *)emailField&#123; //é…ç½®èŠ‚ç‚¹çš„ç±»å‹ ç‚¹å‡»å å°†å¼¹å‡ºæ—¶é—´é€‰æ‹©æ§ä»¶ return @&#123;FXFormFieldType:FXFormFieldTypeDate&#125;;&#125;-(NSDictionary *)passwdField&#123; //è®¾ç½®èŠ‚ç‚¹åç§° return @&#123;FXFormFieldTitle:@\"åç§°\"&#125;;&#125;-(NSDictionary *)rememberMeField&#123; //è®¾ç½®èŠ‚ç‚¹å¤´è§†å›¾åç§° return @&#123;FXFormFieldHeader:@\"é…ç½®\"&#125;;&#125;@end è¿è¡Œå·¥ç¨‹ï¼Œæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š è¿”å›çš„é…ç½®å­—å…¸ä¸­å¯ä»¥ç”¨æ¥é…ç½®çš„å±æ€§å®šä¹‰å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334//é…ç½®æ­¤èŠ‚ç‚¹çš„æ ‡è¯†ç¬¦UIKIT_EXTERN NSString *const FXFormFieldKey;//é…ç½®æ­¤èŠ‚ç‚¹çš„ç±»å‹UIKIT_EXTERN NSString *const FXFormFieldType; //æŒ‡å®šå½“å‰èŠ‚ç‚¹å±æ€§å¯¹åº”çš„ç±» ä¸€èˆ¬ä¸éœ€è®¾ç½®UIKIT_EXTERN NSString *const FXFormFieldClass;//è®¾ç½®å½“å‰èŠ‚ç‚¹å¯¹åº”çš„cellç±»UIKIT_EXTERN NSString *const FXFormFieldCell;//è®¾ç½®å½“å‰èŠ‚ç‚¹æ˜¾ç¤ºçš„åç§°UIKIT_EXTERN NSString *const FXFormFieldTitle;//è®¾ç½®å½“å‰èŠ‚ç‚¹çš„placeHolderUIKIT_EXTERN NSString *const FXFormFieldPlaceholder;//è®¾ç½®èŠ‚ç‚¹ä¸Šé»˜è®¤æ˜¾ç¤ºçš„æ–‡å­—UIKIT_EXTERN NSString *const FXFormFieldDefaultValue; //è®¾ç½®é€‰é¡¹æ•°ç»„ è¿™ä¸ªå±æ€§çš„è®¾ç½® å¿…é¡»é…åˆç‰¹å®šé…å‹çš„cellä½¿ç”¨UIKIT_EXTERN NSString *const FXFormFieldOptions;//å¦‚æœæŸä¸ªèŠ‚ç‚¹æ˜¯ä¸€ä¸ªæ•°ç»„ åˆ™FXFormFieldTemplateå¯ä»¥ç”¨æ¥è®¾ç½®æ•°ç»„ä¸­èŠ‚ç‚¹çš„å±æ€§UIKIT_EXTERN NSString *const FXFormFieldTemplate;//è¿›è¡Œç±»å‹è½¬æ¢UIKIT_EXTERN NSString *const FXFormFieldValueTransformer;//è®¾ç½®èŠ‚ç‚¹çš„è§¦å‘æ–¹æ³•UIKIT_EXTERN NSString *const FXFormFieldAction;//è¿æ¥StoryboardSegueUIKIT_EXTERN NSString *const FXFormFieldSegue;//è®¾ç½®èŠ‚ç‚¹å¤´éƒ¨å†…å®¹UIKIT_EXTERN NSString *const FXFormFieldHeader;//è®¾ç½®èŠ‚ç‚¹å°¾éƒ¨å†…å®¹UIKIT_EXTERN NSString *const FXFormFieldFooter;//è®¾ç½®æ˜¯å¦æ˜¯å†…åµŒèŠ‚ç‚¹ å¯¹äºçˆ¶èŠ‚ç‚¹æˆ–è€…æ•°ç»„ç±»ç•Œå®š è¿™ä¸ªå¦‚æœè®¾ç½®ä¸º@YES åˆ™ä¼šåœ¨å½“å‰ç•Œé¢ä¸­å±•ç¤ºè¡¨å• å¦‚æœè®¾ç½®ä¸º@NOï¼Œåˆ™ä¼šåœ¨æ–°çš„è§†å›¾æ§åˆ¶å™¨ä¸­å±•ç¤ºUIKIT_EXTERN NSString *const FXFormFieldInline;//å¯¹äºæ•°ç»„ç±»å‹çš„èŠ‚ç‚¹ï¼Œè®¾ç½®æ˜¯å¦æ”¯æŒæ’åº è®¾ç½®ä¸º@YESåˆ™ä¸ºæ”¯æŒæ’åºUIKIT_EXTERN NSString *const FXFormFieldSortable;//è®¾ç½®é€‰ä¸­cellåè·³è½¬çš„ViewControllerUIKIT_EXTERN NSString *const FXFormFieldViewController; å…³äºè®¾ç½®èŠ‚ç‚¹çš„ç±»å‹ï¼ŒFXFormFieldTypeå¯ä»¥è®¾ç½®çš„å€¼æœ‰å¦‚ä¸‹å‡ ç§ï¼š 123456789101112131415161718192021222324252627282930313233343536//é»˜è®¤çš„èŠ‚ç‚¹ç±»å‹UIKIT_EXTERN NSString *const FXFormFieldTypeDefault;//æ–‡æœ¬æ ‡ç­¾èŠ‚ç‚¹ç±»å‹UIKIT_EXTERN NSString *const FXFormFieldTypeLabel;//è¾“å…¥æ¡†èŠ‚ç‚¹ç±»å‹UIKIT_EXTERN NSString *const FXFormFieldTypeText;//é•¿æ–‡æœ¬è¾“å…¥èŠ‚ç‚¹ç±»å‹UIKIT_EXTERN NSString *const FXFormFieldTypeLongText; //URLèŠ‚ç‚¹ç±»å‹UIKIT_EXTERN NSString *const FXFormFieldTypeURL;//EmailèŠ‚ç‚¹ç±»å‹UIKIT_EXTERN NSString *const FXFormFieldTypeEmail; //å·ç èŠ‚ç‚¹ç±»å‹UIKIT_EXTERN NSString *const FXFormFieldTypePhone; //å¯†ç æ¡†èŠ‚ç‚¹ç±»å‹UIKIT_EXTERN NSString *const FXFormFieldTypePassword;//æ•°å­—èŠ‚ç‚¹ç±»å‹UIKIT_EXTERN NSString *const FXFormFieldTypeNumber;//åªå…è®¸è¾“å…¥æ•´æ•°çš„èŠ‚ç‚¹ç±»å‹UIKIT_EXTERN NSString *const FXFormFieldTypeInteger;//æ— ç¬¦å·æ•´æ•°èŠ‚ç‚¹ç±»å‹UIKIT_EXTERN NSString *const FXFormFieldTypeUnsigned; //æµ®ç‚¹èŠ‚ç‚¹ç±»å‹UIKIT_EXTERN NSString *const FXFormFieldTypeFloat;//BOOLèŠ‚ç‚¹ç±»å‹ é»˜è®¤å¸¦UISwitchæ§ä»¶UIKIT_EXTERN NSString *const FXFormFieldTypeBoolean;//é€‰é¡¹èŠ‚ç‚¹ç±»å‹ é»˜è®¤å¸¦å¯¹å·ç¬¦å·UIKIT_EXTERN NSString *const FXFormFieldTypeOption;//æ—¥æœŸèŠ‚ç‚¹ç±»å‹UIKIT_EXTERN NSString *const FXFormFieldTypeDate;//æ—¶é—´èŠ‚ç‚¹ç±»å‹UIKIT_EXTERN NSString *const FXFormFieldTypeTime;//æ—¥æœŸæ—¶é—´èŠ‚ç‚¹ç±»å‹UIKIT_EXTERN NSString *const FXFormFieldTypeDateTime;//å›¾ç‰‡èŠ‚ç‚¹ç±»å‹UIKIT_EXTERN NSString *const FXFormFieldTypeImage; FXFormsä¸­ä¹Ÿæä¾›äº†è®¸å¤šå°è£…å¥½çš„cellï¼Œåˆ—ä¸¾å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849//é»˜è®¤çš„cell@interface FXFormDefaultCell : FXFormBaseCell@end//å¸¦æ–‡æœ¬è¾“å…¥æ¡†çš„cell@interface FXFormTextFieldCell : FXFormBaseCell@property (nonatomic, readonly) UITextField *textField;@end//å¸¦æ–‡æœ¬è¾“å…¥è§†å›¾çš„cell@interface FXFormTextViewCell : FXFormBaseCell@property (nonatomic, readonly) UITextView *textView;@end//å¸¦UISwitchæ§ä»¶çš„cell@interface FXFormSwitchCell : FXFormBaseCell@property (nonatomic, readonly) UISwitch *switchControl;@end//å¸¦UIStepperæ§ä»¶çš„cell@interface FXFormStepperCell : FXFormBaseCell@property (nonatomic, readonly) UIStepper *stepper;@end//å¸¦UISlideræ§ä»¶çš„cell@interface FXFormSliderCell : FXFormBaseCell@property (nonatomic, readonly) UISlider *slider;@end//å¸¦æ—¥æœŸé€‰æ‹©æ§ä»¶çš„cell@interface FXFormDatePickerCell : FXFormBaseCell@property (nonatomic, readonly) UIDatePicker *datePicker;@end//å¸¦å›¾ç‰‡é€‰æ‹©æ§ä»¶çš„cell@interface FXFormImagePickerCell : FXFormBaseCell@property (nonatomic, readonly) UIImageView *imagePickerView;@property (nonatomic, readonly) UIImagePickerController *imagePickerController;@end//å¸¦è‡ªå®šä¹‰PickerViewçš„cell@interface FXFormOptionPickerCell : FXFormBaseCell@property (nonatomic, readonly) UIPickerView *pickerView;@end//å¸¦UISegmentedControlæ§ä»¶çš„cell@interface FXFormOptionSegmentsCell : FXFormBaseCell@property (nonatomic, readonly) UISegmentedControl *segmentedControl;@end è¿˜æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œå¦‚æœæ˜¯ç»§æ‰¿ä¸FXFormViewControllerçš„è§†å›¾æ§åˆ¶å™¨ï¼Œå…¶èŠ‚ç‚¹è®¾ç½®çš„actionæ–¹æ³•è¦åœ¨è§†å›¾æ§åˆ¶å™¨ä¸­è¿›è¡Œå®ç°ã€‚ ä¸‰ã€é€šè¿‡åè®®æ–¹æ³•æ¥è¿›è¡ŒèŠ‚ç‚¹é…ç½®ä¸Šé¢æ¼”ç¤ºçš„åˆ›å»ºè¡¨æ ¼è§†å›¾çš„æ–¹å¼æ˜¯åœ¨èŠ‚ç‚¹é…ç½®ç±»ä¸­åˆ›å»ºå±æ€§ï¼Œåˆ†åˆ«é…ç½®å±æ€§çš„èŠ‚ç‚¹ä¿¡æ¯æ¥åˆ›å»ºæ¯ä¸€ä¸ªcellï¼Œå¼€å‘è€…ä¹Ÿå¯ä»¥ä¸åˆ›å»ºå±æ€§ï¼Œæˆ–è€…åˆ›å»ºå±æ€§ä½†æ˜¯ä¸ä»¥å±æ€§ä¸ºèŠ‚ç‚¹æ¥è¿›è¡Œcellé…ç½®ï¼Œä½¿ç”¨FXFromåè®®çš„æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥å®ŒæˆèŠ‚ç‚¹çš„åˆ›å»ºå’Œé…ç½®ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516@interface MyForm : NSObject&lt;FXForm&gt;@end@implementation MyForm//åˆ›å»ºä¸é…ç½®èŠ‚ç‚¹- (NSArray *)fields&#123; return @[ //è¿™é‡Œé¢é…ç½®å­—å…¸çš„æ–¹æ³•å’Œå±æ€§å­—å…¸çš„é…ç½®æ–¹æ³•ä¸€ä¸€è‡´ @&#123;FXFormFieldKey: @\"email\", FXFormFieldTitle: @\"email\"&#125;, @&#123;FXFormFieldKey: @\"phone\", FXFormFieldTitle: @\"phone\"&#125;, @&#123;FXFormFieldKey: @\"address\", FXFormFieldTitle: @\"address\"&#125;, @&#123;FXFormFieldKey: @\"name\", FXFormFieldTitle: @\"name\"&#125; ];&#125;@end æ•ˆæœå¦‚ä¸‹ï¼š -(NSArray *)fieldsæ–¹æ³•æ˜¯FXFormåè®®ä¸­çš„ä¸€ä¸ªæ–¹æ³•ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œå¯ä»¥ç›´æ¥è¿›è¡ŒèŠ‚ç‚¹çš„åˆ›å»ºå’Œé…ç½®ï¼ŒFXFormåè®®ä¸­è¿˜æä¾›äº†ä¸¤ä¸ªæ–¹æ³•ï¼Œæ„ä¹‰å¦‚ä¸‹ï¼š 1234//è¿™ä¸ªæ–¹æ³•ç”¨äºé…ç½®é¢å¤–çš„èŠ‚ç‚¹ï¼Œå¦‚æœéœ€è¦æŸäº›èŠ‚ç‚¹ä¸å¯¹åº”ä»»ä½•å±æ€§ï¼Œå¯ä»¥åœ¨è¿™ä¸ªæ–¹æ³•ä¸­é…ç½®- (NSArray *)extraFields;//è¿™ä¸ªæ–¹æ³•éœ€è¦è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œå¦‚æœéœ€è¦æŸäº›å±æ€§ä¸å¯¹åº”èŠ‚ç‚¹ï¼Œå³æœ‰å±æ€§çš„å­˜åœ¨ï¼Œä½†æ˜¯ä¸ç”Ÿæˆcellï¼Œå¯ä»¥å°†å±æ€§åä¼ å…¥è¿”å›- (NSArray *)excludedFields; èŠ‚ç‚¹ä¹Ÿå¯ä»¥è¿›è¡Œå¤åˆï¼Œä¾‹å¦‚å¯ä»¥å°†ä¸€ä¸ªèŠ‚ç‚¹é…ç½®ç±»ä½œä¸ºå±æ€§è®¾ç½®ç»™å¦ä¸€ä¸ªèŠ‚ç‚¹é…ç½®ç±»ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415161718//å­èŠ‚ç‚¹ä¿¡æ¯é…ç½®ç±»@interface SubForm : NSObject&lt;FXForm&gt;@property(nonatomic,assign)NSInteger age;@property(nonatomic,assign)NSDate * date;@end@implementation SubForm@end//çˆ¶èŠ‚ç‚¹ä¿¡æ¯é…ç½®ç±»@interface MyForm : NSObject&lt;FXForm&gt;@property(nonatomic,strong)NSString * email;@property(nonatomic,strong)NSString * passwd;@property(nonatomic,assign)BOOL rememberMe;//å…¶ä¸­æœ‰å±æ€§ä¸ºå­èŠ‚ç‚¹@property(nonatomic,strong)SubForm * subForm;@end@implementation MyForm@end å­èŠ‚ç‚¹ä¼šè¢«é»˜è®¤åŒ…è£…åœ¨æ–°çš„è§†å›¾æ§åˆ¶å™¨ä¸­ï¼Œä¹Ÿå¯ä»¥è®¾ç½®FXFormFieldInlineä¸º@YESæ¥ä½¿å…¶å¤åˆè¿›å½“å‰è§†å›¾æ§åˆ¶å™¨ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š å››ã€å…³äºè‡ªå®šä¹‰è§†å›¾æ§åˆ¶å™¨å¦‚æœå¼€å‘è€…çš„è§†å›¾æ§åˆ¶å™¨å¹¶ä¸æ˜¯ç»§æ‰¿äºFXFormViewControllerï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨FXFormsæ¥å¿«æ·çš„åˆ›å»ºè¡¨å•è§†å›¾ï¼Œå¼€å‘è€…è‡ªå®šä¹‰çš„è§†å›¾æ§åˆ¶å™¨éœ€è¦éµå®ˆFXFormControllerDelegateåè®®ï¼Œç¤ºä¾‹å¦‚ä¸‹: 12345678910111213141516171819@interface ViewController : UIViewController&lt;FXFormControllerDelegate&gt;//ç³»ç»Ÿçš„tableView@property(nonatomic,strong)UITableView * tableView;//FXè¡¨å•æ§åˆ¶å™¨@property(nonatomic,strong)FXFormController * formController;@end@implementation ViewController- (void)viewDidLoad &#123; [super viewDidLoad]; self.tableView = [[UITableView alloc]initWithFrame:self.view.frame style:UITableViewStyleGrouped]; self.formController = [[FXFormController alloc] init]; self.formController.tableView = self.tableView; self.formController.delegate = self; self.formController.form = [[MyForm alloc] init]; self.formController.form = [MyForm new]; [self.view addSubview:self.tableView];&#125;@end ä¸Šé¢çš„ä»£ç æå¤§äº†ç®€åŒ–äº†ViewControllerä¸­çš„ä»£ç é‡ã€‚ äº”ã€å¯¹Cellè¿›è¡Œå±æ€§è®¾ç½®åœ¨è¿›è¡ŒèŠ‚ç‚¹å±æ€§å­—å…¸çš„é…ç½®æ—¶ï¼Œå¯ä»¥é€šè¿‡è®¿é—®å±æ€§è·¯å¾„çš„æ–¹å¼æ¥å¯¹cellçš„å±æ€§è¿›è¡Œä¸€äº›é…ç½®ï¼Œä¾‹å¦‚ï¼š 123-(NSDictionary *)passwdField&#123; return @&#123;@\"textLabel.textColor\":[UIColor redColor]&#125;;&#125; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSç¬¬ä¸‰æ–¹åº“","slug":"iOSç¬¬ä¸‰æ–¹åº“","permalink":"http://huishao.cc/categories/iOSç¬¬ä¸‰æ–¹åº“/"}],"tags":[],"keywords":[{"name":"iOSç¬¬ä¸‰æ–¹åº“","slug":"iOSç¬¬ä¸‰æ–¹åº“","permalink":"http://huishao.cc/categories/iOSç¬¬ä¸‰æ–¹åº“/"}]},{"title":"iOSä¸­ç¬¬ä¸‰æ–¹æœ‰åºå­—å…¸æ¡†æ¶â€”â€”M13OrderedDictionary","slug":"232iOSä¸­ç¬¬ä¸‰æ–¹æœ‰åºå­—å…¸æ¡†æ¶â€”â€”M13OrderedDictionary","date":"2016-06-30T16:00:00.000Z","updated":"2021-07-09T03:03:32.644Z","comments":true,"path":"2016/07/01/232iOSä¸­ç¬¬ä¸‰æ–¹æœ‰åºå­—å…¸æ¡†æ¶â€”â€”M13OrderedDictionary/","link":"","permalink":"http://huishao.cc/2016/07/01/232iOSä¸­ç¬¬ä¸‰æ–¹æœ‰åºå­—å…¸æ¡†æ¶â€”â€”M13OrderedDictionary/","excerpt":"","text":"iOSä¸­ç¬¬ä¸‰æ–¹æœ‰åºå­—å…¸æ¡†æ¶â€”â€”M13OrderedDictionaryä¸€ã€å¼•è¨€M13OrderedDictionaryæ˜¯æ‹¥æœ‰å­—å…¸å’Œæ•°ç»„åŠŸèƒ½çš„ç¬¬ä¸‰æ–¹é›†åˆåºåˆ—ï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡ç´¢å¼•å’Œé”®å€¼æ¥å®ç°å¯¹å…¶ä¸­å…ƒç´ çš„è®¿é—®ã€‚å…¶å®ç°äº†NSArrayå’ŒNSDictionaryä¸­çš„æ‰€æœ‰æ–¹æ³•ï¼Œå¹¶ä¸”æ”¯æŒKVCä¸KVOã€‚ M13OederedDictionaryä¸­æä¾›çš„æ–¹æ³•åŒ…æ‹¬ï¼š 1.åˆ›å»ºä¸åˆå§‹åŒ–ã€‚ 2.è®¿é—®é”®å’Œå€¼ 3.æŸ¥è¯¢ä¸æœç´¢ã€‚ 4.å‘é€æ¶ˆæ¯ã€‚ 5.æ¯”è¾ƒä¸æ’åºã€‚ 6.æšä¸¾ä¸éå†ã€‚ 7.æè¿°ä¸å­˜å‚¨ã€‚ 8.KVOé”®å€¼ç›‘å¬ã€‚ 9.KVCé”®å€¼ç¼–ç ã€‚ 10.ç´¢å¼•ä¸ä¸‹æ ‡ã€‚ å¦å¤–ï¼ŒM13OrderedDictionaryé’ˆå¯¹Xcode7ä¹Ÿåšäº†è®¸å¤šä¼˜åŒ–ï¼Œä¾‹å¦‚å¼•å…¥äº†æ³›å‹çš„ä»£ç æ”¯æŒçš„é£æ ¼ã€‚M13OrderedDictionaryåº“çš„gitåœ°å€å¦‚ä¸‹ï¼š[https://github.com/Marxon13/M13OrderedDictionary](https://github.com/Marxon13/M13OrderedDictionary)ã€‚ äºŒã€M13OrderedDictionaryä¸­æ–¹æ³•ä¸å±æ€§è§£æ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228//ç±»æ–¹æ³•åˆ›å»ºå®ä¾‹å¯¹è±¡//é»˜è®¤çš„åˆå§‹åŒ–æ–¹æ³•+ (instancetype)orderedDictionary;//ä½¿ç”¨M13OrderedDictionaryæ¥åˆ›å»ºå®ä¾‹å¯¹è±¡+ (instancetype)orderedDictionaryWithOrderedDictionary:(M13OrderedDictionary M13Generics(KeyType, ObjectType) *)orderedDictionary;//é€šè¿‡æ–‡ä»¶æ¥åˆ›å»ºå®ä¾‹å¯¹è±¡+ (instancetype)orderedDictionaryWithContentsOfFile:(NSString *)path;//é€šè¿‡URLæ¥åˆ›å»ºå®ä¾‹å¯¹è±¡+ (instancetype)orderedDictionaryWithContentsOfURL:(NSURL *)URL;//åˆ›å»ºå•é”®å€¼å®ä¾‹å¯¹è±¡+ (instancetype)orderedDictionaryWithObject:(M13GenericType(ObjectType, id))anObject pairedWithKey:(M13GenericType(KeyType, id&lt;NSCopying&gt;))aKey;//é€šè¿‡NSDictionaryåˆ›å»ºå®ä¾‹å¯¹è±¡+ (instancetype)orderedDictionaryWithDictionary:(NSDictionary M13Generics(KeyType, ObjectType) *)entries;//åˆå§‹åŒ–æ–¹æ³•åˆ›å»ºå®ä¾‹å¯¹è±¡//é»˜è®¤çš„åˆå§‹åŒ–æ–¹æ³•- (instancetype)init;//ä½¿ç”¨M13OrderedDictionaryæ¥è¿›è¡Œåˆå§‹åŒ–- (instancetype)initWithOrderedDictionary:(M13OrderedDictionary M13Generics(KeyType, ObjectType) *)orderedDictionary;//ä½¿ç”¨M13OrderedDictionaryæ¥è¿›è¡Œåˆå§‹åŒ– å¯é€‰æ˜¯å¦å¯¹å…¶ä¸­å…ƒç´ è¿›è¡Œå¤åˆ¶æ“ä½œ- (instancetype)initWithOrderedDictionary:(M13OrderedDictionary M13Generics(KeyType, ObjectType) *)orderedDictionary copyEntries:(BOOL)flag;//é€šè¿‡æ–‡ä»¶æ¥è¿›è¡Œåˆå§‹åŒ–- (instancetype)initWithContentsOfFile:(NSString *)path;//é€šè¿‡urlæ¥è¿›è¡Œåˆå§‹åŒ–- (instancetype)initWithContentsOfURL:(NSURL *)URL;//é€šè¿‡NSDictionaryå¯¹è±¡æ¥è¿›è¡Œåˆå§‹åŒ–- (instancetype)initWithContentsOfDictionary:(NSDictionary M13Generics(KeyType, ObjectType) *)entries;//é€šè¿‡é”®æ•°ç»„ä¸å€¼æ•°ç»„æ¥è¿›è¡Œåˆå§‹åŒ–- (instancetype)initWithObjects:(NSArray M13Generics(ObjectType) *)orderedObjects pairedWithKeys:(NSArray M13Generics(KeyType) *)orderedKeys NS_DESIGNATED_INITIALIZER;//æ–¹æ³•//åˆ¤æ–­å­—å…¸ä¸­æ˜¯å¦åŒ…å«æŸä¸ªå…ƒç´ - (BOOL)containsObject:(M13GenericType(ObjectType, id))object;//åˆ¤æ–­å­—å…¸ä¸­æ˜¯å¦åŒ…å«æŸä¸ªé”®å€¼å¯¹- (BOOL)containsObject:(M13GenericType(ObjectType, id))object pairedWithKey:(M13GenericType(KeyType, id&lt;NSCopying&gt;))key;//åˆ¤æ–­å­—å…¸ä¸­æ˜¯å¦åŒ…å«æŸä¸ªé”®å€¼å¯¹ ä¼ å…¥çš„å­—å…¸å‚æ•°éœ€è¦ä¸ºå•é”®å€¼å­—å…¸- (BOOL)containsEntry:(NSDictionary M13Generics(KeyType, ObjectType) *)entry;//è·å–å­—å…¸ä¸­å…ƒç´ ä¸ªæ•°@property (nonatomic, readonly) NSUInteger count;//è·å–å­—å…¸ä¸­æœ€åä¸€ä¸ªå…ƒç´ çš„å€¼@property (nonatomic, readonly, M13_NULLABLE) M13GenericType(ObjectType, id) lastObject;//è·å–å­—å…¸ä¸­æœ€åä¸€ä¸ªå…ƒç´ çš„é”®@property (nonatomic, readonly, M13_NULLABLE) M13GenericType(KeyType, id&lt;NSCopying&gt;) lastKey;//è·å–å­—å…¸ä¸­æœ€åä¸€ä¸ªå…ƒç´ é”®å€¼å¯¹@property (nonatomic, readonly, M13_NULLABLE) NSDictionary M13Generics(KeyType, ObjectType) *lastEntry;//é€šè¿‡æŸä¸ªä¸‹æ ‡è·å–å­—å…¸ä¸­çš„å…ƒç´ çš„å€¼- (M13GenericType(ObjectType, id))objectAtIndex:(NSUInteger)index;//é€šè¿‡æŸä¸ªä¸‹æ ‡è·å–å­—å…¸ä¸­çš„å…ƒç´ çš„é”®- (M13GenericType(KeyType, id&lt;NSCopying&gt;))keyAtIndex:(NSUInteger)index;//é€šè¿‡æŸä¸ªä¸‹æ ‡è·å–å­—æ®µä¸­çš„å…ƒç´  è¿”å›çš„ä¸ºå•é”®å€¼å¯¹NSDictionaryå¯¹è±¡- (NSDictionary M13Generics(KeyType, ObjectType) *)entryAtIndex:(NSUInteger)index;//é€šè¿‡ä¸€ç»„ä¸‹æ ‡è·å–ä¸€ç»„å…ƒç´ çš„å€¼- (NSArray M13Generics(ObjectType) *)objectsAtIndices:(NSIndexSet *)indeces;//é€šè¿‡ä¸€ç»„ä¸‹æ ‡è·å–ä¸€ç»„å…ƒç´ çš„é”®- (NSArray M13Generics(KeyType) *)keysAtIndices:(NSIndexSet *)indices;//é€šè¿‡ä¸€ç»„ä¸‹æ ‡è·å–ä¸€ç»„å…ƒç´  è¿™ä¸ªæ–¹æ³•è·å–çš„æ˜¯æœ‰åºé›†åˆ- (M13OrderedDictionary M13Generics(KeyType, ObjectType) *)entriesAtIndices:(NSIndexSet *)indices;//é€šè¿‡ä¸€ç»„ä¸‹æ ‡è·å–ä¸€ç»„å…ƒç´  è¿™ä¸ªæ–¹æ³•è·å–çš„æ˜¯æ— åºé›†åˆ- (NSDictionary M13Generics(KeyType, ObjectType) *)unorderedEntriesAtIndices:(NSIndexSet *)indices;//ç¤ºä¾‹ä¸­åŒ…å«çš„æ— åºå­—å…¸é›†åˆ@property (nonatomic, readonly) NSDictionary M13Generics(KeyType, ObjectType) *unorderedDictionary;//æ‰€æœ‰é”®ç»„æˆçš„æ•°ç»„@property (nonatomic, readonly) NSArray M13Generics(KeyType) *allKeys;//æ‰€æœ‰å€¼ç»„æˆçš„æ•°ç»„@property (nonatomic, readonly) NSArray M13Generics(ObjectType) *allObjects;//è·å–æŸä¸ªå€¼å¯¹åº”çš„æ‰€æœ‰é”®ç»„æˆçš„æ•°ç»„- (NSArray M13Generics(KeyType) *)allKeysForObject:(M13GenericType(ObjectType, id))anObject;//è·å–æŸä¸ªé”®å¯¹åº”çš„å€¼- (M13_NULLABLE M13GenericType(ObjectType, id))objectForKey:(M13GenericType(KeyType, id&lt;NSCopying&gt;))key;//è·å–æŸäº›é”®å¯¹åº”çš„å€¼ å¦‚æœæ²¡æœ‰æ‰¾åˆ° åˆ™å¯ä»¥è®¾ç½®é»˜è®¤è¿”å›çš„å€¼ å³å‚æ•°anObject- (NSArray M13Generics(ObjectType) *)objectForKeys:(NSArray M13Generics(KeyType) *)keys notFoundMarker:(M13GenericType(ObjectType, id))anObject;//æ‰€æœ‰å€¼çš„æšä¸¾@property (nonatomic, readonly) NSEnumerator M13Generics(ObjectType) *objectEnumerator;//æ‰€æœ‰é”®çš„æšä¸¾@property (nonatomic, readonly) NSEnumerator M13Generics(KeyType) *keyEnumerator;//æ‰€æœ‰å…ƒç´ çš„æšä¸¾@property (nonatomic, readonly) NSEnumerator M13Generics(NSDictionary&lt;KeyType, ObjectType&gt; *) *entryEnumerator;//æ‰€æœ‰å€¼çš„åå‘æšä¸¾@property (nonatomic, readonly) NSEnumerator M13Generics(ObjectType) *reverseObjectEnumerator;//æ‰€æœ‰é”®çš„åå‘æšä¸¾@property (nonatomic, readonly) NSEnumerator M13Generics(KeyType) *reverseKeyEnumerator;//æ‰€æœ‰å…ƒç´ çš„åå‘æšä¸¾@property (nonatomic, readonly) NSEnumerator M13Generics(NSDictionary&lt;KeyType, ObjectType&gt; *) *reverseEntryEnumerator;//è·å–æŸä¸ªå€¼çš„ä¸‹æ ‡ æ‰¾ä¸åˆ°ä¼šè¿”å›NSNotFound- (NSUInteger)indexOfObject:(M13GenericType(ObjectType, id))object;//è·å–æŸä¸ªé”®çš„ä¸‹æ ‡ æ‰¾ä¸åˆ°ä¼šè¿”å›NSNotFound- (NSUInteger)indexOfKey:(M13GenericType(KeyType, id&lt;NSCopying&gt;))key;//è·å–æŸä¸ªå…ƒç´ çš„ä¸‹æ ‡ æ‰¾ä¸åˆ°ä¼šè¿”å›NSNotFound- (NSUInteger)indexOfEntryWithObject:(M13GenericType(ObjectType, id))object pairedWithKey:(M13GenericType(KeyType, id&lt;NSCopying&gt;))key;//é€šè¿‡NSDictionaryæ¥è·å–æŸä¸ªå…ƒç´ çš„ä¸‹æ ‡ æ‰¾ä¸åˆ°ä¼šè¿”å›NSNotFound- (NSUInteger)indexOfEntry:(NSDictionary M13Generics(KeyType, ObjectType) *)entry;//é€šè¿‡å…ƒç´ çš„å€¼åœ¨æŸä¸ªèŒƒå›´å†…æŸ¥è¯¢ä¸‹æ ‡- (NSUInteger)indexOfObject:(M13GenericType(ObjectType, id))object inRange:(NSRange)range;//é€šè¿‡å…ƒç´ çš„é”®åœ¨æŸä¸ªèŒƒå›´å†…æŸ¥è¯¢ä¸‹æ ‡- (NSUInteger)indexOfKey:(M13GenericType(KeyType, id&lt;NSCopying&gt;))key inRange:(NSRange)range;//åœ¨æŸä¸ªèŒƒå›´å†…æŸ¥è¯¢æŸä¸ªå…ƒç´ çš„ä¸‹æ ‡- (NSUInteger)indexOfEntryWithObject:(M13GenericType(ObjectType, id))object pairedWithKey:(M13GenericType(KeyType, id&lt;NSCopying&gt;))key inRange:(NSRange)range;- (NSUInteger)indexOfEntry:(NSDictionary M13Generics(KeyType, ObjectType) *)entry inRange:(NSRange)range;//æŸ¥æ‰¾ä¸æŸä¸ªå…ƒç´ çš„å€¼ç›¸åŒçš„å…ƒç´ ä¸‹æ ‡- (NSUInteger)indexOfObjectIdenticalTo:(M13GenericType(ObjectType, id))object;//æŸ¥æ‰¾è·å–ä¸æŸä¸ªå…ƒç´ çš„å€¼ç›¸åŒçš„å…ƒç´ çš„é”®- (M13_NULLABLE M13GenericType(KeyType, id&lt;NSCopying&gt;))keyOfObjectIdenticalTo:(M13GenericType(ObjectType, id))object;//æŸ¥æ‰¾ä¸æŸä¸ªå…ƒç´ çš„å€¼ç›¸åŒçš„å…ƒç´ ä¸‹æ ‡ åœ¨æŸä¸ªèŒƒå›´å†…è¿›è¡ŒæŸ¥æ‰¾- (NSUInteger)indexOfObjectIdenticalTo:(M13GenericType(ObjectType, id))object inRange:(NSRange)range;//æŸ¥æ‰¾è·å–ä¸æŸä¸ªå…ƒç´ çš„å€¼ç›¸åŒçš„å…ƒç´ çš„é”® åœ¨æŸä¸ªèŒƒå›´å†…è¿›è¡ŒæŸ¥æ‰¾- (M13_NULLABLE M13GenericType(KeyType, id&lt;NSCopying&gt;))keyOfObjectIdenticalTo:(M13GenericType(ObjectType, id))object inRange:(NSRange)range;//ç¬¦åˆæŸ¥æ‰¾blockä¸­æ£€æµ‹æ¡ä»¶çš„å…ƒç´ çš„ä¸‹æ ‡/*å¼€å‘è€…å¯ä»¥åœ¨blockä¸­è·å–åˆ°éå†å‡ºçš„ objectä¸indexï¼Œè¿”å›å€¼å†³å®šæ˜¯å¦åœæ­¢æŸ¥æ‰¾*/- (NSUInteger)indexOfObjectPassingTest:(BOOL (^)(M13GenericType(ObjectType, id) obj, NSUInteger idx, BOOL *stop))predicate;//åŒä¸Š è·å–åˆ°çš„æ˜¯é”®- (M13_NULLABLE M13GenericType(KeyType, id&lt;NSCopying&gt;))keyOfObjectPassingTest:(BOOL (^)(M13GenericType(ObjectType, id) obj, NSUInteger idx,BOOL *stop))predicate;//åŒä¸Š åªæ˜¯è¿™ä¸ªæ–¹æ³•å¯ä»¥è®¾ç½®æšä¸¾ç±»å‹/*typedef NS_OPTIONS(NSUInteger, NSEnumerationOptions) &#123; NSEnumerationConcurrent = (1UL &lt;&lt; 0), //æ­£å‘æšä¸¾ NSEnumerationReverse = (1UL &lt;&lt; 1), //é€†å‘æšä¸¾&#125;;*/- (NSUInteger)indexOfObjectWithOptions:(NSEnumerationOptions)opts passingTest:(BOOL (^)(M13GenericType(ObjectType, id) obj, NSUInteger idx, BOOL *stop))predicate;//åŒä¸Š è·å–åˆ°çš„æ˜¯å…ƒç´ - (M13_NULLABLE M13GenericType(KeyType, id&lt;NSCopying&gt;))keyOfObjectWithOptions:(NSEnumerationOptions)opts passingTest:(BOOL (^)(M13GenericType(ObjectType, id) obj, NSUInteger idx,BOOL *stop))predicate;//åœ¨ä¸€å®šä¸‹æ ‡é›†åˆä¸­è¿›è¡ŒæŸ¥æ‰¾- (NSUInteger)indexOfObjectAtIndices:(NSIndexSet *)indexSet options:(NSEnumerationOptions)opts passingTest:(BOOL (^)(M13GenericType(ObjectType, id) obj, NSUInteger idx, BOOL *stop))predicate;//åŒä¸Š- (M13_NULLABLE M13GenericType(KeyType, id&lt;NSCopying&gt;))keyOfObjectAtIndices:(NSIndexSet *)indexSet options:(NSEnumerationOptions)opts passingTest:(BOOL (^)(M13GenericType(ObjectType, id) obj,NSUInteger idx,BOOL *stop))predicate;//åœ¨èŒƒå›´å†…è¿›è¡Œæ¯”è¾ƒæŸ¥è¯¢- (NSUInteger)indexOfObject:(M13GenericType(ObjectType, id))object inSortedRange:(NSRange)r options:(NSBinarySearchingOptions)opts usingComparator:(NSComparator)cmp;//åŒä¸Š- (M13_NULLABLE M13GenericType(KeyType, id&lt;NSCopying&gt;))keyOfObject:(M13GenericType(ObjectType, id))object inSortedRange:(NSRange)r options:(NSBinarySearchingOptions)opts usingComparator:(NSComparator)cmp;//è¿›è¡Œä¸€ç»„å…ƒç´ ä¸‹æ ‡çš„æŸ¥è¯¢- (NSIndexSet *)indicesOfObjectsPassingTest:(BOOL (^)(M13GenericType(ObjectType, id) obj, NSUInteger idx, BOOL *stop))predicate;- (NSIndexSet *)indicesOfObjectsWithOptions:(NSEnumerationOptions)opts passingTest:(BOOL (^)(M13GenericType(ObjectType, id) obj, NSUInteger idx, BOOL *stop))predicate;//è¿›è¡Œä¸€ç»„å…ƒç´ é”®çš„æŸ¥è¯¢- (NSArray M13Generics(KeyType) *)keysOfObjectsPassingTest:(BOOL (^)(M13GenericType(ObjectType, id) obj, NSUInteger idx, BOOL *stop))predicate;- (NSArray M13Generics(KeyType) *)keysOfObjectsWithOptions:(NSEnumerationOptions)opts passingTest:(BOOL (^)(M13GenericType(ObjectType, id) obj, NSUInteger idx, BOOL *stop))predicate;//å‘å­—å…¸ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ å‘é€æ¶ˆæ¯- (void)makeObjectsPerformSelector:(SEL)aSelector;//å‘å­—å…¸ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ å‘é€æ¶ˆæ¯ å¸¦å‚æ•°- (void)makeObjectsPerformSelector:(SEL)aSelector withObject:(id)anObject;//å¯¹å­—å…¸ä¸­çš„å…ƒç´ è¿›è¡Œæšä¸¾éå†- (void)enumerateObjectsUsingBlock:(void (^)(M13GenericType(ObjectType, id) obj, NSUInteger idx, BOOL *stop))block;- (void)enumerateObjectsWithOptions:(NSEnumerationOptions)opts usingBlock:(void (^)(M13GenericType(ObjectType, id) obj, NSUInteger idx, BOOL *stop))block;//åœ¨ä¸€å®šèŒƒå›´å†…è¿›è¡Œæšä¸¾- (void)enumerateObjectsAtIndices:(NSIndexSet *)indexSet options:(NSEnumerationOptions)opts usingBlock:(void (^)(M13GenericType(ObjectType, id) obj, NSUInteger idx, BOOL *stop))block;//è·å–ä¸å¦ä¸€ä¸ªæ•°ç»„ä¸­ç¬¬ä¸€ä¸ªç›¸åŒçš„å…ƒç´ çš„å€¼- (M13GenericType(ObjectType, id))firstObjectInCommonWithOrderedDictionary:(M13OrderedDictionary *)otherOrderedDictionary;//è·å–ä¸å¦ä¸€ä¸ªæ•°ç»„ä¸­ç¬¬ä¸€ä¸ªç›¸åŒçš„å…ƒç´ çš„é”®- (M13GenericType(ObjectType, id&lt;NSCopying&gt;))firstKeyInCommonWithOrderedDictionary:(M13OrderedDictionary *)otherOrderedDictionary;//è·å–ä¸å¦ä¸€ä¸ªæ•°ç»„ä¸­ç¬¬ä¸€ä¸ªç›¸åŒçš„å…ƒç´ - (NSDictionary M13Generics(KeyType, ObjectType) *)firstEntryInCommonWithOrderedDictionary:(M13OrderedDictionary *)otherOrderedDictionary;//åˆ¤æ–­ä¸¤ä¸ªå­—å…¸æ˜¯å¦ç›¸åŒ- (BOOL)isEqualToOrderedDictionary:(M13OrderedDictionary *)otherOrderedDictionary;//å‘å­—å…¸ä¸­è¿½åŠ é”®å€¼å¯¹- (M13OrderedDictionary M13Generics(KeyType, ObjectType) *)orderedDictionaryByAddingObject:(M13GenericType(ObjectType, id))object pairedWithKey:(M13GenericType(KeyType, id&lt;NSCopying&gt;))aKey;- (M13OrderedDictionary M13Generics(KeyType, ObjectType) *)orderedDictionaryByAddingEntry:(NSDictionary M13Generics(KeyType, ObjectType) *)entry;//å‘å­—å…¸ä¸­è¿½åŠ ä¸€ç»„é”®å€¼å¯¹- (M13OrderedDictionary M13Generics(KeyType, ObjectType) *)orderedDictionaryByAddingObjects:(NSArray M13Generics(ObjectType) *)orderedObjects pairedWithKeys:(NSArray M13Generics(KeyType) *)orderedKeys;//ç­›é€‰å…ƒç´ - (M13OrderedDictionary M13Generics(KeyType, ObjectType) *)filteredOrderDictionarysUsingPredicateForObjects:(NSPredicate *)predicate;//è·å–ä¸€å®šèŒƒå›´å†…çš„å­å­—å…¸- (M13OrderedDictionary M13Generics(KeyType, ObjectType) *)subOrderedDictionaryWithRange:(NSRange)range;//è¿›è¡Œå…ƒç´ æ’åºç›¸å…³çš„æ–¹æ³•- (M13OrderedDictionary M13Generics(KeyType, ObjectType) *)sortedByObjectsUsingFunction:(NSInteger (*)(M13GenericType(ObjectType, id),M13GenericType(ObjectType, id),void * M13__NULLABLE))comparator context:(M13_NULLABLE void *)context;- (M13OrderedDictionary M13Generics(KeyType, ObjectType) *)sortedByKeysUsingFunction:(NSInteger (*)(M13GenericType(KeyType, id&lt;NSCopying&gt;),M13GenericType(KeyType, id&lt;NSCopying&gt;),void * M13__NULLABLE))comparator context:(M13_NULLABLE void *)context;- (M13OrderedDictionary M13Generics(KeyType, ObjectType) *)sortedByObjectsUsingFunction:(NSInteger (*)(M13GenericType(ObjectType, id),M13GenericType(ObjectType, id), void * M13__NULLABLE))comparator context:(M13_NULLABLE void *)context hint:(M13_NULLABLE NSData *)hint;- (M13OrderedDictionary M13Generics(KeyType, ObjectType) *)sortedByKeysUsingFunction:(NSInteger (*)(M13GenericType(KeyType, id&lt;NSCopying&gt;),M13GenericType(KeyType, id&lt;NSCopying&gt;),void * M13__NULLABLE))comparator context:(M13_NULLABLE void *)context hint:(M13_NULLABLE NSData *)hint;- (M13OrderedDictionary M13Generics(KeyType, ObjectType) *)sortedByObjectsUsingDescriptors:(NSArray *)descriptors;- (M13OrderedDictionary M13Generics(KeyType, ObjectType) *)sortedByKeysUsingDescriptors:(NSArray *)descriptors;- (M13OrderedDictionary M13Generics(KeyType, ObjectType) *)sortedByObjectsUsingSelector:(SEL)comparator;- (M13OrderedDictionary M13Generics(KeyType, ObjectType) *)sortedByKeysUsingSelector:(SEL)comparator;- (M13OrderedDictionary M13Generics(KeyType, ObjectType) *)sortedByObjectsUsingComparator:(NSComparator)cmptr;- (M13OrderedDictionary M13Generics(KeyType, ObjectType) *)sortedByKeysUsingComparator:(NSComparator)cmptr;- (M13OrderedDictionary M13Generics(KeyType, ObjectType) *)sortedByObjectsWithOptions:(NSSortOptions)opts usingComparator:(NSComparator)cmptr;- (M13OrderedDictionary M13Generics(KeyType, ObjectType) *)sortedByKeysWithOptions:(NSSortOptions)opts usingComparator:(NSComparator)cmptr;//å†™å…¥æ–‡ä»¶- (BOOL)writeToFile:(NSString *)path atomically:(BOOL)flag;//å†™å…¥åˆ°URL- (BOOL)writeToURL:(NSURL *)aURL atomically:(BOOL)flag;//æ·»åŠ ç›‘å¬- (void)addObserver:(NSObject *)anObserver toObjectsAtIndices:(NSIndexSet *)indices forKeyPath:(NSString *)keyPath options:(NSKeyValueObservingOptions)options context:(M13_NULLABLE void *)context;- (void)addObserver:(NSObject *)observer forKeyPath:(NSString *)keyPath options:(NSKeyValueObservingOptions)options context:(M13_NULLABLE void *)context;//ç§»é™¤ç›‘å¬- (void)removeObserver:(NSObject *)anObserver fromObjectsAtIndices:(NSIndexSet *)indices forKeyPath:(NSString *)keyPath;- (void)removeObserver:(NSObject *)observer forKeyPath:(NSString *)keyPath context:(M13_NULLABLE void *)context;//KVCç›¸å…³æ–¹æ³•- (void)setValue:(M13_NULLABLE id)value forKey:(NSString *)key;- (void)setValue:(M13_NULLABLE id)value forKeyPath:(NSString *)keyPath;- (id)valueForKey:(NSString *)key;- (id)valueForKeyPath:(NSString *)keyPath;//å½’æ¡£ç›¸å…³æ–¹æ³•- (void)encodeWithCoder:(NSCoder *)aCoder;- (id)initWithCoder:(NSCoder *)decoder;//copyç›¸å…³æ–¹æ³•- (id)copy;- (id)copyWithZone:(M13_NULLABLE NSZone *)zone;- (id)mutableCopy;- (id)mutableCopyWithZone:(NSZone *)zone; ä¸‰ã€M13MutableOrderedDictionaryåŸºäºM13OrderedDictionaryï¼ŒM13MutableOrderedDictionaryä¸ºå¯å˜çš„æœ‰åºå­—å…¸ç±»ï¼Œå…¶ä¸­æ–¹æ³•è§£æå¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394//ç±»åˆ›å»ºæ–¹æ³•+ (instancetype)orderedDictionaryWithCapacity:(NSUInteger)numEntries;//åˆå§‹åŒ–æ–¹æ³•- (id)initWithCapacity:(NSUInteger)numEntries;//æ·»åŠ é”®å€¼å¯¹çš„æ–¹æ³•- (void)addObject:(M13GenericType(ObjectType, id))object pairedWithKey:(M13GenericType(KeyType, id&lt;NSCopying&gt;))key;- (void)addEntry:(NSDictionary M13Generics(KeyType, ObjectType) *)entry;- (void)addEntriesFromOrderedDictionary:(M13OrderedDictionary M13Generics(KeyType, ObjectType) *)orderedDictionary;- (void)addEntriesFromDictionary:(NSDictionary M13Generics(KeyType, ObjectType) *)dictionary;//æ’å…¥é”®å€¼å¯¹çš„æ–¹æ³•- (void)insertObject:(M13GenericType(ObjectType, id))object pairedWithKey:(M13GenericType(KeyType, id&lt;NSCopying&gt;))key atIndex:(NSUInteger)index;- (void)insertEntry:(NSDictionary M13Generics(KeyType, ObjectType) *)entry atIndex:(NSUInteger)index;- (void)insertEntriesFromOrderedDictionary:(M13OrderedDictionary M13Generics(KeyType, ObjectType) *)orderedDictionary atIndex:(NSUInteger)index;- (void)insertEntriesFromDictionary:(NSDictionary M13Generics(KeyType, ObjectType) *)dictionary atIndex:(NSUInteger)index;//è®¾ç½®é”®å€¼å¯¹çš„æ–¹æ³•- (void)setObject:(M13GenericType(ObjectType, id))object forKey:(M13GenericType(KeyType, id&lt;NSCopying&gt;))aKey;- (void)setEntry:(NSDictionary M13Generics(KeyType, ObjectType) *)entry;- (void)setEntriesFromOrderedDictionary:(M13OrderedDictionary M13Generics(KeyType, ObjectType) *)orderedDictionary;- (void)setEntriesFromDictionary:(NSDictionary M13Generics(KeyType, ObjectType) *)dictionary;- (void)setObject:(M13GenericType(ObjectType, id))object forKey:(M13GenericType(KeyType, id&lt;NSCopying&gt;))aKey atIndex:(NSUInteger)index;- (void)setEntry:(NSDictionary M13Generics(KeyType, ObjectType) *)entry atIndex:(NSUInteger)index;- (void)setEntriesFromOrderedDictionary:(M13OrderedDictionary M13Generics(KeyType, ObjectType) *)orderedDictionary atIndex:(NSUInteger)index;- (void)setEntriesFromDictionary:(NSDictionary M13Generics(KeyType, ObjectType) *)dictionary atIndex:(NSUInteger)index;//ç§»é™¤é”®å€¼å¯¹çš„æ–¹æ³•- (void)removeObjectForKey:(M13GenericType(KeyType, id&lt;NSCopying&gt;))key;- (void)removeObjectsForKeys:(NSArray M13Generics(KeyType) *)keys;- (void)removeAllObjects;- (void)removeAllEntries;- (void)removeLastEntry;- (void)removeEntryWithObject:(M13GenericType(ObjectType, id))object;- (void)removeEntryWithKey:(M13GenericType(KeyType, id&lt;NSCopying&gt;))key;- (void)removeEntryWithObject:(M13GenericType(ObjectType, id))object pairedWithKey:(M13GenericType(KeyType, id&lt;NSCopying&gt;))key;- (void)removeEntry:(NSDictionary M13Generics(KeyType, ObjectType) *)entry;- (void)removeEntryWithObject:(M13GenericType(ObjectType, id))object inRange:(NSRange)range;- (void)removeEntryWithKey:(M13GenericType(KeyType, id&lt;NSCopying&gt;))key inRange:(NSRange)range;- (void)removeEntryWithObject:(M13GenericType(ObjectType, id))object pairedWithKey:(M13GenericType(KeyType, id&lt;NSCopying&gt;))key inRange:(NSRange)ramge;- (void)removeEntry:(NSDictionary M13Generics(KeyType, ObjectType) *)entry inRange:(NSRange)range;- (void)removeEntryAtIndex:(NSUInteger)index;- (void)removeEntriesAtIndices:(NSIndexSet *)indices;- (void)removeEntryWithObjectIdenticalTo:(M13GenericType(ObjectType, id))anObject;- (void)removeEntryWithObjectIdenticalTo:(M13GenericType(ObjectType, id))anObject inRange:(NSRange)range;- (void)removeEntriesWithObjectsInArray:(NSArray M13Generics(ObjectType) *)array;- (void)removeEntriesWithKeysInArray:(NSArray M13Generics(KeyType) *)array;- (void)removeEntriesInRange:(NSRange)range;//æ›¿æ¢é”®å€¼å¯¹çš„æ–¹æ³•- (void)replaceEntryAtIndex:(NSInteger)index withObject:(M13GenericType(ObjectType, id))object pairedWithKey:(M13GenericType(KeyType, id&lt;NSCopying&gt;))key;- (void)replaceEntryAtIndex:(NSUInteger)index withEntry:(NSDictionary M13Generics(KeyType, ObjectType) *)entry;- (void)replaceEntriesAtIndices:(NSIndexSet *)indices withObjects:(NSArray M13Generics(ObjectType) *)objects pairedWithKeys:(NSArray M13Generics(KeyType) *)keys;- (void)replaceEntriesAtIndices:(NSIndexSet *)indices withEntries:(NSArray M13Generics(NSDictionary&lt;KeyType, ObjectType&gt; *) *)orderedEntries;- (void)replaceEntriesAtIndices:(NSIndexSet *)indiceswithEntriesFromOrderedDictionary:(M13OrderedDictionary M13Generics(KeyType, ObjectType) *)orderedDictionary;- (void)replaceEntriesInRange:(NSRange)range withObjectsFromArray:(NSArray M13Generics(ObjectType) *)objects pairedWithKeysFromArray:(NSArray M13Generics(KeyType) *)keys inRange:(NSRange)range2;- (void)replaceEntriesInRange:(NSRange)range withEntriesFrom:(NSArray M13Generics(NSDictionary&lt;KeyType, ObjectType&gt; *) *)orderedEntries inRange:(NSRange)range2;- (void)replaceEntriesInRange:(NSRange)rangewithEntriesFromOrderedDictionary:(M13OrderedDictionary M13Generics(KeyType, ObjectType) *)dictionary inRange:(NSRange)range2;- (void)replaceEntriesInRange:(NSRange)range withObjectsFromArray:(NSArray M13Generics(ObjectType) *)objects pairedWithKeysFromArray:(NSArray M13Generics(KeyType) *)keys;- (void)replaceEntriesInRange:(NSRange)range withEntriesFrom:(NSArray M13Generics(NSDictionary&lt;KeyType, ObjectType&gt; *) *)orderedEntries;- (void)replaceEntriesInRange:(NSRange)rangewithEntriesFromOrderedDictionary:(M13OrderedDictionary M13Generics(KeyType, ObjectType) *)dictionary;- (void)setEntriesToObjects:(NSArray M13Generics(ObjectType) *)objects pairedWithKeys:(NSArray M13Generics(KeyType) *)keys;- (void)setEntriesToOrderedDictionary:(M13OrderedDictionary M13Generics(KeyType, ObjectType) *)orderedDictionary;//è¿›è¡Œå…ƒç´ ç­›é€‰- (void)filterEntriesUsingPredicateForObjects:(NSPredicate *)predicate;//è¿›è¡Œå…ƒç´ äº¤æ¢- (void)exchangeEntryAtIndex:(NSUInteger)idx1 withEntryAtIndex:(NSUInteger)idx2;//è¿›è¡Œå…ƒç´ æ’åº- (void)sortEntriesByObjectUsingDescriptors:(NSArray *)descriptors;- (void)sortEntriesByKeysUsingDescriptors:(NSArray *)descriptors;- (void)sortEntriesByObjectUsingComparator:(NSComparator)cmptr;- (void)sortEntriesByKeysUsingComparator:(NSComparator)cmptr;- (void)sortEntriesByObjectWithOptions:(NSSortOptions)opts usingComparator:(NSComparator)cmptr;- (void)sortEntriesByKeysWithOptions:(NSSortOptions)opts usingComparator:(NSComparator)cmptr;- (void)sortEntriesByObjectUsingFunction:(NSInteger (*)(M13GenericType(ObjectType, id), M13GenericType(ObjectType, id), void * M13__NULLABLE))compare context:(M13_NULLABLE void *)context;- (void)sortEntriesByKeysUsingFunction:(NSInteger (*)(M13GenericType(KeyType, id&lt;NSCopying&gt;), M13GenericType(KeyType, id&lt;NSCopying&gt;), void * M13__NULLABLE))compare context:(M13_NULLABLE void *)context;- (void)sortEntriesByObjectUsingSelector:(SEL)comparator;- (void)sortEntriesByKeysUsingSelector:(SEL)comparator; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSç¬¬ä¸‰æ–¹åº“","slug":"iOSç¬¬ä¸‰æ–¹åº“","permalink":"http://huishao.cc/categories/iOSç¬¬ä¸‰æ–¹åº“/"}],"tags":[],"keywords":[{"name":"iOSç¬¬ä¸‰æ–¹åº“","slug":"iOSç¬¬ä¸‰æ–¹åº“","permalink":"http://huishao.cc/categories/iOSç¬¬ä¸‰æ–¹åº“/"}]},{"title":"iOSè¿è¡Œæ—¶å‡½æ•°æ›¿æ¢æ¡†æ¶â€”â€”RSSwizzle","slug":"231iOSè¿è¡Œæ—¶å‡½æ•°æ›¿æ¢æ¡†æ¶â€”â€”RSSwizzle","date":"2016-06-29T16:00:00.000Z","updated":"2021-07-09T03:02:36.212Z","comments":true,"path":"2016/06/30/231iOSè¿è¡Œæ—¶å‡½æ•°æ›¿æ¢æ¡†æ¶â€”â€”RSSwizzle/","link":"","permalink":"http://huishao.cc/2016/06/30/231iOSè¿è¡Œæ—¶å‡½æ•°æ›¿æ¢æ¡†æ¶â€”â€”RSSwizzle/","excerpt":"","text":"iOSè¿è¡Œæ—¶å‡½æ•°æ›¿æ¢æ¡†æ¶â€”â€”RSSwizzleä¸€ã€å¼•è¨€Objective-Cæ˜¯çš„è¿è¡Œæ—¶ç‰¹æ€§åœ¨iOSå¼€å‘ä¸­åº”ç”¨å¹¿æ³›ï¼Œé€šè¿‡runtimeæ–¹æ³•ï¼Œå¼€å‘è€…å¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€ä¸ºç±»æ·»åŠ æ–¹æ³•ï¼Œä¿®æ”¹ç±»çš„æ–¹æ³•ï¼Œç³»ç»Ÿçš„class\\_addMethod()æ–¹æ³•å’Œclass\\_replaceMethod()æ–¹æ³•å¯ä»¥ååˆ†ç®€å•çš„æ·»åŠ å’Œä¿®æ”¹æ–¹æ³•ï¼Œç„¶è€Œï¼Œç›´æ¥ä½¿ç”¨è¿™ä¸¤ä¸ªå‡½æ•°æœ‰æ—¶å¹¶ä¸å®‰å…¨ï¼Œå…¶ä¸»è¦é—®é¢˜æœ‰å¦‚ä¸‹å‡ ç‚¹ï¼š 1.åœ¨è¿›è¡ŒåŠ¨æ€å‡½æ•°ä¿®æ”¹çš„æ—¶å€™ï¼Œæœ‰å¯èƒ½å…¶ä»–çº¿ç¨‹ä¹Ÿåœ¨åšåŒæ ·çš„æ“ä½œã€‚ 2.åœ¨ç»§æ‰¿ä¸­ï¼Œå­ç±»æ‰§è¡Œçˆ¶ç±»æ›¿æ¢çš„æ–¹æ³•ä¼šå‡ºç°é—®é¢˜ã€‚ 3.å‡½æ•°çš„æ›¿æ¢å¿…é¡»ä¾é _cmdå‚æ•°ã€‚ 4.å¯èƒ½ä¼šå‡ºç°å‘½åå†²çªã€‚ æœ‰å…³Objective-Cè¿è¡Œæ—¶çš„ç›¸å…³å†…å®¹å¯åœ¨å¦‚ä¸‹åšå®¢ä¸­æŸ¥çœ‹ï¼šhttp://my.oschina.net/u/2340880/blog/489072ã€‚ RSSwizzleæ¡†æ¶å¯ä»¥è§£å†³ä¸Šé¢æ‰€æœ‰é—®é¢˜ï¼Œåœ¨è¦æ±‚æ¯”è¾ƒé«˜çš„é¡¹ç›®ä¸­å¦‚æœéœ€è¦ä½¿ç”¨åˆ°è¿è¡Œæ—¶å‡½æ•°æ›¿æ¢çš„éœ€æ±‚ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨è¿™ä¸ªæ¡†æ¶ã€‚gitåœ°å€å¦‚ä¸‹ï¼š https://github.com/rabovik/RSSwizzleã€‚ äºŒã€RSSwizzleçš„ä½¿ç”¨RSSwizzleä¸­æä¾›äº†ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼Œä¸€ç§æ˜¯é€šè¿‡è°ƒç”¨ç±»æ–¹æ³•æ¥å®ç°å‡½æ•°çš„æ›¿æ¢ï¼Œå¦ä¸€ç§æ˜¯ä½¿ç”¨RSSwizzleå®šä¹‰çš„å®æ¥è¿›è¡Œå‡½æ•°çš„æ›¿æ¢ã€‚ä½¿ç”¨ç±»æ–¹æ³•çš„æ–¹å¼ç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112- (void)viewDidLoad &#123; [super viewDidLoad]; //æ›¿æ¢ç±»æ–¹æ³• [RSSwizzle swizzleClassMethod:NSSelectorFromString(@\"log\") inClass:NSClassFromString(@\"ViewController\") newImpFactory:^id(RSSwizzleInfo *swizzleInfo) &#123; return ^(__unsafe_unretained id self)&#123; NSLog(@\"Class log Swizzle\"); &#125;; &#125;];&#125;+(void)log&#123; NSLog(@\"Class log\");&#125; è¿™ä¸ªå‡½æ•°ç”¨æ¥æ›¿æ¢ç±»æ–¹æ³•ï¼Œç¬¬1ä¸ªå‚æ•°ä¸ºè¦æ›¿æ¢çš„å‡½æ•°é€‰æ‹©å™¨ï¼Œç¬¬2ä¸ªå‚æ•°ä¸ºè¦æ›¿æ¢æ­¤å‡½æ•°çš„ç±»ï¼Œblockå‚æ•°ä¸­éœ€è¦è¿”å›ä¸€ä¸ªæ–¹æ³•å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¸ºè¦æ›¿æ¢æˆçš„å‡½æ•°ï¼Œè¦å’ŒåŸå‡½æ•°ç±»å‹ç›¸åŒã€‚åœ¨ç±»ä¸­çš„å‡½æ•°é»˜è®¤éƒ½ä¼šæœ‰ä¸€ä¸ªåä¸ºselfçš„idå‚æ•°ã€‚è¿›è¡Œå®ä¾‹å‡½æ•°çš„æ›¿æ¢å®ä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view, typically from a nib. //è¿›è¡Œå®ä¾‹æ–¹æ³•çš„æ›¿æ¢ /* ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºè¦æ›¿æ¢çš„å‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºè¦æ›¿æ¢æ–¹æ³•çš„ç±»ï¼Œç¬¬ä¸‰ä¸ªçš„blockä¸­è¿”å›æ›¿æ¢åçš„æ–¹æ³•ï¼Œç¬¬å››ä¸ªå‚æ•°è®¾ç½®æ›¿æ¢æ¨¡å¼ï¼Œæœ€åä¸€ä¸ªå‚æ•°æ˜¯æ­¤æ›¿æ¢æ“ä½œçš„æ ‡è¯†ç¬¦ */ [RSSwizzle swizzleInstanceMethod:NSSelectorFromString(@\"touchesBegan:withEvent:\") inClass:NSClassFromString(@\"ViewController\") newImpFactory:^id(RSSwizzleInfo *swizzleInfo) &#123; return ^(__unsafe_unretained id self,NSSet* touches,UIEvent* event)&#123; NSLog(@\"text Swizzle\"); &#125;; &#125; mode:RSSwizzleModeAlways key:@\"key\"];&#125;-(void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event&#123; NSLog(@\"test\"); [ViewController log];&#125; æ›¿æ¢æ¨¡å¼çš„æšä¸¾RSSwizzleModeæ„ä¹‰å¦‚ä¸‹ï¼š 12345678typedef NS_ENUM(NSUInteger, RSSwizzleMode) &#123; //ä»»ä½•æƒ…å†µä¸‹ å§‹ç»ˆæ‰§è¡Œæ›¿æ¢æ“ä½œ RSSwizzleModeAlways = 0, //ç›¸åŒkeyæ ‡è¯†çš„æ›¿æ¢æ“ä½œåªä¼šè¢«æ‰§è¡Œä¸€æ¬¡ RSSwizzleModeOncePerClass = 1, //ç›¸åŒkeyæ ‡è¯†çš„æ›¿æ¢æ“ä½œåœ¨å­ç±»çˆ¶ç±»ä¸­åªä¼šè¢«æ‰§è¡Œä¸€æ¬¡ RSSwizzleModeOncePerClassAndSuperclasses = 2&#125;; ä½¿ç”¨å®çš„æ¨¡å¼è¿›è¡Œæ–¹æ³•æ›¿æ¢æ“ä½œçš„ä»£ç æ›´åŠ ç®€å•ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415//è¿›è¡Œç±»æ–¹æ³•çš„æ›¿æ¢/* ç¬¬1ä¸ªå‚æ•°ä¸ºè¦æ›¿æ¢æ–¹æ³•çš„ç±» ç¬¬äºŒä¸ªå‚æ•°ä¸ºè¦æ›¿æ¢çš„æ–¹æ³•é€‰æ‹©å™¨ ç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºæ–¹æ³•çš„è¿”å›å€¼ç±»å‹ï¼Œç¬¬å››ä¸ªå‚æ•°ä¸ºæ–¹æ³•çš„å‚æ•°åˆ—è¡¨ï¼Œæœ€åä¸€ä¸ªå‚æ•°ä¸ºè¦æ›¿æ¢çš„æ–¹æ³•ä»£ç å— */RSSwizzleClassMethod(NSClassFromString(@\"ViewController\"), NSSelectorFromString(@\"log\"), RSSWReturnType(void), RSSWArguments(), RSSWReplacement( &#123; //å…ˆæ‰§è¡ŒåŸå§‹æ–¹æ³• RSSWCallOriginal(); NSLog(@\"Class log Swillze\"); &#125;));//è¿›è¡Œå®ä¾‹æ–¹æ³•çš„æ›¿æ¢/* ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºè¦æ›¿æ¢æ–¹æ³•çš„ç±»ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºè¦æ›¿æ¢çš„æ–¹æ³•é€‰æ‹©å™¨ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºè¿”å›å€¼ç±»å‹ï¼Œç¬¬å››ä¸ªå‚æ•°ä¸ºå‚æ•°åˆ—è¡¨ ç¬¬äº”ä¸ªå‚æ•°ä¸ºè¦æ›¿æ¢çš„ä»£ç å—ï¼Œç¬¬å…­ä¸ªå‚æ•°ä¸ºæ‰§è¡Œæ¨¡å¼ï¼Œæœ€åä¸€ä¸ªå‚æ•°ä¸ºkeyå€¼æ ‡è¯†ã€‚ */RSSwizzleInstanceMethod(NSClassFromString(@\"ViewController\"),NSSelectorFromString(@\"touchesBegan:withEvent:\"), RSSWReturnType(void), RSSWArguments(NSSet* touchs,UIEvent * event), RSSWReplacement(&#123; NSLog(@\"test Swizzle\");&#125;), RSSwizzleModeAlways, @\"key\"); åœ¨å®å†…ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨RSSWCallOriginal()æ¥æ‰§è¡Œæ›¿æ¢å‰çš„åŸå§‹å‡½æ•°ï¼Œååˆ†æ–¹ä¾¿ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSç¬¬ä¸‰æ–¹åº“","slug":"iOSç¬¬ä¸‰æ–¹åº“","permalink":"http://huishao.cc/categories/iOSç¬¬ä¸‰æ–¹åº“/"}],"tags":[],"keywords":[{"name":"iOSç¬¬ä¸‰æ–¹åº“","slug":"iOSç¬¬ä¸‰æ–¹åº“","permalink":"http://huishao.cc/categories/iOSç¬¬ä¸‰æ–¹åº“/"}]},{"title":"iOSä¸­æ”¯æŒHTMLæ–‡æœ¬çš„æ ‡ç­¾æ§ä»¶â€”â€”MDHTMLLabel","slug":"230iOSä¸­æ”¯æŒHTMLæ–‡æœ¬çš„æ ‡ç­¾æ§ä»¶â€”â€”MDHTMLLabel","date":"2016-06-29T16:00:00.000Z","updated":"2021-07-09T03:01:52.534Z","comments":true,"path":"2016/06/30/230iOSä¸­æ”¯æŒHTMLæ–‡æœ¬çš„æ ‡ç­¾æ§ä»¶â€”â€”MDHTMLLabel/","link":"","permalink":"http://huishao.cc/2016/06/30/230iOSä¸­æ”¯æŒHTMLæ–‡æœ¬çš„æ ‡ç­¾æ§ä»¶â€”â€”MDHTMLLabel/","excerpt":"","text":"iOSä¸­æ”¯æŒHTMLæ–‡æœ¬çš„æ ‡ç­¾æ§ä»¶â€”â€”MDHTMLLabelä¸€ã€å¼•è¨€åœ¨iOSå¼€å‘ä¸­å¯¹HTMLçš„å¤„ç†å¾ˆå¤šæ—¶å€™é™¤äº†ä½¿ç”¨WebViewå¤–ï¼Œè¿˜éœ€è¦åŸç”Ÿçš„æ§ä»¶å¯¹å…¶è¿›è¡Œæ¸²æŸ“ï¼Œä¾‹å¦‚å°†HTMLå­—ç¬¦ä¸²æ¸²æŸ“ä¸ºå›¾æ–‡æ··æ’çš„Viewè§†å›¾ã€‚Gitä¸Šæœ‰å¾ˆå¤šè½»é‡çº§çš„HTMLæ¸²æŸ“æ¡†æ¶ï¼Œåˆ—ä¸¾ä¸€äº›å¦‚ä¸‹ï¼š RTLabelï¼šåŸºäºUIViewçš„HTMLæ–‡æœ¬æ¸²æŸ“æ§ä»¶ï¼Œgitåœ°å€ï¼šhttps://github.com/honcheng/RTLabelã€‚ RCLabelï¼šä¸RTLabelæ€è·¯ç›¸åŒï¼ŒåŸºäºRCLabelä¹‹ä¸Šï¼Œä¹Ÿæ˜¯UIViewçš„å­ç±»ï¼Œæ”¯æŒäº†å¯¹HTMLä¸­çš„æœ¬åœ°å›¾ç‰‡æ ‡ç­¾è¿›è¡Œæ¸²æŸ“ã€‚gitåœ°å€ï¼šhttps://github.com/Janak-Nirmal/RichContentLabelã€‚ MDHTMLLabelï¼šä¸RTLabelå’ŒRCLabelä¸åŒçš„æ˜¯ï¼Œå…¶æ˜¯UILabelçš„å­ç±»ï¼Œæ›´åŠ è½»é‡çº§ï¼Œä¸èƒ½æ”¯æŒå›¾ç‰‡æ ‡ç­¾ã€‚gitåœ°å€ï¼šhttps://github.com/mattdonnelly/MDHTMLLabelã€‚ å…³äºRCLabelå¯¹å›¾ç‰‡ä¾¿ç­¾çš„æ”¯æŒï¼Œå…¶åªèƒ½æ”¯æŒæœ¬åœ°çš„å›¾ç‰‡ï¼Œä¸èƒ½æ”¯æŒè¿œç¨‹URLå›¾ç‰‡é“¾æ¥ï¼Œè¿™åœ¨å¼€å‘ä¸­å°†ååˆ†å±€é™ï¼Œä»¥å‰æˆ‘æ›¾åŠ RCLabelåšäº†æ”¹é€ ï¼ŒåŠ äº†æ”¯æŒè¿œç¨‹å›¾ç‰‡URLçš„æ–¹æ³•ï¼Œæˆ‘æŠŠå®ƒé›†æˆåœ¨äº†ä¸€ä¸ªåŸºç¡€æ¡†æ¶ä¸­ï¼Œéœ€è¦çš„ä¼™ä¼´å¯ä»¥å‚è€ƒä¸‹ï¼Œgitåœ°å€ï¼š[https://github.com/ZYHshao/YHBaseFoundationTest](https://github.com/ZYHshao/YHBaseFoundationTest)ã€‚é…å¥—çš„è®²è§£åšå®¢åœ°å€å¦‚ä¸‹ï¼š[http://my.oschina.net/u/2340880/blog/499311](http://my.oschina.net/u/2340880/blog/499311)ã€‚ æœ¬ç¯‡åšå®¢ä¸»è¦è®¨è®ºMDHTMLLabelçš„ä½¿ç”¨ã€‚ äºŒã€MDHTMLLabelçš„åˆ›å»ºä¸è®¾ç½®MDHTMLLabelæ¡†æ¶ååˆ†å°å·§ï¼Œå…¶ä¸­åªæœ‰ä¸¤ä¸ªæ–‡ä»¶ï¼Œæ€»è®¡2000ä½™è¡Œä»£ç ã€‚é€šè¿‡HTMLå­—ç¬¦ä¸²æ¥åˆ›å»ºä¸€ä¸ªMDHTMLLabelæ§ä»¶ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345NSString * kDemoText = @\"&lt;a href='http://github.com/mattdonnelly/MDHTMLLabel'&gt;MDHTMLLabel&lt;/a&gt; is a lightweight, easy to use replacement for &lt;b&gt;UILabel&lt;/b&gt; which allows you to fully &lt;font face='Didot-Italic' size='19'&gt;customize&lt;/font&gt; the appearence of the text using HTML (with a few added features thanks to &lt;b&gt;CoreText&lt;/b&gt;), as well letting you handle whenever a user taps or holds down on link and automatically detects ones not wrapped in anchor tags/&gt;\";MDHTMLLabel *htmlLabel = [[MDHTMLLabel alloc] initWithFrame:self.view.frame];htmlLabel.numberOfLines = 0;htmlLabel.htmlText = kDemoText;[self.view addSubview:htmlLabel]; æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š MDHTMLLabelä¸­å¯ä»¥è®¾ç½®çš„ä¸€äº›å±æ€§è§£æå¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940//è®¾ç½®è¶…é“¾æ¥æ–‡å­—çš„å±æ€§å­—å…¸ å’Œè®¾ç½®AttributeStringæ–¹æ³•ä¸€è‡´@property (nonatomic, strong) NSDictionary *linkAttributes;//è®¾ç½®è¶…é“¾æ¥æ–‡å­—æ¿€æ´»æ—¶çš„å±æ€§å­—å…¸@property (nonatomic, strong) NSDictionary *activeLinkAttributes;//è®¾ç½®è¶…é“¾æ¥éæ¿€æ´»æ—¶çš„å±æ€§å­—å…¸@property (nonatomic, strong) NSDictionary *inactiveLinkAttributes;//è®¾ç½®è¶…é“¾æ¥æ–‡å­—è§¦å‘é•¿æŒ‰äº‹ä»¶çš„æœ€å°æŒ‰ä¸‹æ—¶é—´@property (nonatomic, assign) NSTimeInterval minimumPressDuration;//è®¾ç½®labelæ–‡ä»¶é˜´å½±çš„æ¨¡ç³ŠåŠå¾„@property (nonatomic, assign) CGFloat shadowRadius;//è®¾ç½®labelåœ¨é«˜äº®çŠ¶æ€ä¸‹çš„æ–‡å­—æ¨¡ç³ŠåŠå¾„ æ³¨ï¼šéé«˜äº®çŠ¶æ€çš„ç”±åŸç”ŸUILabelçš„å±æ€§è®¾ç½®@property (nonatomic, assign) CGFloat highlightedShadowRadius;//è®¾ç½®labelåœ¨é«˜äº®çŠ¶æ€ä¸‹çš„æ–‡å­—é˜´å½±åç§» æ³¨ï¼šéé«˜äº®çŠ¶æ€çš„ç”±åŸç”ŸUILabelçš„å±æ€§è®¾ç½®@property (nonatomic, assign) CGSize highlightedShadowOffset;//è®¾ç½®åœ¨labelé«˜äº®çŠ¶æ€ä¸‹çš„æ–‡å­—é˜´å½±é¢œè‰² æ³¨ï¼šéé«˜äº®çŠ¶æ€çš„ç”±åŸç”ŸUILabelçš„å±æ€§è®¾ç½®@property (nonatomic, strong) UIColor *highlightedShadowColor;//è®¾ç½®é¦–è¡Œæ–‡å­—çš„ç¼©è¿›è·ç¦»@property (nonatomic, assign) CGFloat firstLineIndent;//è®¾ç½®æ–‡å­—çš„è¡Œé—´è·@property (nonatomic, assign) CGFloat leading;//è®¾ç½®è¡Œé«˜çš„å€æ•°@property (nonatomic, assign) CGFloat lineHeightMultiple;//è®¾ç½®æ–‡å­—å†…å®¹çš„è¾¹è·@property (nonatomic, assign) UIEdgeInsets textInsets;//è®¾ç½®æ–‡å­—å‚ç›´æ–¹å‘çš„å¯¹å…¶æ¨¡å¼ é»˜è®¤ä¸ºå±…ä¸­å¯¹å…¶ MDHTMLLabelVerticalAlignmentæšä¸¾æ„ä¹‰å¦‚ä¸‹:/*typedef NS_ENUM(NSUInteger, MDHTMLLabelVerticalAlignment) &#123; MDHTMLLabelVerticalAlignmentCenter = 0, //å±…ä¸­å¯¹å…¶ MDHTMLLabelVerticalAlignmentTop = 1, //é¡¶éƒ¨å¯¹å…¶ MDHTMLLabelVerticalAlignmentBottom = 2, //åº•éƒ¨å¯¹å…¶&#125;;*/@property (nonatomic, assign) MDHTMLLabelVerticalAlignment verticalAlignment;//è®¾ç½®æ–‡å­—çš„æˆªæ–­æ¨¡å¼@property (nonatomic, strong) NSString *truncationTokenString;//æ ¹æ®å†…å®¹è·å–æ§ä»¶å°ºå¯¸+ (CGFloat)sizeThatFitsHTMLString:(NSString *)htmlString withFont:(UIFont *)font constraints:(CGSize)size limitedToNumberOfLines:(NSUInteger)numberOfLines; å…³äºHTMLæ•°æ®ä¸­çš„è¶…é“¾æ¥çš„ç›¸åº”ï¼ŒMDHTMLLabelæ˜¯é€šè¿‡ä»£ç†å›è°ƒçš„æ–¹å¼å¤„ç†çš„ï¼Œå¦‚ä¸‹ï¼š 1234567@protocol MDHTMLLabelDelegate &lt;NSObject&gt;@optional//ç‚¹å‡»è¶…é“¾æ¥çš„æ—¶å€™è§¦å‘çš„æ–¹æ³•- (void)HTMLLabel:(MDHTMLLabel *)label didSelectLinkWithURL:(NSURL*)URL;//é•¿æŒ‰è¶…é“¾æ¥æ—¶è§¦å‘çš„æ–¹æ³•- (void)HTMLLabel:(MDHTMLLabel *)label didHoldLinkWithURL:(NSURL*)URL;@end ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSç¬¬ä¸‰æ–¹åº“","slug":"iOSç¬¬ä¸‰æ–¹åº“","permalink":"http://huishao.cc/categories/iOSç¬¬ä¸‰æ–¹åº“/"}],"tags":[],"keywords":[{"name":"iOSç¬¬ä¸‰æ–¹åº“","slug":"iOSç¬¬ä¸‰æ–¹åº“","permalink":"http://huishao.cc/categories/iOSç¬¬ä¸‰æ–¹åº“/"}]},{"title":"iOSå¥½ç”¨çš„ç¬¬ä¸‰æ–¹ä¾§è¾¹æ æ§ä»¶â€”â€”MMDrawerController","slug":"229iOSå¥½ç”¨çš„ç¬¬ä¸‰æ–¹ä¾§è¾¹æ æ§ä»¶â€”â€”MMDrawerController","date":"2016-06-28T16:00:00.000Z","updated":"2021-07-09T03:01:03.801Z","comments":true,"path":"2016/06/29/229iOSå¥½ç”¨çš„ç¬¬ä¸‰æ–¹ä¾§è¾¹æ æ§ä»¶â€”â€”MMDrawerController/","link":"","permalink":"http://huishao.cc/2016/06/29/229iOSå¥½ç”¨çš„ç¬¬ä¸‰æ–¹ä¾§è¾¹æ æ§ä»¶â€”â€”MMDrawerController/","excerpt":"","text":"iOSå¥½ç”¨çš„ç¬¬ä¸‰æ–¹ä¾§è¾¹æ æ§ä»¶â€”â€”MMDrawerControllerä¸€ã€å¼•è¨€å¾ˆå¤šåº”ç”¨ç¨‹åºéƒ½é‡‡ç”¨äº†ä¾§è¾¹æ è¿™æ ·çš„ç•Œé¢ç»“æ„ï¼ŒMMDrawerControlleræ˜¯ä¸€ä¸ªè½»é‡çº§çš„ä¾§è¾¹æ æŠ½å±‰æ§ä»¶ï¼Œå…¶æ”¯æŒå·¦ä¾§æŠ½å±‰å’Œå³ä¾§æŠ½å±‰ï¼Œå¯ä»¥å¾ˆå¥½çš„æ”¯æŒå¯¼èˆªæ§åˆ¶å™¨ï¼Œå¹¶ä¸”æ”¯æŒå¼€å‘è€…å¯¹æ‰‹åŠ¿å’ŒåŠ¨ç”»è¿›è¡Œè‡ªå®šä¹‰ã€‚MMDrawerControllerçš„gitåœ°å€å¦‚ä¸‹ï¼š https://github.com/mutualmobile/MMDrawerControllerã€‚ äºŒã€MMDrawerControllerçš„ä½¿ç”¨åŠç›¸å…³è®¾ç½®MMDrawerControllerçš„ä½¿ç”¨ååˆ†ç®€å•ï¼Œåªéœ€å°†ä¸­å¿ƒè§†å›¾æ§åˆ¶å™¨å’Œå·¦è¾¹æ è§†å›¾æ§åˆ¶å™¨ä¼ å…¥åˆå§‹åŒ–æ–¹æ³•å³å¯å®ŒæˆMMDrawerControllerçš„åˆ›å»ºã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345678UIViewController * leftViewController = [[UIViewController alloc]init];leftViewController.view.backgroundColor = [UIColor redColor];UIViewController * rightViewController = [[UIViewController alloc]init];rightViewController.view.backgroundColor = [UIColor greenColor];ViewController * centerViewController = [[ViewController alloc]init];centerViewController.view.backgroundColor = [UIColor blueColor];//åˆ›å»ºæ§ä»¶MMDrawerController * rootController = [[MMDrawerController alloc]initWithCenterViewController:centerViewController leftDrawerViewController:leftViewController rightDrawerViewController:rightViewController]; MMDrawerControllerä¸­è¿˜æä¾›äº†ä¸¤ä¸ªæ–¹æ³•ä¾›å¼€å‘è€…åˆ›å»ºå•ä¾§è¾¹æ ï¼Œå¦‚ä¸‹ï¼š 1234//åªåˆ›å»ºå¸¦å·¦ä¾§è¾¹æ çš„è§†å›¾æ§åˆ¶å™¨-(id)initWithCenterViewController:(UIViewController *)centerViewController leftDrawerViewController:(UIViewController *)leftDrawerViewController;//åªåˆ›å»ºå¸¦å³ä¾§è¾¹æ çš„è§†å›¾æ§åˆ¶å™¨-(id)initWithCenterViewController:(UIViewController *)centerViewController rightDrawerViewController:(UIViewController *)rightDrawerViewController; MMDrawerControllerä¸­ä¹Ÿæä¾›äº†è®¸å¤šå±æ€§å’Œæ–¹æ³•ä¾›å¼€å‘è€…è¿›è¡Œè‡ªå®šä¹‰çš„è®¾ç½®ï¼Œå…¶ä¸­å¯ç”¨å±æ€§è§£æå¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091//è®¾ç½®å·¦ä¾§è¾¹æ çš„æœ€å¤§å®½åº¦ é»˜è®¤280@property (nonatomic, assign) CGFloat maximumLeftDrawerWidth;//è®¾ç½®å³ä¾§è¾¹æ çš„æœ€å¤§å®½åº¦ é»˜è®¤280@property (nonatomic, assign) CGFloat maximumRightDrawerWidth;//è¿™ä¸ªæ˜¯ä¸€ä¸ªåªè¯»å±æ€§ï¼Œç”¨äºè·å–å¯è§çš„å·¦ä¾§è¾¹æ å®½åº¦@property (nonatomic, assign, readonly) CGFloat visibleLeftDrawerWidth;//è¿™ä¸ªæ˜¯ä¸€ä¸ªåªè¯»å±æ€§ï¼Œç”¨äºè·å–å¯è§çš„å³ä¾§è¾¹æ å®½åº¦@property (nonatomic, assign, readonly) CGFloat visibleRightDrawerWidth;//åŠ¨ç”»é€Ÿåº¦ï¼Œè¿™ä¸ªå‚æ•°çš„æ„ä¹‰æ˜¯æ¯ç§’ç§»åŠ¨å¤šå°‘å•ä½ é»˜è®¤ä¸º800/s@property (nonatomic, assign) CGFloat animationVelocity;//è®¾ç½®æ˜¯å¦å…è®¸å›å¼¹æ•ˆæœï¼Œå¦‚æœè®¾ç½®ä¸ºYESï¼Œå½“ä½¿ç”¨æ‰‹åŠ¿è¿›è¡Œä¾§è¾¹æ çš„å¼€å¯æ—¶ä¼šå‡ºç°å›å¼¹æ•ˆæœ@property (nonatomic, assign) BOOL shouldStretchDrawer;//è·å–å½“å‰å¼€å¯çš„ä¾§è¾¹æ ç±»å‹ï¼ŒMMDrawerSideæšä¸¾å¦‚ä¸‹ï¼š/*typedef NS_ENUM(NSInteger,MMDrawerSide)&#123; MMDrawerSideNone = 0,//æ— ä¾§è¾¹æ  MMDrawerSideLeft, //å·¦ä¾§è¾¹æ  MMDrawerSideRight, //å³ä¾§è¾¹æ &#125;;*/@property (nonatomic, assign, readonly) MMDrawerSide openSide;//å¼€å¯ä¾§è¾¹æ çš„æ‰‹åŠ¿æ¨¡å¼ MMOpenDrawerGestureModeæšä¸¾æ„ä¹‰å¦‚ä¸‹/*typedef NS_OPTIONS(NSInteger, MMOpenDrawerGestureMode) &#123; //æ²¡æœ‰æ‰‹åŠ¿ æ­¤æ¨¡å¼ä¸ºé»˜è®¤æ¨¡å¼ MMOpenDrawerGestureModeNone = 0, //åœ¨å¯¼èˆªæ ä¸Šæ‹–åŠ¨æ—¶å¯ä»¥æ‰“å¼€ä¾§è¾¹æ  MMOpenDrawerGestureModePanningNavigationBar = 1 &lt;&lt; 1, //åœ¨ä¸­å¿ƒè§†å›¾æ§åˆ¶å™¨çš„è§†å›¾ä¸Šæ‹–åŠ¨æ—¶å¯ä»¥æ‰“å¼€ä¾§è¾¹æ  MMOpenDrawerGestureModePanningCenterView = 1 &lt;&lt; 2, //åœ¨ä¸­å¿ƒè§†å›¾æ§åˆ¶å™¨çš„è§†å›¾è¾¹ç¼˜20ä¸ªå•ä½å†…æ‹–åŠ¨æ—¶å¯ä»¥æ‰“å¼€ä¾§è¾¹æ  MMOpenDrawerGestureModeBezelPanningCenterView = 1 &lt;&lt; 3, //è‡ªå®šä¹‰æ‰‹åŠ¿ éœ€é…åˆè‡ªå®šä¹‰æ‰‹åŠ¿çš„æ–¹æ³•ä½¿ç”¨ MMOpenDrawerGestureModeCustom = 1 &lt;&lt; 4, //æ‰€æœ‰æ¨¡å¼å…¼å®¹ MMOpenDrawerGestureModeAll = MMOpenDrawerGestureModePanningNavigationBar | MMOpenDrawerGestureModePanningCenterView | MMOpenDrawerGestureModeBezelPanningCenterView | MMOpenDrawerGestureModeCustom,&#125;;*/@property (nonatomic, assign) MMOpenDrawerGestureMode openDrawerGestureModeMask;//å…³é—­ä¾§è¾¹æ çš„æ‰‹åŠ¿æ¨¡å¼ MMCloseDrawerGestureModeæšä¸¾çš„æ„ä¹‰å¦‚ä¸‹/*typedef NS_OPTIONS(NSInteger, MMCloseDrawerGestureMode) &#123; //æ²¡æœ‰å…³é—­æ‰‹åŠ¿ MMCloseDrawerGestureModeNone = 0, //åœ¨å¯¼èˆªæ ä¸Šæ‹–åŠ¨æ—¶å¯ä»¥å…³é—­ä¾§è¾¹æ  MMCloseDrawerGestureModePanningNavigationBar = 1 &lt;&lt; 1, //åœ¨ä¸­å¿ƒè§†å›¾æ§åˆ¶å™¨ä¸Šæ¨åŠ¨æ—¶å¯ä»¥å…³é—­ä¾§è¾¹æ  MMCloseDrawerGestureModePanningCenterView = 1 &lt;&lt; 2, //åœ¨ä¸­å¿ƒè§†å›¾æ§åˆ¶å™¨è¾¹ç¼˜20å•ä½å†…æ‹–åŠ¨æ˜¯å¯ä»¥å…³é—­ä¾§è¾¹æ  MMCloseDrawerGestureModeBezelPanningCenterView = 1 &lt;&lt; 3, //ç‚¹å‡»å¯¼èˆªæ æ—¶å¯ä»¥å…³é—­ä¾§è¾¹æ  MMCloseDrawerGestureModeTapNavigationBar = 1 &lt;&lt; 4, //ç‚¹å‡»ä¸­å¿ƒè§†å›¾æ§åˆ¶å™¨è§†å›¾æ—¶å¯ä»¥å…³é—­ä¾§è¾¹æ  MMCloseDrawerGestureModeTapCenterView = 1 &lt;&lt; 5, //åœ¨ä¾§è¾¹æ è§†å›¾ä¸Šæ‹–åŠ¨æ—¶å¯ä»¥å…³é—­ä¾§è¾¹æ  MMCloseDrawerGestureModePanningDrawerView = 1 &lt;&lt; 6, //è‡ªå®šä¹‰å…³é—­æ‰‹åŠ¿ï¼Œéœ€è¦å’Œè‡ªå®šä¹‰æ‰‹åŠ¿çš„æ–¹æ³•ç»“åˆä½¿ç”¨ MMCloseDrawerGestureModeCustom = 1 &lt;&lt; 7, //æ‰€æœ‰æ¨¡å¼å…¼å®¹ MMCloseDrawerGestureModeAll = MMCloseDrawerGestureModePanningNavigationBar | MMCloseDrawerGestureModePanningCenterView | MMCloseDrawerGestureModeBezelPanningCenterView | MMCloseDrawerGestureModeTapNavigationBar | MMCloseDrawerGestureModeTapCenterView | MMCloseDrawerGestureModePanningDrawerView | MMCloseDrawerGestureModeCustom,&#125;;*/@property (nonatomic, assign) MMCloseDrawerGestureMode closeDrawerGestureModeMask;//è®¾ç½®ä¾§è¾¹æ æ˜¾ç¤ºæ—¶çš„ä¸­å¿ƒè§†å›¾æ§åˆ¶å™¨çš„ç”¨æˆ·äº¤äº’è§„åˆ™ MMDrawerOpenCenterInteractionModeæšä¸¾æ„ä¹‰å¦‚ä¸‹/*typedef NS_ENUM(NSInteger, MMDrawerOpenCenterInteractionMode) &#123; //ä¸­å¿ƒè§†å›¾æ§åˆ¶å™¨ä¸èƒ½è¿›è¡Œç”¨æˆ·äº¤äº’ é»˜è®¤ä¸ºæ­¤æšä¸¾ MMDrawerOpenCenterInteractionModeNone, //ä¸­å¿ƒè§†å›¾æ§åˆ¶å™¨å®Œå…¨å¯ä»¥è¿›è¡Œç”¨æˆ·äº¤äº’ MMDrawerOpenCenterInteractionModeFull, //ä¸­å¿ƒè§†å›¾æ§åˆ¶å™¨åªæœ‰å¯¼èˆªå¯ä»¥è¿›è¡Œç”¨æˆ·äº¤äº’ MMDrawerOpenCenterInteractionModeNavigationBarOnly,&#125;;*/@property (nonatomic, assign) MMDrawerOpenCenterInteractionMode centerHiddenInteractionMode;//è®¾ç½®æ˜¯å¦æ˜¾ç¤ºé˜´å½±æ•ˆæœ@property (nonatomic, assign) BOOL showsShadow;//è®¾ç½®æ˜¯å¦æ˜¾ç¤ºçŠ¶æ€æ çš„è‡ªå®šä¹‰è§†å›¾ åªæœ‰åœ¨iOS7ä¹‹åå¯ç”¨@property (nonatomic, assign) BOOL showsStatusBarBackgroundView;//è®¾ç½®çŠ¶æ€æ è§†å›¾é¢œè‰² åªæœ‰åœ¨iOS7ä¹‹åå¯ç”¨@property (nonatomic, strong) UIColor * statusBarViewBackgroundColor; ç›¸å…³æ–¹æ³•è§£æå¦‚ä¸‹ï¼š 123456789101112131415161718192021222324//åˆ‡æ¢ä¾§è¾¹æ çš„çŠ¶æ€ï¼ŒdrawerSideå‚æ•°ä¸ºè¦åˆ‡æ¢çš„ä¾§è¾¹æ ï¼Œanimatedè®¾ç½®æ˜¯å¦æœ‰åŠ¨ç”»æ•ˆæœï¼Œcompletionä¼šåœ¨åˆ‡æ¢å®Œæˆåæ‰§è¡Œ//æ³¨æ„ï¼šå¦‚æœåœ¨åˆ‡æ¢ä¸€ä¸ªå…³ç€çš„ä¾§è¾¹æ æ—¶ï¼Œå¦‚æœå¦ä¸€ä¸ªä¾§è¾¹æ æ­£åœ¨å¼€å¯çŠ¶æ€ï¼Œåˆ™æ­¤æ–¹æ³•ä¸ä¼šæœ‰ä»»ä½•æ•ˆæœ-(void)toggleDrawerSide:(MMDrawerSide)drawerSide animated:(BOOL)animated completion:(void(^)(BOOL finished))completion;//å…³é—­ä¾§è¾¹æ -(void)closeDrawerAnimated:(BOOL)animated completion:(void(^)(BOOL finished))completion;//å¼€å¯ä¾§è¾¹æ -(void)openDrawerSide:(MMDrawerSide)drawerSide animated:(BOOL)animated completion:(void(^)(BOOL finished))completion;//æ›´æ¢ä¸­å¿ƒè§†å›¾æ§åˆ¶å™¨-(void)setCenterViewController:(UIViewController *)centerViewController withCloseAnimation:(BOOL)closeAnimated completion:(void(^)(BOOL finished))completion;-(void)setCenterViewController:(UIViewController *)newCenterViewController withFullCloseAnimation:(BOOL)fullCloseAnimated completion:(void(^)(BOOL finished))completion;//è®¾ç½®å·¦ä¾§è¾¹æ æœ€å¤§å®½åº¦-(void)setMaximumLeftDrawerWidth:(CGFloat)width animated:(BOOL)animated completion:(void(^)(BOOL finished))completion;//è®¾ç½®å³ä¾§è¾¹æ æœ€å¤§å®½åº¦-(void)setMaximumRightDrawerWidth:(CGFloat)width animated:(BOOL)animated completion:(void(^)(BOOL finished))completion;//è¿›è¡Œä¾§è¾¹æ çš„é¢„è§ˆæ“ä½œ é»˜è®¤é¢„è§ˆè·ç¦»ä¸º40ä¸ªå•ä½-(void)bouncePreviewForDrawerSide:(MMDrawerSide)drawerSide completion:(void(^)(BOOL finished))completion;//è¿›è¡Œä¾§è¾¹æ çš„é¢„è§ˆæ“ä½œ å¯ä»¥è®¾ç½®é¢„è§ˆè·ç¦»-(void)bouncePreviewForDrawerSide:(MMDrawerSide)drawerSide distance:(CGFloat)distance completion:(void(^)(BOOL finished))completion;//è¿™ä¸ªæ–¹æ³•ç”¨äºè¿›è¡Œè§†å›¾ä¾§è¾¹æ è§†å›¾å‡ºç°åŠ¨ç”»çš„è‡ªå®šä¹‰-(void)setDrawerVisualStateBlock:(void(^)(MMDrawerController * drawerController, MMDrawerSide drawerSide, CGFloat percentVisible))drawerVisualStateBlock;//è¿™ä¸ªæ–¹æ³•ç”¨äºè®¾ç½®å½“ä¸€ä¸ªæ‰‹åŠ¿è§¦å‘å®Œæˆåçš„å›è°ƒ-(void)setGestureCompletionBlock:(void(^)(MMDrawerController * drawerController, UIGestureRecognizer * gesture))gestureCompletionBlock;//è¿™ä¸ªæ–¹æ³•ç”¨äºå®šä¹‰è‡ªå®šä¹‰çš„æ‰‹åŠ¿æ“ä½œ è¦å°†å¼€å¯ä¾§è¾¹æ ä¸å…³é—­ä¾§è¾¹æ çš„æ¨¡å¼è®¾ç½®ä¸ºMMOpenDrawerGestureModeCustomå’ŒMMCloseDrawerGestureModeCustomæ‰æœ‰æ•ˆ-(void)setGestureShouldRecognizeTouchBlock:(BOOL(^)(MMDrawerController * drawerController, UIGestureRecognizer * gesture, UITouch * touch))gestureShouldRecognizeTouchBlock; å¯¹äºè‡ªå®šä¹‰è¿‡æ¸¡åŠ¨ç”»çš„æ–¹æ³•ï¼š -(void)setDrawerVisualStateBlock:(void(^)(MMDrawerController * drawerController, MMDrawerSide drawerSide, CGFloat percentVisible))drawerVisualStateBlock; å›è°ƒblockä¸­ä¼šä¼ é€’è¿›æ¥ä¾§è¾¹æ æ˜¾ç¤ºå®Œæˆçš„ç™¾åˆ†æ¯”ï¼Œå¹¶ä¸”åœ¨ä¾§è¾¹æ å‡ºç°è¿‡ç¨‹ä¸­ï¼Œè¿™ä¸ªå›è°ƒblockä¼šè¢«ä¸åœåˆ·æ–°è°ƒç”¨ï¼Œå¼€å‘è€…å¯ä»¥ç›´æ¥åœ¨å…¶ä¸­å¯¹è¦è¿‡æ¸¡çš„å±æ€§è¿›è¡Œè®¾ç½®ï¼Œä¾‹å¦‚é€æ˜åº¦çš„æ¸å˜åŠ¨ç”»ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112//è¿›è¡Œè‡ªå®šä¹‰åŠ¨ç”» [rootController setDrawerVisualStateBlock:^(MMDrawerController *drawerController, MMDrawerSide drawerSide, CGFloat percentVisible) &#123; UIViewController * sideDrawerViewController; if(drawerSide == MMDrawerSideLeft)&#123; sideDrawerViewController = drawerController.leftDrawerViewController; &#125; else if(drawerSide == MMDrawerSideRight)&#123; sideDrawerViewController = drawerController.rightDrawerViewController; &#125; [sideDrawerViewController.view setAlpha:percentVisible]; &#125;]; ä¸‰ã€å…³äºMMDrawerControllerçš„å­ç±»å¼€å‘è€…å¦‚æœæœ‰ç‰¹æ®Šçš„éœ€æ±‚ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç»§æ‰¿MMDrawerControlleræ¥å®ç°è‡ªå·±çš„ä¾§è¾¹æ æ§åˆ¶å™¨ç±»ï¼ŒMMDrawerControlleræ¡†æ¶ä¸­æä¾›äº†ä¸€ä¸ªæ‰©å±•ï¼Œåœ¨ç¼–å†™MMDrawerControlleræ—¶ï¼Œå¼€å‘è€…å¯ä»¥å¯¼å…¥MMDrawerController+Subclass.hæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸­æä¾›äº†è®¸å¤šæ§åˆ¶å™¨çš„ç›‘å¬æ–¹æ³•ä¾›å¼€å‘è€…é‡å†™ï¼Œè§£æå¦‚ä¸‹ï¼š 123456789101112131415//å‡ºç°å•å‡»æ‰‹åŠ¿ä¼šå›è°ƒçš„æ–¹æ³• å¦‚æœè¦é‡å†™ å¿…é¡»è°ƒç”¨çˆ¶ç±»çš„æ­¤æ–¹æ³•-(void)tapGestureCallback:(UITapGestureRecognizer *)tapGesture __attribute((objc_requires_super));//å‡ºç°æ»‘åŠ¨æ‰‹åŠ¿ä¼šå›è°ƒçš„æ–¹æ³• å¦‚æœè¦é‡å†™ å¿…é¡»è°ƒç”¨çˆ¶ç±»çš„æ­¤æ–¹æ³•-(void)panGestureCallback:(UIPanGestureRecognizer *)panGesture __attribute((objc_requires_super));//å†³å®šæ˜¯å¦å“åº”æŸä¸ªæ‰‹åŠ¿-(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch __attribute((objc_requires_super));//å‡†å¤‡å±•ç¤ºä¾§è¾¹æ æ—¶è°ƒç”¨çš„æ–¹æ³•-(void)prepareToPresentDrawer:(MMDrawerSide)drawer animated:(BOOL)animated __attribute((objc_requires_super));//å…³é—­ä¾§è¾¹æ æ—¶è°ƒç”¨çš„æ–¹æ³•-(void)closeDrawerAnimated:(BOOL)animated velocity:(CGFloat)velocity animationOptions:(UIViewAnimationOptions)options completion:(void (^)(BOOL))completion __attribute((objc_requires_super));//æ‰“å¼€ä¾§è¾¹æ æ—¶è°ƒç”¨çš„æ–¹æ³•-(void)openDrawerSide:(MMDrawerSide)drawerSide animated:(BOOL)animated velocity:(CGFloat)velocity animationOptions:(UIViewAnimationOptions)options completion:(void (^)(BOOL))completion __attribute((objc_requires_super));//è®¾å¤‡æ—‹è½¬æ–¹å‘æ—¶è°ƒç”¨çš„æ–¹æ³•-(void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration __attribute((objc_requires_super));-(void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration __attribute((objc_requires_super)); å››ã€ä¸€äº›è¾…åŠ©ç±»MMDrawerControlleræ¡†æ¶ä¸­è¿˜æä¾›äº†ä¸€ä¸ªMMDrawerBarButtonItemçš„è¾…åŠ©ç±»ï¼Œè¿™ä¸ªç±»å¯ä»¥åˆ›å»ºä¸‰é“æ çš„èœå•æŒ‰é’®ã€‚å…¶ä¸­æ–¹æ³•å¦‚ä¸‹ï¼š 123456//åˆå§‹åŒ–æ–¹æ³•-(id)initWithTarget:(id)target action:(SEL)action;//è·å–æŸä¸ªçŠ¶æ€ä¸‹çš„æŒ‰é’®é¢œè‰²-(UIColor *)menuButtonColorForState:(UIControlState)state __attribute__((deprecated(\"Use tintColor instead\")));//è®¾ç½®æŸä¸ªçŠ¶æ€çš„æŒ‰é’®é¢œè‰²-(void)setMenuButtonColor:(UIColor *)color forState:(UIControlState)state __attribute__((deprecated(\"Use tintColor instead\"))); MMDrawerBarButtonItemç»§æ‰¿è‡ªUIBarButtonItemï¼Œå¯ä»¥ç›´æ¥åœ¨å¯¼èˆªæ ä¸Šä½¿ç”¨ã€‚ å‰é¢æœ‰æåˆ°ï¼Œä¾§è¾¹æ çš„å±•ç°åŠ¨ç”»å¼€å‘è€…å¯ä»¥è¿›è¡Œè‡ªå®šä¹‰ï¼Œä¸ºäº†ä½¿å¼€å‘è€…åœ¨ä½¿ç”¨MMDrawerControlleræ—¶æ›´åŠ æ–¹ä¾¿ï¼ŒMMDrawerControlleræ¡†æ¶ä¸­è¿˜æä¾›äº†ä¸€ä¸ªåŠ¨ç”»è¾…åŠ©ç±»MMDrawerVisualStateï¼Œè¿™ä¸ªç±»ä¸­å°è£…å¥½äº†è®¸å¤šåŠ¨ç”»æ•ˆæœï¼Œå¼€å‘è€…å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12//ä½¿ç”¨æä¾›çš„åŠ¨ç”»æ¨¡æ¿[rootController setDrawerVisualStateBlock:[MMDrawerVisualState slideAndScaleVisualStateBlock]]; MMDrawerVisualStateä¸­æ‰€æä¾›çš„åŠ¨ç”»æ¨¡æ¿åˆ—ä¸¾å¦‚ä¸‹ï¼š 12345678//ä»åå‘å‰æ¸ç°+(MMDrawerControllerDrawerVisualStateBlock)slideAndScaleVisualStateBlock;//æ»‘åŠ¨æ¸ç°+(MMDrawerControllerDrawerVisualStateBlock)slideVisualStateBlock;//ç«‹æ–¹åŠ¨ç”»+(MMDrawerControllerDrawerVisualStateBlock)swingingDoorVisualStateBlock;//è§†å·®åŠ¨ç”»+(MMDrawerControllerDrawerVisualStateBlock)parallaxVisualStateBlockWithParallaxFactor:(CGFloat)parallaxFactor; äº”ã€MMDrawerControlleræ— æ³•å®Œæˆçš„éœ€æ±‚ä¸ºäº†ç¡®ä¿MMDrawerControlleråº“çš„è½»é‡çº§ï¼Œå…¶ä½œè€…åœ¨è®¾è®¡æ—¶ä¹Ÿåšäº†åŠŸèƒ½ä¸Šçš„å–èˆæƒè¡¡ï¼ŒMMDrawerControlleræ— æ³•å®Œæˆä»¥ä¸‹éœ€æ±‚ï¼š 1.ä¸Šè¾¹æ ä¸ä¸‹è¾¹æ ã€‚ 2.åŒæ—¶å±•ç¤ºå·¦è¾¹æ ä¸åˆè¾¹æ ã€‚ 3.æ— æ³•è®¾ç½®æ˜¾ç¤ºä¸€ä¸ªæœ€å°çš„æŠ½å±‰å®½åº¦ã€‚ 4.ä¸èƒ½æ”¯æŒUITabBarControllerå®¹å™¨ã€‚ 5.ä¸èƒ½åœ¨ä¸­å¿ƒè§†å›¾æ§åˆ¶å™¨ä¹‹ä¸Šå‘ˆç°ä¾§è¾¹æ è§†å›¾ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSç¬¬ä¸‰æ–¹åº“","slug":"iOSç¬¬ä¸‰æ–¹åº“","permalink":"http://huishao.cc/categories/iOSç¬¬ä¸‰æ–¹åº“/"}],"tags":[],"keywords":[{"name":"iOSç¬¬ä¸‰æ–¹åº“","slug":"iOSç¬¬ä¸‰æ–¹åº“","permalink":"http://huishao.cc/categories/iOSç¬¬ä¸‰æ–¹åº“/"}]},{"title":"Swift3.0å¸¦æ¥çš„å˜åŒ–æ±‡æ€»ç³»åˆ—ä¸‰â€”â€”å‡½æ•°å’Œé—­åŒ…å†™æ³•ä¸Šçš„å¾®è°ƒ","slug":"228Swift3.0å¸¦æ¥çš„å˜åŒ–æ±‡æ€»ç³»åˆ—ä¸‰â€”â€”å‡½æ•°å’Œé—­åŒ…å†™æ³•ä¸Šçš„å¾®è°ƒ","date":"2016-06-25T16:00:00.000Z","updated":"2021-07-09T03:00:08.594Z","comments":true,"path":"2016/06/26/228Swift3.0å¸¦æ¥çš„å˜åŒ–æ±‡æ€»ç³»åˆ—ä¸‰â€”â€”å‡½æ•°å’Œé—­åŒ…å†™æ³•ä¸Šçš„å¾®è°ƒ/","link":"","permalink":"http://huishao.cc/2016/06/26/228Swift3.0å¸¦æ¥çš„å˜åŒ–æ±‡æ€»ç³»åˆ—ä¸‰â€”â€”å‡½æ•°å’Œé—­åŒ…å†™æ³•ä¸Šçš„å¾®è°ƒ/","excerpt":"","text":"Swift3.0å¸¦æ¥çš„å˜åŒ–æ±‡æ€»ç³»åˆ—ä¸‰â€”â€”å‡½æ•°å†™æ³•ä¸Šçš„å¾®è°ƒä¸€ã€å‡½æ•°æ–¹é¢Swift3.0ç›¸æ¯”Swift2.2çš„ç‰ˆæœ¬åœ¨APIä¸Šåšäº†å¤§é‡çš„ä¿®æ”¹ï¼Œä»£ç é£æ ¼ä¹Ÿæ›´åŠ ç»Ÿä¸€ã€‚åœ¨å‡½æ•°æ–¹é¢ï¼ŒSwift3.0ä¸­åšçš„æœ€å¤§ä¿®æ”¹æ˜¯ä¿®æ”¹äº†å†…éƒ¨åç§°ä¸å¤–éƒ¨åç§°çš„é»˜è®¤è§„åˆ™ã€‚ åœ¨Swift2.2ä¸­ï¼Œå‡½æ•°å‚æ•°åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå‚æ•°å¦‚æœå¼€å‘è€…ä¸æ‰‹åŠ¨è®¾ç½®å¤–éƒ¨åç§°ï¼Œé»˜è®¤æ˜¯åŒ¿åçš„ï¼Œé™¤ç¬¬ä¸€ä¸ªå‚æ•°ä»¥å¤–çš„å…¶ä»–å‚æ•°ï¼Œå¼€å‘è€…å¦‚æœä¸è®¾ç½®å¤–éƒ¨åç§°ï¼Œé»˜è®¤å¤–éƒ¨åç§°æ˜¯å’Œå†…éƒ¨åç§°ç›¸åŒçš„ï¼Œå› æ­¤åœ¨è°ƒç”¨å‡½æ•°æ—¶ï¼Œä»£ç å¸¸å¸¸æ˜¯è¿™æ ·çš„ï¼š 1234567//å¤šå‚æ•°å‡½æ•°Swift2.2ä¸­ ç¬¬ä¸€ä¸ªå‚æ•°é»˜è®¤åŒ¿åï¼Œå…¶ä»–å‚æ•°é»˜è®¤å†…éƒ¨å‘½åä¸å¤–éƒ¨å‘½åç›¸åŒfunc myFunc5(param1: Int,param2: Int,param3: Int) &#123; //è¿™é‡Œä½¿ç”¨çš„param1ï¼Œparam2ï¼Œparam3æ˜¯å‚æ•°çš„å†…éƒ¨å‘½å param1+param2+param3&#125;//è°ƒç”¨å‡½æ•°çš„å‚æ•°åˆ—è¡¨ä¸­ä½¿ç”¨çš„param2å’Œparam3ä¸ºå¤–éƒ¨å‘½åmyFunc5(1, param2: 2, param3: 3) Swift3.0ä¸­å°†è¿™ä¸€è§„åˆ™ä¿®æ”¹ä¸ºï¼šå¦‚æœå¼€å‘è€…ä¸è®¾ç½®å‡½æ•°ä¸­å‚æ•°çš„å¤–éƒ¨åç§°ï¼Œåˆ™å…¨éƒ¨å‚æ•°éƒ½é»˜è®¤å¤–éƒ¨åç§°å’Œå†…éƒ¨åç§°ç›¸åŒï¼Œä¸Šé¢ç›¸åŒçš„ä»£ç ï¼Œåœ¨Swift3.0çš„ç¯å¢ƒä¸‹æ˜¯ä¸‹é¢è¿™æ ·çš„ï¼š 12345678//å¤šå‚æ•°å‡½æ•° é»˜è®¤å†…éƒ¨å‘½åä¸å¤–éƒ¨å‘½åç›¸åŒfunc myFunc5(param1: Int,param2: Int,param3: Int) &#123; //è¿™é‡Œä½¿ç”¨çš„param1ï¼Œparam2ï¼Œparam3æ˜¯å‚æ•°çš„å†…éƒ¨å‘½å param1+param2+param3&#125;//è°ƒç”¨å‡½æ•°çš„å‚æ•°åˆ—è¡¨ä¸­ä½¿ç”¨çš„param1ã€param2å’Œparam3ä¸ºå¤–éƒ¨å‘½å//swift3.0myFunc5(param1: 1, param2: 2, param3: 3) Swift3.0åœ¨å‡½æ•°å‚æ•°åæ–¹é¢çš„å¾®è°ƒä½¿å¾—å‡½æ•°çš„å‚æ•°åè§„åˆ™æ›´åŠ ç»Ÿä¸€ä¹Ÿæ›´åŠ ç¬¦åˆSwiftè¯­è¨€çš„é£æ ¼ã€‚ åœ¨å‡½æ•°æ–¹é¢ï¼ŒSwift3.0ä¸­åšçš„å¦ä¸€é¡¹æ›´æ”¹æ˜¯å…³äºinoutå‚æ•°çš„å£°æ˜æ–¹å¼ï¼Œä¿®æ”¹äº†inoutå…³é”®å­—çš„å£°æ˜ä½ç½®ï¼ŒSwift2.2ä¸Swift3.0ç‰ˆæœ¬æ¯”å¦‚å¦‚ä¸‹ï¼š 123456789//åœ¨å‡½æ•°å†…éƒ¨ä¿®æ”¹å‚æ•°å˜é‡çš„å€¼//swift2.2func myFunc12(inout param:Int)&#123; param+=1&#125;//swift3.0func myFunc12( param:inout Int)&#123; param+=1&#125; æœ‰å…³Swiftä¸­å‡½æ•°çš„æ›´å¤šå†…å®¹ï¼Œå¯ä»¥åœ¨å¦‚ä¸‹åšå®¢è¿æ¥ä¸­æ‰¾åˆ°ï¼š http://my.oschina.net/u/2340880/blog/674616 äºŒã€é—­åŒ…æ–¹é¢åœ¨é—­åŒ…æ–¹é¢ï¼ŒSwift3.0ç‰ˆæœ¬ä¸­åªå¯¹æŸäº›ä¿®é¥°ç¬¦çš„ä½ç½®åšäº†ä¿®æ”¹ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314151617//é€ƒé€¸é—­åŒ…//swift2.2//func myFunc(@noescape closure:(Int,Int)-&gt;Bool)&#123;// //&#125;//swift3.0func myFunc( closure:@noescape(Int,Int)-&gt;Bool)&#123;&#125;//è‡ªåŠ¨é—­åŒ…//swift2.2//func myFunc2(@autoclosure(escaping) closure:()-&gt;Bool) &#123;// //&#125;func myFunc2( closure:@autoclosure(escaping)()-&gt;Bool) &#123; &#125; å…³äºSwiftä¸­é—­åŒ…çš„æ›´å¤šå†…å®¹ï¼Œå¯ä»¥åœ¨å¦‚ä¸‹åšå®¢é“¾æ¥ä¸­æ‰¾åˆ°ï¼š http://my.oschina.net/u/2340880/blog/675233ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}],"tags":[],"keywords":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}]},{"title":"iOSä¸­WebKitæ¡†æ¶åº”ç”¨ä¸è§£æ","slug":"227iOSä¸­WebKitæ¡†æ¶åº”ç”¨ä¸è§£æ","date":"2016-06-23T16:00:00.000Z","updated":"2021-07-09T02:59:16.125Z","comments":true,"path":"2016/06/24/227iOSä¸­WebKitæ¡†æ¶åº”ç”¨ä¸è§£æ/","link":"","permalink":"http://huishao.cc/2016/06/24/227iOSä¸­WebKitæ¡†æ¶åº”ç”¨ä¸è§£æ/","excerpt":"","text":"iOSä¸­WebKitæ¡†æ¶åº”ç”¨ä¸è§£æä¸€ã€å¼•è¨€åœ¨iOS8ä¹‹å‰ï¼Œåœ¨åº”ç”¨ä¸­åµŒå…¥ç½‘é¡µé€šå¸¸éœ€è¦ä½¿ç”¨UIWebViewè¿™æ ·ä¸€ä¸ªç±»ï¼Œè¿™ä¸ªç±»é€šè¿‡URLæˆ–è€…HTMLæ–‡ä»¶æ¥åŠ è½½ç½‘é¡µè§†å›¾ï¼ŒåŠŸèƒ½ååˆ†æœ‰é™ï¼Œåªèƒ½ä½œä¸ºè¾…åŠ©åµŒå…¥åŸç”Ÿåº”ç”¨ç¨‹åºä¸­ã€‚è™½ç„¶UIWebViewä¹Ÿå¯ä»¥åšåŸç”Ÿä¸JavaScriptäº¤äº’çš„ç›¸å…³å¤„ç†ï¼Œç„¶è€Œä¹Ÿæœ‰å¾ˆå¤§çš„å±€é™æ€§ï¼ŒJavaScriptè¦è°ƒç”¨åŸç”Ÿæ–¹æ³•é€šå¸¸éœ€è¦çº¦å®šå¥½åè®®ä¹‹åé€šè¿‡Requestæ¥ä¼ é€’ã€‚WebKitæ¡†æ¶ä¸­æ·»åŠ äº†ä¸€äº›åŸç”Ÿä¸JavaScriptäº¤äº’çš„æ–¹æ³•ï¼Œå¢å¼ºäº†ç½‘é¡µè§†å›¾ä¸åŸç”Ÿçš„äº¤äº’èƒ½åŠ›ã€‚å¹¶ä¸”WebKitæ¡†æ¶ä¸­é‡‡ç”¨å¯¼èˆªå †æ ˆçš„æ¨¡å‹æ¥ç®¡ç†ç½‘é¡µçš„è·³è½¬ï¼Œå¼€å‘è€…ä¹Ÿå¯ä»¥æ›´åŠ å®¹æ˜“çš„æ§åˆ¶å’Œç®¡ç†ç½‘é¡µçš„æ¸²æŸ“ã€‚å…³äºUIWebViewçš„ç›¸å…³ä½¿ç”¨ï¼Œåœ¨å‰é¢çš„åšå®¢ä¸­æœ‰è¯¦ç»†ä»‹ç»ï¼Œåœ°å€å¦‚ä¸‹ã€‚ UIWebViewçš„ä½¿ç”¨è¯¦è§£ï¼šhttp://my.oschina.net/u/2340880/blog/469916ã€‚ äºŒã€WebKitæ¡†æ¶æ¦‚è§ˆWebKitæ¡†æ¶ä¸­æ¶‰åŠçš„ç±»å¾ˆå¤šï¼Œæ¡†æ¶çš„è®¾è®¡ååˆ†é¢å‘å¯¹è±¡å’Œæ¨¡å—åŒ–ï¼Œå¼€å‘è€…åœ¨ä½¿ç”¨æ—¶å¯ä»¥è½»æ¾çš„å†™å‡ºç»“æ„æ¸…æ™°çš„ä»£ç ã€‚åœ¨è¿›è¡Œä½¿ç”¨å‰ï¼Œæˆ‘ä»¬é¦–å…ˆåº”è¯¥æ¸…æ¥šæ•´ä¸ªæ¡†æ¶çš„ç»“æ„å’Œå¼€å‘æ€è·¯ï¼Œä¸‹é¢ä¸€å¼ è„‘å›¾ä¸­åŸºæœ¬åˆ—å‡ºäº†WebKitæ¡†æ¶ä¸­æ‰€æ¶‰åŠåˆ°çš„æ‰€æœ‰é‡è¦çš„ç±»ä»¥åŠä»–ä»¬ä¹‹é—´çš„ç›¸äº’å…³ç³»ï¼š å¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒWebKitæ¡†æ¶ä¸­æœ€æ ¸å¿ƒçš„ç±»åº”è¯¥å±äºWKWebViewäº†ï¼Œè¿™ä¸ªç±»ä¸“é—¨ç”¨æ¥æ¸²æŸ“ç½‘é¡µè§†å›¾ï¼Œå…¶ä»–ç±»å’Œåè®®éƒ½å°†åŸºäºå®ƒå’ŒæœåŠ¡äºå®ƒã€‚ WKWebViewï¼šç½‘é¡µçš„æ¸²æŸ“ä¸å±•ç¤ºï¼Œé€šè¿‡WKWebViewConfigurationå¯ä»¥è¿›è¡Œé…ç½®ã€‚ WKWebViewConfigurationï¼šè¿™ä¸ªç±»ä¸“é—¨ç”¨æ¥é…ç½®WKWebViewã€‚ WKPreference:è¿™ä¸ªç±»ç”¨æ¥è¿›è¡ŒMç›¸å…³è®¾ç½®ã€‚ WKProcessPoolï¼šè¿™ä¸ªç±»ç”¨æ¥é…ç½®è¿›ç¨‹æ± ï¼Œä¸ç½‘é¡µè§†å›¾çš„èµ„æºå…±äº«æœ‰å…³ã€‚ WKUserContentControllerï¼šè¿™ä¸ªç±»ä¸»è¦ç”¨æ¥åšnativeä¸JavaScriptçš„äº¤äº’ç®¡ç†ã€‚ WKUserScriptï¼šç”¨äºè¿›è¡ŒJavaScriptæ³¨å…¥ã€‚ WKScriptMessageHandlerï¼šè¿™ä¸ªç±»ä¸“é—¨ç”¨æ¥å¤„ç†JavaScriptè°ƒç”¨nativeçš„æ–¹æ³•ã€‚ WKNavigationDelegateï¼šç½‘é¡µè·³è½¬é—´çš„å¯¼èˆªç®¡ç†åè®®ï¼Œè¿™ä¸ªåè®®å¯ä»¥ç›‘å¬ç½‘é¡µçš„æ´»åŠ¨ã€‚ WKNavigationActionï¼šç½‘é¡µæŸä¸ªæ´»åŠ¨çš„ç¤ºä¾‹åŒ–å¯¹è±¡ã€‚ WKUIDelegateï¼šç”¨äºäº¤äº’å¤„ç†JavaScriptä¸­çš„ä¸€äº›å¼¹å‡ºæ¡†ã€‚ WKBackForwardListï¼šå †æ ˆç®¡ç†çš„ç½‘é¡µåˆ—è¡¨ã€‚ WKBackForwardListItemï¼šæ¯ä¸ªç½‘é¡µèŠ‚ç‚¹å¯¹è±¡ã€‚ ä¸‰ã€ä½¿ç”¨WKWebViewConfigurationå¯¹WebViewè¿›è¡Œé…ç½®ä½¿ç”¨ä¸‹é¢çš„ä»£ç å¯ä»¥åˆ›å»ºä¸€ä¸ªWKWebViewè§†å›¾ï¼Œåˆ›å»ºWebViewè§†å›¾æ—¶ï¼Œéœ€è¦ä½¿ç”¨WKWebViewConfigurationæ¥è¿›è¡Œé…ç½®ï¼š 1234WKWebView * WK;WKWebViewConfiguration * config = [[WKWebViewConfiguration alloc]init];WK = [[WKWebView alloc]initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height-40) configuration:config];[WK loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@\"http://www.baidu.com\"]]]; WKWebViewConfigurationä¸­å¯ä»¥è¿›è¡Œé…ç½®çš„æ–¹æ³•å’Œå±æ€§å¦‚ä¸‹ï¼š 123//è®¾ç½®è¿›ç¨‹æ± WKProcessPool * pool = [[WKProcessPool alloc]init];config.processPool = pool; WKProcessPoolç±»ä¸­æ²¡æœ‰æš´éœ²ä»»ä½•å±æ€§å’Œæ–¹æ³•ï¼Œé…ç½®ä¸ºåŒä¸€ä¸ªè¿›ç¨‹æ± çš„WebViewä¼šå…±äº«æ•°æ®ï¼Œä¾‹å¦‚Cookieã€ç”¨æˆ·å‡­è¯ç­‰ï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡ç¼–å†™ç®¡ç†ç±»æ¥åˆ†é…ä¸åŒç»´åº¦çš„WebViewåœ¨ä¸åŒè¿›ç¨‹æ± ä¸­ã€‚ 123456789//è¿›è¡Œåå¥½è®¾ç½®WKPreferences * preference = [[WKPreferences alloc]init];//æœ€å°å­—ä½“å¤§å° å½“å°†javaScriptEnabledå±æ€§è®¾ç½®ä¸ºNOæ—¶ï¼Œå¯ä»¥çœ‹åˆ°æ˜æ˜¾çš„æ•ˆæœpreference.minimumFontSize = 0;//è®¾ç½®æ˜¯å¦æ”¯æŒjavaScript é»˜è®¤æ˜¯æ”¯æŒçš„preference.javaScriptEnabled = YES;//è®¾ç½®æ˜¯å¦å…è®¸ä¸ç»è¿‡ç”¨æˆ·äº¤äº’ç”±javaScriptè‡ªåŠ¨æ‰“å¼€çª—å£preference.javaScriptCanOpenWindowsAutomatically = YES;config.preferences = preference; WKPerferenceå®ä¾‹ä¸ºWebViewæä¾›ä¸€ä¸ªåå¥½è®¾ç½®ã€‚ 123456789//è®¾ç½®å†…å®¹äº¤äº’æ§åˆ¶å™¨ ç”¨äºå¤„ç†JavaScriptä¸nativeäº¤äº’WKUserContentController * userController = [[WKUserContentController alloc]init];//è®¾ç½®å¤„ç†ä»£ç†å¹¶ä¸”æ³¨å†Œè¦è¢«jsè°ƒç”¨çš„æ–¹æ³•åç§°[userController addScriptMessageHandler:self name:@\"name\"];//jsæ³¨å…¥ï¼Œæ³¨å…¥ä¸€ä¸ªæµ‹è¯•æ–¹æ³•ã€‚NSString *javaScriptSource = @\"function userFunc()&#123;window.webkit.messageHandlers.name.postMessage( &#123;\\\"name\\\":\\\"HS\\\"&#125;)&#125;\";WKUserScript *userScript = [[WKUserScript alloc] initWithSource:javaScriptSource injectionTime:WKUserScriptInjectionTimeAtDocumentStart forMainFrameOnly:YES];// forMainFrameOnly:NO(å…¨å±€çª—å£)ï¼Œyesï¼ˆåªé™ä¸»çª—å£ï¼‰[userController addUserScript:userScript];config.userContentController = userController; WKUserContentControllerä¸“é—¨ç”¨æ¥ç®¡ç†nativeä¸JavaScriptçš„äº¤äº’è¡Œä¸ºï¼ŒaddScriptMessageHandler:name:æ–¹æ³•æ¥æ³¨å†Œè¦è¢«jsè°ƒç”¨çš„æ–¹æ³•åç§°ï¼Œä¹‹åå†JavaScriptä¸­ä½¿ç”¨window.webkit.messageHandlers.name.postMessage()æ–¹æ³•æ¥åƒnativeå‘é€æ¶ˆæ¯ï¼Œæ”¯æŒOCä¸­å­—å…¸ï¼Œæ•°ç»„ï¼ŒNSNumberç­‰åŸç”Ÿæ•°æ®ç±»å‹ï¼ŒJavaScriptä»£ç ä¸­çš„nameè¦å’Œä¸Šé¢æ³¨å†Œçš„ç›¸åŒã€‚åœ¨nativeä»£ç†çš„å›è°ƒæ–¹æ³•ä¸­ï¼Œä¼šè·å–åˆ°JavaScriptä¼ é€’è¿›æ¥çš„æ¶ˆæ¯ï¼Œå¦‚ä¸‹ï¼š 123-(void)userContentController:(WKUserContentController *)userContentController didReceiveScriptMessage:(WKScriptMessage *)message&#123; //è¿™é‡Œå¯ä»¥è·å–åˆ°JavaScriptä¼ é€’è¿›æ¥çš„æ¶ˆæ¯&#125; WKScriptMessageç±»æ˜¯JavaScriptä¼ é€’çš„å¯¹è±¡å®ä¾‹ï¼Œå…¶ä¸­å±æ€§å¦‚ä¸‹ï¼š 12345678//ä¼ é€’çš„æ¶ˆæ¯ä¸»ä½“@property (nonatomic, readonly, copy) id body;//ä¼ é€’æ¶ˆæ¯çš„WebView@property (nullable, nonatomic, readonly, weak) WKWebView *webView;//ä¼ é€’æ¶ˆæ¯çš„WebViewå½“å‰é¡µé¢å¯¹è±¡@property (nonatomic, readonly, copy) WKFrameInfo *frameInfo;//æ¶ˆæ¯åç§°@property (nonatomic, readonly, copy) NSString *name; WKUserContentControllerå®ä¾‹çš„addUserScript:ç”¨äºæ³¨å…¥JavaScriptä»£ç ï¼Œåé¢ä¼šä¸“é—¨ä»‹ç»ã€‚ 12//è®¾ç½®æ•°æ®å­˜å‚¨storeconfig.websiteDataStore = [WKWebsiteDataStore defaultDataStore]; WebKitæ¡†æ¶é‡‡ç”¨å…¶æœ¬èº«çš„ç¼“å­˜æ¡†æ¶ï¼ŒWKWebsiteDataStoreç±»ç”¨æ¥å¤„ç†æ•°æ®çš„å­˜å‚¨ï¼Œå…¶ä¸­å±æ€§å’Œæ–¹æ³•å¦‚ä¸‹ï¼š 12345678910@interface WKWebsiteDataStore : NSObject//è·å–é»˜è®¤çš„å­˜å‚¨å™¨ æ­¤å­˜å‚¨å™¨ä¸ºæŒä¹…æ€§çš„ä¼šè¢«å†™å…¥ç£ç›˜+ (WKWebsiteDataStore *)defaultDataStore;//è·å–ä¸€ä¸ªä¸´æ—¶çš„å­˜å‚¨å™¨+ (WKWebsiteDataStore *)nonPersistentDataStore;//å­˜å‚¨å™¨æ˜¯å¦æ˜¯ä¸´æ—¶çš„@property (nonatomic, readonly, getter=isPersistent) BOOL persistent;//æ‰€æœ‰å¯ä»¥å­˜å‚¨çš„ç±»å‹+ (NSSet&lt;NSString *&gt; *)allWebsiteDataTypes;@end 12345678910111213141516171819202122//è®¾ç½®æ˜¯å¦å°†ç½‘é¡µå†…å®¹å…¨éƒ¨åŠ è½½åˆ°å†…å­˜åå†æ¸²æŸ“config.suppressesIncrementalRendering = NO;//è®¾ç½®HTML5è§†é¢‘æ˜¯å¦å…è®¸ç½‘é¡µæ’­æ”¾ è®¾ç½®ä¸ºNOåˆ™ä¼šä½¿ç”¨æœ¬åœ°æ’­æ”¾å™¨config.allowsInlineMediaPlayback = YES;//è®¾ç½®æ˜¯å¦å…è®¸ariPlayæ’­æ”¾config.allowsAirPlayForMediaPlayback = YES;//è®¾ç½®è§†é¢‘æ˜¯å¦éœ€è¦ç”¨æˆ·æ‰‹åŠ¨æ’­æ”¾ è®¾ç½®ä¸ºNOåˆ™ä¼šå…è®¸è‡ªåŠ¨æ’­æ”¾config.requiresUserActionForMediaPlayback = NO;//è®¾ç½®æ˜¯å¦å…è®¸ç”»ä¸­ç”»æŠ€æœ¯ åœ¨ç‰¹å®šè®¾å¤‡ä¸Šæœ‰æ•ˆconfig.allowsPictureInPictureMediaPlayback = YES;//è®¾ç½®é€‰æ‹©æ¨¡å¼ æ˜¯æŒ‰å­—ç¬¦é€‰æ‹© è¿˜æ˜¯æŒ‰æ¨¡å—é€‰æ‹©/*typedef NS_ENUM(NSInteger, WKSelectionGranularity) &#123; //æŒ‰æ¨¡å—é€‰æ‹© WKSelectionGranularityDynamic, //æŒ‰å­—ç¬¦é€‰æ‹© WKSelectionGranularityCharacter,&#125; NS_ENUM_AVAILABLE_IOS(8_0);*/config.selectionGranularity = WKSelectionGranularityCharacter;//è®¾ç½®è¯·æ±‚çš„User-Agentä¿¡æ¯ä¸­åº”ç”¨ç¨‹åºåç§° iOS9åå¯ç”¨config.applicationNameForUserAgent = @\"HS\"; å››ã€WKWebViewä¸­çš„å±æ€§å’Œæ–¹æ³•è§£æä¸‹é¢åˆ—ä¸¾äº†WKWebViewä¸­å¸¸ç”¨çš„å±æ€§å’Œæ–¹æ³•ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546//è®¾ç½®å¯¼èˆªä»£ç†@property (nullable, nonatomic, weak) id &lt;WKNavigationDelegate&gt; navigationDelegate;//è®¾ç½®UIä»£ç†@property (nullable, nonatomic, weak) id &lt;WKUIDelegate&gt; UIDelegate;//å¯¼èˆªåˆ—è¡¨@property (nonatomic, readonly, strong) WKBackForwardList *backForwardList;//é€šè¿‡urlåŠ è½½ç½‘é¡µè§†å›¾- (nullable WKNavigation *)loadRequest:(NSURLRequest *)request;//é€šè¿‡æ–‡ä»¶åŠ è½½ç½‘é¡µè§†å›¾- (nullable WKNavigation *)loadFileURL:(NSURL *)URL allowingReadAccessToURL:(NSURL *)readAccessURL NS_AVAILABLE(10_11, 9_0);//é€šè¿‡HTMLå­—ç¬¦ä¸²åŠ è½½ç½‘é¡µè§†å›¾- (nullable WKNavigation *)loadHTMLString:(NSString *)string baseURL:(nullable NSURL *)baseURL;//é€šè¿‡dataæ•°æ®åŠ è½½ç½‘é¡µè§†å›¾- (nullable WKNavigation *)loadData:(NSData *)data MIMEType:(NSString *)MIMEType characterEncodingName:(NSString *)characterEncodingName baseURL:(NSURL *)baseURL NS_AVAILABLE(10_11, 9_0);//æ¸²æŸ“å¯¼èˆªåˆ—è¡¨ä¸­çš„æŸä¸ªç½‘é¡µèŠ‚ç‚¹- (nullable WKNavigation *)goToBackForwardListItem:(WKBackForwardListItem *)item;//ç½‘é¡µæ ‡é¢˜@property (nullable, nonatomic, readonly, copy) NSString *title;//ç½‘é¡µçš„url@property (nullable, nonatomic, readonly, copy) NSURL *URL;//ç½‘é¡µæ˜¯å¦æ­£åœ¨åŠ è½½ä¸­@property (nonatomic, readonly, getter=isLoading) BOOL loading;//åŠ è½½è¿›åº¦ å¯ä»¥ç›‘å¬è¿™ä¸ªå±æ€§çš„å€¼é…åˆUIProgressViewæ¥è®¾è®¡è¿›åº¦æ¡@property (nonatomic, readonly) double estimatedProgress;//æ˜¯å¦å…¨éƒ¨æ˜¯å®‰å…¨è¿æ¥@property (nonatomic, readonly) BOOL hasOnlySecureContent;//è¯ä¹¦åˆ—è¡¨@property (nonatomic, readonly, copy) NSArray *certificateChain;//æ˜¯å¦å¯ä»¥å›é€€@property (nonatomic, readonly) BOOL canGoBack;//æ˜¯å¦å¯ä»¥å‰è¿›@property (nonatomic, readonly) BOOL canGoForward;//å›é€€ç½‘é¡µ- (nullable WKNavigation *)goBack;//å‰è¿›ç½‘é¡µ- (nullable WKNavigation *)goForward;//åˆ·æ–°ç½‘é¡µ- (nullable WKNavigation *)reload;//å¿½ç•¥ç¼“å­˜çš„åˆ·æ–°- (nullable WKNavigation *)reloadFromOrigin;//åœæ­¢åŠ è½½- (void)stopLoading;//æ‰§è¡ŒJavaScriptä»£ç - (void)evaluateJavaScript:(NSString *)javaScriptString completionHandler:(void (^ __nullable)(__nullable id, NSError * __nullable error))completionHandler;//æ˜¯å¦å…è®¸å³æ»‘è¿”å›æ‰‹åŠ¿@property (nonatomic) BOOL allowsBackForwardNavigationGestures; WKBackForwardListç±»ä¸ºå¯¼èˆªç®¡ç†çš„ç½‘é¡µåˆ—è¡¨ç±»ï¼Œå…¶ä¸­å±æ€§æ–¹æ³•æ„ä¹‰å¦‚ä¸‹ï¼š 1234567891011121314@interface WKBackForwardList : NSObject//å½“å‰æ‰€åœ¨çš„ç½‘é¡µèŠ‚ç‚¹@property (nullable, nonatomic, readonly, strong) WKBackForwardListItem *currentItem;//å‰è¿›çš„ä¸€ä¸ªç½‘é¡µèŠ‚ç‚¹@property (nullable, nonatomic, readonly, strong) WKBackForwardListItem *forwardItem;//å›é€€çš„ä¸€ä¸ªç½‘é¡µèŠ‚ç‚¹@property (nullable, nonatomic, readonly, strong) WKBackForwardListItem *backItem;//è·å–æŸä¸ªindexçš„ç½‘é¡µèŠ‚ç‚¹- (nullable WKBackForwardListItem *)itemAtIndex:(NSInteger)index;//è·å–å›é€€çš„èŠ‚ç‚¹æ•°ç»„@property (nonatomic, readonly, copy) NSArray&lt;WKBackForwardListItem *&gt; *backList;//è·å–å‰è¿›çš„èŠ‚ç‚¹æ•°ç»„@property (nonatomic, readonly, copy) NSArray&lt;WKBackForwardListItem *&gt; *forwardList;@end åœ¨WebKitä¸­ï¼Œç½‘é¡µèŠ‚ç‚¹è¢«æŠ½è±¡æˆä¸ºäº†WKBackForwardListItemç±»ï¼Œè¿™ä¸ªç±»ä¸­å°è£…çš„å±æ€§å¦‚ä¸‹ï¼š 1234567@interface WKBackForwardListItem : NSObject//å½“å‰èŠ‚ç‚¹çš„URL@property (readonly, copy) NSURL *URL;//å½“å‰èŠ‚ç‚¹çš„æ ‡é¢˜@property (nullable, readonly, copy) NSString *title;//åˆ›å»ºæ­¤WebViewçš„åˆå§‹URL@property (readonly, copy) NSURL *initialURL; äº”ã€å…³äºnativeä¸JavaScriptäº¤äº’WebKitä¸­çš„nativeä¸JavaScriptçš„äº¤äº’ä¸»è¦æœ‰4ç±»ã€‚ 1.JavaScriptè°ƒç”¨nativeæ–¹æ³•è¿™ç§æ–¹å¼æ˜¯ç”±WKUserContentControlleræ³¨å†Œï¼Œå¹¶åœ¨ä»£ç†æ–¹æ³•ä¸­å®ç°çš„ã€‚ 2.nativeè°ƒç”¨JavaScriptæ–¹æ³•è¿™ç§æ–¹å¼é€šè¿‡WKWebViewç›´æ¥è°ƒç”¨evaluteJavaScript:completionHandler:æ–¹æ³•æ¥å®ç°ã€‚ 3.å°†JavaScriptä»£ç æ³¨å…¥è¿™ç§æ–¹å¼å¯ä»¥åœ¨ç½‘é¡µä¸­æ³¨å…¥ä¸€äº›è‡ªå®šä¹‰çš„JavaScriptä»£ç ï¼Œä¹Ÿå¯ä»¥æ³¨å…¥è‡ªå®šä¹‰çš„æ–¹æ³•ï¼Œå†ä½¿ç”¨evaluteJavaScript:completionHandler:æ¥è°ƒç”¨æ–¹æ³•ã€‚JavaScriptä»£ç çš„æ³¨å…¥ä¹Ÿæ˜¯é€šè¿‡WKUserContentControlleræ¥å®Œæˆçš„ï¼Œä½¿ç”¨addUserScript:æ–¹æ³•æ¥æ³¨å…¥JavaScriptï¼Œå…¶ä¸­éœ€è¦é€šè¿‡WKUserScriptç±»æ¥ç”Ÿæˆè¦æ³¨å…¥çš„å¯¹è±¡ï¼Œè¿™ä¸ªç±»ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•æ¥è¿›è¡Œå®ä¾‹åŒ–ï¼š 12345678910111213/*sourceä¸ºè¦æ³¨å…¥çš„jsä»£ç WKUserScriptInjectionTimeè®¾ç½®æ³¨å…¥çš„æ—¶æœºforMainFrameOnlyå‚æ•°è®¾ç½®æ˜¯å¦åªåœ¨ä¸»é¡µé¢æ³¨å…¥typedef NS_ENUM(NSInteger, WKUserScriptInjectionTime) &#123; //åŸjsä»£ç è¿è¡Œå‰æ³¨å…¥ WKUserScriptInjectionTimeAtDocumentStart, //åŸjsä»£ç è¿è¡Œåæ³¨å…¥ WKUserScriptInjectionTimeAtDocumentEnd&#125; NS_ENUM_AVAILABLE(10_10, 8_0);*/- (instancetype)initWithSource:(NSString *)source injectionTime:(WKUserScriptInjectionTime)injectionTime forMainFrameOnly:(BOOL)forMainFrameOnly; 4.é€šè¿‡WKUIDelegateæ¥äº¤äº’è¿™ç§æ–¹å¼ä¸»è¦ç”¨äºç›¸åº”JavaScriptä¸­çš„å¼¹å‡ºæ¡†ï¼Œåé¢ä¼šè¯¦ç»†ä»‹ç»è¿™ä¸ªåè®®ã€‚ å…­ã€WKNavagationDelegateä¸­æ–¹æ³•è§£æWKNavagationDelegateåè®®é‡è¦æœ‰ä¸¤ä¸ªä½œç”¨ï¼Œç›‘å¬é¡µé¢æ¸²æŸ“æµç¨‹ä¸æ§åˆ¶é¡µé¢è·³è½¬ï¼Œå…¶ä¸­æ–¹æ³•å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970/*å†³å®šæ˜¯å¦å“åº”ç½‘é¡µçš„æŸä¸ªåŠ¨ä½œï¼Œä¾‹å¦‚åŠ è½½ï¼Œå›é€€ï¼Œå‰è¿›ï¼Œåˆ·æ–°ç­‰ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œå¿…é¡»æ‰§è¡ŒdecisionHandler()ä»£ç å—ï¼Œå¹¶å°†æ˜¯å¦å…è®¸è¿™ä¸ªæ´»åŠ¨æ‰§è¡Œåœ¨blockä¸­è¿›è¡Œä¼ å…¥*//*WKNavigationActionæ˜¯ç½‘é¡µåŠ¨ä½œçš„æŠ½è±¡åŒ–ï¼Œå…¶ä¸­å°è£…äº†è®¸å¤šè¡Œä¸ºä¿¡æ¯ï¼Œåé¢ä¼šä»‹ç»WKNavigationActionPolicyä¸ºå¼€å‘è€…å›æ‰§ï¼Œæšä¸¾å¦‚ä¸‹ï¼štypedef NS_ENUM(NSInteger, WKNavigationActionPolicy) &#123; //å–æ¶ˆæ­¤æ¬¡è¡Œä¸º WKNavigationActionPolicyCancel, //å…è®¸æ­¤æ¬¡è¡Œä¸º WKNavigationActionPolicyAllow,&#125; NS_ENUM_AVAILABLE(10_10, 8_0);*/-(void)webView:(WKWebView *)webView decidePolicyForNavigationAction:(WKNavigationAction *)navigationAction decisionHandler:(void (^)(WKNavigationActionPolicy))decisionHandler&#123; decisionHandler(WKNavigationActionPolicyAllow);&#125;//éœ€è¦å“åº”èº«ä»½éªŒè¯æ—¶è°ƒç”¨ åŒæ ·åœ¨blockä¸­éœ€è¦ä¼ å…¥ç”¨æˆ·èº«ä»½å‡­è¯-(void)webView:(WKWebView *)webView didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge completionHandler:(void (^)(NSURLSessionAuthChallengeDisposition, NSURLCredential * _Nullable))completionHandler&#123; //ç”¨æˆ·èº«ä»½ä¿¡æ¯ NSURLCredential *newCred = [NSURLCredential credentialWithUser:@\"\" password:@\"\" persistence:NSURLCredentialPersistenceNone]; // ä¸º challenge çš„å‘é€æ–¹æä¾› credential [[challenge sender] useCredential:newCred forAuthenticationChallenge:challenge]; completionHandler(NSURLSessionAuthChallengeUseCredential,newCred);&#125;//æ¥æ”¶åˆ°æ•°æ®åæ˜¯å¦å…è®¸æ‰§è¡Œæ¸²æŸ“/*å…¶ä¸­ï¼ŒWKNavigationResponseä¸ºè¯·æ±‚å›æ‰§ä¿¡æ¯WKNavigationResponsePokicyä¸ºå¼€å‘è€…å›æ‰§ï¼Œæšä¸¾å¦‚ä¸‹ï¼štypedef NS_ENUM(NSInteger, WKNavigationResponsePolicy) &#123; //å–æ¶ˆæ¸²æŸ“ WKNavigationResponsePolicyCancel, //å…è®¸æ¸²æŸ“ WKNavigationResponsePolicyAllow,&#125; NS_ENUM_AVAILABLE(10_10, 8_0);*/-(void)webView:(WKWebView *)webView decidePolicyForNavigationResponse:(WKNavigationResponse *)navigationResponse decisionHandler:(void (^)(WKNavigationResponsePolicy))decisionHandler&#123; decisionHandler(WKNavigationResponsePolicyAllow);&#125;//=====================ä¸‹é¢è¿™ä¸ªåè®®æ–¹æ³•ç”¨äºç›‘å¬æµç¨‹=========================================//é¡µé¢åŠ è½½å¯åŠ¨æ—¶è°ƒç”¨-(void)webView:(WKWebView *)webView didStartProvisionalNavigation:(WKNavigation *)navigation&#123;&#125;//å½“ä¸»æœºæ¥æ”¶åˆ°çš„æœåŠ¡é‡å®šå‘æ—¶è°ƒç”¨-(void)webView:(WKWebView *)webView didReceiveServerRedirectForProvisionalNavigation:(WKNavigation *)navigation&#123;&#125;//å†…å®¹åˆ°è¾¾ä¸»æœºæ—¶è°ƒç”¨-(void)webView:(WKWebView *)webView didCommitNavigation:(WKNavigation *)navigation&#123;&#125;//ä¸»é¡µåŠ è½½å®Œæˆæ—¶è°ƒç”¨-(void)webView:(WKWebView *)webView didFinishNavigation:(WKNavigation *)navigation&#123;&#125;//æäº¤å‘ç”Ÿé”™è¯¯æ—¶è°ƒç”¨-(void)webView:(WKWebView *)webView didFailNavigation:(WKNavigation *)navigation withError:(NSError *)error&#123;&#125;//ä¸»é¡µæ•°æ®åŠ è½½å‘ç”Ÿé”™è¯¯æ—¶è°ƒç”¨-(void)webView:(WKWebView *)webView didFailProvisionalNavigation:(null_unspecified WKNavigation *)navigation withError:(nonnull NSError *)error&#123;&#125;//è¿›ç¨‹è¢«ç»ˆæ­¢æ—¶è°ƒç”¨-(void)webViewWebContentProcessDidTerminate:(WKWebView *)webView&#123;&#125; ä¸ƒã€WKUIDelegateåè®®ä¸­æ–¹æ³•è§£æ123456789101112131415161718192021222324//åˆ›å»ºæ–°çš„webViewæ—¶è°ƒç”¨çš„æ–¹æ³•-(WKWebView *)webView:(WKWebView *)webView createWebViewWithConfiguration:(WKWebViewConfiguration *)configuration forNavigationAction:(WKNavigationAction *)navigationAction windowFeatures:(WKWindowFeatures *)windowFeatures&#123; return webView;&#125;//å…³é—­webViewæ—¶è°ƒç”¨çš„æ–¹æ³•-(void)webViewDidClose:(WKWebView *)webView&#123;&#125;//ä¸‹é¢è¿™äº›æ–¹æ³•æ˜¯äº¤äº’JavaScriptçš„æ–¹æ³•//JavaScriptè°ƒç”¨alertæ–¹æ³•åå›è°ƒçš„æ–¹æ³• messageä¸­ä¸ºalertæç¤ºçš„ä¿¡æ¯ å¿…é¡»è¦åœ¨å…¶ä¸­è°ƒç”¨completionHandler()-(void)webView:(WKWebView *)webView runJavaScriptAlertPanelWithMessage:(NSString *)message initiatedByFrame:(WKFrameInfo *)frame completionHandler:(void (^)(void))completionHandler&#123; NSLog(@\"%@\",message); completionHandler();&#125;//JavaScriptè°ƒç”¨confirmæ–¹æ³•åå›è°ƒçš„æ–¹æ³• confirmæ˜¯jsä¸­çš„ç¡®å®šæ¡†ï¼Œéœ€è¦åœ¨blockä¸­æŠŠç”¨æˆ·é€‰æ‹©çš„æƒ…å†µä¼ é€’è¿›å»-(void)webView:(WKWebView *)webView runJavaScriptConfirmPanelWithMessage:(NSString *)message initiatedByFrame:(WKFrameInfo *)frame completionHandler:(void (^)(BOOL))completionHandler&#123; NSLog(@\"%@\",message); completionHandler(YES);&#125;//JavaScriptè°ƒç”¨promptæ–¹æ³•åå›è°ƒçš„æ–¹æ³• promptæ˜¯jsä¸­çš„è¾“å…¥æ¡† éœ€è¦åœ¨blockä¸­æŠŠç”¨æˆ·è¾“å…¥çš„ä¿¡æ¯ä¼ å…¥-(void)webView:(WKWebView *)webView runJavaScriptTextInputPanelWithPrompt:(NSString *)prompt defaultText:(NSString *)defaultText initiatedByFrame:(WKFrameInfo *)frame completionHandler:(void (^)(NSString * _Nullable))completionHandler&#123; NSLog(@\"%@\",prompt); completionHandler(@\"123\");&#125; å…«ã€æ‰©å±•é¦–å…ˆï¼Œåœ¨æ³¨å†Œè¦è¢«JavaScriptè°ƒç”¨çš„æ–¹æ³•æ—¶éœ€è¦è®¾ç½®ä»£ç†ï¼Œåœ¨ä¸éœ€è¦æ—¶éœ€è¦å°†ä»£ç†ç§»é™¤ï¼ŒWKUserContentControllerä¸­ä¹Ÿæä¾›äº†ç§»é™¤è¿™ä¸ªä»£ç†çš„æ–¹æ³•ï¼Œå¦‚æœä¸ç§»é™¤ï¼Œå°†ä¼šé€ æˆWebViewä¸èƒ½é‡Šæ”¾ã€‚æ–¹æ³•å¦‚ä¸‹ï¼š 1234//æ³¨å†Œä¸€ä¸ªç›‘å¬æ–¹æ³•- (void)addScriptMessageHandler:(id &lt;WKScriptMessageHandler&gt;)scriptMessageHandler name:(NSString *)name;//ç§»é™¤ä¸€ä¸ªæ–¹æ³•çš„ç›‘å¬- (void)removeScriptMessageHandlerForName:(NSString *)name; åŒæ ·ä¸æ³¨å…¥JavaScriptå¯¹åº”ï¼Œä¹Ÿå¯ä»¥å°†æ³¨å…¥çš„ä»£ç ç§»é™¤ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š 1234//æ³¨å…¥ä¸€ä¸ªJavaScriptæŠ½è±¡å¯¹è±¡- (void)addUserScript:(WKUserScript *)userScript;//ç§»é™¤æ‰€æœ‰æ³¨å…¥- (void)removeAllUserScripts; åœ¨ä¸Šé¢ï¼Œç»å¸¸ä¼šè§åˆ°WKNavagationActionè¿™ä¸ªç±»ï¼Œè¿™ä¸ªç±»ä¸­å°è£…çš„æ˜¯ä¸€äº›é¡µé¢æ´»åŠ¨ä¿¡æ¯ï¼Œå¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526@interface WKNavigationAction : NSObject//åŸé¡µé¢@property (nonatomic, readonly, copy) WKFrameInfo *sourceFrame;//ç›®æ ‡é¡µé¢@property (nullable, nonatomic, readonly, copy) WKFrameInfo *targetFrame;//è¯·æ±‚URL@property (nonatomic, readonly, copy) NSURLRequest *request;//æ´»åŠ¨ç±»å‹/*typedef NS_ENUM(NSInteger, WKNavigationType) &#123; //é“¾æ¥æ¿€æ´» WKNavigationTypeLinkActivated, //æäº¤æ“ä½œ WKNavigationTypeFormSubmitted, //å‰è¿›æ“ä½œ WKNavigationTypeBackForward, //åˆ·æ–°æ“ä½œ WKNavigationTypeReload, //é‡æäº¤æ“ä½œ ä¾‹å¦‚å‰è¿› åé€€ åˆ·æ–° WKNavigationTypeFormResubmitted, //å…¶ä»–ç±»å‹ WKNavigationTypeOther = -1,&#125; NS_ENUM_AVAILABLE(10_10, 8_0);*/@property (nonatomic, readonly) WKNavigationType navigationType;@end ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"Swift3.0å¸¦æ¥çš„å˜åŒ–æ±‡æ€»ç³»åˆ—äºŒâ€”â€”é›†åˆç±»å‹ä¸­çš„å˜åŒ–","slug":"226Swift3.0å¸¦æ¥çš„å˜åŒ–æ±‡æ€»ç³»åˆ—äºŒâ€”â€”é›†åˆç±»å‹ä¸­çš„å˜åŒ–","date":"2016-06-17T16:00:00.000Z","updated":"2021-07-08T11:39:00.322Z","comments":true,"path":"2016/06/18/226Swift3.0å¸¦æ¥çš„å˜åŒ–æ±‡æ€»ç³»åˆ—äºŒâ€”â€”é›†åˆç±»å‹ä¸­çš„å˜åŒ–/","link":"","permalink":"http://huishao.cc/2016/06/18/226Swift3.0å¸¦æ¥çš„å˜åŒ–æ±‡æ€»ç³»åˆ—äºŒâ€”â€”é›†åˆç±»å‹ä¸­çš„å˜åŒ–/","excerpt":"","text":"Swift3.0å¸¦æ¥çš„å˜åŒ–æ±‡æ€»ç³»åˆ—äºŒâ€”â€”é›†åˆç±»å‹ä¸­çš„å˜åŒ–ä¸å­—ç¬¦ä¸²ç±»ä¼¼ï¼ŒSwiftä¸­é›†åˆçš„ç±»å‹åœ¨3.0ç‰ˆæœ¬ä¸­ä¹Ÿåšäº†å¤§é‡APIä¸Šé¢çš„ä¿®æ”¹ã€‚ ä¸€ã€Arrayæ•°ç»„çš„æ›´æ”¹arrayæ•°ç»„ä¸­ä¿®æ”¹çš„APIç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869//åˆ›å»ºå¤§é‡ç›¸åŒå…ƒç´ çš„æ•°ç»„//åˆ›å»ºæœ‰10ä¸ªStringç±»å‹å…ƒç´ çš„æ•°ç»„ï¼Œå¹¶ä¸”æ¯ä¸ªå…ƒç´ éƒ½ä¸ºå­—ç¬¦ä¸²\"Hello\"//swift2.2//var array3 = [String](count: 10, repeatedValue: \"Hello\")//swift3.0var array3 = [String](repeating: \"Hello\", count: 10)//åˆ›å»ºæœ‰10ä¸ªIntç±»å‹å…ƒç´ çš„æ•°ç»„ï¼Œä¸”æ¯ä¸ªå…ƒç´ éƒ½ä¸º1//swift2.2//var array4 = Array(count: 10, repeatedValue: 1)//swift3.0var array4 = Array(repeating: 1, count: 10)var array = [1,2,3,4,5,6,7,8,9]//å‘æ•°ç»„ä¸­è¿½åŠ ä¸€ç»„å…ƒç´ //swift2.2//array.appendContentsOf([11,12,13])//swift3.0array.append(contentsOf: [11,12,13])//å‘æ•°ç»„ä¸­çš„æŸä¸ªä½ç½®æ’å…¥ä¸€ä¸ªå…ƒç´ //swift2.2//array.insert(0, atIndex: 0)//swift3.0array.insert(0, at: 0)//å‘æ•°ç»„ä¸­çš„æŸä¸ªä½ç½®æ’å…¥ä¸€ç»„å…ƒç´ //swift2.2//array.insertContentsOf([-2,-1], at: 0)//swift3.0array.insert(contentsOf: [-2,-1], at: 0)//ç§»é™¤æ•°ç»„ä¸­æŸä¸ªä½ç½®çš„å…ƒç´ //swift2.2//array.removeAtIndex(1)//swift3.0array.remove(at: 1)//ç§»é™¤ä¸€ä¸ªèŒƒå›´å†…çš„å…ƒç´ //swift2.2//array.removeRange(0...2)//swift3.0array.removeSubrange(0...2)//ä¿®æ”¹ä¸€ä¸ªèŒƒå›´å†…çš„å…ƒç´ //swift2.2//array.replaceRange(0...2, with: [0,1])//swift3.0array.replaceSubrange(0...2, with: [0,1])//è¿›è¡Œæ•°ç»„æšä¸¾éå† å°†è¾“å‡º (0,0) (1,1) (2,2) (3,3) (4,4)//swift3.0 ä¸­å°†æšä¸¾å±æ€§enumerate ä¿®æ”¹ä¸ºenumerated()æ–¹æ³•for item in arrayLet.enumerated()&#123; print(item)&#125;var arraySort = [1,3,5,6,7]//è·å–æ•°ç»„ä¸­çš„æœ€å¤§å€¼//swift2.2//arraySort.maxElement()//swift3.0arraySort.max()//è·å–æ•°ç»„ä¸­çš„æœ€å°å€¼//swift2.2//arraySort.minElement()//swift3.0arraySort.min()//ä»å¤§åˆ°å°æ’åº//swift2.2//arraySort = arraySort.sort(&gt;)//swift3.0arraySort = arraySort.sorted(isOrderedBefore: &gt;)//ä»å°åˆ°å¤§æ’åº//swift2.2//arraySort = arraySort.sort(&lt;)//swift3.0arraySort = arraySort.sorted(isOrderedBefore: &lt;) äºŒã€Seté›†åˆä¸­çš„æ›´æ”¹Seté›†åˆä¸­çš„ä¿®æ”¹ç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465//åˆ›å»ºseté›†åˆvar set1:Set&lt;Int&gt; = [1,2,3,4]//è¿›è¡Œä¸‹æ ‡çš„ç§»åŠ¨//è·å–æŸä¸ªä¸‹æ ‡åä¸€ä¸ªå…ƒç´ //swlft2.2//set1[set1.startIndex.successor()]//swift3.0set1[set1.index(after: set1.startIndex)]//è·å–æŸä¸ªä¸‹æ ‡åå‡ ä½çš„å…ƒç´ //swift2.2//set1[set1.startIndex.advancedBy(3)]//swift3.0set1[set1.index(set1.startIndex, offsetBy: 3)]//è·å–é›†åˆä¸­çš„æœ€å¤§å€¼//swift2.2//set1.maxElement()//swift3.0set1.max()//è·å–é›†åˆä¸­çš„æœ€å°å€¼//swift2.2//set1.minElement()//swift3.0set1.min()//ç§»é™¤é›†åˆä¸­æŸä¸ªä½ç½®çš„å…ƒç´ //swift2.2//set1.removeAtIndex(set1.indexOf(3)!)//swift3.0set1.remove(at: set1.index(of: 3)!)var set3:Set&lt;Int&gt; = [1,2,3,4]var set4:Set&lt;Int&gt; = [1,2,5,6]//è¿”å›äº¤é›† &#123;1ï¼Œ2&#125;//swift2.2//var setInter = set3.intersect(set4)//swift3.0var setInter = set3.intersection(set4)//è¿”å›äº¤é›†çš„è¡¥é›†&#123;3ï¼Œ4ï¼Œ5ï¼Œ6&#125;//swift2.2//var setEx = set3.exclusiveOr(set4)//swift3.0var setEx = set3.symmetricDifference(set4)var set5:Set = [1,2]var set6:Set = [2,3]var set7:Set = [1,2,3]var set8:Set = [1,2,3]//åˆ¤æ–­æ˜¯å¦æ˜¯æŸä¸ªé›†åˆçš„å­é›† set5æ˜¯set7çš„å­é›† è¿”å›ture//swift2.2//set5.isSubsetOf(set7)//swift3.0set5.isSubset(of: set7)//åˆ¤æ–­æ˜¯å¦æ˜¯æŸä¸ªé›†åˆçš„è¶…é›† set7æ˜¯set5çš„è¶…é›† è¿”å›ture//swift2.2//set7.isSupersetOf(set5)//swift3.0set7.isSuperset(of: set5)//åˆ¤æ–­æ˜¯å¦æ˜¯æŸä¸ªé›†åˆçš„çœŸå­é›† set5æ˜¯set7çš„çœŸå­é›† è¿”å›ture//swift2.2//set5.isStrictSubsetOf(set7)//swift3.0set5.isStrictSubset(of: set7)//åˆ¤æ–­æ˜¯å¦æ˜¯æŸä¸ªé›†åˆçš„çœŸè¶…é›† set7ä¸æ˜¯set8çš„çœŸè¶…é›† è¿”å›false//swift2.2//set7.isStrictSupersetOf(set8)//swift3.0set7.isStrictSuperset(of: set8) ä¸‰ã€Dictionaryå­—å…¸ä¸­çš„æ›´æ”¹Dictionaryå­—å…¸ä¸­ä¿®æ”¹ç¤ºä¾‹å¦‚ä¸‹ï¼š 12345//é€šè¿‡é”®åˆ é™¤æŸä¸ªé”®å€¼å¯¹//swift2.2//dic1.removeValueForKey(1)//swift3.0dic1.removeValue(forKey: 1) ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}],"tags":[],"keywords":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}]},{"title":"Swift3.0å¸¦æ¥çš„å˜åŒ–æ±‡æ€»ç³»åˆ—ä¸€â€”â€”å­—ç¬¦ä¸²ä¸åŸºæœ¬è¿ç®—ç¬¦ä¸­çš„å˜åŒ–","slug":"225Swift3.0å¸¦æ¥çš„å˜åŒ–æ±‡æ€»ç³»åˆ—ä¸€â€”â€”å­—ç¬¦ä¸²ä¸åŸºæœ¬è¿ç®—ç¬¦ä¸­çš„å˜åŒ–","date":"2016-06-15T16:00:00.000Z","updated":"2021-07-08T11:38:11.668Z","comments":true,"path":"2016/06/16/225Swift3.0å¸¦æ¥çš„å˜åŒ–æ±‡æ€»ç³»åˆ—ä¸€â€”â€”å­—ç¬¦ä¸²ä¸åŸºæœ¬è¿ç®—ç¬¦ä¸­çš„å˜åŒ–/","link":"","permalink":"http://huishao.cc/2016/06/16/225Swift3.0å¸¦æ¥çš„å˜åŒ–æ±‡æ€»ç³»åˆ—ä¸€â€”â€”å­—ç¬¦ä¸²ä¸åŸºæœ¬è¿ç®—ç¬¦ä¸­çš„å˜åŒ–/","excerpt":"","text":"Swift3.0å¸¦æ¥çš„å˜åŒ–æ±‡æ€»ç³»åˆ—ä¸€â€”â€”å­—ç¬¦ä¸²ä¸åŸºæœ¬è¿ç®—ç¬¦ä¸­çš„å˜åŒ–ä¸€ã€å¼•è¨€Appleä¸ä»Šå¹´6æœˆ13æ—¥æ­£å¼å‘å¸ƒäº†Swift3.0çš„ç¬¬ä¸€ä¸ªé¢„è§ˆç‰ˆæœ¬ï¼Œå¹¶ä¸”ç›¸åº”æ¨å‡ºäº†Xcode8çš„ç¬¬ä¸€ä¸ªbateç‰ˆæœ¬ã€‚å¼€å‘è€…å·²ç»å¯ä»¥åœ¨Xcode8bateç‰ˆä¸Šæ¥ä½“éªŒSwift3.0çš„æ–°ç‰¹æ€§ã€‚é¦–å…ˆï¼ŒSwift3.0ç¡®å®å¸¦æ¥äº†å¾ˆå¤§æ”¹å˜ï¼Œè®¸å¤šSwiftä¸­çš„ç»“æ„ä½“APIéƒ½è¿›è¡Œäº†æ›´æ–°ï¼Œä¾‹å¦‚Stringï¼ŒArrayç­‰ï¼ŒSwift3.0ç‰ˆæœ¬å°†è®¸å¤šç±»Objective-Cé£æ ¼çš„APIéƒ½æ›´æ¢æˆäº†Swifté£æ ¼çš„ï¼Œå…¶ç›®çš„ä½¿å¼€å‘è€…å¯ä»¥ä½¿ç”¨Swiftæ›´åŠ æƒ¬æ„æœ‰è¶£çš„ç¼–ç¨‹ã€‚æœ¬ç³»åˆ—åšå®¢ï¼Œæ˜¯æˆ‘è§‚çœ‹WWDCè§†é¢‘ä¸­ä»‹ç»çš„å†…å®¹ä»¥åŠSwift3.0çš„å¼€å‘è€…å¸®åŠ©æ–‡æ¡£æ•´ç†æ€»ç»“è€Œæ¥ï¼Œåœ¨æœŸé—´ï¼Œæˆ‘ä¹Ÿå‚è€ƒå¯¹æ¯”äº†Swift2.2ä¸­çš„å®ç°æ–¹å¼ï¼Œå¸Œæœ›å¯ä»¥å¸®åŠ©éœ€è¦çš„æœ‹å‹å°½å¿«ç†Ÿæ‚‰å’Œä¸Šæ‰‹Swift3.0ã€‚ äºŒã€Stringç±»ä¸­çš„APIå˜åŒ–é™¤äº†Swiftç‰ˆçš„Cocoaæ¡†æ¶ä¸­çš„APIæœ‰äº†å¤§èŒƒå›´çš„ä¿®æ”¹å¤–ï¼ŒSwiftçš„ä¸€äº›æ ¸å¿ƒåº“ä¹Ÿæœ‰äº†å¾ˆå¤§çš„æ”¹åŠ¨ã€‚ Swift3.0ä¸­çš„å­—ç¬¦ä¸²ç±»å‹Stringåœ¨æ–¹æ³•APIä¸Šæ›´åŠ ç®€æ´ï¼Œå…¶ä¸­å˜åŠ¨è¾ƒå¤§çš„æ˜¯ä¸ä¸‹æ ‡ç›¸å…³çš„æ–¹æ³•ï¼Œåˆ—ä¸¾å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566var string = \"Hello-Swift\"//è·å–æŸä¸ªä¸‹æ ‡åä¸€ä¸ªä¸‹æ ‡å¯¹åº”çš„å­—ç¬¦ char=\"e\"//swift2.2//var char = string[startIndex.successor()]//swift3.0var char = string[string.index(after: startIndex)]//è·å–æŸä¸ªä¸‹æ ‡å‰ä¸€ä¸ªä¸‹æ ‡å¯¹åº”çš„å­—ç¬¦ char2 = \"t\"//swift2.2//var char2 = string[endIndex.predecessor()]//swift3.0var char2 = string[string.index(before: string.endIndex)]//é€šè¿‡èŒƒå›´è·å–å­—ç¬¦ä¸²ä¸­çš„ä¸€ä¸ªå­ä¸² Hello//swift2.2//var subString = string[startIndex...startIndex.advancedBy(4)]//swift3.0var subString = string[startIndex...string.index(startIndex, offsetBy: 4)]//swift2.2//var subString2 = string[endIndex.advancedBy(-5)...endIndex.predecessor()]//swift3.0var subString2 = string[string.index(endIndex, offsetBy: -5)..&lt;endIndex]//è·å–æŸä¸ªå­ä¸²åœ¨çˆ¶ä¸²ä¸­çš„èŒƒå›´//swift2.2//var range = string.rangeOfString(\"Hello\")//swift3.0var range = string.range(of: \"Hello\")//è¿½åŠ å­—ç¬¦ä¸²æ“ä½œ æ­¤æ—¶string = \"Hello-Swift! Hello-World\"//swift2.2//string.appendContentsOf(\" Hello-World\")//swift3.0string.append(\" Hello-World\")//åœ¨æŒ‡å®šä½ç½®æ’å…¥ä¸€ä¸ªå­—ç¬¦ æ­¤æ—¶string = \"Hello-Swift!~ Hello-World\"//swift2.2//string.insert(\"~\", atIndex: string.startIndex.advancedBy(12))//swift3.0string.insert(\"~\", at: string.index(string.startIndex, offsetBy: 12))//åœ¨æŒ‡å®šä½ç½®æ’å…¥ä¸€ç»„å­—ç¬¦ æ­¤æ—¶string = \"Hello-Swift!~~~~ Hello-World\"//swift2.2//string.insertContentsOf([\"~\",\"~\",\"~\"], at: string.startIndex.advancedBy(12))//swift3.0string.insert(contentsOf: [\"~\",\"~\",\"~\"], at: string.index(string.startIndex, offsetBy: 12))//åœ¨æŒ‡å®šèŒƒå›´æ›¿æ¢ä¸€ä¸ªå­—ç¬¦ä¸² æ­¤æ—¶string = \"Hi-Swift!~~~~ Hello-World\"//swift2.2//string.replaceRange(string.startIndex...string.startIndex.advancedBy(4), with: \"Hi\")//swift3.0string.replaceSubrange(string.startIndex...string.index(string.startIndex, offsetBy: 4), with: \"Hi\")//åœ¨æŒ‡å®šä½ç½®åˆ é™¤ä¸€ä¸ªå­—ç¬¦ æ­¤æ—¶string = \"Hi-Swift!~~~~ Hello-Worl\"//swift2.2//string.removeAtIndex(string.endIndex.predecessor())//swift3.0string.remove(at: string.index(before:string.endIndex))//åˆ é™¤æŒ‡å®šèŒƒå›´çš„å­—ç¬¦ æ­¤æ—¶string = \"Swift!~~~~ Hello-Worl\"//swift2.2//string.removeRange(string.startIndex...string.startIndex.advancedBy(2))//swift3.0string.removeSubrange(string.startIndex...string.index(string.startIndex, offsetBy: 2))var string2 = \"My name is Jaki\"//å…¨éƒ¨è½¬æ¢ä¸ºå¤§å†™//swift2.2//string2 = string2.uppercaseString//swift3.0string2 = string2.uppercased()//å…¨éƒ¨è½¬æ¢ä¸ºå°å†™//swift2.2//string2 = string2.lowercaseString//swift3.0string2 = string2.lowercased() éœ€è¦æ³¨æ„ï¼Œåœ¨Swift3.0ä¸­Rangeç»“æ„ä½“è¢«åˆ’åˆ†æˆäº†ä¸¤ç§ç±»å‹ï¼ŒRangeå’ŒClosedRangeï¼Œåˆ†åˆ«ç”¨æ¥æè¿°å·¦é—­å³å¼€åŒºé—´å’Œé—­åŒºé—´ï¼Œå¯¹åº”åˆ°è¿ç®—ç¬¦ä¸º0..&lt;10å’Œ0â€¦10ã€‚ ä»ä¸Šé¢çš„ç¤ºä¾‹ä»£ç ä¸­å¯ä»¥çœ‹å‡ºï¼ŒStringç±»å‹ä¸­çš„å¾ˆå¤šæ–¹æ³•å‘½åè¿›è¡Œäº†Swifté£æ ¼çš„ç®€åŒ–ï¼Œæ”¹åŠ¨è¾ƒå¤§çš„ä¸€ä¸ªç‚¹æ˜¯å…³äºä¸‹æ ‡indexçš„æ”¹å˜ï¼Œç§»é™¤äº†ä¸¤ä¸ªIndexä¸‹æ ‡ç§»åŠ¨çš„æ–¹æ³•ï¼Œä½¿ç”¨Stringç±»å‹çš„index()æ–¹æ³•æ¥è¿›è¡Œä¸‹æ ‡çš„ç§»åŠ¨æ“ä½œï¼Œç¼–ç¨‹æ›´åŠ å®‰å…¨ã€‚ ä¸‰.åŸºç¡€è¿ç®—ç¬¦ä¸­çš„æ”¹å˜Swift3.0ä¸­çš„åŸºç¡€è¿ç®—ç¬¦å¹¶æ— å¤ªå¤§æ”¹åŠ¨ï¼Œåªæ˜¯ç§»é™¤äº†å–ä½™è¿ç®—ç¬¦çš„æµ®ç‚¹æ•°å–ä½™åŠŸèƒ½ï¼Œå–ä½™è¿ç®—ç¬¦å¯ä»¥è¿›è¡Œæµ®ç‚¹è¿ç®—æœ¬æ˜¯Swiftç‹¬æœ‰çš„ä¸€ä¸ªç‰¹ç‚¹ï¼Œ3.0ç‰ˆæœ¬çš„æ”¹å˜åï¼ŒSwiftä¸­çš„&quot;%&quot;è¿ç®—ç¬¦åŠŸèƒ½å°†ä¸Objective-Cä¸Cè¯­è¨€ä¸­çš„å–ä½™è¿ç®—ç¬¦ä¿æŒä¸€è‡´ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}],"tags":[],"keywords":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}]},{"title":"Swiftä¸“é¢˜è®²è§£äºŒåä¸‰â€”â€”é«˜çº§è¿ç®—ç¬¦","slug":"224Swiftä¸“é¢˜è®²è§£äºŒåä¸‰â€”â€”é«˜çº§è¿ç®—ç¬¦","date":"2016-05-30T16:00:00.000Z","updated":"2021-07-08T11:37:24.119Z","comments":true,"path":"2016/05/31/224Swiftä¸“é¢˜è®²è§£äºŒåä¸‰â€”â€”é«˜çº§è¿ç®—ç¬¦/","link":"","permalink":"http://huishao.cc/2016/05/31/224Swiftä¸“é¢˜è®²è§£äºŒåä¸‰â€”â€”é«˜çº§è¿ç®—ç¬¦/","excerpt":"","text":"Swiftä¸“é¢˜è®²è§£äºŒåä¸‰â€”â€”é«˜çº§è¿ç®—ç¬¦ä¸€ã€å¼•è¨€é™¤äº†å‰è¾¹åšå®¢ä¸­ä»‹ç»çš„åŸºæœ¬è¿ç®—ç¬¦å¤–ï¼ŒSwiftä¸­è¿˜æ”¯æŒæ›´å¤šé«˜çº§è¿ç®—ç¬¦ï¼Œä¹Ÿæ”¯æŒå¼€å‘è€…è¿›è¡Œè¿ç®—ç¬¦çš„è‡ªå®šä¹‰ã€‚Swiftä¸­çš„ç®—ç¬¦è¿ç®—ç¬¦æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œå…¶ä¸ä¼šäº§ç”Ÿæº¢å‡ºï¼Œå¦‚æœæœ‰æ“ä½œäº§ç”Ÿæº¢å‡ºï¼Œç¨‹åºä¼šç›´æ¥æŠ›å‡ºå¼‚å¸¸ã€‚å¦‚æœå¼€å‘è€…åœ¨å¼€å‘ä¸­éœ€è¦æœ‰æº¢å‡ºæ“ä½œï¼Œéœ€è¦ä½¿ç”¨æº¢å‡ºæ“ä½œç¬¦æ¥å®ç°ã€‚ äºŒã€ä½è¿ç®—ç¬¦Swiftæ”¯æŒCè¯­è¨€ä¸­çš„å…¨éƒ¨ä½è¿ç®—ç¬¦ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314//äºŒè¿›åˆ¶æ•°æ®8 å®é™…ä¸Ša = 00001000 8ä½var a:UInt8 = 0b1000//ä½¿ç”¨~ è¿›è¡ŒæŒ‰ä½å–åè¿ç®— a = 0b11110111 247a = ~a//ä½¿ç”¨&amp; è¿›è¡ŒæŒ‰ä½ä¸è¿ç®— a = 0b11110000 240a = 0b11110000&amp;a//ä½¿ç”¨|è¿›è¡ŒæŒ‰ä½æˆ–è¿ç®— a=0b11111111 255a = 0b11111111|a//ä½¿ç”¨^è¿›è¡ŒæŒ‰ä½å¼‚æˆ–è¿ç®— a = 0b00001111 15a = 0b11110000^a//ä½¿ç”¨&lt;&lt;è¿›è¡ŒæŒ‰ä½å·¦ç§»è¿ç®— a = 0b00011110 30a = a&lt;&lt;1//ä½¿ç”¨&gt;&gt;è¿›è¡ŒæŒ‰ä½å³ç§»è¿ç®— a = 0b00001111a = a&gt;&gt;1 Swiftä¸­è¿˜æä¾›äº†ä¸€ç§æ£€æŸ¥æœºåˆ¶ï¼Œå½“å­˜åœ¨æº¢å‡ºæ“ä½œæ—¶ï¼Œç¨‹åºä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œè¿™æ ·å¯ä»¥æ˜¯å¼€å‘è€…ç¼–å†™çš„ä»£ç æ›´åŠ å®‰å…¨ï¼Œå¦‚æœå¼€å‘è€…çœŸçš„éœ€è¦ä½¿ç”¨æº¢å‡ºæ“ä½œï¼ŒSwiftä¸­è¿˜é¢å¤–æä¾›äº†æ”¯æŒæº¢å‡ºæ“ä½œçš„è¿ç®—ç¬¦ï¼š 123456//a = 255 + 1 è¿™æ ·çš„è¿ç®—ä¼šæŠ¥é”™ &amp;+ ä¸ºæº¢å‡ºåŠ è¿ç®—ç¬¦ è®¡ç®—åa=0a = 255 &amp;+ 1//&amp;- ä¸ºæº¢å‡ºå‡è¿ç®—ç¬¦ è®¡ç®—å a = 255a = a &amp;- 1//&amp;* ä¸ºæº¢å‡ºä¹˜è¿ç®—ç¬¦a = a &amp;* 2 ä¸‰ã€é‡è½½è¿ç®—ç¬¦è¿ç®—ç¬¦çš„é‡è½½æ˜¯ä¸ºåŸæœ‰çš„è¿ç®—ç¬¦å¢åŠ æ–°çš„åŠŸèƒ½ï¼Œå¼€å‘è€…å¯ä»¥è‡ªå®šä¹‰ä¸€äº›è¿ç®—ç¬¦å‡½æ•°æ¥å®ç°å¯¹å…·ä½“ç±»å’Œç»“æ„ä½“è¿ç®—çš„åŠŸèƒ½ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213class Circle &#123; //åœ†å¿ƒ var point:(p1:Float,p2:Float) //åŠå¾„ var r:Float init(point:(Float,Float),r:Float)&#123; self.point = point self.r = r &#125;&#125;func + (c1:Circle,c2:Circle) -&gt; Circle &#123; return Circle(point: c1.point, r: c1.r+c2.r)&#125; ä¸Šé¢ä»£ç æ¼”ç¤ºçš„ä¾‹å­ä¸­é‡è½½äº†ä¸­ç¼€è¿ç®—ç¬¦ï¼Œå³è¿ç®—ç¬¦æ˜¯å‡ºç°åœ¨ä¸¤ä¸ªæ“ä½œæ•°å’Œä¸­é—´çš„ï¼Œè¿˜å¯ä»¥è¿›è¡Œå‰ç¼€è¿ç®—ç¬¦ä¸åç¼€è¿ç®—ç¬¦çš„é‡è½½ï¼Œä½¿ç”¨prefixä¸postfixå³å¯ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š 123prefix func + (c:Circle) -&gt; Circle &#123; return Circle(point: c.point, r: c.r*2)&#125; å¤åˆè¿ç®—ç¬¦ä¹Ÿå¯ä»¥æ”¯æŒé‡è½½ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¤åˆè¿ç®—ç¬¦çš„å‚æ•°å¿…é¡»æ˜¯inoutä¿®é¥°çš„ï¼Œå› ä¸ºå¤åˆè¿ç®—ç¬¦ä¼šç›´æ¥æ“ä½œå‚æ•°å€¼ï¼š 123func += (inout c1:Circle,c2:Circle) &#123; c1 = Circle(point: c1.point, r: c1.r+c2.r)&#125; ç­‰ä»·è¿ç®—ç¬¦ä¹Ÿå¯ä»¥ç”¨æ¥é‡è½½ï¼Œé€šå¸¸ç”¨æ¥è¿›è¡Œæ¯”è¾ƒæ“ä½œï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456func == (c1:Circle,c2:Circle) -&gt; Bool &#123; return (c1.point==c2.point &amp;&amp; c1.r==c2.r)&#125;func != (c1:Circle,c2:Circle) -&gt; Bool &#123; return ((c1.point != c2.point) || (c1.r != c2.r))&#125; å››ã€è‡ªå®šä¹‰è¿ç®—ç¬¦Swiftä¸­é™¤äº†å¯ä»¥å¯¹ä¸€äº›å·²ç»å­˜åœ¨çš„è¿ç®—ç¬¦è¿›è¡Œé‡è½½æ“ä½œå¤–ï¼Œå¼€å‘è€…è¿˜å¯ä»¥è‡ªå®šä¹‰ä¸€äº›è¿ç®—ç¬¦ï¼Œåœ¨è‡ªå®šä¹‰è¿ç®—ç¬¦æ—¶ï¼Œå¿…é¡»æŒ‡å®šè¿ç®—ç¬¦æ˜¯å‰ç¼€ã€ä¸­ç¼€æˆ–æ˜¯åç¼€ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567//å®šä¹‰ä¸€ä¸ªä¸­ç¼€è¿ç®—ç¬¦+!+ operatorå…³é”®å­—ç”¨äºå®šä¹‰è¿ç®—ç¬¦infix operator +!+&#123;&#125;//è¿›è¡Œè¿ç®—ç¬¦çš„å®ç°func +!+ (param:Int,param2:Int)-&gt;Int&#123; return (param+param2)*param2&#125;var b = 5 +!+ 5 è¿˜æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œåœ¨è¿›è¡Œè‡ªå®šä¹‰è¿ç®—ç¬¦æ—¶ï¼Œå¼€å‘è€…ä¹Ÿå¯ä»¥ä¸ºå…¶è®¾ç½®ç»“åˆæ€§ä¸ä¼˜å…ˆçº§ï¼Œç»“åˆæ€§ç”±associativityå…³é”®å­—å®šä¹‰ï¼Œå¯é€‰leftï¼Œrightï¼Œnoneï¼Œä¼˜å…ˆçº§çš„é»˜è®¤å€¼ä¸º100ï¼Œç”±precedenceå…³é”®å­—æŒ‡å®šï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567//å®šä¹‰ä¸€ä¸ªä¸­ç¼€è¿ç®—ç¬¦+!+infix operator +!+&#123;associativity left precedence 140&#125;//è¿›è¡Œè¿ç®—ç¬¦çš„å®ç°func +!+ (param:Int,param2:Int)-&gt;Int&#123; return (param+param2)*param2&#125;var b = 5 +!+ 5 ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}],"tags":[],"keywords":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}]},{"title":"Swiftä¸“é¢˜è®²è§£äºŒåäºŒâ€”â€”æ³›å‹","slug":"223Swiftä¸“é¢˜è®²è§£äºŒåäºŒâ€”â€”æ³›å‹","date":"2016-05-29T16:00:00.000Z","updated":"2021-07-08T11:36:39.591Z","comments":true,"path":"2016/05/30/223Swiftä¸“é¢˜è®²è§£äºŒåäºŒâ€”â€”æ³›å‹/","link":"","permalink":"http://huishao.cc/2016/05/30/223Swiftä¸“é¢˜è®²è§£äºŒåäºŒâ€”â€”æ³›å‹/","excerpt":"","text":"Swiftä¸“é¢˜è®²è§£äºŒåäºŒâ€”â€”æ³›å‹ä¸€ã€ä»¥æ³›å‹ä¸ºå‚æ•°çš„å‡½æ•°æ³›å‹æ˜¯Swiftè¯­è¨€å¼ºå¤§çš„æ ¸å¿ƒï¼Œæ³›å‹æ˜¯å¯¹ç±»å‹çš„æŠ½è±¡ï¼Œä½¿ç”¨æ³›å‹å¼€å‘è€…å¯ä»¥æ›´åŠ çµæ´»æ–¹ä¾¿çš„è¡¨è¾¾ä»£ç æ„å›¾ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œæœ‰å‚å‡½æ•°çš„å‚æ•°å¿…é¡»æœ‰ä¸€ä¸ªæ˜ç¡®çš„å‚æ•°ç±»å‹ï¼Œæœ‰äº›æ—¶å€™å¼€å‘è€…ä¼šé‡åˆ°è¿™æ ·ä¸€ç§æƒ…å†µï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°ç”¨äºäº¤æ¢ä¸¤ä¸ªå˜é‡çš„å€¼ï¼Œç”±äºå˜é‡æœ‰ç±»å‹ä¹‹åˆ†ï¼Œå®ç°ç›¸åŒçš„åŠŸèƒ½ï¼Œå¯èƒ½éœ€è¦é‡è½½æˆå¤šä¸ªå‡½æ•°æ¥å®ç°ï¼Œè¿™å¤§å¤§æµªè´¹äº†å¼€å‘æˆæœ¬ï¼Œä½¿ç”¨æ³›å‹ï¼Œå¯ä»¥å®Œç¾çš„è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345678func exchange&lt;T&gt;(inout param1:T,inout param2:T)&#123; let tmp = param1 param1 = param2 param2 = tmp&#125;var p1 = \"15\"var p2 = \"40\"exchange(&amp;p1, param2: &amp;p2) ä¸Šé¢çš„æ–¹æ³•å¯ä»¥å®ç°å¯¹ä»»æ„ç›¸åŒç±»å‹å˜é‡çš„äº¤æ¢ï¼Œå‡½æ•°å‚æ•°ä¸­ä½¿ç”¨æ³›å‹ï¼Œéœ€è¦åœ¨å‡½æ•°ååçš„&lt;&gt;ä¸­å®šä¹‰å‚æ•°å ä½ç¬¦ï¼Œå¦‚æœ‰å¤šä¸ªå‚æ•°å ä½ç¬¦ï¼Œç”¨é€—å·éš”å¼€å³å¯ã€‚ äºŒã€æ³›å‹åœ¨ç±»å‹ä¸­çš„åº”ç”¨æ³›å‹é™¤äº†å¯ä»¥ä½œä¸ºå‡½æ•°çš„å‚æ•°ã€è¿”å›å€¼å¤–ï¼Œåœ¨å®šä¹‰ç±»å‹æ—¶ï¼Œçµæ´»åº”ç”¨æ³›å‹ä¹Ÿå¯ä»¥è§£å†³å¾ˆå¤šååˆ†æ£˜æ‰‹çš„é—®é¢˜ï¼Œä¾‹å¦‚å®ç°ä¸€ä¸ªæ ˆç»“æ„çš„é›†åˆç±»å‹ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617struct Stack&lt;ItemType&gt; &#123; var items:[ItemType] = [] mutating func push(param:ItemType) &#123; self.items.append(param) &#125; mutating func pop()-&gt;ItemType&#123; return self.items.removeLast() &#125;&#125;//æ•´å‹æ ˆvar obj1 = Stack&lt;Int&gt;()obj1.push(1)obj1.pop()//å­—ç¬¦ä¸²æ ˆvar obj2 = Stack&lt;String&gt;()obj2.push(\"HS\")obj2.pop() åœ¨å¯¹ä½¿ç”¨äº†æ³›å‹çš„ç±»å‹è¿›è¡Œæ‰©å±•æ—¶ï¼Œä¸éœ€è¦åœ¨ä½¿ç”¨&lt;&gt;è¿›è¡Œæ³›å‹çš„å®šä¹‰ï¼Œç›´æ¥ä½¿ç”¨åŸå®šä¹‰çš„æ³›å‹å ä½ç¬¦å³å¯ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345extension Stack&#123; func getArray() -&gt; [ItemType] &#123; return items &#125;&#125; æœ‰æ—¶å€™ï¼Œå¼€å‘è€…éœ€è¦å¯¹æ³›å‹è¿›è¡Œä¸€äº›çº¦æŸï¼Œä¾‹å¦‚åªå…è®¸æ­¤æ³›å‹æ˜¯ç»§æ‰¿è‡ªæŸä¸ªç±»æˆ–è€…å®ç°äº†æŸä¸ªåè®®ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345678910111213class MyClass &#123; &#125;//åªæœ‰MyClassçš„å­ç±»å¯ä»¥è¿›è¡ŒStackæ ˆçš„åˆ›å»ºstruct Stack&lt;ItemType:MyClass&gt; &#123; var items:[ItemType] = [] mutating func push(param:ItemType) &#123; self.items.append(param) &#125; mutating func pop()-&gt;ItemType&#123; return self.items.removeLast() &#125;&#125; åœ¨åè®®ä¸­ï¼Œå¯ä»¥ä½¿ç”¨å¦ä¸€ç§æ–¹å¼æ¥è¿›è¡Œæ³›å‹ç¼–ç¨‹ï¼Œä½¿ç”¨associatedtypeå…³é”®å­—å¯ä»¥è¿›è¡Œç±»å‹å…³è”ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789protocol MyProtocol &#123; //å®ç°åè®®æ—¶æ‰æŒ‡å®šç±»å‹ associatedtype ItemType var param:ItemType &#123;get set&#125;&#125;class MyClass:MyProtocol &#123; //ç”±äºSwiftå¯ä»¥è‡ªåŠ¨è¯†åˆ«ç±»å‹ è¿™æ˜¯MyProtocolä¸­çš„ItemTypeä¸ºInt var param: Int = 0&#125; ä¸‰ã€æ³›å‹ä¸whereå­å¥çš„ç»“åˆä½¿ç”¨ä½¿ç”¨whereå­å¥å¯ä»¥å¯¹æ³›å‹è¿›è¡Œæ›´åŠ ä¸¥æ ¼çº¦æŸï¼Œä½¿å…¶ç¬¦åˆå¼€å‘è€…éœ€è¦çš„é€»è¾‘ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112//Tå’ŒCéƒ½è¦éµå®ˆæ•´å‹åè®®class MyClassTwo&lt;T,C where T:IntegerType,C:IntegerType&gt; &#123; var param1:T var param2:C init(param1:T,param2:C)&#123; self.param1=param1 self.param2=param2 &#125;&#125;var obj3 = MyClassTwo(param1: 1, param2: 1) ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}],"tags":[],"keywords":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}]},{"title":"Swiftä¸“é¢˜è®²è§£äºŒåâ€”â€”æ‰©å±•","slug":"221Swiftä¸“é¢˜è®²è§£äºŒåâ€”â€”æ‰©å±•","date":"2016-05-28T16:00:00.000Z","updated":"2021-07-08T11:34:51.557Z","comments":true,"path":"2016/05/29/221Swiftä¸“é¢˜è®²è§£äºŒåâ€”â€”æ‰©å±•/","link":"","permalink":"http://huishao.cc/2016/05/29/221Swiftä¸“é¢˜è®²è§£äºŒåâ€”â€”æ‰©å±•/","excerpt":"","text":"Swiftä¸“é¢˜è®²è§£äºŒåâ€”â€”æ‰©å±•ä¸€ã€ç®€ä»‹Swiftä¸­çš„æ‰©å±•ä¸Objective-Cä¸­çš„ç±»åˆ«åŠŸèƒ½ç›¸ä¼¼ï¼Œæ‰©å±•å¯ä»¥ä¸ºä¸€ä¸ªå·²æœ‰çš„ç±»ã€ç»“æ„ä½“ã€æšä¸¾æˆ–è€…åè®®æ·»åŠ æ–°çš„å±æ€§æˆ–æ–¹æ³•ï¼Œä¸Objective-Cçš„ç±»åˆ«ä¸åŒçš„æ˜¯ï¼ŒSwiftä¸­çš„æ‰©å±•æ²¡æœ‰åç§°ã€‚ Swiftä¸­çš„æ‰©å±•æ”¯æŒå¦‚ä¸‹åŠŸèƒ½ï¼š 1.æ·»åŠ è®¡ç®—å±æ€§ 2.å®šä¹‰å®ä¾‹æ–¹æ³•å’Œç±»å‹æ–¹æ³• 3.å®šä¹‰æ–°çš„æ„é€ æ–¹æ³• 4.å®šä¹‰ä¸‹æ ‡æ–¹æ³• 5.å®šä¹‰åµŒå¥—ç±»å‹ 6.ä½¿ä¸€ä¸ªå·²æœ‰çš„ç±»éµå®ˆåè®® 7.å¯¹åè®®è¿›è¡Œæ‰©å±•æ·»åŠ æ–°çš„æ–¹æ³• äºŒã€ä½¿ç”¨æ‰©å±•æ·»åŠ è®¡ç®—å±æ€§ä½¿ç”¨extensionæ¥å£°æ˜æ‰©å±•ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617//åˆ›å»ºä¸€ä¸ªç±» æœ‰ä¸¤ä¸ªå±æ€§class MyClass &#123; var name:String var age:Int init()&#123; name = \"HS\" age = 24 &#125;&#125;//ä¸ºMyClassç±»æ‰©å±•ä¸€ä¸ªè®¡ç®—å±æ€§extension MyClass &#123; var nameAndAge:String&#123; return \"\\(name)\"+\"\\(age)\" &#125;&#125;var obj = MyClass()obj.nameAndAge ä¸‰ã€ä½¿ç”¨æ‰©å±•æ·»åŠ æ„é€ æ–¹æ³•éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ‰©å±•ä¸èƒ½ä¸ºç±»æ·»åŠ æŒ‡å®šæ„é€ æ–¹æ³•ï¼Œåªå¯ä»¥ä¸ºå…¶æ·»åŠ ä¾¿åˆ©æ„é€ æ–¹æ³•ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617//åˆ›å»ºä¸€ä¸ªç±» æœ‰ä¸¤ä¸ªå±æ€§class MyClass &#123; var name:String var age:Int init()&#123; name = \"HS\" age = 24 &#125;&#125;extension MyClass&#123; convenience init(name:String,age:Int)&#123; self.init() self.name=name self.age=age &#125;&#125;var obj2 = MyClass(name: \"ZYH\", age: 24) å››ã€ä½¿ç”¨æ‰©å±•æ·»åŠ å®ä¾‹æ–¹æ³•ä¸ç±»å‹æ–¹æ³•æ‰©å±•å¯ä»¥ä¸ºä¸€ä¸ªç±»å‹æ·»åŠ å®ä¾‹æ–¹æ³•ä¸ç±»å‹æ–¹æ³•ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223//åˆ›å»ºä¸€ä¸ªç±» æœ‰ä¸¤ä¸ªå±æ€§class MyClass &#123; var name:String var age:Int init()&#123; name = \"HS\" age = 24 &#125;&#125;extension MyClass&#123; func logName() -&gt; String &#123; print(name) return name &#125; class func logClassName()&#123; print(\"MyClass\") &#125;&#125;var obj3 = MyClass()obj3.logName()MyClass.logClassName() å¯¹äºå€¼ç±»å‹çš„æ‰©å±•ï¼Œå¯ä»¥ä½¿ç”¨å¯å˜æ–¹æ³•æ¥ä¿®æ”¹å®ä¾‹æœ¬èº«ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910extension Int&#123; //ä¿®æ”¹æœ¬èº«éœ€è¦ä½¿ç”¨nutating mutating func change() &#123; self = self*self &#125;&#125;var count = 3count.change()//æ‰“å°9print(count) ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}],"tags":[],"keywords":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}]},{"title":"Swiftä¸“é¢˜è®²è§£äºŒåä¸€â€”â€”åè®®","slug":"222Swiftä¸“é¢˜è®²è§£äºŒåä¸€â€”â€”åè®®","date":"2016-05-28T16:00:00.000Z","updated":"2021-07-08T11:35:53.571Z","comments":true,"path":"2016/05/29/222Swiftä¸“é¢˜è®²è§£äºŒåä¸€â€”â€”åè®®/","link":"","permalink":"http://huishao.cc/2016/05/29/222Swiftä¸“é¢˜è®²è§£äºŒåä¸€â€”â€”åè®®/","excerpt":"","text":"Swiftä¸“é¢˜è®²è§£äºŒåä¸€â€”â€”åè®®ä¸€ã€å¼•è¨€åè®®çº¦å®šäº†ä¸€äº›å±æ€§ä¸æ–¹æ³•ï¼Œå…¶ä½œç”¨ç±»ä¼¼Javaä¸­çš„æŠ½è±¡ç±»ï¼ŒSwiftä¸­ç±»å‹é€šè¿‡éµå®ˆåè®®æ¥å®ç°ä¸€äº›çº¦å®šçš„å±æ€§å’Œæ–¹æ³•ã€‚Swiftä¸­çš„åè®®ä½¿ç”¨protocolå…³é”®å­—æ¥å£°æ˜ã€‚Swiftä¸­çš„åè®®è¿˜æœ‰ä¸€ä¸ªååˆ†æœ‰æ„æ€çš„ç‰¹æ€§ï¼Œåè®®å¯ä»¥é€šè¿‡æ‰©å±•æ¥å®ç°ä¸€äº›æ–¹æ³•å’Œé™„åŠ åŠŸèƒ½ã€‚ äºŒã€åœ¨åè®®ä¸­å®šä¹‰å±æ€§å’Œæ–¹æ³•åè®®ä¸­å®šä¹‰çš„å±æ€§åªçº¦å®šåç§°å’Œç±»å‹ï¼Œåœ¨å…·ä½“ç±»å‹çš„å®ç°ä¸­ï¼Œå…¶å¯ä»¥æ˜¯å­˜å‚¨å±æ€§ä¹Ÿå¯ä»¥æ˜¯è®¡ç®—å±æ€§ï¼Œåè®®ä¸­è¿˜éœ€è¦æŒ‡å®šå±æ€§æ˜¯å¯è¯»çš„è¿˜æ˜¯å¯è¯»å¯å†™çš„ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728protocol MyPortocol &#123; //å®šä¹‰å®ä¾‹å±æ€§ //å¯è¯»çš„ var name:String&#123;get&#125; //å¯è¯»å¯å†™çš„ var age:Int&#123;set get&#125; //å¯è¯»çš„ var nameAndAge:String&#123;get&#125; static var className:String&#123;get&#125;&#125;class MyClass: MyPortocol &#123; var name: String var age: Int var nameAndAge: String&#123; get&#123; return \"\\(name)\"+\"\\(age)\" &#125; &#125; static var className: String&#123; get&#123; return \"MyClass\" &#125; &#125; init()&#123; name = \"HS\" age = 24 &#125;&#125; æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œåè®®ä¸­çš„å¯è¯»å¹¶ä¸æ˜¯åªè¯»ï¼Œåè®®ä¸­çš„å±æ€§çº¦å®šæˆå¯è¯»å¯å†™ï¼Œåˆ™åœ¨å®ç°æ—¶ï¼Œè¿™ä¸ªå±æ€§å¿…é¡»æ˜¯å¯è¯»å¯å†™çš„ï¼Œä½†æ˜¯å¦‚æœåè®®ä¸­çº¦å®šæˆå¯è¯»çš„ï¼Œåˆ™æ­¤å±æ€§å¯ä»¥æ˜¯åªè¯»çš„ä¹Ÿå¯ä»¥æ˜¯å¯è¯»å¯å†™çš„ï¼Œçœ‹å…·ä½“çš„å®ç°ã€‚ åè®®ä¸­çº¦å®šçš„æ–¹æ³•å¯ä»¥æ˜¯å®ä¾‹æ–¹æ³•ä¹Ÿå¯ä»¥æ˜¯ç±»å‹æ–¹æ³•ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415161718protocol MyPortocol &#123; func logName() static func logClassName()&#125;class MyClass: MyPortocol &#123; var name: String var age: Int init()&#123; name = \"HS\" age = 24 &#125; func logName() &#123; print(name) &#125; static func logClassName() &#123; print(className) &#125;&#125; åŒæ ·ï¼Œåè®®ä¸­ä¹Ÿå¯ä»¥å¯¹æ„é€ æ–¹æ³•è¿›è¡Œå®šä¹‰çº¦å®šã€‚ ä¸‰ã€åè®®çš„ç‰¹ç‚¹åè®®ä¸­è™½ç„¶æ²¡æœ‰ä»»ä½•å±æ€§å’Œæ–¹æ³•çš„å®ç°ï¼Œä½†æ˜¯å…¶ä»ç„¶å¯ä»¥å½“åšç±»å‹æ¥ä½¿ç”¨ï¼Œåœ¨å‡½æ•°å‚æ•°ã€è¿”å›å€¼ä¸­åº”ç”¨å¹¿æ³›ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213protocol MyPortocol &#123; //å®šä¹‰å®ä¾‹å±æ€§ var name:String&#123;get&#125; var age:Int&#123;set get&#125; var nameAndAge:String&#123;get&#125; static var className:String&#123;get&#125; func logName() static func logClassName()&#125;//å°†åè®®ç±»å‹ä½œä¸ºå‚æ•°func test(param:MyPortocol) &#123; param.logName()&#125; åè®®ä½œä¸ºç±»å‹è¿™ç§ç”¨æ³•å¦ä¸€ä¸ªåº”ç”¨ç‚¹æ˜¯åœ¨é›†åˆç±»å‹ä¸­ï¼Œåè®®å¯ä»¥ä½œä¸ºæ‰€æœ‰éµå®ˆæ­¤åè®®çš„é›†åˆç±»å‹ã€‚ åè®®å¯ä»¥åƒå…¶ä»–ç±»å‹ä¸€æ ·è¿›è¡Œç»§æ‰¿ï¼Œå­åè®®å°†è‡ªåŠ¨æ‹¥æœ‰çˆ¶åè®®çº¦å®šçš„å±æ€§å’Œæ–¹æ³•ã€‚åè®®ä¹Ÿå¯ä»¥é€šè¿‡classå…³é”®å­—æ¥å®šä¹‰åªæœ‰ç±»å¯ä»¥è¿›è¡Œéµå®ˆï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213protocol MyPortocol &#123; //å®šä¹‰å®ä¾‹å±æ€§ var name:String&#123;get&#125; var age:Int&#123;set get&#125; var nameAndAge:String&#123;get&#125; static var className:String&#123;get&#125; func logName() static func logClassName()&#125;//åªæœ‰ç±»å¯ä»¥ç»§æ‰¿æ­¤åè®®protocol MySubPortocol:class,MyPortocol &#123; &#125; åè®®æ—¢ç„¶å¯ä»¥åƒå…¶ä»–ç±»å‹ä¸€æ ·è¿›è¡Œä½¿ç”¨ï¼Œå½“ç„¶å®ƒä¹Ÿå¯ä»¥ä½¿ç”¨isï¼Œas?ï¼Œas!è¿›è¡Œæ£€æŸ¥å’Œè½¬æ¢ï¼Œå…³äºisï¼Œasçš„æ›´å¤šç”¨æ³•å¯ä»¥æŸ¥çœ‹Swiftå…³äºç±»å‹è½¬æ¢çš„å†…å®¹ã€‚ åè®®ä¹Ÿå¯å®šä¹‰å…¶ä¸­çš„å±æ€§æˆ–æ–¹æ³•ä¸ºå¯é€‰çš„ï¼Œå³éµå®ˆæ­¤åè®®çš„ç±»å¯ä»¥å®ç°ä¹Ÿå¯ä»¥ä¸å®ç°å¯é€‰çš„å±æ€§å’Œæ–¹æ³•ï¼Œç„¶è€Œï¼Œå£°æ˜ä¸ºå¯é€‰çš„éœ€è¦æ­¤åè®®ä¸º@objcç±»å‹çš„ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910@objc protocol MyPortocol &#123; //å®šä¹‰å®ä¾‹å±æ€§ var name:String&#123;get&#125; var age:Int&#123;set get&#125; var nameAndAge:String&#123;get&#125; static var className:String&#123;get&#125; func logName() //å¯é€‰å®ç° optional static func logClassName()&#125; Swiftä¸­çš„åè®®è¿˜æœ‰ä¸€ä¸ªååˆ†é‡è¦çš„ç‰¹æ€§ï¼Œå…¶å¯ä»¥é€šè¿‡æ‰©å±•æ¥è¿›è¡Œå±æ€§ã€æ–¹æ³•ä»¥åŠä¸‹æ ‡çš„å®ç°ã€‚è¿™å¯¹äºä¸€äº›é€šç”¨ç±»çš„æ–¹æ³•ååˆ†æ–¹ä¾¿ï¼Œè¿™ç›¸å½“äºæ‰€æœ‰ç»§æ‰¿æ­¤åè®®çš„ç±»éƒ½é»˜è®¤å®ç°äº†è¿™æ ·çš„æ–¹æ³•ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314protocol MyPortocol &#123; //å®šä¹‰å®ä¾‹å±æ€§ var name:String&#123;get&#125; var age:Int&#123;set get&#125; var nameAndAge:String&#123;get&#125; static var className:String&#123;get&#125; func logName() static func logClassName()&#125;extension MyPortocol&#123; var name:String&#123; return \"HS\" &#125;&#125; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}],"tags":[],"keywords":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}]},{"title":"Swiftä¸“é¢˜è®²è§£åä¹â€”â€”ç±»å‹è½¬æ¢","slug":"220Swiftä¸“é¢˜è®²è§£åä¹â€”â€”ç±»å‹è½¬æ¢","date":"2016-05-26T16:00:00.000Z","updated":"2021-07-08T09:48:29.358Z","comments":true,"path":"2016/05/27/220Swiftä¸“é¢˜è®²è§£åä¹â€”â€”ç±»å‹è½¬æ¢/","link":"","permalink":"http://huishao.cc/2016/05/27/220Swiftä¸“é¢˜è®²è§£åä¹â€”â€”ç±»å‹è½¬æ¢/","excerpt":"","text":"Swiftä¸“é¢˜è®²è§£åä¹â€”â€”ç±»å‹è½¬æ¢ä¸€ã€ç±»å‹æ£€æŸ¥ä¸è½¬æ¢åœ¨Objective-Cå’ŒJavaä¸­ï¼Œä»»ä½•ç±»å‹å®ä¾‹éƒ½å¯ä»¥é€šè¿‡å¼ºè½¬ä½¿ç¼–è¯‘å™¨è®¤ä¸ºå®ƒæ˜¯å¦ä¸€ç§ç±»å‹çš„å®ä¾‹ï¼Œè¿™ä¹ˆåšå…¶å®æ˜¯å°†æ‰€æœ‰çš„å®‰å…¨æ£€æŸ¥å·¥ä½œéƒ½äº¤ç»™äº†å¼€å‘è€…è‡ªå·±æ¥åšã€‚å…ˆæ¯”ä¹‹ä¸‹ï¼ŒSwiftä¸­çš„Optionalç±»å‹è½¬æ¢å°±ä¼šæ¯”è¾ƒå®‰å…¨ä¸å¯é ã€‚ Swiftä¸­ä½¿ç”¨iså…³é”®å­—æ¥è¿›è¡Œç±»å‹çš„æ£€æŸ¥ï¼Œå…¶ä¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼trueæˆ–è€…falseæ¥è¡¨æ˜æ£€æŸ¥æ˜¯å¦æˆç«‹ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234var str = \"HS\"if str is String &#123; print(str)&#125; Swiftä¸­æœ‰å‘ä¸Šå…¼å®¹ä¸å‘ä¸‹è½¬æ¢çš„ç‰¹æ€§ï¼Œå°±æ˜¯è¯´ï¼Œä¸€ä¸ªçˆ¶ç±»ç±»å‹çš„é›†åˆå¯ä»¥æ¥æ”¶å­ç±»çš„å®ä¾‹ï¼ŒåŒæ ·ï¼Œåœ¨ä½¿ç”¨è¿™äº›å®ä¾‹å˜é‡æ—¶å¯ä»¥å°†å…¶å‘ä¸‹è½¬æ¢ä¸ºå­ç±»ç±»å‹ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435//è‡ªå®šä¹‰ä¸€ä¸ªç±»åŠå…¶å­ç±»class MyClass &#123; var name:String?&#125;class MySubClassOne: MyClass &#123; var count:Int?&#125;class MySubClassTwo: MyClass &#123; var isBiger:Bool?&#125;//åˆ›å»º3ä¸ªå®ä¾‹var obj1 = MyClass()obj1.name = \"HS\"var obj2 = MySubClassOne()obj2.count = 100var obj3 = MySubClassTwo()obj3.isBiger=true//å°†å®ä¾‹å­˜æ”¾åœ¨å…¶å…¬å…±çˆ¶ç±»ç±»å‹çš„æ•°ç»„é›†åˆä¸­var array:[MyClass] = [obj1,obj2,obj3]//è¿›è¡Œéå†for var i in 0..&lt;array.count &#123; var obj = array[i] if obj is MySubClassOne &#123; print((obj as! MySubClassOne).count!) continue &#125; if obj is MySubClassTwo &#123; print((obj as! MySubClassTwo).isBiger!) continue &#125; if obj is MyClass &#123; print(obj.name!) &#125;&#125; æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œåœ¨è¿›è¡Œç±»å‹è½¬æ¢æ—¶ï¼Œå¯ä»¥ä½¿ç”¨as!æˆ–è€…as?æ¥è¿›è¡Œï¼Œas!æ˜¯ä¸€ç§å¼ºåˆ¶è½¬æ¢æ–¹æ³•ï¼Œå®ƒåœ¨å¼€å‘è€…ç¡®å®šç±»å‹æ— è¯¯æ˜¯ä½¿ç”¨ï¼Œå¦‚æœç”¨as!è½¬æ¢çš„ç±»å‹æœ‰è¯¯ï¼Œåˆ™ä¼šå‡ºç°è¿è¡Œæ—¶é”™è¯¯ã€‚as?æ˜¯Optionalç±»å‹è½¬æ¢ï¼Œå¦‚æœè½¬æ¢å¤±è´¥ï¼Œåˆ™ä¼šè¿”å›nilã€‚ äºŒã€Anyå’ŒAnyObjectç±»å‹åœ¨Objective-Cä¸­ï¼Œå¸¸å¸¸ä½¿ç”¨idæ¥è¡¨ç¤ºå¼•ç”¨ç±»å‹çš„æ³›å‹ï¼ŒSwiftä¸­çš„AnyObjectä¸ä¹‹ç±»ä¼¼ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415//è¿›è¡Œéå†for var i in 0..&lt;array.count &#123; var obj = array[i] if obj is MySubClassOne &#123; print((obj as! MySubClassOne).count!) continue &#125; if obj is MySubClassTwo &#123; print((obj as! MySubClassTwo).isBiger!) continue &#125; if obj is MyClass &#123; print((obj as! MyClass).name!) &#125;&#125; Anyç±»å‹åˆ™æ¯”AnyOjectç±»å‹æ›´åŠ å¼ºå¤§ï¼Œå…¶å¯ä»¥æ··åˆå€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹ä¸€èµ·å·¥ä½œï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1var anyArray:[Any] = [100,\"HS\",obj1,obj2,false,(1.1),obj3,&#123;()-&gt;() in print(\"Closures\")&#125;] ä¸Šé¢ç¤ºä¾‹çš„æ•°ç»„ä¸­åŒ…å«äº†æ•´å‹ï¼Œå­—ç¬¦ä¸²ç±»å‹ï¼Œå¼•ç”¨ç±»å‹ï¼Œå¸ƒå°”ç±»å‹å’Œé—­åŒ…ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}],"tags":[],"keywords":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}]},{"title":"Swiftä¸“é¢˜è®²è§£åå…«â€”â€”å¼‚å¸¸å¤„ç†","slug":"219Swiftä¸“é¢˜è®²è§£åå…«â€”â€”å¼‚å¸¸å¤„ç†","date":"2016-05-25T16:00:00.000Z","updated":"2021-07-08T09:47:48.593Z","comments":true,"path":"2016/05/26/219Swiftä¸“é¢˜è®²è§£åå…«â€”â€”å¼‚å¸¸å¤„ç†/","link":"","permalink":"http://huishao.cc/2016/05/26/219Swiftä¸“é¢˜è®²è§£åå…«â€”â€”å¼‚å¸¸å¤„ç†/","excerpt":"","text":"Swiftä¸“é¢˜è®²è§£åå…«â€”â€”å¼‚å¸¸å¤„ç†ä¸€ã€å¼‚å¸¸çš„æŠ›å‡ºä¸ä¼ é€’ä»£ç çš„è¿è¡Œå¾ˆå¤šæ—¶å€™å¹¶ä¸ä¼šå®Œå…¨æŒ‰ç…§ç¨‹åºå‘˜çš„è®¾æƒ³è¿›è¡Œï¼Œç¼–å†™ä»£ç æ—¶è¿›è¡Œå¯æ§çš„å¼‚å¸¸å¤„ç†æœºåˆ¶æ˜¯ååˆ†å¿…è¦çš„ã€‚é€šå¸¸ï¼Œå¯¹äºä¸€ä¸ªç‰¹å®šçš„æ“ä½œï¼Œç¨‹åºå‘˜å¯ä»¥å®šä¹‰ä¸€ä¸ªç»§æ‰¿è‡ªErrorTypeçš„æšä¸¾æ¥è¿›è¡Œå¼‚å¸¸ç±»å‹çš„æè¿°ï¼Œä½¿ç”¨throwå…³é”®å­—æ¥è¿›è¡Œå¼‚å¸¸çš„æŠ›å‡ºï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345678//å®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰çš„é”™è¯¯ç±»å‹enum MyError:ErrorType &#123; case DesTroyError case NormalError case SimpleError&#125;//è¿›è¡Œå¼‚å¸¸çš„æŠ›å‡ºthrow MyError.NormalError å‡½æ•°å¯ä»¥è¿›è¡Œé”™è¯¯çš„ä¼ é€’ï¼Œéœ€è¦ä½¿ç”¨throwså…³é”®å­—æ¥å£°æ˜è¿™ä¸ªå‡½æ•°å¯èƒ½ä¼šæŠ›å‡ºé”™è¯¯ï¼Œå¦‚æœä¸å¦‚æ­¤å£°æ˜ï¼Œåˆ™å‡½æ•°å†…éƒ¨æŠ›å‡ºçš„é”™è¯¯åªèƒ½åœ¨å‡½æ•°å†…éƒ¨è§£å†³ï¼Œthrowså…³é”®å­—æ ‡è®°çš„å‡½æ•°å†…éƒ¨æŠ›å‡ºçš„é”™è¯¯ä¼šè¢«ä¼ é€’åˆ°è°ƒç”¨å‡½æ•°çš„åœ°æ–¹ï¼Œå¼€å‘è€…å¯ä»¥åœ¨è°ƒç”¨å‡½æ•°çš„åœ°æ–¹æ•è·åˆ°é”™è¯¯æè¿°æ¥åšç›¸åº”å¤„ç†ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123func MyFunc()throws -&gt; Void &#123; throw MyError.NormalError&#125; å¯¹äºå¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„å‡½æ•°è°ƒç”¨ï¼Œå¼€å‘è€…è¦ä¹ˆåœ¨è°ƒç”¨å‡½æ•°çš„åœ°æ–¹æ•è·å¤„ç†è¿™äº›å¼‚å¸¸ï¼Œè¦ä¹ˆä½¿ç”¨tryå…³é”®å­—å°†å¼‚å¸¸ç»§ç»­æŠ›å‡ºå»ï¼Œç­‰å¾…ä¸‹ä¸€å±‚æ•è·è€…å¤„ç†ã€‚å¼‚å¸¸çš„å¤„ç†åé¢ä¼šä»‹ç»ï¼Œç»§ç»­æŠ›å‡ºå¼‚å¸¸ç¤ºä¾‹å¦‚ä¸‹ï¼š 1try MyFunc() äºŒã€å¼‚å¸¸çš„å¤„ç†é™¤äº†å°†é”™è¯¯ç»§ç»­å‘ä¸ŠæŠ›å‡ºä¹‹å¤–ï¼ŒSwiftè¿˜æä¾›äº†3ç§å¤„ç†å¼‚å¸¸çš„æ–¹å¼ã€‚ 1.ä½¿ç”¨do-catchè¯­å¥æ¥æ•è·å¼‚å¸¸å¼€å‘è€…å¯ä»¥ä½¿ç”¨do-catchè¯­å¥æ¥æ•è·å¼‚å¸¸ï¼Œé€šè¿‡å¼‚å¸¸ç±»å‹çš„åˆ¤æ–­æ¥åˆ†åˆ«åšå¤„ç†ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹: 123456789101112do&#123; try MyFunc()&#125;catch MyError.DesTroyError&#123;//å°†æ‰“å°error1 print(\"error1\")&#125;catch MyError.NormalError&#123; print(\"error2\")&#125;catch MyError.SimpleError&#123; print(\"error3\")&#125;catch&#123;//å¦‚æœä¸Šé¢æ‰€æœ‰çš„catchéƒ½æ²¡æœ‰æ•è· ä¼šèµ°è¿™ä¸ªå¼‚å¸¸æ•è·åˆ¤æ–­ print(\"all\")&#125; 2.å°†å¼‚å¸¸æ˜ å°„ä¸ºOptionalå€¼å¤„ç†å¼‚å¸¸æŠ›å‡ºçš„ç¬¬2ä¸­æ–¹å¼æ˜¯ä½¿ç”¨try?å°†å¼‚å¸¸æ˜ å°„ä¸ºOptionalå€¼ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºï¼Œå¯¹ä¸€ä¸ªå¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„å‡½æ•°çš„è°ƒç”¨ï¼Œå¦‚æœæœ‰å¼‚å¸¸æŠ›å‡ºï¼Œåˆ™è¿”å›å€¼ä¸ºnilï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™å‡½æ•°é¡ºåˆ©æ‰§è¡Œï¼Œè¿”å›å€¼ä¸ºå…¶åŸè¿”å›å€¼ï¼Œç¤ºä¾‹å¦‚ä¸‹: 12//å°†è¿”å›niltry? MyFunc() æ³¨æ„ï¼šè¿”å›å€¼ä¸ºVoidå¹¶éä¸ºnilï¼Œç»“åˆif-letè¯­å¥å¯ä»¥ç¼–å†™ååˆ†é£˜é€¸çš„ä»£ç ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345if let _=try?MyFunc() &#123; print(\"success\")&#125;else&#123; print(\"fail\")&#125; 3.ç»ˆæ­¢å¼‚å¸¸ä¼ é€’æœ‰æ—¶å€™å¼€å‘è€…å¯ä»¥ä¿è¯ä¸€ä¸ªå¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„å‡½æ•°ç»å¯¹ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œè¿™æ—¶å¼€å‘è€…å¯ä»¥ä½¿ç”¨try!çš„æ–¹å¼æ¥ç»ˆæ­¢å¼‚å¸¸çš„ä¼ é€’ï¼Œä½†æ˜¯è¿™æ ·åšæœ‰ä¸€å®šé£é™©ï¼Œå¦‚æœè¿™ä¸ªå‡½æ•°çœŸçš„æŠ›å‡ºäº†å¼‚å¸¸ï¼Œåˆ™ä¼šäº§ç”Ÿè¿è¡Œæ—¶é”™è¯¯ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š 1try! MyFunc() ä¸‰ã€å»¶æ—¶æ‰§è¡Œè¯­å¥å¯¹äºæŸäº›é‡Šæ”¾èµ„æºç±»çš„æ“ä½œï¼Œå¼€å‘è€…æ€»æ˜¯å¸Œæœ›å…¶ç¦»å¼€å½“å‰ä»£ç å—æ—¶è¢«æ‰§è¡Œï¼Œç„¶åä¸€ä¸ªå¤æ‚æµç¨‹ç»“æ„å¯èƒ½ä¼šå› å¼‚å¸¸æŠ›å‡ºï¼Œreturnï¼Œbreakè¿™äº›æ–¹å¼è¢«ç»ˆæ­¢ï¼Œå› æ­¤ï¼ŒSwiftä¸­æä¾›äº†deferè¯­å¥æ¥è¿›è¡Œå»¶æ—¶æ‰§è¡Œä¸€äº›æ“ä½œï¼Œdeferä¸­çš„è¯­å¥æ€»æ˜¯ä¼šåœ¨å½“å‰ä»£ç å—å°†è¦ç»“æŸæ—¶æ‰æ‰§è¡Œï¼Œæ— è®ºå®ƒæ˜¯ä»¥å“ªç§æ–¹å¼ç»“æŸçš„ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314//æ‰§è¡Œæ­¤å‡½æ•°å°†æ‰“å°/* Care finish */func MyFunc()throws -&gt; Void &#123; defer&#123; print(\"finish\") &#125; print(\"Care\") throw MyError.DesTroyError &#125; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}],"tags":[],"keywords":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}]},{"title":"Swiftä¸“é¢˜è®²è§£åä¸ƒâ€”â€”Optionalé“¾","slug":"218Swiftä¸“é¢˜è®²è§£åä¸ƒâ€”â€”Optionalé“¾","date":"2016-05-23T16:00:00.000Z","updated":"2021-07-08T09:46:59.058Z","comments":true,"path":"2016/05/24/218Swiftä¸“é¢˜è®²è§£åä¸ƒâ€”â€”Optionalé“¾/","link":"","permalink":"http://huishao.cc/2016/05/24/218Swiftä¸“é¢˜è®²è§£åä¸ƒâ€”â€”Optionalé“¾/","excerpt":"","text":"Swiftä¸“é¢˜è®²è§£åä¸ƒâ€”â€”Optionalé“¾Swiftä¸­çš„Optionalå€¼æœ‰è¿™æ ·çš„ç‰¹æ€§ï¼Œå½“å¯¹å…¶è¿›è¡Œå¯é€‰æ‹†åŒ…æ—¶ï¼Œå³ä½¿ç”¨?è¿›è¡ŒOptionalç±»å‹å€¼çš„å–å€¼æ—¶ï¼Œå¦‚æœOptionalå€¼ä¸ä¸ºnilï¼Œåˆ™ä¼šè¿”å›åŸå§‹ç±»å‹çš„æ•°æ®å€¼ï¼Œå¦‚æœä¸ºnilï¼Œåˆ™ä¼šè¿”å›nilã€‚å› æ­¤ï¼Œå½“ä½¿ç”¨?å¯¹Optionalæ‹†åŒ…åè¿›è¡Œæ–¹æ³•ã€å±æ€§æˆ–è€…ä¸‹æ ‡çš„è°ƒç”¨æ—¶ï¼Œå¦‚æœæœ‰å€¼ï¼Œåˆ™ä¼šæˆåŠŸç›¸åº”è°ƒç”¨ï¼Œå¦‚æœæ²¡æœ‰å€¼ï¼Œåˆ™ä¼šè°ƒç”¨å¤±è´¥ï¼Œè¿”å›nilã€‚ æ³¨æ„ï¼šä½¿ç”¨!åˆ™ä¼šè¿›è¡Œå¼ºåˆ¶æ‹†åŒ…ï¼Œè¿™æ—¶å¦‚æœOptionalå€¼ä¸ºnilï¼Œåˆ™ä¼šå‡ºç°è¿è¡Œæ—¶é”™è¯¯ï¼Œå› æ­¤å¼€å‘è€…åœ¨ä½¿ç”¨!è¿›è¡Œå¼ºåˆ¶æ‹†åŒ…æ—¶ï¼Œå¿…é¡»ç¡®è®¤Optionalç±»å‹å€¼ä¸ä¸ºnilã€‚ å½“å¯¹å¯é€‰å€¼è¿›è¡Œå¯é€‰æ‹†åŒ…å¹¶è°ƒç”¨å…¶å±æ€§æˆ–æ–¹æ³•åï¼Œæ— è®ºåŸå±æ€§æˆ–è€…æ–¹æ³•è¿”å›å€¼æ˜¯ä»€ä¹ˆç±»å‹çš„ï¼Œéƒ½ä¼šè¢«åŒ…è£…æˆOptionalå€¼ç±»å‹ã€‚å½“ä½¿ç”¨?å¯¹ä¸€ä¸ªOptionalå€¼è¿›è¡Œæ‹†åŒ…å¹¶è°ƒç”¨å…¶æ–¹æ³•æ—¶ï¼Œæ–¹æ³•çš„è¿”å›å€¼ä¸€ä¼šè¢«åŒ…è£…ä¸ºOptionalç±»å‹ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213class Myclass &#123; var cls:MyClassTwo? &#125;class MyClassTwo &#123; func run() -&gt; String &#123; return \"run\" &#125;&#125;let obj:Myclass = Myclass()//å°†è¿”å›nilobj.cls?.run() åœ¨è¿›è¡ŒOptionalé“¾è°ƒç”¨çš„æ—¶å€™ï¼Œä¼šéµå®ˆå¦‚ä¸‹ä¸€äº›ç‰¹æ€§ï¼š 1.å¦‚æœè¿›è¡Œ?æ‹†åŒ…Optionalå€¼çš„å±æ€§æˆ–è€…æ–¹æ³•è¿”å›å€¼åŸæ¥ä¸ºéOptionalå€¼ï¼Œåˆ™ä¼šåŒ…è£…æˆOptionalå€¼ã€‚ 2.å¦‚æœè¿›è¡Œ?æ‹†åŒ…Optionalå€¼çš„å±æ€§æˆ–è€…æ–¹æ³•è¿”å›å€¼åŸæ¥ä¸ºOptionalå€¼ï¼Œåˆ™ä¾ç„¶ä¼šè¿”å›Optionalå€¼ï¼Œå¹¶ä¸”å¹¶ä¸ä¼šè¿›è¡ŒOptionalå€¼ç±»å‹çš„åµŒå¥—ã€‚ 3.ç”±äºä½¿ç”¨Optionalå€¼?å¯é€‰æ‹†åŒ…æ—¶ä¼šå°†å…¶å±æ€§å’Œæ–¹æ³•çš„è¿”å›å€¼éƒ½åŒ…è£…æˆOptionalç±»å‹çš„ï¼Œå› æ­¤ä½¿ç”¨?å¯ä»¥è¿›è¡ŒOptionalé“¾å¼è°ƒç”¨ï¼Œè¿™å…¶é—´ï¼Œæœ‰ä¸€ä¸ªç¯èŠ‚è°ƒç”¨å¤±è´¥ï¼Œæ•´ä¸ªé“¾éƒ½ä¼šè¿”å›nilã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š 123let obj:Myclass = Myclass()//å°†è¿”å›nil(obj.cls?.run())?.startIndex ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}],"tags":[],"keywords":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}]},{"title":"iOSè¿›åº¦æŒ‡ç¤ºå™¨â€”â€”NSProgress","slug":"217iOSè¿›åº¦æŒ‡ç¤ºå™¨â€”â€”NSProgress","date":"2016-05-21T16:00:00.000Z","updated":"2021-07-08T09:46:13.427Z","comments":true,"path":"2016/05/22/217iOSè¿›åº¦æŒ‡ç¤ºå™¨â€”â€”NSProgress/","link":"","permalink":"http://huishao.cc/2016/05/22/217iOSè¿›åº¦æŒ‡ç¤ºå™¨â€”â€”NSProgress/","excerpt":"","text":"iOSè¿›åº¦æŒ‡ç¤ºå™¨â€”â€”NSProgressä¸€ã€å¼•è¨€åœ¨iOS7ä¹‹å‰ï¼Œç³»ç»Ÿä¸€ç›´æ²¡æœ‰æä¾›ä¸€ä¸ªå®Œæ•´çš„æ¡†æ¶æ¥æè¿°ä»»åŠ¡è¿›åº¦ç›¸å…³çš„åŠŸèƒ½ã€‚è¿™ä½¿å¾—åœ¨å¼€å‘ä¸­è¿›è¡Œè€—æ—¶ä»»åŠ¡è¿›åº¦çš„ç›‘å¬å°†ä»€ä¹ˆéº»çƒ¦ï¼Œåœ¨iOS7ä¹‹åï¼Œç³»ç»Ÿæä¾›äº†NSProgressç±»æ¥ä¸“é—¨æŠ¥å‘Šä»»åŠ¡è¿›åº¦ã€‚ äºŒã€åˆ›å»ºå•ä»»åŠ¡è¿›åº¦ç›‘å¬å™¨å•ä»»åŠ¡è¿›åº¦çš„ç›‘å¬æ˜¯NSProgressæœ€ç®€å•çš„ä¸€ç§è¿ç”¨åœºæ™¯ï¼Œæˆ‘ä»¬æ¥ç”¨å®šæ—¶å™¨æ¨¡æ‹Ÿä¸€ä¸ªè€—æ—¶ä»»åŠ¡ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930@interface ViewController ()&#123; NSProgress * progress;&#125;@end@implementation ViewController- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view, typically from a nib. //è¿™ä¸ªæ–¹æ³•å°†åˆ›å»ºä»»åŠ¡è¿›åº¦ç®¡ç†å¯¹è±¡ UnitCountæ˜¯ä¸€ä¸ªåŸºäºUIä¸Šçš„å®Œæ•´ä»»åŠ¡çš„å•å…ƒæ•° progress = [NSProgress progressWithTotalUnitCount:10]; NSTimer * timer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(task) userInfo:nil repeats:YES]; //å¯¹ä»»åŠ¡è¿›åº¦å¯¹è±¡çš„å®Œæˆæ¯”ä¾‹è¿›è¡Œç›‘å¬ [progress addObserver:self forKeyPath:@\"fractionCompleted\" options:NSKeyValueObservingOptionNew context:nil];&#125;- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context&#123; NSLog(@\"è¿›åº¦= %f\",progress.fractionCompleted);&#125;-(void)task&#123; //å®Œæˆä»»åŠ¡å•å…ƒæ•°+1 if (progress.completedUnitCount&lt;progress.totalUnitCount) &#123; progress.completedUnitCount +=1; &#125; &#125; ä¸Šé¢çš„ç¤ºä¾‹ä»£ç ä¸­ï¼ŒfractionCompletedå±æ€§ä¸º0-1ä¹‹é—´çš„æµ®ç‚¹å€¼ï¼Œä¸ºä»»åŠ¡çš„å®Œæˆæ¯”ä¾‹ã€‚NSProgresså¯¹è±¡ä¸­è¿˜æœ‰ä¸¤ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„å±æ€§ï¼Œè¿™ä¸¤ä¸ªå±æ€§å°†è¿›åº¦ä¿¡æ¯è½¬åŒ–æˆå›ºå®šçš„æ ¼å¼ï¼š 1234//æ˜¾ç¤ºå®Œåæ¯”ä¾‹ å¦‚ï¼š10% completed@property (null_resettable, copy) NSString *localizedDescription;//å®Œæˆæ•°é‡ å¦‚ï¼š1 of 10@property (null_resettable, copy) NSString *localizedAdditionalDescription; ä¸‰ã€åˆ›å»ºå¤šä»»åŠ¡è¿›åº¦ç›‘å¬å™¨ä¸Šé¢æ¼”ç¤ºäº†åªæœ‰ä¸€ä¸ªä»»åŠ¡æ—¶çš„è¿›åº¦ç›‘å¬æ–¹æ³•ï¼Œå®é™…ä¸Šï¼Œåœ¨å¼€å‘ä¸­ï¼Œä¸€ä¸ªä»»åŠ¡ä¸­å¾€å¾€åˆæœ‰è®¸å¤šå­ä»»åŠ¡ï¼ŒNSProgressæ˜¯ä»¥æ ‘çŠ¶çš„ç»“æ„è¿›è¡Œè®¾è®¡çš„ï¼Œå…¶æ”¯æŒå­ä»»åŠ¡çš„åµŒå¥—ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view, typically from a nib. //è¿™ä¸ªæ–¹æ³•å°†åˆ›å»ºä»»åŠ¡è¿›åº¦ç®¡ç†å¯¹è±¡ UnitCountæ˜¯ä¸€ä¸ªåŸºäºUIä¸Šçš„å®Œæ•´ä»»åŠ¡çš„å•å…ƒæ•° progress = [NSProgress progressWithTotalUnitCount:10]; //å¯¹ä»»åŠ¡è¿›åº¦å¯¹è±¡çš„å®Œæˆæ¯”ä¾‹è¿›è¡Œç›‘å¬ [progress addObserver:self forKeyPath:@\"fractionCompleted\" options:NSKeyValueObservingOptionNew context:nil]; //å‘ä¸‹åˆ†æ”¯å‡ºä¸€ä¸ªå­ä»»åŠ¡ å­ä»»åŠ¡è¿›åº¦æ€»æ•°ä¸º5ä¸ªå•å…ƒ å³å½“å­ä»»åŠ¡å®Œæˆæ—¶ çˆ¶progersså¯¹è±¡è¿›åº¦èµ°5ä¸ªå•å…ƒ [progress becomeCurrentWithPendingUnitCount:5]; [self subTaskOne]; [progress resignCurrent]; //å‘ä¸‹åˆ†å‡ºç¬¬2ä¸ªå­ä»»åŠ¡ [progress becomeCurrentWithPendingUnitCount:5]; [self subTaskOne]; [progress resignCurrent];&#125;-(void)subTaskOne&#123; //å­ä»»åŠ¡æ€»å…±æœ‰10ä¸ªå•å…ƒ NSProgress * sub =[NSProgress progressWithTotalUnitCount:10]; int i=0; while (i&lt;10) &#123; i++; sub.completedUnitCount++; &#125;&#125;- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context&#123; NSLog(@\"= %@\",progress.localizedAdditionalDescription);&#125; NSProgressçš„è¿™ç§æ ‘çŠ¶è®¾è®¡æ¨¡å¼ä¹çœ‹èµ·æ¥ç¡®å®æœ‰äº›ä»¤äººè´¹è§£ï¼Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼ŒbecomeCurrentWithPendingUnitCount:æ–¹æ³•çš„æ„ä¹‰æ˜¯å°†æ­¤NSProgresså¯¹è±¡æ³¨å†Œä¸ºå½“å‰çº¿ç¨‹ä»»åŠ¡çš„æ ¹è¿›åº¦ç®¡ç†å¯¹è±¡ï¼ŒresignCurrentæ–¹æ³•ä¸ºå–æ¶ˆæ³¨å†Œï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•å¿…é¡»æˆå¯¹å‡ºç°ï¼Œå½“ä¸€ä¸ªNSProgresså¯¹è±¡è¢«æ³¨å†Œä¸ºå½“å‰çº¿ç¨‹çš„æ ¹èŠ‚ç‚¹æ—¶ï¼Œåé¢ä½¿ç”¨ç±»æ–¹æ³• progressWithTotalUnitCount:åˆ›å»ºçš„NSProgresså¯¹è±¡éƒ½é»˜è®¤ä½œä¸ºå­èŠ‚ç‚¹æ·»åŠ ã€‚ å››ã€iOS9ä¹‹åè¿›è¡Œå¤šä»»åŠ¡è¿›åº¦ç›‘å¬çš„æ–°è®¾è®¡æ–¹æ³•æ­£å¦‚ä¸Šé¢çš„ä¾‹å­æ‰€æ¼”ç¤ºï¼Œæ³¨å†Œæ ¹èŠ‚ç‚¹çš„æ–¹å¼å¯è¯»æ€§å¾ˆå·®ï¼Œä»£ç ç»“æ„ä¹Ÿä¸å¤ªæ¸…æ™°ï¼Œå¯èƒ½Appleçš„å·¥ç¨‹å¸ˆä»¬ä¹Ÿè§‰å¾—å¦‚æ­¤ï¼Œåœ¨iOS9ä¹‹åï¼ŒNSProgressç±»ä¸­åˆæ·»åŠ äº†ä¸€äº›æ–¹æ³•ï¼Œé€šè¿‡è¿™äº›æ–¹æ³•å¯ä»¥æ›´åŠ æ¸…æ™°çš„è¡¨è¾¾è¿›åº¦æŒ‡ç¤ºå™¨ä¹‹é—´çš„å±‚çº§ç»“æ„ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view, typically from a nib. //è¿™ä¸ªæ–¹æ³•å°†åˆ›å»ºä»»åŠ¡è¿›åº¦ç®¡ç†å¯¹è±¡ UnitCountæ˜¯ä¸€ä¸ªåŸºäºUIä¸Šçš„å®Œæ•´ä»»åŠ¡çš„å•å…ƒæ•° progress = [NSProgress progressWithTotalUnitCount:10]; //å¯¹ä»»åŠ¡è¿›åº¦å¯¹è±¡çš„å®Œæˆæ¯”ä¾‹è¿›è¡Œç›‘å¬ [progress addObserver:self forKeyPath:@\"fractionCompleted\" options:NSKeyValueObservingOptionNew context:nil]; //åˆ›å»ºå­èŠ‚ç‚¹ NSProgress * sub = [NSProgress progressWithTotalUnitCount:10 parent:progress pendingUnitCount:5]; NSProgress * sub2 = [NSProgress progressWithTotalUnitCount:10 parent:progress pendingUnitCount:5]; for (int i=0; i&lt;10; i++) &#123; sub.completedUnitCount ++; sub2.completedUnitCount ++; &#125;&#125; å¦‚ä¸Šé¢ä»£ç æ‰€ç¤ºï¼Œä»£ç ç»“æ„å˜å¾—æ›´åŠ æ¸…æ™°ï¼Œå¯æ“ä½œæ€§ä¹Ÿæ›´å¼ºäº†ã€‚ äº”ã€ä¸€ç‚¹å°æ€»ç»“123456789101112131415161718192021222324252627282930313233//è·å–å½“å‰çº¿ç¨‹çš„è¿›åº¦ç®¡ç†å¯¹è±¡æ ¹èŠ‚ç‚¹//æ³¨æ„ï¼šå½“æœ‰NSProgresså¯¹è±¡è°ƒç”¨äº†becomeCurrentWithPendingUnitCount:æ–¹æ³•åï¼Œè¿™ä¸ªæ–¹æ³•æ‰èƒ½è·å–åˆ°+ (nullable NSProgress *)currentProgress;//åˆ›å»ºä¸€ä¸ªNSProgresså¯¹è±¡ï¼Œéœ€è¦ä¼ å…¥è¿›åº¦çš„å•å…ƒæ•°é‡+ (NSProgress *)progressWithTotalUnitCount:(int64_t)unitCount;//å’Œä¸Šä¸€ä¸ªæ–¹æ³•åŠŸèƒ½ç›¸ä¼¼ iOS9ä¹‹åçš„æ–°æ–¹æ³•+ (NSProgress *)discreteProgressWithTotalUnitCount:(int64_t)unitCount;//iOS9ä¹‹åçš„æ–°æ–¹æ³• åˆ›å»ºæŸä¸ªè¿›åº¦æŒ‡ç¤ºå™¨èŠ‚ç‚¹çš„å­èŠ‚ç‚¹+ (NSProgress *)progressWithTotalUnitCount:(int64_t)unitCount parent:(NSProgress *)parent pendingUnitCount:(int64_t)portionOfParentTotalUnitCount;//NSProgresså®ä¾‹çš„åˆå§‹åŒ–æ–¹æ³• è‡ªçˆ¶èŠ‚ç‚¹å‚æ•°å¯ä»¥ä¸ºnil- (instancetype)initWithParent:(nullable NSProgress *)parentProgressOrNil userInfo:(nullable NSDictionary *)userInfoOrNil;//æ³¨å†Œä¸ºå½“å‰çº¿ç¨‹æ ¹èŠ‚ç‚¹- (void)becomeCurrentWithPendingUnitCount:(int64_t)unitCount;//å–æ¶ˆæ³¨å†Œ ä¸æ³¨å†Œæ–¹æ³•å¿…é¡»åŒæ­¥å‡ºç°- (void)resignCurrent;//iOS9æ–°æ–¹æ³• å‘ä¸€ä¸ªèŠ‚ç‚¹ä¸­æ·»åŠ ä¸€ä¸ªå­èŠ‚ç‚¹- (void)addChild:(NSProgress *)child withPendingUnitCount:(int64_t)inUnitCount;//è¿›åº¦å•å…ƒæ€»æ•°@property int64_t totalUnitCount;//å·²å®Œæˆçš„è¿›åº¦å•å…ƒæ•°@property int64_t completedUnitCount;//æ˜¯å¦å¯å–æ¶ˆ@property (getter=isCancellable) BOOL cancellable;//æ˜¯å¦å¯æš‚åœ@property (getter=isPausable) BOOL pausable;//è¿›åº¦æ¯”ä¾‹ 0-1ä¹‹é—´@property (readonly) double fractionCompleted;//å–æ¶ˆ- (void)cancel;//æš‚åœ- (void)pause;//æ¢å¤- (void)resume å…­ã€å…³äºNSProgresså¯¹è±¡çš„ç”¨æˆ·é…ç½®å­—å…¸åœ¨NSProgresså¯¹è±¡çš„ç”¨æˆ·å­—å…¸ä¸­å¯ä»¥è®¾ç½®ä¸€äº›ç‰¹å®šçš„é”®å€¼æ¥è¿›è¡Œæ˜¾ç¤ºæ¨¡å¼çš„è®¾ç½®ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627//è®¾ç½®å‰©ä½™æ—¶é—´ ä¼šå½±å“localizedAdditionalDescriptionçš„å€¼/*ä¾‹å¦‚ï¼š0 of 10 â€” About 10 seconds remaining*/[progress setUserInfoObject:@10 forKey:NSProgressEstimatedTimeRemainingKey];//è®¾ç½®å®Œæˆé€Ÿåº¦ä¿¡æ¯ ä¼šå½±å“localizedAdditionalDescriptionçš„å€¼/*ä¾‹å¦‚ï¼šZero KB of 10 bytes (15 bytes/sec)*/[progress setUserInfoObject:@15 forKey:NSProgressThroughputKey];/*ä¸‹é¢è¿™äº›é”®å€¼çš„ç”Ÿæ•ˆ å¿…é¡»å°†NSProgresså¯¹è±¡çš„kindå±æ€§è®¾ç½®ä¸º NSProgressKindFileNSProgressFileOperationKindKeyé”®å¯¹åº”çš„æ˜¯æç¤ºæ–‡å­—ç±»å‹ ä¼šå½±å“localizedDescriptionçš„å€¼NSProgressFileOperationKindKeyå¯é€‰çš„å¯¹åº”å€¼å¦‚ä¸‹ï¼šNSProgressFileOperationKindDownloadingï¼š æ˜¾ç¤ºDownloading filesâ€¦NSProgressFileOperationKindDecompressingAfterDownloadingï¼š æ˜¾ç¤ºDecompressing filesâ€¦NSProgressFileOperationKindReceivingï¼š æ˜¾ç¤ºReceiving filesâ€¦NSProgressFileOperationKindCopyingï¼š æ˜¾ç¤ºCopying filesâ€¦*/ [progress setUserInfoObject:NSProgressFileOperationKindDownloading forKey:NSProgressFileOperationKindKey];/*NSProgressFileTotalCountKeyé”®è®¾ç½®æ˜¾ç¤ºçš„æ–‡ä»¶æ€»æ•° ä¾‹å¦‚ï¼šCopying 100 filesâ€¦*/ [progress setUserInfoObject:@100 forKey:NSProgressFileTotalCountKey];//è®¾ç½®å·²å®Œæˆçš„æ•°é‡[progress setUserInfoObject:@1 forKey:NSProgressFileCompletedCountKey]; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"Swiftä¸“é¢˜è®²è§£åäº”â€”â€”ç±»å‹æ„é€ ","slug":"215Swiftä¸“é¢˜è®²è§£åäº”â€”â€”ç±»å‹æ„é€ ","date":"2016-05-18T16:00:00.000Z","updated":"2021-07-08T09:44:25.573Z","comments":true,"path":"2016/05/19/215Swiftä¸“é¢˜è®²è§£åäº”â€”â€”ç±»å‹æ„é€ /","link":"","permalink":"http://huishao.cc/2016/05/19/215Swiftä¸“é¢˜è®²è§£åäº”â€”â€”ç±»å‹æ„é€ /","excerpt":"","text":"Swiftä¸“é¢˜è®²è§£åäº”â€”â€”ç±»å‹æ„é€ ä¸€ã€å¼•è¨€æ„é€ æ˜¯ç±»ã€ç»“æ„ä½“ã€æšä¸¾åœ¨å®ä¾‹åŒ–ä¸­å¿…é¡»æ‰§è¡Œçš„è¿‡ç¨‹ï¼Œåœ¨æ„é€ è¿‡ç¨‹ä¸­ï¼Œç±»ã€ç»“æ„ä½“å¿…é¡»å®Œæˆå…¶ä¸­å­˜å‚¨å±æ€§çš„æ„é€ ã€‚Swiftä¸­çš„æ„é€ é€šè¿‡æ„é€ æ–¹æ³•æ¥å®Œæˆï¼Œå’ŒObjective-Cä¸­çš„initåˆå§‹åŒ–ç³»åˆ—æ–¹æ³•ä¸åŒï¼ŒSwiftä¸­çš„æ„é€ æ–¹æ³•å¹¶ä¸ä¼šä¹Ÿæ— éœ€è¿”å›å€¼ï¼Œå®ƒçš„ä»»åŠ¡å³æ˜¯å®Œæˆå®ä¾‹åŒ–è¿‡ç¨‹ã€‚ äºŒã€å±æ€§çš„æ„é€ ç±»å’Œç»“æ„ä½“çš„å­˜å‚¨å±æ€§å¿…é¡»åœ¨å®ä¾‹åŒ–å®Œæˆå‰è¢«æ„é€ å®Œæˆï¼Œå› æ­¤ï¼Œæœ‰ä¸¤ç§æ–¹å¼æ¥è¿™ä¹ˆåšï¼š 1.ç±»æˆ–è€…ç»“æ„ä½“ä¸­å£°æ˜å­˜å‚¨å±æ€§æ—¶ç›´æ¥ä¸ºå…¶è®¾ç½®é»˜è®¤å€¼ã€‚ 2.åœ¨ç±»æˆ–è€…ç»“æ„ä½“çš„æ„é€ æ–¹æ³•ä¸­å¯¹å­˜å‚¨å±æ€§è¿›è¡Œæ„é€ ã€‚ è¿™é‡Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼šåœ¨å­˜å‚¨å±æ€§è®¾ç½®é»˜è®¤å€¼æˆ–è€…åœ¨æ„é€ æ–¹æ³•ä¸­è¿›è¡Œæ„é€ æ—¶ï¼Œå¹¶ä¸ä¼šè§¦å‘å±æ€§ç›‘å¬å™¨willSetã€didSetæ–¹æ³•ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314class MyClass &#123; var count:Int=0&#123; willSet&#123; print(&quot;willset&quot;) &#125; &#125; var name:String init()&#123; //å¿…é¡»è¿›è¡Œæ„é€ æˆ–è€…è®¾ç½®å€¼ count=5 count=6 name = &quot;HS&quot; &#125;&#125; init()æ–¹æ³•ä¸ºä¸å¸¦å‚æ•°çš„æ„é€ æ–¹æ³•ï¼Œæ‰€æœ‰æ„é€ æ–¹æ³•éƒ½éœ€è¦ç”¨init()æ¥æ ‡è¯†ï¼Œå¼€å‘è€…å¯ä»¥ä½¿ç”¨å‡½æ•°é‡è½½çš„æ–¹å¼æ¥åˆ›å»ºä¸åŒçš„æ„é€ æ–¹æ³•ã€‚å®˜æ–¹æ¨èï¼Œå¦‚æœä¸€ä¸ªç±»çš„å¤§å¤šå®ä¾‹çš„æŸä¸ªå­˜å‚¨å±æ€§éƒ½éœ€è¦ç›¸åŒçš„å€¼ï¼Œå¼ºçƒˆæ¨èå¼€å‘è€…è®¾ç½®æ­¤å­˜å‚¨å±æ€§çš„é»˜è®¤å€¼ï¼Œè¿™æ ·å¯ä»¥å¾ˆå¥½çš„åº”ç”¨Swiftè¯­è¨€çš„ç±»å‹æ¨æ–­åŠŸèƒ½å¹¶ä¸”å¯ä»¥ä½¿ä»£ç ç»“æ„æ›´åŠ ç´§å‡‘ã€‚ å¦‚æœä¸€ä¸ªå±æ€§åœ¨é€»è¾‘ä¸Šæ˜¯å…è®¸ä¸ºnilçš„ï¼Œåˆ™å¼€å‘è€…å¯ä»¥å°†å…¶å£°æ˜ç§°Optionalå€¼ç±»å‹ï¼Œåœ¨è¿›è¡Œç±»çš„å®ä¾‹åŒ–æ—¶ï¼ŒOptionalç±»å‹çš„å±æ€§å¦‚æœæ²¡æœ‰èµ‹å€¼ä¼šè¢«è‡ªåŠ¨èµ‹å€¼ä¸ºnilã€‚ æ³¨æ„ï¼Œå¸¸é‡ä¹Ÿéœ€è¦åœ¨æ„é€ å®Œæˆä¹‹å‰è¿›è¡Œèµ‹å€¼ï¼Œä¸€æ—¦èµ‹å€¼æˆ–æ„é€ å®Œæˆï¼Œå¸¸é‡å°†ä¸èƒ½è¢«ä¿®æ”¹ã€‚ ä¸‰ã€æ„é€ æ–¹æ³•é¦–å…ˆï¼Œå¦‚æœç±»æˆ–è€…ç»“æ„ä½“ä¸­çš„æ‰€æœ‰å­˜å‚¨å±æ€§éƒ½æœ‰é»˜è®¤å€¼ï¼Œé‚£ä¸ªå¦‚æœå¼€å‘è€…ä¸æä¾›æ„é€ æ–¹æ³•ï¼ŒSwiftä¹Ÿä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªé»˜è®¤æ„é€ æ–¹æ³•ï¼Œæ— å‚çš„init()ï¼Œåœ¨è¿›è¡Œç±»å‹çš„å®ä¾‹åŒ–æ—¶ï¼Œå°†é»˜è®¤æ„é€ æ‰€æœ‰å­˜å‚¨å±æ€§éƒ½æ˜¯é»˜è®¤å€¼çš„å®ä¾‹ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567class MyClassTwo &#123; var count = 10 var name = &quot;HS&quot;&#125;//é»˜è®¤çš„init()æ„é€ æ–¹æ³•var obj = MyClassTwo()print(obj.count,obj.name) ç»“æ„ä½“ä¼šæ¯”è¾ƒç‰¹æ®Šï¼Œå°±ç®—æ²¡æœ‰ä¸ºå…¶å­˜å‚¨å±æ€§è®¾ç½®åˆå€¼ï¼Œå®ƒä¹Ÿä¼šè‡ªåŠ¨ç”Ÿæˆæ„é€ æ–¹æ³•ï¼Œè¿™ä¸ªæ„é€ æ–¹æ³•ä¸­ä¼šè‡ªå¸¦æ‰€æœ‰æ²¡æœ‰èµ‹é»˜è®¤å€¼çš„å±æ€§åä½œä¸ºå‚æ•°ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345struct Shape &#123; var center:(Int,Int) var name:String&#125;var shape = Shape(center: (1,1), name: &quot;circle&quot;) è¿˜æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œå¯¹äºå€¼ç±»å‹(ç»“æ„ä½“ï¼Œæšä¸¾)ï¼Œå¦‚æœå¼€å‘è€…è‡ªå®šä¹‰äº†ä¸€ä¸ªæ„é€ æ–¹æ³•ï¼Œåˆ™é»˜è®¤çš„æ„é€ æ–¹æ³•å°†ä¼šå¤±æ•ˆï¼Œè¿™æ ·è®¾è®¡æ˜¯ä¸ºäº†å®‰å…¨æ€§è€ƒè™‘ï¼Œé˜²æ­¢è¯¯ç”¨åˆ°ç³»ç»Ÿçš„é»˜è®¤æ„é€ æ–¹æ³•ã€‚å¹¶ä¸”ï¼Œå¯¹äºå€¼ç±»å‹(ç»“æ„ä½“ï¼Œæšä¸¾)çš„æ„é€ æ–¹æ³•ï¼Œæ˜¯æ”¯æŒåµŒå¥—è°ƒç”¨çš„ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112struct Shape &#123; var center:(Int,Int) var name:String init() &#123; center = (0,0) name = &quot;HS&quot; &#125; init(param:String)&#123; self.init() &#125;&#125;var shape = Shape(param: &quot;&quot;) å››ã€ç±»çš„Designatedæ„é€ æ–¹æ³•ä¸Convenienceæ„é€ æ–¹æ³•åœ¨å‰é¢çš„ä¸€ç¯‡åšå®¢ä¸­ï¼Œæˆ‘æ›¾ç»ä¸“é—¨è®¨è®ºè¿‡Swiftä¸­çš„æ„é€ æ–¹æ³•ï¼Œåšå®¢åœ°å€å¦‚ä¸‹ï¼Œå¯ä¾›å‚è€ƒï¼š Swiftä¸­çš„æ„é€ æ–¹æ³•è§£æï¼šhttp://my.oschina.net/u/2340880/blog/660134ã€‚ Designatedæ„é€ æ–¹æ³•ä¹Ÿè¢«ç§°ä¸ºæŒ‡å®šæ„é€ æ–¹æ³•ï¼Œå®ƒæ˜¯ç±»çš„æ ¸å¿ƒæ„é€ æ–¹æ³•ï¼ŒæŒ‡å®šæ„é€ æ–¹æ³•å°†å®Œæˆç±»ä¸­æ‰€æœ‰éœ€è¦æ„é€ æˆ–èµ‹å€¼è¿‡ç¨‹ã€‚å¦‚æœä¸€ä¸ªç±»ç»§æ‰¿äºå¦ä¸€ä¸ªç±»è€Œæ¥ï¼Œåˆ™æŒ‡å®šæ„é€ æ–¹æ³•éœ€è¦è°ƒç”¨çˆ¶ç±»çš„æ„é€ æ–¹æ³•æ¥å®Œæˆçˆ¶ç±»ä¸­å±æ€§çš„åˆå§‹ã€‚Convenienceå·¥ä½œæ–¹æ³•ä¹Ÿè¢«ç§°ä¸ºä¾¿åˆ©æ„é€ æ–¹æ³•ï¼Œå…¶ä¸»è¦ä½œä¸ºè¾…åŠ©çš„æ„é€ æ–¹æ³•å­˜åœ¨ï¼Œä¾¿åˆ©æ„é€ æ–¹æ³•éœ€è¦è°ƒç”¨ç±»ä¸­çš„æŒ‡å®šæ„é€ æ–¹æ³•æ¥å®Œæˆæ„é€ ï¼Œä»è¿™ä¸€ç‚¹çœ‹ï¼Œå®é™…ä¸Šç±»æ˜¯é€šè¿‡ä¾¿åˆ©æ„é€ æ–¹æ³•æ¥å®ç°ç±»ä¼¼å€¼ç±»å‹çš„æ„é€ æ–¹æ³•çš„åµŒå¥—ä½¿ç”¨ã€‚æŒ‡å®šæ„é€ æ–¹æ³•ä¸éœ€è¦å¤šä½™å…³é”®å­—æ¥ä¿®é¥°ï¼Œå…¶é»˜è®¤å°±æ˜¯Designatedç±»å‹çš„ï¼Œä¾¿åˆ©æ„é€ æ–¹æ³•éœ€è¦ä½¿ç”¨convenienceå…³é”®å­—ç±»ä¿®é¥°ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213class MyClassTwo &#123; var count = 10 var name = \"HS\" init(name:String)&#123; self.name = name &#125; convenience init(count:Int)&#123; self.init(name:\"HS\") self.count = count &#125;&#125;var obj = MyClassTwo(count:5)print(obj.count,obj.name) ç±»çš„æ„é€ æ–¹æ³•éœ€è¦éµå®ˆä¸‹é¢3æ¡è§„åˆ™ï¼š 1.æŒ‡å®šæ„é€ æ–¹æ³•å¿…é¡»è°ƒç”¨å…¶çˆ¶ç±»çš„æŒ‡å®šæ„é€ æ–¹æ³•ã€‚ 2.ä¾¿åˆ©æ„é€ æ–¹æ³•å¿…é¡»è°ƒç”¨åŒç±»ä¸­çš„å…¶ä»–æ„é€ æ–¹æ³•ã€‚ 3.ä¾¿åˆ©æ„é€ æ–¹æ³•è°ƒç”¨åˆ°æœ€ä¸Šå±‚å¿…é¡»è°ƒç”¨ä¸€ä¸ªæŒ‡å®šæ„é€ æ–¹æ³•ã€‚ è¯­è¨€æ–‡æ¡£ä¸­æä¾›å¦‚ä¸‹ç¤ºä¾‹å›¾æ¥ç»“æŸæŒ‡å®šæ„é€ æ–¹æ³•å’Œä¾¿åˆ©æ„é€ æ–¹æ³•çš„å…³ç³»ï¼š äº”ã€æ„é€ æ–¹æ³•çš„å®‰å…¨ç‰¹æ€§Swiftæ˜¯ä¸€ç§ååˆ†æ³¨é‡ç±»å‹å®‰å…¨çš„è¯­è¨€ï¼Œè¿™ç§è¯­è¨€ç‰¹æ€§çš„ä¼˜åŠ¿åœ¨äºç±»åœ¨å®ä¾‹åŒ–åï¼Œæ‰€æœ‰çš„å±æ€§éƒ½æ˜¯å¼€å‘è€…æ˜ç¡®å¯æ§çš„ã€‚Swiftçš„ç¼–è¯‘å™¨åœ¨ç±»çš„æ„é€ æ–¹æ³•ä¸­ä¼šè¿›è¡Œ4ä¸­å®‰å…¨æ€§æ£€æŸ¥ï¼š æ£€æŸ¥1ï¼šæŒ‡å®šæ„é€ å™¨ä¸­å¿…é¡»å®Œæˆæ‰€æœ‰å­˜å‚¨å±æ€§çš„èµ‹å€¼åæ‰èƒ½è°ƒç”¨çˆ¶ç±»çš„æŒ‡å®šæ„é€ æ–¹æ³•ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567class MyClassThree: MyClassTwo &#123; var param:Int init()&#123; param = 100 super.init(name: \"HS\") &#125;&#125; æ£€æŸ¥2ï¼šå­ç±»å¦‚æœè¦è‡ªå®šä¹‰çˆ¶ç±»ä¸­å­˜å‚¨å±æ€§çš„å€¼ï¼Œå¿…é¡»è¦è°ƒç”¨çˆ¶ç±»çš„æ„é€ æ–¹æ³•ä¹‹åè®¾ç½®ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789class MyClassThree: MyClassTwo &#123; var param:Int init()&#123; param = 100 super.init(name: \"HS\") //é‡è®¾ç»§æ‰¿çˆ¶ç±»å±æ€§çš„nameå€¼ self.name = \"New\" &#125;&#125; æ£€æŸ¥3ï¼šå¦‚æœä¾¿åˆ©æ„é€ æ–¹æ³•ä¸­éœ€è¦é‡æ–°è®¾ç½®æŸäº›å±æ€§çš„å€¼ï¼Œå¿…é¡»åœ¨è°ƒç”¨æŒ‡å®šæ„é€ æ–¹æ³•ä¹‹åè®¾ç½®ï¼Œå¦åˆ™ä¼šè¢«è¦†ç›–ã€‚ æ£€æŸ¥4ï¼šåœ¨å®Œæˆçˆ¶ç±»æ„é€ æ–¹æ³•ä¹‹å‰ï¼Œä¸èƒ½ä½¿ç”¨selfæ¥å¼•ç”¨å±æ€§ã€‚ å…­ã€æ„é€ æ–¹æ³•çš„ç»§æ‰¿Swiftå’ŒObjective-Cæœ‰å¾ˆå¤§ä¸åŒï¼Œå…¶æ„é€ æ–¹æ³•ä¸ä¼šè¢«å­ç±»æ— æ¡ä»¶çš„ç»§æ‰¿ã€‚Swiftä¸­ç±»çš„æ„é€ æ–¹æ³•çš„ç»§æ‰¿éµå®ˆä¸‹é¢ä¸¤ä¸ªåŸåˆ™ï¼š 1.å¦‚æœå­ç±»æ²¡æœ‰å®šä¹‰ä»»ä½•çš„æŒ‡å®šæ„é€ æ–¹æ³•ï¼Œåˆ™å­ç±»ä¼šé»˜è®¤ç»§æ‰¿çˆ¶ç±»æ‰€æœ‰çš„æŒ‡å®šæ„é€ æ–¹æ³•ã€‚ 2.å¦‚æœå­ç±»ä¸­æä¾›äº†çˆ¶ç±»æ‰€æœ‰æŒ‡å®šæ„é€ æ–¹æ³•ï¼Œæ— è®ºæ˜¯è¦†å†™çš„è¿˜æ˜¯ç»§æ‰¿çš„ï¼Œåˆ™å­ç±»ä¼šé»˜è®¤ç»§æ‰¿ä¸‹æ¥çˆ¶ç±»çš„ä¾¿åˆ©æ„é€ æ–¹æ³•ã€‚ ä¸Šé¢ä¸¤ä¸ªåŸåˆ™å¯èƒ½æœ‰äº›éš¾ä»¥ç†è§£ï¼Œç¬¬1ä¸ªåŸåˆ™å®é™…ä¸Šä¹Ÿè¯´æ˜å­ç±»å¦‚æœå®šä¹‰äº†è‡ªå·±çš„æŒ‡å®šæ„é€ æ–¹æ³•ï¼Œæˆ–è€…è¦†å†™äº†çˆ¶ç±»çš„æŸä¸ªæŒ‡å®šæ„é€ æ–¹æ³•ï¼Œåˆ™å­ç±»ä¸å†ç»§æ‰¿çˆ¶ç±»æ‰€æœ‰çš„æŒ‡å®šæ„é€ æ–¹æ³•ã€‚ç¬¬2ä¸ªåŸåˆ™å¯ä»¥è¿™æ ·ç†è§£ï¼šå› ä¸ºæ‰€æœ‰ä¾¿åˆ©æ„é€ æ–¹æ³•æœ€ç»ˆéƒ½è¦è°ƒç”¨åˆ°æŒ‡å®šæ„é€ æ–¹æ³•ï¼Œæ‰€ä»¥åªè¦å­ç±»ä¸­æœ‰æä¾›è¿™ä¸ªä¾¿åˆ©æ„é€ æ–¹æ³•éœ€è¦è°ƒç”¨çš„æŒ‡å®šæ„é€ æ–¹æ³•ï¼Œè¿™ä¸ªä¾¿åˆ©æ„é€ æ–¹æ³•å°±ä¼šè¢«ç»§æ‰¿ã€‚ é‡å†™çˆ¶ç±»çš„æŒ‡å®šæ„é€ æ–¹æ³•éœ€è¦ä½¿ç”¨overrideå…³é”®å­—ï¼Œä½†æ˜¯ï¼Œä¾¿åˆ©æ„é€ æ–¹æ³•å¹¶ä¸å­˜åœ¨é‡å†™çš„æ¦‚å¿µï¼Œå› ä¸ºå…¶å¿…é¡»è°ƒç”¨æœ¬ç±»çš„å…¶ä»–æ„é€ æ–¹æ³•ï¼Œå› æ­¤æ— è®ºå­ç±»ä¸­å®šä¹‰çš„ä¾¿åˆ©æ„é€ æ–¹æ³•ä¸çˆ¶ç±»æ˜¯å¦ç›¸åŒï¼Œéƒ½æ˜¯å­ç±»ç‹¬ç«‹çš„ä¾¿åˆ©æ„é€ æ–¹æ³•ã€‚ ä¸ƒã€å¯å¤±è´¥æ„é€ æ–¹æ³•åœ¨å¼€å‘ä¸­è¿˜ä¼šé‡åˆ°ä¸€ç§æƒ…å†µï¼ŒæŸäº›æ„é€ æ–¹æ³•éœ€è¦ä¼ å…¥ä¸€äº›å‚æ•°ï¼Œå½“å‚æ•°ä¸ç¬¦åˆè¦æ±‚æ—¶ï¼Œæ­¤æ„é€ è¿‡ç¨‹å¯èƒ½ä¼šå¤±è´¥ï¼Œè¿™æ—¶ï¼Œå¼€å‘è€…å¯ä»¥ä½¿ç”¨å¯å¤±è´¥çš„æ„é€ æ–¹æ³•æ¥è¿›è¡Œç±»å‹çš„æ„é€ ï¼Œä¾‹å¦‚åœ¨ç±»ä¸­åˆ›å»ºå¯å¤±è´¥çš„æ„é€ æ–¹æ³•ç¤ºä¾‹ç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516class MyClassThree: MyClassTwo &#123; var param:Int init()&#123; param = 100 super.init(name: \"HS\") //é‡è®¾ç»§æ‰¿çˆ¶ç±»å±æ€§çš„nameå€¼ self.name = \"New\" &#125; init?(suc:Bool)&#123; guard(suc)else&#123; return nil &#125; param=1 super.init(name: \"1\") &#125;&#125; å…«ã€å¿…è¦æ„é€ æ–¹æ³•å¦‚æœæŸäº›æ„é€ æ–¹æ³•æ˜¯ç±»ä¸å…¶å­ç±»éƒ½å¿…é¡»å®ç°çš„ï¼Œåˆ™å¯ä»¥ä½¿ç”¨requiredå…³é”®å­—æ¥å°†å…¶ä¿®é¥°ä¸ºå¿…è¦çš„æ„é€ æ–¹æ³•ï¼Œå­ç±»å¿…é¡»ç»§æ‰¿æˆ–è€…è¦†å†™çˆ¶ç±»çš„å¿…è¦æ„é€ æ–¹æ³•ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516class MyClassThree: MyClassTwo &#123; var param:Int required init()&#123; param = 100 super.init(name: \"HS\") //é‡è®¾ç»§æ‰¿çˆ¶ç±»å±æ€§çš„nameå€¼ self.name = \"New\" &#125; init?(suc:Bool)&#123; guard(suc)else&#123; return nil &#125; param=1 super.init(name: \"1\") &#125;&#125; è¿˜æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œå¦‚æœæŸäº›å±æ€§çš„å€¼è®¾ç½®ååˆ†å¤æ‚ï¼Œå¼€å‘è€…å¯ä»¥ä½¿ç”¨é—­åŒ…çš„æ–¹å¼æ¥ä¸ºå±æ€§è®¾ç½®åˆå§‹å€¼ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516171819class MyClassThree: MyClassTwo &#123; //æ³¨æ„ é—­åŒ…çš„åé¢å¿…é¡»åŠ ()ï¼Œå¦åˆ™ä¼šå°†paramå½“æˆä¸€ä¸ªé—­åŒ…å±æ€§æ¥å¤„ç† var param:Int = &#123; return 6*6+6 &#125;() required init()&#123; param = 100 super.init(name: \"HS\") //é‡è®¾ç»§æ‰¿çˆ¶ç±»å±æ€§çš„nameå€¼ self.name = \"New\" &#125; init?(suc:Bool)&#123; guard(suc)else&#123; return nil &#125; param=1 super.init(name: \"1\") &#125;&#125; ä¹ã€ææ„æ–¹æ³•å½“ç±»å®ä¾‹å°†è¦è¢«é‡Šæ”¾æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨ç±»çš„ææ„æ–¹æ³•ï¼Œææ„æ–¹æ³•deinit()æ²¡æœ‰å‚æ•°å’Œè¿”å›å€¼ï¼Œå¹¶ä¸”åªæœ‰ç±»æœ‰ææ„æ–¹æ³•ï¼Œå¼€å‘è€…å¯ä»¥åœ¨å…¶ä¸­è¿›è¡Œä¸€äº›èµ„æºçš„é‡Šæ”¾æ“ä½œï¼Œå½“varç±»å‹å˜é‡è¢«èµ‹å€¼ä¸ºnilæ—¶ï¼Œå®ä¾‹ä¼šè¢«é‡Šæ”¾ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}],"tags":[],"keywords":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}]},{"title":"Swiftä¸“é¢˜è®²è§£åå…­â€”â€”ARCåœ¨Swiftä¸­çš„åº”ç”¨","slug":"216Swiftä¸“é¢˜è®²è§£åå…­â€”â€”ARCåœ¨Swiftä¸­çš„åº”ç”¨","date":"2016-05-18T16:00:00.000Z","updated":"2021-07-08T09:45:15.374Z","comments":true,"path":"2016/05/19/216Swiftä¸“é¢˜è®²è§£åå…­â€”â€”ARCåœ¨Swiftä¸­çš„åº”ç”¨/","link":"","permalink":"http://huishao.cc/2016/05/19/216Swiftä¸“é¢˜è®²è§£åå…­â€”â€”ARCåœ¨Swiftä¸­çš„åº”ç”¨/","excerpt":"","text":"Swiftä¸“é¢˜è®²è§£åå…­â€”â€”ARCåœ¨Swiftä¸­çš„åº”ç”¨ä¸€ã€å¼•è¨€ARCï¼ˆè‡ªåŠ¨å¼•ç”¨è®¡æ•°ï¼‰æ˜¯Objective-Cå’ŒSwiftä¸­ç”¨äºè§£å†³å†…å­˜ç®¡ç†é—®é¢˜çš„æ–¹æ¡ˆã€‚åœ¨å­¦ä¹ Objective-Cç¼–ç¨‹æ—¶ç»å¸¸ä¼šå­¦ä¹ åˆ°ä¸€ä¸ªå…³äºARCçš„ä¾‹å­ï¼šåœ¨ä¸€ä¸ªå…¬ç”¨çš„å›¾ä¹¦é¦†ä¸­ï¼Œæ¯æ¬¡è¿›å…¥ä¸€äººå°±å°†å¡æ’å…¥ï¼Œèµ°çš„æ—¶å€™å°†è‡ªå·±çš„å¡æ‹”å‡ºæ‹¿èµ°ã€‚å›¾ä¹¦é¦†ç³»ç»Ÿä¼šåˆ¤å®šåªè¦æœ‰å¡æ’å…¥ï¼Œå°±å°†å›¾ä¹¦é¦†çš„ç¯æ‰“å¼€ï¼Œå½“æ‰€æœ‰å¡éƒ½è¢«å–èµ°åï¼Œå°†å›¾ä¹¦é¦†çš„ç¯å…³æ‰ã€‚è¿™ä¸ªä¾‹å­å¯¹åº”äºObjective-Cä¸­çš„å¯¹è±¡å£°æ˜å‘¨æœŸç®¡ç†ååˆ†è´´åˆ‡ã€‚æ¯å½“ä¸€ä¸ªå¯¹è±¡å¢åŠ ä¸€ä¸ªå¼•ç”¨æ—¶ï¼Œå…¶å¼•ç”¨è®¡æ•°ä¼šåŠ 1ï¼Œå½“ä¸€ä¸ªå¼•ç”¨è¢«å–æ¶ˆæ—¶ï¼Œå¯¹è±¡çš„å¼•ç”¨è®¡æ•°å‡1ï¼Œå½“å¼•ç”¨è®¡æ•°å‡ä¸º0æ—¶ï¼Œè¯´æ˜æ­¤å¯¹è±¡å°†ä¸å†æœ‰ä»»ä½•å¼•ç”¨ï¼Œå¯¹è±¡ä¼šè¢«é‡Šæ”¾æ‰ï¼Œè®©å‡ºå†…å­˜ã€‚Swiftä¹Ÿé‡‡ç”¨åŒæ ·çš„æ–¹å¼è¿›è¡Œå†…å­˜ç®¡ç†ã€‚ æ³¨æ„ï¼šåœ¨Swiftä¸­åªæœ‰å¼•ç”¨ç±»å‹æœ‰è‡ªåŠ¨å¼•ç”¨è®¡æ•°ï¼Œç»“æ„ä½“ã€æšä¸¾è¿™ç±»å€¼ç±»å‹æ˜¯æ²¡æœ‰å¼•ç”¨è®¡æ•°çš„ã€‚å…³äºå¼•ç”¨è®¡æ•°çš„ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456789101112class MyClass &#123; deinit&#123; print(&quot;MyClass deinit&quot;) &#125;&#125;var cls1:MyClass? = MyClass()var cls2:MyClass? = cls1var cls3:MyClass? = cls2cls2 = nilcls1 = nil//æ‰§è¡Œä¸‹é¢ä»£ç åæ‰ä¼šæ‰“å°â€œMyClass deinitâ€cls3 = nil äºŒã€å¾ªç¯å¼•ç”¨çš„å¤„ç†æ–¹æ³•åœ¨å¼€å‘ä¸­ï¼Œå¼€å‘è€…ä¸€ä¸å°å¿ƒå°±ä¼šå†™å‡ºäº§ç”Ÿå¾ªç¯å¼•ç”¨çš„ä»£ç ï¼Œåœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­å¯ä»¥çœ‹å‡ºï¼Œé™¤éå®ä¾‹çš„å¼•ç”¨å…¨éƒ¨è§£é™¤ï¼Œå¦åˆ™å®ä¾‹å°†ä¸ä¼šè°ƒç”¨ææ„æ–¹æ³•ï¼Œå†…å­˜ä¸ä¼šè¢«é‡Šæ”¾ï¼Œå¦‚æœåœ¨å†™ä»£ç æ—¶ï¼ŒAå¼•ç”¨äº†Bï¼ŒåŒæ ·Bä¹Ÿå¼•ç”¨äº†Aï¼Œé‚£ä¹ˆå®é™…ä¸Šç°åœ¨Aå’ŒBçš„å¼•ç”¨è®¡æ•°éƒ½æ˜¯2ï¼Œå°†Aå’ŒBéƒ½ç½®ä¸ºnilåï¼ŒAå’ŒBå®ä¾‹ä¾ç„¶ä¿æœ‰1ä¸ªå¼•ç”¨è®¡æ•°ï¼Œéƒ½ä¸ä¼šè¢«é‡Šæ”¾ï¼Œå®ä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516171819class MyClassOne &#123; var cls:MyClassTwo? deinit&#123; print(\"ClassOne deinit\") &#125;&#125;class MyClassTwo &#123; var cls:MyClassOne? deinit&#123; print(\"ClassTwo deinit\") &#125;&#125;var obj1:MyClassOne? = MyClassOne()var obj2:MyClassTwo? = MyClassTwo()obj1?.cls = obj2obj2?.cls = obj1obj1=nilobj2=nil//æ²¡æœ‰æ‰“å°ææ„å‡½æ•°çš„è°ƒç”¨ä¿¡æ¯ å¯¹äºä¸Šé¢çš„æƒ…å†µï¼Œå¯ä»¥å°†å±æ€§å£°æ˜ç§°weakç±»å‹æ¥é˜²æ­¢è¿™ç§å¾ªç¯å¼•ç”¨ï¼Œweakçš„ä½œç”¨åœ¨äºåªæ˜¯å¼±å¼•ç”¨å®ä¾‹ï¼ŒåŸå®ä¾‹çš„å¼•ç”¨è®¡æ•°å¹¶ä¸ä¼šåŠ 1ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314151617181920//å…³äºå¼±å¼•ç”¨çš„æ¼”ç¤ºclass MyClassThree&#123; weak var cls:MyClassFour? deinit&#123; print(\"ClassThree deinit\") &#125;&#125;class MyClassFour &#123; var cls:MyClassThree? deinit&#123; print(\"ClassFour deinit\") &#125;&#125;var obj3:MyClassThree? = MyClassThree()var obj4:MyClassFour? = MyClassFour()obj3?.cls = obj4obj4?.cls = obj3obj4=nil//æ­¤æ—¶obj3ä¸­çš„clsä¹Ÿä¸ºnilobj3?.cls è‹¥å¼•ç”¨çš„å®ä¾‹è¢«é‡Šæ”¾åï¼Œå…¶åœ¨å¦ä¸€ä¸ªå®ä¾‹ä¸­çš„å¼•ç”¨ä¹Ÿå°†è¢«ç½®ä¸ºnilï¼Œæ‰€ä»¥weakåªèƒ½ç”¨äºoptionalç±»å‹çš„å±æ€§ï¼Œç„¶è€Œåœ¨å¼€å‘ä¸­è¿˜æœ‰ä¸€ç§æƒ…å†µï¼ŒæŸä¸ªç±»å¿…é¡»ä¿æœ‰å¦ä¸€ä¸ªç±»çš„ç¤ºä¾‹ï¼Œè¿™ä¸ªå®ä¾‹ä¸èƒ½ä¸ºnilï¼Œä½†æ˜¯è¿™ä¸ªå±æ€§åˆä¸èƒ½å½±å“å…¶åŸå§‹å®ä¾‹çš„é‡Šæ”¾ï¼Œè¿™ç§æƒ…å†µä¹Ÿä¼šé€ æˆå¾ªç¯å¼•ç”¨ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415161718192021class MyClassFive&#123; var cls:MyClassSix init(param:MyClassSix)&#123; cls = param &#125; deinit&#123; print(\"ClassFive deinit\") &#125;&#125;class MyClassSix&#123; var cls:MyClassFive? deinit&#123; print(\"ClassSix deinit\") &#125;&#125;var obj6:MyClassSix? = MyClassSix()var obj5:MyClassFive? = MyClassFive(param: obj6!)obj6?.cls = obj5obj5=nilobj6=nil//æ²¡æœ‰æ‰“å°ä»»ä½•ä¿¡æ¯ ä¸Šé¢çš„ç¤ºä¾‹ä¹Ÿä¼šé€ æˆå¾ªç¯å¼•ç”¨ï¼Œç„¶è€ŒMyClassFiveç±»ä¸­çš„clså±æ€§ä¸ºå¸¸é‡ä¸å¯ä¸ºnilï¼Œä¸å¯ä½¿ç”¨weakå¼±å¼•ç”¨æ¥åšSwiftä¸­åˆæä¾›äº†ä¸€ä¸ªå…³é”®å­—unownedæ— ä¸»å¼•ç”¨æ¥å¤„ç†è¿™æ ·çš„é—®é¢˜ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314151617181920class MyClassFive&#123; unowned var cls:MyClassSix init(param:MyClassSix)&#123; cls = param &#125; deinit&#123; print(\"ClassFive deinit\") &#125;&#125;class MyClassSix&#123; var cls:MyClassFive? deinit&#123; print(\"ClassSix deinit\") &#125;&#125;var obj6:MyClassSix? = MyClassSix()var obj5:MyClassFive? = MyClassFive(param: obj6!)obj6?.cls = obj5obj5=nilobj6=nil å…³äºå¼±å¼•ç”¨å’Œæ— ä¸»å¼•ç”¨ï¼Œå…¶åŒºåˆ«ä¸»è¦æ˜¯åœ¨äºï¼š 1.å¼±å¼•ç”¨ç”¨äºè§£å†³Optionalå€¼çš„å¼•èµ·çš„å¾ªç¯å¼•ç”¨ã€‚ 2.æ— ä¸»å¼•ç”¨ç”¨äºè§£å†³éOptionalå€¼å¼•èµ·çš„å¾ªç¯å¼•ç”¨ã€‚ 3.ä¸ªäººä»¥ä¸ºï¼Œå¼±å¼•ç”¨å¯ç”¨ä¸‹å›¾è¡¨ç¤ºï¼š 4.æ— ä¸»å¼•ç”¨å¯ç”¨å¦‚ä¸‹å›¾è¡¨ç¤ºï¼š è‹¥å°†ä¸Šé¢çš„ä»£ç ä¿®æ”¹å¦‚ä¸‹ï¼Œç¨‹åºä¼šç›´æ¥å´©æºƒï¼š 1234567891011121314151617181920class MyClassFive&#123; unowned var cls:MyClassSix init(param:MyClassSix)&#123; cls = param &#125; deinit&#123; print(\"ClassFive deinit\") &#125;&#125;class MyClassSix&#123; var cls:MyClassFive? deinit&#123; print(\"ClassSix deinit\") &#125;&#125;var obj6:MyClassSix? = MyClassSix()var obj5:MyClassFive? = MyClassFive(param: obj6!)obj6?.cls = obj5obj6=nilobj5?.cls ä¸Šé¢æ‰€ä¸¾çš„ä¾‹å­æ»¡è¶³äº†ä¸¤ç§æƒ…å†µï¼Œä¸€ç§æ˜¯ä¸¤ç±»å®ä¾‹å¼•ç”¨çš„å±æ€§éƒ½æ˜¯Optionalå€¼çš„æ—¶å€™ä½¿ç”¨weakæ¥è§£å†³å¾ªç¯å¼•ç”¨ï¼Œä¸€ç§æ˜¯ä¸¤ç±»å®ä¾‹æœ‰ä¸€ä¸ªä¸ºéOptionalå€¼çš„æ—¶å€™ä½¿ç”¨unownedæ¥è§£å†³å¾ªç¯å¼•ç”¨ï¼Œç„¶è€Œè¿˜æœ‰ç¬¬ä¸‰ç§æƒ…å†µï¼Œä¸¤ç±»å®ä¾‹å¼•ç”¨çš„å±æ€§éƒ½ä¸ºéOptionalå€¼çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨æ— ä¸»å¼•ç”¨ä¸éšå¼æ‹†åŒ…ç»“åˆçš„æ–¹å¼æ¥è§£å†³ï¼Œè¿™ä¹Ÿæ˜¯æ— ä¸»å¼•ç”¨æœ€å¤§çš„åº”ç”¨ä¹‹å¤„ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314151617181920class MyClassSeven&#123; unowned var cls:MyClassEight init(param:MyClassEight)&#123; cls = param &#125; deinit&#123; print(\"ClassSeven deinit\") &#125;&#125;class MyClassEight&#123; var cls:MyClassSeven! init()&#123; cls = MyClassSeven(param:self) &#125; deinit&#123; print(\"ClassEight deinit\") &#125;&#125;var obj7:MyClassEight? = MyClassEight()obj7=nil é™¤äº†åœ¨ä¸¤ä¸ªç±»å®ä¾‹é—´ä¼šäº§ç”Ÿå¾ªç¯å¼•ç”¨ï¼Œåœ¨é—­åŒ…ä¸­ï¼Œä¹Ÿå¯èƒ½å‡ºç°å¾ªç¯å¼•ç”¨ï¼Œå½“æŸä¸ªç±»ä¸­åŒ…å«ä¸€ä¸ªé—­åŒ…å±æ€§ï¼ŒåŒæ—¶è¿™ä¸ªé—­åŒ…å±æ€§ä¸­åˆä½¿ç”¨äº†ç±»å®ä¾‹ï¼Œåˆ™ä¼šäº§ç”Ÿå¾ªç¯å¼•ç”¨ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314class MyClassNine &#123; var name:String = \"HS\" lazy var closure:()-&gt;Void = &#123; //é—­åŒ…ä¸­ä½¿ç”¨å¼•ç”¨å€¼ä¼šä½¿å¼•ç”¨+1 print(self.name) &#125; deinit&#123; print(\"ClassNine deinit\") &#125;&#125;var obj9:MyClassNine? = MyClassNine()obj9?.closure()obj9=nil//ä¸ä¼šæ‰“å°ææ„ä¿¡æ¯ Swiftä¸­æä¾›äº†é—­åŒ…çš„æ•è·åˆ—è¡¨æ¥å¯¹å¼•ç”¨ç±»å‹è¿›è¡Œå¼±å¼•ç”¨æˆ–è€…æ— ä¸»å¼•ç”¨çš„è½¬æ¢ï¼š 12345678910111213class MyClassNine &#123; var name:String = \"HS\" lazy var closure:()-&gt;Void = &#123; [unowned self]()-&gt;Void in print(self.name) &#125; deinit&#123; print(\"ClassNine deinit\") &#125;&#125;var obj9:MyClassNine? = MyClassNine()obj9?.closure()obj9=nil æ•è·åˆ—è¡¨ä»¥ä¸­æ‹¬å·æ ‡è¯†ï¼Œå¤šä¸ªæ•è·å‚æ•°åˆ™ä½¿ç”¨é€—å·åˆ†éš”ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}],"tags":[],"keywords":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}]},{"title":"Swiftä¸“é¢˜è®²è§£åå››â€”â€”ç»§æ‰¿","slug":"214Swiftä¸“é¢˜è®²è§£åå››â€”â€”ç»§æ‰¿","date":"2016-05-17T16:00:00.000Z","updated":"2021-07-08T09:43:35.492Z","comments":true,"path":"2016/05/18/214Swiftä¸“é¢˜è®²è§£åå››â€”â€”ç»§æ‰¿/","link":"","permalink":"http://huishao.cc/2016/05/18/214Swiftä¸“é¢˜è®²è§£åå››â€”â€”ç»§æ‰¿/","excerpt":"","text":"Swiftä¸“é¢˜è®²è§£åå››â€”â€”ç»§æ‰¿ä¸€ã€å¼•è¨€Swiftä¸­ï¼Œä¸€ä¸ªç±»å¯ä»¥ä»å¦ä¸€ä¸ªç±»ç»§æ‰¿æ–¹æ³•ã€å±æ€§ã€ä¸‹æ ‡åŠå…¶ä»–ç‰¹æ€§ã€‚å½“ä¸€ä¸ªç±»ç»§æ‰¿äºå¦ä¸€ä¸ªç±»æ—¶ï¼Œè¿™ä¸ªç±»è¢«ç§°ä¸ºå­ç±»ï¼Œæ‰€ç»§æ‰¿çš„ç±»è¢«ç§°ä¸ºçˆ¶ç±»ã€‚åœ¨Swiftä¸­ï¼Œç»§æ‰¿æ˜¯ç±»åŒºåˆ«äºå…¶ä»–ç±»å‹çš„ä¸»è¦ç‰¹å¾ã€‚å­ç±»é™¤äº†å¯ä»¥è°ƒç”¨çˆ¶ç±»çš„å±æ€§ï¼Œä¸‹æ ‡ï¼Œæ–¹æ³•å¤–ï¼Œå…¶ä¹Ÿå¯ä»¥å¯¹çˆ¶ç±»çš„å±æ€§ï¼Œä¸‹æ ‡ï¼Œæ–¹æ³•è¿›è¡Œè¦†å†™ã€‚ äºŒã€å®šä¹‰ä¸€ä¸ªåŸºç±»ä¸ç»§æ‰¿äºä»»ä½•ç±»çš„ç±»è¢«ç§°ä¸ºåŸºç±»ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456class Shape &#123; var center:(Double,Double) init()&#123; center = (0,0) &#125;&#125; ä¸Šé¢ä»£ç å®šä¹‰äº†ä¸€ä¸ªå›¾å½¢ç±»ï¼Œå…¶ä¸­å®šä¹‰äº†ä¸€ä¸ªä¸­å¿ƒç‚¹ï¼Œä»»ä½•å›¾å½¢éƒ½ä¼šæœ‰ä¸­å¿ƒç‚¹ï¼Œæ‰€ä»¥æŠŠå…¶ä½œä¸ºåŸºç±»å±æ€§ã€‚ ä¸‰ã€å®šä¹‰ä¸€ä¸ªå­ç±»å›¾å½¢åŸºç±»å¯ä»¥æ´¾ç”Ÿå‡ºè®¸å¤šå›¾å½¢å­ç±»ï¼Œä¾‹å¦‚çŸ©å½¢ï¼Œåœ†å½¢ç­‰ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345678class Circle: Shape &#123; var Radio:Double = 0&#125;class Rect: Shape &#123; var size:(Double,Double)=(0,0)&#125;var circle = Circle()circle.center = (1,1) å¯ä»¥çœ‹åˆ°ï¼ŒCircleç±»ä»çˆ¶ç±»ä¸­ç»§æ‰¿åˆ°äº†centerå±æ€§ã€‚é»˜è®¤å­ç±»ä¹Ÿä¼šç»§æ‰¿çˆ¶ç±»çš„æ„é€ æ–¹æ³•ï¼Œå¦‚æœå­ç±»éœ€è¦å®ç°è‡ªå·±çš„æ„é€ æ–¹æ³•ï¼Œå¯ä»¥å¯¹çˆ¶ç±»çš„æ–¹æ³•è¿›è¡Œè¦†å†™ï¼Œä½¿ç”¨overrideå…³é”®å­—ï¼š 1234567class Rect: Shape &#123; var size:(Double,Double)=(0,0) override init()&#123; super.init() super.center = (1,1) &#125;&#125; é€šè¿‡superå…³é”®å­—å¯ä»¥è°ƒç”¨çˆ¶ç±»çš„å±æ€§å’Œæ–¹æ³•ï¼ŒåŒæ ·ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨overrideå…³é”®å­—æ¥å¯¹å±æ€§è¿›è¡Œgetå’Œsetçš„è¦†å†™ã€‚åŒæ ·ä¹Ÿå¯ä»¥é‡å†™å±æ€§çš„è§‚å¯ŸæœŸwillsetå’Œdidsetã€‚ å››ã€finalå…³é”®å­—åœ¨å¼€å‘ä¸­å¾ˆå¤šæƒ…å†µä¸‹ä¸ºäº†å®‰å…¨è€ƒè™‘ï¼Œæœ‰äº›æ–¹æ³•å’Œå±æ€§æ˜¯ä¸å…è®¸å­ç±»è¿›è¡Œè¦†å†™çš„ï¼Œä½¿ç”¨finalå£°æ˜è¿™äº›å±æ€§ï¼Œæ–¹æ³•æˆ–è€…ä¸‹æ ‡å¯ä»¥èµ·åˆ°è¿™æ ·çš„ä½œç”¨ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š 123456class Shape &#123; final var center:(Double,Double) init()&#123; center = (0,0) &#125;&#125; å¦‚æœæƒ³å°†æŸä¸ªç±»è®¾ç½®ä¸ºä¸å¯ç»§æ‰¿çš„ï¼Œå¯ä»¥å°†æ­¤ç±»ä½¿ç”¨finalå…³é”®å­—ä¿®é¥°ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456final class Shape &#123; final var center:(Double,Double) init()&#123; center = (0,0) &#125;&#125; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}],"tags":[],"keywords":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}]},{"title":"Swiftè®²è§£ä¸“é¢˜åäºŒâ€”â€”æ–¹æ³•","slug":"212Swiftè®²è§£ä¸“é¢˜åäºŒâ€”â€”æ–¹æ³•","date":"2016-05-16T16:00:00.000Z","updated":"2021-07-08T09:42:14.711Z","comments":true,"path":"2016/05/17/212Swiftè®²è§£ä¸“é¢˜åäºŒâ€”â€”æ–¹æ³•/","link":"","permalink":"http://huishao.cc/2016/05/17/212Swiftè®²è§£ä¸“é¢˜åäºŒâ€”â€”æ–¹æ³•/","excerpt":"","text":"Swiftè®²è§£ä¸“é¢˜åäºŒâ€”â€”æ–¹æ³•ä¸€ã€å¼•è¨€æ–¹æ³•åªæ˜¯ä¸€ä¸ªæœ¯è¯­ï¼Œå…¶å®å°±æ˜¯å°†å‡½æ•°ä¸ç‰¹å®šçš„ç±»å‹ç»“åˆï¼Œç±»ã€ç»“æ„ä½“ã€æšä¸¾éƒ½å¯ä»¥å®šä¹‰æ–¹æ³•ï¼Œæ–¹æ³•åˆåˆ†ä¸ºå®ä¾‹æ–¹æ³•å’Œç±»å‹æ–¹æ³•ï¼Œç±»å‹æ–¹æ³•ç±»ä¼¼äºObjective-Cä¸­çš„ç±»æ–¹æ³•ã€‚Swiftå’ŒObjective-Cçš„ä¸€å¤§ä¸åŒæ˜¯ï¼ŒObjective-Cåªæœ‰åœ¨ç±»ä¸­å¯ä»¥å®šä¹‰æ–¹æ³•ã€‚ äºŒã€å®ä¾‹æ–¹æ³•åŸºç¡€å®ä¾‹æ–¹æ³•çš„è¯­æ³•å’Œå‡½æ•°å®Œå…¨ä¸€è‡´ï¼Œå…¶å’Œå…·ä½“ç±»å‹çš„å®ä¾‹æ‰€å…³è”ï¼Œå®ä¾‹æ–¹æ³•åœ¨è°ƒç”¨æ—¶ç”±ç±»å‹çš„å®ä¾‹ç‚¹è¯­æ³•è¿›è¡Œè°ƒç”¨æ¥å®Œæˆä¸€äº›åŠŸèƒ½æ¨¡å—ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910class Math &#123; //å®ŒæˆåŠ æ³•åŠŸèƒ½çš„å®ä¾‹æ–¹æ³• func add(param1:Double,param2:Double)-&gt;Double&#123; return param1+param2 &#125;&#125;//åˆ›å»ºç±»å‹å®ä¾‹var obj = Math()//è°ƒç”¨æ–¹æ³•è¿›è¡Œè®¡ç®—obj.add(5, param2: 5) ä¸Objective-Cç±»ä¼¼ï¼ŒSwiftä¸­æ¯ä¸€ä¸ªç±»çš„å®ä¾‹ä¸­éƒ½éšè—å«æœ‰ä¸€ä¸ªselfå±æ€§ï¼Œselfå±æ€§å°±æ˜¯å®ä¾‹æœ¬èº«ï¼Œå¼€å‘è€…å¯ä»¥åœ¨å®ä¾‹æ–¹æ³•ä¸­ä½¿ç”¨selfæ¥è°ƒç”¨å±æ€§æˆ–è€…å…¶ä»–å®ä¾‹æ–¹æ³•ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011class Math &#123; //å®ŒæˆåŠ æ³•åŠŸèƒ½çš„å®ä¾‹æ–¹æ³• func add(param1:Double,param2:Double)-&gt;Double&#123; return param1+param2 &#125; func mul(param1:Double,param2:Double) -&gt; Double &#123; //ä½¿ç”¨selfè°ƒç”¨å®ä¾‹æ–¹æ³• self.add(param1, param2: param2) return param1*param2 &#125;&#125; ç„¶è€Œï¼ŒSwiftå¹¶ä¸è¦æ±‚å¼€å‘è€…å¿…é¡»å†™selfï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå¼€å‘è€…å¯ä»¥ç›´æ¥çœç•¥selfæ¥è°ƒç”¨å±æ€§å’Œæ–¹æ³•ï¼š 1234567891011class Math &#123; //å®ŒæˆåŠ æ³•åŠŸèƒ½çš„å®ä¾‹æ–¹æ³• func add(param1:Double,param2:Double)-&gt;Double&#123; return param1+param2 &#125; func mul(param1:Double,param2:Double) -&gt; Double &#123; //ä½¿ç”¨selfè°ƒç”¨å®ä¾‹æ–¹æ³• add(param1, param2: param2) return param1*param2 &#125;&#125; æœ‰ä¸€ç§æƒ…å†µéœ€è¦æ³¨æ„ï¼Œå¯¹äºå±æ€§çš„è°ƒç”¨ï¼Œå¦‚æœæ–¹æ³•ä¸­çš„å‚æ•°åå’Œç±»å®ä¾‹çš„å±æ€§åç›¸åŒï¼Œåˆ™å¿…é¡»ä½¿ç”¨selfæ¥è°ƒç”¨ç±»çš„å®ä¾‹å±æ€§ï¼Œé˜²æ­¢æ­§ä¹‰çš„äº§ç”Ÿï¼š 12345678910111213class Math &#123; var param1 = 10.0 //å®ŒæˆåŠ æ³•åŠŸèƒ½çš„å®ä¾‹æ–¹æ³• func add(param1:Double,param2:Double)-&gt;Double&#123; //è¿™é‡Œå°†ä½¿ç”¨param1=10ï¼Œå¦‚æœä¸åŠ self å°†ä½¿ç”¨å‚æ•°ä¸­çš„param1 return self.param1+param2 &#125; func mul(param1:Double,param2:Double) -&gt; Double &#123; //ä½¿ç”¨selfè°ƒç”¨å®ä¾‹æ–¹æ³• add(param1, param2: param2) return param1*param2 &#125;&#125; ä¸‰ã€åœ¨å®ä¾‹æ–¹æ³•ä¸­ä¿®æ”¹å€¼ç±»å‹çš„å€¼é¦–å…ˆéœ€è¦æ¸…æ¥šä¸€ä¸ªæ¦‚å¿µï¼ŒSwiftä¸­æœ‰ä¸¤ç§ç±»å‹ï¼Œå€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹ï¼Œå…·ä½“åœ¨ç±»ã€ç»“æ„ä½“ã€æšä¸¾ä¸€èŠ‚ä¸­æœ‰ç›¸å…³ä»‹ç»ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¯¹äºå€¼ç±»å‹ï¼Œå³ç»“æ„ä½“å’Œæšä¸¾ï¼Œå…¶å¹¶ä¸èƒ½ç›´æ¥åœ¨å®ä¾‹æ–¹æ³•ä¸­ä¿®æ”¹å®ä¾‹å±æ€§çš„å€¼ï¼ŒSwiftä¸­æä¾›äº†å¦ä¸€ç§æ–¹å¼ï¼Œå¦‚æœçœŸæœ‰å¦‚æ­¤çš„éœ€æ±‚ï¼Œå¼€å‘è€…å¯ä»¥ä½¿ç”¨mutatingå…³é”®å­—å°†å®ä¾‹æ–¹æ³•å£°æ˜æˆå¯å˜çš„ï¼Œå®é™…ä¸Šï¼Œå¦‚æœåœ¨å¯å˜çš„å®ä¾‹æ–¹æ³•ä¸­ä¿®æ”¹äº†å€¼ç±»å‹å±æ€§çš„å€¼ï¼Œæ˜¯ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹æ¥ä»£æ›¿åŸæ¥çš„å®ä¾‹çš„ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112struct Point &#123; var x:Double var y:Double mutating func move(x:Double,y:Double) &#123; self.x+=x self.y+=y &#125;&#125;var point = Point(x: 1, y: 1)print(point)point.move(3, y: 3)print(point) åœ¨å€¼ç±»å‹å®ä¾‹çš„å¯å˜æ–¹æ³•ä¸­ä¿®æ”¹å±æ€§çš„å€¼ï¼Œå®é™…ä¸Šå°±æ˜¯åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å®ä¾‹ï¼Œä¸Šé¢çš„å†™æ³•å’Œä¸‹é¢çš„å†™æ³•åŸç†æ˜¯ä¸€æ ·çš„ï¼š 1234567struct Point &#123; var x:Double var y:Double mutating func move(x:Double,y:Double) &#123; self = Point(x: self.x+x,y: self.y+y) &#125;&#125; å››ã€ç±»å‹æ–¹æ³•æ­£å¦‚å®ä¾‹æ–¹æ³•æ˜¯é€šè¿‡ç±»å‹çš„å®ä¾‹æ¥è¿›è¡Œè°ƒç”¨çš„ï¼Œç±»å‹æ–¹æ³•æ˜¯é€šè¿‡ç±»å‹ç›´æ¥æ¥è°ƒç”¨çš„ï¼Œç›¸æ¯”äºå®ä¾‹æ–¹æ³•ï¼Œç±»å‹æ–¹æ³•ä¸­çš„selfæŒ‡å½“å‰ç±»å‹ï¼ŒåŒæ ·å¼€å‘è€…å¯ä»¥ä½¿ç”¨selfæ¥åŒºåˆ«ç±»å‹å±æ€§å’Œç±»å‹æ–¹æ³•ä¸­çš„å‚æ•°ã€‚ä½¿ç”¨Staticå…³é”®å­—æ¥è¿›è¡Œç±»å‹æ–¹æ³•çš„åˆ›å»ºï¼š 1234567891011struct Point &#123; var x:Double var y:Double mutating func move(x:Double,y:Double) &#123; self = Point(x: self.x+x,y: self.y+y) &#125; static func name()&#123; print(&quot;Point&quot;) &#125;&#125;Point.name() å¦‚æœæ˜¯åœ¨ç±»ä¸­åˆ›å»ºç±»å‹æ–¹æ³•ï¼Œè‹¥æ­¤æ–¹æ³•å¯ä»¥è¢«å­ç±»è¿›è¡Œé‡å†™ï¼Œåˆ™åº”è¯¥ä½¿ç”¨classå…³é”®å­—æ¥åˆ›å»ºï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314151617class Math &#123; var param1 = 10.0 //å®ŒæˆåŠ æ³•åŠŸèƒ½çš„å®ä¾‹æ–¹æ³• func add(param1:Double,param2:Double)-&gt;Double&#123; //è¿™é‡Œå°†ä½¿ç”¨param1=10ï¼Œå¦‚æœä¸åŠ self å°†ä½¿ç”¨å‚æ•°ä¸­çš„param1 return self.param1+param2 &#125; func mul(param1:Double,param2:Double) -&gt; Double &#123; //ä½¿ç”¨selfè°ƒç”¨å®ä¾‹æ–¹æ³• add(param1, param2: param2) return param1*param2 &#125; class func name()&#123; print(&quot;Math&quot;) &#125;&#125;Math.name() ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}],"tags":[],"keywords":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}]},{"title":"Swiftè®²è§£ä¸“é¢˜åä¸‰â€”â€”ä¸‹æ ‡è®¿é—®","slug":"213Swiftè®²è§£ä¸“é¢˜åä¸‰â€”â€”ä¸‹æ ‡è®¿é—®","date":"2016-05-16T16:00:00.000Z","updated":"2021-07-08T09:42:52.248Z","comments":true,"path":"2016/05/17/213Swiftè®²è§£ä¸“é¢˜åä¸‰â€”â€”ä¸‹æ ‡è®¿é—®/","link":"","permalink":"http://huishao.cc/2016/05/17/213Swiftè®²è§£ä¸“é¢˜åä¸‰â€”â€”ä¸‹æ ‡è®¿é—®/","excerpt":"","text":"Swiftè®²è§£ä¸“é¢˜åä¸‰â€”â€”ä¸‹æ ‡è®¿é—®ä¸€ã€å¼•è¨€åœ¨ä»¥å‰çš„åšå®¢ä¸­ï¼Œè®¨è®ºè¿‡åœ¨Objective-Cä¸­ï¼Œé€šè¿‡ä¸‹æ ‡çš„æ–¹å¼è®¿é—®è‡ªå®šä¹‰æ•°æ®æ¨¡å‹çš„æ–¹æ³•ã€‚Objective-Cä¸­ä¸»è¦æ˜¯é€šè¿‡å®ç°ä¸€ç³»åˆ—æ–¹æ³•æ¥ä½¿è‡ªå®šä¹‰çš„æ•°æ®ç±»å‹æ”¯æŒä¸‹æ ‡çš„è®¿é—®æ–¹å¼ï¼Œåšå®¢åœ°å€å¦‚ä¸‹ï¼š åœ¨Objective-Cä¸­ä½¿ç”¨ä¸‹æ ‡è®¿é—®è‡ªå®šä¹‰æ•°æ®æ¨¡å‹ï¼šhttp://my.oschina.net/u/2340880/blog/632294ã€‚ Swiftä¸­çš„Arrayï¼ŒDictionaryç±»å‹å¯ä»¥é€šè¿‡ä¸‹æ ‡æˆ–è€…é”®å€¼çš„æ–¹å¼æ¥è¿›è¡Œæ•°æ®çš„è®¿é—®ï¼Œå®é™…ä¸Šåœ¨Swiftçš„è¯­æ³•ä¸­ï¼Œä¸‹æ ‡å¯ä»¥å®šä¹‰åœ¨ç±»ã€ç»“æ„ä½“ã€æšä¸¾ä¸­ã€‚å¼€å‘è€…å¯ä»¥é€šè¿‡ä¸‹æ ‡çš„æ–¹å¼æ¥å¯¹å±æ€§è¿›è¡Œè®¿é—®è€Œä¸ç”¨ä½¿ç”¨ä¸“é—¨çš„å­˜å–æ–¹æ³•ã€‚å¹¶ä¸”å®šä¹‰çš„ä¸‹æ ‡ä¸é™äºä¸€ç»´ï¼Œå¼€å‘è€…å¯ä»¥å®šä¹‰å¤šç»´çš„ä¸‹æ ‡æ¥æ»¡è¶³éœ€æ±‚ã€‚ äºŒã€ä¸‹æ ‡çš„è¯­æ³•ç»“æ„ä¸‹æ ‡ä½¿ç”¨subscriptæ¥å®šä¹‰ï¼Œå…¶æœ‰äº›ç±»ä¼¼äºæ–¹æ³•ï¼Œå‚æ•°å’Œè¿”å›å€¼åˆ†åˆ«ä½œä¸ºä¸‹æ ‡å…¥å‚å’Œé€šè¿‡ä¸‹æ ‡æ‰€å–çš„å€¼ã€‚ä½†æ˜¯åœ¨subscriptå®ç°éƒ¨åˆ†ï¼Œåˆååˆ†ç±»ä¼¼äºè®¡ç®—å±æ€§ï¼Œå…¶éœ€è¦å®ç°ä¸€ä¸ªgetå—å’Œå¯é€‰å®ç°ä¸€ä¸ªsetå—ï¼Œgetå—ç”¨äºä½¿ç”¨ä¸‹æ ‡å–å€¼ï¼Œsetå—ç”¨äºä½¿ç”¨ä¸‹æ ‡è®¾ç½®å€¼ï¼Œå› æ­¤ï¼Œsubscriptç»“æ„æ›´åƒæ˜¯è®¡ç®—å±æ€§å’Œæ–¹æ³•çš„æ··åˆä½“ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213class MyClass &#123; var array=[1,1,1,1,1] subscript(param1:Int)-&gt;Int&#123; set&#123; array[param1] = newValue &#125; get&#123; return array[param1] &#125; &#125;&#125;var obj = MyClass()obj[0] = 3 å¼€å‘è€…å¯ä»¥åªç¼–å†™getå—æ¥å®ç°åªè¯»çš„ä¸‹æ ‡è®¿é—®ã€‚å¯¹äºå¤šç»´ä¸‹æ ‡çš„è®¿é—®æ–¹å¼ï¼Œåªéœ€ä¿®æ”¹subscriptä¸­çš„å‚æ•°ä¸ªæ•°å³å¯ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213class MyClass &#123; var array=[1,1,1,1,1] subscript(param1:Int,param2:Int)-&gt;Int&#123; set&#123; array[param1] = newValue &#125; get&#123; return array[param1] &#125; &#125;&#125;var obj = MyClass()obj[0,1] = 3 ä¸‰ã€ä¸‹æ ‡çš„ç‰¹æ€§Swiftä¸­çš„ä¸‹æ ‡å¯ä»¥è‡ªå®šå‚æ•°ä¸ªæ•°å’Œå‚æ•°ç±»å‹ï¼Œè¿”å›æ•°æ®çš„ç±»å‹å¼€å‘è€…ä¹Ÿå¯ä»¥è¿›è¡Œè‡ªå®šä¹‰ã€‚ä½†æ˜¯æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œä¸‹æ ‡çš„å‚æ•°ä¸èƒ½è®¾ç½®é»˜è®¤å€¼ï¼Œä¹Ÿä¸èƒ½è®¾ç½®ä¸ºin-outç±»å‹ã€‚å¤šç»´ä¸‹æ ‡å¸¸ç”¨è¯­è¡Œåˆ—æ•°æ®çš„è®¿é—®ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314151617class SectionAndRow &#123; var array:Array&lt;Array&lt;Int&gt;&gt; = [ [1,2] ,[3,4] ,[5,6] ,[7,8] ] subscript(section:Int,row:Int)-&gt;Int&#123; get&#123; let temp = array[section] return temp[row] &#125; &#125; &#125;var data = SectionAndRow()//é€šè¿‡äºŒç»´ä¸‹æ ‡å–å€¼data[1,1] ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}],"tags":[],"keywords":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}]},{"title":"Swiftè®²è§£ä¸“é¢˜åâ€”â€”ç±»ä¸ç»“æ„ä½“","slug":"210Swiftè®²è§£ä¸“é¢˜åâ€”â€”ç±»ä¸ç»“æ„ä½“","date":"2016-05-15T16:00:00.000Z","updated":"2021-07-08T09:40:37.024Z","comments":true,"path":"2016/05/16/210Swiftè®²è§£ä¸“é¢˜åâ€”â€”ç±»ä¸ç»“æ„ä½“/","link":"","permalink":"http://huishao.cc/2016/05/16/210Swiftè®²è§£ä¸“é¢˜åâ€”â€”ç±»ä¸ç»“æ„ä½“/","excerpt":"","text":"Swiftè®²è§£ä¸“é¢˜åâ€”â€”ç±»ä¸ç»“æ„ä½“ä¸€ã€å¼•è¨€Swiftä¸­çš„ç±»ä¸ç»“æ„ä½“ååˆ†ç›¸ä¼¼ï¼Œå’ŒObjective-Cä¸åŒçš„æ˜¯ï¼ŒSwiftä¸­çš„ç»“æ„ä½“ä¸ä»…å¯ä»¥å®šä¹‰å±æ€§ï¼Œä¹Ÿå¯ä»¥åƒç±»ä¸€æ ·ä¸ºå…¶å®šä¹‰æ–¹æ³•ã€‚ Swiftä¸­çš„ç±»ä¸ç»“æ„ä½“æœ‰å¦‚ä¸‹ç›¸ä¼¼ç‚¹ï¼š 1.å®šä¹‰å±æ€§æ¥å­˜å‚¨å€¼ã€‚ 2.å®šä¹‰å‡½æ•°æ¥æä¾›åŠŸèƒ½ã€‚ 3.é€šè¿‡å®šä¹‰ä¸‹æ ‡è¯­æ³•ä½¿ç”¨ä¸‹æ ‡çš„æ–¹å¼å–å€¼ã€‚ 4.å®šä¹‰æ„é€ æ–¹æ³•æ¥å¯¹å…¶è¿›è¡Œåˆå§‹åŒ–ã€‚ 5.é€šè¿‡æ‰©å±•æ¥åœ¨åŸå§‹åŸºç¡€ä¸Šæ·»åŠ åŠŸèƒ½ã€‚ 6.é€šè¿‡åè®®æ¥å®šä¹‰å®ç°æ ‡å‡†ã€‚ å½“ç„¶ç±»å’Œç»“æ„ä½“ä¹Ÿæœ‰è®¸å¤šä¸åŒç‚¹ï¼Œä¸‹é¢è¿™äº›åŠŸèƒ½æ˜¯ç±»ç‹¬æœ‰çš„ï¼Œç»“æ„ä½“æ²¡æœ‰ï¼š 1.é€šè¿‡ç»§æ‰¿æ¥åˆ›å»ºç±»çš„å­ç±»ã€‚ 2.åœ¨è¿è¡Œæ—¶å…è®¸å¯¹ç±»çš„å®ä¾‹è¿›è¡Œç±»å‹çš„æ£€æŸ¥å’Œè§£é‡Šã€‚ 3.ææ„æ–¹æ³•å¯ä»¥é‡Šæ”¾è¢«ç±»å¼•ç”¨çš„èµ„æºã€‚ 4.é€šè¿‡å¼•ç”¨è®¡æ•°å…è®¸ä¸€ä¸ªç±»å®ä¾‹çš„å¤šå¤„å¼•ç”¨ã€‚ å½“å¼€å‘è€…åœ¨ä»£ç ä¸­ä¼ é€’è¿™äº›å®ä¾‹æ—¶ï¼Œç»“æ„ä½“æ€»æ˜¯è¢«å¤åˆ¶ï¼Œè€Œç±»åˆ™æ˜¯è¢«å¼•ç”¨ã€‚è¿™æ˜¯ç»“æ„ä½“å’Œç±»çš„æœ€æœ¬è´¨åŒºåˆ«ã€‚ äºŒã€ç±»ä¸ç»“æ„ä½“çš„å®šä¹‰ç±»ä¸ç»“æ„ä½“åœ¨å®šä¹‰è¯­æ³•ä¸Šç›¸ä¼¼ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314class MyClass &#123; var name = &quot;HS&quot; var age = 25&#125;struct MyStruct &#123; var param1:Int var param2:String&#125;//åˆ›å»ºç±»çš„å®ä¾‹var obj1 = MyClass()//åˆ›å»ºç»“æ„ä½“çš„å®ä¾‹ æ‰€æœ‰ç»“æ„ä½“ä¼šé»˜è®¤ç”Ÿæˆä¸€ä¸ªé€ä¸ªè®¾ç½®å±æ€§çš„æ„é€ æ–¹æ³• è€Œç±»ä¸ä¼švar obj2 = MyStruct(param1: 1,param2: &quot;1&quot;)//å¯ä»¥é€šè¿‡ç‚¹è¯­æ³•æ¥è·å–ç±»æˆ–è€…ç»“æ„ä½“ä¸­çš„å±æ€§å€¼print(obj1.age,obj2.param1) é€šè¿‡å®ä¾‹é—´çš„ä¼ é€’ï¼Œå¯ä»¥è¯æ˜Swiftä¸­ç±»è¢«å¼•ç”¨äºç»“æ„ä½“è¢«å¤åˆ¶è¿™æ ·çš„ç‰¹ç‚¹ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789//å°†ç±»å®ä¾‹ä¼ é€’ç»™å¦ä¸€ä¸ªå˜é‡var obj3 = obj1//å°†ç»“æ„ä½“å®ä¾‹ä¼ é€’ç»™å¦ä¸€ä¸ªå˜é‡var obj4 = obj2//ä¿®æ”¹å˜é‡çš„å€¼obj3.name = &quot;NewHS&quot;obj4.param1 = 2//å°† æ‰“å° NewHS 1 //è¯´æ˜ç±»æ˜¯è¢«å¼•ç”¨çš„ ç»“æ„ä½“åˆ™è¢«èµ‹å€¼print(obj1.name,obj2.param1) æ³¨æ„ï¼šåœ¨å®ä¾‹ä¼ é€’æ—¶åŒæ ·é‡‡ç”¨å¤åˆ¶åŸç†çš„è¿˜æœ‰æšä¸¾ç±»å‹ã€‚ ç”±äºç±»æ˜¯é€šè¿‡å¼•ç”¨æ¥è¿›è¡Œä¼ é€’ï¼ŒSwiftä¸­è¿˜æä¾›äº†ä¸€ç§è¿ç®—ç¬¦ç”¨æ¥æ¯”è¾ƒä¸¤ä¸ªå®ä¾‹å˜é‡æˆ–å¸¸é‡æ˜¯å¦æŒ‡å‘åŒä¸€ä¸ªå¼•ç”¨ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345if obj1===obj3&#123; print(&quot;same refer&quot;)&#125;else if obj1 !== obj3 &#123; print(&quot;not same refer&quot;)&#125; å®é™…ä¸Šï¼Œ===ä¸!==è¿ç®—ç¬¦æ¯”è¾ƒçš„æ˜¯æŒ‡é’ˆå†…å®¹ã€‚ ä¸‰ã€ç±»å’Œç»“æ„ä½“çš„é€‰æ‹©ç”±äºç±»å’Œç»“æ„ä½“æœ‰ç€ä¸åŒçš„ä¼ é€’æœºåˆ¶ï¼Œå› æ­¤å…¶ä¹Ÿé€‚ç”¨äºä¸åŒçš„å¼€å‘ä»»åŠ¡ï¼Œä¸‹é¢è¿™äº›æƒ…å†µä¸‹ï¼Œå®˜æ–¹æ¨èå¼€å‘è€…ä½¿ç”¨ç»“æ„ä½“æ¥åˆ›å»ºæ•°æ®ç±»å‹ï¼š 1.è¯¥æ•°æ®ç±»å‹å°è£…å°‘é‡çš„ç®€å•æ•°æ®å€¼ã€‚ 2.è¯¥ç±»å‹æ•°æ®æ¥ä¼ é€’æ—¶ï¼Œåº”è¯¥è¢«å¤åˆ¶ã€‚ 3.è¯¥ç±»å‹ä¸­å®šä¹‰çš„æ•°æ®ç±»å‹åœ¨ä¼ é€’æ—¶ä¹Ÿåº”è¯¥è¢«èµ‹å€¼ã€‚ 4.ä¸éœ€è¦é€šè¿‡ç»§æ‰¿å¦ä¸€ä¸ªæ•°æ®ç±»å‹è€Œæ¥ã€‚ é™¤äº†ä¸Šé¢åˆ—ä¸¾çš„ä¸€äº›æƒ…å†µï¼Œå…¶å®ƒæƒ…å†µä¸‹ï¼Œéƒ½æ¨èå¼€å‘è€…ä½¿ç”¨ç±»æ¥æè¿°æ•°æ®ï¼Œè¿™ä¹Ÿæ˜¯å¼€å‘ä¸­æœ€åå¸¸ç”¨çš„æ‰‹æ®µã€‚ æ‰©å±•ï¼šåœ¨Swiftä¸­ï¼ŒArrayï¼ŒStringï¼ŒDictionaryè¿™äº›ç±»å‹éƒ½æ˜¯é‡‡ç”¨çš„ç»“æ„ä½“çš„æ–¹å¼æ¥å®ç°ï¼Œå¹¶ä¸æ˜¯é‡‡ç”¨å¼•ç”¨çš„æ–¹å¼ï¼ŒNSStringï¼ŒNSArrayï¼ŒNSDictionaryè¿™äº›Objective-Cçš„ç±»æ˜¯é‡‡ç”¨å¼•ç”¨çš„æ–¹å¼å®ç°çš„ï¼Œå› æ­¤åœ¨Swiftä¸­ï¼ŒStringï¼ŒArrayï¼ŒDictionaryåœ¨ä¼ é€’æ—¶æ€»æ˜¯è¢«èµ‹å€¼ã€‚ç„¶è€Œå®˜æ–¹æ–‡æ¡£ä¸­è¿˜æœ‰ä¸€å¥è¯ååˆ†æœ‰æ„æ€ï¼š The description above refers to the â€œcopyingâ€ of strings, arrays, and dictionaries. The behavior you see in your code will always be as if a copy took place. However, Swift only performs an actual copy behind the scenes when it is absolutely necessary to do so. Swift manages all value copying to ensure optimal performance, and you should not avoid assignment to try to preempt this optimization. å¤§è‡´æ„æ€æ˜¯ï¼Œåœ¨ä½ çš„ä»£ç ä¸­ï¼Œæ‹·è´è¡Œä¸ºçœ‹èµ·æ¥ä¼¼ä¹æ€»ä¼šå‘ç”Ÿã€‚ç„¶è€Œï¼ŒSwift åœ¨å¹•ååªåœ¨ç»å¯¹å¿…è¦æ—¶æ‰æ‰§è¡Œå®é™…çš„æ‹·è´ã€‚Swift ç®¡ç†æ‰€æœ‰çš„å€¼æ‹·è´ä»¥ç¡®ä¿æ€§èƒ½æœ€ä¼˜åŒ–ï¼Œæ‰€ä»¥ä½ æ²¡å¿…è¦å»å›é¿èµ‹å€¼æ¥ä¿è¯æ€§èƒ½æœ€ä¼˜åŒ–ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}],"tags":[],"keywords":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}]},{"title":"Swiftè®²è§£ä¸“é¢˜åä¸€â€”â€”å±æ€§","slug":"211Swiftè®²è§£ä¸“é¢˜åä¸€â€”â€”å±æ€§","date":"2016-05-15T16:00:00.000Z","updated":"2021-07-08T09:41:26.953Z","comments":true,"path":"2016/05/16/211Swiftè®²è§£ä¸“é¢˜åä¸€â€”â€”å±æ€§/","link":"","permalink":"http://huishao.cc/2016/05/16/211Swiftè®²è§£ä¸“é¢˜åä¸€â€”â€”å±æ€§/","excerpt":"","text":"Swiftè®²è§£ä¸“é¢˜åä¸€â€”â€”å±æ€§ä¸€ã€å¼•è¨€å±æ€§å°†å€¼ä¸ç±»ï¼Œç»“æ„ä½“ï¼Œæšä¸¾è¿›è¡Œå…³è”ã€‚Swiftä¸­çš„å±æ€§åˆ†ä¸ºå­˜å‚¨å±æ€§å’Œè®¡ç®—å±æ€§ä¸¤ç§ï¼Œå­˜å‚¨å±æ€§ç”¨äºå­˜å‚¨ä¸€ä¸ªå€¼ï¼Œå…¶åªèƒ½ç”¨äºç±»ä¸ç»“æ„ä½“ï¼Œè®¡ç®—å±æ€§ç”¨äºè®¡ç®—ä¸€ä¸ªå€¼ï¼Œå…¶å¯ä»¥ç”¨äºç±»ï¼Œç»“æ„ä½“å’Œæšä¸¾ã€‚ äºŒã€å­˜å‚¨å±æ€§å­˜å‚¨å±æ€§ä½¿ç”¨å˜é‡æˆ–è€…å¸¸é‡æ¥å­˜å‚¨ä¸€ä¸ªå€¼ï¼Œåœ¨å£°æ˜å­˜å‚¨å±æ€§æ—¶ï¼Œå¯ä»¥ä¸ºå…¶è®¾ç½®ä¸€ä¸ªé»˜è®¤å€¼ï¼Œä¹Ÿå¯ä»¥åœ¨æ„é€ ç¤ºä¾‹æ˜¯è¿›è¡Œå€¼çš„è®¾ç½®ï¼Œå±æ€§å¯ä»¥é€šè¿‡ç‚¹è¯­æ³•æ¥è®¿é—®ï¼Œç»“æ„ä½“çš„å­˜å‚¨å±æ€§ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567struct MyStruct &#123; var property1 = 1 var property2:Int&#125;var obj = MyStruct(property1: 1, property2: 2)//é€šè¿‡ç‚¹è¯­æ³•è¿›è¡Œå±æ€§çš„è®¿é—®print(obj.property1,obj.property2) å¦‚ä¸Šç»“æ„ä½“ï¼Œå¦‚æœæœ‰å±æ€§è¢«å£°æ˜æˆletå¸¸é‡ï¼Œåˆ™æ­¤å±æ€§ä¸èƒ½å¤Ÿè¢«ä¿®æ”¹ã€‚è¿˜æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œå¦‚æœåœ¨åˆ›å»ºç»“æ„ä½“çš„å®ä¾‹æ—¶ï¼Œä½¿ç”¨çš„æ˜¯letè¿›è¡Œåˆ›å»ºï¼Œåˆ™å³ä¾¿ç»“æ„ä½“ä¸­çš„å±æ€§æ˜¯å˜é‡ä¹Ÿä¸å¯è¿›è¡Œä¿®æ”¹ã€‚è¿™å’Œç±»æœ‰å¾ˆå¤§åŒºåˆ«ã€‚ è¿˜æœ‰ä¸€ç±»å­˜å‚¨å±æ€§å«åšå»¶æ—¶å­˜å‚¨å±æ€§ï¼Œå¯ä»¥è®¾æƒ³ä¸€ä¸‹è¿™æ ·çš„æƒ…å½¢ï¼Œç±»çš„æŸäº›å±æ€§å¯èƒ½å¹¶ä¸æ˜¯åœ¨æ¯æ¬¡ç±»å®ä¾‹åéƒ½ä¼šç”¨åˆ°ï¼Œå¹¶ä¸”æœ‰äº›å±æ€§çš„æ„é€ å¯èƒ½ä¼šæ¶ˆè€—å¤§é‡çš„æ—¶é—´ï¼Œè¿™æ—¶ä¸€ä¸ªæ¯”è¾ƒèªæ˜çš„è®¾è®¡ä¾¿æ˜¯åœ¨ç±»è¿›è¡Œå®ä¾‹åŒ–æ—¶ï¼Œè¿™ç±»å±æ€§å¹¶ä¸è¢«æ„é€ ï¼Œå½“æ¬¡ç±»çš„å®ä¾‹ä½¿ç”¨åˆ°è¿™ä¸ªå±æ€§æ—¶ï¼Œè¿™ä¸ªå±æ€§æ‰è¢«æ„é€ å‡ºæ¥ï¼Œè¿™æ ·çš„å±æ€§è¢«ç§°ä¸ºå»¶æ—¶å­˜å‚¨å±æ€§ï¼Œä½¿ç”¨lazyå…³é”®å­—æ¥å£°æ˜ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314//ç¬¬ä¸€ä¸ªç±»class MyClass1 &#123; init()&#123; print(&quot;MyClass1ç±»è¢«æ„é€ &quot;) &#125;&#125;class MyClass2 &#123; //å£°æ˜ä¸ºå»¶æ—¶å­˜å‚¨å±æ€§ lazy var body = MyClass1()&#125;//åœ¨æ„é€ MyClass2æ—¶ å¹¶ä¸ä¼šè¿›è¡Œbodyå±æ€§çš„æ„é€  ä¸ä¼šæœ‰æ‰“å°ä¿¡æ¯var obj2 = MyClass2()//æ‰§è¡Œä¸‹é¢ä»£ç å ä¼šæœ‰æ‰“å°ä¿¡æ¯ ä½¿ç”¨bodyå±æ€§ä½¿å¾—bodyè¢«æ„é€ obj2.body æ³¨æ„ï¼Œå¦‚æœåœ¨å¤šä¸ªçº¿ç¨‹ä¸­å¯¹å»¶æ—¶æ„é€ å±æ€§è¿›è¡Œä½¿ç”¨ï¼Œä¸èƒ½ä¿è¯å…¶åªè¢«æ„é€ ä¸€æ¬¡ã€‚ ä¸‰ã€è®¡ç®—å±æ€§ç®€å•çš„ç†è§£ï¼Œè®¡ç®—å±æ€§å¹¶ä¸æ˜¯ç‹¬ç«‹çš„ç”¨äºå­˜å‚¨å€¼çš„å±æ€§ï¼Œå¼€å‘è€…ç”šè‡³å¯ä»¥å°†å…¶ç†è§£ä¸ºä¸€ä¸ªè®¡ç®—æ–¹æ³•ï¼Œå…¶ä¸»è¦ç”¨äºé€šè¿‡è®¡ç®—æ¥è·å–æˆ–è€…è®¾ç½®å…¶ä»–å­˜å‚¨å±æ€§çš„å€¼ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415161718192021struct Circle &#123; //åœ†å¿ƒ var center:(Double,Double) //åŠå¾„ var r:Double //å‘¨é•¿ å°†å…¶ä½œä¸ºè®¡ç®—å±æ€§ var l:Double&#123; get&#123; //è®¡ç®—åœ†çš„å‘¨é•¿ return 2.0*r*M_PI &#125; set&#123; //é€šè¿‡å‘¨é•¿é‡æ–°è®¡ç®—åŠå¾„ é»˜è®¤ä¼ å…¥çš„å‚æ•°åä¸ºnewValue r = newValue/(M_PI*2) &#125; &#125;&#125;var circle = Circle(center: (0,0), r: 2)print(circle.l)circle.l=24print(circle.r) é€šè¿‡ä¸Šé¢çš„æ¼”ç¤ºä»£ç å¯ä»¥äº†è§£ï¼Œlå±æ€§å¹¶éæ˜¯ä¸€ä¸ªæ–°çš„å±æ€§ï¼Œåªæ˜¯é€šè¿‡rå±æ€§æ¥è®¡ç®—å‡ºlï¼Œæˆ–è€…é€šè¿‡læ¥åæ¨å‡ºrï¼Œå…¶ä¸­æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œè®¡ç®—å±æ€§ä¸­å¯ä»¥åˆ›å»ºä¸¤ä¸ªä»£ç å—setå’Œgetï¼Œsetä»£ç å—æ˜¯å¯é€‰çš„ï¼Œå…¶ä¸­ä¼šé»˜è®¤ç”Ÿæˆä¸€ä¸ªnewValueå‚æ•°æ¥ä¼ é€’å¤–ç•Œä¼ è¿›æ¥çš„æ•°æ®ï¼Œgetä»£ç å—æ˜¯å¿…é¡»è¦å®ç°çš„ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥åªå®ç°getä»£ç å—ï¼Œè¿™æ—¶è¿™ä¸ªå±æ€§å°†æ˜¯åªè¯»çš„è®¡ç®—å±æ€§ï¼Œåªå¯ä»¥è·å–ï¼Œä¸èƒ½å¤Ÿè®¾ç½®ã€‚è¿˜æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œå¼€å‘è€…ä¹Ÿå¯ä»¥åœ¨setä»£ç å—åé¢è‡ªå®šä¹‰ä¸€ä¸ªå‚æ•°åæ¥æ¥æ”¶å¤–ç•Œä¼ å…¥çš„å‚æ•°ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314151617struct Circle &#123; //åœ†å¿ƒ var center:(Double,Double) //åŠå¾„ var r:Double //å‘¨é•¿ å°†å…¶ä½œä¸ºè®¡ç®—å±æ€§ var l:Double&#123; get&#123; //è®¡ç®—åœ†çš„å‘¨é•¿ return 2.0*r*M_PI &#125; set(newL)&#123; //é€šè¿‡å‘¨é•¿é‡æ–°è®¡ç®—åŠå¾„ é»˜è®¤ä¼ å…¥çš„å‚æ•°åä¸ºnewValue r = newL/(M_PI*2) &#125; &#125;&#125; åªè¯»çš„è®¡ç®—å±æ€§å¯ä»¥è¿›è¡Œè¿›ä¸€æ­¥çš„ç®€å†™ï¼Œå› ä¸ºæ²¡æœ‰äº†setä»£ç å—ï¼Œæ‰€ä»¥å…³é”®å­—getå’Œæ‹¬å·ä¹Ÿå¯ä»¥ç»™çœç•¥æ‰ï¼Œä¸ä¼šäº§ç”Ÿæ­§ä¹‰ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567struct Point &#123; var x:Double var y:Double var center:(Double,Double)&#123; return (x/2,y/2) &#125;&#125; å››ã€å±æ€§ç›‘å¬å™¨Swiftä¸­çš„è®¡ç®—å±æ€§ä¸­çš„getå’Œsetæ–¹æ³•å’ŒObjective-Cä¸­çš„getå’Œsetæ–¹æ³•å…¶å®å¹¶éæ˜¯ä¸€å›äº‹ï¼ŒObjective-Cæä¾›setå’Œgetæ–¹æ³•å¯ä»¥è®©å¼€å‘è€…åœ¨å±æ€§å°†è¦è·å–æˆ–è€…è®¾ç½®çš„æ—¶å€™æ¥è¿›è¡Œä¸€äº›è‡ªå®šä¹‰çš„æ“ä½œï¼Œè¿™éƒ¨åˆ†çš„å¼€å‘éœ€æ±‚åœ¨Swiftä¸­é€šè¿‡å±æ€§ç›‘å¬å™¨æ¥å®ç°ã€‚ å±æ€§ç›‘å¬å™¨æœ‰willSetå’ŒdidSetä¸¤ç§ï¼ŒwillSetåœ¨å±æ€§å€¼å°†è¦å˜åŒ–æ—¶æ‰§è¡Œï¼ŒdidSetåœ¨å±æ€§å€¼å·²ç»å˜åŒ–æ—¶æ‰§è¡Œï¼Œå¹¶ä¸”å…¶ä¸­ä¼šä¼ å…¥å˜åŒ–å‰åçš„å€¼ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415161718192021struct Point &#123; var x:Double var y:Double&#123; willSet&#123; print(&quot;å°†è¦è¿›è¡Œå€¼çš„æ›´æ–°è®¾ç½®,æ–°çš„å€¼æ˜¯:&quot;,newValue) &#125; didSet&#123; print(&quot;å·²ç»è¿›è¡Œå€¼å¾—æ›´æ–°è®¾ç½®,æ—§çš„å€¼æ˜¯:&quot;,oldValue) &#125; &#125; var center:(Double,Double)&#123; return (x/2,y/2) &#125;&#125;var point = Point(x: 3, y: 3)//å°†æ‰“å°/* å°†è¦è¿›è¡Œå€¼çš„æ›´æ–°è®¾ç½®,æ–°çš„å€¼æ˜¯: 4.0 å·²ç»è¿›è¡Œå€¼å¾—æ›´æ–°è®¾ç½®,æ—§çš„å€¼æ˜¯: 3.0 */point.y=4 willSetä¸­é»˜è®¤ä¼šç”Ÿæˆä¸€ä¸ªå‘½åä¸ºnewValueçš„å‚æ•°ï¼ŒdidSetä¸­ä¼šé»˜è®¤ç”Ÿæˆä¸€ä¸ªå‘½åä¸ºoldValueçš„å‚æ•°ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰è¿™äº›å‚æ•°çš„å‘½åï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314struct Point &#123; var x:Double var y:Double&#123; willSet(new)&#123; print(&quot;å°†è¦è¿›è¡Œå€¼çš„æ›´æ–°è®¾ç½®,æ–°çš„å€¼æ˜¯:&quot;,new) &#125; didSet(old)&#123; print(&quot;å·²ç»è¿›è¡Œå€¼å¾—æ›´æ–°è®¾ç½®,æ—§çš„å€¼æ˜¯:&quot;,old) &#125; &#125; var center:(Double,Double)&#123; return (x/2,y/2) &#125;&#125; äº”ã€å®ä¾‹å±æ€§ä¸ç±»å‹å±æ€§å®ä¾‹å±æ€§æ˜¯é’ˆå¯¹ä¸ä¸€ä¸ªç±»å‹çš„å®ä¾‹ï¼Œç±»å‹å±æ€§åˆ™æ˜¯ç›´æ¥é’ˆå¯¹ä¸ç±»å‹ã€‚ æ¯å¯¹ç±»å‹è¿›è¡Œä¸€æ¬¡å®ä¾‹åŒ–ï¼Œå…¶å®ä¾‹éƒ½æœ‰ä¸€å¥—ç‹¬ç«‹çš„å®ä¾‹å±æ€§ï¼Œè€Œç±»å‹å±æ€§åˆ™æ˜¯ç±»çš„æ‰€æœ‰å®ä¾‹æ‰€å…±ç”¨çš„ï¼Œåœ¨Objective-Cä¸­ï¼Œé€šå¸¸ä½¿ç”¨å…¨å±€çš„å±æ€§æ¥å®ç°è¿™æ ·çš„æ•ˆæœï¼Œåœ¨Swiftä¸­ï¼Œä½¿ç”¨staticå…³é”®å­—æ¥å£°æ˜ç±»å‹å±æ€§ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516171819202122struct Point &#123; //ç±»å‹å­˜å‚¨å±æ€§ static var name:String = &quot;Point&quot; //ç±»å‹è®¡ç®—å±æ€§ static var subName:String&#123; return &quot;sub&quot;+name &#125; var x:Double var y:Double&#123; willSet(new)&#123; print(&quot;å°†è¦è¿›è¡Œå€¼çš„æ›´æ–°è®¾ç½®,æ–°çš„å€¼æ˜¯:&quot;,new) &#125; didSet(old)&#123; print(&quot;å·²ç»è¿›è¡Œå€¼å¾—æ›´æ–°è®¾ç½®,æ—§çš„å€¼æ˜¯:&quot;,old) &#125; &#125; var center:(Double,Double)&#123; return (x/2,y/2) &#125;&#125;//ç±»å‹å±æ€§ é€šè¿‡ç±»å‹ç‚¹è¯­æ³•æ¥è·å–print(Point.name,Point.subName) æ³¨æ„ï¼Œæœ‰ä¸€ç§ç‰¹æ®Šçš„æƒ…å†µæ˜¯é’ˆå¯¹äºç±»çš„ç±»å‹è®¡ç®—å±æ€§ï¼Œå¦‚æœå…¶éœ€è¦å­ç±»è¿›è¡Œç»§æ‰¿é‡å†™ï¼Œéœ€è¦å°†staticå…³é”®å­—ï¼Œæ¢æˆclasså…³é”®å­—ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910class SomeClass &#123; static var storedTypeProperty = &quot;Some value.&quot; static var computedTypeProperty: Int &#123; return 27 &#125; //æ”¯æŒå­ç±»è¿›è¡Œé‡å†™çš„è®¡ç®—å±æ€§ class var overrideableComputedTypeProperty: Int &#123; return 107 &#125;&#125; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}],"tags":[],"keywords":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}]},{"title":"Swiftè®²è§£ä¸“é¢˜ä¹â€”â€”æšä¸¾","slug":"209Swiftè®²è§£ä¸“é¢˜ä¹â€”â€”æšä¸¾","date":"2016-05-14T16:00:00.000Z","updated":"2021-07-08T09:39:52.797Z","comments":true,"path":"2016/05/15/209Swiftè®²è§£ä¸“é¢˜ä¹â€”â€”æšä¸¾/","link":"","permalink":"http://huishao.cc/2016/05/15/209Swiftè®²è§£ä¸“é¢˜ä¹â€”â€”æšä¸¾/","excerpt":"","text":"Swiftè®²è§£ä¸“é¢˜ä¹â€”â€”æšä¸¾ä¸€ã€å¼•è¨€åœ¨Objective-Cè¯­è¨€ä¸­ï¼Œæ²¡æœ‰å®é™…ä¸Šæ˜¯æ•´å‹æ•°æ®ï¼ŒSwiftä¸­çš„æšä¸¾åˆ™æ›´åŠ çµæ´»ï¼Œå¼€å‘è€…å¯ä»¥ä¸ä¸ºå…¶åˆ†é…å€¼ç±»å‹æŠŠæšä¸¾ä½œä¸ºç‹¬ç«‹çš„ç±»å‹æ¥ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ä¸ºå…¶åˆ†é…å€¼ï¼Œå¯ä»¥æ˜¯å­—ç¬¦ï¼Œå­—ç¬¦ä¸²ï¼Œæ•´å‹æˆ–è€…æµ®ç‚¹å‹æ•°æ®ã€‚ äºŒã€æšä¸¾è¯­æ³•Swiftä¸­enumå…³é”®å­—æ¥è¿›è¡Œæšä¸¾çš„åˆ›å»ºï¼Œä½¿ç”¨caseæ¥åˆ›å»ºæ¯ä¸€ä¸ªæšä¸¾å€¼ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112//åˆ›å»ºå§“æ°æšä¸¾,å’ŒObjective-Cä¸åŒï¼ŒSwiftæšä¸¾ä¸ä¼šé»˜è®¤åˆ†é…å€¼enum Surname &#123; case å¼  case ç‹ case æ case èµµ&#125;//åˆ›å»ºä¸€ä¸ªæšä¸¾ç±»å‹çš„å˜é‡var myName = Surname.å¼ //å¦‚æœå¯ä»¥è‡ªåŠ¨æ¨æ–­å‡ºç±»å‹ åˆ™æšä¸¾ç±»å‹å¯ä»¥çœç•¥myName = .ævar myName2:Surname = .ç‹ åŒæ ·å¯ä»¥å°†æšä¸¾å€¼éƒ½å†™åœ¨åŒä¸€ä¸ªcaseä¸­ï¼Œä½¿ç”¨é€—å·åˆ†éš”ï¼š 123enum Planet &#123; case Mercury, Venus, Earth, Mars, Jupiter, Saturn, Uranus, Neptune&#125; æšä¸¾ç»å¸¸ä¼šå’ŒSwitchè¯­å¥ç»“åˆä½¿ç”¨ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910switch myName &#123;case .å¼ : print(&quot;å§“æ°å¼ &quot;)case .ç‹: print(&quot;å§“æ°ç‹&quot;)case .æ: print(&quot;å§“æ°æ&quot;)case .èµµ: print(&quot;å§“æ°èµµ&quot;)&#125; ä¸‰ã€æšä¸¾çš„ç›¸å…³å€¼Swiftä¸­çš„æšä¸¾æœ‰ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„ç‰¹ç‚¹ï¼Œå…¶å¯ä»¥è®¾ç½®ä¸€äº›ç›¸å…³å€¼ï¼Œé€šè¿‡ç›¸å…³å€¼ï¼Œå¼€å‘è€…å¯ä»¥ä»å…¬ç”¨çš„æšä¸¾å€¼ä¸­è·å–åˆ°ä¼ é€’çš„é¢å¤–ç›¸å…³å€¼ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516171819202122enum Number &#123; case one(count:Int) case two(count:Int) case three(count:Int) case four(count:Int)&#125;var num = Number.one(count: 5)switch num &#123; //è·å–numçš„ç›¸å…³å€¼case Number.one(let count): print(count)default: print(num)&#125;//å¦‚æœä¸€ä¸ªæšä¸¾å€¼æ‰€æœ‰çš„ç›¸å…³ä¸­éƒ½æ˜¯å¸¸é‡ï¼Œletå…³é”®å­—ä¹Ÿå¯ä»¥æå–åˆ°æ‹¬å·å¤–é¢switch num &#123; //è·å–numçš„ç›¸å…³å€¼case let Number.one(count): print(count)default: print(num)&#125; æœ‰äº†ç›¸å…³å€¼è¿™æ ·çš„å¥æ³•ï¼Œå¤§å¤§çš„å¢åŠ äº†æšä¸¾çš„çµæ´»æ€§ï¼Œä¾‹å¦‚ä¸€ä¸ªå½¢çŠ¶æšä¸¾ï¼Œå¯èƒ½çš„æšä¸¾å€¼æœ‰çŸ©å½¢ï¼Œåœ†å½¢ç­‰ï¼ŒçŸ©å½¢çš„æšä¸¾å€¼å°±å¯ä»¥æä¾›å®½é«˜çš„ç›¸å…³å€¼ï¼Œåœ†å½¢çš„æšä¸¾å€¼å°±å¯ä»¥æä¾›åŠå¾„çš„ç›¸å…³å€¼ï¼Œæ˜¯å¼€å‘æ›´åŠ çµæ´»ã€‚ å››ã€æšä¸¾çš„åŸå§‹å€¼åŸå§‹å€¼ä¹Ÿå¯ä»¥ç†è§£ä¸ºä¸ºæšä¸¾è®¾ç½®ä¸€ä¸ªå…·ä½“ç±»å‹ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567enum Char:String &#123; case a = &quot;A&quot; case b = &quot;B&quot; case c = &quot;C&quot;&#125;//â€Aâ€œvar char = Char.a.rawValue æ³¨æ„ï¼Œå¦‚æœæšä¸¾æ˜¯Intç±»å‹çš„ï¼Œåˆ™ç±»ä¼¼äºObjective-Cï¼Œæšä¸¾çš„åŸå§‹å€¼ä¼šä»ç¬¬ä¸€ä¸ªå¼€å§‹ä¹‹åä¾æ¬¡é€’å¢ï¼š 1234567enum Char:Int&#123; case a = 0 case b case c&#125;//1var char = Char.b.rawValue åŒæ ·å¯ä»¥é€šè¿‡åŸå§‹å€¼çš„æ–¹å¼æ¥è¿›è¡Œæšä¸¾å¯¹è±¡çš„åˆ›å»ºï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789enum Char:Int&#123; case a = 0 case b case c&#125;//1var char = Char.b.rawValue//bvar char2 = Char(rawValue:1) åœ¨é€šè¿‡åŸå§‹å€¼è¿›è¡Œæšä¸¾å¯¹è±¡åˆ›å»ºçš„æ—¶å€™ï¼Œæœ‰å¯èƒ½åˆ›å»ºå¤±è´¥ï¼Œä¾‹å¦‚ä¼ å…¥çš„åŸå§‹å€¼å¹¶ä¸å­˜åœ¨ï¼Œè¿™æ—¶ä¼šè¿”å›Optionalå€¼nilã€‚ å››ã€é€’å½’æšä¸¾é€’å½’æšä¸¾æ˜¯Swiftæšä¸¾ä¸­ä¸€ä¸ªéš¾äºç†è§£çš„åœ°æ–¹ï¼Œå®é™…ä¸Šä¹Ÿå¹¶éååˆ†éš¾äºç†è§£ï¼Œå¼€å‘è€…åªè¦æ˜ç™½æšä¸¾çš„å®è´¨ï¼Œé€’å½’æšä¸¾å°±å¾ˆå¥½ç†è§£ã€‚é¦–å…ˆï¼Œé€’å½’æ˜¯ä¸€ç§ç®—æ³•ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºè‡ªå·±è°ƒç”¨è‡ªå·±ï¼Œè€Œæšä¸¾å®é™…ä¸Šå¹¶ä¸æ˜¯å‡½æ•°ï¼Œå®ƒå¹¶ä¸æ‰§è¡ŒæŸé¡¹è¿ç®—ï¼Œå®ƒåªæ˜¯è¡¨è¾¾ä¸€ä¸ªæ•°æ®æˆ–è€…è¯´ä»–ä¹Ÿå¯ä»¥è¡¨è¾¾ä¸€ç§è¡¨è¾¾å¼ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456enum Expression &#123; //è¡¨ç¤ºåŠ  case add //è¡¨ç¤ºå‡ case mul&#125; å‰é¢æœ‰æåˆ°è¿‡ç›¸å…³å€¼çš„æ¦‚å¿µï¼Œå› æ­¤ï¼Œå¯¹äºä¸Šè¿°ä¾‹å­ï¼Œå¯ä»¥ä¸ºaddå’Œmulæšä¸¾å€¼æ·»åŠ ä¸¤ä¸ªç›¸å…³å€¼ä½œä¸ºå‚æ•°ã€‚ 123456enum Expression &#123; //è¡¨ç¤ºåŠ  case add(Int,Int) //è¡¨ç¤ºå‡ case mul(Int,Int)&#125; å¦‚æ­¤ï¼Œå¦‚ä¸‹çš„å†™æ³•å®é™…ä¸Šå°±å¯ä»¥ä»£è¡¨ä¸€ä¸ª5+5çš„è¡¨è¾¾å¼ï¼š 1var exp = Expression.add(5, 5) è¿˜æ˜¯éœ€è¦å¼ºè°ƒä¸€ç‚¹ï¼Œè¿™ä¸ªexpåªæ˜¯è¡¨è¾¾äº†5+5è¿™æ ·ä¸€ä¸ªçº¦å®šçš„è¡¨è¾¾å¼ï¼Œå®ƒå¹¶æ²¡æœ‰çœŸæ­£è¿›è¡Œ5+5çš„è¿ç®—ã€‚ç°åœ¨é—®é¢˜å°±æ¥äº†ï¼Œä½¿ç”¨å¦‚ä¸Šçš„æšä¸¾ï¼Œæ€æ ·æ¥è¡¨è¾¾ç±»ä¼¼(5+5)*5è¿™æ ·çš„å¤åˆè¡¨è¾¾å¼å‘¢ï¼Ÿå¯ä»¥ä½¿ç”¨é€’å½’æšä¸¾æ¥å®ç°ï¼Œå³å°†(5+5)ä½œä¸ºæšä¸¾å€¼å¾—ç›¸å…³å€¼å†æ¬¡åˆ›å»ºæšä¸¾ï¼Œæ”¹é€ å¦‚ä¸‹ï¼š 123456789101112enum Expression &#123; //å•å€¼æ•°æ® case num(Int) //è¡¨ç¤ºåŠ  indirectä¸ºé€’å½’æšä¸¾å…³é”®å­— indirect case add(Expression,Expression) //è¡¨ç¤ºå‡ indirect case mul(Expression,Expression)&#125;var exp1 = Expression.num(5)var exp2 = Expression.num(5)var exp3 = Expression.add(exp1, exp2)var exp4 = Expression.mul(exp1, exp3) ä¸Šé¢exp4å®é™…ä¸Šå°±è¡¨è¾¾äº†(5+5)*5è¿™æ ·ä¸€ä¸ªè¿‡ç¨‹ï¼Œæ³¨æ„é€’å½’çš„æšä¸¾å€¼å¿…é¡»åŠ ä¸Šindirectå…³é”®å­—æ¥å£°æ˜ã€‚å¤„ç†é€’å½’æšä¸¾æœ€å¥½çš„æ–¹å¼æ˜¯é€šè¿‡é€’å½’å‡½æ•°ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516func expFunc(param:Expression) -&gt; Int &#123; //è¿›è¡Œæšä¸¾åˆ¤æ–­ switch param &#123; //å¦‚æœæ˜¯å•ç‹¬æ•°å­— ç›´æ¥è¿”å› case .num(let p): return p //å¦‚æœæ˜¯åŠ æ³• åˆ™è¿›è¡Œé€’å½’åŠ  case .add(let one, let two): return expFunc(one)+expFunc(two) //å¦‚æœæ˜¯ä¹˜æ³• åˆ™è¿›è¡Œé€’å½’ä¹˜ case .mul(let one, let two): return expFunc(one)*expFunc(two) &#125;&#125;//50expFunc(exp4) å¦‚æœæšä¸¾ä¸­æ‰€æœ‰çš„caseéƒ½æ˜¯å¯é€’å½’çš„ï¼Œå¯ä»¥å°†æ•´ä¸ªæšä¸¾å£°æ˜ä¸ºå¯é€’å½’çš„ï¼š 12345678indirect enum Expression &#123; //å•å€¼æ•°æ® case num(Int) //è¡¨ç¤ºåŠ  indirectä¸ºé€’å½’æšä¸¾å…³é”®å­— case add(Expression,Expression) //è¡¨ç¤ºå‡ case mul(Expression,Expression)&#125; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}],"tags":[],"keywords":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}]},{"title":"Swiftè®²è§£ä¸“é¢˜å…«â€”â€”é—­åŒ…","slug":"208Swiftè®²è§£ä¸“é¢˜å…«â€”â€”é—­åŒ…","date":"2016-05-13T16:00:00.000Z","updated":"2021-07-08T09:39:09.047Z","comments":true,"path":"2016/05/14/208Swiftè®²è§£ä¸“é¢˜å…«â€”â€”é—­åŒ…/","link":"","permalink":"http://huishao.cc/2016/05/14/208Swiftè®²è§£ä¸“é¢˜å…«â€”â€”é—­åŒ…/","excerpt":"","text":"Swiftè®²è§£ä¸“é¢˜å…«â€”â€”é—­åŒ…ä¸€ã€å¼•è¨€Swiftä¸­çš„é—­åŒ…æ˜¯æœ‰ä¸€å®šåŠŸèƒ½çš„ä»£ç å—ï¼Œè¿™ååˆ†ç±»ä¼¼äºObjective-Cä¸­çš„blockè¯­æ³•ã€‚Swiftä¸­çš„é—­åŒ…è¯­æ³•é£æ ¼ååˆ†ç®€æ´ï¼Œå…¶ä½œç”¨å’Œå‡½æ•°çš„ä½œç”¨ç›¸ä¼¼ã€‚ äºŒã€ä»ä¸€ä¸ªç³»ç»Ÿå‡½æ•°çœ‹é—­åŒ…Swiftæ ‡å‡†å‡½æ•°åº“ä¸­æä¾›äº†ä¸€ä¸ªsortæ’åºå‡½æ•°ï¼Œå¯¹äºå·²ç»å…ƒç´ ç±»å‹çš„æ•°ç»„ï¼Œè°ƒç”¨sortå‡½æ•°ä¼šè¿›è¡Œé‡æ–°æ’åºå¹¶è¿”å›æ–°çš„æ’åºåçš„æ•°ç»„ã€‚è¿™ä¸ªsortå‡½æ•°å¯ä»¥æ¥æ”¶ä¸€ä¸ªè¿”å›å€¼ä¸ºBoolç±»å‹çš„é—­åŒ…ï¼Œæ¥ç¡®å®šç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯å¦æ’åœ¨ç¬¬äºŒä¸ªå…ƒç´ å‰é¢ã€‚ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112var array = [3,21,5,2,64]func func1(param1:Int,param2:Int) -&gt; Bool &#123; return param1&gt;param2&#125;//é€šè¿‡ä¼ å…¥å‡½æ•°çš„æ–¹å¼//array = [64,21,5,3,2]array = array.sort(func1)//é€šè¿‡é—­åŒ…çš„æ–¹å¼//array = [2,3,5,21,64]array = array.sort(&#123;(param:Int,param2:Int)-&gt;Bool in return param&lt;param2 &#125;) Swiftè¯­è¨€æœ‰ä¸€ä¸ªå¾ˆæ˜¾è‘—çš„ç‰¹ç‚¹å°±æ˜¯ç®€æ´ï¼Œå¯ä»¥é€šè¿‡ä¸Šä¸‹æ–‡æ¨æ–­å‡ºç±»å‹çš„æƒ…å†µä¸€èˆ¬å¼€å‘éƒ½å¯ä»¥å°†ç±»å‹çš„ä¹¦å†™çœç•¥ï¼Œè¿™ä¹Ÿæ˜¯Swiftè¯­è¨€è®¾è®¡çš„ä¸€ä¸ªæ€è·¯ï¼Œç”±äºé—­åŒ…æ˜¯ä½œä¸ºå‡½æ•°çš„å‚æ•°ä¼ å…¥å‡½æ•°ä¸­çš„ï¼Œå› ä¸ºå‡½æ•°å‚æ•°çš„ç±»å‹æ˜¯ç¡®å®šï¼Œå› æ­¤é—­åŒ…çš„ç±»å‹æ˜¯å¯ä»¥è¢«ç¼–è¯‘å™¨æ¨æ–­å‡ºæ¥çš„ï¼Œå¼€å‘è€…ä¹Ÿå¯ä»¥å°†é—­åŒ…çš„å‚æ•°ç±»å‹å’Œè¿”å›å€¼çœç•¥ï¼Œä¸Šé¢çš„ä»£ç å¯ä»¥ç®€å†™å¦‚ä¸‹ï¼š 12//å°†é—­åŒ…çš„å‚æ•°ç±»å‹å’Œè¿”å›å€¼éƒ½çœç•¥array = array.sort(&#123;(p1,p2) in return p1&gt;p2&#125;) å®é™…ä¸Šï¼Œå¦‚æœé—­åŒ…ä¸­çš„å‡½æ•°ä½“åªæœ‰ä¸€è¡Œä»£ç ï¼Œå¯ä»¥å°†returnå…³é”®å­—ä¹Ÿçœç•¥ï¼Œè¿™æ—¶ä¼šéšå¼çš„è¿”å›æ­¤è¡Œä»£ç çš„å€¼ï¼Œå¦‚ä¸‹ï¼š 1array = array.sort(&#123;(p1,p2) in p1&gt;p2&#125;) çœ‹åˆ°ä¸Šé¢çš„è¡¨è¾¾å¼ï¼Œæ˜¯ä¸æ˜¯æœ‰ç‚¹å°éœ‡æƒŠï¼Œé—­åŒ…è¡¨è¾¾å¼ç«Ÿç„¶å¯ä»¥ç®€å†™æˆè¿™æ ·ï¼ç„¶è€Œï¼Œä½ è¿˜æ˜¯å°çœ‹çš„Swiftå¼€å‘å›¢é˜Ÿï¼Œåé¢çš„è¯­æ³•è§„åˆ™ä¼šè®©ä½ æ˜ç™½ä»€ä¹ˆæ˜¯ç®€æ´çš„æè‡´ã€‚å¯ä»¥çœ‹åˆ°ä¸Šé¢çš„ä»£ç å®ç°è¿˜æ˜¯æœ‰3éƒ¨åˆ†ï¼šå‚æ•°å’Œè¿”å›å€¼ï¼Œé—­åŒ…å…³é”®å­—ï¼Œå‡½æ•°ä½“ã€‚å‚æ•°å’Œè¿”å›å€¼å³æ˜¯å‚æ•°åˆ—è¡¨ï¼Œp1ï¼Œp2ï¼Œè™½ç„¶çœç•¥äº†å‚æ•°ç±»å‹å’Œè¿”å›å€¼ç±»å‹ï¼Œä½†è¿™éƒ¨åˆ†çš„æ¨¡å—è¿˜åœ¨ï¼Œé—­åŒ…å…³é”®å­—å³æ˜¯inï¼Œå®ƒç”¨æ¥è¡¨ç¤ºä¸‹é¢å°†æ˜¯é—­åŒ…çš„å‡½æ•°ä½“ï¼Œp1&gt;p2å³æ˜¯å‡½æ•°ä½“ï¼Œåªæ˜¯è¿™é‡Œçœç•¥äº†returnå…³é”®å­—ã€‚é—­åŒ…ä¸­æ—¢ç„¶å‚æ•°ç±»å‹å’Œè¿”å›å€¼ç±»å‹ç¼–è¯‘å™¨éƒ½å¯ä»¥è‡ªå·±æ¨æ–­å‡ºæ¥ï¼Œé‚£ä¹ˆå‚æ•°çš„æ•°é‡ç¼–è¾‘å™¨ä¹Ÿæ˜¯å¯ä»¥è‡ªè¡Œæ¨æ–­çš„ï¼Œå› æ­¤ï¼Œå‚æ•°åˆ—è¡¨å®é™…ä¸Šä¹Ÿæ˜¯å¤šä½™çš„ï¼Œé—­åŒ…ä¸­ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€äº›å‚æ•°åç§°ï¼Œå’Œå®é™…çš„å‚æ•°æ•°é‡å‘å¯¹åº”ï¼Œä¾‹å¦‚ä¸Šé¢sortå‡½æ•°ä¸­çš„é—­åŒ…æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ç”Ÿæˆ$0å’Œ$1è¿™ä¸¤ä¸ªå‚æ•°åï¼Œå¼€å‘è€…å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œå› ä¸ºå‚æ•°åˆ—è¡¨éƒ½ä¼šçœç•¥äº†ï¼Œé‚£ä¹ˆä¹Ÿä¸å†éœ€è¦é—­åŒ…å…³é”®å­—inæ¥åˆ†éš”å‚æ•°åˆ—è¡¨ä¸å‡½æ•°ä½“ï¼Œè¿™æ—¶ï¼Œé—­åŒ…çš„å†™æ³•å®é™…ä¸Šå˜æˆäº†å¦‚ä¸‹çš„æ¨¡æ ·ï¼š 1array = array.sort(&#123;$0&lt;$1&#125;) ä½ æ²¡æœ‰çœ‹é”™ï¼ŒåŠ ä¸Šå·¦å³çš„å¤§æ‹¬å·ï¼Œä¸€å…±7ä¸ªå­—ç¬¦ï¼Œå®Œæˆäº†ä¸€ä¸ªæ’åºç®—æ³•ã€‚é™¤äº†Swiftï¼Œæˆ‘ä¸çŸ¥é“æ˜¯å¦è¿˜æœ‰ç¬¬äºŒç§è¯­è¨€å¯ä»¥åšåˆ°ã€‚æŠ›å¼€é—­åŒ…ä¸è¯´ï¼ŒSwiftä¸­è¿˜æœ‰ä¸€ç§è¯­æ³•ï¼Œå…¶å¯ä»¥å®šä¹‰ç±»å‹çš„è¿ç®—ç¬¦æ–¹æ³•ï¼Œä¾‹å¦‚Stringç±»å‹å¯ä»¥é€šè¿‡=ï¼Œ&lt;ï¼Œ&gt;æ¥è¿›è¡Œæ¯”è¾ƒï¼Œå®é™…ä¸Šæ˜¯Stringç±»ä¸­å®ç°äº†è¿™äº›è¿ç®—ç¬¦æ–¹æ³•ï¼Œåœ¨æŸç§æ„ä¹‰ä¸Šè¯´ï¼Œä¸€ä¸ªè¿ç®—ç¬¦å³ç±»ä¼¼ä¸ä¸€ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆå¥½äº†ï¼Œsortå‡½æ•°ä¸­éœ€è¦ä¼ å…¥çš„æ–¹æ³•å¯¹äºæŸäº›ç±»å‹æ¥è¯´å®é™…ä¸Šåªæ˜¯éœ€è¦ä¸€ä¸ªè¿ç®—ç¬¦ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1array = array.sort(&gt;) è¿™æ¬¡ä½ å¯ä»¥çœŸçš„éœ‡æƒŠäº†ï¼Œå®Œæˆæ’åºæ–°ç®—æ³•åªéœ€è¦ä¸€ä¸ªå­—ç¬¦ï¼Œä¸æŠ˜ä¸æ‰£çš„ä¸€ä¸ªå­—ç¬¦ã€‚ ä¸‰ã€Swiftä¸­é—­åŒ…çš„æ›´å¤šç‰¹ç‚¹Swiftä¸­çš„é—­åŒ…è¿˜æœ‰ä¸€ä¸ªæœ‰è¶£çš„ç‰¹ç‚¹ï¼Œé¦–å…ˆé—­åŒ…æ˜¯ä½œä¸ºå‚æ•°ä¼ å…¥å¦ä¸€ä¸ªå‡½æ•°ä¸­çš„ï¼Œå› æ­¤å¸¸è§„çš„å†™æ³•æ˜¯å°†é—­åŒ…çš„å¤§æ‹¬å·å†™åœ¨å‡½æ•°çš„å‚æ•°åˆ—è¡¨å°æ‹¬å·ä¸­ï¼Œå¦‚æœé—­åŒ…ä¸­çš„ä»£ç å¾ˆå¤šï¼Œè¿™æ—¶åœ¨ä»£ç ç»“æ„ä¸Šæ¥çœ‹ä¼šå˜å¾—å¹¶ä¸å¤ªæ¸…æ™°ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒSwiftä¸­è¿™æ ·è§„å®šï¼šå¦‚æœè¿™ä¸ªé—­åŒ…å‚æ•°æ˜¯å‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°ï¼Œå¼€å‘è€…å¯ä»¥å°†å…¶æ‹‰å‡ºå°æ‹¬å·ï¼Œåœ¨å‡½æ•°å°¾éƒ¨å®ç°é—­åŒ…ä»£ç ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678//é—­åŒ…ç»“å°¾func func2(param1:Int,param2:()-&gt;Void)-&gt;Void&#123; param2() print(&quot;è°ƒç”¨äº†func2å‡½æ•°&quot;)&#125;func2(0)&#123; print(&quot;é—­åŒ…ä¸­çš„å†…å®¹&quot;)&#125; å¦‚æœä¸€ä¸ªå‡½æ•°ä¸­åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œä¸”è¿™ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªé—­åŒ…ï¼Œé‚£ä¹ˆå¼€å‘è€…ä½¿ç”¨é—­åŒ…ç»“å°¾è¿™ç§å†™æ³•ï¼Œå®Œå…¨å¯ä»¥å°†å‡½æ•°çš„å‚æ•°åˆ—è¡¨å°æ‹¬å·ä¹Ÿçœç•¥æ‰ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567func func3(param:()-&gt;Void)-&gt;Void&#123; param() print(&quot;è°ƒç”¨äº†func3å‡½æ•°&quot;)&#125;func3&#123; print(&quot;é—­åŒ…ä¸­çš„å†…å®¹&quot;)&#125; Swiftä¸­è¿˜æœ‰ä¸€ä¸ªé—­åŒ…é€ƒé€¸çš„æ¦‚å¿µï¼Œè¿™ä¸ªå¾ˆå¥½ç†è§£ï¼Œå½“é—­åŒ…ä½œä¸ºå‚æ•°ä¼ é€’è¿›å‡½æ•°æ—¶ï¼Œå¦‚æœè¿™ä¸ªé—­åŒ…åªåœ¨å‡½æ•°ä¸­è¢«ä½¿ç”¨ï¼Œåˆ™å¼€å‘è€…å¯ä»¥å°†è¿™ä¸ªé—­åŒ…å£°æ˜æˆéé€ƒé€¸çš„ï¼Œå³å‘Šè¯‰ç³»ç»Ÿå½“æ­¤å‡½æ•°ç»“æŸåï¼Œè¿™ä¸ªé—­åŒ…çš„å£°æ˜å‘¨æœŸä¹Ÿå°†ç»“æŸï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯å¯ä»¥æé«˜ä»£ç æ€§èƒ½ï¼Œå°†é—­åŒ…å£°æ˜ç§°éé€ƒé€¸çš„ç±»å‹ä½¿ç”¨@noescapeå…³é”®å­—ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567func func3(@noescape param:()-&gt;Void)-&gt;Void&#123; param() print(&quot;è°ƒç”¨äº†func3å‡½æ•°&quot;)&#125;func3&#123; print(&quot;é—­åŒ…ä¸­çš„å†…å®¹&quot;)&#125; é€ƒé€¸çš„é—­åŒ…å¸¸ç”¨äºå¼‚æ­¥çš„æ“ä½œï¼Œä¾‹å¦‚è¿™ä¸ªé—­åŒ…æ˜¯å¼‚æ­¥å¤„ç†ä¸€ä¸ªç½‘ç»œè¯·æ±‚ï¼Œåªæœ‰å½“è¯·æ±‚ç»“æŸåï¼Œé—­åŒ…çš„å£°æ˜å‘¨æœŸæ‰ç»“æŸã€‚éé€ƒé€¸çš„é—­åŒ…è¿˜æœ‰ä¸€ä¸ªæœ‰è¶£çš„ç‰¹ç‚¹ï¼Œåœ¨å…¶å†…éƒ¨å¦‚æœéœ€è¦ä½¿ç”¨selfè¿™ä¸ªå…³é”®å­—ï¼Œselfå¯ä»¥è¢«çœç•¥ã€‚ é—­åŒ…ä¹Ÿå¯ä»¥è¢«è‡ªåŠ¨çš„ç”Ÿæˆï¼Œè¿™ç§é—­åŒ…è¢«ç§°ä¸ºè‡ªåŠ¨é—­åŒ…ï¼Œè‡ªåŠ¨é—­åŒ…å¯ä»¥è‡ªåŠ¨å°†è¡¨è¾¾å¼å°è£…æˆé—­åŒ…ï¼Œå¼€å‘è€…ä¸éœ€è¦å†å†™é—­åŒ…çš„å¤§æ‹¬å·æ ¼å¼ï¼Œè‡ªåŠ¨é—­åŒ…ä¸æ¥æ”¶å‚æ•°ï¼Œè¿”å›å€¼ä¸ºå…¶ä¸­è¡¨è¾¾å¼çš„å€¼ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829//è‡ªåŠ¨é—­åŒ…æ¼”ç¤ºvar list = [1,2,3,4,5,6]//åˆ›å»ºä¸€ä¸ªæ˜¾å¼é—­åŒ…let closures = &#123; list.removeFirst() list.append(7)&#125;//å°†æ‰“å°[1,2,3,4,5,6]print(list)//æ‰§è¡Œé—­åŒ…closures()//å°†æ‰“å°[2,3,4,5,6,7]print(list)func func4(closure:()-&gt;Void) -&gt; Void &#123; //æ‰§è¡Œæ˜¾å¼çš„é—­åŒ… closures()&#125;func func5(@autoclosure auto:()-&gt;Void) -&gt; Void &#123; //æ‰§è¡Œè‡ªåŠ¨é—­åŒ… auto()&#125;//æ˜¾å¼é—­åŒ… éœ€è¦å¤§æ‹¬å·func4(closures)//å°†æ‰“å°[3,4,5,6,7,7]print(list)//å°†è¡¨è¾¾å¼è‡ªåŠ¨ç”Ÿæˆé—­åŒ…func5(list.append(8))//å°†æ‰“å°[3,4,5,6,7,7,8]print(list) è‡ªåŠ¨é—­åŒ…é»˜è®¤æ˜¯éé€ƒé€¸çš„ï¼Œå¦‚æœè¦ä½¿ç”¨é€ƒé€¸çš„é—­åŒ…ï¼Œéœ€è¦æ‰‹åŠ¨å£°æ˜ï¼Œå¦‚ä¸‹ï¼š 1234func func5(@autoclosure(escaping) auto:()-&gt;Void) -&gt; Void &#123; //æ‰§è¡Œè‡ªåŠ¨é—­åŒ… auto()&#125; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}],"tags":[],"keywords":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}]},{"title":"Swiftè®²è§£ä¸“é¢˜ä¸ƒâ€”â€”å‡½æ•°","slug":"207Swiftè®²è§£ä¸“é¢˜ä¸ƒâ€”â€”å‡½æ•°","date":"2016-05-12T16:00:00.000Z","updated":"2021-07-08T09:38:02.985Z","comments":true,"path":"2016/05/13/207Swiftè®²è§£ä¸“é¢˜ä¸ƒâ€”â€”å‡½æ•°/","link":"","permalink":"http://huishao.cc/2016/05/13/207Swiftè®²è§£ä¸“é¢˜ä¸ƒâ€”â€”å‡½æ•°/","excerpt":"","text":"Swiftè®²è§£ä¸“é¢˜ä¸ƒâ€”â€”å‡½æ•°ä¸€ã€å¼•è¨€å‡½æ•°æ˜¯æœ‰ç‰¹å®šåŠŸèƒ½çš„ä»£ç æ®µï¼Œå‡½æ•°ä¼šæœ‰ä¸€ä¸ªç‰¹å®šçš„åç§°è°ƒç”¨æ—¶æ¥ä½¿ç”¨ã€‚Swiftæä¾›äº†ååˆ†çµæ´»çš„æ–¹å¼æ¥åˆ›å»ºä¸è°ƒç”¨å‡½æ•°ã€‚äº‹å®ä¸Šåœ¨Swiftï¼Œæ¯ä¸ªå‡½æ•°éƒ½æ˜¯ä¸€ç§ç±»å‹ï¼Œè¿™ç§ç±»å‹ç”±å‚æ•°å’Œè¿”å›å€¼æ¥å†³å®šã€‚Swiftå’ŒObjective-Cçš„ä¸€å¤§åŒºåˆ«å°±åœ¨äºSwiftä¸­çš„å‡½æ•°å¯ä»¥è¿›è¡ŒåµŒå¥—ã€‚ äºŒã€å‡½æ•°çš„åˆ›å»ºä¸è°ƒç”¨å‡½æ•°é€šè¿‡å‡½æ•°åï¼Œå‚æ•°å’Œè¿”å›å€¼æ¥å®šä¹‰ï¼Œå‚æ•°å’Œè¿”å›å€¼å†³å®šä¸€ä¸ªå‡½æ•°çš„ç±»å‹ï¼Œåœ¨è°ƒç”¨å‡½æ•°æ—¶ï¼Œä½¿ç”¨å‡½æ•°åæ¥è¿›è¡Œè°ƒç”¨ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567//ä¼ å…¥ä¸€ä¸ªåå­— æ‰“å°å¹¶å°†å…¶è¿”å›func printName(name:String) -&gt; String &#123; print(name) return name&#125;//è¿›è¡Œå‡½æ•°çš„è°ƒç”¨printName(&quot;HS&quot;) ä¹Ÿå¯ä»¥åˆ›å»ºæ²¡æœ‰å‚æ•°çš„å‡½æ•°ï¼š 1234func onePuseTwo()-&gt;Int &#123; return 1+2&#125;onePuseTwo() åŒæ ·ä¹Ÿå¯ä»¥åˆ›å»ºæ²¡æœ‰è¿”å›å€¼çš„å‡½æ•°ï¼š 1234func sayHello()&#123; print(&quot;Hello&quot;)&#125;sayHello() ä¸Šé¢ä»‹ç»çš„å‡½æ•°ç±»å‹éƒ½æ¯”è¾ƒå¸¸è§ï¼Œå¯¹äºå¤šè¿”å›å€¼çš„å‡½æ•°ï¼Œåœ¨Objective-Cä¸­ååˆ†éš¾å¤„ç†ï¼Œå¼€å‘è€…é€šå¸¸ä¼šé‡‡ç”¨å­—å…¸ã€æ•°ç»„ç­‰é›†åˆæ–¹å¼æˆ–è€…å¹²è„†ä½¿ç”¨blockå›è°ƒï¼Œåœ¨Swiftä¸­ï¼Œå¯ä»¥ä½¿ç”¨å…ƒç»„ä½œä¸ºå‡½æ•°çš„è¿”å›å€¼ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234func tuples()-&gt;(Int,String)&#123; return (1,&quot;1&quot;)&#125;tuples() ä¹Ÿå¯ä»¥æ˜¯å‡½æ•°è¿”å›ä¸€ä¸ªOptionalç±»å‹çš„å€¼ï¼Œæ”¯æŒè¿”å›nilï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678func func1(param:Int)-&gt;Int? &#123; guard(param&gt;0)else&#123; return nil &#125; return param&#125;func1(0)func1(1) åœ¨å‡½æ•°çš„å‚æ•°åå‰ï¼Œå¼€å‘è€…è¿˜å¯ä»¥å†ä¸ºå…¶æ·»åŠ ä¸€ä¸ªå‚æ•°åç§°ä½œä¸ºå¤–éƒ¨å‚æ•°åï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910func func1(count param:Int ,count2 param2:Int)-&gt;Int? &#123; //å†…éƒ¨ä¾ç„¶ä½¿ç”¨param guard(param&gt;0)else&#123; return nil &#125; return param&#125;//å¤–éƒ¨è°ƒç”¨ä½¿ç”¨countfunc1(count: 0,count2: 0)func1(count: 1,count2: 1) å…¶å®Swiftå‡½æ•°ä¸­çš„å‚æ•°åˆ—è¡¨æœ‰è¿™æ ·ä¸€ä¸ªç‰¹ç‚¹ï¼Œé™¤äº†ç¬¬ä¸€ä¸ªå‚æ•°å¤–ï¼Œä¹‹åçš„å‚æ•°éƒ½é»˜è®¤æ·»åŠ ä¸€ä¸ªä¸€ä¸ªå’Œå†…éƒ¨åç§°ç›¸åŒçš„å¤–éƒ¨åç§°ï¼Œå¦‚æœå¼€å‘è€…ä¸æƒ³ä½¿ç”¨è¿™ä¸ªå¤–éƒ¨åç§°ï¼Œä½¿ç”¨_ç¬¦å·è®¾ç½®ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910func func2(param:Int,param2:Int,param3:Int) &#123; &#125;//æœ‰å¤–éƒ¨åç§°func2(0, param2: 0, param3: 0)func func3(param:Int,_ param2:Int,_ param3:Int) &#123; &#125;//æ²¡æœ‰å¤–éƒ¨åç§°func3(0, 0, 0) Swiftä¹Ÿæ”¯æŒå¼€å‘è€…ä¸ºå‡½æ•°çš„å‚æ•°åˆ›å»ºä¸€ä¸ªé»˜è®¤å€¼ï¼Œå¦‚æœå‡½æ•°çš„æŸä¸ªå‚æ•°æœ‰è®¾ç½®é»˜è®¤å€¼ï¼Œåˆ™å¼€å‘è€…åœ¨è°ƒç”¨æ—¶å¯ä»¥çœç•¥æ­¤å‚æ•°ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234func func4(param:Int=1,param2:Int=2,param3:Int) &#123; print(param,param2,param3)&#125;func4(3,param3:3) è¿˜æœ‰ä¸€ç§æƒ…å½¢åœ¨Objective-Cä¸­ä¹Ÿå¾ˆå¤„ç†ï¼Œå¯¹äºå‚æ•°æ•°é‡ä¸å®šçš„å‡½æ•°ï¼Œåœ¨å‰é¢ç« èŠ‚ä»‹ç»è¿‡ï¼ŒObjective-Cä¸€èˆ¬ä¼šä½¿ç”¨listæŒ‡é’ˆæ¥å®Œæˆï¼Œåœ¨Swiftä¸­ç¼–å†™è¿™æ ·çš„å‡½æ•°ååˆ†ç®€å•ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456func func5(param:Int...) &#123; for index in param &#123; print(index) &#125;&#125;func5(1,2,3,4) Swiftä¸­å‚æ•°é»˜è®¤æ˜¯å¸¸é‡ï¼Œåœ¨å‡½æ•°ä¸­æ˜¯ä¸èƒ½ä¿®æ”¹å¤–éƒ¨ä¼ å…¥å‚æ•°çš„å€¼å¾—ï¼Œå¦‚æœæœ‰éœ€æ±‚ï¼Œéœ€è¦å°†å‚æ•°å£°æ˜æˆinoutç±»å‹ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567func func6(inout param:Int) &#123; param = 10&#125;var count = 1//å®é™…ä¸Šä¼ å…¥çš„æ˜¯å‚æ•°åœ°å€func6(&amp;count)print(count) ä¸‰ã€å‡½æ•°ç±»å‹å‡½æ•°æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ•°æ®ç±»å‹ï¼Œæ¯ä¸€ä¸ªå‡½æ•°å±äºä¸€ç§æ•°æ®ç±»å‹ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345func func7(a:Int,_ b:Int)-&gt;Int&#123; return a+b&#125;var addFunc:(Int,Int)-&gt;Int = func7addFunc(1,2) å‡½æ•°ä¹Ÿå¯ä»¥ä½œä¸ºå‚æ•°ä¼ å…¥å¦ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ååˆ†ç±»ä¼¼äºObjective-Cä¸­çš„blockè¯­æ³•ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314func func7(a:Int,_ b:Int)-&gt;Int&#123; return a+b&#125;var addFunc:(Int,Int)-&gt;Int = func7addFunc(1,2)func func8(param:Int,param2:Int,param3:(Int,Int)-&gt;Int) -&gt; Int &#123; return param3(param,param2)&#125;//ä¼ å…¥å‡½æ•°func8(1, param2: 2, param3: addFunc)//é—­åŒ…çš„æ–¹å¼func8(2, param2: 2, param3:&#123; (a:Int,b:Int) -&gt; Int in return a*b &#125;) ä¸€ä¸ªäººå‡½æ•°ä¹Ÿå¯ä»¥ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789func func9()-&gt;(Int)-&gt;Int&#123; //Swiftæ”¯æŒåµŒå¥—å‡½æ•° func tmp(a:Int)-&gt;Int&#123; return a*a &#125; return tmp&#125;var myFunc = func9()myFunc(3) ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}],"tags":[],"keywords":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}]},{"title":"Swiftè®²è§£ä¸“é¢˜å…­â€”â€”æµç¨‹æ§åˆ¶","slug":"206Swiftè®²è§£ä¸“é¢˜å…­â€”â€”æµç¨‹æ§åˆ¶","date":"2016-05-11T16:00:00.000Z","updated":"2021-07-08T09:37:09.416Z","comments":true,"path":"2016/05/12/206Swiftè®²è§£ä¸“é¢˜å…­â€”â€”æµç¨‹æ§åˆ¶/","link":"","permalink":"http://huishao.cc/2016/05/12/206Swiftè®²è§£ä¸“é¢˜å…­â€”â€”æµç¨‹æ§åˆ¶/","excerpt":"","text":"Swiftè®²è§£ä¸“é¢˜å…­â€”â€”æµç¨‹æ§åˆ¶ä¸€ã€å¼•è¨€ä¸€ç§ç¼–ç¨‹è¯­è¨€çš„å¼ºå¤§ä¸å¦ï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºå…¶æä¾›çš„ç¨‹åºæµç¨‹æ§åˆ¶æ–¹æ¡ˆï¼Œå°±å¦‚ä½¿ç”¨æ±‡ç¼–è¯­è¨€å®ç°å¤æ‚çš„ç¨‹åºæµç¨‹æ˜¯ä¸€ä»¶ç—›è‹¦çš„äº‹æƒ…ã€‚Swiftä¸­æä¾›äº†è®¸å¤šå¼ºå¤§çš„æµç¨‹æ§åˆ¶è¯­å¥ï¼Œä¾‹å¦‚å¿«é€Ÿéå†for-inï¼Œwhileå¾ªç¯ï¼Œrepeat-whileå¾ªç¯ï¼Œswitché€‰æ‹©ç­‰ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨Swift2.2ä¸­ï¼Œfor(a;b;c)å¾ªç¯å·²ç»è¢«å¼ƒç”¨æ‰ï¼Œå¹¶ä¸”Swiftä¸­çš„Switchè¯­å¥ä¹Ÿæ›´åŠ å¼ºå¤§ï¼Œå¯ä»¥å¤„ç†ä»»æ„æ•°æ®ç±»å‹ã€‚ äºŒã€for-inå¾ªç¯é…åˆèŒƒå›´è¿ç®—ç¬¦ï¼Œfor-inå¾ªç¯å¯ä»¥ç”¨æ¥æ‰§è¡Œç¡®å®šæ¬¡æ•°çš„å¾ªç¯ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678for index in 1...5 &#123; print(index)&#125;//å¦‚æœä¸éœ€è¦è·å–å¾ªç¯ä¸­æ¯æ¬¡çš„å¾ªç¯æ¬¡æ•° å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼var sum=0;for _ in 1...3 &#123; sum += 1&#125; for-inå¾ªç¯ä¹Ÿé€šå¸¸ä¼šç”¨æ¥éå†æ•°ç»„ï¼Œå­—å…¸ï¼Œé›†åˆç­‰ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112var collection1:Array = [1,2,3,4]var collection2:Dictionary = [1:1,2:2,3:4,4:4]var collection3:Set = [1,2,3,4]for obj in collection1 &#123; print(obj)&#125;for (key , value) in collection2 &#123; print(key,value)&#125;for obj in collection3 &#123; print(obj)&#125; ä¸‰ã€whileå¾ªç¯whileè¯­å¥è¿›è¡Œå¾ªç¯æ“ä½œï¼Œç›´åˆ°å¾ªç¯æ¡ä»¶ä¸ºfalseä¸ºæ­¢ï¼Œè¿™ç±»å‹çš„å¾ªç¯é€šå¸¸é€‚ç”¨äºå¾ªç¯æ¬¡æ•°ä¸å®šçš„å¾ªç¯éœ€æ±‚ï¼Œwhileå¾ªç¯æä¾›ä¸¤ç§è¯­æ³•æ ¼å¼ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910var i=0//å½“iä¸å°äº10æ—¶è·³å‡ºå¾ªç¯while i&lt;10 &#123; print(&quot;while&quot;,i) i+=1&#125;//å…ˆè¿›è¡Œä¸€æ¬¡æ“ä½œ åœ¨åˆ¤æ–­å¾ªç¯æ¡ä»¶repeat &#123; print(&quot;repeat while&quot;)&#125; while i&lt;10 å››ã€ifè¯­å¥ifè¯­å¥æ˜¯ç¨‹åºå¼€å‘ä¸­æœ€å¸¸ç”¨çš„è¯­å¥ä¹‹ä¸€ï¼Œé€šè¿‡ifå°†åˆ¤æ–­ä¸€ä¸ªæ¡ä»¶æ˜¯å¦æˆç«‹æ¥è¿›è¡Œç¨‹åºçš„æµç¨‹æ§åˆ¶ï¼Œifè¯­å¥é€šå¸¸ä¼šå’Œelseè¯­å¥ç»“åˆè¿›è¡Œä½¿ç”¨ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678var c:Intif 1&gt;2 &#123; c=1&#125;else if 1&lt;0 &#123; c=2&#125;else&#123; c=3&#125; äº”ã€Switchè¯­å¥Switchè¯­å¥ä½œä¸ºå¼€å…³é€‰æ‹©è¯­å¥ï¼Œç”¨æ¥å¤„ç†ä¸€ç»„å€¼çš„åˆ†æ”¯é€‰æ‹©ï¼ŒSwiftä¸­çš„Switchè¯­å¥æ ¼å¤–å¼ºå¤§ï¼Œç›¸æ¯”äºObjective-Cï¼ŒSwiftä¸­çš„Switchè¯­å¥æ¯ä¸ªcaseåä¸éœ€è¦ä½¿ç”¨breakè¿›è¡Œæ‰‹åŠ¨ä¸­æ–­ï¼Œå½“ä»£ç åŒ¹é…åˆ°ä¸€ä¸ªcaseåè¯­å¥å°†è‡ªè¡Œä¸­æ–­ã€‚ç”¨æ³•ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869var charac:Character = &quot;b&quot;//ä½¿ç”¨switchè¯­å¥è¿›è¡Œå­—ç¬¦åˆ†æ”¯åˆ¤æ–­switch charac &#123;case &quot;a&quot;: print(&quot;chara is a&quot;)case &quot;b&quot;: print(&quot;chara is b&quot;)case &quot;c&quot;: print(&quot;chara is c&quot;)default ://defaultç”¨äºå¤„ç†å…¶ä»–é¢å¤–æƒ…å†µ print(&quot;no charac&quot;)&#125;//åŒä¸€ä¸ªcaseä¸­å¯ä»¥åŒ…å«å¤šä¸ªåˆ†æ”¯switch charac &#123;case &quot;a&quot;,&quot;b&quot;,&quot;c&quot; : print(&quot;chara is word&quot;)case &quot;1&quot;,&quot;2&quot;,&quot;3&quot; : print(&quot;chara is num&quot;)default : print(&quot;no charac&quot;)&#125;//åœ¨caseä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€ä¸ªèŒƒå›´var num = 3switch num &#123;case 1...3 : print(&quot;1&lt;=num&lt;=3&quot;)case 4 : print(&quot;chara is num&quot;)default : print(&quot;no charac&quot;)&#125;//ä½¿ç”¨Switchè¯­å¥è¿›è¡Œå…ƒç»„çš„åŒ¹é…var tuple = (0,0)switch tuple &#123;case (0,1): print(&quot;Sure&quot;) //ä¹Ÿå¯ä»¥åªå¯¹å…ƒç»„ä¸­çš„æŸä¸ªå…ƒç´ è¿›è¡ŒåŒ¹é…case (_,1): print(&quot;Sim&quot;) //ä¹Ÿå¯ä»¥å¯¹å…ƒç»„ä¸­çš„å…ƒç´ è¿›è¡ŒèŒƒå›´åŒ¹é…case(0...3,0...3): print(&quot;SIM&quot;)default: print(&quot;&quot;)&#125;//è¿›è¡Œæ•°æ®ç»‘å®šswitch tuple &#123;case (let a,1): print(a)case (let b,0): print(b) //let(a,b) ä¸ (let a,let b)æ„ä¹‰ç›¸åŒcase let(a,b): print(a,b)default: print(&quot;&quot;)&#125;//å¯¹äºè¿›è¡Œäº†æ•°æ®ç»‘å®šçš„Switchè¯­å¥ å¯ä»¥ä½¿ç”¨whereå…³é”®å­—æ¥è¿›è¡Œæ¡ä»¶åˆ¤æ–­switch tuple &#123;case (let a,1): print(a)case (let b,0): print(b)//let(a,b) ä¸ (let a,let b)æ„ä¹‰ç›¸åŒcase let(a,b) where a==b: print(a,b)default: print(&quot;&quot;)&#125; å…­ã€è·³è½¬è¯­å¥Swiftä¸­æä¾›äº†5ç§è·³è½¬è¯­å¥ï¼Œcontinueï¼Œbreakï¼Œfallthroughï¼Œreturnï¼Œthrowã€‚ continueï¼šè·³å‡ºåˆ°å¾ªç¯èµ·å§‹ä½ç½®ï¼Œç›´æ¥å¼€å§‹ä¸‹æ¬¡å¾ªç¯ã€‚ breakï¼šbreakå¦‚æœåœ¨å¾ªç¯è¯­å¥ä¸­åˆ™æ˜¯ç›´æ¥ä¸­æ–­å¾ªç¯ï¼Œè·³å‡ºï¼Œè‹¥æ˜¯åœ¨Switchç»“æ„ä¸­ï¼Œåˆ™ç«‹å³è·³å‡ºSwitchç»“æ„ã€‚ fallthroughè¯­å¥éœ€è¦å’Œswitchè¯­å¥é…åˆä½¿ç”¨ï¼Œåœ¨caseä¸­ä½¿ç”¨fallthroughï¼Œåˆ™ä¼šç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªcaseï¼Œéœ€è¦æ³¨æ„ï¼Œåœ¨ä¸‹ä¸€ä¸ªcaseä¸­æœ‰è¿›è¡Œæ•°æ®ç»‘å®šçš„ï¼Œä¸å¯ä»¥ä½¿ç”¨fallthroughï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516var tuple = (0,0)switch tuple &#123;case (0,0): print(&quot;Sure&quot;) //fallthroughä¼šç»§ç»­æ‰§è¡Œä¸‹é¢çš„case fallthrough //ä¹Ÿå¯ä»¥åªå¯¹å…ƒç»„ä¸­çš„æŸä¸ªå…ƒç´ è¿›è¡ŒåŒ¹é…case (_,0): print(&quot;Sim&quot;) fallthrough //ä¹Ÿå¯ä»¥å¯¹å…ƒç»„ä¸­çš„å…ƒç´ è¿›è¡ŒèŒƒå›´åŒ¹é…case(0...3,0...3): print(&quot;SIM&quot;)default: print(&quot;&quot;)&#125; returnï¼šreturnè¯­å¥ç›´æ¥ä»å‡½æ•°ä¸­è¿”å›ã€‚ throwï¼šthrowç”¨äºæŠ›å‡ºå¼‚å¸¸ã€‚ Swiftè¿˜æ”¯æŒå¦ä¸€ç§è¯­æ³•ï¼Œå¯ä»¥ä¸ºwhileå¾ªç¯è®¾ç½®ä¸€ä¸ªtipæ ‡ç­¾ï¼Œä½¿ç”¨breakå’Œcontinueç­‰å…³é”®å­—æ¥è¿›è¡Œæµç¨‹çš„æ§åˆ¶ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011var tmp = 0;tip:while tmp&lt;10 &#123; print(&quot;ccc&quot;) tmp+=1 switch tmp &#123; case 3: break tip default: break &#125;&#125; Swift2.0ä¹‹åï¼Œæä¾›äº†ä¸€ç§æ–°çš„è¯­æ³•ï¼Œguard-elseï¼Œè¿™ä¹Ÿè¢«ç§°ä½œå®ˆæŠ¤è¯­å¥ï¼Œåªæœ‰å½“æ¡ä»¶ä¸æ»¡è¶³æ—¶ï¼Œæ‰æ‰§è¡Œelseåé¢çš„ä»£ç ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910var name = &quot;HS&quot;func nameChange(name:String) &#123; guard name==&quot;HS&quot; else&#123; print(name) return &#125; print(&quot;name is HS&quot;)&#125;nameChange(name) åœ¨å¼€å‘ä¸­ï¼Œå‡½æ•°ä¸­å¸¸å¸¸ä¼šéœ€è¦æ£€æŸ¥ä¼ å…¥çš„å‚æ•°æ˜¯å¦ç¬¦åˆæ ‡å‡†ï¼Œguard-elseè¯­å¥å°±æ˜¯ä¸ºè¿™ç§éœ€æ±‚æ‰€ç”Ÿï¼Œæ­£å¦‚å…¶åï¼Œå®ƒç”¨äºå®ˆæŠ¤å‡½æ•°æ‰§è¡Œçš„ç²¾ç¡®åº¦ã€‚ ä¸ƒã€ç³»ç»Ÿç‰ˆæœ¬æ£€æŸ¥ä½¿ç”¨å¦‚ä¸‹ç¤ºä¾‹ä»£ç è¿›è¡Œç³»ç»Ÿæ”¯æŒç‰ˆæœ¬çš„æ£€æŸ¥ï¼š 123if #available(iOS 9, *)&#123; print(&quot;iOS 9&quot;)&#125; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}],"tags":[],"keywords":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}]},{"title":"Swiftè®²è§£ä¸“é¢˜äº”â€”â€”é›†åˆç±»å‹","slug":"205Swiftè®²è§£ä¸“é¢˜äº”â€”â€”é›†åˆç±»å‹","date":"2016-05-10T16:00:00.000Z","updated":"2021-07-08T09:36:23.669Z","comments":true,"path":"2016/05/11/205Swiftè®²è§£ä¸“é¢˜äº”â€”â€”é›†åˆç±»å‹/","link":"","permalink":"http://huishao.cc/2016/05/11/205Swiftè®²è§£ä¸“é¢˜äº”â€”â€”é›†åˆç±»å‹/","excerpt":"","text":"Swiftè®²è§£ä¸“é¢˜äº”â€”â€”é›†åˆç±»å‹ä¸€ã€å¼•è¨€Swiftä¸­æä¾›äº†3ç§é›†åˆç±»å‹ï¼ŒArrayæ•°æ®ç±»å‹ï¼ŒSeté›†åˆç±»å‹ï¼ŒDictionaryå­—å…¸ç±»å‹ã€‚Arrayç”¨äºå­˜æ”¾ä¸€ç»„æœ‰åºçš„æ•°æ®ï¼Œæ•°æ®è§’æ ‡ä»0å¼€å§‹ä¸€æ¬¡é€’å¢ï¼›Setç”¨äºå­˜æ”¾ä¸€ç»„æ— åºçš„æ•°æ®ï¼Œæ•°æ®ä¸å¯ä»¥é‡å¤ï¼›Dictionaryä¹Ÿç”¨äºå­˜æ”¾ä¸€ç»„æ— åºçš„æ•°æ®ï¼Œåªæ˜¯å…¶æ˜¯æŒ‰ç…§é”®å€¼å¯¹çš„æ–¹å¼å­˜å‚¨ï¼Œé”®å€¼å¿…é¡»å”¯ä¸€ã€‚è¿™é‡Œå€Ÿç”¨å®˜æ–¹æ–‡æ¡£ä¸­çš„ä¸€å¼ å›¾æ¥è¡¨ç¤º3ç§é›†åˆç±»å‹çš„ç‰¹ç‚¹ï¼š äºŒã€Arrayç±»å‹Arrayé€šå¸¸ä¹Ÿè¢«ç§°ä¸ºæ•°ç»„ï¼ŒSwiftæ˜¯ä¸€ç§ç±»å‹å®‰å…¨è¯­è¨€ï¼Œå…¶ä¸­çš„Arrayç±»å‹ä¹Ÿå¿…é¡»ç¡®å®šå…¶å…ƒç´ çš„ç±»å‹ï¼Œå£°æ˜æ•°ç»„ç±»å‹æœ‰ä¸¤ç§æ–¹æ³•ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456//å°†æ•°ç»„å£°æ˜ä¸ºIntç±»å‹å€¼é›†åˆçš„æ•°ç»„var array1:[Int]var array2:Array&lt;Int&gt;//åˆ›å»ºç©ºæ•°ç»„array1 = []array2 = Array() æ•°ç»„å¯¹è±¡å¦‚æœé€šè¿‡varå˜é‡ä¹Ÿæ¥æ”¶ï¼Œåˆ™å…¶ä¸ºå¯å˜çš„æ•°ç»„ï¼Œå¯ä»¥é€šè¿‡appendæ–¹æ³•æ¥è¿½åŠ å…ƒç´ ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12//å‘æ•°ç»„ä¸­è¿½åŠ å…ƒç´ array1.append(3) åœ¨åˆ›å»ºæ•°ç»„æ—¶ï¼Œä¹Ÿå¯ä»¥å¯¹æ•°ç»„è¿›è¡Œåˆå§‹åŒ–ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456//åˆ›å»ºæ•°ç»„[0,0,0]var array3 = [Double](count: 3, repeatedValue: 0)//åˆ›å»ºæ•°ç»„[2.5,2.5,2.5]var array4 = Array(count: 3, repeatedValue: 2.5)//æ•°ç»„å¯ä»¥ä½¿ç”¨+å·ç›´æ¥è¿›è¡Œè¿½åŠ  [0,0,0,2.5,2.5,2.5]var array5 = array3+array4 Swiftä¸­æä¾›äº†è®¸å¤šè®¿é—®å’Œä¿®æ”¹æ•°ç»„çš„æ–¹æ³•ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526//è·å–æ•°ç»„ä¸­å…ƒç´ ä¸ªæ•°array5.count//åˆ¤æ–­æ•°ç»„æ˜¯å¦ä¸ºç©ºarray5.isEmpty//é€šè¿‡ä¸‹æ ‡è®¿é—®æ•°ç»„ä¸­çš„å…ƒç´ array5[1]//é€šè¿‡ä¸‹æ ‡ä¿®æ”¹æ•°ç»„å…ƒç´ array5[1]=2//ä¿®æ”¹æ•°æ®ä¸­çš„ä¸€ç»„æ•°æ®array5[0...3] = [1,1,1,1]//å‘æ•°ç»„ä¸­æŸä¸ªä½ç½®æ’å…¥ä¸€ä¸ªæ•°æ®array5.insert(3, atIndex: 1)//ç§»é™¤æ•°ç»„æŸä¸ªè§’æ ‡å¤„çš„å…ƒç´ array5.removeAtIndex(1)//ç§»é™¤æ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ array5.removeLast()//ç§»é™¤æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ array5.removeFirst()//éå†æ•´ä¸ªæ•°ç»„for item in array5 &#123; print(item)&#125;//éå†æ•°ç»„æšä¸¾for (index,item) in array5.enumerate() &#123; print(index,item)&#125; ä¸‰ã€Setç±»å‹Setç±»å‹é›†åˆä¸å…³æ³¨å…ƒç´ çš„é¡ºåºï¼Œä½†æ˜¯å…¶å¯ä»¥ä¿è¯å…¶ä¸­å…ƒç´ çš„å”¯ä¸€æ€§ã€‚å’ŒArrayç±»å‹ä¸€æ ·ï¼ŒSetç±»å‹æ¥å£°æ˜æ—¶ä¹Ÿéœ€è¦ç¡®å®šå…¶å†…å…ƒç´ çš„ç±»å‹ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1var set1:Set&lt;Character&gt; = [&quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;d&quot;] ä¸‹é¢ç¤ºä¾‹ä»£ç æ¼”ç¤ºå¯¹é›†åˆè¿›è¡Œæ“ä½œï¼š 12345678910111213141516171819202122var set1:Set&lt;Character&gt; = [&quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;d&quot;]var set2:Set&lt;Character&gt; = [&quot;e&quot;,&quot;f&quot;,&quot;g&quot;]//å‘é›†åˆä¸­æ’å…¥å…ƒç´ set1.insert(&quot;z&quot;)//è·å–é›†åˆä¸­å…ƒç´ ä¸ªæ•°set1.count//åˆ¤æ–­é›†åˆæ˜¯å¦ä¸ºç©ºset1.isEmpty//å°†é›†åˆä¸­çš„æŸä¸ªå…ƒç´ ç§»é™¤set1.remove(&quot;a&quot;)//ç§»é™¤é›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ set1.removeAll()//åˆ¤æ–­é›†åˆä¸­æ˜¯å¦åŒ…å«æŸä¸ªå…ƒç´ set2.contains(&quot;e&quot;)//éå†é›†åˆfor item in set2 &#123; print(item)&#125;//è¿›è¡Œä»å°åˆ°å¤§çš„æ’åºéå†for item in set2.sort() &#123; print(item)&#125; Setä¹Ÿæ”¯æŒè¿›è¡Œä¸€äº›é›†åˆçš„æ•°å­¦è¿ç®—ï¼Œä¾‹å¦‚äº¤é›†ï¼Œå¹¶é›†ï¼Œè¡¥é›†ç­‰ï¼Œä¸‹é¢ä¸€å¼ å›¾æ¼”ç¤ºäº†Setè¿›è¡Œé›†åˆè¿ç®—çš„ä¸€äº›ç‰¹æ€§ï¼š intersect()æ–¹æ³•è¿”å›ä¸¤ä¸ªé›†åˆçš„äº¤é›†ã€‚ exclusiveOr()æ–¹æ³•ç”¨äºè¿”å›ä¸¤ä¸ªé›†åˆäº¤é›†çš„è¡¥é›†ã€‚ union()æ–¹æ³•ç”¨äºè¿”å›ä¸¤ä¸ªé›†åˆçš„å¹¶é›†ã€‚ subtract()æ–¹æ³•ç”¨äºè¿”å›ç¬¬äºŒä¸ªé›†åˆçš„è¡¥é›†ã€‚ ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345678910var set3:Set&lt;Int&gt; = [1,2,3,4]var set4:Set&lt;Int&gt; = [1,2,5,6]//è¿”å›äº¤é›† &#123;1ï¼Œ2&#125;var setInter = set3.intersect(set4)//è¿”å›äº¤é›†çš„è¡¥é›†&#123;3ï¼Œ4ï¼Œ5ï¼Œ6&#125;var setEx = set3.exclusiveOr(set4)//è¿”å›å¹¶é›†&#123;1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5ï¼Œ6&#125;var setUni = set3.union(set4)//è¿”å›ç¬¬äºŒä¸ªé›†åˆçš„è¡¥é›†&#123;3ï¼Œ4&#125;var setSub = set3.subtract(set4) ä½¿ç”¨æ¯”è¾ƒè¿ç®—ç¬¦==å¯ä»¥æ¯”è¾ƒä¸¤ä¸ªSeté›†åˆæ˜¯å¦ç›¸ç­‰ï¼Œå½“ä¸¤ä¸ªSeté›†åˆä¸­æ‰€æœ‰å…ƒç´ éƒ½ç›¸ç­‰æ—¶ï¼Œè¿™ä¸¤ä¸ªé›†åˆæ‰ç›¸ç­‰ã€‚ä¸‹é¢ä»£ç æ˜¾ç¤ºäº†ä¸å­é›†ç›¸å…³çš„è¿ç®—ï¼š 123456789101112var set5:Set = [1,2]var set6:Set = [2,3]var set7:Set = [1,2,3]var set8:Set = [1,2,3]//åˆ¤æ–­æ˜¯å¦æ˜¯æŸä¸ªé›†åˆçš„å­é›† set5æ˜¯set7çš„å­é›† è¿”å›tureset5.isSubsetOf(set7)//åˆ¤æ–­æ˜¯å¦æ˜¯æŸä¸ªé›†åˆçš„è¶…é›† set7æ˜¯set5çš„è¶…é›† è¿”å›tureset7.isSupersetOf(set5)//åˆ¤æ–­æ˜¯å¦æ˜¯æŸä¸ªé›†åˆçš„çœŸå­é›† set5æ˜¯set7çš„çœŸå­é›† è¿”å›tureset5.isStrictSubsetOf(set7)//åˆ¤æ–­æ˜¯å¦æ˜¯æŸä¸ªé›†åˆçš„çœŸè¶…é›† set7ä¸æ˜¯set8çš„çœŸè¶…é›† è¿”å›falseset7.isStrictSupersetOf(set8) å››ã€Dictionaryç±»å‹Swiftä¸­çš„Dictionaryåœ¨å£°æ˜æ—¶å¿…é¡»æ˜ç¡®é”®çš„ç±»å‹å’Œå€¼çš„ç±»å‹ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12var dic:Dictionary&lt;Int,String&gt;var dic2:[Int:String] = [1:&quot;one&quot;,2:&quot;Two&quot;] è®¿é—®ä¸æ“ä½œDictionaryçš„æ–¹æ³•ï¼Œä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940var dic2:[Int:String] = [1:&quot;One&quot;,2:&quot;Two&quot;,3:&quot;Three&quot;,4:&quot;Four&quot;]//è·å–å­—å…¸é”®å€¼å¯¹ä¸ªæ•°dic2.count//åˆ¤æ–­å­—å…¸æ˜¯å¦ä¸ºç©ºdic2.isEmpty//é€šè¿‡é”®è·å–å€¼dic2[1]//é€šè¿‡é”®ä¿®æ”¹å€¼dic2[1] = &quot;First&quot;//æ·»åŠ é”®å€¼dic2[0] = &quot;Zero&quot;//updateValue æ–¹æ³•å°†æ›´æ–°ä¸€ä¸ªé”®å€¼ å¦‚æœæ­¤é”®å­˜åœ¨ åˆ™æ›´æ–°é”®å€¼ å¹¶ä¸”å°†æ—§çš„é”®å€¼è¿”å› å¦‚æœæ­¤é”®ä¸å­˜åœ¨ åˆ™æ·»åŠ é”®å€¼ è¿”å›nil å…¶è¿”å›çš„ä¸ºä¸€ä¸ªOptionalç±»å‹å€¼ å¯ä»¥ä½¿ç”¨if letè¿›è¡Œå¤„ç†dic2.updateValue(&quot;9&quot;, forKey: 1)//ä½¿ç”¨if let å¤„ç†updateValueçš„è¿”å›å€¼if let oldValue = dic2.updateValue(&quot;One&quot;, forKey: 1) &#123; print(&quot;Old Value is \\(oldValue)&quot;)&#125;//é€šè¿‡é”®å€¼è·å–çš„æ•°æ®ä¹Ÿå°†æ˜¯æœ‰ä¸ªOptionalç±»å‹çš„å€¼ ä¹Ÿå¯ä»¥ä½¿ç”¨if letif let value = dic2[1] &#123; print(&quot;The Value is \\(value)&quot;)&#125;//ç§»é™¤æŸä¸ªé”®å€¼å¯¹dic2[9]=nildic2.removeValueForKey(9)//å¯¹å­—å…¸è¿›è¡Œéå†for (key,value) in dic2 &#123; print(key,value)&#125;//éå†æ‰€æœ‰é”®for key in dic2.keys &#123; print(key)&#125;//éå†æ‰€æœ‰å€¼for value in dic2.values &#123; print(value)&#125;//è¿›è¡Œä»å°åˆ°å¤§çš„æ’åºéå†for key in dic2.keys.sort() &#123; print(key)&#125; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}],"tags":[],"keywords":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}]},{"title":"Swiftè§£è¯»ä¸“é¢˜å››â€”â€”å­—ç¬¦ä¸²ä¸å­—ç¬¦","slug":"204Swiftè§£è¯»ä¸“é¢˜å››â€”â€”å­—ç¬¦ä¸²ä¸å­—ç¬¦","date":"2016-05-09T16:00:00.000Z","updated":"2021-07-08T09:34:07.930Z","comments":true,"path":"2016/05/10/204Swiftè§£è¯»ä¸“é¢˜å››â€”â€”å­—ç¬¦ä¸²ä¸å­—ç¬¦/","link":"","permalink":"http://huishao.cc/2016/05/10/204Swiftè§£è¯»ä¸“é¢˜å››â€”â€”å­—ç¬¦ä¸²ä¸å­—ç¬¦/","excerpt":"","text":"Swiftè§£è¯»ä¸“é¢˜å››â€”â€”å­—ç¬¦ä¸²ä¸å­—ç¬¦ä¸€ã€å¼•è¨€Swiftä¸­æä¾›äº†Stringç±»å‹ä¸Charactersç±»å‹æ¥å¤„ç†å­—ç¬¦ä¸²å’Œå­—ç¬¦æ•°æ®ï¼ŒSwiftä¸­çš„Stringç±»å‹é™¤äº†æä¾›äº†è®¸å¤šæ–¹ä¾¿å¼€å‘è€…ä½¿ç”¨çš„æ–¹æ³•å¤–ï¼Œè¿˜å¯ä»¥ä¸Foundationæ¡†æ¶çš„NSStringç±»è¿›è¡Œè½¬æ¢ï¼Œä½¿ç”¨èµ·æ¥ååˆ†æ–¹ä¾¿ã€‚ äºŒã€StringåŸºç¡€åœ¨Swiftä¸­ï¼Œä½¿ç”¨åŒå¼•å·æ¥å®šä¹‰å­—ç¬¦ä¸²ï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡å¦‚ä¸‹ä»£ç æ¥åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²å¸¸é‡ï¼š 1let str = &quot;Hello, playground&quot; å¯ä»¥é€šè¿‡ä¸‹é¢ä¸¤ç§æ–¹å¼æ¥åˆ›å»ºç©ºå­—ç¬¦ä¸²ï¼š 12let str1 = &quot;&quot;let str2 = String() è°ƒç”¨isEmptyæ–¹æ³•å¯ä»¥åˆ¤æ–­æŸä¸ªå­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œè¿™ä¸ªæ–¹æ³•å°†è¿”å›ä¸€ä¸ªBoolå€¼ï¼Œå¯ä»¥ç›´æ¥ç”¨äºifè¯­å¥ï¼š 123if str1.isEmpty &#123; print(&quot;this String Object is Empty&quot;)&#125; ä¸åƒObjective-Cæœ‰NSStringä¸NSMutableStringçš„åŒºåˆ«ï¼Œåœ¨Swiftä¸­ï¼Œå¦‚æœéœ€è¦åˆ›å»ºå¯å˜çš„å­—ç¬¦ä¸²ï¼Œåªéœ€ç”¨å˜é‡æ¥æ¥æ”¶ï¼š 12var str3 = &quot;Hello&quot;str3 += &quot; &quot;+&quot;World&quot;//str3 = Hello World Stringä¹Ÿå¯ä»¥ä½¿ç”¨æ’å€¼çš„æ–¹æ³•æ¥æ„é€ æ–°çš„å­—ç¬¦ä¸²ï¼Œä½¿ç”¨\\()çš„æ–¹å¼æ¥å°†æ’å€¼çš„è¡¨è¾¾å¼å†™åœ¨å°æ‹¬å·å†…ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12let multiplier = 3let message = &quot;\\(multiplier) times 2.5 is \\(Double(multiplier) * 2.5)&quot;//3 times 2.5 is 7.5 è·å–å­—ç¬¦ä¸²çš„é•¿åº¦ä½¿ç”¨å¦‚ä¸‹ä»£ç ï¼š 1str3.characters.count Swiftä¸­çš„Stringå¯ä»¥ç›´æ¥ä½¿ç”¨==è¿ç®—ç¬¦æ¥è¿›è¡Œæ¯”è¾ƒï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123let comStr1 = &quot;one two&quot;let comStr2 = &quot;one two&quot;comStr1==comStr2//true ä¸‹é¢ç¤ºä¾‹çš„ä»£ç ï¼Œç”¨æ¥æ£€éªŒå­—ç¬¦ä¸²æ˜¯å¦åŒ…å«å‰ç¼€ä¸åç¼€ï¼š 123let tmp3 = &quot;thank you&quot;tmp3.hasPrefix(&quot;thank&quot;)//truetmp3.hasSuffix(&quot;you&quot;)//true ä¸‰ã€Characterçš„ä½¿ç”¨Characterä¸ºSwiftä¸­çš„å­—ç¬¦ç±»å‹ï¼Œåœ¨for-inå¾ªç¯ä¸­ï¼Œå¯ä»¥å°†å­—ç¬¦ä¸²ä¸­æ‰€æœ‰çš„å­—ç¬¦è¿›è¡Œéå†ï¼š 123for chara in str3.characters &#123; print(chara)&#125; ä¹Ÿå¯ä»¥åˆ›å»ºå•ç‹¬çš„å­—ç¬¦ç±»å‹é‡å€¼ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12let char1 = &quot;ğŸ¶&quot;var cgar2 = &quot;HS&quot; äº‹å®ä¸Šï¼ŒStingå­—ç¬¦ä¸²ä¹Ÿå¯ä»¥é€šè¿‡Characterå­—ç¬¦æ•°ç»„è¿›è¡Œåˆå§‹åŒ–ï¼š 12let chars:[Character] = [&quot;H&quot;,&quot;e&quot;,&quot;l&quot;,&quot;l&quot;,&quot;o&quot;]let str4 = String(chars) å‘å­—ç¬¦ä¸²ä¸­è¿½åŠ å­—ç¬¦ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•ï¼š 123var str5 = &quot;&quot;let ca:Character = &quot;a&quot;str5.append(ca) å››ã€å­—ç¬¦ä¸²ä¸­çš„ç‰¹æ®Šå­—ç¬¦å­—ç¬¦ä¸²ä¸­çš„ç‰¹æ®Šå­—ç¬¦ä¸»è¦æŒ‡è½¬ä¹‰å­—ç¬¦ï¼ŒSwiftä¸­çš„è½¬ä¹‰å­—ç¬¦åˆ—ä¸¾å¦‚ä¸‹ï¼š 12345678&quot;\\0&quot;//&quot;&quot; ç©ºç™½ç¬¦&quot;\\\\&quot;//&quot;\\&quot;åæ–œæ ç¬¦å·&quot;\\t&quot;//&quot; &quot;åˆ¶è¡¨ç¬¦&quot;\\n&quot;//æ¢è¡Œç¬¦&quot;\\r&quot;//å›è½¦ç¬¦&quot;\\&apos;&quot;//&quot;&apos;&quot;å•å¼•å·&quot;\\&quot;&quot;//&quot;&quot;&quot;åŒå¼•å·&quot;\\u&#123;24&#125;&quot;//&quot;$&quot;unicodeå­—ç¬¦ äº”ã€å…³äºå­—ç¬¦ä¸²ä¸‹æ ‡åœ¨Swiftä¸­ï¼Œå­—ç¬¦ä¸²ä¹Ÿå¯ä»¥é€šè¿‡ä¸‹æ ‡çš„æ–¹å¼æ¥è®¿é—®å…¶ä¸­å­—ç¬¦ï¼Œå¹¶ä¸”æä¾›äº†ç›¸å…³æ–¹æ³•æ¥æ–¹ä¾¿çš„ç§»åŠ¨ä¸‹æ ‡ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617let tmp = &quot;Hello Swift&quot;//è·å–å­—ç¬¦å¼€å§‹çš„ä¸‹æ ‡å€¼ 0let indexStart = tmp.startIndex//è·å–æŸä¸ªä¸‹æ ‡åä¸€ä¸ªå­—ç¬¦çš„ä¸‹æ ‡ 1let next = indexStart.successor()//è·å–æœ€åä¸€ä¸ªå­—ç¬¦çš„ä¸‹æ ‡å€¼ æ³¨æ„æœ‰\\0çš„å­˜åœ¨ let indexEnd = tmp.endIndex//è·å–æŸä¸ªä¸‹æ ‡å‰ä¸€ä¸ªå­—ç¬¦çš„ä¸‹æ ‡let pre = indexEnd.predecessor()//é€šè¿‡ä¸‹æ ‡è·å–å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦ tvar c = tmp[pre]//è¿›è¡Œä¸‹æ ‡ç§»åŠ¨ ovar c2 = tmp[indexStart.advancedBy(4)]//é€šè¿‡éå†ä¸‹æ ‡æ¥éå†å­—ç¬¦ H e l l o S w i f tfor index in tmp.characters.indices &#123; print(&quot;\\(tmp[index]) &quot;, terminator: &quot;&quot;)&#125; å…­ã€åœ¨å­—ç¬¦ä¸²ä¸­æ’å…¥å’Œç§»é™¤å­—ç¬¦ä½¿ç”¨insertå‡½æ•°æ¥å‘å­—ç¬¦ä¸²ä¸­æ’å…¥ä¸€ä¸ªå­—ç¬¦ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12var tmp2 = &quot;Hello&quot;tmp2.insert(&quot;!&quot;, atIndex: tmp2.endIndex) æ³¨æ„ï¼Œä¸Šé¢ç¤ºä¾‹ä»£ç ä¸­çš„insertå‡½æ•°åªèƒ½ç”¨äºæ’å…¥ä¸€ä¸ªå­—ç¬¦ï¼Œå¦‚æœéœ€è¦æ’å…¥ä¸€ç»„å­—ç¬¦ï¼Œéœ€è¦ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•ï¼š 1tmp2.insertContentsOf(&quot; Swift&quot;.characters, at: tmp2.endIndex) ä½¿ç”¨removeAtIndexå‡½æ•°æ¥ç§»é™¤å­—ç¬¦ä¸²ä¸­çš„ä¸€ä¸ªå­—ç¬¦ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1tmp2.removeAtIndex(tmp2.endIndex.predecessor()) å¦‚æœè¦ç§»é™¤ä¸€ç»„å­—ç¬¦ï¼Œä¸»è¦é€šè¿‡Rangeæ¥å®ç°ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12let range = tmp2.endIndex.advancedBy(-4)..&lt;tmp2.endIndextmp2.removeRange(range) ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}],"tags":[],"keywords":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}]},{"title":"Swiftè§£è¯»ä¸“é¢˜ä¸‰â€”â€”åŸºç¡€è¿ç®—ç¬¦","slug":"203Swiftè§£è¯»ä¸“é¢˜ä¸‰â€”â€”åŸºç¡€è¿ç®—ç¬¦","date":"2016-05-08T16:00:00.000Z","updated":"2021-07-08T09:33:15.571Z","comments":true,"path":"2016/05/09/203Swiftè§£è¯»ä¸“é¢˜ä¸‰â€”â€”åŸºç¡€è¿ç®—ç¬¦/","link":"","permalink":"http://huishao.cc/2016/05/09/203Swiftè§£è¯»ä¸“é¢˜ä¸‰â€”â€”åŸºç¡€è¿ç®—ç¬¦/","excerpt":"","text":"Swiftè§£è¯»ä¸“é¢˜ä¸‰â€”â€”åŸºç¡€è¿ç®—ç¬¦ä¸€ã€å¼•è¨€è¿ç®—ç¬¦æ˜¯ç¼–ç¨‹è¯­è¨€ä¸å¯ç¼ºå°‘çš„ä¸€ä¸ªéƒ¨åˆ†ï¼ŒSwiftä¸­é™¤äº†æ”¯æŒCä¸­çš„è¿ç®—ç¬¦å¤–ï¼Œè¿˜æä¾›äº†ä¸€äº›æ›´åŠ å¼ºå¤§çš„è¿ç®—ç¬¦åŠŸèƒ½ï¼Œä¾‹å¦‚å–ä½™ç¬¦%å¯ä»¥ç”¨æ¥è®¡ç®—æµ®ç‚¹æ•°ï¼Œå¦å¤–æ–°å¢äº†ä¸¤ç§èŒƒå›´è¿ç®—ç¬¦ã€‚Swiftä¸­æœ‰3ç±»è¿ç®—ç¬¦: 1.ä¸€å…ƒè¿ç®—ç¬¦ è¿ç®—ç¬¦ä½œç”¨äºä¸€ä¸ªæ“ä½œæ•°ï¼Œå¯ä»¥å‡ºç°åœ¨æ“ä½œæ•°å‰æˆ–è€…æ“ä½œæ•°åã€‚ 2.äºŒå…ƒè¿ç®—ç¬¦ è¿ç®—ç¬¦ä½œç”¨äºä¸¤ä¸ªæ“ä½œæ•°ï¼Œå‡ºç°åœ¨ä¸¤ä¸ªæ“ä½œæ•°ä¸­é—´ã€‚ 3.ä¸‰å…ƒè¿ç®—ç¬¦ è¿ç®—ç¬¦ä½œç”¨äºä¸‰ä¸ªæ“ä½œæ•°é—´ã€‚ äºŒã€èµ‹å€¼è¿ç®—ç¬¦èµ‹å€¼è¿ç®—ç¬¦ç”¨=ç¬¦å·è¡¨ç¤ºï¼Œç”¨äºåˆå§‹åŒ–æˆ–è€…æ›´æ–°ä¸€ä¸ªé‡å€¼ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234//å°†å­—ç¬¦ä¸²â€œhello worldâ€ èµ‹å€¼ç»™å˜é‡strvar str = &quot;Hello, world&quot;//æ›´æ–°å˜é‡strçš„å€¼str = &quot;new value&quot; å¦‚æœèµ‹å€¼è¿ç®—ç¬¦çš„å³è¾¹æ˜¯ä¸€ä¸ªå…ƒç»„ï¼Œå…¶ä¹Ÿå¯ä»¥å°†å…ƒç»„è¿›è¡Œåˆ†è§£èµ‹å€¼ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12//å¯¹å…ƒç»„è¿›è¡Œåˆ†è§£èµ‹å€¼var (x,y) = (1,2) ä¸Cä¸Objective-Cä¸åŒï¼ŒSwiftçš„ä¸­èµ‹å€¼è¿ç®—ç¬¦å¹¶ä¸ä¼šè¿”å›ä¸€ä¸ªå€¼ï¼Œå¾ˆå¤šåˆå­¦è€…åœ¨è¿›è¡Œifè¯­å¥çš„ä½¿ç”¨æ—¶ï¼Œç»å¸¸ä¼šçŠ¯çš„ä¸€ä¸ªé”™è¯¯å°±æ˜¯å°†èµ‹å€¼è¿ç®—ç¬¦å½“åšç­‰äºè¿ç®—ç¬¦æ¥ä½¿ç”¨ï¼Œè¿™äº›é”™è¯¯åœ¨Swiftè¯­è¨€ä¸­éƒ½å°†è¢«é¿å…ï¼Œå› ä¸ºå¦‚æœåœ¨ifè¯­å¥çš„åˆ¤æ–­æ¡ä»¶ä¸­ä½¿ç”¨çš„æ˜¯èµ‹å€¼è¿ç®—ç¬¦ï¼Œç¼–è¯‘å™¨å°†ä¼šç›´æ¥æŠ›å‡ºé”™è¯¯ã€‚ ä¸‰ã€ç®—æœ¯è¿ç®—ç¬¦Swiftä¸­æ”¯æŒçš„åŸºç¡€çš„ç®—æ•°è¿ç®—ç¬¦æœ‰7ç§ï¼ŒåŠ (+)ã€å‡(-)ã€ä¹˜(*)ã€é™¤(/)ã€å–ä½™(%)ã€æ­£å·(+)ã€è´Ÿå·(-)ã€‚Sringç±»å‹çš„æ•°æ®æ˜¯æ”¯æŒé€šè¿‡+è¿ç®—ç¬¦æ¥è¿›è¡Œæ‹¼æ¥çš„ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1var newStr = &quot;hello&quot;+&quot;world&quot; Swiftä¸­çš„%è¿ç®—ç¬¦æ¯”Objective-Cæ›´åŠ å¼ºå¤§ï¼Œå…¶é™¤äº†æ”¯æŒæ•´æ•°çš„å–ä½™æ“ä½œå¤–ï¼Œè¿˜å¯ä»¥æ”¯æŒæµ®ç‚¹æ•°çš„å–ä½™æ“ä½œï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234var value1 = 10%3 //ä½™æ•°1var value2 = -10%3 //ä½™æ•°-1var value3 = 10%4.5 //ä½™æ•°1var value4 = -10%4.5 //ä½™æ•°-1 å¯¹äºæ­£å·å’Œè´Ÿå·æ“ä½œç¬¦ä¹Ÿè¢«ç§°ä¸ºä¸€å…ƒåŠ æ“ä½œç¬¦ä¸ä¸€å…ƒå‡æ“ä½œç¬¦ï¼Œä¸€å…ƒå‡æ“ä½œç¬¦ä¼šæ”¹å˜æ•°æ®çš„æ­£è´Ÿæ€§ï¼Œä¸€å…ƒåŠ æ“ä½œç¬¦åªä¼šè¿”å›æ•°å€¼æœ¬èº«ï¼Œå¹¶æ²¡æœ‰åšä»»ä½•æ“ä½œï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123var tmp = -3;+tmp//-3-tmp//3 å››ã€å¤åˆèµ‹å€¼è¿ç®—ç¬¦Swiftä¸­æä¾›äº†å°†ä¸€ä¸ªç®—æœ¯è¿ç®—ç¬¦ä¸èµ‹å€¼è¿ç®—ç¬¦ç»“åˆä½¿ç”¨çš„å¤åˆèµ‹å€¼åŠŸèƒ½ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345tmp+=3 //tmp = tmp +3tmp-=3 //tmp = tmp -3tmp*=3 //tmp = tmp *3tmp/=3 //tmp = tmp /3tmp%=3 //tmp = tmp %3 äº”ã€æ¯”è¾ƒè¿ç®—ç¬¦Swiftæ”¯æŒObjective-Cä¸­æ‰€æœ‰çš„æ¯”è¾ƒè¿ç®—ç¬¦ï¼Œæ¯”è¾ƒè¿ç®—ç¬¦å°†ä¼šè¿”å›ä¸€ä¸ªBoolç±»å‹çš„å€¼ï¼š 1234561==2 //ç­‰äºæ¯”è¾ƒ1&lt;2 //å°äºæ¯”è¾ƒ1&gt;2 //å¤§äºæ¯”è¾ƒ1 != 2 //ä¸ç­‰äºæ¯”è¾ƒ1&lt;=2 //å°äºç­‰äºæ¯”è¾ƒ1&gt;=2 //å¤§äºç­‰äºæ¯”è¾ƒ é™¤äº†ä¸Šé¢åˆ—ä¸¾å‡ºçš„6ç§æ¯”è¾ƒè¿ç®—ç¬¦å¤–ï¼ŒSwiftä¸­è¿˜æä¾›äº†ä¸¤ä¸ªç‰¹æ®Šçš„æ¯”è¾ƒè¿ç®—ç¬¦===å’Œ!==ï¼Œè¿™ä¸¤ä¸ªæ¯”è¾ƒè¿ç®—ç¬¦ç”¨äºæ¯”è¾ƒå¼•ç”¨æ˜¯å¦ç›¸åŒã€‚ Swiftä¸­çš„å…ƒç»„ä¹Ÿå¯ä»¥è¿›è¡Œæ¯”è¾ƒï¼Œä½†æ˜¯å…¶æœ‰ä¸¤ä¸ªå‰æéœ€è¦æ³¨æ„ï¼š 1.å…ƒç»„ä¸­å…ƒç´ çš„ä¸ªæ•°ç›¸åŒä¸”å¯¹åº”ä½ç½®çš„å…ƒç´ ç±»å‹ç›¸åŒã€‚ 2.å…ƒç»„ä¸­çš„å…ƒç´ å¯ä»¥è¿›è¡Œæ¯”è¾ƒæ“ä½œã€‚ å½“å…ƒç»„è¿›è¡Œæ¯”è¾ƒæ—¶ï¼ŒæŒ‰å…ƒç´ é¡ºåºè¿›è¡Œé€ä¸ªæ¯”è¾ƒï¼Œç›´é“æŸä¸ªå…ƒç´ æ¯”è¾ƒå‡ºç»“æœåä½œä¸ºå…ƒç»„çš„æ¯”è¾ƒç»“æœã€‚ 12(1,&quot;123&quot;)&gt;(0,&quot;234&quot;) //true(1,&quot;123&quot;)&gt;(1,&quot;456&quot;) //false ä¸‰å…ƒè¿ç®—ç¬¦å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªç®€å†™çš„if else è¯­å¥ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1var a = 1&gt;2 ? 1:2 //å¦‚æœ1&gt;2æˆç«‹ a=1 a=2 å…­ã€ç©ºèšåˆè¿ç®—ç¬¦ç©ºèšåˆè¿ç®—ç¬¦ä¹Ÿæ˜¯Swiftè¯­è¨€ä¸­ç‹¬æœ‰çš„ä¸€ä¸ªè¿ç®—ç¬¦ï¼Œå…¶è®¾è®¡çš„æ€è·¯æ˜¯åŸºäºæ›´åŠ æ–¹ä¾¿çš„ä½¿ç”¨Optionalå€¼çš„ç›®çš„ã€‚å¯¹äºOptionalç±»å‹çš„å€¼ï¼Œå¼€å‘è€…ä¸€èˆ¬ä¼šéœ€è¦ä½¿ç”¨?è¿›è¡Œå¯é€‰æ‹†åŒ…æˆ–è€…!è¿›è¡Œå¼ºåˆ¶æ‹†åŒ…æ¥è·å–å…¶åŸå§‹å€¼ï¼Œç©ºèšåˆè¿ç®—ç¬¦??æä¾›äº†æ›´åŠ ä½¿ç”¨çš„æ–¹å¼ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456var Op1:String?var Op2:String? = &quot;123&quot;//è¿™ä¸ªè¡¨è¾¾å¼å°†è¿”å›Op2 å…¶æ„ä¹‰æ˜¯ å¦‚æœOp1ä¸ä¸ºnilï¼Œåˆ™å¯¹å…¶è¿›è¡Œå¼ºåˆ¶æ‹†åŒ… å°†å€¼è¿”å›ï¼Œå¦‚æœä¸ºnilï¼Œåˆ™è¿”å›Op2var realStr = Op1 ?? Op2//ä¸Šé¢çš„è¡¨è¾¾å¼å’Œä¸‹é¢è¿™ä¸ªè¡¨è¾¾å¼æ„ä¹‰ç›¸åŒOp1 != nil ? Op1! : Op2 ä¸ƒã€åŒºé—´è¿ç®—ç¬¦Swiftä¸­è¿˜æä¾›äº†åŒºé—´è¿ç®—ç¬¦ï¼Œåœ¨for-inå¾ªç¯ä¸­ï¼ŒåŒºé—´è¿ç®—ç¬¦ä¼šè¢«ç»å¸¸ä½¿ç”¨åˆ°ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678//a...bä¸ºé—­åŒºé—´å†™æ³•for index in 0...3 &#123; print(index)&#125;//a..&lt;bä¸ºå·¦é—­å³å¼€åŒºé—´for index in 0..&lt;3 &#123; print(index)&#125; å…«ã€é€»è¾‘è¿ç®—ç¬¦Swiftä¸­æ”¯æŒä¸&amp;&amp;ã€æˆ–||ã€é!ä¸‰ç§é€»è¾‘è¿ç®—ç¬¦ï¼Œé€»è¾‘è¿ç®—ç¬¦åªèƒ½æ“ä½œBoolå€¼ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345var one = truevar two = falseone&amp;&amp;two //falseone||two //true!one //false é€»è¾‘è¿ç®—ç¬¦åœ¨å¤åˆä½¿ç”¨æ—¶ï¼Œæœ€å¥½ä½¿ç”¨å°æ‹¬å·è¿›è¡Œæ¨¡å—åˆ†éš”ï¼Œå¢å¼ºå¯è¯»æ€§ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}],"tags":[],"keywords":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}]},{"title":"Swiftè§£è¯»ä¸“é¢˜äºŒâ€”â€”åŸºæœ¬ç±»å‹","slug":"202Swiftè§£è¯»ä¸“é¢˜äºŒâ€”â€”åŸºæœ¬ç±»å‹","date":"2016-05-07T16:00:00.000Z","updated":"2021-07-08T09:32:25.073Z","comments":true,"path":"2016/05/08/202Swiftè§£è¯»ä¸“é¢˜äºŒâ€”â€”åŸºæœ¬ç±»å‹/","link":"","permalink":"http://huishao.cc/2016/05/08/202Swiftè§£è¯»ä¸“é¢˜äºŒâ€”â€”åŸºæœ¬ç±»å‹/","excerpt":"","text":"Swiftè§£è¯»ä¸“é¢˜äºŒâ€”â€”åŸºæœ¬ç±»å‹ä¸€ã€å¸¸é‡å’Œå˜é‡Swiftè¯­è¨€çš„å¸¸é‡å’Œå˜é‡åœ¨ä½¿ç”¨ä¹‹å‰ï¼Œå¿…é¡»è¢«å®šä¹‰ã€‚å¸¸é‡ç”¨äºå¤„ç†ç¨‹åºä¸­åªåœ¨åˆå§‹åŒ–æ—¶è®¾ç½®çš„é‡å€¼ï¼Œä¹‹åä¸èƒ½è¿›è¡Œèµ‹å€¼æ”¹å˜ï¼Œå˜é‡ç”¨äºå¤„ç†ç¨‹åºä¸­å¯ä»¥è¿›è¡Œæ”¹å˜çš„é‡å€¼ã€‚åˆ†åˆ«ç”¨letå’Œvaræ¥å£°æ˜å¸¸é‡å’Œå˜é‡ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12var varValue = 1let letValue = 10 Swiftè¯­æ³•ä¹Ÿæ”¯æŒåœ¨ä¸€è¡Œä¸­å£°æ˜å¤šä¸ªé‡å€¼ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1var a=1,b=2.9,c=&quot;string&quot; åœ¨å£°æ˜é‡å€¼æ—¶ï¼Œç¼–è¯‘å™¨ä¼šæ ¹æ®ç¬¬ä¸€æ¬¡èµ‹å€¼çš„ç±»å‹æ¥æ¨æ–­å‡ºå˜é‡çš„ç±»å‹ï¼Œä¸€æ—¦é‡å€¼çš„ç±»å‹è¢«æ¨æ–­ï¼Œåˆ™ä¸èƒ½å¤Ÿè¿›è¡Œæ›´æ”¹ï¼Œå¼€å‘è€…ä¹Ÿå¯ä»¥æ‰‹åŠ¨æ³¨é‡Šé‡å€¼çš„ç±»å‹ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1var a:Int=1,b:Float=2.9,c:String=&quot;string&quot; åœ¨ä¸€è¡Œä¸­å£°æ˜å¤šäº†å˜é‡å¹¶ä¸”æ²¡æœ‰æä¾›åˆå§‹å€¼æ—¶ï¼Œä¸ºæœ€åä¸€ä¸ªå˜é‡æ³¨é‡Šçš„å˜é‡ç±»å‹ä¹Ÿä¼šåº”ç”¨äºæœ¬è¡Œä¸­çš„æ‰€æœ‰å˜é‡ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1var one,two,three:Int å®˜æ–¹æ–‡æ¡£å»ºè®®ï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œæ³¨é‡Šé‡å€¼çš„ç±»å‹æ˜¯ååˆ†å°‘ç”¨çš„ï¼Œä¸€èˆ¬éƒ½ä¼šä¸ºå…¶èµ‹å€¼åˆå§‹å€¼åè®©ç¼–è¯‘å™¨è‡ªè¡Œæ¨æ–­ã€‚ é‡å€¼çš„å‘½åå¯ä»¥åŒ…å«Unicodeå­—ç¬¦å’Œæ•°å­—ï¼Œéœ€è¦æ³¨æ„ï¼Œæ˜¯ä¸èƒ½ä»¥æ•°å­—ä½œä¸ºé‡å€¼åç§°çš„å¼€å¤´çš„ã€‚ç©ºæ ¼ï¼Œæ•°å­¦ç¬¦å·ï¼Œåˆ¶è¡¨ç¬¦ï¼Œç®­å¤´ç­‰ç¬¦å·ä¹Ÿä¸å¯ä»¥ä½¿ç”¨ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678//ä¸­æ–‡ç¬¦ä½œå˜é‡åvar ç²å°‘ = &quot;me&quot;//è¡¨æƒ…ç¬¦ä½œä¸ºå˜é‡åvar ğŸ˜„ = &quot;å¼€å¿ƒ&quot;//å«æœ‰æ•°å­—çš„å˜é‡åvar one2three = &quot;123&quot;//å«æœ‰ä¸‹åˆ’çº¿çš„å˜é‡åvar _d_s = &quot;C++&quot; æ³¨æ„ï¼šå¦‚æœä½¿ç”¨Swiftä¸­çš„ä¿ç•™å…³é”®å­—ä½œä¸ºé‡å€¼çš„åï¼Œéœ€è¦åŠ ä¸Šå·¦å³ä¸ªåŠ ä¸Š`ç¬¦å·åŒ…å›´ï¼Œé™¤éç‰¹æ®Šæƒ…å†µï¼Œå¦åˆ™ä¸è¦ä½¿ç”¨è¿™ç§æ–¹å¼å‘½åé‡å€¼ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1var `let` = &quot;c&quot; ä½¿ç”¨print()æ–¹æ³•å¯ä»¥è¿›è¡Œé‡å€¼çš„æ‰“å°ï¼Œåœ¨å­—ç¬¦ä¸²ä¸­ä½¿ç”¨\\()æ ¼å¼å¯ä»¥æ’å…¥å˜é‡ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12var _d_s = &quot;C++&quot;print(&quot;123\\(_d_s)&quot;) äºŒã€å…³äºæ³¨é‡Šä¸ç¼–å†™ç»“æ„Swiftè¯­è¨€å¯ä»¥ä½¿ç”¨//è¿›è¡Œå•è¡Œæ³¨é‡Šå’Œ/**/è¿›è¡Œå¤šè¡Œæ³¨é‡Šï¼Œé™¤æ­¤ä¹‹å¤–ï¼ŒSwiftè¯­è¨€è¿˜æ”¯æŒå¤šè¡Œæ³¨é‡Šçš„åµŒå¥—ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112//æˆ‘æ˜¯å•è¡Œæ³¨é‡Š/* æˆ‘æ˜¯å¤šè¡Œæ³¨é‡Š æˆ‘æ˜¯å¤šè¡Œæ³¨é‡Š æˆ‘æ˜¯å¤šè¡Œæ³¨é‡Š *//* åµŒå¥—æ³¨é‡Š /* åµŒå¥—æ³¨é‡Š */ */ ä½¿ç”¨Swiftåœ¨ç¼–å†™ä»£ç æ—¶ï¼Œä»¥è¡Œä¸ºæ¯å¥ä»£ç çš„åˆ†éš”ï¼Œå½“ç„¶ï¼Œå¼€å‘è€…ä¹Ÿå¯ä»¥å°†å¤šå¥ä»£ç å†™åœ¨ä¸€è¡Œä¸­ï¼Œä½†æ˜¯éœ€è¦ä»¥åˆ†å·è¿›è¡Œåˆ†éš”ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š 1var tmp = 3;print(tmp) ä¸‰ã€æ•´å‹ä¸æµ®ç‚¹å‹Swiftä¸­æä¾›8ä½ã€16ä½ã€32ä½ã€64ä½ç±»å‹çš„æ•´å‹ï¼Œæ•´å‹æ•°ç»„ä¸åŒ…å«å°æ•°ï¼ŒåŒ…å«è´Ÿæ•´æ•°ï¼Œ0å’Œæ­£æ•´æ•°ã€‚åœ¨Swiftè¯­è¨€ä¸­ï¼Œæ•´å‹æ˜¯ç”±ç»“æ„ä½“å®šä¹‰çš„ï¼Œå¯ä»¥è°ƒç”¨maxå’Œminæ–¹æ³•è·å–å¯¹åº”ä½æ•°çš„æœ€å¤§å€¼å’Œæœ€å°å€¼ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678var maxInt8 = Int8.max //127var mimInt8 = Int8.min //-128var maxInt16 = Int16.max //32767var minInt16 = Int16.min //-32768var maxInt32 = Int32.max //2147483647var minInt32 = Int32.min //-2147483648var maxInt64 = Int64.max //9223372036854775807var minInt64 = Int64.min //-9223372036854775808 Intç±»å‹çš„å€¼åœ¨ä¸åŒä½æ•°çš„ç³»ç»Ÿä¼šæœ‰ä¸åŒçš„ç»“æœï¼Œåœ¨32ä½ç³»ç»Ÿä¸Šï¼ŒIntä¸Int32ç›¸åŒï¼Œåœ¨64ä½ç³»ç»Ÿä¸Šï¼ŒIntä¸Int64ç›¸åŒã€‚ Swiftè¯­è¨€ä¹Ÿæä¾›äº†æ— ç¬¦å·æ•´å‹ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234var maxUInt8 = UInt8.max //255var maxUInt16 = UInt16.max //65535var maxUInt32 = UInt32.max //4294967295var maxUInt64 = UInt64.max //18446744073709551615 UIntç±»å‹åœ¨32ä½ç³»ç»Ÿä¸ºUInt32ï¼Œåœ¨64ä½ç³»ç»Ÿä¸ºUInt64ã€‚ æµ®ç‚¹å‹ç”¨äºåˆ›å»ºå°æ•°ï¼ŒSwiftæä¾›äº†ä¸¤ç§ç±»å‹çš„æµ®ç‚¹å‹ï¼ŒFloatå¯¹åº”32ä½çš„æµ®ç‚¹å€¼ï¼ŒDoubleå¯¹åº”64ä½çš„æµ®ç‚¹å€¼ã€‚ åœ¨å®šä¹‰æ•´å‹æˆ–æµ®ç‚¹å‹æ•°æ®æ—¶ï¼Œå¯ä»¥é€šè¿‡æ·»åŠ å‰ç¼€çš„æ–¹å¼æ¥æŒ‡å®šå…¶è¿›åˆ¶ç±»å‹ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234var type_10 = 17; //åè¿›åˆ¶çš„17var type_2 = 0b10001 //äºŒè¿›åˆ¶çš„17var type_8 = 0o21 //å…«è¿›åˆ¶çš„17var type_16 = 0x11 //16è¿›åˆ¶çš„17 å¯¹äºç§‘å­¦è®¡æ•°æ³•ï¼Œåœ¨Swiftä¸­ä½¿ç”¨eå’Œpæ¥æ ‡è¯†ï¼Œåœ¨åè¿›åˆ¶ä¸­ä½¿ç”¨eä»£è¡¨10çš„næ¬¡æ–¹ï¼Œåœ¨åå…­è¿›åˆ¶ä¸­ï¼Œä½¿ç”¨pä»£è¡¨2çš„næ¬¡æ–¹ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12var sum = 1.25e3 //1.25*10^3 = 1250var sun2 = 0x1p3 //1*2^3 = 8 Swiftä¸­è¿˜æœ‰ä¸€ä¸ªéå¸¸æœ‰æ„æ€çš„ç‰¹æ€§ï¼Œæ— è®ºæ˜¯æ•´å‹è¿˜æ˜¯æµ®ç‚¹å‹ï¼Œéƒ½å¯ä»¥åœ¨æ•°å‰ä½¿ç”¨0è¿›è¡Œå¡«å……ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨ä¸‹åˆ’çº¿è¿›è¡Œå¯è¯»æ€§åˆ†éš”ï¼Œæ˜¯ä»£ç çœ‹èµ·æ¥æ›´åŠ æ¸…æ™°ï¼Œè¿™äº›éƒ½ä¸ä¼šæ”¹å˜åŸæ•°æ®å€¼ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123var num1 = 001.23var num2 = 1_000var num3 = 1_000.1_001 å¼€å‘è€…ä¹Ÿå¯ä»¥ä½¿ç”¨typealiaså…³é”®å­—æ¥ä¸ºæŸä¸ªæ•°æ®ç±»å‹æ·»åŠ ä¸€ä¸ªåˆ«åï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1typealias MyType = Int å››ã€å¸ƒå°”ç±»å‹åœ¨Objective-Cä¸­ï¼ŒBOOLå€¼å®é™…ä¸Šæ˜¯æ— ç¬¦å·çš„æ•´å‹æ•°æ®ï¼Œå…¶çº¦å®š0ä¸ºNOï¼Œé0éƒ½ä¸ºYESã€‚åœ¨Swiftä¸­ï¼ŒBoolè¢«ä½œä¸ºä¸€ç§ç‹¬ç«‹çš„æ•°æ®ç±»å‹ï¼Œæä¾›trueå’Œfalseä¸¤ç§å€¼ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š 1var boolVale:Bool = true äº”ã€å…ƒç»„å…ƒç»„æ˜¯Swiftè¯­è¨€ååˆ†é‡è¦çš„ä¸€ä¸ªç‰¹ç‚¹ï¼Œå®ƒå…è®¸å¼€å‘è€…å°†ä»»æ„ä¸ªä¸åŒç±»å‹çš„æ•°æ®ç»„åˆæˆä¸€ä¸ªæ•°æ®ç±»å‹ï¼Œè¿™ä¹Ÿæ˜¯Swiftè¯­è¨€çš„ä¸€ä¸ªå¼ºå¤§ä¹‹å¤„ã€‚ä¾‹å¦‚å¦‚ä¸‹ç¤ºä¾‹ä»£ç å¯ä»¥åˆ›å»ºä¸€ä¸ªå…ƒç»„ï¼š 1var tuples:(param1:Int,param2:Float,param3:String,param4:Bool) = (3,3.14,&quot;åœ†å‘¨ç‡&quot;,true) tupleså°±æ˜¯ä¸€ä¸ªç±»å‹ä¸º(param1:Int,parame:Float,param3:String,param4:Bool)ç±»å‹çš„å…ƒç»„ã€‚å–å…ƒç»„æ•°æ®çš„å¯¹åº”å€¼æœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯ä½¿ç”¨æ•°æ®å‚æ•°åç§°ï¼Œä¸€ç§æ˜¯ç›´æ¥ä½¿ç”¨æ•°æ®çš„è§’æ ‡ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910//é€šè¿‡å‚æ•°åå–å…ƒç»„ä¸­çš„æ•°æ®var tuplesInt = tuples.param1;var tuplesFloat = tuples.param2;var tuplesString = tuples.param3;var tuplesBool = tuples.param4;//é€šè¿‡è§’æ ‡å–å…ƒç»„ä¸­çš„æ•°æ®var tuplesInt2 = tuples.0;var tuplesFloat2 = tuples.1;var tuplesString2 = tuples.2;var tuplesBool2 = tuples.3; å¼€å‘è€…ä¹Ÿå¯ä»¥å°†å…ƒç»„åˆ†è§£æˆå•ç‹¬çš„å¸¸é‡è¿›è¡Œè®¿é—®ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12let (fir,sec,thr,four) = tuplesprint(fir,sec,thr,four) æœ‰æ—¶å€™ï¼ŒæŸä¸ªå…ƒç»„ä¸­çš„æ‰€æœ‰æ•°æ®å¼€å‘è€…å¹¶ä¸ä¸€å®šéƒ½éœ€è¦ä½¿ç”¨ï¼Œå¼€å‘è€…å¯ä»¥é€‰æ‹©åªæå–å…ƒç»„ä¸­æ‰€éœ€è¦çš„å€¼ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12let (fir,_,thr,_) = tuplesprint(fir,thr) å¼€å‘æ–‡æ¡£æç¤ºï¼Œå…ƒç»„åªé€‚åˆä¸´æ—¶çš„ç®€å•ç»„åˆæ•°æ®ï¼Œå¹¶ä¸é€‚åˆå¤„ç†å¤æ‚çš„æ•°æ®é€»è¾‘ï¼Œå¯¹å¤æ‚æ•°æ®é€»è¾‘çš„å¤„ç†æ›´æå€¡ä½¿ç”¨ç±»ã€‚ å…­ã€Optionalså€¼Optionalä¹Ÿæ˜¯ä¸€ç§å…·ä½“çš„æ•°æ®ç±»å‹ï¼Œå…¶å¯„é™„ä¸å…¶ä»–æ•°æ®ç±»å‹ä¸Šï¼Œå…¶åªæœ‰ä¸¤ä¸ªå€¼ï¼š 1.å¦‚æœæœ‰å€¼ï¼Œåˆ™å®ƒä¸ºå…·ä½“çš„å€¼ã€‚ 2.å¦‚æœæ²¡æœ‰å€¼ï¼Œåˆ™å®ƒä¸ºnilã€‚ å¯¹äºä¹ æƒ¯äº†Objective-Cè¯­è¨€è®¾è®¡é£æ ¼çš„å¼€å‘è€…æ¥è¯´ï¼ŒOptionalçš„æ¦‚å¿µå¯èƒ½æœ‰äº›éš¾äºç†è§£ï¼Œé€šè¿‡ä¸€ä¸ªä¾‹å­å°±å¾ˆå¥½ç†è§£ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12let tmp = 123let tmp2 = Int(&quot;123&quot;) ä¸Šé¢åˆ›å»ºçš„ä¸¤ä¸ªå¸¸é‡tmpå’Œtmp2è™½ç„¶å€¼éƒ½æ˜¯123ï¼Œç„¶è€Œå…¶å¹¶ä¸æ˜¯ç›¸åŒçš„ç±»å‹ï¼Œtmpæ˜¯ä¸¥æ ¼çš„Intç±»å‹å€¼ï¼Œtmp2æ˜¯åŸºäºIntç±»å‹çš„Optionalå€¼ï¼Œä»–ä»¬åœ¨ä½¿ç”¨æ—¶ï¼ŒOptionalå€¼éœ€è¦ä½¿ç”¨!è¿›è¡Œæ‹†åŒ…æ“ä½œï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123let tmp = 123let tmp2 = Int(&quot;123&quot;)let tmp3 = tmp + tmp2! æœ‰æ—¶å€™ï¼ŒInt()æ„é€ æ–¹æ³•å¹¶ä¸ä¸€å®šèƒ½æ„é€ æˆåŠŸï¼Œè¿™æ—¶tmp2æ˜¯ä¼šä¸ºnilå€¼çš„ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1let tmp2 = Int(&quot;a&quot;) å°†æ™®é€šç±»å‹å£°æ˜ä¸ºOptionalç±»å‹ï¼Œåªéœ€åœ¨ç±»å‹ååæ·»åŠ ?ç¬¦å·å³å¯ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1let optionalValue:Int? = 1 Swiftä¸­çš„nilä¸Objective-Cä¸­çš„nilæ„ä¹‰å¹¶ä¸ç›¸åŒï¼Œåœ¨Objective-Cä¸­ï¼Œnilä»£è¡¨æŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªä¸å­˜åœ¨çš„å¯¹è±¡ï¼ŒSwiftä¸­çš„nilå¹¶ä¸æ˜¯æŒ‡é’ˆï¼Œå®ƒæ˜¯ä¸€ç§æŠ½è±¡ç±»å‹çš„å€¼ï¼Œåœ¨Swiftä¸åªå¯¹è±¡çš„Optionalç±»å‹å¯ä»¥è®¾ç½®ä¸ºnilï¼Œä»»ä½•æ•°æ®ç±»å‹çš„Optionalç±»å‹éƒ½å¯ä»¥è®¾ç½®ä¸ºnilã€‚ Optionalå€¼ç»å¸¸ä¼šå’Œifæ¡ä»¶è¯­å¥ä¸€èµ·ä½¿ç”¨ï¼Œç”¨æ¥åˆ¤æ–­æŸä¸ªå€¼æ˜¯å¦è¢«åˆå§‹åŒ–äº†ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123if optionalValue != nil &#123; print(optionalValue)&#125; Swiftè¿˜æä¾›äº†if letè¯­æ³•è¿›è¡ŒOptionalå€¼å¾—ç»‘å®šï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234//å¦‚æœoptionalValueå€¼ä¸ä¸ºnilï¼Œåˆ™ä¼šå°†æ‹†åŒ…åçš„å€¼èµ‹å€¼ç»™tipif let tip=optionalValue &#123; print(tip)&#125; å¼€å‘è€…è¿˜å¯ä»¥åœ¨ä¸€ä¸ªç»‘å®šè¯­å¥åè¿›è¡Œå¤šä¸ªOptionalå€¼çš„ç»‘å®šï¼Œå¹¶ä½¿ç”¨whereè¿›è¡Œæ¡ä»¶åˆ¤æ–­ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345let optionalValue:Int? = 1let optionalValue2:Int? = 2if let tip=optionalValue,tip2=optionalValue2 where tip&lt;tip2&#123; print(tip,&quot;&lt;&quot;,tip2)&#125; ä¸ƒã€å¼‚å¸¸å¤„ç†Swiftä¸­ä¹Ÿæœ‰ä¸€å¥—ååˆ†å¼ºå¤§çš„å¼‚å¸¸å¤„ç†ç³»ç»Ÿã€‚åœ¨ç¼–å†™å‡½æ•°æ—¶ï¼Œå¦‚æœè¿™ä¸ªå‡½æ•°å¯èƒ½æŠ›å‡ºå¼‚å¸¸ï¼Œåˆ™éœ€è¦åŠ ä¸Šthrowå…³é”®å­—ï¼Œå¹¶ä¸”åœ¨å‡½æ•°ä¸­ä¹Ÿæ˜¯ä½¿ç”¨throwå…³é”®å­—æ¥è¿›è¡Œå¼‚å¸¸çš„æŠ›å‡ºã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627//å¼‚å¸¸çš„æ•è· è‡ªå®šä¹‰çš„å¼‚å¸¸å¿…é¡»ç»§æ‰¿ä¸ErrorTypeç±»enum MyErrorType:ErrorType &#123; case CanNotZero case Other&#125;//å¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„å‡½æ•°func ErrorTest() throws &#123; let a=0; if a==0 &#123; throw MyErrorType.CanNotZero &#125;&#125;//è¿›è¡Œå¼‚å¸¸æ•è·do &#123; //ä½¿ç”¨tryè¿›è¡Œå¯èƒ½æŠ›å¼‚å¸¸å‡½æ•°çš„æ‰§è¡Œ try ErrorTest() //æ²¡æœ‰é”™è¯¯æ‰§è¡Œçš„ä»£ç å— //catchåŠ é”™è¯¯ç±»å‹ ä¸ºæ•è·ç›¸åº”çš„å¼‚å¸¸&#125;catch MyErrorType.Other &#123; //æŠ›å¼‚å¸¸åæ‰§è¡Œçš„ä»£ç å— print(&quot;MyErrorType.Other&quot;)&#125;catch MyErrorType.CanNotZero &#123; print(&quot;MyErrorType.CanNotZero&quot;)&#125;catch&#123; //å¦‚æœä¸å†™æ•è·çš„å¼‚å¸¸ç±»å‹ åˆ™ä¼šæ•è·æ‰€æœ‰å¼‚å¸¸ å¹¶ä¸”ä¼ å…¥ä¸€ä¸ªerrorå¼‚å¸¸å‚æ•° print(error)&#125; å…«ã€æ–­è¨€åœ¨Objective-Cä¸­ï¼Œä½¿ç”¨Assertç›¸å…³çš„å®æ¥è¿›è¡Œæ–­è¨€å¤„ç†ï¼Œåœ¨Swiftä¸­ä¹ŸåŒæ ·æœ‰æ–­è¨€çš„ç›¸å…³æ“ä½œï¼Œæ–­è¨€å¯ä»¥å¸®åŠ©å¼€å‘è€…ä¸ºæŸç§æƒ…å†µæ·»åŠ ä¸€ä¸ªå¼‚å¸¸ä¸­æ–­ï¼Œä¸ºå¼€å‘è€…æä¾›è°ƒè¯•ä¿¡æ¯ã€‚æ–­è¨€ä¼šè¦æ±‚æä¾›ä¸€ä¸ªæ¡ä»¶è¿›è¡Œåˆ¤æ–­ï¼Œå½“æ¡ä»¶ä¸ºçœŸæ—¶ï¼Œç¨‹åºç»§ç»­è¿è¡Œï¼Œå¦‚æœæ¡ä»¶ä¸ºå‡ï¼Œåˆ™ç¨‹åºä¼šæ–­å¼€ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12let age = -3assert(age&gt;0, &quot;age must be bigger than zero&quot;) å®˜æ–¹æ–‡æ¡£ä¸ºå¼€å‘è€…æä¾›äº†å‡ ç§æ–­è¨€ä½¿ç”¨çš„åœºæ™¯ï¼Œå‚è€ƒå¦‚ä¸‹ï¼š 1.å¯¹äºç´¢å¼•è¿‡å°æˆ–è¿‡å¤§çš„æ£€æŸ¥ã€‚ 2.å½“æ— æ•ˆçš„å‚æ•°ä¼ é€’è¿›å‡½æ•°æ—¶ã€‚ 3.å¯¹äºä¸€ä¸ªå¯èƒ½ä¸ºnilçš„å€¼ï¼Œå½“ä¸ºnilæ—¶åç»­ä»£ç æ— æ³•å·¥ä½œæ—¶ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}],"tags":[],"keywords":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}]},{"title":"Swiftè§£è¯»ä¸“é¢˜ä¸€â€”â€”Swift2.2è¯­è¨€é¢„è§ˆ","slug":"201Swiftè§£è¯»ä¸“é¢˜ä¸€â€”â€”Swift2.2è¯­è¨€é¢„è§ˆ","date":"2016-05-04T16:00:00.000Z","updated":"2021-07-08T09:31:16.632Z","comments":true,"path":"2016/05/05/201Swiftè§£è¯»ä¸“é¢˜ä¸€â€”â€”Swift2.2è¯­è¨€é¢„è§ˆ/","link":"","permalink":"http://huishao.cc/2016/05/05/201Swiftè§£è¯»ä¸“é¢˜ä¸€â€”â€”Swift2.2è¯­è¨€é¢„è§ˆ/","excerpt":"","text":"ä¸“é¢˜ä¸€â€”â€”Swift2.2è¯­è¨€é¢„è§ˆä¸€ã€å¼•è¨€æœ¬ç³»åˆ—ä¸“é¢˜æ˜¯æˆ‘é€šè¿‡é˜…è¯»Swift2.2è¯­è¨€å¼€å‘æ–‡æ¡£ï¼Œç¿»è¯‘æ€»ç»“åŠ ä¸Šè‡ªå·±çš„ç†è§£æ•´ç†è€Œæˆã€‚å…¶ä¸­å¤§éƒ¨åˆ†ç»“æ„å’Œå†…å®¹éƒ½æ¥è‡ªå¼€å‘æ–‡æ¡£ï¼Œæœ‰ç–æ¼å’Œé”™è¯¯ä¹‹å¤„ï¼Œè¿˜æœ›æ›´å¤šæœ‹å‹æŒ‡å‡ºï¼Œå…±åŒäº¤æµè¿›æ­¥ï¼Œæˆ‘çš„QQï¼š316045346ã€‚ äºŒã€ä»HelloWorldå¼€å§‹åœ¨å­¦ä¹ å¾ˆå¤šç¼–ç¨‹è¯­è¨€æ—¶ï¼Œéƒ½æ˜¯ä»HelloWorldå…¥é—¨ï¼Œä¸‹é¢ä»£ç å°±æ˜¯ä¸€ä¸ªå®Œæ•´çš„HelloWorldç¨‹åºï¼š 1print(&quot;Hello, World!&quot;) åˆ†æä¸Šé¢ä»£ç ï¼Œå¯ä»¥å‘ç°Swiftè¯­è¨€çš„3ä¸ªååˆ†æ˜æ˜¾çš„ç‰¹ç‚¹ï¼š 1.å¼€å‘è€…ä¸éœ€è¦å¼•å…¥è¾“å…¥è¾“å‡ºç›¸å…³çš„å‡½æ•°åº“ã€‚ 2.åœ¨ç¼–å†™ä»£ç æ—¶ï¼Œä¸éœ€è¦åœ¨è¯­å¥çš„ç»“å°¾å¤„æ·»åŠ åˆ†å·ã€‚ 3.å…¨å±€çš„ä»£ç å°±æ˜¯ç¨‹åºçš„å…¥å£ï¼Œä¸éœ€è¦ç±»ä¼¼Cç³»è¯­è¨€çš„main()æ–¹æ³•æ¥ä½œä¸ºç¨‹åºå…¥å£ã€‚ ä¸‰ã€å¸¸é‡ä¸å˜é‡å¸¸é‡å’Œå˜é‡æ˜¯ç¼–ç¨‹è¯­è¨€ä¸­æœ€åŸºç¡€çš„ä¸¤ç±»æ•°æ®ç±»å‹ï¼Œå¸¸é‡å¯ä»¥ç†è§£ä¸ºä¸ºæŸä¸ªå€¼èµ·ä¸€ä¸ªç‰¹å®šçš„åå­—ï¼Œå¸¸é‡é€šå¸¸æä¾›ç»™å¼€å‘è€…ç”¨äºæŸäº›åªèµ‹å€¼ä¸€æ¬¡ä½†å´åœ¨ç¨‹åºä¸­å¤šå¤„ä½¿ç”¨çš„é‡å€¼ã€‚å˜é‡ä¹Ÿå¯ä»¥è¿›è¡Œå¤šæ¬¡ä¿®æ”¹ã€‚åˆ†åˆ«ä½¿ç”¨letå’Œvaråˆ›å»ºå¸¸é‡å’Œå˜é‡ã€‚ä¾‹å¦‚ï¼š 123let letValue = 4var varValue = 8varValue = 16 å¼€å‘è€…åœ¨è¿›è¡Œå¸¸é‡å’Œå˜é‡çš„åˆ›å»ºæ—¶ï¼Œå¹¶ä¸éœ€è¦åˆ¶å®šç±»å‹ï¼Œç¼–è¯‘å™¨ä¸æ ¹æ®ç¬¬ä¸€æ¬¡èµ‹å€¼çš„ç±»å‹æ¥æ¨æ–­å‡ºå¸¸é‡æˆ–è€…å˜é‡çš„ç±»å‹ï¼Œç„¶è€Œè¿™å¹¶ä¸æ˜¯è¯´Swiftè¯­è¨€ä¸ä¸¥æ ¼è¦æ±‚å˜é‡æˆ–å¸¸é‡çš„ç±»å‹ï¼Œä¸€æ—¦ç¼–è¯‘å™¨æ¨æ–­äº†å€¼çš„ç±»å‹ï¼Œä¹‹åå¼€å‘è€…è‹¥è¦ä¿®æ”¹å˜é‡ï¼Œåˆ™å¿…é¡»ä¸¥æ ¼éµå®ˆæ—¢å®šçš„å˜é‡ç±»å‹ï¼Œå¦åˆ™ç¼–è¯‘å™¨ä¼šæŠ¥é”™ã€‚ å¦‚æœå¼€å‘è€…ç¬¬ä¸€æ¬¡å¯¹å˜é‡æˆ–å¸¸é‡è¿›è¡Œçš„èµ‹å€¼ä¸èƒ½å¤Ÿä½¿ç¼–è¯‘å™¨æ­£ç¡®çš„æ¨æ–­å‡ºå¸¸é‡æˆ–å˜é‡çš„ç±»å‹ï¼Œå¼€å‘è€…ä¹Ÿå¯ä»¥é€šè¿‡å†’å·åè·Ÿç±»å‹çš„æ–¹å¼æ¥å¼ºåˆ¶å®šä¹‰å˜é‡æˆ–å¸¸é‡çš„ç±»å‹ï¼Œå¦‚ä¸‹ï¼š 12var varValue:Float = 8varValue = 16.0 åœ¨Swiftè¯­è¨€ä¸­ï¼Œä¸å­˜åœ¨éšå¼è½¬æ¢çš„æ¦‚å¿µï¼Œè¿™ä¹Ÿæ˜¯Swiftè¯­è¨€æ›´åŠ å®‰å…¨çš„ç‰¹æ€§ä¹‹ä¸€ï¼Œè¿™æ ·çš„è®¾è®¡å¯ä»¥ä¿è¯å˜é‡åœ¨ä»»ä½•æ—¶å€™ç±»å‹éƒ½è¢«æ˜ç¡®çš„æŒ‡å®šã€‚åœ¨è¿›è¡Œç±»å‹è½¬æ¢æ—¶ï¼Œå¯ä»¥é€šè¿‡ç±»å®ä¾‹åŒ–çš„æ–¹å¼è¿›è¡Œï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234//Floatå€¼è½¬æˆIntletValue+Int(varValue)//Intè½¬ä¸ºFloatFloat(letValue)+varValue å¯¹äºåœ¨å­—ç¬¦ä¸²ä¸­ä½¿ç”¨å…¶ä»–ç±»å‹çš„å˜é‡ï¼ŒSwiftè¯­è¨€æä¾›äº†ä¸€ç§æ›´åŠ ä¾¿æ·çš„å†™æ³•ï¼Œä½¿ç”¨\\()çš„æ–¹å¼æ¥è½¬æ¢ï¼Œå°æ‹¬å·å†…ä¸ºå˜é‡çš„åç§°ï¼Œä¾‹å¦‚ï¼š 123var strValue = &quot;Hello&quot;//Hello16.0strValue+&quot;\\(varValue)&quot; å››ã€æ•°ç»„ä¸å­—å…¸æ•°ç»„ä¸å­—å…¸æ˜¯æœ€å¸¸ç”¨çš„ä¸¤ç§æ•°æ®é›†åˆï¼Œåœ¨Swiftè¯­è¨€ä¸­ï¼Œä½¿ç”¨\\[\\]æ¥åˆ›å»ºæ•°ç»„æˆ–å­—å…¸ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12var array = [1,2,3]var dic = [1:&quot;one&quot;,2:&quot;two&quot;,3:&quot;three&quot;] åŒIntï¼ŒFloatç±»å‹çš„æ•°æ®ä¸€æ ·ï¼Œæ•°ç»„å’Œå­—å…¸åœ¨ç¬¬ä¸€æ¬¡èµ‹å€¼æ—¶ï¼Œä¹Ÿä¼šæ ¹æ®èµ‹å€¼çš„ç±»å‹æ¥æ¨æ–­å‡ºå˜é‡ç±»å‹ï¼Œå¼€å‘è€…åŒæ ·ä¹Ÿå¯ä»¥å¼ºåˆ¶æŒ‡å®šï¼Œå¦‚ä¸‹ï¼š 12var array:[Int] = [1,2,3]var dic:[Int:String] = [1:&quot;one&quot;,2:&quot;two&quot;,3:&quot;three&quot;] Swiftå…è®¸åˆ›å»ºæˆ–è€…é‡æ–°èµ‹å€¼ä¸ºç©ºçš„æ•°æ®æˆ–è€…å­—å…¸ï¼Œä½†æ˜¯è¿™æœ‰ä¸€ä¸ªå‰ææ¡ä»¶ï¼Œè¢«èµ‹å€¼ä¸ºç©ºçš„æ•°æ®æˆ–å­—å…¸å¿…é¡»æ˜¯ç±»å‹ç¡®å®šçš„ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314//è¿™æ ·å†™ä¼šæŠ¥é”™//var errorArray = []//åˆ›å»ºç©ºçš„æ•°æ®é›†åˆ//æ–¹å¼ä¸€var array:[Int] = []var dic:[Int:String] = [:]//æ–¹å¼äºŒvar array2 = [Int]()var dic2 = [Int:String]()//æ–¹å¼ä¸‰var array3 = [1]var dic3 = [1:&quot;1&quot;]array3 = []dic3 = [:] äº”ã€optionalç±»å‹çš„å€¼åœ¨ç†è§£optionalç±»å‹çš„å€¼ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆæ¥çœ‹ä¸€æ®µCä»£ç ï¼š 123456int a=1;if(a)&#123; &#125;else&#123; &#125; ä¸Šé¢è¿™æ®µä»£ç å¯¹äºCè¯­è¨€æ¥è¯´å®Œå…¨æ²¡æœ‰é—®é¢˜ï¼Œå½“aä¸ºé0å€¼æ—¶ï¼Œå°±ä»£è¡¨æ¡ä»¶ä¸ºçœŸï¼Œåœ¨Swiftè¯­è¨€ä¸­åˆ™ä¸åŒï¼Œifé€‰æ‹©è¯­å¥ä¸­çš„æ¡ä»¶å¿…é¡»ä¸ºBoolç±»å‹çš„å€¼ï¼Œå› æ­¤ï¼Œå¯¹äºæŸäº›å¯ä»¥ä¸ºç©ºçš„å€¼ï¼ŒSwiftä¸­æä¾›äº†optionalç±»å‹ï¼Œè¿™ç§ç±»å‹ç›¸å½“äºå¯¹å…¶ä»–å®é™…ç±»å‹è¿›è¡Œäº†åŒ…è£…ï¼Œå¦‚æœæœ‰å€¼ï¼Œåˆ™ä»–æ‹†åŒ…åä¸ºç›¸åº”ç±»å‹çš„å€¼ï¼Œå¦‚æœæ²¡æœ‰å€¼ï¼Œåˆ™ä¸ºç©ºå€¼nilã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š 1234var optionalString: String? = &quot;Hello&quot;if optionalString == nil &#123; &#125; åœ¨Swiftä¸­ï¼Œå½“ifä¸letå…±åŒä½¿ç”¨æ—¶ï¼Œå°†ä¼šæ„æˆä¸€ç§æ›´åŠ å¥‡ç‰¹çš„è¯­æ³•æ–¹å¼ï¼Œè¿™ç§æ–¹å¼å¯¹äºå¤„ç†optionalç±»å‹çš„å€¼ååˆ†æ–¹ä¾¿ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910/* if let åé¢èµ‹å€¼ä¸ºoptionalç±»å‹çš„å€¼æœ‰è¿™æ ·çš„æ•ˆæœ å¦‚æœoptionalçš„å€¼ä¸ä¸ºnil åˆ™ä¼šèµ°ifæ¡ä»¶ä¸ºçœŸçš„è¯­å¥å—å¹¶ä¸”å°†optionalå˜é‡çš„å€¼èµ‹å€¼ç»™letå¸¸é‡ å¯ä»¥åœ¨ifä¸ºçœŸçš„è¯­å¥å—ä¸­ä½¿ç”¨ å¦‚æœoptionalçš„å€¼ä¸ºnil åˆ™ä¼šèµ°elseè¯­å¥å— å¹¶ä¸”nameå¸¸é‡è¢«é‡Šæ”¾ ä¸èƒ½å†elseå—ä¸­ä½¿ç”¨*/if let name=optionalName &#123; greeting = &quot;Hello, \\(name)&quot;&#125;else&#123; print(greeting)&#125; é™¤äº†if letè¯­æ³•å¤–ï¼Œè¿˜æœ‰ä¸€ç§æ–¹å¼å¯ä»¥ç”¨æ¥å¤„ç†optionalç±»å‹çš„å€¼ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12var greeting = &quot;Hello!&quot;greeting = &quot;Hello&quot; + (optionalString ?? &quot;&quot;) ??è¿ç®—ç¬¦ç”¨æ¥ä¸ºoptionalç±»å‹çš„å€¼è®¾ç½®ä¸€ä¸ªé»˜è®¤å€¼ï¼Œå¦‚æœoptionalå€¼ä¸ºnilï¼Œåˆ™ä¼šä½¿ç”¨åé¢è®¾ç½®çš„é»˜è®¤å€¼æ¥ä»£æ›¿ã€‚ Swiftè¯­è¨€çš„switchè¯­å¥ç›¸æ¯”äºCç³»çš„è¯­è¨€è¦å¼ºå¤§çš„å¤šï¼Œå…¶ä¸åªå¯ä»¥ç”¨äºåˆ¤æ–­æ•´å‹ï¼Œå…¶å¯ä»¥å¤„ç†ä»»æ„ç±»å‹çš„æ•°æ®ï¼ŒåŒæ ·ï¼Œå®ƒä¹Ÿä¸åªé™äºæ¯”è¾ƒæ˜¯å¦ç›¸ç­‰çš„è¿ç®—ï¼Œå…¶å¯ä»¥æ”¯æŒå„ç§è´Ÿè´£è¿ç®—ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011let vegetable = &quot;red pepper&quot;switch vegetable &#123;case &quot;celery&quot;: print(&quot;Add some raisins and make ants on a log.&quot;)case &quot;cucumber&quot;, &quot;watercress&quot;: print(&quot;That would make a good tea sandwich.&quot;)case let x where x.hasSuffix(&quot;pepper&quot;): print(&quot;Is it a spicy \\(x)?&quot;)default: print(&quot;Everything tastes good in soup.&quot;)&#125; å¦‚æœåŒ¹é…ä¸Šäº†ä¸€ä¸ªcaseï¼Œç¨‹åºä¼šç»“æŸswitché€‰æ‹©ï¼Œå„ä¸ªcaseä¹‹é—´æ˜¯äº’æ–¥çš„ã€‚ å…­ã€å¾ªç¯è¯­å¥Swift2.2ä¸­ï¼Œå¼ƒç”¨äº†for iï¼›param;param{}æ ¼å¼çš„å¾ªç¯è¯­å¥ï¼Œæä¾›ç»™å¼€å‘è€…ä½¿ç”¨çš„å¾ªç¯è¯­å¥ä¸»è¦æœ‰3ç§ã€‚ 1.for inè¯­å¥ for inè¯­å¥å¤šç”¨äºå¿«é€Ÿéå†å­—å…¸ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415let interestingNumbers = [ &quot;Prime&quot;: [2, 3, 5, 7, 11, 13], &quot;Fibonacci&quot;: [1, 1, 2, 3, 5, 8], &quot;Square&quot;: [1, 4, 9, 16, 25],]var largest = 0for (kind, numbers) in interestingNumbers &#123; for number in numbers &#123; //æ‰¾å‡ºæœ€å¤§å€¼ if number &gt; largest &#123; largest = number &#125; &#125;&#125;print(largest) åœ¨for inå¾ªç¯ä¸­å¯ä»¥ä½¿ç”¨ä¸€ä¸ªç´¢å¼•æ¥æŒ‡å®šå¾ªç¯æ¬¡æ•°ï¼Œé€šè¿‡è¿™ç§æ–¹å¼å¯ä»¥å®ç°æœ‰åºçš„éå†æ“ä½œï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123for i in 0..&lt;10 &#123; print(i)&#125; 2.whileè¯­å¥ whileè¯­å¥ç”¨äºæ¡ä»¶å¾ªç¯ï¼Œç›´åˆ°ä¸å†æ»¡è¶³æŸä¸ªæ¡ä»¶ä¸ºæ­¢ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345var n = 2while n &lt; 100 &#123; n = n * 2&#125;print(n) 3.repeat {}whileè¯­å¥ repeat{}whileè¯­å¥ä¸Cè¯­è¨€ä¸­çš„do{}whileä½œç”¨ç›¸åŒï¼Œä¿è¯è‡³å°‘å¾ªç¯ä¸€æ¬¡ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š 12345var m = 2repeat &#123; m = m * 2&#125; while m &lt; 100print(m) ä¸ƒã€å‡½æ•°ä¸é—­åŒ…Swiftä¸­çš„å‡½æ•°ä½¿ç”¨å…³é”®å­—funcæ¥æ ‡è¯†ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š func name(param1,param2â€¦)-&gt;returnValue{} ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345func add(param1:Int,param2:Int) -&gt; Int &#123; return param1+param2&#125;//ä¸‹é¢è¡¨è¾¾å¼å°†è¿”å›8add(5, param2: 3) æˆ‘æ¯”è¾ƒäº†Swiftè¯­è¨€ä¸Objective-Cã€Javaè¯­è¨€çš„å‡½æ•°ç‰¹ç‚¹ï¼š Objective-Cå®é™…ä¸Šå¹¶æ²¡æœ‰å‡½æ•°é‡è½½çš„æ¦‚å¿µï¼Œä¸åŒå‚æ•°çš„å‡½æ•°å®é™…ä¸Šæ‹¥æœ‰ä¸åŒçš„å‡½æ•°åï¼ŒObjective-Cçš„é£æ ¼å°†å‚æ•°ååµŒå¥—è¿›å‡½æ•°åä¸­ï¼Œè¿™æ ·æœ‰ä¸€ä¸ªå¥½å¤„ï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡å‡½æ•°åæ˜ç¡®çš„çŸ¥é“æ­¤å‡½æ•°çš„ç”¨é€”ä»¥åŠæ¯ä¸ªå‚æ•°çš„æ„ä¹‰ï¼Œå½“ç„¶ä¹Ÿæœ‰å…¶å±€é™æ€§ï¼ŒObjective-Cçš„å‡½æ•°å¤§å¤šååˆ†å†—é•¿ï¼Œä¸å¤Ÿç®€æ´ã€‚ Javaä¸åŒå‚çš„å‡½æ•°é‡‡ç”¨é‡è½½çš„æ–¹å¼ï¼Œè¿™æ ·çš„æ•ˆæœæ˜¯ï¼Œç›¸åŒçš„å‡½æ•°åï¼Œå‚å…¥ä¸åŒçš„å‚æ•°åˆ™ä¼šæ‰§è¡Œä¸åŒçš„æ“ä½œï¼Œæ˜¯ä¸åŒçš„ä¸¤ä¸ªæ–¹æ³•ï¼Œè¿™æ ·çš„æœ‰ç‚¹æ˜¯ä½¿ä»£ç ååˆ†ç®€æ´ï¼Œç„¶è€Œå¯¹å¼€å‘è€…æ¥è¯´å¹¶ä¸å‹å¥½ï¼Œå¼€å‘è€…åœ¨å¼€å‘æ—¶ä¸èƒ½ä¾¿æ·çš„çœ‹å‡ºæ¯ä¸ªå‚æ•°çš„æ„ä¹‰å’Œç”¨æ³•ã€‚ ä¸ªäººè§è§£ï¼ŒSwiftå¯¹å‡½æ•°çš„è®¾è®¡ç»¼åˆäº†ä¸Šé¢ä¸¤ç§è¯­è¨€çš„æœ‰äº‹ï¼Œå‚æ•°åˆ—è¡¨ä¸å‡½æ•°ååˆ†ç¦»ï¼Œç®€åŒ–äº†å‡½æ•°ï¼ŒåŒæ—¶ï¼Œå‚æ•°åˆ—è¡¨ä¸­ä¿ç•™äº†æ¯ä¸ªå‚æ•°çš„åç§°ï¼Œä½¿å¼€å‘è€…åœ¨è°ƒç”¨å‡½æ•°æ—¶æ›´åŠ ç›´è§‚ã€‚ åœ¨Objective-Cä¸­ï¼Œå¦‚æœéœ€è¦æŸä¸ªå‡½æ•°è¿”å›ä¸€ç»„å€¼ï¼Œå¼€å‘è€…é€šå¸¸ä¼šéœ€è¦ä½¿ç”¨å­—å…¸æˆ–è€…æ•°ç»„ï¼Œè¿™æ ·åšæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œåœ¨è°ƒç”¨æ­¤å‡½æ•°æ—¶ï¼Œè¿”å›å€¼çš„æ„ä¹‰ååˆ†æ¨¡ç³Šï¼Œå¼€å‘è€…éœ€è¦æ˜ç¡®çš„çŸ¥é“å…¶ä¸­æ•°æ®çš„é¡ºåºä¸æ„ä¹‰ã€‚Swiftä¸­å¯ä»¥é‡‡ç”¨è¿”å›å…ƒç»„çš„æ–¹å¼æ¥å¤„ç†ä¸€ç»„è¿”å›å€¼ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223//è¿”å›ä¸€ç»„æ•°æ®çš„å‡½æ•°func calculateStatistics(scores: [Int]) -&gt; (min: Int, max: Int, sum: Int) &#123; var min = scores[0] var max = scores[0] var sum = 0 for score in scores &#123; if score &gt; max &#123; max = score &#125; else if score &lt; min &#123; min = score &#125; sum += score &#125; return (min, max, sum)&#125;//å…ƒç»„æ•°æ®let statistics = calculateStatistics([5, 3, 100, 3, 9])//é€šè¿‡åç§°å–å…ƒç»„ä¸­çš„æœ€å¤§å€¼print(statistics.max)//é€šè¿‡è§’æ ‡å–å…ƒç»„ä¸­çš„æœ€å°å€¼print(statistics.0) å¯¹äºå¯å˜å‚æ•°ä¸ªæ•°çš„å‡½æ•°ï¼Œåœ¨Objective-Cä¸­ï¼Œå¼€å‘è€…å¤§å¤šä¼šé‡‡ç”¨va_listæŒ‡é’ˆçš„æ–¹å¼å®ç°ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910-(void)myLog:(NSString *)str,...&#123;//çœç•¥å‚æ•°çš„å†™æ³• va_list list;//åˆ›å»ºä¸€ä¸ªåˆ—è¡¨æŒ‡é’ˆå¯¹è±¡ va_start(list, str);//è¿›è¡Œåˆ—è¡¨çš„åˆå§‹åŒ–ï¼Œsträ¸ºçœç•¥å‰çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼ŒåŠ...ä¹‹å‰çš„é‚£ä¸ªå‚æ•° NSString * temStr = str; while (temStr!=nil) &#123;//å¦‚æœä¸æ˜¯nilï¼Œåˆ™ç»§ç»­å–å€¼ NSLog(@&quot;%@&quot;,temStr); temStr = va_arg(list, NSString*);//è¿”å›å–åˆ°çš„å€¼ï¼Œå¹¶ä¸”è®©æŒ‡é’ˆæŒ‡å‘ä¸‹ä¸€ä¸ªå‚æ•°çš„åœ°å€ &#125; va_end(list);//å…³é—­åˆ—è¡¨æŒ‡é’ˆ&#125; åœ¨Swiftè¯­è¨€ä¸­ï¼Œå®ç°è¿™æ ·çš„å‡½æ•°è¦ç®€å•çš„å¤šï¼Œé€šè¿‡â€¦æ¥è¿›è¡Œå‚æ•°çš„çœç•¥ï¼Œå¹¶ä¸”å°†è¿™äº›çœç•¥çš„å‡½æ•°åŒ…è£…ä¸ºæ•°ç»„ä¼ å…¥å‡½æ•°å†…éƒ¨ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910func sumOf(numbers: Int...) -&gt; Int &#123; var sum = 0 //å¤šå‚è¢«åŒ…è£…ä¸ºæ•°ç»„ for number in numbers &#123; sum += number &#125; return sum&#125;sumOf()sumOf(42, 597, 12) ä¸Javaç±»ä¼¼ï¼ŒSwiftä¸­çš„å‡½æ•°ä¹Ÿæ”¯æŒåµŒå¥—æ“ä½œï¼ŒåµŒå¥—å†…éƒ¨çš„å‡½æ•°å¯ä»¥ä½¿ç”¨å¤–éƒ¨çš„å˜é‡ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011func returnFifteen() -&gt; Int &#123; var y = 10 //åµŒå¥—å‡½æ•° func add() &#123; y += 5 &#125; //è°ƒç”¨ add() return y&#125;returnFifteen() ç”±äºå‡½æ•°ä¹Ÿæ˜¯ä¸€ç§ç‰¹æ®Šçš„æ•°æ®ç±»å‹ï¼Œå‡½æ•°ä¹Ÿå¯ä»¥ä½œä¸ºè¿”å›å€¼ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678func makeIncrementer() -&gt; ((Int) -&gt; Int) &#123; func addOne(number: Int) -&gt; Int &#123; return 1 + number &#125; return addOne&#125;var increment:((Int)-&gt;Int) = makeIncrementer()increment(7) ä¸€ä¸ªå‡½æ•°ä¹Ÿå¯ä»¥ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„å‚æ•°æ¥ä½¿ç”¨ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789//å‚æ•°ä¸­æœ‰å‡½æ•°func func1(param1:Int,param2:(count:Int)-&gt;Void) &#123; param2(count: param1+1)&#125;func tmpFunc(count:Int) -&gt; Void &#123; print(count)&#125;//å°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ å…¥func1(3, param2: tmpFunc) ä¸Objective-Cä¸­çš„blockå¯¹åº”ï¼ŒSwiftä¸­æœ‰é—­åŒ…çš„æ¦‚å¿µæ¥åˆ›å»ºä¸€ä¸ªä»£ç å—ï¼Œå¯ä»¥ç†è§£ä¸ºé—­åŒ…ä¸ºæ²¡æœ‰åå­—çš„å‡½æ•°ï¼Œä½¿ç”¨{()in }æ ¼å¼æ¥åˆ›å»ºé—­åŒ…ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12var f:(count:Int)-&gt;Void = &#123;(Count) in print(132) &#125;f(count:0) é€šè¿‡è¿™ç§å†™æ³•ï¼Œå¼€å‘è€…åœ¨å°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’æ—¶ï¼Œæ— éœ€å†åˆ›å»ºä¸­é—´å‡½æ•°ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789//å‚æ•°ä¸­æœ‰å‡½æ•°func func1(param1:Int,param2:(count:Int)-&gt;Void,param3:(count:Int)-&gt;Void) &#123; param2(count: param1+1)&#125;func1(3, param2: &#123; (count) in print(count) &#125;, param3: &#123; (count) in print(count)&#125;) è¿˜æœ‰ä¸€ç§æ›´åŠ ç®€å•çš„é—­åŒ…ä¹¦å†™æ–¹æ³•ï¼Œå¦‚æœé—­åŒ…ç±»å‹æ˜¯ç¡®å®šçš„ï¼Œå…¨å®Œå¯ä»¥çœç•¥å°æ‹¬å·ä¸­çš„å‚æ•°åç§°ä¸é—­åŒ…æ ¼å¼inï¼Œä½¿ç”¨è§’æ ‡æ¥è·å–å‚æ•°ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456//ä¼˜åŒ–å‰var f:(a:Int,b:Int)-&gt;Bool = &#123;(a,b) in return a&gt;b&#125;f(a: 3,b: 4)//ä¼˜åŒ–åvar f:(a:Int,b:Int)-&gt;Bool = &#123;$0&gt;$1&#125;f(a: 3,b: 4) å…«ã€ç±»ä¸å±æ€§Swiftä¸­ä½¿ç”¨classå…³é”®å­—æ¥å®šä¹‰ç±»ï¼Œç±»å†…éƒ¨å¯ä»¥å£°æ˜ä¸å®šä¹‰ä¸€äº›å±æ€§ä¸æ–¹æ³•ï¼Œç±»çš„å®ä¾‹å¯¹è±¡å¯ä»¥é€šè¿‡ç‚¹è¯­æ³•æ¥è°ƒç”¨ç±»çš„å±æ€§å’Œæ–¹æ³•ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011class MyClass &#123; var count = 100 let name = &quot;ç²å°‘&quot; func run() &#123; print(&quot;run 100 miter&quot;) &#125;&#125;var obj = MyClass()let count = obj.countlet name = obj.nameobj.run() ç±»ååŠ æ‹¬å·ç”¨äºåˆ›å»ºç±»çš„å®ä¾‹å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡é‡å†™initæ–¹æ³•æ¥é‡å†™ç±»çš„é»˜è®¤æ„é€ æ–¹æ³•ï¼Œå¦‚æœè¿™ä¸ªç±»æœ‰ç»§æ‰¿çš„çˆ¶ç±»ï¼Œåˆ™éœ€è¦éµå®ˆå¦‚ä¸‹3æ¡è§„åˆ™ï¼š 1.å¿…é¡»å…ˆå°†å­ç±»çš„å±æ€§åˆå§‹åŒ–å®Œæˆã€‚ 2.è°ƒç”¨çˆ¶ç±»çš„æ„é€ æ–¹æ³•ã€‚ 3.ä¿®æ”¹çˆ¶ç±»éœ€è¦ä¿®æ”¹çš„å±æ€§ã€‚ åœ¨Swiftä¸­åŒæ ·ä¹Ÿæœ‰setå’Œgetæ–¹æ³•ï¼Œåªæ˜¯è¿™é‡Œçš„setå’Œgetæ–¹æ³•ä¸Objective-Cä¸­çš„setå’Œgetæ–¹æ³•æœ‰å¾ˆå¤§çš„ä¸åŒï¼ŒObjective-Cä¸­çš„getå’Œsetæ–¹æ³•æ˜¯æˆªè·äº†å±æ€§å’Œå­˜å–è¿‡ç¨‹ï¼Œåœ¨å…¶ä¸­åŠ å…¥é¢å¤–çš„å…¶ä»–æ“ä½œï¼ŒSwiftä¸­çš„setå’Œgetæ–¹æ³•åŸç†ä¸Šå°†å±æ€§çš„å­˜å–ä¸å…¶ä»–é€»è¾‘æ“ä½œè¿›è¡Œäº†åˆ†ç¦»ï¼ŒæŠ½è±¡å‡ºäº†ä¸€ç§è®¡ç®—å±æ€§ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516171819class MyClass &#123; var count:Int //å®é™…ä¸Šå¹¶ä¸å­˜åœ¨privateCountå±æ€§ é€šè¿‡pricatecountæ¥æ“ä½œcountçš„å€¼ var privateCount:Int&#123; get&#123; return count; &#125; set &#123; count=newValue+100 &#125; &#125; let name = &quot;ç²å°‘&quot; func run() &#123; print(&quot;run 100 miter&quot;) &#125; init()&#123; count=200 &#125;&#125; Swifté‡‡ç”¨è¿™æ ·çš„è®¾è®¡æ€è·¯ä¹Ÿæœ‰å…¶ä¸€å®šçš„ä¼˜åŒ–é“ç†ï¼Œæˆ‘æ¯”è¾ƒäº†ä¸€ä¸‹ï¼Œç»™å¤§å®¶ä¸¾ä¸€ä¸ªæœ€ç®€å•çš„ä¾‹å­ï¼Œåœ¨ä½¿ç”¨Objective-Cè¿›è¡ŒiOSå¼€å‘æ—¶ï¼Œç»å¸¸ä¼šé‡åˆ°è¿™æ ·çš„æƒ…å†µï¼ŒæŸä¸ªæ§ä»¶ä¸­æœ‰ä¸€ä¸ªUILabelæ§ä»¶ï¼Œå¼€å‘è€…åœ¨ä¸æƒ³å°†æ§ä»¶æš´æ¼åœ¨.hæ–‡ä»¶ä¸­çš„æƒ…å†µä¸‹ç»å¸¸ä¼šå£°æ˜ä¸€ä¸ªNSStringç±»å‹çš„å˜é‡ï¼Œé‡å†™æ­¤å˜é‡çš„setæ–¹æ³•æ¥å®Œæˆå¯¹UILabelæ§ä»¶çš„èµ‹å€¼ï¼Œä»”ç»†æƒ³æ¥ï¼Œå®é™…ä¸Šå£°æ˜çš„è¿™ä¸ªNSStringå˜é‡å®Œå…¨æ˜¯å¤šä½™çš„ï¼Œå®ƒåªæ˜¯ä¸ºäº†ç”¨æ¥åšä¸­é—´å€¼å¾—ä¼ é€’ï¼ŒSwiftçš„setå’Œgetæ–¹æ³•å°±åœ¨è¿™é‡Œè¿›è¡Œäº†ä¼˜åŒ–ã€‚å¦å¤–ï¼Œåœ¨setæ–¹æ³•ä¸­ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªå‘½åä¸ºnewValueçš„å˜é‡ä½œä¸ºä¼ é€’è¿›æ¥çš„å€¼ï¼Œå¼€å‘è€…ä¹Ÿå¯ä»¥è‡ªå®šä¹‰è¿™ä¸ªå˜é‡çš„åç§°ï¼Œåœ¨setååŠ å°æ‹¬å·å³å¯ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678var privateCount:Int&#123; get&#123; return count; &#125; set(myValue) &#123; count=myValue+100 &#125; &#125; Swiftä¸­ä¹Ÿæä¾›äº†ç›‘å¬å±æ€§èµ‹å€¼è¿‡ç¨‹çš„æ–¹æ³•ï¼Œå…¶ä½¿ç”¨çš„æ˜¯willSetä¸didSetæœºåˆ¶ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516171819class MyClass &#123; var count:Int&#123; //èµ‹å€¼å‰æ‰§è¡Œ(é™¤äº†ç¬¬ä¸€æ¬¡åˆå§‹èµ‹å€¼) å°†è¦èµ‹å€¼çš„å€¼ä»¥newValueä¼ å…¥ willSet&#123; print(&quot;will set \\(newValue)&quot;) &#125; //èµ‹å€¼åæ‰§è¡Œ(é™¤äº†ç¬¬ä¸€æ¬¡åˆå§‹èµ‹å€¼) åŸæ¥çš„å€¼ä»¥oldValueä¼ å…¥ didSet&#123; print(&quot;did set \\(oldValue)&quot;) &#125; &#125; let name = &quot;ç²å°‘&quot; func run() &#123; print(&quot;run 100 miter&quot;) &#125; init()&#123; count=200 &#125;&#125; ä¹ã€æšä¸¾å’Œç»“æ„ä½“Swiftä¸­çš„æšä¸¾å’ŒCä¸Objective-Cæœ‰å¾ˆå¤§çš„å·®åˆ«ï¼Œåœ¨Swiftä¸­ï¼Œæšä¸¾ä¹Ÿè¢«ä½œä¸ºä¸€ç§æ•°æ®ç±»å‹æ¥å¤„ç†ï¼Œå…¶ä¸­å¯ä»¥æ·»åŠ å‡½æ•°æ–¹æ³•ã€‚æœ€åŸºæœ¬çš„æšä¸¾ç”¨æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š 12345678//æšä¸¾å¯ä»¥å¤šä¸ªcaseå¹¶åˆ— ä¹Ÿå¯ä»¥å†™åœ¨ä¸€ä¸ªcaseä¸­ä»¥é€—å·åˆ†éš”enum MyEnum &#123; case one case tew case three case Fir,Sec,Thr&#125;var em = MyEnum.one å¦‚æœå˜é‡æ˜¯ç±»å‹ç¡®å®šçš„æšä¸¾ï¼Œåœ¨èµ‹å€¼æ—¶å¯ä»¥çœç•¥æšä¸¾åï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1var em:MyEnum = .one Swiftä¸­çš„æšä¸¾è¿˜æœ‰ä¸€ä¸ªåŸå§‹å€¼çš„æ¦‚å¿µï¼Œè¦ä½¿ç”¨åŸå§‹å€¼ï¼Œå¿…é¡»åœ¨åˆ›å»ºæšä¸¾ç±»å‹æ—¶è®¾ç½®åŸå§‹å€¼çš„ç±»å‹ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567enum MyEnum:Int &#123; case one=1 case tew case three case Fir,Sec,Thr&#125;var em = MyEnum.one.rawValue å¦‚æœåŸå§‹å€¼æ˜¯Intç±»å‹ï¼Œåˆ™é»˜è®¤ä»0å¼€å§‹ä¾æ¬¡é€’å¢ï¼Œå¼€å‘è€…ä¹Ÿå¯ä»¥æ‰‹åŠ¨è®¾ç½®æ¯ä¸ªæšä¸¾å€¼çš„åŸå§‹å€¼ã€‚åŒæ ·ï¼Œä¹Ÿæ”¯æŒä½¿ç”¨åŸå§‹å€¼æ¥åˆ›å»ºæšä¸¾å®ä¾‹ï¼Œå¦‚ä¸‹ï¼š 1var em = MyEnum(rawValue:1) é€šè¿‡åŸå§‹å€¼å®ä¾‹çš„æšä¸¾å¯¹è±¡å®é™…ä¸Šå›è¿”å›ä¸€ä¸ªoptionalç±»å‹çš„å€¼ï¼Œå¦‚æœä¼ å…¥çš„åŸå§‹å€¼å‚æ•°ä¸èƒ½åŒ¹é…åˆ°ä»»ä½•ä¸€ä¸ªæšä¸¾caseï¼Œåˆ™å¯ä»¥ä½¿ç”¨if letç»“æ„è¿›è¡Œåˆ¤æ–­å¤„ç†ã€‚ åœ¨æšä¸¾ä¸­å°è£…æ–¹æ³•ç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516enum MyEnum:Int &#123; case one case tew case three case Fir,Sec,Thr func des() &#123; switch self &#123; case .one: print(&quot;one&quot;) default: print(&quot;else&quot;) &#125; &#125;&#125;var em = MyEnum(rawValue:1)em?.des() Swiftä¸­çš„æšä¸¾ä¹Ÿå¯ä»¥æ·»åŠ é™„åŠ å€¼ï¼Œåœ¨switchè¯­å¥ä¸­å–åˆ°å¯¹åº”çš„æšä¸¾ç±»å‹åï¼Œå¯ä»¥è·å–å¼€å‘è€…è®¾ç½®çš„é™„åŠ å€¼è¿›è¡Œé€»è¾‘å¤„ç†ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223enum MyEnum &#123;//ä¸ºè¿™ä¸ªç±»å‹å¤©å•ŠåŠä¸€ç»„é™„åŠ å€¼ case one(String,Int) case tew case three case Fir,Sec,Thr func des() &#123; switch self &#123; case .one: print(&quot;one&quot;) default: print(&quot;else&quot;) &#125; &#125;&#125;var em = MyEnum.one(&quot;ç¬¬ä¸€ä¸ªå…ƒç´ &quot;, 1)switch em &#123;//å‰é¢çš„letæŒ‡å®šé™„åŠ å€¼ä¸ºå¸¸é‡ æˆ–è€…ç”¨varæŒ‡å®šä¸ºå˜é‡ï¼Œæ‹¬å·å†…ä¸ºé™„åŠ å€¼å‚æ•°åcase let .one(param1, param2): print(&quot;One param is \\(param1) and two param is \\(param2).&quot;)default: print(&quot;else&quot;)&#125; Swiftä¸­ä½¿ç”¨structå…³é”®å­—æ¥è¿›è¡Œç»“æ„ä½“çš„åˆ›å»ºï¼Œç»“æ„ä½“çš„åŠŸèƒ½å’Œç±»ç›¸ä¼¼ï¼Œæ”¯æŒå±æ€§ä¸æ–¹æ³•ï¼Œä½†ä¸åŒçš„æ˜¯ï¼Œç»“æ„ä½“åœ¨ä¼ é€’æ—¶ä¼šè¢«èµ‹å€¼ï¼Œç±»çš„å®ä¾‹åˆ™ä¼šä»¥å¼•ç”¨çš„æ–¹å¼ä¼ é€’ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}],"tags":[],"keywords":[{"name":"Swiftè¯­æ³•ä¸“é¢˜","slug":"Swiftè¯­æ³•ä¸“é¢˜","permalink":"http://huishao.cc/categories/Swiftè¯­æ³•ä¸“é¢˜/"}]},{"title":"iOSå¤´éƒ¨æ¸å˜çš„è¡¨æ ¼è§†å›¾è®¾è®¡","slug":"200iOSå¤´éƒ¨æ¸å˜çš„è¡¨æ ¼è§†å›¾è®¾è®¡","date":"2016-04-25T16:00:00.000Z","updated":"2021-07-08T02:27:34.606Z","comments":true,"path":"2016/04/26/200iOSå¤´éƒ¨æ¸å˜çš„è¡¨æ ¼è§†å›¾è®¾è®¡/","link":"","permalink":"http://huishao.cc/2016/04/26/200iOSå¤´éƒ¨æ¸å˜çš„è¡¨æ ¼è§†å›¾è®¾è®¡/","excerpt":"","text":"iOSå¤´éƒ¨æ¸å˜çš„è¡¨æ ¼è§†å›¾è®¾è®¡ä»Šå¤©å†æ¥ç»™å¤§å®¶å¸¦æ¥ä¸€ä¸ªå¼€å‘ä¸­å¸¸ç”¨åˆ°çš„è§†å›¾æ§åˆ¶å™¨ï¼Œåœ¨å¾ˆå¤šåº”ç”¨ä¸­ï¼Œå¯èƒ½éƒ½ä¼šé‡åˆ°è¿™æ ·çš„ä¸€ä¸ªéœ€æ±‚ï¼šè¡¨è§†å›¾æ§åˆ¶å™¨æœ€ä¸Šæ–¹æœ‰ä¸€ä¸ªå¤´å›¾æ§ä»¶ï¼Œå½“è¡¨æ ¼è§†å›¾æ»‘åŠ¨åœ¨é¡¶éƒ¨æ—¶ï¼Œå¯¼èˆªæ é€æ˜ï¼Œå½“è¡¨æ ¼è§†å›¾é€æ¸å‘ä¸‹æ»‘åŠ¨æ—¶ï¼Œå¯¼èˆªæ æ¸æ¸å‡ºç°ï¼Œå¹¶ä¸”åœ¨æ»‘åŠ¨æœŸé—´ï¼Œå¤´å›¾ä¼šå±•ç¤ºç›¸å…³çš„æ¸å˜åŠ¨ç”»æ•ˆæœã€‚ä»¥å‰ç»å¸¸ä¼šé‡åˆ°è¿™æ ·çš„éœ€æ±‚ï¼Œä½†ä»æ²¡æœ‰æ•´ç†ä¸å°è£…å®Œå–„ï¼Œè¿™æ¬¡å°†å…¶å°è£…æˆå®Œæ•´çš„æ§ä»¶ï¼Œæ— è®ºæœ‰æ— å¯¼èˆªï¼Œéƒ½å¯ä»¥å¾ˆå¥½çš„æ”¯æŒï¼Œæ–¹ä¾¿ä»¥åä½¿ç”¨ä¹Ÿæä¾›ç»™éœ€è¦çš„æœ‹å‹ã€‚ åœ¨è®¾è®¡æ§ä»¶ä¹‹å‰ï¼Œæˆ‘ä»¬åº”è¯¥å…ˆç¼–å†™æ§ä»¶çš„å¤´æ–‡ä»¶ï¼Œå¤´æ–‡ä»¶ä¸­å°†æ§ä»¶éœ€è¦çš„å±æ€§å’Œæ–¹æ³•åˆ—ä¸¾ï¼Œä¹‹åå†æŒ‰å®šä¹‰å¥½çš„æ¥å£ä¸€æ­¥æ­¥çš„æ¥å®ç°æ§ä»¶çš„ç¼–å†™è®¾è®¡ï¼Œè¿™æ ·å¯ä»¥ç»“æ„æ¸…æ™°ï¼Œå¹¶ä¸”ä¸ä¼šæ˜¾å¾—æ— ä»ä¸‹æ‰‹ï¼Œæ§ä»¶çš„å¤´æ–‡ä»¶è®¾è®¡å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100//// YHBaseHeaderAnimatedViewController.h// YHBaseFoundationTest//// Created by vip on 16/4/26.// Copyright Â© 2016å¹´ jaki.zhang. All rights reserved./* * è¿™ä¸ªè§†å›¾æ§åˆ¶å™¨åˆ›å»ºå‡ºå¸¦ç¼©æ”¾å¤´å›¾æ•ˆæœçš„è§†å›¾æ§åˆ¶å™¨ * tipï¼š * 1.è¿™ä¸ªè§†å›¾æ§åˆ¶å™¨å¦‚æœæ˜¯è¢«å¯¼èˆªpushå‡ºæ¥çš„ åˆ™å†…éƒ¨ä¼šä½¿ç”¨å‡å¯¼èˆªè¿›è¡Œæ¸éšæ¨¡æ‹Ÿ * 2.è¿™ä¸ªè§†å›¾æ§åˆ¶å™¨å¦‚æœæ˜¯è¢«presentå‡ºæ¥çš„ åˆ™ä¸ä¼šå‡ºç°å‡å¯¼èˆªæ  * 3.è¿™ä¸ªè§†å›¾æ§åˆ¶å™¨ä¸­è‡ªå¸¦ä¸€ä¸ªTableView è®¾ç½®TableViewçš„å¤´å›¾ä¸ä¼šå½±å“åŸåŠ¨ç”»æ•ˆæœ * */#import &lt;UIKit/UIKit.h&gt;/** * è¿™ä¸ªæšä¸¾è®¾ç½®å¤´å›¾åŠ¨ç”»æ»‘åŠ¨çš„é€Ÿåº¦ç­‰çº§ */typedef enum &#123; YHBaseHeaderAnimatedLevelSlow, YHBaseHeaderAnimatedLevelNormal, YHBaseHeaderAnimatedLevelFast&#125;YHBaseHeaderAnimatedLevel;@interface YHBaseHeaderAnimatedViewController : UIViewController&lt;UITableViewDataSource,UITableViewDelegate&gt;@property(nonatomic,strong,readonly)UITableView * tableView;/** * è®¾ç½®åŠ¨ç”»å¤´å›¾å›¾ç‰‡ */@property(nonatomic,strong)UIView * animatedHeaderView;/** * è®¾ç½®TableViewçš„å¤´è§†å›¾ * * æ³¨æ„ï¼šè®¾ç½®tableViewçš„å¤´è§†å›¾ä¸èƒ½å¤Ÿåœ¨ä½¿ç”¨tableHeatherViewæ–¹æ³• è¦ä½¿ç”¨è¿™ä¸ªå±æ€§è®¾ç½® * */@property(nonatomic,strong)UIView * tableHeaderView;/** * è®¾ç½®åŠ¨ç”»å¤´å›¾é«˜åº¦ * * è¿™ä¸ªå±æ€§å¦‚æœä¸è®¾ç½®æˆ–è€…è®¾ç½®ä¸º0 åˆ™é»˜è®¤ä¼šä½¿ç”¨è®¾ç½®çš„imageå›¾ç‰‡æ¯”ä¾‹ * */@property(nonatomic,assign)CGFloat headerHeight;/** * * è®¾ç½®åŠ¨ç”»æ»‘åŠ¨é€Ÿç‡ */@property(nonatomic,assign)YHBaseHeaderAnimatedLevel animatedlevel;/** * * è®¾ç½®å¤´å›¾å¯æ–¹æ³•çš„æœ€å¤§scrollViewåç§»é‡ é»˜è®¤ä¸º40 * */@property(nonatomic,assign)CGFloat maxScrollOffset;/** * è®¾ç½®æ˜¯å¦å¸¦æ¸éšæ•ˆæœ * */@property(nonatomic,assign)BOOL alphaAnimated;/** * è®¾ç½®æœ€å°æ¸å˜åˆ°çš„alphaæ¸éšå€¼ &lt;0 &gt;1ä¹‹é—´ é»˜è®¤ä¸º0.5 * */@property(nonatomic,assign)CGFloat minAlpha;/** * * æ˜¯å¦æ˜¾ç¤ºæ¯›ç»ç’ƒæ¨¡ç³Šæ•ˆæœ * */@property(nonatomic,assign)BOOL bluerAnimated;/** * * è®¾ç½®æœ€å¤§å°æ¨¡ç³Šåº¦ é»˜è®¤ä¸º1 * */@property(nonatomic,assign)CGFloat maxBluer;/** * è®¾ç½®å¯¼èˆªæ é¢œè‰² é»˜è®¤ç™½è‰² * */@property(nonatomic,strong)UIColor * naviColor;/** * è®¾ç½®å¯¼èˆªå·¦ä¾§æŒ‰é’®æ•°ç»„ å¦‚æœä¸è®¾ç½® ä¼šè‡ªåŠ¨å¸¦ä¸€ä¸ªè¿”å›æŒ‰é’® * */@property(nonatomic,strong)NSArray * leftBarButtons;/** * è®¾ç½®å¯¼èˆªå·¦ä¾§æŒ‰é’®æ•°ç»„ å¦‚æœä¸è®¾ç½® ä¼šè‡ªåŠ¨å¸¦ä¸€ä¸ªè¿”å›æŒ‰é’® * */@property(nonatomic,strong)NSArray * rightBarButtons;/** * è¿™ä¸ªæ–¹æ³•åœ¨ä¿®æ”¹äº†å¤´å›¾ç›¸å…³å±æ€§å éœ€è¦è°ƒç”¨åˆ·æ–° * * æ³¨æ„ï¼šå¦‚æœé‡æ–°è®¾ç½®äº†TableViewçš„tableheaderViewå±æ€§ ä¹Ÿéœ€è¦è°ƒç”¨è¿™ä¸ªæ–¹æ³•åˆ·æ–° * */-(void)reloadAnimatedView;@end åœ¨è®¾è®¡è¿™ä¸ªæ§ä»¶æ—¶ï¼Œæˆ‘ä¸»è¦è€ƒè™‘ä¸¤ä¸ªéœ€è¦ä¼˜åŒ–çš„åœ°æ–¹ï¼Œç¬¬ä¸€æ˜¯è¿™ä¸ªæ§åˆ¶å™¨åœ¨ä¸åŒçš„åœºæ™¯ä¸‹å¯èƒ½ä¼šæœ‰ä¸åŒçš„ç»“æ„ï¼Œä¾‹å¦‚åœ¨å¯¼èˆªç»“æ„ä¸­è¢«pushå‡ºæ¥æˆ–è€…é€šè¿‡æ¨¡æ€è·³è½¬è¢«presentå‡ºæ¥ï¼Œæˆ‘åœ¨è¿™ä¸ªæ§ä»¶çš„å®ç°æ—¶åšäº†å…¼å®¹ï¼Œå®é™…ä¸Šæ— è®ºæœ‰æ— å¯¼èˆªï¼Œæ§ä»¶å†…éƒ¨éƒ½æ²¡æœ‰ä½¿ç”¨ç³»ç»Ÿçš„å¯¼èˆªæ ï¼Œè€Œæ˜¯æ¨¡æ‹Ÿå®ç°äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„å¯¼èˆªæ æ¥ä¸ç³»ç»Ÿçš„å¯¼èˆªæ— ç¼è¡”æ¥ã€‚ .mæ–‡ä»¶ä¸­å®ç°çš„ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212#import &quot;YHBaseHeaderAnimatedViewController.h&quot;@interface YHBaseHeaderAnimatedViewController ()&#123; //æ‰¿è½½è§†å›¾ UIView * _privteBGHeaderView; //å®½é«˜æ¯”ä¾‹ CGFloat _privteRate; //åŸå§‹å®½é«˜ CGFloat _privteOriWidth; CGFloat _privteOriHeught; UIVisualEffectView * _blurView; UINavigationBar * _naviBar;&#125;@end@implementation YHBaseHeaderAnimatedViewController- (void)viewDidLoad &#123; [super viewDidLoad]; self.view.backgroundColor = [UIColor whiteColor]; self.edgesForExtendedLayout = UIRectEdgeNone; _tableView = [[UITableView alloc]initWithFrame:self.view.frame style:UITableViewStylePlain]; [self.view addSubview:_tableView]; _tableView.delegate=self; _tableView.dataSource=self; [self YHCreatView]; // Do any additional setup after loading the view.&#125;- (void)didReceiveMemoryWarning &#123; [super didReceiveMemoryWarning]; // Dispose of any resources that can be recreated.&#125;//å¯¹å¯¼èˆªè¿›è¡Œå¤„ç†-(void)viewWillAppear:(BOOL)animated&#123; [super viewWillAppear:animated]; if (self.navigationController) &#123; [self.navigationController setNavigationBarHidden:YES animated:YES]; [self showNavigationBar]; &#125;&#125;-(void)viewWillDisappear:(BOOL)animated&#123; [super viewWillDisappear:animated]; if (self.navigationController) &#123; [self.navigationController setNavigationBarHidden:NO animated:YES]; &#125;&#125;-(void)showNavigationBar&#123; if (_naviBar==nil) &#123; _naviBar = [[UINavigationBar alloc]init]; [self.view addSubview:_naviBar]; _naviBar.frame = CGRectMake(0, 0, self.view.frame.size.width, 64); [_naviBar setBackgroundImage:[UIImage imageNamed:@&quot;clear&quot;] forBarMetrics:UIBarMetricsDefault]; [_naviBar setShadowImage:[UIImage imageNamed:@&quot;clear&quot;]]; _naviBar.backgroundColor = [UIColor colorWithRed:1 green:1 blue:1 alpha:0]; UINavigationItem * item = [[UINavigationItem alloc]initWithTitle:self.title]; _naviBar.items = @[item]; item.leftBarButtonItem = [[UIBarButtonItem alloc]initWithTitle:@&quot;è¿”å›&quot; style:UIBarButtonItemStyleDone target:self action:@selector(popToLast)]; &#125; if (self.animatedHeaderView==nil) &#123; _naviBar.hidden=YES; &#125;else&#123; _naviBar.hidden=NO; &#125;&#125;-(void)popToLast&#123; [self.navigationController popViewControllerAnimated:YES];&#125;-(void)YHCreatView&#123; if (self.maxScrollOffset==0) &#123; self.maxScrollOffset=40; &#125; if (self.minAlpha==0) &#123; self.minAlpha = 0.5; &#125; if (self.maxBluer==0) &#123; self.maxBluer = 1; &#125; _privteBGHeaderView = [[UIView alloc]init]; _privteBGHeaderView.backgroundColor = [UIColor clearColor]; self.tableView.backgroundColor = [UIColor clearColor]; _blurView = [[UIVisualEffectView alloc]initWithEffect:[UIBlurEffect effectWithStyle:UIBlurEffectStyleLight]]; [self reloadAnimatedView];&#125;-(void)reloadAnimatedView&#123; CGFloat viewH=0; CGFloat aniH=0; for (UIView * view in _privteBGHeaderView.subviews) &#123; [view removeFromSuperview]; &#125; if (self.tableHeaderView) &#123; viewH = viewH+self.tableHeaderView.bounds.size.height; [_privteBGHeaderView addSubview:self.tableHeaderView]; &#125; if (self.animatedHeaderView) &#123; _privteRate = self.animatedHeaderView.frame.size.width/self.animatedHeaderView.frame.size.height; [self.animatedHeaderView addSubview:_blurView]; _blurView.frame= self.animatedHeaderView.bounds; _blurView.alpha=0; _privteOriWidth = self.animatedHeaderView.frame.size.width; _privteOriHeught = self.animatedHeaderView.frame.size.height; if (self.headerHeight!=0) &#123; viewH+=self.headerHeight; aniH = self.headerHeight; &#125;else&#123; viewH+=self.view.frame.size.width/self.animatedHeaderView.bounds.size.width*self.animatedHeaderView.frame.size.height; aniH = self.animatedHeaderView.bounds.size.height; &#125; [self.view insertSubview:self.animatedHeaderView atIndex:0]; &#125; self.tableHeaderView.frame=CGRectMake(0, aniH, self.tableHeaderView.frame.size.width, self.tableHeaderView.frame.size.height); _privteBGHeaderView.frame=CGRectMake(0, 0, self.view.frame.size.width, viewH); self.tableView.tableHeaderView = _privteBGHeaderView;&#125;-(void)setAnimatedHeaderView:(UIView *)animatedHeaderView&#123; if (animatedHeaderView==nil) &#123; if (_animatedHeaderView) &#123; [_animatedHeaderView removeFromSuperview]; &#125; &#125; _animatedHeaderView = animatedHeaderView; &#125;-(void)setMinAlpha:(CGFloat)minAlpha&#123; if (minAlpha&lt;=0) &#123; minAlpha=0.001; &#125; if (minAlpha&gt;=1) &#123; minAlpha=0.999; &#125; _minAlpha=minAlpha;&#125;-(void)setMaxBluer:(CGFloat)maxBluer&#123; if (maxBluer&lt;=0) &#123; maxBluer = 0.001; &#125; if (maxBluer&gt;=1) &#123; maxBluer = 0.999; &#125; _maxBluer = maxBluer;&#125;-(void)setNaviColor:(UIColor *)naviColor&#123; _naviColor = naviColor; _naviBar.backgroundColor = naviColor;&#125;-(void)setLeftBarButtons:(NSArray *)leftBarButtons&#123; _naviBar.topItem.leftBarButtonItems = leftBarButtons; _leftBarButtons = leftBarButtons;&#125;-(void)setRightBarButtons:(NSArray *)rightBarButtons&#123; _naviBar.topItem.rightBarButtonItems = rightBarButtons; _rightBarButtons = rightBarButtons;&#125;-(void)scrollViewDidScroll:(UIScrollView *)scrollView&#123; if (self.animatedHeaderView==nil) &#123; return; &#125; if (self.tableView==scrollView) &#123; //è·å–åˆ°åç§»é‡ é»˜è®¤ä¸¤å€ CGFloat offset = scrollView.contentOffset.y*2; //å¦‚æœå°äº0 åˆ™è¿›è¡Œå½¢å˜æ‹‰ä¼¸æ“ä½œ if (offset&lt;=0) &#123; if (offset&lt;-self.maxScrollOffset*2) &#123; &#125;else&#123; CGFloat height = _privteOriHeught+abs((int)offset); CGFloat width = height*_privteRate; self.animatedHeaderView.frame = CGRectMake(self.view.frame.size.width/2-width/2, offset/2, width, height); &#125; if (_naviBar) &#123; if (_naviBar.shadowImage==nil) &#123; [_naviBar setShadowImage:[UIImage imageNamed:@&quot;clear&quot;]]; &#125; &#125; &#125;else&#123; //å¦‚æœå¤§äºé›¶ è¿›è¡Œæ¨å‡ºæ“ä½œ if (self.animatedlevel==YHBaseHeaderAnimatedLevelSlow) &#123; //æ…¢é€Ÿ self.animatedHeaderView.frame = CGRectMake(0, -offset/8, self.animatedHeaderView.frame.size.width, self.animatedHeaderView.frame.size.height); &#125;else if(self.animatedlevel==YHBaseHeaderAnimatedLevelFast)&#123; //å¿«é€Ÿ self.animatedHeaderView.frame = CGRectMake(0, -offset/2, self.animatedHeaderView.frame.size.width, self.animatedHeaderView.frame.size.height); &#125;else&#123; //æ­£å¸¸ self.animatedHeaderView.frame = CGRectMake(0, -offset/4, self.animatedHeaderView.frame.size.width, self.animatedHeaderView.frame.size.height); &#125; //è¿›è¡Œæ¸éšåŠ¨ç”»å¤„ç† CGFloat tmp = offset/2/_privteOriHeught; if (self.alphaAnimated) &#123; self.animatedHeaderView.alpha = 1-(1-self.minAlpha)*tmp; &#125; //è¿›è¡Œæ¨¡ç³ŠåŠ¨ç”» if (self.bluerAnimated) &#123; _blurView.alpha = self.maxBluer*tmp; &#125; //è¿›è¡Œå¯¼èˆªæ˜¾ç¤º if (_naviBar) &#123; _naviBar.backgroundColor = [_naviBar.backgroundColor colorWithAlphaComponent:tmp]; if (_naviBar.shadowImage) &#123; [_naviBar setShadowImage:nil]; &#125; &#125; &#125; &#125;&#125;@end åœ¨ä½¿ç”¨æ—¶ï¼Œåˆ›å»ºä¸€ä¸ªè§†å›¾æ§åˆ¶å™¨ç»§æ‰¿äºå®ƒï¼Œåœ¨å…¶viewDidLoadæ–¹æ³•ä¸­è¿›è¡Œä¸€äº›ç®€å•çš„è®¾ç½®å³å¯ï¼Œå¦‚ä¸‹ï¼š 12345678910111213141516- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view. //è®¾ç½®å¤´å›¾ UIImageView * imageView = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, 200)]; imageView.image = [UIImage imageNamed:@&quot;image&quot;]; self.animatedHeaderView = imageView; //è®¾ç½®tableViewçš„å¤´è§†å›¾ UILabel * label = [[UILabel alloc]initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, 30)]; label.backgroundColor = [UIColor purpleColor]; label.textColor = [UIColor whiteColor]; label.textAlignment =NSTextAlignmentCenter; label.text = @&quot;ä¸‹é¢è¿›è¡ŒåŠŸèƒ½æ¼”ç¤º&quot;; self.tableHeaderView = label; [self reloadAnimatedView];&#125; æˆ‘å†™äº†ä¸€ä¸ªå®Œæ•´çš„æ¼”ç¤ºDemoï¼ŒDemoä¸­æœ‰å®Œæ•´çš„åŠŸèƒ½æ¼”ç¤ºï¼Œéœ€è¦çš„æœ‹å‹å¯ä»¥è‡ªè¡Œä¸‹è½½ï¼šhttp://pan.baidu.com/s/1c1VKT00ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"é…åˆLLDBè°ƒè¯•å™¨è¿›è¡ŒiOSä»£ç è°ƒè¯•","slug":"199é…åˆLLDBè°ƒè¯•å™¨è¿›è¡ŒiOSä»£ç è°ƒè¯•","date":"2016-04-23T16:00:00.000Z","updated":"2021-07-08T02:26:37.528Z","comments":true,"path":"2016/04/24/199é…åˆLLDBè°ƒè¯•å™¨è¿›è¡ŒiOSä»£ç è°ƒè¯•/","link":"","permalink":"http://huishao.cc/2016/04/24/199é…åˆLLDBè°ƒè¯•å™¨è¿›è¡ŒiOSä»£ç è°ƒè¯•/","excerpt":"","text":"é…åˆLLDBè°ƒè¯•å™¨è¿›è¡ŒiOSä»£ç è°ƒè¯•åœ¨ä¸€æ¬¾å®Œæ•´iOSç§»åŠ¨åº”ç”¨çš„å¼€å‘ä¸­ï¼Œä»£ç çš„è°ƒè¯•å’Œç¼–å†™å ç€åŒç­‰é‡è¦çš„åœ°ä½ã€‚Xcodeé»˜è®¤ä½¿ç”¨LLDBä½œä¸ºä»£ç è°ƒè¯•å™¨ï¼ŒLLDBåŠŸèƒ½ä¸°å¯Œä¸”å¼ºå¤§ï¼Œæ°å½“çš„ä½¿ç”¨å®ƒï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…äº‹åŠåŠŸå€çš„å®Œæˆä»£ç è°ƒè¯•çš„å·¥ä½œã€‚ 1.expressionä»£ç æ‰§è¡ŒæŒ‡ä»¤å…³äºLLDBè°ƒè¯•å™¨ï¼Œæœ€å¸¸ç”¨çš„æŒ‡ä»¤åº”è¯¥æ˜¯pä¸poäº†ï¼Œå¼€å‘è€…å¸¸ç”¨è¿™ä¸¤ä¸ªå‘½ä»¤æ¥è¿›è¡Œå¯¹è±¡çš„æ‰“å°æ“ä½œï¼Œpä¼šæ‰“å°å‡ºå¯¹è±¡åœ°å€å’Œç±»å‹ï¼Œpoåˆ™ä¼šé¢å¤–æ‰“å°å‡ºå¯¹è±¡çš„å€¼å¾—å†…å®¹ï¼Œå®é™…ä¸Šï¼Œè¿™ä¸¤ä¸ªå‘½ä»¤éƒ½æ˜¯expressionç›¸å…³å‘½ä»¤çš„ç®€å†™ã€‚expressionå‘½ä»¤ä¹Ÿå¹¶éç®€å•çš„æ‰“å°å‘½ä»¤ï¼Œå®é™…ä¸Šå®ƒæ˜¯ä¸€ä¸ªæ‰§è¡Œä»£ç å‘½ä»¤ï¼Œæ‰§è¡Œåå°†è¿”å›å€¼è¿›è¡Œæ‰“å°ï¼Œè¿™ä¸ªå‘½ä»¤æœ‰ä¸€ä¸ªååˆ†å¼ºå¤§çš„ç‰¹ç‚¹ï¼Œå®ƒå¯ä»¥çœŸå®æ”¹å˜ç¨‹åºè¿è¡Œä¸­å˜é‡çš„å€¼ã€‚ä¾‹å¦‚åœ¨å¦‚ä¸‹ä»£ç ä¸­çš„int c = a+b ä¸€è¡Œæ·»åŠ ä¸€ä¸ªæ–­ç‚¹ï¼Œè¿è¡Œå·¥ç¨‹ã€‚ 1234 int a = 0; int b = 1; int c = a+b; NSLog(@&quot;%d&quot;,c); å¦‚æœå¼€å‘è€…ä¸è¿›è¡Œä»»ä½•è®¤ä¸ºæ“ä½œï¼Œæ­¤æ—¶æ‰“å°å‡ºçš„å€¼åº”è¯¥æ˜¯1ï¼Œä¸ºäº†æµ‹è¯•ï¼Œå¯ä»¥åœ¨è°ƒè¯•åŒºè¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š 1(lldb) expression a=1 æ­¤åè·³è¿‡æ–­ç‚¹ç»§ç»­è¿è¡Œç¨‹åºï¼Œå¯ä»¥çœ‹åˆ°æ‰“å°çš„ç»“æœå¦‚ä¸‹ï¼Œcå˜æˆ2ã€‚ 123(lldb) expression a=1(int) $0 = 12016-04-24 11:39:40.213 BreakPointTest[1010:79065] 2 é€šè¿‡ä¸Šé¢çš„æ¼”ç¤ºï¼Œæˆ‘ä»¬å‘ç°ä½¿ç”¨LLDBè°ƒè¯•ä»£ç ååˆ†æ–¹ä¾¿çš„ä¸€ä¸ªç‰¹ç‚¹ï¼Œå½“æˆ‘ä»¬çŸ¥é“ç¨‹åºæŸä¸ªåœ°æ–¹å¯èƒ½ä¼šå‡ºç°é—®é¢˜ï¼Œä¸ºäº†æ‰¾åˆ°è§£å†³æ–¹æ³•ï¼Œä¸ä½¿ç”¨LLDBæ—¶æˆ‘ä»¬å¯èƒ½éœ€è¦åœ¨ä»£ç ä¸­æ·»åŠ å¤§é‡çš„æ‰“å°å‡½æ•°ï¼Œå¹¶ä¸”å¤šæ¬¡å°è¯•ä¿®æ”¹æºä»£ç æ‰èƒ½è§£å†³é—®é¢˜ï¼Œå¦‚æœä½¿ç”¨LLDBçš„expressionå‘½ä»¤ï¼Œæˆ‘ä»¬ä¸ä»…ä¸éœ€è¦æ·»åŠ é¢å¤–çš„æ‰“å°ä»£ç ï¼Œä¹Ÿä¸éœ€è¦ç›´æ¥ä¿®æ”¹æºä»£ç ï¼Œåœ¨è°ƒè¯•åŒºè¿›è¡Œå¤šæ¬¡è°ƒè¯•ï¼Œç›´åˆ°æ‰¾åˆ°æ­£ç¡®çš„ä¿®æ”¹æ–¹æ³•åå†å¯¹æºä»£ç ä¿®æ”¹ä¸€æ¬¡å³å¯ã€‚ 2.frameä»£ç å †æ ˆå—ä¿¡æ¯ç›¸å…³æŒ‡ä»¤å½“Xcodeè¿›å…¥æ–­ç‚¹è°ƒè¯•æˆ–è€…é‡åˆ°å¼‚å¸¸ç¨‹åºå´©æºƒæ—¶ï¼Œåœ¨Xcodeå·¦ä¾§çš„å¯¼èˆªåŒºéƒ½ä¼šå°†ç¨‹åºè¿è¡Œä¸­çš„ç›¸å…³å †æ ˆå—ä¿¡æ¯åˆ—ä¸¾å‡ºæ¥ï¼Œä¾‹å¦‚ä½¿ç”¨å¦‚ä¸‹æµ‹è¯•ä»£ç ï¼Œåœ¨textæ–¹æ³•ä¸­çš„int c = a+b ä¸€è¡Œæ·»åŠ ä¸€ä¸ªæ–­ç‚¹ã€‚ 12345678910111213141516171819#import &quot;ViewController.h&quot;@interface ViewController ()&#123; int ab;&#125;@end@implementation ViewController- (void)viewDidLoad &#123; [super viewDidLoad]; ab = 1; [self test]; &#125;-(void)test&#123; int a = 0; int b = 1; int c = a+b; NSLog(@&quot;%d&quot;,c);&#125;@end å½“ç¨‹åºè¿è¡Œåˆ°æ–­ç‚¹å¤„æ–­å¼€æ—¶ï¼ŒXcodeå·¦ä¾§çš„å †æ ˆå—å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œç¨‹åºå½“å‰å¤„äºæ¿€æ´»çŠ¶æ€çš„çº¿ç¨‹æœ‰5ä¸ªï¼Œç¨‹åºç›®å‰æ–­åœ¨çº¿ç¨‹1ä¸­çš„testæ–¹æ³•å †æ ˆå—ä¸­ï¼Œä½¿ç”¨frame infoæŒ‡ä»¤å¯ä»¥æ‰“å°å½“å‰å †æ ˆå—çš„ä¿¡æ¯ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12(lldb) frame infoframe #0: 0x0000000102497905 BreakPointTest`-[ViewController test](self=0x00007fcd5b413320, _cmd=&quot;test&quot;) + 37 at ViewController.m:39 åœ¨æ‰“å°çš„ä¿¡æ¯ä¸­ï¼Œä¼šæœ‰æ‰€åœ¨çš„æ–‡ä»¶åç§°å’Œå‡½æ•°åç§°åŠå †æ ˆå—æ ‡å·å’Œå†…å­˜åœ°å€ã€‚ åœ¨å®é™…ä»£ç è°ƒè¯•è¿‡ç¨‹ä¸­ï¼Œç¨‹åºè¿è¡Œçš„å›æº¯æ˜¯ä¸€ä¸ªé‡è¦çš„æ–¹æ³•ï¼Œä¾‹å¦‚ä¸Šé¢çš„ä»£ç ä¾‹å­ï¼Œè™½ç„¶ç°åœ¨æ–­ç‚¹æ–­åœ¨testæ–¹æ³•ä¸­ï¼Œå¼€å‘è€…å¯èƒ½éœ€è¦åœ¨viewDidLoadæ–¹æ³•ä¸­è¿›è¡Œç›¸å…³è°ƒè¯•ï¼Œä¾‹å¦‚ä¸Šé¢viewDidLoadæ–¹æ³•ä¸­æœ‰ä¸€ä¸ªå˜é‡abï¼Œå¦‚æœæƒ³æŸ¥çœ‹abå˜é‡çš„å€¼ï¼Œæˆ‘ä»¬å°±éœ€è¦å°†å½“å‰é€‰ä¸­è°ƒè¯•çš„å †æ ˆå—é€‰æ‹©ä¸ºviewDidLoadæ–¹æ³•æ‰€åœ¨çš„å †æ ˆå—ï¼Œä»Xcodeå·¦ä¾§å¯¼èˆªåŒºå¯ä»¥çœ‹åˆ°ï¼ŒviewDidLoadæ–¹æ³•å †æ ˆå—çš„æ ‡å·ä¸º1ï¼Œæ‰§è¡Œå¦‚ä¸‹LLDBæŒ‡ä»¤å³å¯åˆ‡æ¢ï¼š 12345678(lldb) frame select 1frame #1: 0x00000001024978cb BreakPointTest`-[ViewController viewDidLoad](self=0x00007fcd5b413320, _cmd=&quot;viewDidLoad&quot;) + 91 at ViewController.m:31 28 int a = 0; 29 int b = 1; 30 int c = a+b;-&gt; 31 NSLog(@&quot;%d&quot;,c); 32 &#125; 33 @end ä»æ‰“å°ä¿¡æ¯å¯ä»¥çœ‹åˆ°ï¼Œç°åœ¨é€‰ä¸­çš„è°ƒè¯•å †æ ˆå—å·²ç»åˆ‡æ¢åˆ°viewDidLoadæ–¹æ³•ï¼Œå†ä½¿ç”¨expressionæŒ‡ä»¤æ—¶å°±å¯ä»¥æ“ä½œè¿™ä¸ªæ–¹æ³•ä¸­çš„ç›¸å…³å˜é‡äº†ã€‚ åœ¨ä½¿ç”¨LLDBå·¥å…·å‰ï¼Œé‡åˆ°è¿™æ ·çš„æƒ…å†µï¼Œæˆ‘å¾€å¾€ä¼šé‡‡ç”¨æ‰“å¤šä¸ªæ–­ç‚¹ï¼Œä¸€æ­¥æ­¥è¿½æº¯ä»£ç çš„è¿è¡Œè¿‡ç¨‹å¹¶æ£€æŸ¥è¿‡ç¨‹ä¸­å˜é‡çš„å€¼æ˜¯å¦æ­£ç¡®ï¼Œè°ƒè¯•èµ·æ¥å¹¶ä¸ååˆ†æ–¹ä¾¿ï¼Œå¦‚æœä¸å°å¿ƒé”™è¿‡äº†æŸä¸ªæ–­ç‚¹ï¼Œåˆè¦é‡æ–°å¼€å§‹ï¼Œé€šè¿‡é€‰æ‹©è°ƒè¯•çš„frameå †æ ˆå—å¯ä»¥ååˆ†æ–¹ä¾¿çš„è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ ä¸frameç›¸å…³çš„è¿˜æœ‰ä¸€ä¸ªæŒ‡ä»¤ååˆ†æœ‰ç”¨ï¼Œä¸‹é¢çš„æŒ‡ä»¤å¯ä»¥æ‰“å°å‡ºå½“å‰å †æ ˆå—ä¸­æ‰€æœ‰å¯¹è±¡çš„å†…å®¹ï¼š 123456(lldb) frame variable(ViewController *) self = 0x00007fcd5b413320(SEL) _cmd = &quot;test&quot;(int) a = 0(int) b = 1(int) c = 0 variableåé¢ä¹Ÿå¯ä»¥æ·»åŠ å‚æ•°åæ¥æ‰“å°ç‰¹å®šå¯¹è±¡çš„å†…å®¹ï¼š 12(lldb) frame variable a(int) a = 0 3.threadçº¿ç¨‹æ“ä½œç›¸å…³æŒ‡ä»¤ä¸Šé¢æåˆ°è¿‡ï¼Œç¨‹åºè¿è¡Œä¸­ä¼šæœ‰å¤šä¸ªæ¿€æ´»çš„çº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹ä¸­åˆæœ‰è®¸å¤šå †æ ˆå—ï¼Œframeç›¸å…³æŒ‡ä»¤ç”¨äºç»¼åˆè°ƒè¯•å„ä¸ªå †æ ˆå—ï¼ŒthreadæŒ‡ä»¤åˆ™æ˜¯ç”¨äºç»¼åˆè°ƒè¯•å„ä¸ªçº¿ç¨‹ã€‚é¦–å…ˆXcodeå·¦ä¾§å¯¼èˆªåŒºä¸ºæˆ‘ä»¬åˆ—å‡ºçš„çº¿ç¨‹å †æ ˆå—å¹¶ä¸æ˜¯å½“å‰çº¿ç¨‹ä¸­çš„æ‰€æœ‰å †æ ˆå—ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å¯ä»¥æ‰“å°å‡ºå½“å‰çº¿ç¨‹çš„æ‰€æœ‰å †æ ˆå—ï¼š 123456789101112131415161718192021222324(lldb) thread backtrace* thread #1: tid = 0x152f8, 0x0000000102497905 BreakPointTest`-[ViewController test](self=0x00007fcd5b413320, _cmd=&quot;test&quot;) + 37 at ViewController.m:39, queue = &apos;com.apple.main-thread&apos;, stop reason = breakpoint 2.1 * frame #0: 0x0000000102497905 BreakPointTest`-[ViewController test](self=0x00007fcd5b413320, _cmd=&quot;test&quot;) + 37 at ViewController.m:39 frame #1: 0x00000001024978cb BreakPointTest`-[ViewController viewDidLoad](self=0x00007fcd5b413320, _cmd=&quot;viewDidLoad&quot;) + 91 at ViewController.m:31 frame #2: 0x0000000103475984 UIKit`-[UIViewController loadViewIfRequired] + 1198 frame #3: 0x0000000103475cd3 UIKit`-[UIViewController view] + 27 frame #4: 0x000000010334bfb4 UIKit`-[UIWindow addRootViewControllerViewIfPossible] + 61 frame #5: 0x000000010334c69d UIKit`-[UIWindow _setHidden:forced:] + 282 frame #6: 0x000000010335e180 UIKit`-[UIWindow makeKeyAndVisible] + 42 frame #7: 0x00000001032d2ed9 UIKit`-[UIApplication _callInitializationDelegatesForMainScene:transitionContext:] + 4131 frame #8: 0x00000001032d9568 UIKit`-[UIApplication _runWithMainScene:transitionContext:completion:] + 1769 frame #9: 0x00000001032d6714 UIKit`-[UIApplication workspaceDidEndTransaction:] + 188 frame #10: 0x0000000105d438c8 FrontBoardServices`__FBSSERIALQUEUE_IS_CALLING_OUT_TO_A_BLOCK__ + 24 frame #11: 0x0000000105d43741 FrontBoardServices`-[FBSSerialQueue _performNext] + 178 frame #12: 0x0000000105d43aca FrontBoardServices`-[FBSSerialQueue _performNextFromRunLoopSource] + 45 frame #13: 0x0000000102e4a301 CoreFoundation`__CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 17 frame #14: 0x0000000102e4022c CoreFoundation`__CFRunLoopDoSources0 + 556 frame #15: 0x0000000102e3f6e3 CoreFoundation`__CFRunLoopRun + 867 frame #16: 0x0000000102e3f0f8 CoreFoundation`CFRunLoopRunSpecific + 488 frame #17: 0x00000001032d5f21 UIKit`-[UIApplication _run] + 402 frame #18: 0x00000001032daf09 UIKit`UIApplicationMain + 171 frame #19: 0x0000000102497c3f BreakPointTest`main(argc=1, argv=0x00007fff5d768668) + 111 at main.m:14 frame #20: 0x00000001056fe92d libdyld.dylib`start + 1 frame #21: 0x00000001056fe92d libdyld.dylib`start + 1 thread listæŒ‡ä»¤åˆ™å¯ä»¥æ‰“å°å‡ºå½“å‰æ‰€æœ‰æ¿€æ´»çš„çº¿ç¨‹ï¼Œå¦‚ä¸‹ï¼š 1234567(lldb) thread listProcess 1049 stopped* thread #1: tid = 0x152f8, 0x0000000102497905 BreakPointTest`-[ViewController test](self=0x00007fcd5b413320, _cmd=&quot;test&quot;) + 37 at ViewController.m:39, queue = &apos;com.apple.main-thread&apos;, stop reason = breakpoint 2.1 thread #2: tid = 0x1531b, 0x0000000105a43ee2 libsystem_kernel.dylib`kevent64 + 10, queue = &apos;com.apple.libdispatch-manager&apos; thread #3: tid = 0x1531c, 0x0000000105a435e2 libsystem_kernel.dylib`__workq_kernreturn + 10 thread #4: tid = 0x15324, 0x0000000105a435e2 libsystem_kernel.dylib`__workq_kernreturn + 10 thread #5: tid = 0x15328, 0x0000000105a435e2 libsystem_kernel.dylib`__workq_kernreturn + 10 thread infoå¯ä»¥æ‰“å°å‡ºå½“å‰é€‰ä¸­è°ƒè¯•çš„çº¿ç¨‹çš„ä¿¡æ¯ï¼š 12(lldb) thread infothread #1: tid = 0x152f8, 0x0000000102497905 BreakPointTest`-[ViewController test](self=0x00007fcd5b413320, _cmd=&quot;test&quot;) + 37 at ViewController.m:39, queue = &apos;com.apple.main-thread&apos;, stop reason = breakpoint 2.1 åŒæ ·ä¹Ÿå¯ä»¥ä½¿ç”¨thread selectæŒ‡ä»¤æ¥åˆ‡æ¢é€‰ä¸­è°ƒè¯•çš„çº¿ç¨‹ï¼š 1(lldb) thread select 2 thread continueæŒ‡ä»¤ç”¨äºç»§ç»­æ‰§è¡Œå½“å‰çš„çº¿ç¨‹ï¼š 1234(lldb) thread continue2016-04-24 12:29:54.562 BreakPointTest[1049:86776] 1Resuming thread 0x152f8 in process 1049Process 1049 resuming 4.disassembleä»£ç åæ±‡ç¼–ç›¸å…³æŒ‡ä»¤disassembleç›¸å…³æŒ‡ä»¤ç”¨äºè¾“å‡ºæŸæ®µç¨‹åºçš„æ±‡ç¼–ä»£ç ï¼Œæ‰§è¡ŒdisassembleæŒ‡ä»¤å°†ä¼šåæ±‡ç¼–å½“å‰å‡½æ•°ï¼š 12345678910111213141516171819BreakPointTest`-[ViewController test]: 0x10aab7940 &lt;+0&gt;: pushq %rbp 0x10aab7941 &lt;+1&gt;: movq %rsp, %rbp 0x10aab7944 &lt;+4&gt;: subq $0x20, %rsp 0x10aab7948 &lt;+8&gt;: leaq 0x1711(%rip), %rax ; @&quot;%d&quot; 0x10aab794f &lt;+15&gt;: movq %rdi, -0x8(%rbp) 0x10aab7953 &lt;+19&gt;: movq %rsi, -0x10(%rbp) 0x10aab7957 &lt;+23&gt;: movl $0x0, -0x14(%rbp) 0x10aab795e &lt;+30&gt;: movl $0x1, -0x18(%rbp)-&gt; 0x10aab7965 &lt;+37&gt;: movl -0x14(%rbp), %ecx 0x10aab7968 &lt;+40&gt;: addl -0x18(%rbp), %ecx 0x10aab796b &lt;+43&gt;: movl %ecx, -0x1c(%rbp) 0x10aab796e &lt;+46&gt;: movl -0x1c(%rbp), %esi 0x10aab7971 &lt;+49&gt;: movq %rax, %rdi 0x10aab7974 &lt;+52&gt;: movb $0x0, %al 0x10aab7976 &lt;+54&gt;: callq 0x10aab7c80 ; symbol stub for: NSLog 0x10aab797b &lt;+59&gt;: addq $0x20, %rsp 0x10aab797f &lt;+63&gt;: popq %rbp 0x10aab7980 &lt;+64&gt;: retq ä½¿ç”¨disassemble -båˆ™ä¼šè¾“å‡ºå¸¦å­—èŠ‚ä¿¡æ¯çš„æ±‡ç¼–ä»£ç ï¼š 1234567891011121314151617181920(lldb) disassemble -bBreakPointTest`-[ViewController test]: 0x10aab7940 &lt;+0&gt;: 55 pushq %rbp 0x10aab7941 &lt;+1&gt;: 48 89 e5 movq %rsp, %rbp 0x10aab7944 &lt;+4&gt;: 48 83 ec 20 subq $0x20, %rsp 0x10aab7948 &lt;+8&gt;: 48 8d 05 11 17 00 00 leaq 0x1711(%rip), %rax ; @&quot;%d&quot; 0x10aab794f &lt;+15&gt;: 48 89 7d f8 movq %rdi, -0x8(%rbp) 0x10aab7953 &lt;+19&gt;: 48 89 75 f0 movq %rsi, -0x10(%rbp) 0x10aab7957 &lt;+23&gt;: c7 45 ec 00 00 00 00 movl $0x0, -0x14(%rbp) 0x10aab795e &lt;+30&gt;: c7 45 e8 01 00 00 00 movl $0x1, -0x18(%rbp)-&gt; 0x10aab7965 &lt;+37&gt;: 8b 4d ec movl -0x14(%rbp), %ecx 0x10aab7968 &lt;+40&gt;: 03 4d e8 addl -0x18(%rbp), %ecx 0x10aab796b &lt;+43&gt;: 89 4d e4 movl %ecx, -0x1c(%rbp) 0x10aab796e &lt;+46&gt;: 8b 75 e4 movl -0x1c(%rbp), %esi 0x10aab7971 &lt;+49&gt;: 48 89 c7 movq %rax, %rdi 0x10aab7974 &lt;+52&gt;: b0 00 movb $0x0, %al 0x10aab7976 &lt;+54&gt;: e8 05 03 00 00 callq 0x10aab7c80 ; symbol stub for: NSLog 0x10aab797b &lt;+59&gt;: 48 83 c4 20 addq $0x20, %rsp 0x10aab797f &lt;+63&gt;: 5d popq %rbp 0x10aab7980 &lt;+64&gt;: c3 retq ä½¿ç”¨disassemble -c æŒ‡ä»¤å¯ä»¥è®¾ç½®è¾“å‡ºæ±‡ç¼–ä»£ç çš„è¡Œæ•°ï¼Œå¦‚ä¸‹ï¼š 1234567(lldb) disassemble -c 5BreakPointTest`-[ViewController test]: 0x10aab7940 &lt;+0&gt;: pushq %rbp 0x10aab7941 &lt;+1&gt;: movq %rsp, %rbp 0x10aab7944 &lt;+4&gt;: subq $0x20, %rsp 0x10aab7948 &lt;+8&gt;: leaq 0x1711(%rip), %rax ; @&quot;%d&quot; 0x10aab794f &lt;+15&gt;: movq %rdi, -0x8(%rbp) ä½¿ç”¨disassemble -låªè¾“å‡ºå½“å‰æ–­ç‚¹å¤„æ±‡ç¼–ä»£ç ï¼š 123456BreakPointTest`-[ViewController test] + 37 at ViewController.m:30 29 int b = 1;-&gt; 30 int c = a+b; 31 NSLog(@&quot;%d&quot;,c);BreakPointTest`-[ViewController test]:-&gt; 0x10aab7965 &lt;+37&gt;: movl -0x14(%rbp), %ecx ä½¿ç”¨disassemble -mæ··åˆæ˜¾ç¤ºæ±‡ç¼–ä»£ç ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556(lldb) disassemble -mBreakPointTest`-[ViewController test] at ViewController.m:27 26 &#125; 27 -(void)test&#123; 28 int a = 0;BreakPointTest`-[ViewController test]: 0x10aab7940 &lt;+0&gt;: pushq %rbp 0x10aab7941 &lt;+1&gt;: movq %rsp, %rbp 0x10aab7944 &lt;+4&gt;: subq $0x20, %rsp 0x10aab7948 &lt;+8&gt;: leaq 0x1711(%rip), %rax ; @&quot;%d&quot; 0x10aab794f &lt;+15&gt;: movq %rdi, -0x8(%rbp) 0x10aab7953 &lt;+19&gt;: movq %rsi, -0x10(%rbp)BreakPointTest`-[ViewController test] + 23 at ViewController.m:28 27 -(void)test&#123; 28 int a = 0; 29 int b = 1; 0x10aab7957 &lt;+23&gt;: movl $0x0, -0x14(%rbp)BreakPointTest`-[ViewController test] + 30 at ViewController.m:29 28 int a = 0; 29 int b = 1; 30 int c = a+b; 0x10aab795e &lt;+30&gt;: movl $0x1, -0x18(%rbp)BreakPointTest`-[ViewController test] + 37 at ViewController.m:30 29 int b = 1;-&gt; 30 int c = a+b; 31 NSLog(@&quot;%d&quot;,c);-&gt; 0x10aab7965 &lt;+37&gt;: movl -0x14(%rbp), %ecxBreakPointTest`-[ViewController test] + 40 at ViewController.m:30 29 int b = 1; 30 int c = a+b; 31 NSLog(@&quot;%d&quot;,c); 0x10aab7968 &lt;+40&gt;: addl -0x18(%rbp), %ecxBreakPointTest`-[ViewController test] + 43 at ViewController.m:30 29 int b = 1; 30 int c = a+b; 31 NSLog(@&quot;%d&quot;,c); 0x10aab796b &lt;+43&gt;: movl %ecx, -0x1c(%rbp)BreakPointTest`-[ViewController test] + 46 at ViewController.m:31 30 int c = a+b; 31 NSLog(@&quot;%d&quot;,c); 32 &#125; 0x10aab796e &lt;+46&gt;: movl -0x1c(%rbp), %esiBreakPointTest`-[ViewController test] + 49 at ViewController.m:31 30 int c = a+b; 31 NSLog(@&quot;%d&quot;,c); 32 &#125; 0x10aab7971 &lt;+49&gt;: movq %rax, %rdi 0x10aab7974 &lt;+52&gt;: movb $0x0, %al 0x10aab7976 &lt;+54&gt;: callq 0x10aab7c80 ; symbol stub for: NSLogBreakPointTest`-[ViewController test] + 59 at ViewController.m:32 31 NSLog(@&quot;%d&quot;,c); 32 &#125; 33 @end 0x10aab797b &lt;+59&gt;: addq $0x20, %rsp 0x10aab797f &lt;+63&gt;: popq %rbp 0x10aab7980 &lt;+64&gt;: retq ä½¿ç”¨disassemble -pè¿›è¡Œå½“å‰è¡Œçš„æ±‡ç¼–ä»£ç è¾“å‡ºï¼š 123456(lldb) disassemble -pBreakPointTest`-[ViewController test]:-&gt; 0x10aab7965 &lt;+37&gt;: movl -0x14(%rbp), %ecx 0x10aab7968 &lt;+40&gt;: addl -0x18(%rbp), %ecx 0x10aab796b &lt;+43&gt;: movl %ecx, -0x1c(%rbp) 0x10aab796e &lt;+46&gt;: movl -0x1c(%rbp), %esi 5.å…¶ä»–LLDBå¸¸ç”¨æŒ‡ä»¤btæŒ‡ä»¤ç”¨äºæ‰“å°å½“å‰çº¿ç¨‹æ‰€æœ‰å †æ ˆå—ä¿¡æ¯ï¼š 123456789101112131415161718192021222324(lldb) bt* thread #1: tid = 0x19f11, 0x000000010aab7965 BreakPointTest`-[ViewController test](self=0x00007fee9c11e330, _cmd=&quot;test&quot;) + 37 at ViewController.m:30, queue = &apos;com.apple.main-thread&apos;, stop reason = breakpoint 2.1 * frame #0: 0x000000010aab7965 BreakPointTest`-[ViewController test](self=0x00007fee9c11e330, _cmd=&quot;test&quot;) + 37 at ViewController.m:30 frame #1: 0x000000010aab792b BreakPointTest`-[ViewController viewDidLoad](self=0x00007fee9c11e330, _cmd=&quot;viewDidLoad&quot;) + 91 at ViewController.m:22 frame #2: 0x000000010ba95984 UIKit`-[UIViewController loadViewIfRequired] + 1198 frame #3: 0x000000010ba95cd3 UIKit`-[UIViewController view] + 27 frame #4: 0x000000010b96bfb4 UIKit`-[UIWindow addRootViewControllerViewIfPossible] + 61 frame #5: 0x000000010b96c69d UIKit`-[UIWindow _setHidden:forced:] + 282 frame #6: 0x000000010b97e180 UIKit`-[UIWindow makeKeyAndVisible] + 42 frame #7: 0x000000010b8f2ed9 UIKit`-[UIApplication _callInitializationDelegatesForMainScene:transitionContext:] + 4131 frame #8: 0x000000010b8f9568 UIKit`-[UIApplication _runWithMainScene:transitionContext:completion:] + 1769 frame #9: 0x000000010b8f6714 UIKit`-[UIApplication workspaceDidEndTransaction:] + 188 frame #10: 0x000000010e3638c8 FrontBoardServices`__FBSSERIALQUEUE_IS_CALLING_OUT_TO_A_BLOCK__ + 24 frame #11: 0x000000010e363741 FrontBoardServices`-[FBSSerialQueue _performNext] + 178 frame #12: 0x000000010e363aca FrontBoardServices`-[FBSSerialQueue _performNextFromRunLoopSource] + 45 frame #13: 0x000000010b46a301 CoreFoundation`__CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 17 frame #14: 0x000000010b46022c CoreFoundation`__CFRunLoopDoSources0 + 556 frame #15: 0x000000010b45f6e3 CoreFoundation`__CFRunLoopRun + 867 frame #16: 0x000000010b45f0f8 CoreFoundation`CFRunLoopRunSpecific + 488 frame #17: 0x000000010b8f5f21 UIKit`-[UIApplication _run] + 402 frame #18: 0x000000010b8faf09 UIKit`UIApplicationMain + 171 frame #19: 0x000000010aab7c5f BreakPointTest`main(argc=1, argv=0x00007fff55148668) + 111 at main.m:14 frame #20: 0x000000010dd1e92d libdyld.dylib`start + 1 frame #21: 0x000000010dd1e92d libdyld.dylib`start + 1 cæŒ‡ä»¤**ç»§ç»­è¿è¡Œçº¿ç¨‹å’Œprocess continue**æ•ˆæœä¸€æ ·ã€‚ callæŒ‡ä»¤**è¿è¡Œä¸€ä¸ªè¡¨è¾¾å¼ï¼Œ**å’Œ expression æ•ˆæœä¸€æ ·ã€‚ detachæŒ‡ä»¤**ç»“æŸå½“å‰è°ƒè¯•çš„çº¿ç¨‹ã€‚** diæŒ‡ä»¤**åæ±‡ç¼–å½“å‰å‡½æ•°ä¸disassemble**ç›¸åŒã€‚ exitæŒ‡ä»¤**é€€å‡ºlldbè°ƒè¯•å™¨ã€‚** finishæŒ‡ä»¤**å®Œæˆå½“å‰å †æ ˆå—çš„è°ƒè¯•ï¼Œ**ç¨‹åºä¼šç»§ç»­è¿è¡Œã€‚ næŒ‡ä»¤**è¿›è¡Œå•æ­¥è°ƒè¯•ï¼Œä¸next**ä½œç”¨ä¸€æ ·ã€‚ pæŒ‡ä»¤**ä¸expressionä½œç”¨ä¸€æ ·ã€‚** printæŒ‡ä»¤ç”¨äºå˜é‡çš„æ‰“å°ã€‚ ræŒ‡ä»¤**é‡æ–°è¿è¡Œåº”ç”¨ç¨‹åºã€‚** quitæŒ‡ä»¤ç»“æŸè°ƒè¯•ã€‚ bugreportæŒ‡ä»¤ç”¨äºåˆ›å»ºå †æ ˆä¿¡æ¯æŠ¥å‘Šã€‚ command historyæŒ‡ä»¤ç”¨äºæ‰“å°LLDBè°ƒè¯•å‘½ä»¤è®°å½•ã€‚ helpæŒ‡ä»¤ç”¨äºæŸ¥è¯¢LLDBç›¸å…³è°ƒè¯•æŒ‡ä»¤çš„ç”¨æ³•ã€‚ apropoæŒ‡ä»¤ç”¨äºæŸ¥è¯¢æŸäº›åŒ…å«æŸäº›å…³é”®å­—çš„æŒ‡ä»¤ã€‚ versionæŒ‡ä»¤ç”¨äºæŸ¥è¯¢LLDBè°ƒè¯•å™¨çš„ç‰ˆæœ¬ï¼Œå¦‚ä¸‹ï¼š 12(lldb) versionlldb-350.0.21.3 image listå‘½ä»¤ç”¨äºæ‰“å°å·¥ç¨‹ä¸­æ‰€æœ‰ç”¨åˆ°çš„åº“æ–‡ä»¶ã€‚ imageç›¸å…³æŒ‡ä»¤è¿˜æœ‰ä¸€ä¸ªååˆ†æœ‰ç”¨çš„å‘½ä»¤ï¼Œimage lookup --addresså¯ä»¥æŸ¥è¯¢æŸä¸ªå†…å­˜åœ°å€çš„å†…å®¹ï¼Œå¦‚ä¸‹ï¼š 123(lldb) image lookup --address 0x000000010373e885 Address: CoreFoundation[0x00000000000f4885] (CoreFoundation.__TEXT.__text + 996309) Summary: CoreFoundation`-[__NSArray0 objectAtIndex:] + 101 image lookup --typeç”¨äºæŸ¥è¯¢æŸç§ç±»å‹ä¸­åŒ…å«çš„å±æ€§ï¼Œå¦‚ä¸‹ï¼š 123456789101112131415161718192021222324(lldb) image lookup --type UILabelBest match found in /Users/vip/Library/Developer/Xcode/DerivedData/BreakPointTest-cearqrjqbntqcnfgiqzpxhyadewi/Build/Products/Debug-iphonesimulator/BreakPointTest.app/BreakPointTest:id = &#123;0x000082c1&#125;, name = &quot;UILabel&quot;, byte-size = 8, decl = UILabel.h:18, compiler_type = &quot;@interface UILabel : UIView@property ( getter = text,setter = setText:,readwrite,copy,nonatomic ) NSString * text;@property ( getter = font,setter = setFont:,readwrite,nonatomic ) UIFont * font;@property ( getter = textColor,setter = setTextColor:,readwrite,nonatomic ) UIColor * textColor;@property ( getter = shadowColor,setter = setShadowColor:,readwrite,nonatomic ) UIColor * shadowColor;@property ( getter = shadowOffset,setter = setShadowOffset:,assign,readwrite,nonatomic ) CGSize shadowOffset;@property ( getter = textAlignment,setter = setTextAlignment:,assign,readwrite,nonatomic ) NSTextAlignment textAlignment;@property ( getter = lineBreakMode,setter = setLineBreakMode:,assign,readwrite,nonatomic ) NSLineBreakMode lineBreakMode;@property ( getter = attributedText,setter = setAttributedText:,readwrite,copy,nonatomic ) NSAttributedString * attributedText;@property ( getter = highlightedTextColor,setter = setHighlightedTextColor:,readwrite,nonatomic ) UIColor * highlightedTextColor;@property ( getter = isHighlighted,setter = setHighlighted:,assign,readwrite,nonatomic ) BOOL highlighted;@property ( getter = isUserInteractionEnabled,setter = setUserInteractionEnabled:,assign,readwrite,nonatomic ) BOOL userInteractionEnabled;@property ( getter = isEnabled,setter = setEnabled:,assign,readwrite,nonatomic ) BOOL enabled;@property ( getter = numberOfLines,setter = setNumberOfLines:,assign,readwrite,nonatomic ) NSInteger numberOfLines;@property ( getter = adjustsFontSizeToFitWidth,setter = setAdjustsFontSizeToFitWidth:,assign,readwrite,nonatomic ) BOOL adjustsFontSizeToFitWidth;@property ( getter = baselineAdjustment,setter = setBaselineAdjustment:,assign,readwrite,nonatomic ) UIBaselineAdjustment baselineAdjustment;@property ( getter = minimumScaleFactor,setter = setMinimumScaleFactor:,assign,readwrite,nonatomic ) CGFloat minimumScaleFactor;@property ( getter = allowsDefaultTighteningForTruncation,setter = setAllowsDefaultTighteningForTruncation:,assign,readwrite,nonatomic ) BOOL allowsDefaultTighteningForTruncation;@property ( getter = preferredMaxLayoutWidth,setter = setPreferredMaxLayoutWidth:,assign,readwrite,nonatomic ) CGFloat preferredMaxLayoutWidth;@property ( getter = minimumFontSize,setter = setMinimumFontSize:,assign,readwrite,nonatomic ) CGFloat minimumFontSize;@property ( getter = adjustsLetterSpacingToFitWidth,setter = setAdjustsLetterSpacingToFitWidth:,assign,readwrite,nonatomic ) BOOL adjustsLetterSpacingToFitWidth;@end&quot; xæŒ‡ä»¤å¯ä»¥è¯»å–æŸæ®µå†…å­˜çš„äºŒè¿›åˆ¶æ•°æ®ï¼š 123(lldb) x 0x000000010373e8850x10373e885: 66 66 2e 0f 1f 84 00 00 00 00 00 55 48 89 e5 48 ff.........UH..H0x10373e895: 8d 3d 6d f2 28 00 e8 c0 d9 f0 ff 48 89 05 c1 58 .=m.(......H...X LLDBçš„ç”¨æ³•å’ŒæŠ€å·§è¿˜æœ‰å¾ˆå¤šï¼Œå®ƒå¯ä»¥å¤§å¤§æé«˜æˆ‘ä»¬è°ƒè¯•ä»£ç çš„æ•ˆç‡ï¼Œæœ‰ç–æ¼å’Œé”™è¯¯ä¹‹å¤„ï¼Œè¿˜æœ›ä¸å¿—åŒé“åˆçš„æœ‹å‹å…±åŒå­¦ä¹ è¿›æ­¥ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"æ—¥å¸¸æŠ€å·§","slug":"æ—¥å¸¸æŠ€å·§","permalink":"http://huishao.cc/categories/æ—¥å¸¸æŠ€å·§/"}],"tags":[],"keywords":[{"name":"æ—¥å¸¸æŠ€å·§","slug":"æ—¥å¸¸æŠ€å·§","permalink":"http://huishao.cc/categories/æ—¥å¸¸æŠ€å·§/"}]},{"title":"å¸¦åŠ¨ç”»æ¸è¿›æ•ˆæœä¸é¢œè‰²æ¸å˜çš„åœ†å¼§è¿›åº¦æ§ä»¶è®¾è®¡","slug":"198å¸¦åŠ¨ç”»æ¸è¿›æ•ˆæœä¸é¢œè‰²æ¸å˜çš„åœ†å¼§è¿›åº¦æ§ä»¶è®¾è®¡","date":"2016-04-15T16:00:00.000Z","updated":"2021-07-08T02:24:31.406Z","comments":true,"path":"2016/04/16/198å¸¦åŠ¨ç”»æ¸è¿›æ•ˆæœä¸é¢œè‰²æ¸å˜çš„åœ†å¼§è¿›åº¦æ§ä»¶è®¾è®¡/","link":"","permalink":"http://huishao.cc/2016/04/16/198å¸¦åŠ¨ç”»æ¸è¿›æ•ˆæœä¸é¢œè‰²æ¸å˜çš„åœ†å¼§è¿›åº¦æ§ä»¶è®¾è®¡/","excerpt":"","text":"å¸¦åŠ¨ç”»æ¸è¿›æ•ˆæœä¸é¢œè‰²æ¸å˜çš„åœ†å¼§è¿›åº¦æ§ä»¶è®¾è®¡ä»Šå¤©å¸®æœ‹å‹å†™äº†ä¸€ä¸ªå°å·§çš„åœ†å¼§è¿›åº¦æ§ä»¶ï¼Œæ§ä»¶ååˆ†ç®€å•ï¼Œä¸»è¦è®¾è®¡æ€è·¯é‡‡ç”¨CAShapeLayeræ¥åˆ›å»ºæ§ä»¶åœ†å¼§å½¢çŠ¶ï¼Œä½¿ç”¨CAGradientLayeræ¥è¿›è¡Œé¢œè‰²æ¸å˜çš„æ¸²æŸ“ï¼Œä¸¤è€…ç»“åˆæ¥åˆ›å»ºå‡ºé¢œè‰²æ¸å˜çš„åœ†å¼§è¿›åº¦æ¡æ§ä»¶ï¼Œå…³äºè¿›åº¦åŠ¨ç”»é‡‡ç”¨CoreAnimationåŠ¨ç”»å¤„ç†ã€‚æ§ä»¶è¿›è¡Œäº†ç®€æ´çš„å°è£…ï¼Œæä¾›äº†é¢å‘ä½¿ç”¨çš„æ¥å£ï¼Œéœ€è¦çš„æœ‹å‹å¯ä»¥è‡ªå–ï¼ŒDemoåœ°å€å¦‚ä¸‹ï¼š http://pan.baidu.com/s/1gfqDbtpã€‚ æ§ä»¶ä¸­ä¸»è¦æä¾›äº†ï¼Œæ”¹å˜è¿›åº¦æ¡æ¸å˜é¢œè‰²ï¼Œåœ†å¼§è¿›åº¦æ¡å®½åº¦ï¼Œå¸¦åŠ¨ç”»æ•ˆæœçš„æ”¹å˜è¿›åº¦ï¼Œæ”¹å˜è¿›åº¦ç™¾åˆ†æ¯”å­—ä½“é¢œè‰²ç­‰æ–¹æ³•ã€‚æ•ˆæœæ˜¯ä¾‹å¦‚å¦‚ä¸‹ï¼š æ”¹å˜å­—ä½“é¢œè‰² æ”¹å˜è¿›åº¦ æ”¹å˜è¿›åº¦æ¡é¢œè‰² æ”¹å˜è¿›åº¦æ¡å®½åº¦ æ§ä»¶æ¥å£çš„è®¾è®¡ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445#import &lt;UIKit/UIKit.h&gt;@interface YHBaseCircleView : UIView//==============ä¸‹é¢ä¸‰ä¸ªæ¸å˜è‰²å¿…é¡»å…¨éƒ¨è®¾ç½® å¦åˆ™æ•ˆæœå¯èƒ½ä¸é¢„æœŸä¸åŒ================///** *è®¾ç½®åœ†å¼§æ¸å˜è‰²çš„èµ·å§‹è‰² */@property(nonatomic,strong)UIColor * minLineColor;/** *è®¾ç½®åœ†å¼§æ¸å˜è‰²çš„ä¸­é—´è‰² */@property(nonatomic,strong)UIColor * midLineColor;/** *è®¾ç½®åœ†å¼§æ¸å˜è‰²çš„ç»ˆæ­¢è‰² */@property(nonatomic,strong)UIColor * maxLineColor;/** *è®¾ç½®åœ†å¼§èƒŒæ™¯è‰² */@property(nonatomic,strong)UIColor * lineTintColor;/** *è®¾ç½®è¿›åº¦ */@property(nonatomic,assign)CGFloat progress;/** *è®¾ç½®çº¿çš„å®½åº¦ max = 20 min = 0.5 */@property(nonatomic,assign)CGFloat lineWidth;/** *è®¾ç½®æ˜¯å¦æ˜¾ç¤ºç™¾åˆ†æ¯”æ ‡ç­¾ */@property(nonatomic,assign)BOOL showTipLabel;/** *è®¾ç½®ç™¾åˆ†æ¯”æ ‡ç­¾è¿›åº¦é¢œè‰² */@property(nonatomic,strong)UIColor * textColor;/** * @brief è®¾ç½®è¿›åº¦ * * @param progress è¿›åº¦ å–å€¼0-1 * * @param animated æ˜¯å¦æ˜¾ç¤ºåŠ¨ç”» * */-(void)setProgress:(CGFloat)progress animated:(BOOL)animated;@end å®ç°æ–¹æ³•å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225#import &quot;YHBaseCircleView.h&quot;@implementation YHBaseCircleView&#123; //è¿›åº¦æ§ä»¶å†…å®¹å°ºå¯¸ float _contentWidth; float _contentHeight; //å½¢çŠ¶layer CAShapeLayer * _shapeLayer; //é¢œè‰²æ¸å˜layer CAGradientLayer * _gradLayerR; CAGradientLayer * _gradLayerL; CALayer * _gradLayer; //å†…å®¹layer CAShapeLayer * _contentLayer; UILabel * _tipLabel; //ä¸“é—¨ç”¨æ¥æ›´æ–°label NSTimer * _timer; float _oldProgress; //è¿›åº¦æ–°æ—§è¿›åº¦å€¼ int old; int new;&#125;-(void)awakeFromNib&#123; [self reloadView];&#125;-(instancetype)initWithFrame:(CGRect)frame&#123; self = [super initWithFrame:frame]; if (self) &#123; [self reloadView]; &#125; return self;&#125;-(void)reloadView&#123; self.backgroundColor = [UIColor clearColor]; //å–è®¾ç½®çš„frameçš„æœ€å°é•¿æˆ–æ¬¾ä½œä¸ºå†…å®¹åŒºåŸŸ _contentWidth = _contentHeight = CGRectGetWidth(self.frame)&gt;CGRectGetHeight(self.frame)?CGRectGetHeight(self.frame):CGRectGetWidth(self.frame); //åˆ›å»ºå†…å®¹layer _contentLayer = [CAShapeLayer layer]; _contentLayer.bounds = CGRectMake(0, 0, _contentWidth, _contentHeight); _contentLayer.position = CGPointMake(_contentWidth/2, _contentHeight/2); _contentLayer.backgroundColor = [UIColor clearColor].CGColor; //è¿›è¡Œè¾¹ç•Œæç»˜ é»˜è®¤çº¿å®½ä¸º4px UIBezierPath * pathT = [UIBezierPath bezierPathWithArcCenter:_contentLayer.position radius:_contentWidth/2-2 startAngle:-M_PI_2 endAngle:M_PI_2*3 clockwise:YES]; _contentLayer.path = pathT.CGPath; //é»˜è®¤å¡«å……é¢œè‰²ä¸ºç™½è‰² _contentLayer.fillColor = [UIColor whiteColor].CGColor; _contentLayer.lineWidth = 4; _contentLayer.strokeColor = [UIColor grayColor].CGColor; [self.layer addSublayer:_contentLayer]; _shapeLayer = [CAShapeLayer layer]; _shapeLayer.bounds = CGRectMake(0, 0, _contentWidth, _contentHeight); _shapeLayer.position = CGPointMake(_contentWidth/2, _contentHeight/2); _shapeLayer.backgroundColor = [UIColor clearColor].CGColor;// _shapeLayer.lineCap = kCALineCapRound; //è¿›è¡Œè¾¹ç•Œæç»˜ é»˜è®¤çº¿å®½ä¸º4px UIBezierPath * path = [UIBezierPath bezierPathWithArcCenter:_shapeLayer.position radius:_contentWidth/2-2 startAngle:-M_PI_2 endAngle:M_PI_2*3 clockwise:YES]; _shapeLayer.path = path.CGPath; _shapeLayer.fillColor = [UIColor clearColor].CGColor; _shapeLayer.lineWidth = 4; _shapeLayer.strokeColor = [UIColor redColor].CGColor; //é»˜è®¤é»„è½¬æ©™è½¬çº¢çš„è¾¹ç•Œçº¿ åˆ†åˆ«ç”±ä¸¤ä¸ªgradLayerè¿›è¡Œæ§åˆ¶ _gradLayer = [CALayer layer]; _gradLayer.bounds = _contentLayer.bounds; _gradLayer.position = _contentLayer.position; _gradLayer.backgroundColor = [UIColor clearColor].CGColor; _gradLayerL = [CAGradientLayer layer]; _gradLayerL.bounds = CGRectMake(0, 0, _contentWidth/2, _contentHeight); _gradLayerL.locations = @[@0.6]; [_gradLayerL setColors:@[(id)[UIColor redColor].CGColor,(id)[UIColor orangeColor].CGColor]]; _gradLayerL.position = CGPointMake(_gradLayerL.bounds.size.width/2, _gradLayerL.bounds.size.height/2); [_gradLayer addSublayer:_gradLayerL]; _gradLayerR = [CAGradientLayer layer]; _gradLayerR.locations = @[@0.6]; _gradLayerR.bounds = CGRectMake(_contentWidth/2, 0, _contentWidth/2, _contentHeight); [_gradLayerR setColors:@[(id)[UIColor yellowColor].CGColor,(id)[UIColor orangeColor].CGColor]]; _gradLayerR.position = CGPointMake(_gradLayerR.bounds.size.width/2+_contentWidth/2, _gradLayerR.bounds.size.height/2); [_gradLayer addSublayer:_gradLayerR]; [_gradLayer setMask:_shapeLayer]; [_contentLayer addSublayer:_gradLayer]; //setteræ–¹æ³•åˆå§‹åŒ– _minLineColor = [UIColor yellowColor]; _midLineColor = [UIColor orangeColor]; _maxLineColor = [UIColor redColor]; _lineTintColor = [UIColor grayColor]; _progress = 1; _lineWidth = 4; _lineTintColor = [UIColor grayColor]; _textColor = [UIColor orangeColor]; _oldProgress = 1; //åˆ›å»ºtiplabel [self creatTipLabel]; _timer = [NSTimer scheduledTimerWithTimeInterval:1/60.0 target:self selector:@selector(updateLabel) userInfo:nil repeats:YES]; _timer.fireDate = [NSDate distantFuture]; &#125;-(void)removeFromSuperview&#123; _timer.fireDate = [NSDate distantFuture]; [_timer invalidate]; _timer =nil; [super removeFromSuperview];&#125;-(void)updateLabel&#123; if (old&lt;new) &#123; old++; NSMutableAttributedString * attri = [[NSMutableAttributedString alloc]initWithString:[NSString stringWithFormat:@&quot;%d%%&quot;,old]]; [attri addAttribute:NSFontAttributeName value:[UIFont systemFontOfSize:22] range:NSMakeRange(0, attri.length-1)]; [attri addAttribute:NSFontAttributeName value:[UIFont systemFontOfSize:15] range:NSMakeRange(attri.length-1, 1)]; [attri addAttribute:NSForegroundColorAttributeName value:_textColor range:NSMakeRange(0, attri.length)]; _tipLabel.attributedText = attri; &#125;else if (old&gt;new)&#123; old--; NSMutableAttributedString * attri = [[NSMutableAttributedString alloc]initWithString:[NSString stringWithFormat:@&quot;%d%%&quot;,old]]; [attri addAttribute:NSFontAttributeName value:[UIFont systemFontOfSize:22] range:NSMakeRange(0, attri.length-1)]; [attri addAttribute:NSFontAttributeName value:[UIFont systemFontOfSize:15] range:NSMakeRange(attri.length-1, 1)]; [attri addAttribute:NSForegroundColorAttributeName value:_textColor range:NSMakeRange(0, attri.length)]; _tipLabel.attributedText = attri; &#125;else&#123; _timer.fireDate = [NSDate distantFuture]; &#125;&#125;-(void)setMinLineColor:(UIColor *)minLineColor&#123; _minLineColor = minLineColor; [_gradLayerR setColors:@[(id)_minLineColor.CGColor,(id)_midLineColor.CGColor]]; [_gradLayerL setColors:@[(id)_maxLineColor.CGColor,(id)_midLineColor.CGColor]];&#125;-(void)setMidLineColor:(UIColor *)midLineColor&#123; _midLineColor = midLineColor; [_gradLayerR setColors:@[(id)_minLineColor.CGColor,(id)_midLineColor.CGColor]]; [_gradLayerL setColors:@[(id)_maxLineColor.CGColor,(id)_midLineColor.CGColor]];&#125;-(void)setMaxLineColor:(UIColor *)maxLineColor&#123; _maxLineColor = maxLineColor; [_gradLayerR setColors:@[(id)_minLineColor.CGColor,(id)_midLineColor.CGColor]]; [_gradLayerL setColors:@[(id)_maxLineColor.CGColor,(id)_midLineColor.CGColor]];&#125;-(void)setTintColor:(UIColor *)tintColor&#123; _lineTintColor = tintColor; _contentLayer.strokeColor = tintColor.CGColor;&#125;-(void)setProgress:(CGFloat)progress&#123; _oldProgress = _progress; _progress=progress; _shapeLayer.strokeStart = 0; _shapeLayer.strokeEnd = progress&gt;1?1:progress; NSMutableAttributedString * attri ; if (progress==1) &#123; attri = [[NSMutableAttributedString alloc]initWithString:@&quot;100%&quot;]; &#125;else&#123; attri = [[NSMutableAttributedString alloc]initWithString:[NSString stringWithFormat:@&quot;%2d%%&quot;,(int)(progress*100)]]; &#125; [attri addAttribute:NSFontAttributeName value:[UIFont systemFontOfSize:22] range:NSMakeRange(0, attri.length-1)]; [attri addAttribute:NSFontAttributeName value:[UIFont systemFontOfSize:15] range:NSMakeRange(attri.length-1, 1)]; [attri addAttribute:NSForegroundColorAttributeName value:_textColor range:NSMakeRange(0, attri.length)]; _tipLabel.attributedText = attri;&#125;-(void)setProgress:(CGFloat)progress animated:(BOOL)animated&#123; _oldProgress = _progress; _progress = progress; old = (int)(_oldProgress*100); new = (int)(_progress*100); CABasicAnimation * ani = [CABasicAnimation animationWithKeyPath:@&quot;strokeEnd&quot;]; ani.toValue = progress&gt;1?@1:@(progress); ani.duration = 0.3; ani.delegate=self; ani.fillMode=kCAFillModeForwards; ani.removedOnCompletion=NO; [_shapeLayer addAnimation:ani forKey:nil]; _timer.fireDate = [NSDate distantPast]; &#125;- (void)dealloc&#123; &#125;-(void)animationDidStop:(CAAnimation *)anim finished:(BOOL)flag&#123; if (flag) &#123; [_shapeLayer removeAllAnimations]; _shapeLayer.strokeEnd = _progress&gt;1?1:_progress; &#125;&#125;-(void)setLineWidth:(CGFloat)lineWidth&#123; if (lineWidth&lt;0.5) &#123; lineWidth=0.5; &#125; if (lineWidth&gt;20) &#123; lineWidth = 20; &#125; _lineWidth = lineWidth; UIBezierPath * path = [UIBezierPath bezierPathWithArcCenter:_shapeLayer.position radius:_contentWidth/2-lineWidth/2 startAngle:-M_PI_2 endAngle:M_PI_2*3 clockwise:YES]; _shapeLayer.path = path.CGPath; _shapeLayer.fillColor = [UIColor clearColor].CGColor; _shapeLayer.lineWidth = lineWidth; _shapeLayer.strokeColor = [UIColor redColor].CGColor; [_gradLayer setMask:_shapeLayer]; UIBezierPath * pathT = [UIBezierPath bezierPathWithArcCenter:_contentLayer.position radius:_contentWidth/2-lineWidth/2 startAngle:-M_PI_2 endAngle:M_PI_2*3 clockwise:YES]; _contentLayer.path = pathT.CGPath; _contentLayer.lineWidth = lineWidth;&#125;-(void)setTextColor:(UIColor *)textColor&#123; _textColor = textColor; NSMutableAttributedString * attr = [[NSMutableAttributedString alloc]initWithAttributedString:_tipLabel.attributedText]; [attr addAttribute:NSForegroundColorAttributeName value:textColor range:NSMakeRange(0, attr.length)]; _tipLabel.attributedText = attr;&#125;-(void)creatTipLabel&#123; _tipLabel = [[UILabel alloc]initWithFrame:CGRectMake(0, 0, sqrt(2)/2*(_contentWidth-_lineWidth*2), sqrt(2)/2*(_contentWidth-_lineWidth*2))]; _tipLabel.center = CGPointMake(self.frame.size.width/2, self.frame.size.height/2); _tipLabel.backgroundColor = [UIColor clearColor]; _tipLabel.textAlignment = NSTextAlignmentCenter; NSMutableAttributedString * attri = [[NSMutableAttributedString alloc]initWithString:@&quot;100%&quot;]; [attri addAttribute:NSFontAttributeName value:[UIFont systemFontOfSize:22] range:NSMakeRange(0, 3)]; [attri addAttribute:NSFontAttributeName value:[UIFont systemFontOfSize:15] range:NSMakeRange(3, 1)]; [attri addAttribute:NSForegroundColorAttributeName value:[UIColor orangeColor] range:NSMakeRange(0, 4)]; _tipLabel.attributedText = attri; [self addSubview:_tipLabel];&#125;@end ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"Swiftä¸­æ„é€ æ–¹æ³•çš„è§£æ","slug":"197Swiftä¸­æ„é€ æ–¹æ³•çš„è§£æ","date":"2016-04-14T16:00:00.000Z","updated":"2021-07-08T02:23:33.101Z","comments":true,"path":"2016/04/15/197Swiftä¸­æ„é€ æ–¹æ³•çš„è§£æ/","link":"","permalink":"http://huishao.cc/2016/04/15/197Swiftä¸­æ„é€ æ–¹æ³•çš„è§£æ/","excerpt":"","text":"Swiftä¸­æ„é€ æ–¹æ³•çš„è§£æä¸€ã€å¼•è¨€æ„é€ æ–¹æ³•æ˜¯ä¸€ä¸ªç±»åˆ›å»ºå¯¹è±¡æœ€å…ˆä¹Ÿæ˜¯å¿…é¡»è°ƒç”¨çš„æ–¹æ³•ï¼Œåœ¨Objective-Cä¸­ï¼Œå¼€å‘è€…æ›´ä¹ æƒ¯ç§°è¿™ç±»æ–¹æ³•ä¸ºåˆå§‹åŒ–æ–¹æ³•ã€‚åœ¨Objective-Cä¸­çš„åˆå§‹åŒ–æ–¹æ³•ä¸æ™®é€šå‡½æ•°ç›¸æ¯”é™¤äº†è¦ä»¥initæŠ¬å¤´å¤–å¹¶æ— å¤ªä¸¥æ ¼çš„åˆ†ç•Œï¼Œè€Œåœ¨Swiftè¯­è¨€ä½“ç³»ä¸­ï¼Œæ„é€ æ–¹æ³•ä¸æ™®é€šçš„æ–¹æ³•åˆ†ç•Œååˆ†ä¸¥æ ¼ï¼Œä»æ ¼å¼å†™æ³•ä¸Šå°±æœ‰ä¸åŒï¼Œæ™®é€šæ–¹æ³•å‡½æ•°è¦ä»¥funcå£°æ˜ï¼Œæ„é€ æ–¹æ³•ç»Ÿä¸€ä¸ºinitå‘½åï¼Œä¸éœ€è¦funcå…³é”®å­—å£°æ˜ï¼Œä¸åŒçš„æ„é€ æ–¹æ³•é‡‡ç”¨æ–¹æ³•é‡è½½çš„æ–¹å¼åˆ›å»ºã€‚ äºŒã€æ„é€ æ–¹æ³•çš„å¤å†™ä¸é‡è½½åœ¨Objective-Cä¸­ï¼Œä¸åŒçš„åˆå§‹åŒ–æ–¹æ³•å°±æ˜¯ä¸åŒçš„å‡½æ•°ï¼Œè¿™ä¾¿ä¸å­˜åœ¨æ–¹æ³•é‡è½½çš„æ¦‚å¿µã€‚Swiftä¸­è¦åˆ›å»ºè‡ªå®šä¹‰çš„æ„é€ æ–¹æ³•ï¼Œéœ€è¦å¼€å‘è€…å¯¹initæ„é€ æ–¹æ³•è¿›è¡Œé‡è½½æ“ä½œã€‚ä»»ä½•ä¸€ä¸ªè‡ªå®šä¹‰çš„ç±»ï¼Œåªè¦å…¶æœ‰çˆ¶ç±»ï¼Œé™¤äº†å¯ä»¥ç»§æ‰¿ä¸‹æ¥çˆ¶ç±»å·²æœ‰çš„æ„é€ æ–¹æ³•å¤–ï¼Œè¿˜å¯ä»¥å¤å†™çˆ¶ç±»çš„æ„é€ æ–¹æ³•ï¼Œä½¿å…¶é€‚ç”¨äºè‡ªèº«ã€‚å’ŒObjective-Cç±»ä¼¼ï¼Œå¤å†™çˆ¶ç±»çš„æ„é€ æ–¹æ³•æ—¶ï¼Œè¦åœ¨å…¶ä¸­è°ƒç”¨çˆ¶ç±»çš„æ„é€ æ–¹æ³•ï¼Œé‡è½½å¯ä»¥ç†è§£ä¸ºä¸€ç§ç‰¹æ®Šçš„å¤å†™çˆ¶ç±»æ„é€ æ–¹æ³•ï¼Œå› æ­¤åœ¨é‡è½½çš„æ„é€ æ–¹æ³•ä¸­ä¹Ÿè¦è°ƒç”¨çˆ¶ç±»çš„æ„é€ æ–¹æ³•ã€‚ åˆ›å»ºä¸€ä¸ªç»§æ‰¿äºNSObjectçš„ç±»ï¼Œå¤å†™æ„é€ æ–¹æ³•ï¼Œä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425class ClassOne: NSObject &#123; //å£°æ˜ä¸€ä¸ªæœ¬ç±»ç‰¹æœ‰çš„å¸¸é‡ var tip:Int //å¤å†™çˆ¶ç±»çš„æ„é€ æ–¹æ³• éœ€è¦ç”¨overrideå…³é”®å­— override init() &#123; //æ„é€ æ–¹æ³•ä¸­è¦å¯¹æ‰€æœ‰æˆå‘˜å¸¸é‡å®Œæˆåˆ›å»º tip = 1; //åœ¨åˆ›å»ºå®Œæ‰€æœ‰æˆå‘˜å¸¸é‡å è°ƒç”¨çˆ¶ç±»æ„é€ æ–¹æ³• super.init() &#125; //é‡è½½æ„é€ æ–¹æ³•1 init(one:Int)&#123; tip=one super.init() &#125; //é‡è½½æ„é€ æ–¹æ³•2 ä½¿ç”¨convenienceå…³é”®å­—è¿›è¡Œä¿®é¥° convenience init(two:String) &#123; //ä½¿ç”¨convenienceå…³é”®å­—è¿›è¡Œä¿®é¥°çš„æ„é€ æ–¹æ³•è¦è°ƒç”¨æœ¬ç±»çš„æ„é€ æ–¹æ³•è¿›è¡Œ self.init(one: two.characters.count) &#125; //é‡è½½æ„é€ æ–¹æ³•3 ä½¿ç”¨requiredå…³é”®å­—è¿›è¡Œä¿®é¥° ä½¿ç”¨requiredå…³é”®å­—è¿›è¡Œä¿®é¥°çš„æ„é€ æ–¹æ³•å­ç±»å¿…é¡»ç»§æ‰¿æˆ–å¤å†™ required init(three:Float) &#123; tip=10 super.init() &#125; ä¸Šé¢ç¤ºä¾‹ä»£ç ä¸­ï¼Œä¸å¸¦å‚æ•°çš„init()æ–¹æ³•ä¸ºå¤å†™çˆ¶ç±»çš„æ–¹æ³•ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨å…³é”®å­—overrideæ¥ä¿®é¥°ã€‚é‡è½½æ„é€ æ–¹æ³•1å¸¦ä¸€ä¸ªIntç±»å‹çš„ å‚æ•°ï¼Œçˆ¶ç±»ä¸­å¹¶æ²¡æœ‰è¿™ä¸ªæ„é€ æ–¹æ³•ï¼Œä½†æ˜¯åœ¨å…¶å®ç°ä¸­ï¼Œä¾ç„¶éœ€è¦è°ƒç”¨çˆ¶ç±»ä¸­çš„æŸä¸ªæ„é€ æ–¹æ³•å®Œæˆã€‚æ„é€ æ–¹æ³•2æ˜¯ä¸€ä¸ªå¸¦Stringç±»å‹å‚æ•°çš„æ„é€ æ–¹æ³•ï¼Œå…¶ç”¨convenienceå…³é”®å­—ä¸ºæ„é€ æ–¹æ³•çš„ä¸€ä¸ªä¿®é¥°å…³é”®å­—ï¼Œåé¢ä¼šä»‹ç»ã€‚æ„é€ æ–¹æ³•3ä¸ºä¸€ä¸ªå¸¦Floatç±»å‹å‚æ•°çš„æ„é€ æ–¹æ³•ï¼Œä½†å…¶ä½¿ç”¨requiredå…³é”®å­—è¿›è¡Œäº†ä¿®é¥°ï¼Œä½¿ç”¨requiredå…³é”®å­—è¿›è¡Œä¿®é¥°çš„æ„é€ æ–¹æ³•å­ç±»å¿…é¡»ç»§æ‰¿æˆ–è€…å¤å†™ã€‚æ„é€ æ–¹æ³•1ï¼Œ2ï¼Œ3éƒ½æ˜¯å¯¹init()æ„é€ æ–¹æ³•çš„ä¸€ç§é‡è½½ï¼Œä½†å´æ˜¯3ä¸­ç±»å‹å…¨ç„¶ä¸åŒçš„æ„é€ æ–¹æ³•ã€‚ ä¸‰ã€Designatedæ„é€ æ–¹æ³•ä¸Convenienceæ„é€ æ–¹æ³•Swiftä¸­çš„æ„é€ æ–¹æ³•åˆ†ä¸ºDesignatedæ„é€ æ–¹æ³•ä¸Convenienceæ„é€ æ–¹æ³•ä¸¤ç±»ï¼ŒDesignatedæ„é€ æ–¹æ³•ä¹Ÿè¢«ç§°ä¸ºæŒ‡å®šæ„é€ æ–¹æ³•ï¼ŒConvenienceæ„é€ æ–¹æ³•ä¹Ÿè¢«ç§°ä¸ºæ–¹ä¾¿æ„é€ æ–¹æ³•ã€‚Designatedæ„é€ æ–¹æ³•ä¸åŠ ä»»ä½•ä¿®é¥°å…³é”®å­—ï¼ŒConvenienceæ„é€ æ–¹æ³•éœ€è¦ä½¿ç”¨Convenienceå…³é”®å­—è¿›è¡Œä¿®é¥°ã€‚å¯ä»¥è¿™æ ·ç†è§£ï¼ŒConvenienceç±»å‹çš„æ„é€ æ–¹æ³•æ˜¯ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ä»Designatedæ„é€ æ–¹æ³•ä¸­åˆ†æ”¯å‡ºæ¥çš„æ„é€ æ–¹æ³•ï¼Œå®˜æ–¹æ–‡æ¡£ä¸­æœ‰å¦‚ä¸‹æè¿°ï¼š 1.å­ç±»Designatedæ„é€ æ–¹æ³•ä¸­å¿…é¡»è°ƒç”¨çˆ¶ç±»çš„Designatedæ„é€ æ–¹æ³•ã€‚ 2.Convenienceæ„é€ æ–¹æ³•ä¸­å¿…é¡»è°ƒç”¨å½“å‰ç±»çš„æ„é€ æ–¹æ³•ã€‚ 3.Convenienceæ„é€ æ–¹æ³•å½’æ ¹ç»“åº•è¦è°ƒç”¨åˆ°Designatedæ„é€ æ–¹æ³•ã€‚ å®˜æ–¹æ–‡æ¡£çš„ä¸€å¼ å›¾å¯ä»¥æ¸…æ™°çš„æè¿°ä¸Šè¿°å…³ç³»ï¼š å››ã€æ„é€ æ–¹æ³•çš„ç»§æ‰¿å…³ç³»å…³äºå­ç±»ç»§æ‰¿çˆ¶ç±»çš„æ„é€ æ–¹æ³•æœ‰è¿™æ ·å‡ ä¸ªç‰¹æ€§ï¼š 1.å¦‚æœå­ç±»æ²¡æœ‰å¤å†™ä»»ä½•çˆ¶ç±»çš„æ„é€ æ–¹æ³•ï¼Œåˆ™é»˜è®¤å­ç±»å°†ç»§æ‰¿æ‰€æœ‰çˆ¶ç±»çš„æ„é€ æ–¹æ³•ï¼ŒåŒ…æ‹¬Designatedæ„é€ æ–¹æ³•ä¸Convenienceæ„é€ æ–¹æ³•ã€‚ 2.å¦‚æœå­ç±»å¤å†™äº†çˆ¶ç±»æŸä¸€æ„é€ æ–¹æ³•ï¼Œåˆ™å­ç±»é»˜è®¤ä¸åœ¨ç»§æ‰¿æ‰€æœ‰çˆ¶ç±»çš„æ„é€ æ–¹æ³•ï¼Œå¯¹äºDesignatedç±»å‹çš„æ„é€ æ–¹æ³•ï¼Œå­ç±»å¤å†™äº†å“ªäº›ï¼Œå“ªäº›æ‰èƒ½å¤Ÿè¢«ä½¿ç”¨ï¼Œå¯¹äºConvenienveç±»å‹çš„æ„é€ æ–¹æ³•ï¼Œå­ç±»å¤å†™çš„å…¶è°ƒç”¨çš„Designatedæ„é€ æ–¹æ³•åä¼šè¢«è‡ªåŠ¨ç»§æ‰¿ã€‚ 3.å¦‚æœçˆ¶ç±»ä¸­çš„æ„é€ æ–¹æ³•æ˜¯requiredä¿®é¥°çš„ï¼Œåˆ™å­ç±»å¿…é¡»è¿›è¡Œç»§æ‰¿æˆ–å¤å†™ã€‚ æ›¾ç»æœ‰æœ‹å‹å’Œæˆ‘æŠ±æ€¨ï¼ŒObjective-Cä¸­çš„ç»§æ‰¿æ˜¯ä¸€ç§ååˆ†ä¸äººæ€§ï¼Œå®ƒå¼ºåˆ¶å­ç±»ç»§æ‰¿æ‰€æœ‰çˆ¶ç±»çš„æ–¹æ³•ä¸å±æ€§æ— è®ºå­ç±»æ˜¯å¦éœ€è¦ï¼Œåˆ†æä¸Šé¢çš„ä¸€äº›è§„åˆ™å¯ä»¥å‘ç°ï¼ŒSwiftä¸Objective-Cç›¸æ¯”ï¼Œåœ¨æ„é€ æ–¹æ³•æ–¹é¢è¯­æ³•ä¼šæ›´åŠ ä¸¥æ ¼ï¼Œè¿™æ ·åšåœ¨ç¼–ç¨‹ä¸Šæ›´åŠ å®‰å…¨ã€‚åœ¨Objective-Cä¸­ï¼Œå­ç±»å°†è¢«å¼ºåˆ¶ç»§æ‰¿æ‰€æœ‰çˆ¶ç±»çš„åˆå§‹åŒ–æ–¹æ³•ï¼Œè¿™æ ·å¼€å‘è€…åœ¨ä½¿ç”¨æ—¶å¸¸å¸¸ä¼šå‡ºç°ç–‘æƒ‘ï¼Œæœ‰æ—¶ä¸€ä¸ªå­ç±»å¾€å¾€æœ‰ç‰¹å®šçš„åˆå§‹åŒ–æ–¹æ³•ï¼Œä»…ä»…é€šè¿‡çˆ¶ç±»çš„åˆå§‹åŒ–æ–¹æ³•ä¸èƒ½å¤Ÿæ­£ç¡®çš„å®Œæˆåˆå§‹åŒ–ï¼Œåœ¨ç¼–ç¨‹æ—¶ï¼Œå¾€å¾€éœ€è¦ç‰¹æ®Šæ³¨é‡Šæ¥æç¤ºå¼€å‘è€…ã€‚Swiftè®¾å®šçš„è¿™äº›æ„é€ æ–¹æ³•åŸåˆ™å¯ä»¥å°†æ— å…³çš„çˆ¶ç±»æ„é€ æ–¹æ³•å‰”é™¤åœ¨å¤–ï¼Œåœ¨ç¼–ç¨‹æ—¶æ›´åŠ ä¸¥æ ¼å®‰å…¨ï¼Œå‡å°‘ç–‘æƒ‘ä¸ä¸å¯æ§å› ç´ ã€‚ äº”ã€æ„é€ æ–¹æ³•çš„å®ç°åŸåˆ™æ— è®ºDesignatedç±»å‹çš„æ„é€ æ–¹æ³•è¿˜æ˜¯Convenienceç±»å‹çš„æ„é€ æ–¹æ³•ï¼Œåªè¦å…¶æœ‰çˆ¶ç±»ï¼Œæœ€ç»ˆéƒ½è¦å®ç°çˆ¶ç±»çš„Designatedæ„é€ æ–¹æ³•ã€‚Swiftè¯­è¨€è¦æ±‚ï¼Œåœ¨æ„é€ æ–¹æ³•ä¸­è¦å®Œæˆæ‰€æœ‰æˆå‘˜å¸¸é‡æˆ–è€…å˜é‡çš„æ„é€ æˆ–èµ‹å€¼(optionalå€¼é™¤å¤–)ã€‚åœ¨å¯¹æˆå‘˜å¸¸é‡æˆ–å˜é‡è¿›è¡Œæ„é€ èµ‹å€¼æ—¶ï¼Œè¦åœ¨è°ƒç”¨çˆ¶ç±»çš„åˆå§‹åŒ–æ–¹æ³•ä¹‹å‰ï¼Œè¿™é‡Œè¿˜æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œçˆ¶ç±»çš„æˆå‘˜å±æ€§ä¹Ÿä¼šè¢«å­ç±»ç»§æ‰¿ï¼Œå¦‚æœè¦åœ¨å­ç±»å¤å†™çš„çˆ¶ç±»æ–¹æ³•ä¸­å¯¹ç»§æ‰¿æ¥çš„çˆ¶ç±»æˆå‘˜å±æ€§è¿›è¡Œé‡æ–°æ„é€ æˆ–èµ‹å€¼ï¼Œåˆ™å¿…é¡»åœ¨è°ƒç”¨çˆ¶ç±»æ„é€ æ–¹æ³•ä¹‹åï¼Œä¾‹å¦‚åˆ›å»ºClassTwoç±»ç»§æ‰¿äºClassOneï¼Œå¤å†™æ–¹æ³•å¦‚ä¸‹ï¼š 123456789101112131415161718class ClassTwo: ClassOne &#123; //å­ç±»è‡ªå·±çš„å±æ€§ let tipTwo:Int override init() &#123; //è°ƒç”¨çˆ¶ç±»æ„é€ æ–¹æ³•å‰è¿›è¡Œè‡ªå·±å±æ€§çš„æ„é€  tipTwo = 1 //è°ƒç”¨çˆ¶ç±»æ„é€ æ–¹æ³• super.init() //å¯¹ä»çˆ¶ç±»ç»§æ‰¿æ¥çš„å±æ€§è¿›è¡Œé‡æ„é€  tip = 1000; &#125; required init(three: Float) &#123; fatalError(&quot;init(three:) has not been implemented&quot;) &#125; &#125; Swiftè¯­è¨€è¿™ç§å¼ºåˆ¶åŒ–å¾—æ„é€ è§„åˆ™ï¼Œèƒ½å¤Ÿä¿è¯ä¸€ä¸ªç±»åœ¨å®Œæˆæ„é€ æ—¶ï¼Œå…¶å†…éƒ¨çš„æ‰€æœ‰å±æ€§éƒ½æ„é€ å®Œæˆã€‚åœ¨ä½¿ç”¨Objective-Cè¿›è¡Œå¼€å‘æ—¶ï¼Œå¾ˆå¤šåˆå­¦è€…éƒ½å¯èƒ½ä¼šé‡åˆ°è¿™æ ·ä¸€ç§æƒ…å†µï¼Œå®Œæˆäº†æŸä¸ªç±»çš„åˆå§‹åŒ–ï¼Œä½†å‘ç±»çš„å±æ€§è¿›è¡Œèµ‹å€¼æ—¶å´æ²¡æœ‰æˆåŠŸï¼Œå› ä¸ºObjective-Cä¸­å¹¶æ²¡æœ‰è¿™æ ·çš„è¯­æ³•ï¼Œåœ¨ç±»åˆå§‹åŒ–æˆåŠŸåï¼Œå…¶å±æ€§æ˜¯å¦åˆå§‹åŒ–äº†å®Œå…¨å–å†³äºå¼€å‘è€…ï¼ŒSwiftä¼˜åŒ–äº†è¿™ä¸€è®¾è®¡ã€‚ ç»¼ä¸Šå¯ä»¥äº†è§£ï¼ŒSwiftè¯­è¨€è™½ç„¶æ›´åŠ ä¸¥æ ¼ï¼Œå´å°†æ›´å¤šæœ¬æ¥éœ€è¦å¼€å‘è€…æ³¨æ„çš„åœ°æ–¹äº¤ç”±äº†ç¼–è¯‘å™¨ï¼Œå®é™…ä¸Šæ˜¯å‡è½»äº†å¼€å‘è€…çš„è´Ÿæ‹…ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"COME ON SWIFT","slug":"COME-ON-SWIFT","permalink":"http://huishao.cc/categories/COME-ON-SWIFT/"}],"tags":[],"keywords":[{"name":"COME ON SWIFT","slug":"COME-ON-SWIFT","permalink":"http://huishao.cc/categories/COME-ON-SWIFT/"}]},{"title":"Macç³»ç»ŸGitç”Ÿæˆsshå…¬é’¥","slug":"196Macç³»ç»ŸGitç”Ÿæˆsshå…¬é’¥","date":"2016-04-12T16:00:00.000Z","updated":"2021-07-08T02:22:29.269Z","comments":true,"path":"2016/04/13/196Macç³»ç»ŸGitç”Ÿæˆsshå…¬é’¥/","link":"","permalink":"http://huishao.cc/2016/04/13/196Macç³»ç»ŸGitç”Ÿæˆsshå…¬é’¥/","excerpt":"","text":"Macç³»ç»ŸGitç”Ÿæˆsshå…¬é’¥åœ¨ä½¿ç”¨Gitä»“åº“è¿›è¡Œä»£ç ç®¡ç†æ—¶ï¼Œæ–°çš„ç”µè„‘ä¸Šå¾€å¾€éœ€è¦ç”Ÿæˆsshå…¬é’¥è¿›è¡ŒåŒ¹é…ï¼ŒMacç³»ç»Ÿç”ŸæˆGitå…¬é’¥è¿‡ç¨‹å¦‚ä¸‹ï¼š 1.æ£€æŸ¥æœ¬æœºæ˜¯å¦å·²æœ‰å…¬é’¥ åœ¨ç»ˆç«¯ä¸­è¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š 1$ cd ~/.ssh 2.å¦‚æœç”µè„‘ä¸­æœ‰ä»¥å‰é—ç•™çš„å¯†é’¥ï¼Œå°†å…¶åˆ é™¤æ‰ ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š 123$ mkdir key_backup$ cp id_rsa* key_backup$ rm id_rsa* 3.ç”Ÿæˆæ–°çš„å…¬é’¥ ç»ˆç«¯ä¸­è¾“å…¥å¦‚ä¸‹å‘½ä»¤ 1$ ssh-keygen -t rsa -C &quot;é‚®ç®±åœ°å€&quot; ä¹‹åç»ˆç«¯ä¼šæç¤ºå‡ æ¬¡å¯†ç è®¾ç½®ï¼Œå¦‚æœè®¾ç½®äº†å¯†ç ï¼Œåœ¨å‘Gitä»“åº“è¿›è¡Œä»£ç äº¤äº’æ“ä½œæ—¶éœ€è¦é”®å…¥å¯†ç ï¼Œä¹Ÿå¯ä»¥å…¨éƒ¨å›è½¦å¸¦è¿‡ï¼Œè¡¨ç¤ºä¸éœ€è¦å¯†ç ã€‚ 4.å‘Gitä»“åº“ä¸­å¯¼å…¥å…¬é’¥ åœ¨.sshæ–‡ä»¶å¤¹ä¸‹ä½¿ç”¨lså‘½ä»¤æŸ¥çœ‹æ‰€æœ‰æ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°ç”Ÿæˆäº†ä¸€ä¸ªid_rsa.pubçš„æ–‡ä»¶ï¼Œä½¿ç”¨viå·¥å…·æ‰“å¼€å®ƒï¼Œå°†å…¶å†…å®¹å¤åˆ¶å‡ºæ¥ï¼Œåœ¨Gitä»“åº“ä¸­æ–°å»ºå…¬é’¥ï¼Œå¤åˆ¶ä¸Šå»å³å¯ã€‚ä¾‹å¦‚githubä¸­å¯¼å…¥å¯†é’¥è¿‡ç¨‹å¦‚ä¸‹å›¾ï¼š ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"æ—¥å¸¸æŠ€å·§","slug":"æ—¥å¸¸æŠ€å·§","permalink":"http://huishao.cc/categories/æ—¥å¸¸æŠ€å·§/"}],"tags":[],"keywords":[{"name":"æ—¥å¸¸æŠ€å·§","slug":"æ—¥å¸¸æŠ€å·§","permalink":"http://huishao.cc/categories/æ—¥å¸¸æŠ€å·§/"}]},{"title":"Macä¿®æ”¹ä¸»æœºhoståœ°å€","slug":"195Macä¿®æ”¹ä¸»æœºhoståœ°å€","date":"2016-04-12T16:00:00.000Z","updated":"2021-07-08T02:21:42.898Z","comments":true,"path":"2016/04/13/195Macä¿®æ”¹ä¸»æœºhoståœ°å€/","link":"","permalink":"http://huishao.cc/2016/04/13/195Macä¿®æ”¹ä¸»æœºhoståœ°å€/","excerpt":"","text":"Macä¿®æ”¹ä¸»æœºhoståœ°å€åœ¨ç»ˆç«¯é”®å…¥å¦‚ä¸‹å‘½ä»¤ï¼š 1vim /etc/hosts å¦‚æœæç¤ºæ²¡æœ‰æ“ä½œæƒé™ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š 1sudo vim /etc/hosts ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"æ—¥å¸¸æŠ€å·§","slug":"æ—¥å¸¸æŠ€å·§","permalink":"http://huishao.cc/categories/æ—¥å¸¸æŠ€å·§/"}],"tags":[],"keywords":[{"name":"æ—¥å¸¸æŠ€å·§","slug":"æ—¥å¸¸æŠ€å·§","permalink":"http://huishao.cc/categories/æ—¥å¸¸æŠ€å·§/"}]},{"title":"Xcodeå…³äºè­¦å‘ŠAutomaticPreferredMaxLayoutWidthçš„æ¶ˆé™¤æ–¹æ³•","slug":"194Xcodeå…³äºè­¦å‘ŠAutomaticPreferredMaxLayoutWidthçš„æ¶ˆé™¤æ–¹æ³•","date":"2016-04-11T16:00:00.000Z","updated":"2021-07-08T02:20:53.556Z","comments":true,"path":"2016/04/12/194Xcodeå…³äºè­¦å‘ŠAutomaticPreferredMaxLayoutWidthçš„æ¶ˆé™¤æ–¹æ³•/","link":"","permalink":"http://huishao.cc/2016/04/12/194Xcodeå…³äºè­¦å‘ŠAutomaticPreferredMaxLayoutWidthçš„æ¶ˆé™¤æ–¹æ³•/","excerpt":"","text":"Xcodeå…³äºè­¦å‘ŠAutomaticPreferredMaxLayoutWidthçš„æ¶ˆé™¤æ–¹æ³• åœ¨iOSå¼€å‘ä¸­ï¼Œå¦‚æœä½¿ç”¨åˆ°äº†storyboardä¸xibæ–‡ä»¶å¹¶ä¸”ä½¿ç”¨autolayoutè¿›è¡Œè‡ªåŠ¨å¸ƒå±€ï¼Œæœ‰æ—¶ä¼šæŠ¥å‡ºAutomatic Preferred Max Layout Width before iOS8.0çš„è­¦å‘Šã€‚å·¥ç¨‹ä¸­å¦‚æœå…¼å®¹çš„iOSç‰ˆæœ¬ä¸ºiOS8.0ä¸€ä¸‹ï¼Œå¹¶ä¸”ä½¿ç”¨äº†å¤šè¡ŒUILabelæ§ä»¶ï¼Œå¾€å¾€åœ¨autolayoutè‡ªåŠ¨å¸ƒå±€æ—¶ä¼šå‡ºç°ä¸Šè¿°è­¦å‘Šï¼Œä¸Šè¿°è­¦å‘Šçš„ä¸»è¦åŸå› æ˜¯åœ¨iOS8.0åç³»ç»Ÿä¼šè‡ªåŠ¨è®¡ç®—å¤šè¡ŒUILabelæ§ä»¶çš„ç†æƒ³æ¢è¡Œå®½åº¦ï¼ŒiOS8ä»¥ä¸‹åˆ™ä¸ä¼šï¼Œéœ€è¦å¼€å‘è€…æ‰‹åŠ¨è®¾ç½®ä¸€ä¸ªç¡®å®šçš„å€¼ã€‚ è§£å†³æ–¹æ¡ˆå¦‚ä¸‹ï¼Œæ‰¾åˆ°xibæˆ–storyboardä¸­çš„å¤šè¡ŒUILabelæ§ä»¶ï¼Œå‹¾é€‰Explicitå±æ€§ï¼Œè®¾ç½®ä¸ºä¸€ä¸ªå›ºå®šçš„å€¼ï¼Œä¾‹å¦‚0ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¹‹åä¸Šè¿°è­¦å‘Šå³å¯æ¶ˆé™¤ï¼Œäº‹å®ä¸Šï¼Œä½¿ç”¨äº†autolayoutåï¼Œè¿™ä¸ªå±æ€§å¹¶æ²¡æœ‰ä»»ä½•æ•ˆæœï¼Œä»…ä»…ä¸ºäº†æ¶ˆé™¤è­¦å‘Šï¼Œç›´æ¥è®¾ç½®ä¸º0å³å¯ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"æ—¥å¸¸æŠ€å·§","slug":"æ—¥å¸¸æŠ€å·§","permalink":"http://huishao.cc/categories/æ—¥å¸¸æŠ€å·§/"}],"tags":[],"keywords":[{"name":"æ—¥å¸¸æŠ€å·§","slug":"æ—¥å¸¸æŠ€å·§","permalink":"http://huishao.cc/categories/æ—¥å¸¸æŠ€å·§/"}]},{"title":"iOSç³»ç»Ÿèœå•æ§åˆ¶å™¨UIMenuControllerä½¿ç”¨ç®€ä»‹","slug":"193iOSç³»ç»Ÿèœå•æ§åˆ¶å™¨UIMenuControllerä½¿ç”¨ç®€ä»‹","date":"2016-04-05T16:00:00.000Z","updated":"2021-07-07T08:24:46.452Z","comments":true,"path":"2016/04/06/193iOSç³»ç»Ÿèœå•æ§åˆ¶å™¨UIMenuControllerä½¿ç”¨ç®€ä»‹/","link":"","permalink":"http://huishao.cc/2016/04/06/193iOSç³»ç»Ÿèœå•æ§åˆ¶å™¨UIMenuControllerä½¿ç”¨ç®€ä»‹/","excerpt":"","text":"iOSç³»ç»Ÿèœå•æ§åˆ¶å™¨UIMenuControllerä½¿ç”¨ç®€ä»‹ä¸€ã€å¼•è¨€ åœ¨è®¸å¤šiOSåº”ç”¨ä¸­ï¼Œå½“ç”¨æˆ·è¿›è¡ŒæŸæ–‡å­—æˆ–å›¾ç‰‡åŒºåŸŸçš„é•¿æŒ‰æ“ä½œæ—¶ï¼Œéƒ½ä¼šå¼¹å‡ºä¸€ä¸ªç³»ç»Ÿèœå•æ§ä»¶ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡æ“ä½œèœå•æ§ä»¶ä¸Šçš„æŒ‰é’®è¿›è¡Œæ•°æ®çš„å¤åˆ¶ã€å‰ªåˆ‡ã€ç²˜è´´ç­‰æ“ä½œã€‚ç³»ç»ŸåŸç”Ÿçš„æŸäº›æ§ä»¶å·²ç»æ”¯æŒäº†å¯¹UIMenuControllerçš„å”¤å‡ºæ“ä½œï¼Œç„¶è€Œå¹¶ä¸æ˜¯æ‰€æœ‰æ§ä»¶éƒ½æ”¯æŒï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡è‡ªå®šä¹‰UIMenuControlleræ¥æ›´åŠ çµæ´»çš„ä½¿ç”¨èœå•æ§ä»¶ï¼Œåœ¨å‰é¢åšå®¢ä¸­æœ‰ä»‹ç»iOSå‰ªåˆ‡æ¿ç›¸å…³çŸ¥è¯†ï¼Œåœ°å€å¦‚ä¸‹ï¼š iOSå‰ªåˆ‡æ¿UIPasteboardä½¿ç”¨ç®€ä»‹ï¼šhttp://my.oschina.net/u/2340880/blog/653228ã€‚ äºŒã€UIMenuControllerçš„ä½¿ç”¨ UIMenuControllerçš„å±•ç°éœ€è¦åŸºäºä¸€ä¸ªViewè§†å›¾ï¼Œå…¶äº¤äº’åˆ™éœ€è¦åŸºäºå…¶æ‰€åœ¨Viewè§†å›¾çš„Responderã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœä¸€ä¸ªUIMenuControllerå±•ç°åœ¨å½“å‰ViewControllerçš„Viewä¸Šï¼Œåˆ™æ­¤UIMenuControllerçš„äº¤äº’é€»è¾‘äº¤ç”±å½“å‰çš„ViewControllerè¿›è¡Œç®¡ç†ã€‚ åœ¨ç•Œé¢å±•ç¤ºå‡ºUIMenuControlleréœ€è¦3ä¸ªæ¡ä»¶ï¼š 1.å½“å‰çš„Responderå¤„äºç¬¬ä¸€å“åº”ã€‚ 2.UIMenuControllerå¯¹è±¡è°ƒç”¨menuVisibleæ–¹æ³•ã€‚ 3.å½“å‰çš„Responderå®ç°äº†å¦‚ä¸‹ä¸¤ä¸ªæ–¹æ³•ï¼š 12345678//æ˜¯å¦å¯ä»¥æˆä¸ºç¬¬ä¸€ç›¸åº”-(BOOL)canBecomeFirstResponder&#123; return YES;&#125;//æ˜¯å¦å¯ä»¥æ¥æ”¶æŸäº›èœå•çš„æŸäº›äº¤äº’æ“ä½œ-(BOOL)canPerformAction:(SEL)action withSender:(id)sender&#123; return YES;&#125; å®ç°äº†ä¸Šé¢çš„ä¸¤ä¸ªæ–¹æ³•ï¼Œä½¿ç”¨å¦‚ä¸‹çš„ä»£ç å¯ä»¥å”¤å‡ºUIMenuControlleræ§ä»¶ï¼š 12345 [self becomeFirstResponder]; //è®¾ç½®èœå•æ˜¾ç¤ºçš„ä½ç½® frameè®¾ç½®å…¶æ–‡èŒ inViewè®¾ç½®å…¶æ‰€åœ¨çš„è§†å›¾ [[UIMenuController sharedMenuController] setTargetRect:frame inView:self.view]; //å°†èœå•æ§ä»¶è®¾ç½®ä¸ºå¯è§ [UIMenuController sharedMenuController].menuVisible = YES; åœ¨æ‰§è¡Œäº†ä¸Šé¢çš„ä»£ç åï¼Œç³»ç»Ÿç¬¬ä¸€æ¬¡è°ƒç”¨canperformAction:withSender:æ–¹æ³•ä¼šè¿›è¡Œæ˜¯å¦æ˜¾ç¤ºèœå•æ çš„æ£€æµ‹ï¼Œå¦‚æœè¿”å›ä¸ºNOï¼Œåˆ™ä¸èƒ½æ˜¾ç¤ºèœå•æ ï¼Œå¦‚æœè¿”å›ä¸ºYESï¼Œä¹‹åç³»ç»Ÿä¼šå¤šæ¬¡è°ƒç”¨canPerformAction:withSender:æ–¹æ³•ï¼Œç”¨äºæ£€æµ‹å½“å‰Responderå¯¹è±¡æ˜¯å¦å®ç°äº†èœå•æ ä¸ŠæŸä¸ªé€‰é¡¹çš„è§¦å‘æ–¹æ³•ï¼Œå¦‚æœå®ç°äº†ï¼Œèœå•æ ä¸Šé¢çš„ç›¸åº”æŒ‰é’®ä¼šæ˜¾ç¤ºï¼Œå¦åˆ™ä¸ä¼šæ˜¾ç¤ºã€‚å¼€å‘è€…å¯ä»¥åœ¨è¿™ä¸ªæ–¹æ³•ä¸­é€šè¿‡åˆ¤æ–­actionæ¥ç¡®å®šèœå•æ§ä»¶ä¸­æ˜¾ç¤ºçš„æŒ‰é’®ç§ç±»ã€‚ç³»ç»Ÿé»˜è®¤ä¸ºå¼€å‘è€…æä¾›äº†ä¸€ç³»åˆ—çš„èœå•æŒ‰é’®ï¼Œä¾‹å¦‚è¦æ˜¾ç¤ºå‰ªåˆ‡å’Œèµ‹å€¼æ“ä½œçš„èœå•æŒ‰é’®ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456-(BOOL)canPerformAction:(SEL)action withSender:(id)sender&#123; if (action == @selector(cut:)||action == @selector(copy:)) &#123; return YES; &#125; return NO;&#125; æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ç³»ç»Ÿé»˜è®¤æ”¯æŒæä¾›çš„æŒ‰é’®è§¦å‘æ–¹æ³•åˆ—ä¸¾å¦‚ä¸‹ï¼š 12345678910111213141516//å‰ªåˆ‡æŒ‰é’®çš„æ–¹æ³•- (void)cut:(nullable id)sender NS_AVAILABLE_IOS(3_0);//å¤åˆ¶æŒ‰é’®çš„æ–¹æ³•- (void)copy:(nullable id)sender NS_AVAILABLE_IOS(3_0);//ç²˜è´´æŒ‰é’®çš„æ–¹æ³•- (void)paste:(nullable id)sender NS_AVAILABLE_IOS(3_0);//é€‰æ‹©æŒ‰é’®çš„æ–¹æ³•- (void)select:(nullable id)sender NS_AVAILABLE_IOS(3_0);//å…¨é€‰æŒ‰é’®çš„æ–¹æ³•- (void)selectAll:(nullable id)sender NS_AVAILABLE_IOS(3_0);//åˆ é™¤æŒ‰é’®çš„æ–¹æ³•- (void)delete:(nullable id)sender NS_AVAILABLE_IOS(3_2);//æ”¹å˜ä¹¦å†™æ¨¡å¼ä¸ºä»å·¦å‘å³æŒ‰é’®è§¦å‘çš„æ–¹æ³•- (void)makeTextWritingDirectionLeftToRight:(nullable id)sender NS_AVAILABLE_IOS(5_0);//æ”¹å˜ä¹¦å†™æ¨¡å¼ä¸ºä»å³å‘å·¦æŒ‰é’®è§¦å‘çš„æ–¹æ³•- (void)makeTextWritingDirectionRightToLeft:(nullable id)sender NS_AVAILABLE_IOS(5_0); ä¸Šé¢æ‰€åˆ—ä¸¾çš„æ–¹æ³•å£°æ˜åœ¨UIResponderå¤´æ–‡ä»¶ä¸­ï¼Œå®é™…ä¸Šï¼Œé™¤äº†ä¸Šé¢çš„æ–¹æ³•ï¼Œå…³äºUIMenuControllerä¸Šé¢çš„æŒ‰é’®ï¼Œç³»ç»Ÿä¸­è¿˜æœ‰è®¸å¤šç§æœ‰æ–¹æ³•ï¼Œåˆ—ä¸¾å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334//æ›¿æ¢æŒ‰é’®- (void)_promptForReplace:(id)arg1&#123; NSLog(@&quot;promptForReplace&quot;);&#125;//ç®€ä½“ç¹ä½“è½¬æ¢æŒ‰é’®-(void)_transliterateChinese:(id)sender&#123; NSLog(@&quot;transliterateChinese&quot;);&#125;//æ–‡å­—é£æ ¼æŒ‰é’®-(void)_showTextStyleOptions:(id)sender&#123; NSLog(@&quot;showTextStyleOptions&quot;);&#125;//å®šä¹‰æŒ‰é’®-(void)_define:(id)sender&#123; NSLog(@&quot;define&quot;);&#125;-(void)_addShortcut:(id)sender&#123; NSLog(@&quot;addShortcut&quot;);&#125;-(void)_accessibilitySpeak:(id)sender&#123; NSLog(@&quot;accessibilitySpeak&quot;);&#125;//è¯­è¨€é€‰æ‹©æŒ‰é’®-(void)_accessibilitySpeakLanguageSelection:(id)sender&#123; NSLog(@&quot;accessibilitySpeakLanguageSelection&quot;);&#125;//æš‚åœå‘éŸ³æŒ‰é’®-(void)_accessibilityPauseSpeaking:(id)sender&#123; NSLog(@&quot;accessibilityPauseSpeaking&quot;);&#125;//åˆ†äº«æŒ‰é’®-(void)_share:(id)sender&#123; NSLog(@&quot;share&quot;);&#125; åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¼€å‘è¿™å®Œå…¨ä¸éœ€è¦ä½¿ç”¨è¿™äº›ç§æœ‰çš„æ–¹æ³•ï¼ŒUIMenuItemç±»æä¾›ç»™å¼€å‘è€…è¿›è¡Œè‡ªå®šä¹‰èœå•æŒ‰é’®ä¸è§¦å‘æ–¹æ³•ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345[self becomeFirstResponder]; UIMenuItem * item = [[UIMenuItem alloc]initWithTitle:@&quot;è‡ªå®šä¹‰&quot; action:@selector(newFunc)]; [[UIMenuController sharedMenuController] setTargetRect:[sender frame] inView:self.view]; [UIMenuController sharedMenuController].menuItems = @[item]; [UIMenuController sharedMenuController].menuVisible = YES; 123456789101112-(BOOL)canBecomeFirstResponder&#123; return YES;&#125;-(BOOL)canPerformAction:(SEL)action withSender:(id)sender&#123; if (action == @selector(newFunc)) &#123; return YES; &#125; return NO;&#125;-(void)newFunc&#123; NSLog(@&quot;è‡ªå®šä¹‰æ–¹æ³•&quot;);&#125; æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š UIMenuControllerè¿˜æœ‰å¦‚ä¸‹çš„å±æ€§ç”¨æ¥è®¾ç½®å…¶æ˜¾ç¤ºçš„ä½ç½®ï¼š 1234567891011121314151617//æ˜¾ç¤ºçš„ä½ç½®@property(nonatomic) UIMenuControllerArrowDirection arrowDirection;//æšä¸¾å¦‚ä¸‹ï¼š/*typedef NS_ENUM(NSInteger, UIMenuControllerArrowDirection) &#123; //é»˜è®¤ åŸºäºå½“å‰å±å¹•çŠ¶æ€ UIMenuControllerArrowDefault, // up or down based on screen location //ç®­å¤´åœ¨ä¸Šçš„æ˜¾ç¤ºæ¨¡å¼ UIMenuControllerArrowUp NS_ENUM_AVAILABLE_IOS(3_2), //ç®­å¤´åœ¨ä¸‹çš„æ˜¾ç¤ºæ¨¡å¼ UIMenuControllerArrowDown NS_ENUM_AVAILABLE_IOS(3_2), //ç®­å¤´åœ¨å·¦çš„æ˜¾ç¤ºæ¨¡å¼ UIMenuControllerArrowLeft NS_ENUM_AVAILABLE_IOS(3_2), //ç®­å¤´åœ¨å³çš„æ˜¾ç¤ºæ¨¡å¼ UIMenuControllerArrowRight NS_ENUM_AVAILABLE_IOS(3_2),&#125;;*/ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSå‰ªåˆ‡æ¿UIPasteboardå¼€å‘åº”ç”¨è§£æ","slug":"192iOSå‰ªåˆ‡æ¿UIPasteboardå¼€å‘åº”ç”¨è§£æ","date":"2016-04-05T16:00:00.000Z","updated":"2021-07-07T08:23:33.287Z","comments":true,"path":"2016/04/06/192iOSå‰ªåˆ‡æ¿UIPasteboardå¼€å‘åº”ç”¨è§£æ/","link":"","permalink":"http://huishao.cc/2016/04/06/192iOSå‰ªåˆ‡æ¿UIPasteboardå¼€å‘åº”ç”¨è§£æ/","excerpt":"","text":"iOSå‰ªåˆ‡æ¿UIPasteboardå¼€å‘åº”ç”¨è§£æä¸€ã€è‡ªå¸¦å‰ªåˆ‡æ¿æ“ä½œçš„åŸç”ŸUIæ§ä»¶ åœ¨iOSçš„UIç³»ç»Ÿä¸­ï¼Œæœ‰3ä¸ªæ§ä»¶è‡ªå¸¦å‰ªåˆ‡æ¿æ“ä½œï¼Œåˆ†åˆ«æ˜¯UITextFieldã€UITextViewä¸UIWebViewã€‚åœ¨è¿™äº›æ§ä»¶çš„æ–‡å­—äº¤äº’å¤„è¿›è¡Œé•¿æŒ‰æ‰‹åŠ¿å¯ä»¥åœ¨å±å¹•è§†å›¾ä¸Šå”¤å‡ºç³»ç»Ÿçš„å‰ªåˆ‡æ¿æ§ä»¶ï¼Œç”¨æˆ·å¯ä»¥è¿›è¡Œå¤åˆ¶ã€ç²˜è´´ï¼Œå‰ªåˆ‡ç­‰æ“ä½œï¼Œå…¶æ•ˆæœåˆ†åˆ«å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ UITextFieldçš„æ–‡å­—æ“ä½œ UITextViewçš„æ–‡å­—æ“ä½œ UIWebViewçš„æ–‡å­—æ“ä½œ äºŒã€ç³»ç»Ÿçš„å‰ªåˆ‡æ¿ç®¡ç†ç±»UIPasteboard å®é™…ä¸Šï¼Œå½“ç”¨æˆ·é€šè¿‡ä¸Šé¢çš„ç©ºé—´è¿›è¡Œå¤åˆ¶ã€å‰ªåˆ‡ç­‰æ“ä½œæ—¶ï¼Œè¢«é€‰ä¸­çš„å†…å®¹ä¼šè¢«å­˜æ”¾åˆ°ç³»ç»Ÿçš„å‰ªåˆ‡æ¿ä¸­ï¼Œå¹¶ä¸”è¿™ä¸ªå‰ªåˆ‡æ¿å¹¶ä¸åªèƒ½å­˜æ”¾å­—ç¬¦ä¸²æ•°æ®ï¼Œå…¶è¿˜å¯ä»¥è¿›è¡Œå›¾ç‰‡æ•°æ®ä¸ç½‘å€URLæ•°æ®çš„å­˜æ”¾ã€‚è¿™ä¸ªå‰ªåˆ‡æ¿å°±æ˜¯UIPasteboardç±»ï¼Œå¼€å‘è€…ä¹Ÿå¯ä»¥ç›´æ¥é€šè¿‡å®ƒæ¥æ“ä½œæ•°æ®è¿›è¡Œåº”ç”¨å†…æˆ–åº”ç”¨é—´ä¼ å€¼ã€‚ UIPasteboardç±»æœ‰3ä¸ªåˆå§‹åŒ–æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š 123456//è·å–ç³»ç»Ÿçº§åˆ«çš„å‰ªåˆ‡æ¿+ (UIPasteboard *)generalPasteboard;//è·å–ä¸€ä¸ªè‡ªå®šä¹‰çš„å‰ªåˆ‡æ¿ nameå‚æ•°ä¸ºæ­¤å‰ªåˆ‡æ¿çš„åç§° createå‚æ•°ç”¨äºè®¾ç½®å½“è¿™ä¸ªå‰ªåˆ‡æ¿ä¸å­˜åœ¨æ—¶ æ˜¯å¦è¿›è¡Œåˆ›å»º+ (nullable UIPasteboard *)pasteboardWithName:(NSString *)pasteboardName create:(BOOL)create;//è·å–ä¸€ä¸ªåº”ç”¨å†…å¯ç”¨çš„å‰ªåˆ‡æ¿+ (UIPasteboard *)pasteboardWithUniqueName; ä¸Šé¢3ä¸ªåˆå§‹åŒ–æ–¹æ³•ï¼Œåˆ†åˆ«è·å–æˆ–åˆ›å»º3ä¸ªçº§åˆ«ä¸åŒçš„å‰ªåˆ‡æ¿ï¼Œç³»ç»Ÿçº§åˆ«çš„å‰ªåˆ‡æ¿åœ¨æ•´ä¸ªè®¾å¤‡ä¸­å…±äº«ï¼Œå³æ˜¯åº”ç”¨ç¨‹åºè¢«åˆ æ‰ï¼Œå…¶å‘ç³»ç»Ÿçº§çš„å‰ªåˆ‡æ¿ä¸­å†™å…¥çš„æ•°æ®ä¾ç„¶åœ¨ã€‚è‡ªå®šä¹‰çš„å‰ªåˆ‡æ¿é€šè¿‡ä¸€ä¸ªç‰¹å®šçš„åç§°å­—ç¬¦ä¸²è¿›è¡Œåˆ›å»ºï¼Œå®ƒåœ¨åº”ç”¨ç¨‹åºå†…æˆ–è€…åŒä¸€å¼€å‘è€…å¼€å‘çš„å…¶ä»–åº”ç”¨ç¨‹åºä¸­å¯ä»¥è¿›è¡Œæ•°æ®å…±äº«ã€‚ç¬¬3ä¸ªæ–¹æ³•åˆ›å»ºçš„å‰ªåˆ‡æ¿ç­‰ä»·ä¸ºä½¿ç”¨ç¬¬2ä¸ªæ–¹æ³•åˆ›å»ºçš„å‰ªåˆ‡æ¿ï¼Œåªæ˜¯å…¶åç§°å­—ç¬¦ä¸²ä¸ºnilï¼Œå®ƒé€šå¸¸ç”¨äºå½“å‰åº”ç”¨å†…éƒ¨ã€‚ æ³¨æ„ï¼šä½¿ç”¨ç¬¬3ä¸ªæ–¹æ³•åˆ›å»ºçš„å‰ªåˆ‡æ¿é»˜è®¤æ˜¯ä¸è¿›è¡Œæ•°æ®æŒä¹…åŒ–çš„ï¼ŒåŠå½“åº”ç”¨ç¨‹åºé€€å‡ºåï¼Œå‰ªåˆ‡æ¿ä¸­å†…å®¹å°†åˆ«æŠ¹å»ã€‚è‹¥è¦å®ç°æŒä¹…åŒ–ï¼Œéœ€è¦è®¾ç½®persistentå±æ€§ä¸ºYESã€‚ UIPasteboardä¸­å¸¸ç”¨æ–¹æ³•åŠå±æ€§å¦‚ä¸‹ï¼š 12345678//å‰ªåˆ‡æ¿çš„åç§°@property(readonly,nonatomic) NSString *name;//æ ¹æ®åç§°åˆ é™¤ä¸€ä¸ªå‰ªåˆ‡æ¿+ (void)removePasteboardWithName:(NSString *)pasteboardName;//æ˜¯å¦è¿›è¡ŒæŒä¹…åŒ–@property(getter=isPersistent,nonatomic) BOOL persistent;//æ­¤å‰ªåˆ‡æ¿çš„æ”¹å˜æ¬¡æ•° ç³»ç»Ÿçº§åˆ«çš„å‰ªåˆ‡æ¿åªæœ‰å½“è®¾å¤‡é‡æ–°å¯åŠ¨æ—¶ è¿™ä¸ªå€¼æ‰ä¼šæ¸…é›¶@property(readonly,nonatomic) NSInteger changeCount; ä¸‹é¢è¿™äº›æ–¹æ³•ç”¨äºè®¾ç½®ä¸è·å–å‰ªåˆ‡æ¿ä¸­çš„æ•°æ®ï¼š æœ€æ–°ä¸€ç»„æ•°æ®å¯¹è±¡çš„å­˜å–ï¼š 123456789101112//è·å–å‰ªåˆ‡æ¿ä¸­æœ€æ–°æ•°æ®çš„ç±»å‹- (NSArray&lt;NSString *&gt; *)pasteboardTypes;//è·å–å‰ªåˆ‡æ¿ä¸­æœ€æ–°æ•°æ®å¯¹è±¡æ˜¯å¦åŒ…å«æŸä¸€ç±»å‹çš„æ•°æ®- (BOOL)containsPasteboardTypes:(NSArray&lt;NSString *&gt; *)pasteboardTypes;//å°†å‰ªåˆ‡æ¿ä¸­æœ€æ–°æ•°æ®å¯¹è±¡æŸä¸€ç±»å‹çš„æ•°æ®å–å‡º- (nullable NSData *)dataForPasteboardType:(NSString *)pasteboardType;//å°†å‰ªåˆ‡æ¿ä¸­æœ€æ–°æ•°æ®å¯¹è±¡æŸä¸€ç±»å‹çš„å€¼å–å‡º- (nullable id)valueForPasteboardType:(NSString *)pasteboardType;//ä¸ºå‰ªåˆ‡æ¿ä¸­æœ€æ–°æ•°æ®å¯¹åº”çš„æŸä¸€æ•°æ®ç±»å‹è®¾ç½®å€¼- (void)setValue:(id)value forPasteboardType:(NSString *)pasteboardType;//ä¸ºå‰ªåˆ‡æ¿ä¸­æœ€æ–°æ•°æ®å¯¹åº”çš„æŸä¸€æ•°æ®ç±»å‹è®¾ç½®æ•°æ®- (void)setData:(NSData *)data forPasteboardType:(NSString *)pasteboardType; å¤šç»„æ•°æ®å¯¹è±¡çš„å­˜å–ï¼š 12345678910111213141516//æ•°æ®ç»„æ•°@property(readonly,nonatomic) NSInteger numberOfItems;//è·å–ä¸€ç»„æ•°æ®å¯¹è±¡åŒ…å«çš„æ•°æ®ç±»å‹- (nullable NSArray *)pasteboardTypesForItemSet:(nullable NSIndexSet*)itemSet;//è·å–ä¸€ç»„æ•°æ®å¯¹è±¡ä¸­æ˜¯å¦åŒ…å«æŸäº›æ•°æ®ç±»å‹- (BOOL)containsPasteboardTypes:(NSArray&lt;NSString *&gt; *)pasteboardTypes inItemSet:(nullable NSIndexSet *)itemSet;//æ ¹æ®æ•°æ®ç±»å‹è·å–ä¸€ç»„æ•°æ®å¯¹è±¡- (nullable NSIndexSet *)itemSetWithPasteboardTypes:(NSArray *)pasteboardTypes;//æ ¹æ®æ•°æ®ç±»å‹è·å–ä¸€ç»„æ•°æ®çš„å€¼- (nullable NSArray *)valuesForPasteboardType:(NSString *)pasteboardType inItemSet:(nullable NSIndexSet *)itemSet;//æ ¹æ®æ•°æ®ç±»å‹è·å–ä¸€ç»„æ•°æ®çš„NSDataæ•°æ®- (nullable NSArray *)dataForPasteboardType:(NSString *)pasteboardType inItemSet:(nullable NSIndexSet *)itemSet;//æ‰€æœ‰æ•°æ®å¯¹è±¡@property(nonatomic,copy) NSArray *items;//æ·»åŠ ä¸€ç»„æ•°æ®å¯¹è±¡- (void)addItems:(NSArray&lt;NSDictionary&lt;NSString *, id&gt; *&gt; *)items; ä¸Šé¢æ–¹æ³•ä¸­å¾ˆå¤šéœ€è¦ä¼ å…¥æ•°æ®ç±»å‹å‚æ•°ï¼Œè¿™äº›å‚æ•°æ˜¯ç³»ç»Ÿå®šä¹‰å¥½çš„ä¸€äº›å­—ç¬¦çªœï¼Œå¦‚ä¸‹ï¼š 12345678//æ‰€æœ‰å­—ç¬¦ä¸²ç±»å‹æ•°æ®çš„ç±»å‹å®šä¹‰å­—ç¬¦ä¸²æ•°ç»„UIKIT_EXTERN NSArray&lt;NSString *&gt; *UIPasteboardTypeListString;//æ‰€æœ‰URLç±»å‹æ•°æ®çš„ç±»å‹å®šä¹‰å­—ç¬¦ä¸²æ•°ç»„UIKIT_EXTERN NSArray&lt;NSString *&gt; *UIPasteboardTypeListURL;//æ‰€æœ‰å›¾ç‰‡æ•°æ®çš„ç±»å‹å®šä¹‰å­—ç¬¦ä¸²æ•°æ®UIKIT_EXTERN NSArray&lt;NSString *&gt; *UIPasteboardTypeListImage;//æ‰€æœ‰é¢œè‰²æ•°æ®çš„ç±»å‹å®šä¹‰å­—ç¬¦ä¸²æ•°ç»„UIKIT_EXTERN NSArray&lt;NSString *&gt; *UIPasteboardTypeListColor; ç›¸æ¯”äºä¸Šé¢ä¸¤ç»„æ–¹æ³•ï¼Œä¸‹é¢è¿™äº›æ–¹æ³•æ›´åŠ é¢å‘å¯¹è±¡ï¼Œåœ¨å¼€å‘ä¸­ä½¿ç”¨æ›´åŠ æ–¹ä¾¿ä¸å¿«æ·ï¼š 12345678910111213141516//è·å–æˆ–è®¾ç½®å‰ªåˆ‡æ¿ä¸­çš„å­—ç¬¦ä¸²æ•°æ®@property(nullable,nonatomic,copy) NSString *string;//è·å–æˆ–è®¾ç½®å‰ªåˆ‡æ¿ä¸­çš„å­—ç¬¦ä¸²æ•°ç»„@property(nullable,nonatomic,copy) NSArray&lt;NSString *&gt; *strings;//è·å–æˆ–è®¾ç½®å‰ªåˆ‡æ¿ä¸­çš„URLæ•°æ®@property(nullable,nonatomic,copy) NSURL *URL;//è·å–æˆ–è®¾ç½®å‰ªåˆ‡æ¿ä¸­çš„URLæ•°ç»„@property(nullable,nonatomic,copy) NSArray&lt;NSURL *&gt; *URLs;//è·å–æˆ–sä½•æ­¢å‰ªåˆ‡æ¿ä¸­çš„å›¾ç‰‡æ•°æ®@property(nullable,nonatomic,copy) UIImage *image;//è·å–æˆ–è®¾ç½®å‰ªåˆ‡æ¿ä¸­çš„å›¾ç‰‡æ•°ç»„@property(nullable,nonatomic,copy) NSArray&lt;UIImage *&gt; *images;//è·å–æˆ–è®¾ç½®å‰ªåˆ‡æ¿ä¸­çš„é¢œè‰²æ•°æ®@property(nullable,nonatomic,copy) UIColor *color;//è·å–æˆ–è®¾ç½®å‰ªåˆ‡æ¿ä¸­çš„é¢œè‰²æ•°ç»„@property(nullable,nonatomic,copy) NSArray&lt;UIColor *&gt; *colors; å¯¹å‰ªåˆ‡æ¿çš„æŸäº›æ“ä½œä¼šè§¦å‘å¦‚ä¸‹é€šçŸ¥ï¼š 12345678//å‰ªåˆ‡æ¿å†…å®¹å‘ç”Ÿå˜åŒ–æ—¶å‘é€çš„é€šçŸ¥UIKIT_EXTERN NSString *const UIPasteboardChangedNotification;//å‰ªåˆ‡æ¿æ•°æ®ç±»å‹é”®å€¼å¢åŠ æ—¶å‘é€çš„é€šçŸ¥UIKIT_EXTERN NSString *const UIPasteboardChangedTypesAddedKey;//å‰ªåˆ‡æ¿æ•°æ®ç±»å‹é”®å€¼ç§»é™¤æ—¶å‘é€çš„é€šçŸ¥UIKIT_EXTERN NSString *const UIPasteboardChangedTypesRemovedKey;//å‰ªåˆ‡æ¿è¢«åˆ é™¤æ—¶å‘é€çš„é€šçŸ¥UIKIT_EXTERN NSString *const UIPasteboardRemovedNotification; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSä¸­åŠ¨æ€æ›´æ–°è¡¥ä¸ç­–ç•¥JSPatchè¿ç”¨åŸºç¡€äºŒ","slug":"191iOSä¸­åŠ¨æ€æ›´æ–°è¡¥ä¸ç­–ç•¥JSPatchè¿ç”¨åŸºç¡€äºŒ","date":"2016-03-29T16:00:00.000Z","updated":"2021-07-07T08:20:16.520Z","comments":true,"path":"2016/03/30/191iOSä¸­åŠ¨æ€æ›´æ–°è¡¥ä¸ç­–ç•¥JSPatchè¿ç”¨åŸºç¡€äºŒ/","link":"","permalink":"http://huishao.cc/2016/03/30/191iOSä¸­åŠ¨æ€æ›´æ–°è¡¥ä¸ç­–ç•¥JSPatchè¿ç”¨åŸºç¡€äºŒ/","excerpt":"","text":"iOSä¸­åŠ¨æ€æ›´æ–°è¡¥ä¸ç­–ç•¥JSPatchè¿ç”¨åŸºç¡€äºŒä¸€ã€å¼•è¨€ä¸Šç¯‡åšå®¢ä¸­ä»‹ç»äº†iOSå¼€å‘ä¸­JSPatchå¼•æ“è¿›è¡ŒåŠ¨æ€çƒ­ä¿®å¤çš„ä¸€äº›åŸºç¡€åŠŸèƒ½ï¼Œå…¶ä¸­åŒ…æ‹¬å‘Objective-Cç±»ä¸­æ·»åŠ ç±»æ–¹æ³•ä¸æˆå‘˜æ–¹æ³•ã€æ·»åŠ ä¸´æ—¶æˆå‘˜å˜é‡ï¼Œä½¿ç”¨JavaScriptè°ƒç”¨åŸç”Ÿçš„Objective-Cå±æ€§å’Œæ–¹æ³•ç­‰ã€‚æœ¬ç¯‡åšå®¢å°†åŸºäºä¸Šä¸€ç¯‡ç»§ç»­ä»‹ç»Objective-Cä¸­çš„ä¸€äº›ç‰¹æ®Šæ•°æ®ç±»å‹åœ¨JavaScriptæ–‡ä»¶ä¸­çš„ä½¿ç”¨æ–¹æ³•ï¼Œåšå®¢ä¸­å¤§éƒ¨åˆ†å†…å®¹æ‰©å±•è‡ªJSPatchå¼€æºgitçš„wikiï¼š[https://github.com/bang590/JSPatch](https://github.com/bang590/JSPatch)ã€‚ iOSä¸­åŠ¨æ€æ›´æ–°è¡¥ä¸ç­–ç•¥JSPatchè¿ç”¨åŸºç¡€ä¸€ï¼šhttp://my.oschina.net/u/2340880/blog/646688ã€‚ äºŒã€JavaScriptä¸Objective-Cäº¤äº’çš„å‡ ç§å¸¸ç”¨ç±»å‹1.ç»“æ„ä½“åœ¨Objective-Cä»£ç ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šä½¿ç”¨åˆ°ç»“æ„ä½“ï¼ŒJSPatchä¸­åŸç”Ÿæ”¯æŒçš„ç»“æ„ä½“æœ‰å¦‚ä¸‹å‡ ç§ï¼šCGPointï¼ŒCGSizeï¼ŒCGRectï¼ŒNSRangeã€‚å¹¶ä¸”è¿™å‡ ç§ç»“æ„ä½“åœ¨è¿›è¡Œç•Œé¢æ“ä½œæ—¶ä¹Ÿä¼šç»å¸¸ä½¿ç”¨åˆ°ã€‚ å¯¹äºCGRectç±»å‹ï¼ŒJavaScriptä½¿ç”¨å¦‚ä¸‹ä»£ç åˆ›å»ºï¼š 12 var view = require(&apos;UIView&apos;).alloc().init() view.setFrame(&#123;x:100,y:100,width:100,height:100&#125;) å¯¹äºCGPointç±»å‹ï¼ŒJavaScriptä½¿ç”¨å¦‚ä¸‹ä»£ç åˆ›å»ºï¼š 1 view.setCenter(&#123;x:200,y:200&#125;) å¯¹äºCGSizeç±»å‹ï¼ŒJavaScriptä½¿ç”¨å¦‚ä¸‹ä»£ç åˆ›å»ºï¼š 12 var size = &#123;width:200,height:200&#125; view.setFrame(&#123;x:100,y:100,width:size.width,height:size.height&#125;) å¯¹äºNSRangeç±»å‹ï¼ŒJavaScriptä½¿ç”¨å¦‚ä¸‹ä»£ç åˆ›å»ºï¼š 1 var range = &#123;location: 0, length: 1&#125; 2.é€‰æ‹©å™¨Selectorå¯¹äºObjective-Cä¸­çš„æ–¹æ³•é€‰æ‹©å™¨Selectorï¼Œåœ¨JavaScriptä¸­ä½¿ç”¨å­—ç¬¦ä¸²çš„å½¢å¼åˆ›å»ºï¼Œä¾‹å¦‚ï¼š 1self.performSelector_withObject(&quot;func:&quot;, 1) 3.å…³äºç©ºå¯¹è±¡åœ¨JavaScriptä¸­ï¼Œnullä¸undefinedéƒ½å¯¹åº”äºObjective-Cä¸­çš„nilï¼ŒObjective-Cä¸­çš„NSNullç©ºå¯¹è±¡ï¼Œåœ¨JavaScriptä¸­ä½¿ç”¨nsnullæ¥ä»£æ›¿ã€‚ 4.åœ¨Objective-Cä¸JavaScriptä¸­è¿›è¡Œblockçš„äº¤äº’ åœ¨JavaScriptä¸Objective-Cè¿›è¡Œblockäº¤äº’æœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯åœ¨JavaScriptæ–‡ä»¶ä¸­è°ƒç”¨Objective-Cä¸­çš„blockï¼Œä¸€ç§æ˜¯å°†JavaScriptæ–‡ä»¶ä¸­çš„å‡½æ•°å—ä½œä¸ºblockå‚æ•°ä¼ é€’ç»™Objective-Cã€‚ åœ¨JavaScriptæ–‡ä»¶ä¸­ä½¿ç”¨Objective-Cä¸­çš„blockååˆ†ç®€å•ï¼Œå› ä¸ºJavaScriptä¸­æ²¡æœ‰blockçš„æ¦‚å¿µï¼ŒObjective-Cä¼šè¢«è‡ªåŠ¨è½¬æ¢ä¸ºå‡½æ•°ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š Objective-Cï¼š 123456789typedef void(^block)(NSString * str);@interface ViewController ()@end@implementation ViewController-(block)getBlock&#123; block block = ^(NSString * str)&#123;NSLog(@&quot;%@&quot;,str);&#125;; return block;&#125;@end JavaScriptï¼š 123456defineClass(&quot;ViewController&quot;, &#123; viewDidAppear: function(animated) &#123; var func = self.getBlock() func(&quot;123&quot;) &#125; &#125;) åœ¨JavaScriptæ–‡ä»¶ä¸­å°†funcä½œä¸ºå‚æ•°blockä¼ é€’ç»™Objective-Cå°±å¤æ‚ä¸€äº›ï¼Œéœ€è¦ä½¿ç”¨block()æ–¹æ³•è¿›è¡ŒåŒ…è£…ï¼Œä¾‹å¦‚ï¼š Objective-Cï¼š 12345678@interface ViewController ()@end@implementation ViewController-(void)run:(void(^)(NSString * str))block&#123; block(@&quot;123&quot;);&#125;@end JavaScriptï¼š 123456defineClass(&quot;ViewController&quot;, &#123; viewDidAppear: function(animated) &#123; //run æ–¹æ³•ä¸­éœ€è¦ä¼ å…¥ä¸€ä¸ªblock self.run(block(&quot;NSString*&quot;,function(str)&#123;console.log(str)&#125;)) &#125; &#125;) åœ¨ä½¿ç”¨block()æ–¹æ³•å¯¹JavaScriptä¸­çš„Funcè¿›è¡ŒåŒ…è£…æ—¶ï¼Œblock(param1,param2)æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬1ä¸ªå‚æ•°è®¾ç½®funcä¸­çš„å‚æ•°ç±»å‹ï¼Œå¦‚æœæœ‰å¤šä¸ªå‚æ•°ï¼Œä½¿ç”¨é€—å·åˆ†å‰²ï¼›ç¬¬2ä¸ªå‚æ•°ä¸ºfuncå‡½æ•°ä½“ã€‚ æ³¨æ„ï¼šåœ¨block()åŒ…è£…çš„funcä¸­ä¸å¯ä»¥ä½¿ç”¨selfæŒ‡é’ˆï¼Œå¦‚æœéœ€è¦ä½¿ç”¨selfï¼Œéœ€è¦åœ¨blockå¤–è¿›è¡Œä¸´æ—¶å˜é‡çš„è½¬æ¢ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011defineClass(&quot;ViewController&quot;, &#123; viewDidAppear: function(animated) &#123; //run æ–¹æ³•ä¸­éœ€è¦ä¼ å…¥ä¸€ä¸ªblock var slf = self self.run(block(&quot;NSString*&quot;, function(str)&#123; console.log(str) slf.log(str) &#125;)) &#125; &#125;) åœ¨JavaScriptä¸­åˆ†åˆ«ä½¿ç”¨\\_\\_weak()ä¸\\_\\_strongæ¥å£°æ˜å¼±å¼•ç”¨ä¸å¼ºå¼•ç”¨å¯¹è±¡ï¼Œä¾‹å¦‚ï¼š 12 var slf = __weak(self) var stgSef = __strong(self) 5.å…³äºGCDä¸æšä¸¾åœ¨JSPatchä¸­ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹JavaScriptä»£ç æ¥è°ƒç”¨GCDæ–¹æ³•ï¼š 123456789101112//é˜»å¡å½“å‰çº¿ç¨‹ä¸€å®šæ—¶é—´dispatch_after(1.0, function()&#123; &#125;)//ä¸ºä¸»çº¿ç¨‹æ·»åŠ å¼‚æ­¥ä»»åŠ¡dispatch_async_main(function()&#123; &#125;)//ä¸ºä¸»çº¿ç¨‹æ·»åŠ åŒæ­¥ä»»åŠ¡dispatch_sync_main(function()&#123; &#125;)//å‘å…¨å±€é˜Ÿåˆ—ä¸­æ·»åŠ ä»»åŠ¡dispatch_async_global_queue(function()&#123; &#125;) JSPatchä¸­ä¸å¯ä»¥ç›´æ¥ä½¿ç”¨Objective-Cä¸­å®šä¹‰çš„æšä¸¾ï¼Œä½†æ˜¯å¯ä»¥ç”¨å…¶æšä¸¾çš„çœŸå®å€¼è¿›è¡Œä¼ é€’ã€‚ä¾‹å¦‚ï¼š 12//UIControlEventTouchUpInsideçš„å€¼æ˜¯1&lt;&lt;6btn.addTarget_action_forControlEvents(self, &quot;handleBtn&quot;, 1&lt;&lt;6); ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"JSPatch","slug":"JSPatch","permalink":"http://huishao.cc/categories/JSPatch/"}],"tags":[],"keywords":[{"name":"JSPatch","slug":"JSPatch","permalink":"http://huishao.cc/categories/JSPatch/"}]},{"title":"iOSä¸­åŠ¨æ€æ›´æ–°è¡¥ä¸ç­–ç•¥JSPatchè¿ç”¨åŸºç¡€ä¸€","slug":"190iOSä¸­åŠ¨æ€æ›´æ–°è¡¥ä¸ç­–ç•¥JSPatchè¿ç”¨åŸºç¡€ä¸€","date":"2016-03-23T16:00:00.000Z","updated":"2021-07-06T07:15:26.932Z","comments":true,"path":"2016/03/24/190iOSä¸­åŠ¨æ€æ›´æ–°è¡¥ä¸ç­–ç•¥JSPatchè¿ç”¨åŸºç¡€ä¸€/","link":"","permalink":"http://huishao.cc/2016/03/24/190iOSä¸­åŠ¨æ€æ›´æ–°è¡¥ä¸ç­–ç•¥JSPatchè¿ç”¨åŸºç¡€ä¸€/","excerpt":"","text":"iOSä¸­åŠ¨æ€æ›´æ–°è¡¥ä¸ç­–ç•¥JSPatchè¿ç”¨åŸºç¡€JSPatchæ˜¯GitHubä¸Šä¸€ä¸ªå¼€æºçš„æ¡†æ¶ï¼Œå…¶å¯ä»¥é€šè¿‡Objective-Cçš„run-timeæœºåˆ¶åŠ¨æ€çš„ä½¿ç”¨JavaScriptè°ƒç”¨ä¸æ›¿æ¢é¡¹ç›®ä¸­çš„Objective-Cå±æ€§ä¸æ–¹æ³•ã€‚å…¶æ¡†æ¶å°å·§ï¼Œä»£ç ç®€æ´ï¼Œå¹¶ä¸”é€šè¿‡ç³»ç»Ÿçš„JavaScriptCoreæ¡†æ¶ä¸Objective-Cè¿›è¡Œäº¤äº’ï¼Œè¿™ä½¿å…¶åœ¨å®‰å…¨æ€§å’Œå®¡æ ¸é£é™©ä¸Šéƒ½æœ‰å¾ˆå¼ºçš„ä¼˜åŠ¿ã€‚Gitæºç åœ°å€ï¼š[https://github.com/bang590/JSPatch](https://github.com/bang590/JSPatch)ã€‚ ä¸€ã€ä»ä¸€ä¸ªå®˜æ–¹çš„å°demoçœ‹èµ·é€šè¿‡cocoapodså°†JSPathé›†æˆè¿›ä¸€ä¸ªXcodeå·¥ç¨‹ä¸­ï¼Œåœ¨AppDelegateç±»çš„ä¸­ç¼–å†™å¦‚ä¸‹ä»£ç ï¼š 123456789101112131415161718192021- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions &#123; //å¼€å§‹åˆå§‹åŒ–å¼•æ“ [JPEngine startEngine]; //è¯»å–jsæ–‡ä»¶ NSString *sourcePath = [[NSBundle mainBundle] pathForResource:@&quot;demo&quot; ofType:@&quot;js&quot;]; NSString *script = [NSString stringWithContentsOfFile:sourcePath encoding:NSUTF8StringEncoding error:nil]; //è¿è¡Œjsæ–‡ä»¶ [JPEngine evaluateScript:script]; self.window = [[UIWindow alloc]initWithFrame:[UIScreen mainScreen].bounds]; self.window.rootViewController = [[ViewController alloc]init]; [self.window addSubview:[self genView]]; [self.window makeKeyAndVisible]; return YES;&#125;- (UIView *)genView&#123; UIView * view= [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 320)]; view.backgroundColor = [UIColor redColor]; return view;&#125; åœ¨å·¥ç¨‹ä¸­æ·»åŠ ä¸€ä¸ªjsæ–‡ä»¶ï¼Œç¼–å†™å¦‚ä¸‹ï¼š 123456789101112131415 require(&apos;UIView, UIColor, UILabel&apos;) //è¦æ›¿æ¢å‡½æ•°çš„ç±» defineClass(&apos;AppDelegate&apos;, &#123; //æ›¿æ¢å‡½æ•° //è¦æ›¿æ¢å‡½æ•°çš„åç§° genView: function() &#123; var view = self.ORIGgenView(); view.setBackgroundColor(UIColor.greenColor()) var label = UILabel.alloc().initWithFrame(view.frame()); label.setText(&quot;JSPatch&quot;); label.setTextAlignment(1); view.addSubview(label); return view; &#125; &#125;); è¿è¡Œå·¥ç¨‹ï¼Œå¯ä»¥çœ‹åˆ°genViewæ–¹æ³•è¢«æ›¿æ¢æˆäº†jsæ–‡ä»¶ä¸­çš„æ–¹æ³•ï¼ŒåŸæœ¬çº¢è‰²çš„è§†å›¾è¢«ä¿®æ”¹æˆäº†ç»¿è‰²ã€‚ äºŒã€ä½¿ç”¨JavaScriptä»£ç å‘Objective-Cä¸­ä¿®æ”¹æˆ–æ·»åŠ æ–¹æ³•JSPatchå¼•æ“ä¸­æ”¯æŒ3ä¸­æ–¹å¼è¿›è¡ŒJavaScriptä»£ç çš„è°ƒç”¨ï¼Œåˆ†åˆ«æ˜¯ä½¿ç”¨JavaScriptå­—ç¬¦ä¸²è¿›è¡Œä»£ç è¿è¡Œï¼Œè¯»å–æœ¬åœ°çš„JavaScriptæ–‡ä»¶è¿›è¡Œä»£ç è¿è¡Œå’Œè·å–ç½‘ç»œçš„JavaScriptæ–‡ä»¶è¿›è¡Œä»£ç è¿è¡Œã€‚ä¾‹å¦‚ï¼Œå¦‚æœæƒ³è¦é€šè¿‡JavaScriptä»£ç åœ¨é¡¹ç›®ä¸­å¼¹å‡ºä¸€ä¸ªè­¦å‘Šæ¡†ï¼Œåœ¨Objective-Cä»£ç ä¸­æ’å…¥å¦‚ä¸‹ä»£ç ï¼š 1234567891011- (void)viewDidLoad &#123; [super viewDidLoad]; // â€˜\\â€™ç¬¦ç”¨äºè¿›è¡Œæ¢è¡Œ [JPEngine evaluateScript:@&quot;\\ var alertView = require(&apos;UIAlertView&apos;).alloc().init();\\ alertView.setTitle(&apos;Alert&apos;);\\ alertView.setMessage(&apos;AlertView from js&apos;); \\ alertView.addButtonWithTitle(&apos;OK&apos;);\\ alertView.show(); \\ &quot;];&#125; å¼€å‘è€…ä¹Ÿå¯ä»¥åŠ¨æ€åœ¨Objective-Cç±»æ–‡ä»¶ä¸­æ·»åŠ æ–¹æ³•ï¼Œä¾‹å¦‚åœ¨ViewControllerç±»ä¸­ç¼–å†™å¦‚ä¸‹ï¼š 123456789- (void)viewDidLoad &#123; [super viewDidLoad]; self.view.backgroundColor = [UIColor whiteColor]; [JPEngine startEngine]; NSString *sourcePath = [[NSBundle mainBundle] pathForResource:@&quot;demo&quot; ofType:@&quot;js&quot;]; NSString *script = [NSString stringWithContentsOfFile:sourcePath encoding:NSUTF8StringEncoding error:nil]; [JPEngine evaluateScript:script]; [self performSelectorOnMainThread:@selector(creatView) withObject:nil waitUntilDone:nil];&#125; JavaScriptæ–‡ä»¶ä»£ç å¦‚ä¸‹ï¼š 12345678910111213 require(&apos;UIView, UIColor, UILabel&apos;) defineClass(&apos;ViewController&apos;, &#123; // replace the -genView method creatView: function() &#123; var view = UIView.alloc().initWithFrame(&#123;x:20, y:20, width:100, height:100&#125;); view.setBackgroundColor(UIColor.greenColor()); var label = UILabel.alloc().initWithFrame(&#123;x:0, y:0, width:100, height:100&#125;); label.setText(&quot;JSPatch&quot;); label.setTextAlignment(1); view.addSubview(label); self.view().addSubview(view) &#125; &#125;); é™¤äº†ä¸Šé¢çš„ä»£ç ï¼Œåœ¨ViewController.mæ–‡ä»¶ä¸­æ²¡æœ‰ç¼–å†™ä»»ä½•å…¶ä»–çš„æ–¹æ³•ï¼Œè¿è¡Œå·¥ç¨‹ï¼Œå¯ä»¥çœ‹åˆ°ç¨‹åºå¹¶æ²¡æœ‰å´©æºƒï¼ŒViewControlleræ‰§è¡Œäº†creatViewæ–¹æ³•ã€‚ é€šè¿‡ä¸Šé¢çš„ç¤ºä¾‹ï¼Œæˆ‘ä»¬å‘ç°ä½¿ç”¨JSPatchå¯ä»¥åšä¸€äº›ååˆ†æœ‰è¶£çš„äº‹ã€‚å¯¹äºiOSåº”ç”¨æ¥è¯´ï¼Œé€šè¿‡å®˜æ–¹æ¸ é“AppStoreè¿›è¡Œåº”ç”¨ç¨‹åºçš„å‘å¸ƒè¦é€šè¿‡äººå·¥å®¡æ ¸ï¼Œæœ‰æ—¶è¿™ä¸ªå®¡æ ¸å‘¨æœŸä¼šéå¸¸é•¿ï¼Œå¦‚æœåœ¨å¼€å‘è€…åœ¨ç¼–å†™ä»£ç æ—¶ç•™ä¸‹äº†ä¸€äº›å°æ¼æ´ï¼Œåº”ç”¨ä¸€æ—¦ä¸Šçº¿ï¼Œè‹¥è¦ä¿®æ”¹æ‰è¿™ä¸ªbugå°±ååˆ†è‰°éš¾äº†ã€‚æœ‰äº†JSPatchï¼Œæˆ‘ä»¬å¯ä»¥æƒ³è±¡ï¼Œå¦‚æœå¯ä»¥å®šä½åˆ°çº¿ä¸Šåº”ç”¨æœ‰é—®é¢˜çš„æ–¹æ³•ï¼Œä½¿ç”¨JSæ–‡ä»¶æ¥ä¿®æ”¹æ‰è¿™ä¸ªæ–¹æ³•ï¼Œè¿™å°†æ˜¯å¤šä¹ˆcoolçš„ä¸€ä»¶äº‹ï¼Œäº‹å®ä¸Šï¼ŒJSPatchçš„ä¸»è¦ç”¨é€”ä¹Ÿæ˜¯å¯ä»¥å®ç°çº¿ä¸Šåº”ç”¨æå°é—®é¢˜çš„hotfixã€‚ ä¸‰ã€JavaScriptä¸Objective-Cäº¤äº’çš„åŸºç¡€æ–¹æ³•è¦ä½¿ç”¨JSPatchæ¥è¿›è¡ŒObjective-Cé£æ ¼çš„æ–¹æ³•ç¼–å†™ï¼Œéœ€è¦éµå®ˆä¸€äº›JavaScriptä¸Objective-Cäº¤äº’çš„è§„åˆ™ã€‚ 1.åœ¨JavaScriptæ–‡ä»¶ä¸­ä½¿ç”¨Objective-Cç±» åœ¨ç¼–å†™JavaScriptä»£ç æ—¶å¦‚æœéœ€è¦ç”¨åˆ°Objective-Cçš„ç±»ï¼Œå¿…é¡»å…ˆå¯¹è¿™ä¸ªç±»è¿›è¡Œrequireå¼•ç”¨ï¼Œä¾‹å¦‚ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨UIViewè¿™ä¸ªç±»ï¼Œéœ€è¦åœ¨ä½¿ç”¨å‰è¿›è¡Œå¦‚ä¸‹å¼•ç”¨ï¼š 1require(&apos;UIView&apos;) åŒæ ·ä¹Ÿå¯ä»¥ä¸€æ¬¡å¯¹å¤šä¸ªObjective-Cç±»è¿›è¡Œå¼•ç”¨ï¼š 1require(&apos;UIView, UIColor, UILabel&apos;) è¿˜æœ‰ä¸€ç§æ›´åŠ ç®€ä¾¿çš„å†™æ³•ï¼Œç›´æ¥åœ¨ä½¿ç”¨çš„æ—¶å€™å¯¹å…¶è¿›è¡Œå¼•ç”¨ï¼š 1require(&apos;UIView&apos;).alloc().init() 2.åœ¨JavaScriptæ–‡ä»¶ä¸­è¿›è¡ŒObjective-Cæ–¹æ³•çš„è°ƒç”¨åœ¨è¿›è¡ŒObjective-Cæ–¹æ³•çš„è°ƒç”¨æ—¶ï¼Œåˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯è°ƒç”¨ç±»æ–¹æ³•ï¼Œä¸€ç§æ˜¯è°ƒç”¨ç±»çš„å¯¹è±¡æ–¹æ³•ã€‚ è°ƒç”¨ç±»æ–¹æ³•ï¼šé€šè¿‡ç±»åæ‰“ç‚¹çš„æ–¹å¼æ¥è°ƒç”¨ç±»æ–¹æ³•ï¼Œæ ¼å¼ç±»ä¼¼å¦‚ä¸‹ï¼Œæ‹¬å·å†…ä¸ºå‚æ•°ä¼ é€’ï¼š 1UIColor.redColor() è°ƒç”¨å®ä¾‹æ–¹æ³•ï¼šé€šè¿‡å¯¹è±¡æ‰“ç‚¹çš„æ–¹å¼è°ƒç”¨ç±»çš„å®ä¾‹æ–¹æ³•ï¼Œæ ¼å¼å¦‚ä¸‹ï¼Œæ‹¬å·å†…ä¸ºå‚æ•°ä¼ é€’ï¼š 1view.addSubview(label) å¯¹äºObjective-Cä¸­çš„å¤šå‚æ•°æ–¹æ³•ï¼Œè½¬åŒ–ä¸ºJavaScriptå°†å‚æ•°åˆ†å‰²çš„ä½ç½®ä»¥_è¿›è¡Œåˆ†å‰²ï¼Œå‚æ•°å…¨éƒ¨æ”¾å…¥åé¢çš„æ‹¬å·ä¸­ï¼Œä»¥é€—å·åˆ†å‰²ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1view.setBackgroundColor(UIColor.colorWithRed_green_blue_alpha(0,0.5,0.5,1)) å¯¹äºObjective-Cç±»çš„å±æ€§å˜é‡ï¼Œåœ¨JavaScriptä¸­åªèƒ½ä½¿ç”¨getterä¸setteræ–¹æ³•æ¥è®¿é—®ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1label.setText(&quot;JSPatch&quot;) æç¤ºï¼šå¦‚æœåŸObjective-Cçš„æ–¹æ³•ä¸­å·²ç»åŒ…å«äº†_ç¬¦å·ï¼Œåˆ™åœ¨JavaScriptä¸­ä½¿ç”¨__ä»£æ›¿ã€‚ 3.åœ¨JavaScriptä¸­æ“ä½œä¸ä¿®æ”¹Objective-Cç±»JSPatchçš„æœ€å¤§åº”ç”¨æ˜¯åœ¨åº”ç”¨è¿è¡Œæ—¶åŠ¨æ€çš„æ“ä½œå’Œä¿®æ”¹ç±»ã€‚ é‡å†™æˆ–è€…æ·»åŠ ç±»çš„æ–¹æ³•ï¼š åœ¨JavaScriptä¸­ä½¿ç”¨defineClassæ¥å®šä¹‰å’Œä¿®æ”¹ç±»ä¸­çš„æ–¹æ³•ï¼Œå…¶ç¼–å†™æ ¼å¼å¦‚ä¸‹æ‰€ç¤ºï¼š 123456/*classDeclaration:è¦æ·»åŠ æˆ–è€…é‡å†™æ–¹æ³•çš„ç±»å å­—ç¬¦ä¸² å¦‚æœæ­¤ç±»ä¸å­˜åœ¨ åˆ™ä¼šåˆ›å»ºæ–°çš„ç±»instanceMethods:è¦æ·»åŠ æˆ–è€…é‡å†™çš„å®ä¾‹æ–¹æ³• &#123;&#125;classMethods:è¦æ·»åŠ æˆ–è€…é‡å†™çš„ç±»æ–¹æ³• &#123;&#125;*/defineClass(classDeclaration, instanceMethods, classMethods) ç¤ºä¾‹å¦‚ä¸‹: 123456789101112131415defineClass(&apos;ViewController&apos;, &#123; // replace the -genView method newFunc: function() &#123; //ç¼–å†™å®ä¾‹æ–¹æ³• self.view().setBackgroundColor(UIColor.redColor()) &#125; &#125;,&#123; myLoad:function()&#123; //ç¼–å†™ç±»æ–¹æ³• &#125; &#125; ) å¦‚æœåœ¨é‡å†™äº†ç±»ä¸­çš„æ–¹æ³•åè¦è°ƒç”¨åŸæ–¹æ³•ï¼Œéœ€è¦ä½¿ç”¨ORIGå‰ç¼€ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789defineClass(&apos;ViewController&apos;, &#123; // replace the -genView method viewDidLoad: function() &#123; //ç¼–å†™å®ä¾‹æ–¹æ³• self.ORIGviewDidLoad() &#125; &#125; ) å¯¹äºObjective-Cä¸­superå…³é”®å­—è°ƒç”¨çš„æ–¹æ³•ï¼Œåœ¨JavaScriptä¸­å¯ä»¥ä½¿ç”¨self.super()æ¥è°ƒç”¨ï¼Œä¾‹å¦‚ï¼š 123456789defineClass(&apos;ViewController&apos;, &#123; // replace the -genView method viewDidLoad: function() &#123; //ç¼–å†™å®ä¾‹æ–¹æ³• self.super().viewDidLoad() &#125; &#125; ) åŒæ ·JSPatchä¹Ÿå¯ä»¥ä¸ºç±»æ·»åŠ ä¸´æ—¶å±æ€§ï¼Œç”¨äºåœ¨æ–¹æ³•é—´å‚æ•°ä¼ é€’ï¼Œä½¿ç”¨set_Prop_forKey()æ¥æ·»åŠ å±æ€§ï¼Œä½¿ç”¨getProp()æ¥è·å–å±æ€§ï¼Œæ³¨æ„ï¼ŒJSPatchæ·»åŠ çš„å±æ€§ä¸èƒ½ä½¿ç”¨Objective-Cçš„setterä¸getteræ–¹æ³•è®¿é—®ï¼Œå¦‚ä¸‹ï¼š 1234567891011121314defineClass(&apos;ViewController&apos;, &#123; // replace the -genView method viewDidLoad: function() &#123; //ç¼–å†™å®ä¾‹æ–¹æ³• self.super().viewDidLoad() self.setProp_forKey(&quot;JSPatch&quot;, &quot;data&quot;) &#125;, touchesBegan_withEvent(id,touch)&#123; self.getProp(&quot;data&quot;) self.view().setBackgroundColor(UIColor.redColor()) &#125; &#125; ) å…³äºä¸ºç±»æ·»åŠ åè®®çš„éµå®ˆï¼Œå’ŒObjective-Cä¸­éµå®ˆåè®®çš„æ–¹å¼ä¸€è‡´ï¼Œå¦‚ä¸‹ï¼š 1234567891011121314151617defineClass(&quot;ViewController2: UIViewController &lt;UIAlertViewDelegate&gt;&quot;, &#123; viewDidAppear: function(animated) &#123; var alertView = require(&apos;UIAlertView&apos;) .alloc() .initWithTitle_message_delegate_cancelButtonTitle_otherButtonTitles( &quot;Alert&quot;, &quot;content&quot;, self, &quot;OK&quot;, null ) alertView.show() &#125;, alertView_clickedButtonAtIndex:function(alertView, buttonIndex) &#123; console.log(&apos;clicked index &apos; + buttonIndex) &#125; &#125;) ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"JSPatch","slug":"JSPatch","permalink":"http://huishao.cc/categories/JSPatch/"}],"tags":[],"keywords":[{"name":"JSPatch","slug":"JSPatch","permalink":"http://huishao.cc/categories/JSPatch/"}]},{"title":"è®¾è®¡iOSä¸­éšç³»ç»Ÿé”®ç›˜å¼¹æ”¶å’Œå†…å®¹æ–‡å­—é•¿åº¦è‡ªé€‚åº”é«˜åº¦çš„æ–‡æœ¬æ¡†","slug":"189è®¾è®¡iOSä¸­éšç³»ç»Ÿé”®ç›˜å¼¹æ”¶å’Œå†…å®¹æ–‡å­—é•¿åº¦è‡ªé€‚åº”é«˜åº¦çš„æ–‡æœ¬æ¡†","date":"2016-03-22T16:00:00.000Z","updated":"2021-07-06T07:14:19.973Z","comments":true,"path":"2016/03/23/189è®¾è®¡iOSä¸­éšç³»ç»Ÿé”®ç›˜å¼¹æ”¶å’Œå†…å®¹æ–‡å­—é•¿åº¦è‡ªé€‚åº”é«˜åº¦çš„æ–‡æœ¬æ¡†/","link":"","permalink":"http://huishao.cc/2016/03/23/189è®¾è®¡iOSä¸­éšç³»ç»Ÿé”®ç›˜å¼¹æ”¶å’Œå†…å®¹æ–‡å­—é•¿åº¦è‡ªé€‚åº”é«˜åº¦çš„æ–‡æœ¬æ¡†/","excerpt":"","text":"è®¾è®¡iOSä¸­éšç³»ç»Ÿé”®ç›˜å¼¹æ”¶å’Œå†…å®¹æ–‡å­—é•¿åº¦è‡ªé€‚åº”é«˜åº¦çš„æ–‡æœ¬æ¡†æ–‡æœ¬è¾“å…¥æ¡†æ˜¯å¤šæ•°ä¸ç¤¾äº¤ç›¸å…³çš„appä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€ä¸ªæ§ä»¶ï¼Œè¿™äº›æ–‡æœ¬è¾“å…¥æ¡†åº”è¯¥å…·å¤‡å¦‚ä¸‹çš„åŠŸèƒ½ï¼š 1.åœ¨é”®ç›˜ä¸ºå¼¹èµ·æ—¶ï¼Œè¾“å…¥æ¡†æ‚¬æµ®åœ¨ç•Œé¢åº•éƒ¨ã€‚ 2.å½“é”®ç›˜å¼¹èµ·æ—¶ï¼Œè¾“å…¥æ¡†ä½ç½®ä¸Šç§»è‡³é”®ç›˜ä¸Šæ–¹ï¼Œå¹¶ä¸”åŠ¨ç”»åº”ä¸é”®ç›˜åŒæ­¥ã€‚ 3.å½“è¾“å…¥çš„æ–‡å­—è¶…å‡ºä¸€è¡Œæ—¶ï¼Œè¾“å…¥æ¡†åº”æƒ³ç”¨çš„è¿›è¡Œé«˜åº¦æ‰©å±•ã€‚ 4.å½“è¾“å…¥æ¡†çš„é«˜åº¦è¾¾åˆ°æŸä¸€æé™å€¼æ—¶ï¼Œè¾“å…¥æ¡†é«˜åº¦ä¸åº”ç»§ç»­æ‰©å±•ï¼Œæ–‡å­—åŒºåŸŸåº”è¯¥æ”¯æŒæ»‘åŠ¨ã€‚ ä½¿ç”¨autolayoutå¸ƒå±€æŠ€æœ¯åŠ ä¸Šå¯¹é”®ç›˜çš„ç›¸å…³ç›‘å¬ï¼Œå¯ä»¥ååˆ†æ–¹ä¾¿çš„å®ç°ä¸Šè¿°æ•ˆæœã€‚é¦–å…ˆåœ¨xibæ–‡ä»¶ä¸­è¿›è¡Œç›¸å…³çº¦æŸçš„æ·»åŠ ï¼Œå¦‚ä¸‹å›¾ï¼š å°†éœ€è¦çš„å±æ€§ä¸çº¦æŸå¯¹è±¡å…³è”åˆ°æ–‡ä»¶ä¸­ï¼š 12345678910//æ•´ä½“æ–‡æœ¬æ§ä»¶çš„é«˜åº¦ @IBOutlet weak var textViewHeight: NSLayoutConstraint! //æ–‡æœ¬æ§ä»¶ä¸­çš„æ–‡å­—è¾“å…¥æ§ä»¶UITestViewçš„é«˜åº¦ @IBOutlet weak var textFieldHeight: NSLayoutConstraint! //æ–‡æœ¬æ§ä»¶ä¸­æ–‡å­—è¾“å…¥æ§ä»¶ @IBOutlet weak var ourTextField: UITextView! //æ–‡æœ¬æ§ä»¶ä¸çˆ¶è§†å›¾åº•éƒ¨çš„çº¦æŸè·ç¦» @IBOutlet weak var textViewBottom: NSLayoutConstraint! //æ–‡æœ¬æ§ä»¶ @IBOutlet weak var ourTextView: UIView! åœ¨åˆå§‹åŒ–æ–¹æ³•ä¸­è¿›è¡Œé€šçŸ¥çš„æ³¨å†Œå’Œä»£ç†çš„è®¾ç½®ï¼š 123 NSNotificationCenter.defaultCenter().addObserver(self, selector: Selector(&quot;keyboardWillShow:&quot;), name: UIKeyboardWillShowNotification, object: nil) NSNotificationCenter.defaultCenter().addObserver(self, selector: Selector(&quot;keyboardWillHidden:&quot;), name: UIKeyboardWillHideNotification, object: nil) ourTextField.delegate=self å®ç°é€šçŸ¥çš„ç›‘å¬æ–¹æ³•å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930 //é”®ç›˜å°†è¦å±•ç¤ºæ—¶è§¦å‘çš„æ–¹æ³• func keyboardWillShow(noti:NSNotification)&#123; //è·å–é€šçŸ¥ä¿¡æ¯ let info:Dictionary = noti.userInfo! //è·å–ä¿¡æ¯ä¸­çš„é”®ç›˜å°ºå¯¸å’Œä½ç½®ä¿¡æ¯ let value:NSValue = info[UIKeyboardFrameBeginUserInfoKey] as! NSValue //è·å–é”®ç›˜åŠ¨ç”»çš„æ—¶é—´ä¿¡æ¯ let value2:NSValue = info[UIKeyboardAnimationDurationUserInfoKey] as! NSValue let keyboardSize = value.CGRectValue() let height = keyboardSize.height var time:NSTimeInterval=0 value2.getValue(&amp;time) //é‡è®¾çº¦æŸ textViewBottom.constant = height //åŠ¨ç”»å±•ç¤º UIView.animateWithDuration(time) &#123; () -&gt; Void in self.view.layoutIfNeeded() &#125; &#125; //é”®ç›˜å°†è¦éšè—æ—¶è§¦å‘çš„æ–¹æ³• func keyboardWillHidden(noti:NSNotification)&#123; let info:Dictionary = noti.userInfo! let value2:NSValue = info[UIKeyboardAnimationDurationUserInfoKey] as! NSValue var time:NSTimeInterval=0 value2.getValue(&amp;time) textViewBottom.constant = 0 UIView.animateWithDuration(time) &#123; () -&gt; Void in self.view.layoutIfNeeded() &#125; &#125; ç›‘å¬çš„é”®ç›˜çŠ¶æ€å‘é€çš„é€šçŸ¥ä¸­ï¼Œä¼šä¼ é€’è¿›æ¥è®¸å¤šé”®ç›˜ä¿¡æ¯ï¼Œå¯å–çš„é”®å€¼å¦‚ä¸‹ï¼š 12345678910@available(iOS 3.2, *)public let UIKeyboardFrameBeginUserInfoKey: String //é”®ç›˜çš„åˆå§‹ä½ç½®å°ºå¯¸ ä¸ºCGRectç±»å‹çš„NSValueå€¼@available(iOS 3.2, *)public let UIKeyboardFrameEndUserInfoKey: String // é”®ç›˜çš„æœ«ä½ä½ç½®å°ºå¯¸ ä¸ºCGRectç±»å‹çš„NSValueå€¼@available(iOS 3.0, *)public let UIKeyboardAnimationDurationUserInfoKey: String // é”®ç›˜åŠ¨ç”»æ—¶é—´ doubleç±»å‹çš„NSValue@available(iOS 3.0, *)public let UIKeyboardAnimationCurveUserInfoKey: String // é”®ç›˜åŠ¨ç”»æ•ˆæœ (UIViewAnimationCurve)æšä¸¾ç±»å‹çš„NSNumberå€¼@available(iOS 9.0, *)public let UIKeyboardIsLocalUserInfoKey: String //ä¸å¤šä»»åŠ¡ç›¸å…³ åˆ¤æ–­é”®ç›˜æ˜¯å¦å±äºå½“å‰åº”ç”¨ iOS9åå¯ç”¨ å¯ä»¥ç›‘å¬çš„ä¸é”®ç›˜ç›¸å…³ä¿¡æ¯çš„é€šçŸ¥æœ‰å¦‚ä¸‹å‡ ç§ï¼š 12345678public let UIKeyboardWillShowNotification: String//é”®ç›˜å°†è¦å‡ºç°public let UIKeyboardDidShowNotification: String//é”®ç›˜å·²ç»å‡ºç°public let UIKeyboardWillHideNotification: String//é”®ç›˜å°†è¦éšè—public let UIKeyboardDidHideNotification: String//é”®ç›˜å·²ç»éšè—@available(iOS 5.0, *)public let UIKeyboardWillChangeFrameNotification: String//é”®ç›˜frameå°†è¦æ”¹å˜@available(iOS 5.0, *)public let UIKeyboardDidChangeFrameNotification: String//é”®ç›˜frameå·²ç»æ”¹å˜ è¿˜éœ€è¦å®ç°å½“è¾“å…¥æ¡†æ–‡å­—é•¿åº¦æ”¹å˜æ—¶çš„å›è°ƒæ–¹æ³•å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324func textViewDidChange(textView: UITextView) &#123; let height = textView.contentSize.height if height &lt;= 37 &#123; textFieldHeight.constant = 37 textViewHeight.constant = 53 UIView.animateWithDuration(0.3, animations: &#123; () -&gt; Void in self.view.layoutIfNeeded() &#125;) return //ä¸´ç•Œå€¼ &#125;else if height&lt;100 &#123; textFieldHeight.constant = height textViewHeight.constant = height+16 UIView.animateWithDuration(0.3, animations: &#123; () -&gt; Void in self.view.layoutIfNeeded() &#125;) &#125;else&#123; textFieldHeight.constant = 100 textViewHeight.constant = 116 UIView.animateWithDuration(0.3, animations: &#123; () -&gt; Void in self.view.layoutIfNeeded() &#125;) &#125; &#125; ä¸Šé¢ä»£ç æ˜¯å®ç°å¯è‡ªé€‚åº”é«˜åº¦å’Œä½ç½®çš„æ–‡æœ¬è¾“å…¥æ¡†æ§ä»¶çš„æ ¸å¿ƒä»£ç ï¼Œæ•ˆæœå›¾ä¸‹å›¾ï¼š ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"COME ON SWIFT","slug":"COME-ON-SWIFT","permalink":"http://huishao.cc/categories/COME-ON-SWIFT/"}],"tags":[],"keywords":[{"name":"COME ON SWIFT","slug":"COME-ON-SWIFT","permalink":"http://huishao.cc/categories/COME-ON-SWIFT/"}]},{"title":"iOSç®€æ˜“è“ç‰™å¯¹æˆ˜äº”å­æ£‹æ¸¸æˆè®¾è®¡æ€è·¯ä¹‹ä¸€â€”â€”æ ¸å¿ƒè“ç‰™é€šè®¯ç±»çš„è®¾è®¡","slug":"187iOSç®€æ˜“è“ç‰™å¯¹æˆ˜äº”å­æ£‹æ¸¸æˆè®¾è®¡æ€è·¯ä¹‹ä¸€â€”â€”æ ¸å¿ƒè“ç‰™é€šè®¯ç±»çš„è®¾è®¡","date":"2016-03-20T16:00:00.000Z","updated":"2021-07-06T07:12:16.245Z","comments":true,"path":"2016/03/21/187iOSç®€æ˜“è“ç‰™å¯¹æˆ˜äº”å­æ£‹æ¸¸æˆè®¾è®¡æ€è·¯ä¹‹ä¸€â€”â€”æ ¸å¿ƒè“ç‰™é€šè®¯ç±»çš„è®¾è®¡/","link":"","permalink":"http://huishao.cc/2016/03/21/187iOSç®€æ˜“è“ç‰™å¯¹æˆ˜äº”å­æ£‹æ¸¸æˆè®¾è®¡æ€è·¯ä¹‹ä¸€â€”â€”æ ¸å¿ƒè“ç‰™é€šè®¯ç±»çš„è®¾è®¡/","excerpt":"","text":"iOSç®€æ˜“è“ç‰™å¯¹æˆ˜äº”å­æ£‹æ¸¸æˆè®¾è®¡æ€è·¯ä¹‹ä¸€â€”â€”æ ¸å¿ƒè“ç‰™é€šè®¯ç±»çš„è®¾è®¡ä¸€ã€å¼•è¨€æœ¬ç³»åˆ—åšå®¢å°†ç³»ç»Ÿçš„ä»‹ç»ä¸€æ¬¾è“ç‰™å¯¹æˆ˜äº”å­æ£‹çš„å¼€å‘æ€è·¯ä¸è¿‡ç¨‹ï¼Œå…¶ä¸­çš„æ ¸å¿ƒéƒ¨åˆ†æœ‰ä¸¤ä¸ªï¼Œä¸€éƒ¨åˆ†æ˜¯è“ç‰™é€šè®¯ä¸­å¯¹æˆ˜åŒæ–¹ä¿¡æ¯äº¤äº’æ¡†æ¶çš„è®¾è®¡ä¸å¼€å‘ï¼Œä¸€éƒ¨åˆ†æ˜¯äº”å­æ£‹æ¸¸æˆä¸­æ£‹ç›˜é€»è¾‘ä¸èƒœè´Ÿåˆ¤å®šçš„ç®—æ³•å®ç°ã€‚æœ¬ç¯‡åšå®¢å°†ä»‹ç»æ¸¸æˆä¸­è“ç‰™é€šè®¯ç±»çš„è®¾è®¡æ€è·¯ äºŒã€è®¾è®¡é€šè®¯ç±»çš„æ ¸å¿ƒæƒ³æ³• åœ¨å‰ç¯‡çš„ä¸€ç¯‡åšå®¢ä¸­ï¼Œæˆ‘ä»¬æœ‰è¯¦ç»†çš„ä»‹ç»iOSä¸­è“ç‰™4.0æŠ€æœ¯çš„åº”ç”¨ä¸ç³»ç»Ÿæ¡†æ¶CoorBluetooth.frameworkä¸­æä¾›çš„ç¼–ç¨‹æ¥å£çš„ç”¨æ³•ã€‚åšå®¢åœ°å€å¦‚ä¸‹ï¼Œå¦‚æœè¯»è€…éœ€è¦æ›´è¯¦ç»†çš„äº†è§£iOSä¸­è“ç‰™æŠ€æœ¯çš„ä½¿ç”¨ï¼Œå¯ä»¥å…ˆé˜…è¯»è¿™ç¯‡åšå®¢ï¼š iOSå¼€å‘ä¹‹è“ç‰™é€šè®¯ï¼šhttp://my.oschina.net/u/2340880/blog/548127ã€‚ åœ¨ä½¿ç”¨è“ç‰™è¿›è¡Œåº”ç”¨é—´é€šè®¯äº¤äº’æ—¶ï¼Œå¿…é¡»æœ‰ä¸€æ–¹ä½œä¸ºä¸­å¿ƒè®¾å¤‡ï¼Œæœ‰ä¸€æ–¹ä½œä¸ºå¤–å›´è®¾å¤‡ã€‚ä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œé€šè¿‡æ‰‹æœºè“ç‰™å¯ä»¥å’Œåˆ·å¡è®¾å¤‡ã€æ‰“å°æœºç­‰è¿›è¡Œä¿¡æ¯äº¤äº’ï¼Œè¿™é‡Œçš„åˆ·å¡è®¾å¤‡ã€æ‰“å°æœºå°±å……å½“ç€å¤–å›´è®¾å¤‡çš„è§’è‰²ï¼Œæ‰‹æœºå°±å……å½“ç€ä¸­å¿ƒè®¾å¤‡çš„è§’è‰²ã€‚åœ¨ä¸­å¿ƒè®¾å¤‡ä¸å¤–å›´è®¾å¤‡é—´ï¼Œå¤–è®¾è´Ÿè´£å‘å‘¨å›´å¹¿æ’­å¹¿å‘Šå‘ŠçŸ¥å…¶ä»–è®¾å¤‡è‡ªå·±çš„å­˜åœ¨ï¼Œä¸­å¿ƒè®¾å¤‡æ¥æ”¶åˆ°å¤–è®¾å¹¿æ’­çš„å¹¿å‘Šåå¯ä»¥é€‰æ‹©ç›®æ ‡è®¾å¤‡è¿›è¡Œè¿æ¥ï¼Œå½“ç„¶ï¼Œå¤–è®¾çš„å¹¿æ’­çš„å¹¿å‘Šä¸­ä¼šæºå¸¦ä¸€äº›èº«ä»½ä¿¡æ¯ä¾›ä¸­å¿ƒè®¾å¤‡è¿›è¡Œè¯†åˆ«ã€‚ä¸€æ—¦ä¸­å¿ƒè®¾å¤‡ä¸å¤–è®¾å»ºç«‹è¿æ¥ï¼Œä¸­å¿ƒè®¾å¤‡å˜å¯ä»¥ä½¿ç”¨å¤–è®¾æä¾›çš„æœåŠ¡ï¼Œä¸€ä¸ªå¤–è®¾å¯ä»¥æä¾›å¤šä¸ªæœåŠ¡ï¼Œä¾‹å¦‚ä¸€æ¬¾è“ç‰™æ‰“å°æœºå¤–è®¾å¯èƒ½ä¼šæä¾›ä¸¤ç§æœåŠ¡ï¼Œä¸€ç§æœåŠ¡å‘ä¸­å¿ƒè®¾å¤‡å‘é€çº¦å®šä¿¡æ¯ï¼Œå‘ŠçŸ¥ä¸­å¿ƒè®¾å¤‡æ”¯æŒçš„æ‰“å°æ ¼å¼ï¼Œä¸€ç§æœåŠ¡è·å–ä¸­å¿ƒè®¾å¤‡çš„æ•°æ®æ¥è¿›è¡Œæ‰“å°æœåŠ¡ã€‚æœåŠ¡æ˜¯ä¸­å¿ƒè®¾å¤‡ä¸å¤–è®¾æœºå‹é€šè®¯çš„åŠŸèƒ½æ ‡è¯†ï¼Œç„¶è€Œå…·ä½“çš„é€šè®¯åª’ä»‹åˆ™æ˜¯ç”±æœåŠ¡ä¸­çš„ç‰¹å¾å€¼æ¥å®Œæˆçš„ï¼Œä¸€ä¸ªæœåŠ¡ä¹Ÿå¯ä»¥æä¾›å¤šä¸ªç‰¹å¾å€¼ã€‚å¯ä»¥è¿™æ ·ç†è§£ï¼Œç‰¹å¾å€¼æ˜¯ä¸¤è®¾å¤‡è¿›è¡Œè“ç‰™é€šè®¯çš„æœ€å°é€šè®¯å•å…ƒï¼Œæ˜¯è¯»å†™æ•°æ®çš„è½½ä½“ã€‚ ä¸Šé¢ç®€å•ä»‹ç»äº†åœ¨è“ç‰™é€šè®¯ä¸­çš„ä¸€äº›åŸºæœ¬æµç¨‹ä¸ç›¸å…³æ¦‚å¿µï¼Œåº”ç”¨äºæ¸¸æˆä¸­ç•¥å¾®æœ‰ä¸€äº›åŒºåˆ«ï¼Œé¦–å…ˆæˆ‘ä»¬è¿™æ¬¾æ¸¸æˆåº”è¯¥å…·å¤‡æ—¢å¯ä»¥ä½œä¸ºä¸­å¿ƒè®¾å¤‡ä¹Ÿå¯ä»¥ä½œä¸ºå¤–è®¾çš„èƒ½åŠ›ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦å°†ä¸­å¿ƒè®¾å¤‡çš„é€šè®¯æ¨¡å¼ä¸å¤–è®¾çš„é€šè®¯æ¨¡å¼éƒ½é›†æˆä¸æ¸¸æˆçš„é€šè®¯æ¡†æ¶ä¸­ã€‚æ¸¸æˆçš„åŒæ–¹è¦å»ºç«‹è¿æ¥åº”è¯¥æœ‰å¦‚ä¸‹å‡ ä¸ªè¿‡ç¨‹ï¼š 1.æœ‰ä¸€æ–¹å»ºç«‹æ¸¸æˆï¼Œä½œä¸ºæˆ¿ä¸»ã€‚ 2.ç”±ä¸€æ–¹ä½œä¸ºæ¸¸æˆçš„åŠ å…¥è€…ï¼Œæ‰«æé™„è¿‘çš„æ¸¸æˆã€‚ 3.å¤–è®¾æä¾›çš„æœåŠ¡ä¸­åº”è¯¥è‡³å°‘æœ‰ä¸¤ä¸ªç‰¹å¾å€¼ï¼Œä¸€ä¸ªç”¨äºå·±æ–¹ä¸‹å­åé€šçŸ¥å¯¹æ–¹è®¾å¤‡ï¼Œä¸€ä¸ªç”¨äºç›‘å¬å¯¹æ–¹è®¾å¤‡çš„ä¸‹å­æ“ä½œã€‚ ç”±ä¸Šé¢åˆ†æå¯çŸ¥ï¼Œæ¸¸æˆä¸­çš„æˆ¿ä¸»æ­£æ˜¯å……å½“è“ç‰™é€šè®¯ä¸­çš„å¤–è®¾ï¼Œå®ƒå°†å¹¿æ’­å¹¿å‘Šå‘ŠçŸ¥å‘¨å›´è®¾å¤‡è‡ªå·±çš„å­˜åœ¨ã€‚è€Œæ¸¸æˆä¸­çš„åŠ å…¥è€…åˆ™æ˜¯å……å½“ç€è“ç‰™é€šè®¯ä¸­çš„ä¸­å¿ƒè®¾å¤‡ï¼Œæ‰«æåˆ°å‘¨å›´çš„æ¸¸æˆæˆ¿é—´åè¿›è¡Œè¿æ¥åŠ å…¥ï¼Œå¼€å§‹æ¸¸æˆã€‚ ä¸‰ã€æ¸¸æˆä¸­è“ç‰™é€šè®¯ç±»çš„è®¾è®¡ åˆ›å»ºä¸€ä¸ªå‘½åä¸ºBlueToothToolçš„å·¥å…·ç±»ï¼Œä½œä¸ºæ¸¸æˆçš„è“ç‰™é€šè®¯ç±»ï¼Œç¼–å†™å…¶å¤´æ–‡ä»¶å¦‚ä¸‹ï¼š BlueToothTool.h 1234567891011121314151617181920212223242526272829303132333435#import &lt;Foundation/Foundation.h&gt;#import &lt;UIKit/UIKit.h&gt;#import &lt;CoreBluetooth/CoreBluetooth.h&gt;//è¿™ä¸ªä»£ç†ç”¨äºå¤„ç†æ¥æ”¶åˆ°å¯¹æ–¹è®¾å¤‡å‘é€æ¥çš„æ•°æ®åçš„å›è°ƒ@protocol BlueToothToolDelegate &lt;NSObject&gt;//è·å–å¯¹æ–¹æ•°æ®-(void)getData:(NSString *)data;@end@interface BlueToothTool : NSObject&lt;CBPeripheralManagerDelegate,CBCentralManagerDelegate,CBPeripheralDelegate,UIAlertViewDelegate&gt;//ä»£ç†@property(nonatomic,weak)id&lt;BlueToothToolDelegate&gt;delegate;//æ ‡è®°æ˜¯å¦æ˜¯æ¸¸æˆä¸­çš„æˆ¿ä¸»@property(nonatomic,assign)BOOL isCentral;/** *è·å–å•ä¾‹å¯¹è±¡çš„æ–¹æ³• */+(instancetype)sharedManager;/* *ä½œä¸ºæ¸¸æˆçš„æˆ¿ä¸»å»ºç«‹æ¸¸æˆæˆ¿é—´ */-(void)setUpGame:(NSString *)name block:(void(^)(BOOL first))finish;/* *ä½œä¸ºæ¸¸æˆçš„åŠ å…¥è€…æŸ¥æ‰¾é™„è¿‘çš„æ¸¸æˆ */-(void)searchGame;/** *æ–­å—è¿æ¥ */-(void)disConnect;/* *è¿›è¡Œå†™æ•°æ®æ“ä½œ */-(void)writeData:(NSString *)data;@end å®ç°BlueToothTool.mæ–‡ä»¶å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274#import &quot;BlueToothTool.h&quot;@implementation BlueToothTool&#123; //å¤–è®¾ç®¡ç†ä¸­å¿ƒ CBPeripheralManager * _peripheralManager; //å¤–è®¾æä¾›çš„æœåŠ¡ CBMutableService * _ser; //æœåŠ¡æä¾›çš„è¯»ç‰¹å¾å€¼ CBMutableCharacteristic * _readChara; //æœåŠ¡æä¾›çš„å†™ç‰¹å¾å€¼ CBMutableCharacteristic * _writeChara; //ç­‰å¾…å¯¹æ–¹åŠ å…¥çš„æç¤ºè§†å›¾ UIView * _waitOtherView; //æ­£åœ¨æ‰«æé™„è¿‘æ¸¸æˆçš„æç¤ºè§†å›¾ UIView * _searchGameView; //è®¾å¤‡ä¸­å¿ƒç®¡ç†å¯¹è±¡ CBCentralManager * _centerManger; //è¦è¿æ¥çš„å¤–è®¾ CBPeripheral * _peripheral; //è¦äº¤äº’çš„å¤–è®¾å±æ€§ CBCharacteristic * _centerReadChara; CBCharacteristic * _centerWriteChara; //å¼€å§‹æ¸¸æˆåçš„å›è°ƒ å‘ŠçŸ¥å…ˆæ‰‹ä¸åæ‰‹ä¿¡æ¯ void(^block)(BOOL first);&#125;//å®ç°å•ä¾‹æ–¹æ³•+(instancetype)sharedManager&#123; static BlueToothTool *tool = nil; static dispatch_once_t predicate; dispatch_once(&amp;predicate, ^&#123; tool = [[self alloc] init]; &#125;); return tool;&#125;//å®ç°åˆ›å»ºæ¸¸æˆçš„æ–¹æ³•-(void)setUpGame:(NSString *)name block:(void (^)(BOOL))finish&#123; block = [finish copy]; if (_peripheralManager==nil) &#123; //åˆå§‹åŒ–æœåŠ¡ _ser= [[CBMutableService alloc]initWithType:[CBUUID UUIDWithString:@&quot;68753A44-4D6F-1226-9C60-0050E4C00067&quot;] primary:YES]; //åˆå§‹åŒ–ç‰¹å¾ _readChara = [[CBMutableCharacteristic alloc]initWithType:[CBUUID UUIDWithString:@&quot;68753A44-4D6F-1226-9C60-0050E4C00067&quot;] properties:CBCharacteristicPropertyNotify value:nil permissions:CBAttributePermissionsReadable]; _writeChara = [[CBMutableCharacteristic alloc]initWithType:[CBUUID UUIDWithString:@&quot;68753A44-4D6F-1226-9C60-0050E4C00068&quot;] properties:CBCharacteristicPropertyWriteWithoutResponse value:nil permissions:CBAttributePermissionsWriteable]; //å‘æœåŠ¡ä¸­æ·»åŠ ç‰¹å¾ _ser.characteristics = @[_readChara,_writeChara]; _peripheralManager = [[CBPeripheralManager alloc]initWithDelegate:self queue:dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0)]; &#125; //è®¾ç½®ä¸ºæˆ¿ä¸» _isCentral=YES; //å¼€å§‹å¹¿æ’­å¹¿å‘Š [_peripheralManager startAdvertising:@&#123;CBAdvertisementDataLocalNameKey:@&quot;WUZIGame&quot;&#125;];&#125;//å¤–è®¾æ£€æµ‹è“ç‰™çŠ¶æ€-(void)peripheralManagerDidUpdateState:(CBPeripheralManager *)peripheral&#123; //åˆ¤æ–­æ˜¯å¦å¯ç”¨ if (peripheral.state==CBPeripheralManagerStatePoweredOn) &#123; //æ·»åŠ æœåŠ¡ [_peripheralManager addService:_ser]; //å¼€å§‹å¹¿æ’­å¹¿å‘Š [_peripheralManager startAdvertising:@&#123;CBAdvertisementDataLocalNameKey:@&quot;WUZIGame&quot;&#125;]; &#125;else&#123; //å¼¹æç¤ºæ¡† dispatch_async(dispatch_get_main_queue(), ^&#123; [self showAlert]; &#125;); &#125;&#125;//å¼€å§‹æ”¾å¹¿å‘Šçš„å›è°ƒ-(void)peripheralManagerDidStartAdvertising:(CBPeripheralManager *)peripheral error:(NSError *)error&#123; if (_waitOtherView==nil) &#123; _waitOtherView = [[UIView alloc]initWithFrame:CGRectMake([UIScreen mainScreen].bounds.size.width/2-100, 240, 200, 100)]; dispatch_async(dispatch_get_main_queue(), ^&#123; UILabel * label = [[UILabel alloc]initWithFrame:CGRectMake(0, 0, 200, 100)]; label.backgroundColor = [UIColor clearColor]; label.textAlignment = NSTextAlignmentCenter; label.text = @&quot;ç­‰å¾…é™„è¿‘ç©å®¶åŠ å…¥&quot;; [_waitOtherView addSubview:label]; _waitOtherView.backgroundColor = [UIColor colorWithRed:0 green:0 blue:0 alpha:0.4]; [[[UIApplication sharedApplication].delegate window]addSubview:_waitOtherView]; &#125;); &#125;else&#123; dispatch_async(dispatch_get_main_queue(), ^&#123; [_waitOtherView removeFromSuperview]; [[[UIApplication sharedApplication].delegate window]addSubview:_waitOtherView]; &#125;); &#125;&#125;//æ·»åŠ æœåŠ¡åå›è°ƒçš„æ–¹æ³•-(void)peripheralManager:(CBPeripheralManager *)peripheral didAddService:(CBService *)service error:(NSError *)error&#123; if (error) &#123; NSLog(@&quot;æ·»åŠ æœåŠ¡å¤±è´¥&quot;); &#125; NSLog(@&quot;æ·»åŠ æœåŠ¡æˆåŠŸ&quot;);&#125;//ä¸­å¿ƒè®¾å¤‡è®¢é˜…ç‰¹å¾å€¼æ—¶å›è°ƒ-(void)peripheralManager:(CBPeripheralManager *)peripheral central:(CBCentral *)central didSubscribeToCharacteristic:(CBCharacteristic *)characteristic&#123; [_peripheralManager stopAdvertising]; if (_isCentral) &#123; UIAlertView * alert = [[UIAlertView alloc]initWithTitle:@&quot;&quot; message:@&quot;è¯·é€‰æ‹©å…ˆæ‰‹åæ‰‹&quot; delegate:self cancelButtonTitle:@&quot;æˆ‘å…ˆæ‰‹&quot; otherButtonTitles:@&quot;æˆ‘åæ‰‹&quot;, nil]; dispatch_async(dispatch_get_main_queue(), ^&#123; [_waitOtherView removeFromSuperview]; [alert show]; &#125;); &#125;&#125;//æ”¶åˆ°å†™æ¶ˆæ¯åçš„å›è°ƒ-(void)peripheralManager:(CBPeripheralManager *)peripheral didReceiveWriteRequests:(NSArray&lt;CBATTRequest *&gt; *)requests&#123; dispatch_async(dispatch_get_main_queue(), ^&#123; [self.delegate getData:[[NSString alloc]initWithData:requests.firstObject.value encoding:NSUTF8StringEncoding]]; &#125;);&#125;//å¼¹æç¤ºæ¡†çš„æ–¹æ³•-(void)showAlert&#123; UIAlertView * alert = [[UIAlertView alloc]initWithTitle:@&quot;æ¸©é¦¨æç¤º&quot; message:@&quot;è¯·ç¡®ä¿æ‚¨çš„è“ç‰™å¯ç”¨&quot; delegate:nil cancelButtonTitle:@&quot;å¥½çš„&quot; otherButtonTitles:nil, nil]; [alert show];&#125;//===============================================================ä½œä¸ºæ¸¸æˆåŠ å…¥è¿™å®ç°çš„æ–¹æ³•========//æœç´¢å‘¨å›´æ¸¸æˆ-(void)searchGame&#123; if (_centerManger==nil) &#123; _centerManger = [[CBCentralManager alloc]initWithDelegate:self queue:dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0)]; &#125;else&#123; [_centerManger scanForPeripheralsWithServices:nil options:nil]; if (_searchGameView==nil) &#123; _searchGameView = [[UIView alloc]initWithFrame:CGRectMake([UIScreen mainScreen].bounds.size.width/2-100, 240, 200, 100)]; UILabel * label = [[UILabel alloc]initWithFrame:CGRectMake(0, 0, 200, 100)]; label.backgroundColor = [UIColor clearColor]; label.textAlignment = NSTextAlignmentCenter; label.text = @&quot;æ­£åœ¨æ‰«åŠ å…¥æé™„è¿‘æ¸¸æˆ&quot;; _searchGameView.backgroundColor = [UIColor colorWithRed:0 green:0 blue:0 alpha:0.4]; [_searchGameView addSubview:label]; [[[UIApplication sharedApplication].delegate window]addSubview:_searchGameView]; &#125;else&#123; [_searchGameView removeFromSuperview]; [[[UIApplication sharedApplication].delegate window]addSubview:_searchGameView]; &#125; &#125; //è®¾ç½®ä¸ºæ¸¸æˆåŠ å…¥æ–¹ _isCentral = NO;&#125;//è®¾å¤‡ç¡¬ä»¶æ£€æµ‹çŠ¶æ€å›è°ƒçš„æ–¹æ³• å¯ç”¨åå¼€å§‹æ‰«æè®¾å¤‡-(void)centralManagerDidUpdateState:(CBCentralManager *)central&#123; if (_centerManger.state==CBCentralManagerStatePoweredOn) &#123; [_centerManger scanForPeripheralsWithServices:nil options:nil]; if (_searchGameView==nil) &#123; dispatch_async(dispatch_get_main_queue(), ^&#123; _searchGameView = [[UIView alloc]initWithFrame:CGRectMake([UIScreen mainScreen].bounds.size.width/2-100, 240, 200, 100)]; UILabel * label = [[UILabel alloc]initWithFrame:CGRectMake(0, 0, 200, 100)]; label.backgroundColor = [UIColor clearColor]; label.textAlignment = NSTextAlignmentCenter; label.text = @&quot;æ­£åœ¨æ‰«åŠ å…¥æé™„è¿‘æ¸¸æˆ&quot;; _searchGameView.backgroundColor = [UIColor colorWithRed:0 green:0 blue:0 alpha:0.4]; [_searchGameView addSubview:label]; [[[UIApplication sharedApplication].delegate window]addSubview:_searchGameView]; &#125;); &#125;else&#123; dispatch_async(dispatch_get_main_queue(), ^&#123; [_searchGameView removeFromSuperview]; [[[UIApplication sharedApplication].delegate window]addSubview:_searchGameView]; &#125;); &#125; &#125;else&#123; dispatch_async(dispatch_get_main_queue(), ^&#123; [self showAlert]; &#125;); &#125;&#125;//å‘ç°å¤–è®¾åè°ƒç”¨çš„æ–¹æ³•-(void)centralManager:(CBCentralManager *)central didDiscoverPeripheral:(CBPeripheral *)peripheral advertisementData:(NSDictionary&lt;NSString *,id&gt; *)advertisementData RSSI:(NSNumber *)RSSI&#123; //è·å–è®¾å¤‡çš„åç§° æˆ–è€…å¹¿å‘Šä¸­çš„ç›¸åº”å­—æ®µæ¥é…å¯¹ NSString * name = [advertisementData objectForKey:CBAdvertisementDataLocalNameKey]; if ([name isEqualToString:@&quot;WUZIGame&quot;]) &#123; //ä¿å­˜æ­¤è®¾å¤‡ _peripheral = peripheral; //è¿›è¡Œè¿æ¥ [_centerManger connectPeripheral:peripheral options:@&#123;CBConnectPeripheralOptionNotifyOnConnectionKey:@YES&#125;]; &#125;&#125;//è¿æ¥å¤–è®¾æˆåŠŸçš„å›è°ƒ-(void)centralManager:(CBCentralManager *)central didConnectPeripheral:(CBPeripheral *)peripheral&#123; NSLog(@&quot;è¿æ¥æˆåŠŸ&quot;); //è®¾ç½®ä»£ç†ä¸æœç´¢å¤–è®¾ä¸­çš„æœåŠ¡ [peripheral setDelegate:self]; [peripheral discoverServices:nil]; dispatch_async(dispatch_get_main_queue(), ^&#123; [_searchGameView removeFromSuperview]; &#125;);&#125;//è¿æ¥æ–­å¼€-(void)centralManager:(CBCentralManager *)central didDisconnectPeripheral:(CBPeripheral *)peripheral error:(NSError *)error&#123; NSLog(@&quot;è¿æ¥æ–­å¼€&quot;); [_centerManger connectPeripheral:peripheral options:@&#123;CBConnectPeripheralOptionNotifyOnConnectionKey:@YES&#125;];&#125;//å‘ç°æœåŠ¡åå›è°ƒçš„æ–¹æ³•-(void)peripheral:(CBPeripheral *)peripheral didDiscoverServices:(NSError *)error&#123; for (CBService *service in peripheral.services) &#123; //å‘ç°æœåŠ¡ æ¯”è¾ƒæœåŠ¡çš„UUID if ([service.UUID isEqual:[CBUUID UUIDWithString:@&quot;68753A44-4D6F-1226-9C60-0050E4C00067&quot;]]) &#123; NSLog(@&quot;Service found with UUID: %@&quot;, service.UUID); //æŸ¥æ‰¾æœåŠ¡ä¸­çš„ç‰¹å¾å€¼ [peripheral discoverCharacteristics:nil forService:service]; break; &#125; &#125;&#125;//å¼€å‘æœåŠ¡ä¸­çš„ç‰¹å¾å€¼åå›è°ƒçš„æ–¹æ³•-(void)peripheral:(CBPeripheral *)peripheral didDiscoverCharacteristicsForService:(CBService *)service error:(NSError *)error&#123; for (CBCharacteristic *characteristic in service.characteristics) &#123; //å‘ç°ç‰¹å¾ æ¯”è¾ƒç‰¹å¾å€¼å¾—UUID æ¥è·å–æ‰€éœ€è¦çš„ if ([characteristic.UUID isEqual:[CBUUID UUIDWithString:@&quot;68753A44-4D6F-1226-9C60-0050E4C00067&quot;]]) &#123; //ä¿å­˜ç‰¹å¾å€¼ _centerReadChara = characteristic; //ç›‘å¬ç‰¹å¾å€¼ [_peripheral setNotifyValue:YES forCharacteristic:_centerReadChara]; &#125; if ([characteristic.UUID isEqual:[CBUUID UUIDWithString:@&quot;68753A44-4D6F-1226-9C60-0050E4C00068&quot;]]) &#123; //ä¿å­˜ç‰¹å¾å€¼ _centerWriteChara = characteristic; &#125; &#125;&#125;//æ‰€ç›‘å¬çš„ç‰¹å¾å€¼æ›´æ–°æ—¶å›è°ƒçš„æ–¹æ³•- (void)peripheral:(CBPeripheral *)peripheral didUpdateValueForCharacteristic:(CBCharacteristic *)characteristic error:(NSError *)error&#123; //æ›´æ–°æ¥æ”¶åˆ°çš„æ•°æ® NSLog(@&quot;%@&quot;,[[NSString alloc]initWithData:characteristic.value encoding:NSUTF8StringEncoding]); //è¦åœ¨ä¸»çº¿ç¨‹ä¸­åˆ·æ–° dispatch_async(dispatch_get_main_queue(), ^&#123; [self.delegate getData:[[NSString alloc]initWithData:characteristic.value encoding:NSUTF8StringEncoding]]; &#125;);&#125;-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex&#123; //å‘Šè¯‰å¼€å‘è€…å…ˆåæ‰‹ä¿¡æ¯ if (buttonIndex==0) &#123; if (_isCentral) &#123; block(1); &#125;else&#123; block(0); &#125; &#125;else&#123; if (_isCentral) &#123; block(0); &#125;else&#123; block(1); &#125; &#125;&#125;//æ–­å¼€è¿æ¥-(void)disConnect&#123; if (!_isCentral) &#123; [_centerManger cancelPeripheralConnection:_peripheral]; [_peripheral setNotifyValue:NO forCharacteristic:_centerReadChara]; &#125;&#125;//å†™æ•°æ®-(void)writeData:(NSString *)data&#123; if (_isCentral) &#123; [_peripheralManager updateValue:[data dataUsingEncoding:NSUTF8StringEncoding] forCharacteristic:_readChara onSubscribedCentrals:nil]; &#125;else&#123; [_peripheral writeValue:[data dataUsingEncoding:NSUTF8StringEncoding] forCharacteristic:_centerWriteChara type:CBCharacteristicWriteWithoutResponse]; &#125;&#125;@end é™„å½•ï¼šæ¸¸æˆçš„æºç å·²ç»æ”¾åœ¨gitä¸Šï¼Œæ—¶é—´æ¯”è¾ƒä»“ä¿ƒï¼Œåªç”¨äº†ä¸€ä¸‹åˆæ¥å†™ï¼Œå…¶ä¸­è¿˜æœ‰è®¸å¤šç»†èŠ‚ä¸bugæ²¡æœ‰è¿›è¡Œè°ƒæ•´ï¼Œæœ‰éœ€è¦çš„å¯ä»¥ä½œä¸ºå‚è€ƒï¼š gitåœ°å€ï¼šhttps://github.com/ZYHshao/BlueGameã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSç®€æ˜“è“ç‰™å¯¹æˆ˜äº”å­æ£‹æ¸¸æˆè®¾è®¡æ€è·¯ä¹‹äºŒâ€”â€”æ ¸å¿ƒæ£‹ç›˜é€»è¾‘ä¸èƒœè´Ÿåˆ¤å®šç®—æ³•","slug":"188iOSç®€æ˜“è“ç‰™å¯¹æˆ˜äº”å­æ£‹æ¸¸æˆè®¾è®¡æ€è·¯ä¹‹äºŒâ€”â€”æ ¸å¿ƒæ£‹ç›˜é€»è¾‘ä¸èƒœè´Ÿåˆ¤å®šç®—æ³•","date":"2016-03-20T16:00:00.000Z","updated":"2021-07-06T07:13:07.367Z","comments":true,"path":"2016/03/21/188iOSç®€æ˜“è“ç‰™å¯¹æˆ˜äº”å­æ£‹æ¸¸æˆè®¾è®¡æ€è·¯ä¹‹äºŒâ€”â€”æ ¸å¿ƒæ£‹ç›˜é€»è¾‘ä¸èƒœè´Ÿåˆ¤å®šç®—æ³•/","link":"","permalink":"http://huishao.cc/2016/03/21/188iOSç®€æ˜“è“ç‰™å¯¹æˆ˜äº”å­æ£‹æ¸¸æˆè®¾è®¡æ€è·¯ä¹‹äºŒâ€”â€”æ ¸å¿ƒæ£‹ç›˜é€»è¾‘ä¸èƒœè´Ÿåˆ¤å®šç®—æ³•/","excerpt":"","text":"iOSç®€æ˜“è“ç‰™å¯¹æˆ˜äº”å­æ£‹æ¸¸æˆè®¾è®¡æ€è·¯ä¹‹äºŒâ€”â€”æ ¸å¿ƒæ£‹ç›˜é€»è¾‘ä¸èƒœè´Ÿåˆ¤å®šç®—æ³•ä¸€ã€å¼•è¨€ä¸Šä¸€ç¯‡åšå®¢æˆ‘ä»¬ä»‹ç»äº†åœ¨å¼€å‘ä¸€æ¬¾è“ç‰™å¯¹æˆ˜äº”å­æ£‹æ¸¸æˆä¸­æ ¸å¿ƒçš„è“ç‰™é€šè®¯æ¡†æ¶çš„è®¾è®¡ä¸ç¼–å†™ï¼Œæœ¬ç¯‡åšå®¢å°†æ¥å®Œæˆç‹¬ç«‹çš„æ£‹ç›˜é€»è¾‘ä¸èƒœè´Ÿåˆ¤å®šç®—æ³•ã€‚ä¸Šç¯‡åšå®¢åœ°å€å¦‚ä¸‹ï¼š äº”å­æ£‹æ¸¸æˆä¸­å’Œæ ¸å¿ƒé€šè®¯ç±»è®¾è®¡ï¼šhttp://my.oschina.net/u/2340880/blog/644432ã€‚ äºŒã€æ£‹ç›˜ä¸­ç‹¬ç«‹æ£‹æ ¼çš„è®¾è®¡æˆ‘ä»¬çŸ¥é“ï¼Œäº”å­æ£‹æ¸¸æˆçš„æ£‹ç›˜æ˜¯ç”±æ¨ªçºµäº¤å‰çš„ä¸¤ç»„å¹³è¡Œçº¿ç»„æˆï¼Œæ¯ä¸€ä¸ªæ¨ªçºµçº¿çš„äº¤ç‚¹å³æ˜¯æ£‹ç›˜ä¸Šå¯ä»¥è½å­çš„ç‚¹ã€‚å› æ­¤ï¼Œåœ¨è®¾è®¡æ£‹ç›˜å‰ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆæ¥è®¾è®¡åˆ›å»ºæ£‹ç›˜ä¸Šæ¯ä¸€ä¸ªç‹¬ç«‹çš„è½å­ç‚¹ï¼Œè¿™é‡Œç§°ä¹‹ä¸ºæ£‹æ ¼ï¼Œåœ¨iOSä¸­ï¼Œå¯ä»¥ä½¿ç”¨UIButtonç±»æ¥è¿›è¡Œæ£‹æ ¼çš„è®¾è®¡ã€‚ åˆ›å»ºä¸€ä¸ªç±»ï¼Œå‘½åä¸ºTipButtonä½œä¸ºæ£‹æ ¼ç±»ï¼Œå®ç°å…¶å¤´æ–‡ä»¶å¦‚ä¸‹ï¼š TipButton.h 1234567891011#import &lt;UIKit/UIKit.h&gt;@interface TipButton : UIButton//æ ‡è®°æ­¤ç“¦ç‰‡æ˜¯å¦å·²ç»è½å­ 0 ç©º 1 å·±æ–¹è½å­ 2 æ•Œæ–¹è½å­@property(nonatomic,assign)int hasChess;//è½å­ BOOLç±»å‹çš„å‚æ•° å†³å®šæ˜¯å·±æ–¹è¿˜æ˜¯æ•Œæ–¹-(void)dropChess:(BOOL)isMine;//è®¾ç½®ç™½å­æˆ–è€…é»‘å­@property(nonatomic,assign)BOOL isWhite;//ç“¦ç‰‡ç¼–å·@property(nonatomic,assign)int index;@end å®ç°.mæ–‡ä»¶å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445#import &quot;TipButton.h&quot;@implementation TipButton- (instancetype)initWithFrame:(CGRect)frame&#123; self = [super initWithFrame:frame]; if (self) &#123; [self creatView]; &#125; return self;&#125;-(void)creatView&#123; //åˆ›å»ºæ¨ªç«–ä¸¤æ¡çº¿ UIView * line1 = [[UIView alloc]initWithFrame:CGRectMake(self.frame.size.width/2-0.25, 0, 0.5, self.frame.size.height)]; line1.backgroundColor = [UIColor grayColor]; [self addSubview:line1]; UIView * line2 = [[UIView alloc]initWithFrame:CGRectMake(0, self.frame.size.height/2-0.25, self.frame.size.width, 0.5)]; line2.backgroundColor = [UIColor grayColor]; [self addSubview:line2];&#125;-(void)dropChess:(BOOL)isMine&#123; UIView * view = [[UIView alloc]initWithFrame:CGRectMake(self.frame.size.width/2-5, self.frame.size.height/2-5, 10, 10)]; view.layer.masksToBounds = YES; view.layer.cornerRadius = 5; UIColor * myColor; UIColor * otherColor; if (_isWhite) &#123; myColor = [UIColor whiteColor]; otherColor = [UIColor blackColor]; &#125;else&#123; myColor = [UIColor blackColor]; otherColor = [UIColor whiteColor]; &#125; if (isMine) &#123; view.backgroundColor = myColor; self.hasChess = 1; &#125;else&#123; view.backgroundColor = otherColor; self.hasChess = 2; &#125; [self addSubview:view]; &#125;@end ä¸‰ã€æ¸¸æˆæ£‹ç›˜çš„è®¾è®¡åˆ›å»ºä¸€ä¸ªç»§æ‰¿äºUIViewçš„ç±»ï¼Œä½œä¸ºäº”å­æ£‹æ¸¸æˆçš„æ£‹ç›˜ï¼Œå‘½åä¸ºGameViewå®ç°å¦‚ä¸‹ï¼š GameView.h 1234567891011121314#import &lt;UIKit/UIKit.h&gt;#import &quot;TipButton.h&quot;#import &quot;BlueToothTool.h&quot;//ç”¨äºå¤„ç†ç”¨æˆ·ä¸‹å­åçš„é€»è¾‘@protocol GameViewDelegate&lt;NSObject&gt;-(void)gameViewClick:(NSString *)index;@end@interface GameView : UIView&lt;UIAlertViewDelegate&gt;//å­˜æ”¾æ‰€æœ‰æ£‹æ ¼@property(nonatomic,strong)NSMutableArray&lt;TipButton *&gt; * tipArray;@property(nonatomic,weak)id&lt;GameViewDelegate&gt;delegate;//è¿›è¡Œä¸‹å­-(void)setTipIndex:(int)index;@end GameView.m 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391#import &quot;GameView.h&quot;@implementation GameView- (instancetype)initWithFrame:(CGRect)frame&#123; self = [super initWithFrame:frame]; if (self) &#123; _tipArray = [[NSMutableArray alloc]init]; [self creatView]; &#125; return self;&#125;//åˆ›å»ºè¡¨æ ¼è§†å›¾ æ¨ª16 ç«–20-(void)creatView&#123; self.layer.borderColor = [UIColor colorWithRed:222/255.0 green:222/255.0 blue:222/255.0 alpha:1].CGColor; self.layer.borderWidth = 0.5; CGFloat width = self.frame.size.width/12; CGFloat height = self.frame.size.height/20; //æ’åˆ—å¸ƒå±€ for (int i=0; i&lt;240; i++) &#123; TipButton * btn = [[TipButton alloc]initWithFrame:CGRectMake(width*(i%12), height*(i/12), width, height)]; [btn addTarget:self action:@selector(click:) forControlEvents:UIControlEventTouchUpInside]; btn.isWhite = NO; btn.index=i; [self addSubview:btn]; [_tipArray addObject:btn]; &#125;&#125;-(void)click:(TipButton *)btn&#123; if (btn.hasChess==0) &#123; //ä¸‹å­ [btn dropChess:YES]; //è¿›è¡Œèƒœè´Ÿåˆ¤å®š [self cheak]; [self.delegate gameViewClick:[NSString stringWithFormat:@&quot;%d&quot;,btn.index]]; &#125;&#125;//è¿›è¡Œèƒœè´Ÿåˆ¤å®š-(void)cheak&#123; //åˆ¤å®šå·±æ–¹æ˜¯å¦èƒœåˆ© if ([self cheakMine]) &#123; UIAlertView * alert = [[UIAlertView alloc]initWithTitle:@&quot;æ‚¨èƒœåˆ©å•¦&quot; message:@&quot;&quot; delegate:self cancelButtonTitle:@&quot;å¥½çš„&quot; otherButtonTitles:nil, nil]; [alert show]; &#125; //åˆ¤æ–­å¯¹æ–¹æ˜¯å¦èƒœåˆ© if ([self cheakOther]) &#123; UIAlertView * alert = [[UIAlertView alloc]initWithTitle:@&quot;æ‚¨å¤±è´¥äº†&quot; message:@&quot;&quot; delegate:self cancelButtonTitle:@&quot;å¥½çš„&quot; otherButtonTitles:nil, nil]; [alert show]; &#125;&#125;-(void)setTipIndex:(int)index&#123; //ä¸‹å­ for (TipButton * btn in _tipArray) &#123; if (btn.index==index) &#123; [btn dropChess:NO]; [self cheak]; &#125; &#125;&#125;-(BOOL)cheakOther&#123; //éå†æ‰€æœ‰æ£‹å­ for (int i=0; i&lt;_tipArray.count; i++) &#123; TipButton * tip = _tipArray[i]; //è·å–æ˜¯å¦æ˜¯å·±æ–¹æ£‹å­ if (tip.hasChess==2) &#123; //è¿›è¡Œäº”å­åˆ¤å®šé€»è¾‘ //æ¨ªå‘ if ( [self cheak1HasMineOrOther:NO index:i]) &#123; return YES; &#125; //å·¦ä¸Šåˆ°å³ä¸‹çš„å¯¹è§’çº¿ if ( [self cheak2HasMineOrOther:NO index:i]) &#123; return YES; &#125; //çºµå‘ if ( [self cheak3HasMineOrOther:NO index:i]) &#123; return YES; &#125; //å³ä¸Šåˆ°å·¦ä¸‹çš„å¯¹è§’çº¿ if ( [self cheak4HasMineOrOther:NO index:i]) &#123; return YES; &#125; &#125; &#125; return NO;&#125;-(BOOL)cheakMine&#123; //éå†æ‰€æœ‰æ£‹å­ for (int i=0; i&lt;_tipArray.count; i++) &#123; TipButton * tip = _tipArray[i]; //è·å–æ˜¯å¦æ˜¯å·±æ–¹æ£‹å­ if (tip.hasChess==1) &#123; //è¿›è¡Œäº”å­åˆ¤å®šé€»è¾‘ //æ¨ªå‘ if ( [self cheak1HasMineOrOther:YES index:i]) &#123; return YES; &#125; //å·¦ä¸Šåˆ°å³ä¸‹çš„å¯¹è§’çº¿ if ( [self cheak2HasMineOrOther:YES index:i]) &#123; return YES; &#125; //çºµå‘ if ( [self cheak3HasMineOrOther:YES index:i]) &#123; return YES; &#125; //å³ä¸Šåˆ°å·¦ä¸‹çš„å¯¹è§’çº¿ if ( [self cheak4HasMineOrOther:YES index:i]) &#123; return YES; &#125; &#125; &#125; return NO;&#125;-(BOOL)cheak1HasMineOrOther:(BOOL)mine index:(int)index&#123; int mineOrOther = 0; if (mine) &#123; mineOrOther = 1; &#125;else&#123; mineOrOther = 2; &#125; int count=1; //å·¦ä¾§å³ä¾§åŒæ—¶è¿›è¡Œå¯ä»¥å¢åŠ æ•ˆç‡ //å·¦ä¾§ count = count +[self algorithmic1:index param:mineOrOther num:4]; //å³ä¾§ count = count +[self algorithmic2:index param:mineOrOther num:4]; if (count&gt;=5) &#123; return YES; &#125;else&#123; return NO; &#125;&#125;-(BOOL)cheak2HasMineOrOther:(BOOL)mine index:(int)index&#123; int mineOrOther = 0; if (mine) &#123; mineOrOther = 1; &#125;else&#123; mineOrOther = 2; &#125; int count=1; //å·¦ä¸Šå³ä¸‹åŒæ—¶è¿›è¡Œå¯ä»¥å¢åŠ æ•ˆç‡ //å·¦ä¸Š count = count +[self algorithmic3:index param:mineOrOther num:4]; //å³ä¸‹ count = count +[self algorithmic4:index param:mineOrOther num:4]; if (count&gt;=5) &#123; return YES; &#125;else&#123; return NO; &#125;&#125;-(BOOL)cheak3HasMineOrOther:(BOOL)mine index:(int)index&#123; int mineOrOther = 0; if (mine) &#123; mineOrOther = 1; &#125;else&#123; mineOrOther = 2; &#125; int count=1; //çºµå‘ //å‘ä¸Š count = count +[self algorithmic5:index param:mineOrOther num:4]; //å‘ä¸‹ count = count +[self algorithmic6:index param:mineOrOther num:4]; if (count&gt;=5) &#123; return YES; &#125;else&#123; return NO; &#125;&#125;-(BOOL)cheak4HasMineOrOther:(BOOL)mine index:(int)index&#123; int mineOrOther = 0; if (mine) &#123; mineOrOther = 1; &#125;else&#123; mineOrOther = 2; &#125; int count=1; //çºµå‘ //å‘ä¸Š count = count +[self algorithmic7:index param:mineOrOther num:4]; //å‘ä¸‹ count = count +[self algorithmic8:index param:mineOrOther num:4]; NSLog(@&quot;%d&quot;,count); if (count&gt;=5) &#123; return YES; &#125;else&#123; return NO; &#125;&#125;/* å·¦ä¾§é€’å½’è¿›è¡ŒæŸ¥æ‰¾ index æ£‹å­ç¼–å· param å¯¹æ¯”å€¼ num é€’å½’æ¬¡æ•° */-(int)algorithmic1:(int)index param:(int)param num:(int)num&#123; if (num&gt;0) &#123; int tem = 4-(num-1); //å·¦ä¾§æœ‰å­ if (index-tem&gt;=0) &#123; //å·¦ä¾§æ— æ¢è¡Œ if(((index-tem)%12)!=11)&#123; if (_tipArray[index-tem].hasChess==param) &#123; return [self algorithmic1:index param:param num:num-1]; &#125;else&#123; return 4-num; &#125; &#125;else&#123; return 4-num; &#125; &#125;else&#123; return 4-num; &#125; &#125;else&#123; //é€’å½’äº†å››æ¬¡ return 4-num; &#125;&#125;/* å³ä¾§é€’å½’è¿›è¡ŒæŸ¥æ‰¾ index æ£‹å­ç¼–å· param å¯¹æ¯”å€¼ num é€’å½’æ¬¡æ•° */-(int)algorithmic2:(int)index param:(int)param num:(int)num&#123; if (num&gt;0) &#123; int tem = 4-(num-1); //å³ä¾§æœ‰å­ if (index+tem&lt;240) &#123; //å³ä¾§æ— æ¢è¡Œ if(((index+tem)%12)!=11)&#123; if (_tipArray[index+tem].hasChess==param) &#123; return [self algorithmic2:index param:param num:num-1]; &#125;else&#123; return 4-num; &#125; &#125;else&#123; return 4-num; &#125; &#125;else&#123; return 4-num; &#125; &#125;else&#123; //é€’å½’äº†å››æ¬¡ return 4-num; &#125;&#125;/* å·¦ä¸Šé€’å½’è¿›è¡ŒæŸ¥æ‰¾ index æ£‹å­ç¼–å· param å¯¹æ¯”å€¼ num é€’å½’æ¬¡æ•° */-(int)algorithmic3:(int)index param:(int)param num:(int)num&#123; if (num&gt;0) &#123; int tem = 4-(num-1); //å·¦ä¸Šæœ‰å­ if ((index-(tem*12)-tem)&gt;=0) &#123; //å³ä¾§æ— æ¢è¡Œ if(((index-(tem*12)-tem)%12)!=11)&#123; if (_tipArray[(index-(tem*12)-tem)].hasChess==param) &#123; return [self algorithmic3:index param:param num:num-1]; &#125;else&#123; return 4-num; &#125; &#125;else&#123; return 4-num; &#125; &#125;else&#123; return 4-num; &#125; &#125;else&#123; //é€’å½’äº†å››æ¬¡ return 4-num; &#125;&#125;-(int)algorithmic4:(int)index param:(int)param num:(int)num&#123; if (num&gt;0) &#123; int tem = 4-(num-1); //å·¦ä¸Šæœ‰å­ if ((index+(tem*12)+tem)&lt;240) &#123; //å³ä¾§æ— æ¢è¡Œ if(((index+(tem*12)+tem)%12)!=0)&#123; if (_tipArray[(index+(tem*12)+tem)].hasChess==param) &#123; return [self algorithmic4:index param:param num:num-1]; &#125;else&#123; return 4-num; &#125; &#125;else&#123; return 4-num; &#125; &#125;else&#123; return 4-num; &#125; &#125;else&#123; //é€’å½’äº†å››æ¬¡ return 4-num; &#125;&#125;-(int)algorithmic5:(int)index param:(int)param num:(int)num&#123; if (num&gt;0) &#123; int tem = 4-(num-1); //ä¸Šæœ‰å­ if ((index-(tem*12))&gt;=0) &#123; if (_tipArray[(index-(tem*12))].hasChess==param) &#123; return [self algorithmic5:index param:param num:num-1]; &#125;else&#123; return 4-num; &#125; &#125;else&#123; return 4-num; &#125; &#125;else&#123; //é€’å½’äº†å››æ¬¡ return 4-num; &#125;&#125;-(int)algorithmic6:(int)index param:(int)param num:(int)num&#123; if (num&gt;0) &#123; int tem = 4-(num-1); //ä¸Šæœ‰å­ if ((index+(tem*12))&lt;240) &#123; if (_tipArray[(index+(tem*12))].hasChess==param) &#123; return [self algorithmic6:index param:param num:num-1]; &#125;else&#123; return 4-num; &#125; &#125;else&#123; return 4-num; &#125; &#125;else&#123; //é€’å½’äº†å››æ¬¡ return 4-num; &#125;&#125;-(int)algorithmic7:(int)index param:(int)param num:(int)num&#123; if (num&gt;0) &#123; int tem = 4-(num-1); //å·¦ä¸Šæœ‰å­ if ((index-(tem*12)+tem)&gt;=0) &#123; //å³ä¾§æ— æ¢è¡Œ if(((index-(tem*12)+tem)%12)!=0)&#123; if (_tipArray[(index-(tem*12)+tem)].hasChess==param) &#123; return [self algorithmic7:index param:param num:num-1]; &#125;else&#123; return 4-num; &#125; &#125;else&#123; return 4-num; &#125; &#125;else&#123; return 4-num; &#125; &#125;else&#123; //é€’å½’äº†å››æ¬¡ return 4-num; &#125;&#125;-(int)algorithmic8:(int)index param:(int)param num:(int)num&#123; if (num&gt;0) &#123; int tem = 4-(num-1); //å·¦ä¸Šæœ‰å­ if ((index+(tem*12)-tem)&lt;240) &#123; //å³ä¾§æ— æ¢è¡Œ if(((index+(tem*12)-tem)%12)!=11)&#123; if (_tipArray[(index+(tem*12)-tem)].hasChess==param) &#123; return [self algorithmic8:index param:param num:num-1]; &#125;else&#123; return 4-num; &#125; &#125;else&#123; return 4-num; &#125; &#125;else&#123; return 4-num; &#125; &#125;else&#123; //é€’å½’äº†å››æ¬¡ return 4-num; &#125;&#125;-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex&#123; [[BlueToothTool sharedManager]disConnect]; [(UIViewController *)[self.superview nextResponder] dismissViewControllerAnimated:YES completion:nil];&#125;@end å…³äºèƒœè´Ÿåˆ¤å®šçš„ç®—æ³•é€»è¾‘ï¼Œè¿™é‡Œé‡‡ç”¨äº†å‘å„ä¸ªæ–¹å‘è¿›è¡Œé€’å½’æŸ¥æ‰¾çš„æ–¹å¼ï¼Œè¿™é‡Œæœ‰ä¸€ç‚¹éœ€è¦ä¸»è¦ï¼Œåœ¨4ä¸ªæ–¹å‘è¿›è¡Œé€’å½’æŸ¥æ‰¾æ—¶ï¼Œç†è®ºä¸Šæ¯ä¸ªæ–¹å‘åªéœ€è¦å•é¢é€’å½’å³å¯ï¼Œä½†æ˜¯ä»£ç ä¸­é‡‡ç”¨äº†åŒé¢é€’å½’åœ¨è¿›è¡Œç´¯åŠ çš„æ–¹å¼ï¼Œè¿™æ ·çš„è®¾è®¡å¯ä»¥éå†æ›´å°‘çš„æ£‹å­åˆ¤å®šå‡ºèƒœè´Ÿæƒ…å†µã€‚ å››ã€æ•´åˆé€šè®¯ä¸æ¸¸æˆé€»è¾‘ åˆ›å»ºä¸€ä¸ªç»§æ‰¿äºUIViewControllerçš„ç±»ä½œä¸ºæ¸¸æˆè§†å›¾æ§åˆ¶å™¨ï¼Œå®ç°å¦‚ä¸‹ï¼š GameViewController.m 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384#import &quot;GameViewController.h&quot;#import &quot;GameView.h&quot;#import &quot;BlueToothTool.h&quot;@interface GameViewController ()&lt;BlueToothToolDelegate,GameViewDelegate&gt;&#123; UIView * _bgView; UILabel * _tipLabel; GameView * _view;&#125;@end@implementation GameViewController- (void)viewDidLoad &#123; [super viewDidLoad]; self.view.backgroundColor = [UIColor brownColor]; //åˆ›å»ºæ¸¸æˆè§†å›¾ _view = [[GameView alloc]initWithFrame:CGRectMake(20, 40, (self.view.frame.size.width-40), (self.view.frame.size.width-40)/12*20)]; _view.delegate=self; [self.view addSubview:_view]; //åˆ›å»ºèƒŒæ™¯è§†å›¾ _bgView = [[UIView alloc]initWithFrame:self.view.frame]; _bgView.backgroundColor = [UIColor colorWithRed:1 green:1 blue:1 alpha:0.1]; UIButton * btn = [UIButton buttonWithType:UIButtonTypeSystem]; btn.frame = CGRectMake(self.view.frame.size.width/2-50, 150, 100, 30); UIButton * btn2 = [UIButton buttonWithType:UIButtonTypeSystem]; btn2.frame = CGRectMake(self.view.frame.size.width/2-50, 250, 100, 30); [btn setTitle:@&quot;åˆ›å»ºæ¸¸æˆ&quot; forState:UIControlStateNormal]; [btn2 setTitle:@&quot;æ‰«æé™„è¿‘æ¸¸æˆ&quot; forState:UIControlStateNormal]; btn.backgroundColor = [UIColor orangeColor]; btn2.backgroundColor = [UIColor orangeColor]; [btn addTarget:self action:@selector(creatGame) forControlEvents:UIControlEventTouchUpInside]; [btn2 addTarget:self action:@selector(searchGame) forControlEvents:UIControlEventTouchUpInside]; [_bgView addSubview:btn]; [_bgView addSubview:btn2]; [self.view addSubview:_bgView]; //è®¾ç½®è“ç‰™é€šè®¯ç±»ä»£ç† [BlueToothTool sharedManager].delegate=self; //åˆ›å»ºæç¤ºæ ‡ç­¾ _tipLabel = [[UILabel alloc]initWithFrame:CGRectMake(0, 0, self.view.frame.size.width,40)]; [self.view addSubview:_tipLabel]; _tipLabel.textAlignment = NSTextAlignmentCenter;&#125;-(void)creatGame&#123; [[BlueToothTool sharedManager]setUpGame:@&quot;&quot; block:^(BOOL first) &#123; [_bgView removeFromSuperview]; if (first) &#123; _tipLabel.text = @&quot;è¯·æ‚¨ä¸‹å­&quot;; //è¿›è¡Œå‘é€ä¸‹å­ä¿¡æ¯ &#125;else&#123; _tipLabel.text = @&quot;è¯·ç­‰å¾…å¯¹æ–¹ä¸‹å­&quot;; self.view.userInteractionEnabled = NO; [self gameViewClick:@&quot;-1&quot;]; &#125; &#125;];&#125;-(void)searchGame&#123; [[BlueToothTool sharedManager]searchGame];&#125;- (void)didReceiveMemoryWarning &#123; [super didReceiveMemoryWarning]; // Dispose of any resources that can be recreated.&#125;-(void)getData:(NSString *)data&#123; if (_bgView.superview) &#123; [_bgView removeFromSuperview]; &#125; if ([data integerValue]==-1) &#123; _tipLabel.text = @&quot;è¯·æ‚¨ä¸‹å­&quot;; self.view.userInteractionEnabled = YES; return; &#125; _tipLabel.text = @&quot;è¯·æ‚¨ä¸‹å­&quot;; [_view setTipIndex:[data intValue]]; self.view.userInteractionEnabled = YES;&#125;-(void)gameViewClick:(NSString *)index&#123; _tipLabel.text = @&quot;è¯·ç­‰å¾…å¯¹æ–¹ä¸‹å­&quot;; [[BlueToothTool sharedManager]writeData:index]; self.view.userInteractionEnabled = NO;&#125;@end æ¸¸æˆè¿è¡Œçš„ä¸»è¦ç•Œé¢å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š é™„å½•ï¼šæ¸¸æˆçš„æºç å·²ç»æ”¾åœ¨gitä¸Šï¼Œæ—¶é—´æ¯”è¾ƒä»“ä¿ƒï¼Œåªç”¨äº†ä¸€ä¸‹åˆæ¥å†™ï¼Œå…¶ä¸­è¿˜æœ‰è®¸å¤šç»†èŠ‚ä¸bugæ²¡æœ‰è¿›è¡Œè°ƒæ•´ï¼Œæœ‰éœ€è¦çš„å¯ä»¥ä½œä¸ºå‚è€ƒï¼š gitåœ°å€ï¼šhttps://github.com/ZYHshao/BlueGameã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSéŸ³é¢‘æ’­æ”¾å™¨é”å±æ­Œè¯æ˜¾ç¤ºä¸æ€§èƒ½ä¼˜åŒ–","slug":"186iOSéŸ³é¢‘æ’­æ”¾å™¨é”å±æ­Œè¯æ˜¾ç¤ºä¸æ€§èƒ½ä¼˜åŒ–","date":"2016-03-12T16:00:00.000Z","updated":"2021-07-06T07:11:10.155Z","comments":true,"path":"2016/03/13/186iOSéŸ³é¢‘æ’­æ”¾å™¨é”å±æ­Œè¯æ˜¾ç¤ºä¸æ€§èƒ½ä¼˜åŒ–/","link":"","permalink":"http://huishao.cc/2016/03/13/186iOSéŸ³é¢‘æ’­æ”¾å™¨é”å±æ­Œè¯æ˜¾ç¤ºä¸æ€§èƒ½ä¼˜åŒ–/","excerpt":"","text":"iOSéŸ³é¢‘æ’­æ”¾å™¨é”å±æ­Œè¯æ˜¾ç¤ºä¸æ€§èƒ½ä¼˜åŒ–ä¸€ã€å¼•è¨€å‰è¾¹æœ‰åšå®¢æ¢è®¨äº†æœ‰å…³iOSå¼€å‘ä¸­éŸ³é¢‘æ’­æ”¾çš„æŠ€æœ¯ä¸è¿›è¡Œåå°éŸ³é¢‘æ’­æ”¾å¹¶åœ¨åå°ä¸ç”¨æˆ·è¿›è¡Œäº¤äº’çš„æ–¹æ³•ï¼Œæœ¬ç¯‡å°†æ¢è®¨ä¸€ç§åœ¨é”å±ç•Œé¢åŒæ­¥æ˜¾ç¤ºæ­Œè¯æ­Œè¯çš„æ–¹æ³•ï¼Œå¹¶åœ¨åº”ç”¨æ€§èƒ½ä¸Šè¿›è¡Œä¸€äº›å¤„ç†ã€‚å‰è¾¹åšå®¢åœ°å€å¦‚ä¸‹ï¼š iOSéŸ³é¢‘å¼€å‘AVAudioPlayerçš„åº”ç”¨ï¼šhttp://my.oschina.net/u/2340880/blog/420129ã€‚ iOSåå°éŸ³é¢‘å¼€å‘ä¸äº¤äº’æŠ€æœ¯ï¼šhttp://my.oschina.net/u/2340880/blog/420183ã€‚ äºŒã€åœ¨é”å±ç•Œé¢åŒæ­¥æ˜¾ç¤ºæ­Œè¯ æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨éŸ³é¢‘åå°æ’­æ”¾æ—¶ï¼Œé”å±ç•Œé¢çš„ä¿¡æ¯æ˜¯ç”±MPNowPlayingInfoCenteræ¥è®¾ç½®çš„ï¼Œå…¶ä¸­çš„æ­Œæ›²ä¿¡æ¯å­—å…¸å¯ä»¥è®¾ç½®ç±»ä¼¼æ­Œæ›²å°é¢ï¼Œè‰ºæœ¯å®¶ï¼Œæ­Œæ›²åï¼Œæ­Œæ›²æ—¶é—´ç­‰ã€‚ç„¶è€Œï¼Œå¯¹äºMPNowPlayingInfoCenterä¸­å¯ä»¥ç”±å¼€å‘è€…æŒæ¡çš„æ¥å£ååˆ†æœ‰é™ï¼Œè‹¥è¦åœ¨é”å±ç•Œé¢åŒæ­¥çš„æ˜¾ç¤ºæ­Œæ›²æ­Œè¯ï¼Œä¸€ä¸ªæ¯”è¾ƒç®€å•çš„æ–¹æ³•æ˜¯ä¸åœçš„å°†å½“å‰æ­Œè¯ä¸å°é¢è¿›è¡Œå›¾ç‰‡åˆæˆï¼Œä¹‹ååˆ·æ–°é”å±ç•Œé¢çš„å›¾ç‰‡ã€‚ä¸‹é¢ä»£ç æ˜¯æ ¹æ®è§£æå¥½çš„LRCæ­Œè¯æ•°æ®è¿›è¡Œå›¾ç‰‡åˆæˆçš„ç¤ºä¾‹ä»£ç ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657//è¿™ä¸ªæ–¹æ³•é€šè¿‡ä¼ å…¥çš„LRCæ­Œè¯æ•°æ®è¿›è¡Œå›¾ç‰‡çš„åˆæˆ arrayå‚æ•°ä¸ºæ¯è¡Œlrcæ­Œè¯æ•°æ®é›†åˆ indexä¸ºå½“å‰éœ€è¦æ’­æ”¾çš„lrcæ­Œè¯è¡Œæ•°-(void)setCurretLRCArray:(NSArray *)array index:(int)index&#123; //LRCItemæ˜¯æ­Œè¯æ¨¡å‹ é‡Œé¢çš„lrcæ–¹æ³•è·å–æ­Œè¯æ–‡å­—å­—ç¬¦ä¸² NSString * lineLRC = [(LRCItem *)array[index] lrc]; //æé«˜æ€§èƒ½ è¿›è¡Œåˆ¤æ–­ å½“å‰æ˜¾ç¤ºçš„æ­Œè¯æœ‰æ— å˜åŒ– å¦‚æœæ²¡å˜åŒ– ä¸è¿›è¡Œåç»­æ“ä½œ if ([_lrcLabel.text isEqualToString:lineLRC]) &#123; return; &#125; _lrcLabel.text = lineLRC; //å°†æ­Œè¯æ•´ç†æˆæ•´é½æ•°æ® //è¿›è¡Œè¡Œæ•°è®¾ç½® NSMutableString * lrcStr = [[NSMutableString alloc]init]; if (index&lt;_lines/2) &#123; //å‰é¢ç”¨\\nè¡¥é½ int offset = (int)_lines/2-index; for (int j=0; j&lt;offset; j++) &#123; [lrcStr appendFormat:@&quot;\\n&quot;]; &#125; for (int j=0; j&lt;_lines-offset; j++) &#123; [lrcStr appendFormat:@&quot;%@\\n&quot;,[(LRCItem *)array[j] lrc]]; &#125; &#125; else if (array.count-1-index&lt;_lines/2) &#123; //åé¢ç”¨\\nè¡¥é½ int offset = (int)_lines/2-(int)(array.count-index-1); for (int j=index-(_lines/2); j&lt;array.count; j++) &#123; [lrcStr appendFormat:@&quot;%@\\n&quot;,[(LRCItem *)array[j] lrc]]; &#125; for (int j=0; j&lt;offset; j++) &#123; [lrcStr appendFormat:@&quot;\\n&quot;]; &#125; &#125;else &#123; for (int j=0; j&lt;_lines; j++) &#123; [lrcStr appendString:[(LRCItem *)array[index-_lines/2+j] lrc]]; [lrcStr appendString:@&quot;\\n&quot;]; &#125; &#125; //å°†å½“å‰æ˜¾ç¤ºçš„æ­Œè¯éƒ¨åˆ†é«˜äº® NSMutableAttributedString * attriStr = [[NSMutableAttributedString alloc]initWithString:lrcStr]; NSRange range = [lrcStr rangeOfString:[array[index] lrc]]; [attriStr setAttributes:@&#123;NSForegroundColorAttributeName:[UIColor greenColor]&#125; range:range]; _lrcView.attributedText = attriStr; _lrcIMGLabel.attributedText = attriStr; //è¿›è¡Œæˆªå± if (!_lrcIMGbg) &#123; _lrcIMGbg = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)]; _lrcIMGbg.image = [UIImage imageNamed:@&quot;BG.jpeg&quot;]; [_lrcIMGbg addSubview:_lrcIMGLabel]; &#125; //è·å–æ·»åŠ äº†æ­Œè¯æ•°æ®çš„èƒŒæ™¯å›¾ UIGraphicsBeginImageContext(_lrcIMGbg.frame.size); CGContextRef context = UIGraphicsGetCurrentContext(); [_lrcIMGbg.layer renderInContext:context]; UIImage *img = UIGraphicsGetImageFromCurrentImageContext(); UIGraphicsEndImageContext(); _lrcImage = [img copy];&#125; é”å±æ­Œè¯çš„æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹ï¼š ä¸‰ã€åº”ç”¨æ€§èƒ½çš„ä¼˜åŒ– ä»åŠŸèƒ½ä¸Šæ¥è¯´ï¼Œé€šè¿‡ä¸€ç›´åˆæˆåˆ·æ–°é”å±ç•Œé¢çš„å°é¢å›¾æ˜¯å¯è¡Œçš„ï¼Œç„¶è€Œåœ¨ä½¿ç”¨ä¸­æˆ‘å‘ç°ï¼Œä¸åœå’Œåˆæˆå›¾ç‰‡å’Œåˆ·æ–°æ“ä½œå°†ä½¿è®¾å¤‡éå¸¸è€—ç”µï¼Œå¦‚æœå¯ä»¥å®Œæˆä¸‹é¢çš„ä¼˜åŒ–ï¼Œåˆ™å¯ä»¥å¤§å¤§æé«˜åº”ç”¨çš„æ€§èƒ½ï¼š 1.åº”ç”¨åœ¨å‰å°æ—¶ä¸è¿›è¡Œåå°é”å±ç•Œé¢çš„åˆ·æ–°æ“ä½œã€‚ 2.åº”ç”¨åœ¨åå°æ—¶ä¸è¿›è¡Œå‰å°æ­Œè¯ä¿¡æ¯ã€æ­Œæ›²ä¿¡æ¯çš„ç›¸åº”æ›´æ–°ã€‚ 3.å½“å±å¹•å˜é»‘å…³é—­æ—¶ï¼Œåœæ­¢æ‰€æœ‰åˆ·æ–°æ“ä½œã€‚ 4.å½“å±å¹•ä»æ–°è¢«ç‚¹äº®æ—¶ï¼Œè¿›è¡Œåå°ä¿¡æ¯åˆ·æ–°ã€‚ ä¸Šé¢4ç‚¹éœ€æ±‚ï¼Œå‰ä¸¤ç‚¹ååˆ†å®¹æ˜“æå®šï¼Œåœ¨AppDelegateä¸­æœ‰å¦‚ä¸‹çš„æ–¹æ³•å¯ä»¥ç›‘å¬åº”ç”¨ç¨‹åºå‰å°ä¸åå°çš„åˆ‡æ¢ï¼š 123456789//åº”ç”¨è¿›å…¥åå°æ—¶è°ƒç”¨- (void)applicationWillResignActive:(UIApplication *)application &#123; //å‘é€é€šçŸ¥ [[NSNotificationCenter defaultCenter]postNotificationName:@&quot;goBack&quot; object:nil];&#125;//åº”ç”¨è¿›å…¥å‰å°æ—¶è°ƒç”¨- (void)applicationDidBecomeActive:(UIApplication *)application &#123; [[NSNotificationCenter defaultCenter]postNotificationName:@&quot;goForward&quot; object:nil];&#125; åœ¨ç›¸åº”çš„ç±»ä¸­ç›‘å¬è¿™ä¸¤ä¸ªé€šçŸ¥å³å¯ä»¥åšåˆ°åˆ·æ–°æ¨¡å¼çš„åˆ‡æ¢ã€‚ å¯¹äºä¸Šé¢éœ€æ±‚çš„ç¬¬3ç‚¹ä¸ç¬¬4ç‚¹ï¼ŒFoundationæ¡†æ¶ä¸­æ²¡æœ‰æä¾›å…¬å¼€çš„æ–¹æ³•æ¥ç›‘å¬å±å¹•è®¾å¤‡çš„ç‚¹äº®çŠ¶æ€ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡notify\\_register\\_dispath()æ–¹æ³•æ¥ç›‘å¬ã€‚ä½¿ç”¨ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456789101112#import &lt;notify.h&gt; //åœ¨å®šæ—¶å™¨ä¸­ä½¿ç”¨å¦‚ä¸‹ä»£ç å®æ—¶ç›‘å¬å±å¹•çŠ¶æ€ uint64_t locked; __block int token = 0; notify_register_dispatch(&quot;com.apple.springboard.hasBlankedScreen&quot;,&amp;token,dispatch_get_main_queue(),^(int t)&#123; &#125;); notify_get_state(token, &amp;locked); //å¦‚æœå±å¹•å˜æš— ç›´æ¥ä¸èµ°æ›´æ–°æ–¹æ³• lockä¸º1åˆ™ä¸ºå˜æš—å…³é—­çŠ¶æ€ 0åˆ™ä¸ºç‚¹äº®çŠ¶æ€ if (locked) &#123; return; &#125; é€šè¿‡ä¸Šé¢ä¼˜åŒ–çš„ä»£ç ï¼Œæ€§èƒ½å°†ä¼šå¼ºå¾ˆå¤šã€‚ ç”±äºå‰é¢åšå®¢å·²ç»è¯¦ç»†çš„ä»‹ç»äº†éŸ³é¢‘å¼€å‘ä¸åå°äº¤äº’çš„å†…å®¹ï¼Œè¿™ç¯‡åšå®¢ä¸»è¦æ¢è®¨äº†é”å±æ­Œè¯ç›¸å…³çš„å¼€å‘æ€è·¯ä¸ä¼˜åŒ–æ–¹å‘ï¼Œæä¾›çš„ç¤ºä¾‹ä»£ç éƒ½æ˜¯ç‰‡æ®µï¼Œå¹¶ä¸å®Œæ•´ï¼Œç»è¿‡ä¼˜åŒ–çš„éŸ³é¢‘æ’­æ”¾å™¨æºç åœ¨å¦‚ä¸‹gitåœ°å€ä¸Šï¼Œéœ€è¦çš„æœ‹å‹å¯ä»¥ä½œä¸ºå‚è€ƒï¼š åŒæ­¥æ˜¾ç¤ºé”å±æ­Œè¯çš„éŸ³ä¹æ’­æ”¾å™¨ï¼šhttps://github.com/ZYHshao/MyPlayerã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"Objective-Cä¸­é€šè¿‡ä¸‹æ ‡çš„æ–¹å¼è®¿é—®è‡ªå®šä¹‰æ•°æ®æ¨¡å‹ä¸­å±æ€§","slug":"185Objective-Cä¸­é€šè¿‡ä¸‹æ ‡çš„æ–¹å¼è®¿é—®è‡ªå®šä¹‰æ•°æ®æ¨¡å‹ä¸­å±æ€§","date":"2016-03-06T16:00:00.000Z","updated":"2021-07-06T07:10:13.899Z","comments":true,"path":"2016/03/07/185Objective-Cä¸­é€šè¿‡ä¸‹æ ‡çš„æ–¹å¼è®¿é—®è‡ªå®šä¹‰æ•°æ®æ¨¡å‹ä¸­å±æ€§/","link":"","permalink":"http://huishao.cc/2016/03/07/185Objective-Cä¸­é€šè¿‡ä¸‹æ ‡çš„æ–¹å¼è®¿é—®è‡ªå®šä¹‰æ•°æ®æ¨¡å‹ä¸­å±æ€§/","excerpt":"","text":"Objective-Cä¸­é€šè¿‡ä¸‹æ ‡çš„æ–¹å¼è®¿é—®è‡ªå®šä¹‰æ•°æ®æ¨¡å‹ä¸­å±æ€§åœ¨Objective-Cä¸­ï¼Œå¯ä»¥é€šè¿‡ä¸‹æ ‡æ¥è®¿é—®æ•°ç»„ä¸­çš„å…ƒç´ ï¼Œå¦‚æœæ•°ç»„æ˜¯NSMutableArrayç±»å‹çš„å¯å˜æ•°ç»„ï¼Œåˆ™è¿˜å¯ä»¥é€šè¿‡ä¸‹æ ‡æ¥å¯¹æ•°ç»„ä¸­çš„å…ƒç´ è¿›è¡Œèµ‹å€¼æ“ä½œã€‚ä¾‹å¦‚ï¼š 1234 NSMutableArray * array = [[NSMutableArray alloc]init]; array[0] = @&quot;one&quot;; NSString * str = array[0]; NSLog(@&quot;%@&quot;,str); å¯¹äºObjective-Cä¸­çš„å­—å…¸å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡é”®å€¼ä¸‹æ ‡çš„æ–¹å¼æ¥è¿›è¡Œè®¿é—®ï¼Œä¾‹å¦‚ï¼š 123 NSMutableDictionary * dic = [[NSMutableDictionary alloc]init]; dic[@&quot;name&quot;] = @&quot;name&quot;; NSLog(@&quot;%@&quot;,dic[@&quot;name&quot;]); å¯¹äºå¼€å‘è€…è‡ªå®šä¹‰çš„çš„æ•°æ®ç»“æ„ï¼Œä¸€èˆ¬ä¼šé‡‡ç”¨getterä¸setteræ–¹æ³•æ¥å¯¹å…¶å±æ€§è¿›è¡Œè®¿é—®ï¼Œè™½ç„¶å®˜æ–¹æ–‡æ¡£ä¸Šæ²¡æœ‰æåŠï¼Œå®é™…ä¸Šï¼Œå¯ä»¥é€šè¿‡å®ç°ä¸€äº›æ–¹æ³•ï¼Œæ¥ä½¿è‡ªå®šä¹‰çš„æ•°æ®æ¨¡å‹æ”¯æŒä½¿ç”¨ä¸‹æ ‡æ¥è¿›è¡Œè®¿é—®ã€‚ åˆ›å»ºä¸€ä¸ªæ•°æ®æ¨¡å‹ç±»ï¼Œä½¿å…¶ç»§æ‰¿è‡ªNSObjectï¼Œå¦‚ä¸‹ï¼š MyModel.h 12@interface MyModel : NSObject@end MyModel.m 123456789101112131415161718192021222324@implementation MyModel&#123; NSString * _index0; NSString * _index1; NSString * _value;&#125;//é€šè¿‡ä¸‹æ ‡è·å–å±æ€§å€¼-(id) objectAtIndexedSubscript:(NSUInteger)idx &#123; return [self valueForKey:[NSString stringWithFormat:@&quot;_index%lu&quot;,idx]];&#125;//é€šè¿‡ä¸‹æ ‡è®¾ç½®å±æ€§å€¼- (void)setObject:(id)anObject atIndexedSubscript:(NSUInteger)index&#123; [self setValue:anObject forKey:[NSString stringWithFormat:@&quot;_index%lu&quot;,index]];&#125;//é€šè¿‡é”®å€¼ä¸‹æ ‡è·å–å±æ€§-(id) objectForKeyedSubscript:(id)key &#123; return [self valueForKey:key];&#125;//é€šè¿‡é”®å€¼ä¸‹æ ‡è®¾ç½®å±æ€§- (void)setObject:(id)object forKeyedSubscript:(id &lt; NSCopying &gt;)aKey&#123; [self setValue:object forKey:aKey];&#125;@end ä½¿ç”¨å¦‚ä¸‹ä»£ç è¿›è¡Œæµ‹è¯•ï¼š 12345678- (void)viewDidLoad &#123; [super viewDidLoad]; id model = [[MyModel alloc]init]; model[@&quot;_value&quot;] = @&quot;name&quot;; model[0] = @&quot;one&quot;; model[1] = @&quot;two&quot;; NSLog(@&quot;%@,%@,%@&quot;,model[0],model[1],model[@&quot;_value&quot;]);&#125; è¿™é‡Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œè‹¥ä½¿ç”¨ä¸‹æ ‡è®¿é—®å±æ€§è¿™ç§æ–¹æ³•ï¼Œå¿…é¡»å°†modelå£°æ˜ä¸ºidç±»å‹ï¼Œå¦åˆ™ä¼šå½±å“ç¼–è¯‘ã€‚ åœ¨æ‰“å°ä¿¡æ¯çš„å¯ä»¥çœ‹åˆ°ï¼Œæ¨¡å‹æ•°æ®çš„è®¾ç½®å’Œè·å–éƒ½æ²¡æœ‰é—®é¢˜ï¼Œè¿™ç§æ–¹æ³•å¯ä»¥å®Œå…¨è§£æ”¾.hæ–‡ä»¶ï¼Œå¦‚ä¸Šæ‰€ç¤ºï¼Œæˆ‘ä»¬åœ¨æ•°æ®æ¨¡å‹çš„.hæ–‡ä»¶ä¸­ä¸€è¡Œä»£ç éƒ½æ²¡æœ‰ç¼–å†™å³å¯å®Œæˆä¸MyModelæ¨¡å‹æ•°æ®çš„äº¤äº’ã€‚ç„¶è€Œå…¶ä¹Ÿæœ‰å¾ˆå¤§çš„å¼Šç«¯ï¼Œä»£ç çš„æ˜“è°ƒè¯•å’Œå¯è¯»æ€§éƒ½å¤§å¤§çš„é™ä½ï¼Œå› æ­¤ï¼Œæ²¡æœ‰ç‰¹æ®Šéœ€æ±‚ï¼Œä¸€èˆ¬ä¸è¦ä½¿ç”¨è¿™ç§æ–¹å¼æ¥æ„å»ºæ¨¡å‹ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"Objective-Cæµ…æ¢","slug":"Objective-Cæµ…æ¢","permalink":"http://huishao.cc/categories/Objective-Cæµ…æ¢/"}],"tags":[],"keywords":[{"name":"Objective-Cæµ…æ¢","slug":"Objective-Cæµ…æ¢","permalink":"http://huishao.cc/categories/Objective-Cæµ…æ¢/"}]},{"title":"iOSç¿»é¡µè§†å›¾æ§åˆ¶å™¨UIPageViewControllerçš„åº”ç”¨","slug":"184iOSç¿»é¡µè§†å›¾æ§åˆ¶å™¨UIPageViewControllerçš„åº”ç”¨","date":"2016-03-02T16:00:00.000Z","updated":"2021-07-06T07:09:12.561Z","comments":true,"path":"2016/03/03/184iOSç¿»é¡µè§†å›¾æ§åˆ¶å™¨UIPageViewControllerçš„åº”ç”¨/","link":"","permalink":"http://huishao.cc/2016/03/03/184iOSç¿»é¡µè§†å›¾æ§åˆ¶å™¨UIPageViewControllerçš„åº”ç”¨/","excerpt":"","text":"iOSç¿»é¡µè§†å›¾æ§åˆ¶å™¨UIPageViewControllerçš„åº”ç”¨ä¸€ã€å¼•è¨€UIPageViewControlleræ˜¯iOSä¸­å°‘è§çš„åŠ¨ç”»è§†å›¾æ§åˆ¶å™¨ä¹‹ä¸€ï¼Œé€šè¿‡å®ƒæ—¢å¯ä»¥åˆ›å»ºç±»ä¼¼UIScrollViewä¸UIPageControlç»“åˆçš„æ»šå±è§†å›¾ï¼Œä¹Ÿå¯ä»¥åˆ›å»ºç±»ä¼¼å›¾ä¹¦æ•ˆæœçš„ç‚«é…·ç¿»é¡µè§†å›¾ã€‚UIPageViewControllerç±»ä¼¼ä¸€ä¸ªè§†å›¾å®¹å™¨ï¼Œå…¶ä¸­æ¯ä¸ªå…·ä½“çš„è§†å›¾ç”±å„è‡ªçš„ViewControllerè¿›è¡Œç»´æŠ¤ç®¡ç†ï¼ŒUIPageViewControlleråªè¿›è¡Œåè°ƒä¸åŠ¨ç”»å¸ƒç½®ã€‚ä¸‹å›¾å¯ä»¥å¾ˆå¥½çš„å±•ç°å‡ºUIPageViewControlelrçš„ä½¿ç”¨ç»“æ„ï¼š ä¸Šå›¾ä¸­ï¼ŒUIPageViewControllerDataSourceåè®®ä¸ºUIPageViewControlleræä¾›æ•°æ®æ”¯æŒï¼ŒDataSourceåè®®æä¾›çš„æ•°æ®æ¥è‡ªå„ä¸ªViewContollerè‡ªè¡Œç»´æŠ¤ï¼ŒUIPageViewControllerDelegateä¸­çš„å›è°ƒå¯ä»¥å¯¹ç¿»é¡µåŠ¨ä½œï¼Œå±å¹•æ—‹è½¬åŠ¨ä½œç­‰è¿›è¡Œç›‘å¬ã€‚UIPageViewControlleræŠŠä»DataSourceä¸­è·å–åˆ°çš„è§†å›¾æ•°æ®æ¸²æŸ“ç»™Viewç”¨äºå½“å‰è§†å›¾æ§åˆ¶å™¨çš„å±•ç¤ºã€‚ äºŒã€åˆ›å»ºä¸€ä¸ªUIPageViewControlleré¦–å…ˆæ–°å»ºä¸€ä¸ªç±»ä½œä¸ºç¿»é¡µè§†å›¾æ§åˆ¶å™¨ä¸­å…·ä½“æ¯ä¸€é¡µè§†å›¾çš„æ§åˆ¶å™¨ï¼Œä½¿å…¶ç»§æ‰¿äºUIViewControllerï¼š ModelViewController.h 12345#import &lt;UIKit/UIKit.h&gt;@interface ModelViewController : UIViewController+(ModelViewController *)creatWithIndex:(int)index;@property(nonatomic,strong)UILabel * indexLabel;@end ModelViewController.m 1234567891011121314151617#import &quot;ModelViewController.h&quot;@interface ModelViewController ()@end@implementation ModelViewController+(ModelViewController *)creatWithIndex:(int)index&#123; ModelViewController * con = [[ModelViewController alloc]init]; con.indexLabel = [[UILabel alloc]initWithFrame:CGRectMake(110, 200, 100, 30)]; con.indexLabel.text = [NSString stringWithFormat:@&quot;ç¬¬%dé¡µ&quot;,index]; [con.view addSubview:con.indexLabel]; return con;&#125;- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view. self.view.backgroundColor = [UIColor redColor];&#125;@end åœ¨å·¥ç¨‹æ¨¡æ¿è‡ªå¸¦çš„ViewController.mæ–‡ä»¶ä¸­å®ç°å¦‚ä¸‹ä»£ç ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172#import &quot;ViewController.h&quot;#import &quot;ModelViewController.h&quot;//éµå®ˆåè®®@interface ViewController ()&lt;UIPageViewControllerDataSource,UIPageViewControllerDelegate&gt;&#123; //ç¿»é¡µè§†å›¾æ§åˆ¶å™¨å¯¹è±¡ UIPageViewController * _pageViewControl; //æ•°æ®æºæ•°ç»„ NSMutableArray * _dataArray;&#125;@end@implementation ViewController- (void)viewDidLoad &#123; [super viewDidLoad]; //è¿›è¡Œåˆå§‹åŒ– _pageViewControl = [[UIPageViewController alloc]initWithTransitionStyle:UIPageViewControllerTransitionStyleScroll navigationOrientation:UIPageViewControllerNavigationOrientationHorizontal options:@&#123;UIPageViewControllerOptionSpineLocationKey:@0,UIPageViewControllerOptionInterPageSpacingKey:@10&#125;]; self.view.backgroundColor = [UIColor greenColor]; //è®¾ç½®ç¿»é¡µè§†å›¾çš„å°ºå¯¸ _pageViewControl.view.bounds=self.view.bounds; //è®¾ç½®æ•°æ®æºä¸ä»£ç† _pageViewControl.dataSource=self; _pageViewControl.delegate=self; //åˆ›å»ºåˆå§‹ç•Œé¢ ModelViewController * model = [ModelViewController creatWithIndex:1]; //è®¾ç½®åˆå§‹ç•Œé¢ [_pageViewControl setViewControllers:@[model] direction:UIPageViewControllerNavigationDirectionReverse animated:YES completion:nil]; //è®¾ç½®æ˜¯å¦åŒé¢å±•ç¤º _pageViewControl.doubleSided = NO; _dataArray = [[NSMutableArray alloc]init]; [_dataArray addObject:model]; [self.view addSubview:_pageViewControl.view];&#125;//ç¿»é¡µæ§åˆ¶å™¨è¿›è¡Œå‘å‰ç¿»é¡µåŠ¨ä½œ è¿™ä¸ªæ•°æ®æºæ–¹æ³•è¿”å›çš„è§†å›¾æ§åˆ¶å™¨ä¸ºè¦æ˜¾ç¤ºè§†å›¾çš„è§†å›¾æ§åˆ¶å™¨- (nullable UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerBeforeViewController:(UIViewController *)viewController&#123; int index = (int)[_dataArray indexOfObject:viewController]; if (index==0) &#123; return nil; &#125;else&#123; return _dataArray[index-1]; &#125;&#125;//ç¿»é¡µæ§åˆ¶å™¨è¿›è¡Œå‘åç¿»é¡µåŠ¨ä½œ è¿™ä¸ªæ•°æ®æºæ–¹æ³•è¿”å›çš„è§†å›¾æ§åˆ¶å™¨ä¸ºè¦æ˜¾ç¤ºè§†å›¾çš„è§†å›¾æ§åˆ¶å™¨- (nullable UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerAfterViewController:(UIViewController *)viewController&#123; int index = (int)[_dataArray indexOfObject:viewController]; if (index==9) &#123; return nil; &#125;else&#123; if (_dataArray.count-1&gt;=(index+1)) &#123; return _dataArray[index+1]; &#125;else&#123; ModelViewController * model = [ModelViewController creatWithIndex:index+2]; [_dataArray addObject:model]; return model; &#125; &#125;&#125;//å±å¹•æ—‹è½¬è§¦å‘çš„ä»£ç†æ–¹æ³•- (UIPageViewControllerSpineLocation) pageViewController:(UIPageViewController *)pageViewController spineLocationForInterfaceOrientation:(UIInterfaceOrientation)orientation&#123; return UIPageViewControllerSpineLocationMin;&#125;//è®¾ç½®åˆ†é¡µæ§åˆ¶å™¨çš„åˆ†é¡µæ•°- (NSInteger)presentationCountForPageViewController:(UIPageViewController *)pageViewController &#123; return 10;&#125;//è®¾ç½®åˆå§‹çš„åˆ†é¡µç‚¹- (NSInteger)presentationIndexForPageViewController:(UIPageViewController *)pageViewController&#123; return 0;&#125;@end ä¸Šé¢åˆ›å»ºäº†æœ€ç®€å•çš„ç¿»é¡µè§†å›¾æ§åˆ¶å™¨ç¤ºä¾‹ï¼Œæ•ˆæœå¦‚ä¸‹å›¾ï¼š ä¸‰ã€UIPageViewControllerä¸­æ–¹æ³•ä½¿ç”¨è§£æ12//åˆ›å»ºç¿»é¡µè§†å›¾æ§åˆ¶å™¨å¯¹è±¡- (instancetype)initWithTransitionStyle:(UIPageViewControllerTransitionStyle)style navigationOrientation:(UIPageViewControllerNavigationOrientation)navigationOrientation options:(nullable NSDictionary&lt;NSString *, id&gt; *)options; ä¸Šé¢æ–¹æ³•ç”¨äºåˆ›å»ºè§†å›¾æ§åˆ¶å™¨å¯¹è±¡ï¼Œå…¶ä¸­UIPageViewControllerTransitionStyleå‚æ•°è®¾ç½®ç¿»é¡µæ§åˆ¶å™¨çš„é£æ ¼ï¼Œæšä¸¾å¦‚ä¸‹ï¼š 1234typedef NS_ENUM(NSInteger, UIPageViewControllerTransitionStyle) &#123; UIPageViewControllerTransitionStylePageCurl = 0, //ç±»ä¼¼äºä¹¦æœ¬ç¿»é¡µæ•ˆæœ UIPageViewControllerTransitionStyleScroll = 1 // ç±»ä¼¼äºScrollViewçš„æ»‘åŠ¨æ•ˆæœ&#125;; å¦‚æœè®¾ç½®ä¸ºUIPageViewControllerTransitionStyleCurlï¼Œç¿»é¡µæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¸Šé¢åˆå§‹åŒ–æ–¹æ³•ä¸­çš„UIPageViewControllerNavigationOrientationå±æ€§è®¾ç½®ç¿»é¡µçš„æ–¹å‘ï¼Œæšä¸¾å¦‚ä¸‹ï¼š 1234typedef NS_ENUM(NSInteger, UIPageViewControllerNavigationOrientation) &#123; UIPageViewControllerNavigationOrientationHorizontal = 0,//æ°´å¹³ç¿»é¡µ UIPageViewControllerNavigationOrientationVertical = 1//ç«–ç›´ç¿»é¡µ&#125;; optionså‚æ•°ç”¨äºè®¾ç½®ç¿»é¡µè§†å›¾æ§åˆ¶å™¨çš„é…ç½®å­—å…¸ï¼Œå…¶å¯ä»¥è®¾ç½®çš„é…ç½®é”®å€¼å¦‚ä¸‹ï¼š 1234//è¿™ä¸ªé”®éœ€è¦è®¾ç½®ä¸ºUIPageViewControllerOptionSpineLocationKeyæšä¸¾å€¼å¯¹åº”çš„NSNumberå¯¹è±¡ è®¾ç½®ç¿»é¡µæ§åˆ¶å™¨çš„ä¹¦è½´ åé¢ä¼šä»‹ç»NSString * const UIPageViewControllerOptionSpineLocationKey;//è¿™ä¸ªé”®éœ€è¦è®¾ç½®ä¸ºNSNumberç±»å‹ è®¾ç½®æ¯é¡µè§†å›¾çš„é—´è· ç”¨äºæ»šåŠ¨è§†å›¾é£æ ¼çš„NSString * const UIPageViewControllerOptionInterPageSpacingKey; ä¸‹é¢æ˜¯UIPageViewControllerçš„ä¸€äº›å¸¸ç”¨å±æ€§ä¸æ–¹æ³•ï¼š 1234567891011121314//è®¾ç½®æ•°æ®æº@property (nullable, nonatomic, weak) id &lt;UIPageViewControllerDelegate&gt; delegate;//è®¾ç½®ä»£ç†@property (nullable, nonatomic, weak) id &lt;UIPageViewControllerDataSource&gt; dataSource;//è·å–ç¿»é¡µé£æ ¼@property (nonatomic, readonly) UIPageViewControllerTransitionStyle transitionStyle;//è·å–ç¿»é¡µæ–¹å‘@property (nonatomic, readonly) UIPageViewControllerNavigationOrientation navigationOrientation;//è·å–ä¹¦è½´ç±»å‹@property (nonatomic, readonly) UIPageViewControllerSpineLocation spineLocation;//è®¾ç½®æ˜¯å¦åŒé¢æ˜¾ç¤º@property (nonatomic, getter=isDoubleSided) BOOL doubleSided;//è®¾ç½®è¦æ˜¾ç¤ºçš„è§†å›¾æ§åˆ¶å™¨- (void)setViewControllers:(nullable NSArray&lt;UIViewController *&gt; *)viewControllers direction:(UIPageViewControllerNavigationDirection)direction animated:(BOOL)animated completion:(void (^ __nullable)(BOOL finished))completion; ä¸Šé¢åªæœ‰spineLocationå±æ€§æœ‰äº›éš¾äºç†è§£ï¼Œå…¶æšä¸¾å¦‚ä¸‹ï¼š 12345678910typedef NS_ENUM(NSInteger, UIPageViewControllerSpineLocation) &#123; //å¯¹äºSCrollViewç±»å‹çš„æ»‘åŠ¨æ•ˆæœ æ²¡æœ‰ä¹¦è½´ ä¼šè¿”å›ä¸‹é¢è¿™ä¸ªæšä¸¾å€¼ UIPageViewControllerSpineLocationNone = 0, //ä»¥å·¦è¾¹æˆ–è€…ä¸Šè¾¹ä¸ºè½´è¿›è¡Œç¿»è½¬ ç•Œé¢åŒä¸€æ—¶é—´åªæ˜¾ç¤ºä¸€ä¸ªView UIPageViewControllerSpineLocationMin = 1, //ä»¥ä¸­é—´ä¸ºè½´è¿›è¡Œç¿»è½¬ ç•Œé¢åŒæ—¶å¯ä»¥æ˜¾ç¤ºä¸¤ä¸ªView UIPageViewControllerSpineLocationMid = 2, //ä»¥ä¸‹è¾¹æˆ–è€…å³è¾¹ä¸ºè½´è¿›è¡Œç¿»è½¬ ç•Œé¢åŒä¸€æ—¶é—´åªæ˜¾ç¤ºä¸€ä¸ªView UIPageViewControllerSpineLocationMax = 3 &#125;; å°†ä¸Šé¢çš„ç¤ºä¾‹ä»£ç ä¿®æ”¹å‡ ä¸ªåœ°æ–¹å¦‚ä¸‹ï¼š 12345678910111213141516171819- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view, typically from a nib. _pageViewControl = [[UIPageViewController alloc]initWithTransitionStyle:UIPageViewControllerTransitionStylePageCurl navigationOrientation:UIPageViewControllerNavigationOrientationVertical options:@&#123;UIPageViewControllerOptionSpineLocationKey:@2,UIPageViewControllerOptionInterPageSpacingKey:@10&#125;]; self.view.backgroundColor = [UIColor greenColor]; _pageViewControl.view.bounds=self.view.bounds; _pageViewControl.dataSource=self; _pageViewControl.delegate=self; ModelViewController * model = [ModelViewController creatWithIndex:1]; ModelViewController * model2 = [ModelViewController creatWithIndex:2]; [_pageViewControl setViewControllers:@[model,model2] direction:UIPageViewControllerNavigationDirectionReverse animated:YES completion:nil]; _pageViewControl.doubleSided = YES; _dataArray = [[NSMutableArray alloc]init]; [_dataArray addObject:model]; [self.view addSubview:_pageViewControl.view];&#125;- (UIPageViewControllerSpineLocation) pageViewController:(UIPageViewController *)pageViewController spineLocationForInterfaceOrientation:(UIInterfaceOrientation)orientation&#123; return UIPageViewControllerSpineLocationMid;&#125; è¿è¡Œæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å››ã€UIPageViewControllerDataSourceä¸­æ–¹æ³•è§£æ12345678//å‘å‰ç¿»é¡µå±•ç¤ºçš„ViewController- (nullable UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerBeforeViewController:(UIViewController *)viewController;//å‘åç¿»é¡µå±•ç¤ºçš„ViewController- (nullable UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerAfterViewController:(UIViewController *)viewController;//è®¾ç½®åˆ†é¡µæ§åˆ¶å™¨çš„åˆ†é¡µç‚¹æ•°- (NSInteger)presentationCountForPageViewController:(UIPageViewController *)pageViewController NS_AVAILABLE_IOS(6_0);//è®¾ç½®å½“å‰åˆ†é¡µæ§åˆ¶å™¨æ‰€é«˜äº®çš„ç‚¹- (NSInteger)presentationIndexForPageViewController:(UIPageViewController *)pageViewController NS_AVAILABLE_IOS(6_0); äº”ã€UIPageViewControllerDelegateä¸­æ–¹æ³•è§£æ123456//ç¿»é¡µè§†å›¾æ§åˆ¶å™¨å°†è¦ç¿»é¡µæ—¶æ‰§è¡Œçš„æ–¹æ³•- (void)pageViewController:(UIPageViewController *)pageViewController willTransitionToViewControllers:(NSArray&lt;UIViewController *&gt; *)pendingViewControllers NS_AVAILABLE_IOS(6_0);//ç¿»é¡µåŠ¨ç”»æ‰§è¡Œå®Œæˆåå›è°ƒçš„æ–¹æ³•- (void)pageViewController:(UIPageViewController *)pageViewController didFinishAnimating:(BOOL)finished previousViewControllers:(NSArray&lt;UIViewController *&gt; *)previousViewControllers transitionCompleted:(BOOL)completed;//å±å¹•é˜²çº¿æ”¹å˜æ—¶å›åˆ°çš„æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡è¿”å›å€¼é‡è®¾ä¹¦è½´ç±»å‹æšä¸¾- (UIPageViewControllerSpineLocation)pageViewController:(UIPageViewController *)pageViewController spineLocationForInterfaceOrientation:(UIInterfaceOrientation)orientation; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"iOSç½‘ç»œç¼–ç¨‹ä¹‹ä¸ƒâ€”â€”æœ¬åœ°ç”¨æˆ·å‡­è¯Cookieçš„åº”ç”¨","slug":"183iOSç½‘ç»œç¼–ç¨‹ä¹‹ä¸ƒâ€”â€”æœ¬åœ°ç”¨æˆ·å‡­è¯Cookieçš„åº”ç”¨","date":"2016-02-29T16:00:00.000Z","updated":"2021-07-06T07:08:22.118Z","comments":true,"path":"2016/03/01/183iOSç½‘ç»œç¼–ç¨‹ä¹‹ä¸ƒâ€”â€”æœ¬åœ°ç”¨æˆ·å‡­è¯Cookieçš„åº”ç”¨/","link":"","permalink":"http://huishao.cc/2016/03/01/183iOSç½‘ç»œç¼–ç¨‹ä¹‹ä¸ƒâ€”â€”æœ¬åœ°ç”¨æˆ·å‡­è¯Cookieçš„åº”ç”¨/","excerpt":"","text":"iOSç½‘ç»œç¼–ç¨‹ä¹‹ä¸ƒâ€”â€”æœ¬åœ°ç”¨æˆ·å‡­è¯Cookieçš„åº”ç”¨ä¸€ã€ä½•ä¸ºCookieCookieæ˜¯ç½‘ç«™ä¸ºäº†ä¾¿æ˜¯ç»ˆç«¯èº«ä»½ï¼Œä¿å­˜åœ¨ç»ˆç«¯æœ¬åœ°çš„ç”¨æˆ·å‡­è¯ä¿¡æ¯ã€‚Cookieä¸­çš„å­—æ®µä¸æ„ä¹‰ç”±æœåŠ¡ç«¯è¿›è¡Œå®šä¹‰ã€‚ä¾‹å¦‚ï¼Œå½“ç”¨æˆ·åœ¨æŸä¸ªç½‘ç«™è¿›è¡Œäº†ç™»å½•æ“ä½œåï¼ŒæœåŠ¡ç«¯ä¼šå°†Cookieä¿¡æ¯è¿”å›ç»™ç»ˆç«¯ï¼Œç»ˆç«¯ä¼šå°†è¿™äº›ä¿¡æ¯è¿›è¡Œä¿å­˜ï¼Œåœ¨ä¸‹ä¸€æ¬¡å†æ¬¡è®¿é—®è¿™ä¸ªç½‘ç«™æ—¶ï¼Œç»ˆç«¯ä¼šå°†ä¿å­˜çš„Cookieä¿¡æ¯ä¸€å¹¶å‘é€åˆ°æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯æ ¹æ®Cookieä¿¡æ¯æ˜¯å¦æœ‰æ•ˆæ¥åˆ¤æ–­æ­¤ç”¨æˆ·æ˜¯å¦å¯ä»¥è‡ªåŠ¨ç™»å½•ã€‚ äºŒã€iOSä¸­è¿›è¡ŒCookieç®¡ç†çš„ä¸¤ä¸ªç±»iOSä¸­è¿›è¡ŒHTTPç½‘ç»œè¯·æ±‚Cookieç®¡ç†ä¸»è¦ç”±ä¸¤ä¸ªç±»è´Ÿè´£ï¼Œä¸€ä¸ªç±»æ˜¯NSHTTPCookieStorageç±»ï¼Œä¸€ä¸ªæ˜¯NSHTTPCookieç±»ã€‚ 1.NSHTTPCookieStorageNSHTTPCookieStorageç±»é‡‡ç”¨å•ä¾‹çš„è®¾è®¡æ¨¡å¼ï¼Œå…¶ä¸­ç®¡ç†ç€æ‰€æœ‰HTTPè¯·æ±‚çš„Cookieä¿¡æ¯ï¼Œå¸¸ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324//è·å–å•ä¾‹å¯¹è±¡+ (NSHTTPCookieStorage *)sharedHTTPCookieStorage;//æ‰€æœ‰Cookieæ•°æ®æ•°ç»„ å…¶ä¸­å­˜æ”¾NSHTTPCookieå¯¹è±¡@property (nullable , readonly, copy) NSArray&lt;NSHTTPCookie *&gt; *cookies;//æ‰‹åŠ¨è®¾ç½®ä¸€æ¡Cookieæ•°æ®- (void)setCookie:(NSHTTPCookie *)cookie;//åˆ é™¤æŸæ¡Cookieä¿¡æ¯- (void)deleteCookie:(NSHTTPCookie *)cookie;//åˆ é™¤æŸä¸ªæ—¶é—´åçš„æ‰€æœ‰Cookieä¿¡æ¯ iOS8åå¯ç”¨- (nullable NSArray&lt;NSHTTPCookie *&gt; *)cookiesForURL:(NSURL *)URL;//è·å–æŸä¸ªç‰¹å®šURLçš„æ‰€æœ‰Cookieæ•°æ®- (void)removeCookiesSinceDate:(NSDate *)date NS_AVAILABLE(10_10, 8_0);//ä¸ºæŸä¸ªç‰¹å®šçš„URLè®¾ç½®Cookie- (void)setCookies:(NSArray&lt;NSHTTPCookie *&gt; *)cookies forURL:(nullable NSURL *)URL mainDocumentURL:(nullable NSURL *)mainDocumentURL;//Cookieæ•°æ®çš„æ¥æ”¶åè®®/*æšä¸¾å¦‚ä¸‹ï¼štypedef NS_ENUM(NSUInteger, NSHTTPCookieAcceptPolicy) &#123; NSHTTPCookieAcceptPolicyAlways,//æ¥æ”¶æ‰€æœ‰Cookieä¿¡æ¯ NSHTTPCookieAcceptPolicyNever,//ä¸æ¥æ”¶æ‰€æœ‰Cookieä¿¡æ¯ NSHTTPCookieAcceptPolicyOnlyFromMainDocumentDomain//åªæ¥æ”¶ä¸»æ–‡æ¡£åŸŸçš„Cookieä¿¡æ¯&#125;;*/@property NSHTTPCookieAcceptPolicy cookieAcceptPolicy; ç³»ç»Ÿä¸‹é¢çš„ä¸¤ä¸ªé€šçŸ¥ä¸Cookieç®¡ç†æœ‰å…³ï¼š 1234//Cookieæ•°æ®çš„æ¥æ”¶åè®®æ”¹å˜æ—¶å‘é€çš„é€šçŸ¥FOUNDATION_EXPORT NSString * const NSHTTPCookieManagerAcceptPolicyChangedNotification;//ç®¡ç†çš„Cookieæ•°æ®å‘ç”Ÿå˜åŒ–æ—¶å‘é€çš„é€šçŸ¥FOUNDATION_EXPORT NSString * const NSHTTPCookieManagerCookiesChangedNotification; 2.NSHTTPCookieNSHTTPCookieæ˜¯å…·ä½“çš„HTTPè¯·æ±‚Cookieæ•°æ®å¯¹è±¡ï¼Œå…¶ä¸­å±æ€§æ–¹æ³•å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031//ä¸‹é¢ä¸¤ä¸ªæ–¹æ³•ç”¨äºå¯¹è±¡çš„åˆ›å»ºå’Œåˆå§‹åŒ– éƒ½æ˜¯é€šè¿‡å­—å…¸è¿›è¡Œé”®å€¼è®¾ç½®- (nullable instancetype)initWithProperties:(NSDictionary&lt;NSString *, id&gt; *)properties;+ (nullable NSHTTPCookie *)cookieWithProperties:(NSDictionary&lt;NSString *, id&gt; *)properties;//è¿”å›Cookieæ•°æ®ä¸­å¯ç”¨äºæ·»åŠ HTTPå¤´å­—æ®µçš„å­—å…¸+ (NSDictionary&lt;NSString *, NSString *&gt; *)requestHeaderFieldsWithCookies:(NSArray&lt;NSHTTPCookie *&gt; *)cookies;//ä»æŒ‡å®šçš„å“åº”å¤´å’ŒURLåœ°å€ä¸­è§£æå‡ºCookieæ•°æ®+ (NSArray&lt;NSHTTPCookie *&gt; *)cookiesWithResponseHeaderFields:(NSDictionary&lt;NSString *, NSString *&gt; *)headerFields forURL:(NSURL *)URL;//Cookieæ•°æ®ä¸­çš„å±æ€§å­—å…¸@property (nullable, readonly, copy) NSDictionary&lt;NSString *, id&gt; *properties;//è¯·æ±‚å“åº”çš„ç‰ˆæœ¬@property (readonly) NSUInteger version;//è¯·æ±‚ç›¸åº”çš„åç§°@property (readonly, copy) NSString *name;//è¯·æ±‚ç›¸åº”çš„å€¼@property (readonly, copy) NSString *value;//è¿‡æœŸæ—¶é—´@property (nullable, readonly, copy) NSDate *expiresDate;//è¯·æ±‚çš„åŸŸå@property (readonly, copy) NSString *domain;//è¯·æ±‚çš„è·¯å¾„@property (readonly, copy) NSString *path;//æ˜¯å¦æ˜¯å®‰å…¨ä¼ è¾“@property (readonly, getter=isSecure) BOOL secure;//æ˜¯å¦åªå‘é€HTTPçš„æœåŠ¡@property (readonly, getter=isHTTPOnly) BOOL HTTPOnly;//å“åº”çš„æ–‡æ¡£@property (nullable, readonly, copy) NSString *comment;//ç›¸åº”çš„æ–‡æ¡£URL@property (nullable, readonly, copy) NSURL *commentURL;//æœåŠ¡ç«¯å£åˆ—è¡¨@property (nullable, readonly, copy) NSArray&lt;NSNumber *&gt; *portList; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSç½‘ç»œç¼–ç¨‹ä¹‹å…­â€”â€”æ•°æ®ç¼“å­˜ç±»NSURLCacheä½¿ç”¨è§£æ","slug":"182iOSç½‘ç»œç¼–ç¨‹ä¹‹å…­â€”â€”æ•°æ®ç¼“å­˜ç±»NSURLCacheä½¿ç”¨è§£æ","date":"2016-02-25T16:00:00.000Z","updated":"2021-07-06T07:07:32.331Z","comments":true,"path":"2016/02/26/182iOSç½‘ç»œç¼–ç¨‹ä¹‹å…­â€”â€”æ•°æ®ç¼“å­˜ç±»NSURLCacheä½¿ç”¨è§£æ/","link":"","permalink":"http://huishao.cc/2016/02/26/182iOSç½‘ç»œç¼–ç¨‹ä¹‹å…­â€”â€”æ•°æ®ç¼“å­˜ç±»NSURLCacheä½¿ç”¨è§£æ/","excerpt":"","text":"iOSç½‘ç»œç¼–ç¨‹ä¹‹å…­â€”â€”æ•°æ®ç¼“å­˜ç±»NSURLCacheä½¿ç”¨è§£æä¸€ã€å¼•è¨€åœ¨å‰é¢åšå®¢ä¸­ï¼Œä»‹ç»äº†NSURLRequestè¯·æ±‚ç±»çš„ç›¸å…³ä½¿ç”¨æ–¹æ³•ï¼Œå…¶ä¸­æœ‰ä»‹ç»å…³äºè¯·æ±‚è¿”å›æ•°æ®çš„ç¼“å­˜ç­–ç•¥ï¼Œå®é™…ä¸Šï¼ŒiOSä¸­å…·ä½“ç¼“å­˜æ“ä½œçš„ç®¡ç†æ˜¯ç”±NSURLCacheç±»æ¥å®ç°çš„ã€‚NSURLRequestç±»ä»‹ç»çš„åšå®¢åœ°å€å¦‚ä¸‹ï¼š iOSä¸­NSURLRequestç›¸å…³ä½¿ç”¨ï¼šhttp://my.oschina.net/u/2340880/blog/620225ã€‚ äºŒã€NSURLCacheä¸­æ–¹æ³•ä¸å±æ€§123456789101112131415161718192021222324252627282930//è·å–å½“å‰åº”ç”¨çš„ç¼“å­˜ç®¡ç†å¯¹è±¡+ (NSURLCache *)sharedURLCache;//è®¾ç½®è‡ªå®šä¹‰çš„NSURLCacheä½œä¸ºåº”ç”¨ç¼“å­˜ç®¡ç†å¯¹è±¡+ (void)setSharedURLCache:(NSURLCache *)cache;//åˆå§‹åŒ–ä¸€ä¸ªåº”ç”¨ç¼“å­˜å¯¹è±¡/*memoryCapacity è®¾ç½®å†…å­˜ç¼“å­˜å®¹é‡diskCapacity è®¾ç½®ç£ç›˜ç¼“å­˜å®¹é‡path ç£ç›˜ç¼“å­˜è·¯å¾„å†…å®¹ç¼“å­˜ä¼šåœ¨åº”ç”¨ç¨‹åºé€€å‡ºå æ¸…ç©º ç£ç›˜ç¼“å­˜ä¸ä¼š*/- (instancetype)initWithMemoryCapacity:(NSUInteger)memoryCapacity diskCapacity:(NSUInteger)diskCapacity diskPath:(nullable NSString *)path;//è·å–æŸä¸€è¯·æ±‚çš„ç¼“å­˜- (nullable NSCachedURLResponse *)cachedResponseForRequest:(NSURLRequest *)request;//ç»™è¯·æ±‚è®¾ç½®æŒ‡å®šçš„ç¼“å­˜- (void)storeCachedResponse:(NSCachedURLResponse *)cachedResponse forRequest:(NSURLRequest *)request;//ç§»é™¤æŸä¸ªè¯·æ±‚çš„ç¼“å­˜- (void)removeCachedResponseForRequest:(NSURLRequest *)request;//ç§»é™¤æ‰€æœ‰ç¼“å­˜æ•°æ®- (void)removeAllCachedResponses;//ç§»é™¤æŸä¸ªæ—¶é—´èµ·çš„ç¼“å­˜è®¾ç½®- (void)removeCachedResponsesSinceDate:(NSDate *)date NS_AVAILABLE(10_10, 8_0);//å†…å­˜ç¼“å­˜å®¹é‡å¤§å°@property NSUInteger memoryCapacity;//ç£ç›˜ç¼“å­˜å®¹é‡å¤§å°@property NSUInteger diskCapacity;//å½“å‰å·²ç”¨å†…å­˜å®¹é‡@property (readonly) NSUInteger currentMemoryUsage;//å½“å‰å·²ç”¨ç£ç›˜å®¹é‡@property (readonly) NSUInteger currentDiskUsage; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSç½‘ç»œç¼–ç¨‹ä¹‹äº”â€”â€”è¯·æ±‚å›æ‰§ç±»NSURLResponseå±æ€§ç®€ä»‹","slug":"180iOSç½‘ç»œç¼–ç¨‹ä¹‹äº”â€”â€”è¯·æ±‚å›æ‰§ç±»NSURLResponseå±æ€§ç®€ä»‹","date":"2016-02-24T16:00:00.000Z","updated":"2021-07-06T07:05:44.967Z","comments":true,"path":"2016/02/25/180iOSç½‘ç»œç¼–ç¨‹ä¹‹äº”â€”â€”è¯·æ±‚å›æ‰§ç±»NSURLResponseå±æ€§ç®€ä»‹/","link":"","permalink":"http://huishao.cc/2016/02/25/180iOSç½‘ç»œç¼–ç¨‹ä¹‹äº”â€”â€”è¯·æ±‚å›æ‰§ç±»NSURLResponseå±æ€§ç®€ä»‹/","excerpt":"","text":"iOSç½‘ç»œç¼–ç¨‹ä¹‹äº”â€”â€”è¯·æ±‚å›æ‰§ç±»NSURLResponseå±æ€§ç®€ä»‹NSURLResponseç±»ä¸­å­˜æ”¾è¯·æ±‚çš„å›æ‰§ä¿¡æ¯ï¼Œåœ¨å‘é€ç½‘ç»œè¯·æ±‚æ—¶ï¼Œå¦‚æœè¯·æ±‚æˆåŠŸï¼Œé¦–å…ˆä¼šæ¥æ”¶åˆ°æœåŠ¡ç«¯çš„å›æ‰§ä¿¡æ¯ï¼Œç›´æ¥å¼€å§‹æ¥æ”¶å…·ä½“çš„è¿”å›æ•°æ®ã€‚NSURLResponseå¯¹è±¡ä¸­ä¸»è¦æœ‰ä»¥ä¸‹å±æ€§ï¼š 12345678910//è¯·æ±‚çš„URLåœ°å€@property (nullable, readonly, copy) NSURL *URL;//è¿”å›æ•°æ®çš„æ•°æ®ç±»å‹@property (nullable, readonly, copy) NSString *MIMEType;//è·å–è¿”å›æ•°æ®çš„å†…å®¹é•¿åº¦@property (readonly) long long expectedContentLength;//è·å–è¿”å›æ•°æ®çš„ç¼–ç æ–¹å¼@property (nullable, readonly, copy) NSString *textEncodingName;//è¿”å›æ‹¼æ¥çš„æ•°æ®æ–‡ä»¶å ä»¥urlä¸ºå æ•°æ®æ²¡é†’MIMETypeä¸ºæ‰©å±•å@property (nullable, readonly, copy) NSString *suggestedFilename; å¯¹äºHTTPè¯·æ±‚ï¼Œè¯·æ±‚å›æ‰§ä¼šè¢«å°è£…ä¸ºNSHTTPURLResponseå¯¹è±¡ï¼Œå…¶ä¸­é™¤äº†æœ‰ä¸Šé¢é‚£äº›å±æ€§å¤–ï¼Œè¿˜æœ‰å¦‚ä¸‹çš„æ‰©å±•å±æ€§ï¼š 1234//è¯·æ±‚çš„çŠ¶æ€ç @property (readonly) NSInteger statusCode;//è¯·æ±‚å¤´ä¸­æ‰€æœ‰çš„å­—æ®µ@property (readonly, copy) NSDictionary *allHeaderFields; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSæ–°çš„è§†é¢‘å¼€å‘æ¡†æ¶AVPlayerViewContollerä¸ç”»ä¸­ç”»æŠ€æœ¯","slug":"181iOSæ–°çš„è§†é¢‘å¼€å‘æ¡†æ¶AVPlayerViewContollerä¸ç”»ä¸­ç”»æŠ€æœ¯","date":"2016-02-24T16:00:00.000Z","updated":"2021-07-06T07:06:46.470Z","comments":true,"path":"2016/02/25/181iOSæ–°çš„è§†é¢‘å¼€å‘æ¡†æ¶AVPlayerViewContollerä¸ç”»ä¸­ç”»æŠ€æœ¯/","link":"","permalink":"http://huishao.cc/2016/02/25/181iOSæ–°çš„è§†é¢‘å¼€å‘æ¡†æ¶AVPlayerViewContollerä¸ç”»ä¸­ç”»æŠ€æœ¯/","excerpt":"","text":"iOSæ–°çš„è§†é¢‘å¼€å‘æ¡†æ¶AVPlayerViewContollerä¸ç”»ä¸­ç”»æŠ€æœ¯ä¸€ã€å¼•è¨€å‰é¢æœ‰ä¸€ç¯‡åšå®¢æ¢è®¨äº†iOSä¸­è§†é¢‘æ’­æ”¾çš„å¼€å‘ç›¸å…³ç±»å’Œæ–¹æ³•ï¼Œé‚£ç¯‡åšå®¢ä¸­ä¸»è¦è®²è§£çš„æ˜¯MeidaPlayeræ¡†æ¶ä¸­çš„MPMoviePlayerControllerç±»å’ŒMPMoviePlayerViewControllerç±»ã€‚åœ¨iOS8ä¸­ï¼ŒiOSå¼€å‘æ¡†æ¶ä¸­å¼•å…¥äº†ä¸€ä¸ªæ–°çš„è§†é¢‘æ¡†æ¶AVKitï¼Œå…¶ä¸­æä¾›äº†è§†é¢‘å¼€å‘ç±»AVPlayerViewControllerç”¨äºåœ¨åº”ç”¨ä¸­åµŒå…¥æ’­æ”¾è§†é¢‘çš„æ§ä»¶ã€‚åœ¨iOS8ä¸­ï¼Œè¿™ä¸¤ä¸ªæ¡†æ¶ä¸­çš„è§†é¢‘æ’­æ”¾åŠŸèƒ½å¹¶æ— å¤ªå¤§å·®å¼‚ï¼ŒåŸºæœ¬éƒ½å¯ä»¥æ»¡è¶³å¼€å‘è€…çš„éœ€æ±‚ã€‚iOS9ç³»ç»Ÿåï¼ŒiPad Airæ­£å¼å¼€å§‹æ”¯æŒå¤šä»»åŠ¡ä¸ç”»ä¸­ç”»çš„åˆ†å±åŠŸèƒ½ï¼Œæ‰€è°“ç”»ä¸­ç”»ï¼Œå³æ˜¯ç”¨æˆ·å¯ä»¥å°†å½“å‰æ’­æ”¾çš„è§†é¢‘ç¼©å°æ”¾åœ¨å±å¹•ä¸ŠåŒæ—¶è¿›è¡Œå…¶ä»–åº”ç”¨ç¨‹åºçš„ä½¿ç”¨ã€‚è¿™ä¸ªé©å‘½æ€§çš„åŠŸèƒ½å°†æå¤§çš„æ–¹ä¾¿ç”¨æˆ·çš„ä½¿ç”¨ã€‚äºæ­¤åŒæ—¶ï¼Œåœ¨iOS9ä¸­ï¼ŒMPMoviePlayerControllerä¸MPMoviePlayerViewControllerç±»ä¹Ÿè¢«å®Œå…¨æ˜“ç”¨ï¼Œå¼€å‘è€…ä½¿ç”¨AVPlayerViewControllerå¯ä»¥ååˆ†æ–¹ä¾¿çš„å®ç°è§†é¢‘æ’­æ”¾çš„åŠŸèƒ½å¹¶åœ¨ä¸€äº›å‹å·çš„iPadä¸Šé›†æˆç”»ä¸­ç”»çš„åŠŸèƒ½ã€‚ äºŒã€AVPlayerViewControllerçš„ä½¿ç”¨ä¸å…¶ä¸­æ–¹æ³•å±æ€§è§£æä½¿ç”¨AVPlayerViewControlleré¦–å…ˆéœ€è¦å¼•å…¥ä¸¤ä¸ªæ¡†æ¶ï¼Œå¦‚ä¸‹ï¼š 12#import &lt;AVKit/AVKit.h&gt;#import &lt;AVFoundation/AVFoundation.h&gt; ä½¿ç”¨å¦‚ä¸‹ä»£ç è¿›è¡Œè§†é¢‘çš„æ’­æ”¾ï¼š 12345 NSString * path = [[NSBundle mainBundle]pathForResource:@&quot;iphone&quot; ofType:@&quot;mp4&quot;]; NSURL *url = [NSURL fileURLWithPath:path]; AVPlayerViewController * play = [[AVPlayerViewController alloc]init]; play.player = [[AVPlayer alloc]initWithURL:url]; [self presentViewController:play animated:YES completion:nil]; è¿è¡Œå·¥ç¨‹ï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹å›¾æ‰€ç¤ºçš„è§†é¢‘æ’­æ”¾ç•Œé¢ï¼š AVPlayerViewControllerä¸­è¿˜æœ‰å¦‚ä¸‹å±æ€§å’Œæ–¹æ³•æä¾›ç»™å¼€å‘è€…ä½¿ç”¨ï¼š 1234567891011121314151617181920//æ˜¯å¦æ˜¾ç¤ºè§†é¢‘æ’­æ”¾æ§åˆ¶æ§ä»¶@property (nonatomic) BOOL showsPlaybackControls;//è®¾ç½®è§†é¢‘æ’­æ”¾ç•Œé¢çš„å°ºå¯¸ç¼©æ”¾é€‰é¡¹/*å¯ä»¥è®¾ç½®çš„å€¼åŠæ„ä¹‰å¦‚ä¸‹ï¼šAVLayerVideoGravityResizeAspect ä¸è¿›è¡Œæ¯”ä¾‹ç¼©æ”¾ ä»¥å®½é«˜ä¸­é•¿çš„ä¸€è¾¹å……æ»¡ä¸ºåŸºå‡†AVLayerVideoGravityResizeAspectFill ä¸è¿›è¡Œæ¯”ä¾‹ç¼©æ”¾ ä»¥å®½é«˜ä¸­çŸ­çš„ä¸€è¾¹å……æ»¡ä¸ºåŸºå‡†AVLayerVideoGravityResize è¿›è¡Œç¼©æ”¾å……æ»¡å±å¹•*/@property (nonatomic, copy) NSString *videoGravity;//è·å–æ˜¯å¦å·²ç»å‡†å¤‡å¥½å¼€å§‹æ’­æ”¾@property (nonatomic, readonly, getter = isReadyForDisplay) BOOL readyForDisplay;//è·å–è§†é¢‘æ’­æ”¾ç•Œé¢çš„å°ºå¯¸@property (nonatomic, readonly) CGRect videoBounds;//è§†é¢‘æ’­æ”¾å™¨çš„è§†å›¾ è‡ªå®šä¹‰çš„æ§ä»¶å¯ä»¥æ·»åŠ åœ¨å…¶ä¸Š@property (nonatomic, readonly, nullable) UIView *contentOverlayView;//ç”»ä¸­ç”»ä»£ç† iOS9åå¯ç”¨@property (nonatomic, weak, nullable) id &lt;AVPlayerViewControllerDelegate&gt; delegate NS_AVAILABLE_IOS(9_0);//æ˜¯å¦æ”¯æŒç”»ä¸­ç”» iOS9åå¯ç”¨ é»˜è®¤æ”¯æŒ@property (nonatomic) BOOL allowsPictureInPicturePlayback NS_AVAILABLE_IOS(9_0); ä¸‰ã€ç”»ä¸­ç”»ç¼–ç¨‹æŠ€æœ¯åº”ç”¨AVPlayerViewControlleræ˜¯é»˜è®¤æ”¯æŒç”»ä¸­ç”»æ“ä½œçš„ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œè§†é¢‘çš„æ’­æ”¾ç•Œé¢å³ä¸‹è§’å‡ºç°ä¸€ä¸ªç”»ä¸­ç”»çš„æŒ‰é’®ï¼Œç‚¹å‡»è¿™ä¸ªæŒ‰é’®å½“å‰æ’­æ”¾çš„è§†é¢‘ç•Œé¢ä¼šç¼©å°æ˜¾ç¤ºåœ¨å±å¹•è§’è½ï¼Œè¿™æ—¶ç‚¹å‡»Homeé”®å›åˆ°ä¸»ç•Œé¢ï¼Œæˆ–è€…åˆ‡æ¢åˆ°å…¶ä»–åº”ç”¨ç¨‹åºï¼Œè§†é¢‘æ’­æ”¾ä¸ä¼šä¸­æ–­ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¸¤æŒ‡çš„æåˆæ“ä½œå¯ä»¥å°†ç¼©å°çš„è§†é¢‘æ’­æ”¾çª—å£è¿›è¡Œä»»æ„å°ºå¯¸çš„æ”¾å¤§ï¼Œå¦‚æœå°†è§†é¢‘çª—å£æ‹–è¿›å±å¹•çš„è¾¹ç•Œï¼Œè§†é¢‘çª—å£ä¼šè¢«å¸è¿›è¾¹ç•Œï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡æ‹–æ‹½æ‰‹åŠ¿å°†å…¶æ‹‰å‡ºï¼Œå¦‚ä¸‹å›¾ï¼š AVPlayerViewControllerDelegateä¸­çš„æ–¹æ³•å¯ä»¥å¯¹ç”¨æˆ·ç”»ä¸­ç”»çš„æ“ä½œè¿›è¡Œç›‘å¬ï¼š 12345678910111213141516171819202122//å°†è¦å¼€å§‹ç”»ä¸­ç”»æ—¶è°ƒç”¨çš„æ–¹æ³•- (void)playerViewControllerWillStartPictureInPicture:(AVPlayerViewController *)playerViewController&#123;&#125;//å·²ç»å¼€å§‹ç”»ä¸­ç”»æ—¶è°ƒç”¨çš„æ–¹æ³•- (void)playerViewControllerDidStartPictureInPicture:(AVPlayerViewController *)playerViewController&#123;&#125;//å¼€å§‹ç”»ä¸­ç”»å¤±è´¥è°ƒç”¨çš„æ–¹æ³•- (void)playerViewController:(AVPlayerViewController *)playerViewController failedToStartPictureInPictureWithError:(NSError *)error&#123;&#125;//å°†è¦åœæ­¢ç”»ä¸­ç”»æ—¶è°ƒç”¨çš„æ–¹æ³•- (void)playerViewControllerWillStopPictureInPicture:(AVPlayerViewController *)playerViewController&#123;&#125;//å·²ç»åœæ­¢ç”»ä¸­ç”»æ—¶è°ƒç”¨çš„æ–¹æ³•- (void)playerViewControllerDidStopPictureInPicture:(AVPlayerViewController *)playerViewController&#123;&#125;//æ˜¯å¦åœ¨å¼€å§‹ç”»ä¸­ç”»æ—¶è‡ªåŠ¨å°†å½“å‰çš„æ’­æ”¾ç•Œé¢dismissæ‰ è¿”å›YESåˆ™è‡ªåŠ¨dismiss è¿”å›NOåˆ™ä¸ä¼šè‡ªåŠ¨dismiss- (BOOL)playerViewControllerShouldAutomaticallyDismissAtPictureInPictureStart:(AVPlayerViewController *)playerViewController&#123; return YES;&#125;//ç”¨æˆ·ç‚¹å‡»è¿˜åŸæŒ‰é’® ä»ç”»ä¸­ç”»æ¨¡å¼è¿˜åŸå›appå†…åµŒæ¨¡å¼æ—¶è°ƒç”¨çš„æ–¹æ³•- (void)playerViewController:(AVPlayerViewController *)playerViewController restoreUserInterfaceForPictureInPictureStopWithCompletionHandler:(void (^)(BOOL restored))completionHandler&#123;&#125; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSç½‘ç»œç¼–ç¨‹ä¹‹å››â€”â€”è¯·æ±‚ç±»NSURLRequestä½¿ç”¨è¯¦è§£","slug":"179iOSç½‘ç»œç¼–ç¨‹ä¹‹å››â€”â€”è¯·æ±‚ç±»NSURLRequestä½¿ç”¨è¯¦è§£","date":"2016-02-23T16:00:00.000Z","updated":"2021-07-06T07:04:51.574Z","comments":true,"path":"2016/02/24/179iOSç½‘ç»œç¼–ç¨‹ä¹‹å››â€”â€”è¯·æ±‚ç±»NSURLRequestä½¿ç”¨è¯¦è§£/","link":"","permalink":"http://huishao.cc/2016/02/24/179iOSç½‘ç»œç¼–ç¨‹ä¹‹å››â€”â€”è¯·æ±‚ç±»NSURLRequestä½¿ç”¨è¯¦è§£/","excerpt":"","text":"iOSç½‘ç»œç¼–ç¨‹ä¹‹å››â€”â€”è¯·æ±‚ç±»NSURLRequestä½¿ç”¨è¯¦è§£ä¸€ã€å¼•è¨€åœ¨å‰é¢å‡ ç¯‡åšå®¢ä¸­ï¼Œä»‹ç»äº†iOSå¼€å‘ä¸­çš„ç½‘ç»œç¼–ç¨‹ç›¸å…³å†…å®¹å¹¶ä¸”ä»‹ç»äº†å¸¸ç”¨äº†ä¸¤ä¸ªå¹³è¡Œçš„ç½‘ç»œæ¡†æ¶NSURLSessionå’ŒNSURLConnectionã€‚æ— è®ºæ˜¯NSURLSessionç±»è¿˜æ˜¯NSURLConnectionç±»ï¼Œå…¶ç½‘ç»œè¯·æ±‚éƒ½æ˜¯é€šè¿‡NSURLRequestç±»è¿›è¡Œå‘èµ·çš„ï¼Œæœ¬ç¯‡åšå®¢å°†ä»‹ç»NSURLRequestç±»çš„ç”¨æ³•å’Œå…¶ä¸­è¯·æ±‚å±æ€§çš„è®¾ç½®ã€‚ å‰å‡ ç¯‡åšå®¢åœ°å€å¦‚ä¸‹ï¼š 1.iOSç½‘ç»œæ¡†æ¶ä»‹ç»ï¼šhttp://my.oschina.net/u/2340880/blog/618460ã€‚ 2.NSURLSesstionçš„ä½¿ç”¨ï¼šhttp://my.oschina.net/u/2340880/blog/618888ã€‚ 3.NSURLConnectionçš„ä½¿ç”¨ï¼šhttp://my.oschina.net/u/2340880/blog/618920ã€‚ äºŒã€NSURLRequestç±»ä¸­å¸¸ç”¨æ–¹æ³•å’Œå±æ€§æ€»ç»“12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455//é€šè¿‡ç±»æ–¹æ³•åˆ›å»ºé»˜è®¤çš„è¯·æ±‚å¯¹è±¡/*é€šè¿‡è¿™ç§æ–¹å¼åˆ›å»ºçš„è¯·æ±‚å¯¹è±¡ é»˜è®¤ä½¿ç”¨NSURLRequestUseProtocolCachePolicyç¼“å­˜é€»è¾‘ é»˜è®¤è¯·æ±‚è¶…æ—¶æ—¶é™ä¸º60s*/+ (instancetype)requestWithURL:(NSURL *)URL;//è¿”å›ä¸€ä¸ªBOOLå€¼ ç”¨äºåˆ¤æ–­æ˜¯å¦æ”¯æŒå®‰å…¨ç¼–ç + (BOOL)supportsSecureCoding;//è¯·æ±‚å¯¹è±¡çš„åˆå§‹åŒ–æ–¹æ³• åˆ›å»ºæ—¶è®¾ç½®ç¼“å­˜é€»è¾‘å’Œè¶…æ—¶æ—¶é™+ (instancetype)requestWithURL:(NSURL *)URL cachePolicy:(NSURLRequestCachePolicy)cachePolicy timeoutInterval:(NSTimeInterval)timeoutInterval;//initæ–¹æ³•è¿›è¡Œå¯¹è±¡çš„åˆ›å»º é»˜è®¤ä½¿ç”¨NSURLRequestUseProtocolCachePolicyç¼“å­˜é€»è¾‘ é»˜è®¤è¯·æ±‚è¶…æ—¶æ—¶é™ä¸º60s- (instancetype)initWithURL:(NSURL *)URL;//initæ–¹æ³•è¿›è¡Œå¯¹è±¡çš„åˆ›å»º- (instancetype)initWithURL:(NSURL *)URL cachePolicy:(NSURLRequestCachePolicy)cachePolicy timeoutInterval:(NSTimeInterval)timeoutInterval;//åªè¯»å±æ€§ è·å–è¯·æ±‚å¯¹è±¡çš„URL@property (nullable, readonly, copy) NSURL *URL;//åªè¯»å±æ€§ ç¼“å­˜ç­–ç•¥æšä¸¾/*NSURLRequestCachePolicyæšä¸¾å¦‚ä¸‹ï¼štypedef NS_ENUM(NSUInteger, NSURLRequestCachePolicy)&#123; //é»˜è®¤çš„ç¼“å­˜åè®® NSURLRequestUseProtocolCachePolicy = 0, //æ— è®ºæœ‰æ— æœ¬åœ°ç¼“å­˜æ•°æ® éƒ½è¿›è¡Œä»æ–°è¯·æ±‚ NSURLRequestReloadIgnoringLocalCacheData = 1, //å¿½ç•¥æœ¬åœ°å’Œè¿œç¨‹çš„ç¼“å­˜æ•°æ® æœªå®ç°çš„ç­–ç•¥ NSURLRequestReloadIgnoringLocalAndRemoteCacheData = 4, //æ— è®ºæœ‰æ— ç¼“å­˜æ•°æ® éƒ½è¿›è¡Œä»æ–°è¯·æ±‚ NSURLRequestReloadIgnoringCacheData = NSURLRequestReloadIgnoringLocalCacheData, //å…ˆæ£€æŸ¥ç¼“å­˜ å¦‚æœæ²¡æœ‰ç¼“å­˜å†è¿›è¡Œè¯·æ±‚ NSURLRequestReturnCacheDataElseLoad = 2, //ç±»ä¼¼ç¦»çº¿æ¨¡å¼ï¼Œåªè¯»ç¼“å­˜ æ— è®ºæœ‰æ— ç¼“å­˜éƒ½ä¸è¿›è¡Œè¯·æ±‚ NSURLRequestReturnCacheDataDontLoad = 3, //æœªå®ç°çš„ç­–ç•¥ NSURLRequestReloadRevalidatingCacheData = 5, // Unimplemented&#125;;*/@property (readonly) NSURLRequestCachePolicy cachePolicy;//åªè¯»å±æ€§ è·å–è¯·æ±‚çš„è¶…æ—¶æ—¶é™@property (readonly) NSTimeInterval timeoutInterval;//è¯·æ±‚ä¸»æ–‡æ¡£åœ°å€ @property (nullable, readonly, copy) NSURL *mainDocumentURL;//è·å–ç½‘ç»œè¯·æ±‚çš„æœåŠ¡ç±»å‹ æšä¸¾å¦‚ä¸‹/*typedef NS_ENUM(NSUInteger, NSURLRequestNetworkServiceType)&#123; NSURLNetworkServiceTypeDefault = 0, // Standard internet traffic NSURLNetworkServiceTypeVoIP = 1, // Voice over IP control traffic NSURLNetworkServiceTypeVideo = 2, // Video traffic NSURLNetworkServiceTypeBackground = 3, // Background traffic NSURLNetworkServiceTypeVoice = 4 // Voice data&#125;;*/@property (readonly) NSURLRequestNetworkServiceType networkServiceType;//è·å–æ˜¯å¦å…è®¸ä½¿ç”¨æœåŠ¡å•†èœ‚çªç½‘ç»œ@property (readonly) BOOL allowsCellularAccess; NSURLRequestè¯·æ±‚ç±»é™¤äº†åœ¨åˆå§‹åŒ–æ—¶å¯ä»¥è®¾å®šä¸€äº›å±æ€§ï¼Œåˆ›å»ºå‡ºæ¥ååˆ™å¤§éƒ¨åˆ†å±æ€§éƒ½ä¸ºåªè¯»çš„ï¼Œæ— æ³•è®¾ç½®ä¸ä¿®æ”¹ã€‚å¦ä¸€ä¸ªç±»NSMutableURLRequestå¯ä»¥æ›´åŠ çµæ´»çš„è®¾ç½®è¯·æ±‚çš„ç›¸å…³å±æ€§ã€‚ ä¸‰ã€NSMutableURLRequestç±»ä¸­å¸¸ç”¨æ–¹æ³•ä¸å±æ€§æ€»ç»“123456789101112//è®¾ç½®è¯·æ±‚çš„URL@property (nullable, copy) NSURL *URL;//è®¾ç½®è¯·æ±‚çš„ç¼“å­˜ç­–ç•¥@property NSURLRequestCachePolicy cachePolicy;//è®¾ç½®è¶…æ—¶æ—¶é—´@property NSTimeInterval timeoutInterval;//è¯·æ±‚ä¸»æ–‡æ¡£åœ°å€@property (nullable, copy) NSURL *mainDocumentURL;//è®¾ç½®ç½‘ç»œæœåŠ¡ç±»å‹@property NSURLRequestNetworkServiceType networkServiceType NS_AVAILABLE(10_7, 4_0);//è®¾ç½®æ˜¯å¦å…è®¸ä½¿ç”¨æœåŠ¡å•†èœ‚çªç½‘@property BOOL allowsCellularAccess NS_AVAILABLE(10_8, 6_0); å››ã€NSURLRequestè¯·æ±‚å¯¹è±¡ä¸HTTP/HTTPSåè®®ç›¸å…³è¯·æ±‚çš„å±æ€§è®¾ç½®ä¸€ä¸‹å±æ€§çš„è®¾ç½®å¿…é¡»ä½¿ç”¨NSMutableURLRequestç±»ï¼Œå¦‚æœæ˜¯NSURLRequestï¼Œåˆ™åªå¯ä»¥è¯»ï¼Œä¸å¯ä»¥ä¿®æ”¹ã€‚ 12345678910111213141516//è®¾ç½®HPPTè¯·æ±‚æ–¹å¼ é»˜è®¤ä¸ºâ€œGETâ€@property (copy) NSString *HTTPMethod;//é€šè¿‡å­—å…¸è®¾ç½®HTTPè¯·æ±‚å¤´çš„é”®å€¼æ•°æ®@property (nullable, copy) NSDictionary&lt;NSString *, NSString *&gt; *allHTTPHeaderFields;//è®¾ç½®httpè¯·æ±‚å¤´ä¸­çš„å­—æ®µå€¼- (void)setValue:(nullable NSString *)value forHTTPHeaderField:(NSString *)field;//å‘httpè¯·æ±‚å¤´ä¸­æ·»åŠ ä¸€ä¸ªå­—æ®µ- (void)addValue:(NSString *)value forHTTPHeaderField:(NSString *)field;//è®¾ç½®httpè¯·æ±‚ä½“ ç”¨äºPOSTè¯·æ±‚@property (nullable, copy) NSData *HTTPBody;//è®¾ç½®httpè¯·æ±‚ä½“çš„è¾“å…¥æµ@property (nullable, retain) NSInputStream *HTTPBodyStream;//è®¾ç½®å‘é€è¯·æ±‚æ—¶æ˜¯å¦å‘é€cookieæ•°æ®@property BOOL HTTPShouldHandleCookies;//è®¾ç½®è¯·æ±‚æ—¶æ˜¯å¦æŒ‰é¡ºåºæ”¶å‘ é»˜è®¤ç¦ç”¨ åœ¨æŸäº›æœåŠ¡å™¨ä¸­è®¾ä¸ºYESå¯ä»¥æé«˜ç½‘ç»œæ€§èƒ½@property BOOL HTTPShouldUsePipelining; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSåº”ç”¨å†…è·³è½¬ç³»ç»Ÿè®¾ç½®ç›¸å…³ç•Œé¢çš„æ–¹æ³•","slug":"178iOSåº”ç”¨å†…è·³è½¬ç³»ç»Ÿè®¾ç½®ç›¸å…³ç•Œé¢çš„æ–¹æ³•","date":"2016-02-22T16:00:00.000Z","updated":"2021-07-06T07:04:07.525Z","comments":true,"path":"2016/02/23/178iOSåº”ç”¨å†…è·³è½¬ç³»ç»Ÿè®¾ç½®ç›¸å…³ç•Œé¢çš„æ–¹æ³•/","link":"","permalink":"http://huishao.cc/2016/02/23/178iOSåº”ç”¨å†…è·³è½¬ç³»ç»Ÿè®¾ç½®ç›¸å…³ç•Œé¢çš„æ–¹æ³•/","excerpt":"","text":"iOSåº”ç”¨å†…è·³è½¬ç³»ç»Ÿè®¾ç½®ç›¸å…³ç•Œé¢çš„æ–¹æ³•åœ¨iOSå¼€å‘ä¸­ï¼Œæœ‰æ—¶ä¼šæœ‰è·³è½¬ç³»ç»Ÿè®¾ç½®ç•Œé¢çš„éœ€æ±‚ï¼Œä¾‹å¦‚æç¤ºç”¨æˆ·æ‰“å¼€è“ç‰™æˆ–è€…WIFIï¼Œæé†’ç”¨æˆ·æ‰“å¼€æ¨é€æˆ–è€…ä½ç½®æƒé™ç­‰ã€‚åœ¨iOS6ä¹‹åï¼Œç¬¬ä¸‰æ–¹åº”ç”¨éœ€è¦è·³è½¬ç³»ç»Ÿè®¾ç½®ç•Œé¢ï¼Œéœ€è¦åœ¨URL typeä¸­æ·»åŠ ä¸€ä¸ªprefså€¼ï¼Œå¦‚ä¸‹å›¾ï¼š è·³è½¬ç³»ç»Ÿè®¾ç½®æ ¹ç›®å½•ä¸­çš„é¡¹ç›®ä½¿ç”¨å¦‚ä¸‹çš„æ–¹æ³•ï¼š 123456789101112131415161718 _array = @[ @&#123;@&quot;ç³»ç»Ÿè®¾ç½®&quot;:@&quot;prefs:root=INTERNET_TETHERING&quot;&#125;, @&#123;@&quot;WIFIè®¾ç½®&quot;:@&quot;prefs:root=WIFI&quot;&#125;, @&#123;@&quot;è“ç‰™è®¾ç½®&quot;:@&quot;prefs:root=Bluetooth&quot;&#125;, @&#123;@&quot;ç³»ç»Ÿé€šçŸ¥&quot;:@&quot;prefs:root=NOTIFICATIONS_ID&quot;&#125;, @&#123;@&quot;é€šç”¨è®¾ç½®&quot;:@&quot;prefs:root=General&quot;&#125;, @&#123;@&quot;æ˜¾ç¤ºè®¾ç½®&quot;:@&quot;prefs:root=DISPLAY&amp;BRIGHTNESS&quot;&#125;, @&#123;@&quot;å£çº¸è®¾ç½®&quot;:@&quot;prefs:root=Wallpaper&quot;&#125;, @&#123;@&quot;å£°éŸ³è®¾ç½®&quot;:@&quot;prefs:root=Sounds&quot;&#125;, @&#123;@&quot;éšç§è®¾ç½®&quot;:@&quot;prefs:root=privacy&quot;&#125;, @&#123;@&quot;APP Store&quot;:@&quot;prefs:root=STORE&quot;&#125;, @&#123;@&quot;Notes&quot;:@&quot;prefs:root=NOTES&quot;&#125;, @&#123;@&quot;Safari&quot;:@&quot;prefs:root=Safari&quot;&#125;, @&#123;@&quot;Music&quot;:@&quot;prefs:root=MUSIC&quot;&#125;, @&#123;@&quot;photo&quot;:@&quot;prefs:root=Photos&quot;&#125; ]; NSURL * url = [NSURL URLWithString:[_array[index] allValues].firstObject]; [[UIApplication sharedApplication]openURL:url]; å¦‚æœè¦è·³è½¬ç¬¬ä¸‰æ–¹åº”ç”¨çš„è®¾ç½®ç•Œé¢ä¸­ï¼Œä½¿ç”¨prefs:root=boundleIdçš„æ–¹å¼ï¼ŒboundleIdæ˜¯ç¬¬ä¸‰æ–¹åº”ç”¨çš„boundleIdã€‚ å¦‚æœéœ€è¦ç»§ç»­å‘é¡¹ç›®å†…å±‚è¿›è¡Œè·³è½¬ï¼Œå¯ä»¥é€šè¿‡æ·»åŠ pathè·¯å¾„çš„æ–¹å¼ï¼Œå¦‚ä¸‹ï¼š 1234567891011121314 _array = @[ @&#123;@&quot;å…³äºæœ¬æœº&quot;:@&quot;prefs:root=General&amp;path=About&quot;&#125;, @&#123;@&quot;è½¯ä»¶å‡çº§&quot;:@&quot;prefs:root=General&amp;path=SOFTWARE_UPDATE_LINK&quot;&#125;, @&#123;@&quot;æ—¥æœŸæ—¶é—´&quot;:@&quot;prefs:root=General&amp;path=DATE_AND_TIME&quot;&#125;, @&#123;@&quot;Accessibility&quot;:@&quot;prefs:root=General&amp;path=ACCESSIBILITY&quot;&#125;, @&#123;@&quot;é”®ç›˜è®¾ç½®&quot;:@&quot;prefs:root=General&amp;path=Keyboard&quot;&#125;, @&#123;@&quot;VPN&quot;:@&quot;prefs:root=General&amp;path=VPN&quot;&#125;, @&#123;@&quot;å£çº¸è®¾ç½®&quot;:@&quot;prefs:root=Wallpaper&quot;&#125;, @&#123;@&quot;å£°éŸ³è®¾ç½®&quot;:@&quot;prefs:root=Sounds&quot;&#125;, @&#123;@&quot;éšç§è®¾ç½®&quot;:@&quot;prefs:root=privacy&quot;&#125;, @&#123;@&quot;APP Store&quot;:@&quot;prefs:root=STORE&quot;&#125;, @&#123;@&quot;è¿˜åŸè®¾ç½®&quot;:@&quot;prefs:root=General&amp;path=Reset&quot;&#125;, @&#123;@&quot;åº”ç”¨é€šçŸ¥&quot;:@&quot;prefs:root=NOTIFICATIONS_ID&amp;path=åº”ç”¨çš„boundleId&quot;&#125; ]; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSç½‘ç»œç¼–ç¨‹ä¹‹ä¸‰â€”â€”NSURLConnectionçš„ç®€å•ä½¿ç”¨","slug":"177iOSç½‘ç»œç¼–ç¨‹ä¹‹ä¸‰â€”â€”NSURLConnectionçš„ç®€å•ä½¿ç”¨","date":"2016-02-21T16:00:00.000Z","updated":"2021-07-06T07:03:17.566Z","comments":true,"path":"2016/02/22/177iOSç½‘ç»œç¼–ç¨‹ä¹‹ä¸‰â€”â€”NSURLConnectionçš„ç®€å•ä½¿ç”¨/","link":"","permalink":"http://huishao.cc/2016/02/22/177iOSç½‘ç»œç¼–ç¨‹ä¹‹ä¸‰â€”â€”NSURLConnectionçš„ç®€å•ä½¿ç”¨/","excerpt":"","text":"iOSç½‘ç»œç¼–ç¨‹ä¹‹ä¸‰â€”â€”NSURLConnectionçš„ç®€å•ä½¿ç”¨ä¸€ã€å¼•è¨€åœ¨iOS7åï¼ŒNSURLSessionåŸºæœ¬ä»£æ›¿äº†NSURLConnectionè¿›è¡Œç½‘ç»œå¼€å‘ï¼Œåœ¨iOS9åï¼ŒNSURLConnectionç›¸å…³æ–¹æ³•è¢«å®Œå…¨çš„å¼ƒç”¨ï¼ŒiOSç³»ç»Ÿæœ‰å‘ä¸‹å…¼å®¹çš„ç‰¹æ€§ï¼Œå°½ç®¡NSURLConnectionå·²ç»è¢«å¼ƒç”¨ï¼Œä½†åœ¨å¼€å‘ä¸­ï¼Œå…¶æ–¹æ³•ä¾ç„¶å¯ä»¥è¢«ä½¿ç”¨ï¼Œå¹¶ä¸”å¦‚æœéœ€è¦å…¼å®¹åˆ°å¾ˆä½ç‰ˆæœ¬çš„iOSç³»ç»Ÿï¼Œæœ‰æ—¶å°±å¿…é¡»ä½¿ç”¨NSURLConnectionç±»äº†ã€‚ äºŒã€ä½¿ç”¨NSURLConnectionè¿›è¡ŒåŒæ­¥è¯·æ±‚å¯¹äºç½‘ç»œè¯·æ±‚åˆ†ä¸ºåŒæ­¥å’Œå¼‚æ­¥ä¸¤ç§ï¼ŒåŒæ­¥æ˜¯æŒ‡åœ¨è¯·æ±‚ç»“æœè¿”å›ä¹‹å‰ï¼Œç¨‹åºä»£ç ä¼šå¡åœ¨è¯·æ±‚å¤„ï¼Œä¹‹åçš„ä»£ç ä¸ä¼šè¢«æ‰§è¡Œï¼Œå¼‚æ­¥æ˜¯æŒ‡åœ¨å‘é€è¯·æ±‚ä¹‹åï¼Œä¸€è¾¹åœ¨å­çº¿ç¨‹ä¸­æ¥æ”¶è¿”å›æ•°æ®ï¼Œä¸€è¾¹æ‰§è¡Œä¹‹åçš„ä»£ç ï¼Œå½“è¿”å›æ•°æ®æ¥æ”¶å®Œæ¯•åï¼Œé‡‡ç”¨å›è°ƒçš„æ–¹å¼é€šçŸ¥ä¸»çº¿ç¨‹åšå¤„ç†ã€‚ ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•è¿›è¡ŒNSURLConnectionçš„åŒæ­¥è¯·æ±‚ï¼š 12345 NSURL * url = [NSURL URLWithString:@&quot;http://www.baidu.com&quot;]; NSURLRequest * request = [NSURLRequest requestWithURL:url]; NSData * data = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil]; NSLog(@&quot;%@&quot;,data); NSLog(@&quot;ç»§ç»­æ‰§è¡Œ&quot;); æ‰“å°ä¿¡æ¯å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä»ä¸­å¯ä»¥çœ‹å‡ºï¼Œå½“æ•°æ®è¿”å›ç»“æŸæ—¶æ‰æ‰§è¡Œåé¢çš„ä»£ç ï¼š ä¸‰ã€ä½¿ç”¨NSURLConnectionè¿›è¡Œå¼‚æ­¥è¯·æ±‚ä½¿ç”¨åŒæ­¥çš„æ–¹å¼è¿›è¡Œè¯·æ±‚æœ‰ä¸€ä¸ªå¾ˆå¤§çš„å¼Šç«¯ï¼Œåœ¨è¿›è¡Œç½‘ç»œè¯·æ±‚æ—¶ï¼Œæ•°æ®çš„è¿”å›å¾€å¾€éœ€è¦ä¸€å®šæ—¶é—´ï¼Œä¸å¯èƒ½ç¬é—´å®Œæˆï¼Œä½¿ç”¨åŒæ­¥çš„æ–¹å¼å°†å¯¼è‡´ç•Œé¢å¡æ­»ï¼Œæ²¡æœ‰æç¤ºä¹Ÿä¸èƒ½äº¤äº’ä»»ä½•ç”¨æˆ·æ“ä½œï¼Œè¿™æ ·çš„è¯ï¼Œå¾ˆæœ‰å¯èƒ½ä¼šç»™ç”¨æˆ·ç¨‹åºå¡æ­»çš„å‡è±¡ã€‚ NSURLConnectionç±»æä¾›ä¸¤ç§æ–¹å¼è¿›è¡Œå¼‚æ­¥è¯·æ±‚æ“ä½œã€‚ 1.ä½¿ç”¨blockçš„æ–¹å¼è¿›è¡Œå¼‚æ­¥è¯·æ±‚ä½¿ç”¨å¦‚ä¸‹ä»£ç è¿›è¡Œblockæ–¹å¼çš„å¼‚æ­¥è¯·æ±‚ï¼Œåœ¨blockä¸­ä¼šä¼ å…¥è¯·æ±‚åˆ°çš„è¿”å›æ•°æ®å’Œæ•°æ®ä¿¡æ¯ç­‰å‚æ•°ï¼š 1234567 NSURL * url = [NSURL URLWithString:@&quot;http://www.baidu.com&quot;]; NSURLRequest * request = [NSURLRequest requestWithURL:url]; //å…¶ä¸­çš„queueå‚æ•°å†³å®šblockä¸­çš„ä»£ç åœ¨å“ªä¸ªé˜Ÿåˆ—ä¸­æ‰§è¡Œ [NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse * _Nullable response, NSData * _Nullable data, NSError * _Nullable connectionError) &#123; NSLog(@&quot;%@&quot;,data); &#125;]; NSLog(@&quot;ç»§ç»­æ‰§è¡Œ&quot;); 2.ä½¿ç”¨ä»£ç†å›è°ƒçš„å¼‚æ­¥è¯·æ±‚æ–¹å¼é¦–å…ˆéµå®ˆåè®®ä¸ç”Ÿå‘½ä¸€ä¸ªå¯å˜çš„NSDataç”¨äºæ¥æ”¶æ•°æ®ï¼š 12345@interface ViewController ()&lt;NSURLConnectionDataDelegate&gt;&#123; NSMutableData * _data;&#125;@end ä½¿ç”¨å¦‚ä¸‹çš„ä»£ç è¿›è¡Œè¯·æ±‚ï¼š 1234 _data = [[NSMutableData alloc]init]; NSURL * url = [NSURL URLWithString:@&quot;http://www.baidu.com&quot;]; NSURLRequest * request = [NSURLRequest requestWithURL:url]; [NSURLConnection connectionWithRequest:request delegate:self]; è¯·æ±‚å‘å‡ºåï¼Œä¼šä¸€æ¬¡è°ƒç”¨å¦‚ä¸‹ä»£ç†æ–¹æ³•è¿›è¡Œè¯·æ±‚è¿‡ç¨‹çš„ç›‘å¬å’Œæ•°æ®çš„è·å–ï¼š 12345678910111213141516-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response&#123; //å¼€å§‹æ¥æ”¶æ•°æ® [_data setLength:0];&#125;-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data&#123; //æ­£åœ¨æ¥æ”¶æ•°æ® [_data appendData:data];&#125;-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error&#123; //æ¥æ”¶æ•°æ®å¤±è´¥ NSLog(@&quot;%@&quot;,error);&#125;-(void)connectionDidFinishLoading:(NSURLConnection *)connection&#123; //æ¥æ”¶æ•°æ®å®Œæˆ NSLog(@&quot;%@&quot;,_data);&#125; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSç½‘ç»œç¼–ç¨‹ä¹‹äºŒâ€”â€”NSURLSessionçš„ç®€å•ä½¿ç”¨","slug":"176iOSç½‘ç»œç¼–ç¨‹ä¹‹äºŒâ€”â€”NSURLSessionçš„ç®€å•ä½¿ç”¨","date":"2016-02-21T16:00:00.000Z","updated":"2021-07-06T07:01:57.767Z","comments":true,"path":"2016/02/22/176iOSç½‘ç»œç¼–ç¨‹ä¹‹äºŒâ€”â€”NSURLSessionçš„ç®€å•ä½¿ç”¨/","link":"","permalink":"http://huishao.cc/2016/02/22/176iOSç½‘ç»œç¼–ç¨‹ä¹‹äºŒâ€”â€”NSURLSessionçš„ç®€å•ä½¿ç”¨/","excerpt":"","text":"iOSç½‘ç»œç¼–ç¨‹ä¹‹äºŒâ€”â€”NSURLSessionçš„ç®€å•ä½¿ç”¨ä¸€ã€NSURLSessionç®€ä»‹åœ¨iOS7ä¹‹åï¼ŒNSURLSessionä½œä¸ºç³»ç»Ÿæ¨èä½¿ç”¨çš„HTTPè¯·æ±‚æ¡†æ¶ï¼Œåœ¨è¿›è¡Œå‰å°è¯·æ±‚çš„æƒ…å†µä¸‹ï¼ŒNSURLSessionä¸NSURLConnectionå¹¶æ— å¤ªå¤§å·®å¼‚ï¼Œå¯¹äºåå°çš„è¯·æ±‚ï¼ŒNSURLSessionæ›´åŠ çµæ´»çš„ä¼˜åŠ¿å°±å°†å±•ç°æ— é—ã€‚ 1.NSURLSessioné›†åˆçš„ç±»å‹NSURLSessionç±»æä¾›3ä¸­Sessionç±»å‹ï¼š Defaultç±»å‹ï¼šæä¾›å‰å°è¯·æ±‚ç›¸å…³æ–¹æ³•ï¼Œæ”¯æŒé…ç½®ç¼“å­˜ï¼Œèº«ä»½å‡­è¯ç­‰ã€‚ Ephemeralç±»å‹ï¼šå³æ—¶çš„è¯·æ±‚ç±»å‹ï¼Œä¸ä½¿ç”¨ç¼“å­˜ï¼Œèº«ä»½å‡­è¯ç­‰ã€‚ Backgroundï¼šåå°ç±»å‹ï¼Œæ”¯æŒåœ¨åå°å®Œæˆè¯·æ±‚ä»»åŠ¡ã€‚ 2.NSURLSessionä»»åŠ¡çš„ç±»å‹åœ¨NSURLSessionä¸­æ·»åŠ çš„è¯·æ±‚ä»»åŠ¡æ”¯æŒ3ä¸­ç±»å‹ï¼š æ•°æ®ä»»åŠ¡ï¼šä½¿ç”¨NSDataå¯¹è±¡è¿›è¡Œæ•°æ®çš„å‘é€å’Œè·å–ï¼Œä¸€èˆ¬ç”¨äºçŸ­æ•°æ®çš„ä»»åŠ¡ã€‚ ä¸‹è½½ä»»åŠ¡ï¼šä»æ–‡ä»¶ä¸‹è½½æ•°æ®ï¼Œæ”¯æŒåå°ä¸‹è½½ã€‚ ä¸Šä¼ ä»»åŠ¡ï¼šä»¥æ–‡ä»¶çš„å½¢å¼ä¸Šä¼ æ•°æ®ï¼Œæ”¯æŒåå°ä¸Šä¼ ã€‚ äºŒã€åˆ›å»ºå¹¶é…ç½®NSURLSessioné€šè¿‡NSURLSessionConfigurationç±»å¯¹è±¡å¯¹NSURLSessionè¿›è¡Œé…ç½®ä¸åˆ›å»ºï¼Œåˆ›å»ºå’Œé…NSURLSessionçš„ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567891011 //é»˜è®¤ç±»å‹çš„ NSURLSessionConfiguration * defaultConfiguration = [NSURLSessionConfiguration defaultSessionConfiguration]; //å³æ—¶ç±»å‹çš„ NSURLSessionConfiguration * ephemeralConfiguration = [NSURLSessionConfiguration ephemeralSessionConfiguration]; //åå°ç±»å‹çš„ NSURLSessionConfiguration * backgroundConfiguration = [NSURLSessionConfiguration backgroundSessionConfigurationWithIdentifier:@&quot;SessionId&quot;]; //åˆ›å»ºå¹¶è®¾ç½®session NSURLSession * defaultSession = [NSURLSession sessionWithConfiguration:defaultConfiguration]; NSURLSession * ephemeralSession = [NSURLSession sessionWithConfiguration:ephemeralConfiguration]; NSURLSession * backgroundSession = [NSURLSession sessionWithConfiguration:backgroundConfiguration]; NSURLSessionConfigurationè¿˜å¯ä»¥é…ç½®å¦‚ç¼“å­˜ï¼Œç½‘ç»œæ¨¡å¼ç­‰å‚æ•° ä¸‰ã€ä½¿ç”¨NSURLSessionè¿›è¡Œç½‘ç»œè¯·æ±‚çš„ä¸¤ç§æ–¹å¼NSURLSessionæœ‰ä¸¤ç§æ–¹å¼è¿›è¡Œç½‘ç»œæ•°æ®çš„è¯·æ±‚ï¼Œä¸€ç§æ˜¯é€šè¿‡blockçš„æ–¹å¼è·å–ç½‘ç»œæ•°æ®ï¼Œä¸€ç§æ˜¯é€šè¿‡ä»£ç†å›è°ƒçš„æ–¹å¼è·å–ç½‘ç»œæ•°æ®ã€‚é€šè¿‡blockçš„æ–¹å¼è¿›è¡Œè¯·æ±‚ä»£ç å¦‚ä¸‹ï¼š 123456789101112 //åˆ›å»ºsessioné…ç½®å¯¹è±¡ NSURLSessionConfiguration * defaultConfiguration = [NSURLSessionConfiguration defaultSessionConfiguration]; //åˆ›å»ºè¯·æ±‚å¯¹è±¡ NSURLRequest * request = [NSURLRequest requestWithURL:[NSURL URLWithString:@&quot;http://www.baidu.com&quot;]]; //åˆ›å»ºsessionå¯¹è±¡ NSURLSession * defaultSession = [NSURLSession sessionWithConfiguration:defaultConfiguration]; //æ·»åŠ ä»»åŠ¡ NSURLSessionTask * task= [defaultSession dataTaskWithRequest:request completionHandler:^(NSData * _Nullable data, NSURLResponse * _Nullable response, NSError * _Nullable error) &#123; NSLog(@&quot;%@&quot;,data); &#125;]; //å¼€å§‹ä»»åŠ¡ [task resume]; ä½¿ç”¨ä»£ç†å›è°ƒçš„æ–¹å¼è¿›è¡Œè¯·æ±‚éœ€è¦éµå®ˆå¦‚ä¸‹åè®®ï¼š 12@interface ViewController ()&lt;NSURLSessionDataDelegate&gt;@end å°†è¯·æ±‚ä»£ç ä¿®æ”¹å¦‚ä¸‹ï¼š 123456 NSURLSessionConfiguration * defaultConfiguration = [NSURLSessionConfiguration defaultSessionConfiguration]; NSURLRequest * request = [NSURLRequest requestWithURL:[NSURL URLWithString:@&quot;http://www.baidu.com&quot;]]; NSURLSession * defaultSession = [NSURLSession sessionWithConfiguration:defaultConfiguration delegate:self delegateQueue:[NSOperationQueue mainQueue]]; NSURLSessionTask * task= [defaultSession dataTaskWithRequest:request]; [task resume]; å®ç°ä»£ç†æ–¹æ³•å¦‚ä¸‹ï¼š 12345678//å¼€å§‹æ¥å—æ•°æ®-(void)URLSession:(NSURLSession *)session dataTask:(NSURLSessionDataTask *)dataTask didReceiveData:(NSData *)data&#123; NSLog(@&quot;=======%@&quot;,data);&#125;//æ¥å—æ•°æ®ç»“æŸ-(void)URLSession:(NSURLSession *)session task:(NSURLSessionTask *)task didCompleteWithError:(NSError *)error&#123; NSLog(@&quot;å®Œæˆï¼šerror%@&quot;,error);&#125; å››ã€è¿›è¡Œåå°ä¸‹è½½ä»»åŠ¡NSURLSessionæœ€å¤§çš„ä¼˜åŠ¿åœ¨äºå…¶åå°ä¸‹è½½çš„çµæ´»æ€§ï¼Œä½¿ç”¨å¦‚ä¸‹çš„ä»£ç è¿›è¡Œåå°æ•°æ®ä¸‹è½½ï¼š 1234 NSURLSessionConfiguration * backgroundConfiguration = [NSURLSessionConfiguration backgroundSessionConfigurationWithIdentifier:@&quot;com.zyprosoft.backgroundsession&quot;]; NSURLRequest * request = [NSURLRequest requestWithURL:[NSURL URLWithString:@&quot;http://www.baidu.com&quot;]]; NSURLSession * backgroundSession = [NSURLSession sessionWithConfiguration:backgroundConfiguration delegate:self delegateQueue:nil]; [[backgroundSession downloadTaskWithRequest:request]resume]; åœ¨ä¸‹é¢çš„å›è°ƒæ–¹æ³•ä¸­å¯ä»¥è¿›è¡Œä¸‹è½½è¿›åº¦çš„ç›‘å¬ï¼š 1234- (void)URLSession:(NSURLSession *)session downloadTask:(NSURLSessionDownloadTask *)downloadTask didWriteData:(int64_t)bytesWritten totalBytesWritten:(int64_t)totalBytesWritten totalBytesExpectedToWrite:(int64_t)totalBytesExpectedToWrite&#123; NSLog(@&quot;######&quot;);&#125; å¦‚æœåœ¨ä¸‹è½½è¿‡ç¨‹ä¸­ç‚¹å‡»Homeé”®ä½¿åº”ç”¨ç¨‹åºè¿›å…¥åå°ï¼ŒNSURLSessionçš„ç›¸å…³ä»£ç†æ–¹æ³•å°†ä¸å†è¢«å›è°ƒï¼Œä½†æ˜¯ä¸‹è½½ä»»åŠ¡ä¾ç„¶åœ¨è¿›è¡Œï¼Œå½“åå°ä¸‹è½½å®Œæˆåä¼šä¸AppDelegateè¿›è¡Œäº¤äº’ï¼Œä¼šè°ƒç”¨AppDelegateä¸­çš„å¦‚ä¸‹æ–¹æ³•ï¼š 123-(void)application:(UIApplication *)application handleEventsForBackgroundURLSession:(NSString *)identifier completionHandler:(void (^)())completionHandler&#123; NSLog(@&quot;1111&quot;);&#125; ä¹‹ååº”ç”¨ç¨‹åºåœ¨åå°ä¼šè°ƒç”¨NSURLSesstionä»£ç†çš„å¦‚ä¸‹æ–¹æ³•æ¥é€šçŸ¥ä¸‹è½½ç»“æœï¼š 12345678//æ­¤æ–¹æ³•æ— è®ºæˆåŠŸå¤±è´¥éƒ½ä¼šè°ƒç”¨-(void)URLSession:(NSURLSession *)session task:(NSURLSessionTask *)task didCompleteWithError:(NSError *)error&#123; NSLog(@&quot;å®Œæˆï¼šerror%@&quot;,error);&#125;//æ­¤æ–¹æ³•åªæœ‰ä¸‹è½½æˆåŠŸæ‰ä¼šè°ƒç”¨ æ–‡ä»¶æ”¾åœ¨locationä½ç½®-(void)URLSession:(NSURLSession *)session downloadTask:(NSURLSessionDownloadTask *)downloadTask didFinishDownloadingToURL:(NSURL *)location&#123; &#125; æœ€åå°†è°ƒç”¨NSURLSesstionçš„å¦‚ä¸‹æ–¹æ³•ï¼š 123456-(void)URLSessionDidFinishEventsForBackgroundURLSession:(NSURLSession *)session&#123; NSLog(@&quot;All tasks are finished&quot;); &#125; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSç½‘ç»œç¼–ç¨‹ä¹‹ä¸€â€”â€”iOSç½‘ç»œæ¡†æ¶ç®€ä»‹","slug":"175iOSç½‘ç»œç¼–ç¨‹ä¹‹ä¸€â€”â€”iOSç½‘ç»œæ¡†æ¶ç®€ä»‹","date":"2016-02-21T16:00:00.000Z","updated":"2021-07-06T07:00:53.808Z","comments":true,"path":"2016/02/22/175iOSç½‘ç»œç¼–ç¨‹ä¹‹ä¸€â€”â€”iOSç½‘ç»œæ¡†æ¶ç®€ä»‹/","link":"","permalink":"http://huishao.cc/2016/02/22/175iOSç½‘ç»œç¼–ç¨‹ä¹‹ä¸€â€”â€”iOSç½‘ç»œæ¡†æ¶ç®€ä»‹/","excerpt":"","text":"iOSç½‘ç»œç¼–ç¨‹ä¹‹ä¸€â€”â€”iOSç½‘ç»œæ¡†æ¶ç®€ä»‹ä¸€ã€å¼•è¨€é€šè¿‡ç½‘ç»œï¼Œä¸€æ¬¾åº”ç”¨æ‰èƒ½å¤Ÿå†…å®¹ä¸°å¯Œï¼Œæ‰èƒ½å¤Ÿå®Œæˆç”¨æˆ·æ“ä½œä¸åå°æ•°æ®çš„äº¤äº’ã€‚ç½‘ç»œç¼–ç¨‹æ˜¯ç§»åŠ¨åº”ç”¨æˆ–æ¸¸æˆå¼€å‘å¼€å‘ä¸­ä¸å¯ç¼ºå°‘çš„æŠ€æœ¯ã€‚iOSåŸç”Ÿçš„ç½‘ç»œæ¡†æ¶ä¹Ÿååˆ†å®Œå–„ï¼Œå…¶ä¸­æ¶‰åŠåˆ°çš„è®¸å¤šç±»å’Œåè®®ç”¨äºå¤„ç†ç½‘ç»œå¼€å‘ä¸­çš„å„ç§éœ€æ±‚ äºŒã€URLåŠ è½½æ¡†æ¶iOSçš„URLåŠ è½½ç³»ç»ŸåŒ…å«è®¸å¤šç±»ä¸åè®®ï¼Œè¿™äº›ç±»å’Œåè®®ç›¸äº’åä½œå®ŒæˆURLåŠ è½½çš„ä¿¡æ¯é…ç½®ï¼Œåè®®æ”¯æŒï¼Œèº«ä»½éªŒè¯ï¼Œcookieå’Œç¼“å­˜ç­‰åŠŸèƒ½ã€‚APPLEå¼€å‘æ–‡æ¡£ä¸­æœ‰å¦‚ä¸‹å›¾è¡¨ç¤ºä»–ä»¬ä¹‹é—´çš„å…³ç³»ï¼š å…³äºURLåŠ è½½ç³»ç»Ÿï¼Œåœ¨iOS7ä¹‹åï¼ŒNSURLSessionæ˜¯é¦–é€‰çš„APIæ¡†æ¶ï¼Œåœ¨iOS9ä¸­NSURLConnectionç›¸å…³çš„æ–¹æ³•è¢«å¼ƒç”¨ï¼Œå¦‚æœéœ€è¦å…¼å®¹ååˆ†æ—§çš„ç‰ˆæœ¬ï¼Œä¾ç„¶éœ€è¦ä½¿ç”¨NSURLConnectionã€‚ ä¸‰ã€ä¸€äº›è¾…åŠ©ç±»1.NSURLRequestNSURLRequestç±»è´Ÿè´£ä¸€ä¸ªå…·ä½“çš„ç½‘ç»œè¯·æ±‚ï¼Œå…¶å†…éƒ¨å°è£…ä¸€ä¸ªè¯·æ±‚è·¯å¾„NSURLå¯¹è±¡ã€‚å¦‚æœéœ€è¦å¯¹è¯·æ±‚å‚æ•°è¿›è¡Œé…ç½®ï¼Œå¯ä»¥ä½¿ç”¨NSMutableURLRequestã€‚ 2.NSURLResponseNSURLResponseç±»å°è£…äº†ç›¸åº”æ•°æ®ï¼Œç›¸åº”æ•°æ®åŒ…æ‹¬ä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯è¿”å›æ•°æ®çš„çŠ¶æ€ç ï¼Œæ•°æ®é•¿åº¦ã€ç¼–ç ç­‰ä¿¡æ¯ï¼Œå¦ä¸€éƒ¨åˆ†æ˜¯å†…å®¹æ•°æ®æœ¬èº«ã€‚ 3.NSURLCredentialã€NSURLProtectionSpaceã€NSURLCredentialStorageã€NSURLAuthenticatioChallengeä¸€äº›è®¿é—®è¯·æ±‚éœ€è¦è¯ä¹¦æˆ–è€…èº«ä»½å‡­è¯è¿›è¡ŒéªŒè¯ï¼Œä¸Šé¢4ä¸ªç±»å¯¹è¯·æ±‚å‡­è¯è¿›è¡Œç›¸å…³è®¾ç½®ã€‚ 4.NSURLCacheåœ¨åº”ç”¨ç¨‹åºçš„å¼€å‘ä¸­ï¼Œä¸ºäº†å‡å°å¯¹ç½‘ç»œçš„ä¾èµ–ï¼Œæé«˜ç¨‹åºæ€§èƒ½ï¼Œå¸¸å¸¸ä¼šå¯¹ä¸€äº›éå®æ—¶æ€§çš„æ•°æ®è¿›è¡Œç¼“å­˜å¤„ç†ï¼ŒNSURLCacheç±»ç”¨äºç®¡ç†NSURLRequestè¯·æ±‚ç¼“å­˜ã€‚ 5.NSHTTPCookieStorageã€NSHTTPCookieNSHTTPCookieStorageä¸NSHTTPCookieç”¨äºæŒä¹…åŒ–çš„å­˜å‚¨HTTPè¯·æ±‚çš„Cookieæ•°æ®ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSä¸­CoreDataæ•°æ®ç®¡ç†ç³»åˆ—å››â€”â€”è¿›è¡Œæ•°æ®ä¸é¡µé¢çš„ç»‘å®š","slug":"174iOSä¸­CoreDataæ•°æ®ç®¡ç†ç³»åˆ—å››â€”â€”è¿›è¡Œæ•°æ®ä¸é¡µé¢çš„ç»‘å®š","date":"2016-01-31T16:00:00.000Z","updated":"2021-07-06T07:00:09.045Z","comments":true,"path":"2016/02/01/174iOSä¸­CoreDataæ•°æ®ç®¡ç†ç³»åˆ—å››â€”â€”è¿›è¡Œæ•°æ®ä¸é¡µé¢çš„ç»‘å®š/","link":"","permalink":"http://huishao.cc/2016/02/01/174iOSä¸­CoreDataæ•°æ®ç®¡ç†ç³»åˆ—å››â€”â€”è¿›è¡Œæ•°æ®ä¸é¡µé¢çš„ç»‘å®š/","excerpt":"","text":"iOSä¸­CoreDataæ•°æ®ç®¡ç†ç³»åˆ—å››â€”â€”è¿›è¡Œæ•°æ®ä¸é¡µé¢çš„ç»‘å®šä¸€ã€å¼•è¨€åœ¨ä¸Šä¸€ç¯‡åšå®¢ä¸­ï¼Œæˆ‘ä»¬è®¨è®ºäº†CoreDataæ¡†æ¶ä¸­æ·»åŠ ä¸æŸ¥è¯¢æ•°æ®çš„æ“ä½œï¼Œäº‹å®ä¸Šï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™äº›æ•°æ®éƒ½æ˜¯ç”±ä¸€ä¸ªUITableViewè¡¨è§†å›¾è¿›è¡Œå±•ç¤ºçš„ï¼Œå› æ­¤ï¼ŒCoreDataæ¡†æ¶ä¸­è¿˜æœªå¼€å‘è€…æä¾›äº†ä¸€ä¸ªç±»NSFetchedResultsControllerï¼Œè¿™ä¸ªç±»ä½œä¸ºæ¡¥æ¥ï¼Œå°†è§†å›¾ä¸æ•°æ®è¿›è¡Œç»‘å®šã€‚ æ·»åŠ ä¸æŸ¥è¯¢æ•°æ®æ“ä½œï¼šhttp://my.oschina.net/u/2340880/blog/611430ã€‚ äºŒã€è¿›è¡Œæ•°æ®åˆå§‹åŒ–NSFetchedResultsControllerçš„åˆå§‹åŒ–éœ€è¦ä¸€ä¸ªæŸ¥è¯¢è¯·æ±‚å’Œä¸€ä¸ªæ•°æ®æ“ä½œä¸Šä¸‹æ–‡ã€‚ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031//éµå®ˆåè®®@interface ViewController ()&lt;NSFetchedResultsControllerDelegate&gt;&#123; //æ•°æ®æ¡¥æ¥å¯¹è±¡ NSFetchedResultsController * _fecCon;&#125;@end@implementation ViewController- (void)viewDidLoad &#123; [super viewDidLoad]; //è¿›è¡Œåˆå§‹åŒ–æ“ä½œ NSURL *modelUrl = [[NSBundle mainBundle]URLForResource:@&quot;Model&quot; withExtension:@&quot;momd&quot;]; NSManagedObjectModel * mom = [[NSManagedObjectModel alloc]initWithContentsOfURL:modelUrl]; NSPersistentStoreCoordinator * psc = [[NSPersistentStoreCoordinator alloc]initWithManagedObjectModel:mom]; NSURL * path =[NSURL fileURLWithPath:[[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)lastObject] stringByAppendingPathComponent:@&quot;CoreDataExample.sqlite&quot;]]; [psc addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:path options:nil error:nil]; NSManagedObjectContext * moc = [[NSManagedObjectContext alloc]initWithConcurrencyType:NSMainQueueConcurrencyType]; [moc setPersistentStoreCoordinator:psc]; NSFetchRequest * request = [NSFetchRequest fetchRequestWithEntityName:@&quot;SchoolClass&quot;]; //è®¾ç½®æ•°æ®æ’åº [request setSortDescriptors:@[[NSSortDescriptor sortDescriptorWithKey:@&quot;stuNum&quot; ascending:YES]]]; //è¿›è¡Œæ•°æ®æ¡¥æ¥å¯¹è±¡çš„åˆå§‹åŒ– _fecCon = [[NSFetchedResultsController alloc]initWithFetchRequest:request managedObjectContext:moc sectionNameKeyPath:nil cacheName:nil]; //è®¾ç½®ä»£ç† _fecCon.delegate=self; //è¿›è¡Œæ•°æ®æŸ¥è¯¢ [_fecCon performFetch:nil];&#125;@end ç”¨äºåˆå§‹åŒ–NSFecthedResultsControllerçš„æ•°æ®è¯·æ±‚å¯¹è±¡å¿…é¡»è®¾ç½®ä¸€ä¸ªæ’åºè§„åˆ™ã€‚åœ¨initWithFetchRequest:managedObjectContext:sectionNameKeyPath:cacheName:æ–¹æ³•ä¸­ï¼Œå¦‚æœè®¾ç½®ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œåˆ™ä¼šä»¥ç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºé”®å€¼è¿›è¡Œæ•°æ®çš„åˆ†åŒºã€‚å½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå°†é€šè¿‡ä»£ç†è¿›è¡Œæ–¹æ³•çš„å›è°ƒã€‚ ä¸‰ã€ä¸UITableViewè¿›è¡Œæ•°æ®ç»‘å®š12345678910111213141516171819-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath&#123; UITableViewCell * cell = [tableView dequeueReusableCellWithIdentifier:@&quot;cellid&quot;]; if (!cell) &#123; cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@&quot;cellid&quot;]; &#125; //è·å–ç›¸åº”æ•°æ®æ¨¡å‹ SchoolClass * obj = [_fecCon objectAtIndexPath:indexPath]; cell.textLabel.text = obj.name; cell.detailTextLabel.text = [NSString stringWithFormat:@&quot;æœ‰%@äºº&quot;,obj.stuNum]; return cell;&#125;-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView&#123; return [_fecCon sections].count;&#125;-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section&#123; id&lt;NSFetchedResultsSectionInfo&gt; info = [_fecCon sections][section]; return [info numberOfObjects]; &#125; æ•ˆæœå¦‚ä¸‹ï¼š å››ã€å°†æ•°æ®å˜åŒ–æ˜ å°„åˆ°è§†å›¾123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354//æ•°æ®å°†è¦æ”¹å˜æ—¶è°ƒç”¨çš„æ–¹æ³•- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller&#123; //å¼€å¯tableViewæ›´æ–°é¢„å¤„ç† [[self tableView] beginUpdates];&#125;//åˆ†åŒºæ•°æ®æ”¹å˜æ—¶è°ƒç”¨çš„æ–¹æ³•- (void)controller:(NSFetchedResultsController *)controller didChangeSection:(id &lt;NSFetchedResultsSectionInfo&gt;)sectionInfo atIndex:(NSUInteger)sectionIndex forChangeType:(NSFetchedResultsChangeType)type&#123; //åˆ¤æ–­è¡Œä¸ºç±»å‹ switch(type) &#123; //æ’å…¥æ–°åˆ†åŒº case NSFetchedResultsChangeInsert: [[self tableView] insertSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade]; break; //åˆ é™¤åˆ†åŒº case NSFetchedResultsChangeDelete: [[self tableView] deleteSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade]; break; //ç§»åŠ¨åˆ†åŒº case NSFetchedResultsChangeMove: //æ›´æ–°åˆ†åŒº case NSFetchedResultsChangeUpdate: break; &#125;&#125;//æ•°æ®æ”¹å˜æ—¶å›è°ƒçš„ä»£ç†- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type newIndexPath:(NSIndexPath *)newIndexPath&#123; switch(type) &#123; //æ’å…¥æ•°æ® case NSFetchedResultsChangeInsert: [[self tableView] insertRowsAtIndexPaths:@[newIndexPath] withRowAnimation:UITableViewRowAnimationFade]; break; //åˆ é™¤æ•°æ® case NSFetchedResultsChangeDelete: [[self tableView] deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade]; break; //æ›´æ–°æ•°æ® case NSFetchedResultsChangeUpdate: [self reloadData]; break; //ç§»åŠ¨æ•°æ® case NSFetchedResultsChangeMove: [[self tableView] deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade]; [[self tableView] insertRowsAtIndexPaths:@[newIndexPath] withRowAnimation:UITableViewRowAnimationFade]; break; &#125;&#125;//æ•°æ®æ›´æ–°ç»“æŸè°ƒç”¨çš„ä»£ç†- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller&#123; [[self tableView] endUpdates];&#125; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSä¸­CoreDataæ•°æ®ç®¡ç†ç³»åˆ—ä¸‰â€”â€”æ·»åŠ ä¸æŸ¥è¯¢æ•°æ®","slug":"173iOSä¸­CoreDataæ•°æ®ç®¡ç†ç³»åˆ—ä¸‰â€”â€”æ·»åŠ ä¸æŸ¥è¯¢æ•°æ®","date":"2016-01-28T16:00:00.000Z","updated":"2021-07-06T06:59:11.149Z","comments":true,"path":"2016/01/29/173iOSä¸­CoreDataæ•°æ®ç®¡ç†ç³»åˆ—ä¸‰â€”â€”æ·»åŠ ä¸æŸ¥è¯¢æ•°æ®/","link":"","permalink":"http://huishao.cc/2016/01/29/173iOSä¸­CoreDataæ•°æ®ç®¡ç†ç³»åˆ—ä¸‰â€”â€”æ·»åŠ ä¸æŸ¥è¯¢æ•°æ®/","excerpt":"","text":"iOSä¸­CoreDataæ•°æ®ç®¡ç†ç³»åˆ—ä¸‰â€”â€”æ·»åŠ ä¸æŸ¥è¯¢æ•°æ®ä¸€ã€å¼•è¨€åœ¨å‰ä¸¤ç¯‡åšå®¢ä¸­ï¼Œåˆ†åˆ«ä»‹ç»äº†iOSä¸­CoreDataæ¡†æ¶åˆ›å»ºæ•°æ®æ¨¡å‹å’ŒCoreDataæ¡†æ¶ä¸­çš„ä¸‰ä¸ªæ ¸å¿ƒç±»ã€‚åšå®¢åœ°å€å¦‚ä¸‹ï¼š iOSä¸­CoreDataæ¡†æ¶ç®€ä»‹ï¼šhttp://my.oschina.net/u/2340880/blog/610488ã€‚ CoreDataæ¡†æ¶ä¸­ä¸‰ä¸ªæ ¸å¿ƒçš„ç±»ï¼šhttp://my.oschina.net/u/2340880/blog/610948ã€‚ æœ¬ç¯‡åšå®¢å°†ç»¼åˆä½¿ç”¨ä¸‰ä¸ªæ ¸å¿ƒçš„ç±»ï¼Œè¿›è¡Œæ•°æ®åˆ›å»ºå’ŒæŸ¥è¯¢çš„æ“ä½œä»‹ç»ã€‚ äºŒã€å»ºç«‹æ•°æ®å¯¹è±¡ç±»å‰é¢åšå®¢ä»‹ç»çš„NSManagedObjectModelæ˜¯æ•°æ®ç®¡ç†æ¨¡å‹ï¼Œå¯ä»¥å°†å…¶ç±»æ¯”å¦‚æ•°æ®åº“ï¼ŒNSManagedObjectModelä¸­å­˜æ”¾ç€æ•°æ®åº“çš„ç»“æ„ä¿¡æ¯ã€‚NSEntityDescriptionæ˜¯å®ä½“æè¿°å¯¹è±¡ï¼Œå®ƒå¯ä»¥ç±»æ¯”å¦‚æ•°æ®åº“ä¸­çš„è¡¨ï¼ŒNSEntityDescriptionå­˜æ”¾çš„æ˜¯è¡¨çš„ç»“æ„ä¿¡æ¯ã€‚è¿™äº›ç±»éƒ½æ˜¯ä¸€äº›æŠ½è±¡çš„ç»“æ„ç±»ï¼Œå¹¶ä¸å­˜å‚¨å®é™…æ¯æ¡æ•°æ®çš„ä¿¡æ¯ï¼Œå…·ä½“çš„æ•°æ®ç”±NSManagedObjectç±»æ¥æè¿°ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šå°†å®ä½“ç±»åŒ–ç»§æ‰¿äºNSManagedObjectã€‚ Xocdeå·¥å…·æä¾›äº†å¿«æ·çš„å®ä½“ç±»åŒ–åŠŸèƒ½ï¼Œè¿˜æ‹¿æˆ‘ä»¬ä¸€å¼€å§‹åˆ›å»ºçš„ç­çº§ä¸å­¦ç”Ÿå®ä½“æ¥æ¼”ç¤ºï¼Œç‚¹å‡».xcdatamodeldæ–‡ä»¶ï¼Œç‚¹å‡»Xcodeå·¥å…·ä¸Šæ–¹å¯¼èˆªæ çš„Editoræ ‡ç­¾ï¼Œé€‰æ‹©Creat NSManagedObject Subclassé€‰é¡¹ï¼Œåœ¨å¼¹å‡ºçš„çª—å£ä¸­å‹¾é€‰è¦ç±»åŒ–çš„å®ä½“ï¼Œå¦‚ä¸‹å›¾ï¼š è¿™æ—¶ï¼ŒXcodeä¼šè‡ªåŠ¨ä¸ºæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶ä¸­æœ‰å„ä¸ªç±»ä¸­å±æ€§çš„å£°æ˜ã€‚ ä¸‰ã€åˆ›å»ºä¸€æ¡æ•°æ®ä½¿ç”¨å¦‚ä¸‹ä»£ç è¿›è¡Œæ•°æ®çš„åˆ›å»ºï¼š 12345678910111213141516171819202122232425262728293031323334 //è¯»å–æ•°æ®æ¨¡å‹æ–‡ä»¶ NSURL *modelUrl = [[NSBundle mainBundle]URLForResource:@&quot;Model&quot; withExtension:@&quot;momd&quot;]; //åˆ›å»ºæ•°æ®æ¨¡å‹ NSManagedObjectModel * mom = [[NSManagedObjectModel alloc]initWithContentsOfURL:modelUrl]; //åˆ›å»ºæŒä¹…åŒ–å­˜å‚¨åè°ƒè€… NSPersistentStoreCoordinator * psc = [[NSPersistentStoreCoordinator alloc]initWithManagedObjectModel:mom]; //æ•°æ®åº“ä¿å­˜è·¯å¾„ NSURL * path =[NSURL fileURLWithPath:[[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)lastObject] stringByAppendingPathComponent:@&quot;CoreDataExample.sqlite&quot;]]; //ä¸ºæŒä¹…åŒ–åè°ƒè€…æ·»åŠ ä¸€ä¸ªæ•°æ®æ¥æ”¶æ ˆ /* å¯ä»¥æ”¯æŒçš„ç±»å‹å¦‚ä¸‹ï¼š NSString * const NSSQLiteStoreType;//sqlite NSString * const NSXMLStoreType;//XML NSString * const NSBinaryStoreType;//äºŒè¿›åˆ¶ NSString * const NSInMemoryStoreType;//å†…å­˜ */ [psc addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:path options:nil error:nil]; //åˆ›å»ºæ•°æ®ç®¡ç†ä¸Šä¸‹æ–‡ NSManagedObjectContext * moc = [[NSManagedObjectContext alloc]initWithConcurrencyType:NSMainQueueConcurrencyType]; //å…³è”æŒä¹…åŒ–åè°ƒè€… [moc setPersistentStoreCoordinator:psc]; //åˆ›å»ºæ•°æ®å¯¹è±¡ /* æ•°æ®å¯¹è±¡çš„åˆ›å»ºæ˜¯é€šè¿‡å®ä½“åè·å–åˆ°çš„ */ SchoolClass * modelS = [NSEntityDescription insertNewObjectForEntityForName:@&quot;SchoolClass&quot; inManagedObjectContext:moc]; //å¯¹æ•°æ®è¿›è¡Œè®¾ç½® modelS.name = @&quot;ç¬¬ä¸€ç­&quot;; modelS.stuNum = @60; //è¿›è¡Œå­˜å‚¨ if ([moc save:nil]) &#123; NSLog(@&quot;æ–°å¢æˆåŠŸ&quot;); &#125; NSLog(@&quot;%@&quot;,[[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)lastObject] stringByAppendingPathComponent:@&quot;CoreDataExample.sqlite&quot;]); æ‰¾åˆ°åœ¨æ‰“å°å‡ºçš„è·¯å¾„ï¼Œä¼šå‘ç°é‡Œé¢å¤šäº†ä¸€ä¸ªsqliteæ–‡ä»¶ï¼Œå…¶ä¸­æœ‰ä¸€å¼ è¡¨ä¸­æ·»åŠ è¿›äº†ä¸€æ¡æ•°æ®ã€‚ å››ã€æŸ¥è¯¢æ•°æ®CoreDataä¸­é€šè¿‡æŸ¥è¯¢è¯·æ±‚æ¥å¯¹æ•°æ®è¿›è¡ŒæŸ¥è¯¢æ“ä½œï¼ŒæŸ¥è¯¢è¯·æ±‚ç”±NSFetchRequestæ¥è¿›è¡Œç®¡ç†å’Œç»´æŠ¤ã€‚ NSFetchRequestä¸»è¦æä¾›ä¸¤ä¸ªæ–¹é¢çš„æŸ¥è¯¢æœåŠ¡ï¼š 1.æä¾›èŒƒå›´æŸ¥è¯¢çš„ç›¸å…³åŠŸèƒ½ 2.æä¾›æŸ¥è¯¢ç»“æœè¿”å›ç±»å‹ä¸æ’åºçš„ç›¸å…³åŠŸèƒ½ NSFetchRequestä¸­å¸¸ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š 12345678910111213141516171819202122//åˆ›å»ºä¸€ä¸ªå®ä½“çš„æŸ¥è¯¢è¯·æ±‚ å¯ä»¥ç†è§£ä¸ºåœ¨æŸä¸ªè¡¨ä¸­è¿›è¡ŒæŸ¥è¯¢+ (instancetype)fetchRequestWithEntityName:(NSString*)entityName;//æŸ¥è¯¢æ¡ä»¶@property (nullable, nonatomic, strong) NSPredicate *predicate;//æ•°æ®æ’åº@property (nullable, nonatomic, strong) NSArray&lt;NSSortDescriptor *&gt; *sortDescriptors;//æ¯æ¬¡æŸ¥è¯¢è¿”å›çš„æ•°æ®æ¡æ•°@property (nonatomic) NSUInteger fetchLimit;//è®¾ç½®æŸ¥è¯¢åˆ°æ•°æ®çš„è¿”å›ç±»å‹/*typedef NS_OPTIONS(NSUInteger, NSFetchRequestResultType) &#123; NSManagedObjectResultType = 0x00, NSManagedObjectIDResultType = 0x01, NSDictionaryResultType NS_ENUM_AVAILABLE(10_6,3_0) = 0x02, NSCountResultType NS_ENUM_AVAILABLE(10_6,3_0) = 0x04&#125;;*/@property (nonatomic) NSFetchRequestResultType resultType;//è®¾ç½®æŸ¥è¯¢ç»“æœæ˜¯å¦åŒ…å«å­å®ä½“@property (nonatomic) BOOL includesSubentities;//è®¾ç½®è¦æŸ¥è¯¢çš„å±æ€§å€¼@property (nullable, nonatomic, copy) NSArray *propertiesToFetch; åœ¨SchoolClasså®ä½“ä¸­æŸ¥è¯¢æ•°æ®ï¼Œä½¿ç”¨å¦‚ä¸‹çš„ä»£ç ï¼š 1234567 //åˆ›å»ºä¸€æ¡æŸ¥è¯¢è¯·æ±‚ NSFetchRequest * request = [NSFetchRequest fetchRequestWithEntityName:@&quot;SchoolClass&quot;]; //è®¾ç½®æ¡ä»¶ä¸º stuNum=60çš„æ•°æ® [request setPredicate:[NSPredicate predicateWithFormat:@&quot;stuNum == 60&quot;]]; //è¿›è¡ŒæŸ¥è¯¢æ“ä½œ NSArray * res = [moc executeFetchRequest:request error:nil]; NSLog(@&quot;%@&quot;,[res.firstObject stuNum]); ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSä¸­CoreDataæ•°æ®ç®¡ç†ç³»åˆ—äºŒâ€”â€”CoreDataæ¡†æ¶ä¸­ä¸‰ä¸ªé‡è¦çš„ç±»","slug":"172iOSä¸­CoreDataæ•°æ®ç®¡ç†ç³»åˆ—äºŒâ€”â€”CoreDataæ¡†æ¶ä¸­ä¸‰ä¸ªé‡è¦çš„ç±»","date":"2016-01-27T16:00:00.000Z","updated":"2021-07-06T06:58:10.678Z","comments":true,"path":"2016/01/28/172iOSä¸­CoreDataæ•°æ®ç®¡ç†ç³»åˆ—äºŒâ€”â€”CoreDataæ¡†æ¶ä¸­ä¸‰ä¸ªé‡è¦çš„ç±»/","link":"","permalink":"http://huishao.cc/2016/01/28/172iOSä¸­CoreDataæ•°æ®ç®¡ç†ç³»åˆ—äºŒâ€”â€”CoreDataæ¡†æ¶ä¸­ä¸‰ä¸ªé‡è¦çš„ç±»/","excerpt":"","text":"iOSä¸­CoreDataæ•°æ®ç®¡ç†ç³»åˆ—äºŒâ€”â€”CoreDataæ¡†æ¶ä¸­ä¸‰ä¸ªé‡è¦çš„ç±»ä¸€ã€å¼•è¨€åœ¨ä¸Šä¸€ç¯‡åšå®¢ä¸­ï¼Œä»‹ç»äº†iOSä¸­ä½¿ç”¨CoreDataæ¡†æ¶è®¾è®¡æ•°æ®æ¨¡å‹çš„ç›¸å…³æ­¥éª¤ã€‚CoreDataæ¡†æ¶ä¸­é€šè¿‡ç›¸å…³çš„ç±»å°†æ•°æ®â€”â€”æ•°æ®æ¨¡å‹â€”â€”å¼€å‘è€…æ— ç¼çš„è¡”æ¥èµ·æ¥ã€‚NSManagedObjectModelå¯¹åº”æ•°æ®æ¨¡å‹ï¼Œå³ä¸Šç¯‡åšå®¢ä¸­æˆ‘ä»¬åˆ›å»ºçš„.xcdatamodeldæ–‡ä»¶ï¼›NSPersistentStoreCoordinatorç›¸å½“äºæ•°æ®åº“ä¸æ•°æ®æ¨¡å‹ä¹‹é—´çš„æ¡¥æ¥å™¨ï¼Œé€šè¿‡NSPersistentStoreCoordinatorå°†æ•°æ®æ¨¡å‹å­˜å…¥æ•°æ®åº“ï¼›NSManagedObjectContextæ˜¯æ ¸å¿ƒçš„æ•°æ®ç®¡ç†ç±»ï¼Œå¼€å‘è€…é€šè¿‡æ“ä½œå®ƒæ¥æ‰§è¡Œå¯¹æ•°æ®çš„ç›¸å…³æ“ä½œã€‚ äºŒã€æ•°æ®æ¨¡å‹ç®¡ç†ç±»NSManagedObjectModelé€šè¿‡NSManagedObjectModelï¼Œå¯ä»¥å°†åˆ›å»ºçš„æ•°æ®æ¨¡å‹æ–‡ä»¶è¯»å–ä¸ºæ¨¡å‹ç®¡ç†ç±»å¯¹è±¡ï¼Œä½¿ç”¨å¦‚ä¸‹æ–¹æ³•ï¼š 1234 //è·å–.xcdatamodeldæ–‡ä»¶url NSURL *modelUrl = [[NSBundle mainBundle]URLForResource:@&quot;Model&quot; withExtension:@&quot;momd&quot;]; //è¯»å–æ–‡ä»¶ NSManagedObjectModel * mom = [[NSManagedObjectModel alloc]initWithContentsOfURL:modelUrl]; å…¶ä¸­è¿˜æœ‰ä¸€äº›å±æ€§å’Œæ–¹æ³•è¿›è¡Œæ•°æ®æ¨¡å‹çš„ç®¡ç†ï¼š 123456789101112131415161718//å°†å¤šä¸ªæ•°æ®æ¨¡å‹ç®¡ç†æ–‡ä»¶è¿›è¡Œåˆå¹¶+ (nullable NSManagedObjectModel *)mergedModelFromBundles:(nullable NSArray&lt;NSBundle *&gt; *)bundles; //å°†å¤šä¸ªæ•°æ®æ¨¡å‹ç®¡ç†ç±»å¯¹è±¡è¿›è¡Œåˆå¹¶ + (nullable NSManagedObjectModel *)modelByMergingModels:(nullable NSArray&lt;NSManagedObjectModel *&gt; *)models;//å­˜æ”¾æ•°æ®ä¸­æ‰€æœ‰å®ä½“æ¨¡å‹çš„å­—å…¸ å­—å…¸ä¸­æ˜¯å®ä½“åå’Œå®ä½“æè¿°å¯¹è±¡@property (readonly, copy) NSDictionary&lt;NSString *, NSEntityDescription *&gt; *entitiesByName;//å­˜æ”¾æ•°æ®ä¸­æ‰€æœ‰å®ä½“æè¿°å¯¹è±¡@property (strong) NSArray&lt;NSEntityDescription *&gt; *entities;//è¿”å›æ‰€æœ‰å¯ç”¨çš„é…ç½®åç§°@property (readonly, strong) NSArray&lt;NSString *&gt; *configurations;//è·å–å…³è”æŸä¸ªé…ç½®çš„æ‰€æœ‰å®ä½“- (nullable NSArray&lt;NSEntityDescription *&gt; *)entitiesForConfiguration:(nullable NSString *)configuration;//ä¸ºæŸä¸ªå®ä½“å…³è”é…ç½®- (void)setEntities:(NSArray&lt;NSEntityDescription *&gt; *)entities forConfiguration:(NSString *)configuration;//åˆ›å»ºè¯·æ±‚æ¨¡æ¿- (void)setFetchRequestTemplate:(nullable NSFetchRequest *)fetchRequestTemplate forName:(NSString *)name;//è·å–è¯·æ±‚æ¨¡æ¿- (nullable NSFetchRequest *)fetchRequestTemplateForName:(NSString *)name; å…³äºå®ä½“æè¿°å¯¹è±¡NSEntityDescriptionï¼š å®ä½“ç±»ä¼¼äºæ•°æ®åº“ä¸­çš„è¡¨ç»“æ„ï¼Œä¾‹å¦‚ä¸Šæ¬¡æˆ‘ä»¬åˆ›å»ºçš„ç­çº§å®ä½“æ¨¡å‹ï¼Œä¸€ä¸ªå®ä½“æ¨¡å‹ä¸­å¯ä»¥æ·»åŠ è®¸å¤šå±æ€§ä¸å…³ç³»ï¼ŒNSEntityDescriptionå¯¹è±¡ä¸­å­˜æ”¾è¿™äº›ä¿¡æ¯ï¼Œå¸¸ç”¨å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526//å®ä½“æ‰€åœ¨çš„æ¨¡å‹ç®¡ç†å¯¹è±¡@property (readonly, assign) NSManagedObjectModel *managedObjectModel;//å®ä½“æ‰€åœ¨çš„æ¨¡å‹ç®¡ç†å¯¹è±¡çš„åç§°@property (null_resettable, copy) NSString *managedObjectClassName;//å®ä½“å@property (nullable, copy) NSString *name;//è®¾ç½®æ˜¯å¦æ˜¯æŠ½è±¡å®ä½“@property (getter=isAbstract) BOOL abstract;//å­ç±»å®ä½“å­—å…¸@property (readonly, copy) NSDictionary&lt;NSString *, NSEntityDescription *&gt; *subentitiesByName;//æ‰€æœ‰å­ç±»å®ä½“å¯¹è±¡æ•°ç»„@property (strong) NSArray&lt;NSEntityDescription *&gt; *subentities;//çˆ¶ç±»å®ä½“@property (nullable, readonly, assign) NSEntityDescription *superentity;//æ‰€æœ‰å±æ€§å­—å…¸@property (readonly, copy) NSDictionary&lt;NSString *, __kindof NSPropertyDescription *&gt; *propertiesByName;//æ‰€æœ‰å±æ€§æ•°ç»„ @property (strong) NSArray&lt;__kindof NSPropertyDescription *&gt; *properties;//æ‰€æœ‰å¸¸ç±»å‹å±æ€§@property (readonly, copy) NSDictionary&lt;NSString *, NSAttributeDescription *&gt; *attributesByName;//æ‰€æœ‰å…³ç³»@property (readonly, copy) NSDictionary&lt;NSString *, NSRelationshipDescription *&gt; *relationshipsByName;//æŸä¸ªå®ä½“ç±»å‹çš„æ‰€æœ‰å…³ç³»- (NSArray&lt;NSRelationshipDescription *&gt; *)relationshipsWithDestinationEntity:(NSEntityDescription *)entity;//åˆ¤æ–­æ˜¯å¦æ˜¯æŸç§å®ä½“- (BOOL)isKindOfEntity:(NSEntityDescription *)entity; NSPropertyDescriptionç±»æ˜¯æ•°æ®æ¨¡å‹å±æ€§çš„çˆ¶ç±»ï¼ŒNSAttributeDescriptionå’ŒNSRelationshipDescriptionéƒ½æ˜¯ç»§æ‰¿äºNSPropertyDescriptionç±»ï¼ŒNSAttributeDescriptionæè¿°æ­£å¸¸ç±»å‹çš„å±æ€§ï¼ŒNSRelationshipDescriptionç”¨äºæè¿°è‡ªå®šä¹‰ç±»å‹çš„å…³ç³»ã€‚ ä¸‰ã€æŒä¹…åŒ–å­˜å‚¨åè°ƒè€…ç±»NSPersistentStoreCoordinatorNSPersistentStoreCoordinatorå»ºç«‹æ•°æ®æ¨¡å‹ä¸æœ¬åœ°æ–‡ä»¶æˆ–æ•°æ®åº“ä¹‹é—´çš„è”ç³»ï¼Œé€šè¿‡å®ƒå°†æœ¬åœ°æ•°æ®è¯»å…¥å†…å­˜æˆ–è€…å°†ä¿®æ”¹è¿‡çš„ä¸´æ—¶æ•°æ®è¿›è¡ŒæŒä¹…åŒ–çš„ä¿å­˜ã€‚å…¶åˆå§‹åŒ–ä¸é“¾æ¥æ•°æ®æŒä¹…åŒ–æ¥æ”¶å¯¹è±¡æ–¹æ³•å¦‚ä¸‹ï¼š 123456//é€šè¿‡æ•°æ®æ¨¡å‹ç®¡ç†å¯¹è±¡è¿›è¡Œåˆå§‹åŒ–- (instancetype)initWithManagedObjectModel:(NSManagedObjectModel *)modelï¼›//æ·»åŠ ä¸€ä¸ªæŒä¹…åŒ–çš„æ•°æ®æ¥æ”¶å¯¹è±¡- (nullable __kindof NSPersistentStore *)addPersistentStoreWithType:(NSString *)storeType configuration:(nullable NSString *)configuration URL:(nullable NSURL *)storeURL options:(nullable NSDictionary *)options error:(NSError **)error;//ç§»é™¤ä¸€ä¸ªæŒä¹…åŒ–çš„æ•°æ®æ¥æ”¶å¯¹è±¡- (BOOL)removePersistentStore:(NSPersistentStore *)store error:(NSError **)error; å››ã€æ•°æ®å¯¹è±¡ç®¡ç†ä¸Šä¸‹æ–‡NSManagedObjectContextNSManagedObjectContextæ˜¯è¿›è¡Œæ•°æ®ç®¡ç†çš„æ ¸å¿ƒç±»ï¼Œæˆ‘ä»¬é€šè¿‡è¿™ä¸ªç±»æ¥è¿›è¡Œæ•°æ®çš„å¢åˆ æ”¹æŸ¥ç­‰æ“ä½œã€‚å…¶ä¸­å¸¸ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132//åˆå§‹åŒ–æ–¹æ³• é€šè¿‡ä¸€ä¸ªå¹¶å‘ç±»å‹è¿›è¡Œåˆå§‹åŒ– å‚æ•°æšä¸¾å¦‚ä¸‹ï¼š/*typedef NS_ENUM(NSUInteger, NSManagedObjectContextConcurrencyType) &#123; NSPrivateQueueConcurrencyType = 0x01,//ä¸Šä¸‹æ–‡å¯¹è±¡ä¸ç§æœ‰é˜Ÿåˆ—å…³è” NSMainQueueConcurrencyType = 0x02//ä¸Šä¸‹æ–‡å¯¹è±¡ä¸ä¸»é˜Ÿåˆ—å…³è”&#125;;*/- (instancetype)initWithConcurrencyType:(NSManagedObjectContextConcurrencyType)ct;//å¼‚æ­¥æ‰§è¡Œblock- (void)performBlock:(void (^)())block;//åŒæ­¥æ‰§è¡Œblock- (void)performBlockAndWait:(void (^)())block;//å…³è”æ•°æ®æŒä¹…åŒ–å¯¹è±¡@property (nullable, strong) NSPersistentStoreCoordinator *persistentStoreCoordinator;//æ˜¯å¦æœ‰æœªæäº¤çš„æ›´æ”¹@property (nonatomic, readonly) BOOL hasChanges;//è¿›è¡ŒæŸ¥è¯¢æ•°æ®è¯·æ±‚- (nullable NSArray *)executeFetchRequest:(NSFetchRequest *)request error:(NSError **)error;//è¿›è¡ŒæŸ¥è¯¢æ•°æ®æ¡æ•°è¯·æ±‚- (NSUInteger) countForFetchRequest: (NSFetchRequest *)request error: (NSError **)error ; //æ’å…¥å…ƒç´ - (void)insertObject:(NSManagedObject *)object;//åˆ é™¤å…ƒç´ - (void)deleteObject:(NSManagedObject *)object;//å›æ»šä¸€æ­¥æ“ä½œ- (void)undo;//æ¸…æ¥šç¼“å­˜- (void)reset;//è¿˜åŸæ•°æ®- (void)rollback;//æäº¤ä¿å­˜æ•°æ®- (BOOL)save:(NSError **)error; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSä¸­CoreDataæ•°æ®ç®¡ç†ç³»åˆ—ä¸€â€”â€”åˆè¯†CoreData","slug":"171iOSä¸­CoreDataæ•°æ®ç®¡ç†ç³»åˆ—ä¸€â€”â€”åˆè¯†CoreData","date":"2016-01-26T16:00:00.000Z","updated":"2021-07-06T06:56:40.291Z","comments":true,"path":"2016/01/27/171iOSä¸­CoreDataæ•°æ®ç®¡ç†ç³»åˆ—ä¸€â€”â€”åˆè¯†CoreData/","link":"","permalink":"http://huishao.cc/2016/01/27/171iOSä¸­CoreDataæ•°æ®ç®¡ç†ç³»åˆ—ä¸€â€”â€”åˆè¯†CoreData/","excerpt":"","text":"iOSä¸­CoreDataæ•°æ®ç®¡ç†ç³»åˆ—ä¸€â€”â€”åˆè¯†CoreDataä¸€ã€ä½•ä¸ºCoreDataCoreDataæ˜¯ä¸€ä¸ªä¸“é—¨ç”¨æ¥ç®¡ç†æ•°æ®çš„æ¡†æ¶ï¼Œå…¶åœ¨æ€§èƒ½ä¸ä¹¦å†™æ–¹ä¾¿ä¸Šéƒ½æœ‰å¾ˆå¤§çš„ä¼˜åŠ¿ï¼Œåœ¨æ•°æ®åº“ç®¡ç†æ–¹é¢ï¼Œappleå¼ºçƒˆæ¨èå¼€å‘è€…ä½¿ç”¨CoreDataæ¡†æ¶ï¼Œåœ¨appleçš„å®˜æ–¹æ–‡æ¡£ä¸­ç§°ï¼Œä½¿ç”¨CoreDataæ¡†æ¶å¯ä»¥å‡å°‘å¼€å‘è€…50%â€”â€”70%çš„ä»£ç é‡ï¼Œè¿™è™½ç„¶æœ‰äº›å¤¸å¼ ï¼Œä½†ç”±æ­¤å¯è§ï¼ŒCoreDataçš„ç¡®ååˆ†å¼ºå¤§ã€‚ äºŒã€è®¾è®¡æ•°æ®æ¨¡å‹åœ¨iOSå¼€å‘ä¸­ï¼Œæ—¶å¸¸ä½¿ç”¨SQLæ•°æ®åº“å¯¹å¤§é‡çš„è¡¨ç»“æ„æ•°æ®è¿›è¡Œå¤„ç†ï¼Œä½†æ˜¯SQLæœ‰ä¸€ä¸ªååˆ†æ˜æ˜¾çš„ç¼ºé™·ï¼Œå¯¹äºå¸¸è§„æ•°æ®æ¨¡å‹çš„è¡¨ï¼Œå…¶å¤„ç†èµ·æ¥æ˜¯æ²¡é—®é¢˜çš„ï¼Œä¾‹å¦‚ä¸€ä¸ªç­çº§è¡¨ï¼Œå…¶ä¸­æ¯æ¡æ•°æ®ä¸­æœ‰ç­çº§åç§°ï¼Œäººæ•°è¿™æ ·çš„å±æ€§ï¼Œä¸€ä¸ªå­¦ç”Ÿè¡¨ï¼Œå…¶ä¸­æ¯æ¡æ•°æ®æœ‰å­¦ç”Ÿçš„å§“åï¼Œæ€§åˆ«ï¼Œå¹´é¾„è¿™æ ·çš„å±æ€§ã€‚ä½†æ˜¯å¦‚æœè¦åœ¨è¡¨ä¸è¡¨ä¹‹é—´å»ºç«‹è”ç³»ï¼Œè‡ªå®šä¹‰å¯¹è±¡ä¸è‡ªå®šä¹‰å¯¹è±¡ä¹‹é—´äº§ç”Ÿä»å±å…³ç³»ï¼Œä½¿ç”¨SQLå¤„ç†èµ·æ¥å°±ååˆ†éº»çƒ¦äº†ï¼Œä¾‹å¦‚å¦‚æœè¿™ä¸ªç­çº§è¡¨ä¸­æœ‰ä¸€ä¸ªç­é•¿çš„å±æ€§ï¼Œè¿™ä¸ªå±æ€§æ˜¯ä¸€ä¸ªå­¦ç”Ÿç±»å‹ã€‚å…³äºiOSä¸­SQLçš„ä½¿ç”¨ç›¸å…³åšå®¢ï¼Œåœ°å€å¦‚ä¸‹ï¼š Sqliteæ•°æ®åº“ç›¸å…³çŸ¥è¯†ï¼šhttp://my.oschina.net/u/2340880/blog/600820 iOSä¸­sqlite3æ¡†æ¶çš„ä½¿ç”¨å’Œå°è£…ï¼šhttp://my.oschina.net/u/2340880/blog/601802 CoreDataçš„ä¸€å¤§ä¼˜åŠ¿å³æ˜¯å…¶å¯ä»¥æ–¹ä¾¿çš„åœ¨å¯¹è±¡ä¹‹é—´å»ºç«‹å…³ç³»ã€‚ 1.åˆ›å»ºå®ä½“ç±»å‹åŠå…¶å±æ€§ä½¿ç”¨Xcodeåˆ›å»ºä¸€ä¸ªå·¥ç¨‹ï¼Œåœ¨å·¥ç¨‹ä¸­æ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œé€‰æ‹©Core Dataåˆ†ç±»ä¸­çš„DataModelåˆ›å»ºï¼Œå¦‚ä¸‹å›¾ï¼š è¿™æ—¶åœ¨Xcodeçš„æ–‡ä»¶å¯¼èˆªåŒºä¼šå‡ºç°ä¸€ä¸ªä»¥xcdatamodeldä¸ºæ‰©å±•åçš„æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å°±æ˜¯æ•°æ®æ¨¡å‹æ–‡ä»¶ï¼Œç‚¹å‡»Add EntityæŒ‰é’®æ·»åŠ ä¸€ä¸ªå®ä½“ç±»å‹ï¼Œå–åä¸ºSchoolClassï¼Œä¸ºè¿™ä¸ªç±»å‹æ·»åŠ ä¸¤ä¸ªå±æ€§ï¼Œåˆ†åˆ«ä¸ºåå­—nameå’Œå­¦ç”Ÿæ•°é‡stuNumï¼Œå¦‚ä¸‹å›¾: 2.å¯¹å®ä½“ç±»å‹è¿›è¡Œè®¾ç½®åœ¨Xcodeå³ä¾§çš„å·¥å…·æ ä¸­å¯ä»¥å¯¹å®ä½“ç±»å‹è¿›è¡Œä¸€äº›è®¾ç½®ï¼Œé€‰ä¸­ä¸€ä¸ªå®ä½“ç±»å‹ï¼Œå¦‚ä¸‹å›¾ï¼š Nameè®¾ç½®å®ä½“ç±»å‹çš„åç§°ï¼ŒAbstract Entityè®¾ç½®æ˜¯å¦æ˜¯æŠ½è±¡å®ä½“ï¼Œå¦‚æœå‹¾é€‰ï¼Œåˆ™æ­¤å®ä½“ä¸èƒ½è¢«å®ä¾‹åŒ–ï¼Œåªèƒ½è¢«ç»§æ‰¿ï¼Œç±»ä¼¼äºæŠ½è±¡ç±»ï¼Œæ¯”å¦‚å®šä¹‰äººä¸ºä¸€ä¸ªå®ä½“ç±»å‹ï¼Œåœ¨å®šä¹‰ç»§æ‰¿äºäººå®ä½“ç±»å‹çš„è€å¸ˆã€å­¦ç”Ÿç­‰æ¥è¿›è¡Œå®ä¾‹åŒ–ã€‚Parent Entityç”¨æ¥é€‰æ‹©çˆ¶ç±»å®ä½“ï¼ŒClassç”¨äºè®¾ç½®å¯¹åº”çš„ç±»çš„ã€‚ 3.åœ¨å®ä½“å¯¹è±¡ä¹‹é—´å»ºç«‹å…³ç³»å†åˆ›å»ºä¸€ä¸ªå­¦ç”Ÿç±»å®ä½“Studentï¼Œæ·»åŠ nameå’Œageä¸¤ä¸ªå±æ€§ã€‚é€‰ä¸­SchoolClassï¼Œåœ¨å…¶ä¸­çš„Relationshipsæ¨¡å—ä¸­ç‚¹å‡»+å·ï¼Œæ¥æ·»åŠ ä¸€ä¸ªå…³ç³»ï¼Œå¦‚ä¸‹å›¾ï¼š è¿™æ—¶ï¼ŒSchoolClasså®ä½“ç±»å‹ä¸­å°±æœ‰äº†ä¸€ä¸ªStudentç±»å‹çš„ç­é•¿å±æ€§ã€‚å¦‚æœåˆ‡æ¢ä¸€ä¸‹ç¼–è¾‘é£æ ¼ï¼Œå¯ä»¥æ›´åŠ æ¸…æ™°çš„çœ‹åˆ°å®ä½“ç±»å‹ä¹‹é—´çš„å…³ç³»ï¼Œå¦‚ä¸‹å›¾ï¼š 4.å¯¹å±æ€§å’Œå…³ç³»è¿›è¡Œè®¾ç½®é€‰ä¸­ä¸€ä¸ªå±æ€§æˆ–è€…å…³ç³»ï¼Œåœ¨å³ä¾§çš„å·¥å…·æ ä¸­å¯ä»¥å¯¹å±æ€§è¿›è¡Œä¸€äº›è®¾ç½®ï¼Œå¦‚ä¸‹å›¾ï¼š nameè®¾ç½®å±æ€§çš„åå­—ï¼ŒOptionalç±»å‹ä»£è¡¨å¯é€‰ï¼Œå³åœ¨å®ä¾‹åŒ–å¯¹è±¡æ—¶å¯ä»¥èµ‹å€¼ä¹Ÿå¯ä»¥ä¸èµ‹å€¼ã€‚Attributeè®¾ç½®å±æ€§çš„æ•°æ®ç±»å‹ï¼ŒDefault Valueè®¾ç½®æ•°æ®çš„é»˜è®¤å€¼ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSä¸­æ’­æ”¾gifåŠ¨æ€å›¾çš„æ–¹å¼æ¢è®¨","slug":"170iOSä¸­æ’­æ”¾gifåŠ¨æ€å›¾çš„æ–¹å¼æ¢è®¨","date":"2016-01-23T16:00:00.000Z","updated":"2021-07-06T06:48:41.373Z","comments":true,"path":"2016/01/24/170iOSä¸­æ’­æ”¾gifåŠ¨æ€å›¾çš„æ–¹å¼æ¢è®¨/","link":"","permalink":"http://huishao.cc/2016/01/24/170iOSä¸­æ’­æ”¾gifåŠ¨æ€å›¾çš„æ–¹å¼æ¢è®¨/","excerpt":"","text":"iOSä¸­æ’­æ”¾gifåŠ¨æ€å›¾çš„æ–¹å¼æ¢è®¨ä¸€ã€å¼•è¨€åœ¨iOSå¼€å‘ä¸­ï¼ŒUIImageViewç±»ä¸“é—¨æ¥è´Ÿè´£å›¾ç‰‡æ•°æ®çš„æ¸²æŸ“ï¼Œå¹¶ä¸”UIImageViewä¹Ÿæœ‰å¸§åŠ¨ç”»çš„æ–¹æ³•æ¥æ’­æ”¾ä¸€ç»„å›¾ç‰‡ï¼Œä½†æ˜¯å¯¹äºgifç±»å‹çš„æ•°æ®ï¼ŒUIImageViewä¸­å¹¶æ²¡æœ‰ç°æˆçš„æ¥å£æä¾›ç»™å¼€å‘è€…ä½¿ç”¨ï¼Œåœ¨iOSä¸­ä¸€èˆ¬å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼æ¥æ’­æ”¾gifåŠ¨æ€å›¾ï¼Œä¸€ç§æ–¹å¼æ˜¯é€šè¿‡ImageIOæ¡†æ¶ä¸­çš„æ–¹æ³•å°†gifæ–‡ä»¶ä¸­çš„æ•°æ®è¿›è¡Œè§£æï¼Œå†ä½¿ç”¨coreAnimationæ ¸å¿ƒåŠ¨ç”»æ¥æ’­æ”¾gifåŠ¨ç”»ï¼Œå¦ä¸€ç§æ–¹å¼è®¡è¾ƒç®€å•ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡webViewæ¥æ¸²æŸ“gifå›¾ã€‚ äºŒã€ä¸ºåŸç”Ÿçš„UIImageViewæ·»åŠ ç±»åˆ«æ¥æ”¯æŒgifåŠ¨æ€å›¾çš„æ’­æ”¾ gifåŠ¨æ€å›¾æ–‡ä»¶ä¸­åŒ…å«äº†ä¸€ç»„å›¾ç‰‡åŠå…¶ä¿¡æ¯ï¼Œä¿¡æ¯ä¸»è¦è®°å½•ç€æ¯ä¸€å¸§å›¾ç‰‡æ’­æ”¾çš„æ—¶é—´ï¼Œæˆ‘ä»¬å¦‚æœè·å–åˆ°äº†gifæ–‡ä»¶ä¸­æ‰€æœ‰çš„å›¾ç‰‡åŒæ—¶åˆè·å–åˆ°æ¯ä¸€å¸§å›¾ç‰‡æ’­æ”¾çš„æ—¶é—´ï¼Œå°±å¯ä»¥ä¸ºUIImageViewæ·»åŠ æ ¸å¿ƒåŠ¨ç”»çš„æ–¹æ³•æ¥è®©å…¶æ’­æ”¾gifçš„å†…å®¹äº†ã€‚ é¦–å…ˆè§£ægifæ–‡ä»¶ä¸­çš„æ•°æ®ï¼Œä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344//è¦å¼•å…¥ImageIOåº“#import &lt;ImageIO/ImageIO.h&gt;//è§£ægifæ–‡ä»¶æ•°æ®çš„æ–¹æ³• blockä¸­ä¼šå°†è§£æçš„æ•°æ®ä¼ é€’å‡ºæ¥-(void)getGifImageWithUrk:(NSURL *)url returnData:(void(^)(NSArray&lt;UIImage *&gt; * imageArray, NSArray&lt;NSNumber *&gt;*timeArray, CGFloat totalTime, NSArray&lt;NSNumber *&gt;* widths, NSArray&lt;NSNumber *&gt;* heights))dataBlock&#123; //é€šè¿‡æ–‡ä»¶çš„urlæ¥å°†gifæ–‡ä»¶è¯»å–ä¸ºå›¾ç‰‡æ•°æ®å¼•ç”¨ CGImageSourceRef source = CGImageSourceCreateWithURL((CFURLRef)url, NULL); //è·å–gifæ–‡ä»¶ä¸­å›¾ç‰‡çš„ä¸ªæ•° size_t count = CGImageSourceGetCount(source); //å®šä¹‰ä¸€ä¸ªå˜é‡è®°å½•gifæ’­æ”¾ä¸€è½®çš„æ—¶é—´ float allTime=0; //å­˜æ”¾æ‰€æœ‰å›¾ç‰‡ NSMutableArray * imageArray = [[NSMutableArray alloc]init]; //å­˜æ”¾æ¯ä¸€å¸§æ’­æ”¾çš„æ—¶é—´ NSMutableArray * timeArray = [[NSMutableArray alloc]init]; //å­˜æ”¾æ¯å¼ å›¾ç‰‡çš„å®½åº¦ ï¼ˆä¸€èˆ¬åœ¨ä¸€ä¸ªgifæ–‡ä»¶ä¸­ï¼Œæ‰€æœ‰å›¾ç‰‡å°ºå¯¸éƒ½ä¼šä¸€æ ·ï¼‰ NSMutableArray * widthArray = [[NSMutableArray alloc]init]; //å­˜æ”¾æ¯å¼ å›¾ç‰‡çš„é«˜åº¦ NSMutableArray * heightArray = [[NSMutableArray alloc]init]; //éå† for (size_t i=0; i&lt;count; i++) &#123; CGImageRef image = CGImageSourceCreateImageAtIndex(source, i, NULL); [imageArray addObject:(__bridge UIImage *)(image)]; CGImageRelease(image); //è·å–å›¾ç‰‡ä¿¡æ¯ NSDictionary * info = (__bridge NSDictionary*)CGImageSourceCopyPropertiesAtIndex(source, i, NULL); CGFloat width = [[info objectForKey:(__bridge NSString *)kCGImagePropertyPixelWidth] floatValue]; CGFloat height = [[info objectForKey:(__bridge NSString *)kCGImagePropertyPixelHeight] floatValue]; [widthArray addObject:[NSNumber numberWithFloat:width]]; [heightArray addObject:[NSNumber numberWithFloat:height]]; NSDictionary * timeDic = [info objectForKey:(__bridge NSString *)kCGImagePropertyGIFDictionary]; CGFloat time = [[timeDic objectForKey:(__bridge NSString *)kCGImagePropertyGIFDelayTime]floatValue]; allTime+=time; [timeArray addObject:[NSNumber numberWithFloat:time]]; CFRelease(info); &#125; CFRelease(source); dataBlock(imageArray,timeArray,allTime,widthArray,heightArray);&#125; ä¸ºUIImageViewæ·»åŠ ä¸€ä¸ªè®¾ç½®gifå›¾å†…å®¹çš„æ–¹æ³•ï¼š 1234567891011121314151617181920212223-(void)yh_setImage:(NSURL *)imageUrl&#123; __weak id __self = self; [self getGifImageWithUrk:imageUrl returnData:^(NSArray&lt;UIImage *&gt; *imageArray, NSArray&lt;NSNumber *&gt; *timeArray, CGFloat totalTime, NSArray&lt;NSNumber *&gt; *widths, NSArray&lt;NSNumber *&gt; *heights) &#123; //æ·»åŠ å¸§åŠ¨ç”» CAKeyframeAnimation *animation = [CAKeyframeAnimation animationWithKeyPath:@&quot;contents&quot;]; NSMutableArray * times = [[NSMutableArray alloc]init]; float currentTime = 0; //è®¾ç½®æ¯ä¸€å¸§çš„æ—¶é—´å æ¯” for (int i=0; i&lt;imageArray.count; i++) &#123; [times addObject:[NSNumber numberWithFloat:currentTime/totalTime]]; currentTime+=[timeArray[i] floatValue]; &#125; [animation setKeyTimes:times]; [animation setValues:imageArray]; [animation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear]]; //è®¾ç½®å¾ªç¯ animation.repeatCount= MAXFLOAT; //è®¾ç½®æ’­æ”¾æ€»æ—¶é•¿ animation.duration = totalTime; //Layerå±‚æ·»åŠ  [[(UIImageView *)__self layer]addAnimation:animation forKey:@&quot;gifAnimation&quot;]; &#125;];&#125; ä½¿ç”¨ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š 1234 UIImageView * imageView = [[UIImageView alloc]initWithFrame:CGRectMake(0,0 , 320, 200)]; NSURL * url = [[NSURL alloc]initFileURLWithPath:[[NSBundle mainBundle] pathForResource:imageName ofType:nil]]; [imageView yh_setImage:url]; [self.view addSubview:imageView]; ä¸‰ã€ä½¿ç”¨UIWebViewæ¥åŠ è½½gifåŠ¨æ€å›¾æ•°æ®iOSä¸­çš„UIWebViewåŠŸèƒ½ååˆ†å¼ºå¤§ï¼Œå¯ä»¥é€šè¿‡UIWebViewä¸ºè½½ä½“ï¼Œæ¥å±•ç¤ºgifå›¾ã€‚å¹¶ä¸”è¿™ç§æ–¹æ³•ä¹Ÿååˆ†ç®€å•ï¼Œä»£ç å¦‚ä¸‹ï¼š 12345678910 //è¯»å–gifæ•°æ® NSData *gifData = [NSData dataWithContentsOfURL:imageUrl]; UIWebView *webView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)]; //å–æ¶ˆå›å¼¹æ•ˆæœ webView.scrollView.bounces=NO; webView.backgroundColor = [UIColor clearColor]; //è®¾ç½®ç¼©æ”¾æ¨¡å¼ webView.scalesPageToFit = YES; //ç”¨webViewåŠ è½½æ•°æ® [webView loadData:gifData MIMEType:@&quot;image/gif&quot; textEncodingName:nil baseURL:nil]; å››ã€ä¸¤ç§åŠ è½½gifåŠ¨æ€å›¾æ–¹å¼çš„ä¼˜åŠ£ç»è¿‡æµ‹è¯•ï¼Œä»åŠ è½½é€Ÿåº¦ä¸Šæ¥è¯´ï¼Œé€šè¿‡UIImageViewç±»åˆ«åŠ è½½çš„æ–¹å¼æ›´åŠ å¿«é€Ÿï¼ŒUIWebViewçš„æ–¹å¼åŠ è½½æ—¶é—´ä¼šç¨é•¿ï¼Œä½†æ˜¯ä»æ€§èƒ½ä¸Šæ¥æ¯”è¾ƒï¼ŒWebViewçš„æ–¹å¼æ€§èƒ½æ›´ä¼˜ï¼Œæ’­æ”¾çš„gifåŠ¨æ€å›¾æ›´åŠ æµç•…ã€‚åœ¨å¼€å‘ä¸­ï¼Œå¯ä»¥æ ¹æ®éœ€æ±‚ï¼Œé€‚å½“é€‰æ‹©ï¼Œä¾‹å¦‚è™½ç„¶WebViewåŠ è½½çš„æ–¹å¼æ€§èƒ½æ›´å¥½ï¼Œä½†æ˜¯åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼ŒåŸç”Ÿçš„UIImageViewèƒ½å¤Ÿæ›´åŠ è‡ªç”±çš„è®©å¼€å‘è€…è¿›è¡Œæ‰©å±•ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"ä½¿ç”¨iOSåŸç”Ÿsqlite3æ¡†æ¶å¯¹sqliteæ•°æ®åº“è¿›è¡Œæ“ä½œ","slug":"169ä½¿ç”¨iOSåŸç”Ÿsqlite3æ¡†æ¶å¯¹sqliteæ•°æ®åº“è¿›è¡Œæ“ä½œ","date":"2016-01-12T16:00:00.000Z","updated":"2021-07-06T06:46:38.149Z","comments":true,"path":"2016/01/13/169ä½¿ç”¨iOSåŸç”Ÿsqlite3æ¡†æ¶å¯¹sqliteæ•°æ®åº“è¿›è¡Œæ“ä½œ/","link":"","permalink":"http://huishao.cc/2016/01/13/169ä½¿ç”¨iOSåŸç”Ÿsqlite3æ¡†æ¶å¯¹sqliteæ•°æ®åº“è¿›è¡Œæ“ä½œ/","excerpt":"","text":"ä½¿ç”¨iOSåŸç”Ÿsqlite3æ¡†æ¶å¯¹sqliteæ•°æ®åº“è¿›è¡Œæ“ä½œä¸€ã€å¼•è¨€sqliteæ•°æ®åº“æ˜¯ä¸€ç§å°å‹æ•°æ®åº“ï¼Œç”±äºå…¶å°å·§ä¸ç®€æ´ï¼Œåœ¨ç§»åŠ¨å¼€å‘é¢†åŸŸåº”ç”¨æ·±å¹¿ï¼Œsqliteæ•°æ®åº“æœ‰ä¸€å¥—å®Œå¤‡çš„sqliteè¯­å¥è¿›è¡Œç®¡ç†æ“ä½œï¼Œä¸€äº›å¸¸ç”¨çš„è¯­å¥å’Œå¯è§†åŒ–çš„å¼€å‘å·¥å…·åœ¨ä¸Šç¯‡åšå®¢ä¸­æœ‰ä»‹ç»ï¼Œåœ°å€å¦‚ä¸‹ï¼š sqliteæ•°æ®åº“å¸¸ç”¨è¯­å¥åŠå¯è§†åŒ–å·¥å…·ä»‹ç»ï¼šhttp://my.oschina.net/u/2340880/blog/600820ã€‚ åœ¨iOSçš„åŸç”Ÿå¼€å‘æ¡†æ¶ä¸­å¯ä»¥å¯¹sqliteæ•°æ®åº“è¿›è¡Œå¾ˆå¥½çš„æ”¯æŒï¼Œè¿™ä¸ªæ¡†æ¶ä¸­é‡‡ç”¨Cé£æ ¼ä¸”é€šè¿‡æŒ‡é’ˆç§»åŠ¨è¿›è¡Œæ•°æ®çš„æ“ä½œï¼Œä½¿ç”¨èµ·æ¥æœ‰äº›ä¸ä¾¿ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹ä¸€äº›æ•°æ®åº“çš„å¸¸ç”¨æ“ä½œè¿›è¡Œä¸€äº›é¢å‘å¯¹è±¡çš„å°è£…ã€‚ äºŒã€libsqlite3ç³»ç»Ÿåº“ä¸­æ“ä½œæ•°æ®åº“çš„å¸¸ç”¨æ–¹æ³•libsqlite3æ˜¯å¯¹sqliteæ•°æ®åº“è¿›è¡Œæ“ä½œçš„ç³»ç»Ÿåº“ï¼Œåœ¨ä½¿ç”¨å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå¯¼å…¥ï¼Œç‚¹å‡»Xcodeçš„Build Phasesæ ‡ç­¾ï¼Œå±•å¼€Link Binary With Librariesï¼Œç‚¹å‡»+å·ï¼Œåœ¨å¼¹å‡ºçš„çª—å£ä¸­æœç´¢libsqlite3.0ï¼Œå°†å…¶å¯¼å…¥è¿›å·¥ç¨‹ï¼Œè¿‡ç¨‹å¦‚ä¸‹å›¾ï¼š åœ¨éœ€è¦æ“ä½œsqliteæ•°æ®çš„æ–‡ä»¶ä¸­å¯¼å…¥å¦‚ä¸‹å¤´æ–‡ä»¶ï¼š 1#import &lt;sqlite3.h&gt; æ•°æ®åº“æ–‡ä»¶çš„æ“ä½œæ˜¯ç”±ä¸€ä¸ªsqlite3ç±»å‹çš„æŒ‡é’ˆæ“ä½œç®¡ç†çš„ï¼Œå¦‚ä¸‹æ–¹æ³•è¿›è¡Œæ•°æ®åº“çš„æ‰“å¼€ï¼š 12sqlite3 *sqliteï¼›sqlite3_open(dataBaePath, &amp;sqlite) sqlite3_openæ–¹æ³•è¿”å›ä¸€ä¸ªintå€¼ï¼Œå®é™…ä¸Šï¼Œåœ¨ä½¿ç”¨libsqlite3æ¡†æ¶ä¸­çš„å¤§å¤šæ–¹æ³•æ—¶éƒ½ä¼šè¿”å›ä¸€ä¸ªintå€¼ï¼Œè¿™ä¸ªintå€¼ä»£è¡¨ç€æ–¹æ³•æ‰§è¡Œçš„ç›¸åº”ç»“æœçŠ¶æ€ï¼Œè¿™äº›çŠ¶æ€å†sqlite3.hæ–‡ä»¶ä¸­é€šè¿‡å®æ¥å®šä¹‰ï¼Œåˆ—ä¸¾å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132#define SQLITE_OK 0 //æ“ä½œæˆåŠŸ/* ä»¥ä¸‹æ˜¯é”™è¯¯ä»£ç  */#define SQLITE_ERROR 1 /* SQLæ•°æ®åº“é”™è¯¯æˆ–è€…ä¸¢å¤±*/#define SQLITE_INTERNAL 2 /* SQLå†…éƒ¨é€»è¾‘é”™è¯¯ */#define SQLITE_PERM 3 /* æ²¡æœ‰è®¿é—®æƒé™ */#define SQLITE_ABORT 4 /* å›è°ƒè¯·æ±‚ç»ˆæ­¢ */#define SQLITE_BUSY 5 /* æ•°æ®åº“æ–‡ä»¶è¢«é”å®š */#define SQLITE_LOCKED 6 /* æ•°æ®åº“ä¸­æœ‰è¡¨è¢«é”å®š */#define SQLITE_NOMEM 7 /* åˆ†é…ç©ºé—´å¤±è´¥ */#define SQLITE_READONLY 8 /* ä¼å›¾å‘åªè¯»å±æ€§çš„æ•°æ®åº“ä¸­åšå†™æ“ä½œ */#define SQLITE_INTERRUPT 9 /* é€šè¿‡sqlite3_interrupt()æ–¹æ³•ç»ˆæ­¢æ“ä½œ*/#define SQLITE_IOERR 10 /* ç£ç›˜å‘ç”Ÿé”™è¯¯ */#define SQLITE_CORRUPT 11 /* æ•°æ®åº“ç£ç›˜æ ¼å¼ä¸æ­£ç¡® */#define SQLITE_NOTFOUND 12 /* è°ƒç”¨ä½ç½®æ“ä½œç  */#define SQLITE_FULL 13 /* ç”±äºæ•°æ®åº“å·²æ»¡é€ æˆçš„æ·»åŠ æ•°æ®å¤±è´¥ */#define SQLITE_CANTOPEN 14 /* ä¸æ³•æ‰“å¼€æ•°æ®åº“æ–‡ä»¶ */#define SQLITE_PROTOCOL 15 /* æ•°æ®åº“é”åè®®é”™è¯¯ */#define SQLITE_EMPTY 16 /* æ•°æ®åº“ä¸ºç©º */#define SQLITE_SCHEMA 17 /* æ•°æ®åº“æ¨¡å¼æ›´æ”¹ */#define SQLITE_TOOBIG 18 /* å­—ç¬¦æˆ–è€…äºŒè¿›åˆ¶æ•°æ®è¶…å‡ºé•¿åº¦ */#define SQLITE_CONSTRAINT 19 /* è¿ååè®®ç»ˆæ­¢ */#define SQLITE_MISMATCH 20 /* æ•°æ®ç±»å‹ä¸åŒ¹é… */#define SQLITE_MISUSE 21 /* åº“ä½¿ç”¨ä¸å½“ */#define SQLITE_NOLFS 22 /* ä½¿ç”¨ä¸æ”¯æŒçš„æ“ä½œç³»ç»Ÿ */#define SQLITE_AUTH 23 /* æˆæƒæ‹’ç» */#define SQLITE_FORMAT 24 /* è¾…åŠ©æ•°æ®åº“æ ¼å¼é”™è¯¯ */#define SQLITE_RANGE 25 /* sqlite3_bind ç¬¬äºŒä¸ªå‚æ•°è¶…å‡ºèŒƒå›´ */#define SQLITE_NOTADB 26 /* æ‰“å¼€ä¸æ˜¯æ•°æ®åº“çš„æ–‡ä»¶ */#define SQLITE_NOTICE 27 /* æ¥è‡ªsqlite3_log()çš„é€šçŸ¥ */#define SQLITE_WARNING 28 /* æ¥è‡ªsqlite3_log() çš„è­¦å‘Š*/#define SQLITE_ROW 100 /* sqlite3_step() æ–¹æ³•å‡†å¤‡å¥½äº†ä¸€è¡Œæ•°æ® */#define SQLITE_DONE 101 /* sqlite3_step() å·²å®Œæˆæ‰§è¡Œ*/ æ‰§è¡ŒéæŸ¥è¯¢ç±»çš„è¯­å¥ï¼Œä¾‹å¦‚åˆ›å»ºï¼Œæ·»åŠ ï¼Œåˆ é™¤ç­‰æ“ä½œï¼Œä½¿ç”¨å¦‚ä¸‹æ–¹æ³•ï¼š 123char * err;sqlite3 *sql;sqlite3_exec(sql, sqlStr, NULL, NULL, &amp;err); sqlite3_execæ–¹æ³•ä¸­ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæˆåŠŸæ‰§è¡Œäº†æ‰“å¼€æ•°æ®åº“æ“ä½œçš„sqlite3æŒ‡é’ˆï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºè¦æ‰§è¡Œçš„sqlè¯­å¥ï¼Œæœ€åä¸€ä¸ªå‚æ•°ä¸ºé”™è¯¯ä¿¡æ¯å­—ç¬¦ä¸²ã€‚ æ‰§è¡ŒæŸ¥è¯¢è¯­å¥çš„æ–¹æ³•æ¯”è¾ƒå¤æ‚ï¼Œé€šè¿‡å¦‚ä¸‹æ–¹æ³•: 123456789 sqlite3 * sqlite; sqlite3_stmt *stmt =nil; int code = sqlite3_prepare_v2(sqlite, sqlStr, -1, &amp;stmt, NULL); while (sqlite3_step(stmt)==SQLITE_ROW) &#123; char * cString =(char*)sqlite3_column_text(stmt, 0); NSString * value = [NSString stringWithCString:cString?cString:&quot;NULL&quot; encoding:NSUTF8StringEncoding]; NSNumber * value = [NSNumber numberWithLongLong:sqlite3_column_int64(stmt, 1)]; &#125; sqlite3_finalize(stmt); stmtæ˜¯ä¸€ä¸ªæ•°æ®ä½ç½®æŒ‡é’ˆï¼Œæ ‡è®°æŸ¥è¯¢åˆ°æ•°åº“çš„æ•°æ®ä½ç½®ï¼Œsqlite3_prepare_v2()æ–¹æ³•è¿›è¡Œæ•°æ®åº“æŸ¥è¯¢çš„å‡†å¤‡å·¥ä½œï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæˆåŠŸæ‰“å¼€çš„æ•°æ®åº“æŒ‡é’ˆï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºè¦æ‰§è¡Œçš„æŸ¥è¯¢è¯­å¥ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºsqlite3_stmtæŒ‡é’ˆçš„åœ°å€ï¼Œè¿™ä¸ªæ–¹æ³•ä¹Ÿä¼šè¿”å›ä¸€ä¸ªintå€¼ï¼Œä½œä¸ºæ ‡è®°çŠ¶æ€æ˜¯å¦æˆåŠŸã€‚ sqlite3_stepæ–¹æ³•å¯¹stmtæŒ‡é’ˆè¿›è¡Œç§»åŠ¨ï¼Œä¼šé€è¡Œè¿›è¡Œç§»åŠ¨ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªintå€¼ï¼Œå¦‚æœå’ŒSQLITE_ROWå®å¯¹åº”ï¼Œåˆ™è¡¨æ˜æœ‰æ­¤è¡Œæ•°æ®ï¼Œå¯ä»¥é€šè¿‡whileå¾ªç¯æ¥å¯¹æ•°æ®è¿›è¡Œè¯»å–ã€‚ sqlite3_column_XXX()æ˜¯å–è¡Œä¸­æ¯ä¸€åˆ—çš„æ•°æ®ï¼Œæ ¹æ®æ•°æ®ç±»å‹çš„ä¸åŒï¼Œsqlite3_column_XXX()æœ‰ä¸€ç³»åˆ—å¯¹åº”çš„æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¸­ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯stmtæŒ‡é’ˆï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºåˆ—åºå·ã€‚ sqlite3_finalize()æ–¹æ³•å¯¹stmtæŒ‡é’ˆè¿›è¡Œå…³é—­ã€‚ ä¸‰ã€é¢å‘å¯¹è±¡çš„sqliteæ•°æ®åº“æ“ä½œæ¡†æ¶å°è£…ç½‘ä¸Šä¸ä¹æœ‰è®¸å¤šä¼˜ç§€çš„ç¬¬ä¸‰æ–¹sqliteæ•°æ®åº“ä½¿ç”¨æ¡†æ¶ï¼ŒFFDMå°±æ˜¯å…¶ä¸­ä¹‹ä¸€ï¼Œå¹¶ä¸”appleè‡ªå¸¦çš„coreDataä¹Ÿååˆ†ä¼˜ç§€ã€‚è¿™ç¯‡åšå®¢ä¸­æ‰€è¿°å†…å®¹å¹¶ä¸å…¨é¢ï¼Œä»£ç ä¹Ÿå¹¶ä¸ååˆ†å®Œå–„å¥å£®ï¼Œå°è£…å‡ºæ¥çš„ä»£ç é™¤äº†èƒ½å¤Ÿå®ŒæˆåŸºæœ¬çš„æ•°æ®åº“æ“ä½œå¤–ï¼Œæ›´å¤šä¸»è¦æ˜¯å¯¹è®¾è®¡æ€è·¯çš„ç¤ºä¾‹ã€‚ 1.é¢å‘å¯¹è±¡çš„sqliteç®¡ç†ç±»çš„è®¾è®¡æ€è·¯ä¸ºäº†ä¾¿äºä½¿ç”¨ï¼Œåœ¨è®¾è®¡æ—¶ï¼Œæˆ‘ä»¬å°½é‡å°†libsqlite3ä¸­çš„æ–¹æ³•ä¸æš´æ¼åœ¨ä½¿ç”¨å±‚ï¼Œé€šè¿‡é¢å‘åº”ç”¨çš„æ¥å£æ¥è¿›è¡Œæ–¹æ³•çš„è®¾è®¡ï¼Œè®¾è®¡æ€è·¯ç±»å›¾å¦‚ä¸‹ï¼š å›¾ä¸­ï¼Œæ–‡ä»¶ç®¡ç†ä¸­å¿ƒå¯¹æ–‡ä»¶è¿›è¡Œå­˜å–åˆ æ”¹ç®¡ç†ï¼Œä¸æš´æ¼åœ¨å¤–ï¼Œæ•°æ®åº“ç®¡ç†ä¸­å¿ƒè´Ÿè´£å¯¹æ•°æ®åº“çš„åˆ›å»ºï¼Œåˆ é™¤æ‰“å¼€ç­‰æ“ä½œï¼Œå…·ä½“çš„æ•°æ®æ“ä½œç”±æ•°æ®åº“æ“ä½œå¯¹è±¡æ¥å®Œæˆã€‚ 2.æ–‡ä»¶ç®¡ç†ä¸­å¿ƒæ–¹æ³•çš„ç¼–å†™æ–‡ä»¶ç®¡ç†ä¸­å¿ƒä¸»è¦è´Ÿè´£å¯¹æ•°æ®åº“æ–‡ä»¶çš„å­˜å–ï¼Œå¯ä»¥å®ç°å¦‚ä¸‹æ–¹æ³•ï¼š YHBaseCecheCenter.h 12345678910111213141516/** * @brief è·å–æ•°æ®åº“æ–¹æ³•çš„åœ°å€ * * @return åœ°å€å­—ç¬¦ä¸² * */-(NSString *)getDataBaseFilePath;/** * @brief è·å–æŸä¸ªæ•°æ®åº“çš„å¤§å° * * @param name æ•°æ®åº“åç§° * * @return æ–‡ä»¶å¤§å° å•ä½M * */-(float)getSizeFromDataBaseName:(NSString *)name; YHBaseCecheCenter.m 123456789101112131415-(NSString *)getDataBaseFilePath&#123; return NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES).firstObject;&#125;-(float)getSizeFromDataBaseName:(NSString *)name&#123; NSString * path = [NSString stringWithFormat:@&quot;/%@/%@&quot;,NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES).firstObject,name]; return [self fileSizeAtPath:path]/(1024.0*1024.0);&#125;//è·å–æ–‡ä»¶å¤§å°- (long long) fileSizeAtPath:(NSString*) filePath&#123; NSFileManager* manager = [NSFileManager defaultManager]; if ([manager fileExistsAtPath:filePath])&#123; return [[manager attributesOfItemAtPath:filePath error:nil] fileSize]; &#125; return 0;&#125; åœ¨iOSç³»ç»Ÿä¸­å› ä¸ºå…¶æ²™ç›’ç»“æ„çš„é™åˆ¶ï¼Œæ•°æ®åº“å¿…é¡»æ–¹æ³•documentsç›®å½•ä¸‹æ‰èƒ½æ­£å¸¸æ‰“å¼€ä½¿ç”¨ã€‚ 3.æ•°æ®åº“ç®¡ç†ä¸­å¿ƒçš„è®¾è®¡æ•°æ®åº“ç®¡ç†ä¸­å¿ƒä¸»è¦è´Ÿè´£å¯¹æ•°æ®åº“çš„å®è§‚æ“ä½œï¼Œé‡‡ç”¨ç±»æ–¹æ³•çš„è®¾è®¡æ¨¡å¼ï¼Œå¦‚ä¸‹ YHBaseSQLiteManager.h 123456789101112131415161718192021222324252627282930/** * @brief æ‰“å¼€ä¸€ä¸ªæ•°æ®åº“ å¦‚æœä¸å­˜åœ¨åˆ™ä¼šåˆ›å»º * * @param name æ•°æ®åº“åç§° * * @return æ•°æ®åº“æ“ä½œå¯¹è±¡ å¦‚æœåˆ›å»ºå¤±è´¥ä¼šè¿”å›nil * */+(YHBaseSQLiteContext *)openSQLiteWithName:(NSString *)name;/** * @brief è·å–æ•°æ®åº“æ–‡ä»¶çš„å¤§å° å•ä½M * * @param dataBase æ•°æ®åº“ä¸Šä¸‹æ–‡å¯¹è±¡ * * @return æ•°æ®åº“æ–‡ä»¶å¤§å° */+(float)getSizeOfDataBase:(YHBaseSQLiteContext *)dataBase;/** * @brief è·å–æ•°æ®åº“æ–‡ä»¶çš„å¤§å° å•ä½M * * @param dataBaseName æ•°æ®åº“åç§° * * @return æ•°æ®åº“æ–‡ä»¶å¤§å° */+(float)getSizeOfDataBaseName:(NSString *)dataBaseName;/** * @brief åˆ é™¤æ‰€æœ‰æ•°æ®åº“ * */+(void)removeDataBase; YHBaseSQLiteManager.m 12345678910111213141516171819202122+(YHBaseSQLiteContext *)openSQLiteWithName:(NSString *)name&#123; NSString * path = [[YHBaseCecheCenter sharedTheSingletion]getDataBaseFilePath]; YHBaseSQLiteContext * context = [[YHBaseSQLiteContext alloc]init]; context.name = name; BOOL success = [context openDataBaeWithName:[NSString stringWithFormat:@&quot;%@/%@&quot;,path,name]]; if (success) &#123; return context; &#125;else&#123; return nil; &#125;&#125;+(float)getSizeOfDataBase:(YHBaseSQLiteContext *)dataBase&#123; return [[YHBaseCecheCenter sharedTheSingletion]getSizeFromDataBaseName:dataBase.name];&#125;+(float)getSizeOfDataBaseName:(NSString *)dataBaseName&#123; return [[YHBaseCecheCenter sharedTheSingletion]getSizeFromDataBaseName:dataBaseName];&#125;+(void)removeDataBase&#123; NSString * path = [[YHBaseCecheCenter sharedTheSingletion]getDataBaseFilePath]; return [[YHBaseCecheCenter sharedTheSingletion]removeCacheFromPath:path];&#125; 4.æ•°æ®åº“æ“ä½œå¯¹è±¡å°†æ“ä½œæ•°æ®åº“çš„æ ¸å¿ƒæ–¹æ³•å°è£…åœ¨è¿™ä¸ªç±»ä¸­ï¼š YHBaseSQLiteContext.h 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115/** *æ“ä½œçš„æ•°æ®åº“åç§° */@property(nonatomic,strong)NSString * name;/** *å†…å«sqlite3 å¯¹è±¡ */@property(nonatomic,assign)sqlite3 * sqlite3_db;/** * @brief æ‰“å¼€ä¸€ä¸ªæ•°æ®åº“ ä¸å­˜åœ¨åˆ™åˆ›å»º * * @param path æ•°æ®åº“è·¯å¾„ * * @return æ˜¯å¦æ“ä½œæˆåŠŸ */-(BOOL)openDataBaeWithName:(NSString *)path;/** * @brief å†æ•°æ®åº“ä¸­åˆ›å»ºä¸€å¼ è¡¨ å¦‚æœå·²ç»å­˜åœ¨ ä¼šè¿”å›é”™è¯¯ä¿¡æ¯ * * @param name è¡¨çš„åç§° * * @prarm dic è¡¨ä¸­çš„é”® å…¶ä¸­å­—å…¸ä¸­éœ€ä¼ å…¥ é”®åï¼šç±»å‹ ç±»å‹çš„å®å®šä¹‰åœ¨YHBaseSQLTypeHeader.hä¸­ * * @param callBack ç»“æœå›è°ƒ */-(void)createTableWithName:(NSString *)name keysDictionary:(NSDictionary&lt;NSString*,NSString*&gt; *) dic callBack:(void (^)(YHBaseSQLError * error))complete;/** * @brief å‘è¡¨ä¸­æ·»åŠ ä¸€æ¡æ•°æ® * * @param dataDic æ·»åŠ æ•°æ®çš„é”®å€¼å¯¹ * * @param name æ’å…¥è¡¨çš„åç§° * * @complete å›è°ƒ */-(void)insertData:(NSDictionary&lt;NSString *,id&gt;*)dataDic intoTable:(NSString *)name callBack:(void (^)(YHBaseSQLError * error))complete;/** * @brief å‘è¡¨ä¸­æ·»åŠ ä¸€ä¸ªé”® * * @param kName æ·»åŠ çš„é”® * * @prarm type ç±»å‹ * * @prarm tableName è¡¨åç§° * * @prarm complete ç»“æœå›è°ƒ */-(void)addKey:(NSString *)kName keyType:(NSString *)type intoTable:(NSString *)tableName callBack:(void(^)(YHBaseSQLError *error))complete;/** * @brief ä¿®æ”¹æ•°æ® * * @param dataDic æ–°çš„é”®å€¼ * * @param wlStr æ¡ä»¶å­—ç¬¦ä¸² ä¸€èˆ¬é€šè¿‡ä¸»é”®æ‰¾åˆ°å¯¹åº”æ•°æ®ä¿®æ”¹ å¯ä»¥ä¸ºnil * * @param complete ç»“æœå›è°ƒ */-(void)update:(NSDictionary&lt;NSString*,id&gt; *)dataDic inTable:(NSString *)tableName whileString:(NSString *)wlStr callBack:(void(^)(YHBaseSQLError * error))complete;/** * @brief åˆ é™¤æ•°æ® * * @param tableName è¡¨å * * @param wlStr æ¡ä»¶å­—ç¬¦ä¸² ä¸€èˆ¬é€šè¿‡ä¸»é”®æ‰¾åˆ°å¯¹åº”æ•°æ®åˆ é™¤ å¯ä»¥ä¸ºnil ä¸ä¼ è¿™ä¸ªå‚æ•°å°†åˆ é™¤æ‰€æœ‰æ•°æ® * */-(void)deleteDataFromTable:(NSString *)tableName whereString:(NSString *)wlStr callBack:(void(^)(YHBaseSQLError * error))complete;/** * @brief åˆ é™¤ä¸€å¼ è¡¨ * * @param tableName è¡¨å * */-(void)dropTable:(NSString *)tableName callBack:(void(^)(YHBaseSQLError * error))complete;/** * @brief æŸ¥è¯¢æ•°æ® * * @param keys è¦æŸ¥è¯¢çš„é”®å€¼ åŠå…¶å¯¹åº”çš„æ•°æ®ç±»å‹ å¯ä»¥ä¸ºnilåˆ™æŸ¥è¯¢å…¨éƒ¨ * * @param tableName è¡¨å * * @param orderKey è¿›è¡Œæ’åºçš„é”®å€¼ å¯ä»¥ä¸ºnil åˆ™ä¸æ’åº * * @param type æ’åºæ–¹å¼ åœ¨YHBaseSQLTypeHeaderä¸­æœ‰å®å®šä¹‰ * * @param wlstr æŸ¥è¯¢æ¡ä»¶ åŒäºæŸ¥è¯¢å•ä¸ªæ•°æ® * * @param complete dataArrayä¸ºæŸ¥è¯¢åˆ°çš„æ•°æ® å…¶å†…ä¸ºå­—å…¸ * */-(void)selectKeys:(NSArray&lt;NSDictionary *&gt; *)keys fromTable:(NSString*)tableName orderBy:(NSString *)orderKey orderType:(NSString *)type whileStr:(NSString *)wlstr callBack:(void(^)(NSArray&lt;NSDictionary *&gt; * dataArray,YHBaseSQLError * error))complete;/** * @brief å…³é—­æ•°æ®åº“ä¸Šä¸‹æ–‡æ“ä½œ * è°ƒç”¨æ­¤æ–¹æ³•å è¿™ä¸ªcontextå¯¹è±¡å°†ä¸å†æœ‰æ•ˆ å¦‚æœå†éœ€è¦ä½¿ç”¨ éœ€è¦YHBaseSQLiteManagerä¸­çš„ç±»æ–¹æ³•å†æ¬¡è¿”å› */-(void)closeContext; YHBaseSQLiteContext.m 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262-(BOOL)openDataBaeWithName:(NSString *)path&#123; if (sqlite3_open([path UTF8String], &amp;_sqlite3_db)!=SQLITE_OK) &#123; sqlite3_close(_sqlite3_db); _sqlite3_db=nil; return NO; &#125;else&#123; return YES; &#125;&#125;-(void)createTableWithName:(NSString *)name keysDictionary:(NSDictionary&lt;NSString *,NSString *&gt; *)dic callBack:(void (^)(YHBaseSQLError *))complete&#123; NSMutableString * keys = [[NSMutableString alloc]init]; for (int i=0; i&lt;dic.allKeys.count; i++) &#123; NSString * key = dic.allKeys[i]; if (i&lt;dic.allKeys.count-1) &#123; [keys appendFormat:@&quot;%@ %@,&quot;,key,[dic objectForKey:key]]; &#125;else&#123; [keys appendFormat:@&quot;%@ %@&quot;,key,[dic objectForKey:key]]; &#125; &#125; NSString * sqlStr = [NSString stringWithFormat:@&quot;create table %@(%@)&quot;,name,keys]; [self runSQL:sqlStr callBack:^(YHBaseSQLError * error) &#123; if (complete) &#123; complete(error); &#125; &#125;];&#125;-(void)insertData:(NSDictionary&lt;NSString *,id&gt; *)dataDic intoTable:(NSString *)name callBack:(void (^)(YHBaseSQLError *))complete&#123; NSMutableString * keys = [[NSMutableString alloc]init]; NSMutableString * values = [[NSMutableString alloc]init]; for (int i=0; i&lt;dataDic.allKeys.count; i++) &#123; NSString * key = dataDic.allKeys[i]; if (i&lt;dataDic.count-1) &#123; [keys appendFormat:@&quot;%@,&quot;,key]; [values appendFormat:@&quot;\\&quot;%@\\&quot;,&quot;,[dataDic objectForKey:key]]; &#125;else&#123; [keys appendFormat:@&quot;%@&quot;,key]; [values appendFormat:@&quot;\\&quot;%@\\&quot;&quot;,[dataDic objectForKey:key]]; &#125; &#125; NSString * sqlStr = [NSString stringWithFormat:@&quot;insert into %@(%@) values(%@)&quot;,name,keys,values]; [self runSQL:sqlStr callBack:^(YHBaseSQLError *error) &#123; if (complete) &#123; complete(error); &#125; &#125;];&#125;-(void)addKey:(NSString *)kName keyType:(NSString *)type intoTable:(NSString *)tableName callBack:(void (^)(YHBaseSQLError *))complete&#123; NSString * sqlStr = [NSString stringWithFormat:@&quot;alter table %@ add %@ %@&quot;,tableName,kName,type]; [self runSQL:sqlStr callBack:^(YHBaseSQLError *error) &#123; if (complete) &#123; complete(error); &#125; &#125;];&#125;-(void)update:(NSDictionary&lt;NSString *,id&gt; *)dataDic inTable:(NSString *)tableName whileString:(NSString *)wlStr callBack:(void (^)(YHBaseSQLError *))complete&#123; NSMutableString * sqlStr = [[NSMutableString alloc]init]; [sqlStr appendFormat:@&quot;update %@ set &quot;,tableName]; for (int i=0; i&lt;dataDic.allKeys.count; i++) &#123; NSString * key = dataDic.allKeys[i]; if (i&lt;dataDic.allKeys.count-1) &#123; [sqlStr appendFormat:@&quot;%@=\\&quot;%@\\&quot;,&quot;,key,[dataDic objectForKey:key]]; &#125;else&#123; [sqlStr appendFormat:@&quot;%@=\\&quot;%@\\&quot;&quot;,key,[dataDic objectForKey:key]]; if (wlStr!=nil) &#123; [sqlStr appendFormat:@&quot; where %@&quot;,wlStr]; &#125; &#125; &#125; [self runSQL:sqlStr callBack:^(YHBaseSQLError *error) &#123; if (complete) &#123; complete(error); &#125; &#125;];&#125;-(void)deleteDataFromTable:(NSString *)tableName whereString:(NSString *)wlStr callBack:(void (^)(YHBaseSQLError *))complete&#123; NSMutableString * sqlStr = [[NSMutableString alloc]init]; [sqlStr appendFormat:@&quot;delete from %@&quot;,tableName]; if (wlStr!=nil) &#123; [sqlStr appendFormat:@&quot; where %@&quot;,wlStr]; &#125; [self runSQL:sqlStr callBack:^(YHBaseSQLError *error) &#123; if (complete) &#123; complete(error); &#125; &#125;];&#125;-(void)dropTable:(NSString *)tableName callBack:(void (^)(YHBaseSQLError *))complete&#123; NSString * sqlStr = [NSString stringWithFormat:@&quot;drop table %@&quot;,tableName]; [self runSQL:sqlStr callBack:^(YHBaseSQLError *error) &#123; if (complete) &#123; complete(error); &#125; &#125;];&#125;-(void)selectKeys:(NSArray&lt;NSDictionary *&gt; *)keys fromTable:(NSString *)tableName orderBy:(NSString *)orderKey orderType:(NSString *)type whileStr:(NSString *)wlstr callBack:(void (^)(NSArray&lt;NSDictionary *&gt; *, YHBaseSQLError *))complete&#123; NSMutableString * sqlStr = [[NSMutableString alloc]init]; [sqlStr appendFormat:@&quot;select&quot;]; if (keys==nil||keys.count==0) &#123; [sqlStr appendFormat:@&quot; * from %@&quot;,tableName]; &#125;else&#123; for (int i=0; i&lt;keys.count; i++) &#123; if (i&lt;keys.count-1) &#123; [sqlStr appendFormat:@&quot; %@,&quot;,keys[i].allKeys.firstObject]; &#125;else&#123; [sqlStr appendFormat:@&quot; %@ from %@&quot;,keys[i].allKeys.firstObject,tableName]; &#125; &#125; &#125; if (wlstr) &#123; [sqlStr appendFormat:@&quot; where %@&quot;,wlstr]; &#125; if (orderKey) &#123; [sqlStr appendFormat:@&quot; order by %@&quot;,orderKey]; &#125; if (type) &#123; [sqlStr appendFormat:@&quot; %@&quot;,type]; &#125; NSMutableArray * keysArr = [[NSMutableArray alloc]init]; NSMutableArray * keysTypeArr = [[NSMutableArray alloc]init]; if (keys==nil||keys.count==0) &#123; NSArray&lt;NSDictionary *&gt; * tmpArr = [self getTheTableAllKeys:tableName]; for (int i=0; i&lt;tmpArr.count; i++) &#123; NSString * key = tmpArr[i].allKeys.firstObject; [keysArr addObject:key]; [keysTypeArr addObject:[tmpArr[i] objectForKey:key]]; &#125; &#125;else&#123; for (int i=0; i&lt;keys.count; i++) &#123; NSString * key = keys[i].allKeys.firstObject; [keysArr addObject:key]; [keysTypeArr addObject:[keys[i] objectForKey:key]]; &#125; &#125; [self runSelectSQL:sqlStr withKeys:keysArr withDataType:keysTypeArr callBack:^(NSArray&lt;NSDictionary *&gt; *dataArray, YHBaseSQLError *error) &#123; if (complete) &#123; complete(dataArray,error); &#125; &#125;]; &#125;-(void)closeContext&#123; sqlite3_close(_sqlite3_db); _sqlite3_db = nil;&#125;//å†…éƒ¨æ–¹æ³• è¿è¡Œåˆ›å»ºç‹¬ç«‹çš„éæŸ¥è¯¢SQLè¯­å¥-(void)runSQL:(NSString *)sql callBack:(void(^)(YHBaseSQLError * error))complete&#123; char * err; int code = sqlite3_exec(_sqlite3_db, [sql UTF8String], NULL, NULL, &amp;err); if (code!=SQLITE_OK) &#123; YHBaseSQLError * error = [[YHBaseSQLError alloc]init]; error.errorInfo = [NSString stringWithCString:err encoding:NSUTF8StringEncoding]; error.errorCode = code; complete(error); &#125;else&#123; complete(nil); &#125;&#125;//è¿è¡ŒæŸ¥è¯¢è¯­å¥-(void)runSelectSQL:(NSString *)sql withKeys:(NSArray *)keys withDataType:(NSArray *)dataType callBack:(void(^)(NSArray&lt;NSDictionary *&gt; * dataArray, YHBaseSQLError * error))complete&#123; sqlite3_stmt *stmt =nil; int code = sqlite3_prepare_v2(_sqlite3_db, [sql UTF8String], -1, &amp;stmt, NULL); if (code!=SQLITE_OK) &#123; YHBaseSQLError * error = [[YHBaseSQLError alloc]init]; error.errorInfo = @&quot;æŸ¥è¯¢å¤±è´¥&quot;; error.errorCode=code; complete(nil,error); &#125;else&#123; NSMutableArray * resultArray = [[NSMutableArray alloc]init]; while (sqlite3_step(stmt)==SQLITE_ROW) &#123; //æ•°æ®ç±»å‹çš„åˆ†åˆ«è§£æ NSMutableDictionary * dic = [[NSMutableDictionary alloc]init]; for (int i=0; i&lt;dataType.count; i++) &#123; NSString * type = dataType[i]; if ([type isEqualToString:YHBASE_SQL_DATATYPE_BINARY]) &#123; int length = sqlite3_column_bytes(stmt, i); const void *data = sqlite3_column_blob(stmt, i); NSData * value = [NSData dataWithBytes:data length:length]; [dic setObject:value forKey:keys[i]]; &#125;else if([type isEqualToString:YHBASE_SQL_DATATYPE_BLOB])&#123; int length = sqlite3_column_bytes(stmt, i); const void *data = sqlite3_column_blob(stmt, i); NSData * value = [NSData dataWithBytes:data length:length]; [dic setObject:value forKey:keys[i]]; &#125;else if([type isEqualToString:YHBASE_SQL_DATATYPE_BOOLEAN])&#123; NSNumber * value = [NSNumber numberWithInt:sqlite3_column_int(stmt, i)]; [dic setObject:value forKey:keys[i]]; &#125;else if([type isEqualToString:YHBASE_SQL_DATATYPE_CURRENCY])&#123; NSNumber * value = [NSNumber numberWithLong:sqlite3_column_int64(stmt, i)]; [dic setObject:value forKey:keys[i]]; &#125;else if([type isEqualToString:YHBASE_SQL_DATATYPE_DATE])&#123; char * cString =(char*)sqlite3_column_text(stmt, i); NSString * value = [NSString stringWithCString:cString?cString:&quot;NULL&quot; encoding:NSUTF8StringEncoding]; [dic setObject:value forKey:keys[i]]; &#125;else if([type isEqualToString:YHBASE_SQL_DATATYPE_DOUBLE])&#123; NSNumber * value = [NSNumber numberWithFloat:sqlite3_column_double(stmt, i)]; [dic setObject:value forKey:keys[i]]; &#125;else if([type isEqualToString:YHBASE_SQL_DATATYPE_FLOAT])&#123; NSNumber * value = [NSNumber numberWithFloat:sqlite3_column_double(stmt, i)]; [dic setObject:value forKey:keys[i]]; &#125;else if([type isEqualToString:YHBASE_SQL_DATATYPE_INTRGER])&#123; NSNumber * value = [NSNumber numberWithInt:sqlite3_column_int(stmt, i)]; [dic setObject:value forKey:keys[i]]; &#125;else if([type isEqualToString:YHBASE_SQL_DATATYPE_REAL])&#123; NSNumber * value = [NSNumber numberWithDouble:sqlite3_column_int(stmt, i)]; [dic setObject:value forKey:keys[i]]; &#125;else if([type isEqualToString:YHBASE_SQL_DATATYPE_SMALLINT])&#123; NSNumber * value = [NSNumber numberWithShort:sqlite3_column_int(stmt, i)]; [dic setObject:value forKey:keys[i]]; &#125;else if([type isEqualToString:YHBASE_SQL_DATATYPE_TEXT])&#123; char * cString =(char*)sqlite3_column_text(stmt, i); NSString * value = [NSString stringWithCString:cString?cString:&quot;NULL&quot; encoding:NSUTF8StringEncoding]; [dic setObject:value forKey:keys[i]]; &#125;else if([type isEqualToString:YHBASE_SQL_DATATYPE_TIME])&#123; char * cString =(char*)sqlite3_column_text(stmt, i); NSString * value = [NSString stringWithCString:cString?cString:&quot;NULL&quot; encoding:NSUTF8StringEncoding]; [dic setObject:value forKey:keys[i]]; &#125;else if([type isEqualToString:YHBASE_SQL_DATATYPE_TIMESTAMP])&#123; NSNumber * value = [NSNumber numberWithLongLong:sqlite3_column_int64(stmt, i)]; [dic setObject:value forKey:keys[i]]; &#125;else if([type isEqualToString:YHBASE_SQL_DATATYPE_VARCHAR])&#123; char * cString =(char*)sqlite3_column_text(stmt, i); NSString * value = [NSString stringWithCString:cString?cString:&quot;NULL&quot; encoding:NSUTF8StringEncoding]; [dic setObject:value forKey:keys[i]]; &#125; &#125; [resultArray addObject:dic]; &#125; sqlite3_finalize(stmt); stmt=nil; complete(resultArray,nil); &#125;&#125;//è·å–è¡¨ä¸­æ‰€æœ‰å­—æ®µåå’Œç±»å‹-(NSArray&lt;NSDictionary *&gt; *)getTheTableAllKeys:(NSString *)tableName&#123; NSMutableArray * array = [[NSMutableArray alloc]init]; NSString * getColumn = [NSString stringWithFormat:@&quot;PRAGMA table_info(%@)&quot;,tableName]; sqlite3_stmt *statement; sqlite3_prepare_v2(_sqlite3_db, [getColumn UTF8String], -1, &amp;statement, nil); while (sqlite3_step(statement) == SQLITE_ROW) &#123; char *nameData = (char *)sqlite3_column_text(statement, 1); NSString *columnName = [[NSString alloc] initWithUTF8String:nameData]; char *typeData = (char *)sqlite3_column_text(statement, 2); NSString *columntype = [NSString stringWithCString:typeData encoding:NSUTF8StringEncoding]; NSDictionary * dic = @&#123;columnName:columntype&#125;; [array addObject:dic]; &#125; sqlite3_finalize(statement); statement=nil; return array;&#125; 5.é”™è¯¯ä¿¡æ¯ç±»å¯ä»¥å°†æ•°æ®åº“æ“ä½œä¸­çš„å¼‚å¸¸æŠ›å‡ºæç¤ºå¼€å‘è€…YHBaseSQLError.h 12345678/** *å¼‚å¸¸çš„æç¤ºä¿¡æ¯ */__PROPERTY_NO_STRONG__(NSString *, errorInfo);/** *å¼‚å¸¸çš„å¯¹åº”codeç  */__PROPERTY_NO_ASSIGN__(NSInteger, errorCode); è¿˜æœ‰ä¸€ä¸ªå¤´æ–‡ä»¶ä¸­å®šä¹‰äº†sqliteæ•°æ®åº“æ”¯æŒçš„æ•°æ®ç±»å‹å’Œæ’åºå®å®šä¹‰ï¼š YHBaseSQLTypeHeader.h 1234567891011121314151617#define YHBASE_SQL_DATATYPE_SMALLINT @&quot;smallint&quot; //short#define YHBASE_SQL_DATATYPE_INTRGER @&quot;integer&quot; //int#define YHBASE_SQL_DATATYPE_REAL @&quot;real&quot; //å®æ•°#define YHBASE_SQL_DATATYPE_FLOAT @&quot;float&quot; //float#define YHBASE_SQL_DATATYPE_DOUBLE @&quot;double&quot; //double#define YHBASE_SQL_DATATYPE_CURRENCY @&quot;currency&quot; //long#define YHBASE_SQL_DATATYPE_VARCHAR @&quot;varchar&quot; //char#define YHBASE_SQL_DATATYPE_TEXT @&quot;text&quot; //string#define YHBASE_SQL_DATATYPE_BINARY @&quot;binary&quot; //äºŒè¿›åˆ¶#define YHBASE_SQL_DATATYPE_BLOB @&quot;blob&quot; //é•¿äºŒè¿›åˆ¶#define YHBASE_SQL_DATATYPE_BOOLEAN @&quot;boolean&quot; //bool#define YHBASE_SQL_DATATYPE_DATE @&quot;date&quot; //æ—¥æœŸ#define YHBASE_SQL_DATATYPE_TIME @&quot;time&quot; //æ—¶é—´#define YHBASE_SQL_DATATYPE_TIMESTAMP @&quot;timestamp&quot;//æ—¶é—´æˆ³#define YHBASE_SQL_ORDERTYPE_ASC @&quot;asc&quot; //å‡åº#define YHBASE_SQL_ORDERTYPE_DESC @&quot;desc&quot; //é™åº å››ã€ä½¿ç”¨åœ¨ä½¿ç”¨æ—¶ï¼Œç›´æ¥è°ƒç”¨contextçš„ç›¸åº”æ–¹æ³•æ“ä½œæ•°æ®åº“å³å¯ï¼Œä¾‹å¦‚ï¼š 12345678YHBaseSQLiteContext * context = [YHBaseSQLiteManager openSQLiteWithName:@&quot;testDataBase&quot;]; if (context) &#123; [context selectKeys:nil fromTable:@&quot;MySQL&quot; orderBy:@&quot;age&quot; orderType:YHBASE_SQL_ORDERTYPE_DESC whileStr:@&quot;age&gt;18&quot; callBack:^(NSArray&lt;NSDictionary *&gt; *dataArray, YHBaseSQLError *error) &#123; NSLog(@&quot;%@&quot;,dataArray); NSLog(@&quot;%@&quot;,error.errorInfo); [context closeContext]; &#125;]; &#125; ä¸Šé¢çš„ä»£ç å°†æŸ¥è¯¢textDataBaseæ•°æ®åº“ä¸­MySQLè¡¨é‡Œæ‰€æœ‰ageåˆ—å¤§äº18çš„æ•°æ®ï¼Œå¹¶æŒ‰ç…§ageä»å°åˆ°å¤§è¿›è¡Œæ’åºï¼Œæ•°æ®ç»“æœåœ¨å›è°ƒçš„dataArrayä¸­ã€‚ å¤–ï¼šå®Œæ•´çš„ä»£ç åœ¨ä¸‹é¢çš„gitåœ°å€ä¸­ï¼Œè¿™ä¸ªgité¡¹ç›®æ˜¯ä¸€ä¸ªåŸºç¡€çš„å¼€å‘æ¡†æ¶ï¼Œé‡Œé¢å°è£…äº†è®¸å¤šå¼€å‘å’Œè°ƒè¯•å¸¸ç”¨åŠŸèƒ½ï¼Œä»£ç ä¸å®Œå–„ä¹‹å¤„ï¼Œå¸Œæœ›å¤šå¤šäº¤æµï¼ŒQQ316045346. gitï¼šhttps://github.com/ZYHshao/YHBaseFoundationTestã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"SQLiteæ•°æ®åº“å¸¸ç”¨è¯­å¥åŠMACä¸Šçš„SQLiteå¯è§†åŒ–å·¥å…·MeasSQLliteä½¿ç”¨","slug":"168SQLiteæ•°æ®åº“å¸¸ç”¨è¯­å¥åŠMACä¸Šçš„SQLiteå¯è§†åŒ–å·¥å…·MeasSQLliteä½¿ç”¨","date":"2016-01-10T16:00:00.000Z","updated":"2021-07-06T06:45:24.955Z","comments":true,"path":"2016/01/11/168SQLiteæ•°æ®åº“å¸¸ç”¨è¯­å¥åŠMACä¸Šçš„SQLiteå¯è§†åŒ–å·¥å…·MeasSQLliteä½¿ç”¨/","link":"","permalink":"http://huishao.cc/2016/01/11/168SQLiteæ•°æ®åº“å¸¸ç”¨è¯­å¥åŠMACä¸Šçš„SQLiteå¯è§†åŒ–å·¥å…·MeasSQLliteä½¿ç”¨/","excerpt":"","text":"SQLiteæ•°æ®åº“å¸¸ç”¨è¯­å¥åŠMACä¸Šçš„SQLiteå¯è§†åŒ–å·¥å…·MeasSQLliteä½¿ç”¨ä¸€ã€å¼•è¨€åœ¨ç§»åŠ¨å¼€å‘ä¸­ï¼Œé€šå¸¸ä¼šç”¨åˆ°ä¸€äº›å°å‹çš„æ•°æ®åº“è¿›è¡Œæ•°æ®ç®¡ç†ã€‚SQLiteæ˜¯ä¸€æ¬¾ååˆ†å°å·§ä¾¿æ·çš„æ•°æ®åº“ï¼Œåœ¨iOSå¼€å‘ä¸­ï¼ŒåŸç”Ÿæ¡†æ¶ä¹Ÿå¯¹å…¶æœ‰å¾ˆå¥½çš„æ”¯æŒã€‚ äºŒã€SQLiteå¸¸ç”¨è¯­å¥æ•°æ®åº“å­˜åœ¨çš„æ„ä¹‰å°±åœ¨äºå…¶å¯¹æ•°æ®çš„æ•´åˆå’Œç®¡ç†ï¼Œæ‰€ä»¥æ•°æ®åº“çš„æ ¸å¿ƒæ“ä½œæ— éæ˜¯å¯¹æ•°æ®è¿›è¡Œå¢ï¼Œåˆ ï¼Œæ”¹ï¼ŒæŸ¥å¾—æ“ä½œã€‚ 1.å»ºç«‹æ•°æ®è¡¨è¯­å¥ä¸€ä¸ªæ•°æ®åº“æ–‡ä»¶ä¸­å¯ä»¥ç”±ä¸€äº›è¡¨ç»„æˆï¼Œé€šè¿‡ä¸‹é¢çš„è¯­å¥åœ¨æ•°æ®åº“æ–‡ä»¶ä¸­åˆ›å»ºä¸€å¼ è¡¨ï¼š 1create table class(num integer PRIMARY KEY,name text NOT NULL DEFAULT &quot;1ç­&quot;,count integer CHECK(count&gt;10)) ä¸Šé¢çš„è¯­å¥ä»£ç å¯ä»¥ç®€åŒ–æˆå¦‚ä¸‹çš„æ ¼å¼ï¼š create table è¡¨å(å‚æ•°å1 ç±»å‹ ä¿®é¥°æ¡ä»¶ï¼Œå‚æ•°å2ï¼Œç±»å‹ ä¿®é¥°å‚æ•°ï¼ŒÂ·Â·Â·) sqliteä¸­æ”¯æŒå¦‚ä¸‹çš„ç±»å‹ï¼š smallint çŸ­æ•´å‹ integer æ•´å‹ real å®æ•°å‹ float å•ç²¾åº¦æµ®ç‚¹ double åŒç²¾åº¦æµ®ç‚¹ currency é•¿æ•´å‹ varchar å­—ç¬¦å‹ text å­—ç¬¦ä¸² binary äºŒè¿›åˆ¶æ•°æ® blob äºŒè¿›åˆ¶å¤§å¯¹è±¡ boolean å¸ƒå°”ç±»å‹ date æ—¥æœŸç±»å‹ time æ—¶é—´ç±»å‹ timestamp æ—¶é—´æˆ³ç±»å‹ å…³äºä¿®é¥°æ¡ä»¶ï¼Œå¸¸ç”¨çš„æœ‰å¦‚ä¸‹å‡ ç§ï¼š PRIMARY KEYï¼šå°†æœ¬å‚æ•°è¿™ä¸ªä¸ºä¸»é”®ï¼Œä¸»é”®çš„å€¼å¿…é¡»å”¯ä¸€ï¼Œå¯ä»¥ä½œä¸ºæ•°æ®çš„ç´¢å¼•ï¼Œä¾‹å¦‚ç¼–å·ã€‚ NOT NULL ï¼šæ ‡è®°æœ¬å‚æ•°ä¸ºéç©ºå±æ€§ã€‚ UNIQUEï¼šæ ‡è®°æœ¬å‚æ•°çš„é”®å€¼å”¯ä¸€ï¼Œç±»ä¼¼ä¸»é”®ã€‚ DEFAULT:è®¾ç½®æœ¬å‚æ•°çš„é»˜è®¤å€¼ CHECKï¼šå‚æ•°æ£€æŸ¥æ¡ä»¶ï¼Œä¾‹å¦‚ä¸Šé¢ä»£ç ï¼Œå†™å…¥æ•°æ®æ˜¯countå¿…é¡»å¤§äºæ—¶æ‰æœ‰æ•ˆã€‚ 2.æ·»åŠ æ•°æ®ä½¿ç”¨ä¸‹é¢çš„è¯­å¥æ¥è¿›è¡Œæ•°æ®è¡Œçš„æ·»åŠ æ“ä½œï¼š 1insert into class(num,name,count) values(2,&quot;ä¸‰å¹´2ç­&quot;,58) ä¸Šé¢çš„è¯­å¥ä»£ç å¯ä»¥ç®€åŒ–æˆå¦‚ä¸‹æ ¼å¼ï¼š insert into è¡¨å(é”®1ï¼Œé”®2ï¼ŒÂ·Â·Â·) values(å€¼1ï¼Œå€¼2ï¼ŒÂ·Â·Â·) ä½¿ç”¨ä¸‹é¢çš„è¯­å¥è¿›è¡Œæ•°æ®åˆ—çš„æ·»åŠ ï¼Œå³æ·»åŠ ä¸€ä¸ªæ–°çš„é”®ï¼š 1alter table class add new text alter table è¡¨å add é”®å é”®ç±»å‹ 3.ä¿®æ”¹æ•°æ®ä½¿ç”¨å¦‚ä¸‹è¯­å¥æ¥è¿›è¡Œæ”¹æ“ä½œï¼š 1update class set num=3,name=&quot;æ–°çš„ç­çº§&quot; where num=1 update è¡¨å set é”®1=å€¼1ï¼Œé”®2=å€¼2 where æ¡ä»¶ whereåé¢æ·»åŠ ä¿®æ”¹æ•°æ®çš„æ¡ä»¶ï¼Œä¾‹å¦‚ä¸Šé¢ä»£ç ä¿®æ”¹numä¸º1çš„ç­çº§çš„åå­—å’Œmunå€¼ã€‚ 4.åˆ é™¤æ•°æ®1delete from class where num=1 delete from è¡¨å where æ¡ä»¶ ä¸Šé¢ä»£ç åˆ é™¤numä¸º1çš„ä¸€æ¡æ•°æ®ã€‚ åˆ é™¤ä¸€å¼ è¡¨é€‚ç”¨ä¸‹é¢çš„è¯­å¥ï¼š 1drop table class drop table è¡¨å 5.æŸ¥è¯¢æ“ä½œæŸ¥è¯¢æ“ä½œæ˜¯æ•°æ®åº“çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œsqliteçš„è®¸å¤šæŸ¥è¯¢å‘½ä»¤å¯ä»¥å¿«æ·çš„å®Œæˆå¤æ‚çš„æŸ¥è¯¢åŠŸèƒ½ã€‚ æŸ¥è¯¢è¡¨ä¸­æŸäº›é”®å€¼ï¼š 1select num from class select é”®åï¼Œé”®åÂ·Â·Â· from è¡¨å æŸ¥è¯¢å…¨éƒ¨é”®å€¼æ•°æ®ï¼š 1select * from class select * from è¡¨å *æ˜¯ä¸€ä¸ªå…¨é€šé…ç¬¦ï¼Œä»£è¡¨ä¸é™ä¸ªæ•°ä»»æ„å­—ç¬¦ æŸ¥è¯¢æ’åºï¼š 1select * from class order by count asc select é”®åï¼Œé”®åï¼ŒÂ·Â·Â· from è¡¨å order by é”®å æ’åºæ–¹å¼ order by åé¢å†™è¦è¿›è¡Œæ’åºçš„é”®åï¼Œæ’åºæ–¹å¼æœ‰ ascå‡åº descé™åº æŸ¥æ‰¾æ•°æ®æ¡æ•°ä¸æŸ¥æ‰¾ä½ç½®é™åˆ¶ï¼š 1select * from class limit 2 offset 0 select é”®å from è¡¨å limit æœ€å¤§æ¡æ•° offset æŸ¥è¯¢èµ·å§‹ä½ç½® æ¡ä»¶æŸ¥è¯¢ï¼š 1select * from class where num&gt;2 select é”®å from è¡¨å where æ¡ä»¶ æŸ¥è¯¢æ•°æ®æ¡æ•°ï¼š 1select count(*) from class select count(é”®å) from è¡¨å å»é‡æŸ¥è¯¢ï¼š 1select distinct num from class select distinct é”®å from è¡¨å ä¸‰ã€MesaSQLiteçš„ç®€å•ä½¿ç”¨MesaSQLiteæ˜¯ä¸€æ¬¾å¯è§†åŒ–çš„SQLiteæ•°æ®åº“ç¼–è¾‘è½¯ä»¶ï¼Œä½¿ç”¨ååˆ†æ–¹ä¾¿ã€‚å¦‚ä¸‹åœ°å€æ˜¯ä¸‹è½½é“¾æ¥ï¼š[http://pan.baidu.com/s/1sjW6DC5](http://pan.baidu.com/s/1sjW6DC5)ã€‚ 1.åˆ›å»ºæ•°æ®åº“æ–‡ä»¶æ‰“å¼€MesaSQLiteè½¯ä»¶ï¼Œåœ¨å¯¼èˆªæ ä¸­é€‰æ‹©Fileï¼Œé€‰æ‹©å¼¹å‡ºèœå•ä¸­çš„New DataBaseåˆ›å»ºä¸€ä¸ªæ–°çš„æ•°æ®åº“æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©Open Databaseæ‰“å¼€ä¸€ä¸ªæ•°æ®åº“ã€‚ æ³¨æ„ï¼šé»˜è®¤åˆ›å»ºçš„æ•°æ®åº“æ–‡ä»¶ä¸ºrdbæ ¼å¼ï¼Œæ‰‹åŠ¨æ”¹æˆdbæ ¼å¼å³å¯ã€‚ 2.åˆ›å»ºè¡¨MesaSQLiteæœ‰ä¸¤ç§æ–¹å¼å¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œï¼Œä¸€ç§æ˜¯é€šè¿‡sqlè¯­å¥ï¼Œä¸€ç§æ˜¯é€šè¿‡å¯è§†åŒ–çš„ç•Œé¢ã€‚åœ¨SQL Queryå·¥å…·çª—å£ä¸­ï¼Œå¯ä»¥é€šè¿‡SQLè¯­å¥å¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œï¼Œå¦‚ä¸‹å›¾ï¼š æˆ–è€…åœ¨Structureå·¥å…·çª—å£ä¸­è¿›è¡Œå¯è§†åŒ–çš„åˆ›å»ºï¼š 3.æŸ¥è¯¢æ“ä½œå¯¹äºæ•°æ®çš„æŸ¥è¯¢æ“ä½œï¼ŒåŒæ ·å¯ä»¥é€šè¿‡SQL Queryå·¥å…·é€šè¿‡è¯­å¥è¿›è¡ŒæŸ¥è¯¢æˆ–è€…åœ¨Contentçª—å£ä¸­å¡«å†™æŸ¥è¯¢æ¡ä»¶è¿›è¡ŒæŸ¥è¯¢ï¼Œå¦‚ä¸‹ï¼š ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"å°ç å·¥å…·","slug":"å°ç å·¥å…·","permalink":"http://huishao.cc/categories/å°ç å·¥å…·/"}],"tags":[],"keywords":[{"name":"å°ç å·¥å…·","slug":"å°ç å·¥å…·","permalink":"http://huishao.cc/categories/å°ç å·¥å…·/"}]},{"title":"iOSå¼€å‘å°è£…ä¸€ä¸ªå¯ä»¥å“åº”è¶…é“¾æ¥çš„labelâ€”â€”åŸºäºRCLabelçš„äº¤äº’æ‰©å±•","slug":"167iOSå¼€å‘å°è£…ä¸€ä¸ªå¯ä»¥å“åº”è¶…é“¾æ¥çš„labelâ€”â€”åŸºäºRCLabelçš„äº¤äº’æ‰©å±•","date":"2015-12-22T16:00:00.000Z","updated":"2021-07-06T06:44:22.553Z","comments":true,"path":"2015/12/23/167iOSå¼€å‘å°è£…ä¸€ä¸ªå¯ä»¥å“åº”è¶…é“¾æ¥çš„labelâ€”â€”åŸºäºRCLabelçš„äº¤äº’æ‰©å±•/","link":"","permalink":"http://huishao.cc/2015/12/23/167iOSå¼€å‘å°è£…ä¸€ä¸ªå¯ä»¥å“åº”è¶…é“¾æ¥çš„labelâ€”â€”åŸºäºRCLabelçš„äº¤äº’æ‰©å±•/","excerpt":"","text":"iOSå¼€å‘å°è£…ä¸€ä¸ªå¯ä»¥å“åº”è¶…é“¾æ¥çš„labelâ€”â€”åŸºäºRCLabelçš„äº¤äº’æ‰©å±•ä¸€ã€å¼•è¨€iOSç³»ç»Ÿæ˜¯ä¸€ä¸ªååˆ†æ³¨é‡ç”¨æˆ·ä½“éªŒçš„ç³»ç»Ÿï¼Œåœ¨iOSç³»ç»Ÿä¸­ï¼Œç”¨æˆ·äº¤äº’çš„æ–¹æ¡ˆä¹Ÿååˆ†å¤šï¼Œç„¶è€Œè¦åœ¨labelä¸­çš„æŸéƒ¨åˆ†å­—ä½“ä¸­æ·»åŠ äº¤äº’è¡Œä¸ºç¡®å®ä¸å®¹æ˜“çš„ï¼Œå¦‚æœä½¿ç”¨å…¶ä»–ç±»ä¼¼Buttonçš„æ§ä»¶æ¥æ¨¡æ‹Ÿï¼Œæ–‡å­—çš„æ’ç‰ˆåˆå°†æ˜¯ä¸€ä¸ªè§£å†³ååˆ†å›°éš¾çš„é—®é¢˜ã€‚è¿™ä¸ªé—®é¢˜çš„ç”±æ¥æ˜¯é¡¹ç›®ä¸­çš„ä¸€ä¸ªç•Œé¢ä¸­æœ‰ä¸€äº›å¹¿å‘Šä½æ ‡ç­¾ï¼Œè€Œè¿™äº›å¹¿å‘Šä½çš„æ ‡ç­¾å´æ˜¯åµŒåœ¨æ–‡æœ¬ä¸­çš„ï¼Œå½“ç”¨æˆ·ç‚¹å‡»æ–‡å­—æ ‡ç­¾çš„ä½ç½®æ—¶ï¼Œä¼šè·³è½¬åˆ°å“åº”çš„å¹¿å‘Šé¡µã€‚ CoreTextæ¡†æ¶å’Œä¸€äº›ç¬¬ä¸‰æ–¹åº“å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½†ç›´æ¥ä½¿ç”¨CoreTextååˆ†å¤æ‚ï¼Œç¬¬ä¸‰æ–¹åº“å¤šæ³¨é‡äºå¯Œæ–‡æœ¬çš„æ’ç‰ˆï¼Œå¯¹ç±»ä¼¼æ–‡å­—è¶…é“¾æ¥çš„æ”¯æŒäº¦ä¸æ˜¯ç‰¹åˆ«ç®€æ´ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©ä¸€äº›ç¬¬ä¸‰æ–¹çš„ä¸œè¥¿è¿›è¡Œé’ˆå¯¹æ€§æ›´å¼ºï¼Œæ›´æ˜“ç”¨çš„å°è£…ã€‚ RCLabelæ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„å°†htmlå­—ç¬¦ä¸²è¿›è¡Œæ–‡æœ¬å¸ƒå±€çš„å·¥å…·ï¼Œä»£ç ååˆ†è½»å·§ï¼Œå¹¶ä¸”å…¶æ˜¯åŸºäºCoreTextæ¡†æ¶çš„ï¼Œå…¶åŸç”Ÿæ€§å’Œæ‰©å±•æ€§ååˆ†å¼ºã€‚åœ¨ä»¥å‰çš„ä¸€ç¯‡åšå®¢ä¸­ï¼Œæˆ‘å°†RCLabelè¿›è¡Œäº†ä¸€äº›æ”¹è¿›ï¼Œä½¿å…¶æ”¯æŒå¼‚æ­¥åŠ è½½è¿œç¨‹å›¾ç‰‡ï¼Œå¹¶ä¸”æä¾›äº†æ›´åŠ ç®€æ´çš„é¢å‘åº”ç”¨çš„æ–¹æ³•ï¼Œåšå®¢åœ°å€å¦‚ä¸‹ï¼š æ‰©å±•äºRCLabelçš„æ”¯æŒå¼‚æ­¥åŠ è½½ç½‘ç»œå›¾ç‰‡çš„å¯Œæ–‡æœ¬å¼•æ“çš„è®¾è®¡:http://my.oschina.net/u/2340880/blog/499311 ã€‚ æœ¬ç¯‡åšæ–‡ï¼Œå°†åœ¨å…¶åŸºç¡€ä¸Šï¼Œå®Œæˆè®¾è®¡ä¸€ä¸ªå¯ä»¥æ”¯æŒæ–‡æœ¬è¶…é“¾æ¥çš„æ–‡å­—è§†å›¾ã€‚ äºŒã€è§†å›¾ç±»ä¸æ¨¡å‹ç±»çš„è®¾è®¡RCLabelçš„æ ¸å¿ƒä¹‹å¤„åœ¨äºå°†HTMLæ–‡æœ¬è½¬æ¢ä¸ºå¯Œæ–‡æœ¬å¸ƒå±€è§†å›¾ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å°†è¦æ˜¾ç¤ºçš„æ–‡æœ¬ç¼–ç¨‹htmlå­—ç¬¦ä¸²ï¼Œå°†å…¶å¯ä»¥è¿›è¡Œç”¨æˆ·äº¤äº’çš„éƒ¨åˆ†è¿›è¡Œhtmlè¶…é“¾æ¥å…³è”ï¼ŒRCLabelå°±æ£€æµ‹åˆ°æˆ‘ä»¬ç‚¹å‡»çš„åŒºåŸŸè¿›è¡Œå“åº”é€»è¾‘çš„å›è°ƒã€‚è®¾è®¡ç±»å¦‚ä¸‹ï¼š .hæ–‡ä»¶ 12345678910111213141516171819202122232425262728293031323334353637383940414243//æ–‡æœ¬ä¸è¶…é“¾æ¥åœ°å€å…³è”çš„modelç±» åé¢ä¼šè¯´@class YHBaseLinkingLabelModel;@protocol YHBaseLinkingLabelProtocol &lt;NSObject&gt;@optional/** *ç‚¹å‡»è¶…é“¾æ¥åå‡ºå‘çš„ä»£ç†æ–¹æ³• modelä¸­æœ‰é“¾æ¥åœ°å€å’Œæ–‡å­— */-(void)YHBaseLinkingLabelClickLinking:(YHBaseLinkingLabelModel *)model;/** *å°ºå¯¸æ”¹å˜åå‡ºå‘çš„æ–¹æ³• */-(void)YHBaseLinkingLabelSizeChange:(CGSize)size;@end@interface YHBaseLinkingLabel : YHBaseView/** *æ–‡å­—æ•°ç»„ é‡Œé¢å­˜æ”¾è¿™æ–‡å­—å¯¹åº”çš„è¶…é“¾æ¥å¯¹è±¡ */@property(nonatomic,strong)NSArray&lt;YHBaseLinkingLabelModel *&gt; * textArray;@property(nonatomic,weak)id&lt;YHBaseLinkingLabelProtocol&gt;delegate;/** *è®¾ç½®æ–‡å­—é¢œè‰² */@property(nonatomic,strong)UIColor * textColor;/** *è®¾ç½®è¶…é“¾æ¥æ–‡å­—é¢œè‰² */@property(nonatomic,strong)UIColor * linkColor;/** *è®¾ç½®å­—ä½“å¤§å° */@property(nonatomic,assign)NSUInteger fontSize;/** *è®¾ç½®è¶…é“¾æ¥å­—ä½“å¤§å° */@property(nonatomic,assign)int linkingFontSize;/** *è®¾ç½®æ˜¯å¦æ˜¾ç¤ºä¸‹åˆ’çº¿ */@property(nonatomic,assign)BOOL isShowUnderLine;@end .mæ–‡ä»¶ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124@interface YHBaseLinkingLabel()&lt;YHBaseHtmlViewProcotop&gt;@end@implementation YHBaseLinkingLabel&#123; //ä»¥å‰åšå®¢ä¸­ å°è£…çš„æ˜¾ç¤ºHTMLå­—ç¬¦ä¸²å¯Œæ–‡æœ¬çš„è§†å›¾ YHBaseHtmlView * _label;&#125;/*// é‡è½½ä¸€äº›åˆå§‹åŒ–æ–¹æ³•- (instancetype)init&#123; self = [super init]; if (self) &#123; _label = [[YHBaseHtmlView alloc]init]; [self addSubview:_label]; [_label mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.leading.equalTo(@0); make.trailing.equalTo(@0); make.top.equalTo(@0); make.bottom.equalTo(@0); &#125;]; _label.delegate=self; &#125; return self;&#125;- (instancetype)initWithCoder:(NSCoder *)coder&#123; self = [super initWithCoder:coder]; if (self) &#123; _label = [[YHBaseHtmlView alloc]init]; [self addSubview:_label]; [_label mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.leading.equalTo(@0); make.trailing.equalTo(@0); make.top.equalTo(@0); make.bottom.equalTo(@0); &#125;]; _label.delegate=self; &#125; return self;&#125;- (instancetype)initWithFrame:(CGRect)frame&#123; self = [super initWithFrame:frame]; if (self) &#123; _label = [[YHBaseHtmlView alloc]init]; [self addSubview:_label]; [_label mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.leading.equalTo(@0); make.trailing.equalTo(@0); make.top.equalTo(@0); make.bottom.equalTo(@0); &#125;]; _label.delegate=self; &#125; return self;&#125;//è®¾ç½®æ–‡æœ¬æ•°ç»„-(void)setTextArray:(NSArray&lt;YHBaseLinkingLabelModel *&gt; *)textArray&#123; _textArray = textArray; //è¿›è¡Œhtmlè½¬æ¢ NSString * htmlString = [self transLinkingDataToHtmlStr:textArray]; //è¿›è¡Œå¸ƒå±€ [_label reSetHtmlStr:htmlString]; &#125;-(void)setTextColor:(UIColor *)textColor&#123; _textColor = textColor; _label.fontColor = textColor;&#125;-(void)setLinkColor:(UIColor *)linkColor&#123; _linkColor = linkColor; _label.linkingColor = linkColor;&#125;-(void)setFontSize:(NSUInteger)fontSize&#123; _fontSize = fontSize; [_label setFontSize:(int)fontSize];&#125;-(void)setLinkingFontSize:(int)linkingFontSize&#123; _linkingFontSize = linkingFontSize; [_label setLinkingSize:linkingFontSize];&#125;-(void)setIsShowUnderLine:(BOOL)isShowUnderLine&#123; _isShowUnderLine = isShowUnderLine; [_label setShowUnderLine:isShowUnderLine];&#125;-(NSString *)transLinkingDataToHtmlStr:(NSArray&lt;YHBaseLinkingLabelModel *&gt; *)data&#123; NSMutableString * mutStr = [[NSMutableString alloc]init]; for (int i=0; i&lt;data.count; i++) &#123; //è¿™ä¸ªmodelä¸­å­˜æ”¾çš„æ˜¯è¶…é“¾æ¥éƒ¨åˆ†çš„æ–‡å­—å’Œå¯¹åº”çš„url YHBaseLinkingLabelModel * model = data[i]; if (!model.linking) &#123; [mutStr appendString:model.text]; &#125;else &#123; [mutStr appendString:@&quot;&lt;a href=&quot;]; [mutStr appendString:model.linking]; [mutStr appendString:@&quot;&gt;&quot;]; [mutStr appendString:model.text]; [mutStr appendString:@&quot;&lt;/a&gt;&quot;]; &#125; &#125; return mutStr;&#125;#pragma mark delegate//ç‚¹å‡»çš„å›è°ƒ-(void)YHBaseHtmlView:(YHBaseHtmlView *)htmlView ClickLink:(NSString *)url&#123; for (YHBaseLinkingLabelModel * model in _textArray) &#123; if ([model.linking isEqualToString:url]) &#123; if ([self.delegate respondsToSelector:@selector(YHBaseLinkingLabelClickLinking:)]) &#123; [self.delegate YHBaseLinkingLabelClickLinking:model]; return; &#125; &#125; &#125;&#125;//å¸ƒå±€å°ºå¯¸æ”¹å˜çš„å›è°ƒ-(void)YHBaseHtmlView:(YHBaseHtmlView *)htmlView SizeChanged:(CGSize)size&#123; if ([self.delegate respondsToSelector:@selector(YHBaseLinkingLabelSizeChange:)]) &#123; [self.delegate YHBaseLinkingLabelSizeChange:size]; &#125;&#125;@end ä¸Šé¢æˆ‘ä»¬æœ‰ç”¨åˆ°ä¸€ä¸ªYHBaseLinkingLabelModelç±»ï¼Œè¿™ä¸ªç±»è¿›è¡Œäº†é“¾æ¥ä¸å­—ç¬¦çš„æ˜ å°„ï¼Œè®¾è®¡å¦‚ä¸‹ï¼š 1234567891011@interface YHBaseLinkingLabelModel : YHBaseModel/** *æ–‡å­—å†…å®¹ */@property(nonatomic,strong)NSString * text;/** *è¶…é“¾æ¥åœ°å€ nilåˆ™ä¸ºæ—  */@property(nonatomic,strong)NSString * linking;@end YHBaseHtmlViewç±»æ˜¯å¯¹RCLabelçš„ä¸€å±‚å°è£…ï¼Œå…¶ä¸­ä¹Ÿå¯¹RCLabelè¿›è¡Œäº†ä¸€äº›ä¼˜åŒ–å’Œæ”¹åŠ¨ï¼Œä»£ç è¾ƒå¤šä¸”åœ¨ä¸Šç¯‡åšå®¢ä¸­æœ‰ä»‹ç»ï¼Œè¿™é‡Œä¸å†å¤šåšè§£é‡Šäº†ã€‚ åœ¨ViewControllerä¸­å†™å¦‚ä¸‹ä»£ç è¿›è¡Œä½¿ç”¨ï¼š 12345678910111213141516171819202122232425262728- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view, typically from a nib. YHBaseLinkingLabel * label = [[YHBaseLinkingLabel alloc]initWithFrame:CGRectMake(100, 100, 200, 100)]; NSMutableArray * array = [[NSMutableArray alloc]init]; for (int i=0; i&lt;6; i++) &#123; YHBaseLinkingLabelModel * model = [[YHBaseLinkingLabelModel alloc]init]; if (!(i%2)) &#123; model.text =[NSString stringWithFormat:@&quot;ç¬¬%dä¸ªæ ‡ç­¾&quot;,i]; model.linking = [NSString stringWithFormat:@&quot;ç¬¬%dä¸ªæ ‡ç­¾&quot;,i]; &#125;else&#123; model.text = @&quot;,ä¸èƒ½ç‚¹å¾—æ–‡å­—,&quot;; &#125; [array addObject:model]; &#125; label.textColor = [UIColor blackColor]; label.linkColor = [UIColor purpleColor]; label.fontSize = 15; label.linkingFontSize = 17; label.isShowUnderLine=YES; label.delegate=self; label.textArray = array; [self.view addSubview:label]; &#125;-(void)YHBaseLinkingLabelClickLinking:(YHBaseLinkingLabelModel *)model&#123; NSLog(@&quot;%@&quot;,model.linking);&#125; è¿è¡Œæ•ˆæœå¦‚ä¸‹ï¼š æ•ˆæœä¸é”™ï¼Œå¹¶ä¸”ååˆ†ç®€å•æ˜“ç”¨ï¼Œå¯¹å§ã€‚ æˆ‘å°†è¿™éƒ¨åˆ†çš„ç›¸å…³ä»£ç é›†æˆè¿›äº†ä»¥å‰å†™çš„ä¸€ä¸ªé¡¹ç›®å¼€å‘æ¡†æ¶ä¸­ï¼Œgitåœ°å€æ˜¯ï¼š[https://github.com/ZYHshao/YHBaseFoundationTest](https://github.com/ZYHshao/YHBaseFoundationTest) ã€‚æ€»ä½“çœ‹æ¥ï¼Œè¿™ä¸ªæ¡†æ¶å¹¶ä¸æ˜¯å¹²è´§ï¼Œåªæ˜¯æˆ‘å¼€å‘ä¸­çš„ä¸€äº›ç§¯ç´¯ï¼Œå¦‚æœå¯ä»¥å¸®åˆ°ä½ ï¼Œæ‹©ä¼˜è€Œç”¨ï¼Œå¦‚æœéœ€è¦å’Œæˆ‘äº¤æµï¼ŒQQ316045346ï¼Œå¯¹è§†æ¬¢è¿ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"ä»£ç çµé­‚","slug":"ä»£ç çµé­‚","permalink":"http://huishao.cc/categories/ä»£ç çµé­‚/"}],"tags":[],"keywords":[{"name":"ä»£ç çµé­‚","slug":"ä»£ç çµé­‚","permalink":"http://huishao.cc/categories/ä»£ç çµé­‚/"}]},{"title":"iOSå¼€å‘ä¹‹è“ç‰™é€šè®¯","slug":"166iOSå¼€å‘ä¹‹è“ç‰™é€šè®¯","date":"2015-12-19T16:00:00.000Z","updated":"2021-07-05T11:02:50.896Z","comments":true,"path":"2015/12/20/166iOSå¼€å‘ä¹‹è“ç‰™é€šè®¯/","link":"","permalink":"http://huishao.cc/2015/12/20/166iOSå¼€å‘ä¹‹è“ç‰™é€šè®¯/","excerpt":"","text":"iOSå¼€å‘ä¹‹è“ç‰™é€šè®¯ä¸€ã€å¼•è¨€è“ç‰™æ˜¯è®¾å¤‡è¿‘è·ç¦»é€šä¿¡çš„ä¸€ç§æ–¹ä¾¿æ‰‹æ®µï¼Œåœ¨iPhoneå¼•å…¥è“ç‰™4.0åï¼Œè®¾å¤‡ä¹‹é—´çš„é€šè®¯å˜å¾—æ›´åŠ ç®€å•ã€‚ç›¸å…³çš„è“ç‰™æ“ä½œç”±ä¸“é—¨çš„CoreBluetooth.frameworkè¿›è¡Œç»Ÿä¸€ç®¡ç†ã€‚é€šè¿‡è“ç‰™è¿›è¡Œé€šè®¯äº¤äº’åˆ†ä¸ºä¸¤æ–¹ï¼Œä¸€æ–¹ä¸ºä¸­å¿ƒè®¾å¤‡centralï¼Œä¸€æ–¹ä¸ºå¤–è®¾peripheralï¼Œå¤–è®¾é€šè¿‡å¹¿æ’­çš„æ–¹å¼å‘å¤–å‘é€ä¿¡æ¯ï¼Œä¸­å¿ƒè®¾å¤‡æ£€ç´¢åˆ°å¤–è®¾å‘çš„å¹¿æ’­ä¿¡æ¯ï¼Œå¯ä»¥è¿›è¡Œé…å¯¹è¿æ¥ï¼Œè¿›è€Œè¿›è¡Œæ•°æ®äº¤äº’ã€‚ äºŒã€ä¸­å¿ƒè®¾å¤‡CBCentralManagerCBCentralManageræ˜¯ç®¡ç†ä¸­å¿ƒè®¾å¤‡çš„ç®¡ç†ç±»ï¼Œå…¶ä¸­é‡è¦æ–¹æ³•å¦‚ä¸‹ï¼š 123456//è®¾ç½®ä¸­å¿ƒè®¾å¤‡ä»£ç†@property(assign, nonatomic, nullable) id&lt;CBCentralManagerDelegate&gt; delegate;//ä¸­å¿ƒè®¾å¤‡å½“å‰çŠ¶æ€@property(readonly) CBCentralManagerState state;//ä¸­å¿ƒè®¾å¤‡æ˜¯å¦æ­£åœ¨æ‰«æ@property(readonly) BOOL isScanning NS_AVAILABLE(NA, 9_0); å…¶ä¸­stateæ˜¯ä¸€ä¸ªæšä¸¾ï¼Œæœ‰å…³è“ç‰™æ˜¯å¦å¯ç”¨çš„çŠ¶æ€å¦‚ä¸‹ï¼š 1234567891011121314typedef NS_ENUM(NSInteger, CBCentralManagerState) &#123; //çŠ¶æ€æœªçŸ¥ CBCentralManagerStateUnknown = 0, //è¿æ¥æ–­å¼€ å³å°†é‡ç½® CBCentralManagerStateResetting, //è¯¥å¹³å°ä¸æ”¯æŒè“ç‰™ CBCentralManagerStateUnsupported, //æœªæˆæƒè“ç‰™ä½¿ç”¨ CBCentralManagerStateUnauthorized, //è“ç‰™å…³é—­ CBCentralManagerStatePoweredOff, //è“ç‰™æ­£å¸¸å¼€å¯ CBCentralManagerStatePoweredOn,&#125;; ä¸‹é¢è¿™äº›æ–¹æ³•ç”¨äºåˆå§‹åŒ–ç®¡ç†ä¸­å¿ƒï¼š 1234567891011121314//åˆå§‹åŒ–æ–¹æ³•//è®¾ç½®çš„ä»£ç†éœ€è¦éµå®ˆCBCentralManagerDelegateåè®®//queueå¯ä»¥è®¾ç½®è“ç‰™æ‰«æçš„çº¿ç¨‹ ä¼ å…¥nilåˆ™ä¸ºåœ¨ä¸»çº¿ç¨‹ä¸­è¿›è¡Œ- (instancetype)initWithDelegate:(nullable id&lt;CBCentralManagerDelegate&gt;)delegate queue:(nullable dispatch_queue_t)queue;//æ­¤æ–¹æ³•åŒä¸Š åœ¨optionså­—å…¸ä¸­ç”¨äºè¿›è¡Œä¸€äº›ç®¡ç†ä¸­å¿ƒçš„åˆå§‹åŒ–å±æ€§è®¾ç½®//å­—å…¸ä¸­æ”¯æŒçš„é”®å€¼å¦‚ä¸‹/*NSString * const CBCentralManagerOptionShowPowerAlertKey å¯¹åº”ä¸€ä¸ªNSNumberç±»å‹çš„boolå€¼ï¼Œç”¨äºè®¾ç½®æ˜¯å¦åœ¨å…³é—­è“ç‰™æ—¶å¼¹å‡ºç”¨æˆ·æç¤ºNSString * const CBCentralManagerOptionRestoreIdentifierKey å¯¹åº”ä¸€ä¸ªNSStringå¯¹è±¡ï¼Œè®¾ç½®ç®¡ç†ä¸­å¿ƒçš„æ ‡è¯†ç¬¦ID*/- (instancetype)initWithDelegate:(nullable id&lt;CBCentralManagerDelegate&gt;)delegate queue:(nullable dispatch_queue_t)queue options:(nullable NSDictionary&lt;NSString *, id&gt; *)options; 1234//æ ¹æ®è·å–æ‰€æœ‰å·²çŸ¥è®¾å¤‡- (NSArray&lt;CBPeripheral *&gt; *)retrievePeripheralsWithIdentifiers:(NSArray&lt;NSUUID *&gt; *)identifiers;//æ ¹æ®æœåŠ¡idè·å–æ‰€æœ‰è¿æ¥çš„è®¾å¤‡- (NSArray&lt;CBPeripheral *&gt; *)retrieveConnectedPeripheralsWithServices:(NSArray&lt;CBUUID *&gt; *)serviceUUIDs; åœ¨åˆå§‹åŒ–ç®¡ç†ä¸­å¿ƒå®Œæˆåï¼Œä¼šå›è°ƒä»£ç†ä¸­çš„å¦‚ä¸‹æ–¹æ³•ï¼Œæˆ‘ä»¬å¿…é¡»å®ç°å¦‚ä¸‹æ–¹æ³•ï¼š 12//è¿™ä¸ªæ–¹æ³•ä¸­å¯ä»¥è·å–åˆ°ç®¡ç†ä¸­å¿ƒçš„çŠ¶æ€- (void)centralManagerDidUpdateState:(CBCentralManager *)central; å¦‚æœä¸Šé¢æ–¹æ³•ä¸­ç®¡ç†ä¸­å¿ƒçŠ¶æ€ä¸ºè“ç‰™å¯ç”¨ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢æ–¹æ³•å¼€å¯æ‰«æå¤–è®¾ï¼š 12345678//serviceUUIDsç”¨äºæ‰«æä¸€ä¸ªç‰¹ç‚¹IDçš„å¤–è®¾ optionsç”¨äºè®¾ç½®ä¸€äº›æ‰«æå±æ€§ é”®å€¼å¦‚ä¸‹/*//æ˜¯å¦å…è®¸é‡å¤æ‰«æ å¯¹åº”NSNumberçš„boolå€¼ï¼Œé»˜è®¤ä¸ºNOï¼Œä¼šè‡ªåŠ¨å»é‡NSString *const CBCentralManagerScanOptionAllowDuplicatesKey;//è¦æ‰«æçš„è®¾å¤‡UUID æ•°ç»„ å¯¹åº”NSArrayNSString *const CBCentralManagerScanOptionSolicitedServiceUUIDsKey;*/- (void)scanForPeripheralsWithServices:(nullable NSArray&lt;CBUUID *&gt; *)serviceUUIDs options:(nullable NSDictionary&lt;NSString *, id&gt; *)options; 12//åœæ­¢æ‰«æå¤–è®¾- (void)stopScan; æ‰«æçš„ç»“æœä¼šåœ¨å¦‚ä¸‹ä»£ç†æ–¹æ³•ä¸­å›æ‰ï¼š 1234//peripheral æ‰«æåˆ°çš„å¤–è®¾//advertisementDataæ˜¯å¤–è®¾å‘é€çš„å¹¿æ’­æ•°æ®//RSSI æ˜¯ä¿¡å·å¼ºåº¦- (void)centralManager:(CBCentralManager *)central didDiscoverPeripheral:(CBPeripheral *)peripheral advertisementData:(NSDictionary&lt;NSString *, id&gt; *)advertisementData RSSI:(NSNumber *)RSSI; æ‰«æåˆ°å¤–è®¾åï¼Œé€šè¿‡ä¸‹é¢æ–¹æ³•å¯ä»¥è¿æ¥ä¸€ä¸ªå¤–è®¾ï¼š 123456789101112/*optionsä¸­å¯ä»¥è®¾ç½®ä¸€äº›è¿æ¥è®¾å¤‡çš„åˆå§‹å±æ€§é”®å€¼å¦‚ä¸‹//å¯¹åº”NSNumberçš„boolå€¼ï¼Œè®¾ç½®å½“å¤–è®¾è¿æ¥åæ˜¯å¦å¼¹å‡ºä¸€ä¸ªè­¦å‘ŠNSString *const CBConnectPeripheralOptionNotifyOnConnectionKey;//å¯¹åº”NSNumberçš„boolå€¼ï¼Œè®¾ç½®å½“å¤–è®¾æ–­å¼€è¿æ¥åæ˜¯å¦å¼¹å‡ºä¸€ä¸ªè­¦å‘ŠNSString *const CBConnectPeripheralOptionNotifyOnDisconnectionKey;//å¯¹åº”NSNumberçš„boolå€¼ï¼Œè®¾ç½®å½“å¤–è®¾æš‚åœè¿æ¥åæ˜¯å¦å¼¹å‡ºä¸€ä¸ªè­¦å‘ŠNSString *const CBConnectPeripheralOptionNotifyOnNotificationKey;*/- (void)connectPeripheral:(CBPeripheral *)peripheral options:(nullable NSDictionary&lt;NSString *, id&gt; *)options;//å–æ¶ˆä¸€ä¸ªå¤–è®¾çš„è¿æ¥- (void)cancelPeripheralConnection:(CBPeripheral *)peripheral; è°ƒç”¨è¿‡è¿æ¥å¤–è®¾çš„æ–¹æ³•åï¼Œä¼šå›æ‰å¦‚ä¸‹ä»£ç†æ–¹æ³•ï¼š 123456//è¿æ¥å¤–è®¾æˆåŠŸ- (void)centralManager:(CBCentralManager *)central didConnectPeripheral:(CBPeripheral *)peripheral;//è¿æ¥å¤–è®¾å¤±è´¥- (void)centralManager:(CBCentralManager *)central didFailToConnectPeripheral:(CBPeripheral *)peripheral error:(nullable NSError *)error;//æ–­å¼€å¤–è®¾è¿æ¥- (void)centralManager:(CBCentralManager *)central didDisconnectPeripheral:(CBPeripheral *)peripheral error:(nullable NSError *)error; å½“ç®¡ç†ä¸­å¿ƒæ¢å¤æ—¶ä¼šè°ƒç”¨å¦‚ä¸‹ä»£ç†ï¼š 12345678910//dictä¸­ä¼šä¼ å…¥å¦‚ä¸‹é”®å€¼å¯¹/*//æ¢å¤è¿æ¥çš„å¤–è®¾æ•°ç»„NSString *const CBCentralManagerRestoredStatePeripheralsKey;//æ¢å¤è¿æ¥çš„æœåŠ¡UUIDæ•°ç»„NSString *const CBCentralManagerRestoredStateScanServicesKey;//æ¢å¤è¿æ¥çš„å¤–è®¾æ‰«æå±æ€§å­—å…¸æ•°ç»„NSString *const CBCentralManagerRestoredStateScanOptionsKey;*/- (void)centralManager:(CBCentralManager *)central willRestoreState:(NSDictionary&lt;NSString *, id&gt; *)dict; ä¸‰ã€å¤–è®¾CBPeripheralManagerä»ä¸Šé¢æˆ‘ä»¬çŸ¥é“ï¼Œä¸­å¿ƒè®¾å¤‡æ˜¯ç”¨æ¥æ‰«æå‘¨å›´çš„å¤–è®¾ï¼Œä¸¤å°è®¾å¤‡çš„é€šè®¯ä¸­ï¼Œå¿…é¡»æœ‰ä¸€ä¸ªå……å½“ä¸­å¿ƒè®¾å¤‡ï¼Œä¸€ä¸ªå……å½“å¤–è®¾ï¼Œå¤–è®¾æ˜¯ç”±CBPeripheralManagerè¿›è¡Œç®¡ç†ï¼Œä¸»è¦æ–¹æ³•å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556//è®¾ç½®å¤–è®¾ç®¡ç†ä¸­å¿ƒä»£ç†@property(assign, nonatomic, nullable) id&lt;CBPeripheralManagerDelegate&gt; delegate;//å¤–è®¾çŠ¶æ€ æšä¸¾å¦‚ä¸­å¿ƒè®¾å¤‡@property(readonly) CBPeripheralManagerState state;//æ˜¯å¦æ­£åœ¨å‘é€å¹¿æ’­@property(readonly) BOOL isAdvertising;//ç”¨æˆ·çš„æˆæƒçŠ¶æ€+ (CBPeripheralManagerAuthorizationStatus)authorizationStatus;//åˆå§‹åŒ–å¹¶è®¾ç½®ä»£ç† å‚æ•°çš„å…·ä½“å«ä¹‰ä¸ä¸­å¿ƒè®¾å¤‡ç®¡ç†ä¸­å¿ƒ- (instancetype)initWithDelegate:(nullable id&lt;CBPeripheralManagerDelegate&gt;)delegate queue:(nullable dispatch_queue_t);- (instancetype)initWithDelegate:(nullable id&lt;CBPeripheralManagerDelegate&gt;)delegate queue:(nullable dispatch_queue_t)queue options:(nullable NSDictionary&lt;NSString *, id&gt; *)options;//å¼€å§‹å‘é€å¹¿æ’­//advertisementDataä¸­å¯ä»¥å‘é€çš„æ•°æ®æœ‰çº¦å®š å¦‚ä¸‹/*å¯¹åº”è®¾ç½®NSStringç±»å‹çš„å¹¿æ’­åNSString *const CBAdvertisementDataLocalNameKey;å¤–è®¾åˆ¶é€ å•†çš„NSDataæ•°æ®NSString *const CBAdvertisementDataManufacturerDataKey;å¤–è®¾åˆ¶é€ å•†çš„CBUUIDæ•°æ®NSString *const CBAdvertisementDataServiceDataKey;æœåŠ¡çš„UUIDä¸å…¶å¯¹åº”çš„æœåŠ¡æ•°æ®å­—å…¸æ•°ç»„NSString *const CBAdvertisementDataServiceUUIDsKey;é™„åŠ æœåŠ¡çš„UUIDæ•°ç»„NSString *const CBAdvertisementDataOverflowServiceUUIDsKey;å¤–è®¾çš„å‘é€åŠŸç‡ NSNumberç±»å‹NSString *const CBAdvertisementDataTxPowerLevelKey;å¤–è®¾æ˜¯å¦å¯ä»¥è¿æ¥NSString *const CBAdvertisementDataIsConnectable;æœåŠ¡çš„UUIDæ•°ç»„NSString *const CBAdvertisementDataSolicitedServiceUUIDsKey;*/- (void)startAdvertising:(nullable NSDictionary&lt;NSString *, id&gt; *)advertisementData;//åœæ­¢å‘é€å¹¿æ’­- (void)stopAdvertising;//è®¾ç½®ä¸€ä¸ªè¿æ¥çš„å…·ä½“centralè®¾å¤‡çš„å»¶æ—¶ æšä¸¾å¦‚ä¸‹/*typedef NS_ENUM(NSInteger, CBPeripheralManagerConnectionLatency) &#123; CBPeripheralManagerConnectionLatencyLow = 0, CBPeripheralManagerConnectionLatencyMedium, CBPeripheralManagerConnectionLatencyHigh&#125; NS_ENUM_AVAILABLE(NA, 6_0);*/- (void)setDesiredConnectionLatency:(CBPeripheralManagerConnectionLatency)latency forCentral:(CBCentral *)central;//æ·»åŠ ä¸€ä¸ªæœåŠ¡- (void)addService:(CBMutableService *)service;//ç§»é™¤ä¸€ä¸ªæœåŠ¡- (void)removeService:(CBMutableService *)service;//ç§»é™¤æ‰€æœ‰æœåŠ¡- (void)removeAllServices;//å“åº”ä¸­å¿ƒè®¾å¤‡çš„è¯»å†™è¯·æ±‚- (void)respondToRequest:(CBATTRequest *)request withResult:(CBATTError)result;//æ›´æ–°ä¸€ä¸ªè¿æ¥ä¸­å¿ƒè®¾å¤‡çš„è®¢é˜…ç‰¹å¾å€¼- (BOOL)updateValue:(NSData *)value forCharacteristic:(CBMutableCharacteristic *)characteristic onSubscribedCentrals:(nullable NSArray&lt;CBCentral *&gt; *)centrals; å¤–è®¾ä»£ç†çš„ç›¸å…³æ–¹æ³•å¦‚ä¸‹ï¼š 123456789101112131415161718//è¿™ä¸ªæ–¹æ³•æ˜¯å¿…é¡»å®ç°çš„ çŠ¶æ€å¯ç”¨åå¯ä»¥å‘é€å¹¿æ’­- (void)peripheralManagerDidUpdateState:(CBPeripheralManager *)peripheral;//è¿æ¥å›å¤æ—¶è°ƒç”¨çš„æ–¹æ³• å’ŒcentralManagerç±»ä¼¼- (void)peripheralManager:(CBPeripheralManager *)peripheral willRestoreState:(NSDictionary&lt;NSString *, id&gt; *)dict;//å¼€å§‹å‘é€å¹¿æ’­æ—¶è°ƒç”¨çš„æ–¹æ³•- (void)peripheralManagerDidStartAdvertising:(CBPeripheralManager *)peripheral error:(nullable NSError *)error;//æ·»åŠ æœåŠ¡è°ƒç”¨çš„å›è°ƒ- (void)peripheralManager:(CBPeripheralManager *)peripheral didAddService:(CBService *)service error:(nullable NSError *)error;//å½“ä¸€ä¸ªcentralè®¾å¤‡è®¢é˜…ä¸€ä¸ªç‰¹å¾å€¼æ—¶è°ƒç”¨çš„æ–¹æ³•- (void)peripheralManager:(CBPeripheralManager *)peripheral central:(CBCentral *)central didSubscribeToCharacteristic:(CBCharacteristic *)characteristic;//å–æ¶ˆè®¢é˜…ä¸€ä¸ªç‰¹å¾å€¼æ—¶è°ƒç”¨çš„æ–¹æ³•- (void)peripheralManager:(CBPeripheralManager *)peripheral central:(CBCentral *)central didUnsubscribeFromCharacteristic:(CBCharacteristic *)characteristic;//æ”¶åˆ°è¯»è¯·æ±‚æ—¶è§¦å‘çš„æ–¹æ³•- (void)peripheralManager:(CBPeripheralManager *)peripheral didReceiveReadRequest:(CBATTRequest *)request;//æ”¶åˆ°å†™è¯·æ±‚æ—¶è§¦å‘çš„æ–¹æ³•- (void)peripheralManager:(CBPeripheralManager *)peripheral didReceiveWriteRequests:(NSArray&lt;CBATTRequest *&gt; *)requests;//å¤–è®¾å‡†å¤‡æ›´æ–°ç‰¹å¾å€¼æ—¶è°ƒç”¨çš„æ–¹æ³•- (void)peripheralManagerIsReadyToUpdateSubscribers:(CBPeripheralManager *)peripheral; å››ã€ä¸­å¿ƒè®¾å¤‡ä¸å¤–è®¾å¯¹è±¡CBCentralä¸CBPeripheralä¸Šé¢ä»‹ç»äº†ä¸­å¿ƒè®¾å¤‡ç®¡ç†ç±»ä¸å¤–è®¾ç®¡ç†ç±»ï¼Œè¿™äº›ç±»ç”¨äºå°†è®¾å¤‡è¿æ¥å»ºç«‹èµ·æ¥ï¼Œå™¨å…·çš„æ•°æ®äº¤æ¢çš„æœåŠ¡å’Œä¸€äº›ä¿¡æ¯åˆ™æ˜¯åœ¨å¯¹åº”çš„è®¾å¤‡å¯¹è±¡ä¸­ã€‚ 1ã€ä¸­å¿ƒè®¾å¤‡ CBCentralå±æ€§ä¸æ–¹æ³•1234//è®¾å¤‡UUID@property(readonly, nonatomic) NSUUID *identifier;//ä¸­å¿ƒè®¾å¤‡æœ€å¤§æ¥æ”¶çš„æ•°æ®é•¿åº¦@property(readonly, nonatomic) NSUInteger maximumUpdateValueLength; 2ã€å¤–è®¾CAPeripheralå±æ€§ä¸æ–¹æ³•å¤–è®¾å¯¹è±¡è¦æ¯”ä¸­å¿ƒå¯¹è±¡å¤æ‚çš„å¤šï¼Œå½“centralManagerè¿æ¥åˆ°å¤–è®¾åï¼Œéœ€è¦é€šè¿‡å¤–è®¾å¯¹è±¡çš„ä»£ç†æ–¹æ³•è¿›è¡Œæ•°æ®äº¤äº’ï¼Œå…¶ä¸­ä¸»è¦æ–¹æ³•å±æ€§å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647//è®¾ç½®ä»£ç†@property(assign, nonatomic, nullable) id&lt;CBPeripheralDelegate&gt; delegate;//å¤–è®¾name@property(retain, readonly, nullable) NSString *name;//ä¿¡å·å¼ºåº¦@property(retain, readonly, nullable) NSNumber *RSSI NS_DEPRECATED(NA, NA, 5_0, 8_0);//å¤–è®¾çŠ¶æ€/*typedef NS_ENUM(NSInteger, CBPeripheralState) &#123; CBPeripheralStateDisconnected = 0,//æœªè¿æ¥ CBPeripheralStateConnecting,//æ­£åœ¨é“¾æ¥ CBPeripheralStateConnected,//å·²ç»è¿æ¥ CBPeripheralStateDisconnecting NS_AVAILABLE(NA, 9_0),//æ­£åœ¨æ–­å¼€è¿æ¥&#125; NS_AVAILABLE(NA, 7_0);*/@property(readonly) CBPeripheralState state;//æ‰€æœ‰çš„æœåŠ¡æ•°ç»„@property(retain, readonly, nullable) NSArray&lt;CBService *&gt; *services;//è·å–å½“å‰ä¿¡å·å¼ºåº¦- (void)readRSSI;//æ ¹æ®æœåŠ¡UUIDå¯»æ‰¾æœåŠ¡å¯¹è±¡- (void)discoverServices:(nullable NSArray&lt;CBUUID *&gt; *)serviceUUIDs;//åœ¨æœåŠ¡å¯¹è±¡UUIDæ•°ç»„ä¸­å¯»æ‰¾ç‰¹å®šæœåŠ¡- (void)discoverIncludedServices:(nullable NSArray&lt;CBUUID *&gt; *)includedServiceUUIDs forService:(CBService *)service;//åœ¨ä¸€ä¸ªæœåŠ¡ä¸­å¯»æ‰¾ç‰¹å¾å€¼- (void)discoverCharacteristics:(nullable NSArray&lt;CBUUID *&gt; *)characteristicUUIDs forService:(CBService *)service;//ä»ä¸€ä¸ªç‰¹å¾ä¸­è¯»å–æ•°æ®- (void)readValueForCharacteristic:(CBCharacteristic *)characteristic;//å†™æ•°æ®çš„æœ€å¤§é•¿åº¦//typeæšä¸¾å¦‚ä¸‹/*typedef NS_ENUM(NSInteger, CBCharacteristicWriteType) &#123; CBCharacteristicWriteWithResponse = 0,//å†™æ•°æ®å¹¶ä¸”æ¥æ”¶æˆåŠŸä¸å¦å›æ‰§ CBCharacteristicWriteWithoutResponse,//å†™æ•°æ®ä¸æ¥æ”¶å›æ‰§&#125;;*/- (NSUInteger)maximumWriteValueLengthForType:(CBCharacteristicWriteType)type NS_AVAILABLE(NA, 9_0);//å‘æŸä¸ªç‰¹å¾ä¸­å†™æ•°æ®- (void)writeValue:(NSData *)data forCharacteristic:(CBCharacteristic *)characteristic type:(CBCharacteristicWriteType)type;//ä¸ºåˆ¶å®šçš„ç‰¹å¾å€¼è®¾ç½®ç›‘å¬é€šçŸ¥- (void)setNotifyValue:(BOOL)enabled forCharacteristic:(CBCharacteristic *)characteristic;//å¯»æ‰¾ç‰¹å¾å€¼çš„æè¿°- (void)discoverDescriptorsForCharacteristic:(CBCharacteristic *)characteristic;//è¯»å–ç‰¹å¾çš„æè¿°å€¼- (void)readValueForDescriptor:(CBDescriptor *)descriptor;//å†™ç‰¹å¾çš„æè¿°å€¼- (void)writeValue:(NSData *)data forDescriptor:(CBDescriptor *)descriptor; å¤–è®¾çš„ä»£ç†æ–¹æ³•å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526//å¤–è®¾åç§°æ›´æ”¹æ—¶å›è°ƒçš„æ–¹æ³•- (void)peripheralDidUpdateName:(CBPeripheral *)peripheral NS_AVAILABLE(NA, 6_0);//å¤–è®¾æœåŠ¡å˜åŒ–æ—¶å›è°ƒçš„æ–¹æ³•- (void)peripheral:(CBPeripheral *)peripheral didModifyServices:(NSArray&lt;CBService *&gt; *)invalidatedServices NS_AVAILABLE(NA, 7_0);//ä¿¡å·å¼ºåº¦æ”¹å˜æ—¶è°ƒç”¨çš„æ–¹æ³•- (void)peripheralDidUpdateRSSI:(CBPeripheral *)peripheral error:(nullable NSError *)error NS_DEPRECATED(NA, NA, 5_0, 8_0);//è¯»å–ä¿¡å·å¼ºåº¦å›è°ƒçš„æ–¹æ³•- (void)peripheral:(CBPeripheral *)peripheral didReadRSSI:(NSNumber *)RSSI error:(nullable NSError *)error NS_AVAILABLE(NA, 8_0);//å‘ç°æœåŠ¡æ—¶è°ƒç”¨çš„æ–¹æ³•- (void)peripheral:(CBPeripheral *)peripheral didDiscoverServices:(nullable NSError *)error;//åœ¨æœåŠ¡ä¸­å‘ç°å­æœåŠ¡å›è°ƒçš„æ–¹æ³•- (void)peripheral:(CBPeripheral *)peripheral didDiscoverIncludedServicesForService:(CBService *)service error:(nullable NSError *)error;//å‘ç°æœåŠ¡çš„ç‰¹å¾å€¼åå›è°ƒçš„æ–¹æ³•- (void)peripheral:(CBPeripheral *)peripheral didDiscoverCharacteristicsForService:(CBService *)service error:(nullable NSError *)error;//ç‰¹å¾å€¼æ›´æ–°æ—¶å›è°ƒçš„æ–¹æ³•- (void)peripheral:(CBPeripheral *)peripheral didUpdateValueForCharacteristic:(CBCharacteristic *)characteristic error:(nullable NSError *)error;//å‘ç‰¹å¾å€¼å†™æ•°æ®æ—¶å›è°ƒçš„æ–¹æ³• - (void)peripheral:(CBPeripheral *)peripheral didWriteValueForCharacteristic:(CBCharacteristic *)characteristic error:(nullable NSError *)error; //ç‰¹å¾å€¼çš„é€šçŸ¥è®¾ç½®æ”¹å˜æ—¶è§¦å‘çš„æ–¹æ³• - (void)peripheral:(CBPeripheral *)peripheral didUpdateNotificationStateForCharacteristic:(CBCharacteristic *)characteristic error:(nullable NSError *)error; //å‘ç°ç‰¹å¾å€¼çš„æè¿°ä¿¡æ¯è§¦å‘çš„æ–¹æ³• - (void)peripheral:(CBPeripheral *)peripheral didDiscoverDescriptorsForCharacteristic:(CBCharacteristic *)characteristic error:(nullable NSError *)error; //ç‰¹å¾çš„æè¿°å€¼æ›´æ–°æ—¶è§¦å‘çš„æ–¹æ³• - (void)peripheral:(CBPeripheral *)peripheral didUpdateValueForDescriptor:(CBDescriptor *)descriptor error:(nullable NSError *)error; //å†™æè¿°ä¿¡æ¯æ—¶è§¦å‘çš„æ–¹æ³• - (void)peripheral:(CBPeripheral *)peripheral didWriteValueForDescriptor:(CBDescriptor *)descriptor error:(nullable NSError *)error; äº”ã€æœåŠ¡å¯¹è±¡CBServiceæœåŠ¡å¯¹è±¡æ˜¯ç”¨æ¥ç®¡ç†å¤–è®¾æä¾›çš„ä¸€äº›æ•°æ®æœåŠ¡çš„ï¼Œå…¶ä¸­å±æ€§å¦‚ä¸‹ï¼š 12345678//å¯¹åº”çš„å¤–è®¾@property(assign, readonly, nonatomic) CBPeripheral *peripheral;//æ˜¯å¦æ˜¯åˆç­‰æœåŠ¡@property(readonly, nonatomic) BOOL isPrimary;//åŒ…å«çš„è‡ªæœåŠ¡@property(retain, readonly, nullable) NSArray&lt;CBService *&gt; *includedServices;//æœåŠ¡ä¸­çš„ç‰¹å¾å€¼@property(retain, readonly, nullable) NSArray&lt;CBCharacteristic *&gt; *characteristics; å…­ã€æœåŠ¡çš„ç‰¹å¾å€¼CBCharacteristicé€šè¿‡ç»‘å®šæœåŠ¡ä¸­çš„ç‰¹å¾å€¼æ¥è¿›è¡Œæ•°æ®çš„è¯»å†™æ“ä½œï¼Œå…¶ä¸­å±æ€§å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526//å¯¹åº”çš„æœåŠ¡å¯¹è±¡@property(assign, readonly, nonatomic) CBService *service;//ç‰¹å¾å€¼çš„å±æ€§ æšä¸¾å¦‚ä¸‹/*typedef NS_OPTIONS(NSUInteger, CBCharacteristicProperties) &#123; CBCharacteristicPropertyBroadcast,//å…è®¸å¹¿æ’­ç‰¹å¾ CBCharacteristicPropertyRead,//å¯è¯»å±æ€§ CBCharacteristicPropertyWriteWithoutResponse,//å¯å†™å¹¶ä¸”æ¥æ”¶å›æ‰§ CBCharacteristicPropertyWrite,//å¯å†™å±æ€§ CBCharacteristicPropertyNotify,//å¯é€šçŸ¥å±æ€§ CBCharacteristicPropertyIndicate,//å¯å±•ç°çš„ç‰¹å¾å€¼ CBCharacteristicPropertyAuthenticatedSignedWrites,//å…è®¸ç­¾åçš„ç‰¹å¾å€¼å†™å…¥ CBCharacteristicPropertyExtendedProperties, CBCharacteristicPropertyNotifyEncryptionRequired, CBCharacteristicPropertyIndicateEncryptionRequired&#125;;*/@property(readonly, nonatomic) CBCharacteristicProperties properties;//ç‰¹å¾å€¼çš„æ•°æ®@property(retain, readonly, nullable) NSData *value;//ç‰¹å¾å€¼çš„æè¿°@property(retain, readonly, nullable) NSArray&lt;CBDescriptor *&gt; *descriptors;//æ˜¯å¦æ˜¯å½“å‰å¹¿æ’­çš„ç‰¹å¾@property(readonly) BOOL isBroadcasted;//æ˜¯å¦æ˜¯æ­£åœ¨é€šçŸ¥çš„ç‰¹å¾@property(readonly) BOOL isNotifying; ä¸ƒã€è¯»å†™è¯·æ±‚å¯¹è±¡CBATTRequestæœåŠ¡å¯¹è±¡æ˜¯å¤–è®¾å‘ä¸­å¿ƒè®¾å¤‡æä¾›çš„ç›¸å…³æ•°æ®æœåŠ¡ï¼Œè·å–åˆ°ç›¸åº”æœåŠ¡åï¼Œä¸­å¿ƒè®¾å¤‡å¯ä»¥è¿›è¡Œè¯»å†™è¯·æ±‚ï¼Œè¯»å†™å¯¹è±¡å±æ€§å¦‚ä¸‹ï¼š 123456//å¯¹åº”çš„ä¸­å¿ƒè®¾å¤‡@property(readonly, nonatomic) CBCentral *central;//å¯¹åº”çš„ç‰¹å¾å€¼@property(readonly, nonatomic) CBCharacteristic *characteristic;//è¯»å†™æ•°æ®å€¼@property(readwrite, copy, nullable) NSData *value; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSè·å–å’Œç›‘æµ‹è®¾å¤‡åŸºæœ¬ä¿¡æ¯â€”â€”UIDeviceçš„ä½¿ç”¨","slug":"165iOSè·å–å’Œç›‘æµ‹è®¾å¤‡åŸºæœ¬ä¿¡æ¯â€”â€”UIDeviceçš„ä½¿ç”¨","date":"2015-12-17T16:00:00.000Z","updated":"2021-07-05T08:15:04.425Z","comments":true,"path":"2015/12/18/165iOSè·å–å’Œç›‘æµ‹è®¾å¤‡åŸºæœ¬ä¿¡æ¯â€”â€”UIDeviceçš„ä½¿ç”¨/","link":"","permalink":"http://huishao.cc/2015/12/18/165iOSè·å–å’Œç›‘æµ‹è®¾å¤‡åŸºæœ¬ä¿¡æ¯â€”â€”UIDeviceçš„ä½¿ç”¨/","excerpt":"","text":"iOSè·å–å’Œç›‘æµ‹è®¾å¤‡åŸºæœ¬ä¿¡æ¯â€”â€”UIDeviceçš„ä½¿ç”¨12345678910111213141516171819202122//è·å–å½“å‰è®¾å¤‡å•ä¾‹+ (UIDevice *)currentDevice;//è·å–å½“å‰è®¾å¤‡åç§° @property(nonatomic,readonly,strong) NSString *name; // e.g. &quot;My iPhone&quot;//è·å–å½“å‰è®¾å¤‡æ¨¡å¼@property(nonatomic,readonly,strong) NSString *model; // e.g. @&quot;iPhone&quot;, @&quot;iPod touch&quot;//è·å–æœ¬åœ°åŒ–çš„å½“å‰è®¾å¤‡æ¨¡å¼@property(nonatomic,readonly,strong) NSString *localizedModel; // localized version of model//è·å–ç³»ç»Ÿåç§°@property(nonatomic,readonly,strong) NSString *systemName; // e.g. @&quot;iOS&quot;//è·å–ç³»ç»Ÿç‰ˆæœ¬@property(nonatomic,readonly,strong) NSString *systemVersion; // e.g. @&quot;4.0&quot;//è·å–è®¾å¤‡æ–¹å‘@property(nonatomic,readonly) UIDeviceOrientation orientation; //è·å–è®¾å¤‡UUIDå¯¹è±¡@property(nullable, nonatomic,readonly,strong) NSUUID *identifierForVendor;//æ˜¯å¦å¼€å¯ç›‘æµ‹ç”µæ± çŠ¶æ€ å¼€å¯å æ‰å¯ä»¥æ­£å¸¸è·å–ç”µæ± çŠ¶æ€@property(nonatomic,getter=isBatteryMonitoringEnabled) BOOL batteryMonitoringEnabled NS_AVAILABLE_IOS(3_0); // default is NO//è·å–ç”µæ± çŠ¶æ€@property(nonatomic,readonly) UIDeviceBatteryState batteryState NS_AVAILABLE_IOS(3_0); //è·å–ç”µé‡@property(nonatomic,readonly) float batteryLevel NS_AVAILABLE_IOS(3_0); è®¾å¤‡æ–¹å‘çš„æšä¸¾å¦‚ä¸‹ï¼š 123456789typedef NS_ENUM(NSInteger, UIDeviceOrientation) &#123; UIDeviceOrientationUnknown, UIDeviceOrientationPortrait, // homeé”®åœ¨ä¸‹ UIDeviceOrientationPortraitUpsideDown, // homeé”®åœ¨ä¸Š UIDeviceOrientationLandscapeLeft, // homeé”®åœ¨å³ UIDeviceOrientationLandscapeRight, // homeé”®åœ¨å·¦ UIDeviceOrientationFaceUp, // å±å¹•æœä¸Š UIDeviceOrientationFaceDown // å±å¹•æœä¸‹&#125;; ç”µæ± çŠ¶æ€çš„æšä¸¾å¦‚ä¸‹ï¼š 123456typedef NS_ENUM(NSInteger, UIDeviceBatteryState) &#123; UIDeviceBatteryStateUnknown, UIDeviceBatteryStateUnplugged, // æ”¾ç”µçŠ¶æ€ UIDeviceBatteryStateCharging, // å……ç”µæœªå……æ»¡çŠ¶æ€ UIDeviceBatteryStateFull, // å……ç”µå·²å……æ»¡&#125;; ä¸‹é¢çš„æ–¹æ³•å…³äºç›‘æµ‹å±å¹•çŠ¶æ€ï¼š 123456//è·å–æ˜¯å¦å¼€å¯å±å¹•çŠ¶æ€æ›´æ”¹é€šçŸ¥@property(nonatomic,readonly,getter=isGeneratingDeviceOrientationNotifications) BOOL generatesDeviceOrientationNotifications;//å¼€å§‹ç›‘æµ‹é€šçŸ¥- (void)beginGeneratingDeviceOrientationNotifications; //ç»“æŸç›‘æµ‹é€šçŸ¥- (void)endGeneratingDeviceOrientationNotifications; ä¸‹é¢è¿™ä¸¤ä¸ªæ”¾å¤§ä¸è·ç¦»ä¼ æ„Ÿå™¨åº”ç”¨ç›¸å…³ï¼Œå¯å‚è€ƒï¼šhttp://my.oschina.net/u/2340880/blog/544341. 123@property(nonatomic,getter=isProximityMonitoringEnabled) BOOL proximityMonitoringEnabled NS_AVAILABLE_IOS(3_0); //å¼€å¯è·ç¦»ä¼ æ„Ÿå™¨//æ˜¯å¦è§¦å‘äº†è·ç¦»ä¼ æ„Ÿå™¨@property(nonatomic,readonly) BOOL proximityState ç›¸å…³é€šçŸ¥ï¼š 12345678//è®¾å¤‡æ–¹å‘æ”¹å˜æ—¶å‘é€çš„é€šçŸ¥UIKIT_EXTERN NSString *const UIDeviceOrientationDidChangeNotification;//ç”µæ± çŠ¶æ€æ”¹å˜æ—¶å‘é€çš„é€šçŸ¥UIKIT_EXTERN NSString *const UIDeviceBatteryStateDidChangeNotification NS_AVAILABLE_IOS(3_0);//ç”µé‡æ”¹å˜æ—¶å‘é€çš„é€šçŸ¥UIKIT_EXTERN NSString *const UIDeviceBatteryLevelDidChangeNotification NS_AVAILABLE_IOS(3_0);//è·ç¦»ä¼ æ„Ÿå™¨çŠ¶æ€æ”¹å˜æ—¶å‘é€çš„é€šçŸ¥UIKIT_EXTERN NSString *const UIDeviceProximityStateDidChangeNotification NS_AVAILABLE_IOS(3_0); ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSä¼ æ„Ÿå™¨å¼€å‘â€”â€”è·ç¦»ä¼ æ„Ÿå™¨çš„åº”ç”¨","slug":"164iOSä¼ æ„Ÿå™¨å¼€å‘â€”â€”è·ç¦»ä¼ æ„Ÿå™¨çš„åº”ç”¨","date":"2015-12-13T16:00:00.000Z","updated":"2021-07-05T08:14:17.222Z","comments":true,"path":"2015/12/14/164iOSä¼ æ„Ÿå™¨å¼€å‘â€”â€”è·ç¦»ä¼ æ„Ÿå™¨çš„åº”ç”¨/","link":"","permalink":"http://huishao.cc/2015/12/14/164iOSä¼ æ„Ÿå™¨å¼€å‘â€”â€”è·ç¦»ä¼ æ„Ÿå™¨çš„åº”ç”¨/","excerpt":"","text":"iOSä¼ æ„Ÿå™¨å¼€å‘â€”â€”è·ç¦»ä¼ æ„Ÿå™¨çš„åº”ç”¨iPhoneæ‰‹æœºä¸­å†…ç½®äº†è·ç¦»ä¼ æ„Ÿå™¨ï¼Œä½ç½®åœ¨æ‰‹æœºçš„å¬ç­’é™„è¿‘ï¼Œå½“æˆ‘ä»¬åœ¨æ‰“ç”µè¯çš„æ—¶å€™é è¿‘å¬ç­’ï¼Œæ‰‹æœºçš„å±å¹•ä¼šè‡ªåŠ¨ç†„ç­ï¼Œè¿™å°±é è·ç¦»ä¼ æ„Ÿå™¨æ¥æ§åˆ¶ã€‚ åœ¨æˆ‘ä»¬å¼€å‘appæ—¶ï¼Œå¦‚æœéœ€è¦ï¼Œä¹Ÿå¯ä»¥è°ƒç”¨è·ç¦»ä¼ æ„Ÿå™¨çš„ä¸€äº›æ¥å£æ–¹æ³•ã€‚è·ç¦»ä¼ æ„Ÿå™¨çš„æ¥å£ååˆ†ç®€å•ï¼Œä¸»è¦é€šè¿‡é€šçŸ¥ä¸­å¿ƒæ¥å¯¹è·ç¦»çš„æ”¹å˜è¿›è¡Œé€šçŸ¥ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å¼€å¯è·ç¦»ä¼ æ„Ÿå™¨åº”ç”¨ï¼š 1[UIDevice currentDevice].proximityMonitoringEnabled=YES; ç›‘å¬è·ç¦»æ”¹å˜çš„é€šçŸ¥ï¼š 1[[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(notice) name:UIDeviceProximityStateDidChangeNotification object:nil]; åœ¨å›è°ƒæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢è¿™ä¸ªå±æ€§æ¥ç›‘å¬è·ç¦»çŠ¶æ€ï¼š 1234567-(void)notice&#123; if ([UIDevice currentDevice].proximityState) &#123; NSLog(@&quot;è¿‘è·ç¦»&quot;); &#125;else&#123; NSLog(@&quot;è¿œè·ç¦»&quot;); &#125;&#125; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSä¼ æ„Ÿå™¨å¼€å‘â€”â€”åŠ é€Ÿåº¦ä¼ æ„Ÿå™¨ï¼Œèºæ—‹ä»ªä¼ æ„Ÿå™¨ï¼Œç£åŠ›ä¼ æ„Ÿå™¨çš„åº”ç”¨","slug":"163iOSä¼ æ„Ÿå™¨å¼€å‘â€”â€”åŠ é€Ÿåº¦ä¼ æ„Ÿå™¨ï¼Œèºæ—‹ä»ªä¼ æ„Ÿå™¨ï¼Œç£åŠ›ä¼ æ„Ÿå™¨çš„åº”ç”¨","date":"2015-12-12T16:00:00.000Z","updated":"2021-07-05T08:13:22.467Z","comments":true,"path":"2015/12/13/163iOSä¼ æ„Ÿå™¨å¼€å‘â€”â€”åŠ é€Ÿåº¦ä¼ æ„Ÿå™¨ï¼Œèºæ—‹ä»ªä¼ æ„Ÿå™¨ï¼Œç£åŠ›ä¼ æ„Ÿå™¨çš„åº”ç”¨/","link":"","permalink":"http://huishao.cc/2015/12/13/163iOSä¼ æ„Ÿå™¨å¼€å‘â€”â€”åŠ é€Ÿåº¦ä¼ æ„Ÿå™¨ï¼Œèºæ—‹ä»ªä¼ æ„Ÿå™¨ï¼Œç£åŠ›ä¼ æ„Ÿå™¨çš„åº”ç”¨/","excerpt":"","text":"iOSä¼ æ„Ÿå™¨å¼€å‘â€”â€”åŠ é€Ÿåº¦ä¼ æ„Ÿå™¨ï¼Œèºæ—‹ä»ªä¼ æ„Ÿå™¨ï¼Œç£åŠ›ä¼ æ„Ÿå™¨çš„åº”ç”¨ä¸€ã€å¼•è¨€é€šè¿‡åŠ é€Ÿåº¦ä¼ æ„Ÿå™¨ï¼Œèºæ—‹ä»ªä¼ æ„Ÿå™¨å’Œç£åŠ›ä¼ æ„Ÿï¼Œæˆ‘ä»¬å¯ä»¥è·å–åˆ°æ‰‹æœºåœ¨å½“å‰ä¸‰ç»´ç©ºé—´ä¸­çš„å½¢æ€ï¼ŒåŠ é€Ÿåº¦ä¼ æ„Ÿå™¨ä¹Ÿè¢«ç§°ä½œé‡åŠ›æ„Ÿåº”ã€‚åœ¨ä¸€äº›èµ›è½¦æ¸¸æˆä¸­å¯ä»¥å¹¿æ³›å¾—åˆ°åº”ç”¨ã€‚åœ¨iOS5ä¹‹å‰ï¼ŒiPhoneæ”¯æŒçš„ä¼ æ„Ÿå™¨æœ‰é™ï¼Œå…³äºåŠ é€Ÿåº¦ä¼ æ„Ÿå™¨çš„ç®¡ç†ç”¨UIAccelerometerè¿™ä¸ªç±»è´Ÿè´£ï¼ŒiOS5ä¹‹åï¼Œæœ‰å…³è®¾å¤‡ç©ºé—´ä¿¡æ¯çš„ç®¡ç†äº¤ç”±äº†CoreMotionè¿™ä¸ªæ¡†æ¶ï¼ŒCoreMotionå°†å¤šç§ä¼ æ„Ÿå™¨ç»Ÿä¸€è¿›è¡Œç®¡ç†è®¡ç®—ã€‚ äºŒã€ä½¿ç”¨UIAccelerometerè·å–è®¾å¤‡ç©ºé—´ä½ç½®è™½ç„¶åœ¨iOS5ä¹‹åè¿™ä¸ªç±»è¢«å¼ƒç”¨äº†ï¼Œä½†æ˜¯å’Œå…¶ä»–å¤§å¤šè¢«å¼ƒç”¨çš„æ–¹æ³•ç±»ä¼¼ï¼Œåœ¨æ–°çš„iOSç‰ˆæœ¬ä¸­ï¼Œæ˜¯å…¼å®¹æ—§æ–¹æ³•çš„ï¼Œæˆ‘ä»¬ä¾ç„¶å¯ä»¥ä½¿ç”¨è¿™ä¸ªç±»æ¥è·å–ç®€å•çš„è®¾å¤‡ç©ºé—´ä¿¡æ¯ã€‚ æˆ‘ä»¬ä¸»è¦ä½¿ç”¨åˆ°çš„ç±»å’Œä»£ç†æ–¹æ³•å¦‚ä¸‹ï¼š 1234567891011//è®¾å¤‡ä¿¡æ¯å¯¹è±¡ç±»@interface UIAcceleration : NSObject//åŠ é€Ÿåº¦ä¼ æ„Ÿå™¨çš„æ—¶é—´æˆ³@property(nonatomic,readonly) NSTimeInterval timestamp;//xæ–¹å‘å€¼@property(nonatomic,readonly) UIAccelerationValue x;//yæ–¹å‘å€¼@property(nonatomic,readonly) UIAccelerationValue y;//zæ–¹å‘å€¼@property(nonatomic,readonly) UIAccelerationValue z;@end ä¸Šé¢çš„UIAccelerationValueå°±æ˜¯doubleç±»å‹ã€‚ åŠ é€Ÿåº¦ä¼ æ„Ÿå™¨è·å–çš„å±æ€§æ˜¯è®¾å¤‡åœ¨ä¸‰ç»´ç©ºé—´çš„è§’åº¦å±æ€§ï¼Œå€Ÿç”¨ä¸‹é¢è¿™å¼ å›¾ï¼š å¦‚æœå°†è®¾å¤‡è¿™æ ·ç«‹åœ¨æ¡Œé¢ä¸Šï¼Œè®¾å¤‡çš„ä¸‰ç»´åæ ‡å™¨å¦‚å›¾ï¼Œæˆ‘ä»¬å°†è®¾å¤‡å·²Zè½´ç§»åŠ¨çš„æ—¶å€™ï¼Œå‘å³xä¸ºæ­£ï¼Œå‘å·¦ä¸ºè´Ÿï¼Œå…¶ä»–ä¸¤è½´ç±»ä¼¼ã€‚ 123456789//åŠ é€Ÿåº¦ç®¡ç†ç±»@interface UIAccelerometer : NSObject //è·å–å•ä¾‹å¯¹è±¡+ (UIAccelerometer *)sharedAccelerometer;//åˆ·æ–°é¢‘ç‡@property(nonatomic) NSTimeInterval updateInterval;//ä»£ç†@property(nullable,nonatomic,weak) id&lt;UIAccelerometerDelegate&gt; delegate;@end UIAccelerometeræ˜¯ç®¡ç†ç±»ï¼Œé€šè¿‡å•ä¾‹æ–¹æ³•è·å–åˆ°å®ä¾‹å¯¹è±¡ã€‚ 123456@protocol UIAccelerometerDelegate&lt;NSObject&gt;@optional- (void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration NS_DEPRECATED_IOS(2_0, 5_0) __TVOS_PROHIBITED;@end è¿™ä¸ªä»£ç†æ–¹æ³•æ˜¯åˆ·æ–°ä¿¡æ¯çš„å›è°ƒï¼Œä¼šä»¥æˆ‘ä»¬è®¾ç½®çš„å¸§ç‡åˆ·æ–°ã€‚ ä¸¾ä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718@interface ViewController ()&lt;UIAccelerometerDelegate&gt;@end@implementation ViewController- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view, typically from a nib. [UIAccelerometer sharedAccelerometer].delegate=self; [UIAccelerometer sharedAccelerometer].updateInterval=1/60.0;&#125;-(void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration&#123; NSLog(@&quot;\\n%f\\n%f\\n%f&quot;,acceleration.x,acceleration.y,acceleration.z); // NSLog(@&quot;%f&quot;,acceleration.timestamp);&#125;@end ä¸‰ã€CoreMotionæ¡†æ¶çš„ä½¿ç”¨CoreMotionæ¡†æ¶ååˆ†å¼ºå¤§ï¼Œå®ƒä¸ä»…å°†åŠ é€Ÿåº¦ä¼ æ„Ÿå™¨å’Œèºæ—‹ä»ªä¼ æ„Ÿå™¨è¿›è¡Œäº†ç»Ÿä¸€é…ç½®å’Œç®¡ç†ï¼Œè¿˜ä¸ºæˆ‘ä»¬å°è£…äº†è®¸å¤šç®—æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è·å–åˆ°è®¾å¤‡çš„è¿åŠ¨çŠ¶æ€ä¿¡æ¯ã€‚ 1ã€CoreMotionè´Ÿè´£å¤„ç†çš„æ•°æ®CoreMotionè´Ÿè´£å¤„ç†å››ç§æ•°æ®ï¼Œä¸€ç§æ˜¯åŠ é€Ÿåº¦æ•°æ®ï¼Œä¸€ç§æ˜¯èºæ—‹ä»ªæ•°æ®ï¼Œä¸€ç§æ˜¯ç£æ„Ÿåº”æ•°æ®ï¼Œè¿˜æœ‰ä¸€ç§æ˜¯å‰ä¸‰ç§æ•°æ®é€šè¿‡å¤æ‚è¿ç®—å¾—åˆ°çš„è®¾å¤‡çš„è¿åŠ¨æ•°æ®ã€‚å‡ ä¸ªä¸»è¦çš„ç±»å¦‚ä¸‹ï¼š CMAccelerommterData:è®¾å¤‡çš„åŠ é€Ÿåº¦æ•°æ® 1234567891011121314typedef struct &#123; double x; double y; double z;&#125; CMAcceleration;@interface CMAccelerometerData : CMLogItem&#123;@private id _internal;&#125;//åŠ é€Ÿåº¦çš„æ•°æ®å¯¹è±¡@property(readonly, nonatomic) CMAcceleration acceleration;@end CMGyroData:è®¾å¤‡çš„èºæ—‹ä»ªæ•°æ® 1234567891011121314typedef struct &#123; double x; double y; double z; &#125; CMRotationRate;@interface CMGyroData : CMLogItem&#123;@private id _internal;&#125;//èºæ—‹ä»ªæ•°æ®å¯¹è±¡@property(readonly, nonatomic) CMRotationRate rotationRate;@end CMMagnetometerDataï¼šç£æ„Ÿåº”ä¿¡æ¯ 12345678910111213141516typedef struct &#123; double x; double y; double z;&#125; CMMagneticField;@interface CMMagnetometerData : CMLogItem&#123;@private id _internal;&#125;//ç£åŠ›å¯¹è±¡@property(readonly, nonatomic) CMMagneticField magneticField;@end CMDeviceMotion:è®¾å¤‡çš„è¿åŠ¨çŠ¶æ€æ•°æ® 123456789101112131415@interface CMDeviceMotion : CMLogItem&#123;@private id _internal;&#125;//è®¾å¤‡çš„çŠ¶æ€å¯¹è±¡@property(readonly, nonatomic) CMAttitude *attitude;//è®¾å¤‡çš„è§’é€Ÿåº¦@property(readonly, nonatomic) CMRotationRate rotationRate;//è®¾å¤‡çš„é‡åŠ›åŠ é€Ÿåº¦@property(readonly, nonatomic) CMAcceleration gravity;//ç”¨æˆ·å«ç»™è®¾å¤‡çš„åŠ é€Ÿåº¦ è®¾å¤‡çš„æ€»åŠ é€Ÿåº¦ä¸ºé‡åŠ›åŠ é€Ÿåº¦å«ä¸Šç”¨æˆ·ç»™çš„åŠ é€Ÿåº¦@property(readonly, nonatomic) CMAcceleration userAcceleration;//è®¾å¤‡çš„ç£åœºçŸ¢é‡å¯¹è±¡@property(readonly, nonatomic) CMCalibratedMagneticField magneticField NS_AVAILABLE(NA,5_0); ç›¸æ¯”ä¹‹å‰ä¸¤ä¸ªç±»ï¼Œè¿™ä¸ªå°±æ¯”è¾ƒå¤æ‚äº†ï¼Œattitudeå¯¹è±¡ä¸­åˆå°è£…äº†è®¸å¤šè®¾å¤‡çš„çŠ¶æ€å±æ€§ï¼š 12345678910111213141516@interface CMAttitude : NSObject &lt;NSCopying, NSSecureCoding&gt;&#123;@private id _internal;&#125;//è®¾å¤‡çš„æ¬§æ‹‰è§’roll@property(readonly, nonatomic) double roll;//è®¾å¤‡çš„æ¬§æ‹‰è§’pitch@property(readonly, nonatomic) double pitch;//è®¾å¤‡çš„æ¬§æ‹‰è§’yaw@property(readonly, nonatomic) double yaw;//è®¾å¤‡çŠ¶æ€çš„æ—‹è½¬çŸ©é˜µ@property(readonly, nonatomic) CMRotationMatrix rotationMatrix;//è®¾å¤‡çŠ¶æ€çš„å››å…ƒæ•°@property(readonly, nonatomic) CMQuaternion quaternion;@end 2ã€CoreMotionçš„ä½¿ç”¨CoreMotionæœ‰ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼Œä¸€ç§æ˜¯æˆ‘ä»¬ä¸»åŠ¨å‘managerç´¢å–æ•°æ®ï¼Œä¸€ç§æ˜¯é€šè¿‡å›è°ƒè®©managerå°†æ•°æ®ä¼ ç»™å›è°ƒç»™æˆ‘ä»¬ï¼Œè¿™ä¸¤ç§æ–¹å¼åˆ†åˆ«ç§°ä½œpullæ–¹å¼å’Œpushæ–¹å¼ã€‚ pullæ–¹å¼ï¼š 12345678910111213141516171819202122- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view, typically from a nib. //åˆ›å»ºç®¡ç†å¯¹è±¡ manager= [[CMMotionManager alloc]init]; //å¼€å¯åŠ é€Ÿåº¦æ›´æ–° [manager startAccelerometerUpdates]; //å¼€å¯èºæ—‹ä»ªæ›´æ–° [manager startGyroUpdates]; //å¼€å¯çŠ¶æ€æ›´æ–° [manager startMagnetometerUpdates]; //åˆ›å»ºå®šæ—¶å™¨ NSTimer * time = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(updata) userInfo:nil repeats:YES]; time.fireDate = [NSDate distantPast];&#125;-(void)updata&#123;//è·å–æ•°æ® NSLog(@&quot;%f,%f,%f\\n%f,%f,%f&quot;,manager.accelerometerData.acceleration.x,manager.accelerometerData.acceleration.y,manager.accelerometerData.acceleration.z,manager.gyroData.rotationRate.x,manager.gyroData.rotationRate.y,manager.gyroData.rotationRate.z); &#125; pushæ–¹å¼ï¼š 123456 //åˆ›å»ºç®¡ç†å¯¹è±¡ manager= [[CMMotionManager alloc]init]; //åœ¨å½“å‰çº¿ç¨‹ä¸­å›è°ƒ [manager startAccelerometerUpdatesToQueue:[NSOperationQueue currentQueue] withHandler:^(CMAccelerometerData * _Nullable accelerometerData, NSError * _Nullable error) &#123; NSLog(@&quot;%f,%f,%f\\n%f,%f,%f&quot;,manager.accelerometerData.acceleration.x,manager.accelerometerData.acceleration.y,manager.accelerometerData.acceleration.z,manager.gyroData.rotationRate.x,manager.gyroData.rotationRate.y,manager.gyroData.rotationRate.z); &#125;]; 3ã€CoreMotionçš„æ›´å¤šå±æ€§å’Œæ–¹æ³•1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768@interface CMMotionManager : NSObject&#123;@private id _internal;&#125;//è®¾ç½®åŠ é€Ÿåº¦ä¼ æ„Ÿå™¨æ›´æ–°å¸§ç‡@property(assign, nonatomic) NSTimeInterval accelerometerUpdateInterval __TVOS_PROHIBITED;//åŠ é€Ÿåº¦ä¼ æ„Ÿå™¨æ˜¯å¦å¯ç”¨@property(readonly, nonatomic, getter=isAccelerometerAvailable) BOOL accelerometerAvailable __TVOS_PROHIBITED;//åŠ é€Ÿåº¦ä¼ æ„Ÿå™¨æ˜¯å¦æ¿€æ´»@property(readonly, nonatomic, getter=isAccelerometerActive) BOOL accelerometerActive __TVOS_PROHIBITED;//åŠ é€Ÿåº¦ä¼ æ„Ÿå™¨æ•°æ®å¯¹è±¡@property(readonly, nullable) CMAccelerometerData *accelerometerData __TVOS_PROHIBITED;//pullæ–¹å¼å¼€å§‹æ›´æ–°åŠ é€Ÿåº¦æ•°æ®- (void)startAccelerometerUpdates __TVOS_PROHIBITED;//pushæ–¹å¼æ›´æ–°åŠ é€Ÿåº¦æ•°æ®- (void)startAccelerometerUpdatesToQueue:(NSOperationQueue *)queue withHandler:(CMAccelerometerHandler)handler __TVOS_PROHIBITED;//åœæ­¢æ›´æ–°åŠ é€Ÿåº¦æ•°æ®- (void)stopAccelerometerUpdates __TVOS_PROHIBITED;//èºæ—‹ä»ªä¼ æ„Ÿå™¨åˆ·æ–°å¸§ç‡@property(assign, nonatomic) NSTimeInterval gyroUpdateInterval __TVOS_PROHIBITED;//èºæ—‹ä»ªæ˜¯å¦å¯ç”¨@property(readonly, nonatomic, getter=isGyroAvailable) BOOL gyroAvailable __TVOS_PROHIBITED;//èºæ—‹ä»ªæ˜¯å¦æ¿€æ´»@property(readonly, nonatomic, getter=isGyroActive) BOOL gyroActive __TVOS_PROHIBITED;//èºæ—‹ä»ªæ•°æ®@property(readonly, nullable) CMGyroData *gyroData __TVOS_PROHIBITED;//pullæ–¹å¼å¼€å§‹æ›´æ–°èºæ—‹ä»ª- (void)startGyroUpdates __TVOS_PROHIBITED;//pushæ–¹å¼å¼€å§‹æ›´æ–°èºæ—‹ä»ª- (void)startGyroUpdatesToQueue:(NSOperationQueue *)queue withHandler:(CMGyroHandler)handler __TVOS_PROHIBITED;//åœæ­¢æ›´æ–°èºæ—‹ä»ª- (void)stopGyroUpdates __TVOS_PROHIBITED;//ç£åŠ›ä¼ æ„Ÿæ›´æ–°å¸§ç‡@property(assign, nonatomic) NSTimeInterval magnetometerUpdateInterval NS_AVAILABLE(NA,5_0) __TVOS_PROHIBITED;//è®¾å¤‡ç£åŠ›ä¼ æ„Ÿå™¨æ˜¯å¦å¯ç”¨@property(readonly, nonatomic, getter=isMagnetometerAvailable) BOOL magnetometerAvailable NS_AVAILABLE(NA,5_0) __TVOS_PROHIBITED;//è®¾å¤‡ç£åŠ›ä¼ æ„Ÿå™¨æ˜¯å¦æ¿€æ´»@property(readonly, nonatomic, getter=isMagnetometerActive) BOOL magnetometerActive NS_AVAILABLE(NA,5_0) __TVOS_PROHIBITED;//è®¾å¤‡ç£åŠ›çŠ¶æ€æ•°æ®@property(readonly, nullable) CMMagnetometerData *magnetometerData NS_AVAILABLE(NA,5_0) __TVOS_PROHIBITED;//pullæ–¹å¼æ›´æ–°è®¾å¤‡ç£åŠ›çŠ¶æ€- (void)startMagnetometerUpdates NS_AVAILABLE(NA,5_0) __TVOS_PROHIBITED;//pushæ–¹å¼æ›´æ–°è®¾å¤‡ç£åŠ›çŠ¶æ€- (void)startMagnetometerUpdatesToQueue:(NSOperationQueue *)queue withHandler:(CMMagnetometerHandler)handler NS_AVAILABLE(NA,5_0) __TVOS_PROHIBITED;//åœæ­¢æ›´æ–°è®¾å¤‡çŠ¶æ€- (void)stopMagnetometerUpdates NS_AVAILABLE(NA,5_0) __TVOS_PROHIBITED;//è®¾å¤‡çŠ¶æ€æ›´æ–°å¸§ç‡@property(assign, nonatomic) NSTimeInterval deviceMotionUpdateInterval __TVOS_PROHIBITED;//å‚è€ƒå™¨æšä¸¾+ (CMAttitudeReferenceFrame)availableAttitudeReferenceFrames NS_AVAILABLE(NA,5_0) __TVOS_PROHIBITED;@property(readonly, nonatomic) CMAttitudeReferenceFrame attitudeReferenceFrame NS_AVAILABLE(NA,5_0) __TVOS_PROHIBITED;//è®¾å¤‡è¿åŠ¨ä¿¡æ¯æ˜¯å¦å¯ç”¨@property(readonly, nonatomic, getter=isDeviceMotionAvailable) BOOL deviceMotionAvailable __TVOS_PROHIBITED;//è®¾å¤‡è¿åŠ¨ä¿¡æ¯æ˜¯å¦æ¿€æ´»@property(readonly, nonatomic, getter=isDeviceMotionActive) BOOL deviceMotionActive __TVOS_PROHIBITED;//è®¾å¤‡è¿åŠ¨ä¿¡æ¯å¯¹è±¡@property(readonly, nullable) CMDeviceMotion *deviceMotion __TVOS_PROHIBITED;//pullæ–¹å¼å¼€å§‹åˆ·æ–°è¿åŠ¨ä¿¡æ¯- (void)startDeviceMotionUpdates __TVOS_PROHIBITED;//pushæ–¹å¼å¼€å§‹åˆ·æ–°è¿åŠ¨ä¿¡æ¯- (void)startDeviceMotionUpdatesToQueue:(NSOperationQueue *)queue withHandler:(CMDeviceMotionHandler)handler __TVOS_PROHIBITED;//ä½¿ç”¨æŸä¸ªå‚è€ƒç³»- (void)startDeviceMotionUpdatesUsingReferenceFrame:(CMAttitudeReferenceFrame)referenceFrame NS_AVAILABLE(NA,5_0) __TVOS_PROHIBITED;//pushæ–¹å¼å¼€å§‹åˆ·æ–°è®¾å¤‡è¿åŠ¨ä¿¡æ¯- (void)startDeviceMotionUpdatesUsingReferenceFrame:(CMAttitudeReferenceFrame)referenceFrame toQueue:(NSOperationQueue *)queue withHandler:(CMDeviceMotionHandler)handler NS_AVAILABLE(NA,5_0) __TVOS_PROHIBITED;//åœæ­¢åˆ·æ–°è®¾å¤‡è¿åŠ¨ä¿¡æ¯- (void)stopDeviceMotionUpdates __TVOS_PROHIBITED; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSä¼ æ„Ÿå™¨å¼€å‘â€”â€”ä¸ºAPPæ·»åŠ æ‰‹æœºå¯†ç ã€æŒ‡çº¹è¿›è¡Œå®‰å…¨éªŒè¯","slug":"162iOSä¼ æ„Ÿå™¨å¼€å‘â€”â€”ä¸ºAPPæ·»åŠ æ‰‹æœºå¯†ç ã€æŒ‡çº¹è¿›è¡Œå®‰å…¨éªŒè¯","date":"2015-12-09T16:00:00.000Z","updated":"2021-07-05T08:12:25.574Z","comments":true,"path":"2015/12/10/162iOSä¼ æ„Ÿå™¨å¼€å‘â€”â€”ä¸ºAPPæ·»åŠ æ‰‹æœºå¯†ç ã€æŒ‡çº¹è¿›è¡Œå®‰å…¨éªŒè¯/","link":"","permalink":"http://huishao.cc/2015/12/10/162iOSä¼ æ„Ÿå™¨å¼€å‘â€”â€”ä¸ºAPPæ·»åŠ æ‰‹æœºå¯†ç ã€æŒ‡çº¹è¿›è¡Œå®‰å…¨éªŒè¯/","excerpt":"","text":"iOSä¼ æ„Ÿå™¨å¼€å‘â€”â€”ä¸ºAPPæ·»åŠ æ‰‹æœºå¯†ç ã€æŒ‡çº¹è¿›è¡Œå®‰å…¨éªŒè¯ä¸€ã€å¼•è¨€iPhone5sä¹‹åï¼ŒiPhoneç¡¬ä»¶ä¸Šå·²æ”¯æŒè¿›è¡ŒæŒ‡çº¹è¯†åˆ«çš„åŠŸèƒ½ï¼Œç›¸åº”çš„ï¼Œä¸€äº›æ–°çš„apiä¹Ÿå¯ä»¥åº”ç”¨äºAPPä¸­ï¼Œè¿›è¡Œç”¨æˆ·å®‰å…¨çš„éªŒè¯ã€‚ç›®å‰ï¼Œå¼€å‘è€…å¯ä»¥ä½¿ç”¨çš„å®‰å…¨éªŒè¯æ–¹å¼æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯é€šè¿‡æ‰‹æœºå¯†ç è¿›è¡ŒéªŒè¯ï¼Œä¸€ç§æ˜¯é€šè¿‡è¯†åˆ«æŒ‡çº¹è¿›è¡ŒéªŒè¯ã€‚ äºŒã€ä¸ºAPPæ·»åŠ å®‰å…¨éªŒè¯è¦ä½¿ç”¨å®‰å…¨éªŒè¯çš„ç›¸å…³apiï¼Œæˆ‘ä»¬éœ€è¦å¼•å…¥å¦‚ä¸‹å¤´æ–‡ä»¶ï¼š 1#import &lt;LocalAuthentication/LocalAuthentication.h&gt; æ·»åŠ æ‰‹æœºå¯†ç éªŒè¯ï¼š 123456789101112131415 //åˆ›å»ºå®‰å…¨éªŒè¯å¯¹è±¡ LAContext * con = [[LAContext alloc]init]; NSError * error; //åˆ¤æ–­æ˜¯å¦æ”¯æŒå¯†ç éªŒè¯ /** *LAPolicyDeviceOwnerAuthentication æ‰‹æœºå¯†ç çš„éªŒè¯æ–¹å¼ *LAPolicyDeviceOwnerAuthenticationWithBiometrics æŒ‡çº¹çš„éªŒè¯æ–¹å¼ */ BOOL can = [con canEvaluatePolicy:LAPolicyDeviceOwnerAuthentication error:&amp;error]; if (can) &#123; [con evaluatePolicy:LAPolicyDeviceOwnerAuthentication localizedReason:@&quot;éªŒè¯ä¿¡æ¯&quot; reply:^(BOOL success, NSError * _Nullable error) &#123; NSLog(@&quot;%d,%@&quot;,success,error); &#125;]; &#125; canEvaluatePolicyæ˜¯ç”¨æ¥åˆ¤æ–­æ˜¯å¦æ”¯æŒæ‰‹æœºå¯†ç éªŒè¯çš„ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®æ‰‹æœºå¯†ç ï¼Œä¼šè¿”å›NOï¼Œå¦‚æœå¯ç”¨äº†ï¼Œä¼šå‡ºç°å¦‚ä¸‹ç•Œé¢ï¼š å¯†ç éªŒè¯çš„æç¤ºä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰è®¾ç½®ã€‚ è¿›è¡ŒæŒ‡çº¹éªŒè¯ï¼š 12345678910LAContext * con = [[LAContext alloc]init]; NSError * error; BOOL can = [con canEvaluatePolicy:LAPolicyDeviceOwnerAuthenticationWithBiometrics error:&amp;error]; NSLog(@&quot;%d&quot;,can); if (can) &#123; [con evaluatePolicy:LAPolicyDeviceOwnerAuthenticationWithBiometrics localizedReason:@&quot;éªŒè¯æŒ‡çº¹&quot; reply:^(BOOL success, NSError * _Nullable error) &#123; NSLog(@&quot;%d,%@&quot;,success,error); &#125;]; &#125; å›è°ƒä¸­çš„successç”¨æ¥åˆ¤æ–­æ˜¯å¦éªŒè¯æˆåŠŸï¼š é€šè¿‡è¿™äº›éªŒè¯æ–¹å¼ï¼Œå¯ä»¥ä½¿ç”¨æˆ·çš„æ•°æ®æ›´åŠ å®‰å…¨ï¼Œåœ¨åšæ•æ„Ÿæ“ä½œæ—¶ï¼Œå¯ä»¥ç¡®ä¿æ˜¯æ‰‹æœºçš„æŒæœ‰è€…ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSå¼€å‘CoreAnimationè§£è¯»ä¹‹äº”â€”â€”é«˜çº§åŠ¨ç”»æŠ€å·§","slug":"160iOSå¼€å‘CoreAnimationè§£è¯»ä¹‹äº”â€”â€”é«˜çº§åŠ¨ç”»æŠ€å·§","date":"2015-12-05T16:00:00.000Z","updated":"2021-07-05T08:10:41.632Z","comments":true,"path":"2015/12/06/160iOSå¼€å‘CoreAnimationè§£è¯»ä¹‹äº”â€”â€”é«˜çº§åŠ¨ç”»æŠ€å·§/","link":"","permalink":"http://huishao.cc/2015/12/06/160iOSå¼€å‘CoreAnimationè§£è¯»ä¹‹äº”â€”â€”é«˜çº§åŠ¨ç”»æŠ€å·§/","excerpt":"","text":"iOSå¼€å‘CoreAnimationè§£è¯»ä¹‹äº”â€”â€”é«˜çº§åŠ¨ç”»æŠ€å·§ä¸€ã€äº‹åŠ¡ç±»CoreAnimationä¸­è¿˜æœ‰ä¸€ä¸ªéå¸¸é‡è¦çš„ç±»ï¼šCATransactionäº‹ç‰©ç±»ï¼Œè¿™ä¸ªå¯ä»¥åŒæ—¶è®¾ç½®å¤šä¸ªlayerå±‚çš„åŠ¨ç”»æ•ˆæœã€‚å¯ä»¥é€šè¿‡éšå¼å’Œæ˜¾å¼ä¸¤ç§æ–¹å¼æ¥è¿›è¡ŒåŠ¨ç”»æ“ä½œã€‚ äºŒã€CATransactionå±æ€§å¯¹layerå±‚çš„å±æ€§æ“ä½œï¼Œéƒ½ä¼šå½¢æˆéšå¼åŠ¨ç”»ï¼Œè¦ä½¿ç”¨éšå¼åŠ¨ç”»ï¼Œéœ€è¦å…³é—­layerå±‚çš„animationåŠ¨ç”»å±æ€§ï¼Œä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•ï¼š 123//å…³é—­animationåŠ¨ç”»æ•ˆæœï¼Œå¼€å¯éšå¼åŠ¨ç”»+ (BOOL)disableActions;+ (void)setDisableActions:(BOOL)flag; CATransactionç”¨ç±»æ–¹å¼é€šè¿‡è®¾ç½®key-valueæ¥è¿›è¡ŒåŠ¨ç”»çš„å±æ€§è®¾ç½®ï¼š 12+ (nullable id)valueForKey:(NSString *)key;+ (void)setValue:(nullable id)anObject forKey:(NSString *)key; æ”¯æŒçš„keyå€¼å¦‚ä¸‹ï¼š 12345678//è®¾ç½®åŠ¨ç”»æŒç»­æ—¶é—´ NSString * const kCATransactionAnimationDuration; //è®¾ç½®åœç”¨animationç±»åŠ¨ç”» NSString * const kCATransactionDisableActions; //è®¾ç½®åŠ¨ç”»æ—¶åºæ•ˆæœ NSString * const kCATransactionAnimationTimingFunction; //è®¾ç½®åŠ¨ç”»å®Œæˆåçš„å›è°ƒ NSString * const kCATransactionCompletionBlock; é™¤äº†éšå¼çš„å±•ç¤ºåŠ¨ç”»å¤–ï¼Œä¹Ÿå¯ä»¥æ˜¾å¼çš„é€šè¿‡è°ƒç”¨CATransactionçš„ç›¸å…³æ–¹æ³•è¿›è¡Œæ˜¾ç¤ºçš„æäº¤åŠ¨ç”»ï¼š 123456789//åŠ¨ç”»å¼€å§‹+ (void)begin;//æäº¤åŠ¨ç”»+ (void)commit;//ç«‹å³è¿›è¡ŒåŠ¨ç”»æ¸²æŸ“ ä¸€èˆ¬ä¸éœ€è°ƒç”¨+ (void)flush;//ä¸‹é¢è¿™ä¸¤ä¸ªæ–¹æ³•ç”¨äºåŠ¨ç”»äº‹ç‰©çš„åŠ é”ä¸è§£é” åœ¨å¤šçº¿ç¨‹åŠ¨ç”»ä¸­ï¼Œä¿è¯ä¿®æ”¹å±æ€§çš„å®‰å…¨+ (void)lock;+ (void)unlock; ç¤ºä¾‹å¦‚ä¸‹ï¼š 1234 [CATransaction begin]; [CATransaction setValue:@1 forKey:kCATransactionAnimationDuration]; layer.backgroundColor = [UIColor blueColor].CGColor; [CATransaction commit]; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSå¼€å‘CoreAnimationè§£è¯»ä¹‹å…­â€”â€”CATransform3Då˜æ¢çš„åº”ç”¨","slug":"161iOSå¼€å‘CoreAnimationè§£è¯»ä¹‹å…­â€”â€”CATransform3Då˜æ¢çš„åº”ç”¨","date":"2015-12-05T16:00:00.000Z","updated":"2021-07-05T08:11:32.943Z","comments":true,"path":"2015/12/06/161iOSå¼€å‘CoreAnimationè§£è¯»ä¹‹å…­â€”â€”CATransform3Då˜æ¢çš„åº”ç”¨/","link":"","permalink":"http://huishao.cc/2015/12/06/161iOSå¼€å‘CoreAnimationè§£è¯»ä¹‹å…­â€”â€”CATransform3Då˜æ¢çš„åº”ç”¨/","excerpt":"","text":"iOSå¼€å‘CoreAnimationè§£è¯»ä¹‹äº”â€”â€”CATransform3Då˜æ¢çš„åº”ç”¨ä¸€ã€å¼•è¨€CATransform3Då®šä¹‰äº†ä¸€ä¸ªå˜åŒ–çŸ©é˜µï¼Œé€šè¿‡å¯¹çŸ©é˜µå‚æ•°çš„è®¾ç½®ï¼Œæˆ‘ä»¬å¯ä»¥æ”¹å˜layerçš„ä¸€äº›å±æ€§ï¼Œè¿™ä¸ªå±æ€§çš„æ”¹å˜ï¼Œå¯ä»¥äº§ç”ŸåŠ¨ç”»çš„æ•ˆæœã€‚é¦–å…ˆï¼ŒCATransform3Då®šä¹‰äº†ä¸€ä¸ª4*4çš„çŸ©é˜µï¼Œå¦‚ä¸‹ï¼š 1234567struct CATransform3D&#123; CGFloat m11, m12, m13, m14; CGFloat m21, m22, m23, m24; CGFloat m31, m32, m33, m34; CGFloat m41, m42, m43, m44;&#125;; ä»m11åˆ°m44å®šä¹‰çš„å«ä¹‰å¦‚ä¸‹ï¼š m11ï¼šxè½´æ–¹å‘è¿›è¡Œç¼©æ”¾ m12ï¼šå’Œm21ä¸€èµ·å†³å®šzè½´çš„æ—‹è½¬ m13:å’Œm31ä¸€èµ·å†³å®šyè½´çš„æ—‹è½¬ m14: m21:å’Œm12ä¸€èµ·å†³å®šzè½´çš„æ—‹è½¬ m22:yè½´æ–¹å‘è¿›è¡Œç¼©æ”¾ m23:å’Œm32ä¸€èµ·å†³å®šxè½´çš„æ—‹è½¬ m24: m31:å’Œm13ä¸€èµ·å†³å®šyè½´çš„æ—‹è½¬ m32:å’Œm23ä¸€èµ·å†³å®šxè½´çš„æ—‹è½¬ m33:zè½´æ–¹å‘è¿›è¡Œç¼©æ”¾ m34:é€è§†æ•ˆæœm34= -1/Dï¼ŒDè¶Šå°ï¼Œé€è§†æ•ˆæœè¶Šæ˜æ˜¾ï¼Œå¿…é¡»åœ¨æœ‰æ—‹è½¬æ•ˆæœçš„å‰æä¸‹ï¼Œæ‰ä¼šçœ‹åˆ°é€è§†æ•ˆæœ m41:xè½´æ–¹å‘è¿›è¡Œå¹³ç§» m42:yè½´æ–¹å‘è¿›è¡Œå¹³ç§» m43:zè½´æ–¹å‘è¿›è¡Œå¹³ç§» m44:åˆå§‹ä¸º1 äºŒã€CATransform3Dä¸­çš„å±æ€§å’Œæ–¹æ³•12345678//åˆå§‹åŒ–ä¸€ä¸ªtransform3Då¯¹è±¡ï¼Œä¸åšä»»ä½•å˜æ¢const CATransform3D CATransform3DIdentity;//åˆ¤æ–­ä¸€ä¸ªtransform3Då¯¹è±¡æ˜¯å¦æ˜¯åˆå§‹åŒ–çš„å¯¹è±¡bool CATransform3DIsIdentity (CATransform3D t);//æ¯”è¾ƒä¸¤ä¸ªtransform3Då¯¹è±¡æ˜¯å¦ç›¸åŒbool CATransform3DEqualToTransform (CATransform3D a, CATransform3D b);//å°†ä¸¤ä¸ª transform3Då¯¹è±¡å˜æ¢å±æ€§è¿›è¡Œå åŠ ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„transform3Då¯¹è±¡CATransform3D CATransform3DConcat (CATransform3D a, CATransform3D b); 1ã€å¹³ç§»å˜æ¢1234//è¿”å›ä¸€ä¸ªå¹³ç§»å˜æ¢çš„transform3Då¯¹è±¡ txï¼Œtyï¼Œtzå¯¹åº”xï¼Œyï¼Œzè½´çš„å¹³ç§»CATransform3D CATransform3DMakeTranslation (CGFloat tx, CGFloat ty, CGFloat tz);//åœ¨æŸä¸ªtransform3Då˜æ¢çš„åŸºç¡€ä¸Šè¿›è¡Œå¹³ç§»å˜æ¢ï¼Œtæ˜¯ä¸Šä¸€ä¸ªtransform3Dï¼Œå…¶ä»–å‚æ•°åŒä¸ŠCATransform3D CATransform3DTranslate (CATransform3D t, CGFloat tx, CGFloat ty, CGFloat tz); ä¾‹å¦‚ï¼š 123456789 UIImageView * imageView = [[UIImageView alloc]initWithFrame:CGRectMake(100, 100, 100, 100)]; imageView.image = [UIImage imageNamed:@&quot;å±å¹•å¿«ç…§ 2015-12-06 ä¸‹åˆ3.27.15.png&quot;]; [self.view addSubview:imageView]; UIImageView * newImageView = [[UIImageView alloc]initWithFrame:CGRectMake(100, 100, 100, 100)]; newImageView.image=[UIImage imageNamed:@&quot;å±å¹•å¿«ç…§ 2015-12-06 ä¸‹åˆ3.27.15.png&quot;]; [self.view addSubview:newImageView]; CATransform3D trans = CATransform3DMakeTranslation(10, 200, 0); newImageView.layer.transform =trans; æ•ˆæœå¦‚ä¸‹ï¼š 2ã€ç¼©æ”¾å˜æ¢1234//xï¼Œyï¼Œzåˆ†åˆ«å¯¹åº”xè½´ï¼Œyè½´ï¼Œzè½´çš„ç¼©æ”¾æ¯”ä¾‹CATransform3D CATransform3DMakeScale (CGFloat sx, CGFloat sy, CGFloat sz);//åœ¨ä¸€ä¸ªtransform3Då˜æ¢çš„åŸºç¡€ä¸Šè¿›è¡Œç¼©æ”¾å˜æ¢ï¼Œå…¶ä»–å‚æ•°åŒä¸ŠCATransform3D CATransform3DScale (CATransform3D t, CGFloat sx, CGFloat sy, CGFloat sz); ä¾‹å¦‚ï¼š 123456789UIImageView * imageView = [[UIImageView alloc]initWithFrame:CGRectMake(100, 100, 100, 100)]; imageView.image = [UIImage imageNamed:@&quot;å±å¹•å¿«ç…§ 2015-12-06 ä¸‹åˆ3.27.15.png&quot;]; [self.view addSubview:imageView]; UIImageView * newImageView = [[UIImageView alloc]initWithFrame:CGRectMake(100, 300, 100, 100)]; newImageView.image=[UIImage imageNamed:@&quot;å±å¹•å¿«ç…§ 2015-12-06 ä¸‹åˆ3.27.15.png&quot;]; [self.view addSubview:newImageView]; CATransform3D trans = CATransform3DMakeScale(2, 1, 1); newImageView.layer.transform =trans; æ•ˆæœå¦‚ä¸‹ï¼š 3ã€æ—‹è½¬å˜æ¢123456//angleå‚æ•°æ˜¯æ—‹è½¬çš„è§’åº¦ï¼Œä¸ºå¼§åº¦åˆ¶ 0-2Ï€//xï¼Œyï¼Œzå†³å®šäº†æ—‹è½¬å›´ç»•çš„ä¸­è½´ï¼Œå–å€¼ä¸º-1â€”â€”1ä¹‹é—´ï¼Œä¾‹å¦‚ï¼ˆ1ï¼Œ0ï¼Œ0ï¼‰,åˆ™æ˜¯ç»•xè½´æ—‹è½¬ï¼ˆ0.5ï¼Œ0.5ï¼Œ0ï¼‰ï¼Œåˆ™æ˜¯ç»•xè½´ä¸yè½´ä¸­//é—´45åº¦ä¸ºè½´æ—‹è½¬,ä¾æ¬¡è¿›è¡Œè®¡ç®—CATransform3D CATransform3DMakeRotation (CGFloat angle, CGFloat x, CGFloat y, CGFloat z);//åœ¨ä¸€ä¸ªtransform3Dçš„åŸºç¡€ä¸Šè¿›è¡Œæ—‹è½¬å˜æ¢ï¼Œå…¶ä»–å‚æ•°å¦‚ä¸ŠCATransform3D CATransform3DRotate (CATransform3D t, CGFloat angle, CGFloat x, CGFloat y, CGFloat z); ä¾‹å¦‚ï¼š 123456789UIImageView * imageView = [[UIImageView alloc]initWithFrame:CGRectMake(100, 100, 100, 100)]; imageView.image = [UIImage imageNamed:@&quot;å±å¹•å¿«ç…§ 2015-12-06 ä¸‹åˆ3.27.15.png&quot;]; [self.view addSubview:imageView]; UIImageView * newImageView = [[UIImageView alloc]initWithFrame:CGRectMake(100, 300, 100, 100)]; newImageView.image=[UIImage imageNamed:@&quot;å±å¹•å¿«ç…§ 2015-12-06 ä¸‹åˆ3.27.15.png&quot;]; [self.view addSubview:newImageView]; CATransform3D trans = CATransform3DMakeRotation(M_PI/2, 0, 0, 1); newImageView.layer.transform =trans; æ•ˆæœå¦‚ä¸‹ï¼š å¦å¤–ï¼Œå½“æˆ‘ä»¬æœ‰å‚ç›´äºzè½´çš„æ—‹è½¬åˆ†é‡æ—¶ï¼Œè®¾ç½®m34çš„å€¼å¯ä»¥å¢åŠ é€è§†æ•ˆæœï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºæ™¯æ·±æ•ˆæœï¼Œä¾‹å¦‚ï¼š 123456789101112 UIImageView * imageView = [[UIImageView alloc]initWithFrame:CGRectMake(100, 100, 100, 100)]; imageView.image = [UIImage imageNamed:@&quot;å±å¹•å¿«ç…§ 2015-12-06 ä¸‹åˆ3.27.15.png&quot;]; imageView.layer.transform = CATransform3DMakeRotation(M_PI/4, 0, 1, 0); [self.view addSubview:imageView]; UIImageView * newImageView = [[UIImageView alloc]initWithFrame:CGRectMake(100, 300, 100, 100)]; newImageView.image=[UIImage imageNamed:@&quot;å±å¹•å¿«ç…§ 2015-12-06 ä¸‹åˆ3.27.15.png&quot;]; [self.view addSubview:newImageView]; CATransform3D trans = CATransform3DIdentity; trans.m34 = -1/100.0; trans = CATransform3DRotate(trans, M_PI/4, 0, 1, 0); newImageView.layer.transform =trans; ä¸¤ä¸ªimageViewéƒ½è¿›è¡Œäº†yè½´çš„æ—‹è½¬å˜æ¢ï¼Œç¬¬äºŒä¸ªæœ‰é€è§†æ•ˆæœï¼Œç¬¬ä¸€ä¸ªæ²¡æœ‰ï¼Œè¿è¡Œå¦‚ä¸‹ï¼š 4ã€æ—‹è½¬ç¿»è½¬å˜æ¢12//å°†ä¸€ä¸ªæ—‹è½¬çš„æ•ˆæœè¿›è¡Œç¿»è½¬ CATransform3D CATransform3DInvert (CATransform3D t); ä¾‹å¦‚ï¼š 123456789101112 UIImageView * imageView = [[UIImageView alloc]initWithFrame:CGRectMake(100, 100, 100, 100)]; imageView.image = [UIImage imageNamed:@&quot;å±å¹•å¿«ç…§ 2015-12-06 ä¸‹åˆ3.27.15.png&quot;]; imageView.layer.transform = CATransform3DMakeRotation(M_PI/4, 0, 0, 1); [self.view addSubview:imageView]; UIImageView * newImageView = [[UIImageView alloc]initWithFrame:CGRectMake(100, 300, 100, 100)]; newImageView.image=[UIImage imageNamed:@&quot;å±å¹•å¿«ç…§ 2015-12-06 ä¸‹åˆ3.27.15.png&quot;]; [self.view addSubview:newImageView]; CATransform3D trans = CATransform3DMakeRotation(M_PI/4, 0, 0, 1); trans = CATransform3DInvert(trans); newImageView.layer.transform =trans; æ•ˆæœå¦‚ä¸‹ï¼š 5ã€CATransform3Dä¸CGAffineTransformçš„è½¬æ¢CGAffineTransformæ˜¯UIKitæ¡†æ¶ä¸­ä¸€ä¸ªç”¨äºå˜æ¢çš„çŸ©é˜µï¼Œå…¶ä½œç”¨ä¸CATransformç±»ä¼¼ï¼Œåªæ˜¯å…¶å¯ä»¥ç›´æ¥ä½œç”¨äºViewï¼Œè€Œä¸ç”¨ä½œç”¨äºlayerï¼Œè¿™ä¸¤ä¸ªçŸ©é˜µä¹Ÿå¯ä»¥è¿›è¡Œè½¬æ¢ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š 123456//å°†ä¸€ä¸ªCGAffinrTransformè½¬åŒ–ä¸ºCATransform3DCATransform3D CATransform3DMakeAffineTransform (CGAffineTransform m);//åˆ¤æ–­ä¸€ä¸ªCATransform3Dæ˜¯å¦å¯ä»¥è½¬æ¢ä¸ºCAAffineTransformbool CATransform3DIsAffine (CATransform3D t);//å°†CATransform3Dè½¬æ¢ä¸ºCGAffineTransformCGAffineTransform CATransform3DGetAffineTransform (CATransform3D t); ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSå¼€å‘CoreAnimationè§£è¯»ä¹‹å››â€”â€”Layerå±‚åŠ¨ç”»å†…å®¹","slug":"159iOSå¼€å‘CoreAnimationè§£è¯»ä¹‹å››â€”â€”Layerå±‚åŠ¨ç”»å†…å®¹","date":"2015-12-04T16:00:00.000Z","updated":"2021-07-05T08:09:40.544Z","comments":true,"path":"2015/12/05/159iOSå¼€å‘CoreAnimationè§£è¯»ä¹‹å››â€”â€”Layerå±‚åŠ¨ç”»å†…å®¹/","link":"","permalink":"http://huishao.cc/2015/12/05/159iOSå¼€å‘CoreAnimationè§£è¯»ä¹‹å››â€”â€”Layerå±‚åŠ¨ç”»å†…å®¹/","excerpt":"","text":"iOSå¼€å‘CoreAnimationè§£è¯»ä¹‹å››â€”â€”Layerå±‚åŠ¨ç”»å†…å®¹ä¸€ã€å¼•è¨€é€šè¿‡å‰å‡ ç¯‡åšå®¢çš„ä»‹ç»ï¼Œæˆ‘ä»¬å¯ä»¥äº†è§£åˆ°layerå±‚å¯ä»¥è®¾ç½®è®¸å¤šä¸æ§ä»¶UIç›¸å…³çš„å±æ€§ï¼Œå¹¶ä¸”å¯¹äºiOSå¼€å‘ï¼ŒUIViewå±‚çš„å±æ€§æ˜¯ä¼šæ˜ å°„åˆ°CALayerçš„ï¼Œå› æ­¤ï¼Œå¯ä»¥é€šè¿‡UIKitå’ŒCoreAnimationä¸¤ä¸ªæ¡†æ¶æ¥è®¾ç½®æ§ä»¶çš„UIç›¸å…³å±æ€§ï¼Œå½“å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿å…¶å±•ç¤ºä¸€ä¸ªåŠ¨ç”»æ•ˆæœã€‚ äºŒã€CAAnimationåŠ¨ç”»ä½“ç³»çš„ä»‹ç»CAAnimationæ˜¯CoreAnimationæ¡†æ¶ä¸­æ‰§è¡ŒåŠ¨ç”»å¯¹è±¡çš„åŸºç±»ï¼Œä¸‹é¢æœ‰ä¸€å¼ å›¾ï¼Œæ˜¯æˆ‘æ‰‹ç”»çš„ï¼Œä¸å¤ªç¾è§‚ï¼Œä½†æ˜¯å¯ä»¥å°†ä¸CAAnimationç›¸å…³çš„å‡ ä¸ªåŠ¨ç”»ç±»çš„å…³ç³»è¡¨è¾¾æ¸…æ¥šï¼š ä»ä¸Šå›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œä»CAAnimationä¸­ç»§æ‰¿å‡ºä¸‰ä¸ªå­ç±»ï¼Œåˆ†åˆ«æ˜¯ç”¨äºåˆ›å»ºå±æ€§åŠ¨ç”»çš„CAPropertyAnimationï¼Œåˆ›å»ºè½¬åœºåŠ¨ç”»çš„CATransitionå’Œåˆ›å»ºç»„åˆåŠ¨ç”»çš„CAAnimationGroupã€‚ æˆ‘ä»¬å°±å…ˆä»æ ¹ç±»å¼€å§‹æ¢è®¨ã€‚ 1.CAAnimationå±æ€§å’Œæ–¹æ³•CAAnimationä½œä¸ºåŠ¨ç”»å¯¹è±¡çš„åŸºç±»ï¼Œå…¶ä¸­å°è£…äº†åŠ¨ç”»çš„åŸºç¡€å±æ€§ï¼Œå¦‚ä¸‹ï¼š 12345678//é€šè¿‡ç±»æ–¹æ³•åˆ›å»ºä¸€ä¸ªCAAnimationå¯¹è±¡+ (instancetype)animation;//åŠ¨ç”»æ‰§è¡Œçš„æ—¶åºæ¨¡å¼@property(nullable, strong) CAMediaTimingFunction *timingFunction;//ä»£ç†@property(nullable, strong) id delegate;//æ˜¯å¦åŠ¨ç”»å®Œæˆæ—¶å°†åŠ¨ç”»å¯¹è±¡ç§»é™¤æ‰@property(getter=isRemovedOnCompletion) BOOL removedOnCompletion; timingFunctionå®šä¹‰äº†åŠ¨ç”»æ‰§è¡Œçš„æ—¶åºæ•ˆæœï¼ŒCAMediaTimingFunctionçš„åˆ›å»ºæ–¹å¼å¦‚ä¸‹ï¼š 1234567891011121314/*nameå‚æ•°å†³å®šçš„æ‰§è¡Œçš„æ•ˆæœï¼Œå¯é€‰å‚æ•°å¦‚ä¸‹//çº¿æ€§æ‰§è¡Œ NSString * const kCAMediaTimingFunctionLinear; //æ·¡å…¥ åœ¨åŠ¨ç”»å¼€å§‹æ—¶ æ·¡å…¥æ•ˆæœ NSString * const kCAMediaTimingFunctionEaseIn; //æ·¡å‡º åœ¨åŠ¨ç”»ç»“æŸæ—¶ æ·¡å‡ºæ•ˆæœ NSString * const kCAMediaTimingFunctionEaseOut; //æ·¡å…¥æ·¡å‡º NSString * const kCAMediaTimingFunctionEaseInEaseOut; //é»˜è®¤æ•ˆæœ NSString * const kCAMediaTimingFunctionDefault;*/+ (instancetype)functionWithName:(NSString *)name; CAAnimationçš„ä»£ç†æ–¹æ³•å…¥å¦‚ä¸‹å‡ ä¸ªï¼š 1234//åŠ¨ç”»å¼€å§‹æ—¶æ‰§è¡Œçš„å›è°ƒ- (void)animationDidStart:(CAAnimation *)anim;//åŠ¨ç”»ç»“æŸåæ‰§è¡Œçš„å›è°ƒ- (void)animationDidStop:(CAAnimation *)anim finished:(BOOL)flag; 2.CAPropertyAnimationå±æ€§ä¸æ–¹æ³•CAPropertyAnimationæ˜¯ç»§æ‰¿äºCAAnimationä¸“é—¨ç”¨æ¥åˆ›å»ºä¸å±æ€§ç›¸å…³çš„åŠ¨ç”»çš„ç±»ï¼š 12345678910111213//åˆ›å»ºå¯¹è±¡ å‚æ•°ä¸­çš„pathå°±æ˜¯æˆ‘ä»¬è¦æ‰§è¡ŒåŠ¨ç”»çš„å±æ€§//ä¾‹å¦‚ï¼Œå¦‚æœä¼ å…¥@&quot;backgroundColor&quot; å½“layerçš„èƒŒæ™¯é¢œè‰²æ”¹å˜æ—¶ï¼Œå°±ä¼šæ‰§è¡Œæˆ‘ä»¬è®¾ç½®çš„åŠ¨ç”»+ (instancetype)animationWithKeyPath:(nullable NSString *)path;//è¿™ä¸ªå±æ€§ç¡®å®šåŠ¨ç”»æ‰§è¡Œçš„çŠ¶æ€æ˜¯å¦å åŠ åœ¨æ§ä»¶çš„åŸçŠ¶æ€ä¸Š//é»˜è®¤è®¾ç½®ä¸ºNOï¼Œå¦‚æœæˆ‘ä»¬æ‰§è¡Œä¸¤æ¬¡ä½ç½®ç§»åŠ¨çš„åŠ¨ç”»ï¼Œä¼šä»åŒä¸€ä½ç½®æ‰§è¡Œä¸¤æ¬¡//å¦‚æœè®¾ç½®ä¸ºYESï¼Œåˆ™ä¼šåœ¨ç¬¬ä¸€æ¬¡æ‰§è¡Œçš„åŸºç¡€ä¸Šæ‰§è¡Œç¬¬äºŒæ¬¡åŠ¨ç”»@property(getter=isAdditive) BOOL additive;//è¿™ä¸ªå±æ€§å¯¹é‡å¤æ‰§è¡Œçš„åŠ¨ç”»æœ‰æ•ˆæœ//é»˜è®¤ä¸ºNOï¼Œé‡å¤æ‰§è¡Œçš„åŠ¨ç”»æ¯æ¬¡éƒ½æ˜¯ä»èµ·å§‹çŠ¶æ€å¼€å§‹//å¦‚æœè®¾ç½®ä¸ºyesï¼Œåˆ™ä¸ºæ­¤æ‰§è¡Œéƒ½ä¼šåœ¨ä¸Šä¸€æ¬¡æ‰§è¡Œçš„åŸºç¡€ä¸Šæ‰§è¡Œ@property(getter=isCumulative) BOOL cumulative;//è¿™ä¸ªå±æ€§å’Œtransfronå±æ€§çš„åŠ¨ç”»æ‰§è¡Œç›¸å…³@property(nullable, strong) CAValueFunction *valueFunction; ä¸Šé¢è¿™äº›å±æ€§ä¸­ï¼Œåªæœ‰ä¸€ä¸ªéœ€è¦æˆ‘ä»¬æ³¨æ„ï¼ŒvalueFunctionæ˜¯ä¸“é—¨ä¸ºäº†transformåŠ¨ç”»è€Œè®¾ç½®çš„ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰åŠæ³•ç›´æ¥æ”¹å˜transform3Dä¸­çš„å±æ€§ï¼Œé€šè¿‡è¿™ä¸ªå‚æ•°ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬ç›´æ¥æ“ä½œtransfrom3Då±æ€§å˜åŒ–äº§ç”ŸåŠ¨ç”»æ•ˆæœï¼Œä¸¾ä¾‹å¦‚ä¸‹ï¼Œä¸€ä¸ªç»•Zè½´æ—‹è½¬çš„åŠ¨ç”»ï¼š 123456789101112 //ç»•zè½´æ—‹è½¬çš„åŠ¨ç”» CABasicAnimation * ani = [CABasicAnimation animationWithKeyPath:@&quot;transform&quot;]; //ä»0åº¦å¼€å§‹ ani.fromValue = @0; //æ—‹è½¬åˆ°180åº¦ ani.toValue = [NSNumber numberWithFloat:M_PI]; //æ—¶é—´2S ani.duration = 2; //è®¾ç½®ä¸ºzè½´æ—‹è½¬ ani.valueFunction = [CAValueFunction functionWithName:kCAValueFunctionRotateZ]; //æ‰§è¡ŒåŠ¨ç”» [layer addAnimation:ani forKey:@&quot;&quot;]; å®é™…ä¸Šï¼Œä½¿ç”¨ç‚¹çš„æ–¹å¼ä¹Ÿæ˜¯å¯ä»¥è®¿é—®åˆ°ç›¸åº”å±æ€§çš„ï¼Œå¦‚æœä¸è®¾ç½®valueFunctionï¼Œä½¿ç”¨å¦‚ä¸‹æ–¹æ³•ä¹Ÿæ˜¯å¯ä»¥è¿›è¡Œç»•Zè½´æ—‹è½¬çš„ï¼š 12345678910//ç»•zè½´æ—‹è½¬çš„åŠ¨ç”» CABasicAnimation * ani = [CABasicAnimation animationWithKeyPath:@&quot;transform.rotation.z&quot;]; //ä»0åº¦å¼€å§‹ ani.fromValue = @0; //æ—‹è½¬åˆ°180åº¦ ani.toValue = [NSNumber numberWithFloat:M_PI]; //æ—¶é—´2S ani.duration = 2; //æ‰§è¡ŒåŠ¨ç”» [layer addAnimation:ani forKey:@&quot;&quot;]; 3.CABasicAnimationå±æ€§CABasicAnimatonæ˜¯CAPropertyAnimationåˆ†å‡ºæ¥çš„ä¸€ä¸ªå­ç±»ï¼Œåˆ›å»ºåŸºç¡€çš„å±æ€§å˜åŒ–åŠ¨ç”»ï¼Œä¾‹å¦‚æˆ‘ä»¬ä¸Šé¢çš„ç¤ºä¾‹ä»£ç ï¼Œå…¶ä¸­å±æ€§å¦‚ä¸‹ï¼š 123@property(nullable, strong) id fromValue;@property(nullable, strong) id toValue;@property(nullable, strong) id byValue; ä¸Šé¢ä¸‰ä¸ªå±æ€§éƒ½æ˜¯æ¥ç¡®å®šåŠ¨ç”»çš„èµ·å§‹ä¸ç»“æŸä½ç½®ï¼Œæœ‰å¦‚ä¸‹çš„å«ä¹‰ï¼š fromValueå’ŒtoValueä¸ä¸ºç©ºï¼šåŠ¨ç”»çš„å€¼ç”±fromValueå˜åŒ–åˆ°toValue fromValueå’ŒbyValueä¸ä¸ºç©ºï¼šåŠ¨ç”»çš„å€¼ç”±fromValueå˜åŒ–åˆ°fromValue+byValue byValueå’ŒtoValueä¸ä¸ºç©ºï¼šåŠ¨ç”»çš„å€¼ç”±toValue-byValueå˜åŒ–åˆ°toValue åªæœ‰fromValueä¸ä¸ºç©ºï¼šåŠ¨ç”»çš„å€¼ç”±fromValueå˜åŒ–åˆ°layerçš„å½“å‰çŠ¶æ€å€¼ åªæœ‰toValueä¸ä¸ºç©ºï¼šåŠ¨ç”»çš„å€¼ç”±layerå½“å‰çš„å€¼å˜åŒ–åˆ°toValue åªæœ‰byValueä¸ä¸ºç©ºï¼šåŠ¨ç”»çš„å€¼ç”±layerå½“å‰çš„å€¼å˜åŒ–åˆ°layerå½“å‰çš„å€¼+byValue 4.CAKeyframeAnimationå…³é”®å¸§åŠ¨ç”»CAKeyframeAnimationä¹Ÿæ˜¯ç»§æ‰¿ä¸CAPropertyAnimationçš„ä¸€ä¸ªå­ç±»ï¼Œå…¶ä¸CABasicAnimationçš„ä¸åŒä¹‹å¤„åœ¨äºè™½ç„¶å…¶éƒ½æ˜¯æ”¹å˜layerå±‚å±æ€§çš„åŠ¨ç”»ï¼Œä½†æ˜¯CABasicAnimationåªèƒ½è®¾ç½®åˆå§‹ä¸ç»“æŸçŠ¶æ€ï¼Œè¿™ä¹‹é—´æˆ‘ä»¬æ²¡åŠæ³•æ§åˆ¶ï¼Œè€ŒCAKeyframeAnimationå¯ä»¥è®©æˆ‘ä»¬è®¾ç½®ä¸€äº›å…³é”®å¸§å†æ•´ä¸ªåŠ¨ç”»çš„è¿‡ç¨‹ä¸­ã€‚å±æ€§æ–¹æ³•å¦‚ä¸‹ï¼š 1234567891011121314151617//å…³é”®å¸§çš„å€¼æ•°ç»„ ä¾‹å¦‚æˆ‘ä»¬æƒ³è®©æ§ä»¶æ²¿æŸä¸ªè·¯å¾„ç§»åŠ¨ï¼Œè¿™é‡Œé¢å­˜æ”¾æ¯ä¸ªç§»åŠ¨çš„ç‚¹@property(nullable, copy) NSArray *values;//ç›´æ¥è®¾ç½®è·¯å¾„ï¼Œä½œç”¨åŸŸvaluesç±»ä¼¼@property(nullable) CGPathRef path;//è®¾ç½®æ¯ä¸€å¸§æ‰§è¡Œçš„æ—¶é—´é•¿çŸ­ è¿™ä¸ªçš„å–å€¼ä¸º0-1ï¼Œä»£è¡¨å ç”¨æ—¶é—´çš„æ¯”ä¾‹@property(nullable, copy) NSArray&lt;NSNumber *&gt; *keyTimes;//æ¯ä¸€å¸§æ‰§è¡Œè¿‡ç¨‹ä¸­çš„æ—¶åºæ•ˆæœ ä¸Šé¢æœ‰æè¿‡@property(nullable, copy) NSArray&lt;CAMediaTimingFunction *&gt; *timingFunctions;/*è®¾ç½®å¸§çš„ä¸­é—´å€¼å¦‚ä½•è®¡ç®— NSString * const kCAAnimationLinear; NSString * const kCAAnimationDiscrete; NSString * const kCAAnimationPaced; NSString * const kCAAnimationCubic; NSString * const kCAAnimationCubicPaced;*/@property(copy) NSString *calculationMode; ç¤ºä¾‹å¦‚ä¸‹ï¼š 1234 CAKeyframeAnimation * ani = [CAKeyframeAnimation animationWithKeyPath:@&quot;position&quot;]; ani.values = @[[NSValue valueWithCGPoint:CGPointMake(100, 100)],[NSValue valueWithCGPoint:CGPointMake(120, 100)],[NSValue valueWithCGPoint:CGPointMake(120, 200)],[NSValue valueWithCGPoint:CGPointMake(200, 200)]]; ani.duration = 3; [layer addAnimation:ani forKey:@&quot;&quot;]; 5.CASpringAnimationé˜»å°¼åŠ¨ç”»é€šè¿‡CASpringAnimationï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…å¾ˆè½»æ¾çš„åˆ›å»ºå‡ºæœ‰å¼¹ç°§æ•ˆæœçš„åŠ¨ç”»ï¼Œä¸»è¦å±æ€§å¦‚ä¸‹ï¼š 12345678910//è¿™ä¸ªå±æ€§è®¾ç½®å¼¹ç°§é‡ç‰©çš„è´¨é‡ ä¼šå½±å“æƒ¯æ€§ å¿…é¡»å¤§äº0 é»˜è®¤ä¸º1@property CGFloat mass;//è®¾ç½®å¼¹ç°§çš„åˆšåº¦ç³»æ•°ï¼Œå¿…é¡»å¤§äº0 é»˜è®¤ä¸º100 è¿™ä¸ªè¶Šå¤§ åˆ™å›å¼¹è¶Šå¿«@property CGFloat stiffness;//é˜»å°¼ç³»æ•° é»˜è®¤ä¸º10 å¿…é¡»å¤§äº0 è¿™ä¸ªå€¼è¶Šå¤§ å›å¼¹çš„å¹…åº¦è¶Šå°@property CGFloat damping;//åˆå§‹é€Ÿåº¦@property CGFloat initialVelocity;//è·å–åŠ¨ç”»åœä¸‹æ¥éœ€è¦çš„æ—¶é—´@property(readonly) CFTimeInterval settlingDuration; 6.CATransitionè½¬åœºåŠ¨ç”»CATransitionå’ŒCAPropertyAnimationçš„ä¸åŒä¹‹å¤„åœ¨äºå½“layerå±‚å‡ºç°æ—¶ï¼Œä¼šäº§ç”ŸåŠ¨ç”»æ•ˆæœï¼Œè€Œå¹¶ä¸æ˜¯å±æ€§æ”¹å˜æ—¶ï¼Œå±æ€§å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324/*è®¾ç½®åŠ¨ç”»ç±»å‹//æ·¡å…¥ NSString * const kCATransitionFade; //ç§»å…¥ NSString * const kCATransitionMoveIn; //å‹å…¥ NSString * const kCATransitionPush; //æº¶è§£ NSString * const kCATransitionReveal;*/@property(copy) NSString *type;/*è®¾ç½®åŠ¨ç”»çš„æ–¹å‘//ä»å³ä¾§è¿› NSString * const kCATransitionFromRight; //ä»å·¦ä¾§è¿› NSString * const kCATransitionFromLeft; //ä»ä¸Šä¾§è¿› NSString * const kCATransitionFromTop; //ä»ä¸‹ä¾§è¿› NSString * const kCATransitionFromBottom;*/@property(nullable, copy) NSString *subtype; å…¶å®ï¼Œå…³äºtypeå®šä¹‰çš„åŠ¨ç”»æ•ˆæœï¼Œå‡ºæ¥å®˜æ–¹å®šä¹‰çš„ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ä¸€äº›ç§æœ‰çš„å‚æ•°ï¼Œå¦‚ä¸‹ï¼š 12345pageCurl ç¿»é¡µrippleEffect æ»´æ°´æ•ˆæœsuckEffect æ”¶ç¼©æ•ˆæœï¼Œå¦‚ä¸€å—å¸ƒè¢«æŠ½èµ°cube ç«‹æ–¹ä½“æ•ˆæœoglFlip ä¸Šä¸‹ç¿»è½¬æ•ˆæœ ä¾‹å¦‚ï¼š 1234 CATransition * ani = [CATransition animation]; ani.type = @&quot;pageCurl&quot;; ani.subtype = kCATransitionFromRight; [layer addAnimation:ani forKey:@&quot;&quot;]; 7.CAAnimationGroupåŠ¨ç”»ç»„CAAnimationGroupæœ¬èº«å¹¶æ²¡æœ‰å®šä¹‰åŠ¨ç”»ï¼Œä»–å¯ä»¥å°†æˆ‘ä»¬ä¸Šé¢æåˆ°çš„ç›¸å…³åŠ¨ç”»è¿›è¡Œç»„åˆï¼š 1@property(nullable, copy) NSArray&lt;CAAnimation *&gt; *animations; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSè¿ç”¨runtimeå…¨å±€ä¿®æ”¹UILabelçš„é»˜è®¤å­—ä½“","slug":"158iOSè¿ç”¨runtimeå…¨å±€ä¿®æ”¹UILabelçš„é»˜è®¤å­—ä½“","date":"2015-12-01T16:00:00.000Z","updated":"2021-07-05T08:08:43.463Z","comments":true,"path":"2015/12/02/158iOSè¿ç”¨runtimeå…¨å±€ä¿®æ”¹UILabelçš„é»˜è®¤å­—ä½“/","link":"","permalink":"http://huishao.cc/2015/12/02/158iOSè¿ç”¨runtimeå…¨å±€ä¿®æ”¹UILabelçš„é»˜è®¤å­—ä½“/","excerpt":"","text":"iOSè¿ç”¨runtimeå…¨å±€ä¿®æ”¹UILabelçš„é»˜è®¤å­—ä½“ä¸€ã€éœ€æ±‚èƒŒæ™¯ä»‹ç»åœ¨é¡¹ç›®æ¯”è¾ƒæˆç†Ÿçš„åŸºç¡€ä¸Šï¼Œé‡åˆ°äº†è¿™æ ·ä¸€ä¸ªéœ€æ±‚ï¼Œåº”ç”¨ä¸­éœ€è¦å¼•å…¥æ–°çš„å­—ä½“ï¼Œéœ€è¦æ›´æ¢æ‰€æœ‰Labelçš„é»˜è®¤å­—ä½“ï¼Œä½†æ˜¯åŒæ—¶ï¼Œå¯¹äºä¸€äº›ç‰¹æ®Šè®¾ç½®äº†å­—ä½“çš„labelåˆä¸éœ€è¦æ›´æ¢ã€‚ä¹çœ‹èµ·æ¥ï¼Œè¿™ä¸ªé—®é¢˜ç¡®å®ååˆ†æ£˜æ‰‹ï¼Œé¦–å…ˆé¡¹ç›®æ¯”è¾ƒå¤§ï¼Œä¸€ä¸ªä¸€ä¸ªè®¾ç½®æ‰€æœ‰ä½¿ç”¨åˆ°çš„labelçš„fontå·¥ä½œé‡æ˜¯å·¨å¤§çš„ï¼Œå¹¶ä¸”åœ¨è®¸å¤šåŠ¨æ€å±•ç¤ºçš„ç•Œé¢ä¸­ï¼Œå¯èƒ½ä¼šæ¼æ‰ä¸€äº›labelï¼Œäº§ç”Ÿbugã€‚å…¶æ¬¡ï¼Œé¡¹ç›®ä¸­çš„labelæ¥æºå¹¶ä¸å”¯ä¸€ï¼Œæœ‰ç”¨ä»£ç åˆ›å»ºçš„ï¼Œæœ‰xibå’ŒstoryBoardä¸­çš„ï¼Œè¿™ä¹Ÿå°†æµªè´¹å¾ˆå¤§çš„ç²¾åŠ›ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šæœ‰ä¸‹é¢ä¸¤ç§å¤„ç†æ–¹å¼ã€‚ äºŒã€å¤„ç†æ–¹å¼1ã€ä½¿ç”¨æ¡†æ¶åˆ›å»ºæˆ‘ä»¬è‡ªå·±çš„BaseLabelç±»ï¼Œåœ¨å…¶ä¸­è¿›è¡Œé»˜è®¤å­—ä½“çš„è®¾ç½®ï¼Œå¹¶ä¸”å¹¶ä¸å½±å“åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ç‰¹æ®Šè®¾ç½®å­—ä½“çš„labelï¼Œè¿™ç§æ–¹å¼å¯ä»¥æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ï¼Œä½†æ˜¯å¹¶ä¸é€‚äºæˆ‘ä»¬çš„åœºæ™¯ï¼Œé¡¹ç›®å·²ç»æˆç†Ÿï¼Œé‡å»ºä¸€ä¸ªlabelåŸºç±»ï¼Œæ¥è®©æ‰€æœ‰çš„UILabeléƒ½æ¢æˆå®ƒçš„å·¥ä½œé‡ä¸ä¼šæ¯”é‡æ–°è®¾ç½®æ‰€æœ‰labelå­—ä½“çš„å·¥ä½œé‡å°å¤ªå¤šã€‚ä½†è¿™ä¹Ÿæ˜¯æœ‰ä¼˜åŠ¿çš„ï¼Œè‡³å°‘å¦‚æœä¸‹æ¬¡å†æ¢å­—ä½“ï¼Œæˆ‘ä»¬å°±ä¸ç”¨éº»çƒ¦äº†ã€‚ 2ã€ä½¿ç”¨runtimeæ›¿æ¢UILabelåˆå§‹åŒ–æ–¹æ³•è¿™æ˜¯æœ€ç®€å•æ–¹ä¾¿çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨runtimeæœºåˆ¶æ›¿æ¢æ‰UILabelçš„åˆå§‹åŒ–æ–¹æ³•ï¼Œåœ¨å…¶ä¸­å¯¹labelçš„å­—ä½“è¿›è¡Œé»˜è®¤è®¾ç½®ã€‚å› ä¸ºLabelå¯ä»¥ä»initWithFrameã€initå’Œnibæ–‡ä»¶ä¸‰ä¸ªæ¥æºåˆå§‹åŒ–ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†è¿™ä¸‰ä¸ªåˆå§‹åŒ–çš„æ–¹æ³•éƒ½æ›¿æ¢æ‰ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªUILabelçš„ç±»åˆ«ï¼š 12345#import &lt;UIKit/UIKit.h&gt;@interface UILabel (YHBaseChangeDefaultFont)@end åœ¨å…¶ä¸­åŠ å…¥å¦‚ä¸‹ä»£ç ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105#import &quot;UILabel+YHBaseChangeDefaultFont.h&quot;#import &lt;objc/runtime.h&gt;@implementation UILabel (YHBaseChangeDefaultFont)/** *æ¯ä¸ªNSObjectçš„å­ç±»éƒ½ä¼šè°ƒç”¨ä¸‹é¢è¿™ä¸ªæ–¹æ³• åœ¨è¿™é‡Œå°†initæ–¹æ³•è¿›è¡Œæ›¿æ¢ï¼Œä½¿ç”¨æˆ‘ä»¬çš„æ–°å­—ä½“ *å¦‚æœåœ¨ç¨‹åºä¸­åˆç‰¹æ®Šè®¾ç½®äº†å­—ä½“ åˆ™ç‰¹æ®Šè®¾ç½®çš„å­—ä½“ä¸ä¼šå—å½±å“ ä½†æ˜¯ä¸è¦åœ¨Labelçš„initæ–¹æ³•ä¸­è®¾ç½®å­—ä½“ *ä»initå’ŒinitWithFrameå’Œnibæ–‡ä»¶çš„åŠ è½½æ–¹æ³• éƒ½æ”¯æŒæ›´æ¢é»˜è®¤å­—ä½“ */+(void)load&#123; //åªæ‰§è¡Œä¸€æ¬¡è¿™ä¸ªæ–¹æ³• static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^&#123; Class class = [self class]; // When swizzling a class method, use the following: // Class class = object_getClass((id)self); //æ›¿æ¢ä¸‰ä¸ªæ–¹æ³• SEL originalSelector = @selector(init); SEL originalSelector2 = @selector(initWithFrame:); SEL originalSelector3 = @selector(awakeFromNib); SEL swizzledSelector = @selector(YHBaseInit); SEL swizzledSelector2 = @selector(YHBaseInitWithFrame:); SEL swizzledSelector3 = @selector(YHBaseAwakeFromNib); Method originalMethod = class_getInstanceMethod(class, originalSelector); Method originalMethod2 = class_getInstanceMethod(class, originalSelector2); Method originalMethod3 = class_getInstanceMethod(class, originalSelector3); Method swizzledMethod = class_getInstanceMethod(class, swizzledSelector); Method swizzledMethod2 = class_getInstanceMethod(class, swizzledSelector2); Method swizzledMethod3 = class_getInstanceMethod(class, swizzledSelector3); BOOL didAddMethod = class_addMethod(class, originalSelector, method_getImplementation(swizzledMethod), method_getTypeEncoding(swizzledMethod)); BOOL didAddMethod2 = class_addMethod(class, originalSelector2, method_getImplementation(swizzledMethod2), method_getTypeEncoding(swizzledMethod2)); BOOL didAddMethod3 = class_addMethod(class, originalSelector3, method_getImplementation(swizzledMethod3), method_getTypeEncoding(swizzledMethod3)); if (didAddMethod) &#123; class_replaceMethod(class, swizzledSelector, method_getImplementation(originalMethod), method_getTypeEncoding(originalMethod)); &#125; else &#123; method_exchangeImplementations(originalMethod, swizzledMethod); &#125; if (didAddMethod2) &#123; class_replaceMethod(class, swizzledSelector2, method_getImplementation(originalMethod2), method_getTypeEncoding(originalMethod2)); &#125;else &#123; method_exchangeImplementations(originalMethod2, swizzledMethod2); &#125; if (didAddMethod3) &#123; class_replaceMethod(class, swizzledSelector3, method_getImplementation(originalMethod3), method_getTypeEncoding(originalMethod3)); &#125;else &#123; method_exchangeImplementations(originalMethod3, swizzledMethod3); &#125; &#125;); &#125;/** *åœ¨è¿™äº›æ–¹æ³•ä¸­å°†ä½ çš„å­—ä½“åå­—æ¢è¿›å» */- (instancetype)YHBaseInit&#123; id __self = [self YHBaseInit]; UIFont * font = [UIFont fontWithName:@&quot;è¿™é‡Œè¾“å…¥ä½ çš„å­—ä½“åå­—&quot; size:self.font.pointSize]; if (font) &#123; self.font=font; &#125; return __self;&#125;-(instancetype)YHBaseInitWithFrame:(CGRect)rect&#123; id __self = [self YHBaseInitWithFrame:rect]; UIFont * font = [UIFont fontWithName:@&quot;è¿™é‡Œè¾“å…¥ä½ çš„å­—ä½“åå­—&quot; size:self.font.pointSize]; if (font) &#123; self.font=font; &#125; return __self;&#125;-(void)YHBaseAwakeFromNib&#123; [self YHBaseAwakeFromNib]; UIFont * font = [UIFont fontWithName:@&quot;è¿™é‡Œè¾“å…¥ä½ çš„å­—ä½“åå­—&quot; size:self.font.pointSize]; if (font) &#123; self.font=font; &#125; &#125;@end åœ¨ä¸Šé¢çš„æ–¹æ³•ä¸­å†™å…¥æˆ‘ä»¬æƒ³è¦UILabelé»˜è®¤æ˜¾ç¤ºçš„å­—ä½“ï¼Œæˆ‘ä»¬åˆ†åˆ«ä»initï¼ŒinitWithFrameå’Œnibæ–‡ä»¶åˆ›å»ºä¸€ä¸ªUILabelæ·»åŠ åˆ°è§†å›¾ä¸Šï¼Œä¸åšä»»ä½•å…¶ä»–çš„æ“ä½œï¼š 1234567UILabel * label = [[UILabel alloc]initWithFrame:CGRectMake(20, 100, 280, 30)]; label.text = @&quot;ä½ æ˜¯ä»initWithFrameæ¥çš„label&quot;; UILabel * label2 = [[UILabel alloc]init]; label2.frame= CGRectMake(20, 200, 280, 30); label2.text = @&quot;ä½ æ˜¯ä»initæ¥çš„label&quot;; [self.view addSubview:label]; [self.view addSubview:label2]; è¿è¡Œæ•ˆæœå¦‚ä¸‹ï¼Œå¯ä»¥çœ‹å‡ºï¼Œå­—ä½“å…¨éƒ¨æ¢æ‰äº†ï¼š ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSå¼€å‘CoreAnimationè§£è¯»ä¹‹ä¸‰â€”â€”å‡ ç§å¸¸ç”¨Layerçš„ä½¿ç”¨è§£æ","slug":"157iOSå¼€å‘CoreAnimationè§£è¯»ä¹‹ä¸‰â€”â€”å‡ ç§å¸¸ç”¨Layerçš„ä½¿ç”¨è§£æ","date":"2015-11-30T16:00:00.000Z","updated":"2021-07-05T08:07:52.920Z","comments":true,"path":"2015/12/01/157iOSå¼€å‘CoreAnimationè§£è¯»ä¹‹ä¸‰â€”â€”å‡ ç§å¸¸ç”¨Layerçš„ä½¿ç”¨è§£æ/","link":"","permalink":"http://huishao.cc/2015/12/01/157iOSå¼€å‘CoreAnimationè§£è¯»ä¹‹ä¸‰â€”â€”å‡ ç§å¸¸ç”¨Layerçš„ä½¿ç”¨è§£æ/","excerpt":"","text":"iOSå¼€å‘CoreAnimationè§£è¯»ä¹‹ä¸‰â€”â€”å‡ ç§å¸¸ç”¨Layerçš„ä½¿ç”¨è§£æä¸€ã€CAEmitterLayerCAEmitterLayeræ˜¯CoreAnimationæ¡†æ¶ä¸­çš„ç²’å­å‘å°„å±‚ï¼Œåœ¨ä»¥å‰çš„ä¸€ç‰‡åšå®¢ä¸­æœ‰è¯¦ç»†çš„ä»‹ç»å’ŒèŒƒä¾‹ï¼Œè¿™é‡Œä¸å†é‡å¤ï¼Œåœ°å€å¦‚ä¸‹ï¼š ç²’å­æ•ˆæœçš„åº”ç”¨å’Œç«ç„°èŒƒä¾‹ï¼šhttp://my.oschina.net/u/2340880/blog/485095 äºŒã€CAGradientLayerCAGradientLayeræ˜¯ç”¨äºè‰²å½©æ¢¯åº¦å±•ç¤ºçš„layerå›¾å±‚ï¼Œé€šè¿‡CAGradientLayerï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆè½»æ¾çš„åˆ›å»ºå‡ºæœ‰è¿‡æ¸¡æ•ˆæœçš„è‰²å½©å›¾ã€‚å…¶ä¸­å±æ€§å¦‚ä¸‹ï¼š 1234567891011121314151617181920/*é¢œè‰²æ•°ç»„ï¼Œè®¾ç½®æˆ‘ä»¬éœ€è¦è¿‡çš„çš„é¢œè‰²ï¼Œå¿…é¡»æ˜¯CGColorå¯¹è±¡*/@property(nullable, copy) NSArray *colors;/*é¢œè‰²å¼€å§‹è¿›è¡Œè¿‡æ¸¡çš„ä½ç½®è¿™ä¸ªæ•°ç»„ä¸­çš„å…ƒç´ æ˜¯NSNumberç±»å‹ï¼Œå•è°ƒé€’å¢çš„ï¼Œå¹¶ä¸”åœ¨0â€”â€”1ä¹‹é—´ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬è®¾ç½®ä¸¤ä¸ªé¢œè‰²è¿›è¡Œè¿‡æ¸¡ï¼Œè¿™ä¸ªæ•°ç»„ä¸­å†™å…¥0.5ï¼Œåˆ™ç¬¬ä¸€ä¸ªé¢œè‰²ä¼šåœ¨è¾¾åˆ°layerä¸€åŠçš„æ—¶å€™å¼€å§‹å‘ç¬¬äºŒä¸ªé¢œè‰²è¿‡æ¸¡*/@property(nullable, copy) NSArray&lt;NSNumber *&gt; *locations;/*ä¸‹é¢ä¸¤ä¸ªå‚æ•°ç”¨äºè®¾ç½®æ¸²æŸ“é¢œè‰²çš„èµ·ç‚¹å’Œç»ˆç‚¹ å–å€¼èŒƒå›´å‡ä¸º0â€”â€”1é»˜è®¤èµ·ç‚¹ä¸ºï¼ˆ0.5 ï¼Œ0ï¼‰ ç»ˆç‚¹ä¸ºï¼ˆ0.5 ï¼Œ1ï¼‰,é¢œè‰²çš„è¿‡æ¸¡èŒƒå›´å°±æ˜¯æ²¿yè½´ä»ä¸Šå‘ä¸‹*/@property CGPoint startPoint;@property CGPoint endPoint;/*æ¸²æŸ“é£æ ¼ iOSä¸­åªæ”¯æŒä¸€ç§é»˜è®¤çš„kCAGradientLayerAxialï¼Œæˆ‘ä»¬æ— éœ€æ‰‹åŠ¨è®¾ç½®*/@property(copy) NSString *type; ç”¨å¦‚ä¸‹ä»£ç åˆ›å»ºä¸€ä¸ªåº¦è¿‡è§†å›¾çš„æ•ˆæœï¼š 12345678 CAGradientLayer * layer = [CAGradientLayer layer]; layer.colors = @[(id)[UIColor redColor].CGColor,(id)[UIColor blueColor].CGColor,(id)[UIColor greenColor].CGColor]; layer.locations = @[@0.1,@0.7,@1]; layer.bounds = CGRectMake(0, 0, 100, 100); layer.position = CGPointMake(100, 100); layer.startPoint = CGPointMake(0, 0); layer.endPoint = CGPointMake(1, 1); [self.view.layer addSublayer:layer]; æ•ˆæœå¦‚ä¸‹ï¼š ä¸‰ã€CAReplicatorLayerCAReplocatorLayeræ˜¯æ‹·è´è§†å›¾å®¹å™¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å®ƒï¼Œå°†å…¶ä¸­çš„å­layerè¿›è¡Œæ‹·è´ï¼Œå¹¶è¿›è¡Œä¸€äº›å·®å¼‚å¤„ç†ï¼Œå…¶ä¸­å¸¸ç”¨å±æ€§æ–¹æ³•å¦‚ä¸‹ï¼š 12345678910111213141516//æ‹·è´çš„æ¬¡æ•°@property NSInteger instanceCount;//æ˜¯å¦å¼€å¯æ™¯æ·±æ•ˆæœ@property BOOL preservesDepth;//å½“CAReplicatorLayerçš„å­Layerå±‚è¿›è¡ŒåŠ¨ç”»çš„æ—¶å€™ï¼Œæ‹·è´çš„å‰¯æœ¬æ‰§è¡ŒåŠ¨ç”»çš„å»¶æ—¶@property CFTimeInterval instanceDelay;//æ‹·è´å‰¯æœ¬çš„3Då˜æ¢@property CATransform3D instanceTransform;//æ‹·è´å‰¯æœ¬çš„é¢œè‰²å˜æ¢@property(nullable) CGColorRef instanceColor;//æ¯ä¸ªæ‹·è´å‰¯æœ¬çš„é¢œè‰²åç§»å‚æ•°@property float instanceRedOffset;@property float instanceGreenOffset;@property float instanceBlueOffset;//æ¯ä¸ªæ‹·è´å‰¯æœ¬çš„é€æ˜åº¦åç§»å‚æ•°@property float instanceAlphaOffset; ä¾‹å¦‚ï¼Œé€šè¿‡æ‹·è´ä¸€ä¸ªè‰²å—ï¼Œä½¿å…¶äº§ç”Ÿå¹³ç§»æ’åˆ—ï¼š 1234567891011121314 CAReplicatorLayer *reLayer = [CAReplicatorLayer layer]; reLayer.position = CGPointMake(0, 0); CALayer * layer= [CALayer layer]; [reLayer addSublayer:layer]; [self.view.layer addSublayer:reLayer]; layer.bounds = CGRectMake(0, 0, 20, 20); layer.position = CGPointMake(30, 100); layer.backgroundColor = [UIColor redColor].CGColor; //æ¯ä¸ªå‰¯æœ¬å‘å³å¹³ç§»25px reLayer.instanceTransform=CATransform3DMakeTranslation(25, 0, 0); //å¦‚æœè¿›è¡ŒåŠ¨ç”»ï¼Œå‰¯æœ¬å»¶æ—¶ä¸€ç§’æ‰§è¡Œ reLayer.instanceDelay = 1; //æ‹·è´åä¸ªå‰¯æœ¬ reLayer.instanceCount = 10; æ•ˆæœå¦‚ä¸‹ï¼š å››ã€CAShapeLayerCAShapeLayeræ˜¯å›¾å½¢layerå±‚ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰è¿™ä¸ªå±‚çš„å½¢çŠ¶ã€‚å…ˆæ¥çœ‹å…¶ä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨çš„å±æ€§å’Œæ–¹æ³•ï¼š 1@property(nullable) CGPathRef path; pathå±æ€§ä¸ºCAShapeLayerè®¾ç½®ä¸€ä¸ªè¾¹ç•Œè·¯å¾„ï¼Œä¾‹å¦‚æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªä¸‰è§’å½¢çš„è·¯å¾„é€šè¿‡å¦‚ä¸‹ä»£ç ï¼š 12345678 CAShapeLayer * layer = [CAShapeLayer layer]; layer.position=CGPointMake(0,0); CGMutablePathRef path = CGPathCreateMutable(); CGPathMoveToPoint(path, 0, 100, 100); CGPathAddLineToPoint(path, 0, 300, 100); CGPathAddLineToPoint(path, 0, 200, 200); CGPathAddLineToPoint(path, 0, 100, 100); layer.path=path; ä»…ä»…æœ‰è·¯å¾„ï¼Œä¸èƒ½å°†æˆ‘ä»¬æƒ³è¦çš„å½¢çŠ¶ç”»å‡ºæ¥ï¼Œä¸‹é¢ä¸€äº›å±æ€§å¯ä»¥å¯¹å›¾å½¢çš„ä¸€äº›åŸºç¡€å±æ€§è¿›è¡Œè®¾ç½®ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940//è®¾ç½®å›¾å½¢çš„å¡«å……é¢œè‰²@property(nullable) CGColorRef fillColor;/*è®¾ç½®å›¾å½¢çš„å¡«å……è§„åˆ™ é€‰é¡¹å¦‚ä¸‹ï¼šéé›¶å¡«å…… NSString *const kCAFillRuleNonZero; å¥‡å¶å¡«å…… NSString *const kCAFillRuleEvenOdd;*/@property(copy) NSString *fillRule;//è®¾ç½®çº¿æ¡é¢œè‰²@property(nullable) CGColorRef strokeColor;//è®¾ç½®çº¿æ¡çš„èµ·ç‚¹ä¸ç»ˆç‚¹ 0-1ä¹‹é—´@property CGFloat strokeStart;@property CGFloat strokeEnd;//è®¾ç½®çº¿æ¡å®½åº¦@property CGFloat lineWidth;//è®¾ç½®ä¸¤æ¡çº¿æ®µç›¸äº¤æ—¶é”è§’æ–œé¢é•¿åº¦@property CGFloat miterLimit;/*è®¾ç½®çº¿æ¡é¦–å°¾çš„å¤–è§‚å¯é€‰å‚æ•°å¦‚ä¸‹æ— å½¢çŠ¶ NSString *const kCALineCapButt; åœ†å½¢ NSString *const kCALineCapRound; æ–¹å½¢ NSString *const kCALineCapSquare;*/@property(copy) NSString *lineCap;/*è®¾ç½®çº¿æ®µçš„é“¾æ¥æ–¹å¼æ£±è§’ NSString *const kCALineJoinMiter; å¹³æ»‘ NSString *const kCALineJoinRound; æŠ˜çº¿ NSString *const kCALineJoinBevel;*/@property(copy) NSString *lineJoin; ä¿®æ”¹ä¸€ä¸‹ä¸Šé¢çš„ä»£ç ï¼Œå¦‚ä¸‹ï¼š 1234567891011121314151617CAShapeLayer * layer = [CAShapeLayer layer]; layer.position=CGPointMake(0,0); CGMutablePathRef path = CGPathCreateMutable(); CGPathMoveToPoint(path, 0, 100, 100); CGPathAddLineToPoint(path, 0, 300, 100); CGPathAddLineToPoint(path, 0, 200, 200); CGPathAddLineToPoint(path, 0, 100, 100); layer.path=path; layer.fillColor= [UIColor redColor].CGColor; layer.fillRule = kCAFillRuleEvenOdd; layer.strokeColor = [UIColor blueColor].CGColor; layer.strokeStart =0; layer.strokeEnd =0.5; layer.lineWidth = 5; layer.miterLimit = 1; layer.lineJoin = kCALineJoinMiter; [self.view.layer addSublayer:layer]; æ•ˆæœå¦‚ä¸‹ï¼š é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è®¾ç½®è¾¹ç•Œçš„çº¿æ¡ä¸ºè™šçº¿ï¼Œé€šè¿‡ä¸‹é¢ä¸¤ä¸ªå±æ€§ï¼š 1234567 //è®¾ç½®çº¿æ®µçš„å®½åº¦ä¸º5px é—´è·ä¸º10px /* è¿™ä¸ªæ•°ç»„ä¸­è¿˜å¯ä»¥ç»§ç»­æ·»åŠ ï¼Œä¼šå¾ªç¯è¿›è¡Œè®¾ç½® ä¾‹å¦‚ 5 2 1 3 åˆ™ç¬¬ä¸€æ¡çº¿æ®µ5pxï¼Œé—´è·2pxï¼Œç¬¬äºŒæ¡çº¿æ®µ1px é—´è·3pxå†å¼€å§‹ç¬¬ä¸€æ¡çº¿æ®µ */ layer.lineDashPattern = @[@05,@10]; //è®¾ç½®ä»å“ªä¸ªä½ç½®å¼€å§‹ layer.lineDashPhase =5; å¦‚ä¸‹ï¼š äº”ã€CATextLayerCATextLayerå¯ä»¥è¿›è¡Œæ–‡æœ¬çš„ç»˜åˆ¶ï¼Œå±æ€§æ–¹æ³•å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930//æ¸²æŸ“çš„æ–‡å­—å­—ç¬¦ä¸²@property(nullable, copy) id string;//è®¾ç½®å­—ä½“@property(nullable) CFTypeRef font;//è®¾ç½®å­—å·@property CGFloat fontSize;//è®¾ç½®æ–‡å­—é¢œè‰²@property(nullable) CGColorRef foregroundColor;//æ˜¯å¦æ¢è¡Œ@property(getter=isWrapped) BOOL wrapped;/*è®¾ç½®æˆªæ–­æ¨¡å¼ NSString * const kCATruncationNone; æˆªæ–­å‰éƒ¨åˆ† NSString * const kCATruncationStart; æˆªæ–­åéƒ¨åˆ† NSString * const kCATruncationEnd; æˆªæ–­ä¸­é—´ NSString * const kCATruncationMiddle;*/@property(copy) NSString *truncationMode;/*è®¾ç½®æ–‡å­—å¯¹é½æ¨¡å¼ NSString * const kCAAlignmentNatural; NSString * const kCAAlignmentLeft; NSString * const kCAAlignmentRight; NSString * const kCAAlignmentCenter; NSString * const kCAAlignmentJustified;*/@property(copy) NSString *alignmentMode; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSå¼€å‘CoreAnimationè§£è¯»ä¹‹äºŒâ€”â€”å¯¹CALayerçš„åˆ†æ","slug":"156iOSå¼€å‘CoreAnimationè§£è¯»ä¹‹äºŒâ€”â€”å¯¹CALayerçš„åˆ†æ","date":"2015-11-25T16:00:00.000Z","updated":"2021-07-05T08:06:55.510Z","comments":true,"path":"2015/11/26/156iOSå¼€å‘CoreAnimationè§£è¯»ä¹‹äºŒâ€”â€”å¯¹CALayerçš„åˆ†æ/","link":"","permalink":"http://huishao.cc/2015/11/26/156iOSå¼€å‘CoreAnimationè§£è¯»ä¹‹äºŒâ€”â€”å¯¹CALayerçš„åˆ†æ/","excerpt":"","text":"iOSå¼€å‘CoreAnimationè§£è¯»ä¹‹äºŒâ€”â€”å¯¹CALayerçš„åˆ†æä¸€ã€UIViewä¸­çš„CALayerå±æ€§1.Layerä¸“é—¨è´Ÿè´£viewçš„è§†å›¾æ¸²æŸ“æ¯ä¸€ä¸ªUIViewçš„å¯¹è±¡ä¸­éƒ½æœ‰ä¸€ä¸ªlayerè¿™æ ·çš„å±æ€§ï¼Œå¹¶ä¸”layerä¼šè´Ÿè´£viewä¸­æœ‰å…³å›¾å½¢ç»˜åˆ¶çš„ç›¸å…³æ“ä½œï¼Œä¾‹å¦‚æˆ‘ä»¬è®¾ç½®viewçš„èƒŒæ™¯é¢œè‰²å’Œè®¾ç½®layerçš„èƒŒæ™¯é¢œè‰²éƒ½æ˜¯æœ‰æ•ˆçš„ï¼Œå¹¶ä¸”ï¼Œè®¾ç½®viewçš„èƒŒæ™¯è‰²ä¾ç„¶æ˜¯é€šè¿‡layeræ¥å±•ç¤ºçš„ï¼Œæˆ‘ä»¬å¯ä»¥å†™å¦‚ä¸‹çš„æµ‹è¯•ä»£ç ï¼š 1234567 UIView * view = [[UIView alloc]initWithFrame:CGRectMake(100, 100, 100, 100)]; view.backgroundColor = [UIColor redColor]; UIView * view2 = [[UIView alloc]initWithFrame:CGRectMake(100, 300, 100, 100)]; view2.layer.backgroundColor = view.layer.backgroundColor; [self.view addSubview:view]; [self.view addSubview:view2]; å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬è®¾ç½®viewçš„backgroundColorå±æ€§å…¶å®èµ·ä½œç”¨çš„ä¹Ÿæ˜¯layerçš„backgroundColorã€‚ 2.è‡ªå®šä¹‰viewé»˜è®¤layerå±æ€§çš„ç±»UIViewæ˜¯å¾ˆå¤šè§†å›¾ç±»çš„çˆ¶ç±»ï¼Œæ ¹æ®åŠŸèƒ½ä¸åŒï¼Œä¼šåˆ†å‡ºUIImageViewï¼ŒUIScrollerViewï¼ŒUITableViewç­‰ï¼ŒCALayerä¹Ÿç›¸ä¼¼ï¼Œå…¶ä¹Ÿå¯ä»¥æ ¹æ®åŠŸèƒ½åˆ†å‡ºè®¸å¤šå­ç±»ï¼Œè¿˜å¯ä»¥æ ¹æ®æˆ‘ä»¬çš„éœ€æ±‚è‡ªå®šä¹‰ä¸€ä¸ªLayerç±»ã€‚UIViewå…¶ä¸­çš„layeré»˜è®¤æ˜¯CALyerç±»ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡é‡å†™Viewä¸­çš„å¦‚ä¸‹æ–¹æ³•æ¥ä½¿å…¶åˆ›å»ºæˆ‘ä»¬éœ€è¦çš„layerç±»ï¼š 12+(Class)layerClass&#123;&#125; ä¾‹å¦‚æˆ‘ä»¬è‡ªå®šä¹‰ä¸€ä¸ªViewç±»ï¼Œåœ¨è‡ªå®šä¹‰ä¸€ä¸ªLayerç±»ï¼Œæ˜¯çš„è‡ªå®šä¹‰çš„Viewé»˜è®¤åˆ›å»ºçš„layeræ˜¯è‡ªå®šä¹‰çš„layerï¼š åœ¨MyViewä¸­é‡å†™ä¸Šè¿°æ–¹æ³•ï¼š 123+(Class)layerClass&#123; return [MyLayer class];&#125; åœ¨MyLayerä¸­è¿›è¡Œä¸€äº›è‡ªå®šä¹‰ï¼š 12345678- (instancetype)init&#123; self = [super init]; if (self) &#123; self.backgroundColor = [UIColor redColor].CGColor; &#125; return self;&#125; ä¹‹åæˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªMyViewçš„å¯¹è±¡æ—¶ï¼Œlayerå±‚çš„èƒŒæ™¯è‰²å°±æ˜¯çº¢è‰²çš„äº†ã€‚ äºŒã€å‡ ç§ç³»ç»Ÿçš„Layerç±»å‰è¾¹è¯´è¿‡ï¼Œå’ŒUIViewç›¸ä¼¼ï¼ŒCALayerä¹Ÿå¾ˆæ®åŠŸèƒ½è¡ç”Ÿå‡ºè®¸å¤šå­ç±»ï¼Œç³»ç»Ÿç³»ç»Ÿç»™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨çš„æœ‰å¦‚ä¸‹å‡ ç§ï¼š 1.CAEmitterLayerCoreAnimationæ¡†æ¶ä¸­çš„CAEmitterLayeræ˜¯ä¸€ä¸ªç²’å­å‘å°„å™¨ç³»ç»Ÿï¼Œè´Ÿè´£ç²’å­çš„åˆ›å»ºå’Œå‘å°„æºå±æ€§ã€‚é€šè¿‡å®ƒï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åˆ›å»ºå‡ºç‚«é…·çš„ç²’å­æ•ˆæœã€‚ 2.CAGradientLayerCAGradientLayerå¯ä»¥åˆ›å»ºå‡ºè‰²å½©æ¸å˜çš„å›¾å±‚æ•ˆæœï¼Œå¦‚ä¸‹ï¼š 3.CAEAGLLayerCAEAGLLayerå¯ä»¥é€šè¿‡OpenGL ESæ¥è¿›è¡Œç•Œé¢çš„ç»˜åˆ¶ã€‚ 4.CAReplicatorLayerCAReplicatorLayeræ˜¯ä¸€ä¸ªlayerå®¹å™¨ï¼Œä¼šå¯¹å…¶ä¸­çš„subLayerè¿›è¡Œå¤åˆ¶å’Œå±æ€§åç§»ï¼Œé€šè¿‡å®ƒï¼Œå¯ä»¥åˆ›å»ºå‡ºç±»ä¼¼å€’å½±çš„æ•ˆæœï¼Œä¹Ÿå¯ä»¥è¿›è¡Œå˜æ¢å¤åˆ¶ï¼Œå¦‚ä¸‹ï¼š 5.CAScrollLayerCAScrollLayerå¯ä»¥æ”¯æŒå…¶ä¸Šç®¡ç†çš„å¤šä¸ªå­å±‚è¿›è¡Œæ»‘åŠ¨ï¼Œä½†æ˜¯åªèƒ½é€šè¿‡ä»£ç è¿›è¡Œç®¡ç†ï¼Œä¸èƒ½è¿›è¡Œç”¨æˆ·ç‚¹æŒ‰è§¦å‘ã€‚ 6.CAShapeLayerCAShapeLayerå¯ä»¥è®©æˆ‘ä»¬åœ¨layerå±‚æ˜¯ç›´æ¥ç»˜åˆ¶å‡ºè‡ªå®šä¹‰çš„å½¢çŠ¶ã€‚ 7.CATextLayerCATextLayerå¯ä»¥é€šè¿‡å­—ç¬¦ä¸²è¿›è¡Œæ–‡å­—çš„ç»˜åˆ¶ã€‚ 8.CATiledLayerCATiledLayerç±»ä¼¼ç“¦ç‰‡è§†å›¾ï¼Œå¯ä»¥å°†ç»˜åˆ¶åˆ†åŒºåŸŸè¿›è¡Œï¼Œå¸¸ç”¨äºä¸€å¼ å¤§çš„å›¾ç‰‡çš„åˆ†ä¸åˆ†ç»˜åˆ¶ã€‚ 9.CATransformLayerCATransformLayerç”¨äºæ„å»ºä¸€äº›3Dæ•ˆæœçš„å›¾å±‚ã€‚ ä¸‰ã€è®¾ç½®ä¸è°ƒæ•´Layerå±‚çš„å†…å®¹è®¾ç½®å±‚çš„å†…å®¹æœ‰ä¸‹é¢ä¸‰ç§æ–¹å¼ï¼š 1.å¯ä»¥é€šè¿‡è®¾ç½®CGImageä¸ºlayerçš„å†…å®¹ã€‚ 2.å¯ä»¥é€šè¿‡ä»£ç†æ–¹æ³•æ¥åŠ¨æ€ä¿®æ”¹æˆ–è€…ç»˜åˆ¶å±‚çš„å†…å®¹ã€‚ 3.é€šè¿‡è‡ªå®šä¹‰CALayerå¯¹è±¡æ¥åˆ›å»ºå±‚çš„å†…å®¹ã€‚ å½“ä½ è®¾ç½®äº†Layerçš„å†…å®¹åï¼Œä¾‹å¦‚è®¾ç½®äº†ä¸€å¼ å›¾ç‰‡ï¼Œå†…å®¹çš„å°ºå¯¸ä¸ä¸€å®šä¼šåˆšå¥½å’Œlayerçš„å°ºå¯¸åˆé€‚ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å…¶ä½ç½®çš„è°ƒæ•´ï¼Œä½¿å…¶è¾¾åˆ°æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœï¼ŒcontentsGravityå±æ€§å†³å®šäº†å†…å®¹å¯¹é½ä¸å¡«å……æ–¹å¼ï¼Œå®ƒå¯ä»¥åˆ†ä¸ºä¸¤ä¸ªæ–¹é¢ï¼š 1.ä¸æ”¹å˜å†…å®¹çš„åŸå§‹å¤§å° è¿™ç§æ¨¡å¼ä¸­ä¸ä¼šæ”¹å˜å†…å®¹çš„åŸå§‹å¤§å°ï¼Œå¦‚æœå±‚çš„å°ºå¯¸å°äºå†…å®¹çš„å°ºå¯¸ï¼Œåˆ™å†…å®¹ä¼šè¢«åˆ‡å‰²ï¼Œå¦‚æœå±‚çš„å°ºå¯¸å¤§äºå†…å®¹çš„å°ºå¯¸ï¼Œå¤šå‡ºçš„éƒ¨åˆ†å°†ä¼šæ˜¾ç¤ºå±‚çš„èƒŒæ™¯é¢œè‰²ã€‚ä¸‹é¢çš„è¿™äº›è®¾ç½®æ–¹å¼ä¸ºè¿™ç§æ¨¡å¼ï¼š 123456789101112131415161718CA_EXTERN NSString * const kCAGravityCenter __OSX_AVAILABLE_STARTING (__MAC_10_5, __IPHONE_2_0);CA_EXTERN NSString * const kCAGravityTop __OSX_AVAILABLE_STARTING (__MAC_10_5, __IPHONE_2_0);CA_EXTERN NSString * const kCAGravityBottom __OSX_AVAILABLE_STARTING (__MAC_10_5, __IPHONE_2_0);CA_EXTERN NSString * const kCAGravityLeft __OSX_AVAILABLE_STARTING (__MAC_10_5, __IPHONE_2_0);CA_EXTERN NSString * const kCAGravityRight __OSX_AVAILABLE_STARTING (__MAC_10_5, __IPHONE_2_0);CA_EXTERN NSString * const kCAGravityTopLeft __OSX_AVAILABLE_STARTING (__MAC_10_5, __IPHONE_2_0);CA_EXTERN NSString * const kCAGravityTopRight __OSX_AVAILABLE_STARTING (__MAC_10_5, __IPHONE_2_0);CA_EXTERN NSString * const kCAGravityBottomLeft __OSX_AVAILABLE_STARTING (__MAC_10_5, __IPHONE_2_0);CA_EXTERN NSString * const kCAGravityBottomRight __OSX_AVAILABLE_STARTING (__MAC_10_5, __IPHONE_2_0); æ¯ä¸ªå‚æ•°å¯¹åº”çš„å¯¹å…¶æ¨¡å¼å¦‚ä¸‹å›¾ï¼š 2.æ”¹å˜å†…å®¹çš„å°ºå¯¸å¤§å° è¿™ç§æ¨¡å¼è®¾ç½®çš„å®é™…ä¸Šæ˜¯ä¸€ç§å¡«å……æ–¹å¼ï¼Œå‚æ•°å¦‚ä¸‹ï¼š 123456CA_EXTERN NSString * const kCAGravityResize __OSX_AVAILABLE_STARTING (__MAC_10_5, __IPHONE_2_0);CA_EXTERN NSString * const kCAGravityResizeAspect __OSX_AVAILABLE_STARTING (__MAC_10_5, __IPHONE_2_0);CA_EXTERN NSString * const kCAGravityResizeAspectFill __OSX_AVAILABLE_STARTING (__MAC_10_5, __IPHONE_2_0); å››ã€CALayerçš„æ¥å£åº”ç”¨æ€»ç»“1ã€åˆ›å»ºä¸åˆå§‹åŒ–layerç›¸å…³123456//é€šè¿‡ç±»æ–¹æ³•åˆ›å»ºå¹¶åˆå§‹åŒ–ä¸€ä¸ªlayer+ (instancetype)layer;//åˆå§‹åŒ–æ–¹æ³•- (instancetype)init;//é€šè¿‡ä¸€ä¸ªlayeråˆ›å»ºä¸€ä¸ªå‰¯æœ¬- (instancetype)initWithLayer:(id)layer; 2ã€æ¸²æŸ“å±‚layerä¸æ¨¡å‹å±‚layeråœ¨CALayerä¸­ï¼Œæœ‰å¦‚ä¸‹ä¸¤ä¸ªå±æ€§ï¼Œä»–ä»¬éƒ½è¿”å›ä¸€ä¸ªCALayerçš„å¯¹è±¡ï¼š 1234//æ¸²æŸ“å±‚layer- (nullable id)presentationLayer;//æ¨¡å‹å±‚layer- (id)modelLayer; å¯¹äºpresentationLayerï¼Œè¿™ä¸ªå±æ€§ä¸ä¸€å®šæ€»ä¼šè¿”å›ä¸€ä¸ªå®ä½“å¯¹è±¡ï¼Œåªæœ‰å½“è¿›è¡ŒåŠ¨ç”»æˆ–è€…å…¶ä»–æ¸²æŸ“çš„æ“ä½œæ—¶ï¼Œè¿™ä¸ªå±æ€§ä¼šè¿”å›ä¸€ä¸ªåœ¨å½“å‰å±å¹•ä¸Šçš„layerï¼Œä¸ä¸”æ¯ä¸€æ¬¡æ‰§è¡Œï¼Œè¿™ä¸ªå¯¹è±¡éƒ½ä¼šä¸åŒï¼Œå®ƒæ˜¯åŸlayerçš„ä¸€ä¸ªå‰¯æœ¬presentationLayerçš„modelLayerå°±æ˜¯å…¶å®ä½“layerå±‚ã€‚ å¯¹äºmodelLayerï¼Œå®ƒä¼šè¿”å›å½“å‰çš„å­˜å‚¨ä¿¡æ¯çš„Layerï¼Œä¹Ÿæ˜¯å½“å‰çš„layerå¯¹è±¡ï¼Œå§‹ç»ˆå”¯ä¸€ã€‚ 3.ä¸€äº›å±æ€§ä¸æ–¹æ³•1+ (nullable id)defaultValueForKey:(NSString *)key; ä¸Šé¢è¿™ä¸ªå±æ€§ç”¨äºè®¾ç½®layerä¸­é»˜è®¤å±æ€§çš„å€¼ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å­ç±»ä¸­é‡å†™è¿™ä¸ªæ–¹æ³•æ¥æ”¹å˜é»˜è®¤åˆ›å»ºçš„layerçš„ä¸€äº›å±æ€§ï¼Œä¾‹å¦‚å¦‚ä¸‹ä»£ç ï¼Œæˆ‘ä»¬åˆ›å»ºå‡ºæ¥çš„layerå°±é»˜è®¤æœ‰çº¢è‰²çš„èƒŒæ™¯é¢œè‰²ï¼š 123456+(id)defaultValueForKey:(NSString *)key&#123; if ([key isEqualToString:@&quot;backgroundColor&quot;]) &#123; return (id)[UIColor redColor].CGColor; &#125; return [super defaultValueForKey:key];&#125; 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869//è¿™ä¸ªæ–¹æ³•ä¹Ÿåªä½¿ç”¨åœ¨å­ç±»ä¸­é‡å†™ï¼Œç”¨äºè®¾ç½®åœ¨æŸäº›å±æ€§æ”¹å˜æ—¶æ˜¯å¦è¿›è¡Œlayeré‡ç»˜+ (BOOL)needsDisplayForKey:(NSString *)key;//å­ç±»é‡å†™è¿™ä¸ªæ–¹æ³•è®¾ç½®å±æ€§æ˜¯å¦å¯ä»¥è¢«å½’æ¡£- (BOOL)shouldArchiveValueForKey:(NSString *)key;/*********************************************///è®¾ç½®layerå°ºå¯¸@property CGRect bounds;//è®¾ç½®layerä½ç½®@property CGPoint position;//è®¾ç½®å…¶åœ¨çˆ¶layerä¸­çš„å±‚æ¬¡ï¼Œé»˜è®¤ä¸º0ï¼Œè¿™ä¸ªå€¼è¶Šå¤§ï¼Œå±‚æ¬¡è¶Šé ä¸Š@property CGFloat zPosition;//é”šç‚¹@property CGPoint anchorPoint;//åœ¨Zè½´ä¸Šçš„é”šç‚¹ä½ç½® 3Då˜æ¢æ—¶ä¼šæœ‰å¾ˆå¤§å½±å“@property CGFloat anchorPointZ;//è¿›è¡Œ3Då˜æ¢@property CATransform3D transform;//è·å–å’Œè®¾ç½®CGAffineTransformå˜æ¢- (CGAffineTransform)affineTransform;- (void)setAffineTransform:(CGAffineTransform)m;//è®¾ç½®layerçš„frame@property CGRect frame;//è®¾ç½®æ˜¯å¦éšè—@property(getter=isHidden) BOOL hidden;//æ¯ä¸ªlayerå±‚æœ‰ä¸¤é¢ï¼Œè¿™ä¸ªå±æ€§ç¡®å®šæ˜¯å¦ä¸¤é¢éƒ½æ˜¾ç¤º@property(getter=isDoubleSided) BOOL doubleSided;//æ˜¯å¦è¿›è¡Œyè½´çš„æ–¹å‘ç¿»è½¬@property(getter=isGeometryFlipped) BOOL geometryFlipped;//è·å–å½“å‰layerå†…å®¹yè½´æ–¹å‘æ˜¯å¦è¢«ç¿»è½¬äº†- (BOOL)contentsAreFlipped;//çˆ¶layerè§†å›¾@property(nullable, readonly) CALayer *superlayer;//ä»å…¶çˆ¶layerå±‚ä¸Šç§»é™¤- (void)removeFromSuperlayer;//æ‰€æœ‰å­layeræ•°ç»„@property(nullable, copy) NSArray&lt;CALayer *&gt; *sublayers;//æ·»åŠ ä¸€ä¸ªå­—layer- (void)addSublayer:(CALayer *)layer;//æ’å…¥ä¸€ä¸ªå­layer- (void)insertSublayer:(CALayer *)layer atIndex:(unsigned)idx;//å°†ä¸€ä¸ªå­layeræ’å…¥åˆ°æœ€ä¸‹é¢- (void)insertSublayer:(CALayer *)layer below:(nullable CALayer *)sibling;//å°†ä¸€ä¸ªå­layeræ’å…¥åˆ°æœ€ä¸Šé¢- (void)insertSublayer:(CALayer *)layer above:(nullable CALayer *)sibling;//æ›¿æ¢ä¸€ä¸ªå­layer- (void)replaceSublayer:(CALayer *)layer with:(CALayer *)layer2;//å¯¹å…¶å­layerè¿›è¡Œ3Då˜æ¢@property CATransform3D sublayerTransform;//é®ç½©å±‚layer@property(nullable, strong) CALayer *mask;//èˆå¦è¿›è¡Œboundsçš„åˆ‡å‰²ï¼Œåœ¨è®¾ç½®åœ†è§’å±æ€§æ—¶ä¼šè®¾ç½®ä¸ºYES@property BOOL masksToBounds;//ä¸‹é¢è¿™äº›æ–¹æ³•ç”¨äºåæ ‡è½¬æ¢- (CGPoint)convertPoint:(CGPoint)p fromLayer:(nullable CALayer *)l;- (CGPoint)convertPoint:(CGPoint)p toLayer:(nullable CALayer *)l;- (CGRect)convertRect:(CGRect)r fromLayer:(nullable CALayer *)l;- (CGRect)convertRect:(CGRect)r toLayer:(nullable CALayer *)l;//è¿”å›åŒ…å«æŸä¸€ç‚¹çš„æœ€ä¸Šå±‚çš„å­layer- (nullable CALayer *)hitTest:(CGPoint)p;//è¿”å›layerçš„boundså†…æ˜¯å¦åŒ…å«æŸä¸€ç‚¹- (BOOL)containsPoint:(CGPoint)p;//è®¾ç½®layerçš„å†…å®¹ï¼Œä¸€èˆ¬ä¼šè®¾ç½®ä¸ºCGImageçš„å¯¹è±¡@property(nullable, strong) id contents;//è·å–å†…å®¹çš„rectå°ºå¯¸@property CGRect contentsRect;//è®¾ç½®å†…å®¹çš„å¡«å……å’Œå¯¹å…¶æ–¹å¼ï¼Œå…·ä½“ä¸Šé¢æœ‰è¯´@property(copy) NSString *contentsGravity;//è®¾ç½®å†…å®¹çš„ç¼©æ”¾@property CGFloat contentsScale; ä¸‹é¢è¿™ä¸ªå±æ€§å’Œå†…å®¹æ‹‰ä¼¸ç›¸å…³ï¼š 1@property CGRect contentsCenter; è¿™ä¸ªå±æ€§ç¡®å®šä¸€ä¸ªçŸ©å½¢åŒºåŸŸï¼Œå½“å†…å®¹è¿›è¡Œæ‹‰ä¼¸æˆ–è€…ç¼©æ”¾çš„æ—¶å€™ï¼Œè¿™ä¸€éƒ¨åˆ†çš„åŒºåŸŸæ˜¯ä¼šè¢«å½¢å˜çš„ï¼Œä¾‹å¦‚é»˜è®¤è®¾ç½®ä¸º(0,0,1,1)ï¼Œåˆ™æ•´ä¸ªå†…å®¹åŒºåŸŸéƒ½ä¼šå‚ä¸å½¢å˜ã€‚å¦‚æœæˆ‘ä»¬è®¾ç½®ä¸º(0.25,0.25,0.5,0.5),é‚£ä¹ˆåªæœ‰ä¸­é—´0.5*0.5æ¯”ä¾‹å®½é«˜çš„åŒºåŸŸä¼šè¢«æ‹‰ä¼¸ï¼Œå››å‘¨éƒ½ä¸ä¼šã€‚ ä¸‹é¢è¿™ä¸¤ä¸ªå±æ€§ç”¨æ¥è®¾ç½®ç¼©æ”¾æˆ–æ‹‰ä¼¸çš„æ¨¡å¼ï¼š 12345678910111213//è®¾ç½®ç¼©å°çš„æ¨¡å¼@property(copy) NSString *minificationFilter;//è®¾ç½®æ”¾å¤§çš„æ¨¡å¼@property(copy) NSString *magnificationFilter;//ç¼©æ”¾å› å­@property float minificationFilterBias;//æ¨¡å¼å‚æ•°å¦‚ä¸‹//ä¸´è¿‘æ’å€¼NSString * const kCAFilterNearest;//çº¿æ€§æ‹‰ä¼¸NSString * const kCAFilterLinear;//ç“¦ç‰‡å¤åˆ¶æ‹‰ä¼¸NSString * const kCAFilterTrilinear; 1234567891011121314151617//è®¾ç½®å†…å®¹æ˜¯å¦å®Œå…¨ä¸é€æ˜@property(getter=isOpaque) BOOL opaque;//é‡æ–°åŠ è½½ç»˜åˆ¶å†…å®¹- (void)display;//è®¾ç½®å†…å®¹ä¸ºéœ€è¦é‡æ–°ç»˜åˆ¶- (void)setNeedsDisplay;//è®¾ç½®æŸä¸€åŒºåŸŸå†…å®¹éœ€è¦é‡æ–°ç»˜åˆ¶- (void)setNeedsDisplayInRect:(CGRect)r;//è·å–æ˜¯å¦éœ€è¦é‡æ–°ç»˜åˆ¶- (BOOL)needsDisplay;//å¦‚æœéœ€è¦ï¼Œè¿›è¡Œå†…å®¹é‡ç»˜- (void)displayIfNeeded;//è¿™ä¸ªå±æ€§è®¾ç½®ä¸ºYESï¼Œå½“å†…å®¹æ”¹å˜æ—¶ä¼šè‡ªåŠ¨è°ƒç”¨- (void)setNeedsDisplayå‡½æ•°@property BOOL needsDisplayOnBoundsChange;//ç»˜åˆ¶ä¸è¯»å–å†…å®¹- (void)drawInContext:(CGContextRef)ctx;- (void)renderInContext:(CGContextRef)ctx; 1234567891011121314151617181920//è®¾ç½®èƒŒæ™¯é¢œè‰²@property(nullable) CGColorRef backgroundColor;//è®¾ç½®åœ†è§’åŠå¾„@property CGFloat cornerRadius;//è®¾ç½®è¾¹æ¡†å®½åº¦@property CGFloat borderWidth;//è®¾ç½®è¾¹æ¡†é¢œè‰²@property(nullable) CGColorRef borderColor;//è®¾ç½®é€æ˜åº¦@property float opacity;//è®¾ç½®é˜´å½±é¢œè‰²@property(nullable) CGColorRef shadowColor;//è®¾ç½®é˜´å½±é€æ˜åº¦@property float shadowOpacity;//è®¾ç½®é˜´å½±åç§»é‡@property CGSize shadowOffset;//è®¾ç½®é˜´å½±åœ†è§’åŠå¾„@property CGFloat shadowRadius;//è®¾ç½®é˜´å½±è·¯å¾„@property(nullable) CGPathRef shadowPath; 12345678910//æ·»åŠ ä¸€ä¸ªåŠ¨ç”»å¯¹è±¡ keyå€¼èµ·åˆ°idçš„ä½œç”¨ï¼Œé€šè¿‡keyå€¼ï¼Œå¯ä»¥å–åˆ°è¿™ä¸ªåŠ¨ç”»å¯¹è±¡- (void)addAnimation:(CAAnimation *)anim forKey:(nullable NSString *)key;//ç§»é™¤æ‰€æœ‰åŠ¨ç”»å¯¹è±¡- (void)removeAllAnimations;//ç§»é™¤æŸä¸ªåŠ¨ç”»å¯¹è±¡- (void)removeAnimationForKey:(NSString *)key;//è·å–æ‰€æœ‰åŠ¨ç”»å¯¹è±¡çš„keyå€¼- (nullable NSArray&lt;NSString *&gt; *)animationKeys;//é€šè¿‡keyå€¼è·å–åŠ¨ç”»å¯¹è±¡- (nullable CAAnimation *)animationForKey:(NSString *)key; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSå¼€å‘CoreAnimationè§£è¯»ä¹‹ä¸€â€”â€”åˆè¯†CoreAnimationæ ¸å¿ƒåŠ¨ç”»ç¼–ç¨‹","slug":"155iOSå¼€å‘CoreAnimationè§£è¯»ä¹‹ä¸€â€”â€”åˆè¯†CoreAnimationæ ¸å¿ƒåŠ¨ç”»ç¼–ç¨‹","date":"2015-11-24T16:00:00.000Z","updated":"2021-07-05T08:05:08.423Z","comments":true,"path":"2015/11/25/155iOSå¼€å‘CoreAnimationè§£è¯»ä¹‹ä¸€â€”â€”åˆè¯†CoreAnimationæ ¸å¿ƒåŠ¨ç”»ç¼–ç¨‹/","link":"","permalink":"http://huishao.cc/2015/11/25/155iOSå¼€å‘CoreAnimationè§£è¯»ä¹‹ä¸€â€”â€”åˆè¯†CoreAnimationæ ¸å¿ƒåŠ¨ç”»ç¼–ç¨‹/","excerpt":"","text":"iOSå¼€å‘CoreAnimationè§£è¯»ä¹‹ä¸€â€”â€”åˆè¯†CoreAnimationæ ¸å¿ƒåŠ¨ç”»ç¼–ç¨‹ä¸€ã€å¼•è¨€ä¼—æ‰€å‘¨çŸ¥ï¼Œç»šä¸½åŠ¨ç”»æ•ˆæœæ˜¯iOSç³»ç»Ÿçš„ä¸€å¤§ç‰¹ç‚¹ï¼Œé€šè¿‡UIViewå±‚å°è£…çš„åŠ¨ç”»ï¼ŒåŸºæœ¬å·²ç»å¯ä»¥æ»¡è¶³æˆ‘ä»¬åº”ç”¨å¼€å‘çš„æ‰€æœ‰éœ€æ±‚ï¼Œä½†è‹¥éœ€è¦æ›´åŠ è‡ªç”±çš„æ§åˆ¶åŠ¨ç”»çš„å±•ç¤ºï¼Œæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨CoreAnimationæ¡†æ¶ä¸­çš„ä¸€äº›ç±»ä¸æ–¹æ³•ã€‚è¿™é‡Œå…ˆé™„ä¸Šå‰å‡ ç¯‡ä¸åŠ¨ç”»ç›¸å…³çš„åšå®¢åœ°å€ï¼Œè¿™ä¸€ç³»åˆ—ï¼Œæˆ‘ä»¬æŠ½å‡ºå…¶ä¸­çš„CoreAnimationæ¡†æ¶æ¥è¯¦ç»†è§£è¯»ã€‚ UIViewAnimationåŠ¨ç”»çš„ä½¿ç”¨ï¼šhttp://my.oschina.net/u/2340880/blog/484457 UIViewåŠ¨ç”»æ‰§è¡Œçš„å¦ä¸€ç§æ–¹å¼ï¼šhttp://my.oschina.net/u/2340880/blog/484538 UIViewè½¬åœºåŠ¨ç”»ï¼šhttp://my.oschina.net/u/2340880/blog/484669 CoreAnimationéšå¼åŠ¨ç”»çš„åº”ç”¨ï¼šhttp://my.oschina.net/u/2340880/blog/484793 ç²’å­æ•ˆæœçš„ä½¿ç”¨ï¼šhttp://my.oschina.net/u/2340880/blog/485095 äºŒã€åˆè¯†CoreAnimationCoreAnimationæ¡†æ¶æ˜¯åŸºäºOpenGLä¸CoreGraphicså›¾åƒå¤„ç†æ¡†æ¶çš„ä¸€ä¸ªè·¨å¹³å°çš„åŠ¨ç”»æ¡†æ¶ã€‚ç®€å•æ¥è¯´ï¼Œå®ƒä½¿å¸®åŠ©æˆ‘ä»¬å°†å›¾åƒè¯»å–æˆä½å›¾ï¼Œé€šè¿‡ç¡¬ä»¶çš„å¤„ç†ï¼Œå®ç°åŠ¨ç”»æ•ˆæœã€‚æ–‡æ¡£ä¸­çš„ä¸€å¼ å›¾ç‰‡ååˆ†å½¢è±¡çš„æè¿°äº†CoreAnimationä¸UIKitæ¡†æ¶çš„å…³ç³»ï¼š åœ¨CoreAnimationä¸­ï¼Œå¤§éƒ¨åˆ†çš„åŠ¨ç”»æ•ˆæœéƒ½æ˜¯é€šè¿‡Layerå±‚æ¥å®ç°çš„ï¼Œé€šè¿‡CALayerï¼Œæˆ‘ä»¬å¯ä»¥ç»„ç»‡å¤æ‚çš„å±‚çº§ç»“æ„ã€‚ åœ¨CoreAnimationä¸­ï¼Œå¤§å¤šæ•°çš„åŠ¨ç”»æ•ˆæœæ˜¯æ·»åŠ åœ¨å›¾å±‚å±æ€§çš„å˜åŒ–ä¸Šï¼Œä¾‹å¦‚ï¼Œæ”¹å˜å›¾å±‚çš„ä½ç½®ï¼Œå¤§å°ï¼Œé¢œè‰²ï¼Œåœ†è§’åŠå¾„ç­‰ã€‚Layerå±‚å¹¶ä¸å†³å®šè§†å›¾çš„å±•ç°ï¼Œå®ƒåªæ˜¯å­˜å‚¨äº†è§†å›¾çš„å‡ ä½•å±æ€§çŠ¶æ€ã€‚ ä¸‰ã€é”šç‚¹å¯¹å‡ ä½•å±æ€§çš„å½±å“å…³äºLayerå±‚ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£ä¸€ä¸ªæœ‰å…³é”šç‚¹çš„æ¦‚å¿µï¼Œé”šç‚¹å†³å®šäº†å›¾å±‚çš„ç»˜åˆ¶ä½ç½®ä»¥åŠåŠ¨ç”»å±•ç¤ºæ—¶å…¶å‚ç…§çš„ç‚¹ï¼Œé”šç‚¹çš„å–å€¼èŒƒå›´ä¸º0-1ï¼Œé”šç‚¹æœ‰ä¸¤ä¸ªåœ°æ–¹åœ¨åº”ç”¨ä¸­ä¼šæœ‰å¾ˆå¤§å½±å“ï¼š 1.layerå±‚çš„positionå‚ç…§ç‚¹å§‹ç»ˆå’Œé”šç‚¹é‡åˆ é€šè¿‡positionå†³å®šäº†layeræ‰€åœ¨çš„ä½ç½®ï¼Œåœ¨Layerä¸­ï¼Œè™½ç„¶ä¹Ÿæœ‰frameè¿™æ ·çš„å±æ€§ï¼Œä½†æˆ‘ä»¬å¾ˆå°‘ä½¿ç”¨ï¼Œä¸€èˆ¬æˆ‘ä»¬ä¼šä½¿ç”¨boundså’Œpositionç¡®å®šLayerå±‚çš„å¤§å°å’Œä½ç½®ã€‚ 2.é”šç‚¹å†³å®šè¿›è¡ŒåŠ¨ä½œçš„å‚ç…§ç‚¹ ä¾‹å¦‚ä¸€ä¸ªæ—‹è½¬åŠ¨ä½œï¼Œé”šç‚¹å†³å®šäº†å±‚æ—‹è½¬çš„ä¸­å¿ƒç‚¹ï¼Œå¯¹äºæ”¾å¤§ç¼©å°çš„åŠ¨ä½œï¼Œé”šç‚¹å†³å®šäº†æ”¾å¤§æˆ–è€…ç¼©å°å‚ç…§çš„ä¸­å¿ƒç‚¹ã€‚ å¯ä»¥æ¥çœ‹ä¸‹è¾¹ä¸€ç»„å›¾ï¼š ä¸Šé¢ä¸¤ä¸ªçŸ©å½¢ï¼Œframeå’Œboundséƒ½æ˜¯ä¸€æ ·çš„ï¼Œç¬¬ä¸€ä¸ªçŸ©å½¢çš„é”šç‚¹ä½ç½®ä¸º(0.5,0.5)ï¼Œç¬¬äºŒä¸ªä¸º(0,0), å› æ­¤ï¼Œä¸¤ä¸ªçŸ©å½¢çš„positionç‚¹æ˜¯ä¸åŒçš„ï¼Œç¬¬ä¸€ä¸ªæ˜¯(100,100),ç¬¬äºŒä¸ªæ˜¯(40,60)ã€‚å†çœ‹å½“äº§ç”ŸåŠ¨ä½œæ—¶é”šç‚¹çš„å½±å“ï¼š ç°åœ¨å°±å¾ˆå¥½ç†è§£äº†ï¼Œé”šç‚¹çš„ä¸åŒç›´æ¥å½±å“äº†åŠ¨ä½œäº§ç”Ÿçš„å‚ç…§ç‚¹ã€‚ é€šè¿‡CALayerçš„å¦‚ä¸‹å±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®é”šç‚¹ï¼Œæ³¨æ„xï¼Œyçš„å–å€¼èŒƒå›´éƒ½æ˜¯0~1ï¼Œä»£è¡¨æ‰€å å®½åº¦å’Œé«˜åº¦çš„æ¯”ä¾‹ï¼š 1@property CGPoint anchorPoint; å››ã€Layerä¸Viewä¹‹é—´çš„å…³ç³»Layeræ˜¯ä¸“é—¨ç”¨äºè¾…åŠ©æˆ‘ä»¬ç»˜åˆ¶å›¾åƒçš„å±‚ï¼Œå®ƒä½¿æ”¯æŒä¸‰ç»´åæ ‡ç³»çš„ç»˜åˆ¶çš„ï¼Œé€šè¿‡æ¯ä¸ªåæ ‡ç‚¹ä¸è½¬æ¢çŸ©é˜µçš„è¿ç®—ï¼Œæ¥å†³å®šæœ€åç»˜åˆ¶çš„çŠ¶æ€ï¼Œå¹¶ä¸”ï¼ŒLayerå¯ä»¥æ›´é«˜å¸§ç‡çš„ç»˜åˆ¶åŠ¨ç”»æ•ˆæœã€‚ç„¶è€ŒLayerä¸Viewä¾ç„¶æœ‰å¾ˆå¤§ä¸åŒï¼Œé¦–å…ˆï¼Œæˆ‘ä»¬ä¸å¯èƒ½åªé€šè¿‡Layeræ¥å¼€å‘åº”ç”¨ç¨‹åºï¼ŒLayerå¹¶æ²¡æœ‰æ¥æ”¶äº‹ä»¶å’Œå¤„ç†ç”¨æˆ·äº¤äº’çš„èƒ½åŠ›ï¼Œè¿™äº›ä¾ç„¶éœ€è¦Viewæ¥å®Œæˆï¼Œæ¯ä¸€ä¸ªViewä¸­ï¼Œéƒ½æœ‰ä¸€ä¸ªLayerçš„å±æ€§æ¥è¾…åŠ©è¿›è¡Œå›¾å½¢çš„ç»˜åˆ¶ã€‚å¹¶ä¸”Layeræ˜¯å¯ä»¥å±‚çº§åµŒå¥—çš„ï¼Œå¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€æ±‚çµæ´»é€‰æ‹©ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOS9æ–°ç‰¹æ€§â€”â€”å †å è§†å›¾UIStackView","slug":"154iOS9æ–°ç‰¹æ€§â€”â€”å †å è§†å›¾UIStackView","date":"2015-11-16T16:00:00.000Z","updated":"2021-07-05T08:03:07.184Z","comments":true,"path":"2015/11/17/154iOS9æ–°ç‰¹æ€§â€”â€”å †å è§†å›¾UIStackView/","link":"","permalink":"http://huishao.cc/2015/11/17/154iOS9æ–°ç‰¹æ€§â€”â€”å †å è§†å›¾UIStackView/","excerpt":"","text":"iOS9æ–°ç‰¹æ€§â€”â€”å †å è§†å›¾UIStackViewä¸€ã€å¼•è¨€éšç€autolayoutçš„æ¨å¹¿å¼€æ¥ï¼Œæ›´å¤šçš„appå¼€å§‹ä½¿ç”¨è‡ªåŠ¨å¸ƒå±€çš„æ–¹å¼æ¥æ„å»ºè‡ªå·±çš„UIç³»ç»Ÿï¼Œautolayouté…åˆstoryBoardå’Œä¸€äº›ç¬¬ä¸‰æ–¹çš„æ¡†æ¶ï¼Œå¯¹äºåˆ›å»ºçº¦æŸæ¥è¯´ï¼Œå·²ç»ååˆ†æ–¹ä¾¿ï¼Œä½†æ˜¯å¯¹äºä¸€äº›åŠ¨æ€çš„çº¿æ€§å¸ƒå±€çš„è§†å›¾ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨æ·»åŠ çš„çº¦æŸä¸ä»…éå¸¸å¤šï¼Œè€Œä¸”å¦‚æœæˆ‘ä»¬éœ€è¦æ’å…¥æˆ–è€…ç§»é™¤å…¶ä¸­çš„ä¸€äº›UIå…ƒç´ çš„æ—¶å€™ï¼Œæˆ‘ä»¬åˆè¦åšå¤§é‡çš„ä¿®æ”¹çº¦æŸçš„å·¥ä½œï¼ŒUIStackViewæ­£å¥½å¯ä»¥è§£å†³è¿™æ ·çš„é—®é¢˜ã€‚ äºŒã€åœ¨storyBoardä¸Šåˆè¯†StackViewUIStackViewæ˜¯ä¸€ä¸ªç®¡ç†ä¸€ç»„å †å è§†å›¾çš„æ§åˆ¶å™¨ç±»è§†å›¾ï¼Œæ‰€è°“å †å è§†å›¾æ—¶ä¸€ç§å¹³é“ºå¼çš„çº¿æ€§å¸ƒå±€æ–¹å¼ï¼Œä¸å¯é‡å ï¼Œå¸ƒå±€æ–¹å‘ä¹Ÿä¸å¯äº¤é”™ï¼Œå¦‚æœä½ åšè¿‡watchOSçš„å¼€å‘ï¼Œä½ ä¼šå‘ç°ï¼Œå…¶å®StackViewä¸watchOSä¸­çš„groupååˆ†èƒ½ç›¸ä¼¼ã€‚ ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¦‚æœéœ€è¦ä¸€ä¸ªå¦‚ä¸‹æ•ˆæœçš„å¸ƒå±€ï¼Œåœ¨å±å¹•çš„ä¸­é—´æ‘†æ”¾å‡ ä¸ªå¤§å°ä¸€è‡´çš„è‰²å—ï¼Œæ— è®ºå±å¹•æœå‘å¦‚ä½•ï¼Œå…¶ä½ç½®éƒ½ä¸ä¼šå˜åŒ–ï¼Œå¹¶ä¸”å¯ä»¥å‘å…¶ä¸­æ·»åŠ å’Œç§»é™¤è‰²å—çš„æ•°é‡ï¼š é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨ViewControllerä¸­æ‹‰å…¥ä¸€ä¸ªstackViewï¼š å°†ä¸€äº›å±æ€§è®¾ç½®å¦‚ä¸‹ï¼š Axisæ˜¯è®¾ç½®å¸ƒå±€çš„æ–¹å‘ï¼Œæœ‰æ°´å¹³å’Œå‚ç›´ä¸¤ç§æ–¹å¼ï¼Œä¸€ä¸ªStackViewåªèƒ½é€‰æ‹©ä¸€ç§å¸ƒå±€æ¨¡å¼ã€‚ Alignmentæ˜¯é€‰æ‹©å…¶ç®¡ç†è§†å›¾çš„å¯¹é½æ¨¡å¼ï¼Œæˆ‘ä»¬è¿™é‡Œé€‰æ‹©å……æ»¡ã€‚ Distributionæ˜¯è®¾ç½®å…¶ç®¡ç†è§†å›¾çš„æ’åˆ—æ–¹å¼ï¼Œæˆ‘ä»¬é€‰æ‹©ç­‰å®½å……æ»¡ã€‚ Spacingæ˜¯è®¾ç½®è§†å›¾ä¹‹é—´çš„é—´è·ï¼Œè®¾ç½®ä¸º10. ä¹‹åæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼ŒstackViewç”¨äºå¸ƒå±€å…¶å†…éƒ¨ç®¡ç†çš„è§†å›¾ï¼Œå¯¹äºå®ƒæœ¬èº«ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ·»åŠ ä¸€äº›çº¦æŸï¼Œå°†å®ƒçº¦æŸåœ¨å±å¹•çš„ä¸­é—´ã€‚ æˆ‘ä»¬å‘å…¶ä¸­æ‹–å…¥ä»»æ„æ•°é‡çš„viewï¼Œè®¾ç½®ä¸åŒçš„é¢œè‰²ï¼Œå°±å®ç°äº†æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœï¼Œå¹¶ä¸”å¯ä»¥éšæ„åŠ¨æ€åˆ é™¤å’Œæ·»åŠ å…¶ä¸­çš„viewæ•°é‡ï¼Œä¸éœ€è¦æ”¹å˜çº¦æŸã€‚ ä¸‰ã€ä»ä»£ç å­¦ä¹ UIStackViewé€šè¿‡ä»£ç åˆ›å»ºä¸€ä¸ªUIStackViewä¹Ÿéå¸¸ç®€å•ï¼Œé¦–å…ˆï¼Œæˆ‘ä»¬å…ˆé€šè¿‡ä»£ç å®ç°ä¸Šé¢çš„æ•ˆæœï¼š 123456789101112131415161718 NSMutableArray * array = [[NSMutableArray alloc]init]; for (int i =0 ; i&lt;5; i++) &#123; UIView * view = [[UIView alloc]init]; view.backgroundColor = [UIColor colorWithRed:arc4random()%255/255.0 green:arc4random()%255/255.0 blue:arc4random()%255/255.0 alpha:1]; [array addObject:view]; &#125; UIStackView * stackView = [[UIStackView alloc]initWithArrangedSubviews:array]; [self.view addSubview:stackView]; [stackView mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.centerX.equalTo(self.view.mas_centerX); make.centerY.equalTo(self.view.mas_centerY); make.leading.equalTo(self.view.mas_leading).offset(20); make.trailing.equalTo(self.view.mas_trailing).offset(-20); make.size.height.equalTo(@100); &#125;]; stackView.axis = UILayoutConstraintAxisHorizontal; stackView.distribution = UIStackViewDistributionFillEqually; stackView.alignment = UIStackViewAlignmentFill; æ•ˆæœå›¾å¦‚ä¸‹ï¼š æˆ‘ä»¬çš„å¸ƒå±€æ²¡æœ‰é—®é¢˜ï¼Œå¹¶ä¸”å¯ä»¥åŠ¨æ€çš„æ”¹å˜å…¶ä¸­viewçš„ä¸ªæ•°ï¼Œä½¿ç”¨å¦‚ä¸‹æ–¹æ³•æ·»åŠ ä¸€ä¸ªviewï¼š 123 UIView * newView = [[UIView alloc]init]; newView.backgroundColor = [UIColor colorWithRed:arc4random()%255/255.0 green:arc4random()%255/255.0 blue:arc4random()%255/255.0 alpha:1]; [stackView addArrangedSubview:newView]; ä¸ä¹‹ç›¸å¯¹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•ç§»é™¤ä¸€ä¸ªviewï¼š 12 UIView * view = [stackView arrangedSubviews].lastObject; [stackView removeArrangedSubview:view]; ç‰¹åˆ«æ³¨æ„ï¼šaddArrangedSubviewå’ŒaddSubviewæœ‰å¾ˆå¤§çš„åŒºåˆ«ï¼Œä½¿ç”¨å‰è€…æ˜¯å°†è¯•å›¾æ·»åŠ è¿›StackViewçš„å¸ƒå±€ç®¡ç†ï¼Œåè€…åªæ˜¯ç®€å•çš„åŠ åœ¨è¯•å›¾çš„å±‚çº§ä¸Šï¼Œå¹¶ä¸æ¥å—StackViewçš„å¸ƒå±€ç®¡ç†ã€‚ æŠ€å·§ï¼šå› ä¸ºStackViewç»§æ‰¿äºUIViewï¼Œå› æ­¤åœ¨å¸ƒå±€æ”¹å˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨UIViewå±‚çš„åŠ¨ç”»ï¼Œå¦‚ä¸‹ï¼š 12345 //åœ¨æ·»åŠ viewçš„æ—¶å€™ä¼šæœ‰åŠ¨ç”»æ•ˆæœï¼Œç§»é™¤çš„æ—¶å€™æ²¡æœ‰ [stackView addArrangedSubview:newView]; [UIView animateWithDuration:1 animations:^&#123; [stackView layoutIfNeeded]; &#125;]; å››ã€å†æ¥æ·±å…¥ç†è§£ä¸‹UIStackViewé€šè¿‡ä¸Šé¢çš„ä»‹ç»ï¼Œæˆ‘ä»¬å·²ç»åŸºæœ¬äº†è§£äº†StackViewçš„ä½¿ç”¨å’Œç‰¹ç‚¹ï¼Œä¸‹é¢æˆ‘ä»¬å†æ¥ä»”ç»†ä»‹ç»ä¸€ä¸‹ä¸å…¶ç›¸å…³çš„å±æ€§å’Œæ–¹æ³•çš„ä½¿ç”¨ï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿæ›´åŠ å¾—å¿ƒåº”æ‰‹ã€‚ æœ‰å…³è¢«ç®¡ç†è§†å›¾çš„æ·»åŠ ä¸ç§»é™¤ï¼š 12345678910//åˆå§‹åŒ–æ–¹æ³•ï¼Œé€šè¿‡æ•°ç»„ä¼ å…¥è¢«ç®¡ç†çš„è§†å›¾- (instancetype)initWithArrangedSubviews:(NSArray&lt;__kindof UIView *&gt; *)views; //è·å–è¢«ç®¡ç†çš„æ‰€æœ‰è§†å›¾@property(nonatomic,readonly,copy) NSArray&lt;__kindof UIView *&gt; *arrangedSubviews;//æ·»åŠ ä¸€ä¸ªè§†å›¾è¿›è¡Œç®¡ç†- (void)addArrangedSubview:(UIView *)view;//ç§»é™¤ä¸€ä¸ªè¢«ç®¡ç†çš„è§†å›¾- (void)removeArrangedSubview:(UIView *)view;//åœ¨æŒ‡å®šä½ç½®æ’å…¥ä¸€ä¸ªè¢«ç®¡ç†çš„è§†å›¾- (void)insertArrangedSubview:(UIView *)view atIndex:(NSUInteger)stackIndex; ä¸StackViewå¸ƒå±€è®¾ç½®ç›¸å…³ï¼š 1.å¸ƒå±€æ¨¡å¼ï¼š 1@property(nonatomic) UILayoutConstraintAxis axis; ä¸Šé¢è¿™ä¸ªå±æ€§ç”¨äºè®¾ç½®å¸ƒå±€çš„æ¨¡å‹ï¼Œæšä¸¾å¦‚ä¸‹ï¼š 1234567//stackViewåªæœ‰ä¸¤ç§å¸ƒå±€æ¨¡å¼ æ°´å¹³å’Œç«–ç›´typedef NS_ENUM(NSInteger, UILayoutConstraintAxis) &#123; //æ°´å¹³å¸ƒå±€ UILayoutConstraintAxisHorizontal = 0, //ç«–ç›´å¸ƒå±€ UILayoutConstraintAxisVertical = 1&#125;; 2.å¯¹é½æ¨¡å¼ï¼š 1@property(nonatomic) UIStackViewAlignment alignment; è¿™ä¸ªå±æ€§ç”¨äºè®¾ç½®æ§ä»¶çš„å¯¹å…¶æ¨¡å¼ï¼Œæšä¸¾å¦‚ä¸‹ï¼š 123456789101112131415161718typedef NS_ENUM(NSInteger, UIStackViewAlignment) &#123; //æ°´å¹³å¸ƒå±€æ—¶ä¸ºé«˜åº¦å……æ»¡ï¼Œç«–ç›´å¸ƒå±€æ—¶ä¸ºå®½åº¦å……æ»¡ UIStackViewAlignmentFill, //å‰è¾¹å¯¹å…¶ UIStackViewAlignmentLeading, //é¡¶éƒ¨å¯¹å…¶ UIStackViewAlignmentTop = UIStackViewAlignmentLeading, //ç¬¬ä¸€ä¸ªæ§ä»¶æ–‡å­—çš„åŸºçº¿å¯¹å…¶ æ°´å¹³å¸ƒå±€æœ‰æ•ˆ UIStackViewAlignmentFirstBaseline, //ä¸­å¿ƒå¯¹å…¶ UIStackViewAlignmentCenter, //åè¾¹å¯¹å…¶ UIStackViewAlignmentTrailing, //åº•éƒ¨å¯¹å…¶ UIStackViewAlignmentBottom = UIStackViewAlignmentTrailing, //åŸºçº¿å¯¹å…¶ï¼Œæ°´å¹³å¸ƒå±€æœ‰æ•ˆ UIStackViewAlignmentLastBaseline, &#125; NS_ENUM_AVAILABLE_IOS(9_0); åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬è®¾ç½®äº†å¯¹å…¶æ–¹å¼ä¸ºå……æ»¡ï¼Œè¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦å†åšè¿‡å¤šæ§ä»¶å°ºå¯¸çš„çº¦æŸï¼Œå¦‚æœæˆ‘ä»¬è¢«ç®¡ç†çš„æ§ä»¶é«˜åº¦æˆ–è€…å®½åº¦ä¸ä¸€ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸­å¿ƒå¯¹å…¶ï¼Œè¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸ºæ¯ä¸ªæ§ä»¶æ·»åŠ ä¸€ä¸ªå®½åº¦æˆ–è€…é«˜åº¦çš„çº¦æŸï¼Œå¦‚ä¸‹ï¼š 12345678910111213141516171819202122 NSMutableArray * array = [[NSMutableArray alloc]init]; for (int i =0 ; i&lt;5; i++) &#123; UIView * view = [[UIView alloc]init]; view.backgroundColor = [UIColor colorWithRed:arc4random()%255/255.0 green:arc4random()%255/255.0 blue:arc4random()%255/255.0 alpha:1]; float height = arc4random()%90+10; [view mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.height.equalTo([NSNumber numberWithFloat:height]); &#125;]; [array addObject:view]; &#125; stackView = [[UIStackView alloc]initWithArrangedSubviews:array]; [self.view addSubview:stackView]; [stackView mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.centerX.equalTo(self.view.mas_centerX); make.centerY.equalTo(self.view.mas_centerY); make.leading.equalTo(self.view.mas_leading).offset(20); make.trailing.equalTo(self.view.mas_trailing).offset(-20); make.size.height.equalTo(@100); &#125;]; stackView.axis = UILayoutConstraintAxisHorizontal; stackView.distribution = UIStackViewDistributionFillEqually; stackView.alignment = UIStackViewAlignmentCenter; æ•ˆæœå¦‚ä¸‹ï¼š è¿™æ ·ï¼Œå‚å·®ä¸é½çš„æ§ä»¶å¸ƒå±€æˆ‘ä»¬ä¹Ÿå¯ä»¥è½»æ¾å®Œæˆã€‚ 3.æ’åˆ—æ–¹å¼ 1@property(nonatomic) UIStackViewDistribution distribution; æ’åˆ—æ–¹å¼çš„æšä¸¾å¦‚ä¸‹ï¼š 123456789101112typedef NS_ENUM(NSInteger, UIStackViewDistribution) &#123; //å……æ»¡ï¼Œå½“åªæœ‰ä¸€ä¸ªæ§ä»¶æ—¶å¯ä»¥ä½¿ç”¨ UIStackViewDistributionFill = 0, //å¹³åˆ†å……æ»¡ï¼Œæ¯ä¸ªæ§ä»¶å æ®ç›¸åŒå°ºå¯¸æ’åˆ—å……æ»¡ UIStackViewDistributionFillEqually, //ä¼šä¼˜å…ˆæŒ‰ç…§çº¦æŸçš„å°ºå¯¸è¿›è¡Œæ’åˆ—ï¼Œå¦‚æœæ²¡æœ‰å……æ»¡ï¼Œä¼šæ‹‰ä¼¸æœ€åä¸€ä¸ªæ’åˆ—çš„æ§ä»¶å……æ»¡ UIStackViewDistributionFillProportionally, //ç­‰é—´è·æ’åˆ— UIStackViewDistributionEqualSpacing, //ä¸­å¿ƒè·ç¦»ç›¸ç­‰ UIStackViewDistributionEqualCentering,&#125; NS_ENUM_AVAILABLE_IOS(9_0); æ³¨æ„ï¼Œé™¤äº†æˆ‘ä»¬é€‰æ‹©fillå±æ€§æ—¶ä¸éœ€çº¦æŸæ§ä»¶è§†å›¾çš„å°ºå¯¸ï¼Œå…¶ä»–éƒ½éœ€è¦è¿›è¡Œçº¦æŸï¼Œä¾‹å¦‚å¦‚æœæˆ‘ä»¬é€‰æ‹©ç­‰é—´è·ï¼Œæˆ‘æŠŠæ”¹æˆå¦‚ä¸‹ä»£ç ï¼š 123456 [view mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.height.equalTo([NSNumber numberWithFloat:height]); make.width.equalTo(@50); &#125;]; stackView.distribution = UIStackViewDistributionEqualSpacing; æ•ˆæœå¦‚ä¸‹ï¼š 4.å…¶ä»– 123456//è®¾ç½®æœ€å°é—´è·@property(nonatomic) CGFloat spacing;//è®¾ç½®å¸ƒå±€æ—¶æ˜¯å¦å‚ç…§åŸºçº¿@property(nonatomic,getter=isBaselineRelativeArrangement) BOOL baselineRelativeArrangement;//è®¾ç½®å¸ƒå±€æ—¶æ˜¯å¦ä»¥æ§ä»¶çš„LayoutMarginsä¸ºæ ‡å‡†ï¼Œé»˜è®¤ä¸ºNOï¼Œæ˜¯ä»¥æ§ä»¶çš„boundsä¸ºæ ‡å‡†@property(nonatomic,getter=isLayoutMarginsRelativeArrangement) BOOL layoutMarginsRelativeArrangement; äº”ã€UIStackViewçš„åµŒå¥—ä¸€ä¸ªStackViewä¸å…è®¸æˆ‘ä»¬è¿›è¡Œæ°´å¹³å’Œç«–ç›´çš„äº¤å‰å¸ƒå±€ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡åµŒå¥—çš„æ–¹å¼æ¥å®ç°å¤æ‚çš„å¸ƒå±€æ•ˆæœï¼Œæ¯”å¦‚æˆ‘ä»¬å®ç°ä¸€ä¸ªç±»ä¼¼ç”µå½±è¡¨æ ‡ç­¾ï¼Œå¯ä»¥ä½¿ç”¨æ°´å¹³å¸ƒå±€çš„StackViewä¸­åµŒå¥—ä¸€ä¸ªç«–ç›´å¸ƒå±€çš„StackViewï¼š ååˆ†è½»æ¾å°±å¯ä»¥å®ç°å¦‚ä¸‹çš„æ•ˆæœï¼š çœ‹åˆ°äº†å§ï¼Œé€šè¿‡StackViewï¼Œæˆ‘ä»¬æ²¡æœ‰æ·»åŠ è¿‡å¤šçš„çº¦æŸï¼Œä½¿æˆ‘ä»¬å¸ƒå±€èµ·æ¥æ›´åŠ è½»æ¾äº†ã€‚å¦‚æœä½ å¸¸å¸¸ä½¿ç”¨storyBoardè¿›è¡Œå¼€å‘ï¼Œè¿˜æœ‰ä¸€ä¸ªå°æŠ€å·§å¯ä»¥æ–¹ä¾¿çš„å°†ä¸¤ä¸ªæ§ä»¶æ•´åˆåˆ°ä¸€ä¸ªStackViewä¸­ï¼ŒæŒ‰ä½commandï¼Œé€‰ä¸­ä¸¤ä¸ªæ§ä»¶ï¼Œä¹‹åç‚¹å‡»å³ä¸‹è§’çš„å¦‚ä¸‹å›¾æ ‡ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬ç”Ÿæˆä¸€ä¸ªStackViewï¼Œå°†é€‰ä¸­çš„ä¸¤ä¸ªæ§ä»¶æ•´åˆè¿›å»ï¼Œå¾ˆé…·å§ï¼ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"iOSå¼€å‘ä¸­æ ‡ç­¾æ§åˆ¶å™¨çš„ä½¿ç”¨â€”â€”UITabBarController","slug":"153iOSå¼€å‘ä¸­æ ‡ç­¾æ§åˆ¶å™¨çš„ä½¿ç”¨â€”â€”UITabBarController","date":"2015-11-12T16:00:00.000Z","updated":"2021-07-05T08:02:08.233Z","comments":true,"path":"2015/11/13/153iOSå¼€å‘ä¸­æ ‡ç­¾æ§åˆ¶å™¨çš„ä½¿ç”¨â€”â€”UITabBarController/","link":"","permalink":"http://huishao.cc/2015/11/13/153iOSå¼€å‘ä¸­æ ‡ç­¾æ§åˆ¶å™¨çš„ä½¿ç”¨â€”â€”UITabBarController/","excerpt":"","text":"iOSå¼€å‘ä¸­æ ‡ç­¾æ§åˆ¶å™¨çš„ä½¿ç”¨â€”â€”UITabBarControllerä¸€ã€å¼•è¨€ä¸å¯¼èˆªæ§åˆ¶å™¨ç›¸ç±»ä¼¼ï¼Œæ ‡ç­¾æ§åˆ¶å™¨ä¹Ÿæ˜¯ç”¨äºç®¡ç†è§†å›¾æ§åˆ¶å™¨çš„ä¸€ä¸ªUIæ§ä»¶ï¼Œåœ¨å…¶å†…éƒ¨å°è£…äº†ä¸€ä¸ªæ ‡ç­¾æ ï¼Œä¸å¯¼èˆªä¸åŒçš„æ˜¯ï¼Œå¯¼èˆªçš„ç®¡ç†æ–¹å¼æ˜¯çºµå‘çš„ï¼Œé‡‡ç”¨pushä¸popåˆ‡æ¢æ§åˆ¶å™¨ï¼Œæ ‡ç­¾çš„ç®¡ç†æ˜¯æ¨ªå‘çš„ï¼Œé€šè¿‡æ ‡ç­¾çš„åˆ‡æ¢æ¥æ”¹å˜æ§åˆ¶å™¨ï¼Œä¸€èˆ¬æˆ‘ä»¬ä¹ æƒ¯å°†tabBarä½œä¸ºåº”ç”¨ç¨‹åºçš„æ ¹è§†å›¾æ§åˆ¶å™¨ï¼Œåœ¨å…¶ä¸­æ·»åŠ å¯¼èˆªï¼Œå¯¼èˆªä¸­åœ¨å¯¹ViewControllerè¿›è¡Œç®¡ç†ã€‚ äºŒã€åˆ›å»ºä¸€ä¸ªæ ‡ç­¾æ§åˆ¶å™¨é€šè¿‡å¦‚ä¸‹çš„æ­¥éª¤ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆç®€ä¾¿çš„åˆ›å»ºä¸€ä¸ªTabBarControllerï¼š 12345678910111213UITabBarController * tabBar= [[UITabBarController alloc]init]; NSMutableArray * controllerArray = [[NSMutableArray alloc]init]; for (int i=0; i&lt;4; i++) &#123; UIViewController * con = [[UIViewController alloc]init]; [con loadViewIfNeeded]; con.view.backgroundColor = [UIColor colorWithRed:arc4random()%255/255.0 green:arc4random()%255/255.0 blue:arc4random()%255/255.0 alpha:1]; con.tabBarItem.image = [UIImage imageNamed:@&quot;btn_publish_face_a.png&quot;]; con.tabBarItem.title=[NSString stringWithFormat:@&quot;%d&quot;,i+1]; con.title = [NSString stringWithFormat:@&quot;%d&quot;,i+1]; [controllerArray addObject:con]; &#125; tabBar.viewControllers = controllerArray; [self presentViewController:tabBar animated:YES completion:nil]; é€šè¿‡ç‚¹å‡»ä¸‹é¢çš„æ ‡ç­¾æŒ‰é’®ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„åˆ‡æ¢æ§åˆ¶å™¨ã€‚å¦‚æœæˆ‘ä»¬çš„æ§åˆ¶å™¨æ•°è¶…è¿‡4ä¸ªï¼Œç³»ç»Ÿä¼šè¢«æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªmoreçš„å¯¼èˆªï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ç³»ç»Ÿè‡ªå¸¦çš„ç¼–è¾‘æ¥è°ƒæ•´æ§åˆ¶å™¨çš„é¡ºåºï¼Œå¦‚ä¸‹ï¼š ä¸‰ã€UITabBarControllerçš„å±æ€§å’Œæ–¹æ³•123456789101112131415//ç®¡ç†çš„viewControlleræ•°ç»„@property(nullable, nonatomic,copy) NSArray&lt;__kindof UIViewController *&gt; *viewControllers;- (void)setViewControllers:(NSArray&lt;__kindof UIViewController *&gt; * __nullable)viewControllers animated:(BOOL)animated;//é€‰ä¸­çš„ViewControlle@property(nullable, nonatomic, assign) __kindof UIViewController *selectedViewController;//é€šè¿‡ç¼–å·è®¾ç½®é€‰ä¸­ViewController@property(nonatomic) NSUInteger selectedIndex;//å½“viewControllerå¤§äº4ä¸ªæ—¶ï¼Œè·å–&quot;æ›´å¤š&quot;æ ‡ç­¾çš„å¯¼èˆªæ§åˆ¶å™¨@property(nonatomic, readonly) UINavigationController *moreNavigationController; //è¿™ä¸ªå±æ€§è®¾ç½®çš„æ˜¯å¯ä»¥è¿›è¡Œè‡ªå®šä¹‰æ’åˆ—é¡ºåºçš„è§†å›¾æ§åˆ¶å™¨ï¼Œå¦‚ä¸Šé¢ç¬¬äºŒå¼ å›¾ä¸­çš„ï¼Œé»˜è®¤æ˜¯å…¨éƒ¨@property(nullable, nonatomic, copy) NSArray&lt;__kindof UIViewController *&gt; *customizableViewControllers;//æ ‡ç­¾æ§åˆ¶å™¨ä¸­åˆ†è£…çš„æ ‡ç­¾æ @property(nonatomic,readonly) UITabBar *tabBar NS_AVAILABLE_IOS(3_0);//ä»£ç†@property(nullable, nonatomic,weak) id&lt;UITabBarControllerDelegate&gt; delegate; å››ã€å…³äºæ ‡ç­¾æ TabBaré€šè¿‡è‡ªå®šä¹‰æ ‡ç­¾æ çš„ä¸€äº›å±æ€§ï¼Œä½¿æˆ‘ä»¬å¯ä»¥æ›´åŠ çµæ´»çš„ä½¿ç”¨tabBarã€‚ 1ã€UITabBarå±æ€§å’Œæ–¹æ³•è®¾ç½®æ ‡ç­¾ï¼š 1234@property(nullable,nonatomic,copy) NSArray&lt;UITabBarItem *&gt; *items; //è®¾ç½®é€‰ä¸­çš„æ ‡ç­¾ @property(nullable,nonatomic,assign) UITabBarItem *selectedItem; - (void)setItems:(nullable NSArray&lt;UITabBarItem *&gt; *)items animated:(BOOL)animated; è®¾ç½®è‡ªå®šä¹‰æ ‡ç­¾é¡ºåºï¼š 123456//è°ƒç”¨è¿™ä¸ªæ–¹æ³•ä¼šå¼¹å‡ºä¸€ä¸ªç±»ä¼¼ä¸Šé¢ç¬¬äºŒå¼ æˆªå›¾çš„æ§åˆ¶å™¨ï¼Œæˆ‘ä»¬å¯ä»¥äº¤æ¢æ ‡ç­¾çš„å¸ƒå±€é¡ºåº- (void)beginCustomizingItems:(NSArray&lt;UITabBarItem *&gt; *)items; //å®Œæˆæ ‡ç­¾å¸ƒå±€- (BOOL)endCustomizingAnimated:(BOOL)animated; //æ˜¯å¦æ­£åœ¨è‡ªå®šä¹‰æ ‡ç­¾å¸ƒå±€- (BOOL)isCustomizing; è®¾ç½®tabBaré¢œè‰²ç›¸å…³ï¼š 1234//è®¾ç½®æ¸²æŸ“é¢œè‰²ï¼Œä¼šå½±å“é€‰ä¸­å­—ä½“å’Œå›¾æ¡ˆçš„æ¸²æŸ“@property(null_resettable, nonatomic,strong) UIColor *tintColor;//è®¾ç½®å¯¼èˆªæ çš„é¢œè‰²@property(nullable, nonatomic,strong) UIColor *barTintColor; è®¾ç½®èƒŒæ™¯å›¾æ¡ˆï¼š 123456//è®¾ç½®å¯¼èˆªæ èƒŒæ™¯å›¾æ¡ˆ@property(nullable, nonatomic,strong) UIImage *backgroundImage;//è®¾ç½®é€‰ä¸­ä¸€ä¸ªæ ‡ç­¾æ—¶ï¼Œæ ‡ç­¾èƒŒåçš„é€‰ä¸­æç¤ºå›¾æ¡ˆ è¿™ä¸ªä¼šå‡ºç°åœ¨è®¾ç½®çš„itemå›¾æ¡ˆçš„åé¢@property(nullable, nonatomic,strong) UIImage *selectionIndicatorImage;//è®¾ç½®é˜´å½±çš„èƒŒæ™¯å›¾æ¡ˆ@property(nullable, nonatomic,strong) UIImage *shadowImage TabBarä¸­æ ‡ç­¾çš„å®è§‚å±æ€§ï¼š 123456789101112//è®¾ç½®æ ‡ç­¾itemçš„ä½ç½®æ¨¡å¼@property(nonatomic) UITabBarItemPositioning itemPositioning;//æšä¸¾å¦‚ä¸‹typedef NS_ENUM(NSInteger, UITabBarItemPositioning) &#123; UITabBarItemPositioningAutomatic,//è‡ªåŠ¨ UITabBarItemPositioningFill,//å……æ»¡ UITabBarItemPositioningCentered,//ä¸­å¿ƒ&#125; NS_ENUM_AVAILABLE_IOS(7_0);//è®¾ç½®itemå®½åº¦@property(nonatomic) CGFloat itemWidth;//è®¾ç½®itemé—´è·@property(nonatomic) CGFloat itemSpacing; ä¸å¯¼èˆªæ ç±»ä¼¼ï¼Œä¹Ÿå¯ä»¥è®¾ç½®tabBarçš„é£æ ¼å’Œé€æ˜æ•ˆæœï¼š 1234//é£æ ¼ åˆ†é»‘ç™½ä¸¤ç§@property(nonatomic) UIBarStyle barStyle;//æ˜¯å¦é€æ˜æ•ˆæœ@property(nonatomic,getter=isTranslucent) BOOL translucent; 2ã€UITabBarDelegate123456789//é€‰ä¸­æ ‡ç­¾æ—¶è°ƒç”¨- (void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item;//å°†è¦å¼€å§‹ç¼–è¾‘æ ‡ç­¾æ—¶- (void)tabBar:(UITabBar *)tabBar willBeginCustomizingItems:(NSArray&lt;UITabBarItem *&gt; *)items; //å·²ç»å¼€å§‹ç¼–è¾‘æ ‡ç­¾æ—¶ - (void)tabBar:(UITabBar *)tabBar didBeginCustomizingItems:(NSArray&lt;UITabBarItem *&gt; *)items; //å°†è¦è¿›å…¥ç¼–è¾‘çŠ¶æ€æ—¶- (void)tabBar:(UITabBar *)tabBar willEndCustomizingItems:(NSArray&lt;UITabBarItem *&gt; *)items changed:(BOOL)changed; //å·²ç»è¿›å…¥ç¼–è¾‘çŠ¶æ€æ—¶- (void)tabBar:(UITabBar *)tabBar didEndCustomizingItems:(NSArray&lt;UITabBarItem *&gt; *)items changed:(BOOL)changed; äº”ã€å†çœ‹UITabBarItemå’ŒNavigationItemç±»ä¼¼ï¼Œæ ‡ç­¾æ ä¸Šçš„itemä¹Ÿå¯ä»¥è‡ªå®šä¹‰ï¼Œä¸€äº›æ–¹æ³•å¦‚ä¸‹ã€‚ åˆå§‹åŒ–æ–¹æ³•ï¼š 12345//é€šè¿‡æ ‡é¢˜å’Œå›¾æ¡ˆè¿›è¡Œåˆ›å»º- (instancetype)initWithTitle:(nullable NSString *)title image:(nullable UIImage *)image tag:(NSInteger)tag;- (instancetype)initWithTitle:(nullable NSString *)title image:(nullable UIImage *)image selectedImage:(nullable UIImage *)selectedImage;//åˆ›å»ºç³»ç»Ÿç±»å‹çš„- (instancetype)initWithTabBarSystemItem:(UITabBarSystemItem)systemItem tag:(NSInteger)tag; UITabBarSystemItemçš„æšä¸¾å¦‚ä¸‹ï¼š 1234567891011121314typedef NS_ENUM(NSInteger, UITabBarSystemItem) &#123; UITabBarSystemItemMore,//æ›´å¤šå›¾æ ‡ UITabBarSystemItemFavorites,//æœ€çˆ±å›¾æ ‡ UITabBarSystemItemFeatured,//ç‰¹å¾å›¾æ ‡ UITabBarSystemItemTopRated,//é«˜çº§å›¾æ ‡ UITabBarSystemItemRecents,//æœ€è¿‘å›¾æ ‡ UITabBarSystemItemContacts,//è”ç³»äººå›¾æ ‡ UITabBarSystemItemHistory,//å†å²å›¾æ ‡ UITabBarSystemItemBookmarks,//å›¾ä¹¦å›¾æ ‡ UITabBarSystemItemSearch,//æŸ¥æ‰¾å›¾æ ‡ UITabBarSystemItemDownloads,//ä¸‹è½½å›¾æ ‡ UITabBarSystemItemMostRecent,//è®°å½•å›¾æ ‡ UITabBarSystemItemMostViewed,//å…¨éƒ¨æŸ¥çœ‹å›¾æ ‡&#125;; UITabBarItemå¸¸ç”¨å±æ€§ï¼š 12//è®¾ç½®é€‰ä¸­å›¾æ¡ˆ@property(nullable, nonatomic,strong) UIImage *selectedImage; ä¸‹é¢è¿™ä¸ªå±æ€§å¯ä»¥è®¾ç½®itemçš„å¤´æ ‡æ–‡å­—ï¼š 1 con.tabBarItem.badgeValue = @&quot;1&quot;; 12//è®¾ç½®æ ‡é¢˜çš„ä½ç½®åç§»@property (nonatomic, readwrite, assign) UIOffset titlePositionAdjustment; ç”±äºUITabBarItemæ˜¯ç»§æ‰¿äºUIBarItemï¼Œè¿˜æœ‰ä¸‹é¢è¿™ä¸ªå±æ€§å¯ä»¥è®¾ç½®ä½¿ç”¨ï¼š 12345678910111213//æ ‡é¢˜@property(nullable, nonatomic,copy) NSString *title; //å›¾æ¡ˆ @property(nullable, nonatomic,strong) UIImage *image; //æ¨ªå±æ—¶çš„å›¾æ¡ˆ @property(nullable, nonatomic,strong) UIImage *landscapeImagePhone;//å›¾æ¡ˆä½ç½®åç§»@property(nonatomic) UIEdgeInsets imageInsets; //æ¨ªå±æ—¶çš„å›¾æ¡ˆä½ç½®åç§»@property(nonatomic) UIEdgeInsets landscapeImagePhoneInsets ;//è®¾ç½®å’Œè·å–æ ‡é¢˜çš„å­—ä½“å±æ€§- (void)setTitleTextAttributes:(nullable NSDictionary&lt;NSString *,id&gt; *)attributes forState:(UIControlState)state;- (nullable NSDictionary&lt;NSString *,id&gt; *)titleTextAttributesForState:(UIControlState)state; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"iOSè‡ªå®šä¹‰çš„emojiè¡¨æƒ…é”®ç›˜","slug":"152iOSè‡ªå®šä¹‰çš„emojiè¡¨æƒ…é”®ç›˜","date":"2015-11-10T16:00:00.000Z","updated":"2021-07-05T07:59:54.443Z","comments":true,"path":"2015/11/11/152iOSè‡ªå®šä¹‰çš„emojiè¡¨æƒ…é”®ç›˜/","link":"","permalink":"http://huishao.cc/2015/11/11/152iOSè‡ªå®šä¹‰çš„emojiè¡¨æƒ…é”®ç›˜/","excerpt":"","text":"iOSè‡ªå®šä¹‰çš„è¡¨æƒ…é”®ç›˜ä¸€ã€å…³äºemojiè¡¨æƒ…éšç€iOSç³»ç»Ÿç‰ˆæœ¬çš„å‡çº§ï¼Œå¯¹åŸç”Ÿemojiè¡¨æƒ…çš„æ”¯æŒä¹Ÿè¶Šæ¥è¶Šä¸°å¯Œã€‚emojiè¡¨æƒ…æ˜¯unicodeç ä¸­ä¸ºè¡¨æƒ…ç¬¦å·è®¾è®¡çš„ä¸€ç»„ç¼–ç ï¼Œå½“ç„¶ï¼Œè¿˜æœ‰ç‹¬ç«‹äºunicodeçš„å¦ä¸€å¥—ç¼–ç SBUnicodeï¼Œåœ¨OSç³»ç»Ÿä¸­ï¼Œè¿™ä¸¤ç§ç¼–ç éƒ½æœ‰å¾ˆå¥½çš„æ”¯æŒã€‚UIç³»ç»Ÿä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬å°†ç¼–ç è½¬ä¹‰æˆè¡¨æƒ…ç¬¦å·ï¼Œä¾‹å¦‚ç”¨SBUnicodeå¦‚ä¸‹ä»£ç ï¼š 1234 UILabel * label = [[UILabel alloc]initWithFrame:CGRectMake(100, 100, 100, 100)]; label.font = [UIFont systemFontOfSize:25]; label.text = @&quot;\\uE056&quot;; [self.view addSubview:label]; å°±ä¼šåœ¨å±å¹•ä¸Šå‡ºç°ä¸€ä¸ªç¬‘è„¸ï¼š äºŒã€å¼€å‘è¡¨æƒ…é”®ç›˜çš„æ€è·¯é¦–å…ˆä¸ºäº†å®ç°è·¨å¹³å°ï¼Œæ— è®ºiOSç«¯ï¼Œandoridç«¯è¿˜æ˜¯webç«¯ï¼Œéƒ½è¦æœ‰ä¸€ä¸ªç›¸åŒçš„æ ‡å‡†ï¼Œè¿™ä¸ªæ ‡å‡†å°±å¯ä»¥æ˜¯å›½é™…Unicodeç¼–ç ï¼Œæˆ‘ä»¬çš„æ€è·¯æ˜¯å°†è¡¨æƒ…æ–‡å­—è¿›è¡Œunicodeç¼–ç åå†è¿›è¡Œä¼ è¾“ï¼Œå› æ­¤ï¼Œæœ‰ä¸¤ä¸­æ–¹å¼ï¼Œä¸€ç§æ˜¯é€šè¿‡è‡ªå®šä¹‰ä¸€å¥—è¡¨æƒ…åˆ‡å›¾ï¼Œå°†å…¶ä¸unicodeç ä¸€ä¸€å¯¹åº”ï¼Œåœ¨è½¬ç çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸€ä¸€éå†ï¼Œè½¬æ¢æˆunicodeåè¿›è¡Œä¼ è¾“ï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯æˆ‘ä»¬å¯ä»¥ä¿è¯æ‰€æœ‰å¹³å°æ‰€èƒ½ä½¿ç”¨çš„è¡¨æƒ…ç»Ÿä¸€ã€‚åœ¨iOSç«¯ï¼Œå¯ä»¥æœ‰å¦ä¸€ç§æ–¹å¼ï¼Œé€šè¿‡ä¸Šé¢æˆ‘ä»¬çŸ¥é“ï¼Œé€šè¿‡SBUnicodeç æˆ‘ä»¬å¯ä»¥åœ¨å®¢æˆ·ç«¯æ˜¾ç¤ºè¡¨æƒ…ç¬¦å·ï¼Œå¹¶ä¸”è¿™ä¸ªç çš„æ’åˆ—æ˜¯ååˆ†æœ‰è§„å¾‹çš„ï¼Œé€šè¿‡è¿™ä¸ªç‰¹ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡éå†SBUnicodeç çš„èŒƒå›´è¿›è¡Œè¡¨æƒ…çš„åˆ›å»ºï¼Œçœå»çš„å›¾ç‰‡ç´ æçš„éº»çƒ¦ã€‚ iOSä¸­å¯ç”¨çš„è¡¨æƒ…unicodeèŒƒå›´æ˜¯ï¼š0xE001~0xE05A,0xE101~0xE15A, 0xE201~0xE253,0xE401~0xE44C,0xE501~0xE537ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡éå†çš„æ–¹æ³•ï¼Œå°†å…¶éƒ½åŠ å…¥æ•°æ®æºæ•°ç»„ä¸­ï¼š 1234567891011int emojiRangeArray[10] = &#123;0xE001,0xE05A,0xE101,0xE15A,0xE201,0xE253,0xE401,0xE44C,0xE501,0xE537&#125;; for (int j = 0 ; j&lt;10 ; j+=2 ) &#123; int startIndex = emojiRangeArray[j]; int endIndex = emojiRangeArray[j+1]; for (int i = startIndex ; i&lt;= endIndex ; i++ ) &#123; //æ·»åŠ åˆ°æ•°æ®æºæ•°ç»„ [dataArray addObject:[NSString stringWithFormat:@&quot;%C&quot;, (unichar)i]]; &#125; &#125; é”®ç›˜çš„æ‘†æ”¾ï¼Œå¯ä»¥é€šè¿‡collectionViewæ¥åšï¼Œååˆ†æ–¹ä¾¿ï¼š 1234567891011121314151617181920212223242526 //ä¸ºäº†æ‘†æ”¾åˆ†é¡µæ§åˆ¶å™¨ï¼Œåˆ›å»ºä¸€ä¸ªèƒŒæ™¯view bgView = [[UIView alloc]initWithFrame:CGRectMake(0, 0, [UIScreen mainScreen].bounds.size.width, 200)]; //åˆ†é¡µæ§åˆ¶å™¨ pageControlBottom = [[UIPageControl alloc]initWithFrame:CGRectMake(0, 170, [UIScreen mainScreen].bounds.size.width, 20)]; [bgView addSubview:pageControlBottom]; //collectionViewå¸ƒå±€ UICollectionViewFlowLayout * layout = [[UICollectionViewFlowLayout alloc]init]; //æ°´å¹³å¸ƒå±€ layout.scrollDirection=UICollectionViewScrollDirectionHorizontal; //è®¾ç½®æ¯ä¸ªè¡¨æƒ…æŒ‰é’®çš„å¤§å°ä¸º30*30 layout.itemSize=CGSizeMake(30, 30); //è®¡ç®—æ¯ä¸ªåˆ†åŒºçš„å·¦å³è¾¹è· float xOffset = (kscreenWidth-7*30-10*6)/2; //è®¾ç½®åˆ†åŒºçš„å†…å®¹åç§» layout.sectionInset=UIEdgeInsetsMake(10, xOffset, 10, xOffset); scrollView = [[UICollectionView alloc]initWithFrame:CGRectMake(0, 0, [UIScreen mainScreen].bounds.size.width, 160) collectionViewLayout:layout]; //æ‰“å¼€åˆ†é¡µæ•ˆæœ scrollView.pagingEnabled = YES; //è®¾ç½®è¡Œåˆ—é—´è· layout.minimumLineSpacing=10; layout.minimumInteritemSpacing=5; scrollView.delegate=self; scrollView.dataSource=self; scrollView.backgroundColor = bgView.backgroundColor; [bgView addSubview:scrollView]; åœ¨collectionViewçš„å›è°ƒæ–¹æ³•ä¸­ï¼Œå¤„ç†å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738//æ¯é¡µ28ä¸ªè¡¨æƒ…-(NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section&#123; if (((dataArray.count/28)+(dataArray.count%28==0?0:1))!=section+1) &#123; return 28; &#125;else&#123; return dataArray.count-28*((dataArray.count/28)+(dataArray.count%28==0?0:1)-1); &#125; &#125;//è¿”å›é¡µæ•°-(NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView&#123; return (dataArray.count/28)+(dataArray.count%28==0?0:1);&#125;-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath&#123; UICollectionViewCell * cell = [collectionView dequeueReusableCellWithReuseIdentifier:@&quot;biaoqing&quot; forIndexPath:indexPath]; for (int i=cell.contentView.subviews.count; i&gt;0; i--) &#123; [cell.contentView.subviews[i-1] removeFromSuperview]; &#125; UILabel * label = [[UILabel alloc]initWithFrame:CGRectMake(0, 0, 30, 30)]; label.font = [UIFont systemFontOfSize:25]; label.text =dataArray[indexPath.row+indexPath.section*28] ; [cell.contentView addSubview:label]; return cell;&#125;-(void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath&#123; NSString * str = dataArray[indexPath.section*28+indexPath.row]; //è¿™é‡Œæ‰‹åŠ¨å°†è¡¨æƒ…ç¬¦å·æ·»åŠ åˆ°textFieldä¸Š &#125;//ç¿»é¡µåå¯¹åˆ†é¡µæ§åˆ¶å™¨è¿›è¡Œæ›´æ–°-(void)scrollViewDidScroll:(UIScrollView *)scrollView&#123; CGFloat contenOffset = scrollView.contentOffset.x; int page = contenOffset/scrollView.frame.size.width+((int)contenOffset%(int)scrollView.frame.size.width==0?0:1); pageControlBottom.currentPage = page;&#125; ä¸‰ã€åˆ‡æ¢ç³»ç»Ÿé”®ç›˜å’Œè‡ªå®šä¹‰çš„è¡¨æƒ…é”®ç›˜UITextFieldå’ŒUITextViewéƒ½ä¼šæœ‰ä¸‹é¢è¿™ä¸ªå±æ€§å’Œæ–¹æ³•ï¼š 12@property (nullable, readwrite, strong) UIView *inputView; - (void)reloadInputViews; inputViewæˆ‘ä»¬å¯ä»¥è®¾ç½®textViewå’ŒtextFieldæˆä¸ºç¬¬ä¸€å“åº”æ—¶çš„å¼¹å‡ºé™„ä»¶ï¼Œå¦‚æœæˆ‘ä»¬ä¸è®¾ç½®æˆ–è€…è®¾ç½®ä¸ºnilï¼Œåˆ™ä¼šå¼¹å‡ºç³»ç»Ÿé”®ç›˜ï¼ŒreloadInputViewæ–¹æ³•å¯ä»¥ä½¿æˆ‘ä»¬åˆ·æ–°è¿™ä¸ªé™„ä»¶è§†å›¾ï¼Œé€šè¿‡è¿™ä¸¤ä¸ªï¼Œæˆ‘ä»¬å¯ä»¥éå¸¸è½»æ¾çš„å®ç°é”®ç›˜çš„åˆ‡æ¢ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨ä¸€ä¸ªå‡ºå‘æ–¹æ³•ä¸­å¦‚ä¸‹å¤„ç†ï¼š 1234567891011121314151617-(void)imageViewTap&#123; if (![_publishContent isFirstResponder]) &#123; return; &#125; if (isEmoji==NO) &#123; isEmoji=YES; //å‘¼å‡ºè¡¨æƒ… _textView.inputView=bgView; [_textView reloadInputViews]; &#125;else&#123; isEmoji=NO; _textView.inputView=nil; [_textView reloadInputViews]; &#125; &#125; æ•ˆæœå¦‚ä¸‹ï¼š è¿½æ³¨ï¼šæµ‹è¯•ä¸Šé¢çš„SBUnicodeç åœ¨æ¨¡æ‹Ÿå™¨ä¸Šå¯ä»¥æ­£å¸¸æ˜¾ç¤ºï¼ŒçœŸæœºå¹¶ä¸èƒ½è¯†åˆ«ï¼Œå¯ä»¥é€šè¿‡å°†è¡¨æƒ…ç¬¦å…¨éƒ¨æ·»åŠ åˆ°ä¸€ä¸ªplistæ–‡ä»¶ä¸­ï¼Œé€šè¿‡æ–‡ä»¶è¯»å–æ¥åˆ›å»ºé”®ç›˜çš„æ–¹å¼è¿›è¡ŒçœŸæœºä¸Šçš„å¼€å‘ã€‚plistæ–‡ä»¶åœ°å€å¦‚ä¸‹ï¼š http://pan.baidu.com/s/1o6AdkBw ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"iOSå¼€å‘UINavigationç³»åˆ—å››â€”â€”å¯¼èˆªæ§åˆ¶å™¨UINavigationController","slug":"151iOSå¼€å‘UINavigationç³»åˆ—å››â€”â€”å¯¼èˆªæ§åˆ¶å™¨UINavigationController","date":"2015-11-09T16:00:00.000Z","updated":"2021-07-05T07:57:48.864Z","comments":true,"path":"2015/11/10/151iOSå¼€å‘UINavigationç³»åˆ—å››â€”â€”å¯¼èˆªæ§åˆ¶å™¨UINavigationController/","link":"","permalink":"http://huishao.cc/2015/11/10/151iOSå¼€å‘UINavigationç³»åˆ—å››â€”â€”å¯¼èˆªæ§åˆ¶å™¨UINavigationController/","excerpt":"","text":"iOSå¼€å‘UINavigationç³»åˆ—å››â€”â€”å¯¼èˆªæ§åˆ¶å™¨UINavigationControllerä¸€ã€å¼•è¨€åœ¨å‰é¢çš„åšå®¢ä¸­ï¼Œæˆ‘ä¹ˆä½ ä»‹ç»äº†UINavigationBarï¼ŒUINavigationItemå’ŒUIToolBarï¼ŒUINavigationControlleræ˜¯å°†è¿™äº›æ§ä»¶å’ŒUIViewControllerç´§å¯†çš„ç»“åˆäº†èµ·æ¥ï¼Œä½¿ç”¨å¯¼èˆªï¼Œæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå±‚æ¬¡ä¼šæ›´åŠ åˆ†æ˜ï¼Œå¯¹controllerçš„ç®¡ç†ä¹Ÿæ›´åŠ æ–¹ä¾¿ã€‚å‰å‡ ç¯‡åšå®¢åœ°å€å¦‚ä¸‹ï¼š UINavigationBarï¼šhttp://my.oschina.net/u/2340880/blog/527706 UINavigationItemï¼šhttp://my.oschina.net/u/2340880/blog/527781 UIToolBarï¼šhttp://my.oschina.net/u/2340880/blog/528168 äºŒã€å¯¼èˆªæ§åˆ¶å™¨çš„åˆ›å»ºå’Œcontrollerçš„ç®¡ç†å¯¼èˆªæ§åˆ¶å™¨æ˜¯ä¸€ä¸ªå †æ ˆç»“æ„ï¼Œåªæ˜¯å…¶ä¸­ç®¡ç†çš„å¯¹è±¡æ˜¯controllerï¼Œé€šè¿‡pushä¸popè¿›è¡Œcontrollerçš„åˆ‡æ¢ï¼Œæˆ‘ä»¬æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥åˆ›å»ºå¯¼èˆªæ§åˆ¶å™¨ï¼š 1234//é€šè¿‡ä¸€ä¸ªè‡ªå®šä¹‰çš„å¯¼èˆªæ å’Œå·¥å…·æ åˆ›å»ºå¯¼èˆªæ§åˆ¶å™¨- (instancetype)initWithNavigationBarClass:(nullable Class)navigationBarClass toolbarClass:(nullable Class)toolbarClass;//ä½¿ç”¨ç³»ç»Ÿé»˜è®¤çš„å¯¼èˆªæ å’Œå·¥å…·æ ï¼Œé€šè¿‡ä¸€ä¸ªæ ¹è§†å›¾åˆ›å»ºå¯¼èˆªæ§åˆ¶å™¨- (instancetype)initWithRootViewController:(UIViewController *)rootViewController; é€šè¿‡ä»¥ä¸‹æ–¹æ³•å¯¹è§†å›¾æ§åˆ¶å™¨è¿›è¡Œç®¡ç†æ“ä½œï¼š 12345678910//è®¾ç½®ç®¡ç†çš„è§†å›¾æ§åˆ¶å™¨- (void)setViewControllers:(NSArray&lt;UIViewController *&gt; *)viewControllers animated:(BOOL)animated;//å‹å…¥æ–°çš„è§†å›¾æ§åˆ¶å™¨- (void)pushViewController:(UIViewController *)viewController animated:(BOOL)animated;//å¼¹å‡ºä¸€ä¸ªè§†å›¾æ§åˆ¶å™¨ è¿”å›çš„æ˜¯popçš„controller- (nullable UIViewController *)popViewControllerAnimated:(BOOL)animated;//å¼¹å‡ºåˆ°æŸä¸ªè§†å›¾æ§åˆ¶å™¨ è¿”å›æ‰€æœ‰popçš„controller- (nullable NSArray&lt;__kindof UIViewController *&gt; *)popToViewController:(UIViewController *)viewController animated:(BOOL)animated; //ç›´æ¥popåˆ°æ ¹è§†å›¾æ§åˆ¶å™¨ï¼Œè¿”å›æ‰€æœ‰è¢«popçš„controller- (nullable NSArray&lt;__kindof UIViewController *&gt; *)popToRootViewControllerAnimated:(BOOL)animated; ä¸‰ã€å¯¼èˆªæ§åˆ¶å™¨ä¸­çš„å¸¸ç”¨æ–¹æ³•å’Œå±æ€§1234//è¿”å›æ ˆé¡¶çš„controller@property(nullable, nonatomic,readonly,strong) UIViewController *topViewController; //è¿”å›æ˜¾ç¤ºçš„controller@property(nullable, nonatomic,readonly,strong) UIViewController *visibleViewController; ä¸Šé¢ä¸¤ä¸ªæ–¹æ³•çš„åŒºåˆ«åœ¨äºï¼ŒtopViewControlleræ˜¯è¿”å›è¢«pushå‡ºçš„æœ€åä¸€ä¸ªcontrollerï¼Œä½†æ˜¯å¦‚æœä¹‹ååˆæœ‰presentè¿›è¡Œè«æ³°è·³è½¬ï¼ŒvisibleViewControllerä¼šè¿”å›å½“å‰æ˜¾ç¤ºçš„controllerã€‚ä¾‹å¦‚A-push-B-present-Cï¼Œåˆ™topViewControllerä¼šè¿”å›Bï¼ŒvisibleViewControllerä¼šè¿”å›Cã€‚ 123456789101112131415//è¿”å›å †æ ˆä¸­æ‰€æœ‰çš„controller@property(nonatomic,copy) NSArray&lt;__kindof UIViewController *&gt; *viewControllers;//è®¾ç½®éšè—å¯¼èˆªæ @property(nonatomic,getter=isNavigationBarHidden) BOOL navigationBarHidden;- (void)setNavigationBarHidden:(BOOL)hidden animated:(BOOL)animated;//å¯¼èˆªæ å¯¹è±¡ï¼Œåªè¯»å±æ€§@property(nonatomic,readonly) UINavigationBar *navigationBar;//éšè—çŠ¶æ€æ @property(nonatomic,getter=isToolbarHidden) BOOL toolbarHidden NS_AVAILABLE_IOS(3_0);- (void)setToolbarHidden:(BOOL)hidden animated:(BOOL)animated;//çŠ¶æ€æ å¯¹è±¡@property(null_resettable,nonatomic,readonly) UIToolbar *toolbar;//å¯¼èˆªä¸­çš„è¿”å›æ‰‹åŠ¿å¯¹è±¡//iOS7ä¹‹åï¼Œåœ¨å¯¼èˆªä¸­å³åˆ’ä¼šè¿›è¡Œpopæ“ä½œï¼Œè®¾ç½®è¿™ä¸ªçš„enableå¯ä»¥æ§åˆ¶è®¾ç½®æ‰‹åŠ¿æ˜¯å¦å¤±æ•ˆ@property(nullable, nonatomic, readonly) UIGestureRecognizer *interactivePopGestureRecognizer; å››ã€iOS8åå¯¼èˆªçš„æ–°ç‰¹æ€§1234567891011121314//è¿™ä¸ªæ–¹æ³•æ˜¯ä¸ºäº†iOSæ–¹æ³•çš„å‘½åç»Ÿä¸€ï¼Œåœ¨å¯¼èˆªä¸­ï¼Œå…¶ä½œç”¨å’Œpushä¸€æ ·- (void)showViewController:(UIViewController *)vc sender:(nullable id)sender;//å¼¹å‡ºé”®ç›˜çš„æ—¶å€™éšè—å¯¼èˆªæ @property (nonatomic, readwrite, assign) BOOL hidesBarsWhenKeyboardAppears;//å±å¹•æ»‘åŠ¨çš„æ—¶å€™éšè—å¯¼èˆªæ ï¼Œå¸¸ç”¨äºtableView,ä¸Šæ»‘éšè—å¯¼èˆªæ ï¼Œä¸‹æ»‘æ˜¾ç¤ºï¼Œå¸¦åŠ¨ç”»æ•ˆæœ@property (nonatomic, readwrite, assign) BOOL hidesBarsOnSwipe;//æ»‘åŠ¨éšè—å¯¼èˆªæ çš„æ‰‹åŠ¿@property (nonatomic, readonly, strong) UIPanGestureRecognizer *barHideOnSwipeGestureRecognizer;//æ¨ªå±çš„æ—¶å€™éšè—å¯¼èˆªæ @property (nonatomic, readwrite, assign) BOOL hidesBarsWhenVerticallyCompact;//æ•²å‡»å±å¹•å¯ä»¥éšè—ä¸æ˜¾ç¤ºå¯¼èˆªæ @property (nonatomic, readwrite, assign) BOOL hidesBarsOnTap;//æ•²å‡»å±å¹•çš„æ‰‹åŠ¿@property (nonatomic, readonly, assign) UITapGestureRecognizer *barHideOnTapGestureRecognizer; iOS8ä¸­å¢åŠ çš„è¿™äº›æ–¹æ³•ï¼Œä¸å¾—ä¸è¯´ç€å®åœ¨ç”¨æˆ·ä½“éªŒç”Ÿè¿›äº†ä¸€å¤§æ­¥ï¼Œä»ä¸­ä¹Ÿå¯ä»¥çœ‹å‡ºappleå¯¹äºç”¨æˆ·ä½“éªŒåº¦çš„ç”¨å¿ƒã€‚ äº”ã€UINavigationDelegateå¯¼èˆªæ§åˆ¶å™¨è¿˜æä¾›äº†ä¸€äº›ä»£ç†å›è°ƒæ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š 1234567891011//è§†å›¾å°†è¦å±•ç¤ºæ—¶è°ƒç”¨çš„æ–¹æ³•- (void)navigationController:(UINavigationController *)navigationController willShowViewController:(UIViewController *)viewController animated:(BOOL)animated;//è§†å›¾å·²ç»å±•ç¤ºæ—¶è°ƒç”¨çš„æ–¹æ³•- (void)navigationController:(UINavigationController *)navigationController didShowViewController:(UIViewController *)viewController animated:(BOOL)animated;//è®¾ç½®æ–¹æ³•è®¾ç½®å¯¼èˆªæ§åˆ¶å™¨æ”¯æŒçš„è®¾å¤‡æ–¹å‘- (UIInterfaceOrientationMask)navigationControllerSupportedInterfaceOrientations:(UINavigationController *)navigationController NS_AVAILABLE_IOS(7_0);//è¿™ä¸ªæ–¹æ³•è®¾ç½®å¯¼èˆªæ§åˆ¶å™¨çš„é¦–é€‰è®¾å¤‡æ–¹å‘- (UIInterfaceOrientation)navigationControllerPreferredInterfaceOrientationForPresentation:(UINavigationController *)navigationController NS_AVAILABLE_IOS(7_0);//ä¸‹é¢ä¸¤ä¸ªæ–¹æ³•å¯ä»¥å¯¹å¯¼èˆªçš„è½¬åœºåŠ¨ç”»è¿›è¡Œè®¾ç½®- (nullable id &lt;UIViewControllerInteractiveTransitioning&gt;)navigationController:(UINavigationController *)navigationController interactionControllerForAnimationController:(id &lt;UIViewControllerAnimatedTransitioning&gt;) animationController;- (nullable id &lt;UIViewControllerAnimatedTransitioning&gt;)navigationController:(UINavigationController *)navigationController animationControllerForOperation:(UINavigationControllerOperation)operation fromViewController:(UIViewController *)fromVC toViewController:(UIViewController *)toVC ; å…­ã€ä¸UIViewControllerç›¸å…³å½“ä¸€ä¸ªcontrollerè¢«æ·»åŠ åˆ°å¯¼èˆªä¸­åï¼Œç³»ç»Ÿä¼šä¸ºå®ƒåˆ†é…ä¸€äº›å±æ€§ï¼Œå¦‚ä¸‹ï¼š 123456//å½“å‰controllerå¯¹åº”çš„å¯¼èˆªé¡¹@property(nonatomic,readonly,strong) UINavigationItem *navigationItem;//pushçš„æ—¶å€™éšè—åº•éƒ¨æ ï¼Œå¦‚pushåéšè—tabbar@property(nonatomic) BOOL hidesBottomBarWhenPushed;//ç®¡ç†å®ƒçš„å¯¼èˆªæ§åˆ¶å™¨@property(nullable, nonatomic,readonly,strong) UINavigationController *navigationController; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"iOSå¼€å‘UINavigationç³»åˆ—ä¸‰â€”â€”å·¥å…·æ UIToolBar","slug":"150iOSå¼€å‘UINavigationç³»åˆ—ä¸‰â€”â€”å·¥å…·æ UIToolBar","date":"2015-11-08T16:00:00.000Z","updated":"2021-07-05T07:56:21.743Z","comments":true,"path":"2015/11/09/150iOSå¼€å‘UINavigationç³»åˆ—ä¸‰â€”â€”å·¥å…·æ UIToolBar/","link":"","permalink":"http://huishao.cc/2015/11/09/150iOSå¼€å‘UINavigationç³»åˆ—ä¸‰â€”â€”å·¥å…·æ UIToolBar/","excerpt":"","text":"iOSå¼€å‘UINavigationç³»åˆ—ä¸‰â€”â€”å·¥å…·æ UIToolBariOSä¸­é™¤äº†UINavinationBarä¹‹å¤–ï¼Œè¿˜æœ‰å·¥å…·æ UIToolBarå¯ä»¥ä¾›æˆ‘ä»¬ä½¿ç”¨ï¼Œå·¥å…·æ å’Œå¯¼èˆªæ ååˆ†ç±»ä¼¼ï¼Œåªæ˜¯åŠŸèƒ½æ›´åŠ ç®€å•ï¼Œå·¥å…·æ ä¸­ä¹Ÿæœ‰UIBarButtonItemæŒ‰é’®ï¼Œåœ¨å‰ä¸¤ç¯‡åšå®¢ä¸­ï¼Œå¯¹å¯¼èˆªæ å’Œå¯¼èˆªé¡¹éƒ½è¿›è¡Œçš„è®¨è®ºï¼Œåœ°å€å¦‚ä¸‹ï¼š UINavigationBarï¼šhttp://my.oschina.net/u/2340880/blog/527706 UINavigationItem:http://my.oschina.net/u/2340880/blog/527781 å¯¼èˆªæ ä¸€èˆ¬ä¼šå‡ºç°åœ¨è§†å›¾çš„å¤´éƒ¨ï¼Œä¸ä¹‹ç›¸å¯¹ï¼Œå·¥å…·æ ä¸€èˆ¬ä¼šå‡ºç°åœ¨è§†å›¾çš„çš„åº•éƒ¨ï¼Œä¸Šé¢å¯ä»¥å¡«å……ä¸€äº›æŒ‰é’®ï¼Œæä¾›ç»™ç”¨æˆ·ä¸€äº›æ“ä½œã€‚åˆ›å»ºä¸€ä¸ªå·¥å…·æ å¦‚ä¸‹ï¼š 123 self.view.backgroundColor = [UIColor grayColor]; UIToolbar * tool = [[UIToolbar alloc]initWithFrame:CGRectMake(0, self.view.frame.size.height-40, 320, 40)]; [self.view addSubview:tool]; ä¸‹é¢æ˜¯UIToolBarä¸­çš„ä¸€äº›æ–¹æ³•ï¼Œå…¶ä¸­å¤§éƒ¨åˆ†åœ¨UINavigationBarä¸­éƒ½æœ‰æ¶‰åŠï¼Œè¿™é‡Œåªåšç®€å•çš„ä»‹ç»ï¼š 1234567891011121314151617//å·¥å…·æ çš„é£æ ¼ï¼Œå’Œå¯¼èˆªæ ç±»ä¼¼ï¼Œæœ‰é»‘ç™½ä¸¤ç§@property(nonatomic) UIBarStyle barStyle; //è®¾ç½®å·¥å…·æ ä¸ŠæŒ‰é’®æ•°ç»„@property(nullable,nonatomic,copy) NSArray&lt;UIBarButtonItem *&gt; *items; //è®¾ç½®å·¥å…·æ æ˜¯å¦é€æ˜@property(nonatomic,assign,getter=isTranslucent) BOOL translucent; //è®¾ç½®å·¥å…·æ æŒ‰é’®- (void)setItems:(nullable NSArray&lt;UIBarButtonItem *&gt; *)items animated:(BOOL)animated; //è®¾ç½®itemé£æ ¼é¢œè‰²@property(null_resettable, nonatomic,strong) UIColor *tintColor;//è®¾ç½®å·¥å…·æ èƒŒæ™¯è‰²@property(nullable, nonatomic,strong) UIColor *barTintColor;//è®¾ç½®å·¥å…·æ èƒŒæ™¯å’Œé˜´å½±å›¾æ¡ˆ- (void)setBackgroundImage:(nullable UIImage *)backgroundImage forToolbarPosition:(UIBarPosition)topOrBottom barMetrics:(UIBarMetrics)barMetrics;- (nullable UIImage *)backgroundImageForToolbarPosition:(UIBarPosition)topOrBottom barMetrics:(UIBarMetrics)barMetrics;- (void)setShadowImage:(nullable UIImage *)shadowImage forToolbarPosition:(UIBarPosition)topOrBottom;- (nullable UIImage *)shadowImageForToolbarPosition:(UIBarPosition)topOrBottom; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"iOSå¼€å‘UINavigationç³»åˆ—äºŒâ€”â€”UINavigationItem","slug":"149iOSå¼€å‘UINavigationç³»åˆ—äºŒâ€”â€”UINavigationItem","date":"2015-11-07T16:00:00.000Z","updated":"2021-07-05T07:54:50.311Z","comments":true,"path":"2015/11/08/149iOSå¼€å‘UINavigationç³»åˆ—äºŒâ€”â€”UINavigationItem/","link":"","permalink":"http://huishao.cc/2015/11/08/149iOSå¼€å‘UINavigationç³»åˆ—äºŒâ€”â€”UINavigationItem/","excerpt":"","text":"iOSå¼€å‘UINavigationç³»åˆ—äºŒâ€”â€”UINavigationItemä¸€ã€å¼•è¨€UINavigationItemæ˜¯å¯¼èˆªæ ä¸Šç”¨äºç®¡ç†å¯¼èˆªé¡¹çš„ç±»ï¼Œåœ¨ä¸Šä¸€ç¯‡åšå®¢ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“å¯¼èˆªæ æ˜¯é€šè¿‡pushä¸popçš„å †æ ˆæ“ä½œæ¥å¯¹itemè¿›è¡Œç®¡ç†çš„ï¼ŒåŒæ ·ï¼Œæ¯ä¸€ä¸ªItemè‡ªèº«ä¹Ÿæœ‰è®¸å¤šå±æ€§å¯ä¾›æˆ‘ä»¬è¿›è¡Œè‡ªå®šåˆ¶ã€‚è¿™ç¯‡åšå®¢ï¼Œä¸»è¦è®¨è®ºUINavigationItemçš„ä½¿ç”¨æ–¹æ³•ã€‚ UINavigationBarï¼šhttp://my.oschina.net/u/2340880/blog/527706ã€‚ äºŒã€æ¥è¯´è¯´UINavigationItemItemï¼Œä»è‹±æ–‡ä¸Šæ¥ç†è§£ï¼Œå®ƒå¯ä»¥è§£é‡Šä¸ºä¸€ä¸ªé¡¹ç›®ï¼Œå› æ­¤ï¼Œitemä¸æ˜¯ä¸€ä¸ªç®€å•çš„labelæ ‡é¢˜ï¼Œä¹Ÿä¸æ˜¯ä¸€ä¸ªç®€å•çš„buttonæŒ‰é’®ï¼Œå®ƒæ˜¯å¯¼èˆªæ ä¸­ç®¡ç†çš„ä¸€ä¸ªé¡¹ç›®çš„æŠ½è±¡ã€‚è¯´èµ·æ¥æœ‰äº›éš¾äºç†è§£ï¼Œé€šè¿‡ä»£ç ï¼Œæˆ‘ä»¬å°±èƒ½å¾ˆå¥½çš„ç†è§£Itemçš„æ„ä¹‰ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªitemï¼Œç”¨UINavigationBarå¯¼èˆªæ pushå‡ºæ¥ï¼š 123 UINavigationItem * item = [[UINavigationItem alloc]initWithTitle:@&quot;title&quot;]; UINavigationBar * bar = [[UINavigationBar alloc]initWithFrame:CGRectMake(0, 0, 320, 64)]; [bar pushNavigationItem:item animated:YES]; æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨å¯¼èˆªæ ä¸Šçš„ä¸­é—´ï¼Œæœ‰titleè¿™æ ·ä¸€ä¸ªitemï¼š é™¤äº†åˆ›å»ºä¸€ä¸ªæ ‡é¢˜itemï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ›å»ºä¸€ä¸ªViewç±»å‹çš„itemï¼š 123 UIView * view = [[UIView alloc]initWithFrame:CGRectMake(0, 0, 30, 30)]; view.backgroundColor = [UIColor brownColor]; item.titleView = view; æ•ˆæœå¦‚ä¸‹ï¼š é€šè¿‡ä¸‹é¢çš„å±æ€§ï¼Œå¯ä»¥ç»™è¿™ä¸ªItemæ·»åŠ ä¸€ä¸ªè¯´æ˜æ–‡å­—ï¼Œè¿™æ®µæ–‡å­—ä¼šæ˜¾ç¤ºåœ¨itemçš„ä¸Šæ–¹ï¼š 1item.prompt= @&quot;æˆ‘æ˜¯navigationItemçš„è¯´æ˜æ–‡å­—&quot;; ä¸Šé¢æˆ‘ä»¬çœ‹åˆ°çš„è¿™äº›ï¼Œå®é™…ä¸Šåªæ˜¯ä¸€ä¸ªitemçš„ä¸€éƒ¨åˆ†ï¼Œitemè¿˜æœ‰è®¸å¤šå…¶ä»–çš„é™„ä»¶ï¼Œå¦‚æœæˆ‘ä»¬ä½¿å¯¼èˆªæ å†pushå‡ºä¸€ä¸ªitemï¼Œè¿™æ—¶å¯¼èˆªæ çš„å·¦è¾¹ä¼šå‡ºç°ä¸€ä¸ªè¿”å›æŒ‰é’®ï¼Œè¿™ä¸ªè¿”å›æŒ‰é’®å®é™…ä¸Šæ˜¯æ•°æ®ç¬¬ä¸€ä¸ªitemçš„ï¼Œæˆ‘ä»¬åšå¦‚ä¸‹çš„è®¾ç½®ï¼š 12345 UINavigationItem * item = [[UINavigationItem alloc]initWithTitle:@&quot;title&quot;]; UINavigationItem * item2 = [[UINavigationItem alloc]initWithTitle:@&quot;title2&quot;]; item.backBarButtonItem = [[UIBarButtonItem alloc]initWithTitle:@&quot;title1&quot; style:nil target:nil action:nil]; [bar pushNavigationItem:item animated:YES]; [bar pushNavigationItem:item2 animated:YES]; å¯ä»¥çœ‹å‡ºï¼Œè™½ç„¶å½“å‰pushå‡ºæ¥çš„itemæ˜¯item2ï¼Œä½†æ˜¯å·¦è¾¹çš„è¿”å›æŒ‰é’®æ˜¯å±äºitemçš„ã€‚è¿™é‡Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œè™½ç„¶backBarButtonItemçš„æ ‡é¢˜æˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰ï¼Œä½†æ˜¯æ–¹æ³•å’Œå…¶ä»–å±æ€§æˆ‘ä»¬éƒ½ä¸èƒ½å®šåˆ¶ï¼Œæ˜¯ç³»ç»Ÿå®ç°å¥½çš„ã€‚ å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è®¾ç½®åœ¨pushå‡ºæ¥æ–°çš„itemçš„æ—¶å€™ï¼Œéšè—å‰é¢çš„è¿”å›æŒ‰é’®ï¼Œä½¿ç”¨å¦‚ä¸‹å±æ€§ï¼š 12@property(nonatomic,assign) BOOL hidesBackButton;- (void)setHidesBackButton:(BOOL)hidesBackButton animated:(BOOL)animated; é»˜è®¤ä¸ºNOï¼Œè®¾ç½®ä¸ºYESå°†ä¼šéšè—è¿”å›æŒ‰é’®ã€‚ ä¸‰ã€å…³äºUIBarButtonItemä¸€ä¸ªUINavigationItemä¸­ï¼Œè¿˜å¯ä»¥åŒ…å«è®¸å¤šBarButtonItemï¼ŒBarButtonItemæ˜¯ä¸€ç³»åˆ—çš„æŒ‰é’®ï¼Œä¼šå‡ºç°åœ¨å¯¼èˆªæ çš„å·¦ä¾§æˆ–è€…å³ä¾§ã€‚ä¾‹å¦‚ï¼š 12 UIBarButtonItem * button = [[UIBarButtonItem alloc]initWithTitle:@&quot;æŒ‰é’®&quot; style:UIBarButtonItemStyleDone target:self action:@selector(click)]; item.leftBarButtonItem = button; è¿™ä¸ªbarButtonItemæ˜¯ä¸€ä¸ªæŒ‰é’®ï¼Œå¯ä»¥è§¦å‘ä¸€ä¸ªæ–¹æ³•ï¼Œè¿™æœ‰æ—¶å€™å¯¹æˆ‘ä»¬æ¥è¯´ååˆ†æœ‰ç”¨ã€‚ä½†æ˜¯æœ‰ä¸€ä¸ªä½ ä¸€å®šå‘ç°äº†ï¼Œå¦‚æœç»§ç»­pushå‡ºæ¥Itemï¼ŒåŸæ¥çš„è¿”å›æŒ‰é’®ä¸è§äº†ï¼Œæ˜¯å¦éšè—è¿”å›æŒ‰é’®ï¼Œç”±ä¸‹é¢è¿™ä¸ªå±æ€§æ§åˆ¶ï¼š 1item.leftItemsSupplementBackButton=YES; æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹æ³•è®¾ç½®å³è¾¹çš„æŒ‰é’®ï¼Œæˆ–è€…ç›´æ¥è®¾ç½®ä¸€ç»„æŒ‰é’®ï¼š 123456789@property(nullable, nonatomic,strong) UIBarButtonItem *leftBarButtonItem;@property(nullable, nonatomic,strong) UIBarButtonItem *rightBarButtonItem;- (void)setLeftBarButtonItem:(nullable UIBarButtonItem *)item animated:(BOOL)animated;- (void)setRightBarButtonItem:(nullable UIBarButtonItem *)item animated:(BOOL)animated;@property(nullable,nonatomic,copy) NSArray&lt;UIBarButtonItem *&gt; *leftBarButtonItems;@property(nullable,nonatomic,copy) NSArray&lt;UIBarButtonItem *&gt; *rightBarButtonItems;- (void)setLeftBarButtonItems:(nullable NSArray&lt;UIBarButtonItem *&gt; *)items animated:(BOOL)animated;- (void)setRightBarButtonItems:(nullable NSArray&lt;UIBarButtonItem *&gt; *)items animated:(BOOL)animated; å››ã€å†çœ‹UIBarButtonItemä¸Šé¢æˆ‘ä»¬äº†è§£åˆ°äº†ï¼Œä¸€ä¸ªNavigationItemåŸºæœ¬ä¸Šæ˜¯æœ‰ä¸‰å¤§éƒ¨åˆ†ç»„æˆçš„ï¼Œå½“å‰æ˜¾ç¤ºçš„éƒ¨åˆ†ï¼Œè¿”å›æŒ‰é’®éƒ¨åˆ†ï¼Œå’ŒButtonIteméƒ¨åˆ†ï¼ŒåŒæ ·å¯¹äºåˆ›å»ºå’Œè®¾ç½®UIBarButoonItemï¼Œä¹Ÿæœ‰å¾ˆå¤šæ–¹æ³•ä¾›æˆ‘ä»¬ä½¿ç”¨ã€‚ é¦–å…ˆæ˜¯åˆ›å»ºä¸åˆå§‹åŒ–çš„æ–¹æ³•ï¼š 1- (instancetype)initWithTitle:(nullable NSString *)title style:(UIBarButtonItemStyle)style target:(nullable id)target action:(nullable SEL)action; è¿™ä¸ªæ–¹æ³•é€šè¿‡ä¸€ä¸ªæ ‡é¢˜åˆ›å»ºButtonItemï¼Œå…¶ä¸­styleå‚æ•°å¯ä»¥è®¾ç½®ä¸€ä¸ªé£æ ¼ï¼Œæšä¸¾å¦‚ä¸‹ï¼š 1234typedef NS_ENUM(NSInteger, UIBarButtonItemStyle) &#123; UIBarButtonItemStylePlain, UIBarButtonItemStyleDone,&#125;; è¿™ä¸¤ç§é£æ ¼å·®åˆ«å¹¶ä¸å¤§ï¼Œå¦‚ä¸‹æ˜¯æ•ˆæœï¼ŒDoneé£æ ¼çš„å­—ä½“åŠ ç²—ä¸€äº›ï¼š æˆ‘ä»¬å› ä¸ºå¯ä»¥é€šè¿‡ä¸€ä¸ªå›¾ç‰‡æ¥åˆ›å»ºBarButtonItemï¼š 12- (instancetype)initWithImage:(nullable UIImage *)image style:(UIBarButtonItemStyle)style target:(nullable id)target action:(nullable SEL)action;- (instancetype)initWithImage:(nullable UIImage *)image landscapeImagePhone:(nullable UIImage *)landscapeImagePhone style:(UIBarButtonItemStyle)style target:(nullable id)target action:(nullable SEL)action; ä¸Šé¢è¿™ä¸¤ä¸ªæ–¹æ³•ä¸­ï¼Œç¬¬ä¸€ä¸ªæ–¹æ³•ä¸ä½¿ç”¨æ–‡å­—åˆ›å»ºçš„æ–¹æ³•ç±»ä¼¼ï¼Œç¬¬äºŒä¸ªæ–¹æ³•å¤šäº†ä¸€ä¸ªlandscapeImagePhoneçš„å‚æ•°ï¼Œè¿™ä¸ªå‚æ•°å¯ä»¥è®¾ç½®è®¾å¤‡æ¨ªå±æ—¶çš„å›¾ç‰‡ã€‚ æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰çš„Viewæ¥åˆ›å»ºBarButtonItemï¼š 1- (instancetype)initWithCustomView:(UIView *)customView; é™¤äº†ä¸Šé¢ä¸€äº›è‡ªå®šä¹‰çš„åˆ›å»ºæ–¹æ³•å¤–ï¼Œå¯¹äºBarButtonItemè¿™ä¸ªå¯¹è±¡ï¼Œç³»ç»Ÿä¹Ÿå°è£…å¥½äº†è®¸å¤šåŸç”Ÿçš„å¯ä»¥ä¾›æˆ‘ä»¬ä½¿ç”¨ï¼Œåˆ›å»ºçš„æ—¶å€™ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•ï¼š 1UIBarButtonItem * button = [[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemCamera target:self action:nil]; ä¸Šé¢çš„SystemItemæ˜¯ç³»ç»Ÿä¸ºæˆ‘ä»¬åšå¥½çš„è®¸å¤šbuttonItemçš„ç±»å‹ï¼Œæšä¸¾å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526typedef NS_ENUM(NSInteger, UIBarButtonSystemItem) &#123; UIBarButtonSystemItemDone,//æ˜¾ç¤ºå®Œæˆ UIBarButtonSystemItemCancel,//æ˜¾ç¤ºå–æ¶ˆ UIBarButtonSystemItemEdit, //æ˜¾ç¤ºç¼–è¾‘ UIBarButtonSystemItemSave, //æ˜¾ç¤ºä¿å­˜ UIBarButtonSystemItemAdd,//æ˜¾ç¤ºåŠ å· UIBarButtonSystemItemFlexibleSpace,//ä»€ä¹ˆéƒ½ä¸æ˜¾ç¤ºï¼Œå ä½ä¸€ä¸ªç©ºé—´ä½ç½® UIBarButtonSystemItemFixedSpace,//å’Œä¸Šä¸€ä¸ªç±»ä¼¼ UIBarButtonSystemItemCompose,//æ˜¾ç¤ºå†™å…¥æŒ‰é’® UIBarButtonSystemItemReply,//æ˜¾ç¤ºå¾ªç¯æŒ‰é’® UIBarButtonSystemItemAction,//æ˜¾ç¤ºæ´»åŠ¨æŒ‰é’® UIBarButtonSystemItemOrganize,//æ˜¾ç¤ºç»„åˆæŒ‰é’® UIBarButtonSystemItemBookmarks,//æ˜¾ç¤ºå›¾ä¹¦æŒ‰é’® UIBarButtonSystemItemSearch,//æ˜¾ç¤ºæŸ¥æ‰¾æŒ‰é’® UIBarButtonSystemItemRefresh,//æ˜¾ç¤ºåˆ·æ–°æŒ‰é’® UIBarButtonSystemItemStop,//æ˜¾ç¤ºåœæ­¢æŒ‰é’® UIBarButtonSystemItemCamera,//æ˜¾ç¤ºç›¸æœºæŒ‰é’® UIBarButtonSystemItemTrash,//æ˜¾ç¤ºç§»é™¤æŒ‰é’® UIBarButtonSystemItemPlay,//æ˜¾ç¤ºæ’­æ”¾æŒ‰é’® UIBarButtonSystemItemPause,//æ˜¾ç¤ºæš‚åœæŒ‰é’® UIBarButtonSystemItemRewind,//æ˜¾ç¤ºé€€åæŒ‰é’® UIBarButtonSystemItemFastForward,//æ˜¾ç¤ºå‰è¿›æŒ‰é’® UIBarButtonSystemItemUndo,//æ˜¾ç¤ºæ¶ˆé™¤æŒ‰é’® UIBarButtonSystemItemRedo ,//æ˜¾ç¤ºé‡åšæŒ‰é’® UIBarButtonSystemItemPageCurl ,//åœ¨toolä¸Šæœ‰æ•ˆ&#125;; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"iOSå¼€å‘UINavigationç³»åˆ—ä¸€â€”â€”å¯¼èˆªæ UINavigtionBar","slug":"148iOSå¼€å‘UINavigationç³»åˆ—ä¸€â€”â€”å¯¼èˆªæ UINavigtionBar","date":"2015-11-07T16:00:00.000Z","updated":"2021-07-05T07:53:24.699Z","comments":true,"path":"2015/11/08/148iOSå¼€å‘UINavigationç³»åˆ—ä¸€â€”â€”å¯¼èˆªæ UINavigtionBar/","link":"","permalink":"http://huishao.cc/2015/11/08/148iOSå¼€å‘UINavigationç³»åˆ—ä¸€â€”â€”å¯¼èˆªæ UINavigtionBar/","excerpt":"","text":"iOSå¼€å‘UINavigationç³»åˆ—ä¸€â€”â€”å¯¼èˆªæ UINavigtionBarä¸€ã€å¯¼èˆªæ çš„ä½¿ç”¨åœ¨iOSå¼€å‘ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨å¯¼èˆªæ§åˆ¶å™¨ï¼Œå¯¼èˆªæ§åˆ¶å™¨ä¸­å°è£…äº†ä¸€ä¸ªUINavigationBarï¼Œå®é™…ä¸Šï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ä¸ä½¿ç”¨å¯¼èˆªæ§åˆ¶å™¨çš„å‰æä¸‹ï¼Œå•ç‹¬ä½¿ç”¨å¯¼èˆªæ ï¼Œåœ¨UINavigationBarä¸­ï¼Œä¹Ÿæœ‰è®¸å¤šæˆ‘ä»¬å¯ä»¥å®šåˆ¶çš„å±æ€§ï¼Œç”¨èµ·æ¥ååˆ†æ–¹ä¾¿ã€‚ äºŒã€UINavigationBarçš„åˆ›å»ºå’Œé£æ ¼ç±»å‹å¯¼èˆªæ ç»§æ‰¿äºUIViewï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åƒåˆ›å»ºæ™®é€šè§†å›¾é‚£æ ·åˆ›å»ºå¯¼èˆªæ ï¼Œæ¯”å¦‚æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªé«˜åº¦ä¸º80çš„å¯¼èˆªæ ï¼Œå°†å…¶æ”¾åœ¨ViewControllerçš„å¤´éƒ¨ï¼Œä»£ç å¦‚ä¸‹ï¼š 12UINavigationBar *bar = [[UINavigationBar alloc]initWithFrame:CGRectMake(0, 0, 320, 80)];[self.view addSubview:bar]; æ•ˆæœå¦‚ä¸‹ï¼š æˆ‘ä»¬ä¹Ÿå¯ä»¥è®¾ç½®å¯¼èˆªæ çš„é£æ ¼å±æ€§ï¼Œä»iOS6ä¹‹åï¼ŒUINavigationBaré»˜è®¤ä¸ºåŠé€æ˜çš„æ ·å¼ï¼Œä»ä¸Šé¢ä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œç™½è‰²çš„å¯¼èˆªæ ä¸‹é¢é€å‡ºäº›è®¸èƒŒæ™¯çš„çº¢è‰²ã€‚å¯¼èˆªæ çš„é£æ ¼å±æ€§å¯ä»¥é€šè¿‡ä¸‹é¢çš„å±æ€§æ¥è®¾ç½®ï¼š 1@property(nonatomic,assign) UIBarStyle barStyle; UIBarStyleæ˜¯ä¸€ä¸ªæšä¸¾ï¼Œå…¶ä¸­å¤§éƒ¨åˆ†çš„æ ·å¼éƒ½å·²å¼ƒç”¨ï¼Œæœ‰æ•ˆæœçš„åªæœ‰å¦‚ä¸‹ä¸¤ä¸ªï¼š 1234typedef NS_ENUM(NSInteger, UIBarStyle) &#123; UIBarStyleDefault = 0,//é»˜è®¤ UIBarStyleBlack = 1,//é»‘è‰²&#125; é»˜è®¤çš„é£æ ¼å°±æ˜¯æˆ‘ä»¬ä¸Šé¢çœ‹åˆ°çš„ç™½è‰²çš„é£æ ¼ï¼Œé»‘è‰²çš„é£æ ¼æ•ˆæœç‘å¦‚ä¸‹ï¼š ä¸‰ã€å¯¼èˆªæ å¸¸ç”¨å±æ€§å’Œæ–¹æ³•ä»ä¸Šé¢æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒiOS6åå¯¼èˆªæ é»˜è®¤éƒ½æ˜¯åŠé€æ˜çš„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„boolå€¼æ¥è®¾ç½®è¿™ä¸ªå±æ€§ï¼Œè®¾ç½®ä¸ºNOï¼Œåˆ™å¯¼èˆªæ ä¸é€æ˜ï¼Œé»˜è®¤ä¸ºYESï¼š 1@property(nonatomic,assign,getter=isTranslucent) BOOL translucent; ä¸‹é¢ä¸€äº›æ–¹æ³•ç”¨äºè®¾ç½®NavigationBaråŠä¸Šé¢itemçš„é¢œè‰²ç›¸å…³å±æ€§ï¼š 1@property(null_resettable, nonatomic,strong) UIColor *tintColor; tintColorè¿™ä¸ªå±æ€§ä¼šå½±å“åˆ°å¯¼èˆªæ ä¸Šå·¦ä¾§popæŒ‰é’®çš„å›¾æ¡ˆé¢œè‰²å’Œå­—ä½“é¢œè‰²ï¼Œç³»ç»Ÿé»˜è®¤æ˜¯å¦‚ä¸‹é¢œè‰²ï¼š 1@property(nullable, nonatomic,strong) UIColor *barTintColor; BarTintColorç”¨äºè®¾ç½®å¯¼èˆªæ çš„èƒŒæ™¯è‰²ï¼Œè¿™ä¸ªå±æ€§è¢«è®¾ç½®åï¼ŒåŠé€æ˜çš„æ•ˆæœå°†å¤±æ•ˆï¼š 12- (void)setBackgroundImage:(nullable UIImage *)backgroundImage forBarMetrics:(UIBarMetrics)barMetrics NS_AVAILABLE_IOS(5_0) UI_APPEARANCE_SELECTOR;- (nullable UIImage *)backgroundImageForBarMetrics:(UIBarMetrics)barMetrics; ä¸Šé¢ä¸¤ä¸ªæ–¹æ³•ç”¨äºè®¾ç½®å’Œè·å–å¯¼èˆªæ çš„èƒŒæ™¯å›¾æ¡ˆï¼Œè¿™é‡Œéœ€è¦æ³¨æ„ï¼Œé»˜è®¤èƒŒæ™¯å›¾æ¡ˆæ˜¯ä¸åšç¼©æ”¾å¤„ç†çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨çš„å›¾ç‰‡å°ºå¯¸è¦å’Œå¯¼èˆªæ å°ºå¯¸åŒ¹é…ï¼Œè¿™é‡Œé¢è¿˜æœ‰ä¸€ä¸ªUIBarMetricså‚æ•°ï¼Œè¿™ä¸ªå‚æ•°è®¾ç½®è®¾å¤‡çš„çŠ¶æ€ï¼Œå¦‚ä¸‹ï¼š 1234typedef NS_ENUM(NSInteger, UIBarMetrics) &#123; UIBarMetricsDefault,//æ­£å¸¸ç«–å±çŠ¶æ€ UIBarMetricsCompact,//æ¨ªå±çŠ¶æ€&#125;; 1234//è®¾ç½®å¯¼èˆªæ çš„é˜´å½±å›¾ç‰‡@property(nullable, nonatomic,strong) UIImage *shadowImage;//è®¾ç½®å¯¼èˆªæ çš„æ ‡é¢˜å­—ä½“å±æ€§@property(nullable,nonatomic,copy) NSDictionary&lt;NSString *,id&gt; *titleTextAttributes; æ ‡é¢˜å­—ä½“å±æ€§ä¼šå½±å“åˆ°å¯¼èˆªæ çš„ä¸­é—´æ ‡é¢˜ï¼Œå¦‚ä¸‹ï¼š 1 bar.titleTextAttributes = @&#123;NSForegroundColorAttributeName:[UIColor redColor]&#125;; æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ä¸‹é¢çš„å±æ€§è®¾ç½®å¯¼èˆªæ æ ‡é¢˜çš„ç«–ç›´ä½ç½®åç§»ï¼š 12- (void)setTitleVerticalPositionAdjustment:(CGFloat)adjustment forBarMetrics:(UIBarMetrics)barMetrics;- (CGFloat)titleVerticalPositionAdjustmentForBarMetrics:(UIBarMetrics)barMetrics; è¿˜æœ‰ä¸€ä¸ªç»†èŠ‚ï¼Œå¯¼èˆªæ å·¦ä¾§popæŒ‰é’®çš„å›¾æ¡ˆé»˜è®¤æ˜¯ä¸€ä¸ªç®­å¤´ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•ä¿®æ”¹ï¼š 12@property(nullable,nonatomic,strong) UIImage *backIndicatorImage;@property(nullable,nonatomic,strong) UIImage *backIndicatorTransitionMaskImage; å››ã€å¯¼èˆªæ ä¸­itemçš„pushä¸popæ“ä½œUINavigationBarä¸Šé¢ä¸åªæ˜¯ç®€å•çš„æ˜¾ç¤ºæ ‡é¢˜ï¼Œå®ƒä¹Ÿå°†æ ‡é¢˜è¿›è¡Œäº†å †æ ˆçš„ç®¡ç†ï¼Œæ¯ä¸€ä¸ªæ ‡é¢˜æŠ½è±¡ä¸ºçš„å¯¹è±¡åœ¨iOSç³»ç»Ÿä¸­æ˜¯UINavigationItemå¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡pushä¸popæ“ä½œç®¡ç†itemç»„ã€‚ 123456789101112//å‘æ ˆä¸­æ·»åŠ ä¸€ä¸ªitemï¼Œä¸Šä¸€ä¸ªitemä¼šè¢«æ¨å‘å¯¼èˆªæ çš„å·¦ä¾§ï¼Œå˜ä¸ºpopæŒ‰é’®ï¼Œä¼šæœ‰ä¸€ä¸ªåŠ¨ç”»æ•ˆæœ- (void)pushNavigationItem:(UINavigationItem *)item animated:(BOOL)animated;//popä¸€ä¸ªitem- (nullable UINavigationItem *)popNavigationItemAnimated:(BOOL)animated; //å½“å‰pushåˆ°æœ€ä¸Šå±‚çš„item@property(nullable, nonatomic,readonly,strong) UINavigationItem *topItem;//ä»…æ¬¡äºæœ€ä¸Šå±‚çš„itemï¼Œä¸€èˆ¬å¼è¢«æ¨å‘å¯¼èˆªæ å·¦ä¾§çš„item@property(nullable, nonatomic,readonly,strong) UINavigationItem *backItem;//è·å–å †æ ˆä¸­æ‰€æœ‰itemçš„æ•°ç»„@property(nullable,nonatomic,copy) NSArray&lt;UINavigationItem *&gt; *items;//è®¾ç½®ä¸€ç»„item- (void)setItems:(nullable NSArray&lt;UINavigationItem *&gt; *)items animated:(BOOL)animated; äº”ã€UINavigationBarDelegateåœ¨UINavigationBarä¸­ï¼Œè¿˜æœ‰å¦‚ä¸‹ä¸€ä¸ªå±æ€§ï¼š 1@property(nullable,nonatomic,weak) id&lt;UINavigationBarDelegate&gt; delegate; é€šè¿‡ä»£ç†ï¼Œæˆ‘ä»¬å¯ä»¥ç›‘æ§å¯¼èˆªæ çš„ä¸€äº›pushä¸popæ“ä½œï¼š 12345678//itemå°†è¦pushçš„æ—¶å€™è°ƒç”¨ï¼Œè¿”å›NOï¼Œåˆ™ä¸èƒ½push- (BOOL)navigationBar:(UINavigationBar *)navigationBar shouldPushItem:(UINavigationItem *)item; //itemå·²ç»pushåè°ƒç”¨- (void)navigationBar:(UINavigationBar *)navigationBar didPushItem:(UINavigationItem *)item; //itemå°†è¦popæ—¶è°ƒç”¨ï¼Œè¿”å›NOï¼Œä¸èƒ½pop - (BOOL)navigationBar:(UINavigationBar *)navigationBar shouldPopItem:(UINavigationItem *)item; //itemå·²ç»popåè°ƒç”¨ - (void)navigationBar:(UINavigationBar *)navigationBar didPopItem:(UINavigationItem *)item; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"iOSå¼€å‘ä¸­çš„æ‰‹åŠ¿ä½“ç³»â€”â€”UIGestureRecognizeråˆ†æåŠå…¶å­ç±»çš„ä½¿ç”¨","slug":"147iOSå¼€å‘ä¸­çš„æ‰‹åŠ¿ä½“ç³»â€”â€”UIGestureRecognizeråˆ†æåŠå…¶å­ç±»çš„ä½¿ç”¨","date":"2015-11-05T16:00:00.000Z","updated":"2021-07-05T07:49:46.146Z","comments":true,"path":"2015/11/06/147iOSå¼€å‘ä¸­çš„æ‰‹åŠ¿ä½“ç³»â€”â€”UIGestureRecognizeråˆ†æåŠå…¶å­ç±»çš„ä½¿ç”¨/","link":"","permalink":"http://huishao.cc/2015/11/06/147iOSå¼€å‘ä¸­çš„æ‰‹åŠ¿ä½“ç³»â€”â€”UIGestureRecognizeråˆ†æåŠå…¶å­ç±»çš„ä½¿ç”¨/","excerpt":"","text":"iOSå¼€å‘ä¸­çš„æ‰‹åŠ¿ä½“ç³»â€”â€”UIGestureRecognizeråˆ†æåŠå…¶å­ç±»çš„ä½¿ç”¨ä¸€ã€å¼•è¨€åœ¨iOSç³»ç»Ÿä¸­ï¼Œæ‰‹åŠ¿æ˜¯è¿›è¡Œç”¨æˆ·äº¤äº’çš„é‡è¦æ–¹å¼ï¼Œé€šè¿‡UIGestureRecognizerç±»ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾çš„åˆ›å»ºå‡ºå„ç§æ‰‹åŠ¿åº”ç”¨äºappä¸­ã€‚å…³äºUIGestureRecognizerç±»ï¼Œæ˜¯å¯¹iOSä¸­çš„äº‹ä»¶ä¼ é€’æœºåˆ¶é¢å‘åº”ç”¨çš„å°è£…ï¼Œå°†æ‰‹åŠ¿æ¶ˆæ¯çš„ä¼ é€’æŠ½è±¡ä¸ºäº†å¯¹è±¡ã€‚æœ‰å…³æ¶ˆæ¯ä¼ é€’çš„ä¸€äº›è®¨è®ºï¼Œåœ¨å‰é¢çš„åšå®¢ä¸­æœ‰æåˆ°ï¼š iOSäº‹ä»¶å“åº”æ§åˆ¶ï¼šhttp://my.oschina.net/u/2340880/blog/396161ã€‚ äºŒã€æ‰‹åŠ¿çš„æŠ½è±¡ç±»â€”â€”UIGestureRecognizerUIGestureRecognizerå°†ä¸€äº›å’Œæ‰‹åŠ¿æ“ä½œç›¸å…³çš„æ–¹æ³•æŠ½è±¡äº†å‡ºæ¥ï¼Œä½†å®ƒæœ¬èº«å¹¶ä¸å®ç°ä»€ä¹ˆæ‰‹åŠ¿ï¼Œå› æ­¤ï¼Œåœ¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¸ä¼šç›´æ¥ä½¿ç”¨UIGestureRecognizerçš„å¯¹è±¡ï¼Œè€Œæ˜¯é€šè¿‡å…¶å­ç±»è¿›è¡Œå®ä¾‹åŒ–ï¼ŒiOSç³»ç»Ÿç»™æˆ‘ä»¬æä¾›äº†è®¸å¤šç”¨äºæˆ‘ä»¬å®ä¾‹çš„å­ç±»ï¼Œè¿™äº›æˆ‘ä»¬åé¢å†è¯´ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹ï¼ŒUIGestureRecognizerä¸­æŠ½è±¡å‡ºäº†å“ªäº›æ–¹æ³•ã€‚ 1ã€ç»Ÿä¸€çš„åˆå§‹åŒ–æ–¹æ³•UIGestureRecognizerç±»ä¸ºå…¶å­ç±»å‡†å¤‡å¥½äº†ä¸€ä¸ªç»Ÿä¸€çš„åˆå§‹åŒ–æ–¹æ³•ï¼Œæ— è®ºä»€ä¹ˆæ ·çš„æ‰‹åŠ¿åŠ¨ä½œï¼Œå…¶æ‰§è¡Œçš„ç»“æœéƒ½æ˜¯ä¸€æ ·çš„ï¼šè§¦å‘ä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•è¿›è¡Œç»Ÿä¸€çš„åˆå§‹åŒ–ï¼š 1- (instancetype)initWithTarget:(nullable id)target action:(nullable SEL)action; å½“ç„¶ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨alloc-initçš„æ–¹å¼ï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä¸‹é¢çš„æ–¹æ³•å¯ä»¥ä¸ºæ‰‹åŠ¿æ·»åŠ è§¦å‘çš„selectorï¼š 1- (void)addTarget:(id)target action:(SEL)action; ä¸ä¹‹ç›¸å¯¹åº”çš„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†ä¸€ä¸ªselectorä»å…¶æ‰‹åŠ¿å¯¹è±¡ä¸Šç§»é™¤ï¼š 1- (void)removeTarget:(nullable id)target action:(nullable SEL)action; ä¸Šé¢ä¸¤ä¸ªæ–¹æ³•æ˜¯ååˆ†æœ‰æ„æ€çš„ï¼Œå› ä¸ºaddTargetæ–¹å¼çš„å­˜åœ¨ï¼ŒiOSç³»ç»Ÿå…è®¸ä¸€ä¸ªæ‰‹åŠ¿å¯¹è±¡å¯ä»¥æ·»åŠ å¤šä¸ªselectorè§¦å‘æ–¹æ³•ï¼Œå¹¶ä¸”è§¦å‘çš„æ—¶å€™ï¼Œæ‰€æœ‰æ·»åŠ çš„selectoréƒ½ä¼šè¢«æ‰§è¡Œï¼Œæˆ‘ä»¬ä»¥ç‚¹å‡»æ‰‹åŠ¿ç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view, typically from a nib. UITapGestureRecognizer * ges = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(click:)]; [ges addTarget:self action:@selector(haha)]; [self.view addGestureRecognizer:ges];&#125;-(void)click:(UIGestureRecognizer *)ges&#123; NSLog(@&quot;ç¬¬ä¸€ä¸ªæ‰‹åŠ¿çš„è§¦å‘æ–¹æ³•&quot;); &#125;-(void)haha&#123; NSLog(@&quot;haha&quot;);&#125; è¿è¡Œåç‚¹å‡»å±å¹•ï¼Œæ‰“å°å¦‚ä¸‹ï¼Œè¯´æ˜ä¸¤ä¸ªæ–¹æ³•éƒ½è§¦å‘äº†ï¼š 2ã€æ‰‹åŠ¿çŠ¶æ€UIgestureRecognizerç±»ä¸­æœ‰å¦‚ä¸‹ä¸€ä¸ªå±æ€§ï¼Œé‡Œé¢æšä¸¾äº†ä¸€äº›æ‰‹åŠ¿çš„å½“å‰çŠ¶æ€: 1@property(nonatomic,readonly) UIGestureRecognizerState state; æšä¸¾å€¼å¦‚ä¸‹ï¼š 123456789typedef NS_ENUM(NSInteger, UIGestureRecognizerState) &#123; UIGestureRecognizerStatePossible, // é»˜è®¤çš„çŠ¶æ€ï¼Œè¿™ä¸ªæ—¶å€™çš„æ‰‹åŠ¿å¹¶æ²¡æœ‰å…·ä½“çš„æƒ…å½¢çŠ¶æ€ UIGestureRecognizerStateBegan, // æ‰‹åŠ¿å¼€å§‹è¢«è¯†åˆ«çš„çŠ¶æ€ UIGestureRecognizerStateChanged, // æ‰‹åŠ¿è¯†åˆ«å‘ç”Ÿæ”¹å˜çš„çŠ¶æ€ UIGestureRecognizerStateEnded, // æ‰‹åŠ¿è¯†åˆ«ç»“æŸï¼Œå°†ä¼šæ‰§è¡Œè§¦å‘çš„æ–¹æ³• UIGestureRecognizerStateCancelled, // æ‰‹åŠ¿è¯†åˆ«å–æ¶ˆ UIGestureRecognizerStateFailed, // è¯†åˆ«å¤±è´¥ï¼Œæ–¹æ³•å°†ä¸ä¼šè¢«è°ƒç”¨ UIGestureRecognizerStateRecognized = UIGestureRecognizerStateEnded &#125;; 3ã€å¸¸ç”¨å±æ€§å’Œæ–¹æ³•123456789101112//è®¾ç½®ä»£ç†ï¼Œå…·ä½“çš„åè®®åé¢ä¼šè¯´@property(nullable,nonatomic,weak) id &lt;UIGestureRecognizerDelegate&gt; delegate; //è®¾ç½®æ‰‹åŠ¿æ˜¯å¦æœ‰æ•ˆ@property(nonatomic, getter=isEnabled) BOOL enabled;//è·å–æ‰‹åŠ¿æ‰€åœ¨çš„view@property(nullable, nonatomic,readonly) UIView *view; //è·å–è§¦å‘è§¦æ‘¸çš„ç‚¹- (CGPoint)locationInView:(nullable UIView*)view; //è®¾ç½®è§¦æ‘¸ç‚¹æ•°- (NSUInteger)numberOfTouches; //è·å–æŸä¸€ä¸ªè§¦æ‘¸ç‚¹çš„è§¦æ‘¸ä½ç½®- (CGPoint)locationOfTouch:(NSUInteger)touchIndex inView:(nullable UIView*)view; ä¸‹é¢çš„å‡ ä¸ªBOOLå€¼çš„å±æ€§ï¼Œå¯¹äºæ‰‹åŠ¿è§¦å‘çš„æ§åˆ¶ä¹Ÿååˆ†é‡è¦ï¼š ï¼ˆ1ï¼‰1@property(nonatomic) BOOL cancelsTouchesInView; ä¸Šé¢çš„å±æ€§é»˜è®¤ä¸ºYESï¼Œå½“è¿™ä¸ªå±æ€§è®¾ç½®ä¸ºYESæ—¶ï¼Œå¦‚æœè¯†åˆ«åˆ°äº†æ‰‹åŠ¿ï¼Œç³»ç»Ÿå°†ä¼šå‘é€touchesCancelled:withEvent:æ¶ˆæ¯åœ¨å…¶æ—¶é—´ä¼ é€’é“¾ä¸Šï¼Œç»ˆæ­¢è§¦æ‘¸äº‹ä»¶çš„ä¼ é€’ï¼Œè®¾ç½®ä¸ºNOï¼Œåˆ™ä¸ä¼šç»ˆæ­¢äº‹ä»¶çš„ä¼ é€’ï¼Œä¸¾ä¸ªä¾‹å­æ¥è¯´ï¼Œå¯èƒ½ä¼šæ›´åŠ æ¸…æ¥šä¸€äº›å¦‚ä¸‹ï¼š 123456789101112- (void)viewDidLoad &#123; [super viewDidLoad]; UIPanGestureRecognizer * ges = [[UIPanGestureRecognizer alloc]initWithTarget:self action:@selector(click:)];; [self.view addGestureRecognizer:ges]; ges.cancelsTouchesInView=NO;&#125;-(void)touchesMoved:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event&#123; NSLog(@&quot;123&quot;);&#125;-(void)click:(UIGestureRecognizer *)ges&#123; NSLog(@&quot;ç¬¬ä¸€ä¸ªæ‰‹åŠ¿çš„è§¦å‘æ–¹æ³•&quot;);&#125; ä¸Šé¢æˆ‘ä»¬ä½¿ç”¨äº†æ‹–æ‹½æ‰‹åŠ¿å’ŒtouchesMovedä¸¤ä¸ªè§¦å‘æ–¹å¼ï¼Œå½“æˆ‘ä»¬æŠŠcancelTouchesInViewè®¾ç½®ä¸ºNOæ—¶ï¼Œåœ¨å±å¹•ä¸Šæ»‘åŠ¨ï¼Œä¼šå‘ç°ä¸¤ç§æ–¹å¼éƒ½åœ¨è§¦å‘ï¼Œæ‰“å°å¦‚ä¸‹ï¼š å¦‚æœæˆ‘ä»¬å°†cancelTouchesInViewæ”¹ä¸ºYESï¼Œå½“æ‰‹åŠ¿è§¦å‘æ—¶ï¼Œå°†å–æ¶ˆè§¦æ‘¸æ¶ˆæ¯çš„è§¦å‘ï¼š ï¼ˆ2ï¼‰1@property(nonatomic) BOOL delaysTouchesBegan; é€šè¿‡ä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ä¸€ä¸ªæ‰‹åŠ¿è§¦å‘ä¹‹å‰ï¼Œæ˜¯ä¼šä¸€å¹¶å‘æ¶ˆæ¯ç»™äº‹ä»¶ä¼ é€’é“¾çš„ï¼ŒdelaysTouchesBganå±æ€§ç”¨äºæ§åˆ¶è¿™ä¸ªæ¶ˆæ¯çš„ä¼ é€’æ—¶æœºï¼Œé»˜è®¤è¿™ä¸ªå±æ€§ä¸ºNOï¼Œæ­¤æ—¶åœ¨è§¦æ‘¸å¼€å§‹çš„æ—¶å€™ï¼Œå°±ä¼šå‘æ¶ˆæ¯ç»™äº‹ä»¶ä¼ é€’é“¾ï¼Œå¦‚æœæˆ‘ä»¬è®¾ç½®ä¸ºYESï¼Œåœ¨è§¦æ‘¸æ²¡æœ‰è¢«è¯†åˆ«å¤±è´¥å‰ï¼Œéƒ½ä¸ä¼šç»™äº‹ä»¶ä¼ é€’é“¾å‘é€æ¶ˆæ¯ã€‚ ï¼ˆ3ï¼‰1@property(nonatomic) BOOL delaysTouchesEnded; è¿™ä¸ªå±æ€§è®¾ç½®æ‰‹åŠ¿è¯†åˆ«ç»“æŸåï¼Œæ˜¯ç«‹åˆ»å‘é€touchesEndedæ¶ˆæ¯åˆ°äº‹ä»¶ä¼ é€’é“¾æˆ–è€…ç­‰å¾…ä¸€ä¸ªå¾ˆçŸ­çš„æ—¶é—´åï¼Œå¦‚æœæ²¡æœ‰æ¥æ”¶åˆ°æ–°çš„æ‰‹åŠ¿è¯†åˆ«ä»»åŠ¡ï¼Œå†å‘é€ã€‚ 4ã€æ‰‹åŠ¿é—´çš„äº’æ–¥å¤„ç†æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼ŒåŒä¸€ä¸ªViewä¸Šæ˜¯å¯ä»¥æ·»åŠ å¤šä¸ªæ‰‹åŠ¿å¯¹è±¡çš„ï¼Œé»˜è®¤è¿™ä¸ªæ‰‹åŠ¿æ˜¯äº’æ–¥çš„ï¼Œä¸€ä¸ªæ‰‹åŠ¿è§¦å‘äº†å°±ä¼šé»˜è®¤å±è”½å…¶ä»–ç›¸ä¼¼çš„æ‰‹åŠ¿åŠ¨ä½œï¼Œä¾‹å¦‚ï¼š 1234567891011121314151617181920212223242526- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view, typically from a nib. UITapGestureRecognizer * ges = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(click:)];; //view.backgroundColor = [UIColor redColor]; //ges.delegate=self; [self.view addGestureRecognizer:ges]; UITapGestureRecognizer * ges2 = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(click1:)];// ges2.delegate=self; [self.view addGestureRecognizer:ges2];&#125;-(void)click:(UIGestureRecognizer *)ges&#123; NSLog(@&quot;ç¬¬ä¸€ä¸ªæ‰‹åŠ¿çš„è§¦å‘æ–¹æ³•&quot;); &#125;-(void)click1:(UIGestureRecognizer *)ges1&#123; NSLog(@&quot;ç¬¬äºŒä¸ªæ‰‹åŠ¿çš„è§¦å‘æ–¹æ³•&quot;); &#125; æˆ‘ä»¬æ·»åŠ çš„ä¸¤ä¸ªæ‰‹åŠ¿éƒ½æ˜¯å•æœºæ‰‹åŠ¿ï¼Œä¼šäº§ç”Ÿå†²çªï¼Œè§¦å‘æ˜¯å¾ˆéšæœºçš„ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è®¾ç½®ä¸€ä¸‹å½“æ‰‹åŠ¿äº’æ–¥æ—¶è¦ä¼˜å…ˆè§¦å‘çš„æ‰‹åŠ¿ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„æ–¹æ³•ï¼š 1- (void)requireGestureRecognizerToFail:(UIGestureRecognizer *)otherGestureRecognizer; è¿™ä¸ªæ–¹æ³•ä¸­ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯éœ€è¦æ—¶æ•ˆçš„æ‰‹åŠ¿ï¼Œç¬¬äºŒä¸ªæ˜¯ç”Ÿæ•ˆçš„æ‰‹åŠ¿ã€‚ ä¸‰ã€UIGestureRecognizerDelegateå‰é¢æˆ‘ä»¬æåˆ°è¿‡å…³äºæ‰‹åŠ¿å¯¹è±¡çš„åè®®ä»£ç†ï¼Œé€šè¿‡ä»£ç†çš„å›è°ƒï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œè‡ªå®šä¹‰æ‰‹åŠ¿ï¼Œä¹Ÿå¯ä»¥å¤„ç†ä¸€äº›å¤æ‚çš„æ‰‹åŠ¿å…³ç³»ï¼Œå…¶ä¸­æ–¹æ³•å¦‚ä¸‹ï¼š 1234567891011//æ‰‹æŒ‡è§¦æ‘¸å±å¹•åå›è°ƒçš„æ–¹æ³•ï¼Œè¿”å›NOåˆ™ä¸å†è¿›è¡Œæ‰‹åŠ¿è¯†åˆ«ï¼Œæ–¹æ³•è§¦å‘ç­‰- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch;//å¼€å§‹è¿›è¡Œæ‰‹åŠ¿è¯†åˆ«æ—¶è°ƒç”¨çš„æ–¹æ³•ï¼Œè¿”å›NOåˆ™ç»“æŸï¼Œä¸å†è§¦å‘æ‰‹åŠ¿- (BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer;//æ˜¯å¦æ”¯æŒå¤šæ—¶å€™è§¦å‘ï¼Œè¿”å›YESï¼Œåˆ™å¯ä»¥å¤šä¸ªæ‰‹åŠ¿ä¸€èµ·è§¦å‘æ–¹æ³•ï¼Œè¿”å›NOåˆ™ä¸ºäº’æ–¥- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer;//ä¸‹é¢è¿™ä¸ªä¸¤ä¸ªæ–¹æ³•ä¹Ÿæ˜¯ç”¨æ¥æ§åˆ¶æ‰‹åŠ¿çš„äº’æ–¥æ‰§è¡Œçš„//è¿™ä¸ªæ–¹æ³•è¿”å›YESï¼Œç¬¬ä¸€ä¸ªæ‰‹åŠ¿å’Œç¬¬äºŒä¸ªäº’æ–¥æ—¶ï¼Œç¬¬ä¸€ä¸ªä¼šå¤±æ•ˆ- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRequireFailureOfGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer NS_AVAILABLE_IOS(7_0);//è¿™ä¸ªæ–¹æ³•è¿”å›YESï¼Œç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªäº’æ–¥æ—¶ï¼Œç¬¬äºŒä¸ªä¼šå¤±æ•ˆ- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldBeRequiredToFailByGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer NS_AVAILABLE_IOS(7_0); å››ã€ç‚¹å‡»æ‰‹åŠ¿â€”â€”UITapGestureRecognizerç‚¹å‡»æ‰‹åŠ¿ååˆ†ç®€å•ï¼Œæ”¯æŒå•å‡»å’Œå¤šæ¬¡ç‚¹å‡»ï¼Œåœ¨æˆ‘ä»¬æ‰‹æŒ‡è§¦æ‘¸å±å¹•å¹¶æŠ¬èµ·æ‰‹æŒ‡æ—¶ä¼šè¿›è¡Œè§¦å‘ï¼Œå…¶ä¸­æœ‰å¦‚ä¸‹ä¸¤ä¸ªå±æ€§æˆ‘ä»¬å¯ä»¥è¿›è¡Œè®¾ç½®ï¼š 1234//è®¾ç½®ç‚¹å‡»æ¬¡æ•°ï¼Œé»˜è®¤ä¸ºå•å‡»@property (nonatomic) NSUInteger numberOfTapsRequired; //è®¾ç½®åŒæ—¶ç‚¹å‡»çš„æ‰‹æŒ‡æ•°@property (nonatomic) NSUInteger numberOfTouchesRequired; äº”ã€æåˆæ‰‹åŠ¿â€”â€”UIPinchGestureRecognizeræåˆæ‰‹åŠ¿æ˜¯å½“æˆ‘ä»¬åŒæŒ‡æåˆå’Œæ‰©å¼ ä¼šè§¦å‘åŠ¨ä½œçš„æ‰‹åŠ¿ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®çš„å±æ€§å¦‚ä¸‹ï¼š 1234//è®¾ç½®ç¼©æ”¾æ¯”ä¾‹@property (nonatomic) CGFloat scale; //è®¾ç½®æåˆé€Ÿåº¦@property (nonatomic,readonly) CGFloat velocity; å…­ã€æ‹–æ‹½æ‰‹åŠ¿â€”â€”UIPanGestureRecognzerå½“æˆ‘ä»¬ç‚¹ä¸­è§†å›¾è¿›è¡Œæ…¢é€Ÿæ‹–æ‹½æ—¶ä¼šè§¦å‘æ‹–æ‹½æ‰‹åŠ¿çš„æ–¹æ³•ã€‚ 12345678910//è®¾ç½®è§¦å‘æ‹–æ‹½çš„æœ€å°‘è§¦æ‘¸ç‚¹ï¼Œé»˜è®¤ä¸º1@property (nonatomic) NSUInteger minimumNumberOfTouches; //è®¾ç½®è§¦å‘æ‹–æ‹½çš„æœ€å¤šè§¦æ‘¸ç‚¹@property (nonatomic) NSUInteger maximumNumberOfTouches; //è·å–å½“å‰ä½ç½®- (CGPoint)translationInView:(nullable UIView *)view; //è®¾ç½®å½“å‰ä½ç½®- (void)setTranslation:(CGPoint)translation inView:(nullable UIView *)view;//è®¾ç½®æ‹–æ‹½é€Ÿåº¦- (CGPoint)velocityInView:(nullable UIView *)view; ä¸ƒã€æ»‘åŠ¨æ‰‹åŠ¿â€”â€”UISwipeGestureRecognizeræ»‘åŠ¨æ‰‹åŠ¿å’Œæ‹–æ‹½æ‰‹åŠ¿çš„ä¸åŒä¹‹å¤„åœ¨äºæ»‘åŠ¨æ‰‹åŠ¿æ›´å¿«ï¼Œæ‹–æ‹½æ¯”è¾ƒæ…¢ã€‚ 1234567891011//è®¾ç½®è§¦å‘æ»‘åŠ¨æ‰‹åŠ¿çš„è§¦æ‘¸ç‚¹æ•°@property(nonatomic) NSUInteger numberOfTouchesRequired; //è®¾ç½®æ»‘åŠ¨æ–¹å‘@property(nonatomic) UISwipeGestureRecognizerDirection direction; //æšä¸¾å¦‚ä¸‹typedef NS_OPTIONS(NSUInteger, UISwipeGestureRecognizerDirection) &#123; UISwipeGestureRecognizerDirectionRight = 1 &lt;&lt; 0, UISwipeGestureRecognizerDirectionLeft = 1 &lt;&lt; 1, UISwipeGestureRecognizerDirectionUp = 1 &lt;&lt; 2, UISwipeGestureRecognizerDirectionDown = 1 &lt;&lt; 3&#125;; å…«ã€æ—‹è½¬æ‰‹åŠ¿â€”â€”UIRotationGestureRecognizerè¿›è¡Œæ—‹è½¬åŠ¨ä½œæ—¶è§¦å‘æ‰‹åŠ¿æ–¹æ³•ã€‚ 1234//è®¾ç½®æ—‹è½¬è§’åº¦@property (nonatomic) CGFloat rotation;//è®¾ç½®æ—‹è½¬é€Ÿåº¦ @property (nonatomic,readonly) CGFloat velocity; ä¹ã€é•¿æŒ‰æ‰‹åŠ¿â€”â€”UILongPressGestureRecognizerè¿›è¡Œé•¿æŒ‰çš„æ—¶å€™è§¦å‘çš„æ‰‹åŠ¿æ–¹æ³•ã€‚ 12345678//è®¾ç½®è§¦å‘å‰çš„ç‚¹å‡»æ¬¡æ•°@property (nonatomic) NSUInteger numberOfTapsRequired; //è®¾ç½®è§¦å‘çš„è§¦æ‘¸ç‚¹æ•°@property (nonatomic) NSUInteger numberOfTouchesRequired; //è®¾ç½®æœ€çŸ­çš„é•¿æŒ‰æ—¶é—´@property (nonatomic) CFTimeInterval minimumPressDuration; //è®¾ç½®åœ¨æŒ‰è§¦æ—¶æ—¶å…è®¸ç§»åŠ¨çš„æœ€å¤§è·ç¦» é»˜è®¤ä¸º10åƒç´ @property (nonatomic) CGFloat allowableMovement; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSä¸­UITableViewControllerè‡ªå¸¦çš„åˆ·æ–°æ§ä»¶","slug":"146iOSä¸­UITableViewControllerè‡ªå¸¦çš„åˆ·æ–°æ§ä»¶","date":"2015-11-04T16:00:00.000Z","updated":"2021-07-05T07:47:23.177Z","comments":true,"path":"2015/11/05/146iOSä¸­UITableViewControllerè‡ªå¸¦çš„åˆ·æ–°æ§ä»¶/","link":"","permalink":"http://huishao.cc/2015/11/05/146iOSä¸­UITableViewControllerè‡ªå¸¦çš„åˆ·æ–°æ§ä»¶/","excerpt":"","text":"iOSä¸­UITableViewControllerè‡ªå¸¦çš„åˆ·æ–°æ§ä»¶ä¸€ã€å¼•è¨€åœ¨iOSå¼€å‘ä¸­ï¼Œä½¿ç”¨tableViewçš„ç•Œé¢ï¼Œå¤§å¤šä¼šç”¨åˆ°ä¸€ä¸ªä¸‹æ‹‰åˆ·æ–°çš„çš„æ§ä»¶ï¼Œç¬¬ä¸‰æ–¹åº“ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šé€‰æ‹©æ¯”è¾ƒå¥½ç”¨çš„MJRefreshï¼Œå…¶å®ï¼Œåœ¨iOS6ä¹‹åï¼Œç³»ç»Ÿä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªåŸç”Ÿçš„åˆ·æ–°æ§ä»¶ï¼Œä½¿ç”¨èµ·æ¥éå¸¸æ–¹ä¾¿ï¼Œåªæ˜¯åˆ¶å®šæ€§ä¸å¼ºï¼Œå¦‚æœæˆ‘ä»¬æ²¡æœ‰å¤æ‚çš„éœ€æ±‚ï¼Œä½¿ç”¨UIRefreshControlä¹Ÿæ˜¯ä¸é”™çš„ä¸€ä¸ªé€‰æ‹©ã€‚ äºŒã€UITableViewControllerç›¸å¯¹äºUIViewControllerï¼ŒUITableViewControlleråªæ˜¯åœ¨å†…éƒ¨ä¸ºæˆ‘ä»¬å°è£…å¥½äº†ä¸€ä¸ªUITableViewï¼Œå¹¶ä¸”éµå®ˆå¥½äº†ç›¸å…³çš„åè®®ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨å…¶ä¸­å®ç°æ–¹æ³•å³å¯ã€‚UITableViewControlleræ›´å¤šçš„æ–¹é¢ä¹‹å¤„æ˜¯åœ¨äºä¸‹é¢çš„è¿™ä¸ªå±æ€§ï¼š 1@property (nonatomic) BOOL clearsSelectionOnViewWillAppear; è¿™æ˜¯ä¸€ä¸ªboolå€¼ï¼Œè®¾ç½®ä¸ºyesåæ¯å½“å½“å‰controllerè°ƒç”¨ViewWillAppareçš„æ—¶å€™ï¼Œéƒ½ä¼šå°†cellçš„é€‰ä¸­çŠ¶æ€å–æ¶ˆï¼Œè¿™ååˆ†æœ‰ç”¨ï¼Œæˆ‘ä»¬åœ¨é€šè¿‡ç‚¹å‡»cellè·³è½¬ç•Œé¢åï¼Œpopå›æ¥ä¸éœ€è¦åœ¨æ‰‹åŠ¨ä¿®æ”¹cellçš„é€‰ä¸­çŠ¶æ€äº†ã€‚ é™¤æ­¤ä¹‹åï¼ŒTableViewControllerä¸­è¿˜å°è£…äº†è¿™æ ·ä¸€ä¸ªå±æ€§ï¼š 1@property (nonatomic, strong, nullable) UIRefreshControl *refreshControl; è¿™ä¸ªUIRefreshControlç±»æ˜¯iOS6ä¹‹åå¼•å…¥çš„ä¸€ä¸ªç®€å•çš„åˆ·æ–°æ§ä»¶ï¼Œæˆ‘ä»¬å¦‚æœè®¾ç½®äº†å®ƒï¼Œåœ¨tableViewä¸‹æ‹‰çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šæä¾›ç»™æˆ‘ä»¬ä¸€ä¸ªä¸‹æ‹‰åˆ·æ–°çš„æ•ˆæœã€‚ ä¸‰ã€UIRefreshControlè¿™ä¸ªç±»ä¹Ÿååˆ†ç®€å•ï¼Œé€šè¿‡ç®€å•çš„è®¾ç½®å¯ä»¥å±•ç°ä¸€ä¸ªå°å·§çš„åˆ·æ–°æ•ˆæœï¼Œä½†æ˜¯åˆ¶å®šæ€§ä¸å¼ºï¼Œå…¶ä¸­ä¸»è¦å±æ€§å¦‚ä¸‹ï¼š 1234567891011//è·å–åˆ·æ–°çŠ¶æ€@property (nonatomic, readonly, getter=isRefreshing) BOOL refreshing;//è®¾ç½®æ§ä»¶é¢œè‰²@property (null_resettable, nonatomic, strong) UIColor *tintColor;//è®¾ç½®æ§ä»¶æ–‡å­—@property (nullable, nonatomic, strong) NSAttributedString *attributedTitle UI_APPEARANCE_SELECTOR;// æ‰‹åŠ¨å¼€å§‹åˆ·æ–°- (void)beginRefreshing NS_AVAILABLE_IOS(6_0);// ç»“æŸåˆ·æ–°- (void)endRefreshing NS_AVAILABLE_IOS(6_0); éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒUIRefreshControlæ˜¯ç»§æ‰¿äºUIControlçš„ï¼Œä¸‹æ‹‰å”¤é†’åˆ·æ–°çŠ¶æ€åï¼Œä¼šè§¦å‘UIControleEventValueChangeäº‹ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å…¶ä¸­è¿›è¡Œåˆ·æ–°çš„æ•°æ®é€»è¾‘æ“ä½œã€‚ ä¾‹å¦‚ï¼š 12345678910111213- (void)viewDidLoad &#123; [super viewDidLoad]; self.refreshControl = [[UIRefreshControl alloc]init]; self.refreshControl.tintColor = [UIColor greenColor]; self.refreshControl.attributedTitle = [[NSAttributedString alloc]initWithString:@&quot;ä¸‹æ‹‰åˆ·æ–°äº†~~&quot;]; self.clearsSelectionOnViewWillAppear = YES; self.navigationItem.rightBarButtonItem = self.editButtonItem; [self.refreshControl addTarget:self action:@selector(change:) forControlEvents:UIControlEventValueChanged];&#125;-(void)change:(UIRefreshControl*)con&#123; self.refreshControl.attributedTitle = [[NSAttributedString alloc]initWithString:@&quot;å¼€å§‹åˆ·æ–°äº†~~&quot;];&#125; æ•ˆæœå¦‚ä¸‹ï¼š ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"iOSç•Œé¢å¸ƒå±€ä¹‹å››â€”â€”ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“Masonryè¿›è¡Œautolayoutå¸ƒå±€","slug":"145iOSç•Œé¢å¸ƒå±€ä¹‹å››â€”â€”ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“Masonryè¿›è¡Œautolayoutå¸ƒå±€","date":"2015-11-01T16:00:00.000Z","updated":"2021-07-05T07:46:35.018Z","comments":true,"path":"2015/11/02/145iOSç•Œé¢å¸ƒå±€ä¹‹å››â€”â€”ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“Masonryè¿›è¡Œautolayoutå¸ƒå±€/","link":"","permalink":"http://huishao.cc/2015/11/02/145iOSç•Œé¢å¸ƒå±€ä¹‹å››â€”â€”ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“Masonryè¿›è¡Œautolayoutå¸ƒå±€/","excerpt":"","text":"iOSç•Œé¢å¸ƒå±€ä¹‹å››â€”â€”ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“Masonryè¿›è¡Œautolayoutå¸ƒå±€ä¸€ã€å¼•è¨€åœ¨å‰é¢åšå®¢ï¼Œæˆ‘ä»¬è®¨è®ºäº†ä½¿ç”¨iOSåŸç”Ÿçš„æ¡†æ¶ä»£ç æ¥è¿›è¡Œautolayoutå¸ƒå±€ã€‚åœ¨ä½¿ç”¨ä¸­ï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œæ— è®ºæ˜¯ä»£ç é‡è¿˜æ˜¯ç»“æ„çš„æ¸…æ™°åº¦ï¼Œéƒ½ååˆ†ä¸èƒ½è®©æˆ‘ä»¬æ»¡æ„ï¼Œåœ¨storyBoardä¸­åªéœ€è¦å‡ æ¡çº¿å°±å¯ä»¥æå®šçš„äº‹æƒ…ï¼Œç”¨ä»£ç ç¼ºè¦å†™å†—ä½™çš„ä¸€å¤§å †ã€‚å¹¶ä¸”æœ‰äº›æ—¶å€™ï¼Œæ•…äº‹ç‰ˆå¹¶ä¸èƒ½è§£å†³æ‰€æœ‰é—®é¢˜ï¼ŒæŸäº›æ§ä»¶å¿…é¡»æˆ‘ä»¬æ‰‹å†™ï¼Œè¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬å°±ä¸å¾—ä¸è¿›è¡Œä»£ç çš„autolayoutå¸ƒå±€ï¼Œå¹¸è¿çš„æ˜¯ï¼ŒMasonryå¯ä»¥å¸®åŠ©æˆ‘ä»¬è½»æ¾æ„‰å¿«çš„å®Œæˆè¿™ä¸€ä»»åŠ¡ã€‚ ä½¿ç”¨ä»£ç è¿›è¡Œautolayoutå¸ƒå±€ï¼šhttp://my.oschina.net/u/2340880/blog ã€‚ äºŒã€ä½¿ç”¨Masonryè¿™é‡Œè¯´çš„å¤§éƒ¨åˆ†å†…å®¹å‡æ¥è‡ªMasonryå’Œå®˜æ–¹gitHubï¼Œå°†å…¶å†…å®¹è¿›è¡Œäº†ç¿»è¯‘å’Œè§£é‡Šï¼Œæºåœ°å€å¦‚ä¸‹ï¼š[https://github.com/SnapKit/Masonry](https://github.com/SnapKit/Masonry)ã€‚ 1ã€å¸ƒå±€çš„æ§ä»¶å±æ€§å¯¹ç…§æ— è®ºæ˜¯ç”¨storyBoardè¿˜æ˜¯ä»£ç ï¼Œåœ¨è®¾ç½®æ§ä»¶ä¹‹é—´layoutå…³ç³»çš„æ—¶å€™ï¼Œæˆ‘ä»¬éƒ½éœ€è¦è®¾ç½®æ§ä»¶çš„ä½ç½®å±æ€§ã€‚åœ¨ä¸‹é¢çš„æ–¹æ³•ä¸­ï¼Œè¿™ä¸ªä½ç½®å±æ€§å°±æ˜¯NSLayoutAttributeå¯¹è±¡ï¼Œä»–å†³å®šçš„æ§ä»¶å¯¹è±¡çš„å‚ç…§ä½ç½®ï¼š 12345+(instancetype)constraintWithItem:(id)view1 attribute:(NSLayoutAttribute)attr1 relatedBy:(NSLayoutRelation)relation toItem:(nullable id)view2 attribute:(NSLayoutAttribute)attr2 multiplier:(CGFloat)multiplier constant:(CGFloat)c; åœ¨Masonryä¸­ï¼Œæœ‰ä¸€ç³»åˆ—çš„å±æ€§ä¸ä¹‹æˆå¯¹åº”å…³ç³»ï¼Œå¯¹ç…§å¦‚ä¸‹ï¼š 2ã€3ä¸ªæ–¹æ³•è®©ä½ ç©è½¬Masonryçº¦æŸæ“ä½œMasonryåœ¨UIViewçš„ç±»åˆ«ä¸­ï¼Œæœ‰3ä¸ªå…¨å±€çš„æ“ä½œçº¦æŸçš„æ–¹æ³•ï¼Œé€šè¿‡ä»–ä»¬æˆ‘ä»¬å¯ä»¥è‡ªç”±çš„è¿›è¡Œautolayoutçš„è®¾ç½®ã€‚ æ·»åŠ çº¦æŸï¼š 1- (NSArray *)mas_makeConstraints:(void(^)(MASConstraintMaker *make))block; è¿™ä¸ªæ–¹æ³•ç”¨äºæˆ‘ä»¬åœ¨æœ€å¼€å§‹æ—¶ä¸ºæ§ä»¶è®¾ç½®çš„çº¦æŸï¼Œåœ¨blockä¸­è¿›è¡Œçº¦æŸæ¡ä»¶çš„è®¾ç½®ï¼Œä¾‹å¦‚æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªlabelï¼Œå°†å…¶å°ºå¯¸è®¾ç½®ä¸º50*50ï¼Œæ”¾åœ¨å±å¹•ä¸­é—´ï¼Œä½¿ç”¨å¦‚ä¸‹ä»£ç ï¼š æ³¨æ„ï¼šåœ¨æ·»åŠ çº¦æŸå‰ï¼Œå¿…é¡»å°†è§†å›¾æ·»åŠ åˆ°å…¶çˆ¶è§†å›¾ä¸Šã€‚ 123456789101112- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view, typically from a nib. UILabel * label = [[UILabel alloc]init]; [self.view addSubview:label]; [label mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.center.equalTo(self.view); make.height.equalTo(@50); make.width.equalTo(@50); &#125;]; label.backgroundColor = [UIColor redColor];&#125; æ•ˆæœå¦‚ä¸‹ï¼š æ›´æ–°çº¦æŸï¼š å½“æˆ‘ä»¬éœ€è¦é…åˆå¸ƒå±€æ”¹å˜æˆ–è€…åŠ¨ç”»æ•ˆæœçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦å°†å·²ç»æ·»åŠ çš„çº¦æŸè¿›è¡Œæ›´æ–°æ“ä½œï¼Œä½¿ç”¨å¦‚ä¸‹çš„æ–¹æ³•ï¼š 1234[label mas_updateConstraints:^(MASConstraintMaker *make) &#123; make.height.equalTo(@100); make.width.equalTo(@100); &#125;]; æ›´æ–°çº¦æŸçš„ä½œç”¨åœ¨äºæ›´æ–°å·²ç»æ·»åŠ çš„æŸäº›çº¦æŸï¼Œå¹¶ä¸ä¼šç§»é™¤æ‰åŸæœ‰çš„çº¦æŸï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦æ·»åŠ æ–°çš„çº¦æŸï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„é‡è®¾çº¦æŸçš„æ–¹æ³•ã€‚ é‡è®¾çº¦æŸï¼š 123456[label mas_remakeConstraints:^(MASConstraintMaker *make) &#123; make.left.equalTo(self.view.mas_left).offset(10); make.top.equalTo(self.view.mas_top).offset(100); make.height.equalTo(@100); make.width.equalTo(@100); &#125;]; 3ã€çº¦æŸå€¼ç›¸å…³åœ¨æ·»åŠ å…·ä½“çº¦æŸçš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸ä»…å¯ä»¥å°†çº¦æŸå€¼è®¾ç½®ä¸ºç»å¯¹çš„ç›¸ç­‰å…³ç³»ï¼Œä¹Ÿå¯ä»¥è®¾ç½®ä¸€äº›å€¼åŸŸçš„å…³ç³»ï¼Œåœ¨Masonryä¸­ï¼Œæœ‰å¦‚ä¸‹ä¸‰ç§ï¼š 123456//ç»å¯¹ç›¸ç­‰- (MASConstraint * (^)(id attr))equalTo;//å¤§äºç­‰äº- (MASConstraint * (^)(id attr))greaterThanOrEqualTo;//å°äºç­‰äº- (MASConstraint * (^)(id attr))lessThanOrEqualTo; å¯¹äºçº¦æŸçš„ä¼˜å…ˆçº§ï¼Œä½¿ç”¨å¦‚ä¸‹å‡ ä¸ªé‡ï¼š 12345678//æ‰‹åŠ¨è®¾ç½®ä¸€ä¸ªä¼˜å…ˆçº§å‚æ•°- (MASConstraint * (^)(MASLayoutPriority priority))priority;//ä¼˜å…ˆçº§ä½- (MASConstraint * (^)())priorityLow;//ä¼˜å…ˆçº§ä¸­ç­‰- (MASConstraint * (^)())priorityMedium;//ä¼˜å…ˆçº§é«˜- (MASConstraint * (^)())priorityHigh; å†™æ³•å¦‚ä¸‹ï¼š 123456[label mas_remakeConstraints:^(MASConstraintMaker *make) &#123; make.left.equalTo(self.view.mas_left).offset(10); make.top.equalTo(self.view.mas_top).offset(100); make.height.equalTo(@100).priority(1000); make.width.equalTo(@100).priorityHigh(); &#125;]; ä¸‰ã€Masonryè®¾ç½®çº¦æŸçš„å‡ ä¸ªç¤ºä¾‹1ã€è®¾ç½®è§†å›¾ä¸å…¶çˆ¶è§†å›¾çš„è¾¹è·çº¦æŸ12345678910- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view, typically from a nib. label = [[UILabel alloc]init]; [self.view addSubview:label]; [label mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.edges.equalTo(self.view).insets(UIEdgeInsetsMake(20, 20, 20, 20)); &#125;]; label.backgroundColor = [UIColor redColor];&#125; è®¾ç½®ä¸Šä¸‹å·¦å³ä¸å…¶çˆ¶è§†å›¾è¾¹è·ä¸º20pxï¼Œæ•ˆæœå¦‚ä¸‹ï¼š 2ã€çº¦æŸæ§ä»¶çš„å°ºå¯¸ä¸ºå›ºå®šå€¼12345[label mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.height.equalTo(@200); make.width.equalTo(@200); make.center.equalTo(self.view); &#125;]; ä½ç½®çº¦æŸè®¾ç½®åœ¨äº†å±å¹•çš„ä¸­é—´ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š 3ã€çº¦æŸæ§ä»¶ä¹‹é—´çš„å°ºå¯¸123456789101112 [label mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.height.equalTo(@100); make.width.equalTo(label2); make.right.equalTo(label2.mas_left).offset(-100); make.leading.equalTo(self.view.mas_leading).offset(20); make.centerY.equalTo(self.view); &#125;]; [label2 mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.height.equalTo(@100); make.centerY.equalTo(label); make.trailing.equalTo(self.view.mas_trailing).offset(-20); &#125;]; è®¾ç½®äº†ä¸¤ä¸ªlabelå®½åº¦ä¸€è‡´ï¼Œç›¸è·100px,åˆ†åˆ«è·ç¦»å·¦å³è¾¹è·20pxï¼Œæ•ˆæœå¦‚ä¸‹ï¼š ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"iOSå¯¹UIViewControllerç”Ÿå‘½å‘¨æœŸå’Œå±æ€§æ–¹æ³•çš„è§£æ","slug":"144iOSå¯¹UIViewControllerç”Ÿå‘½å‘¨æœŸå’Œå±æ€§æ–¹æ³•çš„è§£æ","date":"2015-10-31T16:00:00.000Z","updated":"2021-07-05T07:45:25.659Z","comments":true,"path":"2015/11/01/144iOSå¯¹UIViewControllerç”Ÿå‘½å‘¨æœŸå’Œå±æ€§æ–¹æ³•çš„è§£æ/","link":"","permalink":"http://huishao.cc/2015/11/01/144iOSå¯¹UIViewControllerç”Ÿå‘½å‘¨æœŸå’Œå±æ€§æ–¹æ³•çš„è§£æ/","excerpt":"","text":"iOSå¯¹UIViewControllerç”Ÿå‘½å‘¨æœŸå’Œå±æ€§æ–¹æ³•çš„è§£æä¸€ã€å¼•è¨€ä½œä¸ºMVCè®¾è®¡æ¨¡å¼ä¸­çš„Cï¼ŒControllerä¸€ç›´æ‰®æ¼”ç€é¡¹ç›®å¼€å‘ä¸­æœ€é‡è¦çš„è§’è‰²ï¼Œå®ƒæ˜¯è§†å›¾å’Œæ•°æ®çš„æ¡¥æ¢ï¼Œé€šè¿‡å®ƒçš„ç®¡ç†ï¼Œå°†æ•°æ®æœ‰æ¡æœ‰ç†çš„å±•ç¤ºåœ¨æˆ‘ä»¬çš„Viewå±‚ä¸Šã€‚iOSä¸­çš„UIViewControlleræ˜¯UIKitæ¡†æ¶ä¸­æœ€åŸºæœ¬çš„ä¸€ä¸ªç±»ã€‚ä»ç¬¬ä¸€ä¸ªUIè§†å›¾åˆ°å¤æ‚å®Œæ•´é¡¹ç›®ï¼Œéƒ½ç¦»ä¸å¼€UIViewControllerä½œä¸ºåŸºç¡€ã€‚åŸºäºUIViewControllerçš„å°è£…å’Œæ‰©å±•ï¼Œä¹Ÿèƒ½å¤Ÿå‡ºè‰²çš„å®Œæˆå„ç§å¤æ‚ç•Œé¢é€»è¾‘ã€‚è¿™ç¯‡åšå®¢ï¼Œæ—¨åœ¨è®¨è®ºUIViewControllerçš„ç”Ÿå‘½å‘¨æœŸå’Œå±æ€§æ–¹æ³•ï¼Œåœ¨æœ€åŸºç¡€çš„ä¸œè¥¿ä¸Šï¼Œå¾€å¾€ä¼šå¾—åˆ°æ„æƒ³ä¸åˆ°çš„æƒŠå–œã€‚ äºŒã€UIViewControllerçš„ç”Ÿå‘½å‘¨æœŸè¦äº†è§£UIViewControllerï¼Œå…ˆè¦å¼„æ¸…æ¥šå…¶ç”Ÿå‘½å‘¨æœŸã€‚åœ¨é¢å‘å¯¹è±¡çš„è¯­è¨€ä¸­ï¼Œæ˜¯å¯¹è±¡ï¼Œå°±ä¸€å®šè¦æœ‰ç”Ÿå‘½å‘¨æœŸï¼ŒUIViewControllerä¹Ÿä¸ä¾‹å¤–ï¼Œç”Ÿå‘½å‘¨æœŸç®¡ç†Controllerçš„ä½œç”¨èŒƒå›´å’Œæ—¶é—´ï¼Œä¹Ÿç®¡ç†å…¶å†…å¯¹è±¡çš„ä½œç”¨èŒƒå›´å’Œæ—¶é—´ã€‚é¦–å…ˆï¼ŒUIViewControllerä¸­ä¸å…¶ç”Ÿå‘½å‘¨æœŸæœ‰å…³çš„å‡ ä¸ªå‡½æ•°å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526//ç±»çš„åˆå§‹åŒ–æ–¹æ³•+ (void)initialize;//å¯¹è±¡åˆå§‹åŒ–æ–¹æ³•- (instancetype)init;//ä»å½’æ¡£åˆå§‹åŒ–- (instancetype)initWithCoder:(NSCoder *)coder;//åŠ è½½è§†å›¾-(void)loadView;//å°†è¦åŠ è½½è§†å›¾- (void)viewDidLoad;//å°†è¦å¸ƒå±€å­è§†å›¾-(void)viewWillLayoutSubviews;//å·²ç»å¸ƒå±€å­è§†å›¾-(void)viewDidLayoutSubviews;//å†…å­˜è­¦å‘Š- (void)didReceiveMemoryWarning;//å·²ç»å±•ç¤º-(void)viewDidAppear:(BOOL)animated;//å°†è¦å±•ç¤º-(void)viewWillAppear:(BOOL)animated;//å°†è¦æ¶ˆå¤±-(void)viewWillDisappear:(BOOL)animated;//å·²ç»æ¶ˆå¤±-(void)viewDidDisappear:(BOOL)animated;//è¢«é‡Šæ”¾-(void)dealloc; ä¸Šé¢è¿™ä¹ˆå¤šçš„å‡½æ•°ï¼Œä¹ä¸€çœ‹ä»€ä¹ˆå¤æ‚ï¼Œå…¶å®å…³ç³»ä»€ä¹ˆæ˜æœ—ï¼Œé™¤äº†initialize,initå’ŒinitWithCoderä¸æ˜¯å­˜åœ¨æ‰€æœ‰å¯¹è±¡çš„å£°æ˜å‘¨æœŸä¸­ï¼Œå…¶ä»–å‡½æ•°éƒ½ä¼šåœ¨UIViewControllerçš„å£°æ˜å‘¨æœŸä¸­æœ‰åºçš„è¢«è°ƒç”¨ã€‚é‚£ä¹ˆå…·ä½“çš„è°ƒç”¨é¡ºåºæ˜¯æ€æ ·çš„å‘¢ï¼Œæœ€å¥½çš„åŠæ³•æ˜¯å®è·µä¸€ä¸‹ï¼Œé€šè¿‡ç¼–å·æ‰“å°ï¼Œç»“æœå¦‚ä¸‹ï¼š è¿™æ˜¯ä¸€ä¸ªViewControllerå®Œæ•´çš„å£°æ˜å‘¨æœŸï¼Œå…¶å®é‡Œé¢è¿˜æœ‰å¥½å¤šåœ°æ–¹éœ€è¦æˆ‘ä»¬æ³¨æ„ä¸€ä¸‹ï¼š 1ï¼šinitializeå‡½æ•°å¹¶ä¸ä¼šæ¯æ¬¡åˆ›å»ºå¯¹è±¡éƒ½è°ƒç”¨ï¼Œåªæœ‰åœ¨è¿™ä¸ªç±»ç¬¬ä¸€æ¬¡åˆ›å»ºå¯¹è±¡æ—¶æ‰ä¼šè°ƒç”¨ï¼Œåšä¸€äº›ç±»çš„å‡†å¤‡å·¥ä½œï¼Œå†æ¬¡åˆ›å»ºè¿™ä¸ªç±»çš„å¯¹è±¡ï¼Œinitalizeæ–¹æ³•å°†ä¸ä¼šè¢«è°ƒç”¨ï¼Œå¯¹äºè¿™ä¸ªç±»çš„å­ç±»ï¼Œå¦‚æœå®ç°äº†initializeæ–¹æ³•ï¼Œåœ¨è¿™ä¸ªå­ç±»ç¬¬ä¸€æ¬¡åˆ›å»ºå¯¹è±¡æ—¶ä¼šè°ƒç”¨è‡ªå·±çš„initalizeæ–¹æ³•ï¼Œä¹‹åä¸ä¼šè°ƒç”¨ï¼Œå¦‚æœæ²¡æœ‰å®ç°ï¼Œé‚£ä¹ˆå®ƒçš„çˆ¶ç±»å°†æ›¿å®ƒå†æ¬¡è°ƒç”¨ä¸€ä¸‹è‡ªå·±çš„initializeæ–¹æ³•ï¼Œä»¥ååˆ›å»ºä¹Ÿéƒ½ä¸ä¼šå†è°ƒç”¨ã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬æœ‰ä¸€äº›å’Œè¿™ä¸ªç›¸å…³çš„å…¨å±€å˜é‡ï¼Œå¯ä»¥åœ¨è¿™é‡Œè¿›è¡Œåˆå§‹åŒ–ã€‚ 2ï¼šinitæ–¹æ³•å’ŒinitCoderæ–¹æ³•ç›¸ä¼¼ï¼Œåªæ˜¯è¢«è°ƒç”¨çš„ç¯å¢ƒä¸ä¸€æ ·ï¼Œå¦‚æœç”¨ä»£ç è¿›è¡Œåˆå§‹åŒ–ï¼Œä¼šè°ƒç”¨initï¼Œä»nibæ–‡ä»¶æˆ–è€…å½’æ¡£è¿›è¡Œåˆå§‹åŒ–ï¼Œä¼šè°ƒç”¨initCoderã€‚ 3ï¼šloadViewæ–¹æ³•æ˜¯å¼€å§‹åŠ è½½è§†å›¾çš„èµ·å§‹æ–¹æ³•ï¼Œé™¤éæ‰‹åŠ¨è°ƒç”¨ï¼Œå¦åˆ™åœ¨ViewControllerçš„ç”Ÿå‘½å‘¨æœŸä¸­æ²¡ç‰¹æ®Šæƒ…å†µåªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ã€‚ 4ï¼šviewDidLoadæ–¹æ³•æ˜¯æˆ‘ä»¬æœ€å¸¸ç”¨çš„æ–¹æ³•çš„ï¼Œç±»ä¸­æˆå‘˜å¯¹è±¡å’Œå˜é‡çš„åˆå§‹åŒ–æˆ‘ä»¬éƒ½ä¼šæ”¾åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œåœ¨ç±»åˆ›å»ºåï¼Œæ— è®ºè§†å›¾çš„å±•ç°æˆ–æ¶ˆå¤±ï¼Œè¿™ä¸ªæ–¹æ³•ä¹Ÿæ˜¯åªä¼šåœ¨å°†è¦å¸ƒå±€æ—¶è°ƒç”¨ä¸€æ¬¡ã€‚ 5ï¼šviewWillAppearï¼šè§†å›¾å°†è¦å±•ç°æ—¶ä¼šè°ƒç”¨ã€‚ 6ï¼šviewWillLayoutSubviewsï¼šåœ¨viewWillAppearåè°ƒç”¨ï¼Œå°†è¦å¯¹å­è§†å›¾è¿›è¡Œå¸ƒå±€ã€‚ 7ï¼šviewDidLayoutSubviewsï¼šå·²ç»å¸ƒå±€å®Œæˆå­è§†å›¾ã€‚ 8ï¼šviewDidAppareï¼šè§†å›¾å®Œæˆæ˜¾ç¤ºæ—¶è°ƒç”¨ã€‚ 9ï¼šviewWillDisappearï¼šè§†å›¾å°†è¦æ¶ˆå¤±æ—¶è°ƒç”¨ã€‚ 10ï¼šviewDidDisappearï¼šè§†å›¾å·²ç»æ¶ˆå¤±æ—¶è°ƒç”¨ã€‚ 11ï¼šdeallocï¼šcontrollerè¢«é‡Šæ”¾æ—¶è°ƒç”¨ã€‚ æ³¨æ„ï¼šç»è¿‡æµ‹è¯•ï¼Œä»nibæ–‡ä»¶åŠ è½½çš„controllerï¼Œåªè¦ä¸é‡Šæ”¾ï¼Œåœ¨æ¯æ¬¡viewWillAppareæ—¶éƒ½ä¼šè°ƒç”¨layoutSubviewsæ–¹æ³•ï¼Œæœ‰æ—¶ç”šè‡³ä¼šåœ¨viewDidAppareååœ¨è°ƒç”¨ä¸€æ¬¡layoutSubviewsï¼Œè€Œé‡ç‚¹æ˜¯ä»ä»£ç åŠ è½½çš„åˆ™åªä¼šåœ¨å¼€å§‹è°ƒç”¨ä¸€æ¬¡ï¼Œä¹‹åéƒ½ä¸ä¼šï¼Œæ‰€ä»¥æ³¨æ„ï¼Œåœ¨layoutSubviewsä¸­å†™ç›¸å…³çš„å¸ƒå±€ä»£ç ååˆ†å±é™©ã€‚ ä¸‰ã€ä»storyBoardåŠ è½½UIViewControllerå®ä¾‹çš„ä¼ å€¼é™·é˜±æˆ‘ä»¬çŸ¥é“ï¼Œå½“æˆ‘ä»¬ä»StoryBoardä¸­åŠ è½½ViewControlleræ—¶ï¼Œæˆ‘ä»¬åœ¨Controllerä¸­æ‹–æ‹½çš„è§†å›¾æ˜¯å¯ä»¥è¢«åˆå§‹åŒ–çš„ï¼Œè¿™é‡Œé¢æœ‰ä¸€ç‚¹éœ€è¦æˆ‘ä»¬æ³¨æ„ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦å‘controllerä¸­è§†å›¾è¿›è¡Œä¼ å€¼è®¾ç½®ï¼Œé€šè¿‡ä»¥ä¸‹æ–¹æ³•å¾—åˆ°çš„Controllerä¸­ï¼Œè§†å›¾è¿˜æ²¡æœ‰è¢«åˆå§‹åŒ–åˆ›å»ºå‡ºæ¥ï¼š 1 ViewController2 * viewController2 = [[UIStoryboard storyboardWithName:@&quot;Main&quot; bundle:[NSBundle mainBundle]] instantiateViewControllerWithIdentifier:@&quot;ViewController2&quot;]; æˆ‘ä»¬å¯ä»¥åœ¨ViewController2çš„storyBoardä¸­æ‹‰ä¸€ä¸ªlabelï¼Œç„¶åå…³è”åˆ°å¤´æ–‡ä»¶ä¸­ï¼Œå¦‚ä¸‹æ‰“å°ï¼Œä¼šå‘ç°æˆ‘ä»¬å¾—åˆ°controlleræ—¶ï¼Œé‡Œé¢çš„è§†å›¾å¯¹è±¡å¹¶æ²¡æœ‰è¿›è¡Œåˆ›å»º: 123ViewController2 * viewController2 = [[UIStoryboard storyboardWithName:@&quot;Main&quot; bundle:[NSBundle mainBundle]] instantiateViewControllerWithIdentifier:@&quot;ViewController2&quot;]; NSLog(@&quot;%@&quot;,viewController2.label); [self presentViewController:viewController2 animated:YES completion:nil]; æ‰“å°å¦‚ä¸‹ï¼š å¯ä»¥æƒ³è±¡ï¼Œå¦‚æœæˆ‘ä»¬è¿™æ—¶å€™éœ€è¦å¯¹labelè¿›è¡Œä¸€äº›å±æ€§è®¾ç½®ï¼Œå¿…ç„¶å¤±è´¥ã€‚æœ‰äººæå‡ºå¯ä»¥åœ¨åˆ›å»ºåï¼Œæ‰‹åŠ¨è°ƒä»¥ä¸‹loadViewæ–¹æ³•ï¼Œæˆ‘ä»¬è¯•ä¸€ä¸‹ï¼Œç»“æœå¦‚ä¸‹ï¼š å¯ä»¥çœ‹åˆ°ï¼Œæ‰‹åŠ¨è°ƒç”¨loadViewåï¼Œlabelæ˜¯è¢«åˆ›å»ºäº†å‡ºæ¥ï¼Œä½†æ˜¯æš´æ¼äº†ä¸€ä¸ªæ›´ä¸¥é‡çš„é—®é¢˜ï¼Œç³»ç»Ÿä¸åœ¨è°ƒç”¨ViewDidLoadæ–¹æ³•ï¼Œè¿™æ˜¯ååˆ†æœ‰é£é™©çš„ï¼Œå› ä¸ºæˆ‘ä»¬å¤§éƒ¨åˆ†çš„åˆå§‹åŒ–ä»£ç éƒ½ä¼šæ”¾åœ¨è¿™ä¸ªæ–¹æ³•é‡Œï¼Œæ‰€ä»¥æ‰‹åŠ¨è°ƒç”¨loadViewæ˜¯ä¸€ç§é”™è¯¯çš„æ–¹æ³•ï¼Œappleæ–‡æ¡£å£°æ˜å¯¹äºloadViewæ–¹æ³•ï¼Œæˆ‘ä»¬ä»æ¥éƒ½ä¸è¦æ‰‹åŠ¨ç›´æ¥è°ƒç”¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•å®ç°åˆ›å»ºåå¯¹æˆå‘˜å¯¹è±¡è¿›è¡Œä¼ å€¼è®¾ç½®å‘¢ï¼ŒiOS9ä¸­å¢åŠ äº†è¿™æ ·ä¸€ä¸ªæ–¹æ³•ï¼š 1- (void)loadViewIfNeeded NS_AVAILABLE_IOS(9_0); è¿™ä¸ªæ–¹æ³•ååˆ†æœ‰ç”¨ï¼Œè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œä¼šå°†è§†å›¾åˆ›å»ºå‡ºæ¥ï¼Œå¹¶ä¸”ä¸ä¼šå¿½ç•¥viewDidLoadçš„è°ƒç”¨ã€‚ åœ¨iOS9ä¸­ï¼ŒUIViewControllerè¿˜å¢åŠ äº†ä¸‹é¢ä¸€ä¸ªå¸ƒå°”å€¼çš„å±æ€§ï¼Œå¯ä»¥åŒæ¥åˆ¤æ–­controllerçš„viewæ˜¯å¦å·²ç»åŠ è½½å®Œæˆï¼š 1@property(nullable, nonatomic, readonly, strong) UIView *viewIfLoaded NS_AVAILABLE_IOS(9_0); å››ã€UIViewControllerä¸StroyBoardçš„ç›¸å…³ç›¸äº’æ–¹æ³•å¯¹äºViewConrollerï¼Œæˆ‘ä»¬ä¸€èˆ¬æœ‰ä¸¤ç§æ–¹å¼åˆ›å»ºï¼Œä¸€ç§æ˜¯ç”¨çº¯ä»£ç çš„æ–¹å¼ï¼Œä¸€ç§æ˜¯ä¸StoryBoardå…³è”ï¼Œåœ¨UIViewControllerä¸­ï¼Œæœ‰è®¸å¤šæ–¹æ³•æ–¹ä¾¿æˆ‘ä»¬ä¸StoryBoardè¿›è¡Œäº¤äº’è”ç³»ã€‚ 1ã€ViewControllerç›´æ¥åœ¨StoryBoardä¸­è¿›è¡Œè·³è½¬çš„ä¼ å€¼åœ¨StoryBoardä¸­è¿›è¡Œç•Œé¢è·³è½¬æ˜¯ååˆ†æ–¹ä¾¿çš„ï¼Œæˆ‘ä»¬åœ¨StoryBoardä¸­æ‹‰å…¥ä¸¤ä¸ªViewControllerï¼Œåœ¨ä¸€ä¸ªä¸Šé¢æ·»åŠ ä¸€ä¸ªæŒ‰é’®ï¼Œç‚¹ä½æŒ‰é’®æŒ‰ä½controlï¼Œå°†é¼ æ ‡æ‹‰åˆ°ç¬¬äºŒä¸ªcontrollerä¸Šï¼Œä¼šå‡ºç°å¦‚ä¸‹çš„è·³è½¬é€‰é¡¹ï¼š æˆ‘ä»¬é€‰æ‹©ä¸€ä¸ªåï¼Œå°±ä¼šåœ¨ä¸¤ä¸ªcontrollerä¹‹é—´å»ºç«‹ä¸€ä¸ªè·³è½¬è¿æ¥ã€‚å½“æˆ‘ä»¬è¿è¡Œç‚¹å‡»æŒ‰é’®åï¼Œä¼šè‡ªåŠ¨ä»ç¬¬ä¸€ä¸ªcontrollerè·³è½¬åˆ°ç¬¬äºŒä¸ªcontrollerã€‚åœ¨UIViewControllerä¸­æœ‰å¦‚ä¸‹æ–¹æ³•å¯ä»¥å¯¹æ˜¯å¦è·³è½¬è¿›è¡Œæ§åˆ¶ï¼š 1- (BOOL)shouldPerformSegueWithIdentifier:(NSString *)identifier sender:(nullable id)sender NS_AVAILABLE_IOS(6_0); è¿™ä¸ªæ–¹æ³•å¦‚æœè¿”å›NOï¼Œè‡ªåŠ¨è·³è½¬å°†ä¸èƒ½è¿›è¡Œï¼Œä¼šè¢«æ‹’ç»ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªæ–¹æ³•åªä¼šåœ¨è‡ªåŠ¨çš„è·³è½¬æ—¶è¢«è°ƒç”¨ï¼Œæˆ‘ä»¬æ‰‹åŠ¨ä½¿ç”¨ä»£ç è·³è½¬StoryBoardä¸­çš„è¿æ¥å…³ç³»æ—¶æ˜¯ä¸ä¼šè¢«è°ƒç”¨çš„ï¼Œæˆ‘ä»¬åé¢è®¨è®ºã€‚ åœ¨æ‰§è¡Œè¿‡ä¸Šè¿°æ–¹æ³•åï¼Œå¦‚æœè¿”å›YESï¼Œç³»ç»Ÿè¿˜ä¼šåœ¨æ‰§è¡Œå¦‚ä¸‹ä¸€ä¸ªæ–¹æ³•ï¼Œä½œä¸ºè·³è½¬å‰çš„å‡†å¤‡ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªæ–¹æ³•ä¸­è¿›è¡Œä¸€äº›ä¼ å€¼æ“ä½œï¼Œè¿™ä¸ªæ–¹æ³•æ— è®ºä½¿æˆ‘ä»¬æ‰‹åŠ¨è¿›è¡Œè·³è½¬è¿˜æ˜¯storyboardä¸­è‡ªåŠ¨è·³è½¬ï¼Œéƒ½ä¼šè¢«æ‰§è¡Œï¼š 1- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(nullable id)sender NS_AVAILABLE_IOS(5_0); sugurå¯¹è±¡ä¸­å°è£…äº†ç›¸å…³çš„ViewControllerï¼Œå¯ä»¥ä½¿ç”¨segue.destinationViewControllerè·å–ã€‚ segueåœ¨StoryBoardä¸­é™¤äº†ç”¨æ¥è‡ªåŠ¨æ­£å‘è·³è½¬å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è¿›è¡Œåå‘çš„è·³è½¬ï¼Œç±»ä¼¼popå’Œdismissæ–¹æ³•ï¼Œè¿™ç§segueè¢«ç§°ä¸ºunwind sugueã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªcontroller1å’Œä¸€ä¸ªcontrollert2ï¼Œè¦ä½¿ç”¨unwind segueä»2è¿”å›1ï¼Œæˆ‘ä»¬éœ€è¦åœ¨2ä¸­å®ç°å¦‚ä¸‹æ ¼å¼çš„æ–¹æ³•ï¼š 123- (IBAction)unwindSegueToViewController:(UIStoryboardSegue *)segue &#123; NSLog(@&quot;unwindSegueToViewController&quot;);&#125; è¿™ä¸ªæ–¹æ³•ä¸­çš„è¿”å›å€¼å¿…é¡»ä¸ºIBActionï¼Œå‚æ•°å¿…é¡»æ˜¯UIStoryboardSegueï¼Œæ–¹æ³•åæˆ‘ä»¬å¯ä»¥è‡ªå·±å®šä¹‰ï¼Œä¹‹ååœ¨StoryBoardä¸­çš„ViewController1ä¸­çš„Exité€‰é¡¹ä¸­ï¼Œæˆ‘ä»¬ä¼šå‘ç°å¤šäº†ä¸€ä¸ªè¿™æ ·çš„æ–¹æ³•ï¼š æˆ‘ä»¬å¯ä»¥æŠŠå®ƒè¿æ¥åˆ°viewController2ä¸­çš„ä¸€ä¸ªæŒ‰é’®ä¸Šï¼š è¿™æ ·ï¼Œå½“æˆ‘ä»¬ç‚¹å‡»viewController2ä¸­çš„æŒ‰é’®æ—¶ï¼Œå°±ä¼šè¿”å›åˆ°æˆ‘ä»¬ç¬¬ä¸€ä¸ªViewController1ä¸­äº†ã€‚ å½“ç„¶ï¼Œåœ¨ä½¿ç”¨unwind segueæ–¹æ³•æ—¶ï¼Œä¹Ÿæ˜¯ä¼šæœ‰ä¸€äº›å›è°ƒå¸®åŠ©æˆ‘ä»¬è¿›è¡Œè·³è½¬å‰çš„è®¾ç½®å’Œä¼ å€¼ï¼ŒUIViewControllerå¦‚ä¸‹æ–¹æ³•ä¼šåœ¨è·³è½¬å‰è°ƒç”¨ï¼Œè¿”å›NOï¼Œåˆ™ä¸èƒ½è¿›è¡Œè·³è½¬ï¼š 1234-(BOOL)canPerformUnwindSegueAction:(SEL)action fromViewController:(UIViewController *)fromViewController withSender:(id)sender&#123; NSLog(@&quot;canPerformUnwindSegueAction&quot;); return YES;&#125; ä¹‹åä¼šæ‰§è¡Œæˆ‘ä»¬è‡ªå®šä¹‰çš„unwindSegueæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¸­æˆ‘ä»¬å¯ä»¥ä»€ä¹ˆéƒ½ä¸å†™ï¼Œæ¨¡å¼æ˜¯ä¼šè¿›è¡Œè·³è½¬çš„ã€‚ 2ã€ä½¿ç”¨ä»£ç è·³è½¬Storyboardä¸­çš„controlleræˆ‘ä»¬é™¤äº†åœ¨Storyboardä¸­æ‹‰æ‹‰æ‰¯æ‰¯å¯ä»¥è¿›è¡Œæ§åˆ¶å™¨çš„è·³è½¬å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ä»£ç æ¥è·³è½¬Storyboardä¸­segueè¿æ¥å…³ç³»ã€‚ åœ¨Storyboardä¸­ä¸¤ä¸ªæ§åˆ¶å™¨é—´å»ºç«‹ä¸€ä¸ªsegueè”ç³»ï¼Œæˆ‘ä»¬å¯ä»¥å–ä¸€ä¸ªåå­—ï¼š åœ¨è§¦å‘è·³è½¬çš„æ–¹æ³•ä¸­ï¼Œä½¿ç”¨å¦‚ä¸‹æ–¹æ³•è¿›è¡Œè·³è½¬ï¼Œè¿™é‡Œé¢çš„å‚æ•°idå°±æ˜¯æˆ‘ä»¬å–å¾—segueçš„idï¼š 1- (void)performSegueWithIdentifier:(NSString *)identifier sender:(nullable id)sender NS_AVAILABLE_IOS(5_0); ä¸‹é¢ä¸‰ä¸ªå±æ€§æˆ‘ä»¬å¯ä»¥è·å–controllerçš„nibæ–‡ä»¶åï¼Œå…¶storyBoardå’Œå…¶Bundle: 123@property(nullable, nonatomic, readonly, copy) NSString *nibName; @property(nullable, nonatomic, readonly, strong) NSBundle *nibBundle; @property(nullable, nonatomic, readonly, strong) UIStoryboard *storyboard NS_AVAILABLE_IOS(5_0); äº”ã€UIViewControllerä¹‹é—´çš„ä¸€äº›ä»å±å…³ç³»è¿™éƒ¨åˆ†çš„å†…å®¹å’Œæ–¹æ³•å¯èƒ½æˆ‘ä»¬æ¥è§¦ç”¨åˆ°çš„å¹¶ä¸å¤šï¼Œä½†æ˜¯åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½¿ç”¨è¿™äº›æ–¹æ³•å¯ä»¥å¤§å¤§çš„æ–¹ä¾¿æŸäº›é€»è¾‘ã€‚ 1ã€parentViewControllerUIViewControlleré‡Œé¢å°è£…äº†ä¸€ä¸ªæ•°ç»„ï¼Œå¯ä»¥å­˜æ”¾å…¶å­ViewControllerï¼Œç³»ç»Ÿä¸­ä½¿ç”¨çš„ä¾‹å­å°±æ˜¯å¯¼èˆªå’ŒtabBarè¿™ç±»çš„æ§åˆ¶å™¨ï¼Œæˆ‘ä»¬ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•å¯ä»¥ç›´æ¥è®¿é—®è¿™äº›çˆ¶çš„controllerï¼š 1@property(nullable,nonatomic,weak,readonly) UIViewController *parentViewController; 2ã€æ¨¡æ€è·³è½¬ä¸­Controllerçš„ä»å±åœ¨æˆ‘ä»¬è¿›è¡Œæ§åˆ¶å™¨çš„è·³è½¬æ—¶ï¼Œåªè¦æ§åˆ¶å™¨æ²¡æœ‰è¢«é‡Šæ”¾ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥é¡ºè—¤æ‘¸ç“œçš„æ‰¾åˆ°å®ƒï¼Œä½¿ç”¨å¦‚ä¸‹ä¸¤ä¸ªæ–¹æ³•ï¼š 1234//å…¶æ‰€presentçš„contllerï¼Œæ¯”å¦‚ï¼ŒAå’ŒBä¸¤ä¸ªcontrollerï¼ŒAè·³è½¬åˆ°Bï¼Œé‚£ä¹ˆAçš„presentedViewControllerå°±æ˜¯B@property(nullable, nonatomic,readonly) UIViewController *presentedViewController NS_AVAILABLE_IOS(5_0);//å’Œä¸Šé¢çš„æ–¹æ³•åˆšå¥½ç›¸åï¼Œæ¯”å¦‚ï¼ŒAå’ŒBä¸¤ä¸ªcontrollerï¼ŒAè·³è½¬åˆ°Bï¼Œé‚£ä¹ˆBçš„presentingViewControllerå°±æ˜¯A@property(nullable, nonatomic,readonly) UIViewController *presentingViewController NS_AVAILABLE_IOS(5_0); äº†è§£äº†ä¸Šé¢æ–¹æ³•æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œå¯¹äºåå‘ä¼ å€¼è¿™æ ·çš„é—®é¢˜ï¼Œæˆ‘ä»¬æ ¹æœ¬ä¸éœ€è¦ä»£ç†ï¼Œblockï¼Œé€šçŸ¥ç­‰è¿™æ ·çš„å¤æ‚æ‰‹æ®µï¼Œåªéœ€è¦è·å–è·³è½¬åˆ°å®ƒçš„Controllerï¼Œç›´æ¥è®¾ç½®å³å¯ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ç¬¬äºŒä¸ªç•Œé¢æ¶ˆå¤±åï¼Œæ”¹å˜ç¬¬ä¸€ä¸ªç•Œé¢çš„é¢œè‰²ï¼Œåœ¨ç¬¬äºŒä¸ªcontrollerä¸­åªéœ€è¦ä¸‹é¢çš„ä»£ç å³å¯å®ç° ï¼š 12 self.presentingViewController.view.backgroundColor = [UIColor colorWithRed:arc4random()%255/255.0 green:arc4random()%255/255.0 blue:arc4random()%255/255.0 alpha:1]; [self dismissViewControllerAnimated:YES completion:nil]; å…­ã€UIViewControllerçš„æ¨¡æ€è·³è½¬åŠåŠ¨ç”»ç‰¹æ•ˆå•çº¯çš„UIViewControllerä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨æœ€å¤šçš„æ˜¯å¦‚ä¸‹çš„ä¸¤ä¸ªæ–¹æ³•ï¼Œä¸€ä¸ªå‘å‰è·³è½¬ï¼Œä¸€ä¸ªå‘åè¿”å›: 12- (void)presentViewController:(UIViewController *)viewControllerToPresent animated: (BOOL)flag completion:(void (^ __nullable)(void))completion NS_AVAILABLE_IOS(5_0);- (void)dismissViewControllerAnimated: (BOOL)flag completion: (void (^ __nullable)(void))completion NS_AVAILABLE_IOS(5_0); ä»æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæœ‰animatedè¿™ä¸ªå‚æ•°ï¼Œæ¥é€‰æ‹©æ˜¯å¦æœ‰åŠ¨ç”»ç‰¹æ•ˆï¼Œé»˜è®¤çš„åŠ¨ç”»ç‰¹æ•ˆæ˜¯åƒæŠ½å±‰ä¸€æ ·ä»æ‰‹æœºå±å¹•çš„ä¸‹æ–¹å‘ä¸Šå¼¹èµ·ï¼Œå½“ç„¶ï¼Œè¿™ä¸ªæ•ˆæœæˆ‘ä»¬å¯ä»¥è¿›è¡Œè®¾ç½®ï¼ŒUIViewControlleræœ‰å¦‚ä¸‹ä¸€ä¸ªå±æ€§æ¥è®¾ç½®åŠ¨ç”»ç‰¹æ•ˆï¼š 1@property(nonatomic,assign) UIModalTransitionStyle modalTransitionStyle NS_AVAILABLE_IOS(3_0); æ³¨æ„ï¼Œè¿™ä¸ªè¦è®¾ç½®çš„æ˜¯å°†è¦è·³è½¬åˆ°çš„controllerï¼Œæšä¸¾å¦‚ä¸‹ï¼š 123456typedef NS_ENUM(NSInteger, UIModalTransitionStyle) &#123; UIModalTransitionStyleCoverVertical = 0,//é»˜è®¤çš„ï¼Œä»ä¸‹å‘ä¸Šè¦†ç›– UIModalTransitionStyleFlipHorizontal ,//æ°´å¹³ç¿»è½¬ UIModalTransitionStyleCrossDissolve,//æº¶è§£ UIModalTransitionStylePartialCurl ,ä»ä¸‹å‘ä¸Šç¿»é¡µ&#125;; é™¤äº†è·³è½¬çš„æ•ˆæœï¼Œè¿˜æœ‰ä¸€ä¸ªå±æ€§å¯ä»¥è®¾ç½®å¼¹å‡ºçš„controlerçš„å¡«å……æ•ˆæœï¼Œä½†æ˜¯è¿™ä¸ªå±æ€§åªåœ¨padä¸Šæœ‰æ•ˆï¼Œåœ¨iphoneä¸Šæ— æ•ˆï¼Œéƒ½æ˜¯å¡«å……åˆ°æ•´ä¸ªå±å¹•ï¼š 12345678910111213@property(nonatomic,assign) UIModalPresentationStyle modalPresentationStyle NS_AVAILABLE_IOS(3_2);//æšä¸¾å¦‚ä¸‹typedef NS_ENUM(NSInteger, UIModalPresentationStyle) &#123; UIModalPresentationFullScreen = 0,//å¡«å……æ•´ä¸ªå±å¹• UIModalPresentationPageSheet,//ç•™ä¸‹çŠ¶æ€æ  UIModalPresentationFormSheet,//å››å‘¨ç•™ä¸‹å˜æš—çš„ç©ºç™½ UIModalPresentationCurrentContext ,//å’Œè·³è½¬åˆ°å®ƒçš„æ§åˆ¶å™¨ä¿æŒä¸€è‡´ UIModalPresentationCustom NS_ENUM_AVAILABLE_IOS(7_0),//è‡ªå®šä¹‰ UIModalPresentationOverFullScreen NS_ENUM_AVAILABLE_IOS(8_0), UIModalPresentationOverCurrentContext NS_ENUM_AVAILABLE_IOS(8_0), UIModalPresentationPopover NS_ENUM_AVAILABLE_IOS(8_0) __TVOS_PROHIBITED, UIModalPresentationNone NS_ENUM_AVAILABLE_IOS(7_0) = -1, &#125;; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"iOSç•Œé¢å¸ƒå±€ä¹‹ä¸‰â€”â€”çº¯ä»£ç çš„autoLayoutåŠå¸ƒå±€åŠ¨ç”»","slug":"143iOSç•Œé¢å¸ƒå±€ä¹‹ä¸‰â€”â€”çº¯ä»£ç çš„autoLayoutåŠå¸ƒå±€åŠ¨ç”»","date":"2015-10-29T16:00:00.000Z","updated":"2021-07-05T05:59:11.854Z","comments":true,"path":"2015/10/30/143iOSç•Œé¢å¸ƒå±€ä¹‹ä¸‰â€”â€”çº¯ä»£ç çš„autoLayoutåŠå¸ƒå±€åŠ¨ç”»/","link":"","permalink":"http://huishao.cc/2015/10/30/143iOSç•Œé¢å¸ƒå±€ä¹‹ä¸‰â€”â€”çº¯ä»£ç çš„autoLayoutåŠå¸ƒå±€åŠ¨ç”»/","excerpt":"","text":"iOSç•Œé¢å¸ƒå±€ä¹‹ä¸‰â€”â€”çº¯ä»£ç çš„autoLayoutåŠå¸ƒå±€åŠ¨ç”»ä¸€ã€å¼•è¨€å…³äºç•Œé¢å¸ƒå±€ï¼Œappleçš„ç­–ç•¥å·²ç»è¶‹äºæˆç†Ÿï¼Œautolayoutçš„ä¼˜åŠ¿åœ¨å¼€å‘ä¸­ä¹Ÿå·²ç»å±•ç°çš„æ·‹æ¼“å°½è‡´ã€‚é™¤äº†ä½¿ç”¨storyBoardè¿›è¡Œå¸ƒå±€çº¦æŸçš„æ‹–æ‹½ï¼Œæœ‰æ—¶æˆ‘ä»¬ä¹Ÿéœ€è¦åœ¨ä»£ç ä¸­è¿›è¡Œautolayoutçš„å¸ƒå±€è®¾ç½®ï¼ŒMasonryåº“å¯ä»¥æ–¹ä¾¿çš„åˆ›å»ºçº¦æŸå±æ€§ï¼Œå®é™…ä¸Šï¼Œæˆ‘ä»¬ä¹Ÿæ²¡æœ‰å¿…è¦å†ä½¿ç”¨ç³»ç»ŸåŸç”Ÿçš„ä»£ç æ¥åˆ›å»ºå’Œè®¾ç½®çº¦æŸï¼Œè¿™ç¯‡åšå®¢åªä½œä¸ºä½¿ç”¨çš„æ–¹æ³•å¤‡å¿˜ã€‚å‰å‡ ç¯‡å¸ƒå±€ä»‹ç»çš„é“¾æ¥å¦‚ä¸‹ï¼š ä½¿ç”¨autoresizingè¿›è¡Œç•Œé¢å¸ƒå±€ï¼šhttp://my.oschina.net/u/2340880/blog/423357 åˆè¯†autolayoutå¸ƒå±€æ¨¡å‹ï¼šhttp://my.oschina.net/u/2340880/blog/423500 äºŒã€äº†è§£ä¸€ä¸ªç±»ç”¨ä»£ç æ¥åšè§†å›¾é—´çš„ç›¸å…³çº¦æŸï¼Œé‚£ä¹ˆå°±ä¸€å®šè¦å°†â€œçº¦æŸâ€ä¹Ÿè¿›è¡Œå¯¹è±¡åŒ–ï¼Œåœ¨iOS6ä¹‹åï¼Œå¼•å…¥äº†autolayoutè¿™ä¸ªæ¦‚å¿µï¼Œç›¸åº”çš„ä¹Ÿå¢åŠ äº†NSLayoutConstraintè¿™ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å°±æ˜¯ä¸“é—¨ç”¨æ¥è¿›è¡Œçº¦æŸå¸ƒå±€çš„è®¾ç½®å¯¹è±¡ã€‚é€šè¿‡è¿™ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®ç±»ä¼¼è§†å›¾å¯¹è±¡ä¹‹é—´çš„é—´è·ï¼Œçº¦æŸçš„å®½é«˜ï¼Œæ¯”ä¾‹ç­‰å±æ€§ã€‚åˆ›å»ºNSLayoutConstraintå¯¹è±¡çš„æ–¹æ³•æœ‰ä¸¤ç§ï¼Œä¸‹é¢æˆ‘ä»¬åˆ†åˆ«ä»‹ç»ï¼š 1ã€ä½¿ç”¨Objective-Cé£æ ¼çš„æ–¹æ³•åˆ›å»ºçº¦æŸå¯¹è±¡æ‰€è°“Objective-Cé£æ ¼çš„æ–¹æ³•ï¼Œå°±æ˜¯é€šè¿‡åŸç”Ÿæšä¸¾å’Œä¸€äº›å±æ€§è®¾ç½®æ¥åˆ›å»ºNSLayoutConstraintå¯¹è±¡ã€‚ä½¿ç”¨NSLayoutConstraintç±»çš„å¦‚ä¸‹æ–¹æ³•ï¼š 1+(instancetype)constraintWithItem:(id)view1 attribute:(NSLayoutAttribute)attr1 relatedBy:(NSLayoutRelation)relation toItem:(nullable id)view2 attribute:(NSLayoutAttribute)attr2 multiplier:(CGFloat)multiplier constant:(CGFloat)c; å…ˆæ¥ä»‹ç»ä¸‹æ–¹æ³•ä¸­çš„å‚æ•°éƒ½æ˜¯ä»€ä¹ˆæ„ä¹‰ï¼Œæˆ‘ä»¬åº”è¯¥æ€ä¹ˆç”¨ä»–ä»¬ï¼š view1ï¼šè¦æ·»åŠ çº¦æŸçš„è§†å›¾å¯¹è±¡ã€‚ attr1ï¼šè¦çº¦æŸçš„å¯¹è±¡å±æ€§ï¼Œè¿™ä¸ªå°±æ˜¯ä¸€äº›æšä¸¾ï¼Œå¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627typedef NS_ENUM(NSInteger, NSLayoutAttribute) &#123; NSLayoutAttributeLeft = 1,//å·¦ NSLayoutAttributeRight,//å³ NSLayoutAttributeTop,//ä¸Š NSLayoutAttributeBottom,//ä¸‹ NSLayoutAttributeLeading,//èµ·å§‹è¾¹ï¼Œç±»ä¼¼å·¦ï¼Œåªåœ¨æŸäº›ä»å³å‘å·¦æ’åˆ—çš„è¯­è¨€ä¸­å’ŒNSLayoutAttributeLeftæœ‰å¤§åŒºåˆ« NSLayoutAttributeTrailing,//ç»“æŸè¾¹ NSLayoutAttributeWidth,//å®½åº¦ NSLayoutAttributeHeight,//é«˜åº¦ NSLayoutAttributeCenterX,//xä¸­å¿ƒ NSLayoutAttributeCenterY,//yä¸­å¿ƒ NSLayoutAttributeBaseline,//åŸºçº¿ NSLayoutAttributeLastBaseline = NSLayoutAttributeBaseline, NSLayoutAttributeFirstBaseline NS_ENUM_AVAILABLE_IOS(8_0), //ä¸‹é¢çš„å±æ€§æ˜¯è®¾ç½®çš„è¾¹è· æ„ä¹‰å’Œä¸Šé¢ç±»ä¼¼ å¯¹åº”å·¦ï¼Œå³ç­‰è¾¹è· NSLayoutAttributeLeftMargin NS_ENUM_AVAILABLE_IOS(8_0), NSLayoutAttributeRightMargin NS_ENUM_AVAILABLE_IOS(8_0), NSLayoutAttributeTopMargin NS_ENUM_AVAILABLE_IOS(8_0), NSLayoutAttributeBottomMargin NS_ENUM_AVAILABLE_IOS(8_0), NSLayoutAttributeLeadingMargin NS_ENUM_AVAILABLE_IOS(8_0), NSLayoutAttributeTrailingMargin NS_ENUM_AVAILABLE_IOS(8_0), NSLayoutAttributeCenterXWithinMargins NS_ENUM_AVAILABLE_IOS(8_0), NSLayoutAttributeCenterYWithinMargins NS_ENUM_AVAILABLE_IOS(8_0), //æ— ï¼Œåé¢ä¼šè¯´åº”ç”¨åœºæ™¯ NSLayoutAttributeNotAnAttribute = 0&#125;; relationï¼šçº¦æŸçš„é€‰é¡¹ï¼Œå¯¹åº”&lt;=,==,&gt;=è¿™äº›ï¼Œæšä¸¾å¦‚ä¸‹ï¼š 12345typedef NS_ENUM(NSInteger, NSLayoutRelation) &#123; NSLayoutRelationLessThanOrEqual = -1,//&lt;= NSLayoutRelationEqual = 0,//== NSLayoutRelationGreaterThanOrEqual = 1,//&gt;=&#125;; view2:ä¸ä¹‹å¯¹åº”æ·»åŠ çº¦æŸçš„è§†å›¾å¯¹è±¡ï¼Œä¾‹å¦‚ï¼Œå¦‚è¿‡æˆ‘è¦è®¾ç½®view1çš„ä¸Šè¾¹è·ç¦»çˆ¶è§†å›¾çš„ä¸Šè¾¹ä¸€å®šé—´è·ï¼Œè¿™ä¸ªview2å°±æ˜¯view1çš„çˆ¶è§†å›¾ï¼Œå¦‚æœæˆ‘è¦è®¾ç½®view1ä¸å¦ä¸€ä¸ªè§†å›¾ä¸€å®šè·ç¦»ï¼Œè¿™ä¸ªview2å°±æ˜¯å¦ä¸€ä¸ªè§†å›¾ã€‚ attr2ï¼šview2çš„è¦çº¦æŸçš„å±æ€§ï¼Œå’Œattr1å«ä¹‰ä¸€æ ·ã€‚ multiplie:çº¦æŸçš„æ¯”ä¾‹ï¼Œæ¯”å¦‚view1çš„å®½æ˜¯view2çš„å®½çš„ä¸¤å€ï¼Œè¿™ä¸ªmultiplieå°±æ˜¯2. Cï¼šè¿™æ˜¯å…·ä½“çš„çº¦æŸå€¼ å¯¹äºè¿™äº›å±æ€§ï¼Œæ–‡æ¡£ä¸Šæœ‰è¿™æ ·çš„è§£é‡Šï¼šview1.attr1 = view2.attr2 * multiplier + constant ä¾‹å¦‚ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªlabelï¼Œå°†å®ƒçš„å®½é«˜å›ºå®šä¸º100*100ï¼Œä½ç½®æ”¾åœ¨å±å¹•çš„ä¸­å¤®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„çº¦æŸä»£ç ï¼š 12345678910111213141516UILabel * label = [[UILabel alloc]init]; label.numberOfLines = 0; //ä½¿ç”¨ä»£ç å¸ƒå±€ éœ€è¦å°†è¿™ä¸ªå±æ€§è®¾ç½®ä¸ºNO label.translatesAutoresizingMaskIntoConstraints = NO; label.backgroundColor = [UIColor redColor]; //åˆ›å»ºxå±…ä¸­çš„çº¦æŸ NSLayoutConstraint * constraintx = [NSLayoutConstraint constraintWithItem:label attribute:NSLayoutAttributeCenterX relatedBy:NSLayoutRelationEqual toItem:self.view attribute:NSLayoutAttributeCenterX multiplier:1 constant:0]; //åˆ›å»ºyå±…ä¸­çš„çº¦æŸ NSLayoutConstraint * constrainty = [NSLayoutConstraint constraintWithItem:label attribute:NSLayoutAttributeCenterY relatedBy:NSLayoutRelationEqual toItem:self.view attribute:NSLayoutAttributeCenterY multiplier:1 constant:0]; //åˆ›å»ºå®½åº¦çº¦æŸ NSLayoutConstraint * constraintw = [NSLayoutConstraint constraintWithItem:label attribute:NSLayoutAttributeWidth relatedBy:NSLayoutRelationEqual toItem:nil attribute:NSLayoutAttributeNotAnAttribute multiplier:1 constant:100]; //åˆ›å»ºé«˜åº¦çº¦æŸ NSLayoutConstraint * constrainth = [NSLayoutConstraint constraintWithItem:label attribute:NSLayoutAttributeHeight relatedBy:NSLayoutRelationEqual toItem:nil attribute:NSLayoutAttributeNotAnAttribute multiplier:1 constant:100]; //æ·»åŠ çº¦æŸä¹‹å‰ï¼Œå¿…é¡»å°†è§†å›¾åŠ åœ¨çˆ¶è§†å›¾ä¸Š [self.view addSubview:label]; [self.view addConstraints:@[constraintx,constrainty,constrainth,constraintw]]; æ•ˆæœå¦‚ä¸‹ï¼š å¯ä»¥å‘ç°ï¼Œä¸€ä¸ªå¦‚æ­¤ç®€å•çš„çº¦æŸæ–¹å¼ï¼Œæˆ‘ä»¬ç”¨è¿™æ ·çš„ä»£ç è¦å†™è¿™ä¹ˆä¸€å¤§å¨ï¼Œéº»çƒ¦è€Œä¸”ä¸ç›´è§‚ã€‚äºæ˜¯ï¼Œappleåˆæä¾›ç»™æˆ‘ä»¬ä¸‹é¢ä¸€ç§æ–¹å¼ã€‚ 2.ä½¿ç”¨ASCLLå­—ç¬¦åˆ›é€ è‰ºæœ¯èˆ¬çš„æ ¼å¼åŒ–å­—ç¬¦ä¸²çº¦æŸçœ‹åˆ°è¿™ä¸ªå°æ ‡é¢˜æ˜¯ä¸æ˜¯çœ¼å‰ä¸€äº®ï¼Œè¿™ä¸ªæ ‡é¢˜ä¸æ˜¯æˆ‘å‡­ç©ºæƒ³è±¡å‡ºæ¥çš„ï¼Œappleçš„æ–‡æ¡£ä¸Šå°±æ˜¯è¿™ä¹ˆå†™çš„ã€‚ååˆ†å¯çˆ±ï¼Œå¯¹å§ã€‚ç›¸å¯¹äºNSLayoutConstraintä¸­çš„åˆ›å»ºæ–¹æ³•å¦‚ä¸‹ï¼š 1+ (NSArray&lt;__kindof NSLayoutConstraint *&gt; *)constraintsWithVisualFormat:(NSString *)format options:(NSLayoutFormatOptions)opts metrics:(nullable NSDictionary&lt;NSString *,id&gt; *)metrics views:(NSDictionary&lt;NSString *, id&gt; *)views; é‚£ä¹ˆæˆ‘ä»¬å…ˆæ¥çœ‹ï¼Œä»€ä¹ˆæ˜¯æ ¼å¼åŒ–çš„å­—ç¬¦ä¸²çº¦æŸã€‚ è¯´åˆ°æ ¼å¼åŒ–çš„å­—ç¬¦ä¸²çº¦æŸï¼Œè¦å…ˆæä¸€ä¸ªä¸œè¥¿VFLï¼švisual format languageâ€”â€”æ ¼å¼åŒ–çº¦æŸè¯­è¨€ï¼Œè¿™åˆæ˜¯ä»€ä¹ˆé¬¼ï¼Ÿç¡®å®ï¼Œè¿™ä¸ªä¸œè¥¿å†™å‡ºæ¥ç¬¬ä¸€çœ¼çœ‹ä¸Šå»çœŸçš„ä¸çŸ¥é“æ˜¯ä»€ä¹ˆé¬¼ï¼Œå°±æ¯”å¦‚è¦è®¾ç½®ä¸€ä¸ªlabelï¼Œè·ç¦»ä¸Šè¾¹100ï¼Œå·¦è¾¹20ï¼Œå®½é«˜éƒ½ä¸º100ï¼Œä»£ç å¦‚ä¸‹ï¼š 12345678910 label.numberOfLines = 0; label.translatesAutoresizingMaskIntoConstraints = NO; label.backgroundColor = [UIColor redColor]; //label.text=@&quot;12332322132131233213213&quot;; [self.view addSubview:label]; NSArray * constraintArray = [NSLayoutConstraint constraintsWithVisualFormat:@&quot;H:|-20-[label(100@1000)]&quot; options:0 metrics:nil views:NSDictionaryOfVariableBindings(label)]; NSArray * constraintArray2 = [NSLayoutConstraint constraintsWithVisualFormat:@&quot;V:|-100-[label(100)]&quot; options:0 metrics:nil views:NSDictionaryOfVariableBindings(label)]; [self.view addConstraints:constraintArray]; [self.view addConstraints:constraintArray2]; æ•ˆæœå¦‚ä¸‹ï¼š ä»£ç å°‘äº†å¾ˆå¤šï¼Œå¯¹å§ï¼Œä½†æ˜¯ä¸­é—´é‚£éƒ¨åˆ†å­—ç¬¦ä¸²ä»€ä¹ˆç©æ„ï¼Ÿä¸‹é¢æˆ‘ä»¬æ¥è§£é‡Šä¸€ä¸‹ã€‚ VFLè¯­è¨€æˆ‘ä¸ªäººè€Œè¨€ï¼Œä»–å¾ˆç±»ä¼¼äºå¤ä»£çš„è±¡å½¢æ–‡å­—(ä¸çŸ¥é“æ˜¯å¦appleçš„å·¥ç¨‹å¸ˆä»å…¶ä¸­å¾—åˆ°çµæ„Ÿ)ï¼Œå¯¹å¸ƒå±€çš„çº¦æŸè®¾ç½®æ˜¯ç›´è§‚çš„ç”¨ç¬¦å·è¡¨è¾¾å‡ºæ¥çš„ï¼Œä¾‹å¦‚ï¼š 1H:|-20-[label(100@1000)] å‰é¢çš„Hä»£è¡¨æ˜¯æ°´å¹³çš„å¸ƒå±€è¿˜æ˜¯å‚ç›´çš„å¸ƒå±€ï¼ŒHä»£è¡¨æ°´å¹³ï¼ŒVè¡¨ç¤ºå‚ç›´ï¼Œ|è¡¨ç¤ºçˆ¶è§†å›¾çš„è¾¹æ²¿ï¼Œ-20-è¡¨ç¤ºè·ç¦»20pxï¼Œ[]å†…æ˜¯è¦å¸ƒå±€æ‘†æ”¾çš„è§†å›¾å¯¹è±¡åï¼Œ()ä¸­æ˜¯çº¦æŸçš„å°ºå¯¸ï¼ŒHä¸‹åˆ™ä¸ºå®½åº¦ï¼ŒVä¸‹åˆ™ä¸ºé«˜åº¦,@åé¢çš„æ•°å­—ä»£è¡¨ä¼˜å…ˆçº§ã€‚ åˆ›å»ºæ–¹æ³•ä¸­çš„optionså‚æ•°ï¼Œç”¨æ¥è®¾ç½®å¯¹é½æ¨¡å¼ï¼Œä¸éœ€è¦å¯ä»¥å†™0ï¼š 1234567891011121314151617181920212223typedef NS_OPTIONS(NSUInteger, NSLayoutFormatOptions) &#123; NSLayoutFormatAlignAllLeft = (1 &lt;&lt; NSLayoutAttributeLeft), NSLayoutFormatAlignAllRight = (1 &lt;&lt; NSLayoutAttributeRight), NSLayoutFormatAlignAllTop = (1 &lt;&lt; NSLayoutAttributeTop), NSLayoutFormatAlignAllBottom = (1 &lt;&lt; NSLayoutAttributeBottom), NSLayoutFormatAlignAllLeading = (1 &lt;&lt; NSLayoutAttributeLeading), NSLayoutFormatAlignAllTrailing = (1 &lt;&lt; NSLayoutAttributeTrailing), NSLayoutFormatAlignAllCenterX = (1 &lt;&lt; NSLayoutAttributeCenterX), NSLayoutFormatAlignAllCenterY = (1 &lt;&lt; NSLayoutAttributeCenterY), NSLayoutFormatAlignAllBaseline = (1 &lt;&lt; NSLayoutAttributeBaseline), NSLayoutFormatAlignAllLastBaseline = NSLayoutFormatAlignAllBaseline, NSLayoutFormatAlignAllFirstBaseline NS_ENUM_AVAILABLE_IOS(8_0) = (1 &lt;&lt; NSLayoutAttributeFirstBaseline), NSLayoutFormatAlignmentMask = 0xFFFF, /* choose only one of these three */ NSLayoutFormatDirectionLeadingToTrailing = 0 &lt;&lt; 16, // default NSLayoutFormatDirectionLeftToRight = 1 &lt;&lt; 16, NSLayoutFormatDirectionRightToLeft = 2 &lt;&lt; 16, NSLayoutFormatDirectionMask = 0x3 &lt;&lt; 16, &#125;; metricså‚æ•°æ˜¯å±æ€§æ›¿æ¢å­—å…¸ï¼Œä¾‹å¦‚æˆ‘ä»¬ä¸Šè¾¹ç”¨åˆ°çš„è·ç¦»å·¦è¾¹ç•Œ20ï¼Œå¦‚æœè¿™ä¸ª20æ˜¯ä¸€ä¸ªå˜é‡width,æˆ‘ä»¬å¯ä»¥å°†20çš„åœ°æ–¹æ¢æˆwidthï¼Œç„¶åé…ç½®è¿™ä¸ªå­—å…¸ï¼š@{@â€widthâ€:@20}ï¼Œè¿™æ ·ï¼Œåœ¨å¸ƒå±€æ—¶ï¼Œç³»ç»Ÿä¼šæŠŠwidthæ¢æˆ20ã€‚ viewsæ˜¯å¯¹è±¡çš„æ˜ å°„å­—å…¸ï¼ŒåŸç†ä¹Ÿæ˜¯å°†å­—ç¬¦ä¸²ä¸­çš„å¯¹è±¡ålabelæ˜ å°„æˆçœŸå®çš„å¯¹è±¡ï¼ŒNSDictionaryOfVariableBindingsä¼šå¸®æˆ‘ä»¬ç”Ÿæˆè¿™æ ·çš„å­—å…¸ï¼Œæˆ‘ä»¬åªéœ€è¦æƒ³å¯¹è±¡ä¼ è¿›å»å³å¯ï¼Œå¦‚æœè¦æ‰‹åŠ¨åˆ›å»ºè¿™å­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š@{@â€labelâ€ï¼šlabel}. ä¸‰ã€ä½¿ç”¨aotulayoutè®¾è®¡ä¸€ä¸ªèŠå¤©ç•Œé¢çš„è¾“å…¥æ¡†ä»”ç»†è§‚å¯ŸQQæˆ–è€…å…¶ä»–èŠå¤©å·¥å…·çš„appä¸Šçš„è¾“å…¥æ¡†ï¼Œä¼šå‘ç°ä»–éå¸¸æ™ºèƒ½ï¼Œå®½åº¦ä¼šéšç€æˆ‘ä»¬è¾“å…¥æ–‡å­—çš„è¡Œæ•°è¿›è¡Œè‡ªé€‚åº”ï¼Œå¹¶ä¸”è¿™ä¸ªå®½åº¦ä¸æ˜¯æ— é™å¢å¤§çš„ï¼Œå½“æˆ‘ä»¬æ–‡å­—å¤šåˆ°ä¸€å®šè¡Œæ•°ï¼Œå®½åº¦ä¼šä¿æŒä¸å˜ï¼Œæ–‡æœ¬æ¡†å¯ä»¥è¿›è¡Œå†…å®¹æ»‘åŠ¨ï¼Œå¦‚æœä¸ç”¨autolayoutï¼Œè¿™ä¸ªåŠŸèƒ½ä¼šæ¯”è¾ƒæ£˜æ‰‹ä¸€äº›ï¼Œä½†æ˜¯ä½¿ç”¨å®ƒï¼Œä¼šå‘ç°è¿™æ˜¯å¦‚æ­¤çš„å®¹æ˜“ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344@interface ViewController ()&lt;UITextViewDelegate&gt;&#123; UITextView * textView ; NSArray * array1; NSArray * array2;&#125;@end@implementation ViewController- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view, typically from a nib. textView = [[UITextView alloc]init]; textView.layer.borderColor = [[UIColor grayColor]CGColor]; textView.layer.borderWidth = 1; textView.translatesAutoresizingMaskIntoConstraints = NO; textView.delegate=self; [self.view addSubview:textView]; array1 = [NSLayoutConstraint constraintsWithVisualFormat:@&quot;H:|-100-[textView]-100-|&quot; options:0 metrics:nil views:NSDictionaryOfVariableBindings(textView)]; array2 = [NSLayoutConstraint constraintsWithVisualFormat:@&quot;V:|-150-[textView(30)]&quot; options:0 metrics:nil views:NSDictionaryOfVariableBindings(textView)]; [self.view addConstraints:array1]; [self.view addConstraints:array2]; &#125;-(BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text&#123; //å½“æ–‡æœ¬é«˜åº¦å¤§äºtextViewçš„é«˜åº¦å¹¶ä¸”å°äº100æ—¶ï¼Œæ›´æ–°çº¦æŸ if (textView.contentSize.height&gt;textView.frame.size.height&amp;&amp;textView.contentSize.height&lt;100) &#123; float hight =textView.contentSize.height; //å°†ä»¥å‰çš„ç§»é™¤æ‰ [self.view removeConstraints:array1]; [self.view removeConstraints:array2]; array1 = [NSLayoutConstraint constraintsWithVisualFormat:@&quot;H:|-100-[textView]-100-|&quot; options:0 metrics:nil views:NSDictionaryOfVariableBindings(textView)]; array2 = [NSLayoutConstraint constraintsWithVisualFormat:@&quot;V:|-150-[textView(hight)]&quot; options:0 metrics:@&#123;@&quot;hight&quot;:[NSNumber numberWithFloat:hight]&#125; views:NSDictionaryOfVariableBindings(textView)]; [self.view addConstraints:array1]; [self.view addConstraints:array2]; &#125; //æ›´æ–°çº¦æŸ [self.view updateConstraintsIfNeeded]; return YES;&#125; ç°åœ¨ï¼Œå½“æˆ‘ä»¬è¿›è¡Œè¾“å…¥çš„æ—¶å€™ï¼ŒtextViewçš„é«˜åº¦å¯ä»¥è‡ªé€‚åº”æ–‡å­—è¡Œæ•°äº†ã€‚ å››ã€é€šè¿‡åŠ¨ç”»æ”¹å–„æ›´æ–°çº¦æŸæ—¶çš„æ•ˆæœè¿™ä¸€ç‚¹éå¸¸collï¼Œä¸Šé¢æˆ‘ä»¬å·²ç»å®ç°äº†textViewéšæ–‡æœ¬çš„è¡Œæ•°é«˜åº¦è¿›è¡Œè‡ªé€‚åº”ï¼Œä½†æ˜¯å˜åŒ–çš„æ•ˆæœååˆ†ç”Ÿç¡¬ï¼Œè¿˜è¦appleçš„åŠ¨ç”»æ¡†æ¶æ”¯æŒautolayoutï¼ŒæŠŠåˆšæ‰è°ƒç”¨æ›´æ–°çº¦æŸçš„åœ°æ–¹è¿›è¡Œå¦‚ä¸‹ä¿®æ”¹ï¼š 123[UIView animateWithDuration:1 animations:^&#123; [self.view layoutIfNeeded]; &#125;]; è¯•è¯•çœ‹ï¼Œå˜æ¢çš„æ•ˆæœå·²ç»éå¸¸å¹³æ»‘äº†ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"iOSæµå¸ƒå±€UICollectionViewç³»åˆ—ä¸ƒâ€”â€”ä¸‰ç»´ä¸­çš„çƒå‹å¸ƒå±€","slug":"142iOSæµå¸ƒå±€UICollectionViewç³»åˆ—ä¸ƒâ€”â€”ä¸‰ç»´ä¸­çš„çƒå‹å¸ƒå±€","date":"2015-10-28T16:00:00.000Z","updated":"2021-07-03T12:45:53.847Z","comments":true,"path":"2015/10/29/142iOSæµå¸ƒå±€UICollectionViewç³»åˆ—ä¸ƒâ€”â€”ä¸‰ç»´ä¸­çš„çƒå‹å¸ƒå±€/","link":"","permalink":"http://huishao.cc/2015/10/29/142iOSæµå¸ƒå±€UICollectionViewç³»åˆ—ä¸ƒâ€”â€”ä¸‰ç»´ä¸­çš„çƒå‹å¸ƒå±€/","excerpt":"","text":"iOSæµå¸ƒå±€UICollectionViewç³»åˆ—ä¸ƒâ€”â€”ä¸‰ç»´ä¸­çš„çƒå‹å¸ƒå±€ä¸€ã€å¼•è¨€é€šè¿‡6ç¯‡çš„åšå®¢ï¼Œä»å¹³é¢ä¸Šæœ€ç®€å•çš„è§„åˆ™æ‘†æ”¾çš„å¸ƒå±€ï¼Œåˆ°ä¸è§„åˆ™çš„ç€‘å¸ƒæµå¸ƒå±€ï¼Œå†åˆ°å¹³é¢ä¸­çš„åœ†ç¯å¸ƒå±€ï¼Œæˆ‘ä»¬çªç ´äº†çº¿æ€§å¸ƒå±€çš„å±€é™ï¼Œåœ¨åé¢ï¼Œæˆ‘ä»¬å°†å¸ƒå±€æ‰©å±•åˆ°äº†ç©ºé—´ï¼Œåœ¨Zè½´ä¸Šè¿›è¡Œäº†å¹³ç§»ï¼Œæˆ‘ä»¬å®ç°äº†ä¸€ä¸ªç±»ä¼¼UIPickerViewçš„å¸ƒå±€æ¨¡å‹ï¼Œå…¶å®æˆ‘ä»¬è¿˜å¯ä»¥å†è¿›ä¸€æ­¥ï¼Œç±»æ¯”äºå¹³é¢å¸ƒå±€ï¼ŒpicKerViewåªæ˜¯çº¿æ€§æ’åˆ—å¸ƒå±€åœ¨ç©ºé—´ä¸Šçš„æ—‹è½¬ä¸å¹³ç§»ï¼Œè¿™æ¬¡ï¼Œæˆ‘ä»¬æ›´åŠ å……åˆ†äº†åˆ©ç”¨ä¸€ä¸‹ç©ºé—´çš„å°ºå¯¸ï¼Œæ¥è®¾è®¡ä¸€ä¸ªåœ†çƒçš„å¸ƒå±€æ¨¡å‹ã€‚ä»¥ä¸‹æ˜¯å‰å‡ ç¯‡åšå®¢åœ°å€ï¼š 1.åˆè¯†ä¸ç®€å•å®ç”¨UICollectionViewï¼šhttp://my.oschina.net/u/2340880/blog/522613 2.UICollectionViewçš„ä»£ç†æ–¹æ³•ï¼šhttp://my.oschina.net/u/2340880/blog/522682 3.å®ç”¨FlowLayoutè¿›è¡Œæ›´çµæ´»å¸ƒå±€ï¼šhttp://my.oschina.net/u/2340880/blog/522748 4.è‡ªå®šä¹‰FlowLayoutè¿›è¡Œç€‘å¸ƒæµå¸ƒå±€ï¼šhttp://my.oschina.net/u/2340880/blog/522806 5.å¹³é¢åœ†ç¯å¸ƒå±€çš„å®ç°ï¼šhttp://my.oschina.net/u/2340880/blog/523064 6.å°†å¸ƒå±€ä»å¹³é¢åº”ç”¨åˆ°ç©ºé—´ï¼šhttp://my.oschina.net/u/2340880/blog/523341 äºŒã€å°†å¸ƒå±€æ‰©å±•ä¸ºç©ºé—´çƒå‹åœ¨viewControllerä¸­å…ˆå®ç°ä¸€äº›å‡†å¤‡ä»£ç ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view, typically from a nib. MyLayout * layout = [[MyLayout alloc]init]; UICollectionView * collect = [[UICollectionView alloc]initWithFrame:CGRectMake(0, 0, 320, 400) collectionViewLayout:layout]; collect.delegate=self; collect.dataSource=self; //è¿™é‡Œè®¾ç½®çš„åç§»é‡æ˜¯ä¸ºäº†æ— ç¼è¿›è¡Œå¾ªç¯çš„æ»šåŠ¨ï¼Œå…·ä½“åœ¨ä¸Šä¸€ç¯‡åšå®¢ä¸­æœ‰è§£é‡Š collect.contentOffset = CGPointMake(320, 400); [collect registerClass:[UICollectionViewCell class] forCellWithReuseIdentifier:@&quot;cellid&quot;]; [self.view addSubview:collect];&#125;-(NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView&#123; return 1;&#125;//æˆ‘ä»¬è¿”å›30çš„æ ‡ç­¾-(NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section&#123; return 30;&#125;-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath&#123; UICollectionViewCell * cell = [collectionView dequeueReusableCellWithReuseIdentifier:@&quot;cellid&quot; forIndexPath:indexPath]; cell.backgroundColor = [UIColor colorWithRed:arc4random()%255/255.0 green:arc4random()%255/255.0 blue:arc4random()%255/255.0 alpha:1]; UILabel * label = [[UILabel alloc]initWithFrame:CGRectMake(0, 0, 30, 30)]; label.text = [NSString stringWithFormat:@&quot;%ld&quot;,(long)indexPath.row]; [cell.contentView addSubview:label]; return cell;&#125;- (void)didReceiveMemoryWarning &#123; [super didReceiveMemoryWarning]; // Dispose of any resources that can be recreated.&#125;//è¿™é‡Œå¯¹æ»‘åŠ¨çš„contentOffsetè¿›è¡Œç›‘æ§ï¼Œå®ç°å¾ªç¯æ»šåŠ¨-(void)scrollViewDidScroll:(UIScrollView *)scrollView&#123; if (scrollView.contentOffset.y&lt;200) &#123; scrollView.contentOffset = CGPointMake(scrollView.contentOffset.x, scrollView.contentOffset.y+10*400); &#125;else if(scrollView.contentOffset.y&gt;11*400)&#123; scrollView.contentOffset = CGPointMake(scrollView.contentOffset.x, scrollView.contentOffset.y-10*400); &#125; if (scrollView.contentOffset.x&lt;160) &#123; scrollView.contentOffset = CGPointMake(scrollView.contentOffset.x+10*320,scrollView.contentOffset.y); &#125;else if(scrollView.contentOffset.x&gt;11*320)&#123; scrollView.contentOffset = CGPointMake(scrollView.contentOffset.x-10*320,scrollView.contentOffset.y); &#125;&#125; è¿™é‡Œé¢çš„ä»£ç æ¯”è¾ƒä¸Šä¸€ç¯‡åšå®¢ä¸­çš„å¹¶æ²¡æœ‰ä»€ä¹ˆå¤§çš„æ”¹åŠ¨ï¼Œåªæ˜¯åšäº†æ¨ªåæ ‡çš„å…¼å®¹ã€‚ åœ¨æˆ‘ä»¬çš„layoutç±»ä¸­ï¼Œå°†ä»£ç ä¿®æ”¹æˆå¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859-(void)prepareLayout&#123; [super prepareLayout]; &#125;//è¿”å›çš„æ»šåŠ¨èŒƒå›´å¢åŠ äº†å¯¹xè½´çš„å…¼å®¹-(CGSize)collectionViewContentSize&#123; return CGSizeMake( self.collectionView.frame.size.width*([self.collectionView numberOfItemsInSection:0]+2), self.collectionView.frame.size.height*([self.collectionView numberOfItemsInSection:0]+2));&#125;-(BOOL)shouldInvalidateLayoutForBoundsChange:(CGRect)newBounds&#123; return YES;&#125;-(UICollectionViewLayoutAttributes *)layoutAttributesForItemAtIndexPath:(NSIndexPath *)indexPath&#123; UICollectionViewLayoutAttributes * atti = [UICollectionViewLayoutAttributes layoutAttributesForCellWithIndexPath:indexPath]; //è·å–itemçš„ä¸ªæ•° int itemCounts = (int)[self.collectionView numberOfItemsInSection:0]; atti.center = CGPointMake(self.collectionView.frame.size.width/2+self.collectionView.contentOffset.x, self.collectionView.frame.size.height/2+self.collectionView.contentOffset.y); atti.size = CGSizeMake(30, 30); CATransform3D trans3D = CATransform3DIdentity; trans3D.m34 = -1/900.0; CGFloat radius = 15/tanf(M_PI*2/itemCounts/2); //æ ¹æ®åç§»é‡ æ”¹å˜è§’åº¦ //æ·»åŠ äº†ä¸€ä¸ªxçš„åç§»é‡ float offsety = self.collectionView.contentOffset.y; float offsetx = self.collectionView.contentOffset.x; //åˆ†åˆ«è®¡ç®—åç§»çš„è§’åº¦ float angleOffsety = offsety/self.collectionView.frame.size.height; float angleOffsetx = offsetx/self.collectionView.frame.size.width; CGFloat angle1 = (float)(indexPath.row+angleOffsety-1)/itemCounts*M_PI*2; //xï¼Œyçš„é»˜è®¤æ–¹å‘ç›¸å CGFloat angle2 = (float)(indexPath.row-angleOffsetx-1)/itemCounts*M_PI*2; //è¿™é‡Œæˆ‘ä»¬è¿›è¡Œå››ä¸ªæ–¹å‘çš„æ’åˆ— if (indexPath.row%4==1) &#123; trans3D = CATransform3DRotate(trans3D, angle1, 1.0,0, 0); &#125;else if(indexPath.row%4==2)&#123; trans3D = CATransform3DRotate(trans3D, angle2, 0, 1, 0); &#125;else if(indexPath.row%4==3)&#123; trans3D = CATransform3DRotate(trans3D, angle1, 0.5,0.5, 0); &#125;else&#123; trans3D = CATransform3DRotate(trans3D, angle1, 0.5,-0.5,0); &#125; trans3D = CATransform3DTranslate(trans3D, 0, 0, radius); atti.transform3D = trans3D; return atti;&#125;-(NSArray&lt;UICollectionViewLayoutAttributes *&gt; *)layoutAttributesForElementsInRect:(CGRect)rect&#123; NSMutableArray * attributes = [[NSMutableArray alloc]init]; //éå†è®¾ç½®æ¯ä¸ªitemçš„å¸ƒå±€å±æ€§ for (int i=0; i&lt;[self.collectionView numberOfItemsInSection:0]; i++) &#123; [attributes addObject:[self layoutAttributesForItemAtIndexPath:[NSIndexPath indexPathForItem:i inSection:0]]]; &#125; return attributes;&#125; å¸ƒå±€æ•ˆæœå¦‚ä¸‹ï¼š æ»‘åŠ¨å±å¹•ï¼Œè¿™ä¸ªåœ†çƒæ˜¯å¯ä»¥è¿›è¡Œæ»šåŠ¨çš„ã€‚ TIPï¼šè¿™é‡Œæˆ‘ä»¬åªå¹³å‡åˆ†é…äº†å››ä¸ªæ–¹å‘ä¸Šçš„å¸ƒå±€ï¼Œå¦‚æœitemæ›´åŠ å°ä¹Ÿæ›´åŠ å¤šï¼Œæˆ‘ä»¬å¯ä»¥åˆ†é…åˆ°æ›´å¤šçš„æ–¹å‘ä¸Šï¼Œä½¿çƒä½“æ›´åŠ å……å®ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"iOSæµå¸ƒå±€UICollectionViewç³»åˆ—å…­â€”â€”å°†å¸ƒå±€ä»å¹³é¢åº”ç”¨åˆ°ç©ºé—´","slug":"141iOSæµå¸ƒå±€UICollectionViewç³»åˆ—å…­â€”â€”å°†å¸ƒå±€ä»å¹³é¢åº”ç”¨åˆ°ç©ºé—´","date":"2015-10-27T16:00:00.000Z","updated":"2021-07-03T12:42:34.298Z","comments":true,"path":"2015/10/28/141iOSæµå¸ƒå±€UICollectionViewç³»åˆ—å…­â€”â€”å°†å¸ƒå±€ä»å¹³é¢åº”ç”¨åˆ°ç©ºé—´/","link":"","permalink":"http://huishao.cc/2015/10/28/141iOSæµå¸ƒå±€UICollectionViewç³»åˆ—å…­â€”â€”å°†å¸ƒå±€ä»å¹³é¢åº”ç”¨åˆ°ç©ºé—´/","excerpt":"","text":"iOSæµå¸ƒå±€UICollectionViewç³»åˆ—å…­â€”â€”å°†å¸ƒå±€ä»å¹³é¢åº”ç”¨åˆ°ç©ºé—´ä¸€ã€å¼•è¨€å‰é¢ï¼Œæˆ‘ä»¬å°†å¸ƒå±€ç”±çº¿æ€§çš„ç€‘å¸ƒæµå¸ƒå±€æ‰©å±•åˆ°äº†åœ†ç¯å¸ƒå±€ï¼Œè¿™ä½¿æˆ‘ä»¬ä½¿ç”¨UICollectionViewçš„å¸ƒå±€æ€è·¯å¤§å¤§è¿ˆè¿›äº†ä¸€æ­¥ï¼Œè¿™æ¬¡ï¼Œæˆ‘ä»¬ç©çš„æ›´åŠ ç‚«ä¸€äº›ï¼Œæƒ³åŠæ³•å°†å¸ƒå±€åº”ç”¨çš„ç©ºé—´ï¼Œä½ æ˜¯å¦è¿˜è®°å¾—ï¼Œåœ¨ç®¡ç†å¸ƒå±€çš„itemçš„å…·ä½“å±æ€§çš„ç±»UICollectionViewLayoutAttributrsç±»ä¸­ï¼Œæœ‰transform3Dè¿™ä¸ªå±æ€§ï¼Œé€šè¿‡è¿™ä¸ªå±æ€§çš„è®¾ç½®ï¼Œæˆ‘ä»¬çœŸçš„å¯ä»¥åœ¨ç©ºé—´çš„åæ ‡ç³»ä¸­è¿›è¡Œå¸ƒå±€è®¾è®¡ã€‚iOSç³»ç»Ÿçš„æ§ä»¶ä¸­ï¼Œä¹Ÿå¹¶éæ²¡æœ‰è¿™æ ·çš„å…ˆä¾‹ï¼ŒUIPickerViewå°±æ˜¯å¾ˆå¥½çš„ä¸€ä¸ªå®ä¾‹ï¼Œè¿™ç¯‡åšå®¢ï¼Œæˆ‘ä»¬å°±é€šè¿‡ä½¿ç”¨UICollectionViewå®ç°ä¸€ä¸ªç±»ä¼¼ç³»ç»Ÿçš„UIPickerViewçš„å¸ƒå±€è§†å›¾ï¼Œæ¥ä½“ä¼šUICollectionViewåœ¨3Dæ§ä»¶å¸ƒå±€çš„é­…åŠ›ã€‚ç³»ç»Ÿçš„pickerViewæ•ˆæœå¦‚ä¸‹ï¼š äºŒã€å…ˆæ¥å®ç°ä¸€ä¸ªç‚«é…·çš„æ»šè½®ç©ºé—´å¸ƒå±€ä¸‡ä¸ˆçš„é«˜æ¥¼ä¹Ÿæ˜¯ç”±ä¸€ç –ä¸€ç“¦å †ç Œè€Œæˆï¼Œåœ¨æˆ‘ä»¬å®Œå…¨æ¨¡æ‹Ÿç³»ç»ŸpickerViewå‰ï¼Œæˆ‘ä»¬åº”è¯¥å…ˆå°†è§†å›¾çš„å¸ƒå±€æ‘†æ”¾è¿™ä¸€é—®é¢˜è§£å†³ã€‚æˆ‘ä»¬ä¾ç„¶æ¥åˆ›å»ºä¸€ä¸ªç±»ï¼Œç»§æ‰¿äºUICollectionViewLayoutï¼š 123@interface MyLayout : UICollectionViewLayout@end å¯¹äº.mæ–‡ä»¶çš„å†…å®¹ï¼Œå‰å‡ ç¯‡åšå®¢ä¸­æˆ‘ä»¬éƒ½æ˜¯åœ¨prepareLayoutä¸­è¿›è¡Œå¸ƒå±€çš„é™æ€è®¾ç½®ï¼Œé‚£æ˜¯å› ä¸ºæˆ‘ä»¬å‰å‡ ç¯‡åšå®¢ä¸­çš„å¸ƒå±€éƒ½æ˜¯é™æ€çš„ï¼Œå¸ƒå±€å¹¶ä¸ä¼šéšç€æˆ‘ä»¬çš„æ‰‹åŠ¿æ“ä½œè€Œå‘ç”Ÿå¤ªå¤§çš„å˜åŒ–ï¼Œå› æ­¤æˆ‘ä»¬å…¨éƒ¨åœ¨prepareLayoutä¸­ä¸€æ¬¡é…ç½®å®Œäº†ã€‚è€Œæˆ‘ä»¬è¿™æ¬¡è¦è®¨è®ºçš„å¸ƒå±€åˆ™ä¸åŒï¼ŒpickerViewä¼šéšç€æˆ‘ä»¬æ‰‹æŒ‡çš„æ‹–åŠ¨è€Œè¿›è¡Œæ»šåŠ¨ï¼Œå› æ­¤UICollectionViewä¸­çš„æ¯ä¸€ä¸ªitemçš„å¸ƒå±€æ˜¯åœ¨ä¸æ–­å˜åŒ–çš„ï¼Œæ‰€ä»¥è¿™æ¬¡ï¼Œæˆ‘ä»¬é‡‡ç”¨åŠ¨æ€é…ç½®çš„æ–¹å¼ï¼Œåœ¨layoutAttributesForItemAtIndexPathæ–¹æ³•ä¸­è¿›è¡Œæ¯ä¸ªitemçš„å¸ƒå±€å±æ€§è®¾ç½®ã€‚ è‡³äºlayoutAttributesForItemAtIndexPathæ–¹æ³•ï¼Œå®ƒä¹Ÿæ˜¯UICollectionViewLayoutç±»ä¸­çš„æ–¹æ³•ï¼Œç”¨äºæˆ‘ä»¬è‡ªå®šä¹‰æ—¶è¿›è¡Œé‡å†™ï¼Œè‡³äºä¸ºä»€ä¹ˆåŠ¨æ€å¸ƒå±€è¦åœ¨è¿™é‡Œé¢é…ç½®itemçš„å¸ƒå±€å±æ€§ï¼Œåé¢æˆ‘ä»¬ä¼šäº†è§£åˆ°ã€‚ åœ¨ç¼–å†™æˆ‘ä»¬çš„å¸ƒå±€ç±»ä¹‹å‰ï¼Œå…ˆåšå¥½å‡†å¤‡å·¥ä½œï¼Œåœ¨viewControllerä¸­ï¼Œå®ç°å¦‚ä¸‹ä»£ç ï¼š 12345678910111213141516171819202122232425- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view, typically from a nib. MyLayout * layout = [[MyLayout alloc]init]; UICollectionView * collect = [[UICollectionView alloc]initWithFrame:CGRectMake(0, 0, 320, 400) collectionViewLayout:layout]; collect.delegate=self; collect.dataSource=self; [collect registerClass:[UICollectionViewCell class] forCellWithReuseIdentifier:@&quot;cellid&quot;]; [self.view addSubview:collect];&#125;-(NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView&#123; return 1;&#125;-(NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section&#123; return 10;&#125;-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath&#123; UICollectionViewCell * cell = [collectionView dequeueReusableCellWithReuseIdentifier:@&quot;cellid&quot; forIndexPath:indexPath]; cell.backgroundColor = [UIColor colorWithRed:arc4random()%255/255.0 green:arc4random()%255/255.0 blue:arc4random()%255/255.0 alpha:1]; UILabel * label = [[UILabel alloc]initWithFrame:CGRectMake(0, 0, 250, 80)]; label.text = [NSString stringWithFormat:@&quot;æˆ‘æ˜¯ç¬¬%ldè¡Œ&quot;,(long)indexPath.row]; [cell.contentView addSubview:label]; return cell;&#125; ä¸Šé¢æˆ‘åˆ›å»ºäº†10ä¸ªItemï¼Œå¹¶ä¸”åœ¨æ¯ä¸ªItemä¸Šæ·»åŠ äº†ä¸€ä¸ªæ ‡ç­¾ï¼Œæ ‡å†™æ˜¯ç¬¬å‡ è¡Œã€‚ åœ¨æˆ‘ä»¬è‡ªå®šä¹‰çš„å¸ƒå±€ç±»ä¸­é‡å†™layoutAttributesForElementsInRectï¼Œåœ¨å…¶ä¸­è¿”å›æˆ‘ä»¬çš„å¸ƒå±€æ•°ç»„ï¼š 12345678-(NSArray&lt;UICollectionViewLayoutAttributes *&gt; *)layoutAttributesForElementsInRect:(CGRect)rect&#123; NSMutableArray * attributes = [[NSMutableArray alloc]init]; //éå†è®¾ç½®æ¯ä¸ªitemçš„å¸ƒå±€å±æ€§ for (int i=0; i&lt;[self.collectionView numberOfItemsInSection:0]; i++) &#123; [attributes addObject:[self layoutAttributesForItemAtIndexPath:[NSIndexPath indexPathForItem:i inSection:0]]]; &#125; return attributes;&#125; ä¹‹åï¼Œåœ¨æˆ‘ä»¬å¸ƒå±€ç±»ä¸­é‡å†™layoutAttributesForItemAtIndexPathæ–¹æ³•ï¼š 12345678910111213-(UICollectionViewLayoutAttributes *)layoutAttributesForItemAtIndexPath:(NSIndexPath *)indexPath&#123; //åˆ›å»ºä¸€ä¸ªitemå¸ƒå±€å±æ€§ç±» UICollectionViewLayoutAttributes * atti = [UICollectionViewLayoutAttributes layoutAttributesForCellWithIndexPath:indexPath]; //è·å–itemçš„ä¸ªæ•° int itemCounts = (int)[self.collectionView numberOfItemsInSection:0]; //è®¾ç½®æ¯ä¸ªitemçš„å¤§å°ä¸º260*100 atti.size = CGSizeMake(260, 100); /* åè¾¹ä»‹ç»çš„ä»£ç æ·»åŠ åœ¨è¿™é‡Œ */ return atti;&#125; ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä»€ä¹ˆéƒ½æ²¡æœ‰åšï¼Œä¸‹é¢æˆ‘ä»¬ä¸€æ­¥æ­¥æ¥å®ç°3Dçš„æ»šè½®æ•ˆæœã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆå°†æ‰€æœ‰çš„itemçš„ä½ç½®éƒ½è®¾ç½®ä¸ºcollectionViewçš„ä¸­å¿ƒï¼š 1atti.center = CGPointMake(self.collectionView.frame.size.width/2, self.collectionView.frame.size.height/2); è¿™æ—¶ï¼Œå¦‚æœæˆ‘ä»¬è¿è¡Œç¨‹åºçš„è¯ï¼Œæ‰€æœ‰iteméƒ½å°†ä¸€å±‚å±‚è´´åœ¨å±å¹•çš„ä¸­å¤®ï¼Œå¦‚ä¸‹ï¼š å¾ˆä¸‘å¯¹å§ï¼Œä¹‹åæˆ‘ä»¬æ¥è®¾ç½®æ¯ä¸ªitemçš„3Dæ•ˆæœ,åœ¨ä¸Šé¢çš„å¸ƒå±€æ–¹æ³•ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç : 12345678910111213141516 //åˆ›å»ºä¸€ä¸ªtransform3Dç±» //CATransform3Dæ˜¯ä¸€ä¸ªç±»ä¼¼çŸ©é˜µçš„ç»“æ„ä½“ //CATransform3DIdentityåˆ›å»ºç©ºå¾—çŸ©é˜µ CATransform3D trans3D = CATransform3DIdentity; //è¿™ä¸ªå€¼è®¾ç½®çš„æ˜¯é€è§†åº¦ï¼Œå½±å“è§†è§‰ç¦»æŠ•å½±å¹³é¢çš„è·ç¦» trans3D.m34 = -1/900.0; //ä¸‹é¢è¿™äº›å±æ€§ åé¢ä¼šå…·ä½“ä»‹ç» //è¿™ä¸ªæ˜¯3Dæ»šè½®çš„åŠå¾„ CGFloat radius = 50/tanf(M_PI*2/itemCounts/2); //è®¡ç®—æ¯ä¸ªitemåº”è¯¥æ—‹è½¬çš„è§’åº¦ CGFloat angle = (float)(indexPath.row)/itemCounts*M_PI*2; //è¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„CATransform3Då¯¹è±¡ï¼Œåœ¨åŸæ¥çš„åŸºç¡€ä¸Šè¿›è¡Œæ—‹è½¬æ•ˆæœçš„è¿½åŠ  //ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæ—‹è½¬çš„å¼§åº¦ï¼Œåä¸‰ä¸ªåˆ†åˆ«å¯¹åº”xï¼Œyï¼Œzè½´ï¼Œæˆ‘ä»¬éœ€è¦ä»¥xè½´è¿›è¡Œæ—‹è½¬ trans3D = CATransform3DRotate(trans3D, angle, 1.0, 0, 0); //è¿›è¡Œè®¾ç½® atti.transform3D = trans3D; å¯¹äºä¸Šé¢çš„radiuså±æ€§ï¼Œè¿ç”¨äº†ä¸€äº›ç®€å•çš„å‡ ä½•å’Œä¸‰è§’å‡½æ•°çš„çŸ¥è¯†ã€‚å¦‚æœæˆ‘ä»¬å°†ç³»ç»Ÿçš„pickerViewæ²¿ç€yè½´æ—‹è½¬90Â°ï¼Œä½ ä¼šå‘ç°ä¾§é¢çš„å®ƒæ˜¯ä¸€ä¸ªè§„åˆ™çš„æ­£å¤šè¾¹å½¢ï¼Œè¿™é‡Œçš„radiuså°±æ˜¯è¿™ä¸ªå¤šè¾¹å½¢ä¸­å¿ƒåˆ°å…¶è¾¹çš„å‚ç›´è·ç¦»ï¼Œä¹Ÿæ˜¯å†…åˆ‡åœ†çš„åŠå¾„ï¼Œæ‰€æœ‰çš„itemæ‹¼æˆäº†ä¸€ä¸ªæ­£å¤šè¾¹å½¢ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š é€šè¿‡ç®€å•çš„æ•°å­¦çŸ¥è¯†ï¼Œh/2å¼¦å¯¹åº”çš„è§’çš„å¼§åº¦ä¸º2*pi/(è¾¹æ•°)/2ï¼Œåœ¨æ ¹æ®ä¸‰è§’å‡½æ•°ç›¸å…³çŸ¥è¯†å¯çŸ¥ï¼Œè¿™ä¸ªè§’çš„æ­£åˆ‡å€¼ä¸ºh/2/radiusï¼Œè¿™å°±æ˜¯æˆ‘ä»¬radiusçš„ç”±æ¥ã€‚ å¯¹äºangleå±æ€§ï¼Œå®ƒæ˜¯æ¯ä¸€ä¸ªitemçš„xè½´æ—‹è½¬åº¦æ•°ï¼Œå¦‚æœæˆ‘ä»¬å°†æ‰€æœ‰itemçš„ä¸­å¿ƒéƒ½æ”¾åœ¨ä¸€ç‚¹ï¼Œé€šè¿‡æ—‹è½¬è®©å®ƒä»¬æ•£å¼€å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š æ¯ä¸ªitemæ—‹è½¬çš„å¼§åº¦å°±æ˜¯å…¶ç´¢å¼•/(2*pi)ã€‚ é€šè¿‡ä¸Šé¢çš„è®¾ç½®ï¼Œæˆ‘ä»¬å†è¿è¡Œä»£ç ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š ä»”ç»†è§‚å¯Ÿæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œitemä»¥xä¸­è½´çº¿è¿›è¡Œäº†æ—‹è½¬å¹³å‡å¸ƒå±€ï¼Œä¾§é¢çš„æ•ˆæœå°±æ˜¯æˆ‘ä»¬ä¸Šé¢çš„ç®€ç¬”ç”»é‚£æ ·ï¼Œä¸‹é¢è¦è¿›è¡Œæˆ‘ä»¬çš„ç¬¬ä¸‰æ­¥äº†ï¼Œå°†è¿™ä¸ªitemï¼Œå…¨éƒ¨æ²¿ç€å…¶Zè½´å‘å‰æ‹‰ï¼Œå°±å¯ä»¥æˆä¸ºæˆ‘ä»¬æ»šè½®çš„æ•ˆæœï¼Œç¤ºä¾‹å›¾å¦‚ä¸‹ï¼š æˆ‘ä»¬ç»§ç»­åœ¨åˆšæ‰çš„ä»£ç åé¢æ·»åŠ è¿™è¡Œä»£ç ï¼š 12 //è¿™ä¸ªæ–¹æ³•ä¹Ÿè¿”å›ä¸€ä¸ªtransform3Då¯¹è±¡ï¼Œè¿½åŠ å¹³ç§»æ•ˆæœï¼Œåé¢ä¸‰ä¸ªå‚æ•°ï¼Œå¯¹åº”å¹³ç§»çš„xï¼Œyï¼Œzè½´ï¼Œæˆ‘ä»¬æ²¿zè½´å¹³ç§» trans3D = CATransform3DTranslate(trans3D, 0, 0, radius); å†æ¬¡è¿è¡Œï¼Œæ•ˆæœå¦‚ä¸‹ï¼š å¸ƒå±€çš„æ•ˆæœæˆ‘ä»¬å·²ç»å®Œæˆäº†ï¼Œç¦»æˆåŠŸå¾ˆè¿‘äº†å¯¹å§ï¼Œåªæ˜¯ç°åœ¨çš„å¸ƒå±€æ˜¯é™æ€çš„ï¼Œæˆ‘ä»¬ä¸èƒ½æ»‘åŠ¨è¿™ä¸ªæ»šè½®ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç”¨åŠ¨æ€æ»‘åŠ¨åšä¸€äº›å¤„ç†ã€‚ ä¸‰ã€è®©æ»šè½®æ»‘åŠ¨èµ·æ¥ é€šè¿‡ä¸Šé¢çš„åŠªåŠ›ï¼Œæˆ‘ä»¬å·²ç»é™æ€å¸ƒå±€å‡ºäº†ä¸€ä¸ªç±»ä¼¼pickerViewçš„æ»šè½®ï¼Œç°åœ¨æˆ‘ä»¬å†æ¥æ·»åŠ æ»‘åŠ¨æ»šåŠ¨çš„æ•ˆæœ é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ç»™collectionViewä¸€ä¸ªæ»‘åŠ¨çš„èŒƒå›´ï¼Œæˆ‘ä»¬ä»¥ä¸€å±collectionViewçš„æ»‘åŠ¨è·ç¦»æ¥å½“åšæ»šè½®æ»šåŠ¨ä¸€ä¸‹çš„å‚ç…§ï¼Œæˆ‘ä»¬åœ¨å¸ƒå±€ç±»ä¸­çš„å¦‚ä¸‹æ–¹æ³•ä¸­è¿”å›æ»‘åŠ¨åŒºåŸŸï¼š 123-(CGSize)collectionViewContentSize&#123; return CGSizeMake(self.collectionView.frame.size.width, self.collectionView.frame.size.height*[self.collectionView numberOfItemsInSection:0]);&#125; è¿™æ—¶æˆ‘ä»¬çš„collectionViewå·²ç»å¯ä»¥è¿›è¡Œæ»‘åŠ¨ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœï¼Œæ»šè½®å¹¶æ²¡æœ‰æ»šåŠ¨ï¼Œè€Œæ˜¯éšç€æ»‘åŠ¨å‡ºäº†å±å¹•ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ»‘åŠ¨çš„æ—¶å€™ä¸åœçš„åŠ¨æ€å¸ƒå±€ï¼Œå°†æ»šè½®å§‹ç»ˆå›ºå®šåœ¨collectionViewçš„ä¸­å¿ƒï¼Œå…ˆéœ€è¦åœ¨å¸ƒå±€ç±»ä¸­å®ç°å¦‚ä¸‹æ–¹æ³•ï¼š 12345//è¿”å›yesï¼Œåˆ™ä¸€æœ‰å˜åŒ–å°±ä¼šåˆ·æ–°å¸ƒå±€-(BOOL)shouldInvalidateLayoutForBoundsChange:(CGRect)newBounds&#123; return YES; &#125; å°†ä¸Šé¢çš„å¸ƒå±€çš„ä¸­å¿ƒç‚¹è®¾ç½®åŠ ä¸Šä¸€ä¸ªåŠ¨æ€çš„åç§»é‡ï¼š 1 atti.center = CGPointMake(self.collectionView.frame.size.width/2, self.collectionView.frame.size.height/2+self.collectionView.contentOffset.y); ç°åœ¨åœ¨è¿è¡Œï¼Œä¼šå‘ç°æ»šè½®ä¼šéšç€æ»‘åŠ¨å§‹ç»ˆå›ºå®šåœ¨ä¸­é—´ï¼Œä½†æ˜¯è¿˜æ˜¯ä¸å¦‚äººæ„ï¼Œæ»šè½®å¹¶æ²¡æœ‰è½¬åŠ¨èµ·æ¥ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åŠ¨æ€çš„è®¾ç½®æ¯ä¸ªitemçš„æ—‹è½¬è§’åº¦ï¼Œè¿™æ ·è¿ç»­çœ‹èµ·æ¥ï¼Œæ»šè½®å°±è½¬äº†èµ·æ¥ï¼Œåœ¨ä¸Šé¢è®¾ç½®å¸ƒå±€çš„æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬åœ¨æ·»åŠ ä¸€äº›å¤„ç†ï¼š 12345 //è·å–å½“å‰çš„åç§»é‡ float offset = self.collectionView.contentOffset.y; //åœ¨è§’åº¦è®¾ç½®ä¸Šï¼Œæ·»åŠ ä¸€ä¸ªåç§»è§’åº¦ float angleOffset = offset/self.collectionView.frame.size.height; CGFloat angle = (float)(indexPath.row+angleOffset)/itemCounts*M_PI*2; å†çœ‹çœ‹æ•ˆæœï¼Œæ²¡é”™ï¼Œå°±æ˜¯è¿™ä¹ˆç®€å•ï¼Œæ»šè½®å·²ç»è½¬äº†èµ·æ¥ã€‚ å››ã€è®©å…¶å¾ªç¯æ»šåŠ¨çš„é€»è¾‘æˆ‘ä»¬å†è¿›ä¸€æ­¥ï¼Œå¦‚æœæ»šåŠ¨å¯ä»¥å¾ªç¯ï¼Œè¿™ä¸ªæ§ä»¶å°†æ›´åŠ ç‚«é…·ï¼Œæ·»åŠ è¿™æ ·çš„é€»è¾‘ä¹Ÿå¾ˆç®€å•ï¼Œé€šè¿‡ç›‘æµ‹scrollViewçš„åç§»é‡ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹é½è¿›è¡Œå¤„ç†ï¼Œå› ä¸ºcollectionViewç»§æ‰¿äºscrollViewï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨ViewControllerä¸­å®ç°å…¶ä»£ç†æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š 123456789-(void)scrollViewDidScroll:(UIScrollView *)scrollView&#123; //å°äºåŠå± åˆ™æ”¾åˆ°æœ€åä¸€å±å¤šåŠå± if (scrollView.contentOffset.y&lt;200) &#123; scrollView.contentOffset = CGPointMake(0, scrollView.contentOffset.y+10*400); //å¤§äºæœ€åä¸€å±å¤šä¸€å± æ”¾å›ç¬¬ä¸€å± &#125;else if(scrollView.contentOffset.y&gt;11*400)&#123; scrollView.contentOffset = CGPointMake(0, scrollView.contentOffset.y-10*400); &#125;&#125; å› ä¸ºå’±ä»¬çš„ç¯çŠ¶å¸ƒå±€ï¼Œä¸Šé¢çš„é€»è¾‘åˆšå¥½å¯ä»¥æ— ç¼å¯¹æ¥ï¼Œä½†æ˜¯ä¼šæœ‰æ–°çš„é—®é¢˜ï¼Œä¸€å¼€å§‹è¿è¡Œï¼Œæ»šè½®å°±æ˜¯å‡ºç°åœ¨æœ€åä¸€ä¸ªitemçš„ä½ç½®ï¼Œè€Œä¸æ˜¯ç¬¬ä¸€ä¸ªï¼Œå¹¶ä¸”æœ‰äº›ç›¸å…³çš„åœ°æ–¹ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦ä¸€äº›é€‚é…ï¼š åœ¨viewControllerä¸­ï¼š 12//ä¸€å¼€å§‹å°†collectionViewçš„åç§»é‡è®¾ç½®ä¸º1å±çš„åç§»é‡collect.contentOffset = CGPointMake(0, 400); åœ¨layoutç±»ä¸­ï¼š 1234//å°†æ»šåŠ¨èŒƒå›´è®¾ç½®ä¸º(itemæ€»æ•°+2)*æ¯å±é«˜åº¦ -(CGSize)collectionViewContentSize&#123; return CGSizeMake(self.collectionView.frame.size.width, self.collectionView.frame.size.height*([self.collectionView numberOfItemsInSection:0]+2));&#125; 12//å°†è®¡ç®—çš„å…·ä½“itemè§’åº¦å‘å‰é€’æ¨ä¸€ä¸ªCGFloat angle = (float)(indexPath.row+angleOffset-1)/itemCounts*M_PI*2; OKï¼Œæˆ‘ä»¬ç»ˆäºå¤§åŠŸå‘Šæˆäº†ï¼Œå¯ä»¥å‘ç°ï¼Œå®ç°è¿™æ ·ä¸€ä¸ªå¸ƒå±€æ•ˆæœç‚«é…·çš„æ§ä»¶ï¼Œä»£ç å…¶å®å¹¶æ²¡æœ‰å¤šå°‘ï¼Œç›¸æ¯”ï¼Œæ•°å­¦é€»è¾‘è¦æ¯”ç¼–å†™ä»£ç æœ¬èº«å›°éš¾ï¼Œè¿™ååˆ†ç±»ä¼¼æ•°å­¦ä¸­çš„å‡ ä½•é—®é¢˜ï¼Œå¦‚æœä½ å¼„æ¸…äº†é€»è¾‘ï¼Œè§£å†³æ˜¯åˆ†åˆ†é’Ÿçš„äº‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™æ ·çš„ä¸€ä¸ªæ€è·¯ï¼Œè®¾è®¡æ›´å¤š3Dæˆ–è€…å¹³é¢ç‰¹æ•ˆçš„å¸ƒå±€æ–¹æ¡ˆï¼ŒæŠ½å¥–çš„è½¬åŠ¨åœ†ç›˜ï¼Œä¹¦æœ¬çš„ç¿»é¡µï¼Œç”šè‡³ç«‹ä½“çš„æ ‡ç­¾äº‘ï¼ŒUICollectionViewéƒ½å¯ä»¥å®ç°ï¼Œè¿™ç¯‡åšå®¢ä¸­çš„ä»£ç åœ¨ä¸‹é¢çš„è¿æ¥ä¸­ï¼Œç–æ¼ä¹‹å¤„ï¼Œæ¬¢è¿æŒ‡æ­£ï¼ http://pan.baidu.com/s/1jGCmbKM ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"iOSæµå¸ƒå±€UICollectionViewç³»åˆ—äº”â€”â€”åœ†ç¯å¸ƒå±€çš„å®ç°","slug":"140iOSæµå¸ƒå±€UICollectionViewç³»åˆ—äº”â€”â€”åœ†ç¯å¸ƒå±€çš„å®ç°","date":"2015-10-27T16:00:00.000Z","updated":"2021-07-03T12:41:16.436Z","comments":true,"path":"2015/10/28/140iOSæµå¸ƒå±€UICollectionViewç³»åˆ—äº”â€”â€”åœ†ç¯å¸ƒå±€çš„å®ç°/","link":"","permalink":"http://huishao.cc/2015/10/28/140iOSæµå¸ƒå±€UICollectionViewç³»åˆ—äº”â€”â€”åœ†ç¯å¸ƒå±€çš„å®ç°/","excerpt":"","text":"iOSæµå¸ƒå±€UICollectionViewç³»åˆ—äº”â€”â€”åœ†ç¯å¸ƒå±€çš„å®ç°ä¸€ã€å¼•è¨€å‰è¾¹çš„å‡ ç¯‡åšå®¢ï¼Œæˆ‘ä»¬äº†è§£äº†UICollectionViewçš„åŸºæœ¬ç”¨æ³•ä»¥åŠä¸€äº›æ‰©å±•ï¼Œåœ¨ä¸å®šé«˜çš„ç€‘å¸ƒæµå¸ƒå±€ä¸­ï¼Œæˆ‘ä»¬å‘ç°ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®å…·ä½“çš„å¸ƒå±€å±æ€§ç±»UICollectionViewLayoutAttributesæ¥è®¾ç½®è®¾ç½®æ¯ä¸ªitemçš„å…·ä½“ä½ç½®ï¼Œæˆ‘ä»¬å¯ä»¥å†æ‰©å±•ä¸€ä¸‹ï¼Œå¦‚æœä½ç½®æˆ‘ä»¬å¯ä»¥è‡ªç”±æ§åˆ¶ï¼Œé‚£ä¸ªå¸ƒå±€æˆ‘ä»¬ä¹Ÿå¯ä»¥æ›´åŠ çµæ´»ï¼Œå°±æ¯”å¦‚åˆ›å»ºä¸€ä¸ªå¦‚ä¸‹çš„circleLayoutï¼š è¿™ç§å¸ƒå±€æ–¹å¼åœ¨appleçš„å®˜æ–¹æ–‡æ¡£ä¸­ä¹Ÿæœ‰ä»‹ç»ï¼Œæ˜¯UICollectionViewçš„ä¸€ä¸ªåº”ç”¨ç¤ºä¾‹ã€‚ äºŒã€è®¾è®¡ä¸€ä¸ªåœ†ç¯å¸ƒå±€æ¥ç€æˆ‘ä»¬ä»¥å‰çš„æƒ³æ³•ï¼Œä¾ç„¶æ—¶å€™éšæœºé¢œè‰²çš„è‰²å—æ¥è¡¨è¾¾æˆ‘ä»¬çš„itemï¼Œå…ˆè‡ªå®šä¹‰ä¸€ä¸ªlayoutç±»ï¼Œè¿™ä¸ªç±»ç»§æ‰¿äºUICollectionViewLayoutï¼ŒUICollectionLayoutæ˜¯ä¸€ä¸ªå¸ƒå±€æŠ½è±¡åŸºç±»ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨è‡ªå®šä¹‰çš„å¸ƒå±€æ–¹å¼ï¼Œå¿…é¡»å°†å…¶å­ç±»åŒ–ï¼Œå¯èƒ½ä½ è¿˜è®°å¾—ï¼Œæˆ‘ä»¬åœ¨è¿›è¡Œç€‘å¸ƒæµå¸ƒå±€çš„æ—¶å€™ä½¿ç”¨è¿‡UICollectionViewFlowLayoutç±»ï¼Œè¿™ä¸ªç±»å°±æ˜¯ç»§æ‰¿äºUICollectionViewLayoutç±»ï¼Œç³»ç»Ÿä¸ºæˆ‘ä»¬å®ç°å¥½çš„ä¸€ä¸ªå¸ƒå±€æ–¹æ¡ˆã€‚ 1234@interface MyLayout : UICollectionViewLayout//è¿™ä¸ªintå€¼å­˜å‚¨æœ‰å¤šå°‘ä¸ªitem@property(nonatomic,assign)int itemCount;@end æˆ‘ä»¬éœ€è¦é‡å†™è¿™ä¸ªç±»çš„ä¸‰ä¸ªæ–¹æ³•ï¼Œæ¥è¿›è¡Œåœ†ç¯å¸ƒå±€çš„è®¾ç½®ï¼Œé¦–å…ˆæ˜¯prepareLayoutï¼Œä¸ºå¸ƒå±€åšä¸€äº›å‡†å¤‡å·¥ä½œï¼Œä½¿ç”¨collectionViewContentSizeæ¥è®¾ç½®å†…å®¹çš„åŒºåŸŸå¤§å°ï¼Œæœ€åä½¿ç”¨layoutAttributesForElementsInRectæ–¹æ³•æ¥è¿”å›æˆ‘ä»¬çš„å¸ƒå±€ä¿¡æ¯å­—å…¸ï¼Œè¿™ä¸ªå‰é¢ç€‘å¸ƒæµå¸ƒå±€çš„æ€è·¯æ˜¯ä¸€æ ·çš„ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546@implementation MyLayout&#123; NSMutableArray * _attributeAttay;&#125;-(void)prepareLayout&#123; [super prepareLayout]; //è·å–itemçš„ä¸ªæ•° _itemCount = (int)[self.collectionView numberOfItemsInSection:0]; _attributeAttay = [[NSMutableArray alloc]init]; //å…ˆè®¾å®šå¤§åœ†çš„åŠå¾„ å–é•¿å’Œå®½æœ€çŸ­çš„ CGFloat radius = MIN(self.collectionView.frame.size.width, self.collectionView.frame.size.height)/2; //è®¡ç®—åœ†å¿ƒä½ç½® CGPoint center = CGPointMake(self.collectionView.frame.size.width/2, self.collectionView.frame.size.height/2); //è®¾ç½®æ¯ä¸ªitemçš„å¤§å°ä¸º50*50 åˆ™åŠå¾„ä¸º25 for (int i=0; i&lt;_itemCount; i++) &#123; UICollectionViewLayoutAttributes * attris = [UICollectionViewLayoutAttributes layoutAttributesForCellWithIndexPath:[NSIndexPath indexPathForItem:i inSection:0]]; //è®¾ç½®itemå¤§å° attris.size = CGSizeMake(50, 50); //è®¡ç®—æ¯ä¸ªitemçš„åœ†å¿ƒä½ç½® /* . . . . . r . . ......... */ //è®¡ç®—æ¯ä¸ªitemä¸­å¿ƒçš„åæ ‡ //ç®—å‡ºçš„x yå€¼è¿˜è¦å‡å»itemè‡ªèº«çš„åŠå¾„å¤§å° float x = center.x+cosf(2*M_PI/_itemCount*i)*(radius-25); float y = center.y+sinf(2*M_PI/_itemCount*i)*(radius-25); attris.center = CGPointMake(x, y); [_attributeAttay addObject:attris]; &#125; &#125;//è®¾ç½®å†…å®¹åŒºåŸŸçš„å¤§å°-(CGSize)collectionViewContentSize&#123; return self.collectionView.frame.size;&#125;//è¿”å›è®¾ç½®æ•°ç»„-(NSArray&lt;UICollectionViewLayoutAttributes *&gt; *)layoutAttributesForElementsInRect:(CGRect)rect&#123; return _attributeAttay;&#125; åœ¨viewControllerä¸­ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view, typically from a nib. MyLayout * layout = [[MyLayout alloc]init]; UICollectionView * collect = [[UICollectionView alloc]initWithFrame:CGRectMake(0, 0, 320, 400) collectionViewLayout:layout]; collect.delegate=self; collect.dataSource=self; [collect registerClass:[UICollectionViewCell class] forCellWithReuseIdentifier:@&quot;cellid&quot;]; [self.view addSubview:collect];&#125;-(NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView&#123; return 1;&#125;-(NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section&#123; return 10;&#125;-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath&#123; UICollectionViewCell * cell = [collectionView dequeueReusableCellWithReuseIdentifier:@&quot;cellid&quot; forIndexPath:indexPath]; cell.layer.masksToBounds = YES; cell.layer.cornerRadius = 25; cell.backgroundColor = [UIColor colorWithRed:arc4random()%255/255.0 green:arc4random()%255/255.0 blue:arc4random()%255/255.0 alpha:1]; return cell;&#125; å¦‚ä¸Šéå¸¸ç®€å•çš„ä¸€äº›é€»è¾‘æ§åˆ¶ï¼Œæˆ‘ä»¬å°±å®ç°å“¦åœ†ç¯å¸ƒå±€ï¼Œéšç€itemçš„å¤šå°‘ï¼Œå¸ƒå±€ä¼šè‡ªåŠ¨è°ƒæ•´ï¼Œå¦‚æœä¸æ˜¯UICollectionViewçš„åŠŸåŠ³ï¼Œå®ç°è¿™æ ·çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯èƒ½è¦å†™ä¸Šä¸€é˜µå­äº†^_^ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"iOSæµå¸ƒå±€UICollectionViewç³»åˆ—å››â€”â€”è‡ªå®šä¹‰FlowLayoutè¿›è¡Œç€‘å¸ƒæµå¸ƒå±€","slug":"139iOSæµå¸ƒå±€UICollectionViewç³»åˆ—å››â€”â€”è‡ªå®šä¹‰FlowLayoutè¿›è¡Œç€‘å¸ƒæµå¸ƒå±€","date":"2015-10-26T16:00:00.000Z","updated":"2021-07-03T12:40:20.507Z","comments":true,"path":"2015/10/27/139iOSæµå¸ƒå±€UICollectionViewç³»åˆ—å››â€”â€”è‡ªå®šä¹‰FlowLayoutè¿›è¡Œç€‘å¸ƒæµå¸ƒå±€/","link":"","permalink":"http://huishao.cc/2015/10/27/139iOSæµå¸ƒå±€UICollectionViewç³»åˆ—å››â€”â€”è‡ªå®šä¹‰FlowLayoutè¿›è¡Œç€‘å¸ƒæµå¸ƒå±€/","excerpt":"","text":"iOSæµå¸ƒå±€UICollectionViewç³»åˆ—å››â€”â€”è‡ªå®šä¹‰FlowLayoutè¿›è¡Œç€‘å¸ƒæµå¸ƒå±€ä¸€ã€å¼•è¨€å‰å‡ ç¯‡åšå®¢ä»UICollectionViewçš„åŸºç¡€åº”ç”¨åˆ°è®¾ç½®UICollectionViewFlowLayoutæ›´åŠ çµæ´»çš„è¿›è¡Œå¸ƒå±€ï¼Œä½†éƒ½é™åˆ¶åœ¨ç³»ç»Ÿä¸ºæˆ‘ä»¬å‡†å¤‡å¥½çš„å¸ƒå±€æ¡†æ¶ä¸­ï¼Œè¿˜æ˜¯æœ‰ä¸€äº›å±€é™æ€§ï¼Œä¾‹å¦‚ï¼Œå¦‚æœæˆ‘è¦è¿›è¡Œç€‘å¸ƒæµä¼¼çš„ä¸å®šé«˜å¸ƒå±€ï¼Œå‰é¢çš„æ–¹æ³•å°±å¾ˆéš¾æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚äº†ï¼Œå¦‚ä¸‹ï¼š è¿™ç§å¸ƒå±€æ— ç–‘åœ¨appçš„åº”ç”¨ä¸­æ›´åŠ å¹¿æ³›ï¼Œå•†å“çš„å±•ç¤ºï¼Œä¹¦æ¶ä¹¦ç›®çš„å±•ç¤ºï¼Œéƒ½ä¼šå€¾å‘äºé‡‡ç”¨è¿™æ ·çš„å¸ƒå±€æ–¹å¼ï¼Œå½“ç„¶ï¼Œé€šè¿‡è‡ªå®šä¹‰FlowLayoutï¼Œæˆ‘ä»¬ä¹Ÿå¾ˆå®¹æ˜“å®ç°ã€‚ äºŒã€è¿›è¡Œè‡ªå®šä¹‰ç€‘å¸ƒæµå¸ƒå±€é¦–å…ˆï¼Œæˆ‘ä»¬æ–°å»ºä¸€ä¸ªæ–‡ä»¶ç»§æ‰¿äºUICollectionViewFlowLayoutï¼š 1@interface MyLayout : UICollectionViewFlowLayout ä¸ºäº†æ¼”ç¤ºçš„æ–¹é¢ï¼Œè¿™é‡Œæˆ‘ä¸é”™æ›´å¤šçš„å°è£…ï¼Œæ·»åŠ ä¸€ä¸ªå±æ€§ï¼Œç›´æ¥è®©å¤–ç•Œå°†itemä¸ªæ•°ä¼ é€’è¿›æ¥ï¼Œæˆ‘ä»¬æŠŠé‡å¿ƒæ–¹æ³•é‡å†™å¸ƒå±€çš„æ–¹æ³•ä¸Šï¼š 123@interface MyLayout : UICollectionViewFlowLayout@property(nonatomic,assign)int itemCount;@end å‰é¢è¯´è¿‡ï¼ŒUICollectionViewFlowLayoutæ˜¯ä¸€ä¸ªä¸“é—¨ç”¨æ¥ç®¡ç†collectionViewå¸ƒå±€çš„ç±»ï¼Œå› æ­¤ï¼ŒcollectionViewåœ¨è¿›è¡ŒUIå¸ƒå±€å‰ï¼Œä¼šé€šè¿‡è¿™ä¸ªç±»çš„å¯¹è±¡è·å–ç›¸å…³çš„å¸ƒå±€ä¿¡æ¯ï¼ŒFlowLayoutç±»å°†è¿™äº›å¸ƒå±€ä¿¡æ¯å…¨éƒ¨å­˜æ”¾åœ¨äº†ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œæ•°ç»„ä¸­æ˜¯UICollectionViewLayoutAttributesç±»ï¼Œè¿™ä¸ªç±»æ˜¯å¯¹itemå¸ƒå±€çš„å…·ä½“è®¾ç½®ï¼Œä»¥åå’±ä»¬åœ¨è®¨è®ºè¿™ä¸ªç±»ã€‚æ€»ä¹‹ï¼ŒFlowLayoutç±»å°†æ¯ä¸ªitemçš„ä½ç½®ç­‰å¸ƒå±€ä¿¡æ¯æ”¾åœ¨ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œåœ¨collectionViewå¸ƒå±€æ—¶ï¼Œä¼šè°ƒç”¨FlowLayoutç±»layoutAttributesForElementsInRectï¼šæ–¹æ³•æ¥è·å–è¿™ä¸ªå¸ƒå±€é…ç½®æ•°ç»„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦é‡å†™è¿™ä¸ªæ–¹æ³•ï¼Œè¿”å›æˆ‘ä»¬è‡ªå®šä¹‰çš„é…ç½®æ•°ç»„ï¼Œå¦å¤–ï¼ŒFlowLayoutç±»åœ¨è¿›è¡Œå¸ƒå±€ä¹‹å‰ï¼Œä¼šè°ƒç”¨prepareLayoutæ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é‡å†™è¿™ä¸ªæ–¹æ³•ï¼Œåœ¨é‡Œé¢å¯¹æˆ‘ä»¬çš„è‡ªå®šä¹‰é…ç½®æ•°æ®è¿›è¡Œä¸€äº›è®¾ç½®ã€‚ ç®€å•æ¥è¯´ï¼Œè‡ªå®šä¹‰ä¸€ä¸ªFlowLayoutå¸ƒå±€ç±»å°±æ˜¯ä¸¤ä¸ªæ­¥éª¤ï¼š 1ã€è®¾è®¡å¥½æˆ‘ä»¬çš„å¸ƒå±€é…ç½®æ•°æ® prepareLayoutæ–¹æ³•ä¸­ 2ã€è¿”å›æˆ‘ä»¬çš„é…ç½®æ•°ç»„ layoutAttributesForElementsInRectæ–¹æ³•ä¸­ ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556@implementation MyLayout&#123; //è¿™ä¸ªæ•°ç»„å°±æ˜¯æˆ‘ä»¬è‡ªå®šä¹‰çš„å¸ƒå±€é…ç½®æ•°ç»„ NSMutableArray * _attributeAttay;&#125;//æ•°ç»„çš„ç›¸å…³è®¾ç½®åœ¨è¿™ä¸ªæ–¹æ³•ä¸­//å¸ƒå±€å‰çš„å‡†å¤‡ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•-(void)prepareLayout&#123; _attributeAttay = [[NSMutableArray alloc]init]; [super prepareLayout]; //æ¼”ç¤ºæ–¹ä¾¿ æˆ‘ä»¬è®¾ç½®ä¸ºé™æ€çš„2åˆ— //è®¡ç®—æ¯ä¸€ä¸ªitemçš„å®½åº¦ float WIDTH = ([UIScreen mainScreen].bounds.size.width-self.sectionInset.left-self.sectionInset.right-self.minimumInteritemSpacing)/2; //å®šä¹‰æ•°ç»„ä¿å­˜æ¯ä¸€åˆ—çš„é«˜åº¦ //è¿™ä¸ªæ•°ç»„çš„ä¸»è¦ä½œç”¨æ˜¯ä¿å­˜æ¯ä¸€åˆ—çš„æ€»é«˜åº¦ï¼Œè¿™æ ·åœ¨å¸ƒå±€æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å§‹ç»ˆå°†ä¸‹ä¸€ä¸ªItemæ”¾åœ¨æœ€çŸ­çš„åˆ—ä¸‹é¢ CGFloat colHight[2]=&#123;self.sectionInset.top,self.sectionInset.bottom&#125;; //itemCountæ˜¯å¤–ç•Œä¼ è¿›æ¥çš„itemçš„ä¸ªæ•° éå†æ¥è®¾ç½®æ¯ä¸€ä¸ªitemçš„å¸ƒå±€ for (int i=0; i&lt;_itemCount; i++) &#123; //è®¾ç½®æ¯ä¸ªitemçš„ä½ç½®ç­‰ç›¸å…³å±æ€§ NSIndexPath *index = [NSIndexPath indexPathForItem:i inSection:0]; //åˆ›å»ºä¸€ä¸ªå¸ƒå±€å±æ€§ç±»ï¼Œé€šè¿‡indexPathæ¥åˆ›å»º UICollectionViewLayoutAttributes * attris = [UICollectionViewLayoutAttributes layoutAttributesForCellWithIndexPath:index]; //éšæœºä¸€ä¸ªé«˜åº¦ åœ¨40â€”â€”190ä¹‹é—´ CGFloat hight = arc4random()%150+40; //å“ªä¸€åˆ—é«˜åº¦å° åˆ™æ”¾åˆ°é‚£ä¸€åˆ—ä¸‹é¢ //æ ‡è®°æœ€çŸ­çš„åˆ— int width=0; if (colHight[0]&lt;colHight[1]) &#123; //å°†æ–°çš„itemé«˜åº¦åŠ å…¥åˆ°çŸ­çš„ä¸€åˆ— colHight[0] = colHight[0]+hight+self.minimumLineSpacing; width=0; &#125;else&#123; colHight[1] = colHight[1]+hight+self.minimumLineSpacing; width=1; &#125; //è®¾ç½®itemçš„ä½ç½® attris.frame = CGRectMake(self.sectionInset.left+(self.minimumInteritemSpacing+WIDTH)*width, colHight[width]-hight-self.minimumLineSpacing, WIDTH, hight); [_attributeAttay addObject:attris]; &#125; //è®¾ç½®itemSizeæ¥ç¡®ä¿æ»‘åŠ¨èŒƒå›´çš„æ­£ç¡® è¿™é‡Œæ˜¯é€šè¿‡å°†æ‰€æœ‰çš„itemé«˜åº¦å¹³å‡åŒ–ï¼Œè®¡ç®—å‡ºæ¥çš„(ä»¥æœ€é«˜çš„åˆ—ä½æ ‡å‡†) if (colHight[0]&gt;colHight[1]) &#123; self.itemSize = CGSizeMake(WIDTH, (colHight[0]-self.sectionInset.top)*2/_itemCount-self.minimumLineSpacing); &#125;else&#123; self.itemSize = CGSizeMake(WIDTH, (colHight[1]-self.sectionInset.top)*2/_itemCount-self.minimumLineSpacing); &#125; &#125;//è¿™ä¸ªæ–¹æ³•ä¸­è¿”å›æˆ‘ä»¬çš„å¸ƒå±€æ•°ç»„-(NSArray&lt;UICollectionViewLayoutAttributes *&gt; *)layoutAttributesForElementsInRect:(CGRect)rect&#123; return _attributeAttay;&#125;@end è‡ªå®šä¹‰å®ŒæˆFlowLayoutåï¼Œæˆ‘ä»¬åœ¨ViewControllerä¸­è¿›è¡Œä½¿ç”¨ï¼š 123456789101112131415161718192021222324252627282930- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view, typically from a nib. MyLayout * layout = [[MyLayout alloc]init]; layout.scrollDirection = UICollectionViewScrollDirectionVertical; layout.itemCount=100; UICollectionView * collect = [[UICollectionView alloc]initWithFrame:CGRectMake(0, 0, 320, 400) collectionViewLayout:layout]; collect.delegate=self; collect.dataSource=self; [collect registerClass:[UICollectionViewCell class] forCellWithReuseIdentifier:@&quot;cellid&quot;]; [self.view addSubview:collect]; &#125;-(NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView&#123; return 1;&#125;-(NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section&#123; return 100;&#125;-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath&#123; UICollectionViewCell * cell = [collectionView dequeueReusableCellWithReuseIdentifier:@&quot;cellid&quot; forIndexPath:indexPath]; cell.backgroundColor = [UIColor colorWithRed:arc4random()%255/255.0 green:arc4random()%255/255.0 blue:arc4random()%255/255.0 alpha:1]; return cell;&#125; è¿è¡Œæ•ˆæœå°±æ˜¯æˆ‘ä»¬å¼•è¨€ä¸­çš„æˆªå›¾ã€‚ ä¸‰ã€UICollectionViewLayoutAttributesç±»ä¸­æˆ‘ä»¬å¯ä»¥é…ç½®çš„å±æ€§é€šè¿‡ä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥äº†è§£ï¼ŒcollectionViewçš„itemå¸ƒå±€å…¶å®æ˜¯LayoutAttributesç±»å…·ä½“é…ç½®çš„ï¼Œè¿™ä¸ªç±»å¯ä»¥é…ç½®çš„å¸ƒå±€å±æ€§ä¸æ­¢æ˜¯frameè¿™ä¹ˆç®€å•ï¼Œå…¶ä¸­è¿˜æœ‰è®¸å¤šå±æ€§ï¼š 12345678910111213141516171819202122232425262728//é…ç½®itemçš„å¸ƒå±€ä½ç½®@property (nonatomic) CGRect frame;//é…ç½®itemçš„ä¸­å¿ƒ@property (nonatomic) CGPoint center;//é…ç½®itemçš„å°ºå¯¸@property (nonatomic) CGSize size;//é…ç½®itemçš„3Dæ•ˆæœ@property (nonatomic) CATransform3D transform3D;//é…ç½®itemçš„bounds@property (nonatomic) CGRect bounds NS_AVAILABLE_IOS(7_0);//é…ç½®itemçš„æ—‹è½¬@property (nonatomic) CGAffineTransform transform NS_AVAILABLE_IOS(7_0);//é…ç½®itemçš„alpha@property (nonatomic) CGFloat alpha;//é…ç½®itemçš„zåæ ‡@property (nonatomic) NSInteger zIndex; // default is 0//é…ç½®itemçš„éšè—@property (nonatomic, getter=isHidden) BOOL hidden; //itemçš„indexpath@property (nonatomic, strong) NSIndexPath *indexPath;//è·å–itemçš„ç±»å‹@property (nonatomic, readonly) UICollectionElementCategory representedElementCategory;@property (nonatomic, readonly, nullable) NSString *representedElementKind; //ä¸€äº›åˆ›å»ºæ–¹æ³•+ (instancetype)layoutAttributesForCellWithIndexPath:(NSIndexPath *)indexPath;+ (instancetype)layoutAttributesForSupplementaryViewOfKind:(NSString *)elementKind withIndexPath:(NSIndexPath *)indexPath;+ (instancetype)layoutAttributesForDecorationViewOfKind:(NSString *)decorationViewKind withIndexPath:(NSIndexPath *)indexPath; é€šè¿‡ä¸Šé¢çš„å±æ€§ï¼Œå¯ä»¥å¸ƒå±€å‡ºå„å¼å„æ ·çš„ç‚«é…·æ•ˆæœï¼Œæ­£å¦‚ä¸€å¥è¯ï¼šæ²¡æœ‰åšä¸åˆ°ï¼Œåªæœ‰æƒ³ä¸åˆ°ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"iOSæµå¸ƒå±€UICollectionViewç³»åˆ—äºŒâ€”â€”UICollectionViewçš„ä»£ç†æ–¹æ³•","slug":"137iOSæµå¸ƒå±€UICollectionViewç³»åˆ—äºŒâ€”â€”UICollectionViewçš„ä»£ç†æ–¹æ³•","date":"2015-10-26T16:00:00.000Z","updated":"2021-07-03T12:38:52.119Z","comments":true,"path":"2015/10/27/137iOSæµå¸ƒå±€UICollectionViewç³»åˆ—äºŒâ€”â€”UICollectionViewçš„ä»£ç†æ–¹æ³•/","link":"","permalink":"http://huishao.cc/2015/10/27/137iOSæµå¸ƒå±€UICollectionViewç³»åˆ—äºŒâ€”â€”UICollectionViewçš„ä»£ç†æ–¹æ³•/","excerpt":"","text":"iOSæµå¸ƒå±€UICollectionViewç³»åˆ—äºŒâ€”â€”UICollectionViewçš„ä»£ç†æ–¹æ³•ä¸€ã€å¼•è¨€åœ¨ä¸Šä¸€ç¯‡åšå®¢ä¸­ï¼Œä»‹ç»äº†æœ€åŸºæœ¬çš„UICollectionViewçš„ä½¿ç”¨å’Œå…¶ä¸­æˆ‘ä»¬å¸¸ç”¨çš„å±æ€§å’Œæ–¹æ³•ï¼Œä¹Ÿä»‹ç»äº†ç€‘å¸ƒæµå¸ƒå±€çš„è¿‡ç¨‹ä¸æ€è·¯ï¼Œè¿™ç¯‡åšå®¢æ˜¯ä¸Šä¸€ç¯‡çš„è¡¥å……ï¼Œæ¥è®¨è®ºå…³äºUICollectionViewçš„ä»£ç†æ–¹æ³•çš„ä½¿ç”¨ã€‚åšå®¢åœ°å€ï¼š UICollectionViewçš„ç®€ä»‹å’Œç®€å•ä½¿ç”¨ï¼šhttp://my.oschina.net/u/2340880/blog/522613 äºŒã€UICollectionViewDataSourceåè®®è¿™ä¸ªåè®®ä¸»è¦ç”¨äºcollectionViewç›¸å…³æ•°æ®çš„å¤„ç†ï¼ŒåŒ…å«æ–¹æ³•å¦‚ä¸‹ï¼š é¦–å…ˆï¼Œæœ‰ä¸¤ä¸ªæ–¹æ³•æ˜¯æˆ‘ä»¬å¿…é¡»å®ç°çš„ï¼š è®¾ç½®æ¯ä¸ªåˆ†åŒºçš„Itemä¸ªæ•° - (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section; è®¾ç½®è¿”å›æ¯ä¸ªitemçš„å±æ€§ - (UICollectionViewCell )collectionView:(UICollectionView )collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath; ä¸‹é¢çš„æ–¹æ³•æ˜¯å¯é€‰å®ç°çš„ï¼š è™½ç„¶è¿™ä¸ªæ–¹æ³•æ˜¯å¯é€‰çš„ï¼Œä¸€èˆ¬æˆ‘ä»¬éƒ½ä¼šå»å®ç°ï¼Œè®¾ç½®åˆ†åŒºæ•° - (NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView; å¯¹å¤´è§†å›¾æˆ–è€…å°¾è§†å›¾è¿›è¡Œè®¾ç½® - (UICollectionReusableView )collectionView:(UICollectionView )collectionView viewForSupplementaryElementOfKind:(NSString )kind atIndexPath:(NSIndexPath )indexPath; è®¾ç½®æŸä¸ªitemæ˜¯å¦å¯ä»¥è¢«ç§»åŠ¨ï¼Œè¿”å›NOåˆ™ä¸èƒ½ç§»åŠ¨ - (BOOL)collectionView:(UICollectionView )collectionView canMoveItemAtIndexPath:(NSIndexPath )indexPath NS_AVAILABLE_IOS(9_0); ç§»åŠ¨itemçš„æ—¶å€™ï¼Œä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³• - (void)collectionView:(UICollectionView )collectionView moveItemAtIndexPath:(NSIndexPath )sourceIndexPath toIndexPath:(NSIndexPath*)destinationIndexPathï¼› ä¸‰ã€UICollectionViewDelegateåè®®è¿™ä¸ªåè®®ç”¨æ¥è®¾ç½®å’Œå¤„ç†collectionViewçš„åŠŸèƒ½å’Œä¸€äº›é€»è¾‘ï¼Œæ‰€æœ‰æ–¹æ³•éƒ½æ˜¯å¯é€‰å®ç°ï¼š æ˜¯å¦å…è®¸æŸä¸ªItemçš„é«˜äº®ï¼Œè¿”å›NOï¼Œåˆ™ä¸èƒ½è¿›å…¥é«˜äº®çŠ¶æ€ - (BOOL)collectionView:(UICollectionView )collectionView shouldHighlightItemAtIndexPath:(NSIndexPath )indexPath; å½“itemé«˜äº®æ—¶è§¦å‘çš„æ–¹æ³• - (void)collectionView:(UICollectionView )collectionView didHighlightItemAtIndexPath:(NSIndexPath )indexPath; ç»“æŸé«˜äº®çŠ¶æ€æ—¶è§¦å‘çš„æ–¹æ³• - (void)collectionView:(UICollectionView )collectionView didUnhighlightItemAtIndexPath:(NSIndexPath )indexPath; æ˜¯å¦å¯ä»¥é€‰ä¸­æŸä¸ªItemï¼Œè¿”å›NOï¼Œåˆ™ä¸èƒ½é€‰ä¸­ - (BOOL)collectionView:(UICollectionView )collectionView shouldSelectItemAtIndexPath:(NSIndexPath )indexPath; æ˜¯å¦å¯ä»¥å–æ¶ˆé€‰ä¸­æŸä¸ªItem - (BOOL)collectionView:(UICollectionView )collectionView shouldDeselectItemAtIndexPath:(NSIndexPath )indexPath; å·²ç»é€‰ä¸­æŸä¸ªitemæ—¶è§¦å‘çš„æ–¹æ³• - (void)collectionView:(UICollectionView )collectionView didSelectItemAtIndexPath:(NSIndexPath )indexPath; å–æ¶ˆé€‰ä¸­æŸä¸ªItemæ—¶è§¦å‘çš„æ–¹æ³• - (void)collectionView:(UICollectionView )collectionView didDeselectItemAtIndexPath:(NSIndexPath )indexPath; å°†è¦åŠ è½½æŸä¸ªItemæ—¶è°ƒç”¨çš„æ–¹æ³• - (void)collectionView:(UICollectionView )collectionView willDisplayCell:(UICollectionViewCell )cell forItemAtIndexPath:(NSIndexPath *)indexPath NS_AVAILABLE_IOS(8_0); å°†è¦åŠ è½½å¤´å°¾è§†å›¾æ—¶è°ƒç”¨çš„æ–¹æ³• - (void)collectionView:(UICollectionView )collectionView willDisplaySupplementaryView:(UICollectionReusableView )view forElementKind:(NSString )elementKind atIndexPath:(NSIndexPath )indexPath NS_AVAILABLE_IOS(8_0); å·²ç»å±•ç¤ºæŸä¸ªItemæ—¶è§¦å‘çš„æ–¹æ³• - (void)collectionView:(UICollectionView )collectionView didEndDisplayingCell:(UICollectionViewCell )cell forItemAtIndexPath:(NSIndexPath *)indexPath; å·²ç»å±•ç¤ºæŸä¸ªå¤´å°¾è§†å›¾æ—¶è§¦å‘çš„æ–¹æ³• - (void)collectionView:(UICollectionView )collectionView didEndDisplayingSupplementaryView:(UICollectionReusableView )view forElementOfKind:(NSString )elementKind atIndexPath:(NSIndexPath )indexPath; è¿™ä¸ªæ–¹æ³•è®¾ç½®æ˜¯å¦å±•ç¤ºé•¿æŒ‰èœå• - (BOOL)collectionView:(UICollectionView )collectionView shouldShowMenuForItemAtIndexPath:(NSIndexPath )indexPath; é•¿æŒ‰èœå•ä¸­å¯ä»¥è§¦å‘ä¸€ä¸‹ç±»å¤åˆ¶ç²˜è´´çš„æ–¹æ³•ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š è¿™ä¸ªæ–¹æ³•ç”¨äºè®¾ç½®è¦å±•ç¤ºçš„èœå•é€‰é¡¹ - (BOOL)collectionView:(UICollectionView )collectionView canPerformAction:(SEL)action forItemAtIndexPath:(NSIndexPath )indexPath withSender:(nullable id)sender; è¿™ä¸ªæ–¹æ³•ç”¨äºå®ç°ç‚¹å‡»èœå•æŒ‰é’®åçš„è§¦å‘æ–¹æ³•,é€šè¿‡æµ‹è¯•ï¼Œåªæœ‰copyï¼Œcutå’Œpasteä¸‰ä¸ªæ–¹æ³•å¯ä»¥ä½¿ç”¨ - (void)collectionView:(UICollectionView )collectionView performAction:(SEL)action forItemAtIndexPath:(NSIndexPath )indexPath withSender:(nullable id)sender; é€šè¿‡ä¸‹é¢çš„æ–¹å¼å¯ä»¥å°†ç‚¹å‡»æŒ‰é’®çš„æ–¹æ³•åæ‰“å°å‡ºæ¥ï¼š 123-(void)collectionView:(UICollectionView *)collectionView performAction:(SEL)action forItemAtIndexPath:(NSIndexPath *)indexPath withSender:(id)sender&#123; NSLog(@&quot;%@&quot;,NSStringFromSelector(action));&#125; collectionViewè¿›è¡Œé‡æ–°å¸ƒå±€æ—¶è°ƒç”¨çš„æ–¹æ³• - (nonnull UICollectionViewTransitionLayout )collectionView:(UICollectionView )collectionView transitionLayoutForOldLayout:(UICollectionViewLayout )fromLayout newLayout:(UICollectionViewLayout )toLayout; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"iOSæµå¸ƒå±€UICollectionViewç³»åˆ—ä¸‰â€”â€”ä½¿ç”¨FlowLayoutè¿›è¡Œæ›´çµæ´»å¸ƒå±€","slug":"138iOSæµå¸ƒå±€UICollectionViewç³»åˆ—ä¸‰â€”â€”ä½¿ç”¨FlowLayoutè¿›è¡Œæ›´çµæ´»å¸ƒå±€","date":"2015-10-26T16:00:00.000Z","updated":"2021-07-03T12:39:40.831Z","comments":true,"path":"2015/10/27/138iOSæµå¸ƒå±€UICollectionViewç³»åˆ—ä¸‰â€”â€”ä½¿ç”¨FlowLayoutè¿›è¡Œæ›´çµæ´»å¸ƒå±€/","link":"","permalink":"http://huishao.cc/2015/10/27/138iOSæµå¸ƒå±€UICollectionViewç³»åˆ—ä¸‰â€”â€”ä½¿ç”¨FlowLayoutè¿›è¡Œæ›´çµæ´»å¸ƒå±€/","excerpt":"","text":"iOSæµå¸ƒå±€UICollectionViewç³»åˆ—ä¸‰â€”â€”ä½¿ç”¨FlowLayoutè¿›è¡Œæ›´çµæ´»å¸ƒå±€ä¸€ã€å¼•è¨€å‰é¢çš„åšå®¢ä»‹ç»äº†UICollectionViewçš„ç›¸å…³æ–¹æ³•å’Œå…¶åè®®ä¸­çš„æ–¹æ³•ï¼Œä½†å¯¹å¸ƒå±€çš„ç®¡ç†ç±»UICollectionViewFlowLayoutæ²¡æœ‰ç€é‡æ¢è®¨ï¼Œè¿™ç¯‡åšå®¢ä»‹ç»å…³äºå¸ƒå±€çš„ç›¸å…³è®¾ç½®å’Œå±æ€§æ–¹æ³•ã€‚ UICollectionViewçš„ç®€å•ä½¿ç”¨ï¼šhttp://my.oschina.net/u/2340880/blog/522613 UICollectionViewç›¸å…³åè®®æ–¹æ³•ï¼šhttp://my.oschina.net/u/2340880/blog/522613 é€šè¿‡layoutçš„è®¾ç½®ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™æ›´åŠ çµæ´»çš„å¸ƒå±€æ•ˆæœã€‚ äºŒã€å°†ä¹å®«æ ¼å¼çš„å¸ƒå±€è¿›è¡Œå‡çº§åœ¨ç¬¬ä¸€ç¯‡åšå®¢ä¸­ï¼Œé€šè¿‡UICollectionViewï¼Œæˆ‘ä»¬å¾ˆè½»æ¾çš„å®Œæˆäº†ä¸€ä¸ªä¹å®«æ ¼çš„å¸ƒå±€ï¼Œä½†æ˜¯å¦‚æ­¤ä¸­è§„ä¸­çŸ©çš„å¸ƒå±€æ–¹å¼ï¼Œæœ‰æ—¶å€™å¹¶ä¸èƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ï¼Œæœ‰æ—¶æˆ‘ä»¬éœ€è¦æ¯ä¸€ä¸ªItemå±•ç¤ºä¸åŒçš„å¤§å°ï¼Œä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view, typically from a nib. UICollectionViewFlowLayout *layout = [[UICollectionViewFlowLayout alloc]init]; layout.scrollDirection = UICollectionViewScrollDirectionVertical; UICollectionView *collect = [[UICollectionView alloc]initWithFrame:CGRectMake(0, 0, 320, 400) collectionViewLayout:layout]; collect.delegate=self; collect.dataSource=self; [collect registerClass:[UICollectionViewCell class] forCellWithReuseIdentifier:@&quot;cellid&quot;]; ; [self.view addSubview:collect]; &#125;//è®¾ç½®æ¯ä¸ªitemçš„å¤§å°ï¼ŒåŒæ•°çš„ä¸º50*50 å•æ•°çš„ä¸º100*100-(CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout *)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath&#123; if (indexPath.row%2==0) &#123; return CGSizeMake(50, 50); &#125;else&#123; return CGSizeMake(100, 100); &#125;&#125;//ä»£ç†ç›¸åº”æ–¹æ³•-(NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView&#123; return 1;&#125;-(NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section&#123; return 100;&#125;-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath&#123; UICollectionViewCell * cell = [collectionView dequeueReusableCellWithReuseIdentifier:@&quot;cellid&quot; forIndexPath:indexPath]; cell.backgroundColor = [UIColor colorWithRed:arc4random()%255/255.0 green:arc4random()%255/255.0 blue:arc4random()%255/255.0 alpha:1]; return cell;&#125; æ•ˆæœå¦‚ä¸‹ï¼š ç°åœ¨çš„å¸ƒå±€æ•ˆæœæ˜¯ä¸æ˜¯ç‚«é…·äº†è®¸å¤šã€‚ ä¸‰ã€UICollectionViewFlowLayoutç›¸å…³å±æ€§æ–¹æ³•UICollectionViewFlowLayoutæ˜¯ç³»ç»Ÿæä¾›ç»™æˆ‘ä»¬ä¸€ä¸ªå°è£…å¥½çš„æµå¸ƒå±€è®¾ç½®ç±»ï¼Œå…¶ä¸­æœ‰ä¸€äº›å¸ƒå±€å±æ€§æˆ‘ä»¬å¯ä»¥è¿›è¡Œè®¾ç½®ï¼š è®¾ç½®è¡Œä¸è¡Œä¹‹é—´çš„é—´è·æœ€å°è·ç¦» @property (nonatomic) CGFloat minimumLineSpacing; è®¾ç½®åˆ—ä¸åˆ—ä¹‹é—´çš„é—´è·æœ€å°è·ç¦» @property (nonatomic) CGFloat minimumInteritemSpacing; è®¾ç½®æ¯ä¸ªitemçš„å¤§å° @property (nonatomic) CGSize itemSize; è®¾ç½®æ¯ä¸ªItemçš„ä¼°è®¡å¤§å°ï¼Œä¸€èˆ¬ä¸éœ€è¦è®¾ç½® @property (nonatomic) CGSize estimatedItemSize NS_AVAILABLE_IOS(8_0); è®¾ç½®å¸ƒå±€æ–¹å‘ @property (nonatomic) UICollectionViewScrollDirection scrollDirection; è¿™ä¸ªUICollectionViewScrollDirectionçš„æšä¸¾å¦‚ä¸‹ï¼š 1234typedef NS_ENUM(NSInteger, UICollectionViewScrollDirection) &#123; UICollectionViewScrollDirectionVertical,//æ°´å¹³å¸ƒå±€ UICollectionViewScrollDirectionHorizontal//å‚ç›´å¸ƒå±€&#125;; è®¾ç½®å¤´è§†å›¾å°ºå¯¸å¤§å° @property (nonatomic) CGSize headerReferenceSize; è®¾ç½®å°¾è§†å›¾å°ºå¯¸å¤§å° @property (nonatomic) CGSize footerReferenceSize; è®¾ç½®åˆ†åŒºçš„EdgeInset @property (nonatomic) UIEdgeInsets sectionInset; è¿™ä¸ªå±æ€§å¯ä»¥è®¾ç½®åˆ†åŒºçš„åç§»é‡ï¼Œä¾‹å¦‚æˆ‘ä»¬åœ¨åˆšæ‰çš„ä¾‹å­ä¸­æ·»åŠ å¦‚ä¸‹è®¾ç½®ï¼š 1 layout.sectionInset = UIEdgeInsetsMake(20, 20, 20, 20); æ•ˆæœå¦‚ä¸‹ï¼Œä¼šçœ‹åˆ°åˆ†åŒºçš„è¾¹ç•Œé—ªå‡ºäº†20åƒç´  ä¸‹é¢è¿™ä¸¤ä¸ªæ–¹æ³•è®¾ç½®åˆ†åŒºçš„å¤´è§†å›¾å’Œå°¾è§†å›¾æ˜¯å¦å§‹ç»ˆå›ºå®šåœ¨å±å¹•ä¸Šè¾¹å’Œä¸‹è¾¹ @property (nonatomic) BOOL sectionHeadersPinToVisibleBounds NS_AVAILABLE_IOS(9_0); @property (nonatomic) BOOL sectionFootersPinToVisibleBounds NS_AVAILABLE_IOS(9_0); å››ã€åŠ¨æ€çš„é…ç½®layoutçš„ç›¸å…³å±æ€§UICollectionViewDelegateFlowLayoutä¸Šé¢çš„æ–¹æ³•åœ¨åˆ›å»ºFlowLayoutæ—¶é™æ€çš„è¿›è¡Œè®¾ç½®ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦åŠ¨æ€çš„è®¾ç½®è¿™äº›å±æ€§ï¼Œå°±åƒæˆ‘ä»¬ä¾‹å­ä¸­çš„ï¼Œæ¯ä¸ªitemçš„å¤§å°ä¼šæœ‰å·®å¼‚ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»£ç†æ¥å®ç°ã€‚ UICollectionViewDelegateFlowLayoutæ˜¯UICollectionViewDelegateçš„å­åè®®ï¼Œå…¶ä¸­å¸¸ç”¨æ–¹æ³•å¦‚ä¸‹ï¼Œæˆ‘ä»¬åªéœ€è¦å®ç°æˆ‘ä»¬éœ€è¦çš„å³å¯ï¼š åŠ¨æ€è®¾ç½®æ¯ä¸ªItemçš„å°ºå¯¸å¤§å° - (CGSize)collectionView:(UICollectionView )collectionView layout:(UICollectionViewLayout)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath; åŠ¨æ€è®¾ç½®æ¯ä¸ªåˆ†åŒºçš„EdgeInsets - (UIEdgeInsets)collectionView:(UICollectionView )collectionView layout:(UICollectionViewLayout)collectionViewLayout insetForSectionAtIndex:(NSInteger)section; åŠ¨æ€è®¾ç½®æ¯è¡Œçš„é—´è·å¤§å° - (CGFloat)collectionView:(UICollectionView )collectionView layout:(UICollectionViewLayout)collectionViewLayout minimumLineSpacingForSectionAtIndex:(NSInteger)section; åŠ¨æ€è®¾ç½®æ¯åˆ—çš„é—´è·å¤§å° - (CGFloat)collectionView:(UICollectionView )collectionView layout:(UICollectionViewLayout)collectionViewLayout minimumInteritemSpacingForSectionAtIndex:(NSInteger)section; åŠ¨æ€è®¾ç½®æŸä¸ªåˆ†åŒºå¤´è§†å›¾å¤§å° - (CGSize)collectionView:(UICollectionView )collectionView layout:(UICollectionViewLayout)collectionViewLayout referenceSizeForHeaderInSection:(NSInteger)section; åŠ¨æ€è®¾ç½®æŸä¸ªåˆ†åŒºå°¾è§†å›¾å¤§å° - (CGSize)collectionView:(UICollectionView )collectionView layout:(UICollectionViewLayout)collectionViewLayout referenceSizeForFooterInSection:(NSInteger)section; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"iOSæµå¸ƒå±€UICollectionViewç³»åˆ—ä¸€â€”â€”åˆè¯†ä¸ç®€å•ä½¿ç”¨UICollectionView imageè§£å†³æ–¹æ³•","slug":"136iOSæµå¸ƒå±€UICollectionViewç³»åˆ—ä¸€â€”â€”åˆè¯†ä¸ç®€å•ä½¿ç”¨UICollectionView","date":"2015-10-26T16:00:00.000Z","updated":"2021-07-03T12:38:08.953Z","comments":true,"path":"2015/10/27/136iOSæµå¸ƒå±€UICollectionViewç³»åˆ—ä¸€â€”â€”åˆè¯†ä¸ç®€å•ä½¿ç”¨UICollectionView/","link":"","permalink":"http://huishao.cc/2015/10/27/136iOSæµå¸ƒå±€UICollectionViewç³»åˆ—ä¸€â€”â€”åˆè¯†ä¸ç®€å•ä½¿ç”¨UICollectionView/","excerpt":"","text":"iOSæµå¸ƒå±€UICollectionViewç³»åˆ—ä¸€â€”â€”åˆè¯†ä¸ç®€å•ä½¿ç”¨UICollectionViewä¸€ã€ç®€ä»‹UICollectionViewæ˜¯iOS6ä¹‹åå¼•å…¥çš„ä¸€ä¸ªæ–°çš„UIæ§ä»¶ï¼Œå®ƒå’ŒUITableViewæœ‰ç€è¯¸å¤šçš„ç›¸ä¼¼ä¹‹å¤„ï¼Œå…¶ä¸­è®¸å¤šä»£ç†æ–¹æ³•éƒ½ååˆ†ç±»ä¼¼ã€‚ç®€å•æ¥è¯´ï¼ŒUICollectionViewæ˜¯æ¯”UITbleViewæ›´åŠ å¼ºå¤§çš„ä¸€ä¸ªUIæ§ä»¶ï¼Œæœ‰å¦‚ä¸‹å‡ ä¸ªæ–¹é¢ï¼š 1ã€æ”¯æŒæ°´å¹³å’Œå‚ç›´ä¸¤ç§æ–¹å‘çš„å¸ƒå±€ 2ã€é€šè¿‡layouté…ç½®æ–¹å¼è¿›è¡Œå¸ƒå±€ 3ã€ç±»ä¼¼äºTableViewä¸­çš„cellç‰¹æ€§å¤–ï¼ŒCollectionViewä¸­çš„Itemå¤§å°å’Œä½ç½®å¯ä»¥è‡ªç”±å®šä¹‰ 4ã€é€šè¿‡layoutå¸ƒå±€å›è°ƒçš„ä»£ç†æ–¹æ³•ï¼Œå¯ä»¥åŠ¨æ€çš„å®šåˆ¶æ¯ä¸ªitemçš„å¤§å°å’Œcollectionçš„å¤§ä½“å¸ƒå±€å±æ€§ 5ã€æ›´åŠ å¼ºå¤§ä¸€ç‚¹ï¼Œå®Œå…¨è‡ªå®šä¹‰ä¸€å¥—layoutå¸ƒå±€æ–¹æ¡ˆï¼Œå¯ä»¥å®ç°æ„æƒ³ä¸åˆ°çš„æ•ˆæœ è¿™ç¯‡åšå®¢ï¼Œæˆ‘ä»¬ä¸»è¦è®¨è®ºCollectionViewä½¿ç”¨åŸç”Ÿlayoutçš„æ–¹æ³•å’Œç›¸å…³å±æ€§ï¼Œå…¶ä»–ç‰¹ç‚¹å’Œæ›´å¼ºçš„åˆ¶å®šåŒ–ï¼Œä¼šåœ¨åé¢çš„åšå®¢ä¸­ä»‹ç» äºŒã€å…ˆæ¥å®ç°ä¸€ä¸ªæœ€ç®€å•çš„ä¹å®«æ ¼ç±»å¸ƒå±€åœ¨äº†è§£UICollectionViewçš„æ›´å¤šå±æ€§å‰ï¼Œæˆ‘ä»¬å…ˆæ¥ä½¿ç”¨å…¶è¿›è¡Œä¸€ä¸ªæœ€ç®€å•çš„æµå¸ƒå±€è¯•è¯•çœ‹ï¼Œåœ¨controllerçš„viewDidLoadä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š 123456789101112131415 //åˆ›å»ºä¸€ä¸ªlayoutå¸ƒå±€ç±» UICollectionViewFlowLayout * layout = [[UICollectionViewFlowLayout alloc]init]; //è®¾ç½®å¸ƒå±€æ–¹å‘ä¸ºå‚ç›´æµå¸ƒå±€ layout.scrollDirection = UICollectionViewScrollDirectionVertical; //è®¾ç½®æ¯ä¸ªitemçš„å¤§å°ä¸º100*100 layout.itemSize = CGSizeMake(100, 100); //åˆ›å»ºcollectionView é€šè¿‡ä¸€ä¸ªå¸ƒå±€ç­–ç•¥layoutæ¥åˆ›å»º UICollectionView * collect = [[UICollectionView alloc]initWithFrame:self.view.frame collectionViewLayout:layout]; //ä»£ç†è®¾ç½® collect.delegate=self; collect.dataSource=self; //æ³¨å†Œitemç±»å‹ è¿™é‡Œä½¿ç”¨ç³»ç»Ÿçš„ç±»å‹ [collect registerClass:[UICollectionViewCell class] forCellWithReuseIdentifier:@&quot;cellid&quot;]; [self.view addSubview:collect]; è¿™é‡Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼ŒcollectionViewåœ¨å®Œæˆä»£ç†å›è°ƒå‰ï¼Œå¿…é¡»æ³¨å†Œä¸€ä¸ªcellï¼Œç±»ä¼¼å¦‚ä¸‹: 1[collect registerClass:[UICollectionViewCell class] forCellWithReuseIdentifier:@&quot;cellid&quot;]; è¿™å’ŒtableViewæœ‰äº›ç±»ä¼¼ï¼Œåˆæœ‰äº›ä¸åŒï¼Œå› ä¸ºtableViewé™¤äº†æ³¨å†Œcellçš„æ–¹æ³•å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡ä¸´æ—¶åˆ›å»ºæ¥åšï¼š 12345//tableViewåœ¨ä»å¤ç”¨æ± ä¸­å–cellçš„æ—¶å€™ï¼Œæœ‰å¦‚ä¸‹ä¸¤ç§æ–¹æ³•//ä½¿ç”¨è¿™ç§æ–¹å¼å¦‚æœå¤ç”¨æ± ä¸­æ— ï¼Œæ˜¯å¯ä»¥è¿”å›nilçš„ï¼Œæˆ‘ä»¬åœ¨ä¸´æ—¶åˆ›å»ºå³å¯- (nullable __kindof UITableViewCell *)dequeueReusableCellWithIdentifier:(NSString *)identifier;//6.0åä½¿ç”¨å¦‚ä¸‹çš„æ–¹æ³•ç›´æ¥ä»æ³¨å†Œçš„cellç±»è·å–åˆ›å»ºï¼Œå¦‚æœæ²¡æœ‰æ³¨å†Œ ä¼šå´©æºƒ- (__kindof UITableViewCell *)dequeueReusableCellWithIdentifier:(NSString *)identifier forIndexPath:(NSIndexPath *)indexPath NS_AVAILABLE_IOS(6_0); æˆ‘ä»¬å¯ä»¥åˆ†æï¼šå› ä¸ºUICollectionViewæ˜¯iOS6.0ä¹‹å‰çš„æ–°ç±»ï¼Œå› æ­¤è¿™é‡Œç»Ÿä¸€äº†ä»å¤ç”¨æ± ä¸­è·å–cellçš„æ–¹æ³•ï¼Œæ²¡æœ‰å†æä¾›å¯ä»¥è¿”å›nilçš„æ–¹å¼ï¼Œå¹¶ä¸”åœ¨UICollectionViewçš„å›è°ƒä»£ç†ä¸­ï¼Œåªèƒ½ä½¿ç”¨ä»å¤ç”¨æ± ä¸­è·å–cellçš„æ–¹å¼è¿›è¡Œcellçš„è¿”å›ï¼Œå…¶ä»–æ–¹å¼ä¼šå´©æºƒï¼Œä¾‹å¦‚ï¼š 1234567891011121314//è¿™æ˜¯æ­£ç¡®çš„æ–¹æ³•-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath&#123; UICollectionViewCell * cell = [collectionView dequeueReusableCellWithReuseIdentifier:@&quot;cellid&quot; forIndexPath:indexPath]; cell.backgroundColor = [UIColor colorWithRed:arc4random()%255/255.0 green:arc4random()%255/255.0 blue:arc4random()%255/255.0 alpha:1]; return cell;&#125;//è¿™æ ·åšä¼šå´©æºƒ-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath&#123;// UICollectionViewCell * cell = [collectionView dequeueReusableCellWithReuseIdentifier:@&quot;cellid&quot; forIndexPath:indexPath];// cell.backgroundColor = [UIColor colorWithRed:arc4random()%255/255.0 green:arc4random()%255/255.0 blue:arc4random()%255/255.0 alpha:1]; UICollectionViewCell * cell = [[UICollectionViewCell alloc]init]; return cell;&#125; ä¸Šé¢é”™è¯¯çš„æ–¹å¼ä¼šå´©æºƒï¼Œä¿¡æ¯å¦‚ä¸‹ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨ä»å¤ç”¨æ± ä¸­å–cellçš„æ–¹å¼ï¼š ä¸Šé¢çš„è®¾ç½®å®Œæˆåï¼Œæˆ‘ä»¬æ¥å®ç°å¦‚ä¸‹å‡ ä¸ªä»£ç†æ–¹æ³•ï¼š è¿™é‡Œä¸TableViewçš„å›è°ƒæ–¹å¼ååˆ†ç±»ä¼¼ 1234567891011121314//è¿”å›åˆ†åŒºä¸ªæ•°-(NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView&#123; return 1;&#125;//è¿”å›æ¯ä¸ªåˆ†åŒºçš„itemä¸ªæ•°-(NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section&#123; return 10;&#125;//è¿”å›æ¯ä¸ªitem-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath&#123; UICollectionViewCell * cell = [collectionView dequeueReusableCellWithReuseIdentifier:@&quot;cellid&quot; forIndexPath:indexPath]; cell.backgroundColor = [UIColor colorWithRed:arc4random()%255/255.0 green:arc4random()%255/255.0 blue:arc4random()%255/255.0 alpha:1]; return cell;&#125; æ•ˆæœå¦‚ä¸‹ï¼š åŒæ ·ï¼Œå¦‚æœå†…å®¹çš„å¤§å°è¶…å‡ºä¸€å±ï¼Œå’ŒtableViewç±»ä¼¼æ˜¯å¯ä»¥è¿›è¡Œè§†å›¾æ»‘åŠ¨çš„ã€‚ è¿˜æœ‰ä¸€ç‚¹ç»†èŠ‚ï¼Œæˆ‘ä»¬åœ¨ä¸Šé¢è®¾ç½®å¸ƒå±€æ–¹å¼çš„æ—¶å€™è®¾ç½®äº†å‚ç›´å¸ƒå±€ï¼š 123layout.scrollDirection = UICollectionViewScrollDirectionVertical;//è¿™ä¸ªæ˜¯æ°´å¹³å¸ƒå±€//layout.scrollDirection = UICollectionViewScrollDirectionHorizontal; è¿™æ ·ç³»ç»Ÿä¼šåœ¨ä¸€è¡Œå……æ»¡åè¿›è¡Œç¬¬äºŒè¡Œçš„æ’åˆ—ï¼Œå¦‚æœè®¾ç½®ä¸ºæ°´å¹³å¸ƒå±€ï¼Œåˆ™ä¼šåœ¨ä¸€åˆ—å……æ»¡åï¼Œè¿›è¡Œç¬¬äºŒåˆ—çš„å¸ƒå±€ï¼Œè¿™ç§æ–¹å¼ä¹Ÿè¢«ç§°ä¸ºæµå¼å¸ƒå±€ ä¸‰ã€UICollectionViewä¸­çš„å¸¸ç”¨æ–¹æ³•å’Œå±æ€§123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115//é€šè¿‡ä¸€ä¸ªå¸ƒå±€ç­–ç•¥åˆè¯†åŒ–CollectionView- (instancetype)initWithFrame:(CGRect)frame collectionViewLayout:(UICollectionViewLayout *)layout;//è·å–å’Œè®¾ç½®collectionçš„layout@property (nonatomic, strong) UICollectionViewLayout *collectionViewLayout;//æ•°æ®æºå’Œä»£ç†@property (nonatomic, weak, nullable) id &lt;UICollectionViewDelegate&gt; delegate;@property (nonatomic, weak, nullable) id &lt;UICollectionViewDataSource&gt; dataSource;//ä»ä¸€ä¸ªclassæˆ–è€…xibæ–‡ä»¶è¿›è¡Œcell(item)çš„æ³¨å†Œ- (void)registerClass:(nullable Class)cellClass forCellWithReuseIdentifier:(NSString *)identifier;- (void)registerNib:(nullable UINib *)nib forCellWithReuseIdentifier:(NSString *)identifier;//ä¸‹é¢ä¸¤ä¸ªæ–¹æ³•ä¸ä¸Šé¢ç›¸ä¼¼ï¼Œè¿™é‡Œæ³¨å†Œçš„æ˜¯å¤´è§†å›¾æˆ–è€…å°¾è§†å›¾çš„ç±»//å…¶ä¸­ç¬¬äºŒä¸ªå‚æ•°æ˜¯è®¾ç½® å¤´è§†å›¾æˆ–è€…å°¾è§†å›¾ ç³»ç»Ÿä¸ºæˆ‘ä»¬å®šä¹‰å¥½äº†è¿™ä¸¤ä¸ªå­—ç¬¦ä¸²//UIKIT_EXTERN NSString *const UICollectionElementKindSectionHeader NS_AVAILABLE_IOS(6_0);//UIKIT_EXTERN NSString *const UICollectionElementKindSectionFooter NS_AVAILABLE_IOS(6_0);- (void)registerClass:(nullable Class)viewClass forSupplementaryViewOfKind:(NSString *)elementKind withReuseIdentifier:(NSString *)identifier;- (void)registerNib:(nullable UINib *)nib forSupplementaryViewOfKind:(NSString *)kind withReuseIdentifier:(NSString *)identifier;//è¿™ä¸¤ä¸ªæ–¹æ³•æ˜¯ä»å¤ç”¨æ± ä¸­å–å‡ºcellæˆ–è€…å¤´å°¾è§†å›¾- (__kindof UICollectionViewCell *)dequeueReusableCellWithReuseIdentifier:(NSString *)identifier forIndexPath:(NSIndexPath *)indexPath;- (__kindof UICollectionReusableView *)dequeueReusableSupplementaryViewOfKind:(NSString *)elementKind withReuseIdentifier:(NSString *)identifier forIndexPath:(NSIndexPath *)indexPath;//è®¾ç½®æ˜¯å¦å…è®¸é€‰ä¸­ é»˜è®¤yes@property (nonatomic) BOOL allowsSelection;//è®¾ç½®æ˜¯å¦å…è®¸å¤šé€‰ é»˜è®¤no@property (nonatomic) BOOL allowsMultipleSelection;//è·å–æ‰€æœ‰é€‰ä¸­çš„itemçš„ä½ç½®ä¿¡æ¯- (nullable NSArray&lt;NSIndexPath *&gt; *)indexPathsForSelectedItems; //è®¾ç½®é€‰ä¸­æŸä¸€itemï¼Œå¹¶ä½¿è§†å›¾æ»‘åŠ¨åˆ°ç›¸åº”ä½ç½®ï¼ŒscrollPositionæ˜¯æ»‘åŠ¨ä½ç½®çš„ç›¸å…³å‚æ•°ï¼Œå¦‚ä¸‹ï¼š/*typedef NS_OPTIONS(NSUInteger, UICollectionViewScrollPosition) &#123; //æ—  UICollectionViewScrollPositionNone = 0, //å‚ç›´å¸ƒå±€æ—¶ä½¿ç”¨çš„ å¯¹åº”ä¸Šä¸­ä¸‹ UICollectionViewScrollPositionTop = 1 &lt;&lt; 0, UICollectionViewScrollPositionCenteredVertically = 1 &lt;&lt; 1, UICollectionViewScrollPositionBottom = 1 &lt;&lt; 2, //æ°´å¹³å¸ƒå±€æ—¶ä½¿ç”¨çš„ å¯¹åº”å·¦ä¸­å³ UICollectionViewScrollPositionLeft = 1 &lt;&lt; 3, UICollectionViewScrollPositionCenteredHorizontally = 1 &lt;&lt; 4, UICollectionViewScrollPositionRight = 1 &lt;&lt; 5&#125;;*/- (void)selectItemAtIndexPath:(nullable NSIndexPath *)indexPath animated:(BOOL)animated scrollPosition:(UICollectionViewScrollPosition)scrollPosition;//å°†æŸä¸€itemå–æ¶ˆé€‰ä¸­- (void)deselectItemAtIndexPath:(NSIndexPath *)indexPath animated:(BOOL)animated;//é‡æ–°åŠ è½½æ•°æ®- (void)reloadData;//ä¸‹é¢è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œå¯ä»¥é‡æ–°è®¾ç½®collectionçš„å¸ƒå±€ï¼Œåé¢çš„æ–¹æ³•å¤šäº†ä¸€ä¸ªå¸ƒå±€å®Œæˆåçš„å›è°ƒï¼ŒiOS7åå¯ä»¥ç”¨//ä½¿ç”¨è¿™ä¸¤ä¸ªæ–¹æ³•å¯ä»¥äº§ç”Ÿéå¸¸ç‚«é…·çš„åŠ¨ç”»æ•ˆæœ- (void)setCollectionViewLayout:(UICollectionViewLayout *)layout animated:(BOOL)animated;- (void)setCollectionViewLayout:(UICollectionViewLayout *)layout animated:(BOOL)animated completion:(void (^ __nullable)(BOOL finished))completion NS_AVAILABLE_IOS(7_0);//ä¸‹é¢è¿™äº›æ–¹æ³•æ›´åŠ å¼ºå¤§ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å¸ƒå±€æ›´æ”¹åçš„åŠ¨ç”»è¿›è¡Œè®¾ç½®//è¿™ä¸ªæ–¹æ³•ä¼ å…¥ä¸€ä¸ªå¸ƒå±€ç­–ç•¥layoutï¼Œç³»ç»Ÿä¼šå¼€å§‹è¿›è¡Œå¸ƒå±€æ¸²æŸ“ï¼Œè¿”å›ä¸€ä¸ªUICollectionViewTransitionLayoutå¯¹è±¡//è¿™ä¸ªUICollectionViewTransitionLayoutå¯¹è±¡ç®¡ç†åŠ¨ç”»çš„ç›¸å…³å±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œè®¾ç½®- (UICollectionViewTransitionLayout *)startInteractiveTransitionToCollectionViewLayout:(UICollectionViewLayout *)layout completion:(nullable UICollectionViewLayoutInteractiveTransitionCompletion)completion NS_AVAILABLE_IOS(7_0);//å‡†å¤‡å¥½åŠ¨ç”»è®¾ç½®åï¼Œæˆ‘ä»¬éœ€è¦è°ƒç”¨ä¸‹é¢çš„æ–¹æ³•è¿›è¡Œå¸ƒå±€åŠ¨ç”»çš„å±•ç¤ºï¼Œä¹‹åä¼šè°ƒç”¨ä¸Šé¢æ–¹æ³•çš„blockå›è°ƒ- (void)finishInteractiveTransition NS_AVAILABLE_IOS(7_0);//è°ƒç”¨è¿™ä¸ªæ–¹æ³•å–æ¶ˆä¸Šé¢çš„å¸ƒå±€åŠ¨ç”»è®¾ç½®ï¼Œä¹‹åä¹Ÿä¼šè¿›è¡Œä¸Šé¢æ–¹æ³•çš„blockå›è°ƒ- (void)cancelInteractiveTransition NS_AVAILABLE_IOS(7_0);//è·å–åˆ†åŒºæ•°- (NSInteger)numberOfSections;//è·å–æŸä¸€åˆ†åŒºçš„itemæ•°- (NSInteger)numberOfItemsInSection:(NSInteger)section;//ä¸‹é¢ä¸¤ä¸ªæ–¹æ³•è·å–itemæˆ–è€…å¤´å°¾è§†å›¾çš„layoutå±æ€§ï¼Œè¿™ä¸ªUICollectionViewLayoutAttributeså¯¹è±¡//å­˜æ”¾ç€å¸ƒå±€çš„ç›¸å…³æ•°æ®ï¼Œå¯ä»¥ç”¨æ¥åšå®Œå…¨è‡ªå®šä¹‰å¸ƒå±€ï¼Œåé¢åšå®¢ä¼šä»‹ç»- (nullable UICollectionViewLayoutAttributes *)layoutAttributesForItemAtIndexPath:(NSIndexPath *)indexPath;- (nullable UICollectionViewLayoutAttributes *)layoutAttributesForSupplementaryElementOfKind:(NSString *)kind atIndexPath:(NSIndexPath *)indexPath;//è·å–æŸä¸€ç‚¹æ‰€åœ¨çš„indexpathä½ç½®- (nullable NSIndexPath *)indexPathForItemAtPoint:(CGPoint)point;//è·å–æŸä¸ªcellæ‰€åœ¨çš„indexPath- (nullable NSIndexPath *)indexPathForCell:(UICollectionViewCell *)cell;//æ ¹æ®indexPathè·å–cell- (nullable UICollectionViewCell *)cellForItemAtIndexPath:(NSIndexPath *)indexPath;//è·å–æ‰€æœ‰å¯è§cellçš„æ•°ç»„- (NSArray&lt;__kindof UICollectionViewCell *&gt; *)visibleCells;//è·å–æ‰€æœ‰å¯è§cellçš„ä½ç½®æ•°ç»„- (NSArray&lt;NSIndexPath *&gt; *)indexPathsForVisibleItems;//ä¸‹é¢ä¸‰ä¸ªæ–¹æ³•æ˜¯iOS9ä¸­æ–°æ·»åŠ çš„æ–¹æ³•ï¼Œç”¨äºè·å–å¤´å°¾è§†å›¾- (UICollectionReusableView *)supplementaryViewForElementKind:(NSString *)elementKind atIndexPath:(NSIndexPath *)indexPath NS_AVAILABLE_IOS(9_0);- (NSArray&lt;UICollectionReusableView *&gt; *)visibleSupplementaryViewsOfKind:(NSString *)elementKind NS_AVAILABLE_IOS(9_0);- (NSArray&lt;NSIndexPath *&gt; *)indexPathsForVisibleSupplementaryElementsOfKind:(NSString *)elementKind NS_AVAILABLE_IOS(9_0);//ä½¿è§†å›¾æ»‘åŠ¨åˆ°æŸä¸€ä½ç½®ï¼Œå¯ä»¥å¸¦åŠ¨ç”»æ•ˆæœ- (void)scrollToItemAtIndexPath:(NSIndexPath *)indexPath atScrollPosition:(UICollectionViewScrollPosition)scrollPosition animated:(BOOL)animated;//ä¸‹é¢è¿™äº›æ–¹æ³•ç”¨äºåŠ¨æ€æ·»åŠ ï¼Œåˆ é™¤ï¼Œç§»åŠ¨æŸäº›åˆ†åŒºè·å–items- (void)insertSections:(NSIndexSet *)sections;- (void)deleteSections:(NSIndexSet *)sections;- (void)reloadSections:(NSIndexSet *)sections;- (void)moveSection:(NSInteger)section toSection:(NSInteger)newSection;- (void)insertItemsAtIndexPaths:(NSArray&lt;NSIndexPath *&gt; *)indexPaths;- (void)deleteItemsAtIndexPaths:(NSArray&lt;NSIndexPath *&gt; *)indexPaths;- (void)reloadItemsAtIndexPaths:(NSArray&lt;NSIndexPath *&gt; *)indexPaths;- (void)moveItemAtIndexPath:(NSIndexPath *)indexPath toIndexPath:(NSIndexPath *)newIndexPath; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"XcodeçœŸæœºæµ‹è¯•could not find developer disk imageè§£å†³æ–¹æ³•","slug":"135XcodeçœŸæœºæµ‹è¯•could not find developer disk imageè§£å†³æ–¹æ³•","date":"2015-10-24T16:00:00.000Z","updated":"2021-07-03T12:37:13.275Z","comments":true,"path":"2015/10/25/135XcodeçœŸæœºæµ‹è¯•could not find developer disk imageè§£å†³æ–¹æ³•/","link":"","permalink":"http://huishao.cc/2015/10/25/135XcodeçœŸæœºæµ‹è¯•could not find developer disk imageè§£å†³æ–¹æ³•/","excerpt":"","text":"XcodeçœŸæœºæµ‹è¯•could not find developer disk imageè§£å†³æ–¹æ³•åœ¨ä½¿ç”¨Xcodeè¿›è¡ŒçœŸæœºè°ƒè¯•çš„æ—¶å€™ï¼Œæœ‰æ—¶æ ¹æ®çœŸæœºçš„ç³»ç»Ÿä¸åŒï¼Œä¼šå‡ºç°could not find developer disk image é”™è¯¯ï¼Œè¿™æ˜¯ç”±äºçœŸæœºç³»ç»Ÿè¿‡é«˜æˆ–è€…è¿‡ä½ï¼ŒXcodeä¸­æ²¡æœ‰åŒ¹é…çš„é…ç½®åŒ…æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªè·¯å¾„è¿›å…¥é…ç½®åŒ…çš„å­˜æ”¾ç›®å½•ï¼š /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/DeviceSupport é‡Œé¢æœ‰ç±»ä¼¼è¿™æ ·çš„ä¸€äº›æ–‡ä»¶å¤¹ï¼Œå¦‚æœè¿™äº›æ–‡ä»¶å¤¹ä¸­æ²¡æœ‰åŒ…å«æˆ‘ä»¬çœŸæœºçš„ç³»ç»Ÿï¼Œåˆ™ä¸èƒ½è¿›è¡ŒçœŸæœºæµ‹è¯•ã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡å°†ç›¸åº”çš„é…ç½®åŒ…æ·»åŠ å…¥è¿™ä¸ªæ–‡ä»¶å¤¹æ¥è§£å†³é—®é¢˜ï¼š è¯´äº†è§£å†³çš„æ–¹æ³•ï¼Œä¸æä¾›æ–‡ä»¶ï¼Œä¼šè®©å¤§å®¶è§‰å¾—å‘çˆ¹ï¼Œä¸‹é¢ç»™å¤§å®¶ä¸€ä¸ªé“¾æ¥ï¼Œé‡Œé¢æœ‰ä»iOS4.2åˆ°9.1æ‰€æœ‰ç‰ˆæœ¬çš„é…ç½®åŒ…ï¼Œå¤§å®¶å„å–æ‰€éœ€ï¼Œä¸ç”¨æ„Ÿè°¢æˆ‘ï¼š http://pan.baidu.com/s/1qYIQWjEã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"æ—¥å¸¸æŠ€å·§","slug":"æ—¥å¸¸æŠ€å·§","permalink":"http://huishao.cc/categories/æ—¥å¸¸æŠ€å·§/"}],"tags":[],"keywords":[{"name":"æ—¥å¸¸æŠ€å·§","slug":"æ—¥å¸¸æŠ€å·§","permalink":"http://huishao.cc/categories/æ—¥å¸¸æŠ€å·§/"}]},{"title":"watchOSä¸­è¿›è¡Œå¼‚æ­¥å›¾ç‰‡åŠ è½½å’Œç¼“å­˜çš„ç­–ç•¥","slug":"134watchOSä¸­è¿›è¡Œå¼‚æ­¥å›¾ç‰‡åŠ è½½å’Œç¼“å­˜çš„ç­–ç•¥","date":"2015-10-23T16:00:00.000Z","updated":"2021-07-03T12:33:30.631Z","comments":true,"path":"2015/10/24/134watchOSä¸­è¿›è¡Œå¼‚æ­¥å›¾ç‰‡åŠ è½½å’Œç¼“å­˜çš„ç­–ç•¥/","link":"","permalink":"http://huishao.cc/2015/10/24/134watchOSä¸­è¿›è¡Œå¼‚æ­¥å›¾ç‰‡åŠ è½½å’Œç¼“å­˜çš„ç­–ç•¥/","excerpt":"","text":"watchOSä¸­è¿›è¡Œå¼‚æ­¥å›¾ç‰‡åŠ è½½å’Œç¼“å­˜çš„ç­–ç•¥ä¸€ã€å¼•è¨€iWatchæ˜¯æ™ºèƒ½æ‰‹è¡¨çš„ä¸€æ¬¡é©å‘½ã€‚iWatchçš„åº”ç”¨ä¹Ÿå°†ä¼šè¶Šæ¥è¶Šå¤šï¼ŒåŸºäºwatchçš„ä¸€äº›ç‰¹ç‚¹ï¼ŒwatchOSçš„å¼€å‘è€…éœ€è¦æ›´åŠ ç²¾ç›Šçš„æŠŠæ¡watchçš„UIå’Œæ€§èƒ½ã€‚è¿ç”¨watchOSè‡ªå¸¦çš„ç¼“å­˜ä½“ç³»è¿›è¡Œæ•°æ®çš„ç¼“å­˜ï¼Œæ˜¯å¢å¼ºç”¨æˆ·ä½“éªŒåº¦çš„ä¸€ç§æ–¹å¼ï¼Œè¿™ç¯‡åšå®¢ï¼Œä»‹ç»åœ¨watchOSä¸­è¿›è¡Œå¼‚æ­¥åŠ è½½å›¾ç‰‡å’Œç¼“å­˜çš„æ–¹æ³•ï¼Œæ„¿ä¸å¿—åŒé“åˆçš„æœ‹å‹ï¼Œä¸€èµ·äº¤æµã€‚ å…³äºwatchOSä¸­çš„ç¼“å­˜æ¡†æ¶ï¼Œåœ¨è¿™é‡Œï¼šhttp://my.oschina.net/u/2340880/blog/519023 ã€‚ äºŒã€å­˜å‚¨çš„å‘½åè§„åˆ™åœ¨è¿›è¡Œè®¾è®¡ä¹‹å‰ï¼Œæˆ‘ä»¬åº”è¯¥å…ˆäº†è§£ï¼ŒwatchOSçš„ç¼“å­˜å®¹é‡ä¸ºæœ€å¤§20Mï¼Œå› ä¸ºæœ‰é™ï¼Œæˆ‘ä»¬æ›´åº”è¯¥è®¤çœŸçš„åˆ©ç”¨æ¯ä¸€ä»½ç©ºé—´ï¼Œå› æ­¤ï¼Œç¼“å­˜æˆ‘ä»¬ä¸ä»…å¯ä»¥å­˜ï¼Œåœ¨å³å°†è£…æ»¡çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¿˜è¦æœ‰åŠæ³•ä»ç¼“å­˜ä¸­åˆ å»ä¸€äº›ä¸œè¥¿ï¼Œè®©å‡ºç©ºé—´ï¼Œé‚£ä¹ˆåº”è¯¥åˆ é™¤å“ªäº›ä¸œè¥¿äº†ï¼Œæˆ‘ä»¬åº”è¯¥éƒ½å¯ä»¥æƒ³åˆ°ï¼Œå½“ç„¶æ˜¯æ—§çš„äº†ï¼ŒæŠŠæœ€æ—©çš„ç¼“å­˜åˆ æ‰ï¼Œæ‰€ä»¥ï¼Œåœ¨å­˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦è®¾è®¡ä¸€ç§è§„åˆ™ï¼Œå¯ä»¥ä¿å­˜å­˜å…¥çš„æ—¶é—´ï¼Œå¹¶ä¸”ä¸å½±å“æˆ‘å¯»æ‰¾è¿™ä¸ªç¼“å­˜æ–‡ä»¶ã€‚æˆ‘çš„æ–¹æ³•æ˜¯é€šè¿‡æ ¼å¼åŒ–çš„å‘½åï¼š 1234567891011121314//è¿™æ˜¯ä¸€ä¸ªè§„èŒƒç¼“å­˜å‘½åçš„æ–¹æ³•func checkString(str:NSString)-&gt;NSString&#123; let result:NSMutableString=NSMutableString() //å…ˆå°†æ‰€æœ‰çš„éå­—æ¯å’Œæ•°å­—å‰”é™¤æ‰ for var i=0 ; i&lt;str.length ; i++ &#123; if (str.characterAtIndex(i)&gt;=48&amp;&amp;str.characterAtIndex(i)&lt;=57)||(str.characterAtIndex(i)&gt;=65&amp;&amp;str.characterAtIndex(i)&lt;=90)||(str.characterAtIndex(i)&gt;=97&amp;&amp;str.characterAtIndex(i)&lt;=122)&#123; result.appendFormat(&quot;%c&quot;,str.characterAtIndex(i)) &#125; &#125; //æ‹¼æ¥ä¸Šå½“å‰æ—¶é—´æˆ³ let date:Double = NSDate().timeIntervalSince1970 result.appendFormat(&quot;?%.0f&quot;,date) return result&#125; é€šè¿‡ï¼Ÿç¬¦å·å°†åç§°å’Œæ—¶é—´æˆ³è¿›è¡Œäº†æ‹¼æ¥ã€‚ äºŒã€è¿›è¡Œå¼‚æ­¥åŠ è½½å›¾ç‰‡å’Œç¼“å­˜è¿™ä¸€æ­¥æ˜¯å¦‚ä¸‹çš„è®¾è®¡æ€è·¯ï¼šé€šè¿‡å›¾ç‰‡urlä»ç¼“å­˜çš„è·¯å¾„ä¸­è¿›è¡Œå¯»æ‰¾ï¼Œå¦‚æœæœ‰ï¼Œç›´æ¥å–å‡ºå›¾ç‰‡ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå¼€å¯ä¸€ä¸ªçº¿ç¨‹è¿›è¡Œå¼‚æ­¥åŠ è½½ï¼Œå®Œæˆååˆ·æ–°ä¸»çº¿ç¨‹UIå¹¶å°†å›¾ç‰‡æ–‡ä»¶è§„èŒƒå‘½ååè¿›è¡Œç¼“å­˜ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263//è¿›è¡Œå­˜å–ç¼“å­˜çš„æ“ä½œ//å–å‡ºwatchOSçš„ç¼“å­˜ç›®å½•let imagedic:NSDictionary = WKInterfaceDevice().cachedImages as NSDictionary //å–å›¾ç‰‡å­˜å‚¨çš„åç§° let imageUrl:NSMutableString=NSMutableString() //è¿™é‡Œçš„urlæ˜¯å¤–ç•Œä¼ è¿›æ¥çš„å›¾ç‰‡åœ°å€urlï¼Œè¿›è¡Œå»æ‰ç‰¹æ®Šå­—ç¬¦ for var i=0 ; i&lt;url?.length ; i++ &#123; if (url?.characterAtIndex(i)&gt;=48&amp;&amp;url?.characterAtIndex(i)&lt;=57)||(url?.characterAtIndex(i)&gt;=65&amp;&amp;url?.characterAtIndex(i)&lt;=90)||(url?.characterAtIndex(i)&gt;=97&amp;&amp;url?.characterAtIndex(i)&lt;=122)&#123; imageUrl.appendFormat(&quot;%c&quot;,(url?.characterAtIndex(i))!) &#125; &#125; //æŸ¥æ‰¾ç¼“å­˜ä¸­æ˜¯å¦æœ‰å›¾ç‰‡ //éå†watchOSçš„ç¼“å­˜ç›®å½• for var i=0 ; i&lt;imagedic.allKeys.count ; i++ &#123; //é€šè¿‡è§„å®šå¥½çš„ï¼Ÿè¿›è¡Œåˆ†å‰² let str:NSArray = imagedic.allKeys[i].componentsSeparatedByString(&quot;?&quot;) if str[0].isEqualToString(imageUrl as String) &#123; //æ‰¾åˆ°å›¾ç‰‡ viewæ˜¯è¦è®¾ç½®çš„interfaceImage view.setImageNamed(imagedic.allKeys[i] as? String) return; &#125; &#125; //è®¾ç½®ç¼ºçœå›¾ç‰‡ è¿™é‡Œæ˜¯å¤–ç•Œä¼ è¿›æ¥çš„ç¼ºçœå›¾ç‰‡ï¼Œå¦‚æœéœ€è¦ä¸‹è½½ï¼Œå…ˆè®¾ç½®ç¼ºçœå›¾ç‰‡ if defaultImage != nil &#123; view.setImageNamed(defaultImage as? String) &#125; //è¿›è¡Œä¸‹è½½å’Œå­˜å‚¨ let dispath = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0) //åœ¨æ–°çš„çº¿ç¨‹ä¸­ä¸‹è½½ dispatch_async(dispath, &#123; () -&gt; Void in let imgURL:NSURL = NSURL(string: url as! String)! let imageData:NSData? = NSData(contentsOfURL: imgURL) if imageData != nil &#123; //ä¸»çº¿ç¨‹ä¸­åˆ·æ–° dispatch_async(dispatch_get_main_queue(), &#123; () -&gt; Void in view.setImageData(imageData!) &#125;) //å†™ç¼“å­˜ å¦‚æœç¼“å­˜æ»¡äº† å°±åˆ æ‰æ—¶é—´æˆ³æœ€æ—©çš„ä¸€å¼ ç¼“å­˜ //è¿™ä¸ªæ–¹æ³•ä¼šè¿”å›boolå€¼ï¼Œåˆ¤æ–­æ˜¯å¦å­˜å…¥æˆåŠŸ while !WKInterfaceDevice().addCachedImageWithData(imageData!, name: checkString(url!) as String) &#123; //å¦‚æœå­˜å…¥å¤±è´¥ï¼Œåˆ å»æ—¶é—´æˆ³æœ€æ—©çš„ç¼“å­˜ var temp:NSString? //ä¿å­˜æœ€æ—©çš„ç¼“å­˜åç§° var result:NSString? for var i=0 ; i&lt;imagedic.allKeys.count ; i++ &#123; let str:NSArray = imagedic.allKeys[i].componentsSeparatedByString(&quot;?&quot;) if temp == nil &#123; temp = str[1] as? NSString result = imagedic.allKeys[i] as! String break &#125; if str[1].doubleValue &lt; temp?.doubleValue &#123; //æ‰¾åˆ°æ›´æ—©çš„ç¼“å­˜ temp = str[1] as? NSString result = imagedic.allKeys[i] as! String &#125; &#125; //åˆ æ‰ç¼“å­˜ WKInterfaceDevice().removeCachedImageWithName(result as! String) &#125; &#125; &#125;) ä¸Šé¢çš„ä»£ç å’Œæ³¨é‡Šï¼Œå·²ç»ä»‹ç»äº†æ‰€æœ‰çš„æ€è·¯ï¼Œæœ‰é”™è¯¯ä¹‹å¤„æˆ–è€…æ›´å¥½çš„æ–¹å¼ï¼Œè¿˜æœ›å¤šå¤šæŒ‡ç‚¹ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"Apple Watchå¼€å‘æ‰‹è®°","slug":"Apple-Watchå¼€å‘æ‰‹è®°","permalink":"http://huishao.cc/categories/Apple-Watchå¼€å‘æ‰‹è®°/"}],"tags":[],"keywords":[{"name":"Apple Watchå¼€å‘æ‰‹è®°","slug":"Apple-Watchå¼€å‘æ‰‹è®°","permalink":"http://huishao.cc/categories/Apple-Watchå¼€å‘æ‰‹è®°/"}]},{"title":"AppleWatchå¼€å‘å…¥é—¨ä¸ƒâ€”â€”watchOSä¸­é€šçŸ¥çš„åº”ç”¨","slug":"131AppleWatchå¼€å‘å…¥é—¨ä¸ƒâ€”â€”watchOSä¸­é€šçŸ¥çš„åº”ç”¨","date":"2015-10-18T16:00:00.000Z","updated":"2021-07-03T12:30:06.427Z","comments":true,"path":"2015/10/19/131AppleWatchå¼€å‘å…¥é—¨ä¸ƒâ€”â€”watchOSä¸­é€šçŸ¥çš„åº”ç”¨/","link":"","permalink":"http://huishao.cc/2015/10/19/131AppleWatchå¼€å‘å…¥é—¨ä¸ƒâ€”â€”watchOSä¸­é€šçŸ¥çš„åº”ç”¨/","excerpt":"","text":"AppleWatchå¼€å‘å…¥é—¨ä¸ƒâ€”â€”watchOSä¸­é€šçŸ¥çš„åº”ç”¨ä¸€ã€å¼•è¨€åœ¨iOSç³»ç»Ÿä¸­ï¼Œæ”¯æŒçš„é€šçŸ¥æœ‰ä¸¤ç§ç±»å‹ï¼šæœ¬åœ°é€šçŸ¥å’Œè¿œç¨‹é€šçŸ¥ã€‚æœ¬åœ°é€šçŸ¥å¤šç”¨äºè®¡æ—¶ç±»é€šçŸ¥ï¼Œè¿œç¨‹çš„åˆç§°æ¨é€ï¼Œå¤šç”¨äºä¸€äº›æç¤ºåŠ¨æ€çš„æç¤ºä¿¡æ¯ã€‚è¿™é‡Œæœ‰ç›¸å…³é€šçŸ¥çš„ä¸€äº›çŸ¥è¯†æ€»ç»“ï¼š æœ¬åœ°æ¨é€ï¼šhttp://my.oschina.net/u/2340880/blog/405491ã€‚ è¿œç¨‹æ¨é€ï¼šhttp://my.oschina.net/u/2340880/blog/413584ã€‚ åœ¨watchä¸­ï¼Œé€šçŸ¥æ˜¯å’ŒiphoneåŒæ­¥çš„ï¼Œåœ¨iphoneä¸Šçš„Appæ”¶åˆ°é€šçŸ¥çš„åŒæ—¶ï¼Œä¼šé»˜è®¤ä¹Ÿæ¨é€åˆ°watchä¸Šï¼ŒåŸºäºwatchçš„ç©¿æˆ´æ€§ï¼Œå¯¹ç”¨æˆ·æ¥è¯´ï¼Œå®ƒä¸Šé¢çš„é€šçŸ¥ä¿¡æ¯å°†æ¯”iphoneæ›´åŠ åŠæ—¶ã€‚ äºŒã€WatchOSé€šçŸ¥æ¦‚è§ˆé¦–å…ˆï¼Œwatchä¸Šçš„é€šçŸ¥åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šshort-lookå’Œlong-lockã€‚ç®€è€Œè¨€ä¹‹ï¼Œshort-lookï¼Œå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªç®€å•çš„é€šçŸ¥é¢„è§ˆï¼Œå®ƒä¼šå°†é€šçŸ¥å‘èµ·çš„APPå’Œä¸»è¦æ ‡é¢˜ç­‰ä¿¡æ¯å±•ç¤ºç»™ä½ ï¼Œè®©ä½ ä¸€ç›®äº†ç„¶ï¼Œå½“ç”¨æˆ·æŠ¬èµ·æ‰‹è…•ï¼ŒæŸ¥çœ‹è¿™ä¸ªé€šçŸ¥ä¸€å®šæ—¶é—´ï¼Œè¿™ä¸ªçŸ­é€šçŸ¥å°±ä¼šè½¬æ¢ä¸ºlong-looké€šçŸ¥ã€‚short-lookçš„é€šçŸ¥ç•Œé¢æˆ‘ä»¬ä¸èƒ½å¤Ÿè‡ªå®šä¹‰ï¼Œç³»ç»Ÿä¸ºæˆ‘ä»¬è®¾è®¡å¥½äº†æ¨¡æ ·ï¼Œå¦‚ä¸‹ï¼š é•¿é€šçŸ¥çš„ç•Œé¢æˆ‘ä»¬æ˜¯å¯ä»¥è¿›è¡Œä¸€å®šç¨‹åº¦ä¸Šçš„è‡ªå®šä¹‰çš„ï¼Œå¹¶ä¸”å¯ä»¥æ·»åŠ æŒ‰é’®ç­‰é€»è¾‘æ“ä½œã€‚ long-lookä¹Ÿåˆ†ä¸ºä¸¤ç§ç•Œé¢ï¼Œé™æ€ç•Œé¢å’ŒåŠ¨æ€ç•Œé¢ã€‚è¿™ä¸ªä¹Ÿå¥½ç†è§£ï¼Œé™æ€ç•Œé¢æ˜¯æˆ‘ä»¬åœ¨å†™ç¨‹åºæ—¶å°±å®šä¹‰å¥½çš„ç•Œé¢ï¼Œåœ¨é€šçŸ¥å‘é€åˆ°watchä¸Šæ—¶ï¼Œç•Œé¢ä¼šè‡ªåŠ¨åŒ¹é…é€šçŸ¥å†…å®¹è¿›è¡Œæ˜¾ç¤ºã€‚åŠ¨æ€çš„ç•Œé¢åˆ™æ˜¯å½“æ”¶åˆ°é€šçŸ¥æ—¶ï¼Œä¼šå…ˆæ‰§è¡Œæˆ‘ä»¬ç›¸åº”çš„é…ç½®ä»£ç ï¼Œä¹‹ååœ¨è¿›è¡Œé€šçŸ¥ç•Œé¢çš„å±•ç¤ºã€‚ä¸€ä¸ªlong-lookç•Œé¢å¤§è‡´å¦‚ä¸‹ï¼š åœ¨long-lockä¸­ï¼Œç•Œé¢å®šä¹‰ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼Œå¤´éƒ¨æ ‡é¢˜æ ï¼Œè‡ªå®šä¹‰è§†å›¾æ å’ŒæŒ‰é’®äº¤äº’åŒºã€‚å¤´éƒ¨çš„æ ‡é¢˜æ æˆ‘ä»¬ä¸èƒ½è‡ªå®šä¹‰ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŠé€æ˜çš„ä¸Šé¢æœ‰Appå›¾æ ‡å’Œåå­—çš„æ¨ªæ ã€‚å…¶ä¸‹é¢æ˜¯æˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰çš„åŒºåŸŸï¼Œæˆ‘ä»¬å¯ä»¥åœ¨storyBoardä¸­æ‹‰å…¥æ–‡æœ¬å’Œå›¾ç‰‡ã€‚æœ€ä¸‹é¢æ˜¯ä¸€äº›äº¤äº’æŒ‰é’®ï¼Œå…¶åç§°ç­‰é…ç½®ä¿¡æ¯åœ¨æ¨é€çš„æ–‡ä»¶ä¸­å®šä¹‰ã€‚ ä¸‰ã€å¦‚ä½•åœ¨æ¨¡æ‹Ÿå™¨ä¸Šæ¨¡æ‹Ÿè¿œç¨‹æ¨é€åœ¨watchOSæ¨¡æ‹Ÿå™¨ä¸Šï¼ŒXcodeä¸ºæˆ‘ä»¬å‡†å¤‡å¥½äº†ä¸€ç§å¯ä»¥æ¨¡æ‹Ÿæµ‹è¯•æ¨é€çš„æ–¹å¼ã€‚å¦‚æœæˆ‘ä»¬åˆ›å»ºé¡¹ç›®æ—¶ï¼Œé€‰æ‹©äº†NotifacationScene,åˆ™Xcodeä¼šé»˜è®¤ä¸ºæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªapnsæ–‡ä»¶ï¼š è¿™ä¸ªæ–‡ä»¶å°±æ˜¯æ¨¡æ‹Ÿæ¨é€çš„ç›¸å…³é…ç½®æ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰‹åŠ¨æ¥åˆ›å»ºï¼š æ–‡ä»¶ä¸­çš„å†…å®¹æ ¼å¼å¦‚ä¸‹ï¼š 12345678910111213141516171819&#123; &quot;aps&quot;: &#123; &quot;alert&quot;: &#123; &quot;body&quot;: &quot;é€šçŸ¥&quot;, &quot;title&quot;: &quot;é€šçŸ¥æ¥äº†&quot; &#125;, &quot;category&quot;: &quot;myCategory&quot; &#125;, &quot;WatchKit Simulator Actions&quot;: [ &#123; &quot;title&quot;: &quot;First Button&quot;, &quot;identifier&quot;: &quot;firstButtonAction&quot; &#125; ], &quot;customKey&quot;: &quot;Use this file to define a testing payload for your notifications. The aps dictionary specifies the category, alert text and title. The WatchKit Simulator Actions array can provide info for one or more action buttons in addition to the standard Dismiss button. Any other top level keys are custom payload. If you have multiple such JSON files in your project, you&apos;ll be able to select them when choosing to debug the notification interface of your Watch App.&quot;&#125; è¿™æ˜¯ä¸€äº›jsonæ ¼å¼çš„æ•°æ®ï¼Œå…¶ä¸­alertæ˜¯å¯¹æ¨é€å†…å®¹çš„è®¾ç½®ï¼Œbodyä¼šæ˜¾ç¤ºåœ¨long-lookçš„æ ‡é¢˜æ ï¼Œtitleä¼šæ˜¾ç¤ºåœ¨short-lookçš„æ ‡é¢˜æ ï¼ŒActionsæ•°ç»„ä¸­æ˜¯å¯¹æŒ‰é’®å°±è¡Œé…ç½®ï¼Œæ¯ä¸€ä¸ªæŒ‰é’®å¯ä»¥è®¾ç½®ä¸€ä¸ªæ ‡é¢˜å’Œidï¼Œæ ‡é¢˜ç”¨äºåœ¨æ¨é€ç•Œé¢æ˜¾ç¤ºï¼Œidç”¨äºå¤„ç†ç‚¹å‡»æŒ‰é’®åè§¦å‘çš„é€»è¾‘ã€‚ åˆ›å»ºå¥½è¿™ä¸ªï¼Œæˆ‘ä»¬å¯ä»¥æ¥è¯•ç€æµ‹è¯•ä¸€ä¸‹æ¨é€çš„ç•Œé¢ï¼Œé€‰æ‹©æ¨é€å·¥ç¨‹ï¼Œè¿è¡Œå³å¯ï¼š å››ã€long-lookçš„é™æ€ç•Œé¢å’ŒåŠ¨æ€ç•Œé¢ä¸Šé¢æåˆ°è¿‡ï¼Œlong-lookåˆ†ä¸ºé™æ€ç•Œé¢å’ŒåŠ¨æ€ç•Œé¢ä¸¤ç§ï¼Œå½“æˆ‘ä»¬åœ¨storyBoardä¸­æ‹‰å…¥ä¸€ä¸ªNotification Interface Controllerçš„æ—¶å€™ï¼Œå¯ä»¥é€‰æ‹©åŒæ—¶åˆ›å»ºåŠ¨æ€ç•Œé¢ï¼Œå‹¾é€‰ Has Dynamic Interfaceï¼š è¿™æ—¶ï¼Œåœ¨storyBoardä¸­æ˜¯å¦‚ä¸‹æ¨¡æ ·ï¼š æˆ‘ä»¬åœ¨åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œç»§æ‰¿äºWKUserNotificationInterfaceControllerï¼Œå¹¶å°†storyBoardä¸­åŠ¨æ€çš„çš„æ¨é€controllerçš„classè®¾ç½®ä¸ºæˆ‘ä»¬åˆ›å»ºçš„ç±»ï¼š æ³¨æ„ï¼Œè¿™é‡Œè®¾ç½®çš„æ˜¯åŠ¨æ€çš„Interfaceï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢å³è¾¹çš„controllerã€‚ä¹‹åè¿è¡Œï¼Œä½ ä¼šå‘ç°æ•ˆæœå¹¶æ²¡æœ‰ä»€ä¹ˆæ”¹å˜ï¼Œé‚£æ˜¯å› ä¸ºç³»ç»Ÿé»˜è®¤ä¼šä»é™æ€ç•Œé¢åŠ è½½æ¨é€ç•Œé¢ï¼Œæˆ‘ä»¬éœ€è¦åœ¨NotifacationControllerä»£ç ä¸­åšä¸€äº›æ“ä½œï¼š 1234567891011121314151617//åœ¨NotificationControllerä¸­é‡å†™ä¸‹é¢ä¸¤ä¸ªæ–¹æ³•//è¿™ä¸ªç”¨äºæœ¬åœ°æ¨é€override func didReceiveLocalNotification(localNotification: UILocalNotification, withCompletion completionHandler: ((WKUserNotificationInterfaceType) -&gt; Void)) &#123; //åœ¨è¿™é‡Œåšä¸€äº›åŠ¨æ€ç•Œé¢çš„åŠ è½½æ“ä½œï¼Œæ¯”å¦‚å¯ä»¥æ ¹æ®æ¨é€çš„æ•°æ® è®¾ç½®å›¾ç‰‡ æ–‡å­—ç­‰ //ä¸‹é¢è¿™ä¸ªæ–¹æ³•å†³å®šæ˜¯åŠ è½½é™æ€çš„ç•Œé¢è¿˜æ˜¯åŠ¨æ€çš„ç•Œé¢ //Customæ˜¯åŠ è½½åŠ¨æ€ç•Œé¢ //defaultæ˜¯åŠ è½½é™æ€ç•Œé¢ completionHandler(.Custom) &#125; //è®¾ä¸ªç”¨äºè¿œç¨‹æ¨é€ å’Œä¸Šé¢æ–¹æ³•ç±»ä¼¼override func didReceiveRemoteNotification(remoteNotification: [NSObject : AnyObject], withCompletion completionHandler: ((WKUserNotificationInterfaceType) -&gt; Void)) &#123; completionHandler(.Custom) &#125; äº”ã€è§¦å‘æ¨é€ç‚¹å‡»äº‹ä»¶é¦–å…ˆï¼Œæˆ‘ä»¬å¤šé…ç½®å‡ ä¸ªç‚¹å‡»æŒ‰é’®ï¼Œåœ¨apnsæ–‡ä»¶ä¸­å¦‚ä¸‹é…ç½®ï¼š 1234567891011121314151617&quot;WatchKit Simulator Actions&quot;: [ &#123; &quot;title&quot;: &quot;ç¬¬ä¸€&quot;, &quot;identifier&quot;: &quot;one&quot; &#125;, &#123; &quot;title&quot;: &quot;ç¬¬äºŒ&quot;, &quot;identifier&quot;: &quot;two&quot; &#125;, &#123; &quot;title&quot;: &quot;ç¬¬ä¸‰&quot;, &quot;identifier&quot;: &quot;three&quot; &#125; ], åœ¨æˆ‘ä»¬watch Appçš„InterfaceControllerä¸­å®ç°å¦‚ä¸‹çš„æ–¹æ³•ï¼š 12345678910//é‡å†™ä¸‹é¢ä¸¤ä¸ªæ–¹æ³•æ¥å“åº”ç‚¹å‡»äº‹ä»¶//è¿œç¨‹æ¨é€çš„æ–¹æ³•override func handleActionWithIdentifier(identifier: String?, forRemoteNotification remoteNotification: [NSObject : AnyObject]) &#123; //é€šè¿‡æˆ‘ä»¬é…ç½®çš„æŒ‰é’®idæ¥åŒºåˆ†ç‚¹å‡»çš„æŒ‰é’® å¤„ç†å“åº”çš„é€»è¾‘ print(identifier) &#125;//æœ¬åœ°æ¨é€çš„æ–¹æ³•override func handleActionWithIdentifier(identifier: String?, forLocalNotification localNotification: UILocalNotification) &#123; &#125; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"Apple Watchå¼€å‘æ‰‹è®°","slug":"Apple-Watchå¼€å‘æ‰‹è®°","permalink":"http://huishao.cc/categories/Apple-Watchå¼€å‘æ‰‹è®°/"}],"tags":[],"keywords":[{"name":"Apple Watchå¼€å‘æ‰‹è®°","slug":"Apple-Watchå¼€å‘æ‰‹è®°","permalink":"http://huishao.cc/categories/Apple-Watchå¼€å‘æ‰‹è®°/"}]},{"title":"AppleWatchå¼€å‘å…¥é—¨ä¹â€”â€”Watchå¸§åŠ¨ç”»çš„å®ç°","slug":"133AppleWatchå¼€å‘å…¥é—¨ä¹â€”â€”Watchå¸§åŠ¨ç”»çš„å®ç°","date":"2015-10-18T16:00:00.000Z","updated":"2021-07-03T12:31:44.420Z","comments":true,"path":"2015/10/19/133AppleWatchå¼€å‘å…¥é—¨ä¹â€”â€”Watchå¸§åŠ¨ç”»çš„å®ç°/","link":"","permalink":"http://huishao.cc/2015/10/19/133AppleWatchå¼€å‘å…¥é—¨ä¹â€”â€”Watchå¸§åŠ¨ç”»çš„å®ç°/","excerpt":"","text":"AppleWatchå¼€å‘å…¥é—¨ä¹â€”â€”Watchå¸§åŠ¨ç”»çš„å®ç°åŠ¨ç”»ä¸€ç›´æ˜¯iOSç³»ç»Ÿçš„ä¸€å¤§äº®ç‚¹ï¼ŒCoreAnimationå’Œç²’å­æ•ˆæœçš„æ”¯æŒï¼Œå¼€å‘è€…å¯ä»¥å¾ˆå®¹æ˜“çš„åšå‡ºæ•ˆæœç‚«é…·çš„åŠ¨ç”»ç‰¹æ•ˆã€‚åœ¨watchOSä¸­ï¼Œç”±äºæ€§èƒ½å’Œå±å¹•å°ºå¯¸çš„é™åˆ¶ï¼Œå¯¹äºåŠ¨ç”»ï¼Œå¹¶æ²¡æœ‰å¼ºå¤§çš„æ¡†æ¶æ”¯æŒï¼Œä½†æ˜¯è¿™å¹¶ä¸æ˜¯è¯´å¼€å‘è€…å°±æ²¡åŠæ³•åœ¨watchä¸Šæ·»åŠ åŠ¨ç”»çš„ç‰¹æ•ˆäº†ã€‚åœ¨watchOSä¸­å”¯ä¸€å¯ä»¥è®©å¼€å‘è€…ç”¨äºåŠ¨ç”»æ“ä½œçš„å°±æ˜¯å¸§åŠ¨ç”»ã€‚ å’ŒiOSç±»ä¼¼ï¼ŒwatchOSä¸­çš„çœŸåŠ¨ç”»ä¹Ÿæ˜¯é€šè¿‡UIImageå¯¹è±¡çš„åˆé›†æ¥å±•ç¤ºçš„ã€‚åªæ˜¯è®¾ç½®å’Œç”¨æ³•ç•¥æœ‰ä¸åŒã€‚ é¦–å…ˆï¼ŒwatchOSä¸­å¸§åŠ¨ç”»çš„æ“ä½œè¢«å•ç‹¬å°è£…æˆäº†ä¸€ä¸ªåè®®ï¼Œå½“ç„¶ï¼ŒWKInterfaceImageç±»æ˜¯éµå®ˆäº†è¿™ä¸ªåè®®çš„ï¼š 12345678public protocol WKImageAnimatable : NSObjectProtocol &#123; //ä»é»˜è®¤å¸§å¼€å§‹æ’­æ”¾åŠ¨ç”» public func startAnimating() //æ’­æ”¾ä¸€ä¸ªæŒ‡å®šèŒƒå›´çš„å¸§åŠ¨ç”» NSRangeæ˜¯å¸§çš„èŒƒå›´ï¼Œdurtionæ˜¯æ’­æ”¾ä¸€éçš„æ—¶é—´ï¼ŒrepeatCountæ˜¯é‡å¤æ’­æ”¾æ¬¡æ•°ï¼Œ0ä¸ºæ— é™å¾ªç¯ public func startAnimatingWithImagesInRange(imageRange: NSRange, duration: NSTimeInterval, repeatCount: Int) //åœæ­¢æ’­æ”¾åŠ¨ç”» public func stopAnimating()&#125; åˆ›å»ºå¸§åŠ¨ç”»çš„æ­¥éª¤ä¸ä¸€äº›æ³¨æ„ï¼š 1ã€å…³è”ä¸€ä¸ªè§†å›¾ä¸­çš„WKInterfaceImageå¯¹è±¡ 2ã€æ‰€æœ‰å¸§åŠ¨ç”»çš„å›¾ç‰‡å¸§å¿…é¡»æœ‰ç»Ÿä¸€çš„æ ¼å¼ï¼šæ¯”å¦‚image1.pngï¼Œimage2.pngç­‰ç­‰ 3ã€ç»™WKInterfaceImageå¯¹è±¡è®¾ç½®å¸§å‰ç¼€ï¼š 1imageInterface.setImageNamed(&quot;image&quot;) æ³¨æ„ï¼šè¿™é‡Œä½¿ç”¨çš„æ–¹æ³•å’Œè®¾ç½®å›¾ç‰‡çš„æ–¹æ³•ä¸€æ ·ï¼Œä½†æ˜¯å‚æ•°æœ‰åˆ«ï¼Œå›¾ç‰‡çš„è®¾ç½®éœ€è¦å®Œæ•´çš„å›¾ç‰‡åï¼ŒåŠ¨ç”»å¸§å‰ç¼€çš„è®¾ç½®åªè¦è®¾ç½®å¸§å›¾ç‰‡çš„å‰ç¼€ã€‚ 4ã€å¼€å§‹åŠ¨ç”»ï¼š 1 imageInterface.startAnimatingWithImagesInRange(NSRange(location: 1, length: 3), duration: 3, repeatCount: 0) æ³¨æ„ï¼šç´ æå¸§å¿…é¡»æ”¾å…¥watchKit Appè¿™ä¸ªTargetä¸­ï¼Œæ‰å¯ä»¥ä½¿ç”¨ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"Apple Watchå¼€å‘æ‰‹è®°","slug":"Apple-Watchå¼€å‘æ‰‹è®°","permalink":"http://huishao.cc/categories/Apple-Watchå¼€å‘æ‰‹è®°/"}],"tags":[],"keywords":[{"name":"Apple Watchå¼€å‘æ‰‹è®°","slug":"Apple-Watchå¼€å‘æ‰‹è®°","permalink":"http://huishao.cc/categories/Apple-Watchå¼€å‘æ‰‹è®°/"}]},{"title":"AppleWatchå¼€å‘å…¥é—¨å…«â€”â€”Watchä¸­å›¾ç‰‡ç¼“å­˜çš„å¤„ç†","slug":"132AppleWatchå¼€å‘å…¥é—¨å…«â€”â€”Watchä¸­å›¾ç‰‡ç¼“å­˜çš„å¤„ç†","date":"2015-10-18T16:00:00.000Z","updated":"2021-07-03T12:30:58.537Z","comments":true,"path":"2015/10/19/132AppleWatchå¼€å‘å…¥é—¨å…«â€”â€”Watchä¸­å›¾ç‰‡ç¼“å­˜çš„å¤„ç†/","link":"","permalink":"http://huishao.cc/2015/10/19/132AppleWatchå¼€å‘å…¥é—¨å…«â€”â€”Watchä¸­å›¾ç‰‡ç¼“å­˜çš„å¤„ç†/","excerpt":"","text":"AppleWatchå¼€å‘å…¥é—¨å…«â€”â€”Watchä¸­å›¾ç‰‡ç¼“å­˜çš„å¤„ç†ç”±äºiWatchåœ¨å­˜å‚¨å’Œæ€§èƒ½ä¸Šéƒ½å’ŒiPhoneæœ‰ç€å¾ˆå¤§çš„å·®è·ï¼Œè¿™å°±è¦æ±‚å¼€å‘è€…å¯¹ç¨‹åºæœ‰æ›´é«˜çš„æ€§èƒ½ä¼˜åŒ–ï¼Œä¸‹è½½ä¸ä¼ è¾“å›¾åƒï¼Œåœ¨Watchæ“ä½œä¸­æ˜¯ä¸€ä¸ªéæ—¶çš„è¿‡ç¨‹ï¼Œå› æ­¤ï¼ŒwatchOSä¸­ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªç¼“å­˜å›¾ç‰‡çš„æ¡†æ¶ï¼Œå¹¶ä¸”æ¥å£å’Œä½¿ç”¨éƒ½éå¸¸ç®€å•ã€‚ WatchOSä¸­ç¼“å­˜å›¾ç‰‡çš„æ–¹æ³•å°è£…åœ¨WKInterfaceDeviceè¿™ä¸ªç±»ä¸­ï¼Œå…¶ä¸­æ·»åŠ å›¾ç‰‡è¿›å…¥ç¼“å­˜çš„æ–¹æ³•å¦‚ä¸‹ï¼š 12345//æ·»åŠ ä¸€ä¸ªUIImageå¯¹è±¡è¿›å…¥ç¼“å­˜ç›®å½•ï¼Œè®¾ç½®nameï¼Œå½“æˆ‘ä»¬è®¾ç½®å›¾ç‰‡æ—¶ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡nameè¿›è¡Œè®¾ç½®public func addCachedImage(image: UIImage, name: String) -&gt; Bool//æ·»åŠ ä¸€ä¸ªDataå›¾ç‰‡è¿›å…¥ç¼“å­˜ç›®å½•ï¼Œè®¾ç½®nameï¼Œå½“æˆ‘ä»¬è®¾ç½®å›¾ç‰‡æ—¶ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡nameè¿›è¡Œè®¾ç½®public func addCachedImageWithData(imageData: NSData, name: String) -&gt; Bool//ä¸Šé¢ä¸¤ä¸ªæ–¹æ³•çš„è¿”å›å€¼ç”¨äºåˆ¤æ–­ç¼“å­˜æ˜¯å¦æˆåŠŸï¼Œå› ä¸ºwatchç¼“å­˜ç›®å½•çš„å¤§å°æœ‰é™ï¼Œå¯èƒ½ä¼šå¤±è´¥ åŒæ ·ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†å·²ç»ç¼“å­˜çš„å›¾ç‰‡æ•°æ®åˆ é™¤æ‰ï¼š 1234 //æ ¹æ®nameåˆ é™¤ä¸€ä¸ªå›¾ç‰‡æ•°æ® public func removeCachedImageWithName(name: String) //åˆ é™¤ç¼“å­˜ç›®å½•ä¸­æ‰€æœ‰çš„å›¾ç‰‡æ•°æ® public func removeAllCachedImages() æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹æ³•è·å–æ‰€æœ‰ç¼“å­˜å›¾ç‰‡çš„nameå€¼ï¼š 12//ä¸‹é¢è¿™ä¸ªå‡½æ•°è¿”å›ä¸€ä¸ªå­—å…¸ï¼Œstringä¸ºç¼“å­˜å›¾ç‰‡çš„nameå€¼ï¼ŒNSNumberä¸ºç›¸åº”çš„å›¾ç‰‡å¤§å°ï¼Œå•ä½ä¸ºbpublic var cachedImages: [String : NSNumber] &#123; get &#125; æ³¨æ„ï¼šç³»ç»Ÿç¼“å­˜ç›®å½•çš„å¤§å°ä¸º20Mï¼Œå¦‚æœç¼“å­˜å¤±è´¥ï¼Œå¯ä»¥å°è¯•åˆ æ‰æ—§çš„ç¼“å­˜ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"Apple Watchå¼€å‘æ‰‹è®°","slug":"Apple-Watchå¼€å‘æ‰‹è®°","permalink":"http://huishao.cc/categories/Apple-Watchå¼€å‘æ‰‹è®°/"}],"tags":[],"keywords":[{"name":"Apple Watchå¼€å‘æ‰‹è®°","slug":"Apple-Watchå¼€å‘æ‰‹è®°","permalink":"http://huishao.cc/categories/Apple-Watchå¼€å‘æ‰‹è®°/"}]},{"title":"iOS8ç»Ÿä¸€çš„ç³»ç»Ÿæç¤ºæ§ä»¶â€”â€”UIAlertController","slug":"130iOS8ç»Ÿä¸€çš„ç³»ç»Ÿæç¤ºæ§ä»¶â€”â€”UIAlertController","date":"2015-10-16T16:00:00.000Z","updated":"2021-07-03T12:29:15.019Z","comments":true,"path":"2015/10/17/130iOS8ç»Ÿä¸€çš„ç³»ç»Ÿæç¤ºæ§ä»¶â€”â€”UIAlertController/","link":"","permalink":"http://huishao.cc/2015/10/17/130iOS8ç»Ÿä¸€çš„ç³»ç»Ÿæç¤ºæ§ä»¶â€”â€”UIAlertController/","excerpt":"","text":"iOS8ç»Ÿä¸€çš„ç³»ç»Ÿæç¤ºæ§ä»¶â€”â€”UIAlertControllerä¸€ã€å¼•è¨€ç›¸ä¿¡åœ¨iOSå¼€å‘ä¸­ï¼Œå¤§å®¶å¯¹UIAlertViewå’ŒUIActionSheetä¸€å®šä¸é™Œç”Ÿï¼Œè¿™ä¸¤ä¸ªæ§ä»¶åœ¨UIè®¾è®¡ä¸­å‘æŒ¥äº†å¾ˆå¤§çš„ä½œç”¨ã€‚ç„¶è€Œå¦‚æœä½ ç”¨è¿‡ï¼Œä½ ä¼šå‘ç°è¿™ä¸¤ä¸ªæ§ä»¶çš„è®¾è®¡æ€è·¯æœ‰äº›ç¹çï¼Œé€šè¿‡åˆ›å»ºè®¾ç½®ä»£ç†æ¥è¿›è¡Œç•Œé¢çš„äº¤äº’ï¼Œå°†ä»£ç é€»è¾‘åˆ†å‰²äº†ï¼Œå¹¶ä¸”å¾ˆå®¹æ˜“å½¢æˆå†—ä½™ä»£ç ã€‚åœ¨iOS8ä¹‹åï¼Œç³»ç»Ÿå¸å¼•äº†UIAlertControllerè¿™ä¸ªç±»ï¼Œæ•´ç†äº†UIAlertViewå’ŒUIActionSheetè¿™ä¸¤ä¸ªæ§ä»¶ï¼Œåœ¨iOSä¸­ï¼Œå¦‚æœä½ æ‰”ä½¿ç”¨UIAlertViewå’ŒUIActionSheetï¼Œç³»ç»Ÿåªæ˜¯ä¼šæç¤ºä½ ä½¿ç”¨æ–°çš„æ–¹æ³•ï¼ŒiOS9ä¸­ï¼Œè¿™ä¸¤ä¸ªç±»è¢«å®Œå…¨å¼ƒç”¨ï¼Œä½†è¿™å¹¶ä¸è¯´æ˜æ—§çš„ä»£ç å°†ä¸èƒ½ä½¿ç”¨ï¼Œæ—§çš„ä»£ç ä¾ç„¶å¯ä»¥å·¥ä½œå¾ˆå¥½ï¼Œä½†æ˜¯ä¼šå­˜åœ¨éšæ‚£ï¼ŒUIAlertControllerï¼Œä¸ä»…ç³»ç»Ÿæ¨èï¼Œä½¿ç”¨æ›´åŠ æ–¹ä¾¿ï¼Œç»“æ„ä¹Ÿæ›´åŠ åˆç†ï¼Œä½œä¸ºå¼€å‘è€…ï¼Œä½¿ç”¨æ–°çš„è­¦ç¤ºæ§ä»¶ï¼Œæˆ‘ä»¬ä½•ä¹è€Œä¸ä¸ºå‘¢ã€‚è¿™é‡Œæœ‰æ—§çš„ä»£ç çš„ä½¿ç”¨æ–¹æ³•ï¼š UIAlertViewä½¿ç”¨ï¼šhttp://my.oschina.net/u/2340880/blog/408873ã€‚ UIActionSheetä½¿ç”¨ï¼šhttp://my.oschina.net/u/2340880/blog/409907ã€‚ äºŒã€UIAlertControllerçš„ä½¿ç”¨ä»è¿™ä¸ªç±»çš„åå­—æˆ‘ä»¬å°±å¯ä»¥çœ‹å‡ºï¼Œå¯¹äºè­¦ç¤ºæ§ä»¶ï¼Œè®¾è®¡çš„æ€è·¯ä¸å†æ˜¯Viewè€Œæ˜¯Controllerã€‚é€šè¿‡presentå’Œpushè¿›è¡Œå‘¼å‡ºï¼Œè€Œä¸æ˜¯ä»¥å‰çš„showæ–¹æ³•ã€‚å¦ä¸€ä¸ªæœºåˆ¶æ”¹å˜çš„åœ°æ–¹æ˜¯ï¼Œå…¶ä¸­æŒ‰é’®çš„è§¦å‘æ–¹æ³•ä¸å†é€šè¿‡ä»£ç†å¤„ç†ï¼Œè€Œæ˜¯å°†æŒ‰é’®å°è£…æˆäº†ç±»:UIAlertActionã€‚è¯¦ç»†æ–¹æ³•åŠä½¿ç”¨å¦‚ä¸‹ï¼š 12345 UIAlertController * con = [UIAlertController alertControllerWithTitle:@&quot;æ–°çš„&quot; message:@&quot;çœ‹çœ‹æ ·å­&quot; preferredStyle:UIAlertControllerStyleAlert]; [con addAction:[UIAlertAction actionWithTitle:@&quot;ä»”ç»†çœ‹&quot; style:UIAlertActionStyleCancel handler:^(UIAlertAction * _Nonnull action) &#123; //æŒ‰é’®è§¦å‘çš„æ–¹æ³• &#125;]]; [self presentViewController:con animated:YES completion:nil]; ä¸Šé¢çš„ä»£ç ï¼Œä¼šåœ¨å±å¹•ä¸Šå‘¼å‡ºè­¦å‘Šæ¡†ï¼Œå¦‚ä¸‹ï¼š åˆå§‹åŒ–æ–¹æ³•ä¸­çš„preferrefå‚æ•°æ˜¯ä¸€ä¸ªæšä¸¾ï¼Œå†³å®šæ˜¯æç¤ºæ¡†æˆ–è€…æŠ½å±‰åˆ—è¡¨ï¼š 1234typedef NS_ENUM(NSInteger, UIAlertControllerStyle) &#123; UIAlertControllerStyleActionSheet = 0,//æŠ½å±‰ UIAlertControllerStyleAlert//è­¦å‘Šæ¡†&#125; ä¸Šé¢çš„addActionæ–¹æ³•æ·»åŠ äº†ä¸€ä¸ªå°è£…äº†æ–¹æ³•çš„æŒ‰é’®ï¼ŒUIAlertActionç±»çš„æ„é€ ååˆ†ç®€å•ï¼Œå¦‚ä¸‹ï¼š 12345678//åˆå§‹åŒ–æ–¹æ³•+ (instancetype)actionWithTitle:(nullable NSString *)title style:(UIAlertActionStyle)style handler:(void (^ __nullable)(UIAlertAction *action))handler;//è·å–æ ‡é¢˜@property (nullable, nonatomic, readonly) NSString *title;//è·å–é£æ ¼@property (nonatomic, readonly) UIAlertActionStyle style;//è®¾ç½®æ˜¯å¦æœ‰æ•ˆ@property (nonatomic, getter=isEnabled) BOOL enabled; AlertActionçš„é£æ ¼æ˜¯å¦‚ä¸‹çš„æšä¸¾ï¼š 12345typedef NS_ENUM(NSInteger, UIAlertActionStyle) &#123; UIAlertActionStyleDefault = 0,//é»˜è®¤çš„é£æ ¼ UIAlertActionStyleCancel,//å–æ¶ˆæŒ‰é’®çš„é£æ ¼ UIAlertActionStyleDestructive//è­¦å‘Šçš„é£æ ¼&#125; é£æ ¼æ•ˆæœå¦‚ä¸‹ï¼š ä¸‰ã€UIAlertControllerå…¶ä»–å±æ€§å’Œæ–¹æ³•@property (nonatomic, readonly) NSArray *actions; è·å–æ‰€æœ‰AlertAction @property (nonatomic, strong, nullable) UIAlertAction *preferredAction NS_AVAILABLE_IOS(9_0); iOS9åæ–°å¢åŠ çš„å±æ€§ï¼Œå¯ä»¥ä½¿æŸä¸ªæŒ‰é’®æ›´åŠ çªå‡ºï¼Œåªèƒ½è®¾ç½®å·²ç»åœ¨actionsæ•°ç»„ä¸­çš„AkertActionï¼Œä¼šä½¿è®¾ç½®çš„æŒ‰é’®æ›´åŠ æ˜¾çœ¼ï¼Œå¦‚ä¸‹ï¼š - (void)addTextFieldWithConfigurationHandler:(void (^ __nullable)(UITextField *textField))configurationHandler; æ·»åŠ ä¸€ä¸ªtextFieldï¼Œä»¥å‰çš„ç›¸å…³æ§ä»¶ï¼Œè™½ç„¶ä¹Ÿå¯ä»¥æ·»åŠ textFieldï¼Œä½†æ˜¯å®šåˆ¶åŒ–èƒ½åŠ›éå¸¸å·®ï¼Œè¿™ä¸ªæ–°çš„æ–¹æ³•ä¸­æœ‰ä¸€ä¸ªconfigurationHandlerä»£ç å—ï¼Œå¯ä»¥å°†textFieldçš„ç›¸å…³è®¾ç½®ä»£ç æ”¾å…¥è¿™ä¸ªä»£ç å—ä¸­ï¼Œå¹¶ä¸”è¿™ä¸ªæ–¹æ³•æ·»åŠ çš„textFieldä¸ªæ•°ä¸å†é™åˆ¶äº2ä¸ªï¼š 123456789 [con addTextFieldWithConfigurationHandler:^(UITextField * _Nonnull textField) &#123; textField.placeholder=@&quot;ç¬¬1ä¸ª&quot;; &#125;]; [con addTextFieldWithConfigurationHandler:^(UITextField * _Nonnull textField) &#123; textField.placeholder=@&quot;ç¬¬2ä¸ª&quot;; &#125;]; [con addTextFieldWithConfigurationHandler:^(UITextField * _Nonnull textField) &#123; textField.placeholder=@&quot;ç¬¬3ä¸ª&quot;; &#125;]; @property (nullable, nonatomic, readonly) NSArray *textFields; è·å–æ‰€æœ‰textFieldçš„æ•°ç»„ @property (nullable, nonatomic, copy) NSString *title; è®¾ç½®è­¦ç¤ºæ§ä»¶çš„æ ‡é¢˜ @property (nullable, nonatomic, copy) NSString *message; è®¾ç½®è­¦ç¤ºæ§ä»¶çš„ä¿¡æ¯ @property (nonatomic, readonly) UIAlertControllerStyle preferredStyle; è·å–è­¦ç¤ºæ§ä»¶çš„é£æ ¼ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"AppleWatchå¼€å‘å…¥é—¨å…­â€”â€”Glance(é¢„è§ˆ)æ‰©å±•çš„åº”ç”¨","slug":"129AppleWatchå¼€å‘å…¥é—¨å…­â€”â€”Glance(é¢„è§ˆ)æ‰©å±•çš„åº”ç”¨","date":"2015-10-15T16:00:00.000Z","updated":"2021-07-03T12:28:10.990Z","comments":true,"path":"2015/10/16/129AppleWatchå¼€å‘å…¥é—¨å…­â€”â€”Glance(é¢„è§ˆ)æ‰©å±•çš„åº”ç”¨/","link":"","permalink":"http://huishao.cc/2015/10/16/129AppleWatchå¼€å‘å…¥é—¨å…­â€”â€”Glance(é¢„è§ˆ)æ‰©å±•çš„åº”ç”¨/","excerpt":"","text":"AppleWatchå¼€å‘å…¥é—¨å…­â€”â€”Glance(é¢„è§ˆ)æ‰©å±•çš„åº”ç”¨ä¸€ã€ç®€ä»‹Glanceæ˜¯watchOSä¸­ç±»ä¼¼iOSçš„todayæ’ä»¶ä¸€æ ·çš„é¢„è§ˆæ‰©å±•ã€‚æä¾›äº†GlanceåŠŸèƒ½çš„WatchAppå¯ä»¥åœ¨æ‰‹è¡¨ä¸»é¡µä¸Šå”¤èµ·Glanceï¼Œå±•ç¤ºappç›¸å…³ä¿¡æ¯ï¼Œç„¶è€Œè¿™ä¸ªæ‰©å±•åªèƒ½ä½œä¸ºå±•ç¤ºä½œç”¨ï¼Œå¹¶ä¸èƒ½è¿›è¡Œå¤ªå¤šçš„äº¤äº’ï¼Œç•Œé¢çš„å¸ƒå±€ä¹Ÿæœ‰å¾ˆå¤§çš„é™åˆ¶ï¼Œå› æ­¤ï¼ŒGlanceçš„åº”ç”¨ä¸»è¦åœ¨äºå±•ç¤ºå¤‡å¿˜ä¿¡æ¯ç­‰ã€‚ç‰¹ç‚¹å¦‚ä¸‹ï¼š 1ã€æ‰©å±•çš„æ ·å¼å¸ƒå±€æˆ‘ä»¬å¹¶ä¸èƒ½å®Œå…¨ä¸ªæ€§åŒ–ï¼Œåªèƒ½é€šè¿‡ç³»ç»Ÿæ¨¡æ¿æ¥å¸ƒå±€ã€‚ 2ã€æ‰©å±•ä¸­ä¸èƒ½æ·»åŠ äº¤äº’åŠŸèƒ½ï¼Œåªèƒ½å±•ç¤ºä¿¡æ¯ï¼Œç‚¹å‡»ç•Œé¢é—´å”¤èµ·WatchAppã€‚ 3ã€ä¸€ä¸ªappåªèƒ½äº«æœ‰ä¸€ä¸ªGlanceç•Œé¢ï¼Œå¹¶ä¸”æ˜¯å•å±çš„ä¸å¯æ»‘åŠ¨ã€‚ äºŒã€åˆ›å»ºä¸€ä¸ªGlanceåœ¨æˆ‘ä»¬åˆ›å»ºWatchAppçš„æ—¶å€™ï¼Œå¯ä»¥å‹¾é€‰åˆ›å»ºGlanceï¼š åŒæ ·ï¼Œå¦‚æœè¿™é‡Œæ²¡æœ‰å‹¾é€‰ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨storyBoardä¸­æ‹‰å…¥ä¸€ä¸ªGlanceç•Œé¢ï¼š å¯ä»¥å‘ç°ï¼Œè¿™é‡Œé¢çš„å¸ƒå±€æ ·å¼ï¼Œæˆ‘ä»¬ä¸èƒ½åšä¿®æ”¹ï¼Œåªèƒ½ä½¿ç”¨ç³»ç»Ÿæä¾›çš„ä¸€äº›æ¨¡æ¿ï¼š æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ¨¡æ¿ï¼Œå¯ä»¥å°†å…¶ä¸­å…ƒç´ ä¸æ–‡ä»¶å…³è”ï¼Œè¿›è¡Œä»£ç çš„åŠ¨æ€è®¾ç½®ã€‚ åœ¨Xcode7ä¸­ï¼Œåœ¨Screamä¸­é€‰æ‹©Glanceé¡¹ç›®ï¼Œè¿›è¡Œè¿è¡Œï¼š æ¨¡æ‹Ÿå™¨æ•ˆæœå¦‚ä¸‹ï¼š ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"Apple Watchå¼€å‘æ‰‹è®°","slug":"Apple-Watchå¼€å‘æ‰‹è®°","permalink":"http://huishao.cc/categories/Apple-Watchå¼€å‘æ‰‹è®°/"}],"tags":[],"keywords":[{"name":"Apple Watchå¼€å‘æ‰‹è®°","slug":"Apple-Watchå¼€å‘æ‰‹è®°","permalink":"http://huishao.cc/categories/Apple-Watchå¼€å‘æ‰‹è®°/"}]},{"title":"AppleWatchå¼€å‘å…¥é—¨äº”â€”â€”èœå•æ§ä»¶çš„ä½¿ç”¨","slug":"128AppleWatchå¼€å‘å…¥é—¨äº”â€”â€”èœå•æ§ä»¶çš„ä½¿ç”¨","date":"2015-10-14T16:00:00.000Z","updated":"2021-07-03T12:26:47.796Z","comments":true,"path":"2015/10/15/128AppleWatchå¼€å‘å…¥é—¨äº”â€”â€”èœå•æ§ä»¶çš„ä½¿ç”¨/","link":"","permalink":"http://huishao.cc/2015/10/15/128AppleWatchå¼€å‘å…¥é—¨äº”â€”â€”èœå•æ§ä»¶çš„ä½¿ç”¨/","excerpt":"","text":"AppleWatchå¼€å‘å…¥é—¨äº”â€”â€”èœå•æ§ä»¶çš„ä½¿ç”¨ä¸€ã€ç®€ä»‹èœå•ä¹Ÿæ˜¯WatchOSä¸­ä¸€ä¸ªé‡è¦çš„äº¤äº’æ–¹å¼ï¼Œé™äºWatchçš„å±å¹•å°ºå¯¸ï¼Œè‹¥å°†æ‰€æœ‰ç”¨æˆ·äº¤äº’æ§ä»¶éƒ½ç´§å¯†çš„æ’åˆ—è¿›å±•ç¤ºçš„UIä¸­ï¼Œé‚£æ ·éš¾å…ä¼šä½¿ç”¨æˆ·æ“ä½œå›°éš¾ï¼Œä¹Ÿä¼šå½±å“ç•Œé¢å¸ƒå±€çš„ç®€æ´ç¾è§‚ã€‚å› æ­¤ï¼ŒWatchOSçš„èœå•æœºåˆ¶æ˜¯ä¸€å±‚è¦†ç›–åœ¨å±å¹•ä¸Šçš„äº¤äº’ç•Œé¢ï¼Œæœ‰å¦‚ä¸‹çš„ç‰¹ç‚¹ï¼š 1ã€èœå•æ˜¯å†…ç½®äºInterfaceControllerä¸­çš„ï¼Œä¸éœ€æ˜¾å¼å¤„ç†ï¼Œåªéœ€å¯¹é½èœå•é¡¹è¿›è¡Œæ·»åŠ è®¾ç½®ã€‚ 2ã€èœå•æœ€å¤šå¯ä»¥å®¹ä¹ƒå››ä¸ªé€‰é¡¹æŒ‰é’®ã€‚ 3ã€é€šè¿‡é‡æŒ‰å¯ä»¥å‘¼å‡ºå’Œéšè—èœå•ã€‚ äºŒã€åˆ›å»ºèœå•çš„ä¸¤ç§æ–¹å¼1ã€é€šè¿‡storyBoardåˆ›å»ºåœ¨storyBoardä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸€ä¸ªèœå•æ§ä»¶æ‹–å…¥åˆ°interfaceControllerä¸­ï¼š åœ¨Menuä¸­å¯ä»¥æ·»åŠ ä¸€äº›itemï¼Œæ¯ä¸ªiteméƒ½å¯ä»¥è®¾ç½®å›¾ç‰‡å’Œæ–‡å­—ï¼š å›¾ç‰‡çš„è®¾ç½®åˆ†ä¸ºï¼Œè‡ªå®šä¹‰å’Œç³»ç»Ÿä¸¤ç§ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è‡ªå·±çš„å›¾ç‰‡ä½œä¸ºèœå•çš„å›¾ç‰‡ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç³»ç»Ÿä¸ºæˆ‘ä»¬æä¾›çš„ä¸€äº›å›¾ç‰‡ï¼Œç³»ç»Ÿçš„å›¾ç‰‡å‚æ•°æ˜¯ä¸€ä¸ªæšä¸¾ï¼Œå€¼å¦‚ä¸‹ï¼š 12345678910111213141516171819public enum WKMenuItemIcon : Int &#123; case Accept // checkmark case Add // &apos;+&apos; case Block // circle w/ slash case Decline // &apos;x&apos; case Info // &apos;i&apos; case Maybe // &apos;?&apos; case More // &apos;...&apos; case Mute // speaker w/ slash case Pause // pause button case Play // play button case Repeat // looping arrows case Resume // circular arrow case Share // share icon case Shuffle // swapped arrows case Speaker // speaker icon case Trash // trash icon&#125; è¿™äº›æšä¸¾ä¸­æä¾›äº†ä¸€äº›æˆ‘ä»¬å¸¸ç”¨çš„åŠŸèƒ½å›¾æ ‡ã€‚ èœå•æŒ‰é’®çš„è§¦å‘æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ‹–æ‹½Actionçš„æ–¹å¼æ¥æ·»åŠ ï¼Œåœ¨Xcode7çš„æ¨¡æ‹Ÿå™¨ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨command+shift+2å¯ä»¥åˆ‡æ¢åˆ°é‡æŒ‰æ¨¡å¼ï¼Œæ¨¡æ‹Ÿå™¨æ•ˆæœå¦‚ä¸‹ï¼š 2ã€é€šè¿‡ä»£ç æ¥æ·»åŠ èœå•é€‰é¡¹å‰é¢æåˆ°è¿‡ï¼Œèœå•æ˜¯å†…å«äºInterfaceControllerä¸­çš„ä¸€ä¸ªæ§ä»¶ï¼Œåœ¨Interfaceä¸­æˆ‘ä»¬å¯ä»¥è°ƒç”¨ä¸€äº›æ–¹æ³•æ¥æ·»åŠ èœå•æŒ‰é’®ï¼Œç›¸å…³æ–¹æ³•å¦‚ä¸‹ï¼š 1234567 //æ·»åŠ ä¸€ä¸ªèœå•æŒ‰é’®ï¼Œå›¾ç‰‡è‡ªå®šä¹‰ public func addMenuItemWithImage(image: UIImage, title: String, action: Selector) public func addMenuItemWithImageNamed(imageName: String, title: String, action: Selector) //æ·»åŠ ä¸€ä¸ªç³»ç»Ÿå›¾ç‰‡çš„æŒ‰é’® public func addMenuItemWithItemIcon(itemIcon: WKMenuItemIcon, title: String, action: Selector) //æ¸…é™¤æ‰€æœ‰æŒ‰é’® public func clearAllMenuItems() ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617override func awakeWithContext(context: AnyObject?) &#123; super.awakeWithContext(context) self.addMenuItemWithItemIcon(WKMenuItemIcon.Share, title: &quot;åˆ†äº«&quot;, action:Selector(&quot;share&quot;)) self.addMenuItemWithItemIcon(WKMenuItemIcon.Decline, title: &quot;å–æ¶ˆ&quot;, action: Selector(&quot;cancle&quot;)) self.addMenuItemWithItemIcon(WKMenuItemIcon.Add, title: &quot;æ·»åŠ &quot;, action:Selector(&quot;add&quot;)) &#125; func share()&#123; print(&quot;åˆ†äº«&quot;) &#125; func add()&#123; print(&quot;add&quot;) &#125; func cancle()&#123; &#125; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"Apple Watchå¼€å‘æ‰‹è®°","slug":"Apple-Watchå¼€å‘æ‰‹è®°","permalink":"http://huishao.cc/categories/Apple-Watchå¼€å‘æ‰‹è®°/"}],"tags":[],"keywords":[{"name":"Apple Watchå¼€å‘æ‰‹è®°","slug":"Apple-Watchå¼€å‘æ‰‹è®°","permalink":"http://huishao.cc/categories/Apple-Watchå¼€å‘æ‰‹è®°/"}]},{"title":"AppleWatchå¼€å‘å…¥é—¨å››â€”â€”Tableè§†å›¾çš„åº”ç”¨","slug":"127AppleWatchå¼€å‘å…¥é—¨å››â€”â€”Tableè§†å›¾çš„åº”ç”¨","date":"2015-10-14T16:00:00.000Z","updated":"2021-07-03T12:25:54.796Z","comments":true,"path":"2015/10/15/127AppleWatchå¼€å‘å…¥é—¨å››â€”â€”Tableè§†å›¾çš„åº”ç”¨/","link":"","permalink":"http://huishao.cc/2015/10/15/127AppleWatchå¼€å‘å…¥é—¨å››â€”â€”Tableè§†å›¾çš„åº”ç”¨/","excerpt":"","text":"AppleWatchå¼€å‘å…¥é—¨å››â€”â€”Tableè§†å›¾çš„åº”ç”¨ä¸€ã€Watchä¸Šçš„TableWatchOSä¸­çš„TableViewå’ŒiOSä¸­çš„TableViewè¿˜æ˜¯æœ‰å¾ˆå¤§çš„åŒºåˆ«ï¼Œåœ¨å¼€å‘ä¹‹å‰ï¼Œé¦–å…ˆæˆ‘ä»¬åº”è¯¥æ˜ç™½WatchOSä¸­çš„Tableæœ‰å“ªäº›å±€é™æ€§å’Œç‰¹ç‚¹ã€‚ä¸‹é¢å‡ ç‚¹æ˜¯æˆ‘æ€»ç»“WatchOSä¸­Tableçš„ç‰¹æ®Šä¹‹å¤„ï¼š 1ã€Tableåªæœ‰è¡Œçš„æ¦‚å¿µï¼Œæ²¡æœ‰åˆ†åŒºçš„æ¦‚å¿µï¼Œæ²¡æœ‰å¤´å°¾è§†å›¾çš„æ¦‚å¿µã€‚ 2ã€å¯ä»¥é€šè¿‡åˆ›å»ºå¤šä¸ªTableï¼Œæ¥å®ç°åˆ†åŒºçš„æ•ˆæœã€‚ 3ã€å› ä¸ºWatchä¸Šæ˜¯é€šè¿‡Gruopè¿›è¡Œå¸ƒå±€é€‚åº”çš„ï¼Œæ‰€ä»¥æ²¡æœ‰è¡Œé«˜ç­‰è®¾ç½®ã€‚ 4ã€Tableæ²¡æœ‰ä»£ç†ï¼Œæ‰€æœ‰è¡Œçš„æ•°æ®éƒ½æ˜¯é‡‡ç”¨é™æ€é…ç½®çš„æ–¹å¼ï¼Œåé¢ä¼šä»‹ç»ã€‚ 5ã€ç‚¹å‡»Tableä¸­çš„è¡Œè§¦å‘çš„æ–¹æ³•ï¼Œæ˜¯é€šè¿‡é‡å†™Interfaceä¸­çš„æ–¹æ³•æ¥å®ç°çš„ã€‚ äºŒã€åˆ›å»ºä¸€ä¸ªTableåœ¨storyBoardä¸­æ‹–å…¥ä½ çš„Tableï¼Œå¦‚ä¸‹ï¼š åœ¨Tableä¸Šæ‹‰ä¸¤ä¸ªlabelï¼š æ¯ä¸€ä¸ªTableä¸­åŒ…å«ä¸€ä¸ªTableRowControllerï¼Œå®é™…ä¸Šæˆ‘ä»¬Tableä¸Šçš„æ§ä»¶éƒ½æ˜¯é€šè¿‡è¿™ä¸ªTableRowControllerè¿›è¡Œç®¡ç†çš„ï¼Œå› æ­¤å¦‚æœæˆ‘ä»¬éœ€è¦åœ¨ä»£ç ä¸­æ§åˆ¶TableRowä¸Šçš„å†…å®¹ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ä½œä¸ºTableçš„TableRowControllerï¼š å°†storyBoardä¸­TableRowControllerçš„ç±»ä¿®æ”¹ä¸ºæˆ‘ä»¬åˆ›å»ºçš„ç±»å¹¶æŒ‡å®šä¸€ä¸ªidentifierï¼š ç„¶åï¼Œæˆ‘ä»¬å°†ä¸¤ä¸ªlabelå…³è”åˆ°TableRowControllerä¸­ï¼š 123456import WatchKitclass TableRowController: NSObject &#123; @IBOutlet var numberLabel: WKInterfaceLabel! @IBOutlet var titleLabel: WKInterfaceLabel!&#125; å°†Tableå…³è”åˆ°interfaceControllerä¸­ï¼š 12345class InterfaceControllerMain: WKInterfaceController &#123; @IBOutlet var Table: WKInterfaceTable!&#125; ä¸‹é¢ï¼Œæˆ‘ä»¬å¼€å§‹åœ¨interfaceä¸­å¯¹Tableåšç›¸å…³é…ç½®ï¼Œé¦–å…ˆæˆ‘ä»¬å¯ä»¥å…ˆè§‚å¯Ÿä¸€ä¸‹WKInterfaceTableä¸­æœ‰å“ªäº›æ–¹æ³•å’Œå±æ€§ï¼š 1234567891011121314151617181920public class WKInterfaceTable : WKInterfaceObject &#123; //è®¾ç½®è¡Œçš„ç±»å‹ï¼Œæ•°ç»„ä¸­å¯¹åº”å­˜æ”¾è¡Œçš„ç±»å‹ï¼Œæ•°ç»„å…ƒç´ çš„ä¸ªæ•°ï¼Œå°±æ˜¯è¡Œæ•° /* é€šè¿‡è¿™ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºæ¯ä¸€è¡Œæ ·å¼éƒ½ä¸åŒçš„tableï¼Œè¡Œçš„ç±»å‹ å®é™…ä¸Šå°±æ˜¯æˆ‘ä»¬åˆšæ‰ç”¨åˆ°çš„TableRowControllerï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œè‡ªå®šä¹‰ */ public func setRowTypes(rowTypes: [String]) //è®¾ç½®è¡Œæ•°å’Œç±»å‹ ç”¨äºåˆ›å»ºå•ä¸€è¡Œç±»å‹çš„table public func setNumberOfRows(numberOfRows: Int, withRowType rowType: String) // repeating row name //è¿™ä¸ªgetæ–¹æ³•è·å–è¡Œæ•°ï¼Œç”¨äºæˆ‘ä»¬éå†tableä¸­çš„è¡Œï¼Œè¿›è¡Œå†…å®¹è®¾ç½® public var numberOfRows: Int &#123; get &#125; //è¿™ä¸ªæ–¹æ³•ä¼šè¿”å›æŸä¸€è¡Œï¼Œæˆ‘ä»¬å¯ä»¥è·å–åˆ°åè¿›è¡Œå†…å®¹è®¾ç½® public func rowControllerAtIndex(index: Int) -&gt; AnyObject? //æ’å…¥ä¸€è¡Œ public func insertRowsAtIndexes(rows: NSIndexSet, withRowType rowType: String) //åˆ é™¤ä¸€è¡Œ public func removeRowsAtIndexes(rows: NSIndexSet) //æ»‘åŠ¨åˆ°æŸä¸€è¡Œ public func scrollToRowAtIndex(index: Int)&#125; äº†è§£äº†ä¸Šé¢çš„æ–¹æ³•ï¼Œå¯ä»¥çœ‹å‡ºï¼ŒWatchOSçš„Tableé…ç½®éå¸¸ç®€å•æ˜“ç”¨ï¼Œä¾‹å¦‚æˆ‘ä»¬å¦‚ä¸‹é…ç½®ï¼š 1234567891011121314151617@IBOutlet var Table: WKInterfaceTable! override func awakeWithContext(context: AnyObject?) &#123; super.awakeWithContext(context) let dic:Dictionary&lt;String,String&gt; = [&quot;ä¸­å›½å»ºè®¾é“¶è¡Œ&quot;:&quot;ï¿¥1000&quot;,&quot;ä¸­å›½å†œä¸šé“¶è¡Œ&quot;:&quot;ï¿¥5000&quot;,&quot;ä¸­å›½é“¶è¡Œ&quot;:&quot;20000&quot;,&quot;æ‹›å•†é“¶è¡Œ&quot;:&quot;ï¿¥401&quot;,&quot;ä¸­å›½é‚®æ”¿å‚¨è“„&quot;:&quot;1100&quot;] //è®¾ç½®è¡Œæ•°ä¸ç±»å‹ Table.setNumberOfRows(dic.count, withRowType: &quot;TableRowController&quot;) //éå†è¿›è¡Œè®¾ç½® let titleArray:Array&lt;String&gt; = Array(dic.keys) for var i=0 ; i &lt; dic.count ; i++ &#123; let row:TableRowController = Table.rowControllerAtIndex(i) as! TableRowController row.titleLabel.setText(titleArray[i]) row.numberLabel.setText(dic[titleArray[i]]) row.numberLabel.setTextColor(UIColor.grayColor()) &#125; // Configure interface objects here. &#125; è¿™æ ·ä¸€ä¸ªå±•ç¤ºé“¶è¡Œå¡ä½™é¢çš„ç•Œé¢æˆ‘ä»¬å°±åˆ›å»ºå®Œæˆäº†ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š ä¸‰ã€å…³äºTableçš„ç‚¹å‡»äº‹ä»¶ä¸Šé¢æˆ‘ä»¬æåˆ°ï¼ŒTableæ²¡æœ‰æ‰€è°“ä»£ç†æ–¹æ³•ï¼Œç‚¹å‡»rowçš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¹Ÿæ˜¯é€šè¿‡ä¸¤ç§æ–¹å¼è¿›è¡Œé€»è¾‘è·³è½¬çš„ï¼Œä¸€ç§æ˜¯åœ¨storyBoardä¸­ï¼Œæˆ‘ä»¬é€šè¿‡æ‹‰çº¿è·³è½¬ï¼Œè¿™æ—¶å¦‚éœ€ä¼ å€¼ï¼Œæˆ‘ä»¬éœ€åœ¨interfaceä¸­å®ç°å¦‚ä¸‹æ–¹æ³•ï¼š 1 public func contextForSegueWithIdentifier(segueIdentifier: String, inTable table: WKInterfaceTable, rowIndex: Int) -&gt; AnyObject? å¦ä¸€ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥é‡å†™å®ç°InterfaceControllerä¸­çš„å¦‚ä¸‹æ–¹æ³•ï¼Œæ¥å¤„ç†Tableçš„ç‚¹å‡»äº‹ä»¶ï¼š 1public func table(table: WKInterfaceTable, didSelectRowAtIndex rowIndex: Int) æ— è®ºå“ªç§æ–¹å¼ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥é€šè¿‡å‚æ•°tableå’ŒrowIndexæ¥ç¡®è®¤ç‚¹å‡»çš„å…·ä½“æ˜¯é‚£ä¸ªtableå’Œå“ªä¸€è¡Œï¼Œè¿›è¡Œä¼ å€¼å’Œå¤„ç†æˆ‘ä»¬çš„é€»è¾‘ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"Apple Watchå¼€å‘æ‰‹è®°","slug":"Apple-Watchå¼€å‘æ‰‹è®°","permalink":"http://huishao.cc/categories/Apple-Watchå¼€å‘æ‰‹è®°/"}],"tags":[],"keywords":[{"name":"Apple Watchå¼€å‘æ‰‹è®°","slug":"Apple-Watchå¼€å‘æ‰‹è®°","permalink":"http://huishao.cc/categories/Apple-Watchå¼€å‘æ‰‹è®°/"}]},{"title":"AppleWatchå¼€å‘å…¥é—¨ä¸‰â€”â€”ä»£ç äº¤äº’ä¸æ§åˆ¶å™¨ç”Ÿå‘½å‘¨æœŸ","slug":"126AppleWatchå¼€å‘å…¥é—¨ä¸‰â€”â€”ä»£ç äº¤äº’ä¸æ§åˆ¶å™¨ç”Ÿå‘½å‘¨æœŸ","date":"2015-10-13T16:00:00.000Z","updated":"2021-07-03T12:25:13.911Z","comments":true,"path":"2015/10/14/126AppleWatchå¼€å‘å…¥é—¨ä¸‰â€”â€”ä»£ç äº¤äº’ä¸æ§åˆ¶å™¨ç”Ÿå‘½å‘¨æœŸ/","link":"","permalink":"http://huishao.cc/2015/10/14/126AppleWatchå¼€å‘å…¥é—¨ä¸‰â€”â€”ä»£ç äº¤äº’ä¸æ§åˆ¶å™¨ç”Ÿå‘½å‘¨æœŸ/","excerpt":"","text":"AppleWatchå¼€å‘å…¥é—¨ä¸‰â€”â€”ä»£ç äº¤äº’ä¸æ§åˆ¶å™¨ç”Ÿå‘½å‘¨æœŸä¸€ã€å¼•è¨€åœ¨å‰ä¸¤ç¯‡åšå®¢ä¸­ï¼Œè®¨è®ºäº†å…³äºwatchå¼€å‘ä¸­æ¡†æ¶ä¸ç•Œé¢å¸ƒå±€ç›¸å…³ï¼Œç„¶è€Œä¸»è¦çš„é€»è¾‘ï¼Œç»ˆç©¶è¿˜æ˜¯è¦é€šè¿‡ä»£ç æ¥å®ç°çš„ï¼Œåœ¨æˆ‘ä»¬åˆ›å»ºäº†é¡¹ç›®ä¹‹åï¼Œå°±ä¼šç”ŸæˆInterfaceControllerè¿™ä¸ªæ–‡ä»¶ï¼Œå®ƒå°±æ˜¯æˆ‘ä»¬storyBoardä¸­çš„å…¥å£è§†å›¾æ§åˆ¶å™¨ã€‚ äºŒã€ä»£ç äº¤äº’ä¸æ§åˆ¶å™¨å£°æ˜å‘¨æœŸstoryBoardä¸­çš„æ§ä»¶æˆ‘ä»¬å¯ä»¥é€šè¿‡æ‹–æ‹½çš„æ–¹å¼å…³è”åˆ°æ–‡ä»¶ä¸­ï¼ŒActionå’ŒOutletä¸¤ç§å…³è”æ–¹å¼åŸºæœ¬å¯ä»¥è¾¾åˆ°æˆ‘ä»¬ä¿®æ”¹æ§ä»¶å’Œå¤„ç†ä¸šåŠ¡é€»è¾‘çš„éœ€æ±‚ã€‚ WKInterfaceControllerç±»ä¼¼äºiOSä¸­çš„ViewControllerï¼Œæ˜¯watchä¸­ä¸»è¦ç”¨äºå±•ç¤ºç•Œé¢çš„controllerï¼Œæˆ‘ä»¬çš„æ§ä»¶ä¹Ÿéƒ½æ˜¯åŸºäºè¿™ä¸ªå®¹å™¨ä¸­æ˜¾ç¤ºã€‚åœ¨æ¨¡æ¿ä¸­ï¼Œç³»ç»Ÿä¸ºæˆ‘ä»¬æä¾›äº†ä¸‰ä¸ªå‡½æ•°ï¼Œè¿™ä¸‰ä¸ªå‡½æ•°ä½“ç°äº†watchä¸€ä¸ªç•Œé¢çš„å£°æ˜å‘¨æœŸï¼Œå¦‚ä¸‹ï¼š 123456789101112131415 //è¿™ä¸ªå‡½æ•°åœ¨åˆå§‹åŒ–ç•Œé¢æ—¶ä¼šè§¦å‘ï¼Œé€šè¿‡contextå¯ä»¥å®ç°ç•Œé¢çš„ä¼ å€¼ override func awakeWithContext(context: AnyObject?) &#123; super.awakeWithContext(context) &#125; //è¿™ä¸ªå‡½æ•°åœ¨ç•Œé¢å³å°†å±•ç°æ—¶è§¦å‘ ç±»ä¼¼äºiOSä¸­çš„ViewWillApear override func willActivate() &#123; // This method is called when watch view controller is about to be visible to user super.willActivate() &#125; //è¿™ä¸ªå‡½æ•°åœ¨ç•Œé¢æ¶ˆå¤±åè§¦å‘ï¼Œç±»ä¼¼äºiOSä¸­çš„ViewDidDisAppear override func didDeactivate() &#123; // This method is called when watch view controller is no longer visible super.didDeactivate() &#125; ä¸‰ã€watchä¸­çš„ç•Œé¢è·³è½¬ä¸ä¼ å€¼ä¸iOSç±»ä¼¼ï¼ŒwatchOSçš„ç•Œé¢è·³è½¬ä¹Ÿæœ‰ä¸¤ç§æ–¹å¼ï¼šmodelå’Œpushã€‚åŒæ ·ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡storyBoardæˆ–è€…ä»£ç æ¥è¿›è¡Œè·³è½¬ã€‚ 1ã€é€šè¿‡ä»£ç è·³è½¬ä¸ä¼ å€¼æˆ‘ä»¬åˆ›å»ºä¸¤ä¸ªInterfaceControllerï¼Œç•Œé¢å¦‚ä¸‹ï¼š é€šè¿‡ä»£ç è·³è½¬ï¼Œæˆ‘ä»¬éœ€è¦ç»™ç¬¬äºŒä¸ªcontrollerè®¾ç½®ä¸€ä¸ªidæ ‡è¯†ç¬¦ï¼š åœ¨æŒ‰é’®è§¦å‘çš„æ–¹æ³•ä¸­ï¼Œå¦‚ä¸‹è·³è½¬ï¼š 12345 @IBAction func `switch`(value: Bool) &#123; //è¿™é‡Œçš„contextæ˜¯ä¼ å€¼çš„ä¸Šä¸‹æ–‡ //åœ¨awakeWithContextæ–¹æ³•ä¸­ä¼šå°†è¿™ä¸ªå€¼å–åˆ° pushControllerWithName(&quot;InterfaceControllerTwo&quot;, context: &quot;æˆ‘æ˜¯ä¼ çš„å€¼&quot;) &#125; 2ã€åœ¨storyBoardä¸­è®¾ç½®è·³è½¬å…³ç³»æˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥åœ¨storyBoardä¸­è®¾ç½®ç•Œé¢çš„è·³è½¬ï¼ŒæŒ‰ä½controlï¼Œæ‹–æ‹½æŒ‰é’®åˆ°è¦è·³è½¬çš„controllerï¼Œä¼šå‡ºç°pushå’Œmodelèœå•ï¼Œé€‰æ‹©åï¼Œå½“æˆ‘ä»¬è§¦å‘æŒ‰é’®æ–¹æ³•æ—¶ï¼Œå°±ä¼šè·³è½¬ï¼š é€šè¿‡è¿™ç§æ–¹å¼è¿›è¡Œçš„è·³è½¬ï¼Œåœ¨æ‰§è¡Œè·³è½¬ä¹‹å‰ï¼Œä¼šæ‰§è¡Œå¦‚ä¸‹è¿™ä¸ªå‡½æ•°ï¼š 123override func contextForSegueWithIdentifier(segueIdentifier: String) -&gt; AnyObject? &#123; return &quot;æˆ‘æ˜¯å€¼&quot; &#125; è¿™ä¸ªè®¾ç½®çš„è¿”å›å€¼å°±æ˜¯contextä¸Šä¸‹æ–‡ä¼ é€’çš„å€¼ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"Apple Watchå¼€å‘æ‰‹è®°","slug":"Apple-Watchå¼€å‘æ‰‹è®°","permalink":"http://huishao.cc/categories/Apple-Watchå¼€å‘æ‰‹è®°/"}],"tags":[],"keywords":[{"name":"Apple Watchå¼€å‘æ‰‹è®°","slug":"Apple-Watchå¼€å‘æ‰‹è®°","permalink":"http://huishao.cc/categories/Apple-Watchå¼€å‘æ‰‹è®°/"}]},{"title":"AppleWatchå¼€å‘å…¥é—¨äºŒâ€”â€”ç•Œé¢å¸ƒå±€","slug":"125AppleWatchå¼€å‘å…¥é—¨äºŒâ€”â€”ç•Œé¢å¸ƒå±€","date":"2015-10-13T16:00:00.000Z","updated":"2021-07-03T12:24:34.928Z","comments":true,"path":"2015/10/14/125AppleWatchå¼€å‘å…¥é—¨äºŒâ€”â€”ç•Œé¢å¸ƒå±€/","link":"","permalink":"http://huishao.cc/2015/10/14/125AppleWatchå¼€å‘å…¥é—¨äºŒâ€”â€”ç•Œé¢å¸ƒå±€/","excerpt":"","text":"AppleWatchå¼€å‘å…¥é—¨äºŒâ€”â€”ç•Œé¢å¸ƒå±€ä¸€ã€ç®€ä»‹åœ¨iphoneå¼€å‘ä¸­ï¼Œæœ€åŸºæœ¬çš„å¸ƒå±€æ–¹å¼æ˜¯é€šè¿‡frameï¼Œå°†æ§ä»¶çš„ä½ç½®å’Œå¤§å°å›ºå®šåœ¨å±å¹•ä¸Šï¼Œåæ¥ï¼Œç”±äºæ‰‹æœºå±å¹•çš„å°ºå¯¸æœ‰äº†ç•¥å¾®å˜åŒ–ï¼Œæœ‰äº†autoresizingçš„å¸ƒå±€æ¡†æ¶ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®å­è§†å›¾éšçˆ¶è§†å›¾çš„æ”¹å˜åšä¸€äº›ç›¸åº”çš„å˜åŒ–ï¼Œå†åæ¥ï¼Œiphoneçš„å°ºå¯¸ä¸åˆ†è¾¨ç‡ä¹Ÿè¶Šæ¥è¶Šå¤šï¼Œé€‚é…å„ä¸ªå±å¹•ä¹Ÿæˆä¸ºäº†iOSå¼€å‘è€…é‡åˆ°çš„æ–°çš„é—®é¢˜ï¼Œå¹¸è¿çš„æ˜¯ï¼Œautolayoutæœºåˆ¶çš„å‡ºç°ï¼Œå¤§å¤§å‡å°äº†å¼€å‘è€…åœ¨é€‚é…æ–¹é¢çš„æˆæœ¬ã€‚ä»¥ä¸Šæåˆ°çš„ä¸¤ç§å¸ƒå±€æ–¹å¼ï¼Œåœ¨ä»¥å‰åšå®¢ä¸­æœ‰è®¨è®ºï¼š ä½¿ç”¨autoresizingè¿›è¡ŒåŠ¨æ€å¸ƒå±€ï¼šhttp://my.oschina.net/u/2340880/blog/423357 ä½¿ç”¨autolayoutè¿›è¡ŒåŠ¨æ€å¸ƒå±€ï¼šhttp://my.oschina.net/u/2340880/blog/423500 åœ¨watchçš„å¸ƒå±€æ–¹å¼ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æŠ›å¼ƒiphoneé‡Œçš„æ€è·¯ï¼Œé‡æ–°æ¥å—ä¸€å¥—æ–°çš„å¸ƒå±€æ¡†æ¶ã€‚ é¦–å…ˆï¼Œwatchçš„å±å¹•ä¸å¤§ï¼Œç›®å‰åªæœ‰38mmå’Œ42mmä¸¤ä¸ªå°ºå¯¸ï¼Œæˆ‘ä»¬ä¸å¯èƒ½åœ¨è¿™ä¸ªæœ‰é™çš„ç©ºé—´é‡Œåšéå¸¸å¤æ‚çš„ç•Œé¢æ•ˆæœï¼Œå› æ­¤ï¼Œåœ¨ç•Œé¢å¼€å‘ä¸­ï¼Œåº”è¯¥éµå¾ªä¾¿äºä½¿ç”¨å’Œä¸€ç›®äº†ç„¶çš„åŸåˆ™ã€‚watchä¸Šçš„å¸ƒå±€æ–¹å¼é‡‡ç”¨çš„æ˜¯ä¸€ç§å¹³é¢å †æ”¾çš„æ–¹å¼ï¼Œä¸å†æœ‰frameï¼Œä¹Ÿä¸å†æœ‰çº¦æŸï¼Œæ§ä»¶çš„å¸ƒå±€æ–¹å¼åªæ˜¯ä¸€ä¸ªæŒ¨ç€ä¸€ä¸ªçš„å¹³é¢å †æ”¾ï¼Œä¹Ÿä¸å¯é‡å ã€‚ä½†åœ¨watchä¸­ï¼Œæä¾›äº†groupè¿™æ ·ä¸€ç§å¸ƒå±€æ–¹å¼ï¼Œå¯ä»¥è®©æˆ‘ä»¬åœ¨å¸ƒå±€ä¸­ä½“ç°è‡ªç”±ä¸ä¸ªæ€§çš„æ–¹é¢ã€‚ äºŒã€æœ€åŸºç¡€çš„å †æ”¾å¸ƒå±€æˆ‘ä»¬åœ¨ä¸ä½¿ç”¨groupçš„æ—¶å€™ï¼Œwatchçš„å¸ƒå±€é‡‡ç”¨çš„æ˜¯æœ€åŸºç¡€çš„å †æ”¾æ–¹å¼ï¼Œä»ä¸Šåˆ°ä¸‹ä¾æ¬¡æ’å¼€ï¼Œä¾‹å¦‚ï¼Œæˆ‘ä»¬æ·»åŠ å››ä¸ªlabelï¼Œæ•ˆæœå¦‚ä¸‹ï¼š é€šè¿‡æ”¹å˜labelçš„æ·»åŠ é¡ºåºï¼Œå¯ä»¥æ”¹å˜å…¶ä¸Šä¸‹ä½ç½®ï¼š è¿™ç§æ–¹å¼çš„å¸ƒå±€é«˜åº¦å¹¶æ²¡æœ‰é™åˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥ä¸€ç›´å¾€ä¸‹æ’åˆ—ï¼Œåœ¨watchä¸Šï¼Œä¼šå‡ºç°æ»‘åŠ¨çš„æ•ˆæœï¼š ä¸‰ã€ä½¿ç”¨Groupè¿›è¡Œå¤æ‚çš„ç•Œé¢å¸ƒå±€é€šè¿‡ä¸Šé¢çš„å¸ƒå±€æ–¹å¼ï¼Œæˆ‘ä»¬åªèƒ½è¿›è¡Œçºµå‘çš„æ’åˆ—å¸ƒå±€ï¼Œè¿™å¹¶ä¸èƒ½è¾¾åˆ°æˆ‘ä»¬çš„éœ€æ±‚ï¼ŒWatchKitä¸­æä¾›é‚£ä¸€å¥—å¸ƒå±€çš„æ¨¡å‹ï¼šGroupã€‚ å¯ä»¥è¿™æ ·ç†è§£ï¼Œgroupå°±æ˜¯å°†å±å¹•åˆ†æˆäº†å‡ å„åˆ†åŒºï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®å„ä¸ªåˆ†åŒºçš„æ’åˆ—æ–¹å¼ï¼Œä¾‹å¦‚æ°´å¹³æˆ–è€…å‚ç›´ï¼Œé€šè¿‡è¿™æ ·çš„æ€è·¯ï¼Œå®Œæˆå¤æ‚çš„watchç•Œé¢å¸ƒå±€ï¼Œä¾‹å¦‚ä¸‹é¢çš„æ•ˆæœï¼š è¿™æ ·æ•ˆæœçš„ä¸€ä¸ªç•Œé¢ï¼Œå°±æ˜¯å°†åœ¨å±å¹•ä¸­æ·»åŠ äº†ä¸‰ä¸ªGroupï¼Œæœ€ä¸Šé¢çš„Gorupè®¾ç½®ä¸ºæ°´å¹³æ’åˆ—æ¨¡å¼ï¼Œåœ¨å…¶ä¸­æ·»åŠ äº†ä¸¤ä¸ªæŒ‰é’®å’Œä¸€ä¸ªåˆ†å‰²çº¿ï¼Œä¸­é—´ä¸€ä¸ªGroupæ˜¯å‚ç›´æ’åˆ—æ¨¡å¼ï¼Œæ”¾å…¥äº†ä¸€ä¸ªé€‰æ‹©å™¨å’Œä¸€ä¸ªæŒ‰é’®ï¼Œæœ€ä¸‹é¢ä¸€ä¸ªGroupä¹Ÿæ˜¯æ°´å¹³æ’åˆ—æ¨¡å¼ï¼Œæ”¾å…¥äº†ä¸€ä¸ªæŒ‰é’®å’Œä¸€ä¸ªæ—¶é—´æ ã€‚ æ‰©å±•ï¼šæ‰€è°“GroupGroupåœ¨ç•Œé¢å¸ƒå±€ä¸Šï¼Œä¸ä»…å¯ä»¥èµ·åˆ°åˆ†åŒºå±å¹•çš„ä½œç”¨ï¼Œå…¶è¿˜å¯ä»¥è®¾ç½®ä¸€äº›å±æ€§æ¥ä½¿å¸ƒå±€æ›´åŠ æ¼‚äº®ã€‚åœ¨storyBoardå³ä¾§çš„è®¾ç½®èœå•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹è¿™äº›å±æ€§è¿›è¡Œæ“ä½œï¼š Layoutï¼šè®¾ç½®å¸ƒå±€æ¨¡å¼ï¼Œåˆ†ä¸ºæ°´å¹³å¸ƒå±€å’Œå‚ç›´å¸ƒå±€ä¸¤ç§ insertï¼šå¯ä»¥è®¾ç½®å†…å®¹åŒºåŸŸåç§»é‡ï¼Œé€šè¿‡è¿™ä¸ªå±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿å…¶ä¸­å¡«å……çš„æ§ä»¶å››å‘¨ç•™ç™½ Spacingï¼šå…¶ä¸­å¡«å……çš„æ§ä»¶çš„é—´è· BackGroundï¼šè®¾ç½®Groupçš„èƒŒæ™¯å›¾æ¡ˆ Modeï¼šè®¾ç½®èƒŒæ™¯å›¾æ¡ˆçš„å¡«å……æ–¹å¼ Animateï¼šå‡ºç°æ—¶å¸¦åŠ¨ç”» colorï¼šè®¾ç½®Groupçš„èƒŒæ™¯é¢œè‰² Radiusï¼šè®¾ç½®Groupçš„åœ†è§’åº¦ å››ã€å¸ƒå±€ä¸­æ§ä»¶çš„ä½ç½®å’Œå°ºå¯¸è®¾ç½®åœ¨iphoneä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨frameæˆ–è€…çº¦æŸæ¥æ§åˆ¶æ§ä»¶çš„ä½ç½®å’Œå°ºå¯¸ï¼Œåœ¨watchä¸­åˆ™ç®€å•å¾ˆå¤šï¼Œå°ºå¯¸å’Œä½ç½®éƒ½æ˜¯å›ºå®šçš„æ¨¡å¼ï¼Œæˆ‘ä»¬åªéœ€è¦åšä¸€äº›è®¾ç½®å³å¯ã€‚ 1ã€æ§ä»¶å°ºå¯¸çš„æ§åˆ¶å¯¹äºæ§ä»¶çš„å°ºå¯¸ï¼Œæœ‰ä¸‰ç§æ¨¡å¼ï¼Œæ§ä»¶çš„widthå’ŒHeightéƒ½æ˜¯é€šè¿‡è¿™ä¸‰ä¸ªæ¨¡å¼è®¾ç½®çš„ï¼š Relative to Containerï¼šè‡ªèº«çš„å°ºå¯¸æ˜¯æŒ‰ç…§å®¹å™¨çš„å°ºå¯¸æ¯”ä¾‹è®¾ç½®çš„ã€‚ä¾‹å¦‚è®¾ç½®ä¸º0.5çš„è¯ï¼Œå½“å‰æ§ä»¶çš„å°ºå¯¸å°±æ˜¯å®¹çº³å…¶Groupçš„ä¸€åŠã€‚ Size To Fit Content:è‡ªèº«çš„å°ºå¯¸ä¸è‡ªèº«å†…å®¹ç›¸å…³ï¼Œä¾‹å¦‚ï¼Œlabelä¸­å­—æ•°çš„å¤šå°‘å†³å®šäº†labelçš„å°ºå¯¸ã€‚ Fixedï¼šæ‰‹åŠ¨è®¾ç½®ä¸€ä¸ªå›ºå®šçš„å€¼ã€‚ 2ã€æ§ä»¶ä½ç½®çš„æ§åˆ¶å› ä¸ºwatchçš„ç•Œé¢ååˆ†ç®€æ´ï¼Œå¯¹äºæ§ä»¶çš„ä½ç½®è®¾ç½®ï¼Œæ˜¯é€šè¿‡æ°´å¹³å’Œå‚ç›´ä¸¤ä¸ªç»´åº¦æ¥è®¾ç½®çš„ï¼Œé€šè¿‡è®¾ç½®æ¯ä¸ªç»´åº¦çš„å±æ€§æ¥æ§åˆ¶å…¶åœ¨å®¹çº³å®ƒçš„Groupä¸­çš„ä½ç½®ï¼š Horizontalï¼šleftï¼ˆå·¦ï¼‰ï¼Œcenterï¼ˆä¸­å¿ƒï¼‰ï¼Œrightï¼ˆå³ï¼‰ Verticalï¼štopï¼ˆä¸Šï¼‰ï¼Œcenterï¼ˆä¸­å¿ƒï¼‰ï¼Œbottomï¼ˆä¸‹ï¼‰ ä¸€ç‚¹æ³¨æ„:å…³äºå›¾ç‰‡ç´ æï¼Œä½ å¯ä»¥å‘ç°ï¼Œåœ¨Extensionå’ŒAppæ–‡ä»¶å¤¹ä¸­å„æœ‰ä¸€ä¸ªAssets.xcasssetsç»„ï¼Œåªæœ‰å°†ç´ ææ”¾å…¥APPæ–‡ä»¶å¤¹ä¸‹çš„è¿™ä¸ªç»„watchæ‰èƒ½ä½¿ç”¨ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"Apple Watchå¼€å‘æ‰‹è®°","slug":"Apple-Watchå¼€å‘æ‰‹è®°","permalink":"http://huishao.cc/categories/Apple-Watchå¼€å‘æ‰‹è®°/"}],"tags":[],"keywords":[{"name":"Apple Watchå¼€å‘æ‰‹è®°","slug":"Apple-Watchå¼€å‘æ‰‹è®°","permalink":"http://huishao.cc/categories/Apple-Watchå¼€å‘æ‰‹è®°/"}]},{"title":"AppleWatchå¼€å‘å…¥é—¨ä¸€â€”â€”Watchçš„å¼€å‘æ€è·¯ä¸åº”ç”¨æ¡†æ¶","slug":"124AppleWatchå¼€å‘å…¥é—¨ä¸€â€”â€”Watchçš„å¼€å‘æ€è·¯ä¸åº”ç”¨æ¡†æ¶","date":"2015-10-12T16:00:00.000Z","updated":"2021-07-03T12:23:42.516Z","comments":true,"path":"2015/10/13/124AppleWatchå¼€å‘å…¥é—¨ä¸€â€”â€”Watchçš„å¼€å‘æ€è·¯ä¸åº”ç”¨æ¡†æ¶/","link":"","permalink":"http://huishao.cc/2015/10/13/124AppleWatchå¼€å‘å…¥é—¨ä¸€â€”â€”Watchçš„å¼€å‘æ€è·¯ä¸åº”ç”¨æ¡†æ¶/","excerpt":"","text":"AppleWatchå¼€å‘å…¥é—¨ä¸€â€”â€”Watchçš„å¼€å‘æ€è·¯ä¸åº”ç”¨æ¡†æ¶ä¸€ã€å¼•è¨€Apple Watchæ— ç–‘æ˜¯appleåœ¨æ™ºèƒ½æ‰‹è¡¨é¢†åŸŸçš„ä¸€æ¬¡é©å‘½ï¼Œå¦‚ä½•åœ¨Watchä¸Šå¼€å‘å‡ºå®ç”¨ä¸”å…·æœ‰ç¾æ„Ÿçš„åº”ç”¨ï¼Œæ˜¯iOSå¼€å‘è€…ä»¬å¼€å§‹æ€è€ƒçš„ä¸€ä¸ªé—®é¢˜ï¼Œç”±äºwatchçš„éšèº«æ€§å’Œå¿«æ·æ€§ï¼Œåœ¨æŸäº›æ–¹é¢ï¼Œå®ƒæœ‰æ¯”iphoneæ›´åŠ å¤§çš„ä¼˜åŠ¿ï¼Œè¦æŠ“ä½watchçš„è¿™äº›ç‰¹ç‚¹ï¼Œå¼€å‘å‡ºæ·‹æ¼“å°½è‡´çš„åº”ç”¨ï¼Œå°±éœ€è¦æ”¹å˜ä¸€äº›åœ¨iphoneå¼€å‘çš„æ€è·¯ï¼Œæ­£å¦‚ä¸€å¥è¯ï¼šåªæœ‰å¿˜æ‰ç»éªŒï¼Œæ‰ä¼šæœ‰æ„æƒ³ä¸åˆ°çš„çªç ´ã€‚ è¿™ä¸€ç³»åˆ—åšå®¢ï¼Œé¦–å…ˆæ˜¯æ€»ç»“æˆ‘åœ¨å…¬å¸watché¡¹ç›®å¼€å‘ä¸­çš„ä¸€äº›ç»éªŒï¼Œå…¶æ¬¡ï¼Œè¿˜ä¼šåŠ å…¥ä¸€äº›æˆ‘çš„ç†è§£å’Œæƒ³æ³•ï¼Œå¦‚æœ‰é”™è¯¯ï¼Œæ¬¢è¿æŒ‡æ­£ï¼Œå¦‚æœå¯¹ä½ æœ‰å¸®åŠ©ï¼Œä¹Ÿæ¬¢è¿æ’’èŠ±ï¼ŒğŸ˜„ã€‚ äºŒã€å¼€å‘å‰æˆ‘ä»¬éœ€è¦å‡†å¤‡ä»€ä¹ˆå¦‚æœä½ æ²¡æœ‰å¼€å‘è¿‡iphoneï¼Œç›´æ¥æ¥åšwatchï¼Œæˆ‘å»ºè®®ä½ ä¸è¦è¿™ä¹ˆåšï¼Œä¸æ˜¯ä¸å¯ä»¥ï¼Œè€Œæ˜¯ç›®å‰æ‰€æœ‰çš„ç¬¬ä¸‰æ–¹åº”ç”¨éƒ½å¿…é¡»åŸºäºiphoneçš„æ‰©å±•ï¼ŒåŸç”Ÿçš„watchåº”ç”¨ï¼Œè‹¹æœç›®å‰è¿˜æ²¡æœ‰å¼€æ”¾ç»™å¼€å‘è€…ï¼Œå› æ­¤å®é™…ä¸Šï¼Œæˆ‘ä»¬åœ¨watchä¸Šå¯ä»¥åšçš„äº‹æƒ…ååˆ†æœ‰é™ï¼Œæˆ–è®¸åç»­appleä¼šå¼€æ”¾æ›´å¤šæ¥å£ï¼Œä½†æ˜¯ç›®å‰ï¼Œæˆ‘ä»¬å¿…é¡»æ”¾å¼ƒiphoneå¼€å‘çš„æ€è·¯ï¼Œä»æ–°å¼€å§‹ã€‚ 1ã€watchåº”ç”¨çš„æ¶æ„å¦‚ä¸Šæ‰€è¯´ï¼Œå®Œå…¨è„±ç¦»iphoneçš„åŸç”Ÿwatchåº”ç”¨ï¼Œæˆ‘ä»¬ç›®å‰è¿˜ä¸èƒ½å¼€å‘ï¼Œæ‰€æœ‰ç¬¬ä¸‰æ–¹çš„watchåº”ç”¨å¿…é¡»åŸºäºä¸€ä¸ªiphoneçš„host appã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ªwatchåº”ç”¨æ¥è§‚å¯Ÿä¸€ä¸‹ï¼Œé¦–å…ˆï¼Œåœ¨Xcode6.3åè™½ç„¶æ”¯æŒwatchçš„å¼€å‘ï¼Œä½†watchæ¨¡æ‹Ÿå™¨å¹¶ä¸ååˆ†å¥½ç”¨ï¼ŒXcode7è¿›è¡Œäº†ä¼˜åŒ–ï¼Œé€šè¿‡æ¨¡æ‹Ÿå™¨ï¼ŒåŸºæœ¬å¯ä»¥å®Œæˆæˆ‘ä»¬çš„å¼€å‘ã€‚ç”¨Xcodeæ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œä¹‹åæˆ‘ä»¬åœ¨Xcodeèœå•ä¸­åˆ›å»ºä¸€ä¸ªtargetï¼š é€‰æ‹©apple Watchä¸­çš„é¡¹ç›®ï¼š åœ¨å¦‚ä¸‹çš„è®¾ç½®ä¸­ï¼Œæˆ‘ä»¬å…ˆå°†include Notificationå’ŒInclude Glanceéƒ½å‹¾é€‰ä¸Šï¼Œä»–ä»¬ä¹Ÿæ˜¯watchåº”ç”¨çš„ä¸€ç§è¡¨ç°æ–¹å¼ï¼Œåé¢æˆ‘ä»¬å†è¯´ï¼š ä¹‹åå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬çš„é¡¹ç›®ä¸­ä¼šå¤šäº†è¿™æ ·çš„å‡ ä¸ªæ–‡ä»¶å¤¹ï¼š æˆ‘ä»¬åªéœ€è¦å…³æ³¨ä¸‹ç»“å°¾ä¸ºExtensionå’ŒAppçš„è¿™ä¸¤ä¸ªï¼Œä»ç›®å½•ç»“æ„æˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼ŒAppæ–‡ä»¶å¤¹ä¸­æœ‰Storyboardè¿™ä¸ªæ–‡ä»¶ï¼ŒExtensionæ–‡ä»¶å¤¹ä¸­ä¸»è¦æ˜¯ä¸€äº›ä»£ç æ–‡ä»¶ï¼Œè¿™ä¹Ÿæ­£æ˜¯æˆ‘ä»¬éœ€è¦äº†è§£çš„watch appçš„æœºåˆ¶ï¼Œå®é™…è¿è¡Œä¸æˆ‘ä»¬æ‰‹è¡¨ä¸Šçš„æ˜¯Appæ–‡ä»¶å¤¹ä¸­çš„ç•Œé¢ï¼Œè€Œé€»è¾‘çš„ä»£ç å®é™…ä¸Šæ˜¯è¿è¡Œåœ¨æˆ‘ä»¬çš„æ‰‹æœºä¸­çš„ï¼Œä½œä¸ºiphone Appçš„æ‰©å±•è€Œå­˜åœ¨ï¼Œé€šè¿‡æ‰‹æœºä¸æ‰‹è¡¨çš„äº¤äº’ï¼Œæ¥è¾¾åˆ°watchä¸Šçš„ä¸€äº›æ“ä½œã€‚ ç”±æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£ï¼Œç›®å‰çš„ç¬¬ä¸‰æ–¹watchåº”ç”¨ï¼Œwatchç±»ä¼¼äºä¸€ä¸ªUIå®¹å™¨ï¼Œé€šè¿‡ä¸iphoneçš„äº¤äº’æ¥è¾¾åˆ°ä¸€äº›é€»è¾‘å’Œæ•ˆæœã€‚ 2ã€ä¸‰ç§watchåº”ç”¨æ–¹å¼çš„ç”¨é€”åœ¨æˆ‘ä»¬åˆ›å»ºwatchçš„æ‰©å±•æ—¶ï¼Œæˆ‘ä»¬å‹¾é€‰äº†ä¸¤ä¸ªSceneï¼Œä»å­—é¢æˆ‘ä»¬ä¹Ÿå¯ä»¥ç†è§£çš„å·®ä¸å¤šï¼Œè¿™é‡ŒåŠ ä¸Šæˆ‘çš„ç†è§£ï¼Œä¸æ˜¯å®˜æ–¹çš„è§£é‡Šï¼š watch appï¼šwatchåº”ç”¨çš„ä¸»ä½“ï¼Œå¯ä»¥é€šè¿‡watchä¸Šçš„å›¾æ ‡è¿›å…¥ï¼Œå¯ä»¥ä¸iphoneè¿›è¡Œäº¤äº’ä¸æ•°æ®å…±äº«ã€‚ Notificationï¼šwatché€šçŸ¥ï¼Œä¼šå’Œiphoneé€šçŸ¥åŒæ­¥ï¼ŒåŒ…æ‹¬æœ¬åœ°çš„å’Œè¿œç¨‹çš„ï¼Œè¿™é‡Œå’Œiphoneä¸åŒåœ¨äºæœ‰é•¿é€šçŸ¥å’ŒçŸ­é€šçŸ¥çš„åˆ†åˆ«ï¼Œåœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨åå°æ·»åŠ å‚æ•°æ¥åŒºåˆ†ã€‚åœ¨storyboardä¸­çš„ç•Œé¢å¦‚ä¸‹ï¼š Glanceï¼šé¢„è§ˆç•Œé¢ï¼Œæ²¡æœ‰å¤æ‚çš„äº¤äº’èƒ½åŠ›ï¼Œä¹Ÿä¸èƒ½æ»‘åŠ¨ï¼Œåªèƒ½åœ¨å•å±å±•ç¤ºä¸€äº›æ•°æ®ï¼Œç‚¹å‡»åä¼šè¿›å…¥ä¸»ä½“watchAppä¸­ï¼š 3ã€åœ¨æ¨¡æ‹Ÿå™¨ä¸Šè¿è¡Œä¸€ä¸ªwatch appé€‰ä¸­æˆ‘ä»¬çš„watch Appå·¥ç¨‹ï¼Œåœ¨Xcode7ä¸­è¿è¡Œå¦‚ä¸‹ï¼š å¦‚æœä½ æ˜¯ä»¥å‰ç‰ˆæœ¬çš„Xcodeï¼Œå¯èƒ½éœ€è¦åœ¨æ¨¡æ‹Ÿå™¨çš„Hardwareä¸­å°†å…¶è°ƒå‡ºã€‚ è¿è¡Œåï¼Œæˆ‘ä»¬å¯ä»¥åœ¨watchæ¨¡æ‹Ÿå™¨ä¸Šä½¿ç”¨command+Hæ¥å›åˆ°watchçš„ä¸»ç•Œé¢ã€‚ ä¸‰ã€å‡ ç‚¹watch appçš„å¼€å‘æ€è·¯1ã€ä¼˜ç§€çš„watch appæ— ç–‘å¿…é¡»æ˜¯ç®€å•ï¼Œæœ´ç´ ï¼Œå¿«æ·è€Œæ—¶æ•ˆçš„ã€‚ 2ã€watchä¸Šä¸èƒ½è‡ªå®šä¹‰æ‰‹åŠ¿ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨çš„åªæœ‰æ»‘åŠ¨ï¼Œç‚¹å‡»å’Œé•¿æŒ‰ 3ã€å¿…é¡»æ”¹å˜iphoneå¸ƒå±€çš„æ€æƒ³ï¼Œå®Œå…¨æ¥å—æ–°çš„watchå¸ƒå±€ç‰¹ç‚¹ï¼Œè¿›è¡Œåˆ›æ–° 4ã€iphoneçš„ç‰¹ç‚¹æ˜¯ç•Œé¢çš„ç»šä¸½ï¼Œwatchåˆ™æ˜¯ç®€çº¦ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"Apple Watchå¼€å‘æ‰‹è®°","slug":"Apple-Watchå¼€å‘æ‰‹è®°","permalink":"http://huishao.cc/categories/Apple-Watchå¼€å‘æ‰‹è®°/"}],"tags":[],"keywords":[{"name":"Apple Watchå¼€å‘æ‰‹è®°","slug":"Apple-Watchå¼€å‘æ‰‹è®°","permalink":"http://huishao.cc/categories/Apple-Watchå¼€å‘æ‰‹è®°/"}]},{"title":"iOSåœ¨åº”ç”¨ä¸­æ·»åŠ è‡ªå®šä¹‰å­—ä½“","slug":"123iOSåœ¨åº”ç”¨ä¸­æ·»åŠ è‡ªå®šä¹‰å­—ä½“","date":"2015-10-09T16:00:00.000Z","updated":"2021-07-03T12:22:07.449Z","comments":true,"path":"2015/10/10/123iOSåœ¨åº”ç”¨ä¸­æ·»åŠ è‡ªå®šä¹‰å­—ä½“/","link":"","permalink":"http://huishao.cc/2015/10/10/123iOSåœ¨åº”ç”¨ä¸­æ·»åŠ è‡ªå®šä¹‰å­—ä½“/","excerpt":"","text":"iOSåœ¨åº”ç”¨ä¸­æ·»åŠ è‡ªå®šä¹‰å­—ä½“ä¸€ã€åœ¨åº”ç”¨ä¸­æ·»åŠ è‡ªå®šä¹‰å­—ä½“çš„æ­¥éª¤1ã€ç½‘ä¸Šæä¾›çš„å­—ä½“åº“æœ‰å¾ˆå¤šï¼Œä¸‹è½½å®Œæˆåï¼Œå°†å…¶å¯¼å…¥å·¥ç¨‹ä¸­ï¼Œä¸€èˆ¬ä¸ºttfæ ¼å¼ã€‚ 2ã€æ³¨æ„Build Phasesä¸­çš„Copy Bundle Resourcesä¸­æ˜¯å¦å¯¼å…¥äº†æ–‡ä»¶ï¼š 3ã€åœ¨é¡¹ç›®çš„info.plistæ–‡ä»¶ä¸­æ·»åŠ å­—ä½“é”®å€¼å¦‚ä¸‹ï¼š è¿™ä¸ªæ•°ç»„ä¸­å¯ä»¥æ·»åŠ å¤šä¸ªå…ƒç´ ï¼Œå¤šä¸ªå­—ä½“åº“ã€‚ 4ã€è¿™æ—¶å®é™…ä¸Šæˆ‘ä»¬å·²ç»å°†å­—ä½“æ·»åŠ è¿›äº†å·¥ç¨‹ä¸­ï¼Œä½†æ˜¯åœ¨åœ¨ä½¿ç”¨è¿™ä¸ªå­—ä½“æ—¶ï¼Œå­—ä½“çš„åå­—æœ‰æ—¶å’Œæ–‡ä»¶åæ˜¯ä¸ä¸€æ ·çš„ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“çœŸå®çš„å­—ä½“åç§°ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šè®²æ‰€æœ‰å­—ä½“åç§°æ‰“å°å‡ºæ¥ï¼š 12345 for (NSString * name in [UIFont familyNames]) &#123; for (NSString * fo in [UIFont fontNamesForFamilyName:name]) &#123; NSLog(@&quot;%@&quot;,fo); &#125; &#125; 5ã€æ‰¾åˆ°æˆ‘ä»¬éœ€è¦çš„å­—ä½“ï¼Œå¦‚ä¸‹ä½¿ç”¨å³å¯ï¼š 1 UIFont * font = [UIFont fontWithName:@&quot;yuweij&quot; size:14]; äºŒã€å¦‚ä½•å¿«é€Ÿçš„æ‰¾åˆ°æ–°æ·»åŠ çš„å­—ä½“åå­—å¦‚æœä½ å°†æ‰€æœ‰å­—ä½“éƒ½æ‰“å°äº†å‡ºæ¥ï¼Œåœ¨å…¶ä¸­æ‰¾åˆ°æ–°çš„å­—ä½“åç§°æ˜¯èº«ä»½å›°éš¾çš„ï¼Œå°¤å…¶æ˜¯å½“è¿™ä¸ªå­—ä½“çš„åç§°å’Œæ–‡ä»¶åç›¸å·®ç”šè¿œçš„æ—¶å€™ï¼Œè¿™æ˜¯ä¸€ä»¶éå¸¸ç—›è‹¦çš„äº‹æƒ…ã€‚ ä¸ºäº†åœ¨ä»¥åä½¿ç”¨è‡ªå®šä¹‰å­—ä½“çš„æ—¶å€™ä¸å¿…ä¸€æ¬¡ä¸€æ¬¡çš„ç»å†è¿™æ ·çš„ç—›è‹¦ï¼Œåœ¨Xcode6.3çš„ç¯å¢ƒä¸‹ï¼Œæˆ‘å°†æ‰€æœ‰çš„ç³»ç»Ÿå­—ä½“è·å–åå†™å…¥äº†plistæ–‡ä»¶ï¼Œå°†è¿™ä¸ªplistæ–‡ä»¶å¯¼å…¥é¡¹ç›®ä¸­ï¼Œé€šè¿‡å¦‚ä¸‹æ–¹æ³•ï¼Œå¯ä»¥åªæ‰“å°å‡ºæ–°å¢åŠ çš„å­—ä½“ï¼š 12345678910111213141516171819 NSString *paths=[[NSBundle mainBundle]pathForResource:@&quot;font&quot; ofType:@&quot;plist&quot;]; //å¾—åˆ°å®Œæ•´çš„æ–‡ä»¶å NSDictionary * rootDic = [NSDictionary dictionaryWithContentsOfFile:paths]; //éå†å½“å‰æ‰€æœ‰å­—ä½“ for (NSString * name in [UIFont familyNames]) &#123; NSArray * fontArray = [rootDic objectForKey:name]; BOOL tip = NO; for (NSString * fo in [UIFont fontNamesForFamilyName:name]) &#123; for (NSString * tmp in fontArray) &#123; if ([tmp isEqualToString:fo]) &#123; tip=YES; break; &#125; &#125; if (!tip) &#123; NSLog(@&quot;%@&quot;,fo); &#125; &#125; &#125; å¦‚æœä½ ä¹Ÿéœ€è¦ï¼Œå­—ä½“é›†plistæ–‡ä»¶çš„åœ°å€ï¼šhttps://github.com/ZYHshao/YHBaseFoundationTest/tree/master/YHBase/BaseSouceã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"Objectiveâ€”Cè¯­è¨€çš„æ–°é­…åŠ›â€”â€”Nullabilityã€æ³›å‹é›†åˆä¸ç±»å‹å»¶æ‹“","slug":"122Objectiveâ€”Cè¯­è¨€çš„æ–°é­…åŠ›â€”â€”Nullabilityã€æ³›å‹é›†åˆä¸ç±»å‹å»¶æ‹“","date":"2015-10-08T16:00:00.000Z","updated":"2021-07-03T12:21:11.317Z","comments":true,"path":"2015/10/09/122Objectiveâ€”Cè¯­è¨€çš„æ–°é­…åŠ›â€”â€”Nullabilityã€æ³›å‹é›†åˆä¸ç±»å‹å»¶æ‹“/","link":"","permalink":"http://huishao.cc/2015/10/09/122Objectiveâ€”Cè¯­è¨€çš„æ–°é­…åŠ›â€”â€”Nullabilityã€æ³›å‹é›†åˆä¸ç±»å‹å»¶æ‹“/","excerpt":"","text":"Objectiveâ€”Cè¯­è¨€çš„æ–°é­…åŠ›ä¸€ã€å¼•è¨€åœ¨Xcode7ä¸­ï¼ŒiOS9çš„SDKå·²ç»å…¨é¢å…¼å®¹äº†Objective-Cçš„ä¸€äº›æ–°ç‰¹æ€§å’Œæ–°åŠŸèƒ½ã€‚è¿™äº›åŠŸèƒ½éƒ½åªä½œç”¨äºç¼–è¯‘æœŸï¼Œå¯¹ç¨‹åºçš„è¿è¡Œå¹¶æ²¡æœ‰å½±å“ï¼Œå› æ­¤ï¼Œå®ƒå¯ä»¥å¾ˆå¥½çš„å‘ä¸‹è¿›è¡Œå…¼å®¹ï¼Œæ— ç¼çš„è¡”æ¥ä½ç‰ˆæœ¬çš„iOSç³»ç»Ÿï¼Œé‚£ä¹ˆè¿™äº›ç‰¹æ€§æœ‰ä»€ä¹ˆæ ·çš„ç”¨å¤„å‘¢ï¼Œä½œä¸ºå¼€å‘è€…ï¼Œæˆ‘ä¿è¯ä½ ä¸€å®šä¼šçˆ±ä¸Šä»–ä»¬ï¼Œå¦‚æœä½ å¯ä»¥å°†è¿™äº›æ–°ç‰¹æ€§éƒ½åº”ç”¨äºä½ çš„å¼€å‘ï¼Œä½ çš„å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡ï¼Œç›¸æ¯”ä¹‹å‰ï¼Œä¼šæœ‰ä¸€ä¸ªå¾ˆå¤§çš„æå‡ã€‚ äºŒã€Nullabilityæ£€æµ‹çš„æ”¯æŒåœ¨swiftè¯­è¨€ä¸­ï¼Œé€šè¿‡!å’Œ?å¯ä»¥å°†å¯¹è±¡å£°æ˜æˆOptionalï¼Œç”¨äºåœ¨å¼€å‘ä¸­æ ‡è®°è¿™ä¸ªå¯¹è±¡æ˜¯å¦å¯ä»¥ä¸ºç©ºã€‚åœ¨OCä¸­ï¼Œä»¥å‰æ˜¯æ²¡æœ‰è¿™æ ·çš„åŠŸèƒ½çš„ï¼Œå› æ­¤æˆ‘ä»¬åœ¨å¼€å‘ä¸­ä¼šç»å¸¸é‡åˆ°å› ä¸ºæŸä¸ªå‡½æ•°åº”è¯¥è¿”å›å®ä¾‹è€Œè¿”å›äº†ç©ºå¯¼è‡´çš„å´©æºƒã€‚Nullabilityçš„ä¸»è¦ç”¨æ­¦ä¹‹åœ°ï¼Œå°±æ˜¯åœ¨è¿™é‡Œï¼Œå®ƒå¯ä»¥èµ·åˆ°æç¤ºå¼€å‘è€…åšæ˜¯å¦ä¸ºç©ºå¾—åˆ¤æ–­çš„æç¤ºã€‚ æ‰“å¼€Xcode7ï¼Œç³»ç»Ÿçš„æ¡†æ¶ä¸­å·²ç»æ”¯æŒäº†Nullabilityï¼Œå¦‚ä¸‹ï¼š 12@property (nullable, nonatomic, readonly) ObjectType firstObject;@property (nullable, nonatomic, readonly) ObjectType lastObject; è¿™æ˜¯NSArrayä¸­çš„ä¸¤ä¸ªå±æ€§ï¼Œå…¶ä¸­nullableå…³é”®å­—è¯´æ˜äº†è¿™é‡Œå¯èƒ½è¿”å›ç©ºçš„å€¼ã€‚ å¦‚æœä»…ä»…æ˜¯åœ¨è¿”å›å€¼ä¸­ç»™å¼€å‘è€…ä¸€äº›æç¤ºï¼Œä½ å¯èƒ½è§‰å¾—åº”ç”¨å¹¶ä¸å¤§ï¼Œæ˜¯çš„ï¼Œå¯¹å¼€å‘è€…æœ€å¤§çš„å¸®åŠ©æ˜¯è¿™ä¸€ç‰¹æ€§å¯ä»¥ç”¨äºå‡½æ•°çš„å‚æ•°ä¸­ï¼Œè¿™æ ·æˆ‘ä»¬åœ¨è°ƒç”¨å‡½æ•°æ—¶èµ·åˆ°çš„æç¤ºä½œç”¨ï¼Œå°†æ˜¯éå¸¸é‡è¦çš„ï¼Œè¶Šæ˜¯å¤šäººåˆä½œçš„é¡¹ç›®ï¼Œä½œç”¨ä¹Ÿè¶Šå¤§ã€‚ ä¾‹å¦‚ï¼š 123-(void)setValue:(NSNumber * _Nonnull )number&#123; &#125; æˆ‘ä»¬åœ¨è°ƒç”¨å‡½æ•°æ—¶ï¼Œå¦‚æœä¼ å…¥äº†ç©ºå€¼ï¼Œç¼–è¯‘å™¨ä¼šç»™æˆ‘ä»¬è­¦å‘Šï¼š æ³¨æ„ï¼š è¿™ä¸€ç‰¹æ€§åœ¨Xcode6.3ä¸­å°±å·²ç»æ”¯æŒï¼Œä½†åœ¨Xcode7ä¸­åˆåšäº†ä¸€äº›å†™æ³•ä¸Šçš„å°æ”¹åŠ¨ï¼Œä¾‹å¦‚ï¼Œåœ¨Xcode6.3ä¸­è¿™æ ·å†™ï¼š 123-(void)setValue:( nonnull NSNumber * )number&#123; &#125; è€Œåœ¨Xcode7ä¸­æå€¡æˆ‘ä»¬ä½¿ç”¨ç¬¬ä¸€ç§å†™æ³•ã€‚ ä¸ä¹‹ç›¸å…³çš„å‡ ä¸ªå…³é”®å­—å¦‚ä¸‹ï¼š ä¿®é¥°å‚æ•° nonnullï¼šä¸å¯ä¸ºç©º nullable: å¯ä»¥ä¸ºç©º null_unspecified:ä¸ç¡®å®šæ˜¯å¦å¯ä»¥ä¸ºç©º(æå°‘æƒ…å†µ) åœ¨å±æ€§çš„å£°æ˜ä¸­ï¼Œè¿˜ä¼šæœ‰å¦‚ä¸‹ä¸€ä¸ªä¿®é¥°ç¬¦ï¼š null_resettable:setæ–¹æ³•å¯ä»¥ä¸ºnilï¼Œgetæ–¹æ³•ä¸å¯è¿”å›nil ä¸€ç‚¹æç¤ºï¼š ä½ å¯ä»¥å‘ç°ï¼ŒiOS9çš„SDKä¸­å·²ç»å®Œå…¨å…¼å®¹ä½¿ç”¨äº†è¿™äº›ç‰¹æ€§ï¼Œå¹¶ä¸”nonnullçš„ä½¿ç”¨ä¼šæ¯”nullableå¹¿æ³›çš„å¤šï¼Œå› æ­¤ï¼Œç³»ç»Ÿæä¾›äº†è¿™æ ·ä¸€å¯¹å®ï¼š #define NS_ASSUME_NONNULL_BEGIN _Pragma(â€œclang assume_nonnull beginâ€) #define NS_ASSUME_NONNULL_END _Pragma(â€œclang assume_nonnull endâ€) æˆ‘ä»¬åœ¨è¿™å¯¹å®ä¹‹é—´å®šä¹‰çš„å˜é‡éƒ½ä¼šåŠ ä¸Šnonnullçš„ä¿®é¥°ç¬¦ï¼Œåªæœ‰æˆ‘ä»¬ç‰¹æ®Šå£°æ˜nullableçš„æ‰éœ€è¦æ‰‹åŠ¨å†™ã€‚ ä¸‰ã€æ³›å‹é›†åˆçš„æ”¯æŒè¿™ä¸€ç‰¹æ€§å’ŒNullabilityä¸€æ ·ï¼Œåªä½œç”¨äºç¼–è¯‘æœŸï¼Œæ˜¯ä¸ºæˆ‘ä»¬å¼€å‘è€…æœåŠ¡çš„å¦ä¸€é‡è¦ç‰¹æ€§ã€‚è¿˜è®°å¾—ï¼Œåœ¨Xcode7ä¹‹å‰ï¼Œä¾ç„¶æ˜¯ä¸ºäº†æ–¹ä¾¿å¤šäººå¼€å‘ï¼Œæˆ‘ç»å¸¸ä¼šåœ¨æ¡†æ¶ä¸­å†™è¿™æ ·çš„ä¸€ä¸ªç©ºå¾—å®ï¼š åœ¨å¼€å‘æ—¶å¦‚ä¸‹ä½¿ç”¨ï¼Œåšåˆ°æç¤ºä¼™ä¼´æˆ‘è¿™ä¸ªæ•°ç»„ä¸­æ˜¯ä»€ä¹ˆä¸œè¥¿çš„ä½œç”¨ï¼š 12345@interface ViewController ()&#123; NSArray __TYPE__FIT_TO__CLASS(NSString) * array;&#125;@end å½“ç„¶ï¼Œæ‰€æœ‰è¿™äº›éƒ½æ˜¯æˆ‘è‡ªå·±çš„è‡ªå¯¼è‡ªæ¼”ï¼Œç¼–è¯‘å™¨å¹¶ä¸ä¼šé¸Ÿæˆ‘ï¼Œæˆ‘åœ¨è¿™ä¸ªæ•°ç»„ä¸­åŠ å…¶ä»–çš„ä¸œè¥¿ï¼Œå®ƒä¹Ÿä¸ä¼šä»‹æ„ï¼Œæ‰€æœ‰è¿™äº›åªæ˜¯æˆ‘å’Œæˆ‘çš„ä¼™ä¼´ä»¬çº¦å®šçš„ä¸€ç§ä¸€å¢æƒ…æ„¿ã€‚æ‰€ä»¥ï¼Œå½“æˆ‘çœ‹åˆ°Xcode7ä¸­çš„é›†åˆç±»å‹æ—¶ï¼Œæˆ‘ç€å®å…´å¥‹äº†ä¸€ä¸‹ã€‚ 1ã€æœ‰ç±»å‹çº¦å®šçš„é›†åˆåœ¨Xcode7ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç»™é›†åˆç±»å‹æ·»åŠ ä¸€ä¸ªæ³›å‹çš„çº¦å®šï¼Œå¦‚ä¸‹ï¼š 1 NSMutableArray&lt;NSString *&gt; *array = [[NSMutableArray alloc]init]; å£°æ˜äº†è¿™æ ·ä¸€ä¸ªæ•°ç»„åï¼Œå°±å¥½æ¯”æˆ‘å‘Šè¯‰äº†ç¼–è¯‘å™¨ï¼Œè¿™ä¸ªæ•°ç»„ä¸­çš„æ•°æ®ç±»å‹éƒ½æ˜¯NSString*ç±»å‹çš„ï¼Œç°åœ¨éå¸¸å¥½ï¼Œå¦‚æœæˆ‘è¿™ä¸ªæ•°ç»„ä¸­å…ƒç´ çš„æ–¹æ³•ï¼Œä¼šå‡ºç°å¦‚ä¸‹çš„æç¤ºï¼š æ¿€åŠ¨å§ï¼Œä½¿ç”¨ç‚¹è¯­æ³•å¯ä»¥è®¿é—®åˆ°æ•°ç»„ä¸­æ³›å‹çš„æ–¹æ³•äº†ï¼Œè¿˜æœ‰æ›´åŠ è¯±äººçš„ï¼š åœ¨æˆ‘ä»¬å‘è¿™ä¸ªæ•°ç»„ä¸­è¿½åŠ å…ƒç´ çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨å°†å…ƒç´ çš„ç±»å‹æç¤ºäº†å‡ºæ¥ï¼Œå¹¶ä¸”å°†FromArrayæ–¹æ³•ä¸­éœ€è¦çš„å…ƒç´ ç±»å‹ä¹Ÿæç¤ºäº†å‡ºæ¥ã€‚ åŒæ ·ï¼Œå¦‚æœæˆ‘ä»¬å‘è¿™ä¸ªæ•°ç»„ä¸­è¿½åŠ ç±»å‹ä¸åŒ¹é…çš„å…ƒç´ ï¼Œå¦‚ä¸‹ï¼š 12 NSMutableArray&lt;NSString *&gt; *array = [[NSMutableArray alloc]init]; [array addObject:@1]; ç¼–è¯‘å™¨ä¼šç»™æˆ‘ä»¬ä¸€ä¸ªè¿™æ ·çš„è­¦å‘Šï¼š 2ã€å…³äºä¸€ä¸ªç±»å‹é€šé…ç¬¦è§‚å¯ŸXcode7ä¸­iOSç³»ç»Ÿçš„ç±»ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°è¿™ä¹ˆä¸€ä¸ªå¥½ç©çš„ä¸œè¥¿ï¼šObjectTypeã€‚å®ƒæ—¢ä¸æ˜¯ä¸€ä¸ªç±»å‹ï¼Œä¹Ÿä¸æ˜¯å…³é”®å­—ï¼Œç„¶è€Œå´å¤§é‡å­˜åœ¨ï¼Œå¦‚ä¸‹æ˜¯ç³»ç»Ÿçš„NSMutableArrayçš„å¤´æ–‡ä»¶ï¼š 12345678910@interface NSMutableArray&lt;ObjectType&gt; : NSArray&lt;ObjectType&gt;- (void)addObject:(ObjectType)anObject;- (void)insertObject:(ObjectType)anObject atIndex:(NSUInteger)index;- (void)removeLastObject;- (void)removeObjectAtIndex:(NSUInteger)index;- (void)replaceObjectAtIndex:(NSUInteger)index withObject:(ObjectType)anObject;- (instancetype)init NS_DESIGNATED_INITIALIZER;- (instancetype)initWithCapacity:(NSUInteger)numItems NS_DESIGNATED_INITIALIZER;- (nullable instancetype)initWithCoder:(NSCoder *)aDecoder NS_DESIGNATED_INITIALIZER;@end è¿™ä¸ªObjectTypeå…¶å®åªæ˜¯ä¸€ä¸ªç±»å‹æ ‡è¯†ç¬¦ï¼Œå®ƒå…·ä½“æ€ä¹ˆå†™å¹¶ä¸é‡è¦ï¼Œåªæ˜¯ç³»ç»Ÿä¸­éƒ½çº¦å®šä½¿ç”¨äº†ObjectTypeï¼Œä½ ä¹Ÿå¯ä»¥åœ¨è‡ªå·±çš„ç±»ä¸­æŒ‰è‡ªå·±çš„å–œå¥½æ¥å‘½åï¼Œè¿™ä¸ªä¸œè¥¿æœ‰æ€æ ·çš„ç”¨å¤„ï¼Œæˆ‘ç”¨æ–‡å­—æè¿°ä¸æ¸…æ¥šï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è‡ªå·±æ¥å®šä¹‰ä¸€ä¸ªé›†åˆç±»æ¥ç†è§£ï¼š åˆ›å»ºä¸€ä¸ªç±»ï¼Œç»§æ‰¿äºNSObjectï¼Œæˆ‘å–åå«MyArrayï¼š 123456//è¿™ä¸ªç±»å‹é€šé…ç¬¦åªèƒ½åœ¨interfaveé‡Œä½¿ç”¨ï¼Œä½œç”¨åŸŸä¸º@interfaceåˆ°@endä¹‹é—´//è¿™é‡Œæˆ‘ä½¿ç”¨Typeæ¥åšè¿™ä¸ªé€šé…ç¬¦@interface MyArray&lt;Type&gt; : NSObject@property(nonatomic,strong,nonnull)NSMutableArray&lt;Type&gt; *array;-(void)addObject:(nonnull Type)obj;@end å®ç°å¦‚ä¸‹ï¼š 123456789101112131415161718- (instancetype)init&#123; self = [super init]; if (self) &#123; _array = [[NSMutableArray alloc]init]; &#125; return self;&#125;-(void)addObject:(id)obj&#123; [_array addObject:obj];&#125;-(NSString *)description&#123; NSMutableString * str = [[NSMutableString alloc]init]; for (int i=0; i&lt;_array.count; i++) &#123; [str appendString:[NSString stringWithFormat:@&quot;%@\\n&quot;,_array[i]]]; &#125; return str;&#125; æˆ‘ä»¬åœ¨ä½¿ç”¨è¿™ä¸ªè‡ªå®šä¹‰çš„é›†åˆç±»å‹æ—¶ï¼Œå°±ä¼šæœ‰å’Œç³»ç»Ÿä¸€æ ·çš„æ•ˆæœäº†ï¼š 3ã€å…³äºå¤šå‚æ•°çš„æ³›å‹é›†åˆå¤šå‚æ•°çš„æ³›å‹é›†åˆï¼Œæœ‰ä¸€ä¸ªéå¸¸å¥½çš„ä¾‹å­ï¼Œå°±æ˜¯NSDictionaryï¼Œåœ¨Xcode7ä¸­æˆ‘ä»¬å¯ä»¥è¿™æ ·å†™å­—å…¸ï¼š å¯ä»¥çœ‹åˆ°ï¼Œå­—å…¸é”®å€¼çš„ç±»å‹ç¼–è¯‘å™¨ä¸ºæˆ‘ä»¬æç¤ºäº†å‡ºæ¥ï¼Œç»“åˆä¸Šé¢ç±»å‹é€šé…ç¬¦çš„ä½¿ç”¨ï¼Œå¯¹äºå¤šå‚çš„é›†åˆï¼Œå°†å‚æ•°ç±»å‹ç”¨â€œ,â€éš”å¼€å³å¯ã€‚ 4ã€åå˜æ€§ä¸é€†å˜æ€§å› ä¸ºæœ‰äº†æ³›å‹é›†åˆçš„æ¦‚å¿µï¼Œç›¸æ¯”ä¹‹å‰ï¼Œæˆ‘ä»¬çš„ç±»å‹å®é™…ä¸Šæ›´åŠ å¤æ‚äº†ï¼Œæ¯”å¦‚è¿˜æ‹¿æˆ‘ä»¬è‡ªå®šä¹‰çš„é›†åˆç±»å‹æ¥ä¸¾ä¾‹ï¼š 12 MyArray&lt;NSString *&gt; * array; MyArray&lt;NSMutableString *&gt;*muArray; arrayå’ŒmuArrayåœ¨ç¼–è¯‘å™¨çœ‹æ¥å·²ç»æ˜¯ä¸åŒçš„ç±»å‹ï¼Œå¦‚æœæˆ‘ä»¬å¼ºè¡Œè½¬æ¢ï¼Œä¼šæŠ¥å¦‚ä¸‹çš„è­¦å‘Šï¼š å› æ­¤ï¼Œå°±æœ‰äº†é€†å˜å’Œåå˜è¿™ä¸ªæ¦‚å¿µï¼š __covariant :å­ç±»å‹æŒ‡é’ˆå¯ä»¥å‘çˆ¶ç±»å‹æŒ‡é’ˆè½¬æ¢ __contravariant:çˆ¶ç±»å‹æŒ‡é’ˆå¯ä»¥å‘å­ç±»å‹è½¬æ¢ ä¸Šé¢çš„æƒ…å†µï¼Œæˆ‘ä»¬å°†è‡ªå®šä¹‰çš„ç±»åšå¦‚ä¸‹ä¿®æ”¹ï¼Œå°±ä¸ä¼šå‡ºç°è­¦å‘Šï¼š 1234@interface MyArray&lt;__covariant Type&gt; : NSObject@property(nonatomic,strong,nonnull)NSMutableArray&lt;Type&gt; *array;-(void)addObject:(nonnull Type)obj;@end å››ã€ç±»å‹å»¶æ‹“ç¬¦çš„åº”ç”¨åœ¨å¼€å‘ä¸­ï¼Œå¼€å‘è€…ç»å¸¸ä¼šé‡åˆ°è¿™æ ·çš„æƒ…å†µï¼Œä¾‹å¦‚é€šè¿‡tagè·å–æŸäº›UIæ§ä»¶æ—¶ï¼ŒviewWithTagæ–¹æ³•é€šå¸¸ä¼šè¿”å›ç»™æˆ‘ä»¬ä¸€ä¸ªUIViewç±»å‹çš„æŒ‡é’ˆï¼Œè¿™å°±éœ€è¦å¼€å‘è€…æ‰‹åŠ¨çš„å¼ºè½¬ä¸€ä¸‹ï¼Œååˆ†éº»çƒ¦ã€‚æ–°å¢åŠ çš„__kindofä¿®é¥°ç¬¦å¯ä»¥å¸®åŠ©æˆ‘ä»¬è§£é™¤è¿™ä¸ªçƒ¦æ¼ã€‚æˆ‘ä»¬è¿˜ä»è‡ªå®šä¹‰çš„é‚£ä¸ªæ•°ç»„ç±»å¼€åˆ€ï¼Œå¯¹å…¶æ·»åŠ ä¸€ä¸ªå±æ€§ï¼š 12345@interface MyArray&lt;__covariant Type&gt; : NSObject@property(nonatomic,strong,nonnull)NSMutableArray&lt;Type&gt; *array;@property(nonnull,strong,nonatomic)NSMutableArray&lt;UIView *&gt; * viewArray;-(void)addObject:(nonnull Type)obj;@end åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„æ•°ç»„å¯¹è±¡ï¼Œå¹¶å‘å…¶ä¸­æ·»åŠ ä¸€ä¸ªUIButtonï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°æœ‰å¦‚ä¸‹ä¸€ä¸ªè­¦å‘Šï¼š è¿™ä¹Ÿæ˜¯æˆ‘ä»¬å¼€å‘ä¸­å¸¸é‡åˆ°çš„é—®é¢˜ï¼Œå¯¹å§ï¼Œä»¥å‰éœ€è¦å¼ºè½¬ã€‚ä½†æ˜¯ä»¥åå°±ä¸éœ€è¦äº†ï¼Œæˆ‘ä»¬åœ¨å£°æ˜è¿™ä¸ªæ•°ç»„æ—¶åŠ ä¸Šä¸€ä¸ª__kindofä¿®é¥°ç¬¦ï¼š 1@property(nonnull,strong,nonatomic)NSMutableArray&lt;__kindof UIView *&gt; * viewArray; è­¦å‘Šå°±æ¶ˆå¤±äº†ï¼Œå¾ˆcoolå§ã€‚ è¿™ä¸ªä¿®é¥°ç¬¦å°±æ˜¯å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œè¿™é‡Œå¯ä»¥è¿”å›UIViewçš„å­ç±»æŒ‡é’ˆã€‚ äº”ã€ç»“è¯­è™½ç„¶è¿™äº›ä¼˜ç‚¹åœ¨swiftä¸­æ—©æœ‰ä½“ç°ï¼Œä½†å°±æˆ‘ä¸ªäººè€Œè¨€ï¼Œæˆ‘å¯¹OCçš„æ„Ÿæƒ…ä¼šæ›´æ·±ä¸€äº›ï¼Œä¹Ÿæ›´åŠ æ„¿æ„æ¥å—OCçš„æ”¹å˜å’Œæˆé•¿ï¼Œå¤§å®¶éƒ½è¯´swiftçš„è¶‹åŠ¿åŠ¿åœ¨å¿…è¡Œï¼Œæˆ‘åªæƒ³è¯´ï¼Œswiftå¾ˆä¼˜ç§€ï¼ŒOCäº¦ç„¶ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"Objective-Cæµ…æ¢","slug":"Objective-Cæµ…æ¢","permalink":"http://huishao.cc/categories/Objective-Cæµ…æ¢/"}],"tags":[],"keywords":[{"name":"Objective-Cæµ…æ¢","slug":"Objective-Cæµ…æ¢","permalink":"http://huishao.cc/categories/Objective-Cæµ…æ¢/"}]},{"title":"iOSæ•°æ®æŒä¹…åŒ–ä¹‹äºŒâ€”â€”å½’æ¡£ä¸è®¾è®¡å¯å­˜å‚¨åŒ–çš„æ•°æ®æ¨¡å‹åŸºç±»","slug":"121iOSæ•°æ®æŒä¹…åŒ–ä¹‹äºŒâ€”â€”å½’æ¡£ä¸è®¾è®¡å¯å­˜å‚¨åŒ–çš„æ•°æ®æ¨¡å‹åŸºç±»","date":"2015-10-07T16:00:00.000Z","updated":"2021-07-03T12:19:50.756Z","comments":true,"path":"2015/10/08/121iOSæ•°æ®æŒä¹…åŒ–ä¹‹äºŒâ€”â€”å½’æ¡£ä¸è®¾è®¡å¯å­˜å‚¨åŒ–çš„æ•°æ®æ¨¡å‹åŸºç±»/","link":"","permalink":"http://huishao.cc/2015/10/08/121iOSæ•°æ®æŒä¹…åŒ–ä¹‹äºŒâ€”â€”å½’æ¡£ä¸è®¾è®¡å¯å­˜å‚¨åŒ–çš„æ•°æ®æ¨¡å‹åŸºç±»/","excerpt":"","text":"iOSæ•°æ®æŒä¹…åŒ–ä¹‹äºŒâ€”â€”å½’æ¡£ä¸è®¾è®¡å¯å­˜å‚¨åŒ–çš„æ•°æ®æ¨¡å‹åŸºç±»ä¸€ã€å¼•è¨€åœ¨ä¸Šä¸€ç¯‡åšå®¢ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†ç”¨plistæ–‡ä»¶è¿›è¡Œæ•°æ®æŒä¹…åŒ–çš„æ–¹æ³•ã€‚è™½ç„¶ç®€å•æ˜“ç”¨ï¼Œä½†éšç€å¼€å‘çš„æ·±å…¥ï¼Œä½ ä¼šå‘ç°ï¼Œè¿™ç§æ–¹å¼è¿˜æ˜¯æœ‰å¾ˆå¤§çš„å±€é™æ€§ã€‚è¯•æƒ³ï¼Œå¦‚æœæˆ‘ä»¬å¯ä»¥å°†ç”¨æˆ·çš„ç™»å½•è¿”å›ä¿¡æ¯æ¨¡å‹ï¼Œæ¸¸æˆä¸­è§’è‰²çš„å±æ€§ä¿¡æ¯æ¨¡å‹è¿›è¡Œç›´æ¥çš„æŒä¹…åŒ–å­˜å–ï¼Œé‚£æ˜¯ä¸æ˜¯éå¸¸çˆ½çš„äº‹ï¼Œå¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å½’æ¡£ï¼Œæ¥è®¾è®¡ä¸€ä¸ªè¿™æ ·çš„æ•°æ®æ¨¡å‹ã€‚ äºŒã€å…ˆæ¥ç²¾é€šå½’æ¡£å§å½’æ¡£ä¹Ÿæ˜¯iOSæä¾›ç»™å¼€å‘è€…çš„ä¸€ç§æ•°æ®å­˜å‚¨çš„æ–¹å¼ï¼Œäº‹å®ä¸Šï¼Œå‡ ä¹æ‰€æœ‰çš„æ•°æ®ç±»å‹éƒ½å¯ä»¥é€šè¿‡å½’æ¡£æ¥è¿›è¡Œå­˜å–ã€‚å…¶å­˜å‚¨ä¸è¯»å–çš„è¿‡ç¨‹ï¼Œä¸»è¦å°è£…åœ¨ä¸¤ä¸ªç±»ä¸­ï¼šNSKeyedArchiverå’ŒNSKeyedUnarchiverã€‚ 1ã€å½’æ¡£çš„åŸç†å½’æ¡£æ˜¯å°†ä¸€ç§æˆ–è€…å¤šç§æ•°æ®ç±»å‹è¿›è¡Œåºåˆ—åŒ–ï¼Œè§£å½’æ¡£çš„è¿‡ç¨‹å°±æ˜¯å°†åºåˆ—åŒ–çš„æ•°æ®è¿›è¡Œååºåˆ—åŒ–çš„è§£ç ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„ä¸€ç‚¹ï¼Œå½’æ¡£çš„æ ¸å¿ƒå¹¶éæ˜¯æ•°æ®çš„æŒä¹…åŒ–å¤„ç†ï¼Œè€Œæ˜¯æ•°æ®çš„åºåˆ—åŒ–å¤„ç†ï¼ŒæŒä¹…åŒ–çš„å¤„ç†ä¾ç„¶æ˜¯é€šè¿‡æ–‡ä»¶å­˜å–æ¥å®ç°çš„ã€‚å› æ­¤ï¼Œè¢«å½’æ¡£çš„æ•°æ®ç±»å‹éƒ½å¿…é¡»éµå®ˆä¸€ä¸ªç›¸åŒçš„åè®®ï¼Œæ‰èƒ½åœ¨è¿™ä¸ªåè®®çš„çº¦æŸä¸‹è¿›è¡Œæ­£ç¡®çš„å½’æ¡£ä¸è§£å½’æ¡£ï¼Œè¿™ä¸ªåè®®å°±æ˜¯NSCodingåè®®ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆæ¥çœ‹ä¸€ä¸‹NSCodingä¸­çš„å†…å®¹ï¼š 123456@protocol NSCoding- (void)encodeWithCoder:(NSCoder *)aCoder;- (id)initWithCoder:(NSCoder *)aDecoder;@end è¿™ä¸ªåè®®éå¸¸ç®€å•ï¼Œä¸€ä¸ªinitçš„å½’æ¡£æ–¹æ³•ï¼Œä¸€ä¸ªencodeçš„è§£å½’æ¡£æ–¹æ³•ï¼ŒNSCoderå°±æ˜¯å½’æ¡£å¯¹è±¡ã€‚åŸåˆ™ä¸Šè¯´ï¼Œæ— è®ºæ˜¯ä»€ä¹ˆæ•°æ®ç±»å‹çš„å¯¹è±¡ï¼Œç³»ç»Ÿçš„æˆ–è€…æ˜¯æˆ‘ä»¬è‡ªå®šä¹‰çš„ï¼Œéƒ½å¯ä»¥é€šè¿‡å®ç°è¿™ä¸ªåè®®ä¸­çš„æ–¹æ³•æ¥æ”¯æŒå½’æ¡£æ“ä½œã€‚ 2ã€å‡ ç§å½’æ¡£ä¸è§£å½’æ¡£çš„åº”ç”¨ï¼ˆ1ï¼‰é€šè¿‡ç±»æ–¹æ³•æ¥å¯¹rootKeyè¿›è¡Œå½’æ¡£è¿™ç§æ–¹å¼ï¼Œæˆ‘ä¸ªäººç†è§£ï¼Œå¾ˆç±»ä¼¼äºNSUserDefaultsä¸­çš„standardUserDefaultsï¼Œåªæ˜¯åè€…æ˜¯ç³»ç»Ÿä¸ºæˆ‘ä»¬åˆ›å»ºçš„ä¸€ä¸ªé»˜è®¤plistæ–‡ä»¶ï¼Œè€ŒrootKeyæ˜¯ç³»ç»Ÿä¸ºæˆ‘ä»¬åˆ›å»ºçš„ä¸€ä¸ªé»˜è®¤çš„å½’æ¡£é”®å€¼ã€‚è¯´èµ·æ¥æ¯”è¾ƒå¤æ‚ï¼Œä¸¾ä¸ªä¾‹å­å°±ååˆ†æ¸…æ™°äº†ï¼š 12345678910111213 NSString *homeDictionary = NSHomeDirectory();//è·å–æ ¹ç›®å½• NSString *homePath = [homeDictionary stringByAppendingPathComponent:@&quot;atany.archiver&quot;];//æ·»åŠ å‚¨å­˜çš„æ–‡ä»¶å //æ–¹å¼ä¸€ï¼šé€šè¿‡dataæ•°æ®å½’æ¡£ï¼Œåœ¨å°†æ•°æ®å†™å…¥æ–‡ä»¶ NSData *data= [NSKeyedArchiver archivedDataWithRootObject:@&quot;123&quot;]; [data writeToFile:homePath atomically:YES]; //æ–¹å¼äºŒï¼šç›´æ¥å†™å…¥æ–‡ä»¶ [NSKeyedArchiver archiveRootObject:@&quot;456&quot; toFile:homePath]; //æ–¹å¼ä¸€å’Œæ–¹å¼äºŒçš„æ•ˆæœå®Œå…¨ä¸€æ · åªæ˜¯è§£å½’æ¡£çš„æ—¶å€™ä¸åŒ //æ–¹å¼ä¸€çš„è§£å½’æ¡£:å…ˆè·å–dataæ•°æ®ï¼Œåœ¨è¿›è¡Œdataæ•°æ®çš„è§£å½’æ¡£ NSLog(@&quot;%@&quot;,[NSKeyedUnarchiver unarchiveObjectWithData:data]); //æ–¹å¼äºŒçš„è§£å½’æ¡£ï¼šç›´æ¥è§£æ–‡ä»¶ä¸­çš„å½’æ¡£ NSLog(@&quot;%@&quot;,[NSKeyedUnarchiver unarchiveObjectWithFile:homePath]); ä¸Šé¢çš„ç¤ºä¾‹æ˜¯å¯¹å­—ç¬¦ä¸²ç±»å‹è¿›è¡Œçš„å½’æ¡£ï¼Œæ˜¯å¯¹å•ä¸€çš„æ•°æ®å¯¹è±¡è¿›è¡Œçš„å½’æ¡£ï¼Œå½“ç„¶ï¼Œè¿™é‡Œçš„å¯¹è±¡æ˜¯æ”¯æŒæ•°ç»„ã€å­—å…¸ç­‰é›†åˆçš„ï¼Œä½†é›†åˆå…¶ä¸­çš„å¯¹è±¡ï¼Œä¹Ÿå¿…é¡»å…¨éƒ¨æ”¯æŒå½’æ¡£æ“ä½œã€‚ ï¼ˆ2ï¼‰é€šè¿‡æ„é€ æ–°çš„archiverå¯¹è±¡ï¼Œå¯¹å¤šä¸ªå¯¹è±¡è¿›è¡Œå½’æ¡£é™¤äº†ä¸Šé¢çš„ç±»æ–¹æ³•ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è‡ªå·±æ„é€ ä¸€ä¸ªå½’æ¡£å¯¹è±¡ï¼Œæ¥å¯¹å¤šç§ä¸åŒçš„å¯¹è±¡è¿›è¡Œå½’æ¡£ï¼š 123456789101112131415161718192021 NSString *homeDictionary = NSHomeDirectory();//è·å–æ ¹ç›®å½• NSString *homePath = [homeDictionary stringByAppendingPathComponent:@&quot;atany.archiver&quot;];//æ·»åŠ å‚¨å­˜çš„æ–‡ä»¶å //è¿™é‡Œåˆ›å»ºä¸€ä¸ªå¯å˜çš„dataå¯¹è±¡ä½œä¸ºå½’æ¡£çš„å®¹å™¨ NSMutableData * data = [[NSMutableData alloc]init]; //åˆ›å»ºä¸€ä¸ªå½’æ¡£å¯¹è±¡ï¼Œå½’æ¡£åå†™å…¥dataæ•°æ® NSKeyedArchiver * archiver = [[NSKeyedArchiver alloc]initForWritingWithMutableData:data]; //å¯¹ä¸‹é¢çš„å­—ç¬¦ä¸²å’Œintå€¼è¿›è¡Œå½’æ¡£åºåˆ—åŒ– [archiver encodeObject:@&quot;jaki&quot; forKey:@&quot;name&quot;]; [archiver encodeInt:24 forKey:@&quot;age&quot;]; //å†™å…¥data [archiver finishEncoding]; //å†™å…¥æ–‡ä»¶ [data writeToFile:homePath atomically:YES]; //åˆ›å»ºè§£å½’æ¡£çš„ååºåˆ—åŒ–å¯¹è±¡ NSKeyedUnarchiver * unarchiver = [[NSKeyedUnarchiver alloc]initForReadingWithData:data]; //è¿›è¡Œååºåˆ—åŒ– NSString * name = [unarchiver decodeObjectForKey:@&quot;name&quot;]; int age = [unarchiver decodeIntForKey:@&quot;age&quot;]; //æ‰“å°ä¿¡æ¯ NSLog(@&quot;\\nname:%@\\nage:%d&quot;,name,age); ç»“æœå¦‚ä¸‹ï¼š ï¼ˆ3ï¼‰è¿›è¡Œè‡ªå®šä¹‰å¯¹è±¡çš„å½’æ¡£ä¸Šé¢ä»‹ç»ä¸­æœ‰æåˆ°ï¼ŒåŸåˆ™ä¸Šï¼Œä»»ä½•éµå®ˆäº†NSCodingåè®®çš„ç±»éƒ½å¯ä»¥è¿›è¡Œå½’æ¡£æ“ä½œï¼Œé‚£ä¹ˆå¯¹äºæˆ‘ä»¬è‡ªå®šä¹‰çš„å¯¹è±¡ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•æ¥åšå‘¢ï¼Ÿ é¦–å…ˆï¼Œæˆ‘ä»¬æ–°å»ºä¸€ä¸ªç±»ï¼š ä»¿ç…§ä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬å†™ä¸€ä¸ªè¿™æ ·çš„ç±»ï¼š 1234@interface MyObject : NSObject@property(nonatomic,strong)NSString * name;@property(nonatomic,assign)int age;@end å¯¹å…¶è¿›è¡Œå½’æ¡£ï¼š 12345678 //è¿›è¡Œå½’æ¡£ MyObject * obj = [[MyObject alloc]init]; obj.name = @&quot;jaki&quot;; obj.age = 24; NSData * data = [NSKeyedArchiver archivedDataWithRootObject:obj]; //è¿›è¡Œè§£æ¡£ MyObject * obj2 = [NSKeyedUnarchiver unarchiveObjectWithData:data]; NSLog(@&quot;\\nname:%@\\nage:%d&quot;,obj2.name,obj2.age); ç›´æ¥è¿è¡Œï¼Œç¨‹åºä¼šå´©æºƒæ‰ï¼Œæ‰“å°å¦‚ä¸‹ï¼š å¯ä»¥çœ‹å‡ºï¼Œæ­£æ˜¯æˆ‘ä»¬å‰è¾¹è¯´è¿‡çš„ï¼Œå¿…é¡»éµå®ˆå½’æ¡£åè®®çš„å¯¹è±¡ï¼Œæ‰å¯ä»¥è¢«å½’æ¡£ï¼Œæˆ‘ä»¬åœ¨MyObjectç±»ä¸­å®ç°å¦‚ä¸‹ä¸¤ä¸ªæ–¹æ³•ï¼š 12345678910111213141516//è§£æ¡£æ–¹æ³•- (instancetype)initWithCoder:(NSCoder *)coder&#123; if (self=[super init]) &#123; _name = [coder decodeObjectForKey:@&quot;name&quot;]; _age = [coder decodeIntForKey:@&quot;age&quot;]; &#125; return self;&#125;//å½’æ¡£æ–¹æ³•- (void)encodeWithCoder:(NSCoder *)coder&#123; [coder encodeObject:_name forKey:@&quot;name&quot;]; [coder encodeInt:_age forKey:@&quot;age&quot;];&#125; æ·»åŠ äº†ä¸Šé¢ä¸¤ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬è‡ªå®šä¹‰çš„å¯¹è±¡å°±å¯ä»¥è‡ªç”±å½’æ¡£å­˜å–ï¼Œå¹¶å¯ä»¥å†™å…¥æœ¬åœ°ï¼Œéå¸¸coolå§ã€‚ ä¸‰ã€è®¾è®¡å¯ä»¥å½’æ¡£å­˜å–çš„æ•°æ®æ¨¡å‹åŸºç±»1ã€åŠ¨æœºä¸åˆè¡·é€šè¿‡ä¸Šé¢å¯¹å½’æ¡£çš„ä»‹ç»ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°å½’æ¡£ä¸€ä¸ªååˆ†æœ‰æ½œåŠ›çš„åº”ç”¨ï¼šå¯ä»¥è‡ªç”±å­˜å–è‡ªå®šä¹‰çš„æ•°æ®å¯¹è±¡ã€‚è¿™ä¸ªç‰¹æ€§çš„ä¼˜åŠ¿æ˜¯æ¯«æ— ç–‘é—®çš„ï¼Œé™¤äº†å¯ä»¥ä½¿æˆ‘ä»¬çš„æ•°æ®ç”¨èµ·æ¥æ›´åŠ æ–¹ä¾¿ï¼Œæ— éœ€å¤šæ¬¡è§£ææ•°æ®å¤–ï¼Œå®‰å…¨æ€§ä¹Ÿæ›´å¥½ã€‚ä½†æ˜¯ä¹Ÿå¸¦æ¥äº†ä¸€ä¸ªç¼ºé™·ï¼Œæ¯ä¸ªç±»éƒ½éœ€è¦å®ç°NSCodingä¸­çš„ä¸¤ä¸ªæ–¹æ³•æ˜¯ååˆ†ç¹ççš„ï¼Œå¹¶ä¸”ç±»è¶Šå¤æ‚ï¼Œè¿™ä¸ªæ­¥éª¤è¶Šç¹çï¼Œå¦‚æœåœ¨ä¹‹åçš„ä¿®æ”¹å’Œä¼˜åŒ–ä¸­ç±»åšäº†æ”¹å˜ï¼Œç›¸åº”çš„æ–¹æ³•ä¹Ÿè¦åšæ”¹å˜ï¼Œè¿™å°†å¢åŠ å¾ˆå¤§çš„å·¥ä½œé‡å¹¶ä¸”åŸ‹ä¸‹æ½œåœ¨bugçš„é£é™©ã€‚ æ‰€ä»¥æˆ‘ä»¬ä¼šæƒ³ï¼Œèƒ½å¦è®¾è®¡ä¸€ä¸ªè¿™æ ·çš„modelåŸºç±»ï¼Œæ¥ä½¿éœ€è¦å­˜å‚¨çš„modeléƒ½ç»§æ‰¿äºå®ƒï¼Œä½¿æˆ‘ä»¬çš„modelä¸éœ€è¦å®ç°NSCodingæ–¹æ³•çš„åŒæ—¶å¯ä»¥æ”¯æŒå½’æ¡£å‘¢ï¼Œé€šè¿‡runtimeå’ŒOCè¯­è¨€ç‰¹æ€§çš„ä¸€äº›å°æŠ€å·§ï¼Œæˆ‘ä»¬æ˜¯å¯ä»¥åšåˆ°çš„ã€‚ 2ã€åŸºç±»æ¨¡å‹çš„è®¾è®¡æˆ‘ä»¬æ–°å»ºä¸€ä¸ªBaseModelç±»ï¼Œæ ¸å¿ƒæ–¹æ³•å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152//å½’æ¡£ä¸è§£å½’æ¡£çš„æ–¹æ³•- (instancetype)initWithCoder:(NSCoder *)coder&#123; self = [super init]; if (self) &#123; //è·å–æ‰€æœ‰å±æ€§ NSArray * porpertyArray = [self getAllPropertys]; for (NSString * name in porpertyArray) &#123; //å»æ‰å±æ€§åå‰é¢çš„_ NSString * key = [name substringFromIndex:1]; //çº¦å®šå¥½çš„é”®å€¼å¯¹ c+key [self setValue:[coder decodeObjectForKey:[NSString stringWithFormat:@&quot;c%@&quot;,key]] forKey:key]; &#125; &#125; return self;&#125;- (void)encodeWithCoder:(NSCoder *)coder&#123; //è·å–æ‰€æœ‰å±æ€§ NSArray * porpertyArray = [self getAllPropertys]; for (NSString * name in porpertyArray) &#123; //å»æ‰å±æ€§åå‰é¢çš„_ NSString * key = [name substringFromIndex:1]; //çº¦å®šå¥½çš„é”®å€¼å¯¹ c+key [coder encodeObject:[self valueForKey:key] forKey:[NSString stringWithFormat:@&quot;c%@&quot;,key]]; &#125;&#125;//è·å–modelæ‰€æœ‰å±æ€§-(NSArray *)getAllPropertys&#123; NSMutableArray * array = [[NSMutableArray alloc]init]; unsigned int * count = malloc(sizeof(unsigned int)); //è°ƒç”¨runtimeçš„æ–¹æ³• //Ivarï¼šæ–¹æ³•è¿”å›çš„å¯¹è±¡å†…å®¹å¯¹è±¡ï¼Œè¿™é‡Œå°†è¿”å›ä¸€ä¸ªIvarç±»å‹çš„æŒ‡é’ˆ //class_copyIvarListæ–¹æ³•å¯ä»¥æ•è·åˆ°ç±»çš„æ‰€æœ‰å˜é‡ï¼Œå°†å˜é‡çš„æ•°é‡å­˜åœ¨ä¸€ä¸ªunsigned intçš„æŒ‡é’ˆä¸­ Ivar * mem = class_copyIvarList([self class], count); //è¿›è¡Œéå† for (int i=0; i&lt; *count ; i++) &#123; //é€šè¿‡ç§»åŠ¨æŒ‡é’ˆè¿›è¡Œéå† Ivar var = * (mem+i); //è·å–å˜é‡çš„åç§° const char * name = ivar_getName(var); NSString * str = [NSString stringWithCString:name encoding:NSUTF8StringEncoding]; [array addObject:str]; &#125; //é‡Šæ”¾å†…å­˜ free(count); //æ³¨æ„å¤„ç†é‡æŒ‡é’ˆ count=nil; return array;&#125; é€šè¿‡è¿™æ ·çš„ä¸€ä¸ªruntimeæœºåˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„æ˜¯æ–°å»ºçš„modelç»§æ‰¿äºè¿™ä¸ªåŸºç±»ï¼Œæ— éœ€å…¶ä»–å¤„ç†ç›´æ¥æ”¯æŒå½’æ¡£ï¼Œä¿®æ”¹ä¸ä¼˜åŒ–éƒ½ä¸å—å½±å“ã€‚ å››ã€ä¸ºå¿—åŒé“åˆçš„æœ‹å‹åˆ†äº«è¿™ä¸ªmodelé›†æˆåœ¨äº†æˆ‘çš„ä¸€ä¸ªå¼€æºçš„å¼€å‘æ¡†æ¶ä¸­ï¼Œå½“ç„¶ï¼Œé‚£é‡Œé¢ä¹Ÿç»¼åˆå’Œè®¸å¤šè®¸å¤šè¿™æ ·æ–¹ä¾¿å¼€å‘è€…ä½¿ç”¨çš„åŠŸèƒ½ï¼Œå¦‚æœä½ æ„Ÿå…´è¶£ï¼Œå¯ä»¥åœ¨[https://github.com/ZYHshao/YHBaseFoundationTest](https://github.com/ZYHshao/YHBaseFoundationTest)ä¸Šé¢çœ‹åˆ°ã€‚å¦‚æœä½ å‘ç°äº†ä¸€äº›bugæˆ–è€…å¯ä»¥æ·»åŠ æˆ–è€…ä¼˜åŒ–çš„åœ°æ–¹ï¼Œè¯·åŠ¡å¿…å‘ŠçŸ¥æˆ‘ï¼Œååˆ†ä½ æ„Ÿè°¢ã€‚QQï¼š316045346 ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSæ•°æ®æŒä¹…åŒ–ä¹‹ä¸€â€”â€”plistæ–‡ä»¶","slug":"120iOSæ•°æ®æŒä¹…åŒ–ä¹‹ä¸€â€”â€”plistæ–‡ä»¶","date":"2015-10-07T16:00:00.000Z","updated":"2021-07-02T06:54:46.547Z","comments":true,"path":"2015/10/08/120iOSæ•°æ®æŒä¹…åŒ–ä¹‹ä¸€â€”â€”plistæ–‡ä»¶/","link":"","permalink":"http://huishao.cc/2015/10/08/120iOSæ•°æ®æŒä¹…åŒ–ä¹‹ä¸€â€”â€”plistæ–‡ä»¶/","excerpt":"","text":"iOSæ•°æ®æŒä¹…åŒ–ä¹‹ä¸€â€”â€”plistæ–‡ä»¶iOSå¼€å‘ä¸­ï¼Œæˆ‘ä»¬æ—¶å¸¸ä¼šå°†ä¸€äº›ç®€å•çš„æ•°æ®è¿›è¡ŒæŒä¹…åŒ–çš„å­˜å‚¨ï¼Œæ–¹ä¾¿æˆ‘ä»¬ä¿å­˜ç¨‹åºçš„ä¸€äº›é…ç½®å’Œç”¨æˆ·çš„ä¸€äº›æ•°æ®ï¼Œplistæ–‡ä»¶å°±æ˜¯æˆ‘ä»¬ä¿å­˜è¿™äº›æ•°æ®çš„æœ€ä½³é€‰æ‹©ã€‚ ä¸€ã€ä½•ä¸ºplistplistæ˜¯ä¸€ç§æ–‡ä»¶æ ¼å¼ï¼Œå…¶å†…å®¹è§„åˆ™æ˜¯xmlæ–‡ä»¶ï¼Œåç¼€ä¸º.plistï¼Œå› æ­¤ï¼Œæˆ‘ä»¬æ›´ä¹ æƒ¯äºæˆå®ƒé—®plistæ–‡ä»¶ï¼Œåœ¨iOSå¼€å‘ä¸­ï¼Œè¿™ç§æ–‡ä»¶å¸¸ç”¨æ¥ä¿å­˜ä¸€äº›ç®€å•çš„é…ç½®æ•°æ®ï¼Œä¾‹å¦‚é¡¹ç›®ä¸­çš„info.plistã€‚ é€šè¿‡plistæ–‡ä»¶ç¼–è¾‘å™¨ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„æŸ¥çœ‹å’Œç¼–è¾‘å±‚æ¬¡æ¸…æ™°çš„plistæ–‡ä»¶ã€‚ äºŒã€é€šè¿‡æ“ä½œplistæ–‡ä»¶è¿›è¡Œæ•°æ®æŒä¹…åŒ–çš„å‡ ç§æ–¹å¼1ã€æ“ä½œç³»ç»Ÿä¸ºæˆ‘ä»¬å‡†å¤‡çš„ç”¨æˆ·é…ç½®æ–‡ä»¶â€”â€”NSUserDefaultså¯¹äºNSUserDefaultsï¼Œå…·ä½“ç”¨æ³•å’Œä¸€äº›å°æŠ€å·§åœ¨ä»¥å‰çš„ä¸€ç¯‡åšå®¢ä¸­æœ‰è¯¦ç»†çš„æè¿°ï¼Œä¸€èˆ¬çš„ç”¨æˆ·é…ç½®ä¿¡æ¯ï¼Œæˆ‘ä»¬éƒ½ä¼šé€‰æ‹©é€šè¿‡è¿™ç§æ–¹å¼æ¥è¿›è¡ŒæŒä¹…åŒ–ï¼Œåœ°å€å¦‚ä¸‹ï¼š[http://my.oschina.net/u/2340880/blog/411344](http://my.oschina.net/u/2340880/blog/411344)ã€‚ 2ã€åœ¨é¡¹ç›®åŒ…ä¸­æ‰‹åŠ¨åˆ›å»ºä¸€ä¸ªplistæ–‡ä»¶ï¼Œé€šè¿‡ä»£ç å¯¹å…¶è¿›è¡Œæ“ä½œè¿™ç§æ–¹å¼åˆ›å»ºçš„plistæ–‡ä»¶éå¸¸è‡ªç”±ä¸”ç›´è§‚ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºå¤šä¸ªæ ¹æ®åŠŸèƒ½è¿›è¡Œåˆ†ç±»å­˜å‚¨ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡Xcodeçš„å¯è§†åŒ–å·¥å…·è¿›è¡Œå¯è§†åŒ–çš„ä¿®æ”¹ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬æ–°åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œåœ¨Resourceä¸­é€‰æ‹© Property Listæ–‡ä»¶ï¼š ä¹‹åï¼Œæˆ‘ä»¬é€šè¿‡Xcodeï¼Œåœ¨å…¶ä¸­æ·»åŠ ä¸€äº›æ•°æ®ï¼š é€šè¿‡ä»£ç ï¼Œæˆ‘ä»¬æ¥è·å–è¿™äº›æ•°æ®ï¼š 1234 //è·å–myInfoæ–‡ä»¶åœ°å€ NSString * path = [[NSBundle mainBundle]pathForResource:@&quot;myInfo&quot; ofType:@&quot;plist&quot;]; NSMutableDictionary * dic =[NSMutableDictionary dictionaryWithContentsOfFile:path]; NSLog(@&quot;%@&quot;,dic); æ‰“å°ç»“æœå¦‚ä¸‹ï¼š è¿™ç§æ–¹å¼æ·»åŠ çš„plistæ–‡ä»¶ï¼Œæˆ‘ä»¬åªèƒ½åœ¨xcodeä¸­é…ç½®å¥½ï¼Œç„¶åå†ç¨‹åºä¸­è¯»å–ä½¿ç”¨ï¼Œä½†æ˜¯ä¸èƒ½åœ¨ç¨‹åºä¸­ä¿®æ”¹è¿™äº›æ•°æ®ï¼Œå¯ä»¥åº”ç”¨äºä¸€äº›å›ºå®šçš„æ•°æ®çš„å­˜å‚¨ï¼Œä¾‹å¦‚åœ°å›¾shu xingåˆ—è¡¨ç­‰ã€‚ 3ã€åœ¨æ²™ç›’ç›®å½•ä¸­åˆ›å»ºå’Œä½¿ç”¨plistæ–‡ä»¶æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ä»£ç åœ¨æ²™ç›’ä¸­åˆ›å»ºæˆ‘ä»¬è‡ªå·±çš„plistæ–‡ä»¶ï¼Œè¿›è¡Œæ•°æ®çš„å­˜å‚¨ã€‚åŒæ—¶å¯ä»¥æ”¯æŒaddï¼Œdeleteï¼Œreplaceï¼Œfindç­‰æ“ä½œã€‚ 123456789101112 //è·å–æ²™ç›’ç›®å½• NSArray *paths=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask,YES); NSString *plistPath1 = [paths objectAtIndex:0]; //å¾—åˆ°å®Œæ•´çš„æ–‡ä»¶å NSString *filename=[plistPath1 stringByAppendingPathComponent:@&quot;my.plist&quot;]; NSDictionary * dic = @&#123;@&quot;my&quot;:@&quot;haha&quot;&#125;; [dic writeToFile:filename atomically:YES]; //å–æ•°æ® NSDictionary * getDic = [NSDictionary dictionaryWithContentsOfFile:filename]; NSLog(@&quot;%@&quot;,getDic); æ‰“å°å¦‚ä¸‹ï¼š è¿™ç§æ–¹å¼æ— ç–‘ä¼šæ›´åŠ å®‰å…¨ï¼Œå­˜å–ä¹Ÿæ›´åŠ è‡ªç”±ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOS9ç³»åˆ—ä¸“é¢˜6â€”â€”iOS9å…¶ä»–é€‚é…æ³¨æ„ç‚¹","slug":"119iOS9ç³»åˆ—ä¸“é¢˜6â€”â€”iOS9å…¶ä»–é€‚é…æ³¨æ„ç‚¹","date":"2015-10-06T16:00:00.000Z","updated":"2021-07-02T06:53:41.264Z","comments":true,"path":"2015/10/07/119iOS9ç³»åˆ—ä¸“é¢˜6â€”â€”iOS9å…¶ä»–é€‚é…æ³¨æ„ç‚¹/","link":"","permalink":"http://huishao.cc/2015/10/07/119iOS9ç³»åˆ—ä¸“é¢˜6â€”â€”iOS9å…¶ä»–é€‚é…æ³¨æ„ç‚¹/","excerpt":"","text":"iOS9é€‚é…æ³¨æ„ç‚¹ä¸€ã€åå°å®šä½ç±»appé€‚é…ç‚¹åœ¨iOS8ä¸­ï¼ŒAPPçš„å®šä½æœåŠ¡appleå°±åšäº†ä¸€äº›ä¿®æ”¹ï¼Œéœ€è¦ç”¨æˆ·ç”³è¯·ç›¸åº”çš„æƒé™ï¼Œå¹¶åœ¨info.plistæ–‡ä»¶ä¸­æ·»åŠ å¯¹åº”çš„é”®å€¼ã€‚å…·ä½“çš„åšæ³•åœ¨è¿™ç¯‡åšå®¢ä¸­æœ‰è¯¦ç»†çš„è®²è§£ï¼š[http://my.oschina.net/u/2340880/blog/414760](http://my.oschina.net/u/2340880/blog/414760)ã€‚ åœ¨iOS9ç³»ç»Ÿä¸­ï¼Œå®šä½æœåŠ¡çš„åšæ³•åŸºæœ¬æ²¡æœ‰æ”¹å˜ï¼Œå¯¹äºå‰å°çš„å®šä½æ²¡æœ‰å½±å“ï¼Œä½†appä¸­å¦‚æœéœ€è¦åå°å®šä½ï¼Œé‚£ä¹ˆè¿˜éœ€è¦å¤šåšä¸€äº›æ“ä½œï¼Œä¾‹å¦‚ï¼š 123456789 manager = [[CLLocationManager alloc]init]; //ç”³è¯·åå°å®šä½æƒé™ [manager requestAlwaysAuthorization]; manager.delegate=self; //======================================= //ä¸‹é¢è¿™ä¸ªæ˜¯iOS9ä¸­æ–°å¢çš„æ–¹æ³• å¼€å¯åå°å®šä½ manager.allowsBackgroundLocationUpdates = YES; //====================================== [manager startUpdatingLocation]; é€šè¿‡ä¸Šé¢ç®€å•çš„é…ç½®ç›´æ¥è¿è¡Œçš„è¯ï¼Œç¨‹åºä¼šå´©æºƒæ‰ï¼Œè¿˜éœ€è¦åœ¨plistæ–‡ä»¶ä¸­åšä¸€äº›é…ç½®ï¼Œä¸¤ç§æ–¹å¼ï¼š æ–¹å¼ä¸€ï¼šç›´æ¥åœ¨plistæ–‡ä»¶ä¸­é…ç½®å¦‚ä¸‹ï¼š æ–¹å¼äºŒï¼šåœ¨é¡¹ç›®ä¸­è®¾ç½® æ‰“å¼€background Modelsé€‰é¡¹ï¼Œå‹¾é€‰å…¶ä¸­çš„Location updatesã€‚ äºŒã€å®‰è£…ä¸å—ä¿¡ä»»çš„å¼€å‘è€…åº”ç”¨æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨Xcode7åï¼Œå¼€å‘è€…å¯ä»¥ä¸ç”¨èŠ±99dollarså»è´­ä¹°å¼€å‘è€…è´¦å·è€Œå¯ä»¥åœ¨è‡ªå·±çš„iphoneä¸Šè¿›è¡Œæµ‹è¯•ã€‚åœ¨å®‰è£…è¿™äº›åº”ç”¨æ—¶ï¼ŒiOS9ç³»ç»Ÿä¸å†å‘ä»¥å‰é‚£æ ·ï¼Œå†å®‰è£…æ—¶æç¤ºä¸€ä¸ªä¿¡ä»»çš„æŒ‰é’®ï¼Œè€Œæ˜¯åšå¦‚ä¸‹çš„æç¤ºï¼š åœ¨è®¾ç½®ä¸­ï¼Œé€‰æ‹©æè¿°æ–‡ä»¶ï¼š ä¹‹åé€‰æ‹©å¼€å‘è€…å¯¹åº”çš„appleIdï¼Œé€‰æ‹©ä¿¡ä»»å³å¯ï¼š ä¸‰ã€BitCodeçš„é…ç½®BitCodeæ˜¯appçš„ä¸€ç§ä¸­é—´å½¢å¼ï¼Œåœ¨iOS9ç³»åˆ—ä¸“é¢˜çš„å‰å‡ ç¯‡ï¼Œæœ‰å¯¹å…¶çš„ç®€å•ä»‹ç»ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æäº¤appæ—¶æäº¤appçš„bitcodeå½¢å¼ï¼Œå¦‚æ­¤ä¸€æ¥ï¼Œappleä¼šå¯¹æˆ‘ä»¬çš„appè¿›è¡ŒäºŒæ¬¡ä¼˜åŒ–ï¼Œåœ¨ç”¨æˆ·ä¸‹è½½æ—¶æ ¹æ®æ‰€éœ€å†è¿›è¡Œç¼–è¯‘æ‰“åŒ…ã€‚åœ¨Xocde7ä¸­ï¼Œæ–°å»ºçš„é¡¹ç›®æ˜¯é»˜è®¤å¼€å¯BitCodeçš„ï¼Œå¦‚æœæˆ‘ä»¬ç”¨Xcode7ç¼–è¯‘æäº¤åº”ç”¨ï¼Œè¿™é‡Œæœ‰éœ€è¦æ³¨æ„é€‚é…çš„åœ°æ–¹ã€‚ å¦‚æœè¦æ”¯æŒBitCodeï¼Œéœ€è¦ä¿è¯æ‰€æœ‰çš„SDKéƒ½æ”¯æŒBitCodeï¼Œå¦‚æœè¦æ›´æ–°æ—§çš„SDKï¼Œåªéœ€è¦åœ¨Xcode7ä¸Šå¼€å¯BitCodeé‡æ–°åˆ¶ä½œä¸€éå³å¯ã€‚ å¦‚æœä¸èƒ½ä½¿æ‰€æœ‰SDKéƒ½æ”¯æŒBitCodeï¼Œå¯ä»¥åœ¨é¡¹ç›®ä¸­å…³é—­BitCodeï¼Œåœ¨building Settingä¸­æœç´¢BitCodeï¼Œå°†enableè®¾ç½®ä¸ºNOï¼Œå¦‚ä¸‹ï¼š å››ã€URL Schemeç™½åå•åœ¨iOS9ä¸­ï¼Œappleå¼•å…¥äº†ç™½åå•è¿™ä¸ªæ¦‚å¿µï¼Œå…¶å¥½å¤„æ˜¯å¯¹appåº”ç”¨å†…å®‰å…¨è¿›è¡Œäº†åŠ å¼ºã€‚åœ¨iOS9çš„é€‚é…ä¸­ï¼Œå¦‚æœæˆ‘ä»¬ç”¨åˆ°canOpenURLè¿™æ ·çš„æ–¹æ³•ï¼Œåˆ™éœ€è¦é…ç½®ç™½åå•ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæµ‹è¯•å·¥ç¨‹ï¼Œä»€ä¹ˆéƒ½ä¸ç”¨åšï¼Œåªéœ€è¦æ·»åŠ ä¸€ä¸ªURL Schemeï¼š åœ¨å¦ä¸€ä¸ªå·¥ç¨‹ä¸­ï¼Œæˆ‘ä»¬å†™å¦‚ä¸‹ä»£ç ï¼š 123 BOOL can= [[UIApplication sharedApplication]canOpenURL:[NSURL URLWithString:@&quot;TEST://&quot;]]; NSLog(@&quot;%d&quot;,can); [[UIApplication sharedApplication]openURL:[NSURL URLWithString:@&quot;TEST://&quot;]]; åœ¨æ²¡æœ‰é…ç½®ç™½åå•ä¹‹å‰ï¼Œæ‰“å°å¦‚ä¸‹ï¼š å¯ä»¥çœ‹åˆ°ï¼Œboolå€¼è¿”å›çš„æ˜¯NOã€‚è™½ç„¶è¿™æ ·ä¹Ÿå¯ä»¥è·³è½¬ç›¸åº”çš„APPï¼Œä½†æ˜¯canOpenURLè¿™ä¸ªæ–¹æ³•ç›¸å½“äºå¤±æ•ˆäº†ï¼Œæˆ‘ä»¬ä¸èƒ½ç”¨å®ƒæ¥åˆ¤æ–­ç”¨æˆ·åˆ°åº•è£…æ²¡è£…è¿™ä¸ªappã€‚ é€‚é…æ—¶ï¼Œæˆ‘ä»¬åœ¨plistæ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹é”®å€¼ï¼š è¿™æ—¶å†æ¬¡è¿è¡Œç¨‹åºï¼ŒcanOpenURLçš„åˆ¤æ–­å°±ä¼šå‡†ç¡®äº†ã€‚ æ³¨æ„ï¼šç™½åå•æ·»åŠ ä¸Šé™ä¸º50ä¸ªã€‚ äº”ã€labelé»˜è®¤å­—ä½“ä¸åŒäº§ç”Ÿçš„BUGiOS9çš„å¦ä¸€å˜åŒ–æ˜¯labelçš„é»˜è®¤å­—ä½“äº§ç”Ÿäº†å˜åŒ–ï¼Œæˆ‘ä»¬æ‰“å°iOS9ä¸­labelçš„å­—ä½“å¦‚ä¸‹ï¼š iOS8ä¸­çš„labelé»˜è®¤å­—ä½“å¦‚ä¸‹ï¼š è¿™ä¸¤ç§å­—ä½“çš„æœ€å¤§å·®å¼‚æ˜¯å­—é—´è·ä¸åŒï¼Œä¾‹å¦‚å¦‚ä¸‹ä¸€æ®µä»£ç ï¼š 12345 UILabel * label = [[UILabel alloc]init]; label.frame=CGRectMake(100, 100, 100, 30); [self.view addSubview:label]; label.backgroundColor= [UIColor redColor]; label.text=@&quot;1111111111111&quot;; è¿™æ®µä»£ç åœ¨iOS9ä¸Šæ˜¯åˆšå¥½å¯ä»¥æ­£å¸¸æ˜¾ç¤ºçš„ï¼Œåœ¨iOS8ä¸Šåˆ™ä¸è¡Œï¼Œå¦‚ä¸‹ï¼š iOS9ï¼š iOS8ï¼š é€‚é…æ³¨æ„ç‚¹ï¼š 1ã€å¯ä»¥é€šè¿‡åŠ¨æ€è®¡ç®—æ¥è·å–labelçš„å®½åº¦ï¼Œè¿›è¡Œè®¾ç½®labelçš„å®½åº¦ 2ã€ä¸€ä¸ªæ›´ç®€å•çš„æ–¹æ³•æ˜¯é€šè¿‡è®¾ç½®ä¸€ä¸ªç¡®å®šçš„å­—ä½“ï¼Œæ¥è¿›è¡Œé€‚é… ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOS9ä¸“é¢˜","slug":"iOS9ä¸“é¢˜","permalink":"http://huishao.cc/categories/iOS9ä¸“é¢˜/"}],"tags":[],"keywords":[{"name":"iOS9ä¸“é¢˜","slug":"iOS9ä¸“é¢˜","permalink":"http://huishao.cc/categories/iOS9ä¸“é¢˜/"}]},{"title":"iOS9ç³»åˆ—ä¸“é¢˜äº”â€”â€”å…¨æ–°çš„è”ç³»äººä¸è”ç³»äººUIæ¡†æ¶","slug":"118iOS9ç³»åˆ—ä¸“é¢˜äº”â€”â€”å…¨æ–°çš„è”ç³»äººä¸è”ç³»äººUIæ¡†æ¶","date":"2015-09-27T16:00:00.000Z","updated":"2021-07-02T06:50:00.556Z","comments":true,"path":"2015/09/28/118iOS9ç³»åˆ—ä¸“é¢˜äº”â€”â€”å…¨æ–°çš„è”ç³»äººä¸è”ç³»äººUIæ¡†æ¶/","link":"","permalink":"http://huishao.cc/2015/09/28/118iOS9ç³»åˆ—ä¸“é¢˜äº”â€”â€”å…¨æ–°çš„è”ç³»äººä¸è”ç³»äººUIæ¡†æ¶/","excerpt":"","text":"iOS9å…¨æ–°çš„è”ç³»äººç›¸å…³æ¡†æ¶â€”â€”Contacts Frameworkä¸€ã€å¼•è¨€åœ¨ä»¥å‰iOSå¼€å‘ä¸­ï¼Œæ¶‰åŠè”ç³»äººç›¸å…³çš„ç¼–ç¨‹ï¼Œä»£ç éƒ½éå¸¸ç¹çï¼Œå¹¶ä¸”æ¡†æ¶çš„è®¾è®¡ä¹Ÿä¸æ˜¯Objective-Cé£æ ¼çš„ï¼Œè¿™ä½¿å¼€å‘è€…ç”¨èµ·æ¥éå¸¸çš„éš¾å—ã€‚åœ¨iOS9ä¸­ï¼Œappleç»ˆäºè§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œå…¨æ–°çš„Contacts Frameworkå°†å®Œå…¨æ›¿ä»£AddressBookFrameworkï¼ŒAddressBookFrameworkä¹Ÿå°†æˆä¸ºå†å²è¢«å¼ƒç”¨ã€‚è‡³äºAddressBookFrameworkçš„ç›¸å…³apiå¦‚ä½•ç¹çï¼Œåœ¨ä»¥å‰çš„åšå®¢ä¸­æœ‰è®°å½•ï¼Œåœ°å€å¦‚ä¸‹ï¼š è”ç³»äººä¿¡æ¯ç›¸å…³ç¼–ç¨‹ï¼šhttp://my.oschina.net/u/2340880/blog/407347ã€‚ è”ç³»äººUIç•Œé¢ç›¸å…³ç¼–ç¨‹ï¼šhttp://my.oschina.net/u/2340880/blog/407973ã€‚ è¿™ä¸€æ–°çš„æ¡†æ¶æ˜¯iOS9æ–°ç‰¹æ€§ä¸­ååˆ†å—æ¬¢è¿çš„ä¸€ä¸ªã€‚appleçš„Objectiveâ€”Cä½“ç³»ä¹Ÿæ›´åŠ å®Œå–„ä¸å¼ºå¤§ã€‚ äºŒã€è®©æˆ‘ä»¬æ¥æ·»åŠ ä¸€ä¸ªè”ç³»äººæ–°çš„æ¡†æ¶çš„æ•´ä½“æ€è·¯æ˜¯é€šè¿‡é…ç½®ä¸è¯·æ±‚æ¥ç®¡ç†è”ç³»äººï¼Œè¿™æ ·åšæœ‰ä¸€ä¸ªéå¸¸å¤§çš„å¥½å¤„ï¼Œé€»è¾‘ç®€å•ï¼Œä»£ç å±‚æ¬¡æ¸…æ™°ã€‚å¦‚ä¸‹ï¼Œé€šè¿‡æ·»åŠ ä¸€ä¸ªè”ç³»äººæ¥å‘å¤§å®¶åšæ¼”ç¤ºï¼š 1ã€è”ç³»äººå¯¹è±¡ï¼šCNContactè¿™ä¸ªå¯¹è±¡æ˜¯ç”¨æ¥é…ç½®è”ç³»äººä¿¡æ¯çš„ï¼Œæœ‰å¯å˜çš„CNMutaleContactå’ŒCNContactï¼ŒåŒºåˆ«ç”¨æ¥è¯»å–å’Œåˆ›å»ºè”ç³»äººã€‚CNContactå¯¹è±¡ä¸­æœ‰è®¸å¤šå±æ€§ï¼Œå¯¹åº”è”ç³»äººçš„ä¸€äº›ä¿¡æ¯ã€‚ é¦–å…ˆï¼Œåˆ›å»ºCNMutableContactå¯¹è±¡ï¼š 1 CNMutableContact * contact = [[CNMutableContact alloc]init]; è®¾ç½®è”ç³»äººå¤´åƒï¼š 1contact.imageData = UIImagePNGRepresentation([UIImage imageNamed:@&quot;Icon-114.png&quot;]); è®¾ç½®è”ç³»äººå§“åï¼š 1234 //è®¾ç½®åå­— contact.givenName = @&quot;jaki&quot;; //è®¾ç½®å§“æ° contact.familyName = @&quot;zhang&quot;; è®¾ç½®è”ç³»äººé‚®ç®±ï¼š 123 CNLabeledValue *homeEmail = [CNLabeledValue labeledValueWithLabel:CNLabelHome value:@&quot;316045346@qq.com&quot;]; CNLabeledValue *workEmail =[CNLabeledValue labeledValueWithLabel:CNLabelWork value:@&quot;316045346@qq.com&quot;]; contact.emailAddresses = @[homeEmail,workEmail]; è¿™é‡Œéœ€è¦æ³¨æ„ï¼ŒemailAddresseså±æ€§æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­æ˜¯æ‰CNLabeledValueå¯¹è±¡ï¼ŒCNLabeledValueå¯¹è±¡ä¸»è¦ç”¨äºåˆ›å»ºä¸€äº›è”ç³»äººå±æ€§çš„é”®å€¼å¯¹åº”ï¼Œé€šè¿‡è¿™äº›å¯¹åº”ï¼Œç³»ç»Ÿä¼šå¸®æˆ‘ä»¬è¿›è¡Œæ•°æ®çš„æ ¼å¼åŒ–ï¼Œä¾‹å¦‚CNLabelHomeï¼Œå°±ä¼šå°†å·ç æ ¼å¼æˆå®¶åº­é‚®ç®±çš„æ ¼å¼ï¼Œç›¸åº”çš„å…¶ä»–é”®å¦‚ä¸‹ï¼š 123456789101112131415//å®¶åº­CONTACTS_EXTERN NSString * const CNLabelHome NS_AVAILABLE(10_11, 9_0);//å·¥ä½œCONTACTS_EXTERN NSString * const CNLabelWork NS_AVAILABLE(10_11, 9_0);//å…¶ä»–CONTACTS_EXTERN NSString * const CNLabelOther NS_AVAILABLE(10_11, 9_0);// é‚®ç®±åœ°å€CONTACTS_EXTERN NSString * const CNLabelEmailiCloud NS_AVAILABLE(10_11, 9_0);// urlåœ°å€CONTACTS_EXTERN NSString * const CNLabelURLAddressHomePage NS_AVAILABLE(10_11, 9_0);// æ—¥æœŸCONTACTS_EXTERN NSString * const CNLabelDateAnniversary NS_AVAILABLE(10_11, 9_0); è®¾ç½®è”ç³»äººç”µè¯ï¼š 1contact.phoneNumbers = @[[CNLabeledValue labeledValueWithLabel:CNLabelPhoneNumberiPhone value:[CNPhoneNumber phoneNumberWithStringValue:@&quot;12344312321&quot;]]]; è”ç³»äººç”µè¯çš„é…ç½®æ–¹å¼å’Œé‚®ç®±ç±»ä¼¼ï¼Œé”®å€¼å¦‚ä¸‹ï¼š 1234567CONTACTS_EXTERN NSString * const CNLabelPhoneNumberiPhone NS_AVAILABLE(10_11, 9_0);CONTACTS_EXTERN NSString * const CNLabelPhoneNumberMobile NS_AVAILABLE(10_11, 9_0);CONTACTS_EXTERN NSString * const CNLabelPhoneNumberMain NS_AVAILABLE(10_11, 9_0);CONTACTS_EXTERN NSString * const CNLabelPhoneNumberHomeFax NS_AVAILABLE(10_11, 9_0);CONTACTS_EXTERN NSString * const CNLabelPhoneNumberWorkFax NS_AVAILABLE(10_11, 9_0);CONTACTS_EXTERN NSString * const CNLabelPhoneNumberOtherFax NS_AVAILABLE(10_11, 9_0);CONTACTS_EXTERN NSString * const CNLabelPhoneNumberPager NS_AVAILABLE(10_11, 9_0); è¿™é‡Œçš„CNPhoneNumberå¯¹è±¡ä¹Ÿæ˜¯iOS9ä¸­çš„ä¸€ä¸ªæ–°çš„ç±»ï¼Œä¸“é—¨ç”¨æ¥åˆ›å»ºç”µè¯å·ç ï¼Œä¹‹ä¸­æ–¹æ³•å¦‚ä¸‹ï¼š 12345678910@interface CNPhoneNumber : NSObject &lt;NSCopying, NSSecureCoding&gt;//é€šè¿‡ç±»æ–¹æ³•åˆ›å»º+ (instancetype)phoneNumberWithStringValue:(NSString *)stringValue;//é€šè¿‡åˆå§‹åŒ–æ–¹æ³•åˆ›å»º- (instancetype)initWithStringValue:(NSString *)string;@property (readonly, copy, NS_NONATOMIC_IOSONLY) NSString *stringValue;@end è®¾ç½®è”ç³»äººåœ°å€ï¼š 123456 CNMutablePostalAddress * homeAdress = [[CNMutablePostalAddress alloc]init]; homeAdress.street = @&quot;è´å…‹è¡—&quot;; homeAdress.city = @&quot;ä¼¦æ•¦&quot;; homeAdress.state = @&quot;è‹±å›½&quot;; homeAdress.postalCode = @&quot;221B&quot;; contact.postalAddresses = @[[CNLabeledValue labeledValueWithLabel:CNLabelHome value:homeAdress]]; è®¾ç½®ç”Ÿæ—¥ï¼š 12345NSDateComponents * birthday = [[NSDateComponents alloc]init]; birthday.day=7; birthday.month=5; birthday.year=1992; contact.birthday=birthday; 2ã€åˆ›å»ºæ·»åŠ è”ç³»äººè¯·æ±‚ï¼šCNSaveRequestCNSaveRequestæ˜¯ç”¨äºå­˜å‚¨è”ç³»äººçš„è¯·æ±‚ç±»ï¼Œé€šè¿‡è¿™ä¸ªç±»ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºæ‰¹é‡æ·»åŠ ã€ä¿®æ”¹æˆ–è€…åˆ é™¤è”ç³»äººçš„è¯·æ±‚ï¼Œä¾‹å¦‚æ·»åŠ ä¸Šé¢æˆ‘ä»¬åˆ›å»ºçš„è”ç³»äººå¯¹è±¡ï¼š 1234 //åˆå§‹åŒ–æ–¹æ³• CNSaveRequest * saveRequest = [[CNSaveRequest alloc]init]; //æ·»åŠ è”ç³»äºº [saveRequest addContact:contact toContainerWithIdentifier:nil]; è¿™ä¸ªç±»ä¸­è¿˜æœ‰è®¸å¤šæ–¹ä¾¿æˆ‘ä»¬æ“ä½œçš„æ–¹æ³•ï¼š 123456789101112131415161718192021222324@interface CNSaveRequest : NSObject//æ·»åŠ ä¸€ä¸ªè”ç³»äºº- (void)addContact:(CNMutableContact *)contact toContainerWithIdentifier:(nullable NSString *)identifier;//æ›´æ–°ä¸€ä¸ªè”ç³»äºº- (void)updateContact:(CNMutableContact *)contact;//åˆ é™¤ä¸€ä¸ªè”ç³»äºº- (void)deleteContact:(CNMutableContact *)contact;//æ·»åŠ ä¸€ç»„è”ç³»äºº- (void)addGroup:(CNMutableGroup *)group toContainerWithIdentifier:(nullable NSString *)identifier;//æ›´æ–°ä¸€ç»„è”ç³»äºº- (void)updateGroup:(CNMutableGroup *)group;//åˆ é™¤ä¸€ç»„è”ç³»äºº- (void)deleteGroup:(CNMutableGroup *)group;//å‘ç»„ä¸­æ·»åŠ å­ç»„- (void)addSubgroup:(CNGroup *)subgroup toGroup:(CNGroup *)group NS_AVAILABLE(10_11, NA);//åœ¨ç»„ä¸­åˆ é™¤å­ç»„- (void)removeSubgroup:(CNGroup *)subgroup fromGroup:(CNGroup *)group NS_AVAILABLE(10_11, NA);//å‘ç»„ä¸­æ·»åŠ æˆå‘˜- (void)addMember:(CNContact *)contact toGroup:(CNGroup *)group;//å‘ç»„ä¸­ç§»é™¤æˆå‘˜- (void)removeMember:(CNContact *)contact fromGroup:(CNGroup *)group;@end 3ã€è¿›è¡Œè”ç³»äººçš„å†™å…¥æ“ä½œ:CNContactStoreCNContactStoreæ˜¯ä¸€ä¸ªç”¨äºå­˜å–è”ç³»äººçš„ä¸Šä¸‹æ–‡æ¡¥æ¢ï¼Œç°åœ¨ï¼ŒæŠŠæˆ‘ä»¬åˆ›å»ºçš„æ·»åŠ è”ç³»äººçš„è¯·æ±‚å†™å…¥ï¼š 12 CNContactStore * store = [[CNContactStore alloc]init]; [store executeSaveRequest:saveRequest error:nil]; åœ¨æ¨¡æ‹Ÿå™¨ä¸Šè¿è¡Œç¨‹åºï¼Œæ‰“å¼€è”ç³»äººï¼Œæ•ˆæœå¦‚ä¸‹ï¼š è”ç³»äººç•Œé¢ï¼š è”ç³»äººè¯¦æƒ…ï¼š ä¸‰ã€è·å–æ ¼å¼åŒ–çš„è”ç³»äººä¿¡æ¯iOS9ä¸­ï¼ŒContactFrameworkä¹Ÿä¸ºå¼€å‘è€…æä¾›äº†éå¸¸æ–¹ä¾¿çš„æ ¼å¼åŒ–ä¿¡æ¯çš„æ–¹æ³•ï¼Œè¿˜æ‹¿æˆ‘ä»¬ä¸Šé¢åˆ›å»ºçš„è”ç³»äººå¯¹è±¡ä¸¾ä¾‹ï¼š 1ã€è·å–æ ¼å¼åŒ–çš„è”ç³»äººå§“å12 NSString * foematter =[CNContactFormatter stringFromContact:contact style:CNContactFormatterStyleFullName]; NSLog(@&quot;%@&quot;,foematter); è¿™ä¸ªè¿è¡Œåä¼šæ‰“å°å‡ºjaki zhangï¼Œå…¶ä¸­styleé£æ ¼æšä¸¾å¦‚ä¸‹ï¼š 1234567typedef NS_ENUM(NSInteger, CNContactFormatterStyle)&#123; //è·å–å…¨å CNContactFormatterStyleFullName, //è·å–æ‹¼éŸ³å…¨å CNContactFormatterStylePhoneticFullName,&#125; NS_ENUM_AVAILABLE(10_11, 9_0); 2ã€è·å–æ ¼å¼åŒ–çš„è”ç³»äººåœ°å€12 NSString * foematter =[CNPostalAddressFormatter stringFromPostalAddress:homeAdress style:CNPostalAddressFormatterStyleMailingAddress]; NSLog(@&quot;%@&quot;,foematter); æ‰“å°å¦‚ä¸‹ï¼š å››ã€æå–è”ç³»äººåœ¨å¼€å‘ä¸­ï¼Œæå–è”ç³»äººçš„ä½¿ç”¨ç‡è¦è¿œè¿œé«˜äºåˆ›å»ºè”ç³»äººï¼ŒContactFrameworkæå–è”ç³»äººçš„æ–¹å¼ï¼Œç±»ä¼¼äºæ•°æ®åº“çš„æ£€ç´¢æ–¹å¼ï¼Œé€šè¿‡é…ç½®æ¡ä»¶ï¼Œæå–å‡ºæˆ‘ä»¬éœ€è¦çš„æ•°æ®ï¼Œä¾‹å¦‚ï¼š 12345 CNContactStore * stroe = [[CNContactStore alloc]init]; //æ£€ç´¢æ¡ä»¶ï¼Œæ£€ç´¢æ‰€æœ‰åå­—ä¸­æœ‰zhangçš„è”ç³»äºº NSPredicate * predicate = [CNContact predicateForContactsMatchingName:@&quot;zhang&quot;]; //æå–æ•°æ® NSArray * contacts = [stroe unifiedContactsMatchingPredicate:predicate keysToFetch:@[CNContactGivenNameKey] error:nil]; keysToFetchæ˜¯è®¾ç½®æå–è”ç³»äººçš„å“ªäº›æ•°æ®ï¼Œå¦‚ä¸Šåˆ™åªæå–å‡ºæ£€ç´¢è”ç³»äººçš„åå­—ã€‚ åŒæ ·ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è¯·æ±‚çš„æ–¹å¼æ¥å¯¹è”ç³»äººè¿›è¡Œéå†ï¼š 12345 CNContactStore * stroe = [[CNContactStore alloc]init]; CNContactFetchRequest * request = [[CNContactFetchRequest alloc]initWithKeysToFetch:@[CNContactPhoneticFamilyNameKey]]; [stroe enumerateContactsWithFetchRequest:request error:nil usingBlock:^(CNContact * _Nonnull contact, BOOL * _Nonnull stop) &#123; NSLog(@&quot;%@&quot;,contact); &#125;]; äº”ã€ContactFramework UIç›¸å…³iOS9ä¸­ï¼Œç³»ç»Ÿä¹Ÿä¸ºæˆ‘ä»¬å°è£…å¥½äº†ä¸€å¥—è”ç³»äººçš„UIç•Œé¢ï¼Œç”¨èµ·æ¥ä¹Ÿååˆ†æ–¹ä¾¿ï¼Œä¸»è¦æ–°å¢çš„controlleræœ‰ä¸¤ä¸ªï¼š CNContactPickerViewControllerï¼šå±•ç¤ºè”ç³»äººåˆ—è¡¨çš„controller CNContactViewControllerï¼šå±•ç¤ºè”ç³»äººè¯¦ç»†ä¿¡æ¯çš„controller ç¤ºä¾‹å¦‚ä¸‹ï¼š å¼¹å‡ºè”ç³»äººåˆ—è¡¨ï¼š 12 CNContactPickerViewController * con = [[CNContactPickerViewController alloc]init]; [self presentViewController:con animated:YES completion:nil]; æ•ˆæœå¦‚ä¸‹ï¼š è”ç³»äººé€»è¾‘çš„ç›¸å…³å¤„ç†ä¸»è¦åœ¨CNContactPickerDelegateä¸­å®Œæˆï¼š 1234567//è§†å›¾å–æ¶ˆæ—¶ è°ƒç”¨çš„æ–¹æ³•- (void)contactPickerDidCancel:(CNContactPickerViewController *)picker;//é€‰ä¸­ä¸å–æ¶ˆé€‰ä¸­æ—¶è°ƒç”¨çš„æ–¹æ³•- (void)contactPicker:(CNContactPickerViewController *)picker didSelectContact:(CNContact *)contact;- (void)contactPicker:(CNContactPickerViewController *)picker didSelectContactProperty:(CNContactProperty *)contactProperty;- (void)contactPicker:(CNContactPickerViewController *)picker didSelectContacts:(NSArray&lt;CNContact*&gt; *)contacts;- (void)contactPicker:(CNContactPickerViewController *)picker didSelectContactProperties:(NSArray&lt;CNContactProperty*&gt; *)contactProperties; CNContactViewControlleråˆ™æ˜¯ç”¨æ¥æ˜¾ç¤ºå…·ä½“è”ç³»äººçš„è¯¦ç»†ä¿¡æ¯çš„ï¼Œæ¯”å¦‚ï¼š 12 CNContactViewController * con = [CNContactViewController viewControllerForContact:contact]; [self presentViewController:con animated:YES completion:nil]; ç›¸å…³ä»£ç†å›è°ƒå‡½æ•°å¦‚ä¸‹ï¼š 123//å°†è¦å±•ç¤ºè”ç³»äººä¿¡æ¯ä¸å·²ç»å±•ç¤ºè”ç³»äººä¿¡æ¯çš„å›è°ƒ- (BOOL)contactViewController:(CNContactViewController *)viewController shouldPerformDefaultActionForContactProperty:(CNContactProperty *)property;- (void)contactViewController:(CNContactViewController *)viewController didCompleteWithContact:(nullable CNContact *)contact; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOS9ä¸“é¢˜","slug":"iOS9ä¸“é¢˜","permalink":"http://huishao.cc/categories/iOS9ä¸“é¢˜/"}],"tags":[],"keywords":[{"name":"iOS9ä¸“é¢˜","slug":"iOS9ä¸“é¢˜","permalink":"http://huishao.cc/categories/iOS9ä¸“é¢˜/"}]},{"title":"iOS9ç³»åˆ—ä¸“é¢˜å››â€”â€”APPä¼ è¾“å®‰å…¨","slug":"116iOS9ç³»åˆ—ä¸“é¢˜å››â€”â€”APPä¼ è¾“å®‰å…¨","date":"2015-09-27T16:00:00.000Z","updated":"2021-07-02T06:48:21.752Z","comments":true,"path":"2015/09/28/116iOS9ç³»åˆ—ä¸“é¢˜å››â€”â€”APPä¼ è¾“å®‰å…¨/","link":"","permalink":"http://huishao.cc/2015/09/28/116iOS9ç³»åˆ—ä¸“é¢˜å››â€”â€”APPä¼ è¾“å®‰å…¨/","excerpt":"","text":"APP Transport Securityâ€”â€”åŠ å¯†ä¼ è¾“æ–¹å¼éšç€ios9çš„æ¨å‡ºå’ŒXcodeçš„å‡çº§ï¼Œappleå°†é»˜è®¤å¼€å‘è€…ä½¿ç”¨httpsçš„ä¼ è¾“æ–¹å¼ï¼Œç›¸æ¯”httpçš„ä¼ è¾“åè®®ï¼Œè¿™æ— ç–‘ä¼šå¢åŠ ä¸€äº›å®‰å…¨æ€§ï¼Œå¯¹äºå¼€å‘è€…è€Œè¨€ï¼Œä¸€ä¸‹å­å°†httpåè®®å…¨éƒ¨å‡çº§ä¸ºhttpsåè®®ï¼Œä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡Xcodeçš„ä¸€äº›é…ç½®ï¼Œä½¿å…¶æ”¯æŒhttpçš„ä¼ è¾“åè®®ã€‚ å¦‚æœåœ¨Xcode7ä¸Šè¿è¡Œhttpåè®®çš„åº”ç”¨ï¼Œä¼šå‡ºç°å¦‚ä¸‹ä¿¡æ¯ï¼š è¿™ä¸ªä¿¡æ¯ä¹Ÿå¾ˆæ¸…æ™°ï¼Œéœ€è¦æˆ‘ä»¬åœ¨info.plistæ–‡ä»¶ä¸­é…ç½®ä¸€äº›å‚æ•°æ¥æ”¯æŒhttpã€‚ é¦–å…ˆï¼Œåœ¨é¡¹ç›®çš„Info.plistä¸­åŠ å…¥NSAppTransportSecurityè¿™ä¸ªé”®ï¼Œç±»å‹ä¸ºDictionary,åœ¨å­—å…¸ä¸­æ·»åŠ ä¸€å¯¹é”®å€¼ï¼Œé”®ä¸ºBoolenç±»å‹çš„NSAllowsArbitraryLoadsï¼Œå€¼ä¸ºYESï¼Œå¦‚ä¸‹ï¼š è¿™æ—¶å†è¿è¡Œé¡¹ç›®ï¼Œå°±å¯ä»¥æ­£å¸¸å–åˆ°æ•°æ®äº†ã€‚ å‡ ç‚¹æ³¨æ„ï¼š 1.æ€»æœ‰æœ‹å‹è¯´plistæ–‡ä»¶ä¸­é…ç½®äº†ä¾ç„¶æ²¡æœ‰æ•ˆæœï¼Œä¸€å¼€å§‹æˆ‘å¾ˆå¥‡æ€ªï¼Œåæ¥å‘ç°äº†åŸå› ï¼Œinfo.plistæ–‡ä»¶æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯æ­£å¼é¡¹ç›®ä¸­çš„ï¼Œä¸€ä¸ªæ˜¯æµ‹è¯•é¡¹ç›®ä¸­çš„ï¼Œä¸€å®šè¦é…ç½®åœ¨æ­£å¼é¡¹ç›®ä¸­ã€‚ 2.å¯èƒ½Xcodeçš„è¿˜æœ‰äº›ç¼ºé™·ï¼Œè¿™äº›é”®å€¼ä¸èƒ½é€šè¿‡è‡ªåŠ¨è¡¥å…¨æç¤ºå‡ºæ¥ï¼Œéœ€è¦æˆ‘ä»¬æ— è¯¯çš„æ‰‹æ‰“ã€‚ åç»­ï¼šXcode7.1ä¸­å·²ç»æ”¯æŒè‡ªåŠ¨è¡¥å…¨çš„åŠŸèƒ½ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOS9ä¸“é¢˜","slug":"iOS9ä¸“é¢˜","permalink":"http://huishao.cc/categories/iOS9ä¸“é¢˜/"}],"tags":[],"keywords":[{"name":"iOS9ä¸“é¢˜","slug":"iOS9ä¸“é¢˜","permalink":"http://huishao.cc/categories/iOS9ä¸“é¢˜/"}]},{"title":"Xcodeå¤šç‰ˆæœ¬çš„dmgæ–‡ä»¶ä¸‹è½½æ–¹å¼","slug":"117Xcodeå¤šç‰ˆæœ¬çš„dmgæ–‡ä»¶ä¸‹è½½æ–¹å¼","date":"2015-09-27T16:00:00.000Z","updated":"2021-07-02T06:49:15.605Z","comments":true,"path":"2015/09/28/117Xcodeå¤šç‰ˆæœ¬çš„dmgæ–‡ä»¶ä¸‹è½½æ–¹å¼/","link":"","permalink":"http://huishao.cc/2015/09/28/117Xcodeå¤šç‰ˆæœ¬çš„dmgæ–‡ä»¶ä¸‹è½½æ–¹å¼/","excerpt":"","text":"Xcodeå¤šç‰ˆæœ¬çš„dmgæ–‡ä»¶ä¸‹è½½æ–¹å¼åœ¨iOSå¼€å‘ä¸­ï¼Œæœ‰æ—¶æˆ‘ä»¬æƒ³ä¿æœ‰å½“å‰ç‰ˆæœ¬çš„Xcodeçš„åŒæ—¶ï¼Œä½“éªŒæ–°ç‰ˆæœ¬æˆ–è€…å…¼å®¹æ—§ç‰ˆæœ¬ï¼Œåœ¨appleå®˜ç½‘ä¸Šï¼Œæ˜¯æä¾›ç»™æˆ‘ä»¬ä¸‹è½½åœ°å€çš„ï¼š 1.è®¿é—®https://developer.apple.comã€‚ 2.é€‰æ‹©Resourcesï¼š 3.é€‰æ‹©Xcodeï¼Œç‚¹å‡»downloadï¼š 4.åœ¨ç½‘é¡µä¸‹æ–¹ç‚¹å‡»additional toolsï¼Œéœ€è¦ç”¨appidç™»å½•ï¼š ä¹‹åä¼šå‡ºç°appleçš„å·¥å…·åˆ—è¡¨ï¼Œé€‰æ‹©æˆ‘ä»¬éœ€è¦çš„ä¸‹è½½å³å¯ï¼š ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"æ—¥å¸¸æŠ€å·§","slug":"æ—¥å¸¸æŠ€å·§","permalink":"http://huishao.cc/categories/æ—¥å¸¸æŠ€å·§/"}],"tags":[],"keywords":[{"name":"æ—¥å¸¸æŠ€å·§","slug":"æ—¥å¸¸æŠ€å·§","permalink":"http://huishao.cc/categories/æ—¥å¸¸æŠ€å·§/"}]},{"title":"iOS9ç³»åˆ—ä¸“é¢˜ä¸‰â€”â€”åº”ç”¨ç˜¦èº«","slug":"115iOS9ç³»åˆ—ä¸“é¢˜ä¸‰â€”â€”åº”ç”¨ç˜¦èº«","date":"2015-09-26T16:00:00.000Z","updated":"2021-07-02T06:47:35.408Z","comments":true,"path":"2015/09/27/115iOS9ç³»åˆ—ä¸“é¢˜ä¸‰â€”â€”åº”ç”¨ç˜¦èº«/","link":"","permalink":"http://huishao.cc/2015/09/27/115iOS9ç³»åˆ—ä¸“é¢˜ä¸‰â€”â€”åº”ç”¨ç˜¦èº«/","excerpt":"","text":"æ›´å°ï¼Œæ›´å¿«â€”â€”iOS9çš„App Thinningappleåœ¨iOS9ä¸­å¼•å…¥äº†ä¸€å¥—æ–°çš„appç˜¦èº«æ–¹æ¡ˆï¼Œé€šè¿‡ä¸€äº›ä¼˜åŒ–ç­–ç•¥ï¼Œå°†å°½å¯èƒ½çš„å‡å°appå®‰è£…åŒ…çš„ä½“ç§¯ã€‚è¿™éƒ¨åˆ†çš„å¤§å¤šå·¥ä½œæ˜¯ç”±app storeæ¥å®Œæˆï¼Œå¼€å‘è€…å¹¶ä¸éœ€è¦ä»˜å‡ºå¤ªå¤šé¢å¤–çš„å¼€é”€ã€‚è¿™ç¯‡åšå®¢å°†è¿™éƒ¨åˆ†å†…å®¹åšäº†ç®€å•çš„ä»‹ç»ï¼Œè¯¦ç»†ä¿¡æ¯åœ¨[App Thinning](https://developer.apple.com/library/prerelease/ios/documentation/IDEs/Conceptual/AppDistributionGuide/AppThinning/AppThinning.html#//apple_ref/doc/uid/TP40012582-CH35)ã€‚ Appçš„ç˜¦èº«ç­–ç•¥ä¸»è¦åŒ…æ‹¬ä¸‰éƒ¨åˆ†ï¼š ä¸€ã€slicingè¿™éƒ¨åˆ†çš„ä¸»è¦åŸç†æ˜¯ä¸åŒçš„è®¾å¤‡ä¸‹è½½å®‰è£…ä¸åŒçš„appåŒ…ï¼Œå„ä¸ªappåŒ…å‰¯æœ¬ä¸­åŒ…å«ç›¸åº”å°ºå¯¸çš„ç´ æã€‚åœ¨xcodeä¸­ï¼Œä½¿ç”¨asset catalogç®¡ç†ç´ ææ–‡ä»¶ï¼Œåœ¨æˆ‘ä»¬æäº¤åº”ç”¨å¸‚åœºåï¼Œä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬ç”Ÿæˆå„ä¸ªå°ºå¯¸åŒ…å¾—appå‰¯æœ¬ã€‚ äºŒã€BitCodeå­—èŠ‚ç æ–‡ä»¶æ˜¯appç¨‹åºçš„ä¸€ç§ä¸­é—´å½¢å¼ï¼Œè‹¹æœä¼šå¯¹åŒ…å«å­—èŠ‚ç çš„appè¿›è¡ŒäºŒæ¬¡çš„ä¼˜åŒ–ï¼Œæ¥è¿›è¡Œç›¸åº”çš„ç˜¦èº«ã€‚ ä¸‰ã€On-Demand Resourcesè¿™æ˜¯ä¸€ç§å¤šçº§åº”ç”¨çš„è®¾è®¡æ€è·¯ï¼Œä¾‹å¦‚ä¸€ä¸ªæ¸¸æˆï¼Œå¼€å‘è€…å¯ä»¥å°†å…¶åˆ†ä¸ºä¸€ä¸ªå¤§å°å„å¼‚çš„èµ„æºåŒ…ï¼Œç”¨æˆ·åªéœ€ä¸‹è½½ä¸€ä¸ªå°çš„å¼•å¯¼ç¨‹åºï¼Œåœ¨ç¨‹åºå†…åŠ è½½ç›¸åº”èµ„æºåŒ…ã€‚è¿™æ ·ï¼Œå¯ä»¥å¤§å¤§åŠ å¿«åº”ç”¨çš„å®‰è£…é€Ÿåº¦ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOS9ä¸“é¢˜","slug":"iOS9ä¸“é¢˜","permalink":"http://huishao.cc/categories/iOS9ä¸“é¢˜/"}],"tags":[],"keywords":[{"name":"iOS9ä¸“é¢˜","slug":"iOS9ä¸“é¢˜","permalink":"http://huishao.cc/categories/iOS9ä¸“é¢˜/"}]},{"title":"iOS9ç³»åˆ—ä¸“é¢˜äºŒâ€”â€”å…¨æ–°çš„æœç´¢åŠŸèƒ½api","slug":"114iOS9ç³»åˆ—ä¸“é¢˜äºŒâ€”â€”å…¨æ–°çš„æœç´¢åŠŸèƒ½api","date":"2015-09-26T16:00:00.000Z","updated":"2021-07-02T06:46:31.479Z","comments":true,"path":"2015/09/27/114iOS9ç³»åˆ—ä¸“é¢˜äºŒâ€”â€”å…¨æ–°çš„æœç´¢åŠŸèƒ½api/","link":"","permalink":"http://huishao.cc/2015/09/27/114iOS9ç³»åˆ—ä¸“é¢˜äºŒâ€”â€”å…¨æ–°çš„æœç´¢åŠŸèƒ½api/","excerpt":"","text":"æ›´åŠ æ™ºèƒ½çš„æœç´¢æ–¹æ¡ˆâ€”â€”iOS9æœç´¢åŠŸèƒ½æ–°apiä¸€ã€å¼•è¨€iOS9ä¸­ä¸ºæˆ‘ä»¬æä¾›äº†è®¸å¤šæ–°çš„apiï¼Œæœç´¢åŠŸèƒ½çš„åŠ å¼ºæ— ç–‘æ˜¯å…¶ä¸­æ¯”è¾ƒæ˜¾çœ¼çš„ä¸€ä¸ªã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆè®¾æƒ³ä¸€ä¸‹ï¼šå¦‚æœåœ¨ä½ çš„appä¸­å®šä¹‰ä¸€ç§æ ‡è¯†ç¬¦ï¼Œåœ¨siriå’Œæœç´¢ä¸­ï¼Œå¯ä»¥ç”¨è¿‡è¿™ä¸ªæ ‡è¯†ç¬¦æœç´¢åˆ°ä½ çš„appï¼Œæ˜¯ä¸æ˜¯å¾ˆæ£’ï¼Ÿä¸ï¼Œè¿™è¿˜å·®å¾—è¿œï¼Œä½ å¯ä»¥å®šä¹‰ä»»æ„çš„æ•°æ®ï¼Œä½¿å…¶åœ¨æœç´¢å’Œsiriä¸­å¯ä»¥å¿«é€Ÿæ£€ç´¢åˆ°ï¼Œè¿™æ ·çš„æœç´¢åŠŸèƒ½æ˜¯ä¸æ˜¯éå¸¸é…·ï¼Ÿä¸ï¼Œè¿˜æœ‰æ›´coolçš„ï¼Œä½ ç”šè‡³å¯ä»¥åœ¨ä½ çš„ç½‘ç«™ä¸­æ·»åŠ ä¸€äº›æ ‡å¿—ï¼Œä½¿appleçš„çˆ¬è™«å¯ä»¥æ£€ç´¢åˆ°ï¼Œé‚£æ ·ï¼Œå³ä½¿ç”¨æˆ·æ²¡æœ‰å®‰è£…ä½ çš„appï¼Œä¹Ÿå¯ä»¥åœ¨æœç´¢ä¸­è·å–åˆ°ç›¸åº”çš„ä¿¡æ¯ï¼Œè¿™å¤ªå¼ºå¤§äº†ï¼Œå¯¹å§ã€‚ äºŒã€3ç§å…¨æ–°çš„æœç´¢æ¨¡å¼â€1ã€NSUserActivityâ€æˆ‘ä»¬å¯ä»¥åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ç›¸åº”çš„å‡½æ•°æ¥æ·»åŠ ä¸€äº›ç”¨æˆ·çš„æ´»è·ƒå…ƒç´ ï¼Œä½¿æˆ‘ä»¬å¯ä»¥åœ¨æœç´¢ä¸­é€šè¿‡æœç´¢è¿™æ ·çš„æ´»è·ƒå…ƒç´ å±•ç°æˆ‘ä»¬çš„appã€‚ä¾‹å¦‚ï¼š 12345678910 //åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œè¿™é‡Œçš„typeç”¨äºåŒºåˆ†æœç´¢çš„ç±»å‹ NSUserActivity *userActivity = [[NSUserActivity alloc] initWithActivityType: @&quot;myapp&quot;]; //æ˜¾ç¤ºçš„æ ‡é¢˜ userActivity.title = @&quot;æˆ‘çš„app&quot;; // æœç´¢çš„å…³é”®å­— userActivity.keywords = [NSSet setWithArray: @[@&quot;sea&quot;,@&quot;rch&quot;]]; // æ”¯æŒSearch userActivity.eligibleForSearch = YES; //æäº¤è®¾ç½® [userActivity becomeCurrent]; åœ¨ä¸‹é¢çš„å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å¤„ç†ç”¨æˆ·ç‚¹å‡»æœç´¢åçš„å›è°ƒï¼š 123456789101112- (BOOL)application:(UIApplication *)application continueUserActivity:(NSUserActivity *)userActivity restorationHandler:&#123; NSString *activityType = userActivity.activityType; if ([activityType isEqual: @&quot;myapp&quot;])&#123; // Handle restoration for values provided in userInfo // do something return YES; &#125; return NO; //å¤„ç†å›è°ƒ&#125; TIPï¼šè¿™ç§æ–¹å¼æ·»åŠ çš„å…³é”®å­—æœç´¢ï¼Œå¿…é¡»åˆ›å»ºå…¨å±€å˜é‡ï¼Œå¦åˆ™æ— æ³•è¿›è¡Œæœç´¢: 2ã€CoreSpotlightCoreSpotlightæ˜¯ä¸€ç§æ›´åŠ è‡ªç”±çš„æœç´¢æ–¹å¼ï¼Œå¯ä»¥é€šè¿‡æ·»åŠ ç±»ä¼¼itemçš„æ¨¡å‹ï¼Œå°†appä¸­çš„æ•°æ®å±•ç¤ºåœ¨æœç´¢æ ä¸­ï¼ŒCoreSpotlightæ¡†æ¶ç±»ä¼¼æä¾›äº†ä¸€äº›å¢ã€åˆ ã€æ”¹ã€æŸ¥çš„æ“ä½œï¼Œå¯æ˜¯ä½¿æˆ‘ä»¬è‡ªç”±çš„è¿›è¡Œæœç´¢å±æ€§çš„è®¾ç½®ã€‚ ï¼ˆ1ï¼‰è®¤è¯†3ä¸ªç±»åœ¨iOS9ä¸­ï¼Œæ–°å¢åŠ äº†3ä¸ªç±»ï¼Œé€šè¿‡å¯¹è¿™ä¸‰ä¸ªç±»çš„æ“ä½œä¸é…åˆï¼Œæˆ‘ä»¬å¯ä»¥è½»æ˜“çš„åœ¨appä¸­æ·»åŠ CoreSpotlightæœç´¢çš„åŠŸèƒ½ã€‚ CSSearchableItemAttributeSetï¼šè®¾ç½®ç±»ï¼Œè¿™ä¸ªç±»ç”¨äºè®¾ç½®æœç´¢æ ‡ç­¾é‡Œçš„iconï¼Œå†…å®¹ï¼Œå›¾ç‰‡ç­‰ã€‚ä¸»è¦ç”¨æ³•å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142//è¿™ä¸ªç±»çš„æ ¸å¿ƒæ–¹æ³•åªæœ‰ä¸€ä¸ªinitæ–¹æ³•ï¼Œé€šè¿‡ä¸€ä¸ªç±»å‹å­—ç¬¦ä¸²è¿›è¡Œåˆ›å»ºï¼Œå­—ç¬¦ä¸²ç”¨äºåœ¨å›è°ƒä¸­åŒºåˆ†@interface CSSearchableItemAttributeSet : NSObject &lt;NSCopying,NSSecureCoding&gt;- (instancetype)initWithItemContentType:(nonnull NSString *)itemContentType;@end//æ›´å¤šçš„å±æ€§è®¾ç½®åœ¨å…¶æ‰©å±•ç±»ä¸­ï¼Œä¾‹å¦‚ï¼š@interface CSSearchableItemAttributeSet (CSGeneral)//å±•ç¤ºçš„åç§°@property(nullable, copy) NSString *displayName;//åç§°æ•°ç»„@property(nullable, copy) NSArray&lt;NSString*&gt; *alternateNames;//å®Œæ•´çš„è·¯å¾„@property(nullable, copy) NSString *path;//é“¾æ¥url@property(nullable, strong) NSURL *contentURL;//å›¾ç‰‡é“¾æ¥çš„url@property(nullable, strong) NSURL *thumbnailURL;//è®¾ç½®å›¾ç‰‡æ•°æ®@property(nullable, copy) NSData *thumbnailData;//è®¾ç½®ä¸€ä¸ªæ ‡è¯†ç¬¦@property(nullable, copy) NSString *relatedUniqueIdentifier;@property(nullable, strong) NSDate *metadataModificationDate;//å†…å®¹ç±»å‹@property(nullable, copy) NSString *contentType;@property(nullable, copy) NSArray&lt;NSString*&gt; *contentTypeTree;//æœç´¢çš„å…³é”®å­—æ•°ç»„@property(nullable, copy) NSArray&lt;NSString*&gt; *keywords;//æ ‡é¢˜ä¿¡æ¯@property(nullable, copy) NSString *title;@end CSSearchableItemï¼šæœç´¢æ ‡ç­¾ç±»ï¼Œé€šè¿‡è¿™ä¸ªç±»ï¼Œæ¥åˆ›å»ºå“åº”çš„æœç´¢æ ‡ç­¾ã€‚ä¸»è¦å†…å®¹å¦‚ä¸‹ï¼š 12345678910111213141516//è¿™ä¸ªç±»ä¸»è¦ç”¨äºåˆ›å»ºæœç´¢çš„æ ‡ç­¾@interface CSSearchableItem : NSObject &lt;NSSecureCoding, NSCopying&gt;//initæ–¹æ³•- (instancetype)initWithUniqueIdentifier:(nullable NSString *)uniqueIdentifier //Can be null, one will be generated domainIdentifier:(nullable NSString *)domainIdentifier attributeSet:(CSSearchableItemAttributeSet *)attributeSet;//ç›¸åº” çš„å±æ€§@property (copy) NSString *uniqueIdentifier;@property (copy, nullable) NSString *domainIdentifier;@property (copy, null_resettable) NSDate * expirationDate;@property (strong) CSSearchableItemAttributeSet *attributeSet;@end CSSearchableIndexï¼šè¿™ä¸ªç±»ï¼Œæˆ‘ä¸ªäººç†è§£ï¼Œç±»ä¼¼ä¸€ä¸ªmanagerçš„ä½œç”¨ï¼Œé€šè¿‡å®ƒå¯¹æ ‡ç­¾è¿›è¡Œå¢ã€åˆ ã€æ”¹ã€æŸ¥ç­‰æ“ä½œï¼š 123456789101112131415161718192021222324@interface CSSearchableIndex : NSObject@property (weak,nullable) id&lt;CSSearchableIndexDelegate&gt; indexDelegate;//åˆ¤æ–­è®¾å¤‡æ˜¯å¦æ”¯æŒ+ (BOOL)isIndexingAvailable;//å–ç³»ç»Ÿçš„searchIndexç®¡ç†è€…+ (instancetype)defaultSearchableIndex;//ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸éœ€è¦é‡æ–°åˆ›å»ºå¯¹è±¡- (instancetype)initWithName:(NSString *)name;- (instancetype)initWithName:(NSString *)name protectionClass:(nullable NSString *)protectionClass;//è®¾ç½®ç´¢å¼•æ ‡ç­¾- (void)indexSearchableItems:(NSArray&lt;CSSearchableItem *&gt; *)items completionHandler:(void (^ __nullable)(NSError * __nullable error))completionHandler;//åˆ é™¤æŒ‡å®šidç´¢å¼•æ ‡ç­¾- (void)deleteSearchableItemsWithIdentifiers:(NSArray&lt;NSString *&gt; *)identifiers completionHandler:(void (^ __nullable)(NSError * __nullable error))completionHandler;- (void)deleteSearchableItemsWithDomainIdentifiers:(NSArray&lt;NSString *&gt; *)domainIdentifiers completionHandler:(void (^ __nullable)(NSError * __nullable error))completionHandler;//åˆ é™¤æ‰€æœ‰ç´¢å¼•æ ‡ç­¾- (void)deleteAllSearchableItemsWithCompletionHandler:(void (^ __nullable)(NSError * __nullable error))completionHandler;@end ï¼ˆ2ï¼‰ä¸€ä¸ªå°ä¾‹å­ä¸‹é¢ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå°ä¾‹å­æ¥åº”ç”¨ä¸‹CoreSpotlightçš„æœç´¢åŠŸèƒ½ã€‚ é¦–å…ˆï¼Œéœ€è¦åœ¨é¡¹ç›®ä¸­å¯¼å…¥å¦‚ä¸‹åº“ï¼š å®ç°å¦‚ä¸‹ä»£ç ï¼š 12345678910 //è¿›è¡Œæ ‡ç­¾è®¾ç½® CSSearchableItemAttributeSet * itemSet = [[CSSearchableItemAttributeSet alloc]initWithItemContentType:@&quot;myApp&quot;]; itemSet.title = @&quot;æˆ‘çš„APP&quot;; itemSet.keywords = @[@&quot;haha&quot;,@&quot;123&quot;]; itemSet.contentDescription = @&quot;è¿™æ˜¯æœç´¢åˆ°å¾—å†…å®¹&quot;; itemSet.thumbnailData = UIImagePNGRepresentation([UIImage imageNamed:@&quot;Icon-114.png&quot;]); CSSearchableItem * item = [[CSSearchableItem alloc]initWithUniqueIdentifier:@&quot;1&quot; domainIdentifier:@&quot;1&quot; attributeSet:itemSet]; [[CSSearchableIndex defaultSearchableIndex]indexSearchableItems:@[item] completionHandler:nil]; æˆ‘ä»¬åœ¨æœç´¢ä¸­è¾“å…¥hahaæˆ–è€…123æ•ˆæœå¦‚ä¸‹ï¼š CoreSpotlightçš„æœç´¢å›è°ƒå’ŒNSUserActivatyä¸€æ ·ï¼Œåªæ˜¯åŒºåˆ†idçš„æ–¹å¼æœ‰æ‰€ä¸åŒï¼š 1234567891011- (BOOL)application:(UIApplication *)application continueUserActivity:(NSUserActivity *)userActivity restorationHandler:&#123; NSString *activityType = userActivity.activityType; //å…ˆå–CSSearchableItemActionType if ([activityType isEqual: CSSearchableItemActionType]) &#123; NSString *uniqueIdentifier = [userActivity.userInfo objectForKey:CSSearchableItemActivityIdentifier]; // do something return YES; &#125; return NO;&#125; 3ã€Web Markupè¿™ä¸ªåŠŸèƒ½ä¸æˆ‘ä»¬appå¼€å‘å…³ç³»ä¸å¤§ï¼Œä½†æ˜¯å¯¹æˆ‘appçš„æ¨å¹¿å´è‡³å…³é‡è¦ï¼Œè¿™é¡¹æŠ€æœ¯å¯ä»¥è®©æˆ‘ä»¬çš„appå…³è”ä¸€ä¸ªç½‘ç«™ï¼Œappleé€šè¿‡çˆ¬è™«æ¥è·å–æˆ‘ä»¬è§„å®šçš„ä¸€äº›æ ‡ç­¾å€¼ï¼Œæ— è®ºç”¨æˆ·æ˜¯å¦å®‰è£…äº†appï¼Œåœ¨æœç´¢æ—¶ï¼Œéƒ½å¯ä»¥å±•ç¤ºå‡ºç›¸å…³ä¿¡æ¯ï¼Œå› ä¸ºè¿™é¡¹åŠŸèƒ½ä¸»è¦å…³è”å‰ç«¯æŠ€æœ¯ï¼Œéœ€è¦äº†è§£çš„å¯ä»¥å‚çœ‹ï¼š[App Search Programming Guide](https://developer.apple.com/library/prerelease/ios/documentation/General/Conceptual/AppSearch/WebContent.html#//apple_ref/doc/uid/TP40016308-CH8)ã€‚ ä¸‰ã€ç»“è¯­åœ¨æˆ‘å‚è€ƒçš„è®¸å¤šç›¸å…³æ–‡ç« ä¸­ï¼Œéƒ½ä¸€è‡´å»ºè®®ï¼ŒiOS9çš„æœç´¢åŠŸèƒ½å›ºç„¶å¼ºå¤§ï¼Œç„¶è€Œæ»¥ç”¨ä¼šé€ æˆåƒåœ¾ä¿¡æ¯çš„æ³›æ»¥ï¼Œè¿™æ ·çš„ç»“æœä¸€å®šä¼šé€‚å¾—å…¶åï¼Œä½œä¸ºå¼€å‘è€…ï¼Œæˆ‘ä»¬éœ€è¦å°†æœ€åˆé€‚ï¼Œæœ€ç®€æ´çš„ä¿¡æ¯æ¨é€åˆ°ç”¨æˆ·çš„é¢å‰ã€‚å¦å¤–ï¼Œæ–‡ç« æœ‰ç–æ¼å’Œé”™è¯¯ä¹‹å¤„ï¼Œæ¬¢è¿æŒ‡æ­£ã€‚ æ¬¢è¿è½¬è½½ è¯·æ³¨æ˜å‡ºå¤„ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOS9ä¸“é¢˜","slug":"iOS9ä¸“é¢˜","permalink":"http://huishao.cc/categories/iOS9ä¸“é¢˜/"}],"tags":[],"keywords":[{"name":"iOS9ä¸“é¢˜","slug":"iOS9ä¸“é¢˜","permalink":"http://huishao.cc/categories/iOS9ä¸“é¢˜/"}]},{"title":"iOS9ç³»åˆ—ä¸“é¢˜ä¸€â€”â€”3D Touch","slug":"113iOS9ç³»åˆ—ä¸“é¢˜ä¸€â€”â€”3D Touch","date":"2015-09-25T16:00:00.000Z","updated":"2021-07-02T06:45:37.379Z","comments":true,"path":"2015/09/26/113iOS9ç³»åˆ—ä¸“é¢˜ä¸€â€”â€”3D Touch/","link":"","permalink":"http://huishao.cc/2015/09/26/113iOS9ç³»åˆ—ä¸“é¢˜ä¸€â€”â€”3D Touch/","excerpt":"","text":"æ–°çš„è§¦æ‘¸ä½“éªŒâ€”â€”iOS9çš„3D Touchä¸€ã€å¼•è¨€åœ¨iphone6sé—®ä¸–ä¹‹åï¼Œå¾ˆå¤šæœç²‰éƒ½äº‰å…ˆè¦ä½“éªŒ3D Touchç»™ç”¨æˆ·å¸¦æ¥çš„é¢å¤–ç»´åº¦ä¸Šçš„äº¤äº’ï¼Œè¿™ä¸ªè®¾è®¡ä¹‹æ‰€ä»¥å«åš3D Touchï¼Œå…¶åŸç†ä¸Šæ˜¯å¢åŠ äº†ä¸€ä¸ªå‹åŠ›çš„æ„Ÿè§¦ï¼Œé€šè¿‡åŒºåˆ†è½»æŒ‰å’Œé‡æŒ‰æ¥è¿›è¡Œä¸åŒçš„ç”¨æˆ·äº¤äº’ã€‚ äºŒã€åœ¨æ¨¡æ‹Ÿå™¨ä¸Šå­¦ä¹ å’Œæµ‹è¯•3D Touch3D Touchæ˜¯ä¸€ä¸ªå¾ˆæ–°é¢–çš„è®¾è®¡ï¼Œå¯æ˜¯è‹¹æœæ–‡æ¡£æœ‰è¨€ï¼š With Xcode 7.0 you must develop on a device that supports 3D Touch. Simulator in Xcode 7.0 does not support 3D Touch. çœ‹åˆ°è¿™å¥è¯å¿ƒæ˜¯ä¸æ˜¯å‡‰äº†ä¸€åŠï¼Œæ˜¯çš„ï¼Œxcode7æ˜¯æ”¯æŒ3D Touchå¼€å‘çš„ï¼Œå¯æ˜¯æ¨¡æ‹Ÿå™¨å¹¶ä¸æ”¯æŒè¿™ä¸ªæ‰‹åŠ¿ï¼Œæˆ‘ä»¬åªèƒ½åœ¨çœŸæœºä¸Šè¿›è¡Œå­¦ä¹ ä¸æµ‹è¯•ï¼Œä½†æ˜¯åœ¨ITçš„ä¸–ç•Œï¼Œä»æ¥éƒ½ä¸ç¼ºæ‹¯æ•‘ä¸–ç•Œçš„äººç‰©ï¼Œgithubä¸Šæœ‰äººä¸ºæˆ‘ä»¬æä¾›äº†è¿™æ ·çš„ä¸€ä¸ªæ’ä»¶ï¼Œå¯ä»¥è®©æˆ‘ä»¬åœ¨æ¨¡æ‹Ÿå™¨ä¸Šè¿›è¡Œ3D Touchçš„æ•ˆæœæµ‹è¯•ï¼š gitåœ°å€ï¼šhttps://github.com/DeskConnect/SBShortcutMenuSimulatorã€‚ é™„.SBShortcutMenuSimulatorçš„å®‰è£…å’Œä½¿ç”¨å…¶å®å®‰è£…å’Œä½¿ç”¨å¹¶ä¸éœ€è¦æ€ä¹ˆä»‹ç»ï¼Œgitä¸»é¡µé‡Œä»‹ç»çš„å¾ˆæ¸…æ¥šï¼Œè¿™é‡Œåœ¨è®°å½•ä¸€éï¼Œå…¶ä¸­åªæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œå¦‚æœä½ åƒæˆ‘ä¸€æ ·ï¼Œç”µè„‘ä¸­è£…æœ‰Xcode6å’ŒXcode7ä¸¤ä¸ªç‰ˆæœ¬ï¼Œé‚£ä¸ªXcodeçš„ç¼–è¯‘è·¯å¾„ï¼Œéœ€è¦åšä¸€ä¸‹ä¿®æ”¹ã€‚ å®‰è£…ï¼š åœ¨ç»ˆç«¯ä¸­ä¸€æ¬¡è¿è¡Œå¦‚ä¸‹æŒ‡ä»¤ï¼š 123git clone https://github.com/DeskConnect/SBShortcutMenuSimulator.gitcd SBShortcutMenuSimulatormake å¦‚æœç”µè„‘ä¸­æœ‰å¤šä¸ªXcodeç‰ˆæœ¬ï¼Œå…ˆåšå¦‚ä¸‹æ“ä½œï¼Œå¦‚æœåªæœ‰Xcode7ï¼Œåˆ™å¯ä»¥è·³è¿‡ 1sudo xcode-select -switch /Applications/Xcode2.app/Contents/Developer/ æ³¨æ„ï¼šä¸Šé¢å‘½ä»¤ä¸­ï¼ŒXcode2.appæ˜¯ä½ ç”µè„‘ä¸­Xcodeçš„åå­—ï¼Œè¿™é‡Œå¦‚è¦ç‰¹åˆ«æ³¨æ„ï¼Œå¦‚æœåå­—ä¸­æœ‰ç©ºæ ¼ï¼Œéœ€è¦ä¿®æ”¹ä¸€ä¸‹ï¼ŒæŠŠç©ºæ ¼å»æ‰ï¼Œå¦åˆ™ä¼šå½±å“å‘½ä»¤çš„æ‰§è¡Œã€‚ ä¹‹ååœ¨SBShortcutMenuSimulatorçš„ç›®å½•ä¸­æ‰§è¡Œå¦‚ä¸‹æ“ä½œï¼š 12xcrun simctl spawn booted launchctl debug system/com.apple.SpringBoard --environment DYLD_INSERT_LIBRARIES=$PWD/SBShortcutMenuSimulator.dylibxcrun simctl spawn booted launchctl stop com.apple.SpringBoard å¦‚æœæ²¡æœ‰æŠ¥é”™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å‘æŒ‡å®šç«¯å£å‘é€æ¶ˆæ¯çš„æ–¹æ³•æ¥åœ¨æ¨¡æ‹Ÿå™¨ä¸Šæ¨¡æ‹Ÿ3D Touchçš„æ•ˆæœï¼š 1echo &apos;com.apple.mobilecal&apos; | nc 127.0.0.1 8000 å…¶ä¸­ï¼Œcom.apple.mobilecalæ˜¯åº”ç”¨çš„Bundle ID ï¼Œå¦‚æœè¦æµ‹è¯•æˆ‘ä»¬çš„åº”ç”¨ï¼Œå°†å…¶æ”¹ä¸ºæˆ‘ä»¬åº”ç”¨çš„BundleIDå³å¯ï¼Œä¸Šé¢çš„ç¤ºä¾‹åº”ç”¨æ˜¯ç³»ç»Ÿæ—¥å†ï¼Œå¯ä»¥çœ‹åˆ°æ¨¡æ‹Ÿå™¨çš„æ•ˆæœå¦‚ä¸‹ï¼š ä¸‰ã€3D Touchçš„ä¸»è¦åº”ç”¨æ–‡æ¡£ç»™å‡ºçš„åº”ç”¨ä»‹ç»ä¸»è¦æœ‰ä¸¤å—ï¼š 1.A user can now press your Home screen icon to immediately access functionality provided by your app. 2.Within your app, a user can now press views to see previews of additional content and gain accelerated access to features. ç¬¬ä¸€éƒ¨åˆ†çš„åº”ç”¨æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡3Dæ‰‹åŠ¿ï¼Œåœ¨ä¸»å±å¹•ä¸Šçš„åº”ç”¨Iconå¤„ï¼Œç›´æ¥è¿›å…¥åº”ç”¨çš„å“åº”åŠŸèƒ½æ¨¡å—ã€‚è¿™ä¸ªåŠŸèƒ½å°±ä¾‹å¦‚æˆ‘ä»¬ä¸Šé¢çš„æ—¥å†ç¤ºä¾‹ï¼Œä¼šåœ¨Iconæ—è¾¹å‡ºç°ä¸€ä¸ªèœå•ï¼Œç‚¹å‡»èœå•æˆ‘ä»¬å¯ä»¥è¿›å…¥ç›¸åº”çš„åŠŸèƒ½å•å…ƒã€‚ æˆ‘ä¸ªäººç†è§£ï¼Œè¿™ä¸ªåŠŸèƒ½ï¼Œpushæ¶ˆæ¯åŠŸèƒ½åŠ ä¸ŠiOS8æ¨å‡ºçš„æ‰©å±•todayåŠŸèƒ½ï¼Œè¿™ä¸‰ä¸ªæœºåˆ¶ä½¿iOSåº”ç”¨å˜å¾—æ— æ¯”çµæ´»æ–¹ä¾¿ï¼Œç”¨æˆ·å¯ä»¥ä¸éœ€ä»˜å‡ºå¯»æ‰¾çš„æ—¶é—´æˆæœ¬æ¥å¿«é€Ÿä½¿ç”¨è‡ªå·±éœ€è¦çš„åŠŸèƒ½ã€‚ ç¬¬äºŒéƒ¨åˆ†æ˜¯å¯¹appçš„ä¸€ä¸ªä¼˜åŒ–ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡3D Touchæ‰‹åŠ¿åœ¨viewä¸Šæ¥é¢„è§ˆä¸€äº›é¢„åŠ è½½ä¿¡æ¯ï¼Œè¿™æ ·çš„è®¾è®¡å¯ä»¥ä½¿appæ›´åŠ ç®€æ´å¤§æ–¹ï¼Œäº¤äº’æ€§ä¹Ÿæ›´å¼ºã€‚ å››ã€3D Touchçš„ä¸‰å¤§æ¨¡å—åœ¨æˆ‘ä»¬çš„appä¸­ä½¿ç”¨3D TouchåŠŸèƒ½ï¼Œä¸»è¦åˆ†ä¸ºä»¥ä¸‹ä¸‰ä¸ªæ¨¡å—ï¼š 1ã€Home Screen Quick Actionsé€šè¿‡ä¸»å±å¹•çš„åº”ç”¨Iconï¼Œæˆ‘ä»¬å¯ä»¥ç”¨3D Touchå‘¼å‡ºä¸€ä¸ªèœå•ï¼Œè¿›è¡Œå¿«é€Ÿå®šä½åº”ç”¨åŠŸèƒ½æ¨¡å—ç›¸å…³åŠŸèƒ½çš„å¼€å‘ã€‚å¦‚ä¸Šé¢çš„æ—¥å†ã€‚ 2ã€peek and popè¿™ä¸ªåŠŸèƒ½æ˜¯ä¸€å¥—å…¨æ–°çš„ç”¨æˆ·äº¤äº’æœºåˆ¶ï¼Œåœ¨ä½¿ç”¨3D Touchæ—¶ï¼ŒViewControllerä¸­ä¼šæœ‰å¦‚ä¸‹ä¸‰ä¸ªäº¤äº’é˜¶æ®µï¼š ï¼ˆ1ï¼‰æç¤ºç”¨æˆ·è¿™é‡Œæœ‰3D Touchçš„äº¤äº’ï¼Œä¼šä½¿äº¤äº’æ§ä»¶å‘¨å›´æ¨¡ç³Š ï¼ˆ2ï¼‰ç»§ç»­æ·±æŒ‰ï¼Œä¼šå‡ºç°é¢„è§ˆè§†å›¾ ï¼ˆ3ï¼‰é€šè¿‡è§†å›¾ä¸Šçš„äº¤äº’æ§ä»¶è¿›è¡Œè¿›ä¸€æ­¥äº¤äº’ è¿™ä¸ªæ¨¡å—çš„è®¾è®¡å¯ä»¥åœ¨ç½‘å€è¿æ¥ä¸Šè¿›è¡Œç½‘é¡µçš„é¢„è§ˆäº¤äº’ã€‚ 3.Force PropertiesiOS9ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªæ–°çš„äº¤äº’å‚æ•°:åŠ›åº¦ã€‚æˆ‘ä»¬å¯ä»¥æ£€æµ‹æŸä¸€äº¤äº’çš„åŠ›åº¦å€¼ï¼Œæ¥åšç›¸åº”çš„äº¤äº’å¤„ç†ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åŠ›åº¦æ¥æ§åˆ¶å¿«è¿›çš„å¿«æ…¢ï¼ŒéŸ³é‡å¢åŠ çš„å¿«æ…¢ç­‰ã€‚ äº”ã€Home Screen Quick Actionä½¿ç”¨ä¸ç›¸å…³apiè¯¦è§£iOS9ä¸ºæˆ‘ä»¬æä¾›äº†ä¸¤ç§å±å¹•æ ‡ç­¾ï¼Œåˆ†åˆ«æ˜¯é™æ€æ ‡ç­¾å’ŒåŠ¨æ€æ ‡ç­¾ã€‚ 1ã€é™æ€æ ‡ç­¾é™æ€æ ‡ç­¾æ˜¯æˆ‘ä»¬åœ¨é¡¹ç›®çš„é…ç½®plistæ–‡ä»¶ä¸­é…ç½®çš„æ ‡ç­¾ï¼Œåœ¨ç”¨æˆ·å®‰è£…ç¨‹åºåå°±å¯ä»¥ä½¿ç”¨ï¼Œå¹¶ä¸”æ’åºä¼šåœ¨åŠ¨æ€æ ‡ç­¾çš„å‰é¢ã€‚ æˆ‘ä»¬å…ˆæ¥çœ‹é™æ€æ ‡ç­¾çš„é…ç½®ï¼š é¦–å…ˆï¼Œåœ¨info.plistæ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹é”®å€¼ï¼ˆæˆ‘åœ¨æµ‹è¯•çš„æ—¶å€™ï¼Œç³»ç»Ÿå¹¶æ²¡æœ‰æç¤ºï¼Œåªèƒ½æ‰‹æ‰“ä¸Šå»ï¼‰ï¼š å…ˆæ·»åŠ äº†ä¸€ä¸ªUIApplicationShortcutItemsçš„æ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„ä¸­æ·»åŠ çš„å…ƒç´ å°±æ˜¯å¯¹åº”çš„é™æ€æ ‡ç­¾ï¼Œåœ¨æ¯ä¸ªæ ‡ç­¾ä¸­æˆ‘ä»¬éœ€è¦æ·»åŠ ä¸€äº›è®¾ç½®çš„é”®å€¼ï¼š å¿…å¡«é¡¹ï¼ˆä¸‹é¢ä¸¤ä¸ªé”®å€¼æ˜¯å¿…é¡»è®¾ç½®çš„ï¼‰ï¼š UIApplicationShortcutItemType è¿™ä¸ªé”®å€¼è®¾ç½®ä¸€ä¸ªå¿«æ·é€šé“ç±»å‹çš„å­—ç¬¦ä¸² UIApplicationShortcutItemTitle è¿™ä¸ªé”®å€¼è®¾ç½®æ ‡ç­¾çš„æ ‡é¢˜ é€‰å¡«é¡¹ï¼ˆä¸‹é¢è¿™äº›é”®å€¼ä¸æ˜¯å¿…é¡»è®¾ç½®çš„ï¼‰ï¼š UIApplicationShortcutItemSubtitle è®¾ç½®æ ‡ç­¾çš„å‰¯æ ‡é¢˜ UIApplicationShortcutItemIconType è®¾ç½®æ ‡ç­¾Iconç±»å‹ UIApplicationShortcutItemIconFile è®¾ç½®æ ‡ç­¾çš„Iconæ–‡ä»¶ UIApplicationShortcutItemUserInfo è®¾ç½®ä¿¡æ¯å­—å…¸(ç”¨äºä¼ å€¼) æˆ‘ä»¬å¦‚ä¸Šæˆªå›¾è®¾ç½®åï¼Œè¿è¡Œç¨‹åºï¼Œç”¨æˆ‘ä»¬å‰é¢çš„æ–¹æ³•è¿›è¡Œæµ‹è¯•ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š 2ã€åŠ¨æ€æ ‡ç­¾åŠ¨æ€æ ‡ç­¾æ˜¯æˆ‘ä»¬åœ¨ç¨‹åºä¸­ï¼Œé€šè¿‡ä»£ç æ·»åŠ çš„ï¼Œä¸ä¹‹ç›¸å…³çš„ç±»ï¼Œä¸»è¦æœ‰ä¸‰ä¸ªï¼š UIApplicationShortcutItem åˆ›å»º3DTouchæ ‡ç­¾çš„ç±» UIMutableApplicationShortcutItem åˆ›å»ºå¯å˜çš„3DTouchæ ‡ç­¾çš„ç±» UIApplicationShortcutIcon åˆ›å»ºæ ‡ç­¾ä¸­å›¾ç‰‡Iconçš„ç±» å› ä¸ºè¿™äº›ç±»æ˜¯iOS9ä¸­æ–°å¢åŠ çš„ç±»ï¼Œæ‰€ä»¥å…¶apiçš„å¤æ‚ç¨‹åº¦å¹¶ä¸å¤§ï¼Œä¸‹é¢æˆ‘ä»¬æ¥å¯¹å…¶ä¸­æ–¹æ³•ä¸å±æ€§è¿›è¡Œç®€è¦è®²è§£ï¼š 12345678910@interface UIApplicationShortcutItem : NSObject &lt;NSCopying, NSMutableCopying&gt;//ä¸‹é¢æ˜¯ä¸¤ä¸ªåˆå§‹åŒ–æ–¹æ³• é€šè¿‡è®¾ç½®typeï¼Œtitleç­‰å±æ€§æ¥åˆ›å»ºä¸€ä¸ªæ ‡ç­¾ï¼Œè¿™é‡Œçš„iconæ˜¯UIApplicationShortcutIconå¯¹è±¡ï¼Œæˆ‘ä»¬åé¢å†è¯´- (instancetype)initWithType:(NSString *)type localizedTitle:(NSString *)localizedTitle localizedSubtitle:(nullable NSString *)localizedSubtitle icon:(nullable UIApplicationShortcutIcon *)icon userInfo:(nullable NSDictionary *)userInfo NS_DESIGNATED_INITIALIZER;- (instancetype)initWithType:(NSString *)type localizedTitle:(NSString *)localizedTitle;//ä¸‹é¢è¿™æ˜¯ä¸€äº›åªè¯»çš„å±æ€§ï¼Œè·å–ç›¸åº”çš„å±æ€§å€¼@property (nonatomic, copy, readonly) NSString *type;@property (nonatomic, copy, readonly) NSString *localizedTitle;@property (nullable, nonatomic, copy, readonly) NSString *localizedSubtitle;@property (nullable, nonatomic, copy, readonly) UIApplicationShortcutIcon *icon;@property (nullable, nonatomic, copy, readonly) NSDictionary&lt;NSString *, id &lt;NSSecureCoding&gt;&gt; *userInfo; 123456789//è¿™ä¸ªç±»ç»§æ‰¿äº UIApplicationShortcutItemï¼Œåˆ›å»ºçš„æ ‡ç­¾å¯å˜@interface UIMutableApplicationShortcutItem : UIApplicationShortcutItem@property (nonatomic, copy) NSString *type;@property (nonatomic, copy) NSString *localizedTitle;@property (nullable, nonatomic, copy) NSString *localizedSubtitle;@property (nullable, nonatomic, copy) UIApplicationShortcutIcon *icon;@property (nullable, nonatomic, copy) NSDictionary&lt;NSString *, id &lt;NSSecureCoding&gt;&gt; *userInfo;@end 1234567//è¿™ä¸ªç±»åˆ›å»ºæ ‡ç­¾ä¸­çš„icon@interface UIApplicationShortcutIcon : NSObject &lt;NSCopying&gt;//åˆ›å»ºç³»ç»Ÿé£æ ¼çš„icon+ (instancetype)iconWithType:(UIApplicationShortcutIconType)type;//åˆ›å»ºè‡ªå®šä¹‰çš„å›¾ç‰‡icon+ (instancetype)iconWithTemplateImageName:(NSString *)templateImageName;@end åˆ›å»ºå¥½æ ‡ç­¾åï¼Œå°†å…¶æ·»åŠ å¦‚applicationçš„hortcutItemsæ•°ç»„ä¸­å³å¯ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view, typically from a nib. //åˆ›å»º UIApplicationShortcutItem * item = [[UIApplicationShortcutItem alloc]initWithType:@&quot;two&quot; localizedTitle:@&quot;ç¬¬äºŒä¸ªæ ‡ç­¾&quot; localizedSubtitle:@&quot;çœ‹æˆ‘å“¦&quot; icon:[UIApplicationShortcutIcon iconWithType:UIApplicationShortcutIconTypePlay] userInfo:nil]; æ·»åŠ  [UIApplication sharedApplication].shortcutItems = @[item];&#125; æ•ˆæœå¦‚ä¸‹ï¼š è¿™é‡Œï¼Œå°†ç³»ç»Ÿé£æ ¼iconçš„æšä¸¾åˆ—ä¸¾å¦‚ä¸‹ï¼š 123456789typedef NS_ENUM(NSInteger, UIApplicationShortcutIconType) &#123; UIApplicationShortcutIconTypeCompose,//ç¼–è¾‘çš„å›¾æ ‡ UIApplicationShortcutIconTypePlay,//æ’­æ”¾å›¾æ ‡ UIApplicationShortcutIconTypePause,//æš‚åœå›¾æ ‡ UIApplicationShortcutIconTypeAdd,//æ·»åŠ å›¾æ ‡ UIApplicationShortcutIconTypeLocation,//å®šä½å›¾æ ‡ UIApplicationShortcutIconTypeSearch,//æœç´¢å›¾æ ‡ UIApplicationShortcutIconTypeShare//åˆ†äº«å›¾æ ‡&#125; NS_ENUM_AVAILABLE_IOS(9_0); 3ã€å“åº”æ ‡ç­¾çš„è¡Œä¸ºç±»ä¼¼æ¨é€ï¼Œå½“æˆ‘ä»¬ç‚¹å‡»æ ‡ç­¾è¿›å…¥åº”ç”¨ç¨‹åºæ—¶ï¼Œä¹Ÿå¯ä»¥è¿›è¡Œä¸€äº›æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨applocationä¸­å¢åŠ äº†è¿™æ ·ä¸€ä¸ªæ–¹æ³•ï¼š - (void)application:(UIApplication )application performActionForShortcutItem:(UIApplicationShortcutItem )shortcutItem completionHandler:(void(^)(BOOL succeeded))completionHandler NS_AVAILABLE_IOS(9_0); å½“æˆ‘ä»¬é€šè¿‡æ ‡ç­¾è¿›å…¥appæ—¶ï¼Œå°±ä¼šåœ¨appdelegateä¸­è°ƒç”¨è¿™æ ·ä¸€ä¸ªå›è°ƒï¼Œæˆ‘ä»¬å¯ä»¥è·å–shortcutItemçš„ä¿¡æ¯è¿›è¡Œç›¸å…³é€»è¾‘æ“ä½œã€‚ è¿™é‡Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼šæˆ‘ä»¬åœ¨appçš„å…¥å£å‡½æ•°ï¼š - (BOOL)application:(UIApplication )application didFinishLaunchingWithOptions:(NSDictionary )launchOptions; ä¹Ÿéœ€è¦è¿›è¡Œä¸€ä¸‹åˆ¤æ–­ï¼Œåœ¨launchOptionsä¸­æœ‰UIApplicationLaunchOptionsShortcutItemKeyè¿™æ ·ä¸€ä¸ªé”®ï¼Œé€šè¿‡å®ƒï¼Œæˆ‘ä»¬å¯ä»¥åŒºåˆ«æ˜¯å¦æ˜¯ä»æ ‡ç­¾è¿›å…¥çš„appï¼Œå¦‚æœæ˜¯åˆ™å¤„ç†ç»“æŸé€»è¾‘åï¼Œè¿”å›NOï¼Œé˜²æ­¢å¤„ç†é€»è¾‘è¢«åå¤å›è°ƒã€‚ å‡ ç‚¹æ³¨æ„ï¼š 1ã€å¿«æ·æ ‡ç­¾æœ€å¤šå¯ä»¥åˆ›å»ºå››ä¸ªï¼ŒåŒ…æ‹¬é™æ€çš„å’ŒåŠ¨æ€çš„ã€‚ 2ã€æ¯ä¸ªæ ‡ç­¾çš„é¢˜ç›®å’Œiconæœ€å¤šä¸¤è¡Œï¼Œå¤šå‡ºçš„ä¼šç”¨â€¦çœç•¥ å…­ã€ç»“è¯­å…³äº3DTouchåœ¨UIViewä¸­çš„é¢„è§ˆåŠŸèƒ½å’ŒUITouchä¸­æ–°å¢åŠ çš„åŠ›åº¦å±æ€§çš„åº”ç”¨ï¼Œå› ä¸ºä¸å¥½æ¼”ç¤ºï¼Œè¿™é‡Œå°±ä¸å†æ€»ç»“ï¼Œå¤§å®¶å¯ä»¥é€šè¿‡å¤´æ–‡ä»¶ä¸­ç›¸åº”çš„ç±»å’Œå±æ€§æ¥äº†è§£ä»–ä»¬ï¼Œæœ€åï¼Œå¦‚æœ‰ç–æ¼å’Œé”™è¯¯ä¹‹å¤„ï¼Œæ¬¢è¿æŒ‡æ­£ã€‚ æ¬¢è¿è½¬è½½ è¯·æ³¨æ˜å‡ºå¤„ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOS9ä¸“é¢˜","slug":"iOS9ä¸“é¢˜","permalink":"http://huishao.cc/categories/iOS9ä¸“é¢˜/"}],"tags":[],"keywords":[{"name":"iOS9ä¸“é¢˜","slug":"iOS9ä¸“é¢˜","permalink":"http://huishao.cc/categories/iOS9ä¸“é¢˜/"}]},{"title":"iOSä¸­UISearchBar(æœç´¢æ¡†)ä½¿ç”¨æ€»ç»“","slug":"112iOSä¸­UISearchBar(æœç´¢æ¡†)ä½¿ç”¨æ€»ç»“","date":"2015-09-21T16:00:00.000Z","updated":"2021-07-01T11:26:06.410Z","comments":true,"path":"2015/09/22/112iOSä¸­UISearchBar(æœç´¢æ¡†)ä½¿ç”¨æ€»ç»“/","link":"","permalink":"http://huishao.cc/2015/09/22/112iOSä¸­UISearchBar(æœç´¢æ¡†)ä½¿ç”¨æ€»ç»“/","excerpt":"","text":"iOSä¸­UISearchBar(æœç´¢æ¡†)ä½¿ç”¨æ€»ç»“åˆå§‹åŒ–ï¼šUISearchBarç»§æ‰¿äºUIViewï¼Œæˆ‘ä»¬å¯ä»¥åƒåˆ›å»ºViewé‚£æ ·åˆ›å»ºsearchBar 12 UISearchBar * bar = [[UISearchBar alloc]initWithFrame:CGRectMake(20, 100, 250, 40)]; [self.view addSubview:bar]; @property(nonatomic) UIBarStyle barStyle; è¿™ä¸ªå±æ€§å¯ä»¥è®¾ç½®searchBarçš„æœç´¢æ¡†çš„é£æ ¼ï¼Œæšä¸¾å¦‚ä¸‹ï¼š 1234567typedef NS_ENUM(NSInteger, UIBarStyle) &#123; UIBarStyleDefault = 0,//é»˜è®¤é£æ ¼ ç™½è‰²æœç´¢æ¡†ï¼Œå¤šå‡ºçš„èƒŒæ™¯ä¸ºç°è‰² UIBarStyleBlack = 1,//é»‘è‰²é£æ ¼ï¼Œé»‘è‰²çš„æœç´¢æ¡† //ä¸‹é¢ä¸¤ä¸ªæšä¸¾å·²ç»è¢«ç¦ç”¨ï¼Œä½œç”¨å’Œé»‘è‰²é£æ ¼ä¸€æ · UIBarStyleBlackOpaque = 1, // Deprecated. Use UIBarStyleBlack UIBarStyleBlackTranslucent = 2, // Deprecated. Use UIBarStyleBlack and set the translucent property to YES&#125;; @property(nonatomic,copy) NSString *text; è®¾ç½®æœç´¢æ¡†ä¸­çš„æ–‡å­— @property(nonatomic,copy) NSString *prompt; è¿™ä¸ªå±æ€§çš„å®˜æ–¹è§£é‡Šæ˜¯åœ¨æœç´¢æ¡†é¡¶éƒ¨æ˜¾ç¤ºä¸€è¡Œæ–‡å­—ï¼Œå…¶å®å°±æ˜¯èƒŒæ™¯æ–‡å­—ï¼Œä¸Šå›¾è¯´æ˜ï¼š 12 bar.prompt = @&quot;æœç´¢æ¡†&quot;; bar.text=@&quot;321111111111111111111111111&quot; æ•ˆæœå¦‚ä¸‹ï¼š @property(nonatomic,copy) NSString *placeholder; å’Œå…¶ä»–æ–‡æœ¬è¾“å…¥æ§ä»¶çš„placeholderç›¸åŒï¼Œåœ¨è¾“å…¥æ–‡å­—æ—¶å°±ä¼šæ¶ˆå¤± @property(nonatomic) BOOL showsBookmarkButton; æ˜¯å¦åœ¨æœç´¢æ¡†å³ä¾§æ˜¾ç¤ºä¸€ä¸ªå›¾ä¹¦çš„æŒ‰é’®ï¼Œé»˜è®¤ä¸ºNOï¼ŒYESçš„æ•ˆæœå¦‚ä¸‹ï¼š @property(nonatomic) BOOL showsCancelButton; æ˜¯å¦æ˜¾ç¤ºå–æ¶ˆæŒ‰é’®ï¼Œé»˜è®¤ä¸ºNOï¼ŒYESçš„æ•ˆæœå¦‚ä¸‹ï¼š @property(nonatomic) BOOL showsSearchResultsButton; æ˜¯å¦æ˜¾ç¤ºæœç´¢ç»“æœæŒ‰é’®ï¼Œé»˜è®¤ä¸ºNOï¼ŒYESæ•ˆæœå¦‚ä¸‹ï¼š @property(nonatomic, getter=isSearchResultsButtonSelected) BOOL searchResultsButtonSelected ; è®¾ç½®æœç´¢ç»“æœæŒ‰é’®çš„é€‰ä¸­çŠ¶æ€ - (void)setShowsCancelButton:(BOOL)showsCancelButton animated:(BOOL)animated; è®¾ç½®æ˜¾ç¤ºå–æ¶ˆæŒ‰é’® @property(nonatomic,retain) UIColor *tintColor; è®¾ç½®è¿™ä¸ªé¢œè‰²å€¼ä¼šå½±å“æœç´¢æ¡†ä¸­çš„å…‰æ ‡çš„é¢œè‰² @property(nonatomic,retain) UIColor *barTintColor; è®¾ç½®è¿™ä¸ªé¢œè‰²ä¼šå½±å“æœç´¢æ¡†çš„èƒŒæ™¯é¢œè‰² @property (nonatomic) UISearchBarStyle searchBarStyle; è®¾ç½®æœç´¢æ¡†æ•´ä½“çš„é£æ ¼ï¼Œæšä¸¾å¦‚ä¸‹ï¼š 12345typedef NS_ENUM(NSUInteger, UISearchBarStyle) &#123; UISearchBarStyleDefault, // currently UISearchBarStyleProminent UISearchBarStyleProminent, // æ˜¾ç¤ºèƒŒæ™¯ UISearchBarStyleMinimal // ä¸æ˜¾ç¤ºèƒŒæ™¯&#125; NS_ENUM_AVAILABLE_IOS(7_0); @property(nonatomic,assign,getter=isTranslucent) BOOL translucent; è®¾ç½®æ˜¯å¦åŠé€æ˜ @property(nonatomic) BOOL showsScopeBar ; æ˜¯å¦æ˜¾ç¤ºæœç´¢æ çš„é™„ä»¶é€‰æ‹©æŒ‰é’®è¯•å›¾ï¼Œè¦æƒ³æ˜¾ç¤ºè¿™ä¸ªè¯•å›¾ï¼Œé¦–å…ˆè¦å°†è¿™ä¸ªå±æ€§è®¾ç½®ä¸ºYESï¼Œä¹‹åç»™æŒ‰é’®æ•°ç»„ä¸­æ·»åŠ æŒ‰é’®ï¼Œä½¿ç”¨ä¸‹é¢è¿™ä¸ªå±æ€§ï¼š @property(nonatomic,copy) NSArray *scopeButtonTitles ï¼› è®¾ç½®é€‰æ‹©æŒ‰é’®è¯•å›¾çš„æŒ‰é’®æ ‡é¢˜ @property(nonatomic) NSInteger selectedScopeButtonIndex; è®¾ç½®ä¸€ä¸ªé»˜è®¤çš„é€‰ä¸­æŒ‰é’® 123 bar = [[UISearchBar alloc]initWithFrame:CGRectMake(20, 100, 250, 200)]; bar.showsScopeBar=YES; bar.scopeButtonTitles = @[@&quot;12&quot;,@&quot;2&quot;,@&quot;3&quot;,@&quot;4&quot;]; @property (nonatomic, readwrite, retain) UIView *inputAccessoryView; é”®ç›˜çš„é™„å±è¯•å›¾ @property(nonatomic,retain) UIImage *backgroundImage; è®¾ç½®æœç´¢æ¡†çš„èƒŒæ™¯å›¾æ¡ˆ @property(nonatomic,retain) UIImage *scopeBarBackgroundImage; è®¾ç½®é™„å±é€‰æ‹©æŒ‰é’®è§†å›¾çš„èƒŒæ™¯å›¾æ¡ˆ - (void)setBackgroundImage:(UIImage *)backgroundImage forBarPosition:(UIBarPosition)barPosition barMetrics:(UIBarMetrics)barMetrics ; - (UIImage *)backgroundImageForBarPosition:(UIBarPosition)barPosition barMetrics:(UIBarMetrics)barMetrics è¿™ä¸€å¯¹æ–¹æ³•å¯ä»¥è®¾ç½®å’Œè·å–æŸä¸ªçŠ¶æ€æšä¸¾ä¸‹çš„æœç´¢æ¡†çš„èƒŒæ™¯å›¾æ¡ˆ - (void)setSearchFieldBackgroundImage:(UIImage *)backgroundImage forState:(UIControlState)state; - (UIImage *)searchFieldBackgroundImageForState:(UIControlState)state; è¿™ä¸€å¯¹æ–¹æ³•ç”¨äºè®¾ç½®å’Œè·å–æœç´¢æ¡†ä¸­TextFieldçš„èƒŒæ™¯å›¾æ¡ˆ - (void)setImage:(UIImage *)iconImage forSearchBarIcon:(UISearchBarIcon)icon state:(UIControlState)state ; - (UIImage *)imageForSearchBarIcon:(UISearchBarIcon)icon state:(UIControlState)state ; è¿™ä¸€å¯¹æ–¹æ³•ç”¨äºè·å–å’Œè®¾ç½®æœç´¢æ iconå›¾ç‰‡çš„å›¾æ¡ˆ - (void)setScopeBarButtonBackgroundImage:(UIImage *)backgroundImage forState:(UIControlState)state; - (UIImage *)scopeBarButtonBackgroundImageForState:(UIControlState)state; è¿™ä¸€å¯¹æ–¹æ³•ç”¨äºè®¾ç½®å’Œè·å–æœç´¢æ¡†çš„é™„åŠ é€‰æ‹©æŒ‰é’®è§†å›¾çš„èƒŒæ™¯å›¾æ¡ˆ - (void)setScopeBarButtonDividerImage:(UIImage *)dividerImage forLeftSegmentState:(UIControlState)leftState rightSegmentState:(UIControlState)rightState; - (UIImage *)scopeBarButtonDividerImageForLeftSegmentState:(UIControlState)leftState rightSegmentState:(UIControlState)rightState; è¿™ä¸€å¯¹æ–¹æ³•ç”¨äºè·å–å’Œè®¾ç½®é™„åŠ é€‰æ‹©æŒ‰é’®è§†å›¾ä¸­åˆ‡æ¢æŒ‰é’®çš„å›¾æ¡ˆ - (void)setScopeBarButtonTitleTextAttributes:(NSDictionary *)attributes forState:(UIControlState)state; - (NSDictionary *)scopeBarButtonTitleTextAttributesForState:(UIControlState)state; è¿™ä¸€å¯¹æ–¹æ³•ç”¨äºè®¾ç½®å’Œè·å–åˆ‡æ¢æŒ‰é’®æ ‡é¢˜æ–‡å­—çš„å­—ä½“å±æ€§å­—å…¸ @property(nonatomic) UIOffset searchFieldBackgroundPositionAdjustment; æœç´¢æ–‡å­—åœ¨æœç´¢æ¡†ä¸­çš„ä½ç½®åç§» @property(nonatomic) UIOffset searchTextPositionAdjustment; textfieldåœ¨æœç´¢æ¡†ä¸­çš„ä½ç½®åç§» - (void)setPositionAdjustment:(UIOffset)adjustment forSearchBarIcon:(UISearchBarIcon)icon; - (UIOffset)positionAdjustmentForSearchBarIcon:(UISearchBarIcon)icon; è®¾ç½®æœç´¢æ ä¸­å›¾ç‰‡çš„ä½ç½®åç§»ï¼Œå›¾ç‰‡çš„æšä¸¾å¦‚ä¸‹ï¼š 123456typedef NS_ENUM(NSInteger, UISearchBarIcon) &#123; UISearchBarIconSearch, //æœç´¢å›¾æ ‡ UISearchBarIconClear, // æ¸…é™¤å›¾æ ‡ UISearchBarIconBookmark, // ä¹¦æœ¬å›¾æ ‡ UISearchBarIconResultsList, // ç»“æœåˆ—è¡¨å›¾æ ‡&#125;; ä¸‹é¢æ˜¯æœç´¢æ¡†æ§ä»¶çš„ä¸€äº›ä»£ç†æ–¹æ³•ï¼š - (BOOL)searchBarShouldBeginEditing:(UISearchBar *)searchBar; å°†è¦å¼€å§‹ç¼–è¾‘æ—¶çš„å›è°ƒï¼Œè¿”å›ä¸ºNOï¼Œåˆ™ä¸èƒ½ç¼–è¾‘ - (void)searchBarTextDidBeginEditing:(UISearchBar *)searchBar; å·²ç»å¼€å§‹ç¼–è¾‘æ—¶çš„å›è°ƒ - (BOOL)searchBarShouldEndEditing:(UISearchBar *)searchBar; å°†è¦ç»“æŸç¼–è¾‘æ—¶çš„å›è°ƒ - (void)searchBarTextDidEndEditing:(UISearchBar *)searchBar; å·²ç»ç»“æŸç¼–è¾‘çš„å›è°ƒ - (void)searchBar:(UISearchBar )searchBar textDidChange:(NSString )searchText; ç¼–è¾‘æ–‡å­—æ”¹å˜çš„å›è°ƒ - (BOOL)searchBar:(UISearchBar )searchBar shouldChangeTextInRange:(NSRange)range replacementText:(NSString )text ; ç¼–è¾‘æ–‡å­—æ”¹å˜å‰çš„å›è°ƒï¼Œè¿”å›NOåˆ™ä¸èƒ½åŠ å…¥æ–°çš„ç¼–è¾‘æ–‡å­— - (void)searchBarSearchButtonClicked:(UISearchBar *)searchBar; æœç´¢æŒ‰é’®ç‚¹å‡»çš„å›è°ƒ - (void)searchBarBookmarkButtonClicked:(UISearchBar *)searchBar; ä¹¦æœ¬æŒ‰é’®ç‚¹å‡»çš„å›è°ƒ - (void)searchBarCancelButtonClicked:(UISearchBar *)searchBar; å–æ¶ˆæŒ‰é’®ç‚¹å‡»çš„å›è°ƒ - (void)searchBarResultsListButtonClicked:(UISearchBar *)searchBar; æœç´¢ç»“æœæŒ‰é’®ç‚¹å‡»çš„å›è°ƒ - (void)searchBar:(UISearchBar *)searchBar selectedScopeButtonIndexDidChange:(NSInteger)selectedScope; æœç´¢æ çš„é™„åŠ è¯•å›¾ä¸­åˆ‡æ¢æŒ‰é’®è§¦å‘çš„å›è°ƒ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"macç«¯çš„ä¼˜ç§€æŠ“åŒ…å·¥å…·â€”â€”Charlesä½¿ç”¨","slug":"111macç«¯çš„ä¼˜ç§€æŠ“åŒ…å·¥å…·â€”â€”Charlesä½¿ç”¨","date":"2015-09-19T16:00:00.000Z","updated":"2021-07-01T11:20:23.087Z","comments":true,"path":"2015/09/20/111macç«¯çš„ä¼˜ç§€æŠ“åŒ…å·¥å…·â€”â€”Charlesä½¿ç”¨/","link":"","permalink":"http://huishao.cc/2015/09/20/111macç«¯çš„ä¼˜ç§€æŠ“åŒ…å·¥å…·â€”â€”Charlesä½¿ç”¨/","excerpt":"","text":"macç«¯çš„ä¼˜ç§€æŠ“åŒ…å·¥å…·â€”â€”Charlesä½¿ç”¨ä¸€ã€ç®€ä»‹Charlesæ˜¯macç«¯çš„ä¸€æ¬¾æˆªå–ä¸åˆ†æç½‘ç»œè¯·æ±‚çš„å·¥å…·ï¼Œåœ¨ç½‘ç»œå¼€å‘ä¸­ä½¿ç”¨å…¶ä½œåˆ†æï¼Œå¯ä»¥å¤§å¤§æé«˜æˆ‘ä»¬çš„å¼€å‘æ•ˆç‡ã€‚Charlesæ˜¯æ”¶è´¹è½¯ä»¶ï¼Œä¸€èˆ¬å¯ä»¥è¯•ç”¨ä¸‰åå¤©ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡ç›¸åº”çš„ç ´è§£æ¥è·å–æœåŠ¡ï¼ˆè¿™é‡Œåªåšæ¼”ç¤ºä½¿ç”¨ï¼Œå¸Œæœ›å¤§å®¶è´­ä¹°æ­£ç‰ˆè½¯ä»¶ï¼‰ã€‚Charlesè½¯ä»¶å’Œç ´è§£åŒ…ä¸‹è½½åœ°å€ï¼š[http://pan.baidu.com/s/1ySsUy](http://pan.baidu.com/s/1ySsUy)ã€‚ äºŒã€å®‰è£…ä¸ä½¿ç”¨ä¸‹è½½å¥½å‹ç¼©åŒ…åï¼Œè§£å‹æ‰“å¼€ï¼Œå°†è½¯ä»¶åŒ…æ‹–å…¥åº”ç”¨ç¨‹åºæ–‡ä»¶å¤¹ä¸­ï¼Œè¿™æ—¶å€™ä¸€ä¸ªåŸç‰ˆçš„è½¯ä»¶å°±å¯ä»¥è®©æˆ‘ä»¬ä½¿ç”¨ï¼Œåªæ˜¯æœ‰ä¸€ä¸ªè¯•ç”¨æœŸï¼Œå³é”®å•å‡»æˆ‘ä»¬çš„Charlesåº”ç”¨ï¼Œæ˜¾ç¤ºåŒ…å†…å®¹ï¼š å°†å¦‚ä¸‹æ–‡ä»¶å¤¹ä¸­çš„jaråŒ…æ›¿æ¢ä¸ºæˆ‘ä»¬ç ´è§£æ–‡ä»¶å¤¹ä¸­çš„jaråŒ…ï¼š ä¸‰ã€ä½¿ç”¨Charlesåœ¨macä¸Šè¿›è¡ŒæŠ“åŒ…åˆ†æåœ¨è½¯ä»¶å®‰è£…å®Œæˆåï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥åœ¨macä¸Šæˆªå–ä¸€èˆ¬çš„ç½‘ç»œè¯·æ±‚äº†ï¼Œæ‰“å¼€è½¯ä»¶ï¼Œå°†Proxyè®¾ç½®ä¸­çš„Mac OS X Proxyå‹¾é€‰ï¼Œè®¾ç½®ä¸ºç½‘ç»œä»£ç†ï¼Œè¿™æ—¶å€™å¦‚æœå‘ç”Ÿç½‘ç»œè¯·æ±‚ï¼Œå°±å¯ä»¥è¢«Charlesæˆªè·åˆ° å¦‚æœæˆ‘ä»¬éœ€è¦æˆªå–SSLåè®®çš„ç½‘ç»œè¯·æ±‚ï¼Œè¿™æ—¶å€™æˆ‘ä»¬è¿˜éœ€è¦å®‰è£…ä¸€ä¸ªè¯ä¹¦ï¼šhttp://yun.baidu.com/s/1o6J2Crgã€‚æ³¨æ„å°†è¯ä¹¦æƒé™è®¾ç½®ä¸ºå§‹ç»ˆä¿¡ä»»ã€‚ æŠ“è·ä¿¡æ¯çš„ç•Œé¢å¦‚ä¸‹ï¼š è½¯ä»¶çš„åŠŸèƒ½ååˆ†å¼ºå¤§ï¼ŒStructureæ˜¯å°†è¯·æ±‚æŒ‰åŸŸåæ’åºï¼ŒSequenceæ˜¯å°†è¯·æ±‚æ—¶é—´æ’åºï¼Œä¸‹é¢çš„Requestå’ŒResponseåˆ†åˆ«ä¸ºè¯·æ±‚çš„æ•°æ®åŒ…å’Œè¿”å›çš„æ•°æ®åŒ…ï¼Œå¦‚æœæ˜¯jsonæ•°æ®ï¼Œè¿˜ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬è§£ææ ¼å¼ã€‚ æ³¨æ„ï¼šå¦‚æœiOSæ¨¡æ‹Ÿå™¨ä¸ŠæŠ“ä¸åˆ°è¯·æ±‚åŒ…ï¼Œé‡å¯æ¨¡æ‹Ÿå™¨å³å¯ã€‚ å››ã€åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šè¿›è¡ŒæŠ“åŒ…å¯¼å…¥è¯ä¹¦çš„è¿‡ç¨‹å’Œåœ¨macä¸Šä¸€æ ·ï¼Œåœ¨ç§»åŠ¨è®¾å¤‡ä¸Šè®¿é—®[http://yun.baidu.com/s/1o6J2Crg](http://yun.baidu.com/s/1o6J2Crg)ã€‚è¿›è¡Œè¯ä¹¦ä¸‹è½½ï¼Œå®‰è£…ï¼š åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šæˆªè·ç½‘ç»œè¯·æ±‚ï¼Œæˆ‘ä»¬çš„ç§»åŠ¨è®¾å¤‡å¿…é¡»å’Œç”µè„‘åœ¨åŒä¸€ç½‘æ®µï¼Œåœ¨æˆ‘ä»¬ç”µè„‘çš„ç½‘ç»œè®¾ç½®ä¸­æŸ¥çœ‹IPåœ°å€ï¼Œç„¶ååœ¨ç§»åŠ¨è®¾å¤‡ä¸Šç‚¹å‡»æˆ‘ä»¬è¿æ¥çš„ç”µè„‘ä¸Šçš„ç½‘ç»œï¼Œåœ¨ä»£ç†ä¸€æ ä¸­ï¼Œé€‰æ‹©æ‰‹åŠ¨ï¼Œå°†æˆ‘ä»¬åˆšæ‰æŸ¥çœ‹çš„ipåœ°å€å¡«å†™åœ¨è¿™é‡Œï¼Œå¹¶ä¸”è®¾ç½®ä¸€ä¸ªç«¯å£å·ã€‚ åœ¨Charlesä¸­çš„Proxy settingä¸­å¦‚ä¸‹å‹¾é€‰å¹¶é…ç½®ç«¯å£å· æˆ‘ä»¬åœ¨è®¾å¤‡ä¸Šå†è®¿é—®ç½‘ç»œï¼Œè¯·æ±‚åŒ…å°±å¯ä»¥è¢«æˆ‘ä»¬æŠ“å–åˆ°ã€‚ äº”ã€Charlesçš„æ›´å¤šåº”ç”¨1ã€è¿‡æ»¤ç½‘ç»œè¯·æ±‚æœ‰æ—¶å€™æˆ‘ä»¬åªæƒ³æŠ“å–æŸä¸ªä¸»æœºçš„ç½‘ç»œè¯·æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®è¿‡æ»¤ç½‘ç»œï¼Œåœ¨Proxyèœå•ä¸­çš„Recording Settingä¸­ï¼Œæˆ‘ä»¬é€‰æ‹©includeæ ‡ç­¾ï¼Œå¯ä»¥åœ¨é‡Œé¢æ·»åŠ ä¸€ä¸ªç™½åå•ï¼Œè¿™æ ·Charleså°±åªæˆªå–åœ¨è¿™ä¸ªä¸»æœºä¸‹çš„è¯·æ±‚ï¼š 2ã€æ¨¡æ‹Ÿé™é€Ÿç½‘ç»œå¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æµ‹è¯•åœ¨ç½‘ç»œä¸ä½³æ—¶åº”ç”¨è¯·æ±‚çš„ç›¸å…³æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥æ¨¡æ‹Ÿè®¾ç½®é™é€Ÿç½‘ç»œï¼Œåœ¨Proxyèœå•ä¸­çš„Throttle Settingsä¸­å°†ï¼ŒEnable Throttlingå‹¾é€‰ï¼Œå¹¶å¯ä»¥åœ¨ä¸‹é¢è¿›è¡Œç½‘è·¯è®¾ç½®ï¼Œonly for selected hostå¯ä»¥è®¾ç½®ä¸€ä¸ªæŒ‡å®šçš„ä¸»æœºè®¿é—®è¿›è¡Œé™åˆ¶ç½‘ç»œã€‚ 3ã€ä¿®æ”¹ç½‘ç»œä¿¡æ¯ï¼Œå¤šæ¬¡è¯·æ±‚åœ¨æµ‹è¯•æ¥å£æ—¶ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦åå¤è¿›è¡Œä¸åŒå‚æ•°çš„æ¥å£è¯·æ±‚ï¼ŒCharlesä¹Ÿæ”¯æŒæˆ‘ä»¬è¿›è¡Œè¯·æ±‚å‚æ•°çš„ä¿®æ”¹å’Œå¤šæ¬¡è¯·æ±‚ï¼Œåœ¨è¯·æ±‚ä¸Šç‚¹å‡»å³é”®ï¼Œç°åˆ™editï¼š å…¶ä¸­çš„å‚æ•°ï¼Œè¯·æ±‚ç±»å‹ç­‰æˆ‘ä»¬éƒ½å¯ä»¥ä¿®æ”¹ï¼Œä¹‹åç‚¹å‡»executeè¿›è¡Œé‡æ–°è¯·æ±‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"è®¾è®¡æ¨¡å¼ä¸¤ä¸‰è°ˆ","slug":"è®¾è®¡æ¨¡å¼ä¸¤ä¸‰è°ˆ","permalink":"http://huishao.cc/categories/è®¾è®¡æ¨¡å¼ä¸¤ä¸‰è°ˆ/"}],"tags":[],"keywords":[{"name":"è®¾è®¡æ¨¡å¼ä¸¤ä¸‰è°ˆ","slug":"è®¾è®¡æ¨¡å¼ä¸¤ä¸‰è°ˆ","permalink":"http://huishao.cc/categories/è®¾è®¡æ¨¡å¼ä¸¤ä¸‰è°ˆ/"}]},{"title":"å·¥å‚è®¾è®¡æ¨¡å¼çš„æ¢è®¨â€”â€”iOSç±»ç°‡çš„åº”ç”¨åˆ†æ","slug":"110å·¥å‚è®¾è®¡æ¨¡å¼çš„æ¢è®¨â€”â€”iOSç±»ç°‡çš„åº”ç”¨åˆ†æ","date":"2015-09-17T16:00:00.000Z","updated":"2021-07-01T11:18:02.308Z","comments":true,"path":"2015/09/18/110å·¥å‚è®¾è®¡æ¨¡å¼çš„æ¢è®¨â€”â€”iOSç±»ç°‡çš„åº”ç”¨åˆ†æ/","link":"","permalink":"http://huishao.cc/2015/09/18/110å·¥å‚è®¾è®¡æ¨¡å¼çš„æ¢è®¨â€”â€”iOSç±»ç°‡çš„åº”ç”¨åˆ†æ/","excerpt":"","text":"å·¥å‚è®¾è®¡æ¨¡å¼çš„æ¢è®¨â€”â€”iOSç±»ç°‡çš„åº”ç”¨åˆ†æä¸€ã€ä½•ä¸ºè®¾è®¡æ¨¡å¼ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼ï¼Œå…ˆæ¥çœ‹æ®µåº¦å¨˜çš„è¯ï¼š è®¾è®¡æ¨¡å¼ï¼ˆDesign patternï¼‰æ˜¯ä¸€å¥—è¢«åå¤ä½¿ç”¨ã€å¤šæ•°äººçŸ¥æ™“çš„ã€ç»è¿‡åˆ†ç±»ç¼–ç›®çš„ã€ä»£ç è®¾è®¡ç»éªŒçš„æ€»ç»“ã€‚ä½¿ç”¨è®¾è®¡æ¨¡å¼æ˜¯ä¸ºäº†å¯é‡ç”¨ä»£ç ã€è®©ä»£ç æ›´å®¹æ˜“è¢«ä»–äººç†è§£ã€ä¿è¯ä»£ç å¯é æ€§ã€‚ æ¯«æ— ç–‘é—®ï¼Œè®¾è®¡æ¨¡å¼äºå·±äºä»–äººäºç³»ç»Ÿéƒ½æ˜¯å¤šèµ¢çš„ï¼›è®¾è®¡æ¨¡å¼ä½¿ä»£ç ç¼–åˆ¶çœŸæ­£å·¥ç¨‹åŒ–ï¼›è®¾è®¡æ¨¡å¼æ˜¯è½¯ä»¶å·¥ç¨‹çš„åŸºçŸ³è„‰ç»œï¼Œå¦‚åŒå¤§å¦çš„ç»“æ„ä¸€æ ·ã€‚ å…¶å®æˆ‘ä»¬ä¸éœ€è¦è¿™ä¹ˆä¸“ä¸šï¼Œåœ¨æˆ‘çš„ç†è§£ï¼Œè®¾è®¡æ¨¡å¼å°±æ˜¯ä¸€ç§è§„èŒƒåŒ–çš„ç¼–ç¨‹ä¹ æƒ¯ï¼Œå…»æˆäº†è¿™æ ·çš„æ€æƒ³ä¸ä¹ æƒ¯ï¼Œå¯¹æˆ‘ä»¬çš„ä»£ç ï¼Œæ€»æ˜¯æœ‰å¥½å¤„äº†ã€‚ äºŒã€å·¥å‚è®¾è®¡æ¨¡å¼é¦–å…ˆï¼Œå·¥å‚è®¾è®¡æ¨¡å¼æ˜¯åˆ›å»ºå¯¹è±¡çš„ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œä¸€ä¸ªä¸¥æ ¼æ„ä¹‰ä¸Šçš„å·¥å‚è®¾è®¡æ¨¡å¼åº”è¯¥æ˜¯ä¸€ä¸ªçº¯è™šçš„æ„é€ æ–¹æ³•ã€‚ç”±å­ç±»è¿›è¡Œå…·ä½“å¯¹è±¡çš„åˆ›å»ºï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·ç†è§£ï¼šç°åœ¨æœ‰ä¸€ä¸ªç²å°‘ç‰Œåˆ¶é€ å·¥å‚ï¼Œè¿™ä¸ªå·¥å‚å¯ä»¥åˆ¶é€ å¤šç§äº¤é€šå·¥å…·ï¼Œæˆ‘å¤§èƒ†ä¸€äº›ï¼Œå‡è®¾å®ƒå¯ä»¥åˆ¶é€ é£æœºï¼Œè½®èˆ¹ã€‚å°æ±½è½¦ï¼Œå…¬äº¤è½¦ï¼Œå‡ºç§Ÿå‡ºå’Œè‡ªè¡Œè½¦ï¼Œé‚£ä¹ˆï¼Œè¿™äº›ä¸åŒçš„è½¦ç§è™½ç„¶åŠŸèƒ½å’Œå¤§ç±»åˆ«ç»Ÿä¸€ï¼Œä½†æ˜¯ä»–ä»¬çš„ä¸ªä½“å·®å¼‚ä¹Ÿæ˜¯å¤©åœ°ä¹‹åˆ«ï¼Œå°±æ¯”å¦‚æˆ‘é£æœºä¸€å°æ—¶å¯ä»¥é£5000å…¬é‡Œï¼Œè‡ªè¡Œè½¦æ‹¼æ­»äº†åŠ²ä¹Ÿä¸ä¸€å®šèƒ½éª‘20å…¬é‡Œã€‚æ‰€ä»¥ï¼Œå¦‚æœç²å°‘è¿™ä¸ªå¤§å·¥å‚è¦ç”Ÿäº§ä»–ä»¬ï¼Œä¹Ÿä¸å¯èƒ½æŠŠä»–ä»¬æ”¾åœ¨ä¸€èµ·ç”Ÿäº§ã€‚ä¸€ä¸ªæ¯”è¾ƒæ˜æ™ºçš„å†³å®šæ˜¯ï¼Œå¼€ç«‹åˆ†å‚ï¼Œæ¯”å¦‚ç²å°‘é£æœºå·¥å‚ä¸“é—¨ç”Ÿäº§é£æœºï¼Œç²å°‘è‡ªè¡Œè½¦å·¥å‚ä¸“é—¨ç”Ÿäº§è‡ªè¡Œè½¦ã€‚ å¥½äº†ï¼Œå¦‚æœå°†æˆ‘ä»¬è¿™ç§äººç±»ä¸–ç•Œçš„æ€ç»´è¿ç”¨äºç¨‹åºä¸–ç•Œï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é€šè¿‡å·¥å‚çš„è¿™ç§æ€ç»´æ–¹å¼æ¥å°†ä¸€äº›å¤§ç±»æŠ½è±¡ä¸ºå·¥å‚ï¼Œé€šè¿‡å®šä¹‰æ¥å£æˆ–è€…è¯´æ˜¯å®šä¹‰è™šå‡½æ•°æ¥è§„èŒƒè¿™ä¸ªå¤§å·¥å‚çš„ç”Ÿäº§è§„æ¨¡å’Œæµç¨‹ï¼Œç”±å…¶å­ç±»æ¥å…·ä½“å®ç°è¿™äº›æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯ç”±ä¸€ä¸ªä¸ªå°çš„åˆ†å‚æ¥æ˜ç¡®çš„ç”Ÿäº§æˆ‘ä»¬éœ€è¦çš„ä¸œè¥¿ã€‚è¿™å°±æ˜¯å·¥å‚è®¾è®¡æ¨¡å¼çš„åŸºæœ¬æ€è·¯ã€‚ ä¸‰ã€å·¥å‚çš„è®¾è®¡æ¨¡å¼æœ‰ä»€ä¹ˆç”¨è®¸å¤šå¼€å‘è€…æˆ–è®¸å¹¶ä¸åœ¨æ„è®¾è®¡æ¨¡å¼è¿™ä¸ªä¸œè¥¿ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šæƒ³ï¼Œæˆ‘å®ç°æˆ‘çš„åŠŸèƒ½å°±å¯ä»¥äº†ï¼Œä½ ç®¡æˆ‘æ€ä¹ˆè®¾è®¡å‘¢ã€‚åœ¨è¿™ç¯‡åšå®¢çš„å¼€å¤´å°±è¯´åˆ°ï¼Œåœ¨æˆ‘ç†è§£ä¸­ï¼Œè®¾è®¡æ¨¡å¼å°±æ˜¯ä¸€ç§ç¼–ç¨‹ä¹ æƒ¯å’Œè§„èŒƒï¼Œæ›´æ˜¯ä¸€ç§ä¼—å¤šå¼€å‘è€…æ‘¸ç´¢å‡ºæ¥çš„ç»éªŒï¼Œè¿™å°±åƒå†œä¸šä¸Šçš„å¥—ç§é—´ç§å’Œä½ éšä¾¿ç§ï¼Œå“ªä¸€ç§æ•ˆç‡é«˜ï¼Œæ”¶æˆå¥½ï¼Œä¸è¨€è€Œå–»ã€‚é‚£ä¹ˆåœ¨è½¯ä»¶è®¾è®¡ä¸­ï¼Œå·¥å‚æ¨¡å¼çš„åº”ç”¨åœ¨å“ªå‘¢ï¼Ÿ æˆ‘ä»¬å…ˆæ¥ä½“éªŒä¸€ä¸‹åœ¨iOSå¼€å‘ä¸­ï¼Œä¸€äº›ä½¿ç”¨å·¥å‚è®¾è®¡æ¨¡å¼çš„ç³»ç»Ÿç±»ä¸ºæˆ‘ä»¬å¸¦æ¥çš„ä¾¿æ·ä¹‹å¤„ï¼š 1ã€è®¤è¯†ä¸€ä¸ªåè¯ ç±»ç°‡åœ¨iOSçš„Foundationæ¡†æ¶ä¸­ï¼Œç±»ç°‡æ˜¯ä¸€ç§å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œä»–å°†ä¸€äº›ç›¸è¿‘çš„ï¼Œç§æœ‰çš„ï¼Œå…·ä½“çš„å­ç±»ç»„åˆåœ¨ä¸€ä¸ªå®ä½“çš„æŠ½è±¡ç±»ä¸‹é¢ï¼Œæˆ‘ç§°è¿™ä¸ªæŠ½è±¡ç±»ä¸ºå®ä½“çš„ï¼Œæ˜¯å› ä¸ºå’Œæˆ‘ä»¬äº¤äº’çš„æ¥å£æ‰¿è½½è€…ï¼Œå°±æ˜¯è¿™ä¸ªæŠ½è±¡å¤§ç±»ã€‚æˆ‘ä»¬å¹³æ—¶å¸¸ç”¨çš„ä¸‰å¤§ç±»ï¼ŒNSString,NSArray,NSDictionaryéƒ½æ˜¯ç±»ç°‡ï¼Œæˆ‘ä»¬é€šè¿‡ä»–ä»¬åˆ›å»ºçš„å¯¹è±¡éƒ½æ˜¯å…¶å­ç±»å¯¹è±¡çš„å®ä¾‹åŒ–ï¼Œå¹¶ä¸æ˜¯ä»–æœ¬èº«çš„å®ä¾‹åŒ–ï¼Œæˆ‘ä»¬è¿˜é€šè¿‡ä¸Šé¢çš„ä¾‹å­æ¥ç†è§£ï¼Œæˆ‘ä¹°äº†ä¸€è¾†ç²å°‘å°æ±½è½¦ï¼Œè¿™ä¸¤æ±½è½¦çš„ç”Ÿäº§å®é™…æ˜¯åœ¨ç²å°‘æ±½è½¦å·¥å‚ç”Ÿäº§çš„ï¼Œä½†æ˜¯æˆ‘ä¸ªäººä¼šä¾ç„¶è®¤ä¸ºï¼Œè¿™æ˜¯ç²å°‘å·¥å‚å‡ºäº§çš„æ±½è½¦ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰“å°ç±»åæ¥éªŒè¯ï¼š 12NSString * str = [[NSString alloc]initWithCString:&quot;2&quot; encoding:0]; NSLog(@&quot;%@&quot;,[str class]); ç»“æœå¦‚ä¸‹ï¼š å¯ä»¥çœ‹åˆ°ï¼ŒçœŸå®çš„å¯¹è±¡æ˜¯NSStringçš„å­ç±»__NSCFStringè¿›è¡Œå®ä¾‹åŒ–çš„ã€‚ 2.è¿™æ ·è®¾è®¡çš„ä¼˜åŠ¿åœ¨å“ªå¦‚æœä½ é€šè¿‡NSStringçš„äº‹ä¾‹è¿˜æ˜¯æ— æ³•ä½“ä¼šåˆ°ç±»ç°‡ï¼Œä¹Ÿå°±æ˜¯å·¥å‚è®¾è®¡æ¨¡å¼çš„ä¼˜åŠ¿ï¼Œé‚£ä¹ˆä¸‹é¢è¿™ä¸ªä¾‹å­ä½ ä¸€å®šç»å¸¸é‡åˆ°:NSNumberã€‚æˆ‘ä»¬åœ¨åˆ›å»ºæ•°å­—å¯¹è±¡çš„æ—¶å€™ï¼Œé€šå¸¸ä¼šè¿™æ ·è€ƒè™‘ï¼Œå¦‚æœæ˜¯intå€¼ï¼Œæˆ‘éœ€è¦ä¸€ä¸ªIntNumberçš„ç±»ï¼Œfloatå€¼ï¼Œæˆ‘éœ€è¦ä¸€ä¸ªFloatNumberç±»ï¼Œå¦‚æœfoundationæ¡†æ¶çœŸè¿™ä¹ˆè®¾è®¡çš„è¯ï¼Œé‚£ä¹ˆä½ ç°åœ¨å°±ç—›è‹¦äº†ï¼Œä½ ä¸ä»…è¦è®°ä½å¥½å¤šè¿™æ ·ç›¸ä¼¼çš„ç±»ï¼Œè°ƒç”¨æ–¹æ³•æ—¶ä¹Ÿè¦ç›¸åº”çš„å¯¹è±¡è°ƒå…¶å†…çš„æ–¹æ³•ï¼Œè¿™ä½¿å¼€å‘è€…çš„å¼€å‘å˜å¾—æ›´åŠ ç¹çï¼Œå¹¶ä¸”å¯¹äºå¼€å‘è€…æ¥è¯´ï¼Œæˆ‘å¹¶ä¸éœ€è¦çŸ¥é“å…·ä½“æˆ‘åˆ›å»ºäº†ä»€ä¹ˆç±»ï¼Œæˆ‘åªæ˜¯æƒ³è®©ä»–å®Œæˆæ—¢å®šçš„æ–¹æ³•ã€‚è¯´çš„æ›´é€šä¿—ä¸€ç‚¹ï¼Œè¿˜æ˜¯ä¸Šé¢çš„åˆ¶é€ å·¥å‚ï¼Œä½¿ç”¨è€…å¹¶ä¸åœ¨ä¹å…·ä½“è¿™ä¸ªäº¤é€šå·¥å…·æ˜¯å“ªä¸ªåœ°æ–¹ç”Ÿäº§å‡ºæ¥çš„ï¼Œåªè¦å®ƒä»·é’±å’Œé€Ÿåº¦éƒ½æ˜¯ä½¿ç”¨è€…é¢„æœŸçš„ç»“æœå°±å¥½äº†ã€‚ 3.å·¥å‚è®¾è®¡æ¨¡å¼çš„åº”ç”¨é€šè¿‡ä¸Šé¢çš„åˆ†æï¼Œæˆ‘ä»¬å¤§è‡´å¯ä»¥æ€»ç»“å‡ºå·¥å‚è¿™ç§è®¾è®¡æ¨¡å¼çš„åº”ç”¨åœºæ™¯ï¼š ï¼ˆ1ï¼‰å½“ä¸€ä¸ªç±»å¹¶ä¸çŸ¥é“è¦åˆ›å»ºçš„å…·ä½“å¯¹è±¡æ˜¯ä»€ä¹ˆï¼Œäº¤ç”±å­ç±»å¤„ç† ï¼ˆ2ï¼‰å½“ä¸€äº›ç±»æœ‰ç›¸ä¼¼çš„è¡Œä¸ºå’Œç»“æ„ï¼Œåªæ˜¯å…·ä½“å®ç°ä¸åŒæ—¶ï¼Œå¯ä»¥æŠ½è±¡å‡ºå·¥å‚ ï¼ˆ3ï¼‰ä½¿ç”¨è€…å¹¶ä¸åœ¨ä¹å…·ä½“ç±»å‹ï¼Œåªåœ¨ä¹æ¥å£çº¦å®šçš„è¡Œä¸ºï¼Œå¹¶ä¸”è¿™ç§è¡Œä¸ºæœ‰ä¸ªä½“å·®å¼‚ å››ã€åœ¨iOSä¸­æ¨¡æ‹Ÿä¸€ä¸ªå·¥å‚åŒæ ·æ˜¯ä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬æ¥ç”¨ä»£ç æ¨¡æ‹Ÿä¸€ä¸‹ï¼š é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæŠ½è±¡çš„å·¥ç¨‹ç±»ï¼Œåœ¨å…¶ä¸­åˆ›å»ºä¸€äº›ç§æœ‰çš„å­ç±»ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546#import &lt;Foundation/Foundation.h&gt;//äº¤é€šå·¥å…·çš„æšä¸¾typedef enum &#123;car,boat,airport,bycicle,bus,taxi&#125;ToolsName;//ä»£ç†@protocol TransPortationDelegate &lt;NSObject&gt;-(void)toHome:(Class)class;@end//æŠ½è±¡å·¥å‚ç±»@interface TramsPortationFactory : NSObject+(TramsPortationFactory*)buyTool:(ToolsName)tool;//å…±æœ‰çš„æ–¹æ³•æ¥å£-(int)shouldPayMoney;-(void)run;@property(nonatomic,strong)id&lt;TransPortationDelegate&gt;delegate;@end//å…·ä½“å®ç°çš„å­ç±»@interface CarFactory : TramsPortationFactory@end@interface BoatFactory : TramsPortationFactory@end@interface AirportFactory : TramsPortationFactory@end@interface BycicleFactory : TramsPortationFactory@end@interface TaxiFactory : TramsPortationFactory@end@interface BusFactory : TramsPortationFactory@end å®ç°æ–‡ä»¶å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091#import &quot;TramsPortationFactory.h&quot;@implementation TramsPortationFactory//å®ç°çš„åˆ›å»ºæ–¹æ³•+(TramsPortationFactory*)buyTool:(ToolsName)tool&#123; switch (tool) &#123; case car: return [[CarFactory alloc]init]; break; case airport: return [[AirportFactory alloc]init]; break; case bycicle: return [[BycicleFactory alloc]init]; break; case boat: return [[BoatFactory alloc]init]; break; case taxi: return [[TaxiFactory alloc]init]; break; case bus: return [[BusFactory alloc]init]; break; default: break; &#125;&#125;-(int)shouldPayMoney&#123; return 0;&#125;-(void)run&#123; [self.delegate toHome:[self class]];&#125;@end//å„è‡ªç±»å®ç°å…·ä½“çš„è¡Œä¸º@implementation CarFactory-(int)shouldPayMoney&#123; return 50;&#125;-(void)run&#123; [super run]; NSLog(@&quot;car to home&quot;);&#125;@end@implementation AirportFactory-(int)shouldPayMoney&#123; return 1000;&#125;-(void)run&#123; [super run]; NSLog(@&quot;fly to home&quot;);&#125;@end@implementation BoatFactory-(int)shouldPayMoney&#123; return 300;&#125;-(void)run&#123; [super run]; NSLog(@&quot;boat to home&quot;);&#125;@end@implementation BusFactory-(int)shouldPayMoney&#123; return 10;&#125;-(void)run&#123; [super run]; NSLog(@&quot;bus to home&quot;);&#125;@end@implementation BycicleFactory-(int)shouldPayMoney&#123; return 0;&#125;-(void)run&#123; [super run]; NSLog(@&quot;run to home&quot;);&#125;@end@implementation TaxiFactory-(int)shouldPayMoney&#123; return 100;&#125;-(void)run&#123; [super run]; NSLog(@&quot;go to home&quot;);&#125;@end è¿™æ ·ï¼Œæˆ‘ä»¬çš„ä¸€ä¸ªç”Ÿäº§å·¥å‚å°±å®Œæˆäº†ï¼Œåœ¨å¤–é¢ï¼Œæˆ‘ä»¬åªéœ€è¦çŸ¥é“ä¸€ä¸ªç±»ï¼Œæˆ‘ä»¬çš„æŠ½è±¡çˆ¶ç±»ï¼Œå°±å¯ä»¥å®ç°ä¸ªå­ç±»çš„è¡Œä¸ºï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516- (void)viewDidLoad &#123; [super viewDidLoad]; TramsPortationFactory * tool = [TramsPortationFactory buyTool:car]; tool.delegate=self; [tool run]; NSLog(@&quot;èŠ±äº†:%dé’±&quot;,[tool shouldPayMoney]); TramsPortationFactory * tool2 = [TramsPortationFactory buyTool:airport]; tool2.delegate=self; [tool2 run]; NSLog(@&quot;èŠ±äº†:%dé’±&quot;,[tool2 shouldPayMoney]); &#125;-(void)toHome:(Class)class&#123; NSLog(@&quot;%@&quot;,NSStringFromClass(class));&#125; å¯ä»¥çœ‹åˆ°ï¼Œå¯¹äºå¼€å‘è€…ï¼Œæˆ‘ä»¬å¹¶ä¸çŸ¥æ™“CarFactoryç±»çš„å­˜åœ¨ï¼Œæˆ‘ä»¬åªéœ€è¦é€šè¿‡TramsPortationFactoryç±»ï¼Œå°±èƒ½å¤Ÿæ“ä½œå„ç§äº¤é€šå·¥å…·ï¼Œè¾¾åˆ°æˆ‘ä»¬çš„éœ€æ±‚ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"è®¾è®¡æ¨¡å¼ä¸¤ä¸‰è°ˆ","slug":"è®¾è®¡æ¨¡å¼ä¸¤ä¸‰è°ˆ","permalink":"http://huishao.cc/categories/è®¾è®¡æ¨¡å¼ä¸¤ä¸‰è°ˆ/"}],"tags":[],"keywords":[{"name":"è®¾è®¡æ¨¡å¼ä¸¤ä¸‰è°ˆ","slug":"è®¾è®¡æ¨¡å¼ä¸¤ä¸‰è°ˆ","permalink":"http://huishao.cc/categories/è®¾è®¡æ¨¡å¼ä¸¤ä¸‰è°ˆ/"}]},{"title":"iOSç”Ÿæˆæ ‡å‡†çš„æ³¨é‡Šå·¥å…·â€”â€”VVDocumenter","slug":"109iOSç”Ÿæˆæ ‡å‡†çš„æ³¨é‡Šå·¥å…·â€”â€”VVDocumenter","date":"2015-09-15T16:00:00.000Z","updated":"2021-07-01T11:16:00.753Z","comments":true,"path":"2015/09/16/109iOSç”Ÿæˆæ ‡å‡†çš„æ³¨é‡Šå·¥å…·â€”â€”VVDocumenter/","link":"","permalink":"http://huishao.cc/2015/09/16/109iOSç”Ÿæˆæ ‡å‡†çš„æ³¨é‡Šå·¥å…·â€”â€”VVDocumenter/","excerpt":"","text":"iOSç”Ÿæˆæ ‡å‡†çš„æ³¨é‡Šå·¥å…·â€”â€”VVDocumenteråœ¨ç¨‹åºå¼€å‘ä¸­ï¼Œæˆ‘ä»¬å…ä¸äº†è¦å†™è®¸å¤šæ³¨é‡Šï¼Œæ–¹ä¾¿å¸®åˆ«äººä¹Ÿæ–¹ä¾¿æˆ‘ä»¬è‡ªå·±ä»¥åæ£€æŸ¥æˆ‘ä»¬çš„ä»£ç ã€‚ç„¶è€Œï¼Œå†™æ³¨é‡Šæ˜¯ä¸€ä»¶ååˆ†æµªè´¹æˆ‘ä»¬æ—¶é—´ä¸ç²¾åŠ›çš„äº‹ï¼Œè¦å†™ç¬¦åˆæ–‡æ¡£æ ¼å¼çš„æ³¨é‡Šï¼Œæ›´æ˜¯ä¼šæ¶ˆè€—æˆ‘ä»¬å¾ˆå¤šçš„åŠŸå¤«ï¼Œå¹¸è¿çš„æ˜¯ï¼ŒVVDocumenterå¯ä»¥å¸®æˆ‘ä»¬å¾ˆå¤§çš„å¿™ã€‚ gitHubåœ°å€ï¼š[https://github.com/onevcat/VVDocumenter-Xcode](https://github.com/onevcat/VVDocumenter-Xcode)ã€‚ å®‰è£…ä¸ä½¿ç”¨æ–¹æ³•ï¼šä¸‹è½½githubæºç ï¼Œä½¿ç”¨xcodeæ‰“å¼€å·¥ç¨‹ï¼Œè¿è¡Œä¸€ä¸‹ï¼Œå¦‚æœæˆåŠŸï¼Œæ’ä»¶å°±å®‰è£…å¥½äº†ï¼Œè¿™æ—¶ï¼Œæˆ‘ä»¬å¿…é¡»å°†xcodeé‡æ–°å¯åŠ¨ä¸€ä¸‹ï¼Œæ‰å¯ä»¥ä½¿ç”¨ã€‚ é‡å¯xcodeï¼Œåœ¨ä»»æ„ä¸€ä¸ªåœ°æ–¹è¾“å…¥///ï¼Œå³ä¼šè‡ªåŠ¨å‡ºç°å¦‚ä¸‹çš„æ³¨é‡Šæ¨¡æ¿ï¼Œå‚æ•°éƒ¨åˆ†å·²ç»ç”±å ä½ç¬¦å†™å¥½ 123456/** * &lt;#Description#&gt; * * @param data &lt;#data description#&gt; */- (void)updateWithData:(id)data; æ˜¯ä¸æ˜¯å†™æ³¨é‡Šå˜æˆäº†ä¸€ä»¶éå¸¸æœ‰è¶£çš„äº‹ï¼Œä½ è¿˜å¯ä»¥å¯¹å…¶è¿›è¡Œä¸€äº›è®¾ç½®ï¼Œåœ¨xcode-&gt;windowèœå•æ ä¸­ï¼Œæœ‰VVDocumenterè¿™ä¸ªæ ‡ç­¾ï¼Œé‡Œé¢å¯ä»¥å¯¹ç”Ÿæˆæ³¨é‡Šçš„æ¨¡æ¿è¿›è¡Œä¸€äº›è®¾ç½®ï¼Œæ¯”å¦‚ç”Ÿæˆæ³¨é‡Šçš„å¿«æ·é”®ï¼Œæ³¨é‡Šçš„å¯¹é½æ¨¡å¼ï¼Œæ³¨é‡Šæ˜¾ç¤ºåˆ›å»ºè€…å’Œæ—¶é—´ç­‰ã€‚ä¾‹å¦‚å¦‚ä¸‹è®¾ç½®å°±ä¼šç”Ÿæˆè¿™æ ·çš„æ³¨é‡Šï¼š 12345678/** * @author Elephant, 15-09-16 13:09:28 * * @brief &lt;#Description#&gt; * * @param data &lt;#data description#&gt; */ - (void)updateWithData:(id)data; æœ€åï¼Œæ¨èè¿™æ¬¾å°æ’ä»¶ç»™ä½ ï¼Œç¥ä½ å†™ä»£ç æ„‰å¿«O(âˆ©_âˆ©)Oã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"å°ç å·¥å…·","slug":"å°ç å·¥å…·","permalink":"http://huishao.cc/categories/å°ç å·¥å…·/"}],"tags":[],"keywords":[{"name":"å°ç å·¥å…·","slug":"å°ç å·¥å…·","permalink":"http://huishao.cc/categories/å°ç å·¥å…·/"}]},{"title":"æˆ‘çš„å¥³ç¥â€”â€”ç®€æ´å®ç”¨çš„iOSä»£ç è°ƒè¯•æ¡†æ¶","slug":"108æˆ‘çš„å¥³ç¥â€”â€”ç®€æ´å®ç”¨çš„iOSä»£ç è°ƒè¯•æ¡†æ¶","date":"2015-09-09T16:00:00.000Z","updated":"2021-07-01T11:14:20.096Z","comments":true,"path":"2015/09/10/108æˆ‘çš„å¥³ç¥â€”â€”ç®€æ´å®ç”¨çš„iOSä»£ç è°ƒè¯•æ¡†æ¶/","link":"","permalink":"http://huishao.cc/2015/09/10/108æˆ‘çš„å¥³ç¥â€”â€”ç®€æ´å®ç”¨çš„iOSä»£ç è°ƒè¯•æ¡†æ¶/","excerpt":"","text":"æˆ‘çš„å¥³ç¥â€”â€”ç®€æ´å®ç”¨çš„iOSä»£ç è°ƒè¯•æ¡†æ¶ä¸€ã€å¼•è¨€è¿™ç¯‡åšå®¢çš„èµ·æºæ˜¯æ¥æ‰‹äº†å…¬å¸çš„ä¸€ä¸ªå·²ç»å®Œæˆçš„é¡¹ç›®ï¼Œæ¥åšä»£ç ä¼˜åŒ–ï¼Œé¡¹ç›®å·¥ç¨‹å¾ˆå¤§ï¼Œå¹¶ä¸”å¼•å…¥äº†å¾ˆå¤šå…¬å¸å†…éƒ¨çš„SDKï¼Œè¦ææ¸…æ¥šå…¬å¸å†…éƒ¨çš„è¿™å¥—æ¡†æ¶ï¼Œçš„ç¡®ä¸æ˜¯ä»¶å®¹æ˜“çš„äº‹ï¼Œå¹¶ä¸”ç”±äºè¿™ä¸ªé¡¹ç›®æ˜¯å¤šäººå¼€å‘çš„ï¼Œåœ¨è°ƒè¯•é˜¶æ®µä¼šæ‰“å°å‡ºå·¨é‡çš„è°ƒè¯•ä¿¡æ¯ï¼Œä½¿å¾—æµè§ˆæœ‰ç”¨ä¿¡æ¯å˜çš„ååˆ†å›°éš¾ï¼Œæ›´åŠ ææ€–çš„æ˜¯ï¼Œå¾ˆå¤šä¿¡æ¯æ˜¯SDKä¸­çš„è°ƒè¯•æ‰“å°ï¼Œå°†è¿™äº›éƒ½è¿›è¡Œæ³¨é”€æ˜¯éå¸¸è´¹åŠ²ç”šè‡³ä¸å¯èƒ½çš„äº‹ï¼Œäºæ˜¯ä¾¿æœ‰äº†è¿™æ ·ä¸€äº›éœ€æ±‚ï¼šé¦–å…ˆï¼Œæˆ‘éœ€è¦æ¸…æ¥šäº†è§£å„ä¸ªcontrollerä¹‹é—´çš„è·³è½¬å…³ç³»ï¼Œéœ€è¦å¿«é€Ÿçš„å¼„æ¸…æ¯ä¸ªstroyBoardä¸­å„ä¸ªcontrollerçš„æ¥é¾™å»è„‰ï¼Œå…¶æ¬¡ï¼Œæˆ‘æƒ³åœ¨ä¸æ”¹å˜å…¶ä»–äººçš„è°ƒè¯•ä»£ç çš„æƒ…å†µä¸‹ï¼Œå±è”½å†—ä½™çš„logä¿¡æ¯ï¼Œè®©æˆ‘çš„è°ƒè¯•æ•°æ®æ›´åŠ æ¸…æ™°æ˜äº†ã€‚äºæ˜¯æˆ‘æƒ³åˆ°äº†å¦‚ä¸‹çš„è§£å†³æ–¹æ¡ˆï¼ŒåŒæ ·ï¼Œå¦‚æœä½ æœ‰æ›´å¥½çš„æ–¹æ¡ˆæˆ–è€…ä½ çŸ¥é“çš„ä¼˜ç§€çš„è§£å†³åŠæ³•ï¼Œè¯·å‘ŠçŸ¥æˆ‘ï¼Œååˆ†æ„Ÿè°¢ã€‚ äºŒã€è¿½è¸ªç¨‹åºçš„è·³è½¬è·¯å¾„è¿™æ˜¯ä¸€ä¸ªå¾ˆå®¹æ˜“è§£å†³çš„é—®é¢˜ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“ï¼Œä¸€ä¸ªcontrollerï¼Œå¦‚æœè¦å±•ç°å‡ºæ¥ï¼Œä¸€å®šä¼šèµ°ç”Ÿå‘½å‘¨æœŸä¸­çš„viewWillAppearè¿™ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨è¿™ä¸ªæ–¹æ³•ä¸­åšäº›æ‰‹è„šå°±å¯ä»¥äº†ï¼Œå®ç°æœ‰ä¸¤ç§æ€è·¯ï¼Œä¸€ç§æ˜¯é‡‡ç”¨å·¥å‚çš„è®¾è®¡æ¨¡å¼ï¼Œå»ºç«‹å·¥å‚ç±»Controllerï¼Œåœ¨å…¶viewWillAppearä¸­åŠ å…¥æˆ‘ä»¬çš„è°ƒè¯•ä»£ç ï¼Œä½†è¿™å¯¹äºæˆ‘çš„é¡¹ç›®å¹¶ä¸å®ç”¨ï¼Œé¦–å…ˆæˆ‘ä¸ç¡®å®šæ‰€æœ‰controlleréƒ½ä¼šç»§æ‰¿äºä¸€ä¸ªçˆ¶ç±»ï¼Œå…¶æ¬¡ï¼Œåœ¨æˆ‘æ²¡æœ‰æ‰¾åˆ°æºå¤´æ—¶ï¼Œè¿™äº›ç±»å·²ç»åœ¨å…¬å¸çš„frameworkä¸­äº†ï¼Œæˆ‘æ ¹æœ¬æ²¡åŠæ³•æ“ä½œæºç ã€‚è€Œç¬¬äºŒç§æ–¹æ¡ˆå°±æ˜¯runtimeï¼Œå¯¹çš„ï¼Œè¿è¡Œæ—¶çš„OCï¼Œæ²¡æœ‰ä¸å¯èƒ½ã€‚å…³äºruntimeçš„è¯¦ç»†è¯´æ˜ï¼Œåœ¨[http://my.oschina.net/u/2340880/blog/489072](http://my.oschina.net/u/2340880/blog/489072)ä¸­æœ‰ä»‹ç»ã€‚æ€è·¯æ˜¯æˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ªæ–¹æ³•ï¼Œæ›¿æ¢æ‰ç³»ç»Ÿçš„viewWillAppearï¼Œåœ¨å…¶ä¸­åŠ å…¥æˆ‘ä»¬çš„è°ƒè¯•ä»£ç ï¼Œè¿™ä¸ªæ–¹æ³•å°±æ˜¯Method Swizzingï¼Œä»£ç è®¾è®¡å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243//æ–°å»ºä¸€ä¸ªconreollerçš„ç±»åˆ«#import &quot;UIViewController+YHBaseTest.h&quot;#import &lt;objc/runtime.h&gt;@implementation UIViewController (YHBaseTest)+ (void)load &#123; //åªæ‰§è¡Œä¸€æ¬¡çš„çº¿ç¨‹ static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^&#123; Class class = [self class]; // When swizzling a class method, use the following: // Class class = object_getClass((id)self); //åˆ›å»ºä¸¤ä¸ªé€‰æ‹©å™¨ åˆ†åˆ«æŒ‡å‘ ç³»ç»Ÿçš„å’Œæˆ‘ä»¬è¦æ›¿æ¢çš„å‡½æ•° SEL originalSelector = @selector(viewWillAppear:); SEL swizzledSelector = @selector(YHBaseViewWillAppear:); //è·å–æ–¹æ³•å®ä¾‹ Method originalMethod = class_getInstanceMethod(class, originalSelector); Method swizzledMethod = class_getInstanceMethod(class, swizzledSelector); //ç°å°†æ–¹æ³•åŠ å…¥ BOOL didAddMethod = class_addMethod(class, originalSelector, method_getImplementation(swizzledMethod), method_getTypeEncoding(swizzledMethod)); //è¿›è¡Œæ–¹æ³•æ›¿æ¢ if (didAddMethod) &#123; class_replaceMethod(class, swizzledSelector, method_getImplementation(originalMethod), method_getTypeEncoding(originalMethod)); &#125; else &#123; method_exchangeImplementations(originalMethod, swizzledMethod); &#125; &#125;);&#125;#pragma mark - Method Swizzling- (void)YHBaseViewWillAppear:(BOOL)animated &#123;//è¿™é‡Œæ˜¯æ˜¯æˆ‘åŠ çš„ä¸€ä¸ªæ§åˆ¶è°ƒè¯•é” åé¢ä¼šä»‹ç» [self YHBaseViewWillAppear:animated]; YHBaseProcessLog(@&quot;YHBaseTest:ViewWillAppear: %@&quot;, self); &#125; ä¸‰ã€å±è”½å†—ä½™çš„logä¿¡æ¯1ã€ç³»ç»Ÿçš„NSLogæ˜¯ä¸ªä»€ä¹ˆç©æ„è¦æˆ˜èƒœæˆ‘ä»¬çš„æ•Œäººï¼Œé¦–å…ˆåº”è¯¥äº†è§£æˆ‘ä»¬çš„æ•Œäººï¼Œæˆ‘ä»¬æƒ³è¦å±è”½NSLogçš„æ‰“å°ï¼Œå…ˆéœ€è¦æ¸…æ¥šNSLogåˆ°åº•æ˜¯ä¸ªä»€ä¹ˆç©æ„ã€‚ é¦–å…ˆï¼ŒNSLogçš„å®šä¹‰å¦‚ä¸‹ï¼š 12FOUNDATION_EXPORT void NSLog(NSString *format, ...) NS_FORMAT_FUNCTION(1,2);FOUNDATION_EXPORT void NSLogv(NSString *format, va_list args) NS_FORMAT_FUNCTION(1,0); è¿™é‡Œé¢æœ‰ä¸¤ä¸ªå‡½æ•°ï¼Œä¸€ä¸ªæ˜¯ä½¿ç”¨å¤šå‚çš„æ ¼å¼åŒ–å­—ç¬¦ä¸²è¿›è¡ŒNSLogçš„æ‰“å°ï¼Œä¸€ä¸ªæ˜¯é€šè¿‡å‚æ•°æŒ‡é’ˆè¿›è¡Œæ‰“å°ã€‚ä»è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œç³»ç»Ÿçš„NSLogæ˜¯ä¸€ä¸ªCé£æ ¼çš„å‡½æ•°ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬æœ‰æ€è·¯äº†ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å®šä¹‰ä¸€ä¸ªNSLogå®æ¥æ›¿æ¢æ‰é¡¹ç›®ä¸­æ‰€æœ‰çš„NSLogï¼Œå¦‚ä¸‹ï¼š 12//...æ˜¯çœç•¥å‚æ•°çš„å®çš„å†™æ³•ï¼Œåé¢çš„__VA_ARGS__æ˜¯ç³»ç»Ÿå®šä¹‰å¥½çš„ä¸€ä¸ªå®ï¼Œæ¥å£°æ˜ä¸å®šå‚æ•°#define NSLog(...) YHBaseTestLog(__VA_ARGS__) 2ã€å®ç°æˆ‘ä»¬è‡ªå·±çš„NSLogé€šè¿‡ä¸Šé¢çš„æ–¹æ³•ï¼Œåœ¨æ²¡æœ‰åŠ¨æºç çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥æ›¿æ¢æ‰ç¨‹åºä¸­æ‰€æœ‰çš„æ‰“å°ï¼Œå¯èƒ½ä½ ä¼šç–‘é—®ï¼Œç¨‹åºä¸­æ€ä¹ˆä¼šå…è®¸æˆ‘ä»¬æœ‰ä¸¤ä¸ªNSLogå‘¢ï¼Œå…¶å®è¿™æ²¡ä»€ä¹ˆç¥å¥‡çš„ï¼Œè¦çŸ¥é“å®æ˜¯ä¸€ç§é¢„ç¼–è¯‘çš„æŒ‡ä»¤ï¼Œæ‰€æœ‰è¿™äº›æ“ä½œæ˜¯åœ¨ä»£ç ç¼–è¯‘ä¹‹å‰å®Œæˆçš„ï¼Œå®é™…ä¸Šç¨‹åºä¸­å·²ç»å°†NSLogç®€å•æ›¿æ¢æˆäº†æˆ‘ä»¬çš„å‡½æ•°è°ƒç”¨ï¼Œç¨‹åºä¸­åªæœ‰ä¸€ä¸ªNSLogï¼Œè¿™å°±æ˜¯å®çš„å¼ºå¤§ä¹‹å¤„ï¼Œç‹¸çŒ«æ¢å¤ªå­ï¼Œä¸é”™å§ã€‚ ä¸‹é¢æˆ‘ä»¬æ¥å®ç°æˆ‘ä»¬çš„è¿™ä¸ªå‡½æ•°ï¼Œå¦‚ä¸‹ï¼š 123456789101112//ä¸è¦å¿˜äº†åœ¨.hæ–‡ä»¶ä¸­å£°æ˜void YHBaseTestLog(NSString *str,...)&#123;//å‚æ•°åˆ— va_list list; va_start(list, str); //è¿™ä¸ªåœ°æ–¹æ˜¯ä¸€ä¸ªé”ï¼Œåé¢ä¼šä»‹ç» if (![YHBaseTestLock sharedTheSingletion]-&gt;_customLock) &#123; //è¿›è¡Œæ‰“å° NSLogv(str, list); &#125; va_end(list);&#125; è¿™ä¸ªå‡½æ•°ä¸­å…¶å®å¹¶æ²¡æœ‰åšä»€ä¹ˆï¼ŒåŠ äº†ä¸€ä¸ªé”çš„åˆ¤æ–­ï¼Œä»…æ­¤è€Œå·²ï¼Œæ ¸å¿ƒçš„æ§åˆ¶ï¼Œå°±äº¤ç»™æˆ‘ä»¬çš„é”å§ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748//.hæ–‡ä»¶@interface YHBaseTestLock : NSObject&lt;YHSingletonProcotol&gt;&#123; @public BOOL _customLock; BOOL _precessLock;&#125;+(void)customLock;+(void)customUnLock;+(void)processLogLock;+(void)processLogUnLock;//.m//å•ä¾‹æ–¹æ³•+(instancetype)sharedTheSingletion&#123; static YHBaseTestLock * sharedModel = nil; static dispatch_once_t predicate; dispatch_once(&amp;predicate, ^&#123; sharedModel = [[YHBaseTestLock alloc] init]; &#125;); return sharedModel;&#125;- (instancetype)init&#123; self = [super init]; if (self) &#123; //åˆå§‹åŒ– é»˜è®¤ç”¨æˆ·çš„æ‰“å°éƒ½å¼€èµ· _customLock=NO; //é»˜è®¤ æˆ‘ä»¬åŠ çš„controllerçš„æ‰“å°å±è”½ _precessLock=YES; &#125; return self;&#125;//å“åº”çš„è®¾ç½®+(void)customLock&#123; [YHBaseTestLock sharedTheSingletion]-&gt;_customLock=YES;&#125;+(void)customUnLock&#123; [YHBaseTestLock sharedTheSingletion]-&gt;_customLock=NO;&#125;+(void)processLogLock&#123; [YHBaseTestLock sharedTheSingletion]-&gt;_precessLock=YES;&#125;+(void)processLogUnLock&#123; [YHBaseTestLock sharedTheSingletion]-&gt;_precessLock=NO;&#125; å››ã€çœ‹çœ‹æˆ‘ä»¬çš„æ°ä½œå§åšå®Œä¸Šé¢çš„å·¥ä½œåï¼Œæˆ‘ä»¬åœ¨appdelegateä¸­å¦‚å¦‚ä¸‹çš„ç®€å•é…ç½®ï¼š 12345678- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions &#123; // Override point for customization after application launch. //å°†ç”¨æˆ·æ‰“å°åŠ é” [YHBaseTestLock customLock]; //å°†æµç¨‹æ‰“å°è§£é” [YHBaseTestLock processLogUnLock]; return YES;&#125; æˆ‘ä»¬åšå¦‚ä¸‹æµ‹è¯•ï¼š 1234567891011121314@interface ViewController ()@end@implementation ViewController- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view, typically from a nib. NSLog(@&quot;111111111111111111111111111111111111111111111111111111111111111&quot;); [YHBaseTestLock customUnLock]; NSLog(@&quot;è¿™ä¸ªæ˜¯æœ‰ç”¨çš„ä¿¡æ¯:%@==%d&quot;,@&quot;çœ‹æˆ‘å“¦&quot;,__LINE__); [YHBaseTestLock customLock]; NSLog(@&quot;32123213123214412312312&quot;);&#125; æˆ‘åœ¨viewControllerä¸­çš„æœ‰ç”¨ä¿¡æ¯å‰åï¼Œæ‰“å°äº†ä¸€äº›å¹²æ‰°ä¿¡æ¯ï¼Œå¹¶ä¸”å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªNSLogçš„æ ¼å¼å’Œç³»ç»Ÿçš„å®Œå…¨å…¼å®¹ï¼Œåœ¨æ‰“å°æœ‰ç”¨ä¿¡æ¯å‰åè§£é”å’ŒåŠ é”ï¼Œç»“æœå¦‚ä¸‹ï¼š å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å°†æ²¡ç”¨çš„æ‰“å°éƒ½å±è”½äº†ï¼Œå¹¶ä¸”æ‰“å°äº†ç¨‹åºçš„è·³è½¬æµç¨‹ã€‚æœ€é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬å¯¹æºç ä¸€ä¸ªå­—ç¬¦éƒ½æ²¡æœ‰ä¿®æ”¹ï¼ŒåŒæ—¶ä¸ä¼šå½±å“ä¸å†²çªå…¶ä»–äººçš„å¼€å‘ã€‚ è¿™ç¯‡åšå®¢å¼€å¤´ï¼Œæˆ‘ç§°ä¹‹ä¸ºæˆ‘çš„å¥³ç¥ï¼ŒçœŸå¿ƒå®æ„Ÿï¼Œè¿™ä¸ªæ–¹æ³•å¸®äº†æˆ‘å¾ˆå¤§çš„å¿™ï¼Œåœ¨æˆ‘äº†è§£é¡¹ç›®çš„ç»“æ„æ¡†æ¶å‰ï¼Œæ¯æ¬¡è°ƒè¯•æ‰“å°éƒ½åœ¨æ§åˆ¶åŒºæ»šå‡ºä¸€ç‰‡ç‰‡çš„ä¿¡æ¯ç€å®è®©æˆ‘å¤´æ™•è„‘èƒ€ï¼Œç°åœ¨ä¸€æ¸…å‡‰ï¼Œç²¾ç¥ä¹Ÿæ¸…çˆ½ä¸å°‘ï¼Œ^_^ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"ä»£ç çµé­‚","slug":"ä»£ç çµé­‚","permalink":"http://huishao.cc/categories/ä»£ç çµé­‚/"}],"tags":[],"keywords":[{"name":"ä»£ç çµé­‚","slug":"ä»£ç çµé­‚","permalink":"http://huishao.cc/categories/ä»£ç çµé­‚/"}]},{"title":"iOSå¼€å‘ä¸€æ¬¾å°å·§ç®€æ´çš„æ—¥å†æ§ä»¶","slug":"107iOSå¼€å‘ä¸€æ¬¾å°å·§ç®€æ´çš„æ—¥å†æ§ä»¶","date":"2015-09-06T16:00:00.000Z","updated":"2021-07-01T11:09:06.101Z","comments":true,"path":"2015/09/07/107iOSå¼€å‘ä¸€æ¬¾å°å·§ç®€æ´çš„æ—¥å†æ§ä»¶/","link":"","permalink":"http://huishao.cc/2015/09/07/107iOSå¼€å‘ä¸€æ¬¾å°å·§ç®€æ´çš„æ—¥å†æ§ä»¶/","excerpt":"","text":"iOSå¼€å‘ä¸€æ¬¾å°å·§ç®€æ´çš„æ—¥å†æ§ä»¶ä¸€ã€å¼•è¨€æ—¥ å†æ˜¯iOSå¼€å‘ä¸­æœ‰æ—¶ä¼šç”¨åˆ°çš„ä¸€ä¸ªUIæ§ä»¶ï¼Œç½‘ä¸Šå¼€æºçš„ä»£ç ä¹Ÿå¾ˆå¤šï¼Œæˆ‘æµè§ˆè¿‡ä¸€äº›ï¼Œå¤§è‡´æœ‰ä¸¤ç§æ¨¡å¼ï¼Œä¸€ç§æ˜¯æ—¥å†çš„é€»è¾‘ç”±å¼€å‘è€…è‡ªå·±å®ç°ï¼Œé€šè¿‡è®¡ç®—é—°å¹´ä¸å¹³ å¹´æ¥ç¡®å®šæœˆä»½å¤©æ•°ï¼Œå¦å¤–ä¸€ç§æ¨¡å¼æ˜¯é€šè¿‡NSDateè¿™ä¸ªæ—¶é—´ç±»ï¼Œæ¥è·å–æ—¥å†çš„ä¿¡æ¯ã€‚æˆ‘ä¸ªäººè®¤ä¸ºåä¸€ç§æ›´åŠ å®‰å…¨ï¼Œä»£ç æ€§èƒ½ä¹Ÿä¼šæ›´åŠ ä¼˜è´¨ï¼Œä¸‹é¢å°±æ˜¯æˆ‘ç”¨è¿™ç§æ¨¡ å¼å®ç°çš„ä¸€ä¸ªæ—¥å†æ§ä»¶ã€‚ äºŒã€è®¾è®¡æ€è·¯1ã€å…ˆæ¥çœ‹ä¸‹æ•ˆæœå§ 2ã€æˆ‘ä»¬éœ€è¦å®ç°çš„åŠŸèƒ½ï¼ˆ1ï¼‰æ¯è¡Œ7å¤©ï¼Œå¯¹åº”æ˜ŸæœŸï¼Œåˆ—æ•°ä¸ºå°†å½“å‰æœˆæ˜¾ç¤ºå®Œå…¨ ï¼ˆ2ï¼‰ä»Šæ—¥æ ‡çº¢ ï¼ˆ3ï¼‰ç‚¹å‡»çš„æ—¥æœŸèƒŒæ™¯å¡«å…… ï¼ˆ4ï¼‰æä¾›ç‰¹æ®Šæ ‡è®°ï¼Œç”¨äºæ ‡è®°è®¡åˆ’æ—¥ï¼ŒèŠ‚æ—¥ç­‰ ï¼ˆ5ï¼‰å·¦å³æ— é™ç¿»é¡µï¼Œç›´åˆ°ä¸–ç•Œèµ·æºå’Œæœ«æ—¥ 3ã€è®¾è®¡æ­¥éª¤ï¼ˆ1ï¼‰è®¾è®¡ä¸€ä¸ªæ—¥å†æ¨¡å‹ 1234567#import &quot;YHBaseModel.h&quot;@interface YHBaseDateModel : YHBaseModel@property(nonatomic,strong)NSString * year;@property(nonatomic,strong)NSString * month;@property(nonatomic,strong)NSString * day;@end ï¼ˆ2ï¼‰å‘ç³»ç»Ÿçš„NSDateç±»ä¸­æ·»åŠ ä¸€äº›æ‰©å±•æ–¹æ³•ï¼Œä¾¿äºæˆ‘ä»¬ä½¿ç”¨ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081//å¤´æ–‡ä»¶éƒ¨åˆ†@interface NSDate (YHBaseCalendar)/** *è·å–å½“å‰æœˆçš„å¤©æ•° */- (NSUInteger)YHBaseNumberOfDaysInCurrentMonth;/** *è·å–æœ¬æœˆç¬¬ä¸€å¤© */- (NSDate *)YHBaseFirstDayOfCurrentMonth;//ä¸‹é¢è¿™äº›æ–¹æ³•ç”¨äºè·å–å„ç§æ•´å½¢çš„æ•°æ®/** *ç¡®å®šæŸå¤©æ˜¯å‘¨å‡  */-(int)YHBaseWeekly;/** *å¹´æœˆæ—¥ æ—¶åˆ†ç§’ */-(int)getYear;-(int)getMonth;-(int)getDay;-(int)getHour;-(int)getMinute;-(int)getSecond;@end//å®ç°éƒ¨åˆ†@implementation NSDate (YHBaseCalendar)-(NSUInteger)YHBaseNumberOfDaysInCurrentMonth&#123; return [[NSCalendar currentCalendar] rangeOfUnit:NSDayCalendarUnit inUnit:NSMonthCalendarUnit forDate:self].length; &#125;- (NSDate *)YHBaseFirstDayOfCurrentMonth&#123; NSDate *startDate = nil; BOOL ok = [[NSCalendar currentCalendar] rangeOfUnit:NSMonthCalendarUnit startDate:&amp;startDate interval:NULL forDate:self]; NSAssert1(ok, @&quot;Failed to calculate the first day of the month based on %@&quot;, self); return startDate;&#125;-(int)YHBaseWeekly&#123; return (int)[[NSCalendar currentCalendar] ordinalityOfUnit:NSDayCalendarUnit inUnit:NSWeekCalendarUnit forDate:self];&#125;-(int)getYear&#123; NSCalendar *calendar = [NSCalendar currentCalendar]; NSUInteger unitFlags = NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit; NSDateComponents *dateComponent = [calendar components:unitFlags fromDate:self]; return (int)dateComponent.year;&#125;-(int)getMonth&#123; NSCalendar *calendar = [NSCalendar currentCalendar]; NSUInteger unitFlags = NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit; NSDateComponents *dateComponent = [calendar components:unitFlags fromDate:self]; return (int)dateComponent.month;&#125;-(int)getDay&#123; NSCalendar *calendar = [NSCalendar currentCalendar]; NSUInteger unitFlags = NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit; NSDateComponents *dateComponent = [calendar components:unitFlags fromDate:self]; return (int)dateComponent.day;&#125;-(int)getHour&#123; NSCalendar *calendar = [NSCalendar currentCalendar]; NSUInteger unitFlags = NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit; NSDateComponents *dateComponent = [calendar components:unitFlags fromDate:self]; return (int)dateComponent.hour;&#125;-(int)getMinute&#123; NSCalendar *calendar = [NSCalendar currentCalendar]; NSUInteger unitFlags = NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit; NSDateComponents *dateComponent = [calendar components:unitFlags fromDate:self]; return (int)dateComponent.minute;&#125;-(int)getSecond&#123; NSCalendar *calendar = [NSCalendar currentCalendar]; NSUInteger unitFlags = NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit; NSDateComponents *dateComponent = [calendar components:unitFlags fromDate:self]; return (int)dateComponent.second;&#125;@end ï¼ˆ3ï¼‰è®¾è®¡æˆ‘ä»¬çš„UIæ§ä»¶ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203//å¤´æ–‡ä»¶éƒ¨åˆ†@interface YHBaseCalendarView : YHBaseView@property(nonatomic,strong)NSDate * currentDate;//æ ‡è®°æ•°ç»„ ç”¨äºæ ‡è®°ç‰¹æ®Šæ—¥æœŸ è¿™ä¸ªæ•°ç»„ä¸­å­˜æ”¾çš„å¿…é¡»æ˜¯YHBaseDateModel å¯¹è±¡@property(nonatomic,strong)NSArray * markArray;@property(nonatomic,weak)id&lt;YHBaseCalendarViewDelegate&gt; delegate;@end//å®ç°éƒ¨åˆ†@interface YHBaseCalendarView()&lt;UIScrollViewDelegate&gt;&#123; //æ˜ŸæœŸ UIView * _headView; //æ—¥å†çš„å±•ç¤º UIView * _bodyViewL; UIView * _bodyViewM; UIView * _bodyViewR; //æ»‘åŠ¨åŠŸèƒ½çš„æ”¯æŒ UIScrollView * _scrollView; NSDate * _today; YHBaseDateModel * _selectModel;&#125;@end@implementation YHBaseCalendarView-(void)reloadView&#123; _currentDate = [NSDate date]; _today = [NSDate date]; _selectModel = [[YHBaseDateModel alloc]init]; _selectModel.year = [NSString stringWithFormat:@&quot;%d&quot;,[_today getYear]]; _selectModel.month =[NSString stringWithFormat:@&quot;%d&quot;,[_today getMonth]]; _selectModel.day = [NSString stringWithFormat:@&quot;%d&quot;,[_today getDay]]; _scrollView = [[UIScrollView alloc]initWithFrame:CGRectMake(0, 30, self.frame.size.width, self.frame.size.height)]; _scrollView.contentSize = CGSizeMake(3*self.frame.size.width, 0); _scrollView.contentOffset = CGPointMake(self.frame.size.width, 0); _scrollView.pagingEnabled=YES; _scrollView.delegate=self; [self addSubview:_scrollView]; _bodyViewL = [[UIView alloc]initWithFrame:CGRectMake(0, 0, _scrollView.frame.size.width, _scrollView.frame.size.height)]; [_scrollView addSubview:_bodyViewL]; _bodyViewM = [[UIView alloc]initWithFrame:CGRectMake(_scrollView.frame.size.width,0, _scrollView.frame.size.width, _scrollView.frame.size.height)]; [_scrollView addSubview:_bodyViewM]; _bodyViewR = [[UIView alloc]initWithFrame:CGRectMake(_scrollView.frame.size.width*2, 0, _scrollView.frame.size.width, _scrollView.frame.size.height)]; [_scrollView addSubview:_bodyViewR]; //å±•ç¤ºæ˜ŸæœŸ _headView = [[UIView alloc]initWithFrame:CGRectMake(0, 0, self.frame.size.width, 30)]; _headView.backgroundColor = [UIColor redColor]; NSArray * weekArray = @[@&quot;SUN&quot;,@&quot;MON&quot;,@&quot;TUES&quot;,@&quot;WED&quot;,@&quot;THUR&quot;,@&quot;FRI&quot;,@&quot;SAT&quot;]; for (int i=0; i&lt;7; i++) &#123; UILabel * label = [[UILabel alloc]initWithFrame:CGRectMake(self.frame.size.width/7*i, 0, self.frame.size.width/7, 30)]; if (i!=0&amp;&amp;i!=6) &#123; label.backgroundColor = [UIColor redColor]; &#125;else&#123; label.backgroundColor = [UIColor purpleColor]; &#125; label.text=weekArray[i]; label.textAlignment = NSTextAlignmentCenter; label.layer.borderWidth=1; label.layer.borderColor = [[UIColor grayColor]CGColor]; label.font = [UIFont boldSystemFontOfSize:16]; label.layer.borderColor=[[UIColor grayColor] CGColor]; label.textColor = [UIColor whiteColor]; label.layer.borderWidth = 1; [_headView addSubview:label]; &#125; [self addSubview:_headView]; [self creatViewWithData:_currentDate onView:_bodyViewM]; [self creatViewWithData:[YHBaseDateTools getPreviousframDate:_currentDate] onView:_bodyViewL]; [self creatViewWithData:[YHBaseDateTools getNextMonthframDate:_currentDate] onView:_bodyViewR];&#125;//æ ¸å¿ƒçš„æ„é€ æ–¹æ³•-(void)creatViewWithData:(id)data onView:(UIView *)bodyView&#123; NSDate * currentDate = (NSDate *)data; //è·å–å½“å‰æœˆæœ‰å¤šå°‘å¤© int monthNum = (int)[currentDate YHBaseNumberOfDaysInCurrentMonth]; //è·å–ç¬¬ä¸€å¤©çš„æ—¥æœŸ NSDate * firstDate = [currentDate YHBaseFirstDayOfCurrentMonth]; //ç¡®å®šè¿™ä¸€å¤©æ˜¯å‘¨å‡  int weekday = [firstDate YHBaseWeekly]; //ç¡®å®šåˆ›å»ºå¤šå°‘è¡Œ int weekRow=0; int tmp=monthNum; if (weekday!=7) &#123; weekRow++; tmp=monthNum-(7-weekday); &#125; weekRow += tmp/7; weekRow += (tmp%7)?1:0; //å¼€å§‹åˆ›å»ºæŒ‰é’® /** *è¿™é‡Œçš„é€»è¾‘æ˜¯æœ‰é—®é¢˜çš„ï¼Œåº”è¯¥è®¾è®¡æˆcellçš„å¤ç”¨æœºåˆ¶ï¼Œè€Œä¸åº”è¯¥é‡å¤è€—æ€§èƒ½çš„åˆ›å»º æœ‰æ—¶é—´åœ¨ä¼˜åŒ– */#warning å¯ä»¥ä¼˜åŒ–å“¦ NSArray * array = [bodyView subviews]; for (UIView * v in array) &#123; [v removeFromSuperview]; &#125; int nextDate = 1; //è¡Œ for (int i=0; i&lt;weekRow; i++) &#123; //åˆ— for (int j=0; j&lt;7; j++) &#123; //å…ˆè¿›è¡Œä¸Šä¸ªæœˆä½™å¤©çš„åˆ›å»º UIButton * btn; if (weekday!=7&amp;&amp;(i*7+j)&lt;weekday) &#123; //è·å–ä¸Šä¸ªæœˆæœ‰å¤šå°‘å¤© NSDate * preDate = [YHBaseDateTools getPreviousframDate:currentDate]; int preDays = (int)[preDate YHBaseNumberOfDaysInCurrentMonth]; btn =[[UIButton alloc]initWithFrame:CGRectMake(self.frame.size.width/7*j, self.frame.size.width/7*i, self.frame.size.width/7, self.frame.size.width/7)]; [btn setTitle:[NSString stringWithFormat:@&quot;%d&quot;,preDays-weekday+j+1] forState:UIControlStateNormal]; [btn setTitleColor:[UIColor grayColor] forState:UIControlStateNormal]; [bodyView addSubview:btn]; &#125;else if((i*7+j+1-(weekday==7?0:weekday))&lt;=monthNum)&#123; btn =[[UIButton alloc]initWithFrame:CGRectMake(self.frame.size.width/7*j, self.frame.size.width/7*i, self.frame.size.width/7, self.frame.size.width/7)]; [btn setTitle:[NSString stringWithFormat:@&quot;%d&quot;,(i*7+j+1-(weekday==7?0:weekday))] forState:UIControlStateNormal]; [btn setTitleColor:[UIColor blackColor] forState:UIControlStateNormal]; [bodyView addSubview:btn]; &#125;else&#123; btn =[[UIButton alloc]initWithFrame:CGRectMake(self.frame.size.width/7*j, self.frame.size.width/7*i, self.frame.size.width/7, self.frame.size.width/7)]; [btn setTitle:[NSString stringWithFormat:@&quot;%d&quot;,nextDate++] forState:UIControlStateNormal]; [btn setTitleColor:[UIColor grayColor] forState:UIControlStateNormal]; [bodyView addSubview:btn]; &#125; //å°†ä»Šå¤©çš„æ—¥æœŸæ ‡å‡º if ([currentDate getYear]==[_today getYear]&amp;&amp;[currentDate getMonth]==[_today getMonth]&amp;&amp;[btn.titleLabel.text intValue]==[_today getDay]&amp;&amp;!CGColorEqualToColor([btn.titleLabel.textColor CGColor], [[UIColor grayColor] CGColor])) &#123; [btn setTitleColor:[UIColor redColor] forState:UIControlStateNormal]; &#125; //æ˜¯å¦è¿›è¡Œè‡ªå®šä¹‰æ ‡è®° /** *ifä¸­çš„é¢œè‰²æ¯”è¾ƒ æ˜¯ä¸ºäº†è®©ä¸Šæœˆä¸ä¸‹æœˆçš„ä½™æ—¥ä¸äº§ç”Ÿbug */ if (_markArray!=nil) &#123; for (int i=0; i&lt;_markArray.count; i++) &#123; YHBaseDateModel * model = _markArray[i]; if ([currentDate getYear]==[model.year intValue]&amp;&amp;[currentDate getMonth]==[model.month intValue]&amp;&amp;[btn.titleLabel.text intValue]==[model.day intValue]&amp;&amp;!CGColorEqualToColor([btn.titleLabel.textColor CGColor], [[UIColor grayColor] CGColor])) &#123; btn.layer.borderColor = [[UIColor grayColor]CGColor]; btn.layer.borderWidth=1; &#125; &#125; &#125; //æ˜¯å¦è¿›è¡Œé€‰ä¸­æ ‡è®° if ([_selectModel.year intValue]==[currentDate getYear]&amp;&amp;[_selectModel.month intValue]==[currentDate getMonth]&amp;&amp;[_selectModel.day intValue]==[btn.titleLabel.text intValue]&amp;&amp;!CGColorEqualToColor([btn.titleLabel.textColor CGColor], [[UIColor grayColor] CGColor])) &#123; btn.backgroundColor = [UIColor cyanColor]; &#125; if (!CGColorEqualToColor([btn.titleLabel.textColor CGColor], [[UIColor grayColor] CGColor])) &#123; //æ·»åŠ ç‚¹å‡»äº‹ä»¶ [btn addTarget:self action:@selector(clickBtn:) forControlEvents:UIControlEventTouchUpInside]; &#125; &#125; &#125; &#125;//è¿™ä¸ªæ–¹æ³•ä¸­è¿›è¡Œé‡æ„-(void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView&#123; if (scrollView.contentOffset.x==0) &#123;//å‘å‰ç¿»é¡µäº† _currentDate = [YHBaseDateTools getPreviousframDate:_currentDate]; _scrollView.contentOffset=CGPointMake(scrollView.frame.size.width, 0); [self creatViewWithData:_currentDate onView:_bodyViewM]; [self creatViewWithData:[YHBaseDateTools getPreviousframDate:_currentDate] onView:_bodyViewL]; [self creatViewWithData:[YHBaseDateTools getNextMonthframDate:_currentDate] onView:_bodyViewR]; &#125;else if (scrollView.contentOffset.x==scrollView.frame.size.width)&#123; &#125;else if (scrollView.contentOffset.x==scrollView.frame.size.width*2)&#123; _currentDate = [YHBaseDateTools getNextMonthframDate:_currentDate]; _scrollView.contentOffset=CGPointMake(scrollView.frame.size.width, 0); [self creatViewWithData:_currentDate onView:_bodyViewM]; [self creatViewWithData:[YHBaseDateTools getPreviousframDate:_currentDate] onView:_bodyViewL]; [self creatViewWithData:[YHBaseDateTools getNextMonthframDate:_currentDate] onView:_bodyViewR]; &#125; scrollView.userInteractionEnabled=YES; if ([self.delegate respondsToSelector:@selector(YHBaseCalendarViewScrollEndToDate:)]) &#123; YHBaseDateModel * model = [[YHBaseDateModel alloc]init]; model.year = [NSString stringWithFormat:@&quot;%d&quot;,[_currentDate getYear]]; model.month = [NSString stringWithFormat:@&quot;%d&quot;,[_currentDate getMonth]]; model.day = [NSString stringWithFormat:@&quot;%d&quot;,[_currentDate getDay]]; [self.delegate YHBaseCalendarViewScrollEndToDate:model]; &#125;&#125;-(void)scrollViewDidScroll:(UIScrollView *)scrollView&#123; scrollView.userInteractionEnabled=NO;&#125;//ç‚¹å‡»äº‹ä»¶-(void)clickBtn:(UIButton *)btn&#123; _selectModel.year = [NSString stringWithFormat:@&quot;%d&quot;,[_currentDate getYear]]; _selectModel.month = [NSString stringWithFormat:@&quot;%d&quot;,[_currentDate getMonth]]; _selectModel.day = btn.titleLabel.text; [self creatViewWithData:_currentDate onView:_bodyViewM]; [self creatViewWithData:[YHBaseDateTools getPreviousframDate:_currentDate] onView:_bodyViewL]; [self creatViewWithData:[YHBaseDateTools getNextMonthframDate:_currentDate] onView:_bodyViewR]; if ([self.delegate respondsToSelector:@selector(YHBaseCalendarViewSelectAtDateModel:)]) &#123; [self.delegate YHBaseCalendarViewSelectAtDateModel:_selectModel]; &#125; &#125;@end ï¼ˆ4ï¼‰ä¸ºç”¨æˆ·äº¤äº’è®¾è®¡çš„åè®® 1234@protocol YHBaseCalendarViewDelegate&lt;NSObject&gt;-(void)YHBaseCalendarViewSelectAtDateModel:(YHBaseDateModel *)dateModel;-(void)YHBaseCalendarViewScrollEndToDate:(YHBaseDateModel *)dateModel;@end ä¸‰ã€æ’ä¸ªå°å¹¿å‘Šæ§ä»¶çš„æºç åœ¨[https://github.com/ZYHshao/YHBaseFoundationTest.git](https://github.com/ZYHshao/YHBaseFoundationTest.git)ä¸­ï¼Œè¿™æ˜¯æˆ‘å°è£…çš„ä¸€å¥—åŸºäºCocoaä¸Foundationçš„æ›´æ˜“ç”¨çš„å¼€å‘æ¡†æ¶ï¼Œå…¶ä¸­ä¹Ÿå¯¹AFNï¼ŒCRLabelï¼ŒSDImage,MJRefreshè¿›è¡Œäº†é›†æˆï¼Œæœ‰æ˜“ç”¨çš„ä¸‹è½½æ¡†æ¶ï¼Œç¼“å­˜æ¡†æ¶ï¼Œé”™è¯¯å¤„ç†æ¡†æ¶ï¼Œçš®è‚¤ç®¡ç†æ¡†æ¶ç­‰ï¼Œä¹Ÿæœ‰æ”¯æŒåŠ è½½HTMLå¹¶ä¸”å¼‚æ­¥ç¼“å­˜å›¾ç‰‡çš„viewï¼Œè¾¹ä¸‹è¾¹æ’­å¹¶åšç¼“å­˜çš„AVAudioPlayerï¼Œä»¥åŠå„ç§è‡ªå®šä¹‰æ€§èƒ½å¾ˆå¼ºçš„viewæ§ä»¶ï¼Œå¦‚ç”¨blockåˆ›å»ºçš„æŒ‰é’®ï¼Œæç¤ºæ¡†ä»¥åŠå¯¹jsonå’Œæ¨¡å‹åšç›¸å…³æ˜ å°„çš„å¤„ç†ç±»ï¼Œå¦‚æœè¿™äº›ä¸œè¥¿æœ‰å¸®åˆ°ä½ ï¼Œæˆ‘å¾ˆå¼€å¿ƒï¼Œå¦‚æœä½ å‘ç°ä¸€äº›é—®é¢˜æˆ–è€…ä¼˜åŒ–å»ºè®®ï¼Œè¯·ä¸€å®šå‘ŠçŸ¥æˆ‘ï¼Œæˆ‘å°†ååˆ†æ„Ÿæ¿€ï¼ŒQQ316045346 ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"Objective-Cä½¿ç”¨ä½è¿ç®—è®¾è®¡å¯å¤é€‰çš„æšä¸¾","slug":"106Objective-Cä½¿ç”¨ä½è¿ç®—è®¾è®¡å¯å¤é€‰çš„æšä¸¾","date":"2015-09-02T16:00:00.000Z","updated":"2021-07-01T11:08:01.742Z","comments":true,"path":"2015/09/03/106Objective-Cä½¿ç”¨ä½è¿ç®—è®¾è®¡å¯å¤é€‰çš„æšä¸¾/","link":"","permalink":"http://huishao.cc/2015/09/03/106Objective-Cä½¿ç”¨ä½è¿ç®—è®¾è®¡å¯å¤é€‰çš„æšä¸¾/","excerpt":"","text":"ä½¿ç”¨ä½è¿ç®—è®¾è®¡å¯å¤é€‰çš„æšä¸¾ä¸€ã€æšä¸¾ä½¿ç”¨çš„ä¸€ä¸ªå°ä¾‹å­åœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œæšä¸¾æ˜¯æˆ‘ä»¬ä¼šç»å¸¸ä¼šç”¨åˆ°çš„ä¸€ç§ç¼–ç¨‹æ–¹å¼ï¼Œé€šè¿‡æšä¸¾ï¼Œå¯ä»¥ä½¿æˆ‘ä»¬çš„ä»£ç æ›´å…·å¯è¯»æ€§ä¸ç»Ÿä¸€æ€§ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šé€šè¿‡typedefæ¥å®šä¹‰ä¸€ç§æšä¸¾çš„ç±»å‹æ¥ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼š 12345typedef enum &#123; para1, para2, para3&#125;myEnum; æˆ‘ä»¬å¯ä»¥åœ¨å‡½æ•°çš„å‚æ•°ä¸­æ¥ä½¿ç”¨å®ƒï¼š 123456789101112131415161718192021-(void)testEunm:(myEnum)para&#123; switch (para) &#123; case para1: &#123; NSLog(@&quot;para%d&quot;,1); &#125; break; case para2: &#123; NSLog(@&quot;para%d&quot;,2); &#125; break; case para3: &#123; NSLog(@&quot;para%d&quot;,3); &#125; break; default: break; &#125;&#125; æˆ‘ä»¬åœ¨è°ƒç”¨è°ƒç”¨è¿™æ ·çš„ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œé€šè¿‡ä¼ å…¥ä¸€ä¸ªæšä¸¾ç±»å‹ï¼Œå¯ä»¥åˆ†æµæ‰§è¡Œæˆ‘ä»¬æƒ³è¦çš„æ“ä½œã€‚ äºŒã€æšä¸¾åˆ°åº•æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿æšä¸¾å¹¶ä¸æ˜¯ä¸€ç§å¥‡æ€ªçš„ç±»å‹ï¼Œèµ·å®è´¨æ˜¯æ•´å‹çš„å¦ä¸€ä¸ªåå­—ï¼Œå¦‚æœæ²¡æœ‰é™„åŠ çš„æ“ä½œï¼Œæšä¸¾ä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°é»˜è®¤å°±æ˜¯æ•´å‹0ï¼Œä¹‹åä¾æ¬¡é€’åŠ ï¼Œå½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è®¤ä¸ºçš„æ§åˆ¶è¿™ä¸ªæ•°å€¼ï¼Œä¾‹å¦‚ï¼š 12345typedef enum &#123; para1=7, para2, para3=1000&#125;myEnum; å¯ä»¥è¿™ä¹ˆç†è§£ï¼Œæˆ‘åœ¨ä¼ å‚çš„æ—¶å€™ï¼Œä¼ 7å’Œpara1æ˜¯å®Œå…¨ä¸€æ ·çš„æ•ˆæœï¼Œä½†æ˜¯åè€…æ˜æ˜¾æ›´å…·å¯è¯»æ€§ã€‚ ä¸‰ã€å¯å¤é€‰çš„æšä¸¾å±æ€§å¦‚æœç†Ÿæ‚‰iOSçš„å¼€å‘ï¼Œä½ ä¼šå‘ç°ç³»ç»Ÿå¾ˆå¤šçš„æšä¸¾ç±»å‹éƒ½æ˜¯å¯ä»¥å¤é€‰çš„ï¼Œä¾‹å¦‚è§†å›¾çš„æ‹‰ä¼¸æ¨¡å¼ï¼Œjsonçš„è§£æå±æ€§ç­‰ç­‰ï¼Œè¿™ä¸ä»…ä½¿ä»£ç å¯è¯»æ€§ä¼˜åŒ–ï¼Œä¹Ÿæ›´åŠ ç®€ä¾¿äº†ä¸€äº›é€‰é¡¹è®¾ç½®çš„ä»£ç ã€‚å½“æˆ‘ä»¬ç†è§£äº†æšä¸¾å°±æ˜¯æ•´å‹ä¹‹åï¼Œä¼šå‘ç°å…¶å®å¾ˆå®¹æ˜“åšåˆ°è¿™ä¸€ç‚¹ï¼š é¦–å…ˆï¼Œæˆ‘ä»¬ç»™å®šä¹‰çš„æšä¸¾å‚æ•°è®¾ç½®ä¸€ä¸ªæœ‰è§„å¾‹çš„å€¼ï¼š 12345typedef enum &#123; para1=1&lt;&lt;1, para2=1&lt;&lt;2, para3=1&lt;&lt;3&#125;myEnum; &lt;&lt;ç¬¦å·æ˜¯ä½è¿ç®—ä¸­çš„å·¦ç§»è¿ç®—ç¬¦ï¼Œå°†1è¿›è¡Œ1ä½ï¼Œ2ä½ï¼Œ3ä½çš„å·¦ç§»åï¼Œæˆ‘ä»¬å¾—åˆ°çš„äºŒè¿›åˆ¶æ•°å¦‚ä¸‹ï¼š 123000100100100 ç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸€ä¸ªå¤§è‡´æ€è·¯äº†ï¼Œç”¨å½“å‰ä½çš„0å’Œ1æ¥æ ‡è¯†å½“å‰å±æ€§æ˜¯å¦è®¾ç½®ï¼Œå¦‚æœæœ‰å‡ ä¸ªå±æ€§çš„å¤é€‰ï¼Œåªéœ€è¦å°†æˆ‘ä»¬çš„ç›¸åº”æšä¸¾è¿›è¡Œæˆ–çš„ä½è¿ç®—ï¼Œåœ¨å–çš„æ—¶å€™æ£€æµ‹ç›¸åº”ä½æ˜¯å¦ä¸º1å³å¯ï¼Œè¿™æ­£æ˜¯ä¸è¿ç®—å¯ä»¥åšåˆ°çš„ï¼š 1234567891011-(void)testEunm:(myEnum)para&#123; if (para&amp;1&lt;&lt;1) &#123; NSLog(@&quot;para1&quot;); &#125; if (para&amp;1&lt;&lt;2) &#123; NSLog(@&quot;para2&quot;); &#125; if (para&amp;1&lt;&lt;3) &#123; NSLog(@&quot;para3&quot;); &#125;&#125; æˆ‘ä»¬é€šè¿‡å¦‚ä¸‹æ–¹å¼è°ƒç”¨ï¼š 1[self testEunm:para2|para3]; æ‰“å°ç»“æœå¦‚ä¸‹ï¼š è¿™ç§ä½è¿ç®—çš„æšä¸¾åœ¨å®˜æ–¹sdkä¸­è¢«å¹¿æ³›ä½¿ç”¨ï¼Œèƒ½å¤Ÿæœ‰æ•ˆçš„ç®€åŒ–ä»£ç å’Œæé«˜ä»£ç çš„å¯è¯»æ€§ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"ä»£ç ä¼˜åŒ–","slug":"ä»£ç ä¼˜åŒ–","permalink":"http://huishao.cc/categories/ä»£ç ä¼˜åŒ–/"}],"tags":[],"keywords":[{"name":"ä»£ç ä¼˜åŒ–","slug":"ä»£ç ä¼˜åŒ–","permalink":"http://huishao.cc/categories/ä»£ç ä¼˜åŒ–/"}]},{"title":"æ‰©å±•äºRCLabelçš„æ”¯æŒå¼‚æ­¥åŠ è½½ç½‘ç»œå›¾ç‰‡çš„å¯Œæ–‡æœ¬å¼•æ“çš„è®¾è®¡","slug":"105æ‰©å±•äºRCLabelçš„æ”¯æŒå¼‚æ­¥åŠ è½½ç½‘ç»œå›¾ç‰‡çš„å¯Œæ–‡æœ¬å¼•æ“çš„è®¾è®¡","date":"2015-08-29T16:00:00.000Z","updated":"2021-07-01T07:33:15.989Z","comments":true,"path":"2015/08/30/105æ‰©å±•äºRCLabelçš„æ”¯æŒå¼‚æ­¥åŠ è½½ç½‘ç»œå›¾ç‰‡çš„å¯Œæ–‡æœ¬å¼•æ“çš„è®¾è®¡/","link":"","permalink":"http://huishao.cc/2015/08/30/105æ‰©å±•äºRCLabelçš„æ”¯æŒå¼‚æ­¥åŠ è½½ç½‘ç»œå›¾ç‰‡çš„å¯Œæ–‡æœ¬å¼•æ“çš„è®¾è®¡/","excerpt":"","text":"æ‰©å±•äºRCLabelçš„æ”¯æŒå¼‚æ­¥åŠ è½½ç½‘ç»œå›¾ç‰‡çš„å¯Œæ–‡æœ¬å¼•æ“çš„è®¾è®¡åœ¨iOSå¼€å‘ä¸­ï¼Œå›¾æ–‡æ··æ’ä¸€ç›´éƒ½æ˜¯UIç¼–ç¨‹çš„ä¸€ä¸ªæ ¸å¿ƒç‚¹ï¼Œä¹Ÿæœ‰è®¸å¤šä¼˜ç§€çš„ç¬¬ä¸‰æ–¹å¼•æ“ï¼Œå…¶ä¸­å¾ˆæœ‰åçš„ä¸€å¥—å›¾æ–‡æ··æ’çš„æ¡†æ¶å«åšDTCoreTextã€‚ä½†æ˜¯åœ¨å‰äº›æ—¥çš„åšçš„ä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘å¹¶æ²¡æœ‰é‡‡ç”¨è¿™å¥—æ¡†æ¶ï¼ŒåŸå› æœ‰äºŒï¼Œä¸€æ˜¯è¿™å¥—æ¡†æ¶ä½“ç§¯éå¸¸å¤§ï¼Œè€Œé¡¹ç›®çš„éœ€æ±‚å…¶å®å¹¶ä¸å¤ªé«˜ï¼›äºŒæ˜¯è¦åœ¨è¿™å¥—æ¡†æ¶ä¸­ä¿®æ”¹ä¸€äº›ä¸œè¥¿ï¼Œéš¾åº¦ä¹Ÿéå¸¸å¤§ï¼Œæˆ‘æœ€ç»ˆé‡‡ç”¨çš„æ˜¯ä¸€ä¸ªå«åšRCLabelçš„ç¬¬ä¸‰æ–¹æ§ä»¶ï¼Œç»è¿‡ä¸€äº›ç®€å•çš„ä¼˜åŒ–å’Œå®Œå–„ï¼Œè¾¾åˆ°äº†é¡¹ç›®çš„è¦æ±‚ã€‚ å…ˆæ¥ä»‹ç»ä¸€ä¸‹æˆ‘é¡¹ç›®ä¸­çš„å›¾æ–‡æ··æ’çš„éœ€æ±‚ï¼šé¦–å…ˆæˆ‘ä»æœåŠ¡å™¨ä¸­å–åˆ°çš„æ•°æ®æ˜¯å­—ç¬¦ä¸²ï¼Œä½†æ˜¯å…¶ä¸­ç©¿æ’å›¾ç‰‡çš„ä½ç½®æ˜¯ä¸€ä¸ªHTMLçš„å›¾ç‰‡æ ‡ç­¾ï¼Œæ ‡ç­¾é‡Œçš„èµ„æºè·¯å¾„å°±æ˜¯å›¾ç‰‡çš„è¯·æ±‚åœ°å€ã€‚éœ€è¦è¾¾åˆ°çš„è¦æ±‚æ˜¯è¿™äº›æ•°æ®æ˜¾ç¤ºå‡ºæ¥åï¼Œå›¾ç‰‡çš„ä½ç½®è¦ç©ºå‡ºæ¥ï¼Œç„¶åé€šè¿‡å¼‚æ­¥çš„ç½‘ç»œè¯·æ±‚è·å–å›¾ç‰‡çš„æ•°æ®ï¼Œå†å°†å›¾ç‰‡æ’å…¥æ–‡å­—ä¸­ã€‚ è¦è‡ªå·±å®ç°ä¸€å¥—è¿™æ ·çš„å¼•æ“ç¡®å®ä¼šæ¯”è¾ƒéº»çƒ¦ï¼Œå¹¸è¿çš„æ˜¯RCLabelå¯ä»¥å®Œç¾çš„å¸®æˆ‘ä»¬è§£æå¸¦æœ‰HTMLæ ‡ç­¾çš„æ•°æ®ï¼Œè¿›è¡Œå›¾æ–‡æ··æ’ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹è¿™ä¸ªä¸œè¥¿æ€ä¹ˆç”¨ï¼Œä¸‹é¢æ˜¯æˆ‘å°è£…çš„ä¸€ä¸ªå±•ç¤ºhtmlæ•°æ®çš„viewï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869@interface YHBaseHtmlView()&lt;YHRTLabelImageDelegate&gt;&#123; //RCLabelå¯¹è±¡ RCLabel * _rcLabel; //ä¿å­˜å±æ€§ ç”¨äºå¼‚æ­¥åŠ è½½å®Œæˆååˆ·æ–° RTLabelComponentsStructure * _origenComponent; //å«htmlæ ‡ç­¾çš„æ•°æ®å­—ç¬¦ä¸² NSString * _srt;&#125;@end@implementation YHBaseHtmlView/*// Only override drawRect: if you perform custom drawing.// An empty implementation adversely affects performance during animation.- (void)drawRect:(CGRect)rect &#123; // Drawing code&#125;*/- (instancetype)initWithCoder:(NSCoder *)coder&#123; self = [super initWithCoder:coder]; if (self) &#123; //å°†rclabelåˆå§‹åŒ– _rcLabel = [[RCLabel alloc]init]; [self addSubview:_rcLabel]; &#125; return self;&#125;- (instancetype)initWithFrame:(CGRect)frame&#123; self = [super initWithFrame:frame]; if (self) &#123; _rcLabel = [[RCLabel alloc]initWithFrame:frame]; [self addSubview:_rcLabel]; &#125; return self;&#125;-(void)reSetHtmlStr:(NSString *)htmlStr&#123; _srt = htmlStr; //è¿™ä¸ªä»£ç†æ˜¯æˆ‘é¢å¤–æ·»åŠ çš„ åé¢è§£é‡Š _rcLabel.imageDelegate=self; //è®¾ç½®frame _rcLabel.frame=CGRectMake(0, 0, self.frame.size.width, 0); //è®¾ç½®å±æ€§ _origenComponent = [RCLabel extractTextStyle:htmlStr IsLocation:NO withRCLabel:_rcLabel]; _rcLabel.componentsAndPlainText = _origenComponent; //è·å–æ’ç‰ˆåçš„size CGSize size = [_rcLabel optimumSize]; //é‡æ–°è®¾ç½®frame _rcLabel.frame=CGRectMake(0, 0, _rcLabel.frame.size.width, size.height); self.frame=CGRectMake(self.frame.origin.x, self.frame.origin.y, _rcLabel.frame.size.width, size.height);&#125;//è¿™æ˜¯æˆ‘é¢å¤–æ·»åŠ çš„ä»£ç†æ–¹æ³•çš„å®ç°-(void)YHRTLabelImageSuccess:(RCLabel *)label&#123; _origenComponent = [RCLabel extractTextStyle:_srt IsLocation:NO withRCLabel:_rcLabel]; _rcLabel.componentsAndPlainText = _origenComponent; CGSize size = [_rcLabel optimumSize]; _rcLabel.frame=CGRectMake(0, 0, _rcLabel.frame.size.width, size.height); self.frame=_rcLabel.frame; if ([self.delegate respondsToSelector:@selector(YHBaseHtmlView:SizeChanged:)]) &#123; [self.delegate YHBaseHtmlView:self SizeChanged:self.frame.size]; &#125;&#125; RCLabelçš„ç”¨æ³•å¾ˆç®€å•ï¼Œæ€»ç»“æ¥è¯´åªæœ‰ä¸‰æ­¥ï¼š 1.åˆå§‹åŒ–å¹¶è®¾ç½®frame 2.é€šè¿‡å¸¦htmlæ ‡ç­¾çš„æ•°æ®è¿›è¡Œå±æ€§çš„åˆå§‹åŒ– 3.å°†å±æ€§è¿›è¡Œsetè®¾ç½®å¹¶é‡è®¾è§†å›¾frame RCLabelæ˜¯å¾ˆå¼ºå¤§ï¼Œå¹¶ä¸”ä»£ç å¾ˆç®€ç»ƒï¼Œä½†æ˜¯å…¶ä¸­å¤„ç†å›¾ç‰‡çš„éƒ¨åˆ†å¿…é¡»æ˜¯æœ¬åœ°çš„å›¾ç‰‡ï¼Œå³å›¾ç‰‡htmlæ ‡ç­¾ä¸­çš„è·¯å¾„å¿…é¡»æ˜¯æœ¬åœ°å›¾ç‰‡çš„åå­—ï¼Œå…¶å†…éƒ¨æ˜¯é€šè¿‡[UIImage ImageNamed:]è¿™ä¸ªæ–¹æ³•è¿›è¡Œå›¾ç‰‡çš„æ¸²æŸ“çš„ï¼Œæ‰€ä»¥è¦è¾¾åˆ°æˆ‘ä»¬çš„éœ€è¦ï¼Œæˆ‘ä»¬éœ€è¦å¯¹å…¶è¿›è¡Œä¸€äº›ç®€å•çš„æ‰©å±•ï¼š 1ã€åœ¨å±æ€§è®¾ç½®æ–¹æ³•ä¸­æ·»åŠ ä¸€ä¸ªå‚æ•°ï¼Œæ¥åŒºåˆ†æœ¬åœ°å›¾ç‰‡ä¸ç½‘ç»œå›¾ç‰‡ï¼š 12//æˆ‘åœ¨è¿™ä¸ªæ–¹æ³•ä¸­æ·»åŠ äº†locationè¿™ä¸ªboolå€¼ï¼Œå®é™…ä¸Šrclabelè¿™ä¸ªå‚æ•°ä¹Ÿæ˜¯æˆ‘æ·»åŠ çš„ï¼Œæ˜¯ä¸ºäº†åé¢ä»£ç†ä½¿ç”¨çš„+ (RTLabelComponentsStructure*)extractTextStyle:(NSString*)dataimage IsLocation:(BOOL)location withRCLabel:(RCLabel *)rcLabel; 2ã€åœ¨å®ç°æ–¹æ³•ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼Œå› ä¸ºåŸæ–‡ä»¶æœ‰1900å¤šè¡Œï¼Œåœ¨å…¶ä¸­å¼„æ¸…æ¥šé€»è¾‘å…³ç³»ä¹Ÿç¡®å®è´¹äº†æˆ‘ä¸å°çš„åŠ›æ°”ï¼Œæˆ‘è¿™é‡Œåªå°†æˆ‘æ·»åŠ çš„ä»£ç è´´è¿‡æ¥ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546#warning è¿™é‡Œè¿›è¡Œäº†å…¼å®¹æ€§å¤„ç† if (location) &#123; //æœ¬åœ°å›¾ç‰‡çš„æ¸²æŸ“ if (tempURL) &#123; UIImage *tempImg = [UIImage imageNamed:tempURL]; component.img = tempImg; &#125; &#125;else&#123;//è¿™é‡Œåšè¿œç¨‹å›¾ç‰‡æ•°æ®çš„å¤„ç† //è¿™é‡Œæˆ‘è¿›è¡Œäº†ç¼“å­˜çš„æ“ä½œï¼Œè¿™ä¸ªç¼“å­˜ä¸­å¿ƒæ˜¯æˆ‘å°è£…çš„æ¡†æ¶ä¸­çš„å¦ä¸€å¥—ä¸œè¥¿ï¼Œè¿™é‡Œå¯ä»¥ä¸ç”¨åœ¨æ„ //å…ˆè¯»ç¼“å­˜ NSData * ceche = [[YHBaseCecheCenter sharedTheSingletion] readCecheFile:tempURL fromPath:YHBaseCecheImage]; if (ceche) &#123; UIImage * tempImg = [UIImage imageWithData:ceche]; component.img=tempImg; &#125;else&#123; //åœ¨åˆ†çº¿ç¨‹ä¸­è¿›è¡Œå›¾ç‰‡æ•°æ®çš„è·å– dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^&#123; if (tempURL) &#123; NSData * data = [YHBaseData getDataWithUrl:tempURL]; if (data) &#123; //è·å–å®Œæˆåæ‘ç¼“å­˜ //åšç¼“å­˜ [[YHBaseCecheCenter sharedTheSingletion]writeCecheFile:data withFileID:tempURL toPath:YHBaseCecheImage]; //èµ‹å€¼ å›è°ƒä»£ç† UIImage * tempImg = [UIImage imageWithData:data]; component.img=tempImg; //è¿™é‡Œä»£ç†æ˜¯æˆ‘æ·»åŠ çš„ï¼Œå½“å›¾ç‰‡ä¸‹è½½å®Œæˆå é€šçŸ¥è§†å›¾é‡æ–°æ’ç‰ˆ if ([[rcLabel imageDelegate]respondsToSelector:@selector(YHRTLabelImageSuccess:)]) &#123; //åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œå›è°ƒ //è¿™ä¸ªåœ°æ–¹è¦åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œå¦åˆ™åˆ·æ–°ä¼šæœ‰å»¶æ—¶ dispatch_async(dispatch_get_main_queue(), ^&#123; [[rcLabel imageDelegate] YHRTLabelImageSuccess:rcLabel]; &#125;); &#125; &#125; &#125;; &#125;); &#125; &#125; é€šè¿‡å¦‚ä¸Šç®€å•çš„æ‰©å±•ï¼ŒåŸºæœ¬è¾¾åˆ°äº†é¡¹ç›®ä¸­çš„éœ€æ±‚ï¼Œè¿™é‡ŒæŠŠæˆ‘çš„ä¸€äº›æƒ³æ³•å’Œæ€è·¯åˆ†äº«ç»™å¤§å®¶ï¼Œæœ‰æ›´å¥½çš„è§£å†³æ–¹æ¡ˆï¼Œæˆ–è€…åŒæ˜¯å¼€å‘çˆ±å¥½è€…ï¼Œæ¬¢è¿æŒ‡ç‚¹ä¸äº¤æµï¼Œæˆ‘çš„QQæ˜¯316045346ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"ä»£ç çµé­‚","slug":"ä»£ç çµé­‚","permalink":"http://huishao.cc/categories/ä»£ç çµé­‚/"}],"tags":[],"keywords":[{"name":"ä»£ç çµé­‚","slug":"ä»£ç çµé­‚","permalink":"http://huishao.cc/categories/ä»£ç çµé­‚/"}]},{"title":"iOSç¨‹åºæ¡†æ¶è®¾è®¡ä¹‹çš®è‚¤åˆ‡æ¢åŠŸèƒ½","slug":"104iOSç¨‹åºæ¡†æ¶è®¾è®¡ä¹‹çš®è‚¤åˆ‡æ¢åŠŸèƒ½","date":"2015-08-20T16:00:00.000Z","updated":"2021-07-01T07:30:50.086Z","comments":true,"path":"2015/08/21/104iOSç¨‹åºæ¡†æ¶è®¾è®¡ä¹‹çš®è‚¤åˆ‡æ¢åŠŸèƒ½/","link":"","permalink":"http://huishao.cc/2015/08/21/104iOSç¨‹åºæ¡†æ¶è®¾è®¡ä¹‹çš®è‚¤åˆ‡æ¢åŠŸèƒ½/","excerpt":"","text":"iOSç¨‹åºæ¡†æ¶è®¾è®¡ä¹‹çš®è‚¤åˆ‡æ¢åŠŸèƒ½ä¸€ã€å¼•è¨€ç§»åŠ¨åº”ç”¨çš„å¼€å‘ä¸­ï¼Œæœ‰æ—¶æˆ‘ä»¬ä¼šéœ€è¦ä¾‹å¦‚æ›´æ¢çš®è‚¤æ­¤ç±»çš„åŠŸèƒ½ï¼Œandoridé‡‡ç”¨xmlé…ç½®UIçš„æ–¹å¼ï¼Œè¿™ä¸ªé—®é¢˜æˆ–è®¸è¿˜å®¹æ˜“è§£å†³äº›ï¼ŒiOSçš„ä¸»è¦UIé€»è¾‘åˆ™æ˜¯åœ¨ä»£ç ä¸­æ§åˆ¶çš„ï¼Œå¦‚æœæ²¡æœ‰ä¸€ä¸ªå¼ºå¤§çš„æ¡†æ¶æ–¹æ¡ˆï¼Œè¿™ä¸ªé—®é¢˜å°†å˜å¾—éå¸¸æ£˜æ‰‹ã€‚ç½‘ä¸Šä¹Ÿæœ‰å¾ˆå¤šè¯¸å¦‚æ­¤ç±»åŠŸèƒ½çš„ä¼˜ç§€æ¡ˆä¾‹ä¸æ¡†æ¶ï¼Œåœ¨è¿™ç¯‡åšå®¢ä¸­ï¼Œæˆ‘ä¸å¤§å®¶åˆ†äº«ä¸‹æˆ‘çš„è§£å†³æ–¹æ¡ˆï¼Œå…¶ä¸­å¦‚æœæœ‰ä¸æ°æˆ–è€…ç³Ÿç³•ä¹‹å¤„ï¼Œå¸Œæœ›ä¸é«˜äººä¸€èµ·äº¤æµã€‚ äºŒã€è®¾è®¡æ€è·¯ä¸æ¡†æ¶é¦–å…ˆæˆ‘çš„è®¾è®¡æ€è·¯æ˜¯é‡‡ç”¨é€šçŸ¥çš„æ–¹å¼ï¼ŒåŸç†å¯ä»¥å¦‚ä¸‹ç†è§£ä¸ºä»¥ä¸‹å‡ æ­¥ï¼š 1ã€åœ¨ç³»ç»Ÿçš„é€šçŸ¥ä¸­å¿ƒæ³¨å†Œä¸€ä¸ªé€šçŸ¥ 2ã€æ‰€æœ‰éœ€è¦æ›´æ”¹çš®è‚¤åŠŸèƒ½çš„controllerä½œä¸ºè¿™ä¸ªé€šçŸ¥çš„ç›‘å¬è€… 3ã€è®¾è®¡ä¸€ä¸ªçš®è‚¤çš„modelç±» 4ã€å°†controllerä¸­æœ‰å…³çš®è‚¤è®¾ç½®çš„å±æ€§ä»modelä¸­å– 5ã€åœ¨åˆ‡æ¢çš®è‚¤å‰æ›´æ”¹çš®è‚¤model 6ã€å‘é€æ›´æ”¹çš®è‚¤çš„é€šçŸ¥ ä¸Šé¢çš„6ä¸ªæ­¥éª¤æ˜¯è¿™æ•´ä¸ªæ¡†æ¶çš„åŸºæœ¬é€»è¾‘ï¼Œæ¡†æ¶æ— éæ˜¯å°†è¿™äº›é€»è¾‘è¿›è¡Œä¼˜åŒ–ä¸å°è£…ã€‚ä¸‹é¢è¿™å¼ å›¾å¾ˆçƒ‚ï¼Œä½†æ˜¯æ€è·¯å¾ˆæ¸…æ™°ï¼š é¦–å…ˆæœ€ä¸Šé¢æ˜¯æˆ‘è®¾è®¡çš„ä¸€ä¸ªåˆ‡æ¢ä¸»é¢˜çš„managerï¼Œæˆ‘è¿™é‡Œçš„è®¾è®¡æœ‰ä¸ªç¼ºé™·ï¼Œæˆ‘å°†managerå’Œä¸»é¢˜é…ç½®ç›¸å…³çš„modelæ··åˆåœ¨äº†ä¸€èµ·ï¼Œå†™çš„æ—¶å€™ç®€å•äº†äº›ï¼Œå¯è¿™ç»™æ¡†æ¶çš„é€»è¾‘ä¸Šå¸¦æ¥äº†æ··ä¹±ï¼Œæ‰€ä»¥æˆ‘åœ¨å›¾ä¸­ä½¿ç”¨æ›²çº¿å’Œè™šæ¤­åœ†å°†å…¶åˆ†ç¦»ï¼Œmanageræ¥æ§åˆ¶åˆ‡æ¢modelçš„å±æ€§ï¼Œæˆ‘ä»¬åœ¨controllerä¸­å–modelçš„å±æ€§è¿›è¡Œé…ç½®ï¼Œè¿™ä¸ªmanagerçš„é€»è¾‘ä½ç½®æ˜¯äº¤äº’æ—¶é—´ä¸é€šçŸ¥ä¸­å¿ƒçš„æ¡¥æ¢ã€‚managerä¸­çš„æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152//å•ä¾‹æ–¹æ³•+(instancetype)sharedTheSingletion&#123; static YHTopicColorManager * sharedModel = nil; static dispatch_once_t predicate; dispatch_once(&amp;predicate, ^&#123; sharedModel = [[YHTopicColorManager alloc] init]; &#125;); return sharedModel;&#125;//è¿™ä¸ªæ–¹æ³•åº”è¯¥åˆ†ç¦»åœ¨modelä¸­ï¼Œä»æœ¬åœ°è¯»å–å½“å‰çš„ä¸»é¢˜æ¨¡å¼ï¼Œæ›´æ”¹åæˆ‘ä»¬åªéœ€è¦æ›´æ”¹æœ¬åœ°æ•°æ® ç„¶åé‡æ–°è°ƒç”¨è¿™ä¸ªæ–¹æ³•å³å¯-(void)getTopicModel&#123; //ä»æœ¬åœ°è¯»å– int tp = [YHSASystemSettingManager sharedTheSingletion].topic; if (tp==0) &#123; //é»˜è®¤ä¸ºç™½å¤©ä¸»é¢˜ tp=dayTime; [YHSASystemSettingManager sharedTheSingletion].topic = tp; &#125; switch (tp) &#123; //è¿™é‡Œæ˜¯æˆ‘å®šä¹‰çš„ä¸€äº›æšä¸¾ï¼Œæ‹¿ç™½å¤©å’Œå¤œé—´æ¨¡å¼ç¤ºèŒƒ case dayTime://ç™½å¤©æ¨¡å¼ &#123; //è¿™é‡Œé¢å®šä¹‰ä¸€äº›ç™½å¤©æ¨¡å¼ä¸‹ æ§ä»¶çš„é¢œè‰²å±æ€§ ä¹Ÿå¯ä»¥å®šä¹‰å…¶ä»– _navColor=[UIColor colorWithRed:10/255.0 green:85/255.0 blue:160/255.0 alpha:1]; _bgColor=[UIColor colorWithRed:1 green:1 blue:1 alpha:1]; _btnColor=[UIColor colorWithRed:10/255.0 green:85/255.0 blue:160/255.0 alpha:1]; _textColor=[UIColor colorWithRed:0 green:0 blue:0 alpha:1]; _btnTextColor=[UIColor colorWithRed:1 green:1 blue:1 alpha:1]; _navTextColor= [UIColor whiteColor]; &#125; break; case nightTime://å¤œé—´æ¨¡å¼ &#123; //è¿™é‡Œé¢å®šä¹‰å¤œé—´æ¨¡å¼ä¸‹çš„ç›¸å…³æ§ä»¶çš„é¢œè‰²å±æ€§ _navColor=[UIColor colorWithRed:10/255.0 green:85/255.0 blue:160/255.0 alpha:1]; _bgColor=[UIColor colorWithRed:0 green:0 blue:0 alpha:1]; _btnColor=[UIColor colorWithRed:10/255.0 green:85/255.0 blue:160/255.0 alpha:1]; _textColor=[UIColor colorWithRed:1 green:1 blue:1 alpha:1]; _btnTextColor=[UIColor colorWithRed:1 green:1 blue:1 alpha:1]; _navTextColor= [UIColor whiteColor]; &#125; break; default: break; &#125;&#125;//å‘é€æ›´æ”¹ä¸»é¢˜çš„æ¶ˆæ¯+(void)postTopicChangeMessage&#123; [[NSNotificationCenter defaultCenter]postNotificationName:YHTopicChangeTopicNotication object:nil];&#125; åœ¨managerè°ƒç”¨é€šçŸ¥ä¸­å¿ƒå‘é€é€šçŸ¥åï¼Œæˆ‘ä»¬è¦è®©æ‰€æœ‰éœ€è¦æ”¹å˜ä¸»é¢˜çš„è§†å›¾æ§åˆ¶å™¨éƒ½æ¥æ”¶åˆ°é€šçŸ¥ï¼Œæœ€ç®€ä¾¿çš„åšæ³•æ˜¯ï¼Œæˆ‘ä»¬è®¾è®¡ä¸€ä¸ªçˆ¶ç±»ï¼Œè®©çˆ¶ç±»ç›‘å¬é€šçŸ¥ï¼Œæ‰€æœ‰éœ€è¦æœ‰ä¸»é¢˜æ›´æ”¹åŠŸèƒ½çš„æ§åˆ¶å™¨ç»§æ‰¿äºå®ƒå³å¯ï¼Œè¿™ä¸ªfather controllerçš„æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617//ç§»é™¤ç›‘å¬-(void)dealloc&#123; [[NSNotificationCenter defaultCenter]removeObserver:self];&#125;- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view. //æ·»åŠ ç›‘å¬ä¸»é¢˜æ›´æ¢çš„é€šçŸ¥ [[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(useYHTopicToCreatViewWithModel) name:YHTopicChangeTopicNotication object:nil]; //åè®®ä¸­çš„æ–¹æ³•ï¼ŒåŠ è½½ä¸»é¢˜ ä¸€ä¼šå†è¯´ [self useYHTopicToCreatViewWithModel];&#125;//å­ç±»å®ç°å¦‚ä¸‹æ–¹æ³•-(void)useYHTopicToCreatViewWithModel&#123; &#125; åˆ°ç›®å‰ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥é¡ºåˆ©æ¥æ”¶åˆ°ä¸»é¢˜åˆ‡æ¢çš„é€šçŸ¥ï¼Œå¯æ˜¯è¦æ‰€æœ‰å­ç±»éƒ½æ­¥ä¼ä¸€è‡´çš„æ‰§è¡Œç›¸åŒä¸€ä¸ªæ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªåè®®æ¥çº¦å®šï¼Œè¿™å°±æ˜¯å›¾ä¸­çš„ä¸»æ¡†æ¶çš„protocolï¼Œè¿™ä¸ªåè®®ä¸­è§„å®šä¸€ä¸ªç‰¹å®šçš„æ–¹æ³•ï¼Œæˆ‘ä»¬åœ¨çˆ¶ç±»ä¸­è°ƒç”¨ï¼Œå­ç±»ä¸­å®ç°ï¼Œå½“æ”¶åˆ°é€šçŸ¥æ—¶ï¼Œæ‰€æœ‰å­ç±»éƒ½å°†é‡æ–°åŠ è½½è¿™ä¸ªæ–¹æ³•ï¼Œå¦‚æœæˆ‘ä»¬å°†çš®è‚¤è®¾ç½®éƒ¨åˆ†åœ¨è¿™ä¸ªæ–¹æ³•ä¸­å®ç°ï¼Œé‚£ä¹ˆæ­£æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœï¼Œæ‰€æœ‰çš®è‚¤è®¾ç½®éƒ½è¢«é‡æ–°åŠ è½½äº†ã€‚åè®®å¦‚ä¸‹ï¼š 12345678910111213/** *è¿™é‡Œå®šä¹‰ä¸»é¢˜çš„é£æ ¼ */typedef enum &#123; dayTime=1,//ç™½å¤© nightTime//å¤œé—´&#125;YHTopicModel;@protocol YHTopicProcotol &lt;NSObject&gt;//æ‰€æœ‰å¯ä»¥æ›´æ¢ä¸»é¢˜çš„ç•Œé¢å¿…é¡»éµå®ˆè¿™ä¸ªåè®®è°ƒç”¨å¹¶å®ç°å¦‚ä¸‹æ–¹æ³•//å°†è§†å›¾ä¸­æ§ä»¶çš„é¢œè‰²æ‘„ä½éƒ¨åˆ†å…¨éƒ¨æ”¾åœ¨è¿™ä¸ªæ–¹æ³•ä¸­@required-(void)useYHTopicToCreatViewWithModel;@end è¿™æ—¶ï¼Œå°±å‰©ä¸‹æˆ‘ä»¬è¿™å¥—é€»è¾‘çš„æœ€åä¸€æ­¥äº†ï¼Œæˆ‘ä»¬åªéœ€è¦å°†æ§ä»¶çš„é¢œè‰²è®¾ç½®å†™åœ¨å­ç±»çš„åè®®æ–¹æ³•ä¸­ï¼Œå¹¶ä¸”ï¼Œè¿™äº›è®¾ç½®çš„æ•°æ®æ¥æºäºmodelè¿™ä¸ªæ¨¡å‹ï¼Œæ•´ä¸ªä½“ç³»å°±å®Œæˆäº†ï¼Œå­ç±»å®ç°æ–¹æ³•å¦‚ä¸‹ï¼š 1234567891011121314151617-(void)useYHTopicToCreatViewWithModel&#123;//è·å–åˆ°æ¨¡å‹ YHTopicColorManager * model = [YHTopicColorManager sharedTheSingletion]; //åŠ è½½æ¨¡å‹æ•°æ® [model getTopicModel]; //è¿›è¡Œè®¾ç½® self.view.backgroundColor = model.bgColor; _schoolLabel.textColor = model.textColor; _phoneLabel.textColor = model.textColor; _secertLabel.textColor = model.textColor; _reWriteSecretLabel.textColor = model.textColor; _questionLabel.textColor = model.textColor; _answerLabel.textColor = model.textColor; _registBtn.backgroundColor = model.btnColor; [_registBtn setTitleColor:model.btnTextColor forState:UIControlStateNormal]; &#125; æˆ‘ç®€å•å†™äº†ä¸€äº›ç•Œé¢ï¼Œä¸è®ºä»»ä½•åœ°æ–¹åˆ‡æ¢çš®è‚¤ï¼Œæ‰€æœ‰ç•Œé¢æ•ˆæœéƒ½ä¼šæ”¹å˜ï¼š åˆ‡æ¢å¤œé—´æ¨¡å¼å‰ï¼š å¼€å¯å¤œé—´æ¨¡å¼åï¼š ä¸‰ã€è¡¥å……è‡ªå·±çš„æ€è·¯å®ç°æ›´æ¢ä¸»é¢˜çš„ä¸€ç§æ–¹æ³•ï¼ŒçœŸè¯šçš„æƒ³ä¸å¿—åŒé“åˆçš„æœ‹å‹äº¤æµå¼€å‘ç»éªŒï¼Œå¦‚æœä½ æƒ³æ‰¹è¯„ï¼Œç‚¹æ‹¨ï¼Œäº¤æµæˆ–è€…æ˜¯å€Ÿé‰´æˆ‘çš„ä»£ç ï¼ŒQ316045346éšæ—¶æ¬¢è¿ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"ä»£ç çµé­‚","slug":"ä»£ç çµé­‚","permalink":"http://huishao.cc/categories/ä»£ç çµé­‚/"}],"tags":[],"keywords":[{"name":"ä»£ç çµé­‚","slug":"ä»£ç çµé­‚","permalink":"http://huishao.cc/categories/ä»£ç çµé­‚/"}]},{"title":"Xcodeåˆ›å»ºå¯å¤ç”¨çš„ä»£ç å—","slug":"102Xcodeåˆ›å»ºå¯å¤ç”¨çš„ä»£ç å—","date":"2015-08-12T16:00:00.000Z","updated":"2021-07-01T07:28:01.268Z","comments":true,"path":"2015/08/13/102Xcodeåˆ›å»ºå¯å¤ç”¨çš„ä»£ç å—/","link":"","permalink":"http://huishao.cc/2015/08/13/102Xcodeåˆ›å»ºå¯å¤ç”¨çš„ä»£ç å—/","excerpt":"","text":"Xcodeåˆ›å»ºå¯å¤ç”¨çš„ä»£ç å—åœ¨å„ç§ç¨‹åºå¼€å‘ä¸­ï¼Œç¼–å†™ä»£ç çš„æ•ˆç‡æ˜¯éå¸¸é‡è¦çš„ä¸€ä¸ªé—®é¢˜ï¼Œå„ç§ä¼˜ç§€çš„ç¼–è¯‘å™¨ä¹Ÿéƒ½æœ‰ç›¸åº”çš„æ’ä»¶ç”¨äºæé«˜ç¨‹åºå‘˜çš„ç¼–ç é€Ÿåº¦ã€‚åœ¨xcodeä¸­ï¼Œå¯ä»¥é€šè¿‡å®šä¹‰ä»£ç å—çš„æ–¹å¼å°†å¸¸ç”¨çš„ä¸€éƒ¨åˆ†ä»£ç è¿›è¡Œå¿«æ·å‘¼å‡ºï¼Œé¦–å…ˆxcodeä¸­ä¸ºæˆ‘ä»¬å®šä¹‰å¥½äº†è®¸å¤šä»£ç å—ï¼Œä¾‹å¦‚ï¼š åœ¨ä½¿ç”¨è¿™äº›ä»£ç æ¨¡æ¿æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦å°†å…¶æ‹–å…¥æˆ‘ä»¬çš„ä»£ç ä¸­ï¼Œæˆ–è€…ç›´æ¥é”®å…¥å¿«æ·é”®å³å¯ï¼Œååˆ†çš„æ–¹ä¾¿ï¼Œå½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†æˆ‘ä»¬è‡ªå·±å¸¸ç”¨çš„ä»£ç å—åŒ…è£…æˆæ¨¡æ¿ï¼Œä¾¿äºæˆ‘ä»¬å¤ç”¨ã€‚ ä¾‹å¦‚ï¼Œæˆ‘å†™å¦‚ä¸‹çš„ä»£ç æ®µï¼š 1@property(nonatomic,copy)NSString * str; å°†å…¶é€‰ä¸­ï¼Œé•¿æŒ‰å·¦é”®ï¼Œç›´åˆ°é¼ æ ‡å˜æˆç®­å¤´æ¨¡æ ·ï¼Œç„¶åå°†å…¶æ‹–å…¥å³ä¸‹æ–¹çš„ä»£ç å—æ¨¡æ¿åŒºï¼Œä¼šå¼¹å‡ºå¦‚ä¸‹è®¾ç½®èœå•ï¼š titleç”¨æ¥è®¾ç½®æˆ‘ä»¬çš„ä»£ç å—åç§°ã€‚ platformç”¨æ¥è®¾ç½®ä»£ç å—å¯ä»¥ä½¿ç”¨çš„å¹³å°ã€‚ Languageç”¨æ¥è®¾ç½®æ”¯æŒçš„ç¼–ç¨‹è¯­è¨€ã€‚ completionç”¨æ¥è®¾ç½®å¿«æ·é”®å…¥çš„å¿«æ·é”®ï¼Œæ¯”å¦‚æˆ‘ä»¬è®¾ç½®ä¸ºpro å¦‚æœæˆ‘ä»¬éœ€è¦å°†å…¶ä¸­çš„æŸäº›å‚æ•°è¿›è¡Œï¼Œæ›¿æ¢ï¼Œæ¯”å¦‚ä¸Šé¢çš„NSStringå’Œstr,æˆ‘ä»¬æƒ³åœ¨ç¼–ç æ—¶è‡ªå®šä¹‰ä»–ä»¬ï¼Œæˆ‘ä»¬è¿™æ ·å†™ï¼š &lt;#NSString#&gt;*&lt;#str#&gt; è¿™æ—¶ï¼Œç•Œé¢å°±å˜æˆäº†å¦‚ä¸‹è¿™æ ·ï¼š æˆ‘ä»¬ç‚¹å‡»Doneåï¼Œåœ¨ä»£ç ä¸­è¾“å…¥proä¼šè‡ªåŠ¨æç¤ºå‡ºè¿™æ®µä»£ç æ®µï¼Œå˜æˆæ–¹ä¾¿äº†è®¸å¤šã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"æ—¥å¸¸æŠ€å·§","slug":"æ—¥å¸¸æŠ€å·§","permalink":"http://huishao.cc/categories/æ—¥å¸¸æŠ€å·§/"}],"tags":[],"keywords":[{"name":"æ—¥å¸¸æŠ€å·§","slug":"æ—¥å¸¸æŠ€å·§","permalink":"http://huishao.cc/categories/æ—¥å¸¸æŠ€å·§/"}]},{"title":"iOSä¸­RunLoopæœºåˆ¶æµ…æ¢","slug":"103iOSä¸­RunLoopæœºåˆ¶æµ…æ¢","date":"2015-08-12T16:00:00.000Z","updated":"2021-07-01T07:29:41.399Z","comments":true,"path":"2015/08/13/103iOSä¸­RunLoopæœºåˆ¶æµ…æ¢/","link":"","permalink":"http://huishao.cc/2015/08/13/103iOSä¸­RunLoopæœºåˆ¶æµ…æ¢/","excerpt":"","text":"iOSä¸­RunLoopæœºåˆ¶æµ…æ¢ä¸€ã€æµ…è¯†RunLoopRunLoopè¿™ä¸ªå®¶ä¼™åœ¨iOSå¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¸€ç›´åœ¨ç”¨ï¼Œå´ä»æœªæ³¨æ„è¿‡ä»–ï¼Œç”šè‡³éƒ½ä¸ä»è§è¿‡ä»–çš„é¢å­”ï¼Œé‚£ä¸ªè¿™ä¸ªç¥ç§˜çš„å®¶ä¼™ç©¶ç«Ÿæ˜¯åšä»€ä¹ˆçš„ï¼Ÿé¦–å…ˆï¼Œæˆ‘ä»¬å…ˆæ¥è§‚å¯Ÿä¸€ä¸‹æˆ‘ä»¬çš„ç¨‹åºè¿è¡Œæœºåˆ¶ã€‚ æ— è®ºæ˜¯é¢å‘å¯¹è±¡çš„è¯­è¨€æˆ–æ˜¯é¢å‘è¿‡ç¨‹çš„è¯­è¨€ï¼Œä»£ç çš„æ‰§è¡Œç»ˆç©¶æ˜¯é¢å‘è¿‡ç¨‹çš„ã€‚çº¿ç¨‹ä¹Ÿä¸€æ ·ï¼Œä¸€ä¸ªçº¿ç¨‹ä»å¼€å§‹ä»£ç æ‰§è¡Œï¼Œåˆ°ç»“æŸä»£ç é”€æ¯ã€‚å°±åƒHELLO WORLDç¨‹åºï¼Œæ‰“å°å‡ºå­—ç¬¦ä¸²åç¨‹åºå°±ç»“æŸäº†ï¼Œé‚£ä¹ˆï¼Œæˆ‘ä»¬çš„appæ˜¯å¦‚ä½•å®ç°å¦‚ä¸‹è¿™æ ·çš„æœºåˆ¶çš„å‘¢ï¼šappä»è¿è¡Œå¼€å§‹ä¸€ç›´å¤„äºå¾…å‘½çŠ¶æ€ï¼Œæ¥æ”¶åˆ°ç±»ä¼¼ç‚¹å‡»äº‹ä»¶ç­‰ç”¨æˆ·äº¤äº’åæ‰§è¡Œç›¸åº”æ“ä½œï¼Œå®Œæˆåç»§ç»­ç­‰å¾…äº¤äº’å“åº”ï¼Œç›´åˆ°æˆ‘ä»¬å°†ç¨‹åºæ€æ­»ã€‚é€šè¿‡è¿™ä¸ªè¿‡ç¨‹çš„åˆ†æï¼Œæˆ‘ä»¬å¯èƒ½ä¼šçŒœåˆ°ï¼Œæˆ‘ä»¬æ‰§è¡Œçš„ä¸»çº¿ç¨‹ä¸€å®šæ˜¯åœ¨ä¸€ä¸ªæ­»å¾ªç¯ä¸­ï¼Œæ²¡æœ‰ä»»åŠ¡çš„æ—¶å€™è¿›è¡Œä¼‘çœ ï¼Œæ¥æ”¶åˆ°ä»»åŠ¡åè¢«æ¿€æ´»æ‰§è¡Œä»»åŠ¡ã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥ç†è§£äº†ï¼Œè¿™æ ·ä¸€ä¸ªç®¡ç†çº¿ç¨‹æ‰§è¡Œä»»åŠ¡çš„æœºåˆ¶å°±æ˜¯RunLoopæœºåˆ¶ï¼Œçº¿ç¨‹åœ¨æ‰§è¡Œä¸­çš„ä¼‘çœ ä¸æ¿€æ´»å°±æ˜¯ç”±RunLoopå¯¹è±¡è¿›è¡Œç®¡ç†çš„ã€‚ äºŒã€RunLoopä¸çº¿ç¨‹çš„å…³ç³»ä¸Šé¢æˆ‘ä»¬è¯´åˆ°ï¼ŒRunLoopæ˜¯ç”¨æ¥ç®¡ç†çº¿ç¨‹çš„ï¼Œé‚£ä¹ˆä»–ä»¬ç›´æ¥æœ‰ç€æ€æ ·çš„å…³ç³»ï¼Œåˆæ˜¯æ€æ ·è¿›è¡Œäº¤äº’çš„å‘¢ã€‚äº‹å®ä¸Šï¼Œæ¯ä¸€ä¸ªçº¿ç¨‹ä¸­éƒ½æœ‰ä¸€ä¸ªRunloopå¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡å…·ä½“æ–¹æ³•è·å¾—ã€‚è¿™é‡Œæœ‰ä¸€ç‚¹éœ€è¦æˆ‘ä»¬æ³¨æ„ï¼Œå®˜æ–¹æ–‡æ¡£ä¸Šæè¿°ï¼Œè™½ç„¶æ¯ä¸€ä¸ªçº¿ç¨‹ä¸­éƒ½å¯ä»¥è·å–RunLoopå¯¹è±¡ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯æ¯ä¸€ä¸ªçº¿ç¨‹ä¸­éƒ½æœ‰è¿™ä¸ªå®ä¾‹å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·ç†è§£ï¼šå¦‚æœæˆ‘ä»¬ä¸è·å–runloopï¼Œè¿™ä¸ªrunloopå°±ä¸å­˜åœ¨ï¼Œæˆ‘ä»¬è·å–æ—¶ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œå°±ä¼šå»åˆ›å»ºã€‚åœ¨ä¸»çº¿ç¨‹ä¸­ï¼Œè¿™ä¸ªMainRunLoopæ˜¯é»˜è®¤åˆ›å»ºå¹¶è¿è¡Œæ¿€æ´»çš„ã€‚ ä¸‰ã€è®¤è¯†NSRunLoopNSRunLoopæ˜¯Cocoaæ¡†æ¶ä¸­çš„ç±»ï¼Œä¸ä¹‹å¯¹åº”ï¼Œåœ¨Core Fundationä¸­æ˜¯CFRunLoopRefç±»ã€‚è¿™ä¸¤è€…çš„åŒºåˆ«æ˜¯å‰è€…ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œè€Œåè€…æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚æˆ‘ä»¬è¿™é‡Œåªæ¥è®¨è®ºNSRunLoopçš„å±æ€§å’Œæ–¹æ³•ï¼š + (NSRunLoop *)currentRunLoop; è·å–å½“å‰çº¿ç¨‹çš„RunLoopï¼šæœ‰åˆ™è·å–ï¼Œæ— åˆ™åˆ›å»º + (NSRunLoop *)mainRunLoop ; è·å–ä¸»çº¿ç¨‹çš„RunLoop @property (readonly, copy) NSString *currentMode; è·å–å½“å‰runloopçš„æ‰§è¡Œæ¨¡å¼ï¼Œä¸¤ç§æ¨¡å¼å¦‚ä¸‹ï¼š NSString * const NSDefaultRunLoopMode; é»˜è®¤æ¨¡å¼ï¼Œæ¥æ”¶å¤§éƒ¨åˆ†è¾“å…¥æºçš„å“åº” NSString * const NSRunLoopCommonModes; å¤šç§æ¨¡å¼çš„é›†åˆ - (CFRunLoopRef)getCFRunLoop; è·å–RunLoopçš„CFRunLoopRefå¯¹è±¡ - (void)addTimer:(NSTimer )timer forMode:(NSString )mode; å°†å®šæ—¶å™¨æ·»åŠ åˆ°runloopä¸­ - (void)addPort:(NSPort )aPort forMode:(NSString )mode; æ·»åŠ è¾“å…¥æºç«¯å£åˆ°runloopä¸­ï¼ŒNSPortå¯¹è±¡å¯ä»¥ç†è§£ä¸ºè¯¦ç»†çš„è½½ä½“ï¼Œä¼šä¼ é€’æ¶ˆæ¯ä¸å…¶ä»£ç†ã€‚ - (void)removePort:(NSPort )aPort forMode:(NSString )mode; å°†æŸä¸ªè¾“å…¥æºç«¯å£ç§»é™¤ - (NSDate )limitDateForMode:(NSString )mode; è·å–ä¸‹ä¸ªå“åº”æ—¶é—´ è§£é‡Šï¼šä¾‹å¦‚å®šæ—¶å™¨çš„æ‰§è¡Œï¼Œå…¶å¹¶ä¸æ˜¯æŒ‰æ—¶é—´çš„é—´éš”è¿›è¡Œè°ƒç”¨æ–¹æ³•ï¼Œè€Œæ˜¯åœ¨å®šæ—¶å™¨æ³¨å†Œåˆ°runloopä¸­åï¼Œrunloopä¼šè®¾ç½®ä¸€ä¸ªä¸€ä¸ªçš„æ—¶é—´ç‚¹è¿›è¡Œè°ƒç”¨ï¼Œæ¯”å¦‚10ï¼Œ20ï¼Œ30ã€‚å¦‚æœé”™è¿‡äº†æŸä¸ªæ—¶é—´ç‚¹ï¼Œå®šæ—¶å™¨å¹¶ä¸ä¼šå»¶æ—¶è°ƒç”¨ï¼Œè€Œæ˜¯ç›´æ¥ç­‰å¾…ä¸‹ä¸€ä¸ªæ—¶é—´ç‚¹è°ƒç”¨ï¼Œæ‰€ä»¥å®šæ—¶å™¨å¹¶ä¸æ˜¯ç²¾å‡†çš„ã€‚ - (void)acceptInputForMode:(NSString )mode beforeDate:(NSDate )limitDate; åœ¨æŸä¸ªæ—¶é—´æœŸé™å‰æ¥æ”¶å“åº” - (void)run;å¼€å§‹è¿è¡Œ - (void)runUntilDate:(NSDate *)limitDate; åˆ°æŸä¸ªæ—¶é—´ç‚¹è¿è¡Œ - (BOOL)runMode:(NSString )mode beforeDate:(NSDate )limitDate; åœ¨æŸä¸ªæœŸé™å‰è¿è¡Œ å››ã€RunLoopçš„åº”ç”¨æ­£å¦‚å‰é¢æ‰€è¯´ï¼Œæˆ‘ä»¬ä¸€ç›´åœ¨ä½¿ç”¨ä»–ï¼Œå´å¾ˆå°‘è§åˆ°ä»–ã€‚å¹¶ä¸”ï¼Œæˆ‘ä»¬åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œéƒ½ä¸éœ€è¦æ˜¾å¼çš„åˆ›å»ºæˆ–è€…å¯åŠ¨RunLoopï¼Œæœ‰ä¸¤ç§æƒ…å†µï¼Œæˆ‘ä»¬å´å¿…é¡»æ‰‹åŠ¨è®¾ç½®å®ƒï¼š 1ã€åœ¨åˆ†çº¿ç¨‹ä¸­ä½¿ç”¨å®šæ—¶å™¨å®šæ—¶å™¨çš„å®ç°ä¾¿æ˜¯åŸºäºrunloopçš„ï¼Œå¹³æ—¶æˆ‘ä»¬ä½¿ç”¨å®šæ—¶å™¨ä½ æˆ–è®¸å¹¶æ²¡æœ‰å¯¹runloopåšä»€ä¹ˆæ“ä½œï¼Œé‚£æ˜¯å› ä¸ºä¸»çº¿ç¨‹çš„runloopé»˜è®¤æ˜¯å¼€å¯è¿è¡Œçš„ï¼Œå¦‚æœæˆ‘ä»¬åœ¨åˆ†çº¿ç¨‹ä¸­ä¹Ÿéœ€è¦é‡å¤æ‰§è¡ŒæŸä¸€åŠ¨ä½œï¼Œå¦‚ä¸‹ï¼š 123456789101112- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view, typically from a nib. queue = dispatch_queue_create(&quot;myQueue&quot;, DISPATCH_QUEUE_CONCURRENT); dispatch_async(queue, ^&#123; NSTimer * timer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(time) userInfo:nil repeats:YES]; &#125;); &#125;-(void)time&#123; NSLog(@&quot;run&quot;);&#125; ä½ ä¼šå‘ç°ï¼Œç¨‹åºè¿è¡Œåå¹¶æ²¡æœ‰æ‰“å°ä»»ä½•ä¿¡æ¯ï¼Œæ–¹æ³•å¹¶æ²¡æœ‰è¢«è°ƒç”¨ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨çº¿ç¨‹ä¸­æ‰‹åŠ¨çš„æ‰§è¡Œå¦‚ä¸‹ä»£ç ï¼š 1 [[NSRunLoop currentRunLoop] run]; å®šæ—¶å™¨æ‰èƒ½æ­£å¸¸å·¥ä½œã€‚ 2ã€å½“ä½ åœ¨çº¿ç¨‹ä¸­ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•æ—¶æŸäº›å»¶æ—¶å‡½æ•°å’Œé€‰æ‹©å™¨åœ¨åˆ†çº¿ç¨‹ä¸­çš„ä½¿ç”¨ï¼Œæˆ‘ä»¬ä¹Ÿå¿…é¡»æ‰‹åŠ¨å¼€å¯runloopï¼Œè¿™äº›æ–¹æ³•å¦‚ä¸‹ï¼š @interface NSObject (NSDelayedPerforming) - (void)performSelector:(SEL)aSelector withObject:(id)anArgument afterDelay:(NSTimeInterval)delay inModes:(NSArray *)modes; - (void)performSelector:(SEL)aSelector withObject:(id)anArgument afterDelay:(NSTimeInterval)delay; + (void)cancelPreviousPerformRequestsWithTarget:(id)aTarget selector:(SEL)aSelector object:(id)anArgument; + (void)cancelPreviousPerformRequestsWithTarget:(id)aTarget; - (void)performSelector:(SEL)aSelector target:(id)target argument:(id)arg order:(NSUInteger)order modes:(NSArray *)modes; - (void)cancelPerformSelector:(SEL)aSelector target:(id)target argument:(id)arg;- (void)cancelPerformSelectorsWithTarget:(id)target; äº”ã€è¡¥å……RunLoopæ›´å¼ºå¤§çš„åœ°æ–¹åœ¨äºå¯¹æ¶ˆæ¯çš„ç›‘å¬ï¼Œå› ä¸ºCFRunLoopRefçš„çº¿ç¨‹å®‰å…¨ä¼˜åŠ¿ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šæ›´å¤šä½¿ç”¨åè€…ã€‚ ç»†å¿ƒçš„ä½ å¯èƒ½ä¼šå‘ç°ï¼Œè¾“å…¥æºè¢«æ³¨å†Œè¿›Runloopä¸­æ—¶ä¼šæœ‰æ–¹æ³•è¿›è¡Œremoveï¼Œä½†æ˜¯å®šæ—¶å™¨å´æ²¡æœ‰ï¼Œä½†æ˜¯å®šæ—¶å™¨ä¸­çš„invalidateæ–¹æ³•å¯ä»¥å°†å…¶ä»runloopä¸­ç§»é™¤ï¼Œæ­£å¦‚å®˜æ–¹æ–‡æ¡£çš„è¯´æ˜ï¼šinvalidateæ˜¯é‡è¦ä¹Ÿæ˜¯å”¯ä¸€çš„å¯ä»¥å°†å®šæ—¶å™¨ä»runloopçš„æ³¨é”€çš„æ–¹æ³•ï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬åˆ›å»ºäº†å®šæ—¶å™¨ï¼Œå°±ä¸€å®šè¦åœ¨ä¸ä½¿ç”¨æ—¶è°ƒç”¨invalidateæ–¹æ³•ã€‚æˆ‘ä¸çŸ¥é“appleä¸ºä½•å°†å®šæ—¶å™¨çš„æ–¹æ³•åˆ†ç¦»å¼€æ¥ï¼Œå¯èƒ½çš„åŸå› æ˜¯è®©å¼€å‘è€…æ›´å°‘çš„æ˜¾å¼è°ƒç”¨runloopçš„æ–¹æ³•ï¼Œä½ è‹¥æ˜¯çŸ¥é“åŸå› ï¼Œæ³è¯·ç•™è¨€æŒ‡å¯¼ã€‚ å…³äºå®šæ—¶å™¨çš„é—®é¢˜ï¼Œåœ¨å¦ä¸€ç¯‡åšå®¢ä¸­æœ‰ä»‹ç»ï¼š[http://my.oschina.net/u/2340880/blog/398598](http://my.oschina.net/u/2340880/blog/398598)ã€‚ å­¦ä¹ ä½¿ç”¨ æ¬¢è¿è½¬è½½ ç–æ¼ä¹‹å¤„ æ¬¢è¿æŒ‡æ­£ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSä¸­åˆ¶ä½œå¯å¤ç”¨çš„æ¡†æ¶Framework","slug":"101iOSä¸­åˆ¶ä½œå¯å¤ç”¨çš„æ¡†æ¶Framework","date":"2015-08-11T16:00:00.000Z","updated":"2021-07-01T07:27:21.399Z","comments":true,"path":"2015/08/12/101iOSä¸­åˆ¶ä½œå¯å¤ç”¨çš„æ¡†æ¶Framework/","link":"","permalink":"http://huishao.cc/2015/08/12/101iOSä¸­åˆ¶ä½œå¯å¤ç”¨çš„æ¡†æ¶Framework/","excerpt":"","text":"iOSä¸­åˆ¶ä½œå¯å¤ç”¨çš„æ¡†æ¶Frameworkåœ¨iOSå¼€å‘ä¸­ï¼Œæˆ‘ä»¬æ—¶å¸¸ä¼šä½¿ç”¨ä¸€äº›æˆ‘ä»¬å°è£…å¥½çš„ç®¡ç†ç±»ï¼Œæ¡†æ¶ç±»ï¼Œæ–¹æ³•ç±»ç­‰ï¼Œæˆ‘ä»¬åœ¨å®ç°è¿™äº›æ–‡ä»¶æ—¶ï¼Œå¯èƒ½è¿˜ä¼šä¾èµ–ä¸€äº›ç¬¬ä¸‰æ–¹åº“æˆ–è€…ç³»ç»Ÿåº“ã€‚å¦‚æœæ¯æ¬¡æˆ‘ä»¬å¤ç”¨è¿™äº›ä»£ç æ—¶ï¼Œéƒ½è¦å°†å…³è”çš„è¿™äº›ä¸œè¥¿è¿›è¡Œå¯¼å…¥ï¼Œç”šè‡³è¿˜è¦è¿›è¡Œarcå’Œmrcçš„ç¼–è¯‘è®¾ç½®ï¼Œä¼šæµªè´¹æˆ‘ä»¬å¾ˆå¤§çš„ç²¾åŠ›ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå¦‚æœé¡¹ç›®éœ€è¦å¤šäººåˆä½œï¼Œä½ å¯èƒ½ä¹Ÿå¹¶ä¸å¸Œæœ›ä½ çš„æºä»£ç æš´æ¼åœ¨æ‰€æœ‰äººçš„é¢å‰ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨é™æ€åº“æˆ–è€…åŠ¨æ€åº“çš„æ–¹å¼æ¥å¯¹æˆ‘ä»¬çš„ä»£ç è¿›è¡ŒåŒ…è£…ï¼Œä¾¿äºå¤ç”¨ã€‚é™æ€åº“çš„åˆ¶ä½œæ–¹æ³•åœ¨ä¸€ç¯‡æ—§çš„åšå®¢ä¸­æœ‰æè¿°ï¼š[http://my.oschina.net/u/2340880/blog/398887](http://my.oschina.net/u/2340880/blog/398887)ã€‚ç›¸æ¯”é™æ€åº“æ–‡ä»¶ï¼ŒåŠ¨æ€åº“çš„æ•ˆç‡ä¼šæ›´é«˜ä¸”å°è£…æ€§æ›´å¥½ï¼Œè¿™é‡Œä¸»è¦è®¨è®ºåŠ¨æ€åº“çš„åˆ¶ä½œã€‚ xcode6åæ”¯æŒåœ¨xcodeä¸­åˆ¶ä½œåŠ¨æ€åº“ï¼Œå¹¶ä¸”è¿‡ç¨‹ä¹Ÿååˆ†ç®€å•ã€‚ æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œé€‰æ‹©frameworkï¼š ä¹‹åæˆ‘ä»¬åœ¨é‡Œé¢ç¼–å†™æˆ‘ä»¬çš„ä»£ç ï¼Œæ¯”å¦‚æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªMyObjectç±»ï¼š 123456789@interface MyObject : NSObject-(void)myLog;@end@implementation MyObject-(void)myLog&#123; NSLog(@&quot;framework&quot;);&#125;@end å’Œé™æ€åº“ç±»ä¼¼ï¼Œå¦‚æœæˆ‘ä»¬ä¸åšä»»ä½•å¤„ç†ï¼Œæ‰“åŒ…å‡ºæ¥çš„åº“æ–‡ä»¶åªèƒ½åœ¨æ¨¡æ‹Ÿå™¨æˆ–è€…åªèƒ½åœ¨çœŸæœºä¸Šä½¿ç”¨ï¼Œä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬è°ƒè¯•ï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ ä¸€ä¸ªè„šæœ¬å‘½ä»¤ï¼Œæ˜¯çš„ç”Ÿæˆä¸€ä¸ªåŒæ—¶æ”¯æŒæ¨¡æ‹Ÿå™¨å’ŒçœŸæœºçš„frameworkï¼š æ–°å»ºtargetï¼š é€‰æ‹©Aggregateï¼š ä¹‹åï¼Œæˆ‘ä»¬åœ¨targetçš„Build Phasesä¸­ç‚¹å‡»åŠ å·ï¼š æ·»åŠ ä¸€ä¸ªRun Scriptï¼š åœ¨é‡Œé¢æ·»åŠ å¦‚ä¸‹çš„è„šæœ¬ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556set -eset +u# Avoid recursively calling this script.if [[ $SF_MASTER_SCRIPT_RUNNING ]]thenexit 0fiset -uexport SF_MASTER_SCRIPT_RUNNING=1SF_TARGET_NAME=$&#123;PROJECT_NAME&#125;SF_EXECUTABLE_PATH=&quot;$&#123;SF_TARGET_NAME&#125;.framework/$&#123;SF_TARGET_NAME&#125;&quot;SF_WRAPPER_NAME=&quot;$&#123;SF_TARGET_NAME&#125;.framework&quot;if [[ &quot;$SDK_NAME&quot; =~ ([A-Za-z]+) ]]thenSF_SDK_PLATFORM=$&#123;BASH_REMATCH[1]&#125;elseecho &quot;Could not find platform name from SDK_NAME: $SDK_NAME&quot;exit 1fiif [[ &quot;$SDK_NAME&quot; =~ ([0-9]+.*$) ]]thenSF_SDK_VERSION=$&#123;BASH_REMATCH[1]&#125;elseecho &quot;Could not find sdk version from SDK_NAME: $SDK_NAME&quot;exit 1fiif [[ &quot;$SF_SDK_PLATFORM&quot; = &quot;iphoneos&quot; ]]thenSF_OTHER_PLATFORM=iphonesimulatorelseSF_OTHER_PLATFORM=iphoneosfiif [[ &quot;$BUILT_PRODUCTS_DIR&quot; =~ (.*)$SF_SDK_PLATFORM$ ]]thenSF_OTHER_BUILT_PRODUCTS_DIR=&quot;$&#123;BASH_REMATCH[1]&#125;$&#123;SF_OTHER_PLATFORM&#125;&quot;elseecho &quot;Could not find platform name from build products directory: $BUILT_PRODUCTS_DIR&quot;exit 1firm -rf buildProductsmkdir buildProducts# Build the other platform.xcrun xcodebuild -project &quot;$&#123;PROJECT_FILE_PATH&#125;&quot; -target &quot;$&#123;TARGET_NAME&#125;&quot; -configuration &quot;$&#123;CONFIGURATION&#125;&quot; -sdk $&#123;SF_OTHER_PLATFORM&#125;$&#123;SF_SDK_VERSION&#125; BUILD_DIR=&quot;$&#123;BUILD_DIR&#125;&quot; OBJROOT=&quot;$&#123;OBJROOT&#125;&quot; BUILD_ROOT=&quot;$&#123;BUILD_ROOT&#125;&quot; SYMROOT=&quot;$&#123;SYMROOT&#125;&quot; $ACTION# Smash the two static libraries into one fat binary and store it in the .frameworkxcrun lipo -create &quot;$&#123;BUILT_PRODUCTS_DIR&#125;/$PRODUCT_NAME.framework/$PRODUCT_NAME&quot; &quot;$&#123;SF_OTHER_BUILT_PRODUCTS_DIR&#125;/$PRODUCT_NAME.framework/$PRODUCT_NAME&quot; -output &quot;$&#123;PROJECT_DIR&#125;/buildProducts/$PRODUCT_NAME&quot;cp -rf $&#123;BUILT_PRODUCTS_DIR&#125;/$PRODUCT_NAME.framework $&#123;PROJECT_DIR&#125;/buildProductsmv $&#123;PROJECT_DIR&#125;/buildProducts/$PRODUCT_NAME $&#123;PROJECT_DIR&#125;/buildProducts/$PRODUCT_NAME.framework æ¥ç€ï¼Œæˆ‘ä»¬éœ€è¦å°†ç»™å¤–ç•Œçš„æ¥å£æ–‡ä»¶æš´éœ²å‡ºæ¥ï¼Œå°†å…¶ç§»åŠ¨åˆ°publicä¸‹å³å¯ï¼š ä¹‹åæˆ‘ä»¬è¿è¡Œç¨‹åºï¼Œéœ€è¦æ³¨æ„çš„ä¸€ç‚¹äº‹ï¼Œå¦‚æœè¦æ”¯æŒ64ä½ï¼Œéœ€è¦åœ¨ç¼–è¯‘é€‰é¡¹ä¸­è®¾ç½®ï¼Œå¦‚ä¸‹ï¼š åˆ°æ­¤æ—¶ï¼Œæˆ‘ä»¬çš„frameworkåº“æ–‡ä»¶å°±åˆ¶ä½œå®Œæˆï¼Œåœ¨xcodeçš„window-&gt;projectsä¸­é€‰ä¸­æˆ‘ä»¬çš„è¿™ä¸ªé¡¹ç›®ï¼Œç‚¹å‡»è¿›å…¥æ–‡ä»¶å¤¹çš„å°ç®­å¤´ï¼š åœ¨build-&gt;productä¸­ä¾¿å¯ä»¥æ‰¾åˆ°æˆ‘ä»¬çš„frameworkæ–‡ä»¶ï¼Œæˆ‘ä»¬å°†å…¶èµ‹å€¼å‡ºæ¥å³å¯ä»¥ä½¿ç”¨ã€‚ æˆ‘ä»¬æµ‹è¯•ä¸€ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªå·¥ç¨‹ï¼Œå°†åˆšæ‰åˆ¶ä½œçš„é™æ€åº“å¯¼å…¥ï¼Œå¦‚ä¸‹åŠ å…¥å¤´æ–‡ä»¶ï¼Œè°ƒç”¨æ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨ã€‚ 123#import &lt;MyFramework/MyObject.h&gt; MyObject * obj = [[MyObject alloc]init]; [obj myLog]; ä¸¤ä¸ªæŠ€å·§ï¼š ä¸€ã€å¦‚æœä½ è¿è¡Œç¨‹åºå‡ºç°ç±»ä¼¼Reason: image not found!çš„å´©æºƒä¿¡æ¯ï¼Œå¯èƒ½çš„åŸå› æ˜¯åŠ¨æ€åº“æ–‡ä»¶ä¸­çš„æŸäº›æ–‡ä»¶ä½ çš„é¡¹ç›®ä¸­å·²ç»åŒ…å«äº†ï¼Œåœ¨Build Phasesä¸­å°†requiredæ”¹æˆoptionalå³å¯ã€‚ äºŒã€ä¸€ä¸ªä¼˜ç§€ä¸”å®Œæ•´çš„æ¡†æ¶å¯èƒ½ä¼šåŒ…å«ç›¸å½“å¤šçš„æ–‡ä»¶ï¼ŒåŒ…æ‹¬æ¡†æ¶è‡ªå·±çš„å’Œå…¶ä»–ç¬¬ä¸‰æ–¹çš„ï¼Œä¸ºäº†ä½¿ç”¨çš„æ–¹ä¾¿ï¼Œæˆ‘ä»¬å¯ä»¥å°†å¤´æ–‡ä»¶éƒ½å¯¼å…¥ä¸€ä¸ªçš„å¤´æ–‡ä»¶ä¸­ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªåœ°æ–¹æˆ‘ä»¬éœ€è¦æ³¨æ„ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨frameworkå·¥ç¨‹ä¸­æ·»åŠ çš„å¤´æ–‡ä»¶æ˜¯ä¸ä¼šç¼–è¯‘çš„ï¼Œæˆ‘çš„è§£å†³æ–¹æ¡ˆæ˜¯é€šè¿‡å»ºä¸€ä¸ªOCçš„ç±»ï¼Œåœ¨è¿™ä¸ªç±»ä¸­å¯¼å…¥è¿™ä¸ªæ€»çš„å¤´æ–‡ä»¶ï¼Œå°†è¿™ä¸ªç±»éšè—æˆç§æœ‰çš„ï¼Œå°±å¯ä»¥è§£å†³é—®é¢˜äº†ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"ä»£ç ä¼˜åŒ–","slug":"ä»£ç ä¼˜åŒ–","permalink":"http://huishao.cc/categories/ä»£ç ä¼˜åŒ–/"}],"tags":[],"keywords":[{"name":"ä»£ç ä¼˜åŒ–","slug":"ä»£ç ä¼˜åŒ–","permalink":"http://huishao.cc/categories/ä»£ç ä¼˜åŒ–/"}]},{"title":"iOSå¤šçº¿ç¨‹å¼€å‘ä¹‹æ·±å…¥GCD","slug":"100iOSå¤šçº¿ç¨‹å¼€å‘ä¹‹æ·±å…¥GCD","date":"2015-08-10T16:00:00.000Z","updated":"2021-07-01T07:22:45.752Z","comments":true,"path":"2015/08/11/100iOSå¤šçº¿ç¨‹å¼€å‘ä¹‹æ·±å…¥GCD/","link":"","permalink":"http://huishao.cc/2015/08/11/100iOSå¤šçº¿ç¨‹å¼€å‘ä¹‹æ·±å…¥GCD/","excerpt":"","text":"iOSå¤šçº¿ç¨‹å¼€å‘ä¹‹æ·±å…¥GCDä¸€ã€å‰è¨€åœ¨ä»¥å‰çš„ä¸€äº›ç³»åˆ—åšå®¢ä¸­ï¼Œå¯¹iOSä¸­çº¿ç¨‹çš„ç®¡ç†åšäº†æ€»ç»“ï¼Œå…¶ä¸­æ¶µç›–äº†GCDçš„ç›¸å…³åŸºç¡€çŸ¥è¯†ï¼š[http://my.oschina.net/u/2340880/blog/417746](http://my.oschina.net/u/2340880/blog/417746)ã€‚é‚£é‡Œé¢å°†GCDçš„çº¿ç¨‹ç®¡ç†èƒ½åŠ›ï¼Œåˆ—é˜Ÿç»„èƒ½åŠ›ï¼Œé€šè¿‡ä¿¡å·å’Œæ¶ˆæ¯æ§åˆ¶ç¨‹åºæµç¨‹çš„èƒ½åŠ›éƒ½æœ‰ä»‹ç»ï¼Œè¿™é‡Œï¼Œæˆ‘ä»¬ç»§ç»­æ·±å…¥GCDçš„åŠŸèƒ½ï¼Œé€šè¿‡GCDæ¥å¤„ç†ä¸€äº›é€»è¾‘æ›´åŠ å¤æ‚çš„ä»£ç åŠŸèƒ½ã€‚ äºŒã€å»¶æ—¶è¿½åŠ ä»»åŠ¡å½“æˆ‘ä»¬åœ¨ç¨‹åºä¸­å¤„ç†å»¶æ—¶ä»»åŠ¡çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šé€šè¿‡ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯é€šè¿‡å®šæ—¶å™¨è¿›è¡Œå»¶æ—¶æ‰§è¡Œï¼Œå¦å¤–ä¸€ç§æ˜¯é€šè¿‡å¦‚ä¸‹çš„å‡½æ•°ï¼š - (void)performSelector:(SEL)aSelector withObject:(id)anArgument afterDelay:(NSTimeInterval)delay; ç„¶è€Œï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦åœ¨å¤šçº¿ç¨‹ä¸­è¿›è¡Œå»¶æ—¶æ“ä½œï¼Œä¸Šé¢ä¸¤ç§æ–¹å¼ä¼šæ˜¾å¾—ååˆ†éº»çƒ¦ï¼Œå¹¶ä¸”å¾’å¢ä»£ç çš„å¤æ‚åº¦ã€‚GCDä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç§æ–¹å¼ï¼š void dispatch_after(dispatch_time_t when, dispatch_queue_t queue, dispatch_block_t block); è¿™ä¸ªæ–¹æ³•æœ‰ä¸‰ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°å»¶æ—¶çš„æ—¶é—´ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºå°†ä»»åŠ¡åŠ å…¥çš„é˜Ÿåˆ—ï¼Œç¬¬ä¸‰ä¸ªblockä¸ºè¦æ‰§è¡Œçš„ä»»åŠ¡ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š 123dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(3 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123; NSLog(@&quot;1233&quot;); &#125;); è¿™é‡Œé€šè¿‡dispatch_timeæ¥åˆ›å»ºæ—¶é—´å¯¹è±¡ï¼Œå°†æ‰“å°ä¿¡æ¯çš„æ–¹æ³•åœ¨3SååŠ å…¥ä¸»çº¿ç¨‹é˜Ÿåˆ—ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œåªæ˜¯å°†ä»»åŠ¡å»¶æ—¶åŠ å…¥é˜Ÿåˆ—ï¼Œå¹¶ä¸æ˜¯æ‰§è¡Œï¼Œå¦‚æœæ˜¯åŠ å…¥åŒæ­¥é˜Ÿåˆ—ä¸­ï¼Œåˆ™ä¼šè¿›å…¥ç­‰å¾…çŠ¶æ€ã€‚ ä¸‰ã€æ•°æ®å­˜å–çš„çº¿ç¨‹å®‰å…¨é—®é¢˜åœ¨è¿›è¡Œå¤šçº¿ç¨‹ç¼–ç¨‹æ—¶ï¼Œæˆ–è®¸æ€»ä¼šé‡åˆ°ä¸€ç±»é—®é¢˜ï¼Œæ•°æ®çš„ç«äº‰ä¸çº¿ç¨‹çš„å®‰å…¨ã€‚è¿™äº›é—®é¢˜å¦‚æœæˆ‘ä»¬é€šè¿‡ç¨‹åºæ‰‹åŠ¨æ¥æ§åˆ¶éš¾åº¦å°†ä¼šéå¸¸å¤§ã€‚GCDåŒæ ·ä¸ºæˆ‘ä»¬ç®€å•çš„è§£å†³äº†è¿™æ ·çš„é—®é¢˜ã€‚ é¦–å…ˆï¼Œå¦‚æœåªæ˜¯åœ¨è¯»å–æ•°æ®ï¼Œè€Œä¸å¯¹æ•°æ®åšä»»ä½•ä¿®æ”¹æ—¶ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦å¤„ç†å®‰å…¨é—®é¢˜ï¼Œå¯ä»¥è®©å¤šä¸ªä»»åŠ¡åŒæ—¶è¿›è¡Œè¯»å–ï¼Œå¯æ˜¯å¦‚æœè¦å¯¹æ•°æ®è¿›è¡Œå†™çš„æ“ä½œï¼Œé‚£ä¹ˆåœ¨åŒä¸€æ—¶é—´ï¼Œæˆ‘ä»¬å°±å¿…é¡»åªèƒ½æœ‰ä¸€ä¸ªä»»åŠ¡åœ¨å†™ï¼ŒGCDä¸­æœ‰ä¸€ä¸ªæ–¹æ³•å¸®æˆ‘ä»¬å®Œç¾çš„è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839//åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—dispatch_queue_t queue = dispatch_queue_create(&quot;oneQueue&quot;, DISPATCH_QUEUE_CONCURRENT); //å‡ ä¸ªä»»åŠ¡åŒæ—¶è¯»æ“ä½œ dispatch_async(queue, ^&#123; for (int i=0; i&lt;5; i++) &#123; NSLog(@&quot;read1:%d&quot;,i); &#125; &#125;); dispatch_async(queue, ^&#123; for (int i=0; i&lt;5; i++) &#123; NSLog(@&quot;read2:%d&quot;,i); &#125; &#125;); //æ­¤å¤„è¿›è¡Œå†™æ“ä½œ /* ä¸‹é¢è¿™ä¸ªå‡½æ•°åœ¨åŠ å…¥é˜Ÿåˆ—æ—¶ä¸ä¼šæ‰§è¡Œï¼Œä¼šç­‰å¾…å·²ç»å¼€å§‹çš„å¼‚æ­¥æ‰§è¡Œå…¨éƒ¨å®Œæˆåå†æ‰§è¡Œï¼Œå¹¶ä¸”åœ¨æ‰§è¡Œæ—¶ï¼Œä¼šé˜»å¡å…¶ä»–ä»»åŠ¡ æ‰§è¡Œå®Œæˆåï¼Œå…¶ä»–ä»»åŠ¡é‡æ–°è¿›å…¥å¼‚æ­¥æ‰§è¡Œ */ dispatch_barrier_async(queue, ^&#123; for (int i=0; i&lt;5; i++) &#123; NSLog(@&quot;write:%d&quot;,i); &#125; &#125;); //ç»§ç»­è¿›è¡Œå¼‚æ­¥è¯»æ“ä½œ dispatch_async(queue, ^&#123; for (int i=0; i&lt;5; i++) &#123; NSLog(@&quot;read3:%d&quot;,i); &#125; &#125;); dispatch_async(queue, ^&#123; for (int i=0; i&lt;5; i++) &#123; NSLog(@&quot;read4:%d&quot;,i); &#125; &#125;); dispatch_async(queue, ^&#123; for (int i=0; i&lt;5; i++) &#123; NSLog(@&quot;read5:%d&quot;,i); &#125; &#125;); æ‰“å°ä¿¡æ¯å¦‚ä¸‹ï¼š å¯ä»¥çœ‹å‡ºï¼Œè¯»æ“ä½œæ˜¯å¼‚æ­¥è¿›è¡Œçš„ï¼Œå†™æ“ä½œæ˜¯ç­‰å¾…åé˜»å¡ä»»åŠ¡é˜Ÿåˆ—ç‹¬ç«‹è¿›è¡Œï¼Œç»“æŸåé˜Ÿåˆ—æ¢å¤å¼‚æ­¥æ‰§è¡Œè¯»æ“ä½œï¼Œè¿™æ­£æ˜¯æˆ‘ä»¬éœ€è¦çš„æ•ˆæœã€‚ å››ã€GCDæ¨¡å¼çš„å•ä¾‹é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„å•ä¾‹ä¼šæ˜¯å¦‚ä¸‹çš„æ ·å­ï¼š 1234567+(instancetype)shared&#123; static Auto * obj; if (obj==nil) &#123; obj = [[Auto alloc]init]; &#125; return obj;&#125; è¿™ç§é€šè¿‡è¯»å–é™æ€å˜é‡çš„æ–¹å¼åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯æ²¡é—®é¢˜çš„ï¼Œå¯æ˜¯å¹¶ä¸èƒ½ä¿è¯ç¨‹åºç™¾åˆ†ç™¾çš„å®‰å…¨ï¼Œå› ä¸ºåœ¨å¤šçº¿ç¨‹çš„æ“ä½œä¸­ï¼Œä¼šæœ‰å¯èƒ½åˆå§‹åŒ–å¤šä¸ªå¯¹è±¡ï¼Œåœ¨GCDä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼ï¼š 12345678910+(instancetype)shared&#123; static Auto * obj; //dispatch_once_tå¯¹è±¡å¯ä»¥åªä¿è¯æ‰§è¡Œä¸€æ¬¡ static dispatch_once_t once; dispatch_once(&amp;once, ^&#123; obj = [[Auto alloc]init]; &#125;); return obj; &#125; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSè§†é¢‘åŠŸèƒ½æ¨¡å—çš„å¼€å‘","slug":"99iOSè§†é¢‘åŠŸèƒ½æ¨¡å—çš„å¼€å‘","date":"2015-08-09T16:00:00.000Z","updated":"2021-07-01T07:21:37.500Z","comments":true,"path":"2015/08/10/99iOSè§†é¢‘åŠŸèƒ½æ¨¡å—çš„å¼€å‘/","link":"","permalink":"http://huishao.cc/2015/08/10/99iOSè§†é¢‘åŠŸèƒ½æ¨¡å—çš„å¼€å‘/","excerpt":"","text":"iOSè§†é¢‘åŠŸèƒ½æ¨¡å—çš„å¼€å‘ä¸€ã€ä½¿ç”¨MPMoviePlayerControllerè¿›è¡Œè§†é¢‘æ’­æ”¾MPMoviePlayerControlleræ˜¯iOSä¸­è¿›è¡Œè§†é¢‘æ’­æ”¾å¼€å‘çš„ä¸€ä¸ªæ§åˆ¶ç±»ï¼Œé‡Œé¢æ¶µç›–äº†è§†é¢‘æ’­æ”¾ä¸­å¤§éƒ¨åˆ†çš„éœ€æ±‚åŠŸèƒ½ï¼Œåœ¨ä½¿ç”¨è¿™ä¸ªæ¡†æ¶æ—¶ï¼Œéœ€è¦å¯¼å…¥å¤´æ–‡ä»¶&lt;MediaPlayer/MediaPlayer.h&gt;ã€‚ 1ã€åˆå§‹åŒ–æ–¹æ³•MPMoviePlayerControllerå¯ä»¥æ’­æ”¾ç½‘ç»œè§†é¢‘ï¼Œä¹Ÿå¯ä»¥æ’­æ”¾æœ¬åœ°è§†é¢‘ï¼Œé€šè¿‡ä¸åŒçš„URLæ¥è¿›è¡Œåˆå§‹åŒ–ï¼Œä¾‹å¦‚æœ¬åœ°è§†é¢‘çš„åˆå§‹åŒ–å¦‚ä¸‹ï¼š 123456//è§†é¢‘æ–‡ä»¶è·¯å¾„ NSString *path = [[NSBundle mainBundle] pathForResource:fileName ofType:@&quot;mp4&quot;]; //è§†é¢‘URL NSURL *url = [NSURL fileURLWithPath:path]; //è§†é¢‘æ’­æ”¾å¯¹è±¡ MPMoviePlayerController * movie = [[MPMoviePlayerController alloc] initWithContentURL:url]; åˆå§‹åŒ–å’Œå®Œæˆç›¸å…³é…ç½®åï¼Œæˆ‘ä»¬éœ€è¦å°†MPMoviePlayerControllerå¯¹è±¡çš„Viewæ·»åŠ åœ¨æˆ‘ä»¬éœ€è¦çš„UIè§†å›¾ä¸Šï¼Œè¿™ä¸ªæ§åˆ¶å™¨åªæä¾›çš„æ§åˆ¶çš„ç›¸å…³åŠŸèƒ½ï¼Œå¤–éƒ¨çš„UIå¹¶æ²¡æœ‰ä¸ºæˆ‘ä»¬æä¾›å¥½ã€‚ 2ã€ç›¸å…³å±æ€§ä¸æ–¹æ³•@property (nonatomic, copy) NSURL *contentURL; è§†é¢‘æ–‡ä»¶çš„urlåœ°å€ @property (nonatomic, readonly) UIView *view; æ’­æ”¾å™¨viewï¼Œåœ¨ä½¿ç”¨ä¹‹å‰ï¼Œå¿…é¡»è®¾ç½®frameå¤§å°ï¼Œç„¶åå°†å…¶æ·»åŠ åœ¨æˆ‘ä»¬çš„UIè§†å›¾ä¸Š @property (nonatomic, readonly) UIView *backgroundView; æ’­æ”¾å™¨èƒŒæ™¯é¢œè‰² @property (nonatomic, readonly) MPMoviePlaybackState playbackState; æ’­æ”¾å™¨çš„å½“å‰æ’­æ”¾çŠ¶æ€ï¼Œæšä¸¾å®šä¹‰å¦‚ä¸‹ï¼š 12345678typedef NS_ENUM(NSInteger, MPMoviePlaybackState) &#123; MPMoviePlaybackStateStopped,//åœæ­¢æ’­æ”¾ MPMoviePlaybackStatePlaying,//æ­£åœ¨æ’­æ”¾ MPMoviePlaybackStatePaused,//æš‚åœæ’­æ”¾ MPMoviePlaybackStateInterrupted,//ä¸­æ–­æ’­æ”¾ MPMoviePlaybackStateSeekingForward,//å¿«è¿› MPMoviePlaybackStateSeekingBackward//å¿«é€€&#125;; @property (nonatomic, readonly) MPMovieLoadState loadState; æ’­æ”¾å™¨çš„ç½‘ç»œç¼“å­˜çŠ¶æ€ï¼Œæšä¸¾å®šä¹‰å¦‚ä¸‹ï¼š 123456typedef NS_OPTIONS(NSUInteger, MPMovieLoadState) &#123; MPMovieLoadStateUnknown = 0,//çŠ¶æ€æœªçŸ¥ MPMovieLoadStatePlayable = 1 &lt;&lt; 0,//ç¼“å­˜æ•°æ®è¶³å¤Ÿå¼€å§‹æ’­æ”¾ï¼Œä½†æ˜¯è§†é¢‘å¹¶æ²¡æœ‰ç¼“å­˜å®Œå…¨ MPMovieLoadStatePlaythroughOK = 1 &lt;&lt; 1, //å·²ç»ç¼“å­˜å®Œæˆï¼Œå¦‚æœè®¾ç½®äº†è‡ªåŠ¨æ’­æ”¾ï¼Œè¿™æ—¶ä¼šè‡ªåŠ¨æ’­æ”¾ MPMovieLoadStateStalled = 1 &lt;&lt; 2, //æ•°æ®ç¼“å­˜å·²ç»åœæ­¢ï¼Œæ’­æ”¾å°†æš‚åœ&#125;; @property (nonatomic) MPMovieControlStyle controlStyle; æ’­æ”¾å™¨é£æ ¼ï¼Œæšä¸¾å¦‚ä¸‹: 1234567typedef NS_ENUM(NSInteger, MPMovieControlStyle) &#123; MPMovieControlStyleNone, // æ— æ§åˆ¶å™¨ MPMovieControlStyleEmbedded, // åµŒå…¥è§†é¢‘é£æ ¼ MPMovieControlStyleFullscreen, // å…¨å±æ’­æ”¾é£æ ¼ MPMovieControlStyleDefault = MPMovieControlStyleEmbedded&#125;; @property (nonatomic) MPMovieRepeatMode repeatMode; æ’­æ”¾å™¨çš„å¾ªç¯æ¨¡å¼ï¼Œæšä¸¾å¦‚ä¸‹ï¼š 1234typedef NS_ENUM(NSInteger, MPMovieRepeatMode) &#123; MPMovieRepeatModeNone,//æ’­æ”¾ç»“æŸåä¸å¾ªç¯ MPMovieRepeatModeOne//å¾ªç¯&#125;; @property (nonatomic) BOOL shouldAutoplay; æ˜¯å¦å¼€å¯è‡ªåŠ¨æ’­æ”¾ @property (nonatomic, getter=isFullscreen) BOOL fullscreen; è®¾ç½®æ˜¯å¦å……æ»¡å±å¹• - (void)setFullscreen:(BOOL)fullscreen animated:(BOOL)animated; è®¾ç½®æ˜¯å¦å……æ»¡å±å¹•ï¼Œå¸¦åŠ¨ç”»æ•ˆæœ @property (nonatomic) MPMovieScalingMode scalingMode; è®¾ç½®æ’­æ”¾å™¨çš„å¡«å……æ–¹å¼ï¼Œæšä¸¾å®šä¹‰å¦‚ä¸‹ï¼š 123456typedef NS_ENUM(NSInteger, MPMovieScalingMode) &#123; MPMovieScalingModeNone, // æ— ç¼©æ”¾ MPMovieScalingModeAspectFit, // é€‚åº”å¤§å°æ¨¡å¼ MPMovieScalingModeAspectFill, // å……æ»¡å¯è§†èŒƒå›´ï¼Œå¯èƒ½ä¼šè¢«è£å‰ª MPMovieScalingModeFill // ç¼©æ”¾åˆ°å……æ»¡è§†å›¾&#125;; @property (nonatomic, readonly) BOOL readyForDisplay NS_AVAILABLE_IOS(6_0); è¿”å›YESè¯´æ˜æ•°æ®æ ˆå·²ç»ç¼“å­˜å¥½æ•°æ®ï¼Œè¿”å›NOåˆ™æ²¡æœ‰ç¼“å­˜å¥½ @property (nonatomic, readonly) MPMovieMediaTypeMask movieMediaTypes; æ•°æ®æ–‡ä»¶çš„æ ¼å¼ï¼Œæšä¸¾å¦‚ä¸‹ï¼š 12345typedef NS_OPTIONS(NSUInteger, MPMovieMediaTypeMask) &#123; MPMovieMediaTypeMaskNone = 0,//æ ¼å¼æœªçŸ¥ MPMovieMediaTypeMaskVideo = 1 &lt;&lt; 0,//éŸ³é¢‘æ ¼å¼ MPMovieMediaTypeMaskAudio = 1 &lt;&lt; 1//è§†é¢‘æ ¼å¼&#125;; @property (nonatomic) MPMovieSourceType movieSourceType; è§†é¢‘çš„æ•°æ®ç±»å‹ï¼Œæšä¸¾å¦‚ä¸‹ï¼š 12345typedef NS_ENUM(NSInteger, MPMovieSourceType) &#123; MPMovieSourceTypeUnknown,//ç±»å‹æœªçŸ¥ MPMovieSourceTypeFile, // æ–‡ä»¶ç±»å‹ MPMovieSourceTypeStreaming // æ•°æ®æµ&#125;; @property (nonatomic, readonly) NSTimeInterval duration; è§†é¢‘æ–‡ä»¶çš„æ—¶é•¿ @property (nonatomic, readonly) NSTimeInterval playableDuration; ç¼“å­˜å®Œæˆèƒ½å¤Ÿæ’­æ”¾çš„æ—¶é•¿ @property (nonatomic, readonly) CGSize naturalSize; è§†é¢‘çš„åŸå§‹å¤§å° @property (nonatomic) NSTimeInterval initialPlaybackTime; æ’­æ”¾å™¨å¼€å§‹æ’­æ”¾çš„æ—¶é—´ @property (nonatomic) NSTimeInterval endPlaybackTime; æ’­æ”¾å™¨ç»“æŸæ’­æ”¾çš„æ—¶é—´ @property (nonatomic) BOOL allowsAirPlay; æ˜¯å¦å…è®¸äº‘ç«¯æ’­æ”¾ - (void)requestThumbnailImagesAtTimes:(NSArray *)playbackTimes timeOption:(MPMovieTimeOption)optio; è·å–è§†é¢‘æŸä¸€äº›æ—¶é—´ç‚¹çš„ç¼©ç•¥å›¾ï¼Œå‚æ•°æšä¸¾å¦‚ä¸‹ï¼Œç”Ÿæˆç¼©ç•¥å›¾çš„æ•°æ®å›è°ƒåœ¨åé¢çš„é€šçŸ¥ä¸­è¯¦è¯´ï¼š 1234typedef NS_ENUM(NSInteger, MPMovieTimeOption) &#123; MPMovieTimeOptionNearestKeyFrame,//ä½¿ç”¨æœ€è¿‘çš„å…³é”®å¸§ç”Ÿæˆç¼©ç•¥å›¾ MPMovieTimeOptionExact//ä½¿ç”¨ç²¾ç¡®çš„å½“å‰å¸§ç”Ÿæˆç¼©ç•¥å›¾&#125;; ä¸æ’­æ”¾æ§åˆ¶ç›¸å…³çš„æ–¹æ³•å¦‚ä¸‹ï¼š 1234567891011121314151617181920//è°ƒç”¨è¿™ä¸ªæ–¹æ³•è¿›è¡Œæ’­æ”¾è§†é¢‘çš„å‡†å¤‡å·¥ä½œ- (void)prepareToPlay;//è·å–æ’­æ”¾å™¨çš„å‡†å¤‡å·¥ä½œæ˜¯å¦å°±ç»ª@property(nonatomic, readonly) BOOL isPreparedToPlay;//è°ƒç”¨æ­¤æ–¹æ³•è¿›è¡Œè§†é¢‘çš„æ’­æ”¾- (void)play;//è°ƒç”¨æ­¤æ–¹æ³•è¿›è¡Œè§†é¢‘æ’­æ”¾çš„æš‚åœæ“ä½œ- (void)pause;//è°ƒç”¨æ­¤æ–¹æ³•åœæ­¢è§†é¢‘æ’­æ”¾- (void)stop;//å½“å‰è§†é¢‘å·²æ’­æ”¾çš„æ—¶é—´@property(nonatomic) NSTimeInterval currentPlaybackTime;//å½“å‰è§†é¢‘çš„æ’­æ”¾é€Ÿåº¦@property(nonatomic) float currentPlaybackRate;//è°ƒç”¨æ­¤æ–¹æ³•è¿›è¡Œå¿«è¿›æ“ä½œ- (void)beginSeekingForward;//è°ƒç”¨æ­¤æ–¹æ³•è¿›è¡Œå¿«é€€æ“ä½œ- (void)beginSeekingBackward;//è°ƒç”¨æ­¤æ–¹æ³•ç»“æŸå¿«è¿›æˆ–è€…å¿«é€€æ“ä½œ- (void)endSeeking; 3ã€ç³»ç»Ÿç›¸å…³é€šçŸ¥MPMoviePlayerControllerçš„ç³»ç»Ÿå›è°ƒå¹¶æ²¡æœ‰é‡‡ç”¨ä»£ç†çš„è®¾è®¡æ¨¡å¼ï¼Œè€Œæ˜¯é‡‡ç”¨çš„ç³»ç»Ÿå‘é€šçŸ¥ï¼Œæˆ‘ä»¬æ³¨å†Œè§‚å¯Ÿè€…ï¼Œæ¥æ”¶æˆ‘ä»¬éœ€è¦çš„é€šçŸ¥ã€‚ä¸¾ä¾‹å‡ ç§å¸¸ç”¨é€šçŸ¥å¦‚ä¸‹ï¼š NSString * const MPMoviePlayerScalingModeDidChangeNotification; æ’­æ”¾å™¨ç¼©æ”¾äº§ç”Ÿæ”¹å˜æ—¶å‘é€çš„é€šçŸ¥ NSString * const MPMoviePlayerPlaybackDidFinishNotification; æ’­æ”¾ç»“æŸæ—¶å‘é€çš„é€šçŸ¥ NSString * const MPMoviePlayerPlaybackStateDidChangeNotification; æ’­æ”¾çŠ¶æ€æ”¹å˜æ—¶å‘é€çš„é€šçŸ¥ NSString * const MPMoviePlayerLoadStateDidChangeNotification; ç¼“å†²çŠ¶æ€æ”¹å˜æ—¶å‘é€çš„é€šçŸ¥ NSString * const MPMoviePlayerNowPlayingMovieDidChangeNotification; å½“å‰æ’­æ”¾çš„è§†é¢‘æ”¹å˜æ—¶å‘é€çš„é€šçŸ¥ NSString * const MPMoviePlayerWillEnterFullscreenNotification; å°†è¦è¿›å…¥å…¨å±æ¨¡å¼æ—¶å‘é€çš„é€šçŸ¥ NSString * const MPMoviePlayerDidEnterFullscreenNotification; å·²ç»è¿›å…¥å…¨å±æ—¶å‘é€çš„é€šçŸ¥ NSString * const MPMoviePlayerWillExitFullscreenNotification; å°†è¦é€€å‡ºå…¨å±æ—¶å‘é€çš„é€šçŸ¥ NSString * const MPMoviePlayerDidExitFullscreenNotification; å·²ç»é€€å‡ºå…¨å±æ—¶å‘é€çš„é€šçŸ¥ NSString * const MPMoviePlayerThumbnailImageRequestDidFinishNotification; è·å–ç¼©ç•¥å›¾å®Œæˆæ—¶å‘é€çš„é€šçŸ¥ äºŒã€MPMoviePlayerViewControllerè§†é¢‘è§†å›¾æ§åˆ¶å™¨å¦‚æœä½ å¾ˆç†Ÿæ‚‰MVCï¼Œä½ å¯èƒ½ä¼šè§‰å¾—MPMoviePlayerControllerçš„è®¾è®¡æ¨¡å¼éå¸¸è¹©è„šï¼Œå¼ºè¡Œè¦æ±‚ä½ å°†æ§åˆ¶å™¨çš„è§†å›¾åˆ†ç¦»å‡ºæ¥åŠ åœ¨å¦å¤–çš„UIä¸Šï¼Œå¾’å¢çš„ä»£ç é€»è¾‘çš„æ··ä¹±ï¼Œé‚£ä¹ˆä½ æƒ³çš„æ²¡é”™ï¼ŒMPMoviePlayerViewControllerå¯èƒ½å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ MPMoviePlayerViewControllerå°†è§†å›¾å°è£…åœ¨äº†ä¸€èµ·ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªæˆå‘˜å¯¹è±¡æ˜¯MPMoviePlayerControllerç±»å‹ï¼Œç±»ä¼¼C++ä¸­çš„has-aé€»è¾‘ï¼Œæˆ‘ä»¬åªéœ€è¦å¯¹MPMoviePlayerViewControllerè¿›è¡Œçš„ç®€å•çš„åˆå§‹åŒ–åï¼Œå¯¹å…¶ä¸­MPMoviePlayerControllerè¿›è¡Œå…¶ä»–é…ç½®ï¼Œä¹‹åé€šè¿‡æ¨¡æ€è·³è½¬åˆ‡æ¢æ§åˆ¶å™¨å³å¯ã€‚ æ–¹æ³•å¦‚ä¸‹ï¼š - (instancetype)initWithContentURL:(NSURL *)contentURL; åˆå§‹åŒ–æ–¹æ³•ï¼Œå’Œä¸Šé¢ç±»ä¼¼ @property (nonatomic, readonly) MPMoviePlayerController *moviePlayer; æ’­æ”¾å™¨å¯¹è±¡ - (void)presentMoviePlayerViewControllerAnimated:(MPMoviePlayerViewController *)moviePlayerViewController; - (void)dismissMoviePlayerViewControllerAnimated; viewControllerçš„æ¨¡æ€è·³è½¬æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å¯¼èˆªpushä¸pop ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243@interface ViewController2 ()@property(nonatomic,strong)MPMoviePlayerController * movie;@property(nonatomic,strong)MPMoviePlayerViewController * viewController;@end@implementation ViewController2- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view. [self playMovie:@&quot;111&quot;];&#125;-(void)playMovie:(NSString *)fileName&#123; //è§†é¢‘æ–‡ä»¶è·¯å¾„ NSString *path = [[NSBundle mainBundle] pathForResource:fileName ofType:@&quot;mp4&quot;]; //è§†é¢‘URL NSURL *url = [NSURL fileURLWithPath:path]; //è§†é¢‘æ’­æ”¾å¯¹è±¡ _viewController = [[MPMoviePlayerViewController alloc]initWithContentURL:url]; _movie=_viewController.moviePlayer; // æ³¨å†Œä¸€ä¸ªæ’­æ”¾ç»“æŸçš„é€šçŸ¥ [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(myMovieFinishedCallback:) name:MPMoviePlayerPlaybackDidFinishNotification object:_movie]; _movie.fullscreen=YES;&#125;-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event&#123; [_movie play]; [self presentViewController:_viewController animated:YES completion:nil];&#125;-(void)myMovieFinishedCallback:(NSNotification*)notify&#123; //è§†é¢‘æ’­æ”¾å¯¹è±¡ MPMoviePlayerController* theMovie = [notify object]; //é”€æ¯æ’­æ”¾é€šçŸ¥ [[NSNotificationCenter defaultCenter] removeObserver:self name:MPMoviePlayerPlaybackDidFinishNotification object:theMovie]; [theMovie.view removeFromSuperview]; &#125; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"Objective-Cä¸­runtimeæœºåˆ¶çš„åº”ç”¨","slug":"98Objective-Cä¸­runtimeæœºåˆ¶çš„åº”ç”¨","date":"2015-08-06T16:00:00.000Z","updated":"2021-07-01T07:20:43.324Z","comments":true,"path":"2015/08/07/98Objective-Cä¸­runtimeæœºåˆ¶çš„åº”ç”¨/","link":"","permalink":"http://huishao.cc/2015/08/07/98Objective-Cä¸­runtimeæœºåˆ¶çš„åº”ç”¨/","excerpt":"","text":"Objective-Cä¸­runtimeæœºåˆ¶çš„åº”ç”¨ä¸€ã€åˆè¯†runtimeObjective-Cæ˜¯ä¸€ç§åŠ¨æ€è¯­è¨€ï¼Œæ‰€è°“åŠ¨æ€è¯­è¨€ï¼Œæ˜¯åœ¨ç¨‹åºæ‰§è¡Œæ—¶åŠ¨æ€çš„ç¡®å®šå˜é‡ç±»å‹ï¼Œæ‰§è¡Œå˜é‡ç±»å‹å¯¹åº”çš„æ–¹æ³•çš„ã€‚å› æ­¤ï¼Œåœ¨Object-Cä¸­å¸¸ç”¨å­—ç¬¦ä¸²æ˜ å°„ç±»çš„æŠ€å·§æ¥åŠ¨æ€åˆ›å»ºç±»å¯¹è±¡ã€‚å› ä¸ºOCçš„åŠ¨æ€è¯­è¨€ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€äº›æ‰‹æ®µï¼Œåœ¨ç¨‹åºè¿è¡Œæ—¶åŠ¨æ€çš„æ›´æ”¹å¯¹è±¡çš„å˜é‡ç”šè‡³æ–¹æ³•ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„runtimeæœºåˆ¶ã€‚ äºŒã€ä½ è¿˜æœ‰ä»€ä¹ˆåŠæ³•æ“ä½œè¿™æ ·çš„å˜é‡ä¹ˆï¼Ÿé¦–å…ˆï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼Œè¿™é‡Œæœ‰æˆ‘åˆ›å»ºçš„ä¸€ä¸ªMyObjectç±»ï¼š 1234567891011121314151617181920212223242526272829303132//.h===========================@interface MyObject : NSObject&#123; @private int privateOne; NSString * privateTow;;&#125;@end//=============================//.m===========================@interface MyObject()&#123; @private NSString * privateThree;&#125;@end@implementation MyObject- (instancetype)init&#123; self = [super init]; if (self) &#123; privateOne=1; privateTow=@&quot;Tow&quot;; privateThree=@&quot;Three&quot;; &#125; return self;&#125;-(NSString *)description&#123; return [NSString stringWithFormat:@&quot;one=%d\\ntow=%@\\nthree=%@\\n&quot;,privateOne,privateTow,privateThree];&#125;@end//============================= è¿™ä¸ªç±»æ˜¯ç›¸å½“çš„å®‰å…¨ï¼Œé¦–å…ˆï¼Œåœ¨å¤´æ–‡ä»¶ä¸­æ²¡æœ‰æä¾›ä»»ä½•çš„æ–¹æ³•æ¥å£ï¼Œæˆ‘ä»¬æ²¡æœ‰åŠæ³•ä½¿ç”¨ç‚¹è¯­æ³•åšä»»ä½•æ“ä½œï¼ŒprivateOneå’ŒPrivateTowä¸¤ä¸ªå˜é‡è™½ç„¶å£°æ˜åœ¨äº†å¤´æ–‡ä»¶ä¸­ï¼Œå´æ˜¯ç§æœ‰ç±»å‹çš„ï¼Œé€šè¿‡æŒ‡é’ˆçš„æ–¹å¼æˆ‘ä»¬è™½ç„¶å¯ä»¥çœ‹åˆ°ä»–ä»¬ï¼Œå´ä¸èƒ½åšä»»ä½•è¯»å–ä¿®æ”¹çš„æ“ä½œï¼Œxcodeä¸­çš„æç¤ºå¦‚ä¸‹ï¼š ä»–ä¼šå‘Šè¯‰æˆ‘ä»¬ï¼Œè¿™æ˜¯ä¸€ä¸ªç§æœ‰çš„å˜é‡ï¼Œæˆ‘ä»¬ä¸èƒ½ä½¿ç”¨ã€‚å¯¹äºprivateThreeï¼Œæˆ‘ä»¬æ›´æ˜¯æŸæ‰‹æ— ç­–ï¼Œä¸ä»…ä¸èƒ½ä½¿ç”¨ï¼Œæˆ‘ä»¬ç”šè‡³éƒ½çœ‹ä¸åˆ°å®ƒçš„å­˜åœ¨ã€‚é‚£ä¹ˆå¯¹äºè¿™ç§æƒ…å†µï¼Œä½ æœ‰ä»€ä¹ˆåŠæ³•æ“ä½œè¿™äº›å˜é‡ä¹ˆï¼Ÿå¯¹ï¼Œæ˜¯æ—¶å€™å±•ç°çœŸæ­£çš„æŠ€æœ¯äº†ï¼šruntime! ä¸‰ã€é€šè¿‡runtimeè·å–å¯¹è±¡çš„å˜é‡åˆ—è¡¨è¦æ“ä½œå¯¹è±¡çš„å˜é‡ï¼Œæˆ‘ä»¬é¦–å…ˆåº”è¯¥è¦æ•è·è¿™äº›å˜é‡ï¼Œè®©ä»–ä»¬æ— å¤„éå½¢ã€‚æ— è®ºå£°æ˜åœ¨å¤´æ–‡ä»¶æˆ–æ˜¯å®ç°æ–‡ä»¶ï¼Œæ— è®ºç±»å‹æ˜¯å…¬å¼€çš„è¿˜æ˜¯ç§æœ‰çš„ï¼Œåªè¦å£°æ˜äº†è¿™ä¸ªå˜é‡ï¼Œç³»ç»Ÿå°±ä¼šä¸ºå…¶åˆ†é…ç©ºé—´ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡runtimeæœºåˆ¶æ•è·åˆ°å®ƒï¼Œä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536#import &quot;ViewController.h&quot;#import &quot;MyObject.h&quot;//åŒ…å«runtimeå¤´æ–‡ä»¶#import &lt;objc/runtime.h&gt;@interface ViewController ()@end@implementation ViewController- (void)viewDidLoad &#123; [super viewDidLoad]; //æˆ‘ä»¬å…ˆå£°æ˜ä¸€ä¸ªunsigned intå‹çš„æŒ‡é’ˆï¼Œå¹¶ä¸ºå…¶åˆ†é…å†…å­˜ unsigned int * count = malloc(sizeof(unsigned int)); //è°ƒç”¨runtimeçš„æ–¹æ³• //Ivarï¼šæ–¹æ³•è¿”å›çš„å¯¹è±¡å†…å®¹å¯¹è±¡ï¼Œè¿™é‡Œå°†è¿”å›ä¸€ä¸ªIvarç±»å‹çš„æŒ‡é’ˆ //class_copyIvarListæ–¹æ³•å¯ä»¥æ•è·åˆ°ç±»çš„æ‰€æœ‰å˜é‡ï¼Œå°†å˜é‡çš„æ•°é‡å­˜åœ¨ä¸€ä¸ªunsigned intçš„æŒ‡é’ˆä¸­ Ivar * mem = class_copyIvarList([MyObject class], count); //è¿›è¡Œéå† for (int i=0; i&lt; *count ; i++) &#123; //é€šè¿‡ç§»åŠ¨æŒ‡é’ˆè¿›è¡Œéå† Ivar var = * (mem+i); //è·å–å˜é‡çš„åç§° const char * name = ivar_getName(var); //è·å–å˜é‡çš„ç±»å‹ const char * type = ivar_getTypeEncoding(var); NSLog(@&quot;%s:%s\\n&quot;,name,type); &#125; //é‡Šæ”¾å†…å­˜ free(count); //æ³¨æ„å¤„ç†é‡æŒ‡é’ˆ count=nil;&#125;- (void)didReceiveMemoryWarning &#123; [super didReceiveMemoryWarning]; // Dispose of any resources that can be recreated.&#125;@end æ‰“å°ç»“æœå¦‚ä¸‹ï¼Œå…¶ä¸­iè¡¨ç¤ºintå‹ï¼š æ˜¯ä¸æ˜¯å°åƒæƒŠäº†ä¸€ä¸‹ï¼Œæ— è®ºå˜é‡åœ¨å“ªé‡Œï¼Œåªè¦å®ƒåœ¨ï¼Œå°±è®©å®ƒæ— å¤„éå½¢ã€‚ å››ã€è®©æˆ‘æ‰¾åˆ°ä½ ï¼Œå°±è®©æˆ‘æ”¹å˜ä½ ï¼ä»…ä»…èƒ½å¤Ÿè·å¾—å˜é‡çš„ç±»å‹å’Œåå­—æˆ–è®¸å¹¶æ²¡æœ‰ä»€ä¹ˆåµç”¨ï¼Œæ²¡é”™ï¼Œæˆ‘ä»¬è·å–å˜é‡çš„ç›®çš„ä¸æ˜¯ä¸ºäº†è§‚èµï¼Œè€Œæ˜¯ä¸ºäº†æ“ä½œå®ƒï¼Œè¿™å¯¹runtimeæ¥è¯´ï¼Œä¹Ÿæ˜¯å°äº‹ä¸€ç¢Ÿã€‚ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415- (void)viewDidLoad &#123; [super viewDidLoad]; //è·å–å˜é‡ unsigned int count; Ivar * mem = class_copyIvarList([MyObject class],&amp;count); //åˆ›å»ºå¯¹è±¡ MyObject * obj = [[MyObject alloc]init]; NSLog(@&quot;before runtime operate:%@&quot;,obj); //è¿›è¡Œå˜é‡çš„è®¾ç½® object_setIvar(obj, mem[0],10); object_setIvar(obj, mem[1], @&quot;isTow&quot;); object_setIvar(obj, mem[2], @&quot;isThree&quot;); NSLog(@&quot;after runtime operate:%@&quot;,obj); &#125; Tip:åœ¨ä¿®æ”¹intå‹å˜é‡çš„æ—¶å€™ï¼Œä½ æˆ–è®¸ä¼šé‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼ŒARCä¸‹ï¼Œç¼–è¯‘å™¨ä¸å…è®¸ä½ å°†intç±»å‹çš„å€¼èµ‹å€¼ç»™idï¼Œåœ¨buildsetä¸­å°†Objective-C Automatic Reference Countingä¿®æ”¹ä¸ºNoå³å¯ã€‚ æ‰“å°æ•ˆæœå¦‚ä¸‹ï¼š å¯ä»¥çœ‹åˆ°ï¼Œé‚£äº›çœ‹ä¼¼éå¸¸å®‰å…¨çš„å˜é‡è¢«æˆ‘ä»¬ä¿®æ”¹äº†ã€‚ äº”ã€è®©æˆ‘çœ‹çœ‹ä½ çš„æ–¹æ³•å§å˜é‡é€šè¿‡runtimeæœºåˆ¶æˆ‘ä»¬å¯ä»¥å–åˆ°å’Œæ”¹å˜å€¼ï¼Œé‚£ä¹ˆæˆ‘ä»¬å†å¤§èƒ†ä¸€ç‚¹ï¼Œè¯•è¯•é‚£äº›ç§æœ‰çš„æ–¹æ³•ï¼Œé¦–å…ˆæˆ‘ä»¬åœ¨MyObjectç±»ä¸­æ·»åŠ ä¸€äº›æ–¹æ³•ï¼Œæˆ‘ä»¬åªå®ç°ï¼Œå¹¶ä¸å£°æ˜ä»–ä»¬ï¼š 1234567891011121314151617181920212223242526@interface MyObject()&#123; @private NSString * privateThree;&#125;@end@implementation MyObject- (instancetype)init&#123; self = [super init]; if (self) &#123; privateOne=1; privateTow=@&quot;Tow&quot;; privateThree=@&quot;Three&quot;; &#125; return self;&#125;-(NSString *)description&#123; return [NSString stringWithFormat:@&quot;one=%d\\ntow=%@\\nthree=%@\\n&quot;,privateOne,privateTow,privateThree];&#125;-(NSString *)method1&#123; return @&quot;method1&quot;;&#125;-(NSString *)method2&#123; return @&quot;method2&quot;;&#125; è¿™æ ·çš„æ–¹æ³•æˆ‘ä»¬åœ¨å¤–é¢æ˜¯æ— æ³•è°ƒç”¨ä»–ä»¬çš„ï¼Œå’Œæ“ä½œå˜é‡çš„æ€è·¯ä¸€æ ·ï¼Œæˆ‘ä»¬å…ˆè¦æ•è·è¿™äº›æ–¹æ³•ï¼š 12345678 //è·å–æ‰€æœ‰æˆå‘˜æ–¹æ³• Method * mem = class_copyMethodList([MyObject class], &amp;count); //éå† for(int i=0;i&lt;count;i++)&#123; SEL name = method_getName(mem[i]); NSString * method = [NSString stringWithCString:sel_getName(name) encoding:NSUTF8StringEncoding]; NSLog(@&quot;%@\\n&quot;,method); &#125; æ‰“å°å¦‚ä¸‹ï¼š å¾—åˆ°äº†è¿™äº›æ–¹æ³•åï¼Œæˆ‘ä»¬å¤§èƒ†çš„è°ƒç”¨å³å¯ï¼š 12 MyObject * obj = [[MyObject alloc]init]; NSLog(@&quot;%@&quot;,[obj method1]); Tip:è¿™é‡Œç¼–è¯‘å™¨ä¸ä¼šç»™æˆ‘ä»¬æ–¹æ³•æç¤ºï¼Œæ”¾å¿ƒå¤§èƒ†çš„è°ƒç”¨å³å¯ã€‚ å…­ã€åŠ¨æ€çš„ä¸ºç±»æ·»åŠ æ–¹æ³•è¿™ä¸ªruntimeæœºåˆ¶æœ€å¼ºå¤§çš„éƒ¨åˆ†è¦åˆ°äº†ï¼Œè¯•æƒ³ï¼Œå¦‚æœæˆ‘ä»¬å¯ä»¥åŠ¨æ€çš„å‘ç±»ä¸­æ·»åŠ æ–¹æ³•ï¼Œé‚£å°†æ˜¯ä¸€ä»¶å¤šä¹ˆä»¤äººæ¿€åŠ¨çš„äº‹æƒ…ï¼Œæ³¨æ„ï¼Œè¿™é‡Œæ˜¯åŠ¨æ€çš„æ·»åŠ ï¼Œå’Œç±»åˆ«çš„æœ€å¤§ä¸åŒåœ¨äºè¿™ç§æ–¹å¼æ˜¯è¿è¡Œæ—¶æ‰å†³å®šæ˜¯å¦æ·»åŠ æ–¹æ³•çš„ã€‚ 12345678910111213141516171819202122- (void)viewDidLoad &#123; [super viewDidLoad]; //æ·»åŠ ä¸€ä¸ªæ–°çš„æ–¹æ³•ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯è¿”å›å€¼çš„ç±»å‹væ˜¯void,iæ˜¯intï¼Œï¼šæ˜¯SELï¼Œå¯¹è±¡æ˜¯@ç­‰ class_addMethod([MyObject class], @selector(method3), (IMP)logHAHA, &quot;v&quot;); unsigned int count = 0; Method * mem = class_copyMethodList([MyObject class], &amp;count); for(int i=0;i&lt;count;i++)&#123; SEL name = method_getName(mem[i]); NSString * method = [NSString stringWithCString:sel_getName(name) encoding:NSUTF8StringEncoding]; NSLog(@&quot;%@\\n&quot;,method); &#125; MyObject * obj = [[MyObject alloc]init]; //è¿è¡Œè¿™ä¸ªæ–¹æ³• [obj performSelector:@selector(method3)]; &#125;//æ–¹æ³•çš„å®ç°void logHAHA()&#123; NSLog(@&quot;HAHA&quot;);&#125; è¿è¡Œç»“æœå¦‚ä¸‹ï¼š ä»å‰äº”è¡Œå¯ä»¥çœ‹å‡ºï¼Œæ–¹æ³•å·²ç»åŠ è¿›å»äº†ï¼Œä»æœ€åä¸€è¡Œå¯ä»¥çœ‹å‡ºï¼Œæ‰§è¡Œæ²¡æœ‰é—®é¢˜ã€‚ ä¸ƒã€åšç‚¹å°æ‰‹è„šç¨‹åºå‘˜æ€»æ˜¯å¾—å¯¸è¿›å°ºçš„ï¼Œç°åœ¨ï¼Œæˆ‘ä»¬è¦åšç‚¹äº‹æƒ…ï¼Œç”¨æˆ‘ä»¬çš„å‡½æ•°æ›¿æ¢æ‰ç±»ä¸­çš„å‡½æ•°ï¼š 12345678910111213- (void)viewDidLoad &#123; [super viewDidLoad]; MyObject * obj = [[MyObject alloc]init]; //æ›¿æ¢ä¹‹å‰çš„æ–¹æ³• NSLog(@&quot;%@&quot;, [obj method1]); //æ›¿æ¢ class_replaceMethod([MyObject class], @selector(method1), (IMP)logHAHA, &quot;v&quot;); [obj method1]; &#125;void logHAHA()&#123; NSLog(@&quot;HAHA&quot;);&#125; æ‰“å°å¦‚ä¸‹ï¼š è¿™æ¬¡å¤Ÿcoolå§ï¼Œé€šè¿‡è¿™ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠç³»ç»Ÿçš„å‡½æ•°éƒ½æä¹±å¥—ã€‚å½“ç„¶ï¼Œruntimeè¿˜æœ‰è®¸å¤šå¾ˆcoolçš„æ–¹æ³•ï¼š id object_copy(id obj, size_t size) æ‹·è´ä¸€ä¸ªå¯¹è±¡ id object_dispose(id obj) é‡Šæ”¾ä¸€ä¸ªå¯¹è±¡ const char *object_getClassName(id obj) è·å–å¯¹è±¡çš„ç±»å ive void method_exchangeImplementations(Method m1, Method m2)äº¤æ¢ä¸¤ä¸ªæ–¹æ³•çš„å®ç° ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"Cocos2d-x-v3ä¸­3Dç½‘æ ¼ç‰¹æ•ˆåŠ¨ç”»çš„åº”ç”¨","slug":"97Cocos2d-x-v3ä¸­3Dç½‘æ ¼ç‰¹æ•ˆåŠ¨ç”»çš„åº”ç”¨","date":"2015-08-05T16:00:00.000Z","updated":"2021-07-01T07:14:42.655Z","comments":true,"path":"2015/08/06/97Cocos2d-x-v3ä¸­3Dç½‘æ ¼ç‰¹æ•ˆåŠ¨ç”»çš„åº”ç”¨/","link":"","permalink":"http://huishao.cc/2015/08/06/97Cocos2d-x-v3ä¸­3Dç½‘æ ¼ç‰¹æ•ˆåŠ¨ç”»çš„åº”ç”¨/","excerpt":"","text":"Cocos2d-x-v3ä¸­3Dç½‘æ ¼ç‰¹æ•ˆåŠ¨ç”»çš„åº”ç”¨ä¸€ã€ç½‘æ ¼ç‰¹æ•ˆçš„ä½¿ç”¨åŸç†åŸºç¡€çš„åŠ¨ä½œæ˜¯å¯¹èŠ‚ç‚¹æ•´ä½“è¿›è¡Œç§»åŠ¨ï¼Œå˜å½¢ç­‰æ“ä½œï¼Œç½‘æ ¼ç‰¹æ•ˆçš„åŸç†æ˜¯å°†èŠ‚ç‚¹åˆ†å‰²æˆå¤šä¸ªå°ºå¯¸ç›¸åŒçš„ç½‘æ ¼ï¼Œæ ¹æ®æ”¹å˜æ¯ä¸ªç½‘æ ¼å—çš„å±æ€§ä½¿æ•´ä½“èŠ‚ç‚¹äº§ç”Ÿ3Dçš„æ•ˆæœã€‚ äºŒã€ç½‘æ ¼ç‰¹æ•ˆçš„åŸºæœ¬ç”¨æ³•åœ¨cocos2d-xä¸­ï¼Œv3çš„ç‰ˆæœ¬æ–°å¼•å…¥äº†ä¸€ä¸ªç±»NodeGridï¼Œä¸“é—¨ç”¨æ¥åŒ…è£…ç½‘æ ¼çš„ç‰¹æ•ˆï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516 //è·å–å±å¹•å°ºå¯¸ Size visibleSize = Director::getInstance()-&gt;getVisibleSize(); Vec2 origin = Director::getInstance()-&gt;getVisibleOrigin(); //åŠ è½½ç²¾çµ auto sprite = Sprite::create(&quot;HelloWorld.png&quot;); sprite-&gt;setPosition(Vec2(visibleSize.width/2+origin.x, visibleSize.height/2+origin.y)); //åˆ›å»ºç½‘æ ¼ç‰¹æ•ˆåŒ…è£…ç±» NodeGrid * nodeg = NodeGrid::create(); nodeg-&gt;setPosition(Vec2::ZERO); //æ·»åŠ æ’­æ”¾ç‰¹æ•ˆçš„ç²¾çµ nodeg-&gt;addChild(sprite); this-&gt;addChild(nodeg); //å‚æ•°çš„å«ä¹‰ åˆ†åˆ«æ˜¯ æ‰§è¡Œæ—¶é—´ï¼Œåˆ‡åˆ†çš„ç½‘æ ¼å¤§å°ï¼Œæ³¢æµªæ¬¡æ•°ï¼Œæ³¢æµªå¤§å° Waves3D * ani3d = Waves3D::create(2, Size(15, 15), 6, 4); //æ‰§è¡Œç‰¹æ•ˆ nodeg-&gt;runAction(ani3d); ä¸‰ã€ç³»ç»Ÿæä¾›çš„ç½‘æ ¼ç‰¹æ•ˆstatic Waves3D* create(float duration, const Size&amp; gridSize, unsigned int waves, float amplitude); åˆ›å»ºæ³¢æµª3Dæ•ˆæœï¼Œå‚æ•°å«ä¹‰ä¸ºï¼šæ‰§è¡Œæ—¶é—´ï¼Œç½‘æ ¼å°ºå¯¸ï¼Œæ³¢æµªæ¬¡æ•°ï¼Œæ³¢æµªå¤§å° static FlipX3D* create(float duration); ä»¥xä¸ºè½´è¿›è¡Œç¿»è½¬ static FlipY3D* create(float duration); ä»¥yä¸ºè½´è¿›è¡Œç¿»è½¬ static Lens3D* create(float duration, const Size&amp; gridSize, const Vec2&amp; position, float radius); åˆ›å»ºé•œå¤´çš„3Dæ•ˆæœï¼Œå‚æ•°ä¸ºï¼šæ‰§è¡Œæ—¶é—´ï¼Œç½‘æ ¼å¤§å°ï¼Œé•œå¤´ä¸­å¿ƒï¼Œé•œå¤´åŠå¾„ static Ripple3D* create(float duration, const Size&amp; gridSize, const Vec2&amp; position, float radius, unsigned int waves, float amplitude); åˆ›å»ºæ³¢çº¹ç‰¹æ•ˆï¼Œå‚æ•°ä¸ºï¼šæ‰§è¡Œæ—¶é—´ï¼Œç½‘æ ¼å¤§å°ï¼Œæ³¢çº¹ä¸­å¿ƒï¼Œæ³¢çº¹åŠå¾„ï¼Œæ³¢çº¹è®¡æ•°ï¼ŒæŒ¯å¹… static Shaky3D* create(float initWithDuration, const Size&amp; gridSize, int range, bool shakeZ); åˆ›å»ºéœ‡åŠ¨ç‰¹æ•ˆï¼Œå‚æ•°ä¸ºï¼šæ‰§è¡Œæ—¶é—´ï¼Œç½‘æ ¼å¤§å°ï¼Œéœ‡åŠ¨èŒƒå›´ï¼Œæ˜¯å¦æ³¢åŠ¨zè½´ static Liquid* create(float duration, const Size&amp; gridSize, unsigned int waves, float amplitude); åˆ›å»ºæ¶²ä½“ç‰¹æ•ˆï¼Œå‚æ•°ä¸ºï¼šæ‰§è¡Œæ—¶é—´ï¼Œç½‘æ ¼å°ºå¯¸ï¼ŒæµåŠ¨æ¬¡æ•°ï¼Œå¹…åº¦ static Waves* create(float duration, const Size&amp; gridSize, unsigned int waves, float amplitude, bool horizontal, bool vertical); åˆ›å»ºå¹³é¢æ³¢çº¹ç‰¹æ•ˆï¼Œå‚æ•°ä¸ºï¼šæ‰§è¡Œæ—¶é—´ï¼Œç½‘æ ¼å°ºå¯¸ï¼Œæ³¢çº¹æ¬¡æ•°ï¼Œæ³¢çº¹æŒ¯å¹…ï¼Œå¼€å…³æ¨ªå‘æ³¢çº¹ï¼Œå¼€å…³çºµå‘æ³¢çº¹ static Twirl* create(float duration, const Size&amp; gridSize, Vec2 position, unsigned int twirls, float amplitude);åˆ›å»ºæ‰­æ›²æ—‹è½¬çš„ç‰¹æ•ˆï¼Œå‚æ•°ä¸ºï¼šæ‰§è¡Œæ—¶é—´ï¼Œç½‘æ ¼å°ºå¯¸ï¼Œæ‰­æ›²æ—‹è½¬ä¸­å¿ƒï¼Œæ—‹è½¬æ¬¡æ•°ï¼Œæ—‹è½¬å¹…åº¦ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"COCOS2D","slug":"COCOS2D","permalink":"http://huishao.cc/categories/COCOS2D/"}],"tags":[],"keywords":[{"name":"COCOS2D","slug":"COCOS2D","permalink":"http://huishao.cc/categories/COCOS2D/"}]},{"title":"Cocos2d-x-v3åŠ¨ä½œä½“ç³»","slug":"95Cocos2d-x-v3åŠ¨ä½œä½“ç³»","date":"2015-08-04T16:00:00.000Z","updated":"2021-06-30T11:57:44.554Z","comments":true,"path":"2015/08/05/95Cocos2d-x-v3åŠ¨ä½œä½“ç³»/","link":"","permalink":"http://huishao.cc/2015/08/05/95Cocos2d-x-v3åŠ¨ä½œä½“ç³»/","excerpt":"","text":"Cocos2d-x-v3åŠ¨ä½œä½“ç³»cocos2d-x-v3ç‰ˆæœ¬v2çš„ç‰ˆæœ¬æœ‰çš„å¾ˆå¤§çš„æ”¹åŠ¨ï¼Œæœ€ç›´è§‚çš„æ˜¯åœ¨ä¸€äº›å‡½æ•°çš„æ”¹åŠ¨å’Œç±»åçš„æ”¹åŠ¨ä¸Šï¼Œé¦–å…ˆä»¥CCå¼€å¤´çš„ç±»ï¼Œéƒ½ä¸å†ä½¿ç”¨CCã€‚åœ¨æˆ‘ä¸ªäººçš„ç†è§£ä¸Šï¼ŒåŸæ¥çš„cocos2d-xæ˜¯å®Œå…¨ä»iphoneçš„æ¡†æ¶cocos2dç§»æ¤è¿‡æ¥çš„ï¼Œä»£ç çš„é£æ ¼å’Œç¼–ç¨‹çš„æ€æƒ³éƒ½åŠç±»ä¼¼äºObject-Cï¼Œé™¤äº†è¯­æ³•æ˜¯C++çš„å¤–ï¼Œå…¶ä»–å°±åƒæ˜¯OCç‰ˆçš„ç¿»è¯‘ï¼Œæ–°çš„ç‰ˆæœ¬æ›´å¥½çš„ä½“ç°äº†è·¨å¹³å°çš„ç‰¹æ€§ï¼Œä¹Ÿæ›´å¤šçš„è¿ç”¨äº†C++çš„ä¸€äº›ç¼–ç æ€æƒ³å’Œè¯­è¨€ç‰¹ç‚¹ï¼Œæ›´æ˜“äºå„å¹³å°çš„å¼€å‘è€…ä½¿ç”¨ã€‚è¿™ç¯‡åšå®¢çš„ä¸»è¦å†…å®¹ï¼Œæ˜¯æ€»ç»“cocos2dä¸­è¡Œä¸ºåŠ¨ä½œçš„å¤„ç†æ–¹æ³•å’Œç›¸å…³å‡½æ•°ã€‚ ä¸€ã€ç¬æ—¶åŠ¨ä½œ è¿™ç±»è¡Œä¸ºåªèƒ½ç§°ä¸ºåŠ¨ä½œï¼Œä¸èƒ½ç§°ä½œåŠ¨ç”»ï¼Œå…¶æ‰§è¡Œæ˜¯ç¬æ—¶çš„ï¼Œæ²¡æœ‰å¯æ˜¯åŒ–çš„è¿‡ç¨‹ã€‚ cocos2dä¸­å¸¸ç”¨çš„ç¬æ—¶åŠ¨ä½œæœ‰å¦‚ä¸‹å‡ ç§ï¼š FlipXï¼šå…³äºxè½´åšé•œåƒå˜æ¢ã€‚ FlipYï¼šå…³äºyè½´åšé•œåƒå˜æ¢ã€‚ Hideï¼šéšè—ã€‚ Showï¼šæ˜¾ç¤ºã€‚ ToggleVisibilityï¼šåˆ‡æ¢éšè—å’Œæ˜¾ç¤ºã€‚ Placeï¼šå°†å¯¹è±¡æ”¾ç½®åœ¨æŸä¸ªä½ç½®ã€‚ äºŒã€å»¶æ—¶åŠ¨ä½œå»¶æ—¶åŠ¨ä½œå°±æ˜¯åŠ¨ç”»ï¼Œå°†åŠ¨ä½œçš„è¿‡ç¨‹å±•ç°å‡ºæ¥ï¼Œcocos2då¼•æ“ä¸­çš„å‡ ç§å»¶æ—¶åŠ¨ä½œå¦‚ä¸‹ï¼š 1\\. MoveTo:å°†å¯¹è±¡ç§»åŠ¨åˆ°æŸä¸€ä½ç½®ï¼Œæ˜¯ç»å¯¹ä½ç½®ï¼Œç§»åŠ¨åä¸ä¼šè®°å½•å¯¹è±¡çš„åŸå§‹ä½ç½®ï¼ŒåŠ¨ä½œä¸èƒ½è¿›è¡Œåè½¬ã€‚ä¾‹å¦‚ï¼š 12auto action = MoveTo::create(2, Vec2(100, 100));//2Sæ—¶é—´ç§»åŠ¨åˆ°(100,100) label-&gt;runAction(action);//æ‰§è¡ŒåŠ¨ä½œ 2.MoveBy:å°†å¯¹è±¡ç›¸å¯¹ç°åœ¨çš„ä½ç½®ç§»åŠ¨æŸä¸ªè·ç¦»ï¼Œè¿™ä¸ªç§»åŠ¨æ˜¯ç›¸å¯¹å¯¹è±¡å½“å‰ä½ç½®çš„ï¼Œå¯ä»¥åè½¬ã€‚ 3.JumpTo:å’ŒMoveToç±»ä¼¼ï¼Œå¯¹è±¡è·³åŠ¨åˆ°æŸä¸€ä½ç½®ï¼Œä¾‹å¦‚ï¼š 1label-&gt;runAction(JumpTo::create(2, Vec2(100, 100), 30, 3));//å¯¹è±¡åœ¨2Så†…è·³ä¸‰æ¬¡ï¼Œæ¯æ¬¡é«˜åº¦ä¸º30åƒç´ ï¼Œè·³åˆ°(100,100)ç‚¹ 4.JumpBy:å’ŒMoveByç±»ä¼¼ã€‚ 5.BezierTo:ä»¥è´å¡å°”æ›²çº¿çš„æ–¹å¼ç§»åŠ¨åˆ°æŸä¸€ä½ç½®ï¼Œä¾‹å¦‚ï¼š 123456ccBezierConfig config; config.controlPoint_1=Vec2(300, 300); config.controlPoint_2=Vec2(200,200); config.endPosition=Vec2(100, 100);//è®¾ç½®ä¸¤ä¸ªä¸­é—´ç‚¹å’Œä¸€ä¸ªç»ˆç‚¹ label-&gt;runAction(BezierTo::create(2, config));//2Sæ—¶é—´é€šè¿‡è´å¡å°”æ›²çº¿æ–¹å¼ç§»åŠ¨ 6.BezierBy:ä»¥è´å¡å°”æ›²çº¿çš„æ–¹å¼è¿›è¡Œç›¸å¯¹ç§»åŠ¨ã€‚ 7.ScaleTo:ç›¸å¯¹åŸå§‹å¤§å°ç¼©æ”¾åˆ°æŸä¸€å°ºåº¦ã€‚ 8.ScaleBy:ç›¸å¯¹ç›®å‰å¤§å°è¿›è¡Œç¼©æ”¾ã€‚ 9.RotateTo:ç›¸å¯¹åŸå§‹çŠ¶æ€æ—‹è½¬åˆ°æŸä¸€è§’åº¦ã€‚ 10.RotateByï¼šç›¸å¯¹ç›®å‰è½¬å°æ—‹è½¬æŸä¸ªè§’åº¦ã€‚ 11.Blink:é—ªçƒåŠ¨ç”»ã€‚ 12.TintToï¼šé¢œè‰²è½¬åŒ–åˆ°æŸä¸€è‰²å€¼ 13.TintBy:ç›¸å¯¹ç›®å‰è‰²å€¼ï¼Œé¢œè‰²ç›¸å¯¹è½¬å˜æŸä¸€è‰²å€¼ã€‚ 14.FadeTo:å˜æš—åˆ°æŸä¸€é€æ˜åº¦ 15.FadeIn:æ·¡å…¥åŠ¨ä½œ 16.FadeOutï¼šæ·¡å‡ºåŠ¨ä½œ ä¸‰ã€åŠ¨ä½œçš„ç»„åˆæ–¹å¼ cocos2dä¸­ä¸ä»…ä¸ºæˆ‘ä»¬æä¾›çš„å„ç§åŠ¨ä½œæ–¹å¼ï¼Œä¹Ÿä¸ºæˆ‘ä»¬æä¾›äº†ç›¸å…³çš„ç±»ç”¨äºç®¡ç†è¿™äº›åŠ¨ä½œï¼š 1.åŠ¨ä½œåºåˆ—Sequenceï¼šè¿™ä¸ªç±»å¯ä»¥åˆ›å»ºä¸€ä¸ªåŠ¨ä½œåºåˆ—ï¼ŒæŒ‰åºåˆ—ä¸­åŠ¨ä½œçš„é¡ºåºä¾æ¬¡æ‰§è¡ŒåŠ¨ä½œï¼Œå¦‚ä¸‹ï¼š 12 Sequence * sq= Sequence::create(TintTo::create(2, Color3B(123, 123, 123)),RotateTo::create(2, 30), NULL); label-&gt;runAction(sq);//åˆ›å»ºåŠ¨ä½œåºåˆ—ï¼Œä½¿å¯¹è±¡æ‰§è¡Œå…ˆå˜é¢œè‰²ï¼Œåœ¨æ—‹è½¬çš„åŠ¨ç”» 2.åŒæ­¥åŠ¨ä½œç»„Spawnï¼šè¿™ä¸ªç±»å’ŒSequenceç±»ä¼¼ï¼Œåªæ˜¯ä»–é‡Œé¢çš„åŠ¨ç”»ä¼šåŒæ—¶ä¸€èµ·æ‰§è¡Œã€‚ 3.æœ‰é™æ¬¡çš„å¾ªç¯åŠ¨ä½œRepeatï¼šè¿™ä¸ªç±»å¯ä»¥ä½¿æŸä¸€åŠ¨ä½œå¾ªç¯æ‰§è¡Œæ•°æ¬¡ï¼Œä¾‹å¦‚ï¼š 12Repeat * re = Repeat::create(RotateBy::create(2, 30), 5);//æ—‹è½¬5æ¬¡30åº¦ label-&gt;runAction(re); 4.æ— é™æ¬¡å¾ªç¯åŠ¨ä½œRepeatForeverï¼š 12RepeatForever * ref = RepeatForever::create(RotateBy::create(2, 30)); label-&gt;runAction(ref); 5.å¸§åŠ¨ç”» cocos2dä¸­åŒæ ·æä¾›äº†å¯¹å¸§åŠ¨ç”»çš„æ”¯æŒï¼š 12345678910111213141516 //åˆ›å»ºè®¾ç½®ç²¾çµ Sprite * spr = Sprite::create( &quot;CloseNormal.png&quot;); spr-&gt;setPosition(Vec2(100, 100)); //åˆ›å»ºä¸¤å¸§ç²¾çµå›¾ç‰‡ SpriteFrame * frame1 = SpriteFrame::create(&quot;CloseNormal.png&quot;, Rect(0, 0, 50, 50)); SpriteFrame * frame2 = SpriteFrame::create(&quot;CloseSelected.png&quot;, Rect(0, 0, 50, 50)); Vector&lt;SpriteFrame *&gt; arr; arr.pushBack(frame1); arr.pushBack(frame2); //åˆ›å»ºåŠ¨ç”»ä½“ ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¸§å®¹å™¨ï¼Œç¬¬äºŒä¸ªæ˜¯æ¯ä¸€å¸§çš„æ’­æ”¾æ—¶é—´ï¼Œç¬¬ä¸‰ä¸ªæ˜¯å¾ªç¯æ¬¡æ•° Animation * ani = Animation::createWithSpriteFrames(arr, 1, 1); //åˆ›å»ºåŠ¨ä½œ Animate *ant = Animate::create(ani); RepeatForever * ref = RepeatForever::create(ant); spr-&gt;runAction(ref); this-&gt;addChild(spr); 6.åè½¬åŠ¨ç”» å¯ä»¥é€šè¿‡reverseæ–¹æ³•è·å–åŠ¨ä½œçš„åè½¬åŠ¨ä½œï¼Œä¾‹å¦‚ï¼š 12345auto label = Label::createWithTTF(&quot;Hello World&quot;, &quot;fonts/arial.ttf&quot;, 24); MoveBy * move = MoveBy::create(3, Vec2(100, 100)); Sequence * sq = Sequence::create(move,move-&gt;reverse(), NULL); label-&gt;runAction(sq); //label ä¼šå…ˆç›¸å¯¹ç§»åŠ¨(100,100)ï¼Œå†åç§»åŠ¨å›æ¥ 7.åŠ¨ä½œçš„é€Ÿåº¦æ§åˆ¶ é€šè¿‡ä¸€äº›é€Ÿåº¦ç›¸å…³çš„ç±»ï¼Œcocos2då¯ä»¥å¾ˆè½»æ¾çš„åˆ›å»ºå‡ºå„ç§çº¿æ€§ä¸éçº¿æ€§çš„åŠ¨ä½œã€‚ä¾‹å¦‚ï¼š 12345auto label = Label::createWithTTF(&quot;Hello World&quot;, &quot;fonts/arial.ttf&quot;, 24); MoveTo * move = MoveTo::create(3, Vec2(-200, -200)); EaseIn* an = EaseIn::create(move, 5); label-&gt;runAction(an);//labelçš„è¿åŠ¨ä¼šå…ˆæ…¢åå¿«ï¼Œé€Ÿåº¦å·®ä¸º5å€ EaseIn:ç”±æ…¢å˜å¿«ï¼Œçº¿æ€§ EaseOutï¼šç”±å¿«å˜æ…¢ï¼Œçº¿æ€§ EaseInOutï¼šç”±æ…¢å˜å¿«å†ç”±å¿«å˜æ…¢ EaseSineIn:ç”±æ…¢å˜å¿«ï¼Œæ­£å¼¦è§„å¾‹ EaseSineOut:ç”±å¿«å˜æ…¢ï¼Œæ­£å¼¦è§„å¾‹ EaseSineInOutï¼šç”±æ…¢å˜å¿«å†ç”±å¿«å˜æ…¢ï¼Œæ­£å¼¦è§„å¾‹ EaseExponentialIn:ç”±æ…¢å˜å¿«,æŒ‡æ•°è§„å¾‹ EaseExponentialOut:ç”±å¿«å˜æ…¢,æŒ‡æ•°è§„å¾‹ EaseExponentialInOut:ç”±æ…¢å˜å¿«å†ç”±å¿«å˜æ…¢,æŒ‡æ•°è§„å¾‹ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"COCOS2D","slug":"COCOS2D","permalink":"http://huishao.cc/categories/COCOS2D/"}],"tags":[],"keywords":[{"name":"COCOS2D","slug":"COCOS2D","permalink":"http://huishao.cc/categories/COCOS2D/"}]},{"title":"Xcodeä¸­ä¿®æ”¹å˜é‡åã€ç±»ååŠå­—ç¬¦ä¸²çš„æ›¿æ¢æ“ä½œ","slug":"94Xcodeä¸­ä¿®æ”¹å˜é‡åã€ç±»ååŠå­—ç¬¦ä¸²çš„æ›¿æ¢æ“ä½œ","date":"2015-08-04T16:00:00.000Z","updated":"2021-06-30T11:27:50.184Z","comments":true,"path":"2015/08/05/94Xcodeä¸­ä¿®æ”¹å˜é‡åã€ç±»ååŠå­—ç¬¦ä¸²çš„æ›¿æ¢æ“ä½œ/","link":"","permalink":"http://huishao.cc/2015/08/05/94Xcodeä¸­ä¿®æ”¹å˜é‡åã€ç±»ååŠå­—ç¬¦ä¸²çš„æ›¿æ¢æ“ä½œ/","excerpt":"","text":"Xcodeä¸­ä¿®æ”¹å˜é‡åã€ç±»ååŠå­—ç¬¦ä¸²çš„æ›¿æ¢æ“ä½œåœ¨åšiOSå¼€å‘ä»£ç ä¼˜åŒ–çš„å·¥ä½œæ—¶ï¼Œä¼˜åŒ–ä»£ç ç»“æ„ä¹‹å‰ï¼Œæˆ‘ä»¬åº”è¯¥å…ˆæ•´ç†å¥½å·¥ç¨‹çš„å¤–è²Œï¼Œå°†æ–‡ä»¶å’Œç±»çš„å‘½åè¿›è¡Œè§„èŒƒï¼Œåœ¨Xcodeä¸­ä¸ºæˆ‘ä»¬æä¾›äº†æ–¹ä¾¿è€Œå¼ºå¤§çš„åç§°ä¿®æ”¹åŠŸèƒ½ã€‚ ç¬¬ä¸€æ­¥ï¼šä¿®æ”¹ç±»å å°†é¼ æ ‡ç‚¹å‡»æ”¾åœ¨ç±»çš„åç§°ä¸Šï¼Œé€‰æ‹©Xcodeå·¥å…·æ ä¸­çš„edit-&gt;refactor-&gt;renameï¼š ä¹‹åï¼Œå°†ç±»åæ›´æ”¹ä¸ºæˆ‘ä»¬éœ€è¦çš„æ¨¡å¼ç‚¹å‡»previewï¼Œè®°å¾—å°†ä¸‹é¢çš„å…³è”æ–‡ä»¶å‹¾é€‰ï¼š Xcodeä¼šä¸ºæˆ‘ä»¬æ£€æµ‹å‡ºéœ€è¦æ›´æ”¹çš„åœ°æ–¹ï¼Œæµè§ˆæ— è¯¯åç‚¹å‡»saveã€‚ ç¬¬äºŒæ­¥ ä¿®æ”¹ç›¸å…³å­—ç¬¦ä¸²ï¼š é€šè¿‡ç¬¬ä¸€æ­¥ï¼Œæˆ‘ä»¬çš„ç±»çš„æ–‡ä»¶åï¼Œç±»åéƒ½å·²ç»æ›´æ”¹ï¼Œä½†å¹¶ä¸å…¨é¢ï¼Œå› ä¸ºæŸäº›æ³¨é‡Šï¼Œå­—ç¬¦ä¸²åŠ¨æ€åˆ›å»ºç±»å¯¹è±¡ä»¥åŠç±»å‡½æ•°åˆ›å»ºç±»å¯¹è±¡æ—¶çš„ç±»åå¹¶æ²¡æœ‰æ›´æ”¹ï¼Œæˆ‘ä»¬éœ€è¦åšè¿™ä¸€æ­¥ï¼Œå°†æ›´æ”¹å‰çš„ç±»ååœ¨Xcodeå·¦ä¾§çš„æœç´¢æ ä¸­æœç´¢ï¼š ![](http://static.oschina.net/uploads/space/2015/0805/093235_ZPfC_2340880.png) å°†Findæ”¹é€‰ä¸ºReplaceï¼š è¿™é‡Œé¢æœ‰å››ä¸ªé€‰é¡¹ï¼Œæ„ä¹‰å¦‚ä¸‹ï¼š Containing:æ£€ç´¢å‡ºåŒ…æ¶µæ£€ç´¢æ¡ä»¶çš„å¯¹è±¡ Matching:æ£€ç´¢å‡ºç­‰äºæ£€ç´¢æ¡ä»¶çš„å¯¹è±¡ Start Withï¼šæ£€ç´¢å‡ºä»¥æ£€ç´¢æ¡ä»¶å¼€å¤´çš„å¯¹è±¡ Ending with:æ£€ç´¢å‡ºä»¥æ£€ç´¢æ¡ä»¶ç»“å°¾çš„å¯¹è±¡ æˆ‘ä»¬é€‰æ‹©Matchingï¼Œè¿›è¡Œæ£€ç´¢ï¼Œå°†æ£€ç´¢å‡ºæ¥çš„åœ°æ–¹è¿›è¡ŒReplaceæ›¿æ¢ï¼Œé€šè¿‡è¿™ä¸€æ­¥ï¼Œæˆ‘ä»¬å¯ä»¥æ›¿æ¢ä»£ç ä¸­çš„æ³¨é‡Šï¼Œå­—ç¬¦ä¸²ï¼Œç±»æ–¹æ³•ä»¥åŠxibå’ŒStoryBoardæ–‡ä»¶ä¸­å…³è”çš„idï¼Œcellå¤ç”¨ç¬¦ç­‰ã€‚ ç¬¬ä¸‰æ­¥ï¼šä¿®æ”¹æ–‡ä»¶ä¸­å˜é‡å åœ¨æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡command+Fæ¢å‡ºæœç´¢æ¡†ï¼Œå°†Findæ”¹é€‰ä¸ºReplaceæ£€ç´¢è¿›è¡Œæˆ‘ä»¬æƒ³è¦çš„å˜é‡æ›¿æ¢ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"ä»£ç ä¼˜åŒ–","slug":"ä»£ç ä¼˜åŒ–","permalink":"http://huishao.cc/categories/ä»£ç ä¼˜åŒ–/"}],"tags":[],"keywords":[{"name":"ä»£ç ä¼˜åŒ–","slug":"ä»£ç ä¼˜åŒ–","permalink":"http://huishao.cc/categories/ä»£ç ä¼˜åŒ–/"}]},{"title":"Cocos2d-x-v3åœºæ™¯åˆ‡æ¢","slug":"96Cocos2d-x-v3åœºæ™¯åˆ‡æ¢","date":"2015-08-04T16:00:00.000Z","updated":"2021-07-01T06:51:02.057Z","comments":true,"path":"2015/08/05/96Cocos2d-x-v3åœºæ™¯åˆ‡æ¢/","link":"","permalink":"http://huishao.cc/2015/08/05/96Cocos2d-x-v3åœºæ™¯åˆ‡æ¢/","excerpt":"","text":"Cocos2d-x-v3åœºæ™¯åˆ‡æ¢cocos2dä¸­åœºæ™¯çš„åˆ‡æ¢é‡‡ç”¨çš„æ˜¯åŒ…è£…çš„æ€æƒ³ï¼Œé€šè¿‡åˆ›å»ºä¸€ä¸ªä¸“åœºæ•ˆæœç±»ï¼Œå°†éœ€è¦ä¸“åœºçš„åœºæ™¯è¿›è¡ŒåŒ…è£…ã€‚ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š 12 auto * scene = OtherScene::createScene();//åˆ›å»ºä¸€ä¸ªåœºæ™¯ Director::getInstance()-&gt;replaceScene(TransitionFlipX::create(1, scene));//è¿›è¡ŒåŒ…è£…åˆ‡æ¢ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºåˆ‡æ¢æ—¶é—´ï¼Œç¬¬äºŒä¸ªä¸ºåˆ‡æ¢çš„åœºæ™¯ å¼•æ“ä¸ºæˆ‘ä»¬å°è£…çš„ç‰¹æ•ˆæœ‰å¾ˆå¤šï¼Œå‡½æ•°æ–¹æ³•å¦‚ä¸‹ï¼š static TransitionRotoZoom create(float t, Scene scene); æ—§çš„åœºæ™¯æ—‹è½¬ç¼©å°åˆ°ä¸­å¿ƒç‚¹åå†å°†æ–°çš„åœºæ™¯æ—‹è½¬æ”¾å¤§å®Œæˆåˆ‡æ¢ static TransitionJumpZoom create(float t, Scene scene); æ—§åœºæ™¯å¼¹è·³ç¼©å°ç§»å‡ºï¼Œæ–°åœºæ™¯å¼¹è·³æ–¹æ³•å®Œæˆåˆ‡æ¢ static TransitionMoveInL create(float t, Scene scene); æ–°çš„åœºæ™¯ä»å·¦è¾¹åˆ‡å…¥(è¦†ç›–) static TransitionMoveInR create(float t, Scene scene); æ–°çš„åœºæ™¯ä»å³è¾¹åˆ‡å…¥(è¦†ç›–) static TransitionMoveInT create(float t, Scene scene); æ–°çš„åœºæ™¯ä»ä¸Šè¾¹åˆ‡å…¥(è¦†ç›–) static TransitionMoveInB create(float t, Scene scene); æ–°çš„åœºæ™¯ä»ä¸‹è¾¹åˆ‡å…¥(è¦†ç›–) static TransitionSlideInL create(float t, Scene scene); æ–°çš„åœºæ™¯ä»å·¦è¾¹æ¨å…¥ static TransitionSlideInR create(float t, Scene scene); æ–°çš„åœºæ™¯ä»å³è¾¹æ¨å…¥ static TransitionSlideInT create(float t, Scene scene); æ–°çš„åœºæ™¯ä»ä¸Šè¾¹æ¨å…¥ static TransitionSlideInB create(float t, Scene scene); æ–°çš„åœºæ™¯ä»ä¸‹è¾¹æ¨å…¥ static TransitionShrinkGrow create(float t, Scene scene); æ–°çš„åœºæ™¯ä»åå‘å‰è¿›è¡Œæ›¿æ¢ static TransitionFlipX create(float t, Scene s, Orientation o); åœºæ™¯ä»¥Xä¸ºè½´è¿›è¡Œç¿»è½¬åˆ‡æ¢ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºç¿»è½¬çš„æ–¹å‘ static TransitionFlipY create(float t, Scene s, Orientation o); åœºæ™¯ä»¥Yä¸ºè½´è¿›è¡Œç¿»è½¬åˆ‡æ¢ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºç¿»è½¬çš„æ–¹å‘ static TransitionFlipAngular create(float t, Scene s, Orientation o); åœºæ™¯ä»¥å¯¹è§’çº¿ä¸ºè½´è¿›è¡Œç¿»è½¬åˆ‡æ¢ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºç¿»è½¬çš„æ–¹å‘ static TransitionZoomFlipX create(float t, Scene s, Orientation o); åœºæ™¯ä»¥Xè½´è¿›è¡Œç¿»è½¬ï¼Œå¸¦ç¼©æ”¾æ•ˆæœ static TransitionZoomFlipY create(float t, Scene s, Orientation o); åœºæ™¯ä»¥Yè½´è¿›è¡Œç¿»è½¬ï¼Œå¸¦ç¼©æ”¾æ•ˆæœ static TransitionZoomFlipAngular create(float t, Scene s, Orientation o); åœºæ™¯ä»¥å¯¹è§’çº¿ä¸ºè½´è¿›è¡Œç¿»è½¬ï¼Œå¸¦ç¼©æ”¾æ•ˆæœ static TransitionFade create(float duration, Scene scene, const Color3B&amp; color); åœºæ™¯ä»¥é¢œè‰²è¿‡æ¸¡è¿›è¡Œåˆ‡æ¢ static TransitionCrossFade create(float t, Scene scene); åœºæ™¯æ·¡å‡ºè¿‡æ¸¡åˆ‡æ¢ static TransitionTurnOffTiles create(float t, Scene scene); åœºæ™¯ç“¦ç‰‡æº¶è§£åˆ‡æ¢ static TransitionSplitCols create(float t, Scene scene); åœºæ™¯çºµå‘åˆ‡å‰²åˆ‡æ¢ static TransitionSplitRows create(float t, Scene scene); åœºæ™¯æ¨ªå‘åˆ‡å‰²åˆ‡æ¢ static TransitionFadeTR create(float t, Scene scene); åœºæ™¯å‘å³ä¸Šè§’è¿‡æ»¤åˆ‡æ¢ static TransitionFadeBL create(float t, Scene scene); åœºæ™¯å‘å·¦ä¸‹è§’è¿‡æ»¤åˆ‡æ¢ static TransitionFadeUp create(float t, Scene scene); åœºæ™¯å‘ä¸Šè¿‡æ»¤åˆ‡æ¢ static TransitionFadeDown create(float t, Scene scene); åœºæ™¯å‘ä¸‹è¿‡æ»¤åˆ‡æ¢ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"COCOS2D","slug":"COCOS2D","permalink":"http://huishao.cc/categories/COCOS2D/"}],"tags":[],"keywords":[{"name":"COCOS2D","slug":"COCOS2D","permalink":"http://huishao.cc/categories/COCOS2D/"}]},{"title":"Cocos2d-x-v3åæ ‡ä½“ç³»","slug":"93Cocos2d-x-v3åæ ‡ä½“ç³»","date":"2015-08-02T16:00:00.000Z","updated":"2021-06-30T11:25:57.887Z","comments":true,"path":"2015/08/03/93Cocos2d-x-v3åæ ‡ä½“ç³»/","link":"","permalink":"http://huishao.cc/2015/08/03/93Cocos2d-x-v3åæ ‡ä½“ç³»/","excerpt":"","text":"Cocos2d-xåæ ‡ä½“ç³»cocos2då¼•æ“æ˜¯ä¸€æ¬¾éå¸¸ä¼˜ç§€çš„æ‰©å¹³å°çš„æ¸¸æˆå¼€å‘å¼•æ“ï¼Œåœ¨appleæ¸¸æˆæ¦œä¸Šï¼Œæœ‰å¾ˆå¤šæ’åé å‰çš„æ¸¸æˆéƒ½æ˜¯ç”±ä»–åˆ›é€ å‡ºæ¥çš„ï¼Œä»–ä¹Ÿæœ‰ä¸€å¥—ååˆ†æ–¹ä¾¿çš„åæ ‡ä½“ç³»ã€‚ ä¸€ã€UIåæ ‡ä½“ç³»UIåæ ‡ä½“ç³»ç›¸å¯¹äºç§»åŠ¨å¼€å‘äººå‘˜æ¥è¯´å†ç†Ÿæ‚‰ä¸è¿‡äº†ï¼Œåœ¨iOSç³»ç»Ÿä¸­ï¼Œå®ƒå°±æ˜¯frameä½“ç³»ï¼Œå³åæ ‡(0,0)ç‚¹ä½äºå±å¹•çš„å·¦ä¸Šè§’ï¼Œå‘å³xå¢å¤§ï¼Œå‘ä¸‹yå¢å¤§ã€‚ äºŒã€OpenGLåæ ‡ä½“ç³»OpenGLåæ ‡ç³»æ˜¯cocos2dä¸­ä½¿ç”¨çš„åæ ‡ç³»ï¼Œå®ƒæ›´æ¥è¿‘äºæ•°å­¦ä¸Šçš„åæ ‡ç³»ï¼Œå³(0,0)ç‚¹ä½äºå±å¹•çš„å·¦ä¸‹è§’ï¼Œå¾€å·¦xå¢å¤§ï¼Œå¾€ä¸Šyå¢å¤§ã€‚è¿™å¥—åæ ‡ç³»ç»Ÿä¹Ÿæ›´ç¬¦åˆç‰©ç†ä¸–ç•Œçš„é€»è¾‘ï¼Œä¾¿äºæ¸¸æˆçš„å¼€å‘ã€‚å½“ç„¶ï¼Œè¿™å¹¶ä¸æ˜¯è¯´cocos2dä¸­æ‰€æœ‰çš„åæ ‡éƒ½æ˜¯é‡‡ç”¨è¿™ä¸ªä½“ç³»æ ‡å‡†çš„ï¼Œåœ¨æ‰‹æŒ‡ç‚¹å‡»äº‹ä»¶å±‚ï¼Œæ¥æ”¶åˆ°ç‚¹å‡»åæ ‡ç‚¹çš„åæ ‡å°±æ˜¯é‡‡ç”¨UIåæ ‡ç³»è¡¨ç¤ºçš„ã€‚ ä¸‰ã€ä¸–ç•Œåæ ‡ç³»ç®€å•çš„ç†è§£ï¼Œä¸–ç•Œåæ ‡ç³»å°±æ˜¯ç»å¯¹åæ ‡ç³»ï¼Œåœ¨cocos2dä¸­ï¼Œç²¾çµçš„åæ ‡æ˜¯ç›¸å¯¹äºå…¶çˆ¶è§†å›¾è€Œè¨€çš„ï¼Œæ˜¯ç›¸å¯¹çš„åæ ‡ï¼Œä¸–ç•Œåæ ‡åˆ™æ˜¯ç»Ÿä¸€ç»å¯¹çš„åæ ‡ï¼Œåœ¨é¡¹ç›®ä¸­æ˜¯å›ºå®šçš„ã€‚ å››ã€ç›¸å¯¹åæ ‡ç³»æœ€å¸¸ç”¨çš„åæ ‡ä½“ç³»ï¼Œä»»ä½•ç±»è®¾ç½®çš„åæ ‡éƒ½æ˜¯ç›¸å¯¹äºå…¶çˆ¶è§†å›¾åŸç‚¹çš„åæ ‡ã€‚ äº”ã€åæ ‡ç³»çš„è½¬æ¢ç”±äºUIåæ ‡ç³»ä¸OpenGLåæ ‡ç³»çš„å·®å¼‚ï¼Œåœ¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬æœ‰æ—¶éœ€è¦å…¶ä¸¤ä¸ªæ ‡å‡†çš„ç›¸äº’è½¬åŒ–ï¼Œcocos2dä¸­ä¹Ÿæœªæˆ‘ä»¬æä¾›äº†ç›¸åº”çš„æ–¹æ³•ï¼š Vec2 Director::convertToGL(const Vec2&amp; uiPoint); è¿™ä¸ªæ–¹æ³•å°†UIåæ ‡ç³»è½¬æ¢ä¸ºOpenGLåæ ‡ç³»ã€‚ Vec2 Director::convertToUI(const Vec2&amp; glPoint); è¿™ä¸ªæ–¹æ³•å°†OpenGLåæ ‡ç³»è½¬æ¢ä¸ºUIåæ ‡ç³»ã€‚ Vec2 Node::convertToWorldSpace(const Vec2&amp; nodePoint) const; è¿™ä¸ªæ–¹æ³•å°†ç‰©ä½“çš„ç›¸å¯¹åæ ‡ Vec2 Node::convertToNodeSpace(const Vec2&amp; worldPoint) const; è¿™ä¸ªæ–¹æ³•å°†ä¸–ç•Œåæ ‡è½¬åŒ–ä¸ºæŸä¸€èŠ‚ç‚¹çš„ç›¸å¯¹åæ ‡ã€‚ è¿˜æœ‰ä¸¤ä¸ªè½¬åŒ–çš„æ–¹æ³•ä¸ä¸Šé¢ç±»ä¼¼ï¼Œåªæœ‰ä¸€ç‚¹ä¸åŒï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•å‚ç…§çš„åŸç‚¹ä¸æ˜¯ç³»ç»Ÿé»˜è®¤çš„ï¼Œè€Œæ˜¯æˆ‘ä»¬è®¾ç½®çš„èŠ‚ç‚¹çš„é”šç‚¹ï¼š Vec2 Node::convertToNodeSpaceAR(const Vec2&amp; worldPoint) const; Vec2 Node::convertToWorldSpaceAR(const Vec2&amp; nodePoint) const; å…­ã€é”šç‚¹é”šç‚¹çš„æ¦‚å¿µå¯ä»¥ç†è§£ä¸ºå‚ç…§ç‚¹ï¼Œå…¶è®¾ç½®èŒƒå›´ä¸º0-1ï¼Œç³»ç»Ÿé»˜è®¤çš„èŠ‚ç‚¹é”šç‚¹ä¸º(0,0)ã€‚åœ¨UIåæ ‡ç³»ä¸­ï¼Œ(0,0)ç‚¹å°±æ˜¯èŠ‚ç‚¹çš„å·¦ä¸Šè§’ï¼Œåœ¨OpenGLåæ ‡ç³»ä¸­ï¼Œ(0,0)ç‚¹å°±æ˜¯èŠ‚ç‚¹çš„å·¦ä¸‹è§’ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘å°†é”šç‚¹è®¾ç½®ä¸º(0.5,0.5),åˆ™åœ¨UIå’ŒOpenGLåæ ‡ç³»ä¸­ï¼Œ(0,0)ç‚¹éƒ½æ˜¯èŠ‚ç‚¹çš„ä¸­å¿ƒç‚¹ã€‚åˆå¦‚ï¼Œæˆ‘å°†é”šç‚¹è®¾ç½®ä¸º(1,1)ï¼Œåˆ™åœ¨UIåæ ‡ç³»ä¸­ï¼ŒåŸç‚¹ä¸ºå³ä¸‹è§’ï¼Œåœ¨OpenGLåæ ‡ç³»ä¸­ï¼ŒåŸç‚¹ä¸ºå³ä¸Šè§’ï¼Œé”šç‚¹çš„ç”¨å¤„å°±æ˜¯æ›´æ”¹å‚è€ƒç‚¹ï¼Œåœ¨å¦ä¸€ç§æƒ…å½¢ä¸‹ï¼Œé”šç‚¹å¯¹ç¨‹åºä¹Ÿä¼šäº§ç”Ÿå¾ˆå¤§çš„å½±å“ï¼Œå°±æ˜¯å½“æˆ‘ä»¬è®¾ç½®ä¸€ä¸ªèŠ‚ç‚¹æ—‹è½¬æˆ–è€…ç¼©æ”¾æ—¶ï¼ŒèŠ‚ç‚¹ä¼šä»¥é”šç‚¹ä½ç½®ä¸ºä¸­å¿ƒè¿›è¡Œæ—‹è½¬æˆ–ç¼©æ”¾ã€‚ cocos2dä¸­é€šè¿‡ä¸‹é¢æ–¹æ³•åˆ†åˆ«æ¥è®¾ç½®å’Œè·å–é”šç‚¹ï¼š void Sprite::setAnchorPoint(const Vec2&amp; anchor); è®¾ç½®é”šç‚¹ const Vec2&amp; Node::getAnchorPoint() const; è·å–é”šç‚¹ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"COCOS2D","slug":"COCOS2D","permalink":"http://huishao.cc/categories/COCOS2D/"}],"tags":[],"keywords":[{"name":"COCOS2D","slug":"COCOS2D","permalink":"http://huishao.cc/categories/COCOS2D/"}]},{"title":"iOS8æ–°ç‰¹æ€§æ‰©å±•(Extension)åº”ç”¨ä¹‹å››â€”â€”è‡ªå®šä¹‰é”®ç›˜æ§ä»¶","slug":"92iOS8æ–°ç‰¹æ€§æ‰©å±•(Extension)åº”ç”¨ä¹‹å››â€”â€”è‡ªå®šä¹‰é”®ç›˜æ§ä»¶","date":"2015-07-30T16:00:00.000Z","updated":"2021-06-30T11:23:25.803Z","comments":true,"path":"2015/07/31/92iOS8æ–°ç‰¹æ€§æ‰©å±•(Extension)åº”ç”¨ä¹‹å››â€”â€”è‡ªå®šä¹‰é”®ç›˜æ§ä»¶/","link":"","permalink":"http://huishao.cc/2015/07/31/92iOS8æ–°ç‰¹æ€§æ‰©å±•(Extension)åº”ç”¨ä¹‹å››â€”â€”è‡ªå®šä¹‰é”®ç›˜æ§ä»¶/","excerpt":"","text":"iOS8æ–°ç‰¹æ€§æ‰©å±•(Extension)åº”ç”¨ä¹‹å››â€”â€”è‡ªå®šä¹‰é”®ç›˜æ§ä»¶iOS8ç³»ç»Ÿçš„å¼€æ”¾ç¬¬ä¸‰æ–¹é”®ç›˜ï¼Œä½¿å¾—ç”¨æˆ·åœ¨è¾“å…¥æ³•çš„é€‰æ‹©ä¸Šæ›´åŠ è‡ªä¸»çµæ´»ï¼Œä¹Ÿæ›´åŠ è´´è¿‘ä¸åŒè¯­è¨€çš„è¾“å…¥é£æ ¼ã€‚è¿™ç¯‡åšå®¢ï¼Œå°†ä»‹ç»å¦‚ä½•å¼€å‘ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„é”®ç›˜æ§ä»¶ã€‚ ä¸€ã€äº†è§£UIInputViewControllerç±»UIInputViewControlleræ˜¯ç³»ç»Ÿæ‰©å±•æ”¯æŒé”®ç›˜æ‰©å±•çš„ä¸€ä¸ªç±»ï¼Œé€šè¿‡è¿™ä¸ªç±»ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰ä¸€æ¬¾æˆ‘ä»¬è‡ªå·±çš„é”®ç›˜æä¾›ç»™ç³»ç»Ÿä½¿ç”¨ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹è¿™ä¸ªç±»ä¸­çš„ä¸€äº›å±æ€§å’Œæ–¹æ³•ï¼š @property (nonatomic, retain) UIInputView *inputView; é”®ç›˜çš„è¾“å…¥è§†å›¾ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰è¿™ä¸ªè§†å›¾ã€‚ @property (nonatomic, readonly) NSObject *textDocumentProxy; å®ç°äº†UITextDocumentProxyåè®®çš„ä¸€ä¸ªå¯¹è±¡ï¼Œåé¢ä¼šä»‹ç»è¿™ä¸ªåè®®ã€‚ @property (nonatomic, copy) NSString *primaryLanguage; ç³»ç»Ÿä¸ºæˆ‘ä»¬å‡†å¤‡äº†ä¸€äº›æœ¬åœ°åŒ–çš„è¯­è¨€å­—ç¬¦ä¸² - (void)dismissKeyboard; æ”¶é”®ç›˜çš„æ–¹æ³• - (void)advanceToNextInputMode; åˆ‡æ¢åˆ°ä¸‹ä¸€è¾“å…¥æ³•çš„æ–¹æ³• UITextDocumentProxyåè®®å†…å®¹å¦‚ä¸‹ï¼š 123456789@protocol UITextDocumentProxy &lt;UIKeyInput&gt;//è¾“å…¥çš„ä¸Šä¸€ä¸ªå­—ç¬¦@property (nonatomic, readonly) NSString *documentContextBeforeInput;//å³å°†è¾“å…¥çš„ä¸€ä¸ªå­—ç¬¦@property (nonatomic, readonly) NSString *documentContextAfterInput;//å°†è¾“å…¥çš„å­—ç¬¦ç§»åŠ¨åˆ°æŸä¸€ä½ç½®- (void)adjustTextPositionByCharacterOffset:(NSInteger)offset;@end è€ŒUITextDocumentProxyè¿™ä¸ªåè®®ç»§æ‰¿ä¸UIKeyInputåè®®ï¼ŒUIKeyInputåè®®ä¸­æä¾›çš„ä¸¤ä¸ªæ–¹æ³•ç”¨äºè¾“å…¥å­—ç¬¦å’Œåˆ é™¤å­—ç¬¦ï¼š - (void)insertText:(NSString *)text;- (void)deleteBackward; äºŒã€åˆ›å»ºä¸€æ¬¾æœ€ç®€å•çš„æ•°å­—è¾“å…¥é”®ç›˜åˆ›å»ºä¸€ä¸ªé¡¹ç›®ï¼Œä½œä¸ºå®¿ä¸»APPï¼Œæ¥ç€æˆ‘ä»¬File-&gt;new-&gt;target-&gt;customKeyBoard: ç³»ç»Ÿè¦æ±‚æˆ‘ä»¬å¯¹é”®ç›˜çš„å¸ƒå±€è¦ä½¿ç”¨autolayoutï¼Œå¹¶ä¸”åªå¯ä»¥é‡‡ç”¨ä»£ç å¸ƒå±€çš„æ–¹å¼ï¼Œæˆ‘ä»¬è¿™é‡Œä¸ºäº†ç®€å•æ¼”ç¤ºï¼Œå°†åæ ‡å†™æ­»ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344- (void)viewDidLoad &#123; [super viewDidLoad]; // è®¾ç½®æ•°å­—é”®ç›˜çš„UI //æ•°å­—æŒ‰é’®å¸ƒå±€ for (int i=0; i&lt;10; i++) &#123; UIButton * btn = [UIButton buttonWithType:UIButtonTypeSystem]; btn.frame=CGRectMake(20+45*(i%3), 20+45*(i/3), 40, 40); btn.backgroundColor=[UIColor greenColor]; [btn setTitle:[NSString stringWithFormat:@&quot;%d&quot;,i] forState:UIControlStateNormal]; btn.tag=101+i; [btn addTarget:self action:@selector(click:) forControlEvents:UIControlEventTouchUpInside]; [self.view addSubview:btn]; &#125; //åˆ›å»ºåˆ‡æ¢é”®ç›˜æŒ‰é’® UIButton * change = [UIButton buttonWithType:UIButtonTypeSystem]; change.frame=CGRectMake(200,20, 80, 40) ; NSLog(@&quot;%f,%f&quot;,self.view.frame.size.height,self.view.frame.size.width); [change setBackgroundColor:[UIColor blueColor]]; [change setTitle:@&quot;åˆ‡æ¢é”®ç›˜&quot; forState:UIControlStateNormal]; [change addTarget:self action:@selector(change) forControlEvents:UIControlEventTouchUpInside]; [self.view addSubview:change]; //åˆ›å»ºåˆ é™¤æŒ‰é’® UIButton * delete = [UIButton buttonWithType:UIButtonTypeSystem]; delete.frame=CGRectMake(200, 120, 80, 40); [delete setTitle:@&quot;delete&quot; forState:UIControlStateNormal]; [delete setBackgroundColor:[UIColor redColor]]; [delete addTarget:self action:@selector(delete) forControlEvents:UIControlEventTouchUpInside]; [self.view addSubview:delete];&#125;//åˆ é™¤æ–¹æ³•-(void)delete&#123; if (self.textDocumentProxy.documentContextBeforeInput) &#123; [self.textDocumentProxy deleteBackward]; &#125;&#125;//åˆ‡æ¢é”®ç›˜æ–¹æ³•-(void)change&#123; [self advanceToNextInputMode];&#125;//ç‚¹å‡»æ•°å­—æŒ‰é’® å°†ç›¸åº”æ•°å­—è¾“å…¥-(void)click:(UIButton *)btn&#123; [self.textDocumentProxy insertText:[NSString stringWithFormat:@&quot;%ld&quot;,btn.tag-101]];&#125; è¿è¡Œåï¼Œåœ¨ä½¿ç”¨ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆåŠ å…¥è¿™ä¸ªé”®ç›˜ï¼šåœ¨æ¨¡æ‹Ÿå™¨ç³»ç»Ÿè®¾ç½®ä¸­general-&gt;keyboard-&gt;keyboards-&gt;addNowKeyboard é€‰ä¸­æˆ‘ä»¬è‡ªå®šä¹‰çš„é”®ç›˜ï¼Œä¹‹åè¿è¡Œæµè§ˆå™¨ï¼Œåˆ‡æ¢åˆ°æˆ‘ä»¬çš„é”®ç›˜ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOS8æ–°ç‰¹æ€§æ‰©å±•(Extension)åº”ç”¨ä¹‹ä¸‰â€”â€”ç…§ç‰‡ç¼–è¾‘æ’ä»¶","slug":"91iOS8æ–°ç‰¹æ€§æ‰©å±•(Extension)åº”ç”¨ä¹‹ä¸‰â€”â€”ç…§ç‰‡ç¼–è¾‘æ’ä»¶","date":"2015-07-29T16:00:00.000Z","updated":"2021-06-30T11:20:59.694Z","comments":true,"path":"2015/07/30/91iOS8æ–°ç‰¹æ€§æ‰©å±•(Extension)åº”ç”¨ä¹‹ä¸‰â€”â€”ç…§ç‰‡ç¼–è¾‘æ’ä»¶/","link":"","permalink":"http://huishao.cc/2015/07/30/91iOS8æ–°ç‰¹æ€§æ‰©å±•(Extension)åº”ç”¨ä¹‹ä¸‰â€”â€”ç…§ç‰‡ç¼–è¾‘æ’ä»¶/","excerpt":"","text":"iOS8æ–°ç‰¹æ€§æ‰©å±•(Extension)åº”ç”¨ä¹‹ä¸‰â€”â€”ç…§ç‰‡ç¼–è¾‘æ’ä»¶ é€šè¿‡å‰å‡ ç¯‡åšå®¢çš„ä»‹ç»ï¼Œæˆ‘ä»¬äº†è§£åˆ°æ‰©å±•ç»™appæä¾›çš„æ›´åŠ å¼ºå¤§çš„äº¤äº’èƒ½åŠ›ï¼Œè¿™ç§å¼ºå¤§çš„äº¤äº’èƒ½åŠ›å¦ä¸€æ–¹é¢ä½“ç°åœ¨ç…§ç‰‡ç¼–è¾‘æ’ä»¶çš„åº”ç”¨ã€‚ å’Œé€šå¸¸ä¸€æ ·ï¼Œæˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªå·¥ç¨‹ï¼Œç„¶åæ–°å»ºä¸€ä¸ªTargetï¼Œé€‰æ‹©photo editingï¼š ä»æ¨¡æ¿ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç³»ç»Ÿä¸ºæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªcontrollerï¼Œè¿™ä¸ªcontrollerå°±æ˜¯ç”¨äºå¤„ç†ç…§ç‰‡çš„controllerï¼Œå…¶ä¸­æ–¹æ³•å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930- (BOOL)canHandleAdjustmentData:(PHAdjustmentData *)adjustmentData &#123; // Inspect the adjustmentData to determine whether your extension can work with past edits. // (Typically, you use its formatIdentifier and formatVersion properties to do this.) return NO;&#125;//è¿™ä¸ªå‡½æ•°ç”¨äºä»ç³»ç»Ÿç›¸å†Œè·å–åˆ°é€‰ä¸­çš„ç…§ç‰‡ï¼ŒcontentEditingInputå¯¹è±¡ä¸­å­˜æœ‰å“åº”çš„æ•°æ®ç±»å‹å’Œimageå¯¹è±¡- (void)startContentEditingWithInput:(PHContentEditingInput *)contentEditingInput placeholderImage:(UIImage *)placeholderImage &#123; //æˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œå°†å–åˆ°çš„æ•°æ®è¿›è¡Œå±•ç¤ºç­‰ç­‰ self.input = contentEditingInput;&#125;//ç»“æŸç¼–è¾‘ç…§ç‰‡æ—¶çš„æ–¹æ³•- (void)finishContentEditingWithCompletionHandler:(void (^)(PHContentEditingOutput *))completionHandler &#123; // Update UI to reflect that editing has finished and output is being rendered. // Render and provide output on a background queue. dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123; // Create editing output from the editing input. PHContentEditingOutput *output = [[PHContentEditingOutput alloc] initWithContentEditingInput:self.input]; //æˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œå°†æ–°çš„å›¾ç‰‡æ•°æ®å†™å…¥åˆ°è¾“å‡ºæµä¸­ // output.adjustmentData = &lt;#new adjustment data#&gt;; // NSData *renderedJPEGData = &lt;#output JPEG#&gt;; // [renderedJPEGData writeToURL:output.renderedContentURL atomically:YES]; // Call completion handler to commit edit to Photos. completionHandler(output); // Clean up temporary files, etc. &#125;);&#125; åœ¨å½“å‰æ‰©å±•æ‰§è¡Œç»“æŸç¼–è¾‘ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªç”±æ¸²æŸ“æˆ‘ä»¬å¾—åˆ°çš„å›¾ç‰‡ï¼Œä¾‹å¦‚æ·»åŠ ç›¸æ¡†ï¼Œæ–‡å­—ç­‰ç­‰ï¼Œè¾“å‡ºæ—¶å°†æ¸²æŸ“åçš„å›¾ç‰‡è¿›è¡Œè¾“å‡ºå³å¯ã€‚ è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªåœ°æ–¹éœ€è¦æˆ‘ä»¬æ³¨æ„ï¼Œæ­¤ç±»æ‰©å±•æœ‰ä¸€ä¸ªåŠŸèƒ½ï¼Œå¦‚æœæˆ‘ä»¬ä¸­é€”é€€å‡ºç¼–è¾‘ï¼Œç³»ç»Ÿä¼šä¸ºæˆ‘ä»¬ä¿å­˜æˆ‘ä»¬æ‰©å±•çš„å¤„ç†çŠ¶æ€ï¼Œä¸ºäº†åŒºåˆ†å¤šä¸ªç±»ä¼¼åŠŸèƒ½çš„æ‰©å±•ï¼Œåœ¨è¾“å‡ºæ•°æ®çš„å¯¹è±¡ä¸­æœ‰ä¸€ä¸ªPHAdjustmentDataç±»å‹çš„å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ä¸“é—¨ç”¨äºè´Ÿè´£ç‰ˆæœ¬çš„è®°å½•ï¼Œè¿™ä¸ªå¯¹è±¡ä¸­æœ‰å¦‚ä¸‹ä¸¤ä¸ªå±æ€§ç”¨äºåŒºåˆ†ç‰ˆæœ¬ï¼š @property (readonly, copy) NSString *formatIdentifier; @property (readonly, copy) NSString *formatVersion; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOS8æ–°ç‰¹æ€§æ‰©å±•(Extension)åº”ç”¨ä¹‹äºŒâ€”â€”åˆ†äº«æ’ä»¶","slug":"90iOS8æ–°ç‰¹æ€§æ‰©å±•(Extension)åº”ç”¨ä¹‹äºŒâ€”â€”åˆ†äº«æ’ä»¶","date":"2015-07-29T16:00:00.000Z","updated":"2021-06-30T11:17:41.233Z","comments":true,"path":"2015/07/30/90iOS8æ–°ç‰¹æ€§æ‰©å±•(Extension)åº”ç”¨ä¹‹äºŒâ€”â€”åˆ†äº«æ’ä»¶/","link":"","permalink":"http://huishao.cc/2015/07/30/90iOS8æ–°ç‰¹æ€§æ‰©å±•(Extension)åº”ç”¨ä¹‹äºŒâ€”â€”åˆ†äº«æ’ä»¶/","excerpt":"","text":"iOS8æ–°ç‰¹æ€§æ‰©å±•(Extension)åº”ç”¨ä¹‹äºŒâ€”â€”åˆ†äº«æ’ä»¶ åœ¨ä¸Šä¸€ç¯‡åšå®¢ä¸­ï¼Œä»‹ç»äº†iOS8æ–°ç‰¹æ€§æ‰©å±•åŠŸèƒ½ä¹‹ä¸€çš„TodayåŠŸèƒ½ï¼š[http://my.oschina.net/u/2340880/blog/485533](http://my.oschina.net/u/2340880/blog/485533)ï¼Œè¿™é‡Œæˆ‘ä»¬å†ä»‹ç»ä¸€ä¸‹åˆ†äº«çš„æ‰©å±•åŠŸèƒ½ã€‚ åœ¨iOS8ä¹‹å‰ï¼Œé™¤äº†ä¸€äº›ä¸»æµçš„ç¤¾äº¤å¹³å°ï¼Œä¾‹å¦‚è‹¹æœæ”¯æŒå†…å®¹åˆ†äº«å¤–ï¼Œå…¶ä»–å¼€å‘è€…çš„åº”ç”¨è‹¥è¦åŠ å…¥åˆ†äº«çš„åŠŸèƒ½ï¼Œå°†ä¼šååˆ†çš„å¤æ‚ã€‚åœ¨iOS8çš„æ–°ç‰¹æ€§ä¸­ï¼Œappleä¸ºæˆ‘ä»¬å‡†å¤‡äº†è¿™æ ·çš„æ‰©å±•åŠŸèƒ½ã€‚ é¦–å…ˆåˆ›å»ºå·¥ç¨‹ï¼Œåœ¨æˆ‘ä»¬çš„å·¥ç¨‹ä¸­æ–°å»ºä¸€ä¸ªTargetï¼š ä¹‹åï¼Œæ¨¡æ¿ä¸­ä¼šä¸ºæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªcontrollerç±»ï¼Œè¿™ä¸ªcontrollerç”¨äºæ§åˆ¶æˆ‘ä»¬çš„åˆ†äº«æ’ä»¶ï¼Œé‡Œé¢å†…å®¹ï¼š 1234567891011121314151617181920@implementation ShareViewController//è¿™ä¸ªå‡½æ•°ç”¨äºåˆ¤æ–­åˆ†äº«å†…å®¹çš„å¯ç”¨æ€§ï¼Œæˆ‘ä»¬åœ¨å…¶ä¸­è·å–åˆ†äº«çš„å†…å®¹è¿›è¡Œæ£€æŸ¥- (BOOL)isContentValid &#123; // Do validation of contentText and/or NSExtensionContext attachments here return YES;&#125;//ç‚¹å‡»postæŒ‰é’®åå‡ºå‘çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œå°†åˆ†äº«çš„å†…å®¹è¿›è¡Œä¸Šä¼ ç­‰æ“ä½œ- (void)didSelectPost &#123; // This is called after the user selects Post. Do the upload of contentText and/or NSExtensionContext attachments. // Inform the host that we&apos;re done, so it un-blocks its UI. Note: Alternatively you could call super&apos;s -didSelectPost, which will similarly complete the extension context. [self.extensionContext completeRequestReturningItems:@[] completionHandler:nil];&#125;//è¿™é‡Œç”¨äºè®¾ç½®åˆ†äº«æ’ä»¶çš„é™„ä»¶æŒ‰é’®- (NSArray *)configurationItems &#123; // To add configuration options via table cells at the bottom of the sheet, return an array of SLComposeSheetConfigurationItem here. return @[];&#125;@end é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€äº›å¸¸ç”¨çš„å±æ€§ï¼š - (void)presentationAnimationDidFinish; å¼¹å‡ºè§†å›¾åŠ¨ç”»ç»“æŸåæ‰§è¡Œçš„æ–¹æ³• @property (readonly, NS_NONATOMIC_IOSONLY) NSString *contentText; åˆ†äº«çš„å†…å®¹æ–‡å­— @property (copy, NS_NONATOMIC_IOSONLY) NSString *placeholder; é»˜è®¤æ˜¾ç¤ºçš„æç¤ºæ–‡å­— - (void)didSelectCancel; å–æ¶ˆæŒ‰é’®æ‰§è¡Œçš„æ–¹æ³• æˆ‘ä»¬åœ¨ä»£ç ä¸­å¦‚ä¸‹æ·»åŠ åè¿è¡Œï¼š 1234567891011@implementation ShareViewController-(NSString *)placeholder&#123; return @&quot;æç¤ºæ–‡å­—&quot;;&#125;- (NSArray *)configurationItems &#123; // To add configuration options via table cells at the bottom of the sheet, return an array of SLComposeSheetConfigurationItem here. SLComposeSheetConfigurationItem * item =[[SLComposeSheetConfigurationItem alloc]init]; item.title=@&quot;åœ°ç‚¹&quot;; item.value=@&quot;åŸé—¨&quot;; return @[item];&#125; æˆ‘ä»¬ç”¨ç³»ç»Ÿçš„ç›¸å†Œåšæµ‹è¯•ï¼Œç‚¹å‡»ç›¸ç‰‡çš„åˆ†äº«æŒ‰é’®ï¼š ç‚¹å‡»MOREï¼Œæ·»åŠ æˆ‘ä»¬çš„æ‰©å±•æ’ä»¶ã€‚ è¿™æ—¶åˆ†äº«æ ä¸­å¤šäº†ä¸€ä¸ªæˆ‘ä»¬çš„æ’ä»¶ï¼Œç‚¹å‡»æ•ˆæœå¦‚ä¸‹ï¼š è¿˜æœ‰ä¸€ç‚¹æˆ‘ä»¬éœ€è¦äº†è§£ï¼Œåœ¨è¿™ä¸ªæ‰©å±•çš„plistæ–‡ä»¶ä¸­ï¼Œæœ‰è¿™æ ·ä¸€ä¸ªé”®ï¼šNSExtensionAttributesï¼Œé‡Œé¢æœ‰ä¸€ä¸ªNSExtensionActivationRuleçš„å­—å…¸ï¼Œå…¶ä¸­å¯ä»¥è®¾ç½®ä¸€äº›é”®å€¼ï¼Œå¯¹åˆ†äº«æ’ä»¶çš„å±æ€§è¿›è¡Œæ§åˆ¶ã€‚ è¿™äº›é”®çš„å†™æ³•åœ¨å®˜æ–¹æ–‡æ¡£ä¸­çš„ä»‹ç»å¦‚ä¸‹ï¼š è¿™äº›é”®çš„æ„ä¹‰ï¼Œæ–‡æ¡£ä¸­ä»‹ç»çš„å¾ˆæ¸…æ¥šï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œè®¾ç½®ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOS8æ–°ç‰¹æ€§æ‰©å±•(Extension)åº”ç”¨ä¹‹ä¸€â€”â€”Todayæ‰©å±•","slug":"89iOS8æ–°ç‰¹æ€§æ‰©å±•(Extension)åº”ç”¨ä¹‹ä¸€â€”â€”Todayæ‰©å±•","date":"2015-07-29T16:00:00.000Z","updated":"2021-06-30T11:16:34.998Z","comments":true,"path":"2015/07/30/89iOS8æ–°ç‰¹æ€§æ‰©å±•(Extension)åº”ç”¨ä¹‹ä¸€â€”â€”Todayæ‰©å±•/","link":"","permalink":"http://huishao.cc/2015/07/30/89iOS8æ–°ç‰¹æ€§æ‰©å±•(Extension)åº”ç”¨ä¹‹ä¸€â€”â€”Todayæ‰©å±•/","excerpt":"","text":"iOS8æ–°ç‰¹æ€§æ‰©å±•(Extension)åº”ç”¨ä¹‹ä¸€â€”â€”Todayæ‰©å±•ä¸€ã€ç†è§£æ‰©å±•1ã€ç®€ä»‹åŸºäºiOSç³»ç»Ÿçš„å®‰å…¨æ€§è€ƒè™‘ï¼Œå…¶åº”ç”¨çš„æ•°æ®å­˜å‚¨æ˜¯é€šè¿‡æ²™ç›’æ¨¡å¼è¿›è¡Œçš„ï¼Œè¦å®ç°åº”ç”¨ä¹‹é—´çš„æ•°æ®å…±äº«ååˆ†å›°éš¾ï¼ŒåŠŸèƒ½å…±äº«å°±æ›´åŠ æ£˜æ‰‹ã€‚åœ¨iOS8ç³»ç»Ÿä¸­ï¼Œappleä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªé©å‘½æ€§çš„åŠŸèƒ½ï¼šæ‰©å±•ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰©å±•æ¥ä½¿appé—´æ•°æ®ç”šè‡³åŠŸèƒ½è¿›è¡Œå…±äº«ã€‚ 2ã€å‡ ç§æ‰©å±•æ¨¡å¼ï¼ˆ1ï¼‰ä»Šæ—¥è§†å›¾æ‰©å±•:todayè¿™ä¸ªæ‰©å±•ä¹Ÿè¢«å«åš widgetã€‚è¯¥æ‰©å±•å¯ä»¥å°†ä»Šæ—¥å‘ç”Ÿçš„ç®€çŸ­æ¶ˆæ¯æ”¾åˆ°æ¶ˆæ¯ä¸­å¿ƒçš„ã€Œä»Šæ—¥ã€è§†å›¾é‡Œã€‚è¿™ä¸ªåŠŸèƒ½ç±»ä¼¼äºå®‰å“ç³»ç»Ÿä¸­çš„å°æ§ä»¶ï¼Œåªæ˜¯å®‰å“çš„å¯ä»¥ç›´æ¥æ”¾åœ¨æ¡Œé¢ä¸Šï¼Œæ›´åŠ è‡ªç”±ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š ï¼ˆ2ï¼‰åˆ†äº«åŠŸèƒ½æ‰©å±•è¯¥æ‰©å±•å…è®¸åº”ç”¨å‘åœ¨çº¿æœåŠ¡ä¸Šä¼ ç…§ç‰‡ã€é“¾æ¥æˆ–è€…å…¶ä»–æ–‡ä»¶ã€‚åœ¨ä»¥å‰ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬è‹¥è¦å®ç°åˆ†äº«åŠŸèƒ½ï¼Œå¿…é¡»è¿›è¡Œå¤æ‚çš„æ“ä½œã€‚ ï¼ˆ3ï¼‰ä¸ªæ€§æ“ä½œé€šè¿‡è¿™ä¸ªåŠŸèƒ½ï¼Œå¯ä»¥å®ç°ä¸¤ä¸ªAPPä¸­å…±äº«ä¸€äº›å†…å®¹ï¼Œä¾‹å¦‚ç¼–è¾‘æ–‡å­—ä¸­çš„å›¾ç‰‡ï¼Œç¿»è¯‘ç½‘é¡µä¸­çš„æ–‡å­—ã€‚ ï¼ˆ4ï¼‰ç…§ç‰‡æ“ä½œè¿™ä¸ªç±»å‹çš„æ‰©å±•å¯ä»¥å…è®¸æˆ‘ä»¬åœ¨iponeç›¸æœºä¸­æ‹æ‘„çš„ç…§ç‰‡ä½¿ç”¨å…¶ä»–å›¾ç‰‡ç¼–è¾‘è½¯ä»¶è¿›è¡Œç¼–è¾‘ã€‚ ï¼ˆ5ï¼‰æ–‡ä»¶åˆ†äº«è¯¥æ‰©å±•å¯ä»¥è®©è½¯ä»¶å°†æ–‡ä»¶ä¿å­˜åœ¨å„ç§äº‘å­˜å‚¨æœåŠ¡å•†ã€‚ ï¼ˆ6ï¼‰è‡ªå®šä¹‰é”®ç›˜å…è®¸ç”¨æˆ·ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„é”®ç›˜è¾“å…¥æ³•ã€‚ äºŒã€ToDayæ‰©å±•çš„åˆ›å»ºæ‰©å±•æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ„æˆï¼Œå’Œå…¶æœ‰å…³çš„ä¸¤ä¸ªæ¦‚å¿µæ˜¯å®¿ä¸»APPå’Œä¸»æœºAPPï¼Œå®¿ä¸»APPæ˜¯æ‰©å±•å­˜æ”¾çš„åœ°æ–¹ï¼Œä¸æ‰©å±•å¯ä»¥å®ç°èµ„æºå…±äº«ï¼Œä¸»æœºAPPæ˜¯æ‰©å±•è¿è¡Œçš„ç¨‹åºï¼Œä¾‹å¦‚ToDayæ‰©å±•æœ‰æŠ½å±‰ä¸­çš„Todayåº”ç”¨è¿›è¡Œè¿è¡Œã€‚è¦åˆ›å»ºä¸€ä¸ªToDayæ‰©å±•ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªå®¿ä¸»APPï¼š æ–°å»ºä¸€ä¸ªå·¥ç¨‹ï¼š é€‰æ‹©xcodeå·¥å…·æ ä¸­çš„File-&gt;new-&gt;target åœ¨Application Extensionä¸­æœ‰ä¸Šé¢æåˆ°çš„6ä¸­æ‰©å±•ï¼Œæˆ‘ä»¬é€‰æ‹©Todayã€‚ è¿™æ˜¯æˆ‘ä»¬çš„é¡¹ç›®ä¸­ä¼šå¤šäº†ä¸€ä¸ªæ‰©å±•çš„æ–‡ä»¶å¤¹ï¼š è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­æœ‰ä¸€ä¸ªViewControllerï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é‡Œé¢è¿›è¡Œå¸ƒå±€ï¼Œè¿˜æœ‰ä¸€ä¸ªplistæ–‡ä»¶ï¼Œå¯æ˜¯é…ç½®æ‰©å±•çš„ä¸€äº›å±æ€§ã€‚ æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæŒ‰é’®ï¼š 123 UIButton * btn = [[UIButton alloc]initWithFrame:CGRectMake(0, 0, 100, 30)]; [btn setTitle:@&quot;231&quot; forState:UIControlStateNormal]; [self.view addSubview:btn]; ä¹‹åæˆ‘ä»¬è¿è¡Œè¿™ä¸ªæ‰©å±•ï¼š xcodeä¼šè®©æˆ‘ä»¬é€‰æ‹©è¿è¡Œæ‰©å±•çš„ä¸»æœºç¨‹åºï¼Œå› ä¸ºè¿™æ˜¯ä¸€ä¸ªtodayç±»å‹çš„æ‰©å±•ï¼Œæˆ‘ä»¬é€‰æ‹©Todayï¼š è¿è¡Œåï¼Œåœ¨ç³»ç»Ÿçš„é€šçŸ¥æŠ½å±‰ä¸­ï¼Œå°±ä¼šå‡ºç°æˆ‘ä»¬çš„è¿™ä¸ªæ‰©å±•ï¼š åŒæ ·ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºtableViewï¼ŒimageViewä»¥åŠå…¶ä»–å¤æ‚çš„è§†å›¾æ•ˆæœï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç¼–å†™å¾ˆå¤šé€»è¾‘åŠŸèƒ½ï¼Œè·³è½¬APPç­‰ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSåŠ¨ç”»å¼€å‘ä¹‹äº”â€”â€”ç‚«é…·çš„ç²’å­æ•ˆæœ","slug":"88iOSåŠ¨ç”»å¼€å‘ä¹‹äº”â€”â€”ç‚«é…·çš„ç²’å­æ•ˆæœ","date":"2015-07-28T16:00:00.000Z","updated":"2021-06-30T11:15:00.406Z","comments":true,"path":"2015/07/29/88iOSåŠ¨ç”»å¼€å‘ä¹‹äº”â€”â€”ç‚«é…·çš„ç²’å­æ•ˆæœ/","link":"","permalink":"http://huishao.cc/2015/07/29/88iOSåŠ¨ç”»å¼€å‘ä¹‹äº”â€”â€”ç‚«é…·çš„ç²’å­æ•ˆæœ/","excerpt":"","text":"iOSåŠ¨ç”»å¼€å‘ä¹‹äº”â€”â€”ç‚«é…·çš„ç²’å­æ•ˆæœåœ¨ä¸Šå‡ ç¯‡åšå®¢ä¸­ï¼Œæˆ‘ä»¬å¯¹UIViewå±‚çš„åŠ¨ç”»ä»¥åŠiOSçš„æ ¸å¿ƒåŠ¨ç”»åšäº†ä»‹ç»ï¼ŒåŸºæœ¬å·²ç»å¯ä»¥æ»¡è¶³iOSåº”ç”¨é¡¹ç›®ä¸­æ‰€æœ‰çš„åŠ¨ç”»éœ€æ±‚ï¼Œå¦‚æœä½ è§‰å¾—é‚£äº›éƒ½è¿˜ä¸å¤Ÿç‚«é…·ï¼Œäº¦æˆ–æ˜¯ä½ çµå…‰ä¸€ç°ï¼Œæƒ³ç”¨UIKitæ¡†æ¶å†™å‡ºä¸€æ¬¾ç‚«é…·çš„ä¼‘é—²æ¸¸æˆï¼Œé‚£ä¸ªæœ‰ä¸€ä¸ªä¸œè¥¿å¯ä»¥å¸®åˆ°ä½ ï¼šiOSçš„ç²’å­æ•ˆæœå¼•æ“ã€‚ ä¸€ã€ç²’å­å‘å°„å™¨iOSä¸­çš„ç²’å­æ•ˆæœæœ‰ä¸¤éƒ¨åˆ†ç»„æˆï¼Œä¸€éƒ¨åˆ†ä¸ºå‘å°„å™¨ï¼Œè®¾ç½®ä¾‹å­å‘å°„çš„å®è§‚å±æ€§ï¼Œå¦ä¸€éƒ¨åˆ†æ˜¯ç²’å­å•å…ƒï¼Œç”¨äºè®¾ç½®ç›¸åº”çš„ç²’å­å±æ€§ã€‚ç²’å­å‘å°„å™¨æ˜¯åŸºäºLayerå±‚ï¼Œæ²¡é”™ï¼Œåˆæ˜¯Layerï¼Œä»–çš„å…¨åå«åšï¼š CAEmitterLayerã€‚å…¶ä¸­å¸¸ç”¨çš„å±æ€§å¦‚ä¸‹ï¼š @property(copy) NSArray *emitterCells; ç²’å­å•å…ƒæ•°ç»„ï¼Œä¾‹å¦‚ä½ åœ¨ç»˜åˆ¶ç«ç„°çš„æ•ˆæœæ—¶ï¼Œä½ å¯ä»¥åˆ›å»ºä¸¤ä¸ªå•å…ƒï¼Œä¸€ä¸ªå•å…ƒè´Ÿè´£çƒŸé›¾ï¼Œä¸€ä¸ªå•å…ƒè´Ÿè´£ç«è‹—ã€‚ @property float birthRate; ç²’å­çš„åˆ›å»ºé€Ÿç‡ï¼Œé»˜è®¤ä¸º1/sã€‚ @property float lifetime; ç²’å­çš„å­˜æ´»æ—¶é—´ã€‚é»˜è®¤ä¸º1Sã€‚ @property CGPoint emitterPosition; å‘å°„å™¨åœ¨xyå¹³é¢çš„ä¸­å¿ƒä½ç½® @property CGFloat emitterZPosition; å‘å°„å™¨åœ¨Zå¹³é¢çš„ä½ç½® @property CGSize emitterSize; å‘å°„å™¨çš„å°ºå¯¸å¤§å° @property CGFloat emitterDepth; å‘å°„å™¨çš„æ·±åº¦ï¼Œåœ¨æŸäº›æ¨¡å¼ä¸‹ä¼šäº§ç”Ÿç«‹ä½“æ•ˆæœ @property(copy) NSString *emitterShape; å‘å°„å™¨çš„å½¢çŠ¶ï¼Œè¿™ä¸ªå‚æ•°çš„å‡ ä¸ªç³»ç»Ÿå­—ç¬¦ä¸²å¦‚ä¸‹ï¼š 123456789101112CA_EXTERN NSString * const kCAEmitterLayerPoint __OSX_AVAILABLE_STARTING (__MAC_10_6, __IPHONE_5_0); //ç‚¹çš„å½¢çŠ¶ï¼Œç²’å­ä»ä¸€ä¸ªç‚¹å‘å‡ºCA_EXTERN NSString * const kCAEmitterLayerLine __OSX_AVAILABLE_STARTING (__MAC_10_6, __IPHONE_5_0);//çº¿çš„å½¢çŠ¶ï¼Œç²’å­ä»ä¸€æ¡çº¿å‘å‡ºCA_EXTERN NSString * const kCAEmitterLayerRectangle __OSX_AVAILABLE_STARTING (__MAC_10_6, __IPHONE_5_0);//çŸ©å½¢å½¢çŠ¶ï¼Œç²’å­ä»ä¸€ä¸ªçŸ©å½¢ä¸­å‘å‡ºCA_EXTERN NSString * const kCAEmitterLayerCuboid __OSX_AVAILABLE_STARTING (__MAC_10_6, __IPHONE_5_0);//ç«‹æ–¹ä½“å½¢çŠ¶ï¼Œä¼šå½±å“Zå¹³é¢çš„æ•ˆæœCA_EXTERN NSString * const kCAEmitterLayerCircle __OSX_AVAILABLE_STARTING (__MAC_10_6, __IPHONE_5_0);//åœ†å½¢ï¼Œç²’å­ä¼šåœ¨åœ†å½¢èŒƒå›´å‘å°„CA_EXTERN NSString * const kCAEmitterLayerSphere __OSX_AVAILABLE_STARTING (__MAC_10_6, __IPHONE_5_0);//çƒå‹ @property(copy) NSString *emitterMode; å‘å°„å™¨çš„å‘å°„æ¨¡å¼ï¼Œå‚æ•°å¦‚ä¸‹ï¼š 12345678CA_EXTERN NSString * const kCAEmitterLayerPoints __OSX_AVAILABLE_STARTING (__MAC_10_6, __IPHONE_5_0);//ä»å‘å°„å™¨ä¸­å‘å‡ºCA_EXTERN NSString * const kCAEmitterLayerOutline __OSX_AVAILABLE_STARTING (__MAC_10_6, __IPHONE_5_0);//ä»å‘å°„å™¨è¾¹ç¼˜å‘å‡ºCA_EXTERN NSString * const kCAEmitterLayerSurface __OSX_AVAILABLE_STARTING (__MAC_10_6, __IPHONE_5_0);//ä»å‘å°„å™¨è¡¨é¢å‘å‡ºCA_EXTERN NSString * const kCAEmitterLayerVolume __OSX_AVAILABLE_STARTING (__MAC_10_6, __IPHONE_5_0);//ä»å‘å°„å™¨ä¸­ç‚¹å‘å‡º @property(copy) NSString *renderMode; å‘å°„å™¨æ¸²æŸ“æ¨¡å¼ï¼Œå‚æ•°å¦‚ä¸‹ï¼š 12345678910CA_EXTERN NSString * const kCAEmitterLayerUnordered __OSX_AVAILABLE_STARTING (__MAC_10_6, __IPHONE_5_0);//è¿™ç§æ¨¡å¼ä¸‹ï¼Œç²’å­æ˜¯æ— åºå‡ºç°çš„ï¼Œå¤šä¸ªå‘å°„æºå°†æ··åˆCA_EXTERN NSString * const kCAEmitterLayerOldestFirst __OSX_AVAILABLE_STARTING (__MAC_10_6, __IPHONE_5_0);//è¿™ç§æ¨¡å¼ä¸‹ï¼Œå£°æ˜ä¹…çš„ç²’å­ä¼šè¢«æ¸²æŸ“åœ¨æœ€ä¸Šå±‚CA_EXTERN NSString * const kCAEmitterLayerOldestLast __OSX_AVAILABLE_STARTING (__MAC_10_6, __IPHONE_5_0);//è¿™ç§æ¨¡å¼ä¸‹ï¼Œå¹´è½»çš„ç²’å­ä¼šè¢«æ¸²æŸ“åœ¨æœ€ä¸Šå±‚CA_EXTERN NSString * const kCAEmitterLayerBackToFront __OSX_AVAILABLE_STARTING (__MAC_10_6, __IPHONE_5_0);//è¿™ç§æ¨¡å¼ä¸‹ï¼Œç²’å­çš„æ¸²æŸ“æŒ‰ç…§Zè½´çš„å‰åé¡ºåºè¿›è¡ŒCA_EXTERN NSString * const kCAEmitterLayerAdditive __OSX_AVAILABLE_STARTING (__MAC_10_6, __IPHONE_5_0);//è¿™ç§æ¨¡å¼ä¼šè¿›è¡Œç²’å­æ··åˆ @property BOOL preservesDepth; æ˜¯å¦å¼€å¯ä¸‰ç»´ç©ºé—´æ•ˆæœ @property float velocity; ç²’å­çš„è¿åŠ¨é€Ÿåº¦ @property float scale; ç²’å­çš„ç¼©æ”¾å¤§å° @property float spin; ç²’å­çš„æ—‹è½¬ä½ç½® @property unsigned int seed; åˆå§‹åŒ–éšæœºçš„ç²’å­ç§å­ äºŒã€ç²’å­å•å…ƒè®¾ç½®å¥½äº†ç²’å­å‘å°„å™¨ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åˆå§‹åŒ–ä¸€äº›ç²’å­å•å…ƒï¼Œè®¾ç½®å…·ä½“ç²’å­çš„å±æ€§ï¼Œæˆ‘ä»¬ä½¿ç”¨åˆ°çš„ç±»æ˜¯CAEmitterCellè¿™ä¸ªç±»ã€‚ + (instancetype)emitterCell; ç±»æ–¹æ³•åˆ›å»ºå‘å°„å•å…ƒ @property(copy) NSString *name; è®¾ç½®å‘å°„å•å…ƒçš„åç§° @property(getter=isEnabled) BOOL enabled; æ˜¯å¦å…è®¸å‘å°„å™¨æ¸²æŸ“ @property float birthRate; ç²’å­çš„åˆ›å»ºé€Ÿç‡ @property float lifetime; ç²’å­çš„ç”Ÿå­˜æ—¶é—´ @property float lifetimeRange; ç²’å­çš„ç”Ÿå­˜æ—¶é—´å®¹å·® @property CGFloat emissionLatitude; ç²’å­åœ¨Zè½´æ–¹å‘çš„å‘å°„è§’åº¦ @property CGFloat emissionLongitude; ç²’å­åœ¨xyå¹³é¢çš„å‘å°„è§’åº¦ @property CGFloat emissionRange; ç²’å­å‘å°„è§’åº¦çš„å®¹å·® @property CGFloat velocity; ç²’å­çš„é€Ÿåº¦ @property CGFloat velocityRange; ç²’å­é€Ÿåº¦çš„å®¹å·® @property CGFloat xAcceleration; @property CGFloat yAcceleration; @property CGFloat zAcceleration; xï¼Œyï¼Œzä¸‰ä¸ªæ–¹å‘çš„åŠ é€Ÿåº¦ @property CGFloat scale; @property CGFloat scaleRange; @property CGFloat scaleSpeed; ç¼©æ”¾å¤§å°ï¼Œç¼©æ”¾å®¹å·®å’Œç¼©æ”¾é€Ÿåº¦ @property CGFloat spin; @property CGFloat spinRange; æ—‹è½¬åº¦ä¸æ—‹è½¬å®¹å·® @property CGColorRef color; ç²’å­çš„é¢œè‰² @property float redRange; @property float greenRange; @property float blueRange; @property float alphaRange; ç²’å­åœ¨rgbä¸‰ä¸ªè‰²ç›¸ä¸Šçš„å®¹å·®å’Œé€æ˜åº¦çš„å®¹å·® @property float redSpeed; @property float greenSpeed; @property float blueSpeed; @property float alphaSpeed; ç²’å­åœ¨RGBä¸‰ä¸ªè‰²ç›¸ä¸Šçš„å˜åŒ–é€Ÿåº¦å’Œé€æ˜åº¦çš„å˜åŒ–é€Ÿåº¦ @property(strong) id contents; æ¸²æŸ“ç²’å­ï¼Œå¯ä»¥è®¾ç½®ä¸ºä¸€ä¸ªCGImageçš„å¯¹è±¡ @property CGRect contentsRect; æ¸²æŸ“çš„èŒƒå›´ ä¸‰ã€è®©æˆ‘ä»¬æ¥â€œç«â€ä¸€æŠŠé€šè¿‡ä¸Šé¢çš„ä»‹ç»ï¼Œæˆ‘ä»¬æ¥åº”ç”¨è¿™äº›åˆ›é€ ä¸€å›¢ç«ï¼Œä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455@interface ViewController ()&#123; CAEmitterLayer * _fireEmitter;//å‘å°„å™¨å¯¹è±¡&#125;@end@implementation ViewController- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view, typically from a nib. self.view.backgroundColor=[UIColor blackColor]; //è®¾ç½®å‘å°„å™¨ _fireEmitter=[[CAEmitterLayer alloc]init]; _fireEmitter.emitterPosition=CGPointMake(self.view.frame.size.width/2,self.view.frame.size.height-20); _fireEmitter.emitterSize=CGSizeMake(self.view.frame.size.width-100, 20); _fireEmitter.renderMode = kCAEmitterLayerAdditive; //å‘å°„å•å…ƒ //ç«ç„° CAEmitterCell * fire = [CAEmitterCell emitterCell]; fire.birthRate=800; fire.lifetime=2.0; fire.lifetimeRange=1.5; fire.color=[[UIColor colorWithRed:0.8 green:0.4 blue:0.2 alpha:0.1]CGColor]; fire.contents=(id)[[UIImage imageNamed:@&quot;Particles_fire.png&quot;]CGImage]; [fire setName:@&quot;fire&quot;]; fire.velocity=160; fire.velocityRange=80; fire.emissionLongitude=M_PI+M_PI_2; fire.emissionRange=M_PI_2; fire.scaleSpeed=0.3; fire.spin=0.2; //çƒŸé›¾ CAEmitterCell * smoke = [CAEmitterCell emitterCell]; smoke.birthRate=400; smoke.lifetime=3.0; smoke.lifetimeRange=1.5; smoke.color=[[UIColor colorWithRed:1 green:1 blue:1 alpha:0.05]CGColor]; smoke.contents=(id)[[UIImage imageNamed:@&quot;Particles_fire.png&quot;]CGImage]; [fire setName:@&quot;smoke&quot;]; smoke.velocity=250; smoke.velocityRange=100; smoke.emissionLongitude=M_PI+M_PI_2; smoke.emissionRange=M_PI_2; _fireEmitter.emitterCells=[NSArray arrayWithObjects:smoke,fire,nil]; [self.view.layer addSublayer:_fireEmitter]; &#125; æ•ˆæœå¦‚ä¸‹ï¼š çœ‹åˆ°æ•ˆæœäº†ä¹ˆï¼Ÿè¿™æ¬¡å¤Ÿç‚«é…·äº†å§ï¼Œæ”¹æ”¹å…¶å®ƒå±æ€§ï¼Œå°½æƒ…çš„ç©å§ï¼ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSåŠ¨ç”»å¼€å‘ä¹‹ä¸‰â€”â€”UIViewçš„è½¬åœºåˆ‡æ¢","slug":"86iOSåŠ¨ç”»å¼€å‘ä¹‹ä¸‰â€”â€”UIViewçš„è½¬åœºåˆ‡æ¢","date":"2015-07-27T16:00:00.000Z","updated":"2021-06-30T11:12:12.076Z","comments":true,"path":"2015/07/28/86iOSåŠ¨ç”»å¼€å‘ä¹‹ä¸‰â€”â€”UIViewçš„è½¬åœºåˆ‡æ¢/","link":"","permalink":"http://huishao.cc/2015/07/28/86iOSåŠ¨ç”»å¼€å‘ä¹‹ä¸‰â€”â€”UIViewçš„è½¬åœºåˆ‡æ¢/","excerpt":"","text":"iOSåŠ¨ç”»å¼€å‘ä¹‹ä¸‰â€”â€”UIViewçš„è½¬åœºåˆ‡æ¢å‰ä¸¤ç¯‡åšå®¢ä¸­ï¼Œæˆ‘ä»¬åˆ†åˆ«ä»‹ç»äº†UIViewåŠ¨ç”»çš„ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼Œåˆ†åˆ«ä¸ºï¼Œå¸¦blockçš„æ–¹å¼ï¼š[**http://my.oschina.net/u/2340880/blog/484457**](http://my.oschina.net/u/2340880/blog/484457) ,ä¼ ç»Ÿçš„å±æ€§é…ç½®çš„æ–¹å¼ï¼š[http://my.oschina.net/u/2340880/blog/484538](http://my.oschina.net/u/2340880/blog/484538)ã€‚é€šè¿‡UIViewåŠ¨ç”»çš„ç±»æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ååˆ†æ–¹ä¾¿çš„ä½¿ViewæŸäº›å±æ€§æ”¹å˜çš„åŒæ—¶æ‹¥æœ‰åŠ¨ç”»æ•ˆæœã€‚è¿™ç¯‡åšå®¢ä¸»è¦è®¨è®ºViewåˆ‡æ¢çš„åŠ¨ç”»æ“ä½œã€‚ ä¸¤ä¸ªæ–¹æ³•ï¼š + (void)transitionWithView:(UIView *)view duration:(NSTimeInterval)duration options:(UIViewAnimationOptions)options animations:(void (^)(void))animations completion:(void (^)(BOOL finished))completion; é€šè¿‡è¿™ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥é‡ç»˜Viewè§†å›¾ï¼Œä»»ä½•å…¶å­è§†å›¾çš„æ”¹å˜æˆ–è€…å…¶è‡ªèº«çš„æ”¹å˜éƒ½ä¼šè§¦å‘è½¬åœºåŠ¨ç”»çš„æ•ˆæœï¼Œ ç³»ç»Ÿæä¾›çš„è½¬åœºæ•ˆæœåœ¨ç¬¬ä¸€ç¯‡åšå®¢ä¸­å·²ç»ä»‹ç»è¿‡ã€‚ è¿™ä¸ªæ–¹æ³•å¸¸ç”¨äºç±»ä¼¼å°è¯´è½¯ä»¶çš„ç¿»é¡µæ•ˆæœã€‚ + (void)transitionFromView:(UIView )fromView toView:(UIView )toView duration:(NSTimeInterval)duration options:(UIViewAnimationOptions)options completion:(void (^)(BOOL finished))completion; è¿™ä¸ªæ–¹æ³•ä¼šä½œç”¨äºfromViewçš„çˆ¶è§†å›¾ï¼Œç”¨äºåˆ‡æ¢ä¸¤ä¸ªviewï¼Œé€šè¿‡æ‰§è¡Œè¿™ä¸ªæ–¹æ³•ï¼Œä¼šå°†formViewä»å…¶çˆ¶è§†å›¾ä¸Šç§»é™¤ï¼Œå°†toViewé‡æ–°ç²˜åœ¨å…¶çˆ¶è§†å›¾ä¸Šï¼Œå±•ç°ä¸€ä¸ªåŠ¨ç”»æ•ˆæœã€‚ é€šè¿‡ä½¿ç”¨ä¸Šè¿°ä¸¤ä¸ªæ–¹æ³•ï¼Œä½ ä¼šå‘ç°æŸäº›æ•ˆæœä¼šéå¸¸çªå…€ï¼Œæ¯”å¦‚æƒ³è¦æ”¹å˜è§†å›¾çš„é¢œè‰²ï¼Œå®ƒä¼šåœ¨è½¬åœºåŠ¨ç”»æ’­æ”¾å®Œæˆåï¼Œé¢œè‰²çªç„¶çš„å˜åŒ–ï¼Œè¦æ”¹å–„è¿™ä¸€æ•ˆæœï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®optionså‚æ•°åŒ…å«ï¼šUIViewAnimationOptionAllowAnimatedContentè¿™ä¸ªæšä¸¾ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSåŠ¨ç”»å¼€å‘ä¹‹äºŒâ€”â€”UIViewåŠ¨ç”»æ‰§è¡Œçš„å¦ä¸€ç§æ–¹å¼","slug":"85iOSåŠ¨ç”»å¼€å‘ä¹‹äºŒâ€”â€”UIViewåŠ¨ç”»æ‰§è¡Œçš„å¦ä¸€ç§æ–¹å¼","date":"2015-07-27T16:00:00.000Z","updated":"2021-06-30T11:10:14.027Z","comments":true,"path":"2015/07/28/85iOSåŠ¨ç”»å¼€å‘ä¹‹äºŒâ€”â€”UIViewåŠ¨ç”»æ‰§è¡Œçš„å¦ä¸€ç§æ–¹å¼/","link":"","permalink":"http://huishao.cc/2015/07/28/85iOSåŠ¨ç”»å¼€å‘ä¹‹äºŒâ€”â€”UIViewåŠ¨ç”»æ‰§è¡Œçš„å¦ä¸€ç§æ–¹å¼/","excerpt":"","text":"iOSåŠ¨ç”»å¼€å‘ä¹‹äºŒâ€”â€”UIViewåŠ¨ç”»æ‰§è¡Œçš„å¦ä¸€ç§æ–¹å¼ ä¸Šä¸€ç¯‡åšå®¢ä¸­ä»‹ç»äº†UIViewçš„ä¸€äº›å¸¸ç”¨åŠ¨ç”»ï¼Œé€šè¿‡blockå—ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿ç®€æ´çš„åˆ›å»ºå‡ºåŠ¨ç”»æ•ˆæœï¼š[http://my.oschina.net/u/2340880/blog/484457](http://my.oschina.net/u/2340880/blog/484457)ï¼Œè¿™ç¯‡åšå®¢å†ä»‹ç»ä¸€ç§æ›´åŠ ä¼ ç»Ÿçš„æ‰§è¡ŒUIViewçš„åŠ¨ç”»çš„æ–¹æ³•ã€‚ è¿™ç§æ–¹å¼ç›¸æ¯”å¦‚blockçš„æ–¹å¼ï¼Œæ˜¾å¾—è¦éº»çƒ¦ä¸€äº›ï¼Œappleå®˜æ–¹ä¹Ÿæ¨èæˆ‘ä»¬ä½¿ç”¨å¸¦blockçš„åˆ›å»ºåŠ¨ç”»çš„æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥å°†ç¼–ç¨‹é‡å¿ƒæ›´å¤šçš„æ”¾åœ¨åŠ¨ç”»é€»è¾‘çš„å®ç°ä¸Šã€‚ä½¿ç”¨beginå’Œcommitæ–¹å¼ä¸»è¦åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼š ä¸€ã€è®¾ç½®åŠ¨ç”»å¼€å§‹ 1[UIView beginAnimations:@&quot;test&quot; context:nil]; è¿™ä¸ªå‡½æ•°ä¸­çš„ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªç”¨äºè®¾ç½®ä¸€ä¸ªåŠ¨ç”»çš„æ ‡è¯†idï¼Œé€šå¸¸ç¬¬äºŒä¸ªå‚æ•°å†™ä¸ºnilã€‚ äºŒã€åŠ¨ç”»æ‰§è¡Œçš„å‚æ•°è®¾ç½® + (void)setAnimationDelegate:(id)delegate; è®¾ç½®è¿™ä¸ªåŠ¨ç”»çš„ä»£ç†ï¼Œç”¨äºæ‰§è¡ŒåŠ¨ç”»å¼€å§‹æˆ–è€…ç»“æŸåçš„åŠ¨ä½œ + (void)setAnimationWillStartSelector:(SEL)selector; è®¾ç½®åŠ¨ç”»å¼€å§‹æ—¶æ‰§è¡Œçš„å›è°ƒ + (void)setAnimationDidStopSelector:(SEL)selector; è®¾ç½®åŠ¨ç”»ç»“æŸåæ‰§è¡Œçš„å›è°ƒ + (void)setAnimationDuration:(NSTimeInterval)duration; è®¾ç½®åŠ¨ç”»æ‰§è¡Œçš„æ—¶é—´ + (void)setAnimationDelay:(NSTimeInterval)delay; è®¾ç½®å»¶æ—¶æ‰§è¡Œçš„å»¶æ—¶ + (void)setAnimationStartDate:(NSDate *)startDate; ç»™åŠ¨ç”»è®¾ç½®ä¸€ä¸ªå¯ç¤ºæ—¶é—´ + (void)setAnimationCurve:(UIViewAnimationCurve)curve; è®¾ç½®åŠ¨ç”»æ’­æ”¾çš„çº¿æ€§æ•ˆæœï¼ŒUIViewAnimationCurveçš„æšä¸¾å¦‚ä¸‹ï¼š 123456typedef NS_ENUM(NSInteger, UIViewAnimationCurve) &#123; UIViewAnimationCurveEaseInOut, // æ·¡å…¥æ·¡å‡º UIViewAnimationCurveEaseIn, // æ·¡å…¥ UIViewAnimationCurveEaseOut, // æ·¡å‡º UIViewAnimationCurveLinear //çº¿æ€§&#125; + (void)setAnimationRepeatCount:(float)repeatCount; è®¾ç½®åŠ¨ç”»å¾ªç¯æ’­æ”¾æ¬¡æ•° + (void)setAnimationRepeatAutoreverses:(BOOL)repeatAutoreverses; è®¾ç½®åŠ¨ç”»é€†å‘æ‰§è¡Œ ä¸‰ã€æäº¤åŠ¨ç”» + (void)commitAnimations; ä¾‹å¦‚ï¼š 1234567UIView * view = [[UIView alloc]initWithFrame:CGRectMake(100, 100, 100, 100)]; [self.view addSubview:view]; view.backgroundColor=[UIColor redColor]; [UIView beginAnimations:@&quot;test&quot; context:nil]; [UIView setAnimationDuration:3]; view.backgroundColor=[UIColor orangeColor]; [UIView commitAnimations];//æ‰§è¡Œcommitåï¼ŒåŠ¨ç”»å³å¼€å§‹æ‰§è¡Œ ä¸€ç‚¹å»ºè®®ï¼šè¿™ç§åˆ›å»ºUIViewåŠ¨ç”»çš„æ–¹å¼å’Œä¸Šä¸€ç¯‡åšå®¢ä¸­çš„blockæ–¹å¼æ•ˆæœç›¸åŒï¼Œç„¶è€Œæ•ˆç‡å¹¶ä¸é«˜ï¼Œå†™çš„ä»£ç ä¹Ÿä¼šç¹çå†—é•¿ï¼Œåœ¨å¼€å‘ä¸­ï¼Œå¦‚æœæ²¡æœ‰ç‰¹æ®Šçš„å…¼å®¹è¦æ±‚ï¼Œä½¿ç”¨blockçš„æ–¹å¼ä¼šæ›´é«˜æ•ˆæ–¹ä¾¿ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSåŠ¨ç”»å¼€å‘ä¹‹å››â€”â€”æ ¸å¿ƒåŠ¨ç”»ç¼–ç¨‹(CoreAnimation)","slug":"87iOSåŠ¨ç”»å¼€å‘ä¹‹å››â€”â€”æ ¸å¿ƒåŠ¨ç”»ç¼–ç¨‹(CoreAnimation)","date":"2015-07-27T16:00:00.000Z","updated":"2021-06-30T11:13:16.770Z","comments":true,"path":"2015/07/28/87iOSåŠ¨ç”»å¼€å‘ä¹‹å››â€”â€”æ ¸å¿ƒåŠ¨ç”»ç¼–ç¨‹(CoreAnimation)/","link":"","permalink":"http://huishao.cc/2015/07/28/87iOSåŠ¨ç”»å¼€å‘ä¹‹å››â€”â€”æ ¸å¿ƒåŠ¨ç”»ç¼–ç¨‹(CoreAnimation)/","excerpt":"","text":"iOSåŠ¨ç”»å¼€å‘ä¹‹å››â€”â€”æ ¸å¿ƒåŠ¨ç”»ç¼–ç¨‹(CoreAnimation)ä¸€ã€å¼•è¨€å‰å‡ ç¯‡åšå®¢è¯¦ç»†ä»‹ç»äº†æœ‰å…³UIViewå±‚çš„åŠ¨ç”»ä½¿ç”¨ä¸ç›¸å…³çš„æ•ˆæœï¼Œç„¶è€Œè¿™äº›åŠ¨ç”»æ˜¯UIKitä¸ºæˆ‘ä»¬å°è£…å¥½çš„æ ¸å¿ƒåŠ¨ç”»å±‚çš„æ–¹æ³•ï¼Œé€šè¿‡è¿™äº›æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨çš„æ›´åŠ ç®€ä¾¿ï¼Œå½“ç„¶åŠŸèƒ½ä¹Ÿååˆ†å¼ºå¤§ï¼ŒåŸºæœ¬èƒ½è¾¾åˆ°æˆ‘ä»¬é¡¹ç›®çš„å¤§å¤šéœ€æ±‚ã€‚ä½†æ˜¯å¦‚æœä½ æƒ³æ›´åŠ è‡ªç”±çš„é€šè¿‡åŠ¨ç”»æ“ä½œè§†å›¾çš„å±æ€§ï¼Œä½ å°±éœ€è¦è·³è¿‡UIKitçš„å°è£…ï¼Œä½¿ç”¨CoreAnimationæ ¸å¿ƒåŠ¨ç”»å±‚çš„æ–¹æ³•æ¥å®ç°åŠ¨ç”»ã€‚ äºŒã€å¼€å§‹å‰çš„å‡†å¤‡1ã€è®¤è¯†ä¸€ä¸ªçš„æœ‹å‹åœ¨å¼€å§‹ä»‹ç»æ ¸å¿ƒåŠ¨ç”»çš„å†…å®¹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆææ˜ç™½ä¸€ä¸ªä¸œè¥¿ï¼šLayerã€‚ä½ å¯èƒ½å¾ˆå°‘å¬è¯´ä»–ï¼Œå¯æ˜¯ä»–å´æ— å¤„ä¸åœ¨ï¼Œåœ¨iOSçš„UIå¼€å‘ä¸­ï¼Œä»»ä½•ä¸€ä¸ªViewåŒ…æ‹¬ç»§æ‰¿äºUIViewçš„å­ç±»ä¸Šé¢éƒ½ä¼šæœ‰ä¸€ä¸ªLayerï¼Œå¯ä»¥ç†è§£ä¸ºLayerä¸ºå•ç‹¬çš„ä¸€å±‚ï¼Œä¸“é—¨è´Ÿè´£è§†å›¾çš„æ˜¾ç¤ºï¼Œè€Œviewé™¤æ­¤ä¹‹å¤–æ›´å¤šè´Ÿè´£è§¦æ‘¸æ—¶é—´ç­‰é€»è¾‘å¤„ç†ã€‚å› æ­¤ï¼ŒiOSä¹Ÿå°†æ‰€æœ‰åŠ¨ç”»çš„æ“ä½œéƒ½äº¤ç»™ä½ Layeræ¥è´Ÿè´£ã€‚ 2ã€Layerå±‚å¯ä»¥åšåˆ°çš„äº‹Layerå¦‚æ­¤ç¥ç§˜ï¼Œé‚£ä»–ç©¶ç«Ÿå¯ä»¥åšåˆ°å“ªäº›äº‹ï¼Ÿä»–ç¡®å®å¯ä»¥åšå¾ˆå¤šviewåšä¸äº†çš„äº‹æƒ…. (1)è®¾ç½®viewçš„åœ†è§’å±æ€§12345 view = [[UIView alloc]initWithFrame:CGRectMake(100, 100, 100, 100)]; [self.view addSubview:view]; view.backgroundColor=[UIColor redColor]; view.layer.masksToBounds=YES;//è®¾ç½®layerå±‚çš„åˆ‡å‰²å±æ€§ view.layer.cornerRadius=10;//è®¾ç½®layerå±‚çš„åœ†è§’åŠå¾„ æ•ˆæœå¦‚ä¸‹ï¼š (2)è®¾ç½®viewçš„è¾¹æ¡†123456view = [[UIView alloc]initWithFrame:CGRectMake(100, 100, 100, 100)]; [self.view addSubview:view]; view.backgroundColor=[UIColor redColor]; CALayer *layer=view.layer; layer.borderWidth=10;//è®¾ç½®è¾¹æ¡†çš„å®½åº¦ layer.borderColor=[[UIColor magentaColor]CGColor];//è®¾ç½®è¾¹æ¡†çš„é¢œè‰² æ³¨æ„ï¼šå› ä¸ºCoreAnimationå±‚æ˜¯UIå±‚çš„åº•å±‚ï¼Œæ‰€ä»¥è¿™é‡Œçš„é¢œè‰²ä¸ºCGColorå¯¹è±¡ã€‚ æ•ˆæœå¦‚ä¸‹ï¼š (3)è®¾ç½®è§†å›¾é˜´å½±12345678 view = [[UIView alloc]initWithFrame:CGRectMake(100, 100, 100, 100)]; [self.view addSubview:view]; view.backgroundColor=[UIColor redColor]; CALayer *layer=view.layer; layer.shadowOffset=CGSizeMake(30, 30);//è®¾ç½®é˜´å½±æ–¹å‘ layer.shadowColor=[[UIColor blackColor] CGColor];//è®¾ç½®é˜´å½±é¢œè‰² layer.shadowOpacity=0.5;//è®¾ç½®é˜´å½±é€æ˜åº¦ layer.shadowRadius=10;//è®¾ç½®é˜´å½±åœ†è§’ æ•ˆæœå¦‚ä¸‹ï¼š è¿™æ ·çš„ç«‹ä½“æ•ˆæœæ˜¯å¦å·²ç»å¾ˆé…·äº†ï¼ŸNOï¼Œåœ¨åŠ ä¸ŠåŠ¨ç”»æ‰å¯¹ã€‚ ä¸‰ã€CoreAnimationçš„ä½¿ç”¨1ã€åŸºç¡€å±æ€§ç›¸å…³çš„åŠ¨ç”»CABasicAnimationCABasicAnimationæ˜¯æ ¸å¿ƒåŠ¨ç”»ä¸­å¯¹å±æ€§æ“ä½œéœ€è¦ç”¨åˆ°äº†ä¸€ä¸ªåŠ¨ç”»ç±»ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567 CALayer *layer=view.layer; CABasicAnimation * ani= [CABasicAnimation animationWithKeyPath:@&quot;opacity&quot;];//åˆ›å»ºå¯¹è±¡ï¼Œå‚æ•°å…³é”®å­—ä¸ºlayerçš„å±æ€§ ani.duration=3;//è®¾ç½®æ‰§è¡Œæ—¶é—´ ani.repeatCount=1;//è®¾ç½®æ‰§è¡Œæ¬¡æ•° ani.timingFunction=[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];//è®¾ç½®çº¿æ€§æ•ˆæœ [layer addAnimation:ani forKey:@&quot;test&quot;];//æ·»åŠ åŠ¨ç”» layer.opacity=0;//é€æ˜åº¦æ”¹å˜æ—¶æ‰§è¡ŒåŠ¨ç”»åŠ¨ä½œ é€šè¿‡ä¸Šé¢çš„ç¤ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œlayerçš„å±æ€§éƒ½å¯ä»¥æ¥è¿›è¡ŒåŠ¨ç”»åŠ¨ä½œï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬å¯¹åŠ¨ç”»çš„æ“ä½œå°±è‡ªç”±çš„å¾ˆå¤šã€‚ 2ã€å…³é”®å¸§åŠ¨ç”»CAKeyframeAnimationå…³é”®å¸§åŠ¨ç”»é™¤äº†åŠ¨ç”»æ”¹å˜layerçš„å±æ€§å¤–ï¼Œå¯ä»¥è®¾ç½®å‡ ä¸ªå…³é”®å¸§ç‚¹ï¼Œé€šè¿‡è¿™äº›ç‚¹ï¼Œå¯ä»¥å®ç°è·¯å¾„æ›´åŠ è´Ÿè´£çš„åŠ¨ç”»ï¼Œä¾‹å¦‚ï¼š 12345CALayer *layer=view.layer; CAKeyframeAnimation * ani = [CAKeyframeAnimation animationWithKeyPath:@&quot;opacity&quot;];//åˆ›å»ºä¸€ä¸ªå…³é”®å¸§åŠ¨ç”»å¯¹è±¡ ani.duration=3; ani.values=@[@1,@0,@1];//ä¼ å…¥ä¸‰ä¸ªå…³é”®å¸§ï¼ŒåŠ¨ç”»ä¼šå°†è¯•å›¾å…ˆæ…¢æ…¢éšè—ï¼Œå†æ…¢æ…¢å±•ç° [layer addAnimation:ani forKey:@&quot;test&quot;]; ç±»æ¯”å¦‚ä¸Šä»£ç ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡å…³é”®å¸§è®©è¯•å›¾æŒ‰ç…§æˆ‘ä»¬é¢„å®šçš„è·¯çº¿ç§»åŠ¨ï¼ŒåŒæ—¶æˆ‘ä»¬è¿˜å¯ä»¥è®¾ç½®ä¸¤ä¸ªæ•°ç»„ï¼Œåˆ†åˆ«ä¸ºkeyTimeså’ŒtimingFunctionsã€‚è¿™ä¸¤ä¸ªæ•°ç»„ä¸­çš„å€¼å¯ä»¥è®¾ç½®åŠ¨ç”»æ¯ä¸€æ®µçš„è¿åŠ¨çº¿æ€§ç‰¹å¾å’Œæ¯ä¸€æ®µçš„è¿åŠ¨æ—¶é—´æ¯”ä¾‹ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSåŠ¨ç”»å¼€å‘ä¹‹ä¸€â€”â€”UIViewAnimationåŠ¨ç”»çš„ä½¿ç”¨","slug":"84iOSåŠ¨ç”»å¼€å‘ä¹‹ä¸€â€”â€”UIViewAnimationåŠ¨ç”»çš„ä½¿ç”¨","date":"2015-07-26T16:00:00.000Z","updated":"2021-06-30T11:06:09.856Z","comments":true,"path":"2015/07/27/84iOSåŠ¨ç”»å¼€å‘ä¹‹ä¸€â€”â€”UIViewAnimationåŠ¨ç”»çš„ä½¿ç”¨/","link":"","permalink":"http://huishao.cc/2015/07/27/84iOSåŠ¨ç”»å¼€å‘ä¹‹ä¸€â€”â€”UIViewAnimationåŠ¨ç”»çš„ä½¿ç”¨/","excerpt":"","text":"iOSåŠ¨ç”»å¼€å‘ä¹‹ä¸€â€”â€”UIViewAnimationåŠ¨ç”»çš„ä½¿ç”¨ä¸€ã€ç®€ä»‹ä¸€æ¬¾APPçš„æˆåŠŸä¸å¦ï¼Œé™¤äº†å®Œå–„çš„åŠŸèƒ½å¤–ï¼Œç”¨æˆ·ä½“éªŒä¹Ÿå æœ‰æå¤§çš„æ¯”é‡ï¼ŒåŠ¨ç”»çš„åˆç†è¿ç”¨ï¼Œå¯ä»¥å¾ˆå¥½çš„å¢å¼ºç”¨æˆ·ä½“éªŒã€‚iOSå¼€å‘ä¸­ï¼Œå¸¸ç”¨çš„åŠ¨ç”»å¤„ç†æœ‰UIViewåŠ¨ç”»ç¼–ç¨‹å’Œæ ¸å¿ƒåŠ¨ç”»ç¼–ç¨‹ï¼Œå…¶ä¸­UIViewåŠ¨ç”»ä½¿ç”¨ç®€ä¾¿ï¼Œå¼€å‘ä¸­åº”ç”¨ååˆ†å¹¿æ³›ã€‚è¿™ç¯‡åšå®¢ï¼Œä¸»è¦è®¨è®ºUIViewçš„åŠ¨ç”»ä½¿ç”¨ã€‚ äºŒã€UIViewåŠ¨ç”»çš„å‡ ä¸ªæ–¹æ³•+ (void)animateWithDuration:(NSTimeInterval)duration animations:(void (^)(void))animations; è¿™ä¸ªæ˜¯å‚æ•°æœ€å°‘çš„ä¸€ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®ä¸€ä¸ªæ—¶é—´å’Œblockå—æ¥å®ŒæˆåŠ¨ç”»ï¼Œæ—¶é—´å‚æ•°æ˜¯åŠ¨ç”»æ‰§è¡Œçš„æ—¶é•¿ï¼Œblockå—ä¸­ä¸ºè¦æ‰§è¡Œçš„åŠ¨ç”»åŠ¨ä½œï¼Œå…·ä½“å¯ä»¥æ‰§è¡Œé‚£äº›åŠ¨ä½œï¼Œæˆ‘ä»¬ä¼šåœ¨åé¢è¯´ã€‚ä¾‹å¦‚åœ¨1Så†…å°†viewæ¸å˜é€æ˜ï¼š 123[UIView animateWithDuration:1 animations:^&#123; _myView.alpha=0; &#125;]; + (void)animateWithDuration:(NSTimeInterval)duration animations:(void (^)(void))animations completion:(void (^)(BOOL finished))completion; è¿™ä¸ªå‡½æ•°ä¼šå¸¦ä¸¤ä¸ªblockå—ï¼Œç”¨æ³•å’Œç¬¬ä¸€ä¸ªå‡½æ•°ç›¸ä¼¼ï¼Œè®¾ç½®ä¸€ä¸ªæ‰§è¡Œæ—¶é—´å’Œä¸€ä¸ªæ‰§è¡ŒåŠ¨ä½œï¼Œç¬¬äºŒä¸ªblockå—ä¸­å¯ä»¥æ·»åŠ ä¸€ä¸ªåŠ¨ç”»æ‰§è¡Œç»“æŸåçš„åŠ¨ä½œï¼Œä½œä¸ºè¡¥å……ï¼Œä¾‹å¦‚ä¸‹é¢ä»£ç çš„æ•ˆæœï¼Œåœ¨1Så†…å°†viewæ¸å˜ä¸ºé€æ˜ï¼ŒåŠ¨ç”»ç»“æŸåï¼Œviewåœ¨ç¬é—´å˜å›ä¸é€æ˜ï¼š 1234567[UIView animateWithDuration:1 animations:^&#123; _myView.alpha=0; &#125; completion:^(BOOL finished) &#123; if (finished) &#123; _myView.alpha=1; &#125; &#125;]; + (void)animateWithDuration:(NSTimeInterval)duration delay:(NSTimeInterval)delay options:(UIViewAnimationOptions)options animations:(void (^)(void))animations completion:(void (^)(BOOL finished))completion; è¿™ä¸ªå‡½æ•°é™¤äº†ä¸Šé¢çš„å±æ€§å¤–ï¼Œå¯ä»¥è®¾ç½®å»¶æ—¶æ‰§è¡Œï¼ŒåŒæ—¶å¯ä»¥è®¾ç½®ä¸€ä¸ªåŠ¨ç”»æ•ˆæœå‚æ•°ï¼Œè¿™ä¸ªå‚æ•°æ˜¯ä¸ªæšä¸¾ï¼Œå®ƒå¯ä»¥å½±å“åŠ¨ç”»çš„æ‰§è¡Œæ•ˆæœï¼Œåé¢ä¼šå†æ€»ç»“ã€‚ + (void)animateWithDuration:(NSTimeInterval)duration delay:(NSTimeInterval)delay usingSpringWithDamping:(CGFloat)dampingRatio initialSpringVelocity:(CGFloat)velocity options:(UIViewAnimationOptions)options animations:(void (^)(void))animations completion:(void (^)(BOOL finished))completion; è¿™ä¸ªå‡½æ•°æ˜¯iOS7ä¹‹åçš„ä¸€ä¸ªæ–°å‡½æ•°ï¼Œé€šè¿‡è¿™ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥æ–¹ä¾¿çš„åˆ¶ä½œå‡ºæ•ˆæœç‚«é…·çš„åŠ¨ç”»ï¼Œè¿™ä¸ªå‡½æ•°çš„æ ¸å¿ƒæ˜¯ä¸¤ä¸ªé˜»å°¼å‚æ•°ï¼Œå‚æ•°dampingRatioå¯ä»¥ç†è§£ä¸ºå¼¹ç°§æ•ˆæœçš„å¼ºå¼±ï¼Œè®¾ç½®1åˆ™æ²¡æœ‰å›å¼¹æ•ˆæœï¼Œè®¾ç½®0åˆ™ä¼šå‰§çƒˆçš„é˜»å°¼å›å¼¹ã€‚velocityå‚æ•°ç”¨äºè®¾ç½®å¼¹ç°§çš„åˆå§‹é€Ÿåº¦ã€‚ ä¸‰ã€UIViewåŠ¨ç”»å¯ä»¥æ“ä½œçš„è§†å›¾å±æ€§é€šè¿‡ä¸Šé¢çš„ä»‹ç»ï¼Œæˆ‘ä»¬äº†è§£äº†å‡ ä¸ªä½¿ç”¨åŠ¨ç”»çš„å‡½æ•°ï¼Œé‚£ä¹ˆé‚£äº›å±æ€§å¯ä»¥äº§ç”ŸåŠ¨ç”»æ•ˆæœå‘¢ï¼Ÿ å®˜æ–¹æ–‡æ¡£å‘Šè¯‰æˆ‘ä»¬è¿™äº›å±æ€§æ˜¯å¯ä»¥é€šè¿‡ä¸Šè¿°æ–¹æ³•è¿›è¡ŒåŠ¨ç”»çš„ï¼š å››ã€åŠ¨ç”»æ‰§è¡Œé€‰é¡¹è®¾ç½® åœ¨UIViewæ‰§è¡ŒåŠ¨ç”»çš„ç›¸å…³å‡½æ•°ä¸­ï¼Œæœ‰UIViewAnimationOptionsè¿™ä¸ªå‚æ•°å¯ä»¥å¯¹åŠ¨ç”»çš„æ‰§è¡Œæ•ˆæœè¿›è¡Œè®¾ç½®ï¼Œè¿™ä¸ªæšä¸¾éå¸¸å¤šï¼Œå¯åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼Œå¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627enum &#123; //è¿™éƒ¨åˆ†æ˜¯åŸºç¡€å±æ€§çš„è®¾ç½® UIViewAnimationOptionLayoutSubviews = 1 &lt;&lt; 0,//è®¾ç½®å­è§†å›¾éšçˆ¶è§†å›¾å±•ç¤ºåŠ¨ç”» UIViewAnimationOptionAllowUserInteraction = 1 &lt;&lt; 1,//å…è®¸åœ¨åŠ¨ç”»æ‰§è¡Œæ—¶ç”¨æˆ·ä¸å…¶è¿›è¡Œäº¤äº’ UIViewAnimationOptionBeginFromCurrentState = 1 &lt;&lt; 2,//å…è®¸åœ¨åŠ¨ç”»æ‰§è¡Œæ—¶æ‰§è¡Œæ–°çš„åŠ¨ç”» UIViewAnimationOptionRepeat = 1 &lt;&lt; 3,//è®¾ç½®åŠ¨ç”»å¾ªç¯æ‰§è¡Œ UIViewAnimationOptionAutoreverse = 1 &lt;&lt; 4,//è®¾ç½®åŠ¨ç”»åå‘æ‰§è¡Œï¼Œå¿…é¡»å’Œé‡å¤æ‰§è¡Œä¸€èµ·ä½¿ç”¨ UIViewAnimationOptionOverrideInheritedDuration = 1 &lt;&lt; 5,//å¼ºåˆ¶åŠ¨ç”»ä½¿ç”¨å†…å±‚åŠ¨ç”»çš„æ—¶é—´å€¼ UIViewAnimationOptionOverrideInheritedCurve = 1 &lt;&lt; 6,//å¼ºåˆ¶åŠ¨ç”»ä½¿ç”¨å†…å±‚åŠ¨ç”»æ›²çº¿å€¼ UIViewAnimationOptionAllowAnimatedContent = 1 &lt;&lt; 7,//è®¾ç½®åŠ¨ç”»è§†å›¾å®æ—¶åˆ·æ–° UIViewAnimationOptionShowHideTransitionViews = 1 &lt;&lt; 8,//è®¾ç½®è§†å›¾åˆ‡æ¢æ—¶éšè—ï¼Œè€Œä¸æ˜¯ç§»é™¤ UIViewAnimationOptionOverrideInheritedOptions = 1 &lt;&lt; 9,// //è¿™éƒ¨åˆ†å±æ€§è®¾ç½®åŠ¨ç”»æ’­æ”¾çš„çº¿æ€§æ•ˆæœ UIViewAnimationOptionCurveEaseInOut = 0 &lt;&lt; 16,//æ·¡å…¥æ·¡å‡º é¦–æœ«å‡é€Ÿ UIViewAnimationOptionCurveEaseIn = 1 &lt;&lt; 16,//æ·¡å…¥ åˆå§‹å‡é€Ÿ UIViewAnimationOptionCurveEaseOut = 2 &lt;&lt; 16,//æ·¡å‡º æœ«å°¾å‡é€Ÿ UIViewAnimationOptionCurveLinear = 3 &lt;&lt; 16,//çº¿æ€§ åŒ€é€Ÿæ‰§è¡Œ //è¿™éƒ¨åˆ†è®¾ç½®UIViewåˆ‡æ¢æ•ˆæœ UIViewAnimationOptionTransitionNone = 0 &lt;&lt; 20, UIViewAnimationOptionTransitionFlipFromLeft = 1 &lt;&lt; 20,//ä»å·¦è¾¹åˆ‡å…¥ UIViewAnimationOptionTransitionFlipFromRight = 2 &lt;&lt; 20,//ä»å³è¾¹åˆ‡å…¥ UIViewAnimationOptionTransitionCurlUp = 3 &lt;&lt; 20,//ä»ä¸Šé¢ç«‹ä½“è¿›å…¥ UIViewAnimationOptionTransitionCurlDown = 4 &lt;&lt; 20,//ä»ä¸‹é¢ç«‹ä½“è¿›å…¥ UIViewAnimationOptionTransitionCrossDissolve = 5 &lt;&lt; 20,//æº¶è§£æ•ˆæœ UIViewAnimationOptionTransitionFlipFromTop = 6 &lt;&lt; 20,//ä»ä¸Šé¢åˆ‡å…¥ UIViewAnimationOptionTransitionFlipFromBottom = 7 &lt;&lt; 20,//ä»ä¸‹é¢åˆ‡å…¥&#125;; æç¤ºï¼š1ï¼Œå±æ€§å¯ä»¥ä½¿ç”¨|è¿›è¡Œå¤šé¡¹åˆå¹¶ã€‚ 2ï¼Œè¿™ç±»çš„åŠ¨ç”»å¯ä»¥è¿›è¡ŒåµŒå¥—ï¼Œå…¶ä¸­æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œå†…å±‚åŠ¨ç”»çš„æ‰§è¡Œæ—¶é—´å’Œæ›²çº¿æ¨¡å¼ä¼šé»˜è®¤ç»§æ‰¿å¤–å±‚åŠ¨çš„ï¼Œè‹¥è¦å¼ºåˆ¶ä½¿ç”¨æ–°çš„å‚æ•°ï¼Œä½¿ç”¨å¦‚ä¸‹çš„ä¸¤ä¸ªå‚æ•°ï¼š 12UIViewAnimationOptionOverrideInheritedDuration = 1 &lt;&lt; 5,//å¼ºåˆ¶åŠ¨ç”»ä½¿ç”¨å†…å±‚åŠ¨ç”»çš„æ—¶é—´å€¼ UIViewAnimationOptionOverrideInheritedCurve = 1 &lt;&lt; 6,//å¼ºåˆ¶åŠ¨ç”»ä½¿ç”¨å†…å±‚åŠ¨ç”»æ›²çº¿å€¼ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSå¼€å‘æŠ€å·§ä¹‹æŸ¥çœ‹æ¨¡æ‹Ÿå™¨æ²™ç›’æ–‡ä»¶","slug":"83iOSå¼€å‘æŠ€å·§ä¹‹æŸ¥çœ‹æ¨¡æ‹Ÿå™¨æ²™ç›’æ–‡ä»¶","date":"2015-07-18T16:00:00.000Z","updated":"2021-06-30T11:03:57.806Z","comments":true,"path":"2015/07/19/83iOSå¼€å‘æŠ€å·§ä¹‹æŸ¥çœ‹æ¨¡æ‹Ÿå™¨æ²™ç›’æ–‡ä»¶/","link":"","permalink":"http://huishao.cc/2015/07/19/83iOSå¼€å‘æŠ€å·§ä¹‹æŸ¥çœ‹æ¨¡æ‹Ÿå™¨æ²™ç›’æ–‡ä»¶/","excerpt":"","text":"iOSå¼€å‘æŠ€å·§ä¹‹æŸ¥çœ‹æ¨¡æ‹Ÿå™¨æ²™ç›’æ–‡ä»¶iOSå¼€å‘ä¸­ï¼Œåœ¨å¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œæ—¶ï¼Œæœ‰æ—¶æˆ‘ä»¬éœ€è¦ç›´è§‚çš„æŸ¥çœ‹æ•°æ®åº“çš„å†…å®¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•æ‰¾åˆ°æ²™ç›’ä¸­çš„è¿™ä¸ªæ–‡ä»¶å‘¢ï¼Œæ­¥éª¤å¾ˆç®€å•ï¼š 1.ç‚¹å‡»Finderé€‰é¡¹æ ä¸Šçš„å‰å¾€èœå•ï¼š 2.é€‰æ‹©å‰å¾€æ–‡ä»¶å¤¹é€‰é¡¹ï¼š å‰å¾€çš„æ–‡ä»¶è·¯å¾„ä¸ºï¼š/Users/username/Library/Application Support/iPhone Simulator/ å…¶ä¸­usernameä¸ºå½“å‰macç”µè„‘çš„ç”¨æˆ·åã€‚ 3.ç•Œé¢ç±»ä¼¼å¦‚ä¸‹æ¨¡æ ·ï¼Œé€‰æ‹©ä¸€ä¸ªç‰ˆæœ¬çš„æ¨¡æ‹Ÿå™¨ï¼Œåº”ç”¨çš„æ²™ç›’æ–‡ä»¶å°±åœ¨Applicationsä¸­ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"æ ‡ç­¾ä¹‹ç¾åâ€”â€”ç”¨æˆ·äº¤äº’å…ƒç´ ","slug":"82æ ‡ç­¾ä¹‹ç¾åâ€”â€”ç”¨æˆ·äº¤äº’å…ƒç´ ","date":"2015-07-01T16:00:00.000Z","updated":"2021-06-30T11:02:01.459Z","comments":true,"path":"2015/07/02/82æ ‡ç­¾ä¹‹ç¾åâ€”â€”ç”¨æˆ·äº¤äº’å…ƒç´ /","link":"","permalink":"http://huishao.cc/2015/07/02/82æ ‡ç­¾ä¹‹ç¾åâ€”â€”ç”¨æˆ·äº¤äº’å…ƒç´ /","excerpt":"","text":"æ ‡ç­¾ä¹‹ç¾â€”â€”ç”¨æˆ·äº¤äº’å…ƒç´ ä»»ä½•ä¸€ä¸ªç½‘é¡µéƒ½ä¼šæä¾›ç”¨æˆ·äº¤äº’çš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬è´¦å·å¯†ç çš„æäº¤ï¼Œç•™è¨€æ¿ç­‰ç”¨æˆ·ä¿¡æ¯çš„çš„è·å–ã€‚ ä¸€ã€ç”¨æˆ·äº¤äº’è¡¨å•çš„å±æ€§è¡¨å•ä½¿ç”¨æ¥åˆ›å»ºã€‚ 1ã€è·³è½¬é“¾æ¥å±æ€§è¡¨å•çš„è·³è½¬æ˜¯åœ¨æäº¤æ•°æ®åè·³è½¬åˆ°æŒ‡å®šçš„URLï¼Œä½¿ç”¨actionå±æ€§ï¼Œå¦‚ä¸‹ï¼š 12&lt;form action=&quot;http://&quot;&gt;&lt;/form&gt; 2ã€ä¼ é€’æ•°æ®çš„æ–¹å¼è¡¨å•è·³è½¬ä¼ é€’æ•°æ®æ—¶å¯ä»¥è®¾ç½®ä¸€ä¸ªä¼ é€’æ–¹å¼ï¼Œä½¿ç”¨methodå¯ä»¥è®¾ç½®æ–¹å¼ä¸ºgetæˆ–è€…post,delate,putï¼š 12&lt;form action=&quot;http://&quot; method=&quot;get&quot;&gt;&lt;/form&gt; 3ã€è¡¨å•åç§°è¡¨å•å¯æ˜¯è®¾ç½®ä¸€ä¸ªåç§°ï¼Œé€šè¿‡nameå±æ€§æ¥è®¾ç½®ï¼š 12&lt;form name=&quot;my&quot; action=&quot;http://&quot; method=&quot;get&quot;&gt;&lt;/form&gt; äºŒã€è¾“å…¥è¡¨å•è¾“å…¥è¡¨å•ä½¿ç”¨åˆ›å»ºï¼Œå¿…é¡»åœ¨è¡¨å•å…ƒç´ ä¸­ 123&lt;form name=&quot;my&quot; action=&quot;http://&quot; method=&quot;get&quot;&gt;&lt;input/&gt;&lt;/form&gt; æ•ˆæœå¦‚ä¸‹ï¼š 1ã€è¾“å…¥æ–‡æœ¬æ¡†è¾“å…¥è¡¨å•æœ‰typeå±æ€§å¯ä»¥ç”¨æ¥è®¾ç½®ç±»å‹ï¼š 123&lt;form name=&quot;my&quot; action=&quot;http://&quot; method=&quot;get&quot;&gt;æ–‡æœ¬æ¡†&lt;input type=&quot;text&quot; name=&quot;æ–‡æœ¬æ¡†&quot;/&gt;&lt;!--name:è¡¨å•åç§°--&gt;&lt;/form&gt; æ•ˆæœå¦‚ä¸‹ï¼š 2ã€å¯†ç è¾“å…¥æ¡†123&lt;form name=&quot;my&quot; action=&quot;http://&quot; method=&quot;get&quot;&gt;å¯†ç æ¡†&lt;input type=&quot;password&quot; name=&quot;å¯†ç æ¡†&quot;/&gt;&lt;!--name:è¡¨å•åç§°--&gt;&lt;/form&gt; æ•ˆæœå¦‚ä¸‹ï¼š 3ã€è¾“å…¥å•é€‰æ¡†è®¾ç½®type=radioå¯ä»¥åˆ›å»ºå•é€‰æ¡†ï¼Œå•é€‰æ¡†éœ€è¦è®¾ç½®å‡ ä¸ªå±æ€§ï¼ŒåŒä¸€ç³»åˆ—çš„å•é€‰æ¡†å¿…é¡»æœ‰ç›¸åŒçš„nameå€¼ï¼Œä¸ç›¸åŒçš„valueå€¼ï¼Œå¯ä»¥é€šè¿‡æ·»åŠ checkedé”®å€¼æ¥è®¾ç½®é»˜è®¤é€‰ä¸­ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345&lt;form name=&quot;my&quot; action=&quot;http://&quot; method=&quot;get&quot;&gt;&lt;input type=&quot;radio&quot; name=&quot;æ€§åˆ«&quot; value=&quot;ç”·&quot; checked/&gt;ç”·&lt;br/&gt;&lt;input type=&quot;radio&quot; name=&quot;æ€§åˆ«&quot; value=&quot;å¥³&quot;/&gt;å¥³&lt;/form&gt; æ•ˆæœå¦‚ä¸‹ï¼š 4ã€è¾“å…¥å¤é€‰æ¡†å’Œå•é€‰æ¡†ç›¸ä¼¼ï¼Œå¯ä»¥ä½¿ç”¨type=checkboxåˆ›å»ºå¤é€‰æ¡†: 1234567&lt;body&gt;&lt;form name=&quot;my&quot; action=&quot;http://&quot; method=&quot;get&quot;&gt;&lt;input type=&quot;checkbox&quot; name=&quot;çˆ±å¥½&quot; value=&quot;HTML&quot; checked/&gt;HTML&lt;br/&gt;&lt;input type=&quot;checkbox&quot; name=&quot;çˆ±å¥½&quot; value=&quot;iOS&quot;/&gt;iOS&lt;br/&gt;&lt;input type=&quot;checkbox&quot; name=&quot;çˆ±å¥½&quot; value=&quot;android&quot;/&gt;android&lt;/form&gt; æ•ˆæœå¦‚ä¸‹ï¼š 5ã€æäº¤æŒ‰é’®ä½¿ç”¨type=submitæ¥åˆ›å»ºæäº¤æŒ‰é’®ï¼Œvalueå€¼ä¸ºæŒ‰é’®æ˜¾ç¤ºçš„æ–‡å­—ï¼š 1234567&lt;form name=&quot;my&quot; action=&quot;http://&quot; method=&quot;get&quot;&gt;&lt;input type=&quot;checkbox&quot; name=&quot;çˆ±å¥½&quot; value=&quot;HTML&quot; checked/&gt;HTML&lt;br/&gt;&lt;input type=&quot;checkbox&quot; name=&quot;çˆ±å¥½&quot; value=&quot;iOS&quot;/&gt;iOS&lt;br/&gt;&lt;input type=&quot;checkbox&quot; name=&quot;çˆ±å¥½&quot; value=&quot;android&quot;/&gt;android&lt;br/&gt;&lt;input type=&quot;submit&quot; value=&quot;æäº¤&quot;/&gt;&lt;/form&gt; æ•ˆæœå¦‚ä¸‹ï¼š 6ã€é‡ç½®æŒ‰é’®123456&lt;form name=&quot;my&quot; action=&quot;http://&quot; method=&quot;get&quot;&gt;&lt;input type=&quot;checkbox&quot; name=&quot;çˆ±å¥½&quot; value=&quot;HTML&quot; checked/&gt;HTML&lt;br/&gt;&lt;input type=&quot;checkbox&quot; name=&quot;çˆ±å¥½&quot; value=&quot;iOS&quot;/&gt;iOS&lt;br/&gt;&lt;input type=&quot;checkbox&quot; name=&quot;çˆ±å¥½&quot; value=&quot;android&quot;/&gt;android&lt;br/&gt;&lt;input type=&quot;reset&quot; value=&quot;é‡ç½®&quot;/&gt; æ•ˆæœå¦‚ä¸‹ï¼š ç‚¹å‡»é‡ç½®æŒ‰é’®åï¼Œè¾“å…¥çš„å†…å®¹ä¼šè¢«é‡ç½®ã€‚ 7ã€å›¾åƒæŒ‰é’®å›¾åƒæŒ‰é’®å’Œæ™®é€šæŒ‰é’®çš„ç”¨æ³•ç›¸ä¼¼ï¼Œè®¾ç½®type=imageå¯ä»¥åˆ›å»ºå›¾åƒæŒ‰é’®ï¼Œåªæ˜¯è¿™ä¸ªæŒ‰é’®å¤šäº†ä¸€ä¸ªsrcçš„å±æ€§ç”¨æ¥è®¾ç½®å›¾ç‰‡çš„è·¯å¾„åœ°å€ã€‚ ä¸‰ã€ä¸‹æ‹‰åˆ—è¡¨é€šè¿‡å’Œæ ‡ç­¾æ¥è®¾ç½®ä¸‹æ‹‰èœå•å’Œå…¶ä¸­çš„é€‰é¡¹ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567&lt;form name=&quot;my&quot; action=&quot;http://&quot; method=&quot;get&quot;&gt;&lt;select name=&quot;ä¸‹æ‹‰æ¡†&quot;&gt;&lt;option value=&quot;çˆ±å¥½&quot; selected&gt;HTML&lt;/option&gt;&lt;option value=&quot;çˆ±å¥½&quot;&gt;iOS&lt;/option&gt;&lt;option value=&quot;çˆ±å¥½&quot;&gt;android&lt;/option&gt;&lt;/select&gt;&lt;/form&gt; æ•ˆæœå¦‚ä¸‹ï¼š å››ã€æ–‡æœ¬è¾“å…¥æ¡†ä½¿ç”¨æ¥è®¾ç½®æ–‡æœ¬è¾“å…¥æ¡†ï¼Œå±æ€§rowså’Œcloså¯ä»¥åˆ†åˆ«è®¾ç½®è¾“å…¥æ¡†çš„è¡Œæ•°å’Œåˆ—æ•°ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234&lt;form name=&quot;my&quot; action=&quot;http://&quot; method=&quot;get&quot;&gt;&lt;textarea name=&quot;æ–‡æœ¬è¾“å…¥æ¡†&quot; rows=&quot;5&quot; cols=&quot;50&quot;&gt;&lt;/textarea&gt;&lt;/form&gt; æ•ˆæœå¦‚ä¸‹ï¼š ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"HTMLå­¦ä¹ ç¬”è®°","slug":"HTMLå­¦ä¹ ç¬”è®°","permalink":"http://huishao.cc/categories/HTMLå­¦ä¹ ç¬”è®°/"}],"tags":[],"keywords":[{"name":"HTMLå­¦ä¹ ç¬”è®°","slug":"HTMLå­¦ä¹ ç¬”è®°","permalink":"http://huishao.cc/categories/HTMLå­¦ä¹ ç¬”è®°/"}]},{"title":"æ ‡ç­¾ä¹‹ç¾ä¹â€”â€”åˆ—è¡¨","slug":"81æ ‡ç­¾ä¹‹ç¾ä¹â€”â€”åˆ—è¡¨","date":"2015-06-27T16:00:00.000Z","updated":"2021-06-30T11:00:26.230Z","comments":true,"path":"2015/06/28/81æ ‡ç­¾ä¹‹ç¾ä¹â€”â€”åˆ—è¡¨/","link":"","permalink":"http://huishao.cc/2015/06/28/81æ ‡ç­¾ä¹‹ç¾ä¹â€”â€”åˆ—è¡¨/","excerpt":"","text":"æ ‡ç­¾ä¹‹ç¾â€”â€”åˆ—è¡¨åˆ—è¡¨æ˜¯ç½‘é¡µæ’åºä¸­æ—¶å¸¸ä¼šç”¨åˆ°çš„ä¸€ä¸ªå…ƒç´ ã€‚ ä¸€ã€æ— åºåˆ—è¡¨1ã€æ— åºåˆ—è¡¨çš„æ ‡ç­¾æ— åºåˆ—è¡¨ä½¿ç”¨æ¥å®šä¹‰æ ‡ç­¾çš„å¼€å§‹å’Œç»“æŸã€‚ä½¿ç”¨æ¥è®¾ç½®æ ‡ç­¾é¡¹ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345&lt;body&gt;&lt;ul&gt;&lt;li&gt;title1&lt;/li&gt;&lt;li&gt;title2&lt;/li&gt;&lt;li&gt;title3&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt; æ•ˆæœå¦‚ä¸‹ï¼š 2ã€æ— åºåˆ—è¡¨æ ‡ç­¾çš„æ ·å¼æ ‡ç­¾çš„typeå±æ€§å¯ä»¥è®¾ç½®å…¶æ ·å¼ï¼š å®å¿ƒåœ†æ ·å¼ï¼šdiscè¿™ä¸ªæ ·å¼å°±æ˜¯é»˜è®¤çš„æ ·å¼ï¼Œæ•ˆæœå¦‚ä¸Šå›¾ ç©ºå¿ƒåœ†æ ·å¼ï¼šcircleç¤ºä¾‹å¦‚ä¸‹ï¼š 12345&lt;body&gt;&lt;ul type=&quot;circle&quot;&gt;&lt;li&gt;title1&lt;/li&gt;&lt;li&gt;title2&lt;/li&gt;&lt;li&gt;title3&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt; æ•ˆæœå¦‚ä¸‹ï¼š æ–¹å—æ ·å¼ï¼šsquareæ•ˆæœå¦‚ä¸‹ï¼š äºŒã€æœ‰åºåˆ—è¡¨1ã€æœ‰åºåˆ—è¡¨çš„æ ‡ç­¾æœ‰åºåˆ—è¡¨çš„å¼€å§‹å’Œç»“æŸä½¿ç”¨æ¥å®šä¹‰ï¼ŒåŒæ ·ä½¿ç”¨æ¥å®šä¹‰åˆ—è¡¨é¡¹ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345&lt;body&gt;&lt;ol type=&quot;square&quot;&gt;&lt;li&gt;title1&lt;/li&gt;&lt;li&gt;title2&lt;/li&gt;&lt;li&gt;title3&lt;/li&gt;&lt;/ol&gt;&lt;/body&gt; æ•ˆæœå¦‚ä¸‹ï¼š 2ã€æœ‰åºåˆ—è¡¨çš„æ ·å¼æ•°å­—æ ‡å·çš„æ ·å¼ï¼štype=1è¿™ä¸ªæ ·å¼ä¸ºé»˜è®¤çš„æ ·å¼ï¼Œæ•ˆæœå¦‚ä¸Šã€‚ å¤§å†™å­—æ¯çš„æ ‡ç­¾ï¼štype=Aæ•ˆæœå¦‚ä¸‹ï¼š å°å†™å­—æ¯æ ·å¼ï¼štype=a å¤§å†™ç½—é©¬æ•°å­—æ ·å¼ï¼štype=I å°å†™ç½—é©¬æ•°å­—æ ·å¼ï¼štype=i ä¸‰ã€åˆ—è¡¨çš„åµŒå¥—åˆ—è¡¨å¯ä»¥è¿›è¡ŒåµŒå¥—ï¼Œå½¢å¼å¦‚ä¸‹ï¼š 123456789&lt;body&gt;&lt;ol type=&quot;i&quot;&gt;&lt;li&gt;title1&lt;/li&gt;&lt;ul type=&quot;disc&quot;&gt;&lt;li&gt;subTitle1&lt;/li&gt;&lt;li&gt;subTitle2&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;title2&lt;/li&gt;&lt;li&gt;title3&lt;/li&gt;&lt;/ol&gt;&lt;/body&gt; æ•ˆæœå¦‚ä¸‹ï¼š ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"HTMLå­¦ä¹ ç¬”è®°","slug":"HTMLå­¦ä¹ ç¬”è®°","permalink":"http://huishao.cc/categories/HTMLå­¦ä¹ ç¬”è®°/"}],"tags":[],"keywords":[{"name":"HTMLå­¦ä¹ ç¬”è®°","slug":"HTMLå­¦ä¹ ç¬”è®°","permalink":"http://huishao.cc/categories/HTMLå­¦ä¹ ç¬”è®°/"}]},{"title":"Swiftå­¦ä¹ ç¬¬äºŒç»ƒâ€”â€”Swifté¡¹ç›®æ—¶å…‰ç”µå½±","slug":"80Swiftå­¦ä¹ ç¬¬äºŒç»ƒâ€”â€”Swifté¡¹ç›®æ—¶å…‰ç”µå½±","date":"2015-06-27T16:00:00.000Z","updated":"2021-06-30T10:59:21.664Z","comments":true,"path":"2015/06/28/80Swiftå­¦ä¹ ç¬¬äºŒç»ƒâ€”â€”Swifté¡¹ç›®æ—¶å…‰ç”µå½±/","link":"","permalink":"http://huishao.cc/2015/06/28/80Swiftå­¦ä¹ ç¬¬äºŒç»ƒâ€”â€”Swifté¡¹ç›®æ—¶å…‰ç”µå½±/","excerpt":"","text":"Swiftå­¦ä¹ ç¬¬äºŒç»ƒâ€”â€”Swifté¡¹ç›®æ—¶å…‰ç”µå½±å¾ˆæ—©ä»¥å‰çš„ä¸€ä¸ªOCçš„ç»ƒä¹ é¡¹ç›®ï¼Œç”¨swifté‡æ–°å†™äº†ä¸€éï¼Œå› ä¸ºxcodeç‰ˆæœ¬çš„æ›´æ–°å¯¹swiftçš„å…¼å®¹åº¦ä¹Ÿåœ¨ä¸æ–­æ”¹å˜ï¼Œæ­¤ç‰ˆæœ¬é€‚ç”¨äºxcode6.1ã€‚ è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œç”¨swiftå°†iOSå®˜æ–¹SDKä¸­çš„HTTPè¿›è¡Œäº†å°è£…ï¼Œä½¿ç”¨äº†swiftç¼–å†™çš„å¼‚æ­¥åŠ è½½ç½‘ç»œå›¾ç‰‡çš„æ–¹æ³•ã€‚ç»ƒä¹ äº†ç”¨swiftæ“ä½œç•Œé¢å¸ƒå±€ï¼Œè·³è½¬ç•Œé¢ç­‰çš„æ–¹æ³•ã€‚ ä¸‹é¢æ˜¯å°è£…çš„ä¸‹è½½ç±»çš„æ ¸å¿ƒä»£ç ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364private var httpConnection:NSURLConnection?class ZYHHttpRequset: NSObject,NSURLConnectionDataDelegate&#123; var requestUrl:String? var downloadData:NSMutableData=NSMutableData() var isDownloadSuccess:Bool? var delegate:ZYHHttpRequestDelegate? class func requestFormUrl(url:NSString)-&gt;ZYHHttpRequset&#123; var oldRequest:ZYHHttpRequset?=ZYHHttpRequestManager.sharedHttpRequestManager().requestForKey(url) if (oldRequest != nil)&#123; println(&quot;è¯¥ä»»åŠ¡å­˜åœ¨&quot;) return oldRequest! &#125; //æ–°å»ºä¸‹è½½ä»»åŠ¡ var request:ZYHHttpRequset=ZYHHttpRequset() request.requestUrl=url request.startRequestUrl(url) ZYHHttpRequestManager.sharedHttpRequestManager().addTask(request, key: url) return request &#125; func stop()&#123; if httpConnection != nil &#123; httpConnection?.cancel() httpConnection = nil &#125; &#125; //å¼€å§‹ä¸‹è½½è¯·æ±‚ private func startRequestUrl(url:NSString)&#123; if httpConnection != nil &#123; httpConnection!.cancel() httpConnection==nil &#125; //åˆ›å»ºè¿æ¥å¯¹è±¡ var request=NSURLRequest(URL: NSURL(string: url)!) httpConnection=NSURLConnection(request: request, delegate: self) &#125; //é‡å†™åè®®ä¸­çš„æ–¹æ³• func connection(connection: NSURLConnection, didReceiveResponse response: NSURLResponse) &#123; downloadData.length=0 &#125; func connection(connection: NSURLConnection, didReceiveData data: NSData) &#123; downloadData.appendData(data) &#125; func connectionDidFinishLoading(connection: NSURLConnection) &#123; isDownloadSuccess = true delegate!.ZYHHttpRequestSuccsee(self) ZYHHttpRequestManager.sharedHttpRequestManager().removeTaskFromUrl(self.requestUrl!) &#125; func connection(connection: NSURLConnection, didFailWithError error: NSError) &#123; println(&quot;åŠ è½½å¤±è´¥&quot;) println(error) self.isDownloadSuccess=false ZYHHttpRequestManager.sharedHttpRequestManager().removeTaskFromUrl(self.requestUrl!) &#125; &#125;protocol ZYHHttpRequestDelegate&#123; func ZYHHttpRequestSuccsee(request:ZYHHttpRequset)&#125; é¡¹ç›®éƒ¨åˆ†æˆªå›¾ï¼š githubæºç åœ°å€ï¼šhttps://github.com/ZYHshao/SwiftMovie å…¶ä¸­é”™è¯¯ä¹‹å¤„ï¼Œæ¬¢è¿æŒ‡æ•™ï¼Œå¸Œæœ›åœ¨äº¤æµä¸­ï¼Œä¸æ–­è¿›æ­¥ï¼ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"COME ON SWIFT","slug":"COME-ON-SWIFT","permalink":"http://huishao.cc/categories/COME-ON-SWIFT/"}],"tags":[],"keywords":[{"name":"COME ON SWIFT","slug":"COME-ON-SWIFT","permalink":"http://huishao.cc/categories/COME-ON-SWIFT/"}]},{"title":"iOSå¼€å‘swiftç‰ˆå¼‚æ­¥åŠ è½½ç½‘ç»œå›¾ç‰‡(å¸¦ç¼“å­˜å’Œç¼ºçœå›¾ç‰‡)","slug":"79iOSå¼€å‘swiftç‰ˆå¼‚æ­¥åŠ è½½ç½‘ç»œå›¾ç‰‡(å¸¦ç¼“å­˜å’Œç¼ºçœå›¾ç‰‡)","date":"2015-06-24T16:00:00.000Z","updated":"2021-06-30T10:01:36.971Z","comments":true,"path":"2015/06/25/79iOSå¼€å‘swiftç‰ˆå¼‚æ­¥åŠ è½½ç½‘ç»œå›¾ç‰‡(å¸¦ç¼“å­˜å’Œç¼ºçœå›¾ç‰‡)/","link":"","permalink":"http://huishao.cc/2015/06/25/79iOSå¼€å‘swiftç‰ˆå¼‚æ­¥åŠ è½½ç½‘ç»œå›¾ç‰‡(å¸¦ç¼“å­˜å’Œç¼ºçœå›¾ç‰‡)/","excerpt":"","text":"iOSå¼€å‘ä¹‹swiftç‰ˆå¼‚æ­¥åŠ è½½ç½‘ç»œå›¾ç‰‡ä¸SDWebImageå¼‚æ­¥åŠ è½½ç½‘ç»œå›¾ç‰‡çš„åŠŸèƒ½ç›¸ä¼¼ï¼Œåªæ˜¯ä»£ç æ¯”è¾ƒç®€å•ï¼ŒåŠŸèƒ½æ²¡æœ‰SDçš„å®Œå–„ä¸å¼ºå¤§ï¼Œæ”¯æŒç¼ºçœæ·»åŠ å›¾ç‰‡ï¼Œæ”¯æŒæœ¬åœ°ç¼“å­˜ã€‚ å¼‚æ­¥åŠ è½½å›¾ç‰‡çš„æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354 func setZYHWebImage(url:NSString?, defaultImage:NSString?, isCache:Bool)&#123; var ZYHImage:UIImage? if url == nil &#123; return &#125; //è®¾ç½®é»˜è®¤å›¾ç‰‡ if defaultImage != nil &#123; self.image=UIImage(named: defaultImage!) &#125; //æ˜¯å¦è¿›è¡Œç¼“å­˜å¤„ç† if isCache &#123; //ç¼“å­˜ç®¡ç†ç±» var data:NSData?=ZYHWebImageChcheCenter.readCacheFromUrl(url!) if data != nil &#123; ZYHImage=UIImage(data: data!) self.image=ZYHImage &#125;else&#123; //è·å–å¼‚æ­¥çº¿ç¨‹ var dispath=dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0) dispatch_async(dispath, &#123; () -&gt; Void in var URL:NSURL = NSURL(string: url!)! var data:NSData?=NSData(contentsOfURL: URL) if data != nil &#123; ZYHImage=UIImage(data: data!) //å†™ç¼“å­˜ ZYHWebImageChcheCenter.writeCacheToUrl(url!, data: data!) //ä¸»çº¿ç¨‹ä¸­åˆ·æ–°UI dispatch_async(dispatch_get_main_queue(), &#123; () -&gt; Void in //åˆ·æ–°ä¸»UI self.image=ZYHImage &#125;) &#125; &#125;) &#125; &#125;else&#123; var dispath=dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0) dispatch_async(dispath, &#123; () -&gt; Void in var URL:NSURL = NSURL(string: url!)! var data:NSData?=NSData(contentsOfURL: URL) if data != nil &#123; ZYHImage=UIImage(data: data!) //å†™ç¼“å­˜ dispatch_async(dispatch_get_main_queue(), &#123; () -&gt; Void in //åˆ·æ–°ä¸»UI self.image=ZYHImage &#125;) &#125; &#125;) &#125; &#125; &#125; ç¼“å­˜çš„å¤„ç†è¿™é‡Œé‡‡ç”¨çš„æ˜¯å†™æ–‡ä»¶çš„æ–¹å¼ï¼Œé€šè¿‡æ–‡ä»¶åæ¥å¯¹ç¼“å­˜è¿›è¡Œç®¡ç†ï¼Œè¿™ä¸ªæ¡†æ¶è¿˜ä¸å®Œå–„ï¼Œåé¢ä¼šåŠ å…¥ç¼“å­˜æ¸…é™¤ç­‰åŠŸèƒ½ã€‚ç¼“å­˜çš„æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839class func readCacheFromUrl(url:NSString)-&gt;NSData?&#123; var data:NSData? var path:NSString=ZYHWebImageChcheCenter.getFullCachePathFromUrl(url) if NSFileManager.defaultManager().fileExistsAtPath(path) &#123; data=NSData.dataWithContentsOfMappedFile(path) as? NSData &#125; return data &#125; class func writeCacheToUrl(url:NSString, data:NSData)&#123; var path:NSString=ZYHWebImageChcheCenter.getFullCachePathFromUrl(url) println(data.writeToFile(path, atomically: true)) &#125; //è®¾ç½®ç¼“å­˜è·¯å¾„ class func getFullCachePathFromUrl(url:NSString)-&gt;NSString&#123; var chchePath=NSHomeDirectory().stringByAppendingString(&quot;/Library/Caches/MyCache&quot;) var fileManager:NSFileManager=NSFileManager.defaultManager() fileManager.fileExistsAtPath(chchePath) if !(fileManager.fileExistsAtPath(chchePath)) &#123; fileManager.createDirectoryAtPath(chchePath, withIntermediateDirectories: true, attributes: nil, error: nil) &#125; //è¿›è¡Œå­—ç¬¦ä¸²å¤„ç† var newURL:NSString newURL=ZYHWebImageChcheCenter.stringToZYHString(url) chchePath=chchePath.stringByAppendingFormat(&quot;/%@&quot;, newURL) return chchePath &#125; class func stringToZYHString(str:NSString)-&gt;NSString&#123; var newStr:NSMutableString=NSMutableString() for var i:NSInteger=0; i &lt; str.length; i++ &#123; var c:unichar=str.characterAtIndex(i) if (c&gt;=48&amp;&amp;c&lt;=57)||(c&gt;=65&amp;&amp;c&lt;=90)||(c&gt;=97&amp;&amp;c&lt;=122)&#123; newStr.appendFormat(&quot;%c&quot;, c) &#125; &#125; return newStr.copy() as NSString &#125; æ¡†æ¶çš„githubåœ°å€ï¼Œæ¬¢è¿æŒ‡æ­£ä¸æ‰©å±•ï¼šhttps://github.com/ZYHshao/swift-ZYHWebImage å› xcodeçš„ç‰ˆæœ¬ä¸åŒï¼Œswiftè¯­è¨€è¯­æ³•éšç¯å¢ƒæ—¶å¸¸ä¼šå˜åŒ–ï¼Œæ­¤ç‰ˆæœ¬åœ¨6.1ä¸­å¯ç”¨ï¼Œæ›´é«˜ç‰ˆæœ¬ä¸­éœ€è¦ä¿®æ”¹å°‘éƒ¨åˆ†å³å¯ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"COME ON SWIFT","slug":"COME-ON-SWIFT","permalink":"http://huishao.cc/categories/COME-ON-SWIFT/"}],"tags":[],"keywords":[{"name":"COME ON SWIFT","slug":"COME-ON-SWIFT","permalink":"http://huishao.cc/categories/COME-ON-SWIFT/"}]},{"title":"iOSä¸­UIWebViewçš„ä½¿ç”¨è¯¦è§£","slug":"78iOSä¸­UIWebViewçš„ä½¿ç”¨è¯¦è§£","date":"2015-06-22T16:00:00.000Z","updated":"2021-06-30T10:00:15.618Z","comments":true,"path":"2015/06/23/78iOSä¸­UIWebViewçš„ä½¿ç”¨è¯¦è§£/","link":"","permalink":"http://huishao.cc/2015/06/23/78iOSä¸­UIWebViewçš„ä½¿ç”¨è¯¦è§£/","excerpt":"","text":"iOSä¸­UIWebViewçš„ä½¿ç”¨è¯¦è§£ä¸€ã€åˆå§‹åŒ–ä¸ä¸‰ç§åŠ è½½æ–¹å¼UIWebViewç»§æ‰¿ä¸UIViewï¼Œå› æ­¤ï¼Œå…¶åˆå§‹åŒ–æ–¹æ³•å’Œä¸€èˆ¬çš„viewä¸€æ ·ï¼Œé€šè¿‡allocå’Œinitè¿›è¡Œåˆå§‹åŒ–ï¼Œå…¶åŠ è½½æ•°æ®çš„æ–¹å¼æœ‰ä¸‰ç§ï¼š ç¬¬ä¸€ç§ï¼š - (void)loadRequest:(NSURLRequest *)request; è¿™æ˜¯åŠ è½½ç½‘é¡µæœ€å¸¸ç”¨çš„ä¸€ç§æ–¹å¼ï¼Œé€šè¿‡ä¸€ä¸ªç½‘é¡µURLæ¥è¿›è¡ŒåŠ è½½ï¼Œè¿™ä¸ªURLå¯ä»¥æ˜¯è¿œç¨‹çš„ä¹Ÿå¯ä»¥æ˜¯æœ¬åœ°çš„ï¼Œä¾‹å¦‚æˆ‘åŠ è½½ç™¾åº¦çš„ä¸»é¡µï¼š 123 UIWebView * view = [[UIWebView alloc]initWithFrame:self.view.frame]; [view loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@&quot;http://www.baidu.com&quot;]]]; [self.view addSubview:view]; ä¼šå¾—åˆ°å¦‚ä¸‹çš„æ•ˆæœï¼š ç¬¬äºŒç§ï¼š - (void)loadHTMLString:(NSString )string baseURL:(NSURL )baseURL; è¿™ä¸ªæ–¹æ³•éœ€è¦å°†httmlæ–‡ä»¶è¯»å–ä¸ºå­—ç¬¦ä¸²ï¼Œå…¶ä¸­baseURLæ˜¯æˆ‘ä»¬è‡ªå·±è®¾ç½®çš„ä¸€ä¸ªè·¯å¾„ï¼Œç”¨äºå¯»æ‰¾htmlæ–‡ä»¶ä¸­å¼•ç”¨çš„å›¾ç‰‡ç­‰ç´ æã€‚ ç¬¬ä¸‰ç§ï¼š - (void)loadData:(NSData )data MIMEType:(NSString )MIMEType textEncodingName:(NSString )textEncodingName baseURL:(NSURL )baseURL; è¿™ä¸ªæ–¹å¼ä½¿ç”¨çš„æ¯”è¾ƒå°‘ï¼Œä½†ä¹Ÿæ›´åŠ è‡ªç”±ï¼Œå…¶ä¸­dataæ˜¯æ–‡ä»¶æ•°æ®ï¼ŒMIMETypeæ˜¯æ–‡ä»¶ç±»å‹ï¼ŒtextEncodingNameæ˜¯ç¼–ç ç±»å‹ï¼ŒbaseURLæ˜¯ç´ æèµ„æºè·¯å¾„ã€‚ äºŒã€ä¸€äº›å¸¸ç”¨çš„å±æ€§å’Œå˜é‡@property (nonatomic, assign) id &lt;UIWebViewDelegate> delegate; è®¾ç½®webViewçš„ä»£ç† @property (nonatomic, readonly, retain) UIScrollView *scrollView; å†…ç½®çš„scrollView @property (nonatomic, readonly, retain) NSURLRequest *request; URLè¯·æ±‚ - (void)reload; é‡æ–°åŠ è½½æ•°æ® - (void)stopLoading; åœæ­¢åŠ è½½æ•°æ® - (void)goBack; è¿”å›ä¸Šä¸€çº§ - (void)goForward; è·³è½¬ä¸‹ä¸€çº§ @property (nonatomic, readonly, getter=canGoBack) BOOL canGoBack; è·å–èƒ½å¦è¿”å›ä¸Šä¸€çº§ @property (nonatomic, readonly, getter=canGoForward) BOOL canGoForward; è·å–èƒ½å¦è·³è½¬ä¸‹ä¸€çº§ @property (nonatomic, readonly, getter=isLoading) BOOL loading; è·å–æ˜¯å¦æ­£åœ¨åŠ è½½æ•°æ® - (NSString )stringByEvaluatingJavaScriptFromString:(NSString )script; é€šè¿‡javaScriptæ“ä½œwebæ•°æ® @property (nonatomic) BOOL scalesPageToFit; è®¾ç½®æ˜¯å¦ç¼©æ”¾åˆ°é€‚åˆå±å¹•å¤§å° @property (nonatomic) UIDataDetectorTypes dataDetectorTypes NS_AVAILABLE_IOS(3_0); è®¾ç½®æŸäº›æ•°æ®å˜ä¸ºé“¾æ¥å½¢å¼ï¼Œè¿™ä¸ªæšä¸¾å¯ä»¥è®¾ç½®å¦‚ç”µè¯å·ï¼Œåœ°å€ï¼Œé‚®ç®±ç­‰è½¬åŒ–ä¸ºé“¾æ¥ @property (nonatomic) BOOL allowsInlineMediaPlayback NS_AVAILABLE_IOS(4_0); è®¾ç½®æ˜¯å¦ä½¿ç”¨å†…è”æ’­æ”¾å™¨æ’­æ”¾è§†é¢‘ @property (nonatomic) BOOL mediaPlaybackRequiresUserAction NS_AVAILABLE_IOS(4_0); è®¾ç½®è§†é¢‘æ˜¯å¦è‡ªåŠ¨æ’­æ”¾ @property (nonatomic) BOOL mediaPlaybackAllowsAirPlay NS_AVAILABLE_IOS(5_0); è®¾ç½®éŸ³é¢‘æ’­æ”¾æ˜¯å¦æ”¯æŒari playåŠŸèƒ½ @property (nonatomic) BOOL suppressesIncrementalRendering NS_AVAILABLE_IOS(6_0); è®¾ç½®æ˜¯å¦å°†æ•°æ®åŠ è½½å¦‚å†…å­˜åæ¸²æŸ“ç•Œé¢ @property (nonatomic) BOOL keyboardDisplayRequiresUserAction NS_AVAILABLE_IOS(6_0); è®¾ç½®ç”¨æˆ·äº¤äº’æ¨¡å¼ ä¸‰ã€iOS7ä¸­çš„ä¸€äº›æ–°ç‰¹æ€§ä¸‹é¢è¿™äº›å±æ€§æ˜¯iOS7ä¹‹åæ‰æœ‰çš„ï¼Œé€šè¿‡ä»–ä»¬å¯ä»¥è®¾ç½®æ›´åŠ æœ‰è¶£çš„webä½“éªŒ @property (nonatomic) UIWebPaginationMode paginationMode NS_AVAILABLE_IOS(7_0); è¿™ä¸ªå±æ€§ç”¨æ¥è®¾ç½®ä¸€ç§æ¨¡å¼ï¼Œå½“ç½‘é¡µçš„å¤§å°è¶…å‡ºviewæ—¶ï¼Œå°†ç½‘é¡µä»¥ç¿»é¡µçš„æ•ˆæœå±•ç¤ºï¼Œæšä¸¾å¦‚ä¸‹ï¼š 1234567typedef NS_ENUM(NSInteger, UIWebPaginationMode) &#123; UIWebPaginationModeUnpaginated,//ä¸ä½¿ç”¨ç¿»é¡µæ•ˆæœ UIWebPaginationModeLeftToRight,//å°†ç½‘é¡µè¶…å‡ºéƒ¨åˆ†åˆ†é¡µï¼Œä»å·¦å‘å³è¿›è¡Œç¿»é¡µ UIWebPaginationModeTopToBottom,//å°†ç½‘é¡µè¶…å‡ºéƒ¨åˆ†åˆ†é¡µï¼Œä»ä¸Šå‘ä¸‹è¿›è¡Œç¿»é¡µ UIWebPaginationModeBottomToTop,//å°†ç½‘é¡µè¶…å‡ºéƒ¨åˆ†åˆ†é¡µï¼Œä»ä¸‹å‘ä¸Šè¿›è¡Œç¿»é¡µ UIWebPaginationModeRightToLeft//å°†ç½‘é¡µè¶…å‡ºéƒ¨åˆ†åˆ†é¡µï¼Œä»å³å‘å·¦è¿›è¡Œç¿»é¡µ&#125;; @property (nonatomic) CGFloat pageLength NS_AVAILABLE_IOS(7_0); è®¾ç½®æ¯ä¸€é¡µçš„é•¿åº¦ @property (nonatomic) CGFloat gapBetweenPages NS_AVAILABLE_IOS(7_0); è®¾ç½®æ¯ä¸€é¡µçš„é—´è· @property (nonatomic, readonly) NSUInteger pageCount NS_AVAILABLE_IOS(7_0); è·å–åˆ†é¡µæ•° å››ã€webViewåè®®ä¸­çš„æ–¹æ³•- (BOOL)webView:(UIWebView )webView shouldStartLoadWithRequest:(NSURLRequest )request navigationType:(UIWebViewNavigationType)navigationType; å‡†å¤‡åŠ è½½å†…å®¹æ—¶è°ƒç”¨çš„æ–¹æ³•ï¼Œé€šè¿‡è¿”å›å€¼æ¥è¿›è¡Œæ˜¯å¦åŠ è½½çš„è®¾ç½® - (void)webViewDidStartLoad:(UIWebView *)webView; å¼€å§‹åŠ è½½æ—¶è°ƒç”¨çš„æ–¹æ³• - (void)webViewDidFinishLoad:(UIWebView *)webView; ç»“æŸåŠ è½½æ—¶è°ƒç”¨çš„æ–¹æ³• - (void)webView:(UIWebView )webView didFailLoadWithError:(NSError )error; åŠ è½½å¤±è´¥æ—¶è°ƒç”¨çš„æ–¹æ³• ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"Swiftå­¦ä¹ ç¬¬ä¸€ç»ƒâ€”â€”ç”¨Swiftå®ç°çš„FlappyBirdå°æ¸¸æˆ","slug":"77Swiftå­¦ä¹ ç¬¬ä¸€ç»ƒâ€”â€”ç”¨Swiftå®ç°çš„FlappyBirdå°æ¸¸æˆ","date":"2015-06-10T16:00:00.000Z","updated":"2021-06-30T09:59:10.108Z","comments":true,"path":"2015/06/11/77Swiftå­¦ä¹ ç¬¬ä¸€ç»ƒâ€”â€”ç”¨Swiftå®ç°çš„FlappyBirdå°æ¸¸æˆ/","link":"","permalink":"http://huishao.cc/2015/06/11/77Swiftå­¦ä¹ ç¬¬ä¸€ç»ƒâ€”â€”ç”¨Swiftå®ç°çš„FlappyBirdå°æ¸¸æˆ/","excerpt":"","text":"ç”¨Swiftå®ç°çš„FlappyBirdå°æ¸¸æˆ ä¼´éšç€appleå…¬å¸å¯¹swiftçš„æ¨å¹¿æ€åº¦æ·±å…¥ï¼Œswiftç«çš„å¾ˆå¿«ï¼Œå¹¶ä¸”swiftç²¾ç®€ä¾¿æ·çš„è¯­æ³•å’Œå¼ºå¤§çš„åŠŸèƒ½ï¼Œå¯¹äºä½¿ç”¨Objectâ€”Cå¼€å‘iOSçš„å¼€å‘è€…æ¥è¯´ï¼Œä¹Ÿæœ‰å¿…è¦äº†è§£å­¦ä¹ ä¸€ä¸‹swiftã€‚è¿™ç¯‡åšå®¢è·³è¿‡swiftå¹²æ¶©çš„è¯­æ³•ï¼Œç›´æ¥ä»ä¸€ä¸ªå°æ¸¸æˆé¡¹ç›®å¼€å§‹ä½¿ç”¨swiftï¼Œå°†å…¶ä¸­æ”¶è·æ€»ç»“å¦‚ä¸‹ï¼š FlappyBirdæ˜¯å‰æ®µæ—¶é—´å¾ˆç«çš„ä¸€æ¬¾å°æ¸¸æˆï¼Œé€šè¿‡æ‰‹æŒ‡ç‚¹å‡»å±å¹•å¹³è¡¡å°é¸Ÿé€šè¿‡éšœç¢ã€‚æˆ‘æ˜¯å°†ä»¥å‰OCç‰ˆçš„é¡¹ç›®æ‹¿æ¥æ”¹æˆäº†swiftï¼Œæ‰€ä»¥æ•´ä½“çš„æ€è·¯è¿˜æ˜¯OCçš„å¼€å‘æ€è·¯ã€‚ é¦–å…ˆï¼Œæˆ‘éœ€è¦å®šä¹‰ä¸¤ä¸ªå®ï¼Œä¸€ä¸ªç”¨æ¥æ¨¡æ‹Ÿé‡åŠ›åŠ é€Ÿåº¦Gï¼Œä¸€ä¸ªç”¨æ¥ä¾¿æ·è·å–è®¾å¤‡å±å¹•å°ºå¯¸ã€‚å› ä¸ºè¿™ä¸ªæ¸¸æˆéå¸¸ç®€å•ï¼Œå¼€å‘èµ·æ¥ä¹Ÿåªéœ€è¦å‡ ä¸ªå°æ—¶ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­å†™ä»£ç ï¼šviewController.swiftã€‚ swiftä¸­æ²¡æœ‰ä¸€èˆ¬è¯­è¨€ä¸­çš„å®å®šä¹‰ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡å®šä¹‰å¸¸é‡çš„å½¢å¼å®ç°å®çš„æ•ˆæœï¼š 123//ç”¨å¸¸é‡çš„å½¢å¼ä»£ç†OCä¸­çš„å®å®šä¹‰let G:Float=9.8let SCREEN_SIZE = UIScreen.mainScreen().bounds æˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€äº›æˆå‘˜å˜é‡ï¼Œå¦‚ä¸‹ï¼š 12345678910class ViewController: UIViewController &#123; var timer:NSTimer?//èƒŒæ™¯ç§»åŠ¨çš„å®šæ—¶å™¨ var i:Int=0//èƒŒæ™¯ç§»åŠ¨çš„é€Ÿåº¦ var timer2:NSTimer?//æŸ±å­å’Œåœ°é¢ç§»åŠ¨çš„å®šæ—¶å™¨ var timer3:NSTimer?//å°é¸Ÿç§»åŠ¨çš„å®šæ—¶å™¨ var bird:UIImageView? var t:Float=0.0//å°é¸Ÿä¸‹è½çš„é€Ÿåº¦ var isDowm:Bool=false//æ ‡è®°å°é¸Ÿæ˜¯å¦åœ¨ä¸‹è½ var isGameOver:Bool=false//æ ‡è®°æ˜¯å¦æ¸¸æˆç»“æŸ&#125; å¯¹äºï¼Ÿå’Œï¼å·çš„ç†è§£ï¼Œç½‘ä¸Šæ¦‚å¿µå¾ˆå¤šï¼Œç®€å•ç†è§£å£°æ˜å˜é‡æ—¶å¦‚æœä¸åˆå§‹åŒ–ç³»ç»Ÿæ˜¯ä¸ä¼šç»™å˜é‡èµ‹nilçš„ï¼Œä¼šæŠ¥é”™ï¼Œï¼Ÿçš„ä½œç”¨å°±æ˜¯å‘Šè¯‰ç³»ç»Ÿè¿™é‡Œå¦‚æœæ²¡æœ‰åˆå§‹åŒ–å°±æ˜¯nilã€‚åŒç†ï¼Œåœ¨ç”¨è¿™ç±»å˜é‡çš„æ—¶å€™ï¼Œä¹Ÿéœ€è¦åŠ ä¸Šï¼Ÿè§£åŒ…ï¼Œå¦‚æœåŠ ï¼å°±æ˜¯å¼ºåˆ¶è§£åŒ…ï¼Œå¯ä»¥ç†è§£ä¸ºè®©ç³»ç»Ÿè®¤ä¸ºè¿™ä¸ªå˜é‡ä¸€å®šä¸æ˜¯nilã€‚ å¯¹äºUIçš„åˆ›å»ºç­‰éƒ¨åˆ†å‡½æ•°å’ŒOCä¸€æ ·ï¼Œåªæ˜¯è°ƒç”¨çš„æ–¹å¼ç•¥æœ‰ä¸åŒï¼Œåé¢ä¼šé™„ä¸Šæºç ã€‚ åœ¨æ§åˆ¶å°é¸Ÿä¸‹è½çš„éƒ¨åˆ†ä»£ç å¦‚ä¸‹ï¼Œå…¶ä¸­æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œåœ¨swiftä¸­æ²¡æœ‰éšå¼è½¬æ¢è¿™ä¸ªæ¦‚å¿µï¼Œæ¯”å¦‚ä½ è¦ä½¿ç”¨int a + float b ä½ å¿…é¡»æ‰‹åŠ¨å°†intè½¬ä¸ºfloat:(Float)(a)+b 12345678910111213141516171819func birdMove()&#123; if !isDowm&#123; if bird?.frame.origin.y &lt; SCREEN_SIZE.height-100&#123; var rant:CGRect=bird!.frame rant.origin.y += (CGFloat)(G*(t*t/2)) bird?.frame=rant t+=0.025 &#125; &#125;else&#123; if t&lt;0.24&#123; var rant = bird?.frame rant?.origin.y -= 4.9-(CGFloat)(G*t*t/2) bird?.frame=rant! t+=0.025 &#125;else&#123; isDowm=false &#125; &#125; &#125; æ¸¸æˆæ•ˆæœå›¾å¦‚ä¸‹ï¼š æˆ‘ç›¸ä¿¡ï¼Œå®è·µæ˜¯å­¦ä¹ çš„å¿…ç»é€”å¾„ï¼Œå¸Œæœ›ä¸å¿—åŒé“åˆçš„æœ‹å‹ï¼Œä¸€èµ·è¿›æ­¥ã€‚ é¡¹ç›®githubåœ°å€ï¼šhttps://github.com/ZYHshao/swiftFlappyBird ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"COME ON SWIFT","slug":"COME-ON-SWIFT","permalink":"http://huishao.cc/categories/COME-ON-SWIFT/"}],"tags":[],"keywords":[{"name":"COME ON SWIFT","slug":"COME-ON-SWIFT","permalink":"http://huishao.cc/categories/COME-ON-SWIFT/"}]},{"title":"iOSé€‰æ‹©å™¨è§†å›¾æ§ä»¶(UIPickerView)ä½¿ç”¨æ–¹æ³•æ€»ç»“","slug":"76iOSé€‰æ‹©å™¨è§†å›¾æ§ä»¶(UIPickerView)ä½¿ç”¨æ–¹æ³•æ€»ç»“","date":"2015-06-09T16:00:00.000Z","updated":"2021-06-30T09:57:24.304Z","comments":true,"path":"2015/06/10/76iOSé€‰æ‹©å™¨è§†å›¾æ§ä»¶(UIPickerView)ä½¿ç”¨æ–¹æ³•æ€»ç»“/","link":"","permalink":"http://huishao.cc/2015/06/10/76iOSé€‰æ‹©å™¨è§†å›¾æ§ä»¶(UIPickerView)ä½¿ç”¨æ–¹æ³•æ€»ç»“/","excerpt":"","text":"iOSä¸­UIPickerViewä½¿ç”¨æ€»ç»“UIPickerViewæ˜¯iOSä¸­çš„åŸç”Ÿé€‰æ‹©å™¨æ§ä»¶ï¼Œä½¿ç”¨æ–¹ä¾¿ï¼Œç”¨æ³•ç®€å•ï¼Œæ•ˆæœæ¼‚äº®ã€‚ @property(nonatomic,assign) id&lt;UIPickerViewDataSource> dataSource; @property(nonatomic,assign) id&lt;UIPickerViewDelegate> delegate; è®¾ç½®æ•°æ®æºå’Œä»£ç† @property(nonatomic) BOOL showsSelectionIndicator; æ˜¯å¦æ˜¾ç¤ºé€‰æ‹©æ¡†ï¼Œåœ¨iOS7ä¹‹åè¿™ä¸ªå±æ€§æ²¡æœ‰ä»»ä½•æ•ˆæœ @property(nonatomic,readonly) NSInteger numberOfComponents; è·å–åˆ†åŒºæ•° - (NSInteger)numberOfRowsInComponent:(NSInteger)component; è·å–æŸä¸€åˆ†åŒºçš„è¡Œæ•° - (CGSize)rowSizeForComponent:(NSInteger)component; è·å–æŸä¸€åˆ†åŒºè¡Œçš„å°ºå¯¸ - (UIView *)viewForRow:(NSInteger)row forComponent:(NSInteger)component; è·å–æŸä¸€åˆ†åŒºæŸä¸€è¡Œçš„è§†å›¾ - (void)reloadAllComponents; é‡è½½æ‰€æœ‰åˆ†åŒº - (void)reloadComponent:(NSInteger)component; é‡è½½æŸä¸€åˆ†åŒº - (void)selectRow:(NSInteger)row inComponent:(NSInteger)component animated:(BOOL)animated; è®¾ç½®é€‰ä¸­æŸä¸€åˆ†åŒºæŸä¸€è¡Œ - (NSInteger)selectedRowInComponent:(NSInteger)component; è¿”å›æŸä¸€åˆ†åŒºé€‰ä¸­çš„è¡Œ æ•°æ®æºä»£ç†ä¸­çš„æ–¹æ³•ï¼š - (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView; è®¾ç½®åˆ†åŒºæ•° - (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component; æ ¹æ®åˆ†åŒºè®¾ç½®è¡Œæ•° ä»£ç†ä¸­çš„æ–¹æ³•ï¼š - (CGFloat)pickerView:(UIPickerView *)pickerView widthForComponent:(NSInteger)component; è®¾ç½®åˆ†åŒºå®½åº¦ - (CGFloat)pickerView:(UIPickerView *)pickerView rowHeightForComponent:(NSInteger)component; è®¾ç½®åˆ†åŒºè¡Œé«˜ - (NSString )pickerView:(UIPickerView )pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component; è®¾ç½®æŸä¸€è¡Œæ˜¾ç¤ºçš„æ ‡é¢˜ - (NSAttributedString )pickerView:(UIPickerView )pickerView attributedTitleForRow:(NSInteger)row forComponent:(NSInteger)component; é€šè¿‡å±æ€§å­—ç¬¦ä¸²è®¾ç½®æŸä¸€è¡Œæ˜¾ç¤ºçš„æ ‡é¢˜ - (UIView )pickerView:(UIPickerView )pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view; è®¾ç½®æŸä¸€è¡Œæ˜¾ç¤ºçš„viewè§†å›¾ - (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component; é€‰ä¸­æŸä¸€è¡Œæ—¶æ‰§è¡Œçš„å›è°ƒ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"iOSå¼€å‘UIä¹‹æ—¥æœŸæ§ä»¶çš„ä½¿ç”¨ï¼ˆUIDatePickerï¼‰","slug":"75iOSå¼€å‘UIä¹‹æ—¥æœŸæ§ä»¶çš„ä½¿ç”¨ï¼ˆUIDatePickerï¼‰","date":"2015-06-08T16:00:00.000Z","updated":"2021-06-29T08:16:53.639Z","comments":true,"path":"2015/06/09/75iOSå¼€å‘UIä¹‹æ—¥æœŸæ§ä»¶çš„ä½¿ç”¨ï¼ˆUIDatePickerï¼‰/","link":"","permalink":"http://huishao.cc/2015/06/09/75iOSå¼€å‘UIä¹‹æ—¥æœŸæ§ä»¶çš„ä½¿ç”¨ï¼ˆUIDatePickerï¼‰/","excerpt":"","text":"iOSæ—¥æœŸæ§ä»¶UIDatePickerç”¨æ³•æ€»ç»“@property (nonatomic) UIDatePickerMode datePickerMode; è®¾ç½®æ§ä»¶æ¨¡å¼ï¼Œæšä¸¾å¦‚ä¸‹ï¼š 123456typedef NS_ENUM(NSInteger, UIDatePickerMode) &#123; UIDatePickerModeTime, //æ—¶é—´æ¨¡å¼ï¼Œæ˜¾ç¤ºæ—¶åˆ†å’Œä¸Šä¸‹åˆ UIDatePickerModeDate, //æ—¥æœŸæ¨¡å¼æ˜¾ç¤ºå¹´æœˆæ—¥ UIDatePickerModeDateAndTime, //æ—¶é—´å’Œæ—¥æœŸæ¨¡å¼ï¼Œæ˜¾ç¤ºæœˆæ—¥æ˜ŸæœŸï¼Œæ—¶åˆ†ä¸Šä¸‹åˆ UIDatePickerModeCountDownTimer, //è®¡æ—¶æ¨¡å¼ï¼Œæ˜¾ç¤ºæ—¶å’Œåˆ†&#125;; @property (nonatomic, retain) NSLocale *locale; è®¾ç½®æœ¬åœ°åŒ–ç¯å¢ƒ @property (nonatomic, copy) NSCalendar *calendar; è®¾ç½®æ—¥å† @property (nonatomic, retain) NSTimeZone *timeZone; è®¾ç½®æ—¶åŒº @property (nonatomic, retain) NSDate *date; è®¾ç½®å½“å‰æ—¶é—´ @property (nonatomic, retain) NSDate *minimumDate; è®¾ç½®æœ€å°æ—¶é—´ç‚¹ @property (nonatomic, retain) NSDate *maximumDate; è®¾ç½®æœ€å¤§æ—¶é—´ç‚¹ @property (nonatomic) NSTimeInterval countDownDuration; åªé€‚ç”¨äºè®¡æ—¶æ¨¡å¼ï¼Œè®¾ç½®æ—¶é—´ @property (nonatomic) NSInteger minuteInterval;è®¾ç½®æ¯ä¸€æ ¼çš„æ—¶é—´å·® - (void)setDate:(NSDate *)date animated:(BOOL)animated; è®¾ç½®åˆ°ä¸€ä¸ªæ—¶é—´ï¼Œæœ‰åŠ¨ç”»æ•ˆæœ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"iOSä¸­UITextViewæ–¹æ³•è§£è¯»","slug":"73iOSä¸­UITextViewæ–¹æ³•è§£è¯»","date":"2015-06-03T16:00:00.000Z","updated":"2021-06-29T08:06:24.440Z","comments":true,"path":"2015/06/04/73iOSä¸­UITextViewæ–¹æ³•è§£è¯»/","link":"","permalink":"http://huishao.cc/2015/06/04/73iOSä¸­UITextViewæ–¹æ³•è§£è¯»/","excerpt":"","text":"iOSä¸­UITextViewæ–¹æ³•è§£è¯»å¸¸ç”¨å±æ€§è§£è¯»ï¼š @property(nonatomic,assign) id&lt;UITextViewDelegate> delegate; è®¾ç½®ä»£ç†å±æ€§ @property(nonatomic,copy) NSString *text; textViewä¸Šçš„æ–‡æœ¬ @property(nonatomic,retain) UIFont *font; è®¾ç½®æ–‡æœ¬å­—ä½“ @property(nonatomic,retain) UIColor *textColor; è®¾ç½®æ–‡æœ¬é¢œè‰² @property(nonatomic) NSTextAlignment textAlignment; è®¾ç½®æ–‡æœ¬å¯¹é½æ¨¡å¼ @property(nonatomic) NSRange selectedRange; è®¾ç½®é€‰ä¸­çš„æ–‡æœ¬èŒƒå›´(åªæœ‰å½“textViewæ˜¯ç¬¬ä¸€å“åº”æ—¶æ‰æœ‰æ•ˆ) @property(nonatomic,getter=isEditable) BOOL editable; è®¾ç½®æ˜¯å¦å¯ä»¥ç¼–è¾‘ @property(nonatomic,getter=isSelectable) BOOL selectable; è®¾ç½®æ˜¯å¦å¯ä»¥é€‰ä¸­ @property(nonatomic) UIDataDetectorTypes dataDetectorTypes; è¿™ä¸ªå±æ€§å¯ä»¥å°†æœ¬æ–‡ä¸­çš„ç”µè¯ï¼Œé‚®ä»¶ç­‰å˜ä¸ºé“¾æ¥ï¼Œé•¿æŒ‰ä¼šè°ƒç”¨å“åº”å“åº”çš„ç¨‹åº(textViewå¿…é¡»ä¸ºä¸å¯ç¼–è¾‘çŠ¶æ€)ï¼Œå±æ€§çš„æšä¸¾å¦‚ä¸‹ï¼š 12345678typedef NS_OPTIONS(NSUInteger, UIDataDetectorTypes) &#123; UIDataDetectorTypePhoneNumber = 1 &lt;&lt; 0, // ç”µè¯å˜ä¸ºé“¾æ¥ UIDataDetectorTypeLink = 1 &lt;&lt; 1, // ç½‘å€å˜ä¸ºé“¾æ¥ UIDataDetectorTypeAddress = 1 &lt;&lt; 2, // åœ°å€å˜ä¸ºé“¾æ¥ UIDataDetectorTypeCalendarEvent = 1 &lt;&lt; 3, // æ—¥å†å˜ä¸ºé“¾æ¥ UIDataDetectorTypeNone = 0, // æ— è¿æ¥ UIDataDetectorTypeAll = NSUIntegerMax // æ‰€æœ‰ç±»å‹é“¾æ¥&#125;; @property(nonatomic) BOOL allowsEditingTextAttributes; è®¾ç½®æ˜¯å¦å…è®¸ç¼–è¾‘å±æ€§å­—ç¬¦ä¸²æ–‡æœ¬ @property(nonatomic,copy) NSAttributedString *attributedText; è®¾ç½®å±æ€§å­—ç¬¦ä¸²æ–‡æœ¬ @property(nonatomic,copy) NSDictionary *typingAttributes; è®¾ç½®å±æ€§å­—ç¬¦ä¸²æ–‡æœ¬å±æ€§å­—å…¸ - (void)scrollRangeToVisible:(NSRange)range; æ»šåŠ¨textViewä½¿å…¶æ˜¾ç¤ºåœ¨æœ¬ä¸€æ®µæ–‡æœ¬ @property (readwrite, retain) UIView *inputView; è®¾ç½®æˆä¸ºç¬¬ä¸€å“åº”æ—¶å¼¹å‡ºçš„è§†å›¾ï¼Œé”®ç›˜è§†å›¾ @property (readwrite, retain) UIView *inputAccessoryView; è®¾ç½®æˆä¸ºç¬¬ä¸€å“åº”æ—¶å¼¹å‡ºçš„å‰¯è§†å›¾ï¼Œå‰¯é”®ç›˜è§†å›¾ @property(nonatomic) BOOL clearsOnInsertion; è®¾ç½®æ˜¯å¦æ˜¾ç¤ºåˆ é™¤æŒ‰é’® UITextViewDelegateä¸­çš„æ–¹æ³• - (BOOL)textViewShouldBeginEditing:(UITextView *)textView; æ˜¯å¦å¼€å§‹ç¼–è¾‘ - (BOOL)textViewShouldEndEditing:(UITextView *)textView; æ˜¯å¦ç»“æŸç¼–è¾‘ - (void)textViewDidBeginEditing:(UITextView *)textView; å¼€å§‹ç¼–è¾‘æ—¶è§¦å‘çš„æ–¹æ³• - (void)textViewDidEndEditing:(UITextView *)textView; ç»“æŸç¼–è¾‘æ—¶è§¦å‘çš„æ–¹æ³• - (BOOL)textView:(UITextView )textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString )text; æ˜¯å¦å…è®¸å­—ç¬¦æ”¹å˜ - (void)textViewDidChange:(UITextView *)textView; å­—ç¬¦å†…å®¹æ”¹å˜è§¦å‘çš„æ–¹æ³• - (void)textViewDidChangeSelection:(UITextView *)textView; é€‰ä¸­å†…å®¹æ”¹å˜è§¦å‘çš„æ–¹æ³• - (BOOL)textView:(UITextView )textView shouldInteractWithURL:(NSURL )URL inRange:(NSRange)characterRange; å½“æ–‡æœ¬ä¸­çš„URLè¿›è¡Œé“¾æ¥æ—¶è§¦å‘çš„æ–¹æ³• ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"iOSå¼€å‘UIScrollViewä½¿ç”¨è¯¦è§£","slug":"74iOSå¼€å‘UIScrollViewä½¿ç”¨è¯¦è§£","date":"2015-06-03T16:00:00.000Z","updated":"2021-06-29T08:13:08.130Z","comments":true,"path":"2015/06/04/74iOSå¼€å‘UIScrollViewä½¿ç”¨è¯¦è§£/","link":"","permalink":"http://huishao.cc/2015/06/04/74iOSå¼€å‘UIScrollViewä½¿ç”¨è¯¦è§£/","excerpt":"","text":"iOSå¼€å‘UIScrollViewä½¿ç”¨è¯¦è§£ä¸€ã€ScrollViewå¸¸ç”¨æ–¹æ³•å’Œå±æ€§@property(nonatomic)CGPoint contentOffset; è®¾ç½®æ»šåŠ¨çš„åç§»é‡ @property(nonatomic)CGSize contentSize; è®¾ç½®æ»‘åŠ¨åŒºåŸŸ @property(nonatomic,assign) id delegate; è®¾ç½®UIScrollViewçš„ä»£ç† @property(nonatomic,getter=isDirectionalLockEnabled) BOOL directionalLockEnabled; è®¾ç½®æ˜¯å¦é”å®šï¼Œè¿™ä¸ªå±æ€§å¾ˆæœ‰æ„æ€ï¼Œé»˜è®¤ä¸ºNOï¼Œå½“è®¾ç½®ä¸ºYESæ—¶ï¼Œä½ çš„æ»šåŠ¨è§†å›¾åªèƒ½åŒä¸€æ—¶é—´åœ¨ä¸€ä¸ªæ–¹å‘ä¸Šæ»šåŠ¨ï¼Œä½†æ˜¯å½“ä½ ä»å¯¹è§’çº¿æ‹–åŠ¨æ—¶ï¼Œæ˜¯æ—¶åˆ»åœ¨æ°´å¹³å’Œç«–ç›´æ–¹å‘åŒæ—¶æ»šåŠ¨çš„ã€‚ @property(nonatomic) BOOL bounces; è®¾ç½®æ˜¯å¦å¼€å¯å›å¼¹æ•ˆæœ @property(nonatomic) BOOL alwaysBounceVertical; æ˜¯å¦å¼€å¯å‚ç›´æ–¹å‘çš„å›å¼¹æ•ˆæœ @property(nonatomic) BOOL alwaysBounceHorizontal; æ˜¯å¦å¼€å¯æ°´å¹³æ–¹å‘çš„å›å¼¹æ•ˆæœ @property(nonatomic,getter=isPagingEnabled) BOOL pagingEnabled; æ˜¯å¦å¼€å¯ç¿»é¡µæ•ˆæœ @property(nonatomic,getter=isScrollEnabled) BOOL scrollEnabled; è®¾ç½®æ˜¯å¦å¯ä»¥æ»‘åŠ¨ @property(nonatomic) BOOL showsHorizontalScrollIndicator; è®¾ç½®æ˜¯å¦æ˜¾ç¤ºæ°´å¹³æ»‘åŠ¨æ¡ @property(nonatomic) BOOL showsVerticalScrollIndicator; è®¾ç½®æ˜¯å¦æ˜¾ç¤ºç«–ç›´æ»‘åŠ¨æ¡ @property(nonatomic) UIEdgeInsets scrollIndicatorInsets; è®¾ç½®æ»‘åŠ¨æ¡çš„ä½ç½® @property(nonatomic) UIScrollViewIndicatorStyle indicatorStyle; è®¾ç½®æ»‘åŠ¨æ¡é£æ ¼ï¼Œæšä¸¾å¦‚ä¸‹ï¼š 12345typedef NS_ENUM(NSInteger, UIScrollViewIndicatorStyle) &#123; UIScrollViewIndicatorStyleDefault, //é»˜è®¤ UIScrollViewIndicatorStyleBlack, //é»‘è‰²é£æ ¼ UIScrollViewIndicatorStyleWhite //ç™½è‰²é£æ ¼&#125;; @property(nonatomic) CGFloat decelerationRate; è®¾ç½®æ»‘åŠ¨é€Ÿåº¦ - (void)setContentOffset:(CGPoint)contentOffset animated:(BOOL)animated; è®¾ç½®æ»šåŠ¨è§†å›¾å†…å®¹çš„åç§»é‡ï¼Œå¯ä»¥å¸¦åŠ¨ç”»æ•ˆæœ - (void)scrollRectToVisible:(CGRect)rect animated:(BOOL)animated; è®¾ç½®æ»šåŠ¨è§†å›¾æ»šåŠ¨åˆ°æŸä¸ªå¯è§åŒºåŸŸï¼Œå¯ä»¥å¸¦åŠ¨ç”»æ•ˆæœ - (void)flashScrollIndicators; æ˜¾ç¤ºä¸€ä¸ªçŸ­æš‚çš„æ»šåŠ¨æŒ‡ç¤ºå™¨ @property(nonatomic,readonly,getter=isTracking) BOOL tracking; è·å–ç”¨æˆ·æ˜¯å¦è§¦åŠè§†å›¾å†…å®¹ @property(nonatomic,readonly,getter=isDragging) BOOL dragging; è·å–ç”¨æˆ·æ˜¯å¦å¼€å§‹æ‹–åŠ¨è§†å›¾ @property(nonatomic,readonly,getter=isDecelerating) BOOL decelerating; è·å–è§†å›¾æ˜¯å¦å¼€å§‹å‡é€Ÿï¼ˆç”¨æˆ·åœæ­¢æ‹–åŠ¨ä½†è§†å›¾ä»åœ¨æ»šåŠ¨ï¼‰ @property(nonatomic) BOOL delaysContentTouches; è®¾ç½®è§†å›¾æ˜¯å¦å»¶è¿Ÿå¤„ç†è§¦æ‘¸äº‹ä»¶ï¼ˆä¼šå°†æ¶ˆæ¯ä¼ é€’ç»™å­è§†å›¾ï¼‰ @property(nonatomic) BOOL canCancelContentTouches; è®¾ç½®æ˜¯å¦ç»™å­è§†å›¾ä¼ é€’å–æ¶ˆåŠ¨ä½œçš„æ¶ˆæ¯ï¼ˆé»˜è®¤è®¾ç½®ä¸ºYESï¼Œå½“scrollViewè§¦å‘äº‹ä»¶çš„æ—¶å€™ï¼Œå…¶å­è§†å›¾ä¸èƒ½è§¦å‘ï¼Œå¦‚æœè®¾ç½®ä¸ºNOï¼Œåˆ™å­è§†å›¾ä¼šç»§ç»­è§¦å‘äº‹ä»¶ï¼‰ - (BOOL)touchesShouldBegin:(NSSet )touches withEvent:(UIEvent )event inContentView:(UIView *)view; - (BOOL)touchesShouldCancelInContentView:(UIView *)view; é‡å†™è¿™ä¸¤ä¸ªæ–¹æ³•å¯ä»¥æ§åˆ¶èµ·å­è§†å›¾çš„äº‹ä»¶å“åº” @property(nonatomic) CGFloat minimumZoomScale; è®¾ç½®å†…å®¹æœ€å°ç¼©æ”¾æ¯”ä¾‹ @property(nonatomic) CGFloat maximumZoomScale; è®¾ç½®å†…å®¹æœ€å¤§ç¼©æ”¾æ¯”ä¾‹ @property(nonatomic) CGFloat zoomScale; è®¾ç½®ç¼©æ”¾æ¯”ä¾‹ - (void)setZoomScale:(CGFloat)scale animated:(BOOL)animated; è®¾ç½®ç¼©æ”¾æ¯”ä¾‹ï¼Œå¯ä»¥å¸¦åŠ¨ç”»æ•ˆæœ - (void)zoomToRect:(CGRect)rect animated:(BOOL)animated; è®¾ç½®ç¼©æ”¾æ˜¾ç¤ºåˆ°æŸä¸ªåŒºåŸŸï¼Œå¯ä»¥å¸¦åŠ¨ç”»æ•ˆæœ @property(nonatomic) BOOL bouncesZoom; è®¾ç½®æ˜¯å¦å¯ä»¥ç¼©æ”¾å›å¼¹ @property(nonatomic,readonly,getter=isZooming) BOOL zooming; è·å–æ˜¯å¦æ­£åœ¨ç¼©æ”¾æ¨¡å¼ @property(nonatomic,readonly,getter=isZoomBouncing) BOOL zoomBouncing; è·å–æ˜¯å¦å½“å‰çš„ç¼©æ”¾æ¯”ä¾‹è¶…å‡ºè®¾ç½®çš„å³°å€¼ @property(nonatomic) BOOL scrollsToTop; è®¾ç½®æ˜¯å¦ç‚¹å‡»çŠ¶æ€æ æ»šåŠ¨åˆ°scrollViewçš„æœ€ä¸Šç«¯ @property(nonatomic) UIScrollViewKeyboardDismissMode keyboardDismissMode; è®¾ç½®é”®ç›˜æ¶ˆå¤±çš„æ¨¡å¼ï¼Œæšä¸¾å¦‚ä¸‹ï¼š 12345typedef NS_ENUM(NSInteger, UIScrollViewKeyboardDismissMode) &#123; UIScrollViewKeyboardDismissModeNone, UIScrollViewKeyboardDismissModeOnDrag, //æ‰‹æŒ‡æ»‘åŠ¨è§†å›¾é”®ç›˜å°±ä¼šæ¶ˆå¤± UIScrollViewKeyboardDismissModeInteractive, //æ‰‹æŒ‡æ»‘åŠ¨è§†å›¾åå¯ä»¥ä¸é”®ç›˜äº¤äº’ï¼Œä¸Šä¸‹æ»‘åŠ¨é”®ç›˜ä¼šè·Ÿéšæ‰‹æŒ‡ä¸Šä¸‹ç§»åŠ¨&#125;; äºŒã€ScrollViewDelegataä¸­å¸¸ç”¨æ–¹æ³•- (void)scrollViewDidScroll:(UIScrollView *)scrollView; è§†å›¾å·²ç»å¼€å§‹æ»‘åŠ¨æ—¶è§¦å‘çš„æ–¹æ³• - (void)scrollViewDidZoom:(UIScrollView *)scrollView; è§†å›¾å·²ç»å¼€å§‹ç¼©æ”¾æ—¶è§¦å‘çš„æ–¹æ³• - (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView; è§†å›¾å¼€å§‹æ‹–åŠ¨æ—¶è§¦å‘çš„æ–¹æ³• - (void)scrollViewWillEndDragging:(UIScrollView )scrollView withVelocity:(CGPoint)velocity targetContentOffset:(inout CGPoint )targetContentOffset; - (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate; è§†å›¾æ‹–åŠ¨ç»“æŸæ—¶è§¦å‘çš„æ–¹æ³• - (void)scrollViewWillBeginDecelerating:(UIScrollView *)scrollView; è§†å›¾å¼€å§‹å‡é€Ÿæ—¶è§¦å‘çš„æ–¹æ³• - (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView; è§†å›¾å‡é€Ÿç»“æŸæ—¶è§¦å‘çš„æ–¹æ³• - (void)scrollViewDidEndScrollingAnimation:(UIScrollView *)scrollView; è§†å›¾åŠ¨ç”»ç»“æŸæ—¶è§¦å‘çš„æ–¹æ³•ï¼Œä½¿ç”¨setæ–¹æ³•è®¾ç½®åç§»é‡åå›è§¦å‘ - (UIView )viewForZoomingInScrollView:(UIScrollView )scrollView; è¿”å›è¿›è¡Œç¼©æ”¾çš„è§†å›¾ - (void)scrollViewWillBeginZooming:(UIScrollView )scrollView withView:(UIView )view; è§†å›¾å†…å®¹å°†è¦å¼€å§‹ç¼©æ”¾æ—¶è§¦å‘çš„æ–¹æ³• - (void)scrollViewDidEndZooming:(UIScrollView )scrollView withView:(UIView )view atScale:(CGFloat)scale; è§†å›¾å†…å®¹ç»“æŸç¼©æ”¾æ—¶è§¦å‘çš„æ–¹æ³• - (BOOL)scrollViewShouldScrollToTop:(UIScrollView *)scrollView; è¿”å›yesï¼Œå¼€å¯å¿«æ·æ»šåŠ¨å›é¡¶ç«¯ï¼Œå°†è¦æ»šåŠ¨æ—¶è°ƒç”¨ - (void)scrollViewDidScrollToTop:(UIScrollView *)scrollView; è§†å›¾å¿«æ·æ»šåŠ¨å›é¡¶ç«¯å¼€å§‹åŠ¨ä½œæ—¶è°ƒç”¨ ç–æ¼ä¹‹å¤„ æ¬¢è¿æŒ‡æ­£ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"iOSä¸­UIImageViewç”¨æ³•æ€»ç»“","slug":"72iOSä¸­UIImageViewç”¨æ³•æ€»ç»“","date":"2015-06-02T16:00:00.000Z","updated":"2021-06-29T08:04:47.244Z","comments":true,"path":"2015/06/03/72iOSä¸­UIImageViewç”¨æ³•æ€»ç»“/","link":"","permalink":"http://huishao.cc/2015/06/03/72iOSä¸­UIImageViewç”¨æ³•æ€»ç»“/","excerpt":"","text":"iOSä¸­UIImageViewç”¨æ³•æ€»ç»“- (instancetype)initWithImage:(UIImage *)image; é€šè¿‡ä¸€ä¸ªå›¾ç‰‡UIImageå¯¹è±¡è¿›è¡Œåˆå§‹åŒ– - (instancetype)initWithImage:(UIImage )image highlightedImage:(UIImage )highlightedImage; é€šè¿‡ä¸€ä¸ªæ­£å¸¸çŠ¶æ€ä¸‹çš„å›¾ç‰‡å’Œé«˜äº®çŠ¶æ€ä¸‹çš„å›¾ç‰‡åˆå§‹åŒ–å¯¹è±¡ @property(nonatomic,retain) UIImage *image; è®¾ç½®æ­£å¸¸çŠ¶æ€ä¸‹çš„å›¾ç‰‡ @property(nonatomic,retain) UIImage *highlightedImage; è®¾ç½®é«˜äº®çŠ¶æ€ä¸‹çš„å›¾ç‰‡ @property(nonatomic,getter=isUserInteractionEnabled) BOOL userInteractionEnabled; è®¾ç½®æ˜¯å¦å¼€å¯ç”¨æˆ·äº¤äº’ @property(nonatomic,getter=isHighlighted) BOOL highlighted; è®¾ç½®æ˜¯å¦ä¸ºé«˜äº®çŠ¶æ€ @property(nonatomic,copy) NSArray *animationImages; è®¾ç½®æ­£å¸¸çŠ¶æ€ä¸‹çš„åŠ¨ç”»å›¾ç‰‡æ•°ç»„ @property(nonatomic,copy) NSArray *highlightedAnimationImages; è®¾ç½®é«˜äº®çŠ¶æ€ä¸‹çš„åŠ¨ç”»å›¾ç‰‡æ•°ç»„ @property(nonatomic) NSTimeInterval animationDuration; è®¾ç½®åŠ¨ç”»æ’­æ”¾æ—¶é•¿ é»˜è®¤é¢‘ç‡ä¸º30å¸§æ¯ç§’ @property(nonatomic) NSInteger animationRepeatCount; è®¾ç½®åŠ¨ç”»å¾ªç¯æ’­æ”¾æ¬¡æ•° é»˜è®¤ä¸ºæ— é™å¾ªç¯ - (void)startAnimating; å¼€å§‹æ’­æ”¾å¸§åŠ¨ç”» - (void)stopAnimating; åœæ­¢æ’­æ”¾å¸§åŠ¨ç”» - (BOOL)isAnimating; æ˜¯å¦æ­£åœ¨æ’­æ”¾åŠ¨ç”» ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"è·å–iOSåº”ç”¨çš„URL Schemes","slug":"71è·å–iOSåº”ç”¨çš„URL Schemes","date":"2015-06-01T16:00:00.000Z","updated":"2021-06-29T08:00:08.638Z","comments":true,"path":"2015/06/02/71è·å–iOSåº”ç”¨çš„URL Schemes/","link":"","permalink":"http://huishao.cc/2015/06/02/71è·å–iOSåº”ç”¨çš„URL Schemes/","excerpt":"","text":"è·å–ä»»æ„Appçš„ç³»ç»Ÿé…ç½®æ–‡ä»¶è¿™æ˜¯ä¸€ä¸ªå°æŠ€å·§ï¼Œæ— éœ€è®¾å¤‡è¶Šç‹±ï¼Œå¯ä»¥è·å–åˆ°ä»»æ„Appç³»ç»Ÿé…ç½®æ–‡ä»¶ã€‚ 1ã€åœ¨macä¸Šçš„AppStoreå•†åº—æœç´¢ç›¸åº”Appã€‚ 2ã€ä¸‹è½½è·å–æ­¤Appã€‚ 3ã€æ‰“å¼€iTunesï¼ŒæŸ¥çœ‹åº”ç”¨ç¨‹åºï¼Œé€‰ä¸­ç›¸åº”çš„åº”ç”¨ç¨‹åºç‚¹å‡»å³é”®ï¼Œé€‰æ‹©åœ¨Finderä¸­æ˜¾ç¤ºï¼Œç„¶åè§£å‹ipaæ–‡ä»¶ï¼Œå¾—åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ã€‚ 4ã€è¿›å…¥æ–‡ä»¶å¤¹ï¼Œæ‰¾åˆ°æ‰©å±•åä¸ºappçš„æ–‡ä»¶ï¼Œå³é”®é€‰æ‹©æ˜¾ç¤ºåŒ…å†…å®¹ã€‚info.plistæ–‡ä»¶å°±åœ¨é‡Œé¢ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSç³»ç»Ÿå…³äºURL Schemesçš„æ¼æ´æ¢ç©¶","slug":"70iOSç³»ç»Ÿå…³äºURL Schemesçš„æ¼æ´æ¢ç©¶","date":"2015-06-01T16:00:00.000Z","updated":"2021-06-29T07:51:09.032Z","comments":true,"path":"2015/06/02/70iOSç³»ç»Ÿå…³äºURL Schemesçš„æ¼æ´æ¢ç©¶/","link":"","permalink":"http://huishao.cc/2015/06/02/70iOSç³»ç»Ÿå…³äºURL Schemesçš„æ¼æ´æ¢ç©¶/","excerpt":"","text":"iOSç³»ç»Ÿå…³äºURL Schemesçš„æ¼æ´æ¢ç©¶ä¸€ã€ä½•ä¸ºURL Schemesæˆ‘æƒ³è¿™ä¸ªä¸œè¥¿çš„è®¾è®¡çš„ç›®çš„æ˜¯ä¸ºäº†æ–¹ä¾¿Appä¹‹é—´çš„ç›¸äº’è°ƒç”¨ä¸é€šè®¯ï¼Œä½ å¯ä»¥åœ¨è‡ªå·±çš„Appä¸­ä½¿ç”¨OpenURLæ–¹æ³•æ¥å”¤èµ·å…¶ä»–çš„Appã€‚æ¯”å¦‚å¾®ä¿¡çš„URL Schemesæ˜¯wiexinï¼Œæˆ‘ä»¬æ–°å»ºä¸€ä¸ªå·¥ç¨‹ï¼Œå®ç°å¦‚ä¸‹ä»£ç åè¿è¡Œç¨‹åºï¼š 1[[UIApplication sharedApplication]openURL:[NSURL URLWithString:@&quot;weixin://]]; è¿™æ—¶ä½ ä¼šå‘ç°ï¼Œä½ çš„åº”ç”¨å¯åŠ¨åå¾ˆå¿«å°±è°ƒèµ·äº†å¾®ä¿¡çš„å®¢æˆ·ç«¯ã€‚ äºŒã€ç”±URL Schemeså¼•å‘çš„æ¼æ´çš„æ ¹æº1ã€ä¸€ä¸ªå°é—®é¢˜å¼•èµ·çš„æ¼æ´æ ¹æºå¦‚ä¸Šæ‰€è¯´ï¼Œé€šè¿‡URL Schemeså¯ä»¥åœ¨åº”ç”¨é—´ç›¸äº’å”¤èµ·ï¼Œè€Œäº§ç”Ÿæ¼æ´çš„æ ¹æºåœ¨äºè¿™ä¸ªURLå¹¶éæ˜¯åº”ç”¨å”¯ä¸€çš„ã€‚appleå¹¶æ²¡æœ‰ä»»ä½•é™åˆ¶æˆ–è€…å®¡æ ¸è¿™ä¸ªURLçš„ä»»ä½•æªæ–½ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä¸¤ä¸ªAppæœ‰ç€ç›¸åŒçš„URL Schemesï¼Œé‚£ä¹ˆç³»ç»Ÿå”¤èµ·çš„Appå¯èƒ½å¹¶ä¸æ˜¯ä½ æƒ³å”¤èµ·çš„ã€‚ 2ã€URL Schemesçš„ä¼˜å…ˆçº§å¦‚ä½•ç¡®å®šç”±äºç›¸åŒçš„URL Schemeå¯èƒ½åŒæ—¶è¢«å¤šä¸ªAppä½¿ç”¨ï¼Œå†å¦‚æœè¿™äº›Appéƒ½å®‰è£…åœ¨äº†åŒä¸€ä¸ªè®¾å¤‡ä¸Šï¼Œé‚£ä¹ˆç³»ç»Ÿç©¶ç«Ÿä¼šå”¤èµ·å“ªä¸€ä¸ªå‘¢ï¼Ÿè¿™ä¸ªæˆ‘ä¹Ÿä¸èƒ½ååˆ†çš„ç¡®å®šï¼Œåªæœ‰ä¸€ç‚¹å¯ä»¥è‚¯å®šï¼šå¦‚æœæœ‰å’Œç³»ç»Ÿåº”ç”¨çš„URL Schemeç›¸åŒï¼Œé‚£ä¹ˆç³»ç»Ÿä¸€å®šä¼šå”¤èµ·ç³»ç»Ÿè‡ªå·±çš„åº”ç”¨ï¼Œåœ¨è¿™é‡Œç³»ç»Ÿçš„åº”ç”¨æœ‰ç€æœ€é«˜çš„ä¼˜å…ˆçº§ï¼ˆè‹¹æœè¿™é‡Œåšçš„å¥½åƒå¾ˆä¸åšé“ï¼Œå°†è‡ªå·±çš„åº”ç”¨ä¿æŠ¤äº†èµ·æ¥ï¼Œè€ŒæŠŠå¹¿å¤§å…¶ä»–å¼€å‘è€…çš„åº”ç”¨æ”¾åœ¨æ¼æ´å‰ç½®ä¹‹ä¸ç†ï¼‰ã€‚å¦‚æœæ²¡æœ‰å’Œç³»ç»Ÿè€¦åˆçš„ï¼Œé‚£ä¹ˆç³»ç»Ÿä¼šå”¤èµ·å“ªä¸€ä¸ªAppå°±çœ‹è¿æ°”äº†ã€‚ä¸è¿‡ï¼Œè¿™ä¹Ÿä¸æ˜¯æ— ç« å¯å¾ªï¼Œç»è¿‡æµ‹è¯•ï¼Œä¼˜å…ˆçº§å’ŒAppçš„Bundle identifieræœ‰å…³ï¼Œæ›´å‡†ç¡®è¯´å’ŒBundle identifierçš„å­—æ¯æ’åºæœ‰å…³ï¼Œå¦‚æœç²¾å¿ƒè®¾è®¡è¿™ä¸ªidï¼Œæˆ‘ä»¬å°±å¯ä»¥åšåˆ°æˆªè·å…¶ä»–åº”ç”¨çš„URLã€‚ 3ã€è¿™ä¸ªæ¼æ´ä¼šå¼•å‘ä»€ä¹ˆé—®é¢˜ä¹ˆï¼Ÿä»…ä»…é€šè¿‡ä¸Šé¢çš„å™è¿°ï¼Œä½ å¯èƒ½è¿˜çœ‹ä¸å‡ºè¿™ä¸ªæ¼æ´ä¼šå¼•å‘ä»€ä¹ˆæ ·çš„åæœã€‚å¯æ˜¯å¦‚æœä½ ä»”ç»†è§‚å¯Ÿï¼Œä½ ä¼šå‘ç°ï¼Œå„ç§iPhoneä¸Šçš„ç¬¬ä¸‰æ–¹è°ƒç”¨ï¼Œä¾‹å¦‚QQéŸ³ä¹å¿«æ·ç™»å½•ï¼Œè…¾è®¯çš„å„ç§æ¸¸æˆï¼Œç”šè‡³åŒ…æ‹¬è°ƒç”¨æ”¯ä»˜å®é’±åŒ…çš„æ”¯ä»˜åŠŸèƒ½ï¼Œéƒ½æ˜¯é€šè¿‡è¿™æ ·çš„åŸç†å®ç°çš„ã€‚å¦‚æœè¿™äº›å›è°ƒçš„æ•°æ®è¢«æˆªè·ï¼Œé‚£ä¹ˆå°±ç­‰äºè¯´ç™»å½•ä¿¡æ¯ï¼Œç”¨æˆ·ä¿¡æ¯ç”šè‡³æ”¯ä»˜è®¢å•ä¿¡æ¯éƒ½ä¼šæš´æ¼åœ¨ä»–äººçœ¼ä¸‹ï¼Œå¯¹äºæˆªè·è€…æ¥è¯´ï¼Œä»–å¯ä»¥ç”¨ä½ çš„ä¿¡æ¯è¿›è¡Œç™»å½•ï¼Œå¯ä»¥æ›¿ä½ å®Œæˆæ”¯ä»˜ï¼Œä¹Ÿå¯ä»¥ç›—å–ä½ ç™»é™†åçš„ç”¨æˆ·ä¿¡æ¯ã€‚ ä¸‰ã€åˆ©ç”¨URL Schemeæ¼æ´è¿›è¡Œè¿œç¨‹ç™»å½•ä¸‹é¢ï¼Œå°±ç”¨ä¸€ä¸ªå®ä¾‹æ¥æ¼”ç¤ºä¸€ä¸‹æˆ‘å¦‚ä½•é€šè¿‡ä¸€ä¸ªä¼ªè£…Appç™»å½•å¤©å¤©ç‚«æ–—è´¦å·ã€‚ å¤©å¤©ç‚«æ–—æ˜¯è…¾è®¯çš„ä¸€æ¬¾ååˆ†ç«çˆ†çš„æ ¼æ–—æ¸¸æˆï¼Œåƒå…¶ä»–è…¾è®¯æ¸¸æˆä¸€æ ·ï¼Œæ”¯æŒQQå’Œå¾®ä¿¡ç™»å½•ï¼Œè¿™é‡Œæˆ‘æ‹¿å¾®ä¿¡ç™»å½•ä¸ºä¾‹ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åšä¸€ä¸ªä¼ªè£…çš„Appæ¥æˆªå–ç”¨æˆ·çš„ç™»å½•ä¿¡æ¯ï¼Œæ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œåœ¨plistæ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ªå’Œå¤©å¤©ç‚«æ–—å¾®ä¿¡ç™»å½•ç›¸åŒçš„URL Schemeï¼š è¿™é‡Œçš„wx63124814f356e266å°±æ˜¯å¾®ä¿¡ç™»å½•å¤©å¤©ç‚«æ–—çš„URL Schemeï¼Œè¿™é‡Œå°†Bundle idè®¾ç½®ä¸ºAï¼Œä½¿å®ƒæœ‰æ¯”å¤©å¤©ç‚«æ–—æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚ åœ¨AppDelegateä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š 1234-(BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation&#123; NSLog(@&quot;%@&quot;,url); return YES;&#125; è¿™ä¸ªå‡½æ•°æ˜¯åœ¨Appè¢«é€šè¿‡URLå”¤èµ·æ—¶é¦–å…ˆè°ƒç”¨çš„å‡½æ•°ï¼Œè¿™é‡Œä¼ å…¥çš„URLå°±æ˜¯ç”¨æˆ·çš„ç™»å½•éªŒè¯ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œå°†è¿™ä¸ªä¿¡æ¯å‘é€å›æ¥ã€‚ å°†ä¼ªè£…å¥½çš„ç¨‹åºè·‘ä¸€éåï¼Œè¿è¡Œå¤©å¤©ç‚«æ–—ï¼Œç„¶åä½¿ç”¨å¾®ä¿¡ç™»å½•ï¼Œä¼šå‘ç°åœ¨å¾®ä¿¡éªŒè¯æˆåŠŸåè·³è½¬åå¹¶æ²¡æœ‰è·³è½¬å›å¤©å¤©ç‚«æ–—åº”ç”¨ï¼Œè€Œæ˜¯è·³è½¬åˆ°äº†æˆ‘ä»¬ä¼ªè£…çš„è¿™ä¸ªDemoã€‚è¿™æ—¶xcodeè°ƒè¯•åŒºä¼šæ‰“å°å‡ºå¦‚ä¸‹çš„ä¿¡æ¯ï¼š ä¹‹åï¼Œæ¥å¼€å§‹åšæˆ‘ä»¬çš„ä¾µå…¥ç¨‹åºï¼Œè¿™ä¸ªå…¶å®æ›´åŠ ç®€å•ï¼Œæ–°å»ºä¸€ä¸ªå·¥ç¨‹ï¼Œåªéœ€è¦æ·»åŠ ä¸€è¡Œä»£ç ï¼š 1[[UIApplication sharedApplication]openURL:[NSURL URLWithString:@&quot;wx63124814f356e266://oauth?code=0118aa2f2b99d8a9e0e76a7176b2bd4E&amp;state=weixin&quot;]]; è¿™é‡Œçš„URLå°±æ˜¯æˆ‘ä»¬æˆªè·çš„å¸¦å‚çš„URLï¼Œåœ¨å¦ä¸€ä¸ªè£…æœ‰å¤©å¤©ç‚«æ–—çš„æ‰‹æœºä¸Šè·‘è¿™ä¸ªç¨‹åºï¼ˆåœ¨åŒä¸€ä¸ªæ‰‹æœºä¸Šæµ‹è¯•çš„è¯è¦å°†åˆšæ‰çš„ä¼ªè£…Appåˆ å»ï¼Œä¸ç„¶å®ƒä¹Ÿä¼šå°†æˆ‘ä»¬çš„ä¾µå…¥ç¨‹åºä¸€èµ·éª—äº†ï¼‰ã€‚ä¼šå‘ç°ç™»å½•å¤©å¤©ç‚«æ–—æˆåŠŸï¼Œè§’è‰²ä¿¡æ¯å®Œå…¨ä¸€è‡´ã€‚ åŒæ ·çš„åšæ³•ï¼Œè¿˜å¯ä»¥è¿œç¨‹ç™»å½•QQéŸ³ä¹ï¼Œå¤©å¤©é£è½¦ç­‰ç­‰å„ç§é€šè¿‡å¾®ä¿¡ï¼ŒQQï¼Œå¾®åšå¿«æ·ç™»å½•çš„åº”ç”¨ã€‚ å››ã€è¦æˆ˜èƒœä½ çš„æ•Œäººï¼Œå¿…é¡»è¦äº†è§£ä½ çš„æ•Œäººä¸äº†è§£appleä¸ºä»€ä¹ˆä¸€ç›´ä¸å¯¹URL Schemeåšé™åˆ¶ï¼Œæˆ–è®¸éœ€è¦æˆ–è®¸ä¸éœ€è¦ã€‚ä½†æ˜¯è¿™ä¸€ç‚¹å»ºè®®æ€»æ˜¯å¥½çš„ï¼šåœ¨ä½ çš„Appä½¿ç”¨å¿«æ·ç™»å½•çš„æ—¶å€™ï¼Œæœ€å¥½åŒæ—¶å°†è®¾å¤‡å·æˆ–è€…æŸä¸ªæœ¬åœ°ä¿å­˜çš„æ ‡å¿—ç»‘å®šï¼Œé˜²æ­¢æ¶æ„çš„ç¬¬ä¸‰æ–¹å€Ÿæ­¤è·å–ç”¨æˆ·çš„ä¿¡æ¯ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSç•Œé¢å¸ƒå±€ä¹‹ä¸€â€”â€”ä½¿ç”¨autoresizingè¿›è¡ŒåŠ¨æ€å¸ƒå±€","slug":"68iOSç•Œé¢å¸ƒå±€ä¹‹ä¸€â€”â€”ä½¿ç”¨autoresizingè¿›è¡ŒåŠ¨æ€å¸ƒå±€","date":"2015-05-31T16:00:00.000Z","updated":"2021-06-29T07:46:40.535Z","comments":true,"path":"2015/06/01/68iOSç•Œé¢å¸ƒå±€ä¹‹ä¸€â€”â€”ä½¿ç”¨autoresizingè¿›è¡ŒåŠ¨æ€å¸ƒå±€/","link":"","permalink":"http://huishao.cc/2015/06/01/68iOSç•Œé¢å¸ƒå±€ä¹‹ä¸€â€”â€”ä½¿ç”¨autoresizingè¿›è¡ŒåŠ¨æ€å¸ƒå±€/","excerpt":"","text":"iOSç•Œé¢å¸ƒå±€ä¹‹ä¸€â€”â€”ä½¿ç”¨autoresizingè¿›è¡ŒåŠ¨æ€å¸ƒå±€autoresizingæ˜¯iOSä¸­ä¼ ç»Ÿçš„ç•Œé¢è‡ªåŠ¨å¸ƒå±€æ–¹å¼ï¼Œé€šè¿‡å®ƒï¼Œå½“çˆ¶è§†å›¾frameå˜æ¢æ—¶ï¼Œå­è§†å›¾ä¼šè‡ªåŠ¨çš„åšå‡ºç›¸åº”çš„è°ƒæ•´ã€‚ ä¸€ã€é€šè¿‡ä»£ç è¿›è¡Œå¸ƒå±€ä»»ä½•ä¸€ä¸ªviewéƒ½æœ‰autoresizingMaskè¿™ä¸ªå±æ€§ï¼Œé€šè¿‡è¿™ä¸ªå±æ€§å¯ä»¥è®¾ç½®å½“å‰viewä¸å…¶çˆ¶è§†å›¾çš„ç›¸å¯¹å…³ç³»ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹UIViewAutoresizingè¿™ä¸ªæšä¸¾ï¼š 123456789typedef NS_OPTIONS(NSUInteger, UIViewAutoresizing) &#123; UIViewAutoresizingNone = 0,//é»˜è®¤ UIViewAutoresizingFlexibleLeftMargin = 1 &lt;&lt; 0,//ä¸çˆ¶è§†å›¾å³è¾¹é—´è·å›ºå®šï¼Œå·¦è¾¹å¯å˜ UIViewAutoresizingFlexibleWidth = 1 &lt;&lt; 1,//è§†å›¾å®½åº¦å¯å˜ UIViewAutoresizingFlexibleRightMargin = 1 &lt;&lt; 2,//ä¸çˆ¶è§†å›¾å·¦è¾¹é—´è·å›ºå®šï¼Œå³è¾¹å¯å˜ UIViewAutoresizingFlexibleTopMargin = 1 &lt;&lt; 3,//ä¸çˆ¶è§†å›¾ä¸‹è¾¹é—´è·å›ºå®šï¼Œä¸Šè¾¹å¯å˜ UIViewAutoresizingFlexibleHeight = 1 &lt;&lt; 4,//è§†å›¾é«˜åº¦å¯å˜ UIViewAutoresizingFlexibleBottomMargin = 1 &lt;&lt; 5//ä¸çˆ¶è§†å›¾ä¸Šè¾¹é—´è·å›ºå®šï¼Œä¸‹è¾¹å¯å˜&#125;; ä¸‹é¢æˆ‘ä»¬é€šè¿‡æ•ˆæœæ¥çœ‹è¿™äº›å±æ€§çš„ä½œç”¨ï¼š å…ˆåˆ›å»ºä¸¤ä¸ªviewï¼Œä¸ºäº†åŒºåˆ†ï¼Œè®¾ç½®ä¸åŒçš„èƒŒæ™¯è‰²ï¼š 12345678910- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view, typically from a nib. UIView * view1 = [[UIView alloc]initWithFrame:CGRectMake(20, 40, 200, 200)]; view1.backgroundColor=[UIColor redColor]; UIView * view2 = [[UIView alloc]initWithFrame:CGRectMake(10, 10, 100, 100)]; view2.backgroundColor=[UIColor greenColor]; [view1 addSubview:view2]; [self.view addSubview:view1];&#125; è®¾ç½®view2çš„è‡ªåŠ¨å¸ƒå±€å±æ€§å¦‚ä¸‹ï¼š 1 view2.autoresizingMask=UIViewAutoresizingFlexibleBottomMargin; è¿™æ—¶çš„æ•ˆæœå¦‚ä¸‹ï¼š æ”¹å˜view1çš„frameå¦‚ä¸‹ï¼š 1UIView * view1 = [[UIView alloc]initWithFrame:CGRectMake(20, 40, 300, 300)]; æ•ˆæœå¦‚ä¸‹ï¼š è¿™æ—¶view2çš„ä¸‹è¾¹è·ç¦»ç›¸å¯¹çˆ¶è§†å›¾æ˜¯å¯å˜çš„ã€‚ è®¾ç½®å¦‚ä¸‹ï¼š 1 view2.autoresizingMask=UIViewAutoresizingFlexibleHeight; æ•ˆæœå¦‚ä¸‹ï¼š å¯ä»¥çœ‹å‡ºï¼Œè¿™æ—¶å­è§†å›¾çš„é«˜åº¦æ˜¯éšçˆ¶è§†å›¾å˜åŒ–è€Œè‡ªåŠ¨æ”¹å˜çš„ã€‚ å¦‚ä¸‹è®¾ç½®ï¼š 1view2.autoresizingMask=UIViewAutoresizingFlexibleLeftMargin; æ•ˆæœå¦‚ä¸‹ï¼š è¿™æ—¶å­è§†å›¾çš„å·¦è¾¹æ˜¯éšçˆ¶è§†å›¾å˜åŒ–è€Œå¯å˜çš„ã€‚ åŒç†ï¼ŒUIViewAutoresizingFlexibleRightMarginå°†ä½¿å­è§†å›¾å³è¾¹ä¸çˆ¶è§†å›¾çš„è·ç¦»å¯å˜ã€‚ UIViewAutoresizingFlexibleTopMarginå°†ä½¿å­è§†å›¾ä¸Šè¾¹ä¸çˆ¶è§†å›¾è·ç¦»å¯å˜ã€‚UIViewAutoresizingFlexibleWidthå°†ä½¿å­è§†å›¾çš„å®½åº¦å¯å˜ã€‚ æ³¨æ„ï¼šè¿™äº›è‡ªåŠ¨å¸ƒå±€çš„å±æ€§æ˜¯å¯ä»¥å åŠ çš„ï¼Œæ¯”å¦‚ä¿æŒè§†å›¾ä¸çˆ¶è§†å›¾è¾¹è·ä¸å˜ï¼Œå¦‚ä¸‹è®¾ç½®ï¼š 1view2.autoresizingMask=UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleHeight; æ•ˆæœå¦‚ä¸‹ï¼š äºŒã€nibæ–‡ä»¶ä¸­å¯è§†åŒ–è®¾ç½®è‡ªåŠ¨å¸ƒå±€åœ¨storyboardä¸­æˆ‘ä»¬å¯ä»¥æ›´åŠ è½»æ¾çš„è¿›è¡Œautoresizingè‡ªåŠ¨å¸ƒå±€ã€‚åœ¨viewè®¾ç½®æ ä¸­æœ‰autoresizingè¿™ä¸ªè®¾ç½®ï¼Œç‚¹ä¸­ç›¸åº”çš„ç®­å¤´ï¼Œå°±æ˜¯åˆšæ‰æˆ‘ä»¬æ¢è®¨çš„è®¾ç½®é€‰é¡¹ã€‚å¹¶ä¸”æˆ‘ä»¬æŠŠé¼ æ ‡æ”¾åœ¨è¿™ä¸ªä¸Šé¢çš„æ—¶å€™ï¼Œå³ä¾§ä¼šè‡ªåŠ¨ä¸ºæˆ‘ä»¬é¢„è§ˆæ•ˆæœã€‚ å¦‚æœä½ è§‰å¾—autoresizingå¾ˆå¼ºå¤§ï¼Œé‚£ä¹ˆä½ å°±å¤ªå®¹æ˜“æ»¡è¶³äº†ï¼Œautoresizingå¯ä»¥æ»¡è¶³å¤§éƒ¨åˆ†ç®€å•çš„è‡ªåŠ¨å¸ƒå±€éœ€æ±‚ï¼Œå¯æ˜¯å®ƒæœ‰ä¸€ä¸ªè‡´å‘½çš„ç¼ºé™·ï¼Œå®ƒåªèƒ½è®¾ç½®å­è§†å›¾ç›¸å¯¹äºçˆ¶è§†å›¾çš„å˜åŒ–ï¼Œå´ä¸èƒ½ç²¾ç¡®è¿™ä¸ªå˜åŒ–çš„åº¦æ˜¯å¤šå°‘ï¼Œå› æ­¤å¯¹äºå¤æ‚çš„ç²¾å‡†çš„å¸ƒå±€éœ€æ±‚ï¼Œå®ƒå°±åŠ›ä¸ä»å¿ƒäº†ã€‚ä½†æ˜¯æœ‰ä¸€ä¸ªå¥½æ¶ˆæ¯å‘Šè¯‰ä½ ï¼ŒiOS6ä¹‹åçš„autolayoutè‡ªåŠ¨å¸ƒå±€æ–¹æ¡ˆï¼Œæ­£æ˜¯è§£å†³å¤æ‚å¸ƒå±€çš„å¥½å¸®æ‰‹ï¼Œæˆ‘ä»¬åœ¨ä¸‹ä¸€éåšå®¢ä¸­å†è¿›è¡Œè¯¦ç»†è®¨è®ºã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"iOSç•Œé¢å¸ƒå±€ä¹‹äºŒâ€”â€”åˆè¯†autolayoutå¸ƒå±€æ¨¡å‹","slug":"69iOSç•Œé¢å¸ƒå±€ä¹‹äºŒâ€”â€”åˆè¯†autolayoutå¸ƒå±€æ¨¡å‹","date":"2015-05-31T16:00:00.000Z","updated":"2021-06-29T07:50:01.480Z","comments":true,"path":"2015/06/01/69iOSç•Œé¢å¸ƒå±€ä¹‹äºŒâ€”â€”åˆè¯†autolayoutå¸ƒå±€æ¨¡å‹/","link":"","permalink":"http://huishao.cc/2015/06/01/69iOSç•Œé¢å¸ƒå±€ä¹‹äºŒâ€”â€”åˆè¯†autolayoutå¸ƒå±€æ¨¡å‹/","excerpt":"","text":"iOSç•Œé¢å¸ƒå±€ä¹‹äºŒâ€”â€”åˆè¯†autolayoutå¸ƒå±€æ¨¡å‹ä¸€ã€å¼•è¨€ åœ¨ä¸Šä¸€ç¯‡åšå®¢ä¸­ä»‹ç»äº†ä¼ ç»Ÿçš„å¸ƒå±€æ–¹å¼ï¼šautoresizingã€‚éšç€iphoneå‹å·çš„è¶Šæ¥è¶Šå¤šï¼Œå±å¹•çš„æ ‡å‡†ä¹Ÿæ›´åŠ å¤šæ ·åŒ–ï¼Œé€šè¿‡autoresizingå·²ç»ä¸èƒ½æ»¡è¶³å¼€å‘çš„éœ€æ±‚ï¼Œè€Œè¿›è¡Œä¸¤å¥—å¸ƒå±€æˆ–è€…åŠ¨æ€ä»£ç æ§åˆ¶åˆå¤§å¤§å¢åŠ äº†å¼€å‘è€…çš„å·¥ä½œé‡ï¼Œautolayoutçš„å‡ºç°æ‹¯æ•‘ä¸ªè¿™ä¸€åˆ‡ï¼Œå®ƒè®©åŠ¨æ€å¸ƒå±€å˜çš„ååˆ†ç®€å•ä¾¿æ·ã€‚ autoresizingä»‹ç»ï¼š[http://my.oschina.net/u/2340880/blog/423357](http://my.oschina.net/u/2340880/blog/423357)ã€‚ äºŒã€autolayoutçš„è®¾è®¡æ€æƒ³æ­£å¦‚storyboardçš„è®¾è®¡ç›®çš„æ˜¯ä¸ºäº†è®©å¼€å‘è€…å°†æ›´å¤šçš„ç²¾åŠ›æŠ•å…¥åˆ°é€»è¾‘å®ç°è€Œä¸æ˜¯ç•Œé¢å¸ƒå±€ä¸€æ ·ã€‚autolayoutçš„è®¾è®¡æ€æƒ³æ˜¯è®©å¼€å‘è€…å°†å¸ƒå±€ä¸Šæ›´å¤šçš„ç²¾åŠ›æ”¾åœ¨æ§ä»¶å…³ç³»ä¸Šè€Œä¸æ˜¯åæ ‡ã€‚æˆ‘ä»¬åªéœ€è¦å…³å¿ƒæ§ä»¶ä¹‹é—´çš„æ‘†æ”¾å…³ç³»ï¼Œè€Œå¹¶ä¸éœ€è¦å…³å¿ƒè¿™æ˜¯å¦‚ä½•å®ç°çš„ã€‚å› æ­¤ä½ ä½¿ç”¨autolayoutè¿›è¡Œå¸ƒå±€æ—¶ï¼Œå°±æ˜¯åœ¨æ·»åŠ ä¸€ä¸ªä¸€ä¸ªçš„çº¦æŸã€‚æ§ä»¶ä¸æ§ä»¶ä¹‹é—´çš„çº¦æŸï¼Œæ§ä»¶ä¸çˆ¶è§†å›¾ä¹‹é—´çš„çº¦æŸã€‚ 1ã€äº†è§£å‡ ç§çº¦æŸç‚¹å‡»xcodeçš„storyboardæ–‡ä»¶ï¼Œåœ¨xcodeçš„å¯¼èˆªæ ä¸Šç‚¹å‡»Editoï¼Œç„¶åé€‰æ‹©Pinï¼Œå¯ä»¥çœ‹åˆ°å¦‚å›¾ï¼Œå…¶ä¸­æ˜¯å¯ä»¥æ·»åŠ çš„çº¦æŸç±»å‹ã€‚ Widthï¼šå¯¹è§†å›¾å®½åº¦çš„çº¦æŸ Heightï¼šå¯¹è§†å›¾é«˜åº¦çš„çº¦æŸ Horizontal Spacingï¼šå¯¹è§†å›¾é—´æ°´å¹³è·ç¦»çš„çº¦æŸ Vertical Spacingï¼šå¯¹è§†å›¾é—´å‚ç›´è·ç¦»çš„çº¦æŸ Leading Space to Superviewï¼šä¸çˆ¶è§†å›¾å·¦è¾¹ç•Œçš„çº¦æŸ Trailing Space to Superviewï¼šä¸çˆ¶è§†å›¾å³è¾¹ç•Œçš„çº¦æŸ Top Space to Superviewï¼šä¸çˆ¶è§†å›¾ä¸Šè¾¹ç•Œçš„çº¦æŸ Bottom Space to Superviewï¼šä¸çˆ¶è§†å›¾ä¸‹è¾¹ç•Œçš„çº¦æŸ Widehs Equallyï¼šè§†å›¾ç­‰å®½çº¦æŸ Heights Equallyï¼šè§†å›¾ç­‰é«˜çº¦æŸ 2ã€ç½‘ä¸Šçš„ä¸€ä¸ªå¾ˆç®€å•çš„çº¦æŸä¾‹å­äº†è§£äº†ä¸Šé¢çš„å‡ ç§çº¦æŸï¼Œç°åœ¨æˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªæ•ˆæœï¼Œå€Ÿç”¨ç½‘ä¸Šå…³äºautolayoutè‡ªåŠ¨å¸ƒå±€çš„ä¸€ä¸ªå°ä¾‹å­ã€‚æˆ‘ä»¬åœ¨storyboardä¸­æ‹–å…¥ä¸‰ä¸ªlabelï¼Œä½¿å®ƒä»¬å¦‚ä¸‹æ•ˆæœï¼š ç„¶åæˆ‘ä»¬å°†å±å¹•æ¨ªè¿‡æ¥ï¼Œä¼šå‘ç°è¿™æ—¶çš„æ•ˆæœå¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³å¾—åˆ°çš„ç»“æœï¼š åœ¨è¿›è¡Œæ·»åŠ çº¦æŸä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥ç†æ¸…è¿™ä¸‰ä¸ªè§†å›¾ä¹‹é—´çš„å…³ç³»ï¼Œå°†ä¸Šé¢ä¸¤ä¸ªè§†å›¾ç¼–å·ä¸º1.2ï¼Œä¸‹é¢é‚£ä¸ªè§†å›¾ç¼–å·ä¸º3. ï¼ˆ1ï¼‰1å’Œ2çš„å®½å’Œé«˜ç›¸ç­‰ ï¼ˆ2ï¼‰1è·ç¦»çˆ¶è§†å›¾å·¦è¾¹20px ï¼ˆ3ï¼‰2è·ç¦»çˆ¶è§†å›¾å³è¾¹20px ï¼ˆ4ï¼‰3è·ç¦»çˆ¶è§†å›¾å·¦è¾¹20pxï¼Œå³è¾¹20px ï¼ˆ5ï¼‰1å’Œ2æ°´å¹³é—´è·20px ï¼ˆ6ï¼‰1ä¸3å‚ç›´é—´è·20px ï¼ˆ7ï¼‰1å’Œ2è·ç¦»çˆ¶è§†å›¾ä¸Šè¾¹è·50px ï¼ˆ8ï¼‰3è·ç¦»çˆ¶è§†å›¾ä¸‹è¾¹è·20px ï¼ˆ9ï¼‰3ä¸1å’Œ2çš„é«˜åº¦ä¸€æ · é€šè¿‡ä¸Šé¢çš„çº¦æŸï¼Œæ‰€æœ‰è§†å›¾çš„ä½ç½®éƒ½å°†è¢«ç›¸å¯¹çš„å›ºå®šï¼Œä¸‹é¢æˆ‘ä»¬åªéœ€è¦æŒ‰ç…§é¡ºåºä¸€ä¸€æ·»åŠ å³å¯ã€‚ ï¼ˆ1ï¼‰é€‰ä¸­1å’Œ2è§†å›¾ï¼ˆæŒ‰ä½cmdé”®å¯ä»¥å¤šé€‰ï¼‰ï¼Œç„¶åç‚¹å‡»Editor-&gt;Pinä¹‹åé€‰æ‹©Widehs Equallyï¼Œé‡å¤ä¸Šé¢çš„è¿‡ç¨‹ï¼Œé€‰æ‹©Heights Equallyã€‚æˆ‘ä»¬ä¼šçœ‹åˆ°å¦‚ä¸‹çš„æ•ˆæœï¼š å‡ ç‚¹æ³¨æ„ï¼š *çº¿æ˜¯æ©™è‰²ä»£è¡¨è­¦å‘Šï¼Œæˆ‘ä»¬æ²¡æœ‰æ·»åŠ è¶³å¤Ÿçš„çº¦æŸæ¥ç¡®å®šä½ç½®æˆ–è€…çº¦æŸæœ‰çŸ›ç›¾ã€‚ *å¦‚æœçº¿çš„ä¸­é—´æ˜¾ç¤ºçš„ä¸æ˜¯ç­‰å·ï¼Œè€Œæ˜¯æ•°å­—ï¼Œåˆ™æ˜¯å› ä¸ºè§†å›¾1å’Œ2çš„å°ºå¯¸è®¾ç½®çš„ä¸ç­‰ï¼Œçº¦æŸæœ‰çŸ›ç›¾ã€‚ ï¼ˆ2ï¼‰é€‰ä¸­1.é‡å¤ä¸Šé¢æ­¥éª¤ï¼Œé€‰æ‹©Leading Space to Superviewã€‚è¿™æ—¶1çš„å·¦è¾¹åˆä¼šå¢åŠ ä¸€æ¡çº¿ï¼š ç‚¹å‡»è¿™æ¡çº¿ï¼Œåœ¨å³è¾¹çš„è®¾ç½®å»å°†çº¦æŸå€¼è®¾ç½®ä¸º20ï¼š ï¼ˆ3ï¼‰é‡å¤ä¸Šé¢æ­¥éª¤ï¼Œé€‰ä¸­è§†å›¾2ï¼Œæ·»åŠ Trailing Space to Superviewçº¦æŸã€‚ ï¼ˆ4ï¼‰é€‰ä¸­è§†å›¾3ï¼Œé‡å¤ä¸Šé¢æ­¥éª¤ã€‚ ï¼ˆ5ï¼‰é€‰ä¸­1å’Œ2ï¼Œæ·»åŠ Horizontal Spacingï¼Œè®¾ç½®ä¸º20. ï¼ˆ6ï¼‰é€‰ä¸­1å’Œ3ï¼Œæ·»åŠ Vertical Spacingï¼Œè®¾ç½®ä¸º20. ï¼ˆ7ï¼‰ä¸º1å’Œ2åˆ†åˆ«æ·»åŠ Top Space to Superviewçº¦æŸã€‚ ï¼ˆ8ï¼‰ä¸º3æ·»åŠ Bottom Space to Superviewçº¦æŸã€‚ ï¼ˆ9ï¼‰é€‰ä¸­1å’Œ3ï¼Œæ·»åŠ Heights Equallyçº¦æŸã€‚ ä¸Šé¢çš„è¿‡ç¨‹è™½ç„¶ç¹çï¼Œä½†æ˜¯é€»è¾‘æ€§ååˆ†æ¸…æ™°ï¼Œè¿™æ—¶ä½ ä¼šå‘ç°æ‰€æœ‰çš„çº¿éƒ½å˜æˆäº†è“è‰²ï¼Œçº¦æŸå·²ç»æ·»åŠ å®Œæ•´ï¼Œæˆ‘ä»¬å†æ¬¡è¿è¡Œåæ¨ªå±ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š è¿™å°±æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœäº†ã€‚ 3ã€è‡ªåŠ¨å¸ƒå±€çš„å‡ ç§å¯¹å…¶æ–¹å¼åœ¨xcodeå¯¼èˆªçš„Editorèœå•ä¸­ï¼Œè¿˜æœ‰ä¸€ä¸ªå­èœå•ï¼ŒAlignï¼Œè¿™é‡Œé¢çš„é€‰é¡¹å¯ä»¥ä¸ºæ§ä»¶æ·»åŠ å¯¹å…¶çº¦æŸï¼š Left Edgesï¼šæ§ä»¶å·¦å¯¹é½ Right Edgesï¼šæ§ä»¶å³å¯¹é½ Top Edgesï¼šæ§ä»¶ä¸Šå¯¹é½ Bottom Edgesï¼šæ§ä»¶ä¸‹å¯¹é½ Horizontal Centersï¼šæ§ä»¶æ°´å¹³ä¸­å¿ƒå¯¹é½ Vertical Centersï¼šæ§ä»¶å‚ç›´æ°´å¹³å¯¹é½ Horizontal Center in Containerï¼šæ§ä»¶ä¸å…¶çˆ¶è§†å›¾æ°´å¹³ä¸­å¿ƒå¯¹é½ Vertical Center in Containerï¼šæ§ä»¶ä¸å…¶çˆ¶è§†å›¾å‚ç›´ä¸­å¿ƒå¯¹é½ ä¸‰ã€å‡ ç‚¹å°æ„Ÿæ‚Ÿåˆ°æ­¤ä¸ºæ­¢ï¼ŒåŸºæœ¬ä¸Šå·²ç»å¯ä»¥ä½¿ç”¨autolayoutè‡ªåŠ¨å¸ƒå±€è§£å†³å¤æ‚çš„å¸ƒå±€éœ€æ±‚äº†ï¼Œä½†æ˜¯åˆ‡è®°ï¼Œæ­£å¼å› ä¸ºaotulayoutçš„å¼ºå¤§ä½¿å®ƒä¼šéšè—æ›´å¤šçš„å‘ï¼Œä¸‹é¢æ˜¯æˆ‘çš„å‡ ç‚¹æ„Ÿæ‚Ÿï¼Œå†æ¬¡åˆ†äº«ï¼š 1ã€autolayoutçš„ç²¾é«“åœ¨äºè¶³å¤Ÿå¤šçš„çº¦æŸï¼Œautolayoutä¹‹æ‰€ä»¥æ¯”autoresizingå¼ºå¤§ï¼Œå°±åœ¨äºå…¶å¸ƒå±€çš„ç²¾ç¡®æ€§ï¼Œè€Œç²¾ç¡®æ€§æ­£æ˜¯ç”±çº¦æŸæ¥æä¾›çš„ã€‚ 2ã€åˆ‡è«ç”»è›‡æ·»è¶³ï¼ŒçŸ›ç›¾çš„çº¦æŸä¼šä½¿xcodeæ™•æ‰ï¼Œæ‰€ä»¥åœ¨æ·»åŠ çº¦æŸå‰ï¼Œæˆ‘å»ºè®®å°†è¯•å›¾é—´çš„å¸ƒå±€å…³ç³»å…ˆæ•´ç†å‡ºæ¥ã€‚ 3ã€åº”è¯¥è½¬å˜ä½ çš„æ€è·¯ï¼Œå¦‚æœä½ å·²ç»ä¹ æƒ¯äº†ä½¿ç”¨CGRectã€Pointç­‰ä¼ ç»Ÿçš„åæ ‡å¸ƒå±€æ¨¡å¼ï¼Œé‚£ä¹ˆä½ åº”è¯¥ç¨å¾®è½¬å˜ä¸€ä¸‹ï¼Œautolayoutå€¡å¯¼çš„æ˜¯ä¸€ä¸ªç›¸å¯¹çš„æ¦‚å¿µï¼Œä½ éœ€è¦å°†æ›´å¤šçš„å…³æ³¨æ”¾åœ¨è§†å›¾é—´çš„å…³ç³»ï¼Œæ¯”å¦‚Aå’ŒBè·ç¦»10ï¼ŒAå’ŒCå³å¯¹é½ç­‰ã€‚å…·ä½“çš„åæ ‡ä¼šæœ‰autolayoutå¸®ä½ ç®—ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"iOSå¼€å‘éŸ³é¢‘æ’­æ”¾åŸºç¡€â€”â€”AVAudioPlayerçš„åº”ç”¨","slug":"66iOSå¼€å‘éŸ³é¢‘æ’­æ”¾åŸºç¡€â€”â€”AVAudioPlayerçš„åº”ç”¨","date":"2015-05-25T16:00:00.000Z","updated":"2021-06-29T07:04:17.883Z","comments":true,"path":"2015/05/26/66iOSå¼€å‘éŸ³é¢‘æ’­æ”¾åŸºç¡€â€”â€”AVAudioPlayerçš„åº”ç”¨/","link":"","permalink":"http://huishao.cc/2015/05/26/66iOSå¼€å‘éŸ³é¢‘æ’­æ”¾åŸºç¡€â€”â€”AVAudioPlayerçš„åº”ç”¨/","excerpt":"","text":"iOSéŸ³é¢‘å¼€å‘â€”â€”AVAudioPlayeråº”ç”¨AVAudioPlayeræ˜¯ç³»ç»Ÿæä¾›ç»™æˆ‘ä»¬çš„ä¸€ä¸ªéŸ³é¢‘æ’­æ”¾ç±»ï¼Œåœ¨AVFoundationæ¡†æ¶ä¸‹ï¼Œé€šè¿‡å®ƒï¼Œæˆ‘ä»¬å¯ä»¥å®ç°ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„éŸ³ä¹æ’­æ”¾å™¨ã€‚é¦–å…ˆï¼Œåœ¨é¡¹ç›®ä¸­æˆ‘ä»¬éœ€è¦å¯¼å…¥AVFoundationè¿™ä¸ªæ¡†æ¶ã€‚ ä¸€ã€AVAudioPlayeræ–¹æ³•ä¸å±æ€§è¯¦è§£åˆå§‹åŒ–æ–¹æ³•æœ‰ä¸¤ç§ï¼Œé€šè¿‡éŸ³é¢‘çš„è·¯å¾„æˆ–è€…éŸ³é¢‘dataæ•°æ®åˆå§‹åŒ–playerå¯¹è±¡ 12- (instancetype)initWithContentsOfURL:(NSURL *)url error:(NSError **)outError;- (instancetype)initWithData:(NSData *)data error:(NSError **)outError; æ³¨æ„ï¼šæ”¯æŒçš„éŸ³é¢‘æ ¼å¼æœ‰:AAC,ALAC,HE-AAC,iLBC,IMA4,MP3. å‡†å¤‡æ’­æ”¾éŸ³é¢‘ï¼Œè¿”å›å€¼æ ‡å¿—æ˜¯å¦è§£ææˆåŠŸï¼Œæ˜¯å¦å¯ä»¥æ’­æ”¾ã€‚ 1- (BOOL)prepareToPlay; å¼€å§‹æ’­æ”¾éŸ³é¢‘ 1- (BOOL)play; åœ¨ä¸€æ®µæ—¶é—´é—´éš”åæ’­æ”¾ 1- (BOOL)playAtTime:(NSTimeInterval)time; æš‚åœæ’­æ”¾ï¼Œå¹¶ä¸”å‡†å¤‡å¥½ç»§ç»­æ’­æ”¾ 1- (void)pause; åœæ­¢æ’­æ”¾ï¼Œä¸å†å‡†å¤‡å¥½ç»§ç»­æ’­æ”¾ 1- (void)stop; è·å–æ˜¯å¦æ­£åœ¨æ’­æ”¾ 1@property(readonly, getter=isPlaying) BOOL playing; è·å–å½“å‰éŸ³é¢‘å£°é“æ•° 1@property(readonly) NSUInteger numberOfChannels; è·å–å½“å‰éŸ³é¢‘æ—¶é•¿ 1@property(readonly) NSTimeInterval duration; è·å–åˆ›å»ºæ—¶çš„éŸ³é¢‘è·¯å¾„ 1@property(readonly) NSURL *url; è·å–åˆ›å»ºæ—¶çš„éŸ³é¢‘æ•°æ® 1@property(readonly) NSData *data; è®¾ç½®å£°é“åç§»é‡ï¼Œ0ä¸ºä¸­å¿ƒï¼Œ-1ä¸ºåªæœ‰å·¦å£°é“ï¼Œ1ä¸ºåªæœ‰å³å£°é“ 1@property float pan; è®¾ç½®éŸ³é¢‘éŸ³é‡ï¼Œå–å€¼ä¸º0-1ä¹‹é—´ 1@property float volume; è®¾ç½®æ˜¯å¦å¯ä»¥æ”¹å˜æ’­æ”¾é€Ÿåº¦ 1@property BOOL enableRate; æ³¨æ„:è®¾ç½®è¿™ä¸ªå±æ€§å‰å¿…é¡»å…ˆè°ƒç”¨prepareToPlayè¿™ä¸ªæ–¹æ³•ã€‚ è®¾ç½®æ’­æ”¾é€Ÿåº¦ï¼Œ1ä¸ºæ­£å¸¸ï¼Œ0.5ä¸ºä¸€åŠé€Ÿåº¦ï¼Œ2.0ä¸º2å€é€Ÿåº¦ 1@property float rate; è®¾ç½®å½“å‰æ’­æ”¾çš„æ—¶é—´ç‚¹ 1@property NSTimeInterval currentTime; è®¾ç½®éŸ³é¢‘æ’­æ”¾å¾ªç¯æ¬¡æ•° 1@property NSInteger numberOfLoops; è·å–éŸ³é¢‘è®¾ç½®å­—å…¸ 1@property(readonly) NSDictionary *settings; æ˜¯å¦å¼€å¯ä»ªè¡¨è®¡æ•°åŠŸèƒ½ 1@property(getter=isMeteringEnabled) BOOL meteringEnabled; æ›´æ–°ä»ªè¡¨è®¡æ•°çš„å€¼ 1- (void)updateMeters; è·å–æŒ‡å®šå£°é“éŸ³é¢‘å³°å€¼ 1- (float)peakPowerForChannel:(NSUInteger)channelNumber; è·å–æŒ‡å®šå£°é“éŸ³é¢‘å¹³å‡å€¼ 1- (float)averagePowerForChannel:(NSUInteger)channelNumber; äºŒã€AVAudioPlayerDelegateæ–¹æ³•è¯¦è§£éŸ³é¢‘æ’­æ”¾ç»“æŸåè°ƒç”¨çš„å‡½æ•° 1- (void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag; æ’­æ”¾é‡åˆ°é”™è¯¯æ—¶è°ƒç”¨çš„å‡½æ•° 1- (void)audioPlayerDecodeErrorDidOccur:(AVAudioPlayer *)player error:(NSError *)error; å­¦ä¹ ä½¿ç”¨ æ¬¢è¿è½¬è½½ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSåå°éŸ³é¢‘æ’­æ”¾åŠé”å±ç•Œé¢æ˜¾ç¤ºéŸ³é¢‘ä¿¡æ¯ç”¨","slug":"67iOSåå°éŸ³é¢‘æ’­æ”¾åŠé”å±ç•Œé¢æ˜¾ç¤ºéŸ³é¢‘ä¿¡æ¯","date":"2015-05-25T16:00:00.000Z","updated":"2021-06-29T07:45:33.360Z","comments":true,"path":"2015/05/26/67iOSåå°éŸ³é¢‘æ’­æ”¾åŠé”å±ç•Œé¢æ˜¾ç¤ºéŸ³é¢‘ä¿¡æ¯/","link":"","permalink":"http://huishao.cc/2015/05/26/67iOSåå°éŸ³é¢‘æ’­æ”¾åŠé”å±ç•Œé¢æ˜¾ç¤ºéŸ³é¢‘ä¿¡æ¯/","excerpt":"","text":"iOSåå°æ’­æ”¾éŸ³ä¹åŠç”¨æˆ·äº¤äº’å¤„ç†åå°æ’­æ”¾æ˜¯ä»»ä½•ä¸€ä¸ªéŸ³é¢‘è½¯ä»¶éƒ½æ”¯æŒçš„åŠŸèƒ½ï¼Œåœ¨ä¸Šä¸€ç¯‡åšå®¢ä¸­ï¼Œè¯¦ç»†ä»‹ç»äº†ä½¿ç”¨AVAudioPlayeræ’­æ”¾éŸ³é¢‘çš„æ–¹æ³•ï¼Œè¿™ç¯‡åšå®¢å°†å¯¹åå°çš„å¤„ç†åšä»‹ç»ï¼Œå…³äºæ’­æ”¾ä¸è®¾ç½®éŸ³é¢‘çš„åšå®¢åœ°å€ï¼šhttp://my.oschina.net/u/2340880/blog/420129ã€‚ ä¸€ã€è®¾ç½®åå°æ’­æ”¾iOSè®¾ç½®åå°éŸ³é¢‘æ’­æ”¾çš„æ­¥éª¤éå¸¸ç®€å•ï¼Œé¦–å…ˆéœ€è¦åœ¨ç³»ç»Ÿè®¾ç½®çš„plistæ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ªé”®Required background modesï¼Œå€¼ä¸ºApp plays audio or streams audio/video using AirPlayï¼Œå¦‚ä¸‹ï¼š ç„¶åè¿›è¡Œå¦‚ä¸‹ä»£ç è®¾ç½®ï¼š 123 AVAudioSession *session = [AVAudioSession sharedInstance]; [session setActive:YES error:nil]; [session setCategory:AVAudioSessionCategoryPlayback error:nil]; æ­¤æ—¶æ’­æ”¾éŸ³é¢‘æ—¶æˆ‘ä»¬ç‚¹å‡»HOMEå›åˆ°ä¸»é¡µé¢ï¼Œä¼šå‘ç°éŸ³é¢‘ä¸ä¼šåœï¼Œå·²ç»å®ç°åå°æ’­æ”¾çš„åŠŸèƒ½ã€‚ äºŒã€è®¾ç½®åå°ç”¨æˆ·äº¤äº’åœ¨appDelegateä¸­ï¼Œæˆ‘ä»¬éœ€è¦å…ˆæ³¨å†Œå“åº”åå°æ§åˆ¶ï¼š 1[[UIApplication sharedApplication] beginReceivingRemoteControlEvents]; ç„¶ååœ¨appDelegateä¸­æˆ‘ä»¬å®ç°å¦‚ä¸‹å‡½æ•°å¤„ç†åå°ä¼ é€’ç»™æˆ‘ä»¬çš„ä¿¡æ¯ï¼š 12345-(void)remoteControlReceivedWithEvent:(UIEvent *)event&#123; if (event.type==UIEventTypeRemoteControl) &#123; NSLog(@&quot;%ld&quot;,event.subtype); &#125;&#125; eventä¸­çš„subtypeæ˜¯æ“ä½œç±»å‹ï¼Œæˆ‘ä»¬æ‰“å¼€ç³»ç»Ÿæ¡Œé¢æŠ½å±‰ï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹çš„æ§åˆ¶é”®ï¼š subtypeä¸­çš„æšä¸¾ä¾¿æ˜¯ç‚¹å‡»è¿™äº›æ§åˆ¶é”®åä¼ é€’ç»™æˆ‘ä»¬çš„æ¶ˆæ¯ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®è¿™äº›æ¶ˆæ¯åœ¨appå†…åšé€»è¾‘å¤„ç†ã€‚æšä¸¾å¦‚ä¸‹ï¼Œå…¶ä¸­åªæœ‰100ä¹‹åçš„åœ¨éŸ³é¢‘æ§åˆ¶ä¸­å¯¹æˆ‘ä»¬æœ‰æ•ˆï¼š 12345678910111213141516171819202122232425262728typedef NS_ENUM(NSInteger, UIEventSubtype) &#123; // available in iPhone OS 3.0 UIEventSubtypeNone = 0, // for UIEventTypeMotion, available in iPhone OS 3.0 UIEventSubtypeMotionShake = 1, //è¿™ä¹‹åçš„æ˜¯æˆ‘ä»¬éœ€è¦å…³æ³¨çš„æšä¸¾ä¿¡æ¯ // for UIEventTypeRemoteControl, available in iOS 4.0 //ç‚¹å‡»æ’­æ”¾æŒ‰é’®æˆ–è€…è€³æœºçº¿æ§ä¸­é—´é‚£ä¸ªæŒ‰é’® UIEventSubtypeRemoteControlPlay = 100, //ç‚¹å‡»æš‚åœæŒ‰é’® UIEventSubtypeRemoteControlPause = 101, //ç‚¹å‡»åœæ­¢æŒ‰é’® UIEventSubtypeRemoteControlStop = 102, //ç‚¹å‡»æ’­æ”¾ä¸æš‚åœå¼€å…³æŒ‰é’®(iphoneæŠ½å±‰ä¸­ä½¿ç”¨è¿™ä¸ª) UIEventSubtypeRemoteControlTogglePlayPause = 103, //ç‚¹å‡»ä¸‹ä¸€æ›²æŒ‰é’®æˆ–è€…è€³æœºä¸­é—´æŒ‰é’®ä¸¤ä¸‹ UIEventSubtypeRemoteControlNextTrack = 104, //ç‚¹å‡»ä¸Šä¸€æ›²æŒ‰é’®æˆ–è€…è€³æœºä¸­é—´æŒ‰é’®ä¸‰ä¸‹ UIEventSubtypeRemoteControlPreviousTrack = 105, //å¿«é€€å¼€å§‹ ç‚¹å‡»è€³æœºä¸­é—´æŒ‰é’®ä¸‰ä¸‹ä¸æ”¾å¼€ UIEventSubtypeRemoteControlBeginSeekingBackward = 106, //å¿«é€€ç»“æŸ è€³æœºå¿«é€€æ§åˆ¶æ¾å¼€å UIEventSubtypeRemoteControlEndSeekingBackward = 107, //å¼€å§‹å¿«è¿› è€³æœºä¸­é—´æŒ‰é’®ä¸¤ä¸‹ä¸æ”¾å¼€ UIEventSubtypeRemoteControlBeginSeekingForward = 108, //å¿«è¿›ç»“æŸ è€³æœºå¿«è¿›æ“ä½œæ¾å¼€å UIEventSubtypeRemoteControlEndSeekingForward = 109,&#125;; ä¸‰ã€è®¾ç½®åå°ä¿¡æ¯æ˜¾ç¤ºåŠé”å±ç•Œé¢è®¾ç½®è®¾ç½®é”å±ç•Œé¢æ˜¾ç¤ºä¿¡æ¯çš„åŸç†æ˜¯é€šè¿‡è®¾ç½®ä¸€ä¸ªç³»ç»Ÿçš„å­—å…¸ï¼Œå½“éŸ³é¢‘å¼€å§‹æ’­æ”¾æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ä»è¿™ä¸ªå­—å…¸ä¸­è¯»å–è¦æ˜¾ç¤ºçš„ä¿¡æ¯ï¼Œå¦‚æœéœ€è¦åŠ¨æ€æ˜¾ç¤ºï¼Œæˆ‘ä»¬åªéœ€è¦ä¸æ–­æ›´æ–°è¿™ä¸ªå­—å…¸å³å¯ã€‚é¦–å…ˆéœ€è¦æ·»åŠ &lt;MediaPlayer/MediaPlayer.h&gt;è¿™ä¸ªå¤´æ–‡ä»¶ã€‚ ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314151617 NSMutableDictionary *dict = [[NSMutableDictionary alloc] init]; //è®¾ç½®æ­Œæ›²é¢˜ç›® [dict setObject:@&quot;é¢˜ç›®&quot; forKey:MPMediaItemPropertyTitle]; //è®¾ç½®æ­Œæ‰‹å [dict setObject:@&quot;æ­Œæ‰‹&quot; forKey:MPMediaItemPropertyArtist]; //è®¾ç½®ä¸“è¾‘å [dict setObject:@&quot;ä¸“è¾‘&quot; forKey:MPMediaItemPropertyAlbumTitle]; //è®¾ç½®æ˜¾ç¤ºçš„å›¾ç‰‡ UIImage *newImage = [UIImage imageNamed:@&quot;43.png&quot;]; [dict setObject:[[MPMediaItemArtwork alloc] initWithImage:newImage] forKey:MPMediaItemPropertyArtwork]; //è®¾ç½®æ­Œæ›²æ—¶é•¿ [dict setObject:[NSNumber numberWithDouble:300] forKey:MPMediaItemPropertyPlaybackDuration]; //è®¾ç½®å·²ç»æ’­æ”¾æ—¶é•¿ [dict setObject:[NSNumber numberWithDouble:150] forKey:MPNowPlayingInfoPropertyElapsedPlaybackTime]; //æ›´æ–°å­—å…¸ [[MPNowPlayingInfoCenter defaultCenter] setNowPlayingInfo:dict]; æ•ˆæœå¦‚ä¸‹ï¼š ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"æ ‡ç­¾ä¹‹ç¾å…«â€”â€”ç½‘é¡µæ¡†æ¶","slug":"65æ ‡ç­¾ä¹‹ç¾å…«â€”â€”ç½‘é¡µæ¡†æ¶","date":"2015-05-24T16:00:00.000Z","updated":"2021-06-29T01:59:00.691Z","comments":true,"path":"2015/05/25/65æ ‡ç­¾ä¹‹ç¾å…«â€”â€”ç½‘é¡µæ¡†æ¶/","link":"","permalink":"http://huishao.cc/2015/05/25/65æ ‡ç­¾ä¹‹ç¾å…«â€”â€”ç½‘é¡µæ¡†æ¶/","excerpt":"","text":"æ ‡ç­¾ä¹‹ç¾â€”â€”ç½‘é¡µæ¡†æ¶çš„åº”ç”¨ä¸€ã€æ¡†æ¶é›†æ¡†æ¶é›†ç”¨æ¥è®¾ç½®æ¡†æ¶çš„å±æ€§ï¼Œä¿®é¥°æ¡†æ¶çš„æ€»ä½“æ•ˆæœã€‚ 1ã€æ¡†æ¶å®½åº¦colså±æ€§ç”¨æ¥è®¾ç½®æ¡†æ¶çš„å®½åº¦ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678&lt;body&gt;&lt;frameset cols=&quot;30%,30%,30%,10%&quot;&gt;&lt;frame src=&quot;1.html&quot;&gt;&lt;frame src=&quot;2.html&quot;&gt;&lt;frame src=&quot;3.html&quot;&gt;&lt;frame src=&quot;4.html&quot;&gt;&lt;/frameset&gt;&lt;/body&gt; å…¶ä¸­å±æ€§è®¾ç½®çš„å€¼å¯ä»¥æ˜¯ç™¾åˆ†æ¯”ï¼Œå¯ä»¥æ˜¯å›ºå®šå€¼ï¼Œ*ç¬¦å·è¡¨ç¤ºé™¤äº†å·²ç»åˆ†é…åçš„å‰©ä½™ç©ºé—´ã€‚ä¸Šé¢ä»£ç ä¸­æ¯ä¸ªhtmlæ–‡ä»¶è®¾ç½®ä¸åŒçš„èƒŒæ™¯é¢œè‰²ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š 2ã€æ¡†æ¶é«˜åº¦ä½¿ç”¨rowså±æ€§å¯æ˜¯è®¾ç½®æ¡†æ¶çš„é«˜åº¦ã€‚å…¶ç”¨æ³•å’Œcolså±æ€§ç±»ä¼¼ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678&lt;body&gt;&lt;frameset rows=&quot;30%,30%,30%,10%&quot;&gt;&lt;frame src=&quot;1.html&quot;&gt;&lt;frame src=&quot;2.html&quot;&gt;&lt;frame src=&quot;3.html&quot;&gt;&lt;frame src=&quot;4.html&quot;&gt;&lt;/frameset&gt;&lt;/body&gt; æ³¨æ„ï¼šå®½åº¦å’Œé«˜åº¦è¿™ä¸¤ä¸ªå±æ€§ï¼Œä¸èƒ½åŒæ—¶ä½¿ç”¨ï¼Œåªèƒ½äºŒé€‰ä¸€ã€‚ 3ã€è¾¹æ¡†å®½åº¦å¯ä»¥é€šè¿‡borderå±æ€§è®¾ç½®æ¡†æ¶è¾¹æ¡†çš„å®½åº¦ï¼Œå¦‚ä¸‹ï¼š 12345678&lt;body&gt;&lt;frameset rows=&quot;30%,30%,30%,10%&quot; border=&quot;10&quot;&gt;&lt;frame src=&quot;1.html&quot;&gt;&lt;frame src=&quot;2.html&quot;&gt;&lt;frame src=&quot;3.html&quot;&gt;&lt;frame src=&quot;4.html&quot;&gt;&lt;/frameset&gt;&lt;/body&gt; 4ã€è¾¹æ¡†é¢œè‰²å’Œå…¶ä»–å±æ€§ç±»ä¼¼ï¼Œé€šè¿‡bordercolorå¯ä»¥è®¾ç½®è¾¹æ¡†çš„é¢œè‰²ã€‚ 5ã€è®¾ç½®æ˜¯å¦æ˜¾ç¤ºè¾¹æ¡†é€šè¿‡è®¾ç½®frameborderå¯ä»¥æ˜¾ç¤ºå’Œéšè—è¾¹æ¡†ï¼Œå…¶å€¼å¯å–0æˆ–è€…1ã€‚éšè—æ•ˆæœå¦‚ä¸‹ï¼š 12345678&lt;body&gt;&lt;frameset rows=&quot;30%,30%,30%,10%&quot; frameborder=&quot;0&quot;&gt;&lt;frame src=&quot;1.html&quot;&gt;&lt;frame src=&quot;2.html&quot;&gt;&lt;frame src=&quot;3.html&quot;&gt;&lt;frame src=&quot;4.html&quot;&gt;&lt;/frameset&gt;&lt;/body&gt; äºŒã€æ¡†æ¶æ¡†æ¶å’Œæ¡†æ¶é›†æ˜¯å¯ä»¥åµŒå¥—çš„ã€‚å¯ä»¥åœ¨ä¸€ä¸ªæ¡†æ¶ä¸­ç»§ç»­åµŒå¥—æ¡†æ¶é›†ã€‚ 1ã€è®¾ç½®æ¡†æ¶å¤§å°ä¸å¯è°ƒèŠ‚ä½¿ç”¨çš„æ¡†æ¶ï¼Œé»˜è®¤å½“é¼ æ ‡ç‚¹å‡»æ‹‰åŠ¨æ—¶æ˜¯å¯ä»¥è°ƒèŠ‚å¤§å°çš„ï¼Œå¯ä»¥è®¾ç½®nosize=â€nosizeâ€æ¥è®¾ç½®ä¸å¯è°ƒèŠ‚ã€‚ 2ã€è®¾ç½®æ¡†æ¶çš„æ»šåŠ¨æ¡scrollingå±æ€§å¯ä»¥è®¾ç½®æ¡†æ¶æ˜¯å¦æ˜¾ç¤ºæ»šåŠ¨æ¡,å¯ä»¥è®¾ç½®yesæˆ–è€…noã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"HTMLå­¦ä¹ ç¬”è®°","slug":"HTMLå­¦ä¹ ç¬”è®°","permalink":"http://huishao.cc/categories/HTMLå­¦ä¹ ç¬”è®°/"}],"tags":[],"keywords":[{"name":"HTMLå­¦ä¹ ç¬”è®°","slug":"HTMLå­¦ä¹ ç¬”è®°","permalink":"http://huishao.cc/categories/HTMLå­¦ä¹ ç¬”è®°/"}]},{"title":"iOSå¤šçº¿ç¨‹ç¼–ç¨‹ä¹‹ä¸‰â€”â€”GCDçš„åº”ç”¨","slug":"64iOSå¤šçº¿ç¨‹ç¼–ç¨‹ä¹‹ä¸‰â€”â€”GCDçš„åº”ç”¨","date":"2015-05-20T16:00:00.000Z","updated":"2021-06-29T01:57:52.855Z","comments":true,"path":"2015/05/21/64iOSå¤šçº¿ç¨‹ç¼–ç¨‹ä¹‹ä¸‰â€”â€”GCDçš„åº”ç”¨/","link":"","permalink":"http://huishao.cc/2015/05/21/64iOSå¤šçº¿ç¨‹ç¼–ç¨‹ä¹‹ä¸‰â€”â€”GCDçš„åº”ç”¨/","excerpt":"","text":"iOSå¤šçº¿ç¨‹ç¼–ç¨‹ä¹‹ä¸‰â€”â€”GCDçš„åº”ç”¨ä¸€ã€å¼•è¨€åœ¨è½¯ä»¶å¼€å‘ä¸­ä½¿ç”¨å¤šçº¿ç¨‹å¯ä»¥å¤§å¤§çš„æå‡ç”¨æˆ·ä½“éªŒåº¦ï¼Œå¢åŠ å·¥ä½œæ•ˆç‡ã€‚iOSç³»ç»Ÿä¸­æä¾›äº†å¤šç§åˆ†çº¿ç¨‹ç¼–ç¨‹çš„æ–¹æ³•ï¼Œåœ¨å‰ä¸¤ç¯‡åšå®¢éƒ½æœ‰æåŠï¼š NSThreadç±»è¿›è¡Œå¤šçº¿ç¨‹ç¼–ç¨‹ï¼šhttp://my.oschina.net/u/2340880/blog/416524ã€‚ NSOperationè¿›è¡Œå¤šçº¿ç¨‹æ“ä½œç¼–ç¨‹ï¼šhttp://my.oschina.net/u/2340880/blog/416782ã€‚ ä¸Šä¸¤ä¸ªè¿›è¡Œå¤šçº¿ç¨‹ç¼–ç¨‹çš„æœºåˆ¶éƒ½æ˜¯å°è£…äºObject-Cçš„ç±»ä¸æ–¹æ³•ã€‚è¿™ç¯‡åšå®¢å°†è®¨è®ºçš„Grand Central Dispatch(GCD)æœºåˆ¶ï¼Œåˆ™æ˜¯åŸºäºCè¯­è¨€çš„ï¼Œç›¸æ¯”ä¸Šé¢ä¸¤ç§æœºåˆ¶ï¼ŒGCDæ›´åŠ é«˜æ•ˆï¼Œå¹¶ä¸”çº¿ç¨‹æœ‰ç³»ç»Ÿç®¡ç†ï¼Œä¼šè‡ªåŠ¨è¿ç”¨å¤šæ ¸è¿ç®—ã€‚å› ä¸ºè¿™äº›ä¼˜åŠ¿ï¼ŒGCDæ˜¯appleæ¨èæˆ‘ä»¬ä½¿ç”¨çš„å¤šçº¿ç¨‹è§£å†³æ–¹æ¡ˆã€‚ äºŒã€GCDçš„è°ƒåº¦æœºåˆ¶GCDæœºåˆ¶ä¸­ä¸€ä¸ªå¾ˆé‡è¦çš„æ¦‚å¿µæ˜¯è°ƒåº¦é˜Ÿåˆ—ï¼Œæˆ‘ä»¬å¯¹çº¿ç¨‹çš„æ“ä½œå®é™…ä¸Šæ˜¯ç”±è°ƒåº¦é˜Ÿåˆ—å®Œæˆçš„ã€‚æˆ‘ä»¬åªéœ€è¦å°†è¦æ‰§è¡Œçš„ä»»åŠ¡æ·»åŠ åˆ°åˆé€‚çš„è°ƒåº¦é˜Ÿåˆ—ä¸­å³å¯ã€‚ 1ã€è°ƒåº¦é˜Ÿåˆ—çš„ç±»å‹è°ƒåº¦é˜Ÿåˆ—æœ‰ä¸‰ç§ç±»å‹ï¼š ï¼ˆ1ï¼‰ä¸»é˜Ÿåˆ— å…¶ä¸­çš„ä»»åŠ¡åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œå› ä¸ºå…¶ä¼šé˜»å¡ä¸»çº¿ç¨‹ï¼Œæ‰€ä»¥è¿™æ˜¯ä¸€ä¸ªä¸²è¡Œçš„é˜Ÿåˆ—ã€‚å¯ä»¥é€šè¿‡dispatch_get_main_queue()æ–¹æ³•å¾—åˆ°ã€‚ ï¼ˆ2ï¼‰å…¨å±€å¹¶è¡Œé˜Ÿåˆ— é˜Ÿåˆ—ä¸­ä»»åŠ¡çš„æ‰§è¡Œæ–¹å¼æ˜¯ä¸¥æ ¼æŒ‰ç…§å…ˆè¿›å…ˆå‡ºçš„æ¨¡å¼è¿›è¡Œäº†ã€‚å¦‚æœæ˜¯ä¸²è¡Œçš„é˜Ÿåˆ—ï¼Œåˆ™å½“ä¸€ä¸ªä»»åŠ¡ç»“æŸåï¼Œæ‰ä¼šå¼€å¯å¦ä¸€ä¸ªä»»åŠ¡ï¼Œå¦‚æœæ˜¯å¹¶è¡Œé˜Ÿåˆ—ï¼Œåˆ™ä»»åŠ¡çš„å¼€å¯é¡ºåºæ˜¯å’Œæ·»åŠ é¡ºåºä¸€è‡´çš„ã€‚ç³»ç»Ÿä¸ºiOSåº”ç”¨è‡ªåŠ¨åˆ›å»ºäº†å››ä¸ªå…¨å±€å…±äº«çš„å¹¶å‘é˜Ÿåˆ—ã€‚ä½¿ç”¨å¦‚ä¸‹å‡½æ•°è·å¾—ï¼š dispatch_get_global_queue(long identifier, unsigned long flags); å…¶ä¸­ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¿™ä¸ªé˜Ÿåˆ—çš„idï¼Œç³»ç»Ÿçš„å››ä¸ªå…¨å±€é˜Ÿåˆ—é»˜è®¤çš„ä¼˜å…ˆçº§ä¸åŒï¼Œè¿™ä¸ªå‚æ•°å¯å¡«çš„å®šä¹‰å¦‚ä¸‹ï¼š 1234#define DISPATCH_QUEUE_PRIORITY_HIGH 2//ä¼˜å…ˆçº§æœ€é«˜çš„å…¨å±€é˜Ÿåˆ—#define DISPATCH_QUEUE_PRIORITY_DEFAULT 0//ä¼˜å…ˆçº§ä¸­ç­‰çš„å…¨å±€é˜Ÿåˆ—#define DISPATCH_QUEUE_PRIORITY_LOW (-2)//ä¼˜å…ˆçº§ä½çš„å…¨å±€é˜Ÿåˆ—#define DISPATCH_QUEUE_PRIORITY_BACKGROUND INT16_MIN//åå°çš„å…¨å±€é˜Ÿåˆ— ä¼˜å…ˆçº§æœ€ä½ è¿™ä¸ªå‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°ï¼ŒæŒ‰ç…§å®˜æ–¹æ–‡æ¡£çš„è¯´æ³•æ˜¯æœ‰å¾…æœªæ¥ä½¿ç”¨ï¼Œç°åœ¨æˆ‘ä»¬éƒ½å¡«0å³å¯ã€‚ ï¼ˆ3ï¼‰è‡ªå®šä¹‰é˜Ÿåˆ— ä¸Šé¢çš„ä¸¤ç§é˜Ÿåˆ—éƒ½æ˜¯ç³»ç»Ÿä¸ºæˆ‘ä»¬åˆ›å»ºå¥½çš„ï¼Œæˆ‘ä»¬åªéœ€è¦è·å–åˆ°ä»–ä»¬ï¼Œå°†ä»»åŠ¡æ·»åŠ å³å¯ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬å¯å¯ä»¥åˆ›å»ºæˆ‘ä»¬è‡ªå·±çš„é˜Ÿåˆ—ï¼ŒåŒ…æ‹¬ä¸²è¡Œçš„å’Œå¹¶è¡Œçš„ã€‚ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•åˆ›å»ºï¼š 1dispatch_queue_t queue = dispatch_queue_create(&quot;myQueue&quot;, DISPATCH_QUEUE_SERIAL); å…¶ä¸­ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¿™ä¸ªé˜Ÿåˆ—çš„åå­—ï¼Œç¬¬äºŒä¸ªå‚æ•°å†³å®šåˆ›å»ºçš„æ˜¯ä¸²è¡Œçš„è¿˜æ˜¯å¹¶è¡Œçš„é˜Ÿåˆ—ã€‚å¡«å†™DISPATCH_QUEUE_SERIALæˆ–è€…NULLåˆ›å»ºä¸²è¡Œé˜Ÿåˆ—ï¼Œå¡«å†™DISPATCH_QUEUE_CONCURRENTåˆ›å»ºå¹¶è¡Œé˜Ÿåˆ—ã€‚ 2ã€æ·»åŠ ä»»åŠ¡åˆ°é˜Ÿåˆ—ä¸­ä½¿ç”¨dispatch_sync(dispatch_queue_t queue, dispatch_block_t block)å‡½æ•°æˆ–è€…dispatch_async(dispatch_queue_t queue, dispatch_block_t block)å‡½æ•°æ¥åŒæ­¥æˆ–è€…å¼‚æ­¥çš„æ‰§è¡Œä»»åŠ¡ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view, typically from a nib. dispatch_queue_t queue = dispatch_queue_create(&quot;myQueue&quot;, DISPATCH_QUEUE_SERIAL); dispatch_sync(queue, ^&#123; NSLog(@&quot;%@:1&quot;,[NSThread currentThread]); &#125;); dispatch_async(queue, ^&#123; NSLog(@&quot;%@:2&quot;,[NSThread currentThread]); &#125;);&#125; æ‰“å°ç»“æœå¦‚ä¸‹ï¼š å¯ä»¥çœ‹å‡ºç¬¬ä¸€ä¸ªä»»åŠ¡åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œç¬¬äºŒä¸ªåœ¨åˆ†çº¿ç¨‹ä¸­æ‰§è¡Œã€‚ ä¸‰ã€é˜Ÿåˆ—è°ƒåº¦æœºåˆ¶çš„æ›´å¤šæŠ€å·§é€šè¿‡ä¸Šé¢çš„æ¼”ç¤ºï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥è¿ç”¨é˜Ÿåˆ—è¿›è¡Œå¤šçº¿ç¨‹çš„æ‰§è¡Œä»»åŠ¡ï¼Œä½†æ˜¯GCDçš„å¼ºå¤§ä¹‹å¤„è¿œè¿œä¸æ­¢å¦‚æ­¤ã€‚ 1ã€ä½¿ç”¨é˜Ÿåˆ—ç»„å¦‚æœæœ‰è¿™æ ·ä¸‰ä¸ªä»»åŠ¡ï¼ŒAä¸Bæ˜¯æ²¡æœ‰å…³ç³»çš„ï¼Œä»–ä»¬å¯ä»¥å¹¶è¡Œæ‰§è¡Œï¼ŒCå¿…é¡»åœ¨A,Bç»“æŸä¹‹åæ‰èƒ½æ‰§è¡Œï¼Œå½“ç„¶ï¼Œå®ç°è¿™æ ·çš„é€»è¾‘å¹¶ä¸å›°éš¾ï¼Œä½¿ç”¨KVOå°±å¯ä»¥å®ç°ï¼Œä½†æ˜¯ä½¿ç”¨é˜Ÿåˆ—ç»„å¤„ç†è¿™æ ·çš„é€»è¾‘ï¼Œä»£ç ä¼šæ›´åŠ æ¸…æ™°ç®€å•ã€‚ å¯ä»¥ä½¿ç”¨dispatch_group_create()åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—ç»„ï¼Œä½¿ç”¨å¦‚ä¸‹å‡½æ•°å°†é˜Ÿåˆ—æ·»åŠ åˆ°é˜Ÿåˆ—ç»„ä¸­ï¼š 123void dispatch_group_async(dispatch_group_t group, dispatch_queue_t queue, dispatch_block_t block); é˜Ÿåˆ—ç»„ä¸­çš„é˜Ÿåˆ—æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view, typically from a nib. //åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—ç»„ dispatch_group_t group=dispatch_group_create(); åˆ›å»ºä¸€ä¸ªå¼‚æ­¥é˜Ÿåˆ— dispatch_queue_t queue=dispatch_queue_create(&quot;myQueue&quot;, DISPATCH_QUEUE_CONCURRENT); dispatch_group_async(group, queue, ^&#123; for (int i=0; i&lt;10; i++) &#123; NSLog(@&quot;%@:%d&quot;,[NSThread currentThread],i); &#125; &#125;); dispatch_group_async(group, queue, ^&#123; for (int i=0; i&lt;10; i++) &#123; NSLog(@&quot;%@:%d&quot;,[NSThread currentThread],i); &#125; &#125;); //é˜»å¡çº¿ç¨‹ç›´åˆ°é˜Ÿåˆ—ä»»åŠ¡å®Œæˆ dispatch_group_wait(group,DISPATCH_TIME_FOREVER); for (int i=0; i&lt;10; i++) &#123; NSLog(@&quot;over:%d&quot;,i); &#125;&#125; æ‰“å°å‡ºæ¥çš„ä¿¡æ¯å¦‚ä¸‹ï¼š å¯ä»¥çœ‹å‡ºï¼Œé˜Ÿåˆ—ä¸­çš„ä»»åŠ¡æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ï¼Œå¹¶ä¸”ç­‰å¾…é˜Ÿåˆ—ç»„ä¸­é˜Ÿåˆ—ä»»åŠ¡å…¨éƒ¨æ‰§è¡Œåæ‰æ‰§è¡Œåé¢çš„ä»»åŠ¡ã€‚è¿™æ ·çš„åšæ³•åœ¨å®é™…åº”ç”¨ä¸­æˆ‘ä»¬å¾ˆå°‘ä½¿ç”¨ï¼Œé€šå¸¸æˆ‘ä»¬ä¼šæŠŠåç»­çš„ä»»åŠ¡åœ¨æ”¾åœ¨å¼‚æ­¥ä¸­æ‰§è¡Œï¼Œåšæ³•å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view, typically from a nib. //åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—ç»„ dispatch_group_t group=dispatch_group_create(); //åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ— dispatch_queue_t queue=dispatch_queue_create(&quot;myQueue&quot;, DISPATCH_QUEUE_CONCURRENT); //æ·»åŠ é˜Ÿåˆ—ä»»åŠ¡åˆ°é˜Ÿåˆ—ç»„ dispatch_group_async(group, queue, ^&#123; for (int i=0; i&lt;10; i++) &#123; NSLog(@&quot;%@:%d&quot;,[NSThread currentThread],i); &#125; &#125;); dispatch_group_async(group, queue, ^&#123; for (int i=0; i&lt;10; i++) &#123; NSLog(@&quot;%@:%d&quot;,[NSThread currentThread],i); &#125; &#125;); //é˜Ÿåˆ—ç»„ä»»åŠ¡æ‰§è¡Œå®Œåæ‰§è¡Œçš„ä»»åŠ¡ dispatch_group_notify(group, dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123; for (int i=0; i&lt;10; i++) &#123; NSLog(@&quot;over:%d&quot;,i); &#125; &#125;); for (int i=0; i&lt;10; i++) &#123; NSLog(@&quot;Finish:%d&quot;,i); &#125; &#125; æ‰“å°ä¿¡æ¯å¦‚ä¸‹ï¼š å¯ä»¥çœ‹å‡ºGCDçš„å¼ºå¤§äº†å§ï¼Œå¤æ‚çš„ä»»åŠ¡é€»è¾‘å…³ç³»å› ä¸ºGCDå˜å¾—ååˆ†æ¸…æ™°ç®€å•ã€‚ 2ã€å¾ªç¯æœºåˆ¶ä¸€å¼€å§‹æˆ‘ä»¬å°±æåˆ°ï¼ŒGCDç›¸æ¯”NSOperationçš„ä¼˜åŠ¿åœ¨äºå¤šæ ¸å¿ƒçš„åº”ç”¨ï¼Œæ›´æ·±å¾—æŒ–æ˜å‡ºäº†ç¡¬ä»¶çš„æ€§èƒ½ã€‚GCDåœ¨å¤šæ ¸æ–¹é¢çš„ä¸€ä¸ªæ˜æ˜¾çš„ç‰¹ç‚¹å°±æ˜¯å¾ªç¯æœºåˆ¶ã€‚ 123 dispatch_apply(10, dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^(size_t i) &#123; NSLog(@&quot;%@:%zu&quot;,[NSThread currentThread],i); &#125;); æ‰“å°ç»“æœå¦‚ä¸‹ï¼š å¯ä»¥çœ‹å‡ºï¼Œç¨‹åºçš„è¿è¡Œæ•ˆç‡åˆä¼šé«˜è®¸å¤šã€‚ 3ã€æ¶ˆæ¯ä¼ é€’æœºåˆ¶dispatch_source_tç±»å‹çš„å¯¹è±¡å¯ä»¥ç”¨æ¥ä¼ é€’å’Œæ¥å—æŸä¸ªæ¶ˆæ¯ï¼Œç„¶åæ‰§è¡Œblockæ–¹æ³•ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view, typically from a nib. //åˆ›å»ºä¸€ä¸ªæ•°æ®å¯¹è±¡ï¼ŒDISPATCH_SOURCE_TYPE_DATA_ADDçš„å«ä¹‰è¡¨ç¤ºæ•°æ®å˜åŒ–æ—¶ç›¸åŠ  dispatch_source_t source = dispatch_source_create(DISPATCH_SOURCE_TYPE_DATA_ADD, 0, 0, dispatch_get_main_queue()); //åˆ›å»ºæ¥æ”¶æ•°æ®å˜åŒ–çš„å¥æŸ„ dispatch_source_set_event_handler(source, ^&#123; NSLog(@&quot;%lu&quot;,dispatch_source_get_data(source)); &#125;); //å¯åŠ¨ dispatch_resume(source); //è®¾ç½®æ•°æ® dispatch_source_merge_data(source, 1); //è¿™æ­¥æ‰§è¡Œå®Œä¹‹åä¼šæ‰§è¡Œæ‰“å°æ–¹æ³•&#125; 4ã€å‘é€å’Œç­‰å¾…ä¿¡å·GCDä¸­è¿˜æœ‰ä¸€ä¸ªé‡è¦çš„æ¦‚å¿µæ˜¯ä¿¡å·é‡ã€‚å®ƒçš„ç”¨æ³•æ³•æ¶ˆæ¯çš„ä¼ é€’æœ‰æ‰€ç±»ä¼¼ï¼Œé€šè¿‡ä»£ç æ¥è§£é‡Šï¼š 1234567 //åˆ›å»ºä¸€ä¸ªä¿¡å·ï¼Œå…¶ä¸­çš„å‚æ•°ä¸ºä¿¡å·çš„åˆå§‹å€¼ dispatch_semaphore_t singer = dispatch_semaphore_create(0); //å‘é€ä¿¡å·ï¼Œä½¿ä¿¡å·é‡+1 dispatch_semaphore_signal(singer); //ç­‰å¾…ä¿¡å·ï¼Œå½“ä¿¡å·é‡å¤§äº0æ—¶æ‰§è¡Œåé¢çš„æ–¹æ³•ï¼Œå¦åˆ™ç­‰å¾…ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºç­‰å¾…çš„è¶…æ—¶æ—¶é•¿ï¼Œä¸‹é¢è®¾ç½®çš„ä¸ºä¸€ç›´ç­‰å¾… dispatch_semaphore_wait(singer, DISPATCH_TIME_FOREVER); NSLog(@&quot;123&quot;); é€šè¿‡å‘é€ä¿¡å·ï¼Œå¯ä»¥è¯•ä¿¡å·é‡+1ï¼Œæ¯æ¬¡æ‰§è¡Œè¿‡ç­‰å¾…ä¿¡å·åï¼Œä¿¡å·é‡ä¼š-1ï¼›å¦‚æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„æ§åˆ¶ä¸åŒé˜Ÿåˆ—ä¸­æ–¹æ³•çš„æ‰§è¡Œæµç¨‹ã€‚ 5ã€æŒ‚èµ·å’Œå¼€å¯ä»»åŠ¡é˜Ÿåˆ—GCDè¿˜æä¾›äº†æš‚åœä¸å¼€å§‹ä»»åŠ¡çš„æ–¹æ³•ï¼Œä½¿ç”¨ void dispatch_suspend(dispatch_object_t object); å¯ä»¥å°†é˜Ÿåˆ—æˆ–è€…é˜Ÿåˆ—ç»„è¿›è¡Œæš‚æ—¶çš„æŒ‚èµ·ï¼Œä½¿ç”¨ void dispatch_resume(dispatch_object_t object); å°†é˜Ÿåˆ—æˆ–è€…é˜Ÿåˆ—ç»„é‡æ–°å¼€å¯ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæš‚åœé˜Ÿåˆ—æ—¶ï¼Œé˜Ÿåˆ—ä¸­æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡å¹¶ä¸ä¼šè¢«ä¸­æ–­ï¼Œä¼šæŒ‚èµ·æœªå¼€å¯çš„ä»»åŠ¡ã€‚ å››ã€å…³äºå†…å­˜ç®¡ç†GCDè™½ç„¶æ˜¯åŸºäºCè¯­è¨€å°è£…çš„æ¡†æ¶ï¼Œä½¿ç”¨äº†é¢å‘å¯¹è±¡çš„æ€æƒ³ã€‚å› æ­¤ï¼Œå®ƒçš„å†…å­˜ç®¡ç†æ˜¯éœ€è¦æˆ‘ä»¬æ³¨æ„çš„ï¼Œä¸è®ºæ˜¯ARCæˆ–è€…MRCï¼Œæˆ‘ä»¬éƒ½åº”è¯¥æ‰‹åŠ¨å»å¤„ç†è¿™äº›å¯¹è±¡ã€‚è¿˜å¥½ï¼ŒGCDçš„å†…å­˜ç®¡ç†æ€è·¯å’ŒObjectâ€”Cæ˜¯å…¼å®¹çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨dispatch_retain()å’Œdispatch_release()æ¥å°†å¼•ç”¨å¯¹è±¡çš„è®¡æ•°è¿›è¡ŒåŠ å‡ã€‚è¿™ä¸€ç‚¹ååˆ†é‡è¦ï¼Œåˆ‡è®°åˆ‡è®°ã€‚ ç–æ¼ä¹‹å¤„ æ¬¢è¿æŒ‡æ­£ å­¦ä¹ ä½¿ç”¨ æ¬¢è¿è½¬è½½ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"æ ‡ç­¾ä¹‹ç¾ä¸ƒâ€”â€”ä¸ºç½‘é¡µæ·»åŠ éŸ³ä¹","slug":"63æ ‡ç­¾ä¹‹ç¾ä¸ƒâ€”â€”ä¸ºç½‘é¡µæ·»åŠ éŸ³ä¹","date":"2015-05-19T16:00:00.000Z","updated":"2021-06-29T01:56:51.181Z","comments":true,"path":"2015/05/20/63æ ‡ç­¾ä¹‹ç¾ä¸ƒâ€”â€”ä¸ºç½‘é¡µæ·»åŠ éŸ³ä¹/","link":"","permalink":"http://huishao.cc/2015/05/20/63æ ‡ç­¾ä¹‹ç¾ä¸ƒâ€”â€”ä¸ºç½‘é¡µæ·»åŠ éŸ³ä¹/","excerpt":"","text":"æ ‡ç­¾ä¹‹ç¾â€”â€”ä¸ºç½‘é¡µæ·»åŠ éŸ³ä¹ä¸€ã€æ·»åŠ éŸ³ä¹ä¸ºç½‘é¡µæ·»åŠ éŸ³ä¹å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ ‡ç­¾ã€‚å…¶ç”¨æ³•å’Œæ’å…¥å›¾ç‰‡ç±»ä¼¼ã€‚ æ ‡ç­¾çš„å‡ ä¸ªå±æ€§è®¾ç½®å¦‚ä¸‹ï¼š srcï¼šéŸ³é¢‘è·¯å¾„ autostartï¼šå¯æ˜¯è®¾ç½®ä¸ºtureæˆ–è€…falseï¼Œä»£è¡¨æ˜¯å¦è‡ªåŠ¨æ’­æ”¾ã€‚ loopï¼šè®¾ç½®æ˜¯å¦å¾ªç¯æ’­æ”¾ hiddenï¼šæ˜¯å¦éšè—æ’­æ”¾ç•Œé¢ äºŒã€æ’å…¥èƒŒæ™¯éŸ³ä¹ä½¿ç”¨æ ‡ç­¾æ’å…¥èƒŒæ™¯éŸ³ä¹ï¼Œå…¶ä¸­æ’å…¥è·¯å¾„çš„å†™æ³•å’Œæ’å…¥å›¾ç‰‡ç±»ä¼¼ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"HTMLå­¦ä¹ ç¬”è®°","slug":"HTMLå­¦ä¹ ç¬”è®°","permalink":"http://huishao.cc/categories/HTMLå­¦ä¹ ç¬”è®°/"}],"tags":[],"keywords":[{"name":"HTMLå­¦ä¹ ç¬”è®°","slug":"HTMLå­¦ä¹ ç¬”è®°","permalink":"http://huishao.cc/categories/HTMLå­¦ä¹ ç¬”è®°/"}]},{"title":"iOSå¤šçº¿ç¨‹ç¼–ç¨‹ä¹‹äºŒâ€”â€”NSOperationä¸NSOperationQueue","slug":"62iOSå¤šçº¿ç¨‹ç¼–ç¨‹ä¹‹äºŒâ€”â€”NSOperationä¸NSOperationQueue","date":"2015-05-18T16:00:00.000Z","updated":"2021-06-29T01:55:36.085Z","comments":true,"path":"2015/05/19/62iOSå¤šçº¿ç¨‹ç¼–ç¨‹ä¹‹äºŒâ€”â€”NSOperationä¸NSOperationQueue/","link":"","permalink":"http://huishao.cc/2015/05/19/62iOSå¤šçº¿ç¨‹ç¼–ç¨‹ä¹‹äºŒâ€”â€”NSOperationä¸NSOperationQueue/","excerpt":"","text":"iOSå¤šçº¿ç¨‹ç¼–ç¨‹ä¹‹äºŒâ€”â€”NSOperationä¸NSOperationQueueä¸€ã€NSOperationè§£æNSOperationæ˜¯åŸºäºObjective-Cå°è£…çš„ä¸€å¥—ç®¡ç†ä¸æ‰§è¡Œçº¿ç¨‹æ“ä½œçš„ç±»ã€‚è¿™ä¸ªç±»æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨NSInvocationOperationå’ŒNSBlockOperationè¿™ä¸¤ä¸ªå­ç±»è¿›è¡Œå¤šçº¿ç¨‹çš„å¼€å‘ï¼Œå½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥å†™ç»§æ‰¿äºNSOperationçš„ç±»ï¼Œå°è£…æˆ‘ä»¬è‡ªå·±çš„æ“ä½œç±»ã€‚ 1ã€NSOperationæŠ½è±¡ç±»ä¸­æä¾›çš„é€»è¾‘æ–¹æ³•æ“ä½œå¼€å§‹æ‰§è¡Œ 1- (void)start; åœ¨å­ç±»ä¸­å¯ä»¥é‡å†™è¿™ä¸ªæ–¹æ³•ï¼Œå®ç°æ‰§è¡Œçš„æ–¹æ³• 1- (void)main; å–æ¶ˆæ‰§è¡Œ 1- (void)cancel; è·å–å½“æ“ä½œçŠ¶æ€çš„å‡ ä¸ªå±æ€§ 12345@property (readonly, getter=isCancelled) BOOL cancelled;//å½“å‰æ“ä½œæ˜¯å¦å–æ¶ˆæ‰§è¡Œ@property (readonly, getter=isExecuting) BOOL executing;//å½“å‰æ“ä½œæ˜¯å¦æ­£åœ¨æ‰§è¡Œ@property (readonly, getter=isFinished) BOOL finished;//å½“å‰æ“ä½œæ˜¯å¦æ‰§è¡Œç»“æŸ@property (readonly, getter=isAsynchronous) BOOL asynchronous;//å½“å‰æ“ä½œæ˜¯å¦åœ¨å¼‚æ­¥çº¿ç¨‹ä¸­@property (readonly, getter=isReady) BOOL ready;//å½“å‰æ“ä½œæ˜¯å¦å·²ç»å‡†å¤‡å¥½ é˜»å¡å½“å‰çº¿ç¨‹ç›´åˆ°æ“ä½œå®Œæˆ 1- (void)waitUntilFinished; è®¾ç½®åœ¨æ“ä½œé˜Ÿåˆ—ä¸­çš„ä¼˜å…ˆçº§ 1@property NSOperationQueuePriority queuePriority; å…¶ä¸­NSOperationQueuePriorityçš„æšä¸¾å¦‚ä¸‹ï¼š 1234567typedef NS_ENUM(NSInteger, NSOperationQueuePriority) &#123; NSOperationQueuePriorityVeryLow = -8L,//ä¼˜å…ˆçº§å¾ˆä½ NSOperationQueuePriorityLow = -4L,//ä¼˜å…ˆçº§ä½ NSOperationQueuePriorityNormal = 0,//ä¼˜å…ˆçº§æ™®é€š NSOperationQueuePriorityHigh = 4,//ä¼˜å…ˆçº§é«˜ NSOperationQueuePriorityVeryHigh = 8//ä¼˜å…ˆçº§éå¸¸é«˜&#125;; è®¾ç½®æ“ä½œå®Œæˆåçš„å›è°ƒblock 1@property (copy) void (^completionBlock)(void); è®¾ç½®æ“ä½œçš„ä¼˜å…ˆçº§ 1@property double threadPriority; è®¾ç½®æ“ä½œçš„åç§° 1@property (copy) NSString *name; 2ã€å¸¦blockçš„æ“ä½œç±»å®ä¾‹â€”â€”NSBlockOperationNSBlockOperationæ˜¯NSOperationçš„ä¸€ä¸ªå­ç±»ï¼Œå…¶å¯ä»¥å¼‚æ­¥çš„æ‰§è¡Œå¤šä¸ªblockï¼Œå½“æ‰€æœ‰çš„blockéƒ½å®Œæˆæ—¶ï¼Œè¿™ä¸ªæ“ä½œæ‰ç®—å®Œæˆã€‚ åˆå§‹åŒ–æ–¹æ³•ï¼š 1+ (instancetype)blockOperationWithBlock:(void (^)(void))block; åœ¨æ“ä½œä¸­æ·»åŠ block 1- (void)addExecutionBlock:(void (^)(void))block; æ·»åŠ è¿›å»çš„blockçš„æ•°ç»„ 1@property (readonly, copy) NSArray *executionBlocks; ç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011NSBlockOperation * opera = [NSBlockOperation blockOperationWithBlock:^&#123; for (int i=0; i&lt;10; i++) &#123; NSLog(@&quot;%@=%d&quot;,[NSThread currentThread],i); &#125; &#125;]; [opera addExecutionBlock:^&#123; for (int i=0; i&lt;10; i++) &#123; NSLog(@&quot;%@=%d&quot;,[NSThread currentThread],i); &#125; &#125;]; [opera start]; æ‰“å°æƒ…å†µå¦‚ä¸‹ï¼Œå¯ä»¥çœ‹å‡ºï¼Œä¸¤ä¸ªblockå—çš„æ‰§è¡Œæ˜¯å¼‚æ­¥çš„ï¼š 3ã€ä½¿ç”¨NSInvocationOperationè°ƒç”¨æ–¹æ³•æ ¹æ®é€‰æ‹©å™¨åˆ›å»ºä¸€ä¸ªå¯¹è±¡ 1- (instancetype)initWithTarget:(id)target selector:(SEL)sel object:(id)arg; é€šè¿‡Invocationåˆ›å»ºä¸€ä¸ªå¯¹è±¡ 1- (instancetype)initWithInvocation:(NSInvocation *)inv; è¿™ä¸ªç±»æ‰§è¡Œçš„æ“ä½œæ˜¯ä¸è°ƒç”¨å®ƒçš„çº¿ç¨‹åŒæ­¥çš„ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view, typically from a nib. NSInvocationOperation * operation = [[NSInvocationOperation alloc]initWithTarget:self selector:@selector(log) object:nil]; [operation start]; for (int i=0; i&lt;10; i++) &#123; NSLog(@&quot;%@=%d&quot;,[NSThread currentThread],i); &#125; &#125;-(void)log&#123; for (int i=0; i&lt;100; i++) &#123; NSLog(@&quot;%@=%d&quot;,[NSThread currentThread],i); &#125;&#125; é€šè¿‡æ‰“å°ç»“æœå¯ä»¥çœ‹å‡ºå…¶æ‰§è¡Œçš„åŒæ­¥æ€§ã€‚ äºŒã€æ“ä½œä¹‹é—´çš„ä¾èµ–å…³ç³»ä¾èµ–å…³ç³»å’Œä¼˜å…ˆçº§çš„ä½œç”¨å¾ˆåƒï¼Œå´ä¹Ÿä¸åŒã€‚å¦‚æœä¸€ä¸ªæ“ä½œAä¾èµ–äºå¦ä¸€ä¸ªæ“ä½œBï¼Œé‚£ä¹ˆåªæœ‰å½“Bæ“ä½œå®Œæˆåï¼ŒAæ“ä½œæ‰ä¼šæ‰§è¡Œã€‚æ“ä½œæ·»åŠ ä¾èµ–çš„ æ·»åŠ ä¸€ä¸ªä¾èµ–ï¼š 1- (void)addDependency:(NSOperation *)op; åˆ é™¤ä¸€ä¸ªä¾èµ– 1- (void)removeDependency:(NSOperation *)op; åŸåˆ™ä¸Šè¯´ï¼Œä¸€ä¸ªæ“ä½œå¯¹è±¡çš„ä¾èµ–å¯ä»¥æ·»åŠ å¤šä¸ªï¼Œå¹¶ä¸”å½“æ‰€æœ‰ä¾èµ–éƒ½æ‰§è¡Œå®Œæˆåæ‰ä¼šæ‰§è¡Œè¿™ä¸ªæ“ä½œã€‚ ä¸‰ã€NSOperationQueueæ“ä½œé˜Ÿåˆ—NSOperationQueueæ˜¯æ“ä½œé˜Ÿåˆ—ç±»ï¼Œé€šè¿‡ä¸Šé¢çš„ä»‹ç»ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥ç†è§£æ“ä½œï¼Œå¹¶ä¸”æ“ä½œé»˜è®¤çš„æ‰§è¡Œæ–¹å¼æ˜¯ä¸²è¡Œçš„ï¼Œå°½ç®¡NSBlockOperationä¸­çš„blockå—é—´æ˜¯å¹¶è¡Œæ‰§è¡Œçš„ï¼Œä½†å…¶å’Œå¤–éƒ¨æ“ä½œä¾ç„¶æ˜¯ä¸²è¡Œçš„ã€‚å¦‚æœå°†æ“ä½œæ”¾å…¥æ“ä½œé˜Ÿåˆ—ä¸­ï¼Œåˆ™é»˜è®¤ä¸ºå¹¶è¡Œæ‰§è¡Œçš„ã€‚ ç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view, typically from a nib. NSOperationQueue * queue = [[NSOperationQueue alloc]init]; NSInvocationOperation * op1 = [[NSInvocationOperation alloc]initWithTarget:self selector:@selector(log) object:nil]; [queue addOperation:op1]; for (int i=0; i&lt;10; i++) &#123; NSLog(@&quot;%@=%d&quot;,[NSThread currentThread],i); &#125;&#125;-(void)log&#123; for (int i=0; i&lt;10; i++) &#123; NSLog(@&quot;%@=%d&quot;,[NSThread currentThread],i); &#125;&#125; æ‰“å°ä¿¡æ¯å¦‚ä¸‹ï¼š å¯ä»¥çœ‹å‡ºæ¥ï¼Œé˜Ÿåˆ—çš„æ“ä½œæ˜¯åœ¨ä¸€ä¸ªæ–°çš„çº¿ç¨‹ä¸­æ‰§è¡Œçš„ï¼Œå¹¶ä¸”æ“ä½œé˜Ÿåˆ—ä¹‹ä¸­çš„æ“ä½œä¹Ÿéƒ½æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ã€‚ åœ¨æ“ä½œé˜Ÿåˆ—ä¸­æ·»åŠ ä¸€ä¸ªæ“ä½œä»»åŠ¡ï¼š 1- (void)addOperation:(NSOperation *)op; åœ¨é˜Ÿåˆ—ä¸­æ’å…¥ä¸€ç»„æ“ä½œä»»åŠ¡ï¼Œåé¢çš„å‚æ•°è®¾ç½®æ˜¯å¦é˜Ÿåˆ—ä¸­å¾—ä»»åŠ¡éƒ½æ‰§è¡Œå®Œæˆåå†æ‰§è¡Œè¿™ä¸€ç»„æ“ä½œï¼š 1- (void)addOperations:(NSArray *)ops waitUntilFinished:(BOOL)wait; åœ¨é˜Ÿåˆ—ä¸­æ·»åŠ ä¸€ä¸ªblockæ“ä½œ 1- (void)addOperationWithBlock:(void (^)(void))block; è·å–æ“ä½œé˜Ÿåˆ—ä¸­çš„æ‰€æœ‰æ“ä½œçš„æ•°ç»„ 1@property (readonly, copy) NSArray *operations; è·å–æ“ä½œé˜Ÿåˆ—ä¸­æ“ä½œçš„ä¸ªæ•° 1@property (readonly) NSUInteger operationCount; è®¾ç½®é˜Ÿåˆ—æœ€å¤§å¹¶è¡Œæ“ä½œæ•°é‡ 1@property NSInteger maxConcurrentOperationCount; è®¾ç½®æ˜¯å¦æš‚åœé˜Ÿåˆ—ä»»åŠ¡æ‰§è¡Œ 1@property (getter=isSuspended) BOOL suspended; è®¾ç½®é˜Ÿåˆ—åå­— 1@property (copy) NSString *name; è®¾ç½®é˜Ÿåˆ—çš„ä¼˜å…ˆçº§åˆ«ï¼ˆiOS8åæ”¯æŒï¼‰ 1@property NSQualityOfService qualityOfService; å–æ¶ˆé˜Ÿåˆ—ä¸­æ‰€æœ‰æ“ä½œä»»åŠ¡ 1- (void)cancelAllOperations; é˜»å¡å½“å‰çº¿ç¨‹ï¼Œç›´åˆ°é˜Ÿåˆ—ä¸­æ‰€æœ‰ä»»åŠ¡å®Œæˆ 1- (void)waitUntilAllOperationsAreFinished; è·å–å½“å‰æ‰§è¡Œçš„é˜Ÿåˆ— 1+ (NSOperationQueue *)currentQueue; è·å–ä¸»çº¿ç¨‹ä¸­çš„æ“ä½œé˜Ÿåˆ— 1+ (NSOperationQueue *)mainQueue; å››ã€é˜Ÿåˆ—ä¸­æ“ä½œçš„æ‰§è¡Œé¡ºåºæ³•åˆ™1ã€å†³å®šäºä¾èµ–å…³ç³»ï¼Œåªæœ‰å½“è¿™ä¸ªæ“ä½œçš„ä¾èµ–å…¨éƒ¨æ‰§è¡Œå®Œæˆåï¼Œå®ƒæ‰ä¼šè¢«æ‰§è¡Œã€‚ 2ã€å½±å“äºä¼˜å…ˆçº§ï¼Œä¼˜å…ˆçº§é«˜çš„ä¼šå…ˆæ‰§è¡Œã€‚ å¦‚æœ‰ç–æ¼ æ¬¢è¿æŒ‡æ­£ å­¦ä¹ ä½¿ç”¨ æ¬¢è¿è½¬è½½ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSå¤šçº¿ç¨‹ç¼–ç¨‹ä¹‹ä¸€â€”â€”NSThreadçº¿ç¨‹ç®¡ç†","slug":"61iOSå¤šçº¿ç¨‹ç¼–ç¨‹ä¹‹ä¸€â€”â€”NSThreadçº¿ç¨‹ç®¡ç†","date":"2015-05-18T16:00:00.000Z","updated":"2021-06-28T12:09:56.310Z","comments":true,"path":"2015/05/19/61iOSå¤šçº¿ç¨‹ç¼–ç¨‹ä¹‹ä¸€â€”â€”NSThreadçº¿ç¨‹ç®¡ç†/","link":"","permalink":"http://huishao.cc/2015/05/19/61iOSå¤šçº¿ç¨‹ç¼–ç¨‹ä¹‹ä¸€â€”â€”NSThreadçº¿ç¨‹ç®¡ç†/","excerpt":"","text":"iOSå¤šçº¿ç¨‹ç¼–ç¨‹ä¹‹ä¸€â€”â€”NSThreadçº¿ç¨‹ç®¡ç†NSTreadæ˜¯iOSä¸­è¿›è¡Œå¤šçº¿ç¨‹å¼€å‘çš„ä¸€ä¸ªç±»ï¼Œå…¶ç»“æ„é€»è¾‘æ¸…æ™°ï¼Œä½¿ç”¨ååˆ†æ–¹ä¾¿ï¼Œä½†å…¶å°è£…åº¦å’Œæ€§èƒ½ä¸é«˜ï¼Œçº¿ç¨‹å‘¨æœŸï¼ŒåŠ é”ç­‰éœ€è¦æ‰‹åŠ¨å¤„ç†ã€‚ ä¸€ã€NSThreadç±»æ–¹æ³•æ€»ç»“è·å–å½“å‰çº¿ç¨‹ 1+ (NSThread *)currentThread; è¿™ä¸ªæ–¹æ³•é€šè¿‡å¼€å¯ä¸€ä¸ªæ–°çš„çº¿ç¨‹æ‰§è¡Œé€‰æ‹©å™¨æ–¹æ³• 1+ (void)detachNewThreadSelector:(SEL)selector toTarget:(id)target withObject:(id)argument; çº¿ç¨‹ç”¨æ³•ç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view, typically from a nib. [NSThread detachNewThreadSelector:@selector(log) toTarget:self withObject:nil]; for (int i=0; i&lt;100; i++) &#123; NSLog(@&quot;%@=%d&quot;,[NSThread currentThread],i); &#125;&#125;-(void)log&#123; for (int i=0; i&lt;100; i++) &#123; NSLog(@&quot;%@=%d&quot;,[NSThread currentThread],i); &#125;&#125; è¿è¡Œåçš„æ‰“å°ä¿¡æ¯ï¼š å¯ä»¥æ¸…æ™°çš„çœ‹å‡ºæ¥ï¼Œæ–°å¯çš„çº¿ç¨‹å’Œä¸»çº¿ç¨‹æ˜¯å¼‚æ­¥çš„ã€‚ ç¨‹åºæ˜¯å¦æ˜¯å¤šçº¿ç¨‹æ‰§è¡Œ 1+ (BOOL)isMultiThreaded; çº¿ç¨‹å­—å…¸ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºç‰¹æ®Šçš„çº¿ç¨‹è®¾ç½®é”®å€¼å¯¹ 1@property (readonly, retain) NSMutableDictionary *threadDictionary; çº¿ç¨‹åœ¨æŸä¸ªæ—¶é—´æ‰§è¡Œ 1+ (void)sleepUntilDate:(NSDate *)date; çº¿ç¨‹åœ¨ç­‰å¾…ä¸€ä¸ªæ—¶é—´é—´éš”åæ‰§è¡Œ 1+ (void)sleepForTimeInterval:(NSTimeInterval)ti; ç»“æŸçº¿ç¨‹ 1+ (void)exit; è®¾ç½®çº¿ç¨‹çš„ä¼˜å…ˆçº§ï¼Œå–å€¼çš„èŒƒå›´ä¸º0-1ï¼Œ1çš„ä¼˜å…ˆçº§æœ€é«˜ 12+ (double)threadPriority;+ (BOOL)setThreadPriority:(double)p; è¿™ä¸ªå±æ€§æ˜¯iOS8ä¹‹åçš„æ–°ç‰¹æ€§ï¼Œå°†ä¼˜å…ˆçº§æ›´äººæ€§åŒ–çš„å°è£…äº†èµ·æ¥ 1@property NSQualityOfService qualityOfService; NSQualityOfServiceçš„æšä¸¾å¦‚ä¸‹ï¼š 123456789101112typedef NS_ENUM(NSInteger, NSQualityOfService) &#123; //åˆ·æ–°UIçº§åˆ«çš„çº¿ç¨‹ NSQualityOfServiceUserInteractive = 0x21, //ç”¨æˆ·è¯·æ±‚çš„æ— éœ€ç²¾ç¡®çš„ä»»åŠ¡çš„çº¿ç¨‹ï¼Œä¾‹å¦‚ç‚¹å‡»åŠ è½½é‚®ä»¶ NSQualityOfServiceUserInitiated = 0x19, //å‘¨æœŸæ€§çš„ä»»åŠ¡çº¿ç¨‹ï¼Œä¾‹å¦‚å®šæ—¶åˆ·æ–° NSQualityOfServiceUtility = 0x11, //åå°ä»»åŠ¡çš„çº¿ç¨‹ NSQualityOfServiceBackground = 0x09, //ä¼˜å…ˆçº§æœªçŸ¥çš„çº¿ç¨‹ï¼Œä¼˜å…ˆçº§ä»‹äºUserInteractiveå’ŒUtilityä¹‹é—´ NSQualityOfServiceDefault = -1&#125;; åˆ¤æ–­æ˜¯å¦æ˜¯ä¸»çº¿ç¨‹ 1+ (BOOL)isMainThread; è·å–ä¸»çº¿ç¨‹ 1+ (NSThread *)mainThread; äºŒã€å±æ€§ä¸æˆå‘˜æ–¹æ³•æ€»ç»“åˆå§‹åŒ–æ–¹æ³•ï¼Œé€‰æ‹©å™¨å¯ä»¥å¸¦ä¸€ä¸ªå‚æ•° 1- (instancetype)initWithTarget:(id)target selector:(SEL)selector object:(id)argument; çº¿ç¨‹æ˜¯å¦æ­£åœ¨æ‰§è¡Œ 1@property (readonly, getter=isExecuting) BOOL executing; çº¿ç¨‹æ˜¯å¦å·²ç»æ‰§è¡Œç»“æŸ 1@property (readonly, getter=isFinished) BOOL finished; çº¿ç¨‹æ˜¯å¦å·²ç»å–æ¶ˆæ‰§è¡Œ 1@property (readonly, getter=isCancelled) BOOL cancelled; ä¸‰ã€éšå¼çš„é€šè¿‡NSThreadè¿›è¡Œå¤šçº¿ç¨‹ç¼–ç¨‹NSObjectçš„ä¸€ä¸ªç±»åˆ«ä¸­æä¾›äº†æ”¯æŒå¤šçº¿ç¨‹çš„æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š è¿™ä¸ªå‡½æ•°æŒ‡å®šåœ¨ä¸»çº¿ç¨‹æ‰§è¡Œä¸€ä¸ªé€‰æ‹©å™¨ï¼Œargæ˜¯å‚æ•°ï¼Œwaitæ˜¯æ˜¯å¦ç«‹å³æ‰§è¡Œï¼Œå¦‚æœYESï¼Œåˆ™ä¼šé˜»å¡å½“å‰ä¸»çº¿ç¨‹çš„ä»»åŠ¡ï¼ŒNOåˆ™ä¼šç­‰å¾…å½“å‰ä»»åŠ¡ç»“æŸåæ‰§è¡Œã€‚ 1- (void)performSelectorOnMainThread:(SEL)aSelector withObject:(id)arg waitUntilDone:(BOOL)wait; è¿™ä¸ªå‡½æ•°æŒ‡å®šåœ¨æŸä¸ªçº¿ç¨‹æ‰§è¡Œé€‰æ‹©å™¨ 1- (void)performSelector:(SEL)aSelector onThread:(NSThread *)thr withObject:(id)arg waitUntilDone:(BOOL)wait; æŒ‡å®šåœ¨åå°çº¿ç¨‹ä¸­æ‰§è¡Œé€‰æ‹©å™¨ 1- (void)performSelectorInBackground:(SEL)aSelector withObject:(id)arg; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSåŸç”Ÿåœ°å›¾å¼€å‘è¿›é˜¶â€”â€”ä½¿ç”¨å¯¼èˆªå’Œé™„è¿‘å…´è¶£ç‚¹æ£€ç´¢","slug":"60iOSåŸç”Ÿåœ°å›¾å¼€å‘è¿›é˜¶â€”â€”ä½¿ç”¨å¯¼èˆªå’Œé™„è¿‘å…´è¶£ç‚¹æ£€ç´¢","date":"2015-05-17T16:00:00.000Z","updated":"2021-06-25T02:25:06.638Z","comments":true,"path":"2015/05/18/60iOSåŸç”Ÿåœ°å›¾å¼€å‘è¿›é˜¶â€”â€”ä½¿ç”¨å¯¼èˆªå’Œé™„è¿‘å…´è¶£ç‚¹æ£€ç´¢/","link":"","permalink":"http://huishao.cc/2015/05/18/60iOSåŸç”Ÿåœ°å›¾å¼€å‘è¿›é˜¶â€”â€”ä½¿ç”¨å¯¼èˆªå’Œé™„è¿‘å…´è¶£ç‚¹æ£€ç´¢/","excerpt":"","text":"iOSåŸç”Ÿåœ°å›¾å¼€å‘è¿›é˜¶â€”â€”ä½¿ç”¨å¯¼èˆªå’Œé™„è¿‘å…´è¶£ç‚¹æ£€ç´¢iOSä¸­çš„mapKitæ¡†æ¶å¯¹å›½é™…åŒ–çš„æ”¯æŒéå¸¸å‡ºè‰²ã€‚åœ¨å‰äº›ç¯‡åšå®¢ä¸­ï¼Œå¯¹è¿™ä¸ªåœ°å›¾æ¡†æ¶çš„åŸºç¡€ç”¨æ³•å’Œæ ‡æ³¨ä¸è¦†ç›–ç‰©çš„æ·»åŠ è¿›è¡Œäº†è¯¦ç»†çš„ä»‹ç»ï¼Œè¿™ç¯‡åšå®¢å°†ä»‹ç»ä¸¤ä¸ªæ›´åŠ å®ç”¨çš„åŠŸèƒ½çš„å¼€å‘ï¼šçº¿è·¯å¯¼èˆªä¸å…´è¶£ç‚¹æœç´¢ã€‚å‰å‡ ç¯‡åšå®¢çš„é“¾æ¥å¦‚ä¸‹ï¼š åœ°å›¾åŸºç¡€ç”¨æ³•è¯¦è§£ï¼šhttp://my.oschina.net/u/2340880/blog/415360ã€‚ æ·»åŠ å¤§å¤´é’ˆä¸è‡ªå®šä¹‰æ ‡æ³¨ï¼šhttp://my.oschina.net/u/2340880/blog/415441ã€‚ æ·»åŠ åœ°å›¾è¦†ç›–ç‰©ï¼šhttp://my.oschina.net/u/2340880/blog/415611ã€‚ ä¸€ã€çº¿è·¯å¯¼èˆª1ã€ä»å‡ ä¸ªç±»çš„å…³ç³»è¯´èµ·(1)MKPlacemark ä¸€ä¸ªåœ°ç‚¹ä¿¡æ¯ç±»ï¼Œå¦‚ä¸‹ï¼š 1234567@interface MKPlacemark : CLPlacemark &lt;MKAnnotation&gt;//åˆå§‹åŒ–æ–¹æ³•ï¼Œé€šè¿‡ç»™å®šä¸€ä¸ªç»çº¬åº¦å’Œåœ°ç‚¹ä¿¡æ¯å­—å…¸- (instancetype)initWithCoordinate:(CLLocationCoordinate2D)coordinate addressDictionary:(NSDictionary *)addressDictionary;//å›½å®¶ç¼–ç @property (nonatomic, readonly) NSString *countryCode;@end (2)MKMapItem åœ°ç‚¹èŠ‚ç‚¹ç±»ï¼ŒåŒ…å«æ­¤èŠ‚ç‚¹çš„è®¸å¤šåœ°ç‚¹ä¿¡æ¯ï¼Œå¦‚ä¸‹ï¼š 1234567891011121314151617@interface MKMapItem : NSObject//å½“å‰èŠ‚ç‚¹çš„åœ°ç‚¹ä¿¡æ¯å¯¹è±¡@property (nonatomic, readonly) MKPlacemark *placemark;//æ˜¯å¦æ˜¯å½“å‰ä½ç½®@property (nonatomic, readonly) BOOL isCurrentLocation;//èŠ‚ç‚¹åç§°@property (nonatomic, copy) NSString *name;//ç”µè¯å·ç @property (nonatomic, copy) NSString *phoneNumber;//ç½‘å€@property (nonatomic, strong) NSURL *url;//å°†å½“å‰ä½ç½®åˆ›å»ºä¸ºèŠ‚ç‚¹+ (MKMapItem *)mapItemForCurrentLocation;//ç”±ä¸€ä¸ªä½ç½®ä¿¡æ¯åˆ›å»ºèŠ‚ç‚¹- (instancetype)initWithPlacemark:(MKPlacemark *)placemark;@end (3)MKDirectionsRequest å¯¼èˆªè¯·æ±‚ç±» 123456789@interface MKDirectionsRequest : NSObject//èµ·ç‚¹èŠ‚ç‚¹- (MKMapItem *)source NS_AVAILABLE(10_9, 6_0);- (void)setSource:(MKMapItem *)source NS_AVAILABLE(10_9, 7_0);//ç›®çš„åœ°èŠ‚ç‚¹- (MKMapItem *)destination NS_AVAILABLE(10_9, 6_0);- (void)setDestination:(MKMapItem *)destination NS_AVAILABLE(10_9, 7_0);@end è¿™ä¸ªç±»è¿˜æœ‰ä¸€äº›æ‰©å±•çš„è®¾ç½®å±æ€§ï¼š @property (nonatomic) MKDirectionsTransportType transportType; è®¾ç½®è·¯çº¿æ£€ç´¢ç±»å‹ï¼Œæšä¸¾å¦‚ä¸‹ï¼š 12345typedef NS_OPTIONS(NSUInteger, MKDirectionsTransportType) &#123; MKDirectionsTransportTypeAutomobile = 1 &lt;&lt; 0,//é€‚åˆé©¾è½¦æ—¶å¯¼èˆª MKDirectionsTransportTypeWalking = 1 &lt;&lt; 1,//é€‚åˆæ­¥è¡Œæ—¶å¯¼èˆª MKDirectionsTransportTypeAny = 0x0FFFFFFF//ä»»ä½•æƒ…å†µ&#125;; @property (nonatomic) BOOL requestsAlternateRoutes; è®¾ç½®æ˜¯å¦æœç´¢å¤šæ¡çº¿è·¯ @property (nonatomic, copy) NSDate *departureDate; è®¾ç½®å‡ºå‘æ—¥æœŸ @property (nonatomic, copy) NSDate *arrivalDate; è®¾ç½®åˆ°è¾¾æ—¥æœŸ ï¼ˆ4ï¼‰MKDirections ä»appleæœåŠ¡å™¨è·å–æ•°æ®çš„è¿æ¥ç±» 123456789101112@interface MKDirections : NSObject//åˆå§‹åŒ–æ–¹æ³•- (instancetype)initWithRequest:(MKDirectionsRequest *)request NS_DESIGNATED_INITIALIZER;//å¼€å§‹è®¡ç®—çº¿è·¯ä¿¡æ¯- (void)calculateDirectionsWithCompletionHandler:(MKDirectionsHandler)completionHandler;//å¼€å§‹è®¡ç®—æ—¶é—´ä¿¡æ¯- (void)calculateETAWithCompletionHandler:(MKETAHandler)completionHandler;//å–æ¶ˆ- (void)cancel;//æ˜¯å¦æ­£åœ¨è®¡ç®—@property (nonatomic, readonly, getter=isCalculating) BOOL calculating;@end (5)MKDirectionsResponse çº¿è·¯ä¿¡æ¯ç»“æœç±» 12345@interface MKDirectionsResponse : NSObject@property (nonatomic, readonly) MKMapItem *source;//èµ·ç‚¹@property (nonatomic, readonly) MKMapItem *destination;//ç»ˆç‚¹@property (nonatomic, readonly) NSArray *routes; //çº¿è·¯è§„åˆ’æ•°ç»„@end (6)MKETResponse æ—¶é—´ä¿¡æ¯ç»“æœç±» 123456@interface MKETAResponse : NSObject@property (nonatomic, readonly) MKMapItem *source;//èµ·ç‚¹@property (nonatomic, readonly) MKMapItem *destination;//ç»ˆç‚¹@property (nonatomic, readonly) NSTimeInterval expectedTravelTime;//è€—æ—¶@end (7)MKRoute çº¿è·¯ä¿¡æ¯ç±»ï¼Œå¯¼èˆªçš„çº¿è·¯ç»“æœæ˜¯è¿™ä¸ªç±»å‹çš„å¯¹è±¡ 12345678910111213@interface MKRoute : NSObject@property (nonatomic, readonly) NSString *name; //çº¿è·¯åç§°@property (nonatomic, readonly) NSArray *advisoryNotices; //æ³¨æ„äº‹é¡¹@property (nonatomic, readonly) CLLocationDistance distance; //è·ç¦»@property (nonatomic, readonly) NSTimeInterval expectedTravelTime;//è€—æ—¶@property (nonatomic, readonly) MKDirectionsTransportType transportType; //æ£€ç´¢çš„ç±»å‹@property (nonatomic, readonly) MKPolyline *polyline; // çº¿è·¯è¦†ç›–ç‰©@property (nonatomic, readonly) NSArray *steps; // çº¿è·¯è¯¦æƒ…æ•°ç»„@end ï¼ˆ8ï¼‰MKRouteStep çº¿è·¯è¯¦æƒ…ä¿¡æ¯ç±»ï¼Œçº¿è·¯ä¸­æ¯ä¸€æ­¥çš„ä¿¡æ¯éƒ½æ˜¯è¿™ä¸ªç±»çš„å¯¹è±¡ 123456789101112@interface MKRouteStep : NSObject@property (nonatomic, readonly) NSString *instructions; // èŠ‚ç‚¹ä¿¡æ¯@property (nonatomic, readonly) NSString *notice; // æ³¨æ„äº‹é¡¹@property (nonatomic, readonly) MKPolyline *polyline; //çº¿è·¯è¦†ç›–ç‰©@property (nonatomic, readonly) CLLocationDistance distance; // è·ç¦»@property (nonatomic, readonly) MKDirectionsTransportType transportType; // å¯¼èˆªç±»å‹@end çœ‹åˆ°ä¸Šé¢å¦‚æ­¤å¤šçš„ç±»ï¼Œä½ å¯èƒ½ä¼šè§‰å¾—ä¸€å¤´é›¾æ°´ï¼Œé‚£ä¹ˆä¸ç”¨ç€æ€¥ï¼Œç±»è™½ç„¶ç¹æ‚ï¼Œä½†ä»–ä»¬ä¹‹é—´çš„é€»è¾‘éå¸¸æ¸…æ™°ï¼Œä¸‹é¢å°±é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥è¿›è¡Œçº¿è·¯å¯¼èˆªã€‚ 2ã€è¿›è¡Œçº¿è·¯å¯¼èˆª12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667- (void)viewDidLoad &#123; [super viewDidLoad]; //åœ°å›¾åˆå§‹åŒ–è®¾ç½® mapView =[[MKMapView alloc]initWithFrame:self.view.frame]; mapView.region=MKCoordinateRegionMake(CLLocationCoordinate2DMake(39.26, 116.3), MKCoordinateSpanMake(5, 5)); mapView.mapType=MKMapTypeStandard; mapView.delegate=self; [self.view addSubview:mapView]; //å¯¼èˆªè®¾ç½® CLLocationCoordinate2D fromcoor=CLLocationCoordinate2DMake(39.26, 116.3); CLLocationCoordinate2D tocoor = CLLocationCoordinate2DMake(33.33, 113.33); //åˆ›å»ºå‡ºå‘ç‚¹å’Œç›®çš„ç‚¹ä¿¡æ¯ MKPlacemark *fromPlace = [[MKPlacemark alloc] initWithCoordinate:fromcoor addressDictionary:nil]; MKPlacemark *toPlace = [[MKPlacemark alloc]initWithCoordinate:tocoor addressDictionary:nil]; //åˆ›å»ºå‡ºå‘èŠ‚ç‚¹å’Œç›®çš„åœ°èŠ‚ç‚¹ MKMapItem * fromItem = [[MKMapItem alloc]initWithPlacemark:fromPlace]; MKMapItem * toItem = [[MKMapItem alloc]initWithPlacemark:toPlace]; //åˆå§‹åŒ–å¯¼èˆªæœç´¢è¯·æ±‚ MKDirectionsRequest *request = [[MKDirectionsRequest alloc]init]; request.source=fromItem; request.destination=toItem; request.requestsAlternateRoutes=YES; //åˆå§‹åŒ–è¯·æ±‚æ£€ç´¢ MKDirections *directions = [[MKDirections alloc]initWithRequest:request]; //å¼€å§‹æ£€ç´¢ï¼Œç»“æœä¼šè¿”å›åœ¨blockä¸­ [directions calculateDirectionsWithCompletionHandler:^(MKDirectionsResponse *response, NSError *error) &#123; if (error) &#123; NSLog(@&quot;error:%@&quot;,error); &#125;else&#123; //æå–å¯¼èˆªçº¿è·¯ç»“æœä¸­çš„ä¸€æ¡çº¿è·¯ MKRoute *route =response.routes[0]; //å°†çº¿è·¯ä¸­çš„æ¯ä¸€æ­¥è¯¦æƒ…æå–å‡ºæ¥ NSArray * stepArray = [NSArray arrayWithArray:route.steps]; //è¿›è¡Œéå† for (int i=0; i&lt;stepArray.count; i++) &#123; //çº¿è·¯çš„è¯¦æƒ…èŠ‚ç‚¹ MKRouteStep * step = stepArray[i]; //åœ¨æ­¤èŠ‚ç‚¹å¤„æ·»åŠ ä¸€ä¸ªå¤§å¤´é’ˆ MKPointAnnotation * point = [[MKPointAnnotation alloc]init]; point.coordinate=step.polyline.coordinate; point.title=step.instructions; point.subtitle=step.notice; [mapView addAnnotation:point]; //å°†æ­¤æ®µçº¿è·¯æ·»åŠ åˆ°åœ°å›¾ä¸Š [mapView addOverlay:step.polyline]; &#125; &#125; &#125;]; &#125;//åœ°å›¾è¦†ç›–ç‰©çš„ä»£ç†æ–¹æ³•-(MKOverlayRenderer *)mapView:(MKMapView *)mapView rendererForOverlay:(id&lt;MKOverlay&gt;)overlay&#123; MKPolylineRenderer *renderer = [[MKPolylineRenderer alloc] initWithPolyline:overlay]; renderer.strokeColor = [UIColor redColor]; renderer.lineWidth = 4.0; return renderer;&#125;//æ ‡æ³¨çš„ä»£ç†æ–¹æ³•-(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id&lt;MKAnnotation&gt;)annotation&#123; MKPinAnnotationView * view= [[MKPinAnnotationView alloc]initWithAnnotation:annotation reuseIdentifier:@&quot;anno&quot;]; view.canShowCallout=YES; return view;&#125; æ•ˆæœå¦‚ä¸‹ï¼š äºŒã€é™„è¿‘å…´è¶£ç‚¹æ£€ç´¢å…´è¶£ç‚¹æ£€ç´¢çš„é€»è¾‘å’Œå¯¼èˆªçº¿è·¯æ£€ç´¢çš„é€»è¾‘ç›¸ä¼¼ï¼Œç›´æ¥é€šè¿‡ä»£ç æ¥æ¼”ç¤ºï¼š 1234567891011121314151617181920212223 //åˆ›å»ºä¸€ä¸ªä½ç½®ä¿¡æ¯å¯¹è±¡ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºç»çº¬åº¦ï¼Œç¬¬äºŒä¸ªä¸ºçº¬åº¦æ£€ç´¢èŒƒå›´ï¼Œå•ä½ä¸ºç±³ï¼Œç¬¬ä¸‰ä¸ªä¸ºç»åº¦æ£€ç´¢èŒƒå›´ï¼Œå•ä½ä¸ºç±³ MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance(tocoor, 5000, 5000); //åˆå§‹åŒ–ä¸€ä¸ªæ£€ç´¢è¯·æ±‚å¯¹è±¡ MKLocalSearchRequest * req = [[MKLocalSearchRequest alloc]init]; //è®¾ç½®æ£€ç´¢å‚æ•° req.region=region; //å…´è¶£ç‚¹å…³é”®å­— req.naturalLanguageQuery=@&quot;hotal&quot;; //åˆå§‹åŒ–æ£€ç´¢ MKLocalSearch * ser = [[MKLocalSearch alloc]initWithRequest:req]; //å¼€å§‹æ£€ç´¢ï¼Œç»“æœè¿”å›åœ¨blockä¸­ [ser startWithCompletionHandler:^(MKLocalSearchResponse *response, NSError *error) &#123; //å…´è¶£ç‚¹èŠ‚ç‚¹æ•°ç»„ NSArray * array = [NSArray arrayWithArray:response.mapItems]; for (int i=0; i&lt;array.count; i++) &#123; MKMapItem * item=array[i]; MKPointAnnotation * point = [[MKPointAnnotation alloc]init]; point.title=item.name; point.subtitle=item.phoneNumber; point.coordinate=item.placemark.coordinate; [mapView addAnnotation:point]; &#125; &#125;]; æ•ˆæœå¦‚ä¸‹ï¼š å¦‚æœç–æ¼ æ¬¢è¿æŒ‡æ­£ å­¦ä¹ ä½¿ç”¨ æ¬¢è¿è½¬è½½ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSåŸç”Ÿåœ°å›¾å¼€å‘æŒ‡å—å†ç»­â€”â€”åœ°å›¾è¦†ç›–ç‰©çš„åº”ç”¨","slug":"59iOSåŸç”Ÿåœ°å›¾å¼€å‘æŒ‡å—å†ç»­â€”â€”åœ°å›¾è¦†ç›–ç‰©çš„åº”ç”¨","date":"2015-05-15T16:00:00.000Z","updated":"2021-06-25T02:23:37.847Z","comments":true,"path":"2015/05/16/59iOSåŸç”Ÿåœ°å›¾å¼€å‘æŒ‡å—å†ç»­â€”â€”åœ°å›¾è¦†ç›–ç‰©çš„åº”ç”¨/","link":"","permalink":"http://huishao.cc/2015/05/16/59iOSåŸç”Ÿåœ°å›¾å¼€å‘æŒ‡å—å†ç»­â€”â€”åœ°å›¾è¦†ç›–ç‰©çš„åº”ç”¨/","excerpt":"","text":"iOSåŸç”Ÿåœ°å›¾å¼€å‘æŒ‡å—å†ç»­â€”â€”åœ°å›¾è¦†ç›–ç‰©çš„åº”ç”¨ä¸€ã€å¼•è¨€åœ¨å‰ä¸¤ç¯‡åšå®¢ä¸­ï¼Œå°†iOSç³»ç»Ÿçš„åœ°å›¾æ¡†æ¶MapKitä¸­åœ°å›¾çš„è®¾ç½®ä¸åº”ç”¨ä»¥åŠå…³äºæ·»åŠ å¤§å¤´é’ˆå’Œè‡ªå®šä¹‰å¤§å¤´é’ˆçš„ç›¸å…³æ“ä½œåšäº†è¯¦ç»†çš„ä»‹ç»ã€‚é“¾æ¥å¦‚ä¸‹ï¼šhttp://my.oschina.net/u/2340880/blog/415360ã€http://my.oschina.net/u/2340880/blog/415441ã€‚è¿™ç¯‡åšå®¢ä¸­å°†è¿›ä¸€æ­¥è®¨è®ºå…³äºåœ°å›¾æ·»åŠ è¦†ç›–ç‰©çš„ä½¿ç”¨æ–¹æ³•ã€‚ äºŒã€æ·»åŠ åœ°å›¾è¦†ç›–ç‰©çš„é€»è¾‘åŸç†åœ°å›¾è¦†ç›–ç‰©å…¶å®å°±æ˜¯åœ¨åœ°å›¾ä¸Šç”»ä¸€äº›ä¸œè¥¿ï¼Œä¾‹å¦‚è·¯å¾„ï¼ŒèŒƒå›´ç­‰ç­‰ã€‚æ·»åŠ åœ°å›¾è¦†ç›–ç‰©çš„é€»è¾‘åŸç†å…¶å®å’Œæ·»åŠ å¤§å¤´é’ˆå¾ˆç›¸ä¼¼ã€‚é¦–å…ˆæ‰€æœ‰å¯ä»¥æˆä¸ºè¦†ç›–ç‰©çš„å¯¹è±¡å¿…é¡»éµå®ˆMKOverlayè¿™ä¸ªåè®®ï¼Œé€šè¿‡ - (void)addOverlay:(id )overlay; å°†è¦†ç›–ç‰©æ·»åŠ åœ¨åœ°å›¾ä¸Šï¼Œç„¶ååœ°å›¾ä¼šè°ƒç”¨ä»£ç†æ–¹æ³• -(MKOverlayRenderer )mapView:(MKMapView )mapView rendererForOverlay:(id)overlay; å¯¹è¦†ç›–ç‰©è¿›è¡Œç»˜åˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªæ–¹æ³•ä¸­è®¾ç½®è¦†ç›–ç‰©ï¼Œä¾‹å¦‚çº¿å®½ï¼Œé¢œè‰²ç­‰ï¼Œæ³¨æ„ï¼Œå¿…é¡»å®ç°è¿™ä¸ªæ–¹æ³•ï¼Œè¦†ç›–ç‰©æ‰ä¼šæ˜¾ç¤ºã€‚ 1ã€æ·»åŠ æŠ˜çº¿è¦†ç›–ç‰©12345678910111213141516171819202122232425262728293031- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view, typically from a nib. //åˆå§‹åŒ–åœ°å›¾å¯¹è±¡ MKMapView * _mapView = [[MKMapView alloc]initWithFrame:self.view.frame]; //è®¾ç½®åœ°å›¾ _mapView.region=MKCoordinateRegionMake(CLLocationCoordinate2DMake(33.23, 113.122), MKCoordinateSpanMake(10, 10)); //è®¾ç½®ä»£ç† _mapView.delegate=self; //ä¸‹é¢æ˜¯Cçš„è¯­æ³•ï¼Œåˆ›å»ºä¸€ä¸ªç»“æ„ä½“æ•°ç»„ CLLocationCoordinate2D *coor; coor = malloc(sizeof(CLLocationCoordinate2D)*5); for (int i=0; i&lt;5; i++) &#123; CLLocationCoordinate2D po = CLLocationCoordinate2DMake(33.23+i*0.01, 113.112); coor[i]=po; &#125; //åˆ›å»ºä¸€ä¸ªæŠ˜çº¿å¯¹è±¡ MKPolyline * line = [MKPolyline polylineWithCoordinates:coor count:5]; [_mapView addOverlay:line]; [self.view addSubview:_mapView];&#125;//è¦†ç›–ç‰©ç»˜åˆ¶çš„ä»£ç†-(MKOverlayRenderer *)mapView:(MKMapView *)mapView rendererForOverlay:(id&lt;MKOverlay&gt;)overlay&#123; //æŠ˜çº¿è¦†ç›–ç‰©æä¾›ç±» MKPolylineRenderer * render = [[MKPolylineRenderer alloc]initWithPolyline:overlay]; //è®¾ç½®çº¿å®½ render.lineWidth=3; //è®¾ç½®é¢œè‰² render.strokeColor=[UIColor redColor]; return render;&#125; æ•ˆæœå¦‚ä¸‹ï¼š 2ã€æ·»åŠ åœ†å½¢è¦†ç›–ç‰©1234567891011121314151617181920- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view, typically from a nib. MKMapView * _mapView = [[MKMapView alloc]initWithFrame:self.view.frame]; _mapView.region=MKCoordinateRegionMake(CLLocationCoordinate2DMake(33.23, 113.122), MKCoordinateSpanMake(10, 10)); _mapView.delegate=self; //åˆ›å»ºåœ†å½¢è¦†ç›–ç‰©å¯¹è±¡ MKCircle * cirle = [MKCircle circleWithCenterCoordinate:CLLocationCoordinate2DMake(33.23, 113.122) radius:500]; [_mapView addOverlay:cirle]; [self.view addSubview:_mapView];&#125;-(MKOverlayRenderer *)mapView:(MKMapView *)mapView rendererForOverlay:(id&lt;MKOverlay&gt;)overlay&#123; MKCircleRenderer * render=[[MKCircleRenderer alloc]initWithCircle:overlay]; render.lineWidth=3; //å¡«å……é¢œè‰² render.fillColor=[UIColor greenColor]; //çº¿æ¡é¢œè‰² render.strokeColor=[UIColor redColor]; return render;&#125; æ•ˆæœå¦‚ä¸‹ï¼š 3ã€æ·»åŠ å¤šè¾¹å½¢è¦†ç›–ç‰©1234567891011121314151617181920212223- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view, typically from a nib. MKMapView * _mapView = [[MKMapView alloc]initWithFrame:self.view.frame]; _mapView.region=MKCoordinateRegionMake(CLLocationCoordinate2DMake(33.23, 113.122), MKCoordinateSpanMake(10, 10)); _mapView.delegate=self; CLLocationCoordinate2D *coor; coor = malloc(sizeof(CLLocationCoordinate2D)*6); for (int i=0; i&lt;5; i++) &#123; CLLocationCoordinate2D po = CLLocationCoordinate2DMake(33.23+i*0.01, 113.112+((i/2==0)?0.01:-0.01)); coor[i]=po; &#125; coor[5]=CLLocationCoordinate2DMake(33.23, 113.112); MKPolygon * gon = [MKPolygon polygonWithCoordinates:coor count:6]; [_mapView addOverlay:gon]; [self.view addSubview:_mapView];&#125;-(MKOverlayRenderer *)mapView:(MKMapView *)mapView rendererForOverlay:(id&lt;MKOverlay&gt;)overlay&#123; MKPolygonRenderer * render = [[MKPolygonRenderer alloc]initWithPolygon:overlay]; render.lineWidth=3; render.strokeColor=[UIColor redColor]; return render;&#125; æ•ˆæœå¦‚ä¸‹ï¼š ç–æ¼ä¹‹å¤„ æ¬¢è¿æŒ‡æ­£ å­¦ä¹ ä½¿ç”¨ æ¬¢è¿è½¬è½½ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSåŸç”Ÿåœ°å›¾å¼€å‘æŒ‡å—","slug":"57iOSåŸç”Ÿåœ°å›¾å¼€å‘æŒ‡å—","date":"2015-05-14T16:00:00.000Z","updated":"2021-06-25T02:21:13.139Z","comments":true,"path":"2015/05/15/57iOSåŸç”Ÿåœ°å›¾å¼€å‘æŒ‡å—/","link":"","permalink":"http://huishao.cc/2015/05/15/57iOSåŸç”Ÿåœ°å›¾å¼€å‘æŒ‡å—/","excerpt":"","text":"iOSåŸç”Ÿåœ°å›¾å¼€å‘è¯¦è§£ åœ¨ä¸Šä¸€ç¯‡åšå®¢ä¸­:http://my.oschina.net/u/2340880/blog/414760ã€‚å¯¹iOSä¸­çš„å®šä½æœåŠ¡è¿›è¡Œäº†è¯¦ç»†çš„ä»‹ç»ä¸å‚æ•°è¯´æ˜ï¼Œåœ¨å¼€å‘ä¸­ï¼Œåœ°ä½æœåŠ¡å¾€å¾€ä¸åœ°å›¾æ¡†æ¶ç»“åˆä½¿ç”¨ï¼Œè¿™ç¯‡åšå®¢ä¸»è¦å¯¹iOSå®˜æ–¹çš„åœ°å›¾æ¡†æ¶MapKit.frameworkè¿›è¡Œä»‹ç»ã€‚ ä¸€ã€åˆå§‹åŒ–åœ°å›¾è§†å›¾ä¸ç›¸å…³å±æ€§æ–¹æ³•ä»‹ç»1ã€åˆå§‹åŒ–åœ°å›¾è§†å›¾åœ°å›¾è§†å›¾çš„å±•ç¤ºä¾èµ–äºMKMapViewè¿™ä¸ªç±»ï¼Œè¿™ä¸ªç±»ç»§æ‰¿äºUIViewï¼Œå› æ­¤å’Œå…¶ä»–Viewçš„ä½¿ç”¨æ–¹æ³•ç±»ä¼¼ã€‚åœ¨æˆ‘ä»¬éœ€è¦å±•ç°åœ°å›¾çš„åœ°æ–¹ï¼š 12345- (void)viewDidLoad &#123; [super viewDidLoad]; MKMapView * mapView =[[MKMapView alloc]initWithFrame:self.view.frame]; [self.view addSubview:mapView];&#125; è¿è¡Œå‘ç°ï¼Œä¸€å¼ ä¸–ç•Œåœ°å›¾å°±åœ¨æˆ‘ä»¬çš„è®¾å¤‡ä¸Šäº†ï¼Œappleå†…ç½®çš„åœ°å›¾æ•°æ®æ˜¯ç”±é«˜å¾·æä¾›çš„ã€‚ 2ã€ç³»ç»Ÿæä¾›çš„ä¸‰ç§åœ°å›¾æ ·å¼å¯ä»¥é€šè¿‡MKMapViewçš„mapTypeè¿™ä¸ªå±æ€§è®¾ç½®åœ°å›¾çš„æ¨¡å¼ï¼š @property (nonatomic) MKMapType mapType; æšä¸¾å¦‚ä¸‹ï¼š 12345typedef NS_ENUM(NSUInteger, MKMapType) &#123; MKMapTypeStandard = 0,//æ ‡å‡†å¼çš„è¡Œæ”¿åœ°å›¾(ä¼šæ˜¾ç¤ºåŸå¸‚ï¼Œè¡—é“ç­‰) MKMapTypeSatellite,//æ ‡å‡†çš„å«æ˜Ÿåœ°å›¾ MKMapTypeHybrid//æ··åˆåœ°å›¾(åœ¨å«æ˜Ÿå›¾ä¸Šæ˜¾ç¤ºè¡—é“ç­‰åç§°)&#125;; 3ã€è®¾ç½®åœ°å›¾çš„ä¸­å¿ƒå’Œæ¯”ä¾‹å°ºåœ¨ç™¾åº¦åœ°å›¾ç­‰ç¬¬ä¸‰æ–¹åœ°å›¾æœåŠ¡çš„SDKä¸­ï¼Œéƒ½ä¼šæä¾›ä¸€ä¸ªç±»ä¼¼zoomLevelæ¯”ä¾‹å°ºçš„å±æ€§ã€‚é€šè¿‡å®˜æ–¹çš„APIè®¾ç½®è¿™ä¸ªå±æ€§æœ‰äº›éº»çƒ¦ï¼Œä½†æ˜¯ä¹Ÿæ›´åŠ çµæ´»ã€‚é¦–å…ˆï¼Œè®¾ç½®åœ°å›¾çš„ä¸­å¿ƒä½ç½®å’Œæ¯”ä¾‹å°ºæ˜¯é€šè¿‡regionè¿™ä¸ªå±æ€§å®ç°çš„ã€‚regionç»“æ„ä½“å¦‚ä¸‹ï¼š 1234typedef struct &#123; CLLocationCoordinate2D center;//åœ°å›¾ä¸­å¿ƒçš„ç»çº¬åº¦ MKCoordinateSpan span;//åœ°å›¾æ˜¾ç¤ºçš„ç»çº¬åº¦èŒƒå›´&#125; MKCoordinateRegion; è¿™ä¸ªç»“æ„ä½“ä¸­åŒ…å«äº†ä¸¤ä¸ªç»“æ„ä½“ï¼Œå…¶ä¸­CLLocationCoordinate2Då¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯ç®€å•çš„ç»çº¬åº¦ï¼Œè§£é‡Šå¦‚ä¸‹ï¼š 1234typedef struct &#123; CLLocationDegrees latitude;//çº¬åº¦ï¼ŒåŒ—çº¬ä¸ºæ­£ï¼Œå—çº¬ä¸ºè´Ÿ CLLocationDegrees longitude;//ç»åº¦ï¼Œä¸œç»ä¸ºæ­£ï¼Œè¥¿ç»ä¸ºè´Ÿ&#125; CLLocationCoordinate2D; MKCoordinateSpanè¿™ä¸ªç»“æ„ä½“æ¯”è¾ƒå¤æ‚ï¼Œå¦‚ä¸‹ï¼š 1234typedef struct &#123; CLLocationDegrees latitudeDelta;//çº¬åº¦èŒƒå›´ CLLocationDegrees longitudeDelta;//ç»åº¦èŒƒå›´&#125; MKCoordinateSpan; è¿™ä¸ªç»“æ„ä½“å®šä¹‰çš„åº”è¯¥æ˜¯ä¸€ä¸ªèŒƒå›´ï¼Œå› ä¸ºåŒ—çº¬å—çº¬åŠ èµ·æ¥180Â°ï¼Œæ‰€ä»¥çº¬åº¦èŒƒå›´çš„å–å€¼åº”ä¸º0-180ã€‚åŒç†ï¼Œç»åº¦èŒƒå›´çš„å–å€¼èŒƒå›´ä¸º0-360ã€‚ é€šè¿‡ä¸Šé¢çš„ä»‹ç»ï¼Œæˆ‘ä»¬ä¸¾ä¸ªä¾‹å­ï¼Œå°†åŒ—äº¬å¸‚è®¾ä¸ºåœ°å›¾çš„ä¸­å¿ƒåŒºåŸŸï¼Œå¹¶ä¸”æ¯”ä¾‹è®¾ç½®ä¸ºæ˜¾ç¤ºåŒ—äº¬å¤§å°ã€‚é€šè¿‡ç™¾åº¦ï¼Œé¦–å…ˆçŸ¥é“åŒ—äº¬å¸‚ç•Œçš„åœ°ç†åæ ‡ä¸ºï¼šåŒ—çº¬39â€26â€™è‡³41â€03â€™ï¼Œä¸œç»115â€25â€™è‡³ 117â€30â€™ã€‚åŒ—äº¬å¸‚åŒºåæ ‡ä¸ºï¼šåŒ—çº¬39.9â€ï¼Œä¸œç»116. 3â€ã€‚ä»£ç å¦‚ä¸‹ï¼š 1mapView.region=MKCoordinateRegionMake(CLLocationCoordinate2DMake(39.26, 116.3), MKCoordinateSpanMake(1.8, 2.05)); è¿è¡Œåå¯ä»¥çœ‹åˆ°ï¼ŒåŒ—äº¬å¸‚åŸºæœ¬ä¸Šæ˜¯åœ¨åœ°å›¾ä¸­å¿ƒçš„ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š æ³¨æ„ï¼šMKCoordinateSpançš„æ˜¾ç¤ºèŒƒå›´æ˜¯å–å†³äºå¤§çš„ä¸€è¾¹çš„ï¼Œæ¯”å¦‚å¦‚æœæˆ‘ä»¬è¿™æ ·å†™ï¼š 1MKCoordinateSpanMake(1.8, 360); æœ€åä¾ç„¶ä¼šæ˜¾ç¤ºæ•´ä¸ªä¸–ç•Œåœ°å›¾ã€‚ - (void)setRegion:(MKCoordinateRegion)region animated:(BOOL)animated; è¿™ä¸ªæ–¹æ³•å¯ä»¥åœ¨è®¾ç½®åç»™åœ°å›¾åŠ ä¸ŠåŠ¨ç”»æ•ˆæœ @property (nonatomic) CLLocationCoordinate2D centerCoordinate; è®¾ç½®åœ°å›¾çš„ä¸­å¿ƒç‚¹ä½ç½® - (void)setCenterCoordinate:(CLLocationCoordinate2D)coordinate animated:(BOOL)animated; è®¾ç½®åœ°å›¾çš„ä¸­å¿ƒç‚¹ä½ç½®ï¼Œå¹¶é™„å¸¦åŠ¨ç”»æ•ˆæœ 4ã€åæ ‡è½¬æ¢æ–¹æ³•- (CGPoint)convertCoordinate:(CLLocationCoordinate2D)coordinate toPointToView:(UIView *)view; å°†ç»çº¬åº¦è½¬æ¢ä¸ºè§†å›¾ä¸Šçš„åæ ‡ - (CLLocationCoordinate2D)convertPoint:(CGPoint)point toCoordinateFromView:(UIView *)view; å°†è§†å›¾ä¸Šçš„åæ ‡è½¬æ¢ä¸ºç»çº¬åº¦ - (CGRect)convertRegion:(MKCoordinateRegion)region toRectToView:(UIView *)view; å°†åœ°ç†æ˜¾ç¤ºçš„åŒºåŸŸè½¬æ¢ä¸ºè§†å›¾ä¸Šçš„åæ ‡åŒºåŸŸ - (MKCoordinateRegion)convertRect:(CGRect)rect toRegionFromView:(UIView *)view;å°†è§†å›¾ä¸Šçš„åæ ‡åŒºåŸŸè½¬æ¢ä¸ºåœ°ç†åŒºåŸŸ 5ã€MKMapViewå¸¸ç”¨æ–¹æ³•å’Œå±æ€§@property (nonatomic, getter=isZoomEnabled) BOOL zoomEnabled; è®¾ç½®æ˜¯å¦å…è®¸æåˆæ‰‹åŠ¿è¿›è¡Œåœ°å›¾ç¼©æ”¾ @property (nonatomic, getter=isScrollEnabled) BOOL scrollEnabled; è®¾ç½®æ˜¯å¦å…è®¸æ»‘åŠ¨ @property (nonatomic, getter=isRotateEnabled) BOOL rotateEnabled; è®¾ç½®æ˜¯å¦å…è®¸æ—‹è½¬åœ°å›¾ @property (nonatomic, getter=isPitchEnabled) BOOL pitchEnabled; è®¾ç½®æ˜¯å¦æ”¯æŒ3Dæ•ˆæœ @property (nonatomic) BOOL showsPointsOfInterest; è®¾ç½®æ˜¯å¦æ˜¾ç¤ºå…´è¶£ç‚¹ï¼Œä¾‹å¦‚å­¦æ ¡ï¼ŒåŒ»é™¢ç­‰ @property (nonatomic) BOOL showsBuildings; è®¾ç½®æ˜¯å¦æ˜¾ç¤ºå»ºç­‘ç‰©è½®å»“ï¼Œåªåœ¨æ ‡å‡†çš„åœ°å›¾ä¸­æœ‰æ•ˆ @property (nonatomic) BOOL showsUserLocation; æ˜¯å¦æ˜¾ç¤ºç”¨æˆ·ä½ç½® @property (nonatomic) MKUserTrackingMode userTrackingMode; - (void)setUserTrackingMode:(MKUserTrackingMode)mode animated:(BOOL)animated; è®¾ç½®æ›´æ–°ç”¨æˆ·ä½ç½®çš„æ¨¡å¼,å½“æ˜¾ç¤ºç”¨æˆ·ä½ç½®è®¾ç½®ä¸ºYESï¼Œè¿™ä¸ªæ–¹æ³•ä¹Ÿè®¾ç½®äº†åï¼Œåœ°å›¾æ¡†æ¶ä¸ºæˆ‘ä»¬ç›´æ¥é›†æˆäº†å®šä½ï¼Œåœ°å›¾ä¸Šå°±ä¼šæ˜¾ç¤ºæˆ‘ä»¬çš„ä½ç½®ï¼Œæ¨¡å¼çš„æšä¸¾å¦‚ä¸‹ï¼š 12345typedef NS_ENUM(NSInteger, MKUserTrackingMode) &#123; MKUserTrackingModeNone = 0, // ä¸è·Ÿè¸ªç”¨æˆ·ä½ç½® MKUserTrackingModeFollow, // è·Ÿè¸ªç”¨æˆ·ä½ç½® MKUserTrackingModeFollowWithHeading, // å½“æ–¹å‘æ”¹å˜æ—¶è·Ÿè¸ªç”¨æˆ·ä½ç½®&#125; @property (nonatomic, readonly) MKUserLocation *userLocation; è·å–ç”¨æˆ·ä½ç½®çš„æ ‡æ³¨ @property (nonatomic, readonly, getter=isUserLocationVisible) BOOL userLocationVisible; è·å–ç”¨æˆ·ä½ç½®æ˜¯å¦å¯è§ - (void)addAnnotation:(id )annotation; åœ¨åœ°å›¾ä¸Šæ·»åŠ ä¸€ä¸ªæ ‡æ³¨ - (void)addAnnotations:(NSArray *)annotations;åœ¨åœ°å›¾ä¸Šæ·»åŠ ä¸€ç»„æ ‡æ³¨- (void)removeAnnotation:(id )annotation; ç§»é™¤ä¸€ä¸ªæ ‡æ³¨ - (void)removeAnnotations:(NSArray *)annotations; ç§»é™¤ä¸€ç»„æ ‡æ³¨ @property (nonatomic, readonly) NSArray *annotations; è·å–æ‰€æœ‰æ ‡æ³¨æ•°ç»„ - (MKAnnotationView *)viewForAnnotation:(id )annotation; è·å–æ ‡æ³¨çš„è§†å›¾ - (MKAnnotationView )dequeueReusableAnnotationViewWithIdentifier:(NSString )identifier; è·å–å¤ç”¨çš„æ ‡æ³¨ - (void)selectAnnotation:(id )annotation animated:(BOOL)animated; é€‰ä¸­ä¸€ä¸ªæ ‡æ³¨ - (void)deselectAnnotation:(id )annotation animated:(BOOL)animated; å–æ¶ˆé€‰ä¸­ä¸€ä¸ªæ ‡æ³¨ @property (nonatomic, copy) NSArray *selectedAnnotations; é€‰ä¸­æ ‡æ³¨çš„æ•°ç»„ - (void)addOverlay:(id )overlay level:(MKOverlayLevel)level; æ·»åŠ ä¸€ä¸ªåœ°å›¾è¦†ç›–ç‰©ï¼Œlevelæ˜¯è®¾ç½®ä¸€ä¸ªå±‚çº§ï¼Œæšä¸¾å¦‚ä¸‹ï¼š 1234typedef NS_ENUM(NSInteger, MKOverlayLevel) &#123; MKOverlayLevelAboveRoads = 0, // è¦†ç›–ç‰©ä½äºé“è·¯ä¹‹ä¸Š MKOverlayLevelAboveLabels//è¦†ç›–ç‰©ä½äºæ ‡ç­¾ä¹‹ä¸Š&#125; - (void)addOverlays:(NSArray *)overlays level:(MKOverlayLevel)level; æ·»åŠ ä¸€ç»„åœ°å›¾è¦†ç›–ç‰© - (void)removeOverlay:(id )overlay; ç§»é™¤ä¸€ä¸ªåœ°å›¾è¦†ç›–ç‰© - (void)removeOverlays:(NSArray *)overlays; ç§»é™¤ä¸€ç»„åœ°å›¾è¦†ç›–ç‰© - (void)insertOverlay:(id )overlay atIndex:(NSUInteger)index level:(MKOverlayLevel)level; åœ¨ç´¢å¼•å¤„æ’å…¥ä¸€ä¸ªåœ°å›¾è¦†ç›–ç‰© - (void)insertOverlay:(id )overlay aboveOverlay:(id )sibling; å°†ä¸€ä¸ªåœ°å›¾è¦†ç›–ç‰©æ’åœ¨åˆ°æŸä¸ªè¦†ç›–ç‰©ä¹‹ä¸Š - (void)insertOverlay:(id )overlay belowOverlay:(id )sibling; å°†ä¸€ä¸ªåœ°å›¾è¦†ç›–ç‰©æ’å…¥åˆ°æŸä¸ªè¦†ç›–ç‰©ä¹‹ä¸‹ - (void)exchangeOverlay:(id )overlay1 withOverlay:(id )overlay2; æ›¿æ¢ä¸€ä¸ªåœ°å›¾è¦†ç›–ç‰© @property (nonatomic, readonly) NSArray *overlays; åœ°å›¾è¦†ç›–ç‰©æ•°ç»„ - (NSArray *)overlaysInLevel:(MKOverlayLevel)level; å±‚çº§å±æ€§ä¸‹çš„ä¸œåœŸè¦†ç›–ç‰©æ•°ç»„ äºŒã€MKMapViewDelegateç›¸å…³æ–¹æ³•è§£è¯»- (void)mapView:(MKMapView *)mapView regionWillChangeAnimated:(BOOL)animated; åœ°å›¾æ˜¾ç¤ºä½ç½®å°†è¦æ”¹å˜æ—¶è°ƒç”¨çš„æ–¹æ³• - (void)mapView:(MKMapView *)mapView regionDidChangeAnimated:(BOOL)animated; åœ°å›¾æ˜¾ç¤ºä½ç½®å·²ç»æ”¹å˜æ—¶è°ƒç”¨çš„æ–¹æ³• - (void)mapViewWillStartLoadingMap:(MKMapView *)mapView; åœ°å›¾å°†è¦åŠ è½½æ—¶è°ƒç”¨çš„æ–¹æ³• - (void)mapViewDidFinishLoadingMap:(MKMapView *)mapView; åœ°å›¾åŠ è½½å®Œæˆæ—¶æ‰§è¡Œçš„æ–¹æ³• - (void)mapViewDidFailLoadingMap:(MKMapView )mapView withError:(NSError )error; åœ°å›¾åŠ è½½å¤±è´¥æ—¶æ‰§è¡Œçš„æ–¹æ³• - (MKAnnotationView )mapView:(MKMapView )mapView viewForAnnotation:(id )annotation; æ¸²æŸ“æ ‡æ³¨è§†å›¾æ—¶è°ƒç”¨çš„æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªæ–¹æ³•è‡ªå®šä¹‰æ ‡æ³¨è§†å›¾ - (void)mapView:(MKMapView )mapView didAddAnnotationViews:(NSArray )views; æ ‡æ³¨æ·»åŠ å®Œæˆåè°ƒç”¨çš„æ–¹æ³• - (void)mapView:(MKMapView )mapView didSelectAnnotationView:(MKAnnotationView )view; é€‰ä¸­æ ‡æ³¨æ—¶è°ƒç”¨çš„æ–¹æ³• - (void)mapView:(MKMapView )mapView didDeselectAnnotationView:(MKAnnotationView )view; å–æ¶ˆé€‰ä¸­æ ‡æ³¨æ—¶è°ƒç”¨çš„æ–¹æ³• - (void)mapViewWillStartLocatingUser:(MKMapView *)mapView; å°†è¦å¼€å§‹å®šä½ç”¨æˆ·ä½ç½®æ—¶è°ƒç”¨çš„æ–¹æ³• - (void)mapViewDidStopLocatingUser:(MKMapView *)mapView; åœæ­¢å®šä½ç”¨æˆ·ä½ç½®æ—¶è°ƒç”¨çš„æ–¹æ³• - (void)mapView:(MKMapView )mapView didUpdateUserLocation:(MKUserLocation )userLocation; æ›´æ–°ç”¨æˆ·ä½ç½®æ—¶è°ƒç”¨çš„æ–¹æ³• - (void)mapView:(MKMapView )mapView didFailToLocateUserWithError:(NSError )error; æ›´æ–°ç”¨æˆ·ä½ç½®å¤±è´¥æ—¶è°ƒç”¨çš„æ–¹æ³• - (void)mapView:(MKMapView )mapView annotationView:(MKAnnotationView )view didChangeDragState:(MKAnnotationViewDragState)newState fromOldState:(MKAnnotationViewDragState)oldState; æ ‡æ³¨æ‹–åŠ¨çŠ¶æ€æ”¹å˜è°ƒç”¨çš„æ–¹æ³•ï¼ŒMKAnnotationViewDragStateçš„æšä¸¾å¦‚ä¸‹ï¼š 1234567typedef NS_ENUM(NSUInteger, MKAnnotationViewDragState) &#123; MKAnnotationViewDragStateNone = 0, // åˆå§‹çŠ¶æ€ MKAnnotationViewDragStateStarting, // å¼€å§‹æ‹–åŠ¨æ—¶ MKAnnotationViewDragStateDragging, // æ­£åœ¨æ‹–åŠ¨ MKAnnotationViewDragStateCanceling, // å–æ¶ˆæ‹–åŠ¨ MKAnnotationViewDragStateEnding // ç»“æŸæ‹–åŠ¨&#125;; - (void)mapView:(MKMapView *)mapView didChangeUserTrackingMode:(MKUserTrackingMode)mode animated:(BOOL)animated; å®šä½ç”¨æˆ·ä½ç½®æ¨¡å¼æ”¹å˜æ—¶è°ƒç”¨çš„æ–¹æ³• - (MKOverlayView )mapView:(MKMapView )mapView viewForOverlay:(id )overlay; æ¸²æŸ“è¦†ç›–ç‰©è§†å›¾æ—¶è°ƒç”¨çš„æ–¹æ³•ï¼Œå¯ä»¥è‡ªå®šä¹‰è¦†ç›–ç‰©è§†å›¾ - (void)mapView:(MKMapView )mapView didAddOverlayViews:(NSArray )overlayViews; æ·»åŠ å®Œæˆè¦†ç›–ç‰©æ•°ç»„æ‰§è¡Œçš„æ–¹æ³• å¤‡æ³¨ï¼šåœ¨iOS9ä¸­ï¼Œåœ°å›¾ç±»å‹çš„æšä¸¾åˆæ·»åŠ äº†ä¸¤ç§ï¼š 1234567typedef NS_ENUM(NSUInteger, MKMapType) &#123; MKMapTypeStandard = 0,//æ ‡å‡† MKMapTypeSatellite,//å«æ˜Ÿ MKMapTypeHybrid,//æ··åˆ MKMapTypeSatelliteFlyover NS_ENUM_AVAILABLE(10_11, 9_0),//ç«‹ä½“å«æ˜Ÿ MKMapTypeHybridFlyover NS_ENUM_AVAILABLE(10_11, 9_0),//ç«‹ä½“æ··åˆ&#125; NS_ENUM_AVAILABLE(10_9, 3_0) __WATCHOS_PROHIBITED; æ³¨ï¼šå› ç¯‡å¹…é™åˆ¶ï¼Œå…³äºç³»ç»Ÿå¤§å¤´é’ˆå’Œè‡ªå®šä¹‰æ ‡æ³¨çš„åº”ç”¨ã€åœ°å›¾è¦†ç›–ç‰©çš„åº”ç”¨å°†åœ¨ä¸‹ä¸€ç¯‡åšå®¢ä¸­è®¨è®ºã€‚ ç–æ¼ä¹‹å¤„ æ¬¢è¿æŒ‡æ­£ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSåŸç”Ÿåœ°å›¾å¼€å‘æŒ‡å—ç»­â€”â€”å¤§å¤´é’ˆä¸è‡ªå®šä¹‰æ ‡æ³¨","slug":"58iOSåŸç”Ÿåœ°å›¾å¼€å‘æŒ‡å—ç»­â€”â€”å¤§å¤´é’ˆä¸è‡ªå®šä¹‰æ ‡æ³¨","date":"2015-05-14T16:00:00.000Z","updated":"2021-06-25T02:22:30.328Z","comments":true,"path":"2015/05/15/58iOSåŸç”Ÿåœ°å›¾å¼€å‘æŒ‡å—ç»­â€”â€”å¤§å¤´é’ˆä¸è‡ªå®šä¹‰æ ‡æ³¨/","link":"","permalink":"http://huishao.cc/2015/05/15/58iOSåŸç”Ÿåœ°å›¾å¼€å‘æŒ‡å—ç»­â€”â€”å¤§å¤´é’ˆä¸è‡ªå®šä¹‰æ ‡æ³¨/","excerpt":"","text":"iOSåŸç”Ÿåœ°å›¾å¼€å‘æŒ‡å—ç»­â€”â€”å¤§å¤´é’ˆä¸è‡ªå®šä¹‰æ ‡æ³¨åœ¨ä¸Šä¸€ç¯‡åšå®¢ä¸­http://my.oschina.net/u/2340880/blog/415360ç³»ç»Ÿæ€»ç»“äº†iOSåŸç”Ÿåœ°å›¾æ¡†æ¶MapKitä¸­ä¸»ä½“åœ°å›¾çš„è®¾ç½®ä¸åº”ç”¨ã€‚è¿™ç¯‡æ˜¯ä¸Šä¸€ç¯‡çš„ä¸€ä¸ªåç»­ï¼Œæ€»ç»“äº†ç³»ç»Ÿçš„å¤§å¤´é’ˆè§†å›¾ä»¥åŠè‡ªå®šä¹‰æ ‡æ³¨è§†å›¾çš„æ–¹æ³•ã€‚ ä¸€ã€å…ˆæ¥è®¤è¯†ä¸€ä¸ªåè®®MKAnnotationå®˜æ–¹æ–‡æ¡£å‘Šè¯‰æˆ‘ä»¬ï¼Œæ‰€æœ‰æ ‡æ³¨çš„ç±»å¿…é¡»éµå®ˆè¿™ä¸ªåè®®ã€‚æ‰€ä»¥å¯ä»¥äº†è§£ï¼Œæ ‡æ³¨è¿™ä¸ªæ¦‚å¿µåœ¨é€»è¾‘å±æ€§å’Œè§†å›¾ä¸Šæ˜¯åˆ†å¼€çš„ã€‚å…ˆæ¥çœ‹ä¸‹è¿™ä¸ªåè®®å£°æ˜äº†å“ªäº›æ–¹æ³•ï¼š 123456789@protocol MKAnnotation &lt;NSObject&gt;@property (nonatomic, readonly) CLLocationCoordinate2D coordinate;//åœ°ç†åæ ‡ä½ç½®@optional@property (nonatomic, readonly, copy) NSString *title;//æ ‡é¢˜@property (nonatomic, readonly, copy) NSString *subtitle;//å‰¯æ ‡é¢˜//æ‹–åŠ¨æ—¶è°ƒç”¨- (void)setCoordinate:(CLLocationCoordinate2D)newCoordinate;@end äºŒã€åˆ›å»ºä¸€ä¸ªç³»ç»Ÿæ ‡æ³¨å¤§å¤´é’ˆ123456789101112131415161718- (void)viewDidLoad &#123; [super viewDidLoad]; //åˆå§‹åŒ–åœ°å›¾ mapView =[[MKMapView alloc]initWithFrame:self.view.frame]; //è®¾ç½®ä»£ç† mapView.delegate=self; //è®¾ç½®ä½ç½® mapView.region=MKCoordinateRegionMake(CLLocationCoordinate2DMake(39.26, 116.3), MKCoordinateSpanMake(1.8, 1)); mapView.mapType=MKMapTypeStandard; //åˆå§‹åŒ–ä¸€ä¸ªå¤§å¤´é’ˆç±» MKPointAnnotation * ann = [[MKPointAnnotation alloc]init]; //è®¾ç½®å¤§å¤´é’ˆåæ ‡ ann.coordinate=CLLocationCoordinate2DMake(39.26, 116.3); ann.title=@&quot;æˆ‘&quot;; ann.subtitle=@&quot;çœ‹è¿™é‡Œ&quot;; [mapView addAnnotation:ann]; [self.view addSubview:mapView];&#125; æ•ˆæœå¦‚ä¸‹ï¼š é‡ç»˜å¤§å¤´é’ˆè§†å›¾ï¼Œå¤§å¤´é’ˆæ¸²æŸ“æ—¶ä¼šè°ƒç”¨åœ°å›¾ä»£ç†çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥é‡å†™è¿™ä¸ªæ–¹æ³•è¿›è¡Œå¤§å¤´é’ˆçš„é‡ç»˜ï¼Œæ¥æ›´æ”¹å…¶é¢œè‰²ï¼š 123456-(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id&lt;MKAnnotation&gt;)annotation&#123; //åˆ›å»ºä¸€ä¸ªç³»ç»Ÿå¤§å¤´é’ˆå¯¹è±¡ MKPinAnnotationView * view = [[MKPinAnnotationView alloc]initWithAnnotation:annotation reuseIdentifier:@&quot;pin&quot;]; view.pinColor=MKPinAnnotationColorGreen;//è®¾ç½®é¢œè‰²ä¸ºç»¿è‰² return view;&#125; æ•ˆæœå¦‚ä¸‹ï¼š MKAnnotationViewæ˜¯æ ‡æ³¨çš„è§†å›¾ç±»ï¼Œä¸€ä¼šæˆ‘ä»¬é€šè¿‡å®ƒæ¥è‡ªå®šä¹‰æˆ‘ä»¬è‡ªå·±çš„æ ‡æ³¨ï¼Œå…ˆæ¥çœ‹MKPinAnnotationViewè¿™ä¸ªç±»ï¼Œè¿™ä¸ªç±»ç»§æ‰¿äºMKAnnotationViewï¼Œæ˜¯ä¸€ä¸ªå¤§å¤´é’ˆè§†å›¾ç±»ã€‚è¿™ä¸ªç±»æ ¹ç®€å•ï¼Œåªæœ‰ä¸€ä¸‹ä¸¤ä¸ªå±æ€§ï¼š @property (nonatomic) MKPinAnnotationColor pinColor; è®¾ç½®å¤§å¤´é’ˆçš„é¢œè‰²ï¼Œæšä¸¾å¦‚ä¸‹ï¼š 12345typedef NS_ENUM(NSUInteger, MKPinAnnotationColor) &#123; MKPinAnnotationColorRed = 0,//çº¢è‰² MKPinAnnotationColorGreen,//ç»¿è‰² MKPinAnnotationColorPurple//ç´«è‰²&#125;; @property (nonatomic) BOOL animatesDrop; è®¾ç½®æ·»åŠ æ—¶æ˜¯å¦æ˜¾ç¤ºé™è½åŠ¨ç”» ä¸‰ã€è‡ªå®šä¹‰æ ‡æ³¨è§†å›¾123456789101112131415161718-(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id&lt;MKAnnotation&gt;)annotation&#123; MKAnnotationView * view = [[MKAnnotationView alloc]initWithAnnotation:annotation reuseIdentifier:@&quot;annotation&quot;]; //è®¾ç½®æ ‡æ³¨çš„å›¾ç‰‡ view.image=[UIImage imageNamed:@&quot;ä¿æ¸©è½¦0.png&quot;]; //ç‚¹å‡»æ˜¾ç¤ºå›¾è¯¦æƒ…è§†å›¾ å¿…é¡»MKPointAnnotationå¯¹è±¡è®¾ç½®äº†æ ‡é¢˜å’Œå‰¯æ ‡é¢˜ view.canShowCallout=YES; //åˆ›å»ºäº†ä¸¤ä¸ªview UIView * view1 = [[UIView alloc]initWithFrame:CGRectMake(0, 0, 50, 50)]; view1.backgroundColor=[UIColor redColor]; UIView * view2 = [[UIView alloc]initWithFrame:CGRectMake(0, 0, 30, 50)]; view2.backgroundColor=[UIColor blueColor]; //è®¾ç½®å·¦å³è¾…åŠ©è§†å›¾ view.leftCalloutAccessoryView=view1; view.rightCalloutAccessoryView=view2; //è®¾ç½®æ‹–æ‹½ å¯ä»¥é€šè¿‡ç‚¹å‡»ä¸æ”¾è¿›è¡Œæ‹–æ‹½ view.draggable=YES; return view;&#125; æ•ˆæœå¦‚ä¸‹ï¼š å››ã€æ ‡æ³¨è§†å›¾ç±»MKAnnotationViewçš„å…¶ä»–å¸¸ç”¨å±æ€§è§£è¯»@property (nonatomic) CGPoint centerOffset; è§†å›¾ä¸­å¿ƒçš„åç§»é‡ @property (nonatomic) CGPoint calloutOffset; ç‚¹å‡»åå¼¹å‡ºè§†å›¾çš„åç§»é‡ @property (nonatomic, getter=isEnabled) BOOL enabled; è®¾ç½®æ˜¯å¦æœ‰æ•ˆ @property (nonatomic, getter=isHighlighted) BOOL highlighted; æ˜¯å¦é«˜äº®çŠ¶æ€ @property (nonatomic) CGPoint leftCalloutOffset; è®¾ç½®å·¦è¾…åŠ©è§†å›¾çš„åç§»é‡ @property (nonatomic) CGPoint rightCalloutOffset; è®¾ç½®å³è¾…åŠ©è§†å›¾çš„åç§»é‡ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSå®šä½æœåŠ¡çš„åº”ç”¨","slug":"55IOSå®šä½æœåŠ¡çš„åº”ç”¨","date":"2015-05-13T16:00:00.000Z","updated":"2021-06-25T02:19:06.778Z","comments":true,"path":"2015/05/14/55IOSå®šä½æœåŠ¡çš„åº”ç”¨/","link":"","permalink":"http://huishao.cc/2015/05/14/55IOSå®šä½æœåŠ¡çš„åº”ç”¨/","excerpt":"","text":"iOSå®šä½æœåŠ¡çš„åº”ç”¨ä¸€ã€æˆæƒçš„ç”³è¯·ä¸è®¾ç½®åœ¨IOS8ä¹‹åï¼ŒIOSçš„å®šä½æœåŠ¡åšäº†ä¼˜åŒ–ï¼Œè‹¥è¦ä½¿ç”¨å®šä½æœåŠ¡ï¼Œå¿…é¡»å…ˆè·å–ç”¨æˆ·çš„æˆæƒã€‚ é¦–å…ˆéœ€è¦åœ¨info.plistæ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ªé”®ï¼šNSLocationAlwaysUsageDescriptionæˆ–è€…NSLocationWhenInUseUsageDescriptionã€‚å…¶ä¸­NSLocationAlwaysUsageDescriptionæ˜¯è¦å§‹ç»ˆä½¿ç”¨å®šä½æœåŠ¡ï¼ŒNSLocationWhenInUseUsageDescriptionæ˜¯åªåœ¨å‰å°ä½¿ç”¨å®šä½æœåŠ¡ã€‚ IOS8ä¸­CLLocationManageræ–°å¢çš„ä¸¤ä¸ªæ–°æ–¹æ³•ï¼š - (void)requestAlwaysAuthorization; - (void)requestWhenInUseAuthorization; è¿™ä¸¤ä¸ªæ–¹æ³•å¯¹åº”ä¸Šé¢çš„ä¸¤ä¸ªé”®å€¼ï¼Œç”¨äºåœ¨ä»£ç ä¸­ç”³è¯·å®šä½æœåŠ¡æƒé™ã€‚ äºŒã€å®šä½æœåŠ¡ç›¸å…³æ–¹æ³•IOSçš„å®šä½æœåŠ¡åœ¨CoreLocation.frameworkæ¡†æ¶å†…ï¼Œé¦–å…ˆå¼•å…¥è¿™ä¸ªæ¡†æ¶ï¼š å¼€å¯å®šä½æœåŠ¡çš„ä»£ç éå¸¸ç®€å•ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516171819#import &quot;ViewController.h&quot;#import &lt;CoreLocation/CoreLocation.h&gt;@interface ViewController ()&lt;CLLocationManagerDelegate&gt;//å®šä½æœåŠ¡çš„ä»£ç†@end@implementation ViewController- (void)viewDidLoad &#123; [super viewDidLoad]; CLLocationManager* manager = [[CLLocationManager alloc]init];//åˆå§‹åŒ–ä¸€ä¸ªå®šä½ç®¡ç†å¯¹è±¡ [manager requestWhenInUseAuthorization];//ç”³è¯·å®šä½æœåŠ¡æƒé™ manager.delegate=self;//è®¾ç½®ä»£ç† [manager startUpdatingLocation];//å¼€å¯å®šä½æœåŠ¡&#125;//å®šä½ä½ç½®æ”¹å˜åè°ƒç”¨çš„å‡½æ•°-(void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations&#123; NSLog(@&quot;%@&quot;,locations);&#125;@end CLLocationManagerç›¸å…³æ–¹æ³•è§£è¯»ï¼š + (BOOL)locationServicesEnabled; åˆ¤æ–­è®¾å¤‡æ˜¯å¦æ”¯æŒå®šä½æœåŠ¡ + (BOOL)headingAvailable; åˆ¤æ–­è®¾å¤‡æ˜¯å¦æ”¯æŒèˆªå‘ä¿¡æ¯åŠŸèƒ½(æµ·æ‹”ï¼Œé€Ÿåº¦ï¼Œæ–¹å‘ç­‰ä¼ æ„Ÿå™¨çš„æ”¯æŒ) + (BOOL)significantLocationChangeMonitoringAvailable; åˆ¤æ–­è®¾å¤‡æ˜¯å¦æ”¯æŒæ›´æ–°ä½ç½®ä¿¡æ¯ + (BOOL)isMonitoringAvailableForClass:(Class)regionClass; åˆ¤æ–­è®¾å¤‡æ˜¯å¦æ”¯æŒåŒºåŸŸæ£€æµ‹ï¼ŒregionClassæ˜¯åœ°å›¾æ¡†æ¶ä¸­çš„ç±»ã€‚ + (BOOL)isRangingAvailabl; åˆ¤æ–­è®¾å¤‡æ˜¯å¦æ”¯æŒè“ç‰™æµ‹è· + (CLAuthorizationStatus)authorizationStatus; è·å¾—å®šä½æœåŠ¡çš„æˆæƒçŠ¶æ€ï¼ŒCLAuthorizationStatusçš„æšä¸¾å¦‚ä¸‹ï¼š 1234567typedef NS_ENUM(int, CLAuthorizationStatus) &#123; kCLAuthorizationStatusNotDetermined = 0,//ç”¨æˆ·è¿˜æ²¡æœ‰åšé€‰æ‹© kCLAuthorizationStatusRestricted,//åº”ç”¨æ‹’æ¥ä½¿ç”¨å®šä½æœåŠ¡ kCLAuthorizationStatusDenied,//ç”¨æˆ·æ‹’ç»æˆæƒ kCLAuthorizationStatusAuthorizedAlways,//8.0åå¯ç”¨ï¼Œå§‹ç»ˆæˆæƒä½ç½®æœåŠ¡ kCLAuthorizationStatusAuthorizedWhenInUse,//8.0åå¯ç”¨ï¼Œåªåœ¨å‰å°æˆæƒä½ç½®æœåŠ¡&#125;; @property(assign, nonatomic) CLActivityType activityType; è¿™ä¸ªå±æ€§ç”¨æ¥è®¾ç½®ä½ç½®æ›´æ–°çš„æ¨¡å¼ï¼Œæšä¸¾å¦‚ä¸‹ï¼š 123456typedef NS_ENUM(NSInteger, CLActivityType) &#123; CLActivityTypeOther = 1,//æœªçŸ¥æ¨¡å¼ï¼Œé»˜è®¤ä¸ºæ­¤ CLActivityTypeAutomotiveNavigation, //è½¦è¾†å¯¼èˆªæ¨¡å¼ CLActivityTypeFitness, //è¡Œäººæ¨¡å¼ CLActivityTypeOtherNavigation //å…¶ä»–äº¤é€šå·¥å…·æ¨¡å¼&#125;; æ¨¡å¼çš„åº”ç”¨å¯ä»¥èµ·åˆ°èŠ‚çœç”µé‡çš„ä½œç”¨ï¼Œä¾‹å¦‚è½¦è¾†å¯¼èˆªæ¨¡å¼ï¼Œå½“æ±½è½¦åœæ­¢æ—¶ï¼Œä½ç½®æ›´æ–°æœåŠ¡ä¼šæš‚åœã€‚ @property(assign, nonatomic) CLLocationDistance distanceFilter; è®¾ç½®ä½ç½®æ›´æ–°çš„æ•æ„ŸèŒƒå›´ï¼Œå•ä½ä¸ºç±³ã€‚ @property(assign, nonatomic) CLLocationAccuracy desiredAccuracy; è®¾ç½®å®šä½æœåŠ¡çš„ç²¾ç¡®åº¦ï¼Œç³»ç»Ÿå®šä¹‰å¥½çš„å‡ ä¸ªå‚æ•°å¦‚ä¸‹ï¼š kCLLocationAccuracyBestForNavigation;//å¯¼èˆªæœ€é«˜ç²¾ç¡®kCLLocationAccuracyBest;//é«˜ç²¾ç¡®kCLLocationAccuracyNearestTenMeters;//10ç±³kCLLocationAccuracyHundredMeters;//ç™¾ç±³kCLLocationAccuracyKilometer;//åƒç±³kCLLocationAccuracyThreeKilometers;//ä¸‰å…¬é‡Œ @property(assign, nonatomic) BOOL pausesLocationUpdatesAutomatically; è®¾ç½®ä½ç½®æ›´æ–°æ˜¯å¦è‡ªåŠ¨æš‚åœ @property(readonly, nonatomic, copy) CLLocation *location; æœ€åä¸€æ¬¡æ›´æ–°çš„ä½ç½®ä¿¡æ¯ï¼Œåªè¯»å±æ€§ @property(assign, nonatomic) CLLocationDegrees headingFilter; ç›¸å…³èˆªå‘æ›´æ–°çš„æ•æ„ŸèŒƒå›´ @property(assign, nonatomic) CLDeviceOrientation headingOrientation; å®šä½èˆªå‘æ—¶çš„å‚ç…§æ–¹å‘é»˜è®¤ä¸ºæ­£åŒ—ï¼Œæšä¸¾å¦‚ä¸‹ï¼š 123456789typedef NS_ENUM(int, CLDeviceOrientation) &#123; CLDeviceOrientationUnknown = 0,//æ–¹å‘æœªçŸ¥ CLDeviceOrientationPortrait,//çºµå‘æ¨¡å¼ CLDeviceOrientationPortraitUpsideDown,//çºµå‘å€’ç½®æ¨¡å¼ CLDeviceOrientationLandscapeLeft,//å·¦å‘æ¨ªå‘æ¨¡å¼ CLDeviceOrientationLandscapeRight,//å³å‘æ¨ªå‘æ¨¡å¼ CLDeviceOrientationFaceUp,//æ°´å¹³å±å¹•å‘ä¸Šæ¨¡å¼ CLDeviceOrientationFaceDown//æ°´å¹³å±å¹•ä¸‹æ¨¡å¼&#125;; @property(readonly, nonatomic, copy) CLHeading *heading; æœ€åä¸€ä¸ªå®šä½å¾—åˆ°çš„èˆªå‘ä¿¡æ¯ - (void)startUpdatingLocation; å¼€å¯å®šä½æœåŠ¡ - (void)stopUpdatingLocation; åœæ­¢å®šä½æœåŠ¡ - (void)startUpdatingHeading; å¼€å¯èˆªå‘åœ°ç†ä¿¡æ¯æœåŠ¡ - (void)stopUpdatingHeading; åœæ­¢èˆªå‘åœ°ç†ä¿¡æ¯æœåŠ¡ ä¸‰ã€å®šä½æœåŠ¡ä»£ç†çš„ç›¸å…³æ–¹æ³•- (void)locationManager:(CLLocationManager )manager didUpdateLocations:(NSArray )locationsï¼› ä½ç½®æ›´æ–°åè°ƒç”¨çš„æ–¹æ³•ï¼Œæ•°ç»„ä¸­æ˜¯æ‰€æœ‰å®šä½åˆ°çš„ä½ç½®ä¿¡æ¯ï¼Œæœ€åä¸€ä¸ªæ˜¯æœ€æ–°çš„ã€‚ - (void)locationManager:(CLLocationManager )manager didUpdateHeading:(CLHeading )newHeadingï¼› èˆªå‘ä¿¡æ¯æ›´æ–°åè°ƒç”¨çš„æ–¹æ³• - (void)locationManager:(CLLocationManager )manager didFailWithError:(NSError )error; å®šä½å¼‚å¸¸æ—¶è°ƒç”¨çš„æ–¹æ³• å››ã€å®šä½æœåŠ¡è·å–åˆ°çš„ä½ç½®å¯¹è±¡ä¸Šé¢ä¹Ÿæåˆ°ï¼Œå®šä½åè¿”å›çš„æ•°ç»„ä¸­å­˜æ”¾çš„éƒ½æ˜¯CLLocationå¯¹è±¡ï¼Œè¿™é‡Œé¢æœ‰å¾ˆè¯¦ç»†çš„ä½ç½®ä¿¡æ¯ï¼Œå±æ€§å¦‚ä¸‹ï¼š @property(readonly, nonatomic) CLLocationCoordinate2D coordinate; ç»çº¬åº¦å±æ€§ï¼ŒCLLocationCoordinate2Dæ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œå¦‚ä¸‹ï¼š 1234typedef struct &#123; CLLocationDegrees latitude;//çº¬åº¦ CLLocationDegrees longitude;//ç»åº¦&#125; CLLocationCoordinate2D; @property(readonly, nonatomic) CLLocationDistance altitude; æµ·æ‹”é«˜åº¦ï¼Œæµ®ç‚¹å‹ @property(readonly, nonatomic) CLLocationAccuracy horizontalAccuracy; æ°´å¹³æ–¹å‘çš„å®¹é”™åŠå¾„ @property(readonly, nonatomic) CLLocationAccuracy verticalAccuracy; ç«–ç›´æ–¹å‘çš„å®¹é”™åŠå¾„ @property(readonly, nonatomic) CLLocationDirection course; è®¾å¤‡å‰è¿›çš„æ–¹å‘ï¼Œå–å€¼èŒƒå›´ä¸º0-359.9ï¼Œç›¸å¯¹æ­£åŒ—æ–¹å‘ @property(readonly, nonatomic) CLLocationSpeed speed; é€Ÿåº¦ï¼Œå•ä½ä¸ºm/s @property(readonly, nonatomic, copy) NSDate *timestamp; å®šä½æ—¶çš„æ—¶é—´æˆ³ äº”ã€èˆªæ ‡å®šä½å¾—åˆ°çš„èˆªæ ‡ä¿¡æ¯å¯¹è±¡CLHeadingå¯¹è±¡çš„å±æ€§ä¿¡æ¯ï¼š @property(readonly, nonatomic) CLLocationDirection magneticHeading; è®¾å¤‡æœå‘èˆªæ ‡æ–¹å‘ï¼Œ0ä¸ºåŒ—ç£æã€‚ @property(readonly, nonatomic) CLLocationDirection trueHeading; è®¾å¤‡æœå‘çœŸå®æ–¹å‘ï¼Œ0è¢«åœ°ç†ä¸Šçš„åŒ—æ @property(readonly, nonatomic) CLLocationDirection headingAccuracy; æ–¹å‘åå·® @property(readonly, nonatomic) CLHeadingComponentValue x; xè½´çš„æ–¹å‘å€¼ @property(readonly, nonatomic) CLHeadingComponentValue y; yè½´æ–¹å‘å€¼ @property(readonly, nonatomic) CLHeadingComponentValue z; zè½´æ–¹å‘å€¼ @property(readonly, nonatomic, copy) NSDate *timestamp; æ–¹å‘å®šä½æ—¶é—´æˆ³ å¦‚æœ‰ç–æ¼ æ¬¢è¿æŒ‡æ­£ å­¦ä¹ ä½¿ç”¨ æ¬¢è¿è½¬è½½ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"æ ‡ç­¾ä¹‹ç¾å…­â€”â€”æ»šåŠ¨å­—å¹•çš„åº”ç”¨","slug":"56æ ‡ç­¾ä¹‹ç¾å…­â€”â€”æ»šåŠ¨å­—å¹•çš„åº”ç”¨","date":"2015-05-13T16:00:00.000Z","updated":"2021-06-25T02:20:03.143Z","comments":true,"path":"2015/05/14/56æ ‡ç­¾ä¹‹ç¾å…­â€”â€”æ»šåŠ¨å­—å¹•çš„åº”ç”¨/","link":"","permalink":"http://huishao.cc/2015/05/14/56æ ‡ç­¾ä¹‹ç¾å…­â€”â€”æ»šåŠ¨å­—å¹•çš„åº”ç”¨/","excerpt":"","text":"æ ‡ç­¾ä¹‹ç¾â€”â€”æ»šåŠ¨å­—å¹•çš„åº”ç”¨åœ¨ç½‘é¡µä¸­ï¼Œæˆ‘ä»¬ç»å¸¸å¯ä»¥çœ‹åˆ°ä¸€äº›æ»šåŠ¨å‡ºç°çš„å­—å¹•ï¼ŒæŒ‰é’®ç­‰å†…å®¹ã€‚æ»šåŠ¨å­—å¹•çš„åº”ç”¨ä¼šä½¿ç½‘é¡µçš„å†…å®¹æ›´åŠ ç”ŸåŠ¨ç´§å‡‘ã€‚ 1ã€æ»šåŠ¨æ ‡ç­¾ å°†æ»šåŠ¨æ˜¾ç¤ºçš„æ–‡å­—æ”¾åœ¨è¿™ä¸ªæ ‡ç­¾å†…ï¼Œå°±å¯ä»¥å®ç°æ»šåŠ¨å­—å¹•ã€‚è¿™ä¸ªæ ‡ç­¾æœ‰ä¸€ä¸ªbehaviorå±æ€§ï¼Œå¯ä»¥è®¾ç½®æ»šåŠ¨æ–¹å¼ï¼š scrollï¼šå¾ªç¯æ»šåŠ¨ï¼Œé»˜è®¤çš„æ»šåŠ¨æ–¹å¼ slideï¼šåªæ»šåŠ¨ä¸€æ¬¡ alternateï¼šå·¦å³æ¥å›æ»šåŠ¨ 2ã€è®¾ç½®å­—å¹•èƒŒæ™¯é¢œè‰² 123&lt;body&gt;&lt;marquee behavior=&quot;alternate&quot; bgcolor=&quot;#F4070B&quot;&gt;è¿™é‡Œæ˜¯æ»šåŠ¨å­—å¹•&lt;/marquee&gt;&lt;/body&gt; 3ã€è®¾ç½®å­—å¹•æ»šåŠ¨æ–¹å‘ï¼šdirectionå±æ€§ï¼Œå¯ä»¥è®¾ç½®çš„å€¼æœ‰ï¼šleftï¼Œrightï¼Œupï¼Œdownã€‚åˆ†åˆ«è¡¨ç¤ºä»å³å‘å·¦æ»šåŠ¨ï¼Œä»å·¦å‘å³æ»šåŠ¨ï¼Œä»ä¸‹å‘ä¸Šæ»šåŠ¨ï¼Œä»ä¸Šå‘ä¸‹æ»šåŠ¨ã€‚ 4ã€è®¾ç½®å­—å¹•çš„æ»šåŠ¨é€Ÿåº¦ é€šè¿‡è®¾ç½®scrollamountå±æ€§æ¥æ›´æ”¹å­—å¹•çš„æ»šåŠ¨é€Ÿåº¦ï¼Œæ•°å€¼è¶Šå¤§ï¼Œé€Ÿåº¦è¶Šå¿«ã€‚ 5ã€è®¾ç½®å­—å¹•æ»šåŠ¨æ—¶é—´é—´éš” scrolldelayå¯ä»¥æ¥è®¾ç½®å­—å¹•çš„åœé¡¿æ—¶é—´é—´éš”ï¼Œå•ä½æ˜¯æ¯«ç§’ã€‚æ•ˆæœå’Œé€Ÿåº¦å±æ€§ç›¸ä¼¼ã€‚ 6ã€è®¾ç½®æ»šåŠ¨æ¬¡æ•° loopå±æ€§å¯ä»¥è®¾ç½®æ»šåŠ¨æ¬¡æ•°ï¼Œ-1åˆ™ä¸ºå¾ªç¯æ»šåŠ¨ã€‚ 7ã€è®¾ç½®é¼ æ ‡æ»‘è¿‡æ—¶åœæ­¢æ»šåŠ¨ï¼Œç§»å¼€æ—¶ç»§ç»­æ»šåŠ¨ï¼š 123&lt;body&gt;&lt;marquee direction=&quot;down&quot; onMouseOver=&quot;this.stop()&quot; onMouseOut=&quot;this.start()&quot;&gt;è¿™é‡Œæ˜¯æ»šåŠ¨å­—å¹•&lt;/marquee&gt;&lt;/body&gt; æ»šåŠ¨å­—å¹•ä¹Ÿæ”¯æŒå›¾ç‰‡çš„æ»šåŠ¨ï¼Œå°†æ–‡å­—æ¢ä½å›¾ç‰‡å³å¯ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"HTMLå­¦ä¹ ç¬”è®°","slug":"HTMLå­¦ä¹ ç¬”è®°","permalink":"http://huishao.cc/categories/HTMLå­¦ä¹ ç¬”è®°/"}],"tags":[],"keywords":[{"name":"HTMLå­¦ä¹ ç¬”è®°","slug":"HTMLå­¦ä¹ ç¬”è®°","permalink":"http://huishao.cc/categories/HTMLå­¦ä¹ ç¬”è®°/"}]},{"title":"æ ‡ç­¾ä¹‹ç¾äº”â€”â€”ç½‘é¡µè¡¨æ ¼çš„è®¾è®¡","slug":"54æ ‡ç­¾ä¹‹ç¾äº”â€”â€”ç½‘é¡µè¡¨æ ¼çš„è®¾è®¡","date":"2015-05-12T16:00:00.000Z","updated":"2021-06-25T02:16:52.682Z","comments":true,"path":"2015/05/13/54æ ‡ç­¾ä¹‹ç¾äº”â€”â€”ç½‘é¡µè¡¨æ ¼çš„è®¾è®¡/","link":"","permalink":"http://huishao.cc/2015/05/13/54æ ‡ç­¾ä¹‹ç¾äº”â€”â€”ç½‘é¡µè¡¨æ ¼çš„è®¾è®¡/","excerpt":"","text":"æ ‡ç­¾ä¹‹ç¾â€”â€”ç½‘é¡µè¡¨æ ¼çš„ä½¿ç”¨é€šè¿‡è¡¨æ ¼ï¼Œå¯ä»¥ä½¿ç½‘é¡µæ’ç‰ˆæ›´åŠ æ¸…æ™°ï¼Œå½¢å¼æ›´åŠ ç®€æ´æ¼‚äº®ã€‚ ä¸€ã€è¡¨æ ¼å¸ƒå±€ä¸­ä¸‰ä¸ªé‡è¦çš„æ ‡ç­¾1ã€ï¼šè¡¨æ ¼çš„å¼€å§‹å’Œç»“æŸæ ‡ç­¾ï¼Œè¡Œåˆ—çš„å¸ƒå±€éƒ½åœ¨æ ‡ç­¾å†…ã€‚ 2ã€è¡Œæ ‡ç­¾çš„å¼€å§‹å’Œç»“æŸ 3ã€åˆ—æ ‡ç­¾çš„å¼€å§‹å’Œç»“æŸ è¡Œæ ‡ç­¾åœ¨åˆ—æ ‡ç­¾çš„å¤–å±‚ï¼Œä¸èƒ½å•ç‹¬ä½¿ç”¨ï¼Œå…¶ä¸­å¿…é¡»è‡³å°‘æœ‰ä¸€åˆ—ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567&lt;body&gt;&lt;table border=&quot;1&quot;&gt;&lt;!--ä¸ºäº†ä¾¿äºè§‚å¯Ÿï¼Œè®¾ç½®ä¸€ä¸ªè¾¹æ¡†--&gt;&lt;tr&gt;&lt;td&gt;è¡¨æ ¼çš„å†…å®¹&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/body&gt; æ•ˆæœå¦‚ä¸‹ï¼š äºŒã€å•å…ƒæ ¼è®¾ç½®çš„ç›¸å…³æ ‡ç­¾1ã€å•å…ƒæ ¼è¡¨å¤´ è¿™ä¸ªæ ‡ç­¾ç”¨æ¥è®¾ç½®è¡¨æ ¼çš„è¡¨å¤´ï¼Œä½œç”¨å’Œåˆ—æ ‡ç­¾ç›¸ä¼¼ï¼Œåªæ˜¯å­—ä½“æ˜¯åŠ é»‘çš„ã€‚ 1234567&lt;body&gt;&lt;table border=&quot;1&quot;&gt;&lt;tr&gt;&lt;th&gt;1&lt;/th&gt;&lt;th&gt;2&lt;/th&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/body&gt; 2ã€è¡¨æ ¼å®½åº¦å±æ€§å’Œé«˜åº¦å±æ€§width,height è¿™ä¸¤ä¸ªå±æ€§å¯ä»¥è®¾ç½®åœ¨æ ‡ç­¾é‡Œï¼Œä¹Ÿå¯ä»¥è®¾ç½®åœ¨å’Œä¸­ï¼Œä½œç”¨åŸŸä¼šä¸åŒã€‚ 1234567&lt;body&gt;&lt;table border=&quot;1&quot;&gt;&lt;tr&gt;&lt;th width=&quot;200&quot;&gt;1&lt;/th&gt;&lt;th width=&quot;100&quot;&gt;2&lt;/th&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/body&gt; 3ã€è®¾ç½®è¡¨æ ¼èƒŒæ™¯å›¾ç‰‡background è¿™ä¸ªå±æ€§å’Œå°ºå¯¸å±æ€§ç”¨æ³•ä¸€æ ·ï¼Œå†™åœ¨ç›¸åº”çš„æ ‡ç­¾é‡Œï¼Œå°±æ˜¯ç›¸åº”çš„èƒŒæ™¯å›¾æ¡ˆï¼Œè®¾ç½®çš„æ˜¯å›¾ç‰‡çš„è·¯å¾„ã€‚ 4ã€è®¾ç½®è¡¨æ ¼è¡Œåˆ—é—´è·cellspacing 1234567&lt;body&gt;&lt;table border=&quot;1&quot; cellspacing=&quot;20&quot;&gt;&lt;tr&gt;&lt;th width=&quot;200&quot;&gt;1&lt;/th&gt;&lt;th width=&quot;100&quot;&gt;2&lt;/th&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/body&gt; 5ã€è®¾ç½®å•å…ƒæ ¼å†…å®¹åç§»é‡ cellpadding 12345&lt;body&gt;&lt;table cellpadding=&quot;50&quot; border=&quot;2&quot;&gt;&lt;tr&gt;&lt;td&gt;ç¬¬ä¸€åˆ—&lt;/td&gt;&lt;td&gt;ç¬¬äºŒåˆ—&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/body&gt; ä¸‰ã€è¡¨æ ¼çš„è¾¹æ¡†å±æ€§å’Œå¯¹é½æ¨¡å¼çµæ´»çš„åº”ç”¨è¾¹æ¡†ï¼Œå¯ä»¥ä½¿è¡¨æ ¼çœ‹èµ·æ¥æ›´åŠ æ•´æ´æœ‰åºã€‚ 1ã€è¾¹æ¡†å®½åº¦å±æ€§border 2ã€è¾¹æ¡†çš„é¢œè‰²å±æ€§bordercolor 3ã€ä¸æ˜¾ç¤ºå¤–è¾¹æ¡†frame=â€voidâ€ 12345&lt;body&gt;&lt;table cellpadding=&quot;50&quot; border=&quot;5&quot; frame=&quot;void&quot;&gt;&lt;tr&gt;&lt;td&gt;ç¬¬ä¸€åˆ—&lt;/td&gt;&lt;td&gt;ç¬¬äºŒåˆ—&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/body&gt; 4ã€è®¾ç½®frame=â€hsidesâ€åˆ™åªæ˜¾ç¤ºä¸Šä¸‹å¤–è¾¹æ¡† 12345&lt;body&gt;&lt;table cellpadding=&quot;50&quot; border=&quot;5&quot; frame=&quot;hsides&quot;&gt;&lt;tr&gt;&lt;td&gt;ç¬¬ä¸€åˆ—&lt;/td&gt;&lt;td&gt;ç¬¬äºŒåˆ—&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/body&gt; 5ã€è®¾ç½®frame=â€vsidesâ€åˆ™åªæ˜¾ç¤ºå·¦å³å¤–è¾¹æ¡† 6ã€å•ç‹¬æ˜¾ç¤ºè¾¹æ¡†çš„frameå€¼åˆ†åˆ«ä¸ºï¼š ä¸Šï¼šabove ä¸‹ï¼šbelow å·¦ï¼šlhs å³ï¼šrhs 7ã€è®¾ç½®è¡¨æ ¼å¯¹é½æ¨¡å¼ï¼š æ°´å¹³å¯¹é½æ¨¡å¼ï¼šalign è¡¨æ ¼çš„alignå±æ€§å¯ä»¥è®¾ç½®å¯¹é½æ¨¡å¼ï¼Œcenter,left,rightåˆ†åˆ«å¯¹åº”å±…ä¸­ï¼Œå·¦å¯¹é½ï¼Œå³å¯¹é½ã€‚ å‚ç›´å¯¹é½æ¨¡å¼ï¼švalign å’Œæ°´å¹³å¯¹é½æ¨¡å¼ç›¸ä¼¼ï¼Œè¿™ä¸ªå±æ€§çš„å€¼ä¸ºï¼šmiddleï¼Œtopï¼Œbottomå¯¹åº”äº†ä¸­é—´å¯¹é½ï¼Œä¸Šå¯¹é½å’Œä¸‹å¯¹é½ã€‚ å››ã€è¡¨æ ¼è¡Œå’Œåˆ—çš„æ“ä½œ1ã€è¡Œçš„åˆå¹¶ï¼šrowspan 12345678910&lt;body&gt;&lt;table cellpadding=&quot;50&quot; border=&quot;5&quot; frame=&quot;hsides&quot;&gt;&lt;tr&gt;&lt;td rowspan=&quot;2&quot;&gt;ç¬¬ä¸€è¡Œ&lt;/td&gt;&lt;td&gt;ç¬¬ä¸€è¡Œ&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;ç¬¬äºŒè¡Œ&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/body&gt; 2ã€åˆ—çš„åˆå¹¶colspan 12345678910&lt;body&gt;&lt;table cellpadding=&quot;50&quot; border=&quot;5&quot; frame=&quot;hsides&quot;&gt;&lt;tr&gt;&lt;td colspan=&quot;2&quot;&gt;ç¬¬ä¸€åˆ—&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;ç¬¬ä¸€åˆ—&lt;/td&gt;&lt;td&gt;ç¬¬äºŒåˆ—&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/body&gt; 3ã€è¡¨æ ¼çš„æ ‡é¢˜æ ‡ç­¾ 1234567891011&lt;body&gt;&lt;table cellpadding=&quot;50&quot; border=&quot;5&quot; frame=&quot;hsides&quot; &gt;&lt;caption&gt;æ ‡é¢˜&lt;/caption&gt;&lt;tr&gt;&lt;td colspan=&quot;2&quot;&gt;ç¬¬ä¸€åˆ—&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;ç¬¬ä¸€åˆ—&lt;/td&gt;&lt;td&gt;ç¬¬äºŒåˆ—&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/body&gt; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"HTMLå­¦ä¹ ç¬”è®°","slug":"HTMLå­¦ä¹ ç¬”è®°","permalink":"http://huishao.cc/categories/HTMLå­¦ä¹ ç¬”è®°/"}],"tags":[],"keywords":[{"name":"HTMLå­¦ä¹ ç¬”è®°","slug":"HTMLå­¦ä¹ ç¬”è®°","permalink":"http://huishao.cc/categories/HTMLå­¦ä¹ ç¬”è®°/"}]},{"title":"åˆ†åˆ†é’Ÿæå®šIOSè¿œç¨‹æ¶ˆæ¯æ¨é€","slug":"53åˆ†åˆ†é’Ÿæå®šIOSè¿œç¨‹æ¶ˆæ¯æ¨é€","date":"2015-05-11T16:00:00.000Z","updated":"2021-06-25T02:13:59.786Z","comments":true,"path":"2015/05/12/53åˆ†åˆ†é’Ÿæå®šIOSè¿œç¨‹æ¶ˆæ¯æ¨é€/","link":"","permalink":"http://huishao.cc/2015/05/12/53åˆ†åˆ†é’Ÿæå®šIOSè¿œç¨‹æ¶ˆæ¯æ¨é€/","excerpt":"","text":"åˆ†åˆ†é’Ÿæå®šIOSè¿œç¨‹æ¶ˆæ¯æ¨é€ä¸€ã€å¼•è¨€IOSä¸­æ¶ˆæ¯çš„æ¨é€æœ‰ä¸¤ç§æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯æœ¬åœ°æ¨é€å’Œè¿œç¨‹æ¨é€ï¼Œæœ¬åœ°æ¨é€åœ¨http://my.oschina.net/u/2340880/blog/405491è¿™ç¯‡åšå®¢ä¸­æœ‰è¯¦ç»†çš„ä»‹ç»ï¼Œè¿™é‡Œä¸»è¦è®¨è®ºè¿œç¨‹æ¨é€çš„æµç¨‹ä¸é…ç½®è¿‡ç¨‹ã€‚ äºŒã€è¿œç¨‹æ¨é€æœºåˆ¶çš„åŸç†1ã€ä»ä¸€å¼ å¾ˆç«çš„å›¾è¯´èµ·æœç´¢IOSè¿œç¨‹æ¨é€ï¼Œä½ æ€»èƒ½çœ‹åˆ°ä¸€å¼ å¦‚ä¸‹çš„æµç¨‹ç¤ºæ„å›¾ï¼Œå› ä¸ºè¿™å¼ å›¾ç¡®å®å¾ˆç«ï¼Œæ‰€ä»¥æˆ‘ä¹Ÿå°†å®ƒå¼•ç”¨åœ¨æ­¤ï¼š è¿™å¼ å›¾ç¤ºæ„çš„å¾ˆæ¸…æ™°ï¼Œå¤§è‡´æ„æ€æ˜¯è¿™æ ·ï¼šä½ çš„åº”ç”¨æœåŠ¡ç«¯å°†æ¶ˆæ¯å‘é€åˆ°appleçš„APNSæœåŠ¡å™¨ï¼ŒAPNSæœåŠ¡å™¨å°†æ¶ˆæ¯æ¨é€åˆ°æŒ‡å®šçš„Iphoneï¼Œæœ€åç”±Iphoneè´Ÿè´£å°†æ¶ˆæ¯æ¨é€è‡³ä½ çš„APPã€‚åœ¨æ­¤å…ˆä¸è¯´è¿™ä¸ªè¿‡ç¨‹æ˜¯å¦‚ä½•å®ç°çš„ï¼Œä»…ä»…çœ‹è¿™ä¸ªæµç¨‹ï¼Œä½ å¯èƒ½ä¼šè§‰å¾—ï¼Œåœ¨ä½ ä»¬æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ä¹‹é—´å¢åŠ äº†ä¸€ä¸ªappleçš„APNSï¼Œä¸æ˜¯å¢åŠ å¼€å‘è€…çš„è´Ÿæ‹…ä¹ˆï¼Ÿå…¶å®ç»“æœæ°æ°ç›¸åï¼Œå› ä¸ºappleå¯¹æ¨é€çš„ç»Ÿä¸€ç®¡ç†ï¼Œä½¿æˆ‘ä»¬å¼€å‘è€…çš„å·¥ä½œå˜å¾—å¼‚å¸¸ç®€å•ã€‚ 2ã€æœåŠ¡ç«¯å¦‚ä½•è¿æ¥åˆ°å®¢æˆ·ç«¯çš„å¦‚æœä½ æ˜¯åšandroidå¼€å‘çš„ï¼Œä½ ä¸€å®šéå¸¸äº†è§£é•¿é“¾æ¥ä¸å¿ƒè·³åŒ…ã€‚äº‹å®ä¸Šï¼Œå¤§éƒ¨åˆ†çš„androidåº”ç”¨çš„æ¨é€ä¹Ÿç¡®å®æ˜¯é€šè¿‡é•¿é“¾æ¥æ¥å®ç°çš„ã€‚å› ä¸ºandroidç³»ç»Ÿçš„å¼€æ”¾æ€§ï¼ŒAPPæ˜¯å¾ˆå®¹æ˜“åšåˆ°è‡ªå¯åŠ¨å’Œåå°é•¿é“¾æ¥çš„ï¼Œè€Œå¿ƒè·³éªŒè¯ï¼Œå°±æ˜¯å§‹ç»ˆä¿è¯é•¿é“¾æ¥å±äºæ¥é€šçŠ¶æ€ï¼Œç„¶åç”±æœåŠ¡ç«¯ç›´æ¥æ¨é€æ¶ˆæ¯ã€‚å¦‚æœIOSå¼€å‘è€…ä¹Ÿé‡‡ç”¨è¿™ç§æ€è·¯ï¼Œå°±ååˆ†å›°éš¾äº†ï¼Œåœ¨IOSä¸­æƒ³è¦ä¿æŒä¸€ä¸ªAPPæœåŠ¡å§‹ç»ˆä¸è¢«ç³»ç»Ÿæ€æ­»ï¼Œæˆ‘åªèƒ½è¯´å¤ªéš¾äº†ã€‚é€šè¿‡ä¸Šé¢çš„æµç¨‹å›¾ï¼Œå¯¹æ¯”androidçš„æ¨é€æ€è·¯ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“æ˜ç™½ï¼ŒIOSä¸­å…¶å®ä¹Ÿå§‹ç»ˆæœ‰ä¸€ä¸ªé•¿é“¾æ¥ï¼Œé‚£å°±æ˜¯ç³»ç»Ÿæœ¬èº«ï¼Œè¿™ä¸ªé•¿é“¾æ¥å§‹ç»ˆä¸APNSæœåŠ¡å™¨ç›¸è¿ï¼Œç„¶åç»Ÿä¸€ç®¡ç†æ‰€æœ‰åº”ç”¨ç¨‹åºçš„æ¨é€ã€‚ 3ã€è¿™æ˜¯IOSæ¨é€æœºåˆ¶çš„ä¼˜åŠ¿ï¼Ÿä¸‹é¢çš„è¿™äº›ï¼Œåªæ˜¯æˆ‘ä¸ªäººçš„ä¸€äº›çœ‹æ³•ã€‚ç³»ç»Ÿå¹¶æ— ä¼˜åŠ£ï¼Œä¼˜åŠ£åœ¨äºä¸ªäººå–œå¥½ã€‚ 1ã€å› ä¸ºæ¨é€çš„æœåŠ¡ç«¯æ˜¯appleIDçš„éªŒè¯ç”¨æˆ·ï¼Œæ¨é€å¯é æ€§ä¼šé«˜ã€‚ 2ã€æ‰€æœ‰æ¨é€æ¶ˆæ¯ç”±APNSç»Ÿä¸€ç®¡ç†ï¼Œæ•ˆç‡é«˜ã€‚ 3ã€åœ¨å®¢æˆ·ç«¯åªéœ€ç³»ç»Ÿç»´æŠ¤ä¸€ä¸ªé•¿é“¾æ¥ï¼ŒèŠ‚çœäº†ç”¨æˆ·æµé‡æ¶ˆè€—å’Œæ‰‹æœºçš„æ€§èƒ½æ¶ˆè€—ï¼Œå¹¶ä¸”æé«˜äº†å®‰å…¨æ€§ï¼Œä½¿å¾—æœ‰æ¶æ„æ¨é€å’Œæµæ°“è½¯ä»¶çš„å‡ ç‡é™ä½ã€‚ ä¸‰ã€åˆ†åˆ†é’Ÿè®©ä½ çš„APPæ”¶åˆ°è¿œç¨‹æ¨é€1ã€å·¥æ¬²å–„å…¶äº‹ã€å¿…å…ˆåˆ©å…¶å™¨â€”â€”åˆ›å»ºæ¨é€è¯ä¹¦(1)è¯·æ±‚CSRæ–‡ä»¶ åœ¨MACåº”ç”¨ç¨‹åºä¸­æ‰¾åˆ°é’¥åŒ™ä¸²è®¿é—®ï¼Œæ‰“å¼€å®ƒã€‚ ç‚¹å‡»é€‰é¡¹æ ä¸­çš„é’¥åŒ™ä¸²è®¿é—®ä¸­çš„è¯ä¹¦åŠ©ç†ï¼š é€‰æ‹©ä»è¯ä¹¦é¢å‘æœºæ„ç”³è¯·è¯ä¹¦: å¡«å†™ç”µå­é‚®ä»¶å’Œåç§°ï¼Œé€‰æ‹©å‚¨å­˜åˆ°ç£ç›˜ï¼Œç„¶åç»§ç»­ã€‚ è¿™æ—¶ï¼Œæˆ‘ä»¬å­˜å‚¨çš„åœ°æ–¹æœ‰äº†è¿™æ ·ä¸€ä¸ªæ–‡ä»¶ï¼šCertificateSigningRequest.certSigningRequestã€‚ (2)å¯¼å‡ºå¯†é’¥æ–‡ä»¶ æ‰“å¼€é’¥åŒ™ä¸²ï¼Œä¼šå‘ç°å¤šäº†ä¸€å¯¹å¯†é’¥ï¼Œåå­—å°±æ˜¯ä¸Šé¢ä½ å¡«å†™çš„å¸¸ç”¨åç§°ã€‚ æˆ‘ä»¬é€‰æ‹©ä¸“ç”¨å¯†é’¥è¿›è¡Œå¯¼å‡ºï¼Œç„¶åè®¾ç½®ä¸€ä¸ªæˆ‘ä»¬è‡ªå·±çš„å¯†ç ï¼š è¿™æ—¶å€™æˆ‘ä»¬åˆæœ‰äº†ä¸€ä¸ªåç¼€åä¸º.p12çš„æ–‡ä»¶ã€‚ (3)åˆ›å»ºAppId åˆ°https://developer.apple.comçš„member Centerï¼š ç”¨ä½ ä»˜è¿‡è´¹çš„å¼€å‘è€…appleIDç™»é™†åï¼Œé€‰æ‹©Certificates: å¦‚æœä½ çš„é¡¹ç›®å·²ç»åˆ›å»ºäº†APP idï¼Œåˆ™å¯ä»¥ä¸ç”¨é‡æ–°åˆ›å»ºï¼Œä½†æ˜¯ä½ åˆ›å»ºçš„APP idå¿…é¡»è¦æ”¯æŒè¿œç¨‹æ¨é€ã€‚å¦‚æœè¿˜æ²¡æœ‰åˆ›å»ºï¼Œç‚¹å‡»åŠ å·ï¼Œåˆ›å»ºä¸€ä¸ªï¼š ä¹‹åçš„ç•Œé¢ä¸­APP IDæœ‰ä¸¤ç§ç±»å‹ï¼šExplicitå’ŒWildcardï¼Œåˆ†åˆ«æ˜¯ç‰¹æ®Šçš„å’Œé€šé…çš„ï¼Œæˆ‘ä»¬éœ€è¦æ¨é€åŠŸèƒ½ï¼Œè¿™ä¸ªIDä¸èƒ½æ˜¯é€šé…çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬é€‰æ‹©ç¬¬ä¸€ä¸ªã€‚ è¿™é‡Œéœ€è¦å¡«çš„çš„Bundle IDå¿…é¡»å’Œæˆ‘ä»¬Appä¸­çš„ä¸€è‡´ï¼š åœ¨APP IDçš„æœåŠ¡è®¾ç½®ä¸­ï¼Œå°†Push Notificationå‹¾é€‰ä¸Šï¼Œç‚¹å‡»continueã€‚ ä¹‹åç‚¹å‡»submitï¼Œæœ€åç‚¹å‡»Doneã€‚è¿™æ—¶æˆ‘ä»¬çš„APP IDsåˆ—è¡¨ä¸­ä¼šå‡ºç°æˆ‘ä»¬åˆšæ‰åˆ›å»ºçš„APP IDã€‚ (4)åˆ›å»ºè¯ä¹¦ ç‚¹å‡»æˆ‘ä»¬åˆšæ‰åˆ›å»ºçš„APP IDï¼Œä½ ä¼šçœ‹åˆ°Push Notificationä¸€è¡Œä¸ºæœªè®¾å®šçš„ã€‚æˆ‘ä»¬ç‚¹å‡»Editã€‚ åœ¨Push Notificationsè®¾ç½®é‡Œæ˜¯å¦‚ä¸‹ç•Œé¢ï¼Œdevelopmentæ˜¯å¼€å‘è¯ä¹¦ï¼ŒProductionæ˜¯äº§å“è¯ä¹¦ï¼Œæˆ‘ä»¬ç°åœ¨éœ€è¦æµ‹è¯•ï¼Œæ‰€ä»¥ç”¨Developmentè¯ä¹¦ï¼Œä¸Šçº¿æ—¶è¦ä½¿ç”¨Productionè¯ä¹¦ã€‚ç‚¹å‡»Create Certificateã€‚ æ¥ç€ç‚¹å‡»continueï¼Œå¦‚ä¸‹ç•Œé¢ä¼šè®©æˆ‘ä»¬é€‰æ‹©ä¸€ä¸ªCSRæ–‡ä»¶ï¼Œæˆ‘ä»¬ç¬¬ä¸€æ­¥åˆ›å»ºçš„æ–‡ä»¶åœ¨è¿™é‡Œæ´¾ä¸Šç”¨åœºäº†ï¼Œé€‰æ‹©é‚£ä¸ªæ–‡ä»¶ï¼Œç‚¹å‡»Generateã€‚ å°†åˆ›å»ºå¥½çš„è¯ä¹¦ä¸‹è½½åˆ°ç”µè„‘ä¸­ï¼š è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»æœ‰äº†ä¸‰ä¸ªæ–‡ä»¶äº†ï¼Œåˆ†åˆ«æ˜¯CSRæ–‡ä»¶ï¼Œ.p12æ–‡ä»¶ï¼Œ.ceræ–‡ä»¶ã€‚è¦å°†è¿™ä¸‰ä¸ªæ–‡ä»¶æ”¾åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹ã€‚.ceræ–‡ä»¶åˆ†ä¸ºæµ‹è¯•å’Œäº§å“ä¸¤ä¸ªï¼Œéœ€è¦å“ªä¸ªè‡ªè¡Œé€‰æ‹©ã€‚å†™äº†è¿™ä¹ˆå¤šï¼Œæˆ‘ä»¬çš„å‡†å¤‡å·¥ä½œå¯ç®—æ˜¯åšå®Œäº†ï¼Œä¸è¦ç°å¿ƒï¼Œå…¶å®ä½ çš„æ¨é€å·¥ä½œåŸºæœ¬ä¸Šä¹Ÿå°±åšå®Œäº†ã€‚åªæ˜¯ç”³è¯·è¿‡ç¨‹éº»çƒ¦äº†ä¸€äº›ï¼Œä½†å·¥ç¨‹çš„ä»£ç ï¼Œæˆ‘ä»¬å‡ ä¹ä¸ç”¨æ€ä¹ˆé…ç½®ã€‚ 2ã€å…µé©¬æœªåŠ¨ã€ç²®è‰å…ˆè¡Œâ€”â€”æœåŠ¡ç«¯è¿›è¡Œä¿¡æ¯æ¨é€çš„è®¾ç½®(1)å¤„ç†è¯ä¹¦ æ‰“å¼€ç»ˆç«¯cdåˆ°æˆ‘ä»¬ä¸Šé¢å¾—åˆ°çš„ä¸‰ä¸ªæ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ã€‚ åœ¨ç»ˆç«¯æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š 1$ openssl x509 -in aps_development.cer -inform der -out PushCert.pem aps_development.ceræ˜¯åˆšæ‰ç”Ÿæˆçš„.ceræ–‡ä»¶çš„æ–‡ä»¶åã€‚ä¼šåœ¨å½“å‰æ–‡ä»¶å¤¹ä¸­ç”Ÿæˆä¸€ä¸ªpemæ–‡ä»¶ï¼Œè¿™æ˜¯æˆ‘ä»¬æœåŠ¡ç«¯å¯¹åº”çš„è¯ä¹¦ã€‚ å†æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š 1$ openssl pkcs12 -nocerts -out PushKey.pem -in key.p12 key.p12æ˜¯ä¸Šé¢ç”Ÿæˆçš„.p12æ–‡ä»¶çš„æ–‡ä»¶åã€‚è¿™æ—¶ç»ˆç«¯ä¼šè®©è¾“å…¥å¯†ç ï¼Œè¿™é‡Œçš„å¯†ç å°±æ˜¯ä¸Šé¢æˆ‘ä»¬è®¾ç½®çš„å¯†é’¥çš„å¯†ç ã€‚è¾“å…¥å¯†ç åå›è½¦ï¼Œå¦‚æœå¯†ç æ­£ç¡®ï¼Œä¼šè®©æˆ‘ä»¬è¾“å…¥æ–°å¯†ç (ä¸€å®šåˆ‡è®°)ï¼Œè¾“å…¥ä¸¤æ¬¡åï¼Œç»ˆç«¯ä¼šæç¤ºæˆåŠŸåˆ›å»ºPushKey.pemæ–‡ä»¶ã€‚ æœ€åä¸€æ­¥ï¼Œå°†æˆ‘ä»¬ç”Ÿæˆçš„ä¸¤ä¸ªpemæ–‡ä»¶å’Œæˆä¸ºä¸€ä¸ªï¼š 1$ cat PushCert.pem PushKey.pem &gt; ck.pem (2)æµ‹è¯•è¯ä¹¦æ˜¯å¦å¯ç”¨ åœ¨ç»ˆç«¯æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š 1$ telnet gateway.sandbox.push.apple.com 2195 ç­‰ä¸€å°ä¼šï¼Œå¦‚æœç»ˆç«¯æ˜¾ç¤ºä¸‹é¢çš„æƒ…å½¢ï¼Œåˆ™è¯ä¹¦æ­£å¸¸ã€‚ ç„¶åæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š 1openssl s_client -connect gateway.sandbox.push.apple.com:2195 -cert PushChatCert.pem -key PushKey.pem è¾“å…¥å¯†ç åå›è½¦æ˜¾ç¤ºå¦‚ä¸‹çš„ç»“æœåˆ™è¿æ¥æˆåŠŸï¼š 3ã€å¤©æ¶¯æµ·è§’ã€ä¸€æ­¥ä¹‹é¥â€”â€”åº”ç”¨ç¨‹åºä¸­çš„é…ç½®åœ¨æˆ‘ä»¬é¡¹ç›®çš„AppDelegateä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š 12345678910111213141516171819202122- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions &#123;double version = [[UIDevice currentDevice].systemVersion doubleValue];//åˆ¤å®šç³»ç»Ÿç‰ˆæœ¬ã€‚if(version&gt;=8.0f)&#123; UIUserNotificationSettings *settings = [UIUserNotificationSettings settingsForTypes:(UIRemoteNotificationTypeBadge|UIRemoteNotificationTypeSound|UIRemoteNotificationTypeAlert) categories:nil]; [[UIApplication sharedApplication] registerUserNotificationSettings:settings]; &#125;else&#123; UIRemoteNotificationType myTypes = UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeAlert | UIRemoteNotificationTypeSound; [[UIApplication sharedApplication] registerForRemoteNotificationTypes:myTypes]; &#125;&#125;- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo&#123; // å¤„ç†æ¨é€æ¶ˆæ¯ NSLog(@&quot;userinfo:%@&quot;,userInfo); NSLog(@&quot;æ”¶åˆ°æ¨é€æ¶ˆæ¯:%@&quot;,[[userInfo objectForKey:@&quot;aps&quot;] objectForKey:@&quot;alert&quot;]);&#125;- (void)application:(UIApplication *)application didFailToRegisterForRemoteNotificationsWithError:(NSError *) error &#123; NSLog(@&quot;Registfail%@&quot;,error);&#125;-(void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken&#123; NSLog(@&quot;%@&quot;,deviceToken);//è¿™é‡Œçš„Tokenå°±æ˜¯æˆ‘ä»¬è®¾å¤‡è¦å‘Šè¯‰æœåŠ¡ç«¯çš„Tokenç &#125; ä¸‹é¢æ˜¯ç½‘ä¸Šæœçš„PHPæœåŠ¡ç«¯çš„ä»£ç ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748&lt;?php//è¿™é‡Œå¡«å†™è®¾å¤‡çš„Tokenç $deviceToken = &apos;74314cc9e8f747e2fa96c2c1585c830cdf994de6b453ce9fa1c09ba396b2f9e9&apos;;//è¿™é‡Œæ˜¯å¯†é’¥å¯†ç $passphrase = &apos;abcabc&apos;;//æ¨é€çš„æ¶ˆæ¯$message = &apos;è¿™æ˜¯ä¸€æ¡æ¨é€æ¶ˆæ¯&apos;;////////////////////////////////////////////////////////////////////////////////$ctx = stream_context_create();stream_context_set_option($ctx, &apos;ssl&apos;, &apos;local_cert&apos;, &apos;ck.pem&apos;);//ckæ–‡ä»¶stream_context_set_option($ctx, &apos;ssl&apos;, &apos;passphrase&apos;, $passphrase);// Open a connection to the APNS server$fp = stream_socket_client( &apos;ssl://gateway.sandbox.push.apple.com:2195&apos;, $err, $errstr, 60, STREAM_CLIENT_CONNECT|STREAM_CLIENT_PERSISTENT, $ctx);if (!$fp) exit(&quot;Failed to connect: $err $errstr&quot; . PHP_EOL);echo &apos;Connected to APNS&apos; . PHP_EOL;// Create the payload body$body[&apos;aps&apos;] = array( &apos;alert&apos; =&gt; $message, &apos;sound&apos; =&gt; &apos;default&apos; );// Encode the payload as JSON$payload = json_encode($body);// Build the binary notification$msg = chr(0) . pack(&apos;n&apos;, 32) . pack(&apos;H*&apos;, $deviceToken) . pack(&apos;n&apos;, strlen($payload)) . $payload;// Send it to the server$result = fwrite($fp, $msg, strlen($msg));if (!$result) echo &apos;Message not delivered&apos; . PHP_EOL;else echo &apos;Message successfully delivered&apos; . PHP_EOL;// Close the connection to the serverfclose($fp); ?&gt; æŠŠä¸Šé¢çš„PHPæ–‡ä»¶å’Œæˆ‘ä»¬çš„ckæ–‡ä»¶æ”¾åœ¨åŒä¸€ç›®å½•ä¸‹ã€‚åœ¨ç»ˆç«¯çš„å½“å‰ç›®å½•ä¸‹ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š 1$php push.php å¦‚æœæˆ‘ä»¬çš„è®¾å¤‡ç‹ç•¥æ­£å¸¸ï¼Œå°±å¯æ”¶åˆ°æ¨é€çš„æ¶ˆæ¯äº†ï¼š å››ã€å‡ ç‚¹æ³¨æ„1ã€å¦‚æœç»ˆç«¯å‘é€ä¿¡æ¯æ—¶æç¤ºå¯†é’¥ä¸å¯è®¿é—®ä¹‹ç±»çš„é”™è¯¯ï¼Œè¯·æ£€æŸ¥æ˜¯å¦cdåˆ°äº†å½“å‰ç›®å½•ï¼Œå¦‚æœè¿˜å­˜åœ¨é—®é¢˜ï¼Œå°†å¯†é’¥éƒ¨åˆ†ä»æ–°ç”Ÿæˆä¸€æ¬¡ã€‚ 2ã€æ³¨æ„PHPä»£ç ä¸­çš„å­—ç¬¦ä¸ºè‹±æ–‡å­—ç¬¦ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"æ ‡ç­¾ä¹‹ç¾å››â€”â€”ä¸ºç½‘é¡µæ·»åŠ ç»šä¸½å¤šå½©çš„å›¾åƒ","slug":"52æ ‡ç­¾ä¹‹ç¾å››â€”â€”ä¸ºç½‘é¡µæ·»åŠ ç»šä¸½å¤šå½©çš„å›¾åƒ","date":"2015-05-10T16:00:00.000Z","updated":"2021-06-25T02:12:36.825Z","comments":true,"path":"2015/05/11/52æ ‡ç­¾ä¹‹ç¾å››â€”â€”ä¸ºç½‘é¡µæ·»åŠ ç»šä¸½å¤šå½©çš„å›¾åƒ/","link":"","permalink":"http://huishao.cc/2015/05/11/52æ ‡ç­¾ä¹‹ç¾å››â€”â€”ä¸ºç½‘é¡µæ·»åŠ ç»šä¸½å¤šå½©çš„å›¾åƒ/","excerpt":"","text":"æ ‡ç­¾ä¹‹ç¾â€”â€”å›¾åƒçš„ä½¿ç”¨ä¸€ã€è®¾ç½®ç½‘é¡µèƒŒæ™¯å›¾ç‰‡12&lt;body background=&quot;1.jpg&quot;&gt;&lt;/body&gt; è¿™é‡Œå›¾ç‰‡è·¯å¾„çš„å†™æ³•å’Œæœ¬åœ°è¶…é“¾æ¥çš„å†™æ³•æ˜¯ä¸€æ ·çš„ï¼Œå¯ä»¥å‚è€ƒä¸Šä¸€ç¯‡åšå®¢ä¸­å…³äºæœ¬åœ°è·¯å¾„çš„åœ°æ–¹ï¼šhttp://my.oschina.net/u/2340880/blog/412934ã€‚ æ³¨æ„ï¼šå¦‚æœå›¾ç‰‡å¤§å°ä¸èƒ½å……æ»¡ç½‘é¡µï¼Œå›¾ç‰‡å°†ä¼šè¢«å¤åˆ¶å¹³é“ºã€‚ äºŒã€å›¾ç‰‡æ ‡ç­¾çš„åº”ç”¨æ˜¯å›¾ç‰‡æ’å…¥æ ‡ç­¾ã€‚å…¶ä¸­å›¾ç‰‡è·¯å¾„çš„å†™æ³•å’Œè¶…é“¾æ¥è·¯å¾„çš„å†™æ³•ä¸€æ ·ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š 123&lt;body&gt;&lt;img src=&quot;2.png&quot;/&gt;&lt;/body&gt; æ•ˆæœå¦‚ä¸‹ï¼š æ ‡ç­¾çš„altå±æ€§å¯ä»¥ä¸ºå›¾ç‰‡æ·»åŠ ç¼ºçœæ–‡å­—ï¼Œå½“å›¾ç‰‡ä¸å­˜åœ¨æˆ–è€…æ— æ³•æ˜¾ç¤ºæ—¶ï¼Œä¼šæœ‰æç¤ºæ•ˆæœã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š 123&lt;body&gt;&lt;img src=&quot;3.png&quot; alt=&quot;å›¾ç‰‡ä¸å­˜åœ¨&quot;/&gt;&lt;/body&gt; è®¾ç½®å›¾ç‰‡çš„å°ºå¯¸å±æ€§ï¼šwidthï¼Œheight 123&lt;body&gt;&lt;img src=&quot;1.jpg&quot; width=&quot;200&quot; height=&quot;200&quot;/&gt;&lt;!--è®¾ç½®å®½é«˜ä¸º200åƒç´ --&gt;&lt;/body&gt; ä¸‰ã€å›¾ç‰‡çš„å¯¹é½æ¨¡å¼alignæ˜¯å›¾ç‰‡æ ‡ç­¾çš„å¯¹é½å±æ€§ï¼Œå¯¹é½æ¨¡å¼æœ‰5ç§å±æ€§å€¼ï¼Œä¸‹é¢ä¸€ä¸€å¯¹å…¶è¿›è¡Œä»‹ç»ï¼š 1ã€bottom:åº•éƒ¨å¯¹å…¶1åº•éƒ¨å¯¹é½çš„ç¤ºä¾‹&lt;img src=&quot;1.jpg&quot; width=&quot;200&quot; height=&quot;200&quot; align=&quot;bottom&quot;/&gt;çš„å›¾ç‰‡ æ•ˆæœå¦‚ä¸‹ï¼š 2ã€left:å·¦éƒ¨å¯¹é½1åº•éƒ¨å¯¹é½çš„ç¤ºä¾‹&lt;img src=&quot;1.jpg&quot; width=&quot;200&quot; height=&quot;200&quot; align=&quot;left&quot;/&gt;çš„å›¾ç‰‡ 3ã€right:å³éƒ¨å¯¹å…¶1åº•éƒ¨å¯¹é½çš„ç¤ºä¾‹&lt;img src=&quot;1.jpg&quot; width=&quot;200&quot; height=&quot;200&quot; align=&quot;right&quot;/&gt;çš„å›¾ç‰‡ æ•ˆæœå¦‚ä¸‹ï¼š 4ã€middle:å±…ä¸­å¯¹é½1åº•éƒ¨å¯¹é½çš„ç¤ºä¾‹&lt;img src=&quot;1.jpg&quot; width=&quot;200&quot; height=&quot;200&quot; align=&quot;middle&quot;/&gt;çš„å›¾ç‰‡ æ•ˆæœå¦‚ä¸‹ï¼š 5ã€top:ä¸Šéƒ¨å¯¹é½1åº•éƒ¨å¯¹é½çš„ç¤ºä¾‹&lt;img src=&quot;1.jpg&quot; width=&quot;200&quot; height=&quot;200&quot; align=&quot;top&quot;/&gt;çš„å›¾ç‰‡ æ•ˆæœå¦‚ä¸‹ï¼š å››ã€è®¾ç½®å›¾ç‰‡è¾¹æ¡†å’Œè¾¹è·é€šè¿‡borderå±æ€§å¯ä»¥ç»™å›¾ç‰‡æ·»åŠ è¾¹æ¡†ã€‚å±æ€§çš„å€¼ä¸ºè¾¹æ¡†çš„å®½åº¦ã€‚ 1&lt;img src=&quot;1.jpg&quot; width=&quot;200&quot; height=&quot;200&quot; align=&quot;top&quot; border=&quot;4&quot;/&gt; æ•ˆæœå¦‚ä¸‹ï¼Œå›¾ç‰‡è¢«åŠ ä¸Šäº†é»‘è‰²çš„è¾¹æ¡†ï¼š ä¹Ÿå¯ä»¥ç»™å›¾ç‰‡è®¾ç½®ä¸€ä¸ªé—´è·ï¼Œé—´è·çš„æ•ˆæœå’Œé€æ˜çš„è¾¹æ¡†æ˜¯ä¸€æ ·çš„ã€‚ 1è¿™é‡Œæ˜¯å›¾ç‰‡&lt;img src=&quot;1.png&quot; align=&quot;middle&quot; hspace=&quot;20&quot;&gt;å†…å®¹ å…¶ä¸­ï¼Œhspaceæ˜¯è®¾ç½®æ°´å¹³è¾¹æ¡†çš„å®½åº¦ï¼Œè¿˜æœ‰ä¸€ä¸ªå±æ€§vspaceæ˜¯è®¾ç½®å‚ç›´è¾¹æ¡†çš„å®½åº¦ï¼Œä¸Šé¢ä»£ç æ•ˆæœå¦‚ä¸‹ï¼š äº”ã€æ’å…¥è§†é¢‘çš„ç›¸å…³æ“ä½œæ’å…¥è§†é¢‘çš„åŸç†å’Œå›¾åƒæ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯è·¯å¾„ä½¿ç”¨çš„æ—¶dynsrcï¼Œå¯ä»¥ä½¿ç”¨loopå±æ€§æ¥è®¾ç½®å¾ªç¯æ¬¡æ•°ï¼Œstartå±æ€§æ¥è®¾ç½®æ’­æ”¾æ–¹å¼ï¼Œè¿™é‡Œï¼Œåªå°†startå±æ€§è¯´æ˜ä¸€ä¸‹ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼Œfileopenæ˜¯ç½‘é¡µåŠ è½½å°±å¼€å§‹æ’­æ”¾ï¼Œmouseoveræ˜¯é¼ æ ‡ç§»åŠ¨åˆ°è§†é¢‘ä½ç½®åå¼€å§‹æ’­æ”¾ã€‚ 1&lt;img dynsrc=&quot;2.wmv&quot; start=&quot;fileopen&quot; loop=&quot;1&quot;&gt; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"HTMLå­¦ä¹ ç¬”è®°","slug":"HTMLå­¦ä¹ ç¬”è®°","permalink":"http://huishao.cc/categories/HTMLå­¦ä¹ ç¬”è®°/"}],"tags":[],"keywords":[{"name":"HTMLå­¦ä¹ ç¬”è®°","slug":"HTMLå­¦ä¹ ç¬”è®°","permalink":"http://huishao.cc/categories/HTMLå­¦ä¹ ç¬”è®°/"}]},{"title":"æ ‡ç­¾ä¹‹ç¾ä¸‰â€”â€”è¶…é“¾æ¥çš„åµŒå…¥","slug":"51æ ‡ç­¾ä¹‹ç¾ä¸‰â€”â€”è¶…é“¾æ¥çš„åµŒå…¥","date":"2015-05-09T16:00:00.000Z","updated":"2021-06-25T02:11:41.747Z","comments":true,"path":"2015/05/10/51æ ‡ç­¾ä¹‹ç¾ä¸‰â€”â€”è¶…é“¾æ¥çš„åµŒå…¥/","link":"","permalink":"http://huishao.cc/2015/05/10/51æ ‡ç­¾ä¹‹ç¾ä¸‰â€”â€”è¶…é“¾æ¥çš„åµŒå…¥/","excerpt":"","text":"æ ‡ç­¾ä¹‹ç¾â€”â€”è¶…é“¾æ¥æ ‡ç­¾ä¸€ã€åˆ›å»ºè¶…é“¾æ¥é€šå¸¸çš„è¶…é“¾æ¥æœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯é“¾æ¥åˆ°å¦ä¸€ä¸ªæ–‡ä»¶ï¼Œå¦ä¸€ç§æ˜¯é“¾æ¥åˆ°å½“å‰æ–‡ä»¶çš„æŸä¸ªä½ç½®ã€‚è¿™ä¸¤ç§æ–¹å¼éƒ½æ˜¯é€šè¿‡æ ‡ç­¾æ¥åˆ›å»ºï¼Œå…¶ä¸­hrefå±æ€§ç”¨æ¥æŒ‡å®šé“¾æ¥çš„ç›®æ ‡åœ°å€ã€‚ 1ã€é“¾æ¥åˆ°å½“å‰é¡µé¢æŒ‡å®šä½ç½®è¢«é“¾æ¥çš„åœ°æ–¹éœ€è¦ä½¿ç”¨æ ‡ç­¾çš„nameå±æ€§æ ‡è®°ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234&lt;a href=&quot;#last&quot;&gt;é“¾æ¥åˆ°æœ¬é¡µæœ€å&lt;/a&gt;&lt;!--åˆ›å»ºä¸€ä¸ªè¶…é“¾æ¥--&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;a name=&quot;last&quot;&gt;æœ€å&lt;/a&gt;&lt;!--é“¾æ¥çš„æ ‡è®°å--&gt;&lt;/body&gt; 2ã€é“¾æ¥åˆ°æœ¬åœ°ç›¸å¯¹è·¯å¾„æ–‡ä»¶ç›¸å¯¹è·¯å¾„æ˜¯ä»¥å½“å‰\bæ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„ä¸ºå‚è€ƒçš„ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678&lt;body&gt;&lt;!--åŒçº§é“¾æ¥ï¼šæ‰€é“¾æ¥åˆ°å¾—æ–‡ä»¶ä¸å½“å‰æ–‡ä»¶åœ¨åŒä¸€ç›®å½•ä¸‹ï¼Œç›´æ¥é“¾æ¥æ–‡ä»¶åå³å¯--&gt;&lt;a href=&quot;nwe.html&quot;&gt;åŒçº§é“¾æ¥&lt;/a&gt;&lt;!--ä¸‹çº§é“¾æ¥ï¼šæ‰€é“¾æ¥çš„æ–‡ä»¶åœ¨å½“å‰æ–‡ä»¶æ‰€åœ¨ç›®å½•çš„å­ç›®å½•ä¸‹--&gt;&lt;a href=&quot;thml/new.html&quot;&gt;ä¸‹çº§é“¾æ¥&lt;/a&gt;&lt;!--ä¸Šçº§é“¾æ¥ï¼šæ‰€é“¾æ¥æ–‡ä»¶åœ¨å½“å‰æ–‡ä»¶æ‰€åœ¨çš„ä¸Šçº§ç›®å½•--&gt;&lt;a href=&quot;../new.html&quot;&gt;ä¸Šçº§é“¾æ¥&lt;/a&gt;&lt;/body&gt; 3ã€é“¾æ¥åˆ°ç½‘å€URLè¿™ç§æ–¹å¼é€šå¸¸ä¼šç”¨åœ¨å‹æƒ…é“¾æ¥ä¸­ã€‚ä¾‹å¦‚å¦‚ä¸‹é“¾æ¥åˆ°ç™¾åº¦ï¼š 123&lt;body&gt;&lt;a href=&quot;http://www.baidu.com/&quot;&gt;ç™¾åº¦&lt;/a&gt;&lt;/body&gt; äºŒã€é“¾æ¥çš„æ‰“å¼€æ–¹å¼æ ‡ç­¾ä¸­çš„targetå±æ€§å¯ä»¥è®¾ç½®æ ‡ç­¾çš„æ‰“å¼€æ–¹å¼ï¼Œä¸€å…±æœ‰å››ç§æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯_blank,_parent,_self,_topã€‚ 1ã€_blankæ‰“å¼€æ–¹å¼ä¼šè®©æµè§ˆå™¨åœ¨æ–°çš„çª—å£ä¸­æ‰“å¼€æ ‡ç­¾ã€‚ 2ã€_parentæ‰“å¼€æ–¹å¼åœ¨çˆ¶çª—å£ä¸­æ‰“å¼€ï¼Œå½“å‰é¡µé¢ä¼šè¢«è¦†ç›–ã€‚ 3ã€_selfæ‰“å¼€æ–¹å¼åœ¨å½“å‰çª—å£æ‰“å¼€ï¼Œå½“å‰çª—å£ä¼šè¢«è¦†ç›–ã€‚ 4ã€_topæ‰“å¼€æ–¹å¼åœ¨æœ€ä¸Šå±‚çª—ä½“ä¸­æ‰“å¼€ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"HTMLå­¦ä¹ ç¬”è®°","slug":"HTMLå­¦ä¹ ç¬”è®°","permalink":"http://huishao.cc/categories/HTMLå­¦ä¹ ç¬”è®°/"}],"tags":[],"keywords":[{"name":"HTMLå­¦ä¹ ç¬”è®°","slug":"HTMLå­¦ä¹ ç¬”è®°","permalink":"http://huishao.cc/categories/HTMLå­¦ä¹ ç¬”è®°/"}]},{"title":"æ ‡ç­¾ä¹‹ç¾äºŒâ€”â€”æ–‡æœ¬æ ‡ç­¾","slug":"50æ ‡ç­¾ä¹‹ç¾äºŒâ€”â€”æ–‡æœ¬æ ‡ç­¾","date":"2015-05-07T16:00:00.000Z","updated":"2021-06-24T11:32:33.037Z","comments":true,"path":"2015/05/08/50æ ‡ç­¾ä¹‹ç¾äºŒâ€”â€”æ–‡æœ¬æ ‡ç­¾/","link":"","permalink":"http://huishao.cc/2015/05/08/50æ ‡ç­¾ä¹‹ç¾äºŒâ€”â€”æ–‡æœ¬æ ‡ç­¾/","excerpt":"","text":"æ ‡ç­¾ä¹‹ç¾â€“HTMLæ–‡æœ¬æ ‡ç­¾å±æ€§è¯¦è§£1ã€ä½¿ç”¨æ ‡é¢˜æ ‡ç­¾ æ˜¯æ ‡é¢˜çš„å¼€å§‹å’Œç»“æŸæ ‡ç­¾ï¼Œhtmlæä¾›6çº§æ ‡é¢˜åˆ’åˆ†ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123&lt;body&gt;&lt;!--è®¾ç½®èƒŒæ™¯ä¸ºè“è‰²--&gt;&lt;h1&gt;è¿™æ˜¯ä¸€çº§æ ‡é¢˜&lt;/h1&gt;&lt;h2&gt;è¿™æ˜¯äºŒçº§æ ‡é¢˜&lt;/h&gt;&lt;h6&gt;è¿™æ˜¯å…­çº§æ ‡é¢˜&lt;/h6&gt;&lt;/body&gt; 2ã€ä½¿ç”¨å­—ä½“æ ‡ç­¾ ç”¨äºå®šä¹‰å­—ä½“ï¼Œå…¶ä¸­è¯¦ç»†å±æ€§å¦‚ä¸‹ï¼š å®šä¹‰å­—ä½“å¤§å°ï¼šsize ä¾‹å¦‚è®¾ç½®å…¶ä¸­æ–‡å­—å­—å·ä¸º4ã€‚ è®¾ç½®å­—ä½“ï¼šface å…¶ä¸­å¯ä»¥å¡«å†™å¤šä¸ªå­—ä½“åç§°ï¼Œæµè§ˆå™¨ä¼šæŒ‰é¡ºåºå¯»æ‰¾ã€‚ 3ã€ä½¿ç”¨æ–‡æœ¬å¸ƒå±€æ ‡ç­¾ ç¼©è¿›æ ‡ç­¾ï¼Œå¯ä»¥è®©å†…å®¹å¸ƒå±€æ›´åŠ æ¸…æ™°ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š 1234&lt;body&gt;è¿™æ˜¯æ²¡æœ‰ä½¿ç”¨ç´¢å¼•çš„å†…å®¹&lt;br&gt;&lt;blockquote&gt;è¿™é‡Œä½¿ç”¨äº†æ ‡ç­¾çš„å†…å®¹&lt;/blockquote&gt;&lt;/body&gt; æ‰‹åŠ¨æ ¼å¼åŒ–å¸ƒå±€æ ‡ç­¾è¿™ä¸ªæ ‡ç­¾å¯ä»¥ä¸é€šè¿‡ä»£ç è¿›è¡Œç©ºæ ¼å’Œæ¢è¡Œçš„æ§åˆ¶ï¼Œè€Œæ˜¯ç›´æ¥å°†æ–‡æœ¬ä¸­çš„å¸ƒå±€æ˜¾ç¤ºã€‚æ•ˆæœå¦‚ä¸‹ï¼š 1234&lt;body&gt;&lt;pre&gt;æ‰‹åŠ¨çš„ç©ºæ ¼ ä¸æ¢è¡Œè¿™é‡Œæ˜¯ç¬¬äºŒè¡Œ&lt;/pre&gt;&lt;/body&gt; å†…è”æ ‡ç­¾ï¼Œè¿™ä¸ªæ ‡ç­¾çš„ä½œç”¨æ˜¯å°†å¯¹è±¡å†…è”ä¸æŸäº›å†…å®¹ï¼Œæ¯”å¦‚å°†é¼ æ ‡æ‚¬åœæ—¶å±•ç°çš„å†…å®¹ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123&lt;body&gt;&lt;span title=&quot;çœ‹è¿™é‡Œ&quot;&gt;æ ‡é¢˜&lt;/span&gt;&lt;/body&gt; 4ã€ä½¿ç”¨å­—ä½“å±æ€§æ ‡ç­¾ ä¸ºå­—ä½“åŠ ç²—ï¼š ä½¿ç”¨æ–œä½“ï¼š æ·»åŠ ä¸‹åˆ’çº¿ï¼š æ·»åŠ æ ‡æ³¨ï¼š ä¸ä¸‹åˆ’çº¿å½¢å¼ç›¸åŒ æ·»åŠ åˆ é™¤æ ‡è®°ï¼š ä¸ æ·»åŠ ä¸Šæ ‡ï¼š æ·»åŠ ä¸‹è¡¨ï¼š ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"HTMLå­¦ä¹ ç¬”è®°","slug":"HTMLå­¦ä¹ ç¬”è®°","permalink":"http://huishao.cc/categories/HTMLå­¦ä¹ ç¬”è®°/"}],"tags":[],"keywords":[{"name":"HTMLå­¦ä¹ ç¬”è®°","slug":"HTMLå­¦ä¹ ç¬”è®°","permalink":"http://huishao.cc/categories/HTMLå­¦ä¹ ç¬”è®°/"}]},{"title":"iOSæœ‰å…³å†…å­˜ç®¡ç†çš„äºŒä¸‰äº‹","slug":"49iOSæœ‰å…³å†…å­˜ç®¡ç†çš„äºŒä¸‰äº‹","date":"2015-05-06T16:00:00.000Z","updated":"2021-06-24T11:31:41.336Z","comments":true,"path":"2015/05/07/49iOSæœ‰å…³å†…å­˜ç®¡ç†çš„äºŒä¸‰äº‹/","link":"","permalink":"http://huishao.cc/2015/05/07/49iOSæœ‰å…³å†…å­˜ç®¡ç†çš„äºŒä¸‰äº‹/","excerpt":"","text":"iOSæœ‰å…³å†…å­˜ç®¡ç†çš„äºŒä¸‰äº‹ä¸€ã€å‰å¼•éšç€ç§»åŠ¨è®¾å¤‡çš„å†…å­˜è¶Šæ¥è¶Šå¤§ï¼Œç¨‹åºå‘˜ä¹Ÿå·²ç»åº¦è¿‡äº†ä¸ºäº†é‚£ä¸€ä¸¤Mçš„å†…å­˜åœ¨ç³»ç»Ÿçš„æŠ½ä¸å‰¥èŒ§çš„å¹´ä»£ï¼Œå¯¹äºJAVAçš„å¼€å‘è€…ï¼Œå¯¹å†…å­˜æ›´æ˜¯ä¼¸æ‰‹å³å–ï¼Œå¹¶ä¸”ä»ä¸å…³å¿ƒä»€ä¹ˆæ—¶å€™è¿˜å›å»ã€‚ä½†æ˜¯ï¼Œç¨‹åºçš„æŒæ§åº¦å¯¹ç¨‹åºå‘˜æ¥è¯´æ˜¯è‡³å…³é‡è¦çš„ï¼Œä»»ä½•è¯­è¨€çš„å†…å­˜ç®¡ç†æœºåˆ¶çš„åˆè¡·ä¹Ÿæ˜¯åœ¨æœ‰é™çš„ç©ºé—´é‡Œå®Œæˆæœ€ç²¾è‡´çš„é€»è¾‘ã€‚ äºŒã€Xcodeå·¥ç¨‹è®¾ç½®ARCARCæ˜¯xcode5ä¸­å¼•å…¥çš„è‡ªåŠ¨å¼•ç”¨è®¡æ•°ï¼Œå…¶åŸç†ä¸MRCæ˜¯ä¸€æ ·ï¼Œåªæ˜¯ç³»ç»Ÿå¸®åŠ©æˆ‘ä»¬æ·»åŠ äº†retainå’Œreleaseã€‚ç°åœ¨åœ¨xcodeä¸­æ–°å»ºçš„é¡¹ç›®é»˜è®¤éƒ½æ˜¯ARCçš„ç¯å¢ƒï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®å…¶ä¸ºMRCã€‚ åœ¨BuildSettingsä¸­æœç´¢ARCï¼š å°†ä¸‹é¢çš„å‚æ•°è®¾ç½®ä¸ºNOï¼Œé»˜è®¤æ˜¯YESã€‚ è¿™æ—¶é¡¹ç›®å·¥ç¨‹çš„ç¯å¢ƒå°±å˜æˆäº†MRCã€‚ ä¸‰ã€é¡¹ç›®ä¸­å®ç°MRCå’ŒARCæ··ç¼–ç°å®ä¸­çš„è®¸å¤šæ—§çš„é¡¹ç›®ï¼Œè¿˜æœ‰ä¸€äº›æ¯”è¾ƒè€çš„ç¬¬ä¸‰æ–¹åº“ï¼Œå¯èƒ½éƒ½æ˜¯é‡‡ç”¨MRCç¯å¢ƒç¼–å†™çš„ï¼Œæˆ‘ä»¬åœ¨å¯¹å…¶è¿›è¡Œæ‰©å±•æˆ–è€…åšæ–°é¡¹ç›®çš„å…¼å®¹çš„æ—¶å€™ï¼Œå¯ä»¥åœ¨xcodeä¸­å¯¹å…¶è¿›è¡Œæ··ç¼–ã€‚ é€‰æ‹©ï¼štarget-&gt;build phases-&gt;compile sources å¦‚æœå·¥ç¨‹æ˜¯ARCï¼Œè¦æ··ç¼–MRCçš„æ–‡ä»¶ï¼Œæˆ‘ä»¬é€‰ä¸­compiler flagsï¼Œåé¢è®¾ç½®ä¸º-fno-objc-arc å¦‚æœå·¥ç¨‹æ˜¯MRCï¼Œè¦æ··ç¼–ARCæ–‡ä»¶ï¼Œæˆ‘ä»¬åœ¨åé¢è®¾ç½®-fobjc-arc å››ã€IOSå†…å­˜ç®¡ç†æœºåˆ¶åŸºæœ¬åŸç†æ— è®ºä½ æ˜¯åªæ³¨é‡äºä»£ç é€»è¾‘ï¼Œå°†å†…å­˜äº¤ç»™ARCçš„æ–°æ—¶ä»£ç¨‹åºå‘˜ï¼Œè¿˜æ˜¯ä¾ç„¶å¯¹appleçš„ä¿¡ä»»ä¸è¶³ï¼Œä¾ç„¶äº‹å¿…èº¬äº²çš„MRCå¤æ¿ç¨‹åºå‘˜ï¼Œæˆ‘æƒ³ä½ éƒ½åº”è¯¥äº†è§£IOSä¸­å†…å­˜ç®¡ç†çš„æœºåˆ¶ï¼Œå°½ç®¡ARCæœºåˆ¶å¾ˆæˆç†Ÿä¹Ÿå¾ˆå¯é ï¼Œå¯æ˜¯ä¾ç„¶ä¼šæœ‰å¾ˆå¤šåº”ç”¨å­˜åœ¨å¾ªç¯åº”ç”¨ï¼Œå†…å­˜æ³„éœ²ç­‰é—®é¢˜ï¼Œè¦çŸ¥é“ï¼ŒARCä¸æ˜¯ä¸‡èƒ½çš„ï¼Œå®ƒä»…ä»…åªæ˜¯å¸®ä½ çœå»å†™ä¸€äº›ç¹ççš„ä»£ç ã€‚ é¦–å…ˆï¼Œåœ¨Object-Cä¸­åˆ›å»ºå¯¹è±¡è¿”å›çš„å¹¶ä¸æ˜¯å¯¹è±¡æœ¬èº«ï¼Œè€Œæ˜¯ä¸€ä¸ªæŒ‡é’ˆã€‚æ¯”å¦‚æˆ‘ä»¬ä½¿ç”¨allocç”³è¯·ç©ºé—´ï¼Œä¼šç»å¸¸è¿™æ ·åšï¼š UIImage * image = [[UIImage alloc]init]; è¿™é‡Œï¼Œè°ƒç”¨çš„allocæ—¶ï¼Œç³»ç»Ÿå°†ç»™æˆ‘ä»¬åˆ›å»ºçš„ç±»åˆ†é…ä¸€å—å†…å­˜ç©ºé—´ï¼Œå¹¶è¿”å›ä¸€ä¸ªæŒ‡å‘è¿™ä¸ªç©ºé—´çš„æŒ‡é’ˆã€‚è°ƒç”¨initæ—¶å¯¹å¯¹è±¡è¿›è¡Œåˆå§‹åŒ–ã€‚å¦‚æœæ­¤æ—¶ï¼Œæˆ‘ä»¬å°†imageè¿™ä¸ªæŒ‡é’ˆç½®ä¸ºnilï¼šimage=nil;é‚£æ ·å°†é€ æˆå†…å­˜æ³„éœ²ï¼Œç³»ç»Ÿåˆ†é…ç»™imageçš„ç©ºé—´æ°¸è¿œæ— æ³•å›æ”¶ã€‚æ‰€ä»¥ï¼Œåœ¨æˆ‘ä»¬ä¸éœ€è¦imageè¿™ä¸ªå¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨deallocæ–¹æ³•å°†å…¶äº¤è¿˜ç»™ç³»ç»Ÿï¼š[image dealloc];ç„¶è€Œè¿™é‡Œï¼Œæœ‰å°†äº§ç”Ÿä¸€ä¸ªä¸¥é‡çš„é—®é¢˜ï¼Œå¦‚æœæˆ‘ä»¬æ­¤æ—¶æ‰“å°imageçš„æŒ‡é’ˆï¼Œä¼šå‘ç°å®ƒç°åœ¨æˆäº†ä¸€ä¸ªå±é™©ä¸œè¥¿ï¼Œå› ä¸ºå®ƒæŒ‡å‘çš„ä¸œè¥¿ä¸å­˜åœ¨äº†ï¼Œè€Œå®ƒå´ä¾ç„¶æŒ‡å‘é‚£ä¸ªåœ°æ–¹ï¼Œè¿™ä¾¿æ˜¯å¾ˆå¤šç¨‹åºå‘˜çš„å™©æ¢¦ï¼šé‡æŒ‡é’ˆã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬åº”è¯¥å…»æˆä¸€ä¸ªå¥½ä¹ æƒ¯ï¼Œä¸ç”¨çš„æŒ‡é’ˆç½®ä¸ºnilï¼Œæ‰€æœ‰å¯¹ç©ºæŒ‡é’ˆè¿›è¡Œçš„æ“ä½œéƒ½è¢«è®¤ä¸ºæ˜¯å®‰å…¨çš„ã€‚ é€šè¿‡ä¸Šé¢çš„ç†è§£ï¼Œæˆ‘ä»¬å‘ç°äº†ä¸€ä¸ªéå¸¸éº»çƒ¦çš„åœ°æ–¹ï¼Œæˆ‘ç”³è¯·äº†ä¸€å—å†…å­˜ç©ºé—´ï¼Œå¦‚æœæˆ‘å°†æŒ‡é’ˆç½®ç©ºäº†è€Œæ²¡æœ‰é‡Šæ”¾å¯¹è±¡ï¼Œåˆ™ä¼šå†…å­˜æ³„éœ²ï¼Œå¦‚æœæˆ‘æå‰é‡Šæ”¾äº†å¯¹è±¡ï¼Œåˆå¾ˆå¯èƒ½ä¼šæœ‰é‡æŒ‡é’ˆçš„å‡ºç°ã€‚å¹¶ä¸”å¦‚æœæœ‰å¾ˆå¤šç±»éƒ½å¼•ç”¨äº†è¿™ä¸ªå¯¹è±¡ï¼Œæˆ‘ç”šè‡³çš„ä¸çŸ¥é“æˆ‘åº”è¯¥ä»€ä¹ˆæ—¶å€™é‡Šæ”¾å®ƒã€‚å› æ­¤ï¼ŒObject-Cä¸ºæˆ‘ä»¬å¼•å…¥äº†å¼•ç”¨è®¡æ•°è¿™ç§ç®¡ç†å†…å­˜çš„æ–¹æ³•ï¼Œä»»ä½•å¼•ç”¨è¿™ä¸ªå¯¹è±¡çš„åœ°æ–¹ï¼Œéƒ½åº”è¯¥è®©è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨è®¡æ•°åŠ 1ã€‚åŒæ ·ï¼Œä»»ä½•ä¸å†éœ€è¦è¿™ä¸ªå¯¹è±¡çš„åœ°æ–¹ï¼Œä¹Ÿåº”è¯¥ä½¿å®ƒçš„å¼•ç”¨è®¡æ•°å‡1ï¼Œå¦‚æ­¤ä¸€æ¥ï¼Œå¯¹è±¡å†…å­˜ä¾¿è¢«ç»Ÿä¸€çš„ç®¡ç†äº†èµ·æ¥ã€‚ äº”ã€å†…å­˜ç®¡ç†çš„é»„é‡‘æ³•åˆ™å¼•ç”¨è®¡æ•°å†…å­˜ç®¡ç†çš„æœºåˆ¶æ˜¯å¯¹è±¡çš„è®¡æ•°ï¼Œæ¯ä¸ªå¯¹è±¡è‡³å°‘ä¼šæœ‰ä¸€ä¸ªå¼•ç”¨è€…ï¼Œå¦‚æœæ²¡æœ‰äº†å¼•ç”¨è€…ï¼Œå¯¹è±¡ä¼šè¢«é‡Šæ”¾ã€‚ é»„é‡‘æ³•åˆ™ï¼š 1ã€å½“ä½ ä½¿ç”¨alloc,new,copy,mutableCopyåˆ›å»ºå¯¹è±¡æ—¶ï¼Œä½ æ‰éœ€è¦ç®¡ç†ä»–ä»¬ã€‚ 2ã€ä½ å¯ä»¥ä½¿ç”¨retainç»™ä¸€ä¸ªå¯¹è±¡å¢åŠ å¼•ç”¨è®¡æ•°ã€‚ 3ã€å½“ä½ ä¸å†éœ€è¦ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œä½ å¿…é¡»è°ƒç”¨releaseå‡å°‘å…¶å¼•ç”¨è®¡æ•°ã€‚ 4ã€ä½ ä¸èƒ½é‡Šæ”¾ä¸å±äºä½ çš„å¯¹è±¡çš„æ‰€æœ‰æƒã€‚ ä¸Šé¢å°±æ˜¯é»„é‡‘æ³•åˆ™çš„æ‰€æœ‰å†…å®¹ï¼Œæˆ‘è¯‘çš„å¯èƒ½ä¸åˆ°ä½ï¼Œæ€»ç»“ä¸ºä¸€ç‚¹ï¼Œä¹Ÿæ˜¯è‡³å…³é‡è¦çš„ä¸€ç‚¹å°±æ˜¯ï¼šè°åˆ›å»ºäº†å¯¹è±¡ï¼Œè°é‡Šæ”¾æ‰å¯¹è±¡ã€‚è°å¢åŠ äº†å¼•ç”¨è®¡æ•°ï¼Œè°å°±åœ¨ä¸ç”¨æ—¶å‡å°‘è®¡æ•°ã€‚allocï¼Œnewï¼Œcopyï¼ŒmutableCopyï¼Œretainè¿™äº›æ–¹æ³•ä¼šä½¿å¼•ç”¨è®¡æ•°å¢åŠ ï¼Œreleaseä¼šä½¿å¼•ç”¨è®¡æ•°å‡å°‘ï¼Œå½“è®¡æ•°ä¸º0æ—¶ï¼Œç³»ç»Ÿä¼šè°ƒç”¨deallocé‡Šæ”¾å†…å­˜ã€‚ å…­ã€è‡ªåŠ¨é‡Šæ”¾æ± ä¸ºäº†æ–¹ä¾¿å†…å­˜ç®¡ç†ï¼Œé¿å…æˆ‘ä»¬é¢‘ç¹çš„è°ƒç”¨releaseæ–¹æ³•ï¼ŒObject-Cä¸­è¿˜ä¸ºæˆ‘ä»¬å¼•ç”¨äº†ä¸€ç§æœºåˆ¶ï¼šè‡ªåŠ¨é‡Šæ”¾æ± ã€‚è‡ªåŠ¨é‡Šæ”¾æ± çš„åŸç†å…¶å®åªæ˜¯å»¶æ—¶é‡Šæ”¾ï¼Œå®ƒå¹¶æ²¡æœ‰å¸®æˆ‘ä»¬åšå¤ªå¤šçš„å·¥ä½œã€‚è‡ªåŠ¨é‡Šæ”¾æ± çš„ä½¿ç”¨æ–¹å¼æœ‰ä¸¤ç§ï¼š 1ã€MRCæ—¶ï¼š 123 NSAutoreleasePool * pool = [[NSAutoreleasePool alloc]init];//åˆ›å»ºä¸€ä¸ªè‡ªåŠ¨é‡Šæ”¾æ± ï¼Œç³»ç»Ÿé»˜è®¤ä¼šä¸ºæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ›å»ºè‡ªå·±çš„ã€‚ UIImage * image = [[[UIImage alloc]init] autorelease];//åœ¨æ± å†…åˆ›å»ºä¸€äº›å¯¹è±¡ï¼Œä¼šå’Œæœ€è¿‘çš„è‡ªåŠ¨é‡Šæ”¾æ± åŒ¹é… [pool release];//è¿™æ—¶è‡ªåŠ¨é‡Šæ”¾æ± ä¼šå‘æ± å­ä¸­çš„æ¯ä¸€ä¸ªå¯¹è±¡å‘é€releaseæ¶ˆæ¯ 2ã€ARCæ—¶ï¼š 123 @autoreleasepool &#123; UIImage * image = [[[UIImage alloc]init] autorelease]; &#125; ç–æ¼ä¹‹å¤„ æ¬¢è¿æŒ‡æ­£ å­¦ä¹ ä½¿ç”¨ æ¬¢è¿è½¬è½½ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSå¼€å‘é‡åˆ°çš„å±å¹•ä¸Šä¸‹é—ªå‡ºé»‘è¾¹çš„è§£å†³æ–¹æ³•","slug":"48iOSå¼€å‘é‡åˆ°çš„å±å¹•ä¸Šä¸‹é—ªå‡ºé»‘è¾¹çš„è§£å†³æ–¹æ³•","date":"2015-05-06T16:00:00.000Z","updated":"2021-06-24T11:30:43.274Z","comments":true,"path":"2015/05/07/48iOSå¼€å‘é‡åˆ°çš„å±å¹•ä¸Šä¸‹é—ªå‡ºé»‘è¾¹çš„è§£å†³æ–¹æ³•/","link":"","permalink":"http://huishao.cc/2015/05/07/48iOSå¼€å‘é‡åˆ°çš„å±å¹•ä¸Šä¸‹é—ªå‡ºé»‘è¾¹çš„è§£å†³æ–¹æ³•/","excerpt":"","text":"iOSå¼€å‘é‡åˆ°çš„å±å¹•ä¸Šä¸‹é—ªå‡ºé»‘è¾¹çš„è§£å†³æ–¹æ³•åœ¨IOSå¼€å‘æ—¶ï¼Œä½¿ç”¨çš„æ—¶IOSçš„æ¨¡æ‹Ÿå™¨ï¼Œç¨‹åºä¸­ä»»ä½•æœ‰å…³åæ ‡çš„åœ°æ–¹ä¹Ÿæ˜¯æ ¹æ®å±å¹•è·å–çš„ï¼Œè€Œåœ¨IOS7çš„ç³»ç»Ÿä¸Šè¿è¡Œï¼Œå´å‘ç°å±å¹•å°äº†ä¸€æˆªï¼Œä¸Šä¸‹å„é—ªå‡ºä¸€å—é»‘è‰²åŒºåŸŸã€‚åç»è¿‡æŸ¥æ‰¾åŸå› ï¼Œè§£å†³æ–¹æ³•å¦‚ä¸‹: é¡¹ç›®çš„App Icon and Launch Imagesè®¾ç½®ä¸­ï¼Œæœ¬æ¥æ˜¯è¿™æ ·çš„ï¼š ç‚¹å‡»Use Asset Catalogï¼Œä¹‹åç‚¹å‡»Migrateï¼Œè®¾ç½®ç•Œé¢å¦‚ä¸‹å›¾æ¨¡æ ·ï¼š è¿™æ—¶åœ¨IOS7ä¸Šå°±èƒ½å……æ»¡å±å¹•äº†ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSé€šè¿‡NSUserDefaultså®ç°ç®€å•çš„åº”ç”¨é—´æ•°æ®ä¼ é€’","slug":"46iOSé€šè¿‡NSUserDefaultså®ç°ç®€å•çš„åº”ç”¨é—´æ•°æ®ä¼ é€’","date":"2015-05-05T16:00:00.000Z","updated":"2021-06-24T11:27:18.667Z","comments":true,"path":"2015/05/06/46iOSé€šè¿‡NSUserDefaultså®ç°ç®€å•çš„åº”ç”¨é—´æ•°æ®ä¼ é€’/","link":"","permalink":"http://huishao.cc/2015/05/06/46iOSé€šè¿‡NSUserDefaultså®ç°ç®€å•çš„åº”ç”¨é—´æ•°æ®ä¼ é€’/","excerpt":"","text":"iOSä¸­NSUserDefaultsè¯¦è§£NSUserDefaultsæ˜¯ç”¨äºä¿å­˜åº”ç”¨ç¨‹åºè®¾ç½®ï¼Œåº”ç”¨ä¿¡æ¯ç­‰è½»é‡çº§æ•°æ®çš„çš„ä¸€ä¸ªç±»ï¼Œå…¶æœ¬è´¨æ˜¯å°†æ•°æ®å†™ä¸ºplistæ–‡ä»¶çš„å½¢å¼ä¿å­˜åœ¨æœ¬åœ°ã€‚åœ¨IOSä¸­ï¼Œç³»ç»Ÿä¸ºæ¯ä¸€ä¸ªåº”ç”¨ç¨‹åºéƒ½é»˜è®¤åˆ›å»ºäº†ä¸€ä¸ªNSUserDefaultså¯¹è±¡ã€‚ ä¸€ã€å¸¸ç”¨æ–¹æ³•æ€»ç»“+ (NSUserDefaults *)standardUserDefaults; è·å–ç³»ç»Ÿé»˜è®¤åˆ›å»ºçš„åº”ç”¨ç¨‹åºè®¾ç½®è¡¨ + (void)resetStandardUserDefaults; è¿™ä¸ªæ–¹æ³•ç”¨äºå°†é»˜è®¤çš„UserDefaultsé‡Šæ”¾æ‰ï¼Œå¹¶åœ¨ä¸‹æ¬¡ä½¿ç”¨æ—¶åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè°ƒç”¨è¿™ä¸ªæ–¹æ³•åï¼Œå¯¹åŸUserDefaultså•ä¾‹è¿›è¡Œçš„KVOç›‘å¬å°†å¤±æ•ˆã€‚ - (instancetype)initWithSuiteName:(NSString *)suitename; è¿™ä¸ªæ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°çš„åŸŸï¼šæ ¹æ®åå­—å¯ä»¥åˆ›å»ºä¸€äº›ä¸åŒçš„åŸŸï¼Œåˆ†åˆ«å­˜å‚¨å‡ å¥—è®¾ç½®ä¿¡æ¯ã€‚ - (id)objectForKey:(NSString *)defaultName; - (void)setObject:(id)value forKey:(NSString *)defaultName; - (void)removeObjectForKey:(NSString *)defaultName; ä¸Šé¢ä¸‰ä¸ªæ–¹æ³•æ˜¯å¯¹å¯¹è±¡å­˜å‚¨è¿›è¡Œçš„æ“ä½œï¼Œåˆ†åˆ«æ˜¯å­˜å‚¨ï¼Œè·å–å’Œåˆ é™¤ã€‚ - (NSString )stringForKey:(NSString )defaultName; è·å–å­—ç¬¦ä¸²æ•°æ® - (NSArray )arrayForKey:(NSString )defaultName; è·å–æ•°ç»„æ•°æ® - (NSDictionary )dictionaryForKey:(NSString )defaultName; è·å–å­—å…¸æ•°æ® - (NSData )dataForKey:(NSString )defaultName; è·å–dataæ•°æ® - (NSArray )stringArrayForKey:(NSString )defaultName; è·å–å­—ç¬¦ä¸²æ•°ç»„æ•°æ® - (NSInteger)integerForKey:(NSString *)defaultName; è·å–æ•´å‹æ•°æ® - (float)floatForKey:(NSString *)defaultName; è·å–æµ®ç‚¹å‹æ•°æ® - (double)doubleForKey:(NSString *)defaultName; è·å–åŒç²¾åº¦æµ®ç‚¹å‹æ•°æ® - (BOOL)boolForKey:(NSString *)defaultName; è·å–å¸ƒå°”è¯—å¥ - (NSURL )URLForKey:(NSString )defaultName; è·å–ç½‘å€æ•°æ® ä¸‹é¢æ˜¯ä¸€äº›å¯¹åº”çš„setæ–¹æ³• - (void)setInteger:(NSInteger)value forKey:(NSString *)defaultName; - (void)setFloat:(float)value forKey:(NSString *)defaultName; - (void)setDouble:(double)value forKey:(NSString *)defaultName; - (void)setBool:(BOOL)value forKey:(NSString *)defaultName; - (void)setURL:(NSURL )url forKey:(NSString )defaultName; - (void)registerDefaults:(NSDictionary *)registrationDictionary; è¿™ä¸ªæ–¹æ³•å¯ä»¥é€šè¿‡å­—å…¸å¯¹æ•°æ®è¡¨è¿›è¡Œèµ‹å€¼ - (void)addSuiteNamed:(NSString *)suiteName; æ·»åŠ ä¸€ä¸ªåŸŸ - (void)removeSuiteNamed:(NSString *)suiteName; ç§»é™¤ä¸€ä¸ªåŸŸ - (NSDictionary *)dictionaryRepresentation; è¿”å›ç³»ç»Ÿè®¾ç½®çš„ä¿¡æ¯ï¼Œä¹Ÿæ˜¯NSGlobalDomainåŸŸä¸­çš„ä¿¡æ¯ã€‚ @property (readonly, copy) NSArray *volatileDomainNames; è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­æ˜¯æ‰€æœ‰ä¸ç¨³å®šåŸŸçš„åå­— - (NSDictionary )volatileDomainForName:(NSString )domainName; æ ¹æ®åå­—è·å–ä¸ç¨³å®šåŸŸä¸­çš„æ•°æ® - (void)setVolatileDomain:(NSDictionary )domain forName:(NSString )domainName; æ ¹æ®åå­—è®¾ç½®ä¸ç¨³å®šåŸŸ - (void)removeVolatileDomainForName:(NSString *)domainName; æ ¹æ®åå­—ç§»é™¤ä¸ç¨³å®šåŸŸ - (NSDictionary )persistentDomainForName:(NSString )domainName; æ ¹æ®åå­—è·å–ç¨³å®šåŸŸçš„æ•°æ® - (void)setPersistentDomain:(NSDictionary )domain forName:(NSString )domainName; æ ¹æ®åå­—è®¾ç½®ç¨³å®šåŸŸ - (void)removePersistentDomainForName:(NSString *)domainName; æ ¹æ®åå­—ç§»é™¤ç¨³å®šåŸŸ - (BOOL)synchronize; å¯¹è±¡çš„åŒæ­¥æ–¹æ³•ï¼Œå°†å†…å­˜ä¸­çš„æ•°æ®å†™å…¥ç£ç›˜ã€‚ - (BOOL)objectIsForcedForKey:(NSString *)key; åˆ¤æ–­æŸä¸ªé”®å€¼çš„æ•°æ®æ˜¯å¦å­˜åœ¨ - (BOOL)objectIsForcedForKey:(NSString )key inDomain:(NSString )domain; åˆ¤æ–­æŸä¸ªåŸŸä¸­æŸä¸ªé”®å€¼çš„æ•°æ®æ˜¯å¦å­˜åœ¨ æ³¨ï¼šç›®å‰çš„iOSç‰ˆæœ¬å·²ç»ä¸èƒ½é€šè¿‡ä¸‹é¢çš„æ–¹æ³•åœ¨åº”ç”¨é—´è¿›è¡Œä¼ å€¼ï¼ï¼ï¼ äºŒã€ä¸‰ä¸ªç‰¹æ®Šçš„åŸŸåŠå®ç°ç®€å•çš„åº”ç”¨é—´ä¿¡æ¯ä¼ é€’æˆ‘ä»¬åº”è¯¥äº†è§£åˆ°ï¼Œåœ¨IOSä¸­ï¼Œå› ä¸ºæ²™ç›’æ¨¡å¼çš„å­˜åœ¨ï¼Œåº”ç”¨é—´æ˜¯ä¸å…è®¸äº’ç›¸è®¿é—®æ•°æ®ä¸ä¼ å€¼é€šä¿¡çš„ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¾è€Œæ˜“è§ï¼š 1ã€ä¿è¯äº†æ•°æ®çš„å®‰å…¨æ€§ 2ã€æ•°æ®çš„ç®¡ç†æ›´åŠ ç®€æ´ 3ã€å½“æˆ‘ä»¬åˆ é™¤æ•°æ®æ—¶ï¼Œåªéœ€è¦å°†æ²™ç›’åˆ é™¤ã€‚ åœ¨æŸäº›éœ€æ±‚ä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šéœ€è¦åº”ç”¨ç¨‹åºé—´çš„ä¼ å€¼ä¸é€šä¿¡ï¼Œå½“ç„¶é™¤äº†é€šè¿‡ç½‘ç»œå¤–ï¼Œå¯¹äºéå¸¸å°çš„æ•°æ®é‡ï¼Œæ¯”å¦‚éªŒè¯å¦ä¸€åº”ç”¨ä»ç¨‹åºæ˜¯å¦ç™»å½•ï¼Œæ˜¯å¦å®‰è£…å¹¶ä¸”å¼€å¯è¿‡ä¸€æ¬¡ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡NSUserDefaultsçš„ä¸€ä¸ªå…¨å±€çš„æ•°æ®è¡¨æ¥å®ç°ã€‚ NSUserDefaultsçš„ä¸‰ä¸ªç‰¹æ®Šçš„ç³»ç»ŸåŸŸå¦‚ä¸‹ï¼š NSString * const NSGlobalDomain; è¿™ä¸ªæ˜¯ä¸€ä¸ªç³»ç»Ÿçº§åˆ«çš„å…¨å±€çš„åŸŸï¼Œå­˜å‚¨è¿™ç³»ç»Ÿé…ç½®ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å®ƒå®ç°åº”ç”¨ç¨‹åºé—´ä¼ å€¼ NSString * const NSArgumentDomain; è¿™ä¸ªæ˜¯åœ¨æœ¬åº”ç”¨ç¨‹åºå†…å¯è®¿é—®çš„åŸŸï¼Œå­˜å‚¨ç€åº”ç”¨ç¨‹åºçš„ä¿¡æ¯ NSString * const NSRegistrationDomain; è¿™ä¸ªæ˜¯å­˜æ”¾ä¸´æ—¶æ•°æ®çš„åŸŸ ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š é¦–å…ˆåœ¨ç¬¬ä¸€ä¸ªå·¥ç¨‹ä¸­ï¼Œæˆ‘ä»¬å†™å¦‚ä¸‹ä»£ç è¿è¿è¡Œä¸€ä¸‹ï¼š 123456789 //è·å–å…¨å±€çš„åŸŸ NSDictionary * dic = [[NSUserDefaults standardUserDefaults]persistentDomainForName:NSGlobalDomain]; NSMutableDictionary * temDic = [NSMutableDictionary dictionaryWithDictionary:dic]; [temDic setObject:@&quot;ä¼ é€’çš„å€¼&quot; forKey:@&quot;åº”ç”¨1&quot;]; //é‡è®¾ [[NSUserDefaults standardUserDefaults]setPersistentDomain:temDic forName:NSGlobalDomain]; //åŒæ­¥ [NSUserDefaults resetStandardUserDefaults]; NSLog(@&quot;%@&quot;,dic); æ‰“å°çš„ç»“æœæ˜¯è®¸å¤šç³»ç»Ÿä¿¡æ¯ã€‚ åœ¨ç¬¬äºŒä¸ªå·¥ç¨‹ä¸­ï¼Œæˆ‘ä»¬è¿™æ ·åšï¼š 12 NSDictionary * dic = [[NSUserDefaults standardUserDefaults]persistentDomainForName:NSGlobalDomain]; NSLog(@&quot;%@\\n--------------\\n%@=%@&quot;,dic,@&quot;åº”ç”¨1&quot;,[dic objectForKey:@&quot;åº”ç”¨1&quot;]); ç»“æœå¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657582015-05-06 15:48:49.897 321[4100:186745] &#123; AppleITunesStoreItemKinds = ( newsstand, podcast, &quot;itunes-u&quot;, artist, booklet, document, eBook, software, &quot;software-update&quot;, &quot;podcast-episode&quot; ); AppleLanguages = ( en, fr, de, &quot;zh-Hans&quot;, &quot;zh-Hant&quot;, ja, nl, it, es, &quot;es-MX&quot;, ko, pt, &quot;pt-PT&quot;, da, fi, nb, sv, ru, pl, tr, uk, ar, hr, cs, el, he, ro, sk, th, id, ms, &quot;en-GB&quot;, &quot;en-AU&quot;, ca, hu, vi, hi ); AppleLocale = &quot;en_US&quot;; MSVLoggingMasterSwitchEnabledKey = 0; &quot;\\U5e94\\U75281&quot; = &quot;\\U4f20\\U9012\\U7684\\U503c&quot;;&#125;--------------åº”ç”¨1=ä¼ é€’çš„å€¼ è¿™æ ·ï¼Œæˆ‘ä»¬å°±ç®€å•å®ç°äº†åº”ç”¨ç¨‹åºé—´çš„ä¼ å€¼ï¼Œä½†æ˜¯å»ºè®®æœ€å¥½ä¸è¦è½»æ˜“æ“ä½œç³»ç»Ÿçš„è¿™ä¸ªåŸŸã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"æ ‡ç­¾ä¹‹ç¾ä¸€â€”â€”HTMLåŸºç¡€å…ƒç´ ","slug":"47æ ‡ç­¾ä¹‹ç¾ä¸€â€”â€”HTMLåŸºç¡€å…ƒç´ ","date":"2015-05-05T16:00:00.000Z","updated":"2021-06-24T11:29:30.670Z","comments":true,"path":"2015/05/06/47æ ‡ç­¾ä¹‹ç¾ä¸€â€”â€”HTMLåŸºç¡€å…ƒç´ /","link":"","permalink":"http://huishao.cc/2015/05/06/47æ ‡ç­¾ä¹‹ç¾ä¸€â€”â€”HTMLåŸºç¡€å…ƒç´ /","excerpt":"","text":"æ ‡ç­¾ä¹‹ç¾â€“HTMLåŸºç¡€æ ‡ç­¾ä½¿ç”¨æ€»ç»“HTMLæ˜¯ä¸€ç§æ ‡è®°è¯­è¨€ï¼Œå› æ­¤ï¼Œæ ‡ç­¾ä¾¿æ˜¯HTMLçš„æ ¸å¿ƒï¼Œä¸€äº›åŸºç¡€æ ‡ç­¾çš„ç”¨æ³•æ€»ç»“å¦‚ä¸‹ï¼š 1ã€ ä»»ä½•HTMLæ–‡ä»¶éƒ½ä¼šæœ‰è¿™æ ·ä¸€ä¸ªæ ‡ç­¾ï¼Œæ ‡è®°ç½‘é¡µçš„å¼€å§‹å’Œç»“æŸã€‚ 2ã€ å¤´éƒ¨æ ‡ç­¾ä¸­å¯ä»¥åŒ…å«è®¸å¤šç½‘é¡µçš„å¤´ä¿¡æ¯ã€‚ 3ã€ è¿™ä¸ªæ ‡ç­¾åŒ…å«åœ¨å¤´éƒ¨æ ‡ç­¾å†…ï¼Œå…¶å†…å®¹å°±æ˜¯ç½‘é¡µæ˜¾ç¤ºçš„æ ‡é¢˜ï¼Œæ¯”å¦‚ï¼š 12345&lt;html&gt;&lt;head&gt;&lt;title&gt;æˆ‘çš„HTMLç½‘é¡µ&lt;/title&gt;&lt;/head&gt;&lt;/html&gt; ç»“æœå¦‚ä¸‹ï¼š 4ã€ è¿™æ˜¯ä¸€ä¸ªè®¾ç½®æ ‡ç­¾ï¼Œä¹Ÿå«å…ƒä¿¡æ¯æ ‡ç­¾ï¼Œç”¨äºè®°å½•å’Œè®¾ç½®ç½‘é¡µçš„ä¸€äº›å±æ€§ã€‚ å…¶ä¸­ï¼šnameå±æ€§å¯ä»¥ç”¨æ¥è®¾ç½®å…³é”®å­—ï¼Œç®€è¦å†…å®¹ï¼Œç½‘é¡µç”Ÿæˆå·¥å…·åŠç½‘é¡µçš„åˆ¶ä½œè€…å’Œç½‘é¡µé“¾æ¥æŸ¥è¯¢æƒé™ï¼Œåˆ†åˆ«å¯¹åº”çš„å­—æ®µä¸ºï¼šKeywordsã€Descriptionã€Generatorã€Authorã€Robotsã€‚ æ¯ä¸€ä¸ªnameçš„å±æ€§ï¼Œåé¢éƒ½è¦ç”¨contectè¿›è¡Œè§£é‡Šã€‚å¯¹äºRobotså±æ€§ï¼Œcontectæƒé™çš„è¯´æ˜å¦‚ä¸‹ï¼š all:æ–‡ä»¶å’Œé“¾æ¥éƒ½å¯ä»¥è¢«æ£€ç´¢ none:éƒ½ä¸å¯ä»¥è¢«æ£€ç´¢ index:æ–‡ä»¶è¢«æ£€ç´¢ follow:é¡µé¢ä¸Šçš„é“¾æ¥è¢«æ£€ç´¢ noindexï¼šæ–‡ä»¶ä¸è¢«æ£€ç´¢ï¼Œé“¾æ¥å¯ä»¥è¢«æŸ¥è¯¢ æ ‡ç­¾çš„å¦ä¸€ä¸ªå±æ€§å€¼ä¸ºhttp-equivï¼Œå®ƒå°†å‘Šè¯‰æµè§ˆå™¨ä¸€äº›é‡è¦çš„ä¿¡æ¯ï¼Œä¾‹å¦‚ç¼–ç ä¿¡æ¯ï¼š 1&lt;meta charset=&quot;UTF-8&quot;&gt;&lt;!--å‘Šè¯‰æµè§ˆå™¨ç¼–ç æ ¼å¼--&gt; å®šæ—¶è·³è½¬ç½‘é¡µï¼š 1&lt;meta http-equiv=&quot;Refresh&quot; content=&quot;5;url=http://www.baidu.com&quot;&gt;&lt;!--5Såå°†è·³è½¬åˆ°ç™¾åº¦ç½‘é¡µ--&gt; 5ã€ é¡¾åæ€ä¹‰ï¼Œç½‘é¡µçš„ä¸»ä½“å†…å®¹å†™åœ¨è¿™ä¸ªæ ‡ç­¾é‡Œã€‚ ä¸‹é¢è¿™äº›æ ‡ç­¾éƒ½æ˜¯åœ¨æ ‡ç­¾ä¸‹çš„ï¼š 6ã€ æ®µè½æ ‡ç­¾ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789&lt;html&gt;&lt;head&gt;&lt;title&gt;æˆ‘çš„HTMLç½‘é¡µ&lt;/title&gt;&lt;meta charset=&quot;UTF-8&quot;&gt;&lt;/head&gt;&lt;body&gt;&lt;p&gt;è¿™æ˜¯ç¬¬ä¸€æ®µ&lt;/p&gt;&lt;p&gt;è¿™æ˜¯ç¬¬äºŒæ®µ&lt;/p&gt;&lt;/body&gt;&lt;/html&gt; 7ã€ æ¢è¡Œæ ‡ç­¾ï¼Œå¦‚ä¸‹ï¼š 123&lt;body&gt;è¿™æ˜¯ç¬¬ä¸€è¡Œ&lt;br&gt;è¿™æ˜¯ç¬¬äºŒè¡Œ&lt;/body&gt; 8ã€ æ°´å¹³åˆ†å‰²çº¿ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789&lt;body&gt;è¿™æ˜¯ç¬¬ä¸€è¡Œ&lt;hr&gt;è¿™æ˜¯ç¬¬äºŒè¡Œ&lt;hr size=&quot;12&quot;&gt;&lt;!--è®¾ç½®åˆ†å‰²çº¿å®½åº¦--&gt;è¿™æ˜¯ç¬¬ä¸‰è¡Œ&lt;hr width=&quot;200&quot;&gt;&lt;!--è®¾ç½®åˆ†å‰²çº¿çš„é•¿åº¦--&gt;è¿™æ˜¯ç¬¬å››è¡Œ&lt;hr width=&quot;100&quot; align=&quot;left&quot;&gt;&lt;!--è®¾ç½®å±…å·¦--&gt;&lt;/body&gt; åœ¨è®¾ç½®åˆ†å‰²çº¿çš„é¢œè‰²ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæŠŠHTMLä¸­é¢œè‰²å¯¹åº”çš„ä»£ç æ€»ç»“å¦‚ä¸‹ï¼š 123456789&lt;body&gt;è¿™æ˜¯ç¬¬ä¸€è¡Œ&lt;hr color=&quot;#0C2DEC&quot;&gt;è¿™æ˜¯ç¬¬äºŒè¡Œ&lt;hr size=&quot;12&quot; color=&quot;#FF0000&quot;&gt;&lt;!--è®¾ç½®é¢œè‰²--&gt;è¿™æ˜¯ç¬¬ä¸‰è¡Œ&lt;hr width=&quot;200&quot; color=&quot;#730C0D&quot;&gt;è¿™æ˜¯ç¬¬å››è¡Œ&lt;hr width=&quot;100&quot; align=&quot;left&quot; color=&quot;#158C4F&quot;&gt;&lt;/body&gt; å–æ¶ˆåˆ†å‰²çº¿é˜´å½±ï¼š 123456&lt;body&gt;è¿™æ˜¯ç¬¬ä¸€è¡Œ&lt;hr size=&quot;12&quot;&gt;&lt;!--è®¾ç½®åˆ†å‰²çº¿å®½åº¦--&gt;è¿™æ˜¯ç¬¬äºŒè¡Œ&lt;hr size=&quot;16&quot; noshade&gt;&lt;!--å–æ¶ˆåˆ†å‰²çº¿é˜´å½±--&gt;&lt;/body&gt; 9ã€ æ³¨é‡Šæ ‡ç­¾ï¼Œä»»ä½•ç¼–ç¨‹è¯­è¨€éƒ½ä¼šæœ‰æ³¨é‡Šè¯­å¥ï¼Œè¿™ä¸ªå°±æ— éœ€å¤šè¯´äº†ã€‚å½¢å¼å¦‚ä¸‹ï¼š 10ã€è®¾ç½®ç½‘é¡µèƒŒæ™¯è‰² æ ‡ç­¾ä¸­æœ‰ä¸€ä¸ªå±æ€§ï¼Œå¯ä»¥ç”¨æ¥è®¾ç½®ç½‘é¡µçš„èƒŒæ™¯é¢œè‰²ï¼šbgcolor 123456&lt;body bgcolor=&quot;#002BF8&quot;&gt;&lt;!--è®¾ç½®èƒŒæ™¯ä¸ºè“è‰²--&gt;è¿™æ˜¯ç¬¬ä¸€è¡Œ&lt;hr size=&quot;12&quot;&gt;&lt;!--è®¾ç½®åˆ†å‰²çº¿å®½åº¦--&gt;è¿™æ˜¯ç¬¬äºŒè¡Œ&lt;hr size=&quot;16&quot; noshade&gt;&lt;!--å–æ¶ˆåˆ†å‰²çº¿é˜´å½±--&gt;&lt;/body&gt; ç–æ¼ä¹‹å¤„ æ¬¢è¿æŒ‡æ­£ å­¦ä¹ ä½¿ç”¨ æ¬¢è¿è½¬è½½ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"HTMLå­¦ä¹ ç¬”è®°","slug":"HTMLå­¦ä¹ ç¬”è®°","permalink":"http://huishao.cc/categories/HTMLå­¦ä¹ ç¬”è®°/"}],"tags":[],"keywords":[{"name":"HTMLå­¦ä¹ ç¬”è®°","slug":"HTMLå­¦ä¹ ç¬”è®°","permalink":"http://huishao.cc/categories/HTMLå­¦ä¹ ç¬”è®°/"}]},{"title":"iOSä¸­KVCä¸KVOçš„åº”ç”¨è§£æ","slug":"45iOSä¸­KVCä¸KVOçš„åº”ç”¨è§£æ","date":"2015-05-04T16:00:00.000Z","updated":"2021-06-24T11:26:23.274Z","comments":true,"path":"2015/05/05/45iOSä¸­KVCä¸KVOçš„åº”ç”¨è§£æ/","link":"","permalink":"http://huishao.cc/2015/05/05/45iOSä¸­KVCä¸KVOçš„åº”ç”¨è§£æ/","excerpt":"","text":"iOSä¸­KVCä¸KVOçš„åº”ç”¨è§£æä¸€ã€NSKeyValueCodingï¼ˆKVCï¼‰1ã€ä»ä¸€ä¸ªå°ä¾‹å­å¼•å…¥KVCé”®å€¼ç¼–ç æ˜¯Object-Cä¸ºæˆ‘ä»¬æä¾›çš„ä¸€ç§å¯¹æˆå‘˜å˜é‡èµ‹å€¼çš„æ–¹æ³•ã€‚åœ¨æ¢è®¨å…¶æ–¹æ³•ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªå°ä¾‹å­ï¼š é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªæ•°æ®æ¨¡å‹modelç±»ï¼š 12345678//.hæ–‡ä»¶#import &lt;Foundation/Foundation.h&gt;@interface Model : NSObject&#123; @public//å°†æˆå‘˜å˜é‡è®¾ç½®ä¸ºå…¬æœ‰çš„ ä»¥ä¾¿å…¶ä»–æ–‡ä»¶æœ‰è®¿é—®æƒé™ NSString * str;&#125;@end æˆ‘ä»¬åœ¨å…¶ä»–æ–‡ä»¶ä¸­æœ‰ä¸¤ç§æ–¹æ³•strè¿›è¡Œèµ‹å€¼å’Œå–å€¼ï¼š 12345 Model * model = [[Model alloc]init]; model-&gt;str=@&quot;312&quot;;//æ™®é€šæ–¹æ³•èµ‹å€¼ [model setValue:@&quot;321&quot; forKey:@&quot;str&quot;];//kvcèµ‹å€¼ NSLog(@&quot;%@&quot;,model-&gt;str);//æ™®é€šæ–¹æ³•å–å€¼ NSLog(@&quot;%@&quot;,[model valueForKey:@&quot;str&quot;]);//kvcå–å€¼ åŒæ ·çš„ï¼Œå¯¹äºç”¨@propertyå£°æ˜çš„å˜é‡ï¼Œä½¿ç”¨kvcçš„æ•ˆæœå’Œä½¿ç”¨ç‚¹è¯­æ³•ï¼Œsetterï¼Œgetteræ–¹æ³•çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚ 2ã€KVCæœ‰å…³å‡½æ•°æ–¹æ³•è¯¦è§£é€šè¿‡ä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥ç®€å•äº†è§£KVCæ˜¯å¹²ä»€ä¹ˆçš„äº†ï¼Œä¸‹é¢æ˜¯ä¸€äº›å¸¸ç”¨æ–¹æ³•ã€‚ + (BOOL)accessInstanceVariablesDirectly; è¿™ä¸ªæ–¹æ³•ç±»ä¼¼ä¸€ä¸ªå¼€å…³ï¼Œé»˜è®¤è¿”å›ä¸ºYESï¼Œè¡¨ç¤ºæ”¯æŒKVCæ–¹å¼èµ‹å€¼ï¼Œä¹Ÿå¯ä»¥åœ¨å­ç±»ä¸­å°†å…¶é‡å†™ï¼Œå¦‚æœè¿”å›ä¸ºNOï¼Œåˆ™å†è¿›è¡ŒKVCä¼šæŠ›å‡ºå¼‚å¸¸ã€‚ - (id)valueForKey:(NSString *)key; é€šè¿‡é”®å–å€¼ - (void)setValue:(id)value forKey:(NSString *)key; é€šè¿‡å­—ç¬¦ä¸²é”®ç»™æˆå‘˜å˜é‡èµ‹å€¼ - (BOOL)validateValue:(inout id )ioValue forKey:(NSString )inKey error:(out NSError **)outError; ç³»ç»Ÿé»˜è®¤å®ç°çš„æ–¹æ³•ï¼ŒéªŒè¯ä¸€ä¸ªé”®å€¼æ˜¯å¦æœ‰æ•ˆ - (NSMutableArray )mutableArrayValueForKey:(NSString )key; å°†å–åˆ°çš„å€¼æ”¾å…¥ä¸€ä¸ªå¯å˜æ•°ç»„ä¸­ - (NSMutableOrderedSet )mutableOrderedSetValueForKey:(NSString )key NS_AVAILABLE(10_7, 5_0); å°†å–åˆ°çš„å€¼æ”¾å…¥å¯å˜çš„æœ‰åºé›†åˆä¸­ - (NSMutableSet )mutableSetValueForKey:(NSString )key; å°†å–åˆ°çš„å€¼æ”¾å…¥å¯å˜çš„é›†åˆä¸­ - (id)valueForKeyPath:(NSString )keyPath;- (void)setValue:(id)value forKeyPath:(NSString )keyPath; ä¸Šé¢è¿™ä¸¤ä¸ªæ–¹æ³•åˆ†åˆ«æ˜¯é€šè¿‡è·¯å¾„èµ‹å€¼ä¸å–å€¼ï¼Œæ•°æ®ç»“æ„ç±»ä¼¼åœ°å›¾ï¼Œæ¯”å¦‚åœ¨modelç±»ä¸­æœ‰ä¸€ä¸ªæˆå‘˜å˜é‡model2ï¼Œåœ¨Model2ç±»ä¸­æœ‰ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¦‚ä¸‹çš„æ–¹å¼èµ‹å€¼å–å€¼ 123456789101112131415161718192021//Model.h#import &quot;Model2.h&quot;@interface Model : NSObject&#123; @public NSString * str; Model2 * model2;&#125;//Model2.h@interface Model2 : NSObject&#123;@public NSString * str2;&#125;@end//å…¶ä»–æ–‡ä»¶ Model * model = [[Model alloc]init]; Model2 * model2 = [[Model2 alloc]init]; model-&gt;model2=model2; [model setValue:@&quot;123&quot; forKeyPath:@&quot;model2.str2&quot;]; NSLog(@&quot;%@&quot;,[model valueForKeyPath:@&quot;model2.str2&quot;]); - (NSMutableArray )mutableArrayValueForKeyPath:(NSString )keyPath;- (NSMutableOrderedSet )mutableOrderedSetValueForKeyPath:(NSString )keyPath NS_AVAILABLE(10_7, 5_0);- (NSMutableSet )mutableSetValueForKeyPath:(NSString )keyPath; ä¸Šé¢ä¸‰ä¸ªæ–¹æ³•ä¸å‰é¢ç±»ä¼¼ï¼Œåªæ˜¯æ˜¯ä»è·¯å¾„å–å€¼çš„ã€‚ - (id)valueForUndefinedKey:(NSString *)key; è¿™ä¸ªæ–¹æ³•å¯ä»¥è·å–æ²¡æœ‰æå‰å®šä¹‰çš„æˆå‘˜å˜é‡çš„å€¼ï¼Œæ¯”å¦‚è¿è¡Œæ—¶åˆ›å»ºçš„ï¼Œä¸‹é¢è¿™ä¸ªæ–¹æ³•æ˜¯ç»™æœªå®šä¹‰çš„æˆå‘˜å˜é‡èµ‹å€¼ - (void)setValue:(id)value forUndefinedKey:(NSString *)key; æ³¨æ„ï¼šè¿™ä¸¤ä¸ªæ–¹æ³•é»˜è®¤çš„å®ç°ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œå­ç±»å¿…é¡»é‡å†™æ‰èƒ½ä½¿ç”¨ã€‚ - (void)setNilValueForKey:(NSString *)key; å°†æˆå‘˜å˜é‡ç½®ä¸ºnil - (NSDictionary )dictionaryWithValuesForKeys:(NSArray )keys; æ ¹æ®é”®å€¼è·å–é”®å€¼å¯¹å­—å…¸ - (void)setValuesForKeysWithDictionary:(NSDictionary *)keyedValues; é€šè¿‡å­—å…¸å¯¹æˆå‘˜å˜é‡åŒæ„èµ‹å€¼ï¼Œç»å¸¸ä½¿ç”¨ äºŒã€NSKeyValueObservingCustomizationï¼ˆKVOï¼‰KVOæ˜¯ä¸€ç§æ¶ˆæ¯ç›‘å¬æœºåˆ¶ï¼Œå¯ä»¥åœ¨æŸä¸ªé‡å‘ç”Ÿå˜åŒ–çš„æ—¶å€™å°†æ¶ˆæ¯ä¼ é€ç»™ç›‘å¬è€…ï¼Œå› æ­¤å¹¿æ³›ç”¨äºä¼ å€¼ï¼Œç•Œé¢ä½è€¦åˆç­‰é€»è¾‘ä¸­ã€‚KVOæœºåˆ¶çš„æ ¸å¿ƒæ˜¯ä»¥ä¸‹ä¸‰ä¸ªæ–¹æ³•ï¼š - (void)addObserver:(NSObject )observer forKeyPath:(NSString )keyPath options:(NSKeyValueObservingOptions)options context:(void *)context; ä½¿ç”¨è¿™ä¸ªæ–¹æ³•æ³¨å†Œä¸€ä¸ªç›‘å¬è€…ï¼Œå‚æ•°è§£é‡Šå¦‚ä¸‹ï¼š observerï¼šç›‘å¬è€…å¯¹è±¡ keyPathï¼šç›‘å¬çš„å‚æ•° optionsï¼šç›‘å¬é€‰é¡¹ contextï¼šå‚æ•°ä¼ é€’ ç›‘å¬çš„é€‰é¡¹æšä¸¾å¦‚ä¸‹ï¼š 12345678typedef NS_OPTIONS(NSUInteger, NSKeyValueObservingOptions) &#123; NSKeyValueObservingOptionNew = 0x01,//å›è°ƒçš„å­—å…¸ä¸­å­˜æ”¾æ–°å€¼ NSKeyValueObservingOptionOld = 0x02,//å›è°ƒçš„å­—å…¸ä¸­å­˜æ”¾æ—§å€¼ NSKeyValueObservingOptionInitial ,//å€¼æ”¹å˜å‰è¿›è¡Œå›è°ƒ NSKeyValueObservingOptionPrior//æ”¹å˜å‰åéƒ½è¿›è¡Œå›è°ƒ&#125;;//å›è°ƒå­—å…¸åé¢ä¼šè§£é‡Š - (void)removeObserver:(NSObject )observer forKeyPath:(NSString )keyPath context:(void )context ;- (void)removeObserver:(NSObject )observer forKeyPath:(NSString *)keyPath; è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½æ˜¯ç”¨æ¥ç§»é™¤ç›‘å¬è€… - (void)observeValueForKeyPath:(NSString )keyPath ofObject:(id)object change:(NSDictionary )change context:(void *)context; è¿™ä¸ªæ–¹æ³•æ˜¯ç›‘å¬å¯¹è±¡æ•°æ®æ”¹å˜æ—¶å›è°ƒçš„æ–¹æ³•ï¼Œchangeæ˜¯ä¸€ä¸ªå­—å…¸ï¼Œå­—å…¸ä¸­æ ¹æ®ç›‘å¬çš„é€‰é¡¹ä¸åŒï¼Œå­˜æ”¾ä¸åŒçš„å€¼ï¼ˆæ–°æˆ–è€…æ—§ï¼‰ã€‚contextæ˜¯ä¼ é€’çš„å‚æ•°ã€‚ ä»£ç ç¤ºä¾‹ï¼š 123456789101112131415161718- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view, typically from a nib. model = [[Model alloc]init]; //æ·»åŠ ç›‘å¬è€… [model addObserver:self forKeyPath:@&quot;str&quot; options:NSKeyValueObservingOptionNew context:@&quot;321&quot;]; [model setValue:@&quot;qw&quot; forKey:@&quot;str&quot;];&#125;- (void)didReceiveMemoryWarning &#123; [super didReceiveMemoryWarning]; // Dispose of any resources that can be recreated.&#125;-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context&#123; if ([keyPath isEqualToString:@&quot;str&quot;]) &#123; NSLog(@&quot;%@&quot;,context); &#125;&#125; å­¦ä¹ ä½¿ç”¨ æ¬¢è¿è½¬è½½ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"Objective-Cä¸­ç¼–å†™çœç•¥å‚æ•°çš„å¤šå‚å‡½æ•°","slug":"43Objective-Cä¸­ç¼–å†™çœç•¥å‚æ•°çš„å¤šå‚å‡½æ•°","date":"2015-05-03T16:00:00.000Z","updated":"2021-06-24T11:22:42.493Z","comments":true,"path":"2015/05/04/43Objective-Cä¸­ç¼–å†™çœç•¥å‚æ•°çš„å¤šå‚å‡½æ•°/","link":"","permalink":"http://huishao.cc/2015/05/04/43Objective-Cä¸­ç¼–å†™çœç•¥å‚æ•°çš„å¤šå‚å‡½æ•°/","excerpt":"","text":"Objective-Cä¸­ç¼–å†™çœç•¥å‚æ•°çš„å¤šå‚æ•°å‡½æ•°å¼•è¯­ï¼šåœ¨Object-Cä¸­ï¼Œæˆ‘ä»¬ä¼šé‡åˆ°å¾ˆå¤šåƒNSLogè¿™æ ·çš„å‡½æ•°ï¼Œå…¶ä¸­å‚æ•°çš„ä¸ªæ•°ä¸ç¡®å®šï¼Œç”±ç¨‹åºå‘˜è‡ªç”±æ§åˆ¶ï¼Œåœ¨åˆå§‹åŒ–æ•°ç»„ï¼Œå­—å…¸ç­‰æ–¹é¢åº”ç”¨å¹¿æ³›ï¼Œé‚£ä¹ˆï¼Œè¿™ç±»çš„å‡½æ•°æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿæˆ‘ä»¬æ€ä¹ˆç¼–å†™æˆ‘ä»¬è‡ªå·±çš„çœç•¥å‚æ•°çš„å‡½æ•°å‘¢ï¼Ÿå½“ç„¶ï¼Œè¿™ä¸æ˜¯å”¯ä¸€çš„å¤šå‚å‡½æ•°çš„å¤„ç†æ–¹æ³•ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡ä¸€ä¸ªå­—å…¸æˆ–è€…æ•°ç»„ä¼ é€’å‚æ•°ã€‚ä½†Cä¸ºæˆ‘ä»¬æä¾›çš„è¿™æ ·çš„ä¸€ç§æœºåˆ¶ï¼Œæ— ç–‘æ˜¯æœ€æ–¹ä¾¿çš„ã€‚ ä¸€ã€äº†è§£å‡ ä¸ªæ¦‚å¿µva_list Cè¯­è¨€ä¸­å®šä¹‰çš„ä¸€ä¸ªæŒ‡é’ˆï¼Œç”¨äºæŒ‡å‘å½“å‰çš„å‚æ•°ã€‚ va_start(ap,param) è¿™ä¸ªå®æ˜¯åˆå§‹åŒ–å‚æ•°åˆ—è¡¨ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯va_listå¯¹è±¡ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å‚æ•°åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚ va_arg(ap, type) ä¸€ä¸ªç”¨äºå–å‡ºå‚æ•°çš„å®ï¼Œè¿™ä¸ªå®çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯va_listå¯¹è±¡ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è¦å–å‡ºçš„å‚æ•°ç±»å‹ã€‚ va_end(ap) è¿™ä¸ªå®ç”¨äºå…³é—­å–å‚åˆ—è¡¨ äºŒã€å¤šå‚å‡½æ•°çš„å–å‚åŸç†åœ¨ç¼–å†™æˆ‘ä»¬è‡ªå·±çš„å¤šå‚å‡½æ•°ä¹‹å‰ï¼Œæ˜ç™½å‡½æ•°çš„å–å‚åŸç†æ˜¯ååˆ†é‡è¦çš„ï¼Œé¦–å…ˆï¼Œå‡½æ•°çš„å‚æ•°æ˜¯è¢«æ”¾å…¥æˆ‘ä»¬å†…å­˜çš„æ ˆæ®µçš„ï¼Œè€Œä¸”æ”¾å…¥çš„é¡ºåºæ˜¯ä»åå¾€å‰æ”¾å…¥ï¼Œæ¯”å¦‚å¦‚æœä¸€ä¸ªå‡½æ•°å‚æ•°å¦‚ä¸‹ï¼š void func(int a,int b,int c,int d) é‚£ä¹ˆä¼ é€’å‚æ•°çš„æ—¶å€™å‚æ•°då…ˆå…¥æ ˆï¼Œæ¥ç€æ˜¯cã€bã€aã€‚å¦‚æ­¤è¿™æ ·ï¼Œåœ¨å–å‚çš„æ—¶å€™ï¼Œæ ¹æ®å †æ ˆçš„å–å€¼åŸåˆ™ï¼Œåˆ™å–å€¼é¡ºåºä¸ºaã€bã€cã€dã€‚æ‰€ä»¥åœ¨åŸç†ä¸Šï¼Œåªè¦æˆ‘ä»¬çŸ¥é“ç¬¬ä¸€ä¸ªå‚æ•°çš„åœ°å€å’Œæ¯ä¸ªå‚æ•°çš„ç±»å‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†å‚æ•°éƒ½å–å‡ºæ¥ã€‚è€Œä¸Šé¢ä»‹ç»çš„å‡ ä¸ªå®ï¼Œå°±æ˜¯å¸®åŠ©æˆ‘ä»¬åšè¿™äº›çš„ã€‚ ä¸‰ã€å£°æ˜ä¸å®ç°çœç•¥å‚æ•°çš„å¤šå‚å‡½æ•°â€œâ€¦â€è¿™ä¸ªç¬¦å·å°±æ˜¯æˆ‘ä»¬ç”¨æ¥å®ç°çœç•¥å‚æ•°å‡½æ•°çš„ç¬¦å·ã€‚ä¾‹å¦‚æˆ‘ä»¬æ¨¡æ‹Ÿå®ç°ä¸€ä¸ªlogå‡½æ•°å¦‚ä¸‹ï¼š 12345678910-(void)myLog:(NSString *)str,...&#123;//çœç•¥å‚æ•°çš„å†™æ³• va_list list;//åˆ›å»ºä¸€ä¸ªåˆ—è¡¨æŒ‡é’ˆå¯¹è±¡ va_start(list, str);//è¿›è¡Œåˆ—è¡¨çš„åˆå§‹åŒ–ï¼Œsträ¸ºçœç•¥å‰çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼ŒåŠ...ä¹‹å‰çš„é‚£ä¸ªå‚æ•° NSString * temStr = str; while (temStr!=nil) &#123;//å¦‚æœä¸æ˜¯nilï¼Œåˆ™ç»§ç»­å–å€¼ NSLog(@&quot;%@&quot;,temStr); temStr = va_arg(list, NSString*);//è¿”å›å–åˆ°çš„å€¼ï¼Œå¹¶ä¸”è®©æŒ‡é’ˆæŒ‡å‘ä¸‹ä¸€ä¸ªå‚æ•°çš„åœ°å€ &#125; va_end(list);//å…³é—­åˆ—è¡¨æŒ‡é’ˆ&#125; æ³¨æ„ï¼Œè°ƒç”¨æ—¶ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨å‚æ•°çš„æœ€ååŠ ä¸Šnilè¿™ä¸ªåˆ¤æ–­ç»“æŸçš„æ¡ä»¶ï¼š 1[self myLog:@&quot;312&quot;,@&quot;321&quot;, nil];//å¿…é¡»æœ‰nil å››ã€ä¸€ç‚¹è¡¥å……ç»†å¿ƒçš„ä½ å¯èƒ½å‘ç°äº†ï¼Œè¿™é‡Œçš„nilæ˜¯æˆ‘ä»¬åœ¨è°ƒç”¨å‡½æ•°æ—¶æ‰‹åŠ¨åŠ ä¸Šçš„ï¼Œå¯æ˜¯ç³»ç»Ÿçš„è®¸å¤šå‡½æ•°åœ¨æˆ‘ä»¬è°ƒç”¨æ—¶ï¼Œç³»ç»Ÿç›´æ¥å¸®æˆ‘ä»¬åŠ ä¸Šäº†å‚æ•°ç»“å°¾çš„é‚£ä¸ªnilï¼Œä¾‹å¦‚ NSArray * array = [NSArray arrayWithObjects:(id), nil] è¿™æ˜¯å¦‚ä½•åšåˆ°çš„å‘¢ï¼Ÿæˆ‘ä»¬åªéœ€è¦åœ¨å‡½æ•°çš„å£°æ˜é‡ŒåŠ ä¸Šä¸€ä¸ªå®ï¼Œå°±å¯ä»¥å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œä¿®æ”¹å¦‚ä¸‹ï¼š 12345678910-(void)myLog:(NSString *)str,...NS_REQUIRES_NIL_TERMINATION&#123;//è¿™é‡ŒåŠ ä¸Šä¸€ä¸ªå® va_list list; va_start(list, str); NSString * temStr = str; while (temStr!=nil) &#123; NSLog(@&quot;%@&quot;,temStr); temStr = va_arg(list, NSString*); &#125; va_end(list);&#125; é¡¾åæ€ä¹‰ï¼Œè¿™ä¸ªå®çš„ä½œç”¨å°±æ˜¯åœ¨ç»“æŸä½ç½®åŠ ä¸Šæˆ‘ä»¬éœ€è¦çš„nilã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOS UITableViewCellä½¿ç”¨è¯¦è§£","slug":"44iOS UITableViewCellä½¿ç”¨è¯¦è§£","date":"2015-05-03T16:00:00.000Z","updated":"2021-06-24T11:23:49.828Z","comments":true,"path":"2015/05/04/44iOS UITableViewCellä½¿ç”¨è¯¦è§£/","link":"","permalink":"http://huishao.cc/2015/05/04/44iOS UITableViewCellä½¿ç”¨è¯¦è§£/","excerpt":"","text":"iOSä¸­UITableViewCellä½¿ç”¨è¯¦è§£- (instancetype)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier; Cellçš„åˆå§‹åŒ–æ–¹æ³•ï¼Œå¯ä»¥è®¾ç½®ä¸€ä¸ªé£æ ¼å’Œæ ‡è¯†ç¬¦ï¼Œé£æ ¼çš„æšä¸¾å¦‚ä¸‹ï¼š 123456typedef NS_ENUM(NSInteger, UITableViewCellStyle) &#123; UITableViewCellStyleDefault, // é»˜è®¤é£æ ¼ï¼Œè‡ªå¸¦æ ‡é¢˜å’Œä¸€ä¸ªå›¾ç‰‡è§†å›¾ï¼Œå›¾ç‰‡åœ¨å·¦ UITableViewCellStyleValue1, // åªæœ‰æ ‡é¢˜å’Œå‰¯æ ‡é¢˜ å‰¯æ ‡é¢˜åœ¨å³è¾¹ UITableViewCellStyleValue2, // åªæœ‰æ ‡é¢˜å’Œå‰¯æ ‡é¢˜ï¼Œå‰¯æ ‡é¢˜åœ¨å·¦è¾¹æ ‡é¢˜çš„ä¸‹è¾¹ UITableViewCellStyleSubtitle // è‡ªå¸¦å›¾ç‰‡è§†å›¾å’Œä¸»å‰¯æ ‡é¢˜ï¼Œä¸»å‰¯æ ‡é¢˜éƒ½åœ¨å·¦è¾¹ï¼Œå‰¯æ ‡é¢˜åœ¨ä¸‹&#125;; @property (nonatomic, readonly, retain) UIImageView *imageView; å›¾ç‰‡è§†å›¾ï¼Œé£æ ¼å…è®¸æ—¶æ‰ä¼šåˆ›å»º @property (nonatomic, readonly, retain) UILabel *textLabel; æ ‡é¢˜æ ‡ç­¾ @property (nonatomic, readonly, retain) UILabel *detailTextLabel; å‰¯æ ‡é¢˜æ ‡ç­¾ @property (nonatomic, readonly, retain) UIView *contentView; å®¹çº³è§†å›¾ï¼Œä»»ä½•cellçš„å­è§†å›¾éƒ½åº”è¯¥æ·»åŠ åœ¨è¿™ä¸ªä¸Šé¢ @property (nonatomic, retain) UIView *backgroundView; èƒŒæ™¯è§†å›¾ @property (nonatomic, retain) UIView *selectedBackgroundView; é€‰ä¸­çŠ¶æ€ä¸‹çš„èƒŒæ™¯è§†å›¾ @property (nonatomic, retain) UIView *multipleSelectionBackgroundView; å¤šé€‰é€‰ä¸­æ—¶çš„èƒŒæ™¯è§†å›¾ @property (nonatomic, readonly, copy) NSString *reuseIdentifier; cellçš„æ ‡è¯†ç¬¦ - (void)prepareForReuse; å½“è¢«é‡ç”¨çš„cellå°†è¦æ˜¾ç¤ºæ—¶ï¼Œä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•æœ€å¤§çš„ç”¨æ­¦ä¹‹åœ°æ˜¯å½“ä½ è‡ªå®šä¹‰çš„cellä¸Šé¢æœ‰å›¾ç‰‡æ—¶ï¼Œå¦‚æœäº§ç”Ÿäº†é‡ç”¨ï¼Œå›¾ç‰‡å¯èƒ½ä¼šé”™ä¹±ï¼ˆå½“å›¾ç‰‡æ¥è‡ªå¼‚æ­¥ä¸‹è½½æ—¶åŠå…¶æ˜æ˜¾ï¼‰ï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥é‡å†™è¿™ä¸ªæ–¹æ³•æŠŠå†…å®¹æŠ¹æ‰ã€‚ @property (nonatomic) UITableViewCellSelectionStyle selectionStyle; cellè¢«é€‰ä¸­æ—¶çš„é£æ ¼ï¼Œæšä¸¾å¦‚ä¸‹ï¼š 123456typedef NS_ENUM(NSInteger, UITableViewCellSelectionStyle) &#123; UITableViewCellSelectionStyleNone,//æ—  UITableViewCellSelectionStyleBlue,//è“è‰² UITableViewCellSelectionStyleGray,//ç°è‰² UITableViewCellSelectionStyleDefault//é»˜è®¤ ä¸ºè“è‰²&#125;; @property (nonatomic, getter=isSelected) BOOL selected; è®¾ç½®cellæ˜¯å¦é€‰ä¸­çŠ¶æ€ @property (nonatomic, getter=isHighlighted) BOOL highlighted; è®¾ç½®cellæ˜¯å¦é«˜äº®çŠ¶æ€ - (void)setSelected:(BOOL)selected animated:(BOOL)animated; - (void)setHighlighted:(BOOL)highlighted animated:(BOOL)animated; ä¸ä¸Šé¢çš„ä¸¤ä¸ªå±æ€§å¯¹åº” @property (nonatomic, readonly) UITableViewCellEditingStyle editingStyle; è·å–cellçš„ç¼–è¾‘çŠ¶æ€ï¼Œæšä¸¾å¦‚ä¸‹ 12345typedef NS_ENUM(NSInteger, UITableViewCellEditingStyle) &#123; UITableViewCellEditingStyleNone,//æ— ç¼–è¾‘ UITableViewCellEditingStyleDelete,//åˆ é™¤ç¼–è¾‘ UITableViewCellEditingStyleInsert//æ’å…¥ç¼–è¾‘&#125;; @property (nonatomic) BOOL showsReorderControl; è®¾ç½®æ˜¯å¦æ˜¾ç¤ºcellè‡ªå¸¦çš„è‡ªåŠ¨æ’åºæ§ä»¶ æ³¨æ„ï¼šè¦è®©cellå®ç°æ‹–åŠ¨æ’åºçš„åŠŸèƒ½ï¼Œé™¤äº†ä¸Šé¢è®¾ç½®ä¸ºYESï¼Œè¿˜éœ€å®ç°ä»£ç†ä¸­çš„å¦‚ä¸‹æ–¹æ³•ï¼š -(BOOL)tableView:(UITableView )tableView canMoveRowAtIndexPath:(NSIndexPath )indexPath{ return YES; } -(void)tableView:(UITableView )tableView moveRowAtIndexPath:(NSIndexPath )sourceIndexPath toIndexPath:(NSIndexPath *)destinationIndexPath{ } @property (nonatomic) BOOL shouldIndentWhileEditing; è®¾ç½®ç¼–è¾‘çŠ¶æ€ä¸‹æ˜¯å¦æ˜¾ç¤ºç¼©è¿› @property (nonatomic) UITableViewCellAccessoryType accessoryType; è®¾ç½®é™„ä»¶è§†å›¾çš„é£æ ¼(cellæœ€å³ä¾§æ˜¾ç¤ºçš„è§†å›¾) æšä¸¾å¦‚ä¸‹ï¼š 1234567typedef NS_ENUM(NSInteger, UITableViewCellAccessoryType) &#123; UITableViewCellAccessoryNone, // æ²¡æœ‰è§†å›¾ UITableViewCellAccessoryDisclosureIndicator, // cellå³ä¾§æ˜¾ç¤ºä¸€ä¸ªç°è‰²ç®­å¤´ UITableViewCellAccessoryDetailDisclosureButton, // æ˜¾ç¤ºè¯¦æƒ…ç¬¦å·å’Œç°è‰²ç®­å¤´ UITableViewCellAccessoryCheckmark, // cellå³ä¾§æ˜¾ç¤ºè“è‰²å¯¹å· UITableViewCellAccessoryDetailButton // cellå³ä¾§æ˜¾ç¤ºä¸€ä¸ªè¯¦æƒ…ç¬¦å·&#125;; @property (nonatomic, retain) UIView *accessoryView; é™„ä»¶è§†å›¾ @property (nonatomic) UITableViewCellAccessoryType editingAccessoryType; cellç¼–è¾‘æ—¶çš„é™„ä»¶è§†å›¾é£æ ¼ @property (nonatomic, retain) UIView *editingAccessoryView; cellç¼–è¾‘æ—¶çš„é™„ä»¶è§†å›¾ @property (nonatomic) NSInteger indentationLevel; è®¾ç½®å†…å®¹åŒºåŸŸçš„ç¼©è¿›çº§åˆ« @property (nonatomic) CGFloat indentationWidth; è®¾ç½®æ¯ä¸ªçº§åˆ«çš„ç¼©è¿›å®½åº¦ @property (nonatomic) UIEdgeInsets separatorInset; è®¾ç½®åˆ†å‰²çº¿çš„åç§»é‡ @property (nonatomic, getter=isEditing) BOOL editing; - (void)setEditing:(BOOL)editing animated:(BOOL)animated; è®¾ç½®æ˜¯å¦ç¼–è¾‘çŠ¶æ€ @property(nonatomic, readonly) BOOL showingDeleteConfirmation; è¿”å›æ˜¯å¦ç›®å‰æ­£åœ¨æ˜¾ç¤ºåˆ é™¤æŒ‰é’® - (void)willTransitionToState:(UITableViewCellStateMask)state; cellçŠ¶æ€å°†è¦è½¬æ¢æ—¶è°ƒç”¨çš„å‡½æ•°ï¼Œå¯ä»¥åœ¨å­ç±»ä¸­é‡å†™ - (void)didTransitionToState:(UITableViewCellStateMask)state; cellçŠ¶æ€å·²ç»è½¬æ¢æ—¶è°ƒç”¨çš„å‡½æ•°ï¼Œå¯ä»¥åœ¨å­ç±»ä¸­é‡å†™ï¼ŒçŠ¶æ€æšä¸¾å¦‚ä¸‹ï¼š 12345typedef NS_OPTIONS(NSUInteger, UITableViewCellStateMask) &#123; UITableViewCellStateDefaultMask = 0,//é»˜è®¤çŠ¶æ€ UITableViewCellStateShowingEditControlMask = 1 &lt;&lt; 0,//ç¼–è¾‘çŠ¶æ€ UITableViewCellStateShowingDeleteConfirmationMask = 1 &lt;&lt; 1//ç¡®è®¤åˆ é™¤çŠ¶æ€&#125;; æ³¨æ„ï¼šä¸‹é¢è¿™äº›æ–¹æ³•å·²ç»å…¨éƒ¨åœ¨IOS3.0åè¢«åºŸå¼ƒäº†ï¼Œè™½ç„¶è¿˜æœ‰æ•ˆæœï¼Œä½†æ˜¯ä¼šè¢«è­¦å‘Š @property (nonatomic, copy) NSString *text; è®¾ç½®æ ‡é¢˜ @property (nonatomic, retain) UIFont *font; è®¾ç½®å­—ä½“ @property (nonatomic) NSTextAlignment textAlignment; è®¾ç½®å¯¹å…¶æ¨¡å¼ @property (nonatomic) NSLineBreakMode lineBreakMode; è®¾ç½®æ–­è¡Œæ¨¡å¼ @property (nonatomic, retain) UIColor *textColor; è®¾ç½®å­—ä½“é¢œè‰² @property (nonatomic, retain) UIColor *selectedTextColor; è®¾ç½®é€‰ä¸­çŠ¶æ€ä¸‹çš„å­—ä½“é¢œè‰² @property (nonatomic, retain) UIImage *image; è®¾ç½®å›¾ç‰‡ @property (nonatomic, retain) UIImage *selectedImage; è®¾ç½®é€‰ä¸­çŠ¶æ€æ—¶çš„å›¾ç‰‡ @property (nonatomic) BOOL hidesAccessoryWhenEditing; è®¾ç½®ç¼–è¾‘çš„æ—¶å€™æ˜¯å¦éšè—é™„ä»¶è§†å›¾ å­¦ä¹ ä½¿ç”¨ æ¬¢è¿è½¬è½½ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"iOSä¸­UIActionSheetä½¿ç”¨è¯¦è§£","slug":"42IOSä¸­UIActionSheetä½¿ç”¨è¯¦è§£","date":"2015-05-02T16:00:00.000Z","updated":"2021-06-24T09:20:29.141Z","comments":true,"path":"2015/05/03/42IOSä¸­UIActionSheetä½¿ç”¨è¯¦è§£/","link":"","permalink":"http://huishao.cc/2015/05/03/42IOSä¸­UIActionSheetä½¿ç”¨è¯¦è§£/","excerpt":"","text":"IOSä¸­UIActionSheetä½¿ç”¨æ–¹æ³•è¯¦è§£ä¸€ã€åˆå§‹åŒ–æ–¹æ³•- (instancetype)initWithTitle:(NSString )title delegate:(id)delegate cancelButtonTitle:(NSString )cancelButtonTitle destructiveButtonTitle:(NSString )destructiveButtonTitle otherButtonTitles:(NSString )otherButtonTitles, â€¦; å‚æ•°è¯´æ˜ï¼š titleï¼šè§†å›¾æ ‡é¢˜ delegateï¼šè®¾ç½®ä»£ç† cancelButtonTitleï¼šå–æ¶ˆæŒ‰é’®çš„æ ‡é¢˜ destructiveButtonTitleï¼šç‰¹æ®Šæ ‡è®°çš„æŒ‰é’®çš„æ ‡é¢˜ otherButtonTitlesï¼šå…¶ä»–æŒ‰é’®çš„æ ‡é¢˜ äºŒã€å¸¸ç”¨æ–¹æ³•å’Œå±æ€§ä»‹ç»@property(nonatomic,copy) NSString *title; è®¾ç½®æ ‡é¢˜ @property(nonatomic) UIActionSheetStyle actionSheetStyle; è®¾ç½®é£æ ¼ï¼Œæšä¸¾å¦‚ä¸‹ï¼š 123456typedef NS_ENUM(NSInteger, UIActionSheetStyle) &#123; UIActionSheetStyleAutomatic = -1, UIActionSheetStyleDefault = UIBarStyleDefault, UIActionSheetStyleBlackTranslucent = UIBarStyleBlackTranslucent, UIActionSheetStyleBlackOpaque = UIBarStyleBlackOpaque,&#125;; - (NSInteger)addButtonWithTitle:(NSString *)title; æ·»åŠ ä¸€ä¸ªæŒ‰é’®ï¼Œä¼šè¿”å›æŒ‰é’®çš„ç´¢å¼• - (NSString *)buttonTitleAtIndex:(NSInteger)buttonIndex; è·å–æŒ‰é’®æ ‡é¢˜ @property(nonatomic,readonly) NSInteger numberOfButtons; è·å–æŒ‰é’®æ•°é‡ @property(nonatomic) NSInteger cancelButtonIndex; è®¾ç½®å–æ¶ˆæŒ‰é’®çš„ç´¢å¼•å€¼ @property(nonatomic) NSInteger destructiveButtonIndex; è®¾ç½®ç‰¹æ®Šæ ‡è®° @property(nonatomic,readonly,getter=isVisible) BOOL visible; è§†å›¾å½“å‰æ˜¯å¦å¯è§ ä¸‹é¢æ˜¯å‡ ç§å¼¹å‡ºæ–¹å¼ï¼Œä¼šæ ¹æ®é£æ ¼ä¸åŒå±•ç°ä¸åŒçš„æ–¹å¼ - (void)showFromToolbar:(UIToolbar *)view; - (void)showFromTabBar:(UITabBar *)view; - (void)showFromBarButtonItem:(UIBarButtonItem *)item animated:(BOOL)animated ; - (void)showFromRect:(CGRect)rect inView:(UIView *)view animated:(BOOL)animated ; - (void)showInView:(UIView *)view; - (void)dismissWithClickedButtonIndex:(NSInteger)buttonIndex animated:(BOOL)animated; ä½¿ç”¨ä»£ç å°†è§†å›¾æ”¶å› ä¸‰ã€UIActionSheetä»£ç†æ–¹æ³•- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex; ç‚¹å‡»æŒ‰é’®æ—¶è§¦å‘çš„æ–¹æ³• - (void)willPresentActionSheet:(UIActionSheet *)actionSheet; è§†å›¾å°†è¦å¼¹å‡ºæ—¶è§¦å‘çš„æ–¹æ³• - (void)didPresentActionSheet:(UIActionSheet *)actionSheet; è§†å›¾å·²ç»å¼¹å‡ºå¼è§¦å‘çš„æ–¹æ³• - (void)actionSheet:(UIActionSheet *)actionSheet willDismissWithButtonIndex:(NSInteger)buttonIndex; ç‚¹å‡»æŒ‰é’®åï¼Œè§†å›¾å°†è¦æ”¶å›æ—¶è§¦å‘çš„æ–¹æ³• - (void)actionSheet:(UIActionSheet *)actionSheet didDismissWithButtonIndex:(NSInteger)buttonIndex; ç‚¹å‡»æŒ‰é’®åï¼Œè§†å›¾å·²ç»æ”¶å›æ—¶è§¦å‘çš„æ–¹æ³• ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"iOS UIAlertViewï¼ˆè­¦å‘Šæ¡†ï¼‰æ–¹æ³•æ€»ç»“","slug":"41IOS UIAlertViewï¼ˆè­¦å‘Šæ¡†ï¼‰æ–¹æ³•æ€»ç»“","date":"2015-04-30T16:00:00.000Z","updated":"2021-06-24T09:18:18.869Z","comments":true,"path":"2015/05/01/41IOS UIAlertViewï¼ˆè­¦å‘Šæ¡†ï¼‰æ–¹æ³•æ€»ç»“/","link":"","permalink":"http://huishao.cc/2015/05/01/41IOS UIAlertViewï¼ˆè­¦å‘Šæ¡†ï¼‰æ–¹æ³•æ€»ç»“/","excerpt":"","text":"IOSä¸­UIAlertView(è­¦å‘Šæ¡†)å¸¸ç”¨æ–¹æ³•æ€»ç»“ä¸€ã€åˆå§‹åŒ–æ–¹æ³•- (instancetype)initWithTitle:(NSString )title message:(NSString )message delegate:(id //)delegate cancelButtonTitle:(NSString )cancelButtonTitle otherButtonTitles:(NSString )otherButtonTitles, â€¦;è¿™ä¸ªæ–¹æ³•é€šè¿‡è®¾ç½®ä¸€ä¸ªæ ‡é¢˜ï¼Œå†…å®¹ï¼Œä»£ç†å’Œä¸€äº›æŒ‰é’®çš„æ ‡é¢˜åˆ›å»ºè­¦å‘Šæ¡†ï¼Œä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š 12 UIAlertView * alert = [[UIAlertView alloc]initWithTitle:@&quot;æˆ‘çš„è­¦å‘Šæ¡†&quot; message:@&quot;è¿™æ˜¯ä¸€ä¸ªè­¦å‘Šæ¡†&quot; delegate:self cancelButtonTitle:@&quot;å–æ¶ˆ&quot; otherButtonTitles:@&quot;ç¡®å®š&quot;, nil]; [alert show]; æ•ˆæœå¦‚ä¸‹ï¼š æ³¨æ„ï¼šå¦‚æœæŒ‰é’®æ•°è¶…è¿‡ä¸¤ä¸ªï¼Œå°†ä¼šåˆ›å»ºæˆå¦‚ä¸‹æ ·å­ï¼š å¦‚æœæŒ‰é’®æ•°é‡è¶…å‡ºå±å¹•æ˜¾ç¤ºèŒƒå›´ï¼Œåˆ™ä¼šåˆ›å»ºç±»ä¼¼tableViewçš„æ•ˆæœã€‚ äºŒã€å±æ€§ä¸æ–¹æ³•è§£ææ ‡é¢˜å±æ€§ @property(nonatomic,copy) NSString *title; å†…å®¹å±æ€§ @property(nonatomic,copy) NSString *message; æ·»åŠ ä¸€ä¸ªæŒ‰é’®ï¼Œè¿”å›çš„æ˜¯æ­¤æŒ‰é’®çš„ç´¢å¼•å€¼ - (NSInteger)addButtonWithTitle:(NSString *)title; è¿”å›æ ¹æ®æŒ‰é’®ç´¢å¼•æŒ‰é’®æ ‡é¢˜ - (NSString *)buttonTitleAtIndex:(NSInteger)buttonIndex; è·å–æŒ‰é’®æ•°é‡ @property(nonatomic,readonly) NSInteger numberOfButtons; è®¾ç½®å°†æŸä¸€ä¸ªæŒ‰é’®è®¾ç½®ä¸ºå–æ¶ˆæŒ‰é’® @property(nonatomic) NSInteger cancelButtonIndex; è¿”å›å…¶ä»–ç±»å‹æŒ‰é’®ç¬¬ä¸€ä¸ªçš„ç´¢å¼•å€¼ @property(nonatomic,readonly) NSInteger firstOtherButtonIndex; è­¦å‘Šæ¡†æ˜¯å¦å¯è§ @property(nonatomic,readonly,getter=isVisible) BOOL visible; æ˜¾ç°è­¦å‘Šæ¡† - (void)show; ä»£ç æ¨¡æ‹Ÿç‚¹å‡»æŒ‰é’®æ¶ˆå¤±è§¦å‘æ–¹æ³• - (void)dismissWithClickedButtonIndex:(NSInteger)buttonIndex animated:(BOOL)animated; è®¾ç½®è­¦å‘Šæ¡†é£æ ¼ @property(nonatomic,assign) UIAlertViewStyle alertViewStyle; é£æ ¼çš„æšä¸¾å¦‚ä¸‹ 123456typedef NS_ENUM(NSInteger, UIAlertViewStyle) &#123; UIAlertViewStyleDefault = 0,//é»˜è®¤é£æ ¼ UIAlertViewStyleSecureTextInput,//å¯†ç è¾“å…¥æ¡†é£æ ¼ UIAlertViewStylePlainTextInput,//æ™®é€šè¾“å…¥æ¡†é£æ ¼ UIAlertViewStyleLoginAndPasswordInput//è´¦å·å¯†ç æ¡†é£æ ¼&#125;; è¿™ä¸ªæ–¹æ³•è®¾ç½®æ–‡æœ¬è¾“å…¥æ¡†çš„ç´¢å¼• - (UITextField *)textFieldAtIndex:(NSInteger)textFieldIndex; ä¸‰ã€UIAlertViewDelegateä¸­çš„æ–¹æ³•ç‚¹å‡»æŒ‰é’®æ—¶è§¦å‘çš„æ–¹æ³• - (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex; å°†è¦å±•ç°è­¦å‘Šæ¡†æ—¶è§¦å‘çš„æ–¹æ³• - (void)willPresentAlertView:(UIAlertView *)alertView; å·²ç»å±•ç°è­¦å‘Šæ¡†æ—¶è§¦å‘çš„æ–¹æ³• - (void)didPresentAlertView:(UIAlertView *)alertView; è­¦å‘Šæ¡†å°†è¦æ¶ˆå¤±æ—¶è§¦å‘çš„æ–¹æ³• - (void)alertView:(UIAlertView *)alertView willDismissWithButtonIndex:(NSInteger)buttonIndex; è­¦å‘Šæ¡†å·²ç»æ¶ˆå¤±æ—¶è§¦å‘çš„æ–¹æ³• - (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex; è®¾ç½®æ˜¯å¦å…è®¸ç¬¬ä¸€ä¸ªæŒ‰é’®ä¸æ˜¯å–æ¶ˆæŒ‰é’® - (BOOL)alertViewShouldEnableFirstOtherButton:(UIAlertView *)alertView; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"iOSè°ƒç”¨ç³»ç»Ÿé€šè®¯å½•","slug":"39iOSè°ƒç”¨ç³»ç»Ÿé€šè®¯å½•","date":"2015-04-28T16:00:00.000Z","updated":"2021-06-22T03:16:44.607Z","comments":true,"path":"2015/04/29/39iOSè°ƒç”¨ç³»ç»Ÿé€šè®¯å½•/","link":"","permalink":"http://huishao.cc/2015/04/29/39iOSè°ƒç”¨ç³»ç»Ÿé€šè®¯å½•/","excerpt":"","text":"iOSè°ƒç”¨ç³»ç»Ÿé€šè®¯å½•ä¸Šä¸€ç¯‡åšå®¢è¯¦ç»†ä»‹ç»äº†åœ¨IOSå¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¦‚ä½•è·å–é€šè®¯å½•è”ç³»äººçš„ä¿¡æ¯ï¼Œå³å¯¹å…¶è¿›è¡Œå¢åˆ æ”¹æŸ¥çš„æ“ä½œï¼šhttp://my.oschina.net/u/2340880/blog/407347ã€‚è€Œåœ¨ä¸€äº›å¼€å‘é¡¹ç›®ä¸­ï¼Œå¦‚æœæ²¡æœ‰ç‰¹æ®Šéœ€æ±‚ï¼Œå¹¶ä¸”æˆ‘ä»¬åªæ˜¯éœ€è¦ä¸€äº›é€šè®¯å½•ä¿¡æ¯ï¼Œå¹¶ä¸åšä¿®æ”¹æ“ä½œï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥é‡‡å–å¦ä¸€ç§æ›´åŠ æ–¹ä¾¿çš„æ–¹å¼ï¼Œç›´æ¥è°ƒç”¨ç³»ç»Ÿçš„é€šè®¯å½•ã€‚ é¦–å…ˆï¼Œå¯¼å…¥è¿™ä¸ªå¤´æ–‡ä»¶ï¼š 1#import &lt;AddressBookUI/AddressBookUI.h&gt; æ³¨æ„ï¼šéœ€è¦åœ¨é¡¹ç›®ä¸­é“¾æ¥å¦‚ä¸‹ä¸¤ä¸ªåº“ï¼š åªéœ€ç®€å•çš„å‡ å¥ä»£ç ï¼Œå°±å¯ä»¥å¼¹å‡ºç³»ç»Ÿçš„é€šè®¯å½•ç•Œé¢ï¼š 123 ABPeoplePickerNavigationController * con = [[ABPeoplePickerNavigationController alloc]init]; con.peoplePickerDelegate=self; [self presentViewController:con animated:YES completion:nil]; ç‚¹å‡»è”ç³»äººåæ‰§è¡Œçš„æ–¹æ³•ï¼Œæˆ‘ä»¬åªéœ€è¦å®ç°ä¸‹é¢çš„ä»£ç†æ–¹æ³•å³å¯ 123-(void)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker didSelectPerson:(ABRecordRef)person&#123; //personå‚æ•°å°±æ˜¯é€‰æ‹©çš„è”ç³»äººçš„å¼•ç”¨ å…·ä½“å«ä¹‰å’Œæ•°æ®è·å–ï¼Œåœ¨ä¸Šä¸€ç¯‡åšå®¢ä¸­æœ‰è¯¦ç»†ä»‹ç»&#125; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSä¸­è°ƒç”¨ç³»ç»Ÿæ‹¨æ‰“ç”µè¯ä¸å‘é€çŸ­ä¿¡","slug":"40IOSä¸­è°ƒç”¨ç³»ç»Ÿæ‹¨æ‰“ç”µè¯ä¸å‘é€çŸ­ä¿¡","date":"2015-04-28T16:00:00.000Z","updated":"2021-06-24T03:04:55.230Z","comments":true,"path":"2015/04/29/40IOSä¸­è°ƒç”¨ç³»ç»Ÿæ‹¨æ‰“ç”µè¯ä¸å‘é€çŸ­ä¿¡/","link":"","permalink":"http://huishao.cc/2015/04/29/40IOSä¸­è°ƒç”¨ç³»ç»Ÿæ‹¨æ‰“ç”µè¯ä¸å‘é€çŸ­ä¿¡/","excerpt":"","text":"IOSä¸­è°ƒç”¨ç³»ç»Ÿæ‹¨æ‰“ç”µè¯å‘é€çŸ­ä¿¡ä¸€ã€è°ƒç”¨æ‰“ç”µè¯ç•Œé¢[[UIApplication sharedApplication] openURL:[NSURL URLWithString:[NSString stringWithFormat:@â€tel://%@â€,_phoneNumber]]]; äºŒã€å‘é€çŸ­æ¶ˆæ¯ç•Œé¢è°ƒç”¨ç³»ç»Ÿçš„å‘é€çŸ­ä¿¡çš„ç•Œé¢ï¼Œéœ€è¦å¼•å…¥ä»¥ä¸‹å¤´æ–‡ä»¶ï¼š #import &lt;MessageUI/MessageUI.h&gt; ç³»ç»ŸçŸ­ä¿¡ç•Œé¢çš„è°ƒç”¨å¾ˆç®€å•ï¼Œåªéœ€ä¸‹é¢å‡ å¥ä»£ç ï¼š 12345 MFMessageComposeViewController * con = [[MFMessageComposeViewController alloc]init]; if ([MFMessageComposeViewController canSendText]) &#123; con.recipients=@[_phoneNumber];//ç”µè¯æ•°ç»„ con.messageComposeDelegate=self; [self presentViewController:con animated:YES completion:nil]; ä¸‹é¢å°†MessageUIçš„ä¸€äº›å¸¸ç”¨æ–¹æ³•æ€»ç»“å¦‚ä¸‹ï¼š + (BOOL)canSendText åˆ¤æ–­æ˜¯å¦æ”¯æŒå‘é€æ–‡å­— + (BOOL)canSendSubject; åˆ¤æ–­æ˜¯å¦æ”¯æŒå‘é€ä¸»é¢˜ä¿¡æ¯ + (BOOL)canSendAttachments; åˆ¤æ–­æ˜¯å¦æ”¯æŒå‘é€é™„ä»¶ + (BOOL)isSupportedAttachmentUTI:(NSString *)uti; åˆ¤æ–­æ˜¯å¦æ”¯æŒç»Ÿä¸€æ ‡ç¤ºé™„ä»¶ - (void)disableUserAttachments; ç¦æ­¢å‘é€é™„ä»¶ @property(nonatomic,copy) NSArray *recipients; è”ç³»äººæ•°ç»„ï¼Œä¼šæ˜¾ç¤ºåœ¨å‘é€äººåˆ—è¡¨é‡Œ @property(nonatomic,copy) NSString *body; ä¿¡æ¯ä¸»ä½“å†…å®¹ @property(nonatomic,copy) NSString *subject; ä¿¡æ¯æ ‡é¢˜ @property(nonatomic,copy, readonly) NSArray *attachments; ä¿¡æ¯é™„ä»¶æ•°ç»„ åªè¯»çš„ é‡Œé¢æ˜¯å­—å…¸ - (BOOL)addAttachmentURL:(NSURL )attachmentURL withAlternateFilename:(NSString )alternateFilename; æ ¹æ®URLè·¯å¾„å’Œæ·»åŠ é™„ä»¶ï¼Œè¿”å›YESè¡¨ç¤ºæ·»åŠ æˆåŠŸ - (BOOL)addAttachmentData:(NSData )attachmentData typeIdentifier:(NSString )uti filename:(NSString *)filename; æ ¹æ®Dataæ•°æ®æ·»åŠ é™„ä»¶ - (void)messageComposeViewController:(MFMessageComposeViewController *)controller didFinishWithResult:(MessageComposeResult)result; MFMessageComposeViewControllerDelegateçš„ä»£ç†æ–¹æ³•ï¼Œresultä¼šä¼ å›æ¥ä¸€ä¸ªç»“æœï¼Œæšä¸¾å¦‚ä¸‹ï¼š 12345678enum MessageComposeResult &#123; //å–æ¶ˆå‘é€ MessageComposeResultCancelled, //å‘é€æˆåŠŸ MessageComposeResultSent, //å‘é€å¤±è´¥ MessageComposeResultFailed&#125;; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"iOSä»£ç è¿è¡Œçš„ç£¨åˆ€çŸ³-é¢„ç¼–è¯‘æŒ‡ä»¤","slug":"37iOSä»£ç è¿è¡Œçš„ç£¨åˆ€çŸ³-é¢„ç¼–è¯‘æŒ‡ä»¤","date":"2015-04-27T16:00:00.000Z","updated":"2021-06-21T08:37:21.077Z","comments":true,"path":"2015/04/28/37iOSä»£ç è¿è¡Œçš„ç£¨åˆ€çŸ³-é¢„ç¼–è¯‘æŒ‡ä»¤/","link":"","permalink":"http://huishao.cc/2015/04/28/37iOSä»£ç è¿è¡Œçš„ç£¨åˆ€çŸ³-é¢„ç¼–è¯‘æŒ‡ä»¤/","excerpt":"","text":"iOSä¸­ä»£ç è¿è¡Œçš„ç£¨åˆ€çŸ³â€“é¢„ç¼–è¯‘æŒ‡ä»¤æ‰€è°“é¢„ç¼–è¯‘ï¼Œå°±æ˜¯ç¨‹åºä»£ç åœ¨ç¼–è¯‘ä¹‹å‰ï¼Œå¼€å‘å·¥å…·ä¸ºæˆ‘ä»¬é¢„å…ˆåšçš„ä¸€äº›å·¥ä½œã€‚ä¸è¦å°ç§è¿™äº›æŒ‡ä»¤ï¼Œæ²¡æœ‰å®ƒä»¬ï¼Œæˆ‘ä»¬çš„ä»£ç å¯èƒ½å¯¸æ­¥éš¾è¡Œã€‚ ä¸€ã€æ–‡ä»¶åŒ…å«ç›¸å…³é¢„å¤„ç†å‘½ä»¤#include #include â€œheaderâ€ Cè¯­è¨€ä¸­ä½¿ç”¨çš„åŒ…å«æ–‡ä»¶çš„æŒ‡ä»¤â€â€å’Œ&lt;&gt;çš„åŒºåˆ«ä¸ºï¼Œâ€â€æ˜¯ä»å½“å‰ç›®å½•å¼€å§‹å¯»æ‰¾æ–‡ä»¶ï¼Œ&lt;&gt;æ˜¯ä»ç³»ç»Ÿåº“ä¸­å¯»æ‰¾æ–‡ä»¶ã€‚è¿™ä¸¤ä¸ªæŒ‡ä»¤ä¸èƒ½ä½¿å¤´æ–‡ä»¶å¾ªç¯å¼•å…¥ï¼Œä¹Ÿä¸èƒ½é‡å¤åŒ…å«åŒä¸€ä¸ªå¤´æ–‡ä»¶ã€‚ #import â€œheaderâ€ #import è¿™ä¸¤ä¸ªæŒ‡ä»¤å’Œä¸Šé¢ä¸¤ä¸ªä½œç”¨ä¸€æ ·ï¼Œåªæ˜¯æ›´åŠ æ™ºèƒ½ï¼Œæ™ºèƒ½å¤„ç†é‡å¤åŒ…å«å¤´æ–‡ä»¶çš„é—®é¢˜ã€‚ #include_next â€œheaderâ€ #include_next è¿™ä¸¤ä¸ªæŒ‡ä»¤æ˜¯Cä¸­çš„æŒ‡ä»¤ï¼ŒOCä¹Ÿæ”¯æŒï¼Œåªæ˜¯å¾ˆå°‘ä½¿ç”¨ï¼Œå®ƒçš„ä½œç”¨æ˜¯åœ¨æ‰¾åˆ°åå­—åŒ¹é…çš„å¤´æ–‡ä»¶åè·³è¿‡ï¼Œå¯»æ‰¾ä¸‹ä¸€ä¸ªç›¸åŒåå­—çš„å¯¼å…¥ã€‚ äºŒã€å®å®šä¹‰å®å®šä¹‰æ˜¯å¼€å‘ä¸­ä¼šç»å¸¸ç”¨åˆ°çš„ä¸€ä¸ªæŒ‡ä»¤äº†ï¼Œæˆ‘ä»¬è¿˜ä¼šå°†è®¸å¤šç®€å•çš„å‡½æ•°å®šä¹‰ä¸ºå®ï¼Œçœå»ç³»ç»Ÿå‹æ ˆçš„æ—¶é—´ï¼Œæé«˜ä»£ç æ•ˆç‡ã€‚å› ä¸ºè¿™ç¯‡åšå®¢çš„ä¸»é¢˜æ˜¯é¢„å¤„ç†å‘½ä»¤ï¼Œæ‰€ä»¥å®çš„ç”¨æ³•å’Œé«˜çº§ç”¨æ³•å°±ä¸å†å¤šå†™äº†ï¼Œä¸‹æ¬¡å†è®¨è®ºã€‚ #define å‚æ•°1 å‚æ•°2 å®šä¹‰ä¸€ä¸ªç®€å•çš„æ›¿æ¢å®ï¼Œä¸å¸¦å‚æ•°ï¼Œåœ¨é¢„ç¼–è¯‘é˜¶æ®µï¼Œä¼šæŠŠæ‰€æœ‰å‚æ•°1çš„åœ°æ–¹ç›´æ¥æ›¿æ¢ä¸ºå‚æ•°2ã€‚ #define ADD(x) (x+x) å®šä¹‰ä¸€ä¸ªå¸¦å‚æ•°çš„å®ï¼Œç±»ä¼¼å¸¦å‚å‡½æ•°çš„åŠŸèƒ½ï¼Œä½†ä¹Ÿæ˜¯ç¼–è¯‘å‰åšç®€å•æ›¿æ¢ã€‚ ä¸‰ã€æ¡ä»¶ç¼–è¯‘æ¡ä»¶ç¼–è¯‘ç”¨äºåˆ¤æ–­ä¸€ä¸ªè¡¨è¾¾å¼æ˜¯å¦æˆç«‹ï¼Œæˆç«‹åˆ™è¿›å…¥æ¡ä»¶ç¼–è¯‘ã€‚ æ–¹å¼ä¸€ï¼š #if è¡¨è¾¾å¼ #else #endif æ–¹å¼äºŒï¼š #if è¡¨è¾¾å¼ #elif è¡¨è¾¾å¼ #endif æ–¹å¼ä¸‰: #ifndef å¦‚æœæ²¡æœ‰å®šä¹‰ä¸€ä¸ªå®è¿›è¡Œç¼–è¯‘ #ifdef å¦‚æœå®šä¹‰ä¸€ä¸ªå®è¿›è¡Œç¼–è¯‘ å››ã€é”™è¯¯ï¼Œè­¦å‘Šçš„é¢„å¤„ç†#error é”™è¯¯ å½“ç¨‹åºæ£€æŸ¥åˆ°è¿™é‡Œæ—¶ä¼šåœæ­¢ç¼–è¯‘ï¼Œè¿™ä¸ªå‘½ä»¤çš„ä½œç”¨æ˜¯åœ¨é”™è¯¯çš„åœ°æ–¹ç¦æ­¢ç¼–è¯‘ã€‚ #warning è­¦å‘Š è¿™ä¸ªå‘½ä»¤å¹¶ä¸ä¼šå½±å“ç¨‹åºçš„ç¼–è¯‘å’Œè¿è¡Œï¼Œä½†æ˜¯ä¼šè®¤ä¸ºçš„åœ¨è¿™é‡Œæ˜¾ç¤ºä¸€æ¡è­¦å‘Šä¿¡æ¯ï¼Œæé†’æˆ‘ä»¬è‡ªå·±ã€‚ äº”ã€æ›´æ”¹æ–‡ä»¶åå’Œè¡Œå·åœ¨OCä¸­ï¼Œæœ‰ä¸€ä¸ªç³»ç»Ÿçš„å®šä¹‰çš„å®: __LINE__ è¿™ä¸ªå®è¡¨ç¤ºå½“å‰è¡Œçš„è¡Œå·ï¼Œå¯ä»¥æ‰“å°ã€‚ #line number æ”¹å˜å½“å‰è¡Œçš„è¡Œå·ï¼Œä¼šå½±å“ä¸‹é¢æ‰€æœ‰çš„è¡Œ #line number â€œfilenameâ€ æ”¹å˜å½“å‰è¡Œå·å’Œç¼–è¯‘åçš„æ–‡ä»¶å å…­ã€ç¼–è¯‘å™¨æ§åˆ¶æŒ‡ä»¤#pragma å‚æ•° è¿™ä¸ªé¢„ç¼–è¯‘æŒ‡ä»¤æ˜¯æœ€å¤æ‚çš„ï¼Œç”¨äºæ§åˆ¶ç¼–è¯‘å™¨çš„è¡Œä¸ºï¼Œä¸€èˆ¬æˆ‘ä»¬å¼€å‘åº”ç”¨APPæ˜¯å¾ˆå°‘ç”¨åˆ°çš„ï¼Œå¸¸ç”¨çš„æœ‰ä¸¤ç§æ–¹å¼ï¼š #pragma mark - ä¿¡æ¯ ä¸ºä»£ç åŠ ä¸Šæ ‡æ³¨ #pragma message(â€œä¿¡æ¯â€) ç¼–è¯‘æ—¶æç¤ºä¿¡æ¯ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSè·å–é€šè®¯å½•è”ç³»äººä¿¡æ¯","slug":"38iOSè·å–é€šè®¯å½•è”ç³»äººä¿¡æ¯","date":"2015-04-27T16:00:00.000Z","updated":"2021-06-21T08:41:05.248Z","comments":true,"path":"2015/04/28/38iOSè·å–é€šè®¯å½•è”ç³»äººä¿¡æ¯/","link":"","permalink":"http://huishao.cc/2015/04/28/38iOSè·å–é€šè®¯å½•è”ç³»äººä¿¡æ¯/","excerpt":"","text":"iOSè·å–ç³»ç»Ÿé€šè®¯å½•è”ç³»äººä¿¡æ¯ä¸€ã€æƒé™æ³¨å†Œéšç€appleå¯¹ç”¨æˆ·éšç§çš„è¶Šæ¥è¶Šé‡è§†ï¼ŒIOSç³»ç»Ÿçš„æƒé™è®¾ç½®ä¹Ÿæ›´åŠ ä¸¥æ ¼ï¼Œåœ¨è·å–ç³»ç»Ÿé€šè®¯å½•ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»è·å¾—ç”¨æˆ·çš„æˆæƒã€‚æƒé™ç”³è¯·ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031 //è¿™ä¸ªå˜é‡ç”¨äºè®°å½•æˆæƒæ˜¯å¦æˆåŠŸï¼Œå³ç”¨æˆ·æ˜¯å¦å…è®¸æˆ‘ä»¬è®¿é—®é€šè®¯å½• int __block tip=0; //å£°æ˜ä¸€ä¸ªé€šè®¯ç°¿çš„å¼•ç”¨ ABAddressBookRef addBook =nil; //å› ä¸ºåœ¨IOS6.0ä¹‹åå’Œä¹‹å‰çš„æƒé™ç”³è¯·æ–¹å¼æœ‰æ‰€å·®åˆ«ï¼Œè¿™é‡Œåšä¸ªåˆ¤æ–­ if ([[UIDevice currentDevice].systemVersion floatValue]&gt;=6.0) &#123; //åˆ›å»ºé€šè®¯ç°¿çš„å¼•ç”¨ addBook=ABAddressBookCreateWithOptions(NULL, NULL); //åˆ›å»ºä¸€ä¸ªå‡ºäº‹ä¿¡å·é‡ä¸º0çš„ä¿¡å· dispatch_semaphore_t sema=dispatch_semaphore_create(0); //ç”³è¯·è®¿é—®æƒé™ ABAddressBookRequestAccessWithCompletion(addBook, ^(bool greanted, CFErrorRef error) &#123; //greantedä¸ºYESæ˜¯è¡¨ç¤ºç”¨æˆ·å…è®¸ï¼Œå¦åˆ™ä¸ºä¸å…è®¸ if (!greanted) &#123; tip=1; &#125; //å‘é€ä¸€æ¬¡ä¿¡å· dispatch_semaphore_signal(sema); &#125;); //ç­‰å¾…ä¿¡å·è§¦å‘ dispatch_semaphore_wait(sema, DISPATCH_TIME_FOREVER); &#125;else&#123; //IOS6ä¹‹å‰ addBook =ABAddressBookCreate(); &#125; if (tip) &#123; //åšä¸€ä¸ªå‹å¥½çš„æç¤º UIAlertView * alart = [[UIAlertView alloc]initWithTitle:@&quot;æ¸©é¦¨æç¤º&quot; message:@&quot;è¯·æ‚¨è®¾ç½®å…è®¸APPè®¿é—®æ‚¨çš„é€šè®¯å½•\\nSettings&gt;General&gt;Privacy&quot; delegate:self cancelButtonTitle:@&quot;ç¡®å®š&quot; otherButtonTitles:nil, nil]; [alart show]; return; &#125; å‡ ç‚¹æ³¨æ„ï¼š1ã€dispatch_semaphore_tä¸‰ä¸ªç›¸å…³çš„æ“ä½œä¸º dispatch_semaphore_create åˆ›å»ºä¸€ä¸ªä¿¡å· dispatch_semaphore_signal å‘é€ä¸€ä¸ªä¿¡å· dispatch_semaphore_wait ç­‰å¾…ä¿¡å·è§¦å‘ dispatch_semaphore_create()åˆ›å»ºä¸€ä¸ªä¿¡å·ï¼Œåé¢å¯ä»¥è·Ÿä¸€ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºä¿¡å·é‡ï¼Œå½“ä¿¡å·é‡æ­£å€¼æ—¶ï¼Œdispatch_semaphore_waitåé¢çš„ä»£ç ä¼šè¢«æ‰§è¡Œï¼Œå¦åˆ™ç¨‹åºå°†ä¼šä¸€ç›´ç­‰å¾…åœ¨dispatch_semaphore_waitã€‚ dispatch_semaphore_signalçš„ä½œç”¨æ˜¯å‘é€ä¸€ä¸ªä¿¡å·ï¼Œä¼šä½¿ä¿¡å·é‡åŠ 1ï¼Œç›¸å¯¹çš„ï¼Œdispatch_semaphore_waitæ‰§è¡Œåä¼šä½¿ä¿¡å·é‡å‡1. 2ã€å› ä¸ºæ˜¯å¦è¢«æˆæƒæ˜¯åœ¨ABAddressBookRequestAccessWithCompletionçš„blockå›è°ƒä¸­è·å–çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨å¤–é¢åšä¸€ä¸ªçº¿ç¨‹ç­‰å¾…ã€‚ äºŒã€è·å–é€šè®¯å½•è”ç³»äººè¯¦ç»†ä¿¡æ¯1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374 //è·å–æ‰€æœ‰è”ç³»äººçš„æ•°ç»„ CFArrayRef allLinkPeople = ABAddressBookCopyArrayOfAllPeople(addBook); //è·å–è”ç³»äººæ€»æ•° CFIndex number = ABAddressBookGetPersonCount(addBook); //è¿›è¡Œéå† for (NSInteger i=0; i&lt;number; i++) &#123; //è·å–è”ç³»äººå¯¹è±¡çš„å¼•ç”¨ ABRecordRef people = CFArrayGetValueAtIndex(allLinkPeople, i); //è·å–å½“å‰è”ç³»äººåå­— NSString*firstName=(__bridge NSString *)(ABRecordCopyValue(people, kABPersonFirstNameProperty)); //è·å–å½“å‰è”ç³»äººå§“æ° NSString*lastName=(__bridge NSString *)(ABRecordCopyValue(people, kABPersonLastNameProperty)); //è·å–å½“å‰è”ç³»äººä¸­é—´å NSString*middleName=(__bridge NSString*)(ABRecordCopyValue(people, kABPersonMiddleNameProperty)); //è·å–å½“å‰è”ç³»äººçš„åå­—å‰ç¼€ NSString*prefix=(__bridge NSString*)(ABRecordCopyValue(people, kABPersonPrefixProperty)); //è·å–å½“å‰è”ç³»äººçš„åå­—åç¼€ NSString*suffix=(__bridge NSString*)(ABRecordCopyValue(people, kABPersonSuffixProperty)); //è·å–å½“å‰è”ç³»äººçš„æ˜µç§° NSString*nickName=(__bridge NSString*)(ABRecordCopyValue(people, kABPersonNicknameProperty)); //è·å–å½“å‰è”ç³»äººçš„åå­—æ‹¼éŸ³ NSString*firstNamePhoneic=(__bridge NSString*)(ABRecordCopyValue(people, kABPersonFirstNamePhoneticProperty)); //è·å–å½“å‰è”ç³»äººçš„å§“æ°æ‹¼éŸ³ NSString*lastNamePhoneic=(__bridge NSString*)(ABRecordCopyValue(people, kABPersonLastNamePhoneticProperty)); //è·å–å½“å‰è”ç³»äººçš„ä¸­é—´åæ‹¼éŸ³ NSString*middleNamePhoneic=(__bridge NSString*)(ABRecordCopyValue(people, kABPersonMiddleNamePhoneticProperty)); //è·å–å½“å‰è”ç³»äººçš„å…¬å¸ NSString*organization=(__bridge NSString*)(ABRecordCopyValue(people, kABPersonOrganizationProperty)); //è·å–å½“å‰è”ç³»äººçš„èŒä½ NSString*job=(__bridge NSString*)(ABRecordCopyValue(people, kABPersonJobTitleProperty)); //è·å–å½“å‰è”ç³»äººçš„éƒ¨é—¨ NSString*department=(__bridge NSString*)(ABRecordCopyValue(people, kABPersonDepartmentProperty)); //è·å–å½“å‰è”ç³»äººçš„ç”Ÿæ—¥ NSString*birthday=(__bridge NSDate*)(ABRecordCopyValue(people, kABPersonBirthdayProperty)); NSMutableArray * emailArr = [[NSMutableArray alloc]init]; //è·å–å½“å‰è”ç³»äººçš„é‚®ç®± æ³¨æ„æ˜¯æ•°ç»„ ABMultiValueRef emails= ABRecordCopyValue(people, kABPersonEmailProperty); for (NSInteger j=0; j&lt;ABMultiValueGetCount(emails); j++) &#123; [emailArr addObject:(__bridge NSString *)(ABMultiValueCopyValueAtIndex(emails, j))]; &#125; //è·å–å½“å‰è”ç³»äººçš„å¤‡æ³¨ NSString*notes=(__bridge NSString*)(ABRecordCopyValue(people, kABPersonNoteProperty)); //è·å–å½“å‰è”ç³»äººçš„ç”µè¯ æ•°ç»„ NSMutableArray * phoneArr = [[NSMutableArray alloc]init]; ABMultiValueRef phones= ABRecordCopyValue(people, kABPersonPhoneProperty); for (NSInteger j=0; j&lt;ABMultiValueGetCount(phones); j++) &#123; [phonerr addObject:(__bridge NSString *)(ABMultiValueCopyValueAtIndex(phones, j))]; &#125; //è·å–åˆ›å»ºå½“å‰è”ç³»äººçš„æ—¶é—´ æ³¨æ„æ˜¯NSDate NSDate*creatTime=(__bridge NSDate*)(ABRecordCopyValue(people, kABPersonCreationDateProperty)); //è·å–æœ€è¿‘ä¿®æ”¹å½“å‰è”ç³»äººçš„æ—¶é—´ NSDate*alterTime=(__bridge NSDate*)(ABRecordCopyValue(people, kABPersonModificationDateProperty)); //è·å–åœ°å€ ABMultiValueRef address = ABRecordCopyValue(people, kABPersonAddressProperty); for (int j=0; j&lt;ABMultiValueGetCount(address); j++) &#123; //åœ°å€ç±»å‹ NSString * type = (__bridge NSString *)(ABMultiValueCopyLabelAtIndex(address, j)); NSDictionary * temDic = (__bridge NSDictionary *)(ABMultiValueCopyValueAtIndex(address, j)); //åœ°å€å­—ç¬¦ä¸²ï¼Œå¯ä»¥æŒ‰éœ€æ±‚æ ¼å¼åŒ– NSString * adress = [NSString stringWithFormat:@&quot;å›½å®¶:%@\\nçœ:%@\\nå¸‚:%@\\nè¡—é“:%@\\né‚®ç¼–:%@&quot;,[temDic valueForKey:(NSString*)kABPersonAddressCountryKey],[temDic valueForKey:(NSString*)kABPersonAddressStateKey],[temDic valueForKey:(NSString*)kABPersonAddressCityKey],[temDic valueForKey:(NSString*)kABPersonAddressStreetKey],[temDic valueForKey:(NSString*)kABPersonAddressZIPKey]]; &#125; //è·å–å½“å‰è”ç³»äººå¤´åƒå›¾ç‰‡ NSData*userImage=(__bridge NSData*)(ABPersonCopyImageData(people)); //è·å–å½“å‰è”ç³»äººçºªå¿µæ—¥ NSMutableArray * dateArr = [[NSMutableArray alloc]init]; ABMultiValueRef dates= ABRecordCopyValue(people, kABPersonDateProperty); for (NSInteger j=0; j&lt;ABMultiValueGetCount(dates); j++) &#123; //è·å–çºªå¿µæ—¥æ—¥æœŸ NSDate * data =(__bridge NSDate*)(ABMultiValueCopyValueAtIndex(dates, j)); //è·å–çºªå¿µæ—¥åç§° NSString * str =(__bridge NSString*)(ABMultiValueCopyLabelAtIndex(dates, j)); NSDictionary * temDic = [NSDictionary dictionaryWithObject:data forKey:str]; [dateArr addObject:temDic]; &#125; ä¸€ç‚¹æ‰©å±•ï¼šç›¸åŒçš„æ–¹æ³•ï¼Œå¯ä»¥è·å–å…³è”äººä¿¡æ¯ï¼Œç¤¾äº¤ä¿¡æ¯ï¼Œé‚®ç®±ä¿¡æ¯ï¼Œå„ç§ç±»å‹çš„ç”µè¯ä¿¡æ¯ï¼Œå­—æ®µå¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546 //ç›¸å…³äººï¼Œç»„ç»‡å­—æ®µconst ABPropertyID kABPersonKindProperty; const CFNumberRef kABPersonKindPerson;const CFNumberRef kABPersonKindOrganization;// ç”µè¯ç›¸å…³å­—æ®µAB_EXTERN const ABPropertyID kABPersonPhoneProperty;AB_EXTERN const CFStringRef kABPersonPhoneMobileLabel;AB_EXTERN const CFStringRef kABPersonPhoneIPhoneLabel AB_EXTERN const CFStringRef kABPersonPhoneMainLabel;AB_EXTERN const CFStringRef kABPersonPhoneHomeFAXLabel;AB_EXTERN const CFStringRef kABPersonPhoneWorkFAXLabel;AB_EXTERN const CFStringRef kABPersonPhoneOtherFAXLabelAB_EXTERN const CFStringRef kABPersonPhonePagerLabel;// å³æ—¶èŠå¤©ä¿¡æ¯ç›¸å…³å­—æ®µAB_EXTERN const ABPropertyID kABPersonInstantMessageProperty; AB_EXTERN const CFStringRef kABPersonInstantMessageServiceKey; AB_EXTERN const CFStringRef kABPersonInstantMessageServiceYahoo;AB_EXTERN const CFStringRef kABPersonInstantMessageServiceJabber;AB_EXTERN const CFStringRef kABPersonInstantMessageServiceMSN;AB_EXTERN const CFStringRef kABPersonInstantMessageServiceICQ;AB_EXTERN const CFStringRef kABPersonInstantMessageServiceAIM;AB_EXTERN const CFStringRef kABPersonInstantMessageServiceQQ AB_EXTERN const CFStringRef kABPersonInstantMessageServiceGoogleTalk;AB_EXTERN const CFStringRef kABPersonInstantMessageServiceSkype;AB_EXTERN const CFStringRef kABPersonInstantMessageServiceFacebook;AB_EXTERN const CFStringRef kABPersonInstantMessageServiceGaduGadu;AB_EXTERN const CFStringRef kABPersonInstantMessageUsernameKey; // ä¸ªäººç½‘é¡µç›¸å…³å­—æ®µAB_EXTERN const ABPropertyID kABPersonURLProperty;AB_EXTERN const CFStringRef kABPersonHomePageLabel; //ç›¸å…³äººå§“åå­—æ®µAB_EXTERN const ABPropertyID kABPersonRelatedNamesProperty; AB_EXTERN const CFStringRef kABPersonFatherLabel; // FatherAB_EXTERN const CFStringRef kABPersonMotherLabel; // MotherAB_EXTERN const CFStringRef kABPersonParentLabel; // ParentAB_EXTERN const CFStringRef kABPersonBrotherLabel; // BrotherAB_EXTERN const CFStringRef kABPersonSisterLabel; // SisterAB_EXTERN const CFStringRef kABPersonChildLabel; // ChildAB_EXTERN const CFStringRef kABPersonFriendLabel; // FriendAB_EXTERN const CFStringRef kABPersonSpouseLabel; // SpouseAB_EXTERN const CFStringRef kABPersonPartnerLabel; // PartnerAB_EXTERN const CFStringRef kABPersonAssistantLabel; // AssistantAB_EXTERN const CFStringRef kABPersonManagerLabel; // Manager ä¸‰ã€é€šè®¯å½•â€œå†™â€çš„ç›¸å…³æ“ä½œçœ‹åˆ°ä¸Šé¢è¯»å–ä¿¡æ¯çš„ä»£ç ï¼Œä½ å¯èƒ½è§‰å¾—ä¸€é˜µç›®ç‚«ï¼Œå…¶å®åªæ˜¯å­—æ®µæ¯”è¾ƒé•¿ï¼Œé€»è¾‘è¿˜æ˜¯å¾ˆç®€å•çš„ï¼ŒåŒæ ·ï¼Œå†™çš„æ“ä½œä¸ä¹‹ç±»ä¼¼ï¼Œåˆ›å»ºï¼Œä¿®æ”¹ï¼Œåˆ é™¤ï¼Œæ˜¯æˆ‘ä»¬å¯¹é€šè®¯å½•â€œå†™â€çš„å¸¸ç”¨æ“ä½œã€‚ 1ã€åˆ›å»ºä¸€ä¸ªè”ç³»äºº123456789101112131415161718192021222324252627 //åˆ›å»ºä¸€ä¸ªè”ç³»äººå¼•ç”¨ ABRecordRef person = ABPersonCreate(); NSString *firstName = @&quot;å“ˆ&quot;; NSString *lastName = @&quot;å“ˆ&quot;; // ç”µè¯å·ç æ•°ç»„ NSArray *phones = [NSArray arrayWithObjects:@&quot;123&quot;,@&quot;456&quot;,nil]; // ç”µè¯å·ç å¯¹åº”çš„åç§° NSArray *labels = [NSArray arrayWithObjects:@&quot;iphone&quot;,@&quot;home&quot;,nil]; //è¿™é‡Œçš„å­—æ®µå’Œä¸Šé¢çš„å­—æ®µå®Œå…¨ç›¸åŒ // è®¾ç½®åå­—å±æ€§ ABRecordSetValue(person, kABPersonFirstNameProperty,(__bridge CFStringRef)firstName, NULL); // è®¾ç½®å§“æ°å±æ€§ ABRecordSetValue(person, kABPersonLastNameProperty, (__bridge CFStringRef)lastName, NULL); // è®¾ç½®ç”Ÿæ—¥å±æ€§ ABRecordSetValue(person, kABPersonBirthdayProperty,(__bridge CFDateRef)birthday, NULL); // å­—å…¸å¼•ç”¨ ABMultiValueRef dic =ABMultiValueCreateMutable(kABMultiStringPropertyType); // æ·»åŠ ç”µè¯å·ç ä¸å…¶å¯¹åº”çš„åç§°å†…å®¹ for (int i = 0; i &lt; [phones count]; i ++) &#123; ABMultiValueIdentifier obj = ABMultiValueAddValueAndLabel(dic,(__bridge CFStringRef)[phones objectAtIndex:i], (__bridge CFStringRef)[labels objectAtIndex:i], &amp;obj); &#125; // è®¾ç½®phoneå±æ€§ ABRecordSetValue(person, kABPersonPhoneProperty, dic, NULL); // å°†æ–°å»ºçš„è”ç³»äººæ·»åŠ åˆ°é€šè®¯å½•ä¸­ ABAddressBookAddRecord(addBook, person, NULL); // ä¿å­˜é€šè®¯å½•æ•°æ® ABAddressBookSave(addBook, NULL); 2ã€ä¿®æ”¹è”ç³»äººä¿®æ”¹è”ç³»äººçš„æ“ä½œå°±æ˜¯å°†è·å–å’Œæ·»åŠ å’Œåœ¨ä¸€èµ·ï¼Œå…ˆè·å–åˆ°ç›¸åº”çš„è”ç³»äººå¼•ç”¨ï¼Œé‡è®¾å…¶å±æ€§å­—æ®µå³å¯ã€‚ 3.åˆ é™¤è”ç³»äºº12345678910111213 //è·å–æ‰€æœ‰è”ç³»äºº NSArray *array = (__bridge NSArray*)ABAddressBookCopyArrayOfAllPeople(addBook); // éå†æ‰€æœ‰çš„è”ç³»äºº for (id obj in array) &#123; ABRecordRef people = (__bridge ABRecordRef)obj; NSString *firstName = (__bridge NSString*)ABRecordCopyValue(people, kABPersonFirstNameProperty); NSString *lastName = (__bridge NSString*)ABRecordCopyValue(people, kABPersonLastNameProperty); if ([firstName isEqualToString:@&quot;å“ˆ&quot;] &amp;&amp;[lastName isEqualToString:@&quot;å“ˆ&quot;]) &#123; ABAddressBookRemoveRecord(addBook, people,NULL); &#125; &#125; // ä¿å­˜ä¿®æ”¹çš„é€šè®¯å½•å¯¹è±¡ ABAddressBookSave(addBook, NULL); å››ã€é‡ä¸­ä¹‹é‡-å…³äºå†…å­˜ç®¡ç†ä¸Šé¢çš„ä»£ç ä¸ºäº†æ¼”ç¤ºæ–¹ä¾¿ï¼Œåˆ›å»ºçš„å…¨éƒ¨å¼•ç”¨éƒ½æ²¡æœ‰é‡Šæ”¾ï¼ŒåŠ¿å¿…æ˜¯é€ æˆå†…å­˜æ³„éœ²ï¼Œåœ¨æˆ‘ä»¬ç”¨ABAddressBookCreate()åˆ›å»ºä¸€ä¸ªå¼•ç”¨å¯¹è±¡æ—¶ï¼Œåˆ‡è®°æ— è®ºARCè¿˜MRCï¼Œè¦ç”¨CFRelease()è¿›è¡Œé‡Šæ”¾å¼•ç”¨ï¼Œä¾‹å¦‚ä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬éœ€è¦åŠ ä¸Šè¿™å¥ä»£ç  CFRelease(addBook); å¦‚æœä½ è€å¿ƒçš„çœ‹åˆ°äº†è¿™é‡Œï¼Œæˆ‘æƒ³ä½ ä¸€å®šæ˜ç™½äº†æˆ‘ä¸ºä»€ä¹ˆä¸åœ¨å‰è¾¹çš„ä»£ç é‡Œè¯´æ˜è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºåœ¨ARCé¡¹ç›®æ™®åŠçš„ç°åœ¨ï¼Œè¿™çš„ç¡®æ˜¯é‡ä¸­ä¹‹é‡ã€‚ ç–æ¼ä¹‹å¤„ æ¬¢è¿æŒ‡æ­£ å­¦ä¹ ä½¿ç”¨ æ¬¢è¿è½¬è½½ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSä¸­JSONæ•°æ®çš„è§£æ","slug":"35iOSä¸­JSONæ•°æ®çš„è§£æ","date":"2015-04-26T16:00:00.000Z","updated":"2021-06-21T08:23:28.466Z","comments":true,"path":"2015/04/27/35iOSä¸­JSONæ•°æ®çš„è§£æ/","link":"","permalink":"http://huishao.cc/2015/04/27/35iOSä¸­JSONæ•°æ®çš„è§£æ/","excerpt":"","text":"iOSä¸­JSONæ•°æ®è§£æå®˜æ–¹ä¸ºæˆ‘ä»¬æä¾›çš„è§£æJSONæ•°æ®çš„ç±»æ˜¯NSJSONSerializationï¼Œé¦–å…ˆæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹è¿™ä¸ªç±»çš„å‡ ä¸ªæ–¹æ³•ï¼š + (BOOL)isValidJSONObject:(id)obj; åˆ¤æ–­ä¸€ä¸ªæ•°æ®å¯¹è±¡æ˜¯å¦å¯ä»¥è½¬åŒ–ä¸ºJSONæ•°æ® + (NSData *)dataWithJSONObject:(id)obj options:(NSJSONWritingOptions)opt error:(NSError **)error; å°†JSONæ•°æ®å†™ä¸ºNSDataæ•°æ®ï¼Œå…¶ä¸­optå‚æ•°çš„æšä¸¾å¦‚ä¸‹ï¼Œè¿™ä¸ªå‚æ•°å¯ä»¥è®¾ç½®ï¼Œä¹Ÿå¯ä»¥ä¸è®¾ç½®ï¼Œå¦‚æœè®¾ç½®ï¼Œåˆ™ä¼šè¾“å‡ºè§†è§‰ç¾è§‚çš„JSONæ•°æ®ï¼Œå¦åˆ™è¾“å‡ºç´§å‡‘çš„JSONæ•°æ®ã€‚ 123typedef NS_OPTIONS(NSUInteger, NSJSONWritingOptions) &#123; NSJSONWritingPrettyPrinted = (1UL &lt;&lt; 0)&#125; + (id)JSONObjectWithData:(NSData *)data options:(NSJSONReadingOptions)opt error:(NSError **)error; è¿™ä¸ªæ–¹æ³•æ˜¯è§£æä¸­æ•°æ®çš„æ ¸å¿ƒæ–¹æ³•ï¼Œdataæ˜¯JSONæ•°æ®å¯¹è±¡ï¼Œå¯ä»¥è®¾ç½®ä¸€ä¸ªoptå‚æ•°ï¼Œå…·ä½“ç”¨æ³•å¦‚ä¸‹ï¼š 12345678typedef NS_OPTIONS(NSUInteger, NSJSONReadingOptions) &#123; //å°†è§£æçš„æ•°ç»„å’Œå­—å…¸è®¾ç½®ä¸ºå¯å˜å¯¹è±¡ NSJSONReadingMutableContainers = (1UL &lt;&lt; 0), //å°†è§£ææ•°æ®çš„å­èŠ‚ç‚¹åˆ›å»ºä¸ºå¯å˜å­—ç¬¦ä¸²å¯¹è±¡ NSJSONReadingMutableLeaves = (1UL &lt;&lt; 1), //å…è®¸è§£æå¯¹è±¡çš„æœ€ä¸Šå±‚ä¸æ˜¯å­—å…¸æˆ–è€…æ•°ç»„ NSJSONReadingAllowFragments = (1UL &lt;&lt; 2)&#125; + (NSInteger)writeJSONObject:(id)obj toStream:(NSOutputStream *)stream options:(NSJSONWritingOptions)opt error:(NSError **)error; å°†JSONæ•°æ®å†™å…¥åˆ°è¾“å‡ºæµï¼Œè¿”å›çš„æ˜¯å†™å…¥æµçš„å­—èŠ‚æ•° + (id)JSONObjectWithStream:(NSInputStream *)stream options:(NSJSONReadingOptions)opt error:(NSError **)error; ä»è¾“å…¥æµè¯»å–JSONæ•°æ® ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOS(CGGeometry)å‡ ä½•ç±»æ–¹æ³•æ€»ç»“","slug":"36iOS(CGGeometry)å‡ ä½•ç±»æ–¹æ³•æ€»ç»“","date":"2015-04-26T16:00:00.000Z","updated":"2021-06-21T08:32:55.866Z","comments":true,"path":"2015/04/27/36iOS(CGGeometry)å‡ ä½•ç±»æ–¹æ³•æ€»ç»“/","link":"","permalink":"http://huishao.cc/2015/04/27/36iOS(CGGeometry)å‡ ä½•ç±»æ–¹æ³•æ€»ç»“/","excerpt":"","text":"iOSå¼€å‘å‡ ä½•ç±»æ–¹æ³•æ€»ç»“CGGeometry.hæ–‡ä»¶æ˜¯ç”¨Cè¯­è¨€å®ç°çš„ä¸€ä¸ªå°è£…äº†è®¸å¤šå¸¸ç”¨å‡ ä½•æ–¹æ³•çš„æ–‡ä»¶ã€‚ ä¸€ã€å‡ ä¸ªå¸¸ç”¨ç»“æ„ä½“struct CGPoint { CGFloat x; CGFloat y; }; å®šä¹‰ä¸€ä¸ªç‚¹ï¼Œè®¾ç½®xåæ ‡å’Œyåæ ‡ struct CGSize { CGFloat width; CGFloat height; }; å®šä¹‰ä¸€ä¸ªå°ºå¯¸ï¼Œè®¾ç½®å®½åº¦å’Œé«˜åº¦ struct CGVector { CGFloat dx; CGFloat dy; }; å®šä¹‰ä¸€ä¸ªäºŒç»´çŸ¢é‡ struct CGRect { CGPoint origin; CGSize size; }; å®šä¹‰ä¸€ä¸ªçŸ©å½¢ äºŒã€å‡ ä¸ªç³»ç»Ÿå®šä¹‰çš„é‡const CGPoint CGPointZero é›¶ç‚¹ï¼Œä¸CGPointMake(0, 0)ç­‰æ•ˆ const CGSize CGSizeZero é›¶å°ºå¯¸ï¼Œä¸CGSizeMake(0, 0)ç­‰æ•ˆ const CGRect CGRectZero é›¶çŸ©å½¢ï¼Œä¸CGRectMake(0, 0, 0, 0)ç­‰æ•ˆ const CGRect CGRectNull ç©ºçŸ©å½¢ï¼Œè¿™ä¸ªå’Œé›¶çŸ©å½¢å¹¶ä¸ç›¸åŒï¼Œå½“æˆ‘ä»¬è¿”å›ä¸¤ä¸ªä¸ç›¸äº¤çŸ©å½¢çš„äº¤é›†æ—¶ï¼Œä¼šè¿”å›ç©ºçŸ©å½¢ã€‚ const CGRect CGRectInfinite æ— é™çš„çŸ©å½¢ ä¸‰ã€ä¸€äº›å¸¸ç”¨æ–¹æ³•CGPoint CGPointMake(CGFloat x, CGFloat y); åˆ›å»ºä¸€ä¸ªç‚¹ CGSize CGSizeMake(CGFloat width, CGFloat height); åˆ›å»ºä¸€ä¸ªå°ºå¯¸ CGVectorMake(CGFloat dx, CGFloat dy); åˆ›å»ºä¸€ä¸ªçŸ¢é‡ CGRect CGRectMake(CGFloat x, CGFloat y, CGFloat width, CGFloat height); åˆ›å»ºä¸€ä¸ªçŸ©å½¢ CGFloat CGRectGetMinX(CGRect rect); è·å¾—çŸ©å½¢æœ€å·¦è¾¹çš„xå€¼ CGFloat CGRectGetMidX(CGRect rect); è·å–çŸ©å½¢ä¸­ç‚¹çš„xå€¼ CGFloat CGRectGetMaxX(CGRect rect); è·å–çŸ©å½¢æœ€å³ç«¯çš„xå€¼ CGFloat CGRectGetMinY(CGRect rect); è·å–çŸ©å½¢æœ€ä¸Šç«¯çš„yå€¼ CGFloat CGRectGetMidY(CGRect rect); è·å–çŸ©å½¢ä¸­å¿ƒç‚¹çš„yå€¼ CGFloat CGRectGetMaxY(CGRect rect); è·å–çŸ©å½¢æœ€ä¸‹ç«¯çš„yå€¼ CGFloat CGRectGetWidth(CGRect rect); è·å–çŸ©å½¢å®½åº¦ CGFloat CGRectGetHeight(CGRect rect); è·å–çŸ©å½¢é«˜åº¦ bool CGPointEqualToPoint(CGPoint point1, CGPoint point2); åˆ¤æ–­ä¸¤ä¸ªç‚¹æ˜¯å¦ç›¸ç­‰ bool CGSizeEqualToSize(CGSize size1, CGSize size2); åˆ¤æ–­ä¸¤ä¸ªå°ºå¯¸æ˜¯å¦ç›¸ç­‰ bool CGRectEqualToRect(CGRect rect1, CGRect rect2); åˆ¤æ–­ä¸¤ä¸ªçŸ©å½¢æ˜¯å¦ç›¸ç­‰ CGRect CGRectStandardize(CGRect rect); æ ¹æ®ä¸€ä¸ªçŸ©å½¢åˆ›å»ºä¸€ä¸ªæ ‡å‡†çš„çŸ©å½¢ bool CGRectIsEmpty(CGRect rect); åˆ¤æ–­æ˜¯å¦ä¸ºé›¶çŸ©å½¢ CGRectIsNull(CGRect rect); åˆ¤æ–­æ˜¯å¦ä¸ºç©ºçŸ©å½¢ bool CGRectIsInfinite(CGRect rect); åˆ¤æ–­æ˜¯å¦ä¸ºæ— é™çŸ©å½¢ CGRect CGRectInset(CGRect rect, CGFloat dx, CGFloat dy); åˆ›å»ºä¸€ä¸ªå†…åµŒçš„çŸ©å½¢ï¼Œä¸­å¿ƒå’Œrectå‚æ•°çš„ä¸­å¿ƒä¸€æ ·ï¼Œdxï¼Œdyå¯¹åº”å†…åµŒçš„å®½åº¦å’Œé«˜åº¦ æ¯”å¦‚ï¼šCGRect rect= CGRectInset(CGRectMake(0, 0, 100, 100), 10, 10); ä¼šåˆ›å»ºå‡ºçš„rectä¸ºï¼ˆ10ï¼Œ10ï¼Œ80ï¼Œ80ï¼‰ï¼Œdxï¼Œdyä¹Ÿå¯ä»¥ä¸ºè´Ÿå€¼ï¼Œåˆ™æ˜¯åˆ›å»ºå‡ºæ¥çš„çŸ©å½¢ä¼šå¤§äºåŸçŸ©å½¢èŒƒå›´ã€‚ CGRect CGRectIntegral(CGRect rect) æ ¹æ®ä¸€ä¸ªçŸ©å½¢ï¼Œè¿”å›å››ä¸ªå‚æ•°éƒ½æ˜¯æ•´æ•°çš„çŸ©å½¢ CGRect CGRectUnion(CGRect r1, CGRect r2); è¿”å›ä¸¤ä¸ªçŸ©å½¢çš„å¹¶é›† CGRect CGRectIntersection(CGRect r1, CGRect r2); è¿”å›ä¸¤ä¸ªçŸ©å½¢çš„äº¤é›†ï¼Œå¦‚æœæ²¡æœ‰äº¤é›†ï¼Œè¿”å›ç©ºçŸ©å½¢ CGRect CGRectOffset(CGRect rect, CGFloat dx, CGFloat dy); è¿”å›ä¸€ä¸ªçŸ©å½¢ï¼Œåç§»é‡ç›¸å¯¹äºrect void CGRectDivide(CGRect rect, CGRect slice, CGRect remainder, CGFloat amount, CGRectEdge edge); è¿™ä¸ªå‡½æ•°ç”¨æ¥åˆ†å‰²çŸ©å½¢ï¼Œå‚æ•°rectæ˜¯æºçŸ©å½¢ï¼Œsliceå’Œremainderæ˜¯åˆ†å‰²åçš„ä¸¤éƒ¨åˆ†çŸ©å½¢ï¼Œamountæ˜¯åˆ†å‰²çº¿ï¼Œedgeæ˜¯åˆ†å‰²é€‰é¡¹ã€‚ æ³¨æ„ï¼š1ã€edgeæ˜¯ä¸€ä¸ªå®ï¼Œå®šä¹‰äº†åˆ†å‰²çš„æ–¹å¼å¦‚ä¸‹ï¼š 12345678910typedef CF_ENUM(uint32_t, CGRectEdge) &#123; //ä»xçš„æœ€å°å¤„è¿›è¡Œå‚ç›´åˆ†å‰² CGRectMinXEdge, //ä»yçš„æœ€å°å¤„è¿›è¡Œæ°´å¹³åˆ†å‰² CGRectMinYEdge, //ä»xæœ€å¤§å¤„è¿›è¡Œå‚ç›´åˆ†å‰² CGRectMaxXEdge, //ä»yæœ€å¤§å¤„è¿›è¡Œæ°´å¹³åˆ†å‰² CGRectMaxYEdge&#125;; 2ã€sliceå’Œremainderæ˜¯åœ°å€ã€‚ 3ã€ä¸¾ä¾‹å¦‚ä¸‹ï¼Œå°†ä¼šåˆ†å‰²å‡ºä¸¤ä¸ªçŸ©å½¢åˆ†åˆ«ä¸º(40,0,60,100)(0,0,40,100); 1234CGRect rect = CGRectMake(0, 0, 100, 100); CGRect slice ; CGRect remainder; CGRectDivide(rect, &amp;slice, &amp;remainder, 60, CGRectMaxXEdge); bool CGRectContainsPoint(CGRect rect, CGPoint point); åˆ¤æ–­ç‚¹æ˜¯å¦åœ¨çŸ©å½¢å†… bool CGRectContainsRect(CGRect rect1, CGRect rect2); åˆ¤æ–­çŸ©å½¢1æ˜¯å¦åŒ…å«çŸ©å½¢2 bool CGRectIntersectsRect(CGRect rect1, CGRect rect2); åˆ¤æ–­çŸ©å½¢1å’ŒçŸ©å½¢2æ˜¯å¦ç›¸äº¤ CFDictionaryRef CGPointCreateDictionaryRepresentation(CGPoint point); è¿”å›ä¸€ä¸ªè¡¨ç¤ºç‚¹çš„å­—å…¸ bool CGPointMakeWithDictionaryRepresentation(CFDictionaryRef dict, CGPoint *point); å°†å­—å…¸è½¬æ¢ä¸ºç‚¹ CFDictionaryRef CGSizeCreateDictionaryRepresentation(CGSize size); è¿”å›ä¸€ä¸ªè¡¨ç¤ºå°ºå¯¸çš„å­—å…¸ bool CGSizeMakeWithDictionaryRepresentation(CFDictionaryRef dict, CGSize *size) ; å°†å­—å…¸è½¬æ¢ä¸ºå°ºå¯¸ CFDictionaryRef CGRectCreateDictionaryRepresentation(CGRect); è¿”å›ä¸€ä¸ªè¡¨ç¤ºçŸ©å½¢çš„å­—å…¸ bool CGRectMakeWithDictionaryRepresentation(CFDictionaryRef dict, CGRect *rect); å°†å­—å…¸è½¬åŒ–ä¸ºçŸ©å½¢ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSä¸­ä½¿ç”¨åƒç´ ä½å›¾(CGImageRef)å¯¹å›¾ç‰‡è¿›è¡Œå¤„ç†","slug":"34iOSä¸­ä½¿ç”¨åƒç´ ä½å›¾(CGImageRef)å¯¹å›¾ç‰‡è¿›è¡Œå¤„ç†","date":"2015-04-25T16:00:00.000Z","updated":"2021-06-21T05:51:24.579Z","comments":true,"path":"2015/04/26/34iOSä¸­ä½¿ç”¨åƒç´ ä½å›¾(CGImageRef)å¯¹å›¾ç‰‡è¿›è¡Œå¤„ç†/","link":"","permalink":"http://huishao.cc/2015/04/26/34iOSä¸­ä½¿ç”¨åƒç´ ä½å›¾(CGImageRef)å¯¹å›¾ç‰‡è¿›è¡Œå¤„ç†/","excerpt":"","text":"iOSä¸­å¯¹å›¾ç‰‡è¿›è¡Œé‡ç»˜å¤„ç†çš„æ–¹æ³•æ€»ç»“ä¸€ã€CGImageRefæ˜¯ä»€ä¹ˆCGImageRefæ˜¯å®šä¹‰åœ¨QuartzCoreæ¡†æ¶ä¸­çš„ä¸€ä¸ªç»“æ„ä½“æŒ‡é’ˆï¼Œç”¨Cè¯­è¨€ç¼–å†™ã€‚åœ¨CGImage.hæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸‹é¢çš„å®šä¹‰ï¼š 1typedef struct CGImage *CGImageRef; CGImageRef å’Œ struct CGImage * æ˜¯å®Œå…¨ç­‰ä»·çš„ã€‚è¿™ä¸ªç»“æ„ç”¨æ¥åˆ›å»ºåƒç´ ä½å›¾ï¼Œå¯ä»¥é€šè¿‡æ“ä½œå­˜å‚¨çš„åƒç´ ä½æ¥ç¼–è¾‘å›¾ç‰‡ã€‚ QuartzCoreè¿™ä¸ªæ¡†æ¶æ˜¯å¯ç§»æ¤çš„ã€‚ äºŒã€CGImageRefç›¸å…³çš„ä¸€äº›æ–¹æ³•è§£æCFTypeID CGImageGetTypeID(void) è¿™ä¸ªæ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªç¼–å·ï¼Œæ¯ä¸ªCore Foundationæ¡†æ¶ä¸­å¾—ç»“æ„éƒ½ä¼šæœ‰ä¸€ä¸ªè¿™æ ·çš„ç¼–å·ï¼ŒCFTypeIDå®šä¹‰å¦‚ä¸‹ï¼š 1234567891011#if __LLP64__typedef unsigned long long CFTypeID;typedef unsigned long long CFOptionFlags;typedef unsigned long long CFHashCode;typedef signed long long CFIndex;#elsetypedef unsigned long CFTypeID;typedef unsigned long CFOptionFlags;typedef unsigned long CFHashCode;typedef signed long CFIndex;#endif è¿™ä¸ªæ–¹æ³•æ²¡æœ‰ç‰¹æ®Šçš„æ„ä¹‰ï¼Œåªæ˜¯ä¸€ä¸ªæ ‡è¯†ç¬¦ã€‚ CGImageRef CGImageCreate(size_t width, size_t height, size_t bitsPerComponent, size_t bitsPerPixel, size_t bytesPerRow, CGColorSpaceRef space, CGBitmapInfo bitmapInfo, CGDataProviderRef provider, const CGFloat decode\\[\\], bool shouldInterpolate, CGColorRenderingIntent intent); é€šè¿‡è¿™ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºå‡ºä¸€ä¸ªCGImageRefç±»å‹çš„å¯¹è±¡ï¼Œä¸‹é¢åˆ†åˆ«å¯¹å‚æ•°è¿›è¡Œè§£é‡Šï¼š sizt_tæ˜¯å®šä¹‰çš„ä¸€ä¸ªå¯ç§»æ¤æ€§çš„å•ä½ï¼Œåœ¨64ä½æœºå™¨ä¸­ä¸º8å­—èŠ‚ï¼Œ32ä½ä½4å­—èŠ‚ã€‚ widthï¼šå›¾ç‰‡å®½åº¦åƒç´  heightï¼šå›¾ç‰‡é«˜åº¦åƒç´  bitsPerComponentï¼šæ¯ä¸ªé¢œè‰²çš„æ¯”ç‰¹æ•°ï¼Œä¾‹å¦‚åœ¨rgba-32æ¨¡å¼ä¸‹ä¸º8 bitsPerPixelï¼šæ¯ä¸ªåƒç´ çš„æ€»æ¯”ç‰¹æ•° bytesPerRowï¼šæ¯ä¸€è¡Œå ç”¨çš„å­—èŠ‚æ•°ï¼Œæ³¨æ„è¿™é‡Œçš„å•ä½æ˜¯å­—èŠ‚ spaceï¼šé¢œè‰²ç©ºé—´æ¨¡å¼ï¼Œä¾‹å¦‚const CFStringRef kCGColorSpaceGenericRGB è¿™ä¸ªå‡½æ•°å¯ä»¥è¿”å›ä¸€ä¸ªé¢œè‰²ç©ºé—´å¯¹è±¡ã€‚ bitmapInfoï¼šä½å›¾åƒç´ å¸ƒå±€ï¼Œæšä¸¾å¦‚ä¸‹ï¼š 1234567891011typedef CF_OPTIONS(uint32_t, CGBitmapInfo) &#123; kCGBitmapAlphaInfoMask = 0x1F, kCGBitmapFloatComponents = (1 &lt;&lt; 8), kCGBitmapByteOrderMask = 0x7000, kCGBitmapByteOrderDefault = (0 &lt;&lt; 12), kCGBitmapByteOrder16Little = (1 &lt;&lt; 12), kCGBitmapByteOrder32Little = (2 &lt;&lt; 12), kCGBitmapByteOrder16Big = (3 &lt;&lt; 12), kCGBitmapByteOrder32Big = (4 &lt;&lt; 12)&#125; providerï¼šæ•°æ®æºæä¾›è€… decode[]ï¼šè§£ç æ¸²æŸ“æ•°ç»„ shouldInterpolateï¼šæ˜¯å¦æŠ—é”¯é½¿ intentï¼šå›¾ç‰‡ç›¸å…³å‚æ•° CGImageRef CGImageMaskCreate(size_t width, size_t height, size_t bitsPerComponent, size_t bitsPerPixel, size_t bytesPerRow, CGDataProviderRef provider, const CGFloat decode\\[\\], bool shouldInterpolate) è¿™ä¸ªæ–¹æ³•ç”¨äºåˆ›å»ºmaskå›¾ç‰‡å›¾å±‚ï¼Œå¯ä»¥è®¾ç½®å…¶æ˜¾ç¤ºéƒ¨åˆ†ä¸ä¸æ˜¾ç¤ºéƒ¨åˆ†è¾¾åˆ°ç‰¹æ®Šçš„æ•ˆæœï¼Œå‚æ•°æ„ä¹‰åŒä¸Šã€‚ CGImageRef CGImageCreateCopy(CGImageRef image) è¿™ä¸ªæ–¹æ³•å¯ä»¥å¤åˆ¶ä¸€ä¸ªCGImageRefå¯¹è±¡ CGImageRef CGImageCreateWithJPEGDataProvider(CGDataProviderRef source, const CGFloat decode\\[\\], bool shouldInterpolate, CGColorRenderingIntent intent) é€šè¿‡JPEGæ•°æ®æºè·å–å›¾åƒ CGImageRef CGImageCreateWithPNGDataProvider(CGDataProviderRef source, const CGFloat decode\\[\\], bool shouldInterpolate, CGColorRenderingIntent intent) é€šè¿‡PNGæ•°æ®æºè·å–å›¾åƒ CGImageRef CGImageCreateWithImageInRect(CGImageRef image, CGRect rect) æˆªå–å›¾åƒçš„ä¸€ä¸ªåŒºåŸŸé‡ç»˜å›¾åƒ CGImageRef CGImageCreateWithMask(CGImageRef image, CGImageRef mask) æˆªå–maskå›¾åƒçš„æŸä¸€åŒºåŸŸé‡ç»˜ CGImageRef CGImageCreateWithMaskingColors(CGImageRef image, const CGFloat components\\[\\]) é€šè¿‡é¢œè‰²åˆ†é‡æ•°ç»„åˆ›å»ºä½å›¾ CGImageRef CGImageCreateCopyWithColorSpace(CGImageRef image, CGColorSpaceRef space) é€šè¿‡é¢œè‰²ç©ºé—´æ¨¡å¼å¤åˆ¶ä½å›¾ CGImageRef CGImageRetain(CGImageRef image) å¼•ç”¨+1 void CGImageRelease(CGImageRef image) å¼•ç”¨-1 bool CGImageIsMask(CGImageRef image) è¿”å›æ˜¯å¦ä¸ºMaskå›¾å±‚ size_t CGImageGetWidth(CGImageRef image) è·å–å®½åº¦åƒç´  size_t CGImageGetHeight(CGImageRef image) è·å–é«˜åº¦åƒç´  ä¸‹é¢è¿™äº›æ–¹æ³•åˆ†åˆ«è·å–ç›¸åº”å±æ€§ size_t CGImageGetBitsPerComponent(CGImageRef image) size_t CGImageGetBitsPerPixel(CGImageRef image) size_t CGImageGetBytesPerRow(CGImageRef image) CGColorSpaceRef CGImageGetColorSpace(CGImageRef image)CG_EXTERN CGImageAlphaInfo CGImageGetAlphaInfo(CGImageRef image) CGDataProviderRef CGImageGetDataProvider(CGImageRef image) const CGFloat *CGImageGetDecode(CGImageRef image) bool CGImageGetShouldInterpolate(CGImageRef image) CGColorRenderingIntent CGImageGetRenderingIntent(CGImageRef image) CGBitmapInfo CGImageGetBitmapInfo(CGImageRef image) ä¸‰ã€åº”ç”¨ä¸¾ä¾‹ä½¿ç”¨CGImageRefè¿›è¡Œå›¾ç‰‡æˆªå– 12345678910 //åŸå›¾ç‰‡ UIImage * img = [UIImage imageNamed:@&quot;11.11.52.png&quot;]; //è½¬åŒ–ä¸ºä½å›¾ CGImageRef temImg = img.CGImage; //æ ¹æ®èŒƒå›´æˆªå›¾ temImg=CGImageCreateWithImageInRect(temImg, CGRectMake(0, 0, 100, 100)); //å¾—åˆ°æ–°çš„å›¾ç‰‡ UIImage *new = [UIImage imageWithCGImage:temImg]; //é‡Šæ”¾ä½å›¾å¯¹è±¡ CGImageRelease(temImg); æ³¨æ„ï¼šæœ€åå¿…é¡»è¦è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œå¦åˆ™ä¼šé€ æˆå†…å­˜æ³„éœ² 1 CGImageRelease(temImg) ç–æ¼ä¹‹å¤„ æ¬¢è¿æŒ‡æ­£ å­¦ä¹ ä½¿ç”¨ æ¬¢è¿è½¬è½½ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSä¸­é€šçŸ¥ä¸­å¿ƒ(NSNotificationCenter)çš„ä½¿ç”¨æ€»ç»“","slug":"33iOSä¸­é€šçŸ¥ä¸­å¿ƒ(NSNotificationCenter)çš„ä½¿ç”¨æ€»ç»“","date":"2015-04-24T16:00:00.000Z","updated":"2021-06-21T03:05:07.652Z","comments":true,"path":"2015/04/25/33iOSä¸­é€šçŸ¥ä¸­å¿ƒ(NSNotificationCenter)çš„ä½¿ç”¨æ€»ç»“/","link":"","permalink":"http://huishao.cc/2015/04/25/33iOSä¸­é€šçŸ¥ä¸­å¿ƒ(NSNotificationCenter)çš„ä½¿ç”¨æ€»ç»“/","excerpt":"","text":"iOSä¸­é€šçŸ¥ä¸­å¿ƒNSNotificationCenteråº”ç”¨æ€»ç»“ä¸€ã€äº†è§£å‡ ä¸ªç›¸å…³çš„ç±»1ã€NSNotificationè¿™ä¸ªç±»å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæ¶ˆæ¯å¯¹è±¡ï¼Œå…¶ä¸­æœ‰ä¸‰ä¸ªæˆå‘˜å˜é‡ã€‚ è¿™ä¸ªæˆå‘˜å˜é‡æ˜¯è¿™ä¸ªæ¶ˆæ¯å¯¹è±¡çš„å”¯ä¸€æ ‡è¯†ï¼Œç”¨äºè¾¨åˆ«æ¶ˆæ¯å¯¹è±¡ã€‚ @property (readonly, copy) NSString *name; è¿™ä¸ªæˆå‘˜å˜é‡å®šä¹‰ä¸€ä¸ªå¯¹è±¡ï¼Œå¯ä»¥ç†è§£ä¸ºé’ˆå¯¹æŸä¸€ä¸ªå¯¹è±¡çš„æ¶ˆæ¯ã€‚ @property (readonly, retain) id object; è¿™ä¸ªæˆå‘˜å˜é‡æ˜¯ä¸€ä¸ªå­—å…¸ï¼Œå¯ä»¥ç”¨å…¶æ¥è¿›è¡Œä¼ å€¼ã€‚ @property (readonly, copy) NSDictionary *userInfo; NSNotificationçš„åˆå§‹åŒ–æ–¹æ³•ï¼š - (instancetype)initWithName:(NSString )name object:(id)object userInfo:(NSDictionary )userInfo; + (instancetype)notificationWithName:(NSString *)aName object:(id)anObject; + (instancetype)notificationWithName:(NSString )aName object:(id)anObject userInfo:(NSDictionary )aUserInfo; æ³¨æ„:å®˜æ–¹æ–‡æ¡£æœ‰æ˜ç¡®çš„è¯´æ˜ï¼Œä¸å¯ä»¥ä½¿ç”¨initè¿›è¡Œåˆå§‹åŒ– 2ã€NSNotificationCenterè¿™ä¸ªç±»æ˜¯ä¸€ä¸ªé€šçŸ¥ä¸­å¿ƒï¼Œä½¿ç”¨å•ä¾‹è®¾è®¡ï¼Œæ¯ä¸ªåº”ç”¨ç¨‹åºéƒ½ä¼šæœ‰ä¸€ä¸ªé»˜è®¤çš„é€šçŸ¥ä¸­å¿ƒã€‚ç”¨äºè°ƒåº¦é€šçŸ¥çš„å‘é€çš„æ¥å—ã€‚ æ·»åŠ ä¸€ä¸ªè§‚å¯Ÿè€…ï¼Œå¯ä»¥ä¸ºå®ƒæŒ‡å®šä¸€ä¸ªæ–¹æ³•ï¼Œåå­—å’Œå¯¹è±¡ã€‚æ¥å—åˆ°é€šçŸ¥æ—¶ï¼Œæ‰§è¡Œæ–¹æ³•ã€‚ - (void)addObserver:(id)observer selector:(SEL)aSelector name:(NSString *)aName object:(id)anObject; å‘é€é€šçŸ¥æ¶ˆæ¯çš„æ–¹æ³• - (void)postNotification:(NSNotification *)notification; - (void)postNotificationName:(NSString *)aName object:(id)anObject; - (void)postNotificationName:(NSString )aName object:(id)anObject userInfo:(NSDictionary )aUserInfo; ç§»é™¤è§‚å¯Ÿè€…çš„æ–¹æ³• - (void)removeObserver:(id)observer; - (void)removeObserver:(id)observer name:(NSString *)aName object:(id)anObject; å‡ ç‚¹æ³¨æ„ï¼š 1ã€å¦‚æœå‘é€çš„é€šçŸ¥æŒ‡å®šäº†objectå¯¹è±¡ï¼Œé‚£ä¹ˆè§‚å¯Ÿè€…æ¥æ”¶çš„é€šçŸ¥è®¾ç½®çš„objectå¯¹è±¡ä¸å…¶ä¸€æ ·ï¼Œæ‰ä¼šæ¥æ”¶åˆ°é€šçŸ¥ï¼Œä½†æ˜¯æ¥æ”¶é€šçŸ¥å¦‚æœå°†è¿™ä¸ªå‚æ•°è®¾ç½®ä¸ºäº†nilï¼Œåˆ™ä¼šæ¥æ”¶ä¸€åˆ‡é€šçŸ¥ã€‚ 2ã€è§‚å¯Ÿè€…çš„SELå‡½æ•°æŒ‡é’ˆå¯ä»¥æœ‰ä¸€ä¸ªå‚æ•°ï¼Œå‚æ•°å°±æ˜¯å‘é€çš„æ­»å¥¥è¥¿å¯¹è±¡æœ¬èº«ï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªå‚æ•°å–åˆ°æ¶ˆæ¯å¯¹è±¡çš„userInfoï¼Œå®ç°ä¼ å€¼ã€‚ äºŒã€é€šçŸ¥çš„ä½¿ç”¨æµç¨‹é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨éœ€è¦æ¥æ”¶é€šçŸ¥çš„åœ°æ–¹æ³¨å†Œè§‚å¯Ÿè€…ï¼Œæ¯”å¦‚ï¼š 1234 //è·å–é€šçŸ¥ä¸­å¿ƒå•ä¾‹å¯¹è±¡ NSNotificationCenter * center = [NSNotificationCenter defaultCenter]; //æ·»åŠ å½“å‰ç±»å¯¹è±¡ä¸ºä¸€ä¸ªè§‚å¯Ÿè€…ï¼Œnameå’Œobjectè®¾ç½®ä¸ºnilï¼Œè¡¨ç¤ºæ¥æ”¶ä¸€åˆ‡é€šçŸ¥ [center addObserver:self selector:@selector(notice:) name:@&quot;123&quot; object:nil]; ä¹‹åï¼Œåœ¨æˆ‘ä»¬éœ€è¦æ—¶å‘é€é€šçŸ¥æ¶ˆæ¯ 1234 //åˆ›å»ºä¸€ä¸ªæ¶ˆæ¯å¯¹è±¡ NSNotification * notice = [NSNotification notificationWithName:@&quot;123&quot; object:nil userInfo:@&#123;@&quot;1&quot;:@&quot;123&quot;&#125;]; //å‘é€æ¶ˆæ¯ [[NSNotificationCenter defaultCenter]postNotification:notice]; æˆ‘ä»¬å¯ä»¥åœ¨å›è°ƒçš„å‡½æ•°ä¸­å–åˆ°userInfoå†…å®¹ï¼Œå¦‚ä¸‹ï¼š 123-(void)notice:(id)sender&#123; NSLog(@&quot;%@&quot;,sender);&#125; æ‰“å°ç»“æœå¦‚ä¸‹ï¼š ç–æ¼ä¹‹å¤„ æ¬¢è¿æŒ‡æ­£ å­¦ä¹ ä½¿ç”¨ æ¬¢è¿è½¬è½½ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOS7ä½¿ç”¨åŸç”ŸAPIè¿›è¡ŒäºŒç»´ç å’Œæ¡å½¢ç çš„æ‰«æ","slug":"32iOS7ä½¿ç”¨åŸç”ŸAPIè¿›è¡ŒäºŒç»´ç å’Œæ¡å½¢ç çš„æ‰«æ","date":"2015-04-23T16:00:00.000Z","updated":"2021-06-21T03:04:00.268Z","comments":true,"path":"2015/04/24/32iOS7ä½¿ç”¨åŸç”ŸAPIè¿›è¡ŒäºŒç»´ç å’Œæ¡å½¢ç çš„æ‰«æ/","link":"","permalink":"http://huishao.cc/2015/04/24/32iOS7ä½¿ç”¨åŸç”ŸAPIè¿›è¡ŒäºŒç»´ç å’Œæ¡å½¢ç çš„æ‰«æ/","excerpt":"","text":"ä½¿ç”¨iOS7åŸç”ŸAPIè¿›è¡ŒäºŒç»´ç æ¡å½¢ç çš„æ‰«æIOS7ä¹‹å‰ï¼Œå¼€å‘è€…è¿›è¡Œæ‰«ç ç¼–ç¨‹æ—¶ï¼Œä¸€èˆ¬ä¼šå€ŸåŠ©ç¬¬ä¸‰æ–¹åº“ã€‚å¸¸ç”¨çš„æ˜¯ZBarSDKï¼ŒIOS7ä¹‹åï¼Œç³»ç»Ÿçš„AVMetadataObjectç±»ä¸­ï¼Œä¸ºæˆ‘ä»¬æä¾›äº†è§£æäºŒç»´ç çš„æ¥å£ã€‚ç»è¿‡æµ‹è¯•ï¼Œä½¿ç”¨åŸç”ŸAPIæ‰«æå’Œå¤„ç†çš„æ•ˆç‡éå¸¸é«˜ï¼Œè¿œè¿œé«˜äºç¬¬ä¸‰æ–¹åº“ã€‚ ä¸€ã€ä½¿ç”¨æ–¹æ³•ç¤ºä¾‹å®˜æ–¹æä¾›çš„æ¥å£éå¸¸ç®€å•ï¼Œä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536@interface ViewController ()&lt;AVCaptureMetadataOutputObjectsDelegate&gt;//ç”¨äºå¤„ç†é‡‡é›†ä¿¡æ¯çš„ä»£ç†&#123; AVCaptureSession * session;//è¾“å…¥è¾“å‡ºçš„ä¸­é—´æ¡¥æ¢&#125;@end@implementation ViewController- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view, typically from a nib. //è·å–æ‘„åƒè®¾å¤‡ AVCaptureDevice * device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo]; //åˆ›å»ºè¾“å…¥æµ AVCaptureDeviceInput * input = [AVCaptureDeviceInput deviceInputWithDevice:device error:nil]; //åˆ›å»ºè¾“å‡ºæµ AVCaptureMetadataOutput * output = [[AVCaptureMetadataOutput alloc]init]; //è®¾ç½®ä»£ç† åœ¨ä¸»çº¿ç¨‹é‡Œåˆ·æ–° [output setMetadataObjectsDelegate:self queue:dispatch_get_main_queue()]; //åˆå§‹åŒ–é“¾æ¥å¯¹è±¡ session = [[AVCaptureSession alloc]init]; //é«˜è´¨é‡é‡‡é›†ç‡ [session setSessionPreset:AVCaptureSessionPresetHigh]; [session addInput:input]; [session addOutput:output]; //è®¾ç½®æ‰«ç æ”¯æŒçš„ç¼–ç æ ¼å¼(å¦‚ä¸‹è®¾ç½®æ¡å½¢ç å’ŒäºŒç»´ç å…¼å®¹) output.metadataObjectTypes=@[AVMetadataObjectTypeQRCode,AVMetadataObjectTypeEAN13Code, AVMetadataObjectTypeEAN8Code, AVMetadataObjectTypeCode128Code]; AVCaptureVideoPreviewLayer * layer = [AVCaptureVideoPreviewLayer layerWithSession:session]; layer.videoGravity=AVLayerVideoGravityResizeAspectFill; layer.frame=self.view.layer.bounds; [self.view.layer insertSublayer:layer atIndex:0]; //å¼€å§‹æ•è· [session startRunning];&#125; ä¹‹åæˆ‘ä»¬çš„UIä¸Šå·²ç»å¯ä»¥çœ‹åˆ°æ‘„åƒå¤´æ•è·çš„å†…å®¹ï¼Œåªè¦å®ç°ä»£ç†ä¸­çš„æ–¹æ³•ï¼Œå°±å¯ä»¥å®ŒæˆäºŒç»´ç æ¡å½¢ç çš„æ‰«æï¼š 12345678-(void)captureOutput:(AVCaptureOutput *)captureOutput didOutputMetadataObjects:(NSArray *)metadataObjects fromConnection:(AVCaptureConnection *)connection&#123; if (metadataObjects.count&gt;0) &#123; //[session stopRunning]; AVMetadataMachineReadableCodeObject * metadataObject = [metadataObjects objectAtIndex : 0 ]; //è¾“å‡ºæ‰«æå­—ç¬¦ä¸² NSLog(@&quot;%@&quot;,metadataObject.stringValue); &#125;&#125; äºŒã€ä¸€äº›ä¼˜åŒ–é€šè¿‡ä¸Šé¢çš„ä»£ç æµ‹è¯•ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ç³»ç»Ÿçš„è§£æå¤„ç†æ•ˆç‡æ˜¯ç›¸å½“çš„é«˜ï¼ŒIOSå®˜æ–¹æä¾›çš„APIä¹Ÿç¡®å®éå¸¸å¼ºå¤§ï¼Œç„¶è€Œï¼Œæˆ‘ä»¬å¯ä»¥åšè¿›ä¸€æ­¥çš„ä¼˜åŒ–ï¼Œå°†æ•ˆç‡æ›´åŠ æé«˜ï¼š é¦–å…ˆï¼ŒAVCaptureMetadataOutputç±»ä¸­æœ‰ä¸€ä¸ªè¿™æ ·çš„å±æ€§(åœ¨IOS7.0ä¹‹åå¯ç”¨)ï¼š @property(nonatomic) CGRect rectOfInterest; è¿™ä¸ªå±æ€§å¤§è‡´æ„æ€å°±æ˜¯å‘Šè¯‰ç³»ç»Ÿå®ƒéœ€è¦æ³¨æ„çš„åŒºåŸŸï¼Œå¤§éƒ¨åˆ†APPçš„æ‰«ç UIä¸­éƒ½ä¼šæœ‰ä¸€ä¸ªæ¡†ï¼Œæé†’ä½ å°†æ¡å½¢ç æ”¾å…¥é‚£ä¸ªåŒºåŸŸï¼Œè¿™ä¸ªå±æ€§çš„ä½œç”¨å°±åœ¨è¿™é‡Œï¼Œå®ƒå¯ä»¥è®¾ç½®ä¸€ä¸ªèŒƒå›´ï¼Œåªå¤„ç†åœ¨è¿™ä¸ªèŒƒå›´å†…æ•è·åˆ°çš„å›¾åƒçš„ä¿¡æ¯ã€‚å¦‚æ­¤ä¸€æ¥ï¼Œå¯æƒ³è€ŒçŸ¥ï¼Œæˆ‘ä»¬ä»£ç çš„æ•ˆç‡åˆä¼šå¾—åˆ°å¾ˆå¤§çš„æé«˜ï¼Œåœ¨ä½¿ç”¨è¿™ä¸ªå±æ€§çš„æ—¶å€™ã€‚éœ€è¦å‡ ç‚¹æ³¨æ„ï¼š 1ã€è¿™ä¸ªCGRectå‚æ•°å’Œæ™®é€šçš„RectèŒƒå›´ä¸å¤ªä¸€æ ·ï¼Œå®ƒçš„å››ä¸ªå€¼çš„èŒƒå›´éƒ½æ˜¯0-1ï¼Œè¡¨ç¤ºæ¯”ä¾‹ã€‚ 2ã€ç»è¿‡æµ‹è¯•å‘ç°ï¼Œè¿™ä¸ªå‚æ•°é‡Œé¢çš„xå¯¹åº”çš„æ°æ°æ˜¯è·ç¦»å·¦ä¸Šè§’çš„å‚ç›´è·ç¦»ï¼Œyå¯¹åº”çš„æ˜¯è·ç¦»å·¦ä¸Šè§’çš„æ°´å¹³è·ç¦»ã€‚ 3ã€å®½åº¦å’Œé«˜åº¦è®¾ç½®çš„æƒ…å†µä¹Ÿæ˜¯ç±»ä¼¼ã€‚ 3ã€ä¸¾ä¸ªä¾‹å­å¦‚æœæˆ‘ä»¬æƒ³è®©æ‰«æçš„å¤„ç†åŒºåŸŸæ˜¯å±å¹•çš„ä¸‹åŠéƒ¨åˆ†ï¼Œæˆ‘ä»¬è¿™æ ·è®¾ç½® 1output.rectOfInterest=CGRectMake(0.5,0,0.5, 1); å…·ä½“appleä¸ºä»€ä¹ˆè¦è®¾è®¡æˆè¿™æ ·ï¼Œæˆ–è€…æ˜¯è¿™ä¸ªå‚æ•°æˆ‘çš„ç”¨æ³•é‚£é‡Œä¸å¯¹ï¼Œè¿˜éœ€è¦äº†è§£çš„æœ‹å‹ç»™ä¸ªæŒ‡å¯¼ã€‚ ç–æ¼ä¹‹å¤„ æ¬¢è¿æŒ‡æ­£ å­¦ä¹ ä½¿ç”¨ æ¬¢è¿è½¬è½½ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSä¸­ä½¿ç”¨æœ¬åœ°é€šçŸ¥ä¸ºä½ çš„APPæ·»åŠ æç¤ºç”¨æˆ·åŠŸèƒ½","slug":"31iOSä¸­ä½¿ç”¨æœ¬åœ°é€šçŸ¥ä¸ºä½ çš„APPæ·»åŠ æç¤ºç”¨æˆ·åŠŸèƒ½","date":"2015-04-22T16:00:00.000Z","updated":"2021-06-21T02:28:44.460Z","comments":true,"path":"2015/04/23/31iOSä¸­ä½¿ç”¨æœ¬åœ°é€šçŸ¥ä¸ºä½ çš„APPæ·»åŠ æç¤ºç”¨æˆ·åŠŸèƒ½/","link":"","permalink":"http://huishao.cc/2015/04/23/31iOSä¸­ä½¿ç”¨æœ¬åœ°é€šçŸ¥ä¸ºä½ çš„APPæ·»åŠ æç¤ºç”¨æˆ·åŠŸèƒ½/","excerpt":"","text":"iOSä¸­ä½¿ç”¨æœ¬åœ°é€šçŸ¥ä¸ºä½ çš„APPæ·»åŠ æç¤ºç”¨æˆ·åŠŸèƒ½é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆè¦æ˜ç™½ä¸€ä¸ªæ¦‚å¿µï¼Œè¿™é‡Œçš„æœ¬åœ°é€šçŸ¥æ˜¯UILocalNotificationç±»ï¼Œå’Œç³»ç»Ÿçš„NSNotificationCenteré€šçŸ¥ä¸­å¿ƒæ˜¯å®Œå…¨ä¸åŒçš„æ¦‚å¿µã€‚ ä¸€ã€æˆ‘ä»¬å¯ä»¥é€šè¿‡æœ¬åœ°é€šçŸ¥åšä»€ä¹ˆé€šçŸ¥ï¼Œå®é™…ä¸Šæ˜¯ç”±IOSç³»ç»Ÿç®¡ç†çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œæ¯”å¦‚æŸäº›åå°åº”ç”¨åšäº†æŸé¡¹æ´»åŠ¨éœ€è¦æˆ‘ä»¬å¤„ç†ã€å·²ç»é€€å‡ºçš„åº”ç”¨åœ¨æŸä¸ªæ—¶é—´æé†’æˆ‘ä»¬å”¤èµ·ç­‰ç­‰ï¼Œå¦‚æœæ³¨å†Œäº†é€šçŸ¥ï¼Œç³»ç»Ÿéƒ½ä¼šåœ¨é€šçŸ¥è§¦å‘æ—¶ç»™æˆ‘ä»¬å‘é€æ¶ˆæ¯ã€‚ç”±æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç³»ç»Ÿç»™æˆ‘ä»¬çš„APPæ·»åŠ é€šçŸ¥ç”¨æˆ·çš„åŠŸèƒ½ï¼Œå¹¶ä¸”åº”ç”¨éå¸¸å¹¿æ³›ã€‚ä¾‹å¦‚ï¼Œé—¹ç§ç±»åº”ç”¨ï¼Œæœ‰æŒ‰æ—¶ç­¾åˆ°ç›¸ä¼¼åŠŸèƒ½çš„åº”ç”¨ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬å°±æ¥ä»‹ç»å¦‚ä½•æ³¨å†Œå¹¶ä¸”è®¾ç½®ä¸€ä¸ªæœ¬åœ°é€šçŸ¥ã€‚ äºŒã€äº†è§£UILocalNotificationç±»é¡¾åæ€ä¹‰ï¼Œè¿™ä¸ªç±»å°±æ˜¯æˆ‘ä»¬éœ€è¦ä½¿ç”¨çš„æœ¬åœ°é€šçŸ¥ç±»ï¼Œå…ˆæ¥çœ‹å®ƒçš„å‡ ä¸ªå±æ€§ï¼š è®¾ç½®ç³»ç»Ÿå‘é€é€šçŸ¥çš„æ—¶é—´(å¦‚æœæ˜¯è¿‡å»çš„æ—¶é—´æˆ–è€…0ï¼Œåˆ™ä¼šç«‹åˆ»å‘èµ·é€šçŸ¥) @property(nonatomic,copy) NSDate *fireDate; è®¾ç½®æ—¶é—´çš„æ—¶åŒº @property(nonatomic,copy) NSTimeZone *timeZone; è®¾ç½®å‘¨æœŸæ€§é€šçŸ¥ @property(nonatomic) NSCalendarUnit repeatInterval; NSCalendarUnitå¯¹è±¡æ˜¯æšä¸¾ï¼Œè®¾å®šé€šçŸ¥çš„å‘¨æœŸ 1234567891011typedef NS_OPTIONS(NSUInteger, NSCalendarUnit) &#123; NSCalendarUnitEra = kCFCalendarUnitEra, NSCalendarUnitYear = kCFCalendarUnitYear, NSCalendarUnitMonth = kCFCalendarUnitMonth, NSCalendarUnitDay = kCFCalendarUnitDay, NSCalendarUnitHour = kCFCalendarUnitHour, NSCalendarUnitMinute = kCFCalendarUnitMinute, NSCalendarUnitSecond = kCFCalendarUnitSecond, NSCalendarUnitWeekday = kCFCalendarUnitWeekday, NSCalendarUnitWeekdayOrdinal = kCFCalendarUnitWeekdayOrdinal, &#125; è®¾ç½®å‘¨æœŸæ€§é€šçŸ¥å‚ç…§çš„æ—¥å†è¡¨ @property(nonatomic,copy) NSCalendar *repeatCalendar; ä¸‹é¢è¿™ä¸¤ä¸ªå‡½æ•°æ˜¯IOS8çš„æ–°åŠŸèƒ½ï¼Œåœ¨ç”¨æˆ·è¿›å»æˆ–è€…ç¦»å¼€æŸä¸€åŒºåŸŸæ—¶å‘é€é€šçŸ¥ @property(nonatomic,copy) CLRegion *region; è®¾ç½®åŒºåŸŸæ£€æµ‹é€šçŸ¥æ˜¯å¦é‡å¤(å¦‚æœä¸ºYESï¼Œåˆ™æ²¡æ¬¡è¿›å»å‡ºæ¥éƒ½ä¼šå‘é€ï¼Œå¦åˆ™åªå‘é€ä¸€æ¬¡) @property(nonatomic,assign) BOOL regionTriggersOnce; è®¾ç½®é€šçŸ¥çš„ä¸»ä½“å†…å®¹ @property(nonatomic,copy) NSString *alertBody; æ˜¯å¦éšè—æ»‘åŠ¨å¯åŠ¨æŒ‰é’® @property(nonatomic) BOOL hasAction; è®¾ç½®æ»‘åŠ¨æ‰“å¼€çš„æç¤ºæ–‡å­— @property(nonatomic,copy) NSString *alertAction; è®¾ç½®ç‚¹å‡»é€šçŸ¥åå¯åŠ¨çš„å¯åŠ¨å›¾ç‰‡ @property(nonatomic,copy) NSString *alertLaunchImage; ä¸‹é¢è¿™ä¸ªæ–¹æ³•æ˜¯IOS8çš„æ–°æ–¹æ³•ï¼Œæ˜¯iwatchçš„æ¥å£ï¼Œé€šçŸ¥çš„çŸ­æ ‡é¢˜ @property(nonatomic,copy) NSString *alertTitle; æ”¶åˆ°é€šçŸ¥æ—¶ï¼Œæ’­æ”¾çš„ç³»ç»ŸéŸ³ @property(nonatomic,copy) NSString *soundName; è®¾ç½®åº”ç”¨ç¨‹åºIconå¤´æ ‡æ•°å­— @property(nonatomic) NSInteger applicationIconBadgeNumber; ç”¨æˆ·å­—å…¸ï¼Œå¯ç”¨äºä¼ é€’é€šçŸ¥æ¶ˆæ¯å‚æ•° @property(nonatomic,copy) NSDictionary *userInfo; æ³¨æ„ï¼šè¿™ä¸ªå­—ç¬¦ä¸²æ˜¯ç³»ç»Ÿé»˜è®¤çš„æç¤ºéŸ³ NSString *const UILocalNotificationDefaultSoundName; ä¸‰ã€æœ¬åœ°é€šçŸ¥çš„è®¾è®¡æµç¨‹é¦–å…ˆï¼Œæƒ³è®©æˆ‘ä»¬çš„APPå®ç°æœ¬åœ°é€šçŸ¥åŠŸèƒ½ï¼Œå¿…é¡»å¾—åˆ°ç”¨æˆ·çš„æˆæƒï¼Œåœ¨Appdelegateä¸­å®ç°å¦‚ä¸‹ä»£ç ï¼š 12345678910- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions &#123; // Override point for customization after application launch. //å¦‚æœå·²ç»å¾—åˆ°æˆæƒï¼Œå°±ç›´æ¥æ·»åŠ æœ¬åœ°é€šçŸ¥ï¼Œå¦åˆ™ç”³è¯·è¯¢é—®æˆæƒ if ([[UIApplication sharedApplication]currentUserNotificationSettings].types!=UIUserNotificationTypeNone) &#123; [self addLocalNotification]; &#125;else&#123; [[UIApplication sharedApplication]registerUserNotificationSettings:[UIUserNotificationSettings settingsForTypes:UIUserNotificationTypeAlert|UIUserNotificationTypeBadge|UIUserNotificationTypeSound categories:nil]]; &#125; return YES;&#125; å½“ç”¨æˆ·ç‚¹å‡»å…è®¸æˆ–è€…ä¸å…è®¸åï¼Œä¼šæ‰§è¡Œå¦‚ä¸‹ä»£ç†æ–¹æ³•ï¼Œæˆ‘ä»¬æŠŠå¤„ç†é€»è¾‘åœ¨å…¶ä¸­å®ç° 12345-(void)application:(UIApplication *)application didRegisterUserNotificationSettings:(UIUserNotificationSettings *)notificationSettings&#123; if (notificationSettings.types!=UIUserNotificationTypeNone) &#123; [self addLocalNotification]; &#125;&#125; æ·»åŠ æœ¬åœ°é€šçŸ¥çš„æ–¹æ³•ï¼š 12345678910111213-(void)addLocalNotification&#123; //å®šä¹‰æœ¬åœ°é€šçŸ¥å¯¹è±¡ UILocalNotification *notification=[[UILocalNotification alloc]init]; //è®¾ç½®è°ƒç”¨æ—¶é—´ notification.fireDate=[NSDate dateWithTimeIntervalSinceNow:0];//ç«‹å³è§¦å‘ //è®¾ç½®é€šçŸ¥å±æ€§ notification.alertBody=@&quot;HELLOï¼Œæˆ‘æ˜¯æœ¬åœ°é€šçŸ¥å“¦!&quot;; //é€šçŸ¥ä¸»ä½“ notification.applicationIconBadgeNumber=1;//åº”ç”¨ç¨‹åºå›¾æ ‡å³ä¸Šè§’æ˜¾ç¤ºçš„æ¶ˆæ¯æ•° notification.alertAction=@&quot;æ‰“å¼€åº”ç”¨&quot;; //å¾…æœºç•Œé¢çš„æ»‘åŠ¨åŠ¨ä½œæç¤º notification.soundName=UILocalNotificationDefaultSoundName;//æ”¶åˆ°é€šçŸ¥æ—¶æ’­æ”¾çš„å£°éŸ³ï¼Œé»˜è®¤æ¶ˆæ¯å£°éŸ³ //è°ƒç”¨é€šçŸ¥ [[UIApplication sharedApplication] scheduleLocalNotification:notification];&#125; å®ç°äº†ä¸Šé¢ä¸‰ä¸ªæ­¥éª¤ï¼Œæœ¬åœ°é€šçŸ¥çš„å‘å‡ºå’Œæ¥å—åŸºæœ¬éƒ½å·²å®Œæˆï¼Œè¿˜æœ‰ä¸€äº›ç»†èŠ‚æˆ‘ä»¬éœ€è¦è€ƒè™‘ï¼š åº”ç”¨è¿›å…¥å‰å°åï¼Œå°†Iconä¸Šçš„å¤´æ ‡æ¸…é™¤ï¼š 123-(void)applicationWillEnterForeground:(UIApplication *)application&#123; [[UIApplication sharedApplication]setApplicationIconBadgeNumber:0];//è¿›å…¥å‰å°å–æ¶ˆåº”ç”¨æ¶ˆæ¯å›¾æ ‡&#125; å½“ä¸å†éœ€è¦è¿™ä¸ªé€šçŸ¥æ—¶ï¼Œæ¸…é™¤å®ƒ 1 [[UIApplication sharedApplication] cancelAllLocalNotifications]; å››ã€è·å–é€šçŸ¥ä¸­çš„ç”¨æˆ·å‚æ•°å­—å…¸åœ¨ä¸Šé¢ï¼Œæˆ‘ä»¬æåˆ°äº†ä¸€ä¸ªå‚æ•° @property(nonatomic,copy) NSDictionary *userInfo; æˆ‘ä»¬å¯ä»¥åœ¨æ³¨å†Œé€šçŸ¥æ—¶å°†è¿™ä¸ªå‚æ•°è®¾ç½®ï¼Œç„¶ååœ¨æ”¶åˆ°é€šçŸ¥æ—¶ä½¿ç”¨getæ–¹æ³•å¾—åˆ°ï¼Œä½†æ˜¯è¿™é‡Œæœ‰ä¸¤ç§æƒ…å†µï¼š 1ã€å¦‚æœæˆ‘ä»¬çš„APPåœ¨å‰å°æˆ–è€…åå°è¿›å…¥å‰å°æ—¶-(void)application:(UIApplication )application didReceiveLocalNotification:(UILocalNotification )notification; è¿™ä¸ªæ–¹æ³•æ˜¯APPåœ¨å‰å°æˆ–è€…åå°æ”¶åˆ°é€šçŸ¥è¿›å…¥å‰å°æ—¶è°ƒç”¨çš„æ–¹æ³• 2ã€å¦‚æœæˆ‘ä»¬çš„APPåœ¨å…³é—­çŠ¶æ€å¦‚æœæ˜¯è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬åªèƒ½ä»ä¸‹é¢å‡½æ•°çš„launchOptionsä¸­å–åˆ°æˆ‘ä»¬æƒ³è¦çš„å‚æ•° - (BOOL)application:(UIApplication )application didFinishLaunchingWithOptions:(NSDictionary )launchOptions; ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š 123 //æ¥æ”¶é€šçŸ¥å‚æ•° UILocalNotification *notification=[launchOptions valueForKey:UIApplicationLaunchOptionsLocalNotificationKey]; NSDictionary *userInfo= notification.userInfo; ç–æ¼ä¹‹å¤„ æ¬¢è¿æŒ‡æ­£ å­¦ä¹ ä½¿ç”¨ æ¬¢è¿è½¬è½½ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOS8çš„æ–°ç‰¹æ€§ï¼šç®€æ´æ˜“ç”¨çš„æ¯›ç»ç’ƒæ•ˆæœ","slug":"30iOS8çš„æ–°ç‰¹æ€§ï¼šç®€æ´æ˜“ç”¨çš„æ¯›ç»ç’ƒæ•ˆæœ","date":"2015-04-21T16:00:00.000Z","updated":"2021-06-10T09:03:58.590Z","comments":true,"path":"2015/04/22/30iOS8çš„æ–°ç‰¹æ€§ï¼šç®€æ´æ˜“ç”¨çš„æ¯›ç»ç’ƒæ•ˆæœ/","link":"","permalink":"http://huishao.cc/2015/04/22/30iOS8çš„æ–°ç‰¹æ€§ï¼šç®€æ´æ˜“ç”¨çš„æ¯›ç»ç’ƒæ•ˆæœ/","excerpt":"","text":"æ¢å¯»iOS8çš„æ–°äº®ç‚¹ï¼šæ¯›ç»ç’ƒæ•ˆæœçš„ç®€æ˜“å®ç°IOS8ä¹‹å‰ï¼Œappleå®˜æ–¹å¹¶ä¸å»ºè®®å¼€å‘è€…ä½¿ç”¨ç±»ä¼¼æ¯›ç»ç’ƒçš„æ¨¡ç³Šæ•ˆæœï¼Œä¹Ÿå¹¶æ²¡æœ‰å¼€æ”¾ç›¸å…³çš„æ¥å£ï¼Œå¤§éƒ¨åˆ†çš„å¼€å‘è€…æ˜¯é€šè¿‡è½¬åŒ–CGImageè¿™ä¸ªç±»æ¥å®ç°æ¯›ç»ç’ƒçš„æ¨¡ç³Šæ•ˆæœï¼Œå¹¶ä¸”å®ç°çš„æ•ˆæœä¹Ÿå¾ˆä¼˜ç§€ã€‚åœ¨IOS8ä¹‹åï¼Œè‹¹æœå®˜æ–¹æ–°å‡ºäº†ä¸€ä¸ªç±»UIVisualEffectViewï¼Œé€šè¿‡è¿™ä¸ªç±»ï¼Œå®ç°æ¯›ç»ç’ƒæ•ˆæœå˜å¾—è½»è€Œæ˜“ä¸¾ï¼Œè€Œä¸”æ•ˆç‡éå¸¸ä¹‹é«˜ï¼Œä¸‹é¢ï¼Œæˆ‘ä»¬æ¥ä»‹ç»ä¸‹è¿™ä¸ªç±»çš„ç®€å•ç”¨æ³•ã€‚ ä¸€ã€äº†è§£å‡ ä¸ªç±»1ã€UIVisualEffectView è¿™ä¸ªç±»ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªæ–¹ä¾¿çš„æ¥å£ï¼Œç”¨æ¥å±•ç¤ºå¤æ‚çš„å›¾åƒæ•ˆæœã€‚ 2ã€UIVisualEffect å®˜æ–¹å¯¹è¿™ä¸ªç±»çš„è§£é‡Šç›¸å½“ç®€å•ï¼Œå®ƒæ²¡æœ‰ä»»ä½•æ–¹æ³•ï¼Œåªæ˜¯å……å½“ä¸€ä¸ªå¸®åŠ©UIVisualEffectViewåˆ›å»ºçš„å¯¹è±¡ï¼Œæ˜¯UIBlurEffectå’ŒUIVibrancyEffectçš„çˆ¶ç±»ï¼Œæˆ–è€…å¯ä»¥ç†è§£ï¼Œå®ƒçš„åŠŸèƒ½ç›¸å½“äºä¸€ä¸ªæŠ½è±¡ç±»ã€‚ 3ã€UIBlurEffect è¿™ä¸ªç±»æ˜¯åˆ›å»ºæ¨¡ç³Šæ•ˆæœï¼Œä¹Ÿå°±æ˜¯æ¯›ç»ç’ƒæ•ˆæœçš„ç±»ï¼Œå¯ä»¥è®¾ç½®é£æ ¼ã€‚ 4ã€UIVibrancyEffect ä»è¿™ä¸ªç±»çš„åå­—å°±å¯ä»¥çœ‹å‡ºï¼Œè¿™ä¸ªç±»æ˜¯UIBlurEffectçš„æ‰©å±•ï¼Œå¯ä»¥åˆ›å»ºå‡ºæ˜äº®çš„æ ‡ç­¾çš„æŒ‰é’®ã€‚ äºŒã€å¼€å§‹åˆ›å»ºè™šåŒ–çš„èƒŒæ™¯é¦–å…ˆï¼Œåˆå§‹åŒ–ä¸€ä¸ªUIVisualEffectViewå¯¹è±¡ï¼š - (instancetype)initWithEffect:(UIVisualEffect *)effect; è¿™ä¸ªæ–¹æ³•é‡Œé¢çš„å‚æ•°æ˜¯UIVisuaEffectå¯¹è±¡ï¼Œæˆ‘ä»¬å…ˆç”¨UIBlueEffectçš„æ–¹å¼æ¥åˆ›å»ºï¼š + (UIBlurEffect *)effectWithStyle:(UIBlurEffectStyle)style; è¿™ä¸ªæ–¹æ³•å¯ä»¥è®¾ç½®ä¸€ä¸ªé£æ ¼å‚æ•°ï¼Œé£æ ¼æšä¸¾å¦‚ä¸‹ï¼š 12345typedef NS_ENUM(NSInteger, UIBlurEffectStyle) &#123; UIBlurEffectStyleExtraLight,//é«˜äº®çš„é£æ ¼ UIBlurEffectStyleLight,//äº®åŒ–çš„é£æ ¼ UIBlurEffectStyleDark//æš—åŒ–çš„é£æ ¼&#125; ; è¿™äº›éƒ½åšå¥½ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦ç»™è¿™ä¸ªUIVisualEfffectViewå¯¹è±¡ä¸€ä¸ªframeï¼Œç„¶åç›´æ¥åŠ åˆ°æˆ‘ä»¬æƒ³è¦è™šåŒ–çš„èƒŒæ™¯ä¸Šï¼Œæ€»ä½“ä»£ç å¦‚ä¸‹ï¼š 123456789 UIImageView * view = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)]; UIImage * img = [UIImage imageNamed:@&quot;1.jpg&quot;]; UIVisualEffectView * effectView = [[UIVisualEffectView alloc]initWithEffect:[UIBlurEffect effectWithStyle:UIBlurEffectStyleExtraLight]]; //è®¾ç½®è™šåŒ–åº¦ effectView.alpha=1.0; effectView.frame=CGRectMake(0, 0, self.view.frame.size.width, 200); view.image=img; [view addSubview:effectView]; [self.view addSubview:view]; æ•ˆæœå¦‚ä¸‹ï¼š ä¸‰ã€UIVisualEffectViewçš„å‡ ä¸ªå±æ€§@property (nonatomic, retain, readonly) UIView *contentView; è¿™ä¸ªå‚æ•°å’Œæˆ‘ä»¬åé¢å°†è¦è¯´çš„åˆ›å»ºæ˜äº®çš„æ ‡ç­¾å’ŒæŒ‰é’®æœ‰å…³ï¼Œè¿™é‡Œå…ˆä¸å¤šä»‹ç»ã€‚ @property (nonatomic, copy, readonly) UIVisualEffect *effect; è·å¾—UIVissualEffectå¯¹è±¡ @property(nonatomic) CGFloat alpha; è¿™ä¸ªå‚æ•°å’Œè™šåŒ–çš„ç¨‹åº¦æœ‰å…³ å››ã€åœ¨è™šåŒ–çš„èƒŒæ™¯ä¸Šåˆ›å»ºé¢œè‰²ç»šä¸½çš„æ ‡ç­¾æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªæ•ˆæœï¼Œæˆ‘ä»¬åœ¨åˆšæ‰åˆ›å»ºçš„è™šåŒ–çš„èƒŒæ™¯ä¸Šæ·»åŠ ä¸€ä¸ªæ ‡ç­¾ï¼Œä»£ç å¦‚ä¸‹ï¼š 12345678910111213UILabel * view2 = [[UILabel alloc]init]; view2.text=@&quot;æ³¨æ„çœ‹å­—ä½“çš„é¢œè‰²!&quot;; view2.font=[UIFont boldSystemFontOfSize:32]; view2.frame=CGRectMake(0, 0,300, 100); UIImageView * view = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)]; UIImage * img = [UIImage imageNamed:@&quot;1.jpg&quot;]; UIVisualEffectView * effectView = [[UIVisualEffectView alloc]initWithEffect:[UIBlurEffect effectWithStyle:UIBlurEffectStyleExtraLight]]; [effectView addSubview:view2]; effectView.alpha=0.8; effectView.frame=CGRectMake(0, 0, self.view.frame.size.width, 200); view.image=img; [view addSubview:effectView]; [self.view addSubview:view]; æ•ˆæœå¦‚ä¸‹ï¼š æˆ‘ä»¬æ¢å¦ä¸€ç§è™šåŒ–æ•ˆæœæ¥å¯¹èƒŒæ™¯è¿›è¡Œè™šåŒ–ï¼š 12345678910111213UILabel * view2 = [[UILabel alloc]init]; view2.text=@&quot;æ³¨æ„çœ‹å­—ä½“çš„é¢œè‰²!&quot;; view2.font=[UIFont boldSystemFontOfSize:32]; view2.frame=CGRectMake(0, 0,300, 100); UIImageView * view = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)]; UIImage * img = [UIImage imageNamed:@&quot;1.jpg&quot;]; UIVisualEffectView * effectView = [[UIVisualEffectView alloc]initWithEffect:[UIVibrancyEffect effectForBlurEffect:[UIBlurEffect effectWithStyle:UIBlurEffectStyleDark]]]; [effectView.contentView addSubview:view2]; effectView.alpha=0.8; effectView.frame=CGRectMake(0, 0, self.view.frame.size.width, 200); view.image=img; [view addSubview:effectView]; [self.view addSubview:view]; æ•ˆæœå¦‚ä¸‹ï¼š ç°åœ¨å¯ä»¥å¾ˆæ˜ç™½çš„äº†è§£ï¼ŒUIBlurEffectæ˜¯å¯¹æ•´ä¸ªèƒŒæ™¯è¿›è¡Œè™šåŒ–ï¼ŒUIVibrancyEffectæ˜¯å¯¹æ·»åŠ çš„æ ‡ç­¾ç­‰é™„ä»¶è¿›è¡ŒèƒŒæ™¯è™šåŒ–ã€‚æ³¨æ„ï¼Œè¿™äº›é™„ä»¶ï¼Œå¿…é¡»åŠ åœ¨UIVisualEffectViewçš„contentViewé‡Œï¼Œå¦åˆ™å°†ä¸èµ·ä»»ä½•ä½œç”¨ã€‚ äº”ã€ä¸€ä¸ªå°æ§ä»¶é€šè¿‡ä¸Šé¢çš„ä»‹ç»ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œåœ¨IOS8ä¸­åˆ›å»ºä¸€ä¸ªæ¯›ç»ç’ƒæ•ˆæœæ˜¯å¦‚æ­¤çš„å®¹æ˜“ï¼Œappleå®˜æ–¹æä¾›çš„ç±»ä¹Ÿæ˜¯å¦‚æ­¤çš„å¼ºå¤§ï¼Œæˆ‘ä»¬å¾ˆè½»æ¾å°±å¯ä»¥å®ç°å®æ—¶å˜åŒ–è™šåŒ–ç¨‹åº¦çš„åŠ¨ç”»æ•ˆæœï¼Œè¿™åœ¨ä»¥å‰æ˜¯éå¸¸éº»çƒ¦å’Œä½æ•ˆçš„ã€‚ä½†æ˜¯appleè¿˜æœ‰ä¸€ä¸ªå¿ å‘Šï¼šè«è¦æ³›æ»¥çš„ä½¿ç”¨è™šåŒ–ï¼Œå¯¼è‡´å¾ˆå·®çš„ç”¨æˆ·ä½“éªŒ! æœ€åï¼Œå’Œå¤§å®¶åˆ†äº«ä¸€ä¸ªå‰ä¸¤å¤©å†™çš„å°æ§ä»¶ï¼Œå®ç°çš„æ•ˆæœæ˜¯ä»¿IOS8ä¸­åœ¨æ¡Œé¢ä¸‹æ‹‰ä¼šæ˜¯èƒŒæ™¯æ¸å˜è™šåŒ–ï¼Œä»é¡¶éƒ¨ä¼šæ»‘å‡ºæœç´¢æ¡†ã€‚å¦‚ä¸‹ï¼šå¯ä»¥å½“åšä¸€ä¸ªdemoæ¥å‚è€ƒã€‚ é“¾æ¥åœ°å€ï¼šhttp://d.cocoachina.com/code/detail/297393ã€‚ ç–æ¼ä¹‹å¤„ æ¬¢è¿æŒ‡æ­£ å­¦ä¹ ä½¿ç”¨ æ¬¢è¿è½¬è½½ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[{"name":"iOSç¼–ç¨‹","slug":"iOSç¼–ç¨‹","permalink":"http://huishao.cc/tags/iOSç¼–ç¨‹/"}],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOS UITableViewä»£ç†æ–¹æ³•è¯¦è§£","slug":"29iOS UITableViewä»£ç†æ–¹æ³•è¯¦è§£","date":"2015-04-21T16:00:00.000Z","updated":"2021-06-10T09:02:45.123Z","comments":true,"path":"2015/04/22/29iOS UITableViewä»£ç†æ–¹æ³•è¯¦è§£/","link":"","permalink":"http://huishao.cc/2015/04/22/29iOS UITableViewä»£ç†æ–¹æ³•è¯¦è§£/","excerpt":"","text":"iOS UITableViewçš„ä»£ç†æ–¹æ³•è¯¦è§£ä¸€ã€è¡¥å……åœ¨ä¸Šä¸€ç¯‡åšå®¢ä¸­ï¼Œhttp://my.oschina.net/u/2340880/blog/404605ï¼Œæˆ‘å°†IOSä¸­tableView(è¡¨è§†å›¾)çš„ä¸€äº›å¸¸ç”¨æ–¹æ³•æ€»ç»“äº†ä¸€ä¸‹ï¼Œè¿™ç¯‡å°†tableViewçš„ä»£ç†æ–¹æ³•ä½œäº†æ€»ç»“ï¼Œå¯¹ä¸Šä¸€ç¯‡åšå®¢è¿›è¡Œäº†è¡¥å……ã€‚ äºŒã€UITableViewDataSourcï¼ˆæ•°æ®æºä»£ç†ï¼‰1ã€å¿…é¡»å®ç°çš„å›è°ƒæ–¹æ³•è¿”å›æ¯ä¸ªåˆ†åŒºçš„è¡Œæ•° - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section; è¿”å›æ¯ä¸€è¡Œçš„cell - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section; 2ã€å¯é€‰å®ç°çš„æ–¹æ³•è¿”å›åˆ†åŒºæ•°(é»˜è®¤ä¸º1) - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView; è¿”å›æ¯ä¸ªåˆ†åŒºå¤´éƒ¨çš„æ ‡é¢˜ - (NSString )tableView:(UITableView )tableView titleForHeaderInSection:(NSInteger)section; è¿”å›æ¯ä¸ªåˆ†åŒºçš„å°¾éƒ¨æ ‡é¢˜ - (NSString )tableView:(UITableView )tableView titleForFooterInSection:(NSInteger)section; è®¾ç½®æŸè¡Œæ˜¯å¦å¯ç¼–è¾‘ - (BOOL)tableView:(UITableView )tableView canEditRowAtIndexPath:(NSIndexPath )indexPath; è®¾ç½®æŸè¡Œæ˜¯å¦å¯ä»¥è¢«ç§»åŠ¨ - (BOOL)tableView:(UITableView )tableView canMoveRowAtIndexPath:(NSIndexPath )indexPath; è®¾ç½®ç´¢å¼•æ æ ‡é¢˜æ•°ç»„ï¼ˆå®ç°è¿™ä¸ªæ–¹æ³•ï¼Œä¼šåœ¨tableViewå³è¾¹æ˜¾ç¤ºæ¯ä¸ªåˆ†åŒºçš„ç´¢å¼•ï¼‰ - (NSArray )sectionIndexTitlesForTableView:(UITableView )tableView; è®¾ç½®ç´¢å¼•æ æ ‡é¢˜å¯¹åº”çš„åˆ†åŒº - (NSInteger)tableView:(UITableView )tableView sectionForSectionIndexTitle:(NSString )title atIndex:(NSInteger)index tableViewæ¥å—ç¼–è¾‘æ—¶è°ƒç”¨çš„æ–¹æ³• - (void)tableView:(UITableView )tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath )indexPath; è¿™ä¸ªæ–¹æ³•ä¸­çš„editingStyleå‚æ•°æ˜¯ä¸€ä¸ªæšä¸¾ï¼Œä»£è¡¨äº†cellè¢«ç¼–è¾‘çš„æ¨¡å¼ï¼Œå¦‚ä¸‹ï¼š 12345typedef NS_ENUM(NSInteger, UITableViewCellEditingStyle) &#123; UITableViewCellEditingStyleNone,//æ²¡æœ‰ç¼–è¾‘æ“ä½œ UITableViewCellEditingStyleDelete,//åˆ é™¤æ“ä½œ UITableViewCellEditingStyleInsert//æ’å…¥æ“ä½œ&#125;; tableViewçš„cellè¢«ç§»åŠ¨æ—¶è°ƒç”¨çš„æ–¹æ³• - (void)tableView:(UITableView )tableView moveRowAtIndexPath:(NSIndexPath )sourceIndexPath toIndexPath:(NSIndexPath *)destinationIndexPath; ä¸‰ã€UITableViewDelegateï¼ˆtableViewä»£ç†ï¼‰cellå°†è¦æ˜¾ç¤ºæ—¶è°ƒç”¨çš„æ–¹æ³• - (void)tableView:(UITableView )tableView willDisplayCell:(UITableViewCell )cell forRowAtIndexPath:(NSIndexPath *)indexPath; å¤´è§†å›¾å°†è¦æ˜¾ç¤ºæ—¶è°ƒç”¨çš„æ–¹æ³• - (void)tableView:(UITableView )tableView willDisplayHeaderView:(UIView )view forSection:(NSInteger)section; å°¾è§†å›¾å°†è¦æ˜¾ç¤ºæ—¶è°ƒç”¨çš„æ–¹æ³• - (void)tableView:(UITableView )tableView willDisplayFooterView:(UIView )view forSection:(NSInteger)section; å’Œä¸Šé¢çš„æ–¹æ³•å¯¹åº”ï¼Œè¿™ä¸‰ä¸ªæ–¹æ³•åˆ†åˆ«æ˜¯cellï¼Œå¤´è§†å›¾ï¼Œå°¾è§†å›¾å·²ç»æ˜¾ç¤ºæ—¶è°ƒç”¨çš„æ–¹æ³• - (void)tableView:(UITableView )tableView didEndDisplayingCell:(UITableViewCell )cell forRowAtIndexPath:(NSIndexPath*)indexPath; - (void)tableView:(UITableView )tableView didEndDisplayingHeaderView:(UIView )view forSection:(NSInteger)section; - (void)tableView:(UITableView )tableView didEndDisplayingFooterView:(UIView )view forSection:(NSInteger)section; è®¾ç½®è¡Œé«˜ï¼Œå¤´è§†å›¾é«˜åº¦å’Œå°¾è§†å›¾é«˜åº¦çš„æ–¹æ³• - (CGFloat)tableView:(UITableView )tableView heightForRowAtIndexPath:(NSIndexPath )indexPath; - (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section; - (CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section; è®¾ç½®è¡Œé«˜ï¼Œå¤´è§†å›¾é«˜åº¦å’Œå°¾è§†å›¾é«˜åº¦çš„ä¼°è®¡å€¼(å¯¹äºé«˜åº¦å¯å˜çš„æƒ…å†µä¸‹ï¼Œæé«˜æ•ˆç‡) - (CGFloat)tableView:(UITableView )tableView estimatedHeightForRowAtIndexPath:(NSIndexPath )indexPath; - (CGFloat)tableView:(UITableView *)tableView estimatedHeightForHeaderInSection:(NSInteger)section; - (CGFloat)tableView:(UITableView *)tableView estimatedHeightForFooterInSection:(NSInteger)section; è®¾ç½®è‡ªå®šä¹‰å¤´è§†å›¾å’Œå°¾è§†å›¾ - (UIView )tableView:(UITableView )tableView viewForHeaderInSection:(NSInteger)section; - (UIView )tableView:(UITableView )tableView viewForFooterInSection:(NSInteger)section; è®¾ç½®cellæ˜¯å¦å¯ä»¥é«˜äº® - (BOOL)tableView:(UITableView )tableView shouldHighlightRowAtIndexPath:(NSIndexPath )indexPath; cellé«˜äº®å’Œå–æ¶ˆé«˜äº®æ—¶åˆ†åˆ«è°ƒç”¨çš„å‡½æ•° - (void)tableView:(UITableView )tableView didHighlightRowAtIndexPath:(NSIndexPath )indexPath; - (void)tableView:(UITableView )tableView didUnhighlightRowAtIndexPath:(NSIndexPath )indexPath; å½“å³å°†é€‰ä¸­æŸè¡Œå’Œå–æ¶ˆé€‰ä¸­æŸè¡Œæ—¶è°ƒç”¨çš„å‡½æ•°ï¼Œè¿”å›ä¸€ç›´ä½ç½®ï¼Œæ‰§è¡Œé€‰ä¸­æˆ–è€…å–æ¶ˆé€‰ä¸­ - (NSIndexPath )tableView:(UITableView )tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath; - (NSIndexPath )tableView:(UITableView )tableView willDeselectRowAtIndexPath:(NSIndexPath *)indexPath; å·²ç»é€‰ä¸­å’Œå·²ç»å–æ¶ˆé€‰ä¸­åè°ƒç”¨çš„å‡½æ•° - (void)tableView:(UITableView )tableView didSelectRowAtIndexPath:(NSIndexPath )indexPath; - (void)tableView:(UITableView )tableView didDeselectRowAtIndexPath:(NSIndexPath )indexPath; è®¾ç½®tableViewè¢«ç¼–è¾‘æ—¶çš„çŠ¶æ€é£æ ¼ï¼Œå¦‚æœä¸è®¾ç½®ï¼Œé»˜è®¤éƒ½æ˜¯åˆ é™¤é£æ ¼ - (UITableViewCellEditingStyle)tableView:(UITableView )tableView editingStyleForRowAtIndexPath:(NSIndexPath )indexPath; è‡ªå®šä¹‰åˆ é™¤æŒ‰é’®çš„æ ‡é¢˜ - (NSString )tableView:(UITableView )tableView titleForDeleteConfirmationButtonForRowAtIndexPath:(NSIndexPath *)indexPath; ä¸‹é¢è¿™ä¸ªæ–¹æ³•æ˜¯IOS8ä¸­çš„æ–°æ–¹æ³•ï¼Œç”¨äºè‡ªå®šä¹‰åˆ›å»ºtableViewè¢«ç¼–è¾‘æ—¶å³è¾¹çš„æŒ‰é’®ï¼ŒæŒ‰é’®ç±»å‹ä¸ºUITableViewRowActionã€‚ - (NSArray )tableView:(UITableView )tableView editActionsForRowAtIndexPath:(NSIndexPath *)indexPath ; è®¾ç½®ç¼–è¾‘æ—¶èƒŒæ™¯æ˜¯å¦ç¼©è¿› - (BOOL)tableView:(UITableView )tableView shouldIndentWhileEditingRowAtIndexPath:(NSIndexPath )indexPath; å°†è¦ç¼–è¾‘å’Œç»“æŸç¼–è¾‘æ—¶è°ƒç”¨çš„æ–¹æ³• - (void)tableView:(UITableView)tableView willBeginEditingRowAtIndexPath:(NSIndexPath )indexPath; - (void)tableView:(UITableView)tableView didEndEditingRowAtIndexPath:(NSIndexPath )indexPath; ç§»åŠ¨ç‰¹å®šçš„æŸè¡Œ - (NSIndexPath )tableView:(UITableView )tableView targetIndexPathForMoveFromRowAtIndexPath:(NSIndexPath )sourceIndexPath toProposedIndexPath:(NSIndexPath )proposedDestinationIndexPath; ç–æ¼ä¹‹å¤„ æ¬¢è¿æŒ‡æ­£ å­¦ä¹ ä½¿ç”¨ æ¬¢è¿è½¬è½½ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[{"name":"iOSç¼–ç¨‹","slug":"iOSç¼–ç¨‹","permalink":"http://huishao.cc/tags/iOSç¼–ç¨‹/"},{"name":"UITableView","slug":"UITableView","permalink":"http://huishao.cc/tags/UITableView/"}],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"iOSä¸­è¡¨è§†å›¾(UITableView)ä½¿ç”¨è¯¦è§£","slug":"28iOSä¸­è¡¨è§†å›¾(UITableView)ä½¿ç”¨è¯¦è§£","date":"2015-04-20T16:00:00.000Z","updated":"2021-06-10T09:01:26.033Z","comments":true,"path":"2015/04/21/28iOSä¸­è¡¨è§†å›¾(UITableView)ä½¿ç”¨è¯¦è§£/","link":"","permalink":"http://huishao.cc/2015/04/21/28iOSä¸­è¡¨è§†å›¾(UITableView)ä½¿ç”¨è¯¦è§£/","excerpt":"","text":"iOSä¸­UITableViewä½¿ç”¨æ€»ç»“ä¸€ã€åˆå§‹åŒ–æ–¹æ³•- (instancetype)initWithFrame:(CGRect)frame style:(UITableViewStyle)style; è¿™ä¸ªæ–¹æ³•åˆå§‹åŒ–è¡¨è§†å›¾çš„frameå¤§å°å¹¶ä¸”è®¾ç½®ä¸€ä¸ªé£æ ¼ï¼ŒUITableViewStyleæ˜¯ä¸€ä¸ªæšä¸¾ï¼Œå¦‚ä¸‹ï¼š 1234typedef NS_ENUM(NSInteger, UITableViewStyle) &#123; UITableViewStylePlain, // æ ‡å‡†çš„è¡¨è§†å›¾é£æ ¼ UITableViewStyleGrouped // åˆ†ç»„çš„è¡¨è§†å›¾é£æ ¼&#125;; äºŒã€å¸¸ç”¨å±æ€§è·å–è¡¨è§†å›¾çš„é£æ ¼(åªè¯»å±æ€§) @property (nonatomic, readonly) UITableViewStyle style; è®¾ç½®è¡¨ç¤ºå›¾ä»£ç†å’Œæ•°æ®æºä»£ç†(ä»£ç†æ–¹æ³•åé¢è®¨è®º) @property (nonatomic, assign) id &lt;UITableViewDataSource> dataSource; @property (nonatomic, assign) id &lt;UITableViewDelegate> delegate; è®¾ç½®è¡¨ç¤ºå›¾çš„è¡Œé«˜(é»˜è®¤ä¸º44) @property (nonatomic)CGFloat rowHeight; è®¾ç½®åˆ†åŒºçš„å¤´è§†å›¾é«˜åº¦å’Œå°¾è§†å›¾é«˜åº¦(å½“ä»£ç†æ–¹æ³•æ²¡æœ‰å®ç°æ—¶æ‰æœ‰æ•ˆ) @property (nonatomic) CGFloat sectionHeaderHeight; @property (nonatomic) CGFloat sectionFooterHeight; è®¾ç½®ä¸€ä¸ªè¡Œé«˜çš„ä¼°è®¡å€¼(é»˜è®¤ä¸º0ï¼Œè¡¨ç¤ºæ²¡æœ‰ä¼°è®¡,7.0ä¹‹åå¯ç”¨) @property (nonatomic) CGFloat estimatedRowHeight; æ³¨æ„ï¼šè¿™ä¸ªå±æ€§å®˜æ–¹çš„è§£é‡Šæ˜¯å¦‚æœä½ çš„tableViewçš„è¡Œé«˜æ˜¯å¯å˜çš„ï¼Œé‚£ä¹ˆè®¾è®¡ä¸€ä¸ªä¼°è®¡é«˜åº¦å¯ä»¥åŠ å¿«ä»£ç çš„è¿è¡Œæ•ˆç‡ã€‚ ä¸‹é¢è¿™ä¸¤ä¸ªå±æ€§å’Œä¸Šé¢ç›¸ä¼¼ï¼Œåˆ†åˆ«è®¾ç½®åˆ†åŒºå¤´è§†å›¾å’Œå°¾è§†å›¾çš„ä¼°è®¡é«˜åº¦(7.0ä¹‹åå¯ç”¨) @property (nonatomic) CGFloat estimatedSectionHeaderHeight; @property (nonatomic) CGFloat estimatedSectionFooterHeight; è®¾ç½®åˆ†å‰²çº¿çš„ä½ç½® @property (nonatomic) UIEdgeInsets separatorInset; å¦‚æœç»†å¿ƒï¼Œä½ å¯èƒ½ä¼šå‘ç°ç³»ç»Ÿé»˜è®¤çš„tableViewçš„åˆ†å‰²çº¿å·¦ç«¯å¹¶æ²¡æœ‰é¡¶åˆ°è¾¹æ²¿ã€‚é€šè¿‡è¿™ä¸ªå±æ€§ï¼Œå¯ä»¥æ‰‹åŠ¨è®¾ç½®åˆ†å‰²çº¿çš„ä½ç½®åç§»ï¼Œæ¯”å¦‚ä½ å‘è®©tableViewçš„åˆ†å‰²çº¿åªæ˜¾ç¤ºå³åŠè¾¹ï¼Œå¯ä»¥å¦‚ä¸‹è®¾ç½®ï¼š 12UITableView * tab = [[UITableView alloc]initWithFrame:self.view.frame style:UITableViewStylePlain];tab.separatorInset=UIEdgeInsetsMake(0, tab.frame.size.width/2, 0,0); è®¾ç½®tableViewèƒŒæ™¯viewè§†å›¾ @property(nonatomic, readwrite, retain) UIView *backgroundView; ä¸‰ã€å¸¸ç”¨æ–¹æ³•è¯¦è§£é‡è½½tableView - (void)reloadData; é‡è½½ç´¢å¼•æ  - (void)reloadSectionIndexTitles; è¿™ä¸ªæ–¹æ³•å¸¸ç”¨è¯­æ–°åŠ æˆ–è€…åˆ é™¤äº†ç´¢å¼•ç±»åˆ«è€Œæ— éœ€åˆ·æ–°æ•´ä¸ªè¡¨è§†å›¾çš„æƒ…å†µä¸‹ã€‚ è·å–åˆ†åŒºæ•° - (NSInteger)numberOfSections; æ ¹æ®åˆ†åŒºè·å–è¡Œæ•° - (NSInteger)numberOfRowsInSection:(NSInteger)section; è·å–åˆ†åŒºçš„å¤§å°(åŒ…æ‹¬å¤´è§†å›¾ï¼Œæ‰€æœ‰è¡Œå’Œå°¾è§†å›¾) - (CGRect)rectForSection:(NSInteger)section; æ ¹æ®åˆ†åŒºåˆ†åˆ«è·å–å¤´è§†å›¾ï¼Œå°¾è§†å›¾å’Œè¡Œçš„é«˜åº¦ - (CGRect)rectForHeaderInSection:(NSInteger)section; - (CGRect)rectForFooterInSection:(NSInteger)section; - (CGRect)rectForRowAtIndexPath:(NSIndexPath *)indexPath; è·å–æŸä¸ªç‚¹åœ¨tableViewä¸­çš„ä½ç½®ä¿¡æ¯ - (NSIndexPath *)indexPathForRowAtPoint:(CGPoint)point; è·å–æŸä¸ªcellåœ¨tableViewä¸­çš„ä½ç½®ä¿¡æ¯ - (NSIndexPath )indexPathForCell:(UITableViewCell )cell; æ ¹æ®ä¸€ä¸ªçŸ©å½¢èŒƒå›´è¿”å›ä¸€ä¸ªä¿¡æ¯æ•°ç»„ï¼Œæ•°ç»„ä¸­æ˜¯æ¯ä¸€è¡Œrowçš„ä½ç½®ä¿¡æ¯ - (NSArray *)indexPathsForRowsInRect:(CGRect)rect; é€šè¿‡ä½ç½®è·¯å¾„è·å–cell - (UITableViewCell )cellForRowAtIndexPath:(NSIndexPath )indexPath; è·å–æ‰€æœ‰å¯è§çš„cell - (NSArray *)visibleCells; è·å–æ‰€æœ‰å¯è§è¡Œçš„ä½ç½®ä¿¡æ¯ - (NSArray *)indexPathsForVisibleRows; æ ¹æ®åˆ†åŒºè·å–å¤´è§†å›¾ - (UITableViewHeaderFooterView *)headerViewForSection:(NSInteger)section; æ ¹æ®åˆ†åŒºè·å–å°¾è§†å›¾ - (UITableViewHeaderFooterView *)footerViewForSection:(NSInteger)section; ä½¿è¡¨ç¤ºå›¾å®šä½åˆ°æŸä¸€ä½ç½®(è¡Œ) - (void)scrollToRowAtIndexPath:(NSIndexPath *)indexPath atScrollPosition:(UITableViewScrollPosition)scrollPosition animated:(BOOL)animated; æ³¨æ„ï¼šindexPahå‚æ•°æ˜¯å®šä½çš„ä½ç½®ï¼Œå†³å®šäºåˆ†åŒºå’Œè¡Œå·ã€‚animatedå‚æ•°å†³å®šæ˜¯å¦æœ‰åŠ¨ç”»ã€‚scrollPositionå‚æ•°å†³å®šå®šä½çš„ç›¸å¯¹ä½ç½®ï¼Œå®ƒä½¿ä¸€ä¸ªæšä¸¾ï¼Œå¦‚ä¸‹ï¼š 123456typedef NS_ENUM(NSInteger, UITableViewScrollPosition) &#123; UITableViewScrollPositionNone,//åŒUITableViewScrollPositionTop UITableViewScrollPositionTop,//å®šä½å®Œæˆåï¼Œå°†å®šä½çš„è¡Œæ˜¾ç¤ºåœ¨tableViewçš„é¡¶éƒ¨ UITableViewScrollPositionMiddle,//å®šä½å®Œæˆåï¼Œå°†å®šä½çš„è¡Œæ˜¾ç¤ºåœ¨tableViewçš„ä¸­é—´ UITableViewScrollPositionBottom//å®šä½å®Œæˆåï¼Œå°†å®šä½çš„è¡Œæ˜¾ç¤ºåœ¨tableViewæœ€ä¸‹é¢&#125;; ä½¿è¡¨ç¤ºå›¾å®šä½åˆ°é€‰ä¸­è¡Œ - (void)scrollToNearestSelectedRowAtScrollPosition:(UITableViewScrollPosition)scrollPosition animated:(BOOL)animated; è¿™ä¸ªå‡½æ•°ä¸ä¸Šé¢çš„éå¸¸ç›¸ä¼¼ï¼Œåªæ˜¯å®ƒæ˜¯å°†è¡¨ç¤ºå›¾å®šä½åˆ°é€‰ä¸­çš„è¡Œã€‚ å››ã€tableViewæ“ä½œåˆ·æ–°å—çš„åº”ç”¨åœ¨ä»‹ç»åŠ¨ç”»å—ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹å‡ ä¸ªå‡½æ•°ï¼š æ’å…¥åˆ†åŒº - (void)insertSections:(NSIndexSet *)sections withRowAnimation:(UITableViewRowAnimation)animation; animationå‚æ•°æ˜¯ä¸€ä¸ªæšä¸¾ï¼Œæšä¸¾çš„åŠ¨ç”»ç±»å‹å¦‚ä¸‹ 12345678910typedef NS_ENUM(NSInteger, UITableViewRowAnimation) &#123; UITableViewRowAnimationFade,//æ·¡å…¥æ·¡å‡º UITableViewRowAnimationRight,//ä»å³æ»‘å…¥ UITableViewRowAnimationLeft,//ä»å·¦æ»‘å…¥ UITableViewRowAnimationTop,//ä»ä¸Šæ»‘å…¥ UITableViewRowAnimationBottom,//ä»ä¸‹æ»‘å…¥ UITableViewRowAnimationNone, //æ²¡æœ‰åŠ¨ç”» UITableViewRowAnimationMiddle, UITableViewRowAnimationAutomatic = 100 // è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„åŠ¨ç”»&#125;; åˆ é™¤åˆ†åŒº - (void)deleteSections:(NSIndexSet *)sections withRowAnimation:(UITableViewRowAnimation)animation; é‡è½½ä¸€ä¸ªåˆ†åŒº - (void)reloadSections:(NSIndexSet *)sections withRowAnimation:(UITableViewRowAnimation)animation ; ç§»åŠ¨ä¸€ä¸ªåˆ†åŒº - (void)moveSection:(NSInteger)section toSection:(NSInteger)newSection; æ’å…¥ä¸€äº›è¡Œ - (void)insertRowsAtIndexPaths:(NSArray *)indexPaths withRowAnimation:(UITableViewRowAnimation)animation; åˆ é™¤ä¸€äº›è¡Œ - (void)deleteRowsAtIndexPaths:(NSArray *)indexPaths withRowAnimation:(UITableViewRowAnimation)animation; é‡è½½ä¸€äº›è¡Œ - (void)reloadRowsAtIndexPaths:(NSArray *)indexPaths withRowAnimation:(UITableViewRowAnimation)animation; ç§»åŠ¨æŸè¡Œ - (void)moveRowAtIndexPath:(NSIndexPath )indexPath toIndexPath:(NSIndexPath )newIndexPath; äº†è§£äº†ä¸Šé¢å‡ ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬æ¥çœ‹ä»€ä¹ˆæ˜¯æ“ä½œåˆ·æ–°å—ï¼š å½“æˆ‘ä»¬è°ƒç”¨çš„ä¸Šé¢çš„å‡½æ•°æ—¶ï¼ŒtableViewä¼šç«‹åˆ»è°ƒç”¨ä»£ç†æ–¹æ³•è¿›è¡Œåˆ·æ–°ï¼Œå¦‚æœå…¶ä¸­æˆ‘ä»¬æ‰€åšçš„æ“ä½œæ˜¯åˆ é™¤æŸè¡Œï¼Œè€Œç„¶æ•°æ®æºæ•°ç»„æˆ‘ä»¬å¯èƒ½å¹¶æ²¡æœ‰åˆ·æ–°ï¼Œç¨‹åºå°±ä¼šå´©æºƒæ‰ï¼ŒåŸå› æ˜¯ä»£ç†è¿”å›çš„ä¿¡æ¯å’Œæˆ‘ä»¬åˆ é™¤åä¸ç¬¦ã€‚ IOSä¸ºæˆ‘ä»¬æä¾›äº†ä¸‹é¢ä¸¤ä¸ªå‡½æ•°è§£å†³è¿™ä¸ªé—®é¢˜ï¼š å¼€å§‹å—æ ‡å¿— - (void)beginUpdates; ç»“æŸå¿«æ ‡å¿— - (void)endUpdates; æˆ‘ä»¬å¯ä»¥å°†æˆ‘ä»¬è¦åšçš„æ“ä½œå…¨éƒ¨å†™åœ¨è¿™ä¸ªå—ä¸­ï¼Œé‚£ä¹ˆï¼Œåªæœ‰å½“ç¨‹åºæ‰§è¡Œåˆ°ç»“æŸå¿«æ ‡å¿—åï¼Œæ‰ä¼šè°ƒç”¨ä»£ç†åˆ·æ–°æ–¹æ³•ã€‚ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š 1234[tab beginUpdates]; [tab deleteRowsAtIndexPaths:@[[NSIndexPath indexPathForRow:1 inSection:0]] withRowAnimation:UITableViewRowAnimationLeft]; [dataArray removeObjectAtIndex:1]; [tab endUpdates]; æ³¨æ„ï¼šä¸è¦åœ¨è¿™ä¸ªå—ä¸­è°ƒç”¨reloadDataè¿™ä¸ªæ–¹æ³•ï¼Œå®ƒä¼šä½¿åŠ¨ç”»å¤±æ•ˆã€‚ äº”ã€tableViewçš„ç¼–è¾‘æ“ä½œè®¾ç½®æ˜¯å¦æ˜¯ç¼–è¾‘çŠ¶æ€(ç¼–è¾‘çŠ¶æ€ä¸‹çš„cellå·¦è¾¹ä¼šå‡ºç°ä¸€ä¸ªå‡å·ï¼Œç‚¹å‡»å³è¾¹ä¼šåˆ’å‡ºåˆ é™¤æŒ‰é’®) @property (nonatomic, getter=isEditing) BOOL editing; - (void)setEditing:(BOOL)editing animated:(BOOL)animated; è®¾ç½®cellæ˜¯å¦å¯ä»¥è¢«é€‰ä¸­(é»˜è®¤ä¸ºYES) @property (nonatomic) BOOL allowsSelection; è®¾ç½®cellç¼–è¾‘æ¨¡å¼ä¸‹æ˜¯å¦å¯ä»¥è¢«é€‰ä¸­ @property (nonatomic) BOOL allowsSelectionDuringEditing; è®¾ç½®æ˜¯å¦æ”¯æŒå¤šé€‰ @property (nonatomic) BOOL allowsMultipleSelection; è®¾ç½®ç¼–è¾‘æ¨¡å¼ä¸‹æ˜¯å¦æ”¯æŒå¤šé€‰ @property (nonatomic) BOOL allowsMultipleSelectionDuringEditing; å…­ã€é€‰ä¸­cellçš„ç›¸å…³æ“ä½œè·å–é€‰ä¸­cellçš„ä½ç½®ä¿¡æ¯ - (NSIndexPath *)indexPathForSelectedRow; è·å–å¤šé€‰cellçš„ä½ç½®ä¿¡æ¯ - (NSArray *)indexPathsForSelectedRows; ä»£ç æ‰‹åŠ¨é€‰ä¸­ä¸å–æ¶ˆé€‰ä¸­æŸè¡Œ - (void)selectRowAtIndexPath:(NSIndexPath *)indexPath animated:(BOOL)animated scrollPosition:(UITableViewScrollPosition)scrollPosition; - (void)deselectRowAtIndexPath:(NSIndexPath *)indexPath animated:(BOOL)animated; æ³¨æ„ï¼šè¿™ä¸¤ä¸ªæ–¹æ³•å°†ä¸ä¼šå›è°ƒä»£ç†ä¸­çš„æ–¹æ³•ã€‚ ä¸ƒã€tableViewé™„ä»¶çš„ç›¸å…³æ–¹æ³•è®¾ç½®ç´¢å¼•æ æœ€å°æ˜¾ç¤ºè¡Œæ•° @property (nonatomic) NSInteger sectionIndexMinimumDisplayRowCount; è®¾ç½®ç´¢å¼•æ å­—ä½“é¢œè‰² @property (nonatomic, retain) UIColor *sectionIndexColor; è®¾ç½®ç´¢å¼•æ èƒŒæ™¯é¢œè‰² @property (nonatomic, retain) UIColor *sectionIndexBackgroundColor; è®¾ç½®ç´¢å¼•æ è¢«é€‰ä¸­æ—¶çš„é¢œè‰² @property (nonatomic, retain) UIColor *sectionIndexTrackingBackgroundColor; è®¾ç½®åˆ†å‰²çº¿çš„é£æ ¼ @property (nonatomic) UITableViewCellSeparatorStyle separatorStyle; è¿™ä¸ªé£æ ¼æ˜¯ä¸€ä¸ªæšä¸¾ï¼Œå¦‚ä¸‹ï¼š 12345typedef NS_ENUM(NSInteger, UITableViewCellSeparatorStyle) &#123; UITableViewCellSeparatorStyleNone,//æ— çº¿ UITableViewCellSeparatorStyleSingleLine,//æœ‰çº¿ UITableViewCellSeparatorStyleSingleLineEtched &#125;; è®¾ç½®åˆ†å‰²çº¿é¢œè‰² @property (nonatomic, retain) UIColor *separatorColor; è®¾ç½®åˆ†å‰²çº¿æ¯›ç»ç’ƒæ•ˆæœ(IOS8ä¹‹åå¯ç”¨) @property (nonatomic, copy) UIVisualEffect *separatorEffect; æ³¨æ„ï¼šè¿™ä¸ªå±æ€§æ˜¯IOS8ä¹‹åæ–°çš„ã€‚ è®¾ç½®tableViewå¤´è§†å›¾ @property (nonatomic, retain) UIView *tableHeaderView; è®¾ç½®tableViewå°¾è§†å›¾ @property (nonatomic, retain) UIView *tableFooterView; ä»å¤ç”¨æ± ä¸­å–cell - (id)dequeueReusableCellWithIdentifier:(NSString *)identifier; è·å–ä¸€ä¸ªå·²æ³¨å†Œçš„cell - (id)dequeueReusableCellWithIdentifier:(NSString )identifier forIndexPath:(NSIndexPath )indexPath ä»å¤ç”¨æ± è·å–å¤´è§†å›¾æˆ–å°¾è§†å›¾ - (id)dequeueReusableHeaderFooterViewWithIdentifier:(NSString *)identifier; é€šè¿‡xibæ–‡ä»¶æ³¨å†Œcell - (void)registerNib:(UINib )nib forCellReuseIdentifier:(NSString )identifier; é€šè¿‡OCç±»æ³¨å†Œcell - (void)registerClass:(Class)cellClass forCellReuseIdentifier:(NSString *)identifier ä¸Šé¢ä¸¤ä¸ªæ–¹æ³•æ˜¯IOS6ä¹‹åçš„æ–¹æ³•ã€‚ é€šè¿‡xibæ–‡ä»¶å’ŒOCç±»è·å–æ³¨å†Œå¤´è§†å›¾å’Œå°¾è§†å›¾ - (void)registerNib:(UINib )nib forHeaderFooterViewReuseIdentifier:(NSString )identifier; - (void)registerClass:(Class)aClass forHeaderFooterViewReuseIdentifier:(NSString *) å…³äºtableViewçš„ä»£ç†æ–¹æ³•ï¼Œå› ä¸ºç¯‡å¹…åŸå› ï¼Œæ€»ç»“åœ¨ä¸‹ä¸€ç¯‡åšå®¢ä¸­ã€‚ é”™è¯¯ä¹‹å¤„ æ¬¢è¿æŒ‡æ­£ å­¦ä¹ ä½¿ç”¨ æ¬¢è¿è½¬è½½ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[{"name":"iOSç¼–ç¨‹","slug":"iOSç¼–ç¨‹","permalink":"http://huishao.cc/tags/iOSç¼–ç¨‹/"}],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"iOSä½¿ç”¨Xcodeå¯è§†åŒ–å›¾åƒç¼–è¾‘åŠŸèƒ½è¿›è¡Œå›¾ç‰‡æ‹‰ä¼¸","slug":"27iOSä½¿ç”¨xcodeå¯è§†åŒ–å›¾åƒç¼–è¾‘åŠŸèƒ½è¿›è¡Œå›¾ç‰‡æ‹‰ä¼¸","date":"2015-04-20T16:00:00.000Z","updated":"2021-06-10T08:59:39.270Z","comments":true,"path":"2015/04/21/27iOSä½¿ç”¨xcodeå¯è§†åŒ–å›¾åƒç¼–è¾‘åŠŸèƒ½è¿›è¡Œå›¾ç‰‡æ‹‰ä¼¸/","link":"","permalink":"http://huishao.cc/2015/04/21/27iOSä½¿ç”¨xcodeå¯è§†åŒ–å›¾åƒç¼–è¾‘åŠŸèƒ½è¿›è¡Œå›¾ç‰‡æ‹‰ä¼¸/","excerpt":"","text":"iOSä¸­å¯è§†åŒ–æ‹‰ä¼¸å›¾ç‰‡æŠ€å·§ä¸€ã€è¡¥å……åœ¨æˆ‘çš„å¦ä¸€ç¯‡åšå®¢http://my.oschina.net/u/2340880/blog/403996ä¸­æ¢è®¨äº†IOSæ‹‰ä¼¸å›¾åƒ(UIImage)çš„å‡ ç§æ–¹æ³•å’Œä¸€äº›å°ç»éªŒï¼Œè¿™ç¯‡æ˜¯ä¸€ä¸ªè¡¥å……ï¼Œå†å°†xcodeä¸­çš„å¦ä¸€ç§å¯è§†åŒ–æ‹‰ä¼¸å›¾åƒçš„æ–¹æ³•çš„ä½¿ç”¨ä»‹ç»ç»™å¤§å®¶ã€‚ äºŒã€å¦‚ä½•ä½¿ç”¨IOSå¼€å‘æ–‡æ¡£ä¸­çš„æè¿°ï¼šhttps://developer.apple.com/library/ios/recipes/xcode_help-image_catalog-1.0/chapters/SlicinganImage.html 1ã€xcode5çš„æ–°ç‰¹æ€§xcode5ä¹‹åï¼ŒIOSä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªç®¡ç†å›¾ç‰‡çš„æ–°æ–¹æ³•Asset Catalogsï¼Œç®€å•è¯´æ¥ï¼Œå®ƒç›¸å½“äºä¸€ä¸ªç›®å½•ï¼Œä¸“é—¨ç”¨æ¥ç®¡ç†æˆ‘ä»¬é¡¹ç›®ä¸­çš„å›¾ç‰‡ç´ æï¼ŒåŒ…æ‹¬Iconå’Œå¯åŠ¨é¡µï¼Œè¿™æ ·ä½¿é¡¹ç›®ç®¡ç†æ›´åŠ æ–¹ä¾¿ä¹Ÿæ›´åŠ ç®€æ´ã€‚ åˆ›å»ºä¸€ä¸ªAssetCatalogsï¼šåœ¨xcodeä¸­æ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œé€‰æ‹©AssetCatalogsï¼Œå¦‚ä¸‹ï¼š ç„¶åæˆ‘ä»¬ç‚¹å¼€è¿™ä¸ªåŒ…ï¼Œå°†å›¾ç‰‡ç›´æ¥æ‹–å…¥å·¥å…·åŒºå³å¯ï¼š 2ã€ä½¿ç”¨AssetCatalogsä¸­çš„å¯è§†åŒ–å·¥å…·è¿›è¡Œå›¾ç‰‡æ‹‰ä¼¸å®Œæˆäº†ä¸Šé¢çš„æ­¥éª¤ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥å¯¹ç®¡ç†çš„å›¾ç‰‡è¿›è¡Œå¤„ç†ï¼Œç‚¹å‡»å³ä¸‹è§’çš„show SlicingæŒ‰é’®ï¼Œæˆ‘ä»¬å°±ä¼šè¿›å…¥å¯è§†åŒ–ç¼–è¾‘åŒºï¼Œå¦‚ä¸‹ï¼š å¦‚ä¸Šå›¾ï¼Œæœ‰ä¸‰æ¡ç«–ç›´çº¿ï¼Œå…¶ä¸­è¾¹ç•Œçš„ä¸¤æ¡åˆ†åˆ«çº¦æŸäº†å›¾ç‰‡ä¸¤ä¾§ä¸è¢«æ‹‰ä¼¸çš„åŒºåŸŸèŒƒå›´ï¼Œä¸­é—´è™šçº¿å’Œå·¦ä¾§è™šçº¿å›´æˆçš„éƒ¨åˆ†ï¼Œå°†æ˜¯è¢«å¤åˆ¶æ‹‰ä¼¸çš„åŒºåŸŸã€‚æ°´å¹³æ–¹å‘çš„çº¿åŒç†ã€‚ å¾ˆé‡è¦çš„ä¸€ç‚¹ï¼šå®˜æ–¹æ–‡æ¡£å‘Šè¯‰æˆ‘ä»¬ï¼Œè¿™ä¸ªæ–¹æ³•åªèƒ½åœ¨iOS 7 æˆ–è€… OS X v10.10ä¹‹åä½¿ç”¨ã€‚æ•ˆæœå¦‚ä¸‹ï¼š 3ã€åœ¨xibæ–‡ä»¶ä¸­UIImageçš„æ‹‰ä¼¸åœ¨xibæ–‡ä»¶ä¸­çš„UIImageViewï¼Œåœ¨ä¸Šé¢åŠ ä¸Šå›¾ç‰‡åï¼Œå¯ä»¥è®¾ç½®stretchingè¿™ä¸ªå±æ€§ï¼š è¿™ä¸ªå±æ€§çš„å››ä¸ªå€¼ï¼šX,Y,Width,Heightçš„å–å€¼èŒƒå›´æ˜¯0-1ï¼›Xï¼ŒYï¼Œç”¨æ¥ç¡®å®šä¸€ä¸ªç‚¹ï¼Œæ¯”å¦‚æˆ‘ä»¬è®¾ç½®ä¸ºX=0.1ï¼ŒY=0.1ï¼Œåˆ™è¿™ä¸ªç‚¹å°±æ˜¯å›¾ç‰‡çš„å·¦ä¸Šè§’å¼€å§‹ï¼Œæ°´å¹³1/10å¤„å’Œç«–ç›´1/10å¤„ï¼Œè®¾ç½®å›¾ç‰‡çš„æ‹‰ä¼¸ç‚¹ä¸ºä»è¿™ä¸ªç‚¹å¼€å§‹ã€‚åä¸¤ä¸ªå‚æ•°åˆ†åˆ«è®¾ç½®å›¾ç‰‡æ‹‰ä¼¸åŒºåŸŸçš„å®½åº¦å’Œé«˜åº¦ï¼Œæ¯”å¦‚æˆ‘ä»¬è¿™æ ·è®¾ç½®ï¼šWidth=0.8ï¼ŒHeight=0.8ï¼Œåˆ™å›¾ç‰‡æ‹‰ä¼¸æ—¶ä¸Šä¸‹å·¦å³å„1/10çš„å®½åº¦ä¸ä¼šè¢«æ‹‰ä¼¸ï¼Œä¸­é—´éƒ¨åˆ†è¢«æ‹‰ä¼¸ï¼Œè¿˜æ˜¯åˆšæ‰çš„å›¾ç‰‡ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[{"name":"iOSç¼–ç¨‹","slug":"iOSç¼–ç¨‹","permalink":"http://huishao.cc/tags/iOSç¼–ç¨‹/"}],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOSä¸­å›¾ç‰‡(UIImage)æ‹‰ä¼¸æŠ€å·§","slug":"26iOSä¸­å›¾ç‰‡(UIImage)æ‹‰ä¼¸æŠ€å·§","date":"2015-04-19T16:00:00.000Z","updated":"2021-06-10T08:58:17.409Z","comments":true,"path":"2015/04/20/26iOSä¸­å›¾ç‰‡(UIImage)æ‹‰ä¼¸æŠ€å·§/","link":"","permalink":"http://huishao.cc/2015/04/20/26iOSä¸­å›¾ç‰‡(UIImage)æ‹‰ä¼¸æŠ€å·§/","excerpt":"","text":"iOSä¸­å›¾ç‰‡æ‹‰ä¼¸æŠ€å·§ä¸æ–¹æ³•æ€»ç»“ä¸€ã€äº†è§£å‡ ä¸ªå›¾åƒæ‹‰ä¼¸çš„å‡½æ•°å’Œæ–¹æ³•1ã€ç›´æ¥æ‹‰ä¼¸æ³•ç®€å•æš´åŠ›ï¼Œå´æ˜¯æœ€æœ€å¸¸ç”¨çš„æ–¹æ³•ï¼Œç›´æ¥å°†å›¾ç‰‡è®¾ç½®ä¸ºImageViewçš„imageå±æ€§ï¼Œå›¾ç‰‡ä¾¿ä¼šéšUIImageViewå¯¹è±¡çš„å¤§å°åšè‡ªåŠ¨æ‹‰ä¼¸ã€‚è¿™ç§æ‹‰ä¼¸çš„æ–¹æ³•æœ‰ä¸€ä¸ªè‡´å‘½çš„ç¼ºé™·ï¼Œå®ƒä¼šä½¿å›¾åƒå‘ç”Ÿå¤±çœŸä¸å½¢å˜ã€‚ 2ã€åƒç´ ç‚¹çš„æ‹‰ä¼¸- (UIImage *)stretchableImageWithLeftCapWidth:(NSInteger)leftCapWidth topCapHeight:(NSInteger)topCapHeight; è¿™ä¸ªå‡½æ•°æˆ‘ä»¬å¯ä»¥ç”¨æ¥æ‹‰ä¼¸ç±»ä¼¼QQï¼Œå¾®ä¿¡çš„èŠå¤©æ°”æ³¡èƒŒæ™¯å›¾ï¼Œå®ƒçš„ä¸¤ä¸ªå‚æ•°åˆ†åˆ«leftCapWidthå’ŒtopCapHeightï¼Œè¿™ä¸¤ä¸ªå‚æ•°ç»™å®šä¸€ä¸ªåæ ‡ï¼Œæ¯”å¦‚ï¼š 12 UIImage * img= [UIImage imageNamed:@&quot;11.png&quot;]; img = [img stretchableImageWithLeftCapWidth:1 topCapHeight:1]; è¿™æ®µä»£ç çš„æ„æ€æ˜¯å°†å›¾ç‰‡ä»å·¦èµ·ç¬¬2åˆ—ï¼Œä¸Šèµ·ç¬¬2è¡Œï¼Œåæ ‡ä¸º(2,2)çš„åƒç´ ç‚¹è¿›è¡Œå¤åˆ¶ã€‚å°†å›¾ç‰‡è¿›è¡Œæ‹‰ä¼¸ã€‚è¿™ä¸ªæ–¹æ³•å’Œä¸Šé¢çš„æ–¹æ³•æ¯”èµ·æ¥ä¼¼ä¹çµæ´»æ€§æ›´å¤šäº†ï¼Œä½†å…¶ä¹Ÿæœ‰å®ƒçš„ä¸€äº›å±€é™ï¼Œå¦‚æœè¢«æ‹‰ä¼¸çš„å›¾ç‰‡ä¸­é—´ä¹Ÿæœ‰éœ€è¦æ‹‰ä¼¸çš„åƒç´ ï¼Œè¿™ä¸ªæ–¹æ³•å°±æ— èƒ½ä¸ºåŠ›äº†ï¼Œä¾‹å¦‚ï¼Œå¦‚ä¸‹çš„ä¸€å¼ å›¾ç‰‡ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶æ‹‰ä¼¸æ”¾å¤§ï¼š ä¾¿ä¼šå‡ºç°è¿™æ ·çš„æ•ˆæœï¼š è¿™æ˜æ˜¾å’Œæˆ‘ä»¬çš„æ„å›¾æ˜¯ä¸ç¬¦çš„ï¼Œé‚£ä¹ˆï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•ã€‚ 3ã€åŒºåŸŸçš„æ‹‰ä¼¸- (UIImage *)resizableImageWithCapInsets:(UIEdgeInsets)capInsets; è¿™ä¸ªå‡½æ•°éœ€è¦è®¾ç½®ä¸€ä¸ªUIEdgeInsetså‚æ•°ï¼ŒUIEdgeInsetsç»“æ„ä½“å¦‚ä¸‹ï¼š 123typedef struct UIEdgeInsets &#123; CGFloat top, left, bottom, right; &#125; UIEdgeInsets; å®ƒåˆ†åˆ«å¯¹ç”¨äº†å›¾ç‰‡è¿›è¡Œæ‹‰ä¼¸çš„åŒºåŸŸè·ç¦»é¡¶éƒ¨ã€å·¦éƒ¨ã€ä¸‹éƒ¨ã€å³éƒ¨çš„åƒç´ ã€‚æ¯”å¦‚ï¼Œä¸€ä¸ª10*10åƒç´ çš„å›¾ç‰‡ï¼Œå°†UIEdgeInsetså‚æ•°å…¨éƒ¨è®¾ç½®ä¸º1ï¼Œåˆ™å®é™…æ‹‰ä¼¸çš„éƒ¨åˆ†å°±æ˜¯ä¸­é—´çš„8*8çš„åŒºåŸŸçš„åƒç´ ã€‚æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œè¿™ä¸ªæ–¹æ³•é»˜è®¤ä½¿ç”¨çš„æ‹‰ä¼¸æ¨¡å¼æ˜¯åŒºåŸŸå¤åˆ¶ï¼Œæ¯”å¦‚è¿˜æ˜¯ä¸Šé¢çš„å›¾æ¡ˆï¼Œå¦‚ä¸‹ä»£ç æ‹‰ä¼¸ï¼š 12 UIImage * img= [UIImage imageNamed:@&quot;11.png&quot;]; img = [img resizableImageWithCapInsets:UIEdgeInsetsMake(1, 1, 1, 1)]; ç»“æœå¦‚ä¸‹ï¼š å¯ä»¥æ˜æ˜¾çš„çœ‹åˆ°ä¸­é—´çš„è™šçº¿ï¼Œè¿™ä¾¿æ˜¯åŒºåŸŸå¤åˆ¶çš„æ°ä½œã€‚ é‚£ä¹ˆé—®é¢˜åˆæ¥äº†ï¼Œå¦‚æœæŸäº›å›¾ç‰‡ä¸­é—´æœ‰æ¸å˜ï¼Œæˆ‘ä»¬è¯¥æ€ä¹ˆå¤„ç†äº†ï¼Œæ¥çœ‹ä¸‹ä¸€ä¸ªå‡½æ•°ã€‚ 4ã€æ‹‰ä¼¸æ¨¡å¼çš„è®¾ç½®- (UIImage *)resizableImageWithCapInsets:(UIEdgeInsets)capInsets resizingMode:(UIImageResizingMode)resizingMode; è¿™ä¸ªå‡½æ•°å’Œä¸Šä¸€ä¸ªå‡½æ•°ç›¸æ¯”ï¼Œå”¯ä¸€çš„å·®åˆ«æ˜¯å¤šäº†ä¸€ä¸ªå‚æ•°ã€‚è¿™ä¸ªå‚æ•°æ˜¯ä¸ªæšä¸¾ï¼Œå¦‚ä¸‹ï¼š 1234typedef NS_ENUM(NSInteger, UIImageResizingMode) &#123; UIImageResizingModeTile,//è¿›è¡ŒåŒºåŸŸå¤åˆ¶æ¨¡å¼æ‹‰ä¼¸ UIImageResizingModeStretch,//è¿›è¡Œæ¸å˜å¤åˆ¶æ¨¡å¼æ‹‰ä¼¸&#125;; ç°åœ¨å°±æ˜äº†äº†ï¼Œæˆ‘ä»¬åªéœ€è¦è®¾ç½®ä¸€ä¸‹æ¨¡å¼ï¼Œå°±å¯ä»¥å®ç°æ¸å˜æ‹‰ä¼¸äº†ï¼š 12 UIImage * img= [UIImage imageNamed:@&quot;11.png&quot;]; img = [img resizableImageWithCapInsets:UIEdgeInsetsMake(1, 1, 1, 1) resizingMode:UIImageResizingModeStretch]; æ¥çœ‹ä¸€ä¸‹æ•ˆæœï¼š äºŒã€æ‹‰ä¼¸çš„ç”¨æ­¦ä¹‹åœ°åœ†è§’æŒ‰é’®ï¼Œç©ºå¿ƒæŒ‰é’®ï¼Œæ¸å˜çš„èƒŒæ™¯ï¼Œå†…å®¹å¯å˜çš„æ ‡ç­¾ï¼ŒèŠå¤©æ°”æ³¡ç­‰ç­‰è¿™æ ·çš„ç´ æåœ¨APPä¸­å¾ˆå¯èƒ½ä¼šå¤šæ¬¡å‡ºç°ï¼Œå¹¶ä¸”æ¯æ¬¡å‡ºç°çš„å°ºå¯¸å¯èƒ½è¿˜ä¼šç•¥å¾®æœ‰äº›å·®å¼‚ï¼Œå¦‚æœä»…ä»…ä¾é ç¾å·¥çš„ç´ æï¼Œææ€•ä¸ä»…å¾ˆéš¾è¾¾åˆ°è¦æ±‚ï¼Œä¹Ÿä¼šé¢å¤–å¢åŠ è½¯ä»¶çš„å†…å­˜å¼€é”€ï¼Œè¿™æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨æ°å½“çš„æ‹‰ä¼¸æŠ€å·§ï¼Œèƒ½ä½¿æˆ‘ä»¬çš„ä»£ç æ›´åŠ å¥å£®ï¼ŒAPPæ›´åŠ é«˜æ•ˆã€‚ ä¸‰ã€ä¸€ç‚¹å°ç»éªŒä½ æ˜¯å¦æ³¨æ„è§‚å¯Ÿè¿‡æœ€ç»†çš„çº¿ï¼Ÿ çœ‹åˆ°ä¸Šé¢çš„é—®å¥ï¼Œä½ å¯èƒ½æœ‰äº›å·®å¼‚ã€‚æœ€ç»†çš„çº¿ä¸å°±æ˜¯ä¸€åƒç´ ä¹ˆï¼Ÿç¡®å®ï¼Œèƒ½ç»˜å›¾ç”»å‡ºæ¥çš„æœ€ç»†çš„å®å¿ƒçº¿ç¡®å®æ˜¯ä¸€åƒç´ ï¼Œä½†åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ä¼˜ç§€çš„ç¾å·¥å¯Ÿè§‰åˆ°æ— è®ºå¥¹æŠŠçº¿åšçš„å¤šä¹ˆç»†ï¼Œæ— è®ºæˆ‘æ€æ ·æ§åˆ¶æ‹‰ä¼¸æ–¹æ³•ï¼Œç»˜åˆ¶å‡ºçš„ç™»å½•æ¡†æ€»æ˜¯æ²¡æœ‰QQçš„ç»†ï¼ŒQQçš„æ¡†çº¿çœ‹èµ·æ¥æ›´åŠ å¹²è„†åˆ©ç´¢ã€‚åæ¥ç´¢æ€§ç”¨ç»˜å›¾ç”»å‡ºç™»å½•æ¡†ï¼Œç»“æœå¾ˆä¸å¹¸ï¼Œæˆ‘ä¾ç„¶æ— æ³•å°†çº¿åšåˆ°åƒQQç™»å½•æ¡†é‚£æ ·ç»†è‡´ã€‚åæ¥å¶ç„¶è¯•äº†ä¸€ç§æ–¹æ³•ï¼Œä¸çŸ¥åŸç†æ˜¯å¦æ­£ç¡®ï¼Œæ•ˆæœæ€»ç®—è¾¾åˆ°äº†ï¼Œå½“ç„¶è¿™ä¹Ÿè¦å½’åŠŸäºæˆ‘ä»¬çš„ç¾å·¥ï¼Œå¥¹å°†ä¸€ä¸ªå›¾ç‰‡åšçš„å¾ˆå¤§ï¼Œé€‚é…æœ€å¤§çš„åˆ†è¾¨ç‡ï¼Œç„¶åè®©æˆ‘æ‰‹åŠ¨ç¼©ï¼Œå¦‚æ­¤ä¸€æ¥ï¼Œé‚£çº¿å°±å˜å¾—éå¸¸ç»†ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[{"name":"iOSç¼–ç¨‹","slug":"iOSç¼–ç¨‹","permalink":"http://huishao.cc/tags/iOSç¼–ç¨‹/"},{"name":"UIImage","slug":"UIImage","permalink":"http://huishao.cc/tags/UIImage/"}],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"åˆ†åˆ†é’Ÿä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼","slug":"24åˆ†åˆ†é’Ÿä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼","date":"2015-04-18T16:00:00.000Z","updated":"2021-06-10T08:53:07.481Z","comments":true,"path":"2015/04/19/24åˆ†åˆ†é’Ÿä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼/","link":"","permalink":"http://huishao.cc/2015/04/19/24åˆ†åˆ†é’Ÿä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼/","excerpt":"","text":"æ­£åˆ™è¡¨è¾¾å¼ç®€å•è¯­æ³•æ€»ç»“ä¸€ã€ä»€ä¹ˆæ˜¯æ­£åˆ™è¡¨è¾¾å¼ä»æ¦‚å¿µä¸Šæ¥è¯´ï¼Œæ­£åˆ™è¡¨è¾¾å¼ä¹Ÿæ˜¯ä¸€é—¨å°å·§è€Œç²¾ç‚¼çš„è¯­è¨€ï¼Œå®ƒå¯ä»¥ç”¨æ¥ç®€åŒ–æ£€ç´¢ç‰¹å®šçš„å­—ç¬¦ä¸²ï¼Œæ›¿æ¢ç‰¹å®šå­—ç¬¦ç­‰åŠŸèƒ½ï¼Œæœ‰è®¸å¤šå¼€å‘è¯­è¨€å·¥å…·ï¼Œéƒ½å†…åµŒæ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ã€‚é‚£ä¹ˆä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Ÿå…¶å®å®ƒå°±æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä½†è¿™ä¸ªå­—ç¬¦ä¸²å…·æœ‰ç‰¹å®šå«ä¹‰ã€‚ äºŒã€æ­£åˆ™è¡¨è¾¾å¼çš„åŸºç¡€è¯­æ³•1ã€å­—é¢å€¼æ‰€è°“å­—é¢å€¼ï¼Œå°±æ˜¯æ²¡æœ‰ä»»ä½•è½¬ä¹‰ï¼ŒæŸ¥æ‰¾çš„å¯¹è±¡å°±æ˜¯å…¶æœ¬èº«ï¼Œæ¯”å¦‚æ­£åˆ™è¡¨è¾¾å¼ abc ï¼ŒæŸ¥æ‰¾çš„ç»“æœå°±æ˜¯è¿”å›è¦æŸ¥æ‰¾å­—ç¬¦ä¸²ä¸­ aï¼Œbï¼Œcä¸‰ä¸ªå­—æ¯è¿åœ¨ä¸€èµ·çš„å­—ç¬¦ä¸²ã€‚åˆå¦‚ï¼Œ123 å°±æ˜¯æŸ¥æ‰¾åˆ°123è¿™ä¸ªå­ä¸²ã€‚ 2ã€ç‰¹æ®Šå­—ç¬¦ï¼ˆå…ƒå­—ç¬¦ï¼‰ï¼ˆ1ï¼‰å¥å·â€œ.â€åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­è¡¨ç¤ºåŒ¹é…ä»»æ„å­—ç¬¦ï¼Œå¾ˆç›¸ä¼¼äºé€šé…ç¬¦*ã€‚å¦‚æœæˆ‘ä»¬æŸ¥æ‰¾a.bè¿™ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°æ‰€æœ‰å¼€å¤´å’Œç»“å°¾ä¸ºaï¼Œbï¼Œä¸­é—´æ˜¯ä»»æ„å­—ç¬¦çš„å­—ç¬¦ä¸²ï¼Œæ¯”å¦‚abcï¼Œadcï¼Œa2cç­‰ã€‚ ï¼ˆ2ï¼‰å­—ç¬¦ç±»ï¼ˆ[]ï¼‰å¦‚æœä½ åœ¨ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ä¸­çœ‹åˆ°æœ‰ä¸€äº›å­—ç¬¦è¢«[]æ‹¬å·æ‹¬èµ·æ¥ï¼Œé‚£ä¹ˆä»–ä»¬çš„å«ä¹‰å°†ä¸å†æ˜¯ç®€å•çš„å­—é¢å€¼ï¼Œä»–ä»¬è¡¨ç¤ºæŸä¸€ä¸ªè¢«æ‹¬å·ä¸­å±æ€§çº¦æŸçš„å­—ç¬¦ã€‚æ¯”å¦‚[123456]ï¼Œè¿™ä¸ªæ­£åˆ™è¡¨è¾¾å¼è¡¨ç¤ºæ‰¾åˆ°1-6ä¸­çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼Œåˆæ¯”å¦‚a[bd]cï¼Œè¿™è¡¨ç¤ºæŸ¥æ‰¾abcæˆ–è€…adcã€‚ æ³¨æ„ï¼š 1.åœ¨å­—ç¬¦ç±»ä¸­å­—ç¬¦çš„é¡ºåºå’Œé‡å¤æ€§éƒ½ä¸æ˜¯æˆ‘ä»¬å…³å¿ƒçš„ã€‚\\[123\\]å’Œ\\[2233111\\]ï¼Œå«ä¹‰æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚ 2.å¥å·åœ¨å­—ç¬¦ç±»ä¸­è¡¨ç¤ºçš„å°±æ˜¯å…¶æœ¬èº«ï¼Œ\\[.\\]å°±æ˜¯æŸ¥æ‰¾ä¸€ä¸ªå¥å·ã€‚ ï¼ˆ3ï¼‰åŒºé—´ç¬¦å·ï¼ˆ-ï¼‰å¦‚æœæˆ‘ä»¬éœ€è¦æŸ¥æ‰¾ä¸€ä¸ªæ•°å­—ï¼Œ[0123456789]ï¼Œè¿™æ ·åšæ˜¯å¯ä»¥è¾¾åˆ°ç›®çš„çš„ï¼Œä½†è¿™å†™èµ·éå¸¸éº»çƒ¦ï¼Œå¹¶ä¸ç¬¦åˆæ­£åˆ™è¡¨è¾¾å¼å°å·§çš„ç‰¹æ€§ï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨åŒºé—´ç¬¦å·æ¥ç®€åŒ–ï¼Œ[0-9]å’Œä¸Šé¢çš„å¼å­æ„ä¹‰å®Œå…¨ä¸€æ ·ã€‚åŒæ ·ï¼Œæˆ‘ä»¬å¯ä»¥[a-zA-Z]ï¼Œè¡¨ç¤ºä»»æ„ä¸€ä¸ªå­—æ¯ã€‚ æ³¨æ„ï¼š 1.åŒºé—´çš„èŒƒå›´åº”è¯¥æœ‰æ„ä¹‰ï¼Œ\\[a-1\\]è¿™æ ·çš„åŒºé—´å¹¶æ— ä»»ä½•æ„ä¹‰ï¼Œå°½ç®¡å®ƒåœ¨è¯­æ³•ä¸Šå¯èƒ½æ²¡æœ‰é”™è¯¯ã€‚ 2.åŒºé—´å·¦å³ä¸¤ç«¯å¯¹åº”çš„æ˜¯å­—ç¬¦ï¼Œå¹¶ä¸æ˜¯æ•°å­—ï¼Œæ¯”å¦‚\\[2-41\\]ï¼Œè¿™ä¸ªå¼å­çš„å«ä¹‰æ˜¯æ‰¾åˆ°2-4çš„ä¸€ä¸ªæ•°å­—æˆ–è€…1ï¼Œå’Œ\\[1-4\\]æ˜¯ä¸€æ ·çš„ã€‚ ï¼ˆ4ï¼‰å–åç¬¦å·ï¼ˆ^ï¼‰â€œ^â€åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­è¡¨ç¤ºå–åï¼Œè¿™ä¸ªå¾ˆå¥½ç†è§£ï¼Œ[^a]ï¼Œè¡¨ç¤ºæ‰¾åˆ°é™¤äº†aä¹‹å¤–çš„ä»»æ„å­—ç¬¦ã€‚[^0-9]ï¼Œè¡¨ç¤ºæ‰¾åˆ°ä¸€ä¸ªéæ•°å­—çš„å­—ç¬¦ã€‚ æ³¨æ„ï¼š 1.^å¿…é¡»åœ¨ä¸­æ‹¬å·å†…ï¼ŒåŠå­—ç¬¦ç±»å±æ€§ä¸­ä½¿ç”¨ã€‚ 2.^æ˜¯å°†åé¢çš„æ•´ä½“ä½œä¸ºå–åæ¡ä»¶çš„ã€‚ ï¼ˆ5ï¼‰ç®€åŒ–çš„å­—ç¬¦ç±»æŸäº›ç¬¦å·å…·æœ‰å’Œå­—ç¬¦ç±»ç›¸åŒçš„å«ä¹‰ï¼š \\då’Œ[0-9]ç›¸åŒ \\wå’Œ[0-9A-Za-z_]ç›¸åŒ è¡¨ç¤ºæ•°å­—ï¼Œå­—æ¯æˆ–è€…ä¸‹åˆ’çº¿ \\sè¡¨ç¤ºåŒ¹é…ç©ºæ ¼ï¼Œtabå’Œæ¢è¡Œç­‰ä¸å¯è§ç¬¦ã€‚ ä¸æ­¤ç›¸å¯¹çš„\\D,\\W,\\Sï¼Œåˆ™è¡¨ç¤ºä¸Šè¿°æ¡ä»¶çš„å–åæƒ…å†µã€‚ ï¼ˆ6ï¼‰ä¹˜æ³•é›†ï¼ˆ{}ï¼‰ä¹˜æ³•é›†çš„æœ€å¤§ç”¨å¤„ä¹Ÿæ˜¯ç®€åŒ–æ­£åˆ™è¡¨è¾¾å¼ï¼Œç”¨å¤§æ‹¬å·è¡¨ç¤ºã€‚æ¯”å¦‚ï¼Œa{2}ï¼Œè¡¨ç¤ºæ‰¾åˆ°aaè¿™ä¸ªå­—ç¬¦ä¸²ã€‚ æ³¨æ„ï¼š ä¹˜æ³•é›†æ˜¯å·²å‰é¢æ•´ä½“ä¸ºä¹˜æ³•æ¡ä»¶çš„ï¼Œæ¯”å¦‚\\[ab\\]{2}ï¼Œä¸æ˜¯ç®€å•çš„æ¯”é…aaï¼Œbbï¼Œè€Œæ˜¯å’Œ\\[ab\\]\\[ab\\]å«ä¹‰æ˜¯ç›¸åŒçš„ï¼Œä¼šåŒ¹é…abï¼Œbaï¼Œaaï¼Œbbã€‚ ï¼ˆ7ï¼‰ä¹˜æ³•é›†ä¸­çš„åŒºé—´ï¼ˆ,ï¼‰ä¹˜æ³•é›†å’Œå­—ç¬¦ç±»ç›¸åŒï¼Œä¹Ÿå¯ä»¥ç”¨åŒºé—´è¿›è¡Œç®€åŒ–ï¼Œä½†æ˜¯ç¬¦å·ä¸ç›¸åŒã€‚a{1,3}ï¼Œè¡¨ç¤ºæ‰¾åˆ°aï¼Œaaï¼Œaaaè¿™ä¸‰ä¸ªå­—ç¬¦ä¸²ã€‚a{0,1}æ˜¯åˆæ³•çš„ï¼Œè¡¨ç¤ºæ‰¾åˆ°ç©ºå­—ç¬¦ï¼Œæˆ–è€…aã€‚ æ³¨æ„ï¼š 1.ä¹˜æ³•é›†çš„&quot;è¶Šé•¿è¶Šå¥½&quot;å±æ€§ï¼šä¹˜æ³•é›†å…·æœ‰è¿™æ ·çš„ç‰¹ç‚¹ï¼Œæ¯”å¦‚a{2,4}ï¼Œå¦‚æœæˆ‘æœç´¢myaaaaï¼Œå®ƒä¸ä¼šæ‰¾åˆ°aaåå°±åœæ­¢ï¼Œè€Œæ˜¯ä¼šæ‰¾åˆ°aaaaã€‚ 2.ä¹˜æ³•é›†çš„&quot;å…¨éƒ¨è·å–&quot;å±æ€§ï¼šæ¯”å¦‚a{2.4}ï¼Œå¦‚æœæœç´¢myaayouaaaaï¼Œå®ƒä¼šæ‰¾åˆ°aaå’Œaaaaã€‚ 3.ä¹˜æ³•é›†æ”¯æŒå¼€åŒºé—´ï¼Œa{1,}æ˜¯åˆæ³•çš„ï¼Œè¡¨ç¤ºæ‰¾åˆ°ä»»ä½•aç›¸è¿çš„å­—ç¬¦ä¸²ã€‚ ï¼ˆ8ï¼‰åˆ¤æ–­ç¬¦å·ï¼ˆï¼Ÿï¼‰è¿™ä¸ªç¬¦å·çš„å«ä¹‰å’Œ{0,1}å®Œå…¨ç›¸åŒï¼Œ123?4ï¼Œè¡¨ç¤ºåŒ¹é…1234æˆ–è€…124ï¼› ï¼ˆ9ï¼‰ç»Ÿé…ç¬¦å·ï¼ˆ*ï¼‰è¿™ä¸ªç¬¦å·çš„å«ä¹‰å’Œ{0,}ç›¸åŒï¼Œæ¯”å¦‚.* è¡¨ç¤ºé€šé…ä¸€åˆ‡å­—ç¬¦ä¸²ã€‚ ï¼ˆ10ï¼‰+ç¬¦å·è¿™ä¸ªç¬¦å·å’Œ{1,}ç›¸åŒã€‚ ï¼ˆ11ï¼‰æˆ–ç¬¦å·ï¼ˆ|ï¼‰â€œ|â€ç¬¦å·è¡¨ç¤ºæˆ–çš„å…³ç³»ï¼Œæ¯”å¦‚abc|edfï¼Œè¡¨ç¤ºæ‰¾åˆ°abcæˆ–è€…def ï¼ˆ12ï¼‰ç»„åˆï¼ˆ()ï¼‰å°æ‹¬å·åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­è¡¨ç¤ºç»„åˆï¼Œæ¯”å¦‚(a|b|c)dï¼Œè¡¨ç¤ºæ‰¾åˆ°adï¼Œbdï¼Œcdï¼Œå¯ä»¥å°†å°æ‹¬å·çš„ä½œç”¨ç†è§£ä¸ºä¼˜å…ˆçº§ã€‚ ï¼ˆ13ï¼‰å•è¯è¾¹ç•Œï¼ˆ\\bï¼‰\\bè¡¨ç¤ºå•è¯çš„è¾¹ç•Œï¼Œæ¯”å¦‚\\b[a-z]{3}\\bï¼Œè¡¨ç¤ºåŒ¹é…ä¸€ä¸ªä¸‰ä¸ªå­—æ¯çš„å°å†™å•è¯ã€‚ ï¼ˆ14ï¼‰è¡Œè¾¹ç•Œï¼ˆ^ $ï¼‰å•å•çš„ä¸€ä¸ª^ç¬¦å·è¡¨ç¤ºçš„æ˜¯è¡Œçš„å¼€å¤´ï¼Œ$è¡¨ç¤ºè¡Œçš„ç»“æŸã€‚ æ³¨æ„ï¼š \\[^\\]æ˜¯éæ³•çš„ï¼Œ\\[$\\]è¡¨ç¤ºåŒ¹é…ä¸€ä¸ª$ç¬¦å·ã€‚ ä¸‰ã€åšäº›å°æ€»ç»“ä¸Šé¢è¯´äº†è¿™ä¹ˆå¤šæ­£åˆ™è¡¨è¾¾å¼çš„è¯­æ³•è§„åˆ™ï¼Œæˆ‘ä»¬ç°åœ¨æ¥åšä¸‹æ€»ç»“ï¼š 1ã€å‡ ä¸ªæ¦‚å¿µï¼š1ã€å­—é¢å€¼:ç›´æ¥æŸ¥æ‰¾çš„å­—ç¬¦ï¼Œæ¯”å¦‚123ï¼Œavbã€‚ 2ã€å­—ç¬¦ç±»ï¼šæè¿°å­—ç¬¦çš„ä¸€äº›å±æ€§ï¼Œæ¯”å¦‚[123],[a-z],\\d,\\w,\\s,.ã€‚ 3ã€ä¹˜æ³•é›†ï¼šç®€åŒ–è¡¨è¾¾å¼ï¼Œæ¯”å¦‚{0,3},?,+,*ã€‚ 4ã€æˆ–å’Œç»„åˆï¼šæ¯”å¦‚(a|b|v)ã€‚ 5ã€å•è¯ï¼Œè¡Œçš„è¾¹ç•Œ\\b ^ $ 2ã€å…ƒå­—ç¬¦åˆ—è¡¨. \\ [ ] { } ? * + | ( ) ^ $ 3ã€å­—ç¬¦ç±»ä¸­å…ƒå­—ç¬¦åˆ—è¡¨[ ] \\ - ^ å››ã€ä¸€ä¸ªç‰¹åˆ«é‡è¦çš„å­—ç¬¦æœ€åï¼Œè¿˜æœ‰ä¸€ä¸ªç‰¹åˆ«ç‰¹åˆ«é‡è¦çš„å­—ç¬¦æˆ‘ä»¬æ²¡è€ƒè™‘åˆ°ï¼Œå¦‚æœæˆ‘ä»¬è¦æŸ¥æ‰¾å…ƒå­—ç¬¦æ€ä¹ˆåŠï¼Œåœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­è¿˜æœ‰ä¸€ä¸ªè½¬ä¹‰å­—ç¬¦â€\\â€œï¼Œå¦‚æœæˆ‘ä»¬è¦æŸ¥æ‰¾. åªè¦æŸ¥æ‰¾\\. åŒç†\\[\\]æ˜¯æŸ¥æ‰¾â€[]â€œè¿™ä¸ªå­—ç¬¦ä¸²ã€‚å¦‚æœè¦æŸ¥æ‰¾â€\\â€œï¼Œå†åŠ ä¸€ä¸ªè½¬ä¹‰å­—ç¬¦å°±å¥½:\\\\ã€‚ å­¦ä¹ ä½¿ç”¨ æ¬¢è¿è½¬è½½ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"æ­£åˆ™è¡¨è¾¾å¼","slug":"æ­£åˆ™è¡¨è¾¾å¼","permalink":"http://huishao.cc/categories/æ­£åˆ™è¡¨è¾¾å¼/"}],"tags":[{"name":"ç¼–ç¨‹ç ç‘","slug":"ç¼–ç¨‹ç ç‘","permalink":"http://huishao.cc/tags/ç¼–ç¨‹ç ç‘/"}],"keywords":[{"name":"æ­£åˆ™è¡¨è¾¾å¼","slug":"æ­£åˆ™è¡¨è¾¾å¼","permalink":"http://huishao.cc/categories/æ­£åˆ™è¡¨è¾¾å¼/"}]},{"title":"iOSä¸­æ­£åˆ™è¡¨è¾¾å¼çš„ä½¿ç”¨","slug":"25iOSä¸­æ­£åˆ™è¡¨è¾¾å¼çš„ä½¿ç”¨","date":"2015-04-18T16:00:00.000Z","updated":"2021-06-10T08:54:22.001Z","comments":true,"path":"2015/04/19/25iOSä¸­æ­£åˆ™è¡¨è¾¾å¼çš„ä½¿ç”¨/","link":"","permalink":"http://huishao.cc/2015/04/19/25iOSä¸­æ­£åˆ™è¡¨è¾¾å¼çš„ä½¿ç”¨/","excerpt":"","text":"æ­£åˆ™è¡¨è¾¾å¼åœ¨iOSå¼€å‘ä¸­çš„åº”ç”¨æ­£åˆ™è¡¨è¾¾å¼åœ¨å­—ç¬¦ä¸²æŸ¥æ‰¾ï¼Œæ›¿æ¢ï¼Œæ£€æµ‹ä¸­çš„åº”ç”¨éå¸¸å¹¿æ³›ï¼Œæ­£åˆ™è¡¨è¾¾å¼æ˜¯ä»€ä¹ˆï¼Œæœ‰æ€æ ·çš„è¯­æ³•ï¼Œæˆ‘çš„å¦ä¸€ç¯‡åšå®¢ä¸­æœ‰è¯¦ç»†çš„ä»‹ç»ï¼šhttp://my.oschina.net/u/2340880/blog/403508ã€‚è¿™é‡Œåªç®€å•è¯´ä¸€ä¸‹å…¶æ¦‚å¿µ ï¼Œæ­£åˆ™è¡¨è¾¾å¼æ˜¯ä¸€ç§è¯­æ³•å°å·§ç®€å•çš„è¯­è¨€ï¼Œç”¨æ¥çº¦æŸä¸€äº›è¿‡æ»¤å­—ç¬¦ä¸²æ¡çš„æ¡ä»¶ã€‚å¾ˆå¤šå¼€å‘å·¥å…·éƒ½æœ‰æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼çš„å†…å®¹ï¼ŒIOSä¹Ÿä¸ä¾‹å¤–ï¼Œåœ¨IOSä¸­NSRegularExpressionç±»å°±æ˜¯ä¸€ä¸ªä¸“é—¨æ¥å¤„ç†æ­£åˆ™è¡¨è¾¾å¼çš„ç±»ã€‚ ä¸€ã€åˆå§‹åŒ–æ–¹æ³•åˆå§‹åŒ–NSRegularExpressionçš„æ–¹æ³•æœ‰ä¸¤ç§ï¼Œä¸€ä¸ªinitæ–¹æ³•å’Œä¸€ä¸ªç±»æ–¹æ³•ã€‚å…¶ä½œç”¨åŸºæœ¬æ˜¯ä¸€æ ·çš„ + (NSRegularExpression )regularExpressionWithPattern:(NSString )pattern options:(NSRegularExpressionOptions)options error:(NSError **)error; - (instancetype)initWithPattern:(NSString *)pattern options:(NSRegularExpressionOptions)options error:(NSError **)error å…¶ä¸­ï¼Œpatternæ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼Œoptionsæ˜¯å‚æ•°ã€‚å¯¹äºoptionå‚æ•°ï¼Œå®ƒæ˜¯ä¸€ä¸ªæšä¸¾ï¼Œè¡¨ç¤ºæ­£åˆ™æ¨¡å¼çš„è®¾ç½®ï¼Œå¦‚ä¸‹ï¼š 123456789typedef NS_OPTIONS(NSUInteger, NSRegularExpressionOptions) &#123; NSRegularExpressionCaseInsensitive = 1 &lt;&lt; 0, //ä¸åŒºåˆ†å­—æ¯å¤§å°å†™çš„æ¨¡å¼ NSRegularExpressionAllowCommentsAndWhitespace = 1 &lt;&lt; 1, //å¿½ç•¥æ‰æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„ç©ºæ ¼å’Œ#å·ä¹‹åçš„å­—ç¬¦ NSRegularExpressionIgnoreMetacharacters = 1 &lt;&lt; 2, //å°†æ­£åˆ™è¡¨è¾¾å¼æ•´ä½“ä½œä¸ºå­—ç¬¦ä¸²å¤„ç† NSRegularExpressionDotMatchesLineSeparators = 1 &lt;&lt; 3, //å…è®¸.åŒ¹é…ä»»ä½•å­—ç¬¦ï¼ŒåŒ…æ‹¬æ¢è¡Œç¬¦ NSRegularExpressionAnchorsMatchLines = 1 &lt;&lt; 4, //å…è®¸^å’Œ$ç¬¦å·åŒ¹é…è¡Œçš„å¼€å¤´å’Œç»“å°¾ NSRegularExpressionUseUnixLineSeparators = 1 &lt;&lt; 5, //è®¾ç½®\\nä¸ºå”¯ä¸€çš„è¡Œåˆ†éš”ç¬¦ï¼Œå¦åˆ™æ‰€æœ‰çš„éƒ½æœ‰æ•ˆã€‚ NSRegularExpressionUseUnicodeWordBoundaries = 1 &lt;&lt; 6 //ä½¿ç”¨Unicode TR#29æ ‡å‡†ä½œä¸ºè¯çš„è¾¹ç•Œï¼Œå¦åˆ™æ‰€æœ‰ä¼ ç»Ÿæ­£åˆ™è¡¨è¾¾å¼çš„è¯è¾¹ç•Œéƒ½æœ‰æ•ˆ&#125;; æ³¨æ„ï¼š1ã€NSRegularExpressionCaseInsensitiveæ¨¡å¼ä¸‹æ­£åˆ™è¡¨è¾¾å¼ aBc ä¼šåŒ¹é…åˆ°abc. 2ã€NSRegularExpressionIgnoreMetacharactersæ¨¡å¼ä¸‹æ­£åˆ™è¡¨è¾¾å¼a b c ä¼šåŒ¹é…åˆ°abcï¼Œæ­£åˆ™è¡¨è¾¾å¼ab#cä¼šåŒ¹é…åˆ°abã€‚ 3ã€NSRegularExpressionAllowCommentsAndWhitespaceæ¨¡å¼ä¸‹æ­£åˆ™è¡¨è¾¾å¼\\[a-z\\]ï¼Œä¼šåŒ¹é…åˆ°\\[a-z\\]ã€‚ äºŒã€è·å–æŸ¥è¯¢ç»“æœåˆå§‹åŒ–å®Œæ¯•æ­£åˆ™è¡¨è¾¾å¼çš„å¤„ç†ç±»åï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œæ­£åˆ™è¡¨è¾¾å¼çš„æŸ¥è¯¢ï¼ŒIOSå®˜æ–¹æä¾›äº†ä¸¤ç§æ¨¡å¼ï¼š 1ã€å¸¦blockæ¨¡å¼çš„æ–¹æ³•ï¼š- (void)enumerateMatchesInString:(NSString )string options:(NSMatchingOptions)options range:(NSRange)range usingBlock:(void (^)(NSTextCheckingResult \\result, NSMatchingFlags flags, BOOL *stop))block; ä½¿ç”¨ä¸¾ä¾‹ï¼š 1234NSRegularExpression * regex = [[NSRegularExpression alloc]initWithPattern:@&quot;[a-z]&quot; options:NSRegularExpressionCaseInsensitive error:nil]; [regex enumerateMatchesInString:@&quot;124a&quot; options:NSMatchingReportProgress range:NSMakeRange(0, 4) usingBlock:^(NSTextCheckingResult *result, NSMatchingFlags flags, BOOL *stop) &#123; NSLog(@&quot;%@&quot;,result); &#125; ]; æ³¨æ„ï¼š1ã€è¿™ä¸ªå‡½æ•°çš„ä¸€ä¸ªå‚æ•°optionsæ˜¯ä¸€ä¸ªæšä¸¾ï¼Œè®¾ç½®å›è°ƒçš„æ–¹å¼ï¼Œå¦‚ä¸‹ï¼š 1234567typedef NS_OPTIONS(NSUInteger, NSMatchingOptions) &#123; NSMatchingReportProgress = 1 &lt;&lt; 0, //æ‰¾åˆ°æœ€é•¿çš„åŒ¹é…å­—ç¬¦ä¸²åè°ƒç”¨blockå›è°ƒ NSMatchingReportCompletion = 1 &lt;&lt; 1, //æ‰¾åˆ°ä»»ä½•ä¸€ä¸ªåŒ¹é…ä¸²åéƒ½å›è°ƒä¸€æ¬¡block NSMatchingAnchored = 1 &lt;&lt; 2, //ä»åŒ¹é…èŒƒå›´çš„å¼€å§‹å‡ºè¿›è¡Œæé™åŒ¹é… NSMatchingWithTransparentBounds = 1 &lt;&lt; 3, //å…è®¸åŒ¹é…çš„èŒƒå›´è¶…å‡ºè®¾ç½®çš„èŒƒå›´ NSMatchingWithoutAnchoringBounds = 1 &lt;&lt; 4 //ç¦æ­¢^å’Œ$è‡ªåŠ¨åŒ¹é…è¡Œè¿˜æ˜¯å’Œç»“æŸ&#125;; 2ã€blockå›è°ƒä¸­çš„flagsæšä¸¾å¯¹åº”å¦‚ä¸‹ï¼š 1234567typedef NS_OPTIONS(NSUInteger, NSMatchingFlags) &#123; NSMatchingProgress = 1 &lt;&lt; 0, //åŒ¹é…åˆ°æœ€é•¿ä¸²æ˜¯è¢«è®¾ç½® NSMatchingCompleted = 1 &lt;&lt; 1, //å…¨éƒ¨åˆ†é…å®Œæˆåè¢«è®¾ç½® NSMatchingHitEnd = 1 &lt;&lt; 2, //åŒ¹é…åˆ°è®¾ç½®èŒƒå›´çš„æœ«å°¾æ—¶è¢«è®¾ç½® NSMatchingRequiredEnd = 1 &lt;&lt; 3, //å½“å‰åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²åœ¨åŒ¹é…èŒƒå›´çš„æœ«å°¾æ—¶è¢«è®¾ç½® NSMatchingInternalError = 1 &lt;&lt; 4 //ç”±äºé”™è¯¯å¯¼è‡´çš„åŒ¹é…å¤±è´¥æ—¶è¢«è®¾ç½® &#125;; 3ã€è¿˜æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œå°±æ˜¯é‚£ä¸ªboolå€¼stopï¼Œæˆ‘ä»¬å¯ä»¥åœ¨blockå—ä¸­è®¾ç½®å®ƒä¸ºYESï¼Œä¹‹åä¾¿ä¼šåœæ­¢æŸ¥æ‰¾ã€‚ 2ã€éblockçš„æ–¹æ³•è¿™ä¸ªæ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªç»“æœæ•°ç»„ï¼Œå°†æ‰€æœ‰åŒ¹é…çš„ç»“æœè¿”å› - (NSArray )matchesInString:(NSString )string options:(NSMatchingOptions)options range:(NSRange)range; è¿™ä¸ªæ–¹æ³•ä¼šè¿”å›åŒ¹é…åˆ°å¾—å­—ç¬¦ä¸²çš„ä¸ªæ•° - (NSUInteger)numberOfMatchesInString:(NSString *)string options:(NSMatchingOptions)options range:(NSRange)range; è¿™ä¸ªæ–¹æ³•ä¼šè¿”å›ç¬¬ä¸€ä¸ªæŸ¥è¯¢åˆ°å¾—ç»“æœï¼Œè¿™ä¸ªNSTextCheckingResultå¯¹è±¡ä¸­æœ‰ä¸€ä¸ªrangeå±æ€§ï¼Œå¯ä»¥å¾—åˆ°åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²çš„èŒƒå›´ã€‚ - (NSTextCheckingResult )firstMatchInString:(NSString )string options:(NSMatchingOptions)options range:(NSRange)range; è¿™ä¸ªæ–¹æ³•ç›´æ¥è¿”å›åŒ¹é…åˆ°å¾—èŒƒå›´ï¼ŒNSRangeã€‚ - (NSRange)rangeOfFirstMatchInString:(NSString *)string options:(NSMatchingOptions)options range:(NSRange)range; ä¸‰ã€ä¸€ä¸ªè¾…åŠ©æ–¹æ³•åœ¨NSRegularExpressionç±»ä¸­è¿˜æä¾›äº†ä¸€ä¸ªè¾…åŠ©æ–¹æ³•ï¼š + (NSString )escapedPatternForString:(NSString )string; å®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬å°†æ­£åˆ™è¡¨è¾¾å¼åŠ ä¸Šâ€\\â€œè¿›è¡Œä¿æŠ¤ï¼Œå°†å…ƒå­—ç¬¦è½¬åŒ–æˆå­—é¢å€¼ã€‚ åˆ°æ­¤ï¼Œåœ¨IOSä¸­æ­£åˆ™è¡¨è¾¾å¼çš„åŸºæœ¬ç”¨æ³•å°±ä»‹ç»å®Œäº†ï¼Œå¸Œæœ›æ­£åˆ™è¡¨è¾¾å¼çš„åº”ç”¨ï¼Œèƒ½ä¸ºä½ çš„é¡¹ç›®èŠ‚çœæ›´å¤šæ—¶é—´ã€‚ ç–æ¼ä¹‹å¤„ æ¬¢è¿æŒ‡æ­£ å­¦ä¹ ä½¿ç”¨ æ¬¢è¿è½¬è½½ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[{"name":"iOSç¼–ç¨‹","slug":"iOSç¼–ç¨‹","permalink":"http://huishao.cc/tags/iOSç¼–ç¨‹/"}],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOS å•ä¾‹è®¾è®¡æ¨¡å¼è§£è¯»","slug":"22iOS å•ä¾‹è®¾è®¡æ¨¡å¼è§£è¯»","date":"2015-04-16T16:00:00.000Z","updated":"2021-06-10T08:49:14.271Z","comments":true,"path":"2015/04/17/22iOS å•ä¾‹è®¾è®¡æ¨¡å¼è§£è¯»/","link":"","permalink":"http://huishao.cc/2015/04/17/22iOS å•ä¾‹è®¾è®¡æ¨¡å¼è§£è¯»/","excerpt":"","text":"iOS ä¸­å•ä¾‹è®¾è®¡æ¨¡å¼çš„è§£è¯»ä¸ç”¨æ³•ä¸€ã€å•ä¾‹çš„ä½œç”¨é¡¾åæ€ä¹‰ï¼Œå•ä¾‹ï¼Œå³æ˜¯åœ¨æ•´ä¸ªé¡¹ç›®ä¸­ï¼Œè¿™ä¸ªç±»çš„å¯¹è±¡åªèƒ½è¢«åˆå§‹åŒ–ä¸€æ¬¡ã€‚å®ƒçš„è¿™ç§ç‰¹æ€§ï¼Œå¯ä»¥å¹¿æ³›åº”ç”¨äºæŸäº›éœ€è¦å…¨å±€å…±äº«çš„èµ„æºä¸­ï¼Œæ¯”å¦‚ç®¡ç†ç±»ï¼Œå¼•æ“ç±»ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å•ä¾‹æ¥å®ç°ä¼ å€¼ã€‚UIApplicationã€NSUserDefaultsç­‰éƒ½æ˜¯IOSä¸­çš„ç³»ç»Ÿå•ä¾‹ã€‚ äºŒã€å•ä¾‹çš„å†™æ³•å•ä¾‹çš„å†™æ³•å¸¸ç”¨çš„æœ‰ä¸¤ç§æ–¹å¼ï¼š æ–¹å¼1ã€ä¸è€ƒè™‘çº¿ç¨‹12345678static SingleCase *manager = nil; + (SingleCase *)defaultManager &#123; if (!manager)&#123; SingleCase = [[self alloc] init]; return manager; &#125;&#125; æ–¹å¼2ã€è€ƒè™‘çº¿ç¨‹å®‰å…¨123456789+ (SingleCase *)sharedManager &#123; static SingleCase *ManagerInstance = nil; static dispatch_once_t predicate; dispatch_once(&amp;predicate, ^&#123; ManagerInstance = [[self alloc] init]; &#125;); return ManagerInstance; &#125; ä¸‰ã€ä»£ç çš„ä¼˜åŒ–é€šè¿‡ä¸Šé¢çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥ä½¿ç”¨ç±»æ–¹æ³•æ¥å¾—åˆ°è¿™ä¸ªå•ä¾‹ï¼Œä½†å¾ˆå¤šæ—¶å€™ï¼Œé¡¹ç›®çš„å·¥ç¨‹é‡å¾ˆå¤§ï¼Œè¿˜æœ‰å¯èƒ½ä¼šå¾ˆå¤šå¼€å‘è€…åŒæ—¶å‚ä¸ä¸€ä¸ªé¡¹ç›®çš„å¼€å‘ï¼Œä¸ºäº†å®‰å…¨ä¸ç®¡ç†ä»£ç çš„æ–¹ä¾¿ï¼Œä¹Ÿä¸ºäº†ç»™ä¸æ˜¯è¿™ä¸ªå•ä¾‹çš„åˆ›ä½œè€…ä½†ä¼šç”¨åˆ°è¿™ä¸ªå•ä¾‹çš„å¼€å‘äººå‘˜ä¸€äº›æç¤ºï¼Œæˆ‘ä»¬é€šå¸¸ä¼šé‡å†™ä¸€äº›æ–¹æ³•ï¼š é¦–å…ˆæˆ‘ä»¬è‡ªå·±å®ç°ä¸€ä¸ªallocæ–¹æ³•ï¼š 123+(instancetype)myAlloc&#123; return [super allocWithZone:nil];&#125; å°†æˆ‘ä»¬çš„å•ä¾‹å®ç°æ–¹æ³•ç•¥ä½œä¿®æ”¹ï¼š 1234567+(ZYHPayManager *)sharedMamager&#123; static ZYHPayManager * manager; if (manager==nil) &#123; manager=[[ZYHPayManager myAlloc]init]; &#125; return manager;&#125; å°†ä¸€äº›è§†å›¾å®ä¾‹åŒ–å¯¹è±¡çš„æ–¹æ³•é‡å†™ï¼š 1234567891011121314+(instancetype)alloc&#123; NSAssert(0, @&quot;è¿™æ˜¯ä¸€ä¸ªå•ä¾‹å¯¹è±¡ï¼Œè¯·ä½¿ç”¨+(ZYHPayManager *)sharedMamageræ–¹æ³•&quot;); return nil;&#125;+(instancetype)allocWithZone:(struct _NSZone *)zone&#123; return [self alloc];&#125;-(id)copy&#123; NSLog(@&quot;è¿™æ˜¯ä¸€ä¸ªå•ä¾‹å¯¹è±¡ï¼Œcopyå°†ä¸èµ·ä»»ä½•ä½œç”¨&quot;); return self;&#125;+(instancetype)new&#123; return [self alloc];&#125; æ³¨æ„ï¼šè¿™é‡Œçš„allocä½¿ç”¨äº†æ–­è¨€ï¼Œè®©ä»»ä½•è§†å›¾é€šè¿‡allocåˆ›å»ºå¯¹è±¡çš„ç¨‹åºæ®µæ–­åœ¨æ­¤å¤„ï¼Œç»™ç¨‹åºå‘˜æç¤ºã€‚copyæ–¹æ³•è¿™é‡Œåªæ˜¯ç®€å•çš„è¿”å›äº†åŸå¯¹è±¡ï¼Œå¹¶æœªåšä»»ä½•å¤„ç†ï¼Œæ‰“å°ä¿¡æ¯ç»™ç¨‹åºå‘˜æç¤ºã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://huishao.cc/categories/è®¾è®¡æ¨¡å¼/"}],"tags":[{"name":"iOSç¼–ç¨‹","slug":"iOSç¼–ç¨‹","permalink":"http://huishao.cc/tags/iOSç¼–ç¨‹/"}],"keywords":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://huishao.cc/categories/è®¾è®¡æ¨¡å¼/"}]},{"title":"iOS descriptionä¸debugDescriptionåœ¨è°ƒè¯•ç¨‹åºä¸­çš„åº”ç”¨","slug":"23iOS descriptionä¸debugDescriptionåœ¨è°ƒè¯•ç¨‹åºä¸­çš„åº”ç”¨","date":"2015-04-16T16:00:00.000Z","updated":"2021-06-10T08:51:30.216Z","comments":true,"path":"2015/04/17/23iOS descriptionä¸debugDescriptionåœ¨è°ƒè¯•ç¨‹åºä¸­çš„åº”ç”¨/","link":"","permalink":"http://huishao.cc/2015/04/17/23iOS descriptionä¸debugDescriptionåœ¨è°ƒè¯•ç¨‹åºä¸­çš„åº”ç”¨/","excerpt":"","text":"iOS ä¸­æ‰“å°å‡½æ•°descriptionä¸debugDescriptionçš„åº”ç”¨ä¸€ã€descriptionå’ŒdebugDescriptionæ˜¯ä»€ä¹ˆdescriptionå’ŒdebugDescriptionæ˜¯NSObjectåè®®ä¸­çš„å£°æ˜çš„ä¸¤ä¸ªæ–¹æ³•ï¼ŒåŒæ—¶NSObjectç±»ä¹Ÿå®ç°äº†è¿™ä¸ªæ–¹æ³•ï¼Œå¦‚æœå­ç±»æ²¡æœ‰é‡å†™ï¼Œåˆ™ä¼šè°ƒç”¨çˆ¶ç±»çš„descriptionå’ŒdebugDescriptionæ–¹æ³•ã€‚é¦–å…ˆï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•é€‚ç”¨äºç¨‹åºä»£ç çš„è°ƒè¯•çš„ï¼Œå½“æˆ‘ä»¬è°ƒç”¨æ‰“å°Logæ—¶ï¼Œä¼šå‘å¯¹è±¡å‘é€ä¸€ä¸ªè¿™æ ·çš„æ¶ˆæ¯ã€‚ æˆ‘ä»¬å…ˆæ¥çœ‹å£°æ˜éƒ¨åˆ†çš„ä»£ç ï¼š 12+ (NSString *)description;+ (NSString *)debugDescription; è¿™é‡Œè¿”å›çš„å­—ç¬¦ä¸²å°±æ˜¯æˆ‘ä»¬æ‰“å°åœ¨æ§åˆ¶å°æ˜¾ç¤ºçš„ä¿¡æ¯ã€‚ äºŒã€NSObjectåŸºç±»ä¸­çš„descriptionæ–¹æ³•æ˜¯å¦‚ä½•å®ç°çš„æˆ‘ä»¬å†™å¦‚ä¸‹çš„æµ‹è¯•ä»£ç ï¼š 12 NSObject * objc = [[NSObject alloc]init]; NSLog(@&quot;objc:%@&quot;,objc); æ§åˆ¶å°è¾“å‡ºçš„ä¿¡æ¯å¦‚ä¸‹ï¼š å¯ä»¥çœ‹åˆ°ï¼Œæ–¹æ³•çš„å®ç°å¤§è‡´æ˜¯è¿™æ ·çš„ï¼š 123-(NSString *)description&#123; return [NSString stringWithFormat:@&quot;&lt;%@:%p&gt;&quot;,[self class],&amp;self];&#125; ä¸‰ã€é‡å†™descriptionæ–¹æ³•é€šè¿‡ä¸Šé¢çš„ä»‹ç»ï¼Œæˆ‘ä»¬å¤§è‡´çŸ¥é“descriptionæ–¹æ³•çš„åŸç†äº†ï¼Œåœ¨ç¨‹åºè°ƒè¯•æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å……åˆ†åˆ©ç”¨è¿™ä¸ªæ–¹æ³•å¸¦æ¥çš„ä¾¿åˆ©ï¼Œå¤§å¤§ç¼©å‡æˆ‘ä»¬è°ƒè¯•ç¨‹åºæ‰€éœ€è¦çš„æ—¶é—´ã€‚ä¾‹å¦‚ï¼šåˆ›å»ºä¸€ä¸ªTestç±»ï¼Œç»™å®ƒå®šä¹‰ä¸¤ä¸ªå±æ€§å¦‚ä¸‹ï¼š Text.h 12345#import &lt;Foundation/Foundation.h&gt;@interface TestObject : NSObject@property(nonatomic,strong)NSString * name;@property(nonatomic,strong)NSString * age;@end æˆ‘ä»¬åœ¨.mæ–‡ä»¶ä¸­å°†descriptionæ–¹æ³•é‡å†™ï¼š 123456#import &quot;TestObject.h&quot;@implementation TestObject-(NSString *)description&#123; return [NSString stringWithFormat:@&quot;%@&quot;,@&#123;@&quot;name&quot;:_name,@&quot;age&quot;:_age&#125;];&#125;@end é‡å†™çš„æ–¹æ³•å°†Testç±»å¯¹è±¡çš„å±æ€§æ‰“å°äº†å‡ºæ¥ï¼Œè¿™æ—¶æˆ‘ä»¬åœ¨è°ƒç”¨NSLogå‡½æ•°æ—¶ï¼Œæ‰“å°ç»“æœå¦‚ä¸‹ï¼š æ˜¯ä¸æ˜¯å¾ˆç‚«é…·ï¼Œå¦‚æ­¤ä¸€æ¥ï¼Œæˆ‘ä»¬å¯ä»¥å°†æˆ‘ä»¬åŸºæœ¬ä¸ä¼šç”¨åˆ°çš„ç±»åå’Œåœ°å€è½¬æ¢æˆæ‰“å°æ•°æ®ï¼Œæå¤§çš„æ–¹ä¾¿äº†æˆ‘ä»¬ä»£ç çš„è°ƒè¯•å·¥ä½œã€‚ å››ã€descriptionä¸debugDescriptionçš„åŒºåˆ«è¿™ä¸¤ä¸ªæ–¹æ³•çš„åŒºåˆ«ä»…ä»…åœ¨äºè°ƒè¯•çš„ä½ç½®ä¸åŒï¼Œè°ƒç”¨ä¸åŒçš„å‡½æ•°ã€‚descriptionæ˜¯æˆ‘ä»¬åœ¨ç¨‹åºä¸­æ‰“Logä¼šè°ƒç”¨çš„æ–¹æ³•ï¼ŒdebugDescriptionåˆ™æ˜¯æˆ‘ä»¬åœ¨æ–­ç‚¹è°ƒè¯•æ—¶ï¼Œåœ¨æ§åˆ¶å°ä½¿ç”¨poå‘½ä»¤æ‰“å°ä¼šè°ƒç”¨çš„æ–¹æ³•ï¼Œæ¯”å¦‚æˆ‘ä»¬é‡å†™Testç±»çš„è¿™ä¸ªæ–¹æ³•ï¼š 123-(NSString *)debugDescription&#123; return [NSString stringWithFormat:@&quot;&lt;%@:%p&gt;:%@&quot;,[self class],&amp;self,@&#123;@&quot;name&quot;:_name,@&quot;age&quot;:_age&#125;];&#125; ç„¶åæˆ‘ä»¬åœ¨ç¨‹åºä¸­åŠ ä¸ªæ–­ç‚¹è¿è¡Œï¼Œåœ¨ç¨‹åºæ–­æ‰ä¹‹åï¼Œæˆ‘ä»¬åœ¨è°ƒè¯•åŒºè¾“å…¥ï¼špo textï¼Œå›è½¦ä¹‹åï¼Œä¼šå‡ºç°å¦‚ä¸‹çš„ä¿¡æ¯ï¼š å­¦ä¹ ä½¿ç”¨ æ¬¢è¿è½¬è½½ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}],"tags":[{"name":"iOSç¼–ç¨‹","slug":"iOSç¼–ç¨‹","permalink":"http://huishao.cc/tags/iOSç¼–ç¨‹/"}],"keywords":[{"name":"iOSé€»è¾‘åˆçª¥","slug":"iOSé€»è¾‘åˆçª¥","permalink":"http://huishao.cc/categories/iOSé€»è¾‘åˆçª¥/"}]},{"title":"iOS UIProgressViewæ§ä»¶ç”¨æ³•","slug":"18iOS UIProgressViewæ§ä»¶ç”¨æ³•","date":"2015-04-15T16:00:00.000Z","updated":"2021-06-08T11:42:13.167Z","comments":true,"path":"2015/04/16/18iOS UIProgressViewæ§ä»¶ç”¨æ³•/","link":"","permalink":"http://huishao.cc/2015/04/16/18iOS UIProgressViewæ§ä»¶ç”¨æ³•/","excerpt":"","text":"è¿›åº¦æ¡æ§ä»¶æ˜¯IOSå¼€å‘ä¸­ä¸€ä¸ªç®€å•çš„ç³»ç»Ÿæ§ä»¶ï¼Œä½¿ç”¨æ€»ç»“å¦‚ä¸‹ï¼š åˆå§‹åŒ–ä¸€ä¸ªè¿›åº¦æ¡ï¼š (instancetype)initWithProgressViewStyle:(UIProgressViewStyle)style; æ³¨æ„ï¼š1.ç”¨è¿™ä¸ªæ–¹å¼åˆå§‹åŒ–çš„è¿›åº¦æ¡ç³»ç»Ÿä¼šé»˜è®¤ç»™ä¸€ä¸ªé•¿åº¦ã€‚ 2.è¿›åº¦æ¡çš„é•¿åº¦å¯ä»¥é€šè¿‡frameæ¥è®¾ç½®ï¼Œä½†æ˜¯åªæœ‰å‰ä¸‰ä¸ªå‚æ•°æœ‰æ•ˆã€‚ 3.é£æ ¼æšä¸¾å¦‚ä¸‹ï¼š typedef NS_ENUM(NSInteger, UIProgressViewStyle) { UIProgressViewStyleDefault, // æ™®é€šæ ·å¼ UIProgressViewStyleBar, // ç”¨äºå·¥å…·æ¡çš„æ ·å¼}; è®¾ç½®è¿›åº¦æ¡é£æ ¼æ ·å¼ @property(nonatomic) UIProgressViewStyle progressViewStyle; è®¾ç½®è¿›åº¦æ¡è¿›åº¦(0.0-1.0ä¹‹é—´ï¼Œé»˜è®¤ä¸º0.0) @property(nonatomic) float progress; è®¾ç½®å·²èµ°è¿‡è¿›åº¦çš„è¿›åº¦æ¡é¢œè‰² @property(nonatomic, retain) UIColor* progressTintColor; è®¾ç½®æœªèµ°è¿‡è¿›åº¦çš„è¿›åº¦æ¡é¢œè‰² @property(nonatomic, retain) UIColor* trackTintColor; è®¾ç½®è¿›åº¦æ¡å·²èµ°è¿‡è¿›åº¦çš„èƒŒæ™¯å›¾æ¡ˆå’Œä¸ºèµ°è¿‡è¿›åº¦çš„èƒŒæ™¯å›¾æ¡ˆ(IOS7åå¥½åƒæ²¡æœ‰æ•ˆæœäº†) @property(nonatomic, retain) UIImage* progressImage; @property(nonatomic, retain) UIImage* trackImage; è®¾ç½®è¿›åº¦æ¡è¿›åº¦å’Œæ˜¯å¦åŠ¨ç”»æ˜¾ç¤º(åŠ¨ç”»æ˜¾ç¤ºä¼šå¹³æ»‘è¿‡æ¸¡) (void)setProgress:(float)progress animated:(BOOL)animated; å­¦ä¹ ä½¿ç”¨ æ¬¢è¿è½¬è½½ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[{"name":"iOSç¼–ç¨‹","slug":"iOSç¼–ç¨‹","permalink":"http://huishao.cc/tags/iOSç¼–ç¨‹/"},{"name":"UIProgressView","slug":"UIProgressView","permalink":"http://huishao.cc/tags/UIProgressView/"}],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"Objective-C ä¸­å˜é‡çš„ä½œç”¨åŸŸ","slug":"21Objective-C ä¸­å˜é‡çš„ä½œç”¨åŸŸ","date":"2015-04-15T16:00:00.000Z","updated":"2021-06-10T08:47:29.313Z","comments":true,"path":"2015/04/16/21Objective-C ä¸­å˜é‡çš„ä½œç”¨åŸŸ/","link":"","permalink":"http://huishao.cc/2015/04/16/21Objective-C ä¸­å˜é‡çš„ä½œç”¨åŸŸ/","excerpt":"","text":"iOSä¸­ï¼Œä¿®é¥°å˜é‡çš„å…³é”®å­—æœ‰å››ä¸ªï¼Œåˆ†åˆ«æ˜¯ï¼š 1 @public è¢«è¿™ä¸ªå…³é”®å­—ä¿®é¥°çš„å˜é‡æ˜¯å®Œå…¨å¼€æ”¾çš„ï¼Œåªè¦æœ‰è¿™ç±»çš„å¯¹è±¡å­˜åœ¨ï¼Œå°±å¯ä»¥è®¿é—®åˆ°è¿™ä¸ªå˜é‡ã€‚ 2 @protected è¢«è¿™ä¸ªå…³é”®å­—ä¿®é¥°çš„å˜é‡æ˜¯å—ä¿æŠ¤çš„ï¼Œåªæœ‰åœ¨å£°æ˜å˜é‡çš„è¿™ä¸ªç±»ä¸­å’Œå®ƒçš„å­ç±»ä¸­ï¼Œå¯ä»¥è®¿é—®ã€‚ 3 @private è¢«è¿™ä¸ªå…³é”®å­—ä¿®é¥°çš„å˜é‡æ˜¯ç§æœ‰çš„ï¼Œåªèƒ½åœ¨å£°æ˜è¿™ä¸ªå˜é‡çš„ç±»ä¸­ä½¿ç”¨ï¼Œå­ç±»ä¹Ÿä¸èƒ½ä½¿ç”¨ã€‚ 4 @package è¿™ä¸ªå…³é”®å­—æ¯”è¾ƒéš¾ç†è§£ï¼Œå¤§è‡´æ„æ€æ˜¯è¢«ä¿®é¥°çš„å˜é‡æ˜¯å°è£…çš„ï¼Œåœ¨æœ¬æ¡†æ¶å†…å¯ä»¥è‡ªç”±ä½¿ç”¨ï¼Œæ•ˆæœå’Œ@public ç›¸åŒï¼Œè€Œåœ¨æ¡†æ¶å¤–ä¸èƒ½ä½¿ç”¨ï¼Œå…¶å­ç±»ä¹Ÿä¸èƒ½ä½¿ç”¨ï¼Œæ•ˆæœåˆç›¸å½“äº@privateã€‚ å› ä¸º@packageçš„è¿™ç§ç‰¹ç‚¹ï¼Œå®ƒéå¸¸é€‚ç”¨äºfraneworkæ¡†æ¶ã€‚ ä¸€ç‚¹æ‰©å±•ï¼š è®¿é—®ç±»ä¸­çš„å˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨-&gt;ç¬¦å·ï¼Œå®ƒå’Œç‚¹è¯­æ³•çš„åŒºåˆ«åœ¨äºï¼Œç‚¹è¯­æ³•å®é™…ä¸Šæ˜¯è°ƒç”¨çš„setä¸getæ–¹æ³•ï¼Œè€Œ-&gt;ç¬¦å·æ˜¯ç›´æ¥è®¿é—®å˜é‡ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"Objective-Cæµ…æ¢","slug":"Objective-Cæµ…æ¢","permalink":"http://huishao.cc/categories/Objective-Cæµ…æ¢/"}],"tags":[{"name":"Objective-C","slug":"Objective-C","permalink":"http://huishao.cc/tags/Objective-C/"}],"keywords":[{"name":"Objective-Cæµ…æ¢","slug":"Objective-Cæµ…æ¢","permalink":"http://huishao.cc/categories/Objective-Cæµ…æ¢/"}]},{"title":"iOS UIPageControl(åˆ†é¡µæ§åˆ¶å™¨) ç”¨æ³•æ€»ç»“","slug":"19iOS UIPageControl(åˆ†é¡µæ§åˆ¶å™¨) ç”¨æ³•æ€»ç»“","date":"2015-04-15T16:00:00.000Z","updated":"2021-06-08T11:43:35.178Z","comments":true,"path":"2015/04/16/19iOS UIPageControl(åˆ†é¡µæ§åˆ¶å™¨) ç”¨æ³•æ€»ç»“/","link":"","permalink":"http://huishao.cc/2015/04/16/19iOS UIPageControl(åˆ†é¡µæ§åˆ¶å™¨) ç”¨æ³•æ€»ç»“/","excerpt":"","text":"UIPageControll æ˜¯ç»§æ‰¿äºUIControlçš„ä¸€ä¸ªIOSç³»ç»ŸUIæ§ä»¶ï¼Œå¯ä»¥æä¾›ç»™å¼€å‘è€…è®¾è®¡åˆ†é¡µæ•ˆæœçš„åŠŸèƒ½ã€‚ åˆå§‹åŒ–æ–¹æ³• UIPageControl * page = [[UIPageControl alloc]initWithFrame:CGRectMake(100, 100, 100, 100)]; è®¾ç½®æ§åˆ¶å™¨é¡µæ•°ï¼ˆé»˜è®¤ä¸º0ï¼‰ @property(nonatomic) NSInteger numberOfPages; è®¾ç½®å½“å‰æ‰€åœ¨é¡µç  @property(nonatomic) NSInteger currentPage; è®¾ç½®å½“æ€»é¡µæ•°ä¸º1æ—¶ï¼Œæ˜¯å¦è‡ªåŠ¨éšè—æ§åˆ¶å™¨ @property(nonatomic) BOOL hidesForSinglePage; è®¾ç½®æ˜¯å¦å»¶è¿Ÿè‡ªåŠ¨æ›´æ–°æ§åˆ¶å™¨çš„å½“å‰é¡µç ï¼ˆé»˜è®¤ä¸ºNOï¼‰ @property(nonatomic) BOOL defersCurrentPageDisplay; æ³¨æ„ï¼šè¿™ä¸ªå±æ€§å¦‚æœè®¾ç½®ä¸ºYESï¼Œç‚¹å‡»æ—¶å¹¶ä¸ä¼šæ”¹å˜æ§åˆ¶å™¨æ˜¾ç¤ºçš„å½“å‰é¡µç ç‚¹ï¼Œå¿…é¡»æ‰‹åŠ¨è°ƒç”¨ (void)updateCurrentPageDisplay; è¿™ä¸ªæ–¹æ³•ï¼Œæ‰ä¼šæ›´æ–°ã€‚ æ›´æ–°æ§åˆ¶å™¨å½“å‰é¡µç  (void)updateCurrentPageDisplay; é€šè¿‡é¡µæ•°å¾—åˆ°æ§åˆ¶å™¨å¤§å° (CGSize)sizeForNumberOfPages:(NSInteger)pageCount; è¿™ä¸ªå±æ€§ç”¨äºé¡µæ•°ä¼šå˜åŒ–çš„æƒ…å†µä¸‹è¿›è¡Œå¤§å°åŠ¨æ€å¤„ç† è®¾ç½®æ§åˆ¶å™¨é¡µç ç‚¹å¾—é¢œè‰² @property(nonatomic,retain) UIColor *pageIndicatorTintColor; è®¾ç½®æ§åˆ¶å™¨å½“å‰æ‰€åœ¨é¡µç ç‚¹çš„é¢œè‰² @property(nonatomic,retain) UIColor *currentPageIndicatorTintColor; å­¦ä¹ ä½¿ç”¨ æ¬¢è¿è½¬è½½ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[{"name":"iOSç¼–ç¨‹","slug":"iOSç¼–ç¨‹","permalink":"http://huishao.cc/tags/iOSç¼–ç¨‹/"},{"name":"UIPageControl","slug":"UIPageControl","permalink":"http://huishao.cc/tags/UIPageControl/"}],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"iOS UIStepper(æ­¥è¿›æ§ä»¶)ä½¿ç”¨æ€»ç»“","slug":"20iOS UIStepper(æ­¥è¿›æ§ä»¶)ä½¿ç”¨æ€»ç»“","date":"2015-04-15T16:00:00.000Z","updated":"2021-06-08T11:44:37.596Z","comments":true,"path":"2015/04/16/20iOS UIStepper(æ­¥è¿›æ§ä»¶)ä½¿ç”¨æ€»ç»“/","link":"","permalink":"http://huishao.cc/2015/04/16/20iOS UIStepper(æ­¥è¿›æ§ä»¶)ä½¿ç”¨æ€»ç»“/","excerpt":"","text":"iOSä¸­æ­¥è¿›æ§ä»¶çš„ç®€å•ä½¿ç”¨ åˆå§‹åŒ–æ§ä»¶ 1UIStepper * step = [[UIStepper alloc]initWithFrame:CGRectMake(100, 100, 100, 100)]; è®¾ç½®æ§åˆ¶å™¨å€¼æ˜¯å¦è¿ç»­è§¦å‘å˜åŒ– @property(nonatomic,getter=isContinuous) BOOL continuous; è‹¥è®¾ç½®ä¸ºYESï¼Œåˆ™é•¿æŒ‰ä¼šè¿ç»­è§¦å‘å˜åŒ–ï¼Œè‹¥è®¾ç½®ä¸ºNOï¼Œåªæœ‰åœ¨æŒ‰å‡»ç»“æŸåï¼Œæ‰ä¼šè§¦å‘ã€‚ è®¾ç½®é•¿æŒ‰æ˜¯å¦ä¸€ç›´è§¦å‘å˜åŒ– @property(nonatomic) BOOL autorepeat; è‹¥è®¾ç½®ä¸ºYESï¼Œåˆ™é•¿æŒ‰å€¼ä¼šä¸€ç›´æ”¹å˜ï¼Œè‹¥è®¾ç½®ä¸ºNOï¼Œåˆ™ä¸€æ¬¡ç‚¹å‡»åªä¼šæ”¹å˜ä¸€æ¬¡å€¼ è®¾ç½®æ§åˆ¶å™¨çš„å€¼æ˜¯å¦å¾ªç¯(åˆ°è¾¾è¾¹ç•Œåï¼Œé‡å¤´å¼€å§‹ï¼Œé»˜è®¤ä¸ºNO) @property(nonatomic) BOOL wraps; è®¾ç½®æ§åˆ¶å™¨çš„å€¼ @property(nonatomic) double value; è®¾ç½®æ§åˆ¶å™¨çš„æœ€å¤§å€¼å’Œæœ€å°å€¼ @property(nonatomic) double minimumValue;//é»˜è®¤ä¸º0 @property(nonatomic) double maximumValue; //é»˜è®¤ä¸º100 è®¾ç½®æ§åˆ¶å™¨çš„æ­¥é•¿ @property(nonatomic) double stepValue; è®¾ç½®æ§åˆ¶å™¨é£æ ¼é¢œè‰² @property(nonatomic,retain) UIColor *tintColor; è®¾ç½®æ§åˆ¶å™¨èƒŒæ™¯å›¾ç‰‡ - (void)setBackgroundImage:(UIImage*)image forState:(UIControlState)state; è·å–èƒŒæ™¯å›¾ç‰‡ - (UIImage*)backgroundImageForState:(UIControlState)state; é€šè¿‡å·¦å³æŒ‰é’®çš„çŠ¶æ€è®¾ç½®åˆ†å‰²çº¿çš„å›¾ç‰‡ - (void)setDividerImage:(UIImage*)image forLeftSegmentState:(UIControlState)leftState rightSegmentState:(UIControlState)rightState; è·å–åˆ†å‰²çº¿å›¾ç‰‡ - (UIImage*)dividerImageForLeftSegmentState:(UIControlState)state rightSegmentState:(UIControlState)state; è®¾ç½®å’Œè·å–åŠ å·æŒ‰é’®çš„å›¾ç‰‡ - (void)setIncrementImage:(UIImage *)image forState:(UIControlState)state; - (UIImage *)incrementImageForState:(UIControlState)state; è®¾ç½®å’Œè·å–å‡å·æŒ‰é’®çš„å›¾ç‰‡ - (void)setDecrementImage:(UIImage *)image forState:(UIControlState)state; - (UIImage *)decrementImageForState:(UIControlState)state; å­¦ä¹ ä½¿ç”¨ æ¬¢è¿è½¬è½½ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[{"name":"iOSç¼–ç¨‹","slug":"iOSç¼–ç¨‹","permalink":"http://huishao.cc/tags/iOSç¼–ç¨‹/"},{"name":"UIStepper","slug":"UIStepper","permalink":"http://huishao.cc/tags/UIStepper/"}],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"iOS UISwitch ç”¨æ³•æ€»ç»“","slug":"16iOS UISwitch ç”¨æ³•æ€»ç»“","date":"2015-04-14T16:00:00.000Z","updated":"2021-06-08T11:39:45.598Z","comments":true,"path":"2015/04/15/16iOS UISwitch ç”¨æ³•æ€»ç»“/","link":"","permalink":"http://huishao.cc/2015/04/15/16iOS UISwitch ç”¨æ³•æ€»ç»“/","excerpt":"","text":"iOS ç³»ç»Ÿå¼€å…³æ§ä»¶ç®€å•ä½¿ç”¨æ€»ç»“ï¼š åˆå§‹åŒ–ï¼š (instancetype)initWithFrame:(CGRect)frame; è¿™ä¸ªframeæ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œç³»ç»Ÿçš„å¼€å…³æ§ä»¶å¤§å°æ˜¯ç¡®å®šçš„ã€‚ è®¾ç½®å¼€å…³å¼€å¯çŠ¶æ€æ—¶çš„é¢œè‰² @property(nonatomic, retain) UIColor *onTintColor; è®¾ç½®å¼€å…³é£æ ¼é¢œè‰² @property(nonatomic, retain) UIColor *tintColor; è®¾ç½®å¼€å…³æŒ‰é’®é¢œè‰² @property(nonatomic, retain) UIColor *thumbTintColor; è®¾ç½®å¼€å…³å¼€å¯çŠ¶æ€æ—¶çš„å›¾ç‰‡ï¼ˆæ³¨æ„ï¼šåœ¨IOS7åä¸å†èµ·ä»»ä½•ä½œç”¨ï¼‰ @property(nonatomic, retain) UIImage *onImage; è®¾ç½®å¼€å…³å…³é—­çŠ¶æ€æ—¶çš„å›¾ç‰‡ï¼ˆæ³¨æ„ï¼šåœ¨IOS7åä¸å†èµ·ä»»ä½•ä½œç”¨ï¼‰ @property(nonatomic, retain) UIImage *offImage; å¼€å…³çš„çŠ¶æ€ @property(nonatomic,getter=isOn) BOOL on; æ‰‹åŠ¨è®¾ç½®å¼€å…³çŠ¶æ€ (void)setOn:(BOOL)on animated:(BOOL)animated; ä¸€ç‚¹æ„Ÿæƒ³ï¼šiOSçš„ç³»ç»Ÿçš„UISwitchæ§ä»¶è™½ç„¶å®šåˆ¶æ€§å¾ˆå·®ï¼Œé…åˆIOS7ä¹‹åçš„æ‰å¹³åŒ–å’Œä¿­çº¦çš„é£æ ¼ï¼Œåœ¨ç¾è§‚ä¸Šç¡®å®ä¸é€Šè‰²äºä»»ä½•ç§äººå®šåˆ¶çš„å¼€å…³æ§ä»¶ï¼Œåœ¨æ²¡æœ‰ç‰¹æ®Šéœ€æ±‚çš„æƒ…å†µä¸‹ï¼Œå¯¹äºå¼€å…³é€»è¾‘ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸ä¸é”™çš„UIäº¤äº’é€‰æ‹©ã€‚ å­¦ä¹ ä½¿ç”¨ æ¬¢è¿è½¬è½½ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[{"name":"iOSç¼–ç¨‹","slug":"iOSç¼–ç¨‹","permalink":"http://huishao.cc/tags/iOSç¼–ç¨‹/"},{"name":"UISwitch","slug":"UISwitch","permalink":"http://huishao.cc/tags/UISwitch/"}],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"iOS UISliderç”¨æ³•æ€»ç»“","slug":"15iOS UISliderç”¨æ³•æ€»ç»“","date":"2015-04-14T16:00:00.000Z","updated":"2021-06-08T11:38:39.900Z","comments":true,"path":"2015/04/15/15iOS UISliderç”¨æ³•æ€»ç»“/","link":"","permalink":"http://huishao.cc/2015/04/15/15iOS UISliderç”¨æ³•æ€»ç»“/","excerpt":"","text":"UIslideræ»‘å—æ§ä»¶åœ¨IOSå¼€å‘ä¸­ä¼šå¸¸ç”¨åˆ°ï¼Œå¯ç”¨äºè°ƒèŠ‚éŸ³é‡ï¼Œå­—ä½“å¤§å°ç­‰UIæ–¹é¢çš„äº¤äº’ï¼Œç”¨æ³•æ€»ç»“å¦‚ä¸‹ï¼š åˆå§‹åŒ–ä¸€ä¸ªæ»‘å—ï¼š 1 UISlider * slider = [[UISlider alloc]initWithFrame:CGRectMake(0, 0, 100, 100)]; è®¾ç½®æ»‘å—ä½ç½® @property(nonatomic) float value;è¿™ä¸ªå€¼æ˜¯ä»‹äºæ»‘å—çš„æœ€å¤§å€¼å’Œæœ€å°å€¼ä¹‹é—´çš„ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®è¾¹ç•Œå€¼ï¼Œé»˜è®¤ä¸º0-1ï¼› è®¾ç½®æ»‘å—æœ€å°è¾¹ç•Œå€¼ï¼ˆé»˜è®¤ä¸º0ï¼‰ @property(nonatomic) float minimumValue; è®¾ç½®æ»‘å—æœ€å¤§è¾¹ç•Œå€¼ï¼ˆé»˜è®¤ä¸º1ï¼‰ @property(nonatomic) float maximumValue; è®¾ç½®æ»‘å—æœ€å·¦ç«¯æ˜¾ç¤ºçš„å›¾ç‰‡ï¼š @property(nonatomic,retain) UIImage *minimumValueImageï¼› è®¾ç½®æ»‘å—æœ€å³ç«¯æ˜¾ç¤ºçš„å›¾ç‰‡ï¼š @property(nonatomic,retain) UIImage *maximumValueImage; è®¾ç½®æ»‘å—å€¼æ˜¯å¦è¿ç»­å˜åŒ–(é»˜è®¤ä¸ºYES) @property(nonatomic,getter=isContinuous) BOOL continuous; è¿™ä¸ªå±æ€§è®¾ç½®ä¸ºYESåˆ™åœ¨æ»‘åŠ¨æ—¶ï¼Œå…¶valueå°±ä¼šéšæ—¶å˜åŒ–ï¼Œè®¾ç½®ä¸ºNOï¼Œåˆ™å½“æ»‘åŠ¨ç»“æŸæ—¶ï¼Œvalueæ‰ä¼šæ”¹å˜ã€‚ è®¾ç½®æ»‘å—å·¦è¾¹ï¼ˆå°äºéƒ¨åˆ†ï¼‰çº¿æ¡çš„é¢œè‰² @property(nonatomic,retain) UIColor *minimumTrackTintColorï¼› è®¾ç½®æ»‘å—å³è¾¹ï¼ˆå¤§äºéƒ¨åˆ†ï¼‰çº¿æ¡çš„é¢œè‰² @property(nonatomic,retain) UIColor *maximumTrackTintColorï¼› è®¾ç½®æ»‘å—é¢œè‰²ï¼ˆå½±å“å·²åˆ’è¿‡ä¸€ç«¯çš„é¢œè‰²ï¼‰ @property(nonatomic,retain) UIColor *thumbTintColorï¼› æ³¨æ„è¿™ä¸ªå±æ€§ï¼šå¦‚æœä½ æ²¡æœ‰è®¾ç½®æ»‘å—çš„å›¾ç‰‡ï¼Œé‚£ä¸ªè¿™ä¸ªå±æ€§å°†åªä¼šæ”¹å˜å·²åˆ’è¿‡ä¸€æ®µçº¿æ¡çš„é¢œè‰²ï¼Œä¸ä¼šæ”¹å˜æ»‘å—çš„é¢œè‰²ï¼Œå¦‚æœä½ è®¾ç½®äº†æ»‘å—çš„å›¾ç‰‡ï¼Œåˆè®¾ç½®äº†è¿™ä¸ªå±æ€§ï¼Œé‚£ä¹ˆæ»‘å—çš„å›¾ç‰‡å°†ä¸æ˜¾ç¤ºï¼Œæ»‘å—çš„é¢œè‰²ä¼šæ”¹å˜ï¼ˆIOS7ï¼‰ æ‰‹åŠ¨è®¾ç½®æ»‘å—çš„å€¼ï¼š - (void)setValue:(float)value animated:(BOOL)animated; è®¾ç½®æ»‘å—çš„å›¾ç‰‡ï¼š - (void)setThumbImage:(UIImage *)image forState:(UIControlState)state; è®¾ç½®æ»‘å—åˆ’è¿‡éƒ¨åˆ†çš„çº¿æ¡å›¾æ¡ˆ - (void)setMinimumTrackImage:(UIImage *)image forState:(UIControlState)state; è®¾ç½®æ»‘å—æœªåˆ’è¿‡éƒ¨åˆ†çš„çº¿æ¡å›¾æ¡ˆ - (void)setMaximumTrackImage:(UIImage *)image forState:(UIControlState)state; å¯¹åº”çš„å‡ ä¸ªgetæ–¹æ³• - (UIImage )thumbImageForState:(UIControlState)state;- (UIImage )minimumTrackImageForState:(UIControlState)state;- (UIImage *)maximumTrackImageForState:(UIControlState)state; å¯¹åº”çš„è®¾ç½®å½“å‰çŠ¶æ€çš„å“åº”å±æ€§çš„æ–¹æ³• @property(nonatomic,readonly) UIImage currentThumbImage;@property(nonatomic,readonly) UIImage currentMinimumTrackImage;@property(nonatomic,readonly) UIImage* currentMaximumTrackImage; æ·»åŠ è§¦å‘äº‹ä»¶ 1[slider addTarget:self action:@selector(log:) forControlEvents:UIControlEventValueChanged]; å­¦ä¹ ä½¿ç”¨ æ¬¢è¿è½¬è½½ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[{"name":"iOSç¼–ç¨‹","slug":"iOSç¼–ç¨‹","permalink":"http://huishao.cc/tags/iOSç¼–ç¨‹/"},{"name":"UISlider","slug":"UISlider","permalink":"http://huishao.cc/tags/UISlider/"}],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"iOS UIActivityIndicatorView(æŒ‡ç¤ºæ§åˆ¶å™¨)ç”¨æ³•æ€»ç»“","slug":"17iOS UIActivityIndicatorView(æŒ‡ç¤ºæ§åˆ¶å™¨)ç”¨æ³•æ€»ç»“","date":"2015-04-14T16:00:00.000Z","updated":"2021-06-08T11:40:42.975Z","comments":true,"path":"2015/04/15/17iOS UIActivityIndicatorView(æŒ‡ç¤ºæ§åˆ¶å™¨)ç”¨æ³•æ€»ç»“/","link":"","permalink":"http://huishao.cc/2015/04/15/17iOS UIActivityIndicatorView(æŒ‡ç¤ºæ§åˆ¶å™¨)ç”¨æ³•æ€»ç»“/","excerpt":"","text":"å¯¹äºUIActivityIndicatorViewçš„ä½¿ç”¨ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šåˆ›å»ºä¸€ä¸ªèƒŒæ™¯View,è®¾ç½®ä¸€å®šçš„é€æ˜åº¦ï¼Œç„¶åå°†UIActivityIndicatorViewè´´åœ¨èƒŒæ™¯Viewä¸Šï¼Œåœ¨æˆ‘ä»¬éœ€è¦çš„æ—¶å€™å°†è¿™ä¸ªviewå‘¼å‡ºã€‚ åˆå§‹åŒ–UIActivityIndicatorView (instancetype)initWithActivityIndicatorStyle:(UIActivityIndicatorViewStyle)style; è¿™ä¸ªé£æ ¼æ˜¯ä¸€ä¸ªæšä¸¾ï¼Œå¦‚ä¸‹ typedef NS_ENUM(NSInteger, UIActivityIndicatorViewStyle) { //å¤§å·ç™½è‰² UIActivityIndicatorViewStyleWhiteLarge, //ç™½è‰² UIActivityIndicatorViewStyleWhite, //ç°è‰² UIActivityIndicatorViewStyleGray,}; åˆå§‹åŒ–ä¹‹åï¼Œè¿˜éœ€è¦ç»™å®ƒä¸€ä¸ªFrameï¼Œä½†æ˜¯åªæœ‰å‰ä¸¤ä¸ªä½ç½®å‚æ•°æœ‰æ•ˆï¼Œå¤§å°å‚æ•°å°†æ²¡æœ‰ä»»ä½•å½±å“ã€‚ è®¾ç½®æŒ‡ç¤ºå™¨é£æ ¼ï¼š @property(nonatomic) UIActivityIndicatorViewStyle activityIndicatorViewStyle; è®¾ç½®æŒ‡ç¤ºå™¨æ˜¯å¦åœæ­¢åŠ¨ç”»æ—¶éšè— @property(nonatomic) BOOL hidesWhenStopped; è®¾ç½®æŒ‡ç¤ºå™¨é¢œè‰² @property (readwrite, nonatomic, retain) UIColor *colorï¼› è®©æŒ‡ç¤ºå™¨å¼€å§‹åŠ¨ç”» (void)startAnimating; è®©æŒ‡ç¤ºå™¨åœæ­¢åŠ¨ç”» (void)stopAnimating; è·å–æŒ‡ç¤ºå™¨åŠ¨ç”»çŠ¶æ€ (BOOL)isAnimating; å­¦ä¹ ä½¿ç”¨ æ¬¢è¿è½¬è½½ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[{"name":"iOSç¼–ç¨‹","slug":"iOSç¼–ç¨‹","permalink":"http://huishao.cc/tags/iOSç¼–ç¨‹/"},{"name":"UIActivityIndicatorView","slug":"UIActivityIndicatorView","permalink":"http://huishao.cc/tags/UIActivityIndicatorView/"}],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"iOS UITextField ä½¿ç”¨ä¸æ–¹æ³•è§£è¯»","slug":"14iOS UITextField ä½¿ç”¨ä¸æ–¹æ³•è§£è¯»","date":"2015-04-13T16:00:00.000Z","updated":"2021-06-02T08:38:34.799Z","comments":true,"path":"2015/04/14/14iOS UITextField ä½¿ç”¨ä¸æ–¹æ³•è§£è¯»/","link":"","permalink":"http://huishao.cc/2015/04/14/14iOS UITextField ä½¿ç”¨ä¸æ–¹æ³•è§£è¯»/","excerpt":"","text":"UITextFieldæ˜¯IOSå¼€å‘ä¸­ç”¨æˆ·äº¤äº’ä¸­é‡è¦çš„ä¸€ä¸ªæ§ä»¶ï¼Œå¸¸è¢«ç”¨æ¥åšè´¦å·å¯†ç æ¡†ï¼Œè¾“å…¥ä¿¡æ¯æ¡†ç­‰ã€‚ åˆå§‹åŒ–ä¸€ä¸ªæ–‡å­—æ¡†ï¼š UITextField * textField = [[UITextField alloc]initWithFrame:CGRectMake(100, 30, 100, 100)]; è®¾ç½®å’Œè·å–æ–‡å­—æ¡†æ–‡å­—ï¼š @property(nonatomic,copy) NSString *text; é€šè¿‡AttributedStringåˆ›å»ºå’Œè·å–æ–‡å­—ï¼š @property(nonatomic,copy) NSAttributedString *attributedTextï¼› è®¾ç½®å­—ä½“é¢œè‰²å±æ€§ï¼š @property(nonatomic,retain) UIColor *textColor; è®¾ç½®å­—ä½“å±æ€§ï¼š @property(nonatomic,retain) UIFont *font; è®¾ç½®å­—ä½“å¯¹é½æ ¼å¼ï¼š @property(nonatomic)NSTextAlignment textAlignment; è®¾ç½®è¾“å…¥æ¡†é£æ ¼ï¼š @property(nonatomic) UITextBorderStyle borderStyle; è¿™ä¸ªé£æ ¼æ˜¯ä¸€ä¸ªæšä¸¾ï¼Œå¦‚ä¸‹ï¼š typedef NS_ENUM(NSInteger, UITextBorderStyle) { //æ²¡æœ‰ä»»ä½•è¾¹æ¡† UITextBorderStyleNone, //çº¿æ€§è¾¹æ¡† UITextBorderStyleLine, //é˜´å½±æ•ˆæœè¾¹æ¡† UITextBorderStyleBezel, //åŸå‹æ•ˆæœè¾¹æ¡† UITextBorderStyleRoundedRect}; è®¾ç½®é»˜è®¤å­—ä½“å±æ€§ @property(nonatomic,copy) NSDictionary *defaultTextAttributesï¼› è¿™ä¸ªå±æ€§çš„è®¾ç½®ä¼šå½±å“åˆ°å…¨éƒ¨å­—ä½“çš„å±æ€§ã€‚ è®¾ç½®ç¼ºçœæ—¶æ˜¾ç¤ºçš„ç°åº¦å­—ç¬¦ä¸² @property(nonatomic,copy) NSString *placeholder; é€šè¿‡AttributedStringè®¾ç½®ç¼ºçœå­—ç¬¦ä¸² @property(nonatomic,copy) NSAttributedString *attributedPlaceholderï¼› è®¾ç½®æ˜¯å¦åœ¨å¼€å§‹ç¼–è¾‘æ—¶æ¸…ç©ºè¾“å…¥æ¡†å†…å®¹ @property(nonatomic) BOOL clearsOnBeginEditing; è®¾ç½®å­—ä½“å¤§å°æ˜¯å¦éšå®½åº¦è‡ªé€‚åº”ï¼ˆé»˜è®¤ä¸ºNOï¼‰ @property(nonatomic) BOOL adjustsFontSizeToFitWidth; è®¾ç½®æœ€å°å­—ä½“å¤§å° @property(nonatomic) CGFloat minimumFontSize; è®¾ç½®èƒŒæ™¯å›¾ç‰‡ï¼ˆä¼šè¢«æ‹‰ä¼¸ï¼‰ @property(nonatomic,retain) UIImage *background; è®¾ç½®ç¦ç”¨æ—¶çš„èƒŒæ™¯å›¾ç‰‡ @property(nonatomic,retain) UIImage *disabledBackground; æ˜¯å¦æ­£åœ¨ç¼–è¾‘ï¼ˆåªè¯»å±æ€§ï¼‰ @property(nonatomic,readonly,getter=isEditing) BOOL editing; æ˜¯å¦å…è®¸æ›´æ”¹å­—ç¬¦å±æ€§å­—å…¸ @property(nonatomic) BOOL allowsEditingTextAttributesï¼› è®¾ç½®å±æ€§å­—å…¸ @property(nonatomic,copy) NSDictionary *typingAttributesï¼› è®¾ç½®æ¸…é™¤æŒ‰é’®çš„æ˜¾ç¤ºæ¨¡å¼ @property(nonatomic) UITextFieldViewMode clearButtonMode; è¿™æ˜¯ä¸€ä¸ªæšä¸¾ï¼Œå¦‚ä¸‹ï¼š typedef NS_ENUM(NSInteger, UITextFieldViewMode) { //ä»ä¸æ˜¾ç¤º UITextFieldViewModeNever, //ç¼–è¾‘çš„æ—¶å€™æ˜¾ç¤º UITextFieldViewModeWhileEditing, //éç¼–è¾‘çš„æ—¶å€™æ˜¾ç¤º UITextFieldViewModeUnlessEditing, //ä»»ä½•æ—¶å€™éƒ½æ˜¾ç¤º UITextFieldViewModeAlways}; è®¾ç½®è¾“å…¥æ¡†å·¦è¾¹çš„view @property(nonatomic,retain) UIView *leftView; è®¾ç½®è¾“å…¥æ¡†å·¦è§†å›¾çš„æ˜¾ç¤ºæ¨¡å¼ @property(nonatomic) UITextFieldViewMode leftViewMode; è®¾ç½®è¾“å…¥æ¡†å³è¾¹çš„view @property(nonatomic,retain) UIView *rightView; è®¾ç½®è¾“å…¥æ¡†å³è§†å›¾çš„æ˜¾ç¤ºæ¨¡å¼ @property(nonatomic) UITextFieldViewMode rightViewMode; è®¾ç½®è¾“å…¥æ¡†æˆä¸ºç¬¬ä¸€å“åº”æ—¶å¼¹å‡ºçš„è§†å›¾å’Œè¾…åŠ©è§†å›¾ï¼ˆç±»ä¼¼é”®ç›˜ï¼‰ @property (readwrite, retain) UIView inputView;@property (readwrite, retain) UIView inputAccessoryView; è¿™ä¸ªå±æ€§è®¾ç½®æ˜¯å¦å…è®¸å†æ¬¡ç¼–è¾‘æ—¶åœ¨å†…å®¹ä¸­é—´æ’å…¥å†…å®¹ @property(nonatomic) BOOL clearsOnInsertionï¼› æ³¨é”€ç¬¬ä¸€å“åº”ï¼ˆåé”®ç›˜ï¼‰ (BOOL)endEditing:(BOOL)force; UITextFieldDelegate ä»£ç†ä¸­çš„æ–¹æ³• ç‚¹å‡»è¾“å…¥æ¡†æ—¶è§¦å‘çš„æ–¹æ³•ï¼Œè¿”å›YESåˆ™å¯ä»¥è¿›å…¥ç¼–è¾‘çŠ¶æ€ï¼ŒNOåˆ™ä¸èƒ½ã€‚ (BOOL)textFieldShouldBeginEditing:(UITextField *)textField; å¼€å§‹ç¼–è¾‘æ—¶è°ƒç”¨çš„æ–¹æ³• (void)textFieldDidBeginEditing:(UITextField *)textField; å°†è¦ç»“æŸç¼–è¾‘æ—¶è°ƒç”¨çš„æ–¹æ³•ï¼Œè¿”å›YESåˆ™å¯ä»¥ç»“æŸç¼–è¾‘çŠ¶æ€ï¼ŒNOåˆ™ä¸èƒ½ (BOOL)textFieldShouldEndEditing:(UITextField *)textField; ç»“æŸç¼–è¾‘è°ƒç”¨çš„æ–¹æ³• (void)textFieldDidEndEditing:(UITextField *)textField; è¾“å…¥å­—ç¬¦æ—¶è°ƒç”¨çš„æ–¹æ³• (BOOL)textField:(UITextField )textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString )string; ç‚¹å‡»æ¸…é™¤æŒ‰é’®æ—¶è°ƒç”¨çš„å‡½æ•°ï¼Œè¿”å›YESåˆ™å¯ä»¥æ¸…é™¤ï¼Œç‚¹å‡»NOåˆ™ä¸èƒ½æ¸…é™¤ (BOOL)textFieldShouldClear:(UITextField *)textField; ç‚¹å‡»returné”®è§¦å‘çš„å‡½æ•° (BOOL)textFieldShouldReturn:(UITextField *)textField; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[{"name":"iOSç¼–ç¨‹","slug":"iOSç¼–ç¨‹","permalink":"http://huishao.cc/tags/iOSç¼–ç¨‹/"},{"name":"UITextField","slug":"UITextField","permalink":"http://huishao.cc/tags/UITextField/"}],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"iOS UISegmentedControl","slug":"13iOS UISegmentedControl","date":"2015-04-12T16:00:00.000Z","updated":"2021-06-02T08:36:44.741Z","comments":true,"path":"2015/04/13/13iOS UISegmentedControl/","link":"","permalink":"http://huishao.cc/2015/04/13/13iOS UISegmentedControl/","excerpt":"","text":"SegmentedControlåˆè¢«ç§°ä½œåˆ†æ®µæ§åˆ¶å™¨ï¼Œæ˜¯IOSå¼€å‘ä¸­ç»å¸¸ç”¨åˆ°çš„ä¸€ä¸ªUIæ§ä»¶ã€‚ åˆå§‹åŒ–æ–¹æ³•ï¼šä¼ å…¥çš„æ•°ç»„å¯ä»¥æ˜¯å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥æ˜¯UIImageå¯¹è±¡çš„å›¾ç‰‡æ•°ç»„ (instancetype)initWithItems:(NSArray *)items; è®¾ç½®æ§ä»¶é£æ ¼ï¼š @property(nonatomic) UISegmentedControlStyle segmentedControlStyle æ³¨æ„ï¼šè¿™ä¸ªå±æ€§å·²ç»åºŸå¼ƒï¼Œä¸å†èµ·ä»»ä½•ä½œç”¨ï¼Œå®ƒçš„æšä¸¾å¦‚ä¸‹ï¼š typedef NS_ENUM(NSInteger, UISegmentedControlStyle) { UISegmentedControlStylePlain, // large plain UISegmentedControlStyleBordered, // large bordered UISegmentedControlStyleBar, // small button/nav bar style. tintable UISegmentedControlStyleBezeled, // DEPRECATED. Do not use this style.} NS_DEPRECATED_IOS(2_0, 7_0, â€œThe segmentedControlStyle property no longer has any effectâ€); è®¾ç½®æ˜¯å¦ä¿æŒé€‰ä¸­çŠ¶æ€ï¼š @property(nonatomic,getter=isMomentary) BOOL momentary; æ³¨æ„ï¼šå¦‚æœè®¾ç½®ä¸ºYESï¼Œç‚¹å‡»ç»“æŸåï¼Œå°†ä¸ä¿æŒé€‰ä¸­çŠ¶æ€ï¼Œé»˜è®¤ä¸ºNO è·å–æ ‡ç­¾ä¸ªæ•°ï¼š(åªè¯») @property(nonatomic,readonly) NSUInteger numberOfSegments; è®¾ç½®æ ‡ç­¾å®½åº¦æ˜¯å¦éšå†…å®¹è‡ªé€‚åº”ï¼š @property(nonatomic) BOOL apportionsSegmentWidthsByContentï¼› æ³¨æ„ï¼šå¦‚æœè®¾ç½®ä¸ºNOï¼Œåˆ™æ‰€æœ‰æ ‡ç­¾å®½åº¦ä¸€è‡´ï¼Œä¸ºæœ€å¤§å®½åº¦ã€‚ æ’å…¥æ–‡å­—æ ‡ç­¾åœ¨indexä½ç½®ï¼š (void)insertSegmentWithTitle:(NSString *)title atIndex:(NSUInteger)segment animated:(BOOL)animated æ’å…¥å›¾ç‰‡æ ‡ç­¾åœ¨indexä½ç½® (void)insertSegmentWithImage:(UIImage *)image atIndex:(NSUInteger)segment animated:(BOOL)animated æ ¹æ®ç´¢å¼•åˆ é™¤æ ‡ç­¾ (void)removeSegmentAtIndex:(NSUInteger)segment animated:(BOOL)animated; åˆ é™¤æ‰€æœ‰æ ‡ç­¾ (void)removeAllSegments; é‡è®¾æ ‡ç­¾æ ‡é¢˜ (void)setTitle:(NSString *)title forSegmentAtIndex:(NSUInteger)segment; è·å–æ ‡ç­¾æ ‡é¢˜ (NSString *)titleForSegmentAtIndex:(NSUInteger)segment; è®¾ç½®æ ‡ç­¾å›¾ç‰‡ (void)setImage:(UIImage *)image forSegmentAtIndex:(NSUInteger)segment; è·å–æ ‡ç­¾å›¾ç‰‡ (UIImage *)imageForSegmentAtIndex:(NSUInteger)segment; æ³¨æ„ï¼šæ ‡é¢˜çš„å›¾ç‰‡åªèƒ½è®¾ç½®ä¸€ä¸ª æ ¹æ®ç´¢å¼•è®¾ç½®ç›¸åº”æ ‡ç­¾å®½åº¦ (void)setWidth:(CGFloat)width forSegmentAtIndex:(NSUInteger)segment;æ³¨æ„ï¼šå¦‚æœè®¾ç½®ä¸º0.0ï¼Œåˆ™ä¸ºè‡ªé€‚åº”ï¼Œé»˜è®¤ä¸ºæ­¤è®¾ç½®ã€‚ æ ¹æ®ç´¢å¼•è·å–æ ‡ç­¾å®½åº¦ (CGFloat)widthForSegmentAtIndex:(NSUInteger)segment; è®¾ç½®æ ‡ç­¾å†…å®¹çš„åç§»é‡ (void)setContentOffset:(CGSize)offset forSegmentAtIndex:(NSUInteger)segment; æ³¨æ„ï¼šè¿™ä¸ªåç§»é‡æŒ‡çš„æ˜¯æ ‡ç­¾çš„æ–‡å­—æˆ–è€…å›¾ç‰‡ æ ¹æ®ç´¢å¼•è·å–å˜æ ‡ç­¾å†…å®¹çš„åç§»é‡ (CGSize)contentOffsetForSegmentAtIndex:(NSUInteger)segment; æ ¹æ®æ‰€ä»¥è®¾ç½®æ ‡ç­¾æ˜¯å¦æœ‰æ•ˆ(é»˜è®¤æœ‰æ•ˆ) (void)setEnabled:(BOOL)enabled forSegmentAtIndex:(NSUInteger)segment; æ ¹æ®ç´¢å¼•è·å–å½“å‰æ ‡ç­¾æ˜¯å¦æœ‰æ•ˆ (BOOL)isEnabledForSegmentAtIndex:(NSUInteger)segment; è®¾ç½®å’Œè·å–å½“å‰é€‰ä¸­çš„æ ‡ç­¾ç´¢å¼• @property(nonatomic) NSInteger selectedSegmentIndex; è®¾ç½®æ ‡ç­¾é£æ ¼é¢œè‰² @property(nonatomic,retain) UIColor *tintColor; æ³¨æ„ï¼šè¿™ä¸ªé£æ ¼é¢œè‰²ä¼šå½±å“æ ‡ç­¾çš„æ–‡å­—å’Œå›¾ç‰‡ è®¾ç½®ç‰¹å®šçŠ¶æ€ä¸‹segmentçš„èƒŒæ™¯å›¾æ¡ˆ (void)setBackgroundImage:(UIImage *)backgroundImage forState:(UIControlState)state barMetrics:(UIBarMetrics)barMetrics æ³¨æ„ï¼šUIBarMetricsæ˜¯ä¸€ä¸ªæšä¸¾ï¼Œå¦‚ä¸‹ï¼š(defaulfé£æ ¼ä¼šå……æ»¡èƒŒæ™¯) typedef NS_ENUM(NSInteger, UIBarMetrics) { UIBarMetricsDefault, UIBarMetricsCompact, UIBarMetricsDefaultPrompt = 101, // Applicable only in bars with the prompt property, such as UINavigationBar and UISearchBar UIBarMetricsCompactPrompt, UIBarMetricsLandscapePhone NS_ENUM_DEPRECATED_IOS(5_0, 8_0, &quot;Use UIBarMetricsCompact instead&quot;) = UIBarMetricsCompact, UIBarMetricsLandscapePhonePrompt NS_ENUM_DEPRECATED_IOS(7_0, 8_0, &quot;Use UIBarMetricsCompactPrompt&quot;) = UIBarMetricsCompactPrompt, }; è·å–èƒŒæ™¯å›¾æ¡ˆ (UIImage *)backgroundImageForState:(UIControlState)state barMetrics:(UIBarMetrics)barMetrics è®¾ç½®æ ‡ç­¾ä¹‹é—´åˆ†å‰²çº¿çš„å›¾æ¡ˆ (void)setDividerImage:(UIImage *)dividerImage forLeftSegmentState:(UIControlState)leftState rightSegmentState:(UIControlState)rightState barMetrics:(UIBarMetrics)barMetrics è·å–æ ‡ç­¾ä¹‹é—´åˆ†å‰²çº¿çš„å›¾æ¡ˆ (UIImage *)dividerImageForLeftSegmentState:(UIControlState)leftState rightSegmentState:(UIControlState)rightState barMetrics:(UIBarMetrics)barMetrics é€šè¿‡Attributeå­—ç¬¦ä¸²å±æ€§å­—å…¸è®¾ç½®æ ‡ç­¾æ ‡é¢˜ (void)setTitleTextAttributes:(NSDictionary *)attributes forState:(UIControlState)state è·å–Attributeå­—ç¬¦ä¸²å±æ€§å­—å…¸ (NSDictionary *)titleTextAttributesForState:(UIControlState)state è‡ªè¡Œè®¾ç½®æ ‡ç­¾å†…å®¹çš„åç§»é‡ (void)setContentPositionAdjustment:(UIOffset)adjustment forSegmentType:(UISegmentedControlSegment)leftCenterRightOrAlone barMetrics:(UIBarMetrics)barMetrics æ³¨æ„ï¼šUIOffsetä¸ºåç§»é‡ï¼Œè¿™ä¸ªç»“æ„ä½“ä¸­åˆä¸¤ä¸ªæµ®ç‚¹æ•°ï¼Œåˆ†åˆ«è¡¨ç¤ºæ°´å¹³é‡å’Œç«–ç›´é‡ï¼›UISegmentedControlSegmentç±»å‹å‚æ•°æ˜¯ä¸€ä¸ªæšä¸¾ï¼Œå¦‚ä¸‹ï¼š typedef NS_ENUM(NSInteger, UISegmentedControlSegment) { UISegmentedControlSegmentAny = 0,//æ‰€æœ‰æ ‡ç­¾éƒ½å—å½±å“ UISegmentedControlSegmentLeft = 1, //åªæœ‰å·¦è¾¹éƒ¨åˆ†å—åˆ°å½±å“ UISegmentedControlSegmentCenter = 2, // åªæœ‰ä¸­é—´éƒ¨åˆ†å—åˆ°å½±å“ UISegmentedControlSegmentRight = 3, // åªæœ‰å³è¾¹éƒ¨åˆ†å—åˆ°å½±å“ UISegmentedControlSegmentAlone = 4, // åœ¨åªæœ‰ä¸€ä¸ªæ ‡ç­¾çš„æ—¶å€™ç”Ÿæ•ˆ}; è·å–è‡ªå®šä¹‰åç§»é‡ (UIOffset)contentPositionAdjustmentForSegmentType:(UISegmentedControlSegment)leftCenterRightOrAlone barMetrics:(UIBarMetrics)barMetrics æ·»åŠ ç‚¹å‡»äº‹ä»¶ [segmentedControl addTarget:self action:@selector(change:) forControlEvents:UIControlEventValueChanged]; ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[{"name":"iOSç¼–ç¨‹","slug":"iOSç¼–ç¨‹","permalink":"http://huishao.cc/tags/iOSç¼–ç¨‹/"},{"name":"UISegmentedControl","slug":"UISegmentedControl","permalink":"http://huishao.cc/tags/UISegmentedControl/"}],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"iOS å°è£…é™æ€åº“(.aæ–‡ä»¶)","slug":"11iOS å°è£…é™æ€åº“(.aæ–‡ä»¶)","date":"2015-04-10T16:00:00.000Z","updated":"2021-06-02T08:33:44.701Z","comments":true,"path":"2015/04/11/11iOS å°è£…é™æ€åº“(.aæ–‡ä»¶)/","link":"","permalink":"http://huishao.cc/2015/04/11/11iOS å°è£…é™æ€åº“(.aæ–‡ä»¶)/","excerpt":"","text":"iOSä¸­å¯¼å…¥å¤–éƒ¨æ–‡ä»¶ï¼Œä¸€ç§æ˜¯å°†æºç å¯¼å…¥ï¼Œä¸€ç§æ˜¯å¯¼å…¥é™æ€åº“ï¼Œæœ‰å¾ˆå¤šç¬¬ä¸‰æ–¹åº“éƒ½æ˜¯ä»¥é™æ€åº“çš„å½¢å¼æä¾›ç»™æˆ‘ä»¬ä½¿ç”¨çš„ï¼Œå¦‚ä½•åˆ¶ä½œä¸€ä¸ªé™æ€åº“å‘¢ï¼Ÿ ä¸€ã€xCodeåˆ›å»ºæ–‡ä»¶æ—¶ï¼Œé€‰æ‹©åˆ›å»ºé™æ€åº“æ–‡ä»¶ï¼šcacoaTouchStaticLibrary åˆ›å»ºå®Œæˆåï¼Œæˆ‘ä»¬åœ¨é‡Œé¢å†™æˆ‘ä»¬çš„æ–¹æ³•å’Œå®ç°ï¼š .hæ–‡ä»¶å’Œ.mæ–‡ä»¶ 1234#import &lt;Foundation/Foundation.h&gt;@interface MyStaticLibrary : NSObject-(void)myLog;@end 123456#import &quot;MyStaticLibrary.h&quot;@implementation MyStaticLibrary-(void)myLog&#123; NSLog(@&quot;myLog&quot;);&#125;@end äºŒã€ç”Ÿæˆé™æ€åº“æ–‡ä»¶ï¼šè¿™é‡Œéœ€è¦å°†è®¾å¤‡é€‰æˆIOS Deviceç„¶å ä½¿ç”¨command+Bè¿›è¡Œç¼–è¯‘ï¼Œå¦‚æœxcodeæŠ¥å‡ºè¿™æ ·çš„ä¸€ä¸ªé”™è¯¯ï¼šæˆ‘ä»¬éœ€è¦åœ¨Peoject-&gt;Code Signing -&gt;Code Signing Identity æ”¹æˆIOS Developerå†æ¬¡ç¼–è¯‘ï¼ŒæˆåŠŸã€‚ç„¶åä½ ä¼šçœ‹åˆ°ï¼ŒProductsä¸­çš„.aæ–‡ä»¶ç”±çº¢è‰²ç¼–ç¨‹äº†é»‘è‰²ã€‚æˆ‘ä»¬å³é”®show in finderï¼Œå°±å¯ä»¥çœ‹åˆ°ç¼–è¯‘æˆåŠŸçš„é™æ€åº“æ–‡ä»¶äº†ã€‚ ä¸‰ã€åˆå¹¶é™æ€åº“ åœ¨æ–‡ä»¶å¤¹ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°æœ‰ä¸¤ä¸ª.aæ–‡ä»¶ï¼Œåˆ†åˆ«ç”¨åœ¨æ¨¡æ‹Ÿå™¨è°ƒè¯•å’ŒçœŸæœºè°ƒè¯•ä¸­ï¼Œå¦‚æœæˆ‘ä»¬åœ¨å¼€å‘æ—¶éœ€è¦çœŸæœºæ¨¡æ‹Ÿå™¨ä¸åœçš„åˆ‡æ¢ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™ä¸¤ä¸ªé™æ€åº“æ–‡ä»¶åˆå¹¶æˆä¸ºä¸€ä¸ªï¼š åœ¨ç»ˆç«¯ä½¿ç”¨ï¼šlipo -create -output å‘½ä»¤ï¼š è¿™æ—¶ï¼Œæˆ‘ä»¬çš„é™æ€åº“æ–‡ä»¶å°±åšå¥½äº†ã€‚ ä¸‰ã€é™æ€åº“æ–‡ä»¶çš„ä½¿ç”¨ï¼š å°†.aå’Œ.hæ–‡ä»¶å¯¼å…¥å·¥ç¨‹ï¼Œåœ¨éœ€è¦çš„æ–‡ä»¶ä¸­å¯¼å…¥å¤´æ–‡ä»¶ï¼Œå³å¯ä½¿ç”¨ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSç¼–ç¨‹æŠ€å·§","slug":"iOSç¼–ç¨‹æŠ€å·§","permalink":"http://huishao.cc/categories/iOSç¼–ç¨‹æŠ€å·§/"}],"tags":[{"name":"iOSç¼–ç¨‹","slug":"iOSç¼–ç¨‹","permalink":"http://huishao.cc/tags/iOSç¼–ç¨‹/"},{"name":"é™æ€åº“","slug":"é™æ€åº“","permalink":"http://huishao.cc/tags/é™æ€åº“/"}],"keywords":[{"name":"iOSç¼–ç¨‹æŠ€å·§","slug":"iOSç¼–ç¨‹æŠ€å·§","permalink":"http://huishao.cc/categories/iOSç¼–ç¨‹æŠ€å·§/"}]},{"title":"iOS UIButtonè§£è¯»","slug":"12iOS UIButtonè§£è¯»","date":"2015-04-10T16:00:00.000Z","updated":"2021-06-02T08:35:20.122Z","comments":true,"path":"2015/04/11/12iOS UIButtonè§£è¯»/","link":"","permalink":"http://huishao.cc/2015/04/11/12iOS UIButtonè§£è¯»/","excerpt":"","text":"UIButtonæ§ä»¶æ˜¯åº”ç”¨ç•Œé¢ä¸­å¸¸ç”¨çš„ä¸€ä¸ªæ§ä»¶ï¼Œç”¨æ³•æ€»ç»“ï¼š ä¸€ã€åˆå§‹åŒ– UIButtonçš„åˆå§‹åŒ–ä¸€èˆ¬ä½¿ç”¨å…¶ç±»æ–¹æ³•ï¼Œ+ (id)buttonWithType:(UIButtonType)buttonType; é£æ ¼çš„æšä¸¾å¦‚ä¸‹ï¼š typedef NS_ENUM(NSInteger, UIButtonType) { //ç”¨æˆ·è‡ªå®šä¹‰ï¼Œæ— é£æ ¼ UIButtonTypeCustom = 0, //ç³»ç»Ÿé»˜è®¤é£æ ¼ UIButtonTypeSystem NS_ENUM_AVAILABLE_IOS(7_0), //ä¸€ä¸‹è¿™ä¸‰ç§åˆ›å»ºå‡ºæ¥çš„æŒ‰é’®ä¸€æ ·ï¼Œä¸€ä¸ªè“è‰²çš„åœ†åœˆï¼Œä¸­é—´æœ‰ä¸ªå¹å· UIButtonTypeDetailDisclosure, UIButtonTypeInfoLight, UIButtonTypeInfoDark, //åˆ›å»º+å·æŒ‰é’® UIButtonTypeContactAdd, //åºŸå¼ƒ UIButtonTypeRoundedRect = UIButtonTypeSystem,}; äºŒã€å±æ€§è®¾ç½® @property(nonatomic) UIEdgeInsets contentEdgeInsets UI_APPEARANCE_SELECTOR;//è¿™ä¸ªå±æ€§è®¾ç½®buttoné‡Œå†…å®¹çš„åç§»é‡ï¼ŒåŒ…æ‹¬titleå’Œimageï¼Œå¯ä»¥ç”¨å¦‚ä¸‹æ–¹æ³•è®¾ç½®btn.contentEdgeInsets=UIEdgeInsetsMake(20, 20, 0, 0); @property(nonatomic) UIEdgeInsets titleEdgeInsets;//è¿™ä¸ªå±æ€§è®¾ç½®æ ‡é¢˜çš„åç§»é‡@property(nonatomic) BOOL reversesTitleShadowWhenHighlighted;//æŒ‰é’®é«˜äº®æ—¶ï¼Œæ˜¯å¦æ”¹å˜é˜´å½±æ•ˆæœ@property(nonatomic) UIEdgeInsets imageEdgeInsets;//å›¾ç‰‡çš„åç§»é‡@property(nonatomic)BOOL adjustsImageWhenHighlighted;//è®¾ç½®å›¾ç‰‡çš„ç»˜åˆ¶æ˜¯å¦é«˜äº®æ—¶å˜æš—@property(nonatomic)BOOL adjustsImageWhenDisabled;//è®¾ç½®å›¾ç‰‡æ˜¯å¦è½»ç»˜åˆ¶å½“æŒ‰é’®ç¦ç”¨æ—¶@property(nonatomic)BOOL showsTouchWhenHighlighted;//è®¾ç½®æ˜¯å¦æ˜¾ç¤ºæ‰‹æŒ‡å°åœ¨æŒ‰é’®é«˜äº®çš„æ—¶å€™@property(nonatomic,retain) UIColor *tintColor NS_AVAILABLE_IOS(5_0);//è¿™ä¸ªå±æ€§ä¼šä½œç”¨äºæ ‡é¢˜å’Œå›¾ç‰‡ï¼Œä½†æ˜¯å¦‚æœä½ æ˜¯è‡ªå®šä¹‰é£æ ¼çš„æŒ‰é’®ï¼Œè¿™ä¸ªå±æ€§å°†ä¸èµ·ä»»ä½•ä½œç”¨ï¼Œå®ƒåªä½œç”¨äºç³»ç»Ÿçš„@property(nonatomic,readonly) UIButtonType buttonType;//è®¾ç½®buttonçš„é£æ ¼ ä¸‰ã€ä¸€äº›setæ–¹æ³• (void)setTitle:(NSString *)title forState:(UIControlState)state;//è®¾ç½®æ ‡é¢˜å’Œæ˜¾ç¤ºå½“å‰æ ‡é¢˜çš„æŒ‰é’®çŠ¶æ€ (void)setTitleColor:(UIColor *)color forState:(UIControlState)state;//è®¾ç½®æ ‡é¢˜é¢œè‰²å’Œæ˜¾ç¤ºå½“å‰é¢œè‰²çš„æŒ‰é’®çŠ¶æ€ (void)setTitleShadowColor:(UIColor *)color forState:(UIControlState)state;//è®¾ç½®æ ‡é¢˜é˜´å½±é¢œè‰²åŠæ˜¾ç¤ºæ—¶çš„çŠ¶æ€ (void)setImage:(UIImage *)image forState:(UIControlState)state;//è®¾ç½®æŒ‰é’®å›¾ç‰‡å’Œæ˜¾ç¤ºå½“å‰å›¾ç‰‡æ—¶çš„çŠ¶æ€ (void)setBackgroundImage:(UIImage *)image forState:(UIControlState)state;//è®¾ç½®æŒ‰é’®èƒŒæ™¯å›¾ç‰‡å’Œæ˜¾ç¤ºå›¾ç‰‡æ—¶çš„çŠ¶æ€ (void)setAttributedTitle:(NSAttributedString *)title forState:(UIControlState)state NS_AVAILABLE_IOS(6_0);//é€šè¿‡AttributeStringåˆ›å»ºæ ‡é¢˜ æ³¨æ„ï¼šæŒ‰é’®å›¾ç‰‡è®¾ç½®å’ŒèƒŒæ™¯å›¾ç‰‡çš„ä¸åŒåœ¨äºï¼š 1ã€è®¾ç½®å›¾ç‰‡ï¼Œå¦‚æœæœ‰æ ‡é¢˜ä¼šå’Œæ ‡é¢˜å¹¶åˆ—æ˜¾ç¤º 2ã€è®¾ç½®èƒŒæ™¯å›¾ç‰‡ä¼šå‡ºç°åœ¨æ ‡é¢˜ä¸‹é¢ 3ã€å›¾ç‰‡çš„åç§»é‡å¯ä»¥è®¾ç½®ï¼ŒèƒŒæ™¯å›¾ç‰‡ä¸å¯ä»¥ã€‚ å››ã€ä¸€äº›getæ–¹æ³•ï¼Œå¯ä»¥å¾—åˆ°ä¸Šè¿°è®¾ç½®çš„å±æ€§ (NSString *)titleForState:(UIControlState)state; (UIColor *)titleColorForState:(UIControlState)state; (UIColor *)titleShadowColorForState:(UIControlState)state; (UIImage *)imageForState:(UIControlState)state; (UIImage *)backgroundImageForState:(UIControlState)state; (NSAttributedString *)attributedTitleForState:(UIControlState)state NS_AVAILABLE_IOS(6_0); äº”ã€ä¸€äº›åªè¯»å±æ€§ @property(nonatomic,readonly,retain) NSString currentTitle;@property(nonatomic,readonly,retain) UIColor currentTitleColor;@property(nonatomic,readonly,retain) UIColor currentTitleShadowColor;@property(nonatomic,readonly,retain) UIImage currentImage;@property(nonatomic,readonly,retain) UIImage currentBackgroundImage;@property(nonatomic,readonly,retain) NSAttributedString currentAttributedTitle NS_AVAILABLE_IOS(6_0);//è¿™ä¸¤ä¸ªå‚æ•°éœ€è¦æ³¨æ„ï¼Œè™½ç„¶ä»–ä»¬æ˜¯åªè¯»å±æ€§ä¸èƒ½é‡æ–°è®¾ç½®ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥è®¾ç½®labelå’ŒimageViewçš„ç›¸å…³å±æ€§@property(nonatomic,readonly,retain) UILabel titleLabel NS_AVAILABLE_IOS(3_0);@property(nonatomic,readonly,retain) UIImageView imageView NS_AVAILABLE_IOS(3_0); å…­ã€ä¸‹é¢è¿™äº›å‡½æ•°ï¼Œéƒ½ä¼šè¿”å›ä¸€ä¸ªCGRect çŸ©å½¢èŒƒå›´ (CGRect)backgroundRectForBounds:(CGRect)bounds;//è¿”å›èƒŒæ™¯å¤§å° (CGRect)contentRectForBounds:(CGRect)bounds;//è¿”å›è§†å›¾å¤§å°ï¼ŒåŒ…æ‹¬æ ‡é¢˜å’Œå›¾ç‰‡ (CGRect)titleRectForContentRect:(CGRect)contentRect;//è¿”å›æ ‡é¢˜å¤§å° (CGRect)imageRectForContentRect:(CGRect)contentRect;//è¿”å›å›¾ç‰‡å¤§å° å…³äºè§¦å‘äº‹ä»¶ï¼Œbuttonæ˜¯ç»§æ‰¿äºUIControl,è¿™é‡Œä¸å†å™è¿°ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[{"name":"iOSç¼–ç¨‹","slug":"iOSç¼–ç¨‹","permalink":"http://huishao.cc/tags/iOSç¼–ç¨‹/"},{"name":"UIButton","slug":"UIButton","permalink":"http://huishao.cc/tags/UIButton/"}],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"iOS NSInvocationåº”ç”¨ä¸ç†è§£","slug":"09iOS NSInvocationåº”ç”¨ä¸ç†è§£","date":"2015-04-09T16:00:00.000Z","updated":"2021-05-31T03:36:47.104Z","comments":true,"path":"2015/04/10/09iOS NSInvocationåº”ç”¨ä¸ç†è§£/","link":"","permalink":"http://huishao.cc/2015/04/10/09iOS NSInvocationåº”ç”¨ä¸ç†è§£/","excerpt":"","text":"IOSä¸­æœ‰ä¸€ä¸ªç±»å‹æ˜¯SELï¼Œå®ƒçš„ä½œç”¨å¾ˆç›¸ä¼¼ä¸å‡½æ•°æŒ‡é’ˆï¼Œé€šè¿‡performSelector:withObject:å‡½æ•°å¯ä»¥ç›´æ¥è°ƒç”¨è¿™ä¸ªæ¶ˆæ¯ã€‚ä½†æ˜¯performç›¸å…³çš„è¿™äº›å‡½æ•°ï¼Œæœ‰ä¸€ä¸ªå±€é™æ€§ï¼Œå…¶å‚æ•°æ•°é‡ä¸èƒ½è¶…è¿‡2ä¸ªï¼Œå¦åˆ™è¦åšå¾ˆéº»çƒ¦çš„å¤„ç†ï¼Œä¸ä¹‹ç›¸å¯¹ï¼ŒNSInvocationä¹Ÿæ˜¯ä¸€ç§æ¶ˆæ¯è°ƒç”¨çš„æ–¹æ³•ï¼Œå¹¶ä¸”å®ƒçš„å‚æ•°æ²¡æœ‰é™åˆ¶ã€‚è¿™ä¸¤ç§ç›´æ¥è°ƒç”¨å¯¹è±¡æ¶ˆæ¯çš„æ–¹æ³•ï¼Œåœ¨IOS4.0ä¹‹åï¼Œå¤§å¤šè¢«blockç»“æ„æ‰€å–ä»£ï¼Œåªæœ‰åœ¨å¾ˆè€çš„å…¼å®¹æ€§ç³»ç»Ÿä¸­æ‰ä¼šä½¿ç”¨ï¼Œç®€å•ç”¨æ³•æ€»ç»“å¦‚ä¸‹ï¼š ä¸€ã€åˆå§‹åŒ–ä¸è°ƒç”¨ åœ¨å®˜æ–¹æ–‡æ¡£ä¸­æœ‰æ˜ç¡®è¯´æ˜ï¼ŒNSInvocationå¯¹è±¡åªèƒ½ä½¿ç”¨å…¶ç±»æ–¹æ³•æ¥åˆå§‹åŒ–ï¼Œä¸å¯ä½¿ç”¨alloc/initæ–¹æ³•ã€‚å®ƒæ‰§è¡Œè°ƒç”¨ä¹‹å‰ï¼Œéœ€è¦è®¾ç½®ä¸¤ä¸ªæ–¹æ³•ï¼šsetSelector: å’ŒsetArgument:atIndexï¼š 123456789101112131415161718- (void)viewDidLoad &#123; [super viewDidLoad]; SEL myMethod = @selector(myLog); //åˆ›å»ºä¸€ä¸ªå‡½æ•°ç­¾åï¼Œè¿™ä¸ªç­¾åå¯ä»¥æ˜¯ä»»æ„çš„,ä½†éœ€è¦æ³¨æ„ï¼Œç­¾åå‡½æ•°çš„å‚æ•°æ•°é‡è¦å’Œè°ƒç”¨çš„ä¸€è‡´ã€‚ NSMethodSignature * sig = [NSNumber instanceMethodSignatureForSelector:@selector(init)]; //é€šè¿‡ç­¾ååˆå§‹åŒ– NSInvocation * invocatin = [NSInvocation invocationWithMethodSignature:sig]; //è®¾ç½®target [invocatin setTarget:self]; //è®¾ç½®selecteor [invocatin setSelector:myMethod]; //æ¶ˆæ¯è°ƒç”¨ [invocatin invoke]; &#125;-(void)myLog&#123; NSLog(@&quot;MyLog&quot;);&#125; æ³¨æ„ï¼šç­¾åå‡½æ•°çš„å‚æ•°æ•°é‡è¦å’Œè°ƒç”¨å‡½æ•°çš„ä¸€è‡´ã€‚æµ‹è¯•åå‘ç°ï¼Œå½“ç­¾åå‡½æ•°å‚æ•°æ•°é‡å¤§äºè¢«è°ƒå‡½æ•°æ—¶ï¼Œä¹Ÿæ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚ è°ƒç”¨å¤šå‚æ•°çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å†™ï¼š 123456789101112131415161718- (void)viewDidLoad &#123; [super viewDidLoad]; SEL myMethod = @selector(myLog:parm:parm:); NSMethodSignature * sig = [[self class] instanceMethodSignatureForSelector:myMethod]; NSInvocation * invocatin = [NSInvocation invocationWithMethodSignature:sig]; [invocatin setTarget:self]; [invocatin setSelector:myMethod2]; int a=1; int b=2; int c=3; [invocatin setArgument:&amp;a atIndex:2]; [invocatin setArgument:&amp;b atIndex:3]; [invocatin setArgument:&amp;c atIndex:4]; [invocatin invoke];&#125;-(void)myLog:(int)a parm:(int)b parm:(int)c&#123; NSLog(@&quot;MyLog%d:%d:%d&quot;,a,b,c);&#125; æ³¨æ„ï¼š1ã€è¿™é‡Œè®¾ç½®å‚æ•°çš„Index éœ€è¦ä»2å¼€å§‹ï¼Œå› ä¸ºå‰ä¸¤ä¸ªè¢«selectorå’Œtargetå ç”¨ã€‚ä¸‹é¢è¿™æ ·å†™ä¹Ÿæ²¡æœ‰ä»»ä½•é—®é¢˜ï¼š 123456789101112131415161718192021- (void)viewDidLoad &#123; [super viewDidLoad]; SEL myMethod = @selector(myLog:parm:parm:); SEL myMethod2 = @selector(myLog); NSMethodSignature * sig = [[self class] instanceMethodSignatureForSelector:myMethod]; NSInvocation * invocatin = [NSInvocation invocationWithMethodSignature:sig]; ViewController * view = self; [invocatin setArgument:&amp;view atIndex:0]; [invocatin setArgument:&amp;myMethod2 atIndex:1]; int a=1; int b=2; int c=3; [invocatin setArgument:&amp;a atIndex:2]; [invocatin setArgument:&amp;b atIndex:3]; [invocatin setArgument:&amp;c atIndex:4]; [invocatin retainArguments]; [invocatin invoke];&#125;-(void)myLog:(int)a parm:(int)b parm:(int)c&#123; NSLog(@&quot;MyLog%d:%d:%d&quot;,a,b,c);&#125; 2ã€è¿™é‡Œçš„ä¼ å‚æ–¹å¼å¿…é¡»æ˜¯ä¼ é€’å‚æ•°åœ°å€ã€‚ äºŒã€NSInvocationçš„è¿”å›å€¼ NSInvocationå¯¹è±¡ï¼Œæ˜¯å¯ä»¥æœ‰è¿”å›å€¼çš„ï¼Œç„¶è€Œè¿™ä¸ªè¿”å›å€¼ï¼Œå¹¶ä¸æ˜¯å…¶æ‰€è°ƒç”¨å‡½æ•°çš„è¿”å›å€¼ï¼Œéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨è®¾ç½®ï¼š 1234567891011121314151617181920212223242526272829- (void)viewDidLoad &#123; [super viewDidLoad]; SEL myMethod = @selector(myLog:parm:parm:); NSMethodSignature * sig = [[self class] instanceMethodSignatureForSelector:myMethod]; NSInvocation * invocatin = [NSInvocation invocationWithMethodSignature:sig]; [invocatin setTarget:self]; [invocatin setSelector:myMethod2]; ViewController * view = self; int a=1; int b=2; int c=3; [invocatin setArgument:&amp;view atIndex:0]; [invocatin setArgument:&amp;myMethod2 atIndex:1]; [invocatin setArgument:&amp;a atIndex:2]; [invocatin setArgument:&amp;b atIndex:3]; [invocatin setArgument:&amp;c atIndex:4]; [invocatin retainArguments]; //æˆ‘ä»¬å°†cçš„å€¼è®¾ç½®ä¸ºè¿”å›å€¼ [invocatin setReturnValue:&amp;c]; int d; //å–è¿™ä¸ªè¿”å›å€¼ [invocatin getReturnValue:&amp;d]; NSLog(@&quot;%d&quot;,d); &#125;-(int)myLog:(int)a parm:(int)b parm:(int)c&#123; NSLog(@&quot;MyLog%d:%d:%d&quot;,a,b,c); return a+b+c;&#125; æ³¨æ„ï¼šè¿™é‡Œçš„æ“ä½œä¼ é€’çš„éƒ½æ˜¯åœ°å€ã€‚å¦‚æœæ˜¯OCå¯¹è±¡ï¼Œä¹Ÿæ˜¯å–åœ°å€ã€‚ ä¸‰ã€å…³äºå†…å­˜ å¯ä»¥æ³¨æ„åˆ°- (void)retainArguments;è¿™ä¸ªæ–¹æ³•ï¼Œå®ƒä¼šå°†ä¼ å…¥çš„æ‰€æœ‰å‚æ•°ä»¥åŠtargetéƒ½retainä¸€éã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSç¼–ç¨‹æŠ€å·§","slug":"iOSç¼–ç¨‹æŠ€å·§","permalink":"http://huishao.cc/categories/iOSç¼–ç¨‹æŠ€å·§/"}],"tags":[{"name":"iOSç¼–ç¨‹","slug":"iOSç¼–ç¨‹","permalink":"http://huishao.cc/tags/iOSç¼–ç¨‹/"},{"name":"NSInvocation","slug":"NSInvocation","permalink":"http://huishao.cc/tags/NSInvocation/"}],"keywords":[{"name":"iOSç¼–ç¨‹æŠ€å·§","slug":"iOSç¼–ç¨‹æŠ€å·§","permalink":"http://huishao.cc/categories/iOSç¼–ç¨‹æŠ€å·§/"}]},{"title":"iOS NSTimer å®šæ—¶å™¨ç”¨æ³•æ€»ç»“","slug":"10iOS NSTimer å®šæ—¶å™¨ç”¨æ³•æ€»ç»“","date":"2015-04-09T16:00:00.000Z","updated":"2021-05-31T03:37:50.677Z","comments":true,"path":"2015/04/10/10iOS NSTimer å®šæ—¶å™¨ç”¨æ³•æ€»ç»“/","link":"","permalink":"http://huishao.cc/2015/04/10/10iOS NSTimer å®šæ—¶å™¨ç”¨æ³•æ€»ç»“/","excerpt":"","text":"NSTimeråœ¨IOSå¼€å‘ä¸­ä¼šç»å¸¸ç”¨åˆ°ï¼Œå°¤å…¶æ˜¯å°å‹æ¸¸æˆï¼Œç„¶è€Œå¯¹äºåˆå­¦è€…æ—¶å¸¸ä¼šæ³¨æ„ä¸åˆ°å…¶ä¸­çš„å†…å­˜é‡Šæ”¾é—®é¢˜ï¼Œå°†å…¶åŸºæœ¬ç”¨æ³•æ€»ç»“å¦‚ä¸‹ï¼š ä¸€ã€åˆå§‹åŒ–æ–¹æ³•ï¼šæœ‰äº”ç§åˆå§‹åŒ–æ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯ + (NSTimer )timerWithTimeInterval:(NSTimeInterval)ti invocation:(NSInvocation )invocation repeats:(BOOL)yesOrNo; 123456789101112- (void)viewDidLoad &#123; [super viewDidLoad]; //åˆå§‹åŒ–ä¸€ä¸ªInvocationå¯¹è±¡ NSInvocation * invo = [NSInvocation invocationWithMethodSignature:[[self class] instanceMethodSignatureForSelector:@selector(init)]]; [invo setTarget:self]; [invo setSelector:@selector(myLog)]; NSTimer * timer = [NSTimer timerWithTimeInterval:1 invocation:invo repeats:YES]; //åŠ å…¥ä¸»å¾ªç¯æ± ä¸­ [[NSRunLoop mainRunLoop]addTimer:timer forMode:NSDefaultRunLoopMode]; //å¼€å§‹å¾ªç¯ [timer fire];&#125; + (NSTimer )scheduledTimerWithTimeInterval:(NSTimeInterval)ti invocation:(NSInvocation )invocation repeats:(BOOL)yesOrNo; 1 NSTimer * timer = [NSTimer scheduledTimerWithTimeInterval:1 invocation:invo repeats:YES]; + (NSTimer *)timerWithTimeInterval:(NSTimeInterval)ti target:(id)aTarget selector:(SEL)aSelector userInfo:(id)userInfo repeats:(BOOL)yesOrNo; 1NSTimer * timer = [NSTimer timerWithTimeInterval:1 target:self selector:@selector(myLog) userInfo:nil repeats:NO] + (NSTimer *)scheduledTimerWithTimeInterval:(NSTimeInterval)ti target:(id)aTarget selector:(SEL)aSelector userInfo:(id)userInfo repeats:(BOOL)yesOrNo; 1NSTimer * timer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(myLog:) userInfo:@&quot;123&quot; repeats:YES] - (instancetype)initWithFireDate:(NSDate *)date interval:(NSTimeInterval)ti target:(id)t selector:(SEL)s userInfo:(id)ui repeats:(BOOL)rep 12 NSTimer * timer = [[NSTimer alloc]initWithFireDate:[NSDate distantPast] interval:1 target:self selector:@selector(myLog:) userInfo:nil repeats:YES]; [[NSRunLoop mainRunLoop]addTimer:timer forMode:NSDefaultRunLoopMode]; æ³¨æ„ï¼šè¿™äº”ç§åˆå§‹åŒ–æ–¹æ³•çš„å¼‚åŒï¼š 1ã€å‚æ•°repeatsæ˜¯æŒ‡å®šæ˜¯å¦å¾ªç¯æ‰§è¡Œï¼ŒYESå°†å¾ªç¯ï¼ŒNOå°†åªæ‰§è¡Œä¸€æ¬¡ã€‚ 2ã€timerWithTimeIntervalè¿™ä¸¤ä¸ªç±»æ–¹æ³•åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡å¦‚æœä¸ç”¨ addTimer: forModeæ–¹æ³•æ‰‹åŠ¨åŠ å…¥ä¸»å¾ªç¯æ± ä¸­ï¼Œå°†ä¸ä¼šå¾ªç¯æ‰§è¡Œã€‚å¹¶ä¸”å¦‚æœä¸æ‰‹åŠ¨è°ƒç”¨fairï¼Œåˆ™å®šæ—¶å™¨ä¸ä¼šå¯åŠ¨ã€‚ 3ã€scheduledTimerWithTimeIntervalè¿™ä¸¤ä¸ªæ–¹æ³•ä¸éœ€è¦æ‰‹åŠ¨è°ƒç”¨fairï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œï¼Œå¹¶ä¸”è‡ªåŠ¨åŠ å…¥ä¸»å¾ªç¯æ± ã€‚ 4ã€initæ–¹æ³•éœ€è¦æ‰‹åŠ¨åŠ å…¥å¾ªç¯æ± ï¼Œå®ƒä¼šåœ¨è®¾å®šçš„å¯åŠ¨æ—¶é—´å¯åŠ¨ã€‚ äºŒã€æˆå‘˜å˜é‡ @property (copy) NSDate *fireDate; è¿™æ˜¯è®¾ç½®å®šæ—¶å™¨çš„å¯åŠ¨æ—¶é—´ï¼Œå¸¸ç”¨æ¥ç®¡ç†å®šæ—¶å™¨çš„å¯åŠ¨ä¸åœæ­¢ 1234 //å¯åŠ¨å®šæ—¶å™¨ timer.fireDate = [NSDate distantPast]; //åœæ­¢å®šæ—¶å™¨ timer.fireDate = [NSDate distantFuture]; @property (readonly) NSTimeInterval timeInterval; è¿™ä¸ªæ˜¯ä¸€ä¸ªåªè¯»å±æ€§ï¼Œè·å–å®šæ—¶å™¨è°ƒç”¨é—´éš”æ—¶é—´ã€‚ @property NSTimeInterval tolerance; è¿™æ˜¯7.0ä¹‹åæ–°å¢çš„ä¸€ä¸ªå±æ€§ï¼Œå› ä¸ºNSTimerå¹¶ä¸å®Œå…¨ç²¾å‡†ï¼Œé€šè¿‡è¿™ä¸ªå€¼è®¾ç½®è¯¯å·®èŒƒå›´ã€‚ @property (readonly, getter=isValid) BOOL valid; è·å–å®šæ—¶å™¨æ˜¯å¦æœ‰æ•ˆ @property (readonly, retain) id userInfo; è·å–å‚æ•°ä¿¡æ¯ ä¸‰ã€å…³äºå†…å­˜é‡Šæ”¾ å¦‚æœæˆ‘ä»¬å¯åŠ¨äº†ä¸€ä¸ªå®šæ—¶å™¨ï¼Œåœ¨æŸä¸ªç•Œé¢é‡Šæ”¾å‰ï¼Œå°†è¿™ä¸ªå®šæ—¶å™¨åœæ­¢ï¼Œç”šè‡³ç½®ä¸ºnilï¼Œéƒ½ä¸èƒ½æ˜¯è¿™ä¸ªç•Œé¢é‡Šæ”¾ï¼ŒåŸå› æ˜¯ç³»ç»Ÿçš„å¾ªç¯æ± ä¸­è¿˜ä¿æœ‰è¿™ä¸ªå¯¹è±¡ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦è¿™æ ·åšï¼š 123456789101112131415161718-(void)dealloc&#123; NSLog(@&quot;dealloc:%@&quot;,[self class]);&#125;- (void)viewDidLoad &#123; [super viewDidLoad]; timer= [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(myLog:) userInfo:nil repeats:YES]; UIButton *btn = [[UIButton alloc]initWithFrame:CGRectMake(0, 0, 100, 100)]; btn.backgroundColor=[UIColor redColor]; [btn addTarget:self action:@selector(btn) forControlEvents:UIControlEventTouchUpInside]; [self.view addSubview:btn];&#125;-(void)btn&#123; if (timer.isValid) &#123; [timer invalidate]; &#125; timer=nil; [self dismissViewControllerAnimated:YES completion:nil];&#125; åœ¨å®˜æ–¹æ–‡æ¡£ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ° [timer invalidate]æ˜¯å”¯ä¸€çš„æ–¹æ³•å°†å®šæ—¶å™¨ä»å¾ªç¯æ± ä¸­ç§»é™¤ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSç¼–ç¨‹æŠ€å·§","slug":"iOSç¼–ç¨‹æŠ€å·§","permalink":"http://huishao.cc/categories/iOSç¼–ç¨‹æŠ€å·§/"}],"tags":[{"name":"iOSç¼–ç¨‹","slug":"iOSç¼–ç¨‹","permalink":"http://huishao.cc/tags/iOSç¼–ç¨‹/"},{"name":"NSTimer","slug":"NSTimer","permalink":"http://huishao.cc/tags/NSTimer/"}],"keywords":[{"name":"iOSç¼–ç¨‹æŠ€å·§","slug":"iOSç¼–ç¨‹æŠ€å·§","permalink":"http://huishao.cc/categories/iOSç¼–ç¨‹æŠ€å·§/"}]},{"title":"iOS ä¸­blockç»“æ„çš„ç®€å•ç”¨æ³•","slug":"08iOS ä¸­blockç»“æ„çš„ç®€å•ç”¨æ³•","date":"2015-04-08T16:00:00.000Z","updated":"2021-05-31T03:35:27.069Z","comments":true,"path":"2015/04/09/08iOS ä¸­blockç»“æ„çš„ç®€å•ç”¨æ³•/","link":"","permalink":"http://huishao.cc/2015/04/09/08iOS ä¸­blockç»“æ„çš„ç®€å•ç”¨æ³•/","excerpt":"","text":"è‡ªä»blockå‡ºç°ä¹‹åï¼Œå¾ˆå¤šAPIéƒ½å¼€å§‹é‡‡ç”¨è¿™æ ·çš„ç»“æ„ï¼Œç”±æ­¤å¯è§ï¼Œblockç¡®å®æœ‰è®¸å¤šä¼˜åŠ¿å­˜åœ¨ï¼Œè¿™é‡Œå°†ä¸€äº›ç®€å•ç”¨æ³•æ€»ç»“å¦‚ä¸‹ï¼š ä¸€ã€å¦‚ä½•å£°æ˜ä¸€ä¸ªblockå˜é‡ æˆ‘ä»¬é€šè¿‡^ç¬¦å·æ¥å£°æ˜blockç±»å‹ï¼Œå½¢å¼å¦‚ä¸‹ï¼š void (^myBlock)(); å…¶ä¸­ç¬¬ä¸€ä¸ªvoidæ˜¯è¿”å›å€¼ï¼Œå¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼Œä¸­é—´æ‹¬å·ä¸­^åé¢çš„æ˜¯è¿™ä¸ªblockå˜é‡çš„åå­—ï¼Œæˆ‘æŠŠå®ƒå‘½åä¸ºmyBlockï¼Œæœ€åä¸€ä¸ªæ‹¬å·ä¸­æ˜¯å‚æ•°ï¼Œå¦‚æœå¤šå‚æ•°ï¼Œå¯ä»¥å†™æˆå¦‚ä¸‹æ ·å¼ï¼š int (^myBlock)(int,int); åŒæ ·ï¼Œä½ ä¹Ÿå¯ä»¥ç»™å‚æ•°èµ·åå­—ï¼š int (^myBlock)(int a,int b); å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å°†æˆ‘ä»¬å£°æ˜çš„blockç±»å‹ä½œä¸ºå‡½æ•°çš„å‚æ•°ï¼Œä¹Ÿæœ‰ä¸¤ç§æ–¹å¼ï¼š 1ã€-(void)func:(int (^)(int a,int b))blockï¼› ç¬¬äºŒç§æ–¹å¼æ˜¯é€šè¿‡typedefå®šä¹‰ä¸€ç§æ–°çš„ç±»å‹ï¼Œè¿™ä¹Ÿæ˜¯å¤§å¤šæ•°æƒ…å†µä¸‹é‡‡ç”¨çš„æ–¹å¼ï¼š 2ã€typedef int (^myBlock)(int a,int b) ; -(void)func:(myBlock)block ; äºŒã€å¦‚ä½•å®ç°ä¸€ä¸ªblock æ—¢ç„¶blockå¯ä»¥è¢«å£°æ˜ä¸ºå˜é‡ï¼Œé‚£ä¹ˆå°±ä¸€å®šå¯ä»¥å®ç°å®ƒï¼Œå°±åƒå…¶ä»–ç±»å‹å˜é‡çš„èµ‹å€¼ã€‚æˆ‘è‡ªå·±å¯¹blockçš„ç†è§£ä¸ºå®ƒæ˜¯ä¸€æ–­ä»£ç å—ï¼Œæ‰€ä»¥ç»™å®ƒèµ‹å€¼èµ‹ä¾¿æ˜¯ä¸€æ®µä»£ç æ®µï¼š 1234567891011121314151617typedef int (^myBlock)(int,int) ;@interface ViewController ()&#123; myBlock block1;&#125;@end@implementation ViewController- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view, typically from a nib. block1 =^(int a, int b)&#123; return a+b; &#125;; NSLog(@&quot;%d&quot;,block1(1,1));&#125; è¿™é‡Œæ‰“å°çš„ç»“æœæ˜¯2ï¼Œä»è¿™é‡Œå¯ä»¥å‘ç°blockå’Œå‡½æ•°çš„åŠŸèƒ½å¾ˆåƒã€‚ æ³¨æ„ï¼š1ã€åœ¨ä¸Šé¢çš„ä»£ç é‡Œ block1æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœç›´æ¥æ‰“å°å°†æ‰“å°å¯¹è±¡åœ°å€ 2ã€block()ï¼ŒåŠ ä¸Šåé¢çš„æ‹¬å·æ‰æ˜¯æ‰§è¡Œblockè¯­å¥å— ä¸‰ã€blockä¸­è®¿é—®å¯¹è±¡çš„å¾®å¦™å…³ç³» 1ã€å¦‚æœä½ åœ¨ä¸€ä¸ªblockå—ä¸­ä»…ä»…è®¿é—®å¯¹è±¡ï¼Œè€Œä¸æ˜¯å¯¹ä»–è¿›è¡Œä¿®æ”¹æ“ä½œï¼Œæ˜¯æ²¡æœ‰ä»»ä½•é—®é¢˜çš„ï¼š 12345678910- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view, typically from a nib. int tem=2; block1 = ^(int a,int b)&#123; int count= tem+1; return count; &#125;; NSLog(@&quot;%d&quot;,block1(1,1));&#125; è€Œå¦‚æœæˆ‘åœ¨blockå—ä¸­ç›´æ¥ä¿®æ”¹ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼š 1234 block1 = ^(int a,int b)&#123; tem+=1; return tem+1; &#125;; ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™æ ·çš„æƒ…å†µï¼Œæ ¹æ®çŒœæµ‹ï¼Œå¯èƒ½æ˜¯blockå†…éƒ¨å°†è®¿é—®çš„å˜é‡éƒ½å¤‡ä»½äº†ä¸€ä»½ï¼Œå¦‚æœæˆ‘ä»¬åœ¨å†…éƒ¨ä¿®æ”¹ï¼Œå¤–éƒ¨çš„å˜é‡å¹¶ä¸ä¼šè¢«ä¿®æ”¹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰“å°å˜é‡çš„åœ°å€æ¥è¯æ˜è¿™ä¸€ç‚¹ï¼š 12345678910- (void)viewDidLoad &#123; [super viewDidLoad]; int tem=2; NSLog(@&quot;%p&quot;,&amp;tem); block1 = ^(int a,int b)&#123; NSLog(@&quot;%p&quot;,&amp;tem); return tem+1; &#125;; NSLog(@&quot;%d&quot;,block1(1,1)); &#125; æ‰“å°ç»“æœå¦‚ä¸‹ï¼š å¯ä»¥çœ‹å‡ºï¼Œå˜é‡çš„åœ°å€å·²ç»æ”¹å˜ã€‚ 2ã€__block åšäº†ä»€ä¹ˆ ä¸ºäº†å¯ä»¥åœ¨blockå—ä¸­è®¿é—®å¹¶ä¿®æ”¹å¤–éƒ¨å˜é‡ï¼Œæˆ‘ä»¬å¸¸ä¼šæŠŠå˜é‡å£°æ˜æˆ__blockç±»å‹ï¼Œé€šè¿‡ä¸Šé¢çš„åŸç†ï¼Œå¯ä»¥å‘ç°ï¼Œå…¶å®è¿™ä¸ªå…³é”®å­—åªåšäº†ä¸€ä»¶äº‹ï¼Œå¦‚æœåœ¨blockä¸­è®¿é—®æ²¡æœ‰æ·»åŠ è¿™ä¸ªå…³é”®å­—çš„å˜é‡ï¼Œä¼šè®¿é—®åˆ°blockè‡ªå·±æ‹·è´çš„é‚£ä¸€ä»½å˜é‡ï¼Œå®ƒæ˜¯åœ¨blockåˆ›å»ºçš„æ—¶å€™åˆ›å»ºçš„ï¼Œè€Œè®¿é—®åŠ äº†è¿™ä¸ªå…³é”®å­—çš„å˜é‡ï¼Œåˆ™ä¼šè®¿é—®è¿™ä¸ªå˜é‡çš„åœ°å€æ‰€å¯¹åº”çš„å˜é‡ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»£ç æ¥è¯æ˜ï¼š 1234567891011121314151617- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view, typically from a nib. int tem=2; block1 = ^(int a,int b)&#123; return tem+a+b; &#125;; tem=4; NSLog(@&quot;%d&quot;,block1(1,1)); block1 = ^(int a,int b)&#123; return tem+a+b; &#125;; __block int tem2=2; tem2=4; NSLog(@&quot;%d&quot;,block1(1,1));&#125; ç»“æœï¼š 3ã€ä¸€ç‚¹ç‚¹æ‰©å±• ç”±æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£ï¼Œå¦‚æœblockä¸­æ“ä½œçš„å¯¹è±¡æ˜¯æŒ‡é’ˆï¼Œé‚£ä¹ˆç›´æ¥å¯ä»¥è¿›è¡Œä¿®æ”¹ï¼Œè¿™åŒ…æ‹¬OCå¯¹è±¡ï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™éœ€è¦ç”¨__blockå…³é”®å­—ä¿®é¥°ã€‚ 4ã€å…³äºå¼•ç”¨è®¡æ•° åœ¨blockä¸­è®¿é—®çš„å¯¹è±¡ï¼Œä¼šé»˜è®¤retainï¼š 1234567 UIImage * number; number = [[UIImage alloc]init] ; NSLog(@&quot;%ld&quot;,CFGetRetainCount((__bridge CFTypeRef)number)); block1 = ^(int a,int b)&#123; NSLog(@&quot;%ld&quot;,CFGetRetainCount((__bridge CFTypeRef)number)); &#125;; NSLog(@&quot;%ld&quot;,CFGetRetainCount((__bridge CFTypeRef)number)); ç»“æœå¦‚ä¸‹ï¼š è€Œæ·»åŠ __blockçš„å¯¹è±¡ä¸ä¼šè¢«retain; æ³¨æ„ï¼šå¦‚æœæˆ‘ä»¬è®¿é—®ç±»çš„æˆå‘˜å˜é‡ï¼Œæˆ–è€…é€šè¿‡ç±»æ–¹æ³•æ¥è®¿é—®å¯¹è±¡ï¼Œé‚£ä¹ˆè¿™äº›å¯¹è±¡ä¸ä¼šè¢«retainï¼Œè€Œç±»å¯¹è±¡ä¼šè¢«returnï¼Œæœ€å¸¸è§çš„æ—¶self: 1234567891011121314151617181920212223242526272829303132typedef void(^myBlock)(int,int) ;@interface ViewController2 ()&#123; myBlock block1; __block UIImage * number; &#125;@end@implementation ViewController2-(void)dealloc&#123; NSLog(@&quot;dealloc %@&quot;,self.class); NSLog(@&quot;%ld&quot;,CFGetRetainCount((__bridge CFTypeRef)number));&#125;- (void)viewDidLoad &#123; [super viewDidLoad]; self.view.backgroundColor=[UIColor whiteColor]; number = [[UIImage alloc]init] ; NSLog(@&quot;%ld&quot;,CFGetRetainCount((__bridge CFTypeRef)number)); block1 = ^(int a,int b)&#123; NSLog(@&quot;%ld&quot;,CFGetRetainCount((__bridge CFTypeRef)number)); &#125;; //block1(1,1); NSLog(@&quot;%ld&quot;,CFGetRetainCount((__bridge CFTypeRef)number)); UIButton * btn = [UIButton buttonWithType:UIButtonTypeCustom]; btn.frame=CGRectMake(100, 100, 100, 100); btn.backgroundColor=[UIColor redColor]; [self.view addSubview:btn]; [btn addTarget:self action:@selector(click) forControlEvents:UIControlEventTouchUpInside];&#125;-(void)click&#123; [self dismissViewControllerAnimated:YES completion:nil];&#125; æ‰“å°ç»“æœï¼š å¯ä»¥çœ‹å‡ºï¼ŒUIImageå¯¹è±¡æ²¡æœ‰è¢«retain,è€Œselfä¹Ÿå°†å¾ªç¯å¼•ç”¨ï¼Œé€ æˆå†…å­˜æ³„éœ²ã€‚è§£å†³æ–¹æ³•å¦‚ä¸‹ï¼š 1234567 number = [[UIImage alloc]init] ; NSLog(@&quot;%ld&quot;,CFGetRetainCount((__bridge CFTypeRef)number)); UIImage * im = number; block1 = ^(int a,int b)&#123; NSLog(@&quot;%ld&quot;,CFGetRetainCount((__bridge CFTypeRef)im)); &#125;; NSLog(@&quot;%ld&quot;,CFGetRetainCount((__bridge CFTypeRef)number)); æ‰“å°ç»“æœï¼š æ³¨æ„ï¼šæ ¹æ®è¿™ä¸ªæœºåˆ¶ï¼Œå¦‚æœæˆ‘ä»¬å°†blockç”¨æ¥ä¼ å€¼ï¼Œåœ¨blockä¸ç”¨æ—¶ï¼ŒåŠ¡å¿…è¦ç½®ä¸ºnil,è€Œåœ¨å®ç°blockçš„æ–¹æ³•é‡Œï¼ŒåŠ¡å¿…è¦é‡Šæ”¾;æˆ‘ä»¬é€šè¿‡ä»£ç æ¥è§£é‡Šï¼š é¦–å…ˆï¼Œåˆ›å»ºä¸‰ä¸ªViewControllerï¼Œä¸ºViewController1ï¼ŒViewController2ï¼ŒViewController3ï¼› 1ã€åœ¨ViewController1ä¸­åˆ›å»ºä¸€ä¸ªæŒ‰é’®ï¼Œè·³è½¬ViewController2 2ã€åœ¨ViewController2ä¸­ï¼š 12345678910111213141516171819202122232425262728293031323334#import &quot;ViewController2.h&quot;#import &quot;ViewController3.h&quot;@interface ViewController2 ()&#123; UIButton * im;&#125;@end@implementation ViewController3-(void)dealloc&#123; NSLog(@&quot;dealloc %@&quot;,self.class);&#125;- (void)viewDidLoad &#123; [super viewDidLoad]; UIButton * btn = [UIButton buttonWithType:UIButtonTypeCustom]; btn.frame=CGRectMake(300, 300, 100, 100); btn.backgroundColor=[UIColor redColor]; [btn addTarget:self action:@selector(click) forControlEvents:UIControlEventTouchUpInside]; [self.view addSubview:btn]; im = [[UIButton alloc]initWithFrame:CGRectMake(100, 100, 100, 100)]; im.backgroundColor=[UIColor blackColor]; [im addTarget:self action:@selector(rele) forControlEvents:UIControlEventTouchUpInside]; [self.view addSubview:im];&#125;-(void)rele&#123; [self dismissViewControllerAnimated:YES completion:nil];&#125;-(void)click&#123; ViewController3 * con = [[ViewController3 alloc]init]; [con setBlock:^&#123; im.backgroundColor=[UIColor colorWithRed:arc4random()%255/255.0 green:arc4random()%255/255.0 blue:arc4random()%255/255.0 alpha:1]; &#125;]; [self presentViewController:con animated:YES completion:nil];&#125; 3ã€åœ¨ViewController3ä¸­ï¼š 12345678910111213141516171819202122#import &quot;ViewController3.h&quot;void (^myBlock)();@implementation ViewController3-(void)setBlock:(void(^)())block&#123; myBlock = [block copy];&#125;-(void)dealloc&#123; NSLog(@&quot;dealloc %@&quot;,self.class);&#125;- (void)viewDidLoad &#123; [super viewDidLoad]; self.view.backgroundColor=[UIColor whiteColor]; myBlock(); UIButton * btn = [UIButton buttonWithType:UIButtonTypeCustom]; btn.frame=CGRectMake(100, 100, 100, 100); btn.backgroundColor=[UIColor redColor]; [self.view addSubview:btn]; [btn addTarget:self action:@selector(click) forControlEvents:UIControlEventTouchUpInside];&#125;-(void)click&#123; [self dismissViewControllerAnimated:YES completion:nil];&#125; é€šè¿‡æ‰“å°ä¿¡æ¯ï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼ŒViewController2ä¸è¢«é‡Šæ”¾ï¼ŒåŸå› æ˜¯å…¶æˆå‘˜å˜é‡imè¢«blockä¸­retainæ²¡æœ‰é‡Šæ”¾ï¼Œæˆ‘ä»¬è¿™æ ·åšï¼š 1234567891011121314151617@interface ViewController2 ()&#123; UIButton * im; ViewController3 * tem;&#125;-(void)rele&#123; [tem setBlock:nil]; [self dismissViewControllerAnimated:YES completion:nil];&#125;-(void)click&#123; ViewController3 * con = [[ViewController2 alloc]init]; tem=con; [con setBlock:^&#123; im.backgroundColor=[UIColor colorWithRed:arc4random()%255/255.0 green:arc4random()%255/255.0 blue:arc4random()%255/255.0 alpha:1]; &#125;]; [self presentViewController:con animated:YES completion:nil];&#125; è¿™æ ·å°±è§£å†³äº†å†…å­˜é—®é¢˜ã€‚ å››ã€å…³äºblockçš„ä½œç”¨åŸŸ åº”é¿å…å°†èŠ±æ‹¬å·ä¸­çš„blockç”¨äºå¤–é¢ï¼Œå¦‚æœéœ€è¦ï¼Œä½ å¯ä»¥å°†è¿™ä¸ªblockå£°æ˜ä¸ºå…¨å±€çš„ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSç¼–ç¨‹æŠ€å·§","slug":"iOSç¼–ç¨‹æŠ€å·§","permalink":"http://huishao.cc/categories/iOSç¼–ç¨‹æŠ€å·§/"}],"tags":[{"name":"iOSç¼–ç¨‹","slug":"iOSç¼–ç¨‹","permalink":"http://huishao.cc/tags/iOSç¼–ç¨‹/"},{"name":"Block","slug":"Block","permalink":"http://huishao.cc/tags/Block/"}],"keywords":[{"name":"iOSç¼–ç¨‹æŠ€å·§","slug":"iOSç¼–ç¨‹æŠ€å·§","permalink":"http://huishao.cc/categories/iOSç¼–ç¨‹æŠ€å·§/"}]},{"title":"iOSä¸­ä½¿ç”¨NSAttributedStringçµæ´»åˆ›å»ºæ ‡ç­¾","slug":"07iOSä¸­ä½¿ç”¨NSAttributedStringçµæ´»åˆ›å»ºæ ‡ç­¾","date":"2015-04-07T16:00:00.000Z","updated":"2021-05-31T03:33:47.188Z","comments":true,"path":"2015/04/08/07iOSä¸­ä½¿ç”¨NSAttributedStringçµæ´»åˆ›å»ºæ ‡ç­¾/","link":"","permalink":"http://huishao.cc/2015/04/08/07iOSä¸­ä½¿ç”¨NSAttributedStringçµæ´»åˆ›å»ºæ ‡ç­¾/","excerpt":"","text":"çµæ´»ä½¿ç”¨NSAttributedStringå¯ä»¥æ›´è½»æ¾çš„åˆ›å»ºå‡ºå†…å®¹å¤æ‚çš„æ ‡ç­¾ã€‚éœ€è¦æ³¨æ„ä¸€ç‚¹ï¼šå¦‚æœä¸€ä¸ªlabelè®¾ç½®äº†è¿™ä¸ªå±æ€§ï¼Œé‚£å®ƒå…¶ä»–çš„è®¾ç½®éƒ½å°†å¤±æ•ˆã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬åˆå§‹åŒ–ä¸€ä¸ªNSMutableAttributedStringå¯¹è±¡ã€‚ 12345678//é€šè¿‡å­—ç¬¦ä¸²åˆå§‹åŒ–//- (instancetype)initWithString:(NSString *)str;//é€šè¿‡å­—ç¬¦ä¸²å’Œå±æ€§å­—å…¸ç›´æ¥åˆå§‹åŒ–//- (instancetype)initWithString:(NSString *)str attributes:(NSDictionary *)attrs;//é€šè¿‡è‡ªèº«å¯¹è±¡åˆå§‹åŒ–//- (instancetype)initWithAttributedString:(NSAttributedString *)attrStr; NSMutableAttributedString * attribute = [[NSMutableAttributedString alloc]initWithString:@&quot;123!@#ä½ å¥½ä¹ˆQWE&quot;]; å¯ä»¥é€šè¿‡ä¸‹é¢ä¸¤ä¸ªå‡½æ•°å¯¹attrebuteå­—ç¬¦ä¸²è¿›è¡Œè®¾ç½®ä¸ä¿®æ”¹ 123456//å¯ä»¥æ›¿æ¢å­—ç¬¦- (void)replaceCharactersInRange:(NSRange)range withString:(NSString *)str;//å±æ€§è®¾ç½®- (void)setAttributes:(NSDictionary *)attrs range:(NSRange)range;//è®¾ç½®ä¸€å®šèŒƒå›´å†…å­—ç¬¦å±æ€§- (void)addAttribute:(NSString *)name value:(id)value range:(NSRange)range; å­—å…¸çš„é”®å€¼å¯¹åº”å¦‚ä¸‹ï¼š 123456789101112131415161718//kCTFontAttributeName è¿™ä¸ªé”®æ˜¯å­—ä½“çš„åç§° å¿…é¡»ä¼ å…¥CTFontå¯¹è±¡//kCTKernAttributeName è¿™ä¸ªé”®è®¾ç½®å­—ä½“é—´è· ä¼ å…¥å¿…é¡»æ˜¯æ•°å­—å¯¹è±¡ é»˜è®¤ä¸º0//kCTLigatureAttributeName è¿™ä¸ªé”®è®¾ç½®è¿å­—æ–¹å¼ å¿…é¡»ä¼ å…¥CFNumberå¯¹è±¡//kCTParagraphStyleAttributeName æ®µè½å¯¹å…¶æ–¹å¼//kCTForegroundColorAttributeName å­—ä½“é¢œè‰² å¿…é¡»ä¼ å…¥CGColorå¯¹è±¡//kCTStrokeWidthAttributeName ç¬”ç”»å®½åº¦ å¿…é¡»æ˜¯CFNumberå¯¹è±¡//kCTStrokeColorAttributeName ç¬”ç”»é¢œè‰²//kCTSuperscriptAttributeName æ§åˆ¶å‚ç›´æ–‡æœ¬å®šä½ CFNumberå¯¹è±¡//kCTUnderlineColorAttributeName ä¸‹åˆ’çº¿é¢œè‰²[attribute addAttribute:(NSString*)kCTKernAttributeName value:@5 range:NSMakeRange(0, 5)];[attribute addAttribute:(NSString *)kCTFontAttributeName value:(id)CFBridgingRelease(CTFontCreateWithName((CFStringRef)[UIFont boldSystemFontOfSize:14].fontName, 14, NULL)) range:NSMakeRange(0, 4)]; [attribute addAttribute:(NSString *)kCTUnderlineStyleAttributeName value:(id)[NSNumber numberWithInt:kCTUnderlineStyleDouble] range:NSMakeRange(0, 4)]; é€šè¿‡æµ‹è¯•ï¼Œå‘ç°ä¸Šé¢æœ‰äº›é”®å€¼å¹¶æ²¡æœ‰ä½œç”¨ï¼Œå¯ä»¥æ›¿æ¢ä¸‹é¢çš„æ–¹æ³•ï¼Œæ•ˆæœç›¸åŒï¼Œä¸åŒçš„åœ°æ–¹åœ¨äºå…¶ä¼ å€¼çš„ç±»å‹ä¸åŒï¼Œä¸‹é¢çš„æ–¹æ³•æ›´åŠ æ–¹ä¾¿ï¼ˆä½¿ç”¨UIFont UIColor NSString å’Œä¸€äº›ç³»ç»Ÿæšä¸¾ï¼‰ 1234567891011121314151617181920 NSParagraphStyleAttributeNameNSForegroundColorAttributeNameNSBackgroundColorAttributeNameNSLigatureAttributeNameNSKernAttributeNameNSStrikethroughStyleAttributeNameNSUnderlineStyleAttributeNameNSStrokeColorAttributeName NSStrokeWidthAttributeName NSShadowAttributeName NSTextEffectAttributeNameNSAttachmentAttributeName NSLinkAttributeName NSBaselineOffsetAttributeName NSUnderlineColorAttributeNameNSStrikethroughColorAttributeNameNSObliquenessAttributeName NSExpansionAttributeName NSWritingDirectionAttributeNameNSVerticalGlyphFormAttributeName ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[{"name":"iOSç¼–ç¨‹","slug":"iOSç¼–ç¨‹","permalink":"http://huishao.cc/tags/iOSç¼–ç¨‹/"},{"name":"NSAttributedString","slug":"NSAttributedString","permalink":"http://huishao.cc/tags/NSAttributedString/"}],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"iOS6ä¸­æ¨ªå±çš„å¤„ç†æ–¹æ³•","slug":"05iOS6ä¸­æ¨ªå±çš„å¤„ç†æ–¹æ³•","date":"2015-04-06T16:00:00.000Z","updated":"2021-05-31T03:33:03.710Z","comments":true,"path":"2015/04/07/05iOS6ä¸­æ¨ªå±çš„å¤„ç†æ–¹æ³•/","link":"","permalink":"http://huishao.cc/2015/04/07/05iOS6ä¸­æ¨ªå±çš„å¤„ç†æ–¹æ³•/","excerpt":"","text":"IOS6ä»¥åï¼Œè‹¥æƒ³åœ¨é¡¹ç›®ä¸­æ”¯æŒæ¨ªå±ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦åœ¨plistæ–‡ä»¶ä¸­æ·»åŠ æ”¯æŒæ¨ªå±çš„è®¾ç½®ï¼Œå¦åˆ™æœ‰äº›ä»£ç è®¾ç½®å°†ä¼šå¤±æ•ˆã€‚ æœ‰æ¥é‚£ä¸ªæ–¹å¼è®¾ç½®ï¼š 1ã€åœ¨pilistçš„Supported interface orientations å­—æ®µä¸­æ·»åŠ  2ã€åœ¨Xcodeçš„è®¾ç½®ä¸­å‹¾é€‰ ç°åœ¨æˆ‘ä»¬æ¥çœ‹å†³å®šå±å¹•æ–¹å‘çš„å‡ ä¸ªå‡½æ•°ï¼š åœ¨IOS6ä¹‹å‰ï¼Œæˆ‘ä»¬åªéœ€é€šè¿‡ä¸€ä¸ªå‡½æ•° - (BOOL) shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation { return (toInterfaceOrientation == UIInterfaceOrientationLandscapeRight);} å°±å¯ä»¥æ”¯æŒæŒ‡å®šæ§åˆ¶å™¨çš„æ—‹è½¬ã€‚é€šè¿‡æ–°çš„æ–‡æ¡£ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š 1234// Applications should use supportedInterfaceOrientations and/or shouldAutorotate..- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation NS_DEPRECATED_IOS(2_0, 6_0);//è¿™ä¸ªæ–¹æ³•åœ¨6.0ä¹‹åè¢«æ ‡è®°ä¸ºè¿‡æ—¶çš„ æˆ‘ä»¬é€šè¿‡ä¸‹é¢ä¸¤ä¸ªæ–¹æ³•æ¥ä»£æ›¿ï¼š //æ˜¯å¦å…è®¸å±å¹•æ—‹è½¬ -(BOOL)shouldAutorotate{ return YES;}//æ”¯æŒçš„æ–¹å‘- (NSUInteger)supportedInterfaceOrientations { return UIInterfaceOrientationMaskLandscapeRight;}è¿™æ˜¯ä¸ªæšä¸¾ 123456789101112131415typedef NS_OPTIONS(NSUInteger, UIInterfaceOrientationMask) &#123; UIInterfaceOrientationMaskPortrait = (1 &lt;&lt; UIInterfaceOrientationPortrait), UIInterfaceOrientationMaskLandscapeLeft = (1 &lt;&lt; UIInterfaceOrientationLandscapeLeft), UIInterfaceOrientationMaskLandscapeRight = (1 &lt;&lt; UIInterfaceOrientationLandscapeRight), UIInterfaceOrientationMaskPortraitUpsideDown=(1 &lt;&lt; UIInterfaceOrientationPortraitUpsideDown), UIInterfaceOrientationMaskLandscape = (UIInterfaceOrientationMaskLandscapeLeft | UIInterfaceOrientationMaskLandscapeRight), UIInterfaceOrientationMaskAll = (UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskLandscapeLeft | UIInterfaceOrientationMaskLandscapeRight | UIInterfaceOrientationMaskPortraitUpsideDown), UIInterfaceOrientationMaskAllButUpsideDown = (UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskLandscapeLeft | UIInterfaceOrientationMaskLandscapeRight),&#125;; é€šè¿‡è¿™ä¸¤ä¸ªå‡½æ•°ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦æŸä¸ªæ§åˆ¶å™¨å¼ºåˆ¶æ–¹å‘ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®æ”¯æŒå•ä¸€çš„æ–¹å‘ï¼Œå³å¯è¾¾åˆ°ç›®çš„ã€‚ æ³¨æ„ï¼š å¦‚æœä½ ä»¬é¡¹ç›®ä¸­çš„RootViewControlleræ˜¯å¯¼èˆªï¼Œä½ ä¼šå‘ç°ï¼Œä½ åœ¨Pushå‡ºæ¥çš„è§†å›¾ä¸­æ·»åŠ åˆšæ‰çš„ä»£ç å¹¶æ²¡æœ‰èµ·ä½œç”¨ï¼ŒåŸå› æ˜¯å¯¼èˆªï¼Œå¹¶æ²¡æœ‰è¿›è¡Œè®¾ç½®ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œç»§æ‰¿äºNavigationControllerã€‚åœ¨é‡Œé¢é‡å†™åˆšæ‰çš„æ–¹æ³•ï¼Œè¿™ä¹ˆåšåï¼Œå±å¹•ç¡®å®æ¨ªäº†è¿‡æ¥ï¼Œå¹¶ä¸”è¿™ä¸ªå¯¼èˆªpushçš„æ‰€æœ‰å­ç•Œé¢éƒ½å°†æ¨ªå±ï¼Œè¿™ä¹Ÿä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœã€‚æˆ‘ä»¬æƒ³è‡ªç”±çš„æ§åˆ¶æ¯ä¸ªpushå‡ºæ¥çš„ç•Œé¢çš„å±å¹•æ–¹å‘ï¼Œå¯ä»¥åœ¨å¯¼èˆªé‡Œè¿™ä¹ˆåšï¼š 1234567-(BOOL)shouldAutorotate&#123; return [self.topViewController shouldAutorotate];&#125;//æ”¯æŒçš„æ–¹å‘- (NSUInteger)supportedInterfaceOrientations &#123; return [self.topViewController supportedInterfaceOrientations];;&#125; æˆ‘ä»¬è¿˜éœ€è¦åšä¸€äº›å¤„ç†ï¼Œç»è¿‡æˆ‘çš„æµ‹è¯•ï¼Œå¯¼èˆªå¿…é¡»åœ¨popåæ‰ä¼šé‡æ–°è°ƒç”¨è¿™äº›å‡½æ•°ï¼Œæ‰€ä»¥æˆ‘çš„æ–¹æ³•æ˜¯è¿™æ ·åšï¼šå¼¹å‡ºä¸€ä¸ªä¸­é—´æ§åˆ¶å™¨åå†POPå›æ¥ 1234567@implementation ViewController2- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view. [self.navigationController pushViewController:[[ViewController3 alloc]init] animated:YES];&#125; 1234567@implementation ViewController3- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view. [self.navigationController popViewControllerAnimated:YES];&#125; è¿™æ ·åšï¼Œæˆ‘ä»¬å°±å¯ä»¥è‡ªç”±çš„æ§åˆ¶æ¯ä¸ªè§†å›¾æ§åˆ¶å™¨çš„æ–¹å‘äº†ã€‚ åŒç†ï¼Œå¦‚æœæ ¹è§†å›¾æ§åˆ¶å™¨æ˜¯tabBarï¼Œåˆ™æˆ‘ä»¬éœ€è¦åœ¨tabBarä¸­åšæ“ä½œã€‚ å¦‚æœæˆ‘ä»¬å¤§å¤šæ˜¯çš„è§†å›¾æ§åˆ¶å™¨éƒ½æ˜¯ä¸€ä¸ªæ–¹å‘çš„ï¼Œåªæœ‰å¶å°”çš„å‡ ä¸ªä¼šä¸åŒï¼Œè¿™æ—¶å€™ï¼Œæˆ‘ä»¬å…¶å®å¯ä»¥é‡‡å–presentationControllerçš„æ–¹å¼ï¼Œç„¶åç›´æ¥åœ¨å¼¹å‡ºçš„æ§åˆ¶å™¨ä¸­å†™é‚£ä¸¤ä¸ªæ–¹æ³•å³å¯ã€‚è¿™æ˜¯æœ€ç®€å•çš„é€”å¾„äº†ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSç¼–ç¨‹æŠ€å·§","slug":"iOSç¼–ç¨‹æŠ€å·§","permalink":"http://huishao.cc/categories/iOSç¼–ç¨‹æŠ€å·§/"}],"tags":[{"name":"iOSç¼–ç¨‹","slug":"iOSç¼–ç¨‹","permalink":"http://huishao.cc/tags/iOSç¼–ç¨‹/"},{"name":"æ¨ªå±","slug":"æ¨ªå±","permalink":"http://huishao.cc/tags/æ¨ªå±/"}],"keywords":[{"name":"iOSç¼–ç¨‹æŠ€å·§","slug":"iOSç¼–ç¨‹æŠ€å·§","permalink":"http://huishao.cc/categories/iOSç¼–ç¨‹æŠ€å·§/"}]},{"title":"iOS UILabeåŠUIFontç”¨æ³•æ€»ç»“","slug":"06iOS UILabeåŠUIFontç”¨æ³•æ€»ç»“","date":"2015-04-06T16:00:00.000Z","updated":"2021-05-31T03:32:56.548Z","comments":true,"path":"2015/04/07/06iOS UILabeåŠUIFontç”¨æ³•æ€»ç»“/","link":"","permalink":"http://huishao.cc/2015/04/07/06iOS UILabeåŠUIFontç”¨æ³•æ€»ç»“/","excerpt":"","text":"åˆå§‹åŒ–ä¸€ä¸ªUILabelå¯¹è±¡ï¼Œå¹¶åˆå§‹åŒ–å¤§å° UILabel * label = [[UILabel alloc]initWithFrame:CGRectMake(100, 100, 100, 100)]; è®¾ç½®æ˜¾ç¤ºçš„æ–‡å­— label.text=@â€123â€; å’Œå­—ä½“ç›¸å…³çš„ä¸€ä¸ªç±»ï¼Œå­—å·å¤§å°é»˜è®¤17 @property(nonatomic,retain) UIFont*font; 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748//7.0ä¹‹åå¯ç”¨ è®¾ç½®å­—ä½“é£æ ¼// NSString *const UIFontTextStyleHeadline; ç”¨äºæ ‡é¢˜çš„é£æ ¼// NSString *const UIFontTextStyleSubheadline;ç”¨äºå‰¯æ ‡é¢˜çš„é£æ ¼// NSString *const UIFontTextStyleBody;ç”¨äºæ­£æ–‡çš„å­—ä½“// NSString *const UIFontTextStyleFootnote;ç”¨äºè„šæ³¨çš„å­—ä½“// NSString *const UIFontTextStyleCaption1;ç”¨äºæ ‡å‡†å­—å¹•å­—ä½“// NSString *const UIFontTextStyleCaption2;ç”¨äºæ›¿æ¢å­—å¹•å­—ä½“ label.font=[UIFont preferredFontForTextStyle:UIFontTextStyleCaption2];//è¯´å®è¯ï¼Œæ²¡çœ‹å‡ºä»€ä¹ˆå¤ªå¤§çš„å·®åˆ«//è®¾ç½®å­—ä½“å’Œå­—ä½“å¤§å°+ (UIFont *)fontWithName:(NSString *)fontName size:(CGFloat)fontSize;//è¿”å›æ‰€æœ‰å­—ä½“çš„å­—ä½“å®¶æ—åç§°æ•°ç»„+ (NSArray *)familyNames;//æŒ‰å­—ä½“å®¶æ—åç§°è¿”å›å­—ä½“åç§°æ•°ç»„+ (NSArray *)fontNamesForFamilyName:(NSString *)familyName;//è®¾ç½®æ™®é€šå­—ä½“å­—å·å¤§å°+ (UIFont *)systemFontOfSize:(CGFloat)fontSize;//è®¾ç½®åŠ ç²—å­—ä½“å­—å·å¤§å°+ (UIFont *)boldSystemFontOfSize:(CGFloat)fontSize;//è®¾ç½®æ–œä½“å­—å·å¤§å°+ (UIFont *)italicSystemFontOfSize:(CGFloat)fontSize;//ä¸€äº›åªè¯»å±æ€§//å­—ä½“å®¶æ—åç§°@property(nonatomic,readonly,retain) NSString *familyName;//å­—ä½“åç§°@property(nonatomic,readonly,retain) NSString *fontName;//å­—å·å¤§å°@property(nonatomic,readonly) CGFloat pointSize;//å­—ä½“è®¾è®¡æ¨¡å‹ï¼Œè¡¨ç¤ºè·ç¦»æœ€é«˜ç‚¹åç§»ä½™é‡@property(nonatomic,readonly) CGFloat ascender;//åº•éƒ¨çš„æ¨¡å‹åç§»é‡@property(nonatomic,readonly) CGFloat descender;//å­—ä½“æ¨¡å‹çš„å¤´é«˜ä¿¡æ¯@property(nonatomic,readonly) CGFloat capHeight;//å­—ä½“æ¨¡å‹çš„xHeightä¿¡æ¯@property(nonatomic,readonly) CGFloat xHeight;//å­—ä½“è¡Œé«˜@property(nonatomic,readonly) CGFloat lineHeight NS_AVAILABLE_IOS(4_0);//æ¨¡å‹ä¸»ä½“ä¿¡æ¯@property(nonatomic,readonly) CGFloat leading;//åˆ›å»ºä¸€ä¸ªæ–°å­—ä½“ä¸å½“å‰å­—ä½“ç›¸åŒï¼Œé™¤äº†æŒ‡å®šçš„å¤§å°- (UIFont *)fontWithSize:(CGFloat)fontSize;//é€šè¿‡æè¿°ä¿¡æ¯è¿”å›å­—ä½“ 7.0åå¯ç”¨+ (UIFont *)fontWithDescriptor:(UIFontDescriptor *)descriptor size:(CGFloat)pointSize NS_AVAILABLE_IOS(7_0);//è¿”å›å­—ä½“çš„æè¿°ä¿¡æ¯ï¼Œ7.0åå¯ç”¨- (UIFontDescriptor *)fontDescriptor NS_AVAILABLE_IOS(7_0); è®¾ç½®å­—ä½“é¢œè‰² label.textColor=[UIColor redColor]; è®¾ç½®é˜´å½±åç§»é‡ label.shadowOffset=CGSizeMake(20, 20); è®¾ç½®é˜´å½±é¢œè‰² label.shadowColor=[UIColor blackColor]; è®¾ç½®å¯¹é½æ¨¡å¼ label.textAlignment=NSTextAlignmentJustified; 1234567891011enum &#123; //æ²¿å·¦è¾¹æ²¿å¯¹é½æ–‡æœ¬ NSTextAlignmentLeft = 0, //ä¸­å¿ƒå¯¹é½ NSTextAlignmentCenter = 1, //å³è¾¹æ²¿å¯¹é½ NSTextAlignmentRight = 2, //æœ€åä¸€è¡Œè‡ªç„¶å¯¹é½ NSTextAlignmentJustified = 3, //é»˜è®¤å¯¹é½ NSTextAlignmentNatural = 4,&#125;;typedef NSInteger NSTextAlignment; å¤šè¡Œæ–‡æœ¬è®¾ç½® label.lineBreakMode=NSLineBreakByCharWrapping; 12345678910111213enum &#123; //æ–‡æœ¬è¾¹ç¼˜å¤„ç† NSLineBreakByWordWrapping = 0, //æå‰å¤„ç†ä¸åˆé€‚çš„å­—ç¬¦ NSLineBreakByCharWrapping, //ç®€å•çº¿æ€§å¤„ç† NSLineBreakByClipping, //ä¸¢å¤±çš„å¼€å¤´ç”¨çœç•¥å·è¡¨ç¤º NSLineBreakByTruncatingHead, //ä¸¢å¤±çš„æ–‡æœ¬åœ¨æœ«å°¾æ˜¾ç¤ºçœç•¥å· NSLineBreakByTruncatingTail, //ä¸¢å¤±çš„æ–‡æœ¬åœ¨ä¸­é—´æ˜¾ç¤ºçœç•¥å· NSLineBreakByTruncatingMiddle &#125;;typedef NSUInteger NSLineBreakMode ä½¿ç”¨attributedTextç»˜åˆ¶ @property(nonatomic,copy) NSAttributedString *attributedText è®¾ç½®é«˜äº®çš„å­—ä½“é¢œè‰² label.highlightedTextColor=[UIColor blueColor]; //è®¾ç½®æ˜¯å¦é«˜äº® label.highlighted=YES; ç”¨æˆ·äº¤äº’ é»˜è®¤å…³é—­ label.userInteractionEnabled=NO; æ˜¯å¦æœ‰æ•ˆï¼Œé»˜è®¤æ˜¯YESï¼Œæ— æ•ˆä¸ºç°è‰² label.enabled=NO; æ˜¾ç¤ºçš„è¡Œæ•°ï¼Œ0ä¸ºæ— é™ @property(nonatomic) NSInteger numberOfLines; å®½åº¦è‡ªé€‚åº”å¤§å° é»˜è®¤æ˜¯NO @property(nonatomic) BOOL adjustsFontSizeToFitWidth; å­—ç¬¦é€‚åº”å®½åº¦ï¼šä¸èµæˆä½¿ç”¨ @property(nonatomic) BOOL adjustsLetterSpacingToFitWidth æœ€å°é€‚åº”å¤§å°2.0-6.0 @property(nonatomic) CGFloat minimumFontSize æœ€å°é€‚åº”å¤§å° 6.0 ä¹‹å @property(nonatomic) CGFloat minimumScaleFactor å‚ç›´æ–¹å‘çš„è°ƒæ•´ @property(nonatomic) UIBaselineAdjustment baselineAdjustment; 1234567typedef enum &#123; //è°ƒæ•´æ–‡æœ¬å¯¹åº”åŸºçº¿ä½ç½® UIBaselineAdjustmentAlignBaselines, //è°ƒæ•´æ–‡æœ¬ç›¸å¯¹å…¶è¾¹æ¡†çš„ä¸­å¿ƒ UIBaselineAdjustmentAlignCenters, //è°ƒæ•´æ–‡æœ¬ç›¸å¯¹äºè¾¹ç•Œçš„å·¦ä¸Šè§’ é»˜è®¤çš„ UIBaselineAdjustmentNone,&#125; UIBaselineAdjustment; è¿”å›æ–‡æœ¬ç»˜åˆ¶çŸ©å½¢ - (CGRect)textRectForBounds:(CGRect)bounds limitedToNumberOfLines:(NSInteger)numberOfLines; æ–‡æœ¬ç»˜åˆ¶å‡½æ•° - (void)drawTextInRect:(CGRect)rect æ–‡æœ¬è‡ªåŠ¨å¸ƒå±€å‚æ•° @property(nonatomic) CGFloat preferredMaxLayoutWidth ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}],"tags":[{"name":"iOSç¼–ç¨‹","slug":"iOSç¼–ç¨‹","permalink":"http://huishao.cc/tags/iOSç¼–ç¨‹/"},{"name":"UILabel","slug":"UILabel","permalink":"http://huishao.cc/tags/UILabel/"},{"name":"UIFont","slug":"UIFont","permalink":"http://huishao.cc/tags/UIFont/"}],"keywords":[{"name":"iOSä¹‹UIæ§ä»¶","slug":"iOSä¹‹UIæ§ä»¶","permalink":"http://huishao.cc/categories/iOSä¹‹UIæ§ä»¶/"}]},{"title":"iOS SELçš„ç†è§£ä¸ä½¿ç”¨","slug":"04iOS SELçš„ç†è§£ä¸ä½¿ç”¨","date":"2015-04-04T16:00:00.000Z","updated":"2021-05-28T10:11:35.356Z","comments":true,"path":"2015/04/05/04iOS SELçš„ç†è§£ä¸ä½¿ç”¨/","link":"","permalink":"http://huishao.cc/2015/04/05/04iOS SELçš„ç†è§£ä¸ä½¿ç”¨/","excerpt":"","text":"æœ‰å¾ˆå¤šäººï¼Œè®¤ä¸ºblockçš„æ¨å¹¿å¯å–ä»£ä»£ç†è®¾è®¡æ¨¡å¼ï¼Œå…¶å®blockå¹¶ä¸èƒ½å–ä»£ä»£ç†ï¼Œä»£ç†çš„æ¨¡å¼å¯ä»¥è®©ä»£ç é€»è¾‘æ€§æ›´å¼ºï¼Œæ›´æ•´æ´ï¼Œä¹Ÿä¼šæœ‰æ›´é«˜çš„å¯è¯»æ€§å’Œå¯æ‰©å±•æ€§ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œæˆ‘è§‰å¾—blockæ›´å¤šçš„æ˜¯å–ä»£äº†é€‰æ‹©å™¨@selectorã€‚ @selectoræ˜¯ä»€ä¹ˆï¼Ÿæˆ‘ä»¬è¦é¦–å…ˆæ˜ç™½SELï¼ŒSELå¹¶ä¸æ˜¯ä¸€ç§å¯¹è±¡ç±»å‹ï¼Œæˆ‘ä»¬é€šè¿‡xCodeçš„å­—ä½“é¢œè‰²å°±å¯ä»¥åˆ¤æ–­å‡ºæ¥ï¼Œå®ƒæ˜¯ä¸€ä¸ªå…³é”®å­—ï¼Œå°±åƒintï¼Œlongä¸€æ ·ï¼Œå®ƒå£°æ˜äº†ä¸€ç§ç±»å‹ï¼šç±»æ–¹æ³•æŒ‡é’ˆã€‚å…¶å®å°±å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªå‡½æ•°æŒ‡é’ˆã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬ç”Ÿå‘½ä¸€ä¸ªå«myLogçš„å‡½æ•°æŒ‡é’ˆï¼š 1234567#import &quot;ViewController.h&quot;@interface ViewController ()&#123; SEL myLog;&#125;@end å£°æ˜å‡ºäº†è¿™ä¸ªæŒ‡é’ˆï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•ç»™å®ƒä¼ é€’è¿™ä¸ªå‡½æ•°å‘¢ï¼Ÿæœ‰ä¸¤ç§æ–¹å¼ï¼š 1ã€åœ¨ç¼–è¯‘æ—¶ï¼Œä½¿ç”¨@selectoræ¥å–å¾—å‡½æ•° ç°åœ¨ï¼Œæˆ‘ä»¬åº”è¯¥æ˜ç™½@selectoræ˜¯ä»€ä¹ˆäº†ï¼Œå®ƒæ˜¯ä¸€ä¸ªç¼–è¯‘æ ‡ç¤ºï¼Œæˆ‘ä»¬é€šè¿‡å®ƒæ¥å–åˆ°ç›¸åº”å‡½æ•°ã€‚ 12345678910111213141516171819@interface ViewController ()&#123; SEL myLog;&#125;@end@implementation ViewController- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view, typically from a nib. myLog = @selector(myLogL); //é€šè¿‡performSelectoræ¥æ‰§è¡Œæ–¹æ³• [self performSelector:myLog];//æ‰“å° â€œmyLogâ€ &#125;-(void)myLogL&#123; NSLog(@&quot;myLog&quot;);&#125; 2ã€åœ¨è¿è¡Œæ—¶ï¼Œé€šè¿‡NSSelectorFromStringæ–¹æ³•æ¥å–åˆ°ç›¸åº”å‡½æ•°ï¼š 12345678910111213141516171819202122#import &quot;ViewController.h&quot;@interface ViewController ()&#123; SEL myLog;&#125;@end@implementation ViewController- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view, typically from a nib. myLog = NSSelectorFromString(@&quot;myLogN&quot;); [self performSelector:myLog]; &#125;-(void)myLogN&#123; NSLog(@&quot;myLog&quot;);&#125; è¿™ä¸¤ç§æ–¹å¼çš„å·®åˆ«åœ¨äºï¼Œç¼–è¯‘æ—¶çš„æ–¹æ³•å¦‚æœæ²¡æœ‰æ‰¾åˆ°ç›¸åº”å‡½æ•°ï¼Œxcodeä¼šæŠ¥é”™ï¼Œè€Œè¿è¡Œæ—¶çš„æ–¹æ³•ä¸ä¼šã€‚ è‡³äºSELçš„åº”ç”¨ï¼Œæˆ‘ç›¸ä¿¡æœ€å¹¿æ³›çš„ä¾¿æ˜¯targetâ€”â€”actionè®¾è®¡æ¨¡å¼äº†ã€‚æˆ‘ä»¬æ¥ç®€å•æ¨¡æ‹Ÿä¸€ä¸‹ç³»ç»Ÿbuttonçš„å·¥ä½œåŸç†ï¼š æˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªç»§æ‰¿äºUIButtonçš„ç±»ï¼š .hæ–‡ä»¶ï¼š 12345#import &lt;UIKit/UIKit.h&gt;@interface Mybutton : UIButton-(void)addMyTarget:(id)target action:(SEL)action;@end .mæ–‡ä»¶ 1234567891011121314151617#import &quot;Mybutton.h&quot;@implementation Mybutton&#123; SEL _action; id _target;&#125;-(void)addMyTarget:(id)target action:(SEL)action&#123; _target=target; _action=action;&#125;-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event&#123; [_target performSelector:_action];&#125;@end åœ¨å¤–éƒ¨ï¼š 1234567891011- (void)viewDidLoad &#123; [super viewDidLoad]; Mybutton * btn = [[Mybutton alloc]initWithFrame:CGRectMake(100, 100, 60, 60)]; btn.backgroundColor=[UIColor redColor]; [btn addMyTarget:self action:@selector(click)]; [self.view addSubview:btn];&#125;-(void)click&#123; NSLog(@&quot;ç‚¹å‡»äº†btn&quot;);&#125; å½“ç„¶ï¼Œå¦‚æœè¦è°ƒç”¨å‚æ•°ï¼Œç³»ç»Ÿæä¾›çš„é»˜è®¤å‚æ•°ä¸è¶…è¿‡ä¸¤ä¸ªï¼Œå¦‚æœå‚æ•°å¾ˆå¤šï¼Œä¸€ç§æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡å­—å…¸ä¼ å‚ï¼Œå¦ä¸€ç§æ–¹æ³•æ¯”è¾ƒå¤æ‚ï¼Œåœ¨è¿™é‡Œå…ˆä¸è®¨è®ºã€‚ é”™è¯¯ä¹‹å¤„ï¼Œæ¬¢è¿æŒ‡æ­£ æ¬¢è¿è½¬è½½ï¼Œæ³¨æ˜å‡ºå¤„ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSç¼–ç¨‹æŠ€å·§","slug":"iOSç¼–ç¨‹æŠ€å·§","permalink":"http://huishao.cc/categories/iOSç¼–ç¨‹æŠ€å·§/"}],"tags":[{"name":"iOSç¼–ç¨‹","slug":"iOSç¼–ç¨‹","permalink":"http://huishao.cc/tags/iOSç¼–ç¨‹/"},{"name":"SEL","slug":"SEL","permalink":"http://huishao.cc/tags/SEL/"}],"keywords":[{"name":"iOSç¼–ç¨‹æŠ€å·§","slug":"iOSç¼–ç¨‹æŠ€å·§","permalink":"http://huishao.cc/categories/iOSç¼–ç¨‹æŠ€å·§/"}]},{"title":"iOSäº‹ä»¶å“åº”æ§åˆ¶","slug":"03iOSäº‹ä»¶å“åº”æ§åˆ¶","date":"2015-04-03T16:00:00.000Z","updated":"2021-05-28T10:09:54.887Z","comments":true,"path":"2015/04/04/03iOSäº‹ä»¶å“åº”æ§åˆ¶/","link":"","permalink":"http://huishao.cc/2015/04/04/03iOSäº‹ä»¶å“åº”æ§åˆ¶/","excerpt":"","text":"ä»¥å‰é‡åˆ°ä¸€ä¸ªé¡¹ç›®ï¼Œä¸€ä¸ªUIImageViewå¯¹è±¡ä¸Šé¢æœ‰ä¸€ä¸ªUIButtonå¯¹è±¡ï¼Œç„¶è€Œé¡¹ç›®çš„éœ€æ±‚éœ€è¦åœ¨ç‚¹å‡» buttonçš„åŒæ—¶ï¼ŒUIImageViewä¹Ÿæ¥æ”¶åˆ°ç‚¹å‡»äº‹ä»¶ï¼Œåœ¨ä¸ä½¿ç”¨ä»£ç†å’Œé€šçŸ¥æ–¹æ³•çš„å‰æä¸‹ï¼Œé€šè¿‡äº‹ä»¶å“åº”é“¾çš„åŸç†ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å¾ˆä¾¿æ·çš„è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ åœ¨å¤„ç†è¿™ä¸ªé—®é¢˜ä¹‹å‰ï¼Œæˆ‘ä»¬åº”è¯¥å…ˆæ¸…æ¥šIOSçš„äº‹ä»¶å“åº”æœºåˆ¶åˆ°åº•æ˜¯ä¸ªä»€ä¹ˆæ ·çš„åŸç†ã€‚ é¦–å…ˆï¼Œè¿™ä¸ªäº‹ä»¶å“åº”çš„æœºåˆ¶æ˜¯åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†çš„ã€‚ 1ã€å…ˆåœ¨è§†å›¾å±‚çº§å…³ç³»ä¸­æ‰¾åˆ°åº”è¯¥å“åº”äº‹ä»¶çš„é‚£ä¸ªè§†å›¾ã€‚ è¿™ä¸€æ­¥æ˜¯ä»€ä¹ˆæ„æ€ï¼Œå…¶å®å¾ˆç®€å•ï¼Œå°±æ˜¯æ‰¾åˆ°ä½ æ‰€è§¦æ‘¸ç‚¹å¯¹åº”çš„é‚£ä¸ªæœ€ä¸Šå±‚çš„è§†å›¾ï¼Œå®ƒçš„å·¥ä½œåŸç†æ˜¯è¿™æ ·çš„ï¼šå½“ç”¨æˆ·å‘å‡ºäº‹ä»¶åï¼Œä¼šäº§ç”Ÿä¸€ä¸ªè§¦æ‘¸äº‹ä»¶ï¼Œç³»ç»Ÿä¼šå°†è¯¥äº‹ä»¶åŠ å…¥åˆ°ä¸€ä¸ªç”±UIApplicationç®¡ç†çš„äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼ŒUIApplicationä¼šå–å‡ºé˜Ÿåˆ—ä¸­æœ€å‰é¢çš„äº‹ä»¶ï¼Œå‘æ¶ˆæ¯ç»™UIWindowï¼Œç„¶åUIWindowä¼šå¯¹å…¶æ‰€æœ‰å­è§†å›¾è°ƒç”¨hitTest:withEvent:è¿™ä¸ªæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªUIViewçš„å¯¹è±¡ï¼Œè¿™ä¸ªæ–¹æ³•åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œå®ƒä¼šè°ƒç”¨å½“å‰è§†å›¾çš„pointInside:withEvent:è¿™ä¸ªæ–¹æ³•ï¼Œå¦‚æœè§¦æ‘¸äº‹ä»¶åœ¨å½“å‰è§†å›¾èŒƒå›´å†…ï¼ŒpointInside:withEvent:ä¼šè¿”å›YESï¼Œå¦åˆ™ä¼šè¿”å›NOï¼›å¦‚æœè¿”å›YESï¼Œåˆ™ä¼šéå†å½“å‰è§†å›¾çš„æ‰€æœ‰å­è§†å›¾ï¼Œç»Ÿç»Ÿå‘é€hitTest:withEvent:è¿™ä¸ªæ¶ˆæ¯ï¼Œå¦‚æœè¿”å›NO,åˆ™hitTest:withEvent:æ–¹æ³•è¿”å›nilï¼› ä¸Šé¢è¯´èµ·æ¥æœ‰äº›ç»•ï¼Œå…¶å®å°±æ˜¯ï¼šhitTest:withEvent:æ–¹æ³•ä¼šä¸€å±‚ä¸€å±‚çš„å‘ä¸Šæ‰¾ï¼Œè‹¥æœ€ä¸Šå±‚å“åº”çš„å­è§†å›¾pointInside:withEvent:è¿”å›YESï¼Œåˆ™è¿”å›æ­¤å­è§†å›¾ï¼Œå¦‚æœæ‰€æœ‰çš„éƒ½è¿”å›nilï¼Œåˆ™è¿”å›å½“å‰è§†å›¾æœ¬èº«selfã€‚ ä¾‹å¦‚ï¼šæˆ‘ä»¬å»ºä¸¤ä¸ªæ–‡ä»¶ï¼Œä¸€ä¸ªç»§æ‰¿äºUIButtonï¼Œä¸€ä¸ªç»§æ‰¿äºUIImageViewï¼Œæˆ‘ä»¬åœ¨UIImageViewé‡Œçš„ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819#import &quot;MyImageView.h&quot;@implementation MyImageView- (instancetype)initWithFrame:(CGRect)frame&#123; self = [super initWithFrame:frame]; if (self) &#123; self.backgroundColor=[UIColor redColor]; &#125; return self;&#125;//åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬é‡å†™äº†è¿™ä¸ªæ–¹æ³•ï¼Œè®©å®ƒç›´æ¥è¿”å›è‡ªèº«ï¼Œè€Œä¸æ˜¯ç»§ç»­å‘ä¸‹å¯»æ‰¾åº”è¯¥å“åº”äº‹ä»¶çš„è§†å›¾-(UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event&#123; return self;&#125;-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event&#123; NSLog(@&quot;ç‚¹å‡»äº†Image&quot;);&#125; ç„¶åå°†ä»–ä»¬åˆ›å»ºåœ¨ä¸€ä¸ªViewä¸Šï¼š 12345678910- (void)viewDidLoad &#123; [super viewDidLoad]; MyImageView * image = [[MyImageView alloc]initWithFrame:CGRectMake(60, 80, 200, 200)]; MyButton * btn =[UIButton buttonWithType:UIButtonTypeSystem]; btn.frame=CGRectMake(20, 20, 40, 40); [btn setTitle:@&quot;button&quot; forState:UIControlStateNormal]; [image addSubview:btn]; [self.view addSubview:image]; // Do any additional setup after loading the view, typically from a nib.&#125; æˆ‘ä»¬è¿è¡Œï¼Œç‚¹å‡»è¿™ä¸ªBtnï¼Œä¼šæ‰“å°å¦‚ä¸‹çš„ä¿¡æ¯ï¼š å¯ä»¥è¯æ˜ï¼Œåœ¨äº‹ä»¶è§†å›¾å¯»æ‰¾ä¸­ï¼ŒUIImageViewæˆ‘ä»¬é‡å†™hitTest:withEvent:æ–¹æ³•åï¼Œåˆ‡æ–­äº†å¯»æ‰¾é“¾ï¼Œå¦‚æœæˆ‘ä»¬è¿™ä¸ªåšï¼š 123-(UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event&#123; return nil;&#125; ä½ ä¼šå‘ç°ï¼ŒUIImageViewä¹Ÿä¸å†æ¥æ”¶äº‹ä»¶ã€‚2ã€å¯»æ‰¾åˆ°åº”è¯¥å“åº”çš„è§†å›¾åï¼Œä¼šè¿›è¡Œæ¶ˆæ¯å¤„ç†ï¼Œè¿™ä¸ªå¤„ç†çš„æ–¹å¼æ˜¯é€šè¿‡æ¶ˆæ¯å¤„ç†é“¾æ¥åšçš„ã€‚å¦‚æœå®ƒè‡ªèº«ä¸èƒ½å¤„ç†æ¶ˆæ¯ï¼Œä¼šé€šè¿‡nextResponderå°†æ¶ˆæ¯ä¼ é€’ç»™ä¸‹ä¸€ä¸ªå¤„ç†è€…ï¼Œé»˜è®¤åªè¦æœ‰ä¸€ä¸ªviewå°†æ¶ˆæ¯å¤„ç†äº†ï¼Œè¿™ä¸ªæ¶ˆæ¯å¤„ç†ä¼ é€’é“¾å°†ä¸å†ä¼ é€’ã€‚ ç°åœ¨ï¼Œæˆ‘ä»¬æŠŠåˆšæ‰UIimageViewé‡Œé‡å†™çš„hitTest:withEvent:æ–¹æ³•æ³¨é‡Šæ‰ï¼Œç»™btnæ·»åŠ ä¸€ä¸ªç‚¹å‡»æ–¹æ³•ï¼ŒåŒæ—¶å°†ç”¨æˆ·äº¤äº’å…³é—­ï¼š 12345678910111213141516171819- (void)viewDidLoad &#123; [super viewDidLoad]; MyImageView * image = [[MyImageView alloc]initWithFrame:CGRectMake(60, 80, 200, 200)]; MyButton * btn =[UIButton buttonWithType:UIButtonTypeSystem]; image.userInteractionEnabled=YES; btn.frame=CGRectMake(20, 20, 40, 40); [btn setTitle:@&quot;button&quot; forState:UIControlStateNormal]; [image addSubview:btn]; [self.view addSubview:image]; [btn addTarget:self action:@selector(click) forControlEvents:UIControlEventTouchUpInside]; btn.userInteractionEnabled=NO; // Do any additional setup after loading the view, typically from a nib.&#125;-(void)click&#123; NSLog(@&quot;btnè¢«ç‚¹å‡»äº†&quot;);&#125; è¿™æ ·ï¼Œæˆ‘ä»¬çš„UIImageViewåˆå¯ä»¥å“åº”äº‹ä»¶äº†ï¼ŒåŸå› æ˜¯äº‹ä»¶å¤„ç†ä¼ é€’é“¾å‘ä¸‹ä¼ é€’äº†ã€‚ ç°åœ¨ï¼Œåœ¨å›åˆ°æˆ‘ä»¬åˆšå¼€å§‹çš„é—®é¢˜ï¼Œå¦‚ä½•è®©btnå“åº”çš„åŒæ—¶imageViewä¹Ÿå“åº”ï¼Œæˆ‘ä»¬è¿™æ ·åšï¼š 12345678910111213141516171819202122- (void)viewDidLoad &#123; [super viewDidLoad]; MyImageView * image = [[MyImageView alloc]initWithFrame:CGRectMake(60, 80, 200, 200)]; image.userInteractionEnabled=YES; MyButton * btn =[UIButton buttonWithType:UIButtonTypeSystem]; btn.frame=CGRectMake(20, 20, 40, 40); [btn setTitle:@&quot;button&quot; forState:UIControlStateNormal]; [image addSubview:btn]; [self.view addSubview:image]; [btn addTarget:self action:@selector(click:) forControlEvents:UIControlEventTouchUpInside]; btn.userInteractionEnabled=NO; // Do any additional setup after loading the view, typically from a nib.&#125;-(void)click:(UIButton *)btn&#123; NSLog(@&quot;btnè¢«ç‚¹å‡»äº†&quot;); //å“åº”é“¾ç»§ç»­ä¼ é€’ [btn.nextResponder touchesBegan:nil withEvent:nil]; &#125; ç»“æœå¦‚ä¸‹ï¼š è™½ç„¶æœ€ç»ˆï¼Œæˆ‘ä»¬å®Œæˆäº†è¿™ä¸ªéœ€æ±‚ï¼Œå¯æ˜¯æˆ‘å»ºè®®ä½ æœ€å¥½ä¸è¦è¿™ä¹ˆå¹²ï¼Œå› ä¸ºè¿™æ ·çš„é€»è¾‘æ˜¯è¿èƒŒç°å®ç”Ÿæ´»ä¸­äººä»¬çš„è¡Œä¸ºè®¤çŸ¥çš„ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬çš„é¡¹ç›®æœ€åä¹Ÿç¡®å®æ”¹æ‰äº†è¿™æ ·çš„é€»è¾‘~~~ é”™è¯¯ä¹‹å¤„ï¼Œæ¬¢è¿æŒ‡æ­£ æ¬¢è¿è½¬è½½ï¼Œæ³¨æ˜å‡ºå¤„ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSç¼–ç¨‹æŠ€å·§","slug":"iOSç¼–ç¨‹æŠ€å·§","permalink":"http://huishao.cc/categories/iOSç¼–ç¨‹æŠ€å·§/"}],"tags":[{"name":"iOSç¼–ç¨‹","slug":"iOSç¼–ç¨‹","permalink":"http://huishao.cc/tags/iOSç¼–ç¨‹/"},{"name":"äº‹ä»¶","slug":"äº‹ä»¶","permalink":"http://huishao.cc/tags/äº‹ä»¶/"}],"keywords":[{"name":"iOSç¼–ç¨‹æŠ€å·§","slug":"iOSç¼–ç¨‹æŠ€å·§","permalink":"http://huishao.cc/categories/iOSç¼–ç¨‹æŠ€å·§/"}]},{"title":"iOSä¸­DESä¸MD5åŠ å¯†æ–¹æ¡ˆ","slug":"02MD","date":"2015-04-02T16:00:00.000Z","updated":"2018-12-10T04:40:27.696Z","comments":true,"path":"2015/04/03/02MD/","link":"","permalink":"http://huishao.cc/2015/04/03/02MD/","excerpt":"","text":"MD5ç®—æ³•å’ŒDESç®—æ³•æ˜¯å¸¸è§çš„ä¸¤ç§åŠ å¯†ç®—æ³•ã€‚ MD5ï¼šMD5æ˜¯ä¸€ç§ä¸å¯é€†çš„åŠ å¯†ç®—æ³•ï¼ŒæŒ‰æˆ‘çš„ç†è§£ï¼Œæ‰€è°“ä¸å¯é€†ï¼Œå°±æ˜¯ä¸èƒ½è§£å¯†ï¼Œé‚£ä¹ˆå®ƒæœ‰ä»€ä¹ˆç”¨çš„ï¼Œå®ƒçš„ç”¨å¤„å¤§äº†ï¼Œå¤§å¤šæ•°çš„ç™»å½•åŠŸèƒ½éƒ½ä¼šä½¿ç”¨åˆ°è¿™ç§ç®—æ³•ã€‚åé¢æ ¹æ®æˆ‘çš„é¡¹ç›®ç»éªŒæ¥ä»‹ç»ã€‚ DESï¼šä¸€ç§ä½¿ç”¨å¯†é’¥åŠ å¯†çš„å—ç®—æ³•ï¼Œæ‰€ä»¥ï¼Œä½¿ç”¨å®ƒåŠ å¯†æ—¶ï¼Œéœ€è¦ä¸€ä¸ªå¯†é’¥ï¼ŒåŠ ä¸Šä¸€äº›è®¾ç½®å’Œä½ éœ€è¦åŠ å¯†çš„æ–‡æ®µã€‚ åœ¨IOSä¸­ï¼Œä½¿ç”¨è¿™ä¸¤ç§åŠ å¯†ç®—æ³•éå¸¸ç®€å•ï¼Œç³»ç»Ÿçš„&lt;CommonCrypto/CommonCrypto.h&gt;åº“ç»™æˆ‘ä»¬æä¾›çš„è¾¹ç•Œçš„æ¥å£ã€‚åœ¨å¾ˆå¤šç§»åŠ¨é¡¹ç›®ä¸­ï¼Œå®‰å“å¹³å°å’ŒIOSå¹³å°çš„åå°æœåŠ¡æ˜¯ç»Ÿä¸€çš„ï¼Œæ¯”å¦‚ä¸€ä¸ªç™»å½•åŠŸèƒ½æ˜¯è¿™æ ·çš„æµç¨‹ï¼š 1ã€å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯è¯·æ±‚å¯†é’¥ï¼Œè¯·æ±‚çš„å‚æ•°æ˜¯åŒæ–¹çº¦å®šå¥½çš„ä¸€ä¸ªMD5åŠ å¯†çš„å­—ç¬¦ä¸²ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„è¿›è¡Œç¬¬ä¸€æ­¥åŠ å¯†ï¼š 1234567891011121314- (NSString *)MD5Digest&#123; //è¦è¿›è¡ŒUTF8çš„è½¬ç  const char* input = [self UTF8String]; unsigned char result[CC_MD5_DIGEST_LENGTH]; CC_MD5(input, (CC_LONG)strlen(input), result); NSMutableString *digest = [NSMutableString stringWithCapacity:CC_MD5_DIGEST_LENGTH * 2]; for (NSInteger i = 0; i &lt; CC_MD5_DIGEST_LENGTH; i++) &#123; [digest appendFormat:@&quot;%02x&quot;, result[i]]; &#125; return digest;&#125; é€šè¿‡è¿™æ ·çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“çš„å¾—åˆ°ä¸€ä¸²MD5åŠ å¯†å­—ç¬¦ä¸²ï¼Œä½†æ˜¯ä¸€å®šè¦å’Œåå°çº¦å®šå¥½ï¼ŒMD5åŠ å¯†çš„ä½æ•°æ˜¯16ä½è¿˜æ˜¯32ä½ï¼Œç”¨ä¸Šè¿°æ–¹æ³•åŠ å¯†å‡ºæ¥çš„æ—¶32ä½ï¼Œå½“ç„¶ä»–ä»¬ä¹‹é—´æ˜¯æœ‰è”ç³»çš„ï¼Œé€šè¿‡ä¸‹é¢çš„æ–¹æ³•å¯ä»¥å°†å…¶è½¬æˆ16ä¸ºï¼š 1234567+(NSString *)trransFromMD532ToMD516:(NSString *)MD532&#123; NSString * string; for (int i=0; i&lt;24; i++) &#123; string=[MD532 substringWithRange:NSMakeRange(8, 16)]; &#125; return string;&#125; è¿˜æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼ŒåŠ å¯†åçš„å¤§å°å†™ä¹Ÿè¦å¯¹åº”ã€‚ 2ã€æœåŠ¡ç«¯å°†å¾—åˆ°çš„MD5ä¸²å’Œä»¥çº¦å®šå¥½çš„MD5ä¸²è¿›è¡Œå¯¹æ¯”ï¼Œå¦‚æœä¸€è‡´ï¼Œå¯ä»¥æ”¾è¡Œï¼Œè¿”å›å¯†é’¥ã€‚ 3ã€å®¢æˆ·ç«¯å–åˆ°å¯†é’¥ï¼Œå°†å¯†é’¥å†è¿›è¡Œä¸€æ¬¡MD5åŠ å¯†ï¼Œç„¶åé€šè¿‡DESå°†è¦ä¼ é€çš„æ•°æ®åŠ å¯†å‘ç»™æœåŠ¡å™¨ã€‚ è¿™ä¸€æ­¥è‡³å…³é‡è¦ï¼Œæˆ‘ä»¬å…ˆçœ‹DESçš„åŠ å¯†ä»£ç  12345678910111213141516171819202122232425262728293031+(NSString *) encryptUseDES:(NSString *)clearText key:(NSString *)key andiv:(NSString *)iv&#123; //è¿™ä¸ªiv æ˜¯DESåŠ å¯†çš„åˆå§‹åŒ–å‘é‡ï¼Œå¯ä»¥ç”¨å’Œå¯†é’¥ä¸€æ ·çš„MD5å­—ç¬¦ NSData * date = [iv dataUsingEncoding:NSUTF8StringEncoding]; NSString *ciphertext = nil; NSUInteger dataLength = [clearText length]; NSData *textData = [clearText dataUsingEncoding:NSUTF8StringEncoding]; unsigned char buffer[1024]; memset(buffer, 0, sizeof(char)); size_t numBytesEncrypted = 0; CCCryptorStatus cryptStatus = CCCrypt(kCCEncrypt,//åŠ å¯†æ¨¡å¼ kCCDecrypt ä»£è¡¨è§£å¯† kCCAlgorithmDES,//åŠ å¯†æ–¹å¼ kCCOptionPKCS7Padding,//å¡«å……ç®—æ³• [key UTF8String], //å¯†é’¥å­—ç¬¦ä¸² kCCKeySizeDES,//åŠ å¯†ä½æ•° [date bytes],//åˆå§‹åŒ–å‘é‡ [textData bytes] , dataLength, buffer, 1024, &amp;numBytesEncrypted); if (cryptStatus == kCCSuccess) &#123; NSLog(@&quot;DESåŠ å¯†æˆåŠŸ&quot;); NSData *data = [NSData dataWithBytes:buffer length:(NSUInteger)numBytesEncrypted]; Byte* bb = (Byte*)[data bytes]; ciphertext = [Base64 parseByteArray2HexString:bb]; &#125;else&#123; NSLog(@&quot;DESåŠ å¯†å¤±è´¥&quot;); &#125; return ciphertext;&#125; å‡ ç‚¹æ³¨æ„ï¼š ï¼ˆ1ï¼‰åŠ å¯†æ–¹å¼ï¼ŒIOSå®˜æ–¹æä¾›çš„æ˜¯å¦‚ä¸‹å‡ ç§ 12345678910enum &#123; kCCAlgorithmAES128 = 0, kCCAlgorithmAES = 0, kCCAlgorithmDES, kCCAlgorithm3DES, kCCAlgorithmCAST, kCCAlgorithmRC4, kCCAlgorithmRC2, kCCAlgorithmBlowfish &#125;; ï¼ˆ2ï¼‰å¡«å……ç®—æ³• 123456enum &#123; /* options for block ciphers */ kCCOptionPKCS7Padding = 0x0001, kCCOptionECBMode = 0x0002 /* stream ciphers currently have no options */&#125;; æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œå®˜æ–¹æä¾›çš„åªæœ‰è¿™ä¸¤ç§ï¼Œç„¶è€ŒJAVAä½¿ç”¨çš„å´æ˜¯ 1kCCOptionPKCS7Padding ä½†æ˜¯ä¸ç”¨æ‹…å¿ƒï¼Œåœ¨å¯†é’¥æ˜¯8ä½çš„æ—¶å€™ï¼Œè¿™ä¸¤ç§å¡«å……ç®—æ³•åŠ å¯†å‡ºæ¥çš„ç»“æœè¯•ä¸€æ¨¡ä¸€æ ·çš„ã€‚ 4ã€æœåŠ¡å™¨é€šè¿‡ç›¸åŒçš„æ–¹å¼ï¼Œè§£å¯†å‡ºå¯†æ–‡ï¼Œé€šé…å®‰å“ç«¯ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSç¼–ç¨‹æŠ€å·§","slug":"iOSç¼–ç¨‹æŠ€å·§","permalink":"http://huishao.cc/categories/iOSç¼–ç¨‹æŠ€å·§/"}],"tags":[{"name":"iOSç¼–ç¨‹","slug":"iOSç¼–ç¨‹","permalink":"http://huishao.cc/tags/iOSç¼–ç¨‹/"},{"name":"åŠ å¯†","slug":"åŠ å¯†","permalink":"http://huishao.cc/tags/åŠ å¯†/"},{"name":"DES","slug":"DES","permalink":"http://huishao.cc/tags/DES/"},{"name":"MD5","slug":"MD5","permalink":"http://huishao.cc/tags/MD5/"}],"keywords":[{"name":"iOSç¼–ç¨‹æŠ€å·§","slug":"iOSç¼–ç¨‹æŠ€å·§","permalink":"http://huishao.cc/categories/iOSç¼–ç¨‹æŠ€å·§/"}]},{"title":"AFNetWorkingç”¨æ³•åŠç¼“å­˜å¤„ç†","slug":"01AF","date":"2015-04-01T16:00:00.000Z","updated":"2018-12-10T04:40:27.696Z","comments":true,"path":"2015/04/02/01AF/","link":"","permalink":"http://huishao.cc/2015/04/02/01AF/","excerpt":"","text":"AFNetWorking åœ¨IOSå¼€å‘ä¸­æ˜¯ä¸€ä¸ªç»å¸¸ä¼šç”¨çš„ç¬¬ä¸‰æ–¹å¼€æºåº“ï¼Œå…¶æœ€å¥½å¤„æ˜¯ç»´æŠ¤åŠæ—¶ï¼Œæºç å¼€æºã€‚ å¸¸ç”¨GETä¸POSTè¯·æ±‚æ–¹æ³•ï¼š POSTè¯·æ±‚ï¼š 123456789//åˆå§‹åŒ–ä¸€ä¸ªè¯·æ±‚å¯¹è±¡ AFHTTPRequestOperationManager *manager = [AFHTTPRequestOperationManager manager]; NSString * url = @&quot;ä½ çš„è¯·æ±‚åœ°å€&quot;; //dic ä¸ºå‚æ•°å­—å…¸ [manager POST:url parameters:dic success:^(AFHTTPRequestOperation *operation, id responseObject) &#123; //è¯·æ±‚æˆåŠŸçš„å›è°ƒ &#125; failure:^(AFHTTPRequestOperation *operation, NSError *error) &#123; //è¯·æ±‚å¤±è´¥çš„å›è°ƒ &#125;]; GETè¯·æ±‚ï¼š 1234567AFHTTPRequestOperationManager *manager = [AFHTTPRequestOperationManager manager]; NSString * url = @&quot;ä½ çš„è¯·æ±‚åœ°å€&quot;; [manager GET:url parameters:nil success:^(AFHTTPRequestOperation *operation, id responseObject) &#123; //è¯·æ±‚æˆåŠŸçš„å›è°ƒ &#125; failure:^(AFHTTPRequestOperation *operation, NSError *error) &#123; //è¯·æ±‚å¤±è´¥çš„å›è°ƒ &#125;]; è¿™é‡Œæœ‰ä¸€ä¸ªåœ°æ–¹éœ€è¦æ³¨æ„ï¼Œ 1[AFHTTPRequestOperationManager manager] è¿™ä¸ªç±»æ–¹æ³•æˆ‘ä»¬ç‚¹è¿›æºç å¯ä»¥å‘ç°ï¼š 123+ (instancetype)manager &#123; return [[self alloc] initWithBaseURL:nil];&#125; è¿™é‡Œåˆå§‹åŒ–äº†ä¸€ä¸ªè¿”å›äº†ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œå¹¶ä¸æ˜¯å•ä¾‹ã€‚ ä½¿ç”¨è¿™æ ·çš„ä¸‹è½½æ–¹æ³•ï¼Œä¸‹è½½å®Œæˆåçš„æ•°æ®AFNetWorkingä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨è§£æï¼Œä½†æ˜¯æœ‰æ—¶å€™æœåŠ¡å™¨ç»™çš„æ•°æ®å¹¶ä¸æ ‡å‡†ï¼Œè¿™æ—¶æˆ‘ä»¬éœ€è¦åŠ ä¸Šè¿™ä¸ªè®¾ç½®ï¼š manager.responseSerializer = [AFHTTPResponseSerializer serializer]; è¿™æ ·æˆ‘ä»¬å°†å¾—åˆ°åŸå§‹çš„HTTPè¿”å›ç»™æˆ‘ä»¬æ•°æ®ã€‚ æˆ‘ä»¬å†æ¥æ¢ç©¶ä¸€ä¸‹ï¼Œä¸‹è½½æˆåŠŸåï¼Œå›è°ƒæ–¹æ³•é‡Œçš„å‚æ•°åˆ°åº•æ˜¯ä»€ä¹ˆä¸œè¥¿ 1success:^(AFHTTPRequestOperation *operation, id responseObject) å…¶ä¸­ï¼Œç¬¬äºŒä¸ªå‚æ•° responseObject æ˜¯ä¸‹è½½ä¸‹æ¥çš„dataæ•°æ®ï¼Œå¯ç›´æ¥è¿›è¡ŒJSONç­‰è§£æã€‚ ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ˜¯ä¸ªAFHTTPRequestOperationå¯¹è±¡ï¼Œæ¥çœ‹æºæ–‡ä»¶ 123456789@interface AFHTTPRequestOperation : AFURLConnectionOperation@property (readonly, nonatomic, strong) NSHTTPURLResponse *response;@property (nonatomic, strong) AFHTTPResponseSerializer &lt;AFURLResponseSerialization&gt; * responseSerializer;@property (readonly, nonatomic, strong) id responseObject;@end å¯ä»¥å‘ç°ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªæˆå‘˜ä¾¿æ˜¯responseObjectï¼ŒåŒæ—¶ï¼ŒAFHTTPRequestOperationæ˜¯ç»§æ‰¿äºAFURLConnectionOperation,æˆ‘ä»¬åœ¨çœ‹çœ‹AFURLConnectionOperationè¿™ä¸ªç±»ï¼š 123456789101112131415161718192021222324252627282930313233343536373839@interface AFURLConnectionOperation : NSOperation &lt;NSURLConnectionDelegate, NSURLConnectionDataDelegate, NSSecureCoding, NSCopying&gt;@property (nonatomic, strong) NSSet *runLoopModes;@property (readonly, nonatomic, strong) NSURLRequest *request;@property (readonly, nonatomic, strong) NSURLResponse *response;@property (readonly, nonatomic, strong) NSError *error;@property (readonly, nonatomic, strong) NSData *responseData;@property (readonly, nonatomic, copy) NSString *responseString;@property (readonly, nonatomic, assign) NSStringEncoding responseStringEncoding;@property (nonatomic, assign) BOOL shouldUseCredentialStorage;@property (nonatomic, strong) NSURLCredential *credential;@property (nonatomic, strong) AFSecurityPolicy *securityPolicy;@property (nonatomic, strong) NSInputStream *inputStream;@property (nonatomic, strong) NSOutputStream *outputStream;@property (nonatomic, strong) dispatch_queue_t completionQueue;@property (nonatomic, strong) dispatch_group_t completionGroup;@property (nonatomic, strong) NSDictionary *userInfo;- (instancetype)initWithRequest:(NSURLRequest *)urlRequest NS_DESIGNATED_INITIALIZER;- (void)pause;- (BOOL)isPaused;- (void)resume; çœ‹åˆ°è¿™é‡Œï¼Œå°±ç¦»AFNETWorkingå°è£…çš„æºå¤´å¾ˆè¿‘äº†ï¼Œé‡Œé¢çš„æˆå‘˜éå¸¸å¤šï¼Œå…¶ä¸­åŒ…å«äº†å¤§éƒ¨åˆ†æˆ‘ä»¬éœ€è¦çš„ä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡ç‚¹è¯­æ³•å–åˆ°ï¼Œå…¶ä¸­æœ‰è¾“å…¥è¾“å‡ºæµï¼Œé”™è¯¯ä¿¡æ¯ï¼Œè¯·æ±‚åˆ°çš„Dataæ•°æ®ï¼Œä»¥åŠè¯·æ±‚åˆ°çš„å­—ç¬¦ä¸²æ•°æ® 1responseString æˆ‘ä»¬å¯ä»¥é€šè¿‡ 1NSLog ( @&quot;operation: %@&quot; , operation. responseString ); æ¥æ‰“å°æŸ¥çœ‹è¯·æ±‚åˆ°çš„åŸå§‹ä¿¡æ¯ã€‚ å‡ ç‚¹æ³¨æ„ï¼š 1.å…³äºå´©æºƒurlä¸ºnil å¤§å¤šæ•°è¿™æ ·çš„åŸå› æ˜¯urlä¸­æœ‰ç‰¹æ®Šå­—ç¬¦æˆ–è€…ä¸­æ–‡å­—ç¬¦ï¼ŒAFNETWorkingå¹¶æ²¡æœ‰åšUTF8çš„è½¬ç ï¼Œéœ€è¦ï¼š 1url = [url stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 2.æ·»åŠ HttpHeadå­—æ®µçš„æ–¹æ³• 1234 //ä¸ºè¿™ä¸ªä¸‹è½½ä»»åŠ¡HTTPå¤´æ·»åŠ @&quot;User-Agent&quot;å­—æ®µ [manager.requestSerializer setValue:_scrData forHTTPHeaderField:@&quot;User-Agent&quot;]; //æ‰“å°å¤´ä¿¡æ¯ NSLog(@&quot;%@&quot;,manager.requestSerializer.HTTPRequestHeaders); åœ¨ä¸‹è½½è¯·æ±‚ä¸­ï¼Œç»å¸¸ä¼šè¯·æ±‚ä¸€äº›ä¸é•¿å˜åŒ–çš„æ•°æ®ï¼Œå¦‚æœæ¯æ¬¡APPå¯åŠ¨éƒ½è¿›è¡Œè¯·æ±‚ï¼Œä¼šæ¶ˆè€—è®¸å¤šèµ„æºï¼Œå¹¶ä¸”æœ‰æ—¶å€™ç¼“å­˜çš„å¤„ç†ï¼Œå¯ä»¥å¤§å¤§æ”¹å–„ç”¨æˆ·ä½“éªŒã€‚ åœ¨AFNETWorkingä¸­ï¼Œå¹¶æ²¡æœ‰æä¾›ç°æˆçš„ç¼“å­˜æ–¹æ¡ˆï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å†™æ–‡ä»¶çš„æ–¹å¼ï¼Œè‡ªè¡Œåšç¼“å­˜ã€‚ åœ¨ä¸‹è½½æ–¹æ³•ä¸­ï¼š 1234567[manager GET:url parameters:nil success:^(AFHTTPRequestOperation *operation, id responseObject) &#123; //å†™ç¼“å­˜ NSString *cachePath = @&quot;ä½ çš„ç¼“å­˜è·¯å¾„&quot;;// /Library/Caches/MyCache [data writeToFile:cachePath atomically:YES]; succsee(data); &#125; failure:^(AFHTTPRequestOperation *operation, NSError *error) &#123; &#125;]; ç„¶ååœ¨æ¯æ¬¡ä¸‹è½½å‰ï¼Œè¿›è¡Œå¦‚ä¸‹åˆ¤æ–­ï¼š 12345 NSString * cachePath = @&quot;ä½ çš„ç¼“å­˜è·¯å¾„&quot;; if ([[NSFileManager defaultManager] fileExistsAtPath:cachePath]) &#123; //ä»æœ¬åœ°è¯»ç¼“å­˜æ–‡ä»¶ NSData *data = [NSData dataWithContentsOfFile:cachePath]; &#125; æœ‰æ—¶ï¼Œæˆ‘ä»¬çš„ä¸‹è½½è¯·æ±‚å¯èƒ½æ˜¯ç”¨æˆ·çš„åŠ¨ä½œè§¦å‘çš„ï¼Œæ¯”å¦‚ä¸€ä¸ªæŒ‰é’®ã€‚æˆ‘ä»¬è¿˜åº”è¯¥åšä¸€ä¸ªä¿æŠ¤æœºåˆ¶çš„å¤„ç†ï¼Œ 123456789101112131415//åˆå§‹åŒ–ä¸€ä¸ªä¸‹è½½è¯·æ±‚æ•°ç»„NSArray * requestArray=[[NSMutableArray alloc]init];//æ¯æ¬¡å¼€å§‹ä¸‹è½½ä»»åŠ¡å‰åšå¦‚ä¸‹åˆ¤æ–­for (NSString * request in requestArray) &#123; if ([url isEqualToString:request]) &#123; return; &#125; &#125; [requestArray addObject:url]; //ä¸‹è½½æˆåŠŸæˆ–å¤±è´¥å [manager GET:url parameters:nil success:^(AFHTTPRequestOperation *operation, id responseObject) &#123; [requestArray removeObject:url] &#125; failure:^(AFHTTPRequestOperation *operation, NSError *error) &#123; [requestArray removeObject:url] &#125;]; è‡³æ­¤ï¼Œä¸€ä¸ªæ¯”è¾ƒå®ŒæˆAFNETWorkingè¯·æ±‚ä½¿ç”¨æµç¨‹å°±å®Œæˆäº†ã€‚ ä¸“æ³¨æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¹Ÿåšæœ‹å‹ã€‚ â€”â€”ç²å°‘ QQç¾¤ï¼š203317592","categories":[{"name":"iOSç¼–ç¨‹æŠ€å·§","slug":"iOSç¼–ç¨‹æŠ€å·§","permalink":"http://huishao.cc/categories/iOSç¼–ç¨‹æŠ€å·§/"}],"tags":[{"name":"ç½‘ç»œ","slug":"ç½‘ç»œ","permalink":"http://huishao.cc/tags/ç½‘ç»œ/"},{"name":"iOSç¼–ç¨‹","slug":"iOSç¼–ç¨‹","permalink":"http://huishao.cc/tags/iOSç¼–ç¨‹/"},{"name":"AFNetWorking","slug":"AFNetWorking","permalink":"http://huishao.cc/tags/AFNetWorking/"}],"keywords":[{"name":"iOSç¼–ç¨‹æŠ€å·§","slug":"iOSç¼–ç¨‹æŠ€å·§","permalink":"http://huishao.cc/categories/iOSç¼–ç¨‹æŠ€å·§/"}]}]}