<script src="https://eqcn.ajz.miesnfu.com/wp-content/plugins/wp-3d-pony/live2dw/lib/L2Dwidget.min.js"></script> 
<script>
　　let models = [
    "https://unpkg.com/live2d-widget-model-chitose@1.0.5/assets/chitose.model.json",
    "https://unpkg.com/live2d-widget-model-shizuku@1.0.5/assets/shizuku.model.json",
    "https://unpkg.com/live2d-widget-model-koharu@1.0.5/assets/koharu.model.json",
    "https://unpkg.com/live2d-widget-model-haruto@1.0.5/assets/haruto.model.json",
    "https://unpkg.com/live2d-widget-model-miku@1.0.5/assets/miku.model.json",
    "https://unpkg.com/live2d-widget-model-z16@1.0.5/assets/z16.model.json"
];
let m = models[Math.round(Math.random()*5)];
　　L2Dwidget.init({ 
　　"model": {jsonPath:m,"scale": 1 }, 
　　"display": { "position": "left", "width": 200, "height": 300,"hOffset": 0, "vOffset": -20 }, 
　　"mobile": { "show": true, "scale": 0.5 }, 
　　"react": { "opacityDefault": 0.7, "opacityOnHover": 0.2 } });
</script> 
<!DOCTYPE HTML>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
    <!--Setting-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="apple-mobile-web-app-capable" content="珲少的技术博客">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    <meta name="browsermode" content="application">
    <meta name="screen-orientation" content="portrait">
    <link rel="dns-prefetch" href="http://huishao.cc">
    <!--SEO-->

<meta name="description" content="珲少的技术博客">



<meta name="keywords" content="珲少">



<meta name="robots" content="all">
<meta name="google" content="all">
<meta name="googlebot" content="all">
<meta name="verify" content="all">
    <!--Title-->


<title>Swift讲解专题十一——属性 | 珲少的技术博客</title>


    <link rel="alternate" href="/atom.xml" title="珲少的技术博客" type="application/atom+xml">


    <link rel="icon" href="/favicon.ico">

    



<link rel="stylesheet" href="/css/bootstrap.min.css?rev=3.3.7">
<link rel="stylesheet" href="/css/font-awesome.min.css?rev=4.5.0">
<link rel="stylesheet" href="/css/style.css?rev=@@hash">




    





    
</head>

</html>
<!--[if lte IE 8]>
<style>
    html{ font-size: 1em }
</style>
<![endif]-->
<!--[if lte IE 9]>
<div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div>
<![endif]-->

<body>
    <header class="main-header"  style="background-image:url(http://7xpw2b.com1.z0.glb.clouddn.com/hexo-sinppet/img/banner.png)"  >
    <div class="main-header-box">
        <a class="header-avatar" href="/" title='珲少'>
            <img src="/img/avatar.jpg" alt="logo头像" class="img-responsive center-block">
        </a>
        <div class="branding">
        	<!--<h2 class="text-hide">Snippet主题,从未如此简单有趣</h2>-->
            
                <h2> 学如逆水行舟 </h2>
            
    	</div>
    </div>
</header>
    <nav class="main-navigation">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="navbar-header"><span class="nav-toggle-button collapsed pull-right" data-toggle="collapse" data-target="#main-menu" id="mnav">
                    <span class="sr-only"></span>
                        <i class="fa fa-bars"></i>
                    </span>
                    <a class="navbar-brand" href="http://huishao.cc">珲少的技术博客</a>
                </div>
                <div class="collapse navbar-collapse" id="main-menu">
                    <ul class="menu">
                        
                            <li role="presentation" class="text-center">
                                <a href="/"><i class="fa "></i>主页</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/archives/"><i class="fa "></i>归档</a>
                            </li>
                        
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>
    <section class="content-wrap">
        <div class="container">
            <div class="row">
                <main class="col-md-8 main-content m-post">
                    <p id="process"></p>
<article class="post">
    <div class="post-head">
        <h1 id="Swift讲解专题十一——属性">
            
	            Swift讲解专题十一——属性
            
        </h1>
        <div class="post-meta">
    
    
    <span class="categories-meta fa-wrap">
        <i class="fa fa-folder-open-o"></i>
        <a href="/categories/Swift语法专题">
            Swift语法专题
        </a>
    </span>
    
    
    <span class="fa-wrap">
        <i class="fa fa-tags"></i>
        <span class="tags-meta">
            
                
            
        </span>
    </span>
    

    
        
        <span class="fa-wrap">
            <i class="fa fa-clock-o"></i>
            <span class="date-meta">2016/05/16</span>
        </span>
    
</div>

            
            
    </div>
    
    <div class="post-body post-content">
        <h2 id="Swift讲解专题十一——属性"><a href="#Swift讲解专题十一——属性" class="headerlink" title="Swift讲解专题十一——属性"></a>Swift讲解专题十一——属性</h2><h3 id="一、引言"><a href="#一、引言" class="headerlink" title="一、引言"></a>一、引言</h3><pre><code>属性将值与类，结构体，枚举进行关联。Swift中的属性分为存储属性和计算属性两种，存储属性用于存储一个值，其只能用于类与结构体，计算属性用于计算一个值，其可以用于类，结构体和枚举。
</code></pre><h3 id="二、存储属性"><a href="#二、存储属性" class="headerlink" title="二、存储属性"></a>二、存储属性</h3><pre><code>存储属性使用变量或者常量来存储一个值，在声明存储属性时，可以为其设置一个默认值，也可以在构造示例是进行值的设置，属性可以通过点语法来访问，结构体的存储属性示例代码如下：
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">struct MyStruct &#123;</span><br><span class="line">    var property1 = 1</span><br><span class="line">    var property2:Int</span><br><span class="line">&#125;</span><br><span class="line">var obj = MyStruct(property1: 1, property2: 2)</span><br><span class="line">//通过点语法进行属性的访问</span><br><span class="line">print(obj.property1,obj.property2)</span><br></pre></td></tr></table></figure>
<p>如上结构体，如果有属性被声明成let常量，则此属性不能够被修改。还有一点需要注意，如果在创建结构体的实例时，使用的是let进行创建，则即便结构体中的属性是变量也不可进行修改。这和类有很大区别。</p>
<pre><code>还有一类存储属性叫做延时存储属性，可以设想一下这样的情形，类的某些属性可能并不是在每次类实例后都会用到，并且有些属性的构造可能会消耗大量的时间，这时一个比较聪明的设计便是在类进行实例化时，这类属性并不被构造，当次类的实例使用到这个属性时，这个属性才被构造出来，这样的属性被称为延时存储属性，使用lazy关键字来声明，示例如下：
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">//第一个类</span><br><span class="line">class MyClass1 &#123;</span><br><span class="line">    init()&#123;</span><br><span class="line">        print(&quot;MyClass1类被构造&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">class MyClass2 &#123;</span><br><span class="line">    //声明为延时存储属性</span><br><span class="line">    lazy var body = MyClass1()</span><br><span class="line">&#125;</span><br><span class="line">//在构造MyClass2时 并不会进行body属性的构造 不会有打印信息</span><br><span class="line">var obj2 = MyClass2()</span><br><span class="line">//执行下面代码后 会有打印信息 使用body属性使得body被构造</span><br><span class="line">obj2.body</span><br></pre></td></tr></table></figure>
<p>注意，如果在多个线程中对延时构造属性进行使用，不能保证其只被构造一次。</p>
<h3 id="三、计算属性"><a href="#三、计算属性" class="headerlink" title="三、计算属性"></a>三、计算属性</h3><pre><code>简单的理解，计算属性并不是独立的用于存储值的属性，开发者甚至可以将其理解为一个计算方法，其主要用于通过计算来获取或者设置其他存储属性的值。示例如下：
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">struct Circle &#123;</span><br><span class="line">    //圆心</span><br><span class="line">    var center:(Double,Double)</span><br><span class="line">    //半径</span><br><span class="line">    var r:Double</span><br><span class="line">    //周长 将其作为计算属性</span><br><span class="line">    var l:Double&#123;</span><br><span class="line">        get&#123;</span><br><span class="line">            //计算圆的周长</span><br><span class="line">           return 2.0*r*M_PI</span><br><span class="line">        &#125;</span><br><span class="line">        set&#123;</span><br><span class="line">           //通过周长重新计算半径 默认传入的参数名为newValue</span><br><span class="line">            r = newValue/(M_PI*2)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">var circle = Circle(center: (0,0), r: 2)</span><br><span class="line">print(circle.l)</span><br><span class="line">circle.l=24</span><br><span class="line">print(circle.r)</span><br></pre></td></tr></table></figure>
<p>通过上面的演示代码可以了解，l属性并非是一个新的属性，只是通过r属性来计算出l，或者通过l来反推出r，其中有一点需要注意，计算属性中可以创建两个代码块set和get，set代码块是可选的，其中会默认生成一个newValue参数来传递外界传进来的数据，get代码块是必须要实现的，当然也可以只实现get代码块，这时这个属性将是只读的计算属性，只可以获取，不能够设置。还有一点需要注意，开发者也可以在set代码块后面自定义一个参数名来接收外界传入的参数，示例如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">struct Circle &#123;</span><br><span class="line">    //圆心</span><br><span class="line">    var center:(Double,Double)</span><br><span class="line">    //半径</span><br><span class="line">    var r:Double</span><br><span class="line">    //周长 将其作为计算属性</span><br><span class="line">    var l:Double&#123;</span><br><span class="line">        get&#123;</span><br><span class="line">            //计算圆的周长</span><br><span class="line">           return 2.0*r*M_PI</span><br><span class="line">        &#125;</span><br><span class="line">        set(newL)&#123;</span><br><span class="line">           //通过周长重新计算半径 默认传入的参数名为newValue</span><br><span class="line">            r = newL/(M_PI*2)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>只读的计算属性可以进行进一步的简写，因为没有了set代码块，所以关键字get和括号也可以给省略掉，不会产生歧义，示例如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">struct Point &#123;</span><br><span class="line">    var x:Double</span><br><span class="line">    var y:Double</span><br><span class="line">    var center:(Double,Double)&#123;</span><br><span class="line">        return (x/2,y/2)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="四、属性监听器"><a href="#四、属性监听器" class="headerlink" title="四、属性监听器"></a>四、属性监听器</h3><pre><code>Swift中的计算属性中的get和set方法和Objective-C中的get和set方法其实并非是一回事，Objective-C提供set和get方法可以让开发者在属性将要获取或者设置的时候来进行一些自定义的操作，这部分的开发需求在Swift中通过属性监听器来实现。

属性监听器有willSet和didSet两种，willSet在属性值将要变化时执行，didSet在属性值已经变化时执行，并且其中会传入变化前后的值。示例如下：
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">struct Point &#123;</span><br><span class="line">    var x:Double</span><br><span class="line">    var y:Double&#123;</span><br><span class="line">        willSet&#123;</span><br><span class="line">            print(&quot;将要进行值的更新设置,新的值是:&quot;,newValue)</span><br><span class="line">        &#125;</span><br><span class="line">        didSet&#123;</span><br><span class="line">            print(&quot;已经进行值得更新设置,旧的值是:&quot;,oldValue)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    var center:(Double,Double)&#123;</span><br><span class="line">        return (x/2,y/2)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">var point = Point(x: 3, y: 3)</span><br><span class="line">//将打印</span><br><span class="line">/*</span><br><span class="line"> 将要进行值的更新设置,新的值是: 4.0</span><br><span class="line"> 已经进行值得更新设置,旧的值是: 3.0</span><br><span class="line"> */</span><br><span class="line">point.y=4</span><br></pre></td></tr></table></figure>
<p>willSet中默认会生成一个命名为newValue的参数，didSet中会默认生成一个命名为oldValue的参数，也可以自定义这些参数的命名，示例如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">struct Point &#123;</span><br><span class="line">    var x:Double</span><br><span class="line">    var y:Double&#123;</span><br><span class="line">        willSet(new)&#123;</span><br><span class="line">            print(&quot;将要进行值的更新设置,新的值是:&quot;,new)</span><br><span class="line">        &#125;</span><br><span class="line">        didSet(old)&#123;</span><br><span class="line">            print(&quot;已经进行值得更新设置,旧的值是:&quot;,old)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    var center:(Double,Double)&#123;</span><br><span class="line">        return (x/2,y/2)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="五、实例属性与类型属性"><a href="#五、实例属性与类型属性" class="headerlink" title="五、实例属性与类型属性"></a>五、实例属性与类型属性</h3><pre><code>实例属性是针对与一个类型的实例，类型属性则是直接针对与类型。  每对类型进行一次实例化，其实例都有一套独立的实例属性，而类型属性则是类的所有实例所共用的，在Objective-C中，通常使用全局的属性来实现这样的效果，在Swift中，使用static关键字来声明类型属性，示例如下：
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">struct Point &#123;</span><br><span class="line">    //类型存储属性</span><br><span class="line">    static var name:String = &quot;Point&quot;</span><br><span class="line">    //类型计算属性</span><br><span class="line">    static var subName:String&#123;</span><br><span class="line">        return &quot;sub&quot;+name</span><br><span class="line">    &#125;</span><br><span class="line">    var x:Double</span><br><span class="line">    var y:Double&#123;</span><br><span class="line">        willSet(new)&#123;</span><br><span class="line">            print(&quot;将要进行值的更新设置,新的值是:&quot;,new)</span><br><span class="line">        &#125;</span><br><span class="line">        didSet(old)&#123;</span><br><span class="line">            print(&quot;已经进行值得更新设置,旧的值是:&quot;,old)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    var center:(Double,Double)&#123;</span><br><span class="line">        return (x/2,y/2)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">//类型属性 通过类型点语法来获取</span><br><span class="line">print(Point.name,Point.subName)</span><br></pre></td></tr></table></figure>
<p>注意，有一种特殊的情况是针对于类的类型计算属性，如果其需要子类进行继承重写，需要将static关键字，换成class关键字，示例如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">class SomeClass &#123;</span><br><span class="line">    static var storedTypeProperty = &quot;Some value.&quot;</span><br><span class="line">    static var computedTypeProperty: Int &#123;</span><br><span class="line">        return 27</span><br><span class="line">    &#125;</span><br><span class="line">    //支持子类进行重写的计算属性</span><br><span class="line">    class var overrideableComputedTypeProperty: Int &#123;</span><br><span class="line">        return 107</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>专注技术，热爱生活，交流技术，也做朋友。</p>
<p>——珲少 QQ群：203317592</p>
</blockquote>

    </div>

    <div class="post-footer">
        <div>
            
                转载声明：商业转载请联系作者获得授权,非商业转载请注明出处 © 微信：15137348047
            
        </div>
        <div>
            
        </div>
    </div>
</article>

<div class="article-nav prev-next-wrap clearfix">
    
        <a href="/2016/05/16/210Swift讲解专题十——类与结构体/" class="pre-post btn btn-default" title='Swift讲解专题十——类与结构体'>
            <i class="fa fa-angle-left fa-fw"></i><span class="hidden-lg">上一篇</span>
            <span class="hidden-xs">Swift讲解专题十——类与结构体</span>
        </a>
    
    
        <a href="/2016/05/15/209Swift讲解专题九——枚举/" class="next-post btn btn-default" title='Swift讲解专题九——枚举'>
            <span class="hidden-lg">下一篇</span>
            <span class="hidden-xs">Swift讲解专题九——枚举</span><i class="fa fa-angle-right fa-fw"></i>
        </a>
    
</div>


    <div id="comments">
        
	
<div id="lv-container" data-id="city" data-uid="MTAyMC8zNzY0Ny8xNDE3OA==">
  <script type="text/javascript">
     (function(d, s) {
         var j, e = d.getElementsByTagName(s)[0];
         if (typeof LivereTower === 'function') { return; }
         j = d.createElement(s);
         j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
         j.async = true;
         e.parentNode.insertBefore(j, e);
     })(document, 'script');
  </script>
</div>


    </div>





                </main>
                
                    <aside id="article-toc" role="navigation" class="col-md-4">
    <div class="widget">
        <h3 class="title">文章目录</h3>
        
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Swift讲解专题十一——属性"><span class="toc-text">Swift讲解专题十一——属性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#一、引言"><span class="toc-text">一、引言</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#二、存储属性"><span class="toc-text">二、存储属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#三、计算属性"><span class="toc-text">三、计算属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#四、属性监听器"><span class="toc-text">四、属性监听器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#五、实例属性与类型属性"><span class="toc-text">五、实例属性与类型属性</span></a></li></ol></li></ol>
        
    </div>
</aside>

                
            </div>
        </div>
    </section>
    <footer class="main-footer">
    <div class="container">
        <div class="row">
        </div>
    </div>
</footer>

<a id="back-to-top" class="icon-btn hide">
	<i class="fa fa-chevron-up"></i>
</a>




    <div class="copyright">
    <div class="container">
        <div class="row">
            <div class="col-sm-12"> 
                <span>Copyright &copy; 2018
                </span> | 
                <span>
                    Powered by <a href="//hexo.io" class="copyright-links" target="_blank" rel="nofollow">Hexo</a>
                </span> | 
                <span>
                    Theme by <a href="//github.com/shenliyang/hexo-theme-snippet.git" class="copyright-links" target="_blank" rel="nofollow">Snippet</a>
                </span>
            </div>
        </div>
    </div>
</div>



<script src="/js/app.js?rev=@@hash"></script>


</body>
</html>