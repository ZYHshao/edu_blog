<script src="https://eqcn.ajz.miesnfu.com/wp-content/plugins/wp-3d-pony/live2dw/lib/L2Dwidget.min.js"></script> 
<script>
　　let models = [
    "https://unpkg.com/live2d-widget-model-chitose@1.0.5/assets/chitose.model.json",
    "https://unpkg.com/live2d-widget-model-shizuku@1.0.5/assets/shizuku.model.json",
    "https://unpkg.com/live2d-widget-model-koharu@1.0.5/assets/koharu.model.json",
    "https://unpkg.com/live2d-widget-model-haruto@1.0.5/assets/haruto.model.json",
    "https://unpkg.com/live2d-widget-model-miku@1.0.5/assets/miku.model.json",
    "https://unpkg.com/live2d-widget-model-z16@1.0.5/assets/z16.model.json"
];
let m = models[Math.round(Math.random()*5)];
　　L2Dwidget.init({ 
　　"model": {jsonPath:m,"scale": 1 }, 
　　"display": { "position": "left", "width": 200, "height": 300,"hOffset": 0, "vOffset": -20 }, 
　　"mobile": { "show": true, "scale": 0.5 }, 
　　"react": { "opacityDefault": 0.7, "opacityOnHover": 0.2 } });
</script> 
<!DOCTYPE HTML>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
    <!--Setting-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="apple-mobile-web-app-capable" content="珲少的技术博客">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    <meta name="browsermode" content="application">
    <meta name="screen-orientation" content="portrait">
    <link rel="dns-prefetch" href="http://huishao.cc">
    <!--SEO-->

<meta name="description" content="珲少的技术博客">



<meta name="keywords" content="珲少">



<meta name="robots" content="all">
<meta name="google" content="all">
<meta name="googlebot" content="all">
<meta name="verify" content="all">
    <!--Title-->


<title>iOS中ImageIO框架详解与应用分析 | 珲少的技术博客</title>


    <link rel="alternate" href="/atom.xml" title="珲少的技术博客" type="application/atom+xml">


    <link rel="icon" href="/favicon.ico">

    



<link rel="stylesheet" href="/css/bootstrap.min.css?rev=3.3.7">
<link rel="stylesheet" href="/css/font-awesome.min.css?rev=4.5.0">
<link rel="stylesheet" href="/css/style.css?rev=@@hash">




    





    
</head>

</html>
<!--[if lte IE 8]>
<style>
    html{ font-size: 1em }
</style>
<![endif]-->
<!--[if lte IE 9]>
<div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div>
<![endif]-->

<body>
    <header class="main-header"  style="background-image:url(http://7xpw2b.com1.z0.glb.clouddn.com/hexo-sinppet/img/banner.png)"  >
    <div class="main-header-box">
        <a class="header-avatar" href="/" title='珲少'>
            <img src="/img/avatar.jpg" alt="logo头像" class="img-responsive center-block">
        </a>
        <div class="branding">
        	<!--<h2 class="text-hide">Snippet主题,从未如此简单有趣</h2>-->
            
                <h2> 学如逆水行舟 </h2>
            
    	</div>
    </div>
</header>
    <nav class="main-navigation">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="navbar-header"><span class="nav-toggle-button collapsed pull-right" data-toggle="collapse" data-target="#main-menu" id="mnav">
                    <span class="sr-only"></span>
                        <i class="fa fa-bars"></i>
                    </span>
                    <a class="navbar-brand" href="http://huishao.cc">珲少的技术博客</a>
                </div>
                <div class="collapse navbar-collapse" id="main-menu">
                    <ul class="menu">
                        
                            <li role="presentation" class="text-center">
                                <a href="/"><i class="fa "></i>主页</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/archives/"><i class="fa "></i>归档</a>
                            </li>
                        
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>
    <section class="content-wrap">
        <div class="container">
            <div class="row">
                <main class="col-md-8 main-content m-post">
                    <p id="process"></p>
<article class="post">
    <div class="post-head">
        <h1 id="iOS中ImageIO框架详解与应用分析">
            
	            iOS中ImageIO框架详解与应用分析
            
        </h1>
        <div class="post-meta">
    
    
    <span class="categories-meta fa-wrap">
        <i class="fa fa-folder-open-o"></i>
        <a href="/categories/iOS逻辑初窥">
            iOS逻辑初窥
        </a>
    </span>
    
    
    <span class="fa-wrap">
        <i class="fa fa-tags"></i>
        <span class="tags-meta">
            
                
            
        </span>
    </span>
    

    
        
        <span class="fa-wrap">
            <i class="fa fa-clock-o"></i>
            <span class="date-meta">2017/02/14</span>
        </span>
    
</div>

            
            
    </div>
    
    <div class="post-body post-content">
        <h2 id="iOS中ImageIO框架详解与应用分析"><a href="#iOS中ImageIO框架详解与应用分析" class="headerlink" title="iOS中ImageIO框架详解与应用分析"></a>iOS中ImageIO框架详解与应用分析</h2><h3 id="一、引言"><a href="#一、引言" class="headerlink" title="一、引言"></a>一、引言</h3><pre><code>ImageIO框架提供了读取与写入图片数据的基本方法，使用它可以直接获取到图片文件的内容数据，ImageIO框架中包含6个头文件，其中完成主要功能的是前两个头文件中定义的方法：
</code></pre><p>1.CGImageSource.h:负责读取图片数据。</p>
<p>2.CGImageDestination.h:负责写入图片数据。</p>
<p>3.CGImageMetadata.h:图片文件元数据类。</p>
<p>4.CGImageProperties:定义了框架中使用的字符串常量和宏。</p>
<p>5.ImageIOBase.h:预处理逻辑，无需关心。</p>
<h3 id="二、CGImageSource详解"><a href="#二、CGImageSource详解" class="headerlink" title="二、CGImageSource详解"></a>二、CGImageSource详解</h3><pre><code>CGImageSource类的主要作用是用来读取图片数据，在平时开发中，关于图片我们使用的最多的可能是UIImage类，UIImage是iOS系统UI系统中用于构建图像对象的类，但是其中只有图像数据，实际上一个图片文件中存储的除了图片数据外，还有一些地理位置、设备类型、时间等信息，除此之外，一个图片文件中可能存储的也不只一张图像(例如gif文件)。CGImageSource就是这样的一个抽象图片数据示例，从其中可以获取到我们所关心的所有数据。

读取图片文件数据，并将其展示在视图的简单代码示例如下：
</code></pre><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取图片文件路径</span></span><br><span class="line"><span class="built_in">NSString</span> * path = [[<span class="built_in">NSBundle</span> mainBundle]pathForResource:<span class="string">@"timg"</span> ofType:<span class="string">@"jpeg"</span>];</span><br><span class="line"><span class="built_in">NSURL</span> * url = [<span class="built_in">NSURL</span> fileURLWithPath:path];</span><br><span class="line"><span class="built_in">CGImageRef</span> myImage = <span class="literal">NULL</span>;</span><br><span class="line"><span class="built_in">CGImageSourceRef</span> myImageSource;</span><br><span class="line"><span class="comment">//通过文件路径创建CGImageSource对象</span></span><br><span class="line">myImageSource = <span class="built_in">CGImageSourceCreateWithURL</span>((<span class="built_in">CFURLRef</span>)url, <span class="literal">NULL</span>);</span><br><span class="line"><span class="comment">//获取第一张图片</span></span><br><span class="line">myImage = <span class="built_in">CGImageSourceCreateImageAtIndex</span>(myImageSource,</span><br><span class="line">                                          <span class="number">0</span>,</span><br><span class="line">                                          <span class="literal">NULL</span>);</span><br><span class="line"><span class="built_in">CFRelease</span>(myImageSource);</span><br><span class="line"><span class="built_in">UIImageView</span> * image = [[<span class="built_in">UIImageView</span> alloc]initWithFrame:<span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">200</span>, <span class="number">200</span>)];</span><br><span class="line">image.image = [<span class="built_in">UIImage</span> imageWithCGImage:myImage];</span><br><span class="line">[<span class="keyword">self</span>.view addSubview:image];</span><br></pre></td></tr></table></figure>
<p>上面的示例代码采用的是本地的一个素材文件，当然通过网络图片链接也是可以创建CGImageSource独享的。除了通过URL链接的方式创建对象，ImageIO框架中还提供了两种方法，解析如下：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//通过数据提供器创建CGImageSource对象</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">CGDataProviderRef是CoreGraphics框架中的一个数据读取类，其也可以通过Data数据，URL和文件名来创建</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="built_in">CGImageSourceRef</span> __<span class="keyword">nullable</span> <span class="built_in">CGImageSourceCreateWithDataProvider</span>(<span class="built_in">CGDataProviderRef</span> __<span class="keyword">nonnull</span> provider, <span class="built_in">CFDictionaryRef</span> __<span class="keyword">nullable</span> options);</span><br><span class="line"><span class="comment">//通过Data数据创建CGImageSource对象</span></span><br><span class="line"><span class="built_in">CGImageSourceRef</span> __<span class="keyword">nullable</span> <span class="built_in">CGImageSourceCreateWithData</span>(<span class="built_in">CFDataRef</span> __<span class="keyword">nonnull</span> data, <span class="built_in">CFDictionaryRef</span> __<span class="keyword">nullable</span> options);</span><br></pre></td></tr></table></figure>
<p>需要注意，上面所提到的所有创建CGImageSource的方法中都可以传入一个CFDictionaryRef类型的字典，可以配置的键值意义如下：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">设置一个预期的图片文件格式，需要设置为字符串类型的值</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImageSourceTypeIdentifierHint;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">设置是否以解码的方式读取图片数据 默认为kCFBooleanTrue</span></span><br><span class="line"><span class="comment">如果设置为true，在读取数据时就进行解码 如果为false 则在渲染时才进行解码</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImageSourceShouldCache;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">返回CGImage对象时是否允许使用浮点值 默认为kCFBooleanFalse</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImageSourceShouldAllowFloa;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">设置如果不存在缩略图则创建一个缩略图，缩略图的尺寸受开发者设置影响，如果不设置尺寸极限，则为图片本身大小</span></span><br><span class="line"><span class="comment">默认为kCFBooleanFalse</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImageSourceCreateThumbnailFromImageIfAbsent;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">设置是否创建缩略图，无论原图像有没有包含缩略图kCFBooleanFalse</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImageSourceCreateThumbnailFromImageAlways;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">设置缩略图的宽高尺寸 需要设置为CFNumber值</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImageSourceThumbnailMaxPixelSize;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">设置缩略图是否进行Transfrom变换</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImageSourceCreateThumbnailWithTransform;</span><br></pre></td></tr></table></figure>
<p>CGImageSource类中其他方法解析如下：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取CGImageSource类在CoreFundation框架中的id</span></span><br><span class="line"><span class="built_in">CFTypeID</span> <span class="built_in">CGImageSourceGetTypeID</span> (<span class="keyword">void</span>);</span><br><span class="line"><span class="comment">//获取所支持的图片格式数组</span></span><br><span class="line"><span class="built_in">CFArrayRef</span> __<span class="keyword">nonnull</span> <span class="built_in">CGImageSourceCopyTypeIdentifiers</span>(<span class="keyword">void</span>);</span><br><span class="line"><span class="comment">//获取CGImageSource对象的图片格式</span></span><br><span class="line"><span class="built_in">CFStringRef</span> __<span class="keyword">nullable</span> <span class="built_in">CGImageSourceGetType</span>(<span class="built_in">CGImageSourceRef</span> __<span class="keyword">nonnull</span> isrc);</span><br><span class="line"><span class="comment">//获取CGImageSource中的图片张数 不包括缩略图</span></span><br><span class="line">size_t <span class="built_in">CGImageSourceGetCount</span>(<span class="built_in">CGImageSourceRef</span> __<span class="keyword">nonnull</span> isrc);</span><br><span class="line"><span class="comment">//获取CGImageSource的文件信息</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">字典参数可配置的键值对与创建CGImageSource所传参数意义一致</span></span><br><span class="line"><span class="comment">返回的字典中的键值意义后面介绍</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="built_in">CFDictionaryRef</span> __<span class="keyword">nullable</span> <span class="built_in">CGImageSourceCopyProperties</span>(<span class="built_in">CGImageSourceRef</span> __<span class="keyword">nonnull</span> isrc, <span class="built_in">CFDictionaryRef</span> __<span class="keyword">nullable</span> options);</span><br><span class="line"><span class="comment">//获取CGImageSource中某个图像的附加数据</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">index参数设置获取第几张图像 options参数可配置的键值对与创建CGImageSource所传参数意义一致</span></span><br><span class="line"><span class="comment">返回的字典中的键值意义后面介绍</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="built_in">CFDictionaryRef</span> __<span class="keyword">nullable</span> <span class="built_in">CGImageSourceCopyPropertiesAtIndex</span>(<span class="built_in">CGImageSourceRef</span> __<span class="keyword">nonnull</span> isrc, size_t index, <span class="built_in">CFDictionaryRef</span> __<span class="keyword">nullable</span> options);</span><br><span class="line"><span class="comment">//获取图片的元数据信息 CGImageMetadataRef类是图像原数据的抽象</span></span><br><span class="line"><span class="built_in">CGImageMetadataRef</span> __<span class="keyword">nullable</span> <span class="built_in">CGImageSourceCopyMetadataAtIndex</span> (<span class="built_in">CGImageSourceRef</span> __<span class="keyword">nonnull</span> isrc, size_t index, <span class="built_in">CFDictionaryRef</span> __<span class="keyword">nullable</span> options);</span><br><span class="line"><span class="comment">//获取CGImageSource中的图片数据</span></span><br><span class="line"><span class="built_in">CGImageRef</span> __<span class="keyword">nullable</span> <span class="built_in">CGImageSourceCreateImageAtIndex</span>(<span class="built_in">CGImageSourceRef</span> __<span class="keyword">nonnull</span> isrc, size_t index, <span class="built_in">CFDictionaryRef</span> __<span class="keyword">nullable</span> options);</span><br><span class="line"><span class="comment">//删除一个指定索引图像的缓存</span></span><br><span class="line"><span class="keyword">void</span> <span class="built_in">CGImageSourceRemoveCacheAtIndex</span>(<span class="built_in">CGImageSourceRef</span> __<span class="keyword">nonnull</span> isrc, size_t index);</span><br><span class="line"><span class="comment">//获取某一帧图片的缩略图</span></span><br><span class="line"><span class="built_in">CGImageRef</span> __<span class="keyword">nullable</span> <span class="built_in">CGImageSourceCreateThumbnailAtIndex</span>(<span class="built_in">CGImageSourceRef</span> __<span class="keyword">nonnull</span> isrc, size_t index, <span class="built_in">CFDictionaryRef</span> __<span class="keyword">nullable</span> options);</span><br><span class="line"><span class="comment">//创建一个空的CGImageSource容器，逐步加载大图片</span></span><br><span class="line"><span class="built_in">CGImageSourceRef</span> __<span class="keyword">nonnull</span> <span class="built_in">CGImageSourceCreateIncremental</span>(<span class="built_in">CFDictionaryRef</span> __<span class="keyword">nullable</span> options);</span><br><span class="line"><span class="comment">//使用新的数据更新CGImageSource容器</span></span><br><span class="line"><span class="keyword">void</span> <span class="built_in">CGImageSourceUpdateData</span>(<span class="built_in">CGImageSourceRef</span> __<span class="keyword">nonnull</span> isrc, <span class="built_in">CFDataRef</span> __<span class="keyword">nonnull</span> data, <span class="keyword">bool</span> final);</span><br><span class="line"><span class="comment">//更新数据提供器来填充CGImageSource容器</span></span><br><span class="line"><span class="keyword">void</span> <span class="built_in">CGImageSourceUpdateDataProvider</span>(<span class="built_in">CGImageSourceRef</span> __<span class="keyword">nonnull</span> isrc, <span class="built_in">CGDataProviderRef</span> __<span class="keyword">nonnull</span> provider, <span class="keyword">bool</span> final);</span><br><span class="line"><span class="comment">//获取当前CGImageSource的状态</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">CGImageSourceStatus枚举意义：</span></span><br><span class="line"><span class="comment">typedef CF_ENUM(int32_t, CGImageSourceStatus) &#123;</span></span><br><span class="line"><span class="comment">    kCGImageStatusUnexpectedEOF = -5, //文件结尾出错</span></span><br><span class="line"><span class="comment">    kCGImageStatusInvalidData = -4,   //数据无效</span></span><br><span class="line"><span class="comment">    kCGImageStatusUnknownType = -3,   //未知的图片类型</span></span><br><span class="line"><span class="comment">    kCGImageStatusReadingHeader = -2, //读标题过程中</span></span><br><span class="line"><span class="comment">    kCGImageStatusIncomplete = -1,    //操作不完整</span></span><br><span class="line"><span class="comment">    kCGImageStatusComplete = 0        //操作完整</span></span><br><span class="line"><span class="comment">&#125;;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="built_in">CGImageSourceStatus</span> <span class="built_in">CGImageSourceGetStatus</span>(<span class="built_in">CGImageSourceRef</span> __<span class="keyword">nonnull</span> isrc);</span><br><span class="line"><span class="comment">//同上，获取某一个图片的状态</span></span><br><span class="line"><span class="built_in">CGImageSourceStatus</span> <span class="built_in">CGImageSourceGetStatusAtIndex</span>(<span class="built_in">CGImageSourceRef</span> __<span class="keyword">nonnull</span> isrc, size_t index);</span><br></pre></td></tr></table></figure>
<h3 id="三、CGImageDestination详解"><a href="#三、CGImageDestination详解" class="headerlink" title="三、CGImageDestination详解"></a>三、CGImageDestination详解</h3><pre><code>CGImageSource是图片文件数据的抽象对象，而CGImageDestination的作用则是将抽象的图片数据写入指定的目标中。将图片写成文件示例如下：
</code></pre><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建存储路径</span></span><br><span class="line"><span class="built_in">NSArray</span> *paths=<span class="built_in">NSSearchPathForDirectoriesInDomains</span>(<span class="built_in">NSDocumentDirectory</span>,<span class="built_in">NSUserDomainMask</span>,<span class="literal">YES</span>);</span><br><span class="line"><span class="built_in">NSString</span> *newPath = [paths.firstObject stringByAppendingPathComponent:[<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"image.png"</span>]];</span><br><span class="line"><span class="built_in">CFURLRef</span> URL =  <span class="built_in">CFURLCreateWithFileSystemPath</span> (</span><br><span class="line">                                   kCFAllocatorDefault,</span><br><span class="line">                                   (<span class="built_in">CFStringRef</span>)newPath,</span><br><span class="line">                                   kCFURLPOSIXPathStyle, </span><br><span class="line">                                   <span class="literal">false</span>);</span><br><span class="line"><span class="comment">//创建CGImageDestination对象</span></span><br><span class="line"><span class="built_in">CGImageDestinationRef</span> myImageDest = <span class="built_in">CGImageDestinationCreateWithURL</span>(URL,<span class="built_in">CFSTR</span>(<span class="string">"public.png"</span>), <span class="number">1</span>, <span class="literal">NULL</span>);</span><br><span class="line"><span class="built_in">UIImage</span> * image = [<span class="built_in">UIImage</span> imageNamed:<span class="string">@"timg.jpeg"</span>];</span><br><span class="line"><span class="comment">//写入图片</span></span><br><span class="line"><span class="built_in">CGImageDestinationAddImage</span>(myImageDest, image.CGImage, <span class="literal">NULL</span>);</span><br><span class="line"><span class="built_in">CGImageDestinationFinalize</span>(myImageDest);</span><br><span class="line"><span class="built_in">CFRelease</span>(myImageDest);</span><br></pre></td></tr></table></figure>
<p>同样，除了可以直接将图片数据写入url外，也可以Data数据或数据消费器，方法如下：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//将图片数据写入数据消费者</span></span><br><span class="line"><span class="built_in">CGImageDestinationRef</span> __<span class="keyword">nullable</span> <span class="built_in">CGImageDestinationCreateWithDataConsumer</span>(<span class="built_in">CGDataConsumerRef</span> __<span class="keyword">nonnull</span> consumer, <span class="built_in">CFStringRef</span> __<span class="keyword">nonnull</span> type, size_t count, <span class="built_in">CFDictionaryRef</span> __<span class="keyword">nullable</span> options);</span><br><span class="line"><span class="comment">//将图片数据写入Data</span></span><br><span class="line"><span class="built_in">CGImageDestinationRef</span> __<span class="keyword">nullable</span> <span class="built_in">CGImageDestinationCreateWithData</span>(<span class="built_in">CFMutableDataRef</span> __<span class="keyword">nonnull</span> data, <span class="built_in">CFStringRef</span> __<span class="keyword">nonnull</span> type, size_t count, <span class="built_in">CFDictionaryRef</span> __<span class="keyword">nullable</span> options);</span><br></pre></td></tr></table></figure>
<p>需要注意，上面方法的type参数设置写入数据的文件格式，必须为ImageIO框架所支持的格式，前面有方法可以获取所有支持的格式，还有一点，这3个写入方法的中options参数目前并没有什么作用，其是留给未来使用的，目前传入NULL即可。</p>
<p>CGImageDestination类中的其他方法解析如下：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取CGImageDestination的CFTypeID</span></span><br><span class="line"><span class="built_in">CFTypeID</span> <span class="built_in">CGImageDestinationGetTypeID</span>(<span class="keyword">void</span>);</span><br><span class="line"><span class="comment">//获取CGImageDestination所支持的图片文件类型</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">目前支持如下：iOS10.1</span></span><br><span class="line"><span class="comment"> (</span></span><br><span class="line"><span class="comment">    "public.jpeg",</span></span><br><span class="line"><span class="comment">    "public.png",</span></span><br><span class="line"><span class="comment">    "com.compuserve.gif",</span></span><br><span class="line"><span class="comment">    "public.tiff",</span></span><br><span class="line"><span class="comment">    "public.jpeg-2000",</span></span><br><span class="line"><span class="comment">    "com.microsoft.ico",</span></span><br><span class="line"><span class="comment">    "com.microsoft.bmp",</span></span><br><span class="line"><span class="comment">    "com.adobe.photoshop-image",</span></span><br><span class="line"><span class="comment">    "com.adobe.pdf",</span></span><br><span class="line"><span class="comment">    "com.truevision.tga-image",</span></span><br><span class="line"><span class="comment">    "com.ilm.openexr-image",</span></span><br><span class="line"><span class="comment">    "public.pbm",</span></span><br><span class="line"><span class="comment">    "public.pvr",</span></span><br><span class="line"><span class="comment">    "org.khronos.astc",</span></span><br><span class="line"><span class="comment">    "org.khronos.ktx",</span></span><br><span class="line"><span class="comment">    "com.microsoft.dds",</span></span><br><span class="line"><span class="comment">    "com.apple.rjpeg"</span></span><br><span class="line"><span class="comment">)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="built_in">CFArrayRef</span> __<span class="keyword">nonnull</span> <span class="built_in">CGImageDestinationCopyTypeIdentifiers</span>(<span class="keyword">void</span>);</span><br><span class="line"><span class="comment">//设置图片文件属性</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">可以设置的键值对意义如下：</span></span><br><span class="line"><span class="comment">const CFStringRef kCGImageDestinationLossyCompressionQuality; //设置压缩质量 0-1之间的cfnumberref值</span></span><br><span class="line"><span class="comment">const CFStringRef kCGImageDestinationBackgroundColor;  //将图片数据写为无alpha通道时的默认背景色 cgcolor值</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">void</span> <span class="built_in">CGImageDestinationSetProperties</span>(<span class="built_in">CGImageDestinationRef</span> __<span class="keyword">nonnull</span> idst, <span class="built_in">CFDictionaryRef</span> __<span class="keyword">nullable</span> properties);</span><br><span class="line"><span class="comment">//向CGImageDestination中添加一张图片 其中的option参数意义和上面一致，设置此图片的质量与无alpha默认背景色</span></span><br><span class="line"><span class="keyword">void</span> <span class="built_in">CGImageDestinationAddImage</span>(<span class="built_in">CGImageDestinationRef</span> __<span class="keyword">nonnull</span> idst, <span class="built_in">CGImageRef</span> __<span class="keyword">nonnull</span> image, <span class="built_in">CFDictionaryRef</span> __<span class="keyword">nullable</span> properties);</span><br><span class="line"><span class="comment">//通过CGImageSource对象来向CGImageDestination中添加图片</span></span><br><span class="line"><span class="keyword">void</span> <span class="built_in">CGImageDestinationAddImageFromSource</span>(<span class="built_in">CGImageDestinationRef</span> __<span class="keyword">nonnull</span> idst, <span class="built_in">CGImageSourceRef</span> __<span class="keyword">nonnull</span> isrc, size_t index, <span class="built_in">CFDictionaryRef</span> __<span class="keyword">nullable</span> properties);</span><br><span class="line"><span class="comment">//进行写入操作 执行此方法后 不可以在写入其他信息</span></span><br><span class="line"><span class="keyword">bool</span> <span class="built_in">CGImageDestinationFinalize</span>(<span class="built_in">CGImageDestinationRef</span> __<span class="keyword">nonnull</span> idst);</span><br><span class="line"><span class="comment">//添加图片元信息</span></span><br><span class="line"><span class="keyword">void</span> <span class="built_in">CGImageDestinationAddImageAndMetadata</span>(<span class="built_in">CGImageDestinationRef</span> __<span class="keyword">nonnull</span> idst, <span class="built_in">CGImageRef</span> __<span class="keyword">nonnull</span> image, <span class="built_in">CGImageMetadataRef</span> __<span class="keyword">nullable</span> metadata, <span class="built_in">CFDictionaryRef</span> __<span class="keyword">nullable</span> options);</span><br><span class="line"><span class="comment">//将CGImageSource信息拷贝进CGImageDestination</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">options参数可以用来添加元信息</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">bool</span> <span class="built_in">CGImageDestinationCopyImageSource</span>(<span class="built_in">CGImageDestinationRef</span> __<span class="keyword">nonnull</span> idst, <span class="built_in">CGImageSourceRef</span> __<span class="keyword">nonnull</span> isrc, <span class="built_in">CFDictionaryRef</span> __<span class="keyword">nullable</span> options, __<span class="keyword">nullable</span> <span class="built_in">CFErrorRef</span> * __<span class="keyword">nullable</span> err);</span><br></pre></td></tr></table></figure>
<p>上面列举的方法中，CGImageDestinationCopyImageSource()方法中的options参数可以添加一些图片的元信息，可以设置的键值对意义如下：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//设置元信息 需要设置为CGImageMetadataRef对象</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImageDestinationMetadata;</span><br><span class="line"><span class="comment">//是否将CGImageSource的元信息信息合并操作 默认为kCFBooleanFalse</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImageDestinationMergeMetadata;</span><br><span class="line"><span class="comment">//XMP数据是否不被写入 默认为kCFBooleanFalse</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImageMetadataShouldExcludeXMP;</span><br><span class="line"><span class="comment">//GPS信息是否不被写入 默认为kCFBooleanFalse</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImageMetadataShouldExcludeGPS;</span><br><span class="line"><span class="comment">//更新元数据的时间值 需要设置为CFStringRef或者CFDateRef</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImageDestinationDateTime;</span><br><span class="line"><span class="comment">//更新元数据的方向值 需要设置为NSNumber1-8</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImageDestinationOrientation;</span><br></pre></td></tr></table></figure>
<h3 id="四、关于CGImageMetadata"><a href="#四、关于CGImageMetadata" class="headerlink" title="四、关于CGImageMetadata"></a>四、关于CGImageMetadata</h3><pre><code>前面我们很多次提到元数据，CGImageMetadata类就是元数据的抽象，其中封装了一些方法供开发者读取或写入元数据信息。奇怪的是Apple的官方文档与API文档中并没有CGImageMetadata的介绍与解释，博客中本部分的内容，多出自我的理解，有疏漏和不对的地方，清楚的朋友可以指点与建议。

前边介绍，CGImageSource中有获取图片元数据的方法，CGImageDestination中也有写入图片元数据的方法，元数据中抽象出的CGImageMetadataTag是对具体数据内容的封装。CGImageMetadata解析如下：
</code></pre><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取CGImageMetadata类的CFTypeID</span></span><br><span class="line"><span class="built_in">CFTypeID</span> <span class="built_in">CGImageMetadataGetTypeID</span>(<span class="keyword">void</span>);</span><br><span class="line"><span class="comment">//创建一个空的可变的CGImageMetadata对象</span></span><br><span class="line"><span class="built_in">CGMutableImageMetadataRef</span> __<span class="keyword">nonnull</span> <span class="built_in">CGImageMetadataCreateMutable</span>(<span class="keyword">void</span>);</span><br><span class="line"><span class="comment">//拷贝一个可变的CGImageMetadata对象</span></span><br><span class="line"><span class="built_in">CGMutableImageMetadataRef</span> __<span class="keyword">nullable</span> <span class="built_in">CGImageMetadataCreateMutableCopy</span>(<span class="built_in">CGImageMetadataRef</span> __<span class="keyword">nonnull</span> metadata);</span><br><span class="line"><span class="comment">//获取CGImageMetadataTag类的CFTypeID</span></span><br><span class="line"><span class="built_in">CFTypeID</span> <span class="built_in">CGImageMetadataTagGetTypeID</span>(<span class="keyword">void</span>);</span><br><span class="line"><span class="comment">//创建一个CGImageMetadataTag对象</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">这个方法比较复杂</span></span><br><span class="line"><span class="comment">xmlns参数设置命名空间</span></span><br><span class="line"><span class="comment">prefix参数设置命名空间的缩写或前缀</span></span><br><span class="line"><span class="comment">name参数设置CGImageMetadataTag的名称</span></span><br><span class="line"><span class="comment">type参数设置CGImageMetadataTag对应值的类型</span></span><br><span class="line"><span class="comment">value参数设置CGImageMetadataTag的对应值</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="built_in">CGImageMetadataTagRef</span> __<span class="keyword">nullable</span> <span class="built_in">CGImageMetadataTagCreate</span> (<span class="built_in">CFStringRef</span> __<span class="keyword">nonnull</span> xmlns, <span class="built_in">CFStringRef</span> __<span class="keyword">nullable</span> prefix, <span class="built_in">CFStringRef</span> __<span class="keyword">nonnull</span> name, <span class="built_in">CGImageMetadataType</span> type, <span class="built_in">CFTypeRef</span> __<span class="keyword">nonnull</span> value);</span><br></pre></td></tr></table></figure>
<p>上面创建CGImageMetadataTag的方法中，xmlns设置命名空间，必须使用一个预定义的命名空间或者自定义的命名空间，对于自定义的命名空间，必须遵守Adobe的XMP规范。一些共用的命名空间定义如下：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Exif命名空间</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImageMetadataNamespaceExif;</span><br><span class="line"><span class="comment">//ExifAux命名空间</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImageMetadataNamespaceExifAux;</span><br><span class="line"><span class="comment">//ExifEX命名空间</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImageMetadataNamespaceExifEX;</span><br><span class="line"><span class="comment">//DublineCore命名空间</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImageMetadataNamespaceDublinCore;</span><br><span class="line"><span class="comment">//IPTCCore命名空间</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImageMetadataNamespaceIPTCCore;</span><br><span class="line"><span class="comment">//Photoshop命名空间</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImageMetadataNamespacePhotoshop;</span><br><span class="line"><span class="comment">//TIFF命名空间</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImageMetadataNamespaceTIFF;</span><br><span class="line"><span class="comment">//XMPBasic命名空间</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImageMetadataNamespaceXMPBasic;</span><br><span class="line"><span class="comment">//XMPRights命名空间</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImageMetadataNamespaceXMPRights;</span><br></pre></td></tr></table></figure>
<p>上面创建CGImageMetadataTag的方法中prefix设置命名空间缩写或前缀，同样一些公用的前缀定义如下：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Exif命名空间前缀</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImageMetadataPrefixExif;</span><br><span class="line"><span class="comment">//ExifAux命名空间前缀</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImageMetadataPrefixExifAux;</span><br><span class="line"><span class="comment">//ExifEX命名空间前缀</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImageMetadataPrefixExifEX;</span><br><span class="line"><span class="comment">//DublinCore命名空间前缀</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImageMetadataPrefixDublinCore;</span><br><span class="line"><span class="comment">//IPCCore命名空间前缀</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImageMetadataPrefixIPTCCore;</span><br><span class="line"><span class="comment">//Photoshop命名空间前缀</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImageMetadataPrefixPhotoshop;</span><br><span class="line"><span class="comment">//TIFF命名空间前缀</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImageMetadataPrefixTIFF;</span><br><span class="line"><span class="comment">//XMPBasic命名空间前缀</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImageMetadataPrefixXMPBasic;</span><br><span class="line"><span class="comment">//XMPRights命名空间前缀</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImageMetadataPrefixXMPRights;</span><br></pre></td></tr></table></figure>
<p>上面创建CGImageMetadataTag的方法中type设置对应值的类型，其是一个CGImageMetadataType类型的枚举，意义如下：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="built_in">CF_ENUM</span>(int32_t, <span class="built_in">CGImageMetadataType</span>) &#123;</span><br><span class="line">    <span class="comment">//无效的数据类型</span></span><br><span class="line">    kCGImageMetadataTypeInvalid = <span class="number">-1</span>,</span><br><span class="line">    <span class="comment">//基本的CFType类型</span></span><br><span class="line">    kCGImageMetadataTypeDefault = <span class="number">0</span>,</span><br><span class="line">    <span class="comment">//字符串类型</span></span><br><span class="line">    kCGImageMetadataTypeString = <span class="number">1</span>,</span><br><span class="line">    <span class="comment">//无需集合类型</span></span><br><span class="line">    kCGImageMetadataTypeArrayUnordered = <span class="number">2</span>,</span><br><span class="line">    <span class="comment">//有序集合类型</span></span><br><span class="line">    kCGImageMetadataTypeArrayOrdered = <span class="number">3</span>,</span><br><span class="line">    <span class="comment">//有序阵列</span></span><br><span class="line">    kCGImageMetadataTypeAlternateArray = <span class="number">4</span>,</span><br><span class="line">    <span class="comment">//特殊的数组 其中元素进行不同的本地化</span></span><br><span class="line">    kCGImageMetadataTypeAlternateText = <span class="number">5</span>,</span><br><span class="line">    <span class="comment">//结构类型 如字典</span></span><br><span class="line">    kCGImageMetadataTypeStructure = <span class="number">6</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>获取到CGImageMetadataTag后，可以通过如下方法来获取其中封装的信息：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取标签的命名空间</span></span><br><span class="line"><span class="built_in">CFStringRef</span> __<span class="keyword">nullable</span> <span class="built_in">CGImageMetadataTagCopyNamespace</span>(<span class="built_in">CGImageMetadataTagRef</span> __<span class="keyword">nonnull</span> tag);</span><br><span class="line"><span class="comment">//获取标签的命名空间前缀</span></span><br><span class="line"><span class="built_in">CFStringRef</span> __<span class="keyword">nullable</span> <span class="built_in">CGImageMetadataTagCopyPrefix</span>(<span class="built_in">CGImageMetadataTagRef</span> __<span class="keyword">nonnull</span> tag);</span><br><span class="line"><span class="comment">//获取标签名称</span></span><br><span class="line"><span class="built_in">CFStringRef</span> __<span class="keyword">nullable</span> <span class="built_in">CGImageMetadataTagCopyName</span>(<span class="built_in">CGImageMetadataTagRef</span> __<span class="keyword">nonnull</span> tag);</span><br><span class="line"><span class="comment">//获取标签的值</span></span><br><span class="line"><span class="built_in">CFTypeRef</span> __<span class="keyword">nullable</span> <span class="built_in">CGImageMetadataTagCopyValue</span>(<span class="built_in">CGImageMetadataTagRef</span> __<span class="keyword">nonnull</span> tag);</span><br><span class="line"><span class="comment">//获取标签值的类型</span></span><br><span class="line"><span class="built_in">CGImageMetadataType</span> <span class="built_in">CGImageMetadataTagGetType</span>(<span class="built_in">CGImageMetadataTagRef</span> __<span class="keyword">nonnull</span> tag);</span><br><span class="line"><span class="comment">//获取标签的Qualifier数组</span></span><br><span class="line"><span class="built_in">CFArrayRef</span> __<span class="keyword">nullable</span> <span class="built_in">CGImageMetadataTagCopyQualifiers</span>(<span class="built_in">CGImageMetadataTagRef</span> __<span class="keyword">nonnull</span> tag);</span><br></pre></td></tr></table></figure>
<p>下面这些方法用于向CGImageMetadata中添加标签或者获取标签：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取CGImageMetadata中的所有标签</span></span><br><span class="line"><span class="built_in">CFArrayRef</span> __<span class="keyword">nullable</span> <span class="built_in">CGImageMetadataCopyTags</span>(<span class="built_in">CGImageMetadataRef</span> __<span class="keyword">nonnull</span> metadata);</span><br><span class="line"><span class="comment">//通过路径查找特殊的标签</span></span><br><span class="line"><span class="built_in">CGImageMetadataTagRef</span> __<span class="keyword">nullable</span> <span class="built_in">CGImageMetadataCopyTagWithPath</span>(<span class="built_in">CGImageMetadataRef</span> __<span class="keyword">nonnull</span> metadata, <span class="built_in">CGImageMetadataTagRef</span> __<span class="keyword">nullable</span> parent, <span class="built_in">CFStringRef</span> __<span class="keyword">nonnull</span> path);</span><br><span class="line"><span class="comment">//通过路径查找特殊标签的值</span></span><br><span class="line"> <span class="built_in">CFStringRef</span> __<span class="keyword">nullable</span> <span class="built_in">CGImageMetadataCopyStringValueWithPath</span>(<span class="built_in">CGImageMetadataRef</span> __<span class="keyword">nonnull</span> metadata, <span class="built_in">CGImageMetadataTagRef</span> __<span class="keyword">nullable</span> parent, <span class="built_in">CFStringRef</span> __<span class="keyword">nonnull</span> path);</span><br><span class="line"><span class="comment">//为一个前缀注册一个命名空间</span></span><br><span class="line"><span class="keyword">bool</span> <span class="built_in">CGImageMetadataRegisterNamespaceForPrefix</span>(<span class="built_in">CGMutableImageMetadataRef</span> __<span class="keyword">nonnull</span> metadata, <span class="built_in">CFStringRef</span> __<span class="keyword">nonnull</span> xmlns, <span class="built_in">CFStringRef</span> __<span class="keyword">nonnull</span> prefix, __<span class="keyword">nullable</span> <span class="built_in">CFErrorRef</span> * __<span class="keyword">nullable</span> err);</span><br><span class="line"><span class="comment">//通过路径为CGImageMetadata设置标签</span></span><br><span class="line"><span class="keyword">bool</span> <span class="built_in">CGImageMetadataSetTagWithPath</span>(<span class="built_in">CGMutableImageMetadataRef</span> __<span class="keyword">nonnull</span> metadata, <span class="built_in">CGImageMetadataTagRef</span> __<span class="keyword">nullable</span> parent, <span class="built_in">CFStringRef</span> __<span class="keyword">nonnull</span> path, <span class="built_in">CGImageMetadataTagRef</span> __<span class="keyword">nonnull</span> tag);</span><br><span class="line"><span class="comment">//通过路径为CGImageMetadata设置标签的值</span></span><br><span class="line"><span class="keyword">bool</span> <span class="built_in">CGImageMetadataSetValueWithPath</span>(<span class="built_in">CGMutableImageMetadataRef</span> __<span class="keyword">nonnull</span> metadata, <span class="built_in">CGImageMetadataTagRef</span> __<span class="keyword">nullable</span> parent, <span class="built_in">CFStringRef</span> __<span class="keyword">nonnull</span> path, <span class="built_in">CFTypeRef</span> __<span class="keyword">nonnull</span> value);</span><br><span class="line"><span class="comment">//通过路径移除一个标签</span></span><br><span class="line"><span class="keyword">bool</span> <span class="built_in">CGImageMetadataRemoveTagWithPath</span>(<span class="built_in">CGMutableImageMetadataRef</span> __<span class="keyword">nonnull</span> metadata,  <span class="built_in">CGImageMetadataTagRef</span> __<span class="keyword">nullable</span> parent, <span class="built_in">CFStringRef</span> __<span class="keyword">nonnull</span> path);</span><br><span class="line"><span class="comment">//对标签进行枚举</span></span><br><span class="line"><span class="keyword">void</span> <span class="built_in">CGImageMetadataEnumerateTagsUsingBlock</span>(<span class="built_in">CGImageMetadataRef</span> __<span class="keyword">nonnull</span> metadata, <span class="built_in">CFStringRef</span> __<span class="keyword">nullable</span> rootPath, <span class="built_in">CFDictionaryRef</span> __<span class="keyword">nullable</span> options, <span class="built_in">CGImageMetadataTagBlock</span> __<span class="keyword">nonnull</span> block);</span><br></pre></td></tr></table></figure>
<h3 id="五、CGImageProperties中定义的字典意义"><a href="#五、CGImageProperties中定义的字典意义" class="headerlink" title="五、CGImageProperties中定义的字典意义"></a>五、CGImageProperties中定义的字典意义</h3><pre><code>前面提到的CGImageSourceCopyProperties方法与CGImageSourceCopyPropertiesAtIndex方法都会返回一个字典，字典中可能包含如下有意义的键：
</code></pre><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//TIFF信息字典</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyTIFFDictionary;</span><br><span class="line">/GIF信息字典</span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyGIFDictionary;</span><br><span class="line"><span class="comment">//JFIF信息字典</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyJFIFDictionary;</span><br><span class="line"><span class="comment">//EXif信息字典</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifDictionary;</span><br><span class="line"><span class="comment">//PNG信息字典</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyPNGDictionary;</span><br><span class="line"><span class="comment">//IPTC信息字典</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCDictionary;</span><br><span class="line"><span class="comment">//GPS信息字典</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyGPSDictionary;</span><br><span class="line"><span class="comment">//原始信息字典</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyRawDictionary;</span><br><span class="line"><span class="comment">//CIFF信息字典</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyCIFFDictionary;</span><br><span class="line"><span class="comment">//佳能相机信息字典</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyMakerCanonDictionary;</span><br><span class="line"><span class="comment">//尼康相机信息字典</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyMakerNikonDictionary;</span><br><span class="line"><span class="comment">//柯尼卡相机信息字典</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyMakerMinoltaDictionary;</span><br><span class="line"><span class="comment">//富士相机信息字典</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyMakerFujiDictionary;</span><br><span class="line"><span class="comment">//奥林巴斯相机信息字典</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyMakerOlympusDictionary;</span><br><span class="line"><span class="comment">//宾得相机信息字典</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyMakerPentaxDictionary;</span><br><span class="line"><span class="comment">//对应Photoshop相片的信息字典</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImageProperty8BIMDictionary;</span><br><span class="line"><span class="comment">//NDG信息字典</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyDNGDictionary ;</span><br><span class="line"><span class="comment">//ExifAux信息字典</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifAuxDictionary;</span><br><span class="line"><span class="comment">//OpenEXR信息字典</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyOpenEXRDictionary;</span><br><span class="line"><span class="comment">//Apple相机信息字典</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyMakerAppleDictionary ;</span><br></pre></td></tr></table></figure>
<p>CGImageSourceCopyProperties方法返回的字典中还可能会有如下一个特殊的键：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//对应文件大小</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyFileSize;</span><br></pre></td></tr></table></figure>
<p>CGImageSourceCopyPropertiesAtIndex方法中可能包含的特殊键：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//像素高度</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyPixelHeight;</span><br><span class="line"><span class="comment">//像素宽度</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyPixelWidth;</span><br><span class="line"><span class="comment">//DPI高度</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyDPIHeight;</span><br><span class="line"><span class="comment">//DPI宽度</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyDPIWidth;</span><br><span class="line"><span class="comment">//颜色位数</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyDepth;</span><br><span class="line"><span class="comment">//图片的显示方向</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">对应Number值</span></span><br><span class="line"><span class="comment"> *   1  =  左上到右下.  </span></span><br><span class="line"><span class="comment"> *   2  =  右上到左下.  </span></span><br><span class="line"><span class="comment"> *   3  =  右下到左上.</span></span><br><span class="line"><span class="comment"> *   4  =  左下到右上.  </span></span><br><span class="line"><span class="comment"> *   5  =  行列置换 左上到右下.  </span></span><br><span class="line"><span class="comment"> *   6  =  行列置换 右上到左下.  </span></span><br><span class="line"><span class="comment"> *   7  =  行列置换 右下到左上.  </span></span><br><span class="line"><span class="comment"> *   8  =  行列置换 左下到右上.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyOrientation;</span><br><span class="line"><span class="comment">//颜色是否支持浮点数</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIsFloat;</span><br><span class="line"><span class="comment">//图像是否包含像素样本</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIsIndexed;</span><br><span class="line"><span class="comment">//图像是否包含alpha通道</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyHasAlpha;</span><br><span class="line"><span class="comment">//图像的颜色模式</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyColorModel;</span><br><span class="line"><span class="comment">//嵌入图片的ICC配置文件名称</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyProfileName;</span><br></pre></td></tr></table></figure>
<p>kCGImagePropertyColorModel键可返回的值有如下几种定义：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//RBG模式</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyColorModelRGB;</span><br><span class="line"><span class="comment">//Gray模式</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyColorModelGray;</span><br><span class="line"><span class="comment">//CMYK模式</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyColorModelCMYK;</span><br><span class="line"><span class="comment">//Lab模式</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyColorModelLab;</span><br></pre></td></tr></table></figure>
<p>kCGImagePropertyTIFFDictionary键可返回的值定义如下：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//图片数据压缩方案</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyTIFFCompression;</span><br><span class="line"><span class="comment">//图片数据的色彩空间</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyTIFFPhotometricInterpretation;</span><br><span class="line"><span class="comment">//文档名称</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyTIFFDocumentName;</span><br><span class="line"><span class="comment">//图片描述</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyTIFFImageDescription;</span><br><span class="line"><span class="comment">//相机设备名</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyTIFFMake;</span><br><span class="line"><span class="comment">//相机设备模式</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyTIFFModel;</span><br><span class="line"><span class="comment">//图片方向</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyTIFFOrientation;</span><br><span class="line"><span class="comment">//横向每个分辨位的像素数</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyTIFFXResolution;</span><br><span class="line"><span class="comment">//纵向每个分辨位的像素数</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyTIFFYResolution;</span><br><span class="line"><span class="comment">//分辨率单位</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyTIFFResolutionUnit;</span><br><span class="line"><span class="comment">//创建图像的软件名称和版本</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyTIFFSoftware;</span><br><span class="line"><span class="comment">//transform函数</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyTIFFTransferFunction;</span><br><span class="line"><span class="comment">//日期时间</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyTIFFDateTime;</span><br><span class="line"><span class="comment">//作者</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyTIFFArtist;</span><br><span class="line"><span class="comment">//创建图片的电脑系统</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyTIFFHostComputer;</span><br><span class="line"><span class="comment">//公司信息</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyTIFFCopyright;</span><br><span class="line"><span class="comment">//图片的白点</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyTIFFWhitePoint;</span><br><span class="line"><span class="comment">//图像的原色色度</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyTIFFPrimaryChromaticities;</span><br><span class="line"><span class="comment">//图片的瓦片宽度</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyTIFFTileWidth;</span><br><span class="line"><span class="comment">//图片的瓦片高度</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyTIFFTileLength;</span><br></pre></td></tr></table></figure>
<p>kCGImagePropertyJFIFDictionary对应的字典中可能包含如下意义的键：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//JFIF版本</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyJFIFVersion;</span><br><span class="line"><span class="comment">//横向像素密度</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyJFIFXDensity;</span><br><span class="line"><span class="comment">//纵向像素密度</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyJFIFYDensity;</span><br><span class="line"><span class="comment">//像素密度单元</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyJFIFDensityUnit;</span><br><span class="line"><span class="comment">//是否是高质量图像版本</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyJFIFIsProgressive;</span><br></pre></td></tr></table></figure>
<p>kCGImagePropertyExifDictionary对应的字典中可能包含如下意义的键 ：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//曝光时间</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifExposureTime;</span><br><span class="line"><span class="comment">//ExifNumber</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifFNumber;</span><br><span class="line"><span class="comment">//曝光程序</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifExposureProgram;</span><br><span class="line"><span class="comment">//每个通道的光谱灵敏度</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifSpectralSensitivity;</span><br><span class="line"><span class="comment">//ISO速度等级</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifISOSpeedRatings;</span><br><span class="line"><span class="comment">//ExifOECF</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifOECF;</span><br><span class="line"><span class="comment">//灵敏类型</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifSensitivityType;</span><br><span class="line"><span class="comment">//输出灵敏标准</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifStandardOutputSensitivity;</span><br><span class="line"><span class="comment">//推荐曝光指数</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifRecommendedExposureIndex;</span><br><span class="line"><span class="comment">//ISO速率</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifISOSpeed;</span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifISOSpeedLatitudeyyy;</span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifISOSpeedLatitudezzz;</span><br><span class="line"><span class="comment">//Exif版本</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifVersion;</span><br><span class="line"><span class="comment">//原始日期时间</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifDateTimeOriginal;</span><br><span class="line"><span class="comment">//数字化日期时间</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifDateTimeDigitized;</span><br><span class="line"><span class="comment">//压缩配置</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifComponentsConfiguration;</span><br><span class="line"><span class="comment">//压缩模式像素位</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifCompressedBitsPerPixel;</span><br><span class="line"><span class="comment">//快门速度值</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifShutterSpeedValue;</span><br><span class="line"><span class="comment">//孔径值</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifApertureValue;</span><br><span class="line"><span class="comment">//亮度值</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifBrightnessValue;</span><br><span class="line"><span class="comment">//曝光偏差值</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifExposureBiasValue;</span><br><span class="line"><span class="comment">//最大光圈值</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifMaxApertureValue;</span><br><span class="line"><span class="comment">//距离</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifSubjectDistance;</span><br><span class="line"><span class="comment">//测光模式</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifMeteringMode;</span><br><span class="line"><span class="comment">//光源</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifLightSource;</span><br><span class="line"><span class="comment">//拍摄时的闪光状态</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifFlash;</span><br><span class="line"><span class="comment">//焦距</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifFocalLength;</span><br><span class="line"><span class="comment">//主体区域</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifSubjectArea;</span><br><span class="line"><span class="comment">//相机制造商指定的信息</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifMakerNote;</span><br><span class="line"><span class="comment">//用户信息</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifUserComment;</span><br><span class="line"><span class="comment">//日期和时间标记的秒分数</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifSubsecTime;</span><br><span class="line"><span class="comment">//原始时间</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifSubsecTimeOriginal;</span><br><span class="line"><span class="comment">//数字时间</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifSubsecTimeDigitized;</span><br><span class="line"><span class="comment">//FlashPix版本信息</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifFlashPixVersion;</span><br><span class="line"><span class="comment">//色彩空间</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifColorSpace;</span><br><span class="line"><span class="comment">//X方向像素</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifPixelXDimension;</span><br><span class="line"><span class="comment">//Y方向像素</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifPixelYDimension;</span><br><span class="line"><span class="comment">//与图像相关的声音文件</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifRelatedSoundFile;</span><br><span class="line"><span class="comment">//FlashEnergy</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifFlashEnergy;</span><br><span class="line"><span class="comment">//FrequencyResponse</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifSpatialFrequencyResponse;</span><br><span class="line"><span class="comment">//像素数目</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifFocalPlaneXResolution;</span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifFocalPlaneYResolution;</span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifFocalPlaneResolutionUnit;</span><br><span class="line"><span class="comment">//图像主体的位置</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifSubjectLocation;</span><br><span class="line"><span class="comment">//选择的曝光指数</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifExposureIndex;</span><br><span class="line"><span class="comment">//传感器类型</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifSensingMethod;</span><br><span class="line"><span class="comment">//图像文件源</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifFileSource;</span><br><span class="line"><span class="comment">//场景类型</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifSceneType;</span><br><span class="line"><span class="comment">//CFA模块</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifCFAPattern;</span><br><span class="line"><span class="comment">//对图像数据进行特殊渲染</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifCustomRendered;</span><br><span class="line"><span class="comment">//曝光模式设置</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifExposureMode;</span><br><span class="line"><span class="comment">//白平衡模式</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifWhiteBalance;</span><br><span class="line"><span class="comment">//数字变焦比</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifDigitalZoomRatio;</span><br><span class="line"><span class="comment">//35毫米胶片的等效焦距</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifFocalLenIn35mmFilm;</span><br><span class="line"><span class="comment">//场景捕捉类型（标准，景观，肖像，夜晚）</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifSceneCaptureType;</span><br><span class="line"><span class="comment">//图像增益</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifGainControl;</span><br><span class="line"><span class="comment">//图像对比度</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifContrast;</span><br><span class="line"><span class="comment">//图像饱和度</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifSaturation;</span><br><span class="line"><span class="comment">//图像锐度</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifSharpness;</span><br><span class="line"><span class="comment">//拍摄条件</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifDeviceSettingDescription;</span><br><span class="line"><span class="comment">//主体距离</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifSubjectDistRange;</span><br><span class="line"><span class="comment">//图像的唯一标识</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifImageUniqueID;</span><br><span class="line"><span class="comment">//相机所有者</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifCameraOwnerName;</span><br><span class="line"><span class="comment">//相机序列号</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifBodySerialNumber;</span><br><span class="line"><span class="comment">//透镜规格信息</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifLensSpecification;</span><br><span class="line"><span class="comment">//透镜制造商名称</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifLensMake;</span><br><span class="line"><span class="comment">//透镜模式</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifLensModel;</span><br><span class="line"><span class="comment">//透镜序列号</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifLensSerialNumber;</span><br><span class="line"><span class="comment">//伽马设置</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifGamma;</span><br></pre></td></tr></table></figure>
<p>kCGImagePropertyExifAuxDictionary对应的字典中可能包含的键定义如下：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//镜头信息</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifAuxLensInfo;</span><br><span class="line"><span class="comment">//镜头模式</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifAuxLensModel;</span><br><span class="line"><span class="comment">//序列号</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifAuxSerialNumber;</span><br><span class="line"><span class="comment">//镜头ID</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifAuxLensID;</span><br><span class="line"><span class="comment">//镜头序列号</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifAuxLensSerialNumber;</span><br><span class="line"><span class="comment">//图片编号</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifAuxImageNumber;</span><br><span class="line"><span class="comment">//闪光补偿</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifAuxFlashCompensation;</span><br><span class="line"><span class="comment">//所有者名称</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifAuxOwnerName;</span><br><span class="line"><span class="comment">//固件信息</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyExifAuxFirmware;</span><br></pre></td></tr></table></figure>
<p>kCGImagePropertyGIFDictionary对应的字典中可能包含的键定义如下：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//动画循环次数</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyGIFLoopCount;</span><br><span class="line"><span class="comment">//两帧之间的延时</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyGIFDelayTime;</span><br><span class="line"><span class="comment">//颜色Map</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyGIFImageColorMap;</span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyGIFHasGlobalColorMap;</span><br><span class="line"><span class="comment">//两帧之间的延时</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyGIFUnclampedDelayTime;</span><br></pre></td></tr></table></figure>
<p>kCGImagePropertyPNGDictionary对应的字典中可能包含的键定义如下：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//PNG伽马值</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyPNGGamma;</span><br><span class="line"><span class="comment">//混合类型</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyPNGInterlaceType;</span><br><span class="line"><span class="comment">//X方向像素数</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyPNGXPixelsPerMeter;</span><br><span class="line"><span class="comment">//Y方向像素数</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyPNGYPixelsPerMeter;</span><br><span class="line"><span class="comment">//RGB意图</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyPNGsRGBIntent;</span><br><span class="line"><span class="comment">//色度</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyPNGChromaticities;</span><br><span class="line"><span class="comment">//作者</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyPNGAuthor;</span><br><span class="line"><span class="comment">//公司</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyPNGCopyright;</span><br><span class="line"><span class="comment">//创建时间</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyPNGCreationTime;</span><br><span class="line"><span class="comment">//描述</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyPNGDescription;</span><br><span class="line"><span class="comment">//最后修改日期时间</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyPNGModificationTime;</span><br><span class="line"><span class="comment">//软件</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyPNGSoftware;</span><br><span class="line"><span class="comment">//标题</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyPNGTitle;</span><br><span class="line"><span class="comment">//动画循环次数</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyAPNGLoopCount;</span><br><span class="line"><span class="comment">//两帧之间的延时</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyAPNGDelayTime;</span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyAPNGUnclampedDelayTime;</span><br></pre></td></tr></table></figure>
<p>kCGImagePropertyGPSDictionary对应的字典中可能包含的键定义如下：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//GPS版本</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyGPSVersion;</span><br><span class="line"><span class="comment">//纬度是南纬或北纬</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyGPSLatitudeRef;</span><br><span class="line"><span class="comment">//纬度</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyGPSLatitude;</span><br><span class="line"><span class="comment">//经度是东经或西经</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyGPSLongitudeRef;</span><br><span class="line"><span class="comment">//经度</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyGPSLongitude;</span><br><span class="line"><span class="comment">//海拔标准</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyGPSAltitudeRef;</span><br><span class="line"><span class="comment">//海拔高度</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyGPSAltitude;</span><br><span class="line"><span class="comment">//时间戳</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyGPSTimeStamp;</span><br><span class="line"><span class="comment">//测量GPS的卫星</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyGPSSatellites;</span><br><span class="line"><span class="comment">//GPS状态</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyGPSStatus;</span><br><span class="line"><span class="comment">//测量模式</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyGPSMeasureMode;</span><br><span class="line"><span class="comment">//精度数据</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyGPSDOP;</span><br><span class="line"><span class="comment">//速度标准</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyGPSSpeedRef;</span><br><span class="line"><span class="comment">//速度</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyGPSSpeed;</span><br><span class="line"><span class="comment">//运动方向参考</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyGPSTrackRef;</span><br><span class="line"><span class="comment">//运动方向</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyGPSTrack;</span><br><span class="line"><span class="comment">//位置方向参考</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyGPSImgDirectionRef;</span><br><span class="line"><span class="comment">//位置方向</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyGPSImgDirection;</span><br><span class="line"><span class="comment">//地图测量数据</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyGPSMapDatum;</span><br><span class="line"><span class="comment">//地理纬度南纬或北纬</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyGPSDestLatitudeRef;</span><br><span class="line"><span class="comment">//地理纬度</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyGPSDestLatitude;</span><br><span class="line"><span class="comment">//地理经度 东经或西经</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyGPSDestLongitudeRef;</span><br><span class="line"><span class="comment">//地理经度</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyGPSDestLongitude;</span><br><span class="line"><span class="comment">//方位参照</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyGPSDestBearingRef;</span><br><span class="line"><span class="comment">//地理方位</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyGPSDestBearing;</span><br><span class="line"><span class="comment">//距离参照</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyGPSDestDistanceRef;</span><br><span class="line"><span class="comment">//距离</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyGPSDestDistance;</span><br><span class="line"><span class="comment">//查找地理位置的方法</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyGPSProcessingMethod;</span><br><span class="line"><span class="comment">//GPS地区名</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyGPSAreaInformation;</span><br><span class="line"><span class="comment">//日期时间</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyGPSDateStamp;</span><br><span class="line"><span class="comment">//校正信息</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyGPSDifferental;</span><br><span class="line"><span class="comment">//错误信息</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyGPSHPositioningError;</span><br></pre></td></tr></table></figure>
<p>kCGImagePropertyIPTCDictionary对应的字典中可能包含的键定义如下：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//对象类型</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCObjectTypeReference;</span><br><span class="line"><span class="comment">//对象属性</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCObjectAttributeReference;</span><br><span class="line"><span class="comment">//对象名称</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCObjectName;</span><br><span class="line"><span class="comment">//编辑状态</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCEditStatus;</span><br><span class="line"><span class="comment">//更新状态</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCEditorialUpdate;</span><br><span class="line"><span class="comment">//紧急等级</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCUrgency;</span><br><span class="line"><span class="comment">//主体</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCSubjectReference;</span><br><span class="line"><span class="comment">//类别</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCCategory;</span><br><span class="line"><span class="comment">//补充类别</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCSupplementalCategory;</span><br><span class="line"><span class="comment">//Fixture标识</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCFixtureIdentifier;</span><br><span class="line"><span class="comment">//关键字</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCKeywords;</span><br><span class="line"><span class="comment">//内容定位码</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCContentLocationCode;</span><br><span class="line"><span class="comment">//内容位置名称</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCContentLocationName;</span><br><span class="line"><span class="comment">//图像使用的最早日期</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCReleaseDate;</span><br><span class="line"><span class="comment">//图像使用的最早时间</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCReleaseTime;</span><br><span class="line"><span class="comment">//最后一次使用日期</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCExpirationDate;</span><br><span class="line"><span class="comment">//最后一次使用时间</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCExpirationTime;</span><br><span class="line"><span class="comment">//图像使用的特别说明</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCSpecialInstructions;</span><br><span class="line"><span class="comment">//建议行为</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCActionAdvised;</span><br><span class="line"><span class="comment">//服务参考</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCReferenceService;</span><br><span class="line"><span class="comment">//日期参考</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCReferenceDate;</span><br><span class="line"><span class="comment">//参考码</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCReferenceNumber;</span><br><span class="line"><span class="comment">//创建日期</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCDateCreated;</span><br><span class="line"><span class="comment">//创建时间</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCTimeCreated;</span><br><span class="line"><span class="comment">//数字创建日期</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCDigitalCreationDate;</span><br><span class="line"><span class="comment">//数字创建时间</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCDigitalCreationTime;</span><br><span class="line"><span class="comment">//原始程序</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCOriginatingProgram;</span><br><span class="line"><span class="comment">//程序版本</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCProgramVersion;</span><br><span class="line">图像的编辑周期（早晨，晚上或两者）。</span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCObjectCycle;</span><br><span class="line"><span class="comment">//不想创建者名称</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCByline;</span><br><span class="line"><span class="comment">//图像创建标题</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCBylineTitle;</span><br><span class="line"><span class="comment">//城市信息</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCCity;</span><br><span class="line"><span class="comment">//城市内位置</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCSubLocation;</span><br><span class="line"><span class="comment">//省份</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCProvinceState;</span><br><span class="line"><span class="comment">//国家编码</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCCountryPrimaryLocationCode;</span><br><span class="line"><span class="comment">//国家名称</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCCountryPrimaryLocationName;</span><br><span class="line"><span class="comment">//OriginalTransmission参考</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCOriginalTransmissionReference;</span><br><span class="line"><span class="comment">//图像内容摘要</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCHeadline;</span><br><span class="line"><span class="comment">//提供图像服务的名称</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCCredit;</span><br><span class="line"><span class="comment">//图像源</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCSource;</span><br><span class="line"><span class="comment">//公司提示</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCCopyrightNotice;</span><br><span class="line"><span class="comment">//联系人</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCContact;</span><br><span class="line"><span class="comment">//描述</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCCaptionAbstract;</span><br><span class="line"><span class="comment">//图像编辑者</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCWriterEditor;</span><br><span class="line"><span class="comment">//图像类型</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCImageType;</span><br><span class="line"><span class="comment">//方向信息</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCImageOrientation;</span><br><span class="line"><span class="comment">//语言信息</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCLanguageIdentifier;</span><br><span class="line"><span class="comment">//星级</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCStarRating;</span><br><span class="line"><span class="comment">//联系人详细信息</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCCreatorContactInfo;</span><br><span class="line"><span class="comment">//图像使用权限</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCRightsUsageTerms;</span><br><span class="line"><span class="comment">//场景代码</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCScene;</span><br></pre></td></tr></table></figure>
<p>上面的kCGImagePropertyIPTCCreatorContactInfo对应的字典中键的定义如下：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//联系人城市</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCContactInfoCity;</span><br><span class="line"><span class="comment">//联系人国家</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCContactInfoCountry;</span><br><span class="line"><span class="comment">//联系人地址</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCContactInfoAddress;</span><br><span class="line"><span class="comment">//邮编</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCContactInfoPostalCode;</span><br><span class="line"><span class="comment">//省份</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCContactInfoStateProvince;</span><br><span class="line"><span class="comment">//电子邮件</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCContactInfoEmails;</span><br><span class="line"><span class="comment">//电话</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCContactInfoPhones;</span><br><span class="line"><span class="comment">//网址</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span> kCGImagePropertyIPTCContactInfoWebURLs;</span><br></pre></td></tr></table></figure>
<p>kCGImageProperty8BIMDictionary对应的字典中可能包含的键定义如下：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Photoshop文件的图层名</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImageProperty8BIMLayerNames;</span><br><span class="line"><span class="comment">//版本</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImageProperty8BIMVersion;</span><br></pre></td></tr></table></figure>
<p>kCGImagePropertyDNGDictionary对应的字典中可能包含的键定义如下：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//DNG版本</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyDNGVersion;</span><br><span class="line"><span class="comment">//兼容的最老版本</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyDNGBackwardVersion;</span><br><span class="line"><span class="comment">//摄像机模型</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyDNGUniqueCameraModel;</span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyDNGLocalizedCameraModel;</span><br><span class="line"><span class="comment">//相机序列码</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyDNGCameraSerialNumber;</span><br><span class="line"><span class="comment">//镜头信息</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyDNGLensInfo;</span><br><span class="line"><span class="comment">//黑度等级</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyDNGBlackLevel;</span><br><span class="line"><span class="comment">//白度等级</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyDNGWhiteLevel;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyDNGCalibrationIlluminant1;</span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyDNGCalibrationIlluminant2;</span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyDNGColorMatrix1;</span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyDNGColorMatrix2;</span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyDNGCameraCalibration1;</span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyDNGCameraCalibration2;</span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyDNGAsShotNeutral;</span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyDNGAsShotWhiteXY;</span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyDNGBaselineExposure;</span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyDNGBaselineNoise;</span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyDNGBaselineSharpness;</span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyDNGPrivateData;</span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyDNGCameraCalibrationSignature;</span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyDNGProfileCalibrationSignature;</span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyDNGNoiseProfile;</span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyDNGWarpRectilinear;</span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyDNGWarpFisheye;</span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyDNGFixVignetteRadial;</span><br></pre></td></tr></table></figure>
<p>kCGImagePropertyCIFFDictionary对应的字典中可能包含的键定义如下：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//相机信息</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyCIFFDescription;</span><br><span class="line"><span class="comment">//固件版本</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyCIFFFirmware;</span><br><span class="line"><span class="comment">//所有者名称</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyCIFFOwnerName;</span><br><span class="line"><span class="comment">//图片名</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyCIFFImageName;</span><br><span class="line"><span class="comment">//图片文件名</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyCIFFImageFileName;</span><br><span class="line"><span class="comment">//曝光方式</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyCIFFReleaseMethod;</span><br><span class="line"><span class="comment">//曝光时间</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyCIFFReleaseTiming;</span><br><span class="line"><span class="comment">//RecordID</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyCIFFRecordID;</span><br><span class="line"><span class="comment">//曝光时间</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyCIFFSelfTimingTime;</span><br><span class="line"><span class="comment">//相机序列号</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyCIFFCameraSerialNumber;</span><br><span class="line"><span class="comment">//图片编码</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyCIFFImageSerialNumber;</span><br><span class="line"><span class="comment">//驱动模式</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyCIFFContinuousDrive);</span><br><span class="line"><span class="comment">//焦点模式</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyCIFFFocusMode;</span><br><span class="line"><span class="comment">//测量模式</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyCIFFMeteringMode;</span><br><span class="line"><span class="comment">//曝光模式</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyCIFFShootingMode;</span><br><span class="line"><span class="comment">//透镜模式</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyCIFFLensModel;</span><br><span class="line"><span class="comment">//最长镜头长度</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyCIFFLensMaxMM;</span><br><span class="line"><span class="comment">//最短镜头长度</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyCIFFLensMinMM;</span><br><span class="line"><span class="comment">//白平衡等级</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyCIFFWhiteBalanceIndex;</span><br><span class="line"><span class="comment">//曝光补偿</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyCIFFFlashExposureComp;</span><br><span class="line"><span class="comment">//实测曝光值</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">CFStringRef</span>  kCGImagePropertyCIFFMeasuredEV);</span><br></pre></td></tr></table></figure>
<h3 id="六、ImageIO框架在实际开发中的几个应用"><a href="#六、ImageIO框架在实际开发中的几个应用" class="headerlink" title="六、ImageIO框架在实际开发中的几个应用"></a>六、ImageIO框架在实际开发中的几个应用</h3><h4 id="1-显示特殊格式的图片"><a href="#1-显示特殊格式的图片" class="headerlink" title="1.显示特殊格式的图片"></a>1.显示特殊格式的图片</h4><pre><code>在平时开发中，我们通常使用UIImage来读取图片，UIImage支持的图片包括png与jpg等，但是类似windows系统的ico图标，UIImage默认是无法显示的，可以通过ImageIO框架来在iOS系统中使用ico图标，示例如下：
</code></pre><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSString</span> * path = [[<span class="built_in">NSBundle</span> mainBundle]pathForResource:<span class="string">@"image"</span> ofType:<span class="string">@"ico"</span>];</span><br><span class="line"><span class="built_in">NSURL</span> * url = [<span class="built_in">NSURL</span> fileURLWithPath:path];</span><br><span class="line"><span class="built_in">CGImageRef</span> myImage = <span class="literal">NULL</span>;</span><br><span class="line"><span class="built_in">CGImageSourceRef</span> myImageSource;</span><br><span class="line"><span class="built_in">CFDictionaryRef</span> myOptions = <span class="literal">NULL</span>;</span><br><span class="line">myImageSource = <span class="built_in">CGImageSourceCreateWithURL</span>((<span class="built_in">CFURLRef</span>)url, <span class="literal">NULL</span>);</span><br><span class="line">myImage = <span class="built_in">CGImageSourceCreateImageAtIndex</span>(myImageSource,</span><br><span class="line">                                          <span class="number">0</span>,</span><br><span class="line">                                          <span class="literal">NULL</span>);</span><br><span class="line"><span class="built_in">CFRelease</span>(myImageSource);</span><br><span class="line"><span class="built_in">UIImageView</span> * image = [[<span class="built_in">UIImageView</span> alloc]initWithFrame:<span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">200</span>, <span class="number">200</span>)];</span><br><span class="line">image.image = [<span class="built_in">UIImage</span> imageWithCGImage:myImage];</span><br></pre></td></tr></table></figure>
<h4 id="2-读取数码相机拍摄图片的地理位置、时间等信息"><a href="#2-读取数码相机拍摄图片的地理位置、时间等信息" class="headerlink" title="2.读取数码相机拍摄图片的地理位置、时间等信息"></a>2.读取数码相机拍摄图片的地理位置、时间等信息</h4><h4 id="3-对相册中图片的地理位置，时间等信息进行自定义修改。"><a href="#3-对相册中图片的地理位置，时间等信息进行自定义修改。" class="headerlink" title="3.对相册中图片的地理位置，时间等信息进行自定义修改。"></a>3.对相册中图片的地理位置，时间等信息进行自定义修改。</h4><h4 id="4-将自定义格式的图片数据写入本地文件。"><a href="#4-将自定义格式的图片数据写入本地文件。" class="headerlink" title="4.将自定义格式的图片数据写入本地文件。"></a>4.将自定义格式的图片数据写入本地文件。</h4><h4 id="5-展示GIF动图"><a href="#5-展示GIF动图" class="headerlink" title="5.展示GIF动图"></a>5.展示GIF动图</h4><pre><code>详情见博客：[https://my.oschina.net/u/2340880/blog/608560](https://my.oschina.net/u/2340880/blog/608560)。
</code></pre><h4 id="6-渐进渲染大图"><a href="#6-渐进渲染大图" class="headerlink" title="6.渐进渲染大图"></a>6.渐进渲染大图</h4><pre><code>渐进渲染技术在对加载大图片时特别重要，你应该使用过地图软件，地图视图在加载时是局部进行加载，当移动或者放大时，地图会一部分一部分的渐进进行加载，使用ImageIO框架可以实现大图渐进渲染的效果，一般在对大图片进行网络请求时，可以获取一部分数据就加载一部分数据，为了便于演示，博客中使用定时器来默认网络返回数据，代码示例如下：
</code></pre><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">ViewController</span> ()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">NSMutableData</span> * _data;</span><br><span class="line">    <span class="built_in">NSData</span> * _allData;</span><br><span class="line">    <span class="built_in">NSUInteger</span> length;</span><br><span class="line">    <span class="built_in">UIImageView</span> * _imageView;</span><br><span class="line">    <span class="built_in">NSTimer</span> * timer;</span><br><span class="line">    <span class="built_in">NSInteger</span> le;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">ViewController</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</span><br><span class="line">    [<span class="keyword">super</span> viewDidLoad];</span><br><span class="line">    _data = [[<span class="built_in">NSMutableData</span> alloc]init];</span><br><span class="line">    <span class="built_in">NSString</span> * path = [[<span class="built_in">NSBundle</span> mainBundle]pathForResource:<span class="string">@"Default-Portrait-ns@2x"</span> ofType:<span class="string">@"png"</span>];</span><br><span class="line">    _allData = [<span class="built_in">NSData</span> dataWithContentsOfFile:path];</span><br><span class="line">    length = _allData.length;</span><br><span class="line">    le = length/<span class="number">10</span>;</span><br><span class="line">    timer = [<span class="built_in">NSTimer</span> scheduledTimerWithTimeInterval:<span class="number">1</span> target:<span class="keyword">self</span> selector:<span class="keyword">@selector</span>(updateImage) userInfo:<span class="literal">nil</span> repeats:<span class="literal">YES</span>];</span><br><span class="line">    _imageView = [[<span class="built_in">UIImageView</span> alloc]initWithFrame:<span class="keyword">self</span>.view.frame];</span><br><span class="line">    [<span class="keyword">self</span>.view addSubview:_imageView];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-(<span class="keyword">void</span>)updateImage&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (index==<span class="number">10</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">NSUInteger</span> l;</span><br><span class="line">    <span class="keyword">if</span> (index==<span class="number">9</span>) &#123;</span><br><span class="line">        l=length-le*<span class="number">9</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        l= le;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    Byte by[l];</span><br><span class="line">    [_allData getBytes:by range:<span class="built_in">NSMakeRange</span>(index*le, l)];</span><br><span class="line">    [_data appendBytes:by length:l];</span><br><span class="line">    <span class="built_in">CGImageSourceRef</span> myImageSource = <span class="built_in">CGImageSourceCreateWithData</span>((<span class="built_in">CFDataRef</span>)_data, <span class="literal">NULL</span>);</span><br><span class="line">    <span class="built_in">CGImageRef</span> myImage = <span class="built_in">CGImageSourceCreateImageAtIndex</span>(myImageSource,</span><br><span class="line">                                              <span class="number">0</span>,</span><br><span class="line">                                              <span class="literal">NULL</span>);</span><br><span class="line">    <span class="built_in">CFRelease</span>(myImageSource);</span><br><span class="line">    </span><br><span class="line">    _imageView.image = [<span class="built_in">UIImage</span> imageWithCGImage:myImage];</span><br><span class="line">    <span class="comment">//    image.image = [UIImage imageNamed:@"image.ico"];</span></span><br><span class="line">    index++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<p>效果如下：</p>
<p><img src="https://static.oschina.net/uploads/space/2017/0214/185328_kOrD_2340880.gif" alt></p>

    </div>

    <div class="post-footer">
        <div>
            
                转载声明：商业转载请联系作者获得授权,非商业转载请注明出处 © 微信：15137348047
            
        </div>
        <div>
            
        </div>
    </div>
</article>

<div class="article-nav prev-next-wrap clearfix">
    
        <a href="/2017/02/15/305深入理解JavaScript函数/" class="pre-post btn btn-default" title='深入理解JavaScript函数'>
            <i class="fa fa-angle-left fa-fw"></i><span class="hidden-lg">上一篇</span>
            <span class="hidden-xs">深入理解JavaScript函数</span>
        </a>
    
    
        <a href="/2017/01/06/303JavaScript基础之八——全局函数的应用/" class="next-post btn btn-default" title='JavaScript基础之八——全局函数的应用'>
            <span class="hidden-lg">下一篇</span>
            <span class="hidden-xs">JavaScript基础之八——全局函数的应用</span><i class="fa fa-angle-right fa-fw"></i>
        </a>
    
</div>


    <div id="comments">
        
	
<div id="lv-container" data-id="city" data-uid="MTAyMC8zNzY0Ny8xNDE3OA==">
  <script type="text/javascript">
     (function(d, s) {
         var j, e = d.getElementsByTagName(s)[0];
         if (typeof LivereTower === 'function') { return; }
         j = d.createElement(s);
         j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
         j.async = true;
         e.parentNode.insertBefore(j, e);
     })(document, 'script');
  </script>
</div>


    </div>





                </main>
                
                    <aside id="article-toc" role="navigation" class="col-md-4">
    <div class="widget">
        <h3 class="title">文章目录</h3>
        
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#iOS中ImageIO框架详解与应用分析"><span class="toc-text">iOS中ImageIO框架详解与应用分析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#一、引言"><span class="toc-text">一、引言</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#二、CGImageSource详解"><span class="toc-text">二、CGImageSource详解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#三、CGImageDestination详解"><span class="toc-text">三、CGImageDestination详解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#四、关于CGImageMetadata"><span class="toc-text">四、关于CGImageMetadata</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#五、CGImageProperties中定义的字典意义"><span class="toc-text">五、CGImageProperties中定义的字典意义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#六、ImageIO框架在实际开发中的几个应用"><span class="toc-text">六、ImageIO框架在实际开发中的几个应用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-显示特殊格式的图片"><span class="toc-text">1.显示特殊格式的图片</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-读取数码相机拍摄图片的地理位置、时间等信息"><span class="toc-text">2.读取数码相机拍摄图片的地理位置、时间等信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-对相册中图片的地理位置，时间等信息进行自定义修改。"><span class="toc-text">3.对相册中图片的地理位置，时间等信息进行自定义修改。</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-将自定义格式的图片数据写入本地文件。"><span class="toc-text">4.将自定义格式的图片数据写入本地文件。</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-展示GIF动图"><span class="toc-text">5.展示GIF动图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-渐进渲染大图"><span class="toc-text">6.渐进渲染大图</span></a></li></ol></li></ol></li></ol>
        
    </div>
</aside>

                
            </div>
        </div>
    </section>
    <footer class="main-footer">
    <div class="container">
        <div class="row">
        </div>
    </div>
</footer>

<a id="back-to-top" class="icon-btn hide">
	<i class="fa fa-chevron-up"></i>
</a>




    <div class="copyright">
    <div class="container">
        <div class="row">
            <div class="col-sm-12"> 
                <span>Copyright &copy; 2018
                </span> | 
                <span>
                    Powered by <a href="//hexo.io" class="copyright-links" target="_blank" rel="nofollow">Hexo</a>
                </span> | 
                <span>
                    Theme by <a href="//github.com/shenliyang/hexo-theme-snippet.git" class="copyright-links" target="_blank" rel="nofollow">Snippet</a>
                </span>
            </div>
        </div>
    </div>
</div>



<script src="/js/app.js?rev=@@hash"></script>


</body>
</html>